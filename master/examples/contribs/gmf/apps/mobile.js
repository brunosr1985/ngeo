/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./contribs/gmf/apps/mobile/Controller.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./contribs/gmf/apps/appmodule.js":
/*!****************************************!*\
  !*** ./contribs/gmf/apps/appmodule.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");


var appModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('app', []);
appModule.config(['$compileProvider', function ($compileProvider) {
  if (!('debug' in Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["decodeQueryString"])(window.location.search))) {
    $compileProvider.debugInfoEnabled(false);
  }
}]);
/* harmony default export */ __webpack_exports__["default"] = (appModule);

/***/ }),

/***/ "./contribs/gmf/apps/mobile/Controller.js":
/*!************************************************!*\
  !*** ./contribs/gmf/apps/mobile/Controller.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sass_vars_mobile_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sass/vars_mobile.scss */ "./contribs/gmf/apps/mobile/sass/vars_mobile.scss");
/* harmony import */ var _sass_vars_mobile_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_sass_vars_mobile_scss__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sass_mobile_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sass/mobile.scss */ "./contribs/gmf/apps/mobile/sass/mobile.scss");
/* harmony import */ var _sass_mobile_scss__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_sass_mobile_scss__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var gmf_controllers_AbstractMobileController_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/controllers/AbstractMobileController.js */ "./contribs/gmf/src/controllers/AbstractMobileController.js");
/* harmony import */ var _appmodule_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../appmodule.js */ "./contribs/gmf/apps/appmodule.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







if (!window.requestAnimationFrame) {
  alert('Your browser is not supported, please update it or use another one. You will be redirected.\n\n' + "Votre navigateur n'est pas supporté, veuillez le mettre à jour ou en utiliser un autre. " + 'Vous allez être redirigé.\n\n' + 'Ihr Browser wird nicht unterstützt, bitte aktualisieren Sie ihn oder verwenden Sie einen anderen. ' + 'Sie werden weitergeleitet.');
  window.location.href = 'https://geomapfish.org/';
}

var Controller = function (_AbstractMobileContro) {
  _inheritsLoose(Controller, _AbstractMobileContro);

  function Controller() {
    return _AbstractMobileContro.apply(this, arguments) || this;
  }

  return Controller;
}(gmf_controllers_AbstractMobileController_js__WEBPACK_IMPORTED_MODULE_3__["AbstractMobileController"]);

var appModule = angular__WEBPACK_IMPORTED_MODULE_2___default.a.module('Appmobile', [_appmodule_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_controllers_AbstractMobileController_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
appModule.controller('MobileController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (appModule);

/***/ }),

/***/ "./contribs/gmf/apps/mobile/sass/mobile.scss":
/*!***************************************************!*\
  !*** ./contribs/gmf/apps/mobile/sass/mobile.scss ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/apps/mobile/sass/vars_mobile.scss":
/*!********************************************************!*\
  !*** ./contribs/gmf/apps/mobile/sass/vars_mobile.scss ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/authentication/Service.js":
/*!****************************************************!*\
  !*** ./contribs/gmf/src/authentication/Service.js ***!
  \****************************************************/
/*! exports provided: RouteSuffix, AuthenticationService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouteSuffix", function() { return RouteSuffix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthenticationService", function() { return AuthenticationService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_events_Target_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events/Target.js */ "./node_modules/ol/events/Target.js");
/* harmony import */ var _sentry_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sentry/browser */ "./node_modules/@sentry/browser/esm/index.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var RouteSuffix = {
  CHANGE_PASSWORD: 'loginchangepassword',
  IS_LOGGED_IN: 'loginuser',
  LOGIN: 'login',
  LOGOUT: 'logout',
  RESET_PASSWORD: 'loginresetpassword'
};
var AuthenticationService = function (_olEventsEventTarget) {
  AuthenticationService.$inject = ["$http", "$rootScope", "authenticationBaseUrl", "gmfUser", "gmfAuthenticationConfig", "gmfAuthenticationNoReloadRole", "$interval"];

  _inheritsLoose(AuthenticationService, _olEventsEventTarget);

  function AuthenticationService($http, $rootScope, authenticationBaseUrl, gmfUser, gmfAuthenticationConfig, gmfAuthenticationNoReloadRole, $interval) {
    var _this;

    _this = _olEventsEventTarget.call(this) || this;
    _this.$http_ = $http;
    _this.$rootScope_ = $rootScope;
    _this.baseUrl_ = authenticationBaseUrl.replace(/\/$/, '');
    _this.user_ = gmfUser;
    _this.forcePasswordChange = gmfAuthenticationConfig.forcePasswordChange === true;
    _this.noReloadRole_ = gmfAuthenticationNoReloadRole;

    _this.load_();

    _this.verifyConnection_ = $interval(function () {
      _this.checkConnection_();
    }, 60000);
    return _this;
  }

  var _proto = AuthenticationService.prototype;

  _proto.checkConnection_ = function checkConnection_() {
    var _this2 = this;

    if (this.user_.username) {
      var url = this.baseUrl_ + "/" + RouteSuffix.IS_LOGGED_IN;
      this.$http_.get(url, {
        withCredentials: true
      }).then(function (resp) {
        if (_this2.user_.username !== resp.data.username) {
          _this2.handleDisconnection();
        }
      }).catch(function (err) {
        console.error("Error on connection check: " + err.statusText);
      });
    }
  };

  _proto.handleDisconnection = function handleDisconnection() {
    this.logout();
    var eventDisconnect = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('disconnected', {
      user: this.user_
    });
    this.dispatchEvent(eventDisconnect);
  };

  _proto.load_ = function load_() {
    var _this3 = this;

    var url = this.baseUrl_ + "/" + RouteSuffix.IS_LOGGED_IN;
    this.$http_.get(url, {
      withCredentials: true
    }).then(function (resp) {
      return _this3.handleLogin_(true, resp);
    });
  };

  _proto.changePassword = function changePassword(login, oldPwd, newPwd, confPwd, otp) {
    var _this4 = this;

    if (otp === void 0) {
      otp = undefined;
    }

    var url = this.baseUrl_ + "/" + RouteSuffix.CHANGE_PASSWORD;
    return this.$http_.post(url, $.param({
      'login': login,
      'oldPassword': oldPwd,
      'otp': otp,
      'newPassword': newPwd,
      'confirmNewPassword': confPwd
    }), {
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      withCredentials: true
    }).then(function (resp) {
      _this4.setUser_(resp.data, true);
    });
  };

  _proto.login = function login(_login, pwd, otp) {
    var _this5 = this;

    if (otp === void 0) {
      otp = undefined;
    }

    var url = this.baseUrl_ + "/" + RouteSuffix.LOGIN;
    var params = {
      'login': _login,
      'password': pwd
    };

    if (otp) {
      Object.assign(params, {
        'otp': otp
      });
    }

    return this.$http_.post(url, $.param(params), {
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      withCredentials: true
    }).then(function (resp) {
      return _this5.onSuccessfulLogin(resp);
    }).then(function (resp) {
      return _this5.handleLogin_(false, resp);
    });
  };

  _proto.onSuccessfulLogin = function onSuccessfulLogin(resp) {
    return resp;
  };

  _proto.logout = function logout() {
    var _this6 = this;

    var noReload = this.noReloadRole_ ? this.getRolesNames().includes(this.noReloadRole_) : false;
    var url = this.baseUrl_ + "/" + RouteSuffix.LOGOUT;
    return this.$http_.get(url, {
      withCredentials: true
    }).then(function () {
      _this6.resetUser_(noReload);
    });
  };

  _proto.resetPassword = function resetPassword(login) {
    var url = this.baseUrl_ + "/" + RouteSuffix.RESET_PASSWORD;
    return this.$http_.post(url, $.param({
      'login': login
    }), {
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      }
    }).then(function (resp) {
      return resp.data;
    });
  };

  _proto.getEmail = function getEmail() {
    return this.user_.email || null;
  };

  _proto.getRolesIds = function getRolesIds() {
    return this.user_.roles ? this.user_.roles.map(function (role) {
      return role.id;
    }) : [];
  };

  _proto.getRolesNames = function getRolesNames() {
    return this.user_.roles ? this.user_.roles.map(function (role) {
      return role.name;
    }) : [];
  };

  _proto.handleLogin_ = function handleLogin_(checkingLoginStatus, resp) {
    if (resp.data.is_password_changed === false && this.forcePasswordChange) {
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('mustChangePassword', {
        user: resp.data
      });
      this.dispatchEvent(event);
      return;
    }

    this.setUser_(resp.data, !checkingLoginStatus);

    if (checkingLoginStatus) {
      var _event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('ready', {
        user: this.user_
      });

      this.dispatchEvent(_event);
    }

    return resp;
  };

  _proto.setUser_ = function setUser_(respData, emitEvent) {
    _sentry_browser__WEBPACK_IMPORTED_MODULE_3__["setUser"]({
      username: respData.username
    });

    for (var key in this.user_) {
      this.user_[key] = null;
    }

    for (var _key in respData) {
      this.user_[_key] = respData[_key];
    }

    if (emitEvent && respData.username !== undefined) {
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('login', {
        user: this.user_
      });
      this.dispatchEvent(event);
    }
  };

  _proto.resetUser_ = function resetUser_(noReload) {
    noReload = noReload || false;

    for (var key in this.user_) {
      this.user_[key] = null;
    }

    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('logout', {
      user: this.user_
    });
    this.dispatchEvent(event);

    if (!noReload) {
      this.load_();
    }
  };

  return AuthenticationService;
}(ol_events_Target_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfAuthenticationService', []);
myModule.service('gmfAuthenticationService', AuthenticationService);
myModule.value('gmfUser', {
  functionalities: null,
  is_password_changed: null,
  roles: null,
  username: null
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/authentication/component.html":
/*!********************************************************!*\
  !*** ./contribs/gmf/src/authentication/component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div ng-if="$ctrl.gmfUser.is_intranet" class="form-group">\n  <span>{{\'You are recognized as an intranet user.\' | translate}}</span>\n</div>\n\n<div ng-if="$ctrl.gmfUser.username">\n  <div class="form-group">\n    <span>{{\'Logged in as\' | translate}}</span>\n    <strong>{{ ::$ctrl.gmfUser.username }}</strong>.\n  </div>\n\n  <form\n      name="logoutForm"\n      role="form"\n      ng-submit="$ctrl.logout()"\n      ng-controller="GmfAuthenticationController"\n      ng-class="{\'has-error\': $ctrl.error}"\n      ng-if="!$ctrl.changingPassword">\n    <div class="form-group">\n      <input\n          type="submit"\n          class="form-control btn prime"\n          value="{{\'Logout\' | translate}}" />\n    </div>\n    <div class="form-group">\n    <input\n        ng-show="$ctrl.allowPasswordChange"\n        type="button"\n        class="form-control btn btn-default"\n        value="{{\'Change password\' | translate}}"\n        ng-click="$ctrl.changingPassword = true"/>\n    </div>\n  </form>\n</div>\n\n<div ng-if="$ctrl.infoMessage" class="alert alert-warning">\n  <span>{{ $ctrl.infoMessage }}</span>\n</div>\n\n<div ng-if="$ctrl.disconnectedShown" class="alert alert-warning" translate>\n  You are not logged in any more. The Interface has been reloaded.\n</div>\n\n<div ng-if="!$ctrl.gmfUser.username && !$ctrl.changingPassword">\n  <form\n      name="loginForm"\n      role="form"\n      ng-submit="$ctrl.login()"\n      ng-controller="GmfAuthenticationController"\n      ng-class="{\'has-error\': $ctrl.error}">\n    <div class="form-group">\n      <input\n          type="text"\n          class="form-control"\n          name="login"\n          ng-model="$ctrl.loginVal"\n          ng-attr-placeholder="{{\'Username\' | translate}}" />\n    </div>\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="password"\n          ng-model="$ctrl.pwdVal"\n          ng-attr-placeholder="{{\'Password\' | translate}}"/>\n    </div>\n    <div ng-if="$ctrl.twoFactorAuth" class="form-group">\n      {{\'The following field should be kept empty on first login:\' | translate}}\n      <input\n          type="text"\n          autocomplete="off"\n          class="form-control"\n          name="otp"\n          ng-model="$ctrl.otpVal"\n          ng-attr-placeholder="{{\'Authentication code\' | translate}}"/>\n    </div>\n    <div class="form-group">\n    <input\n        type="submit"\n        class="form-control btn prime"\n        value="{{\'Connect\' | translate}}" />\n    </div>\n    <div class="login-spinner" ng-if="$ctrl.isLoading">\n      <i class="fa custom-spinner-connect fa-spin">\n        ' +
((__t = (__webpack_require__(/*! gmf/icons/spinner.svg?viewbox&height=1em */ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=1em"))) == null ? '' : __t) +
'\n      </i>\n    </div>\n    <div ng-show="$ctrl.allowPasswordReset" class="form-group">\n      <a ng-click="$ctrl.resetPassword()"\n         href="">{{\'Password forgotten?\' | translate}}</a>\n    </div>\n  </form>\n\n  <div ng-if="$ctrl.resetPasswordShown" class="alert alert-info" translate>\n    A new password has just been sent to you by e-mail.\n  </div>\n</div>\n\n<div ng-if="$ctrl.changingPassword">\n  <div\n      class="alert alert-warning"\n      ng_if="$ctrl.userMustChangeItsPassword">\n      {{\'You must change your password\' | translate}}\n  </div>\n\n  <form\n      name="changePasswordForm"\n      role="form"\n      ng-submit="$ctrl.changePassword()"\n      ng-controller="GmfAuthenticationController"\n      ng-class="{\'has-error\': $ctrl.error}">\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="oldpassword"\n          ng-model="$ctrl.oldPwdVal"\n          ng-attr-placeholder="{{\'Old password\' | translate}}"/>\n    </div>\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="newpassword"\n          ng-model="$ctrl.newPwdVal"\n          ng-attr-placeholder="{{\'New password\' | translate}}"/>\n    </div>\n    <div class="form-group">\n      <input\n          type="password"\n          class="form-control"\n          name="newpasswordconfirm"\n          ng-model="$ctrl.newPwdConfVal"\n          ng-attr-placeholder="{{\'Confirm new password\' | translate}}"/>\n    </div>\n    <div ng-if="$ctrl.gmfUser.otp_uri" class="form-group">\n      <label translate>Two factor authentication QR code:</label>\n      <div><img class="" ng-src="{{$ctrl.otpImage}}"></div>\n    </div>\n    <div ng-if="$ctrl.gmfUser.two_factor_totp_secret" class="form-group">\n      <label translate>Two factor authentication key:</label>\n      <code>{{$ctrl.gmfUser.two_factor_totp_secret}}</code>\n    </div>\n    <div ng-if="$ctrl.twoFactorAuth" class="form-group">\n      <input\n          type="text"\n          autocomplete="off"\n          class="form-control"\n          name="otp"\n          ng-model="$ctrl.otpVal"\n          ng-attr-placeholder="{{\'Authentication code\' | translate}}"/>\n      </div>\n      <div class="form-group">\n      <input\n          type="submit"\n          class="form-control btn prime"\n          value="{{\'Change password\' | translate}}" />\n    </div>\n    <div class="form-group">\n      <input\n          type="button"\n          class="form-control btn btn-default"\n          value="{{\'Cancel\' | translate}}"\n          ng-click="$ctrl.changePasswordReset()" />\n    </div>\n  </form>\n</div>\n\n<div ng-show="$ctrl.error" class="gmf-authentication-error help-block"></div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/authentication/component.js":
/*!******************************************************!*\
  !*** ./contribs/gmf/src/authentication/component.js ***!
  \******************************************************/
/*! exports provided: AuthenticationController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthenticationController", function() { return AuthenticationController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_authentication_Service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/authentication/Service.js */ "./contribs/gmf/src/authentication/Service.js");
/* harmony import */ var gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/backgroundlayerselector/status.js */ "./contribs/gmf/src/backgroundlayerselector/status.js");
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var ngeo_message_Notification_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/message/Notification.js */ "./src/message/Notification.js");
/* harmony import */ var ngeo_message_modalComponent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/message/modalComponent.js */ "./src/message/modalComponent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var qruri__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! qruri */ "./node_modules/qruri/index.js");
/* harmony import */ var qruri__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(qruri__WEBPACK_IMPORTED_MODULE_7__);








var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfAuthentication', [gmf_authentication_Service_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_message_Notification_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_message_modalComponent_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]);

function gmfAuthenticationTemplateUrl_(element, attrs) {
  var templateUrl = attrs.gmfAuthenticationTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/authentication';
}

myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/authentication', __webpack_require__(/*! ./component.html */ "./contribs/gmf/src/authentication/component.html"));
}]);
gmfAuthenticationTemplateUrl.$inject = ["$element", "$attrs", "gmfAuthenticationTemplateUrl"];

function gmfAuthenticationTemplateUrl($element, $attrs, gmfAuthenticationTemplateUrl) {
  return gmfAuthenticationTemplateUrl($element, $attrs);
}

var authenticationComponent = {
  bindings: {
    'passwordValidator': '<?gmfAuthenticationPasswordValidator',
    'onSuccessfulLogin': '<?gmfAuthenticationOnSuccessfulLogin',
    'infoMessage': '=?gmfAuthenticationInfoMessage'
  },
  controller: 'GmfAuthenticationController',
  templateUrl: gmfAuthenticationTemplateUrl
};
myModule.value('gmfAuthenticationTemplateUrl', gmfAuthenticationTemplateUrl_);
myModule.component('gmfAuthentication', authenticationComponent);
var AuthenticationController = function () {
  AuthenticationController.$inject = ["$scope", "$element", "gmfTwoFactorAuth", "gettextCatalog", "gmfAuthenticationService", "gmfUser", "ngeoNotification", "gmfAuthenticationConfig"];

  function AuthenticationController($scope, $element, gmfTwoFactorAuth, gettextCatalog, gmfAuthenticationService, gmfUser, ngeoNotification, gmfAuthenticationConfig) {
    var _this = this;

    this.$element_ = $element;
    this.gmfUser = gmfUser;
    this.gettextCatalog = gettextCatalog;
    this.gmfAuthenticationService_ = gmfAuthenticationService;
    this.notification_ = ngeoNotification;
    this.twoFactorAuth = gmfTwoFactorAuth;
    this.allowPasswordReset = gmfAuthenticationConfig.allowPasswordReset !== false;
    this.allowPasswordChange = gmfAuthenticationConfig.allowPasswordChange !== false;
    this.passwordValidator = null;
    this.onSuccessfulLogin = null;
    this.infoMessage = null;
    this.changingPassword = false;
    this.changingPasswordUsername = null;
    this.userMustChangeItsPassword = false;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(gmfAuthenticationService, 'mustChangePassword', function (event) {
      _this.gmfUser = event.detail.user;
      var username = _this.gmfUser.username;
      _this.changingPasswordUsername = username;
      _this.changingPassword = true;
      _this.userMustChangeItsPassword = true;
    });
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(gmfAuthenticationService, 'login', function () {
      _this.changingPassword = false;
      _this.userMustChangeItsPassword = false;
    });
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(gmfAuthenticationService, 'disconnected', function (event) {
      _this.disconnectedShown = true;
    });
    this.resetPasswordShown = false;
    this.disconnectedShown = false;
    this.error = false;
    this.loginVal = '';
    this.pwdVal = '';
    this.otpVal;
    this.oldPwdVal = '';
    this.newPwdVal = '';
    this.newPwdConfVal = '';
    this.isLoading = false;
    $scope.$watch(function () {
      return _this.gmfUser.otp_uri;
    }, function (val) {
      if (val) {
        _this.otpImage = qruri__WEBPACK_IMPORTED_MODULE_7___default()(val, {
          margin: 2
        });
      }
    });
  }

  var _proto = AuthenticationController.prototype;

  _proto.$onInit = function $onInit() {
    if (this.onSuccessfulLogin) {
      this.gmfAuthenticationService_.onSuccessfulLogin = this.onSuccessfulLogin;
    }
  };

  _proto.changePassword = function changePassword() {
    var _this2 = this;

    var gettextCatalog = this.gettextCatalog;
    var oldPwd = this.oldPwdVal;
    var newPwd = this.newPwdVal;
    var confPwd = this.newPwdConfVal;
    var errors = [];

    if (oldPwd === '') {
      errors.push(gettextCatalog.getString('The old password is required.'));
    }

    if (newPwd === '') {
      errors.push(gettextCatalog.getString('The new password is required.'));
    }

    if (confPwd === '') {
      errors.push(gettextCatalog.getString('The password confirmation is required.'));
    }

    if (errors.length) {
      this.setError_(errors);
    } else {
      if (oldPwd === newPwd) {
        errors.push(gettextCatalog.getString('The old and new passwords are the same.'));
      }

      if (newPwd !== confPwd) {
        errors.push(gettextCatalog.getString("The passwords don't match."));
      }

      if (this.passwordValidator) {
        if (!this.passwordValidator.isPasswordValid(oldPwd)) {
          errors.push(gettextCatalog.getString(this.passwordValidator.notValidMessage));
        }
      }

      if (errors.length) {
        this.setError_(errors);
      } else {
        var username;

        if (this.userMustChangeItsPassword) {
          username = this.changingPasswordUsername;
        } else {
          username = this.gmfUser.username;
        }

        console.assert(username);
        this.gmfAuthenticationService_.changePassword(username, oldPwd, newPwd, confPwd, this.otpVal).then(function () {
          _this2.changePasswordReset();

          _this2.setError_([gettextCatalog.getString('Your password has successfully been changed.')], ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["MessageType"].INFORMATION);
        }).catch(function (err) {
          _this2.oldPwdVal = '';
          _this2.otpVal = '';

          _this2.setError_(gettextCatalog.getString('Incorrect old password.'));
        });
      }
    }
  };

  _proto.login = function login() {
    var _this3 = this;

    this.manualLoginLogout_();
    var gettextCatalog = this.gettextCatalog;
    this.isLoading = true;
    var errors = [];

    if (this.loginVal === '') {
      errors.push(gettextCatalog.getString('The username is required.'));
    }

    if (this.pwdVal === '') {
      errors.push(gettextCatalog.getString('The password is required.'));
    }

    if (errors.length) {
      this.isLoading = false;
      this.setError_(errors);
    } else {
      this.gmfAuthenticationService_.login(this.loginVal, this.pwdVal, this.otpVal).then(function () {
        _this3.isLoading = false;
        _this3.loginVal = '';
        _this3.pwdVal = '';
        _this3.otpVal = '';

        _this3.resetError_();
      }).catch(function () {
        _this3.isLoading = false;
        _this3.pwdVal = '';
        _this3.otpVal = '';

        _this3.setError_(gettextCatalog.getString('Incorrect credentials or disabled account.'));
      });
    }
  };

  _proto.logout = function logout() {
    var _this4 = this;

    this.manualLoginLogout_();
    var gettextCatalog = this.gettextCatalog;
    this.isLoading = true;
    this.gmfAuthenticationService_.logout().then(function () {
      _this4.isLoading = false;

      _this4.resetError_();
    }).catch(function () {
      _this4.isLoading = false;

      _this4.setError_(gettextCatalog.getString('Could not log out.'));
    });
  };

  _proto.manualLoginLogout_ = function manualLoginLogout_() {
    gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_2__["gmfBackgroundlayerStatus"].touchedByUser = true;
  };

  _proto.resetPassword = function resetPassword() {
    var _this5 = this;

    var gettextCatalog = this.gettextCatalog;
    this.isLoading = true;

    if (!this.loginVal) {
      this.isLoading = false;
      this.setError_(gettextCatalog.getString('Please, input a login...'));
      return;
    }

    this.gmfAuthenticationService_.resetPassword(this.loginVal).then(function () {
      _this5.isLoading = false;
      _this5.resetPasswordShown = true;

      _this5.resetError_();
    }).catch(function () {
      _this5.isLoading = false;

      _this5.setError_(gettextCatalog.getString('An error occurred while resetting the password.'));
    });
  };

  _proto.changePasswordReset = function changePasswordReset() {
    this.resetError_();
    this.changingPassword = false;
    this.userMustChangeItsPassword = false;
    this.oldPwdVal = '';
    this.newPwdVal = '';
    this.newPwdConfVal = '';
  };

  _proto.setError_ = function setError_(errors, messageType) {
    var _this6 = this;

    if (messageType == undefined) {
      messageType = ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["MessageType"].ERROR;
    }

    if (this.error) {
      this.resetError_();
    }

    this.error = true;
    var container = this.$element_.find('.gmf-authentication-error');

    if (!Array.isArray(errors)) {
      errors = [errors];
    }

    errors.forEach(function (error) {
      var options = {
        msg: error,
        target: container
      };

      if (messageType) {
        options.type = messageType;
      }

      _this6.notification_.notify(options);
    });
  };

  _proto.resetError_ = function resetError_() {
    this.notification_.clear();
    this.error = false;
  };

  return AuthenticationController;
}();
myModule.controller('GmfAuthenticationController', AuthenticationController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/authentication/module.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/authentication/module.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_authentication_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/authentication/component.js */ "./contribs/gmf/src/authentication/component.js");
/* harmony import */ var gmf_authentication_Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/authentication/Service.js */ "./contribs/gmf/src/authentication/Service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfAuthenticationModule', [gmf_authentication_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_authentication_Service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/backgroundlayerselector/component.html":
/*!*****************************************************************!*\
  !*** ./contribs/gmf/src/backgroundlayerselector/component.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<ul class="gmf-backgroundlayerselector">\n  <li ng-repeat="layer in ctrl.bgLayers"\n      ng-click="ctrl.setLayer(layer)"\n      ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer, \'gmf-backgroundlayerselector-disabled\': ctrl.opacityLayer == layer}">\n    <img class="gmf-thumb"\n         ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}" />\n    <span class="gmf-text">{{layer.get("label") | translate}}</span>\n    <span ng-class="{\'gmf-backgroundlayerselector-opacity-check\': ctrl.opacityLayer == layer}"></span>\n  </li>\n\n  <input ng-if="ctrl.opacityLayer"\n         class="input-action gmf-backgroundlayerselector-opacity-slider"\n         name="bg-layer-opacity"\n         type="range"\n         min="0"\n         max="1"\n         step="0.01"\n         ng-model="ctrl.getSetBgLayerOpacity"\n         ng-model-options="{getterSetter: true}">\n</ul>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/backgroundlayerselector/component.js":
/*!***************************************************************!*\
  !*** ./contribs/gmf/src/backgroundlayerselector/component.js ***!
  \***************************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/backgroundlayerselector/status.js */ "./contribs/gmf/src/backgroundlayerselector/status.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/map/BackgroundLayerMgr.js */ "./src/map/BackgroundLayerMgr.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
Controller.$inject = ["$scope", "ngeoBackgroundLayerMgr", "gmfThemes", "gmfBackgroundLayerSelectorOptions"];





var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfBackgroundlayerselector', [gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
myModule.value('gmfBackgroundlayerselectorTemplateUrl', function ($element, $attrs) {
  var templateUrl = $attrs.gmfBackgroundlayerselectorTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/backgroundlayerselector';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/backgroundlayerselector', __webpack_require__(/*! ./component.html */ "./contribs/gmf/src/backgroundlayerselector/component.html"));
}]);
gmfBackgroundlayerselectorTemplateUrl.$inject = ["$element", "$attrs", "gmfBackgroundlayerselectorTemplateUrl"];

function gmfBackgroundlayerselectorTemplateUrl($element, $attrs, gmfBackgroundlayerselectorTemplateUrl) {
  return gmfBackgroundlayerselectorTemplateUrl($element, $attrs);
}

var backgroundlayerselectorComponent = {
  controller: 'GmfBackgroundlayerselectorController as ctrl',
  bindings: {
    'map': '=gmfBackgroundlayerselectorMap',
    'select': '&?gmfBackgroundlayerselectorSelect'
  },
  templateUrl: gmfBackgroundlayerselectorTemplateUrl
};
myModule.component('gmfBackgroundlayerselector', backgroundlayerselectorComponent);
function Controller($scope, ngeoBackgroundLayerMgr, gmfThemes, gmfBackgroundLayerSelectorOptions) {
  var _this = this;

  this.map = null;
  this.options = gmfBackgroundLayerSelectorOptions;
  this.select = null;
  this.bgLayer = null;
  this.bgLayers = null;
  this.opacityLayer = null;
  this.gmfThemes_ = gmfThemes;
  this.listenerKeys_ = [];
  this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(gmfThemes, 'change', this.handleThemesChange_, this));
  this.backgroundLayerMgr_ = ngeoBackgroundLayerMgr;
  this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(this.backgroundLayerMgr_, 'change', function (event) {
    _this.bgLayer = event.detail.current;
  }));
  $scope.$on('$destroy', this.handleDestroy_.bind(this));
}

Controller.prototype.$onInit = function () {
  this.handleThemesChange_();
};

Controller.prototype.handleThemesChange_ = function () {
  var _this2 = this;

  this.gmfThemes_.getBgLayers().then(function (layers) {
    _this2.bgLayers = layers;

    if (_this2.options.opacityLayer !== undefined) {
      var opacityLayer = layers.find(function (layer) {
        return layer.get('label') === _this2.options.opacityLayer;
      });

      if (opacityLayer !== undefined) {
        _this2.setOpacityBgLayer(opacityLayer);

        _this2.bgLayers = _this2.bgLayers.slice();

        var indexOpa = _this2.bgLayers.findIndex(function (layer) {
          return layer === _this2.opacityLayer;
        });

        _this2.bgLayers.splice(indexOpa, 1);

        _this2.bgLayers.push(opacityLayer);
      }
    }
  });
};

Controller.prototype.getSetBgLayerOpacity = function (val) {
  if (!this.opacityLayer) {
    throw new Error('Missing opacityLayer');
  }

  if (val !== undefined) {
    this.opacityLayer.setOpacity(val);
    this.opacityLayer.setVisible(val !== 0);
    this.bgLayer.setVisible(val !== 1);
  }

  return this.opacityLayer.getOpacity();
};

Controller.prototype.setLayer = function (layer, opt_silent) {
  gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_1__["gmfBackgroundlayerStatus"].touchedByUser = true;
  var opacity = this.opacityLayer ? this.opacityLayer.getOpacity() : 0;
  this.bgLayer = layer;
  this.backgroundLayerMgr_.set(this.map, layer);
  layer.setVisible(opacity !== 1);

  if (this.opacityLayer) {
    this.opacityLayer.setVisible(opacity !== 0);
    this.opacityLayer.setOpacity(opacity);
  }

  if (!opt_silent && this.select) {
    this.select();
  }
};

Controller.prototype.setOpacityBgLayer = function (layer) {
  var opacity = this.opacityLayer ? this.opacityLayer.getOpacity() : 0;
  layer.setOpacity(opacity);
  this.opacityLayer = layer;
  this.opacityLayer.setVisible(opacity !== 0);
  this.bgLayer.setVisible(opacity !== 1);
  this.backgroundLayerMgr_.setOpacityBgLayer(this.map, layer);
};

Controller.prototype.handleDestroy_ = function () {
  this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["unlistenByKey"]);
  this.listenerKeys_.length = 0;
};

myModule.controller('GmfBackgroundlayerselectorController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/backgroundlayerselector/status.js":
/*!************************************************************!*\
  !*** ./contribs/gmf/src/backgroundlayerselector/status.js ***!
  \************************************************************/
/*! exports provided: gmfBackgroundlayerStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gmfBackgroundlayerStatus", function() { return gmfBackgroundlayerStatus; });
var gmfBackgroundlayerStatus = {
  touchedByUser: false
};

/***/ }),

/***/ "./contribs/gmf/src/controllers/AbstractAppController.js":
/*!***************************************************************!*\
  !*** ./contribs/gmf/src/controllers/AbstractAppController.js ***!
  \***************************************************************/
/*! exports provided: AbstractAppController, getLocationIcon, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbstractAppController", function() { return AbstractAppController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLocationIcon", function() { return getLocationIcon; });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var angular_gettext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular-gettext */ "./node_modules/angular-gettext/index.js");
/* harmony import */ var angular_gettext__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(angular_gettext__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var angular_dynamic_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular-dynamic-locale */ "./node_modules/angular-dynamic-locale/src/tmhDynamicLocale.js");
/* harmony import */ var angular_dynamic_locale__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(angular_dynamic_locale__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var gmf_controllers_bootstrap_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/controllers/bootstrap.js */ "./contribs/gmf/src/controllers/bootstrap.js");
/* harmony import */ var gmf_authentication_module_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/authentication/module.js */ "./contribs/gmf/src/authentication/module.js");
/* harmony import */ var gmf_backgroundlayerselector_component_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! gmf/backgroundlayerselector/component.js */ "./contribs/gmf/src/backgroundlayerselector/component.js");
/* harmony import */ var gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! gmf/backgroundlayerselector/status.js */ "./contribs/gmf/src/backgroundlayerselector/status.js");
/* harmony import */ var gmf_datasource_module_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! gmf/datasource/module.js */ "./contribs/gmf/src/datasource/module.js");
/* harmony import */ var gmf_disclaimer_component_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! gmf/disclaimer/component.js */ "./contribs/gmf/src/disclaimer/component.js");
/* harmony import */ var gmf_layertree_module_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! gmf/layertree/module.js */ "./contribs/gmf/src/layertree/module.js");
/* harmony import */ var gmf_map_module_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! gmf/map/module.js */ "./contribs/gmf/src/map/module.js");
/* harmony import */ var gmf_query_extraModule_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! gmf/query/extraModule.js */ "./contribs/gmf/src/query/extraModule.js");
/* harmony import */ var gmf_search_module_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! gmf/search/module.js */ "./contribs/gmf/src/search/module.js");
/* harmony import */ var gmf_theme_module_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! gmf/theme/module.js */ "./contribs/gmf/src/theme/module.js");
/* harmony import */ var gmf_controllers_calculateCssVars__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! gmf/controllers/calculateCssVars */ "./contribs/gmf/src/controllers/calculateCssVars.js");
/* harmony import */ var ngeo_message_displaywindowComponent_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ngeo/message/displaywindowComponent.js */ "./src/message/displaywindowComponent.js");
/* harmony import */ var ngeo_misc_extraModule_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ngeo/misc/extraModule.js */ "./src/misc/extraModule.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ngeo/misc/ToolActivate.js */ "./src/misc/ToolActivate.js");
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ngeo_query_component_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ngeo/query/component.js */ "./src/query/component.js");
/* harmony import */ var ngeo_statemanager_module_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ngeo/statemanager/module.js */ "./src/statemanager/module.js");
/* harmony import */ var ngeo_statemanager_WfsPermalink_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ngeo/statemanager/WfsPermalink.js */ "./src/statemanager/WfsPermalink.js");
/* harmony import */ var ngeo_geolocation_component_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ngeo/geolocation/component.js */ "./src/geolocation/component.js");
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! gmf/theme/Manager.js */ "./contribs/gmf/src/theme/Manager.js");
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var _sentry_browser__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @sentry/browser */ "./node_modules/@sentry/browser/esm/index.js");
/* harmony import */ var _geoblocks_proj_src_somerc_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @geoblocks/proj/src/somerc.js */ "./node_modules/@geoblocks/proj/src/somerc.js");
/* harmony import */ var _geoblocks_proj_src_lcc_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @geoblocks/proj/src/lcc.js */ "./node_modules/@geoblocks/proj/src/lcc.js");
/* harmony import */ var _geoblocks_proj_src_tmerc_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @geoblocks/proj/src/tmerc.js */ "./node_modules/@geoblocks/proj/src/tmerc.js");
/* harmony import */ var _geoblocks_proj_utils_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @geoblocks/proj/utils.js */ "./node_modules/@geoblocks/proj/src/utils.js");
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_View_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ol/View.js */ "./node_modules/ol/View.js");
/* harmony import */ var ol_control_ScaleLine_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ol/control/ScaleLine.js */ "./node_modules/ol/control/ScaleLine.js");
/* harmony import */ var ol_control_Zoom_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ol/control/Zoom.js */ "./node_modules/ol/control/Zoom.js");
/* harmony import */ var ol_control_Rotate_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ol/control/Rotate.js */ "./node_modules/ol/control/Rotate.js");
/* harmony import */ var ol_interaction_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ol/interaction.js */ "./node_modules/ol/interaction.js");
/* harmony import */ var ol_interaction_DragPan_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ol/interaction/DragPan.js */ "./node_modules/ol/interaction/DragPan.js");
/* harmony import */ var ol_events_condition_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ol/events/condition.js */ "./node_modules/ol/events/condition.js");
AbstractAppController.$inject = ["$scope", "$injector", "mobile"];










































function AbstractAppController($scope, $injector, mobile) {
  var _this = this;

  var projections = $injector.get('gmfProjectionsOptions');

  for (var code in projections) {
    Object(_geoblocks_proj_utils_js__WEBPACK_IMPORTED_MODULE_33__["create"])(code, projections[code].definition.join(' '), projections[code].extent);
  }

  this.options = $injector.get('gmfOptions');

  if (this.options.cssVars) {
    var cssVars = Object(gmf_controllers_calculateCssVars__WEBPACK_IMPORTED_MODULE_15__["default"])(this.options.cssVars);
    var style = document.documentElement.style;

    for (var cssVar in cssVars) {
      style.setProperty("--" + cssVar, cssVars[cssVar]);
    }
  }

  var scaleline = document.getElementById('scaleline');
  var map = new ol_Map_js__WEBPACK_IMPORTED_MODULE_34__["default"](Object.assign({
    layers: [],
    view: new ol_View_js__WEBPACK_IMPORTED_MODULE_35__["default"](this.options.view),
    controls: this.options.mapControls || [new ol_control_ScaleLine_js__WEBPACK_IMPORTED_MODULE_36__["default"]({
      target: scaleline,
      dpi: 96
    }), new ol_control_Zoom_js__WEBPACK_IMPORTED_MODULE_37__["default"](this.options.controlZoom || {
      target: mobile ? undefined : 'ol-zoom-control',
      zoomInTipLabel: '',
      zoomOutTipLabel: ''
    }), new ol_control_Rotate_js__WEBPACK_IMPORTED_MODULE_38__["default"]({
      label: getLocationIcon(),
      tipLabel: ''
    })],
    interactions: this.options.mapInteractions || Object(ol_interaction_js__WEBPACK_IMPORTED_MODULE_39__["defaults"])(this.options.interationDefaults || (mobile ? {} : {
      dragPan: false
    }))
  }, this.options.map));

  if (!mobile) {
    map.addInteraction(new ol_interaction_DragPan_js__WEBPACK_IMPORTED_MODULE_40__["default"]({
      condition: dragPanCondition
    }));
  }

  this.ngeoLocation = $injector.get('ngeoLocation');

  if (this.ngeoLocation.hasParam('debug')) {
    window.injector = $injector;
  }

  this.map = map;

  if (!(this.map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_34__["default"])) {
    throw new Error('Wrong map type');
  }

  var ngeoFeatures = $injector.get('ngeoFeatures');
  this.drawFeatureLayer = $injector.get('ngeoFeatureOverlayMgr').getFeatureOverlay();
  this.drawFeatureLayer.setFeatures(ngeoFeatures);
  var ngeoFeatureHelper = $injector.get('ngeoFeatureHelper');
  ngeoFeatureHelper.setProjection(this.map.getView().getProjection());
  this.gmfThemeManager = $injector.get('gmfThemeManager');
  this.gmfTreeManager_ = $injector.get('gmfTreeManager');
  this.gmfThemes = $injector.get('gmfThemes');
  this.loading = true;
  this.gmfThemes.getThemesObject().finally(function () {
    _this.loading = false;
  });
  this.postLoading = false;
  this.permalink_ = $injector.get('gmfPermalink');
  var gmfAuthentication = $injector.get('gmfAuthenticationService');
  this.hasEditableLayers = false;

  this.updateHasEditableLayers_ = function () {
    var _this2 = this;

    this.gmfThemes.hasEditableLayers().then(function (hasEditableLayers) {
      _this2.hasEditableLayers = hasEditableLayers;
    });
  };

  this.loginRedirectUrl = null;
  this.loginInfoMessage = null;
  $scope.$on('authenticationrequired', function (event, args) {
    var gettextCatalog = $injector.get('gettextCatalog');
    _this.loginInfoMessage = gettextCatalog.getString('Some layers in this link are not accessible to unauthenticated users. ' + 'Please log in to see whole data.');
    _this.loginRedirectUrl = args.url;
    _this.loginActive = true;
    var unbind = $scope.$watch(function () {
      return _this.loginActive;
    }, function () {
      if (!_this.loginActive) {
        _this.loginInfoMessage = null;
        _this.loginRedirectUrl = null;
        unbind();
      }
    });
  });

  var userChange = function userChange(evt) {
    if (_this.loginRedirectUrl) {
      window.location.href = _this.loginRedirectUrl;
      return;
    }

    var roleId = gmfAuthentication.getRolesIds().join(',');
    var functionalities = _this.gmfUser.functionalities;

    if (functionalities && functionalities.filterable_layers && functionalities.filterable_layers.length > 0) {
      _this.filterSelectorEnabled = true;
    }

    _this.gmfThemes.getThemesObject().then(function (themes) {
      if (functionalities && functionalities.open_panel && functionalities.open_panel[0] === 'layer_filter') {
        _this.filterSelectorActive = true;
      }
    });

    var previousThemeName = _this.gmfThemeManager.getThemeName();

    _this.gmfThemeManager.setThemeName('', true);

    _this.gmfThemes.loadThemes(roleId);

    if (evt.type !== 'ready') {
      var themeName = _this.permalink_.defaultThemeNameFromFunctionalities();

      _this.gmfThemeManager.updateCurrentTheme(themeName, previousThemeName, true);
    }

    _this.setDefaultBackground_(null);

    _this.updateHasEditableLayers_();
  };

  var connectionLost = function connectionLost(evt) {
    _this.loginActive = true;
    userChange(evt);
  };

  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_26__["listen"])(gmfAuthentication, 'ready', userChange);
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_26__["listen"])(gmfAuthentication, 'login', userChange);
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_26__["listen"])(gmfAuthentication, 'logout', userChange);
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_26__["listen"])(gmfAuthentication, 'disconnected', connectionLost);
  this.dimensions = {};
  this.permalink_.setDimensions(this.dimensions);
  var gmfDataSourcesManager = $injector.get('gmfDataSourcesManager');
  gmfDataSourcesManager.setDatasourceMap(this.map);
  gmfDataSourcesManager.setDimensions(this.dimensions);

  if ($injector.has('gmfDefaultDimensions')) {
    var defaultDimensions = $injector.get('gmfDefaultDimensions');

    for (var dim in defaultDimensions) {
      if (this.dimensions[dim] === undefined) {
        this.dimensions[dim] = defaultDimensions[dim];
      }
    }
  }

  this.backgroundLayerMgr_ = $injector.get('ngeoBackgroundLayerMgr');
  $scope.$watchCollection(function () {
    return _this.dimensions;
  }, function () {
    _this.backgroundLayerMgr_.updateDimensions(_this.map, _this.dimensions);
  });
  this.backgroundLayerMgr_.on('change', function () {
    _this.backgroundLayerMgr_.updateDimensions(_this.map, _this.dimensions);
  });
  this.filterSelectorEnabled = false;
  this.queryActive = true;
  this.ngeoMapQuerent_ = $injector.get('ngeoMapQuerent');
  this.gmfUser = $injector.get('gmfUser');
  this.stateManager = $injector.get('ngeoStateManager');
  this.tmhDynamicLocale = $injector.get('tmhDynamicLocale');
  this.$scope = $scope;
  this.lang = '';
  this.defaultLang = $injector.get('defaultLang');
  this.langUrls = $injector.get('langUrls');
  this.gettextCatalog = $injector.get('gettextCatalog');
  this.initLanguage();
  this.mapToolsGroup = 'mapTools';
  var ngeoFeatureOverlayMgr = $injector.get('ngeoFeatureOverlayMgr');
  ngeoFeatureOverlayMgr.init(this.map);
  var ngeoToolActivateMgr = $injector.get('ngeoToolActivateMgr');
  var queryToolActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_19__["default"](this, 'queryActive');
  ngeoToolActivateMgr.registerTool(this.mapToolsGroup, queryToolActivate, true);
  $scope.$root.$on(gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_27__["ThemeEventType"].THEME_NAME_SET, function (event, name) {
    _this.gmfThemes.getThemeObject(name).then(function (theme) {
      _this.setDefaultBackground_(theme);
    });
  });

  var openPopup_ = function openPopup_(title, opt_width, opt_height, opt_apply) {
    _this.displaywindowTitle = title;
    _this.displaywindowOpen = true;

    if (opt_width) {
      _this.displaywindowWidth = opt_width + "px";
    }

    if (opt_height) {
      _this.displaywindowHeight = opt_height + "px";
    }

    if (opt_apply !== false) {
      _this.$scope.$apply();
    }
  };

  var gmfx = window.gmfx || {};
  window.gmfx = gmfx;

  gmfx.openIframePopup = function (url, title, opt_width, opt_height, opt_apply) {
    _this.displaywindowUrl = url;
    openPopup_(title, opt_width, opt_height, opt_apply);
  };

  gmfx.openTextPopup = function (content, title, opt_width, opt_height, opt_apply) {
    _this.displaywindowContent = content;
    openPopup_(title, opt_width, opt_height, opt_apply);
  };

  this.manageResize = false;
  this.resizeTransition;
  var cgxp = window.cgxp || {};
  window.cgxp = cgxp;
  cgxp.tools = window.cgxp.tools || {};

  cgxp.tools.openInfoWindow = function (url, title, opt_width, opt_height, opt_apply) {
    gmfx.openIframePopup(url, title, opt_width, opt_height, opt_apply);
  };

  this.displaywindowContent = null;
  this.displaywindowDraggableContainment = '.gmf-map';
  this.displaywindowHeight = '50vh';
  this.displaywindowOpen = false;
  this.displaywindowTitle = null;
  this.displaywindowUrl = null;
  this.displaywindowWidth = '50vw';

  if ($injector.has('sentryOptions')) {
    var options = $injector.get('sentryOptions');

    if (options.dsn) {
      var tags = options.tags || [];
      delete options.tags;
      Object.assign(options, {
        beforeBreadcrumb: augmentBreadcrumb
      });
      _sentry_browser__WEBPACK_IMPORTED_MODULE_29__["init"](options);

      if ($injector.has('interface') && !tags['interface']) {
        _sentry_browser__WEBPACK_IMPORTED_MODULE_29__["setTag"]('interface', $injector.get('interface'));
      }

      for (var tag in tags) {
        _sentry_browser__WEBPACK_IMPORTED_MODULE_29__["setTag"](tag, tags[tag]);
      }
    }
  }
}

function dragPanCondition(event) {
  return Object(ol_events_condition_js__WEBPACK_IMPORTED_MODULE_41__["noModifierKeys"])(event) && event.originalEvent.button !== 2;
}

function getLayerByLabels(layers, labels) {
  if (labels && labels.length > 0) {
    return ol_array_js__WEBPACK_IMPORTED_MODULE_25__["find"](layers, function (layer) {
      return layer.get('label') === labels[0];
    });
  }

  return null;
}

AbstractAppController.prototype.switchLanguage = function (lang) {
  if (!(lang in this.langUrls)) {
    throw new Error('Missing lang URL');
  }

  this.gettextCatalog.setCurrentLanguage(lang);
  this.gettextCatalog.loadRemote(this.langUrls[lang]);
  this.tmhDynamicLocale.set(lang);
  this.lang = lang;
};

AbstractAppController.prototype.initLanguage = function () {
  var _this3 = this;

  this.$scope.$watch(function () {
    return _this3.lang;
  }, function (newValue) {
    _this3.stateManager.updateState({
      'lang': newValue
    });
  });
  var browserLanguage = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_28__["getBrowserLanguage"])(Object.keys(this.langUrls));
  var urlLanguage = this.stateManager.getInitialStringValue('lang');

  if (urlLanguage !== undefined && urlLanguage in this.langUrls) {
    this.switchLanguage(urlLanguage);
    return;
  } else if (browserLanguage !== undefined && browserLanguage in this.langUrls) {
    this.switchLanguage(browserLanguage);
    return;
  } else {
    this.switchLanguage(this.defaultLang);
    return;
  }
};

AbstractAppController.prototype.setDefaultBackground_ = function (theme) {
  var _this4 = this;

  this.gmfThemes.getBgLayers().then(function (layers) {
    var layer;

    if (!gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_7__["gmfBackgroundlayerStatus"].touchedByUser) {
      layer = _this4.permalink_.getBackgroundLayer(layers);
    }

    if (!layer && _this4.gmfUser.functionalities) {
      layer = getLayerByLabels(layers, _this4.gmfUser.functionalities.default_basemap);
    }

    if (!layer && theme) {
      layer = getLayerByLabels(layers, theme.functionalities.default_basemap);
    }

    if (!layer) {
      layer = layers[layers.length > 1 ? 1 : 0];
    }

    if (!layer) {
      throw new Error('Missing layer');
    }

    _this4.backgroundLayerMgr_.set(_this4.map, layer);
  });
};

function getLocationIcon() {
  var arrow = document.createElement('span');
  arrow.className = 'fa fa-location-arrow';
  arrow.style.transform = 'rotate(-0.82rad)';
  var arrowWrapper = document.createElement('span');
  arrowWrapper.appendChild(arrow);
  return arrowWrapper;
}

function augmentBreadcrumb(breadcrumb, hint) {
  if (breadcrumb.category === 'ui.click') {
    var target = hint.event.target;

    if (target) {
      var message = target.dataset.sentry;

      if (message) {
        breadcrumb.message = breadcrumb.message + " | " + message;
      }
    }
  }
}

var myModule = angular__WEBPACK_IMPORTED_MODULE_1___default.a.module('GmfAbstractAppControllerModule', ['gettext', 'tmh.dynamicLocale', gmf_authentication_module_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, gmf_backgroundlayerselector_component_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, gmf_datasource_module_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, gmf_disclaimer_component_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, gmf_layertree_module_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, gmf_map_module_js__WEBPACK_IMPORTED_MODULE_11__["default"].name, gmf_query_extraModule_js__WEBPACK_IMPORTED_MODULE_12__["default"].name, gmf_search_module_js__WEBPACK_IMPORTED_MODULE_13__["default"].name, gmf_theme_module_js__WEBPACK_IMPORTED_MODULE_14__["default"].name, ngeo_message_displaywindowComponent_js__WEBPACK_IMPORTED_MODULE_16__["default"].name, ngeo_misc_extraModule_js__WEBPACK_IMPORTED_MODULE_17__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_18__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_20__["default"].name, ngeo_query_component_js__WEBPACK_IMPORTED_MODULE_21__["default"].name, ngeo_statemanager_module_js__WEBPACK_IMPORTED_MODULE_22__["default"].name, ngeo_statemanager_WfsPermalink_js__WEBPACK_IMPORTED_MODULE_23__["default"].name, ngeo_geolocation_component_js__WEBPACK_IMPORTED_MODULE_24__["default"].name]);
myModule.controller('AbstractController', AbstractAppController);
myModule.value('ngeoExportFeatureFormats', [ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_18__["FeatureFormatType"].KML, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_18__["FeatureFormatType"].GPX]);
myModule.config(['tmhDynamicLocaleProvider', 'angularLocaleScript', function (tmhDynamicLocaleProvider, angularLocaleScript) {
  tmhDynamicLocaleProvider.localeLocationPattern(angularLocaleScript);
}]);
Object(gmf_controllers_bootstrap_js__WEBPACK_IMPORTED_MODULE_4__["default"])(myModule);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/controllers/AbstractMobileController.js":
/*!******************************************************************!*\
  !*** ./contribs/gmf/src/controllers/AbstractMobileController.js ***!
  \******************************************************************/
/*! exports provided: AbstractMobileController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbstractMobileController", function() { return AbstractMobileController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_controllers_AbstractAppController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/controllers/AbstractAppController.js */ "./contribs/gmf/src/controllers/AbstractAppController.js");
/* harmony import */ var gmf_mobile_measure_module_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/mobile/measure/module.js */ "./contribs/gmf/src/mobile/measure/module.js");
/* harmony import */ var gmf_mobile_navigation_module_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/mobile/navigation/module.js */ "./contribs/gmf/src/mobile/navigation/module.js");
/* harmony import */ var gmf_query_windowComponent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/query/windowComponent.js */ "./contribs/gmf/src/query/windowComponent.js");
/* harmony import */ var ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/ToolActivate.js */ "./src/misc/ToolActivate.js");
/* harmony import */ var gmf_controllers_vars_mobile_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! gmf/controllers/vars_mobile.scss */ "./contribs/gmf/src/controllers/vars_mobile.scss");
/* harmony import */ var gmf_controllers_vars_mobile_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(gmf_controllers_vars_mobile_scss__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var gmf_controllers_mobile_scss__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! gmf/controllers/mobile.scss */ "./contribs/gmf/src/controllers/mobile.scss");
/* harmony import */ var gmf_controllers_mobile_scss__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(gmf_controllers_mobile_scss__WEBPACK_IMPORTED_MODULE_7__);
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }









var AbstractMobileController = function (_AbstractAppControlle) {
  AbstractMobileController.$inject = ["$scope", "$injector"];

  _inheritsLoose(AbstractMobileController, _AbstractAppControlle);

  function AbstractMobileController($scope, $injector) {
    var _this;

    _this = _AbstractAppControlle.call(this, $scope, $injector, true) || this;
    _this.leftNavVisible = false;
    _this.rightNavVisible = false;
    _this.searchOverlayVisible = false;
    _this.measureAreaActive = false;
    _this.measurePointActive = false;
    _this.measureLengthActive = false;
    _this.displaywindowHeight = '100vh';
    _this.displaywindowWidth = '100vw';
    var ngeoToolActivateMgr = $injector.get('ngeoToolActivateMgr');
    var measureAreaActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_5__["default"](_assertThisInitialized(_this), 'measureAreaActive');
    ngeoToolActivateMgr.registerTool('mapTools', measureAreaActivate, false);
    var measurePointActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_5__["default"](_assertThisInitialized(_this), 'measurePointActive');
    ngeoToolActivateMgr.registerTool('mapTools', measurePointActivate, false);
    var measureLengthActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_5__["default"](_assertThisInitialized(_this), 'measureLengthActive');
    ngeoToolActivateMgr.registerTool('mapTools', measureLengthActivate, false);
    _this.searchListeners = {
      open: function open() {
        _this.searchOverlayVisible = true;
      },
      close: function close() {
        _this.searchOverlayVisible = false;
      }
    };
    _this.manageResize = true;
    _this.resizeTransition = 500;
    $scope.$watch(function () {
      return _this.gmfUser.username;
    }, function (newVal) {
      if (newVal !== null && _this.navIsVisible()) {
        _this.rightNavVisible = false;
      }
    });
    _this.redirectUrl = $injector.get('redirectUrl');
    return _this;
  }

  var _proto = AbstractMobileController.prototype;

  _proto.toggleLeftNavVisibility = function toggleLeftNavVisibility() {
    this.leftNavVisible = !this.leftNavVisible;
  };

  _proto.toggleRightNavVisibility = function toggleRightNavVisibility() {
    this.rightNavVisible = !this.rightNavVisible;
  };

  _proto.hideNav = function hideNav() {
    this.leftNavVisible = false;
    this.rightNavVisible = false;
  };

  _proto.navIsVisible = function navIsVisible() {
    return this.leftNavVisible || this.rightNavVisible;
  };

  _proto.openNavMenu = function openNavMenu(target) {
    var navElements = document.getElementsByClassName('gmf-mobile-nav-button');

    for (var i = 0; i < navElements.length; i++) {
      var element = navElements[i];

      if (element.dataset && element.dataset.target === target) {
        element.click();
      }
    }
  };

  return AbstractMobileController;
}(gmf_controllers_AbstractAppController_js__WEBPACK_IMPORTED_MODULE_1__["AbstractAppController"]);
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('GmfAbstractMobileControllerModule', [gmf_controllers_AbstractAppController_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_mobile_measure_module_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_mobile_navigation_module_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, gmf_query_windowComponent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name]);
myModule.controller('AbstractMobileController', AbstractMobileController);
myModule.value('isMobile', true);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/controllers/bootstrap.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/controllers/bootstrap.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_1__);



function bootstrap(module) {
  var oldObjectToString = Object.prototype.toString;

  if (!oldObjectToString.toString().includes('[native code]')) {
    Object.prototype.toString = function () {
      if (this === null) {
        return '[object Null]';
      }

      if (this === undefined) {
        return '[object Undefined]';
      }

      return oldObjectToString.call(this);
    };
  }

  var interface_ = jquery__WEBPACK_IMPORTED_MODULE_0___default()('meta[name=interface]')[0].getAttribute('content');
  var dynamicUrl_ = jquery__WEBPACK_IMPORTED_MODULE_0___default()('meta[name=dynamicUrl]')[0].getAttribute('content');
  var search = document.location ? document.location.search || '' : '';
  var dynamicUrl = dynamicUrl_ + "?interface=" + interface_ + "&query=" + encodeURIComponent(search) + "&path=" + encodeURIComponent(document.location.pathname);
  var request = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax(dynamicUrl, {
    'dataType': 'json',
    'xhrFields': {
      withCredentials: false
    }
  });
  request.fail(function (jqXHR, textStatus) {
    window.alert("Failed to get the dynamic: " + textStatus);
  });
  request.done(function (dynamic) {
    if (dynamic.doRedirect) {
      var small_screen = window.matchMedia ? window.matchMedia('(max-width: 1024px)') : false;

      if (small_screen && 'ontouchstart' in window) {
        window.location.href = dynamic.redirectUrl;
      }
    }

    for (var name in dynamic.constants) {
      module.constant(name, dynamic.constants[name]);
    }

    angular__WEBPACK_IMPORTED_MODULE_1___default.a.bootstrap(document, ["App" + interface_]);
  });
}

/* harmony default export */ __webpack_exports__["default"] = (bootstrap);

/***/ }),

/***/ "./contribs/gmf/src/controllers/calculateCssVars.js":
/*!**********************************************************!*\
  !*** ./contribs/gmf/src/controllers/calculateCssVars.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinycolor2 */ "./node_modules/tinycolor2/tinycolor.js");
/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ __webpack_exports__["default"] = (function (options) {
  var cssVars = {};

  if (options['brand-primary']) {
    var primary = tinycolor2__WEBPACK_IMPORTED_MODULE_0___default()(options['brand-primary']);
    var link = tinycolor2__WEBPACK_IMPORTED_MODULE_0___default()({
      h: primary.toHsl().h,
      s: 0.25,
      l: 0.5
    });
    cssVars['link-color'] = link.toHexString();
    cssVars['link-hover-color'] = link.clone().darken(15).toHexString();
    var border = primary.clone().darken(15);
    cssVars['input-border-focus'] = border.toHexString();
    cssVars['input-border-focus-darken'] = border.clone().darken(15).toHexString();
    cssVars['border-color'] = border.toHexString();
    cssVars['table-border-color'] = border.toHexString();
    cssVars['hover-background-color'] = primary.clone().lighten(15).toHexString();
    var buttonFocus = primary.clone();
    buttonFocus.setAlpha(0.25);
    cssVars['input-btn-focus-color'] = buttonFocus.toRgbString();
  }

  if (options['brand-secondary']) {
    var secondary = tinycolor2__WEBPACK_IMPORTED_MODULE_0___default()(options['brand-secondary']);
    cssVars['brand-secondary-dark'] = secondary.clone().darken(15).toHexString();
  }

  Object.assign(cssVars, options);
  return cssVars;
});

/***/ }),

/***/ "./contribs/gmf/src/controllers/mobile.scss":
/*!**************************************************!*\
  !*** ./contribs/gmf/src/controllers/mobile.scss ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/controllers/vars_mobile.scss":
/*!*******************************************************!*\
  !*** ./contribs/gmf/src/controllers/vars_mobile.scss ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/datasource/DataSourceBeingFiltered.js":
/*!****************************************************************!*\
  !*** ./contribs/gmf/src/datasource/DataSourceBeingFiltered.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDataSourceBeingFiltered', []);
myModule.value('gmfDataSourceBeingFiltered', {
  dataSource: null
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/ExternalDataSourcesManager.js":
/*!*******************************************************************!*\
  !*** ./contribs/gmf/src/datasource/ExternalDataSourcesManager.js ***!
  \*******************************************************************/
/*! exports provided: ExternalDatSourcesManager, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExternalDatSourcesManager", function() { return ExternalDatSourcesManager; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/index.js */ "./contribs/gmf/src/index.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_misc_File_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/File.js */ "./src/misc/File.js");
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/datasource/File.js */ "./src/datasource/File.js");
/* harmony import */ var ngeo_datasource_FileGroup_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/datasource/FileGroup.js */ "./src/datasource/FileGroup.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var gmf_datasource_fileGroup_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! gmf/datasource/fileGroup.js */ "./contribs/gmf/src/datasource/fileGroup.js");
/* harmony import */ var gmf_datasource_ExternalOGC_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! gmf/datasource/ExternalOGC.js */ "./contribs/gmf/src/datasource/ExternalOGC.js");
/* harmony import */ var ngeo_datasource_OGCGroup_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/datasource/OGCGroup.js */ "./src/datasource/OGCGroup.js");
/* harmony import */ var ngeo_datasource_WMSGroup_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/datasource/WMSGroup.js */ "./src/datasource/WMSGroup.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_format_GPX_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/format/GPX.js */ "./node_modules/ol/format/GPX.js");
/* harmony import */ var ol_format_KML_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/format/KML.js */ "./node_modules/ol/format/KML.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




















var ExternalDatSourcesManager = function () {
  ExternalDatSourcesManager.$inject = ["gettextCatalog", "$injector", "$q", "$rootScope", "gmfDatasourceFileGroup", "ngeoDataSources", "ngeoFile", "ngeoLayerHelper"];

  function ExternalDatSourcesManager(gettextCatalog, $injector, $q, $rootScope, gmfDatasourceFileGroup, ngeoDataSources, ngeoFile, ngeoLayerHelper) {
    this.injector_ = $injector;
    this.q_ = $q;
    this.rootScope_ = $rootScope;
    this.dataSources_ = ngeoDataSources.collection;
    this.ngeoFile_ = ngeoFile;
    this.ngeoLayerHelper_ = ngeoLayerHelper;
    this.extDataSources_ = {};
    this.files_ = {};
    this.map_ = null;
    this.fileGroup_ = new ngeo_datasource_FileGroup_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
      dataSources: [],
      injector: this.injector_,
      title: gettextCatalog.getString('Local files')
    });
    gmfDatasourceFileGroup.fileGroup = this.fileGroup_;
    this.wmsGroupsCollection_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_15__["default"]();
    this.wmtsGroupsCollection_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_15__["default"]();
    this.wmtsCache_ = {};
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_14__["listen"])(this.dataSources_, 'remove', this.handleDataSourcesRemove_, this);
  }

  var _proto = ExternalDatSourcesManager.prototype;

  _proto.addWMSGroup_ = function addWMSGroup_(wmsGroup) {
    this.wmsGroupsCollection.push(wmsGroup);
  };

  _proto.removeWMSGroup_ = function removeWMSGroup_(wmsGroup) {
    this.wmsGroupsCollection.remove(wmsGroup);
  };

  _proto.getWMSGroup = function getWMSGroup(url) {
    var found = null;

    for (var _iterator = _createForOfIteratorHelperLoose(this.wmsGroups), _step; !(_step = _iterator()).done;) {
      var wmsGroup = _step.value;

      if (wmsGroup.url === url) {
        found = wmsGroup;
        break;
      }
    }

    return found;
  };

  _proto.addWMTSGroup_ = function addWMTSGroup_(wmtsGroup) {
    this.wmtsGroupsCollection.push(wmtsGroup);
  };

  _proto.removeWMTSGroup_ = function removeWMTSGroup_(wmtsGroup) {
    this.wmtsGroupsCollection.remove(wmtsGroup);
  };

  _proto.getWMTSGroup = function getWMTSGroup(url) {
    var found = null;

    for (var _iterator2 = _createForOfIteratorHelperLoose(this.wmtsGroups), _step2; !(_step2 = _iterator2()).done;) {
      var wmtsGroup = _step2.value;

      if (wmtsGroup.url === url) {
        found = wmtsGroup;
        break;
      }
    }

    return found;
  };

  _proto.isExternalDataSource = function isExternalDataSource(dataSource) {
    return !!this.extDataSources_[dataSource.id];
  };

  _proto.addLayer_ = function addLayer_(layer) {
    this.layerGroup.getLayers().push(layer);
  };

  _proto.removeLayer_ = function removeLayer_(layer) {
    this.layerGroup.getLayers().remove(layer);
  };

  _proto.createAndAddDataSourceFromWMSCapability = function createAndAddDataSourceFromWMSCapability(layer, capabilities, url) {
    var id = getId(layer);
    var service = capabilities.Service;
    var originalUrl = url || service.OnlineResource;
    url = service.OnlineResource || url;
    var dataSource;

    if (this.extDataSources_[id]) {
      dataSource = this.extDataSources_[id];
    } else {
      var req = capabilities.Capability.Request;
      var formats = req.GetMap.Format;
      var imagePngType = 'image/png';
      var ogcImageType = formats.includes(imagePngType) ? imagePngType : formats[0];
      var infoFormats = req.GetFeatureInfo.Format;
      var wmsInfoFormat = infoFormats.includes(ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["WMSInfoFormat"].GML) ? ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["WMSInfoFormat"].GML : undefined;
      var queryable = layer.queryable === true && wmsInfoFormat !== undefined;
      var options = {
        id: id,
        name: layer.Title,
        ogcImageType: ogcImageType,
        wmsLayers: [{
          name: layer.Name,
          queryable: queryable
        }],
        ogcType: ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["Type"].WMS,
        visible: true,
        wmsUrl: url
      };

      if (wmsInfoFormat) {
        options.wmsInfoFormat = wmsInfoFormat;
      }

      var legend = {
        'title': layer.Title,
        'url': originalUrl,
        'name': layer.Name
      };
      dataSource = new gmf_datasource_ExternalOGC_js__WEBPACK_IMPORTED_MODULE_9__["default"](options, legend);
      this.extDataSources_[id] = dataSource;
    }

    var wmsGroup = this.getWMSGroup(url);

    if (wmsGroup) {
      if (!wmsGroup.dataSources.includes(dataSource)) {
        wmsGroup.addDataSource(dataSource);
        this.dataSources_.push(dataSource);
      }
    } else {
      wmsGroup = new ngeo_datasource_WMSGroup_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        dataSources: [dataSource],
        injector: this.injector_,
        title: service.Title,
        url: url
      }, this.ngeoLayerHelper_);
      this.addLayer_(wmsGroup.layer);
      this.addWMSGroup_(wmsGroup);
      this.dataSources_.push(dataSource);
    }
  };

  _proto.createAndAddDataSourceFromWMTSCapability = function createAndAddDataSourceFromWMTSCapability(layer, capabilities, wmtsUrl) {
    var id = getId(layer);

    if (this.wmtsCache_[id]) {
      return;
    }

    var dataSource;

    if (this.extDataSources_[id]) {
      dataSource = this.extDataSources_[id];
    } else {
      var name = layer.Title;
      var wmtsLayer = layer.Identifier;
      dataSource = new ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
        id: id,
        name: name,
        ogcType: ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["Type"].WMTS,
        visible: true,
        wmtsLayer: wmtsLayer,
        wmtsUrl: wmtsUrl
      });
      this.extDataSources_[id] = dataSource;
    }

    var wmtsGroup = this.getWMTSGroup(wmtsUrl);

    if (!wmtsGroup) {
      wmtsGroup = new ngeo_datasource_OGCGroup_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
        dataSources: [],
        title: capabilities.ServiceIdentification.Title,
        url: wmtsUrl
      });
      this.addWMTSGroup_(wmtsGroup);
    }

    wmtsGroup.addDataSource(dataSource);
    var layerObj = this.ngeoLayerHelper_.createWMTSLayerFromCapabilititesObj(capabilities, layer);
    this.addLayer_(layerObj);
    this.dataSources_.push(dataSource);
    this.wmtsCache_[id] = {
      layerObj: layerObj,
      unregister: this.rootScope_.$watch(function () {
        return dataSource.visible;
      }, this.handleWMTSDataSourceVisibleChange_.bind(this, layerObj))
    };
  };

  _proto.createAndAddDataSourceFromFile = function createAndAddDataSourceFromFile(file, opt_callback) {
    var _this = this;

    this.getFileDataSource_(file).then(function (dataSource) {
      var success = true;
      var fileGroup = _this.fileGroup_;

      if (Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_13__["isEmpty"])(dataSource.extent)) {
        success = false;
      } else {
        if (!_this.map_) {
          throw new Error('Missing map');
        }

        if (fileGroup.dataSources.includes(dataSource)) {
          return;
        }

        _this.addLayer_(dataSource.layer);

        fileGroup.addDataSource(dataSource);

        _this.map_.getView().fit(dataSource.extent);

        _this.dataSources_.push(dataSource);
      }

      if (opt_callback) {
        opt_callback(success);
      }
    }, function (rejections) {
      console.error("Failed to load file: " + file.name);

      if (opt_callback) {
        opt_callback(false);
      }
    });
  };

  _proto.getFileDataSource_ = function getFileDataSource_(file) {
    var _this2 = this;

    var defer = this.q_.defer();

    if (this.files_[file.name]) {
      defer.resolve(this.files_[file.name]);
    } else {
      var ngeoFile = this.ngeoFile_;
      ngeoFile.read(file).then(function (content) {
        if (!_this2.map_) {
          throw new Error('Missing map');
        }

        var features;
        var readOptions = {
          featureProjection: _this2.map_.getView().getProjection()
        };

        if (ngeoFile.isKml(content)) {
          features = new ol_format_KML_js__WEBPACK_IMPORTED_MODULE_17__["default"]().readFeatures(content, readOptions);
        } else if (ngeoFile.isGpx(content)) {
          features = new ol_format_GPX_js__WEBPACK_IMPORTED_MODULE_16__["default"]().readFeatures(content, readOptions);
        }

        if (features) {
          var id = getId(file);
          var dataSource = new ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
            features: new ol_Collection_js__WEBPACK_IMPORTED_MODULE_15__["default"](features),
            id: id,
            name: file.name,
            visible: true
          });
          _this2.files_[file.name] = dataSource;
          _this2.extDataSources_[id] = dataSource;
          defer.resolve(dataSource);
        } else {
          defer.reject();
        }
      });
    }

    return defer.promise;
  };

  _proto.handleWMTSDataSourceVisibleChange_ = function handleWMTSDataSourceVisibleChange_(layer, value, oldValue) {
    if (value !== undefined && value !== oldValue) {
      layer.setVisible(value);
    }
  };

  _proto.handleDataSourcesRemove_ = function handleDataSourcesRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_15__["CollectionEvent"]) {
      var dataSource = evt.element;

      if (this.extDataSources_[dataSource.id] === dataSource) {
        if (dataSource instanceof ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
          this.removeFileDataSource_(dataSource);
        } else if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
          this.removeOGCDataSource_(dataSource);
        }
      }
    }
  };

  _proto.removeFileDataSource_ = function removeFileDataSource_(dataSource) {
    this.removeLayer_(dataSource.layer);
    this.fileGroup_.removeDataSource(dataSource);
  };

  _proto.removeOGCDataSource_ = function removeOGCDataSource_(dataSource) {
    if (dataSource.ogcType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["Type"].WMS) {
      if (!dataSource.wmsUrl) {
        throw new Error('Missing dataSource.wmsUrl');
      }

      var wmsGroup = this.getWMSGroup(dataSource.wmsUrl);

      if (wmsGroup && wmsGroup.dataSources.includes(dataSource)) {
        wmsGroup.removeDataSource(dataSource);

        if (!wmsGroup.dataSources.length) {
          this.removeLayer_(wmsGroup.layer);
          wmsGroup.destroy();
          this.removeWMSGroup_(wmsGroup);
        }
      }
    } else if (dataSource.ogcType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["Type"].WMTS) {
      if (!dataSource.wmtsUrl) {
        throw new Error('Missing dataSource.wmsUrl');
      }

      var wmtsGroup = this.getWMTSGroup(dataSource.wmtsUrl);

      if (wmtsGroup && wmtsGroup.dataSources.includes(dataSource)) {
        wmtsGroup.removeDataSource(dataSource);
        var id = dataSource.id;
        this.removeLayer_(this.wmtsCache_[id].layerObj);
        this.wmtsCache_[id].unregister();
        delete this.wmtsCache_[id];

        if (!wmtsGroup.dataSources.length) {
          wmtsGroup.destroy();
          this.removeWMTSGroup_(wmtsGroup);
        }
      }
    }
  };

  _proto.isEmpty = function isEmpty() {
    return this.wmsGroupsCollection_.getLength() == 0 && this.wmtsGroupsCollection_.getLength() == 0 && this.fileGroup_.dataSourcesCollection.getLength() == 0;
  };

  _proto.removeAll = function removeAll() {
    for (var _iterator3 = _createForOfIteratorHelperLoose(this.dataSources_.getArray()), _step3; !(_step3 = _iterator3()).done;) {
      var dataSource = _step3.value;

      if (this.extDataSources_[dataSource.id] === dataSource) {
        if (dataSource instanceof ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
          this.removeFileDataSource_(dataSource);
        } else if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
          this.removeOGCDataSource_(dataSource);
        }
      }
    }
  };

  _createClass(ExternalDatSourcesManager, [{
    key: "fileGroup",
    get: function get() {
      return this.fileGroup_;
    }
  }, {
    key: "wmsGroups",
    get: function get() {
      return this.wmsGroupsCollection_.getArray();
    }
  }, {
    key: "wmsGroupsCollection",
    get: function get() {
      return this.wmsGroupsCollection_;
    }
  }, {
    key: "wmtsGroups",
    get: function get() {
      return this.wmtsGroupsCollection_.getArray();
    }
  }, {
    key: "wmtsGroupsCollection",
    get: function get() {
      return this.wmtsGroupsCollection_;
    }
  }, {
    key: "layerGroup",
    get: function get() {
      if (!this.map_) {
        throw new Error('Missing map');
      }

      return this.ngeoLayerHelper_.getGroupFromMap(this.map_, gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["EXTERNALLAYERGROUP_NAME"]);
    }
  }, {
    key: "map",
    set: function set(map) {
      this.map_ = map;
    }
  }]);

  return ExternalDatSourcesManager;
}();

function getId(layer) {
  return Number(Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(layer)) + 1000000;
}

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfExternalDataSourcesManager', [gmf_datasource_fileGroup_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_File_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_4__["default"].name]);
myModule.service('gmfExternalDataSourcesManager', ExternalDatSourcesManager);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/ExternalOGC.js":
/*!****************************************************!*\
  !*** ./contribs/gmf/src/datasource/ExternalOGC.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var GmfExternalDatasourceOGC = function (_ngeoDatasourceOGC) {
  _inheritsLoose(GmfExternalDatasourceOGC, _ngeoDatasourceOGC);

  function GmfExternalDatasourceOGC(options, legend) {
    var _this;

    _this = _ngeoDatasourceOGC.call(this, options) || this;
    _this.legend_ = legend;
    return _this;
  }

  _createClass(GmfExternalDatasourceOGC, [{
    key: "legend",
    get: function get() {
      return this.legend_;
    }
  }]);

  return GmfExternalDatasourceOGC;
}(ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GmfExternalDatasourceOGC);

/***/ }),

/***/ "./contribs/gmf/src/datasource/Helper.js":
/*!***********************************************!*\
  !*** ./contribs/gmf/src/datasource/Helper.js ***!
  \***********************************************/
/*! exports provided: DatasourceHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasourceHelper", function() { return DatasourceHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_editing_EnumerateAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/editing/EnumerateAttribute.js */ "./contribs/gmf/src/editing/EnumerateAttribute.js");
/* harmony import */ var ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/datasource/Helper.js */ "./src/datasource/Helper.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }





var DatasourceHelper = function () {
  DatasourceHelper.$inject = ["$q", "gmfEnumerateAttribute", "ngeoDataSourcesHelper"];

  function DatasourceHelper($q, gmfEnumerateAttribute, ngeoDataSourcesHelper) {
    this.q_ = $q;
    this.gmfEnumerateAttribute_ = gmfEnumerateAttribute;
    this.ngeoDataSourcesHelper_ = ngeoDataSourcesHelper;
    this.collection_ = null;
    this.cache_ = {};
  }

  var _proto = DatasourceHelper.prototype;

  _proto.getDataSource = function getDataSource(id) {
    return this.ngeoDataSourcesHelper_.getDataSource(id);
  };

  _proto.prepareFiltrableDataSource = function prepareFiltrableDataSource(dataSource) {
    var _this = this;

    var prepareFiltrableDataSourceDefer = this.q_.defer();
    this.ngeoDataSourcesHelper_.getDataSourceAttributes(dataSource).then(function (attributes) {
      var enumAttributes = dataSource.gmfLayer.metadata ? dataSource.gmfLayer.metadata.enumeratedAttributes : undefined;

      if (enumAttributes && enumAttributes.length) {
        var promises = [];

        var _loop = function _loop() {
          var attribute = _step.value;

          if (enumAttributes.includes(attribute.name) && attribute.type !== ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_3__["default"].SELECT && (!attribute.choices || !attribute.choices.length)) {
            promises.push(_this.gmfEnumerateAttribute_.getAttributeValues(dataSource, attribute.name).then(function (values) {
              var choices = values.map(function (choice) {
                return choice.value;
              });
              attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_3__["default"].SELECT;
              attribute.choices = choices;
            }));
          }
        };

        for (var _iterator = _createForOfIteratorHelperLoose(attributes), _step; !(_step = _iterator()).done;) {
          _loop();
        }

        return _this.q_.all(promises).then(function () {
          prepareFiltrableDataSourceDefer.resolve(dataSource);
        });
      } else {
        prepareFiltrableDataSourceDefer.resolve(dataSource);
      }
    });
    return prepareFiltrableDataSourceDefer.promise;
  };

  _createClass(DatasourceHelper, [{
    key: "collection",
    get: function get() {
      return this.ngeoDataSourcesHelper_.collection;
    }
  }]);

  return DatasourceHelper;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDataSourcesHelper', [ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_editing_EnumerateAttribute_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('gmfDataSourcesHelper', DatasourceHelper);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/LayerBeingSwipe.js":
/*!********************************************************!*\
  !*** ./contribs/gmf/src/datasource/LayerBeingSwipe.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfLayerBeingSwipe', []);
myModule.value('gmfLayerBeingSwipe', {
  layer: null,
  swipeValue: null
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/Manager.js":
/*!************************************************!*\
  !*** ./contribs/gmf/src/datasource/Manager.js ***!
  \************************************************/
/*! exports provided: DatasourceManager, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasourceManager", function() { return DatasourceManager; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/datasource/OGC.js */ "./contribs/gmf/src/datasource/OGC.js");
/* harmony import */ var gmf_datasource_WFSAliases_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/datasource/WFSAliases.js */ "./contribs/gmf/src/datasource/WFSAliases.js");
/* harmony import */ var gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/layertree/SyncLayertreeMap.js */ "./contribs/gmf/src/layertree/SyncLayertreeMap.js");
/* harmony import */ var gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/layertree/TreeManager.js */ "./contribs/gmf/src/layertree/TreeManager.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/filter/RuleHelper.js */ "./src/filter/RuleHelper.js");
/* harmony import */ var ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/map/BackgroundLayerMgr.js */ "./src/map/BackgroundLayerMgr.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }





















var DatasourceManager = function () {
  DatasourceManager.$inject = ["$q", "$rootScope", "$timeout", "gmfThemes", "gmfTreeManager", "ngeoBackgroundLayerMgr", "ngeoDataSources", "ngeoLayerHelper", "ngeoRuleHelper", "ngeoWMSTime", "gmfWFSAliases"];

  function DatasourceManager($q, $rootScope, $timeout, gmfThemes, gmfTreeManager, ngeoBackgroundLayerMgr, ngeoDataSources, ngeoLayerHelper, ngeoRuleHelper, ngeoWMSTime, gmfWFSAliases) {
    this.q_ = $q;
    this.rootScope_ = $rootScope;
    this.timeout_ = $timeout;
    this.gmfThemes_ = gmfThemes;
    this.gmfTreeManager_ = gmfTreeManager;
    this.ngeoBackgroundLayerMgr_ = ngeoBackgroundLayerMgr;
    this.ngeoDataSources_ = ngeoDataSources;
    this.dataSources_ = ngeoDataSources.collection;
    this.ngeoLayerHelper_ = ngeoLayerHelper;
    this.ngeoRuleHelper_ = ngeoRuleHelper;
    this.ngeoWMSTime_ = ngeoWMSTime;
    this.gmfWFSAliases_ = gmfWFSAliases;
    this.dataSourcesCache_ = {};
    this.dimensions_;
    this.dimensionsWatcherUnregister = null;
    this.treeCtrlCache_ = {};
    this.treeCtrlsUnregister_ = null;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_13__["listen"])(this.ngeoBackgroundLayerMgr_, 'change', this.handleNgeoBackgroundLayerChange_, this);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_13__["listen"])(this.gmfThemes_, 'change', this.handleThemesChange_, this);
  }

  var _proto = DatasourceManager.prototype;

  _proto.setDatasourceMap = function setDatasourceMap(map) {
    this.ngeoDataSources_.map = map;
  };

  _proto.getDatasource = function getDatasource(id) {
    return this.dataSourcesCache_[id];
  };

  _proto.setDimensions = function setDimensions(dimensions) {
    var _this = this;

    if (this.dimensionsWatcherUnregister) {
      this.dimensionsWatcherUnregister();
    }

    this.dimensions_ = dimensions;
    this.dimensionsWatcherUnregister = this.rootScope_.$watch(function () {
      return _this.dimensions_;
    }, this.handleDimensionsChange_.bind(this), true);
    this.handleDimensionsChange_();
  };

  _proto.handleDimensionsChange_ = function handleDimensionsChange_() {
    var layers = [];
    var layerIds = [];
    var dataSources = this.dataSources_.getArray();

    for (var _iterator = _createForOfIteratorHelperLoose(dataSources), _step; !(_step = _iterator()).done;) {
      var dataSource = _step.value;

      if (dataSource instanceof gmf_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] && dataSource.dimensionsFiltersConfig) {
        for (var key in dataSource.dimensionsFiltersConfig) {
          if (dataSource.dimensionsFiltersConfig[key].value === null) {
            var layer = this.getDataSourceLayer_(dataSource);

            if (layer == undefined) {
              return;
            }

            var id = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(layer);

            if (!layerIds.includes(id)) {
              layers.push(layer);
              layerIds.push(id);
            }
          }
        }
      }
    }

    layers.forEach(this.updateLayerFilter_.bind(this));
  };

  _proto.handleThemesChange_ = function handleThemesChange_() {
    var _this2 = this;

    this.clearDataSources_();

    if (this.treeCtrlsUnregister_) {
      this.treeCtrlsUnregister_();
    }

    this.clearTreeCtrlCache_();
    this.gmfThemes_.getOgcServersObject().then(function (ogcServers) {
      var promiseThemes = _this2.gmfThemes_.getThemesObject().then(function (themes) {
        for (var _iterator2 = _createForOfIteratorHelperLoose(themes), _step2; !(_step2 = _iterator2()).done;) {
          var theme = _step2.value;

          for (var _iterator3 = _createForOfIteratorHelperLoose(theme.children), _step3; !(_step3 = _iterator3()).done;) {
            var child = _step3.value;

            _this2.createDataSource_(child, child, ogcServers);
          }
        }
      });

      var promiseBgLayers = _this2.gmfThemes_.getBackgroundLayersObject().then(function (backgroundLayers) {
        for (var _iterator4 = _createForOfIteratorHelperLoose(backgroundLayers), _step4; !(_step4 = _iterator4()).done;) {
          var backgroundLayer = _step4.value;

          _this2.createDataSource_(null, backgroundLayer, ogcServers);
        }
      });

      _this2.q_.all([promiseThemes, promiseBgLayers]).then(function () {
        _this2.treeCtrlsUnregister_ = _this2.rootScope_.$watchCollection(function () {
          if (_this2.gmfTreeManager_.rootCtrl) {
            return _this2.gmfTreeManager_.rootCtrl.children;
          }
        }, _this2.handleTreeManagerRootChildrenChange_.bind(_this2));
      });
    });
  };

  _proto.handleTreeManagerRootChildrenChange_ = function handleTreeManagerRootChildrenChange_(value) {
    var _this3 = this;

    this.timeout_(function () {
      if (!value) {
        return;
      }

      var newTreeCtrls = [];

      var visitor = function visitor(treeCtrl) {
        var node = treeCtrl.node;
        var groupNode = node;
        var children = groupNode.children;

        if (!children) {
          newTreeCtrls.push(treeCtrl);
        }
      };

      for (var i = 0, ii = value.length; i < ii; i++) {
        value[i].traverseDepthFirst(visitor);
      }

      for (var _i = 0, _ii = newTreeCtrls.length; _i < _ii; _i++) {
        var newTreeCtrl = newTreeCtrls[_i];

        var cacheItem = _this3.getTreeCtrlCacheItem_(newTreeCtrl);

        if (!cacheItem) {
          _this3.addTreeCtrlToCache_(newTreeCtrl);
        }
      }

      var cache = _this3.treeCtrlCache_;

      for (var id in _this3.treeCtrlCache_) {
        var item = cache[id];

        if (!newTreeCtrls.includes(item.treeCtrl)) {
          _this3.removeTreeCtrlCacheItem_(item);
        }
      }
    });
  };

  _proto.clearDataSources_ = function clearDataSources_() {
    var dataSources = this.dataSources_.getArray();

    for (var i = dataSources.length - 1, ii = 0; i >= ii; i--) {
      if (this.dataSourcesCache_[dataSources[i].id]) {
        this.dataSources_.remove(dataSources[i]);
      }
    }

    Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_15__["clear"])(this.dataSourcesCache_);
  };

  _proto.createDataSource_ = function createDataSource_(firstLevelGroup, node, ogcServers) {
    var groupNode = node;
    var children = groupNode.children;

    if (children) {
      for (var _iterator5 = _createForOfIteratorHelperLoose(children), _step5; !(_step5 = _iterator5()).done;) {
        var child = _step5.value;
        this.createDataSource_(firstLevelGroup, child, ogcServers);
      }

      return;
    }

    var gmfLayer = node;
    var id = Number(Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(gmfLayer));

    if (this.dataSourcesCache_[id]) {
      return;
    }

    var meta = gmfLayer.metadata;
    var ogcType = gmfLayer.type;
    var maxResolution = 0;
    var minResolution = 0;
    var wmtsLayer;
    var wmtsUrl;
    var ogcImageType;
    var wmsLayers;
    var wfsLayers;
    var timeProperty;
    var ogcServer;

    if (ogcType === gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["ThemeNodeType"].WMTS) {
      var gmfLayerWMTS = gmfLayer;
      wmtsLayer = gmfLayerWMTS.layer;
      wmtsUrl = gmfLayerWMTS.url;
      maxResolution = meta.maxQueryResolution !== undefined ? meta.maxQueryResolution : meta.maxResolution;
      minResolution = meta.minQueryResolution !== undefined ? meta.minQueryResolution : meta.minResolution;
      var layers = meta.queryLayers || meta.wmsLayers;

      if (layers) {
        wmsLayers = layers.split(',').map(function (layer) {
          return {
            name: layer,
            queryable: true
          };
        });
        wfsLayers = layers.split(',').map(function (layer) {
          return {
            maxResolution: maxResolution,
            minResolution: minResolution,
            name: layer,
            queryable: true
          };
        });
      }

      if (meta.ogcServer && ogcServers[meta.ogcServer]) {
        ogcServer = ogcServers[meta.ogcServer];
      }

      ogcImageType = gmfLayerWMTS.imageType;
    } else if (ogcType === gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["ThemeNodeType"].WMS) {
      var gmfLayerWMS = gmfLayer;
      maxResolution = gmfLayerWMS.maxResolutionHint;
      minResolution = gmfLayerWMS.minResolutionHint;
      var queryable = false;

      for (var _iterator6 = _createForOfIteratorHelperLoose(gmfLayerWMS.childLayers), _step6; !(_step6 = _iterator6()).done;) {
        var wfslayer = _step6.value;

        if (wfslayer.queryable) {
          queryable = true;
          break;
        }
      }

      var queryLayers = meta.queryLayers ? meta.queryLayers.split(',') : null;
      wmsLayers = gmfLayerWMS.layers.split(',').map(function (childLayer) {
        var item = {
          name: childLayer,
          queryable: queryable
        };

        if (queryLayers && !queryLayers.includes(childLayer)) {
          item.getData = false;
        }

        return item;
      });
      wfsLayers = gmfLayerWMS.childLayers.map(function (childLayer) {
        var item = {
          maxResolution: childLayer.maxResolutionHint,
          minResolution: childLayer.minResolutionHint,
          name: childLayer.name,
          queryable: childLayer.queryable
        };

        if (queryLayers && !queryLayers.includes(childLayer.name)) {
          item.getData = false;
        }

        return item;
      });
      var ogcServerName = !firstLevelGroup || firstLevelGroup.mixed ? gmfLayerWMS.ogcServer : firstLevelGroup.ogcServer;
      ogcServer = ogcServers[ogcServerName];
      ogcImageType = ogcServer.imageType;

      if (gmfLayerWMS.time) {
        timeProperty = gmfLayerWMS.time;
      } else if (firstLevelGroup && firstLevelGroup.time) {
        timeProperty = firstLevelGroup.time;
      }
    }

    var ogcServerType = ogcServer ? ogcServer.type : undefined;
    var wfsFeatureNS = ogcServer ? ogcServer.namespace : undefined;
    var wmsIsSingleTile = ogcServer ? ogcServer.isSingleTile : undefined;
    var wfsUrl = ogcServer && ogcServer.wfsSupport ? ogcServer.urlWfs : undefined;
    var wmsUrl = ogcServer ? ogcServer.url : undefined;
    var wfsOutputFormat = ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["WFSOutputFormat"].GML3;

    if (ogcServerType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["ServerType"].QGISSERVER) {
      wfsOutputFormat = ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["WFSOutputFormat"].GML2;
    }

    var snappable = !!meta.snappingConfig;
    var snappingTolerance = meta.snappingConfig ? meta.snappingConfig.tolerance : undefined;
    var snappingToEdges = meta.snappingConfig ? meta.snappingConfig.edge : undefined;
    var snappingToVertice = meta.snappingConfig ? meta.snappingConfig.vertex : undefined;
    var dimensions = this.dimensions_;
    var dimensionsConfig = node.dimensions || firstLevelGroup === null ? {} : firstLevelGroup.dimensions;
    var dimensionsFiltersConfig = gmfLayer.dimensionsFilters;
    var timeLowerValue;
    var timeUpperValue;

    if (timeProperty) {
      var timeValues = this.ngeoWMSTime_.getOptions(timeProperty).values;

      if (Array.isArray(timeValues)) {
        timeLowerValue = timeValues[0];
        timeUpperValue = timeValues[1];
      } else {
        timeLowerValue = timeValues;
      }
    }

    var copyable = meta.copyable;
    var identifierAttribute = meta.identifierAttributeField;
    var name = gmfLayer.name;
    var queryIconPosition = meta.queryIconPosition;
    var timeAttributeName = meta.timeAttribute;
    var visible = meta.isChecked === true;
    var ogcAttributes = ogcServer ? ogcServer.attributes : null;
    var options = {
      copyable: copyable,
      dimensionsConfig: dimensionsConfig,
      dimensionsFiltersConfig: dimensionsFiltersConfig,
      gmfLayer: gmfLayer,
      id: id,
      identifierAttribute: identifierAttribute,
      name: name,
      ogcType: ogcType,
      ogcAttributes: ogcAttributes,
      queryIconPosition: queryIconPosition,
      snappable: snappable,
      timeAttributeName: timeAttributeName,
      visible: visible,
      wfsOutputFormat: wfsOutputFormat
    };

    if (dimensions) {
      options.dimensions = dimensions;
    }

    if (maxResolution) {
      options.maxResolution = maxResolution;
    }

    if (minResolution) {
      options.minResolution = minResolution;
    }

    if (ogcImageType) {
      options.ogcImageType = ogcImageType;
    }

    if (ogcServerType) {
      options.ogcServerType = ogcServerType;
    }

    if (snappingTolerance) {
      options.snappingTolerance = snappingTolerance;
    }

    if (snappingToEdges) {
      options.snappingToEdges = snappingToEdges;
    }

    if (snappingToVertice) {
      options.snappingToVertice = snappingToVertice;
    }

    if (timeLowerValue) {
      options.timeLowerValue = timeLowerValue;
    }

    if (timeProperty) {
      options.timeProperty = timeProperty;
    }

    if (timeUpperValue) {
      options.timeUpperValue = timeUpperValue;
    }

    if (wfsFeatureNS) {
      options.wfsFeatureNS = wfsFeatureNS;
    }

    if (wfsLayers) {
      options.wfsLayers = wfsLayers;
    }

    if (wfsUrl) {
      options.wfsUrl = wfsUrl;
    }

    if (wmsIsSingleTile) {
      options.wmsIsSingleTile = wmsIsSingleTile;
    }

    if (wmsLayers) {
      options.wmsLayers = wmsLayers;
    }

    if (wmsUrl) {
      options.wmsUrl = wmsUrl;
    }

    if (wmtsLayer) {
      options.wmtsLayer = wmtsLayer;
    }

    if (wmtsUrl) {
      options.wmtsUrl = wmtsUrl;
    }

    this.dataSourcesCache_[id] = new gmf_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"](options);
  };

  _proto.addTreeCtrlToCache_ = function addTreeCtrlToCache_(treeCtrl) {
    var id = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(treeCtrl.node);
    var dataSource = this.dataSourcesCache_[id];

    if (!dataSource) {
      throw new Error('Missing dataSource');
    }

    treeCtrl.setDataSource(dataSource);
    var stateWatcherUnregister = this.rootScope_.$watch(function () {
      return treeCtrl.getState();
    }, this.handleTreeCtrlStateChange_.bind(this, treeCtrl));
    var filterRulesWatcherUnregister = this.rootScope_.$watch(function () {
      var hasFilters = dataSource.filterRules !== null;
      var isVisible = dataSource.visible;
      return hasFilters && isVisible;
    }, this.handleDataSourceFilterRulesChange_.bind(this, dataSource));
    var timeLowerValueWatcherUnregister;
    var timeUpperValueWatcherUnregister;
    var wmsLayer;

    if (dataSource.timeProperty && dataSource.ogcType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["Type"].WMS) {
      timeLowerValueWatcherUnregister = this.rootScope_.$watch(function () {
        return dataSource.timeLowerValue;
      }, this.handleDataSourceTimeValueChange_.bind(this, dataSource));

      if (dataSource.timeProperty.mode === 'range') {
        timeUpperValueWatcherUnregister = this.rootScope_.$watch(function () {
          return dataSource.timeUpperValue;
        }, this.handleDataSourceTimeValueChange_.bind(this, dataSource));
      }

      wmsLayer = Object(gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_3__["getLayer"])(treeCtrl);
    }

    this.treeCtrlCache_[id] = {
      filterRulesWatcherUnregister: filterRulesWatcherUnregister,
      stateWatcherUnregister: stateWatcherUnregister,
      timeLowerValueWatcherUnregister: timeLowerValueWatcherUnregister,
      timeUpperValueWatcherUnregister: timeUpperValueWatcherUnregister,
      treeCtrl: treeCtrl,
      wmsLayer: wmsLayer
    };
    this.dataSources_.push(dataSource);
    this.gmfWFSAliases_.describe(dataSource);
  };

  _proto.removeTreeCtrlCacheItem_ = function removeTreeCtrlCacheItem_(item) {
    var dataSource = item.treeCtrl.getDataSource();

    if (!dataSource) {
      throw new Error('DataSource should be set');
    }

    this.dataSources_.remove(dataSource);
    item.treeCtrl.setDataSource(null);
    item.filterRulesWatcherUnregister();
    item.stateWatcherUnregister();

    if (item.timeLowerValueWatcherUnregister) {
      item.timeLowerValueWatcherUnregister();
    }

    if (item.timeUpperValueWatcherUnregister) {
      item.timeUpperValueWatcherUnregister();
    }

    delete this.treeCtrlCache_[Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(item.treeCtrl.node)];
  };

  _proto.clearTreeCtrlCache_ = function clearTreeCtrlCache_() {
    for (var id in this.treeCtrlCache_) {
      this.removeTreeCtrlCacheItem_(this.treeCtrlCache_[id]);
    }
  };

  _proto.handleTreeCtrlStateChange_ = function handleTreeCtrlStateChange_(treeCtrl, newVal) {
    var treeDataSource = treeCtrl.getDataSource();

    if (!treeDataSource) {
      throw new Error('DataSource should be set');
    }

    var visible = newVal === 'on';
    treeDataSource.visible = visible;
    var layer = this.getDataSourceLayer_(treeDataSource);

    if (layer == undefined) {
      return;
    }

    this.updateLayerFilter_(layer);
  };

  _proto.getTreeCtrlCacheItem_ = function getTreeCtrlCacheItem_(treeCtrl) {
    return this.treeCtrlCache_[Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(treeCtrl.node)] || null;
  };

  _proto.getDataSourceLayer_ = function getDataSourceLayer_(dataSource) {
    if (!(dataSource instanceof gmf_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"]) || dataSource.gmfLayer == undefined) {
      return;
    }

    var id = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(dataSource.gmfLayer);

    if (id == undefined) {
      return;
    }

    var item = this.treeCtrlCache_[id];

    if (item == undefined) {
      return;
    }

    var treeCtrl = item.treeCtrl;
    return Object(gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_3__["getLayer"])(treeCtrl);
  };

  _proto.updateLayerFilter_ = function updateLayerFilter_(layer) {
    var _source$updateParams;

    if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_16__["default"] || layer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_14__["default"])) {
      return;
    }

    var source = layer.getSource();

    if (!(source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_17__["default"] || source instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_18__["default"])) {
      return;
    }

    var params = source.getParams();
    var layersParam = params.LAYERS;
    var layersList = layersParam.split(',');

    if (!layersList.length) {
      throw new Error('Missing layersList');
    }

    var filterParam = 'FILTER';
    var filterParamValues = [];
    var hasFilter = false;

    for (var _iterator7 = _createForOfIteratorHelperLoose(layersList), _step7; !(_step7 = _iterator7()).done;) {
      var wmsLayerName = _step7.value;
      var filterParamValue = '()';
      var dataSources = this.dataSources_.getArray();

      for (var _iterator8 = _createForOfIteratorHelperLoose(dataSources), _step8; !(_step8 = _iterator8()).done;) {
        var dataSource = _step8.value;
        var dsLayer = this.getDataSourceLayer_(dataSource);

        if (dsLayer == undefined) {
          continue;
        }

        if (!(dataSource instanceof gmf_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"])) {
          throw new Error('Wrong dataSource type');
        }

        var gmfLayerWMS = dataSource.gmfLayer;

        if (Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(dsLayer) == Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(layer) && layer.get('querySourceIds').includes(String(dataSource.id)) && gmfLayerWMS.layers.split(',').includes(wmsLayerName)) {
          var id = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(dataSource.gmfLayer);
          var item = this.treeCtrlCache_[id];

          if (!item) {
            throw new Error('Missing item');
          }

          var treeCtrl = item.treeCtrl;
          var projCode = treeCtrl.map.getView().getProjection().getCode();

          if (!(dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
            throw new Error('Wrong datasource');
          }

          var filterString = dataSource.visible ? this.ngeoRuleHelper_.createFilterString({
            dataSource: dataSource,
            projCode: projCode,
            incDimensions: true
          }) : null;

          if (filterString) {
            filterParamValue = "(" + filterString + ")";
            hasFilter = true;
          }
        }
      }

      filterParamValues.push(filterParamValue);
    }

    source.updateParams((_source$updateParams = {}, _source$updateParams[filterParam] = hasFilter ? filterParamValues.join('') : null, _source$updateParams));
  };

  _proto.handleDataSourceFilterRulesChange_ = function handleDataSourceFilterRulesChange_(dataSource) {
    if (dataSource.filtrable !== true || dataSource.ogcType !== ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["Type"].WMS) {
      return;
    }

    var layer = this.getDataSourceLayer_(dataSource);

    if (layer === undefined) {
      return;
    }

    this.updateLayerFilter_(layer);
  };

  _proto.handleDataSourceTimeValueChange_ = function handleDataSourceTimeValueChange_(dataSource) {
    var id = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_12__["getUid"])(dataSource.gmfLayer);
    var item = this.treeCtrlCache_[id];

    if (!item) {
      throw new Error('Missing item');
    }

    var wmsLayer = item.wmsLayer;
    var wmsSource = wmsLayer.getSource();
    var timeProperty = dataSource.timeProperty;
    var timeParam;
    var range = dataSource.timeRangeValue;

    if (range) {
      if (!timeProperty) {
        throw new Error('Missing timeProperty');
      }

      timeParam = this.ngeoWMSTime_.formatWMSTimeParam(timeProperty, range);
    }

    var params = wmsSource.getParams();
    var currentTimeParam = params.TIME;

    if (currentTimeParam === timeParam) {
      return;
    }

    this.ngeoLayerHelper_.updateWMSLayerState(wmsLayer, wmsSource.getParams().LAYERS, timeParam);
  };

  _proto.handleNgeoBackgroundLayerChange_ = function handleNgeoBackgroundLayerChange_(evt) {
    var event = evt;
    var previousBackgroundLayer = event.detail.previous;
    var currentBackgroundLayer = event.detail.current;
    var cache = this.dataSourcesCache_;

    if (previousBackgroundLayer) {
      var ids = previousBackgroundLayer.get('querySourceIds');

      if (Array.isArray(ids)) {
        for (var _iterator9 = _createForOfIteratorHelperLoose(ids), _step9; !(_step9 = _iterator9()).done;) {
          var id = _step9.value;
          var dataSource = cache[id];

          if (dataSource) {
            dataSource.visible = false;
            this.dataSources_.remove(dataSource);
          }
        }
      }
    }

    if (currentBackgroundLayer) {
      var _ids = currentBackgroundLayer.get('querySourceIds');

      if (Array.isArray(_ids)) {
        for (var _iterator10 = _createForOfIteratorHelperLoose(_ids), _step10; !(_step10 = _iterator10()).done;) {
          var _id = _step10.value;
          var _dataSource = cache[_id];

          if (_dataSource) {
            _dataSource.visible = true;
            this.dataSources_.push(_dataSource);
          }
        }
      }
    }
  };

  return DatasourceManager;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDataSourcesManager', [gmf_datasource_WFSAliases_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_11__["default"].name]);
myModule.service('gmfDataSourcesManager', DatasourceManager);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/OGC.js":
/*!********************************************!*\
  !*** ./contribs/gmf/src/datasource/OGC.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var GmfDatasourceOGC = function (_ngeoDatasourceOGC) {
  _inheritsLoose(GmfDatasourceOGC, _ngeoDatasourceOGC);

  function GmfDatasourceOGC(options) {
    var _this;

    _this = _ngeoDatasourceOGC.call(this, options) || this;
    _this.gmfLayer_ = options.gmfLayer;
    return _this;
  }

  _createClass(GmfDatasourceOGC, [{
    key: "gmfLayer",
    get: function get() {
      return this.gmfLayer_;
    }
  }]);

  return GmfDatasourceOGC;
}(ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (GmfDatasourceOGC);

/***/ }),

/***/ "./contribs/gmf/src/datasource/WFSAliases.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/datasource/WFSAliases.js ***!
  \***************************************************/
/*! exports provided: DatasourceWFSAlias, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasourceWFSAlias", function() { return DatasourceWFSAlias; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/Helper.js */ "./src/datasource/Helper.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");



var DatasourceWFSAlias = function () {
  DatasourceWFSAlias.$inject = ["ngeoDataSourcesHelper"];

  function DatasourceWFSAlias(ngeoDataSourcesHelper) {
    this.ngeoDataSourcesHelper_ = ngeoDataSourcesHelper;
  }

  var _proto = DatasourceWFSAlias.prototype;

  _proto.describe = function describe(dataSource) {
    if (dataSource.ogcServerType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_2__["ServerType"].QGISSERVER && dataSource.wfsUrl_ && dataSource.getWFSLayerNames().length == 1 && !dataSource.attributes) {
      this.ngeoDataSourcesHelper_.getDataSourceAttributes(dataSource);
    }
  };

  return DatasourceWFSAlias;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDatasourceWFSAliases', [ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('gmfWFSAliases', DatasourceWFSAlias);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/fileGroup.js":
/*!**************************************************!*\
  !*** ./contribs/gmf/src/datasource/fileGroup.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDatasourceFileGroup', []);
myModule.value('gmfDatasourceFileGroup', {
  fileGroup: null
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/datasource/module.js":
/*!***********************************************!*\
  !*** ./contribs/gmf/src/datasource/module.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_datasource_DataSourceBeingFiltered_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/datasource/DataSourceBeingFiltered.js */ "./contribs/gmf/src/datasource/DataSourceBeingFiltered.js");
/* harmony import */ var gmf_datasource_ExternalDataSourcesManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/datasource/ExternalDataSourcesManager.js */ "./contribs/gmf/src/datasource/ExternalDataSourcesManager.js");
/* harmony import */ var gmf_datasource_fileGroup_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/datasource/fileGroup.js */ "./contribs/gmf/src/datasource/fileGroup.js");
/* harmony import */ var gmf_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/datasource/Helper.js */ "./contribs/gmf/src/datasource/Helper.js");
/* harmony import */ var gmf_datasource_Manager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/datasource/Manager.js */ "./contribs/gmf/src/datasource/Manager.js");
/* harmony import */ var gmf_datasource_WFSAliases_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! gmf/datasource/WFSAliases.js */ "./contribs/gmf/src/datasource/WFSAliases.js");







/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDatasourceModule', [gmf_datasource_DataSourceBeingFiltered_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_datasource_ExternalDataSourcesManager_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_datasource_fileGroup_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, gmf_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_datasource_Manager_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, gmf_datasource_WFSAliases_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/disclaimer/component.js":
/*!**************************************************!*\
  !*** ./contribs/gmf/src/disclaimer/component.js ***!
  \**************************************************/
/*! exports provided: DisclaimerController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisclaimerController", function() { return DisclaimerController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Base.js */ "./node_modules/ol/layer/Base.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var gmf_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/index.js */ "./contribs/gmf/src/index.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var ngeo_message_Disclaimer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/message/Disclaimer.js */ "./src/message/Disclaimer.js");
/* harmony import */ var ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/misc/EventHelper.js */ "./src/misc/EventHelper.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! angular-sanitize */ "./node_modules/angular-sanitize/index.js");
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(angular_sanitize__WEBPACK_IMPORTED_MODULE_11__);
DisclaimerController.$inject = ["$element", "$sce", "$timeout", "gettextCatalog", "ngeoDisclaimer", "ngeoEventHelper", "ngeoLayerHelper", "gmfDisclaimerOptions"];












var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfDisclaimer', ['ngSanitize', ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, ngeo_message_Disclaimer_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_9__["default"].name]);
function DisclaimerController($element, $sce, $timeout, gettextCatalog, ngeoDisclaimer, ngeoEventHelper, ngeoLayerHelper, gmfDisclaimerOptions) {
  this.options = gmfDisclaimerOptions;
  this.map = null;
  this.visibility = false;
  this.msg;
  this.msgs_ = [];
  this.sce_ = $sce;
  this.timeout_ = $timeout;
  this.gettextCatalog_ = gettextCatalog;
  this.element_ = $element;
  this.disclaimer_ = ngeoDisclaimer;
  this.eventHelper_ = ngeoEventHelper;
  this.ngeoLayerHelper_ = ngeoLayerHelper;
  this.dataLayerGroup_ = null;
}

DisclaimerController.prototype.$onInit = function () {
  if (!this.map) {
    throw new Error('Missing map');
  }

  this.dataLayerGroup_ = this.ngeoLayerHelper_.getGroupFromMap(this.map, gmf_index_js__WEBPACK_IMPORTED_MODULE_5__["DATALAYERGROUP_NAME"]);
  this.registerLayer_(this.dataLayerGroup_);
};

DisclaimerController.prototype.handleLayersAdd_ = function (evt) {
  var _this = this;

  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_10__["CollectionEvent"]) {
    this.timeout_(function () {
      var layer = evt.element;

      if (!(layer instanceof ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_3__["default"])) {
        throw new Error('Wrong layer type');
      }

      _this.registerLayer_(layer);
    });
  }
};

DisclaimerController.prototype.handleLayersRemove_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_10__["CollectionEvent"]) {
    var layer = evt.element;

    if (!(layer instanceof ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_3__["default"])) {
      throw new Error('Wrong layer type');
    }

    this.unregisterLayer_(layer);
  }
};

DisclaimerController.prototype.registerLayer_ = function (layer) {
  var _this2 = this;

  var layerUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer);

  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
    this.eventHelper_.addListenerKey(layerUid, Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(layer.getLayers(), 'add', this.handleLayersAdd_, this));
    this.eventHelper_.addListenerKey(layerUid, Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(layer.getLayers(), 'remove', this.handleLayersRemove_, this));
    layer.getLayers().forEach(function (layer) {
      _this2.registerLayer_(layer);
    });
  } else {
    if (this.options.layerVisibility || this.options.layerVisibility === undefined) {
      if (layer.getVisible()) {
        this.update_(layer);
      } else {
        this.closeAll_(layer);
      }

      var listenerKey = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(layer, 'propertychange', function (event) {
        if (layer.getVisible()) {
          _this2.update_(layer);
        } else {
          _this2.closeAll_(layer);
        }
      });
      this.eventHelper_.addListenerKey(layerUid, listenerKey);
    } else {
      this.showAll_(layer);
    }
  }
};

DisclaimerController.prototype.unregisterLayer_ = function (layer) {
  var _this3 = this;

  var layerUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer);

  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
    this.eventHelper_.clearListenerKey(layerUid);
    layer.getLayers().forEach(function (layer) {
      return _this3.unregisterLayer_(layer);
    });
  } else {
    this.closeAll_(layer);
  }
};

DisclaimerController.prototype.$onDestroy = function () {
  if (!this.dataLayerGroup_) {
    throw new Error('Missing dataLayerGroup');
  }

  this.unregisterLayer_(this.dataLayerGroup_);
};

DisclaimerController.prototype.showDisclaimerMessage_ = function (layerUid, msg) {
  msg = this.gettextCatalog_.getString(msg);

  if (this.options.external) {
    if (!this.msgs_.includes(msg)) {
      this.msgs_.push(msg);
    }

    this.msg = "" + this.sce_.trustAsHtml(this.msgs_.join('<br />'));
    this.visibility = true;
  } else {
    var options = {
      msg: msg,
      layerUid: layerUid,
      target: this.element_,
      type: ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_7__["MessageType"].WARNING
    };

    if (this.options.popup) {
      options.popup = this.options.popup;
    }

    this.disclaimer_.alert(options);
  }
};

DisclaimerController.prototype.closeAll_ = function (layer) {
  var disclaimers = layer.get('disclaimers');

  if (disclaimers) {
    var layerUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer);

    for (var key in disclaimers) {
      var uid = layerUid + "-" + key;
      this.closeDisclaimerMessage_(uid, disclaimers[key]);
    }
  }
};

DisclaimerController.prototype.showAll_ = function (layer) {
  var disclaimers = layer.get('disclaimers');

  if (!disclaimers) {
    return;
  }

  var layerUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer);

  for (var key in disclaimers) {
    var uid = layerUid + "-" + key;
    this.showDisclaimerMessage_(uid, disclaimers[key]);
  }
};

DisclaimerController.prototype.update_ = function (layer) {
  var disclaimers = layer.get('disclaimers');

  if (!disclaimers) {
    return;
  }

  if ('all' in disclaimers) {
    console.assert(Object.keys(disclaimers).length === 1);
    this.showAll_(layer);
  } else {
    var layerWMS = layer;
    var sourceWMS = layerWMS.getSource();

    if (sourceWMS.getParams) {
      var layers = sourceWMS.getParams()['LAYERS'];
      var layerUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer);

      for (var key in disclaimers) {
        var uid = layerUid + "-" + key;

        if (layers.indexOf(key) !== -1) {
          this.showDisclaimerMessage_(uid, disclaimers[key]);
        } else {
          this.closeDisclaimerMessage_(uid, disclaimers[key]);
        }
      }
    }
  }
};

DisclaimerController.prototype.closeDisclaimerMessage_ = function (layerUid, msg) {
  msg = this.gettextCatalog_.getString(msg);

  if (this.options.external) {
    this.visibility = false;
    this.msgs_.length = 0;
    this.msg = '';
  } else {
    var options = {
      msg: msg,
      layerUid: layerUid,
      target: this.element_,
      type: ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_7__["MessageType"].WARNING
    };

    if (this.options.popup) {
      options.popup = this.options.popup;
    }

    this.disclaimer_.close(options);
  }
};

var disclaimerComponent = {
  controller: DisclaimerController,
  bindings: {
    'map': '=gmfDisclaimerMap',
    'visibility': '=?gmfDisclaimerExternalVisibility',
    'msg': '=?gmfDisclaimerExternalMsg'
  }
};
myModule.component('gmfDisclaimer', disclaimerComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/dropfile/component.js":
/*!************************************************!*\
  !*** ./contribs/gmf/src/dropfile/component.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var gmf_datasource_ExternalDataSourcesManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/datasource/ExternalDataSourcesManager.js */ "./contribs/gmf/src/datasource/ExternalDataSourcesManager.js");




var fileDrop = function fileDrop(gmfExternalDataSourcesManager, ngeoNotification, gettextCatalog) {
  return {
    restrict: 'A',
    template: '<div class="drop-zone-off" id="drop-zone"><p>{{"Drop file here." | translate}}</p></div>',
    link: function link($scope, element, attrs) {
      if ($scope.ctrl.fileDropEnabled !== true) {
        return;
      }

      element.bind('dragover', processDrag_);
      element.bind('dragenter', processDrag_);
      element.bind('dragleave', processDrag_);
      element.bind('drop', processDrop_.bind(this, element, gmfExternalDataSourcesManager, ngeoNotification, gettextCatalog));
    }
  };
};

fileDrop.$inject = ["gmfExternalDataSourcesManager", "ngeoNotification", "gettextCatalog"];
fileDrop.$inject = ["gmfExternalDataSourcesManager", "ngeoNotification", "gettextCatalog"];

function processDrag_() {
  if (event !== null) {
    event.preventDefault();
    event.stopPropagation();
  }

  if (event.type === 'dragenter' || event.type === 'dragleave') {
    var dropZone = document.getElementById('drop-zone');

    if (event.type === 'dragenter') {
      dropZone.classList.remove('drop-zone-off');
      dropZone.classList.add('drop-zone');
    }

    if (event.type === 'dragleave') {
      dropZone.classList.remove('drop-zone');
      dropZone.classList.add('drop-zone-off');
    }
  }
}

function processDrop_(element, gmfExternalDataSourcesManager, ngeoNotification, gettextCatalog, event) {
  if (event !== null) {
    event.preventDefault();
  }

  var dropZone = document.getElementById('drop-zone');
  dropZone.classList.remove('drop-zone');
  dropZone.classList.add('drop-zone-off');
  var file = event.originalEvent.dataTransfer.files[0];
  gmfExternalDataSourcesManager.createAndAddDataSourceFromFile(file, function (success) {
    if (!success) {
      var div = document.createElement('DIV');
      div.id = 'file-alert';
      var alertElements = document.getElementsByClassName('gmf-app-map-messages');

      if (alertElements && alertElements.length > 0) {
        div.classList.add('gmf-file-alert-contained');
        alertElements[0].insertBefore(div, alertElements[0].childNodes[0]);
      } else {
        div.classList.add('gmf-file-alert-alone');
        element[0].appendChild(div);
      }

      var delay = 4000;
      ngeoNotification.notify({
        msg: gettextCatalog.getString('This file can not be imported!'),
        type: ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_1__["MessageType"].ERROR,
        target: '#file-alert',
        delay: delay
      });
      setTimeout(function () {
        var el = document.getElementById('file-alert');
        el.remove();
      }, delay);
    }
  });
}

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfFileDropZone', [gmf_datasource_ExternalDataSourcesManager_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
myModule.directive('gmfFileDropZone', fileDrop);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/dropfile/dropfile.scss":
/*!*************************************************!*\
  !*** ./contribs/gmf/src/dropfile/dropfile.scss ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/dropfile/module.js":
/*!*********************************************!*\
  !*** ./contribs/gmf/src/dropfile/module.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_dropfile_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/dropfile/component.js */ "./contribs/gmf/src/dropfile/component.js");
/* harmony import */ var _dropfile_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dropfile.scss */ "./contribs/gmf/src/dropfile/dropfile.scss");
/* harmony import */ var _dropfile_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_dropfile_scss__WEBPACK_IMPORTED_MODULE_2__);



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfFileDropZoneModule', [gmf_dropfile_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/editing/EnumerateAttribute.js":
/*!********************************************************!*\
  !*** ./contribs/gmf/src/editing/EnumerateAttribute.js ***!
  \********************************************************/
/*! exports provided: EditingEnumerateAttributeService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditingEnumerateAttributeService", function() { return EditingEnumerateAttributeService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var EditingEnumerateAttributeService = function () {
  EditingEnumerateAttributeService.$inject = ["$http", "gmfLayersUrl"];

  function EditingEnumerateAttributeService($http, gmfLayersUrl) {
    this.http_ = $http;
    this.baseUrl_ = gmfLayersUrl;
    this.promises_ = {};
  }

  var _proto = EditingEnumerateAttributeService.prototype;

  _proto.getAttributeValues = function getAttributeValues(dataSource, attribute) {
    var promiseId = dataSource.id + "_" + attribute;
    var name = dataSource.name;

    if (!this.promises_[promiseId]) {
      var url = this.baseUrl_ + "/" + name + "/values/" + attribute;
      this.promises_[promiseId] = this.http_.get(url).then(function (resp) {
        return resp.data.items;
      });
    }

    return this.promises_[promiseId];
  };

  return EditingEnumerateAttributeService;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfEnumerateAttribute', []);
myModule.service('gmfEnumerateAttribute', EditingEnumerateAttributeService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/editing/Snapping.js":
/*!**********************************************!*\
  !*** ./contribs/gmf/src/editing/Snapping.js ***!
  \**********************************************/
/*! exports provided: CustomSnap, EditingSnappingService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomSnap", function() { return CustomSnap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditingSnappingService", function() { return EditingSnappingService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_datasource_fileGroup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/datasource/fileGroup.js */ "./contribs/gmf/src/datasource/fileGroup.js");
/* harmony import */ var gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/layertree/TreeManager.js */ "./contribs/gmf/src/layertree/TreeManager.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/datasource/File.js */ "./src/datasource/File.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ol_interaction_Snap_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/interaction/Snap.js */ "./node_modules/ol/interaction/Snap.js");
EditingSnappingService.$inject = ["$http", "$q", "$rootScope", "$injector", "$timeout", "gmfDatasourceFileGroup", "gmfSnappingConfig", "gmfThemes", "gmfTreeManager", "ngeoFeatures"];

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }













var CustomSnap = function (_olInteractionSnap) {
  _inheritsLoose(CustomSnap, _olInteractionSnap);

  function CustomSnap(options) {
    var _this;

    _this = _olInteractionSnap.call(this, options) || this;
    document.body.addEventListener('keydown', function (evt) {
      _this.setActive(evt.keyCode !== 17);
    });
    document.body.addEventListener('keyup', function () {
      _this.setActive(true);
    });
    return _this;
  }

  return CustomSnap;
}(ol_interaction_Snap_js__WEBPACK_IMPORTED_MODULE_11__["default"]);
function EditingSnappingService($http, $q, $rootScope, $injector, $timeout, gmfDatasourceFileGroup, gmfSnappingConfig, gmfThemes, gmfTreeManager, ngeoFeatures) {
  this.http_ = $http;
  this.q_ = $q;
  this.rootScope_ = $rootScope;
  this.timeout_ = $timeout;
  this.injector_ = $injector;
  this.gmfDatasourceFileGroup_ = gmfDatasourceFileGroup;
  this.gmfSnappingConfig_ = gmfSnappingConfig;
  this.gmfThemes_ = gmfThemes;
  this.gmfTreeManager_ = gmfTreeManager;
  this.ngeoFeatures_ = ngeoFeatures;
  this.cache_ = {};
  this.cacheFileDataSource_ = {};
  this.listenerKeys_ = [];
  this.map_ = null;
  this.mapViewChangePromise_ = null;
  this.ngeoFeaturesSnapInteraction_ = new CustomSnap({
    edge: gmfSnappingConfig.edge,
    features: ngeoFeatures,
    pixelTolerance: gmfSnappingConfig.tolerance,
    vertex: gmfSnappingConfig.vertex
  });
  this.ogcServers_ = null;
  this.ngeoSnappingSource_ = this.injector_.has('ngeoSnappingSource') ? this.injector_.get('ngeoSnappingSource') : undefined;
}

EditingSnappingService.prototype.ensureSnapInteractionsOnTop = function () {
  if (!this.map_) {
    throw new Error('Missing map');
  }

  var map = this.map_;
  var item;

  for (var uid in this.cache_) {
    item = this.cache_[uid];

    if (item.active) {
      if (!item.interaction) {
        throw new Error('Missing item.interaction');
      }

      map.removeInteraction(item.interaction);
      map.addInteraction(item.interaction);
    }
  }

  for (var _uid in this.cacheFileDataSource_) {
    item = this.cacheFileDataSource_[_uid];

    if (item.active) {
      if (!item.interaction) {
        throw new Error('Missing item.interaction');
      }

      map.removeInteraction(item.interaction);
      map.addInteraction(item.interaction);
    }
  }

  map.removeInteraction(this.ngeoFeaturesSnapInteraction_);
  map.addInteraction(this.ngeoFeaturesSnapInteraction_);
};

EditingSnappingService.prototype.setMap = function (map) {
  var _this2 = this;

  var keys = this.listenerKeys_;

  if (this.map_) {
    if (!this.treeCtrlsUnregister_) {
      throw new Error('Missing treeCtrlsUnregister');
    }

    this.treeCtrlsUnregister_();
    this.unregisterAllTreeCtrl_();
    keys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["unlistenByKey"]);
    keys.length = 0;
    this.map_.removeInteraction(this.ngeoFeaturesSnapInteraction_);
  }

  this.map_ = map;

  if (map) {
    this.treeCtrlsUnregister_ = this.rootScope_.$watchCollection(function () {
      if (_this2.gmfTreeManager_.rootCtrl) {
        return _this2.gmfTreeManager_.rootCtrl.children;
      }
    }, function (value) {
      _this2.timeout_(function () {
        if (value) {
          if (!_this2.gmfTreeManager_.rootCtrl) {
            throw new Error('Missing gmfTreeManager_.rootCtrl');
          }

          _this2.unregisterAllTreeCtrl_();

          _this2.gmfTreeManager_.rootCtrl.traverseDepthFirst(_this2.registerTreeCtrl_.bind(_this2));
        }
      }, 0);
    });
    keys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["listen"])(this.gmfThemes_, 'change', this.handleThemesChange_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["listen"])(map, 'moveend', this.handleMapMoveEnd_, this));
    var fileGroup = this.gmfDatasourceFileGroup_.fileGroup;

    if (fileGroup) {
      keys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["listen"])(fileGroup.dataSourcesCollection, 'add', this.handleFileGroupDataSourcesCollectionAdd_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["listen"])(fileGroup.dataSourcesCollection, 'remove', this.handleFileGroupDataSourcesCollectionRemove_, this));
    }

    map.addInteraction(this.ngeoFeaturesSnapInteraction_);
  }
};

EditingSnappingService.prototype.handleThemesChange_ = function () {
  var _this3 = this;

  this.ogcServers_ = null;
  this.gmfThemes_.getOgcServersObject().then(function (ogcServers) {
    _this3.ogcServers_ = ogcServers;
  });
};

EditingSnappingService.prototype.registerTreeCtrl_ = function (treeCtrl) {
  var _this4 = this;

  var node = treeCtrl.node;
  var groupNode = node;

  if (groupNode.children) {
    return;
  }

  node = treeCtrl.node;
  var snappingConfig = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["getSnappingConfig"])(node);

  if (snappingConfig) {
    var wfsConfig = this.getWFSConfig_(treeCtrl);

    if (wfsConfig) {
      var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(treeCtrl);
      var stateWatcherUnregister = this.rootScope_.$watch(function () {
        return _this4.isSnappingActiveForTreeCtrl_(treeCtrl);
      }, this.handleTreeCtrlStateChange_.bind(this, treeCtrl));
      var ogcServer = this.getOGCServer_(treeCtrl);

      if (!ogcServer) {
        throw new Error('Missing ogcServer');
      }

      this.cache_[uid] = {
        active: false,
        featureNS: ogcServer.wfsFeatureNS,
        featurePrefix: 'feature',
        features: new ol_Collection_js__WEBPACK_IMPORTED_MODULE_9__["default"](),
        interaction: null,
        maxFeatures: 50,
        requestDeferred: null,
        snappingConfig: snappingConfig,
        treeCtrl: treeCtrl,
        wfsConfig: wfsConfig,
        stateWatcherUnregister: stateWatcherUnregister
      };
      this.handleTreeCtrlStateChange_(treeCtrl, this.isSnappingActiveForTreeCtrl_(treeCtrl));
    }
  }
};

EditingSnappingService.prototype.unregisterAllTreeCtrl_ = function () {
  for (var uid in this.cache_) {
    var item = this.cache_[uid];

    if (item) {
      item.stateWatcherUnregister();
      this.deactivateItem_(item);
      delete this.cache_[uid];
    }
  }
};

EditingSnappingService.prototype.getOGCServer_ = function (treeCtrl) {
  var gmfLayer = treeCtrl.node;

  if (gmfLayer.type !== gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["ThemeNodeType"].WMS) {
    return null;
  }

  var gmfLayerWMS = gmfLayer;
  var ogcServerName;
  var gmfGroup = treeCtrl.parent.node;

  if (gmfGroup.mixed) {
    ogcServerName = gmfLayerWMS.ogcServer;
  } else {
    var firstTreeCtrl = Object(ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_4__["getFirstParentTree"])(treeCtrl);
    var firstNode = firstTreeCtrl.node;
    ogcServerName = firstNode.ogcServer;
  }

  if (!ogcServerName) {
    return null;
  }

  if (!this.ogcServers_) {
    throw new Error('Missing ogcServers');
  }

  return this.ogcServers_[ogcServerName];
};

EditingSnappingService.prototype.getWFSConfig_ = function (treeCtrl) {
  if (this.ogcServers_ === null) {
    return null;
  }

  var gmfLayer = treeCtrl.node;

  if (gmfLayer.type !== gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["ThemeNodeType"].WMS) {
    return null;
  }

  var gmfLayerWMS = gmfLayer;
  var featureTypes = [];

  for (var i = 0, ii = gmfLayerWMS.childLayers.length; i < ii; i++) {
    if (gmfLayerWMS.childLayers[i].queryable) {
      featureTypes.push(gmfLayerWMS.childLayers[i].name);
    }
  }

  if (!featureTypes.length) {
    return null;
  }

  var ogcServer = this.getOGCServer_(treeCtrl);

  if (!ogcServer || !ogcServer.wfsSupport) {
    return null;
  }

  var urlWfs = ogcServer.urlWfs;

  if (!urlWfs) {
    throw new Error('Missing urlWfs');
  }

  return {
    featureTypes: featureTypes.join(','),
    url: urlWfs
  };
};

EditingSnappingService.prototype.isSnappingActiveForTreeCtrl_ = function (treeCtrl) {
  if (treeCtrl.getState() !== 'on') {
    return false;
  }

  if (treeCtrl.properties.snapping !== undefined) {
    if (typeof treeCtrl.properties.snapping !== 'boolean') {
      throw new Error('Wrong snappingActive type');
    }

    return treeCtrl.properties.snapping;
  }

  var node = treeCtrl.node;
  var config = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["getSnappingConfig"])(node);
  return config !== null && config.activated;
};

EditingSnappingService.prototype.handleTreeCtrlStateChange_ = function (treeCtrl, newVal) {
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(treeCtrl);
  var item = this.cache_[uid];
  newVal ? this.activateItem_(item) : this.deactivateItem_(item);
};

EditingSnappingService.prototype.activateItem_ = function (item) {
  if (!this.map_) {
    throw new Error('Missing map');
  }

  if (item.active) {
    return;
  }

  var map = this.map_;
  var interaction = new CustomSnap({
    edge: item.snappingConfig.edge,
    features: item.features,
    pixelTolerance: item.snappingConfig.tolerance,
    vertex: item.snappingConfig.vertex
  });
  map.addInteraction(interaction);
  item.interaction = interaction;
  item.active = true;
  this.loadItemFeatures_(item);
};

EditingSnappingService.prototype.deactivateItem_ = function (item) {
  if (!this.map_) {
    throw new Error('Missing map');
  }

  if (!item.active) {
    return;
  }

  var map = this.map_;
  var interaction = item.interaction;

  if (!interaction) {
    throw new Error('Missing interaction');
  }

  map.removeInteraction(interaction);
  item.interaction = null;
  item.features.clear();

  if (item.requestDeferred) {
    item.requestDeferred.resolve();
    item.requestDeferred = null;
  }

  item.active = false;
  this.refreshSnappingSource_();
};

EditingSnappingService.prototype.loadAllItems_ = function () {
  this.mapViewChangePromise_ = null;
  var item;

  for (var uid in this.cache_) {
    item = this.cache_[uid];

    if (item.active) {
      this.loadItemFeatures_(item);
    }
  }
};

EditingSnappingService.prototype.refresh = function () {
  this.loadAllItems_();
};

EditingSnappingService.prototype.loadItemFeatures_ = function (item) {
  var _this5 = this;

  if (!this.map_) {
    throw new Error('Missing map');
  }

  if (item.requestDeferred) {
    item.requestDeferred.resolve();
  }

  var map = this.map_;
  var view = map.getView();
  var size = map.getSize();

  if (!size) {
    throw new Error('Missing size');
  }

  var extent = view.calculateExtent(size);
  var projCode = view.getProjection().getCode();
  var featureTypes = item.wfsConfig.featureTypes.split(',');
  var getFeatureOptions = {
    srsName: projCode,
    featureNS: item.featureNS,
    featurePrefix: item.featurePrefix,
    featureTypes: featureTypes,
    outputFormat: 'GML3',
    bbox: extent,
    geometryName: ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_6__["DEFAULT_GEOMETRY_NAME"],
    maxFeatures: item.maxFeatures
  };
  var wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_10__["default"]();
  var xmlSerializer = new XMLSerializer();
  var featureRequestXml = wfsFormat.writeGetFeature(getFeatureOptions);
  var featureRequest = xmlSerializer.serializeToString(featureRequestXml);
  var url = item.wfsConfig.url;
  item.requestDeferred = this.q_.defer();
  this.http_.post(url, featureRequest, {
    timeout: item.requestDeferred.promise
  }).then(function (response) {
    item.requestDeferred = null;
    item.features.clear();
    var readFeatures = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_10__["default"]().readFeatures(response.data);

    if (readFeatures) {
      item.features.extend(readFeatures);

      _this5.refreshSnappingSource_();
    }
  });
};

EditingSnappingService.prototype.handleMapMoveEnd_ = function () {
  if (this.mapViewChangePromise_) {
    this.timeout_.cancel(this.mapViewChangePromise_);
  }

  this.mapViewChangePromise_ = this.timeout_(this.loadAllItems_.bind(this), 400);
};

EditingSnappingService.prototype.refreshSnappingSource_ = function () {
  if (this.ngeoSnappingSource_ === undefined) {
    return;
  }

  this.ngeoSnappingSource_.clear();

  for (var uid in this.cache_) {
    var item = this.cache_[uid];

    if (item.features === undefined) {
      throw new Error('Missing features');
    }

    if (item.active) {
      this.ngeoSnappingSource_.addFeatures(item.features.getArray());
    }
  }
};

EditingSnappingService.prototype.handleFileGroupDataSourcesCollectionAdd_ = function (evt) {
  if (!(evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_9__["CollectionEvent"])) {
    return;
  }

  var fileDataSource = evt.element;

  if (!(fileDataSource instanceof ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__["default"])) {
    return;
  }

  var features = fileDataSource.featuresCollection;
  var gmfSnappingConfig = this.gmfSnappingConfig_;
  var interaction = new CustomSnap({
    edge: gmfSnappingConfig.edge,
    features: features,
    pixelTolerance: gmfSnappingConfig.tolerance,
    vertex: gmfSnappingConfig.vertex
  });
  var visibleWatcherUnregister = this.rootScope_.$watch(function () {
    return fileDataSource.visible;
  }, this.handleFileDataSourceVisibleChange_.bind(this, fileDataSource));
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(fileDataSource);
  this.cacheFileDataSource_[uid] = {
    active: false,
    fileDataSource: fileDataSource,
    interaction: interaction,
    visibleWatcherUnregister: visibleWatcherUnregister
  };
  this.handleFileDataSourceVisibleChange_(fileDataSource);
};

EditingSnappingService.prototype.handleFileGroupDataSourcesCollectionRemove_ = function (evt) {
  if (!(evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_9__["CollectionEvent"])) {
    return;
  }

  var fileDataSource = evt.element;

  if (!(fileDataSource instanceof ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_5__["default"])) {
    return;
  }

  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(fileDataSource);

  if (!this.cacheFileDataSource_[uid]) {
    return;
  }

  var item = this.cacheFileDataSource_[uid];
  var map = this.map_;
  item.visibleWatcherUnregister();

  if (item.active) {
    map.removeInteraction(item.interaction);
  }

  delete this.cacheFileDataSource_[uid];
};

EditingSnappingService.prototype.handleFileDataSourceVisibleChange_ = function (fileDataSource) {
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(fileDataSource);
  var item = this.cacheFileDataSource_[uid];
  var visible = fileDataSource.visible;

  if (item.active === visible) {
    return;
  }

  item.active = visible;
  var map = this.map_;

  if (visible) {
    map.addInteraction(item.interaction);
  } else {
    map.removeInteraction(item.interaction);
  }
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfSnapping', [gmf_datasource_fileGroup_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_4__["default"].name]);
myModule.service('gmfSnapping', EditingSnappingService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/icons/dot.svg?viewbox&height=1em":
/*!***********************************************************!*\
  !*** ./contribs/gmf/src/icons/dot.svg?viewbox&height=1em ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13 13\" width=\"1em\" height=\"1em\"><path d=\"M6.458 9.63c-1.521.01-2.925-1.246-3.072-2.758-.156-1.27.533-2.603 1.689-3.162.984-.506 2.248-.454 3.16.184.962.642 1.542 1.84 1.371 2.998-.14 1.121-.921 2.14-1.986 2.53-.369.143-.765.217-1.162.209zm-.024-1.102c.997.052 1.949-.748 2.075-1.736.123-.849-.344-1.756-1.124-2.12-.811-.395-1.892-.181-2.453.538-.607.722-.619 1.88.011 2.592.366.433.921.715 1.491.726z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/layers.svg?viewbox&height=1em":
/*!**************************************************************!*\
  !*** ./contribs/gmf/src/icons/layers.svg?viewbox&height=1em ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" width=\"1em\" height=\"1em\"><path d=\"M19.984 6.256L10 1.264.016 6.256 10 11.248l9.984-4.992zM10 2.921l6.67 3.335L10 9.591 3.33 6.256 10 2.921zM17.984 9l2 .999L10 14.992.016 10l2-1L10 12.992zm0 3.743l2 1L10 18.736.016 13.744l2-1L10 16.736z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/search-go.svg?viewbox&height=1em":
/*!*****************************************************************!*\
  !*** ./contribs/gmf/src/icons/search-go.svg?viewbox&height=1em ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 15\" width=\"1em\" height=\"1em\"><path d=\"M5.111 0c-.692 0-1.358.138-1.99.407a5.076 5.076 0 00-1.625 1.089c-.458.457-.82.994-1.09 1.626A5.045 5.045 0 000 5.112C0 5.802.138 6.468.407 7.1a5.076 5.076 0 001.089 1.627c.457.457.994.82 1.626 1.089a5.045 5.045 0 001.99.406c1.064 0 2.022-.3 2.889-.9l2.497 2.483a.862.862 0 00.654.276c.251 0 .469-.092.653-.276a.893.893 0 00.276-.653.883.883 0 00-.261-.654L9.322 8.001c.324-.468.563-.956.712-1.481-.003-.034-.015-.07-.015-.102 0-.104.037-.211.058-.32h-.334c-.417 0-.941-.247-1.205-.551-.065-.075-.135-.154-.189-.247a3.103 3.103 0 01-.944 2.105c-.636.637-1.399.958-2.294.959-.895 0-1.657-.322-2.294-.959s-.958-1.399-.958-2.294.321-1.657.958-2.294 1.399-.959 2.294-.958c.895 0 1.658.322 2.294.958.315.315.567.653.726 1.03.024-.378.18-.769.407-1.03a1.78 1.78 0 01.857-.508 5.006 5.006 0 00-.668-.813A5.076 5.076 0 007.1.406 5.045 5.045 0 005.111 0zM15 4.182q0 .21-.143.353l-2.524 2.524q-.152.143-.353.143-.198 0-.35-.143l-.29-.291q-.147-.148-.147-.353t.147-.353l1.136-1.136h-2.73q-.2 0-.327-.145-.126-.146-.126-.351v-.496q0-.206.126-.351.126-.146.328-.146h2.729l-1.136-1.14q-.147-.139-.147-.348 0-.21.147-.35l.29-.29q.148-.147.35-.147.205 0 .353.147l2.524 2.524q.143.136.143.349z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=1em":
/*!***************************************************************!*\
  !*** ./contribs/gmf/src/icons/spinner.svg?viewbox&height=1em ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" width=\"1em\" height=\"1em\"><circle cx=\"256\" cy=\"48\" r=\"48\"></circle><circle cx=\"109.17\" cy=\"108.313\" r=\"43\"></circle><circle cx=\"46.537\" cy=\"257.328\" r=\"38\"></circle><circle cx=\"108.028\" cy=\"403.972\" r=\"33\"></circle><circle cx=\"255.794\" cy=\"463.935\" r=\"28\"></circle><circle cx=\"402.894\" cy=\"402.936\" r=\"23\"></circle><circle cx=\"463.623\" cy=\"256.106\" r=\"18\"></circle></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=1rem":
/*!****************************************************************!*\
  !*** ./contribs/gmf/src/icons/spinner.svg?viewbox&height=1rem ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" width=\"1rem\" height=\"1rem\"><circle cx=\"256\" cy=\"48\" r=\"48\"></circle><circle cx=\"109.17\" cy=\"108.313\" r=\"43\"></circle><circle cx=\"46.537\" cy=\"257.328\" r=\"38\"></circle><circle cx=\"108.028\" cy=\"403.972\" r=\"33\"></circle><circle cx=\"255.794\" cy=\"463.935\" r=\"28\"></circle><circle cx=\"402.894\" cy=\"402.936\" r=\"23\"></circle><circle cx=\"463.623\" cy=\"256.106\" r=\"18\"></circle></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=3rem":
/*!****************************************************************!*\
  !*** ./contribs/gmf/src/icons/spinner.svg?viewbox&height=3rem ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" width=\"3rem\" height=\"3rem\"><circle cx=\"256\" cy=\"48\" r=\"48\"></circle><circle cx=\"109.17\" cy=\"108.313\" r=\"43\"></circle><circle cx=\"46.537\" cy=\"257.328\" r=\"38\"></circle><circle cx=\"108.028\" cy=\"403.972\" r=\"33\"></circle><circle cx=\"255.794\" cy=\"463.935\" r=\"28\"></circle><circle cx=\"402.894\" cy=\"402.936\" r=\"23\"></circle><circle cx=\"463.623\" cy=\"256.106\" r=\"18\"></circle></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/stack-indeterminate.svg?viewbox&height=1em":
/*!***************************************************************************!*\
  !*** ./contribs/gmf/src/icons/stack-indeterminate.svg?viewbox&height=1em ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13 13\" width=\"1em\" height=\"1em\"><path d=\"M6.513.614l-6.5 3.25 6.5 3.25 6.5-3.25-6.5-3.25zm0 1.078l4.342 2.172-4.342 2.172L2.17 3.864l4.343-2.172zm5.198 6.396l1.302.65-6.5 3.25-6.5-3.25 1.302-.65 5.198 2.6zM1.315 5.65l-1.302.651 2.114 1.057 1.3-.65zm10.396 0L9.599 6.708l1.302.651 2.112-1.058zM8.127 7.443l-1.614.807-1.136-.568-1.302.65 2.438 1.22 2.437-1.22-1.3-.65z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/index.js":
/*!***********************************!*\
  !*** ./contribs/gmf/src/index.js ***!
  \***********************************/
/*! exports provided: DATALAYERGROUP_NAME, EXTERNALLAYERGROUP_NAME, COORDINATES_LAYER_NAME, PermalinkParam */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATALAYERGROUP_NAME", function() { return DATALAYERGROUP_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EXTERNALLAYERGROUP_NAME", function() { return EXTERNALLAYERGROUP_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COORDINATES_LAYER_NAME", function() { return COORDINATES_LAYER_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PermalinkParam", function() { return PermalinkParam; });
var DATALAYERGROUP_NAME = 'data';
var EXTERNALLAYERGROUP_NAME = 'external';
var COORDINATES_LAYER_NAME = 'gmfCoordinatesLayerName';
var PermalinkParam = {
  BG_LAYER: 'baselayer_ref',
  BG_LAYER_OPACITY: 'baselayer_opacity',
  EXTERNAL_DATASOURCES_NAMES: 'eds_n',
  EXTERNAL_DATASOURCES_URLS: 'eds_u',
  FEATURES: 'rl_features',
  MAP_CROSSHAIR: 'map_crosshair',
  MAP_SWIPE: 'map_swipe',
  MAP_SWIPE_VALUE: 'map_swipe_value',
  MAP_TOOLTIP: 'map_tooltip',
  MAP_X: 'map_x',
  MAP_Y: 'map_y',
  MAP_Z: 'map_zoom',
  TREE_GROUPS: 'tree_groups',
  WFS_LAYER: 'wfs_layer',
  WFS_NGROUPS: 'wfs_ngroups',
  WFS_SHOW_FEATURES: 'wfs_showFeatures'
};

/***/ }),

/***/ "./contribs/gmf/src/layertree/SyncLayertreeMap.js":
/*!********************************************************!*\
  !*** ./contribs/gmf/src/layertree/SyncLayertreeMap.js ***!
  \********************************************************/
/*! exports provided: SyncLayertreeMap, getLayer, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SyncLayertreeMap", function() { return SyncLayertreeMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLayer", function() { return getLayer; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
SyncLayertreeMap.$inject = ["$rootScope", "ngeoLayerHelper", "ngeoWMSTime", "gmfThemes"];









function SyncLayertreeMap($rootScope, ngeoLayerHelper, ngeoWMSTime, gmfThemes) {
  var _this = this;

  this.layerHelper_ = ngeoLayerHelper;
  this.ngeoWMSTime_ = ngeoWMSTime;
  this.ogcServersObject_ = null;
  gmfThemes.getOgcServersObject().then(function (ogcServersObject) {
    _this.ogcServersObject_ = ogcServersObject;
  });
  $rootScope.$on('ngeo-layertree-state', function (map, treeCtrl, firstParent) {
    _this.sync_(firstParent);
  });
}

SyncLayertreeMap.prototype.createLayer = function (treeCtrl, map, dataLayerGroup, opt_position) {
  var layer = null;
  var gmfGroup = treeCtrl.node;
  var gmfParentGroup = treeCtrl.parent.node;

  if (gmfGroup.children !== undefined && gmfGroup.mixed) {
    layer = this.createGroup_(treeCtrl, map, dataLayerGroup, opt_position);
  } else if (gmfGroup.children === undefined && gmfParentGroup.mixed) {
    layer = this.createLeafInAMixedGroup_(treeCtrl, map);
  } else if (gmfGroup.children === undefined) {
    this.initGmfLayerInANotMixedGroup_(treeCtrl, map);
  } else if (treeCtrl.depth === 1 && !gmfGroup.mixed) {
    layer = this.createGroup_(treeCtrl, map, dataLayerGroup, opt_position);
  }

  if (layer && treeCtrl.node.metadata.opacity) {
    layer.setOpacity(treeCtrl.node.metadata.opacity);
  }

  return layer;
};

SyncLayertreeMap.prototype.sync_ = function (treeCtrl) {
  var _this2 = this;

  treeCtrl.traverseDepthFirst(function (treeCtrl) {
    var gmfGroup = treeCtrl.node;

    if (treeCtrl.layer && !gmfGroup.mixed) {
      _this2.updateLayerState_(treeCtrl.layer, treeCtrl);

      return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_2__["LayertreeVisitorDecision"].DESCEND;
    }
  });
};

SyncLayertreeMap.prototype.updateLayerState_ = function (layer, treeCtrl) {
  var gmfGroup = treeCtrl.node;
  var gmfLayer = treeCtrl.node;
  var active = treeCtrl.getState() === 'on';

  if (gmfLayer.type === 'WMTS') {
    layer.setVisible(active);
  } else if (!gmfGroup.mixed && treeCtrl.depth === 1) {
    if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
      throw new Error('Wrong dataSource type');
    }

    var names = [];
    var styles = [];
    treeCtrl.traverseDepthFirst(function (treeCtrl) {
      var gmfGroup = treeCtrl.node;

      if (gmfGroup.children === undefined && treeCtrl.getState() === 'on') {
        var gmfLayerWMS = treeCtrl.node;
        names.push(gmfLayerWMS.layers);
        var style = gmfLayerWMS.style !== undefined ? gmfLayerWMS.style : '';
        styles.push(style);
        return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_2__["LayertreeVisitorDecision"].DESCEND;
      }
    });

    if (names.length === 0) {
      layer.setVisible(false);
    }

    layer.getSource().updateParams({
      'LAYERS': names.reverse().join(','),
      'STYLES': styles.reverse().join(',')
    });

    if (names.length !== 0) {
      layer.setVisible(true);
    }
  } else {
    if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
      throw new Error('Wrong dataSource type');
    }

    layer.setVisible(active);
  }
};

SyncLayertreeMap.prototype.createGroup_ = function (treeCtrl, map, dataLayerGroup, opt_position) {
  var groupNode = treeCtrl.node;
  var layer = null;
  var isFirstLevelGroup = treeCtrl.parent.isRoot;
  var printNativeAngle = true;

  if (groupNode.metadata.printNativeAngle !== undefined) {
    printNativeAngle = groupNode.metadata.printNativeAngle;
  }

  if (isFirstLevelGroup) {
    layer = this.createLayerFromGroup_(treeCtrl, !!groupNode.mixed);
    var position = opt_position || 0;
    dataLayerGroup.getLayers().insertAt(position, layer);
  } else {
    var inAMixedGroup = !this.isOneParentNotMixed_(treeCtrl);

    if (inAMixedGroup) {
      layer = this.createLayerFromGroup_(treeCtrl, true);
      var layerGroup = getLayer(treeCtrl.parent);

      if (!(layerGroup instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
        throw new Error('Wrong layerGroup type');
      }

      layerGroup.getLayers().insertAt(0, layer);
    }
  }

  if (!layer) {
    throw new Error('Missing layer');
  }

  layer.set('printNativeAngle', printNativeAngle);
  return layer;
};

SyncLayertreeMap.prototype.createLayerFromGroup_ = function (treeCtrl, mixed) {
  var _this3 = this;

  var layer;
  var groupNode = treeCtrl.node;

  if (mixed) {
    layer = this.layerHelper_.createBasicGroup();
  } else {
    if (!this.ogcServersObject_) {
      throw new Error('Missing ogcServersObject');
    }

    var timeParam = this.getTimeParam_(treeCtrl);
    var ogcServer = this.ogcServersObject_[groupNode.ogcServer || ''];

    if (!ogcServer) {
      throw new Error('Missing ogcServer');
    }

    if (!ogcServer.url) {
      throw new Error('Missing ogcServer.url');
    }

    if (!ogcServer.type) {
      throw new Error('Missing ogcServer.type');
    }

    if (!ogcServer.imageType) {
      throw new Error('Missing ogcServer.imageType');
    }

    layer = this.layerHelper_.createBasicWMSLayer(ogcServer.url, '', ogcServer.imageType, ogcServer.type, timeParam, undefined, ogcServer.credential ? 'use-credentials' : 'anonymous', undefined);
    layer.set(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_3__["DATASOURCE_ID"], groupNode.id);
    var hasActiveChildren = false;
    treeCtrl.traverseDepthFirst(function (ctrl) {
      _this3.updateLayerReferences_(ctrl.node, layer);

      if (ctrl.node.metadata.isChecked) {
        ctrl.setState('on', false);

        _this3.updateLayerState_(layer, ctrl);

        hasActiveChildren = true;
        return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_2__["LayertreeVisitorDecision"].DESCEND;
      }
    });
    layer.setVisible(hasActiveChildren);
  }

  layer.set(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_3__["LAYER_NODE_NAME_KEY"], groupNode.name);
  return layer;
};

SyncLayertreeMap.prototype.createLeafInAMixedGroup_ = function (treeCtrl, map) {
  var gmfLayer = treeCtrl.node;
  var layer;

  if (gmfLayer.type === 'WMTS') {
    layer = this.createWMTSLayer_(gmfLayer);
  } else {
    if (!this.ogcServersObject_) {
      throw new Error('Missing ogcServersObject');
    }

    var gmfLayerWMS = gmfLayer;
    var timeParam = this.getTimeParam_(treeCtrl);
    var ogcServer = this.ogcServersObject_[gmfLayerWMS.ogcServer];

    if (!ogcServer) {
      throw new Error('Missing ogcServer');
    }

    if (!ogcServer.url) {
      throw new Error('Missing ogcServer.url');
    }

    if (!ogcServer.type) {
      throw new Error('Missing ogcServer.type');
    }

    if (!ogcServer.imageType) {
      throw new Error('Missing ogcServer.imageType');
    }

    if (!gmfLayerWMS.layers) {
      throw new Error('Missing gmfLayerWMS.layers');
    }

    var opt_params = {
      STYLES: gmfLayerWMS.style
    };
    layer = this.layerHelper_.createBasicWMSLayer(ogcServer.url, gmfLayerWMS.layers, ogcServer.imageType, ogcServer.type, timeParam, opt_params, ogcServer.credential ? 'use-credentials' : 'anonymous');
  }

  layer.set(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_3__["DATASOURCE_ID"], gmfLayer.id);
  layer.set(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_3__["LAYER_NODE_NAME_KEY"], gmfLayer.name);
  layer.set(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_3__["NODE_IS_LEAF"], true);
  this.updateLayerReferences_(gmfLayer, layer);
  var checked = gmfLayer.metadata.isChecked === true;

  if (checked) {
    treeCtrl.setState('on', false);
  }

  layer.setVisible(checked);
  var layerGroup = getLayer(treeCtrl.parent);
  layerGroup.getLayers().insertAt(0, layer);
  return layer;
};

SyncLayertreeMap.prototype.initGmfLayerInANotMixedGroup_ = function (treeCtrl, map) {
  var leafNode = treeCtrl.node;
  var firstLevelGroup = this.getFirstLevelGroupCtrl_(treeCtrl);

  if (!firstLevelGroup) {
    throw new Error('Missing firstLevelGroup');
  }

  var layer = firstLevelGroup.layer;

  if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
    throw new Error('Wrong layer type');
  }

  if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
    throw new Error('Wrong dataSource type');
  }

  this.updateLayerReferences_(leafNode, layer);

  if (leafNode.metadata.isChecked) {
    treeCtrl.setState('on', false);
    this.updateLayerState_(layer, firstLevelGroup);
  } else {
    treeCtrl.parent.refreshState();
  }
};

SyncLayertreeMap.prototype.createWMTSLayer_ = function (gmfLayerWMTS) {
  var _this4 = this;

  var newLayer = new ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_7__["default"]();

  if (!gmfLayerWMTS.url) {
    throw new Error('Missing gmfLayerWMTS.url');
  }

  if (!gmfLayerWMTS.layer) {
    throw new Error('Missing gmfLayerWMTS.layer');
  }

  var minResolution = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_1__["getNodeMinResolution"])(gmfLayerWMTS);
  var maxResolution = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_1__["getNodeMaxResolution"])(gmfLayerWMTS);
  this.layerHelper_.createWMTSLayerFromCapabilitites(gmfLayerWMTS.url, gmfLayerWMTS.layer, gmfLayerWMTS.matrixSet, gmfLayerWMTS.dimensions, undefined, minResolution, maxResolution, gmfLayerWMTS.metadata.opacity).then(function (layer) {
    _this4.layerHelper_.copyProperties(layer, newLayer, ['visible']);
  });
  return newLayer;
};

SyncLayertreeMap.prototype.updateLayerReferences_ = function (node, layer) {
  var id = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_5__["getUid"])(node);
  var querySourceIds = layer.get('querySourceIds') || [];
  querySourceIds.push(id);
  layer.set('querySourceIds', querySourceIds);
  var disclaimer = node.metadata.disclaimer;

  if (disclaimer) {
    var disclaimers = layer.get('disclaimers') || {};
    var layers = 'all';

    if ('layers' in node) {
      layers = node.layers;
    }

    disclaimers[layers] = disclaimer;
    layer.set('disclaimers', disclaimers);
  }
};

SyncLayertreeMap.prototype.getTimeParam_ = function (treeCtrl) {
  var wmsTime;
  var timeParam;
  var node = treeCtrl.node;

  if (node.time) {
    wmsTime = node.time;
  } else if (node.children) {
    treeCtrl.traverseDepthFirst(function (treeCtrl) {
      var node = treeCtrl.node;

      if (node.children === undefined && node.time) {
        wmsTime = node.time;
        return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_2__["LayertreeVisitorDecision"].STOP;
      }
    });
  }

  if (wmsTime) {
    var options = this.ngeoWMSTime_.getOptions(wmsTime);
    var timeValue = options.values;
    var timeValues = options.values;
    timeParam = this.ngeoWMSTime_.formatWMSTimeParam(wmsTime, {
      start: timeValues[0] || timeValue,
      end: timeValues[1]
    });
  }

  return timeParam;
};

SyncLayertreeMap.prototype.isOneParentNotMixed_ = function (treeCtrl) {
  var tree = treeCtrl.parent;
  var isOneParentNotMix = false;

  do {
    var gmfGroup = tree.node;
    isOneParentNotMix = gmfGroup.mixed === false;
    tree = tree.parent;
  } while (tree.parent && !isOneParentNotMix);

  return isOneParentNotMix;
};

SyncLayertreeMap.prototype.getFirstLevelGroupCtrl_ = function (treeCtrl) {
  var tree = treeCtrl;

  while (!tree.parent.isRoot) {
    tree = tree.parent;
  }

  return tree;
};

function getLayer(treeCtrl) {
  var tree = treeCtrl;
  var layer = null;

  while (!tree.isRoot && layer === null) {
    if (tree.layer) {
      layer = tree.layer;
    }

    tree = tree.parent;
  }

  if (!layer) {
    throw new Error('Missing layer');
  }

  return layer;
}
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfSyncLayertreeMap', [gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_4__["default"].name]);
myModule.service('gmfSyncLayertreeMap', SyncLayertreeMap);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/layertree/TreeManager.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/layertree/TreeManager.js ***!
  \***************************************************/
/*! exports provided: LayertreeTreeManager, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayertreeTreeManager", function() { return LayertreeTreeManager; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/index.js */ "./contribs/gmf/src/index.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var ngeo_message_Notification_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/message/Notification.js */ "./src/message/Notification.js");
/* harmony import */ var ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/statemanager/Service.js */ "./src/statemanager/Service.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
LayertreeTreeManager.$inject = ["$timeout", "$injector", "gettextCatalog", "ngeoLayerHelper", "ngeoNotification", "gmfThemes", "ngeoStateManager"];








function LayertreeTreeManager($timeout, $injector, gettextCatalog, ngeoLayerHelper, ngeoNotification, gmfThemes, ngeoStateManager) {
  this.$timeout_ = $timeout;
  this.$injector_ = $injector;
  this.gettextCatalog_ = gettextCatalog;
  this.layerHelper_ = ngeoLayerHelper;
  this.ngeoNotification_ = ngeoNotification;
  this.gmfThemes_ = gmfThemes;
  this.root = {
    children: []
  };
  this.rootCtrl = null;
  this.numberOfGroupsToAddInThisDigestLoop = 0;
  this.groupsToAddInThisDigestLoop_ = [];
  this.promiseForGroupsToAddInThisDigestLoop_ = null;
  this.ngeoStateManager_ = ngeoStateManager;
  this.initialLevelFirstGroups_ = undefined;
  this.ogcServers_ = null;
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_7__["listen"])(this.gmfThemes_, 'change', this.handleThemesChange_, this);
}

LayertreeTreeManager.prototype.handleThemesChange_ = function () {
  var _this = this;

  this.gmfThemes_.getOgcServersObject().then(function (ogcServers) {
    _this.ogcServers_ = ogcServers;
  });

  if (this.rootCtrl && this.rootCtrl.children) {
    this.gmfThemes_.getThemesObject().then(function (themes) {
      _this.refreshFirstLevelGroups_(themes);
    });
  }
};

LayertreeTreeManager.prototype.setFirstLevelGroups = function (firstLevelGroups) {
  this.parseTreeNodes(this.root);
  this.root.children.length = 0;
  this.ngeoStateManager_.deleteParam(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].TREE_GROUPS);
  return this.addFirstLevelGroups(firstLevelGroups);
};

LayertreeTreeManager.prototype.addFirstLevelGroups = function (firstLevelGroups, opt_add, opt_silent) {
  var _this2 = this;

  var groupNotAdded = [];
  firstLevelGroups.slice().reverse().forEach(function (group) {
    if (!_this2.addFirstLevelGroup_(group)) {
      groupNotAdded.push(group);
    }
  });

  if (groupNotAdded.length > 0 && !opt_silent) {
    this.notifyCantAddGroups_(groupNotAdded);
  }

  return groupNotAdded.length === 0;
};

LayertreeTreeManager.prototype.setInitialFirstLevelGroups = function (firstGroups) {
  this.initialLevelFirstGroups_ = firstGroups;
};

LayertreeTreeManager.prototype.parseTreeNodes = function (node) {
  var _this3 = this;

  var group = node;

  if (group.children) {
    group.children.forEach(function (child) {
      _this3.parseTreeNodes(child);
    });
  }

  if (group.popupId) {
    this.removePopup_(group);
  }
};

LayertreeTreeManager.prototype.removePopup_ = function (node) {
  var popupId = node.popupId;
  $("#" + popupId).remove();
  delete node.popupId;
};

LayertreeTreeManager.prototype.reorderChild_ = function (array, old_index, new_index) {
  array.splice(new_index, 0, array.splice(old_index, 1)[0]);
};

LayertreeTreeManager.prototype.updateTreeGroupsState_ = function (groups) {
  var treeGroupsParam = {};
  treeGroupsParam[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].TREE_GROUPS] = groups.map(function (node) {
    return node.name;
  }).join(',');
  this.ngeoStateManager_.updateState(treeGroupsParam);

  if (this.$injector_.has('gmfPermalink')) {
    this.$injector_.get('gmfPermalink').cleanParams(groups);
  }
};

LayertreeTreeManager.prototype.addFirstLevelGroup_ = function (group) {
  var _this4 = this;

  var alreadyAdded = false;
  var groupID = group.id;
  this.root.children.some(function (rootChild) {
    if (groupID === rootChild.id) {
      alreadyAdded = true;
      return true;
    }

    return false;
  }, this);
  this.groupsToAddInThisDigestLoop_.some(function (grp) {
    if (groupID === grp.id) {
      alreadyAdded = true;
      return true;
    }

    return false;
  }, this);

  if (alreadyAdded) {
    return false;
  }

  this.groupsToAddInThisDigestLoop_.push(group);
  this.numberOfGroupsToAddInThisDigestLoop = 0;

  if (this.promiseForGroupsToAddInThisDigestLoop_ !== null) {
    this.$timeout_.cancel(this.promiseForGroupsToAddInThisDigestLoop_);
  }

  this.promiseForGroupsToAddInThisDigestLoop_ = this.$timeout_(function () {
    _this4.numberOfGroupsToAddInThisDigestLoop = _this4.groupsToAddInThisDigestLoop_.length;

    _this4.groupsToAddInThisDigestLoop_.forEach(function (grp) {
      _this4.root.children.unshift(grp);

      _this4.root.children.forEach(function (group, old_index) {
        if (_this4.initialLevelFirstGroups_ !== undefined) {
          var new_index = _this4.initialLevelFirstGroups_.findIndex(function (firstLevelGroup) {
            return firstLevelGroup.id === group.id;
          });

          if (new_index !== -1 && new_index !== old_index) {
            _this4.reorderChild_(_this4.root.children, old_index, new_index);
          }
        }
      });
    });

    _this4.initialLevelFirstGroups_ = undefined;

    _this4.updateTreeGroupsState_(_this4.root.children);

    _this4.groupsToAddInThisDigestLoop_.length = 0;
    _this4.promiseForGroupsToAddInThisDigestLoop_ = null;
  });
  return true;
};

LayertreeTreeManager.prototype.addGroupByName = function (groupName, opt_add) {
  var _this5 = this;

  this.gmfThemes_.getThemesObject().then(function (themes) {
    var group = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["findGroupByName"])(themes, groupName);

    if (group) {
      _this5.addFirstLevelGroups([group], opt_add, false);
    }
  });
};

LayertreeTreeManager.prototype.addGroupByLayerName = function (layerName, opt_add, opt_silent) {
  var _this6 = this;

  this.gmfThemes_.getThemesObject().then(function (themes) {
    var group = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["findGroupByLayerNodeName"])(themes, layerName);

    if (group) {
      var groupAdded = _this6.addFirstLevelGroups([group], opt_add, opt_silent);

      _this6.$timeout_(function () {
        var treeCtrl = _this6.getTreeCtrlByNodeId(group.id);

        if (!treeCtrl) {
          console.warn('Tree controller not found, unable to add the group');
          return;
        }

        var treeCtrlToActive = null;
        treeCtrl.traverseDepthFirst(function (treeCtrl) {
          if (treeCtrl.node.name === layerName) {
            treeCtrlToActive = treeCtrl;
            return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_3__["LayertreeVisitorDecision"].STOP;
          }
        });

        if (groupAdded) {
          treeCtrl.setState('off');
        }

        if (treeCtrlToActive instanceof ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_3__["LayertreeController"]) {
          treeCtrlToActive.setState('on');
        }
      });
    }
  });
};

LayertreeTreeManager.prototype.removeGroup = function (group) {
  var children = this.root.children;
  var index = 0,
      found = false;
  children.some(function (child) {
    if (child.name === group.name) {
      return found = true;
    }

    index++;
    return false;
  });

  if (found) {
    children.splice(index, 1);
    this.updateTreeGroupsState_(children);
  }
};

LayertreeTreeManager.prototype.removeAll = function () {
  while (this.root.children.length) {
    this.removeGroup(this.root.children[0]);
  }
};

LayertreeTreeManager.prototype.cloneGroupNode_ = function (group, names) {
  var clone = Object.assign({}, group);
  this.toggleNodeCheck_(clone, names);
  return clone;
};

LayertreeTreeManager.prototype.toggleNodeCheck_ = function (node, names) {
  var _this7 = this;

  var groupNode = node;

  if (!groupNode.children) {
    return;
  }

  groupNode.children.forEach(function (childNode) {
    var childGroupNode = childNode;

    if (childGroupNode.children) {
      _this7.toggleNodeCheck_(childGroupNode, names);
    } else if (childNode.metadata) {
      childNode.metadata.isChecked = names.includes(childNode.name);
    }
  });
};

LayertreeTreeManager.prototype.notifyCantAddGroups_ = function (groups) {
  var names = [];
  var gettextCatalog = this.gettextCatalog_;
  groups.forEach(function (group) {
    names.push(gettextCatalog.getString(group.name));
  });
  var msg = names.length < 2 ? gettextCatalog.getString('group is already loaded.') : gettextCatalog.getString('groups are already loaded.');
  this.ngeoNotification_.notify({
    msg: names.join(', ') + " " + msg,
    type: ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_4__["MessageType"].INFORMATION
  });
};

LayertreeTreeManager.prototype.getTreeCtrlByNodeId = function (id) {
  var correspondingTreeCtrl = null;

  if (this.rootCtrl && this.rootCtrl.traverseDepthFirst) {
    this.rootCtrl.traverseDepthFirst(function (treeCtrl) {
      if (treeCtrl.node.id === id) {
        correspondingTreeCtrl = treeCtrl;
        return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_3__["LayertreeVisitorDecision"].STOP;
      }
    });
  }

  return correspondingTreeCtrl;
};

LayertreeTreeManager.prototype.getOgcServer = function (treeCtrl) {
  if (!this.ogcServers_) {
    throw new Error('Missing ogcServers');
  }

  var gmfParentGroup = treeCtrl.parent.node;

  if (gmfParentGroup.mixed) {
    var gmfLayerWMS = treeCtrl.node;

    if (!gmfLayerWMS.ogcServer) {
      throw new Error('Missing gmfLayerWMS.ogcServer');
    }

    return this.ogcServers_[gmfLayerWMS.ogcServer];
  } else {
    var firstLevelGroupCtrl = treeCtrl;

    while (!firstLevelGroupCtrl.parent.isRoot) {
      firstLevelGroupCtrl = firstLevelGroupCtrl.parent;
    }

    var gmfGroup = firstLevelGroupCtrl.node;

    if (!gmfGroup.ogcServer) {
      throw new Error('Missing gmfGroup.ogcServer');
    }

    return this.ogcServers_[gmfGroup.ogcServer];
  }
};

LayertreeTreeManager.prototype.refreshFirstLevelGroups_ = function (themes) {
  var _this8 = this;

  if (!this.rootCtrl) {
    throw new Error('Missing rootCtrl');
  }

  var firstLevelGroupsFullState = {};
  this.rootCtrl.children.map(function (treeCtrl) {
    var name = treeCtrl.node.name;
    firstLevelGroupsFullState[name] = _this8.getFirstLevelGroupFullState_(treeCtrl);
  });
  var nodesToRestore = [];
  this.root.children.map(function (node) {
    var name = node.name;
    var nodeToRestore = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["findGroupByName"])(themes, name);

    if (nodeToRestore) {
      var fullState = firstLevelGroupsFullState[name];

      if (fullState) {
        _this8.setNodeMetadataFromFullState_(nodeToRestore, fullState);
      }

      nodesToRestore.push(nodeToRestore);
    }
  });
  this.setFirstLevelGroups(nodesToRestore);
  this.$timeout_(function () {
    _this8.updateTreeGroupsState_(_this8.root.children);
  });
};

LayertreeTreeManager.prototype.getFirstLevelGroupFullState_ = function (treeCtrl) {
  var _this9 = this;

  var children = {};
  treeCtrl.children.map(function (child) {
    children[child.node.name] = _this9.getFirstLevelGroupFullState_(child);
  });
  var isChecked, isExpanded, isLegendExpanded;

  if (treeCtrl.children.length > 0) {
    var nodeElement = $("#gmf-layertree-layer-group-" + treeCtrl.uid);

    if (nodeElement) {
      isExpanded = nodeElement.hasClass('show');
    }
  } else {
    isChecked = treeCtrl.getState();

    if (isChecked === 'on') {
      isChecked = true;
    } else if (isChecked === 'off') {
      isChecked = false;
    } else {
      isChecked = undefined;
    }

    var legendElement = $("#gmf-layertree-node-" + treeCtrl.uid + "-legend");

    if (legendElement) {
      isLegendExpanded = legendElement.is(':visible');
    }
  }

  return {
    children: children,
    isChecked: isChecked,
    isExpanded: isExpanded,
    isLegendExpanded: isLegendExpanded
  };
};

LayertreeTreeManager.prototype.setNodeMetadataFromFullState_ = function (node, fullState) {
  var _this10 = this;

  if (!fullState) {
    return node;
  }

  var groupNode = node;

  if (groupNode.children) {
    groupNode.children.map(function (child) {
      _this10.setNodeMetadataFromFullState_(child, fullState.children[child.name]);
    });
  }

  var metadata = node.metadata;
  metadata.isChecked = fullState.isChecked;
  metadata.isExpanded = fullState.isExpanded;
  metadata.isLegendExpanded = fullState.isLegendExpanded;
  return node;
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfTreeManager', [gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_message_Notification_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]);
myModule.service('gmfTreeManager', LayertreeTreeManager);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/layertree/common.scss":
/*!************************************************!*\
  !*** ./contribs/gmf/src/layertree/common.scss ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/layertree/component.html":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/layertree/component.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div\n   class="gmf-layertree-root-tools"\n   ng-if="layertreeCtrl.isRoot">\n  <a\n     href\n     ng-if="gmfLayertreeCtrl.nodesCount() > 0 || !gmfLayertreeCtrl.gmfExternalDataSourcesManager.isEmpty()"\n     ng-click="gmfLayertreeCtrl.removeAllNodes()">\n    <span class="fa fa-trash"></span> {{\'Clear all\' | translate}}\n  </a>\n</div>\n<div\n  ng-if="::!layertreeCtrl.isRoot"\n  id="gmf-layertree-node-{{::layertreeCtrl.uid}}"\n  ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]">\n\n  <div\n    class="ngeo-sortable-handle"\n    ng-show="layertreeCtrl.depth === 1 && layertreeCtrl.parent.children.length > 1">\n    <i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i>\n  </div>\n\n  <a\n    ng-if="::layertreeCtrl.node.children"\n    data-toggle="collapse"\n    href="#gmf-layertree-layer-group-{{::layertreeCtrl.uid}}"\n    aria-expanded="{{::layertreeCtrl.node.metadata.isExpanded}}"\n    class="fa gmf-layertree-expand-node fa-fw">\n  </a>\n\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="::!layertreeCtrl.node.children && gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)"\n    class="gmf-layertree-layer-icon"\n  >\n    <div><!--This div is required for flex issues with IE11-->\n      <img\n        ng-if="::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl))"\n        ng-src="{{::legendIconUrl}}">\n      </img>\n    </div>\n  </a>\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="::!layertreeCtrl.node.children && !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)"\n    class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"\n  >' +
((__t = (__webpack_require__(/*! gmf/icons/dot.svg?viewbox&height=1em */ "./contribs/gmf/src/icons/dot.svg?viewbox&height=1em"))) == null ? '' : __t) +
'</a>\n\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="layertreeCtrl.node.children && layertreeCtrl.layer.loading"\n    class="fa fa-fw custom-spinner-generic fa-spin"\n  >' +
((__t = (__webpack_require__(/*! gmf/icons/spinner.svg?viewbox&height=1rem */ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=1rem"))) == null ? '' : __t) +
'</a>\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="layertreeCtrl.node.children && !layertreeCtrl.layer.loading"\n    class="gmf-layertree-state gmf-not-intermediate"\n  >' +
((__t = (__webpack_require__(/*! gmf/icons/layers.svg?viewbox&height=1em */ "./contribs/gmf/src/icons/layers.svg?viewbox&height=1em"))) == null ? '' : __t) +
'</a>\n  <a\n    href\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    ng-if="layertreeCtrl.node.children && !layertreeCtrl.layer.loading"\n    class="gmf-layertree-state gmf-intermediate"\n  >' +
((__t = (__webpack_require__(/*! gmf/icons/stack-indeterminate.svg?viewbox&height=1em */ "./contribs/gmf/src/icons/stack-indeterminate.svg?viewbox&height=1em"))) == null ? '' : __t) +
'</a>\n\n  <a\n    href\n    data-sentry="id:{{layertreeCtrl.node.id}}"\n    ng-click="::gmfLayertreeCtrl.toggleActive(layertreeCtrl)"\n    class="gmf-layertree-name">\n    {{layertreeCtrl.node.name | translate}}\n    <i ng-if="gmfLayertreeCtrl.gmfLayerBeingSwipe.layer && gmfLayertreeCtrl.gmfLayerBeingSwipe.layer === layertreeCtrl.layer">\n      ' +
((__t = (__webpack_require__(/*! ngeo/icons/swipe.svg?viewbox&width=1em */ "./src/icons/swipe.svg?viewbox&width=1em"))) == null ? '' : __t) +
'\n    </i>\n\n    <i\n      class="gmf-layertree-zoom"\n      data-toggle="tooltip"\n      data-placement="top"\n      data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}"\n      ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();"\n      ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"\n    >' +
((__t = (__webpack_require__(/*! gmf/icons/search-go.svg?viewbox&height=1em */ "./contribs/gmf/src/icons/search-go.svg?viewbox&height=1em"))) == null ? '' : __t) +
'</i>\n\n    <span\n      ngeo-popover\n      ngeo-popover-dismiss=".content"\n      ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'">\n\n      <span\n        ngeo-popover-anchor\n        class="far fa-clock"\n        ng-click="$event.preventDefault(); $event.stopPropagation()"\n        data-toggle="tooltip"\n        data-placement="top"\n        title="{{\'Click to enter a period.\'|translate}}">\n      </span>\n\n      <div ngeo-popover-content>\n        <ngeo-date-picker\n          ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'"\n          time="layertreeCtrl.node.time"\n          on-date-selected="gmfLayertreeCtrl.updateTimeData(layertreeCtrl, time)">\n        </ngeo-date-picker>\n\n        <gmf-time-slider\n          ng-if="::layertreeCtrl.node.time.widget === \'slider\'"\n          gmf-time-slider-time="layertreeCtrl.node.time"\n          gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateTimeData(layertreeCtrl, time)">\n        </gmf-time-slider>\n      </div>\n    </span>\n\n    <span\n      class="fa fa-edit"\n      data-toggle="tooltip"\n      data-placement="right"\n      title="{{\'Currently editing this layer\'|translate}}"\n      ng-if="layertreeCtrl.properties.editing">\n    </span>\n\n    <span\n      class="fas fa-magnet"\n      ng-if="layertreeCtrl.node.metadata.snappingConfig"\n      ng-class="gmfLayertreeCtrl.isSnappingActivated(layertreeCtrl) ? \'on\' : \'off\'"\n      ng-click="gmfLayertreeCtrl.toggleSnapping(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();"\n      data-toggle="tooltip"\n      data-placement="top"\n      data-title="{{\'Click to toggle snapping.\'|translate}}"\n    >\n    </span>\n  </a>\n\n  <span class="gmf-layertree-right-buttons">\n    <a\n      href=""\n      ng-if="::layertreeCtrl.depth == 1"\n      ng-click="gmfLayertreeCtrl.removeNode(layertreeCtrl.node)">\n      <span class="fa fa-trash"></span>\n    </a>\n\n    <a\n      class="gmf-layertree-node-menu-btn"\n      href=""\n      ng-if="::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)"\n      ng-click="::gmfLayertreeCtrl.toggleNodeMenu(\'#gmf-layertree-node-menu-\' + layertreeCtrl.uid)">\n      <span class="fa fa-cog"></span>\n    </a>\n\n    <span\n      ngeo-popover\n      ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend) || layertreeCtrl.getDataSource().filtrable" ngeo-popover-dismiss=".content"\n      ng-click="::gmfLayertreeCtrl.tagPopup(layertreeCtrl.node)">\n\n      <span\n        ngeo-popover-anchor\n        class="extra-actions fa fa-cog"\n        id="popup-id-{{layertreeCtrl.node.ol_uid}}">\n      </span>\n\n      <div ngeo-popover-content>\n        <ul>\n          <li ng-if="::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)">\n            <i class="fa fa-tint fa-fw"></i>\n            <span>{{\'Opacity\'|translate}}</span>\n            <input\n              class="input-action"\n              type="range"\n              min="0"\n              max="1"\n              step="0.01"\n              ng-model="layertreeCtrl.layer.opacity" />\n          </li>\n          <li ng-if="::gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend">\n            <i class="fa fa-th-list fa-fw"></i>\n            <a\n              ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()"\n              href="">\n              {{\'Show/hide legend\'|translate}}\n            </a>\n          </li>\n          <li ng-if="::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)">\n            <i>' +
((__t = (__webpack_require__(/*! ngeo/icons/swipe.svg?viewbox&height=1em */ "./src/icons/swipe.svg?viewbox&height=1em"))) == null ? '' : __t) +
'</i>\n            <a\n              ng-click="::gmfLayertreeCtrl.toggleSwipeLayer(layertreeCtrl); popoverCtrl.dismissPopover()"\n              href=""\n              ng-model="layertreeCtrl.layer"\n              >\n              {{\'Swipe with this layer\'| translate}}\n            </a>\n          </li>\n          <li ng-if="gmfLayertreeCtrl.isFiltrable(layertreeCtrl)">\n            <i class="fa fa-filter fa-fw"></i>\n            <a\n              ng-click="gmfLayertreeCtrl.toggleFiltrableDataSource(layertreeCtrl.getDataSource())"\n              href="">\n              {{\'Filter\'|translate}}\n            </a>\n          </li>\n          <li class="more-options-info" ng-if="::gmfLayertreeCtrl.getFirstParentWithLayerFunctions(layertreeCtrl) !== null">\n            <span>{{\'More options at the group level\'|translate}}</span>\n          </li>\n        </ul>\n      </div>\n    </span>\n\n    <span\n      class="gmf-layertree-metadata"\n      ng-if="::layertreeCtrl.node.metadata.metadataUrl">\n\n      <span ng-if="::gmfLayertreeCtrl.options.openLinksInNewWindow === true">\n        <a\n          title="{{\'More information\'|translate}}"\n          href="{{::layertreeCtrl.node.metadata.metadataUrl}}"\n          target="blank_">\n        </a>\n      </span>\n\n      <span ng-if="::gmfLayertreeCtrl.options.openLinksInNewWindow !== true">\n        <a\n          title="{{\'More information\'|translate}}"\n          href="" ng-click="gmfLayertreeCtrl.displayMetadata(layertreeCtrl)">\n        </a>\n      </span>\n    </span>\n  </span>\n</div>\n\n<div\n  class="gmf-layertree-node-menu d-none"\n  id="gmf-layertree-node-menu-{{::layertreeCtrl.uid}}"\n  ng-if="::gmfLayertreeCtrl.supportsCustomization(layertreeCtrl)">\n\n  <div class="more-options-info" ng-if="::gmfLayertreeCtrl.getFirstParentWithLayerFunctions(layertreeCtrl) !== null">\n     <span>{{\'More options at the group level\'|translate}}</span>\n  </div>\n\n  <div ng-if="::gmfLayertreeCtrl.supportsOpacityChange(layertreeCtrl)">\n    <i class="fa fa-tint fa-fw"></i>\n    <span>{{\'Opacity\'|translate}}</span>\n    <input\n        class="input-action"\n        type="range"\n        min="0"\n        max="1"\n        step="0.01"\n        ng-model="layertreeCtrl.layer.opacity" />\n  </div>\n\n  <a\n    class="gmf-layertree-node-menu-togglelegend"\n    ng-if="::gmfLayertreeCtrl.supportsLegend(layertreeCtrl)"\n    ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"\n    href="">\n    <span\n        class="fa fa-th-list">\n    </span>\n    {{\'Show/hide legend\'|translate}}\n  </a>\n</div>\n<div\n  ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendsObject(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id="gmf-layertree-node-{{::layertreeCtrl.uid}}-legend"\n  class="gmf-layertree-legend"\n  ng-class="[gmfLayertreeCtrl.getNodeState(layertreeCtrl), layertreeCtrl.node.metadata.isLegendExpanded ? \'show\' : \'\']">\n\n  <a\n    title="{{\'Hide legend\'|translate}}"\n    ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')"\n    href="">\n    {{\'Hide legend\'|translate}}\n  </a>\n  <div ng-if="gmfLayertreeCtrl.isNodeLegendVisible(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')">\n    <div ng-repeat="(title, url) in gmfLayertreeCtrl.getLegendsObject(layertreeCtrl)">\n      <p ng-if="gmfLayertreeCtrl.getNumberOfLegendsObject(layertreeCtrl) > 1">{{title|translate}}</p>\n      <img ng-src="{{url}}"></img>\n    </div>\n  </div>\n</div>\n\n<ul\n   class="gmf-layertree-root-external-datasources"\n   ng-if="layertreeCtrl.isRoot && (gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups.length || gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length)">\n  <gmf-datasourcegrouptree\n    class="gmf-layertree-node gmf-layertree-depth-1"\n    ng-repeat="wmtsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmtsGroups"\n    group="wmtsGroup"\n  >\n  </gmf-datasourcegrouptree>\n  <gmf-datasourcegrouptree\n    class="gmf-layertree-node gmf-layertree-depth-1"\n    ng-repeat="wmsGroup in gmfLayertreeCtrl.gmfExternalDataSourcesManager.wmsGroups"\n    group="wmsGroup"\n    get-scale="gmfLayertreeCtrl.getScale_()"\n  >\n  </gmf-datasourcegrouptree>\n  <gmf-datasourcegrouptree\n    class="gmf-layertree-node gmf-layertree-depth-1"\n    ng-if="gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup.dataSources.length"\n    group="gmfLayertreeCtrl.gmfExternalDataSourcesManager.fileGroup"\n  >\n  </gmf-datasourcegrouptree>\n</ul>\n\n<ul\n  id="gmf-layertree-layer-group-{{::layertreeCtrl.uid}}"\n  ng-if="::layertreeCtrl.node.children"\n  ng-class="{collapse: !(layertreeCtrl.isRoot || gmfLayertreeCtrl.options.isExpanded), show: layertreeCtrl.node.metadata.isExpanded}"\n  ngeo-sortable="::layertreeCtrl.isRoot && layertreeCtrl.node.children"\n  ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', placeholderClassName : \'gmf-layertree-curr-drag-item\'}"\n  ngeo-sortable-callback="::gmfLayertreeCtrl.afterReorder"\n  ngeo-sortable-callback-ctx="::gmfLayertreeCtrl">\n\n  <li\n    class="gmf-layertree-node"\n    ng-repeat="node in layertreeCtrl.node.children"\n    ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth"\n    ngeo-layertree="node"\n    ngeo-layertree-notroot\n    ngeo-layertree-map="layertreeCtrl.map"\n    ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr"\n    ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr">\n  </li>\n</ul>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/layertree/component.js":
/*!*************************************************!*\
  !*** ./contribs/gmf/src/layertree/component.js ***!
  \*************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/index.js */ "./contribs/gmf/src/index.js");
/* harmony import */ var gmf_datasource_DataSourceBeingFiltered_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/datasource/DataSourceBeingFiltered.js */ "./contribs/gmf/src/datasource/DataSourceBeingFiltered.js");
/* harmony import */ var gmf_datasource_LayerBeingSwipe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/datasource/LayerBeingSwipe.js */ "./contribs/gmf/src/datasource/LayerBeingSwipe.js");
/* harmony import */ var gmf_datasource_ExternalDataSourcesManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/datasource/ExternalDataSourcesManager.js */ "./contribs/gmf/src/datasource/ExternalDataSourcesManager.js");
/* harmony import */ var gmf_permalink_Permalink_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/permalink/Permalink.js */ "./contribs/gmf/src/permalink/Permalink.js");
/* harmony import */ var gmf_layertree_datasourceGroupTreeComponent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! gmf/layertree/datasourceGroupTreeComponent.js */ "./contribs/gmf/src/layertree/datasourceGroupTreeComponent.js");
/* harmony import */ var gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! gmf/layertree/SyncLayertreeMap.js */ "./contribs/gmf/src/layertree/SyncLayertreeMap.js");
/* harmony import */ var gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! gmf/layertree/TreeManager.js */ "./contribs/gmf/src/layertree/TreeManager.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ngeo_layertree_component_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/layertree/component.js */ "./src/layertree/component.js");
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_misc_syncArrays_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngeo/misc/syncArrays.js */ "./src/misc/syncArrays.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ol/layer/Base.js */ "./node_modules/ol/layer/Base.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var bootstrap_js_src_collapse_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! bootstrap/js/src/collapse.js */ "./node_modules/bootstrap/js/src/collapse.js");
Controller.$inject = ["$element", "$scope", "ngeoLayerHelper", "gmfLayerBeingSwipe", "gmfDataSourceBeingFiltered", "gmfExternalDataSourcesManager", "gmfPermalink", "gmfTreeManager", "gmfSyncLayertreeMap", "ngeoWMSTime", "gmfThemes", "$timeout", "gmfLayerTreeOptions"];

























var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfLayertreeComponent', [gmf_datasource_DataSourceBeingFiltered_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_datasource_ExternalDataSourcesManager_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_permalink_Permalink_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, gmf_layertree_datasourceGroupTreeComponent_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, ngeo_layertree_component_js__WEBPACK_IMPORTED_MODULE_11__["default"].name, ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_12__["default"].name, ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_13__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_15__["default"].name, gmf_datasource_LayerBeingSwipe_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
myModule.value('ngeoLayertreeTemplateUrl', function (element, attrs) {
  return 'gmf/layertree';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/layertree', __webpack_require__(/*! ./component.html */ "./contribs/gmf/src/layertree/component.html"));
}]);
myModule.value('gmfLayertreeTemplate', function ($element, $attrs) {
  var subTemplateUrl = 'gmf/layertree';
  return '<div ngeo-layertree="gmfLayertreeCtrl.root" ' + 'ngeo-layertree-map="gmfLayertreeCtrl.map" ' + 'ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(treeCtrl)" ' + 'ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ' + ("ngeo-layertree-templateurl=\"" + subTemplateUrl + "\">") + '</div>';
});
gmfLayertreeTemplate.$inject = ["$element", "$attrs", "gmfLayertreeTemplate"];

function gmfLayertreeTemplate($element, $attrs, gmfLayertreeTemplate) {
  return gmfLayertreeTemplate($element, $attrs);
}

var layertreeComponent = {
  controller: 'GmfLayertreeController as gmfLayertreeCtrl',
  bindings: {
    'map': '=gmfLayertreeMap',
    'dimensions': '=?gmfLayertreeDimensions'
  },
  template: gmfLayertreeTemplate
};
myModule.component('gmfLayertree', layertreeComponent);
function Controller($element, $scope, ngeoLayerHelper, gmfLayerBeingSwipe, gmfDataSourceBeingFiltered, gmfExternalDataSourcesManager, gmfPermalink, gmfTreeManager, gmfSyncLayertreeMap, ngeoWMSTime, gmfThemes, $timeout, gmfLayerTreeOptions) {
  var _this = this;

  this.options = gmfLayerTreeOptions;
  this.map;
  this.dimensions = null;
  this.scope_ = $scope;
  this.layerHelper_ = ngeoLayerHelper;
  this.gmfLayerBeingSwipe = gmfLayerBeingSwipe;
  this.gmfDataSourceBeingFiltered = gmfDataSourceBeingFiltered;
  this.gmfExternalDataSourcesManager = gmfExternalDataSourcesManager;
  this.gmfPermalink_ = gmfPermalink;
  this.gmfTreeManager_ = gmfTreeManager;
  var root = gmfTreeManager.root;

  if (!root) {
    throw new Error('Missing root');
  }

  this.root = root;
  this.gmfSyncLayertreeMap_ = gmfSyncLayertreeMap;
  this.ngeoWMSTime_ = ngeoWMSTime;
  this.groupNodeStates_ = {};
  this.dataLayerGroup_ = null;
  this.layers = [];
  this.gmfThemes_ = gmfThemes;
  this.$timeout_ = $timeout;
  $element.on('shown.bs.collapse', function () {
    _this.scope_.$apply();
  });
}

Controller.prototype.$onInit = function () {
  var _this2 = this;

  this.dataLayerGroup_ = this.layerHelper_.getGroupFromMap(this.map, gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["DATALAYERGROUP_NAME"]);
  Object(ngeo_misc_syncArrays_js__WEBPACK_IMPORTED_MODULE_14__["default"])(this.dataLayerGroup_.getLayers().getArray(), this.layers, true, this.scope_, function () {
    return true;
  });
  this.scope_.$watchCollection(function () {
    return _this2.layers;
  }, function () {
    _this2.map.render();

    if (_this2.gmfLayerBeingSwipe.layer && !_this2.layers.includes(_this2.gmfLayerBeingSwipe.layer)) {
      _this2.gmfLayerBeingSwipe.layer = null;
    }
  });
  this.scope_.$watchCollection(function () {
    if (_this2.gmfTreeManager_.rootCtrl) {
      return _this2.dimensions;
    }
  }, function (dimensions) {
    if (dimensions) {
      if (!_this2.gmfTreeManager_.rootCtrl) {
        throw new Error('Missing gmfTreeManager_.rootCtrl');
      }

      _this2.updateDimensions_(_this2.gmfTreeManager_.rootCtrl);
    }
  });
};

Controller.prototype.updateDimensions_ = function (treeCtrl) {
  var _this3 = this;

  treeCtrl.traverseDepthFirst(function (ctrl) {
    if (ctrl.node.dimensions) {
      var layer = ctrl.layer;

      if (!(layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_17__["default"])) {
        throw new Error('Wrong feature type');
      }

      _this3.updateLayerDimensions_(layer, ctrl.node);

      return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_12__["LayertreeVisitorDecision"].DESCEND;
    }
  });
};

Controller.prototype.updateLayerDimensions_ = function (layer, node) {
  var _this4 = this;

  if (this.dimensions && node.dimensions) {
    var dimensions = {};

    for (var key in node.dimensions) {
      if (node.dimensions[key] === null) {
        var value = this.dimensions[key];

        if (value !== undefined) {
          dimensions[key] = value;
        }
      } else {
        dimensions[key] = node.dimensions[key];
      }
    }

    if (!Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_18__["isEmpty"])(dimensions)) {
      var source = layer.getSource();

      if (source instanceof ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_21__["default"]) {
        source.updateDimensions(dimensions);
      } else if (source instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_20__["default"] || source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_19__["default"]) {
        source.updateParams(dimensions);
      } else {
        layer.once('change:source', function () {
          if (!(layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_17__["default"])) {
            throw new Error('Wrong feature type');
          }

          _this4.updateLayerDimensions_(layer, node);
        });
      }
    }
  }
};

Controller.prototype.getLayer = function (treeCtrl) {
  if (!this.dataLayerGroup_) {
    throw new Error('Missing dataLayerGroup');
  }

  var opt_position;

  if (treeCtrl.parent.isRoot) {
    this.gmfTreeManager_.rootCtrl = treeCtrl.parent;
    opt_position = this.gmfTreeManager_.root.children.length - this.gmfTreeManager_.numberOfGroupsToAddInThisDigestLoop || 0;
  }

  var layer = this.gmfSyncLayertreeMap_.createLayer(treeCtrl, this.map, this.dataLayerGroup_, opt_position);

  if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_17__["default"]) {
    var node = treeCtrl.node;
    this.updateLayerDimensions_(layer, node);
  }

  return layer;
};

Controller.prototype.listeners = function (scope, treeCtrl) {
  if (!this.dataLayerGroup_) {
    throw new Error('Missing dataLayerGroup');
  }

  var dataLayerGroup = this.dataLayerGroup_;
  scope.$on('$destroy', function () {
    if (treeCtrl.layer) {
      dataLayerGroup.getLayers().remove(treeCtrl.layer);
    }
  });
};

Controller.prototype.toggleActive = function (treeCtrl) {
  var state = treeCtrl.getState();

  if (treeCtrl.node.metadata && treeCtrl.node.metadata.exclusiveGroup) {
    treeCtrl.setState(state === 'off' ? 'on' : 'off');
  } else {
    treeCtrl.setState(state === 'on' ? 'off' : 'on');
  }
};

Controller.prototype.getNodeState = function (treeCtrl) {
  return treeCtrl.getState();
};

Controller.prototype.updateTimeData = function (layertreeCtrl, time) {
  this.updateWMSTimeLayerState(layertreeCtrl, time);
  this.gmfPermalink_.refreshLayerTime(layertreeCtrl, time);
};

Controller.prototype.updateWMSTimeLayerState = function (layertreeCtrl, time) {
  if (!time) {
    return;
  }

  var dataSource = layertreeCtrl.getDataSource();

  if (dataSource) {
    if (!(dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["default"])) {
      throw new Error('Wrong dataSource type');
    }

    dataSource.timeRangeValue = time;
  } else if (layertreeCtrl.children) {
    for (var i = 0, ii = layertreeCtrl.children.length; i < ii; i++) {
      this.updateWMSTimeLayerState(layertreeCtrl.children[i], time);
    }
  }
};

Controller.prototype.getLegendIconURL = function (treeCtrl) {
  var iconUrl = treeCtrl.node.metadata.iconUrl;

  if (iconUrl !== undefined) {
    return iconUrl;
  }

  var gmfGroup = treeCtrl.node;

  if (gmfGroup.children !== undefined) {
    return undefined;
  }

  var gmfLayer = treeCtrl.node;

  if (gmfLayer.type !== 'WMS') {
    return undefined;
  }

  var gmfLayerWMS = gmfLayer;
  var legendRule = gmfLayerWMS.metadata.legendRule;

  if (legendRule === undefined) {
    return undefined;
  }

  var layerName = gmfLayerWMS.layers.split(',')[0];
  var gmfOgcServer = this.gmfTreeManager_.getOgcServer(treeCtrl);
  return this.layerHelper_.getWMSLegendURL(gmfOgcServer.url, layerName, undefined, legendRule, 20, 20);
};

Controller.prototype.getLegendsObject = function (treeCtrl) {
  var _this5 = this;

  var legendsObject = {};

  if (treeCtrl.node.children !== undefined) {
    return null;
  }

  var gmfLayer = treeCtrl.node;
  var gmfLayerDefaultName = gmfLayer.name;

  if (gmfLayer.metadata.legendImage) {
    legendsObject[gmfLayerDefaultName] = gmfLayer.metadata.legendImage;
    return legendsObject;
  }

  var layer = treeCtrl.layer;

  if (gmfLayer.type === 'WMTS') {
    if (!(layer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_16__["default"])) {
      throw new Error('Wrong layer');
    }

    var wmtsLegendURL = this.layerHelper_.getWMTSLegendURL(layer);

    if (wmtsLegendURL !== undefined) {
      legendsObject[gmfLayerDefaultName] = wmtsLegendURL;
    }

    return wmtsLegendURL ? legendsObject : null;
  } else {
    var gmfLayerWMS = gmfLayer;
    var layersNames = gmfLayerWMS.layers;
    var gmfOgcServer = this.gmfTreeManager_.getOgcServer(treeCtrl);
    var scale = this.getScale_();
    var layerNamesList;

    if (gmfOgcServer.type === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["ServerType"].QGISSERVER) {
      layerNamesList = [layersNames];
    } else {
      layerNamesList = layersNames.split(',');
    }

    layerNamesList.forEach(function (layerName) {
      var wmtsLegendURL = _this5.layerHelper_.getWMSLegendURL(gmfOgcServer.url, layerName, scale);

      if (!wmtsLegendURL) {
        throw new Error('Missing wmtsLegendURL');
      }

      legendsObject[layerName] = wmtsLegendURL;
    });
    return legendsObject;
  }
};

Controller.prototype.getNumberOfLegendsObject = function (treeCtrl) {
  var legendsObject = this.getLegendsObject(treeCtrl);
  return legendsObject ? Object.keys(legendsObject).length : 0;
};

Controller.prototype.getScale_ = function () {
  var view = this.map.getView();
  var resolution = view.getResolution();

  if (resolution === undefined) {
    throw new Error('Missing resolution');
  }

  var mpu = view.getProjection().getMetersPerUnit();

  if (!mpu) {
    throw new Error('Missing mpu');
  }

  var dpi = 25.4 / 0.28;
  return resolution * mpu * 39.37 * dpi;
};

Controller.prototype.isSnappingActivated = function (treeCtrl) {
  if (treeCtrl.properties.snapping !== undefined) {
    if (typeof treeCtrl.properties.snapping !== 'boolean') {
      throw new Error('Wrong snappingActive type');
    }

    return treeCtrl.properties.snapping;
  }

  var node = treeCtrl.node;
  var config = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__["getSnappingConfig"])(node);
  return config !== null && config.activated;
};

Controller.prototype.toggleSnapping = function (treeCtrl) {
  treeCtrl.properties.snapping = !this.isSnappingActivated(treeCtrl);
};

Controller.prototype.displayMetadata = function (treeCtrl) {
  var node = treeCtrl.node;
  var metadataURL = node.metadata.metadataUrl;

  if (metadataURL !== undefined) {
    var gmfx = window.gmfx;

    if (gmfx.openIframePopup) {
      gmfx.openIframePopup(metadataURL, node.name, undefined, undefined, false);
    }
  }
};

Controller.prototype.afterReorder = function () {
  var _this6 = this;

  if (!this.gmfTreeManager_.rootCtrl) {
    throw new Error('Missing gmfTreeManager_.rootCtrl');
  }

  var gmfRootGroup = this.gmfTreeManager_.rootCtrl.node;
  var groupNodes = gmfRootGroup.children;
  var currentTreeCtrls = this.gmfTreeManager_.rootCtrl.children;
  var treeCtrls = [];
  groupNodes.forEach(function (node) {
    currentTreeCtrls.some(function (treeCtrl) {
      if (treeCtrl.node === node) {
        treeCtrls.push(treeCtrl);
        return false;
      }

      return false;
    });
  });
  this.gmfTreeManager_.rootCtrl.children = treeCtrls;
  this.layers.length = 0;
  this.gmfTreeManager_.rootCtrl.children.forEach(function (child) {
    if (!(child.layer instanceof ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_22__["default"])) {
      throw new Error('Wrong child.layer');
    }

    _this6.layers.push(child.layer);
  });
  this.gmfPermalink_.refreshFirstLevelGroups();
};

Controller.prototype.tagPopup = function (node) {
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_23__["getUid"])(node);
  var popupId = $("#popup-id-" + uid).attr('aria-describedby');

  if (!node.popupId) {
    node.popupId = popupId;
  } else {
    delete node.popupId;
  }
};

Controller.prototype.removeNode = function (node) {
  this.gmfTreeManager_.parseTreeNodes(node);
  this.gmfTreeManager_.removeGroup(node);
};

Controller.prototype.removeAllNodes = function () {
  this.gmfTreeManager_.parseTreeNodes(this.root);
  this.gmfTreeManager_.removeAll();
  this.gmfExternalDataSourcesManager.removeAll();
};

Controller.prototype.nodesCount = function () {
  return this.gmfTreeManager_.root.children.length;
};

Controller.prototype.getResolutionStyle = function (gmfLayer) {
  var resolution = this.map.getView().getResolution();

  if (resolution === undefined) {
    throw new Error('Missing resolution');
  }

  var minResolution = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__["getNodeMinResolution"])(gmfLayer);

  if (minResolution !== undefined && resolution < minResolution) {
    return 'out-of-resolution';
  }

  var maxResolution = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__["getNodeMaxResolution"])(gmfLayer);

  if (maxResolution !== undefined && resolution > maxResolution) {
    return 'out-of-resolution';
  }

  return undefined;
};

Controller.prototype.zoomToResolution = function (treeCtrl) {
  var gmfLayer = treeCtrl.node;
  var view = this.map.getView();
  var resolution = view.getResolution();

  if (resolution === undefined) {
    throw new Error('Missing resolution');
  }

  var minResolution = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__["getNodeMinResolution"])(gmfLayer);
  var constrainResolution = view.getConstraints().resolution;
  var size = this.map.getSize();

  if (size === undefined) {
    throw new Error('Missing size');
  }

  if (minResolution !== undefined && resolution < minResolution) {
    view.setResolution(constrainResolution(minResolution, 1, size));
  } else {
    var maxResolution = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_9__["getNodeMaxResolution"])(gmfLayer);

    if (maxResolution !== undefined && resolution > maxResolution) {
      view.setResolution(constrainResolution(maxResolution, -1, size));
    }
  }
};

Controller.prototype.toggleSwipeLayer = function (treeCtrl) {
  var _this7 = this;

  if (!treeCtrl.layer) {
    console.error('No layer');
  } else if (this.gmfLayerBeingSwipe.layer === treeCtrl.layer) {
    this.gmfLayerBeingSwipe.layer = null;
    this.map.render();
  } else {
    this.gmfLayerBeingSwipe.layer = null;
    this.$timeout_(function () {
      _this7.gmfLayerBeingSwipe.layer = treeCtrl.layer;

      _this7.map.render();
    }, 0);
  }
};

Controller.prototype.toggleNodeLegend = function (legendNodeId) {
  var div = document.querySelector(legendNodeId);

  if (div) {
    div.classList.toggle('show');
  }
};

Controller.prototype.toggleNodeMenu = function (menuNodeId) {
  var div = document.querySelector(menuNodeId);

  if (div) {
    div.classList.toggle('d-none');
  }
};

Controller.prototype.toggleFiltrableDataSource = function (ds) {
  this.gmfDataSourceBeingFiltered.dataSource = ds;
};

Controller.prototype.isNodeLegendVisible = function (legendNodeId) {
  return $(legendNodeId).is(':visible');
};

Controller.prototype.supportsCustomization = function (treeCtrl) {
  return !treeCtrl.isRoot && (this.supportsLegend(treeCtrl) || this.supportsOpacityChange(treeCtrl));
};

Controller.prototype.supportsLegend = function (treeCtrl) {
  var node = treeCtrl.node;
  return !!node.metadata && !!node.metadata.legend && !!this.getLegendsObject(treeCtrl);
};

Controller.prototype.supportsOpacityChange = function (treeCtrl) {
  var node = treeCtrl.node;
  var parentNode = treeCtrl.parent ? treeCtrl.parent.node : undefined;
  return !!treeCtrl.layer && (treeCtrl.depth === 1 && !node.mixed || treeCtrl.depth > 1 && parentNode.mixed && (!node.children || node.children && !node.mixed));
};

Controller.prototype.isFiltrable = function (treeCtrl) {
  var datasource = treeCtrl.getDataSource();
  return datasource ? datasource.filtrable : false;
};

Controller.prototype.getFirstParentWithLayerFunctions = function (treeCtrl) {
  var parentTreeCtrl = treeCtrl.parent;

  if (!parentTreeCtrl) {
    return null;
  }

  if (this.supportsOpacityChange(parentTreeCtrl) || this.isFiltrable(parentTreeCtrl)) {
    return parentTreeCtrl;
  }

  return this.getFirstParentWithLayerFunctions(parentTreeCtrl);
};

myModule.controller('GmfLayertreeController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/layertree/datasourceGroupTreeComponent.html":
/*!**********************************************************************!*\
  !*** ./contribs/gmf/src/layertree/datasourceGroupTreeComponent.html ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div\n  class="gmf-layertree-group gmf-layertree-depth-1 {{$ctrl.group.visibilityState}}"\n>\n  <a\n    data-toggle="collapse"\n    href="#gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}}"\n    aria-expanded="true"\n    class="fa gmf-layertree-expand-node fa-fw">\n  </a>\n\n  <a\n    class="fa fa-fw gmf-layertree-state"\n    href\n    ng-click="$ctrl.toggle()"\n  >' +
((__t = (__webpack_require__(/*! gmf/icons/layers.svg?viewbox&height=1em */ "./contribs/gmf/src/icons/layers.svg?viewbox&height=1em"))) == null ? '' : __t) +
'</a>\n\n  <a\n    class="gmf-layertree-name"\n    href\n    ng-click="$ctrl.toggle()"\n  >\n    <span>{{$ctrl.group.title | translate}}</span>\n  </a>\n\n  <span class="gmf-layertree-right-buttons">\n    <a\n      href=""\n      ng-click="$ctrl.remove()">\n      <span class="fa fa-trash"></span>\n    </a>\n  </span>\n</div>\n\n<ul\n  id="gmf-layertree-layer-group-{{::$ctrl.getGroupUid()}}"\n  class="collapse in show"\n>\n  <li\n    class="gmf-layertree-node gmf-layertree-depth-2"\n    ng-class="[dataSource.visible ? \'on\' : \'off\']"\n    ng-repeat="dataSource in $ctrl.group.dataSources"\n  >\n    <div class="gmf-layertree-leaf">\n      <a\n        href\n        ng-click="$ctrl.toggleDataSource(dataSource)"\n        class="gmf-layertree-layer-icon gmf-layertree-no-layer-icon"\n      >\n      </a>\n      <a\n        class="gmf-layertree-name"\n        href\n        ng-click="$ctrl.toggleDataSource(dataSource)"\n      >\n        <span>{{dataSource.name | translate}}</span>\n      </a>\n\n      <span class="gmf-layertree-right-buttons">\n        <a\n          href=""\n          ng-click="$ctrl.removeDataSource(dataSource)">\n          <span class="fa fa-trash"></span>\n        </a>\n        <a\n          class="gmf-layertree-node-menu-btn"\n          href=""\n          ng-if=ctrl.getLegendUrl(dataSource.legend)>\n            <span class="fa fa-cog"></span>\n        </a>\n        <span\n          ngeo-popover\n          ng-if="$ctrl.getLegendUrl(dataSource.legend)"\n          ngeo-popover-dismiss=".content">\n            <span\n              ngeo-popover-anchor\n              class="extra-actions fa fa-cog"\n              id="popup-id-{{dataSource.id}}">\n            </span>\n\n            <div ngeo-popover-content>\n              <ul>\n                <li ng-if="$ctrl.getLegendUrl(dataSource.legend)">\n                  <i class="fa fa-th-list fa-fw"></i>\n                  <a\n                    ng-click="$ctrl.toggleNodeLegend(dataSource.id + \'legend\'); popoverCtrl.dismissPopover()"\n                    href=""\n                  >\n                    {{\'Show/hide legend\'|translate}}\n                  </a>\n                </li>\n              </ul>\n            </div>\n        </span>\n      </span>\n    </div>\n    <div\n      id="{{dataSource.id + \'legend\'}}"\n      class="gmf-layertree-legend">\n      <a\n        title="{{\'Hide legend\'|translate}}"\n        ng-click="$ctrl.toggleNodeLegend(dataSource.id + \'legend\')"\n        href="">\n        {{\'Hide legend\'|translate}}\n      </a>\n      <div ng-if="$ctrl.getLegendUrl(dataSource.legend)" class="gmf-imported-legend">\n          <div class="gmf-legend-image">\n            <img ng-src="{{$ctrl.getLegendUrl(dataSource.legend)}}"></img>\n          </div>\n      </div>\n    </div>\n  </li>\n</ul>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/layertree/datasourceGroupTreeComponent.js":
/*!********************************************************************!*\
  !*** ./contribs/gmf/src/layertree/datasourceGroupTreeComponent.js ***!
  \********************************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfLayertreeDatasourceGroupTreeComponent', [ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/layertree/datasourceGroupTreeComponent', __webpack_require__(/*! ./datasourceGroupTreeComponent.html */ "./contribs/gmf/src/layertree/datasourceGroupTreeComponent.html"));
}]);
myModule.value('gmfLayertreeDatasourceGroupTreeTemplateUrl', function ($attrs) {
  var templateUrl = $attrs['gmfLayertreeDatasourceGroupTreeTemplateUrl'];
  return templateUrl !== undefined ? templateUrl : 'gmf/layertree/datasourceGroupTreeComponent';
});
gmfLayertreeDatasourceGroupTreeTemplateUrl.$inject = ["$attrs", "gmfLayertreeDatasourceGroupTreeTemplateUrl"];

function gmfLayertreeDatasourceGroupTreeTemplateUrl($attrs, gmfLayertreeDatasourceGroupTreeTemplateUrl) {
  return gmfLayertreeDatasourceGroupTreeTemplateUrl($attrs);
}

var Controller = function () {
  Controller.$inject = ["$scope", "ngeoDataSources", "ngeoLayerHelper"];

  function Controller($scope, ngeoDataSources, ngeoLayerHelper) {
    this.group = null;
    this.scope_ = $scope;
    this.dataSources_ = ngeoDataSources.collection;
    this.layerHelper_ = ngeoLayerHelper;
    this.getScale = null;
  }

  var _proto = Controller.prototype;

  _proto.getGroupUid = function getGroupUid() {
    return "datasourcegrouptree-" + Object(ol_util_js__WEBPACK_IMPORTED_MODULE_3__["getUid"])(this.group);
  };

  _proto.toggle = function toggle() {
    if (!this.group) {
      throw new Error('Missing group');
    }

    this.group.toggleVisibilityState();
  };

  _proto.toggleDataSource = function toggleDataSource(dataSource) {
    dataSource.visible = !dataSource.visible;

    if (dataSource.visible) {
      this.setLegendVisibility(true, dataSource.id.toString() + 'legend');
    } else {
      this.setLegendVisibility(false, dataSource.id.toString() + 'legend');
    }
  };

  _proto.remove = function remove() {
    if (!this.group) {
      throw new Error('Missing group');
    }

    for (var i = this.group.dataSources.length - 1, ii = 0; i >= ii; i--) {
      this.dataSources_.remove(this.group.dataSources[i]);
    }
  };

  _proto.removeDataSource = function removeDataSource(dataSource) {
    this.dataSources_.remove(dataSource);
  };

  _proto.toggleNodeLegend = function toggleNodeLegend(legendNodeId) {
    var div = document.getElementById(legendNodeId);

    if (div) {
      div.classList.toggle('show');
    }
  };

  _proto.getLegendUrl = function getLegendUrl(legend) {
    if (legend) {
      return this.layerHelper_.getWMSLegendURL(legend.url, legend.name, this.getScale());
    } else {
      return null;
    }
  };

  _proto.setLegendVisibility = function setLegendVisibility(show, legendNodeId) {
    var div = document.getElementById(legendNodeId);

    if (div) {
      show ? div.classList.remove('off') : div.classList.add('off');
    }
  };

  return Controller;
}();
myModule.component('gmfDatasourcegrouptree', {
  bindings: {
    'group': '<',
    'getScale': '&'
  },
  controller: Controller,
  templateUrl: gmfLayertreeDatasourceGroupTreeTemplateUrl
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/layertree/module.js":
/*!**********************************************!*\
  !*** ./contribs/gmf/src/layertree/module.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_layertree_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/layertree/component.js */ "./contribs/gmf/src/layertree/component.js");
/* harmony import */ var gmf_layertree_datasourceGroupTreeComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/layertree/datasourceGroupTreeComponent.js */ "./contribs/gmf/src/layertree/datasourceGroupTreeComponent.js");
/* harmony import */ var gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/layertree/SyncLayertreeMap.js */ "./contribs/gmf/src/layertree/SyncLayertreeMap.js");
/* harmony import */ var gmf_layertree_timeSliderComponent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/layertree/timeSliderComponent.js */ "./contribs/gmf/src/layertree/timeSliderComponent.js");
/* harmony import */ var gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/layertree/TreeManager.js */ "./contribs/gmf/src/layertree/TreeManager.js");
/* harmony import */ var _common_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common.scss */ "./contribs/gmf/src/layertree/common.scss");
/* harmony import */ var _common_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_common_scss__WEBPACK_IMPORTED_MODULE_6__);







/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfLayertreeModule', [gmf_layertree_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_layertree_datasourceGroupTreeComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_layertree_SyncLayertreeMap_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, gmf_layertree_timeSliderComponent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/layertree/timeSliderComponent.js":
/*!***********************************************************!*\
  !*** ./contribs/gmf/src/layertree/timeSliderComponent.js ***!
  \***********************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/debounce.js */ "./src/misc/debounce.js");
/* harmony import */ var jquery_ui_ui_widgets_slider_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-ui/ui/widgets/slider.js */ "./node_modules/jquery-ui/ui/widgets/slider.js");
/* harmony import */ var jquery_ui_ui_widgets_slider_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_slider_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var angular_ui_slider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular-ui-slider */ "./node_modules/angular-ui-slider/src/index.js");
/* harmony import */ var angular_ui_slider__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(angular_ui_slider__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _timeslider_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./timeslider.scss */ "./contribs/gmf/src/layertree/timeslider.scss");
/* harmony import */ var _timeslider_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_timeslider_scss__WEBPACK_IMPORTED_MODULE_6__);
Controller.$inject = ["ngeoWMSTime", "ngeoDebounce"];







var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfLayertreeTimeSliderComponent', [ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, 'ui.slider']);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/layertree/timesliderComponent', __webpack_require__(/*! ./timesliderComponent.html */ "./contribs/gmf/src/layertree/timesliderComponent.html"));
}]);

function layertreeTimeSliderComponent() {
  return {
    scope: {
      onDateSelected: '&gmfTimeSliderOnDateSelected',
      time: '=gmfTimeSliderTime'
    },
    bindToController: true,
    controller: 'gmfTimeSliderController as sliderCtrl',
    restrict: 'AE',
    templateUrl: 'gmf/layertree/timesliderComponent',
    link: {
      pre: function preLink(scope, element, attrs, ctrl) {
        if (!ctrl) {
          throw new Error('Missing ctrl');
        }

        ctrl.init();
        ctrl.sliderOptions.stop = onSliderReleased_;
        ctrl.sliderOptions.slide = ctrl.ngeoDebounce_(onSliderReleased_, 300, true);

        function onSliderReleased_(e, sliderUi) {
          if (!ctrl) {
            throw new Error('Missing ctrl');
          }

          ctrl.onDateSelected({
            time: computeDates_(e, sliderUi)
          });
          scope.$apply();
        }

        function computeDates_(e, sliderUi) {
          if (!ctrl) {
            throw new Error('Missing ctrl');
          }

          var sDate, eDate, wmstime;

          if (sliderUi.values) {
            sDate = new Date(ctrl.getClosestValue_(sliderUi.values[0]));
            eDate = new Date(ctrl.getClosestValue_(sliderUi.values[1]));
            ctrl.dates = [sDate, eDate];
            wmstime = {
              start: sDate.getTime(),
              end: eDate.getTime()
            };
          } else {
            sDate = new Date(ctrl.getClosestValue_(sliderUi.value));
            ctrl.dates = sDate;
            wmstime = {
              start: sDate.getTime()
            };
          }

          scope.$apply();
          return wmstime;
        }
      }
    }
  };
}

myModule.directive('gmfTimeSlider', layertreeTimeSliderComponent);
function Controller(ngeoWMSTime, ngeoDebounce) {
  this.ngeoWMSTime_ = ngeoWMSTime;
  this.ngeoDebounce_ = ngeoDebounce;

  this.onDateSelected = function () {
    return undefined;
  };

  this.time = null;
  this.isModeRange = false;
  this.minValue = -1;
  this.maxValue = 999999;
  this.timeValueList = null;
  this.sliderOptions = null;
  this.dates = [];
}

Controller.prototype.init = function () {
  if (!this.time) {
    throw new Error('Missing time');
  }

  var initialOptions_ = this.ngeoWMSTime_.getOptions(this.time);
  this.isModeRange = this.time.mode === 'range';
  this.minValue = initialOptions_.minDate;
  this.maxValue = initialOptions_.maxDate;
  var values = initialOptions_.values;

  if (this.isModeRange) {
    if (!Array.isArray(values)) {
      throw new Error('Wrong Options values');
    }

    this.dates = [values[0], values[1]];
  } else {
    this.dates = initialOptions_.values;
  }

  this.timeValueList = this.getTimeValueList_();
  this.sliderOptions = {
    range: this.isModeRange,
    min: this.minValue,
    max: this.maxValue
  };
};

Controller.prototype.getTimeValueList_ = function () {
  if (!this.time) {
    throw new Error('Missing time');
  }

  var wmsTime = this.time;
  var timeValueList = [];
  var minDate = new Date(this.minValue);
  var maxDate = new Date(this.maxValue);

  if (wmsTime.values) {
    timeValueList = [];
    wmsTime.values.forEach(function (date) {
      timeValueList.push(new Date(date).getTime());
    });
  } else {
    var maxNbValues = 1024;

    if (wmsTime.resolution == 'day') {
      maxNbValues *= 12;
    }

    var endDate = new Date(minDate.getTime());
    endDate.setFullYear(minDate.getFullYear() + maxNbValues * wmsTime.interval[0]);
    endDate.setMonth(minDate.getMonth() + maxNbValues * wmsTime.interval[1], minDate.getDate() + maxNbValues * wmsTime.interval[2]);
    endDate.setSeconds(minDate.getSeconds() + maxNbValues * wmsTime.interval[3]);

    if (endDate > maxDate) {
      timeValueList = [];

      for (var i = 0;; i++) {
        var nextDate = new Date(minDate.getTime());
        nextDate.setFullYear(minDate.getFullYear() + i * wmsTime.interval[0]);
        nextDate.setMonth(minDate.getMonth() + i * wmsTime.interval[1], minDate.getDate() + i * wmsTime.interval[2]);
        nextDate.setSeconds(minDate.getSeconds() + i * wmsTime.interval[3]);

        if (nextDate <= maxDate) {
          timeValueList.push(nextDate.getTime());
        } else {
          break;
        }
      }
    }
  }

  return timeValueList;
};

Controller.prototype.getClosestValue_ = function (timestamp) {
  if (!this.time) {
    throw new Error('Missing time');
  }

  if (timestamp <= this.minValue) {
    return this.minValue;
  }

  if (timestamp >= this.maxValue) {
    return this.maxValue;
  }

  if (this.timeValueList) {
    var index;
    var leftIndex = 0;
    var rightIndex = this.timeValueList.length - 1;

    while (rightIndex - leftIndex > 1) {
      index = Math.floor((leftIndex + rightIndex) / 2);

      if (this.timeValueList[index] >= timestamp) {
        rightIndex = index;
      } else {
        leftIndex = index;
      }
    }

    var leftDistance = Math.abs(this.timeValueList[leftIndex] - timestamp);
    var rightDistance = Math.abs(this.timeValueList[rightIndex] - timestamp);
    return this.timeValueList[leftDistance < rightDistance ? leftIndex : rightIndex];
  } else {
    var targetDate = new Date(timestamp);
    var startDate = new Date(this.minValue);
    var bestDate = new Date(this.minValue);
    var maxDate = new Date(this.maxValue);
    var bestDistance = Math.abs(targetDate.getTime() - bestDate.getTime());

    for (var i = 1;; i++) {
      var next = new Date(startDate.getTime());
      next.setFullYear(startDate.getFullYear() + i * this.time.interval[0]);
      next.setMonth(startDate.getMonth() + i * this.time.interval[1], startDate.getDate() + i * this.time.interval[2]);
      next.setSeconds(startDate.getSeconds() + i * this.time.interval[3]);

      if (next > maxDate) {
        break;
      }

      var distance = Math.abs(targetDate.getTime() - next.getTime());

      if (distance <= bestDistance) {
        bestDate = next;
        bestDistance = distance;
      } else {
        break;
      }
    }

    return bestDate.getTime();
  }
};

Controller.prototype.getLocalizedDate = function (time) {
  if (!this.time) {
    throw new Error('Missing time');
  }

  return this.ngeoWMSTime_.formatTimeValue(time, this.time.resolution);
};

myModule.controller('gmfTimeSliderController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/layertree/timeslider.scss":
/*!****************************************************!*\
  !*** ./contribs/gmf/src/layertree/timeslider.scss ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/layertree/timesliderComponent.html":
/*!*************************************************************!*\
  !*** ./contribs/gmf/src/layertree/timesliderComponent.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="gmf-time-slider">\n\n  <div\n    ui-slider="sliderCtrl.sliderOptions"\n    ng-model="sliderCtrl.dates">\n    <span\n      class="ui-slider-handle ui-state-default ui-corner-all"\n      tabindex="0"\n      data-toggle="tooltip"\n      title="">\n    </span>\n  </div>\n\n  <div class="gmf-time-slider-displayed-dates">\n    <div\n      class="gmf-time-slider-start-date"\n      ng-if="::sliderCtrl.time.mode === \'range\'">\n      <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[0])}}</span>\n    </div>\n\n    <div\n      class="gmf-time-slider-start-date"\n      ng-if="::sliderCtrl.time.mode === \'value\'">\n      <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates)}}</span>\n    </div>\n\n    <div\n      class="gmf-time-slider-end-date"\n      ng-if="::sliderCtrl.time.mode === \'range\'">\n      <span>{{sliderCtrl.getLocalizedDate(sliderCtrl.dates[1])}}</span>\n    </div>\n  </div>\n\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/map/component.html":
/*!*********************************************!*\
  !*** ./contribs/gmf/src/map/component.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div\n    ngeo-map="ctrl.map"\n    ngeo-map-manage-resize="ctrl.manageResize"\n    ngeo-map-resize-transition="ctrl.resizeTransition"\n    gmf-file-drop-zone>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/map/component.js":
/*!*******************************************!*\
  !*** ./contribs/gmf/src/map/component.js ***!
  \*******************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_permalink_module_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/permalink/module.js */ "./contribs/gmf/src/permalink/module.js");
/* harmony import */ var gmf_editing_Snapping_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/editing/Snapping.js */ "./contribs/gmf/src/editing/Snapping.js");
/* harmony import */ var gmf_dropfile_module_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/dropfile/module.js */ "./contribs/gmf/src/dropfile/module.js");
/* harmony import */ var ngeo_map_module_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/map/module.js */ "./src/map/module.js");
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
Controller.$inject = ["ngeoFeatureOverlayMgr", "gmfPermalink", "gmfSnapping", "$injector"];






var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMapComponent', [gmf_permalink_module_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_editing_Snapping_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_dropfile_module_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_map_module_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/map', __webpack_require__(/*! ./component.html */ "./contribs/gmf/src/map/component.html"));
}]);

function gmfMapComponent() {
  return {
    scope: {
      'map': '<gmfMapMap',
      'manageResize': '<gmfMapManageResize',
      'resizeTransition': '<gmfMapResizeTransition'
    },
    controller: 'GmfMapController as ctrl',
    bindToController: true,
    templateUrl: 'gmf/map'
  };
}

myModule.directive('gmfMap', gmfMapComponent);
function Controller(ngeoFeatureOverlayMgr, gmfPermalink, gmfSnapping, $injector) {
  this.map = null;
  this.manageResize = null;
  this.resizeTransition = null;
  this.ngeoFeatureOverlayMgr_ = ngeoFeatureOverlayMgr;
  this.gmfPermalink_ = gmfPermalink;
  this.gmfSnapping_ = gmfSnapping;
  this.fileDropEnabled = $injector.has('gmfFileDropEnabled') ? $injector.get('gmfFileDropEnabled') : false;
}

Controller.prototype.$onInit = function () {
  if (!this.map) {
    throw new Error('Missing map');
  }

  this.ngeoFeatureOverlayMgr_.init(this.map);
  this.gmfPermalink_.setMap(this.map);
  this.gmfSnapping_.setMap(this.map);
};

myModule.controller('GmfMapController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/map/module.js":
/*!****************************************!*\
  !*** ./contribs/gmf/src/map/module.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_map_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/map/component.js */ "./contribs/gmf/src/map/component.js");
/* harmony import */ var gmf_map_mousepositionComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/map/mousepositionComponent.js */ "./contribs/gmf/src/map/mousepositionComponent.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMapModule', [gmf_map_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_map_mousepositionComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/map/mousepositionComponent.html":
/*!**********************************************************!*\
  !*** ./contribs/gmf/src/map/mousepositionComponent.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="btn-group dropup">\n  <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n    <span class="gmf-mouseposition-control-target"></span>\n  </button>\n  <ul class="dropdown-menu dropdown-menu-right" role="menu">\n    <li class="dropdown-header" translate>Coordinate systems</li>\n    <li ng-repeat="projitem in ::ctrl.projections">\n      <a href ng-click="ctrl.setProjection(projitem)">\n        <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span>\n        {{::projitem.label}}\n      </a>\n    </li>\n  </ul>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/map/mousepositionComponent.js":
/*!********************************************************!*\
  !*** ./contribs/gmf/src/map/mousepositionComponent.js ***!
  \********************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ol_control_MousePosition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/control/MousePosition.js */ "./node_modules/ol/control/MousePosition.js");
/* harmony import */ var bootstrap_js_src_dropdown_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap/js/src/dropdown.js */ "./node_modules/bootstrap/js/src/dropdown.js");
Controller.$inject = ["$element", "$filter", "$scope", "gettextCatalog", "gmfMousePositionOptions"];




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMapMouseposition', [ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/map/mousepositionComponent', __webpack_require__(/*! ./mousepositionComponent.html */ "./contribs/gmf/src/map/mousepositionComponent.html"));
}]);
myModule.value('gmfMapMousepositionTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.gmfMapMousepositionTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'gmf/map/mousepositionComponent';
});
gmfMapMousepositionTemplateUrl.$inject = ["$attrs", "gmfMapMousepositionTemplateUrl"];

function gmfMapMousepositionTemplateUrl($attrs, gmfMapMousepositionTemplateUrl) {
  return gmfMapMousepositionTemplateUrl($attrs);
}

var mapMousepositionComponent = {
  controller: 'gmfMousepositionController as ctrl',
  bindings: {
    'map': '<gmfMousepositionMap'
  },
  templateUrl: gmfMapMousepositionTemplateUrl
};
myModule.component('gmfMouseposition', mapMousepositionComponent);
function Controller($element, $filter, $scope, gettextCatalog, gmfMousePositionOptions) {
  this.options = gmfMousePositionOptions;
  this.map = null;
  this.projection = null;
  this.$scope_ = $scope;
  this.gettextCatalog_ = gettextCatalog;
  this.$element_ = $element;
  this.$filter_ = $filter;
  this.control_ = null;
}

Controller.prototype.$onInit = function () {
  var _this = this;

  this.$scope_.$on('gettextLanguageChanged', function () {
    _this.initOlControl_();
  });
  this.initOlControl_();
};

Controller.prototype.initOlControl_ = function () {
  var _this2 = this;

  if (!this.map) {
    throw new Error('Missing map');
  }

  if (this.control_ !== null) {
    this.map.removeControl(this.control_);
  }

  var formatFn = function formatFn(coordinates) {
    if (!_this2.projection) {
      throw new Error('Missing projection');
    }

    var filterAndArgs = _this2.projection.filter.split(':');

    var shiftedFilterAndArgs = filterAndArgs.shift();

    if (!shiftedFilterAndArgs) {
      throw new Error('Missing shiftedFilterAndArgs');
    }

    var filter = _this2.$filter_(shiftedFilterAndArgs);

    if (typeof filter != 'function') {
      throw new Error('Wrong filter type');
    }

    var args = filterAndArgs;
    args.unshift(coordinates);
    return filter.apply(_this2, args);
  };

  var gettextCatalog = this.gettextCatalog_;
  this.control_ = new ol_control_MousePosition_js__WEBPACK_IMPORTED_MODULE_2__["default"]({
    className: 'gmf-mouseposition-control',
    coordinateFormat: formatFn,
    target: this.$element_.find('.gmf-mouseposition-control-target').get(0),
    undefinedHTML: gettextCatalog.getString('Coordinates')
  });
  this.setProjection(this.options.projections[0]);
  this.map.addControl(this.control_);
};

Controller.prototype.setProjection = function (projection) {
  if (!this.control_) {
    throw new Error('Missing control');
  }

  this.control_.setProjection(projection.code);
  this.projection = projection;
};

myModule.controller('gmfMousepositionController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/areaComponent.js":
/*!**********************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/areaComponent.js ***!
  \**********************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_interaction_MeasureAreaMobile_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/interaction/MeasureAreaMobile.js */ "./src/interaction/MeasureAreaMobile.js");
/* harmony import */ var gmf_mobile_measure_baseComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/mobile/measure/baseComponent.js */ "./contribs/gmf/src/mobile/measure/baseComponent.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
mobileMeasureAreaComponent.$inject = ["gmfMobileMeasureAreaTemplateUrl"];

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileMeasureArea', [ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.value('gmfMobileMeasureAreaTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.gmfMobileMeasureAreaTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/measure/areaComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/measure/areaComponent', __webpack_require__(/*! ./baseComponent.html */ "./contribs/gmf/src/mobile/measure/baseComponent.html"));
}]);

function mobileMeasureAreaComponent(gmfMobileMeasureAreaTemplateUrl) {
  return {
    restrict: 'A',
    scope: {
      'active': '=gmfMobileMeasureareaActive',
      'map': '=gmfMobileMeasureareaMap'
    },
    controller: 'GmfMobileMeasureAreaController as ctrl',
    bindToController: true,
    templateUrl: gmfMobileMeasureAreaTemplateUrl,
    link: function link(scope, element, attrs, controller) {
      if (!controller) {
        throw new Error('Missing controller');
      }

      controller.init();
    }
  };
}

myModule.directive('gmfMobileMeasurearea', mobileMeasureAreaComponent);
var Controller = function (_MeasueMobileBaseCont) {
  Controller.$inject = ["$scope", "$filter", "gettextCatalog", "gmfMobileMeasureAreaOptions"];

  _inheritsLoose(Controller, _MeasueMobileBaseCont);

  function Controller($scope, $filter, gettextCatalog, gmfMobileMeasureAreaOptions) {
    var _this;

    _this = _MeasueMobileBaseCont.call(this, $scope, $filter, gettextCatalog) || this;
    _this.options = gmfMobileMeasureAreaOptions;
    _this.measure = null;
    return _this;
  }

  var _proto = Controller.prototype;

  _proto.init = function init() {
    this.measure = new ngeo_interaction_MeasureAreaMobile_js__WEBPACK_IMPORTED_MODULE_2__["default"](this.filter('ngeoUnitPrefix'), this.gettextCatalog, {
      precision: this.options.precision || 2,
      sketchStyle: Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_4__["buildStyle"])(this.options.sketchStyle)
    });

    _MeasueMobileBaseCont.prototype.init.call(this);
  };

  _proto.addPoint = function addPoint() {
    if (!this.drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    this.drawInteraction.addToDrawing();
  };

  _proto.clear = function clear() {
    if (!this.drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    this.drawInteraction.clearDrawing();
  };

  _proto.finish = function finish() {
    if (!this.drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    this.drawInteraction.finishDrawing();
  };

  _proto.deactivate = function deactivate() {
    this.active = false;
  };

  return Controller;
}(gmf_mobile_measure_baseComponent_js__WEBPACK_IMPORTED_MODULE_3__["MeasueMobileBaseController"]);
myModule.controller('GmfMobileMeasureAreaController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/baseComponent.html":
/*!************************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/baseComponent.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<a class="btn btn-default"\n   ng-if="ctrl.drawing && (!ctrl.valid)"\n   ng-click="ctrl.addPoint()">\n     <span class="fa fa-check"></span>\n     {{\'Set as starting point\' | translate}}\n</a>\n<a class="btn btn-default"\n   ng-if="ctrl.dirty"\n   ng-click="ctrl.addPoint()">\n     <span class="fa fa-plus"></span>\n     {{\'Add new point\' | translate}}\n</a>\n<a class="btn btn-default"\n   ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty"\n   ng-click="ctrl.finish()">\n     <span class="fa fa-check"></span>\n     {{\'Terminate\' | translate}}\n</a>\n<a class="btn btn-default"\n   ng-if="ctrl.valid"\n   ng-click="ctrl.clear()">\n     <span class="fa fa-repeat"></span>\n     {{\'Clear\' | translate}}\n</a>\n<a class="btn btn-default"\n   ng-if="ctrl.active"\n   ng-click="ctrl.deactivate()">\n     <span class="fa fa-times"></span>\n     {{\'Close\' | translate}}\n</a>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/baseComponent.js":
/*!**********************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/baseComponent.js ***!
  \**********************************************************/
/*! exports provided: MeasueMobileBaseController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasueMobileBaseController", function() { return MeasueMobileBaseController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/decorate.js */ "./src/misc/decorate.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/interaction/MobileDraw.js */ "./src/interaction/MobileDraw.js");
MeasueMobileBaseController.$inject = ["$scope", "$filter", "gettextCatalog"];





var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileMeasureBase', [ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
function MeasueMobileBaseController($scope, $filter, gettextCatalog) {
  var _this = this;

  this.scope = $scope;
  this.filter = $filter;
  this.gettextCatalog = gettextCatalog;
  this.map = null;
  this.active = false;
  this.scope.$watch(function () {
    return _this.active;
  }, function (newVal) {
    if (!_this.measure) {
      throw new Error('Missing measure');
    }

    _this.measure.setActive(newVal);
  });
  this.measure = null;
  this.drawInteraction = null;
  this.dirty = false;
  this.drawing = false;
  this.valid = false;
}

MeasueMobileBaseController.prototype.init = function () {
  var _this2 = this;

  if (!this.map) {
    throw new Error('Missing map');
  }

  if (!this.measure) {
    throw new Error('Missing measure');
  }

  this.measure.setActive(this.active);
  Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__["interactionDecoration"])(this.measure);
  var drawInteraction = this.measure.getDrawInteraction();

  if (!(drawInteraction instanceof ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_4__["default"])) {
    throw new Error('Wrong drawInteraction');
  }

  this.drawInteraction = drawInteraction;
  Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__["interactionDecoration"])(drawInteraction);
  Object.defineProperty(this, 'hasPoints', {
    get: function get() {
      return this.drawInteraction.getFeature() !== null;
    }
  });
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(drawInteraction, 'change:dirty', function (evt) {
    _this2.dirty = drawInteraction.getDirty();

    if (_this2.dirty) {
      _this2.scope.$apply();
    }
  }, this);
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(drawInteraction, 'change:drawing', function (evt) {
    _this2.drawing = drawInteraction.getDrawing();
  }, this);
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(drawInteraction, 'change:valid', function (evt) {
    _this2.valid = drawInteraction.getValid();
  }, this);
  this.map.addInteraction(this.measure);
};

myModule.controller('gmfMeasueMobileBaseController', MeasueMobileBaseController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/lengthComponent.js":
/*!************************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/lengthComponent.js ***!
  \************************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_interaction_MeasureLengthMobile_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/interaction/MeasureLengthMobile.js */ "./src/interaction/MeasureLengthMobile.js");
/* harmony import */ var gmf_mobile_measure_baseComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/mobile/measure/baseComponent.js */ "./contribs/gmf/src/mobile/measure/baseComponent.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
mobileMeasureLenthComponent.$inject = ["gmfMobileMeasureLengthTemplateUrl"];

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileMeasureLength', [ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.value('gmfMobileMeasureLengthTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.gmfMobileMeasureLengthTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/measure/lengthComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/measure/lengthComponent', __webpack_require__(/*! ./baseComponent.html */ "./contribs/gmf/src/mobile/measure/baseComponent.html"));
}]);

function mobileMeasureLenthComponent(gmfMobileMeasureLengthTemplateUrl) {
  return {
    restrict: 'A',
    scope: {
      'active': '=gmfMobileMeasurelengthActive',
      'map': '=gmfMobileMeasurelengthMap'
    },
    controller: 'GmfMobileMeasureLengthController as ctrl',
    bindToController: true,
    templateUrl: gmfMobileMeasureLengthTemplateUrl,
    link: function link(scope, element, attrs, controller) {
      if (!controller) {
        throw new Error('Missing controller');
      }

      controller.init();
    }
  };
}

myModule.directive('gmfMobileMeasurelength', mobileMeasureLenthComponent);
var Controller = function (_MeasueMobileBaseCont) {
  Controller.$inject = ["$scope", "$filter", "gettextCatalog", "gmfMobileMeasureLengthOptions"];

  _inheritsLoose(Controller, _MeasueMobileBaseCont);

  function Controller($scope, $filter, gettextCatalog, gmfMobileMeasureLengthOptions) {
    var _this;

    _this = _MeasueMobileBaseCont.call(this, $scope, $filter, gettextCatalog) || this;
    _this.options = gmfMobileMeasureLengthOptions;
    _this.measure = null;
    return _this;
  }

  var _proto = Controller.prototype;

  _proto.init = function init() {
    this.measure = new ngeo_interaction_MeasureLengthMobile_js__WEBPACK_IMPORTED_MODULE_2__["default"](this.filter('ngeoUnitPrefix'), this.gettextCatalog, {
      precision: this.options.precision || 3,
      sketchStyle: Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_4__["buildStyle"])(this.options.sketchStyle)
    });

    _MeasueMobileBaseCont.prototype.init.call(this);
  };

  _proto.addPoint = function addPoint() {
    if (!this.drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    this.drawInteraction.addToDrawing();
  };

  _proto.clear = function clear() {
    if (!this.drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    this.drawInteraction.clearDrawing();
  };

  _proto.finish = function finish() {
    if (!this.drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    this.drawInteraction.finishDrawing();
  };

  _proto.deactivate = function deactivate() {
    this.active = false;
  };

  return Controller;
}(gmf_mobile_measure_baseComponent_js__WEBPACK_IMPORTED_MODULE_3__["MeasueMobileBaseController"]);
myModule.controller('GmfMobileMeasureLengthController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/module.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/module.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_mobile_measure_areaComponent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/mobile/measure/areaComponent.js */ "./contribs/gmf/src/mobile/measure/areaComponent.js");
/* harmony import */ var gmf_mobile_measure_lengthComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/mobile/measure/lengthComponent.js */ "./contribs/gmf/src/mobile/measure/lengthComponent.js");
/* harmony import */ var gmf_mobile_measure_pointComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/mobile/measure/pointComponent.js */ "./contribs/gmf/src/mobile/measure/pointComponent.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileMeasureModule', [gmf_mobile_measure_areaComponent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_mobile_measure_lengthComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_mobile_measure_pointComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/pointComponent.html":
/*!*************************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/pointComponent.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<a class="btn btn-default"\n   ng-if="ctrl.active"\n   ng-click="ctrl.deactivate()">\n     <span class="fa fa-times"></span>\n     {{\'Close\' | translate}}\n</a>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/mobile/measure/pointComponent.js":
/*!***********************************************************!*\
  !*** ./contribs/gmf/src/mobile/measure/pointComponent.js ***!
  \***********************************************************/
/*! exports provided: MobileMeasurePointController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MobileMeasurePointController", function() { return MobileMeasurePointController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_raster_RasterService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/raster/RasterService.js */ "./contribs/gmf/src/raster/RasterService.js");
/* harmony import */ var ngeo_interaction_MeasurePointMobile_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/interaction/MeasurePointMobile.js */ "./src/interaction/MeasurePointMobile.js");
/* harmony import */ var ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/debounce.js */ "./src/misc/debounce.js");
/* harmony import */ var ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/decorate.js */ "./src/misc/decorate.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/interaction/MobileDraw.js */ "./src/interaction/MobileDraw.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
MobileMeasurePointController.$inject = ["gettextCatalog", "$scope", "$filter", "gmfRaster", "ngeoDebounce", "gmfMobileMeasurePointOptions"];
mobileMeasurePointComponent.$inject = ["gmfMobileMeasurePointTemplateUrl"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }









var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileMeasurePoint', [gmf_raster_RasterService_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
myModule.value('gmfMobileMeasurePointTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.gmfMobileMeasurePointTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/measure/pointComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/measure/pointComponent', __webpack_require__(/*! ./pointComponent.html */ "./contribs/gmf/src/mobile/measure/pointComponent.html"));
}]);

function mobileMeasurePointComponent(gmfMobileMeasurePointTemplateUrl) {
  return {
    restrict: 'A',
    scope: {
      'active': '=gmfMobileMeasurepointActive',
      'map': '=gmfMobileMeasurepointMap'
    },
    controller: 'GmfMobileMeasurePointController as ctrl',
    bindToController: true,
    templateUrl: gmfMobileMeasurePointTemplateUrl,
    link: function link(scope, element, attrs, controller) {
      if (!controller) {
        throw new Error('Missing controller');
      }

      controller.init();
    }
  };
}

myModule.directive('gmfMobileMeasurepoint', mobileMeasurePointComponent);
function MobileMeasurePointController(gettextCatalog, $scope, $filter, gmfRaster, ngeoDebounce, gmfMobileMeasurePointOptions) {
  var _this = this;

  this.options = gmfMobileMeasurePointOptions;
  this.gmfRaster_ = gmfRaster;
  this.ngeoDebounce_ = ngeoDebounce;
  this.gettextCatalog_ = gettextCatalog;
  this.$filter_ = $filter;
  this.map = null;
  this.active = false;
  $scope.$watch(function () {
    return _this.active;
  }, function (newVal) {
    if (!_this.measure) {
      throw new Error('Missing measure');
    }

    _this.measure.setActive(newVal);

    _this.handleMeasureActiveChange_();
  });
  this.measure = null;
  this.drawInteraction = null;
  this.mapViewPropertyChangeEventKey_ = null;
}

MobileMeasurePointController.prototype.init = function () {
  this.measure = new ngeo_interaction_MeasurePointMobile_js__WEBPACK_IMPORTED_MODULE_2__["default"](this.$filter_('ngeoNumberCoordinates'), this.options.format, {
    decimals: this.options.decimals,
    sketchStyle: Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_7__["buildStyle"])(this.options.sketchStyle)
  });
  this.measure.setActive(this.active);
  Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_4__["interactionDecoration"])(this.measure);
  var drawInteraction = this.measure.getDrawInteraction();

  if (!(drawInteraction instanceof ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
    throw new Error('Wrong drawInteraction');
  }

  this.drawInteraction = drawInteraction;
  Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_4__["interactionDecoration"])(this.drawInteraction);

  if (!this.map) {
    throw new Error('Missing map');
  }

  this.map.addInteraction(this.measure);
};

MobileMeasurePointController.prototype.deactivate = function () {
  this.active = false;
};

MobileMeasurePointController.prototype.translate = function (str) {
  return this.gettextCatalog_.getString(str);
};

MobileMeasurePointController.prototype.handleMeasureActiveChange_ = function () {
  if (!this.map) {
    throw new Error('Missing map');
  }

  if (!this.measure) {
    throw new Error('Missing measure');
  }

  if (this.measure.getActive()) {
    var view = this.map.getView();
    this.mapViewPropertyChangeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(view, 'propertychange', this.ngeoDebounce_(this.getMeasure_.bind(this), 300, true), this);
    this.getMeasure_();
  } else if (this.mapViewPropertyChangeEventKey_) {
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"])(this.mapViewPropertyChangeEventKey_);
    this.mapViewPropertyChangeEventKey_ = null;
  }
};

MobileMeasurePointController.prototype.getMeasure_ = function () {
  var _this2 = this;

  if (!this.map) {
    throw new Error('Missing map');
  }

  var center = this.map.getView().getCenter();

  if (!Array.isArray(center)) {
    throw new Error('Wrong center');
  }

  if (!this.options.rasterLayers || this.options.rasterLayers.length === 0) {
    return;
  }

  var params = {
    'layers': this.options.rasterLayers.map(function (config) {
      return config.name;
    }).join(',')
  };
  this.gmfRaster_.getRaster(center, params).then(function (object) {
    if (!_this2.measure) {
      throw new Error('Missing measure');
    }

    var el = _this2.measure.getTooltipElement();

    var ctn = document.createElement('div');
    var className = 'gmf-mobile-measure-point';
    ctn.className = className;

    for (var _iterator = _createForOfIteratorHelperLoose(_this2.options.rasterLayers), _step; !(_step = _iterator()).done;) {
      var config = _step.value;
      var key = config.name;

      if (key in object) {
        var value = object[key];
        var childEl = document.createElement('div');
        childEl.className = "gmf-mobile-measure-point-" + key;
        var unit = config.unit || '';
        var decimals = config.decimals > 0 ? config.decimals : 0;
        value = _this2.$filter_('number')(value, decimals);
        childEl.innerHTML = [_this2.translate(key), ': ', value, ' ', unit].join('');
        ctn.appendChild(childEl);
      }
    }

    var previousCtn = el.getElementsByClassName(className);

    if (previousCtn[0]) {
      previousCtn[0].remove();
    }

    el.appendChild(ctn);
  });
};

myModule.controller('GmfMobileMeasurePointController', MobileMeasurePointController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/mobile/navigation/component.js":
/*!*********************************************************!*\
  !*** ./contribs/gmf/src/mobile/navigation/component.js ***!
  \*********************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileNav', []);
var CLASS_NAMES = {
  ACTIVE: 'gmf-mobile-nav-active',
  BACK: 'gmf-mobile-nav-back',
  GO_BACK: 'gmf-mobile-nav-go-back',
  SLIDE: 'gmf-mobile-nav-slide',
  SLIDE_OUT: 'gmf-mobile-nav-slide-out'
};

function mobileNavigationComponent() {
  return {
    restrict: 'A',
    controller: 'gmfMobileNavController as navCtrl',
    bindToController: true,
    scope: true,
    link: function link(scope, element, attrs, navCtrl) {
      if (!navCtrl) {
        throw new Error('Missing navCtrl');
      }

      navCtrl.init(element);
    }
  };
}

myModule.directive('gmfMobileNav', mobileNavigationComponent);
function Controller() {
  this.slid_ = [];
  this.active_ = null;
  this.header_ = null;
  this.backButton_ = null;
  this.back = this.back_.bind(this);
}
myModule.controller('gmfMobileNavController', Controller);

Controller.prototype.init = function (element) {
  var _this = this;

  this.active_ = $(element.find("." + CLASS_NAMES.ACTIVE + "." + CLASS_NAMES.SLIDE));
  this.header_ = $(element.find('> header'));
  this.backButton_ = $(element.find("header > ." + CLASS_NAMES.GO_BACK));

  var onClick = function onClick(evt) {
    var slideOut = $(evt.currentTarget).parents("." + CLASS_NAMES.SLIDE);

    if (slideOut.length != 1) {
      throw new Error('Wrong slideOut');
    }

    _this.slid_.push(slideOut);

    slideOut.addClass(CLASS_NAMES.SLIDE_OUT).removeClass(CLASS_NAMES.ACTIVE);
    var datatarget = $(evt.currentTarget).attr('data-target');

    if (!datatarget) {
      throw new Error('Missing datatarget');
    }

    var slideIn = $(datatarget);

    if (slideIn.length != 1) {
      throw new Error('Wrong slideIn');
    }

    slideIn.addClass(CLASS_NAMES.ACTIVE);

    _this.updateNavigationHeader_(slideIn, false);

    _this.active_ = slideIn;
  };

  element.find('[data-toggle=slide-in]').on({
    'click': onClick
  });
  this.backButton_.click(this.back.bind(this));
};

Controller.prototype.updateNavigationHeader_ = function (active, back) {
  if (!this.header_) {
    throw new Error('Missing header');
  }

  if (!this.backButton_) {
    throw new Error('Missing backButton');
  }

  this.header_.toggleClass(CLASS_NAMES.BACK, back);
  this.header_.find("nav:not(." + CLASS_NAMES.ACTIVE + " +)").remove();
  this.header_.find("nav." + CLASS_NAMES.ACTIVE).removeClass(CLASS_NAMES.ACTIVE).addClass(CLASS_NAMES.SLIDE_OUT);
  this.backButton_.toggleClass(CLASS_NAMES.ACTIVE, this.slid_.length > 0);
  var nav = $('<nav>');
  nav.append($('<span>', {
    text: active.attr('data-header-title')
  }));
  this.header_.append(nav);
  window.setTimeout(function () {
    nav.css('display', 'none');
    nav.offset();
    nav.css('display', '');
    window.setTimeout(function () {
      nav.position();
      nav.addClass(CLASS_NAMES.ACTIVE);
    }, 0);
  }, 0);
};

Controller.prototype.back_ = function () {
  if (!this.active_) {
    throw new Error('Missing active');
  }

  if (this.slid_.length <= 0) {
    return;
  }

  this.active_.removeClass(CLASS_NAMES.ACTIVE);
  var slideBack = this.slid_.pop();

  if (!slideBack) {
    throw new Error('Missing slideBack');
  }

  slideBack.addClass(CLASS_NAMES.ACTIVE).removeClass(CLASS_NAMES.SLIDE_OUT);
  this.updateNavigationHeader_(slideBack, true);
  this.active_ = slideBack;
};

Controller.prototype.backIfActive = function (element) {
  if (this.active_ !== null && this.active_.is(element)) {
    this.back_();
  }
};

function mobileNavigationBackComponent() {
  return {
    require: '^^gmfMobileNav',
    restrict: 'A',
    scope: false,
    link: function link(scope, element, attrs, navCtrl) {
      scope.$watch(attrs.gmfMobileNavBack, function (newVal, oldVal) {
        if (!navCtrl) {
          throw new Error('Missing navCtrl');
        }

        if (newVal === true) {
          navCtrl.backIfActive(element[0]);
        }
      });
    }
  };
}

myModule.directive('gmfMobileNavBack', mobileNavigationBackComponent);

function mobileNavigationBackOnClickComponent() {
  return {
    require: '^^gmfMobileNav',
    restrict: 'A',
    scope: false,
    link: function link(scope, element, attrs, navCtrl) {
      element.on('click', function () {
        if (!navCtrl) {
          throw new Error('Missing navCtrl');
        }

        navCtrl.backIfActive(element[0]);
      });
    }
  };
}

myModule.directive('gmfMobileNavBackOnClick', mobileNavigationBackOnClickComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/mobile/navigation/module.js":
/*!******************************************************!*\
  !*** ./contribs/gmf/src/mobile/navigation/module.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_mobile_navigation_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/mobile/navigation/component.js */ "./contribs/gmf/src/mobile/navigation/component.js");


/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfMobileNavigationModule', [gmf_mobile_navigation_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/permalink/Permalink.js":
/*!*************************************************!*\
  !*** ./contribs/gmf/src/permalink/Permalink.js ***!
  \*************************************************/
/*! exports provided: OpenLayersLayerProperties, PermalinkService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenLayersLayerProperties", function() { return OpenLayersLayerProperties; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PermalinkService", function() { return PermalinkService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/index.js */ "./contribs/gmf/src/index.js");
/* harmony import */ var gmf_authentication_Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/authentication/Service.js */ "./contribs/gmf/src/authentication/Service.js");
/* harmony import */ var gmf_datasource_LayerBeingSwipe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/datasource/LayerBeingSwipe.js */ "./contribs/gmf/src/datasource/LayerBeingSwipe.js");
/* harmony import */ var gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/theme/Manager.js */ "./contribs/gmf/src/theme/Manager.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_Popover_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/Popover.js */ "./src/Popover.js");
/* harmony import */ var ngeo_draw_features_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/draw/features.js */ "./src/draw/features.js");
/* harmony import */ var gmf_datasource_Manager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! gmf/datasource/Manager.js */ "./contribs/gmf/src/datasource/Manager.js");
/* harmony import */ var ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/datasource/Group.js */ "./src/datasource/Group.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ngeo_olcs_constants_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/olcs/constants.js */ "./src/olcs/constants.js");
/* harmony import */ var ngeo_format_FeatureHash_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/format/FeatureHash.js */ "./src/format/FeatureHash.js");
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ngeo/misc/debounce.js */ "./src/misc/debounce.js");
/* harmony import */ var ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ngeo/misc/EventHelper.js */ "./src/misc/EventHelper.js");
/* harmony import */ var ngeo_statemanager_module_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ngeo/statemanager/module.js */ "./src/statemanager/module.js");
/* harmony import */ var ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ngeo/statemanager/Service.js */ "./src/statemanager/Service.js");
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ol/geom/MultiPoint.js */ "./node_modules/ol/geom/MultiPoint.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
PermalinkService.$inject = ["$q", "$timeout", "$rootScope", "$injector", "ngeoDebounce", "gettextCatalog", "ngeoEventHelper", "ngeoStateManager", "ngeoLocation", "gmfLayerBeingSwipe", "gmfPermalinkOptions", "gmfDataSourcesManager", "ngeoWMSTime"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }





























var OpenLayersLayerProperties = {
  OPACITY: 'opacity'
};
var ExtDSSeparator = {
  LIST: ',',
  NAMES: ';'
};
var ParamPrefix = {
  DIMENSIONS: 'dim_',
  TREE_ENABLE: 'tree_enable_',
  TREE_GROUP_LAYERS: 'tree_group_layers_',
  TREE_GROUP_OPACITY: 'tree_group_opacity_',
  TREE_OPACITY: 'tree_opacity_',
  TREE_TIME: 'tree_time_',
  WFS: 'wfs_'
};
function PermalinkService($q, $timeout, $rootScope, $injector, ngeoDebounce, gettextCatalog, ngeoEventHelper, ngeoStateManager, ngeoLocation, gmfLayerBeingSwipe, gmfPermalinkOptions, gmfDataSourcesManager, ngeoWMSTime) {
  var _this = this;

  this.q_ = $q;
  this.rootScope_ = $rootScope;
  this.$timeout_ = $timeout;
  this.mapViewPropertyChangeEventKey_ = null;
  this.ngeoDebounce_ = ngeoDebounce;
  this.ngeoEventHelper_ = ngeoEventHelper;
  this.ngeoStateManager_ = ngeoStateManager;
  this.gmfDataSourcesManager_ = gmfDataSourcesManager;
  this.ngeoWMSTime_ = ngeoWMSTime;
  this.ngeoFeatures_ = $injector.has('ngeoFeatures') ? $injector.get('ngeoFeatures') : null;
  this.ngeoBackgroundLayerMgr_ = $injector.has('ngeoBackgroundLayerMgr') ? $injector.get('ngeoBackgroundLayerMgr') : null;
  this.gmfLayerBeingSwipe_ = gmfLayerBeingSwipe;
  var ngeoFeatureOverlayMgr = $injector.has('ngeoFeatureOverlayMgr') ? $injector.get('ngeoFeatureOverlayMgr') : null;
  this.featureOverlay_ = ngeoFeatureOverlayMgr ? ngeoFeatureOverlayMgr.getFeatureOverlay() : null;
  this.featureHelper_ = $injector.has('ngeoFeatureHelper') ? $injector.get('ngeoFeatureHelper') : null;
  this.ngeoQuerent_ = $injector.has('ngeoQuerent') ? $injector.get('ngeoQuerent') : null;

  if (gmfPermalinkOptions.useLocalStorage === true) {
    this.ngeoStateManager_.setUseLocalStorage(true);
  }

  this.crosshairEnabledByDefault_ = !!gmfPermalinkOptions.crosshairEnabledByDefault;
  this.pointRecenterZoom_ = gmfPermalinkOptions.pointRecenterZoom;
  this.gmfExternalDataSourcesManager_ = $injector.has('gmfExternalDataSourcesManager') ? $injector.get('gmfExternalDataSourcesManager') : null;
  this.gmfThemes_ = $injector.has('gmfThemes') ? $injector.get('gmfThemes') : null;
  this.gmfObjectEditingManager_ = $injector.has('gmfObjectEditingManager') ? $injector.get('gmfObjectEditingManager') : null;
  this.gmfThemeManager_ = $injector.has('gmfThemeManager') ? $injector.get('gmfThemeManager') : null;
  this.defaultTheme_ = $injector.has('defaultTheme') ? $injector.get('defaultTheme') : undefined;
  this.gmfTreeManager_ = $injector.has('gmfTreeManager') ? $injector.get('gmfTreeManager') : null;
  this.ngeoLocation_ = ngeoLocation;
  this.ngeoWfsPermalink_ = $injector.has('ngeoWfsPermalink') ? $injector.get('ngeoWfsPermalink') : null;
  this.gmfUser_ = $injector.has('gmfUser') ? $injector.get('gmfUser') : null;
  this.map_ = null;
  this.ngeoAutoProjection_ = $injector.has('ngeoAutoProjection') ? $injector.get('ngeoAutoProjection') : null;
  this.listenerKeys_ = [];
  this.sourceProjections_ = null;

  if (gmfPermalinkOptions.projectionCodes !== undefined && this.ngeoAutoProjection_) {
    var projections = this.ngeoAutoProjection_.getProjectionList(gmfPermalinkOptions.projectionCodes);

    if (projections.length > 0) {
      this.sourceProjections_ = projections;
    }
  }

  this.crosshairFeature_ = null;
  this.crosshairStyle_ = Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_27__["buildStyle"])(gmfPermalinkOptions.crosshairStyle);
  this.mapTooltip_ = null;
  this.featureHashFormat_ = new ngeo_format_FeatureHash_js__WEBPACK_IMPORTED_MODULE_12__["default"]({
    setStyle: false,
    encodeStyles: false,
    propertiesType: {
      'fillColor': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].COLOR,
      'fillOpacity': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].OPACITY,
      'fontColor': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].COLOR,
      'fontSize': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].SIZE,
      'isBox': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].IS_RECTANGLE,
      'isCircle': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].IS_CIRCLE,
      'isLabel': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].IS_TEXT,
      'name': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].NAME,
      'pointRadius': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].SIZE,
      'showLabel': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].SHOW_LABEL,
      'showMeasure': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].SHOW_MEASURE,
      'strokeColor': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].COLOR,
      'strokeWidth': ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_13__["default"].STROKE
    },
    defaultValues: {
      'name': function name(feature) {
        var geometry = feature.getGeometry();

        if (!geometry) {
          throw new Error('Missing geometry');
        }

        return gettextCatalog.getString(geometry.getType());
      },
      'fillOpacity': function fillOpacity() {
        return 0.5;
      },
      'showLabel': function showLabel() {
        return false;
      },
      'showMeasure': function showMeasure() {
        return false;
      }
    }
  });

  if (this.ngeoBackgroundLayerMgr_) {
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(this.ngeoBackgroundLayerMgr_, 'change', this.handleBackgroundLayerManagerChange_, this);
  }

  this.rootScope_.$on('ngeo-layertree-state', function (event, treeCtrl, firstParent) {
    var newState = {};

    if (firstParent.node.mixed) {
      var state = treeCtrl.getState();

      if (state !== 'on' && state !== 'off') {
        throw new Error('Wrong state');
      }

      var visible = state === 'on';
      treeCtrl.traverseDepthFirst(function (ctrl) {
        var groupNode = ctrl.node;

        if (groupNode.children === undefined) {
          var param = ParamPrefix.TREE_ENABLE + ctrl.node.name;
          newState[param] = "" + visible;
        }
      });
    } else {
      var gmfLayerNames = [];
      firstParent.traverseDepthFirst(function (ctrl) {
        var groupNode = ctrl.node;

        if (groupNode.children === undefined && ctrl.getState() === 'on') {
          gmfLayerNames.push(ctrl.node.name);
        }
      });
      newState["" + ParamPrefix.TREE_GROUP_LAYERS + firstParent.node.name] = gmfLayerNames.join(',');
    }

    _this.ngeoStateManager_.updateState(newState);
  });
  this.rootScope_.$on('ngeo-layertree-opacity', function (event, treeCtrl) {
    var newState = {};
    var opacity = treeCtrl.layer.getOpacity();
    var stateName = "" + (treeCtrl.parent.node.mixed ? ParamPrefix.TREE_OPACITY : ParamPrefix.TREE_GROUP_OPACITY) + treeCtrl.node.name;
    newState[stateName] = opacity;

    _this.ngeoStateManager_.updateState(newState);
  });
  var features = this.getFeatures();

  if (this.ngeoFeatures_) {
    features.forEach(function (feature) {
      if (_this.featureHelper_) {
        _this.featureHelper_.setStyle(feature);
      }

      _this.addNgeoFeature_(feature);
    });
    this.ngeoFeatures_.extend(features);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(this.ngeoFeatures_, 'add', this.handleNgeoFeaturesAdd_, this);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(this.ngeoFeatures_, 'remove', this.handleNgeoFeaturesRemove_, this);
  }

  if (this.featureHelper_) {
    this.rootScope_.$on('$localeChangeSuccess', function () {
      features.forEach(function (feature) {
        if (!_this.featureHelper_) {
          throw new Error('Missing featureHelper');
        }

        _this.featureHelper_.setStyle(feature);
      });
    });
  }

  if (this.gmfThemeManager_) {
    this.rootScope_.$on(gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_4__["ThemeEventType"].THEME_NAME_SET, function (event, name) {
      _this.setThemeInUrl_(name);
    });
  }

  this.rootScope_.$watch(function () {
    return _this.gmfLayerBeingSwipe_.layer;
  }, this.handleLayerBeingSwipeChange_.bind(this));
  this.rootScope_.$watch(function () {
    return _this.gmfLayerBeingSwipe_.swipeValue;
  }, this.handleMapSwipeValue_.bind(this));
  this.setExternalDataSourcesStatePromise_ = null;

  if (this.ngeoQuerent_ && this.gmfExternalDataSourcesManager_) {
    this.initExternalDataSources_().then(function () {
      if (!_this.gmfExternalDataSourcesManager_) {
        throw new Error('Missing gmfExternalDataSourcesManager');
      }

      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(_this.gmfExternalDataSourcesManager_.wmsGroupsCollection, 'add', _this.handleExternalDSGroupCollectionAdd_, _this);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(_this.gmfExternalDataSourcesManager_.wmsGroupsCollection, 'remove', _this.handleExternalDSGroupCollectionRemove_, _this);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(_this.gmfExternalDataSourcesManager_.wmtsGroupsCollection, 'add', _this.handleExternalDSGroupCollectionAdd_, _this);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(_this.gmfExternalDataSourcesManager_.wmtsGroupsCollection, 'remove', _this.handleExternalDSGroupCollectionRemove_, _this);

      for (var _iterator = _createForOfIteratorHelperLoose(_this.gmfExternalDataSourcesManager_.wmsGroups), _step; !(_step = _iterator()).done;) {
        var wmsGroup = _step.value;

        _this.registerExternalDSGroup_(wmsGroup);
      }

      for (var _iterator2 = _createForOfIteratorHelperLoose(_this.gmfExternalDataSourcesManager_.wmtsGroups), _step2; !(_step2 = _iterator2()).done;) {
        var wmtsGroup = _step2.value;

        _this.registerExternalDSGroup_(wmtsGroup);
      }
    });
  }

  this.initLayers_();
}

PermalinkService.prototype.handleLayerBeingSwipeChange_ = function (layer, oldLayer) {
  if (layer === oldLayer) {
    return;
  }

  if (layer) {
    var object = {};
    var mapSwipeValue = this.gmfLayerBeingSwipe_.swipeValue;

    if (mapSwipeValue === null) {
      this.gmfLayerBeingSwipe_.swipeValue = 0.5;
    }

    var dataSourceId = layer.get('dataSourceId');
    object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE] = dataSourceId;
    object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE_VALUE] = "" + mapSwipeValue;
    this.ngeoStateManager_.updateState(object);
  } else {
    this.ngeoStateManager_.deleteParam(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE);
    this.ngeoStateManager_.deleteParam(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE_VALUE);
  }
};

PermalinkService.prototype.handleMapSwipeValue_ = function () {
  var mapSwipeValue = this.gmfLayerBeingSwipe_.swipeValue;
  var object = {};

  if (mapSwipeValue) {
    object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE_VALUE] = "" + mapSwipeValue;
    this.ngeoStateManager_.updateState(object);
  }
};

PermalinkService.prototype.getMapCenter = function () {
  var x = this.ngeoStateManager_.getInitialNumberValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_X);
  var y = this.ngeoStateManager_.getInitialNumberValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_Y);

  if (x !== undefined && y !== undefined && !isNaN(x) && !isNaN(y)) {
    var center = [x, y];

    if (this.sourceProjections_ !== null && this.ngeoAutoProjection_) {
      if (!this.map_) {
        throw new Error('Missing map');
      }

      var targetProjection = this.map_.getView().getProjection();
      var reprojectedCenter = this.ngeoAutoProjection_.tryProjectionsWithInversion(center, targetProjection.getExtent(), targetProjection, this.sourceProjections_);

      if (reprojectedCenter) {
        return reprojectedCenter;
      }
    }

    return center;
  }

  return null;
};

PermalinkService.prototype.getMapZoom = function () {
  var zoom = this.ngeoStateManager_.getInitialNumberValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_Z);
  return zoom !== undefined && isNaN(zoom) ? undefined : zoom;
};

PermalinkService.prototype.getMapCrosshair = function () {
  var crosshair = this.ngeoStateManager_.getInitialBooleanValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_CROSSHAIR);
  return crosshair === undefined ? this.crosshairEnabledByDefault_ : crosshair;
};

PermalinkService.prototype.setMapCrosshair = function (opt_center) {
  if (!this.map_) {
    throw new Error('Missing map');
  }

  if (!this.featureOverlay_) {
    throw new Error('Missing featureOverlay');
  }

  var crosshairCoordinate;

  if (opt_center) {
    crosshairCoordinate = opt_center;
  } else {
    crosshairCoordinate = this.map_.getView().getCenter();
  }

  if (!Array.isArray(crosshairCoordinate)) {
    throw new Error('Wrong crosshairCoordinate');
  }

  if (this.crosshairFeature_) {
    this.featureOverlay_.removeFeature(this.crosshairFeature_);
  }

  this.crosshairFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_22__["default"](new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_24__["default"](crosshairCoordinate));
  this.crosshairFeature_.setStyle(this.crosshairStyle_);
  this.featureOverlay_.addFeature(this.crosshairFeature_);
};

PermalinkService.prototype.getMapTooltip = function () {
  return this.ngeoStateManager_.getInitialStringValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_TOOLTIP);
};

PermalinkService.prototype.setMapTooltip = function (tooltipText, opt_center) {
  if (!this.map_) {
    throw new Error('Missing map');
  }

  var tooltipPosition;

  if (opt_center) {
    tooltipPosition = opt_center;
  } else {
    var center = this.map_.getView().getCenter();

    if (!center) {
      throw new Error('Missing center');
    }

    tooltipPosition = center;
  }

  if (!Array.isArray(tooltipPosition)) {
    throw new Error('Wrong tooltipPosition type');
  }

  var div = $('<div/>', {
    'class': 'gmf-permalink-tooltip',
    'text': tooltipText
  })[0];

  if (this.mapTooltip_ !== null) {
    this.map_.removeOverlay(this.mapTooltip_);
  }

  this.mapTooltip_ = new ngeo_Popover_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
    element: div,
    position: tooltipPosition
  });
  this.map_.addOverlay(this.mapTooltip_);
};

PermalinkService.prototype.getFeatures = function () {
  var f = this.ngeoStateManager_.getInitialStringValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].FEATURES);

  if (f !== undefined && f !== '') {
    return this.featureHashFormat_.readFeatures(f);
  }

  return [];
};

PermalinkService.prototype.setDimensions = function (dimensions) {
  var _this2 = this;

  var keys = this.ngeoLocation_.getParamKeysWithPrefix(ParamPrefix.DIMENSIONS);

  for (var _iterator3 = _createForOfIteratorHelperLoose(keys), _step3; !(_step3 = _iterator3()).done;) {
    var key = _step3.value;
    var value = this.ngeoLocation_.getParam(key);

    if (!value) {
      throw new Error('Missing value');
    }

    dimensions[key.slice(ParamPrefix.DIMENSIONS.length)] = value;
  }

  this.rootScope_.$watchCollection(function () {
    return dimensions;
  }, function (dimensions) {
    var params = {};

    for (var key in dimensions) {
      params[ParamPrefix.DIMENSIONS + key] = dimensions[key];
    }

    _this2.ngeoLocation_.updateParams(params);
  });
};

PermalinkService.prototype.setMap = function (map) {
  var _this3 = this;

  if (map === this.map_) {
    return;
  }

  if (this.map_) {
    this.unregisterMap_();
    this.map_ = null;
  }

  if (map) {
    this.map_ = map;

    if (this.gmfObjectEditingManager_) {
      this.gmfObjectEditingManager_.getFeature().then(function (feature) {
        _this3.registerMap_(map, feature);
      });
    } else {
      this.registerMap_(map, null);
    }
  }
};

PermalinkService.prototype.registerMap_ = function (map, oeFeature) {
  var _this4 = this;

  var view = map.getView();
  var center;
  var zoom;
  var geom = typeof oeFeature !== 'undefined' && oeFeature !== null ? oeFeature.getGeometry() : undefined;

  if (geom) {
    var size = map.getSize();

    if (!size) {
      throw new Error('Missing size');
    }

    var maxZoom;

    if (geom instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_24__["default"] || geom instanceof ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_23__["default"]) {
      maxZoom = this.pointRecenterZoom_;
    }

    var options = {
      size: size
    };

    if (maxZoom) {
      options.maxZoom = maxZoom;
    }

    view.fit(geom.getExtent(), options);
  } else {
    var enabled3d = this.ngeoStateManager_.getInitialBooleanValue(ngeo_olcs_constants_js__WEBPACK_IMPORTED_MODULE_11__["Permalink3dParam"].ENABLED);

    if (!enabled3d) {
      center = this.getMapCenter();

      if (center) {
        view.setCenter(center);
      }

      zoom = this.getMapZoom();

      if (zoom !== undefined) {
        view.setZoom(zoom);
      }
    }
  }

  this.mapViewPropertyChangeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(view, 'propertychange', this.ngeoDebounce_(function () {
    var center = view.getCenter();

    if (!center) {
      throw new Error('Missing center');
    }

    var zoom = view.getZoom();
    var object = {};
    object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_X] = "" + Math.round(center[0]);
    object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_Y] = "" + Math.round(center[1]);
    object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_Z] = "" + zoom;

    _this4.ngeoStateManager_.updateState(object);
  }, 300, true), this);

  if (this.getMapCrosshair() && this.featureOverlay_) {
    this.setMapCrosshair(center);
  }

  var tooltipText = this.getMapTooltip();

  if (tooltipText) {
    this.setMapTooltip(tooltipText, center);
  }

  var wfsPermalinkData = this.getWfsPermalinkData_();

  if (wfsPermalinkData !== null && this.ngeoWfsPermalink_) {
    this.ngeoWfsPermalink_.issue(wfsPermalinkData, map, zoom);
  }
};

PermalinkService.prototype.unregisterMap_ = function () {
  if (!this.mapViewPropertyChangeEventKey_) {
    throw new Error('Missing mapViewPropertyChangeEventKey');
  }

  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["unlistenByKey"])(this.mapViewPropertyChangeEventKey_);
  this.mapViewPropertyChangeEventKey_ = null;
};

PermalinkService.prototype.getBackgroundLayer = function (layers) {
  var layerName = this.ngeoStateManager_.getInitialStringValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].BG_LAYER);

  if (layerName !== undefined) {
    for (var _iterator4 = _createForOfIteratorHelperLoose(layers), _step4; !(_step4 = _iterator4()).done;) {
      var layer = _step4.value;

      if (layer.get('label') === layerName) {
        return layer;
      }
    }
  }

  return null;
};

PermalinkService.prototype.getBackgroundLayerOpacity = function () {
  var opacity_ = this.ngeoStateManager_.getInitialNumberValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].BG_LAYER_OPACITY);
  return opacity_ === undefined ? null : opacity_ / 100;
};

PermalinkService.prototype.handleBackgroundLayerManagerChange_ = function () {
  var _this5 = this;

  if (!this.map_ || !this.ngeoBackgroundLayerMgr_) {
    return;
  }

  var layer = this.ngeoBackgroundLayerMgr_.get(this.map_);

  if (!layer) {
    throw new Error('Missing layer');
  }

  var layerName = layer.get('label');

  if (typeof layerName != 'string') {
    throw new Error('Wrong layerName type');
  }

  var object = {};
  object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].BG_LAYER] = layerName;
  this.ngeoStateManager_.updateState(object);
  var backgroundLayer = this.ngeoBackgroundLayerMgr_.getOpacityBgLayer(this.map_);

  if (backgroundLayer) {
    var opacity = this.getBackgroundLayerOpacity();

    if (opacity !== null) {
      backgroundLayer.setOpacity(opacity);
    } else {
      var _opacity = backgroundLayer.getOpacity();

      var _object = {};
      _object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].BG_LAYER_OPACITY] = "" + _opacity * 100;
      this.ngeoStateManager_.updateState(_object);
    }

    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(backgroundLayer, 'change:opacity', function () {
      var opacity = backgroundLayer.getOpacity();
      var object = {};
      object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].BG_LAYER_OPACITY] = "" + opacity * 100;

      _this5.ngeoStateManager_.updateState(object);
    });
  }
};

PermalinkService.prototype.refreshFirstLevelGroups = function () {
  if (!this.gmfTreeManager_) {
    return;
  }

  if (!this.gmfTreeManager_.rootCtrl) {
    throw new Error('Missing gmfTreeManager_.rootCtrl');
  }

  var groupNode = this.gmfTreeManager_.rootCtrl.node;
  var groupNodes = groupNode.children;
  var orderedNames = groupNodes ? groupNodes.map(function (node) {
    return node.name;
  }) : [];
  var object = {};
  object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].TREE_GROUPS] = orderedNames.join(',');
  this.ngeoStateManager_.updateState(object);
};

PermalinkService.prototype.refreshLayerTime = function (treeCtrl, time) {
  var newState = {};
  var stateName = "" + ParamPrefix.TREE_TIME + treeCtrl.node.name;
  var timenode = treeCtrl.node;
  var timeParam = this.ngeoWMSTime_.formatWMSTimeParam(timenode.time, time);
  newState[stateName] = timeParam;
  this.ngeoStateManager_.updateState(newState);
};

PermalinkService.prototype.themeInUrl_ = function (pathElements) {
  var indexOfTheme = pathElements.indexOf('theme');
  return indexOfTheme != -1 && indexOfTheme == pathElements.length - 2;
};

PermalinkService.prototype.setThemeInUrl_ = function (themeName) {
  var path = this.ngeoLocation_.getPath();

  if (!path) {
    throw new Error('Missing path');
  }

  if (themeName) {
    var pathElements = path.split('/');

    if (pathElements.length <= 1) {
      throw new Error('Wrong pathElements');
    }

    if (pathElements[pathElements.length - 1] === '') {
      pathElements.splice(pathElements.length - 1);
    }

    if (this.themeInUrl_(pathElements)) {
      pathElements[pathElements.length - 1] = themeName;
    } else {
      pathElements.push('theme', themeName);
    }

    this.ngeoLocation_.setPath(pathElements.join('/'));
  }
};

PermalinkService.prototype.defaultThemeName = function () {
  var path = this.ngeoLocation_.getPath();

  if (!path) {
    throw new Error('Missing path');
  }

  var pathElements = path.split('/');

  if (this.themeInUrl_(pathElements)) {
    return decodeURI(pathElements[pathElements.length - 1]);
  }

  var tn = this.ngeoStateManager_.getInitialStringValue('theme');

  if (tn) {
    return tn;
  }

  var defaultTheme = this.defaultThemeNameFromFunctionalities();

  if (defaultTheme !== null) {
    return defaultTheme;
  }

  if (this.defaultTheme_) {
    return this.defaultTheme_;
  }

  return null;
};

PermalinkService.prototype.defaultThemeNameFromFunctionalities = function () {
  if (!this.gmfUser_) {
    return null;
  }

  var functionalities = this.gmfUser_.functionalities;

  if (functionalities && 'default_theme' in functionalities) {
    var defaultTheme = functionalities.default_theme;

    if (defaultTheme.length > 0) {
      return defaultTheme[0];
    }
  }

  return null;
};

PermalinkService.prototype.initLayers_ = function () {
  var _this6 = this;

  var initialUri = window.location.href;
  var authenticationRequired = false;

  if (!this.gmfThemes_) {
    return;
  }

  this.gmfThemes_.getThemesObject().then(function (themes) {
    var themeName = _this6.defaultThemeName();

    if (_this6.gmfThemeManager_) {
      _this6.gmfThemeManager_.setThemeName(_this6.gmfThemeManager_.modeFlush ? themeName : '');
    }

    var firstLevelGroups = [];
    var theme;

    var groupsNames = _this6.ngeoLocation_.getParam(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].TREE_GROUPS);

    if (groupsNames === undefined) {
      theme = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["findThemeByName"])(themes, themeName);

      if (theme) {
        firstLevelGroups = theme.children;
      }
    } else {
      groupsNames.split(',').forEach(function (groupName) {
        var group = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["findGroupByName"])(themes, groupName);

        if (group) {
          firstLevelGroups.push(group);
        } else {
          authenticationRequired = true;
        }
      });
    }

    if (_this6.gmfTreeManager_) {
      _this6.gmfTreeManager_.setFirstLevelGroups(firstLevelGroups);
    }

    _this6.$timeout_(function () {
      if (!_this6.gmfTreeManager_ || !_this6.gmfTreeManager_.rootCtrl) {
        if (authenticationRequired && _this6.gmfUser_ && _this6.gmfUser_.roles === null) {
          _this6.rootScope_.$broadcast('authenticationrequired', {
            url: initialUri
          });
        }

        return;
      }

      var layerBeingSwipeValue = _this6.ngeoStateManager_.getInitialNumberValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE);

      var mapSwipeValue = _this6.ngeoStateManager_.getInitialNumberValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].MAP_SWIPE_VALUE);

      var visitor = function visitor(treeCtrl) {
        if (treeCtrl.isRoot) {
          return undefined;
        }

        var groupNode = treeCtrl.node;
        var parentGroupNode = treeCtrl.parent.node;

        var opacity = _this6.ngeoStateManager_.getInitialNumberValue((parentGroupNode.mixed ? ParamPrefix.TREE_OPACITY : ParamPrefix.TREE_GROUP_OPACITY) + treeCtrl.node.name);

        if (treeCtrl.layer) {
          if (opacity !== undefined) {
            treeCtrl.layer.setOpacity(opacity);
          }

          if (layerBeingSwipeValue !== null && layerBeingSwipeValue !== undefined && treeCtrl.layer.get('dataSourceId') === layerBeingSwipeValue) {
            if (mapSwipeValue !== null && mapSwipeValue !== undefined) {
              _this6.gmfLayerBeingSwipe_.swipeValue = mapSwipeValue;
            }

            _this6.gmfLayerBeingSwipe_.layer = treeCtrl.layer;
          }
        }

        var timenode = treeCtrl.node;

        if (timenode && timenode.time) {
          _this6.setNodeTime_(treeCtrl);
        }

        if (treeCtrl.parent.node && parentGroupNode.mixed && groupNode.children == undefined) {
          var enable = _this6.ngeoStateManager_.getInitialBooleanValue(ParamPrefix.TREE_ENABLE + treeCtrl.node.name);

          if (enable !== undefined) {
            treeCtrl.setState(enable ? 'on' : 'off', false);
          }
        } else if (!groupNode.mixed && treeCtrl.depth == 1) {
          var groupLayers = _this6.ngeoStateManager_.getInitialStringValue(ParamPrefix.TREE_GROUP_LAYERS + treeCtrl.node.name);

          if (groupLayers !== undefined) {
            var groupLayersArray = groupLayers == '' ? [] : groupLayers.split(',');

            var _visitor = function _visitor(treeCtrl) {
              var groupNode = treeCtrl.node;

              if (groupNode.children === undefined) {
                var _enable = groupLayersArray.includes(treeCtrl.node.name);

                if (_enable) {
                  groupLayersArray.splice(groupLayersArray.indexOf(treeCtrl.node.name), 1);
                }

                treeCtrl.setState(_enable ? 'on' : 'off', false);
              }

              return undefined;
            };

            treeCtrl.traverseDepthFirst(_visitor);

            if (groupLayersArray.length > 0) {
              authenticationRequired = true;
            }
          }
        }
      };

      _this6.gmfTreeManager_.rootCtrl.traverseDepthFirst(visitor);

      var firstParents = _this6.gmfTreeManager_.rootCtrl.children;
      firstParents.forEach(function (firstParent) {
        firstParent.traverseDepthFirst(function (treeCtrl) {
          if (treeCtrl.getState() !== 'indeterminate') {
            _this6.rootScope_.$broadcast('ngeo-layertree-state', treeCtrl, firstParent);

            return ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_19__["LayertreeVisitorDecision"].STOP;
          }
        });
      });

      if (authenticationRequired && _this6.gmfUser_ && _this6.gmfUser_.roles === null) {
        _this6.rootScope_.$broadcast('authenticationrequired', {
          url: initialUri
        });
      }
    });
  });
};

PermalinkService.prototype.handleNgeoFeaturesAdd_ = function (event) {
  if (event instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_26__["CollectionEvent"]) {
    var feature = event.element;

    if (!(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_22__["default"])) {
      throw new Error('Wrong feature type');
    }

    this.addNgeoFeature_(feature);
  }
};

PermalinkService.prototype.handleNgeoFeaturesRemove_ = function (event) {
  if (event instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_26__["CollectionEvent"]) {
    var feature = event.element;

    if (!(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_22__["default"])) {
      throw new Error('Wrong feature type');
    }

    this.removeNgeoFeature_(feature);
  }
};

PermalinkService.prototype.addNgeoFeature_ = function (feature) {
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_20__["getUid"])(feature);
  this.ngeoEventHelper_.addListenerKey(uid, Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(feature, 'change', this.ngeoDebounce_(this.handleNgeoFeaturesChange_, 250, true), this));
};

PermalinkService.prototype.removeNgeoFeature_ = function (feature) {
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_20__["getUid"])(feature);
  this.ngeoEventHelper_.clearListenerKey(uid);
  this.handleNgeoFeaturesChange_();
};

PermalinkService.prototype.handleNgeoFeaturesChange_ = function () {
  if (!this.ngeoFeatures_) {
    return;
  }

  var features = this.ngeoFeatures_.getArray();
  var data = this.featureHashFormat_.writeFeatures(features);
  var object = {};
  object[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].FEATURES] = data;
  this.ngeoStateManager_.updateState(object);
};

PermalinkService.prototype.getWfsPermalinkData_ = function () {
  var wfsLayer = this.ngeoLocation_.getParam(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].WFS_LAYER);

  if (!wfsLayer) {
    return null;
  }

  var numGroups = this.ngeoLocation_.getParamAsInt(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].WFS_NGROUPS);
  var paramKeys = this.ngeoLocation_.getParamKeysWithPrefix(ParamPrefix.WFS);
  var filterGroups = [];
  var filterGroup;

  if (numGroups === undefined) {
    filterGroup = this.createFilterGroup_(ParamPrefix.WFS, paramKeys);

    if (filterGroup !== null) {
      filterGroups.push(filterGroup);
    }
  } else {
    for (var i = 0; i < numGroups; i++) {
      filterGroup = this.createFilterGroup_("" + ParamPrefix.WFS + i + "_", paramKeys);

      if (filterGroup !== null) {
        filterGroups.push(filterGroup);
      }
    }
  }

  if (filterGroups.length == 0) {
    return null;
  }

  var showFeaturesParam = this.ngeoLocation_.getParam(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].WFS_SHOW_FEATURES);
  var showFeatures = !(showFeaturesParam === '0' || showFeaturesParam === 'false');
  return {
    wfsType: wfsLayer,
    showFeatures: showFeatures,
    filterGroups: filterGroups
  };
};

PermalinkService.prototype.createFilterGroup_ = function (prefix, paramKeys) {
  var _this7 = this;

  var filters = [];
  paramKeys.forEach(function (paramKey) {
    if (paramKey == gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].WFS_LAYER || paramKey == gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].WFS_SHOW_FEATURES || paramKey == gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].WFS_NGROUPS || !paramKey.startsWith(prefix)) {
      return;
    }

    var value = _this7.ngeoLocation_.getParam(paramKey);

    if (!value) {
      return;
    }

    var condition = value.split(',');
    var filter = {
      property: paramKey.replace(prefix, ''),
      condition: condition
    };
    filters.push(filter);
  });
  return filters.length > 0 ? {
    filters: filters
  } : null;
};

PermalinkService.prototype.initExternalDataSources_ = function () {
  var _this8 = this;

  if (!this.ngeoQuerent_) {
    throw new Error('Missing ngeoQuerent');
  }

  if (!this.gmfExternalDataSourcesManager_) {
    throw new Error('Missing gmfExternalDataSourcesManager');
  }

  var ngeoQuerent = this.ngeoQuerent_;
  var gmfExtDSManager = this.gmfExternalDataSourcesManager_;
  var promises = [];
  var layerNamesString = this.ngeoStateManager_.getInitialStringValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].EXTERNAL_DATASOURCES_NAMES);
  var urlsString = this.ngeoStateManager_.getInitialStringValue(gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].EXTERNAL_DATASOURCES_URLS);

  if (layerNamesString && urlsString) {
    var layerNames = layerNamesString.split(ExtDSSeparator.LIST);
    var urls = urlsString.split(ExtDSSeparator.LIST);

    var _loop = function _loop(i, ii) {
      var groupLayerNamesString = layerNames[i];

      if (!groupLayerNamesString) {
        return "break";
      }

      var groupLayerNames = groupLayerNamesString.split(ExtDSSeparator.NAMES);
      var url = urls[i];
      var serviceType = Object(ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["guessServiceTypeByUrl"])(url);

      var getCapabilitiesDefer = _this8.q_.defer();

      promises.push(getCapabilitiesDefer.promise);

      if (serviceType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["Type"].WMS) {
        ngeoQuerent.wmsGetCapabilities(url).then(function (capabilities) {
          getCapabilitiesDefer.resolve({
            capabilities: capabilities,
            groupLayerNames: groupLayerNames,
            serviceType: serviceType,
            url: url
          });
        }, function () {
          getCapabilitiesDefer.reject({
            groupLayerNames: groupLayerNames,
            serviceType: serviceType,
            url: url
          });
        });
      } else if (serviceType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["Type"].WMTS) {
        ngeoQuerent.wmtsGetCapabilities(url).then(function (capabilities) {
          getCapabilitiesDefer.resolve({
            capabilities: capabilities,
            groupLayerNames: groupLayerNames,
            serviceType: serviceType,
            url: url
          });
        }, function () {
          getCapabilitiesDefer.reject({
            groupLayerNames: groupLayerNames,
            serviceType: serviceType,
            url: url
          });
        });
      } else {
        getCapabilitiesDefer.reject({
          groupLayerNames: groupLayerNames,
          serviceType: serviceType,
          url: url
        });
      }
    };

    for (var i = 0, ii = urls.length; i < ii; i++) {
      var _ret = _loop(i, ii);

      if (_ret === "break") break;
    }
  }

  return this.q_.all(promises).then(function (responses) {
    for (var _iterator5 = _createForOfIteratorHelperLoose(responses), _step5; !(_step5 = _iterator5()).done;) {
      var response = _step5.value;

      if (response.serviceType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["Type"].WMS) {
        for (var _iterator6 = _createForOfIteratorHelperLoose(response.groupLayerNames), _step6; !(_step6 = _iterator6()).done;) {
          var layerName = _step6.value;
          var layerCap = ngeoQuerent.wmsFindLayerCapability(response.capabilities.Capability.Layer.Layer, layerName);

          if (layerCap) {
            gmfExtDSManager.createAndAddDataSourceFromWMSCapability(layerCap, response.capabilities, response.url);
          } else {}
        }
      } else if (response.serviceType === ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["Type"].WMTS) {
        for (var _iterator7 = _createForOfIteratorHelperLoose(response.groupLayerNames), _step7; !(_step7 = _iterator7()).done;) {
          var _layerName = _step7.value;

          var _layerCap = ngeoQuerent.wmtsFindLayerCapability(response.capabilities.Contents.Layer, _layerName);

          if (_layerCap) {
            gmfExtDSManager.createAndAddDataSourceFromWMTSCapability(_layerCap, response.capabilities, response.url);
          } else {}
        }
      }
    }
  }, function (rejections) {});
};

PermalinkService.prototype.handleExternalDSGroupCollectionAdd_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_26__["CollectionEvent"]) {
    var group = evt.element;

    if (!(group instanceof ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_9__["default"])) {
      throw new Error('Wrong group type');
    }

    this.registerExternalDSGroup_(group);
    this.setExternalDataSourcesState_();
  }
};

PermalinkService.prototype.registerExternalDSGroup_ = function (group) {
  this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(group.dataSourcesCollection, 'add', this.setExternalDataSourcesState_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["listen"])(group.dataSourcesCollection, 'remove', this.setExternalDataSourcesState_, this));
};

PermalinkService.prototype.containsLayerName = function (layer, name) {
  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_25__["default"]) {
    for (var _iterator8 = _createForOfIteratorHelperLoose(layer.getLayers().getArray()), _step8; !(_step8 = _iterator8()).done;) {
      var l = _step8.value;

      if (!l) {
        throw new Error('Missing layer');
      }

      if (this.containsLayerName(l, name)) {
        return true;
      }
    }

    return false;
  } else {
    return layer.get(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_14__["LAYER_NODE_NAME_KEY"]) == name;
  }
};

PermalinkService.prototype.handleExternalDSGroupCollectionRemove_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_26__["CollectionEvent"]) {
    var group = evt.element;

    if (!(group instanceof ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_9__["default"])) {
      throw new Error('Wrong group type');
    }

    this.unregisterExternalDSGroup_(group);
    this.setExternalDataSourcesState_();
  }
};

PermalinkService.prototype.unregisterExternalDSGroup_ = function (group) {
  this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_21__["unlistenByKey"]);
};

PermalinkService.prototype.setExternalDataSourcesState_ = function () {
  var _this9 = this;

  if (this.setExternalDataSourcesStatePromise_) {
    this.$timeout_.cancel(this.setExternalDataSourcesStatePromise_);
  }

  this.setExternalDataSourcesStatePromise_ = this.$timeout_(function () {
    var _this9$ngeoStateManag;

    if (!_this9.gmfExternalDataSourcesManager_) {
      throw new Error('Missing gmfExternalDataSourcesManager');
    }

    var names = [];
    var urls = [];

    for (var _iterator9 = _createForOfIteratorHelperLoose(_this9.gmfExternalDataSourcesManager_.wmsGroups), _step9; !(_step9 = _iterator9()).done;) {
      var wmsGroup = _step9.value;
      urls.push(wmsGroup.url);
      var wmsGroupLayerNames = [];

      for (var _iterator11 = _createForOfIteratorHelperLoose(wmsGroup.dataSources), _step11; !(_step11 = _iterator11()).done;) {
        var wmsDataSource = _step11.value;

        if (wmsDataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
          var layerName = wmsDataSource.getWFSLayerNames()[0];
          wmsGroupLayerNames.push(layerName);
        }
      }

      names.push(wmsGroupLayerNames.join(ExtDSSeparator.NAMES));
    }

    for (var _iterator10 = _createForOfIteratorHelperLoose(_this9.gmfExternalDataSourcesManager_.wmtsGroups), _step10; !(_step10 = _iterator10()).done;) {
      var wmtsGroup = _step10.value;
      urls.push(wmtsGroup.url);
      var wmtsGroupLayerNames = [];

      for (var _iterator12 = _createForOfIteratorHelperLoose(wmtsGroup.dataSources), _step12; !(_step12 = _iterator12()).done;) {
        var wmtsDataSource = _step12.value;

        if (!wmtsDataSource.wmtsLayer) {
          throw new Error('Missing wmtsDataSource.wmtsLayer');
        }

        wmtsGroupLayerNames.push(wmtsDataSource.wmtsLayer);
      }

      names.push(wmtsGroupLayerNames.join(ExtDSSeparator.NAMES));
    }

    _this9.ngeoStateManager_.updateState((_this9$ngeoStateManag = {}, _this9$ngeoStateManag[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].EXTERNAL_DATASOURCES_NAMES] = names.join(ExtDSSeparator.LIST), _this9$ngeoStateManag[gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"].EXTERNAL_DATASOURCES_URLS] = urls.join(ExtDSSeparator.LIST), _this9$ngeoStateManag));

    _this9.setExternalDataSourcesStatePromise_ = null;
  });
};

PermalinkService.prototype.cleanParams = function (groups) {
  var _this10 = this;

  var keys = this.ngeoLocation_.getParamKeys();

  for (var _iterator13 = _createForOfIteratorHelperLoose(keys), _step13; !(_step13 = _iterator13()).done;) {
    var key = _step13.value;

    if (key.startsWith(ParamPrefix.TREE_GROUP_LAYERS)) {
      var value = key.substring(ParamPrefix.TREE_GROUP_LAYERS.length);

      for (var _iterator15 = _createForOfIteratorHelperLoose(groups), _step15; !(_step15 = _iterator15()).done;) {
        var group = _step15.value;

        if (group.name == value) {
          this.ngeoStateManager_.deleteParam(key);
          break;
        }
      }
    }

    if (key.startsWith(ParamPrefix.TREE_GROUP_OPACITY)) {
      var _value2 = key.substring(ParamPrefix.TREE_GROUP_OPACITY.length);

      for (var _iterator16 = _createForOfIteratorHelperLoose(groups), _step16; !(_step16 = _iterator16()).done;) {
        var _group = _step16.value;

        if (_group.name == _value2) {
          this.ngeoStateManager_.deleteParam(key);
          break;
        }
      }
    }
  }

  this.$timeout_(function () {
    if (!_this10.map_) {
      return;
    }

    var layer = _this10.map_.getLayerGroup();

    if (!layer) {
      throw new Error('Missing layer');
    }

    for (var _iterator14 = _createForOfIteratorHelperLoose(keys), _step14; !(_step14 = _iterator14()).done;) {
      var key = _step14.value;

      if (key.startsWith(ParamPrefix.TREE_ENABLE)) {
        var value = key.substring(ParamPrefix.TREE_ENABLE.length);

        if (!_this10.containsLayerName(layer, value)) {
          _this10.ngeoStateManager_.deleteParam(key);
        }
      }

      if (key.startsWith(ParamPrefix.TREE_OPACITY)) {
        var _value = key.substring(ParamPrefix.TREE_OPACITY.length);

        if (!_this10.containsLayerName(layer, _value)) {
          _this10.ngeoStateManager_.deleteParam(key);
        }
      }
    }
  });
};

PermalinkService.prototype.setNodeTime_ = function (treeCtrl) {
  var _this11 = this;

  var time = this.ngeoStateManager_.getInitialStringValue(ParamPrefix.TREE_TIME + treeCtrl.node.name);

  if (time) {
    var bounds = time.split('/');
    var node = treeCtrl.node;
    node.time.minDefValue = bounds[0];
    node.time.maxDefValue = bounds[1];
    var dataSource = this.gmfDataSourcesManager_.getDatasource(Object(ol_util_js__WEBPACK_IMPORTED_MODULE_20__["getUid"])(treeCtrl.node));

    if (dataSource) {
      if (!(dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_10__["default"])) {
        throw new Error('Wrong dataSource type');
      }

      dataSource.timeLowerValue = new Date(bounds[0]).getTime();
      dataSource.timeUpperValue = new Date(bounds[1]).getTime();
    } else if (treeCtrl.children) {
      treeCtrl.children.forEach(function (child) {
        var dataSource = _this11.gmfDataSourcesManager_.getDatasource(Object(ol_util_js__WEBPACK_IMPORTED_MODULE_20__["getUid"])(child.node));

        if (dataSource) {
          dataSource.timeLowerValue = new Date(bounds[0]).getTime();
          dataSource.timeUpperValue = new Date(bounds[1]).getTime();
        }
      });
    }
  }
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfPermalink', [gmf_authentication_Service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, gmf_datasource_Manager_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_draw_features_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, gmf_datasource_LayerBeingSwipe_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_19__["default"].name, ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_15__["default"].name, ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_16__["default"].name, ngeo_statemanager_module_js__WEBPACK_IMPORTED_MODULE_17__["default"].name]);
myModule.service('gmfPermalink', PermalinkService);

(function () {
  var regexp = [];

  for (var key1 in ParamPrefix) {
    regexp.push(new RegExp(ParamPrefix[key1] + ".*"));
  }

  for (var key2 in gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["PermalinkParam"]) {
    regexp.push(new RegExp(ParamPrefix[key2]));
  }

  ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_18__["default"].value('ngeoUsedKeyRegexp', regexp);
})();

/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/permalink/ShareService.js":
/*!****************************************************!*\
  !*** ./contribs/gmf/src/permalink/ShareService.js ***!
  \****************************************************/
/*! exports provided: PermalinkShareService, URL_MAX_LEN, URL_PATH_MAX_LEN, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PermalinkShareService", function() { return PermalinkShareService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "URL_MAX_LEN", function() { return URL_MAX_LEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "URL_PATH_MAX_LEN", function() { return URL_PATH_MAX_LEN; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
PermalinkShareService.$inject = ["$http", "gmfShortenerCreateUrl"];

function PermalinkShareService($http, gmfShortenerCreateUrl) {
  this.$http_ = $http;
  this.gmfShortenerCreateUrl_ = gmfShortenerCreateUrl;
}

PermalinkShareService.prototype.getShortUrl = function (url) {
  var params = {
    url: url
  };

  if (!this.gmfShortenerCreateUrl_) {
    return {
      data: {
        short_url: url
      },
      status: 200
    };
  }

  return this.postShortUrl_(params);
};

PermalinkShareService.prototype.sendShortUrl = function (shortUrl, email, opt_message) {
  var params = {
    url: shortUrl,
    email: email
  };

  if (opt_message) {
    params.message = opt_message;
  }

  return this.postShortUrl_(params);
};

PermalinkShareService.prototype.postShortUrl_ = function (params) {
  return this.$http_.post(this.gmfShortenerCreateUrl_, $.param(params), {
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded'
    }
  });
};

var URL_MAX_LEN = 2083;
var URL_PATH_MAX_LEN = 2048;
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfShareService', []);
myModule.service('gmfShareService', PermalinkShareService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/permalink/module.js":
/*!**********************************************!*\
  !*** ./contribs/gmf/src/permalink/module.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_permalink_Permalink_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/permalink/Permalink.js */ "./contribs/gmf/src/permalink/Permalink.js");
/* harmony import */ var gmf_permalink_ShareService_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/permalink/ShareService.js */ "./contribs/gmf/src/permalink/ShareService.js");
/* harmony import */ var gmf_permalink_shareComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/permalink/shareComponent.js */ "./contribs/gmf/src/permalink/shareComponent.js");
/* harmony import */ var _share_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./share.scss */ "./contribs/gmf/src/permalink/share.scss");
/* harmony import */ var _share_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_share_scss__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfPermalinkModule', [gmf_permalink_Permalink_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_permalink_ShareService_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_permalink_shareComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/permalink/share.scss":
/*!***********************************************!*\
  !*** ./contribs/gmf/src/permalink/share.scss ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/permalink/shareComponent.html":
/*!********************************************************!*\
  !*** ./contribs/gmf/src/permalink/shareComponent.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="modal-header ui-draggable-handle">\n  <h4 class="modal-title" translate>Share this map</h4>\n  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n</div>\n<div class="modal-body">\n  <form role="form" name="gmfShareForm" novalidate>\n    <div class="form-group">\n      <label for="gmfShareInputShortLink-{{::$ctrl.uid}}" translate>Permalink</label>\n      <input type="text" class="form-control" id="gmfShareInputShortLink-{{::$ctrl.uid}}" onclick="this.select()" ng-model="$ctrl.shortLink" readonly="True">\n      <p class="help-block" translate>Copy this link to share it.</p>\n      <p class="text-danger" ng-if="$ctrl.showLengthWarning">\n        <span class="fa fa-exclamation-triangle"></span>\n        {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}}\n      </p>\n      <p class="text-danger" ng-if="$ctrl.errorOnGetShortUrl">\n        <span class="fa fa-exclamation"></span>\n        {{\'Error, cannot get the shortened URL.\' | translate}}\n      </p>\n    </div>\n    <hr ng-if="::$ctrl.options.enableEmail !== false">\n    <div class="gmf-share-email" ng-if="::$ctrl.options.enableEmail !== false">\n      <div class="form-group">\n        <label for="gmfShareInputEmail-{{::$ctrl.uid}}" translate>Send this link to</label>\n        <input type="email" class="form-control"  name="inputEmail" id="gmfShareInputEmail-{{::$ctrl.uid}}" placeholder="E-mail" ng-model="$ctrl.email" required>\n        <span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched">\n          <span class="text-danger" ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required">\n            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n            {{\'Invalid email.\' | translate}}</span>\n        </span>\n      </div>\n      <div class="form-group">\n        <textarea class="form-control" ng-attr-placeholder="{{\'Message (optional)\' | translate }}" ng-model="$ctrl.message"></textarea>\n      </div>\n      <span class="text-default" ng-if="!$ctrl.isFinishedState">\n        <i class="fa custom-spinner-generic fa-spin">\n          ' +
((__t = (__webpack_require__(/*! gmf/icons/spinner.svg?viewbox&height=1rem */ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=1rem"))) == null ? '' : __t) +
'\n        </i>\n      </span>\n      <span class="text-success" ng-if="$ctrl.successfullySent">\n        <i class="fa fa-check" aria-hidden="true"></i>\n          {{ \'Link successfully sent.\' | translate }}\n      </span>\n      <span class="text-danger" ng-if="$ctrl.errorOnsend">\n        <i class="fa fa-exclamation" aria-hidden="true"></i>\n          {{ \'Error, the link has not been sent.\' | translate }}\n      </span>\n    </div>\n    <div class="text-right">\n      <button type="button" class="btn btn-default" data-dismiss="modal" translate>Close</button>\n      <button ng-if="::$ctrl.options.enableEmail !== false"\n        type="submit" class="btn prime"\n        ng-click="$ctrl.sendShortUrl()"\n        ng-disabled="!gmfShareForm.$valid"\n        translate>Send\n      </button>\n    </div>\n  </form>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/permalink/shareComponent.js":
/*!******************************************************!*\
  !*** ./contribs/gmf/src/permalink/shareComponent.js ***!
  \******************************************************/
/*! exports provided: ShareComponentController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShareComponentController", function() { return ShareComponentController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_permalink_ShareService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/permalink/ShareService.js */ "./contribs/gmf/src/permalink/ShareService.js");
/* harmony import */ var ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/statemanager/Location.js */ "./src/statemanager/Location.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfPermalinkShareComponent', [gmf_permalink_ShareService_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/permalink/shareComponent', __webpack_require__(/*! ./shareComponent.html */ "./contribs/gmf/src/permalink/shareComponent.html"));
}]);
myModule.value('gmfPermalinkShareTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.gmfPermalinkShareTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'gmf/permalink/shareComponent';
});
gmfPermalinkShareTemplateUrl.$inject = ["$attrs", "gmfPermalinkShareTemplateUrl"];

function gmfPermalinkShareTemplateUrl($attrs, gmfPermalinkShareTemplateUrl) {
  return gmfPermalinkShareTemplateUrl($attrs);
}

var permalinkShareComponent = {
  controller: 'GmfShareController',
  templateUrl: gmfPermalinkShareTemplateUrl
};
myModule.component('gmfShare', permalinkShareComponent);
var ShareComponentController = function () {
  ShareComponentController.$inject = ["$scope", "ngeoLocation", "gmfShareService", "$q", "$attrs", "gmfShareOptions"];

  function ShareComponentController($scope, ngeoLocation, gmfShareService, $q, $attrs, gmfShareOptions) {
    this.options = gmfShareOptions;
    this.uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_3__["getUid"])(this);
    this.$scope_ = $scope;
    this.gmfShareService_ = gmfShareService;
    this.$q_ = $q;
    this.ngeoLocation_ = ngeoLocation;
    this.shortLink = '';
    this.email = '';
    this.message = '';
    this.permalink_ = this.ngeoLocation_.getUriString();
    var path = ngeoLocation.getPath();

    if (!path) {
      throw new Error('Missing path');
    }

    this.showLengthWarning = this.permalink_.length > gmf_permalink_ShareService_js__WEBPACK_IMPORTED_MODULE_1__["URL_MAX_LEN"] || path.length > gmf_permalink_ShareService_js__WEBPACK_IMPORTED_MODULE_1__["URL_PATH_MAX_LEN"];
    this.successfullySent = false;
    this.errorOnsend = false;
    this.isFinishedState = true;
    this.errorOnGetShortUrl = false;
    this.getShortUrl();
  }

  var _proto = ShareComponentController.prototype;

  _proto.getShortUrl = function getShortUrl() {
    var _this = this;

    this.$q_.when(this.gmfShareService_.getShortUrl(this.permalink_)).then(function (resp) {
      _this.shortLink = resp.data.short_url;
      _this.errorOnGetShortUrl = false;
    }, function (resp) {
      _this.shortLink = _this.permalink_;
      _this.errorOnGetShortUrl = true;
    });
  };

  _proto.sendShortUrl = function sendShortUrl() {
    var _this2 = this;

    this.errorOnsend = false;
    this.successfullySent = false;
    this.isFinishedState = false;

    if (this.$scope_.gmfShareForm.$valid) {
      this.$q_.when(this.gmfShareService_.sendShortUrl(this.permalink_, this.email, this.message)).then(function (resp) {
        _this2.successfullySent = true;
        _this2.isFinishedState = true;
      }, function (resp) {
        _this2.errorOnsend = true;
        _this2.isFinishedState = true;
      });
    }
  };

  return ShareComponentController;
}();
myModule.controller('GmfShareController', ShareComponentController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/query/extraModule.js":
/*!***********************************************!*\
  !*** ./contribs/gmf/src/query/extraModule.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_query_gridComponent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/query/gridComponent.js */ "./contribs/gmf/src/query/gridComponent.js");
/* harmony import */ var gmf_query_windowComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/query/windowComponent.js */ "./contribs/gmf/src/query/windowComponent.js");
/* harmony import */ var _grid_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./grid.scss */ "./contribs/gmf/src/query/grid.scss");
/* harmony import */ var _grid_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_grid_scss__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _window_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./window.scss */ "./contribs/gmf/src/query/window.scss");
/* harmony import */ var _window_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_window_scss__WEBPACK_IMPORTED_MODULE_4__);





/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfQueryExtraModule', [gmf_query_gridComponent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_query_windowComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/query/grid.scss":
/*!******************************************!*\
  !*** ./contribs/gmf/src/query/grid.scss ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/query/gridComponent.html":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/query/gridComponent.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="gmf-displayquerygrid panel" ng-show="ctrl.active">\n  <div\n    class="close"\n    ng-click="ctrl.clear()">\n    &times;\n  </div>\n\n  <ul\n    class="nav nav-pills"\n    role="tablist">\n\n    <li\n      class="nav-item"\n      ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.label"\n      role="presentation"\n      ng-click="ctrl.selectTab(gridSource)">\n\n      <a\n        class="nav-link"\n        href="#{{ctrl.escapeValue(gridSource.source.label)}}"\n        ng-class="{\'active\' : ctrl.isSelected(gridSource)}"\n        data-target="#{{ctrl.escapeValue(gridSource.source.label)}}"\n        aria-controls="{{ctrl.escapeValue(gridSource.source.label)}}"\n        role="tab"\n        data-toggle="tab">\n\n        <span>\n          {{gridSource.source.label | translate}} ({{gridSource.source.features.length}})\n        </span>\n      </a>\n    </li>\n  </ul>\n\n  <div class="tab-content">\n    <div\n      ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.label"\n      role="tabpanel"\n      class="tab-pane"\n      ng-class="{\'active\' : ctrl.isSelected(gridSource)}"\n      id="{{ctrl.escapeValue(gridSource.source.label)}}">\n\n      <ngeo-grid\n        ngeo-grid-configuration="gridSource.configuration">\n      </ngeo-grid>\n  </div>\n  <div class="container-fluid">\n  <div ng-show="!ctrl.pending && ctrl.getActiveGridSource() && ctrl.getActiveGridSource().configuration !== null" class="row">\n    <div class="col-md-5 my-auto">\n      <span ng-if="ctrl.hasOneWithTooManyResults_()" class="gmf-query-grid-too-many text-warning">{{\'Only\' | translate}} {{ctrl.sumOfFeatures}} {{\'of\' | translate}} {{ctrl.sumOfAvailableResults}} {{\'results displayed, as the maximum number is reached. Please refine your query.\' | translate }}</span>\n    </div>\n    <div class="col-md-7" class="pull-right">\n      <ul class="nav justify-content-end">\n        <li\n          class="ng-hide"\n          ng-show="ctrl.isOneSelected()">\n          <div class="btn btn-sm ng-binding">\n            {{ctrl.getSelectedRowCount()}} <span translate>selected element(s)</span>\n          </div>\n        </li>\n\n        <li\n          ng-show="ctrl.isOneSelected()"\n          class="ng-hide">\n          <button\n            class="btn btn-link btn-sm"\n            title="{{\'Zoom to selection\' | translate}}"\n            ng-click="ctrl.zoomToSelection()">\n            <i class="fa fa-search-plus"></i> <span translate>Zoom to</span>\n          </button>\n        </li>\n\n        <li\n          ng-show="ctrl.isOneSelected()"\n          class="ng-hide">\n          <button\n            class="btn btn-link btn-sm"\n            title="{{\'Export selection as CSV\' | translate}}"\n            ng-click="ctrl.downloadCsv()">\n            <i class="fa fa-download"></i> <span translate>Export as CSV</span>\n          </button>\n        </li>\n\n        <li class="dropdown">\n          <button\n            type="button"\n            class="dropup btn btn-default btn-sm dropdown-toggle"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="false">\n            <span translate>Select</span>\n          </button>\n          <ul\n            class="dropdown-menu"\n            aria-labelledby="dLabel">\n            <li>\n              <a\n                href=""\n                ng-click="ctrl.selectAll()" translate>All</a>\n            </li>\n            <li>\n              <a\n                href=""\n                ng-click="ctrl.unselectAll()" translate>None</a>\n            </li>\n            <li>\n              <a\n                href=""\n                ng-click="ctrl.invertSelection()" translate>Reverse selection</a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n  </div>\n\n  <div ng-show="ctrl.pending" class="spinner-grid">\n    <i class="fa fa-spin">\n      ' +
((__t = (__webpack_require__(/*! gmf/icons/spinner.svg?viewbox&height=3rem */ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=3rem"))) == null ? '' : __t) +
'\n    </i>\n  </div>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/query/gridComponent.js":
/*!*************************************************!*\
  !*** ./contribs/gmf/src/query/gridComponent.js ***!
  \*************************************************/
/*! exports provided: QueryGridController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryGridController", function() { return QueryGridController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_download_Csv_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/download/Csv.js */ "./src/download/Csv.js");
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");
/* harmony import */ var ngeo_grid_component_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/grid/component.js */ "./src/grid/component.js");
/* harmony import */ var ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/grid/Config.js */ "./src/grid/Config.js");
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
/* harmony import */ var bootstrap_js_src_dropdown_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! bootstrap/js/src/dropdown.js */ "./node_modules/bootstrap/js/src/dropdown.js");
QueryGridController.$inject = ["$scope", "ngeoQueryResult", "ngeoMapQuerent", "ngeoFeatureOverlayMgr", "$timeout", "ngeoCsvDownload", "ngeoQueryOptions", "gmfCsvFilename", "$element", "gmfDisplayQueryGridOptions"];












var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfQueryGridComponent', [ngeo_download_Csv_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_grid_component_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]);
myModule.value('gmfDisplayquerygridTemplateUrl', function ($element, $attrs) {
  var templateUrl = $attrs.gmfDisplayquerygridTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/query/gridComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/query/gridComponent', __webpack_require__(/*! ./gridComponent.html */ "./contribs/gmf/src/query/gridComponent.html"));
}]);
gmfDisplayquerygridTemplateUrl.$inject = ["$element", "$attrs", "gmfDisplayquerygridTemplateUrl"];

function gmfDisplayquerygridTemplateUrl($element, $attrs, gmfDisplayquerygridTemplateUrl) {
  return gmfDisplayquerygridTemplateUrl($element, $attrs);
}

var queryGridComponent = {
  controller: 'GmfDisplayquerygridController as ctrl',
  bindings: {
    'active': '=?gmfDisplayquerygridActive',
    'getMapFn': '&gmfDisplayquerygridMap'
  },
  templateUrl: gmfDisplayquerygridTemplateUrl
};
myModule.component('gmfDisplayquerygrid', queryGridComponent);
function QueryGridController($scope, ngeoQueryResult, ngeoMapQuerent, ngeoFeatureOverlayMgr, $timeout, ngeoCsvDownload, ngeoQueryOptions, gmfCsvFilename, $element, gmfDisplayQueryGridOptions) {
  var _this = this;

  this.options = gmfDisplayQueryGridOptions;
  this.$scope_ = $scope;
  this.$timeout_ = $timeout;
  this.ngeoQueryResult = ngeoQueryResult;
  this.ngeoMapQuerent_ = ngeoMapQuerent;
  this.ngeoCsvDownload_ = ngeoCsvDownload;
  this.$element_ = $element;
  this.maxResults = ngeoQueryOptions.limit !== undefined ? ngeoQueryOptions.limit : 50;
  this.active = false;
  this.pending = false;
  this.gridSources = {};
  this.loadedGridSources = [];
  this.selectedTab = null;
  this.featuresForSources_ = {};
  this.features_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
  this.ngeoFeatureOverlayMgr_ = ngeoFeatureOverlayMgr;
  this.highlightFeatures_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
  this.filename_ = gmfCsvFilename;
  this.map_ = null;
  this.sumOfFeatures = 0;
  this.sumOfAvailableResults = 0;
  this.$scope_.$watchCollection(function () {
    return ngeoQueryResult;
  }, function (newQueryResult, oldQueryResult) {
    if (ngeoQueryResult.pending) {
      _this.active = true;
      _this.pending = true;
    }

    if (newQueryResult !== oldQueryResult) {
      _this.updateData_();
    }
  });
  this.unregisterSelectWatcher_ = null;
  this.getMapFn = null;
}

QueryGridController.prototype.$onInit = function () {
  if (!this.getMapFn) {
    throw new Error('Missing getMapFn');
  }

  var featuresOverlay = this.ngeoFeatureOverlayMgr_.getFeatureOverlay();
  featuresOverlay.setFeatures(this.features_);
  featuresOverlay.setStyle(Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_10__["buildStyle"])(this.options.featuresStyle));
  var highlightFeaturesOverlay = this.ngeoFeatureOverlayMgr_.getFeatureOverlay();
  highlightFeaturesOverlay.setFeatures(this.highlightFeatures_);
  var highlightFeatureStyle = Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_10__["buildStyle"])(this.options.selectedFeatureStyle);
  highlightFeaturesOverlay.setStyle(highlightFeatureStyle);
  var mapFn = this.getMapFn;

  if (mapFn) {
    var map = mapFn();

    if (!(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_9__["default"])) {
      throw new Error('Wrong map type');
    }

    this.map_ = map;
  }
};

QueryGridController.prototype.getGridSources = function () {
  var _this2 = this;

  return this.loadedGridSources.map(function (sourceLabel) {
    return _this2.gridSources[sourceLabel];
  });
};

QueryGridController.prototype.updateData_ = function () {
  var _this3 = this;

  if ((this.ngeoQueryResult.pending || this.ngeoQueryResult.total === 0) && !this.hasOneWithTooManyResults_()) {
    var oldActive = this.active;
    this.clear();

    if (oldActive) {
      this.active = this.ngeoQueryResult.pending;
      this.pending = this.ngeoQueryResult.pending;
    }

    return;
  }

  this.sumOfAvailableResults = 0;
  this.sumOfFeatures = 0;
  var countedSources = [];
  this.ngeoQueryResult.sources.forEach(function (source) {
    if (!countedSources.includes(source.label)) {
      _this3.sumOfFeatures += source.features.length;
    }

    if (!source.requestPartners || !source.requestPartners.some(function (label) {
      return countedSources.includes(label);
    })) {
      _this3.sumOfAvailableResults += source.totalFeatureCount;
    }

    countedSources.push(source.label);
  });
  this.active = true;
  this.pending = false;
  var sources = this.ngeoQueryResult.sources;

  if (Object.keys(this.options.mergeTabs || {}).length > 0) {
    sources = this.getMergedSources_(sources);
  }

  sources.forEach(function (source) {
    if (source.tooManyResults && source.features.length === 0) {
      _this3.makeGrid_(null, source);
    } else {
      source.id = _this3.escapeValue(source.id);
      var features = source.features;

      if (features.length > 0) {
        _this3.collectData_(source);
      }
    }
  });

  if (this.loadedGridSources.length === 0) {
    this.active = false;
    return;
  }

  if (this.selectedTab === null || !("" + this.selectedTab in this.gridSources)) {
    this.$timeout_(function () {
      var firstSourceId = _this3.loadedGridSources[0];

      _this3.selectTab(_this3.gridSources[firstSourceId]);
    }, 0);
  }
};

QueryGridController.prototype.hasOneWithTooManyResults_ = function () {
  return this.ngeoQueryResult.sources.some(function (source) {
    return source.tooManyResults;
  });
};

QueryGridController.prototype.escapeValue = function (value) {
  if (typeof value == 'number') {
    return value;
  } else {
    var toEscape = /[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\ |]/g;

    if (value.match(toEscape) !== null) {
      return value.replace(toEscape, '_');
    } else {
      return value;
    }
  }
};

QueryGridController.prototype.isSelected = function (gridSource) {
  return this.selectedTab === gridSource.source.label;
};

QueryGridController.prototype.getMergedSources_ = function (sources) {
  var _this4 = this;

  var allSources = [];
  var mergedSources = {};
  sources.forEach(function (source) {
    var mergedSource = _this4.getMergedSource_(source, mergedSources);

    if (mergedSource === null) {
      allSources.push(source);
    }
  });

  for (var mergedSourceId in mergedSources) {
    allSources.push(mergedSources[mergedSourceId]);
  }

  return allSources;
};

QueryGridController.prototype.getMergedSource_ = function (source, mergedSources) {
  var mergeSourceId = null;

  for (var currentMergeSourceId in this.options.mergeTabs || {}) {
    var sourceLabels = this.options.mergeTabs[currentMergeSourceId];
    var containsSource = sourceLabels.some(function (sourceLabel) {
      return sourceLabel == source.label;
    });

    if (containsSource) {
      mergeSourceId = currentMergeSourceId;
      break;
    }
  }

  if (mergeSourceId === null) {
    return null;
  }

  var newRequest = true;
  var mergeSource;

  if (mergeSourceId in mergedSources) {
    mergeSource = mergedSources[mergeSourceId];

    if (source.requestPartners) {
      newRequest = !source.requestPartners.some(function (label) {
        return mergeSource.mergeComposants.includes(label);
      });
    }

    mergeSource.mergeComposants.push(source.label);
  } else {
    mergeSource = {
      features: [],
      id: mergeSourceId,
      label: mergeSourceId,
      limit: 0,
      pending: false,
      tooManyResults: false,
      mergeComposants: [source.label]
    };
    mergedSources[mergeSourceId] = mergeSource;
  }

  source.features.forEach(function (feature) {
    mergeSource.features.push(feature);
  });
  mergeSource.tooManyResults = mergeSource.tooManyResults || source.tooManyResults;

  if (newRequest) {
    if (source.totalFeatureCount !== undefined) {
      mergeSource.totalFeatureCount = mergeSource.totalFeatureCount !== undefined ? mergeSource.totalFeatureCount + source.totalFeatureCount : source.totalFeatureCount;
    }

    mergeSource.limit += source.limit;
  }

  return mergeSource;
};

QueryGridController.prototype.collectData_ = function (source) {
  var features = source.features;
  var allProperties = [];
  var featureGeometriesNames = [];
  var featuresForSource = {};
  var properties, featureGeometryName;
  features.forEach(function (feature) {
    properties = feature.getProperties();

    if (properties !== undefined) {
      featureGeometryName = feature.getGeometryName();

      if (!featureGeometriesNames.includes(featureGeometryName)) {
        featureGeometriesNames.push(featureGeometryName);
      }

      allProperties.push(properties);
      featuresForSource[Object(ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_4__["getRowUid"])(properties)] = feature;
    }
  });
  this.cleanProperties_(allProperties, featureGeometriesNames);

  if (allProperties.length > 0) {
    var gridCreated = this.makeGrid_(allProperties, source);

    if (gridCreated) {
      this.featuresForSources_["" + source.label] = featuresForSource;
    }
  }
};

QueryGridController.prototype.cleanProperties_ = function (allProperties, featureGeometriesNames) {
  allProperties.forEach(function (properties) {
    featureGeometriesNames.forEach(function (featureGeometryName) {
      delete properties[featureGeometryName];
    });
    delete properties.boundedBy;
    delete properties.ngeo_feature_type_;
  });

  if (this.options.removeEmptyColumns === true) {
    this.removeEmptyColumnsFn_(allProperties);
  }
};

QueryGridController.prototype.removeEmptyColumnsFn_ = function (allProperties) {
  var keysToKeep = [];
  var i, key;

  for (key in allProperties[0]) {
    for (i = 0; i < allProperties.length; i++) {
      if (allProperties[i][key] !== undefined) {
        keysToKeep.push(key);
        break;
      }
    }
  }

  var keyToRemove;
  allProperties.forEach(function (properties) {
    keyToRemove = [];

    for (key in properties) {
      if (!keysToKeep.includes(key)) {
        keyToRemove.push(key);
      }
    }

    keyToRemove.forEach(function (key) {
      delete properties[key];
    });
  });
};

QueryGridController.prototype.makeGrid_ = function (data, source) {
  var sourceLabel = "" + source.label;
  var gridConfig = null;

  if (data !== null) {
    gridConfig = this.getGridConfiguration_(data);

    if (gridConfig === null) {
      return false;
    }
  }

  if (!this.loadedGridSources.includes(sourceLabel)) {
    this.loadedGridSources.push(sourceLabel);
  }

  this.gridSources[sourceLabel] = {
    source: source
  };

  if (gridConfig) {
    this.gridSources[sourceLabel].configuration = gridConfig;
  }

  return true;
};

QueryGridController.prototype.getGridConfiguration_ = function (data) {
  if (!data.length) {
    throw new Error('Missing data');
  }

  var clone = {};
  Object.assign(clone, data[0]);
  delete clone.ol_uid;
  var columns = Object.keys(clone);
  var columnDefs = [];
  columns.forEach(function (column) {
    columnDefs.push({
      name: column
    });
  });

  if (columnDefs.length > 0) {
    return new ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_4__["default"](data, columnDefs);
  } else {
    return null;
  }
};

QueryGridController.prototype.getActiveGridSource = function () {
  if (this.selectedTab === null) {
    return null;
  } else {
    return this.gridSources["" + this.selectedTab];
  }
};

QueryGridController.prototype.clear = function () {
  this.active = false;
  this.pending = false;
  this.gridSources = {};
  this.loadedGridSources = [];
  this.selectedTab = null;
  this.tooManyResults = false;
  this.features_.clear();
  this.highlightFeatures_.clear();
  this.ngeoMapQuerent_.clear();
  this.featuresForSources_ = {};

  if (this.unregisterSelectWatcher_) {
    this.unregisterSelectWatcher_();
  }
};

QueryGridController.prototype.selectTab = function (gridSource) {
  var _this5 = this;

  var source = gridSource.source;
  this.selectedTab = source.label;

  if (this.unregisterSelectWatcher_) {
    this.unregisterSelectWatcher_();
    this.unregisterSelectWatcher_ = null;
  }

  if (gridSource.configuration !== undefined) {
    this.unregisterSelectWatcher_ = this.$scope_.$watchCollection(function () {
      return gridSource.configuration.selectedRows;
    }, function (newSelected, oldSelectedRows) {
      if (Object.keys(newSelected) !== Object.keys(oldSelectedRows)) {
        _this5.onSelectionChanged_();
      }
    });
  }

  this.updateFeatures_(gridSource);
  this.reflowGrid_();
};

QueryGridController.prototype.reflowGrid_ = function () {
  var id = this.escapeValue(this.selectedTab || '');
  var activePane = this.$element_.find("div.tab-pane#" + id);
  activePane.removeClass('active').addClass('active');
  this.$timeout_(function () {
    activePane.find('div.ngeo-grid-table-container table').trigger('reflow');
  });
};

QueryGridController.prototype.onSelectionChanged_ = function () {
  if (this.selectedTab === null) {
    return;
  }

  var gridSource = this.gridSources["" + this.selectedTab];
  this.updateFeatures_(gridSource);
};

QueryGridController.prototype.updateFeatures_ = function (gridSource) {
  this.features_.clear();
  this.highlightFeatures_.clear();

  if (!gridSource.configuration) {
    return;
  }

  var sourceLabel = "" + gridSource.source.label;
  var featuresForSource = this.featuresForSources_[sourceLabel];
  var selectedRows = gridSource.configuration.selectedRows;

  for (var rowId in featuresForSource) {
    var feature = featuresForSource[rowId];

    if (rowId in selectedRows) {
      this.highlightFeatures_.push(feature);
    } else {
      this.features_.push(feature);
    }
  }
};

QueryGridController.prototype.isOneSelected = function () {
  var source = this.getActiveGridSource();

  if (source === null || source.configuration === null) {
    return false;
  } else {
    return source.configuration.getSelectedCount() > 0;
  }
};

QueryGridController.prototype.getSelectedRowCount = function () {
  var source = this.getActiveGridSource();

  if (source === null || source.configuration === null) {
    return 0;
  } else {
    return source.configuration.getSelectedCount();
  }
};

QueryGridController.prototype.selectAll = function () {
  var source = this.getActiveGridSource();

  if (source !== null) {
    source.configuration.selectAll();
  }
};

QueryGridController.prototype.unselectAll = function () {
  var source = this.getActiveGridSource();

  if (source !== null) {
    source.configuration.unselectAll();
  }
};

QueryGridController.prototype.invertSelection = function () {
  var source = this.getActiveGridSource();

  if (source !== null) {
    source.configuration.invertSelection();
  }
};

QueryGridController.prototype.zoomToSelection = function () {
  if (!this.map_) {
    throw new Error('Missing map');
  }

  var source = this.getActiveGridSource();

  if (source !== null) {
    var extent = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["createEmpty"]();
    this.highlightFeatures_.forEach(function (feature) {
      var geometry = feature.getGeometry();

      if (!geometry) {
        throw new Error('Missing geometry');
      }

      ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["extend"](extent, geometry.getExtent());
    });
    var size = this.map_.getSize();

    if (!size) {
      throw new Error('Missing size');
    }

    this.map_.getView().fit(extent, {
      size: size,
      maxZoom: this.options.maxRecenterZoom
    });
  }
};

QueryGridController.prototype.downloadCsv = function () {
  var source = this.getActiveGridSource();

  if (source !== null) {
    var columnDefs = source.configuration.columnDefs;

    if (!columnDefs) {
      throw new Error('Missing columnDefs');
    }

    var selectedRows = source.configuration.getSelectedRows();
    this.ngeoCsvDownload_.startDownload(selectedRows, columnDefs, this.filename_);
  }
};

myModule.controller('GmfDisplayquerygridController', QueryGridController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/query/window.scss":
/*!********************************************!*\
  !*** ./contribs/gmf/src/query/window.scss ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/query/windowComponent.html":
/*!*****************************************************!*\
  !*** ./contribs/gmf/src/query/windowComponent.html ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="spinner-window" ng-if="ctrl.isLoading">\n  <i class="fa fa-spin">\n    ' +
((__t = (__webpack_require__(/*! gmf/icons/spinner.svg?viewbox&height=3rem */ "./contribs/gmf/src/icons/spinner.svg?viewbox&height=3rem"))) == null ? '' : __t) +
'\n  </i>\n</div>\n\n<div\n  class="gmf-displayquerywindow"\n  ng-class="{\'desktop\': ctrl.desktop, \'mobile\': !ctrl.desktop}"\n  ng-show="ctrl.open">\n\n  <button\n    class="collapse-button"\n    type="button"\n    ng-show="::!ctrl.desktop"\n    ngeo-swipe-up="ctrl.collapsed = false"\n    ngeo-swipe-down="ctrl.collapsed = true"\n    ngeo-swipe-disable-mouse\n    ng-click="ctrl.collapsed = !ctrl.collapsed"\n    ng-class="[ctrl.collapsed ? \'collapse-button-up\' : \'collapse-button-down\']">\n  </button>\n\n  <div\n  class="windowcontainer"\n  ng-swipe-disable-mouse\n  ng-swipe-left="ctrl.next()"\n  ng-swipe-right="ctrl.previous()">\n\n    <button\n      type="button"\n      class="btn fa-times close"\n      ng-click="ctrl.close()">\n    </button>\n\n    <div\n      class="animation-container"\n      ng-class="[ctrl.collapsed ? \'\' : \'animation-container-detailed\', ctrl.isNext ? \'next\' : \'previous\']">\n\n      <div\n        ng-animate-swap="ctrl.animate"\n        class="slide-animation gmf-animatable">\n\n        <div class="header ui-draggable-handle">\n          <p\n            class="title"\n            >{{ctrl.source.label | translate}}</p>\n          <p\n            class="subtitle"\n            >{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p>\n        </div>\n\n        <div class="details">\n          <table>\n            <tr\n              ng-repeat="(key, value) in ctrl.getFeatureValues()"\n              ng-if="value !== undefined">\n              <td\n                class="details-key"\n                ng-bind-html="key | translate | ngeoTrustHtml"\n                ></td>\n              <td\n                class="details-value"\n                ng-bind-html="value | removeCDATA | ngeoTrustHtmlAuto"\n                ></td>\n            </tr>\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <div class="navigate">\n\n      <div class="placeholder">\n        <button\n          type="button"\n          class="previous btn"\n          ng-disabled="ctrl.isFirst()"\n          ng-show="ctrl.getResultLength() > 1"\n          ng-click="ctrl.previous()">\n          <span ng-show="::ctrl.desktop">{{\'Prev.\' | translate}}</span>\n        </button>\n      </div>\n\n      <div class="results">\n        <span ng-show="::!ctrl.desktop">{{\'Result\' | translate}}</span>\n        <span>{{ctrl.currentResult + 1}}</span>\n        <span>/</span>\n        <span>{{ctrl.getResultLength()}}</span>\n\n        <div\n          ng-show="::ctrl.desktop"\n          class="dropup">\n\n          <button\n            type="button"\n            class="btn btn-default dropdown-toggle"\n            data-toggle="dropdown"\n            aria-expanded="false">\n            <span class="fa fa-filter"></span>\n          </button>\n\n          <ul\n            class="dropdown-menu dropdown-menu-right"\n            role="menu">\n\n            <li>\n              <a\n                href="#"\n                ng-click="ctrl.setSelectedSource(null)">\n                <i\n                  class="fa fa-fw"\n                  ng-class="{\'fa-check\': ctrl.selectedSource === null}">\n                </i>\n                <span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span>\n              </a>\n            </li>\n\n            <li\n              role="separator"\n              class="divider">\n            </li>\n\n            <li\n              ng-repeat-start="source in ctrl.ngeoQueryResult.sources" ng-repeat-end\n              ng-class="{\'disabled\': source.features.length <= 0}">\n              <a\n                href="#"\n                ng-click="ctrl.setSelectedSource(source)">\n                <i\n                  class="fa fa-fw"\n                  ng-class="{\'fa-check\': ctrl.selectedSource === source}">\n                </i>\n                <span>{{source.label | translate}} ({{source.features.length}})</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        <div\n          ng-show="::ctrl.desktop"\n          class="dropup">\n\n          <button\n            type="button"\n            class="btn btn-default dropdown-toggle"\n            data-toggle="dropdown"\n            aria-expanded="false">\n            <span class="fa fa-download"></span>\n          </button>\n\n          <ul\n            class="dropdown-menu dropdown-menu-right"\n            role="menu">\n            <li\n              ng-repeat-start="source in ctrl.ngeoQueryResult.sources" ng-repeat-end\n              ng-class="{\'disabled\': source.features.length <= 0}">\n              <a\n                href="#"\n                ng-click="ctrl.downloadCSV(source)">\n                <span>{{\'Export\' | translate}} {{source.label | translate}}</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="placeholder">\n        <button\n          type="button"\n          class="next btn"\n          ng-disabled="ctrl.isLast()"\n          ng-show="ctrl.getResultLength() > 1"\n          ng-click="ctrl.next()">\n          <span ng-show="::ctrl.desktop">{{\'Next\' | translate}}</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/query/windowComponent.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/query/windowComponent.js ***!
  \***************************************************/
/*! exports provided: QueryWindowController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryWindowController", function() { return QueryWindowController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_download_Csv_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/download/Csv.js */ "./src/download/Csv.js");
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_swipe_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/swipe.js */ "./src/misc/swipe.js");
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
/* harmony import */ var jquery_ui_ui_widgets_resizable_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jquery-ui/ui/widgets/resizable.js */ "./node_modules/jquery-ui/ui/widgets/resizable.js");
/* harmony import */ var jquery_ui_ui_widgets_resizable_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_resizable_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var angular_animate__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! angular-animate */ "./node_modules/angular-animate/index.js");
/* harmony import */ var angular_animate__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(angular_animate__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var angular_touch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! angular-touch */ "./node_modules/angular-touch/index.js");
/* harmony import */ var angular_touch__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(angular_touch__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var bootstrap_js_src_collapse_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! bootstrap/js/src/collapse.js */ "./node_modules/bootstrap/js/src/collapse.js");
/* harmony import */ var bootstrap_js_src_dropdown_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! bootstrap/js/src/dropdown.js */ "./node_modules/bootstrap/js/src/dropdown.js");
QueryWindowController.$inject = ["$element", "$scope", "ngeoQueryResult", "ngeoMapQuerent", "ngeoCsvDownload", "ngeoFeatureOverlayMgr", "gmfCsvFilename", "gmfDisplayQueryWindowOptions"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

















var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfQueryWindowComponent', [ngeo_download_Csv_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_swipe_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, 'ngAnimate', 'ngTouch']);
myModule.config(['$animateProvider', function ($animateProvider) {
  $animateProvider.classNameFilter(/gmf-animatable/);
}]);
myModule.value('gmfDisplayquerywindowTemplateUrl', function ($element, $attrs) {
  var templateUrl = $attrs.gmfDisplayquerywindowTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/query/windowComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/query/windowComponent', __webpack_require__(/*! ./windowComponent.html */ "./contribs/gmf/src/query/windowComponent.html"));
}]);
gmfDisplayquerywindowTemplateUrl.$inject = ["$element", "$attrs", "gmfDisplayquerywindowTemplateUrl"];

function gmfDisplayquerywindowTemplateUrl($element, $attrs, gmfDisplayquerywindowTemplateUrl) {
  return gmfDisplayquerywindowTemplateUrl($element, $attrs);
}

var queryWindowComponent = {
  controller: 'GmfDisplayquerywindowController as ctrl',
  bindings: {
    'draggableContainment': '<?gmfDisplayquerywindowDraggableContainment',
    'desktop': '=gmfDisplayquerywindowDesktop'
  },
  templateUrl: gmfDisplayquerywindowTemplateUrl
};
myModule.component('gmfDisplayquerywindow', queryWindowComponent);
function QueryWindowController($element, $scope, ngeoQueryResult, ngeoMapQuerent, ngeoCsvDownload, ngeoFeatureOverlayMgr, gmfCsvFilename, gmfDisplayQueryWindowOptions) {
  var _this = this;

  this.options = gmfDisplayQueryWindowOptions;
  this.draggableContainment = '';
  this.desktop = false;
  this.collapsed = false;
  this.ngeoQueryResult = {
    sources: [],
    total: 0,
    pending: false
  };
  this.ngeoMapQuerent_ = ngeoMapQuerent;
  this.ngeoCsvDownload_ = ngeoCsvDownload;
  this.filename_ = gmfCsvFilename;
  this.selectedSource = null;
  this.features_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
  this.ngeoFeatureOverlayMgr_ = ngeoFeatureOverlayMgr;
  this.highlightFeatures_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
  this.source = null;
  this.feature = null;
  this.currentResult = -1;
  this.isNext = true;
  this.animate = 0;
  this.open = false;
  this.element_ = $element;
  this.isLoading = false;
  $scope.$watchCollection(function () {
    return ngeoQueryResult;
  }, function (newQueryResult, oldQueryResult) {
    _this.isLoading = newQueryResult.pending;

    _this.updateQueryResult_(newQueryResult);

    if (newQueryResult.total > 0) {
      _this.show();
    } else if (oldQueryResult !== newQueryResult) {
      _this.open = false;

      _this.clear();
    }
  });
}

QueryWindowController.prototype.$onInit = function () {
  this.collapsed = this.options.collapsed === undefined ? !this.desktop : this.options.collapsed;
  this.draggableContainment = this.draggableContainment || 'document';
  var featuresOverlay = this.ngeoFeatureOverlayMgr_.getFeatureOverlay();
  featuresOverlay.setFeatures(this.features_);
  featuresOverlay.setStyle(Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_9__["buildStyle"])(this.options.featuresStyle));
  var highlightFeaturesOverlay = this.ngeoFeatureOverlayMgr_.getFeatureOverlay();
  highlightFeaturesOverlay.setFeatures(this.highlightFeatures_);
  highlightFeaturesOverlay.setStyle(Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_9__["buildStyle"])(this.options.selectedFeatureStyle));
  var windowContainer = this.element_.find('.gmf-displayquerywindow .windowcontainer');

  if (this.desktop) {
    windowContainer.draggable({
      handle: '.header',
      containment: this.draggableContainment
    });
    windowContainer.resizable({
      handles: 'all',
      minHeight: 240,
      minWidth: 260
    });
  }
};

QueryWindowController.prototype.show = function () {
  this.clear();
  this.updateFeatures_();
};

QueryWindowController.prototype.updateFeatures_ = function () {
  this.setCurrentResult_(0, false);

  if (this.source !== null) {
    this.collectFeatures_();
    this.highlightCurrentFeature_();
    this.open = true;
  }
};

QueryWindowController.prototype.setCurrentResult_ = function (position, setHighlight) {
  var hasChanged = false;

  if (position !== this.currentResult) {
    var i, source, features;
    var lastFeature = this.feature;
    var sources = this.ngeoQueryResult.sources;
    this.currentResult = position;

    for (i = 0; i < sources.length; i++) {
      source = sources[i];

      if (this.selectedSource !== null && this.selectedSource !== source) {
        continue;
      }

      features = source.features;

      if (position >= features.length) {
        position -= features.length;
      } else {
        this.source = source;
        this.feature = source.features[position];
        hasChanged = true;
        break;
      }
    }

    if (setHighlight) {
      this.highlightCurrentFeature_(lastFeature || undefined);
    }
  }

  return hasChanged;
};

QueryWindowController.prototype.previous = function () {
  var position = this.currentResult - 1;

  if (position < 0) {
    position = this.getResultLength() - 1;
  }

  var hasChanged = this.setCurrentResult_(position, true);

  if (hasChanged) {
    this.animate_(false);
  }
};

QueryWindowController.prototype.next = function () {
  var position = this.currentResult + 1;
  var positionMax = this.getResultLength() - 1;

  if (position > positionMax) {
    position = 0;
  }

  var hasChanged = this.setCurrentResult_(position, true);

  if (hasChanged) {
    this.animate_(true);
  }
};

QueryWindowController.prototype.updateQueryResult_ = function (queryResult) {
  this.ngeoQueryResult.total = 0;
  this.ngeoQueryResult.sources.length = 0;

  for (var _iterator = _createForOfIteratorHelperLoose(queryResult.sources), _step; !(_step = _iterator()).done;) {
    var source = _step.value;
    source.features = source.features.filter(function (feature) {
      if (!feature) {
        throw new Error('Missing feature');
      }

      return !Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_8__["isEmpty"])(Object(ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__["getFilteredFeatureValues"])(feature));
    });
    this.ngeoQueryResult.sources.push(source);
    this.ngeoQueryResult.total += source.features.length;
  }
};

QueryWindowController.prototype.getResultLength = function () {
  if (this.selectedSource === null) {
    return this.ngeoQueryResult.total;
  } else {
    return this.selectedSource.features.length;
  }
};

QueryWindowController.prototype.isFirst = function () {
  return this.currentResult == 0;
};

QueryWindowController.prototype.isLast = function () {
  return this.currentResult == this.getResultLength() - 1;
};

QueryWindowController.prototype.getFeatureValues = function () {
  if (!this.feature) {
    return null;
  }

  return Object(ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__["getFilteredFeatureValues"])(this.feature);
};

QueryWindowController.prototype.animate_ = function (isNext) {
  this.isNext = isNext;
  this.animate++;
};

QueryWindowController.prototype.collectFeatures_ = function () {
  var sources = this.ngeoQueryResult.sources;
  this.features_.clear();

  for (var _iterator2 = _createForOfIteratorHelperLoose(sources), _step2; !(_step2 = _iterator2()).done;) {
    var source = _step2.value;

    if (this.selectedSource !== null && this.selectedSource !== source) {
      continue;
    }

    var features = source.features;

    for (var _iterator3 = _createForOfIteratorHelperLoose(features), _step3; !(_step3 = _iterator3()).done;) {
      var feature = _step3.value;
      this.features_.push(feature);
    }
  }
};

QueryWindowController.prototype.highlightCurrentFeature_ = function (opt_lastFeature) {
  if (!this.feature) {
    throw new Error('Missing feature');
  }

  this.highlightFeatures_.clear();
  this.features_.remove(this.feature);
  this.highlightFeatures_.push(this.feature);

  if (opt_lastFeature !== undefined) {
    this.features_.push(opt_lastFeature);
  }
};

QueryWindowController.prototype.close = function () {
  this.open = false;
  this.clear();
  this.ngeoMapQuerent_.clear();
};

QueryWindowController.prototype.clear = function () {
  this.feature = null;
  this.source = null;
  this.currentResult = -1;
  this.features_.clear();
  this.highlightFeatures_.clear();
  this.selectedSource = null;
};

QueryWindowController.prototype.setSelectedSource = function (source) {
  if (source !== null && source.features.length <= 0) {
    return;
  }

  this.clear();
  this.selectedSource = source;
  this.updateFeatures_();
};

QueryWindowController.prototype.downloadCSV = function (source) {
  var data = this.getCSVData_(source);
  var columnDefs = this.getCSVHeaderDefinition_(data);

  if (columnDefs) {
    this.ngeoCsvDownload_.startDownload(data, columnDefs, this.filename_);
  }
};

QueryWindowController.prototype.getCSVData_ = function (source) {
  if (!source || source.features.length <= 0) {
    return;
  }

  return source.features.map(function (feature) {
    return Object(ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__["getFilteredFeatureValues"])(feature);
  });
};

QueryWindowController.prototype.getCSVHeaderDefinition_ = function (data) {
  if (!data) {
    return;
  }

  var distinctKeys = new Set();
  data.forEach(function (datum) {
    Object.keys(datum).filter(function (key) {
      return datum[key] !== undefined;
    }).forEach(function (key) {
      return distinctKeys.add(key);
    });
  });
  var columnDefs = [];
  distinctKeys.forEach(function (key) {
    return columnDefs.push({
      name: key
    });
  });
  return columnDefs;
};

myModule.controller('GmfDisplayquerywindowController', QueryWindowController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/raster/RasterService.js":
/*!**************************************************!*\
  !*** ./contribs/gmf/src/raster/RasterService.js ***!
  \**************************************************/
/*! exports provided: RasterService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RasterService", function() { return RasterService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
RasterService.$inject = ["$http", "gmfRasterUrl"];

function RasterService($http, gmfRasterUrl) {
  this.$http_ = $http;
  this.url_ = gmfRasterUrl;
}
var Param = {
  X: 'lon',
  Y: 'lat'
};

RasterService.prototype.getRaster = function (coordinate, opt_params) {
  var params = opt_params || {};
  params[Param.X] = coordinate[0];
  params[Param.Y] = coordinate[1];
  return this.$http_.get(this.url_, {
    params: params
  }).then(function (resp) {
    return resp.data;
  });
};

RasterService.prototype.handleGetRaster_ = function (resp) {
  return resp.data;
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfRaster', []);
myModule.service('gmfRaster', RasterService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/search/FulltextSearch.js":
/*!***************************************************!*\
  !*** ./contribs/gmf/src/search/FulltextSearch.js ***!
  \***************************************************/
/*! exports provided: FulltextSearchService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FulltextSearchService", function() { return FulltextSearchService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
FulltextSearchService.$inject = ["$http", "fulltextsearchUrl"];


function FulltextSearchService($http, fulltextsearchUrl) {
  this.$http_ = $http;
  this.url_ = fulltextsearchUrl;
  var url = this.url_.split('?');
  this.baseUrl_ = url[0];
  var queryString = url.length == 2 ? "?" + url[1] : '';
  this.defaultParams_ = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["decodeQueryString"])(queryString);
}

FulltextSearchService.prototype.search = function (query, params) {
  var _this = this;

  var queryParams = Object.assign({}, this.defaultParams_, params);
  queryParams['query'] = query;
  var url = this.baseUrl_ + "?" + Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["encodeQueryString"])(queryParams);
  return new Promise(function (resolve, reject) {
    _this.$http_.get(url).then(function (resp) {
      return resolve(resp['data']);
    }).catch(reject);
  });
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfSearchFulltextSearch', []);
myModule.service('gmfSearchFulltextSearch', FulltextSearchService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/search/component.html":
/*!************************************************!*\
  !*** ./contribs/gmf/src/search/component.html ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="gmf-search">\n  <input type="text" ng-attr-placeholder="{{$ctrl.placeholder|translate}}"\n    class="form-control"\n    ng-model="$ctrl.inputValue"\n    ngeo-search="$ctrl.options"\n    ngeo-search-datasets="$ctrl.datasets"\n    ngeo-search-listeners="$ctrl.listeners">\n  <span class="gmf-clear-button ng-hide"\n    ng-hide="!$ctrl.clearButton || $ctrl.inputValue == \'\' && $ctrl.featureOverlay_.isEmpty()"\n    ng-click="$ctrl.onClearButton()">\n  </span>\n</div>\n<span ng-if="$ctrl.options.colorChooser">\n  <span ng-show="$ctrl.displayColorPicker" ngeo-popover ngeo-popover-placement="bottom">\n    <button class="gmf-color-button fa fa-tint" ngeo-popover-anchor\n            data-original-title="{{\'Change the color of the search result\'|translate}}"></button>\n    <div ngeo-popover-content>\n      <div ngeo-colorpicker ngeo-colorpicker-color="$ctrl.color"></div>\n    </div>\n  </span>\n</span>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/search/component.js":
/*!**********************************************!*\
  !*** ./contribs/gmf/src/search/component.js ***!
  \**********************************************/
/*! exports provided: SearchController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchController", function() { return SearchController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/index.js */ "./contribs/gmf/src/index.js");
/* harmony import */ var gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/backgroundlayerselector/status.js */ "./contribs/gmf/src/backgroundlayerselector/status.js");
/* harmony import */ var gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/layertree/TreeManager.js */ "./contribs/gmf/src/layertree/TreeManager.js");
/* harmony import */ var gmf_search_FulltextSearch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gmf/search/FulltextSearch.js */ "./contribs/gmf/src/search/FulltextSearch.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ngeo_misc_AutoProjection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/misc/AutoProjection.js */ "./src/misc/AutoProjection.js");
/* harmony import */ var ngeo_misc_colorpickerComponent_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/misc/colorpickerComponent.js */ "./src/misc/colorpickerComponent.js");
/* harmony import */ var ngeo_message_popoverComponent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/message/popoverComponent.js */ "./src/message/popoverComponent.js");
/* harmony import */ var ngeo_search_module_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/search/module.js */ "./src/search/module.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_color_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/color.js */ "./node_modules/ol/color.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_uri_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/uri.js */ "./node_modules/ol/uri.js");
/* harmony import */ var ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/geom/SimpleGeometry.js */ "./node_modules/ol/geom/SimpleGeometry.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




















var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfSearch', [gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, gmf_search_FulltextSearch_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_misc_AutoProjection_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, ngeo_misc_colorpickerComponent_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_search_module_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, ngeo_message_popoverComponent_js__WEBPACK_IMPORTED_MODULE_9__["default"].name]);

function gmfSearchTemplateUrl_(element, attrs) {
  var templateUrl = attrs.gmfSearchTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'gmf/search';
}

myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/search', __webpack_require__(/*! ./component.html */ "./contribs/gmf/src/search/component.html"));
}]);
gmfSearchTemplateUrl.$inject = ["$element", "$attrs", "gmfSearchTemplateUrl"];

function gmfSearchTemplateUrl($element, $attrs, gmfSearchTemplateUrl) {
  return gmfSearchTemplateUrl($element, $attrs);
}

var searchComponent = {
  bindings: {
    'inputValue': '=?gmfSearchInputValue',
    'map': '<gmfSearchMap',
    'typeaheadOptions': '<?gmfSearchOptions',
    'additionalListeners': '<gmfSearchListeners',
    'onInitCallback': '<?gmfSearchOnInit',
    'searchActionCallback': '&?gmfSearchAction'
  },
  controller: 'gmfSearchController',
  templateUrl: gmfSearchTemplateUrl
};
myModule.value('gmfSearchTemplateUrl', gmfSearchTemplateUrl_);
myModule.component('gmfSearch', searchComponent);
var SearchController = function () {
  SearchController.$inject = ["$element", "$scope", "$compile", "$timeout", "gettextCatalog", "ngeoAutoProjection", "ngeoSearchCreateGeoJSONBloodhound", "ngeoFeatureOverlayMgr", "gmfThemes", "gmfTreeManager", "gmfSearchFulltextSearch", "ngeoLocation", "gmfSearchOptions", "gmfSearchGroups", "fulltextsearchUrl"];

  function SearchController($element, $scope, $compile, $timeout, gettextCatalog, ngeoAutoProjection, ngeoSearchCreateGeoJSONBloodhound, ngeoFeatureOverlayMgr, gmfThemes, gmfTreeManager, gmfSearchFulltextSearch, ngeoLocation, gmfSearchOptions, gmfSearchGroups, fulltextsearchUrl) {
    var _this = this;

    this.options = gmfSearchOptions;
    this.groups = gmfSearchGroups;
    this.fulltextsearchUrl = fulltextsearchUrl;
    this.element_ = $element;
    this.scope_ = $scope;
    this.compile_ = $compile;
    this.timeout_ = $timeout;
    this.gettextCatalog_ = gettextCatalog;
    this.gmfThemes_ = gmfThemes;
    this.gmfTreeManager_ = gmfTreeManager;
    this.fullTextSearch_ = gmfSearchFulltextSearch;
    this.ngeoSearchCreateGeoJSONBloodhound_ = ngeoSearchCreateGeoJSONBloodhound;
    this.ngeoFeatureOverlayMgr = ngeoFeatureOverlayMgr;
    this.ngeoLocation_ = ngeoLocation;
    this.ngeoAutoProjection_ = ngeoAutoProjection;
    this.map = null;
    this.onInitCallback = null;
    this.searchActionCallback;
    this.placeholder = this.options.placeholder || 'Search…';
    gettextCatalog.getString('Search…');
    this.coordinatesProjectionsInstances = [];
    this.featureOverlay_ = ngeoFeatureOverlayMgr.getFeatureOverlay();
    this.typeaheadOptions = {
      highlight: true
    };
    this.datasets = [];
    this.inputValue = '';
    this.color = '';
    this.displayColorPicker = false;
    this.listeners = null;
    this.additionalListeners = {};
    this.clearButton = this.options.clearButton !== false;

    if (this.clearButton) {
      this.element_.find('input').on('focus blur', function () {
        _this.clear();
      });
    }

    this.featureOverlay_.setStyle(this.getSearchStyle_.bind(this));
    this.scope_.$watch(function () {
      return _this.color;
    }, this.setStyleColor.bind(this));

    if (this.ngeoLocation_) {
      var searchQuery = this.ngeoLocation_.getParam('search');

      if (searchQuery) {
        var resultIndex = 1;

        if (this.ngeoLocation_.getParam('search-select-index')) {
          resultIndex = parseInt(this.ngeoLocation_.getParam('search-select-index') || '', 10);
        }

        var mapZoom;

        if (this.ngeoLocation_.getParam('search-maxzoom')) {
          mapZoom = parseInt(this.ngeoLocation_.getParam('search-maxzoom') || '', 10);
        } else if (this.ngeoLocation_.getParam('map_zoom')) {
          mapZoom = parseInt(this.ngeoLocation_.getParam('map_zoom') || '', 10);
        }

        this.fulltextsearch_(searchQuery, resultIndex, mapZoom);
      }
    }
  }

  var _proto = SearchController.prototype;

  _proto.$onInit = function $onInit() {
    this.coordinatesProjectionsInstances = this.options.coordinatesProjections === undefined ? [this.map.getView().getProjection()] : this.ngeoAutoProjection_.getProjectionList(this.options.coordinatesProjections);
    this.initDatasets_();
    this.listeners = this.mergeListeners_(this.additionalListeners, {
      select: this.select_.bind(this),
      change: this.handleChange_.bind(this),
      close: this.close_.bind(this),
      datasetsempty: this.datasetsempty_.bind(this)
    });

    if (this.onInitCallback) {
      this.onInitCallback();
    }
  };

  _proto.mergeListeners_ = function mergeListeners_(additionalListeners, listeners) {
    if (additionalListeners === undefined) {
      return listeners;
    }

    return {
      open: additionalListeners.open,
      close: additionalListeners.close === undefined ? listeners.close : function () {
        listeners.close();
        additionalListeners.close();
      },
      change: additionalListeners.change,
      cursorchange: additionalListeners.cursorchange,
      datasetsempty: additionalListeners.datasetsempty,
      select: additionalListeners.select === undefined ? listeners.select : function (evt, obj, dataset) {
        listeners.select(evt, obj, dataset);
        additionalListeners.select(evt, obj, dataset);
      },
      autocomplete: additionalListeners.autocomplete
    };
  };

  _proto.initDatasets_ = function initDatasets_() {
    var _this2 = this;

    var gettextCatalog = this.gettextCatalog_;

    var _loop = function _loop() {
      var datasource = _step.value;
      var groupValues = datasource.groupValues !== undefined ? datasource.groupValues : _this2.groups;
      var groupActions = datasource.groupActions || [];
      var filters = [];

      if (groupValues.length === 0) {
        filters.push({
          'title': '',
          'filter': _this2.filterLayername_()
        });
      } else {
        groupValues.forEach(function (layerName) {
          filters.push({
            'title': layerName,
            'filter': _this2.filterLayername_(layerName)
          });
        });
      }

      groupActions.forEach(function (action) {
        filters.push({
          'title': gettextCatalog.getString(action.title),
          'filter': _this2.filterAction_(action.action)
        });
      });
      filters.forEach(function (filter) {
        _this2.datasets.push(_this2.createDataset_({
          bloodhoundOptions: datasource.bloodhoundOptions,
          datasetTitle: filter.title,
          labelKey: datasource.labelKey,
          projection: datasource.projection,
          typeaheadDatasetOptions: datasource.typeaheadDatasetOptions,
          url: datasource.url || _this2.fulltextsearchUrl
        }, filter.filter));
      });
    };

    for (var _iterator = _createForOfIteratorHelperLoose(this.options.datasources || []), _step; !(_step = _iterator()).done;) {
      _loop();
    }

    this.datasets.push({
      source: this.createSearchCoordinates_(this.map.getView()),
      name: 'coordinates',
      display: 'label',
      templates: {
        header: function header() {
          var header = gettextCatalog.getString('Recenter to');
          return "<div class=\"gmf-search-header\" translate>" + header + "</div>";
        },
        suggestion: function suggestion(_suggestion) {
          var coordinates = _suggestion.label;
          var html = "<p class=\"gmf-search-label\">" + coordinates + "</p>";
          html = "<div class=\"gmf-search-datum\">" + html + "</div>";
          return html;
        }
      }
    });
  };

  _proto.createDataset_ = function createDataset_(config, opt_filter) {
    var gettextCatalog = this.gettextCatalog_;
    var componentScope = this.scope_;
    var compile = this.compile_;
    var bloodhoundEngine = this.createAndInitBloodhound_(config, opt_filter);
    var typeaheadDataset = {
      limit: Infinity,
      source: bloodhoundEngine.ttAdapter(),
      display: function display(suggestion) {
        return suggestion.get(config.labelKey);
      },
      templates: {
        header: function header() {
          if (!config.datasetTitle) {
            return '';
          } else {
            var header = gettextCatalog.getString(config.datasetTitle);
            return "<div class=\"gmf-search-header\">" + header + "</div>";
          }
        },
        suggestion: function suggestion(_suggestion2) {
          var scope = componentScope.$new(true);
          scope.feature = _suggestion2;
          var html = "<p class=\"gmf-search-label\" translate>" + _suggestion2.get(config.labelKey) + "</p>";
          html += "<p class=\"gmf-search-group\" translate>" + (_suggestion2.get('layer_name') || config.datasetTitle) + "</p>";
          html = "<div class=\"gmf-search-datum\">" + html + "</div>";
          return compile(html)(scope).html();
        }
      }
    };

    if (config.typeaheadDatasetOptions) {
      Object.assign(typeaheadDataset, config.typeaheadDatasetOptions);
    }

    return typeaheadDataset;
  };

  _proto.filterAction_ = function filterAction_(action) {
    return function (feature) {
      var properties = feature.properties || {};

      if (properties.actions) {
        return !properties.layer_name && properties.actions.some(function (act) {
          return act.action === action;
        });
      } else {
        return false;
      }
    };
  };

  _proto.filterLayername_ = function filterLayername_(opt_layerName) {
    return function (feature) {
      var featureLayerName = (feature.properties || {}).layer_name;

      if (featureLayerName === undefined) {
        return false;
      }

      if (opt_layerName === undefined) {
        return true;
      }

      return featureLayerName === opt_layerName;
    };
  };

  _proto.createAndInitBloodhound_ = function createAndInitBloodhound_(config, opt_filter) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    var mapProjectionCode = this.map.getView().getProjection().getCode();
    var remoteOptions = this.getBloodhoudRemoteOptions_();
    var bloodhound = this.ngeoSearchCreateGeoJSONBloodhound_(config.url, opt_filter, ol_proj_js__WEBPACK_IMPORTED_MODULE_15__["get"](mapProjectionCode), ol_proj_js__WEBPACK_IMPORTED_MODULE_15__["get"](config.projection), config.bloodhoundOptions, remoteOptions);
    bloodhound.initialize();
    return bloodhound;
  };

  _proto.getBloodhoudRemoteOptions_ = function getBloodhoudRemoteOptions_() {
    var gettextCatalog = this.gettextCatalog_;
    return {
      rateLimitWait: this.options.delay == undefined ? 50 : this.options.delay,
      prepare: function prepare(query, settings) {
        var url = settings.url;

        if (!url) {
          throw new Error('Missing URL');
        }

        var lang = gettextCatalog.getCurrentLanguage();
        settings.xhrFields = {
          withCredentials: true
        };
        settings.url = Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_16__["appendParams"])(url, {
          query: query,
          lang: lang
        });
        return settings;
      }
    };
  };

  _proto.createSearchCoordinates_ = function createSearchCoordinates_(view) {
    var _this3 = this;

    var viewProjection = view.getProjection();
    var extent = viewProjection.getExtent();
    return function (query, callback) {
      var suggestions = [];

      var coordinates = _this3.ngeoAutoProjection_.stringToCoordinates(query);

      if (coordinates === null) {
        return;
      }

      var position = _this3.ngeoAutoProjection_.tryProjectionsWithInversion(coordinates, extent, viewProjection, _this3.options.coordinatesProjections);

      if (position === null) {
        return;
      }

      suggestions.push({
        label: coordinates.join(' '),
        position: position,
        tt_source: 'coordinates'
      });
      callback(suggestions);
    };
  };

  _proto.getSearchStyle_ = function getSearchStyle_(feature, resolution) {
    if (!feature) {
      throw new Error('Missing feature');
    }

    var style = Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_18__["buildStyle"])(this.options.styles[feature.get('layer_name')] || this.options.styles['default']);
    var trueStyle = style;

    if (this.color) {
      var color = Object(ol_color_js__WEBPACK_IMPORTED_MODULE_12__["asArray"])(this.color);
      var strokeStyle = trueStyle.getStroke();
      var prevStrokeColor = strokeStyle.getColor();
      var strokeColor = color.slice();
      strokeColor[3] = prevStrokeColor[3];

      if (strokeStyle) {
        strokeStyle.setColor(strokeColor);
      }

      var fillStyle = trueStyle.getFill();
      var prevFillColor = fillStyle.getColor();
      var fillColor = color.slice();
      fillColor[3] = prevFillColor[3];

      if (fillStyle) {
        fillStyle.setColor(fillColor);
      }

      var imageStyle = trueStyle.getImage();

      if (imageStyle) {
        imageStyle = imageStyle.clone();
        var circleStyle = imageStyle;
        var imageStrokeStyle = circleStyle.getStroke();

        if (imageStrokeStyle) {
          imageStrokeStyle.setColor(strokeColor);
        }

        var imageFillStyle = circleStyle.getFill();

        if (imageFillStyle) {
          imageFillStyle.setColor(fillColor);
        }

        trueStyle.setImage(imageStyle);
      }
    }

    return trueStyle;
  };

  _proto.setStyleColor = function setStyleColor(color) {
    if (color) {
      this.color = color;
      this.ngeoFeatureOverlayMgr.getLayer().changed();
    }
  };

  _proto.setTTDropdownVisibility_ = function setTTDropdownVisibility_() {
    if (this.clearButton) {
      var ttDropdown = this.element_.find('.twitter-typeahead .tt-menu');
      this.inputValue ? ttDropdown.show() : ttDropdown.hide();
    }
  };

  _proto.onClearButton = function onClearButton() {
    this.featureOverlay_.clear();
    this.clear();
    this.displayColorPicker = false;
  };

  _proto.clear = function clear() {
    var typeahead = this.element_.find('.twitter-typeahead');
    var ttmenu = typeahead.children('.tt-menu');
    var inputs = typeahead.children('input');
    this.inputValue = '';
    $(inputs[1]).typeahead('val', '');
    ttmenu.children('.tt-dataset').empty();
    this.setTTDropdownVisibility_();
  };

  _proto.blur = function blur() {
    var typeahead = this.element_.find('.twitter-typeahead');
    var inputs = typeahead.children('input');
    this.timeout_(function () {
      $(inputs[1]).blur();
    });
  };

  _proto.select_ = function select_(event, suggestion, dataset) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    if (suggestion.tt_source === 'coordinates') {
      var coordinateSuggestion = suggestion;
      var geom = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"](coordinateSuggestion.position);
      this.featureOverlay_.clear();
      this.featureOverlay_.addFeature(new ol_Feature_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        geometry: geom,
        'layer_name': gmf_index_js__WEBPACK_IMPORTED_MODULE_1__["COORDINATES_LAYER_NAME"]
      }));
      this.map.getView().setCenter(coordinateSuggestion.position);
      this.leaveSearch_();
    } else {
      if (!(suggestion instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_11__["default"])) {
        throw new Error('Wrong suggestion type');
      }

      this.selectFromGMF_(event, suggestion, dataset);
    }
  };

  _proto.selectFromGMF_ = function selectFromGMF_(event, feature, dataset) {
    var _this4 = this;

    if (!this.map) {
      throw new Error('Missing map');
    }

    var actions = feature.get('actions');
    var featureGeometry = feature.getGeometry();

    if (actions) {
      var _loop2 = function _loop2(i, ii) {
        var action = actions[i];
        var actionName = action.action;
        var actionData = action.data;

        if (actionName == 'add_theme') {
          _this4.gmfThemes_.getThemesObject().then(function (themes) {
            var theme = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_5__["findThemeByName"])(themes, actionData);

            if (theme) {
              gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_2__["gmfBackgroundlayerStatus"].touchedByUser = true;

              _this4.gmfTreeManager_.addFirstLevelGroups(theme.children);
            }
          });
        } else if (actionName == 'add_group') {
          _this4.gmfTreeManager_.addGroupByName(actionData, true);
        } else if (actionName == 'add_layer') {
          var groupActions = _this4.options.datasources[0].groupActions;
          var datasourcesActionsHaveAddLayer;
          groupActions.forEach(function (groupAction) {
            if (groupAction.action === 'add_layer') {
              datasourcesActionsHaveAddLayer = true;
              return true;
            }
          });

          if (datasourcesActionsHaveAddLayer) {
            var silent = !!featureGeometry;

            _this4.gmfTreeManager_.addGroupByLayerName(actionData, true, silent);
          }
        } else {
          if (_this4.searchActionCallback) {
            _this4.searchActionCallback(action);
          }
        }
      };

      for (var i = 0, ii = actions.length; i < ii; i++) {
        _loop2(i, ii);
      }
    }

    var size = this.map.getSize();

    if (featureGeometry instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_17__["default"] && size) {
      var view = this.map.getView();
      this.featureOverlay_.clear();
      this.featureOverlay_.addFeature(feature);
      this.displayColorPicker = true;
      var fitArray = featureGeometry.getType() === 'GeometryCollection' ? featureGeometry.getExtent() : featureGeometry;
      view.fit(fitArray, {
        size: size,
        maxZoom: this.options.maxZoom || 16
      });
    }

    this.leaveSearch_();
  };

  _proto.leaveSearch_ = function leaveSearch_() {
    if (!this.clearButton) {
      this.clear();
    }

    this.blur();
  };

  _proto.close_ = function close_() {
    if (!this.clearButton) {
      this.setTTDropdownVisibility_();
    }
  };

  _proto.datasetsempty_ = function datasetsempty_(event, query, empty) {
    var menu = this.element_.find('.twitter-typeahead .tt-menu');
    var message = menu.children('.gmf-search-no-results');

    if (message.length == 0) {
      var gettextCatalog = this.gettextCatalog_;
      var innerHTML = gettextCatalog.getString('No result found');
      var div = $("<div class=\"gmf-search-no-results\" translate>" + innerHTML + "</div>");
      menu.append(div);
    }

    if (empty) {
      message.show();
      menu.addClass('gmf-search-no-results');
    } else {
      menu.removeClass('gmf-search-no-results');
      message.hide();
    }
  };

  _proto.fulltextsearch_ = function fulltextsearch_(query, resultIndex, opt_zoom) {
    var _this5 = this;

    if (resultIndex < 1) {
      resultIndex = 1;
    }

    this.fullTextSearch_.search(query, {
      limit: "" + resultIndex
    }).then(function (data) {
      if (!_this5.map) {
        throw new Error('Missing map');
      }

      if (data && data.features[resultIndex - 1]) {
        var format = new ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_14__["default"]();
        var feature = format.readFeature(data.features[resultIndex - 1]);

        _this5.featureOverlay_.addFeature(feature);

        var fitOptions = {};

        if (opt_zoom !== undefined) {
          fitOptions.maxZoom = opt_zoom;
          fitOptions.size = _this5.map.getSize() || null;
        }

        var geometry = feature.getGeometry();

        if (!geometry) {
          throw new Error('Missing geometry');
        }

        _this5.map.getView().fit(geometry.getExtent(), fitOptions);

        _this5.inputValue = feature.get('label');
      }
    });
  };

  _proto.handleChange_ = function handleChange_(event, query) {
    if (query) {
      return;
    }

    this.datasetsempty_(event, query, false);
  };

  return SearchController;
}();
myModule.controller('gmfSearchController', SearchController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./contribs/gmf/src/search/module.js":
/*!*******************************************!*\
  !*** ./contribs/gmf/src/search/module.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_search_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/search/component.js */ "./contribs/gmf/src/search/component.js");
/* harmony import */ var gmf_search_FulltextSearch_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/search/FulltextSearch.js */ "./contribs/gmf/src/search/FulltextSearch.js");
/* harmony import */ var _search_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search.scss */ "./contribs/gmf/src/search/search.scss");
/* harmony import */ var _search_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_search_scss__WEBPACK_IMPORTED_MODULE_3__);




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfSearchModule', [gmf_search_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_search_FulltextSearch_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/search/search.scss":
/*!*********************************************!*\
  !*** ./contribs/gmf/src/search/search.scss ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./contribs/gmf/src/theme/Manager.js":
/*!*******************************************!*\
  !*** ./contribs/gmf/src/theme/Manager.js ***!
  \*******************************************/
/*! exports provided: ThemeEventType, ThemeManagerService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThemeEventType", function() { return ThemeEventType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThemeManagerService", function() { return ThemeManagerService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/layertree/TreeManager.js */ "./contribs/gmf/src/layertree/TreeManager.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/statemanager/Service.js */ "./src/statemanager/Service.js");
ThemeManagerService.$inject = ["$rootScope", "gmfThemes", "gmfTreeManagerModeFlush", "gmfTreeManager", "ngeoStateManager"];




var ThemeEventType = {
  THEME_NAME_SET: 'gmf-thememanager-theme_name_set'
};
function ThemeManagerService($rootScope, gmfThemes, gmfTreeManagerModeFlush, gmfTreeManager, ngeoStateManager) {
  this.$rootScope_ = $rootScope;
  this.gmfThemes_ = gmfThemes;
  this.modeFlush = gmfTreeManagerModeFlush;
  this.gmfTreeManager_ = gmfTreeManager;
  this.ngeoStateManager_ = ngeoStateManager;
  this.themeName_ = '';
}

ThemeManagerService.prototype.addTheme = function (theme, opt_silent) {
  if (this.modeFlush) {
    this.ngeoStateManager_.updateState({
      'theme': theme.name
    });
    this.setThemeName(theme.name);
    this.gmfTreeManager_.setFirstLevelGroups(theme.children);
  } else {
    this.gmfTreeManager_.addFirstLevelGroups(theme.children, false, opt_silent);
  }
};

ThemeManagerService.prototype.getThemeName = function () {
  return this.themeName_;
};

ThemeManagerService.prototype.isLoading = function () {
  return !this.gmfThemes_.loaded;
};

ThemeManagerService.prototype.updateCurrentTheme = function (themeName, fallbackThemeName, opt_silent) {
  var _this = this;

  this.gmfThemes_.getThemesObject().then(function (themes) {
    if (!themeName && _this.modeFlush) {
      var fallbackTheme = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["findThemeByName"])(themes, fallbackThemeName);

      if (fallbackTheme) {
        _this.gmfTreeManager_.setInitialFirstLevelGroups(fallbackTheme.children);

        _this.gmfTreeManager_.addFirstLevelGroups(fallbackTheme.children, false, opt_silent);
      }
    }

    if (themeName) {
      var theme = Object(gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["findThemeByName"])(themes, themeName);

      if (theme) {
        _this.addTheme(theme, true);
      }
    } else {
      _this.setThemeName(fallbackThemeName);
    }
  });
};

ThemeManagerService.prototype.setThemeName = function (name, opt_silent) {
  this.themeName_ = name;

  if (!opt_silent) {
    this.$rootScope_.$emit(ThemeEventType.THEME_NAME_SET, name);
  }
};

ThemeManagerService.prototype.removeAll = function () {
  this.gmfTreeManager_.removeAll();
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfThemeManager', [gmf_layertree_TreeManager_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
myModule.service('gmfThemeManager', ThemeManagerService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/theme/Themes.js":
/*!******************************************!*\
  !*** ./contribs/gmf/src/theme/Themes.js ***!
  \******************************************/
/*! exports provided: ThemesService, findGroupByLayerNodeName, findGroupByName, findObjectByName, findThemeByName, getFlatNodes, getSnappingConfig, getNodeMaxResolution, getNodeMinResolution, ThemeNodeType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThemesService", function() { return ThemesService; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findGroupByLayerNodeName", function() { return findGroupByLayerNodeName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findGroupByName", function() { return findGroupByName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findObjectByName", function() { return findObjectByName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findThemeByName", function() { return findThemeByName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFlatNodes", function() { return getFlatNodes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSnappingConfig", function() { return getSnappingConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNodeMaxResolution", function() { return getNodeMaxResolution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNodeMinResolution", function() { return getNodeMinResolution; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThemeNodeType", function() { return ThemeNodeType; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_events_Target_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events/Target.js */ "./node_modules/ol/events/Target.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }









var ThemesService = function (_olEventsEventTarget) {
  ThemesService.$inject = ["$http", "$injector", "$q", "ngeoLayerHelper", "gettextCatalog", "gmfThemesOptions", "gmfTreeUrl"];

  _inheritsLoose(ThemesService, _olEventsEventTarget);

  function ThemesService($http, $injector, $q, ngeoLayerHelper, gettextCatalog, gmfThemesOptions, gmfTreeUrl) {
    var _this;

    _this = _olEventsEventTarget.call(this) || this;
    _this.addBlankBackgroundLayer_ = true;

    if (gmfThemesOptions.addBlankBackgroundLayer !== undefined) {
      _this.addBlankBackgroundLayer_ = gmfThemesOptions.addBlankBackgroundLayer;
    }

    _this.$q_ = $q;
    _this.$http_ = $http;
    _this.treeUrl_ = gmfTreeUrl;
    _this.ngeoLocation_ = null;

    if ($injector.has('ngeoLocation')) {
      _this.ngeoLocation_ = $injector.get('ngeoLocation');
    }

    _this.layerHelper_ = ngeoLayerHelper;
    _this.gettextCatalog = gettextCatalog;
    _this.deferred_ = $q.defer();
    _this.promise_ = _this.deferred_.promise;
    _this.loaded = false;
    _this.bgLayerPromise_ = null;
    return _this;
  }

  var _proto = ThemesService.prototype;

  _proto.getBgLayers = function getBgLayers() {
    var _this2 = this;

    var gettextCatalog = this.gettextCatalog;

    if (this.bgLayerPromise_) {
      return this.bgLayerPromise_;
    }

    var $q = this.$q_;
    var layerHelper = this.layerHelper_;

    var getIds = function getIds(item, array) {
      array.push(Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(item));
      var groupItem = item;
      var children = groupItem.children || [];
      children.forEach(function (child) {
        getIds(child, array);
      });
    };

    var callback = function callback(item, layer) {
      layer.set('label', item.name);
      layer.set('metadata', item.metadata);
      layer.set('dimensions', item.dimensions);
      var ids = [];
      getIds(item, ids);
      layer.set('querySourceIds', ids);
      layer.set(ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_1__["DATASOURCE_ID"], item.id);
      return layer;
    };

    var layerLayerCreationFn = function layerLayerCreationFn(ogcServers, gmfLayer) {
      if (gmfLayer.type === 'WMTS') {
        var gmfLayerWMTS = gmfLayer;

        if (!gmfLayerWMTS.url) {
          throw 'Layer URL is required';
        }

        var minResolution = getNodeMinResolution(gmfLayerWMTS);
        var maxResolution = getNodeMaxResolution(gmfLayerWMTS);
        var layer = layerHelper.createWMTSLayerFromCapabilitites(gmfLayerWMTS.url, gmfLayerWMTS.layer || '', gmfLayerWMTS.matrixSet, gmfLayer.dimensions, gmfLayerWMTS.metadata.customOpenLayersOptions, minResolution, maxResolution, gmfLayerWMTS.metadata.opacity).then(callback.bind(null, gmfLayer)).then(null, function (response) {
          var message = "Unable to build layer \"" + gmfLayerWMTS.layer + "\" " + ("from WMTSCapabilities: " + gmfLayerWMTS.url + "\n");
          message += "OpenLayers error is \"" + response.message;
          console.error(message);
          return $q.resolve(undefined);
        });
        return layer;
      } else if (gmfLayer.type === 'WMS') {
        var gmfLayerWMS = gmfLayer;

        if (!gmfLayerWMS.ogcServer) {
          throw new Error('Missing gmfLayerWMS.ogcServer');
        }

        var server = ogcServers[gmfLayerWMS.ogcServer];

        if (!server) {
          throw new Error('Missing server');
        }

        if (!server.url) {
          throw new Error('Missing server.url');
        }

        if (!server.imageType) {
          throw new Error('Missing server.imageType');
        }

        var opt_params = {
          STYLES: gmfLayerWMS.style
        };

        if (gmfLayer.dimensions) {
          for (var _i = 0, _Object$entries = Object.entries(gmfLayer.dimensions); _i < _Object$entries.length; _i++) {
            var _Object$entries$_i = _Object$entries[_i],
                key = _Object$entries$_i[0],
                value = _Object$entries$_i[1];

            if (value !== null) {
              opt_params[key] = value;
            }
          }
        }

        return callback(gmfLayer, layerHelper.createBasicWMSLayer(server.url, gmfLayerWMS.layers || '', server.imageType, server.type, undefined, opt_params, server.credential ? 'use-credentials' : 'anonymous', gmfLayerWMS.metadata.customOpenLayersOptions));
      }

      throw "Unsupported type: " + gmfLayer.type;
    };

    var layerGroupCreationFn = function layerGroupCreationFn(ogcServers, item) {
      var orderedChildren = item.children.map(function (x) {
        return x;
      }).reverse();
      var promises = orderedChildren.map(function (item) {
        return layerLayerCreationFn(ogcServers, item);
      });
      return $q.all(promises).then(function (layers) {
        var collection;

        if (layers) {
          layers = layers.filter(function (l) {
            return l;
          });
          collection = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_4__["default"](layers);
        }

        var group = layerHelper.createBasicGroup(collection);
        callback(item, group);
        return group;
      });
    };

    var promiseSuccessFn = function promiseSuccessFn(data) {
      var promises = data.background_layers.map(function (item) {
        var itemLayer = item;
        var itemGroup = item;
        var itemType = itemLayer.type;

        if (itemType === 'WMTS' || itemType === 'WMS') {
          return layerLayerCreationFn(data.ogcServers, itemLayer);
        } else if (itemGroup.children) {
          return layerGroupCreationFn(data.ogcServers, itemGroup);
        } else {
          return undefined;
        }
      });
      return $q.all(promises);
    };

    this.bgLayerPromise_ = this.promise_.then(promiseSuccessFn).then(function (values) {
      var layers = [];

      if (_this2.addBlankBackgroundLayer_) {
        gettextCatalog.getString('blank');
        var layer = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
          source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_7__["default"]()
        });
        layer.set('label', 'blank');
        layer.set('metadata', {
          thumbnail: ''
        });
        layers.push(layer);
      }

      values.forEach(function (layer) {
        if (layer) {
          layers.push(layer);
        }
      });
      return layers;
    });
    return this.bgLayerPromise_;
  };

  _proto.getThemeObject = function getThemeObject(themeName) {
    return this.promise_.then(function (data) {
      return findThemeByName(data.themes, themeName);
    });
  };

  _proto.getThemesObject = function getThemesObject() {
    return this.promise_.then(function (data) {
      return data.themes;
    });
  };

  _proto.getBackgroundLayersObject = function getBackgroundLayersObject() {
    if (this.promise_ === null) {
      throw new Error('Missing promise');
    }

    return this.promise_.then(function (data) {
      return data.background_layers;
    });
  };

  _proto.getOgcServersObject = function getOgcServersObject() {
    if (this.promise_ === null) {
      throw new Error('Missing promise');
    }

    return this.promise_.then(function (data) {
      return data.ogcServers;
    });
  };

  _proto.hasEditableLayers = function hasEditableLayers() {
    if (this.promise_ === null) {
      throw new Error('Missing promise');
    }

    return this.promise_.then(this.hasEditableLayers_.bind(this));
  };

  _proto.hasEditableLayers_ = function hasEditableLayers_(data) {
    var _this3 = this;

    return data.themes.some(function (theme) {
      var hasEditableLayers = theme.children.some(_this3.hasNodeEditableLayers_.bind(_this3));
      return hasEditableLayers;
    });
  };

  _proto.hasNodeEditableLayers_ = function hasNodeEditableLayers_(node) {
    var gmfGroup = node;
    var gmfLayer = node;

    if (gmfLayer.editable) {
      return true;
    }

    var hasEditableLayers = false;
    var children = gmfGroup.children;

    if (children && children.length) {
      hasEditableLayers = children.some(this.hasNodeEditableLayers_.bind(this));
    }

    return hasEditableLayers;
  };

  _proto.loadThemes = function loadThemes(opt_roleId) {
    var _this4 = this;

    if (!this.treeUrl_) {
      throw 'gmfTreeUrl should be defined.';
    }

    if (this.loaded) {
      this.deferred_ = this.$q_.defer();
      this.promise_ = this.deferred_.promise;
      this.bgLayerPromise_ = null;
      this.loaded = false;
    }

    this.$http_.get(this.treeUrl_, {
      params: opt_roleId !== undefined ? {
        'role': opt_roleId
      } : {},
      cache: false,
      withCredentials: true
    }).then(function (response) {
      if (response.data.errors.length != 0) {
        var message = "The themes contain some errors:\n" + response.data.errors.join('\n');
        console.error(message);

        if (_this4.ngeoLocation_ !== null && _this4.ngeoLocation_.hasParam('debug')) {
          window.alert(message);
        }
      }

      Object.values(response.data.ogcServers).forEach(function (server) {
        server.geometryName = server.geometryName || 'geometry';
      });

      _this4.deferred_.resolve(response.data);

      _this4.dispatchEvent('change');

      _this4.loaded = true;
    }, function (response) {
      _this4.deferred_.reject(response);
    });
  };

  return ThemesService;
}(ol_events_Target_js__WEBPACK_IMPORTED_MODULE_5__["default"]);
function findGroupByLayerNodeName(themes, name) {
  for (var i = 0, ii = themes.length; i < ii; i++) {
    var theme = themes[i];

    for (var j = 0, jj = theme.children.length; j < jj; j++) {
      var group = theme.children[j];
      var childNodes = [];
      getFlatNodes(group, childNodes);

      if (findObjectByName(childNodes, name)) {
        return group;
      }
    }
  }

  return null;
}
function findGroupByName(themes, name) {
  for (var i = 0, ii = themes.length; i < ii; i++) {
    var theme = themes[i];

    for (var j = 0, jj = theme.children.length; j < jj; j++) {
      var group = theme.children[j];
      var internalNodes = [];
      getFlatInternalNodes(group, internalNodes);

      if (findObjectByName(internalNodes, name)) {
        return group;
      }
    }
  }

  return null;
}
function findObjectByName(objects, objectName) {
  return ol_array_js__WEBPACK_IMPORTED_MODULE_3__["find"](objects, function (object) {
    return object.name === objectName;
  });
}
function findThemeByName(themes, themeName) {
  return findObjectByName(themes, themeName);
}

function getFlatInternalNodes(node, nodes) {
  var gmfGroup = node;
  var children = gmfGroup.children;

  if (children !== undefined) {
    nodes.push(node);

    for (var _iterator = _createForOfIteratorHelperLoose(children), _step; !(_step = _iterator()).done;) {
      var child = _step.value;
      getFlatInternalNodes(child, nodes);
    }
  }
}

function getFlatNodes(node, nodes) {
  var gmfGroup = node;
  var children = gmfGroup.children;

  if (children !== undefined) {
    for (var _iterator2 = _createForOfIteratorHelperLoose(children), _step2; !(_step2 = _iterator2()).done;) {
      var child = _step2.value;
      getFlatNodes(child, nodes);
    }
  } else {
    nodes.push(node);
  }
}
function getSnappingConfig(node) {
  var config = node.metadata && node.metadata.snappingConfig !== undefined ? node.metadata.snappingConfig : null;

  if (config && config.activated === undefined) {
    config.activated = true;
  }

  return config;
}
function getNodeMaxResolution(gmfLayer) {
  var metadata = gmfLayer.metadata;
  var gmfLayerWMS = gmfLayer;
  var maxResolution = gmfLayerWMS.maxResolutionHint;

  if (maxResolution === undefined && metadata !== undefined) {
    maxResolution = metadata.maxResolution;
  }

  return maxResolution;
}
function getNodeMinResolution(gmfLayer) {
  var metadata = gmfLayer.metadata;
  var gmfLayerWMS = gmfLayer;
  var minResolution = gmfLayerWMS.minResolutionHint;

  if (minResolution === undefined && metadata !== undefined) {
    minResolution = metadata.minResolution;
  }

  return minResolution;
}
var ThemeNodeType = {
  MIXED_GROUP: 'MixedGroup',
  NOT_MIXED_GROUP: 'NotMixedGroup',
  WMTS: 'WMTS',
  WMS: 'WMS'
};
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfThemes', [ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('gmfThemes', ThemesService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./contribs/gmf/src/theme/module.js":
/*!******************************************!*\
  !*** ./contribs/gmf/src/theme/module.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/theme/Manager.js */ "./contribs/gmf/src/theme/Manager.js");
/* harmony import */ var gmf_theme_selectorComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/theme/selectorComponent.js */ "./contribs/gmf/src/theme/selectorComponent.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfThemeModule', [gmf_theme_selectorComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./contribs/gmf/src/theme/selectorComponent.html":
/*!*******************************************************!*\
  !*** ./contribs/gmf/src/theme/selectorComponent.html ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<ul class="gmf-theme-selector">\n  <li\n      ng-repeat="theme in $ctrl.themes"\n      ng-click="$ctrl.setTheme(theme)"\n      ng-class="{\'gmf-theme-selector-active\': $ctrl.gmfThemeManager.getThemeName() == theme.name}">\n    <img class="gmf-thumb"\n         ng-src="{{::theme.icon}}" />\n    <span class="gmf-text">{{theme.name | translate}}</span>\n  </li>\n</ul>\n';

}
return __p
}

/***/ }),

/***/ "./contribs/gmf/src/theme/selectorComponent.js":
/*!*****************************************************!*\
  !*** ./contribs/gmf/src/theme/selectorComponent.js ***!
  \*****************************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gmf/backgroundlayerselector/status.js */ "./contribs/gmf/src/backgroundlayerselector/status.js");
/* harmony import */ var gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gmf/theme/Manager.js */ "./contribs/gmf/src/theme/Manager.js");
/* harmony import */ var gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gmf/theme/Themes.js */ "./contribs/gmf/src/theme/Themes.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var bootstrap_js_src_dropdown_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap/js/src/dropdown.js */ "./node_modules/bootstrap/js/src/dropdown.js");
Controller.$inject = ["$scope", "gmfThemeManager", "gmfThemes"];






var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('gmfThemeSelectorComponent', [gmf_theme_Manager_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, gmf_theme_Themes_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('gmf/theme/selectorComponent', __webpack_require__(/*! ./selectorComponent.html */ "./contribs/gmf/src/theme/selectorComponent.html"));
}]);
myModule.value('gmfThemeSelectorTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.gmfThemeSelectorTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'gmf/theme/selectorComponent';
});
gmfThemeSelectorTemplateUrl.$inject = ["$attrs", "gmfThemeSelectorTemplateUrl"];

function gmfThemeSelectorTemplateUrl($attrs, gmfThemeSelectorTemplateUrl) {
  return gmfThemeSelectorTemplateUrl($attrs);
}

var themeSelectorComponent = {
  bindings: {
    'filter': '<gmfThemeselectorFilter'
  },
  controller: 'gmfThemeselectorController',
  templateUrl: gmfThemeSelectorTemplateUrl
};
myModule.component('gmfThemeselector', themeSelectorComponent);
function Controller($scope, gmfThemeManager, gmfThemes) {
  this.gmfThemeManager = gmfThemeManager;
  this.gmfThemes_ = gmfThemes;
  this.themes = [];

  this.filter = function (theme) {
    return undefined;
  };

  this.listenerKeys_ = [];
  this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(this.gmfThemes_, 'change', this.setThemes_, this));
  $scope.$on('$destroy', this.handleDestroy_.bind(this));
}

Controller.prototype.setThemes_ = function () {
  var _this = this;

  this.gmfThemes_.getThemesObject().then(function (themes) {
    _this.themes = _this.filter ? themes.filter(_this.filter) : themes;
  });
};

Controller.prototype.setTheme = function (theme, opt_silent) {
  gmf_backgroundlayerselector_status_js__WEBPACK_IMPORTED_MODULE_1__["gmfBackgroundlayerStatus"].touchedByUser = true;

  if (theme) {
    this.gmfThemeManager.addTheme(theme, opt_silent);
  }
};

Controller.prototype.handleDestroy_ = function () {
  this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["unlistenByKey"]);
  this.listenerKeys_.length = 0;
};

myModule.controller('gmfThemeselectorController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/EPSG_21781.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/EPSG_21781.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! exports provided: code, proj, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1020);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/lcc.js":
/*!*************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/lcc.js from dll-reference vendor ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1021);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/somerc.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/somerc.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(588);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/tmerc.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/tmerc.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1022);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/utils.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/utils.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: create */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(589);

/***/ }),

/***/ "./node_modules/@sentry/browser/esm/index.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/@sentry/browser/esm/index.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: Severity, Status, addGlobalEventProcessor, addBreadcrumb, captureException, captureEvent, captureMessage, configureScope, getHubFromCarrier, getCurrentHub, Hub, makeMain, Scope, startTransaction, SDK_VERSION, setContext, setExtra, setExtras, setTag, setTags, setUser, withScope, BrowserClient, injectReportDialog, eventFromException, eventFromMessage, defaultIntegrations, forceLoad, init, lastEventId, onLoad, showReportDialog, flush, close, wrap, SDK_NAME, Integrations, Transports */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1023);

/***/ }),

/***/ "./node_modules/angular-animate/index.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/angular-animate/index.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1027);

/***/ }),

/***/ "./node_modules/angular-dynamic-locale/src/tmhDynamicLocale.js":
/*!*********************************************************************************************************!*\
  !*** delegated ./node_modules/angular-dynamic-locale/src/tmhDynamicLocale.js from dll-reference vendor ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1029);

/***/ }),

/***/ "./node_modules/angular-float-thead/angular-floatThead.js":
/*!****************************************************************!*\
  !*** ./node_modules/angular-float-thead/angular-floatThead.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function () {
  'use strict';

  angular.module('floatThead', []).directive('floatThead', ['$timeout', '$log', floatThead]);

  function floatThead($timeout, $log) {
    var directive = {
      require: '?ngModel',
      scope: {
        floatThead: '=?',
        floatTheadEnabled: '=?'
      },
      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {
        if (!$attrs.hasOwnProperty('floatTheadEnabled')) {
          $scope.floatTheadEnabled = $attrs.floatTheadEnabled = true;
        }

        if (!$attrs.hasOwnProperty('floatThead') || $attrs.floatThead === '') {
          $scope.floatThead = $attrs.floatThead = {};
        }
      }],
      link: link,
      restrict: 'A'
    };
    return directive;

    function link($scope, $element, $attrs, ngModel) {
      $scope.$watch('floatTheadEnabled', function (newVal) {
        if (newVal === true) {
          if (angular.isObject($scope.floatThead)) {
            jQuery($element).floatThead($scope.floatThead);
          }
        } else {
          jQuery($element).floatThead('destroy');
        }
      });
      $scope.$watch('floatThead', function (newVal, oldVal) {
        if (newVal === oldVal || !$scope.floatTheadEnabled) {
          return;
        }

        jQuery($element).floatThead('destroy');

        if (angular.isObject(newVal)) {
          jQuery($element).floatThead(newVal);
        }
      }, true);

      if (ngModel) {
        ngModel.$formatters.push(function () {
          if ($scope.floatTheadEnabled && angular.isObject($scope.floatThead)) {
            $timeout(function () {
              jQuery($element).floatThead('reflow');
            });
          }
        });
      } else {
        $log.info('floatThead: ngModel not provided!');
      }

      $element.bind('update', function () {
        $timeout(function () {
          jQuery($element).floatThead('reflow');
        }, 0);
      });
      $element.bind('$destroy', function () {
        jQuery($element).floatThead('destroy');
      });
    }
  }
})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./node_modules/angular-gettext/index.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/angular-gettext/index.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1030);

/***/ }),

/***/ "./node_modules/angular-sanitize/index.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/angular-sanitize/index.js from dll-reference vendor ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1032);

/***/ }),

/***/ "./node_modules/angular-touch/index.js":
/*!*********************************************************************************!*\
  !*** delegated ./node_modules/angular-touch/index.js from dll-reference vendor ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1034);

/***/ }),

/***/ "./node_modules/angular-ui-date/dist/date.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/angular-ui-date/dist/date.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1036);

/***/ }),

/***/ "./node_modules/angular-ui-slider/src/index.js":
/*!*****************************************************************************************!*\
  !*** delegated ./node_modules/angular-ui-slider/src/index.js from dll-reference vendor ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1037);

/***/ }),

/***/ "./node_modules/angular/index.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/angular/index.js from dll-reference vendor ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(650);

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js?!./node_modules/corejs-typeahead/dist/typeahead.bundle.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib??ref--9!./node_modules/corejs-typeahead/dist/typeahead.bundle.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(setImmediate) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {
      return root["Bloodhound"] = factory(a0);
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
})(this, function ($) {
  var _ = function () {
    "use strict";

    return {
      isMsie: function isMsie() {
        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
      },
      isBlankString: function isBlankString(str) {
        return !str || /^\s*$/.test(str);
      },
      escapeRegExChars: function escapeRegExChars(str) {
        return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
      },
      isString: function isString(obj) {
        return typeof obj === "string";
      },
      isNumber: function isNumber(obj) {
        return typeof obj === "number";
      },
      isArray: $.isArray,
      isFunction: $.isFunction,
      isObject: $.isPlainObject,
      isUndefined: function isUndefined(obj) {
        return typeof obj === "undefined";
      },
      isElement: function isElement(obj) {
        return !!(obj && obj.nodeType === 1);
      },
      isJQuery: function isJQuery(obj) {
        return obj instanceof $;
      },
      toStr: function toStr(s) {
        return _.isUndefined(s) || s === null ? "" : s + "";
      },
      bind: $.proxy,
      each: function each(collection, cb) {
        $.each(collection, reverseArgs);

        function reverseArgs(index, value) {
          return cb(value, index);
        }
      },
      map: $.map,
      filter: $.grep,
      every: function every(obj, test) {
        var result = true;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (!(result = test.call(null, val, key, obj))) {
            return false;
          }
        });
        return !!result;
      },
      some: function some(obj, test) {
        var result = false;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (result = test.call(null, val, key, obj)) {
            return false;
          }
        });
        return !!result;
      },
      mixin: $.extend,
      identity: function identity(x) {
        return x;
      },
      clone: function clone(obj) {
        return $.extend(true, {}, obj);
      },
      getIdGenerator: function getIdGenerator() {
        var counter = 0;
        return function () {
          return counter++;
        };
      },
      templatify: function templatify(obj) {
        return $.isFunction(obj) ? obj : template;

        function template() {
          return String(obj);
        }
      },
      defer: function defer(fn) {
        setTimeout(fn, 0);
      },
      debounce: function debounce(func, wait, immediate) {
        var timeout, result;
        return function () {
          var context = this,
              args = arguments,
              later,
              callNow;

          later = function later() {
            timeout = null;

            if (!immediate) {
              result = func.apply(context, args);
            }
          };

          callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);

          if (callNow) {
            result = func.apply(context, args);
          }

          return result;
        };
      },
      throttle: function throttle(func, wait) {
        var context, args, timeout, result, previous, later;
        previous = 0;

        later = function later() {
          previous = new Date();
          timeout = null;
          result = func.apply(context, args);
        };

        return function () {
          var now = new Date(),
              remaining = wait - (now - previous);
          context = this;
          args = arguments;

          if (remaining <= 0) {
            clearTimeout(timeout);
            timeout = null;
            previous = now;
            result = func.apply(context, args);
          } else if (!timeout) {
            timeout = setTimeout(later, remaining);
          }

          return result;
        };
      },
      stringify: function stringify(val) {
        return _.isString(val) ? val : JSON.stringify(val);
      },
      guid: function guid() {
        function _p8(s) {
          var p = (Math.random().toString(16) + "000000000").substr(2, 8);
          return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p;
        }

        return "tt-" + _p8() + _p8(true) + _p8(true) + _p8();
      },
      noop: function noop() {}
    };
  }();

  var VERSION = "1.3.1";

  var tokenizers = function () {
    "use strict";

    return {
      nonword: nonword,
      whitespace: whitespace,
      ngram: ngram,
      obj: {
        nonword: getObjTokenizer(nonword),
        whitespace: getObjTokenizer(whitespace),
        ngram: getObjTokenizer(ngram)
      }
    };

    function whitespace(str) {
      str = _.toStr(str);
      return str ? str.split(/\s+/) : [];
    }

    function nonword(str) {
      str = _.toStr(str);
      return str ? str.split(/\W+/) : [];
    }

    function ngram(str) {
      str = _.toStr(str);
      var tokens = [],
          word = "";

      _.each(str.split(""), function (char) {
        if (char.match(/\s+/)) {
          word = "";
        } else {
          tokens.push(word + char);
          word += char;
        }
      });

      return tokens;
    }

    function getObjTokenizer(tokenizer) {
      return function setKey(keys) {
        keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);
        return function tokenize(o) {
          var tokens = [];

          _.each(keys, function (k) {
            tokens = tokens.concat(tokenizer(_.toStr(o[k])));
          });

          return tokens;
        };
      };
    }
  }();

  var LruCache = function () {
    "use strict";

    function LruCache(maxSize) {
      this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
      this.reset();

      if (this.maxSize <= 0) {
        this.set = this.get = $.noop;
      }
    }

    _.mixin(LruCache.prototype, {
      set: function set(key, val) {
        var tailItem = this.list.tail,
            node;

        if (this.size >= this.maxSize) {
          this.list.remove(tailItem);
          delete this.hash[tailItem.key];
          this.size--;
        }

        if (node = this.hash[key]) {
          node.val = val;
          this.list.moveToFront(node);
        } else {
          node = new Node(key, val);
          this.list.add(node);
          this.hash[key] = node;
          this.size++;
        }
      },
      get: function get(key) {
        var node = this.hash[key];

        if (node) {
          this.list.moveToFront(node);
          return node.val;
        }
      },
      reset: function reset() {
        this.size = 0;
        this.hash = {};
        this.list = new List();
      }
    });

    function List() {
      this.head = this.tail = null;
    }

    _.mixin(List.prototype, {
      add: function add(node) {
        if (this.head) {
          node.next = this.head;
          this.head.prev = node;
        }

        this.head = node;
        this.tail = this.tail || node;
      },
      remove: function remove(node) {
        node.prev ? node.prev.next = node.next : this.head = node.next;
        node.next ? node.next.prev = node.prev : this.tail = node.prev;
      },
      moveToFront: function moveToFront(node) {
        this.remove(node);
        this.add(node);
      }
    });

    function Node(key, val) {
      this.key = key;
      this.val = val;
      this.prev = this.next = null;
    }

    return LruCache;
  }();

  var PersistentStorage = function () {
    "use strict";

    var LOCAL_STORAGE;

    try {
      LOCAL_STORAGE = window.localStorage;
      LOCAL_STORAGE.setItem("~~~", "!");
      LOCAL_STORAGE.removeItem("~~~");
    } catch (err) {
      LOCAL_STORAGE = null;
    }

    function PersistentStorage(namespace, override) {
      this.prefix = ["__", namespace, "__"].join("");
      this.ttlKey = "__ttl__";
      this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
      this.ls = override || LOCAL_STORAGE;
      !this.ls && this._noop();
    }

    _.mixin(PersistentStorage.prototype, {
      _prefix: function _prefix(key) {
        return this.prefix + key;
      },
      _ttlKey: function _ttlKey(key) {
        return this._prefix(key) + this.ttlKey;
      },
      _noop: function _noop() {
        this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;
      },
      _safeSet: function _safeSet(key, val) {
        try {
          this.ls.setItem(key, val);
        } catch (err) {
          if (err.name === "QuotaExceededError") {
            this.clear();

            this._noop();
          }
        }
      },
      get: function get(key) {
        if (this.isExpired(key)) {
          this.remove(key);
        }

        return decode(this.ls.getItem(this._prefix(key)));
      },
      set: function set(key, val, ttl) {
        if (_.isNumber(ttl)) {
          this._safeSet(this._ttlKey(key), encode(now() + ttl));
        } else {
          this.ls.removeItem(this._ttlKey(key));
        }

        return this._safeSet(this._prefix(key), encode(val));
      },
      remove: function remove(key) {
        this.ls.removeItem(this._ttlKey(key));
        this.ls.removeItem(this._prefix(key));
        return this;
      },
      clear: function clear() {
        var i,
            keys = gatherMatchingKeys(this.keyMatcher);

        for (i = keys.length; i--;) {
          this.remove(keys[i]);
        }

        return this;
      },
      isExpired: function isExpired(key) {
        var ttl = decode(this.ls.getItem(this._ttlKey(key)));
        return _.isNumber(ttl) && now() > ttl ? true : false;
      }
    });

    return PersistentStorage;

    function now() {
      return new Date().getTime();
    }

    function encode(val) {
      return JSON.stringify(_.isUndefined(val) ? null : val);
    }

    function decode(val) {
      return $.parseJSON(val);
    }

    function gatherMatchingKeys(keyMatcher) {
      var i,
          key,
          keys = [],
          len = LOCAL_STORAGE.length;

      for (i = 0; i < len; i++) {
        if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {
          keys.push(key.replace(keyMatcher, ""));
        }
      }

      return keys;
    }
  }();

  var Transport = function () {
    "use strict";

    var pendingRequestsCount = 0,
        pendingRequests = {},
        sharedCache = new LruCache(10);

    function Transport(o) {
      o = o || {};
      this.maxPendingRequests = o.maxPendingRequests || 6;
      this.cancelled = false;
      this.lastReq = null;
      this._send = o.transport;
      this._get = o.limiter ? o.limiter(this._get) : this._get;
      this._cache = o.cache === false ? new LruCache(0) : sharedCache;
    }

    Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
      this.maxPendingRequests = num;
    };

    Transport.resetCache = function resetCache() {
      sharedCache.reset();
    };

    _.mixin(Transport.prototype, {
      _fingerprint: function fingerprint(o) {
        o = o || {};
        return o.url + o.type + $.param(o.data || {});
      },
      _get: function _get(o, cb) {
        var that = this,
            fingerprint,
            jqXhr;
        fingerprint = this._fingerprint(o);

        if (this.cancelled || fingerprint !== this.lastReq) {
          return;
        }

        if (jqXhr = pendingRequests[fingerprint]) {
          jqXhr.done(done).fail(fail);
        } else if (pendingRequestsCount < this.maxPendingRequests) {
          pendingRequestsCount++;
          pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);
        } else {
          this.onDeckRequestArgs = [].slice.call(arguments, 0);
        }

        function done(resp) {
          cb(null, resp);

          that._cache.set(fingerprint, resp);
        }

        function fail() {
          cb(true);
        }

        function always() {
          pendingRequestsCount--;
          delete pendingRequests[fingerprint];

          if (that.onDeckRequestArgs) {
            that._get.apply(that, that.onDeckRequestArgs);

            that.onDeckRequestArgs = null;
          }
        }
      },
      get: function get(o, cb) {
        var resp, fingerprint;
        cb = cb || $.noop;
        o = _.isString(o) ? {
          url: o
        } : o || {};
        fingerprint = this._fingerprint(o);
        this.cancelled = false;
        this.lastReq = fingerprint;

        if (resp = this._cache.get(fingerprint)) {
          cb(null, resp);
        } else {
          this._get(o, cb);
        }
      },
      cancel: function cancel() {
        this.cancelled = true;
      }
    });

    return Transport;
  }();

  var SearchIndex = window.SearchIndex = function () {
    "use strict";

    var CHILDREN = "c",
        IDS = "i";

    function SearchIndex(o) {
      o = o || {};

      if (!o.datumTokenizer || !o.queryTokenizer) {
        $.error("datumTokenizer and queryTokenizer are both required");
      }

      this.identify = o.identify || _.stringify;
      this.datumTokenizer = o.datumTokenizer;
      this.queryTokenizer = o.queryTokenizer;
      this.matchAnyQueryToken = o.matchAnyQueryToken;
      this.reset();
    }

    _.mixin(SearchIndex.prototype, {
      bootstrap: function bootstrap(o) {
        this.datums = o.datums;
        this.trie = o.trie;
      },
      add: function add(data) {
        var that = this;
        data = _.isArray(data) ? data : [data];

        _.each(data, function (datum) {
          var id, tokens;
          that.datums[id = that.identify(datum)] = datum;
          tokens = normalizeTokens(that.datumTokenizer(datum));

          _.each(tokens, function (token) {
            var node, chars, ch;
            node = that.trie;
            chars = token.split("");

            while (ch = chars.shift()) {
              node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());
              node[IDS].push(id);
            }
          });
        });
      },
      get: function get(ids) {
        var that = this;
        return _.map(ids, function (id) {
          return that.datums[id];
        });
      },
      search: function search(query) {
        var that = this,
            tokens,
            matches;
        tokens = normalizeTokens(this.queryTokenizer(query));

        _.each(tokens, function (token) {
          var node, chars, ch, ids;

          if (matches && matches.length === 0 && !that.matchAnyQueryToken) {
            return false;
          }

          node = that.trie;
          chars = token.split("");

          while (node && (ch = chars.shift())) {
            node = node[CHILDREN][ch];
          }

          if (node && chars.length === 0) {
            ids = node[IDS].slice(0);
            matches = matches ? getIntersection(matches, ids) : ids;
          } else {
            if (!that.matchAnyQueryToken) {
              matches = [];
              return false;
            }
          }
        });

        return matches ? _.map(unique(matches), function (id) {
          return that.datums[id];
        }) : [];
      },
      all: function all() {
        var values = [];

        for (var key in this.datums) {
          values.push(this.datums[key]);
        }

        return values;
      },
      reset: function reset() {
        this.datums = {};
        this.trie = newNode();
      },
      serialize: function serialize() {
        return {
          datums: this.datums,
          trie: this.trie
        };
      }
    });

    return SearchIndex;

    function normalizeTokens(tokens) {
      tokens = _.filter(tokens, function (token) {
        return !!token;
      });
      tokens = _.map(tokens, function (token) {
        return token.toLowerCase();
      });
      return tokens;
    }

    function newNode() {
      var node = {};
      node[IDS] = [];
      node[CHILDREN] = {};
      return node;
    }

    function unique(array) {
      var seen = {},
          uniques = [];

      for (var i = 0, len = array.length; i < len; i++) {
        if (!seen[array[i]]) {
          seen[array[i]] = true;
          uniques.push(array[i]);
        }
      }

      return uniques;
    }

    function getIntersection(arrayA, arrayB) {
      var ai = 0,
          bi = 0,
          intersection = [];
      arrayA = arrayA.sort();
      arrayB = arrayB.sort();
      var lenArrayA = arrayA.length,
          lenArrayB = arrayB.length;

      while (ai < lenArrayA && bi < lenArrayB) {
        if (arrayA[ai] < arrayB[bi]) {
          ai++;
        } else if (arrayA[ai] > arrayB[bi]) {
          bi++;
        } else {
          intersection.push(arrayA[ai]);
          ai++;
          bi++;
        }
      }

      return intersection;
    }
  }();

  var Prefetch = function () {
    "use strict";

    var keys;
    keys = {
      data: "data",
      protocol: "protocol",
      thumbprint: "thumbprint"
    };

    function Prefetch(o) {
      this.url = o.url;
      this.ttl = o.ttl;
      this.cache = o.cache;
      this.prepare = o.prepare;
      this.transform = o.transform;
      this.transport = o.transport;
      this.thumbprint = o.thumbprint;
      this.storage = new PersistentStorage(o.cacheKey);
    }

    _.mixin(Prefetch.prototype, {
      _settings: function settings() {
        return {
          url: this.url,
          type: "GET",
          dataType: "json"
        };
      },
      store: function store(data) {
        if (!this.cache) {
          return;
        }

        this.storage.set(keys.data, data, this.ttl);
        this.storage.set(keys.protocol, location.protocol, this.ttl);
        this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);
      },
      fromCache: function fromCache() {
        var stored = {},
            isExpired;

        if (!this.cache) {
          return null;
        }

        stored.data = this.storage.get(keys.data);
        stored.protocol = this.storage.get(keys.protocol);
        stored.thumbprint = this.storage.get(keys.thumbprint);
        isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;
        return stored.data && !isExpired ? stored.data : null;
      },
      fromNetwork: function fromNetwork(cb) {
        var that = this,
            settings;

        if (!cb) {
          return;
        }

        settings = this.prepare(this._settings());
        this.transport(settings).fail(onError).done(onResponse);

        function onError() {
          cb(true);
        }

        function onResponse(resp) {
          cb(null, that.transform(resp));
        }
      },
      clear: function clear() {
        this.storage.clear();
        return this;
      }
    });

    return Prefetch;
  }();

  var Remote = function () {
    "use strict";

    function Remote(o) {
      this.url = o.url;
      this.prepare = o.prepare;
      this.transform = o.transform;
      this.indexResponse = o.indexResponse;
      this.transport = new Transport({
        cache: o.cache,
        limiter: o.limiter,
        transport: o.transport,
        maxPendingRequests: o.maxPendingRequests
      });
    }

    _.mixin(Remote.prototype, {
      _settings: function settings() {
        return {
          url: this.url,
          type: "GET",
          dataType: "json"
        };
      },
      get: function get(query, cb) {
        var that = this,
            settings;

        if (!cb) {
          return;
        }

        query = query || "";
        settings = this.prepare(query, this._settings());
        return this.transport.get(settings, onResponse);

        function onResponse(err, resp) {
          err ? cb([]) : cb(that.transform(resp));
        }
      },
      cancelLastRequest: function cancelLastRequest() {
        this.transport.cancel();
      }
    });

    return Remote;
  }();

  var oParser = function () {
    "use strict";

    return function parse(o) {
      var defaults, sorter;
      defaults = {
        initialize: true,
        identify: _.stringify,
        datumTokenizer: null,
        queryTokenizer: null,
        matchAnyQueryToken: false,
        sufficient: 5,
        indexRemote: false,
        sorter: null,
        local: [],
        prefetch: null,
        remote: null
      };
      o = _.mixin(defaults, o || {});
      !o.datumTokenizer && $.error("datumTokenizer is required");
      !o.queryTokenizer && $.error("queryTokenizer is required");
      sorter = o.sorter;
      o.sorter = sorter ? function (x) {
        return x.sort(sorter);
      } : _.identity;
      o.local = _.isFunction(o.local) ? o.local() : o.local;
      o.prefetch = parsePrefetch(o.prefetch);
      o.remote = parseRemote(o.remote);
      return o;
    };

    function parsePrefetch(o) {
      var defaults;

      if (!o) {
        return null;
      }

      defaults = {
        url: null,
        ttl: 24 * 60 * 60 * 1e3,
        cache: true,
        cacheKey: null,
        thumbprint: "",
        prepare: _.identity,
        transform: _.identity,
        transport: null
      };
      o = _.isString(o) ? {
        url: o
      } : o;
      o = _.mixin(defaults, o);
      !o.url && $.error("prefetch requires url to be set");
      o.transform = o.filter || o.transform;
      o.cacheKey = o.cacheKey || o.url;
      o.thumbprint = VERSION + o.thumbprint;
      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
      return o;
    }

    function parseRemote(o) {
      var defaults;

      if (!o) {
        return;
      }

      defaults = {
        url: null,
        cache: true,
        prepare: null,
        replace: null,
        wildcard: null,
        limiter: null,
        rateLimitBy: "debounce",
        rateLimitWait: 300,
        transform: _.identity,
        transport: null
      };
      o = _.isString(o) ? {
        url: o
      } : o;
      o = _.mixin(defaults, o);
      !o.url && $.error("remote requires url to be set");
      o.transform = o.filter || o.transform;
      o.prepare = toRemotePrepare(o);
      o.limiter = toLimiter(o);
      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
      delete o.replace;
      delete o.wildcard;
      delete o.rateLimitBy;
      delete o.rateLimitWait;
      return o;
    }

    function toRemotePrepare(o) {
      var prepare, replace, wildcard;
      prepare = o.prepare;
      replace = o.replace;
      wildcard = o.wildcard;

      if (prepare) {
        return prepare;
      }

      if (replace) {
        prepare = prepareByReplace;
      } else if (o.wildcard) {
        prepare = prepareByWildcard;
      } else {
        prepare = identityPrepare;
      }

      return prepare;

      function prepareByReplace(query, settings) {
        settings.url = replace(settings.url, query);
        return settings;
      }

      function prepareByWildcard(query, settings) {
        settings.url = settings.url.replace(wildcard, encodeURIComponent(query));
        return settings;
      }

      function identityPrepare(query, settings) {
        return settings;
      }
    }

    function toLimiter(o) {
      var limiter, method, wait;
      limiter = o.limiter;
      method = o.rateLimitBy;
      wait = o.rateLimitWait;

      if (!limiter) {
        limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);
      }

      return limiter;

      function debounce(wait) {
        return function debounce(fn) {
          return _.debounce(fn, wait);
        };
      }

      function throttle(wait) {
        return function throttle(fn) {
          return _.throttle(fn, wait);
        };
      }
    }

    function callbackToDeferred(fn) {
      return function wrapper(o) {
        var deferred = $.Deferred();
        fn(o, onSuccess, onError);
        return deferred;

        function onSuccess(resp) {
          _.defer(function () {
            deferred.resolve(resp);
          });
        }

        function onError(err) {
          _.defer(function () {
            deferred.reject(err);
          });
        }
      };
    }
  }();

  var Bloodhound = function () {
    "use strict";

    var old;
    old = window && window.Bloodhound;

    function Bloodhound(o) {
      o = oParser(o);
      this.sorter = o.sorter;
      this.identify = o.identify;
      this.sufficient = o.sufficient;
      this.indexRemote = o.indexRemote;
      this.local = o.local;
      this.remote = o.remote ? new Remote(o.remote) : null;
      this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;
      this.index = new SearchIndex({
        identify: this.identify,
        datumTokenizer: o.datumTokenizer,
        queryTokenizer: o.queryTokenizer
      });
      o.initialize !== false && this.initialize();
    }

    Bloodhound.noConflict = function noConflict() {
      window && (window.Bloodhound = old);
      return Bloodhound;
    };

    Bloodhound.tokenizers = tokenizers;

    _.mixin(Bloodhound.prototype, {
      __ttAdapter: function ttAdapter() {
        var that = this;
        return this.remote ? withAsync : withoutAsync;

        function withAsync(query, sync, async) {
          return that.search(query, sync, async);
        }

        function withoutAsync(query, sync) {
          return that.search(query, sync);
        }
      },
      _loadPrefetch: function loadPrefetch() {
        var that = this,
            deferred,
            serialized;
        deferred = $.Deferred();

        if (!this.prefetch) {
          deferred.resolve();
        } else if (serialized = this.prefetch.fromCache()) {
          this.index.bootstrap(serialized);
          deferred.resolve();
        } else {
          this.prefetch.fromNetwork(done);
        }

        return deferred.promise();

        function done(err, data) {
          if (err) {
            return deferred.reject();
          }

          that.add(data);
          that.prefetch.store(that.index.serialize());
          deferred.resolve();
        }
      },
      _initialize: function initialize() {
        var that = this,
            deferred;
        this.clear();

        (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);

        return this.initPromise;

        function addLocalToIndex() {
          that.add(that.local);
        }
      },
      initialize: function initialize(force) {
        return !this.initPromise || force ? this._initialize() : this.initPromise;
      },
      add: function add(data) {
        this.index.add(data);
        return this;
      },
      get: function get(ids) {
        ids = _.isArray(ids) ? ids : [].slice.call(arguments);
        return this.index.get(ids);
      },
      search: function search(query, sync, async) {
        var that = this,
            local;
        sync = sync || _.noop;
        async = async || _.noop;
        local = this.sorter(this.index.search(query));
        sync(this.remote ? local.slice() : local);

        if (this.remote && local.length < this.sufficient) {
          this.remote.get(query, processRemote);
        } else if (this.remote) {
          this.remote.cancelLastRequest();
        }

        return this;

        function processRemote(remote) {
          var nonDuplicates = [];

          _.each(remote, function (r) {
            !_.some(local, function (l) {
              return that.identify(r) === that.identify(l);
            }) && nonDuplicates.push(r);
          });

          that.indexRemote && that.add(nonDuplicates);
          async(nonDuplicates);
        }
      },
      all: function all() {
        return this.index.all();
      },
      clear: function clear() {
        this.index.reset();
        return this;
      },
      clearPrefetchCache: function clearPrefetchCache() {
        this.prefetch && this.prefetch.clear();
        return this;
      },
      clearRemoteCache: function clearRemoteCache() {
        Transport.resetCache();
        return this;
      },
      ttAdapter: function ttAdapter() {
        return this.__ttAdapter();
      }
    });

    return Bloodhound;
  }();

  return Bloodhound;
});

(function (root, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {
      return factory(a0);
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
})(this, function ($) {
  var _ = function () {
    "use strict";

    return {
      isMsie: function isMsie() {
        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
      },
      isBlankString: function isBlankString(str) {
        return !str || /^\s*$/.test(str);
      },
      escapeRegExChars: function escapeRegExChars(str) {
        return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
      },
      isString: function isString(obj) {
        return typeof obj === "string";
      },
      isNumber: function isNumber(obj) {
        return typeof obj === "number";
      },
      isArray: $.isArray,
      isFunction: $.isFunction,
      isObject: $.isPlainObject,
      isUndefined: function isUndefined(obj) {
        return typeof obj === "undefined";
      },
      isElement: function isElement(obj) {
        return !!(obj && obj.nodeType === 1);
      },
      isJQuery: function isJQuery(obj) {
        return obj instanceof $;
      },
      toStr: function toStr(s) {
        return _.isUndefined(s) || s === null ? "" : s + "";
      },
      bind: $.proxy,
      each: function each(collection, cb) {
        $.each(collection, reverseArgs);

        function reverseArgs(index, value) {
          return cb(value, index);
        }
      },
      map: $.map,
      filter: $.grep,
      every: function every(obj, test) {
        var result = true;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (!(result = test.call(null, val, key, obj))) {
            return false;
          }
        });
        return !!result;
      },
      some: function some(obj, test) {
        var result = false;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (result = test.call(null, val, key, obj)) {
            return false;
          }
        });
        return !!result;
      },
      mixin: $.extend,
      identity: function identity(x) {
        return x;
      },
      clone: function clone(obj) {
        return $.extend(true, {}, obj);
      },
      getIdGenerator: function getIdGenerator() {
        var counter = 0;
        return function () {
          return counter++;
        };
      },
      templatify: function templatify(obj) {
        return $.isFunction(obj) ? obj : template;

        function template() {
          return String(obj);
        }
      },
      defer: function defer(fn) {
        setTimeout(fn, 0);
      },
      debounce: function debounce(func, wait, immediate) {
        var timeout, result;
        return function () {
          var context = this,
              args = arguments,
              later,
              callNow;

          later = function later() {
            timeout = null;

            if (!immediate) {
              result = func.apply(context, args);
            }
          };

          callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);

          if (callNow) {
            result = func.apply(context, args);
          }

          return result;
        };
      },
      throttle: function throttle(func, wait) {
        var context, args, timeout, result, previous, later;
        previous = 0;

        later = function later() {
          previous = new Date();
          timeout = null;
          result = func.apply(context, args);
        };

        return function () {
          var now = new Date(),
              remaining = wait - (now - previous);
          context = this;
          args = arguments;

          if (remaining <= 0) {
            clearTimeout(timeout);
            timeout = null;
            previous = now;
            result = func.apply(context, args);
          } else if (!timeout) {
            timeout = setTimeout(later, remaining);
          }

          return result;
        };
      },
      stringify: function stringify(val) {
        return _.isString(val) ? val : JSON.stringify(val);
      },
      guid: function guid() {
        function _p8(s) {
          var p = (Math.random().toString(16) + "000000000").substr(2, 8);
          return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p;
        }

        return "tt-" + _p8() + _p8(true) + _p8(true) + _p8();
      },
      noop: function noop() {}
    };
  }();

  var WWW = function () {
    "use strict";

    var defaultClassNames = {
      wrapper: "twitter-typeahead",
      input: "tt-input",
      hint: "tt-hint",
      menu: "tt-menu",
      dataset: "tt-dataset",
      suggestion: "tt-suggestion",
      selectable: "tt-selectable",
      empty: "tt-empty",
      open: "tt-open",
      cursor: "tt-cursor",
      highlight: "tt-highlight"
    };
    return build;

    function build(o) {
      var www, classes;
      classes = _.mixin({}, defaultClassNames, o);
      www = {
        css: buildCss(),
        classes: classes,
        html: buildHtml(classes),
        selectors: buildSelectors(classes)
      };
      return {
        css: www.css,
        html: www.html,
        classes: www.classes,
        selectors: www.selectors,
        mixin: function mixin(o) {
          _.mixin(o, www);
        }
      };
    }

    function buildHtml(c) {
      return {
        wrapper: '<span class="' + c.wrapper + '"></span>',
        menu: '<div role="listbox" class="' + c.menu + '"></div>'
      };
    }

    function buildSelectors(classes) {
      var selectors = {};

      _.each(classes, function (v, k) {
        selectors[k] = "." + v;
      });

      return selectors;
    }

    function buildCss() {
      var css = {
        wrapper: {
          position: "relative",
          display: "inline-block"
        },
        hint: {
          position: "absolute",
          top: "0",
          left: "0",
          borderColor: "transparent",
          boxShadow: "none",
          opacity: "1"
        },
        input: {
          position: "relative",
          verticalAlign: "top",
          backgroundColor: "transparent"
        },
        inputWithNoHint: {
          position: "relative",
          verticalAlign: "top"
        },
        menu: {
          position: "absolute",
          top: "100%",
          left: "0",
          zIndex: "100",
          display: "none"
        },
        ltr: {
          left: "0",
          right: "auto"
        },
        rtl: {
          left: "auto",
          right: " 0"
        }
      };

      if (_.isMsie()) {
        _.mixin(css.input, {
          backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
        });
      }

      return css;
    }
  }();

  var EventBus = function () {
    "use strict";

    var namespace, deprecationMap;
    namespace = "typeahead:";
    deprecationMap = {
      render: "rendered",
      cursorchange: "cursorchanged",
      select: "selected",
      autocomplete: "autocompleted"
    };

    function EventBus(o) {
      if (!o || !o.el) {
        $.error("EventBus initialized without el");
      }

      this.$el = $(o.el);
    }

    _.mixin(EventBus.prototype, {
      _trigger: function _trigger(type, args) {
        var $e = $.Event(namespace + type);
        this.$el.trigger.call(this.$el, $e, args || []);
        return $e;
      },
      before: function before(type) {
        var args, $e;
        args = [].slice.call(arguments, 1);
        $e = this._trigger("before" + type, args);
        return $e.isDefaultPrevented();
      },
      trigger: function trigger(type) {
        var deprecatedType;

        this._trigger(type, [].slice.call(arguments, 1));

        if (deprecatedType = deprecationMap[type]) {
          this._trigger(deprecatedType, [].slice.call(arguments, 1));
        }
      }
    });

    return EventBus;
  }();

  var EventEmitter = function () {
    "use strict";

    var splitter = /\s+/,
        nextTick = getNextTick();
    return {
      onSync: onSync,
      onAsync: onAsync,
      off: off,
      trigger: trigger
    };

    function on(method, types, cb, context) {
      var type;

      if (!cb) {
        return this;
      }

      types = types.split(splitter);
      cb = context ? bindContext(cb, context) : cb;
      this._callbacks = this._callbacks || {};

      while (type = types.shift()) {
        this._callbacks[type] = this._callbacks[type] || {
          sync: [],
          async: []
        };

        this._callbacks[type][method].push(cb);
      }

      return this;
    }

    function onAsync(types, cb, context) {
      return on.call(this, "async", types, cb, context);
    }

    function onSync(types, cb, context) {
      return on.call(this, "sync", types, cb, context);
    }

    function off(types) {
      var type;

      if (!this._callbacks) {
        return this;
      }

      types = types.split(splitter);

      while (type = types.shift()) {
        delete this._callbacks[type];
      }

      return this;
    }

    function trigger(types) {
      var type, callbacks, args, syncFlush, asyncFlush;

      if (!this._callbacks) {
        return this;
      }

      types = types.split(splitter);
      args = [].slice.call(arguments, 1);

      while ((type = types.shift()) && (callbacks = this._callbacks[type])) {
        syncFlush = getFlush(callbacks.sync, this, [type].concat(args));
        asyncFlush = getFlush(callbacks.async, this, [type].concat(args));
        syncFlush() && nextTick(asyncFlush);
      }

      return this;
    }

    function getFlush(callbacks, context, args) {
      return flush;

      function flush() {
        var cancelled;

        for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {
          cancelled = callbacks[i].apply(context, args) === false;
        }

        return !cancelled;
      }
    }

    function getNextTick() {
      var nextTickFn;

      if (window.setImmediate) {
        nextTickFn = function nextTickSetImmediate(fn) {
          setImmediate(function () {
            fn();
          });
        };
      } else {
        nextTickFn = function nextTickSetTimeout(fn) {
          setTimeout(function () {
            fn();
          }, 0);
        };
      }

      return nextTickFn;
    }

    function bindContext(fn, context) {
      return fn.bind ? fn.bind(context) : function () {
        fn.apply(context, [].slice.call(arguments, 0));
      };
    }
  }();

  var highlight = function (doc) {
    "use strict";

    var defaults = {
      node: null,
      pattern: null,
      tagName: "strong",
      className: null,
      wordsOnly: false,
      caseSensitive: false,
      diacriticInsensitive: false
    };
    var accented = {
      A: "[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",
      B: "[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",
      C: "[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",
      D: "[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",
      E: "[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",
      F: "[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",
      G: "[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",
      H: "[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",
      I: "[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",
      J: "[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",
      K: "[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",
      L: "[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",
      M: "[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",
      N: "[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",
      O: "[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",
      P: "[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",
      Q: "[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",
      R: "[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",
      S: "[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",
      T: "[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",
      U: "[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",
      V: "[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",
      W: "[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",
      X: "[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",
      Y: "[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",
      Z: "[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"
    };
    return function hightlight(o) {
      var regex;
      o = _.mixin({}, defaults, o);

      if (!o.node || !o.pattern) {
        return;
      }

      o.pattern = _.isArray(o.pattern) ? o.pattern : [o.pattern];
      regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly, o.diacriticInsensitive);
      traverse(o.node, hightlightTextNode);

      function hightlightTextNode(textNode) {
        var match, patternNode, wrapperNode;

        if (match = regex.exec(textNode.data)) {
          wrapperNode = doc.createElement(o.tagName);
          o.className && (wrapperNode.className = o.className);
          patternNode = textNode.splitText(match.index);
          patternNode.splitText(match[0].length);
          wrapperNode.appendChild(patternNode.cloneNode(true));
          textNode.parentNode.replaceChild(wrapperNode, patternNode);
        }

        return !!match;
      }

      function traverse(el, hightlightTextNode) {
        var childNode,
            TEXT_NODE_TYPE = 3;

        for (var i = 0; i < el.childNodes.length; i++) {
          childNode = el.childNodes[i];

          if (childNode.nodeType === TEXT_NODE_TYPE) {
            i += hightlightTextNode(childNode) ? 1 : 0;
          } else {
            traverse(childNode, hightlightTextNode);
          }
        }
      }
    };

    function accent_replacer(chr) {
      return accented[chr.toUpperCase()] || chr;
    }

    function getRegex(patterns, caseSensitive, wordsOnly, diacriticInsensitive) {
      var escapedPatterns = [],
          regexStr;

      for (var i = 0, len = patterns.length; i < len; i++) {
        var escapedWord = _.escapeRegExChars(patterns[i]);

        if (diacriticInsensitive) {
          escapedWord = escapedWord.replace(/\S/g, accent_replacer);
        }

        escapedPatterns.push(escapedWord);
      }

      regexStr = wordsOnly ? "\\b(" + escapedPatterns.join("|") + ")\\b" : "(" + escapedPatterns.join("|") + ")";
      return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, "i");
    }
  }(window.document);

  var Input = function () {
    "use strict";

    var specialKeyCodeMap;
    specialKeyCodeMap = {
      9: "tab",
      27: "esc",
      37: "left",
      39: "right",
      13: "enter",
      38: "up",
      40: "down"
    };

    function Input(o, www) {
      var id;
      o = o || {};

      if (!o.input) {
        $.error("input is missing");
      }

      www.mixin(this);
      this.$hint = $(o.hint);
      this.$input = $(o.input);
      this.$menu = $(o.menu);
      id = this.$input.attr("id") || _.guid();
      this.$menu.attr("id", id + "_listbox");
      this.$hint.attr({
        "aria-hidden": true
      });
      this.$input.attr({
        "aria-owns": id + "_listbox",
        role: "combobox",
        "aria-autocomplete": "list",
        "aria-expanded": false
      });
      this.query = this.$input.val();
      this.queryWhenFocused = this.hasFocus() ? this.query : null;
      this.$overflowHelper = buildOverflowHelper(this.$input);

      this._checkLanguageDirection();

      if (this.$hint.length === 0) {
        this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;
      }

      this.onSync("cursorchange", this._updateDescendent);
    }

    Input.normalizeQuery = function (str) {
      return _.toStr(str).replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
    };

    _.mixin(Input.prototype, EventEmitter, {
      _onBlur: function onBlur() {
        this.resetInputValue();
        this.trigger("blurred");
      },
      _onFocus: function onFocus() {
        this.queryWhenFocused = this.query;
        this.trigger("focused");
      },
      _onKeydown: function onKeydown($e) {
        var keyName = specialKeyCodeMap[$e.which || $e.keyCode];

        this._managePreventDefault(keyName, $e);

        if (keyName && this._shouldTrigger(keyName, $e)) {
          this.trigger(keyName + "Keyed", $e);
        }
      },
      _onInput: function onInput() {
        this._setQuery(this.getInputValue());

        this.clearHintIfInvalid();

        this._checkLanguageDirection();
      },
      _managePreventDefault: function managePreventDefault(keyName, $e) {
        var preventDefault;

        switch (keyName) {
          case "up":
          case "down":
            preventDefault = !withModifier($e);
            break;

          default:
            preventDefault = false;
        }

        preventDefault && $e.preventDefault();
      },
      _shouldTrigger: function shouldTrigger(keyName, $e) {
        var trigger;

        switch (keyName) {
          case "tab":
            trigger = !withModifier($e);
            break;

          default:
            trigger = true;
        }

        return trigger;
      },
      _checkLanguageDirection: function checkLanguageDirection() {
        var dir = (this.$input.css("direction") || "ltr").toLowerCase();

        if (this.dir !== dir) {
          this.dir = dir;
          this.$hint.attr("dir", dir);
          this.trigger("langDirChanged", dir);
        }
      },
      _setQuery: function setQuery(val, silent) {
        var areEquivalent, hasDifferentWhitespace;
        areEquivalent = areQueriesEquivalent(val, this.query);
        hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;
        this.query = val;

        if (!silent && !areEquivalent) {
          this.trigger("queryChanged", this.query);
        } else if (!silent && hasDifferentWhitespace) {
          this.trigger("whitespaceChanged", this.query);
        }
      },
      _updateDescendent: function updateDescendent(event, id) {
        this.$input.attr("aria-activedescendant", id);
      },
      bind: function bind() {
        var that = this,
            onBlur,
            onFocus,
            onKeydown,
            onInput;
        onBlur = _.bind(this._onBlur, this);
        onFocus = _.bind(this._onFocus, this);
        onKeydown = _.bind(this._onKeydown, this);
        onInput = _.bind(this._onInput, this);
        this.$input.on("blur.tt", onBlur).on("focus.tt", onFocus).on("keydown.tt", onKeydown);

        if (!_.isMsie() || _.isMsie() > 9) {
          this.$input.on("input.tt", onInput);
        } else {
          this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function ($e) {
            if (specialKeyCodeMap[$e.which || $e.keyCode]) {
              return;
            }

            _.defer(_.bind(that._onInput, that, $e));
          });
        }

        return this;
      },
      focus: function focus() {
        this.$input.focus();
      },
      blur: function blur() {
        this.$input.blur();
      },
      getLangDir: function getLangDir() {
        return this.dir;
      },
      getQuery: function getQuery() {
        return this.query || "";
      },
      setQuery: function setQuery(val, silent) {
        this.setInputValue(val);

        this._setQuery(val, silent);
      },
      hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {
        return this.query !== this.queryWhenFocused;
      },
      getInputValue: function getInputValue() {
        return this.$input.val();
      },
      setInputValue: function setInputValue(value) {
        this.$input.val(value);
        this.clearHintIfInvalid();

        this._checkLanguageDirection();
      },
      resetInputValue: function resetInputValue() {
        this.setInputValue(this.query);
      },
      getHint: function getHint() {
        return this.$hint.val();
      },
      setHint: function setHint(value) {
        this.$hint.val(value);
      },
      clearHint: function clearHint() {
        this.setHint("");
      },
      clearHintIfInvalid: function clearHintIfInvalid() {
        var val, hint, valIsPrefixOfHint, isValid;
        val = this.getInputValue();
        hint = this.getHint();
        valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;
        isValid = val !== "" && valIsPrefixOfHint && !this.hasOverflow();
        !isValid && this.clearHint();
      },
      hasFocus: function hasFocus() {
        return this.$input.is(":focus");
      },
      hasOverflow: function hasOverflow() {
        var constraint = this.$input.width() - 2;
        this.$overflowHelper.text(this.getInputValue());
        return this.$overflowHelper.width() >= constraint;
      },
      isCursorAtEnd: function isCursorAtEnd() {
        var valueLength, selectionStart, range;
        valueLength = this.$input.val().length;
        selectionStart = this.$input[0].selectionStart;

        if (_.isNumber(selectionStart)) {
          return selectionStart === valueLength;
        } else if (document.selection) {
          range = document.selection.createRange();
          range.moveStart("character", -valueLength);
          return valueLength === range.text.length;
        }

        return true;
      },
      destroy: function destroy() {
        this.$hint.off(".tt");
        this.$input.off(".tt");
        this.$overflowHelper.remove();
        this.$hint = this.$input = this.$overflowHelper = $("<div>");
      },
      setAriaExpanded: function setAriaExpanded(value) {
        this.$input.attr("aria-expanded", value);
      }
    });

    return Input;

    function buildOverflowHelper($input) {
      return $('<pre aria-hidden="true"></pre>').css({
        position: "absolute",
        visibility: "hidden",
        whiteSpace: "pre",
        fontFamily: $input.css("font-family"),
        fontSize: $input.css("font-size"),
        fontStyle: $input.css("font-style"),
        fontVariant: $input.css("font-variant"),
        fontWeight: $input.css("font-weight"),
        wordSpacing: $input.css("word-spacing"),
        letterSpacing: $input.css("letter-spacing"),
        textIndent: $input.css("text-indent"),
        textRendering: $input.css("text-rendering"),
        textTransform: $input.css("text-transform")
      }).insertAfter($input);
    }

    function areQueriesEquivalent(a, b) {
      return Input.normalizeQuery(a) === Input.normalizeQuery(b);
    }

    function withModifier($e) {
      return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;
    }
  }();

  var Dataset = function () {
    "use strict";

    var keys, nameGenerator;
    keys = {
      dataset: "tt-selectable-dataset",
      val: "tt-selectable-display",
      obj: "tt-selectable-object"
    };
    nameGenerator = _.getIdGenerator();

    function Dataset(o, www) {
      o = o || {};
      o.templates = o.templates || {};
      o.templates.notFound = o.templates.notFound || o.templates.empty;

      if (!o.source) {
        $.error("missing source");
      }

      if (!o.node) {
        $.error("missing node");
      }

      if (o.name && !isValidName(o.name)) {
        $.error("invalid dataset name: " + o.name);
      }

      www.mixin(this);
      this.highlight = !!o.highlight;
      this.name = _.toStr(o.name || nameGenerator());
      this.limit = o.limit || 5;
      this.displayFn = getDisplayFn(o.display || o.displayKey);
      this.templates = getTemplates(o.templates, this.displayFn);
      this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;
      this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;

      this._resetLastSuggestion();

      this.$el = $(o.node).attr("role", "presentation").addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name);
    }

    Dataset.extractData = function extractData(el) {
      var $el = $(el);

      if ($el.data(keys.obj)) {
        return {
          dataset: $el.data(keys.dataset) || "",
          val: $el.data(keys.val) || "",
          obj: $el.data(keys.obj) || null
        };
      }

      return null;
    };

    _.mixin(Dataset.prototype, EventEmitter, {
      _overwrite: function overwrite(query, suggestions) {
        suggestions = suggestions || [];

        if (suggestions.length) {
          this._renderSuggestions(query, suggestions);
        } else if (this.async && this.templates.pending) {
          this._renderPending(query);
        } else if (!this.async && this.templates.notFound) {
          this._renderNotFound(query);
        } else {
          this._empty();
        }

        this.trigger("rendered", suggestions, false, this.name);
      },
      _append: function append(query, suggestions) {
        suggestions = suggestions || [];

        if (suggestions.length && this.$lastSuggestion.length) {
          this._appendSuggestions(query, suggestions);
        } else if (suggestions.length) {
          this._renderSuggestions(query, suggestions);
        } else if (!this.$lastSuggestion.length && this.templates.notFound) {
          this._renderNotFound(query);
        }

        this.trigger("rendered", suggestions, true, this.name);
      },
      _renderSuggestions: function renderSuggestions(query, suggestions) {
        var $fragment;
        $fragment = this._getSuggestionsFragment(query, suggestions);
        this.$lastSuggestion = $fragment.children().last();
        this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));
      },
      _appendSuggestions: function appendSuggestions(query, suggestions) {
        var $fragment, $lastSuggestion;
        $fragment = this._getSuggestionsFragment(query, suggestions);
        $lastSuggestion = $fragment.children().last();
        this.$lastSuggestion.after($fragment);
        this.$lastSuggestion = $lastSuggestion;
      },
      _renderPending: function renderPending(query) {
        var template = this.templates.pending;

        this._resetLastSuggestion();

        template && this.$el.html(template({
          query: query,
          dataset: this.name
        }));
      },
      _renderNotFound: function renderNotFound(query) {
        var template = this.templates.notFound;

        this._resetLastSuggestion();

        template && this.$el.html(template({
          query: query,
          dataset: this.name
        }));
      },
      _empty: function empty() {
        this.$el.empty();

        this._resetLastSuggestion();
      },
      _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {
        var that = this,
            fragment;
        fragment = document.createDocumentFragment();

        _.each(suggestions, function getSuggestionNode(suggestion) {
          var $el, context;
          context = that._injectQuery(query, suggestion);
          $el = $(that.templates.suggestion(context)).data(keys.dataset, that.name).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + " " + that.classes.selectable);
          fragment.appendChild($el[0]);
        });

        this.highlight && highlight({
          className: this.classes.highlight,
          node: fragment,
          pattern: query
        });
        return $(fragment);
      },
      _getFooter: function getFooter(query, suggestions) {
        return this.templates.footer ? this.templates.footer({
          query: query,
          suggestions: suggestions,
          dataset: this.name
        }) : null;
      },
      _getHeader: function getHeader(query, suggestions) {
        return this.templates.header ? this.templates.header({
          query: query,
          suggestions: suggestions,
          dataset: this.name
        }) : null;
      },
      _resetLastSuggestion: function resetLastSuggestion() {
        this.$lastSuggestion = $();
      },
      _injectQuery: function injectQuery(query, obj) {
        return _.isObject(obj) ? _.mixin({
          _query: query
        }, obj) : obj;
      },
      update: function update(query) {
        var that = this,
            canceled = false,
            syncCalled = false,
            rendered = 0;
        this.cancel();

        this.cancel = function cancel() {
          canceled = true;
          that.cancel = $.noop;
          that.async && that.trigger("asyncCanceled", query, that.name);
        };

        this.source(query, sync, async);
        !syncCalled && sync([]);

        function sync(suggestions) {
          if (syncCalled) {
            return;
          }

          syncCalled = true;
          suggestions = (suggestions || []).slice(0, that.limit);
          rendered = suggestions.length;

          that._overwrite(query, suggestions);

          if (rendered < that.limit && that.async) {
            that.trigger("asyncRequested", query, that.name);
          }
        }

        function async(suggestions) {
          suggestions = suggestions || [];

          if (!canceled && rendered < that.limit) {
            that.cancel = $.noop;
            var idx = Math.abs(rendered - that.limit);
            rendered += idx;

            that._append(query, suggestions.slice(0, idx));

            that.async && that.trigger("asyncReceived", query, that.name);
          }
        }
      },
      cancel: $.noop,
      clear: function clear() {
        this._empty();

        this.cancel();
        this.trigger("cleared");
      },
      isEmpty: function isEmpty() {
        return this.$el.is(":empty");
      },
      destroy: function destroy() {
        this.$el = $("<div>");
      }
    });

    return Dataset;

    function getDisplayFn(display) {
      display = display || _.stringify;
      return _.isFunction(display) ? display : displayFn;

      function displayFn(obj) {
        return obj[display];
      }
    }

    function getTemplates(templates, displayFn) {
      return {
        notFound: templates.notFound && _.templatify(templates.notFound),
        pending: templates.pending && _.templatify(templates.pending),
        header: templates.header && _.templatify(templates.header),
        footer: templates.footer && _.templatify(templates.footer),
        suggestion: templates.suggestion ? userSuggestionTemplate : suggestionTemplate
      };

      function userSuggestionTemplate(context) {
        var template = templates.suggestion;
        return $(template(context)).attr("id", _.guid());
      }

      function suggestionTemplate(context) {
        return $('<div role="option">').attr("id", _.guid()).text(displayFn(context));
      }
    }

    function isValidName(str) {
      return /^[_a-zA-Z0-9-]+$/.test(str);
    }
  }();

  var Menu = function () {
    "use strict";

    function Menu(o, www) {
      var that = this;
      o = o || {};

      if (!o.node) {
        $.error("node is required");
      }

      www.mixin(this);
      this.$node = $(o.node);
      this.query = null;
      this.datasets = _.map(o.datasets, initializeDataset);

      function initializeDataset(oDataset) {
        var node = that.$node.find(oDataset.node).first();
        oDataset.node = node.length ? node : $("<div>").appendTo(that.$node);
        return new Dataset(oDataset, www);
      }
    }

    _.mixin(Menu.prototype, EventEmitter, {
      _onSelectableClick: function onSelectableClick($e) {
        this.trigger("selectableClicked", $($e.currentTarget));
      },
      _onRendered: function onRendered(type, dataset, suggestions, async) {
        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
        this.trigger("datasetRendered", dataset, suggestions, async);
      },
      _onCleared: function onCleared() {
        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
        this.trigger("datasetCleared");
      },
      _propagate: function propagate() {
        this.trigger.apply(this, arguments);
      },
      _allDatasetsEmpty: function allDatasetsEmpty() {
        return _.every(this.datasets, _.bind(function isDatasetEmpty(dataset) {
          var isEmpty = dataset.isEmpty();
          this.$node.attr("aria-expanded", !isEmpty);
          return isEmpty;
        }, this));
      },
      _getSelectables: function getSelectables() {
        return this.$node.find(this.selectors.selectable);
      },
      _removeCursor: function _removeCursor() {
        var $selectable = this.getActiveSelectable();
        $selectable && $selectable.removeClass(this.classes.cursor);
      },
      _ensureVisible: function ensureVisible($el) {
        var elTop, elBottom, nodeScrollTop, nodeHeight;
        elTop = $el.position().top;
        elBottom = elTop + $el.outerHeight(true);
        nodeScrollTop = this.$node.scrollTop();
        nodeHeight = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10);

        if (elTop < 0) {
          this.$node.scrollTop(nodeScrollTop + elTop);
        } else if (nodeHeight < elBottom) {
          this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));
        }
      },
      bind: function bind() {
        var that = this,
            onSelectableClick;
        onSelectableClick = _.bind(this._onSelectableClick, this);
        this.$node.on("click.tt", this.selectors.selectable, onSelectableClick);
        this.$node.on("mouseover", this.selectors.selectable, function () {
          that.setCursor($(this));
        });
        this.$node.on("mouseleave", function () {
          that._removeCursor();
        });

        _.each(this.datasets, function (dataset) {
          dataset.onSync("asyncRequested", that._propagate, that).onSync("asyncCanceled", that._propagate, that).onSync("asyncReceived", that._propagate, that).onSync("rendered", that._onRendered, that).onSync("cleared", that._onCleared, that);
        });

        return this;
      },
      isOpen: function isOpen() {
        return this.$node.hasClass(this.classes.open);
      },
      open: function open() {
        this.$node.scrollTop(0);
        this.$node.addClass(this.classes.open);
      },
      close: function close() {
        this.$node.attr("aria-expanded", false);
        this.$node.removeClass(this.classes.open);

        this._removeCursor();
      },
      setLanguageDirection: function setLanguageDirection(dir) {
        this.$node.attr("dir", dir);
      },
      selectableRelativeToCursor: function selectableRelativeToCursor(delta) {
        var $selectables, $oldCursor, oldIndex, newIndex;
        $oldCursor = this.getActiveSelectable();
        $selectables = this._getSelectables();
        oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;
        newIndex = oldIndex + delta;
        newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;
        newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;
        return newIndex === -1 ? null : $selectables.eq(newIndex);
      },
      setCursor: function setCursor($selectable) {
        this._removeCursor();

        if ($selectable = $selectable && $selectable.first()) {
          $selectable.addClass(this.classes.cursor);

          this._ensureVisible($selectable);
        }
      },
      getSelectableData: function getSelectableData($el) {
        return $el && $el.length ? Dataset.extractData($el) : null;
      },
      getActiveSelectable: function getActiveSelectable() {
        var $selectable = this._getSelectables().filter(this.selectors.cursor).first();

        return $selectable.length ? $selectable : null;
      },
      getTopSelectable: function getTopSelectable() {
        var $selectable = this._getSelectables().first();

        return $selectable.length ? $selectable : null;
      },
      update: function update(query) {
        var isValidUpdate = query !== this.query;

        if (isValidUpdate) {
          this.query = query;

          _.each(this.datasets, updateDataset);
        }

        return isValidUpdate;

        function updateDataset(dataset) {
          dataset.update(query);
        }
      },
      empty: function empty() {
        _.each(this.datasets, clearDataset);

        this.query = null;
        this.$node.addClass(this.classes.empty);

        function clearDataset(dataset) {
          dataset.clear();
        }
      },
      destroy: function destroy() {
        this.$node.off(".tt");
        this.$node = $("<div>");

        _.each(this.datasets, destroyDataset);

        function destroyDataset(dataset) {
          dataset.destroy();
        }
      }
    });

    return Menu;
  }();

  var Status = function () {
    "use strict";

    function Status(options) {
      this.$el = $("<span></span>", {
        role: "status",
        "aria-live": "polite"
      }).css({
        position: "absolute",
        padding: "0",
        border: "0",
        height: "1px",
        width: "1px",
        "margin-bottom": "-1px",
        "margin-right": "-1px",
        overflow: "hidden",
        clip: "rect(0 0 0 0)",
        "white-space": "nowrap"
      });
      options.$input.after(this.$el);

      _.each(options.menu.datasets, _.bind(function (dataset) {
        if (dataset.onSync) {
          dataset.onSync("rendered", _.bind(this.update, this));
          dataset.onSync("cleared", _.bind(this.cleared, this));
        }
      }, this));
    }

    _.mixin(Status.prototype, {
      update: function update(event, suggestions) {
        var length = suggestions.length;
        var words;

        if (length === 1) {
          words = {
            result: "result",
            is: "is"
          };
        } else {
          words = {
            result: "results",
            is: "are"
          };
        }

        this.$el.text(length + " " + words.result + " " + words.is + " available, use up and down arrow keys to navigate.");
      },
      cleared: function cleared() {
        this.$el.text("");
      }
    });

    return Status;
  }();

  var DefaultMenu = function () {
    "use strict";

    var s = Menu.prototype;

    function DefaultMenu() {
      Menu.apply(this, [].slice.call(arguments, 0));
    }

    _.mixin(DefaultMenu.prototype, Menu.prototype, {
      open: function open() {
        !this._allDatasetsEmpty() && this._show();
        return s.open.apply(this, [].slice.call(arguments, 0));
      },
      close: function close() {
        this._hide();

        return s.close.apply(this, [].slice.call(arguments, 0));
      },
      _onRendered: function onRendered() {
        if (this._allDatasetsEmpty()) {
          this._hide();
        } else {
          this.isOpen() && this._show();
        }

        return s._onRendered.apply(this, [].slice.call(arguments, 0));
      },
      _onCleared: function onCleared() {
        if (this._allDatasetsEmpty()) {
          this._hide();
        } else {
          this.isOpen() && this._show();
        }

        return s._onCleared.apply(this, [].slice.call(arguments, 0));
      },
      setLanguageDirection: function setLanguageDirection(dir) {
        this.$node.css(dir === "ltr" ? this.css.ltr : this.css.rtl);
        return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));
      },
      _hide: function hide() {
        this.$node.hide();
      },
      _show: function show() {
        this.$node.css("display", "block");
      }
    });

    return DefaultMenu;
  }();

  var Typeahead = function () {
    "use strict";

    function Typeahead(o, www) {
      var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;
      o = o || {};

      if (!o.input) {
        $.error("missing input");
      }

      if (!o.menu) {
        $.error("missing menu");
      }

      if (!o.eventBus) {
        $.error("missing event bus");
      }

      www.mixin(this);
      this.eventBus = o.eventBus;
      this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;
      this.input = o.input;
      this.menu = o.menu;
      this.enabled = true;
      this.autoselect = !!o.autoselect;
      this.active = false;
      this.input.hasFocus() && this.activate();
      this.dir = this.input.getLangDir();

      this._hacks();

      this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this);
      onFocused = c(this, "activate", "open", "_onFocused");
      onBlurred = c(this, "deactivate", "_onBlurred");
      onEnterKeyed = c(this, "isActive", "isOpen", "_onEnterKeyed");
      onTabKeyed = c(this, "isActive", "isOpen", "_onTabKeyed");
      onEscKeyed = c(this, "isActive", "_onEscKeyed");
      onUpKeyed = c(this, "isActive", "open", "_onUpKeyed");
      onDownKeyed = c(this, "isActive", "open", "_onDownKeyed");
      onLeftKeyed = c(this, "isActive", "isOpen", "_onLeftKeyed");
      onRightKeyed = c(this, "isActive", "isOpen", "_onRightKeyed");
      onQueryChanged = c(this, "_openIfActive", "_onQueryChanged");
      onWhitespaceChanged = c(this, "_openIfActive", "_onWhitespaceChanged");
      this.input.bind().onSync("focused", onFocused, this).onSync("blurred", onBlurred, this).onSync("enterKeyed", onEnterKeyed, this).onSync("tabKeyed", onTabKeyed, this).onSync("escKeyed", onEscKeyed, this).onSync("upKeyed", onUpKeyed, this).onSync("downKeyed", onDownKeyed, this).onSync("leftKeyed", onLeftKeyed, this).onSync("rightKeyed", onRightKeyed, this).onSync("queryChanged", onQueryChanged, this).onSync("whitespaceChanged", onWhitespaceChanged, this).onSync("langDirChanged", this._onLangDirChanged, this);
    }

    _.mixin(Typeahead.prototype, {
      _hacks: function hacks() {
        var $input, $menu;
        $input = this.input.$input || $("<div>");
        $menu = this.menu.$node || $("<div>");
        $input.on("blur.tt", function ($e) {
          var active, isActive, hasActive;
          active = document.activeElement;
          isActive = $menu.is(active);
          hasActive = $menu.has(active).length > 0;

          if (_.isMsie() && (isActive || hasActive)) {
            $e.preventDefault();
            $e.stopImmediatePropagation();

            _.defer(function () {
              $input.focus();
            });
          }
        });
        $menu.on("mousedown.tt", function ($e) {
          $e.preventDefault();
        });
      },
      _onSelectableClicked: function onSelectableClicked(type, $el) {
        this.select($el);
      },
      _onDatasetCleared: function onDatasetCleared() {
        this._updateHint();
      },
      _onDatasetRendered: function onDatasetRendered(type, suggestions, async, dataset) {
        this._updateHint();

        if (this.autoselect) {
          var cursorClass = this.selectors.cursor.substr(1);
          this.menu.$node.find(this.selectors.suggestion).first().addClass(cursorClass);
        }

        this.eventBus.trigger("render", suggestions, async, dataset);
      },
      _onAsyncRequested: function onAsyncRequested(type, dataset, query) {
        this.eventBus.trigger("asyncrequest", query, dataset);
      },
      _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {
        this.eventBus.trigger("asynccancel", query, dataset);
      },
      _onAsyncReceived: function onAsyncReceived(type, dataset, query) {
        this.eventBus.trigger("asyncreceive", query, dataset);
      },
      _onFocused: function onFocused() {
        this._minLengthMet() && this.menu.update(this.input.getQuery());
      },
      _onBlurred: function onBlurred() {
        if (this.input.hasQueryChangedSinceLastFocus()) {
          this.eventBus.trigger("change", this.input.getQuery());
        }
      },
      _onEnterKeyed: function onEnterKeyed(type, $e) {
        var $selectable;

        if ($selectable = this.menu.getActiveSelectable()) {
          if (this.select($selectable)) {
            $e.preventDefault();
            $e.stopPropagation();
          }
        } else if (this.autoselect) {
          if (this.select(this.menu.getTopSelectable())) {
            $e.preventDefault();
            $e.stopPropagation();
          }
        }
      },
      _onTabKeyed: function onTabKeyed(type, $e) {
        var $selectable;

        if ($selectable = this.menu.getActiveSelectable()) {
          this.select($selectable) && $e.preventDefault();
        } else if (this.autoselect) {
          if ($selectable = this.menu.getTopSelectable()) {
            this.autocomplete($selectable) && $e.preventDefault();
          }
        }
      },
      _onEscKeyed: function onEscKeyed() {
        this.close();
      },
      _onUpKeyed: function onUpKeyed() {
        this.moveCursor(-1);
      },
      _onDownKeyed: function onDownKeyed() {
        this.moveCursor(+1);
      },
      _onLeftKeyed: function onLeftKeyed() {
        if (this.dir === "rtl" && this.input.isCursorAtEnd()) {
          this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());
        }
      },
      _onRightKeyed: function onRightKeyed() {
        if (this.dir === "ltr" && this.input.isCursorAtEnd()) {
          this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());
        }
      },
      _onQueryChanged: function onQueryChanged(e, query) {
        this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();
      },
      _onWhitespaceChanged: function onWhitespaceChanged() {
        this._updateHint();
      },
      _onLangDirChanged: function onLangDirChanged(e, dir) {
        if (this.dir !== dir) {
          this.dir = dir;
          this.menu.setLanguageDirection(dir);
        }
      },
      _openIfActive: function openIfActive() {
        this.isActive() && this.open();
      },
      _minLengthMet: function minLengthMet(query) {
        query = _.isString(query) ? query : this.input.getQuery() || "";
        return query.length >= this.minLength;
      },
      _updateHint: function updateHint() {
        var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;
        $selectable = this.menu.getTopSelectable();
        data = this.menu.getSelectableData($selectable);
        val = this.input.getInputValue();

        if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {
          query = Input.normalizeQuery(val);
          escapedQuery = _.escapeRegExChars(query);
          frontMatchRegEx = new RegExp("^(?:" + escapedQuery + ")(.+$)", "i");
          match = frontMatchRegEx.exec(data.val);
          match && this.input.setHint(val + match[1]);
        } else {
          this.input.clearHint();
        }
      },
      isEnabled: function isEnabled() {
        return this.enabled;
      },
      enable: function enable() {
        this.enabled = true;
      },
      disable: function disable() {
        this.enabled = false;
      },
      isActive: function isActive() {
        return this.active;
      },
      activate: function activate() {
        if (this.isActive()) {
          return true;
        } else if (!this.isEnabled() || this.eventBus.before("active")) {
          return false;
        } else {
          this.active = true;
          this.eventBus.trigger("active");
          return true;
        }
      },
      deactivate: function deactivate() {
        if (!this.isActive()) {
          return true;
        } else if (this.eventBus.before("idle")) {
          return false;
        } else {
          this.active = false;
          this.close();
          this.eventBus.trigger("idle");
          return true;
        }
      },
      isOpen: function isOpen() {
        return this.menu.isOpen();
      },
      open: function open() {
        if (!this.isOpen() && !this.eventBus.before("open")) {
          this.input.setAriaExpanded(true);
          this.menu.open();

          this._updateHint();

          this.eventBus.trigger("open");
        }

        return this.isOpen();
      },
      close: function close() {
        if (this.isOpen() && !this.eventBus.before("close")) {
          this.input.setAriaExpanded(false);
          this.menu.close();
          this.input.clearHint();
          this.input.resetInputValue();
          this.eventBus.trigger("close");
        }

        return !this.isOpen();
      },
      setVal: function setVal(val) {
        this.input.setQuery(_.toStr(val));
      },
      getVal: function getVal() {
        return this.input.getQuery();
      },
      select: function select($selectable) {
        var data = this.menu.getSelectableData($selectable);

        if (data && !this.eventBus.before("select", data.obj, data.dataset)) {
          this.input.setQuery(data.val, true);
          this.eventBus.trigger("select", data.obj, data.dataset);
          this.close();
          return true;
        }

        return false;
      },
      autocomplete: function autocomplete($selectable) {
        var query, data, isValid;
        query = this.input.getQuery();
        data = this.menu.getSelectableData($selectable);
        isValid = data && query !== data.val;

        if (isValid && !this.eventBus.before("autocomplete", data.obj, data.dataset)) {
          this.input.setQuery(data.val);
          this.eventBus.trigger("autocomplete", data.obj, data.dataset);
          return true;
        }

        return false;
      },
      moveCursor: function moveCursor(delta) {
        var query, $candidate, data, suggestion, datasetName, cancelMove, id;
        query = this.input.getQuery();
        $candidate = this.menu.selectableRelativeToCursor(delta);
        data = this.menu.getSelectableData($candidate);
        suggestion = data ? data.obj : null;
        datasetName = data ? data.dataset : null;
        id = $candidate ? $candidate.attr("id") : null;
        this.input.trigger("cursorchange", id);
        cancelMove = this._minLengthMet() && this.menu.update(query);

        if (!cancelMove && !this.eventBus.before("cursorchange", suggestion, datasetName)) {
          this.menu.setCursor($candidate);

          if (data) {
            if (typeof data.val === "string") {
              this.input.setInputValue(data.val);
            }
          } else {
            this.input.resetInputValue();

            this._updateHint();
          }

          this.eventBus.trigger("cursorchange", suggestion, datasetName);
          return true;
        }

        return false;
      },
      destroy: function destroy() {
        this.input.destroy();
        this.menu.destroy();
      }
    });

    return Typeahead;

    function c(ctx) {
      var methods = [].slice.call(arguments, 1);
      return function () {
        var args = [].slice.call(arguments);

        _.each(methods, function (method) {
          return ctx[method].apply(ctx, args);
        });
      };
    }
  }();

  (function () {
    "use strict";

    var old, keys, methods;
    old = $.fn.typeahead;
    keys = {
      www: "tt-www",
      attrs: "tt-attrs",
      typeahead: "tt-typeahead"
    };
    methods = {
      initialize: function initialize(o, datasets) {
        var www;
        datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);
        o = o || {};
        www = WWW(o.classNames);
        return this.each(attach);

        function attach() {
          var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, status, typeahead, MenuConstructor;

          _.each(datasets, function (d) {
            d.highlight = !!o.highlight;
          });

          $input = $(this);
          $wrapper = $(www.html.wrapper);
          $hint = $elOrNull(o.hint);
          $menu = $elOrNull(o.menu);
          defaultHint = o.hint !== false && !$hint;
          defaultMenu = o.menu !== false && !$menu;
          defaultHint && ($hint = buildHintFromInput($input, www));
          defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));
          $hint && $hint.val("");
          $input = prepInput($input, www);

          if (defaultHint || defaultMenu) {
            $wrapper.css(www.css.wrapper);
            $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);
            $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);
          }

          MenuConstructor = defaultMenu ? DefaultMenu : Menu;
          eventBus = new EventBus({
            el: $input
          });
          input = new Input({
            hint: $hint,
            input: $input,
            menu: $menu
          }, www);
          menu = new MenuConstructor({
            node: $menu,
            datasets: datasets
          }, www);
          status = new Status({
            $input: $input,
            menu: menu
          });
          typeahead = new Typeahead({
            input: input,
            menu: menu,
            eventBus: eventBus,
            minLength: o.minLength,
            autoselect: o.autoselect
          }, www);
          $input.data(keys.www, www);
          $input.data(keys.typeahead, typeahead);
        }
      },
      isEnabled: function isEnabled() {
        var enabled;
        ttEach(this.first(), function (t) {
          enabled = t.isEnabled();
        });
        return enabled;
      },
      enable: function enable() {
        ttEach(this, function (t) {
          t.enable();
        });
        return this;
      },
      disable: function disable() {
        ttEach(this, function (t) {
          t.disable();
        });
        return this;
      },
      isActive: function isActive() {
        var active;
        ttEach(this.first(), function (t) {
          active = t.isActive();
        });
        return active;
      },
      activate: function activate() {
        ttEach(this, function (t) {
          t.activate();
        });
        return this;
      },
      deactivate: function deactivate() {
        ttEach(this, function (t) {
          t.deactivate();
        });
        return this;
      },
      isOpen: function isOpen() {
        var open;
        ttEach(this.first(), function (t) {
          open = t.isOpen();
        });
        return open;
      },
      open: function open() {
        ttEach(this, function (t) {
          t.open();
        });
        return this;
      },
      close: function close() {
        ttEach(this, function (t) {
          t.close();
        });
        return this;
      },
      select: function select(el) {
        var success = false,
            $el = $(el);
        ttEach(this.first(), function (t) {
          success = t.select($el);
        });
        return success;
      },
      autocomplete: function autocomplete(el) {
        var success = false,
            $el = $(el);
        ttEach(this.first(), function (t) {
          success = t.autocomplete($el);
        });
        return success;
      },
      moveCursor: function moveCursoe(delta) {
        var success = false;
        ttEach(this.first(), function (t) {
          success = t.moveCursor(delta);
        });
        return success;
      },
      val: function val(newVal) {
        var query;

        if (!arguments.length) {
          ttEach(this.first(), function (t) {
            query = t.getVal();
          });
          return query;
        } else {
          ttEach(this, function (t) {
            t.setVal(_.toStr(newVal));
          });
          return this;
        }
      },
      destroy: function destroy() {
        ttEach(this, function (typeahead, $input) {
          revert($input);
          typeahead.destroy();
        });
        return this;
      }
    };

    $.fn.typeahead = function (method) {
      if (methods[method]) {
        return methods[method].apply(this, [].slice.call(arguments, 1));
      } else {
        return methods.initialize.apply(this, arguments);
      }
    };

    $.fn.typeahead.noConflict = function noConflict() {
      $.fn.typeahead = old;
      return this;
    };

    function ttEach($els, fn) {
      $els.each(function () {
        var $input = $(this),
            typeahead;
        (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);
      });
    }

    function buildHintFromInput($input, www) {
      return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop({
        readonly: true,
        required: false
      }).removeAttr("id name placeholder").removeClass("required").attr({
        spellcheck: "false",
        tabindex: -1
      });
    }

    function prepInput($input, www) {
      $input.data(keys.attrs, {
        dir: $input.attr("dir"),
        autocomplete: $input.attr("autocomplete"),
        spellcheck: $input.attr("spellcheck"),
        style: $input.attr("style")
      });
      $input.addClass(www.classes.input).attr({
        spellcheck: false
      });

      try {
        !$input.attr("dir") && $input.attr("dir", "auto");
      } catch (e) {}

      return $input;
    }

    function getBackgroundStyles($el) {
      return {
        backgroundAttachment: $el.css("background-attachment"),
        backgroundClip: $el.css("background-clip"),
        backgroundColor: $el.css("background-color"),
        backgroundImage: $el.css("background-image"),
        backgroundOrigin: $el.css("background-origin"),
        backgroundPosition: $el.css("background-position"),
        backgroundRepeat: $el.css("background-repeat"),
        backgroundSize: $el.css("background-size")
      };
    }

    function revert($input) {
      var www, $wrapper;
      www = $input.data(keys.www);
      $wrapper = $input.parent().filter(www.selectors.wrapper);

      _.each($input.data(keys.attrs), function (val, key) {
        _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
      });

      $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);

      if ($wrapper.length) {
        $input.detach().insertAfter($wrapper);
        $wrapper.remove();
      }
    }

    function $elOrNull(obj) {
      var isValid, $el;
      isValid = _.isJQuery(obj) || _.isElement(obj);
      $el = isValid ? $(obj).first() : [];
      return $el.length ? $el : null;
    }
  })();
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate))

/***/ }),

/***/ "./node_modules/bootstrap/js/src/alert.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/alert.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1039);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/collapse.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/collapse.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1040);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/dropdown.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/dropdown.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1041);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/modal.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/modal.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1042);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/popover.js":
/*!**************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/popover.js from dll-reference vendor ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1043);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/tooltip.js":
/*!**************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/tooltip.js from dll-reference vendor ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(384);

/***/ }),

/***/ "./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js":
/*!************************************************************************!*\
  !*** ./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!../../babel-loader/lib??ref--9!./typeahead.bundle.js */ "./node_modules/babel-loader/lib/index.js?!./node_modules/corejs-typeahead/dist/typeahead.bundle.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../../expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["Bloodhound"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["Bloodhound"] = ___EXPOSE_LOADER_IMPORT___;
else throw new Error('[exposes-loader] The "Bloodhound" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js":
/*!******************************************************************!*\
  !*** ./node_modules/expose-loader/dist/runtime/getGlobalThis.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

module.exports = function () {
  if (typeof globalThis === "object") {
    return globalThis;
  }

  var g;

  try {
    g = this || new Function("return this")();
  } catch (e) {
    if (typeof window === "object") {
      return window;
    }

    if (typeof self === "object") {
      return self;
    }

    if (typeof global !== "undefined") {
      return global;
    }
  }

  return g;
}();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/file-saver/dist/FileSaver.min.js":
/*!*******************************************************************************************!*\
  !*** delegated ./node_modules/file-saver/dist/FileSaver.min.js from dll-reference vendor ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1046);

/***/ }),

/***/ "./node_modules/floatthead/dist/jquery.floatThead.min.js":
/*!***************************************************************************************************!*\
  !*** delegated ./node_modules/floatthead/dist/jquery.floatThead.min.js from dll-reference vendor ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1047);

/***/ }),

/***/ "./node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.js":
/*!*********************************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.js from dll-reference vendor ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1050);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-de.js":
/*!*********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-de.js from dll-reference vendor ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1051);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-en-GB.js":
/*!************************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-en-GB.js from dll-reference vendor ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1052);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-fr.js":
/*!*********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-fr.js from dll-reference vendor ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1053);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-it.js":
/*!*********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-it.js from dll-reference vendor ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1054);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/draggable.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/widgets/draggable.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1055);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/resizable.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/widgets/resizable.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1058);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/slider.js":
/*!*****************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/widgets/slider.js from dll-reference vendor ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1060);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/sortable.js":
/*!*******************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/widgets/sortable.js from dll-reference vendor ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1061);

/***/ }),

/***/ "./node_modules/jquery/dist/jquery.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/jquery/dist/jquery.js from dll-reference vendor ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(4);

/***/ }),

/***/ "./node_modules/moment/dist/locale sync recursive ^\\.\\/.*$":
/*!*******************************************************!*\
  !*** ./node_modules/moment/dist/locale sync ^\.\/.*$ ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/dist/locale/af.js",
	"./af.js": "./node_modules/moment/dist/locale/af.js",
	"./ar": "./node_modules/moment/dist/locale/ar.js",
	"./ar-dz": "./node_modules/moment/dist/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/dist/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/dist/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/dist/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/dist/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/dist/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/dist/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/dist/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/dist/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/dist/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/dist/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/dist/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/dist/locale/ar.js",
	"./az": "./node_modules/moment/dist/locale/az.js",
	"./az.js": "./node_modules/moment/dist/locale/az.js",
	"./be": "./node_modules/moment/dist/locale/be.js",
	"./be.js": "./node_modules/moment/dist/locale/be.js",
	"./bg": "./node_modules/moment/dist/locale/bg.js",
	"./bg.js": "./node_modules/moment/dist/locale/bg.js",
	"./bm": "./node_modules/moment/dist/locale/bm.js",
	"./bm.js": "./node_modules/moment/dist/locale/bm.js",
	"./bn": "./node_modules/moment/dist/locale/bn.js",
	"./bn-bd": "./node_modules/moment/dist/locale/bn-bd.js",
	"./bn-bd.js": "./node_modules/moment/dist/locale/bn-bd.js",
	"./bn.js": "./node_modules/moment/dist/locale/bn.js",
	"./bo": "./node_modules/moment/dist/locale/bo.js",
	"./bo.js": "./node_modules/moment/dist/locale/bo.js",
	"./br": "./node_modules/moment/dist/locale/br.js",
	"./br.js": "./node_modules/moment/dist/locale/br.js",
	"./bs": "./node_modules/moment/dist/locale/bs.js",
	"./bs.js": "./node_modules/moment/dist/locale/bs.js",
	"./ca": "./node_modules/moment/dist/locale/ca.js",
	"./ca.js": "./node_modules/moment/dist/locale/ca.js",
	"./cs": "./node_modules/moment/dist/locale/cs.js",
	"./cs.js": "./node_modules/moment/dist/locale/cs.js",
	"./cv": "./node_modules/moment/dist/locale/cv.js",
	"./cv.js": "./node_modules/moment/dist/locale/cv.js",
	"./cy": "./node_modules/moment/dist/locale/cy.js",
	"./cy.js": "./node_modules/moment/dist/locale/cy.js",
	"./da": "./node_modules/moment/dist/locale/da.js",
	"./da.js": "./node_modules/moment/dist/locale/da.js",
	"./de": "./node_modules/moment/dist/locale/de.js",
	"./de-at": "./node_modules/moment/dist/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/dist/locale/de-at.js",
	"./de-ch": "./node_modules/moment/dist/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/dist/locale/de-ch.js",
	"./de.js": "./node_modules/moment/dist/locale/de.js",
	"./dv": "./node_modules/moment/dist/locale/dv.js",
	"./dv.js": "./node_modules/moment/dist/locale/dv.js",
	"./el": "./node_modules/moment/dist/locale/el.js",
	"./el.js": "./node_modules/moment/dist/locale/el.js",
	"./en-au": "./node_modules/moment/dist/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/dist/locale/en-au.js",
	"./en-ca": "./node_modules/moment/dist/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/dist/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/dist/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/dist/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/dist/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/dist/locale/en-ie.js",
	"./en-il": "./node_modules/moment/dist/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/dist/locale/en-il.js",
	"./en-in": "./node_modules/moment/dist/locale/en-in.js",
	"./en-in.js": "./node_modules/moment/dist/locale/en-in.js",
	"./en-nz": "./node_modules/moment/dist/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/dist/locale/en-nz.js",
	"./en-sg": "./node_modules/moment/dist/locale/en-sg.js",
	"./en-sg.js": "./node_modules/moment/dist/locale/en-sg.js",
	"./eo": "./node_modules/moment/dist/locale/eo.js",
	"./eo.js": "./node_modules/moment/dist/locale/eo.js",
	"./es": "./node_modules/moment/dist/locale/es.js",
	"./es-do": "./node_modules/moment/dist/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/dist/locale/es-do.js",
	"./es-mx": "./node_modules/moment/dist/locale/es-mx.js",
	"./es-mx.js": "./node_modules/moment/dist/locale/es-mx.js",
	"./es-us": "./node_modules/moment/dist/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/dist/locale/es-us.js",
	"./es.js": "./node_modules/moment/dist/locale/es.js",
	"./et": "./node_modules/moment/dist/locale/et.js",
	"./et.js": "./node_modules/moment/dist/locale/et.js",
	"./eu": "./node_modules/moment/dist/locale/eu.js",
	"./eu.js": "./node_modules/moment/dist/locale/eu.js",
	"./fa": "./node_modules/moment/dist/locale/fa.js",
	"./fa.js": "./node_modules/moment/dist/locale/fa.js",
	"./fi": "./node_modules/moment/dist/locale/fi.js",
	"./fi.js": "./node_modules/moment/dist/locale/fi.js",
	"./fil": "./node_modules/moment/dist/locale/fil.js",
	"./fil.js": "./node_modules/moment/dist/locale/fil.js",
	"./fo": "./node_modules/moment/dist/locale/fo.js",
	"./fo.js": "./node_modules/moment/dist/locale/fo.js",
	"./fr": "./node_modules/moment/dist/locale/fr.js",
	"./fr-ca": "./node_modules/moment/dist/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/dist/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/dist/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/dist/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/dist/locale/fr.js",
	"./fy": "./node_modules/moment/dist/locale/fy.js",
	"./fy.js": "./node_modules/moment/dist/locale/fy.js",
	"./ga": "./node_modules/moment/dist/locale/ga.js",
	"./ga.js": "./node_modules/moment/dist/locale/ga.js",
	"./gd": "./node_modules/moment/dist/locale/gd.js",
	"./gd.js": "./node_modules/moment/dist/locale/gd.js",
	"./gl": "./node_modules/moment/dist/locale/gl.js",
	"./gl.js": "./node_modules/moment/dist/locale/gl.js",
	"./gom-deva": "./node_modules/moment/dist/locale/gom-deva.js",
	"./gom-deva.js": "./node_modules/moment/dist/locale/gom-deva.js",
	"./gom-latn": "./node_modules/moment/dist/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/dist/locale/gom-latn.js",
	"./gu": "./node_modules/moment/dist/locale/gu.js",
	"./gu.js": "./node_modules/moment/dist/locale/gu.js",
	"./he": "./node_modules/moment/dist/locale/he.js",
	"./he.js": "./node_modules/moment/dist/locale/he.js",
	"./hi": "./node_modules/moment/dist/locale/hi.js",
	"./hi.js": "./node_modules/moment/dist/locale/hi.js",
	"./hr": "./node_modules/moment/dist/locale/hr.js",
	"./hr.js": "./node_modules/moment/dist/locale/hr.js",
	"./hu": "./node_modules/moment/dist/locale/hu.js",
	"./hu.js": "./node_modules/moment/dist/locale/hu.js",
	"./hy-am": "./node_modules/moment/dist/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/dist/locale/hy-am.js",
	"./id": "./node_modules/moment/dist/locale/id.js",
	"./id.js": "./node_modules/moment/dist/locale/id.js",
	"./is": "./node_modules/moment/dist/locale/is.js",
	"./is.js": "./node_modules/moment/dist/locale/is.js",
	"./it": "./node_modules/moment/dist/locale/it.js",
	"./it-ch": "./node_modules/moment/dist/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/dist/locale/it-ch.js",
	"./it.js": "./node_modules/moment/dist/locale/it.js",
	"./ja": "./node_modules/moment/dist/locale/ja.js",
	"./ja.js": "./node_modules/moment/dist/locale/ja.js",
	"./jv": "./node_modules/moment/dist/locale/jv.js",
	"./jv.js": "./node_modules/moment/dist/locale/jv.js",
	"./ka": "./node_modules/moment/dist/locale/ka.js",
	"./ka.js": "./node_modules/moment/dist/locale/ka.js",
	"./kk": "./node_modules/moment/dist/locale/kk.js",
	"./kk.js": "./node_modules/moment/dist/locale/kk.js",
	"./km": "./node_modules/moment/dist/locale/km.js",
	"./km.js": "./node_modules/moment/dist/locale/km.js",
	"./kn": "./node_modules/moment/dist/locale/kn.js",
	"./kn.js": "./node_modules/moment/dist/locale/kn.js",
	"./ko": "./node_modules/moment/dist/locale/ko.js",
	"./ko.js": "./node_modules/moment/dist/locale/ko.js",
	"./ku": "./node_modules/moment/dist/locale/ku.js",
	"./ku.js": "./node_modules/moment/dist/locale/ku.js",
	"./ky": "./node_modules/moment/dist/locale/ky.js",
	"./ky.js": "./node_modules/moment/dist/locale/ky.js",
	"./lb": "./node_modules/moment/dist/locale/lb.js",
	"./lb.js": "./node_modules/moment/dist/locale/lb.js",
	"./lo": "./node_modules/moment/dist/locale/lo.js",
	"./lo.js": "./node_modules/moment/dist/locale/lo.js",
	"./lt": "./node_modules/moment/dist/locale/lt.js",
	"./lt.js": "./node_modules/moment/dist/locale/lt.js",
	"./lv": "./node_modules/moment/dist/locale/lv.js",
	"./lv.js": "./node_modules/moment/dist/locale/lv.js",
	"./me": "./node_modules/moment/dist/locale/me.js",
	"./me.js": "./node_modules/moment/dist/locale/me.js",
	"./mi": "./node_modules/moment/dist/locale/mi.js",
	"./mi.js": "./node_modules/moment/dist/locale/mi.js",
	"./mk": "./node_modules/moment/dist/locale/mk.js",
	"./mk.js": "./node_modules/moment/dist/locale/mk.js",
	"./ml": "./node_modules/moment/dist/locale/ml.js",
	"./ml.js": "./node_modules/moment/dist/locale/ml.js",
	"./mn": "./node_modules/moment/dist/locale/mn.js",
	"./mn.js": "./node_modules/moment/dist/locale/mn.js",
	"./mr": "./node_modules/moment/dist/locale/mr.js",
	"./mr.js": "./node_modules/moment/dist/locale/mr.js",
	"./ms": "./node_modules/moment/dist/locale/ms.js",
	"./ms-my": "./node_modules/moment/dist/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/dist/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/dist/locale/ms.js",
	"./mt": "./node_modules/moment/dist/locale/mt.js",
	"./mt.js": "./node_modules/moment/dist/locale/mt.js",
	"./my": "./node_modules/moment/dist/locale/my.js",
	"./my.js": "./node_modules/moment/dist/locale/my.js",
	"./nb": "./node_modules/moment/dist/locale/nb.js",
	"./nb.js": "./node_modules/moment/dist/locale/nb.js",
	"./ne": "./node_modules/moment/dist/locale/ne.js",
	"./ne.js": "./node_modules/moment/dist/locale/ne.js",
	"./nl": "./node_modules/moment/dist/locale/nl.js",
	"./nl-be": "./node_modules/moment/dist/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/dist/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/dist/locale/nl.js",
	"./nn": "./node_modules/moment/dist/locale/nn.js",
	"./nn.js": "./node_modules/moment/dist/locale/nn.js",
	"./oc-lnc": "./node_modules/moment/dist/locale/oc-lnc.js",
	"./oc-lnc.js": "./node_modules/moment/dist/locale/oc-lnc.js",
	"./pa-in": "./node_modules/moment/dist/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/dist/locale/pa-in.js",
	"./pl": "./node_modules/moment/dist/locale/pl.js",
	"./pl.js": "./node_modules/moment/dist/locale/pl.js",
	"./pt": "./node_modules/moment/dist/locale/pt.js",
	"./pt-br": "./node_modules/moment/dist/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/dist/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/dist/locale/pt.js",
	"./ro": "./node_modules/moment/dist/locale/ro.js",
	"./ro.js": "./node_modules/moment/dist/locale/ro.js",
	"./ru": "./node_modules/moment/dist/locale/ru.js",
	"./ru.js": "./node_modules/moment/dist/locale/ru.js",
	"./sd": "./node_modules/moment/dist/locale/sd.js",
	"./sd.js": "./node_modules/moment/dist/locale/sd.js",
	"./se": "./node_modules/moment/dist/locale/se.js",
	"./se.js": "./node_modules/moment/dist/locale/se.js",
	"./si": "./node_modules/moment/dist/locale/si.js",
	"./si.js": "./node_modules/moment/dist/locale/si.js",
	"./sk": "./node_modules/moment/dist/locale/sk.js",
	"./sk.js": "./node_modules/moment/dist/locale/sk.js",
	"./sl": "./node_modules/moment/dist/locale/sl.js",
	"./sl.js": "./node_modules/moment/dist/locale/sl.js",
	"./sq": "./node_modules/moment/dist/locale/sq.js",
	"./sq.js": "./node_modules/moment/dist/locale/sq.js",
	"./sr": "./node_modules/moment/dist/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/dist/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/dist/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/dist/locale/sr.js",
	"./ss": "./node_modules/moment/dist/locale/ss.js",
	"./ss.js": "./node_modules/moment/dist/locale/ss.js",
	"./sv": "./node_modules/moment/dist/locale/sv.js",
	"./sv.js": "./node_modules/moment/dist/locale/sv.js",
	"./sw": "./node_modules/moment/dist/locale/sw.js",
	"./sw.js": "./node_modules/moment/dist/locale/sw.js",
	"./ta": "./node_modules/moment/dist/locale/ta.js",
	"./ta.js": "./node_modules/moment/dist/locale/ta.js",
	"./te": "./node_modules/moment/dist/locale/te.js",
	"./te.js": "./node_modules/moment/dist/locale/te.js",
	"./tet": "./node_modules/moment/dist/locale/tet.js",
	"./tet.js": "./node_modules/moment/dist/locale/tet.js",
	"./tg": "./node_modules/moment/dist/locale/tg.js",
	"./tg.js": "./node_modules/moment/dist/locale/tg.js",
	"./th": "./node_modules/moment/dist/locale/th.js",
	"./th.js": "./node_modules/moment/dist/locale/th.js",
	"./tk": "./node_modules/moment/dist/locale/tk.js",
	"./tk.js": "./node_modules/moment/dist/locale/tk.js",
	"./tl-ph": "./node_modules/moment/dist/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/dist/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/dist/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/dist/locale/tlh.js",
	"./tr": "./node_modules/moment/dist/locale/tr.js",
	"./tr.js": "./node_modules/moment/dist/locale/tr.js",
	"./tzl": "./node_modules/moment/dist/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/dist/locale/tzl.js",
	"./tzm": "./node_modules/moment/dist/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/dist/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/dist/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/dist/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/dist/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/dist/locale/ug-cn.js",
	"./uk": "./node_modules/moment/dist/locale/uk.js",
	"./uk.js": "./node_modules/moment/dist/locale/uk.js",
	"./ur": "./node_modules/moment/dist/locale/ur.js",
	"./ur.js": "./node_modules/moment/dist/locale/ur.js",
	"./uz": "./node_modules/moment/dist/locale/uz.js",
	"./uz-latn": "./node_modules/moment/dist/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/dist/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/dist/locale/uz.js",
	"./vi": "./node_modules/moment/dist/locale/vi.js",
	"./vi.js": "./node_modules/moment/dist/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/dist/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/dist/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/dist/locale/yo.js",
	"./yo.js": "./node_modules/moment/dist/locale/yo.js",
	"./zh-cn": "./node_modules/moment/dist/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/dist/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/dist/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/dist/locale/zh-hk.js",
	"./zh-mo": "./node_modules/moment/dist/locale/zh-mo.js",
	"./zh-mo.js": "./node_modules/moment/dist/locale/zh-mo.js",
	"./zh-tw": "./node_modules/moment/dist/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/dist/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/dist/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./node_modules/moment/dist/locale/af.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/af.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('af', {
  months: 'Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember'.split('_'),
  monthsShort: 'Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des'.split('_'),
  weekdays: 'Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag'.split('_'),
  weekdaysShort: 'Son_Maa_Din_Woe_Don_Vry_Sat'.split('_'),
  weekdaysMin: 'So_Ma_Di_Wo_Do_Vr_Sa'.split('_'),
  meridiemParse: /vm|nm/i,
  isPM: function isPM(input) {
    return /^nm$/i.test(input);
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower ? 'vm' : 'VM';
    } else {
      return isLower ? 'nm' : 'NM';
    }
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Vandag om] LT',
    nextDay: '[Môre om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[Gister om] LT',
    lastWeek: '[Laas] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'oor %s',
    past: '%s gelede',
    s: "'n paar sekondes",
    ss: '%d sekondes',
    m: "'n minuut",
    mm: '%d minute',
    h: "'n uur",
    hh: '%d ure',
    d: "'n dag",
    dd: '%d dae',
    M: "'n maand",
    MM: '%d maande',
    y: "'n jaar",
    yy: '%d jaar'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-dz.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-dz.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var pluralForm = function pluralForm(n) {
  return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
},
    plurals = {
  s: ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
  m: ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
  h: ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
  d: ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
  M: ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
  y: ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
},
    pluralize = function pluralize(u) {
  return function (number, withoutSuffix, string, isFuture) {
    var f = pluralForm(number),
        str = plurals[u][pluralForm(number)];

    if (f === 2) {
      str = str[withoutSuffix ? 0 : 1];
    }

    return str.replace(/%d/i, number);
  };
},
    months = ['جانفي', 'فيفري', 'مارس', 'أفريل', 'ماي', 'جوان', 'جويلية', 'أوت', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-dz', {
  months: months,
  monthsShort: months,
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: "D/\u200FM/\u200FYYYY",
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم عند الساعة] LT',
    nextDay: '[غدًا عند الساعة] LT',
    nextWeek: 'dddd [عند الساعة] LT',
    lastDay: '[أمس عند الساعة] LT',
    lastWeek: 'dddd [عند الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'بعد %s',
    past: 'منذ %s',
    s: pluralize('s'),
    ss: pluralize('s'),
    m: pluralize('m'),
    mm: pluralize('m'),
    h: pluralize('h'),
    hh: pluralize('h'),
    d: pluralize('d'),
    dd: pluralize('d'),
    M: pluralize('M'),
    MM: pluralize('M'),
    y: pluralize('y'),
    yy: pluralize('y')
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 0,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-kw.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-kw.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-kw', {
  months: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  monthsShort: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  weekdays: 'الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  week: {
    dow: 0,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-ly.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-ly.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var symbolMap = {
  1: '1',
  2: '2',
  3: '3',
  4: '4',
  5: '5',
  6: '6',
  7: '7',
  8: '8',
  9: '9',
  0: '0'
},
    pluralForm = function pluralForm(n) {
  return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
},
    plurals = {
  s: ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
  m: ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
  h: ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
  d: ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
  M: ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
  y: ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
},
    pluralize = function pluralize(u) {
  return function (number, withoutSuffix, string, isFuture) {
    var f = pluralForm(number),
        str = plurals[u][pluralForm(number)];

    if (f === 2) {
      str = str[withoutSuffix ? 0 : 1];
    }

    return str.replace(/%d/i, number);
  };
},
    months = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-ly', {
  months: months,
  monthsShort: months,
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: "D/\u200FM/\u200FYYYY",
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم عند الساعة] LT',
    nextDay: '[غدًا عند الساعة] LT',
    nextWeek: 'dddd [عند الساعة] LT',
    lastDay: '[أمس عند الساعة] LT',
    lastWeek: 'dddd [عند الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'بعد %s',
    past: 'منذ %s',
    s: pluralize('s'),
    ss: pluralize('s'),
    m: pluralize('m'),
    mm: pluralize('m'),
    h: pluralize('h'),
    hh: pluralize('h'),
    d: pluralize('d'),
    dd: pluralize('d'),
    M: pluralize('M'),
    MM: pluralize('M'),
    y: pluralize('y'),
    yy: pluralize('y')
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-ma.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-ma.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-ma', {
  months: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  monthsShort: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-sa.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-sa.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '١',
  2: '٢',
  3: '٣',
  4: '٤',
  5: '٥',
  6: '٦',
  7: '٧',
  8: '٨',
  9: '٩',
  0: '٠'
},
    numberMap = {
  '١': '1',
  '٢': '2',
  '٣': '3',
  '٤': '4',
  '٥': '5',
  '٦': '6',
  '٧': '7',
  '٨': '8',
  '٩': '9',
  '٠': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-sa', {
  months: 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  monthsShort: 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  preparse: function preparse(string) {
    return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-tn.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-tn.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-tn', {
  months: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  monthsShort: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ar.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var symbolMap = {
  1: '١',
  2: '٢',
  3: '٣',
  4: '٤',
  5: '٥',
  6: '٦',
  7: '٧',
  8: '٨',
  9: '٩',
  0: '٠'
},
    numberMap = {
  '١': '1',
  '٢': '2',
  '٣': '3',
  '٤': '4',
  '٥': '5',
  '٦': '6',
  '٧': '7',
  '٨': '8',
  '٩': '9',
  '٠': '0'
},
    pluralForm = function pluralForm(n) {
  return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
},
    plurals = {
  s: ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
  m: ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
  h: ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
  d: ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
  M: ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
  y: ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
},
    pluralize = function pluralize(u) {
  return function (number, withoutSuffix, string, isFuture) {
    var f = pluralForm(number),
        str = plurals[u][pluralForm(number)];

    if (f === 2) {
      str = str[withoutSuffix ? 0 : 1];
    }

    return str.replace(/%d/i, number);
  };
},
    months = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar', {
  months: months,
  monthsShort: months,
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: "D/\u200FM/\u200FYYYY",
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم عند الساعة] LT',
    nextDay: '[غدًا عند الساعة] LT',
    nextWeek: 'dddd [عند الساعة] LT',
    lastDay: '[أمس عند الساعة] LT',
    lastWeek: 'dddd [عند الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'بعد %s',
    past: 'منذ %s',
    s: pluralize('s'),
    ss: pluralize('s'),
    m: pluralize('m'),
    mm: pluralize('m'),
    h: pluralize('h'),
    hh: pluralize('h'),
    d: pluralize('d'),
    dd: pluralize('d'),
    M: pluralize('M'),
    MM: pluralize('M'),
    y: pluralize('y'),
    yy: pluralize('y')
  },
  preparse: function preparse(string) {
    return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/az.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/az.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  1: '-inci',
  5: '-inci',
  8: '-inci',
  70: '-inci',
  80: '-inci',
  2: '-nci',
  7: '-nci',
  20: '-nci',
  50: '-nci',
  3: '-üncü',
  4: '-üncü',
  100: '-üncü',
  6: '-ncı',
  9: '-uncu',
  10: '-uncu',
  30: '-uncu',
  60: '-ıncı',
  90: '-ıncı'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('az', {
  months: 'yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr'.split('_'),
  monthsShort: 'yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek'.split('_'),
  weekdays: 'Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə'.split('_'),
  weekdaysShort: 'Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən'.split('_'),
  weekdaysMin: 'Bz_BE_ÇA_Çə_CA_Cü_Şə'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[bugün saat] LT',
    nextDay: '[sabah saat] LT',
    nextWeek: '[gələn həftə] dddd [saat] LT',
    lastDay: '[dünən] LT',
    lastWeek: '[keçən həftə] dddd [saat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s sonra',
    past: '%s əvvəl',
    s: 'bir neçə saniyə',
    ss: '%d saniyə',
    m: 'bir dəqiqə',
    mm: '%d dəqiqə',
    h: 'bir saat',
    hh: '%d saat',
    d: 'bir gün',
    dd: '%d gün',
    M: 'bir ay',
    MM: '%d ay',
    y: 'bir il',
    yy: '%d il'
  },
  meridiemParse: /gecə|səhər|gündüz|axşam/,
  isPM: function isPM(input) {
    return /^(gündüz|axşam)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'gecə';
    } else if (hour < 12) {
      return 'səhər';
    } else if (hour < 17) {
      return 'gündüz';
    } else {
      return 'axşam';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,
  ordinal: function ordinal(number) {
    if (number === 0) {
      return number + '-ıncı';
    }

    var a = number % 10,
        b = number % 100 - a,
        c = number >= 100 ? 100 : null;
    return number + (suffixes[a] || suffixes[b] || suffixes[c]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/be.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/be.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(word, num) {
  var forms = word.split('_');
  return num % 10 === 1 && num % 100 !== 11 ? forms[0] : num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2];
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: withoutSuffix ? 'секунда_секунды_секунд' : 'секунду_секунды_секунд',
    mm: withoutSuffix ? 'хвіліна_хвіліны_хвілін' : 'хвіліну_хвіліны_хвілін',
    hh: withoutSuffix ? 'гадзіна_гадзіны_гадзін' : 'гадзіну_гадзіны_гадзін',
    dd: 'дзень_дні_дзён',
    MM: 'месяц_месяцы_месяцаў',
    yy: 'год_гады_гадоў'
  };

  if (key === 'm') {
    return withoutSuffix ? 'хвіліна' : 'хвіліну';
  } else if (key === 'h') {
    return withoutSuffix ? 'гадзіна' : 'гадзіну';
  } else {
    return number + ' ' + plural(format[key], +number);
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('be', {
  months: {
    format: 'студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня'.split('_'),
    standalone: 'студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань'.split('_')
  },
  monthsShort: 'студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж'.split('_'),
  weekdays: {
    format: 'нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу'.split('_'),
    standalone: 'нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота'.split('_'),
    isFormat: /\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/
  },
  weekdaysShort: 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
  weekdaysMin: 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY г.',
    LLL: 'D MMMM YYYY г., HH:mm',
    LLLL: 'dddd, D MMMM YYYY г., HH:mm'
  },
  calendar: {
    sameDay: '[Сёння ў] LT',
    nextDay: '[Заўтра ў] LT',
    lastDay: '[Учора ў] LT',
    nextWeek: function nextWeek() {
      return '[У] dddd [ў] LT';
    },
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 5:
        case 6:
          return '[У мінулую] dddd [ў] LT';

        case 1:
        case 2:
        case 4:
          return '[У мінулы] dddd [ў] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'праз %s',
    past: '%s таму',
    s: 'некалькі секунд',
    m: relativeTimeWithPlural,
    mm: relativeTimeWithPlural,
    h: relativeTimeWithPlural,
    hh: relativeTimeWithPlural,
    d: 'дзень',
    dd: relativeTimeWithPlural,
    M: 'месяц',
    MM: relativeTimeWithPlural,
    y: 'год',
    yy: relativeTimeWithPlural
  },
  meridiemParse: /ночы|раніцы|дня|вечара/,
  isPM: function isPM(input) {
    return /^(дня|вечара)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ночы';
    } else if (hour < 12) {
      return 'раніцы';
    } else if (hour < 17) {
      return 'дня';
    } else {
      return 'вечара';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(і|ы|га)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'M':
      case 'd':
      case 'DDD':
      case 'w':
      case 'W':
        return (number % 10 === 2 || number % 10 === 3) && number % 100 !== 12 && number % 100 !== 13 ? number + '-і' : number + '-ы';

      case 'D':
        return number + '-га';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bg.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bg.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bg', {
  months: 'януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември'.split('_'),
  monthsShort: 'яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек'.split('_'),
  weekdays: 'неделя_понеделник_вторник_сряда_четвъртък_петък_събота'.split('_'),
  weekdaysShort: 'нед_пон_вто_сря_чет_пет_съб'.split('_'),
  weekdaysMin: 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY H:mm',
    LLLL: 'dddd, D MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[Днес в] LT',
    nextDay: '[Утре в] LT',
    nextWeek: 'dddd [в] LT',
    lastDay: '[Вчера в] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 6:
          return '[Миналата] dddd [в] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[Миналия] dddd [в] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'след %s',
    past: 'преди %s',
    s: 'няколко секунди',
    ss: '%d секунди',
    m: 'минута',
    mm: '%d минути',
    h: 'час',
    hh: '%d часа',
    d: 'ден',
    dd: '%d дена',
    w: 'седмица',
    ww: '%d седмици',
    M: 'месец',
    MM: '%d месеца',
    y: 'година',
    yy: '%d години'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
  ordinal: function ordinal(number) {
    var lastDigit = number % 10,
        last2Digits = number % 100;

    if (number === 0) {
      return number + '-ев';
    } else if (last2Digits === 0) {
      return number + '-ен';
    } else if (last2Digits > 10 && last2Digits < 20) {
      return number + '-ти';
    } else if (lastDigit === 1) {
      return number + '-ви';
    } else if (lastDigit === 2) {
      return number + '-ри';
    } else if (lastDigit === 7 || lastDigit === 8) {
      return number + '-ми';
    } else {
      return number + '-ти';
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bm.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bm.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bm', {
  months: 'Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo'.split('_'),
  monthsShort: 'Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des'.split('_'),
  weekdays: 'Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri'.split('_'),
  weekdaysShort: 'Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib'.split('_'),
  weekdaysMin: 'Ka_Nt_Ta_Ar_Al_Ju_Si'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'MMMM [tile] D [san] YYYY',
    LLL: 'MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm',
    LLLL: 'dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm'
  },
  calendar: {
    sameDay: '[Bi lɛrɛ] LT',
    nextDay: '[Sini lɛrɛ] LT',
    nextWeek: 'dddd [don lɛrɛ] LT',
    lastDay: '[Kunu lɛrɛ] LT',
    lastWeek: 'dddd [tɛmɛnen lɛrɛ] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s kɔnɔ',
    past: 'a bɛ %s bɔ',
    s: 'sanga dama dama',
    ss: 'sekondi %d',
    m: 'miniti kelen',
    mm: 'miniti %d',
    h: 'lɛrɛ kelen',
    hh: 'lɛrɛ %d',
    d: 'tile kelen',
    dd: 'tile %d',
    M: 'kalo kelen',
    MM: 'kalo %d',
    y: 'san kelen',
    yy: 'san %d'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bn-bd.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/bn-bd.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '১',
  2: '২',
  3: '৩',
  4: '৪',
  5: '৫',
  6: '৬',
  7: '৭',
  8: '৮',
  9: '৯',
  0: '০'
},
    numberMap = {
  '১': '1',
  '২': '2',
  '৩': '3',
  '৪': '4',
  '৫': '5',
  '৬': '6',
  '৭': '7',
  '৮': '8',
  '৯': '9',
  '০': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bn-bd', {
  months: 'জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
  monthsShort: 'জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে'.split('_'),
  weekdays: 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার'.split('_'),
  weekdaysShort: 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি'.split('_'),
  weekdaysMin: 'রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি'.split('_'),
  longDateFormat: {
    LT: 'A h:mm সময়',
    LTS: 'A h:mm:ss সময়',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm সময়',
    LLLL: 'dddd, D MMMM YYYY, A h:mm সময়'
  },
  calendar: {
    sameDay: '[আজ] LT',
    nextDay: '[আগামীকাল] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[গতকাল] LT',
    lastWeek: '[গত] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s পরে',
    past: '%s আগে',
    s: 'কয়েক সেকেন্ড',
    ss: '%d সেকেন্ড',
    m: 'এক মিনিট',
    mm: '%d মিনিট',
    h: 'এক ঘন্টা',
    hh: '%d ঘন্টা',
    d: 'এক দিন',
    dd: '%d দিন',
    M: 'এক মাস',
    MM: '%d মাস',
    y: 'এক বছর',
    yy: '%d বছর'
  },
  preparse: function preparse(string) {
    return string.replace(/[১২৩৪৫৬৭৮৯০]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'রাত') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ভোর') {
      return hour;
    } else if (meridiem === 'সকাল') {
      return hour;
    } else if (meridiem === 'দুপুর') {
      return hour >= 3 ? hour : hour + 12;
    } else if (meridiem === 'বিকাল') {
      return hour + 12;
    } else if (meridiem === 'সন্ধ্যা') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'রাত';
    } else if (hour < 6) {
      return 'ভোর';
    } else if (hour < 12) {
      return 'সকাল';
    } else if (hour < 15) {
      return 'দুপুর';
    } else if (hour < 18) {
      return 'বিকাল';
    } else if (hour < 20) {
      return 'সন্ধ্যা';
    } else {
      return 'রাত';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '১',
  2: '২',
  3: '৩',
  4: '৪',
  5: '৫',
  6: '৬',
  7: '৭',
  8: '৮',
  9: '৯',
  0: '০'
},
    numberMap = {
  '১': '1',
  '২': '2',
  '৩': '3',
  '৪': '4',
  '৫': '5',
  '৬': '6',
  '৭': '7',
  '৮': '8',
  '৯': '9',
  '০': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bn', {
  months: 'জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
  monthsShort: 'জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে'.split('_'),
  weekdays: 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার'.split('_'),
  weekdaysShort: 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি'.split('_'),
  weekdaysMin: 'রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি'.split('_'),
  longDateFormat: {
    LT: 'A h:mm সময়',
    LTS: 'A h:mm:ss সময়',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm সময়',
    LLLL: 'dddd, D MMMM YYYY, A h:mm সময়'
  },
  calendar: {
    sameDay: '[আজ] LT',
    nextDay: '[আগামীকাল] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[গতকাল] LT',
    lastWeek: '[গত] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s পরে',
    past: '%s আগে',
    s: 'কয়েক সেকেন্ড',
    ss: '%d সেকেন্ড',
    m: 'এক মিনিট',
    mm: '%d মিনিট',
    h: 'এক ঘন্টা',
    hh: '%d ঘন্টা',
    d: 'এক দিন',
    dd: '%d দিন',
    M: 'এক মাস',
    MM: '%d মাস',
    y: 'এক বছর',
    yy: '%d বছর'
  },
  preparse: function preparse(string) {
    return string.replace(/[১২৩৪৫৬৭৮৯০]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /রাত|সকাল|দুপুর|বিকাল|রাত/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'রাত' && hour >= 4 || meridiem === 'দুপুর' && hour < 5 || meridiem === 'বিকাল') {
      return hour + 12;
    } else {
      return hour;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'রাত';
    } else if (hour < 10) {
      return 'সকাল';
    } else if (hour < 17) {
      return 'দুপুর';
    } else if (hour < 20) {
      return 'বিকাল';
    } else {
      return 'রাত';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '༡',
  2: '༢',
  3: '༣',
  4: '༤',
  5: '༥',
  6: '༦',
  7: '༧',
  8: '༨',
  9: '༩',
  0: '༠'
},
    numberMap = {
  '༡': '1',
  '༢': '2',
  '༣': '3',
  '༤': '4',
  '༥': '5',
  '༦': '6',
  '༧': '7',
  '༨': '8',
  '༩': '9',
  '༠': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bo', {
  months: 'ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ'.split('_'),
  monthsShort: 'ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12'.split('_'),
  monthsShortRegex: /^(ཟླ་\d{1,2})/,
  monthsParseExact: true,
  weekdays: 'གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་'.split('_'),
  weekdaysShort: 'ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་'.split('_'),
  weekdaysMin: 'ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm',
    LLLL: 'dddd, D MMMM YYYY, A h:mm'
  },
  calendar: {
    sameDay: '[དི་རིང] LT',
    nextDay: '[སང་ཉིན] LT',
    nextWeek: '[བདུན་ཕྲག་རྗེས་མ], LT',
    lastDay: '[ཁ་སང] LT',
    lastWeek: '[བདུན་ཕྲག་མཐའ་མ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ལ་',
    past: '%s སྔན་ལ',
    s: 'ལམ་སང',
    ss: '%d སྐར་ཆ།',
    m: 'སྐར་མ་གཅིག',
    mm: '%d སྐར་མ',
    h: 'ཆུ་ཚོད་གཅིག',
    hh: '%d ཆུ་ཚོད',
    d: 'ཉིན་གཅིག',
    dd: '%d ཉིན་',
    M: 'ཟླ་བ་གཅིག',
    MM: '%d ཟླ་བ',
    y: 'ལོ་གཅིག',
    yy: '%d ལོ'
  },
  preparse: function preparse(string) {
    return string.replace(/[༡༢༣༤༥༦༧༨༩༠]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'མཚན་མོ' && hour >= 4 || meridiem === 'ཉིན་གུང' && hour < 5 || meridiem === 'དགོང་དག') {
      return hour + 12;
    } else {
      return hour;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'མཚན་མོ';
    } else if (hour < 10) {
      return 'ཞོགས་ཀས';
    } else if (hour < 17) {
      return 'ཉིན་གུང';
    } else if (hour < 20) {
      return 'དགོང་དག';
    } else {
      return 'མཚན་མོ';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/br.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/br.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function relativeTimeWithMutation(number, withoutSuffix, key) {
  var format = {
    mm: 'munutenn',
    MM: 'miz',
    dd: 'devezh'
  };
  return number + ' ' + mutation(format[key], number);
}

function specialMutationForYears(number) {
  switch (lastNumber(number)) {
    case 1:
    case 3:
    case 4:
    case 5:
    case 9:
      return number + ' bloaz';

    default:
      return number + ' vloaz';
  }
}

function lastNumber(number) {
  if (number > 9) {
    return lastNumber(number % 10);
  }

  return number;
}

function mutation(text, number) {
  if (number === 2) {
    return softMutation(text);
  }

  return text;
}

function softMutation(text) {
  var mutationTable = {
    m: 'v',
    b: 'v',
    d: 'z'
  };

  if (mutationTable[text.charAt(0)] === undefined) {
    return text;
  }

  return mutationTable[text.charAt(0)] + text.substring(1);
}

var monthsParse = [/^gen/i, /^c[ʼ\']hwe/i, /^meu/i, /^ebr/i, /^mae/i, /^(mez|eve)/i, /^gou/i, /^eos/i, /^gwe/i, /^her/i, /^du/i, /^ker/i],
    monthsRegex = /^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,
    monthsStrictRegex = /^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,
    monthsShortStrictRegex = /^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,
    fullWeekdaysParse = [/^sul/i, /^lun/i, /^meurzh/i, /^merc[ʼ\']her/i, /^yaou/i, /^gwener/i, /^sadorn/i],
    shortWeekdaysParse = [/^Sul/i, /^Lun/i, /^Meu/i, /^Mer/i, /^Yao/i, /^Gwe/i, /^Sad/i],
    minWeekdaysParse = [/^Su/i, /^Lu/i, /^Me([^r]|$)/i, /^Mer/i, /^Ya/i, /^Gw/i, /^Sa/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('br', {
  months: 'Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu'.split('_'),
  monthsShort: 'Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker'.split('_'),
  weekdays: 'Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn'.split('_'),
  weekdaysShort: 'Sul_Lun_Meu_Mer_Yao_Gwe_Sad'.split('_'),
  weekdaysMin: 'Su_Lu_Me_Mer_Ya_Gw_Sa'.split('_'),
  weekdaysParse: minWeekdaysParse,
  fullWeekdaysParse: fullWeekdaysParse,
  shortWeekdaysParse: shortWeekdaysParse,
  minWeekdaysParse: minWeekdaysParse,
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: monthsStrictRegex,
  monthsShortStrictRegex: monthsShortStrictRegex,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [a viz] MMMM YYYY',
    LLL: 'D [a viz] MMMM YYYY HH:mm',
    LLLL: 'dddd, D [a viz] MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Hiziv da] LT',
    nextDay: '[Warcʼhoazh da] LT',
    nextWeek: 'dddd [da] LT',
    lastDay: '[Decʼh da] LT',
    lastWeek: 'dddd [paset da] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'a-benn %s',
    past: '%s ʼzo',
    s: 'un nebeud segondennoù',
    ss: '%d eilenn',
    m: 'ur vunutenn',
    mm: relativeTimeWithMutation,
    h: 'un eur',
    hh: '%d eur',
    d: 'un devezh',
    dd: relativeTimeWithMutation,
    M: 'ur miz',
    MM: relativeTimeWithMutation,
    y: 'ur bloaz',
    yy: specialMutationForYears
  },
  dayOfMonthOrdinalParse: /\d{1,2}(añ|vet)/,
  ordinal: function ordinal(number) {
    var output = number === 1 ? 'añ' : 'vet';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  },
  meridiemParse: /a.m.|g.m./,
  isPM: function isPM(token) {
    return token === 'g.m.';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    return hour < 12 ? 'a.m.' : 'g.m.';
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bs.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bs.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function translate(number, withoutSuffix, key) {
  var result = number + ' ';

  switch (key) {
    case 'ss':
      if (number === 1) {
        result += 'sekunda';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sekunde';
      } else {
        result += 'sekundi';
      }

      return result;

    case 'm':
      return withoutSuffix ? 'jedna minuta' : 'jedne minute';

    case 'mm':
      if (number === 1) {
        result += 'minuta';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'minute';
      } else {
        result += 'minuta';
      }

      return result;

    case 'h':
      return withoutSuffix ? 'jedan sat' : 'jednog sata';

    case 'hh':
      if (number === 1) {
        result += 'sat';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sata';
      } else {
        result += 'sati';
      }

      return result;

    case 'dd':
      if (number === 1) {
        result += 'dan';
      } else {
        result += 'dana';
      }

      return result;

    case 'MM':
      if (number === 1) {
        result += 'mjesec';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'mjeseca';
      } else {
        result += 'mjeseci';
      }

      return result;

    case 'yy':
      if (number === 1) {
        result += 'godina';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'godine';
      } else {
        result += 'godina';
      }

      return result;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bs', {
  months: 'januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedjelju] [u] LT';

        case 3:
          return '[u] [srijedu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[jučer u] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
          return '[prošlu] dddd [u] LT';

        case 6:
          return '[prošle] [subote] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[prošli] dddd [u] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'prije %s',
    s: 'par sekundi',
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: 'dan',
    dd: translate,
    M: 'mjesec',
    MM: translate,
    y: 'godinu',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ca.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ca.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ca', {
  months: {
    standalone: 'gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre'.split('_'),
    format: "de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split('_'),
    isFormat: /D[oD]?(\s)+MMMM/
  },
  monthsShort: 'gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.'.split('_'),
  monthsParseExact: true,
  weekdays: 'diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte'.split('_'),
  weekdaysShort: 'dg._dl._dt._dc._dj._dv._ds.'.split('_'),
  weekdaysMin: 'dg_dl_dt_dc_dj_dv_ds'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM [de] YYYY',
    ll: 'D MMM YYYY',
    LLL: 'D MMMM [de] YYYY [a les] H:mm',
    lll: 'D MMM YYYY, H:mm',
    LLLL: 'dddd D MMMM [de] YYYY [a les] H:mm',
    llll: 'ddd D MMM YYYY, H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[avui a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    nextDay: function nextDay() {
      return '[demà a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ahir a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [passat a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: "d'aquí %s",
    past: 'fa %s',
    s: 'uns segons',
    ss: '%d segons',
    m: 'un minut',
    mm: '%d minuts',
    h: 'una hora',
    hh: '%d hores',
    d: 'un dia',
    dd: '%d dies',
    M: 'un mes',
    MM: '%d mesos',
    y: 'un any',
    yy: '%d anys'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(r|n|t|è|a)/,
  ordinal: function ordinal(number, period) {
    var output = number === 1 ? 'r' : number === 2 ? 'n' : number === 3 ? 'r' : number === 4 ? 't' : 'è';

    if (period === 'w' || period === 'W') {
      output = 'a';
    }

    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/cs.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/cs.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = 'leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec'.split('_'),
    monthsShort = 'led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro'.split('_'),
    monthsParse = [/^led/i, /^úno/i, /^bře/i, /^dub/i, /^kvě/i, /^(čvn|červen$|června)/i, /^(čvc|červenec|července)/i, /^srp/i, /^zář/i, /^říj/i, /^lis/i, /^pro/i],
    monthsRegex = /^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;

function plural(n) {
  return n > 1 && n < 5 && ~~(n / 10) !== 1;
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'pár sekund' : 'pár sekundami';

    case 'ss':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'sekundy' : 'sekund');
      } else {
        return result + 'sekundami';
      }

    case 'm':
      return withoutSuffix ? 'minuta' : isFuture ? 'minutu' : 'minutou';

    case 'mm':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'minuty' : 'minut');
      } else {
        return result + 'minutami';
      }

    case 'h':
      return withoutSuffix ? 'hodina' : isFuture ? 'hodinu' : 'hodinou';

    case 'hh':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'hodiny' : 'hodin');
      } else {
        return result + 'hodinami';
      }

    case 'd':
      return withoutSuffix || isFuture ? 'den' : 'dnem';

    case 'dd':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'dny' : 'dní');
      } else {
        return result + 'dny';
      }

    case 'M':
      return withoutSuffix || isFuture ? 'měsíc' : 'měsícem';

    case 'MM':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'měsíce' : 'měsíců');
      } else {
        return result + 'měsíci';
      }

    case 'y':
      return withoutSuffix || isFuture ? 'rok' : 'rokem';

    case 'yy':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'roky' : 'let');
      } else {
        return result + 'lety';
      }

  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('cs', {
  months: months,
  monthsShort: monthsShort,
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,
  monthsShortStrictRegex: /^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota'.split('_'),
  weekdaysShort: 'ne_po_út_st_čt_pá_so'.split('_'),
  weekdaysMin: 'ne_po_út_st_čt_pá_so'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd D. MMMM YYYY H:mm',
    l: 'D. M. YYYY'
  },
  calendar: {
    sameDay: '[dnes v] LT',
    nextDay: '[zítra v] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[v neděli v] LT';

        case 1:
        case 2:
          return '[v] dddd [v] LT';

        case 3:
          return '[ve středu v] LT';

        case 4:
          return '[ve čtvrtek v] LT';

        case 5:
          return '[v pátek v] LT';

        case 6:
          return '[v sobotu v] LT';
      }
    },
    lastDay: '[včera v] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[minulou neděli v] LT';

        case 1:
        case 2:
          return '[minulé] dddd [v] LT';

        case 3:
          return '[minulou středu v] LT';

        case 4:
        case 5:
          return '[minulý] dddd [v] LT';

        case 6:
          return '[minulou sobotu v] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'před %s',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/cv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/cv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('cv', {
  months: 'кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав'.split('_'),
  monthsShort: 'кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш'.split('_'),
  weekdays: 'вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун'.split('_'),
  weekdaysShort: 'выр_тун_ытл_юн_кӗҫ_эрн_шӑм'.split('_'),
  weekdaysMin: 'вр_тн_ыт_юн_кҫ_эр_шм'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD-MM-YYYY',
    LL: 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]',
    LLL: 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm',
    LLLL: 'dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm'
  },
  calendar: {
    sameDay: '[Паян] LT [сехетре]',
    nextDay: '[Ыран] LT [сехетре]',
    lastDay: '[Ӗнер] LT [сехетре]',
    nextWeek: '[Ҫитес] dddd LT [сехетре]',
    lastWeek: '[Иртнӗ] dddd LT [сехетре]',
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(output) {
      var affix = /сехет$/i.exec(output) ? 'рен' : /ҫул$/i.exec(output) ? 'тан' : 'ран';
      return output + affix;
    },
    past: '%s каялла',
    s: 'пӗр-ик ҫеккунт',
    ss: '%d ҫеккунт',
    m: 'пӗр минут',
    mm: '%d минут',
    h: 'пӗр сехет',
    hh: '%d сехет',
    d: 'пӗр кун',
    dd: '%d кун',
    M: 'пӗр уйӑх',
    MM: '%d уйӑх',
    y: 'пӗр ҫул',
    yy: '%d ҫул'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-мӗш/,
  ordinal: '%d-мӗш',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/cy.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/cy.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('cy', {
  months: 'Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr'.split('_'),
  monthsShort: 'Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag'.split('_'),
  weekdays: 'Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn'.split('_'),
  weekdaysShort: 'Sul_Llun_Maw_Mer_Iau_Gwe_Sad'.split('_'),
  weekdaysMin: 'Su_Ll_Ma_Me_Ia_Gw_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Heddiw am] LT',
    nextDay: '[Yfory am] LT',
    nextWeek: 'dddd [am] LT',
    lastDay: '[Ddoe am] LT',
    lastWeek: 'dddd [diwethaf am] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'mewn %s',
    past: '%s yn ôl',
    s: 'ychydig eiliadau',
    ss: '%d eiliad',
    m: 'munud',
    mm: '%d munud',
    h: 'awr',
    hh: '%d awr',
    d: 'diwrnod',
    dd: '%d diwrnod',
    M: 'mis',
    MM: '%d mis',
    y: 'blwyddyn',
    yy: '%d flynedd'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,
  ordinal: function ordinal(number) {
    var b = number,
        output = '',
        lookup = ['', 'af', 'il', 'ydd', 'ydd', 'ed', 'ed', 'ed', 'fed', 'fed', 'fed', 'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'fed'];

    if (b > 20) {
      if (b === 40 || b === 50 || b === 60 || b === 80 || b === 100) {
        output = 'fed';
      } else {
        output = 'ain';
      }
    } else if (b > 0) {
      output = lookup[b];
    }

    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/da.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/da.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('da', {
  months: 'januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december'.split('_'),
  monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
  weekdays: 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
  weekdaysShort: 'søn_man_tir_ons_tor_fre_lør'.split('_'),
  weekdaysMin: 'sø_ma_ti_on_to_fr_lø'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd [d.] D. MMMM YYYY [kl.] HH:mm'
  },
  calendar: {
    sameDay: '[i dag kl.] LT',
    nextDay: '[i morgen kl.] LT',
    nextWeek: 'på dddd [kl.] LT',
    lastDay: '[i går kl.] LT',
    lastWeek: '[i] dddd[s kl.] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: '%s siden',
    s: 'få sekunder',
    ss: '%d sekunder',
    m: 'et minut',
    mm: '%d minutter',
    h: 'en time',
    hh: '%d timer',
    d: 'en dag',
    dd: '%d dage',
    M: 'en måned',
    MM: '%d måneder',
    y: 'et år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/de-at.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/de-at.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eine Minute', 'einer Minute'],
    h: ['eine Stunde', 'einer Stunde'],
    d: ['ein Tag', 'einem Tag'],
    dd: [number + ' Tage', number + ' Tagen'],
    w: ['eine Woche', 'einer Woche'],
    M: ['ein Monat', 'einem Monat'],
    MM: [number + ' Monate', number + ' Monaten'],
    y: ['ein Jahr', 'einem Jahr'],
    yy: [number + ' Jahre', number + ' Jahren']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('de-at', {
  months: 'Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
  weekdaysShort: 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
  weekdaysMin: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd, D. MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[heute um] LT [Uhr]',
    sameElse: 'L',
    nextDay: '[morgen um] LT [Uhr]',
    nextWeek: 'dddd [um] LT [Uhr]',
    lastDay: '[gestern um] LT [Uhr]',
    lastWeek: '[letzten] dddd [um] LT [Uhr]'
  },
  relativeTime: {
    future: 'in %s',
    past: 'vor %s',
    s: 'ein paar Sekunden',
    ss: '%d Sekunden',
    m: processRelativeTime,
    mm: '%d Minuten',
    h: processRelativeTime,
    hh: '%d Stunden',
    d: processRelativeTime,
    dd: processRelativeTime,
    w: processRelativeTime,
    ww: '%d Wochen',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/de-ch.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/de-ch.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eine Minute', 'einer Minute'],
    h: ['eine Stunde', 'einer Stunde'],
    d: ['ein Tag', 'einem Tag'],
    dd: [number + ' Tage', number + ' Tagen'],
    w: ['eine Woche', 'einer Woche'],
    M: ['ein Monat', 'einem Monat'],
    MM: [number + ' Monate', number + ' Monaten'],
    y: ['ein Jahr', 'einem Jahr'],
    yy: [number + ' Jahre', number + ' Jahren']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('de-ch', {
  months: 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
  weekdaysShort: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysMin: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd, D. MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[heute um] LT [Uhr]',
    sameElse: 'L',
    nextDay: '[morgen um] LT [Uhr]',
    nextWeek: 'dddd [um] LT [Uhr]',
    lastDay: '[gestern um] LT [Uhr]',
    lastWeek: '[letzten] dddd [um] LT [Uhr]'
  },
  relativeTime: {
    future: 'in %s',
    past: 'vor %s',
    s: 'ein paar Sekunden',
    ss: '%d Sekunden',
    m: processRelativeTime,
    mm: '%d Minuten',
    h: processRelativeTime,
    hh: '%d Stunden',
    d: processRelativeTime,
    dd: processRelativeTime,
    w: processRelativeTime,
    ww: '%d Wochen',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/de.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/de.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eine Minute', 'einer Minute'],
    h: ['eine Stunde', 'einer Stunde'],
    d: ['ein Tag', 'einem Tag'],
    dd: [number + ' Tage', number + ' Tagen'],
    w: ['eine Woche', 'einer Woche'],
    M: ['ein Monat', 'einem Monat'],
    MM: [number + ' Monate', number + ' Monaten'],
    y: ['ein Jahr', 'einem Jahr'],
    yy: [number + ' Jahre', number + ' Jahren']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('de', {
  months: 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
  weekdaysShort: 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
  weekdaysMin: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd, D. MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[heute um] LT [Uhr]',
    sameElse: 'L',
    nextDay: '[morgen um] LT [Uhr]',
    nextWeek: 'dddd [um] LT [Uhr]',
    lastDay: '[gestern um] LT [Uhr]',
    lastWeek: '[letzten] dddd [um] LT [Uhr]'
  },
  relativeTime: {
    future: 'in %s',
    past: 'vor %s',
    s: 'ein paar Sekunden',
    ss: '%d Sekunden',
    m: processRelativeTime,
    mm: '%d Minuten',
    h: processRelativeTime,
    hh: '%d Stunden',
    d: processRelativeTime,
    dd: processRelativeTime,
    w: processRelativeTime,
    ww: '%d Wochen',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/dv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/dv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['ޖެނުއަރީ', 'ފެބްރުއަރީ', 'މާރިޗު', 'އޭޕްރީލު', 'މޭ', 'ޖޫން', 'ޖުލައި', 'އޯގަސްޓު', 'ސެޕްޓެމްބަރު', 'އޮކްޓޯބަރު', 'ނޮވެމްބަރު', 'ޑިސެމްބަރު'],
    weekdays = ['އާދިއްތަ', 'ހޯމަ', 'އަންގާރަ', 'ބުދަ', 'ބުރާސްފަތި', 'ހުކުރު', 'ހޮނިހިރު'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('dv', {
  months: months,
  monthsShort: months,
  weekdays: weekdays,
  weekdaysShort: weekdays,
  weekdaysMin: 'އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'D/M/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /މކ|މފ/,
  isPM: function isPM(input) {
    return 'މފ' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'މކ';
    } else {
      return 'މފ';
    }
  },
  calendar: {
    sameDay: '[މިއަދު] LT',
    nextDay: '[މާދަމާ] LT',
    nextWeek: 'dddd LT',
    lastDay: '[އިއްޔެ] LT',
    lastWeek: '[ފާއިތުވި] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ތެރޭގައި %s',
    past: 'ކުރިން %s',
    s: 'ސިކުންތުކޮޅެއް',
    ss: 'd% ސިކުންތު',
    m: 'މިނިޓެއް',
    mm: 'މިނިޓު %d',
    h: 'ގަޑިއިރެއް',
    hh: 'ގަޑިއިރު %d',
    d: 'ދުވަހެއް',
    dd: 'ދުވަސް %d',
    M: 'މަހެއް',
    MM: 'މަސް %d',
    y: 'އަހަރެއް',
    yy: 'އަހަރު %d'
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 7,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/el.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/el.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function isFunction(input) {
  return typeof Function !== 'undefined' && input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('el', {
  monthsNominativeEl: 'Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος'.split('_'),
  monthsGenitiveEl: 'Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου'.split('_'),
  months: function months(momentToFormat, format) {
    if (!momentToFormat) {
      return this._monthsNominativeEl;
    } else if (typeof format === 'string' && /D/.test(format.substring(0, format.indexOf('MMMM')))) {
      return this._monthsGenitiveEl[momentToFormat.month()];
    } else {
      return this._monthsNominativeEl[momentToFormat.month()];
    }
  },
  monthsShort: 'Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ'.split('_'),
  weekdays: 'Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο'.split('_'),
  weekdaysShort: 'Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ'.split('_'),
  weekdaysMin: 'Κυ_Δε_Τρ_Τε_Πε_Πα_Σα'.split('_'),
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? 'μμ' : 'ΜΜ';
    } else {
      return isLower ? 'πμ' : 'ΠΜ';
    }
  },
  isPM: function isPM(input) {
    return (input + '').toLowerCase()[0] === 'μ';
  },
  meridiemParse: /[ΠΜ]\.?Μ?\.?/i,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendarEl: {
    sameDay: '[Σήμερα {}] LT',
    nextDay: '[Αύριο {}] LT',
    nextWeek: 'dddd [{}] LT',
    lastDay: '[Χθες {}] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 6:
          return '[το προηγούμενο] dddd [{}] LT';

        default:
          return '[την προηγούμενη] dddd [{}] LT';
      }
    },
    sameElse: 'L'
  },
  calendar: function calendar(key, mom) {
    var output = this._calendarEl[key],
        hours = mom && mom.hours();

    if (isFunction(output)) {
      output = output.apply(mom);
    }

    return output.replace('{}', hours % 12 === 1 ? 'στη' : 'στις');
  },
  relativeTime: {
    future: 'σε %s',
    past: '%s πριν',
    s: 'λίγα δευτερόλεπτα',
    ss: '%d δευτερόλεπτα',
    m: 'ένα λεπτό',
    mm: '%d λεπτά',
    h: 'μία ώρα',
    hh: '%d ώρες',
    d: 'μία μέρα',
    dd: '%d μέρες',
    M: 'ένας μήνας',
    MM: '%d μήνες',
    y: 'ένας χρόνος',
    yy: '%d χρόνια'
  },
  dayOfMonthOrdinalParse: /\d{1,2}η/,
  ordinal: '%dη',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-au.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-au.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-au', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 0,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-ca.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-ca.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-ca', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'YYYY-MM-DD',
    LL: 'MMMM D, YYYY',
    LLL: 'MMMM D, YYYY h:mm A',
    LLLL: 'dddd, MMMM D, YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-gb.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-gb.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-gb', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-ie.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-ie.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-ie', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-il.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-il.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-il', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-in.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-in.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-in', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-nz.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-nz.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-nz', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-sg.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-sg.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-sg', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/eo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/eo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('eo', {
  months: 'januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro'.split('_'),
  monthsShort: 'jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec'.split('_'),
  weekdays: 'dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato'.split('_'),
  weekdaysShort: 'dim_lun_mard_merk_ĵaŭ_ven_sab'.split('_'),
  weekdaysMin: 'di_lu_ma_me_ĵa_ve_sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: '[la] D[-an de] MMMM, YYYY',
    LLL: '[la] D[-an de] MMMM, YYYY HH:mm',
    LLLL: 'dddd[n], [la] D[-an de] MMMM, YYYY HH:mm',
    llll: 'ddd, [la] D[-an de] MMM, YYYY HH:mm'
  },
  meridiemParse: /[ap]\.t\.m/i,
  isPM: function isPM(input) {
    return input.charAt(0).toLowerCase() === 'p';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? 'p.t.m.' : 'P.T.M.';
    } else {
      return isLower ? 'a.t.m.' : 'A.T.M.';
    }
  },
  calendar: {
    sameDay: '[Hodiaŭ je] LT',
    nextDay: '[Morgaŭ je] LT',
    nextWeek: 'dddd[n je] LT',
    lastDay: '[Hieraŭ je] LT',
    lastWeek: '[pasintan] dddd[n je] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'post %s',
    past: 'antaŭ %s',
    s: 'kelkaj sekundoj',
    ss: '%d sekundoj',
    m: 'unu minuto',
    mm: '%d minutoj',
    h: 'unu horo',
    hh: '%d horoj',
    d: 'unu tago',
    dd: '%d tagoj',
    M: 'unu monato',
    MM: '%d monatoj',
    y: 'unu jaro',
    yy: '%d jaroj'
  },
  dayOfMonthOrdinalParse: /\d{1,2}a/,
  ordinal: '%da',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es-do.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/es-do.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es-do', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY h:mm A',
    LLLL: 'dddd, D [de] MMMM [de] YYYY h:mm A'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es-mx.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/es-mx.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es-mx', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY H:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 0,
    doy: 4
  },
  invalidDate: 'Fecha inválida'
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es-us.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/es-us.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es-us', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'MM/DD/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY h:mm A',
    LLLL: 'dddd, D [de] MMMM [de] YYYY h:mm A'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/es.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY H:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  },
  invalidDate: 'Fecha inválida'
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/et.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/et.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['mõne sekundi', 'mõni sekund', 'paar sekundit'],
    ss: [number + 'sekundi', number + 'sekundit'],
    m: ['ühe minuti', 'üks minut'],
    mm: [number + ' minuti', number + ' minutit'],
    h: ['ühe tunni', 'tund aega', 'üks tund'],
    hh: [number + ' tunni', number + ' tundi'],
    d: ['ühe päeva', 'üks päev'],
    M: ['kuu aja', 'kuu aega', 'üks kuu'],
    MM: [number + ' kuu', number + ' kuud'],
    y: ['ühe aasta', 'aasta', 'üks aasta'],
    yy: [number + ' aasta', number + ' aastat']
  };

  if (withoutSuffix) {
    return format[key][2] ? format[key][2] : format[key][1];
  }

  return isFuture ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('et', {
  months: 'jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember'.split('_'),
  monthsShort: 'jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets'.split('_'),
  weekdays: 'pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev'.split('_'),
  weekdaysShort: 'P_E_T_K_N_R_L'.split('_'),
  weekdaysMin: 'P_E_T_K_N_R_L'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[Täna,] LT',
    nextDay: '[Homme,] LT',
    nextWeek: '[Järgmine] dddd LT',
    lastDay: '[Eile,] LT',
    lastWeek: '[Eelmine] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s pärast',
    past: '%s tagasi',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: '%d päeva',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/eu.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/eu.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('eu', {
  months: 'urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua'.split('_'),
  monthsShort: 'urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.'.split('_'),
  monthsParseExact: true,
  weekdays: 'igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata'.split('_'),
  weekdaysShort: 'ig._al._ar._az._og._ol._lr.'.split('_'),
  weekdaysMin: 'ig_al_ar_az_og_ol_lr'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY[ko] MMMM[ren] D[a]',
    LLL: 'YYYY[ko] MMMM[ren] D[a] HH:mm',
    LLLL: 'dddd, YYYY[ko] MMMM[ren] D[a] HH:mm',
    l: 'YYYY-M-D',
    ll: 'YYYY[ko] MMM D[a]',
    lll: 'YYYY[ko] MMM D[a] HH:mm',
    llll: 'ddd, YYYY[ko] MMM D[a] HH:mm'
  },
  calendar: {
    sameDay: '[gaur] LT[etan]',
    nextDay: '[bihar] LT[etan]',
    nextWeek: 'dddd LT[etan]',
    lastDay: '[atzo] LT[etan]',
    lastWeek: '[aurreko] dddd LT[etan]',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s barru',
    past: 'duela %s',
    s: 'segundo batzuk',
    ss: '%d segundo',
    m: 'minutu bat',
    mm: '%d minutu',
    h: 'ordu bat',
    hh: '%d ordu',
    d: 'egun bat',
    dd: '%d egun',
    M: 'hilabete bat',
    MM: '%d hilabete',
    y: 'urte bat',
    yy: '%d urte'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fa.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fa.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '۱',
  2: '۲',
  3: '۳',
  4: '۴',
  5: '۵',
  6: '۶',
  7: '۷',
  8: '۸',
  9: '۹',
  0: '۰'
},
    numberMap = {
  '۱': '1',
  '۲': '2',
  '۳': '3',
  '۴': '4',
  '۵': '5',
  '۶': '6',
  '۷': '7',
  '۸': '8',
  '۹': '9',
  '۰': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fa', {
  months: 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
  monthsShort: 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
  weekdays: "\u06CC\u06A9\u200C\u0634\u0646\u0628\u0647_\u062F\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200C\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067E\u0646\u062C\u200C\u0634\u0646\u0628\u0647_\u062C\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split('_'),
  weekdaysShort: "\u06CC\u06A9\u200C\u0634\u0646\u0628\u0647_\u062F\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200C\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067E\u0646\u062C\u200C\u0634\u0646\u0628\u0647_\u062C\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split('_'),
  weekdaysMin: 'ی_د_س_چ_پ_ج_ش'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  meridiemParse: /قبل از ظهر|بعد از ظهر/,
  isPM: function isPM(input) {
    return /بعد از ظهر/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'قبل از ظهر';
    } else {
      return 'بعد از ظهر';
    }
  },
  calendar: {
    sameDay: '[امروز ساعت] LT',
    nextDay: '[فردا ساعت] LT',
    nextWeek: 'dddd [ساعت] LT',
    lastDay: '[دیروز ساعت] LT',
    lastWeek: 'dddd [پیش] [ساعت] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'در %s',
    past: '%s پیش',
    s: 'چند ثانیه',
    ss: '%d ثانیه',
    m: 'یک دقیقه',
    mm: '%d دقیقه',
    h: 'یک ساعت',
    hh: '%d ساعت',
    d: 'یک روز',
    dd: '%d روز',
    M: 'یک ماه',
    MM: '%d ماه',
    y: 'یک سال',
    yy: '%d سال'
  },
  preparse: function preparse(string) {
    return string.replace(/[۰-۹]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  dayOfMonthOrdinalParse: /\d{1,2}م/,
  ordinal: '%dم',
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var numbersPast = 'nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän'.split(' '),
    numbersFuture = ['nolla', 'yhden', 'kahden', 'kolmen', 'neljän', 'viiden', 'kuuden', numbersPast[7], numbersPast[8], numbersPast[9]];

function translate(number, withoutSuffix, key, isFuture) {
  var result = '';

  switch (key) {
    case 's':
      return isFuture ? 'muutaman sekunnin' : 'muutama sekunti';

    case 'ss':
      result = isFuture ? 'sekunnin' : 'sekuntia';
      break;

    case 'm':
      return isFuture ? 'minuutin' : 'minuutti';

    case 'mm':
      result = isFuture ? 'minuutin' : 'minuuttia';
      break;

    case 'h':
      return isFuture ? 'tunnin' : 'tunti';

    case 'hh':
      result = isFuture ? 'tunnin' : 'tuntia';
      break;

    case 'd':
      return isFuture ? 'päivän' : 'päivä';

    case 'dd':
      result = isFuture ? 'päivän' : 'päivää';
      break;

    case 'M':
      return isFuture ? 'kuukauden' : 'kuukausi';

    case 'MM':
      result = isFuture ? 'kuukauden' : 'kuukautta';
      break;

    case 'y':
      return isFuture ? 'vuoden' : 'vuosi';

    case 'yy':
      result = isFuture ? 'vuoden' : 'vuotta';
      break;
  }

  result = verbalNumber(number, isFuture) + ' ' + result;
  return result;
}

function verbalNumber(number, isFuture) {
  return number < 10 ? isFuture ? numbersFuture[number] : numbersPast[number] : number;
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fi', {
  months: 'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),
  monthsShort: 'tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu'.split('_'),
  weekdays: 'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),
  weekdaysShort: 'su_ma_ti_ke_to_pe_la'.split('_'),
  weekdaysMin: 'su_ma_ti_ke_to_pe_la'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD.MM.YYYY',
    LL: 'Do MMMM[ta] YYYY',
    LLL: 'Do MMMM[ta] YYYY, [klo] HH.mm',
    LLLL: 'dddd, Do MMMM[ta] YYYY, [klo] HH.mm',
    l: 'D.M.YYYY',
    ll: 'Do MMM YYYY',
    lll: 'Do MMM YYYY, [klo] HH.mm',
    llll: 'ddd, Do MMM YYYY, [klo] HH.mm'
  },
  calendar: {
    sameDay: '[tänään] [klo] LT',
    nextDay: '[huomenna] [klo] LT',
    nextWeek: 'dddd [klo] LT',
    lastDay: '[eilen] [klo] LT',
    lastWeek: '[viime] dddd[na] [klo] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s päästä',
    past: '%s sitten',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fil.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/fil.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fil', {
  months: 'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),
  monthsShort: 'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),
  weekdays: 'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),
  weekdaysShort: 'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),
  weekdaysMin: 'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'MM/D/YYYY',
    LL: 'MMMM D, YYYY',
    LLL: 'MMMM D, YYYY HH:mm',
    LLLL: 'dddd, MMMM DD, YYYY HH:mm'
  },
  calendar: {
    sameDay: 'LT [ngayong araw]',
    nextDay: '[Bukas ng] LT',
    nextWeek: 'LT [sa susunod na] dddd',
    lastDay: 'LT [kahapon]',
    lastWeek: 'LT [noong nakaraang] dddd',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'sa loob ng %s',
    past: '%s ang nakalipas',
    s: 'ilang segundo',
    ss: '%d segundo',
    m: 'isang minuto',
    mm: '%d minuto',
    h: 'isang oras',
    hh: '%d oras',
    d: 'isang araw',
    dd: '%d araw',
    M: 'isang buwan',
    MM: '%d buwan',
    y: 'isang taon',
    yy: '%d taon'
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: function ordinal(number) {
    return number;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fo', {
  months: 'januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
  monthsShort: 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
  weekdays: 'sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur'.split('_'),
  weekdaysShort: 'sun_mán_týs_mik_hós_frí_ley'.split('_'),
  weekdaysMin: 'su_má_tý_mi_hó_fr_le'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D. MMMM, YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Í dag kl.] LT',
    nextDay: '[Í morgin kl.] LT',
    nextWeek: 'dddd [kl.] LT',
    lastDay: '[Í gjár kl.] LT',
    lastWeek: '[síðstu] dddd [kl] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'um %s',
    past: '%s síðani',
    s: 'fá sekund',
    ss: '%d sekundir',
    m: 'ein minuttur',
    mm: '%d minuttir',
    h: 'ein tími',
    hh: '%d tímar',
    d: 'ein dagur',
    dd: '%d dagar',
    M: 'ein mánaður',
    MM: '%d mánaðir',
    y: 'eitt ár',
    yy: '%d ár'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fr-ca.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/fr-ca.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fr-ca', {
  months: 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
  monthsShort: 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
  monthsParseExact: true,
  weekdays: 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
  weekdaysShort: 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
  weekdaysMin: 'di_lu_ma_me_je_ve_sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Aujourd’hui à] LT',
    nextDay: '[Demain à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[Hier à] LT',
    lastWeek: 'dddd [dernier à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dans %s',
    past: 'il y a %s',
    s: 'quelques secondes',
    ss: '%d secondes',
    m: 'une minute',
    mm: '%d minutes',
    h: 'une heure',
    hh: '%d heures',
    d: 'un jour',
    dd: '%d jours',
    M: 'un mois',
    MM: '%d mois',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      default:
      case 'M':
      case 'Q':
      case 'D':
      case 'DDD':
      case 'd':
        return number + (number === 1 ? 'er' : 'e');

      case 'w':
      case 'W':
        return number + (number === 1 ? 're' : 'e');
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fr-ch.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/fr-ch.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fr-ch', {
  months: 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
  monthsShort: 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
  monthsParseExact: true,
  weekdays: 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
  weekdaysShort: 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
  weekdaysMin: 'di_lu_ma_me_je_ve_sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Aujourd’hui à] LT',
    nextDay: '[Demain à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[Hier à] LT',
    lastWeek: 'dddd [dernier à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dans %s',
    past: 'il y a %s',
    s: 'quelques secondes',
    ss: '%d secondes',
    m: 'une minute',
    mm: '%d minutes',
    h: 'une heure',
    hh: '%d heures',
    d: 'un jour',
    dd: '%d jours',
    M: 'un mois',
    MM: '%d mois',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      default:
      case 'M':
      case 'Q':
      case 'D':
      case 'DDD':
      case 'd':
        return number + (number === 1 ? 'er' : 'e');

      case 'w':
      case 'W':
        return number + (number === 1 ? 're' : 'e');
    }
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsStrictRegex = /^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,
    monthsShortStrictRegex = /(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,
    monthsRegex = /(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,
    monthsParse = [/^janv/i, /^févr/i, /^mars/i, /^avr/i, /^mai/i, /^juin/i, /^juil/i, /^août/i, /^sept/i, /^oct/i, /^nov/i, /^déc/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fr', {
  months: 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
  monthsShort: 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: monthsStrictRegex,
  monthsShortStrictRegex: monthsShortStrictRegex,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
  weekdaysShort: 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
  weekdaysMin: 'di_lu_ma_me_je_ve_sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Aujourd’hui à] LT',
    nextDay: '[Demain à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[Hier à] LT',
    lastWeek: 'dddd [dernier à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dans %s',
    past: 'il y a %s',
    s: 'quelques secondes',
    ss: '%d secondes',
    m: 'une minute',
    mm: '%d minutes',
    h: 'une heure',
    hh: '%d heures',
    d: 'un jour',
    dd: '%d jours',
    w: 'une semaine',
    ww: '%d semaines',
    M: 'un mois',
    MM: '%d mois',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er|)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'D':
        return number + (number === 1 ? 'er' : '');

      default:
      case 'M':
      case 'Q':
      case 'DDD':
      case 'd':
        return number + (number === 1 ? 'er' : 'e');

      case 'w':
      case 'W':
        return number + (number === 1 ? 're' : 'e');
    }
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fy.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fy.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsShortWithDots = 'jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.'.split('_'),
    monthsShortWithoutDots = 'jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_');
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fy', {
  months: 'jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortWithDots;
    } else if (/-MMM-/.test(format)) {
      return monthsShortWithoutDots[m.month()];
    } else {
      return monthsShortWithDots[m.month()];
    }
  },
  monthsParseExact: true,
  weekdays: 'snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon'.split('_'),
  weekdaysShort: 'si._mo._ti._wo._to._fr._so.'.split('_'),
  weekdaysMin: 'Si_Mo_Ti_Wo_To_Fr_So'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[hjoed om] LT',
    nextDay: '[moarn om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[juster om] LT',
    lastWeek: '[ôfrûne] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'oer %s',
    past: '%s lyn',
    s: 'in pear sekonden',
    ss: '%d sekonden',
    m: 'ien minút',
    mm: '%d minuten',
    h: 'ien oere',
    hh: '%d oeren',
    d: 'ien dei',
    dd: '%d dagen',
    M: 'ien moanne',
    MM: '%d moannen',
    y: 'ien jier',
    yy: '%d jierren'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ga.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ga.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['Eanáir', 'Feabhra', 'Márta', 'Aibreán', 'Bealtaine', 'Meitheamh', 'Iúil', 'Lúnasa', 'Meán Fómhair', 'Deireadh Fómhair', 'Samhain', 'Nollaig'],
    monthsShort = ['Ean', 'Feabh', 'Márt', 'Aib', 'Beal', 'Meith', 'Iúil', 'Lún', 'M.F.', 'D.F.', 'Samh', 'Noll'],
    weekdays = ['Dé Domhnaigh', 'Dé Luain', 'Dé Máirt', 'Dé Céadaoin', 'Déardaoin', 'Dé hAoine', 'Dé Sathairn'],
    weekdaysShort = ['Domh', 'Luan', 'Máirt', 'Céad', 'Déar', 'Aoine', 'Sath'],
    weekdaysMin = ['Do', 'Lu', 'Má', 'Cé', 'Dé', 'A', 'Sa'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ga', {
  months: months,
  monthsShort: monthsShort,
  monthsParseExact: true,
  weekdays: weekdays,
  weekdaysShort: weekdaysShort,
  weekdaysMin: weekdaysMin,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Inniu ag] LT',
    nextDay: '[Amárach ag] LT',
    nextWeek: 'dddd [ag] LT',
    lastDay: '[Inné ag] LT',
    lastWeek: 'dddd [seo caite] [ag] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'i %s',
    past: '%s ó shin',
    s: 'cúpla soicind',
    ss: '%d soicind',
    m: 'nóiméad',
    mm: '%d nóiméad',
    h: 'uair an chloig',
    hh: '%d uair an chloig',
    d: 'lá',
    dd: '%d lá',
    M: 'mí',
    MM: '%d míonna',
    y: 'bliain',
    yy: '%d bliain'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(d|na|mh)/,
  ordinal: function ordinal(number) {
    var output = number === 1 ? 'd' : number % 10 === 2 ? 'na' : 'mh';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gd.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/gd.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['Am Faoilleach', 'An Gearran', 'Am Màrt', 'An Giblean', 'An Cèitean', 'An t-Ògmhios', 'An t-Iuchar', 'An Lùnastal', 'An t-Sultain', 'An Dàmhair', 'An t-Samhain', 'An Dùbhlachd'],
    monthsShort = ['Faoi', 'Gear', 'Màrt', 'Gibl', 'Cèit', 'Ògmh', 'Iuch', 'Lùn', 'Sult', 'Dàmh', 'Samh', 'Dùbh'],
    weekdays = ['Didòmhnaich', 'Diluain', 'Dimàirt', 'Diciadain', 'Diardaoin', 'Dihaoine', 'Disathairne'],
    weekdaysShort = ['Did', 'Dil', 'Dim', 'Dic', 'Dia', 'Dih', 'Dis'],
    weekdaysMin = ['Dò', 'Lu', 'Mà', 'Ci', 'Ar', 'Ha', 'Sa'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gd', {
  months: months,
  monthsShort: monthsShort,
  monthsParseExact: true,
  weekdays: weekdays,
  weekdaysShort: weekdaysShort,
  weekdaysMin: weekdaysMin,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[An-diugh aig] LT',
    nextDay: '[A-màireach aig] LT',
    nextWeek: 'dddd [aig] LT',
    lastDay: '[An-dè aig] LT',
    lastWeek: 'dddd [seo chaidh] [aig] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ann an %s',
    past: 'bho chionn %s',
    s: 'beagan diogan',
    ss: '%d diogan',
    m: 'mionaid',
    mm: '%d mionaidean',
    h: 'uair',
    hh: '%d uairean',
    d: 'latha',
    dd: '%d latha',
    M: 'mìos',
    MM: '%d mìosan',
    y: 'bliadhna',
    yy: '%d bliadhna'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(d|na|mh)/,
  ordinal: function ordinal(number) {
    var output = number === 1 ? 'd' : number % 10 === 2 ? 'na' : 'mh';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/gl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gl', {
  months: 'xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro'.split('_'),
  monthsShort: 'xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'domingo_luns_martes_mércores_xoves_venres_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mér._xov._ven._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mé_xo_ve_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY H:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoxe ' + (this.hours() !== 1 ? 'ás' : 'á') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañá ' + (this.hours() !== 1 ? 'ás' : 'á') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [' + (this.hours() !== 1 ? 'ás' : 'a') + '] LT';
    },
    lastDay: function lastDay() {
      return '[onte ' + (this.hours() !== 1 ? 'á' : 'a') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[o] dddd [pasado ' + (this.hours() !== 1 ? 'ás' : 'a') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(str) {
      if (str.indexOf('un') === 0) {
        return 'n' + str;
      }

      return 'en ' + str;
    },
    past: 'hai %s',
    s: 'uns segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'unha hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    M: 'un mes',
    MM: '%d meses',
    y: 'un ano',
    yy: '%d anos'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gom-deva.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/gom-deva.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['थोडया सॅकंडांनी', 'थोडे सॅकंड'],
    ss: [number + ' सॅकंडांनी', number + ' सॅकंड'],
    m: ['एका मिणटान', 'एक मिनूट'],
    mm: [number + ' मिणटांनी', number + ' मिणटां'],
    h: ['एका वरान', 'एक वर'],
    hh: [number + ' वरांनी', number + ' वरां'],
    d: ['एका दिसान', 'एक दीस'],
    dd: [number + ' दिसांनी', number + ' दीस'],
    M: ['एका म्हयन्यान', 'एक म्हयनो'],
    MM: [number + ' म्हयन्यानी', number + ' म्हयने'],
    y: ['एका वर्सान', 'एक वर्स'],
    yy: [number + ' वर्सांनी', number + ' वर्सां']
  };
  return isFuture ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gom-deva', {
  months: {
    standalone: 'जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर'.split('_'),
    format: 'जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या'.split('_'),
    isFormat: /MMMM(\s)+D[oD]?/
  },
  monthsShort: 'जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.'.split('_'),
  monthsParseExact: true,
  weekdays: 'आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार'.split('_'),
  weekdaysShort: 'आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.'.split('_'),
  weekdaysMin: 'आ_सो_मं_बु_ब्रे_सु_शे'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'A h:mm [वाजतां]',
    LTS: 'A h:mm:ss [वाजतां]',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY A h:mm [वाजतां]',
    LLLL: 'dddd, MMMM Do, YYYY, A h:mm [वाजतां]',
    llll: 'ddd, D MMM YYYY, A h:mm [वाजतां]'
  },
  calendar: {
    sameDay: '[आयज] LT',
    nextDay: '[फाल्यां] LT',
    nextWeek: '[फुडलो] dddd[,] LT',
    lastDay: '[काल] LT',
    lastWeek: '[फाटलो] dddd[,] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s',
    past: '%s आदीं',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}(वेर)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'D':
        return number + 'वेर';

      default:
      case 'M':
      case 'Q':
      case 'DDD':
      case 'd':
      case 'w':
      case 'W':
        return number;
    }
  },
  week: {
    dow: 0,
    doy: 3
  },
  meridiemParse: /राती|सकाळीं|दनपारां|सांजे/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'राती') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'सकाळीं') {
      return hour;
    } else if (meridiem === 'दनपारां') {
      return hour > 12 ? hour : hour + 12;
    } else if (meridiem === 'सांजे') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'राती';
    } else if (hour < 12) {
      return 'सकाळीं';
    } else if (hour < 16) {
      return 'दनपारां';
    } else if (hour < 20) {
      return 'सांजे';
    } else {
      return 'राती';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gom-latn.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/gom-latn.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['thoddea sekondamni', 'thodde sekond'],
    ss: [number + ' sekondamni', number + ' sekond'],
    m: ['eka mintan', 'ek minut'],
    mm: [number + ' mintamni', number + ' mintam'],
    h: ['eka voran', 'ek vor'],
    hh: [number + ' voramni', number + ' voram'],
    d: ['eka disan', 'ek dis'],
    dd: [number + ' disamni', number + ' dis'],
    M: ['eka mhoinean', 'ek mhoino'],
    MM: [number + ' mhoineamni', number + ' mhoine'],
    y: ['eka vorsan', 'ek voros'],
    yy: [number + ' vorsamni', number + ' vorsam']
  };
  return isFuture ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gom-latn', {
  months: {
    standalone: 'Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr'.split('_'),
    format: 'Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea'.split('_'),
    isFormat: /MMMM(\s)+D[oD]?/
  },
  monthsShort: 'Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: "Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split('_'),
  weekdaysShort: 'Ait._Som._Mon._Bud._Bre._Suk._Son.'.split('_'),
  weekdaysMin: 'Ai_Sm_Mo_Bu_Br_Su_Sn'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'A h:mm [vazta]',
    LTS: 'A h:mm:ss [vazta]',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY A h:mm [vazta]',
    LLLL: 'dddd, MMMM Do, YYYY, A h:mm [vazta]',
    llll: 'ddd, D MMM YYYY, A h:mm [vazta]'
  },
  calendar: {
    sameDay: '[Aiz] LT',
    nextDay: '[Faleam] LT',
    nextWeek: '[Fuddlo] dddd[,] LT',
    lastDay: '[Kal] LT',
    lastWeek: '[Fattlo] dddd[,] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s',
    past: '%s adim',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'D':
        return number + 'er';

      default:
      case 'M':
      case 'Q':
      case 'DDD':
      case 'd':
      case 'w':
      case 'W':
        return number;
    }
  },
  week: {
    dow: 0,
    doy: 3
  },
  meridiemParse: /rati|sokallim|donparam|sanje/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'rati') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'sokallim') {
      return hour;
    } else if (meridiem === 'donparam') {
      return hour > 12 ? hour : hour + 12;
    } else if (meridiem === 'sanje') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'rati';
    } else if (hour < 12) {
      return 'sokallim';
    } else if (hour < 16) {
      return 'donparam';
    } else if (hour < 20) {
      return 'sanje';
    } else {
      return 'rati';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gu.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/gu.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '૧',
  2: '૨',
  3: '૩',
  4: '૪',
  5: '૫',
  6: '૬',
  7: '૭',
  8: '૮',
  9: '૯',
  0: '૦'
},
    numberMap = {
  '૧': '1',
  '૨': '2',
  '૩': '3',
  '૪': '4',
  '૫': '5',
  '૬': '6',
  '૭': '7',
  '૮': '8',
  '૯': '9',
  '૦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gu', {
  months: 'જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર'.split('_'),
  monthsShort: 'જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.'.split('_'),
  monthsParseExact: true,
  weekdays: 'રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર'.split('_'),
  weekdaysShort: 'રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ'.split('_'),
  weekdaysMin: 'ર_સો_મં_બુ_ગુ_શુ_શ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm વાગ્યે',
    LTS: 'A h:mm:ss વાગ્યે',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm વાગ્યે',
    LLLL: 'dddd, D MMMM YYYY, A h:mm વાગ્યે'
  },
  calendar: {
    sameDay: '[આજ] LT',
    nextDay: '[કાલે] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[ગઇકાલે] LT',
    lastWeek: '[પાછલા] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s મા',
    past: '%s પહેલા',
    s: 'અમુક પળો',
    ss: '%d સેકંડ',
    m: 'એક મિનિટ',
    mm: '%d મિનિટ',
    h: 'એક કલાક',
    hh: '%d કલાક',
    d: 'એક દિવસ',
    dd: '%d દિવસ',
    M: 'એક મહિનો',
    MM: '%d મહિનો',
    y: 'એક વર્ષ',
    yy: '%d વર્ષ'
  },
  preparse: function preparse(string) {
    return string.replace(/[૧૨૩૪૫૬૭૮૯૦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /રાત|બપોર|સવાર|સાંજ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'રાત') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'સવાર') {
      return hour;
    } else if (meridiem === 'બપોર') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'સાંજ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'રાત';
    } else if (hour < 10) {
      return 'સવાર';
    } else if (hour < 17) {
      return 'બપોર';
    } else if (hour < 20) {
      return 'સાંજ';
    } else {
      return 'રાત';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/he.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/he.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('he', {
  months: 'ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר'.split('_'),
  monthsShort: 'ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳'.split('_'),
  weekdays: 'ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת'.split('_'),
  weekdaysShort: 'א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳'.split('_'),
  weekdaysMin: 'א_ב_ג_ד_ה_ו_ש'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [ב]MMMM YYYY',
    LLL: 'D [ב]MMMM YYYY HH:mm',
    LLLL: 'dddd, D [ב]MMMM YYYY HH:mm',
    l: 'D/M/YYYY',
    ll: 'D MMM YYYY',
    lll: 'D MMM YYYY HH:mm',
    llll: 'ddd, D MMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[היום ב־]LT',
    nextDay: '[מחר ב־]LT',
    nextWeek: 'dddd [בשעה] LT',
    lastDay: '[אתמול ב־]LT',
    lastWeek: '[ביום] dddd [האחרון בשעה] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'בעוד %s',
    past: 'לפני %s',
    s: 'מספר שניות',
    ss: '%d שניות',
    m: 'דקה',
    mm: '%d דקות',
    h: 'שעה',
    hh: function hh(number) {
      if (number === 2) {
        return 'שעתיים';
      }

      return number + ' שעות';
    },
    d: 'יום',
    dd: function dd(number) {
      if (number === 2) {
        return 'יומיים';
      }

      return number + ' ימים';
    },
    M: 'חודש',
    MM: function MM(number) {
      if (number === 2) {
        return 'חודשיים';
      }

      return number + ' חודשים';
    },
    y: 'שנה',
    yy: function yy(number) {
      if (number === 2) {
        return 'שנתיים';
      } else if (number % 10 === 0 && number !== 10) {
        return number + ' שנה';
      }

      return number + ' שנים';
    }
  },
  meridiemParse: /אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,
  isPM: function isPM(input) {
    return /^(אחה"צ|אחרי הצהריים|בערב)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 5) {
      return 'לפנות בוקר';
    } else if (hour < 10) {
      return 'בבוקר';
    } else if (hour < 12) {
      return isLower ? 'לפנה"צ' : 'לפני הצהריים';
    } else if (hour < 18) {
      return isLower ? 'אחה"צ' : 'אחרי הצהריים';
    } else {
      return 'בערב';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/hi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '१',
  2: '२',
  3: '३',
  4: '४',
  5: '५',
  6: '६',
  7: '७',
  8: '८',
  9: '९',
  0: '०'
},
    numberMap = {
  '१': '1',
  '२': '2',
  '३': '3',
  '४': '4',
  '५': '5',
  '६': '6',
  '७': '7',
  '८': '8',
  '९': '9',
  '०': '0'
},
    monthsParse = [/^जन/i, /^फ़र|फर/i, /^मार्च/i, /^अप्रै/i, /^मई/i, /^जून/i, /^जुल/i, /^अग/i, /^सितं|सित/i, /^अक्टू/i, /^नव|नवं/i, /^दिसं|दिस/i],
    shortMonthsParse = [/^जन/i, /^फ़र/i, /^मार्च/i, /^अप्रै/i, /^मई/i, /^जून/i, /^जुल/i, /^अग/i, /^सित/i, /^अक्टू/i, /^नव/i, /^दिस/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hi', {
  months: {
    format: 'जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर'.split('_'),
    standalone: 'जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर'.split('_')
  },
  monthsShort: 'जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.'.split('_'),
  weekdays: 'रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
  weekdaysShort: 'रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि'.split('_'),
  weekdaysMin: 'र_सो_मं_बु_गु_शु_श'.split('_'),
  longDateFormat: {
    LT: 'A h:mm बजे',
    LTS: 'A h:mm:ss बजे',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm बजे',
    LLLL: 'dddd, D MMMM YYYY, A h:mm बजे'
  },
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: shortMonthsParse,
  monthsRegex: /^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,
  monthsShortRegex: /^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,
  monthsStrictRegex: /^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,
  monthsShortStrictRegex: /^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,
  calendar: {
    sameDay: '[आज] LT',
    nextDay: '[कल] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[कल] LT',
    lastWeek: '[पिछले] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s में',
    past: '%s पहले',
    s: 'कुछ ही क्षण',
    ss: '%d सेकंड',
    m: 'एक मिनट',
    mm: '%d मिनट',
    h: 'एक घंटा',
    hh: '%d घंटे',
    d: 'एक दिन',
    dd: '%d दिन',
    M: 'एक महीने',
    MM: '%d महीने',
    y: 'एक वर्ष',
    yy: '%d वर्ष'
  },
  preparse: function preparse(string) {
    return string.replace(/[१२३४५६७८९०]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /रात|सुबह|दोपहर|शाम/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'रात') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'सुबह') {
      return hour;
    } else if (meridiem === 'दोपहर') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'शाम') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'रात';
    } else if (hour < 10) {
      return 'सुबह';
    } else if (hour < 17) {
      return 'दोपहर';
    } else if (hour < 20) {
      return 'शाम';
    } else {
      return 'रात';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/hr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function translate(number, withoutSuffix, key) {
  var result = number + ' ';

  switch (key) {
    case 'ss':
      if (number === 1) {
        result += 'sekunda';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sekunde';
      } else {
        result += 'sekundi';
      }

      return result;

    case 'm':
      return withoutSuffix ? 'jedna minuta' : 'jedne minute';

    case 'mm':
      if (number === 1) {
        result += 'minuta';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'minute';
      } else {
        result += 'minuta';
      }

      return result;

    case 'h':
      return withoutSuffix ? 'jedan sat' : 'jednog sata';

    case 'hh':
      if (number === 1) {
        result += 'sat';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sata';
      } else {
        result += 'sati';
      }

      return result;

    case 'dd':
      if (number === 1) {
        result += 'dan';
      } else {
        result += 'dana';
      }

      return result;

    case 'MM':
      if (number === 1) {
        result += 'mjesec';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'mjeseca';
      } else {
        result += 'mjeseci';
      }

      return result;

    case 'yy':
      if (number === 1) {
        result += 'godina';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'godine';
      } else {
        result += 'godina';
      }

      return result;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hr', {
  months: {
    format: 'siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca'.split('_'),
    standalone: 'siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac'.split('_')
  },
  monthsShort: 'sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'Do MMMM YYYY',
    LLL: 'Do MMMM YYYY H:mm',
    LLLL: 'dddd, Do MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedjelju] [u] LT';

        case 3:
          return '[u] [srijedu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[jučer u] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[prošlu] [nedjelju] [u] LT';

        case 3:
          return '[prošlu] [srijedu] [u] LT';

        case 6:
          return '[prošle] [subote] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[prošli] dddd [u] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'prije %s',
    s: 'par sekundi',
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: 'dan',
    dd: translate,
    M: 'mjesec',
    MM: translate,
    y: 'godinu',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hu.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/hu.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var weekEndings = 'vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton'.split(' ');

function translate(number, withoutSuffix, key, isFuture) {
  var num = number;

  switch (key) {
    case 's':
      return isFuture || withoutSuffix ? 'néhány másodperc' : 'néhány másodperce';

    case 'ss':
      return num + (isFuture || withoutSuffix) ? ' másodperc' : ' másodperce';

    case 'm':
      return 'egy' + (isFuture || withoutSuffix ? ' perc' : ' perce');

    case 'mm':
      return num + (isFuture || withoutSuffix ? ' perc' : ' perce');

    case 'h':
      return 'egy' + (isFuture || withoutSuffix ? ' óra' : ' órája');

    case 'hh':
      return num + (isFuture || withoutSuffix ? ' óra' : ' órája');

    case 'd':
      return 'egy' + (isFuture || withoutSuffix ? ' nap' : ' napja');

    case 'dd':
      return num + (isFuture || withoutSuffix ? ' nap' : ' napja');

    case 'M':
      return 'egy' + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');

    case 'MM':
      return num + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');

    case 'y':
      return 'egy' + (isFuture || withoutSuffix ? ' év' : ' éve');

    case 'yy':
      return num + (isFuture || withoutSuffix ? ' év' : ' éve');
  }

  return '';
}

function week(isFuture) {
  return (isFuture ? '' : '[múlt] ') + '[' + weekEndings[this.day()] + '] LT[-kor]';
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hu', {
  months: 'január_február_március_április_május_június_július_augusztus_szeptember_október_november_december'.split('_'),
  monthsShort: 'jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat'.split('_'),
  weekdaysShort: 'vas_hét_kedd_sze_csüt_pén_szo'.split('_'),
  weekdaysMin: 'v_h_k_sze_cs_p_szo'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'YYYY.MM.DD.',
    LL: 'YYYY. MMMM D.',
    LLL: 'YYYY. MMMM D. H:mm',
    LLLL: 'YYYY. MMMM D., dddd H:mm'
  },
  meridiemParse: /de|du/i,
  isPM: function isPM(input) {
    return input.charAt(1).toLowerCase() === 'u';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower === true ? 'de' : 'DE';
    } else {
      return isLower === true ? 'du' : 'DU';
    }
  },
  calendar: {
    sameDay: '[ma] LT[-kor]',
    nextDay: '[holnap] LT[-kor]',
    nextWeek: function nextWeek() {
      return week.call(this, true);
    },
    lastDay: '[tegnap] LT[-kor]',
    lastWeek: function lastWeek() {
      return week.call(this, false);
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s múlva',
    past: '%s',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hy-am.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/hy-am.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hy-am', {
  months: {
    format: 'հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի'.split('_'),
    standalone: 'հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր'.split('_')
  },
  monthsShort: 'հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ'.split('_'),
  weekdays: 'կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ'.split('_'),
  weekdaysShort: 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
  weekdaysMin: 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY թ.',
    LLL: 'D MMMM YYYY թ., HH:mm',
    LLLL: 'dddd, D MMMM YYYY թ., HH:mm'
  },
  calendar: {
    sameDay: '[այսօր] LT',
    nextDay: '[վաղը] LT',
    lastDay: '[երեկ] LT',
    nextWeek: function nextWeek() {
      return 'dddd [օրը ժամը] LT';
    },
    lastWeek: function lastWeek() {
      return '[անցած] dddd [օրը ժամը] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s հետո',
    past: '%s առաջ',
    s: 'մի քանի վայրկյան',
    ss: '%d վայրկյան',
    m: 'րոպե',
    mm: '%d րոպե',
    h: 'ժամ',
    hh: '%d ժամ',
    d: 'օր',
    dd: '%d օր',
    M: 'ամիս',
    MM: '%d ամիս',
    y: 'տարի',
    yy: '%d տարի'
  },
  meridiemParse: /գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,
  isPM: function isPM(input) {
    return /^(ցերեկվա|երեկոյան)$/.test(input);
  },
  meridiem: function meridiem(hour) {
    if (hour < 4) {
      return 'գիշերվա';
    } else if (hour < 12) {
      return 'առավոտվա';
    } else if (hour < 17) {
      return 'ցերեկվա';
    } else {
      return 'երեկոյան';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}|\d{1,2}-(ին|րդ)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'DDD':
      case 'w':
      case 'W':
      case 'DDDo':
        if (number === 1) {
          return number + '-ին';
        }

        return number + '-րդ';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/id.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/id.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('id', {
  months: 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des'.split('_'),
  weekdays: 'Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu'.split('_'),
  weekdaysShort: 'Min_Sen_Sel_Rab_Kam_Jum_Sab'.split('_'),
  weekdaysMin: 'Mg_Sn_Sl_Rb_Km_Jm_Sb'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /pagi|siang|sore|malam/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'pagi') {
      return hour;
    } else if (meridiem === 'siang') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'sore' || meridiem === 'malam') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'pagi';
    } else if (hours < 15) {
      return 'siang';
    } else if (hours < 19) {
      return 'sore';
    } else {
      return 'malam';
    }
  },
  calendar: {
    sameDay: '[Hari ini pukul] LT',
    nextDay: '[Besok pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kemarin pukul] LT',
    lastWeek: 'dddd [lalu pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dalam %s',
    past: '%s yang lalu',
    s: 'beberapa detik',
    ss: '%d detik',
    m: 'semenit',
    mm: '%d menit',
    h: 'sejam',
    hh: '%d jam',
    d: 'sehari',
    dd: '%d hari',
    M: 'sebulan',
    MM: '%d bulan',
    y: 'setahun',
    yy: '%d tahun'
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/is.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/is.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(n) {
  if (n % 100 === 11) {
    return true;
  } else if (n % 10 === 1) {
    return false;
  }

  return true;
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'nokkrar sekúndur' : 'nokkrum sekúndum';

    case 'ss':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'sekúndur' : 'sekúndum');
      }

      return result + 'sekúnda';

    case 'm':
      return withoutSuffix ? 'mínúta' : 'mínútu';

    case 'mm':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'mínútur' : 'mínútum');
      } else if (withoutSuffix) {
        return result + 'mínúta';
      }

      return result + 'mínútu';

    case 'hh':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'klukkustundir' : 'klukkustundum');
      }

      return result + 'klukkustund';

    case 'd':
      if (withoutSuffix) {
        return 'dagur';
      }

      return isFuture ? 'dag' : 'degi';

    case 'dd':
      if (plural(number)) {
        if (withoutSuffix) {
          return result + 'dagar';
        }

        return result + (isFuture ? 'daga' : 'dögum');
      } else if (withoutSuffix) {
        return result + 'dagur';
      }

      return result + (isFuture ? 'dag' : 'degi');

    case 'M':
      if (withoutSuffix) {
        return 'mánuður';
      }

      return isFuture ? 'mánuð' : 'mánuði';

    case 'MM':
      if (plural(number)) {
        if (withoutSuffix) {
          return result + 'mánuðir';
        }

        return result + (isFuture ? 'mánuði' : 'mánuðum');
      } else if (withoutSuffix) {
        return result + 'mánuður';
      }

      return result + (isFuture ? 'mánuð' : 'mánuði');

    case 'y':
      return withoutSuffix || isFuture ? 'ár' : 'ári';

    case 'yy':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'ár' : 'árum');
      }

      return result + (withoutSuffix || isFuture ? 'ár' : 'ári');
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('is', {
  months: 'janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember'.split('_'),
  monthsShort: 'jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des'.split('_'),
  weekdays: 'sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur'.split('_'),
  weekdaysShort: 'sun_mán_þri_mið_fim_fös_lau'.split('_'),
  weekdaysMin: 'Su_Má_Þr_Mi_Fi_Fö_La'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY [kl.] H:mm',
    LLLL: 'dddd, D. MMMM YYYY [kl.] H:mm'
  },
  calendar: {
    sameDay: '[í dag kl.] LT',
    nextDay: '[á morgun kl.] LT',
    nextWeek: 'dddd [kl.] LT',
    lastDay: '[í gær kl.] LT',
    lastWeek: '[síðasta] dddd [kl.] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'eftir %s',
    past: 'fyrir %s síðan',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: 'klukkustund',
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/it-ch.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/it-ch.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('it-ch', {
  months: 'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),
  monthsShort: 'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),
  weekdays: 'domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato'.split('_'),
  weekdaysShort: 'dom_lun_mar_mer_gio_ven_sab'.split('_'),
  weekdaysMin: 'do_lu_ma_me_gi_ve_sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Oggi alle] LT',
    nextDay: '[Domani alle] LT',
    nextWeek: 'dddd [alle] LT',
    lastDay: '[Ieri alle] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[la scorsa] dddd [alle] LT';

        default:
          return '[lo scorso] dddd [alle] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(s) {
      return (/^[0-9].+$/.test(s) ? 'tra' : 'in') + ' ' + s;
    },
    past: '%s fa',
    s: 'alcuni secondi',
    ss: '%d secondi',
    m: 'un minuto',
    mm: '%d minuti',
    h: "un'ora",
    hh: '%d ore',
    d: 'un giorno',
    dd: '%d giorni',
    M: 'un mese',
    MM: '%d mesi',
    y: 'un anno',
    yy: '%d anni'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/it.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/it.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('it', {
  months: 'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),
  monthsShort: 'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),
  weekdays: 'domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato'.split('_'),
  weekdaysShort: 'dom_lun_mar_mer_gio_ven_sab'.split('_'),
  weekdaysMin: 'do_lu_ma_me_gi_ve_sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[Oggi a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    nextDay: function nextDay() {
      return '[Domani a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    lastDay: function lastDay() {
      return '[Ieri a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[La scorsa] dddd [a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';

        default:
          return '[Lo scorso] dddd [a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'tra %s',
    past: '%s fa',
    s: 'alcuni secondi',
    ss: '%d secondi',
    m: 'un minuto',
    mm: '%d minuti',
    h: "un'ora",
    hh: '%d ore',
    d: 'un giorno',
    dd: '%d giorni',
    w: 'una settimana',
    ww: '%d settimane',
    M: 'un mese',
    MM: '%d mesi',
    y: 'un anno',
    yy: '%d anni'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ja.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ja.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ja', {
  eras: [{
    since: '2019-05-01',
    offset: 1,
    name: '令和',
    narrow: '㋿',
    abbr: 'R'
  }, {
    since: '1989-01-08',
    until: '2019-04-30',
    offset: 1,
    name: '平成',
    narrow: '㍻',
    abbr: 'H'
  }, {
    since: '1926-12-25',
    until: '1989-01-07',
    offset: 1,
    name: '昭和',
    narrow: '㍼',
    abbr: 'S'
  }, {
    since: '1912-07-30',
    until: '1926-12-24',
    offset: 1,
    name: '大正',
    narrow: '㍽',
    abbr: 'T'
  }, {
    since: '1873-01-01',
    until: '1912-07-29',
    offset: 6,
    name: '明治',
    narrow: '㍾',
    abbr: 'M'
  }, {
    since: '0001-01-01',
    until: '1873-12-31',
    offset: 1,
    name: '西暦',
    narrow: 'AD',
    abbr: 'AD'
  }, {
    since: '0000-12-31',
    until: -Infinity,
    offset: 1,
    name: '紀元前',
    narrow: 'BC',
    abbr: 'BC'
  }],
  eraYearOrdinalRegex: /(元|\d+)年/,
  eraYearOrdinalParse: function eraYearOrdinalParse(input, match) {
    return match[1] === '元' ? 1 : parseInt(match[1] || input, 10);
  },
  months: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日'.split('_'),
  weekdaysShort: '日_月_火_水_木_金_土'.split('_'),
  weekdaysMin: '日_月_火_水_木_金_土'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日 dddd HH:mm',
    l: 'YYYY/MM/DD',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日(ddd) HH:mm'
  },
  meridiemParse: /午前|午後/i,
  isPM: function isPM(input) {
    return input === '午後';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return '午前';
    } else {
      return '午後';
    }
  },
  calendar: {
    sameDay: '[今日] LT',
    nextDay: '[明日] LT',
    nextWeek: function nextWeek(now) {
      if (now.week() !== this.week()) {
        return '[来週]dddd LT';
      } else {
        return 'dddd LT';
      }
    },
    lastDay: '[昨日] LT',
    lastWeek: function lastWeek(now) {
      if (this.week() !== now.week()) {
        return '[先週]dddd LT';
      } else {
        return 'dddd LT';
      }
    },
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}日/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'y':
        return number === 1 ? '元年' : number + '年';

      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s後',
    past: '%s前',
    s: '数秒',
    ss: '%d秒',
    m: '1分',
    mm: '%d分',
    h: '1時間',
    hh: '%d時間',
    d: '1日',
    dd: '%d日',
    M: '1ヶ月',
    MM: '%dヶ月',
    y: '1年',
    yy: '%d年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/jv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/jv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('jv', {
  months: 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des'.split('_'),
  weekdays: 'Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu'.split('_'),
  weekdaysShort: 'Min_Sen_Sel_Reb_Kem_Jem_Sep'.split('_'),
  weekdaysMin: 'Mg_Sn_Sl_Rb_Km_Jm_Sp'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /enjing|siyang|sonten|ndalu/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'enjing') {
      return hour;
    } else if (meridiem === 'siyang') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'sonten' || meridiem === 'ndalu') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'enjing';
    } else if (hours < 15) {
      return 'siyang';
    } else if (hours < 19) {
      return 'sonten';
    } else {
      return 'ndalu';
    }
  },
  calendar: {
    sameDay: '[Dinten puniko pukul] LT',
    nextDay: '[Mbenjang pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kala wingi pukul] LT',
    lastWeek: 'dddd [kepengker pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'wonten ing %s',
    past: '%s ingkang kepengker',
    s: 'sawetawis detik',
    ss: '%d detik',
    m: 'setunggal menit',
    mm: '%d menit',
    h: 'setunggal jam',
    hh: '%d jam',
    d: 'sedinten',
    dd: '%d dinten',
    M: 'sewulan',
    MM: '%d wulan',
    y: 'setaun',
    yy: '%d taun'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ka.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ka.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ka', {
  months: 'იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი'.split('_'),
  monthsShort: 'იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ'.split('_'),
  weekdays: {
    standalone: 'კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი'.split('_'),
    format: 'კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს'.split('_'),
    isFormat: /(წინა|შემდეგ)/
  },
  weekdaysShort: 'კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ'.split('_'),
  weekdaysMin: 'კვ_ორ_სა_ოთ_ხუ_პა_შა'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[დღეს] LT[-ზე]',
    nextDay: '[ხვალ] LT[-ზე]',
    lastDay: '[გუშინ] LT[-ზე]',
    nextWeek: '[შემდეგ] dddd LT[-ზე]',
    lastWeek: '[წინა] dddd LT-ზე',
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(s) {
      return s.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/, function ($0, $1, $2) {
        return $2 === 'ი' ? $1 + 'ში' : $1 + $2 + 'ში';
      });
    },
    past: function past(s) {
      if (/(წამი|წუთი|საათი|დღე|თვე)/.test(s)) {
        return s.replace(/(ი|ე)$/, 'ის წინ');
      }

      if (/წელი/.test(s)) {
        return s.replace(/წელი$/, 'წლის წინ');
      }

      return s;
    },
    s: 'რამდენიმე წამი',
    ss: '%d წამი',
    m: 'წუთი',
    mm: '%d წუთი',
    h: 'საათი',
    hh: '%d საათი',
    d: 'დღე',
    dd: '%d დღე',
    M: 'თვე',
    MM: '%d თვე',
    y: 'წელი',
    yy: '%d წელი'
  },
  dayOfMonthOrdinalParse: /0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,
  ordinal: function ordinal(number) {
    if (number === 0) {
      return number;
    }

    if (number === 1) {
      return number + '-ლი';
    }

    if (number < 20 || number <= 100 && number % 20 === 0 || number % 100 === 0) {
      return 'მე-' + number;
    }

    return number + '-ე';
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/kk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/kk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  0: '-ші',
  1: '-ші',
  2: '-ші',
  3: '-ші',
  4: '-ші',
  5: '-ші',
  6: '-шы',
  7: '-ші',
  8: '-ші',
  9: '-шы',
  10: '-шы',
  20: '-шы',
  30: '-шы',
  40: '-шы',
  50: '-ші',
  60: '-шы',
  70: '-ші',
  80: '-ші',
  90: '-шы',
  100: '-ші'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('kk', {
  months: 'қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан'.split('_'),
  monthsShort: 'қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел'.split('_'),
  weekdays: 'жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі'.split('_'),
  weekdaysShort: 'жек_дүй_сей_сәр_бей_жұм_сен'.split('_'),
  weekdaysMin: 'жк_дй_сй_ср_бй_жм_сн'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Бүгін сағат] LT',
    nextDay: '[Ертең сағат] LT',
    nextWeek: 'dddd [сағат] LT',
    lastDay: '[Кеше сағат] LT',
    lastWeek: '[Өткен аптаның] dddd [сағат] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ішінде',
    past: '%s бұрын',
    s: 'бірнеше секунд',
    ss: '%d секунд',
    m: 'бір минут',
    mm: '%d минут',
    h: 'бір сағат',
    hh: '%d сағат',
    d: 'бір күн',
    dd: '%d күн',
    M: 'бір ай',
    MM: '%d ай',
    y: 'бір жыл',
    yy: '%d жыл'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ші|шы)/,
  ordinal: function ordinal(number) {
    var a = number % 10,
        b = number >= 100 ? 100 : null;
    return number + (suffixes[number] || suffixes[a] || suffixes[b]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/km.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/km.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '១',
  2: '២',
  3: '៣',
  4: '៤',
  5: '៥',
  6: '៦',
  7: '៧',
  8: '៨',
  9: '៩',
  0: '០'
},
    numberMap = {
  '១': '1',
  '២': '2',
  '៣': '3',
  '៤': '4',
  '៥': '5',
  '៦': '6',
  '៧': '7',
  '៨': '8',
  '៩': '9',
  '០': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('km', {
  months: 'មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
  monthsShort: 'មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
  weekdays: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
  weekdaysShort: 'អា_ច_អ_ព_ព្រ_សុ_ស'.split('_'),
  weekdaysMin: 'អា_ច_អ_ព_ព្រ_សុ_ស'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  meridiemParse: /ព្រឹក|ល្ងាច/,
  isPM: function isPM(input) {
    return input === 'ល្ងាច';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ព្រឹក';
    } else {
      return 'ល្ងាច';
    }
  },
  calendar: {
    sameDay: '[ថ្ងៃនេះ ម៉ោង] LT',
    nextDay: '[ស្អែក ម៉ោង] LT',
    nextWeek: 'dddd [ម៉ោង] LT',
    lastDay: '[ម្សិលមិញ ម៉ោង] LT',
    lastWeek: 'dddd [សប្តាហ៍មុន] [ម៉ោង] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sទៀត',
    past: '%sមុន',
    s: 'ប៉ុន្មានវិនាទី',
    ss: '%d វិនាទី',
    m: 'មួយនាទី',
    mm: '%d នាទី',
    h: 'មួយម៉ោង',
    hh: '%d ម៉ោង',
    d: 'មួយថ្ងៃ',
    dd: '%d ថ្ងៃ',
    M: 'មួយខែ',
    MM: '%d ខែ',
    y: 'មួយឆ្នាំ',
    yy: '%d ឆ្នាំ'
  },
  dayOfMonthOrdinalParse: /ទី\d{1,2}/,
  ordinal: 'ទី%d',
  preparse: function preparse(string) {
    return string.replace(/[១២៣៤៥៦៧៨៩០]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/kn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/kn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '೧',
  2: '೨',
  3: '೩',
  4: '೪',
  5: '೫',
  6: '೬',
  7: '೭',
  8: '೮',
  9: '೯',
  0: '೦'
},
    numberMap = {
  '೧': '1',
  '೨': '2',
  '೩': '3',
  '೪': '4',
  '೫': '5',
  '೬': '6',
  '೭': '7',
  '೮': '8',
  '೯': '9',
  '೦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('kn', {
  months: 'ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್'.split('_'),
  monthsShort: 'ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ'.split('_'),
  monthsParseExact: true,
  weekdays: 'ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ'.split('_'),
  weekdaysShort: 'ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ'.split('_'),
  weekdaysMin: 'ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm',
    LLLL: 'dddd, D MMMM YYYY, A h:mm'
  },
  calendar: {
    sameDay: '[ಇಂದು] LT',
    nextDay: '[ನಾಳೆ] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[ನಿನ್ನೆ] LT',
    lastWeek: '[ಕೊನೆಯ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ನಂತರ',
    past: '%s ಹಿಂದೆ',
    s: 'ಕೆಲವು ಕ್ಷಣಗಳು',
    ss: '%d ಸೆಕೆಂಡುಗಳು',
    m: 'ಒಂದು ನಿಮಿಷ',
    mm: '%d ನಿಮಿಷ',
    h: 'ಒಂದು ಗಂಟೆ',
    hh: '%d ಗಂಟೆ',
    d: 'ಒಂದು ದಿನ',
    dd: '%d ದಿನ',
    M: 'ಒಂದು ತಿಂಗಳು',
    MM: '%d ತಿಂಗಳು',
    y: 'ಒಂದು ವರ್ಷ',
    yy: '%d ವರ್ಷ'
  },
  preparse: function preparse(string) {
    return string.replace(/[೧೨೩೪೫೬೭೮೯೦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'ರಾತ್ರಿ') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ಬೆಳಿಗ್ಗೆ') {
      return hour;
    } else if (meridiem === 'ಮಧ್ಯಾಹ್ನ') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'ಸಂಜೆ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ರಾತ್ರಿ';
    } else if (hour < 10) {
      return 'ಬೆಳಿಗ್ಗೆ';
    } else if (hour < 17) {
      return 'ಮಧ್ಯಾಹ್ನ';
    } else if (hour < 20) {
      return 'ಸಂಜೆ';
    } else {
      return 'ರಾತ್ರಿ';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ನೇ)/,
  ordinal: function ordinal(number) {
    return number + 'ನೇ';
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ko.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ko.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ko', {
  months: '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
  monthsShort: '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
  weekdays: '일요일_월요일_화요일_수요일_목요일_금요일_토요일'.split('_'),
  weekdaysShort: '일_월_화_수_목_금_토'.split('_'),
  weekdaysMin: '일_월_화_수_목_금_토'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'YYYY.MM.DD.',
    LL: 'YYYY년 MMMM D일',
    LLL: 'YYYY년 MMMM D일 A h:mm',
    LLLL: 'YYYY년 MMMM D일 dddd A h:mm',
    l: 'YYYY.MM.DD.',
    ll: 'YYYY년 MMMM D일',
    lll: 'YYYY년 MMMM D일 A h:mm',
    llll: 'YYYY년 MMMM D일 dddd A h:mm'
  },
  calendar: {
    sameDay: '오늘 LT',
    nextDay: '내일 LT',
    nextWeek: 'dddd LT',
    lastDay: '어제 LT',
    lastWeek: '지난주 dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s 후',
    past: '%s 전',
    s: '몇 초',
    ss: '%d초',
    m: '1분',
    mm: '%d분',
    h: '한 시간',
    hh: '%d시간',
    d: '하루',
    dd: '%d일',
    M: '한 달',
    MM: '%d달',
    y: '일 년',
    yy: '%d년'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(일|월|주)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '일';

      case 'M':
        return number + '월';

      case 'w':
      case 'W':
        return number + '주';

      default:
        return number;
    }
  },
  meridiemParse: /오전|오후/,
  isPM: function isPM(token) {
    return token === '오후';
  },
  meridiem: function meridiem(hour, minute, isUpper) {
    return hour < 12 ? '오전' : '오후';
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ku.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ku.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '١',
  2: '٢',
  3: '٣',
  4: '٤',
  5: '٥',
  6: '٦',
  7: '٧',
  8: '٨',
  9: '٩',
  0: '٠'
},
    numberMap = {
  '١': '1',
  '٢': '2',
  '٣': '3',
  '٤': '4',
  '٥': '5',
  '٦': '6',
  '٧': '7',
  '٨': '8',
  '٩': '9',
  '٠': '0'
},
    months = ['کانونی دووەم', 'شوبات', 'ئازار', 'نیسان', 'ئایار', 'حوزەیران', 'تەمموز', 'ئاب', 'ئەیلوول', 'تشرینی یەكەم', 'تشرینی دووەم', 'كانونی یەکەم'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ku', {
  months: months,
  monthsShort: months,
  weekdays: 'یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌'.split('_'),
  weekdaysShort: 'یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌'.split('_'),
  weekdaysMin: 'ی_د_س_چ_پ_ه_ش'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  meridiemParse: /ئێواره‌|به‌یانی/,
  isPM: function isPM(input) {
    return /ئێواره‌/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'به‌یانی';
    } else {
      return 'ئێواره‌';
    }
  },
  calendar: {
    sameDay: '[ئه‌مرۆ كاتژمێر] LT',
    nextDay: '[به‌یانی كاتژمێر] LT',
    nextWeek: 'dddd [كاتژمێر] LT',
    lastDay: '[دوێنێ كاتژمێر] LT',
    lastWeek: 'dddd [كاتژمێر] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'له‌ %s',
    past: '%s',
    s: 'چه‌ند چركه‌یه‌ك',
    ss: 'چركه‌ %d',
    m: 'یه‌ك خوله‌ك',
    mm: '%d خوله‌ك',
    h: 'یه‌ك كاتژمێر',
    hh: '%d كاتژمێر',
    d: 'یه‌ك ڕۆژ',
    dd: '%d ڕۆژ',
    M: 'یه‌ك مانگ',
    MM: '%d مانگ',
    y: 'یه‌ك ساڵ',
    yy: '%d ساڵ'
  },
  preparse: function preparse(string) {
    return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ky.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ky.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  0: '-чү',
  1: '-чи',
  2: '-чи',
  3: '-чү',
  4: '-чү',
  5: '-чи',
  6: '-чы',
  7: '-чи',
  8: '-чи',
  9: '-чу',
  10: '-чу',
  20: '-чы',
  30: '-чу',
  40: '-чы',
  50: '-чү',
  60: '-чы',
  70: '-чи',
  80: '-чи',
  90: '-чу',
  100: '-чү'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ky', {
  months: 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_'),
  monthsShort: 'янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек'.split('_'),
  weekdays: 'Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби'.split('_'),
  weekdaysShort: 'Жек_Дүй_Шей_Шар_Бей_Жум_Ише'.split('_'),
  weekdaysMin: 'Жк_Дй_Шй_Шр_Бй_Жм_Иш'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Бүгүн саат] LT',
    nextDay: '[Эртең саат] LT',
    nextWeek: 'dddd [саат] LT',
    lastDay: '[Кечээ саат] LT',
    lastWeek: '[Өткөн аптанын] dddd [күнү] [саат] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ичинде',
    past: '%s мурун',
    s: 'бирнече секунд',
    ss: '%d секунд',
    m: 'бир мүнөт',
    mm: '%d мүнөт',
    h: 'бир саат',
    hh: '%d саат',
    d: 'бир күн',
    dd: '%d күн',
    M: 'бир ай',
    MM: '%d ай',
    y: 'бир жыл',
    yy: '%d жыл'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(чи|чы|чү|чу)/,
  ordinal: function ordinal(number) {
    var a = number % 10,
        b = number >= 100 ? 100 : null;
    return number + (suffixes[number] || suffixes[a] || suffixes[b]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lb.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lb.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eng Minutt', 'enger Minutt'],
    h: ['eng Stonn', 'enger Stonn'],
    d: ['een Dag', 'engem Dag'],
    M: ['ee Mount', 'engem Mount'],
    y: ['ee Joer', 'engem Joer']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

function processFutureTime(string) {
  var number = string.substr(0, string.indexOf(' '));

  if (eifelerRegelAppliesToNumber(number)) {
    return 'a ' + string;
  }

  return 'an ' + string;
}

function processPastTime(string) {
  var number = string.substr(0, string.indexOf(' '));

  if (eifelerRegelAppliesToNumber(number)) {
    return 'viru ' + string;
  }

  return 'virun ' + string;
}

function eifelerRegelAppliesToNumber(number) {
  number = parseInt(number, 10);

  if (isNaN(number)) {
    return false;
  }

  if (number < 0) {
    return true;
  } else if (number < 10) {
    if (4 <= number && number <= 7) {
      return true;
    }

    return false;
  } else if (number < 100) {
    var lastDigit = number % 10,
        firstDigit = number / 10;

    if (lastDigit === 0) {
      return eifelerRegelAppliesToNumber(firstDigit);
    }

    return eifelerRegelAppliesToNumber(lastDigit);
  } else if (number < 10000) {
    while (number >= 10) {
      number = number / 10;
    }

    return eifelerRegelAppliesToNumber(number);
  } else {
    number = number / 1000;
    return eifelerRegelAppliesToNumber(number);
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lb', {
  months: 'Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg'.split('_'),
  weekdaysShort: 'So._Mé._Dë._Më._Do._Fr._Sa.'.split('_'),
  weekdaysMin: 'So_Mé_Dë_Më_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm [Auer]',
    LTS: 'H:mm:ss [Auer]',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm [Auer]',
    LLLL: 'dddd, D. MMMM YYYY H:mm [Auer]'
  },
  calendar: {
    sameDay: '[Haut um] LT',
    sameElse: 'L',
    nextDay: '[Muer um] LT',
    nextWeek: 'dddd [um] LT',
    lastDay: '[Gëschter um] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 2:
        case 4:
          return '[Leschten] dddd [um] LT';

        default:
          return '[Leschte] dddd [um] LT';
      }
    }
  },
  relativeTime: {
    future: processFutureTime,
    past: processPastTime,
    s: 'e puer Sekonnen',
    ss: '%d Sekonnen',
    m: processRelativeTime,
    mm: '%d Minutten',
    h: processRelativeTime,
    hh: '%d Stonnen',
    d: processRelativeTime,
    dd: '%d Deeg',
    M: processRelativeTime,
    MM: '%d Méint',
    y: processRelativeTime,
    yy: '%d Joer'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lo', {
  months: 'ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ'.split('_'),
  monthsShort: 'ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ'.split('_'),
  weekdays: 'ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ'.split('_'),
  weekdaysShort: 'ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ'.split('_'),
  weekdaysMin: 'ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'ວັນdddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ຕອນເຊົ້າ|ຕອນແລງ/,
  isPM: function isPM(input) {
    return input === 'ຕອນແລງ';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ຕອນເຊົ້າ';
    } else {
      return 'ຕອນແລງ';
    }
  },
  calendar: {
    sameDay: '[ມື້ນີ້ເວລາ] LT',
    nextDay: '[ມື້ອື່ນເວລາ] LT',
    nextWeek: '[ວັນ]dddd[ໜ້າເວລາ] LT',
    lastDay: '[ມື້ວານນີ້ເວລາ] LT',
    lastWeek: '[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ອີກ %s',
    past: '%sຜ່ານມາ',
    s: 'ບໍ່ເທົ່າໃດວິນາທີ',
    ss: '%d ວິນາທີ',
    m: '1 ນາທີ',
    mm: '%d ນາທີ',
    h: '1 ຊົ່ວໂມງ',
    hh: '%d ຊົ່ວໂມງ',
    d: '1 ມື້',
    dd: '%d ມື້',
    M: '1 ເດືອນ',
    MM: '%d ເດືອນ',
    y: '1 ປີ',
    yy: '%d ປີ'
  },
  dayOfMonthOrdinalParse: /(ທີ່)\d{1,2}/,
  ordinal: function ordinal(number) {
    return 'ທີ່' + number;
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lt.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lt.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var units = {
  ss: 'sekundė_sekundžių_sekundes',
  m: 'minutė_minutės_minutę',
  mm: 'minutės_minučių_minutes',
  h: 'valanda_valandos_valandą',
  hh: 'valandos_valandų_valandas',
  d: 'diena_dienos_dieną',
  dd: 'dienos_dienų_dienas',
  M: 'mėnuo_mėnesio_mėnesį',
  MM: 'mėnesiai_mėnesių_mėnesius',
  y: 'metai_metų_metus',
  yy: 'metai_metų_metus'
};

function translateSeconds(number, withoutSuffix, key, isFuture) {
  if (withoutSuffix) {
    return 'kelios sekundės';
  } else {
    return isFuture ? 'kelių sekundžių' : 'kelias sekundes';
  }
}

function translateSingular(number, withoutSuffix, key, isFuture) {
  return withoutSuffix ? forms(key)[0] : isFuture ? forms(key)[1] : forms(key)[2];
}

function special(number) {
  return number % 10 === 0 || number > 10 && number < 20;
}

function forms(key) {
  return units[key].split('_');
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  if (number === 1) {
    return result + translateSingular(number, withoutSuffix, key[0], isFuture);
  } else if (withoutSuffix) {
    return result + (special(number) ? forms(key)[1] : forms(key)[0]);
  } else {
    if (isFuture) {
      return result + forms(key)[1];
    } else {
      return result + (special(number) ? forms(key)[1] : forms(key)[2]);
    }
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lt', {
  months: {
    format: 'sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio'.split('_'),
    standalone: 'sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis'.split('_'),
    isFormat: /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/
  },
  monthsShort: 'sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd'.split('_'),
  weekdays: {
    format: 'sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį'.split('_'),
    standalone: 'sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis'.split('_'),
    isFormat: /dddd HH:mm/
  },
  weekdaysShort: 'Sek_Pir_Ant_Tre_Ket_Pen_Šeš'.split('_'),
  weekdaysMin: 'S_P_A_T_K_Pn_Š'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY [m.] MMMM D [d.]',
    LLL: 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
    LLLL: 'YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]',
    l: 'YYYY-MM-DD',
    ll: 'YYYY [m.] MMMM D [d.]',
    lll: 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
    llll: 'YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]'
  },
  calendar: {
    sameDay: '[Šiandien] LT',
    nextDay: '[Rytoj] LT',
    nextWeek: 'dddd LT',
    lastDay: '[Vakar] LT',
    lastWeek: '[Praėjusį] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'po %s',
    past: 'prieš %s',
    s: translateSeconds,
    ss: translate,
    m: translateSingular,
    mm: translate,
    h: translateSingular,
    hh: translate,
    d: translateSingular,
    dd: translate,
    M: translateSingular,
    MM: translate,
    y: translateSingular,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}-oji/,
  ordinal: function ordinal(number) {
    return number + '-oji';
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var units = {
  ss: 'sekundes_sekundēm_sekunde_sekundes'.split('_'),
  m: 'minūtes_minūtēm_minūte_minūtes'.split('_'),
  mm: 'minūtes_minūtēm_minūte_minūtes'.split('_'),
  h: 'stundas_stundām_stunda_stundas'.split('_'),
  hh: 'stundas_stundām_stunda_stundas'.split('_'),
  d: 'dienas_dienām_diena_dienas'.split('_'),
  dd: 'dienas_dienām_diena_dienas'.split('_'),
  M: 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
  MM: 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
  y: 'gada_gadiem_gads_gadi'.split('_'),
  yy: 'gada_gadiem_gads_gadi'.split('_')
};

function format(forms, number, withoutSuffix) {
  if (withoutSuffix) {
    return number % 10 === 1 && number % 100 !== 11 ? forms[2] : forms[3];
  } else {
    return number % 10 === 1 && number % 100 !== 11 ? forms[0] : forms[1];
  }
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  return number + ' ' + format(units[key], number, withoutSuffix);
}

function relativeTimeWithSingular(number, withoutSuffix, key) {
  return format(units[key], number, withoutSuffix);
}

function relativeSeconds(number, withoutSuffix) {
  return withoutSuffix ? 'dažas sekundes' : 'dažām sekundēm';
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lv', {
  months: 'janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris'.split('_'),
  monthsShort: 'jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec'.split('_'),
  weekdays: 'svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena'.split('_'),
  weekdaysShort: 'Sv_P_O_T_C_Pk_S'.split('_'),
  weekdaysMin: 'Sv_P_O_T_C_Pk_S'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY.',
    LL: 'YYYY. [gada] D. MMMM',
    LLL: 'YYYY. [gada] D. MMMM, HH:mm',
    LLLL: 'YYYY. [gada] D. MMMM, dddd, HH:mm'
  },
  calendar: {
    sameDay: '[Šodien pulksten] LT',
    nextDay: '[Rīt pulksten] LT',
    nextWeek: 'dddd [pulksten] LT',
    lastDay: '[Vakar pulksten] LT',
    lastWeek: '[Pagājušā] dddd [pulksten] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'pēc %s',
    past: 'pirms %s',
    s: relativeSeconds,
    ss: relativeTimeWithPlural,
    m: relativeTimeWithSingular,
    mm: relativeTimeWithPlural,
    h: relativeTimeWithSingular,
    hh: relativeTimeWithPlural,
    d: relativeTimeWithSingular,
    dd: relativeTimeWithPlural,
    M: relativeTimeWithSingular,
    MM: relativeTimeWithPlural,
    y: relativeTimeWithSingular,
    yy: relativeTimeWithPlural
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/me.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/me.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var translator = {
  words: {
    ss: ['sekund', 'sekunda', 'sekundi'],
    m: ['jedan minut', 'jednog minuta'],
    mm: ['minut', 'minuta', 'minuta'],
    h: ['jedan sat', 'jednog sata'],
    hh: ['sat', 'sata', 'sati'],
    dd: ['dan', 'dana', 'dana'],
    MM: ['mjesec', 'mjeseca', 'mjeseci'],
    yy: ['godina', 'godine', 'godina']
  },
  correctGrammaticalCase: function correctGrammaticalCase(number, wordKey) {
    return number === 1 ? wordKey[0] : number >= 2 && number <= 4 ? wordKey[1] : wordKey[2];
  },
  translate: function translate(number, withoutSuffix, key) {
    var wordKey = translator.words[key];

    if (key.length === 1) {
      return withoutSuffix ? wordKey[0] : wordKey[1];
    } else {
      return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('me', {
  months: 'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sjutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedjelju] [u] LT';

        case 3:
          return '[u] [srijedu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[juče u] LT',
    lastWeek: function lastWeek() {
      var lastWeekDays = ['[prošle] [nedjelje] [u] LT', '[prošlog] [ponedjeljka] [u] LT', '[prošlog] [utorka] [u] LT', '[prošle] [srijede] [u] LT', '[prošlog] [četvrtka] [u] LT', '[prošlog] [petka] [u] LT', '[prošle] [subote] [u] LT'];
      return lastWeekDays[this.day()];
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'prije %s',
    s: 'nekoliko sekundi',
    ss: translator.translate,
    m: translator.translate,
    mm: translator.translate,
    h: translator.translate,
    hh: translator.translate,
    d: 'dan',
    dd: translator.translate,
    M: 'mjesec',
    MM: translator.translate,
    y: 'godinu',
    yy: translator.translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mi', {
  months: 'Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea'.split('_'),
  monthsShort: 'Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki'.split('_'),
  monthsRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
  monthsStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
  monthsShortRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
  monthsShortStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,
  weekdays: 'Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei'.split('_'),
  weekdaysShort: 'Ta_Ma_Tū_We_Tāi_Pa_Hā'.split('_'),
  weekdaysMin: 'Ta_Ma_Tū_We_Tāi_Pa_Hā'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [i] HH:mm',
    LLLL: 'dddd, D MMMM YYYY [i] HH:mm'
  },
  calendar: {
    sameDay: '[i teie mahana, i] LT',
    nextDay: '[apopo i] LT',
    nextWeek: 'dddd [i] LT',
    lastDay: '[inanahi i] LT',
    lastWeek: 'dddd [whakamutunga i] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'i roto i %s',
    past: '%s i mua',
    s: 'te hēkona ruarua',
    ss: '%d hēkona',
    m: 'he meneti',
    mm: '%d meneti',
    h: 'te haora',
    hh: '%d haora',
    d: 'he ra',
    dd: '%d ra',
    M: 'he marama',
    MM: '%d marama',
    y: 'he tau',
    yy: '%d tau'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mk', {
  months: 'јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември'.split('_'),
  monthsShort: 'јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек'.split('_'),
  weekdays: 'недела_понеделник_вторник_среда_четврток_петок_сабота'.split('_'),
  weekdaysShort: 'нед_пон_вто_сре_чет_пет_саб'.split('_'),
  weekdaysMin: 'нe_пo_вт_ср_че_пе_сa'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY H:mm',
    LLLL: 'dddd, D MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[Денес во] LT',
    nextDay: '[Утре во] LT',
    nextWeek: '[Во] dddd [во] LT',
    lastDay: '[Вчера во] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 6:
          return '[Изминатата] dddd [во] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[Изминатиот] dddd [во] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'за %s',
    past: 'пред %s',
    s: 'неколку секунди',
    ss: '%d секунди',
    m: 'една минута',
    mm: '%d минути',
    h: 'еден час',
    hh: '%d часа',
    d: 'еден ден',
    dd: '%d дена',
    M: 'еден месец',
    MM: '%d месеци',
    y: 'една година',
    yy: '%d години'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
  ordinal: function ordinal(number) {
    var lastDigit = number % 10,
        last2Digits = number % 100;

    if (number === 0) {
      return number + '-ев';
    } else if (last2Digits === 0) {
      return number + '-ен';
    } else if (last2Digits > 10 && last2Digits < 20) {
      return number + '-ти';
    } else if (lastDigit === 1) {
      return number + '-ви';
    } else if (lastDigit === 2) {
      return number + '-ри';
    } else if (lastDigit === 7 || lastDigit === 8) {
      return number + '-ми';
    } else {
      return number + '-ти';
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ml.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ml.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ml', {
  months: 'ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ'.split('_'),
  monthsShort: 'ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.'.split('_'),
  monthsParseExact: true,
  weekdays: 'ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച'.split('_'),
  weekdaysShort: 'ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി'.split('_'),
  weekdaysMin: 'ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm -നു',
    LTS: 'A h:mm:ss -നു',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm -നു',
    LLLL: 'dddd, D MMMM YYYY, A h:mm -നു'
  },
  calendar: {
    sameDay: '[ഇന്ന്] LT',
    nextDay: '[നാളെ] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[ഇന്നലെ] LT',
    lastWeek: '[കഴിഞ്ഞ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s കഴിഞ്ഞ്',
    past: '%s മുൻപ്',
    s: 'അൽപ നിമിഷങ്ങൾ',
    ss: '%d സെക്കൻഡ്',
    m: 'ഒരു മിനിറ്റ്',
    mm: '%d മിനിറ്റ്',
    h: 'ഒരു മണിക്കൂർ',
    hh: '%d മണിക്കൂർ',
    d: 'ഒരു ദിവസം',
    dd: '%d ദിവസം',
    M: 'ഒരു മാസം',
    MM: '%d മാസം',
    y: 'ഒരു വർഷം',
    yy: '%d വർഷം'
  },
  meridiemParse: /രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'രാത്രി' && hour >= 4 || meridiem === 'ഉച്ച കഴിഞ്ഞ്' || meridiem === 'വൈകുന്നേരം') {
      return hour + 12;
    } else {
      return hour;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'രാത്രി';
    } else if (hour < 12) {
      return 'രാവിലെ';
    } else if (hour < 17) {
      return 'ഉച്ച കഴിഞ്ഞ്';
    } else if (hour < 20) {
      return 'വൈകുന്നേരം';
    } else {
      return 'രാത്രി';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function translate(number, withoutSuffix, key, isFuture) {
  switch (key) {
    case 's':
      return withoutSuffix ? 'хэдхэн секунд' : 'хэдхэн секундын';

    case 'ss':
      return number + (withoutSuffix ? ' секунд' : ' секундын');

    case 'm':
    case 'mm':
      return number + (withoutSuffix ? ' минут' : ' минутын');

    case 'h':
    case 'hh':
      return number + (withoutSuffix ? ' цаг' : ' цагийн');

    case 'd':
    case 'dd':
      return number + (withoutSuffix ? ' өдөр' : ' өдрийн');

    case 'M':
    case 'MM':
      return number + (withoutSuffix ? ' сар' : ' сарын');

    case 'y':
    case 'yy':
      return number + (withoutSuffix ? ' жил' : ' жилийн');

    default:
      return number;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mn', {
  months: 'Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар'.split('_'),
  monthsShort: '1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар'.split('_'),
  monthsParseExact: true,
  weekdays: 'Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба'.split('_'),
  weekdaysShort: 'Ням_Дав_Мяг_Лха_Пүр_Баа_Бям'.split('_'),
  weekdaysMin: 'Ня_Да_Мя_Лх_Пү_Ба_Бя'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY оны MMMMын D',
    LLL: 'YYYY оны MMMMын D HH:mm',
    LLLL: 'dddd, YYYY оны MMMMын D HH:mm'
  },
  meridiemParse: /ҮӨ|ҮХ/i,
  isPM: function isPM(input) {
    return input === 'ҮХ';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ҮӨ';
    } else {
      return 'ҮХ';
    }
  },
  calendar: {
    sameDay: '[Өнөөдөр] LT',
    nextDay: '[Маргааш] LT',
    nextWeek: '[Ирэх] dddd LT',
    lastDay: '[Өчигдөр] LT',
    lastWeek: '[Өнгөрсөн] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s дараа',
    past: '%s өмнө',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2} өдөр/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + ' өдөр';

      default:
        return number;
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '१',
  2: '२',
  3: '३',
  4: '४',
  5: '५',
  6: '६',
  7: '७',
  8: '८',
  9: '९',
  0: '०'
},
    numberMap = {
  '१': '1',
  '२': '2',
  '३': '3',
  '४': '4',
  '५': '5',
  '६': '6',
  '७': '7',
  '८': '8',
  '९': '9',
  '०': '0'
};

function relativeTimeMr(number, withoutSuffix, string, isFuture) {
  var output = '';

  if (withoutSuffix) {
    switch (string) {
      case 's':
        output = 'काही सेकंद';
        break;

      case 'ss':
        output = '%d सेकंद';
        break;

      case 'm':
        output = 'एक मिनिट';
        break;

      case 'mm':
        output = '%d मिनिटे';
        break;

      case 'h':
        output = 'एक तास';
        break;

      case 'hh':
        output = '%d तास';
        break;

      case 'd':
        output = 'एक दिवस';
        break;

      case 'dd':
        output = '%d दिवस';
        break;

      case 'M':
        output = 'एक महिना';
        break;

      case 'MM':
        output = '%d महिने';
        break;

      case 'y':
        output = 'एक वर्ष';
        break;

      case 'yy':
        output = '%d वर्षे';
        break;
    }
  } else {
    switch (string) {
      case 's':
        output = 'काही सेकंदां';
        break;

      case 'ss':
        output = '%d सेकंदां';
        break;

      case 'm':
        output = 'एका मिनिटा';
        break;

      case 'mm':
        output = '%d मिनिटां';
        break;

      case 'h':
        output = 'एका तासा';
        break;

      case 'hh':
        output = '%d तासां';
        break;

      case 'd':
        output = 'एका दिवसा';
        break;

      case 'dd':
        output = '%d दिवसां';
        break;

      case 'M':
        output = 'एका महिन्या';
        break;

      case 'MM':
        output = '%d महिन्यां';
        break;

      case 'y':
        output = 'एका वर्षा';
        break;

      case 'yy':
        output = '%d वर्षां';
        break;
    }
  }

  return output.replace(/%d/i, number);
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mr', {
  months: 'जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर'.split('_'),
  monthsShort: 'जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.'.split('_'),
  monthsParseExact: true,
  weekdays: 'रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
  weekdaysShort: 'रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि'.split('_'),
  weekdaysMin: 'र_सो_मं_बु_गु_शु_श'.split('_'),
  longDateFormat: {
    LT: 'A h:mm वाजता',
    LTS: 'A h:mm:ss वाजता',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm वाजता',
    LLLL: 'dddd, D MMMM YYYY, A h:mm वाजता'
  },
  calendar: {
    sameDay: '[आज] LT',
    nextDay: '[उद्या] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[काल] LT',
    lastWeek: '[मागील] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sमध्ये',
    past: '%sपूर्वी',
    s: relativeTimeMr,
    ss: relativeTimeMr,
    m: relativeTimeMr,
    mm: relativeTimeMr,
    h: relativeTimeMr,
    hh: relativeTimeMr,
    d: relativeTimeMr,
    dd: relativeTimeMr,
    M: relativeTimeMr,
    MM: relativeTimeMr,
    y: relativeTimeMr,
    yy: relativeTimeMr
  },
  preparse: function preparse(string) {
    return string.replace(/[१२३४५६७८९०]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'पहाटे' || meridiem === 'सकाळी') {
      return hour;
    } else if (meridiem === 'दुपारी' || meridiem === 'सायंकाळी' || meridiem === 'रात्री') {
      return hour >= 12 ? hour : hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour >= 0 && hour < 6) {
      return 'पहाटे';
    } else if (hour < 12) {
      return 'सकाळी';
    } else if (hour < 17) {
      return 'दुपारी';
    } else if (hour < 20) {
      return 'सायंकाळी';
    } else {
      return 'रात्री';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ms-my.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ms-my.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ms-my', {
  months: 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
  monthsShort: 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
  weekdays: 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
  weekdaysShort: 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
  weekdaysMin: 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /pagi|tengahari|petang|malam/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'pagi') {
      return hour;
    } else if (meridiem === 'tengahari') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'petang' || meridiem === 'malam') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'pagi';
    } else if (hours < 15) {
      return 'tengahari';
    } else if (hours < 19) {
      return 'petang';
    } else {
      return 'malam';
    }
  },
  calendar: {
    sameDay: '[Hari ini pukul] LT',
    nextDay: '[Esok pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kelmarin pukul] LT',
    lastWeek: 'dddd [lepas pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dalam %s',
    past: '%s yang lepas',
    s: 'beberapa saat',
    ss: '%d saat',
    m: 'seminit',
    mm: '%d minit',
    h: 'sejam',
    hh: '%d jam',
    d: 'sehari',
    dd: '%d hari',
    M: 'sebulan',
    MM: '%d bulan',
    y: 'setahun',
    yy: '%d tahun'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ms.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ms.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ms', {
  months: 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
  monthsShort: 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
  weekdays: 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
  weekdaysShort: 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
  weekdaysMin: 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /pagi|tengahari|petang|malam/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'pagi') {
      return hour;
    } else if (meridiem === 'tengahari') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'petang' || meridiem === 'malam') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'pagi';
    } else if (hours < 15) {
      return 'tengahari';
    } else if (hours < 19) {
      return 'petang';
    } else {
      return 'malam';
    }
  },
  calendar: {
    sameDay: '[Hari ini pukul] LT',
    nextDay: '[Esok pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kelmarin pukul] LT',
    lastWeek: 'dddd [lepas pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dalam %s',
    past: '%s yang lepas',
    s: 'beberapa saat',
    ss: '%d saat',
    m: 'seminit',
    mm: '%d minit',
    h: 'sejam',
    hh: '%d jam',
    d: 'sehari',
    dd: '%d hari',
    M: 'sebulan',
    MM: '%d bulan',
    y: 'setahun',
    yy: '%d tahun'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mt.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mt.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mt', {
  months: 'Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru'.split('_'),
  monthsShort: 'Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ'.split('_'),
  weekdays: 'Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt'.split('_'),
  weekdaysShort: 'Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib'.split('_'),
  weekdaysMin: 'Ħa_Tn_Tl_Er_Ħa_Ġi_Si'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Illum fil-]LT',
    nextDay: '[Għada fil-]LT',
    nextWeek: 'dddd [fil-]LT',
    lastDay: '[Il-bieraħ fil-]LT',
    lastWeek: 'dddd [li għadda] [fil-]LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'f’ %s',
    past: '%s ilu',
    s: 'ftit sekondi',
    ss: '%d sekondi',
    m: 'minuta',
    mm: '%d minuti',
    h: 'siegħa',
    hh: '%d siegħat',
    d: 'ġurnata',
    dd: '%d ġranet',
    M: 'xahar',
    MM: '%d xhur',
    y: 'sena',
    yy: '%d sni'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/my.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/my.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '၁',
  2: '၂',
  3: '၃',
  4: '၄',
  5: '၅',
  6: '၆',
  7: '၇',
  8: '၈',
  9: '၉',
  0: '၀'
},
    numberMap = {
  '၁': '1',
  '၂': '2',
  '၃': '3',
  '၄': '4',
  '၅': '5',
  '၆': '6',
  '၇': '7',
  '၈': '8',
  '၉': '9',
  '၀': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('my', {
  months: 'ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ'.split('_'),
  monthsShort: 'ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ'.split('_'),
  weekdays: 'တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ'.split('_'),
  weekdaysShort: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),
  weekdaysMin: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[ယနေ.] LT [မှာ]',
    nextDay: '[မနက်ဖြန်] LT [မှာ]',
    nextWeek: 'dddd LT [မှာ]',
    lastDay: '[မနေ.က] LT [မှာ]',
    lastWeek: '[ပြီးခဲ့သော] dddd LT [မှာ]',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'လာမည့် %s မှာ',
    past: 'လွန်ခဲ့သော %s က',
    s: 'စက္ကန်.အနည်းငယ်',
    ss: '%d စက္ကန့်',
    m: 'တစ်မိနစ်',
    mm: '%d မိနစ်',
    h: 'တစ်နာရီ',
    hh: '%d နာရီ',
    d: 'တစ်ရက်',
    dd: '%d ရက်',
    M: 'တစ်လ',
    MM: '%d လ',
    y: 'တစ်နှစ်',
    yy: '%d နှစ်'
  },
  preparse: function preparse(string) {
    return string.replace(/[၁၂၃၄၅၆၇၈၉၀]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nb.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/nb.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nb', {
  months: 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
  monthsShort: 'jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),
  monthsParseExact: true,
  weekdays: 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
  weekdaysShort: 'sø._ma._ti._on._to._fr._lø.'.split('_'),
  weekdaysMin: 'sø_ma_ti_on_to_fr_lø'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY [kl.] HH:mm',
    LLLL: 'dddd D. MMMM YYYY [kl.] HH:mm'
  },
  calendar: {
    sameDay: '[i dag kl.] LT',
    nextDay: '[i morgen kl.] LT',
    nextWeek: 'dddd [kl.] LT',
    lastDay: '[i går kl.] LT',
    lastWeek: '[forrige] dddd [kl.] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: '%s siden',
    s: 'noen sekunder',
    ss: '%d sekunder',
    m: 'ett minutt',
    mm: '%d minutter',
    h: 'en time',
    hh: '%d timer',
    d: 'en dag',
    dd: '%d dager',
    w: 'en uke',
    ww: '%d uker',
    M: 'en måned',
    MM: '%d måneder',
    y: 'ett år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ne.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ne.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '१',
  2: '२',
  3: '३',
  4: '४',
  5: '५',
  6: '६',
  7: '७',
  8: '८',
  9: '९',
  0: '०'
},
    numberMap = {
  '१': '1',
  '२': '2',
  '३': '3',
  '४': '4',
  '५': '5',
  '६': '6',
  '७': '7',
  '८': '8',
  '९': '9',
  '०': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ne', {
  months: 'जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर'.split('_'),
  monthsShort: 'जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.'.split('_'),
  monthsParseExact: true,
  weekdays: 'आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार'.split('_'),
  weekdaysShort: 'आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.'.split('_'),
  weekdaysMin: 'आ._सो._मं._बु._बि._शु._श.'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'Aको h:mm बजे',
    LTS: 'Aको h:mm:ss बजे',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, Aको h:mm बजे',
    LLLL: 'dddd, D MMMM YYYY, Aको h:mm बजे'
  },
  preparse: function preparse(string) {
    return string.replace(/[१२३४५६७८९०]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /राति|बिहान|दिउँसो|साँझ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'राति') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'बिहान') {
      return hour;
    } else if (meridiem === 'दिउँसो') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'साँझ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 3) {
      return 'राति';
    } else if (hour < 12) {
      return 'बिहान';
    } else if (hour < 16) {
      return 'दिउँसो';
    } else if (hour < 20) {
      return 'साँझ';
    } else {
      return 'राति';
    }
  },
  calendar: {
    sameDay: '[आज] LT',
    nextDay: '[भोलि] LT',
    nextWeek: '[आउँदो] dddd[,] LT',
    lastDay: '[हिजो] LT',
    lastWeek: '[गएको] dddd[,] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sमा',
    past: '%s अगाडि',
    s: 'केही क्षण',
    ss: '%d सेकेण्ड',
    m: 'एक मिनेट',
    mm: '%d मिनेट',
    h: 'एक घण्टा',
    hh: '%d घण्टा',
    d: 'एक दिन',
    dd: '%d दिन',
    M: 'एक महिना',
    MM: '%d महिना',
    y: 'एक बर्ष',
    yy: '%d बर्ष'
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nl-be.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/nl-be.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),
    monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_'),
    monthsParse = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i],
    monthsRegex = /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nl-be', {
  months: 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortWithDots;
    } else if (/-MMM-/.test(format)) {
      return monthsShortWithoutDots[m.month()];
    } else {
      return monthsShortWithDots[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,
  monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
  weekdaysShort: 'zo._ma._di._wo._do._vr._za.'.split('_'),
  weekdaysMin: 'zo_ma_di_wo_do_vr_za'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[vandaag om] LT',
    nextDay: '[morgen om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[gisteren om] LT',
    lastWeek: '[afgelopen] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'over %s',
    past: '%s geleden',
    s: 'een paar seconden',
    ss: '%d seconden',
    m: 'één minuut',
    mm: '%d minuten',
    h: 'één uur',
    hh: '%d uur',
    d: 'één dag',
    dd: '%d dagen',
    M: 'één maand',
    MM: '%d maanden',
    y: 'één jaar',
    yy: '%d jaar'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/nl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),
    monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_'),
    monthsParse = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i],
    monthsRegex = /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nl', {
  months: 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortWithDots;
    } else if (/-MMM-/.test(format)) {
      return monthsShortWithoutDots[m.month()];
    } else {
      return monthsShortWithDots[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,
  monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
  weekdaysShort: 'zo._ma._di._wo._do._vr._za.'.split('_'),
  weekdaysMin: 'zo_ma_di_wo_do_vr_za'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[vandaag om] LT',
    nextDay: '[morgen om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[gisteren om] LT',
    lastWeek: '[afgelopen] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'over %s',
    past: '%s geleden',
    s: 'een paar seconden',
    ss: '%d seconden',
    m: 'één minuut',
    mm: '%d minuten',
    h: 'één uur',
    hh: '%d uur',
    d: 'één dag',
    dd: '%d dagen',
    w: 'één week',
    ww: '%d weken',
    M: 'één maand',
    MM: '%d maanden',
    y: 'één jaar',
    yy: '%d jaar'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/nn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nn', {
  months: 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
  monthsShort: 'jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),
  monthsParseExact: true,
  weekdays: 'sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag'.split('_'),
  weekdaysShort: 'su._må._ty._on._to._fr._lau.'.split('_'),
  weekdaysMin: 'su_må_ty_on_to_fr_la'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY [kl.] H:mm',
    LLLL: 'dddd D. MMMM YYYY [kl.] HH:mm'
  },
  calendar: {
    sameDay: '[I dag klokka] LT',
    nextDay: '[I morgon klokka] LT',
    nextWeek: 'dddd [klokka] LT',
    lastDay: '[I går klokka] LT',
    lastWeek: '[Føregåande] dddd [klokka] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: '%s sidan',
    s: 'nokre sekund',
    ss: '%d sekund',
    m: 'eit minutt',
    mm: '%d minutt',
    h: 'ein time',
    hh: '%d timar',
    d: 'ein dag',
    dd: '%d dagar',
    w: 'ei veke',
    ww: '%d veker',
    M: 'ein månad',
    MM: '%d månader',
    y: 'eit år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/oc-lnc.js":
/*!***************************************************!*\
  !*** ./node_modules/moment/dist/locale/oc-lnc.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('oc-lnc', {
  months: {
    standalone: 'genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre'.split('_'),
    format: "de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split('_'),
    isFormat: /D[oD]?(\s)+MMMM/
  },
  monthsShort: 'gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte'.split('_'),
  weekdaysShort: 'dg._dl._dm._dc._dj._dv._ds.'.split('_'),
  weekdaysMin: 'dg_dl_dm_dc_dj_dv_ds'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM [de] YYYY',
    ll: 'D MMM YYYY',
    LLL: 'D MMMM [de] YYYY [a] H:mm',
    lll: 'D MMM YYYY, H:mm',
    LLLL: 'dddd D MMMM [de] YYYY [a] H:mm',
    llll: 'ddd D MMM YYYY, H:mm'
  },
  calendar: {
    sameDay: '[uèi a] LT',
    nextDay: '[deman a] LT',
    nextWeek: 'dddd [a] LT',
    lastDay: '[ièr a] LT',
    lastWeek: 'dddd [passat a] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: "d'aquí %s",
    past: 'fa %s',
    s: 'unas segondas',
    ss: '%d segondas',
    m: 'una minuta',
    mm: '%d minutas',
    h: 'una ora',
    hh: '%d oras',
    d: 'un jorn',
    dd: '%d jorns',
    M: 'un mes',
    MM: '%d meses',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(r|n|t|è|a)/,
  ordinal: function ordinal(number, period) {
    var output = number === 1 ? 'r' : number === 2 ? 'n' : number === 3 ? 'r' : number === 4 ? 't' : 'è';

    if (period === 'w' || period === 'W') {
      output = 'a';
    }

    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pa-in.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/pa-in.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '੧',
  2: '੨',
  3: '੩',
  4: '੪',
  5: '੫',
  6: '੬',
  7: '੭',
  8: '੮',
  9: '੯',
  0: '੦'
},
    numberMap = {
  '੧': '1',
  '੨': '2',
  '੩': '3',
  '੪': '4',
  '੫': '5',
  '੬': '6',
  '੭': '7',
  '੮': '8',
  '੯': '9',
  '੦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pa-in', {
  months: 'ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ'.split('_'),
  monthsShort: 'ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ'.split('_'),
  weekdays: 'ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ'.split('_'),
  weekdaysShort: 'ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ'.split('_'),
  weekdaysMin: 'ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm ਵਜੇ',
    LTS: 'A h:mm:ss ਵਜੇ',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm ਵਜੇ',
    LLLL: 'dddd, D MMMM YYYY, A h:mm ਵਜੇ'
  },
  calendar: {
    sameDay: '[ਅਜ] LT',
    nextDay: '[ਕਲ] LT',
    nextWeek: '[ਅਗਲਾ] dddd, LT',
    lastDay: '[ਕਲ] LT',
    lastWeek: '[ਪਿਛਲੇ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ਵਿੱਚ',
    past: '%s ਪਿਛਲੇ',
    s: 'ਕੁਝ ਸਕਿੰਟ',
    ss: '%d ਸਕਿੰਟ',
    m: 'ਇਕ ਮਿੰਟ',
    mm: '%d ਮਿੰਟ',
    h: 'ਇੱਕ ਘੰਟਾ',
    hh: '%d ਘੰਟੇ',
    d: 'ਇੱਕ ਦਿਨ',
    dd: '%d ਦਿਨ',
    M: 'ਇੱਕ ਮਹੀਨਾ',
    MM: '%d ਮਹੀਨੇ',
    y: 'ਇੱਕ ਸਾਲ',
    yy: '%d ਸਾਲ'
  },
  preparse: function preparse(string) {
    return string.replace(/[੧੨੩੪੫੬੭੮੯੦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'ਰਾਤ') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ਸਵੇਰ') {
      return hour;
    } else if (meridiem === 'ਦੁਪਹਿਰ') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'ਸ਼ਾਮ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ਰਾਤ';
    } else if (hour < 10) {
      return 'ਸਵੇਰ';
    } else if (hour < 17) {
      return 'ਦੁਪਹਿਰ';
    } else if (hour < 20) {
      return 'ਸ਼ਾਮ';
    } else {
      return 'ਰਾਤ';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/pl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsNominative = 'styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień'.split('_'),
    monthsSubjective = 'stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia'.split('_'),
    monthsParse = [/^sty/i, /^lut/i, /^mar/i, /^kwi/i, /^maj/i, /^cze/i, /^lip/i, /^sie/i, /^wrz/i, /^paź/i, /^lis/i, /^gru/i];

function plural(n) {
  return n % 10 < 5 && n % 10 > 1 && ~~(n / 10) % 10 !== 1;
}

function translate(number, withoutSuffix, key) {
  var result = number + ' ';

  switch (key) {
    case 'ss':
      return result + (plural(number) ? 'sekundy' : 'sekund');

    case 'm':
      return withoutSuffix ? 'minuta' : 'minutę';

    case 'mm':
      return result + (plural(number) ? 'minuty' : 'minut');

    case 'h':
      return withoutSuffix ? 'godzina' : 'godzinę';

    case 'hh':
      return result + (plural(number) ? 'godziny' : 'godzin');

    case 'ww':
      return result + (plural(number) ? 'tygodnie' : 'tygodni');

    case 'MM':
      return result + (plural(number) ? 'miesiące' : 'miesięcy');

    case 'yy':
      return result + (plural(number) ? 'lata' : 'lat');
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pl', {
  months: function months(momentToFormat, format) {
    if (!momentToFormat) {
      return monthsNominative;
    } else if (/D MMMM/.test(format)) {
      return monthsSubjective[momentToFormat.month()];
    } else {
      return monthsNominative[momentToFormat.month()];
    }
  },
  monthsShort: 'sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru'.split('_'),
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota'.split('_'),
  weekdaysShort: 'ndz_pon_wt_śr_czw_pt_sob'.split('_'),
  weekdaysMin: 'Nd_Pn_Wt_Śr_Cz_Pt_So'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Dziś o] LT',
    nextDay: '[Jutro o] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[W niedzielę o] LT';

        case 2:
          return '[We wtorek o] LT';

        case 3:
          return '[W środę o] LT';

        case 6:
          return '[W sobotę o] LT';

        default:
          return '[W] dddd [o] LT';
      }
    },
    lastDay: '[Wczoraj o] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[W zeszłą niedzielę o] LT';

        case 3:
          return '[W zeszłą środę o] LT';

        case 6:
          return '[W zeszłą sobotę o] LT';

        default:
          return '[W zeszły] dddd [o] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: '%s temu',
    s: 'kilka sekund',
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: '1 dzień',
    dd: '%d dni',
    w: 'tydzień',
    ww: translate,
    M: 'miesiąc',
    MM: translate,
    y: 'rok',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pt-br.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/pt-br.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pt-br', {
  months: 'janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),
  monthsShort: 'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),
  weekdays: 'domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado'.split('_'),
  weekdaysShort: 'dom_seg_ter_qua_qui_sex_sáb'.split('_'),
  weekdaysMin: 'do_2ª_3ª_4ª_5ª_6ª_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY [às] HH:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'
  },
  calendar: {
    sameDay: '[Hoje às] LT',
    nextDay: '[Amanhã às] LT',
    nextWeek: 'dddd [às] LT',
    lastDay: '[Ontem às] LT',
    lastWeek: function lastWeek() {
      return this.day() === 0 || this.day() === 6 ? '[Último] dddd [às] LT' : '[Última] dddd [às] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'em %s',
    past: 'há %s',
    s: 'poucos segundos',
    ss: '%d segundos',
    m: 'um minuto',
    mm: '%d minutos',
    h: 'uma hora',
    hh: '%d horas',
    d: 'um dia',
    dd: '%d dias',
    M: 'um mês',
    MM: '%d meses',
    y: 'um ano',
    yy: '%d anos'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  invalidDate: 'Data inválida'
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pt.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/pt.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pt', {
  months: 'janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),
  monthsShort: 'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),
  weekdays: 'Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado'.split('_'),
  weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),
  weekdaysMin: 'Do_2ª_3ª_4ª_5ª_6ª_Sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY HH:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Hoje às] LT',
    nextDay: '[Amanhã às] LT',
    nextWeek: 'dddd [às] LT',
    lastDay: '[Ontem às] LT',
    lastWeek: function lastWeek() {
      return this.day() === 0 || this.day() === 6 ? '[Último] dddd [às] LT' : '[Última] dddd [às] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'em %s',
    past: 'há %s',
    s: 'segundos',
    ss: '%d segundos',
    m: 'um minuto',
    mm: '%d minutos',
    h: 'uma hora',
    hh: '%d horas',
    d: 'um dia',
    dd: '%d dias',
    w: 'uma semana',
    ww: '%d semanas',
    M: 'um mês',
    MM: '%d meses',
    y: 'um ano',
    yy: '%d anos'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ro.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ro.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: 'secunde',
    mm: 'minute',
    hh: 'ore',
    dd: 'zile',
    ww: 'săptămâni',
    MM: 'luni',
    yy: 'ani'
  },
      separator = ' ';

  if (number % 100 >= 20 || number >= 100 && number % 100 === 0) {
    separator = ' de ';
  }

  return number + separator + format[key];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ro', {
  months: 'ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie'.split('_'),
  monthsShort: 'ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'duminică_luni_marți_miercuri_joi_vineri_sâmbătă'.split('_'),
  weekdaysShort: 'Dum_Lun_Mar_Mie_Joi_Vin_Sâm'.split('_'),
  weekdaysMin: 'Du_Lu_Ma_Mi_Jo_Vi_Sâ'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY H:mm',
    LLLL: 'dddd, D MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[azi la] LT',
    nextDay: '[mâine la] LT',
    nextWeek: 'dddd [la] LT',
    lastDay: '[ieri la] LT',
    lastWeek: '[fosta] dddd [la] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'peste %s',
    past: '%s în urmă',
    s: 'câteva secunde',
    ss: relativeTimeWithPlural,
    m: 'un minut',
    mm: relativeTimeWithPlural,
    h: 'o oră',
    hh: relativeTimeWithPlural,
    d: 'o zi',
    dd: relativeTimeWithPlural,
    w: 'o săptămână',
    ww: relativeTimeWithPlural,
    M: 'o lună',
    MM: relativeTimeWithPlural,
    y: 'un an',
    yy: relativeTimeWithPlural
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ru.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ru.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(word, num) {
  var forms = word.split('_');
  return num % 10 === 1 && num % 100 !== 11 ? forms[0] : num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2];
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: withoutSuffix ? 'секунда_секунды_секунд' : 'секунду_секунды_секунд',
    mm: withoutSuffix ? 'минута_минуты_минут' : 'минуту_минуты_минут',
    hh: 'час_часа_часов',
    dd: 'день_дня_дней',
    ww: 'неделя_недели_недель',
    MM: 'месяц_месяца_месяцев',
    yy: 'год_года_лет'
  };

  if (key === 'm') {
    return withoutSuffix ? 'минута' : 'минуту';
  } else {
    return number + ' ' + plural(format[key], +number);
  }
}

var monthsParse = [/^янв/i, /^фев/i, /^мар/i, /^апр/i, /^ма[йя]/i, /^июн/i, /^июл/i, /^авг/i, /^сен/i, /^окт/i, /^ноя/i, /^дек/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ru', {
  months: {
    format: 'января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря'.split('_'),
    standalone: 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_')
  },
  monthsShort: {
    format: 'янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.'.split('_'),
    standalone: 'янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.'.split('_')
  },
  weekdays: {
    standalone: 'воскресенье_понедельник_вторник_среда_четверг_пятница_суббота'.split('_'),
    format: 'воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу'.split('_'),
    isFormat: /\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/
  },
  weekdaysShort: 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
  weekdaysMin: 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  monthsRegex: /^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,
  monthsShortRegex: /^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,
  monthsStrictRegex: /^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,
  monthsShortStrictRegex: /^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY г.',
    LLL: 'D MMMM YYYY г., H:mm',
    LLLL: 'dddd, D MMMM YYYY г., H:mm'
  },
  calendar: {
    sameDay: '[Сегодня, в] LT',
    nextDay: '[Завтра, в] LT',
    lastDay: '[Вчера, в] LT',
    nextWeek: function nextWeek(now) {
      if (now.week() !== this.week()) {
        switch (this.day()) {
          case 0:
            return '[В следующее] dddd, [в] LT';

          case 1:
          case 2:
          case 4:
            return '[В следующий] dddd, [в] LT';

          case 3:
          case 5:
          case 6:
            return '[В следующую] dddd, [в] LT';
        }
      } else {
        if (this.day() === 2) {
          return '[Во] dddd, [в] LT';
        } else {
          return '[В] dddd, [в] LT';
        }
      }
    },
    lastWeek: function lastWeek(now) {
      if (now.week() !== this.week()) {
        switch (this.day()) {
          case 0:
            return '[В прошлое] dddd, [в] LT';

          case 1:
          case 2:
          case 4:
            return '[В прошлый] dddd, [в] LT';

          case 3:
          case 5:
          case 6:
            return '[В прошлую] dddd, [в] LT';
        }
      } else {
        if (this.day() === 2) {
          return '[Во] dddd, [в] LT';
        } else {
          return '[В] dddd, [в] LT';
        }
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'через %s',
    past: '%s назад',
    s: 'несколько секунд',
    ss: relativeTimeWithPlural,
    m: relativeTimeWithPlural,
    mm: relativeTimeWithPlural,
    h: 'час',
    hh: relativeTimeWithPlural,
    d: 'день',
    dd: relativeTimeWithPlural,
    w: 'неделя',
    ww: relativeTimeWithPlural,
    M: 'месяц',
    MM: relativeTimeWithPlural,
    y: 'год',
    yy: relativeTimeWithPlural
  },
  meridiemParse: /ночи|утра|дня|вечера/i,
  isPM: function isPM(input) {
    return /^(дня|вечера)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ночи';
    } else if (hour < 12) {
      return 'утра';
    } else if (hour < 17) {
      return 'дня';
    } else {
      return 'вечера';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(й|го|я)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'M':
      case 'd':
      case 'DDD':
        return number + '-й';

      case 'D':
        return number + '-го';

      case 'w':
      case 'W':
        return number + '-я';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sd.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sd.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['جنوري', 'فيبروري', 'مارچ', 'اپريل', 'مئي', 'جون', 'جولاءِ', 'آگسٽ', 'سيپٽمبر', 'آڪٽوبر', 'نومبر', 'ڊسمبر'],
    days = ['آچر', 'سومر', 'اڱارو', 'اربع', 'خميس', 'جمع', 'ڇنڇر'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sd', {
  months: months,
  monthsShort: months,
  weekdays: days,
  weekdaysShort: days,
  weekdaysMin: days,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd، D MMMM YYYY HH:mm'
  },
  meridiemParse: /صبح|شام/,
  isPM: function isPM(input) {
    return 'شام' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'صبح';
    }

    return 'شام';
  },
  calendar: {
    sameDay: '[اڄ] LT',
    nextDay: '[سڀاڻي] LT',
    nextWeek: 'dddd [اڳين هفتي تي] LT',
    lastDay: '[ڪالهه] LT',
    lastWeek: '[گزريل هفتي] dddd [تي] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s پوء',
    past: '%s اڳ',
    s: 'چند سيڪنڊ',
    ss: '%d سيڪنڊ',
    m: 'هڪ منٽ',
    mm: '%d منٽ',
    h: 'هڪ ڪلاڪ',
    hh: '%d ڪلاڪ',
    d: 'هڪ ڏينهن',
    dd: '%d ڏينهن',
    M: 'هڪ مهينو',
    MM: '%d مهينا',
    y: 'هڪ سال',
    yy: '%d سال'
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/se.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/se.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('se', {
  months: 'ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu'.split('_'),
  monthsShort: 'ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov'.split('_'),
  weekdays: 'sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat'.split('_'),
  weekdaysShort: 'sotn_vuos_maŋ_gask_duor_bear_láv'.split('_'),
  weekdaysMin: 's_v_m_g_d_b_L'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'MMMM D. [b.] YYYY',
    LLL: 'MMMM D. [b.] YYYY [ti.] HH:mm',
    LLLL: 'dddd, MMMM D. [b.] YYYY [ti.] HH:mm'
  },
  calendar: {
    sameDay: '[otne ti] LT',
    nextDay: '[ihttin ti] LT',
    nextWeek: 'dddd [ti] LT',
    lastDay: '[ikte ti] LT',
    lastWeek: '[ovddit] dddd [ti] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s geažes',
    past: 'maŋit %s',
    s: 'moadde sekunddat',
    ss: '%d sekunddat',
    m: 'okta minuhta',
    mm: '%d minuhtat',
    h: 'okta diimmu',
    hh: '%d diimmut',
    d: 'okta beaivi',
    dd: '%d beaivvit',
    M: 'okta mánnu',
    MM: '%d mánut',
    y: 'okta jahki',
    yy: '%d jagit'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/si.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/si.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('si', {
  months: 'ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්'.split('_'),
  monthsShort: 'ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ'.split('_'),
  weekdays: 'ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා'.split('_'),
  weekdaysShort: 'ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන'.split('_'),
  weekdaysMin: 'ඉ_ස_අ_බ_බ්‍ර_සි_සෙ'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'a h:mm',
    LTS: 'a h:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY MMMM D',
    LLL: 'YYYY MMMM D, a h:mm',
    LLLL: 'YYYY MMMM D [වැනි] dddd, a h:mm:ss'
  },
  calendar: {
    sameDay: '[අද] LT[ට]',
    nextDay: '[හෙට] LT[ට]',
    nextWeek: 'dddd LT[ට]',
    lastDay: '[ඊයේ] LT[ට]',
    lastWeek: '[පසුගිය] dddd LT[ට]',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sකින්',
    past: '%sකට පෙර',
    s: 'තත්පර කිහිපය',
    ss: 'තත්පර %d',
    m: 'මිනිත්තුව',
    mm: 'මිනිත්තු %d',
    h: 'පැය',
    hh: 'පැය %d',
    d: 'දිනය',
    dd: 'දින %d',
    M: 'මාසය',
    MM: 'මාස %d',
    y: 'වසර',
    yy: 'වසර %d'
  },
  dayOfMonthOrdinalParse: /\d{1,2} වැනි/,
  ordinal: function ordinal(number) {
    return number + ' වැනි';
  },
  meridiemParse: /පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,
  isPM: function isPM(input) {
    return input === 'ප.ව.' || input === 'පස් වරු';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? 'ප.ව.' : 'පස් වරු';
    } else {
      return isLower ? 'පෙ.ව.' : 'පෙර වරු';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = 'január_február_marec_apríl_máj_jún_júl_august_september_október_november_december'.split('_'),
    monthsShort = 'jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec'.split('_');

function plural(n) {
  return n > 1 && n < 5;
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'pár sekúnd' : 'pár sekundami';

    case 'ss':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'sekundy' : 'sekúnd');
      } else {
        return result + 'sekundami';
      }

    case 'm':
      return withoutSuffix ? 'minúta' : isFuture ? 'minútu' : 'minútou';

    case 'mm':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'minúty' : 'minút');
      } else {
        return result + 'minútami';
      }

    case 'h':
      return withoutSuffix ? 'hodina' : isFuture ? 'hodinu' : 'hodinou';

    case 'hh':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'hodiny' : 'hodín');
      } else {
        return result + 'hodinami';
      }

    case 'd':
      return withoutSuffix || isFuture ? 'deň' : 'dňom';

    case 'dd':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'dni' : 'dní');
      } else {
        return result + 'dňami';
      }

    case 'M':
      return withoutSuffix || isFuture ? 'mesiac' : 'mesiacom';

    case 'MM':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'mesiace' : 'mesiacov');
      } else {
        return result + 'mesiacmi';
      }

    case 'y':
      return withoutSuffix || isFuture ? 'rok' : 'rokom';

    case 'yy':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'roky' : 'rokov');
      } else {
        return result + 'rokmi';
      }

  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sk', {
  months: months,
  monthsShort: monthsShort,
  weekdays: 'nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota'.split('_'),
  weekdaysShort: 'ne_po_ut_st_št_pi_so'.split('_'),
  weekdaysMin: 'ne_po_ut_st_št_pi_so'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[dnes o] LT',
    nextDay: '[zajtra o] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[v nedeľu o] LT';

        case 1:
        case 2:
          return '[v] dddd [o] LT';

        case 3:
          return '[v stredu o] LT';

        case 4:
          return '[vo štvrtok o] LT';

        case 5:
          return '[v piatok o] LT';

        case 6:
          return '[v sobotu o] LT';
      }
    },
    lastDay: '[včera o] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[minulú nedeľu o] LT';

        case 1:
        case 2:
          return '[minulý] dddd [o] LT';

        case 3:
          return '[minulú stredu o] LT';

        case 4:
        case 5:
          return '[minulý] dddd [o] LT';

        case 6:
          return '[minulú sobotu o] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'pred %s',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'nekaj sekund' : 'nekaj sekundami';

    case 'ss':
      if (number === 1) {
        result += withoutSuffix ? 'sekundo' : 'sekundi';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'sekundi' : 'sekundah';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'sekunde' : 'sekundah';
      } else {
        result += 'sekund';
      }

      return result;

    case 'm':
      return withoutSuffix ? 'ena minuta' : 'eno minuto';

    case 'mm':
      if (number === 1) {
        result += withoutSuffix ? 'minuta' : 'minuto';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'minuti' : 'minutama';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'minute' : 'minutami';
      } else {
        result += withoutSuffix || isFuture ? 'minut' : 'minutami';
      }

      return result;

    case 'h':
      return withoutSuffix ? 'ena ura' : 'eno uro';

    case 'hh':
      if (number === 1) {
        result += withoutSuffix ? 'ura' : 'uro';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'uri' : 'urama';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'ure' : 'urami';
      } else {
        result += withoutSuffix || isFuture ? 'ur' : 'urami';
      }

      return result;

    case 'd':
      return withoutSuffix || isFuture ? 'en dan' : 'enim dnem';

    case 'dd':
      if (number === 1) {
        result += withoutSuffix || isFuture ? 'dan' : 'dnem';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'dni' : 'dnevoma';
      } else {
        result += withoutSuffix || isFuture ? 'dni' : 'dnevi';
      }

      return result;

    case 'M':
      return withoutSuffix || isFuture ? 'en mesec' : 'enim mesecem';

    case 'MM':
      if (number === 1) {
        result += withoutSuffix || isFuture ? 'mesec' : 'mesecem';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'meseca' : 'mesecema';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'mesece' : 'meseci';
      } else {
        result += withoutSuffix || isFuture ? 'mesecev' : 'meseci';
      }

      return result;

    case 'y':
      return withoutSuffix || isFuture ? 'eno leto' : 'enim letom';

    case 'yy':
      if (number === 1) {
        result += withoutSuffix || isFuture ? 'leto' : 'letom';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'leti' : 'letoma';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'leta' : 'leti';
      } else {
        result += withoutSuffix || isFuture ? 'let' : 'leti';
      }

      return result;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sl', {
  months: 'januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota'.split('_'),
  weekdaysShort: 'ned._pon._tor._sre._čet._pet._sob.'.split('_'),
  weekdaysMin: 'ne_po_to_sr_če_pe_so'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD. MM. YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danes ob] LT',
    nextDay: '[jutri ob] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[v] [nedeljo] [ob] LT';

        case 3:
          return '[v] [sredo] [ob] LT';

        case 6:
          return '[v] [soboto] [ob] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[v] dddd [ob] LT';
      }
    },
    lastDay: '[včeraj ob] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[prejšnjo] [nedeljo] [ob] LT';

        case 3:
          return '[prejšnjo] [sredo] [ob] LT';

        case 6:
          return '[prejšnjo] [soboto] [ob] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[prejšnji] dddd [ob] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'čez %s',
    past: 'pred %s',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sq.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sq.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sq', {
  months: 'Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor'.split('_'),
  monthsShort: 'Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj'.split('_'),
  weekdays: 'E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë'.split('_'),
  weekdaysShort: 'Die_Hën_Mar_Mër_Enj_Pre_Sht'.split('_'),
  weekdaysMin: 'D_H_Ma_Më_E_P_Sh'.split('_'),
  weekdaysParseExact: true,
  meridiemParse: /PD|MD/,
  isPM: function isPM(input) {
    return input.charAt(0) === 'M';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    return hours < 12 ? 'PD' : 'MD';
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Sot në] LT',
    nextDay: '[Nesër në] LT',
    nextWeek: 'dddd [në] LT',
    lastDay: '[Dje në] LT',
    lastWeek: 'dddd [e kaluar në] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'në %s',
    past: '%s më parë',
    s: 'disa sekonda',
    ss: '%d sekonda',
    m: 'një minutë',
    mm: '%d minuta',
    h: 'një orë',
    hh: '%d orë',
    d: 'një ditë',
    dd: '%d ditë',
    M: 'një muaj',
    MM: '%d muaj',
    y: 'një vit',
    yy: '%d vite'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sr-cyrl.js":
/*!****************************************************!*\
  !*** ./node_modules/moment/dist/locale/sr-cyrl.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var translator = {
  words: {
    ss: ['секунда', 'секунде', 'секунди'],
    m: ['један минут', 'једне минуте'],
    mm: ['минут', 'минуте', 'минута'],
    h: ['један сат', 'једног сата'],
    hh: ['сат', 'сата', 'сати'],
    dd: ['дан', 'дана', 'дана'],
    MM: ['месец', 'месеца', 'месеци'],
    yy: ['година', 'године', 'година']
  },
  correctGrammaticalCase: function correctGrammaticalCase(number, wordKey) {
    return number === 1 ? wordKey[0] : number >= 2 && number <= 4 ? wordKey[1] : wordKey[2];
  },
  translate: function translate(number, withoutSuffix, key) {
    var wordKey = translator.words[key];

    if (key.length === 1) {
      return withoutSuffix ? wordKey[0] : wordKey[1];
    } else {
      return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sr-cyrl', {
  months: 'јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар'.split('_'),
  monthsShort: 'јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.'.split('_'),
  monthsParseExact: true,
  weekdays: 'недеља_понедељак_уторак_среда_четвртак_петак_субота'.split('_'),
  weekdaysShort: 'нед._пон._уто._сре._чет._пет._суб.'.split('_'),
  weekdaysMin: 'не_по_ут_ср_че_пе_су'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D. M. YYYY.',
    LL: 'D. MMMM YYYY.',
    LLL: 'D. MMMM YYYY. H:mm',
    LLLL: 'dddd, D. MMMM YYYY. H:mm'
  },
  calendar: {
    sameDay: '[данас у] LT',
    nextDay: '[сутра у] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[у] [недељу] [у] LT';

        case 3:
          return '[у] [среду] [у] LT';

        case 6:
          return '[у] [суботу] [у] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[у] dddd [у] LT';
      }
    },
    lastDay: '[јуче у] LT',
    lastWeek: function lastWeek() {
      var lastWeekDays = ['[прошле] [недеље] [у] LT', '[прошлог] [понедељка] [у] LT', '[прошлог] [уторка] [у] LT', '[прошле] [среде] [у] LT', '[прошлог] [четвртка] [у] LT', '[прошлог] [петка] [у] LT', '[прошле] [суботе] [у] LT'];
      return lastWeekDays[this.day()];
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'за %s',
    past: 'пре %s',
    s: 'неколико секунди',
    ss: translator.translate,
    m: translator.translate,
    mm: translator.translate,
    h: translator.translate,
    hh: translator.translate,
    d: 'дан',
    dd: translator.translate,
    M: 'месец',
    MM: translator.translate,
    y: 'годину',
    yy: translator.translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var translator = {
  words: {
    ss: ['sekunda', 'sekunde', 'sekundi'],
    m: ['jedan minut', 'jedne minute'],
    mm: ['minut', 'minute', 'minuta'],
    h: ['jedan sat', 'jednog sata'],
    hh: ['sat', 'sata', 'sati'],
    dd: ['dan', 'dana', 'dana'],
    MM: ['mesec', 'meseca', 'meseci'],
    yy: ['godina', 'godine', 'godina']
  },
  correctGrammaticalCase: function correctGrammaticalCase(number, wordKey) {
    return number === 1 ? wordKey[0] : number >= 2 && number <= 4 ? wordKey[1] : wordKey[2];
  },
  translate: function translate(number, withoutSuffix, key) {
    var wordKey = translator.words[key];

    if (key.length === 1) {
      return withoutSuffix ? wordKey[0] : wordKey[1];
    } else {
      return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sr', {
  months: 'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sre._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D. M. YYYY.',
    LL: 'D. MMMM YYYY.',
    LLL: 'D. MMMM YYYY. H:mm',
    LLLL: 'dddd, D. MMMM YYYY. H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedelju] [u] LT';

        case 3:
          return '[u] [sredu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[juče u] LT',
    lastWeek: function lastWeek() {
      var lastWeekDays = ['[prošle] [nedelje] [u] LT', '[prošlog] [ponedeljka] [u] LT', '[prošlog] [utorka] [u] LT', '[prošle] [srede] [u] LT', '[prošlog] [četvrtka] [u] LT', '[prošlog] [petka] [u] LT', '[prošle] [subote] [u] LT'];
      return lastWeekDays[this.day()];
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'pre %s',
    s: 'nekoliko sekundi',
    ss: translator.translate,
    m: translator.translate,
    mm: translator.translate,
    h: translator.translate,
    hh: translator.translate,
    d: 'dan',
    dd: translator.translate,
    M: 'mesec',
    MM: translator.translate,
    y: 'godinu',
    yy: translator.translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ss.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ss.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ss', {
  months: "Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split('_'),
  monthsShort: 'Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo'.split('_'),
  weekdays: 'Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo'.split('_'),
  weekdaysShort: 'Lis_Umb_Lsb_Les_Lsi_Lsh_Umg'.split('_'),
  weekdaysMin: 'Li_Us_Lb_Lt_Ls_Lh_Ug'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Namuhla nga] LT',
    nextDay: '[Kusasa nga] LT',
    nextWeek: 'dddd [nga] LT',
    lastDay: '[Itolo nga] LT',
    lastWeek: 'dddd [leliphelile] [nga] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'nga %s',
    past: 'wenteka nga %s',
    s: 'emizuzwana lomcane',
    ss: '%d mzuzwana',
    m: 'umzuzu',
    mm: '%d emizuzu',
    h: 'lihora',
    hh: '%d emahora',
    d: 'lilanga',
    dd: '%d emalanga',
    M: 'inyanga',
    MM: '%d tinyanga',
    y: 'umnyaka',
    yy: '%d iminyaka'
  },
  meridiemParse: /ekuseni|emini|entsambama|ebusuku/,
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'ekuseni';
    } else if (hours < 15) {
      return 'emini';
    } else if (hours < 19) {
      return 'entsambama';
    } else {
      return 'ebusuku';
    }
  },
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'ekuseni') {
      return hour;
    } else if (meridiem === 'emini') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'entsambama' || meridiem === 'ebusuku') {
      if (hour === 0) {
        return 0;
      }

      return hour + 12;
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: '%d',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sv', {
  months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
  monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
  weekdays: 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),
  weekdaysShort: 'sön_mån_tis_ons_tor_fre_lör'.split('_'),
  weekdaysMin: 'sö_må_ti_on_to_fr_lö'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [kl.] HH:mm',
    LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
    lll: 'D MMM YYYY HH:mm',
    llll: 'ddd D MMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Idag] LT',
    nextDay: '[Imorgon] LT',
    lastDay: '[Igår] LT',
    nextWeek: '[På] dddd LT',
    lastWeek: '[I] dddd[s] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: 'för %s sedan',
    s: 'några sekunder',
    ss: '%d sekunder',
    m: 'en minut',
    mm: '%d minuter',
    h: 'en timme',
    hh: '%d timmar',
    d: 'en dag',
    dd: '%d dagar',
    M: 'en månad',
    MM: '%d månader',
    y: 'ett år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(\:e|\:a)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? ':e' : b === 1 ? ':a' : b === 2 ? ':a' : b === 3 ? ':e' : ':e';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sw.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sw.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sw', {
  months: 'Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba'.split('_'),
  monthsShort: 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des'.split('_'),
  weekdays: 'Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi'.split('_'),
  weekdaysShort: 'Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos'.split('_'),
  weekdaysMin: 'J2_J3_J4_J5_Al_Ij_J1'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'hh:mm A',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[leo saa] LT',
    nextDay: '[kesho saa] LT',
    nextWeek: '[wiki ijayo] dddd [saat] LT',
    lastDay: '[jana] LT',
    lastWeek: '[wiki iliyopita] dddd [saat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s baadaye',
    past: 'tokea %s',
    s: 'hivi punde',
    ss: 'sekunde %d',
    m: 'dakika moja',
    mm: 'dakika %d',
    h: 'saa limoja',
    hh: 'masaa %d',
    d: 'siku moja',
    dd: 'siku %d',
    M: 'mwezi mmoja',
    MM: 'miezi %d',
    y: 'mwaka mmoja',
    yy: 'miaka %d'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ta.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ta.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '௧',
  2: '௨',
  3: '௩',
  4: '௪',
  5: '௫',
  6: '௬',
  7: '௭',
  8: '௮',
  9: '௯',
  0: '௦'
},
    numberMap = {
  '௧': '1',
  '௨': '2',
  '௩': '3',
  '௪': '4',
  '௫': '5',
  '௬': '6',
  '௭': '7',
  '௮': '8',
  '௯': '9',
  '௦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ta', {
  months: 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
  monthsShort: 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
  weekdays: 'ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை'.split('_'),
  weekdaysShort: 'ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி'.split('_'),
  weekdaysMin: 'ஞா_தி_செ_பு_வி_வெ_ச'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, HH:mm',
    LLLL: 'dddd, D MMMM YYYY, HH:mm'
  },
  calendar: {
    sameDay: '[இன்று] LT',
    nextDay: '[நாளை] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[நேற்று] LT',
    lastWeek: '[கடந்த வாரம்] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s இல்',
    past: '%s முன்',
    s: 'ஒரு சில விநாடிகள்',
    ss: '%d விநாடிகள்',
    m: 'ஒரு நிமிடம்',
    mm: '%d நிமிடங்கள்',
    h: 'ஒரு மணி நேரம்',
    hh: '%d மணி நேரம்',
    d: 'ஒரு நாள்',
    dd: '%d நாட்கள்',
    M: 'ஒரு மாதம்',
    MM: '%d மாதங்கள்',
    y: 'ஒரு வருடம்',
    yy: '%d ஆண்டுகள்'
  },
  dayOfMonthOrdinalParse: /\d{1,2}வது/,
  ordinal: function ordinal(number) {
    return number + 'வது';
  },
  preparse: function preparse(string) {
    return string.replace(/[௧௨௩௪௫௬௭௮௯௦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 2) {
      return ' யாமம்';
    } else if (hour < 6) {
      return ' வைகறை';
    } else if (hour < 10) {
      return ' காலை';
    } else if (hour < 14) {
      return ' நண்பகல்';
    } else if (hour < 18) {
      return ' எற்பாடு';
    } else if (hour < 22) {
      return ' மாலை';
    } else {
      return ' யாமம்';
    }
  },
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'யாமம்') {
      return hour < 2 ? hour : hour + 12;
    } else if (meridiem === 'வைகறை' || meridiem === 'காலை') {
      return hour;
    } else if (meridiem === 'நண்பகல்') {
      return hour >= 10 ? hour : hour + 12;
    } else {
      return hour + 12;
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/te.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/te.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('te', {
  months: 'జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్'.split('_'),
  monthsShort: 'జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.'.split('_'),
  monthsParseExact: true,
  weekdays: 'ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం'.split('_'),
  weekdaysShort: 'ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని'.split('_'),
  weekdaysMin: 'ఆ_సో_మం_బు_గు_శు_శ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm',
    LLLL: 'dddd, D MMMM YYYY, A h:mm'
  },
  calendar: {
    sameDay: '[నేడు] LT',
    nextDay: '[రేపు] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[నిన్న] LT',
    lastWeek: '[గత] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s లో',
    past: '%s క్రితం',
    s: 'కొన్ని క్షణాలు',
    ss: '%d సెకన్లు',
    m: 'ఒక నిమిషం',
    mm: '%d నిమిషాలు',
    h: 'ఒక గంట',
    hh: '%d గంటలు',
    d: 'ఒక రోజు',
    dd: '%d రోజులు',
    M: 'ఒక నెల',
    MM: '%d నెలలు',
    y: 'ఒక సంవత్సరం',
    yy: '%d సంవత్సరాలు'
  },
  dayOfMonthOrdinalParse: /\d{1,2}వ/,
  ordinal: '%dవ',
  meridiemParse: /రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'రాత్రి') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ఉదయం') {
      return hour;
    } else if (meridiem === 'మధ్యాహ్నం') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'సాయంత్రం') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'రాత్రి';
    } else if (hour < 10) {
      return 'ఉదయం';
    } else if (hour < 17) {
      return 'మధ్యాహ్నం';
    } else if (hour < 20) {
      return 'సాయంత్రం';
    } else {
      return 'రాత్రి';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tet.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tet.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tet', {
  months: 'Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru'.split('_'),
  monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),
  weekdays: 'Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu'.split('_'),
  weekdaysShort: 'Dom_Seg_Ters_Kua_Kint_Sest_Sab'.split('_'),
  weekdaysMin: 'Do_Seg_Te_Ku_Ki_Ses_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Ohin iha] LT',
    nextDay: '[Aban iha] LT',
    nextWeek: 'dddd [iha] LT',
    lastDay: '[Horiseik iha] LT',
    lastWeek: 'dddd [semana kotuk] [iha] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'iha %s',
    past: '%s liuba',
    s: 'segundu balun',
    ss: 'segundu %d',
    m: 'minutu ida',
    mm: 'minutu %d',
    h: 'oras ida',
    hh: 'oras %d',
    d: 'loron ida',
    dd: 'loron %d',
    M: 'fulan ida',
    MM: 'fulan %d',
    y: 'tinan ida',
    yy: 'tinan %d'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tg.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/tg.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  0: '-ум',
  1: '-ум',
  2: '-юм',
  3: '-юм',
  4: '-ум',
  5: '-ум',
  6: '-ум',
  7: '-ум',
  8: '-ум',
  9: '-ум',
  10: '-ум',
  12: '-ум',
  13: '-ум',
  20: '-ум',
  30: '-юм',
  40: '-ум',
  50: '-ум',
  60: '-ум',
  70: '-ум',
  80: '-ум',
  90: '-ум',
  100: '-ум'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tg', {
  months: {
    format: 'январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри'.split('_'),
    standalone: 'январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр'.split('_')
  },
  monthsShort: 'янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек'.split('_'),
  weekdays: 'якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе'.split('_'),
  weekdaysShort: 'яшб_дшб_сшб_чшб_пшб_ҷум_шнб'.split('_'),
  weekdaysMin: 'яш_дш_сш_чш_пш_ҷм_шб'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Имрӯз соати] LT',
    nextDay: '[Фардо соати] LT',
    lastDay: '[Дирӯз соати] LT',
    nextWeek: 'dddd[и] [ҳафтаи оянда соати] LT',
    lastWeek: 'dddd[и] [ҳафтаи гузашта соати] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'баъди %s',
    past: '%s пеш',
    s: 'якчанд сония',
    m: 'як дақиқа',
    mm: '%d дақиқа',
    h: 'як соат',
    hh: '%d соат',
    d: 'як рӯз',
    dd: '%d рӯз',
    M: 'як моҳ',
    MM: '%d моҳ',
    y: 'як сол',
    yy: '%d сол'
  },
  meridiemParse: /шаб|субҳ|рӯз|бегоҳ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'шаб') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'субҳ') {
      return hour;
    } else if (meridiem === 'рӯз') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'бегоҳ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'шаб';
    } else if (hour < 11) {
      return 'субҳ';
    } else if (hour < 16) {
      return 'рӯз';
    } else if (hour < 19) {
      return 'бегоҳ';
    } else {
      return 'шаб';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ум|юм)/,
  ordinal: function ordinal(number) {
    var a = number % 10,
        b = number >= 100 ? 100 : null;
    return number + (suffixes[number] || suffixes[a] || suffixes[b]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/th.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/th.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('th', {
  months: 'มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม'.split('_'),
  monthsShort: 'ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.'.split('_'),
  monthsParseExact: true,
  weekdays: 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์'.split('_'),
  weekdaysShort: 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์'.split('_'),
  weekdaysMin: 'อา._จ._อ._พ._พฤ._ศ._ส.'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY เวลา H:mm',
    LLLL: 'วันddddที่ D MMMM YYYY เวลา H:mm'
  },
  meridiemParse: /ก่อนเที่ยง|หลังเที่ยง/,
  isPM: function isPM(input) {
    return input === 'หลังเที่ยง';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ก่อนเที่ยง';
    } else {
      return 'หลังเที่ยง';
    }
  },
  calendar: {
    sameDay: '[วันนี้ เวลา] LT',
    nextDay: '[พรุ่งนี้ เวลา] LT',
    nextWeek: 'dddd[หน้า เวลา] LT',
    lastDay: '[เมื่อวานนี้ เวลา] LT',
    lastWeek: '[วัน]dddd[ที่แล้ว เวลา] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'อีก %s',
    past: '%sที่แล้ว',
    s: 'ไม่กี่วินาที',
    ss: '%d วินาที',
    m: '1 นาที',
    mm: '%d นาที',
    h: '1 ชั่วโมง',
    hh: '%d ชั่วโมง',
    d: '1 วัน',
    dd: '%d วัน',
    w: '1 สัปดาห์',
    ww: '%d สัปดาห์',
    M: '1 เดือน',
    MM: '%d เดือน',
    y: '1 ปี',
    yy: '%d ปี'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/tk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  1: "'inji",
  5: "'inji",
  8: "'inji",
  70: "'inji",
  80: "'inji",
  2: "'nji",
  7: "'nji",
  20: "'nji",
  50: "'nji",
  3: "'ünji",
  4: "'ünji",
  100: "'ünji",
  6: "'njy",
  9: "'unjy",
  10: "'unjy",
  30: "'unjy",
  60: "'ynjy",
  90: "'ynjy"
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tk', {
  months: 'Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr'.split('_'),
  monthsShort: 'Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek'.split('_'),
  weekdays: 'Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe'.split('_'),
  weekdaysShort: 'Ýek_Duş_Siş_Çar_Pen_Ann_Şen'.split('_'),
  weekdaysMin: 'Ýk_Dş_Sş_Çr_Pn_An_Şn'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[bugün sagat] LT',
    nextDay: '[ertir sagat] LT',
    nextWeek: '[indiki] dddd [sagat] LT',
    lastDay: '[düýn] LT',
    lastWeek: '[geçen] dddd [sagat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s soň',
    past: '%s öň',
    s: 'birnäçe sekunt',
    m: 'bir minut',
    mm: '%d minut',
    h: 'bir sagat',
    hh: '%d sagat',
    d: 'bir gün',
    dd: '%d gün',
    M: 'bir aý',
    MM: '%d aý',
    y: 'bir ýyl',
    yy: '%d ýyl'
  },
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'Do':
      case 'DD':
        return number;

      default:
        if (number === 0) {
          return number + "'unjy";
        }

        var a = number % 10,
            b = number % 100 - a,
            c = number >= 100 ? 100 : null;
        return number + (suffixes[a] || suffixes[b] || suffixes[c]);
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tl-ph.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/tl-ph.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tl-ph', {
  months: 'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),
  monthsShort: 'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),
  weekdays: 'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),
  weekdaysShort: 'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),
  weekdaysMin: 'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'MM/D/YYYY',
    LL: 'MMMM D, YYYY',
    LLL: 'MMMM D, YYYY HH:mm',
    LLLL: 'dddd, MMMM DD, YYYY HH:mm'
  },
  calendar: {
    sameDay: 'LT [ngayong araw]',
    nextDay: '[Bukas ng] LT',
    nextWeek: 'LT [sa susunod na] dddd',
    lastDay: 'LT [kahapon]',
    lastWeek: 'LT [noong nakaraang] dddd',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'sa loob ng %s',
    past: '%s ang nakalipas',
    s: 'ilang segundo',
    ss: '%d segundo',
    m: 'isang minuto',
    mm: '%d minuto',
    h: 'isang oras',
    hh: '%d oras',
    d: 'isang araw',
    dd: '%d araw',
    M: 'isang buwan',
    MM: '%d buwan',
    y: 'isang taon',
    yy: '%d taon'
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: function ordinal(number) {
    return number;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tlh.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tlh.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var numbersNouns = 'pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut'.split('_');

function translateFuture(output) {
  var time = output;
  time = output.indexOf('jaj') !== -1 ? time.slice(0, -3) + 'leS' : output.indexOf('jar') !== -1 ? time.slice(0, -3) + 'waQ' : output.indexOf('DIS') !== -1 ? time.slice(0, -3) + 'nem' : time + ' pIq';
  return time;
}

function translatePast(output) {
  var time = output;
  time = output.indexOf('jaj') !== -1 ? time.slice(0, -3) + 'Hu’' : output.indexOf('jar') !== -1 ? time.slice(0, -3) + 'wen' : output.indexOf('DIS') !== -1 ? time.slice(0, -3) + 'ben' : time + ' ret';
  return time;
}

function translate(number, withoutSuffix, string, isFuture) {
  var numberNoun = numberAsNoun(number);

  switch (string) {
    case 'ss':
      return numberNoun + ' lup';

    case 'mm':
      return numberNoun + ' tup';

    case 'hh':
      return numberNoun + ' rep';

    case 'dd':
      return numberNoun + ' jaj';

    case 'MM':
      return numberNoun + ' jar';

    case 'yy':
      return numberNoun + ' DIS';
  }
}

function numberAsNoun(number) {
  var hundred = Math.floor(number % 1000 / 100),
      ten = Math.floor(number % 100 / 10),
      one = number % 10,
      word = '';

  if (hundred > 0) {
    word += numbersNouns[hundred] + 'vatlh';
  }

  if (ten > 0) {
    word += (word !== '' ? ' ' : '') + numbersNouns[ten] + 'maH';
  }

  if (one > 0) {
    word += (word !== '' ? ' ' : '') + numbersNouns[one];
  }

  return word === '' ? 'pagh' : word;
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tlh', {
  months: 'tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’'.split('_'),
  monthsShort: 'jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’'.split('_'),
  monthsParseExact: true,
  weekdays: 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
  weekdaysShort: 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
  weekdaysMin: 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[DaHjaj] LT',
    nextDay: '[wa’leS] LT',
    nextWeek: 'LLL',
    lastDay: '[wa’Hu’] LT',
    lastWeek: 'LLL',
    sameElse: 'L'
  },
  relativeTime: {
    future: translateFuture,
    past: translatePast,
    s: 'puS lup',
    ss: translate,
    m: 'wa’ tup',
    mm: translate,
    h: 'wa’ rep',
    hh: translate,
    d: 'wa’ jaj',
    dd: translate,
    M: 'wa’ jar',
    MM: translate,
    y: 'wa’ DIS',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/tr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  1: "'inci",
  5: "'inci",
  8: "'inci",
  70: "'inci",
  80: "'inci",
  2: "'nci",
  7: "'nci",
  20: "'nci",
  50: "'nci",
  3: "'üncü",
  4: "'üncü",
  100: "'üncü",
  6: "'ncı",
  9: "'uncu",
  10: "'uncu",
  30: "'uncu",
  60: "'ıncı",
  90: "'ıncı"
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tr', {
  months: 'Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık'.split('_'),
  monthsShort: 'Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara'.split('_'),
  weekdays: 'Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi'.split('_'),
  weekdaysShort: 'Paz_Pts_Sal_Çar_Per_Cum_Cts'.split('_'),
  weekdaysMin: 'Pz_Pt_Sa_Ça_Pe_Cu_Ct'.split('_'),
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower ? 'öö' : 'ÖÖ';
    } else {
      return isLower ? 'ös' : 'ÖS';
    }
  },
  meridiemParse: /öö|ÖÖ|ös|ÖS/,
  isPM: function isPM(input) {
    return input === 'ös' || input === 'ÖS';
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[bugün saat] LT',
    nextDay: '[yarın saat] LT',
    nextWeek: '[gelecek] dddd [saat] LT',
    lastDay: '[dün] LT',
    lastWeek: '[geçen] dddd [saat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s sonra',
    past: '%s önce',
    s: 'birkaç saniye',
    ss: '%d saniye',
    m: 'bir dakika',
    mm: '%d dakika',
    h: 'bir saat',
    hh: '%d saat',
    d: 'bir gün',
    dd: '%d gün',
    w: 'bir hafta',
    ww: '%d hafta',
    M: 'bir ay',
    MM: '%d ay',
    y: 'bir yıl',
    yy: '%d yıl'
  },
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'Do':
      case 'DD':
        return number;

      default:
        if (number === 0) {
          return number + "'ıncı";
        }

        var a = number % 10,
            b = number % 100 - a,
            c = number >= 100 ? 100 : null;
        return number + (suffixes[a] || suffixes[b] || suffixes[c]);
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tzl.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tzl.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tzl', {
  months: 'Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar'.split('_'),
  monthsShort: 'Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec'.split('_'),
  weekdays: 'Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi'.split('_'),
  weekdaysShort: 'Súl_Lún_Mai_Már_Xhú_Vié_Sát'.split('_'),
  weekdaysMin: 'Sú_Lú_Ma_Má_Xh_Vi_Sá'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM [dallas] YYYY',
    LLL: 'D. MMMM [dallas] YYYY HH.mm',
    LLLL: 'dddd, [li] D. MMMM [dallas] YYYY HH.mm'
  },
  meridiemParse: /d\'o|d\'a/i,
  isPM: function isPM(input) {
    return "d'o" === input.toLowerCase();
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? "d'o" : "D'O";
    } else {
      return isLower ? "d'a" : "D'A";
    }
  },
  calendar: {
    sameDay: '[oxhi à] LT',
    nextDay: '[demà à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[ieiri à] LT',
    lastWeek: '[sür el] dddd [lasteu à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'osprei %s',
    past: 'ja%s',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['viensas secunds', "'iensas secunds"],
    ss: [number + ' secunds', '' + number + ' secunds'],
    m: ["'n míut", "'iens míut"],
    mm: [number + ' míuts', '' + number + ' míuts'],
    h: ["'n þora", "'iensa þora"],
    hh: [number + ' þoras', '' + number + ' þoras'],
    d: ["'n ziua", "'iensa ziua"],
    dd: [number + ' ziuas', '' + number + ' ziuas'],
    M: ["'n mes", "'iens mes"],
    MM: [number + ' mesen', '' + number + ' mesen'],
    y: ["'n ar", "'iens ar"],
    yy: [number + ' ars', '' + number + ' ars']
  };
  return isFuture ? format[key][0] : withoutSuffix ? format[key][0] : format[key][1];
}

/***/ }),

/***/ "./node_modules/moment/dist/locale/tzm-latn.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/tzm-latn.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tzm-latn', {
  months: 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
  monthsShort: 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
  weekdays: 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
  weekdaysShort: 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
  weekdaysMin: 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[asdkh g] LT',
    nextDay: '[aska g] LT',
    nextWeek: 'dddd [g] LT',
    lastDay: '[assant g] LT',
    lastWeek: 'dddd [g] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dadkh s yan %s',
    past: 'yan %s',
    s: 'imik',
    ss: '%d imik',
    m: 'minuḍ',
    mm: '%d minuḍ',
    h: 'saɛa',
    hh: '%d tassaɛin',
    d: 'ass',
    dd: '%d ossan',
    M: 'ayowr',
    MM: '%d iyyirn',
    y: 'asgas',
    yy: '%d isgasn'
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tzm.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tzm.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tzm', {
  months: 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
  monthsShort: 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
  weekdays: 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
  weekdaysShort: 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
  weekdaysMin: 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[ⴰⵙⴷⵅ ⴴ] LT',
    nextDay: '[ⴰⵙⴽⴰ ⴴ] LT',
    nextWeek: 'dddd [ⴴ] LT',
    lastDay: '[ⴰⵚⴰⵏⵜ ⴴ] LT',
    lastWeek: 'dddd [ⴴ] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s',
    past: 'ⵢⴰⵏ %s',
    s: 'ⵉⵎⵉⴽ',
    ss: '%d ⵉⵎⵉⴽ',
    m: 'ⵎⵉⵏⵓⴺ',
    mm: '%d ⵎⵉⵏⵓⴺ',
    h: 'ⵙⴰⵄⴰ',
    hh: '%d ⵜⴰⵙⵙⴰⵄⵉⵏ',
    d: 'ⴰⵙⵙ',
    dd: '%d oⵙⵙⴰⵏ',
    M: 'ⴰⵢoⵓⵔ',
    MM: '%d ⵉⵢⵢⵉⵔⵏ',
    y: 'ⴰⵙⴳⴰⵙ',
    yy: '%d ⵉⵙⴳⴰⵙⵏ'
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ug-cn.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ug-cn.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ug-cn', {
  months: 'يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر'.split('_'),
  monthsShort: 'يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر'.split('_'),
  weekdays: 'يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە'.split('_'),
  weekdaysShort: 'يە_دۈ_سە_چا_پە_جۈ_شە'.split('_'),
  weekdaysMin: 'يە_دۈ_سە_چا_پە_جۈ_شە'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY-يىلىM-ئاينىڭD-كۈنى',
    LLL: 'YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm',
    LLLL: 'dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm'
  },
  meridiemParse: /يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'يېرىم كېچە' || meridiem === 'سەھەر' || meridiem === 'چۈشتىن بۇرۇن') {
      return hour;
    } else if (meridiem === 'چۈشتىن كېيىن' || meridiem === 'كەچ') {
      return hour + 12;
    } else {
      return hour >= 11 ? hour : hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return 'يېرىم كېچە';
    } else if (hm < 900) {
      return 'سەھەر';
    } else if (hm < 1130) {
      return 'چۈشتىن بۇرۇن';
    } else if (hm < 1230) {
      return 'چۈش';
    } else if (hm < 1800) {
      return 'چۈشتىن كېيىن';
    } else {
      return 'كەچ';
    }
  },
  calendar: {
    sameDay: '[بۈگۈن سائەت] LT',
    nextDay: '[ئەتە سائەت] LT',
    nextWeek: '[كېلەركى] dddd [سائەت] LT',
    lastDay: '[تۆنۈگۈن] LT',
    lastWeek: '[ئالدىنقى] dddd [سائەت] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s كېيىن',
    past: '%s بۇرۇن',
    s: 'نەچچە سېكونت',
    ss: '%d سېكونت',
    m: 'بىر مىنۇت',
    mm: '%d مىنۇت',
    h: 'بىر سائەت',
    hh: '%d سائەت',
    d: 'بىر كۈن',
    dd: '%d كۈن',
    M: 'بىر ئاي',
    MM: '%d ئاي',
    y: 'بىر يىل',
    yy: '%d يىل'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '-كۈنى';

      case 'w':
      case 'W':
        return number + '-ھەپتە';

      default:
        return number;
    }
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/uk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/uk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(word, num) {
  var forms = word.split('_');
  return num % 10 === 1 && num % 100 !== 11 ? forms[0] : num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2];
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: withoutSuffix ? 'секунда_секунди_секунд' : 'секунду_секунди_секунд',
    mm: withoutSuffix ? 'хвилина_хвилини_хвилин' : 'хвилину_хвилини_хвилин',
    hh: withoutSuffix ? 'година_години_годин' : 'годину_години_годин',
    dd: 'день_дні_днів',
    MM: 'місяць_місяці_місяців',
    yy: 'рік_роки_років'
  };

  if (key === 'm') {
    return withoutSuffix ? 'хвилина' : 'хвилину';
  } else if (key === 'h') {
    return withoutSuffix ? 'година' : 'годину';
  } else {
    return number + ' ' + plural(format[key], +number);
  }
}

function weekdaysCaseReplace(m, format) {
  var weekdays = {
    nominative: 'неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота'.split('_'),
    accusative: 'неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу'.split('_'),
    genitive: 'неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи'.split('_')
  },
      nounCase;

  if (m === true) {
    return weekdays['nominative'].slice(1, 7).concat(weekdays['nominative'].slice(0, 1));
  }

  if (!m) {
    return weekdays['nominative'];
  }

  nounCase = /(\[[ВвУу]\]) ?dddd/.test(format) ? 'accusative' : /\[?(?:минулої|наступної)? ?\] ?dddd/.test(format) ? 'genitive' : 'nominative';
  return weekdays[nounCase][m.day()];
}

function processHoursFunction(str) {
  return function () {
    return str + 'о' + (this.hours() === 11 ? 'б' : '') + '] LT';
  };
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('uk', {
  months: {
    format: 'січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня'.split('_'),
    standalone: 'січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень'.split('_')
  },
  monthsShort: 'січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд'.split('_'),
  weekdays: weekdaysCaseReplace,
  weekdaysShort: 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
  weekdaysMin: 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY р.',
    LLL: 'D MMMM YYYY р., HH:mm',
    LLLL: 'dddd, D MMMM YYYY р., HH:mm'
  },
  calendar: {
    sameDay: processHoursFunction('[Сьогодні '),
    nextDay: processHoursFunction('[Завтра '),
    lastDay: processHoursFunction('[Вчора '),
    nextWeek: processHoursFunction('[У] dddd ['),
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 5:
        case 6:
          return processHoursFunction('[Минулої] dddd [').call(this);

        case 1:
        case 2:
        case 4:
          return processHoursFunction('[Минулого] dddd [').call(this);
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'за %s',
    past: '%s тому',
    s: 'декілька секунд',
    ss: relativeTimeWithPlural,
    m: relativeTimeWithPlural,
    mm: relativeTimeWithPlural,
    h: 'годину',
    hh: relativeTimeWithPlural,
    d: 'день',
    dd: relativeTimeWithPlural,
    M: 'місяць',
    MM: relativeTimeWithPlural,
    y: 'рік',
    yy: relativeTimeWithPlural
  },
  meridiemParse: /ночі|ранку|дня|вечора/,
  isPM: function isPM(input) {
    return /^(дня|вечора)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ночі';
    } else if (hour < 12) {
      return 'ранку';
    } else if (hour < 17) {
      return 'дня';
    } else {
      return 'вечора';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(й|го)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'M':
      case 'd':
      case 'DDD':
      case 'w':
      case 'W':
        return number + '-й';

      case 'D':
        return number + '-го';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ur.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ur.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['جنوری', 'فروری', 'مارچ', 'اپریل', 'مئی', 'جون', 'جولائی', 'اگست', 'ستمبر', 'اکتوبر', 'نومبر', 'دسمبر'],
    days = ['اتوار', 'پیر', 'منگل', 'بدھ', 'جمعرات', 'جمعہ', 'ہفتہ'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ur', {
  months: months,
  monthsShort: months,
  weekdays: days,
  weekdaysShort: days,
  weekdaysMin: days,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd، D MMMM YYYY HH:mm'
  },
  meridiemParse: /صبح|شام/,
  isPM: function isPM(input) {
    return 'شام' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'صبح';
    }

    return 'شام';
  },
  calendar: {
    sameDay: '[آج بوقت] LT',
    nextDay: '[کل بوقت] LT',
    nextWeek: 'dddd [بوقت] LT',
    lastDay: '[گذشتہ روز بوقت] LT',
    lastWeek: '[گذشتہ] dddd [بوقت] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s بعد',
    past: '%s قبل',
    s: 'چند سیکنڈ',
    ss: '%d سیکنڈ',
    m: 'ایک منٹ',
    mm: '%d منٹ',
    h: 'ایک گھنٹہ',
    hh: '%d گھنٹے',
    d: 'ایک دن',
    dd: '%d دن',
    M: 'ایک ماہ',
    MM: '%d ماہ',
    y: 'ایک سال',
    yy: '%d سال'
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/uz-latn.js":
/*!****************************************************!*\
  !*** ./node_modules/moment/dist/locale/uz-latn.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('uz-latn', {
  months: 'Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr'.split('_'),
  monthsShort: 'Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek'.split('_'),
  weekdays: 'Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba'.split('_'),
  weekdaysShort: 'Yak_Dush_Sesh_Chor_Pay_Jum_Shan'.split('_'),
  weekdaysMin: 'Ya_Du_Se_Cho_Pa_Ju_Sha'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'D MMMM YYYY, dddd HH:mm'
  },
  calendar: {
    sameDay: '[Bugun soat] LT [da]',
    nextDay: '[Ertaga] LT [da]',
    nextWeek: 'dddd [kuni soat] LT [da]',
    lastDay: '[Kecha soat] LT [da]',
    lastWeek: "[O'tgan] dddd [kuni soat] LT [da]",
    sameElse: 'L'
  },
  relativeTime: {
    future: 'Yaqin %s ichida',
    past: 'Bir necha %s oldin',
    s: 'soniya',
    ss: '%d soniya',
    m: 'bir daqiqa',
    mm: '%d daqiqa',
    h: 'bir soat',
    hh: '%d soat',
    d: 'bir kun',
    dd: '%d kun',
    M: 'bir oy',
    MM: '%d oy',
    y: 'bir yil',
    yy: '%d yil'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/uz.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/uz.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('uz', {
  months: 'январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр'.split('_'),
  monthsShort: 'янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек'.split('_'),
  weekdays: 'Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба'.split('_'),
  weekdaysShort: 'Якш_Душ_Сеш_Чор_Пай_Жум_Шан'.split('_'),
  weekdaysMin: 'Як_Ду_Се_Чо_Па_Жу_Ша'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'D MMMM YYYY, dddd HH:mm'
  },
  calendar: {
    sameDay: '[Бугун соат] LT [да]',
    nextDay: '[Эртага] LT [да]',
    nextWeek: 'dddd [куни соат] LT [да]',
    lastDay: '[Кеча соат] LT [да]',
    lastWeek: '[Утган] dddd [куни соат] LT [да]',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'Якин %s ичида',
    past: 'Бир неча %s олдин',
    s: 'фурсат',
    ss: '%d фурсат',
    m: 'бир дакика',
    mm: '%d дакика',
    h: 'бир соат',
    hh: '%d соат',
    d: 'бир кун',
    dd: '%d кун',
    M: 'бир ой',
    MM: '%d ой',
    y: 'бир йил',
    yy: '%d йил'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/vi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/vi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('vi', {
  months: 'tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12'.split('_'),
  monthsShort: 'Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12'.split('_'),
  monthsParseExact: true,
  weekdays: 'chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy'.split('_'),
  weekdaysShort: 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
  weekdaysMin: 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
  weekdaysParseExact: true,
  meridiemParse: /sa|ch/i,
  isPM: function isPM(input) {
    return /^ch$/i.test(input);
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower ? 'sa' : 'SA';
    } else {
      return isLower ? 'ch' : 'CH';
    }
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM [năm] YYYY',
    LLL: 'D MMMM [năm] YYYY HH:mm',
    LLLL: 'dddd, D MMMM [năm] YYYY HH:mm',
    l: 'DD/M/YYYY',
    ll: 'D MMM YYYY',
    lll: 'D MMM YYYY HH:mm',
    llll: 'ddd, D MMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Hôm nay lúc] LT',
    nextDay: '[Ngày mai lúc] LT',
    nextWeek: 'dddd [tuần tới lúc] LT',
    lastDay: '[Hôm qua lúc] LT',
    lastWeek: 'dddd [tuần trước lúc] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s tới',
    past: '%s trước',
    s: 'vài giây',
    ss: '%d giây',
    m: 'một phút',
    mm: '%d phút',
    h: 'một giờ',
    hh: '%d giờ',
    d: 'một ngày',
    dd: '%d ngày',
    w: 'một tuần',
    ww: '%d tuần',
    M: 'một tháng',
    MM: '%d tháng',
    y: 'một năm',
    yy: '%d năm'
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: function ordinal(number) {
    return number;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/x-pseudo.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/x-pseudo.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('x-pseudo', {
  months: 'J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér'.split('_'),
  monthsShort: 'J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc'.split('_'),
  monthsParseExact: true,
  weekdays: 'S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý'.split('_'),
  weekdaysShort: 'S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát'.split('_'),
  weekdaysMin: 'S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[T~ódá~ý át] LT',
    nextDay: '[T~ómó~rró~w át] LT',
    nextWeek: 'dddd [át] LT',
    lastDay: '[Ý~ést~érdá~ý át] LT',
    lastWeek: '[L~ást] dddd [át] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'í~ñ %s',
    past: '%s á~gó',
    s: 'á ~féw ~sécó~ñds',
    ss: '%d s~écóñ~ds',
    m: 'á ~míñ~úté',
    mm: '%d m~íñú~tés',
    h: 'á~ñ hó~úr',
    hh: '%d h~óúrs',
    d: 'á ~dáý',
    dd: '%d d~áýs',
    M: 'á ~móñ~th',
    MM: '%d m~óñt~hs',
    y: 'á ~ýéár',
    yy: '%d ý~éárs'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/yo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/yo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('yo', {
  months: 'Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀'.split('_'),
  monthsShort: 'Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀'.split('_'),
  weekdays: 'Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta'.split('_'),
  weekdaysShort: 'Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá'.split('_'),
  weekdaysMin: 'Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Ònì ni] LT',
    nextDay: '[Ọ̀la ni] LT',
    nextWeek: "dddd [Ọsẹ̀ tón'bọ] [ni] LT",
    lastDay: '[Àna ni] LT',
    lastWeek: 'dddd [Ọsẹ̀ tólọ́] [ni] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ní %s',
    past: '%s kọjá',
    s: 'ìsẹjú aayá die',
    ss: 'aayá %d',
    m: 'ìsẹjú kan',
    mm: 'ìsẹjú %d',
    h: 'wákati kan',
    hh: 'wákati %d',
    d: 'ọjọ́ kan',
    dd: 'ọjọ́ %d',
    M: 'osù kan',
    MM: 'osù %d',
    y: 'ọdún kan',
    yy: 'ọdún %d'
  },
  dayOfMonthOrdinalParse: /ọjọ́\s\d{1,2}/,
  ordinal: 'ọjọ́ %d',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-cn.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-cn.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-cn', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '周日_周一_周二_周三_周四_周五_周六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日Ah点mm分',
    LLLL: 'YYYY年M月D日ddddAh点mm分',
    l: 'YYYY/M/D',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    } else {
      return hour >= 11 ? hour : hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1130) {
      return '上午';
    } else if (hm < 1230) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天]LT',
    nextDay: '[明天]LT',
    nextWeek: function nextWeek(now) {
      if (now.week() !== this.week()) {
        return '[下]dddLT';
      } else {
        return '[本]dddLT';
      }
    },
    lastDay: '[昨天]LT',
    lastWeek: function lastWeek(now) {
      if (this.week() !== now.week()) {
        return '[上]dddLT';
      } else {
        return '[本]dddLT';
      }
    },
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|周)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '周';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s后',
    past: '%s前',
    s: '几秒',
    ss: '%d 秒',
    m: '1 分钟',
    mm: '%d 分钟',
    h: '1 小时',
    hh: '%d 小时',
    d: '1 天',
    dd: '%d 天',
    w: '1 周',
    ww: '%d 周',
    M: '1 个月',
    MM: '%d 个月',
    y: '1 年',
    yy: '%d 年'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-hk.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-hk.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-hk', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日dddd HH:mm',
    l: 'YYYY/M/D',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '中午') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1200) {
      return '上午';
    } else if (hm === 1200) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天]LT',
    nextDay: '[明天]LT',
    nextWeek: '[下]ddddLT',
    lastDay: '[昨天]LT',
    lastWeek: '[上]ddddLT',
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '週';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s後',
    past: '%s前',
    s: '幾秒',
    ss: '%d 秒',
    m: '1 分鐘',
    mm: '%d 分鐘',
    h: '1 小時',
    hh: '%d 小時',
    d: '1 天',
    dd: '%d 天',
    M: '1 個月',
    MM: '%d 個月',
    y: '1 年',
    yy: '%d 年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-mo.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-mo.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-mo', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日dddd HH:mm',
    l: 'D/M/YYYY',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '中午') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1130) {
      return '上午';
    } else if (hm < 1230) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天] LT',
    nextDay: '[明天] LT',
    nextWeek: '[下]dddd LT',
    lastDay: '[昨天] LT',
    lastWeek: '[上]dddd LT',
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '週';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s內',
    past: '%s前',
    s: '幾秒',
    ss: '%d 秒',
    m: '1 分鐘',
    mm: '%d 分鐘',
    h: '1 小時',
    hh: '%d 小時',
    d: '1 天',
    dd: '%d 天',
    M: '1 個月',
    MM: '%d 個月',
    y: '1 年',
    yy: '%d 年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-tw.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-tw.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-tw', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日dddd HH:mm',
    l: 'YYYY/M/D',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '中午') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1130) {
      return '上午';
    } else if (hm < 1230) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天] LT',
    nextDay: '[明天] LT',
    nextWeek: '[下]dddd LT',
    lastDay: '[昨天] LT',
    lastWeek: '[上]dddd LT',
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '週';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s後',
    past: '%s前',
    s: '幾秒',
    ss: '%d 秒',
    m: '1 分鐘',
    mm: '%d 分鐘',
    h: '1 小時',
    hh: '%d 小時',
    d: '1 天',
    dd: '%d 天',
    M: '1 個月',
    MM: '%d 個月',
    y: '1 年',
    yy: '%d 年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/moment.js":
/*!********************************************!*\
  !*** ./node_modules/moment/dist/moment.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {var require;var hookCallback;

function hooks() {
  return hookCallback.apply(null, arguments);
}

function setHookCallback(callback) {
  hookCallback = callback;
}

function isArray(input) {
  return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';
}

function isObject(input) {
  return input != null && Object.prototype.toString.call(input) === '[object Object]';
}

function hasOwnProp(a, b) {
  return Object.prototype.hasOwnProperty.call(a, b);
}

function isObjectEmpty(obj) {
  if (Object.getOwnPropertyNames) {
    return Object.getOwnPropertyNames(obj).length === 0;
  } else {
    var k;

    for (k in obj) {
      if (hasOwnProp(obj, k)) {
        return false;
      }
    }

    return true;
  }
}

function isUndefined(input) {
  return input === void 0;
}

function isNumber(input) {
  return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';
}

function isDate(input) {
  return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
}

function map(arr, fn) {
  var res = [],
      i;

  for (i = 0; i < arr.length; ++i) {
    res.push(fn(arr[i], i));
  }

  return res;
}

function extend(a, b) {
  for (var i in b) {
    if (hasOwnProp(b, i)) {
      a[i] = b[i];
    }
  }

  if (hasOwnProp(b, 'toString')) {
    a.toString = b.toString;
  }

  if (hasOwnProp(b, 'valueOf')) {
    a.valueOf = b.valueOf;
  }

  return a;
}

function createUTC(input, format, locale, strict) {
  return createLocalOrUTC(input, format, locale, strict, true).utc();
}

function defaultParsingFlags() {
  return {
    empty: false,
    unusedTokens: [],
    unusedInput: [],
    overflow: -2,
    charsLeftOver: 0,
    nullInput: false,
    invalidEra: null,
    invalidMonth: null,
    invalidFormat: false,
    userInvalidated: false,
    iso: false,
    parsedDateParts: [],
    era: null,
    meridiem: null,
    rfc2822: false,
    weekdayMismatch: false
  };
}

function getParsingFlags(m) {
  if (m._pf == null) {
    m._pf = defaultParsingFlags();
  }

  return m._pf;
}

var some;

if (Array.prototype.some) {
  some = Array.prototype.some;
} else {
  some = function some(fun) {
    var t = Object(this),
        len = t.length >>> 0,
        i;

    for (i = 0; i < len; i++) {
      if (i in t && fun.call(this, t[i], i, t)) {
        return true;
      }
    }

    return false;
  };
}

function isValid(m) {
  if (m._isValid == null) {
    var flags = getParsingFlags(m),
        parsedParts = some.call(flags.parsedDateParts, function (i) {
      return i != null;
    }),
        isNowValid = !isNaN(m._d.getTime()) && flags.overflow < 0 && !flags.empty && !flags.invalidEra && !flags.invalidMonth && !flags.invalidWeekday && !flags.weekdayMismatch && !flags.nullInput && !flags.invalidFormat && !flags.userInvalidated && (!flags.meridiem || flags.meridiem && parsedParts);

    if (m._strict) {
      isNowValid = isNowValid && flags.charsLeftOver === 0 && flags.unusedTokens.length === 0 && flags.bigHour === undefined;
    }

    if (Object.isFrozen == null || !Object.isFrozen(m)) {
      m._isValid = isNowValid;
    } else {
      return isNowValid;
    }
  }

  return m._isValid;
}

function createInvalid(flags) {
  var m = createUTC(NaN);

  if (flags != null) {
    extend(getParsingFlags(m), flags);
  } else {
    getParsingFlags(m).userInvalidated = true;
  }

  return m;
}

var momentProperties = hooks.momentProperties = [],
    updateInProgress = false;

function copyConfig(to, from) {
  var i, prop, val;

  if (!isUndefined(from._isAMomentObject)) {
    to._isAMomentObject = from._isAMomentObject;
  }

  if (!isUndefined(from._i)) {
    to._i = from._i;
  }

  if (!isUndefined(from._f)) {
    to._f = from._f;
  }

  if (!isUndefined(from._l)) {
    to._l = from._l;
  }

  if (!isUndefined(from._strict)) {
    to._strict = from._strict;
  }

  if (!isUndefined(from._tzm)) {
    to._tzm = from._tzm;
  }

  if (!isUndefined(from._isUTC)) {
    to._isUTC = from._isUTC;
  }

  if (!isUndefined(from._offset)) {
    to._offset = from._offset;
  }

  if (!isUndefined(from._pf)) {
    to._pf = getParsingFlags(from);
  }

  if (!isUndefined(from._locale)) {
    to._locale = from._locale;
  }

  if (momentProperties.length > 0) {
    for (i = 0; i < momentProperties.length; i++) {
      prop = momentProperties[i];
      val = from[prop];

      if (!isUndefined(val)) {
        to[prop] = val;
      }
    }
  }

  return to;
}

function Moment(config) {
  copyConfig(this, config);
  this._d = new Date(config._d != null ? config._d.getTime() : NaN);

  if (!this.isValid()) {
    this._d = new Date(NaN);
  }

  if (updateInProgress === false) {
    updateInProgress = true;
    hooks.updateOffset(this);
    updateInProgress = false;
  }
}

function isMoment(obj) {
  return obj instanceof Moment || obj != null && obj._isAMomentObject != null;
}

function warn(msg) {
  if (hooks.suppressDeprecationWarnings === false && typeof console !== 'undefined' && console.warn) {
    console.warn('Deprecation warning: ' + msg);
  }
}

function deprecate(msg, fn) {
  var firstTime = true;
  return extend(function () {
    if (hooks.deprecationHandler != null) {
      hooks.deprecationHandler(null, msg);
    }

    if (firstTime) {
      var args = [],
          arg,
          i,
          key;

      for (i = 0; i < arguments.length; i++) {
        arg = '';

        if (typeof arguments[i] === 'object') {
          arg += '\n[' + i + '] ';

          for (key in arguments[0]) {
            if (hasOwnProp(arguments[0], key)) {
              arg += key + ': ' + arguments[0][key] + ', ';
            }
          }

          arg = arg.slice(0, -2);
        } else {
          arg = arguments[i];
        }

        args.push(arg);
      }

      warn(msg + '\nArguments: ' + Array.prototype.slice.call(args).join('') + '\n' + new Error().stack);
      firstTime = false;
    }

    return fn.apply(this, arguments);
  }, fn);
}

var deprecations = {};

function deprecateSimple(name, msg) {
  if (hooks.deprecationHandler != null) {
    hooks.deprecationHandler(name, msg);
  }

  if (!deprecations[name]) {
    warn(msg);
    deprecations[name] = true;
  }
}

hooks.suppressDeprecationWarnings = false;
hooks.deprecationHandler = null;

function isFunction(input) {
  return typeof Function !== 'undefined' && input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
}

function set(config) {
  var prop, i;

  for (i in config) {
    if (hasOwnProp(config, i)) {
      prop = config[i];

      if (isFunction(prop)) {
        this[i] = prop;
      } else {
        this['_' + i] = prop;
      }
    }
  }

  this._config = config;
  this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + '|' + /\d{1,2}/.source);
}

function mergeConfigs(parentConfig, childConfig) {
  var res = extend({}, parentConfig),
      prop;

  for (prop in childConfig) {
    if (hasOwnProp(childConfig, prop)) {
      if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {
        res[prop] = {};
        extend(res[prop], parentConfig[prop]);
        extend(res[prop], childConfig[prop]);
      } else if (childConfig[prop] != null) {
        res[prop] = childConfig[prop];
      } else {
        delete res[prop];
      }
    }
  }

  for (prop in parentConfig) {
    if (hasOwnProp(parentConfig, prop) && !hasOwnProp(childConfig, prop) && isObject(parentConfig[prop])) {
      res[prop] = extend({}, res[prop]);
    }
  }

  return res;
}

function Locale(config) {
  if (config != null) {
    this.set(config);
  }
}

var keys;

if (Object.keys) {
  keys = Object.keys;
} else {
  keys = function keys(obj) {
    var i,
        res = [];

    for (i in obj) {
      if (hasOwnProp(obj, i)) {
        res.push(i);
      }
    }

    return res;
  };
}

var defaultCalendar = {
  sameDay: '[Today at] LT',
  nextDay: '[Tomorrow at] LT',
  nextWeek: 'dddd [at] LT',
  lastDay: '[Yesterday at] LT',
  lastWeek: '[Last] dddd [at] LT',
  sameElse: 'L'
};

function calendar(key, mom, now) {
  var output = this._calendar[key] || this._calendar['sameElse'];
  return isFunction(output) ? output.call(mom, now) : output;
}

function zeroFill(number, targetLength, forceSign) {
  var absNumber = '' + Math.abs(number),
      zerosToFill = targetLength - absNumber.length,
      sign = number >= 0;
  return (sign ? forceSign ? '+' : '' : '-') + Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
}

var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
    localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
    formatFunctions = {},
    formatTokenFunctions = {};

function addFormatToken(token, padded, ordinal, callback) {
  var func = callback;

  if (typeof callback === 'string') {
    func = function func() {
      return this[callback]();
    };
  }

  if (token) {
    formatTokenFunctions[token] = func;
  }

  if (padded) {
    formatTokenFunctions[padded[0]] = function () {
      return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
    };
  }

  if (ordinal) {
    formatTokenFunctions[ordinal] = function () {
      return this.localeData().ordinal(func.apply(this, arguments), token);
    };
  }
}

function removeFormattingTokens(input) {
  if (input.match(/\[[\s\S]/)) {
    return input.replace(/^\[|\]$/g, '');
  }

  return input.replace(/\\/g, '');
}

function makeFormatFunction(format) {
  var array = format.match(formattingTokens),
      i,
      length;

  for (i = 0, length = array.length; i < length; i++) {
    if (formatTokenFunctions[array[i]]) {
      array[i] = formatTokenFunctions[array[i]];
    } else {
      array[i] = removeFormattingTokens(array[i]);
    }
  }

  return function (mom) {
    var output = '',
        i;

    for (i = 0; i < length; i++) {
      output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];
    }

    return output;
  };
}

function formatMoment(m, format) {
  if (!m.isValid()) {
    return m.localeData().invalidDate();
  }

  format = expandFormat(format, m.localeData());
  formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);
  return formatFunctions[format](m);
}

function expandFormat(format, locale) {
  var i = 5;

  function replaceLongDateFormatTokens(input) {
    return locale.longDateFormat(input) || input;
  }

  localFormattingTokens.lastIndex = 0;

  while (i >= 0 && localFormattingTokens.test(format)) {
    format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
    localFormattingTokens.lastIndex = 0;
    i -= 1;
  }

  return format;
}

var defaultLongDateFormat = {
  LTS: 'h:mm:ss A',
  LT: 'h:mm A',
  L: 'MM/DD/YYYY',
  LL: 'MMMM D, YYYY',
  LLL: 'MMMM D, YYYY h:mm A',
  LLLL: 'dddd, MMMM D, YYYY h:mm A'
};

function longDateFormat(key) {
  var format = this._longDateFormat[key],
      formatUpper = this._longDateFormat[key.toUpperCase()];

  if (format || !formatUpper) {
    return format;
  }

  this._longDateFormat[key] = formatUpper.match(formattingTokens).map(function (tok) {
    if (tok === 'MMMM' || tok === 'MM' || tok === 'DD' || tok === 'dddd') {
      return tok.slice(1);
    }

    return tok;
  }).join('');
  return this._longDateFormat[key];
}

var defaultInvalidDate = 'Invalid date';

function invalidDate() {
  return this._invalidDate;
}

var defaultOrdinal = '%d',
    defaultDayOfMonthOrdinalParse = /\d{1,2}/;

function ordinal(number) {
  return this._ordinal.replace('%d', number);
}

var defaultRelativeTime = {
  future: 'in %s',
  past: '%s ago',
  s: 'a few seconds',
  ss: '%d seconds',
  m: 'a minute',
  mm: '%d minutes',
  h: 'an hour',
  hh: '%d hours',
  d: 'a day',
  dd: '%d days',
  w: 'a week',
  ww: '%d weeks',
  M: 'a month',
  MM: '%d months',
  y: 'a year',
  yy: '%d years'
};

function relativeTime(number, withoutSuffix, string, isFuture) {
  var output = this._relativeTime[string];
  return isFunction(output) ? output(number, withoutSuffix, string, isFuture) : output.replace(/%d/i, number);
}

function pastFuture(diff, output) {
  var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
  return isFunction(format) ? format(output) : format.replace(/%s/i, output);
}

var aliases = {};

function addUnitAlias(unit, shorthand) {
  var lowerCase = unit.toLowerCase();
  aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
}

function normalizeUnits(units) {
  return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
}

function normalizeObjectUnits(inputObject) {
  var normalizedInput = {},
      normalizedProp,
      prop;

  for (prop in inputObject) {
    if (hasOwnProp(inputObject, prop)) {
      normalizedProp = normalizeUnits(prop);

      if (normalizedProp) {
        normalizedInput[normalizedProp] = inputObject[prop];
      }
    }
  }

  return normalizedInput;
}

var priorities = {};

function addUnitPriority(unit, priority) {
  priorities[unit] = priority;
}

function getPrioritizedUnits(unitsObj) {
  var units = [],
      u;

  for (u in unitsObj) {
    if (hasOwnProp(unitsObj, u)) {
      units.push({
        unit: u,
        priority: priorities[u]
      });
    }
  }

  units.sort(function (a, b) {
    return a.priority - b.priority;
  });
  return units;
}

function isLeapYear(year) {
  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
}

function absFloor(number) {
  if (number < 0) {
    return Math.ceil(number) || 0;
  } else {
    return Math.floor(number);
  }
}

function toInt(argumentForCoercion) {
  var coercedNumber = +argumentForCoercion,
      value = 0;

  if (coercedNumber !== 0 && isFinite(coercedNumber)) {
    value = absFloor(coercedNumber);
  }

  return value;
}

function makeGetSet(unit, keepTime) {
  return function (value) {
    if (value != null) {
      set$1(this, unit, value);
      hooks.updateOffset(this, keepTime);
      return this;
    } else {
      return get(this, unit);
    }
  };
}

function get(mom, unit) {
  return mom.isValid() ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
}

function set$1(mom, unit, value) {
  if (mom.isValid() && !isNaN(value)) {
    if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {
      value = toInt(value);

      mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));
    } else {
      mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
    }
  }
}

function stringGet(units) {
  units = normalizeUnits(units);

  if (isFunction(this[units])) {
    return this[units]();
  }

  return this;
}

function stringSet(units, value) {
  if (typeof units === 'object') {
    units = normalizeObjectUnits(units);
    var prioritized = getPrioritizedUnits(units),
        i;

    for (i = 0; i < prioritized.length; i++) {
      this[prioritized[i].unit](units[prioritized[i].unit]);
    }
  } else {
    units = normalizeUnits(units);

    if (isFunction(this[units])) {
      return this[units](value);
    }
  }

  return this;
}

var match1 = /\d/,
    match2 = /\d\d/,
    match3 = /\d{3}/,
    match4 = /\d{4}/,
    match6 = /[+-]?\d{6}/,
    match1to2 = /\d\d?/,
    match3to4 = /\d\d\d\d?/,
    match5to6 = /\d\d\d\d\d\d?/,
    match1to3 = /\d{1,3}/,
    match1to4 = /\d{1,4}/,
    match1to6 = /[+-]?\d{1,6}/,
    matchUnsigned = /\d+/,
    matchSigned = /[+-]?\d+/,
    matchOffset = /Z|[+-]\d\d:?\d\d/gi,
    matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi,
    matchTimestamp = /[+-]?\d+(\.\d{1,3})?/,
    matchWord = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
    regexes;
regexes = {};

function addRegexToken(token, regex, strictRegex) {
  regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {
    return isStrict && strictRegex ? strictRegex : regex;
  };
}

function getParseRegexForToken(token, config) {
  if (!hasOwnProp(regexes, token)) {
    return new RegExp(unescapeFormat(token));
  }

  return regexes[token](config._strict, config._locale);
}

function unescapeFormat(s) {
  return regexEscape(s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
    return p1 || p2 || p3 || p4;
  }));
}

function regexEscape(s) {
  return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
}

var tokens = {};

function addParseToken(token, callback) {
  var i,
      func = callback;

  if (typeof token === 'string') {
    token = [token];
  }

  if (isNumber(callback)) {
    func = function func(input, array) {
      array[callback] = toInt(input);
    };
  }

  for (i = 0; i < token.length; i++) {
    tokens[token[i]] = func;
  }
}

function addWeekParseToken(token, callback) {
  addParseToken(token, function (input, array, config, token) {
    config._w = config._w || {};
    callback(input, config._w, config, token);
  });
}

function addTimeToArrayFromToken(token, input, config) {
  if (input != null && hasOwnProp(tokens, token)) {
    tokens[token](input, config._a, config, token);
  }
}

var YEAR = 0,
    MONTH = 1,
    DATE = 2,
    HOUR = 3,
    MINUTE = 4,
    SECOND = 5,
    MILLISECOND = 6,
    WEEK = 7,
    WEEKDAY = 8;

function mod(n, x) {
  return (n % x + x) % x;
}

var indexOf;

if (Array.prototype.indexOf) {
  indexOf = Array.prototype.indexOf;
} else {
  indexOf = function indexOf(o) {
    var i;

    for (i = 0; i < this.length; ++i) {
      if (this[i] === o) {
        return i;
      }
    }

    return -1;
  };
}

function daysInMonth(year, month) {
  if (isNaN(year) || isNaN(month)) {
    return NaN;
  }

  var modMonth = mod(month, 12);
  year += (month - modMonth) / 12;
  return modMonth === 1 ? isLeapYear(year) ? 29 : 28 : 31 - modMonth % 7 % 2;
}

addFormatToken('M', ['MM', 2], 'Mo', function () {
  return this.month() + 1;
});
addFormatToken('MMM', 0, 0, function (format) {
  return this.localeData().monthsShort(this, format);
});
addFormatToken('MMMM', 0, 0, function (format) {
  return this.localeData().months(this, format);
});
addUnitAlias('month', 'M');
addUnitPriority('month', 8);
addRegexToken('M', match1to2);
addRegexToken('MM', match1to2, match2);
addRegexToken('MMM', function (isStrict, locale) {
  return locale.monthsShortRegex(isStrict);
});
addRegexToken('MMMM', function (isStrict, locale) {
  return locale.monthsRegex(isStrict);
});
addParseToken(['M', 'MM'], function (input, array) {
  array[MONTH] = toInt(input) - 1;
});
addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
  var month = config._locale.monthsParse(input, token, config._strict);

  if (month != null) {
    array[MONTH] = month;
  } else {
    getParsingFlags(config).invalidMonth = input;
  }
});
var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
    defaultMonthsShortRegex = matchWord,
    defaultMonthsRegex = matchWord;

function localeMonths(m, format) {
  if (!m) {
    return isArray(this._months) ? this._months : this._months['standalone'];
  }

  return isArray(this._months) ? this._months[m.month()] : this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];
}

function localeMonthsShort(m, format) {
  if (!m) {
    return isArray(this._monthsShort) ? this._monthsShort : this._monthsShort['standalone'];
  }

  return isArray(this._monthsShort) ? this._monthsShort[m.month()] : this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
}

function handleStrictParse(monthName, format, strict) {
  var i,
      ii,
      mom,
      llc = monthName.toLocaleLowerCase();

  if (!this._monthsParse) {
    this._monthsParse = [];
    this._longMonthsParse = [];
    this._shortMonthsParse = [];

    for (i = 0; i < 12; ++i) {
      mom = createUTC([2000, i]);
      this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();
      this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();
    }
  }

  if (strict) {
    if (format === 'MMM') {
      ii = indexOf.call(this._shortMonthsParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._longMonthsParse, llc);
      return ii !== -1 ? ii : null;
    }
  } else {
    if (format === 'MMM') {
      ii = indexOf.call(this._shortMonthsParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._longMonthsParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._longMonthsParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._shortMonthsParse, llc);
      return ii !== -1 ? ii : null;
    }
  }
}

function localeMonthsParse(monthName, format, strict) {
  var i, mom, regex;

  if (this._monthsParseExact) {
    return handleStrictParse.call(this, monthName, format, strict);
  }

  if (!this._monthsParse) {
    this._monthsParse = [];
    this._longMonthsParse = [];
    this._shortMonthsParse = [];
  }

  for (i = 0; i < 12; i++) {
    mom = createUTC([2000, i]);

    if (strict && !this._longMonthsParse[i]) {
      this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
      this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
    }

    if (!strict && !this._monthsParse[i]) {
      regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
      this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
    }

    if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
      return i;
    } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
      return i;
    } else if (!strict && this._monthsParse[i].test(monthName)) {
      return i;
    }
  }
}

function setMonth(mom, value) {
  var dayOfMonth;

  if (!mom.isValid()) {
    return mom;
  }

  if (typeof value === 'string') {
    if (/^\d+$/.test(value)) {
      value = toInt(value);
    } else {
      value = mom.localeData().monthsParse(value);

      if (!isNumber(value)) {
        return mom;
      }
    }
  }

  dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));

  mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);

  return mom;
}

function getSetMonth(value) {
  if (value != null) {
    setMonth(this, value);
    hooks.updateOffset(this, true);
    return this;
  } else {
    return get(this, 'Month');
  }
}

function getDaysInMonth() {
  return daysInMonth(this.year(), this.month());
}

function monthsShortRegex(isStrict) {
  if (this._monthsParseExact) {
    if (!hasOwnProp(this, '_monthsRegex')) {
      computeMonthsParse.call(this);
    }

    if (isStrict) {
      return this._monthsShortStrictRegex;
    } else {
      return this._monthsShortRegex;
    }
  } else {
    if (!hasOwnProp(this, '_monthsShortRegex')) {
      this._monthsShortRegex = defaultMonthsShortRegex;
    }

    return this._monthsShortStrictRegex && isStrict ? this._monthsShortStrictRegex : this._monthsShortRegex;
  }
}

function monthsRegex(isStrict) {
  if (this._monthsParseExact) {
    if (!hasOwnProp(this, '_monthsRegex')) {
      computeMonthsParse.call(this);
    }

    if (isStrict) {
      return this._monthsStrictRegex;
    } else {
      return this._monthsRegex;
    }
  } else {
    if (!hasOwnProp(this, '_monthsRegex')) {
      this._monthsRegex = defaultMonthsRegex;
    }

    return this._monthsStrictRegex && isStrict ? this._monthsStrictRegex : this._monthsRegex;
  }
}

function computeMonthsParse() {
  function cmpLenRev(a, b) {
    return b.length - a.length;
  }

  var shortPieces = [],
      longPieces = [],
      mixedPieces = [],
      i,
      mom;

  for (i = 0; i < 12; i++) {
    mom = createUTC([2000, i]);
    shortPieces.push(this.monthsShort(mom, ''));
    longPieces.push(this.months(mom, ''));
    mixedPieces.push(this.months(mom, ''));
    mixedPieces.push(this.monthsShort(mom, ''));
  }

  shortPieces.sort(cmpLenRev);
  longPieces.sort(cmpLenRev);
  mixedPieces.sort(cmpLenRev);

  for (i = 0; i < 12; i++) {
    shortPieces[i] = regexEscape(shortPieces[i]);
    longPieces[i] = regexEscape(longPieces[i]);
  }

  for (i = 0; i < 24; i++) {
    mixedPieces[i] = regexEscape(mixedPieces[i]);
  }

  this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
  this._monthsShortRegex = this._monthsRegex;
  this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
  this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
}

addFormatToken('Y', 0, 0, function () {
  var y = this.year();
  return y <= 9999 ? zeroFill(y, 4) : '+' + y;
});
addFormatToken(0, ['YY', 2], 0, function () {
  return this.year() % 100;
});
addFormatToken(0, ['YYYY', 4], 0, 'year');
addFormatToken(0, ['YYYYY', 5], 0, 'year');
addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');
addUnitAlias('year', 'y');
addUnitPriority('year', 1);
addRegexToken('Y', matchSigned);
addRegexToken('YY', match1to2, match2);
addRegexToken('YYYY', match1to4, match4);
addRegexToken('YYYYY', match1to6, match6);
addRegexToken('YYYYYY', match1to6, match6);
addParseToken(['YYYYY', 'YYYYYY'], YEAR);
addParseToken('YYYY', function (input, array) {
  array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);
});
addParseToken('YY', function (input, array) {
  array[YEAR] = hooks.parseTwoDigitYear(input);
});
addParseToken('Y', function (input, array) {
  array[YEAR] = parseInt(input, 10);
});

function daysInYear(year) {
  return isLeapYear(year) ? 366 : 365;
}

hooks.parseTwoDigitYear = function (input) {
  return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
};

var getSetYear = makeGetSet('FullYear', true);

function getIsLeapYear() {
  return isLeapYear(this.year());
}

function createDate(y, m, d, h, M, s, ms) {
  var date;

  if (y < 100 && y >= 0) {
    date = new Date(y + 400, m, d, h, M, s, ms);

    if (isFinite(date.getFullYear())) {
      date.setFullYear(y);
    }
  } else {
    date = new Date(y, m, d, h, M, s, ms);
  }

  return date;
}

function createUTCDate(y) {
  var date, args;

  if (y < 100 && y >= 0) {
    args = Array.prototype.slice.call(arguments);
    args[0] = y + 400;
    date = new Date(Date.UTC.apply(null, args));

    if (isFinite(date.getUTCFullYear())) {
      date.setUTCFullYear(y);
    }
  } else {
    date = new Date(Date.UTC.apply(null, arguments));
  }

  return date;
}

function firstWeekOffset(year, dow, doy) {
  var fwd = 7 + dow - doy,
      fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;
  return -fwdlw + fwd - 1;
}

function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
  var localWeekday = (7 + weekday - dow) % 7,
      weekOffset = firstWeekOffset(year, dow, doy),
      dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
      resYear,
      resDayOfYear;

  if (dayOfYear <= 0) {
    resYear = year - 1;
    resDayOfYear = daysInYear(resYear) + dayOfYear;
  } else if (dayOfYear > daysInYear(year)) {
    resYear = year + 1;
    resDayOfYear = dayOfYear - daysInYear(year);
  } else {
    resYear = year;
    resDayOfYear = dayOfYear;
  }

  return {
    year: resYear,
    dayOfYear: resDayOfYear
  };
}

function weekOfYear(mom, dow, doy) {
  var weekOffset = firstWeekOffset(mom.year(), dow, doy),
      week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
      resWeek,
      resYear;

  if (week < 1) {
    resYear = mom.year() - 1;
    resWeek = week + weeksInYear(resYear, dow, doy);
  } else if (week > weeksInYear(mom.year(), dow, doy)) {
    resWeek = week - weeksInYear(mom.year(), dow, doy);
    resYear = mom.year() + 1;
  } else {
    resYear = mom.year();
    resWeek = week;
  }

  return {
    week: resWeek,
    year: resYear
  };
}

function weeksInYear(year, dow, doy) {
  var weekOffset = firstWeekOffset(year, dow, doy),
      weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
  return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
}

addFormatToken('w', ['ww', 2], 'wo', 'week');
addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');
addUnitAlias('week', 'w');
addUnitAlias('isoWeek', 'W');
addUnitPriority('week', 5);
addUnitPriority('isoWeek', 5);
addRegexToken('w', match1to2);
addRegexToken('ww', match1to2, match2);
addRegexToken('W', match1to2);
addRegexToken('WW', match1to2, match2);
addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
  week[token.substr(0, 1)] = toInt(input);
});

function localeWeek(mom) {
  return weekOfYear(mom, this._week.dow, this._week.doy).week;
}

var defaultLocaleWeek = {
  dow: 0,
  doy: 6
};

function localeFirstDayOfWeek() {
  return this._week.dow;
}

function localeFirstDayOfYear() {
  return this._week.doy;
}

function getSetWeek(input) {
  var week = this.localeData().week(this);
  return input == null ? week : this.add((input - week) * 7, 'd');
}

function getSetISOWeek(input) {
  var week = weekOfYear(this, 1, 4).week;
  return input == null ? week : this.add((input - week) * 7, 'd');
}

addFormatToken('d', 0, 'do', 'day');
addFormatToken('dd', 0, 0, function (format) {
  return this.localeData().weekdaysMin(this, format);
});
addFormatToken('ddd', 0, 0, function (format) {
  return this.localeData().weekdaysShort(this, format);
});
addFormatToken('dddd', 0, 0, function (format) {
  return this.localeData().weekdays(this, format);
});
addFormatToken('e', 0, 0, 'weekday');
addFormatToken('E', 0, 0, 'isoWeekday');
addUnitAlias('day', 'd');
addUnitAlias('weekday', 'e');
addUnitAlias('isoWeekday', 'E');
addUnitPriority('day', 11);
addUnitPriority('weekday', 11);
addUnitPriority('isoWeekday', 11);
addRegexToken('d', match1to2);
addRegexToken('e', match1to2);
addRegexToken('E', match1to2);
addRegexToken('dd', function (isStrict, locale) {
  return locale.weekdaysMinRegex(isStrict);
});
addRegexToken('ddd', function (isStrict, locale) {
  return locale.weekdaysShortRegex(isStrict);
});
addRegexToken('dddd', function (isStrict, locale) {
  return locale.weekdaysRegex(isStrict);
});
addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {
  var weekday = config._locale.weekdaysParse(input, token, config._strict);

  if (weekday != null) {
    week.d = weekday;
  } else {
    getParsingFlags(config).invalidWeekday = input;
  }
});
addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
  week[token] = toInt(input);
});

function parseWeekday(input, locale) {
  if (typeof input !== 'string') {
    return input;
  }

  if (!isNaN(input)) {
    return parseInt(input, 10);
  }

  input = locale.weekdaysParse(input);

  if (typeof input === 'number') {
    return input;
  }

  return null;
}

function parseIsoWeekday(input, locale) {
  if (typeof input === 'string') {
    return locale.weekdaysParse(input) % 7 || 7;
  }

  return isNaN(input) ? null : input;
}

function shiftWeekdays(ws, n) {
  return ws.slice(n, 7).concat(ws.slice(0, n));
}

var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    defaultWeekdaysRegex = matchWord,
    defaultWeekdaysShortRegex = matchWord,
    defaultWeekdaysMinRegex = matchWord;

function localeWeekdays(m, format) {
  var weekdays = isArray(this._weekdays) ? this._weekdays : this._weekdays[m && m !== true && this._weekdays.isFormat.test(format) ? 'format' : 'standalone'];
  return m === true ? shiftWeekdays(weekdays, this._week.dow) : m ? weekdays[m.day()] : weekdays;
}

function localeWeekdaysShort(m) {
  return m === true ? shiftWeekdays(this._weekdaysShort, this._week.dow) : m ? this._weekdaysShort[m.day()] : this._weekdaysShort;
}

function localeWeekdaysMin(m) {
  return m === true ? shiftWeekdays(this._weekdaysMin, this._week.dow) : m ? this._weekdaysMin[m.day()] : this._weekdaysMin;
}

function handleStrictParse$1(weekdayName, format, strict) {
  var i,
      ii,
      mom,
      llc = weekdayName.toLocaleLowerCase();

  if (!this._weekdaysParse) {
    this._weekdaysParse = [];
    this._shortWeekdaysParse = [];
    this._minWeekdaysParse = [];

    for (i = 0; i < 7; ++i) {
      mom = createUTC([2000, 1]).day(i);
      this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();
      this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();
      this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();
    }
  }

  if (strict) {
    if (format === 'dddd') {
      ii = indexOf.call(this._weekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else if (format === 'ddd') {
      ii = indexOf.call(this._shortWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._minWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    }
  } else {
    if (format === 'dddd') {
      ii = indexOf.call(this._weekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._shortWeekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._minWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else if (format === 'ddd') {
      ii = indexOf.call(this._shortWeekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._weekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._minWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._minWeekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._weekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._shortWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    }
  }
}

function localeWeekdaysParse(weekdayName, format, strict) {
  var i, mom, regex;

  if (this._weekdaysParseExact) {
    return handleStrictParse$1.call(this, weekdayName, format, strict);
  }

  if (!this._weekdaysParse) {
    this._weekdaysParse = [];
    this._minWeekdaysParse = [];
    this._shortWeekdaysParse = [];
    this._fullWeekdaysParse = [];
  }

  for (i = 0; i < 7; i++) {
    mom = createUTC([2000, 1]).day(i);

    if (strict && !this._fullWeekdaysParse[i]) {
      this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\.?') + '$', 'i');
      this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$', 'i');
      this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$', 'i');
    }

    if (!this._weekdaysParse[i]) {
      regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
      this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
    }

    if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
      return i;
    } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
      return i;
    } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
      return i;
    } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
      return i;
    }
  }
}

function getSetDayOfWeek(input) {
  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();

  if (input != null) {
    input = parseWeekday(input, this.localeData());
    return this.add(input - day, 'd');
  } else {
    return day;
  }
}

function getSetLocaleDayOfWeek(input) {
  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
  return input == null ? weekday : this.add(input - weekday, 'd');
}

function getSetISODayOfWeek(input) {
  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  if (input != null) {
    var weekday = parseIsoWeekday(input, this.localeData());
    return this.day(this.day() % 7 ? weekday : weekday - 7);
  } else {
    return this.day() || 7;
  }
}

function weekdaysRegex(isStrict) {
  if (this._weekdaysParseExact) {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      computeWeekdaysParse.call(this);
    }

    if (isStrict) {
      return this._weekdaysStrictRegex;
    } else {
      return this._weekdaysRegex;
    }
  } else {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      this._weekdaysRegex = defaultWeekdaysRegex;
    }

    return this._weekdaysStrictRegex && isStrict ? this._weekdaysStrictRegex : this._weekdaysRegex;
  }
}

function weekdaysShortRegex(isStrict) {
  if (this._weekdaysParseExact) {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      computeWeekdaysParse.call(this);
    }

    if (isStrict) {
      return this._weekdaysShortStrictRegex;
    } else {
      return this._weekdaysShortRegex;
    }
  } else {
    if (!hasOwnProp(this, '_weekdaysShortRegex')) {
      this._weekdaysShortRegex = defaultWeekdaysShortRegex;
    }

    return this._weekdaysShortStrictRegex && isStrict ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
  }
}

function weekdaysMinRegex(isStrict) {
  if (this._weekdaysParseExact) {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      computeWeekdaysParse.call(this);
    }

    if (isStrict) {
      return this._weekdaysMinStrictRegex;
    } else {
      return this._weekdaysMinRegex;
    }
  } else {
    if (!hasOwnProp(this, '_weekdaysMinRegex')) {
      this._weekdaysMinRegex = defaultWeekdaysMinRegex;
    }

    return this._weekdaysMinStrictRegex && isStrict ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
  }
}

function computeWeekdaysParse() {
  function cmpLenRev(a, b) {
    return b.length - a.length;
  }

  var minPieces = [],
      shortPieces = [],
      longPieces = [],
      mixedPieces = [],
      i,
      mom,
      minp,
      shortp,
      longp;

  for (i = 0; i < 7; i++) {
    mom = createUTC([2000, 1]).day(i);
    minp = regexEscape(this.weekdaysMin(mom, ''));
    shortp = regexEscape(this.weekdaysShort(mom, ''));
    longp = regexEscape(this.weekdays(mom, ''));
    minPieces.push(minp);
    shortPieces.push(shortp);
    longPieces.push(longp);
    mixedPieces.push(minp);
    mixedPieces.push(shortp);
    mixedPieces.push(longp);
  }

  minPieces.sort(cmpLenRev);
  shortPieces.sort(cmpLenRev);
  longPieces.sort(cmpLenRev);
  mixedPieces.sort(cmpLenRev);
  this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
  this._weekdaysShortRegex = this._weekdaysRegex;
  this._weekdaysMinRegex = this._weekdaysRegex;
  this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
  this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
  this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');
}

function hFormat() {
  return this.hours() % 12 || 12;
}

function kFormat() {
  return this.hours() || 24;
}

addFormatToken('H', ['HH', 2], 0, 'hour');
addFormatToken('h', ['hh', 2], 0, hFormat);
addFormatToken('k', ['kk', 2], 0, kFormat);
addFormatToken('hmm', 0, 0, function () {
  return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
});
addFormatToken('hmmss', 0, 0, function () {
  return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) + zeroFill(this.seconds(), 2);
});
addFormatToken('Hmm', 0, 0, function () {
  return '' + this.hours() + zeroFill(this.minutes(), 2);
});
addFormatToken('Hmmss', 0, 0, function () {
  return '' + this.hours() + zeroFill(this.minutes(), 2) + zeroFill(this.seconds(), 2);
});

function meridiem(token, lowercase) {
  addFormatToken(token, 0, 0, function () {
    return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
  });
}

meridiem('a', true);
meridiem('A', false);
addUnitAlias('hour', 'h');
addUnitPriority('hour', 13);

function matchMeridiem(isStrict, locale) {
  return locale._meridiemParse;
}

addRegexToken('a', matchMeridiem);
addRegexToken('A', matchMeridiem);
addRegexToken('H', match1to2);
addRegexToken('h', match1to2);
addRegexToken('k', match1to2);
addRegexToken('HH', match1to2, match2);
addRegexToken('hh', match1to2, match2);
addRegexToken('kk', match1to2, match2);
addRegexToken('hmm', match3to4);
addRegexToken('hmmss', match5to6);
addRegexToken('Hmm', match3to4);
addRegexToken('Hmmss', match5to6);
addParseToken(['H', 'HH'], HOUR);
addParseToken(['k', 'kk'], function (input, array, config) {
  var kInput = toInt(input);
  array[HOUR] = kInput === 24 ? 0 : kInput;
});
addParseToken(['a', 'A'], function (input, array, config) {
  config._isPm = config._locale.isPM(input);
  config._meridiem = input;
});
addParseToken(['h', 'hh'], function (input, array, config) {
  array[HOUR] = toInt(input);
  getParsingFlags(config).bigHour = true;
});
addParseToken('hmm', function (input, array, config) {
  var pos = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos));
  array[MINUTE] = toInt(input.substr(pos));
  getParsingFlags(config).bigHour = true;
});
addParseToken('hmmss', function (input, array, config) {
  var pos1 = input.length - 4,
      pos2 = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos1));
  array[MINUTE] = toInt(input.substr(pos1, 2));
  array[SECOND] = toInt(input.substr(pos2));
  getParsingFlags(config).bigHour = true;
});
addParseToken('Hmm', function (input, array, config) {
  var pos = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos));
  array[MINUTE] = toInt(input.substr(pos));
});
addParseToken('Hmmss', function (input, array, config) {
  var pos1 = input.length - 4,
      pos2 = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos1));
  array[MINUTE] = toInt(input.substr(pos1, 2));
  array[SECOND] = toInt(input.substr(pos2));
});

function localeIsPM(input) {
  return (input + '').toLowerCase().charAt(0) === 'p';
}

var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i,
    getSetHour = makeGetSet('Hours', true);

function localeMeridiem(hours, minutes, isLower) {
  if (hours > 11) {
    return isLower ? 'pm' : 'PM';
  } else {
    return isLower ? 'am' : 'AM';
  }
}

var baseConfig = {
  calendar: defaultCalendar,
  longDateFormat: defaultLongDateFormat,
  invalidDate: defaultInvalidDate,
  ordinal: defaultOrdinal,
  dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,
  relativeTime: defaultRelativeTime,
  months: defaultLocaleMonths,
  monthsShort: defaultLocaleMonthsShort,
  week: defaultLocaleWeek,
  weekdays: defaultLocaleWeekdays,
  weekdaysMin: defaultLocaleWeekdaysMin,
  weekdaysShort: defaultLocaleWeekdaysShort,
  meridiemParse: defaultLocaleMeridiemParse
};
var locales = {},
    localeFamilies = {},
    globalLocale;

function commonPrefix(arr1, arr2) {
  var i,
      minl = Math.min(arr1.length, arr2.length);

  for (i = 0; i < minl; i += 1) {
    if (arr1[i] !== arr2[i]) {
      return i;
    }
  }

  return minl;
}

function normalizeLocale(key) {
  return key ? key.toLowerCase().replace('_', '-') : key;
}

function chooseLocale(names) {
  var i = 0,
      j,
      next,
      locale,
      split;

  while (i < names.length) {
    split = normalizeLocale(names[i]).split('-');
    j = split.length;
    next = normalizeLocale(names[i + 1]);
    next = next ? next.split('-') : null;

    while (j > 0) {
      locale = loadLocale(split.slice(0, j).join('-'));

      if (locale) {
        return locale;
      }

      if (next && next.length >= j && commonPrefix(split, next) >= j - 1) {
        break;
      }

      j--;
    }

    i++;
  }

  return globalLocale;
}

function loadLocale(name) {
  var oldLocale = null,
      aliasedRequire;

  if (locales[name] === undefined && typeof module !== 'undefined' && module && module.exports) {
    try {
      oldLocale = globalLocale._abbr;
      aliasedRequire = require;
      __webpack_require__("./node_modules/moment/dist/locale sync recursive ^\\.\\/.*$")("./" + name);
      getSetGlobalLocale(oldLocale);
    } catch (e) {
      locales[name] = null;
    }
  }

  return locales[name];
}

function getSetGlobalLocale(key, values) {
  var data;

  if (key) {
    if (isUndefined(values)) {
      data = getLocale(key);
    } else {
      data = defineLocale(key, values);
    }

    if (data) {
      globalLocale = data;
    } else {
      if (typeof console !== 'undefined' && console.warn) {
        console.warn('Locale ' + key + ' not found. Did you forget to load it?');
      }
    }
  }

  return globalLocale._abbr;
}

function defineLocale(name, config) {
  if (config !== null) {
    var locale,
        parentConfig = baseConfig;
    config.abbr = name;

    if (locales[name] != null) {
      deprecateSimple('defineLocaleOverride', 'use moment.updateLocale(localeName, config) to change ' + 'an existing locale. moment.defineLocale(localeName, ' + 'config) should only be used for creating a new locale ' + 'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');
      parentConfig = locales[name]._config;
    } else if (config.parentLocale != null) {
      if (locales[config.parentLocale] != null) {
        parentConfig = locales[config.parentLocale]._config;
      } else {
        locale = loadLocale(config.parentLocale);

        if (locale != null) {
          parentConfig = locale._config;
        } else {
          if (!localeFamilies[config.parentLocale]) {
            localeFamilies[config.parentLocale] = [];
          }

          localeFamilies[config.parentLocale].push({
            name: name,
            config: config
          });
          return null;
        }
      }
    }

    locales[name] = new Locale(mergeConfigs(parentConfig, config));

    if (localeFamilies[name]) {
      localeFamilies[name].forEach(function (x) {
        defineLocale(x.name, x.config);
      });
    }

    getSetGlobalLocale(name);
    return locales[name];
  } else {
    delete locales[name];
    return null;
  }
}

function updateLocale(name, config) {
  if (config != null) {
    var locale,
        tmpLocale,
        parentConfig = baseConfig;

    if (locales[name] != null && locales[name].parentLocale != null) {
      locales[name].set(mergeConfigs(locales[name]._config, config));
    } else {
      tmpLocale = loadLocale(name);

      if (tmpLocale != null) {
        parentConfig = tmpLocale._config;
      }

      config = mergeConfigs(parentConfig, config);

      if (tmpLocale == null) {
        config.abbr = name;
      }

      locale = new Locale(config);
      locale.parentLocale = locales[name];
      locales[name] = locale;
    }

    getSetGlobalLocale(name);
  } else {
    if (locales[name] != null) {
      if (locales[name].parentLocale != null) {
        locales[name] = locales[name].parentLocale;

        if (name === getSetGlobalLocale()) {
          getSetGlobalLocale(name);
        }
      } else if (locales[name] != null) {
        delete locales[name];
      }
    }
  }

  return locales[name];
}

function getLocale(key) {
  var locale;

  if (key && key._locale && key._locale._abbr) {
    key = key._locale._abbr;
  }

  if (!key) {
    return globalLocale;
  }

  if (!isArray(key)) {
    locale = loadLocale(key);

    if (locale) {
      return locale;
    }

    key = [key];
  }

  return chooseLocale(key);
}

function listLocales() {
  return keys(locales);
}

function checkOverflow(m) {
  var overflow,
      a = m._a;

  if (a && getParsingFlags(m).overflow === -2) {
    overflow = a[MONTH] < 0 || a[MONTH] > 11 ? MONTH : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH]) ? DATE : a[HOUR] < 0 || a[HOUR] > 24 || a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0) ? HOUR : a[MINUTE] < 0 || a[MINUTE] > 59 ? MINUTE : a[SECOND] < 0 || a[SECOND] > 59 ? SECOND : a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND : -1;

    if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
      overflow = DATE;
    }

    if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
      overflow = WEEK;
    }

    if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
      overflow = WEEKDAY;
    }

    getParsingFlags(m).overflow = overflow;
  }

  return m;
}

var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
    basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
    tzRegex = /Z|[+-]\d\d(?::?\d\d)?/,
    isoDates = [['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/], ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/], ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/], ['GGGG-[W]WW', /\d{4}-W\d\d/, false], ['YYYY-DDD', /\d{4}-\d{3}/], ['YYYY-MM', /\d{4}-\d\d/, false], ['YYYYYYMMDD', /[+-]\d{10}/], ['YYYYMMDD', /\d{8}/], ['GGGG[W]WWE', /\d{4}W\d{3}/], ['GGGG[W]WW', /\d{4}W\d{2}/, false], ['YYYYDDD', /\d{7}/], ['YYYYMM', /\d{6}/, false], ['YYYY', /\d{4}/, false]],
    isoTimes = [['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/], ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/], ['HH:mm:ss', /\d\d:\d\d:\d\d/], ['HH:mm', /\d\d:\d\d/], ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/], ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/], ['HHmmss', /\d\d\d\d\d\d/], ['HHmm', /\d\d\d\d/], ['HH', /\d\d/]],
    aspNetJsonRegex = /^\/?Date\((-?\d+)/i,
    rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
    obsOffsets = {
  UT: 0,
  GMT: 0,
  EDT: -4 * 60,
  EST: -5 * 60,
  CDT: -5 * 60,
  CST: -6 * 60,
  MDT: -6 * 60,
  MST: -7 * 60,
  PDT: -7 * 60,
  PST: -8 * 60
};

function configFromISO(config) {
  var i,
      l,
      string = config._i,
      match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
      allowTime,
      dateFormat,
      timeFormat,
      tzFormat;

  if (match) {
    getParsingFlags(config).iso = true;

    for (i = 0, l = isoDates.length; i < l; i++) {
      if (isoDates[i][1].exec(match[1])) {
        dateFormat = isoDates[i][0];
        allowTime = isoDates[i][2] !== false;
        break;
      }
    }

    if (dateFormat == null) {
      config._isValid = false;
      return;
    }

    if (match[3]) {
      for (i = 0, l = isoTimes.length; i < l; i++) {
        if (isoTimes[i][1].exec(match[3])) {
          timeFormat = (match[2] || ' ') + isoTimes[i][0];
          break;
        }
      }

      if (timeFormat == null) {
        config._isValid = false;
        return;
      }
    }

    if (!allowTime && timeFormat != null) {
      config._isValid = false;
      return;
    }

    if (match[4]) {
      if (tzRegex.exec(match[4])) {
        tzFormat = 'Z';
      } else {
        config._isValid = false;
        return;
      }
    }

    config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
    configFromStringAndFormat(config);
  } else {
    config._isValid = false;
  }
}

function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  var result = [untruncateYear(yearStr), defaultLocaleMonthsShort.indexOf(monthStr), parseInt(dayStr, 10), parseInt(hourStr, 10), parseInt(minuteStr, 10)];

  if (secondStr) {
    result.push(parseInt(secondStr, 10));
  }

  return result;
}

function untruncateYear(yearStr) {
  var year = parseInt(yearStr, 10);

  if (year <= 49) {
    return 2000 + year;
  } else if (year <= 999) {
    return 1900 + year;
  }

  return year;
}

function preprocessRFC2822(s) {
  return s.replace(/\([^)]*\)|[\n\t]/g, ' ').replace(/(\s\s+)/g, ' ').replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}

function checkWeekday(weekdayStr, parsedInput, config) {
  if (weekdayStr) {
    var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),
        weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();

    if (weekdayProvided !== weekdayActual) {
      getParsingFlags(config).weekdayMismatch = true;
      config._isValid = false;
      return false;
    }
  }

  return true;
}

function calculateOffset(obsOffset, militaryOffset, numOffset) {
  if (obsOffset) {
    return obsOffsets[obsOffset];
  } else if (militaryOffset) {
    return 0;
  } else {
    var hm = parseInt(numOffset, 10),
        m = hm % 100,
        h = (hm - m) / 100;
    return h * 60 + m;
  }
}

function configFromRFC2822(config) {
  var match = rfc2822.exec(preprocessRFC2822(config._i)),
      parsedArray;

  if (match) {
    parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);

    if (!checkWeekday(match[1], parsedArray, config)) {
      return;
    }

    config._a = parsedArray;
    config._tzm = calculateOffset(match[8], match[9], match[10]);
    config._d = createUTCDate.apply(null, config._a);

    config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);

    getParsingFlags(config).rfc2822 = true;
  } else {
    config._isValid = false;
  }
}

function configFromString(config) {
  var matched = aspNetJsonRegex.exec(config._i);

  if (matched !== null) {
    config._d = new Date(+matched[1]);
    return;
  }

  configFromISO(config);

  if (config._isValid === false) {
    delete config._isValid;
  } else {
    return;
  }

  configFromRFC2822(config);

  if (config._isValid === false) {
    delete config._isValid;
  } else {
    return;
  }

  if (config._strict) {
    config._isValid = false;
  } else {
    hooks.createFromInputFallback(config);
  }
}

hooks.createFromInputFallback = deprecate('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' + 'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' + 'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.', function (config) {
  config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
});

function defaults(a, b, c) {
  if (a != null) {
    return a;
  }

  if (b != null) {
    return b;
  }

  return c;
}

function currentDateArray(config) {
  var nowValue = new Date(hooks.now());

  if (config._useUTC) {
    return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
  }

  return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
}

function configFromArray(config) {
  var i,
      date,
      input = [],
      currentDate,
      expectedWeekday,
      yearToUse;

  if (config._d) {
    return;
  }

  currentDate = currentDateArray(config);

  if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
    dayOfYearFromWeekInfo(config);
  }

  if (config._dayOfYear != null) {
    yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

    if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {
      getParsingFlags(config)._overflowDayOfYear = true;
    }

    date = createUTCDate(yearToUse, 0, config._dayOfYear);
    config._a[MONTH] = date.getUTCMonth();
    config._a[DATE] = date.getUTCDate();
  }

  for (i = 0; i < 3 && config._a[i] == null; ++i) {
    config._a[i] = input[i] = currentDate[i];
  }

  for (; i < 7; i++) {
    config._a[i] = input[i] = config._a[i] == null ? i === 2 ? 1 : 0 : config._a[i];
  }

  if (config._a[HOUR] === 24 && config._a[MINUTE] === 0 && config._a[SECOND] === 0 && config._a[MILLISECOND] === 0) {
    config._nextDay = true;
    config._a[HOUR] = 0;
  }

  config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
  expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();

  if (config._tzm != null) {
    config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
  }

  if (config._nextDay) {
    config._a[HOUR] = 24;
  }

  if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {
    getParsingFlags(config).weekdayMismatch = true;
  }
}

function dayOfYearFromWeekInfo(config) {
  var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;
  w = config._w;

  if (w.GG != null || w.W != null || w.E != null) {
    dow = 1;
    doy = 4;
    weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);
    week = defaults(w.W, 1);
    weekday = defaults(w.E, 1);

    if (weekday < 1 || weekday > 7) {
      weekdayOverflow = true;
    }
  } else {
    dow = config._locale._week.dow;
    doy = config._locale._week.doy;
    curWeek = weekOfYear(createLocal(), dow, doy);
    weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);
    week = defaults(w.w, curWeek.week);

    if (w.d != null) {
      weekday = w.d;

      if (weekday < 0 || weekday > 6) {
        weekdayOverflow = true;
      }
    } else if (w.e != null) {
      weekday = w.e + dow;

      if (w.e < 0 || w.e > 6) {
        weekdayOverflow = true;
      }
    } else {
      weekday = dow;
    }
  }

  if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
    getParsingFlags(config)._overflowWeeks = true;
  } else if (weekdayOverflow != null) {
    getParsingFlags(config)._overflowWeekday = true;
  } else {
    temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
    config._a[YEAR] = temp.year;
    config._dayOfYear = temp.dayOfYear;
  }
}

hooks.ISO_8601 = function () {};

hooks.RFC_2822 = function () {};

function configFromStringAndFormat(config) {
  if (config._f === hooks.ISO_8601) {
    configFromISO(config);
    return;
  }

  if (config._f === hooks.RFC_2822) {
    configFromRFC2822(config);
    return;
  }

  config._a = [];
  getParsingFlags(config).empty = true;
  var string = '' + config._i,
      i,
      parsedInput,
      tokens,
      token,
      skipped,
      stringLength = string.length,
      totalParsedInputLength = 0,
      era;
  tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

  for (i = 0; i < tokens.length; i++) {
    token = tokens[i];
    parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];

    if (parsedInput) {
      skipped = string.substr(0, string.indexOf(parsedInput));

      if (skipped.length > 0) {
        getParsingFlags(config).unusedInput.push(skipped);
      }

      string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
      totalParsedInputLength += parsedInput.length;
    }

    if (formatTokenFunctions[token]) {
      if (parsedInput) {
        getParsingFlags(config).empty = false;
      } else {
        getParsingFlags(config).unusedTokens.push(token);
      }

      addTimeToArrayFromToken(token, parsedInput, config);
    } else if (config._strict && !parsedInput) {
      getParsingFlags(config).unusedTokens.push(token);
    }
  }

  getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;

  if (string.length > 0) {
    getParsingFlags(config).unusedInput.push(string);
  }

  if (config._a[HOUR] <= 12 && getParsingFlags(config).bigHour === true && config._a[HOUR] > 0) {
    getParsingFlags(config).bigHour = undefined;
  }

  getParsingFlags(config).parsedDateParts = config._a.slice(0);
  getParsingFlags(config).meridiem = config._meridiem;
  config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);
  era = getParsingFlags(config).era;

  if (era !== null) {
    config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);
  }

  configFromArray(config);
  checkOverflow(config);
}

function meridiemFixWrap(locale, hour, meridiem) {
  var isPm;

  if (meridiem == null) {
    return hour;
  }

  if (locale.meridiemHour != null) {
    return locale.meridiemHour(hour, meridiem);
  } else if (locale.isPM != null) {
    isPm = locale.isPM(meridiem);

    if (isPm && hour < 12) {
      hour += 12;
    }

    if (!isPm && hour === 12) {
      hour = 0;
    }

    return hour;
  } else {
    return hour;
  }
}

function configFromStringAndArray(config) {
  var tempConfig,
      bestMoment,
      scoreToBeat,
      i,
      currentScore,
      validFormatFound,
      bestFormatIsValid = false;

  if (config._f.length === 0) {
    getParsingFlags(config).invalidFormat = true;
    config._d = new Date(NaN);
    return;
  }

  for (i = 0; i < config._f.length; i++) {
    currentScore = 0;
    validFormatFound = false;
    tempConfig = copyConfig({}, config);

    if (config._useUTC != null) {
      tempConfig._useUTC = config._useUTC;
    }

    tempConfig._f = config._f[i];
    configFromStringAndFormat(tempConfig);

    if (isValid(tempConfig)) {
      validFormatFound = true;
    }

    currentScore += getParsingFlags(tempConfig).charsLeftOver;
    currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;
    getParsingFlags(tempConfig).score = currentScore;

    if (!bestFormatIsValid) {
      if (scoreToBeat == null || currentScore < scoreToBeat || validFormatFound) {
        scoreToBeat = currentScore;
        bestMoment = tempConfig;

        if (validFormatFound) {
          bestFormatIsValid = true;
        }
      }
    } else {
      if (currentScore < scoreToBeat) {
        scoreToBeat = currentScore;
        bestMoment = tempConfig;
      }
    }
  }

  extend(config, bestMoment || tempConfig);
}

function configFromObject(config) {
  if (config._d) {
    return;
  }

  var i = normalizeObjectUnits(config._i),
      dayOrDate = i.day === undefined ? i.date : i.day;
  config._a = map([i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond], function (obj) {
    return obj && parseInt(obj, 10);
  });
  configFromArray(config);
}

function createFromConfig(config) {
  var res = new Moment(checkOverflow(prepareConfig(config)));

  if (res._nextDay) {
    res.add(1, 'd');
    res._nextDay = undefined;
  }

  return res;
}

function prepareConfig(config) {
  var input = config._i,
      format = config._f;
  config._locale = config._locale || getLocale(config._l);

  if (input === null || format === undefined && input === '') {
    return createInvalid({
      nullInput: true
    });
  }

  if (typeof input === 'string') {
    config._i = input = config._locale.preparse(input);
  }

  if (isMoment(input)) {
    return new Moment(checkOverflow(input));
  } else if (isDate(input)) {
    config._d = input;
  } else if (isArray(format)) {
    configFromStringAndArray(config);
  } else if (format) {
    configFromStringAndFormat(config);
  } else {
    configFromInput(config);
  }

  if (!isValid(config)) {
    config._d = null;
  }

  return config;
}

function configFromInput(config) {
  var input = config._i;

  if (isUndefined(input)) {
    config._d = new Date(hooks.now());
  } else if (isDate(input)) {
    config._d = new Date(input.valueOf());
  } else if (typeof input === 'string') {
    configFromString(config);
  } else if (isArray(input)) {
    config._a = map(input.slice(0), function (obj) {
      return parseInt(obj, 10);
    });
    configFromArray(config);
  } else if (isObject(input)) {
    configFromObject(config);
  } else if (isNumber(input)) {
    config._d = new Date(input);
  } else {
    hooks.createFromInputFallback(config);
  }
}

function createLocalOrUTC(input, format, locale, strict, isUTC) {
  var c = {};

  if (format === true || format === false) {
    strict = format;
    format = undefined;
  }

  if (locale === true || locale === false) {
    strict = locale;
    locale = undefined;
  }

  if (isObject(input) && isObjectEmpty(input) || isArray(input) && input.length === 0) {
    input = undefined;
  }

  c._isAMomentObject = true;
  c._useUTC = c._isUTC = isUTC;
  c._l = locale;
  c._i = input;
  c._f = format;
  c._strict = strict;
  return createFromConfig(c);
}

function createLocal(input, format, locale, strict) {
  return createLocalOrUTC(input, format, locale, strict, false);
}

var prototypeMin = deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/', function () {
  var other = createLocal.apply(null, arguments);

  if (this.isValid() && other.isValid()) {
    return other < this ? this : other;
  } else {
    return createInvalid();
  }
}),
    prototypeMax = deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/', function () {
  var other = createLocal.apply(null, arguments);

  if (this.isValid() && other.isValid()) {
    return other > this ? this : other;
  } else {
    return createInvalid();
  }
});

function pickBy(fn, moments) {
  var res, i;

  if (moments.length === 1 && isArray(moments[0])) {
    moments = moments[0];
  }

  if (!moments.length) {
    return createLocal();
  }

  res = moments[0];

  for (i = 1; i < moments.length; ++i) {
    if (!moments[i].isValid() || moments[i][fn](res)) {
      res = moments[i];
    }
  }

  return res;
}

function min() {
  var args = [].slice.call(arguments, 0);
  return pickBy('isBefore', args);
}

function max() {
  var args = [].slice.call(arguments, 0);
  return pickBy('isAfter', args);
}

var now = function now() {
  return Date.now ? Date.now() : +new Date();
};

var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];

function isDurationValid(m) {
  var key,
      unitHasDecimal = false,
      i;

  for (key in m) {
    if (hasOwnProp(m, key) && !(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {
      return false;
    }
  }

  for (i = 0; i < ordering.length; ++i) {
    if (m[ordering[i]]) {
      if (unitHasDecimal) {
        return false;
      }

      if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {
        unitHasDecimal = true;
      }
    }
  }

  return true;
}

function isValid$1() {
  return this._isValid;
}

function createInvalid$1() {
  return createDuration(NaN);
}

function Duration(duration) {
  var normalizedInput = normalizeObjectUnits(duration),
      years = normalizedInput.year || 0,
      quarters = normalizedInput.quarter || 0,
      months = normalizedInput.month || 0,
      weeks = normalizedInput.week || normalizedInput.isoWeek || 0,
      days = normalizedInput.day || 0,
      hours = normalizedInput.hour || 0,
      minutes = normalizedInput.minute || 0,
      seconds = normalizedInput.second || 0,
      milliseconds = normalizedInput.millisecond || 0;
  this._isValid = isDurationValid(normalizedInput);
  this._milliseconds = +milliseconds + seconds * 1e3 + minutes * 6e4 + hours * 1000 * 60 * 60;
  this._days = +days + weeks * 7;
  this._months = +months + quarters * 3 + years * 12;
  this._data = {};
  this._locale = getLocale();

  this._bubble();
}

function isDuration(obj) {
  return obj instanceof Duration;
}

function absRound(number) {
  if (number < 0) {
    return Math.round(-1 * number) * -1;
  } else {
    return Math.round(number);
  }
}

function compareArrays(array1, array2, dontConvert) {
  var len = Math.min(array1.length, array2.length),
      lengthDiff = Math.abs(array1.length - array2.length),
      diffs = 0,
      i;

  for (i = 0; i < len; i++) {
    if (dontConvert && array1[i] !== array2[i] || !dontConvert && toInt(array1[i]) !== toInt(array2[i])) {
      diffs++;
    }
  }

  return diffs + lengthDiff;
}

function offset(token, separator) {
  addFormatToken(token, 0, 0, function () {
    var offset = this.utcOffset(),
        sign = '+';

    if (offset < 0) {
      offset = -offset;
      sign = '-';
    }

    return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~offset % 60, 2);
  });
}

offset('Z', ':');
offset('ZZ', '');
addRegexToken('Z', matchShortOffset);
addRegexToken('ZZ', matchShortOffset);
addParseToken(['Z', 'ZZ'], function (input, array, config) {
  config._useUTC = true;
  config._tzm = offsetFromString(matchShortOffset, input);
});
var chunkOffset = /([\+\-]|\d\d)/gi;

function offsetFromString(matcher, string) {
  var matches = (string || '').match(matcher),
      chunk,
      parts,
      minutes;

  if (matches === null) {
    return null;
  }

  chunk = matches[matches.length - 1] || [];
  parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];
  minutes = +(parts[1] * 60) + toInt(parts[2]);
  return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;
}

function cloneWithOffset(input, model) {
  var res, diff;

  if (model._isUTC) {
    res = model.clone();
    diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();

    res._d.setTime(res._d.valueOf() + diff);

    hooks.updateOffset(res, false);
    return res;
  } else {
    return createLocal(input).local();
  }
}

function getDateOffset(m) {
  return -Math.round(m._d.getTimezoneOffset());
}

hooks.updateOffset = function () {};

function getSetOffset(input, keepLocalTime, keepMinutes) {
  var offset = this._offset || 0,
      localAdjust;

  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  if (input != null) {
    if (typeof input === 'string') {
      input = offsetFromString(matchShortOffset, input);

      if (input === null) {
        return this;
      }
    } else if (Math.abs(input) < 16 && !keepMinutes) {
      input = input * 60;
    }

    if (!this._isUTC && keepLocalTime) {
      localAdjust = getDateOffset(this);
    }

    this._offset = input;
    this._isUTC = true;

    if (localAdjust != null) {
      this.add(localAdjust, 'm');
    }

    if (offset !== input) {
      if (!keepLocalTime || this._changeInProgress) {
        addSubtract(this, createDuration(input - offset, 'm'), 1, false);
      } else if (!this._changeInProgress) {
        this._changeInProgress = true;
        hooks.updateOffset(this, true);
        this._changeInProgress = null;
      }
    }

    return this;
  } else {
    return this._isUTC ? offset : getDateOffset(this);
  }
}

function getSetZone(input, keepLocalTime) {
  if (input != null) {
    if (typeof input !== 'string') {
      input = -input;
    }

    this.utcOffset(input, keepLocalTime);
    return this;
  } else {
    return -this.utcOffset();
  }
}

function setOffsetToUTC(keepLocalTime) {
  return this.utcOffset(0, keepLocalTime);
}

function setOffsetToLocal(keepLocalTime) {
  if (this._isUTC) {
    this.utcOffset(0, keepLocalTime);
    this._isUTC = false;

    if (keepLocalTime) {
      this.subtract(getDateOffset(this), 'm');
    }
  }

  return this;
}

function setOffsetToParsedOffset() {
  if (this._tzm != null) {
    this.utcOffset(this._tzm, false, true);
  } else if (typeof this._i === 'string') {
    var tZone = offsetFromString(matchOffset, this._i);

    if (tZone != null) {
      this.utcOffset(tZone);
    } else {
      this.utcOffset(0, true);
    }
  }

  return this;
}

function hasAlignedHourOffset(input) {
  if (!this.isValid()) {
    return false;
  }

  input = input ? createLocal(input).utcOffset() : 0;
  return (this.utcOffset() - input) % 60 === 0;
}

function isDaylightSavingTime() {
  return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
}

function isDaylightSavingTimeShifted() {
  if (!isUndefined(this._isDSTShifted)) {
    return this._isDSTShifted;
  }

  var c = {},
      other;
  copyConfig(c, this);
  c = prepareConfig(c);

  if (c._a) {
    other = c._isUTC ? createUTC(c._a) : createLocal(c._a);
    this._isDSTShifted = this.isValid() && compareArrays(c._a, other.toArray()) > 0;
  } else {
    this._isDSTShifted = false;
  }

  return this._isDSTShifted;
}

function isLocal() {
  return this.isValid() ? !this._isUTC : false;
}

function isUtcOffset() {
  return this.isValid() ? this._isUTC : false;
}

function isUtc() {
  return this.isValid() ? this._isUTC && this._offset === 0 : false;
}

var aspNetRegex = /^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,
    isoRegex = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;

function createDuration(input, key) {
  var duration = input,
      match = null,
      sign,
      ret,
      diffRes;

  if (isDuration(input)) {
    duration = {
      ms: input._milliseconds,
      d: input._days,
      M: input._months
    };
  } else if (isNumber(input) || !isNaN(+input)) {
    duration = {};

    if (key) {
      duration[key] = +input;
    } else {
      duration.milliseconds = +input;
    }
  } else if (match = aspNetRegex.exec(input)) {
    sign = match[1] === '-' ? -1 : 1;
    duration = {
      y: 0,
      d: toInt(match[DATE]) * sign,
      h: toInt(match[HOUR]) * sign,
      m: toInt(match[MINUTE]) * sign,
      s: toInt(match[SECOND]) * sign,
      ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign
    };
  } else if (match = isoRegex.exec(input)) {
    sign = match[1] === '-' ? -1 : 1;
    duration = {
      y: parseIso(match[2], sign),
      M: parseIso(match[3], sign),
      w: parseIso(match[4], sign),
      d: parseIso(match[5], sign),
      h: parseIso(match[6], sign),
      m: parseIso(match[7], sign),
      s: parseIso(match[8], sign)
    };
  } else if (duration == null) {
    duration = {};
  } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
    diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));
    duration = {};
    duration.ms = diffRes.milliseconds;
    duration.M = diffRes.months;
  }

  ret = new Duration(duration);

  if (isDuration(input) && hasOwnProp(input, '_locale')) {
    ret._locale = input._locale;
  }

  if (isDuration(input) && hasOwnProp(input, '_isValid')) {
    ret._isValid = input._isValid;
  }

  return ret;
}

createDuration.fn = Duration.prototype;
createDuration.invalid = createInvalid$1;

function parseIso(inp, sign) {
  var res = inp && parseFloat(inp.replace(',', '.'));
  return (isNaN(res) ? 0 : res) * sign;
}

function positiveMomentsDifference(base, other) {
  var res = {};
  res.months = other.month() - base.month() + (other.year() - base.year()) * 12;

  if (base.clone().add(res.months, 'M').isAfter(other)) {
    --res.months;
  }

  res.milliseconds = +other - +base.clone().add(res.months, 'M');
  return res;
}

function momentsDifference(base, other) {
  var res;

  if (!(base.isValid() && other.isValid())) {
    return {
      milliseconds: 0,
      months: 0
    };
  }

  other = cloneWithOffset(other, base);

  if (base.isBefore(other)) {
    res = positiveMomentsDifference(base, other);
  } else {
    res = positiveMomentsDifference(other, base);
    res.milliseconds = -res.milliseconds;
    res.months = -res.months;
  }

  return res;
}

function createAdder(direction, name) {
  return function (val, period) {
    var dur, tmp;

    if (period !== null && !isNaN(+period)) {
      deprecateSimple(name, 'moment().' + name + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' + 'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');
      tmp = val;
      val = period;
      period = tmp;
    }

    dur = createDuration(val, period);
    addSubtract(this, dur, direction);
    return this;
  };
}

function addSubtract(mom, duration, isAdding, updateOffset) {
  var milliseconds = duration._milliseconds,
      days = absRound(duration._days),
      months = absRound(duration._months);

  if (!mom.isValid()) {
    return;
  }

  updateOffset = updateOffset == null ? true : updateOffset;

  if (months) {
    setMonth(mom, get(mom, 'Month') + months * isAdding);
  }

  if (days) {
    set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);
  }

  if (milliseconds) {
    mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
  }

  if (updateOffset) {
    hooks.updateOffset(mom, days || months);
  }
}

var add = createAdder(1, 'add'),
    subtract = createAdder(-1, 'subtract');

function isString(input) {
  return typeof input === 'string' || input instanceof String;
}

function isMomentInput(input) {
  return isMoment(input) || isDate(input) || isString(input) || isNumber(input) || isNumberOrStringArray(input) || isMomentInputObject(input) || input === null || input === undefined;
}

function isMomentInputObject(input) {
  var objectTest = isObject(input) && !isObjectEmpty(input),
      propertyTest = false,
      properties = ['years', 'year', 'y', 'months', 'month', 'M', 'days', 'day', 'd', 'dates', 'date', 'D', 'hours', 'hour', 'h', 'minutes', 'minute', 'm', 'seconds', 'second', 's', 'milliseconds', 'millisecond', 'ms'],
      i,
      property;

  for (i = 0; i < properties.length; i += 1) {
    property = properties[i];
    propertyTest = propertyTest || hasOwnProp(input, property);
  }

  return objectTest && propertyTest;
}

function isNumberOrStringArray(input) {
  var arrayTest = isArray(input),
      dataTypeTest = false;

  if (arrayTest) {
    dataTypeTest = input.filter(function (item) {
      return !isNumber(item) && isString(input);
    }).length === 0;
  }

  return arrayTest && dataTypeTest;
}

function isCalendarSpec(input) {
  var objectTest = isObject(input) && !isObjectEmpty(input),
      propertyTest = false,
      properties = ['sameDay', 'nextDay', 'lastDay', 'nextWeek', 'lastWeek', 'sameElse'],
      i,
      property;

  for (i = 0; i < properties.length; i += 1) {
    property = properties[i];
    propertyTest = propertyTest || hasOwnProp(input, property);
  }

  return objectTest && propertyTest;
}

function getCalendarFormat(myMoment, now) {
  var diff = myMoment.diff(now, 'days', true);
  return diff < -6 ? 'sameElse' : diff < -1 ? 'lastWeek' : diff < 0 ? 'lastDay' : diff < 1 ? 'sameDay' : diff < 2 ? 'nextDay' : diff < 7 ? 'nextWeek' : 'sameElse';
}

function calendar$1(time, formats) {
  if (arguments.length === 1) {
    if (!arguments[0]) {
      time = undefined;
      formats = undefined;
    } else if (isMomentInput(arguments[0])) {
      time = arguments[0];
      formats = undefined;
    } else if (isCalendarSpec(arguments[0])) {
      formats = arguments[0];
      time = undefined;
    }
  }

  var now = time || createLocal(),
      sod = cloneWithOffset(now, this).startOf('day'),
      format = hooks.calendarFormat(this, sod) || 'sameElse',
      output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);
  return this.format(output || this.localeData().calendar(format, this, createLocal(now)));
}

function clone() {
  return new Moment(this);
}

function isAfter(input, units) {
  var localInput = isMoment(input) ? input : createLocal(input);

  if (!(this.isValid() && localInput.isValid())) {
    return false;
  }

  units = normalizeUnits(units) || 'millisecond';

  if (units === 'millisecond') {
    return this.valueOf() > localInput.valueOf();
  } else {
    return localInput.valueOf() < this.clone().startOf(units).valueOf();
  }
}

function isBefore(input, units) {
  var localInput = isMoment(input) ? input : createLocal(input);

  if (!(this.isValid() && localInput.isValid())) {
    return false;
  }

  units = normalizeUnits(units) || 'millisecond';

  if (units === 'millisecond') {
    return this.valueOf() < localInput.valueOf();
  } else {
    return this.clone().endOf(units).valueOf() < localInput.valueOf();
  }
}

function isBetween(from, to, units, inclusivity) {
  var localFrom = isMoment(from) ? from : createLocal(from),
      localTo = isMoment(to) ? to : createLocal(to);

  if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {
    return false;
  }

  inclusivity = inclusivity || '()';
  return (inclusivity[0] === '(' ? this.isAfter(localFrom, units) : !this.isBefore(localFrom, units)) && (inclusivity[1] === ')' ? this.isBefore(localTo, units) : !this.isAfter(localTo, units));
}

function isSame(input, units) {
  var localInput = isMoment(input) ? input : createLocal(input),
      inputMs;

  if (!(this.isValid() && localInput.isValid())) {
    return false;
  }

  units = normalizeUnits(units) || 'millisecond';

  if (units === 'millisecond') {
    return this.valueOf() === localInput.valueOf();
  } else {
    inputMs = localInput.valueOf();
    return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();
  }
}

function isSameOrAfter(input, units) {
  return this.isSame(input, units) || this.isAfter(input, units);
}

function isSameOrBefore(input, units) {
  return this.isSame(input, units) || this.isBefore(input, units);
}

function diff(input, units, asFloat) {
  var that, zoneDelta, output;

  if (!this.isValid()) {
    return NaN;
  }

  that = cloneWithOffset(input, this);

  if (!that.isValid()) {
    return NaN;
  }

  zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;
  units = normalizeUnits(units);

  switch (units) {
    case 'year':
      output = monthDiff(this, that) / 12;
      break;

    case 'month':
      output = monthDiff(this, that);
      break;

    case 'quarter':
      output = monthDiff(this, that) / 3;
      break;

    case 'second':
      output = (this - that) / 1e3;
      break;

    case 'minute':
      output = (this - that) / 6e4;
      break;

    case 'hour':
      output = (this - that) / 36e5;
      break;

    case 'day':
      output = (this - that - zoneDelta) / 864e5;
      break;

    case 'week':
      output = (this - that - zoneDelta) / 6048e5;
      break;

    default:
      output = this - that;
  }

  return asFloat ? output : absFloor(output);
}

function monthDiff(a, b) {
  if (a.date() < b.date()) {
    return -monthDiff(b, a);
  }

  var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),
      anchor = a.clone().add(wholeMonthDiff, 'months'),
      anchor2,
      adjust;

  if (b - anchor < 0) {
    anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
    adjust = (b - anchor) / (anchor - anchor2);
  } else {
    anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
    adjust = (b - anchor) / (anchor2 - anchor);
  }

  return -(wholeMonthDiff + adjust) || 0;
}

hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';
hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';

function toString() {
  return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
}

function toISOString(keepOffset) {
  if (!this.isValid()) {
    return null;
  }

  var utc = keepOffset !== true,
      m = utc ? this.clone().utc() : this;

  if (m.year() < 0 || m.year() > 9999) {
    return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');
  }

  if (isFunction(Date.prototype.toISOString)) {
    if (utc) {
      return this.toDate().toISOString();
    } else {
      return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));
    }
  }

  return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');
}

function inspect() {
  if (!this.isValid()) {
    return 'moment.invalid(/* ' + this._i + ' */)';
  }

  var func = 'moment',
      zone = '',
      prefix,
      year,
      datetime,
      suffix;

  if (!this.isLocal()) {
    func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';
    zone = 'Z';
  }

  prefix = '[' + func + '("]';
  year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';
  datetime = '-MM-DD[T]HH:mm:ss.SSS';
  suffix = zone + '[")]';
  return this.format(prefix + year + datetime + suffix);
}

function format(inputString) {
  if (!inputString) {
    inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;
  }

  var output = formatMoment(this, inputString);
  return this.localeData().postformat(output);
}

function from(time, withoutSuffix) {
  if (this.isValid() && (isMoment(time) && time.isValid() || createLocal(time).isValid())) {
    return createDuration({
      to: this,
      from: time
    }).locale(this.locale()).humanize(!withoutSuffix);
  } else {
    return this.localeData().invalidDate();
  }
}

function fromNow(withoutSuffix) {
  return this.from(createLocal(), withoutSuffix);
}

function to(time, withoutSuffix) {
  if (this.isValid() && (isMoment(time) && time.isValid() || createLocal(time).isValid())) {
    return createDuration({
      from: this,
      to: time
    }).locale(this.locale()).humanize(!withoutSuffix);
  } else {
    return this.localeData().invalidDate();
  }
}

function toNow(withoutSuffix) {
  return this.to(createLocal(), withoutSuffix);
}

function locale(key) {
  var newLocaleData;

  if (key === undefined) {
    return this._locale._abbr;
  } else {
    newLocaleData = getLocale(key);

    if (newLocaleData != null) {
      this._locale = newLocaleData;
    }

    return this;
  }
}

var lang = deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.', function (key) {
  if (key === undefined) {
    return this.localeData();
  } else {
    return this.locale(key);
  }
});

function localeData() {
  return this._locale;
}

var MS_PER_SECOND = 1000,
    MS_PER_MINUTE = 60 * MS_PER_SECOND,
    MS_PER_HOUR = 60 * MS_PER_MINUTE,
    MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;

function mod$1(dividend, divisor) {
  return (dividend % divisor + divisor) % divisor;
}

function localStartOfDate(y, m, d) {
  if (y < 100 && y >= 0) {
    return new Date(y + 400, m, d) - MS_PER_400_YEARS;
  } else {
    return new Date(y, m, d).valueOf();
  }
}

function utcStartOfDate(y, m, d) {
  if (y < 100 && y >= 0) {
    return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;
  } else {
    return Date.UTC(y, m, d);
  }
}

function startOf(units) {
  var time, startOfDate;
  units = normalizeUnits(units);

  if (units === undefined || units === 'millisecond' || !this.isValid()) {
    return this;
  }

  startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

  switch (units) {
    case 'year':
      time = startOfDate(this.year(), 0, 1);
      break;

    case 'quarter':
      time = startOfDate(this.year(), this.month() - this.month() % 3, 1);
      break;

    case 'month':
      time = startOfDate(this.year(), this.month(), 1);
      break;

    case 'week':
      time = startOfDate(this.year(), this.month(), this.date() - this.weekday());
      break;

    case 'isoWeek':
      time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
      break;

    case 'day':
    case 'date':
      time = startOfDate(this.year(), this.month(), this.date());
      break;

    case 'hour':
      time = this._d.valueOf();
      time -= mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR);
      break;

    case 'minute':
      time = this._d.valueOf();
      time -= mod$1(time, MS_PER_MINUTE);
      break;

    case 'second':
      time = this._d.valueOf();
      time -= mod$1(time, MS_PER_SECOND);
      break;
  }

  this._d.setTime(time);

  hooks.updateOffset(this, true);
  return this;
}

function endOf(units) {
  var time, startOfDate;
  units = normalizeUnits(units);

  if (units === undefined || units === 'millisecond' || !this.isValid()) {
    return this;
  }

  startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

  switch (units) {
    case 'year':
      time = startOfDate(this.year() + 1, 0, 1) - 1;
      break;

    case 'quarter':
      time = startOfDate(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
      break;

    case 'month':
      time = startOfDate(this.year(), this.month() + 1, 1) - 1;
      break;

    case 'week':
      time = startOfDate(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
      break;

    case 'isoWeek':
      time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
      break;

    case 'day':
    case 'date':
      time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;
      break;

    case 'hour':
      time = this._d.valueOf();
      time += MS_PER_HOUR - mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR) - 1;
      break;

    case 'minute':
      time = this._d.valueOf();
      time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;
      break;

    case 'second':
      time = this._d.valueOf();
      time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;
      break;
  }

  this._d.setTime(time);

  hooks.updateOffset(this, true);
  return this;
}

function valueOf() {
  return this._d.valueOf() - (this._offset || 0) * 60000;
}

function unix() {
  return Math.floor(this.valueOf() / 1000);
}

function toDate() {
  return new Date(this.valueOf());
}

function toArray() {
  var m = this;
  return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
}

function toObject() {
  var m = this;
  return {
    years: m.year(),
    months: m.month(),
    date: m.date(),
    hours: m.hours(),
    minutes: m.minutes(),
    seconds: m.seconds(),
    milliseconds: m.milliseconds()
  };
}

function toJSON() {
  return this.isValid() ? this.toISOString() : null;
}

function isValid$2() {
  return isValid(this);
}

function parsingFlags() {
  return extend({}, getParsingFlags(this));
}

function invalidAt() {
  return getParsingFlags(this).overflow;
}

function creationData() {
  return {
    input: this._i,
    format: this._f,
    locale: this._locale,
    isUTC: this._isUTC,
    strict: this._strict
  };
}

addFormatToken('N', 0, 0, 'eraAbbr');
addFormatToken('NN', 0, 0, 'eraAbbr');
addFormatToken('NNN', 0, 0, 'eraAbbr');
addFormatToken('NNNN', 0, 0, 'eraName');
addFormatToken('NNNNN', 0, 0, 'eraNarrow');
addFormatToken('y', ['y', 1], 'yo', 'eraYear');
addFormatToken('y', ['yy', 2], 0, 'eraYear');
addFormatToken('y', ['yyy', 3], 0, 'eraYear');
addFormatToken('y', ['yyyy', 4], 0, 'eraYear');
addRegexToken('N', matchEraAbbr);
addRegexToken('NN', matchEraAbbr);
addRegexToken('NNN', matchEraAbbr);
addRegexToken('NNNN', matchEraName);
addRegexToken('NNNNN', matchEraNarrow);
addParseToken(['N', 'NN', 'NNN', 'NNNN', 'NNNNN'], function (input, array, config, token) {
  var era = config._locale.erasParse(input, token, config._strict);

  if (era) {
    getParsingFlags(config).era = era;
  } else {
    getParsingFlags(config).invalidEra = input;
  }
});
addRegexToken('y', matchUnsigned);
addRegexToken('yy', matchUnsigned);
addRegexToken('yyy', matchUnsigned);
addRegexToken('yyyy', matchUnsigned);
addRegexToken('yo', matchEraYearOrdinal);
addParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);
addParseToken(['yo'], function (input, array, config, token) {
  var match;

  if (config._locale._eraYearOrdinalRegex) {
    match = input.match(config._locale._eraYearOrdinalRegex);
  }

  if (config._locale.eraYearOrdinalParse) {
    array[YEAR] = config._locale.eraYearOrdinalParse(input, match);
  } else {
    array[YEAR] = parseInt(input, 10);
  }
});

function localeEras(m, format) {
  var i,
      l,
      date,
      eras = this._eras || getLocale('en')._eras;

  for (i = 0, l = eras.length; i < l; ++i) {
    switch (typeof eras[i].since) {
      case 'string':
        date = hooks(eras[i].since).startOf('day');
        eras[i].since = date.valueOf();
        break;
    }

    switch (typeof eras[i].until) {
      case 'undefined':
        eras[i].until = +Infinity;
        break;

      case 'string':
        date = hooks(eras[i].until).startOf('day').valueOf();
        eras[i].until = date.valueOf();
        break;
    }
  }

  return eras;
}

function localeErasParse(eraName, format, strict) {
  var i,
      l,
      eras = this.eras(),
      name,
      abbr,
      narrow;
  eraName = eraName.toUpperCase();

  for (i = 0, l = eras.length; i < l; ++i) {
    name = eras[i].name.toUpperCase();
    abbr = eras[i].abbr.toUpperCase();
    narrow = eras[i].narrow.toUpperCase();

    if (strict) {
      switch (format) {
        case 'N':
        case 'NN':
        case 'NNN':
          if (abbr === eraName) {
            return eras[i];
          }

          break;

        case 'NNNN':
          if (name === eraName) {
            return eras[i];
          }

          break;

        case 'NNNNN':
          if (narrow === eraName) {
            return eras[i];
          }

          break;
      }
    } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {
      return eras[i];
    }
  }
}

function localeErasConvertYear(era, year) {
  var dir = era.since <= era.until ? +1 : -1;

  if (year === undefined) {
    return hooks(era.since).year();
  } else {
    return hooks(era.since).year() + (year - era.offset) * dir;
  }
}

function getEraName() {
  var i,
      l,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until) {
      return eras[i].name;
    }

    if (eras[i].until <= val && val <= eras[i].since) {
      return eras[i].name;
    }
  }

  return '';
}

function getEraNarrow() {
  var i,
      l,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until) {
      return eras[i].narrow;
    }

    if (eras[i].until <= val && val <= eras[i].since) {
      return eras[i].narrow;
    }
  }

  return '';
}

function getEraAbbr() {
  var i,
      l,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until) {
      return eras[i].abbr;
    }

    if (eras[i].until <= val && val <= eras[i].since) {
      return eras[i].abbr;
    }
  }

  return '';
}

function getEraYear() {
  var i,
      l,
      dir,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    dir = eras[i].since <= eras[i].until ? +1 : -1;
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until || eras[i].until <= val && val <= eras[i].since) {
      return (this.year() - hooks(eras[i].since).year()) * dir + eras[i].offset;
    }
  }

  return this.year();
}

function erasNameRegex(isStrict) {
  if (!hasOwnProp(this, '_erasNameRegex')) {
    computeErasParse.call(this);
  }

  return isStrict ? this._erasNameRegex : this._erasRegex;
}

function erasAbbrRegex(isStrict) {
  if (!hasOwnProp(this, '_erasAbbrRegex')) {
    computeErasParse.call(this);
  }

  return isStrict ? this._erasAbbrRegex : this._erasRegex;
}

function erasNarrowRegex(isStrict) {
  if (!hasOwnProp(this, '_erasNarrowRegex')) {
    computeErasParse.call(this);
  }

  return isStrict ? this._erasNarrowRegex : this._erasRegex;
}

function matchEraAbbr(isStrict, locale) {
  return locale.erasAbbrRegex(isStrict);
}

function matchEraName(isStrict, locale) {
  return locale.erasNameRegex(isStrict);
}

function matchEraNarrow(isStrict, locale) {
  return locale.erasNarrowRegex(isStrict);
}

function matchEraYearOrdinal(isStrict, locale) {
  return locale._eraYearOrdinalRegex || matchUnsigned;
}

function computeErasParse() {
  var abbrPieces = [],
      namePieces = [],
      narrowPieces = [],
      mixedPieces = [],
      i,
      l,
      eras = this.eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    namePieces.push(regexEscape(eras[i].name));
    abbrPieces.push(regexEscape(eras[i].abbr));
    narrowPieces.push(regexEscape(eras[i].narrow));
    mixedPieces.push(regexEscape(eras[i].name));
    mixedPieces.push(regexEscape(eras[i].abbr));
    mixedPieces.push(regexEscape(eras[i].narrow));
  }

  this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
  this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');
  this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');
  this._erasNarrowRegex = new RegExp('^(' + narrowPieces.join('|') + ')', 'i');
}

addFormatToken(0, ['gg', 2], 0, function () {
  return this.weekYear() % 100;
});
addFormatToken(0, ['GG', 2], 0, function () {
  return this.isoWeekYear() % 100;
});

function addWeekYearFormatToken(token, getter) {
  addFormatToken(0, [token, token.length], 0, getter);
}

addWeekYearFormatToken('gggg', 'weekYear');
addWeekYearFormatToken('ggggg', 'weekYear');
addWeekYearFormatToken('GGGG', 'isoWeekYear');
addWeekYearFormatToken('GGGGG', 'isoWeekYear');
addUnitAlias('weekYear', 'gg');
addUnitAlias('isoWeekYear', 'GG');
addUnitPriority('weekYear', 1);
addUnitPriority('isoWeekYear', 1);
addRegexToken('G', matchSigned);
addRegexToken('g', matchSigned);
addRegexToken('GG', match1to2, match2);
addRegexToken('gg', match1to2, match2);
addRegexToken('GGGG', match1to4, match4);
addRegexToken('gggg', match1to4, match4);
addRegexToken('GGGGG', match1to6, match6);
addRegexToken('ggggg', match1to6, match6);
addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {
  week[token.substr(0, 2)] = toInt(input);
});
addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
  week[token] = hooks.parseTwoDigitYear(input);
});

function getSetWeekYear(input) {
  return getSetWeekYearHelper.call(this, input, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy);
}

function getSetISOWeekYear(input) {
  return getSetWeekYearHelper.call(this, input, this.isoWeek(), this.isoWeekday(), 1, 4);
}

function getISOWeeksInYear() {
  return weeksInYear(this.year(), 1, 4);
}

function getISOWeeksInISOWeekYear() {
  return weeksInYear(this.isoWeekYear(), 1, 4);
}

function getWeeksInYear() {
  var weekInfo = this.localeData()._week;

  return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
}

function getWeeksInWeekYear() {
  var weekInfo = this.localeData()._week;

  return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);
}

function getSetWeekYearHelper(input, week, weekday, dow, doy) {
  var weeksTarget;

  if (input == null) {
    return weekOfYear(this, dow, doy).year;
  } else {
    weeksTarget = weeksInYear(input, dow, doy);

    if (week > weeksTarget) {
      week = weeksTarget;
    }

    return setWeekAll.call(this, input, week, weekday, dow, doy);
  }
}

function setWeekAll(weekYear, week, weekday, dow, doy) {
  var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
      date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);
  this.year(date.getUTCFullYear());
  this.month(date.getUTCMonth());
  this.date(date.getUTCDate());
  return this;
}

addFormatToken('Q', 0, 'Qo', 'quarter');
addUnitAlias('quarter', 'Q');
addUnitPriority('quarter', 7);
addRegexToken('Q', match1);
addParseToken('Q', function (input, array) {
  array[MONTH] = (toInt(input) - 1) * 3;
});

function getSetQuarter(input) {
  return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
}

addFormatToken('D', ['DD', 2], 'Do', 'date');
addUnitAlias('date', 'D');
addUnitPriority('date', 9);
addRegexToken('D', match1to2);
addRegexToken('DD', match1to2, match2);
addRegexToken('Do', function (isStrict, locale) {
  return isStrict ? locale._dayOfMonthOrdinalParse || locale._ordinalParse : locale._dayOfMonthOrdinalParseLenient;
});
addParseToken(['D', 'DD'], DATE);
addParseToken('Do', function (input, array) {
  array[DATE] = toInt(input.match(match1to2)[0]);
});
var getSetDayOfMonth = makeGetSet('Date', true);
addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');
addUnitAlias('dayOfYear', 'DDD');
addUnitPriority('dayOfYear', 4);
addRegexToken('DDD', match1to3);
addRegexToken('DDDD', match3);
addParseToken(['DDD', 'DDDD'], function (input, array, config) {
  config._dayOfYear = toInt(input);
});

function getSetDayOfYear(input) {
  var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
  return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');
}

addFormatToken('m', ['mm', 2], 0, 'minute');
addUnitAlias('minute', 'm');
addUnitPriority('minute', 14);
addRegexToken('m', match1to2);
addRegexToken('mm', match1to2, match2);
addParseToken(['m', 'mm'], MINUTE);
var getSetMinute = makeGetSet('Minutes', false);
addFormatToken('s', ['ss', 2], 0, 'second');
addUnitAlias('second', 's');
addUnitPriority('second', 15);
addRegexToken('s', match1to2);
addRegexToken('ss', match1to2, match2);
addParseToken(['s', 'ss'], SECOND);
var getSetSecond = makeGetSet('Seconds', false);
addFormatToken('S', 0, 0, function () {
  return ~~(this.millisecond() / 100);
});
addFormatToken(0, ['SS', 2], 0, function () {
  return ~~(this.millisecond() / 10);
});
addFormatToken(0, ['SSS', 3], 0, 'millisecond');
addFormatToken(0, ['SSSS', 4], 0, function () {
  return this.millisecond() * 10;
});
addFormatToken(0, ['SSSSS', 5], 0, function () {
  return this.millisecond() * 100;
});
addFormatToken(0, ['SSSSSS', 6], 0, function () {
  return this.millisecond() * 1000;
});
addFormatToken(0, ['SSSSSSS', 7], 0, function () {
  return this.millisecond() * 10000;
});
addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
  return this.millisecond() * 100000;
});
addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
  return this.millisecond() * 1000000;
});
addUnitAlias('millisecond', 'ms');
addUnitPriority('millisecond', 16);
addRegexToken('S', match1to3, match1);
addRegexToken('SS', match1to3, match2);
addRegexToken('SSS', match1to3, match3);
var token, getSetMillisecond;

for (token = 'SSSS'; token.length <= 9; token += 'S') {
  addRegexToken(token, matchUnsigned);
}

function parseMs(input, array) {
  array[MILLISECOND] = toInt(('0.' + input) * 1000);
}

for (token = 'S'; token.length <= 9; token += 'S') {
  addParseToken(token, parseMs);
}

getSetMillisecond = makeGetSet('Milliseconds', false);
addFormatToken('z', 0, 0, 'zoneAbbr');
addFormatToken('zz', 0, 0, 'zoneName');

function getZoneAbbr() {
  return this._isUTC ? 'UTC' : '';
}

function getZoneName() {
  return this._isUTC ? 'Coordinated Universal Time' : '';
}

var proto = Moment.prototype;
proto.add = add;
proto.calendar = calendar$1;
proto.clone = clone;
proto.diff = diff;
proto.endOf = endOf;
proto.format = format;
proto.from = from;
proto.fromNow = fromNow;
proto.to = to;
proto.toNow = toNow;
proto.get = stringGet;
proto.invalidAt = invalidAt;
proto.isAfter = isAfter;
proto.isBefore = isBefore;
proto.isBetween = isBetween;
proto.isSame = isSame;
proto.isSameOrAfter = isSameOrAfter;
proto.isSameOrBefore = isSameOrBefore;
proto.isValid = isValid$2;
proto.lang = lang;
proto.locale = locale;
proto.localeData = localeData;
proto.max = prototypeMax;
proto.min = prototypeMin;
proto.parsingFlags = parsingFlags;
proto.set = stringSet;
proto.startOf = startOf;
proto.subtract = subtract;
proto.toArray = toArray;
proto.toObject = toObject;
proto.toDate = toDate;
proto.toISOString = toISOString;
proto.inspect = inspect;

if (typeof Symbol !== 'undefined' && Symbol.for != null) {
  proto[Symbol.for('nodejs.util.inspect.custom')] = function () {
    return 'Moment<' + this.format() + '>';
  };
}

proto.toJSON = toJSON;
proto.toString = toString;
proto.unix = unix;
proto.valueOf = valueOf;
proto.creationData = creationData;
proto.eraName = getEraName;
proto.eraNarrow = getEraNarrow;
proto.eraAbbr = getEraAbbr;
proto.eraYear = getEraYear;
proto.year = getSetYear;
proto.isLeapYear = getIsLeapYear;
proto.weekYear = getSetWeekYear;
proto.isoWeekYear = getSetISOWeekYear;
proto.quarter = proto.quarters = getSetQuarter;
proto.month = getSetMonth;
proto.daysInMonth = getDaysInMonth;
proto.week = proto.weeks = getSetWeek;
proto.isoWeek = proto.isoWeeks = getSetISOWeek;
proto.weeksInYear = getWeeksInYear;
proto.weeksInWeekYear = getWeeksInWeekYear;
proto.isoWeeksInYear = getISOWeeksInYear;
proto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;
proto.date = getSetDayOfMonth;
proto.day = proto.days = getSetDayOfWeek;
proto.weekday = getSetLocaleDayOfWeek;
proto.isoWeekday = getSetISODayOfWeek;
proto.dayOfYear = getSetDayOfYear;
proto.hour = proto.hours = getSetHour;
proto.minute = proto.minutes = getSetMinute;
proto.second = proto.seconds = getSetSecond;
proto.millisecond = proto.milliseconds = getSetMillisecond;
proto.utcOffset = getSetOffset;
proto.utc = setOffsetToUTC;
proto.local = setOffsetToLocal;
proto.parseZone = setOffsetToParsedOffset;
proto.hasAlignedHourOffset = hasAlignedHourOffset;
proto.isDST = isDaylightSavingTime;
proto.isLocal = isLocal;
proto.isUtcOffset = isUtcOffset;
proto.isUtc = isUtc;
proto.isUTC = isUtc;
proto.zoneAbbr = getZoneAbbr;
proto.zoneName = getZoneName;
proto.dates = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
proto.years = deprecate('years accessor is deprecated. Use year instead', getSetYear);
proto.zone = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);
proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);

function createUnix(input) {
  return createLocal(input * 1000);
}

function createInZone() {
  return createLocal.apply(null, arguments).parseZone();
}

function preParsePostFormat(string) {
  return string;
}

var proto$1 = Locale.prototype;
proto$1.calendar = calendar;
proto$1.longDateFormat = longDateFormat;
proto$1.invalidDate = invalidDate;
proto$1.ordinal = ordinal;
proto$1.preparse = preParsePostFormat;
proto$1.postformat = preParsePostFormat;
proto$1.relativeTime = relativeTime;
proto$1.pastFuture = pastFuture;
proto$1.set = set;
proto$1.eras = localeEras;
proto$1.erasParse = localeErasParse;
proto$1.erasConvertYear = localeErasConvertYear;
proto$1.erasAbbrRegex = erasAbbrRegex;
proto$1.erasNameRegex = erasNameRegex;
proto$1.erasNarrowRegex = erasNarrowRegex;
proto$1.months = localeMonths;
proto$1.monthsShort = localeMonthsShort;
proto$1.monthsParse = localeMonthsParse;
proto$1.monthsRegex = monthsRegex;
proto$1.monthsShortRegex = monthsShortRegex;
proto$1.week = localeWeek;
proto$1.firstDayOfYear = localeFirstDayOfYear;
proto$1.firstDayOfWeek = localeFirstDayOfWeek;
proto$1.weekdays = localeWeekdays;
proto$1.weekdaysMin = localeWeekdaysMin;
proto$1.weekdaysShort = localeWeekdaysShort;
proto$1.weekdaysParse = localeWeekdaysParse;
proto$1.weekdaysRegex = weekdaysRegex;
proto$1.weekdaysShortRegex = weekdaysShortRegex;
proto$1.weekdaysMinRegex = weekdaysMinRegex;
proto$1.isPM = localeIsPM;
proto$1.meridiem = localeMeridiem;

function get$1(format, index, field, setter) {
  var locale = getLocale(),
      utc = createUTC().set(setter, index);
  return locale[field](utc, format);
}

function listMonthsImpl(format, index, field) {
  if (isNumber(format)) {
    index = format;
    format = undefined;
  }

  format = format || '';

  if (index != null) {
    return get$1(format, index, field, 'month');
  }

  var i,
      out = [];

  for (i = 0; i < 12; i++) {
    out[i] = get$1(format, i, field, 'month');
  }

  return out;
}

function listWeekdaysImpl(localeSorted, format, index, field) {
  if (typeof localeSorted === 'boolean') {
    if (isNumber(format)) {
      index = format;
      format = undefined;
    }

    format = format || '';
  } else {
    format = localeSorted;
    index = format;
    localeSorted = false;

    if (isNumber(format)) {
      index = format;
      format = undefined;
    }

    format = format || '';
  }

  var locale = getLocale(),
      shift = localeSorted ? locale._week.dow : 0,
      i,
      out = [];

  if (index != null) {
    return get$1(format, (index + shift) % 7, field, 'day');
  }

  for (i = 0; i < 7; i++) {
    out[i] = get$1(format, (i + shift) % 7, field, 'day');
  }

  return out;
}

function listMonths(format, index) {
  return listMonthsImpl(format, index, 'months');
}

function listMonthsShort(format, index) {
  return listMonthsImpl(format, index, 'monthsShort');
}

function listWeekdays(localeSorted, format, index) {
  return listWeekdaysImpl(localeSorted, format, index, 'weekdays');
}

function listWeekdaysShort(localeSorted, format, index) {
  return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');
}

function listWeekdaysMin(localeSorted, format, index) {
  return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');
}

getSetGlobalLocale('en', {
  eras: [{
    since: '0001-01-01',
    until: +Infinity,
    offset: 1,
    name: 'Anno Domini',
    narrow: 'AD',
    abbr: 'AD'
  }, {
    since: '0000-12-31',
    until: -Infinity,
    offset: 1,
    name: 'Before Christ',
    narrow: 'BC',
    abbr: 'BC'
  }],
  dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = toInt(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  }
});
hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);
hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);
var mathAbs = Math.abs;

function abs() {
  var data = this._data;
  this._milliseconds = mathAbs(this._milliseconds);
  this._days = mathAbs(this._days);
  this._months = mathAbs(this._months);
  data.milliseconds = mathAbs(data.milliseconds);
  data.seconds = mathAbs(data.seconds);
  data.minutes = mathAbs(data.minutes);
  data.hours = mathAbs(data.hours);
  data.months = mathAbs(data.months);
  data.years = mathAbs(data.years);
  return this;
}

function addSubtract$1(duration, input, value, direction) {
  var other = createDuration(input, value);
  duration._milliseconds += direction * other._milliseconds;
  duration._days += direction * other._days;
  duration._months += direction * other._months;
  return duration._bubble();
}

function add$1(input, value) {
  return addSubtract$1(this, input, value, 1);
}

function subtract$1(input, value) {
  return addSubtract$1(this, input, value, -1);
}

function absCeil(number) {
  if (number < 0) {
    return Math.floor(number);
  } else {
    return Math.ceil(number);
  }
}

function bubble() {
  var milliseconds = this._milliseconds,
      days = this._days,
      months = this._months,
      data = this._data,
      seconds,
      minutes,
      hours,
      years,
      monthsFromDays;

  if (!(milliseconds >= 0 && days >= 0 && months >= 0 || milliseconds <= 0 && days <= 0 && months <= 0)) {
    milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
    days = 0;
    months = 0;
  }

  data.milliseconds = milliseconds % 1000;
  seconds = absFloor(milliseconds / 1000);
  data.seconds = seconds % 60;
  minutes = absFloor(seconds / 60);
  data.minutes = minutes % 60;
  hours = absFloor(minutes / 60);
  data.hours = hours % 24;
  days += absFloor(hours / 24);
  monthsFromDays = absFloor(daysToMonths(days));
  months += monthsFromDays;
  days -= absCeil(monthsToDays(monthsFromDays));
  years = absFloor(months / 12);
  months %= 12;
  data.days = days;
  data.months = months;
  data.years = years;
  return this;
}

function daysToMonths(days) {
  return days * 4800 / 146097;
}

function monthsToDays(months) {
  return months * 146097 / 4800;
}

function as(units) {
  if (!this.isValid()) {
    return NaN;
  }

  var days,
      months,
      milliseconds = this._milliseconds;
  units = normalizeUnits(units);

  if (units === 'month' || units === 'quarter' || units === 'year') {
    days = this._days + milliseconds / 864e5;
    months = this._months + daysToMonths(days);

    switch (units) {
      case 'month':
        return months;

      case 'quarter':
        return months / 3;

      case 'year':
        return months / 12;
    }
  } else {
    days = this._days + Math.round(monthsToDays(this._months));

    switch (units) {
      case 'week':
        return days / 7 + milliseconds / 6048e5;

      case 'day':
        return days + milliseconds / 864e5;

      case 'hour':
        return days * 24 + milliseconds / 36e5;

      case 'minute':
        return days * 1440 + milliseconds / 6e4;

      case 'second':
        return days * 86400 + milliseconds / 1000;

      case 'millisecond':
        return Math.floor(days * 864e5) + milliseconds;

      default:
        throw new Error('Unknown unit ' + units);
    }
  }
}

function valueOf$1() {
  if (!this.isValid()) {
    return NaN;
  }

  return this._milliseconds + this._days * 864e5 + this._months % 12 * 2592e6 + toInt(this._months / 12) * 31536e6;
}

function makeAs(alias) {
  return function () {
    return this.as(alias);
  };
}

var asMilliseconds = makeAs('ms'),
    asSeconds = makeAs('s'),
    asMinutes = makeAs('m'),
    asHours = makeAs('h'),
    asDays = makeAs('d'),
    asWeeks = makeAs('w'),
    asMonths = makeAs('M'),
    asQuarters = makeAs('Q'),
    asYears = makeAs('y');

function clone$1() {
  return createDuration(this);
}

function get$2(units) {
  units = normalizeUnits(units);
  return this.isValid() ? this[units + 's']() : NaN;
}

function makeGetter(name) {
  return function () {
    return this.isValid() ? this._data[name] : NaN;
  };
}

var milliseconds = makeGetter('milliseconds'),
    seconds = makeGetter('seconds'),
    minutes = makeGetter('minutes'),
    hours = makeGetter('hours'),
    days = makeGetter('days'),
    months = makeGetter('months'),
    years = makeGetter('years');

function weeks() {
  return absFloor(this.days() / 7);
}

var round = Math.round,
    thresholds = {
  ss: 44,
  s: 45,
  m: 45,
  h: 22,
  d: 26,
  w: null,
  M: 11
};

function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
  return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
}

function relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {
  var duration = createDuration(posNegDuration).abs(),
      seconds = round(duration.as('s')),
      minutes = round(duration.as('m')),
      hours = round(duration.as('h')),
      days = round(duration.as('d')),
      months = round(duration.as('M')),
      weeks = round(duration.as('w')),
      years = round(duration.as('y')),
      a = seconds <= thresholds.ss && ['s', seconds] || seconds < thresholds.s && ['ss', seconds] || minutes <= 1 && ['m'] || minutes < thresholds.m && ['mm', minutes] || hours <= 1 && ['h'] || hours < thresholds.h && ['hh', hours] || days <= 1 && ['d'] || days < thresholds.d && ['dd', days];

  if (thresholds.w != null) {
    a = a || weeks <= 1 && ['w'] || weeks < thresholds.w && ['ww', weeks];
  }

  a = a || months <= 1 && ['M'] || months < thresholds.M && ['MM', months] || years <= 1 && ['y'] || ['yy', years];
  a[2] = withoutSuffix;
  a[3] = +posNegDuration > 0;
  a[4] = locale;
  return substituteTimeAgo.apply(null, a);
}

function getSetRelativeTimeRounding(roundingFunction) {
  if (roundingFunction === undefined) {
    return round;
  }

  if (typeof roundingFunction === 'function') {
    round = roundingFunction;
    return true;
  }

  return false;
}

function getSetRelativeTimeThreshold(threshold, limit) {
  if (thresholds[threshold] === undefined) {
    return false;
  }

  if (limit === undefined) {
    return thresholds[threshold];
  }

  thresholds[threshold] = limit;

  if (threshold === 's') {
    thresholds.ss = limit - 1;
  }

  return true;
}

function humanize(argWithSuffix, argThresholds) {
  if (!this.isValid()) {
    return this.localeData().invalidDate();
  }

  var withSuffix = false,
      th = thresholds,
      locale,
      output;

  if (typeof argWithSuffix === 'object') {
    argThresholds = argWithSuffix;
    argWithSuffix = false;
  }

  if (typeof argWithSuffix === 'boolean') {
    withSuffix = argWithSuffix;
  }

  if (typeof argThresholds === 'object') {
    th = Object.assign({}, thresholds, argThresholds);

    if (argThresholds.s != null && argThresholds.ss == null) {
      th.ss = argThresholds.s - 1;
    }
  }

  locale = this.localeData();
  output = relativeTime$1(this, !withSuffix, th, locale);

  if (withSuffix) {
    output = locale.pastFuture(+this, output);
  }

  return locale.postformat(output);
}

var abs$1 = Math.abs;

function sign(x) {
  return (x > 0) - (x < 0) || +x;
}

function toISOString$1() {
  if (!this.isValid()) {
    return this.localeData().invalidDate();
  }

  var seconds = abs$1(this._milliseconds) / 1000,
      days = abs$1(this._days),
      months = abs$1(this._months),
      minutes,
      hours,
      years,
      s,
      total = this.asSeconds(),
      totalSign,
      ymSign,
      daysSign,
      hmsSign;

  if (!total) {
    return 'P0D';
  }

  minutes = absFloor(seconds / 60);
  hours = absFloor(minutes / 60);
  seconds %= 60;
  minutes %= 60;
  years = absFloor(months / 12);
  months %= 12;
  s = seconds ? seconds.toFixed(3).replace(/\.?0+$/, '') : '';
  totalSign = total < 0 ? '-' : '';
  ymSign = sign(this._months) !== sign(total) ? '-' : '';
  daysSign = sign(this._days) !== sign(total) ? '-' : '';
  hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';
  return totalSign + 'P' + (years ? ymSign + years + 'Y' : '') + (months ? ymSign + months + 'M' : '') + (days ? daysSign + days + 'D' : '') + (hours || minutes || seconds ? 'T' : '') + (hours ? hmsSign + hours + 'H' : '') + (minutes ? hmsSign + minutes + 'M' : '') + (seconds ? hmsSign + s + 'S' : '');
}

var proto$2 = Duration.prototype;
proto$2.isValid = isValid$1;
proto$2.abs = abs;
proto$2.add = add$1;
proto$2.subtract = subtract$1;
proto$2.as = as;
proto$2.asMilliseconds = asMilliseconds;
proto$2.asSeconds = asSeconds;
proto$2.asMinutes = asMinutes;
proto$2.asHours = asHours;
proto$2.asDays = asDays;
proto$2.asWeeks = asWeeks;
proto$2.asMonths = asMonths;
proto$2.asQuarters = asQuarters;
proto$2.asYears = asYears;
proto$2.valueOf = valueOf$1;
proto$2._bubble = bubble;
proto$2.clone = clone$1;
proto$2.get = get$2;
proto$2.milliseconds = milliseconds;
proto$2.seconds = seconds;
proto$2.minutes = minutes;
proto$2.hours = hours;
proto$2.days = days;
proto$2.weeks = weeks;
proto$2.months = months;
proto$2.years = years;
proto$2.humanize = humanize;
proto$2.toISOString = toISOString$1;
proto$2.toString = toISOString$1;
proto$2.toJSON = toISOString$1;
proto$2.locale = locale;
proto$2.localeData = localeData;
proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);
proto$2.lang = lang;
addFormatToken('X', 0, 0, 'unix');
addFormatToken('x', 0, 0, 'valueOf');
addRegexToken('x', matchSigned);
addRegexToken('X', matchTimestamp);
addParseToken('X', function (input, array, config) {
  config._d = new Date(parseFloat(input) * 1000);
});
addParseToken('x', function (input, array, config) {
  config._d = new Date(toInt(input));
});
hooks.version = '2.29.1';
setHookCallback(createLocal);
hooks.fn = proto;
hooks.min = min;
hooks.max = max;
hooks.now = now;
hooks.utc = createUTC;
hooks.unix = createUnix;
hooks.months = listMonths;
hooks.isDate = isDate;
hooks.locale = getSetGlobalLocale;
hooks.invalid = createInvalid;
hooks.duration = createDuration;
hooks.isMoment = isMoment;
hooks.weekdays = listWeekdays;
hooks.parseZone = createInZone;
hooks.localeData = getLocale;
hooks.isDuration = isDuration;
hooks.monthsShort = listMonthsShort;
hooks.weekdaysMin = listWeekdaysMin;
hooks.defineLocale = defineLocale;
hooks.updateLocale = updateLocale;
hooks.locales = listLocales;
hooks.weekdaysShort = listWeekdaysShort;
hooks.normalizeUnits = normalizeUnits;
hooks.relativeTimeRounding = getSetRelativeTimeRounding;
hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;
hooks.calendarFormat = getCalendarFormat;
hooks.prototype = proto;
hooks.HTML5_FMT = {
  DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm',
  DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss',
  DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS',
  DATE: 'YYYY-MM-DD',
  TIME: 'HH:mm',
  TIME_SECONDS: 'HH:mm:ss',
  TIME_MS: 'HH:mm:ss.SSS',
  WEEK: 'GGGG-[W]WW',
  MONTH: 'YYYY-MM'
};
/* harmony default export */ __webpack_exports__["default"] = (hooks);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/harmony-module.js */ "./node_modules/webpack/buildin/harmony-module.js")(module)))

/***/ }),

/***/ "./node_modules/ol/Collection.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/Collection.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: CollectionEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(66);

/***/ }),

/***/ "./node_modules/ol/Feature.js":
/*!************************************************************************!*\
  !*** delegated ./node_modules/ol/Feature.js from dll-reference vendor ***!
  \************************************************************************/
/*! exports provided: createStyleFunction, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(70);

/***/ }),

/***/ "./node_modules/ol/Geolocation.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/Geolocation.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1066);

/***/ }),

/***/ "./node_modules/ol/Map.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/Map.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(490);

/***/ }),

/***/ "./node_modules/ol/MapBrowserEvent.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/MapBrowserEvent.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(148);

/***/ }),

/***/ "./node_modules/ol/Observable.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/Observable.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: unByKey, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(194);

/***/ }),

/***/ "./node_modules/ol/Overlay.js":
/*!************************************************************************!*\
  !*** delegated ./node_modules/ol/Overlay.js from dll-reference vendor ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(590);

/***/ }),

/***/ "./node_modules/ol/View.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/View.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: createCenterConstraint, createResolutionConstraint, createRotationConstraint, isNoopAnimation, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(272);

/***/ }),

/***/ "./node_modules/ol/array.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/array.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: binarySearch, numberSafeCompareFunction, includes, linearFindNearest, reverseSubArray, extend, remove, find, equals, stableSort, findIndex, isSorted */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(16);

/***/ }),

/***/ "./node_modules/ol/color.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/color.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: asString, fromString, asArray, normalize, toString, isStringColor */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(116);

/***/ }),

/***/ "./node_modules/ol/control/Control.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/control/Control.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(82);

/***/ }),

/***/ "./node_modules/ol/control/MousePosition.js":
/*!**************************************************************************************!*\
  !*** delegated ./node_modules/ol/control/MousePosition.js from dll-reference vendor ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(579);

/***/ }),

/***/ "./node_modules/ol/control/Rotate.js":
/*!*******************************************************************************!*\
  !*** delegated ./node_modules/ol/control/Rotate.js from dll-reference vendor ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(366);

/***/ }),

/***/ "./node_modules/ol/control/ScaleLine.js":
/*!**********************************************************************************!*\
  !*** delegated ./node_modules/ol/control/ScaleLine.js from dll-reference vendor ***!
  \**********************************************************************************/
/*! exports provided: Units, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(580);

/***/ }),

/***/ "./node_modules/ol/control/Zoom.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/control/Zoom.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(367);

/***/ }),

/***/ "./node_modules/ol/coordinate.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/coordinate.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: add, closestOnCircle, closestOnSegment, createStringXY, degreesToStringHDMS, format, equals, rotate, scale, squaredDistance, distance, squaredDistanceToSegment, toStringHDMS, toStringXY, wrapX, getWorldsAway */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(28);

/***/ }),

/***/ "./node_modules/ol/dom.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/dom.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: createCanvasContext2D, outerWidth, outerHeight, replaceNode, removeNode, removeChildren, replaceChildren */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(29);

/***/ }),

/***/ "./node_modules/ol/easing.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/easing.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: easeIn, easeOut, inAndOut, linear, upAndDown */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(88);

/***/ }),

/***/ "./node_modules/ol/events.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/events.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: listen, listenOnce, unlistenByKey */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(15);

/***/ }),

/***/ "./node_modules/ol/events/Event.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/events/Event.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: stopPropagation, preventDefault, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(48);

/***/ }),

/***/ "./node_modules/ol/events/Target.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/events/Target.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(143);

/***/ }),

/***/ "./node_modules/ol/events/condition.js":
/*!*********************************************************************************!*\
  !*** delegated ./node_modules/ol/events/condition.js from dll-reference vendor ***!
  \*********************************************************************************/
/*! exports provided: all, altKeyOnly, altShiftKeysOnly, focus, focusWithTabindex, always, click, mouseActionButton, never, pointerMove, singleClick, doubleClick, noModifierKeys, platformModifierKeyOnly, shiftKeyOnly, targetNotEditable, mouseOnly, touchOnly, penOnly, primaryAction */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(39);

/***/ }),

/***/ "./node_modules/ol/extent.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/extent.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: boundingExtent, buffer, clone, closestSquaredDistanceXY, containsCoordinate, containsExtent, containsXY, coordinateRelationship, createEmpty, createOrUpdate, createOrUpdateEmpty, createOrUpdateFromCoordinate, createOrUpdateFromCoordinates, createOrUpdateFromFlatCoordinates, createOrUpdateFromRings, equals, approximatelyEquals, extend, extendCoordinate, extendCoordinates, extendFlatCoordinates, extendRings, extendXY, forEachCorner, getArea, getBottomLeft, getBottomRight, getCenter, getCorner, getEnlargedArea, getForViewAndSize, getHeight, getIntersectionArea, getIntersection, getMargin, getSize, getTopLeft, getTopRight, getWidth, intersects, isEmpty, returnOrUpdate, scaleFromCenter, intersectsSegment, applyTransform, wrapX */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(2);

/***/ }),

/***/ "./node_modules/ol/format/Feature.js":
/*!*******************************************************************************!*\
  !*** delegated ./node_modules/ol/format/Feature.js from dll-reference vendor ***!
  \*******************************************************************************/
/*! exports provided: default, transformGeometryWithOptions, transformExtentWithOptions */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(56);

/***/ }),

/***/ "./node_modules/ol/format/GML2.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GML2.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(174);

/***/ }),

/***/ "./node_modules/ol/format/GML3.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GML3.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(43);

/***/ }),

/***/ "./node_modules/ol/format/GPX.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GPX.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1067);

/***/ }),

/***/ "./node_modules/ol/format/GeoJSON.js":
/*!*******************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GeoJSON.js from dll-reference vendor ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(593);

/***/ }),

/***/ "./node_modules/ol/format/KML.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/KML.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: getDefaultFillStyle, getDefaultImageStyle, getDefaultStrokeStyle, getDefaultTextStyle, getDefaultStyle, getDefaultStyleArray, readFlatCoordinates, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1068);

/***/ }),

/***/ "./node_modules/ol/format/TextFeature.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/ol/format/TextFeature.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1069);

/***/ }),

/***/ "./node_modules/ol/format/WFS.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WFS.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: writeFilter, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1070);

/***/ }),

/***/ "./node_modules/ol/format/WMSCapabilities.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WMSCapabilities.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1071);

/***/ }),

/***/ "./node_modules/ol/format/WMSGetFeatureInfo.js":
/*!*****************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WMSGetFeatureInfo.js from dll-reference vendor ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1072);

/***/ }),

/***/ "./node_modules/ol/format/WMTSCapabilities.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WMTSCapabilities.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1073);

/***/ }),

/***/ "./node_modules/ol/format/XML.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/XML.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(273);

/***/ }),

/***/ "./node_modules/ol/format/filter.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/format/filter.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: and, or, not, bbox, contains, intersects, disjoint, within, dwithin, equalTo, notEqualTo, lessThan, lessThanOrEqualTo, greaterThan, greaterThanOrEqualTo, isNull, between, like, during, resourceId */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(500);

/***/ }),

/***/ "./node_modules/ol/format/filter/Comparison.js":
/*!*****************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/filter/Comparison.js from dll-reference vendor ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(171);

/***/ }),

/***/ "./node_modules/ol/functions.js":
/*!**************************************************************************!*\
  !*** delegated ./node_modules/ol/functions.js from dll-reference vendor ***!
  \**************************************************************************/
/*! exports provided: TRUE, FALSE, VOID, memoizeOne */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(38);

/***/ }),

/***/ "./node_modules/ol/geom/Circle.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Circle.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(493);

/***/ }),

/***/ "./node_modules/ol/geom/Geometry.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Geometry.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(377);

/***/ }),

/***/ "./node_modules/ol/geom/GeometryCollection.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/GeometryCollection.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(200);

/***/ }),

/***/ "./node_modules/ol/geom/LineString.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/LineString.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(75);

/***/ }),

/***/ "./node_modules/ol/geom/MultiLineString.js":
/*!*************************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/MultiLineString.js from dll-reference vendor ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(117);

/***/ }),

/***/ "./node_modules/ol/geom/MultiPoint.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/MultiPoint.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(144);

/***/ }),

/***/ "./node_modules/ol/geom/MultiPolygon.js":
/*!**********************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/MultiPolygon.js from dll-reference vendor ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(145);

/***/ }),

/***/ "./node_modules/ol/geom/Point.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Point.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(58);

/***/ }),

/***/ "./node_modules/ol/geom/Polygon.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Polygon.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default, circular, fromExtent, fromCircle, makeRegular */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(45);

/***/ }),

/***/ "./node_modules/ol/geom/SimpleGeometry.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/SimpleGeometry.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: getStrideForLayout, transformGeom2D, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(93);

/***/ }),

/***/ "./node_modules/ol/has.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/has.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: FIREFOX, SAFARI, WEBKIT, MAC, DEVICE_PIXEL_RATIO, WORKER_OFFSCREEN_CANVAS, IMAGE_DECODE, PASSIVE_EVENT_LISTENERS */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(71);

/***/ }),

/***/ "./node_modules/ol/interaction.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: DoubleClickZoom, DragAndDrop, DragBox, DragPan, DragRotate, DragRotateAndZoom, DragZoom, Draw, Extent, Interaction, KeyboardPan, KeyboardZoom, Modify, MouseWheelZoom, PinchRotate, PinchZoom, Pointer, Select, Snap, Translate, defaults */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(591);

/***/ }),

/***/ "./node_modules/ol/interaction/DragPan.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/DragPan.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(368);

/***/ }),

/***/ "./node_modules/ol/interaction/Draw.js":
/*!*********************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Draw.js from dll-reference vendor ***!
  \*********************************************************************************/
/*! exports provided: DrawEvent, createRegularPolygon, createBox, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(581);

/***/ }),

/***/ "./node_modules/ol/interaction/Interaction.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Interaction.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: pan, zoomByDelta, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(83);

/***/ }),

/***/ "./node_modules/ol/interaction/Snap.js":
/*!*********************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Snap.js from dll-reference vendor ***!
  \*********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(583);

/***/ }),

/***/ "./node_modules/ol/layer.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/layer.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: Graticule, Group, Heatmap, Image, Layer, MapboxVector, Tile, Vector, VectorImage, VectorTile, WebGLPoints */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1074);

/***/ }),

/***/ "./node_modules/ol/layer/Base.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Base.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(378);

/***/ }),

/***/ "./node_modules/ol/layer/Group.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Group.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(365);

/***/ }),

/***/ "./node_modules/ol/layer/Image.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Image.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(370);

/***/ }),

/***/ "./node_modules/ol/layer/Layer.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Layer.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: inView, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(97);

/***/ }),

/***/ "./node_modules/ol/layer/Tile.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Tile.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(263);

/***/ }),

/***/ "./node_modules/ol/layer/Vector.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Vector.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(107);

/***/ }),

/***/ "./node_modules/ol/math.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/math.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: clamp, cosh, log2, squaredSegmentDistance, squaredDistance, solveLinearSystem, toDegrees, toRadians, modulo, lerp */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(12);

/***/ }),

/***/ "./node_modules/ol/obj.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/obj.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: assign, clear, getValues, isEmpty */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(11);

/***/ }),

/***/ "./node_modules/ol/proj.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/proj.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: METERS_PER_UNIT, Projection, cloneTransform, identityTransform, addProjection, addProjections, get, getPointResolution, addEquivalentProjections, addEquivalentTransforms, clearAllProjections, createProjection, createTransformFromCoordinateTransform, addCoordinateTransforms, fromLonLat, toLonLat, equivalent, getTransformFromProjections, getTransform, transform, transformExtent, transformWithProjections, setUserProjection, clearUserProjection, getUserProjection, useGeographic, toUserCoordinate, fromUserCoordinate, toUserExtent, fromUserExtent, createSafeCoordinateTransform, addCommon */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(7);

/***/ }),

/***/ "./node_modules/ol/source.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/source.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: BingMaps, CartoDB, Cluster, IIIF, Image, ImageArcGISRest, ImageCanvas, ImageMapGuide, ImageStatic, ImageWMS, OSM, Raster, Source, Stamen, Tile, TileArcGISRest, TileDebug, TileImage, TileJSON, TileWMS, UrlTile, UTFGrid, Vector, VectorTile, WMTS, XYZ, Zoomify */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1078);

/***/ }),

/***/ "./node_modules/ol/source/Image.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/source/Image.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: ImageSourceEventType, ImageSourceEvent, defaultImageLoadFunction, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(89);

/***/ }),

/***/ "./node_modules/ol/source/ImageWMS.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/source/ImageWMS.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(585);

/***/ }),

/***/ "./node_modules/ol/source/Tile.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/source/Tile.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: TileSourceEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(185);

/***/ }),

/***/ "./node_modules/ol/source/TileWMS.js":
/*!*******************************************************************************!*\
  !*** delegated ./node_modules/ol/source/TileWMS.js from dll-reference vendor ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(586);

/***/ }),

/***/ "./node_modules/ol/source/Vector.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/source/Vector.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: VectorSourceEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(108);

/***/ }),

/***/ "./node_modules/ol/source/WMTS.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/source/WMTS.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default, optionsFromCapabilities */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(587);

/***/ }),

/***/ "./node_modules/ol/sphere.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/sphere.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: DEFAULT_RADIUS, getDistance, getLength, getArea, offset */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(312);

/***/ }),

/***/ "./node_modules/ol/string.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/string.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: padNumber, compareVersions */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(136);

/***/ }),

/***/ "./node_modules/ol/style/Circle.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Circle.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(242);

/***/ }),

/***/ "./node_modules/ol/style/Fill.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Fill.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(84);

/***/ }),

/***/ "./node_modules/ol/style/RegularShape.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/ol/style/RegularShape.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(369);

/***/ }),

/***/ "./node_modules/ol/style/Stroke.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Stroke.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(85);

/***/ }),

/***/ "./node_modules/ol/style/Style.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Style.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: toFunction, createDefaultStyle, createEditingStyle, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(55);

/***/ }),

/***/ "./node_modules/ol/style/Text.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Text.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(169);

/***/ }),

/***/ "./node_modules/ol/uri.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/uri.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: appendParams */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(118);

/***/ }),

/***/ "./node_modules/ol/util.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/util.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: abstract, getUid, VERSION */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(9);

/***/ }),

/***/ "./node_modules/ol/xml.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/xml.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: XML_SCHEMA_INSTANCE_URI, createElementNS, getAllTextContent, getAllTextContent_, isDocument, getAttributeNS, parse, makeArrayExtender, makeArrayPusher, makeReplacer, makeObjectPropertyPusher, makeObjectPropertySetter, makeChildAppender, makeArraySerializer, makeSimpleNodeFactory, OBJECT_PROPERTY_NODE_FACTORY, makeSequence, makeStructureNS, parseNode, pushParseAndPop, serialize, pushSerializeAndPop, registerXMLSerializer, getXMLSerializer, registerDocument, getDocument */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(0);

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/process/browser.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1024);

/***/ }),

/***/ "./node_modules/qruri/index.js":
/*!*************************************************************************!*\
  !*** delegated ./node_modules/qruri/index.js from dll-reference vendor ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1079);

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
  "use strict";

  if (global.setImmediate) {
    return;
  }

  var nextHandle = 1;
  var tasksByHandle = {};
  var currentlyRunningATask = false;
  var doc = global.document;
  var registerImmediate;

  function setImmediate(callback) {
    if (typeof callback !== "function") {
      callback = new Function("" + callback);
    }

    var args = new Array(arguments.length - 1);

    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i + 1];
    }

    var task = {
      callback: callback,
      args: args
    };
    tasksByHandle[nextHandle] = task;
    registerImmediate(nextHandle);
    return nextHandle++;
  }

  function clearImmediate(handle) {
    delete tasksByHandle[handle];
  }

  function run(task) {
    var callback = task.callback;
    var args = task.args;

    switch (args.length) {
      case 0:
        callback();
        break;

      case 1:
        callback(args[0]);
        break;

      case 2:
        callback(args[0], args[1]);
        break;

      case 3:
        callback(args[0], args[1], args[2]);
        break;

      default:
        callback.apply(undefined, args);
        break;
    }
  }

  function runIfPresent(handle) {
    if (currentlyRunningATask) {
      setTimeout(runIfPresent, 0, handle);
    } else {
      var task = tasksByHandle[handle];

      if (task) {
        currentlyRunningATask = true;

        try {
          run(task);
        } finally {
          clearImmediate(handle);
          currentlyRunningATask = false;
        }
      }
    }
  }

  function installNextTickImplementation() {
    registerImmediate = function registerImmediate(handle) {
      process.nextTick(function () {
        runIfPresent(handle);
      });
    };
  }

  function canUsePostMessage() {
    if (global.postMessage && !global.importScripts) {
      var postMessageIsAsynchronous = true;
      var oldOnMessage = global.onmessage;

      global.onmessage = function () {
        postMessageIsAsynchronous = false;
      };

      global.postMessage("", "*");
      global.onmessage = oldOnMessage;
      return postMessageIsAsynchronous;
    }
  }

  function installPostMessageImplementation() {
    var messagePrefix = "setImmediate$" + Math.random() + "$";

    var onGlobalMessage = function onGlobalMessage(event) {
      if (event.source === global && typeof event.data === "string" && event.data.indexOf(messagePrefix) === 0) {
        runIfPresent(+event.data.slice(messagePrefix.length));
      }
    };

    if (global.addEventListener) {
      global.addEventListener("message", onGlobalMessage, false);
    } else {
      global.attachEvent("onmessage", onGlobalMessage);
    }

    registerImmediate = function registerImmediate(handle) {
      global.postMessage(messagePrefix + handle, "*");
    };
  }

  function installMessageChannelImplementation() {
    var channel = new MessageChannel();

    channel.port1.onmessage = function (event) {
      var handle = event.data;
      runIfPresent(handle);
    };

    registerImmediate = function registerImmediate(handle) {
      channel.port2.postMessage(handle);
    };
  }

  function installReadyStateChangeImplementation() {
    var html = doc.documentElement;

    registerImmediate = function registerImmediate(handle) {
      var script = doc.createElement("script");

      script.onreadystatechange = function () {
        runIfPresent(handle);
        script.onreadystatechange = null;
        html.removeChild(script);
        script = null;
      };

      html.appendChild(script);
    };
  }

  function installSetTimeoutImplementation() {
    registerImmediate = function registerImmediate(handle) {
      setTimeout(runIfPresent, 0, handle);
    };
  }

  var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
  attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

  if ({}.toString.call(global.process) === "[object process]") {
    installNextTickImplementation();
  } else if (canUsePostMessage()) {
    installPostMessageImplementation();
  } else if (global.MessageChannel) {
    installMessageChannelImplementation();
  } else if (doc && "onreadystatechange" in doc.createElement("script")) {
    installReadyStateChangeImplementation();
  } else {
    installSetTimeoutImplementation();
  }

  attachTo.setImmediate = setImmediate;
  attachTo.clearImmediate = clearImmediate;
})(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = typeof global !== "undefined" && global || typeof self !== "undefined" && self || window;
var apply = Function.prototype.apply;

exports.setTimeout = function () {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};

exports.setInterval = function () {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};

exports.clearTimeout = exports.clearInterval = function (timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}

Timeout.prototype.unref = Timeout.prototype.ref = function () {};

Timeout.prototype.close = function () {
  this._clearFn.call(scope, this._id);
};

exports.enroll = function (item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function (item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function (item) {
  clearTimeout(item._idleTimeoutId);
  var msecs = item._idleTimeout;

  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout) item._onTimeout();
    }, msecs);
  }
};

__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");

exports.setImmediate = typeof self !== "undefined" && self.setImmediate || typeof global !== "undefined" && global.setImmediate || this && this.setImmediate;
exports.clearImmediate = typeof self !== "undefined" && self.clearImmediate || typeof global !== "undefined" && global.clearImmediate || this && this.clearImmediate;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/tinycolor2/tinycolor.js":
/*!**********************************************************************************!*\
  !*** delegated ./node_modules/tinycolor2/tinycolor.js from dll-reference vendor ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1082);

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/webpack/buildin/global.js from dll-reference vendor ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(206);

/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/webpack/buildin/harmony-module.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1025);

/***/ }),

/***/ "./src/CustomEvent.js":
/*!****************************!*\
  !*** ./src/CustomEvent.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ol_events_Event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events/Event.js */ "./node_modules/ol/events/Event.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var _default = function (_olEventsEvent) {
  _inheritsLoose(_default, _olEventsEvent);

  function _default(type, detail) {
    var _this;

    if (detail === void 0) {
      detail = {};
    }

    _this = _olEventsEvent.call(this, type) || this;
    _this.detail = detail;
    return _this;
  }

  return _default;
}(ol_events_Event_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/GeometryType.js":
/*!*****************************!*\
  !*** ./src/GeometryType.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  CIRCLE: 'Circle',
  LINE_STRING: 'LineString',
  MULTI_LINE_STRING: 'MultiLineString',
  MULTI_POINT: 'MultiPoint',
  MULTI_POLYGON: 'MultiPolygon',
  POINT: 'Point',
  POLYGON: 'Polygon',
  RECTANGLE: 'Rectangle',
  TEXT: 'Text'
});

/***/ }),

/***/ "./src/Popover.js":
/*!************************!*\
  !*** ./src/Popover.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ol_Overlay_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/Overlay.js */ "./node_modules/ol/Overlay.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var _default = function (_olOverlay) {
  _inheritsLoose(_default, _olOverlay);

  function _default(options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    var originalEl = options.element ? options.element : document.createElement('div');
    options.element = document.createElement('div');
    _this = _olOverlay.call(this, options) || this;
    var closeEl = document.createElement('div');
    closeEl.className = 'close';
    closeEl.innerHTML = '&times;';
    closeEl.addEventListener('click', _this.close.bind(_assertThisInitialized(_this)));
    _this.contentEl_ = document.createElement('div');

    _this.contentEl_.append(closeEl, originalEl);

    return _this;
  }

  var _proto = _default.prototype;

  _proto.close = function close() {
    var map = this.getMap();

    if (map) {
      map.removeOverlay(this);
    }
  };

  _proto.setMap = function setMap(map) {
    var element = this.getElement();

    if (!element) {
      throw new Error('Missing element');
    }

    var currentMap = this.getMap();

    if (currentMap) {
      $(element).popover('dispose');
    }

    _olOverlay.prototype.setMap.call(this, map);

    if (map) {
      var contentEl = this.contentEl_;
      window.setTimeout(function () {
        $(element).popover({
          container: element.parentElement,
          placement: 'top',
          content: contentEl,
          html: true
        });
        $(element).popover('show');
      }, 0);
    }
  };

  return _default;
}(ol_Overlay_js__WEBPACK_IMPORTED_MODULE_0__["default"]);


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/WFSDescribeFeatureType.js":
/*!***************************************!*\
  !*** ./src/WFSDescribeFeatureType.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_format_XML_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/format/XML.js */ "./node_modules/ol/format/XML.js");
/* harmony import */ var ol_xml_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/xml.js */ "./node_modules/ol/xml.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var NAMESPACE_URIS_ = [null, 'http://www.w3.org/2001/XMLSchema'];

function makeStructureNS(namespaceURIs, structure) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeStructureNS"](namespaceURIs, structure);
}

var PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  element: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertyPusher"](readElement_),
  complexType: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertyPusher"](readComplexType_)
});
var COMPLEX_TYPE_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  complexContent: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertySetter"](readComplexContent_)
});
var COMPLEX_CONTENT_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  extension: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertySetter"](readExtension_)
});
var EXTENSION_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  sequence: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertySetter"](readSequence_)
});
var SEQUENCE_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  element: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertyPusher"](readElement_)
});

var WFSDescribeFeatureType = function (_olFormatXML) {
  _inheritsLoose(WFSDescribeFeatureType, _olFormatXML);

  function WFSDescribeFeatureType() {
    return _olFormatXML.apply(this, arguments) || this;
  }

  return WFSDescribeFeatureType;
}(ol_format_XML_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

WFSDescribeFeatureType.prototype.read;

WFSDescribeFeatureType.prototype.readFromDocument = function (doc) {
  var node;

  for (node = doc.firstChild; node; node = node.nextSibling) {
    if (node && node.nodeType == Node.ELEMENT_NODE) {
      return this.readFromNode(node);
    }
  }

  return null;
};

WFSDescribeFeatureType.prototype.readFromNode = function (node) {
  var result = {};
  result = ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"](result, PARSERS_, node, []);
  return result;
};

function readElement_(node, objectStack) {
  var attributes = {};

  for (var i = 0, len = node.attributes.length; i < len; i++) {
    var attribute = node.attributes.item(i);

    if (!attribute) {
      throw new Error('Missing attribute');
    }

    attributes[attribute.name] = attribute.value;
  }

  if (objectStack.length === 1) {
    var _attribute = attributes.type.split(':').pop();

    if (!_attribute) {
      throw new Error('Missing attribute');
    }

    attributes.type = _attribute;
  }

  return attributes;
}

function readComplexType_(node, objectStack) {
  var name = node.getAttribute('name');
  var object = ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({
    name: name
  }, COMPLEX_TYPE_PARSERS_, node, objectStack);
  object.complexContent = object.complexContent.extension.sequence.element;
  return object;
}

function readComplexContent_(node, objectStack) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({}, COMPLEX_CONTENT_PARSERS_, node, objectStack);
}

function readExtension_(node, objectStack) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({}, EXTENSION_PARSERS_, node, objectStack);
}

function readSequence_(node, objectStack) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({}, SEQUENCE_PARSERS_, node, objectStack);
}

/* harmony default export */ __webpack_exports__["default"] = (WFSDescribeFeatureType);

/***/ }),

/***/ "./src/array.js":
/*!**********************!*\
  !*** ./src/array.js ***!
  \**********************/
/*! exports provided: pushUnlessIncluded */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pushUnlessIncluded", function() { return pushUnlessIncluded; });
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");

function pushUnlessIncluded(arr, obj) {
  var ret = false;

  if (!Object(ol_array_js__WEBPACK_IMPORTED_MODULE_0__["includes"])(arr, obj)) {
    arr.push(obj);
    ret = true;
  }

  return ret;
}

/***/ }),

/***/ "./src/datasource/DataSource.js":
/*!**************************************!*\
  !*** ./src/datasource/DataSource.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var DataSource = function () {
  function DataSource(options) {
    this.inRange = options.inRange !== false;
    this.visible = options.visible === true;
    this.attributes = options.attributes || null;
    this.id_ = options.id;
    this.identifierAttribute_ = options.identifierAttribute;
    this.maxResolution_ = options.maxResolution;
    this.minResolution_ = options.minResolution;
    this.name_ = options.name;
  }

  var _proto = DataSource.prototype;

  _proto.getAttributes = function getAttributes() {
    return this.attributes;
  };

  _proto.setAttributes = function setAttributes(attributes) {
    this.attributes = attributes;
  };

  _createClass(DataSource, [{
    key: "id",
    get: function get() {
      return this.id_;
    }
  }, {
    key: "identifierAttribute",
    get: function get() {
      return this.identifierAttribute_;
    }
  }, {
    key: "maxResolution",
    get: function get() {
      return this.maxResolution_;
    }
  }, {
    key: "minResolution",
    get: function get() {
      return this.minResolution_;
    }
  }, {
    key: "name",
    get: function get() {
      return this.name_;
    }
  }, {
    key: "queryable",
    get: function get() {
      return false;
    }
  }, {
    key: "supportsDynamicInRange",
    get: function get() {
      return this.maxResolution !== null || this.minResolution !== null;
    }
  }]);

  return DataSource;
}();

/* harmony default export */ __webpack_exports__["default"] = (DataSource);

/***/ }),

/***/ "./src/datasource/DataSources.js":
/*!***************************************!*\
  !*** ./src/datasource/DataSources.js ***!
  \***************************************/
/*! exports provided: DataSource, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSource", function() { return DataSource; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_View_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/View.js */ "./node_modules/ol/View.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }






var DataSource = function () {
  function DataSource() {
    this.collection_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
    this.map_ = null;
    this.listenerKeys_ = [];
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(this.collection_, 'add', this.handleDataSourcesAdd_, this);
  }

  var _proto = DataSource.prototype;

  _proto.bindMap_ = function bindMap_(map) {
    var view = map.getView();
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(view, 'change:resolution', this.handleViewResolutionChange_, this));
    var resolution = view.getResolution();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    this.syncDataSourcesToResolution_(resolution);
  };

  _proto.unbindMap_ = function unbindMap_(map) {
    this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"]);
    this.listenerKeys_ = [];
  };

  _proto.handleViewResolutionChange_ = function handleViewResolutionChange_(evt) {
    var view = evt.target;

    if (view instanceof ol_View_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
      var resolution = view.getResolution();

      if (resolution === undefined) {
        throw new Error('Missing resolution');
      }

      this.syncDataSourcesToResolution_(resolution);
    }
  };

  _proto.syncDataSourcesToResolution_ = function syncDataSourcesToResolution_(resolution) {
    var _this = this;

    this.collection_.forEach(function (dataSource) {
      _this.syncDataSourceToResolution_(dataSource, resolution);
    });
  };

  _proto.syncDataSourceToResolution_ = function syncDataSourceToResolution_(dataSource, resolution) {
    if (!dataSource.supportsDynamicInRange) {
      return;
    }

    var maxResolution = dataSource.maxResolution;
    var minResolution = dataSource.minResolution;
    var inMinRange = minResolution === null || minResolution === undefined || resolution >= minResolution;
    var inMaxRange = maxResolution === null || maxResolution === undefined || resolution <= maxResolution;
    var inRange = inMinRange && inMaxRange;
    dataSource.inRange = inRange;
  };

  _proto.handleDataSourcesAdd_ = function handleDataSourcesAdd_(event) {
    if (event instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["CollectionEvent"]) {
      var dataSource = event.element;

      if (this.map_) {
        var resolution = this.map_.getView().getResolution();

        if (resolution === undefined) {
          throw new Error('Missing resolution');
        }

        this.syncDataSourceToResolution_(dataSource, resolution);
      }
    }
  };

  _createClass(DataSource, [{
    key: "map",
    set: function set(map) {
      if (this.map_ === map) {
        return;
      }

      if (this.map_) {
        this.unbindMap_(this.map_);
      }

      this.map_ = map;

      if (map) {
        this.bindMap_(map);
      }
    }
  }, {
    key: "collection",
    get: function get() {
      return this.collection_;
    }
  }]);

  return DataSource;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDataSources', []);
myModule.service('ngeoDataSources', DataSource);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/datasource/File.js":
/*!********************************!*\
  !*** ./src/datasource/File.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/datasource/DataSource.js */ "./src/datasource/DataSource.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var _default = function (_ngeoDatasourceDataSo) {
  _inheritsLoose(_default, _ngeoDatasourceDataSo);

  function _default(options) {
    var _this;

    _this = _ngeoDatasourceDataSo.call(this, options) || this;
    _this.featuresCollection_ = options.features || new ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
    _this.source_ = new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
      features: _this.featuresCollection_,
      wrapX: false
    });
    _this.layer_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_2__["default"]({
      source: _this.source_
    });
    return _this;
  }

  _createClass(_default, [{
    key: "features",
    get: function get() {
      return this.featuresCollection_.getArray();
    }
  }, {
    key: "featuresCollection",
    get: function get() {
      return this.featuresCollection_;
    }
  }, {
    key: "layer",
    get: function get() {
      return this.layer_;
    }
  }, {
    key: "extent",
    get: function get() {
      return this.source_.getExtent();
    }
  }]);

  return _default;
}(ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/datasource/FileGroup.js":
/*!*************************************!*\
  !*** ./src/datasource/FileGroup.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/datasource/File.js */ "./src/datasource/File.js");
/* harmony import */ var ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/Group.js */ "./src/datasource/Group.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var _default = function (_ngeoDatasourceGroup) {
  _inheritsLoose(_default, _ngeoDatasourceGroup);

  function _default(options) {
    var _this;

    _this = _ngeoDatasourceGroup.call(this, options) || this;
    var injector = options.injector;
    _this.rootScope_ = injector.get('$rootScope');
    _this.unregister_ = {};
    return _this;
  }

  var _proto = _default.prototype;

  _proto.addDataSource = function addDataSource(dataSource) {
    _ngeoDatasourceGroup.prototype.addDataSource.call(this, dataSource);

    if (!(dataSource instanceof ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_0__["default"])) {
      throw new Error('Wrong datasource type');
    }

    this.registerDataSource_(dataSource);
  };

  _proto.registerDataSource_ = function registerDataSource_(dataSource) {
    this.unregister_[dataSource.id] = this.rootScope_.$watch(function () {
      return dataSource.visible;
    }, this.handleDataSourceVisibleChange_.bind(this, dataSource));
  };

  _proto.handleDataSourceVisibleChange_ = function handleDataSourceVisibleChange_(dataSource, value, oldValue) {
    if (value !== undefined) {
      dataSource.layer.setVisible(value);
    }
  };

  _proto.removeDataSource = function removeDataSource(dataSource) {
    _ngeoDatasourceGroup.prototype.removeDataSource.call(this, dataSource);

    if (!this.unregister_.hasOwnProperty(dataSource.id)) {
      return;
    }

    if (!(dataSource instanceof ngeo_datasource_File_js__WEBPACK_IMPORTED_MODULE_0__["default"])) {
      throw new Error('Wrong datasource type');
    }

    this.unregisterDataSource_(dataSource);
  };

  _proto.unregisterDataSource_ = function unregisterDataSource_(dataSource) {
    this.unregister_[dataSource.id]();
    delete this.unregister_[dataSource.id];
  };

  return _default;
}(ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/datasource/Group.js":
/*!*********************************!*\
  !*** ./src/datasource/Group.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


var VisibilityState = {
  INDETERMINATE: 'indeterminate',
  OFF: 'off',
  ON: 'on'
};

var Group = function () {
  function Group(options) {
    this.dataSourcesCollection_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_0__["default"](options.dataSources);
    this.title_ = options.title;
  }

  var _proto = Group.prototype;

  _proto.destroy = function destroy() {
    this.dataSourcesCollection_.clear();
  };

  _proto.getDataSourceState = function getDataSourceState(dataSource) {
    return dataSource.visible ? VisibilityState.ON : VisibilityState.OFF;
  };

  _proto.addDataSource = function addDataSource(dataSource) {
    this.dataSourcesCollection_.push(dataSource);
  };

  _proto.removeDataSource = function removeDataSource(dataSource) {
    this.dataSourcesCollection_.remove(dataSource);
  };

  _proto.toggleVisibilityState = function toggleVisibilityState() {
    var visibleToSet = this.visibilityState !== VisibilityState.ON;

    for (var _iterator = _createForOfIteratorHelperLoose(this.dataSources), _step; !(_step = _iterator()).done;) {
      var dataSource = _step.value;

      if (dataSource.visible !== visibleToSet) {
        dataSource.visible = visibleToSet;
      }
    }
  };

  _createClass(Group, [{
    key: "dataSources",
    get: function get() {
      return this.dataSourcesCollection_.getArray();
    }
  }, {
    key: "dataSourcesCollection",
    get: function get() {
      return this.dataSourcesCollection_;
    }
  }, {
    key: "title",
    get: function get() {
      return this.title_;
    }
  }, {
    key: "visibilityState",
    get: function get() {
      var state;

      for (var _iterator2 = _createForOfIteratorHelperLoose(this.dataSources), _step2; !(_step2 = _iterator2()).done;) {
        var dataSource = _step2.value;

        if (state === undefined) {
          state = this.getDataSourceState(dataSource);
        } else {
          var otherState = this.getDataSourceState(dataSource);

          if (otherState !== state) {
            state = VisibilityState.INDETERMINATE;
          }
        }

        if (state === VisibilityState.INDETERMINATE) {
          break;
        }
      }

      if (typeof state != 'string') {
        throw new Error('missing state');
      }

      return state;
    }
  }]);

  return Group;
}();

/* harmony default export */ __webpack_exports__["default"] = (Group);

/***/ }),

/***/ "./src/datasource/Helper.js":
/*!**********************************!*\
  !*** ./src/datasource/Helper.js ***!
  \**********************************/
/*! exports provided: DatasourceHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasourceHelper", function() { return DatasourceHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/DataSource.js */ "./src/datasource/DataSource.js");
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/Attribute.js */ "./src/format/Attribute.js");
/* harmony import */ var ngeo_format_WFSAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/format/WFSAttribute.js */ "./src/format/WFSAttribute.js");
/* harmony import */ var ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/query/Querent.js */ "./src/query/Querent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }









var DatasourceHelper = function () {
  DatasourceHelper.$inject = ["$q", "ngeoDataSources", "ngeoQuerent"];

  function DatasourceHelper($q, ngeoDataSources, ngeoQuerent) {
    this.q_ = $q;
    this.collection_ = ngeoDataSources.collection;
    this.ngeoQuerent_ = ngeoQuerent;
    this.cache_ = {};
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(this.collection_, 'add', this.handleDataSourcesAdd_, this);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(this.collection_, 'remove', this.handleDataSourcesRemove_, this);
    this.collection_.forEach(this.registerDataSource_.bind(this));
  }

  var _proto = DatasourceHelper.prototype;

  _proto.getDataSource = function getDataSource(id) {
    return this.cache_[id] || null;
  };

  _proto.getDataSourceAttributes = function getDataSourceAttributes(dataSource) {
    var getDataSourceAttributesDefer = this.q_.defer();

    if (dataSource.attributes) {
      getDataSourceAttributesDefer.resolve(dataSource.attributes);
    } else {
      var createdAttributes = this.createDataSourceAttributesFromOGCAttributes_(dataSource);

      if (createdAttributes) {
        dataSource.setAttributes(createdAttributes);
        getDataSourceAttributesDefer.resolve(createdAttributes);
      } else {
        this.ngeoQuerent_.wfsDescribeFeatureType(dataSource).then(function (featureType_) {
          var ogcLayerName = dataSource.getWFSLayerNames()[0];
          console.assert(typeof ogcLayerName == 'string', 'The data source should have only one ogcLayer.');
          var featureType = featureType_;

          for (var _iterator = _createForOfIteratorHelperLoose(featureType.element), _step; !(_step = _iterator()).done;) {
            var element = _step.value;

            if (element.name === ogcLayerName) {
              for (var _iterator2 = _createForOfIteratorHelperLoose(featureType.complexType), _step2; !(_step2 = _iterator2()).done;) {
                var type = _step2.value;

                if (type.name == element.type) {
                  var complexContent = type.complexContent;
                  var attributes = new ngeo_format_WFSAttribute_js__WEBPACK_IMPORTED_MODULE_4__["default"]().read(complexContent);
                  dataSource.setAttributes(attributes);
                  getDataSourceAttributesDefer.resolve(attributes);
                  break;
                }
              }
            }
          }
        });
      }
    }

    return getDataSourceAttributesDefer.promise;
  };

  _proto.registerDataSource_ = function registerDataSource_(dataSource) {
    this.cache_[dataSource.id] = dataSource;
  };

  _proto.unregisterDataSource_ = function unregisterDataSource_(dataSource) {
    delete this.cache_[dataSource.id];
  };

  _proto.handleDataSourcesAdd_ = function handleDataSourcesAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["CollectionEvent"]) {
      var dataSource = evt.element;
      console.assert(dataSource instanceof ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
      this.registerDataSource_(dataSource);
    }
  };

  _proto.handleDataSourcesRemove_ = function handleDataSourcesRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["CollectionEvent"]) {
      var dataSource = evt.element;
      this.unregisterDataSource_(dataSource);
    }
  };

  _proto.createDataSourceAttributesFromOGCAttributes_ = function createDataSourceAttributesFromOGCAttributes_(dataSource) {
    var attributes = null;
    var formatWFSAttribute = new ngeo_format_WFSAttribute_js__WEBPACK_IMPORTED_MODULE_4__["default"]();
    var ogcAttributes = dataSource.ogcAttributesWFS;

    if (ogcAttributes) {
      attributes = [];

      for (var name in ogcAttributes) {
        var ogcAttribute = ogcAttributes[name];
        var alias = ogcAttribute.alias;
        var required = ogcAttribute.minOccurs != '0';
        var type = ogcAttribute.type;
        var attribute = {
          alias: alias,
          name: name,
          required: required
        };

        if (!Object(ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_3__["setGeometryType"])(attribute, "gml:" + type)) {
          formatWFSAttribute.setAttributeType(attribute, type.toLowerCase());
        }

        attributes.push(attribute);
      }
    }

    return attributes;
  };

  _createClass(DatasourceHelper, [{
    key: "collection",
    get: function get() {
      return this.collection_;
    }
  }]);

  return DatasourceHelper;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDataSourcesHelper', [ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]);
myModule.service('ngeoDataSourcesHelper', DatasourceHelper);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/datasource/OGC.js":
/*!*******************************!*\
  !*** ./src/datasource/OGC.js ***!
  \*******************************/
/*! exports provided: ServerType, Type, WFSOutputFormat, WMSInfoFormat, DEFAULT_GEOMETRY_NAME, OGC, guessServiceTypeByUrl, TimePropertyWidgetEnum, TimePropertyModeEnum, TimePropertyResolutionEnum, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServerType", function() { return ServerType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Type", function() { return Type; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WFSOutputFormat", function() { return WFSOutputFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WMSInfoFormat", function() { return WMSInfoFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_GEOMETRY_NAME", function() { return DEFAULT_GEOMETRY_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OGC", function() { return OGC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "guessServiceTypeByUrl", function() { return guessServiceTypeByUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimePropertyWidgetEnum", function() { return TimePropertyWidgetEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimePropertyModeEnum", function() { return TimePropertyModeEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimePropertyResolutionEnum", function() { return TimePropertyResolutionEnum; });
/* harmony import */ var ngeo_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/array.js */ "./src/array.js");
/* harmony import */ var ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/DataSource.js */ "./src/datasource/DataSource.js");
/* harmony import */ var ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/filter/Condition.js */ "./src/filter/Condition.js");
/* harmony import */ var ngeo_format_ArcGISGeoJSON_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/ArcGISGeoJSON.js */ "./src/format/ArcGISGeoJSON.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ol_format_GML2_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/format/GML2.js */ "./node_modules/ol/format/GML2.js");
/* harmony import */ var ol_format_GML3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/format/GML3.js */ "./node_modules/ol/format/GML3.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ol_format_WMSGetFeatureInfo_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/format/WMSGetFeatureInfo.js */ "./node_modules/ol/format/WMSGetFeatureInfo.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }










var ServerType = {
  ARCGIS: 'arcgis',
  GEOSERVER: 'geoserver',
  MAPSERVER: 'mapserver',
  QGISSERVER: 'qgisserver'
};
var Type = {
  WMS: 'WMS',
  WMTS: 'WMTS'
};
var WFSFeaturePrefix = {
  FEATURE: 'feature'
};
var WFSOutputFormat = {
  GML2: 'GML2',
  GML3: 'GML3'
};
var WMSInfoFormat = {
  GEOJSON: 'application/geojson',
  GML: 'application/vnd.ogc.gml'
};
var DEFAULT_GEOMETRY_NAME = 'geom';
var OGC = function (_ngeoDatasourceDataSo) {
  _inheritsLoose(OGC, _ngeoDatasourceDataSo);

  function OGC(options) {
    var _this;

    _this = _ngeoDatasourceDataSo.call(this, options) || this;
    _this.dimensionsConfig = options.dimensionsConfig || null;
    _this.dimensionsFiltersConfig = options.dimensionsFiltersConfig || null;
    _this.filterCondition_ = options.filterCondition || ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__["default"].AND;
    _this.filterRules = options.filterRules || null;
    _this.filtrable = options.filtrable || null;
    _this.copyable_ = options.copyable === true;
    _this.dimensions_ = options.dimensions || null;
    _this.geometryName_ = DEFAULT_GEOMETRY_NAME;
    _this.ogcImageType_ = options.ogcImageType || 'image/png';
    _this.wmsLayers_ = options.wmsLayers || null;
    _this.wfsLayers_ = options.wfsLayers || null;
    _this.ogcServerType_ = options.ogcServerType || ServerType.MAPSERVER;
    _this.ogcType_ = options.ogcType || Type.WMS;
    _this.ogcAttributes_ = options.ogcAttributes;
    _this.queryIconPosition_ = options.queryIconPosition;
    _this.snappable_ = options.snappable === true;
    _this.snappingToEdges_ = options.snappingToEdges !== false;
    _this.snappingToVertice_ = options.snappingToVertice !== false;
    _this.snappingTolerance_ = options.snappingTolerance !== undefined ? options.snappingTolerance : 10;
    _this.timeAttributeName_ = options.timeAttributeName;
    _this.timeLowerValue = options.timeLowerValue;
    _this.timeProperty_ = options.timeProperty !== undefined ? options.timeProperty : null;
    _this.timeUpperValue = options.timeUpperValue;
    _this.wfsFeatureNS_ = options.wfsFeatureNS;
    _this.wfsFeaturePrefix_ = options.wfsFeaturePrefix || WFSFeaturePrefix.FEATURE;
    _this.wfsOutputFormat_ = options.wfsOutputFormat || WFSOutputFormat.GML3;
    _this.wfsUrl_ = options.wfsUrl;
    var wmsInfoFormat;

    if (options.wmsInfoFormat) {
      wmsInfoFormat = options.wmsInfoFormat;
    } else {
      if (_this.ogcServerType_ === ServerType.ARCGIS) {
        wmsInfoFormat = WMSInfoFormat.GEOJSON;
      } else {
        wmsInfoFormat = WMSInfoFormat.GML;
      }
    }

    _this.wmsInfoFormat_ = wmsInfoFormat;
    _this.wmsIsSingleTile_ = options.wmsIsSingleTile === true;
    _this.wmsUrl_ = options.wmsUrl;
    _this.wmtsLayer_ = options.wmtsLayer;
    _this.wmtsUrl_ = options.wmtsUrl;
    var wfsLayerNames = [];
    var wmsLayerNames = [];

    if (_this.queryable) {
      var wfsLayers = _this.wfsLayers || [];

      for (var _iterator = _createForOfIteratorHelperLoose(wfsLayers), _step; !(_step = _iterator()).done;) {
        var wfsLayer = _step.value;

        if (wfsLayer.queryable) {
          wfsLayerNames.push(wfsLayer.name);
          wmsLayerNames.push(wfsLayer.name);
        }
      }

      var wmsLayers = _this.wmsLayers || [];

      for (var _iterator2 = _createForOfIteratorHelperLoose(wmsLayers), _step2; !(_step2 = _iterator2()).done;) {
        var wmsLayer = _step2.value;

        if (wmsLayer.queryable) {
          Object(ngeo_array_js__WEBPACK_IMPORTED_MODULE_0__["pushUnlessIncluded"])(wmsLayerNames, wmsLayer.name);
        }
      }
    }

    var wfsFormat = null;

    if (_this.supportsWFS && wfsLayerNames.length) {
      var format;

      if (_this.wfsOutputFormat_ === WFSOutputFormat.GML3) {
        format = new ol_format_GML3_js__WEBPACK_IMPORTED_MODULE_6__["default"]();
      } else if (_this.wfsOutputFormat_ === WFSOutputFormat.GML2) {
        format = new ol_format_GML2_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
      } else {
        throw new Error('Unknown GML output version');
      }

      wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
        featureNS: _this.wfsFeatureNS,
        featureType: wfsLayerNames,
        gmlFormat: format
      });
    }

    _this.wfsFormat_ = wfsFormat;
    var wmsFormat = null;

    if (_this.supportsWMS && wmsLayerNames.length) {
      if (_this.wmsInfoFormat === WMSInfoFormat.GML) {
        wmsFormat = new ol_format_WMSGetFeatureInfo_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
          layers: wmsLayerNames
        });
      } else if (_this.wmsInfoFormat === WMSInfoFormat.GEOJSON) {
        if (_this.ogcServerType_ === ServerType.ARCGIS) {
          wmsFormat = new ngeo_format_ArcGISGeoJSON_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
            layers: wmsLayerNames
          });
        }
      }
    }

    _this.wmsFormat_ = wmsFormat;
    return _this;
  }

  var _proto = OGC.prototype;

  _proto.setAttributes = function setAttributes(attributes) {
    _ngeoDatasourceDataSo.prototype.setAttributes.call(this, attributes);

    this.updateGeometryNameFromAttributes_();
  };

  _proto.geometryName = function geometryName(layer) {
    var geometryName = null;

    if (layer && this.ogcAttributes_) {
      var attributes = this.ogcAttributes_[layer];

      for (var attribute in attributes) {
        if (attributes[attribute].namespace == 'http://www.opengis.net/gml') {
          geometryName = attribute;
          break;
        }
      }
    }

    if (!geometryName) {
      geometryName = this.geometryName_;
    }

    return geometryName;
  };

  _proto.combinableWithDataSourceForWFS = function combinableWithDataSourceForWFS(dataSource) {
    return this.combinableForWFS && dataSource.combinableForWFS && this.supportsWFS && dataSource.supportsWFS && this.queryable && dataSource.queryable && this.wfsUrl === dataSource.wfsUrl && this.haveTheSameActiveDimensions(dataSource) && this.haveTheSameActiveDimensionsFilters(dataSource);
  };

  _proto.combinableWithDataSourceForWMS = function combinableWithDataSourceForWMS(dataSource) {
    return this.combinableForWMS && dataSource.combinableForWMS && this.supportsWMS && dataSource.supportsWMS && this.queryable && dataSource.queryable && this.wmsUrl === dataSource.wmsUrl && this.haveTheSameActiveDimensions(dataSource);
  };

  _proto.isAnyOGCLayerInRange = function isAnyOGCLayerInRange(res, queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    return !!this.getInRangeWFSLayerNames(res, queryableOnly).length;
  };

  _proto.getWMSLayerNames = function getWMSLayerNames(queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    var layerNames = [];

    if (this.wmsLayers) {
      for (var _iterator3 = _createForOfIteratorHelperLoose(this.wmsLayers), _step3; !(_step3 = _iterator3()).done;) {
        var wmsLayer = _step3.value;

        if (!queryableOnly || wmsLayer.queryable && wmsLayer.getData !== false) {
          layerNames.push(wmsLayer.name);
        }
      }
    }

    return layerNames;
  };

  _proto.getInRangeWFSLayerNames = function getInRangeWFSLayerNames(res, queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    var layerNames = [];

    if (this.wfsLayers) {
      for (var _iterator4 = _createForOfIteratorHelperLoose(this.wfsLayers), _step4; !(_step4 = _iterator4()).done;) {
        var wfsLayer = _step4.value;
        var maxRes = wfsLayer.maxResolution;
        var minRes = wfsLayer.minResolution;
        var inMinRange = minRes === undefined || res >= minRes;
        var inMaxRange = maxRes === undefined || res <= maxRes;
        var inRange = inMinRange && inMaxRange;

        if (inRange && (!queryableOnly || wfsLayer.queryable && wfsLayer.getData !== false)) {
          layerNames.push(wfsLayer.name);
        }
      }
    }

    return layerNames;
  };

  _proto.getWFSLayerNames = function getWFSLayerNames(queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    var layerNames = [];

    if (this.wfsLayers) {
      for (var _iterator5 = _createForOfIteratorHelperLoose(this.wfsLayers), _step5; !(_step5 = _iterator5()).done;) {
        var wfsLayer = _step5.value;

        if (!queryableOnly || wfsLayer.queryable && wfsLayer.getData !== false) {
          layerNames.push(wfsLayer.name);
        }
      }
    }

    return layerNames;
  };

  _proto.getFiltrableWFSLayerName = function getFiltrableWFSLayerName() {
    if (!this.filtrable) {
      throw new Error('Missing filtrable');
    }

    var layerNames = this.getWFSLayerNames(true);
    return layerNames[0];
  };

  _proto.updateGeometryNameFromAttributes_ = function updateGeometryNameFromAttributes_() {
    if (this.attributes) {
      for (var _iterator6 = _createForOfIteratorHelperLoose(this.attributes), _step6; !(_step6 = _iterator6()).done;) {
        var attribute = _step6.value;

        if (attribute.type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__["default"].GEOMETRY) {
          this.geometryName_ = attribute.name;
          break;
        }
      }
    }
  };

  _proto.haveTheSameActiveDimensions = function haveTheSameActiveDimensions(dataSource) {
    var share = true;
    var myActive = this.activeDimensions;
    var itsActive = dataSource.activeDimensions;

    for (var key in myActive) {
      if (myActive[key] !== itsActive[key]) {
        share = false;
        break;
      }
    }

    if (share) {
      for (var _key in itsActive) {
        if (itsActive[_key] !== myActive[_key]) {
          share = false;
          break;
        }
      }
    }

    return share;
  };

  _proto.haveTheSameActiveDimensionsFilters = function haveTheSameActiveDimensionsFilters(dataSource) {
    var _this2 = this;

    var myConfig = this.dimensionsFiltersConfig || {};
    var itsConfig = dataSource.dimensionsFiltersConfig || {};

    var equals = function equals(key) {
      var myKeyConfig = myConfig[key];
      var itsKeyConfig = itsConfig[key];

      if (myKeyConfig === undefined || itsKeyConfig === undefined) {
        return false;
      }

      if (myKeyConfig.field != itsKeyConfig.field) {
        return false;
      }

      var myValue = myKeyConfig.value !== null ? myKeyConfig.value : _this2.dimensions[key];
      var itsValue = itsKeyConfig.value !== null ? itsKeyConfig.value : dataSource.dimensions[key];

      if (myValue != itsValue) {
        return false;
      }

      return true;
    };

    for (var key in this.dimensionsFiltersConfig) {
      if (!equals(key)) {
        return false;
      }
    }

    for (var _key2 in dataSource.dimensionsFiltersConfig) {
      if (!equals(_key2)) {
        return false;
      }
    }

    return true;
  };

  _proto.getCommonOGCAttributes_ = function getCommonOGCAttributes_(layerNames) {
    var allLayersAttributes = this.ogcAttributes_;

    if (!allLayersAttributes || !layerNames.length) {
      return null;
    }

    var layersAttributes = [];

    for (var _iterator7 = _createForOfIteratorHelperLoose(layerNames), _step7; !(_step7 = _iterator7()).done;) {
      var layerName = _step7.value;
      var _layerAttributes = allLayersAttributes[layerName];

      if (_layerAttributes) {
        layersAttributes.push(_layerAttributes);
      }
    }

    if (!layersAttributes.length) {
      return null;
    }

    var attributes = {};
    var firstLayerAttributes = layersAttributes.shift();

    for (var firstLayerAttributeName in firstLayerAttributes) {
      var firstLayerAttribute = firstLayerAttributes[firstLayerAttributeName];
      var shouldPushAttribute = true;

      for (var _iterator8 = _createForOfIteratorHelperLoose(layersAttributes), _step8; !(_step8 = _iterator8()).done;) {
        var layerAttributes = _step8.value;

        if (!layerAttributes[firstLayerAttributeName]) {
          shouldPushAttribute = false;
          break;
        }
      }

      if (shouldPushAttribute) {
        attributes[firstLayerAttributeName] = firstLayerAttribute;
      }
    }

    return attributes;
  };

  _createClass(OGC, [{
    key: "dimensions",
    get: function get() {
      return this.dimensions_;
    }
  }, {
    key: "filterCondition",
    get: function get() {
      return this.filterCondition_;
    },
    set: function set(filterCondition) {
      this.filterCondition_ = filterCondition;
    }
  }, {
    key: "timeRangeValue",
    get: function get() {
      var range = null;
      var lower = this.timeLowerValue;
      var upper = this.timeUpperValue;

      if (lower !== undefined) {
        range = {
          start: lower
        };

        if (upper != undefined) {
          range.end = upper;
        }
      }

      return range;
    },
    set: function set(range) {
      if (range) {
        this.timeUpperValue = range.end;
        this.timeLowerValue = range.start;
      } else {
        this.timeUpperValue = undefined;
        this.timeLowerValue = undefined;
      }
    }
  }, {
    key: "copyable",
    get: function get() {
      return this.copyable_;
    }
  }, {
    key: "ogcImageType",
    get: function get() {
      return this.ogcImageType_;
    }
  }, {
    key: "wmsLayers",
    get: function get() {
      return this.wmsLayers_;
    }
  }, {
    key: "wfsLayers",
    get: function get() {
      return this.wfsLayers_;
    }
  }, {
    key: "ogcServerType",
    get: function get() {
      return this.ogcServerType_;
    }
  }, {
    key: "ogcType",
    get: function get() {
      return this.ogcType_;
    }
  }, {
    key: "queryIconPosition",
    get: function get() {
      return this.queryIconPosition_;
    }
  }, {
    key: "snappable",
    get: function get() {
      return this.snappable_;
    }
  }, {
    key: "snappingToEdges",
    get: function get() {
      return this.snappingToEdges_;
    }
  }, {
    key: "snappingToVertice",
    get: function get() {
      return this.snappingToVertice_;
    }
  }, {
    key: "snappingTolerance",
    get: function get() {
      return this.snappingTolerance_;
    }
  }, {
    key: "timeAttributeName",
    get: function get() {
      return this.timeAttributeName_;
    }
  }, {
    key: "timeProperty",
    get: function get() {
      return this.timeProperty_;
    }
  }, {
    key: "wfsFeatureNS",
    get: function get() {
      return this.wfsFeatureNS_;
    }
  }, {
    key: "wfsFeaturePrefix",
    get: function get() {
      return this.wfsFeaturePrefix_;
    }
  }, {
    key: "wfsOutputFormat",
    get: function get() {
      return this.wfsOutputFormat_;
    }
  }, {
    key: "wfsUrl",
    get: function get() {
      return this.wfsUrl_;
    }
  }, {
    key: "wmsInfoFormat",
    get: function get() {
      return this.wmsInfoFormat_;
    }
  }, {
    key: "wmsIsSingleTile",
    get: function get() {
      return this.wmsIsSingleTile_;
    }
  }, {
    key: "wmsUrl",
    get: function get() {
      return this.wmsUrl_;
    }
  }, {
    key: "wmtsLayer",
    get: function get() {
      return this.wmtsLayer_;
    }
  }, {
    key: "wmtsUrl",
    get: function get() {
      return this.wmtsUrl_;
    }
  }, {
    key: "activeDimensions",
    get: function get() {
      var active = {};
      var dimensions = this.dimensions_ || {};
      var config = this.dimensionsConfig || {};

      for (var key in config) {
        var configValue = config[key];

        if (configValue === null) {
          var value = dimensions[key];

          if (value !== undefined && value !== null) {
            active[key] = value;
          }
        } else {
          active[key] = configValue;
        }
      }

      return active;
    }
  }, {
    key: "combinableForWFS",
    get: function get() {
      return this.filterRules === null && this.timeRangeValue === null;
    }
  }, {
    key: "combinableForWMS",
    get: function get() {
      return this.filterRules === null && this.timeRangeValue === null;
    }
  }, {
    key: "ogcAttributesWFS",
    get: function get() {
      var wfsLayerNames = [];

      for (var _iterator9 = _createForOfIteratorHelperLoose(this.wfsLayers_), _step9; !(_step9 = _iterator9()).done;) {
        var wfsLayer = _step9.value;

        if (wfsLayer.queryable) {
          wfsLayerNames.push(wfsLayer.name);
        }
      }

      return this.getCommonOGCAttributes_(wfsLayerNames);
    }
  }, {
    key: "ogcAttributesWMS",
    get: function get() {
      var wmsLayerNames = [];

      for (var _iterator10 = _createForOfIteratorHelperLoose(this.wmsLayers_), _step10; !(_step10 = _iterator10()).done;) {
        var wmsLayer = _step10.value;

        if (wmsLayer.queryable) {
          wmsLayerNames.push(wmsLayer.name);
        }
      }

      return this.getCommonOGCAttributes_(wmsLayerNames);
    }
  }, {
    key: "queryable",
    get: function get() {
      var queryable = false;

      if (this.supportsWFS && this.wfsLayers) {
        for (var _iterator11 = _createForOfIteratorHelperLoose(this.wfsLayers), _step11; !(_step11 = _iterator11()).done;) {
          var wfsLayer = _step11.value;

          if (wfsLayer.queryable === true) {
            queryable = true;
            break;
          }
        }
      }

      if (this.supportsWMS && this.wmsLayers && this.wmsLayers.length > 0) {
        queryable = true;
      }

      return queryable;
    }
  }, {
    key: "supportsWFS",
    get: function get() {
      return this.wfsUrl !== undefined;
    }
  }, {
    key: "supportsAttributes",
    get: function get() {
      return this.attributes !== null || this.supportsWFS && this.wfsLayers !== null && this.wfsLayers.length === 1 && this.wfsLayers[0].queryable === true;
    }
  }, {
    key: "supportsWMS",
    get: function get() {
      return this.wmsUrl !== undefined;
    }
  }, {
    key: "supportsWMTS",
    get: function get() {
      return this.wmtsUrl !== undefined;
    }
  }, {
    key: "wfsFormat",
    get: function get() {
      return this.wfsFormat_;
    }
  }, {
    key: "wmsFormat",
    get: function get() {
      return this.wmsFormat_;
    }
  }]);

  return OGC;
}(ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
function guessServiceTypeByUrl(url) {
  var type;

  if (/(wmts)/i.test(url)) {
    type = Type.WMTS;
  } else {
    type = Type.WMS;
  }

  return type;
}
var TimePropertyWidgetEnum = {
  SLIDER: 'slider',
  DATEPICKER: 'datepicker'
};
var TimePropertyModeEnum = {
  RANGE: 'range',
  VALUE: 'value',
  DISABLED: 'disabled'
};
var TimePropertyResolutionEnum = {
  DAY: 'day',
  MONTH: 'month',
  YEAR: 'year',
  SECOND: 'second'
};
/* harmony default export */ __webpack_exports__["default"] = (OGC);

/***/ }),

/***/ "./src/datasource/OGCGroup.js":
/*!************************************!*\
  !*** ./src/datasource/OGCGroup.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/datasource/Group.js */ "./src/datasource/Group.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var _default = function (_ngeoDatasourceGroup) {
  _inheritsLoose(_default, _ngeoDatasourceGroup);

  function _default(options) {
    var _this;

    _this = _ngeoDatasourceGroup.call(this, options) || this;
    _this.url_ = options.url;
    return _this;
  }

  _createClass(_default, [{
    key: "url",
    get: function get() {
      return this.url_;
    }
  }]);

  return _default;
}(ngeo_datasource_Group_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/datasource/WMSGroup.js":
/*!************************************!*\
  !*** ./src/datasource/WMSGroup.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_datasource_OGCGroup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/datasource/OGCGroup.js */ "./src/datasource/OGCGroup.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var _default = function (_ngeoDatasourceOGCGro) {
  _inheritsLoose(_default, _ngeoDatasourceOGCGro);

  function _default(options, ngeoLayerHelper) {
    var _this;

    _this = _ngeoDatasourceOGCGro.call(this, options) || this;
    var injector = options.injector;
    _this.layer_ = null;
    _this.ngeoLayerHelper_ = ngeoLayerHelper;
    _this.rootScope_ = injector.get('$rootScope');
    _this.wmsDataSourceUnregister_ = {};

    _this.init_();

    return _this;
  }

  var _proto = _default.prototype;

  _proto.init_ = function init_() {
    if (!this.dataSources.length) {
      throw new Error('Missing dataSources');
    }

    for (var _iterator = _createForOfIteratorHelperLoose(this.dataSources), _step; !(_step = _iterator()).done;) {
      var dataSource = _step.value;

      if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
        this.registerDataSource_(dataSource);
      }
    }
  };

  _proto.destroy = function destroy() {
    for (var _iterator2 = _createForOfIteratorHelperLoose(this.dataSources), _step2; !(_step2 = _iterator2()).done;) {
      var dataSource = _step2.value;

      if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
        this.unregisterDataSource_(dataSource);
      }
    }

    _ngeoDatasourceOGCGro.prototype.destroy.call(this);
  };

  _proto.addDataSource = function addDataSource(dataSource) {
    _ngeoDatasourceOGCGro.prototype.addDataSource.call(this, dataSource);

    if (!(dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"])) {
      throw new Error('Wrong datasource type');
    }

    this.registerDataSource_(dataSource);
  };

  _proto.registerDataSource_ = function registerDataSource_(dataSource) {
    var id = dataSource.id;
    this.wmsDataSourceUnregister_[id] = this.rootScope_.$watch(function () {
      return dataSource.visible;
    }, this.handleDataSourceVisibleChange_.bind(this));

    if (!this.layer_) {
      this.layer_ = this.ngeoLayerHelper_.createBasicWMSLayerFromDataSource(dataSource);
    } else {
      this.layer_.get('querySourceIds').push(id);
      this.updateLayer_();
    }
  };

  _proto.handleDataSourceVisibleChange_ = function handleDataSourceVisibleChange_(value, oldValue) {
    if (value !== undefined && value !== oldValue) {
      this.updateLayer_();
    }
  };

  _proto.updateLayer_ = function updateLayer_() {
    var layer = this.layer;
    var layerNames = [];

    for (var _iterator3 = _createForOfIteratorHelperLoose(this.dataSources), _step3; !(_step3 = _iterator3()).done;) {
      var dataSource = _step3.value;

      if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] && dataSource.visible) {
        layerNames = layerNames.concat(dataSource.getWMSLayerNames());
      }
    }

    this.ngeoLayerHelper_.updateWMSLayerState(layer, layerNames.join(','));
  };

  _proto.removeDataSource = function removeDataSource(dataSource) {
    _ngeoDatasourceOGCGro.prototype.removeDataSource.call(this, dataSource);

    if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
      this.unregisterDataSource_(dataSource);
    }
  };

  _proto.unregisterDataSource_ = function unregisterDataSource_(dataSource) {
    var id = dataSource.id;
    var layer = this.layer;
    var unregister = this.wmsDataSourceUnregister_[id];
    unregister();
    delete this.wmsDataSourceUnregister_[id];
    Object(ol_array_js__WEBPACK_IMPORTED_MODULE_2__["remove"])(this.dataSources, dataSource);
    var ids = this.ngeoLayerHelper_.getQuerySourceIds(layer);

    if (ids) {
      Object(ol_array_js__WEBPACK_IMPORTED_MODULE_2__["remove"])(ids, id);
    }

    if (this.dataSources.length) {
      this.updateLayer_();
    }
  };

  _createClass(_default, [{
    key: "layer",
    get: function get() {
      if (!this.layer_) {
        throw new Error('Missing layer');
      }

      return this.layer_;
    }
  }]);

  return _default;
}(ngeo_datasource_OGCGroup_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/download/Csv.js":
/*!*****************************!*\
  !*** ./src/download/Csv.js ***!
  \*****************************/
/*! exports provided: DownloadCsvService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DownloadCsvService", function() { return DownloadCsvService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");
DownloadCsvService.$inject = ["gettextCatalog", "ngeoDownload", "ngeoCsvEncoding", "ngeoCsvExtension", "ngeoCsvIncludeHeader", "ngeoCsvQuote", "ngeoCsvSeparator"];


function DownloadCsvService(gettextCatalog, ngeoDownload, ngeoCsvEncoding, ngeoCsvExtension, ngeoCsvIncludeHeader, ngeoCsvQuote, ngeoCsvSeparator) {
  this.gettextCatalog_ = gettextCatalog;
  this.encoding_ = ngeoCsvEncoding;
  this.extension_ = ngeoCsvExtension;
  this.includeHeader_ = ngeoCsvIncludeHeader;
  this.quote_ = ngeoCsvQuote;
  this.separator_ = ngeoCsvSeparator;
  this.download_ = ngeoDownload;
}

DownloadCsvService.prototype.generateCsv = function (data, columnDefs) {
  var _this = this;

  if (data.length == 0 || columnDefs.length == 0) {
    return '';
  }

  var translatedColumnHeaders = columnDefs.map(function (columnHeader) {
    return _this.gettextCatalog_.getString(columnHeader.name);
  });
  var header = this.getRow_(translatedColumnHeaders);
  var dataRows = data.map(function (values) {
    var rowValues = columnDefs.map(function (columnHeader) {
      return values[columnHeader.name];
    });
    return _this.getRow_(rowValues);
  });
  return this.includeHeader_ ? header + dataRows.join('') : dataRows.join('');
};

DownloadCsvService.prototype.getRow_ = function (values) {
  var _this2 = this;

  var matchAllQuotesRegex = new RegExp(this.quote_, 'g');
  var doubleQuote = this.quote_ + this.quote_;
  var rowValues = values.map(function (value) {
    if (value !== undefined && value !== null) {
      value = "" + value;
      return "" + _this2.quote_ + value.replace(matchAllQuotesRegex, doubleQuote) + _this2.quote_;
    } else {
      return '';
    }
  });
  return rowValues.join(this.separator_) + "\n";
};

DownloadCsvService.prototype.startDownload = function (data, columnDefs, fileName) {
  var fileContent = this.generateCsv(data, columnDefs);
  this.download_(fileContent, fileName, "text/csv;charset=" + this.encoding_);
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCsvDownload', [ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('ngeoCsvDownload', DownloadCsvService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/download/service.js":
/*!*********************************!*\
  !*** ./src/download/service.js ***!
  \*********************************/
/*! exports provided: factory, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "factory", function() { return factory; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! file-saver */ "./node_modules/file-saver/dist/FileSaver.min.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_2__);



var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDownload', []);
function factory() {
  function download(content, fileName, opt_fileType) {
    var fileType = opt_fileType !== undefined && !Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isSafari"])() ? opt_fileType : 'text/plain;charset=utf-8';
    var blob = new Blob([new Uint8Array([0xef, 0xbb, 0xbf]), content], {
      type: fileType
    });
    Object(file_saver__WEBPACK_IMPORTED_MODULE_2__["saveAs"])(blob, fileName);
  }

  return download;
}
myModule.factory('ngeoDownload', factory);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/draw/features.js":
/*!******************************!*\
  !*** ./src/draw/features.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");


var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatures', []);
myModule.value('ngeoFeatures', new ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["default"]());
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: unlistenByKeys */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unlistenByKeys", function() { return unlistenByKeys; });
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


function unlistenByKeys(keys) {
  for (var _iterator = _createForOfIteratorHelperLoose(keys), _step; !(_step = _iterator()).done;) {
    var key = _step.value;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_0__["unlistenByKey"])(key);
  }

  keys.length = 0;
}

/***/ }),

/***/ "./src/filter/Condition.js":
/*!*********************************!*\
  !*** ./src/filter/Condition.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  AND: '&&',
  NOT: '!',
  OR: '||'
});

/***/ }),

/***/ "./src/filter/RuleHelper.js":
/*!**********************************!*\
  !*** ./src/filter/RuleHelper.js ***!
  \**********************************/
/*! exports provided: RuleHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleHelper", function() { return RuleHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/filter/Condition.js */ "./src/filter/Condition.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_format_filter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/filter.js */ "./src/format/filter.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/rule/Date.js */ "./src/rule/Date.js");
/* harmony import */ var ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/rule/Geometry.js */ "./src/rule/Geometry.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
/* harmony import */ var ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/rule/Select.js */ "./src/rule/Select.js");
/* harmony import */ var ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/rule/Text.js */ "./src/rule/Text.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/format/filter.js */ "./node_modules/ol/format/filter.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! moment */ "./node_modules/moment/dist/moment.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }















var RuleHelper = function () {
  RuleHelper.$inject = ["gettextCatalog", "ngeoFeatureHelper", "ngeoWMSTime"];

  function RuleHelper(gettextCatalog, ngeoFeatureHelper, ngeoWMSTime) {
    this.gettextCatalog_ = gettextCatalog;
    this.ngeoFeatureHelper_ = ngeoFeatureHelper;
    this.ngeoWMSTime_ = ngeoWMSTime;
  }

  var _proto = RuleHelper.prototype;

  _proto.createRulesFromAttributes = function createRulesFromAttributes(attributes, opt_isCustom) {
    var rules = [];

    for (var _iterator = _createForOfIteratorHelperLoose(attributes), _step; !(_step = _iterator()).done;) {
      var attribute = _step.value;
      rules.push(this.createRuleFromAttribute(attribute, opt_isCustom));
    }

    return rules;
  };

  _proto.createRuleFromAttribute = function createRuleFromAttribute(attribute, opt_isCustom) {
    var rule;
    var isCustom = opt_isCustom === true;
    var name = this.gettextCatalog_.getString(attribute.name);

    switch (attribute.type) {
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATE:
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATETIME:
        if (isCustom) {
          rule = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].EQUALS,
            operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].EQUALS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].BEGINS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].ENDS],
            propertyName: attribute.name,
            type: attribute.type
          });
        } else {
          rule = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].DURING,
            propertyName: attribute.name,
            type: attribute.type
          });
        }

        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].GEOMETRY:
        rule = new ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
          name: name,
          operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].INTERSECTS,
          operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].CONTAINS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].INTERSECTS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].WITHIN],
          propertyName: attribute.name,
          type: attribute.type
        });
        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].NUMBER:
        if (isCustom) {
          rule = new ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].EQUAL_TO,
            operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].GREATER_THAN, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].GREATER_THAN_OR_EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LESSER_THAN, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LESSER_THAN_OR_EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].NOT_EQUAL_TO],
            propertyName: attribute.name,
            type: ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].NUMBER
          });
        } else {
          rule = new ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].BETWEEN,
            propertyName: attribute.name,
            type: ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].NUMBER
          });
        }

        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].SELECT:
        rule = new ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
          choices: attribute.choices,
          name: name,
          propertyName: attribute.name
        });
        break;

      default:
        if (isCustom) {
          rule = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
            text: '',
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LIKE,
            operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LIKE, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].NOT_EQUAL_TO],
            propertyName: attribute.name
          });
        } else {
          rule = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
            text: '',
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LIKE,
            propertyName: attribute.name
          });
        }

        break;
    }

    return rule;
  };

  _proto.createRules = function createRules(optionsList) {
    var rules = [];

    for (var _iterator2 = _createForOfIteratorHelperLoose(optionsList), _step2; !(_step2 = _iterator2()).done;) {
      var options = _step2.value;
      rules.push(this.createRule(options));
    }

    return rules;
  };

  _proto.createRule = function createRule(options) {
    if (options.expression) {
      options.literal = options.expression;
    }

    var rule;

    switch (options.type) {
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATE:
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATETIME:
        rule = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"](options);
        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].GEOMETRY:
        rule = new ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"](options);
        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].SELECT:
        if (options.expression) {
          var expression = options.expression;
          options.literal = expression.split(',');
        }

        var selectOptions = options;
        console.assert(selectOptions.choices);
        rule = new ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"](selectOptions);
        break;

      default:
        rule = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"](options);
        break;
    }

    return rule;
  };

  _proto.cloneRule = function cloneRule(rule) {
    var options = {
      isCustom: rule.isCustom,
      name: rule.name,
      propertyName: rule.propertyName,
      type: rule.type
    };
    var literal = rule.literal;

    if (literal !== null) {
      options.literal = literal;
    }

    if (rule.lowerBoundary !== null) {
      options.lowerBoundary = rule.lowerBoundary;
    }

    if (rule.operator) {
      options.operator = rule.operator;
    }

    if (rule.operators) {
      options.operators = rule.operators.slice(0);
    }

    if (rule.upperBoundary !== null) {
      options.upperBoundary = rule.upperBoundary;
    }

    var clone;

    if (rule instanceof ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      clone = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"](options);
    } else if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      clone = new ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"](options);
      clone.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(rule.feature));
    } else if (rule instanceof ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var opt = options;
      opt.choices = rule.choices.slice(0);
      clone = new ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"](opt);
    } else if (rule instanceof ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
      var _opt = options;
      clone = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"](_opt);
    } else {
      clone = new ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["default"](options);
    }

    return clone;
  };

  _proto.extendRule = function extendRule(sourceRule, destRule) {
    if (destRule.literal !== sourceRule.literal) {
      destRule.literal = sourceRule.literal;
    }

    if (destRule.lowerBoundary !== sourceRule.lowerBoundary) {
      destRule.lowerBoundary = sourceRule.lowerBoundary;
    }

    if (destRule.operator !== sourceRule.operator) {
      destRule.operator = sourceRule.operator;
    }

    if (destRule.upperBoundary !== sourceRule.upperBoundary) {
      destRule.upperBoundary = sourceRule.upperBoundary;
    }

    if (sourceRule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"] && destRule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      this.ngeoFeatureHelper_.clearNonSpatialProperties(destRule.feature);
      destRule.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(sourceRule.feature));
    }
  };

  _proto.serializeRules = function serializeRules(rules) {
    var _this = this;

    return rules.map(function (rule) {
      var serializedRule = _this.serializeRule(rule);

      return serializedRule;
    });
  };

  _proto.serializeRule = function serializeRule(rule) {
    var obj = {
      name: rule.name,
      propertyName: rule.propertyName,
      type: rule.type
    };

    if (rule.literal !== null) {
      obj.literal = rule.literal;
    }

    if (rule.lowerBoundary !== null) {
      obj.lowerBoundary = rule.lowerBoundary;
    }

    if (rule.operator !== null) {
      obj.operator = rule.operator;
    }

    if (rule.operators !== null) {
      obj.operators = rule.operators.slice(0);
    }

    if (rule.upperBoundary !== null) {
      obj.upperBoundary = rule.upperBoundary;
    }

    if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      var opt = obj;
      opt.featureProperties = this.ngeoFeatureHelper_.getNonSpatialProperties(rule.feature);
    }

    if (rule instanceof ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var _opt2 = obj;
      _opt2.choices = rule.choices;
    }

    return obj;
  };

  _proto.createFilter = function createFilter(options) {
    var dataSource = options.dataSource;
    var mainFilter = null;

    if (options.filter) {
      mainFilter = options.filter;
    } else {
      var rules = options.filterRules || dataSource.filterRules;
      var conditions = [];

      if (rules && rules.length) {
        for (var _iterator3 = _createForOfIteratorHelperLoose(rules), _step3; !(_step3 = _iterator3()).done;) {
          var rule = _step3.value;
          var filter = this.createFilterFromRule_(rule, dataSource, options.srsName);

          if (filter) {
            conditions.push(filter);
          }
        }
      }

      var condition = dataSource.filterCondition;

      if (conditions.length === 1) {
        mainFilter = conditions[0];
      } else if (conditions.length >= 2) {
        if (condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].AND) {
          mainFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["and"].apply(null, conditions);
        } else if (condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].OR || condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].NOT) {
          mainFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["or"].apply(null, conditions);
        }
      }

      if (mainFilter && condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].NOT) {
        mainFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["not"](mainFilter);
      }
    }

    if (options.incTime) {
      var timeFilter = this.createTimeFilterFromDataSource_(dataSource);
      mainFilter = this.joinFilters(mainFilter, timeFilter);
    }

    if (options.incDimensions) {
      var dimensionsFilter = this.createDimensionsFilterFromDataSource_(dataSource);
      mainFilter = this.joinFilters(mainFilter, dimensionsFilter);
    }

    return mainFilter;
  };

  _proto.createFilterString = function createFilterString(options) {
    var filterString = null;
    var defaultWFSVersion = '1.1.0';
    var filter = this.createFilter(options);

    if (filter) {
      var filterNode = Object(ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_11__["writeFilter"])(filter, defaultWFSVersion);
      var xmlSerializer = new XMLSerializer();
      filterString = xmlSerializer.serializeToString(filterNode);
    }

    return filterString;
  };

  _proto.joinFilters = function joinFilters(filterA, filterB) {
    var filter = null;

    if (filterA && filterB) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["and"].apply(null, [filterA, filterB]);
    } else if (filterA) {
      filter = filterA;
    } else if (filterB) {
      filter = filterB;
    }

    return filter;
  };

  _proto.createFilterFromRule_ = function createFilterFromRule_(rule, dataSource, opt_srsName) {
    var filter = null;
    var value = rule.value;

    if (!value) {
      return null;
    }

    var literal = value.literal;
    var lowerBoundary = value.lowerBoundary;
    var operator = value.operator;
    var propertyName = value.propertyName;
    var upperBoundary = value.upperBoundary;
    var rot = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"];
    var rsot = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"];
    var rtot = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"];
    var spatialTypes = [rsot.CONTAINS, rsot.INTERSECTS, rsot.WITHIN];
    var numericTypes = [rot.GREATER_THAN, rot.GREATER_THAN_OR_EQUAL_TO, rot.LESSER_THAN, rot.LESSER_THAN_OR_EQUAL_TO];

    if (rule instanceof ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      var beginValue;
      var endValue;

      if (operator === rtot.DURING) {
        beginValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(lowerBoundary).format('YYYY-MM-DD');
        endValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(upperBoundary).format('YYYY-MM-DD');
      } else if (operator === rtot.EQUALS) {
        beginValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(literal).format('YYYY-MM-DD');
        endValue = beginValue;
      } else if (operator === rtot.BEGINS) {
        beginValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(literal).format('YYYY-MM-DD');
        endValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(literal).add(30, 'years').format('YYYY-MM-DD');
      } else if (operator === rtot.ENDS) {
        beginValue = '1970-01-01';
        endValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(literal).format('YYYY-MM-DD');
      }

      if (beginValue && endValue) {
        if (dataSource.ogcServerType == 'qgisserver') {
          filter = ngeo_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["dateBetween"](propertyName, beginValue, endValue);
        } else {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["during"](propertyName, beginValue, endValue);
        }
      }
    } else if (rule instanceof ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var selectedChoices = rule.selectedChoices;

      if (selectedChoices.length === 1) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](propertyName, selectedChoices[0]);
      } else if (selectedChoices.length >= 2) {
        var conditions = [];

        for (var _iterator4 = _createForOfIteratorHelperLoose(selectedChoices), _step4; !(_step4 = _iterator4()).done;) {
          var selectedChoice = _step4.value;
          conditions.push(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](propertyName, selectedChoice));
        }

        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["or"].apply(null, conditions);
      }
    } else if (spatialTypes.includes(operator)) {
      var featureNames = dataSource.getFiltrableWFSLayerName();
      var geometryName = dataSource.geometryName(featureNames ? featureNames[0] : null);

      if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
        var geometry = rule.geometry;

        if (!geometry) {
          throw new Error('Missing geometry');
        }

        if (geometryName === null) {
          throw new Error('Missing geometryName');
        }

        if (operator === rsot.CONTAINS) {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["contains"](geometryName, geometry, opt_srsName);
        } else if (operator === rsot.INTERSECTS) {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["intersects"](geometryName, geometry, opt_srsName);
        } else if (operator === rsot.WITHIN) {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["within"](geometryName, geometry, opt_srsName);
        }
      }
    } else if (numericTypes.includes(operator)) {
      if (typeof literal !== 'number') {
        throw new Error('Wrong literal type');
      }

      if (operator === rot.GREATER_THAN) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["greaterThan"](propertyName, literal);
      } else if (operator === rot.GREATER_THAN_OR_EQUAL_TO) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["greaterThanOrEqualTo"](propertyName, literal);
      } else if (operator === rot.LESSER_THAN) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["lessThan"](propertyName, literal);
      } else if (operator === rot.LESSER_THAN_OR_EQUAL_TO) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["lessThanOrEqualTo"](propertyName, literal);
      }
    } else if (operator === rot.BETWEEN) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["between"](propertyName, lowerBoundary, upperBoundary);
    } else if (operator === rot.EQUAL_TO) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](propertyName, literal);
    } else if (operator === rot.LIKE) {
      var stringLiteral = String(literal).replace(/!/g, '!!').replace(/\./g, '!.').replace(/\*/g, '!*');
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["like"](propertyName, "*" + stringLiteral + "*", '*', '.', '!', false);
    } else if (operator === rot.NOT_EQUAL_TO) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["notEqualTo"](propertyName, literal);
    }

    return filter;
  };

  _proto.createDimensionsFilterFromDataSource_ = function createDimensionsFilterFromDataSource_(dataSource) {
    var config = dataSource.dimensionsFiltersConfig || {};
    var dimensions = dataSource.dimensions;
    var conditions = [];

    for (var key in config) {
      var value = config[key].value;

      if (value === null) {
        var dimensionValue = dimensions[key];

        if (dimensionValue !== undefined && dimensionValue !== null) {
          value = dimensionValue;
        }
      }

      if (value !== null) {
        conditions.push(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](config[key].field, value, true));
      }
    }

    if (conditions.length === 1) {
      return conditions[0];
    } else if (conditions.length >= 2) {
      return ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["and"].apply(null, conditions);
    }

    return null;
  };

  _proto.createTimeFilterFromDataSource_ = function createTimeFilterFromDataSource_(dataSource) {
    var filter = null;
    var range = dataSource.timeRangeValue;
    var timeProperty = dataSource.timeProperty;
    var name = dataSource.timeAttributeName;

    if (range && timeProperty && name) {
      if (range.end !== undefined) {
        var values = this.ngeoWMSTime_.formatWMSTimeParam(timeProperty, range).split('/');
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["during"](name, values[0], values[1]);
      } else {
        var resolution = timeProperty.resolution || 'seconds';
        var value = this.ngeoWMSTime_.formatWMSTimeParam(timeProperty, range);
        var momentEnd;

        switch (resolution) {
          case 'year':
            momentEnd = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).add(1, 'years').subtract(1, 'seconds');
            break;

          case 'month':
            momentEnd = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).add(1, 'months').subtract(1, 'seconds');
            break;

          case 'day':
            momentEnd = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).add(1, 'days').subtract(1, 'seconds');
            break;

          default:
        }

        if (momentEnd) {
          var startValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).utc().format('YYYY-MM-DD HH:mm:ss');
          var endValue = momentEnd.utc().format('YYYY-MM-DD HH:mm:ss');
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["during"](name, startValue, endValue);
        }
      }
    }

    return filter;
  };

  return RuleHelper;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoRuleHelper', [ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]);
myModule.service('ngeoRuleHelper', RuleHelper);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/format/ArcGISGeoJSON.js":
/*!*************************************!*\
  !*** ./src/format/ArcGISGeoJSON.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var layerIdentifier = 'layerName';

var ArcGISGeoJSON = function (_olFormatGeoJSON) {
  _inheritsLoose(ArcGISGeoJSON, _olFormatGeoJSON);

  function ArcGISGeoJSON(opt_options) {
    var _this;

    var options = opt_options ? opt_options : {};
    _this = _olFormatGeoJSON.call(this, opt_options) || this;
    _this.layers_ = options.layers ? options.layers : null;
    return _this;
  }

  var _proto = ArcGISGeoJSON.prototype;

  _proto.getLayers = function getLayers() {
    return this.layers_;
  };

  _proto.setLayers = function setLayers(layers) {
    this.layers_ = layers;
  };

  _proto.readFeaturesFromObject = function readFeaturesFromObject(object, opt_options) {
    var geoJSONObject = object;
    var features = [];
    var geoJSONFeatures = null;

    if (geoJSONObject.type === 'FeatureCollection') {
      var geoJSONFeatureCollection = object;
      geoJSONFeatures = geoJSONFeatureCollection.features;
    } else {
      geoJSONFeatures = [object];
    }

    for (var i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {
      var feature = geoJSONFeatures[i];
      var layerName = feature[layerIdentifier];

      if (this.layers_ && !Object(ol_array_js__WEBPACK_IMPORTED_MODULE_0__["includes"])(this.layers_, layerName)) {
        continue;
      }

      features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));
    }

    return features;
  };

  return ArcGISGeoJSON;
}(ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (ArcGISGeoJSON);

/***/ }),

/***/ "./src/format/Attribute.js":
/*!*********************************!*\
  !*** ./src/format/Attribute.js ***!
  \*********************************/
/*! exports provided: setGeometryType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setGeometryType", function() { return setGeometryType; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");

function setGeometryType(attribute, type) {
  var geomRegex = /gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/;

  if (geomRegex.exec(type)) {
    attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].GEOMETRY;

    if (/^gml:Point/.exec(type)) {
      attribute.geomType = 'Point';
    } else if (/^gml:LineString|^gml:Curve/.exec(type)) {
      attribute.geomType = 'LineString';
    } else if (/^gml:Polygon|^gml:Surface/.exec(type)) {
      attribute.geomType = 'Polygon';
    } else if (/^gml:MultiPoint/.exec(type)) {
      attribute.geomType = 'MultiPoint';
    } else if (/^gml:MultiLineString|^gml:MultiCurve/.exec(type)) {
      attribute.geomType = 'MultiLineString';
    } else if (/^gml:MultiPolygon|^gml:MultiSurface/.exec(type)) {
      attribute.geomType = 'MultiPolygon';
    }
  }

  return !!attribute.type && !!attribute.geomType;
}
/* harmony default export */ __webpack_exports__["default"] = (null);

/***/ }),

/***/ "./src/format/AttributeType.js":
/*!*************************************!*\
  !*** ./src/format/AttributeType.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  BOOLEAN: 'boolean',
  DATE: 'date',
  DATETIME: 'datetime',
  TIME: 'time',
  GEOMETRY: 'geometry',
  NUMBER: 'number',
  SELECT: 'select',
  TEXT: 'text'
});

/***/ }),

/***/ "./src/format/FeatureHash.js":
/*!***********************************!*\
  !*** ./src/format/FeatureHash.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/FeatureHashStyleType.js */ "./src/format/FeatureHashStyleType.js");
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ol_color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/color.js */ "./node_modules/ol/color.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_format_Feature_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/format/Feature.js */ "./node_modules/ol/format/Feature.js");
/* harmony import */ var ol_format_TextFeature_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/format/TextFeature.js */ "./node_modules/ol/format/TextFeature.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/MultiLineString.js */ "./node_modules/ol/geom/MultiLineString.js");
/* harmony import */ var ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/geom/MultiPoint.js */ "./node_modules/ol/geom/MultiPoint.js");
/* harmony import */ var ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/geom/MultiPolygon.js */ "./node_modules/ol/geom/MultiPolygon.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/style/Circle.js */ "./node_modules/ol/style/Circle.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/style/Stroke.js */ "./node_modules/ol/style/Stroke.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
/* harmony import */ var ol_style_Text_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/style/Text.js */ "./node_modules/ol/style/Text.js");
/* harmony import */ var ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/geom/Geometry.js */ "./node_modules/ol/geom/Geometry.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




















var LegacyProperties_ = {};
var DEFAULT_ACCURACY = 0.1;
var StyleTypes_ = {
  'LineString': ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].LINE_STRING,
  'Point': ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POINT,
  'Polygon': ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POLYGON,
  'MultiLineString': ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].LINE_STRING,
  'MultiPoint': ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POINT,
  'MultiPolygon': ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POLYGON
};
var CHAR64_ = '.-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz';
var GEOMETRY_READERS_ = {
  'P': readMultiPointGeometry_,
  'L': readMultiLineStringGeometry_,
  'A': readMultiPolygonGeometry_,
  'l': readLineStringGeometry_,
  'p': readPointGeometry_,
  'a': readPolygonGeometry_
};
var GEOMETRY_WRITERS_ = {
  'MultiLineString': writeMultiLineStringGeometry_,
  'MultiPoint': writeMultiPointGeometry_,
  'MultiPolygon': writeMultiPolygonGeometry_,
  'LineString': writeLineStringGeometry_,
  'Point': writePointGeometry_,
  'Polygon': writePolygonGeometry_
};

var FeatureHash = function (_olFormatTextFeature) {
  _inheritsLoose(FeatureHash, _olFormatTextFeature);

  function FeatureHash(opt_options) {
    var _this;

    _this = _olFormatTextFeature.call(this) || this;
    var options = opt_options || {};
    _this.accuracy_ = options.accuracy || DEFAULT_ACCURACY;
    _this.encodeStyles_ = options.encodeStyles || true;
    _this.propertiesFunction_ = options.properties || defaultPropertiesFunction_;
    _this.setStyle_ = options.setStyle !== undefined ? options.setStyle : true;
    _this.prevX_ = 0;
    _this.prevY_ = 0;
    LegacyProperties_ = options.propertiesType || {};
    _this.defaultValues_ = options.defaultValues || {};
    return _this;
  }

  var _proto = FeatureHash.prototype;

  _proto.decodeCoordinates_ = function decodeCoordinates_(text, opt_flatCoordinates) {
    var len = text.length;
    var index = 0;
    var flatCoordinates = opt_flatCoordinates !== undefined ? opt_flatCoordinates : [];
    var i = flatCoordinates.length;

    while (index < len) {
      var b = void 0;
      var shift = 0;
      var result = 0;

      do {
        b = CHAR64_.indexOf(text.charAt(index++));
        result |= (b & 0x1f) << shift;
        shift += 5;
      } while (b >= 32);

      var dx = result & 1 ? ~(result >> 1) : result >> 1;
      this.prevX_ += dx;
      shift = 0;
      result = 0;

      do {
        b = CHAR64_.indexOf(text.charAt(index++));
        result |= (b & 0x1f) << shift;
        shift += 5;
      } while (b >= 32);

      var dy = result & 1 ? ~(result >> 1) : result >> 1;
      this.prevY_ += dy;
      flatCoordinates[i++] = this.prevX_ * this.accuracy_;
      flatCoordinates[i++] = this.prevY_ * this.accuracy_;
    }

    return flatCoordinates;
  };

  _proto.encodeCoordinates_ = function encodeCoordinates_(flatCoordinates, stride, offset, end) {
    var encodedCoordinates = '';

    for (var i = offset; i < end; i += stride) {
      var x = flatCoordinates[i];
      var y = flatCoordinates[i + 1];
      x = Math.floor(x / this.accuracy_);
      y = Math.floor(y / this.accuracy_);
      var dx = x - this.prevX_;
      var dy = y - this.prevY_;
      this.prevX_ = x;
      this.prevY_ = y;
      encodedCoordinates += encodeSignedNumber_(dx) + encodeSignedNumber_(dy);
    }

    return encodedCoordinates;
  };

  _proto.readFeatureFromText = function readFeatureFromText(text, opt_options) {
    console.assert(text.length > 2);
    console.assert(text[1] === '(');
    console.assert(text.endsWith(')'));
    var splitIndex = text.indexOf('~');
    var geometryText = splitIndex >= 0 ? text.substring(0, splitIndex) + ")" : text;
    var geometry = this.readGeometryFromText(geometryText, opt_options);
    var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__["default"](geometry);

    if (splitIndex >= 0) {
      var attributesAndStylesText = text.substring(splitIndex + 1, text.length - 1);
      splitIndex = attributesAndStylesText.indexOf('~');
      var attributesText = splitIndex >= 0 ? attributesAndStylesText.substring(0, splitIndex) : attributesAndStylesText;

      if (attributesText != '') {
        var parts = attributesText.split("'");

        for (var _iterator = _createForOfIteratorHelperLoose(parts), _step; !(_step = _iterator()).done;) {
          var encodedPart = _step.value;
          var part = decodeURIComponent(encodedPart);
          var keyVal = part.split('*');
          console.assert(keyVal.length === 2);
          var key = keyVal[0];
          var value = keyVal[1];

          if (!this.setStyle_ && LegacyProperties_[key]) {
            key = LegacyProperties_[key];
          }

          feature.set(key, castValue_(key, value));
        }
      }

      if (splitIndex >= 0) {
        var stylesText = attributesAndStylesText.substring(splitIndex + 1);

        if (this.setStyle_) {
          setStyleInFeature_(stylesText, feature);
        } else {
          setStyleProperties_(stylesText, feature);
        }
      }
    }

    return feature;
  };

  _proto.readFeaturesFromText = function readFeaturesFromText(text, opt_options) {
    var _this2 = this;

    console.assert(text.startsWith('F'));
    this.prevX_ = 0;
    this.prevY_ = 0;
    var features = [];
    text = text.substring(1);

    while (text.length > 0) {
      var index = text.indexOf(')');
      console.assert(index >= 0);
      var feature = this.readFeatureFromText(text.substring(0, index + 1), opt_options);
      features.push(feature);
      text = text.substring(index + 1);
    }

    features.forEach(function (feature) {
      for (var key in _this2.defaultValues_) {
        var property = LegacyProperties_[key];

        if (feature.get(property) === undefined) {
          feature.set(property, _this2.defaultValues_[key].call(null, feature));
        }
      }
    });
    return features;
  };

  _proto.readGeometryFromText = function readGeometryFromText(text, opt_options) {
    var geometryReader = GEOMETRY_READERS_[text[0]];
    console.assert(geometryReader !== undefined);
    return geometryReader.call(this, text);
  };

  _proto.writeFeatureText = function writeFeatureText(feature, opt_options) {
    var encodedParts = [];
    var encodedGeometry = '';
    var geometry = feature.getGeometry();

    if (geometry) {
      encodedGeometry = this.writeGeometryText(geometry, opt_options);
    }

    if (encodedGeometry.length > 0) {
      console.assert(encodedGeometry.endsWith(')'));
      encodedGeometry = encodedGeometry.substring(0, encodedGeometry.length - 1);
      encodedParts.push(encodedGeometry);
    }

    var encodedProperties = [];
    var propFunction = this.propertiesFunction_(feature);

    for (var key in propFunction) {
      var value = propFunction[key];

      if (value !== undefined && value !== null && key !== feature.getGeometryName()) {
        if (encodedProperties.length !== 0) {
          encodedProperties.push("'");
        }

        var encoded = encodeURIComponent(key.replace(/[()'*]/g, '_') + "*" + value.toString().replace(/[()'*]/g, '_'));
        encodedProperties.push(encoded);
      }
    }

    if (encodedProperties.length > 0) {
      encodedParts.push('~');
      Array.prototype.push.apply(encodedParts, encodedProperties);
    }

    if (this.encodeStyles_) {
      var styleFunction = feature.getStyleFunction();

      if (styleFunction !== undefined) {
        var styles = styleFunction(feature, 0);

        if (styles) {
          var encodedStyles = [];
          styles = Array.isArray(styles) ? styles : [styles];

          if (!geometry) {
            throw new Error('Missing geometry');
          }

          encodeStyles_(styles, geometry.getType(), encodedStyles);

          if (encodedStyles.length > 0) {
            encodedParts.push('~');
            Array.prototype.push.apply(encodedParts, encodedStyles);
          }
        }
      }
    }

    encodedParts.push(')');
    return encodedParts.join('');
  };

  _proto.writeFeaturesText = function writeFeaturesText(features, opt_options) {
    this.prevX_ = 0;
    this.prevY_ = 0;
    var textArray = [];

    if (features.length > 0) {
      textArray.push('F');

      for (var i = 0, ii = features.length; i < ii; ++i) {
        textArray.push(this.writeFeatureText(features[i], opt_options));
      }
    }

    return textArray.join('');
  };

  _proto.writeGeometryText = function writeGeometryText(geometry, opt_options) {
    var geometryWriter = GEOMETRY_WRITERS_[geometry.getType()];
    console.assert(geometryWriter !== undefined);
    var transformedGeometry = Object(ol_format_Feature_js__WEBPACK_IMPORTED_MODULE_5__["transformGeometryWithOptions"])(geometry, true, opt_options);

    if (!(transformedGeometry instanceof ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_18__["default"])) {
      throw new Error('Missing transformedGeometry');
    }

    var encGeom = geometryWriter.call(this, transformedGeometry);

    if (!encGeom) {
      throw new Error('Missing encodedGeometry');
    }

    return encGeom;
  };

  return FeatureHash;
}(ol_format_TextFeature_js__WEBPACK_IMPORTED_MODULE_6__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (FeatureHash);

function defaultPropertiesFunction_(feature) {
  return feature.getProperties();
}

function encodeSignedNumber_(num) {
  var signedNum = num << 1;

  if (num < 0) {
    signedNum = ~signedNum;
  }

  return encodeNumber_(signedNum);
}

function encodeNumber_(num) {
  var encodedNumber = '';

  while (num >= 0x20) {
    encodedNumber += CHAR64_.charAt(0x20 | num & 0x1f);
    num >>= 5;
  }

  encodedNumber += CHAR64_.charAt(num);
  return encodedNumber;
}

function encodeStyles_(styles, geometryType, encodedStyles) {
  var styleType = StyleTypes_[geometryType];
  console.assert(styleType !== undefined);

  for (var _iterator2 = _createForOfIteratorHelperLoose(styles), _step2; !(_step2 = _iterator2()).done;) {
    var style = _step2.value;
    var fillStyle = style.getFill();
    var imageStyle = style.getImage();
    var strokeStyle = style.getStroke();
    var textStyle = style.getText();

    if (styleType == ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POLYGON) {
      if (fillStyle !== null) {
        encodeStylePolygon_(fillStyle, strokeStyle, encodedStyles);
      }
    } else if (styleType == ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].LINE_STRING) {
      if (strokeStyle !== null) {
        encodeStyleLine_(strokeStyle, encodedStyles);
      }
    } else if (styleType == ngeo_format_FeatureHashStyleType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POINT) {
      if (imageStyle !== null) {
        encodeStylePoint_(imageStyle, encodedStyles);
      }
    }

    if (textStyle !== null) {
      encodeStyleText_(textStyle, encodedStyles);
    }
  }
}

function encodeStyleLine_(strokeStyle, encodedStyles) {
  encodeStyleStroke_(strokeStyle, encodedStyles);
}

function encodeStylePoint_(imageStyle, encodedStyles) {
  if (imageStyle instanceof ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
    var radius = imageStyle.getRadius();

    if (encodedStyles.length > 0) {
      encodedStyles.push("'");
    }

    encodedStyles.push(encodeURIComponent("pointRadius*" + radius));
    var fillStyle = imageStyle.getFill();

    if (fillStyle !== null) {
      encodeStyleFill_(fillStyle, encodedStyles);
    }

    var strokeStyle = imageStyle.getStroke();

    if (strokeStyle !== null) {
      encodeStyleStroke_(strokeStyle, encodedStyles);
    }
  }
}

function encodeStylePolygon_(fillStyle, strokeStyle, encodedStyles) {
  encodeStyleFill_(fillStyle, encodedStyles);

  if (strokeStyle !== null) {
    encodeStyleStroke_(strokeStyle, encodedStyles);
  }
}

function encodeStyleFill_(fillStyle, encodedStyles, propertyName) {
  if (propertyName === void 0) {
    propertyName = 'fillColor';
  }

  var fillColor = fillStyle.getColor();
  var fillColorHex;

  if (fillColor !== null) {
    if (Array.isArray(fillColor)) {
      fillColorHex = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_2__["rgbArrayToHex"])(fillColor);
    } else if (typeof fillColor === 'string') {
      fillColorHex = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_2__["rgbArrayToHex"])(Object(ol_color_js__WEBPACK_IMPORTED_MODULE_3__["asArray"])(fillColor));
    } else {
      throw new Error('Unsupported color');
    }

    if (encodedStyles.length > 0) {
      encodedStyles.push("'");
    }

    encodedStyles.push(encodeURIComponent(propertyName + "*" + fillColorHex));
  }
}

function encodeStyleStroke_(strokeStyle, encodedStyles) {
  var strokeColor = strokeStyle.getColor();

  if (strokeColor !== null) {
    if (Array.isArray(strokeColor)) {
      var strokeColorHex = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_2__["rgbArrayToHex"])(strokeColor);

      if (encodedStyles.length > 0) {
        encodedStyles.push("'");
      }

      encodedStyles.push(encodeURIComponent("strokeColor*" + strokeColorHex));
    }
  }

  var strokeWidth = strokeStyle.getWidth();

  if (strokeWidth !== undefined) {
    if (encodedStyles.length > 0) {
      encodedStyles.push("'");
    }

    encodedStyles.push(encodeURIComponent("strokeWidth*" + strokeWidth));
  }
}

function encodeStyleText_(textStyle, encodedStyles) {
  var fontStyle = textStyle.getFont();

  if (fontStyle !== undefined) {
    var font = fontStyle.split(' ');

    if (font.length >= 3) {
      if (encodedStyles.length > 0) {
        encodedStyles.push("'");
      }

      encodedStyles.push(encodeURIComponent("fontSize*" + font[1]));
    }
  }

  var fillStyle = textStyle.getFill();

  if (fillStyle !== null) {
    encodeStyleFill_(fillStyle, encodedStyles, 'fontColor');
  }
}

function readLineStringGeometry_(text) {
  console.assert(text.startsWith('l('));
  console.assert(text.endsWith(')'));
  text = text.substring(2, text.length - 1);
  var flatCoordinates = this.decodeCoordinates_(text);
  return new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"](flatCoordinates, 'XY');
}

function readMultiLineStringGeometry_(text) {
  console.assert(text.startsWith('L('));
  console.assert(text.endsWith(')'));
  text = text.substring(2, text.length - 1);
  var flatCoordinates = [];
  var ends = [];
  var lineStrings = text.split("'");

  for (var i = 0, ii = lineStrings.length; i < ii; ++i) {
    flatCoordinates = this.decodeCoordinates_(lineStrings[i], flatCoordinates);
    ends[i] = flatCoordinates.length;
  }

  return new ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_8__["default"](flatCoordinates, 'XY', ends);
}

function readPointGeometry_(text) {
  console.assert(text.startsWith('p('));
  console.assert(text.endsWith(')'));
  text = text.substring(2, text.length - 1);
  var flatCoordinates = this.decodeCoordinates_(text);
  console.assert(flatCoordinates.length === 2);
  return new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"](flatCoordinates, 'XY');
}

function readMultiPointGeometry_(text) {
  console.assert(text.startsWith('P('));
  console.assert(text.endsWith(')'));
  text = text.substring(2, text.length - 1);
  var flatCoordinates = this.decodeCoordinates_(text);
  return new ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_9__["default"](flatCoordinates, 'XY');
}

function readPolygonGeometry_(text) {
  console.assert(text.startsWith('a('));
  console.assert(text.endsWith(')'));
  text = text.substring(2, text.length - 1);
  var flatCoordinates = [];
  var ends = [];
  var rings = text.split("'");

  for (var i = 0, ii = rings.length; i < ii; ++i) {
    flatCoordinates = this.decodeCoordinates_(rings[i], flatCoordinates);
    var end = flatCoordinates.length;

    if (i === 0) {
      flatCoordinates[end++] = flatCoordinates[0];
      flatCoordinates[end++] = flatCoordinates[1];
    } else {
      flatCoordinates[end++] = flatCoordinates[ends[i - 1]];
      flatCoordinates[end++] = flatCoordinates[ends[i - 1] + 1];
    }

    ends[i] = end;
  }

  return new ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_12__["default"](flatCoordinates, 'XY', ends);
}

function readMultiPolygonGeometry_(text) {
  console.assert(text.startsWith('A('));
  console.assert(text.endsWith(')'));
  text = text.substring(2, text.length - 1);
  var flatCoordinates = [];
  var endss = [];
  var polygons = text.split(')(');

  for (var i = 0, ii = polygons.length; i < ii; ++i) {
    var rings = polygons[i].split("'");
    endss[i] = [];
    var ends = endss[i];

    for (var j = 0, jj = rings.length; j < jj; ++j) {
      flatCoordinates = this.decodeCoordinates_(rings[j], flatCoordinates);
      var end = flatCoordinates.length;

      if (j === 0) {
        flatCoordinates[end++] = flatCoordinates[0];
        flatCoordinates[end++] = flatCoordinates[1];
      } else {
        flatCoordinates[end++] = flatCoordinates[ends[j - 1]];
        flatCoordinates[end++] = flatCoordinates[ends[j - 1] + 1];
      }

      ends[j] = end;
    }
  }

  return new ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_10__["default"](flatCoordinates, 'XY', endss);
}

function setStyleInFeature_(text, feature) {
  if (text == '') {
    return;
  }

  var properties = getStyleProperties_(text, feature);
  var fillColor = properties.fillColor;
  var fontSize = properties.fontSize;
  var fontColor = properties.fontColor;
  var pointRadius = properties.pointRadius;
  var strokeColor = properties.strokeColor;
  var strokeWidth = properties.strokeWidth;
  var fillStyle = null;

  if (fillColor !== undefined) {
    fillStyle = new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_14__["default"]({
      color: fillColor
    });
  }

  var strokeStyle = null;

  if (strokeColor !== undefined && strokeWidth !== undefined) {
    if (typeof strokeWidth != 'number') {
      throw new Error('Missing strokeWidth');
    }

    strokeStyle = new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_15__["default"]({
      color: strokeColor,
      width: strokeWidth
    });
  }

  var imageStyle = null;

  if (pointRadius !== undefined) {
    if (typeof pointRadius != 'number') {
      throw new Error('Missing pointRadius');
    }

    var _options = {
      radius: pointRadius
    };

    if (fillStyle) {
      _options.fill = fillStyle;
    }

    if (strokeStyle) {
      _options.stroke = strokeStyle;
    }

    imageStyle = new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_13__["default"](_options);
    fillStyle = null;
    strokeStyle = null;
  }

  var textStyle = null;

  if (fontSize !== undefined && fontColor !== undefined) {
    textStyle = new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_17__["default"]({
      font: fontSize + " sans-serif",
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_14__["default"]({
        color: fontColor
      })
    });
  }

  var options = {};

  if (fillStyle) {
    options.fill = fillStyle;
  }

  if (strokeStyle) {
    options.stroke = strokeStyle;
  }

  if (imageStyle) {
    options.image = imageStyle;
  }

  if (textStyle) {
    options.text = textStyle;
  }

  var style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_16__["default"](options);
  feature.setStyle(style);
}

function setStyleProperties_(text, feature) {
  var properties = getStyleProperties_(text, feature);
  var geometry = feature.getGeometry();

  if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    if (properties.isLabel || properties[ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].IS_TEXT]) {
      delete properties.strokeColor;
      delete properties.fillColor;
    } else {
      delete properties.fontColor;
      delete properties.fontSize;
    }
  } else {
    delete properties.fontColor;

    if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      delete properties.fillColor;
      delete properties.fillOpacity;
    }
  }

  if (properties.fontSize) {
    var fontSizeStr = properties.fontSize;

    if (typeof fontSizeStr !== 'string') {
      throw new Error('Wrong fontSizeStr type');
    }

    var fontSize = parseFloat(fontSizeStr);

    if (fontSizeStr.includes('px')) {
      fontSize = Math.round(fontSize / 1.333333);
    }

    properties.fontSize = fontSize;
  }

  var clone = {};

  for (var key in properties) {
    var value = properties[key];

    if (LegacyProperties_[key]) {
      clone[LegacyProperties_[key]] = value;
    } else {
      clone[key] = value;
    }
  }

  feature.setProperties(clone);
}

function castValue_(key, value) {
  var numProperties = [ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].ANGLE, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].OPACITY, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].SIZE, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].STROKE, 'pointRadius', 'strokeWidth'];
  var boolProperties = [ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].IS_CIRCLE, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].IS_RECTANGLE, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].IS_TEXT, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].SHOW_MEASURE, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_0__["default"].SHOW_LABEL, 'isCircle', 'isRectangle', 'isLabel', 'showMeasure', 'showLabel'];

  if (numProperties.includes(key)) {
    return +value;
  } else if (boolProperties.includes(key)) {
    return value === 'true' ? true : false;
  } else {
    return value;
  }
}

function getStyleProperties_(text, feature) {
  var parts = text.split("'");
  var properties = {};

  for (var _iterator3 = _createForOfIteratorHelperLoose(parts), _step3; !(_step3 = _iterator3()).done;) {
    var encodedPart = _step3.value;
    var part = decodeURIComponent(encodedPart);
    var keyVal = part.split('*');
    console.assert(keyVal.length === 2);
    var key = keyVal[0];
    var val = keyVal[1];
    properties[key] = castValue_(key, val);
  }

  return properties;
}

function writeLineStringGeometry_(geometry) {
  if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
    var flatCoordinates = geometry.getFlatCoordinates();
    var stride = geometry.getStride();
    var end = flatCoordinates.length;
    return "l(" + this.encodeCoordinates_(flatCoordinates, stride, 0, end) + ")";
  }

  return null;
}

function writeMultiLineStringGeometry_(geometry) {
  if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
    var ends = geometry.getEnds();
    var lineStringCount = ends.length;
    var flatCoordinates = geometry.getFlatCoordinates();
    var stride = geometry.getStride();
    var offset = 0;
    var textArray = ['L('];

    for (var i = 0; i < lineStringCount; ++i) {
      var end = ends[i];
      var text = this.encodeCoordinates_(flatCoordinates, stride, offset, end);

      if (i !== 0) {
        textArray.push("'");
      }

      textArray.push(text);
      offset = end;
    }

    textArray.push(')');
    return textArray.join('');
  }

  return null;
}

function writePointGeometry_(geometry) {
  if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    var flatCoordinates = geometry.getFlatCoordinates();
    var stride = geometry.getStride();
    var end = flatCoordinates.length;
    return "p(" + this.encodeCoordinates_(flatCoordinates, stride, 0, end) + ")";
  }

  return null;
}

function writeMultiPointGeometry_(geometry) {
  if (geometry instanceof ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
    var flatCoordinates = geometry.getFlatCoordinates();
    var stride = geometry.getStride();
    var end = flatCoordinates.length;
    return "P(" + this.encodeCoordinates_(flatCoordinates, stride, 0, end) + ")";
  }

  return null;
}

function encodeRings_(flatCoordinates, stride, offset, ends, textArray) {
  var linearRingCount = ends.length;

  for (var i = 0; i < linearRingCount; ++i) {
    var end = ends[i] - stride;
    var text = this.encodeCoordinates_(flatCoordinates, stride, offset, end);

    if (i !== 0) {
      textArray.push("'");
    }

    textArray.push(text);
    offset = ends[i];
  }

  return offset;
}

function writePolygonGeometry_(geometry) {
  if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_12__["default"]) {
    var flatCoordinates = geometry.getFlatCoordinates();
    var stride = geometry.getStride();
    var ends = geometry.getEnds();
    var offset = 0;
    var textArray = ['a('];
    encodeRings_.call(this, flatCoordinates, stride, offset, ends, textArray);
    textArray.push(')');
    return textArray.join('');
  }

  return null;
}

function writeMultiPolygonGeometry_(geometry) {
  if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    var flatCoordinates = geometry.getFlatCoordinates();
    var stride = geometry.getStride();
    var endss = geometry.getEndss();
    var polygonCount = endss.length;
    var offset = 0;
    var textArray = ['A'];

    for (var i = 0; i < polygonCount; ++i) {
      var ends = endss[i];
      textArray.push('(');
      offset = encodeRings_.call(this, flatCoordinates, stride, offset, ends, textArray);
      textArray.push(')');
    }

    return textArray.join('');
  } else {
    throw new Error('Wrong geometry type');
  }
}

/***/ }),

/***/ "./src/format/FeatureHashStyleType.js":
/*!********************************************!*\
  !*** ./src/format/FeatureHashStyleType.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  LINE_STRING: 'LineString',
  POINT: 'Point',
  POLYGON: 'Polygon'
});

/***/ }),

/***/ "./src/format/FeatureProperties.js":
/*!*****************************************!*\
  !*** ./src/format/FeatureProperties.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  ANGLE: 'a',
  COLOR: 'c',
  IS_CIRCLE: 'l',
  IS_RECTANGLE: 'r',
  IS_TEXT: 't',
  NAME: 'n',
  SHOW_LABEL: 'b',
  OPACITY: 'o',
  AZIMUT: 'z',
  SHOW_MEASURE: 'm',
  SIZE: 's',
  STROKE: 'k',
  ARROW_DIRECTION: 'd',
  ARROW_POSITION: 'p'
});

/***/ }),

/***/ "./src/format/WFSAttribute.js":
/*!************************************!*\
  !*** ./src/format/WFSAttribute.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/Attribute.js */ "./src/format/Attribute.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_format_XSDAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/format/XSDAttribute.js */ "./src/format/XSDAttribute.js");




var _default = function () {
  function _default() {}

  var _proto = _default.prototype;

  _proto.read = function read(complexTypeElements) {
    return complexTypeElements.map(this.readFromComplexTypeElement_);
  };

  _proto.setAttributeType = function setAttributeType(attribute, type) {
    if (type === 'gml:TimeInstantType' || type === 'dateTime') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATETIME;
    } else if (type === 'date') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATE;
    } else if (type === 'time') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TIME;
    } else if (type === 'decimal' || type === 'double') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
      attribute.numType = ngeo_format_XSDAttribute_js__WEBPACK_IMPORTED_MODULE_2__["FormatNumberType"].FLOAT;
    } else if (type === 'integer' || type === 'long') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
      attribute.numType = ngeo_format_XSDAttribute_js__WEBPACK_IMPORTED_MODULE_2__["FormatNumberType"].INTEGER;
    } else if (type === 'boolean') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].BOOLEAN;
    } else {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TEXT;
    }
  };

  _proto.readFromComplexTypeElement_ = function readFromComplexTypeElement_(object) {
    var name = object.name;
    var alias = object.alias || null;
    var required = object.minOccurs != '0';
    var attribute = {
      name: name,
      alias: alias,
      required: required
    };
    var type = object.type;

    if (!Object(ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__["setGeometryType"])(attribute, type)) {
      this.setAttributeType(attribute, type);
    }

    return attribute;
  };

  return _default;
}();



/***/ }),

/***/ "./src/format/XSDAttribute.js":
/*!************************************!*\
  !*** ./src/format/XSDAttribute.js ***!
  \************************************/
/*! exports provided: FormatNumberType, getGeometryAttribute, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormatNumberType", function() { return FormatNumberType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGeometryAttribute", function() { return getGeometryAttribute; });
/* harmony import */ var ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/Attribute.js */ "./src/format/Attribute.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ol_format_XML_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/XML.js */ "./node_modules/ol/format/XML.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var FormatNumberType = {
  FLOAT: 'float',
  INTEGER: 'integer'
};

var XSDAttribute = function (_olFormatXML) {
  _inheritsLoose(XSDAttribute, _olFormatXML);

  function XSDAttribute() {
    return _olFormatXML.apply(this, arguments) || this;
  }

  var _proto = XSDAttribute.prototype;

  _proto.read = function read(source) {
    return ol_format_XML_js__WEBPACK_IMPORTED_MODULE_2__["default"].prototype.read.call(this, source);
  };

  _proto.readFromDocument = function readFromDocument(doc) {
    console.assert(doc.nodeType == Node.DOCUMENT_NODE, 'doc.nodeType should be DOCUMENT');
    var n;

    for (n = doc.firstChild; n; n = n.nextSibling) {
      if (n.nodeType == Node.ELEMENT_NODE) {
        if (!(n instanceof Element)) {
          throw new Error('Wrong type');
        }

        return this.readFromNode(n);
      }
    }

    return null;
  };

  _proto.readFromNode = function readFromNode(node) {
    console.assert(node.localName == 'schema', 'localName should be schema');
    var elements = node.getElementsByTagName('element');

    if (!elements.length) {
      elements = node.getElementsByTagName('xsd:element');
    }

    var attributes = [];
    var attribute;

    for (var i = 0, ii = elements.length; i < ii; i++) {
      attribute = this.readFromElementNode_(elements[i]);

      if (attribute) {
        attributes.push(attribute);
      }
    }

    return attributes;
  };

  _proto.readFromElementNode_ = function readFromElementNode_(node) {
    console.assert(node.nodeType == Node.ELEMENT_NODE, 'node.nodeType should be ELEMENT');
    var elementNode = node;
    var name = elementNode.getAttribute('name');

    if (!name) {
      throw new Error('name should be defined in element node');
    }

    var alias = elementNode.getAttribute('alias');
    var nillable = elementNode.getAttribute('nillable');
    var required = nillable !== 'true';
    var readonlyEls = elementNode.getElementsByTagName('readonly');
    var readonly = readonlyEls[0] ? readonlyEls[0].getAttribute('value') === 'true' : false;
    var attribute = {
      name: name,
      readonly: readonly,
      required: required
    };

    if (alias) {
      attribute.alias = alias;
    }

    var type = elementNode.getAttribute('type');

    if (type) {
      if (!Object(ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__["setGeometryType"])(attribute, type)) {
        this.setAttributeByXsdType_(attribute, type);
      }
    } else {
      var enumerations = elementNode.getElementsByTagName('enumeration');

      if (!enumerations.length) {
        enumerations = elementNode.getElementsByTagName('xsd:enumeration');
      }

      if (enumerations.length) {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].SELECT;
        var choices = [];

        for (var i = 0, ii = enumerations.length; i < ii; i++) {
          var value = enumerations[i].getAttribute('value');

          if (!value) {
            throw new Error('Missing value');
          }

          choices.push(value);
        }

        attribute.choices = choices;
      } else {
        var restrictions = elementNode.getElementsByTagName('restriction');

        if (!restrictions.length) {
          restrictions = elementNode.getElementsByTagName('xsd:restriction');
        }

        if (restrictions.length && restrictions[0]) {
          var restrictionNode = restrictions[0];
          var base = restrictionNode.getAttribute('base');

          if (!base) {
            throw new Error('Missing base');
          }

          this.setAttributeByXsdType_(attribute, base);
          var maxLengths = elementNode.getElementsByTagName('maxLength');

          if (!maxLengths.length) {
            maxLengths = elementNode.getElementsByTagName('xsd:maxLength');
          }

          if (maxLengths.length && maxLengths[0]) {
            attribute.maxLength = Number(maxLengths[0].getAttribute('value'));
          }
        }
      }
    }

    if (!attribute.type) {
      return null;
    }

    console.assert(attribute.type);
    return attribute;
  };

  _proto.setAttributeByXsdType_ = function setAttributeByXsdType_(attribute, type) {
    if (type === 'xsd:boolean') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].BOOLEAN;
    } else if (type === 'xsd:date') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATE;
    } else if (type === 'xsd:dateTime') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATETIME;
    } else if (type === 'xsd:time') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TIME;
    } else if (type === 'xsd:decimal' || type === 'xsd:double') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
      attribute.numType = FormatNumberType.FLOAT;
    } else if (type === 'xsd:integer') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
      attribute.numType = FormatNumberType.INTEGER;
    } else if (type === 'xsd:string') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TEXT;
    }
  };

  return XSDAttribute;
}(ol_format_XML_js__WEBPACK_IMPORTED_MODULE_2__["default"]);

function getGeometryAttribute(attributes) {
  var geomAttribute = null;

  for (var i = 0, ii = attributes.length; i < ii; i++) {
    if (attributes[i].type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].GEOMETRY) {
      geomAttribute = attributes[i];
      break;
    }
  }

  return geomAttribute;
}
/* harmony default export */ __webpack_exports__["default"] = (XSDAttribute);

/***/ }),

/***/ "./src/format/filter.js":
/*!******************************!*\
  !*** ./src/format/filter.js ***!
  \******************************/
/*! exports provided: DateIsBetween, dateBetween */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DateIsBetween", function() { return DateIsBetween; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateBetween", function() { return dateBetween; });
/* harmony import */ var ol_format_filter_Comparison_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/format/filter/Comparison.js */ "./node_modules/ol/format/filter/Comparison.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }


var DateIsBetween = function (_olFormatFilterCompar) {
  _inheritsLoose(DateIsBetween, _olFormatFilterCompar);

  function DateIsBetween(propertyName, lowerBoundary, upperBoundary) {
    var _this;

    _this = _olFormatFilterCompar.call(this, 'PropertyIsBetween', propertyName) || this;
    _this.lowerBoundary = lowerBoundary;
    _this.upperBoundary = upperBoundary;
    return _this;
  }

  return DateIsBetween;
}(ol_format_filter_Comparison_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
function dateBetween(propertyName, lowerBoundary, upperBoundary) {
  return new DateIsBetween(propertyName, lowerBoundary, upperBoundary);
}

/***/ }),

/***/ "./src/geolocation/component.js":
/*!**************************************!*\
  !*** ./src/geolocation/component.js ***!
  \**************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ngeo_message_Notification_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/message/Notification.js */ "./src/message/Notification.js");
/* harmony import */ var ol_easing_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/easing.js */ "./node_modules/ol/easing.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_Geolocation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/Geolocation.js */ "./node_modules/ol/Geolocation.js");
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ngeo_options_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/options.js */ "./src/options.js");
Controller.$inject = ["$scope", "$element", "gettextCatalog", "ngeoFeatureOverlayMgr", "ngeoNotification", "ngeoGeolocationOptions"];











var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoGeolocation', [ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_message_Notification_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
var GeolocationEventType = {
  ERROR: 'geolocation-error'
};

function geolocationComponent() {
  return {
    restrict: 'A',
    scope: {
      'map': '<ngeoGeolocationMap',
      'loading': '=ngeoGeolocationLoading'
    },
    controller: 'ngeoGeolocationController',
    bindToController: true
  };
}

myModule.directive('ngeoGeolocation', geolocationComponent);
function Controller($scope, $element, gettextCatalog, ngeoFeatureOverlayMgr, ngeoNotification, ngeoGeolocationOptions) {
  this.options = ngeoGeolocationOptions;
  $element.on('click', this.toggleTracking.bind(this));
  this.$scope_ = $scope;
  this.notification_ = ngeoNotification;
  this.ngeoFeatureOverlayMgr_ = ngeoFeatureOverlayMgr;
  this.gettextCatalog_ = gettextCatalog;
  this.map;
  this.loading;
}

Controller.prototype.$onInit = function () {
  var _this = this;

  if (!(this.map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_7__["default"])) {
    throw new Error('Wrong map type');
  }

  this.featureOverlay_ = this.ngeoFeatureOverlayMgr_.getFeatureOverlay();
  this.geolocation_ = new ol_Geolocation_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
    projection: this.map.getView().getProjection(),
    trackingOptions: {
      enableHighAccuracy: true
    }
  });

  if (this.options.autoRotate) {
    this.autoRotateListener();
  }

  var gettextCatalog = this.gettextCatalog_;
  this.geolocation_.on('error', function (error) {
    _this.untrack_();

    var msg;

    switch (error.code) {
      case 1:
        msg = gettextCatalog.getString('User denied the request for Geolocation.');
        break;

      case 2:
        msg = gettextCatalog.getString('Location information is unavailable.');
        break;

      case 3:
        msg = gettextCatalog.getString('The request to get user location timed out.');
        break;

      default:
        msg = gettextCatalog.getString('Geolocation: An unknown error occurred.');
        break;
    }

    _this.notification_.error(msg);

    _this.$scope_.$emit(GeolocationEventType.ERROR, error);
  });
  this.positionFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
  this.positionFeature_.setStyle(Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_10__["buildStyle"])(this.options.positionFeatureStyle));
  this.accuracyFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
  this.accuracyFeature_.setStyle(Object(ngeo_options_js__WEBPACK_IMPORTED_MODULE_10__["buildStyle"])(this.options.accuracyFeatureStyle));
  this.follow_ = false;
  this.viewChangedByMe_ = false;
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(this.geolocation_, 'change:accuracyGeometry', function (evt) {
    var geometry = _this.geolocation_.getAccuracyGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    _this.accuracyFeature_.setGeometry(geometry);

    _this.setPosition_();
  });
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(this.geolocation_, 'change:position', function () {
    _this.setPosition_();
  });
  var view = this.map.getView();
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(view, 'change:center', this.handleViewChange_, this);
  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(view, 'change:resolution', this.handleViewChange_, this);

  if (this.options.atLoadingTime && this.loading !== undefined) {
    this.$scope_.$watch(function () {
      return _this.loading;
    }, function (newVal) {
      if (newVal === false) {
        _this.toggleTracking();
      }
    });
  }
};

Controller.prototype.toggleTracking = function () {
  if (this.geolocation_.getTracking()) {
    var currentPosition = this.geolocation_.getPosition();

    if (currentPosition === undefined) {
      this.untrack_();
      this.$scope_.$emit(GeolocationEventType.ERROR, null);
      return;
    }

    var view = this.map.getView();
    var center = view.getCenter();

    if (!center) {
      throw new Error('Missing center');
    }

    var diff = Math.abs(currentPosition[0] - center[0]) + Math.abs(currentPosition[1] - center[1]);

    if (diff < 2) {
      this.untrack_();
    } else {
      view.setCenter(currentPosition);
      this.untrack_();
      this.track_();
    }
  } else {
    this.track_();
  }
};

Controller.prototype.track_ = function () {
  this.featureOverlay_.addFeature(this.positionFeature_);
  this.featureOverlay_.addFeature(this.accuracyFeature_);
  this.follow_ = true;
  this.geolocation_.setTracking(true);
};

Controller.prototype.untrack_ = function () {
  this.featureOverlay_.clear();
  this.follow_ = false;
  this.geolocation_.setTracking(false);
  this.notification_.clear();
};

Controller.prototype.setPosition_ = function () {
  var view = this.map.getView();
  var position = this.geolocation_.getPosition();

  if (position === undefined) {
    throw new Error('Missing position');
  }

  var point = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__["default"](position);
  this.positionFeature_.setGeometry(point);
  var accuracy = this.accuracyFeature_.getGeometry();

  if (this.follow_) {
    this.viewChangedByMe_ = true;

    if (this.options.zoom !== undefined) {
      view.setCenter(position);
      view.setZoom(this.options.zoom);
    } else if (accuracy instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var size = this.map.getSize();

      if (size === undefined) {
        throw new Error('Missing size');
      }

      view.fit(accuracy, {
        size: size
      });
    }

    this.viewChangedByMe_ = false;
  }
};

Controller.prototype.handleViewChange_ = function (event) {
  if (this.follow_ && !this.viewChangedByMe_) {
    this.follow_ = false;
  }
};

Controller.prototype.autoRotateListener = function () {
  var _this2 = this;

  var currentAlpha = 0;

  if (window.hasOwnProperty('ondeviceorientationabsolute')) {
    window.addEventListener('deviceorientationabsolute', function (event) {
      if (!(event instanceof DeviceOrientationEvent)) {
        throw new Error('Wrong event type');
      }

      if (event.alpha !== null) {
        currentAlpha = _this2.handleRotate_(event.alpha, currentAlpha);
      }
    }, true);
  } else if (window.hasOwnProperty('ondeviceorientation')) {
    window.addEventListener('deviceorientation', function (evt) {
      if (evt.webkitCompassHeading) {
        currentAlpha = _this2.handleRotate_(-evt.webkitCompassHeading, currentAlpha);
      } else {
        if (!evt.alpha) {
          throw new Error('Missing evt.alpha');
        }

        currentAlpha = _this2.handleRotate_(evt.alpha - 270, currentAlpha);
      }
    }, true);
  } else {
    console.error('Orientation is not supported on this device');
  }
};

Controller.prototype.handleRotate_ = function (eventAlpha, currentAlpha) {
  if (this.geolocation_.getTracking() && Math.abs(eventAlpha - currentAlpha) > 0.2) {
    currentAlpha = eventAlpha;
    var radAlpha = currentAlpha * Math.PI / 180;
    this.map.getView().animate({
      rotation: radAlpha,
      duration: 350,
      easing: ol_easing_js__WEBPACK_IMPORTED_MODULE_3__["linear"]
    });
  }

  return currentAlpha;
};

myModule.controller('ngeoGeolocationController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/grid/Config.js":
/*!****************************!*\
  !*** ./src/grid/Config.js ***!
  \****************************/
/*! exports provided: getRowUid, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRowUid", function() { return getRowUid; });
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");


function GridConfig(data, columnDefs) {
  this.data = data;
  this.columnDefs = columnDefs;
  this.selectedRows = {};
}

function getRowUid(attributes) {
  return "" + Object(ol_util_js__WEBPACK_IMPORTED_MODULE_0__["getUid"])(attributes);
}

GridConfig.prototype.isRowSelected = function (attributes) {
  return !!this.selectedRows[getRowUid(attributes)];
};

GridConfig.prototype.getSelectedCount = function () {
  return Object.keys(this.selectedRows).length;
};

GridConfig.prototype.getSelectedRows = function () {
  var _this = this;

  if (!this.data) {
    throw new Error('Missing data');
  }

  return this.data.filter(function (row) {
    return _this.isRowSelected(row);
  });
};

GridConfig.prototype.selectRow = function (attributes) {
  var uid = getRowUid(attributes);
  this.selectedRows[uid] = attributes;
};

GridConfig.prototype.toggleRow = function (attributes) {
  var uid = getRowUid(attributes);
  var isSelected = this.isRowSelected(attributes);

  if (isSelected) {
    delete this.selectedRows[uid];
  } else {
    this.selectedRows[uid] = attributes;
  }
};

GridConfig.prototype.selectAll = function () {
  var _this2 = this;

  if (!this.data) {
    throw new Error('Missing data');
  }

  this.data.forEach(function (attributes) {
    _this2.selectRow(attributes);
  });
};

GridConfig.prototype.unselectAll = function () {
  for (var rowId in this.selectedRows) {
    delete this.selectedRows[rowId];
  }
};

GridConfig.prototype.invertSelection = function () {
  var _this3 = this;

  if (!this.data) {
    throw new Error('Missing data');
  }

  this.data.forEach(function (attributes) {
    _this3.toggleRow(attributes);
  });
};

/* harmony default export */ __webpack_exports__["default"] = (GridConfig);

/***/ }),

/***/ "./src/grid/component.html":
/*!*********************************!*\
  !*** ./src/grid/component.html ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="ngeo-grid-table-container">\n  <table float-thead="$ctrl.floatTheadConfig" ng-model="$ctrl.configuration.data"\n         class="table table-bordered table-striped table-hover">\n    <thead class="table-header">\n      <tr>\n        <th ng-repeat="columnDefs in $ctrl.configuration.columnDefs"\n            ng-click="$ctrl.sort(columnDefs.name)" ng-bind-html="columnDefs.name | ngeoTrustHtml | translate">\n          <i ng-show="$ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i>\n          <i ng-show="$ctrl.sortedBy === columnDefs.name && $ctrl.sortAscending === true" class="fa fa-caret-up"></i>\n          <i ng-show="$ctrl.sortedBy === columnDefs.name && $ctrl.sortAscending === false" class="fa fa-caret-down"></i>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="attributes in $ctrl.configuration.data"\n          ng-class="[\'row-\' + $ctrl.configuration.getRowUid(attributes), $ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']"\n          ng-click="$ctrl.clickRow(attributes, $event)" ng-mousedown="$ctrl.preventTextSelection($event)">\n        <td ng-repeat="columnDefs in $ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | removeCDATA | ngeoTrustHtmlAuto"></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/grid/component.js":
/*!*******************************!*\
  !*** ./src/grid/component.js ***!
  \*******************************/
/*! exports provided: GridController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridController", function() { return GridController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/grid/Config.js */ "./src/grid/Config.js");
/* harmony import */ var floatthead__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! floatthead */ "./node_modules/floatthead/dist/jquery.floatThead.min.js");
/* harmony import */ var floatthead__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(floatthead__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var angular_float_thead__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular-float-thead */ "./node_modules/angular-float-thead/angular-floatThead.js");
/* harmony import */ var angular_float_thead__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(angular_float_thead__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/sass/font.scss */ "./src/sass/font.scss");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_6__);
GridController.$inject = ["$scope"];







var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoGrid', [ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, 'floatThead']);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/grid', __webpack_require__(/*! ./component.html */ "./src/grid/component.html"));
}]);
myModule.value('ngeoGridTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.ngeoGridTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/grid';
});
ngeoGridTemplateUrl.$inject = ["$attrs", "ngeoGridTemplateUrl"];

function ngeoGridTemplateUrl($attrs, ngeoGridTemplateUrl) {
  return ngeoGridTemplateUrl($attrs);
}

var gridComponent = {
  controller: GridController,
  bindings: {
    'configuration': '=ngeoGridConfiguration'
  },
  templateUrl: ngeoGridTemplateUrl
};
myModule.component('ngeoGrid', gridComponent);
function GridController($scope) {
  this.scope_ = $scope;
  this.configuration = null;
  this.selectedRows = {};
  this.sortedBy = '';
  this.sortAscending = true;
  this.floatTheadConfig = {
    scrollContainer: function scrollContainer($table) {
      return $table.closest('.ngeo-grid-table-container');
    }
  };
}

GridController.prototype.$onInit = function () {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  this.selectedRows = this.configuration.selectedRows;
};

GridController.prototype.sort = function (columnName) {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  if (!this.configuration.data) {
    throw new Error('Missing configuration.data');
  }

  this.sortAscending = this.sortedBy === columnName ? !this.sortAscending : true;
  this.sortedBy = columnName;
  var asc = this.sortAscending ? 1 : -1;
  this.configuration.data.sort(function (attributes1, attributes2) {
    if (!attributes1[columnName]) {
      return 1;
    }

    if (!attributes2[columnName]) {
      return -1;
    }

    return attributes1[columnName] > attributes2[columnName] ? asc : -asc;
  });
};

GridController.prototype.clickRow = function (attributes, event) {
  var shiftKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isShiftKeyOnly"])(event);
  var platformModifierKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isPlatformModifierKeyOnly"])(event);
  this.clickRow_(attributes, shiftKey, platformModifierKey);
};

GridController.prototype.clickRow_ = function (attributes, shiftKey, platformModifierKey) {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  if (shiftKey && !platformModifierKey) {
    this.selectRange_(attributes);
  } else if (!shiftKey && platformModifierKey) {
    this.configuration.toggleRow(attributes);
  } else {
    var isSelected = this.configuration.isRowSelected(attributes);
    this.configuration.unselectAll();

    if (!isSelected) {
      this.configuration.selectRow(attributes);
    }
  }
};

GridController.prototype.selectRange_ = function (attributes) {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  if (!this.configuration.data) {
    throw new Error('Missing configuration.data');
  }

  var targetUid = Object(ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_3__["getRowUid"])(attributes);
  var data = this.configuration.data;

  if (this.configuration.isRowSelected(attributes)) {
    return;
  }

  var posClickedRow = 0;
  var posSelectedRows = [];

  for (var i = 0; i < data.length; i++) {
    var currentRow = data[i];
    var currentUid = Object(ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_3__["getRowUid"])(currentRow);

    if (targetUid === currentUid) {
      posClickedRow = i;
    } else if (this.configuration.isRowSelected(currentRow)) {
      posSelectedRows.push(i);
    }
  }

  if (posSelectedRows.length == 0) {
    this.configuration.selectRow(attributes);
  }

  var distance = Infinity;
  var posClosestRow = posSelectedRows[0];

  for (var _i = 0, _posSelectedRows = posSelectedRows; _i < _posSelectedRows.length; _i++) {
    var posSelectedRow = _posSelectedRows[_i];
    var currentPos = posSelectedRow;
    var currentDistance = Math.abs(currentPos - posClickedRow);

    if (distance > currentDistance) {
      distance = currentDistance;
      posClosestRow = currentPos;
    }
  }

  var rangeStart = posClickedRow < posClosestRow ? posClickedRow : posClosestRow;
  var rangeEnd = posClickedRow > posClosestRow ? posClickedRow : posClosestRow;

  for (var l = rangeStart; l <= rangeEnd; l++) {
    this.configuration.selectRow(data[l]);
  }
};

GridController.prototype.preventTextSelection = function (event) {
  var shiftKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isShiftKeyOnly"])(event);
  var platformModifierKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isPlatformModifierKeyOnly"])(event);

  if (shiftKey || platformModifierKey) {
    event.preventDefault();
  }
};

myModule.controller('ngeoGridController', GridController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/icons/swipe.svg?viewbox&height=1em":
/*!************************************************!*\
  !*** ./src/icons/swipe.svg?viewbox&height=1em ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"sort\" class=\"svg-inline--fa fa-sort fa-w-10\" viewBox=\"0 0 16 16\" width=\"1em\" height=\"1em\"><path d=\"M9.286 12.783V3.217c0-.86 1.041-1.29 1.648-.683l4.783 4.783a.96.96 0 010 1.362l-4.783 4.787c-.607.607-1.648.177-1.648-.683zM5.066 2.534L.283 7.317a.96.96 0 000 1.362l4.783 4.787c.607.607 1.648.177 1.648-.683V3.217c0-.86-1.041-1.29-1.648-.683z\" fill=\"currentColor\"></path></svg>"

/***/ }),

/***/ "./src/icons/swipe.svg?viewbox&width=1em":
/*!***********************************************!*\
  !*** ./src/icons/swipe.svg?viewbox&width=1em ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"sort\" class=\"svg-inline--fa fa-sort fa-w-10\" viewBox=\"0 0 16 16\" width=\"1em\" height=\"1em\"><path d=\"M9.286 12.783V3.217c0-.86 1.041-1.29 1.648-.683l4.783 4.783a.96.96 0 010 1.362l-4.783 4.787c-.607.607-1.648.177-1.648-.683zM5.066 2.534L.283 7.317a.96.96 0 000 1.362l4.783 4.787c.607.607 1.648.177 1.648-.683V3.217c0-.86-1.041-1.29-1.648-.683z\" fill=\"currentColor\"></path></svg>"

/***/ }),

/***/ "./src/interaction/DrawAzimut.js":
/*!***************************************!*\
  !*** ./src/interaction/DrawAzimut.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/common.js */ "./src/interaction/common.js");
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_functions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/functions.js */ "./node_modules/ol/functions.js");
/* harmony import */ var ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/Circle.js */ "./node_modules/ol/geom/Circle.js");
/* harmony import */ var ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/GeometryCollection.js */ "./node_modules/ol/geom/GeometryCollection.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }














var DrawAzimut = function (_olInteractionPointer) {
  _inheritsLoose(DrawAzimut, _olInteractionPointer);

  function DrawAzimut(options) {
    var _this;

    _this = _olInteractionPointer.call(this, {
      type: ''
    }) || this;
    _this.shouldStopEvent = ol_functions_js__WEBPACK_IMPORTED_MODULE_4__["FALSE"];
    _this.downPx_ = [];
    _this.source_ = options.source;
    _this.started_ = false;
    _this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    _this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    _this.squaredClickTolerance_ = 4;
    _this.sketchLayer_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        useSpatialIndex: false,
        wrapX: false
      }),
      style: options.style || Object(ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__["getDefaultDrawStyleFunction"])()
    });
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(_assertThisInitialized(_this), 'change:active', _this.updateState_, _assertThisInitialized(_this));
    return _this;
  }

  var _proto = DrawAzimut.prototype;

  _proto.handlePointerMove_ = function handlePointerMove_(event) {
    if (this.started_) {
      this.modifyDrawing_(event);
    } else {
      this.createOrUpdateSketchPoint_(event);
    }

    return true;
  };

  _proto.createOrUpdateSketchPoint_ = function createOrUpdateSketchPoint_(event) {
    var coordinates = event.coordinate.slice();
    var sketchPointGeom = this.sketchPoint_.getGeometry();

    if (!sketchPointGeom) {
      this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"](new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__["default"](coordinates));
      this.updateSketchFeatures_();
    } else {
      sketchPointGeom.setCoordinates(coordinates);
    }
  };

  _proto.updateSketchFeatures_ = function updateSketchFeatures_() {
    var sketchFeatures = [];
    sketchFeatures.push(this.sketchFeature_);
    sketchFeatures.push(this.sketchPoint_);
    var source = this.sketchLayer_.getSource();
    source.clear(true);
    source.addFeatures(sketchFeatures);
  };

  _proto.startDrawing_ = function startDrawing_(event) {
    var start = event.coordinate;
    this.started_ = true;
    var line = new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]([start.slice(), start.slice()]);
    var circle = new ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_5__["default"](start, 0);
    var geometry = new ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_6__["default"]([line, circle]);
    this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    this.sketchFeature_.setGeometry(geometry);
    this.updateSketchFeatures_();
    var evt = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawstart', {
      feature: this.sketchFeature_
    });
    this.dispatchEvent(evt);
  };

  _proto.modifyDrawing_ = function modifyDrawing_(event) {
    var coordinate = event.coordinate;
    var geometry = this.sketchFeature_.getGeometry();

    if (!(geometry instanceof ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
      throw new Error('Missing geometry');
    }

    var geometries = geometry.getGeometriesArray();
    var line = geometries[0];

    if (line instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      var coordinates = line.getCoordinates();
      var sketchPointGeom = this.sketchPoint_.getGeometry();

      if (sketchPointGeom instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
        sketchPointGeom.setCoordinates(coordinate);
        var last = coordinates[coordinates.length - 1];
        last[0] = coordinate[0];
        last[1] = coordinate[1];
        console.assert(line instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]);
        line.setCoordinates(coordinates);
        var circle = geometries[1];

        if (circle instanceof ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
          circle.setRadius(line.getLength());
          this.updateSketchFeatures_();
        }
      }
    }
  };

  _proto.abortDrawing_ = function abortDrawing_() {
    this.started_ = false;
    var sketchFeature = this.sketchFeature_;
    this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    var source = this.sketchLayer_.getSource();

    if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"])) {
      throw new Error('Missing source');
    }

    source.clear(true);
    return sketchFeature;
  };

  _proto.updateState_ = function updateState_() {
    var map = this.getMap();
    var active = this.getActive();

    if (map === null || !active) {
      this.abortDrawing_();
    }

    this.sketchLayer_.setMap(active ? map : null);
  };

  _proto.finishDrawing_ = function finishDrawing_() {
    var sketchFeature = this.abortDrawing_();
    this.source_.addFeature(sketchFeature);
    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawend', {
      feature: this.sketchFeature_
    });
    this.dispatchEvent(event);
  };

  _proto.setMap = function setMap(map) {
    ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_9__["default"].prototype.setMap.call(this, map);
    this.updateState_();
  };

  _proto.handleDownEvent = function handleDownEvent(event) {
    this.downPx_ = event.pixel;
    return true;
  };

  _proto.handleUpEvent = function handleUpEvent(event) {
    if (!this.downPx_) {
      throw new Error('Missing downPx');
    }

    var downPx = this.downPx_;
    var clickPx = event.pixel;
    var dx = downPx[0] - clickPx[0];
    var dy = downPx[1] - clickPx[1];
    var squaredDistance = dx * dx + dy * dy;
    var pass = true;

    if (squaredDistance <= this.squaredClickTolerance_) {
      this.handlePointerMove_(event);

      if (!this.started_) {
        this.startDrawing_(event);
      } else {
        this.finishDrawing_();
      }

      pass = false;
    }

    return pass;
  };

  _proto.handleEvent = function handleEvent(mapBrowserEvent) {
    var pass = true;

    if (mapBrowserEvent.type === 'pointermove') {
      pass = this.handlePointerMove_(mapBrowserEvent);
    } else if (mapBrowserEvent.type === 'dblclick') {
      pass = false;
    }

    return _olInteractionPointer.prototype.handleEvent.call(this, mapBrowserEvent) && pass;
  };

  return DrawAzimut;
}(ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_9__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (DrawAzimut);

/***/ }),

/***/ "./src/interaction/Measure.js":
/*!************************************!*\
  !*** ./src/interaction/Measure.js ***!
  \************************************/
/*! exports provided: getFormattedArea, getFormattedCircleArea, getFormattedLength, getFormattedPoint, handleEvent_, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedArea", function() { return getFormattedArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedCircleArea", function() { return getFormattedCircleArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedLength", function() { return getFormattedLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedPoint", function() { return getFormattedPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleEvent_", function() { return handleEvent_; });
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_dom_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/dom.js */ "./node_modules/ol/dom.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_Overlay_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Overlay.js */ "./node_modules/ol/Overlay.js");
/* harmony import */ var ol_sphere_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/sphere.js */ "./node_modules/ol/sphere.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/style/Stroke.js */ "./node_modules/ol/style/Stroke.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }















var Measure = function (_olInteractionInterac) {
  _inheritsLoose(Measure, _olInteractionInterac);

  function Measure(options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _olInteractionInterac.call(this, {
      handleEvent: handleEvent_
    }) || this;
    _this.helpTooltipElement_ = null;
    _this.helpTooltipOverlay_ = null;
    _this.measureTooltipElement_ = null;
    _this.measureTooltipOverlay_ = null;
    _this.measureTooltipOverlayCoord_ = null;
    _this.sketchFeature = null;
    _this.continueMsg = null;
    _this.decimals = options.decimals;
    _this.precision = options.precision;
    _this.displayHelpTooltip_ = options.displayHelpTooltip !== undefined ? options.displayHelpTooltip : true;
    var startMsg;

    if (options.startMsg !== undefined) {
      startMsg = options.startMsg;
    } else {
      startMsg = document.createElement('span');
      startMsg.textContent = 'Click to start drawing.';
    }

    _this.startMsg = startMsg;
    _this.changeEventKey_ = null;
    _this.postcomposeEventKey_ = null;
    var style = options.style !== undefined ? options.style : [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
        color: 'rgba(255, 255, 255, 0.2)'
      })
    }), new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
        color: 'white',
        width: 5
      })
    }), new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
        color: '#ffcc33',
        width: 3
      })
    })];
    _this.vectorLayer_ = options.layer !== undefined ? options.layer : new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"](),
      style: style
    });

    var source = _this.vectorLayer_.getSource();

    if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
      throw new Error('Missing source');
    }

    var drawInteraction = _this.createDrawInteraction(options.sketchStyle, source);

    if (!drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    _this.drawInteraction_ = drawInteraction;
    _this.shouldHandleDrawInteractionActiveChange_ = true;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_this.drawInteraction_, 'change:active', _this.handleDrawInteractionActiveChange_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_this.drawInteraction_, 'drawstart', _this.onDrawStart_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_this.drawInteraction_, 'drawend', _this.onDrawEnd_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_assertThisInitialized(_this), 'change:active', _this.updateState_, _assertThisInitialized(_this));
    return _this;
  }

  var _proto = Measure.prototype;

  _proto.getDrawInteraction = function getDrawInteraction() {
    return this.drawInteraction_;
  };

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return null;
  };

  _proto.setMap = function setMap(map) {
    ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__["default"].prototype.setMap.call(this, map);
    this.vectorLayer_.setMap(map);
    var prevMap = this.drawInteraction_.getMap();

    if (prevMap !== null) {
      prevMap.removeInteraction(this.drawInteraction_);
    }

    if (map !== null) {
      map.addInteraction(this.drawInteraction_);
    }
  };

  _proto.onDrawStart_ = function onDrawStart_(evt) {
    var _this2 = this;

    var event = evt.detail ? evt.detail : evt;
    this.sketchFeature = event.feature;
    var source = this.vectorLayer_.getSource();

    if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
      throw new Error('Missing source');
    }

    source.clear(true);
    this.createMeasureTooltip_();

    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geometry = this.sketchFeature.getGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    this.changeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(geometry, 'change', function (evt) {
      _this2.handleMeasure(function (measure, coord) {
        if (coord !== null) {
          if (!_this2.measureTooltipElement_) {
            throw new Error('Missing measureTooltipElement');
          }

          _this2.measureTooltipElement_.innerHTML = measure;
          _this2.measureTooltipOverlayCoord_ = coord;
        }
      });
    });
    this.postcomposeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.getMap(), 'postcompose', function () {
      if (_this2.measureTooltipOverlay_ && _this2.measureTooltipOverlayCoord_) {
        _this2.measureTooltipOverlay_.setPosition(_this2.measureTooltipOverlayCoord_);
      }
    });
  };

  _proto.onDrawEnd_ = function onDrawEnd_(evt) {
    if (!this.measureTooltipElement_) {
      throw new Error('Missing measureTooltipElement');
    }

    if (!this.measureTooltipOverlay_) {
      throw new Error('Missing measureTooltipOverlay');
    }

    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    this.measureTooltipElement_.classList.add('ngeo-tooltip-static');
    this.measureTooltipOverlay_.setOffset([0, -7]);
    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__["default"]('measureend', {
      feature: this.sketchFeature
    });
    this.dispatchEvent(event);
    this.sketchFeature = null;
    this.unlistenerEvent_();
  };

  _proto.unlistenerEvent_ = function unlistenerEvent_() {
    if (this.changeEventKey_ !== null && this.postcomposeEventKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"])(this.changeEventKey_);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"])(this.postcomposeEventKey_);
      this.changeEventKey_ = null;
      this.postcomposeEventKey_ = null;
    }
  };

  _proto.createHelpTooltip_ = function createHelpTooltip_() {
    this.removeHelpTooltip_();

    if (this.displayHelpTooltip_) {
      this.helpTooltipElement_ = document.createElement('div');
      this.helpTooltipElement_.classList.add('tooltip');
      this.helpTooltipOverlay_ = new ol_Overlay_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
        stopEvent: false,
        element: this.helpTooltipElement_,
        offset: [15, 0],
        positioning: 'center-left'
      });
      this.getMap().addOverlay(this.helpTooltipOverlay_);
    }
  };

  _proto.removeHelpTooltip_ = function removeHelpTooltip_() {
    if (this.displayHelpTooltip_) {
      if (this.helpTooltipOverlay_ !== null) {
        this.getMap().removeOverlay(this.helpTooltipOverlay_);
        this.helpTooltipOverlay_ = null;
      }

      if (this.helpTooltipElement_ !== null) {
        if (this.helpTooltipElement_.parentNode) {
          this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_);
        }

        this.helpTooltipElement_ = null;
      }
    }
  };

  _proto.createMeasureTooltip_ = function createMeasureTooltip_() {
    this.removeMeasureTooltip_();
    this.measureTooltipElement_ = document.createElement('div');
    this.measureTooltipElement_.classList.add('tooltip');
    this.measureTooltipElement_.classList.add('ngeo-tooltip-measure');
    this.measureTooltipOverlay_ = new ol_Overlay_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
      element: this.measureTooltipElement_,
      offset: [0, -15],
      positioning: 'bottom-center',
      stopEvent: false
    });
    this.getMap().addOverlay(this.measureTooltipOverlay_);
  };

  _proto.removeMeasureTooltip_ = function removeMeasureTooltip_() {
    if (this.measureTooltipElement_ !== null) {
      if (!this.measureTooltipElement_.parentNode) {
        throw new Error('Missing measureTooltipElement_.parentNode');
      }

      this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);
      this.measureTooltipElement_ = null;
      this.measureTooltipOverlay_ = null;
      this.measureTooltipOverlayCoord_ = null;
    }
  };

  _proto.updateState_ = function updateState_(evt) {
    var active = this.getActive();
    this.shouldHandleDrawInteractionActiveChange_ = false;
    this.drawInteraction_.setActive(active);
    this.shouldHandleDrawInteractionActiveChange_ = true;

    if (!this.getMap()) {
      return;
    }

    if (active) {
      if (!this.measureTooltipOverlay_) {
        this.createMeasureTooltip_();
        this.createHelpTooltip_();
      }
    } else {
      if (!this.measureTooltipOverlay_) {
        throw new Error('Missing measureTooltipOverlay');
      }

      var source = this.vectorLayer_.getSource();

      if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
        throw new Error('Missing measureTooltipOverlay');
      }

      source.clear(true);
      this.getMap().removeOverlay(this.measureTooltipOverlay_);
      this.removeMeasureTooltip_();
      this.removeHelpTooltip_();
      this.unlistenerEvent_();
    }
  };

  _proto.handleMeasure = function handleMeasure(callback) {};

  _proto.getTooltipElement = function getTooltipElement() {
    if (!this.measureTooltipElement_) {
      throw new Error('Missing measureTooltipElement');
    }

    return this.measureTooltipElement_;
  };

  _proto.handleDrawInteractionActiveChange_ = function handleDrawInteractionActiveChange_(evt) {
    if (this.shouldHandleDrawInteractionActiveChange_) {
      this.setActive(this.drawInteraction_.getActive());
    }
  };

  return Measure;
}(ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__["default"]);

function getFormattedArea(polygon, projection, precision, format, spherical) {
  if (spherical === void 0) {
    spherical = false;
  }

  var area;

  if (spherical) {
    var geom = polygon.clone().transform(projection, 'EPSG:4326');
    area = Math.abs(Object(ol_sphere_js__WEBPACK_IMPORTED_MODULE_4__["getArea"])(geom, {
      'projection': 'EPSG:4326'
    }));
  } else {
    area = polygon.getArea();
  }

  return format(area, 'm²', 'square', precision);
}
function getFormattedCircleArea(circle, precision, format) {
  var area = Math.PI * Math.pow(circle.getRadius(), 2);
  return format(area, 'm²', 'square', precision);
}
function getFormattedLength(lineString, projection, precision, format, spherical) {
  if (spherical === void 0) {
    spherical = false;
  }

  var length = 0;

  if (spherical) {
    var coordinates = lineString.getCoordinates();

    for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {
      var c1 = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_2__["transform"])(coordinates[i], projection, 'EPSG:4326');
      var c2 = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_2__["transform"])(coordinates[i + 1], projection, 'EPSG:4326');
      length += Object(ol_sphere_js__WEBPACK_IMPORTED_MODULE_4__["getDistance"])(c1, c2);
    }
  } else {
    length = lineString.getLength();
  }

  return format(length, 'm', 'unit', precision);
}
function getFormattedPoint(point, decimals, format, opt_template) {
  return format(point.getCoordinates(), decimals, opt_template);
}
function handleEvent_(evt) {
  if (evt.type != 'pointermove' || evt.dragging) {
    return true;
  }

  var helpMsg = this.sketchFeature === null ? this.startMsg : this.continueMsg;

  if (this.displayHelpTooltip_ && helpMsg) {
    if (!this.helpTooltipElement_) {
      throw new Error('Missing helpTooltipElement');
    }

    if (!this.helpTooltipOverlay_) {
      throw new Error('Missing helpTooltipOverlay');
    }

    Object(ol_dom_js__WEBPACK_IMPORTED_MODULE_1__["removeChildren"])(this.helpTooltipElement_);
    this.helpTooltipElement_.appendChild(helpMsg);
    this.helpTooltipOverlay_.setPosition(evt.coordinate);
  }

  return true;
}
/* harmony default export */ __webpack_exports__["default"] = (Measure);

/***/ }),

/***/ "./src/interaction/MeasureArea.js":
/*!****************************************!*\
  !*** ./src/interaction/MeasureArea.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(format, gettextCatalog, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _ngeoInteractionMeasu.call(this, options) || this;
    var continueMsg;

    if (options.continueMsg !== undefined) {
      continueMsg = options.continueMsg;
    } else {
      continueMsg = document.createElement('span');
      continueMsg.textContent = gettextCatalog.getString('Click to continue drawing the polygon.');
      var br = document.createElement('br');
      br.textContent = gettextCatalog.getString('Double-click or click starting point to finish.');
      continueMsg.appendChild(br);
    }

    _this.continueMsg = continueMsg;
    _this.format = format;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'Polygon',
      source: source,
      style: style
    });
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Missing geometry');
    }

    var proj = this.getMap().getView().getProjection();
    console.assert(proj);
    var output = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["getFormattedArea"])(geom, proj, this.precision, this.format);
    var verticesCount = geom.getCoordinates()[0].length;
    var coord = null;

    if (verticesCount > 3) {
      coord = geom.getInteriorPoint().getCoordinates();
    }

    callback(output, coord);
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/interaction/MeasureAreaMobile.js":
/*!**********************************************!*\
  !*** ./src/interaction/MeasureAreaMobile.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/MeasureArea.js */ "./src/interaction/MeasureArea.js");
/* harmony import */ var ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/interaction/MobileDraw.js */ "./src/interaction/MobileDraw.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var MeasureAreaMobile = function (_ngeoInteractionMeasu) {
  _inheritsLoose(MeasureAreaMobile, _ngeoInteractionMeasu);

  function MeasureAreaMobile(format, gettextCatalog, options) {
    if (options === void 0) {
      options = {};
    }

    Object.assign(options, {
      displayHelpTooltip: false
    });
    return _ngeoInteractionMeasu.call(this, format, gettextCatalog, options) || this;
  }

  var _proto = MeasureAreaMobile.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'Polygon',
      style: style
    });
  };

  return MeasureAreaMobile;
}(ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (MeasureAreaMobile);

/***/ }),

/***/ "./src/interaction/MeasureAzimut.js":
/*!******************************************!*\
  !*** ./src/interaction/MeasureAzimut.js ***!
  \******************************************/
/*! exports provided: default, getAzimut, getFormattedAzimut, getFormattedAzimutRadius */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAzimut", function() { return getAzimut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedAzimut", function() { return getFormattedAzimut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedAzimutRadius", function() { return getFormattedAzimutRadius; });
/* harmony import */ var ngeo_interaction_DrawAzimut_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/DrawAzimut.js */ "./src/interaction/DrawAzimut.js");
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/GeometryCollection.js */ "./node_modules/ol/geom/GeometryCollection.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(unitPrefixFormat, numberFormat, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _ngeoInteractionMeasu.call(this, options) || this;
    var continueMsg;

    if (options.continueMsg !== undefined) {
      continueMsg = options.continueMsg;
    } else {
      continueMsg = document.createElement('span');
      continueMsg.textContent = 'Click to finish.';
    }

    _this.continueMsg = continueMsg;
    _this.numberFormat = numberFormat;
    _this.unitPrefixFormat = unitPrefixFormat;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ngeo_interaction_DrawAzimut_js__WEBPACK_IMPORTED_MODULE_0__["default"]({
      source: source,
      style: style
    });
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_3__["default"])) {
      throw new Error('Missing geometry');
    }

    var line = geom.getGeometries()[0];

    if (!(line instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Missing line');
    }

    var output = getFormattedAzimutRadius(line, this.getMap().getView().getProjection(), this.decimals, this.precision, this.unitPrefixFormat, this.numberFormat);
    callback(output, line.getLastCoordinate());
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_1__["default"]);


function getAzimut(line) {
  var coords = line.getCoordinates();
  var dx = coords[1][0] - coords[0][0];
  var dy = coords[1][1] - coords[0][1];
  var rad = Math.acos(dy / Math.sqrt(dx * dx + dy * dy));
  var factor = dx > 0 ? 1 : -1;
  return factor * rad * 180 / Math.PI % 360;
}
function getFormattedAzimut(line, decimals, format) {
  var azimut = getAzimut(line);
  return format(azimut, decimals) + "\xB0";
}
function getFormattedAzimutRadius(line, projection, decimals, precision, formatLength, formatAzimut) {
  var output = getFormattedAzimut(line, decimals, formatAzimut);
  output += ", " + Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_1__["getFormattedLength"])(line, projection, precision, formatLength);
  return output;
}

/***/ }),

/***/ "./src/interaction/MeasureLength.js":
/*!******************************************!*\
  !*** ./src/interaction/MeasureLength.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/coordinate.js */ "./node_modules/ol/coordinate.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var modifierPressed;

var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(format, gettextCatalog, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _ngeoInteractionMeasu.call(this, options) || this;

    if (modifierPressed === undefined) {
      modifierPressed = false;
      document.body.addEventListener('keydown', function (evt) {
        modifierPressed = evt.keyCode === 17;
      });
      document.body.addEventListener('keyup', function () {
        modifierPressed = false;
      });
    }

    if (options.continueMsg !== undefined) {
      _this.continueMsg = options.continueMsg;
    } else {
      _this.continueMsg = document.createElement('span');
      _this.continueMsg.textContent = gettextCatalog.getString('Click to continue drawing the line.');
      var br = document.createElement('br');
      br.textContent = gettextCatalog.getString('Double-click or click last point to finish.');

      _this.continueMsg.appendChild(br);
    }

    _this.spherical = false;
    _this.format = format;
    _this.tolerance = options.tolerance;
    _this.source = options.source;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    var _this2 = this;

    return new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'LineString',
      geometryFunction: function geometryFunction(coordinates, opt_geometry) {
        return _this2.linestringGeometryFunction(coordinates, opt_geometry);
      },
      condition: function condition() {
        return true;
      },
      style: style,
      source: source
    });
  };

  _proto.linestringGeometryFunction = function linestringGeometryFunction(coordinates, opt_geometry) {
    var _this3 = this;

    if (modifierPressed) {
      var viewRotation = this.getMap().getView().getRotation();
      var angle = Math.PI / 4;
      var from = coordinates[coordinates.length - 2];
      var to = coordinates[coordinates.length - 1];
      var dx = from[0] - to[0];
      var dy = from[1] - to[1];
      var length = Object(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__["distance"])(from, to);
      var rotation = viewRotation + Math.round((Math.atan2(dy, dx) - viewRotation) / angle) * angle;
      to[0] = from[0] - length * Math.cos(rotation);
      to[1] = from[1] - length * Math.sin(rotation);

      if (this.tolerance !== undefined && this.source !== undefined) {
        var view = this.getMap().getView();

        if (!view) {
          throw new Error('Missing view');
        }

        var resolution = view.getResolution();

        if (!resolution) {
          throw new Error('Missing resolution');
        }

        var delta = resolution * this.tolerance;
        var bbox = [to[0] - delta, to[1] - delta, to[0] + delta, to[1] + delta];
        var layerSource = this.source;
        var featuresInExtent = layerSource.getFeaturesInExtent(bbox);
        featuresInExtent.forEach(function (feature) {
          var lastIntersection = [];
          var bestIntersection = [];
          var bestDistance = Infinity;
          var distanceFromTo = Object(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__["distance"])(from, to);
          var ax = from[0];
          var ay = from[1];
          var mx = to[0];
          var my = to[1];
          var unitVector = [(mx - ax) / distanceFromTo, (my - ay) / distanceFromTo];
          var b = [ax + (distanceFromTo + delta) * unitVector[0], ay + (distanceFromTo + delta) * unitVector[1]];
          var geom = feature.getGeometry();

          if (!(geom instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
            throw new Error('Wrong geometry type');
          }

          geom.forEachSegment(function (point1, point2) {
            lastIntersection = _this3.computeLineSegmentIntersection([from, b], [point1, point2]);

            if (lastIntersection !== undefined && Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_4__["containsXY"])(bbox, lastIntersection[0], lastIntersection[1])) {
              var lastDistance = Object(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__["distance"])(to, lastIntersection);

              if (lastDistance < bestDistance) {
                bestDistance = lastDistance;
                bestIntersection = lastIntersection;
              }
            }
          });

          if (bestIntersection) {
            to[0] = bestIntersection[0] || to[0];
            to[1] = bestIntersection[1] || to[1];
          }
        });
      }
    }

    var geometry = opt_geometry;

    if (geometry) {
      geometry.setCoordinates(coordinates);
      return geometry;
    }

    return new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"](coordinates);
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Wrong geometry type');
    }

    var proj = this.getMap().getView().getProjection();
    console.assert(proj);
    var output = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["getFormattedLength"])(geom, proj, this.precision, this.format, this.spherical);
    var coord = geom.getLastCoordinate();
    callback(output, coord);
  };

  _proto.computeLineSegmentIntersection = function computeLineSegmentIntersection(line1, line2) {
    var numerator1A = (line2[1][0] - line2[0][0]) * (line1[0][1] - line2[0][1]) - (line2[1][1] - line2[0][1]) * (line1[0][0] - line2[0][0]);
    var numerator1B = (line1[1][0] - line1[0][0]) * (line1[0][1] - line2[0][1]) - (line1[1][1] - line1[0][1]) * (line1[0][0] - line2[0][0]);
    var denominator1 = (line2[1][1] - line2[0][1]) * (line1[1][0] - line1[0][0]) - (line2[1][0] - line2[0][0]) * (line1[1][1] - line1[0][1]);

    if (denominator1 === 0) {
      return;
    }

    var ua1 = numerator1A / denominator1;
    var ub1 = numerator1B / denominator1;

    if (ua1 >= 0 && ua1 <= 1 && ub1 >= 0 && ub1 <= 1) {
      var result = [];
      result[0] = line1[0][0] + ua1 * (line1[1][0] - line1[0][0]);
      result[1] = line1[0][1] + ua1 * (line1[1][1] - line1[0][1]);
      return result;
    }
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/interaction/MeasureLengthMobile.js":
/*!************************************************!*\
  !*** ./src/interaction/MeasureLengthMobile.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/MeasureLength.js */ "./src/interaction/MeasureLength.js");
/* harmony import */ var ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/interaction/MobileDraw.js */ "./src/interaction/MobileDraw.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(format, gettextCatalog, opt_options) {
    var options = opt_options !== undefined ? opt_options : {};
    Object.assign(options, {
      displayHelpTooltip: false
    });
    return _ngeoInteractionMeasu.call(this, format, gettextCatalog, options) || this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'LineString',
      style: style
    });
  };

  return _default;
}(ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/interaction/MeasurePointMobile.js":
/*!***********************************************!*\
  !*** ./src/interaction/MeasurePointMobile.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/interaction/MobileDraw.js */ "./src/interaction/MobileDraw.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(format, coordFormat, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    Object.assign(options, {
      displayHelpTooltip: false
    });
    _this = _ngeoInteractionMeasu.call(this, options) || this;
    _this.format_ = format;
    _this.coordFormat_ = coordFormat;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ngeo_interaction_MobileDraw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'Point',
      style: style
    });
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Missing geometry');
    }

    var dec = this.decimals;
    var output = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["getFormattedPoint"])(geom, dec, this.format_, this.coordFormat_);
    var coord = geom.getLastCoordinate();
    callback(output, coord);
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/interaction/MobileDraw.js":
/*!***************************************!*\
  !*** ./src/interaction/MobileDraw.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/common.js */ "./src/interaction/common.js");
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_functions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/functions.js */ "./node_modules/ol/functions.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/SimpleGeometry.js */ "./node_modules/ol/geom/SimpleGeometry.js");
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }














var _default = function (_olInteractionInterac) {
  _inheritsLoose(_default, _olInteractionInterac);

  function _default(options) {
    var _this;

    _this = _olInteractionInterac.call(this, {
      handleEvent: ol_functions_js__WEBPACK_IMPORTED_MODULE_4__["TRUE"]
    }) || this;
    _this.changeEventKey_ = null;
    _this.type_ = options.type;
    _this.minPoints_ = options.minPoints ? options.minPoints : _this.type_ === 'Polygon' ? 3 : 2;
    _this.sketchFeature_ = null;
    _this.sketchPoints_ = [];
    _this.sketchPoint_ = null;
    _this.overlay_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        useSpatialIndex: false,
        wrapX: options.wrapX ? options.wrapX : false
      }),
      style: options.style || Object(ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__["getDefaultDrawStyleFunction"])(),
      updateWhileAnimating: true,
      updateWhileInteracting: true
    });
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(_assertThisInitialized(_this), 'change:active', _this.updateState_, _assertThisInitialized(_this));

    _this.set('dirty', false);

    _this.set('drawing', false);

    _this.set('valid', false);

    return _this;
  }

  var _proto = _default.prototype;

  _proto.setMap = function setMap(map) {
    var currentMap = this.getMap();

    if (currentMap) {
      if (this.changeEventKey_) {
        Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"])(this.changeEventKey_);
      }
    }

    ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_9__["default"].prototype.setMap.call(this, map);

    if (map) {
      this.changeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(map.getView(), 'change:center', this.handleViewCenterChange_, this);
    }

    this.updateState_();
  };

  _proto.getDirty = function getDirty() {
    return this.get('dirty');
  };

  _proto.getDrawing = function getDrawing() {
    return this.get('drawing');
  };

  _proto.getValid = function getValid() {
    return this.get('valid');
  };

  _proto.getFeature = function getFeature() {
    return this.sketchFeature_;
  };

  _proto.addToDrawing = function addToDrawing() {
    if (!this.sketchPoint_) {
      throw new Error('Missing sketchPoint');
    }

    var active = this.getActive();
    var drawing = this.getDrawing();

    if (!active || !drawing) {
      return;
    }

    var sketchFeatureGeom;
    var sketchPointGeom = this.getSketchPointGeometry_();
    var coordinate = sketchPointGeom.getCoordinates();
    var coordinates = null;

    if (this.type_ === 'Point') {
      if (!this.sketchFeature_) {
        this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__["default"](coordinate));
        var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawstart', {
          feature: this.sketchFeature_
        });
        this.dispatchEvent(event);
      }

      sketchFeatureGeom = this.sketchFeature_.getGeometry();

      if (sketchFeatureGeom instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
        sketchFeatureGeom.setCoordinates(coordinate);
      }

      return;
    }

    if (this.type_ === 'LineString') {
      this.sketchPoints_.push(this.sketchPoint_);

      if (!this.sketchFeature_) {
        coordinates = [coordinate.slice(), coordinate.slice()];
        this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__["default"](coordinates));

        var _event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawstart', {
          feature: this.sketchFeature_
        });

        this.dispatchEvent(_event);
      } else {
        sketchFeatureGeom = this.sketchFeature_.getGeometry();

        if (sketchFeatureGeom instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
          coordinates = sketchFeatureGeom.getCoordinates();
          coordinates.push(coordinate.slice());
          sketchFeatureGeom.setCoordinates(coordinates);
        }
      }
    }

    if (this.type_ === 'Polygon') {
      this.sketchPoints_.push(this.sketchPoint_);

      if (!this.sketchFeature_) {
        coordinates = [coordinate.slice(), coordinate.slice(), coordinate.slice()];
        this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](new ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__["default"]([coordinates]));

        var _event2 = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawstart', {
          feature: this.sketchFeature_
        });

        this.dispatchEvent(_event2);
      } else {
        sketchFeatureGeom = this.sketchFeature_.getGeometry();

        if (sketchFeatureGeom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
          var coordinatess = sketchFeatureGeom.getCoordinates();
          coordinates = coordinatess[0];
          coordinates.push(coordinate.slice());
          sketchFeatureGeom.setCoordinates(coordinatess);
        }
      }
    }

    var dirty = this.getDirty();

    if (dirty) {
      this.set('dirty', false);
    }

    if (!coordinates) {
      throw new Error('Missing coordinates');
    }

    var valid = this.getValid();

    if (this.type_ === 'LineString' || this.type_ === 'Polygon') {
      if (coordinates.length >= this.minPoints_) {
        if (!valid) {
          this.set('valid', true);
        }
      } else {
        if (valid) {
          this.set('valid', false);
        }
      }
    }

    this.sketchPoint_ = null;
    this.updateSketchFeatures_();
  };

  _proto.clearDrawing = function clearDrawing() {
    this.setActive(false);
    this.setActive(true);
  };

  _proto.finishDrawing = function finishDrawing() {
    var active = this.getActive();
    var drawing = this.getDrawing();

    if (!active || !drawing) {
      return;
    }

    if (this.sketchPoint_) {
      this.addToDrawing();
    }

    this.set('drawing', false);
    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawend', {
      feature: this.sketchFeature_
    });
    this.dispatchEvent(event);
  };

  _proto.startDrawing_ = function startDrawing_() {
    this.set('drawing', true);
    this.createOrUpdateSketchPoint_();
    this.updateSketchFeatures_();

    if (this.type_ === 'Point') {
      this.addToDrawing();
    }
  };

  _proto.modifyDrawing_ = function modifyDrawing_() {
    if (!this.sketchFeature_) {
      return;
    }

    var center = this.getCenter_();

    if (this.type_ === 'LineString') {
      var sketchFeatureGeom = this.sketchFeature_.getGeometry();

      if (sketchFeatureGeom instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
        var coordinates = sketchFeatureGeom.getCoordinates();
        coordinates.pop();
        coordinates.push(center);
        sketchFeatureGeom.setCoordinates(coordinates);
      }
    } else if (this.type_ === 'Polygon') {
      var _sketchFeatureGeom = this.sketchFeature_.getGeometry();

      if (_sketchFeatureGeom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
        var coordinatess = _sketchFeatureGeom.getCoordinates();

        var _coordinates = coordinatess[0];

        _coordinates.pop();

        _coordinates.push(center);

        _sketchFeatureGeom.setCoordinates([_coordinates]);
      }
    }

    var dirty = this.getDirty();

    if (!dirty) {
      this.set('dirty', true);
    }
  };

  _proto.abortDrawing_ = function abortDrawing_() {
    var sketchFeature = this.sketchFeature_;

    if (sketchFeature || this.sketchPoints_.length > 0) {
      this.sketchFeature_ = null;
      this.sketchPoint_ = null;
      this.overlay_.getSource().clear(true);
    }

    this.sketchPoints_ = [];
    this.set('dirty', false);
    this.set('drawing', false);
    this.set('valid', false);
    return sketchFeature;
  };

  _proto.updateState_ = function updateState_() {
    var map = this.getMap();
    var active = this.getActive();

    if (!map || !active) {
      this.abortDrawing_();
    } else {
      this.startDrawing_();
    }

    this.overlay_.setMap(active ? map : null);
  };

  _proto.handleViewCenterChange_ = function handleViewCenterChange_(evt) {
    var active = this.getActive();
    var drawing = this.getDrawing();

    if (!active || !drawing) {
      return;
    }

    this.createOrUpdateSketchPoint_();

    if (this.type_ === 'Point') {
      this.addToDrawing();
    } else {
      this.modifyDrawing_();
      this.updateSketchFeatures_();
    }
  };

  _proto.createOrUpdateSketchPoint_ = function createOrUpdateSketchPoint_() {
    var center = this.getCenter_();

    if (this.sketchPoint_) {
      var geometry = this.getSketchPointGeometry_();
      geometry.setCoordinates(center);
    } else {
      this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__["default"](center));
    }
  };

  _proto.updateSketchFeatures_ = function updateSketchFeatures_() {
    var sketchFeatures = [];

    if (this.sketchFeature_) {
      sketchFeatures.push(this.sketchFeature_);
    }

    if (this.sketchPoint_) {
      sketchFeatures.push(this.sketchPoint_);
    }

    var overlaySource = this.overlay_.getSource();
    overlaySource.clear(true);
    overlaySource.addFeatures(sketchFeatures);
    overlaySource.addFeatures(this.sketchPoints_);
  };

  _proto.getSketchPointGeometry_ = function getSketchPointGeometry_() {
    if (!this.sketchPoint_) {
      throw new Error('Missing sketchPoint');
    }

    var geometry = this.sketchPoint_.getGeometry();

    if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      return geometry;
    } else {
      throw new Error('Wrong geometry type');
    }
  };

  _proto.getCenter_ = function getCenter_() {
    var center = this.getMap().getView().getCenter();

    if (!Array.isArray(center)) {
      throw new Error('Missing center');
    }

    return center;
  };

  return _default;
}(ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_9__["default"]);



/***/ }),

/***/ "./src/interaction/common.js":
/*!***********************************!*\
  !*** ./src/interaction/common.js ***!
  \***********************************/
/*! exports provided: getDefaultDrawStyleFunction, getDefaultModifyStyleFunction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultDrawStyleFunction", function() { return getDefaultDrawStyleFunction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultModifyStyleFunction", function() { return getDefaultModifyStyleFunction; });
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");

function getDefaultDrawStyleFunction() {
  var style = Object(ol_style_Style_js__WEBPACK_IMPORTED_MODULE_0__["createEditingStyle"])();
  return function (feature, resolution) {
    var geometry = feature.getGeometry();

    if (geometry) {
      return style[geometry.getType()];
    }
  };
}
function getDefaultModifyStyleFunction() {
  var style = Object(ol_style_Style_js__WEBPACK_IMPORTED_MODULE_0__["createEditingStyle"])();
  return function (feature, resolution) {
    return style.Point;
  };
}

/***/ }),

/***/ "./src/layertree/Controller.js":
/*!*************************************!*\
  !*** ./src/layertree/Controller.js ***!
  \*************************************/
/*! exports provided: LayertreeController, getFirstParentTree, LayertreeVisitorDecision, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayertreeController", function() { return LayertreeController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstParentTree", function() { return getFirstParentTree; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayertreeVisitorDecision", function() { return LayertreeVisitorDecision; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/decorate.js */ "./src/misc/decorate.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
LayertreeController.$inject = ["$scope", "$rootScope", "$attrs"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







function LayertreeController($scope, $rootScope, $attrs) {
  var _this = this;

  var isRoot = $attrs.ngeoLayertreeNotroot === undefined;
  this.isRoot = isRoot;
  var nodeExpr = $attrs.ngeoLayertree;
  this.rootScope_ = $rootScope;
  this.properties = {};
  this.state_ = 'off';
  var node;

  if (isRoot) {
    $scope.$watch(nodeExpr, function (newVal, oldVal) {
      _this.node = newVal;
    });
  } else {
    node = $scope.$eval(nodeExpr);
  }

  this.node = node;
  var mapExpr = $attrs.ngeoLayertreeMap;
  var map = $scope.$eval(mapExpr);
  console.assert(map !== undefined);
  this.parent = $scope.$parent.layertreeCtrl;
  this.children = [];

  if (this.parent) {
    this.parent.children.push(this);
  }

  $scope.$on('$destroy', function () {
    if (_this.parent) {
      var index = _this.parent.children.indexOf(_this);

      console.assert(index >= 0);

      _this.parent.children.splice(index, 1);
    }
  });
  this.uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(this);
  this.depth = isRoot ? 0 : this.parent.depth + 1;
  $scope.uid = this.uid;
  $scope.depth = this.depth;
  this.map = map;
  var nodelayerExpr = $attrs.ngeoLayertreeNodelayer;

  if (nodelayerExpr === undefined) {
    var nodelayerexprExpr = $attrs.ngeoLayertreeNodelayerexpr;
    var newNodelayerExpr = $scope.$eval(nodelayerexprExpr);
    console.assert(typeof newNodelayerExpr == 'string');
    nodelayerExpr = newNodelayerExpr;
  }

  console.assert(nodelayerExpr !== undefined);
  this.nodelayerExpr = nodelayerExpr;
  this.layer = null;

  if (!isRoot) {
    var layer = $scope.$eval(nodelayerExpr, {
      'treeCtrl': this
    }) || null;

    if (layer) {
      console.assert(layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__["default"] || layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__["default"]);
      this.layer = layer;
    }
  }

  this.dataSource_ = null;

  if (this.layer) {
    Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__["layerLoading"])(this.layer, $scope);
    Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__["layerDecoration"])(this.layer);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(this.layer, 'change:opacity', function (evt) {
      _this.rootScope_.$broadcast('ngeo-layertree-opacity', _this);
    });
  }

  var listenersExpr = $attrs.ngeoLayertreeListeners;

  if (listenersExpr === undefined) {
    var listenersexprExpr = $attrs.ngeoLayertreeListenersexpr;
    listenersExpr = $scope.$eval(listenersexprExpr);
  }

  if (listenersExpr !== undefined) {
    console.assert(typeof listenersExpr == 'string');
  }

  this.listenersExpr = listenersExpr;

  if (listenersExpr) {
    $scope.$eval(listenersExpr, {
      'treeScope': $scope,
      'treeCtrl': this
    });
  }

  $scope.layertreeCtrl = this;
}

LayertreeController.prototype.getState = function () {
  return this.state_;
};

LayertreeController.prototype.setState = function (state, opt_broadcast) {
  var _this2 = this;

  if (state === this.state_) {
    return;
  }

  this.setStateInternal_(state);

  if (this.parent) {
    this.parent.refreshState(this, opt_broadcast);
  }

  var firstParents = this.isRoot ? this.children : [getFirstParentTree(this)];

  if (opt_broadcast === undefined || opt_broadcast) {
    firstParents.forEach(function (firstParent) {
      _this2.rootScope_.$broadcast('ngeo-layertree-state', _this2, firstParent);
    });
  }
};

LayertreeController.prototype.setStateInternal_ = function (state) {
  var _this3 = this;

  this.state_ = state === 'on' ? 'on' : 'off';

  if (this.state_ === 'on' && this.node.metadata && this.node.metadata.exclusiveGroup) {
    var firstChild;

    for (var _iterator = _createForOfIteratorHelperLoose(this.children), _step; !(_step = _iterator()).done;) {
      var child = _step.value;

      if (!firstChild) {
        firstChild = child;
        child.setStateInternal_('on');
      } else {
        child.setStateInternal_('off');
      }
    }
  } else {
    this.children.forEach(function (child) {
      child.setStateInternal_(_this3.state_);
    });
  }
};

LayertreeController.prototype.refreshState = function (opt_onChild, opt_broadcast) {
  var group = this.node;

  if (group.children && opt_onChild && opt_onChild.getState() !== 'off' && this.node.metadata && this.node.metadata.exclusiveGroup) {
    var onChild = opt_onChild;
    this.children.forEach(function (child) {
      if (child !== onChild) {
        child.setState('off', opt_broadcast);
      }
    });
  }

  var newState = this.getCalculateState();

  if (this.state_ === newState) {
    return;
  }

  this.state_ = newState;

  if (this.parent) {
    this.parent.refreshState(this, opt_broadcast);
  }
};

LayertreeController.prototype.getCalculateState = function () {
  var group = this.node;

  if (group.children === undefined) {
    return this.state_;
  }

  var childState = '';
  var previousChildState;
  this.children.some(function (child) {
    childState = child.getCalculateState();

    if (previousChildState) {
      if (previousChildState !== childState) {
        childState = 'indeterminate';
        return true;
      }
    }

    previousChildState = childState;
    return false;
  });
  return childState;
};

LayertreeController.prototype.getSetActive = function (val) {
  var layer = this.layer;
  var map = this.map;

  if (!layer) {
    return;
  }

  if (val !== undefined) {
    if (!val) {
      map.removeLayer(layer);
    } else {
      map.addLayer(layer);
    }
  } else {
    return map.getLayers().getArray().includes(layer);
  }
};

LayertreeController.prototype.getDataSource = function () {
  return this.dataSource_;
};

LayertreeController.prototype.setDataSource = function (dataSource) {
  this.dataSource_ = dataSource;
};

function getFirstParentTree(treeCtrl) {
  var tree = treeCtrl;

  while (!tree.parent.isRoot) {
    tree = tree.parent;
  }

  return tree;
}
var LayertreeVisitorDecision = {
  STOP: 'STOP',
  SKIP: 'SKIP',
  DESCEND: 'DESCEND'
};

LayertreeController.prototype.traverseDepthFirst = function (visitor) {
  var decision = visitor(this) || LayertreeVisitorDecision.DESCEND;

  switch (decision) {
    case LayertreeVisitorDecision.STOP:
      return true;

    case LayertreeVisitorDecision.SKIP:
      return false;

    case LayertreeVisitorDecision.DESCEND:
      for (var _iterator2 = _createForOfIteratorHelperLoose(this.children), _step2; !(_step2 = _iterator2()).done;) {
        var child = _step2.value;
        var stop = child.traverseDepthFirst(visitor);

        if (stop) {
          return true;
        }
      }

      return false;

    default:
      throw 'Unhandled case';
  }
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayertreeController', []);
myModule.controller('ngeoLayertreeController', LayertreeController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/layertree/component.html":
/*!**************************************!*\
  !*** ./src/layertree/component.html ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<span ng-if="::!layertreeCtrl.isRoot">{{::layertreeCtrl.node.name}}</span>\n<input\n  type="checkbox"\n  ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children"\n  ng-model="layertreeCtrl.getSetActive"\n  ng-model-options="{getterSetter: true}"/>\n<ul ng-if="::layertreeCtrl.node.children">\n  <li\n    ng-repeat="node in ::layertreeCtrl.node.children"\n    ngeo-layertree="::node"\n    ngeo-layertree-notroot\n    ngeo-layertree-map="layertreeCtrl.map"\n    ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr"\n    ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr">\n  </li>\n</ul>\n';

}
return __p
}

/***/ }),

/***/ "./src/layertree/component.js":
/*!************************************!*\
  !*** ./src/layertree/component.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var bootstrap_js_src_collapse_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bootstrap/js/src/collapse.js */ "./node_modules/bootstrap/js/src/collapse.js");
gmfLayertreeComponent.$inject = ["ngeoLayertreeTemplateUrl"];



var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayertree', [ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.value('ngeoLayertreeTemplateUrl', function (element, attrs) {
  var templateUrl = attrs['ngeoLayertreeTemplateurl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/layertree';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/layertree', __webpack_require__(/*! ./component.html */ "./src/layertree/component.html"));
}]);

function gmfLayertreeComponent(ngeoLayertreeTemplateUrl) {
  return {
    restrict: 'A',
    scope: true,
    templateUrl: ngeoLayertreeTemplateUrl,
    controller: ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_1__["LayertreeController"]
  };
}

myModule.directive('ngeoLayertree', gmfLayertreeComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/BackgroundLayerMgr.js":
/*!***************************************!*\
  !*** ./src/map/BackgroundLayerMgr.js ***!
  \***************************************/
/*! exports provided: MapBackgroundLayerManager, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapBackgroundLayerManager", function() { return MapBackgroundLayerManager; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }











var BACKGROUNDLAYERGROUP_NAME = 'background';
var MapBackgroundLayerManager = function (_olObservable) {
  MapBackgroundLayerManager.$inject = ["ngeoLayerHelper"];

  _inheritsLoose(MapBackgroundLayerManager, _olObservable);

  function MapBackgroundLayerManager(ngeoLayerHelper) {
    var _this;

    _this = _olObservable.call(this) || this;
    _this.mapUids_ = {};
    _this.ngeoLayerHelper_ = ngeoLayerHelper;
    return _this;
  }

  var _proto = MapBackgroundLayerManager.prototype;

  _proto.get = function get(map) {
    var mapUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(map).toString();
    return mapUid in this.mapUids_ ? this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME).getLayers().item(0) : null;
  };

  _proto.set = function set(map, layer) {
    var ZIndex = -200;
    var mapUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(map).toString();
    var previous = this.get(map);

    if (layer !== null) {
      layer.setZIndex(ZIndex);
      this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(layer, ZIndex);
    }

    var bgGroup = this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME);

    if (previous !== null) {
      console.assert(mapUid in this.mapUids_);

      if (layer !== null) {
        bgGroup.getLayers().setAt(0, layer);
      } else {
        bgGroup.getLayers().removeAt(0);
        delete this.mapUids_[mapUid];
      }
    } else if (layer !== null) {
      bgGroup.getLayers().insertAt(0, layer);
      this.mapUids_[mapUid] = true;
    }

    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('change', {
      current: layer,
      previous: previous
    });
    this.dispatchEvent(event);
    return previous;
  };

  _proto.getOpacityBgLayer = function getOpacityBgLayer(map) {
    var mapUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(map).toString();
    return mapUid in this.mapUids_ ? this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME).getLayers().item(1) : null;
  };

  _proto.setOpacityBgLayer = function setOpacityBgLayer(map, layer) {
    var bgGroup = this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME);
    var opacityBackgroundLayer = this.getOpacityBgLayer(map);

    if (opacityBackgroundLayer) {
      var previous = bgGroup.getLayers().remove(opacityBackgroundLayer);
      layer.setOpacity(previous ? previous.getOpacity() : 0);
      layer.setVisible(previous ? previous.getVisible() : true);
    }

    var ZIndex = -100;
    layer.setZIndex(ZIndex);
    this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(layer, ZIndex);
    var index = bgGroup.getLayers().getArray().indexOf(layer);

    if (index === -1) {
      bgGroup.getLayers().push(layer);
    }
  };

  _proto.updateDimensions = function updateDimensions(map, dimensions) {
    var baseBgLayer = this.get(map);

    if (baseBgLayer) {
      var layers = [baseBgLayer];

      if (baseBgLayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
        layers = baseBgLayer.getLayers().getArray();
      }

      layers.forEach(function (layer) {
        if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
          var hasUpdates = false;
          var updatedDimensions = {};

          for (var key in layer.get('dimensions')) {
            var value = dimensions[key];

            if (value !== undefined) {
              updatedDimensions[key] = value;
              hasUpdates = true;
            }
          }

          if (hasUpdates) {
            var source = layer.getSource();

            if (source instanceof ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
              source.updateDimensions(updatedDimensions);
              source.refresh();
            } else if (source instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_7__["default"] || source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
              source.updateParams(updatedDimensions);
              source.refresh();
            }
          }
        }
      });
    }
  };

  return MapBackgroundLayerManager;
}(ol_Observable_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoBackgroundLayerMgr', [ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_9__["default"].name]);
myModule.service('ngeoBackgroundLayerMgr', MapBackgroundLayerManager);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/FeatureOverlay.js":
/*!***********************************!*\
  !*** ./src/map/FeatureOverlay.js ***!
  \***********************************/
/*! exports provided: FeatureOverlay, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureOverlay", function() { return FeatureOverlay; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");



function FeatureOverlay(manager, index) {
  this.manager_ = manager;
  this.index_ = index;
  this.listenerKeys_ = [];
}

FeatureOverlay.prototype.addFeature = function (feature) {
  this.manager_.addFeature(feature, this.index_);
};

FeatureOverlay.prototype.removeFeature = function (feature) {
  this.manager_.removeFeature(feature, this.index_);
};

FeatureOverlay.prototype.isEmpty = function () {
  return this.manager_.isEmpty(this.index_);
};

FeatureOverlay.prototype.clear = function () {
  this.manager_.clear(this.index_);
};

FeatureOverlay.prototype.setFeatures = function (features) {
  var _this = this;

  this.clear();
  this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"]);

  if (features !== null) {
    features.forEach(function (feature) {
      _this.addFeature(feature);
    });
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(features, 'add', this.handleFeatureAdd_, this));
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(features, 'remove', this.handleFeatureRemove_, this));
  }
};

FeatureOverlay.prototype.setStyle = function (style) {
  this.manager_.setStyle(style, this.index_);
};

FeatureOverlay.prototype.handleFeatureAdd_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_2__["CollectionEvent"]) {
    var feature = evt.element;
    this.addFeature(feature);
  }
};

FeatureOverlay.prototype.handleFeatureRemove_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_2__["CollectionEvent"]) {
    var feature = evt.element;
    this.removeFeature(feature);
  }
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatureOverlay', []);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/FeatureOverlayMgr.js":
/*!**************************************!*\
  !*** ./src/map/FeatureOverlayMgr.js ***!
  \**************************************/
/*! exports provided: FeatureOverlayMgr, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureOverlayMgr", function() { return FeatureOverlayMgr; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/FeatureOverlay.js */ "./src/map/FeatureOverlay.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");







function FeatureOverlayMgr() {
  this.featureUidToGroupIndex_ = {};
  this.groups_ = [];
  this.source_ = new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    useSpatialIndex: false
  });
  this.layer_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
    source: this.source_,
    style: this.styleFunction_.bind(this),
    updateWhileAnimating: true,
    updateWhileInteracting: true
  });
}

FeatureOverlayMgr.prototype.isEmpty = function (groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  return Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_4__["isEmpty"])(this.groups_[groupIndex].features);
};

FeatureOverlayMgr.prototype.addFeature = function (feature, groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  var featureUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature).toString();
  this.featureUidToGroupIndex_[featureUid] = groupIndex;
  this.groups_[groupIndex].features[featureUid] = feature;
  this.source_.addFeature(feature);
};

FeatureOverlayMgr.prototype.removeFeature = function (feature, groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  var featureUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature).toString();
  delete this.featureUidToGroupIndex_[featureUid];
  delete this.groups_[groupIndex].features[featureUid];
  this.source_.removeFeature(feature);
};

FeatureOverlayMgr.prototype.clear = function (groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  var group = this.groups_[groupIndex];

  for (var featureUid in group.features) {
    this.removeFeature(group.features[featureUid], groupIndex);
  }

  console.assert(Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_4__["isEmpty"])(group.features));
};

FeatureOverlayMgr.prototype.getLayer = function () {
  return this.layer_;
};

FeatureOverlayMgr.prototype.getFeatureOverlay = function () {
  var groupIndex = this.groups_.length;
  this.groups_.push({
    styleFunction: ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["createDefaultStyle"],
    features: {}
  });
  return new ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_1__["FeatureOverlay"](this, groupIndex);
};

FeatureOverlayMgr.prototype.init = function (map) {
  this.layer_.setMap(map);
};

FeatureOverlayMgr.prototype.setStyle = function (style, groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  this.groups_[groupIndex].styleFunction = style === null ? ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["createDefaultStyle"] : Object(ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["toFunction"])(style);
};

FeatureOverlayMgr.prototype.styleFunction_ = function (feature, resolution) {
  var featureUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature).toString();
  console.assert(featureUid in this.featureUidToGroupIndex_);
  var groupIndex = this.featureUidToGroupIndex_[featureUid];
  var group = this.groups_[groupIndex];
  return group.styleFunction(feature, resolution);
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatureOverlayMgr', [ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('ngeoFeatureOverlayMgr', FeatureOverlayMgr);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/LayerHelper.js":
/*!********************************!*\
  !*** ./src/map/LayerHelper.js ***!
  \********************************/
/*! exports provided: LayerHelper, LAYER_NODE_NAME_KEY, NODE_IS_LEAF, DATASOURCE_ID, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerHelper", function() { return LayerHelper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAYER_NODE_NAME_KEY", function() { return LAYER_NODE_NAME_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NODE_IS_LEAF", function() { return NODE_IS_LEAF; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATASOURCE_ID", function() { return DATASOURCE_ID; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/WMTSCapabilities.js */ "./node_modules/ol/format/WMTSCapabilities.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ol_uri_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/uri.js */ "./node_modules/ol/uri.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
LayerHelper.$inject = ["$q", "$http", "ngeoTilesPreloadingLimit"];













function LayerHelper($q, $http, ngeoTilesPreloadingLimit) {
  this.$q_ = $q;
  this.$http_ = $http;
  this.tilesPreloadingLimit_ = ngeoTilesPreloadingLimit === null ? Infinity : ngeoTilesPreloadingLimit;
}
var LAYER_NODE_NAME_KEY = 'layerNodeName';
var NODE_IS_LEAF = 'layerIsLeaf';
var DATASOURCE_ID = 'dataSourceId';
var GROUP_KEY = 'groupName';
var REFRESH_PARAM = 'random';

LayerHelper.prototype.copyProperties = function (layerFrom, layerTo, opt_excludes) {
  var properties = layerFrom.getProperties();

  if (opt_excludes) {
    var excludes = opt_excludes;
    var keys = Object.keys(properties);

    for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {
      var key = _keys[_i];

      if (excludes.includes(key)) {
        continue;
      }

      layerTo.set(key, properties[key]);
    }
  } else {
    layerTo.setProperties(properties);
  }
};

LayerHelper.prototype.createBasicWMSLayer = function (sourceURL, sourceLayersName, sourceFormat, opt_serverType, opt_time, opt_params, opt_crossOrigin, opt_customSourceOptions, opt_customLayerOptions) {
  var params = {
    FORMAT: sourceFormat,
    LAYERS: sourceLayersName
  };
  var olServerType;

  if (opt_time) {
    params.TIME = opt_time;
  }

  if (opt_serverType) {
    params.SERVERTYPE = opt_serverType;
    olServerType = opt_serverType.replace(ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_12__["ServerType"].QGISSERVER, 'qgis');
  }

  var options = Object.assign({}, opt_customSourceOptions, {
    url: sourceURL,
    params: params,
    serverType: olServerType,
    crossOrigin: opt_crossOrigin
  });
  var source = new ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"](options);

  if (opt_params) {
    source.updateParams(opt_params);
  }

  if (!(opt_params && opt_params.STYLES)) {
    params.STYLES = '';
    var i = sourceLayersName.split(',').length;

    while (i > 1) {
      params.STYLES.concat(',');
      i--;
    }
  }

  var layerOptions = Object.assign({}, opt_customLayerOptions, {
    source: source
  });
  return new ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"](layerOptions);
};

LayerHelper.prototype.createBasicWMSLayerFromDataSource = function (dataSource, opt_crossOrigin) {
  var url = dataSource.wmsUrl;

  if (url === undefined) {
    throw new Error('Missing url');
  }

  var layerNames = dataSource.getWMSLayerNames().join(',');
  var serverType = dataSource.ogcServerType;
  var imageType = dataSource.ogcImageType;
  var layer = this.createBasicWMSLayer(url, layerNames, imageType, serverType, undefined, undefined, opt_crossOrigin);
  layer.setVisible(dataSource.visible);
  layer.set('querySourceIds', [dataSource.id]);
  layer.set(DATASOURCE_ID, dataSource.id);
  return layer;
};

LayerHelper.prototype.createWMTSLayerFromCapabilitites = function (capabilitiesURL, layerName, opt_matrixSet, opt_dimensions, opt_customOptions, opt_minResolution, opt_maxResolution, opt_opacity) {
  if (opt_maxResolution) {
    opt_maxResolution = opt_maxResolution * 1.0000001;
  }

  var parser = new ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
  var layer = new ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    preload: this.tilesPreloadingLimit_,
    minResolution: opt_minResolution,
    maxResolution: opt_maxResolution
  });
  var $q = this.$q_;
  return this.$http_.get(capabilitiesURL, {
    cache: true
  }).then(function (response) {
    var result;

    if (response.data) {
      result = parser.read(response.data);
    }

    if (result) {
      var options = Object.assign({}, opt_customOptions, Object(ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["optionsFromCapabilities"])(result, {
        matrixSet: opt_matrixSet,
        crossOrigin: 'anonymous',
        layer: layerName
      }));
      var source = new ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["default"](options);

      if (opt_dimensions && !Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_7__["isEmpty"])(opt_dimensions)) {
        source.updateDimensions(opt_dimensions);
      }

      layer.setSource(source);
      var layers = result.Contents.Layer;
      var l = ol_array_js__WEBPACK_IMPORTED_MODULE_1__["find"](layers, function (elt, index, array) {
        return elt.Identifier == layerName;
      });

      if (!l) {
        return $q.reject("Layer " + layerName + " not available in WMTS capabilities from " + capabilitiesURL);
      }

      layer.set('capabilitiesStyles', l.Style);

      if (opt_opacity !== undefined) {
        layer.setOpacity(opt_opacity);
      }

      return $q.resolve(layer);
    }

    return $q.reject("Failed to get WMTS capabilities from " + capabilitiesURL);
  });
};

LayerHelper.prototype.createWMTSLayerFromCapabilititesObj = function (capabilities, layerCap, opt_dimensions) {
  var options = Object(ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["optionsFromCapabilities"])(capabilities, {
    crossOrigin: 'anonymous',
    layer: layerCap.Identifier
  });
  console.assert(options);
  var source = new ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["default"](options);

  if (opt_dimensions && !Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_7__["isEmpty"])(opt_dimensions)) {
    source.updateDimensions(opt_dimensions);
  }

  var result = new ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    preload: Infinity,
    source: source
  });
  result.set('capabilitiesStyles', layerCap.Style);
  return result;
};

LayerHelper.prototype.createBasicGroup = function (opt_layers) {
  var group = new ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]();

  if (opt_layers) {
    group.setLayers(opt_layers);
  }

  return group;
};

LayerHelper.prototype.getGroupFromMap = function (map, groupName) {
  var groups = map.getLayerGroup().getLayers();
  var group;
  groups.getArray().some(function (existingGroup) {
    if (existingGroup.get(GROUP_KEY) === groupName) {
      group = existingGroup;
      return true;
    } else {
      return false;
    }
  });

  if (!group) {
    group = this.createBasicGroup();
    group.set(GROUP_KEY, groupName);
    map.addLayer(group);
  }

  return group;
};

LayerHelper.prototype.getFlatLayers = function (layer) {
  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    var sublayers = layer.getLayers().getArray();
    var hasGroupLayer = sublayers.some(function (sublayer) {
      return sublayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"];
    });

    if (!hasGroupLayer) {
      return sublayers.slice();
    }
  }

  return this.getFlatLayers_(layer, [], undefined);
};

LayerHelper.prototype.getFlatLayers_ = function (layer, array, computedOpacity) {
  var _this = this;

  var opacity = layer.getOpacity();

  if (computedOpacity !== undefined) {
    computedOpacity *= opacity;
  } else {
    computedOpacity = opacity;
  }

  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    var sublayers = layer.getLayers();
    sublayers.forEach(function (l) {
      _this.getFlatLayers_(l, array, computedOpacity);
    });
  } else if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
    if (!array.includes(layer)) {
      layer.set('inheritedOpacity', computedOpacity, true);
      array.push(layer);
    }
  }

  return array;
};

LayerHelper.prototype.getLayerByName = function (layerName, layers) {
  var _this2 = this;

  var found = null;
  layers.some(function (layer) {
    if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
      var sublayers = layer.getLayers().getArray();
      found = _this2.getLayerByName(layerName, sublayers);
    } else if (layer.get(LAYER_NODE_NAME_KEY) === layerName) {
      found = layer;
    }

    return !!found;
  });
  return found;
};

LayerHelper.prototype.getWMTSLegendURL = function (layer) {
  var url;
  var styles = layer.get('capabilitiesStyles');

  if (styles !== undefined) {
    var legendURL = styles[0].legendURL;

    if (legendURL !== undefined) {
      url = legendURL[0].href;
    }
  }

  return url;
};

LayerHelper.prototype.getWMSLegendURL = function (url, layerName, opt_scale, opt_legendRule, opt_legendWidth, opt_legendHeight, opt_servertype, opt_dpi, opt_bbox, opt_srs, opt_additionalQueryString) {
  if (!url) {
    return undefined;
  }

  var queryString = {
    FORMAT: 'image/png',
    TRANSPARENT: true,
    SERVICE: 'WMS',
    VERSION: '1.1.1',
    REQUEST: 'GetLegendGraphic',
    LAYER: layerName
  };

  if (opt_scale !== undefined) {
    queryString.SCALE = opt_scale;
  }

  if (opt_legendRule !== undefined) {
    queryString.RULE = opt_legendRule;

    if (opt_legendWidth !== undefined) {
      queryString.WIDTH = opt_legendWidth;
    }

    if (opt_legendHeight !== undefined) {
      queryString.HEIGHT = opt_legendHeight;
    }
  }

  if (opt_servertype == 'qgis') {
    if (opt_dpi != undefined) {
      queryString.DPI = opt_dpi;
    }

    if (opt_bbox != undefined && opt_srs != undefined && opt_scale != undefined && opt_dpi != undefined && opt_legendRule == undefined) {
      queryString.BBOX = opt_bbox.join(',');
      queryString.SRS = opt_srs;
      queryString.WIDTH = Math.round((opt_bbox[2] - opt_bbox[0]) / opt_scale * 39.37 * opt_dpi);
      queryString.HEIGHT = Math.round((opt_bbox[3] - opt_bbox[1]) / opt_scale * 39.37 * opt_dpi);
    }
  }

  if (opt_additionalQueryString) {
    Object.assign(queryString, opt_additionalQueryString);
  }

  return Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_11__["appendParams"])(url, queryString);
};

LayerHelper.prototype.isLayerVisible = function (layer, map) {
  if (!layer.getVisible()) {
    return false;
  }

  var currentResolution = map.getView().getResolution();

  if (currentResolution === undefined) {
    throw new Error('Missing resolution');
  }

  return currentResolution > layer.getMinResolution() && currentResolution < layer.getMaxResolution();
};

LayerHelper.prototype.refreshWMSLayer = function (layer) {
  var source_ = layer.getSource();
  console.assert(source_ instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"] || source_ instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__["default"]);
  var source = source_;
  var params = source.getParams();
  params[REFRESH_PARAM] = Math.random();
  source.updateParams(params);
};

LayerHelper.prototype.setZIndexToFirstLevelChildren = function (element, ZIndex) {
  if (element instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    var innerGroupLayers = element.getLayers();
    innerGroupLayers.forEach(function (innerLayer) {
      return innerLayer.setZIndex(ZIndex);
    });
  }
};

LayerHelper.prototype.updateWMSLayerState = function (layer, names, opt_time) {
  if (names.length <= 0) {
    layer.setVisible(false);
  } else {
    layer.setVisible(true);
    var source = layer.getSource();

    if (!(source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
      throw new Error('Wrong source type');
    }

    if (opt_time) {
      source.updateParams({
        'LAYERS': names,
        'TIME': opt_time
      });
    } else {
      source.updateParams({
        'LAYERS': names
      });
    }
  }
};

LayerHelper.prototype.getQuerySourceIds = function (layer) {
  return layer.get('querySourceIds');
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayerHelper', []);
myModule.service('ngeoLayerHelper', LayerHelper);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/component.js":
/*!******************************!*\
  !*** ./src/map/component.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
mapComponent.$inject = ["$window"];



var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMap', []);

function mapComponent($window) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var attr = 'ngeoMap';
      var prop = attrs[attr];
      var map = scope.$eval(prop);
      console.assert(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
      map.setTarget(element[0]);
      var manageResizeAttr = 'ngeoMapManageResize';
      var manageResizeProp = attrs[manageResizeAttr];
      var manageResize = scope.$eval(manageResizeProp);

      if (manageResize) {
        var resizeTransitionAttr = 'ngeoMapResizeTransition';
        var resizeTransitionProp = attrs[resizeTransitionAttr];
        var resizeTransition = scope.$eval(resizeTransitionProp);
        Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])($window, 'resize', function (evt) {
          if (resizeTransition) {
            var start = Date.now();
            var loop = true;

            var adjustSize = function adjustSize() {
              map.updateSize();
              map.renderSync();

              if (loop) {
                $window.requestAnimationFrame(adjustSize);
              }

              if (Date.now() - start > resizeTransition) {
                loop = false;
              }
            };

            adjustSize();
          } else {
            map.updateSize();
          }
        });
      }
    }
  };
}

myModule.directive('ngeoMap', mapComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/module.js":
/*!***************************!*\
  !*** ./src/map/module.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/BackgroundLayerMgr.js */ "./src/map/BackgroundLayerMgr.js");
/* harmony import */ var ngeo_map_component_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/map/component.js */ "./src/map/component.js");
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ngeo_map_recenter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/map/recenter.js */ "./src/map/recenter.js");
/* harmony import */ var ngeo_map_resizemap_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/map/resizemap.js */ "./src/map/resizemap.js");
/* harmony import */ var ngeo_map_scaleselector_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/map/scaleselector.js */ "./src/map/scaleselector.js");







/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMapModule', [ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_map_component_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_map_recenter_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_map_resizemap_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_map_scaleselector_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]));

/***/ }),

/***/ "./src/map/recenter.js":
/*!*****************************!*\
  !*** ./src/map/recenter.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoRecenter', []);

function mapResenterComponent() {
  return {
    restrict: 'A',
    link: function link($scope, $element, $attrs) {
      var mapExpr = $attrs.ngeoRecenterMap;
      var map = $scope.$eval(mapExpr);

      function recenter(element) {
        var extent = element.attr('ngeo-extent');

        if (extent !== undefined) {
          var size = map.getSize();

          if (size === undefined) {
            throw new Error('Missing size');
          }

          map.getView().fit($scope.$eval(extent), {
            size: size
          });
        }

        var zoom = element.attr('ngeo-zoom');

        if (zoom !== undefined) {
          map.getView().setZoom($scope.$eval(zoom));
        }
      }

      $element.on('click', '*', function (event) {
        recenter(angular__WEBPACK_IMPORTED_MODULE_0___default.a.element($(this)));
      });

      var ce = function ce(event) {
        var selected = event.target.options[event.target.selectedIndex];
        recenter(angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(selected));
      };

      $element.on({
        change: ce
      });
    }
  };
}

myModule.directive('ngeoRecenter', mapResenterComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/map/resizemap.js":
/*!******************************!*\
  !*** ./src/map/resizemap.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
mapResizeComponent.$inject = ["$window"];


var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoResizemap', []);

function mapResizeComponent($window) {
  var duration = 1000;
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var attr = 'ngeoResizemap';
      var prop = attrs[attr];
      var map = scope.$eval(prop);
      console.assert(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
      var stateExpr = attrs.ngeoResizemapState;
      console.assert(stateExpr !== undefined);
      var start;
      var animationDelayKey;

      var animationDelay = function animationDelay() {
        map.updateSize();
        map.renderSync();

        if (Date.now() - start < duration) {
          animationDelayKey = $window.requestAnimationFrame(animationDelay);
        }
      };

      element.on('transitionend', function () {
        map.updateSize();
        map.renderSync();
      });
      scope.$watch(stateExpr, function (newVal, oldVal) {
        if (newVal != oldVal) {
          start = Date.now();
          $window.cancelAnimationFrame(animationDelayKey);
          animationDelayKey = $window.requestAnimationFrame(animationDelay);
        }
      });
    }
  };
}

myModule.directive('ngeoResizemap', mapResizeComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/map/scaleselector.html":
/*!************************************!*\
  !*** ./src/map/scaleselector.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}">\n  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n    <span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>\n  </button>\n  <ul class="dropdown-menu btn-block" role="menu">\n    <li ng-repeat="zoomLevel in ::scaleselectorCtrl.getZooms()">\n      <a href ng-click="scaleselectorCtrl.changeZoom(zoomLevel)"\n         ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml">\n      </a>\n    </li>\n  </ul>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/map/scaleselector.js":
/*!**********************************!*\
  !*** ./src/map/scaleselector.js ***!
  \**********************************/
/*! exports provided: ScaleselectorController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScaleselectorController", function() { return ScaleselectorController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var bootstrap_js_src_dropdown_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap/js/src/dropdown.js */ "./node_modules/bootstrap/js/src/dropdown.js");




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoScaleselector', []);
myModule.value('ngeoScaleselectorTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.ngeoScaleselectorTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/map/scaleselector';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/map/scaleselector', __webpack_require__(/*! ./scaleselector.html */ "./src/map/scaleselector.html"));
}]);

var mapScaleselectorComponent = function mapScaleselectorComponent(ngeoScaleselectorTemplateUrl) {
  return {
    restrict: 'A',
    scope: true,
    controller: 'NgeoScaleselectorController',
    templateUrl: ngeoScaleselectorTemplateUrl
  };
};

mapScaleselectorComponent.$inject = ["ngeoScaleselectorTemplateUrl"];
mapScaleselectorComponent.$inject = ["ngeoScaleselectorTemplateUrl"];
myModule.directive('ngeoScaleselector', mapScaleselectorComponent);
var ScaleselectorController = function () {
  ScaleselectorController.$inject = ["$scope", "$attrs", "ngeoScaleSelectorOptions"];

  function ScaleselectorController($scope, $attrs, ngeoScaleSelectorOptions) {
    this.scales = ngeoScaleSelectorOptions.values;
    var mapExpr = $attrs.ngeoScaleselectorMap;
    this.map_ = $scope.$eval(mapExpr);
    console.assert(this.map_ instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
    this.options = ngeoScaleSelectorOptions;
    this.$scope_ = $scope;
    this.resolutionChangeKey_ = null;
    this.currentScale = undefined;
    var view = this.map_.getView();
    var dpi = 96;
    var inchesPerMeter = 39.37;
    var warningRatio = 1.5;

    if (this.scales) {
      for (var zoom = view.getMinZoom(); zoom <= view.getMaxZoom(); zoom++) {
        var calculatedScale = Math.round(view.getResolutionForZoom(zoom) * inchesPerMeter * dpi);
        var scale = this.scales[zoom];

        if (scale == undefined) {
          console.warn("Missing scale for zoom '" + zoom + "', set it to real calculated scale '" + calculatedScale + "'.");
          this.scales[zoom] = calculatedScale;
        } else {
          if (Math.exp(Math.abs(Math.log(calculatedScale / scale))) > warningRatio) {
            console.warn("Big difference between configured scale '" + scale + "' " + ("for zoom '" + zoom + "' and real calculated scale '" + calculatedScale + "'."));
          }
        }
      }
    } else {
      this.scales = [];

      for (var _zoom = view.getMinZoom(); _zoom <= view.getMaxZoom(); _zoom++) {
        this.scales[_zoom] = Math.round(view.getResolutionForZoom(_zoom) * inchesPerMeter * dpi);
      }
    }

    var currentZoom = this.map_.getView().getZoom();

    if (currentZoom !== undefined) {
      this.currentScale = this.getScale(currentZoom);
    }

    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(this.map_, 'change:view', this.handleViewChange_, this);
    this.registerResolutionChangeListener_();
    $scope.scaleselectorCtrl = this;
  }

  var _proto = ScaleselectorController.prototype;

  _proto.getZooms = function getZooms() {
    return Object.keys(this.scales).map(Number);
  };

  _proto.getScale = function getScale(zoom) {
    if (zoom === undefined) {
      return undefined;
    }

    var scale = this.scales[zoom];

    if (scale !== undefined) {
      return scale;
    }

    var flooredZoom = Math.floor(zoom);
    var lowerScale = this.scales[flooredZoom];
    var upperScale = this.scales[flooredZoom + 1];
    scale = lowerScale - (lowerScale - upperScale) * (zoom - flooredZoom);
    return isNaN(scale) ? undefined : Math.round(scale);
  };

  _proto.changeZoom = function changeZoom(zoom) {
    this.map_.getView().setZoom(zoom);
  };

  _proto.handleResolutionChange_ = function handleResolutionChange_(e) {
    var _this = this;

    var view = this.map_.getView();
    var currentScale = this.getScale(view.getZoom());

    if (currentScale !== undefined) {
      this.$scope_.$applyAsync(function () {
        _this.currentScale = currentScale;
      });
    }
  };

  _proto.handleViewChange_ = function handleViewChange_(e) {
    this.registerResolutionChangeListener_();
    this.handleResolutionChange_(null);
  };

  _proto.registerResolutionChangeListener_ = function registerResolutionChangeListener_() {
    if (this.resolutionChangeKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"])(this.resolutionChangeKey_);
    }

    var view = this.map_.getView();
    this.resolutionChangeKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(view, 'change:resolution', this.handleResolutionChange_, this);
  };

  return ScaleselectorController;
}();
myModule.controller('NgeoScaleselectorController', ScaleselectorController);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/Disclaimer.js":
/*!***********************************!*\
  !*** ./src/message/Disclaimer.js ***!
  \***********************************/
/*! exports provided: MessageDisclaimerService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageDisclaimerService", function() { return MessageDisclaimerService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bootstrap_js_src_alert_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap/js/src/alert.js */ "./node_modules/bootstrap/js/src/alert.js");
/* harmony import */ var ngeo_message_Popup_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/message/Popup.js */ "./src/message/Popup.js");
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/sass/font.scss */ "./src/sass/font.scss");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_4__);
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }






var MessageDisclaimerService = function (_ngeoMessageMessage) {
  MessageDisclaimerService.$inject = ["$sce", "gettextCatalog", "ngeoCreatePopup"];

  _inheritsLoose(MessageDisclaimerService, _ngeoMessageMessage);

  function MessageDisclaimerService($sce, gettextCatalog, ngeoCreatePopup) {
    var _this;

    _this = _ngeoMessageMessage.call(this) || this;
    _this.sce_ = $sce;
    _this.gettextCatalog_ = gettextCatalog;
    _this.createPopup_ = ngeoCreatePopup;
    var container = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('<div class="ngeo-disclaimer"></div>');
    angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(document.body).append(container);
    _this.container_ = container;
    _this.messages_ = {};
    _this.messagesConsumerCount_ = {};
    _this.uids_ = {};
    return _this;
  }

  var _proto = MessageDisclaimerService.prototype;

  _proto.alert = function alert(object) {
    this.show(object);
  };

  _proto.close = function close(object) {
    var _this2 = this;

    var msgObjects = this.getMessageObjects(object);
    msgObjects.forEach(function (message) {
      return _this2.closeMessage_(message);
    });
  };

  _proto.showMessage = function showMessage(message) {
    var _this3 = this;

    var gettextCatalog = this.gettextCatalog_;
    var type = message.type;
    console.assert(typeof type == 'string', 'Type should be set.');
    var uid = this.getMessageUid_(message);

    if (this.uids_[uid]) {
      return;
    }

    this.uids_[uid] = true;

    if (message.popup === true) {
      var popup = this.createPopup_();
      var content = this.sce_.trustAsHtml(message.msg);
      popup.open({
        autoDestroy: true,
        content: content,
        title: '&nbsp;'
      });
      popup.scope.$watch('open', function (newVal) {
        if (!newVal) {
          _this3.closeMessage_(message);
        }
      });
      this.messages_[uid] = popup;
    } else {
      var compatibleMessageUid = this.getCompatibleMessageUid_(message);

      if (this.messages_[compatibleMessageUid]) {
        this.messagesConsumerCount_[compatibleMessageUid]++;
        return;
      }

      var classNames = ['alert', 'fade', 'alert-dismissible', 'show'];

      switch (type) {
        case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["MessageType"].ERROR:
          classNames.push('alert-danger');
          break;

        case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["MessageType"].INFORMATION:
          classNames.push('alert-info');
          break;

        case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["MessageType"].SUCCESS:
          classNames.push('alert-success');
          break;

        case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["MessageType"].WARNING:
          classNames.push('alert-warning');
          break;

        default:
          break;
      }

      var el = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element("<div role=\"alert\" class=\"" + classNames.join(' ') + "\"></div>");
      var button = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element("<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"" + gettextCatalog.getString('Close') + "\"><span aria-hidden=\"true\" class=\"fa fa-times\"></span></button>");
      var msg = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('<span />').html(message.msg);
      el.append(button).append(msg);
      var container;

      if (message.target) {
        container = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(message.target);
      } else {
        container = this.container_;
      }

      container.append(el);
      el.addClass('show');
      el.on('closed.bs.alert', function () {
        _this3.closeMessage_(message, true);
      });
      this.messages_[compatibleMessageUid] = el;
      this.messagesConsumerCount_[compatibleMessageUid] = 1;
    }
  };

  _proto.getMessageUid_ = function getMessageUid_(message) {
    return message.msg + "-" + message.type + "-" + message.layerUid;
  };

  _proto.getCompatibleMessageUid_ = function getCompatibleMessageUid_(message) {
    return message.msg + "-" + message.type;
  };

  _proto.closeMessage_ = function closeMessage_(message, force) {
    if (force === void 0) {
      force = false;
    }

    var uid = this.getMessageUid_(message);

    if (!this.uids_[uid]) {
      return;
    }

    delete this.uids_[uid];
    var compatibleMessageUid = this.getCompatibleMessageUid_(message);

    if (force) {
      this.messagesConsumerCount_[compatibleMessageUid] = 0;
    } else {
      this.messagesConsumerCount_[compatibleMessageUid]--;
    }

    if (this.messagesConsumerCount_[compatibleMessageUid] > 0) {
      return;
    }

    var obj = this.messages_[compatibleMessageUid];

    if (obj instanceof ngeo_message_Popup_js__WEBPACK_IMPORTED_MODULE_2__["MessagePopup"]) {
      var mpObj = obj;

      if (mpObj.getOpen()) {
        mpObj.setOpen(false);
      }
    } else {
      var jqueryObj = obj;

      if (jqueryObj.hasClass('show')) {
        jqueryObj.alert('close');
      }
    }

    delete this.messages_[compatibleMessageUid];
    delete this.messagesConsumerCount_[compatibleMessageUid];
  };

  return MessageDisclaimerService;
}(ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDisclaimer', [ngeo_message_Popup_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
myModule.service('ngeoDisclaimer', MessageDisclaimerService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/Message.js":
/*!********************************!*\
  !*** ./src/message/Message.js ***!
  \********************************/
/*! exports provided: MessageType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return MessageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
var MessageType = {
  ERROR: 'error',
  INFORMATION: 'information',
  SUCCESS: 'success',
  WARNING: 'warning'
};

var _default = function () {
  function _default() {}

  var _proto = _default.prototype;

  _proto.showMessage = function showMessage(message) {};

  _proto.show = function show(object) {
    var msgObjects = this.getMessageObjects(object);
    msgObjects.forEach(this.showMessage, this);
  };

  _proto.error = function error(message) {
    this.show(this.getMessageObjects(message, MessageType.ERROR));
  };

  _proto.info = function info(message) {
    this.show(this.getMessageObjects(message, MessageType.INFORMATION));
  };

  _proto.success = function success(message) {
    this.show(this.getMessageObjects(message, MessageType.SUCCESS));
  };

  _proto.warn = function warn(message) {
    this.show(this.getMessageObjects(message, MessageType.WARNING));
  };

  _proto.getMessageObjects = function getMessageObjects(object, opt_type) {
    var msgObjects = [];
    var defaultType = MessageType.INFORMATION;

    if (typeof object === 'string') {
      msgObjects.push({
        msg: object,
        type: opt_type !== undefined ? opt_type : defaultType
      });
    } else if (Array.isArray(object)) {
      object.forEach(function (msg) {
        if (typeof object === 'string') {
          msgObjects.push({
            msg: msg,
            type: opt_type !== undefined ? opt_type : defaultType
          });
        } else {
          if (typeof msg == 'string') {
            throw new Error('Wrong msg type');
          }

          if (opt_type !== undefined) {
            msg.type = opt_type;
          }

          msgObjects.push(msg);
        }
      });
    } else {
      var msgObject = object;

      if (opt_type !== undefined) {
        msgObject.type = opt_type;
      }

      if (msgObject.type === undefined) {
        msgObject.type = defaultType;
      }

      msgObjects.push(msgObject);
    }

    return msgObjects;
  };

  return _default;
}();



/***/ }),

/***/ "./src/message/Notification.js":
/*!*************************************!*\
  !*** ./src/message/Notification.js ***!
  \*************************************/
/*! exports provided: MessageNotification, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageNotification", function() { return MessageNotification; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bootstrap_js_src_alert_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap/js/src/alert.js */ "./node_modules/bootstrap/js/src/alert.js");
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var DEFAULT_DELAY = 7000;
var MessageNotification = function (_ngeoMessageMessage) {
  MessageNotification.$inject = ["$timeout"];

  _inheritsLoose(MessageNotification, _ngeoMessageMessage);

  function MessageNotification($timeout) {
    var _this;

    _this = _ngeoMessageMessage.call(this) || this;
    _this.timeout_ = $timeout;
    var container = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('<div class="ngeo-notification"></div>');
    angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(document.body).append(container);
    _this.container_ = container;
    _this.cache_ = {};
    return _this;
  }

  var _proto = MessageNotification.prototype;

  _proto.notify = function notify(object) {
    this.show(object);
  };

  _proto.clear = function clear() {
    for (var uid in this.cache_) {
      this.clearMessageByCacheItem_(this.cache_[parseInt(uid, 10)]);
    }
  };

  _proto.showMessage = function showMessage(message) {
    var _this2 = this;

    var type = message.type;
    console.assert(typeof type == 'string', 'Type should be set.');
    var classNames = ['alert', 'fade', 'show'];

    switch (type) {
      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].ERROR:
        classNames.push('alert-danger');
        break;

      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].INFORMATION:
        classNames.push('alert-info');
        break;

      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].SUCCESS:
        classNames.push('alert-success');
        break;

      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].WARNING:
        classNames.push('alert-warning');
        break;

      default:
        break;
    }

    var el = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element("<div class=\"" + classNames.join(' ') + "\"></div>");
    var container;

    if (message.target) {
      container = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(message.target);
    } else {
      container = this.container_;
    }

    container.append(el);
    el.html(message.msg).addClass('show');
    var delay = message.delay !== undefined ? message.delay : DEFAULT_DELAY;
    var item = {
      el: el
    };
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_3__["getUid"])(el);
    item.promise = this.timeout_(function () {
      el.alert('close');
      delete _this2.cache_[uid];
    }, delay);
    this.cache_[uid] = item;
  };

  _proto.clearMessageByCacheItem_ = function clearMessageByCacheItem_(item) {
    var el = item.el;
    var promise = item.promise;
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_3__["getUid"])(el);
    el.alert('close');
    this.timeout_.cancel(promise);
    delete this.cache_[uid];
  };

  return MessageNotification;
}(ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoNotification', []);
myModule.service('ngeoNotification', MessageNotification);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/Popup.js":
/*!******************************!*\
  !*** ./src/message/Popup.js ***!
  \******************************/
/*! exports provided: MessagePopup, Factory, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagePopup", function() { return MessagePopup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Factory", function() { return Factory; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_message_popupComponent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/message/popupComponent.js */ "./src/message/popupComponent.js");
Factory.$inject = ["$compile", "$rootScope", "$sce", "$timeout"];


function MessagePopup($compile, $rootScope, $sce, $timeout) {
  var _this = this;

  this.scope = $rootScope.$new(true);
  this.scope.$watch(function () {
    return _this.scope.open;
  }, function (open) {
    if (!open && _this.autoDestroy_) {
      _this.timeout_(function () {
        _this.destroy();
      });
    }
  });
  this.sce_ = $sce;
  this.timeout_ = $timeout;
  this.element_ = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('<div ngeo-popup></div>');
  this.autoDestroy_ = false;
  $compile(this.element_)(this.scope);
  angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(document.body).append(this.element_);
}

MessagePopup.prototype.getOpen = function () {
  return this.scope.open;
};

MessagePopup.prototype.setOpen = function (open) {
  this.scope.open = open;
};

MessagePopup.prototype.destroy = function () {
  this.scope.$destroy();
  this.element_.remove();
};

MessagePopup.prototype.setTitle = function (title) {
  var trustedTitle = this.sce_.trustAsHtml(title);
  this.scope.title = trustedTitle;
};

MessagePopup.prototype.setContent = function (content, opt_trusted) {
  this.scope.content = opt_trusted ? this.sce_.trustAsHtml(content) : content;
};

MessagePopup.prototype.setUrl = function (url) {
  var content = this.sce_.trustAsHtml("<iframe src=\"" + url + "\" width=\"100%\" height=\"100%\"></iframe>");
  this.setContent(content);
};

MessagePopup.prototype.setWidth = function (width) {
  this.element_.width(width);
};

MessagePopup.prototype.setHeight = function (height) {
  this.element_.height(height);
};

MessagePopup.prototype.setSize = function (width, height) {
  this.setWidth(width);
  this.setHeight(height);
};

MessagePopup.prototype.setAutoDestroy = function (autoDestroy) {
  this.autoDestroy_ = autoDestroy;
};

MessagePopup.prototype.addClass = function (cls) {
  this.element_.addClass(cls);
};

MessagePopup.prototype.open = function (options) {
  if (options.url) {
    this.setUrl(options.url);
  } else if (options.content) {
    this.setContent(options.content);
  } else {
    console.assert(false, 'ngeo.message.Popup options requirest "url" or "content".');
  }

  if (options.autoDestroy !== undefined) {
    this.setAutoDestroy(options.autoDestroy);
  }

  if (options.cls !== undefined) {
    this.addClass(options.cls);
  }

  if (options.height !== undefined) {
    this.setHeight(options.height);
  }

  if (options.title !== undefined) {
    this.setTitle(options.title);
  }

  if (options.width !== undefined) {
    this.setWidth(options.width);
  }

  this.setOpen(true);
};

function Factory($compile, $rootScope, $sce, $timeout) {
  return function () {
    return new MessagePopup($compile, $rootScope, $sce, $timeout);
  };
}
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCreatePopup', [ngeo_message_popupComponent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.factory('ngeoCreatePopup', Factory);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/displaywindowComponent.html":
/*!*************************************************!*\
  !*** ./src/message/displaywindowComponent.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div\n  class="ngeo-displaywindow"\n  ng-show="$ctrl.open"\n  title=""\n>\n\n  <div class="windowcontainer" ng-style="$ctrl.style">\n\n    <button\n      type="button"\n      class="btn fa-times close"\n      ng-click="$ctrl.close()">\n    </button>\n\n    <div class="animation-container">\n      <div class="slide-animation ">\n        <div\n          class="header ui-draggable-handle"\n          ng-if="$ctrl.title !== null">\n          <p class="title">{{$ctrl.title | translate}}</p>\n        </div>\n        <div\n          class="details content"\n          ng-if="$ctrl.content"\n          ng-bind-html="$ctrl.content">\n        </div>\n        <div\n          class="details iframe"\n          ng-if="$ctrl.url !== null">\n          <iframe\n            frameborder="0"\n            type="text/html"\n            height="100%"\n            width="100%"\n            ng-src="{{ $ctrl.urlTrusted }}"></iframe>\n        </div>\n        <div class="content-template-container"></div>\n      </div>\n    </div>\n\n  </div>\n\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/message/displaywindowComponent.js":
/*!***********************************************!*\
  !*** ./src/message/displaywindowComponent.js ***!
  \***********************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/sass/font.scss */ "./src/sass/font.scss");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jquery_ui_ui_widgets_resizable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery-ui/ui/widgets/resizable.js */ "./node_modules/jquery-ui/ui/widgets/resizable.js");
/* harmony import */ var jquery_ui_ui_widgets_resizable_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_resizable_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-ui/ui/widgets/draggable.js */ "./node_modules/jquery-ui/ui/widgets/draggable.js");
/* harmony import */ var jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular-sanitize */ "./node_modules/angular-sanitize/index.js");
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(angular_sanitize__WEBPACK_IMPORTED_MODULE_5__);
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }







var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMessageDisplaywindowComponent', ['ngSanitize']);
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/message/displaywindowComponent', __webpack_require__(/*! ./displaywindowComponent.html */ "./src/message/displaywindowComponent.html"));
}]);
myModule.value('ngeoMessageDisplaywindowTemplateUrl', function ($attrs) {
  var templateUrl = $attrs['ngeoMessageDisplaywindowTemplateUrl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/message/displaywindowComponent';
});
ngeoMessageDisplaywindowTemplateUrl.$inject = ["$attrs", "ngeoMessageDisplaywindowTemplateUrl"];

function ngeoMessageDisplaywindowTemplateUrl($attrs, ngeoMessageDisplaywindowTemplateUrl) {
  return ngeoMessageDisplaywindowTemplateUrl($attrs);
}

var Controller = function () {
  Controller.$inject = ["$element", "$sce", "$scope", "$compile"];

  function Controller($element, $sce, $scope, $compile) {
    this.clearOnClose;
    this.content;
    this.contentTemplate;
    this.contentScope;
    this.draggable;
    this.draggableContainment;
    this.desktop;
    this.height;
    this.open;
    this.resizable;
    this.title;
    this.url;
    this.width;
    this.element_ = $element;
    this.sce_ = $sce;
    this.scope_ = $scope;
    this.compile_ = $compile;
  }

  var _proto = Controller.prototype;

  _proto.$onInit = function $onInit() {
    var _this = this;

    this.clearOnClose = this.clearOnClose !== false;
    this.content = this.content || null;
    this.contentTemplate = this.contentTemplate || null;
    this.contentScope = this.contentScope || null;
    this.desktop = this.desktop !== false;
    this.draggableContainment = this.draggableContainment || 'document';
    this.open = this.open === true;
    this.height = this.height || '240px';
    this.width = this.width || '240px';
    var element = document.getElementsByClassName('ngeo-displaywindow')[0];
    var margin = parseFloat(window.getComputedStyle(element).left);
    this.maxWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0) - 2 * margin;
    this.maxHeigth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0) - 2 * margin;
    this.draggable = this.draggable !== undefined ? this.draggable : this.desktop;
    this.resizable = this.resizable !== undefined ? this.resizable : this.desktop;

    if (this.draggable) {
      this.element_.find('.ngeo-displaywindow .windowcontainer').draggable({
        'containment': this.draggableContainment,
        'handle': 'div.header'
      });
    }

    if (this.resizable) {
      this.element_.find('.ngeo-displaywindow .windowcontainer').resizable({
        'minHeight': 240,
        'minWidth': 240
      });
    }

    if (this.contentTemplate) {
      this.updateContentTemplate_();
    }

    this.scope_.$watch(function () {
      return _this.contentTemplate;
    }, function () {
      return _this.updateContentTemplate_();
    });
  };

  _proto.updateContentTemplate_ = function updateContentTemplate_() {
    if (!this.contentTemplate) {
      return;
    }

    var scope = this.contentScope || this.scope_;
    var compiled = this.compile_(this.contentTemplate)(scope);
    var displayWindow = this.element_.find('.ngeo-displaywindow .windowcontainer .animation-container .content-template-container');
    displayWindow.empty();
    displayWindow.append(compiled);
  };

  _proto.close = function close() {
    this.open = false;

    if (this.clearOnClose) {
      this.clear_();
    }
  };

  _proto.clear_ = function clear_() {
    this.content = null;
    this.title = null;
    this.url = null;
  };

  _createClass(Controller, [{
    key: "style",
    get: function get() {
      return {
        height: this.height,
        width: this.width,
        'max-width': this.maxWidth.toString() + 'px',
        'max-height': this.maxHeigth.toString() + 'px'
      };
    }
  }, {
    key: "urlTrusted",
    get: function get() {
      if (this.url) {
        return this.sce_.trustAsResourceUrl(this.url);
      }
    }
  }]);

  return Controller;
}();
var ngeoMessageDisplaywindowComponent = {
  bindings: {
    'clearOnClose': '<?',
    'content': '=?',
    'contentTemplate': '=?',
    'contentScope': '<?',
    'desktop': '<?',
    'draggable': '<?',
    'draggableContainment': '<?',
    'height': '=?',
    'open': '=?',
    'resizable': '<?',
    'title': '=?',
    'url': '=?',
    'width': '=?'
  },
  controller: Controller,
  templateUrl: ngeoMessageDisplaywindowTemplateUrl
};
myModule.component('ngeoDisplaywindow', ngeoMessageDisplaywindowComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/modalComponent.js":
/*!***************************************!*\
  !*** ./src/message/modalComponent.js ***!
  \***************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/ui/widgets/draggable.js */ "./node_modules/jquery-ui/ui/widgets/draggable.js");
/* harmony import */ var jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bootstrap_js_src_modal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap/js/src/modal.js */ "./node_modules/bootstrap/js/src/modal.js");




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoModal', []);
var messageModalComponent = {
  template: "<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <ng-transclude></ng-transclude>\n      </div>\n    </div>\n  </div>",
  require: {
    'ngModel': 'ngModel'
  },
  transclude: true,
  controller: 'ngeoModalController',
  bindings: {
    'draggableHandle': '=?ngeodraggableHandle',
    'resizable': '<ngeoModalResizable',
    'closable': '<ngeoModalClosable'
  }
};
myModule.component('ngeoModal', messageModalComponent);
var Controller = function () {
  Controller.$inject = ["$scope", "$element"];

  function Controller($scope, $element) {
    this.$element_ = $element;
    this.$scope_ = $scope;
    this.modal_ = null;
    this.draggableHandle = '';
    this.closable = false;
    this.resizable = false;
    this.ngModel = null;
  }

  var _proto = Controller.prototype;

  _proto.$onInit = function $onInit() {
    this.closable = this.closable !== false;
    this.resizable = !!this.resizable;
    this.draggableHandle = this.draggableHandle || '.ui-draggable-handle';
  };

  _proto.$postLink = function $postLink() {
    var _this = this;

    this.modal_ = this.$element_.children();

    if (!this.closable) {
      this.modal_.attr('data-keyboard', 'false');
      this.modal_.attr('data-backdrop', 'static');
    }

    var dialog = this.modal_.find('.modal-dialog');
    dialog.draggable({
      handle: this.draggableHandle
    });

    if (this.resizable) {
      dialog.resizable();
    }

    if (!this.ngModel) {
      throw new Error('Missing model');
    }

    this.ngModel.$render = function () {
      if (!_this.ngModel) {
        throw new Error('Missing model');
      }

      if (!_this.modal_) {
        throw new Error('Missing modal');
      }

      _this.modal_.modal(_this.ngModel.$viewValue ? 'show' : 'hide');
    };

    this.modal_.on('shown.bs.modal hidden.bs.modal', function (e) {
      if (!_this.ngModel) {
        throw new Error('Missing model');
      }

      var type = e.type;
      console.assert(type == 'shown' || type == 'hidden');

      _this.ngModel.$setViewValue(type == 'shown');
    });
  };

  _proto.$onDestroy = function $onDestroy() {
    if (!this.modal_) {
      throw new Error('Missing modal');
    }

    this.modal_.modal('hide');
    var dialog = this.modal_.find('.modal-dialog');
    dialog.draggable('destroy');

    if (this.resizable) {
      dialog.resizable('destroy');
    }
  };

  return Controller;
}();
myModule.controller('ngeoModalController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/popoverComponent.js":
/*!*****************************************!*\
  !*** ./src/message/popoverComponent.js ***!
  \*****************************************/
/*! exports provided: PopoverController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PopoverController", function() { return PopoverController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bootstrap_js_src_tooltip_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap/js/src/tooltip.js */ "./node_modules/bootstrap/js/src/tooltip.js");
/* harmony import */ var bootstrap_js_src_popover_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bootstrap/js/src/popover.js */ "./node_modules/bootstrap/js/src/popover.js");
PopoverController.$inject = ["$scope"];



var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoPopover', []);

function messagePopoverComponent() {
  return {
    restrict: 'A',
    scope: true,
    controller: 'NgeoPopoverController as popoverCtrl',
    link: function link(scope, elem, attrs, ngeoPopoverCtrl) {
      if (!ngeoPopoverCtrl) {
        throw new Error('Missing ngeoPopoverCtrl');
      }

      ngeoPopoverCtrl.anchorElm.on('inserted.bs.popover', function () {
        ngeoPopoverCtrl.bodyElm.show();
        ngeoPopoverCtrl.shown = true;
      });
      ngeoPopoverCtrl.anchorElm.popover({
        container: 'body',
        html: true,
        content: ngeoPopoverCtrl.bodyElm,
        boundary: 'viewport',
        placement: attrs['ngeoPopoverPlacement'] || 'right'
      });

      if (attrs['ngeoPopoverDismiss']) {
        $(attrs['ngeoPopoverDismiss']).on('scroll', function () {
          ngeoPopoverCtrl.dismissPopover();
        });
      }

      scope.$on('$destroy', function () {
        ngeoPopoverCtrl.anchorElm.popover('dispose');
        ngeoPopoverCtrl.anchorElm.unbind('inserted.bs.popover');
        ngeoPopoverCtrl.anchorElm.unbind('hidden.bs.popover');
      });
    }
  };
}

function messagePopoverAnchorComponent() {
  return {
    restrict: 'A',
    require: '^^ngeoPopover',
    link: function link(scope, elem, attrs, ngeoPopoverCtrl) {
      if (!ngeoPopoverCtrl) {
        throw new Error('Missing ngeoPopoverCtrl');
      }

      ngeoPopoverCtrl.anchorElm = elem;
    }
  };
}

function messagePopoverContentComponent() {
  return {
    restrict: 'A',
    require: '^^ngeoPopover',
    link: function link(scope, elem, attrs, ngeoPopoverCtrl) {
      if (!ngeoPopoverCtrl) {
        throw new Error('Missing ngeoPopoverCtrl');
      }

      ngeoPopoverCtrl.bodyElm = elem;
      elem.hide();
    }
  };
}

function PopoverController($scope) {
  var _this = this;

  this.shown = false;
  this.anchorElm = null;
  this.bodyElm = null;

  var clickHandler = function clickHandler(clickEvent) {
    if (!_this.anchorElm) {
      throw new Error('Missing anchorElm');
    }

    if (!_this.bodyElm) {
      throw new Error('Missing bodyElm');
    }

    if (_this.anchorElm[0] !== clickEvent.target && _this.bodyElm.parent()[0] !== clickEvent.target && _this.bodyElm.parent().find(clickEvent.target).length === 0 && _this.shown) {
      _this.dismissPopover();
    }
  };

  document.body.addEventListener('click', clickHandler);
  $scope.$on('$destroy', function () {
    document.body.removeEventListener('click', clickHandler);
  });
}

PopoverController.prototype.dismissPopover = function () {
  if (!this.anchorElm) {
    throw new Error('Missing anchorElm');
  }

  this.shown = false;
  this.anchorElm.popover('hide');
};

myModule.controller('NgeoPopoverController', PopoverController);
myModule.directive('ngeoPopover', messagePopoverComponent);
myModule.directive('ngeoPopoverAnchor', messagePopoverAnchorComponent);
myModule.directive('ngeoPopoverContent', messagePopoverContentComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/message/popupComponent.js":
/*!***************************************!*\
  !*** ./src/message/popupComponent.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular-sanitize */ "./node_modules/angular-sanitize/index.js");
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(angular_sanitize__WEBPACK_IMPORTED_MODULE_1__);
messagePopopComponent.$inject = ["ngeoPopupTemplateUrl"];


var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoPopup', ['ngSanitize']);
myModule.value('ngeoPopupTemplateUrl', function (element, attrs) {
  var templateUrl = attrs['ngeoPopupTemplateurl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/message/popupcomponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/message/popupcomponent', __webpack_require__(/*! ./popupcomponent.html */ "./src/message/popupcomponent.html"));
}]);

function messagePopopComponent(ngeoPopupTemplateUrl) {
  return {
    restrict: 'A',
    templateUrl: ngeoPopupTemplateUrl,
    link: function link(scope, element, attrs) {
      element.addClass('popover');

      scope.close = function (evt) {
        if (evt) {
          evt.stopPropagation();
          evt.preventDefault();
        }

        element.addClass('hidden');
      };

      scope.$watch('open', function (newVal, oldVal) {
        element.css('display', newVal ? 'block' : 'none');
      });
    }
  };
}

myModule.directive('ngeoPopup', messagePopopComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/message/popupcomponent.html":
/*!*****************************************!*\
  !*** ./src/message/popupcomponent.html ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<h4 class="popover-title ngeo-popup-title">\n  <span ng-bind-html="title"></span>\n  <button type="button" class="close" ng-click="open = false"> &times;</button>\n</h4>\n<div class="popover-body" ng-bind-html="content"></div>\n';

}
return __p
}

/***/ }),

/***/ "./src/misc/AutoProjection.js":
/*!************************************!*\
  !*** ./src/misc/AutoProjection.js ***!
  \************************************/
/*! exports provided: AutoProjectionService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoProjectionService", function() { return AutoProjectionService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");



function AutoProjectionService() {}

AutoProjectionService.prototype.stringToCoordinates = function (str) {
  var coords = str.match(/([\d\.']+)[\s,]+([\d\.']+)/);

  if (coords) {
    var x = parseFloat(coords[1].replace(/'/g, ''));
    var y = parseFloat(coords[2].replace(/'/g, ''));

    if (!isNaN(x) && !isNaN(y)) {
      return [x, y];
    }
  }

  return null;
};

AutoProjectionService.prototype.getProjectionList = function (projectionsCodes) {
  var code, proj;
  var projections = [];
  projectionsCodes.forEach(function (projection) {
    code = projection.toUpperCase();

    if (code.substr(0, 5) != 'EPSG:') {
      code = "EPSG:" + code;
    }

    proj = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["get"](code);

    if (proj !== null) {
      projections.push(proj);
    } else {
      console.error("The projection " + code + " is not defined in ol.proj.");
    }
  });
  return projections;
};

AutoProjectionService.prototype.tryProjections = function (coordinates, extent, viewProjection, opt_projections) {
  var position = null;

  if (opt_projections === undefined) {
    opt_projections = [viewProjection];
  }

  opt_projections.some(function (projection) {
    try {
      position = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["transform"](coordinates, projection, viewProjection);

      if (ol_extent_js__WEBPACK_IMPORTED_MODULE_2__["containsCoordinate"](extent, position)) {
        return true;
      }
    } catch (e) {}

    position = null;
    return false;
  });
  return position;
};

AutoProjectionService.prototype.tryProjectionsWithInversion = function (coordinates, extent, viewProjection, opt_projections) {
  var position = this.tryProjections(coordinates, extent, viewProjection, opt_projections);

  if (position === null) {
    position = this.tryProjections(coordinates.reverse(), extent, viewProjection, opt_projections);
  }

  return position;
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoAutoProjection', []);
myModule.service('ngeoAutoProjection', AutoProjectionService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/EventHelper.js":
/*!*********************************!*\
  !*** ./src/misc/EventHelper.js ***!
  \*********************************/
/*! exports provided: EventHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventHelper", function() { return EventHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");


function EventHelper() {
  this.listenerKeys_ = {};
}

EventHelper.prototype.addListenerKey = function (uid, key) {
  if (!this.listenerKeys_[uid]) {
    this.initListenerKey_(uid);
  }

  this.listenerKeys_[uid].push(key);
};

EventHelper.prototype.clearListenerKey = function (uid) {
  this.initListenerKey_(uid);
};

EventHelper.prototype.initListenerKey_ = function (uid) {
  if (!this.listenerKeys_[uid]) {
    this.listenerKeys_[uid] = [];
  } else {
    if (this.listenerKeys_[uid].length) {
      this.listenerKeys_[uid].forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"]);
      this.listenerKeys_[uid].length = 0;
    }
  }
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoEventHelper', []);
myModule.service('ngeoEventHelper', EventHelper);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/FeatureHelper.js":
/*!***********************************!*\
  !*** ./src/misc/FeatureHelper.js ***!
  \***********************************/
/*! exports provided: FeatureFormatType, ArrowDirections, ArrowPositions, FeatureHelper, getFilteredFeatureValues, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureFormatType", function() { return FeatureFormatType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrowDirections", function() { return ArrowDirections; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrowPositions", function() { return ArrowPositions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureHelper", function() { return FeatureHelper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFilteredFeatureValues", function() { return getFilteredFeatureValues; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/interaction/MeasureAzimut.js */ "./src/interaction/MeasureAzimut.js");
/* harmony import */ var ol_color_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/color.js */ "./node_modules/ol/color.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/geom/MultiLineString.js */ "./node_modules/ol/geom/MultiLineString.js");
/* harmony import */ var ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/geom/MultiPoint.js */ "./node_modules/ol/geom/MultiPoint.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/geom/MultiPolygon.js */ "./node_modules/ol/geom/MultiPolygon.js");
/* harmony import */ var ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/geom/SimpleGeometry.js */ "./node_modules/ol/geom/SimpleGeometry.js");
/* harmony import */ var ol_format_GPX_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/format/GPX.js */ "./node_modules/ol/format/GPX.js");
/* harmony import */ var ol_format_KML_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/format/KML.js */ "./node_modules/ol/format/KML.js");
/* harmony import */ var ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ol/style/Circle.js */ "./node_modules/ol/style/Circle.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ol/style/RegularShape.js */ "./node_modules/ol/style/RegularShape.js");
/* harmony import */ var ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ol/style/Stroke.js */ "./node_modules/ol/style/Stroke.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
/* harmony import */ var ol_style_Text_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ol/style/Text.js */ "./node_modules/ol/style/Text.js");
FeatureHelper.$inject = ["$filter", "ngeoMeasurePrecision", "ngeoMeasureDecimals", "ngeoMeasureSpherical", "ngeoPointfilter", "ngeoDownload"];

























var VertexStyleRegularShapeRadius = 6;
var FeatureFormatType = {
  GPX: 'GPX',
  KML: 'KML'
};
var ArrowDirections = {
  NONE: 'none',
  FORWARDS: 'forwards',
  BACKWARDS: 'backwards',
  BOTH: 'both'
};
var ArrowPositions = {
  FIRST: 'first',
  LAST: 'last',
  EVERY: 'every'
};
function FeatureHelper($filter, ngeoMeasurePrecision, ngeoMeasureDecimals, ngeoMeasureSpherical, ngeoPointfilter, ngeoDownload) {
  this.$filter_ = $filter;
  this.decimals_ = ngeoMeasureDecimals;
  this.precision_ = ngeoMeasurePrecision;
  this.spherical = ngeoMeasureSpherical;
  this.numberFormat_ = $filter('number');
  this.unitPrefixFormat_ = $filter('ngeoUnitPrefix');
  this.ngeoNumberCoordinates_ = $filter('ngeoNumberCoordinates');
  this.pointFilterFn_ = null;
  this.pointFilterArgs_ = [];

  if (ngeoPointfilter) {
    var filterElements = ngeoPointfilter.split(':');
    var filterName = filterElements.shift();
    var filter = this.$filter_(filterName);
    console.assert(typeof filter == 'function');
    this.pointFilterFn_ = filter;
    this.pointFilterArgs_ = filterElements;
  } else {
    this.pointFilterFn_ = null;
  }

  this.projection_ = null;
  this.download_ = ngeoDownload;
}

FeatureHelper.prototype.setProjection = function (projection) {
  this.projection_ = projection;
};

FeatureHelper.prototype.setStyle = function (feature, opt_select) {
  var styles = this.getStyle(feature);

  if (opt_select) {
    if (this.supportsVertex_(feature)) {
      styles.push(this.getVertexStyle());
    }

    styles.unshift(this.getHaloStyle_(feature));
  }

  feature.setStyle(styles);
};

FeatureHelper.prototype.getStyle = function (feature) {
  var type = this.getType(feature);
  var style;

  switch (type) {
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING:
      style = this.getLineStringStyle_(feature);
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POINT:
      style = this.getPointStyle_(feature);
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE:
      style = this.getPolygonStyle_(feature);
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].TEXT:
      style = this.getTextStyle_(feature);
      break;

    default:
      break;
  }

  if (!style) {
    throw new Error('Missing style');
  }

  var styles;

  if (style instanceof Array) {
    styles = style;
  } else {
    styles = [style];
  }

  return styles;
};

FeatureHelper.prototype.getLineStringStyle_ = function (feature) {
  var strokeWidth = this.getStrokeProperty(feature);
  var showLabel = this.getShowLabelProperty(feature);
  var showMeasure = this.getShowMeasureProperty(feature);
  var color = this.getRGBAColorProperty(feature);
  var arrowDirection = this.getArrowDirectionProperty(feature);
  var arrowPosition = this.getArrowPositionProperty(feature);
  var styles = [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
      color: color,
      width: strokeWidth
    })
  })];

  if (arrowDirection !== ArrowDirections.NONE) {
    styles.push.apply(styles, this.getArrowLineStyles_(feature, arrowDirection, arrowPosition, color));
  }

  var textLabelValues = [];

  if (showMeasure) {
    textLabelValues.push(this.getMeasure(feature));
  }

  if (showLabel) {
    textLabelValues.push(this.getNameProperty(feature));
  }

  if (showLabel || showMeasure) {
    var textLabelValue = textLabelValues.join('\n');
    styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
      text: this.createTextStyle_({
        propertyName: '',
        name: '',
        text: textLabelValue
      })
    }));
  }

  return styles;
};

FeatureHelper.prototype.getArrowLineStyles_ = function (feature, arrowDirection, arrowPosition, color) {
  var geometry = feature.getGeometry();
  var arrowStyles = [];

  var addArrowToSegment = function addArrowToSegment(start, end) {
    var dx = end[0] - start[0];
    var dy = end[1] - start[1];
    var rotation = Math.atan2(dy, dx);

    var getArrowStyle = function getArrowStyle(coordinate, invert) {
      return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        geometry: new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"](coordinate),
        text: new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_24__["default"]({
          fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
            color: color
          }),
          font: '900 20px "Font Awesome 5 Free"',
          stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
            width: 1,
            color: color
          }),
          text: "\uF054",
          rotateWithView: true,
          rotation: invert ? Math.PI - rotation : -rotation
        })
      });
    };

    if (arrowDirection === ArrowDirections.FORWARDS || arrowDirection === ArrowDirections.BOTH) {
      arrowStyles.push(getArrowStyle(end, false));
    }

    if (arrowDirection === ArrowDirections.BACKWARDS || arrowDirection === ArrowDirections.BOTH) {
      arrowStyles.push(getArrowStyle(start, true));
    }
  };

  var firstOrLastSegment = null;
  geometry.forEachSegment(function (start, end) {
    if (arrowPosition === ArrowPositions.FIRST) {
      if (firstOrLastSegment === null) {
        firstOrLastSegment = [[].concat(start), [].concat(end)];
      }

      return;
    }

    if (arrowPosition === ArrowPositions.LAST) {
      firstOrLastSegment = [[].concat(start), [].concat(end)];
      return;
    }

    addArrowToSegment(start, end);
  });

  if (firstOrLastSegment) {
    addArrowToSegment(firstOrLastSegment[0], firstOrLastSegment[1]);
  }

  return arrowStyles;
};

FeatureHelper.prototype.getPointStyle_ = function (feature) {
  var size = this.getSizeProperty(feature);
  var color = this.getRGBAColorProperty(feature);
  var showLabel = this.getShowLabelProperty(feature);
  var showMeasure = this.getShowMeasureProperty(feature);
  var styles = [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    image: new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
      radius: size,
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
        color: color
      })
    })
  })];
  var textLabelValues = [];

  if (showMeasure) {
    textLabelValues.push(this.getMeasure(feature));
  }

  if (showLabel) {
    textLabelValues.push(this.getNameProperty(feature));
  }

  if (showLabel || showMeasure) {
    var textLabelValue = textLabelValues.join('\n');
    var font_size = 10;
    var point_to_px = 1.3;
    styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
      text: this.createTextStyle_({
        propertyName: '',
        name: '',
        text: textLabelValue,
        size: font_size,
        offsetY: -(size + font_size / 2 * textLabelValues.length * point_to_px + 4)
      })
    }));
  }

  return styles;
};

FeatureHelper.prototype.optNumber = function (feature, attrib) {
  var value = feature.get(attrib);

  if (value !== undefined) {
    if (typeof value == 'string') {
      return +value;
    } else {
      return value;
    }
  } else {
    return undefined;
  }
};

FeatureHelper.prototype.getNumber = function (feature, attrib) {
  var value = feature.get(attrib);

  if (typeof value == 'string') {
    return +value;
  } else {
    return value;
  }
};

FeatureHelper.prototype.getPolygonStyle_ = function (feature) {
  var strokeWidth = this.getStrokeProperty(feature);
  var opacity = this.getOpacityProperty(feature);
  var color = this.getRGBAColorProperty(feature);
  var showLabel = this.getShowLabelProperty(feature);
  var showMeasure = this.getShowMeasureProperty(feature);
  var fillColor = color.slice();
  fillColor[3] = opacity;
  var azimut = this.optNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].AZIMUT);
  var styles = [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
      color: fillColor
    }),
    stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
      color: color,
      width: strokeWidth
    })
  })];

  if (showMeasure || showLabel) {
    if (showMeasure && azimut !== undefined) {
      if (!this.projection_) {
        throw new Error('Missing projection');
      }

      var line = this.getRadiusLine(feature, azimut);
      var length = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedLength"])(line, this.projection_, this.precision_, this.unitPrefixFormat_);
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        geometry: line,
        fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
          color: fillColor
        }),
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: color,
          width: strokeWidth
        }),
        text: this.createTextStyle_({
          propertyName: '',
          name: '',
          text: length,
          angle: (azimut % 180 + 180) % 180 - 90
        })
      }));
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        geometry: new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"](line.getLastCoordinate()),
        text: this.createTextStyle_({
          propertyName: '',
          name: '',
          text: this.numberFormat_(azimut, this.decimals_) + "\xB0",
          size: 10,
          offsetX: Math.cos((azimut - 90) * Math.PI / 180) * 20,
          offsetY: Math.sin((azimut - 90) * Math.PI / 180) * 20
        })
      }));

      if (showLabel) {
        styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
          text: this.createTextStyle_({
            propertyName: '',
            name: '',
            text: this.getNameProperty(feature),
            offsetY: -8,
            exceedLength: true
          })
        }));
      }
    } else {
      var textLabelValues = [];

      if (showMeasure) {
        textLabelValues.push(this.getMeasure(feature));
      }

      if (showLabel) {
        textLabelValues.push(this.getNameProperty(feature));
      }

      if (showLabel || showMeasure) {
        var textLabelValue = textLabelValues.join('\n');
        styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
          text: this.createTextStyle_({
            propertyName: '',
            name: '',
            text: textLabelValue,
            exceedLength: true
          })
        }));
      }
    }
  }

  return styles;
};

FeatureHelper.prototype.getTextStyle_ = function (feature) {
  return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    text: this.createTextStyle_({
      propertyName: '',
      name: '',
      rotateWithView: true,
      text: this.getNameProperty(feature),
      size: this.getSizeProperty(feature),
      angle: this.getAngleProperty(feature),
      color: this.getRGBAColorProperty(feature),
      width: this.getStrokeProperty(feature)
    })
  });
};

FeatureHelper.prototype.createEditingStyles = function (feature) {
  var white = [255, 255, 255, 1];
  var blue = [0, 153, 255, 1];
  var width = 3;
  var styles = [];
  var geom = feature.getGeometry();

  if (!geom) {
    throw new Error('Missing geom');
  }

  var type = geom.getType();

  if (type === 'Point') {
    styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
      image: new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
        radius: width * 2,
        fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
          color: blue
        }),
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: white,
          width: width / 2
        })
      }),
      zIndex: Infinity
    }));
  } else {
    if (type === 'LineString') {
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: white,
          width: width + 2
        })
      }));
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: blue,
          width: width
        })
      }));
    } else {
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: blue,
          width: width / 2
        }),
        fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
          color: [255, 255, 255, 0.5]
        })
      }));
    }

    styles.push(this.getVertexStyle(true));
  }

  return styles;
};

FeatureHelper.prototype.getVertexInfoAtCoordinate = function (feature, coordinate, resolution) {
  var info = null;

  if (this.supportsVertexRemoval_(feature)) {
    var buffer = resolution * VertexStyleRegularShapeRadius;
    var coordinates = null;
    var coordinatess = null;
    var coordinatesss = null;
    var minNumCoordinates = -1;
    var geometry = feature.getGeometry();

    if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
      coordinates = geometry.getCoordinates();
      minNumCoordinates = 2;
    } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
      coordinatess = geometry.getCoordinates();
      minNumCoordinates = 4;
    } else if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
      coordinatess = geometry.getCoordinates();
      minNumCoordinates = 2;
    } else if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
      coordinatesss = geometry.getCoordinates();
      minNumCoordinates = 4;
    }

    if (coordinates) {
      var index = this.getCoordinateIndexThatHitsAt_(coordinates, coordinate, minNumCoordinates, buffer);

      if (index !== -1) {
        info = [index];
      }
    } else if (coordinatess) {
      var ii = coordinatess.length;

      for (var i = 0; i < ii; i++) {
        var _index = this.getCoordinateIndexThatHitsAt_(coordinatess[i], coordinate, minNumCoordinates, buffer);

        if (_index !== -1) {
          info = [i, _index];
          break;
        }
      }
    } else if (coordinatesss) {
      var _ii = coordinatesss.length;

      for (var _i = 0; _i < _ii; _i++) {
        var _coordinatess = coordinatesss[_i];
        var jj = _coordinatess.length;

        for (var j = 0; j < jj; j++) {
          var _index2 = this.getCoordinateIndexThatHitsAt_(_coordinatess[j], coordinate, minNumCoordinates, buffer);

          if (_index2 !== -1) {
            info = [_i, j, _index2];
            break;
          }
        }

        if (info) {
          break;
        }
      }
    }
  }

  return info;
};

FeatureHelper.prototype.getCoordinateIndexThatHitsAt_ = function (coordinates, coordinate, min, buffer) {
  var index = -1;
  var ii = coordinates.length;

  if (ii > min) {
    for (var i = 0; i < ii; i++) {
      var hits = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["containsCoordinate"](ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["buffer"](ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["createOrUpdateFromCoordinate"](coordinates[i]), buffer), coordinate);

      if (hits) {
        index = i;
        break;
      }
    }
  }

  return index;
};

FeatureHelper.prototype.getVertexStyle = function (opt_incGeomFunc) {
  var incGeomFunc = opt_incGeomFunc !== undefined ? opt_incGeomFunc : true;
  var options = {
    image: new ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_21__["default"]({
      radius: VertexStyleRegularShapeRadius,
      points: 4,
      angle: Math.PI / 4,
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
        color: [255, 255, 255, 0.5]
      }),
      stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
        color: [0, 0, 0, 1]
      })
    })
  };

  if (incGeomFunc) {
    options.geometry = function (feature) {
      var geom = feature.getGeometry();

      if (!(geom instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_16__["default"])) {
        return;
      }

      if (geom.getType() == 'Point') {
        return;
      }

      var innerMultiCoordinates;
      var multiCoordinates = [];
      var coordinates = [];

      if (geom instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
        coordinates = geom.getCoordinates();
      } else if (geom instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
        multiCoordinates = geom.getCoordinates();
      } else if (geom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
        coordinates = geom.getCoordinates()[0];
      } else if (geom instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
        innerMultiCoordinates = geom.getCoordinates();
      }

      if (innerMultiCoordinates) {
        for (var i = 0, ii = innerMultiCoordinates.length; i < ii; i++) {
          multiCoordinates = multiCoordinates.concat(innerMultiCoordinates[i]);
        }
      }

      for (var _i2 = 0, _ii2 = multiCoordinates.length; _i2 < _ii2; _i2++) {
        coordinates = coordinates.concat(multiCoordinates[_i2]);
      }

      if (coordinates.length) {
        return new ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__["default"](coordinates);
      } else {
        return geom;
      }
    };
  }

  return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"](options);
};

FeatureHelper.prototype.removeVertex = function (feature, vertexInfo) {
  var deleted = false;
  var geometry = feature.getGeometry();

  if (!(geometry instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_16__["default"])) {
    throw new Error('Wrong geometry type');
  }

  if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    var coordinates = geometry.getCoordinates();
    var index = vertexInfo[0];

    if (coordinates.length > 2) {
      coordinates.splice(index, 1);
      deleted = true;
    }

    if (deleted) {
      geometry.setCoordinates(coordinates);
    }
  } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
    var _coordinates = geometry.getCoordinates();

    var indexOne = vertexInfo[0];
    var indexTwo = vertexInfo[1];
    var component = _coordinates[indexOne];

    if (component.length > 4) {
      component.splice(indexTwo, 1);
      deleted = true;

      if (indexTwo === 0) {
        component.pop();
        component.push(component[0]);
      }
    }

    if (deleted) {
      geometry.setCoordinates(_coordinates);
    }
  } else if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    var _coordinates2 = geometry.getCoordinates();

    var _indexOne = vertexInfo[0];
    var _indexTwo = vertexInfo[1];
    var _component = _coordinates2[_indexOne];

    if (_component.length > 2) {
      _component.splice(_indexTwo, 1);

      deleted = true;
    }

    if (deleted) {
      geometry.setCoordinates(_coordinates2);
    }
  } else if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
    var _coordinates3 = geometry.getCoordinates();

    var _indexOne2 = vertexInfo[0];
    var _indexTwo2 = vertexInfo[1];
    var indexThree = vertexInfo[2];
    var _component2 = _coordinates3[_indexOne2][_indexTwo2];

    if (_component2.length > 4) {
      _component2.splice(indexThree, 1);

      deleted = true;

      if (indexThree === 0) {
        _component2.pop();

        _component2.push(_component2[0]);
      }
    }

    if (deleted) {
      geometry.setCoordinates(_coordinates3);
    }
  }
};

FeatureHelper.prototype.supportsVertex_ = function (feature) {
  var supported = [ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE];
  var type = this.getType(feature);
  return supported.includes(type);
};

FeatureHelper.prototype.supportsVertexRemoval_ = function (feature) {
  var supported = [ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON];
  var type = this.getType(feature);
  return supported.includes(type);
};

FeatureHelper.prototype.getHaloStyle_ = function (feature) {
  var type = this.getType(feature);
  var style;
  var haloSize = 3;

  switch (type) {
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POINT:
      var size = this.getSizeProperty(feature);
      style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        image: new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
          radius: size + haloSize,
          fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
            color: [255, 255, 255, 1]
          })
        })
      });
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE:
      var strokeWidth = this.getStrokeProperty(feature);
      style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: [255, 255, 255, 1],
          width: strokeWidth + haloSize * 2
        })
      });
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].TEXT:
      style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        text: this.createTextStyle_({
          propertyName: '',
          name: '',
          rotateWithView: true,
          text: this.getNameProperty(feature),
          size: this.getSizeProperty(feature),
          angle: this.getAngleProperty(feature),
          width: haloSize * 3
        })
      });
      break;

    default:
      break;
  }

  if (!style) {
    throw new Error('Missing style');
  }

  return style;
};

function getFilteredFeatureValues(feature) {
  var properties = feature.getProperties();
  delete properties.boundedBy;
  delete properties[feature.getGeometryName()];
  delete properties.ngeo_feature_type_;

  for (var key in properties) {
    var value = properties[key];

    if (typeof value == 'object') {
      if (value['xsi:nil'] == 'true') {
        properties[key] = undefined;
      } else if (value['_content_']) {
        properties[key] = value['_content_'];
      }
    }
  }

  return properties;
}

FeatureHelper.prototype.getAngleProperty = function (feature) {
  var angle = +feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ANGLE);
  console.assert(typeof angle == 'number');
  return angle;
};

FeatureHelper.prototype.getColorProperty = function (feature) {
  var color = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].COLOR);
  return color;
};

FeatureHelper.prototype.getRGBAColorProperty = function (feature) {
  var color = this.getColorProperty(feature);

  if (typeof color != 'string') {
    return null;
  }

  return Object(ol_color_js__WEBPACK_IMPORTED_MODULE_7__["fromString"])(color);
};

FeatureHelper.prototype.getNameProperty = function (feature) {
  var name = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].NAME);
  console.assert(typeof name == 'string');
  return name;
};

FeatureHelper.prototype.getOpacityProperty = function (feature) {
  return this.getNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].OPACITY);
};

FeatureHelper.prototype.getShowMeasureProperty = function (feature) {
  var showMeasure = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].SHOW_MEASURE);

  if (showMeasure === undefined) {
    showMeasure = false;
  } else if (typeof showMeasure === 'string') {
    showMeasure = showMeasure === 'true' ? true : false;
  }

  return showMeasure;
};

FeatureHelper.prototype.getShowLabelProperty = function (feature) {
  var showLabel = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].SHOW_LABEL);

  if (showLabel === undefined) {
    showLabel = false;
  } else if (typeof showLabel === 'string') {
    showLabel = showLabel === 'true' ? true : false;
  }

  return showLabel;
};

FeatureHelper.prototype.getShowArrowsProperty = function (feature) {
  var arrowDirection = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ARROW_DIRECTION);
  return arrowDirection !== undefined && arrowDirection !== ArrowDirections.NONE;
};

FeatureHelper.prototype.getSizeProperty = function (feature) {
  return this.getNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].SIZE);
};

FeatureHelper.prototype.getStrokeProperty = function (feature) {
  return this.getNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].STROKE);
};

FeatureHelper.prototype.getArrowDirectionProperty = function (feature) {
  var arrowDirection = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ARROW_DIRECTION);

  if (Object.values(ArrowDirections).includes(arrowDirection)) {
    return arrowDirection;
  }

  return ArrowDirections.NONE;
};

FeatureHelper.prototype.getArrowPositionProperty = function (feature) {
  var arrowPosition = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ARROW_POSITION);

  if (Object.values(ArrowPositions).includes(arrowPosition)) {
    return arrowPosition;
  }

  return ArrowPositions.FIRST;
};

FeatureHelper.prototype.export = function (features, formatType) {
  switch (formatType) {
    case FeatureFormatType.GPX:
      this.exportGPX(features);
      break;

    case FeatureFormatType.KML:
      this.exportKML(features);
      break;

    default:
      break;
  }
};

FeatureHelper.prototype.exportGPX = function (features) {
  var format = new ol_format_GPX_js__WEBPACK_IMPORTED_MODULE_17__["default"]();
  var mimeType = 'application/gpx+xml';
  var fileName = 'export.gpx';
  this.export_(features, format, fileName, mimeType);
};

FeatureHelper.prototype.exportKML = function (features) {
  var format = new ol_format_KML_js__WEBPACK_IMPORTED_MODULE_18__["default"]();
  var mimeType = 'application/vnd.google-earth.kml+xml';
  var fileName = 'export.kml';
  this.export_(features, format, fileName, mimeType);
};

FeatureHelper.prototype.export_ = function (features, format, fileName, opt_mimeType) {
  var _this = this;

  var mimeType = opt_mimeType !== undefined ? opt_mimeType : 'text/plain';
  var clones = [];
  var clone;
  features.forEach(function (feature) {
    clone = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_9__["default"](feature.getProperties());

    _this.setStyle(clone, false);

    clones.push(clone);
  });
  var writeOptions = this.projection_ ? {
    dataProjection: 'EPSG:4326',
    featureProjection: this.projection_
  } : {};
  var data = format.writeFeatures(clones, writeOptions);
  this.download_(data, fileName, mimeType + ";charset=utf-8");
};

FeatureHelper.prototype.createTextStyle_ = function (options) {
  var text_options = options;

  if (options.angle) {
    var angle = options.angle !== undefined ? options.angle : 0;
    var rotation = angle * Math.PI / 180;
    text_options.rotation = rotation;
    delete options.angle;
  }

  text_options.font = ['normal', (options.size || 10) + "pt", 'Arial'].join(' ');

  if (options.color) {
    text_options.fill = new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
      color: options.color || [0, 0, 0, 1]
    });
    delete options.color;
  }

  text_options.stroke = new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
    color: [255, 255, 255, 1],
    width: options.width || 3
  });
  delete options.width;
  return new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_24__["default"](text_options);
};

FeatureHelper.prototype.getMeasure = function (feature) {
  if (!this.projection_) {
    throw new Error('Missing projection');
  }

  var geometry = feature.getGeometry();

  if (!geometry) {
    throw new Error('Missing geometry');
  }

  var measure = '';

  if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
    if (this.getType(feature) === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE) {
      var azimut = this.optNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].AZIMUT);

      if (typeof azimut != 'number') {
        throw new Error('Missing azimut');
      }

      var line = this.getRadiusLine(feature, azimut);
      measure = Object(ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_6__["getFormattedAzimutRadius"])(line, this.projection_, this.decimals_, this.precision_, this.unitPrefixFormat_, this.numberFormat_);
    } else {
      measure = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedArea"])(geometry, this.projection_, this.precision_, this.unitPrefixFormat_, this.spherical);
    }
  } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    measure = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedLength"])(geometry, this.projection_, this.precision_, this.unitPrefixFormat_, this.spherical);
  } else if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
    if (this.pointFilterFn_ === null) {
      measure = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedPoint"])(geometry, this.decimals_, this.ngeoNumberCoordinates_);
    } else {
      var coordinates = geometry.getCoordinates();

      if (this.pointFilterArgs_.length > 1) {
        measure = this.pointFilterFn_(coordinates, this.pointFilterArgs_[0], this.pointFilterArgs_[1]).join(', ');
      } else {
        measure = this.pointFilterFn_(coordinates, this.pointFilterArgs_[0]).join(', ');
      }
    }
  }

  return measure;
};

FeatureHelper.prototype.getType = function (feature) {
  var geometry = feature.getGeometry();
  console.assert(geometry, 'Geometry should be thruthy');
  var type;

  if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
    if (feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].IS_TEXT)) {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].TEXT;
    } else {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POINT;
    }
  } else if (geometry instanceof ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POINT;
  } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
    if (feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].IS_CIRCLE)) {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE;
    } else if (feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].IS_RECTANGLE)) {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE;
    } else {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON;
    }
  } else if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POLYGON;
  } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING;
  } else if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_LINE_STRING;
  }

  if (!type) {
    throw new Error('Missing type');
  }

  return type;
};

FeatureHelper.prototype.fitMapToFeature = function (feature, map, opt_duration) {
  var duration = opt_duration !== undefined ? opt_duration : 250;
  var size = map.getSize();

  if (!Array.isArray(size)) {
    throw new Error('Missing size');
  }

  var view = map.getView();
  var viewExtent = view.calculateExtent(size);
  var geometry = feature.getGeometry();

  if (!geometry) {
    throw new Error('Missing geometry');
  }

  var geomIsVisible = geometry.intersectsExtent(viewExtent);
  var mapCenter = view.getCenter();

  if (!Array.isArray(mapCenter)) {
    throw new Error('Missing mapCenter');
  }

  var featureExtent = geometry.getExtent();

  if (geomIsVisible) {
    if (!(geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"])) {
      var featureResolution = view.getResolutionForExtent(featureExtent);
      var featureZoomTmp = view.getZoomForResolution(featureResolution);

      if (!featureZoomTmp) {
        throw new Error('Missing featureZoom');
      }

      var featureZoom = Math.floor(featureZoomTmp);
      var zoom = view.getZoom();

      if (!zoom) {
        throw new Error('Missing zoom');
      }

      if (featureZoom < zoom) {
        view.animate({
          center: mapCenter,
          duration: duration
        }, {
          center: mapCenter,
          duration: duration,
          zoom: featureZoom
        });
      }
    }
  } else {
    var featureExtentHeight = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getHeight"](featureExtent);
    var featureExtentWidth = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getWidth"](featureExtent);
    var viewExtentHeight = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getHeight"](viewExtent);
    var viewExtentWidth = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getWidth"](viewExtent);
    var geomFitsInExtent = viewExtentHeight >= featureExtentHeight && viewExtentWidth >= featureExtentWidth;

    if (geomFitsInExtent) {
      var featureCenter;

      if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
        featureCenter = geometry.getCoordinateAt(0.5);
      } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
        featureCenter = geometry.getInteriorPoint().getCoordinates();
      } else if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
        featureCenter = geometry.getCoordinates();
      } else {
        featureCenter = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getCenter"](geometry.getExtent());
      }

      view.animate({
        center: mapCenter,
        duration: duration
      }, {
        center: featureCenter,
        duration: duration
      });
    } else {
      view.fit(featureExtent, {
        duration: duration,
        size: size
      });
    }
  }
};

FeatureHelper.prototype.getRadiusLine = function (feature, azimut) {
  var geometry = feature.getGeometry();

  if (!geometry) {
    throw new Error('Missing geometry');
  }

  var extent = geometry.getExtent();
  var radius = (extent[3] - extent[1]) / 2;
  var center = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getCenter"](geometry.getExtent());
  var x = Math.cos((azimut - 90) * Math.PI / 180) * radius;
  var y = -Math.sin((azimut - 90) * Math.PI / 180) * radius;
  var endPoint = [x + center[0], y + center[1]];
  return new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]([center, endPoint]);
};

FeatureHelper.prototype.getNonSpatialProperties = function (feature) {
  var geometryName = feature.getGeometryName();
  var nonSpatialProperties = {};
  var properties = feature.getProperties();

  for (var key in properties) {
    if (key !== geometryName) {
      nonSpatialProperties[key] = properties[key];
    }
  }

  return nonSpatialProperties;
};

FeatureHelper.prototype.clearNonSpatialProperties = function (feature) {
  var geometryName = feature.getGeometryName();
  var properties = feature.getProperties();

  for (var key in properties) {
    if (key !== geometryName) {
      feature.set(key, undefined);
    }
  }
};

FeatureHelper.prototype.findFeatureIndexByFid = function (features, fid) {
  var index = -1;

  for (var i = 0, ii = features.length; i < ii; i++) {
    if (features[i].getId() == fid) {
      index = i;
      break;
    }
  }

  return index;
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatureHelper', [ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('ngeoFeatureHelper', FeatureHelper);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/File.js":
/*!**************************!*\
  !*** ./src/misc/File.js ***!
  \**************************/
/*! exports provided: FileService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileService", function() { return FileService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
FileService.$inject = ["$q", "$http", "gettext"];

function FileService($q, $http, gettext) {
  this.isValidFileSize = function (fileSize) {
    return fileSize <= 20000000;
  };

  this.isWmsGetCap = function (fileContent) {
    return /<(WMT_MS_Capabilities|WMS_Capabilities)/.test(fileContent);
  };

  this.isWmtsGetCap = function (fileContent) {
    return fileContent.includes('<Capabilities');
  };

  this.isKml = function (fileContent) {
    return fileContent.includes('<kml') && fileContent.includes('</kml>');
  };

  this.isGpx = function (fileContent) {
    return fileContent.includes('<gpx') && fileContent.includes('</gpx>');
  };

  var fileReader = null;

  this.read = function (file) {
    var defer = $q.defer();

    if (fileReader && fileReader.readyState === FileReader.LOADING) {
      fileReader.abort();
    }

    fileReader = new FileReader();

    fileReader.onload = function (evt) {
      var target = evt.target;

      if (!(target instanceof FileReader)) {
        throw new Error('Wrong target type');
      }

      defer.resolve(target.result);
    };

    fileReader.onerror = function (evt) {
      var target = evt.target;

      if (!(target instanceof FileReader)) {
        throw new Error('Wrong target type');
      }

      var err = target.error;

      if (!err) {
        throw new Error('Missing error');
      }

      console.error('Reading file failed: ', err);
      defer.reject({
        'message': err.code == 20 ? gettext('Operation canceled') : gettext('Read failed'),
        'reason': err.message
      });
    };

    fileReader.onprogress = function (evt) {
      defer.notify(evt);
    };

    fileReader.readAsText(file);
    return defer.promise;
  };

  var canceler;

  this.load = function (url, opt_cancelP) {
    if (canceler) {
      canceler.resolve();
    }

    canceler = opt_cancelP || $q.defer();
    var defer = $q.defer();
    $http.get(url, {
      timeout: canceler.promise
    }).then(function (response) {
      defer.resolve(response.data);
    }, function (reason) {
      console.error('Uploading file failed: ', reason);
      defer.reject({
        'message': gettext('Upload failed'),
        'reason': reason
      });
    });
    return defer.promise;
  };
}
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFile', []);
myModule.service('ngeoFile', FileService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/Time.js":
/*!**************************!*\
  !*** ./src/misc/Time.js ***!
  \**************************/
/*! exports provided: Time, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Time", function() { return Time; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

function Time() {}

Time.prototype.createDate = function (value, defaultValue) {
  if (defaultValue === void 0) {
    defaultValue = null;
  }

  return value !== null && value != undefined ? new Date(value) : defaultValue;
};

Time.prototype.getTime = function (date, defaultValue) {
  if (defaultValue === void 0) {
    defaultValue = null;
  }

  return date ? date.getTime() : defaultValue;
};

Time.prototype.getOptions = function (time) {
  var minDate = this.createDate(time.minValue);
  var maxDate = this.createDate(time.maxValue);
  var minDefaultDate = this.createDate(time.minDefValue, minDate);
  var maxDefaultDate = this.createDate(time.maxDefValue, maxDate);

  if (!minDefaultDate) {
    throw new Error('Missing minDefaultDate');
  }

  if (!maxDefaultDate) {
    throw new Error('Missing maxDefaultDate');
  }

  var minTime = this.getTime(minDate);
  var maxTime = this.getTime(maxDate);
  var minDefaultTime = this.getTime(minDefaultDate);
  var maxDefaultTime = this.getTime(maxDefaultDate);

  if (!minDefaultTime) {
    throw new Error('Missing minDefaultTime');
  }

  var defaultValues = minDefaultTime;

  if (time.mode === 'range') {
    if (!maxDefaultTime) {
      throw new Error('Missing maxDefaultTime');
    }

    defaultValues = [minDefaultTime, maxDefaultTime];
  }

  return {
    minDate: minTime,
    maxDate: maxTime,
    values: defaultValues
  };
};

Time.prototype.getUTCDate = function (localDate) {
  return new Date(localDate.getUTCFullYear(), localDate.getUTCMonth(), localDate.getUTCDate());
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoTime', []);
myModule.service('ngeoTime', Time);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/ToolActivate.js":
/*!**********************************!*\
  !*** ./src/misc/ToolActivate.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (toolContext, activePropertyName) {
  this.getActive = function () {
    return toolContext[activePropertyName];
  };

  this.setActive = function (newVal) {
    toolContext[activePropertyName] = newVal;
  };
});

/***/ }),

/***/ "./src/misc/ToolActivateMgr.js":
/*!*************************************!*\
  !*** ./src/misc/ToolActivateMgr.js ***!
  \*************************************/
/*! exports provided: ToolActivateMgr, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolActivateMgr", function() { return ToolActivateMgr; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
ToolActivateMgr.$inject = ["$rootScope"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


function ToolActivateMgr($rootScope) {
  this.groups_ = {};
  this.scope_ = $rootScope;
}

ToolActivateMgr.prototype.registerTool = function (groupName, tool, opt_defaultActivate) {
  var _this = this;

  if (!this.groups_[groupName]) {
    this.groups_[groupName] = [];
  }

  var unlisten = this.scope_.$watch(tool.getActive, function (newVal, oldVal) {
    if (newVal === oldVal) {
      return;
    }

    if (newVal) {
      _this.deactivateTools_(groupName, tool);
    } else {
      _this.activateDefault_(groupName);
    }
  });
  this.groups_[groupName].push({
    tool: tool,
    defaultTool: opt_defaultActivate || false,
    unlisten: unlisten
  });
};

ToolActivateMgr.prototype.unregisterTool = function (groupName, tool) {
  var entries = this.groups_[groupName];

  if (entries) {
    for (var i = 0; i < entries.length; i++) {
      if (entries[i].tool == tool) {
        entries[i].unlisten();
        entries.splice(i, 1);
        break;
      }
    }
  }
};

ToolActivateMgr.prototype.unregisterGroup = function (groupName) {
  var entries = this.groups_[groupName];

  if (entries) {
    for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {
      var entry = _step.value;
      entry.unlisten();
    }

    delete this.groups_[groupName];
  }
};

ToolActivateMgr.prototype.activateTool = function (tool) {
  tool.setActive(true);
};

ToolActivateMgr.prototype.deactivateTool = function (tool) {
  tool.setActive(false);
};

ToolActivateMgr.prototype.deactivateTools_ = function (groupName, tool) {
  var entries = this.groups_[groupName];

  for (var _iterator2 = _createForOfIteratorHelperLoose(entries), _step2; !(_step2 = _iterator2()).done;) {
    var entry = _step2.value;

    if (tool != entry.tool) {
      entry.tool.setActive(false);
    }
  }
};

ToolActivateMgr.prototype.activateDefault_ = function (groupName) {
  var entries = this.groups_[groupName];
  var defaultTool = null;
  var hasActiveTool = false;

  for (var _iterator3 = _createForOfIteratorHelperLoose(entries), _step3; !(_step3 = _iterator3()).done;) {
    var entry = _step3.value;
    hasActiveTool = hasActiveTool || entry.tool.getActive();

    if (entry.defaultTool) {
      defaultTool = entry.tool;
    }
  }

  if (!hasActiveTool && defaultTool !== null) {
    defaultTool.setActive(true);
  }
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoToolActivateMgr', []);
myModule.service('ngeoToolActivateMgr', ToolActivateMgr);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/WMSTime.js":
/*!*****************************!*\
  !*** ./src/misc/WMSTime.js ***!
  \*****************************/
/*! exports provided: WMSTime, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WMSTime", function() { return WMSTime; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/Time.js */ "./src/misc/Time.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }



var WMSTime = function (_Time) {
  WMSTime.$inject = ["$filter", "gettextCatalog"];

  _inheritsLoose(WMSTime, _Time);

  function WMSTime($filter, gettextCatalog) {
    var _this;

    _this = _Time.call(this) || this;
    _this.$filter_ = $filter;
    _this.gettextCatalog_ = gettextCatalog;
    return _this;
  }

  var _proto = WMSTime.prototype;

  _proto.formatTimeValue = function formatTimeValue(time, resolution, opt_useISOFormat, opt_toUTC) {
    var date = new Date(time);
    var utc = opt_toUTC ? 'UTC' : undefined;
    var yearResolution = 'yyyy';
    var monthResolution = 'yyyy-MM';
    var dayResolution = 'yyyy-MM-dd';
    var secondResolution = null;

    if (!opt_useISOFormat) {
      var gettextCatalog = this.gettextCatalog_;
      yearResolution = gettextCatalog.getString('yyyy');
      monthResolution = gettextCatalog.getString('M/yyyy');
      dayResolution = gettextCatalog.getString('M/d/yyyy');
      secondResolution = gettextCatalog.getString('M/d/yyyy HH:MM:ss');
    }

    switch (resolution) {
      case 'year':
        return this.$filter_('date')(date, yearResolution, utc);

      case 'month':
        return this.$filter_('date')(date, monthResolution, utc);

      case 'day':
        return this.$filter_('date')(date, dayResolution, utc);

      case 'second':
        if (secondResolution) {
          return this.$filter_('date')(date, secondResolution, utc);
        } else {
          return date.toISOString().replace(/\.\d{3}/, '');
        }

      default:
        return date.toISOString().replace(/\.\d{3}/, '');
    }
  };

  _proto.formatWMSTimeParam = function formatWMSTimeParam(wmsTimeProperty, times, opt_toUTC) {
    console.assert(wmsTimeProperty.resolution !== undefined);

    if (wmsTimeProperty.mode === 'range') {
      console.assert(times.end !== undefined);
      return this.formatTimeValue(times.start, wmsTimeProperty.resolution, true, opt_toUTC) + "/" + this.formatTimeValue(times.end, wmsTimeProperty.resolution, true, opt_toUTC);
    } else {
      return this.formatTimeValue(times.start, wmsTimeProperty.resolution, true, opt_toUTC);
    }
  };

  return WMSTime;
}(ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__["Time"]);
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoWMSTime', [ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('ngeoWMSTime', WMSTime);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/btnComponent.js":
/*!**********************************!*\
  !*** ./src/misc/btnComponent.js ***!
  \**********************************/
/*! exports provided: BtnGroupController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BtnGroupController", function() { return BtnGroupController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
buttonComponent.$inject = ["$parse"];
buttonGroupComponent.$inject = ["$parse"];

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoBtnComponent', []);

function buttonGroupComponent($parse) {
  return {
    restrict: 'A',
    controller: 'ngeoBtnGroupController',
    link: function link(scope, element, attrs, controller) {
      if (!controller) {
        throw new Error('Missing controller');
      }

      var setActive = $parse(attrs.ngeoBtnGroupActive).assign;

      if (setActive) {
        scope.$watch(function () {
          return controller.buttons_.some(function (buttonModel) {
            return buttonModel(scope) === true;
          });
        }, function (newValue) {
          setActive(scope, newValue);
        });
      }
    }
  };
}

myModule.directive('ngeoBtnGroup', buttonGroupComponent);
var BtnGroupController = function () {
  BtnGroupController.$inject = ["$scope"];

  function BtnGroupController($scope) {
    this.buttons_ = [];
    this.scope_ = $scope;
  }

  var _proto = BtnGroupController.prototype;

  _proto.activate = function activate(index) {
    var _this = this;

    this.buttons_.forEach(function (expressionFn, i) {
      if (i != index) {
        expressionFn.assign(_this.scope_, false);
      }
    });
  };

  _proto.addButton = function addButton(expressionFn) {
    this.buttons_.push(expressionFn);
    return this.buttons_.length - 1;
  };

  return BtnGroupController;
}();
myModule.controller('ngeoBtnGroupController', BtnGroupController);

function buttonComponent($parse) {
  return {
    require: ['?^ngeoBtnGroup', 'ngModel'],
    restrict: 'A',
    link: function link(scope, element, attrs, ctrls) {
      if (!ctrls) {
        throw new Error('Missing ctrls');
      }

      var buttonsCtrl = ctrls[0];
      var ngModelCtrl = ctrls[1];
      var indexInGroup = -1;
      var ngModelGet = $parse(attrs.ngModel);
      var ngModelSet = ngModelGet.assign;

      if (ngModelGet(scope) === undefined) {
        ngModelSet(scope, false);
      }

      if (buttonsCtrl !== null) {
        indexInGroup = buttonsCtrl.addButton(ngModelGet);
      }

      element.on('click', function () {
        scope.$apply(function () {
          ngModelCtrl.$setViewValue(!ngModelCtrl.$viewValue);
          ngModelCtrl.$render();
        });
      });

      ngModelCtrl.$render = function () {
        if (ngModelCtrl.$viewValue && buttonsCtrl !== null) {
          buttonsCtrl.activate(indexInGroup);
        }

        element.toggleClass('active', ngModelCtrl.$viewValue);
      };
    }
  };
}

myModule.directive('ngeoBtn', buttonComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/colorpickerComponent.html":
/*!********************************************!*\
  !*** ./src/misc/colorpickerComponent.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="ngeo-colorpicker-palette">\n  <tr ng-repeat="colors in ::ctrl.colors">\n    <td\n      ng-repeat="color in ::colors"\n      ng-click="ctrl.setColor(color)"\n      ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}">\n      <div ng-style="::{\'background-color\': color}"></div>\n    </td>\n  </tr>\n</table>\n';

}
return __p
}

/***/ }),

/***/ "./src/misc/colorpickerComponent.js":
/*!******************************************!*\
  !*** ./src/misc/colorpickerComponent.js ***!
  \******************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
colorPickerComponent.$inject = ["ngeoColorpickerTemplateUrl"];

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoColorpicker', []);
myModule.value('ngeoColorpickerTemplateUrl', function (element, attrs) {
  var templateUrl = attrs['ngeoColorpickerTemplateurl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/misc/colorpickerComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/misc/colorpickerComponent', __webpack_require__(/*! ./colorpickerComponent.html */ "./src/misc/colorpickerComponent.html"));
}]);

function colorPickerComponent(ngeoColorpickerTemplateUrl) {
  return {
    restrict: 'A',
    scope: {
      colors: '<?ngeoColorpicker',
      color: '=?ngeoColorpickerColor'
    },
    controller: 'NgeoColorpickerController as ctrl',
    bindToController: true,
    templateUrl: ngeoColorpickerTemplateUrl
  };
}

myModule.directive('ngeoColorpicker', colorPickerComponent);
var DEFAULT_COLORS = [['#F4EB37', '#CDDC39', '#62AF44', '#009D57', '#0BA9CC', '#4186F0', '#3F5BA9', '#7C3592', '#A61B4A', '#DB4436', '#F8971B', '#F4B400', '#795046'], ['#F9F7A6', '#E6EEA3', '#B7DBAB', '#7CCFA9', '#93D7E8', '#9FC3FF', '#A7B5D7', '#C6A4CF', '#D698AD', '#EE9C96', '#FAD199', '#FFDD5E', '#B29189'], ['#ffffff', '#CCCCCC', '#777', '#000000']];
function Controller() {
  this.colors = this.colors || DEFAULT_COLORS;
  this.color;
}

Controller.prototype.setColor = function (color) {
  this.color = color;
};

myModule.controller('NgeoColorpickerController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/controlComponent.js":
/*!**************************************!*\
  !*** ./src/misc/controlComponent.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_control_Control_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/control/Control.js */ "./node_modules/ol/control/Control.js");



var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoControl', []);

function controlComponent() {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var control = scope.$eval(attrs['ngeoControl']);
      console.assert(control instanceof ol_control_Control_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
      var map = scope.$eval(attrs['ngeoControlMap']);
      console.assert(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
      control.setTarget(element[0]);
      map.addControl(control);
    }
  };
}

myModule.directive('ngeoControl', controlComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/datepickerComponent.html":
/*!*******************************************!*\
  !*** ./src/misc/datepickerComponent.html ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="ngeo-datepicker">\n  <form name="dateForm" class="ngeo-datepicker-form" novalidate>\n    <div ng-if="::datepickerCtrl.time.widget === \'datepicker\'">\n      <div class="ngeo-datepicker-start-date">\n        <span ng-if="::datepickerCtrl.time.mode === \'range\'" translate>From:</span>\n        <span ng-if="::datepickerCtrl.time.mode !== \'range\'" translate>Date:</span>\n        <input name="sdate" ui-date="datepickerCtrl.sdateOptions" ng-model="datepickerCtrl.sdate" required=""/>\n      </div>\n      <div\n        class="ngeo-datepicker-end-date"\n        ng-if="::datepickerCtrl.time.mode === \'range\'">\n        <span translate>To:</span>\n        <input name="edate" ui-date="datepickerCtrl.edateOptions" ng-model="datepickerCtrl.edate" required=""/>\n      </div>\n    </div>\n  </form>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/misc/datepickerComponent.js":
/*!*****************************************!*\
  !*** ./src/misc/datepickerComponent.js ***!
  \*****************************************/
/*! exports provided: Controller, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/Time.js */ "./src/misc/Time.js");
/* harmony import */ var angular_ui_date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular-ui-date */ "./node_modules/angular-ui-date/dist/date.js");
/* harmony import */ var angular_ui_date__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(angular_ui_date__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_fr_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-fr.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-fr.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_fr_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_fr_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_en_GB_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-en-GB.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-en-GB.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_en_GB_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_en_GB_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_de_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-de.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-de.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_de_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_de_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_it_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-it.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-it.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_it_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_it_js__WEBPACK_IMPORTED_MODULE_7__);
Controller.$inject = ["$scope", "ngeoTime", "gettextCatalog"];
datePickerComponent.$inject = ["ngeoDatePickerTemplateUrl", "$timeout"];








var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDatePicker', [ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, 'ui.date']);
myModule.value('ngeoDatePickerTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.ngeoDatePickerTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/misc/datepickerComponent';
});
myModule.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/misc/datepickerComponent', __webpack_require__(/*! ./datepickerComponent.html */ "./src/misc/datepickerComponent.html"));
}]);

function datePickerComponent(ngeoDatePickerTemplateUrl, $timeout) {
  return {
    scope: {
      onDateSelected: '&',
      time: '='
    },
    bindToController: true,
    controller: 'ngeoDatePickerController as datepickerCtrl',
    restrict: 'AE',
    templateUrl: ngeoDatePickerTemplateUrl,
    link: function link(scope, element, attrs, ctrl) {
      if (!ctrl) {
        throw new Error('Missing ctrl');
      }

      ctrl.init();
      var lang = ctrl.gettextCatalog_.getCurrentLanguage();
      $.datepicker.setDefaults($.datepicker.regional[lang]);
      ctrl.sdateOptions = angular__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, ctrl.sdateOptions, {
        'minDate': ctrl.initialMinDate,
        'maxDate': ctrl.initialMaxDate,
        'onClose': function onClose(selectedDate) {
          if (selectedDate) {
            $(element[0]).find('input[name="edate"]').datepicker('option', 'minDate', selectedDate);
          }
        }
      });
      ctrl.edateOptions = angular__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, ctrl.edateOptions, {
        'minDate': ctrl.initialMinDate,
        'maxDate': ctrl.initialMaxDate,
        'onClose': function onClose(selectedDate) {
          if (selectedDate) {
            $(element[0]).find('input[name="sdate"]').datepicker('option', 'maxDate', selectedDate);
          }
        }
      });
      angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('body').on('hidden.bs.popover', function () {
        var dp = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('#ui-datepicker-div');

        if (dp && dp.css('display') === 'block') {
          $(element[0]).find('input[name$="date"]').datepicker('hide');
        }
      });
      $timeout(function () {
        angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('#ui-datepicker-div').on('click', function (e) {
          e.stopPropagation();
        });
      });
    }
  };
}

myModule.directive('ngeoDatePicker', datePickerComponent);
function Controller($scope, ngeoTime, gettextCatalog) {
  var _this = this;

  this.ngeoTime_ = ngeoTime;
  this.time = null;
  this.gettextCatalog_ = gettextCatalog;
  this.isModeRange = false;
  this.onDateSelected = null;
  this.initialMinDate = null;
  this.initialMaxDate = null;
  this.edateOptions = {
    'changeMonth': true,
    'changeYear': true
  };
  this.sdateOptions = {
    'changeMonth': true,
    'changeYear': true
  };
  this.sdate = null;
  this.edate = null;
  $scope.$watchGroup(['datepickerCtrl.sdate', 'datepickerCtrl.edate'], function (newDates, oldDates) {
    if (!_this.onDateSelected) {
      throw new Error('Missing onDateSelected');
    }

    var sDate = newDates[0];
    var eDate = newDates[1];

    if (angular__WEBPACK_IMPORTED_MODULE_0___default.a.isDate(sDate) && (!_this.isModeRange || angular__WEBPACK_IMPORTED_MODULE_0___default.a.isDate(eDate))) {
      var start = _this.ngeoTime_.getTime(sDate);

      var end = _this.ngeoTime_.getTime(eDate);

      if (!start) {
        throw new Error('Missing start');
      }

      _this.onDateSelected({
        time: {
          start: start,
          end: end
        }
      });
    }
  });
}

Controller.prototype.init = function () {
  if (!this.time) {
    throw new Error('Missing time');
  }

  var initialOptions_ = this.ngeoTime_.getOptions(this.time);
  this.initialMinDate = this.ngeoTime_.createDate(initialOptions_.minDate);
  this.initialMaxDate = this.ngeoTime_.createDate(initialOptions_.maxDate);
  this.isModeRange = this.time.mode === 'range';

  if (this.isModeRange) {
    if (!Array.isArray(initialOptions_.values)) {
      throw new Error('Value should be an array');
    }

    this.sdate = this.ngeoTime_.createDate(initialOptions_.values[0]);
    this.edate = this.ngeoTime_.createDate(initialOptions_.values[1]);
  } else {
    if (typeof initialOptions_.values != 'number') {
      throw new Error('Value should be a number');
    }

    this.sdate = this.ngeoTime_.createDate(initialOptions_.values);
  }
};

myModule.controller('ngeoDatePickerController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/misc/debounce.js":
/*!******************************!*\
  !*** ./src/misc/debounce.js ***!
  \******************************/
/*! exports provided: debounce, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
factory.$inject = ["$timeout"];

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDebounce', []);
function debounce(func, wait, invokeApply, $timeout) {
  var timeout = null;
  return function () {
    var _this = this;

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var later = function later() {
      timeout = null;
      func.apply(_this, args);
    };

    if (timeout !== null) {
      $timeout.cancel(timeout);
    }

    timeout = $timeout(later, wait, invokeApply);
  };
}

function factory($timeout) {
  var deb = debounce;
  return function (func, wait, invokeApply) {
    return deb(func, wait, invokeApply, $timeout);
  };
}

myModule.factory('ngeoDebounce', factory);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/decorate.js":
/*!******************************!*\
  !*** ./src/misc/decorate.js ***!
  \******************************/
/*! exports provided: interactionDecoration, layerDecoration, layerLoading */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interactionDecoration", function() { return interactionDecoration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "layerDecoration", function() { return layerDecoration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "layerLoading", function() { return layerLoading; });
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/layer/Base.js */ "./node_modules/ol/layer/Base.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_source_Image_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/source/Image.js */ "./node_modules/ol/source/Image.js");
/* harmony import */ var ol_source_Tile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source/Tile.js */ "./node_modules/ol/source/Tile.js");






function interactionDecoration(interaction) {
  console.assert(interaction instanceof ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
  Object.defineProperty(interaction, 'active', {
    get: function get() {
      return interaction.getActive();
    },
    set: function set(val) {
      interaction.setActive(val);
    }
  });
}
function layerDecoration(layer) {
  console.assert(layer instanceof ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
  Object.defineProperty(layer, 'visible', {
    configurable: true,
    get: function get() {
      return layer.getVisible();
    },
    set: function set(val) {
      layer.setVisible(val);
    }
  });
  Object.defineProperty(layer, 'opacity', {
    configurable: true,
    get: function get() {
      return layer.getOpacity();
    },
    set: function set(val) {
      layer.setOpacity(val);
    }
  });
}
function layerLoading(layer, $scope) {
  var source;
  var incrementEvents = [];
  var decrementEvents = [];
  var incrementLoadCount_ = increment_;
  var decrementLoadCount_ = decrement_;
  layer.set('load_count', 0, true);

  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_2__["default"]) {
    layer.getLayers().on('add', function (olEvent) {
      var newLayer = olEvent.element;
      newLayer.set('parent_group', layer);
    });
  }

  if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    source = layer.getSource();

    if (source === null) {
      return;
    } else if (source instanceof ol_source_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
      incrementEvents = ['tileloadstart'];
      decrementEvents = ['tileloadend', 'tileloaderror'];
    } else if (source instanceof ol_source_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
      incrementEvents = ['imageloadstart'];
      decrementEvents = ['imageloadend', 'imageloaderror'];
    } else {
      console.assert(false, 'unsupported source type');
    }

    source.on(incrementEvents, function () {
      incrementLoadCount_(layer);
      $scope.$applyAsync();
    });
    source.on(decrementEvents, function () {
      decrementLoadCount_(layer);
      $scope.$applyAsync();
    });
  }

  Object.defineProperty(layer, 'loading', {
    configurable: true,
    get: function get() {
      return layer.get('load_count') > 0;
    }
  });

  function increment_(layer) {
    var load_count = layer.get('load_count');
    var parent = layer.get('parent_group');
    layer.set('load_count', ++load_count, true);

    if (parent) {
      increment_(parent);
    }
  }

  function decrement_(layer) {
    var load_count = layer.get('load_count');
    var parent = layer.get('parent_group');
    layer.set('load_count', --load_count, true);

    if (parent) {
      decrement_(parent);
    }
  }
}

/***/ }),

/***/ "./src/misc/extraModule.js":
/*!*********************************!*\
  !*** ./src/misc/extraModule.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_AutoProjection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/AutoProjection.js */ "./src/misc/AutoProjection.js");
/* harmony import */ var ngeo_misc_btnComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/btnComponent.js */ "./src/misc/btnComponent.js");
/* harmony import */ var ngeo_misc_controlComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/controlComponent.js */ "./src/misc/controlComponent.js");
/* harmony import */ var ngeo_misc_datepickerComponent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/datepickerComponent.js */ "./src/misc/datepickerComponent.js");
/* harmony import */ var ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/debounce.js */ "./src/misc/debounce.js");
/* harmony import */ var ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/misc/EventHelper.js */ "./src/misc/EventHelper.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_File_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/misc/File.js */ "./src/misc/File.js");
/* harmony import */ var ngeo_misc_filereaderComponent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/misc/filereaderComponent.js */ "./src/misc/filereaderComponent.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_misc_sortableComponent_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/misc/sortableComponent.js */ "./src/misc/sortableComponent.js");
/* harmony import */ var ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/misc/Time.js */ "./src/misc/Time.js");
/* harmony import */ var ngeo_misc_ToolActivateMgr_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngeo/misc/ToolActivateMgr.js */ "./src/misc/ToolActivateMgr.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");















/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMiscExtraModule', [ngeo_misc_AutoProjection_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_btnComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_controlComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_misc_datepickerComponent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, ngeo_misc_File_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_misc_filereaderComponent_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, ngeo_misc_sortableComponent_js__WEBPACK_IMPORTED_MODULE_11__["default"].name, ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_12__["default"].name, ngeo_misc_ToolActivateMgr_js__WEBPACK_IMPORTED_MODULE_13__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_14__["default"].name]));

/***/ }),

/***/ "./src/misc/filereaderComponent.js":
/*!*****************************************!*\
  !*** ./src/misc/filereaderComponent.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
filereaderComponent.$inject = ["$window"];

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFilereader', []);

function filereaderComponent($window) {
  return {
    restrict: 'A',
    scope: {
      'fileContent': '=ngeoFilereader',
      'supported': '=?ngeoFilereaderSupported'
    },
    link: function link(scope, element) {
      var supported = ('FileReader' in $window);
      scope.supported = supported;

      if (!supported) {
        return;
      }

      var ce = function ce(changeEvent) {
        var fileReader = new $window.FileReader();

        fileReader.onload = function (evt) {
          var target = evt.target;
          scope.$apply(function () {
            scope.fileContent = target.result;
          });
        };

        var files = changeEvent.target.files;

        if (!files) {
          throw new Error('Missing files');
        }

        fileReader.readAsText(files[0]);
      };

      element.on({
        change: ce
      });
    }
  };
}

myModule.directive('ngeoFilereader', filereaderComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/filters.js":
/*!*****************************!*\
  !*** ./src/misc/filters.js ***!
  \*****************************/
/*! exports provided: ScalifyFilter, NumberFilter, UnitPrefixFilter, NumberCoordinatesFilter, DMSCoordinatesFilter, trustHtmlFilter, trustHtmlAutoFilter, DurationFilter, removeCDATA, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScalifyFilter", function() { return ScalifyFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NumberFilter", function() { return NumberFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UnitPrefixFilter", function() { return UnitPrefixFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NumberCoordinatesFilter", function() { return NumberCoordinatesFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DMSCoordinatesFilter", function() { return DMSCoordinatesFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "trustHtmlFilter", function() { return trustHtmlFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "trustHtmlAutoFilter", function() { return trustHtmlAutoFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DurationFilter", function() { return DurationFilter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeCDATA", function() { return removeCDATA; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_math_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/math.js */ "./node_modules/ol/math.js");
/* harmony import */ var ol_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/string.js */ "./node_modules/ol/string.js");
DurationFilter.$inject = ["gettextCatalog"];
trustHtmlAutoFilter.$inject = ["$sce", "ngeoStringToHtmlReplacements"];
trustHtmlFilter.$inject = ["$sce"];
NumberCoordinatesFilter.$inject = ["$filter"];
UnitPrefixFilter.$inject = ["$filter"];
NumberFilter.$inject = ["$locale"];
ScalifyFilter.$inject = ["$filter"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoAngularFilters', []);
function ScalifyFilter($filter) {
  var numberFilter = $filter('ngeoNumber');

  var filterFn = function filterFn(scale, opt_precision) {
    if (opt_precision === undefined) {
      opt_precision = 2;
    }

    var text = numberFilter(scale, opt_precision);
    return text ? "1\xA0:\xA0" + text : '';
  };

  filterFn.$stateful = true;
  return filterFn;
}
myModule.filter('ngeoScalify', ScalifyFilter);
function NumberFilter($locale) {
  var formats = $locale.NUMBER_FORMATS;

  var result = function result(number, opt_precision) {
    var groupSep = formats.GROUP_SEP;
    var decimalSep = formats.DECIMAL_SEP;

    if (opt_precision === undefined) {
      opt_precision = 3;
    }

    if (number === Infinity) {
      return "\u221E";
    } else if (number === -Infinity) {
      return "-\u221E";
    } else if (number === 0) {
      return '0';
    }

    var sign = number < 0;
    number = Math.abs(number);
    var nb_decimal = opt_precision - Math.floor(Math.log(number) / Math.log(10)) - 1;
    var factor = Math.pow(10, nb_decimal);
    number = Math.round(number * factor);
    var decimal = '';
    var unit = Math.floor(number / factor);

    if (nb_decimal > 0) {
      var str_number = "" + number;

      while (str_number.length < nb_decimal) {
        str_number = "0" + str_number;
      }

      decimal = str_number.substring(str_number.length - nb_decimal);

      while (decimal.endsWith('0')) {
        decimal = decimal.substring(0, decimal.length - 1);
      }
    }

    var groups = [];
    var str_unit = "" + unit;

    while (str_unit.length > 3) {
      var index = str_unit.length - 3;
      groups.unshift(str_unit.substring(index));
      str_unit = str_unit.substring(0, index);
    }

    groups.unshift(str_unit);
    return (sign ? '-' : '') + groups.join(groupSep) + (decimal.length === 0 ? '' : decimalSep + decimal);
  };

  return result;
}
myModule.filter('ngeoNumber', NumberFilter);
function UnitPrefixFilter($filter) {
  var numberFilter = $filter('ngeoNumber');
  var standardPrefix = ['', 'k', 'M', 'G', 'T', 'P'];
  var binaryPrefix = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi'];

  var result = function result(number, opt_unit, opt_type, opt_precision) {
    if (opt_unit === undefined) {
      opt_unit = '';
    }

    var comparatorFactor = 1 - Math.pow(0.1, opt_precision || 3) * 0.5;
    var divisor = 1000;
    var prefix = standardPrefix;

    if (opt_type === 'square') {
      divisor = 1000000;
    } else if (opt_type === 'binary') {
      divisor = 1024;
      prefix = binaryPrefix;
    }

    var index = 0;
    var index_max = prefix.length - 1;

    while (number >= divisor * comparatorFactor && index < index_max) {
      number = number / divisor;
      index++;
    }

    var postfix = prefix[index] + opt_unit;
    var space = postfix.length == 0 ? '' : "\xA0";
    return numberFilter(number, opt_precision) + space + postfix;
  };

  return result;
}
myModule.filter('ngeoUnitPrefix', UnitPrefixFilter);
function NumberCoordinatesFilter($filter) {
  var filterFn = function filterFn(coordinates, opt_fractionDigits, opt_template) {
    var template = opt_template ? opt_template : '{x} {y}';
    var x = coordinates[0];
    var y = coordinates[1];
    var fractionDigits = parseInt(opt_fractionDigits, 10) | 0;
    var x_str = $filter('number')(x, fractionDigits);
    var y_str = $filter('number')(y, fractionDigits);
    return template.replace('{x}', x_str).replace('{y}', y_str);
  };

  return filterFn;
}
myModule.filter('ngeoNumberCoordinates', NumberCoordinatesFilter);
function DMSCoordinatesFilter() {
  var degreesToStringHDMS = function degreesToStringHDMS(degrees, hemispheres, fractionDigits) {
    var normalizedDegrees = Object(ol_math_js__WEBPACK_IMPORTED_MODULE_1__["modulo"])(degrees + 180, 360) - 180;
    var dms = Math.abs(3600 * normalizedDegrees);
    var d = Math.floor(dms / 3600);
    var m = Math.floor(dms / 60 % 60);
    var s = dms % 60;
    return d + "\xB0 " + Object(ol_string_js__WEBPACK_IMPORTED_MODULE_2__["padNumber"])(m, 2) + "\u2032 " + Object(ol_string_js__WEBPACK_IMPORTED_MODULE_2__["padNumber"])(s, 2, fractionDigits) + "\u2033 " + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0);
  };

  var filterFn = function filterFn(coordinates, opt_fractionDigits, opt_template) {
    var fractionDigits = parseInt(opt_fractionDigits, 10) | 0;
    var template = opt_template ? opt_template : '{x} {y}';
    var xdms = degreesToStringHDMS(coordinates[0], 'EW', fractionDigits);
    var ydms = degreesToStringHDMS(coordinates[1], 'NS', fractionDigits);
    return template.replace('{x}', xdms).replace('{y}', ydms);
  };

  return filterFn;
}
myModule.filter('ngeoDMSCoordinates', DMSCoordinatesFilter);
function trustHtmlFilter($sce) {
  return function (input) {
    if (input !== undefined && input !== null) {
      return $sce.trustAsHtml("" + input);
    } else {
      return $sce.trustAsHtml('&nbsp;');
    }
  };
}
myModule.filter('ngeoTrustHtml', trustHtmlFilter);
function trustHtmlAutoFilter($sce, ngeoStringToHtmlReplacements) {
  return function (input) {
    if (input !== undefined && input !== null) {
      if (typeof input === 'string') {
        for (var _iterator = _createForOfIteratorHelperLoose(ngeoStringToHtmlReplacements), _step; !(_step = _iterator()).done;) {
          var replacement = _step.value;

          if (replacement.compiled_expression === undefined) {
            replacement.compiled_expression = new RegExp(replacement.expression, replacement.flags);
          }

          if (input.match(replacement.compiled_expression)) {
            input = replacement.template.replace(/\$1/g, input);
            break;
          }
        }

        return $sce.trustAsHtml("" + input);
      } else {
        return $sce.trustAsHtml("" + input);
      }
    } else {
      return $sce.trustAsHtml('&nbsp;');
    }
  };
}
myModule.filter('ngeoTrustHtmlAuto', trustHtmlAutoFilter);
function DurationFilter(gettextCatalog) {
  var TimeUnits = Object.freeze({
    SECONDS: Symbol('seconds'),
    MINUTES: Symbol('minutes'),
    HOURS: Symbol('hours'),
    DAYS: Symbol('days')
  });

  var pluralize = function pluralize(amount, unit) {
    var formattedUnit = '';

    switch (unit) {
      case TimeUnits.SECONDS:
        formattedUnit = gettextCatalog.getPlural(amount, 'second', 'seconds');
        break;

      case TimeUnits.MINUTES:
        formattedUnit = gettextCatalog.getPlural(amount, 'minute', 'minutes');
        break;

      case TimeUnits.HOURS:
        formattedUnit = gettextCatalog.getPlural(amount, 'hour', 'hours');
        break;

      case TimeUnits.DAYS:
        formattedUnit = gettextCatalog.getPlural(amount, 'day', 'days');
        break;

      default:
        break;
    }

    return amount + " " + formattedUnit;
  };

  var result = function result(duration) {
    duration = Math.round(duration);
    var output;

    if (duration < 60) {
      return pluralize(duration, TimeUnits.SECONDS);
    }

    var remainder = duration % 60;
    duration = Math.floor(duration / 60);

    if (duration < 60) {
      output = pluralize(duration, TimeUnits.MINUTES);

      if (remainder > 0) {
        output += " " + pluralize(remainder, TimeUnits.SECONDS);
      }

      return output;
    }

    remainder = duration % 60;
    duration = Math.floor(duration / 60);

    if (duration < 24) {
      output = pluralize(duration, TimeUnits.HOURS);

      if (remainder > 0) {
        output += " " + pluralize(remainder, TimeUnits.MINUTES);
      }

      return output;
    }

    remainder = duration % 24;
    duration = Math.floor(duration / 24);
    output = pluralize(duration, TimeUnits.DAYS);

    if (remainder > 0) {
      output += " " + pluralize(remainder, TimeUnits.HOURS);
    }

    return output;
  };

  return result;
}
myModule.filter('ngeoDuration', DurationFilter);
var removeCDATA = function removeCDATA() {
  return function (input) {
    if (input && input.replace) {
      return input.replace(/<!\[CDATA\[(.*)\]\]>/, '$1');
    }
  };
};
myModule.filter('removeCDATA', removeCDATA);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/sortableComponent.js":
/*!***************************************!*\
  !*** ./src/misc/sortableComponent.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_ui_widgets_sortable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/ui/widgets/sortable.js */ "./node_modules/jquery-ui/ui/widgets/sortable.js");
/* harmony import */ var jquery_ui_ui_widgets_sortable_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_sortable_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_ui_touch_punch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-ui-touch-punch */ "./node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.js");
/* harmony import */ var jquery_ui_touch_punch__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_touch_punch__WEBPACK_IMPORTED_MODULE_3__);
sortableComponent.$inject = ["$timeout"];




var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSortable', []);

function sortableComponent($timeout) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var sortable = scope.$eval(attrs.ngeoSortable) || [];
      console.assert(Array.isArray(sortable));
      scope.$watchCollection(function () {
        return sortable;
      }, function () {
        sortable.length && $timeout(resetUpDragDrop, 0);
      });
      var optionsObject = scope.$eval(attrs.ngeoSortableOptions);
      var options = getOptions(optionsObject);
      var callbackFn = scope.$eval(attrs.ngeoSortableCallback);
      var callbackCtx = scope.$eval(attrs.ngeoSortableCallbackCtx);

      function resetUpDragDrop() {
        var children = element.children();

        for (var i = 0; i < children.length; ++i) {
          angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(children[i]).data('idx', i);
        }

        var sortableElement = $(element);

        if (sortableElement.data('ui-sortable')) {
          sortableElement.off('sortupdate');
          sortableElement.sortable('destroy');
        }

        var sortableOptions = {
          axis: 'y',
          classes: {
            'ui-sortable-helper': options.draggerClassName
          }
        };

        if (options.handleClassName) {
          sortableOptions.handle = "." + options.handleClassName;
        }

        if (options.placeholderClassName) {
          sortableOptions.placeholder = options.placeholderClassName;
          sortableOptions.forcePlaceholderSize = true;
        }

        sortableElement.sortable(sortableOptions);
        sortableElement.on('sortupdate', function (event, ui) {
          var oldIndex = $(ui.item[0]).data('idx');
          var newIndex = ui.item.index();
          $(ui.item[0]).data('idx', newIndex);
          scope.$apply(function () {
            sortable.splice(newIndex, 0, sortable.splice(oldIndex, 1)[0]);
          });

          if (callbackFn instanceof Function) {
            callbackFn.apply(callbackCtx, [element, sortable]);
          }
        });
      }

      function getOptions(options) {
        var ret;
        var defaultHandleClassName = 'ngeo-sortable-handle';

        if (options === undefined) {
          ret = {
            'handleClassName': defaultHandleClassName
          };
        } else {
          if (options.handleClassName === undefined) {
            options.handleClassName = defaultHandleClassName;
          }

          ret = options;
        }

        return ret;
      }
    }
  };
}

myModule.directive('ngeoSortable', sortableComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/misc/swipe.js":
/*!***************************!*\
  !*** ./src/misc/swipe.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMiscSwipe', []);
myModule.factory('$verticalSwipe', [function () {
  var MOVE_BUFFER_RADIUS = 10;
  var POINTER_EVENTS = {
    mouse: {
      start: 'mousedown',
      move: 'mousemove',
      end: 'mouseup'
    },
    touch: {
      start: 'touchstart',
      move: 'touchmove',
      end: 'touchend',
      cancel: 'touchcancel'
    },
    pointer: {
      start: 'pointerdown',
      move: 'pointermove',
      end: 'pointerup',
      cancel: 'pointercancel'
    }
  };

  function getCoordinates(event) {
    var uiEvent;
    var touchEvent = event.originalEvent;

    if (touchEvent.changedTouches && touchEvent.changedTouches.length > 0) {
      uiEvent = touchEvent.changedTouches[0];
    } else {
      uiEvent = event.originalEvent;
    }

    return {
      x: uiEvent.clientX,
      y: uiEvent.clientY
    };
  }

  function getEvents(pointerTypes, eventType) {
    var res = [];
    angular__WEBPACK_IMPORTED_MODULE_0___default.a.forEach(pointerTypes, function (pointerType) {
      var eventName = POINTER_EVENTS[pointerType][eventType];

      if (eventName) {
        res.push(eventName);
      }
    });
    return res.join(' ');
  }

  return {
    bind: function bind(element, eventHandlers, pointerTypes) {
      var totalX;
      var totalY;
      var startCoords;
      var lastPos;
      var active = false;
      pointerTypes = pointerTypes || ['mouse', 'touch', 'pointer'];
      element.on(getEvents(pointerTypes, 'start'), function (event) {
        startCoords = getCoordinates(event);
        active = true;
        totalX = 0;
        totalY = 0;
        lastPos = startCoords;

        if (eventHandlers.start) {
          eventHandlers.start(startCoords, event);
        }
      });
      var events = getEvents(pointerTypes, 'cancel');

      if (events) {
        element.on(events, function (event) {
          active = false;

          if (eventHandlers.cancel) {
            eventHandlers.cancel(event);
          }
        });
      }

      element.on(getEvents(pointerTypes, 'move'), function (event) {
        if (!active) {
          return;
        }

        if (!startCoords) {
          return;
        }

        var coords = getCoordinates(event);
        totalX += Math.abs(coords.x - lastPos.x);
        totalY += Math.abs(coords.y - lastPos.y);
        lastPos = coords;

        if (totalX < MOVE_BUFFER_RADIUS && totalY < MOVE_BUFFER_RADIUS) {
          return;
        }

        if (totalX > totalY) {
          active = false;

          if (eventHandlers.cancel) {
            eventHandlers.cancel(event);
          }

          return;
        } else {
          event.preventDefault();

          if (eventHandlers.move) {
            eventHandlers.move(coords, event);
          }
        }
      });
      element.on(getEvents(pointerTypes, 'end'), function (event) {
        if (!active) {
          return;
        }

        active = false;

        if (eventHandlers.end) {
          eventHandlers.end(getCoordinates(event), event);
        }
      });
    }
  };
}]);

function makeSwipeDirective_(directiveName, direction, eventName) {
  myModule.directive(directiveName, ['$parse', '$verticalSwipe', function ($parse, $verticalSwipe) {
    var MAX_HORIZONTAL_DISTANCE = 75;
    var MAX_HORIZONTAL_RATIO = 0.3;
    var MIN_VERTICAL_DISTANCE = 30;
    return function (scope, element, attr) {
      var swipeHandler = $parse(attr[directiveName]);
      var startCoords;
      var valid;

      function validSwipe(coords) {
        if (!startCoords) {
          return false;
        }

        var deltaY = (coords.y - startCoords.y) * direction;
        var deltaX = Math.abs(coords.x - startCoords.x);
        return valid && deltaX < MAX_HORIZONTAL_DISTANCE && deltaY > 0 && deltaY > MIN_VERTICAL_DISTANCE && deltaX / deltaY < MAX_HORIZONTAL_RATIO;
      }

      var pointerTypes = ['touch'];

      if (angular__WEBPACK_IMPORTED_MODULE_0___default.a.isDefined(attr.ngeoSwipeDisableMouse)) {
        pointerTypes.push('mouse');
      }

      $verticalSwipe.bind(element, {
        'start': function start(coords, event) {
          startCoords = coords;
          valid = true;
        },
        'cancel': function cancel(event) {
          valid = false;
        },
        'end': function end(coords, event) {
          if (validSwipe(coords)) {
            scope.$apply(function () {
              element.triggerHandler(eventName);
              swipeHandler(scope, {
                $event: event
              });
            });
          }
        }
      }, pointerTypes);
    };
  }]);
}

makeSwipeDirective_('ngeoSwipeDown', 1, 'swipedown');
makeSwipeDirective_('ngeoSwipeUp', -1, 'swipeup');
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/misc/syncArrays.js":
/*!********************************!*\
  !*** ./src/misc/syncArrays.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function syncArrays(arr1, arr2, reverse, scope, filter) {
  var dereg1 = scope.$watchCollection(function () {
    return arr1;
  }, function () {
    var i, ii, j;

    if (reverse) {
      for (i = arr1.length - 1, j = 0; i >= 0; --i) {
        if (filter(arr1[i])) {
          arr2[j++] = arr1[i];
        }
      }
    } else {
      for (i = 0, ii = arr1.length, j = 0; i < ii; ++i) {
        if (filter(arr1[i])) {
          arr2[j++] = arr1[i];
        }
      }
    }

    arr2.length = j;
  });
  var dereg2 = scope.$watchCollection(function () {
    return arr2;
  }, function () {
    var i, ii, j;

    if (reverse) {
      for (i = 0, ii = arr1.length, j = arr2.length - 1; i < ii; ++i) {
        if (filter(arr1[i])) {
          arr1[i] = arr2[j--];
        }
      }

      console.assert(j == -1);
    } else {
      for (i = 0, ii = arr1.length, j = 0; i < ii; ++i) {
        if (filter(arr1[i])) {
          arr1[i] = arr2[j++];
        }
      }

      console.assert(j == arr2.length);
    }
  });
  return function () {
    dereg1();
    dereg2();
  };
}

/* harmony default export */ __webpack_exports__["default"] = (syncArrays);

/***/ }),

/***/ "./src/olcs/constants.js":
/*!*******************************!*\
  !*** ./src/olcs/constants.js ***!
  \*******************************/
/*! exports provided: Permalink3dParam */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Permalink3dParam", function() { return Permalink3dParam; });
var Permalink3dParam = {
  ENABLED: '3d_enabled',
  LON: '3d_lon',
  LAT: '3d_lat',
  ELEVATION: '3d_elevation',
  HEADING: '3d_heading',
  PITCH: '3d_pitch',
  PREFIX: '3d_'
};

/***/ }),

/***/ "./src/options.js":
/*!************************!*\
  !*** ./src/options.js ***!
  \************************/
/*! exports provided: buildStyle, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buildStyle", function() { return buildStyle; });
/* harmony import */ var ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/style/Circle.js */ "./node_modules/ol/style/Circle.js");
/* harmony import */ var ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/style/RegularShape.js */ "./node_modules/ol/style/RegularShape.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/style/Stroke.js */ "./node_modules/ol/style/Stroke.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







function buildStyle(styleDescriptor) {
  if (styleDescriptor instanceof ol_style_Style_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
    return styleDescriptor;
  } else if (!styleDescriptor) {
    return ol_style_Style_js__WEBPACK_IMPORTED_MODULE_4__["createDefaultStyle"];
  } else if (Array.isArray(styleDescriptor)) {
    var result = [];

    for (var _iterator = _createForOfIteratorHelperLoose(styleDescriptor), _step; !(_step = _iterator()).done;) {
      var style = _step.value;
      result.push(buildStyle(style));
    }

    return result;
  } else {
    var _style = {};
    Object.assign(_style, styleDescriptor);
    var sd = styleDescriptor;

    if (sd.fill) {
      _style.fill = new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_2__["default"](sd.fill);
    }

    if (sd.stroke) {
      _style.stroke = new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_3__["default"](sd.stroke);
    }

    if (sd.circle) {
      var circleStyle = {};
      Object.assign(circleStyle, sd.circle);

      if (sd.circle.fill) {
        circleStyle.fill = new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_2__["default"](sd.circle.fill);
      }

      if (sd.circle.stroke) {
        circleStyle.stroke = new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_3__["default"](sd.circle.stroke);
      }

      _style.image = new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_0__["default"](circleStyle);
      delete _style.circle;
    } else if (sd.regularShape) {
      var regularShapeStyle = {};
      Object.assign(regularShapeStyle, sd.regularShape);

      if (sd.regularShape.fill) {
        regularShapeStyle.fill = new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_2__["default"](sd.regularShape.fill);
      }

      if (sd.regularShape.stroke) {
        regularShapeStyle.stroke = new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_3__["default"](sd.regularShape.stroke);
      }

      if (sd.regularShape.angle) {
        sd.regularShape.angle = sd.regularShape.angle / 180 * Math.PI;
      }

      if (sd.regularShape.rotation) {
        sd.regularShape.rotation = sd.regularShape.angle / 180 * Math.PI;
      }

      _style.image = new ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_1__["default"](regularShapeStyle);
      delete _style.regularShape;
    }

    return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_4__["default"](_style);
  }
}
/* harmony default export */ __webpack_exports__["default"] = (null);

/***/ }),

/***/ "./src/query/Action.js":
/*!*****************************!*\
  !*** ./src/query/Action.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  ADD: 'add',
  REMOVE: 'remove',
  REPLACE: 'replace'
});

/***/ }),

/***/ "./src/query/MapQuerent.js":
/*!*********************************!*\
  !*** ./src/query/MapQuerent.js ***!
  \*********************************/
/*! exports provided: MapQuerent, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapQuerent", function() { return MapQuerent; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Action.js */ "./src/query/Action.js");
/* harmony import */ var ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/query/Querent.js */ "./src/query/Querent.js");
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/datasource/Helper.js */ "./src/datasource/Helper.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }








var MapQuerent = function () {
  MapQuerent.$inject = ["ngeoDataSources", "ngeoDataSourcesHelper", "ngeoFeatureHelper", "ngeoQuerent", "ngeoQueryResult", "ngeoQueryOptions"];

  function MapQuerent(ngeoDataSources, ngeoDataSourcesHelper, ngeoFeatureHelper, ngeoQuerent, ngeoQueryResult, ngeoQueryOptions) {
    var options = ngeoQueryOptions;
    this.dataSources_ = ngeoDataSources.collection;
    this.featureHelper_ = ngeoFeatureHelper;
    this.ngeoDataSourcesHelper_ = ngeoDataSourcesHelper;
    this.ngeoQuerent_ = ngeoQuerent;
    this.result_ = ngeoQueryResult;
    this.limit_ = options.limit !== undefined ? options.limit : 50;
    this.tolerance_;

    if (Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["hasCoarsePointingDevice"])()) {
      this.tolerance_ = options.toleranceTouch !== undefined ? options.toleranceTouch : 10;
    } else {
      this.tolerance_ = options.tolerance !== undefined ? options.tolerance : 3;
    }

    this.bboxAsGETParam_ = options.bboxAsGETParam || false;
    this.dataSourceNames_ = {};
    this.cleared_ = false;
  }

  var _proto = MapQuerent.prototype;

  _proto.issue = function issue(options) {
    var action = options.action ? options.action : ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE;
    this.clear(action !== ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE);
    var queryableDataSources;

    if (options.dataSources === undefined && options.queryableDataSources === undefined) {
      queryableDataSources = this.ngeoQuerent_.getQueryableDataSources(this.dataSources_.getArray(), options.map);
    }

    var limit = options.limit !== undefined ? options.limit : this.limit_;
    Object.assign(options, {
      queryableDataSources: queryableDataSources,
      limit: limit,
      tolerance: this.tolerance_,
      bboxAsGETParam: this.bboxAsGETParam_
    });
    this.result_.pending = true;
    return this.ngeoQuerent_.issue(options).then(this.handleResult_.bind(this, action));
  };

  _proto.clear = function clear(keep) {
    if (keep === void 0) {
      keep = false;
    }

    if (this.cleared_) {
      return;
    }

    this.result_.total = 0;

    for (var _iterator = _createForOfIteratorHelperLoose(this.result_.sources), _step; !(_step = _iterator()).done;) {
      var source = _step.value;

      if (!keep) {
        source.features.length = 0;
        delete source.totalFeatureCount;
      } else {
        this.result_.total += source.features.length;
      }

      source.pending = false;
      source.tooManyResults = false;
    }

    if (!keep) {
      this.result_.sources.length = 0;
    }

    this.result_.pending = false;
    this.cleared_ = true;
  };

  _proto.handleResult_ = function handleResult_(action, response) {
    var _this = this;

    var total = action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE ? 0 : this.result_.total;

    var _loop = function _loop(idStr) {
      var id = Number(idStr);

      var dataSource = _this.ngeoDataSourcesHelper_.getDataSource(id);

      if (!dataSource) {
        throw new Error('Missing dataSource');
      }

      var label = dataSource.name;
      console.assert(dataSource);
      var querentResultItem = response[id];
      var features = querentResultItem.features;
      var limit = querentResultItem.limit;
      var tooManyResults = querentResultItem.tooManyFeatures === true;
      var totalFeatureCount = querentResultItem.totalFeatureCount;
      var requestPartners = querentResultItem.requestPartners;
      var typeSeparatedFeatures = {};
      features.forEach(function (feature) {
        var type = feature.get('ngeo_feature_type_');

        if (!typeSeparatedFeatures[type]) {
          typeSeparatedFeatures[type] = [];
        }

        if (dataSource.attributes && dataSource.attributes.length) {
          var properties = feature.getProperties();
          var filteredProperties = {};
          dataSource.attributes.forEach(function (attribute) {
            if (attribute.alias) {
              filteredProperties[attribute.alias] = properties[attribute.name];
              feature.unset(attribute.name, true);
            } else {
              filteredProperties[attribute.name] = properties[attribute.name];
            }
          });
          feature.setProperties(filteredProperties, true);
        }

        typeSeparatedFeatures[type].push(feature);
      });

      for (var type in typeSeparatedFeatures) {
        label = type ? type : label;
        var featuresByType = typeSeparatedFeatures[type];
        var shouldPush = false;

        if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE) {
          shouldPush = true;
        } else {
          var existingSource = void 0;

          for (var _iterator2 = _createForOfIteratorHelperLoose(_this.result_.sources), _step2; !(_step2 = _iterator2()).done;) {
            var source = _step2.value;

            if (source.id === id && source.label === label) {
              existingSource = source;
              break;
            }
          }

          if (existingSource) {
            for (var _iterator3 = _createForOfIteratorHelperLoose(featuresByType), _step3; !(_step3 = _iterator3()).done;) {
              var newFeature = _step3.value;

              var existingFeatureIndex = _this.featureHelper_.findFeatureIndexByFid(existingSource.features, "" + newFeature.getId());

              if (existingFeatureIndex === -1) {
                if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].ADD) {
                  existingSource.features.push(newFeature);
                  total += 1;
                }
              } else {
                if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REMOVE) {
                  existingSource.features.splice(existingFeatureIndex, 1);
                  total -= 1;
                }
              }
            }
          } else {
            if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].ADD) {
              shouldPush = true;
            }
          }
        }

        if (shouldPush) {
          _this.result_.sources.push({
            features: featuresByType,
            id: id,
            label: label,
            limit: limit,
            pending: false,
            tooManyResults: tooManyResults,
            totalFeatureCount: totalFeatureCount,
            identifierAttributeField: dataSource.identifierAttribute,
            requestPartners: requestPartners
          });

          total += features.length;
        }
      }
    };

    for (var idStr in response) {
      _loop(idStr);
    }

    this.result_.total = total;
    this.result_.pending = false;
    this.cleared_ = false;
  };

  return MapQuerent;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMapQuerent', [ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]);
myModule.service('ngeoMapQuerent', MapQuerent);
myModule.value('ngeoQueryResult', {
  sources: [],
  total: 0,
  pending: false
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/query/Mode.js":
/*!***************************!*\
  !*** ./src/query/Mode.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  CLICK: 'click',
  DRAW_BOX: 'drawbox',
  DRAW_POLYGON: 'drawpolygon'
});

/***/ }),

/***/ "./src/query/ModeSelector.js":
/*!***********************************!*\
  !*** ./src/query/ModeSelector.js ***!
  \***********************************/
/*! exports provided: QueryModeSelector, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryModeSelector", function() { return QueryModeSelector; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/query/Action.js */ "./src/query/Action.js");
/* harmony import */ var ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Mode.js */ "./src/query/Mode.js");
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }






var QueryModeSelector = function () {
  QueryModeSelector.$inject = ["$rootScope"];

  function QueryModeSelector($rootScope) {
    this.keyActionAdd_ = 'a';
    this.keyActionRemove_ = 'x';
    this.keysAction_ = [this.keyActionAdd_, this.keyActionRemove_];
    this.action_ = ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__["default"].REPLACE;
    this.pending_ = false;
    this.wasPending_ = false;
    this.previousAction_ = null;
    this.mode_ = ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].CLICK;
    this.previousMode_ = null;
    this.activeActionKey_ = null;
    this.rootScope_ = $rootScope;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(document, 'keydown', this.handleKeyDown_, this);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(document, 'keyup', this.handleKeyUp_, this);
  }

  var _proto = QueryModeSelector.prototype;

  _proto.handleKeyDown_ = function handleKeyDown_(evt) {
    if (!(evt instanceof KeyboardEvent)) {
      return;
    }

    if (this.pending) {
      return;
    }

    var key = evt.key;

    if (this.keysAction_.includes(key) && !this.previousAction_) {
      this.previousAction_ = this.action;
      var newAction;

      switch (key) {
        case this.keyActionAdd_:
          newAction = ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__["default"].ADD;
          break;

        case this.keyActionRemove_:
          newAction = ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__["default"].REMOVE;
          break;

        default:
          break;
      }

      if (newAction) {
        this.action = newAction;
        this.activeActionKey_ = key;
        this.rootScope_.$apply();
      }
    } else if (Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_3__["isEventUsinCtrlKey"])(evt) && !this.previousMode_) {
      this.previousMode_ = this.mode;
      this.mode = ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_BOX;
      this.rootScope_.$apply();
    }
  };

  _proto.handleKeyUp_ = function handleKeyUp_(evt) {
    if (!(evt instanceof KeyboardEvent)) {
      return;
    }

    var updateScope = false;

    if (Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_3__["isEventUsinCtrlKey"])(evt) && this.previousMode_) {
      if (this.pending) {
        this.wasPending_ = true;
      } else {
        this.mode = this.previousMode_;
        this.previousMode_ = null;
        updateScope = true;
      }
    }

    var key = evt.key;

    if (this.activeActionKey_ === key && this.previousAction_) {
      this.action = this.previousAction_;
      this.previousAction_ = null;
      this.activeActionKey_ = null;
      updateScope = true;
    }

    if (updateScope) {
      this.rootScope_.$apply();
    }
  };

  _createClass(QueryModeSelector, [{
    key: "action",
    get: function get() {
      return this.action_;
    },
    set: function set(action) {
      this.action_ = action;
    }
  }, {
    key: "mode",
    get: function get() {
      return this.mode_;
    },
    set: function set(mode) {
      this.mode_ = mode;
    }
  }, {
    key: "pending",
    get: function get() {
      return this.pending_;
    },
    set: function set(pending) {
      this.pending_ = pending;

      if (!pending && this.wasPending_ && this.previousMode_) {
        this.wasPending_ = false;
        this.mode = this.previousMode_;
        this.previousMode_ = null;
      }
    }
  }]);

  return QueryModeSelector;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQueryModeSelector', []);
myModule.service('ngeoQueryModeSelector', QueryModeSelector);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/query/Querent.js":
/*!******************************!*\
  !*** ./src/query/Querent.js ***!
  \******************************/
/*! exports provided: Querent, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Querent", function() { return Querent; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/filter/RuleHelper.js */ "./src/filter/RuleHelper.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ol_format_filter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/format/filter.js */ "./node_modules/ol/format/filter.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ngeo_WFSDescribeFeatureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/WFSDescribeFeatureType.js */ "./src/WFSDescribeFeatureType.js");
/* harmony import */ var ol_format_WMSCapabilities_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/format/WMSCapabilities.js */ "./node_modules/ol/format/WMSCapabilities.js");
/* harmony import */ var ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/format/WMTSCapabilities.js */ "./node_modules/ol/format/WMTSCapabilities.js");
/* harmony import */ var ol_uri_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/uri.js */ "./node_modules/ol/uri.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }













var Querent = function () {
  Querent.$inject = ["$http", "$q", "ngeoRuleHelper", "ngeoWMSTime"];

  function Querent($http, $q, ngeoRuleHelper, ngeoWMSTime) {
    this.http_ = $http;
    this.q_ = $q;
    this.ngeoRuleHelper_ = ngeoRuleHelper;
    this.ngeoWMSTime_ = ngeoWMSTime;
    this.requestCancelers_ = [];
    this.wmsGetCapabilitiesPromises_ = {};
    this.wmtsGetCapabilitiesPromises_ = {};
  }

  var _proto = Querent.prototype;

  _proto.issue = function issue(options) {
    var promises = [];
    var map = options.map;
    this.cancelStillRunningRequests_();
    var queryableDataSources;

    if (options.queryableDataSources) {
      queryableDataSources = options.queryableDataSources;
    } else {
      var dataSources = options.dataSources;
      console.assert(dataSources, 'DataSources should be set');
      queryableDataSources = this.getQueryableDataSources(dataSources, map);
    }

    var combinedWFSDataSources = this.getCombinableWFSDataSources_(queryableDataSources.wfs);
    promises.push(this.issueCombinedWFS_(combinedWFSDataSources, options));
    var coordinate = options.coordinate;

    if (coordinate) {
      var combinedWMSDataSources = this.getCombinableWMSDataSources_(queryableDataSources.wms);
      promises.push(this.issueCombinedWMS_(combinedWMSDataSources, options));
    }

    return this.q_.all(promises).then(handleCombinedQueryResult_);
  };

  _proto.getQueryableDataSources = function getQueryableDataSources(dataSources, map) {
    var queryableDataSources = {
      wfs: [],
      wms: []
    };
    var resolution = map.getView().getResolution();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    for (var _iterator = _createForOfIteratorHelperLoose(dataSources), _step; !(_step = _iterator()).done;) {
      var dataSource = _step.value;

      if (!this.isDataSourceQueryable_(dataSource, resolution)) {
        continue;
      }

      if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
        if (dataSource.supportsWFS) {
          queryableDataSources.wfs.push(dataSource);
        } else {
          queryableDataSources.wms.push(dataSource);
        }
      }
    }

    return queryableDataSources;
  };

  _proto.wfsDescribeFeatureType = function wfsDescribeFeatureType(dataSource) {
    if (!dataSource.supportsAttributes) {
      throw "The data source must support WFS, have a single OGCLayer that\n      is queryable in order to issue WFS DescribeFeatureType requests";
    }

    if (!dataSource.wfsUrl) {
      throw new Error('Missing WFS URL');
    }

    var wfsLayerNames = dataSource.getWFSLayerNames();
    var url = Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_9__["appendParams"])(dataSource.wfsUrl, {
      'REQUEST': 'DescribeFeatureType',
      'SERVICE': 'WFS',
      'VERSION': '2.0.0',
      'TYPENAME': wfsLayerNames
    });
    return this.http_.get(url).then(function (response) {
      var format = new ngeo_WFSDescribeFeatureType_js__WEBPACK_IMPORTED_MODULE_6__["default"]();
      return format.read(response.data);
    });
  };

  _proto.wmsFindLayerCapability = function wmsFindLayerCapability(layerCapabilities, layerName) {
    var found = null;

    for (var _iterator2 = _createForOfIteratorHelperLoose(layerCapabilities), _step2; !(_step2 = _iterator2()).done;) {
      var layerCapability = _step2.value;

      if (layerCapability.Name === layerName) {
        found = layerCapability;
        break;
      } else if (layerCapability.Layer) {
        found = this.wmsFindLayerCapability(layerCapability.Layer, layerName);

        if (found) {
          break;
        }
      }
    }

    return found;
  };

  _proto.wmsGetCapabilities = function wmsGetCapabilities(baseUrl, opt_cache) {
    var cache = opt_cache !== false;
    var params = {
      'REQUEST': 'GetCapabilities',
      'SERVICE': 'WMS',
      'VERSION': '1.3.0'
    };
    var url = Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_9__["appendParams"])(baseUrl, params);
    var promise;

    if (!cache || !this.wmsGetCapabilitiesPromises_[baseUrl]) {
      promise = this.http_.get(url).then(function (response) {
        var format = new ol_format_WMSCapabilities_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
        return format.read(response.data);
      });
    } else if (cache && this.wmsGetCapabilitiesPromises_[baseUrl]) {
      promise = this.wmsGetCapabilitiesPromises_[baseUrl];
    }

    if (!promise) {
      throw new Error('Missing promise');
    }

    if (cache && !this.wmsGetCapabilitiesPromises_[baseUrl]) {
      this.wmsGetCapabilitiesPromises_[baseUrl] = promise;
    }

    return promise;
  };

  _proto.wmtsFindLayerCapability = function wmtsFindLayerCapability(layerCapabilities, layerName) {
    var found = null;

    for (var _iterator3 = _createForOfIteratorHelperLoose(layerCapabilities), _step3; !(_step3 = _iterator3()).done;) {
      var layerCapability = _step3.value;

      if (layerCapability.Identifier === layerName) {
        found = layerCapability;
        break;
      }
    }

    return found;
  };

  _proto.wmtsGetCapabilities = function wmtsGetCapabilities(url, opt_cache) {
    var cache = opt_cache !== false;
    var promise;

    if (!cache || !this.wmtsGetCapabilitiesPromises_[url]) {
      promise = this.http_.get(url).then(function (response) {
        var format = new ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_8__["default"]();
        return format.read(response.data);
      });
    } else if (cache && this.wmtsGetCapabilitiesPromises_[url]) {
      promise = this.wmtsGetCapabilitiesPromises_[url];
    }

    if (!promise) {
      throw new Error('Missing promise');
    }

    if (cache && !this.wmtsGetCapabilitiesPromises_[url]) {
      this.wmtsGetCapabilitiesPromises_[url] = promise;
    }

    return promise;
  };

  _proto.handleWFSQueryResult_ = function handleWFSQueryResult_(dataSources, maxFeatures, totalFeatureCount, wfs, response) {
    var hash = {};
    var formatWFS = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
    var limit = formatWFS.readFeatures(response.data).length;
    var tooManyFeatures = totalFeatureCount > limit;
    var datasourceNames = [];

    for (var _iterator4 = _createForOfIteratorHelperLoose(dataSources), _step4; !(_step4 = _iterator4()).done;) {
      var dataSource = _step4.value;
      var dataSourceId = dataSource.id;
      datasourceNames.push(dataSource.name);
      var features = dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] ? this.readAndTypeFeatures_(dataSource, response.data, wfs) : [];
      this.setUniqueIds_(features, dataSource.id);
      hash[dataSourceId] = {
        features: features,
        limit: limit,
        tooManyFeatures: tooManyFeatures,
        totalFeatureCount: totalFeatureCount
      };
    }

    Object.values(hash).forEach(function (value, index) {
      value.limit = limit;
      value.tooManyFeatures = tooManyFeatures;
      value.requestPartners = datasourceNames;
    });
    return hash;
  };

  _proto.handleQueryResult_ = function handleQueryResult_(dataSources, limit, wfs, response) {
    var hash = {};

    for (var _iterator5 = _createForOfIteratorHelperLoose(dataSources), _step5; !(_step5 = _iterator5()).done;) {
      var dataSource = _step5.value;
      var dataSourceId = dataSource.id;

      if (typeof response === 'number') {
        var features = [];
        var tooManyFeatures = true;
        var totalFeatureCount = response;
        this.setUniqueIds_(features, dataSource.id);
        hash[dataSourceId] = {
          features: features,
          limit: limit,
          tooManyFeatures: tooManyFeatures,
          totalFeatureCount: totalFeatureCount
        };
      } else {
        var _features = dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] ? this.readAndTypeFeatures_(dataSource, response.data, wfs) : [];

        this.setUniqueIds_(_features, dataSource.id);
        hash[dataSourceId] = {
          features: _features,
          limit: limit
        };
      }
    }

    return hash;
  };

  _proto.readAndTypeFeatures_ = function readAndTypeFeatures_(dataSource, data, wfs) {
    var _this = this;

    var features = [];
    var readFeatures;
    var featureTypes = this.getSetOlFormatTypes_(dataSource, wfs).slice();
    featureTypes.forEach(function (type) {
      _this.getSetOlFormatTypes_(dataSource, wfs, [type]);

      if (wfs) {
        if (!dataSource.wfsFormat) {
          throw new Error('Missing wfsFormat');
        }

        readFeatures = dataSource.wfsFormat.readFeatures(data);
      } else {
        if (!dataSource.wmsFormat) {
          throw new Error('Missing wmsFormat');
        }

        readFeatures = dataSource.wmsFormat.readFeatures(data);
      }

      if (readFeatures.length > 0) {
        readFeatures.forEach(function (feature) {
          feature.set('ngeo_feature_type_', type);
          features.push(feature);
        });
      }
    });
    this.getSetOlFormatTypes_(dataSource, wfs, featureTypes);
    return features;
  };

  _proto.getSetOlFormatTypes_ = function getSetOlFormatTypes_(dataSource, wfs, opt_types) {
    var types;

    if (wfs) {
      if (!dataSource.wfsFormat) {
        throw new Error('Missing wfsFormat');
      }

      if (opt_types) {
        dataSource.wfsFormat.setFeatureType(opt_types);
      }

      types = dataSource.wfsFormat.getFeatureType();
    } else {
      if (!dataSource.wmsFormat) {
        throw new Error('Missing wmsFormat');
      }

      if (opt_types) {
        dataSource.wmsFormat.setLayers(opt_types);
      }

      types = dataSource.wmsFormat.getLayers();
    }

    if (!types) {
      return [];
    }

    return Array.isArray(types) ? types : [types];
  };

  _proto.issueCombinedWFS_ = function issueCombinedWFS_(combinedDataSources, options) {
    var _this2 = this;

    var promises = [];
    var maxFeatures = options.limit;
    var map = options.map;
    var view = map.getView();
    var resolution = view.getResolution();
    var projection = view.getProjection();
    var srsName = projection.getCode();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    var bbox;
    var coordinate = options.coordinate;

    if (coordinate) {
      var tolerance = options.tolerance;
      console.assert(tolerance);
      bbox = ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["buffer"](ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["createOrUpdateFromCoordinate"](coordinate), tolerance * resolution);
    } else {
      bbox = options.extent;
    }

    var wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
    var xmlSerializer = new XMLSerializer();
    var hasAtLeastOneQueryIconPosition = false;

    var _loop = function _loop() {
      var dataSources = _step6.value;
      var getFeatureCommonOptions = null;
      var featureTypesNames = [];
      var featureTypesObjects = [];
      var url = null;
      var params = {};

      if (options.bboxAsGETParam && bbox) {
        params.bbox = bbox.join(',');
      }

      var _loop2 = function _loop2() {
        var dataSource = _step7.value;
        var currentFeatureTypesNames = dataSource.getInRangeWFSLayerNames(resolution, true);
        var geometryName = dataSource.geometryName(currentFeatureTypesNames[0]);

        if (!getFeatureCommonOptions) {
          var featureNS = dataSource.wfsFeatureNS;
          var featurePrefix = dataSource.wfsFeaturePrefix;
          var outputFormat = dataSource.wfsOutputFormat;

          if (!geometryName) {
            throw new Error('Missing geometryName');
          }

          getFeatureCommonOptions = {
            bbox: bbox,
            featureNS: featureNS,
            featurePrefix: featurePrefix,
            geometryName: geometryName,
            outputFormat: outputFormat,
            srsName: srsName,
            featureTypes: []
          };
          url = dataSource.wfsUrl;
          Object.assign(params, dataSource.activeDimensions);
        }

        featureTypesNames = featureTypesNames.concat(currentFeatureTypesNames);
        var filter = null;

        if (options.filter) {
          filter = _this2.ngeoRuleHelper_.createFilter({
            dataSource: dataSource,
            filter: options.filter,
            incDimensions: true,
            incTime: true
          });
        } else if (dataSource.filterRules && dataSource.filterRules.length || dataSource.timeRangeValue || dataSource.dimensionsFiltersConfig && Object.keys(dataSource.dimensionsFiltersConfig).length > 0) {
          console.assert(dataSources.length === 1 || !(dataSource.timeRangeValue || dataSource.filterRules && dataSource.filterRules.length), "A data source having filterRules or timeRangeValue should issue\n            a single query, alone.");
          filter = _this2.ngeoRuleHelper_.createFilter({
            dataSource: dataSource,
            incDimensions: true,
            incTime: true,
            srsName: srsName
          });
        }

        if (options.geometry) {
          var spatialFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_4__["intersects"](geometryName, options.geometry, srsName);
          filter = _this2.ngeoRuleHelper_.joinFilters(filter, spatialFilter);
        }

        if (filter) {
          getFeatureCommonOptions.filter = filter;
        }

        if (coordinate) {
          var queryIconPosition;

          if (dataSource.queryIconPosition) {
            hasAtLeastOneQueryIconPosition = true;
            queryIconPosition = _this2.makeBboxWithQueryIconPosition_(dataSource.queryIconPosition, resolution, coordinate);
            console.assert(queryIconPosition !== null, 'Bad queryIconPosition values');
            queryIconPosition = ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["extend"](queryIconPosition, bbox);
          }

          currentFeatureTypesNames.forEach(function (name) {
            featureTypesObjects.push({
              geometryName: geometryName,
              name: name,
              bbox: queryIconPosition || bbox
            });
          });
        }
      };

      for (var _iterator7 = _createForOfIteratorHelperLoose(dataSources), _step7; !(_step7 = _iterator7()).done;) {
        _loop2();
      }

      if (!getFeatureCommonOptions) {
        throw new Error('Missing getFeatureCommonOptions');
      }

      if (hasAtLeastOneQueryIconPosition) {
        getFeatureCommonOptions.featureTypes = featureTypesObjects;
        delete getFeatureCommonOptions.bbox;
        delete getFeatureCommonOptions.geometryName;
      } else {
        getFeatureCommonOptions.featureTypes = featureTypesNames;
      }

      if (!url) {
        throw new Error('Missing url');
      }

      var getCountOptions = Object.assign({
        resultType: 'hits'
      }, getFeatureCommonOptions);
      var featureCountXml = wfsFormat.writeGetFeature(getCountOptions);
      var featureCountRequest = xmlSerializer.serializeToString(featureCountXml);

      var canceler = _this2.registerCanceler_();

      var countPromise = new Promise(function (resolve, reject) {
        _this2.http_.post(url, featureCountRequest, {
          params: params,
          headers: {
            'Content-Type': 'text/xml; charset=UTF-8'
          },
          timeout: canceler.promise
        }).then(function (response) {
          if (!dataSources[0].wfsFormat) {
            throw new Error('Missing wfsFormat');
          }

          var metadata = dataSources[0].wfsFormat.readFeatureCollectionMetadata(response.data);

          if (!metadata) {
            throw new Error('Missing metadata');
          }

          var numberOfFeatures = metadata.numberOfFeatures;
          var getFeatureOptions = Object.assign({
            maxFeatures: maxFeatures
          }, getFeatureCommonOptions);
          var featureRequestXml = wfsFormat.writeGetFeature(getFeatureOptions);
          var featureRequest = xmlSerializer.serializeToString(featureRequestXml);

          if (typeof url !== 'string') {
            throw new Error('Wrong URL type');
          }

          var canceler = _this2.registerCanceler_();

          _this2.http_.post(url, featureRequest, {
            params: params,
            headers: {
              'Content-Type': 'text/xml; charset=UTF-8'
            },
            timeout: canceler.promise
          }).then(function (response) {
            var results = _this2.handleWFSQueryResult_(dataSources, maxFeatures, numberOfFeatures, true, response);

            resolve(results);
          });
        });
      });
      promises.push(countPromise);
    };

    for (var _iterator6 = _createForOfIteratorHelperLoose(combinedDataSources), _step6; !(_step6 = _iterator6()).done;) {
      _loop();
    }

    return Promise.all(promises).then(handleCombinedQueryResult_);
  };

  _proto.makeBboxWithQueryIconPosition_ = function makeBboxWithQueryIconPosition_(queryIconPosition, resolution, coordinate) {
    var bbox = ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["createOrUpdateFromCoordinate"](coordinate);
    var buffers = queryIconPosition.map(function (value) {
      return value * resolution;
    });
    var length = buffers.length;

    if (!length || length > 4) {
      return null;
    }

    if (length === 1) {
      return ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["buffer"](bbox, buffers[0]);
    }

    var fourValuesBuffers = [buffers[0], buffers[1], length === 2 ? buffers[0] : buffers[2], length === 4 ? buffers[3] : buffers[1]];
    return [bbox[0] - fourValuesBuffers[1], bbox[1] - fourValuesBuffers[0], bbox[2] + fourValuesBuffers[3], bbox[3] + fourValuesBuffers[2]];
  };

  _proto.issueCombinedWMS_ = function issueCombinedWMS_(combinedDataSources, options) {
    var promises = [];
    var FEATURE_COUNT = options.limit;
    var map = options.map;
    var view = map.getView();
    var resolution = view.getResolution();
    var projection = view.getProjection();
    var projCode = projection.getCode();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    var coordinate = options.coordinate;

    if (!coordinate) {
      throw new Error('Missing coordinate');
    }

    for (var _iterator8 = _createForOfIteratorHelperLoose(combinedDataSources), _step8; !(_step8 = _iterator8()).done;) {
      var dataSources = _step8.value;
      var url = void 0;
      var LAYERS = [];
      var INFO_FORMAT = void 0;
      var activeDimensionsSet = false;
      var params = {};
      var filterString = null;
      var filtrableLayerName = null;

      for (var _iterator9 = _createForOfIteratorHelperLoose(dataSources), _step9; !(_step9 = _iterator9()).done;) {
        var dataSource = _step9.value;

        if (!INFO_FORMAT) {
          INFO_FORMAT = dataSource.wmsInfoFormat;
          url = dataSource.wmsUrl;
        }

        LAYERS = LAYERS.concat(dataSource.getWMSLayerNames(true));

        if (!activeDimensionsSet) {
          Object.assign(params, dataSource.activeDimensions);
          activeDimensionsSet = true;
        }

        if (dataSource.filterRules && dataSource.filterRules.length) {
          console.assert(dataSources.length === 1);
          filtrableLayerName = dataSource.getFiltrableWFSLayerName();
          filterString = this.ngeoRuleHelper_.createFilterString({
            dataSource: dataSource,
            srsName: projCode
          });
        }

        if (dataSource.timeRangeValue && dataSource.timeProperty) {
          console.assert(dataSources.length === 1);
          params.TIME = this.ngeoWMSTime_.formatWMSTimeParam(dataSource.timeProperty, dataSource.timeRangeValue);
        }
      }

      params.LAYERS = LAYERS;
      params.QUERY_LAYERS = LAYERS;

      if (filterString && filtrableLayerName) {
        var filterParamValue = null;

        if (LAYERS.length === 1) {
          filterParamValue = filterString;
        } else {
          var filterParamValues = [];

          for (var i = 0, ii = LAYERS.length; i < ii; i++) {
            if (LAYERS[i] === filtrableLayerName) {
              filterParamValues.push("(" + filterString + ")");
            } else {
              filterParamValues.push('()');
            }
          }

          filterParamValue = filterParamValues.join('');
        }

        params.FILTER = filterParamValue;
      }

      if (!url) {
        throw new Error('Missing url');
      }

      var wmsSource = new ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        params: params,
        url: url,
        projection: map.getView().getProjection()
      });
      var wmsGetFeatureInfoUrl = wmsSource.getFeatureInfoUrl(coordinate, resolution, projCode, {
        'FEATURE_COUNT': FEATURE_COUNT,
        'INFO_FORMAT': INFO_FORMAT
      });

      if (!wmsGetFeatureInfoUrl) {
        throw new Error('Missing wmsGetFeatureInfoUrl');
      }

      var canceler = this.registerCanceler_();
      promises.push(this.http_.get(wmsGetFeatureInfoUrl, {
        timeout: canceler.promise
      }).then(this.handleQueryResult_.bind(this, dataSources, FEATURE_COUNT, false)));
    }

    return this.q_.all(promises).then(handleCombinedQueryResult_);
  };

  _proto.getCombinableWFSDataSources_ = function getCombinableWFSDataSources_(dataSources) {
    var combinableDataSources = [];
    var notCombinableDataSources = [];

    for (var _iterator10 = _createForOfIteratorHelperLoose(dataSources), _step10; !(_step10 = _iterator10()).done;) {
      var dataSource = _step10.value;

      if (dataSource.combinableForWFS) {
        var combined = false;

        for (var _iterator11 = _createForOfIteratorHelperLoose(combinableDataSources), _step11; !(_step11 = _iterator11()).done;) {
          var combinableDataSource = _step11.value;

          if (dataSource.combinableWithDataSourceForWFS(combinableDataSource[0])) {
            combinableDataSource.push(dataSource);
            combined = true;
          }
        }

        if (!combined) {
          combinableDataSources.push([dataSource]);
        }
      } else {
        notCombinableDataSources.push([dataSource]);
      }
    }

    return combinableDataSources.concat(notCombinableDataSources);
  };

  _proto.getCombinableWMSDataSources_ = function getCombinableWMSDataSources_(dataSources) {
    var combinableDataSources = [];
    var notCombinableDataSources = [];

    for (var _iterator12 = _createForOfIteratorHelperLoose(dataSources), _step12; !(_step12 = _iterator12()).done;) {
      var dataSource = _step12.value;

      if (dataSource.combinableForWMS) {
        var combined = false;

        for (var _iterator13 = _createForOfIteratorHelperLoose(combinableDataSources), _step13; !(_step13 = _iterator13()).done;) {
          var combinableDataSource = _step13.value;

          if (dataSource.combinableWithDataSourceForWMS(combinableDataSource[0])) {
            combinableDataSource.push(dataSource);
            combined = true;
          }
        }

        if (!combined) {
          combinableDataSources.push([dataSource]);
        }
      } else {
        notCombinableDataSources.push([dataSource]);
      }
    }

    return combinableDataSources.concat(notCombinableDataSources);
  };

  _proto.isDataSourceQueryable_ = function isDataSourceQueryable_(ds, res) {
    var queryable = ds.visible && ds.inRange && ds.queryable;

    if (queryable && ds instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] && ds.supportsWFS) {
      var ogcDS = ds;
      queryable = ogcDS.isAnyOGCLayerInRange(res, true);
    }

    return queryable;
  };

  _proto.setUniqueIds_ = function setUniqueIds_(features, dataSourceId) {
    features.forEach(function (feature) {
      if (feature.getId() !== undefined) {
        var id = dataSourceId + "_" + feature.getId();
        feature.setId(id);
      }
    });
  };

  _proto.registerCanceler_ = function registerCanceler_() {
    var canceler = this.q_.defer();
    this.requestCancelers_.push(canceler);
    return canceler;
  };

  _proto.cancelStillRunningRequests_ = function cancelStillRunningRequests_() {
    for (var _iterator14 = _createForOfIteratorHelperLoose(this.requestCancelers_), _step14; !(_step14 = _iterator14()).done;) {
      var canceler = _step14.value;
      canceler.resolve();
    }

    this.requestCancelers_.length = 0;
  };

  return Querent;
}();

function handleCombinedQueryResult_(response) {
  var combinedHash = {};

  for (var _iterator15 = _createForOfIteratorHelperLoose(response), _step15; !(_step15 = _iterator15()).done;) {
    var hash = _step15.value;

    for (var dataSourceIdStr in hash) {
      var dataSourceId = Number(dataSourceIdStr);
      combinedHash[dataSourceId] = hash[dataSourceId];
    }
  }

  return combinedHash;
}

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQuerent', [ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
myModule.service('ngeoQuerent', Querent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/query/component.js":
/*!********************************!*\
  !*** ./src/query/component.js ***!
  \********************************/
/*! exports provided: QueryController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryController", function() { return QueryController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/events.js */ "./src/events.js");
/* harmony import */ var ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Mode.js */ "./src/query/Mode.js");
/* harmony import */ var ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/query/ModeSelector.js */ "./src/query/ModeSelector.js");
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_events_condition_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/events/condition.js */ "./node_modules/ol/events/condition.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/layer.js */ "./node_modules/ol/layer.js");
/* harmony import */ var ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/MapBrowserEvent.js */ "./node_modules/ol/MapBrowserEvent.js");
/* harmony import */ var ol_source_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source.js */ "./node_modules/ol/source.js");











var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQuery', [ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name]);
var QueryController = function () {
  QueryController.$inject = ["ngeoMapQuerent", "ngeoQueryModeSelector", "$scope", "ngeoQueryOptions"];

  function QueryController(ngeoMapQuerent, ngeoQueryModeSelector, $scope, ngeoQueryOptions) {
    var _this = this;

    this.active;
    this.autoclear;
    this.map;
    this.ngeoMapQuerent_ = ngeoMapQuerent;
    this.ngeoQueryModeSelector_ = ngeoQueryModeSelector;
    this.ngeoQueryOptions_ = ngeoQueryOptions;
    this.scope_ = $scope;
    this.vectorSource_ = new ol_source_js__WEBPACK_IMPORTED_MODULE_10__["Vector"]({
      wrapX: false
    });
    this.vectorLayer_ = new ol_layer_js__WEBPACK_IMPORTED_MODULE_8__["Vector"]({
      source: this.vectorSource_
    });
    this.drawBoxInteraction_ = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      condition: ol_events_condition_js__WEBPACK_IMPORTED_MODULE_6__["always"],
      geometryFunction: Object(ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__["createBox"])(),
      source: this.vectorSource_,
      stopClick: true,
      type: 'Circle'
    });
    this.drawPolygonInteraction_ = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      condition: ol_events_condition_js__WEBPACK_IMPORTED_MODULE_6__["always"],
      source: this.vectorSource_,
      stopClick: true,
      type: 'Polygon'
    });
    this.listenerKeys_ = [];
    this.mode_ = null;
    $scope.$watch(function () {
      return _this.active;
    }, this.handleActiveChange_.bind(this));
    $scope.$watch(function () {
      var value = null;

      if (_this.active) {
        value = _this.ngeoQueryModeSelector_.mode;
      }

      return value;
    }, this.enableMode_.bind(this));
  }

  var _proto = QueryController.prototype;

  _proto.$onInit = function $onInit() {
    this.autoclear = !!this.autoclear;
  };

  _proto.$onDestroy = function $onDestroy() {
    this.enableMode_(null);
  };

  _proto.enableMode_ = function enableMode_(mode) {
    this.disableMode_();

    if (!mode) {
      return;
    }

    switch (mode) {
      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].CLICK:
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.map, 'singleclick', this.handleMapClick_, this));

        if (this.ngeoQueryOptions_.cursorHover) {
          this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.map, 'pointermove', this.handleMapPointerMove_, this));
        }

        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_BOX:
        this.map.addLayer(this.vectorLayer_);
        this.map.addInteraction(this.drawBoxInteraction_);
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.drawBoxInteraction_, 'drawend', this.handleDrawBoxInteractionDrawEnd_, this));
        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_POLYGON:
        this.map.addLayer(this.vectorLayer_);
        this.map.addInteraction(this.drawPolygonInteraction_);
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.drawPolygonInteraction_, 'drawend', this.handleDrawPolygonInteractionDrawEnd_, this));
        break;

      default:
        break;
    }

    this.mode_ = mode;
  };

  _proto.disableMode_ = function disableMode_() {
    if (!this.mode_) {
      return;
    }

    switch (this.mode_) {
      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].CLICK:
        if (this.ngeoQueryOptions_.cursorHover) {
          this.map.getTargetElement().style.cursor = '';
        }

        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_BOX:
        this.vectorSource_.clear();
        this.map.removeLayer(this.vectorLayer_);
        this.map.removeInteraction(this.drawBoxInteraction_);
        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_POLYGON:
        this.vectorSource_.clear();
        this.map.removeLayer(this.vectorLayer_);
        this.map.removeInteraction(this.drawPolygonInteraction_);
        break;

      default:
        break;
    }

    Object(ngeo_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKeys"])(this.listenerKeys_);
    this.mode_ = null;
  };

  _proto.getLimitOption_ = function getLimitOption_() {
    return this.ngeoQueryOptions_ && this.ngeoQueryOptions_.limit ? this.ngeoQueryOptions_.limit : undefined;
  };

  _proto.handleActiveChange_ = function handleActiveChange_(active) {
    if (!active) {
      if (this.autoclear) {
        this.ngeoMapQuerent_.clear();
      }
    }
  };

  _proto.handleDrawBoxInteractionDrawEnd_ = function handleDrawBoxInteractionDrawEnd_(evt) {
    var _this2 = this;

    var feature = evt.feature;
    var action = this.ngeoQueryModeSelector_.action;
    var extent = feature.getGeometry().getExtent();
    var limit = this.getLimitOption_();
    var map = this.map;
    this.ngeoQueryModeSelector_.pending = true;
    this.ngeoMapQuerent_.issue({
      action: action,
      extent: extent,
      limit: limit,
      map: map
    }).then(function () {}).catch(function () {}).then(function () {
      _this2.vectorSource_.clear();

      _this2.ngeoQueryModeSelector_.pending = false;
    });
  };

  _proto.handleDrawPolygonInteractionDrawEnd_ = function handleDrawPolygonInteractionDrawEnd_(evt) {
    var _this3 = this;

    var feature = evt.feature;
    var action = this.ngeoQueryModeSelector_.action;
    var geometry = feature.getGeometry();
    var limit = this.getLimitOption_();
    var map = this.map;
    this.ngeoQueryModeSelector_.pending = true;
    this.ngeoMapQuerent_.issue({
      action: action,
      geometry: geometry,
      limit: limit,
      map: map
    }).then(function () {}).catch(function () {}).then(function () {
      _this3.vectorSource_.clear();

      _this3.ngeoQueryModeSelector_.pending = false;
    });
  };

  _proto.handleMapClick_ = function handleMapClick_(evt) {
    var _this4 = this;

    if (!(evt instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_9__["default"])) {
      return;
    }

    var action = this.ngeoQueryModeSelector_.action;
    var coordinate = evt.coordinate;
    var map = this.map;
    this.ngeoQueryModeSelector_.pending = true;
    this.ngeoMapQuerent_.issue({
      action: action,
      coordinate: coordinate,
      map: map
    }).then(function () {}).catch(function () {}).then(function () {
      _this4.ngeoQueryModeSelector_.pending = false;
    });
  };

  _proto.handleMapPointerMove_ = function handleMapPointerMove_(evt) {
    if (!(evt instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_9__["default"]) || evt.dragging) {
      return;
    }

    var pixel = this.map.getEventPixel(evt.originalEvent);

    var queryable = function queryable(layer) {
      var visible = layer.get('visible');
      var sourceids = layer.get('querySourceIds');
      return visible && !!sourceids;
    };

    var hit = this.map.forEachLayerAtPixel(pixel, function () {
      return true;
    }, {
      layerFilter: queryable
    });
    this.map.getTargetElement().style.cursor = hit ? 'pointer' : '';
  };

  return QueryController;
}();
myModule.component('ngeoQuery', {
  bindings: {
    'active': '=',
    'autoclear': '=?',
    'map': '<'
  },
  controller: QueryController
});
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/rule/Date.js":
/*!**************************!*\
  !*** ./src/rule/Date.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    options.type = options.type || ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].DATE;
    return _ngeoRuleRule.call(this, options) || this;
  }

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/rule/Geometry.js":
/*!******************************!*\
  !*** ./src/rule/Geometry.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }







var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    var _this;

    options.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].GEOMETRY;
    _this = _ngeoRuleRule.call(this, options) || this;
    var properties = options.featureProperties || {};
    _this.feature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](properties);
    _this.format_ = new ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_4__["default"]();
    _this.updatingLiteral_ = false;
    _this.updatingGeometry_ = false;
    _this.geometryChangeListenerKey_ = null;

    _this.listenerKeys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(_this.feature_, "change:" + _this.feature.getGeometryName(), _this.handleFeatureGeometryChange_, _assertThisInitialized(_this)));

    _this.setGeometryFromLiteral_();

    return _this;
  }

  var _proto = _default.prototype;

  _proto.handleFeatureGeometryChange_ = function handleFeatureGeometryChange_() {
    if (this.updatingLiteral_) {
      return;
    }

    this.updatingGeometry_ = true;
    var geometry = this.feature_.getGeometry();

    if (geometry) {
      this.literal_ = this.format_.writeGeometry(geometry);
    } else {
      this.literal_ = null;
    }

    this.registerGeometryChange_();
    this.updatingGeometry_ = false;
  };

  _proto.handleGeometryChange_ = function handleGeometryChange_(evt) {
    var geometry = evt.target;
    this.updatingGeometry_ = true;
    this.literal_ = this.format_.writeGeometry(geometry);
    this.updatingGeometry_ = false;
  };

  _proto.setGeometryFromLiteral_ = function setGeometryFromLiteral_() {
    var geometry = null;

    if (this.literal) {
      var literal = "" + this.literal;
      geometry = this.format_.readGeometry(literal);
    }

    this.geometry = geometry;
  };

  _proto.registerGeometryChange_ = function registerGeometryChange_() {
    if (this.geometryChangeListenerKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"])(this.geometryChangeListenerKey_);
      this.geometryChangeListenerKey_ = null;
    }

    var geometry = this.feature_.getGeometry();

    if (geometry) {
      this.geometryChangeListenerKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(geometry, 'change', this.handleGeometryChange_, this);
    }
  };

  _createClass(_default, [{
    key: "feature",
    get: function get() {
      return this.feature_;
    }
  }, {
    key: "literal",
    get: function get() {
      return this.literal_;
    },
    set: function set(literal) {
      this.updatingLiteral_ = true;
      this.literal_ = literal;

      if (!this.updatingGeometry_) {
        this.setGeometryFromLiteral_();
      }

      this.registerGeometryChange_();
      this.updatingLiteral_ = false;
    }
  }, {
    key: "geometry",
    get: function get() {
      return this.feature_.getGeometry() || null;
    },
    set: function set(geometry) {
      this.feature_.setGeometry(geometry || undefined);
    }
  }]);

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/rule/Rule.js":
/*!**************************!*\
  !*** ./src/rule/Rule.js ***!
  \**************************/
/*! exports provided: RuleOperatorType, RuleSpatialOperatorType, RuleTemporalOperatorType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleOperatorType", function() { return RuleOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleSpatialOperatorType", function() { return RuleSpatialOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleTemporalOperatorType", function() { return RuleTemporalOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Rule; });
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


var RuleOperatorType = {
  BETWEEN: '..',
  EQUAL_TO: '=',
  GREATER_THAN: '>',
  GREATER_THAN_OR_EQUAL_TO: '>=',
  LESSER_THAN: '<',
  LESSER_THAN_OR_EQUAL_TO: '<=',
  LIKE: '~',
  NOT_EQUAL_TO: '!='
};
var RuleSpatialOperatorType = {
  CONTAINS: 'contains',
  INTERSECTS: 'intersects',
  WITHIN: 'within'
};
var RuleTemporalOperatorType = {
  BEGINS: 'time_start',
  DURING: 'time_during',
  ENDS: 'time_end',
  EQUALS: 'time_equal'
};

var Rule = function () {
  function Rule(options) {
    this.active = options.active === true;
    this.literal_ = options.literal !== undefined ? options.literal : null;
    this.lowerBoundary = options.lowerBoundary !== undefined ? options.lowerBoundary : null;
    this.operator = options.operator || null;
    this.upperBoundary = options.upperBoundary !== undefined ? options.upperBoundary : null;
    this.isCustom_ = options.isCustom !== false;
    this.name_ = options.name;
    this.operators_ = options.operators || null;
    this.propertyName_ = options.propertyName;
    this.type_ = options.type;
    this.listenerKeys = [];
  }

  var _proto = Rule.prototype;

  _proto.reset = function reset() {
    if (this.literal !== null) {
      this.literal = null;
    }

    if (this.lowerBoundary !== null) {
      this.lowerBoundary = null;
    }

    if (this.upperBoundary !== null) {
      this.upperBoundary = null;
    }
  };

  _proto.destroy = function destroy() {
    this.listenerKeys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_0__["unlistenByKey"]);
    this.listenerKeys.length = 0;
  };

  _createClass(Rule, [{
    key: "literal",
    get: function get() {
      return this.literal_;
    },
    set: function set(literal) {
      this.literal_ = literal;
    }
  }, {
    key: "isCustom",
    get: function get() {
      return this.isCustom_;
    }
  }, {
    key: "name",
    get: function get() {
      return this.name_;
    }
  }, {
    key: "operators",
    get: function get() {
      return this.operators_;
    }
  }, {
    key: "propertyName",
    get: function get() {
      return this.propertyName_;
    }
  }, {
    key: "type",
    get: function get() {
      return this.type_;
    }
  }, {
    key: "value",
    get: function get() {
      var value = null;
      var literal = this.literal;
      var lowerBoundary = this.lowerBoundary;
      var operator = this.operator;
      var propertyName = this.propertyName;
      var upperBoundary = this.upperBoundary;

      if (operator) {
        if (operator === RuleOperatorType.BETWEEN || operator === RuleTemporalOperatorType.DURING) {
          if (lowerBoundary !== null && upperBoundary !== null) {
            value = {
              operator: operator,
              lowerBoundary: lowerBoundary,
              propertyName: propertyName,
              upperBoundary: upperBoundary
            };
          }
        } else {
          if (literal !== null) {
            value = {
              literal: literal,
              operator: operator,
              propertyName: propertyName
            };
          }
        }
      }

      return value;
    }
  }]);

  return Rule;
}();



/***/ }),

/***/ "./src/rule/Select.js":
/*!****************************!*\
  !*** ./src/rule/Select.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    var _this;

    options.operator = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["RuleOperatorType"].EQUAL_TO;
    options.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].SELECT;
    _this = _ngeoRuleRule.call(this, options) || this;
    _this.choices_ = options.choices;
    return _this;
  }

  _createClass(_default, [{
    key: "choices",
    get: function get() {
      return this.choices_;
    }
  }, {
    key: "selectedChoices",
    get: function get() {
      var selectedChoices;

      if (this.literal) {
        selectedChoices = this.literal;
      } else {
        selectedChoices = [];
      }

      return selectedChoices;
    }
  }]);

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/rule/Text.js":
/*!**************************!*\
  !*** ./src/rule/Text.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }




var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    options.operator = options.operator || ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["RuleOperatorType"].LIKE;
    options.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].TEXT;
    return _ngeoRuleRule.call(this, options) || this;
  }

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/sass/font.scss":
/*!****************************!*\
  !*** ./src/sass/font.scss ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./src/sass/jquery-ui.scss":
/*!*********************************!*\
  !*** ./src/sass/jquery-ui.scss ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./src/search/createGeoJSONBloodhound.js":
/*!***********************************************!*\
  !*** ./src/search/createGeoJSONBloodhound.js ***!
  \***********************************************/
/*! exports provided: createGeoJSONBloodhound, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGeoJSONBloodhound", function() { return createGeoJSONBloodhound; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! corejs-typeahead */ "./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(corejs_typeahead__WEBPACK_IMPORTED_MODULE_2__);



function createGeoJSONBloodhound(url, opt_filter, opt_featureProjection, opt_dataProjection, opt_options, opt_remoteOptions) {
  var geojsonFormat = new ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
  var bloodhoundOptions = {
    remote: {
      url: url,
      prepare: function prepare(query, settings) {
        if (settings.url) {
          settings.url = settings.url.replace('%QUERY', query);
        }

        return settings;
      },
      transform: function transform(parsedResponse) {
        var featureCollection = parsedResponse;

        if (opt_filter !== undefined) {
          featureCollection = {
            type: 'FeatureCollection',
            features: featureCollection.features.filter(opt_filter)
          };
        }

        return geojsonFormat.readFeatures(featureCollection, {
          featureProjection: opt_featureProjection,
          dataProjection: opt_dataProjection
        });
      }
    },
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  };
  var options = Object.assign({}, opt_options || {
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  });
  var remoteOptions = Object.assign({}, opt_remoteOptions || {});

  if (options.remote) {
    Object.assign(remoteOptions, options.remote);
    delete options.remote;
  }

  Object.assign(bloodhoundOptions, options);
  Object.assign(bloodhoundOptions.remote, remoteOptions);
  return new Bloodhound(bloodhoundOptions);
}
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSearchCreategeojsonbloodhound', []);
myModule.value('ngeoSearchCreateGeoJSONBloodhound', createGeoJSONBloodhound);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/search/createLocationSearchBloodhound.js":
/*!******************************************************!*\
  !*** ./src/search/createLocationSearchBloodhound.js ***!
  \******************************************************/
/*! exports provided: createLocationSearchBloodhound, createLocationSearchBloodhoundFunction, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLocationSearchBloodhound", function() { return createLocationSearchBloodhound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLocationSearchBloodhoundFunction", function() { return createLocationSearchBloodhoundFunction; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var _geoblocks_proj_EPSG_21781_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @geoblocks/proj/EPSG_21781.js */ "./node_modules/@geoblocks/proj/src/EPSG_21781.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! corejs-typeahead */ "./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(corejs_typeahead__WEBPACK_IMPORTED_MODULE_5__);






function createLocationSearchBloodhound(opt_options) {
  var options = opt_options || {};
  var sourceProjection = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["get"](_geoblocks_proj_EPSG_21781_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
  var targetProjection = options.targetProjection;

  var parseBbox = function parseBbox(bbox) {
    var regex = /BOX\((.*?) (.*?),(.*?) (.*?)\)/g;
    var match = regex.exec(bbox);

    if (match !== null) {
      return [parseFloat(match[1]), parseFloat(match[2]), parseFloat(match[3]), parseFloat(match[4])];
    } else {
      return null;
    }
  };

  var removeHtmlTags = function removeHtmlTags(label) {
    return label.replace(/<\/?[ib]>/g, '');
  };

  var extractName = function extractName(label) {
    var regex = /<b>(.*?)<\/b>/g;
    var match = regex.exec(label);

    if (match !== null) {
      return match[1];
    } else {
      return label;
    }
  };

  var bloodhoundOptions = {
    remote: {
      url: 'https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY',
      prepare: function prepare(query, settings) {
        if (settings.url) {
          settings.url = settings.url.replace('%QUERY', query);

          if (options.limit !== undefined) {
            settings.url += "&limit=" + options.limit;
          }

          if (options.origins !== undefined) {
            settings.url += "&origins=" + options.origins;
          }
        }

        return options.prepare !== undefined ? options.prepare(query, settings) : settings;
      },
      transform: function transform(parsedResponse_) {
        var parsedResponse = parsedResponse_;

        if (Array.isArray(parsedResponse)) {
          throw new Error('Wrong parsedResponse type');
        }

        var features = parsedResponse.results.map(function (result) {
          var attrs = result.attrs;
          var point = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__["default"]([attrs.y, attrs.x]);
          var bbox = parseBbox(attrs.geom_st_box2d);

          if (targetProjection !== undefined) {
            point.transform(sourceProjection, targetProjection);

            if (bbox !== null) {
              bbox = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["transformExtent"](bbox, sourceProjection, targetProjection);
            }
          }

          attrs.geometry = point;
          attrs.bbox = bbox;
          var label = attrs.label;
          attrs.label_no_html = removeHtmlTags(label);
          attrs.label_simple = extractName(label);
          var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__["default"](attrs);
          feature.setId(attrs.featureId);
          return feature;
        });
        return features;
      }
    },
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  };
  var bhOptions = Object.assign({}, options.options || {
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  });
  var remoteOptions = Object.assign({}, options.remoteOptions || {});

  if (bhOptions.remote) {
    Object.assign(remoteOptions, bhOptions.remote);
    delete bhOptions.remote;
  }

  Object.assign(bloodhoundOptions, bhOptions);
  Object.assign(bloodhoundOptions.remote, remoteOptions);
  return new Bloodhound(bloodhoundOptions);
}
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCreateLocationSearchBloodhound', []);
myModule.value('ngeoCreateLocationSearchBloodhound', createLocationSearchBloodhound);
function createLocationSearchBloodhoundFunction() {}
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/search/module.js":
/*!******************************!*\
  !*** ./src/search/module.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_search_searchDirective_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/search/searchDirective.js */ "./src/search/searchDirective.js");
/* harmony import */ var ngeo_search_createGeoJSONBloodhound_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/search/createGeoJSONBloodhound.js */ "./src/search/createGeoJSONBloodhound.js");
/* harmony import */ var ngeo_search_createLocationSearchBloodhound_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/search/createLocationSearchBloodhound.js */ "./src/search/createLocationSearchBloodhound.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSearchModule', [ngeo_search_searchDirective_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_search_createGeoJSONBloodhound_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_search_createLocationSearchBloodhound_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./src/search/searchDirective.js":
/*!***************************************!*\
  !*** ./src/search/searchDirective.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);


function searchComponent() {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var typeaheadOptionsExpr = attrs.ngeoSearch;
      var typeaheadOptions = scope.$eval(typeaheadOptionsExpr);
      var typeaheadDatasetsExpr = attrs.ngeoSearchDatasets;
      var typeaheadDatasets = scope.$eval(typeaheadDatasetsExpr);
      element.typeahead(typeaheadOptions, typeaheadDatasets);
      var typeaheadListenersExpr = attrs.ngeoSearchListeners;
      var typeaheadListeners_ = scope.$eval(typeaheadListenersExpr);
      var typeaheadListeners = adaptListeners_(typeaheadListeners_);
      element.on('typeahead:open', function () {
        scope.$apply(function () {
          typeaheadListeners.open();
        });
      });
      element.on('typeahead:close', function () {
        scope.$apply(function () {
          typeaheadListeners.close();
        });
      });
      element.on('typeahead:cursorchange', function (event, suggestion, dataset) {
        scope.$apply(function () {
          typeaheadListeners.cursorchange(event, suggestion, dataset);
        });
      });
      element.on('typeahead:select', function (event, suggestion, dataset) {
        scope.$apply(function () {
          typeaheadListeners.select(event, suggestion, dataset);
        });
      });
      element.on('typeahead:autocomplete', function (event, suggestion, dataset) {
        scope.$apply(function () {
          typeaheadListeners.autocomplete(event, suggestion, dataset);
        });
      });
      element.on('typeahead:asyncreceive', function (event, dataset, query) {
        scope.$apply(function () {
          var empty = element.data('tt-typeahead').menu._allDatasetsEmpty();

          typeaheadListeners.datasetsempty(event, query, empty);
        });
      });
      element.on('typeahead:change', function (event) {
        scope.$apply(function () {
          var query = element.data('tt-typeahead').input.query;
          typeaheadListeners.change(event, query);
        });
      });
      element.on('typeahead:asyncrequest', function () {
        element.parent().addClass('search-loading');
      });
      element.on('typeahead:asynccancel typeahead:asyncreceive', function () {
        setTimeout(function () {
          element.parent().removeClass('search-loading');
        }, 50);
      });
    }
  };
}

function adaptListeners_(object) {
  var typeaheadListeners;

  if (object === undefined) {
    typeaheadListeners = {
      open: function open() {},
      close: function close() {},
      cursorchange: function cursorchange() {},
      datasetsempty: function datasetsempty() {},
      select: function select() {},
      autocomplete: function autocomplete() {},
      change: function change() {}
    };
  } else {
    typeaheadListeners = {
      open: object.open !== undefined ? object.open : function () {},
      close: object.close !== undefined ? object.close : function () {},
      cursorchange: object.cursorchange !== undefined ? object.cursorchange : function () {},
      datasetsempty: object.datasetsempty !== undefined ? object.datasetsempty : function () {},
      select: object.select !== undefined ? object.select : function () {},
      autocomplete: object.autocomplete !== undefined ? object.autocomplete : function () {},
      change: object.change !== undefined ? object.change : function () {}
    };
  }

  return typeaheadListeners;
}

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSearchDirective', []);
myModule.directive('ngeoSearch', searchComponent);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/statemanager/Location.js":
/*!**************************************!*\
  !*** ./src/statemanager/Location.js ***!
  \**************************************/
/*! exports provided: StatemanagerLocation, LocationFactory, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StatemanagerLocation", function() { return StatemanagerLocation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocationFactory", function() { return LocationFactory; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
LocationFactory.$inject = ["$rootScope", "$window"];


function StatemanagerLocation(location, history) {
  this.history_ = history;
  this.schema_ = location.protocol.substring(0, location.protocol.length - 1);
  this.domain_ = location.hostname;
  this.port_ = location.port ? parseInt(location.port, 10) : undefined;
  this.path_ = location.pathname;
  this.queryData_ = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["decodeQueryString"])(location.search);
  this.fragment_ = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["decodeQueryString"])(location.hash);
}

function replaceState(history, state) {
  try {
    history.replaceState(null, '', state);
  } catch (error) {}
}

StatemanagerLocation.prototype.getPath = function () {
  return this.path_;
};

StatemanagerLocation.prototype.getUriString = function () {
  var out = [];

  if (this.schema_) {
    out.push(this.schema_, ':');
  }

  if (this.domain_ || this.schema_ === 'file') {
    out.push('//');
    out.push(this.domain_);

    if (this.port_ !== undefined) {
      out.push(':', String(this.port_));
    }
  }

  if (this.path_) {
    if (this.domain_ && !this.path_.startsWith('/')) {
      out.push('/');
    }

    out.push(this.path_);
  }

  var encodedQueryData = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["encodeQueryString"])(this.queryData_);

  if (encodedQueryData.length > 0) {
    out.push('?', encodedQueryData);
  }

  var encodedFragment = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["encodeQueryString"])(this.fragment_);

  if (encodedFragment.length > 0) {
    out.push('#', encodedFragment);
  }

  return out.join('');
};

StatemanagerLocation.prototype.hasParam = function (key) {
  return key in this.queryData_;
};

StatemanagerLocation.prototype.hasFragmentParam = function (key) {
  return key in this.fragment_;
};

StatemanagerLocation.prototype.getParam = function (key) {
  return this.queryData_[key];
};

StatemanagerLocation.prototype.getFragmentParam = function (key) {
  return this.fragment_[key];
};

StatemanagerLocation.prototype.getParamAsInt = function (key) {
  var value = this.getParam(key);

  if (value === undefined) {
    return undefined;
  }

  console.assert(typeof value == 'string');
  var valueAsInt = parseInt(value, 10);
  return isNaN(valueAsInt) ? undefined : valueAsInt;
};

StatemanagerLocation.prototype.getParamAsFloat = function (key) {
  var value = this.getParam(key);

  if (value === undefined) {
    return undefined;
  }

  console.assert(typeof value == 'string');
  var valueAsFloat = parseFloat(value);
  return isNaN(valueAsFloat) ? undefined : valueAsFloat;
};

StatemanagerLocation.prototype.getFragmentParamAsInt = function (key) {
  var value = this.getFragmentParam(key);

  if (value === undefined) {
    return undefined;
  }

  console.assert(typeof value == 'string');
  var valueAsInt = parseInt(value, 10);
  return isNaN(valueAsInt) ? undefined : valueAsInt;
};

StatemanagerLocation.prototype.getParamKeys = function () {
  var keys = [];

  for (var key in this.queryData_) {
    keys.push(key);
  }

  return keys;
};

StatemanagerLocation.prototype.getFragmentParamKeys = function () {
  var keys = [];

  for (var key in this.fragment_) {
    keys.push(key);
  }

  return keys;
};

StatemanagerLocation.prototype.getParamKeysWithPrefix = function (prefix) {
  var keys = [];

  for (var key in this.queryData_) {
    if (key.startsWith(prefix)) {
      keys.push(key);
    }
  }

  return keys;
};

StatemanagerLocation.prototype.getFragmentParamKeysWithPrefix = function (prefix) {
  var keys = [];

  for (var key in this.fragment_) {
    if (key.startsWith(prefix)) {
      keys.push(key);
    }
  }

  return keys;
};

StatemanagerLocation.prototype.updateParams = function (params) {
  for (var key in params) {
    this.queryData_[key] = params[key];
  }
};

StatemanagerLocation.prototype.updateFragmentParams = function (params) {
  for (var key in params) {
    this.fragment_[key] = params[key];
  }
};

StatemanagerLocation.prototype.deleteParam = function (key) {
  delete this.queryData_[key];
};

StatemanagerLocation.prototype.deleteFragmentParam = function (key) {
  delete this.fragment_[key];
};

StatemanagerLocation.prototype.refresh = function () {
  replaceState(this.history_, this.getUriString());
};

StatemanagerLocation.prototype.setPath = function (path) {
  this.path_ = path;
};

function LocationFactory($rootScope, $window) {
  var history = $window.history;
  var service = new StatemanagerLocation($window.location, $window.history);
  var lastUri = service.getUriString();
  $rootScope.$watch(function () {
    var newUri = service.getUriString();

    if (lastUri !== newUri) {
      $rootScope.$evalAsync(function () {
        lastUri = newUri;

        if (history !== undefined && history.replaceState !== undefined) {
          replaceState(history, newUri);
        }

        $rootScope.$broadcast('ngeoLocationChange');
      });
    }
  });
  return service;
}
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLocation', []);
myModule.factory('ngeoLocation', LocationFactory);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/statemanager/Service.js":
/*!*************************************!*\
  !*** ./src/statemanager/Service.js ***!
  \*************************************/
/*! exports provided: StatemanagerService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StatemanagerService", function() { return StatemanagerService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/statemanager/Location.js */ "./src/statemanager/Location.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var StatemanagerService = function () {
  StatemanagerService.$inject = ["ngeoLocation", "ngeoUsedKeyRegexp"];

  function StatemanagerService(ngeoLocation, ngeoUsedKeyRegexp) {
    var _this = this;

    this.initialState = {};
    this.ngeoLocation = ngeoLocation;
    this.usedKeyRegexp = [];

    for (var _iterator = _createForOfIteratorHelperLoose(ngeoUsedKeyRegexp), _step; !(_step = _iterator()).done;) {
      var reg = _step.value;
      this.usedKeyRegexp.push(RegExp(reg));
    }

    this.useLocalStorage_ = false;
    this.setUseLocalStorage(false);
    var paramKeys = ngeoLocation.getParamKeys().filter(function (key) {
      return key != 'debug' && key != 'no_redirect';
    });

    if (paramKeys.length === 0) {
      if (this.useLocalStorage_) {
        var _loop = function _loop(key) {
          console.assert(key);

          _this.usedKeyRegexp.some(function (keyRegexp) {
            if (key.match(keyRegexp)) {
              var value = window.localStorage[key];

              if (value !== undefined || value !== null) {
                _this.initialState[key] = value;
              } else {
                _this.initialState[key] = '';
              }

              return true;
            }

            return false;
          });
        };

        for (var key in window.localStorage) {
          _loop(key);
        }
      }
    } else {
      paramKeys.forEach(function (key) {
        _this.usedKeyRegexp.some(function (keyRegexp) {
          if (key.match(keyRegexp)) {
            var value = _this.ngeoLocation.getParam(key);

            if (value !== undefined) {
              _this.initialState[key] = value;
              return true;
            }
          }

          return false;
        });
      });
    }
  }

  var _proto = StatemanagerService.prototype;

  _proto.setUseLocalStorage = function setUseLocalStorage(value) {
    this.useLocalStorage_ = value;

    if (this.useLocalStorage_) {
      try {
        if ('localStorage' in window) {
          window.localStorage['test'] = '';
          delete window.localStorage['test'];
        } else {
          this.useLocalStorage_ = false;
        }
      } catch (err) {
        console.error(err);
        this.useLocalStorage_ = false;
      }
    }

    return this.useLocalStorage_;
  };

  _proto.getInitialStringValue = function getInitialStringValue(key) {
    return this.initialState[key];
  };

  _proto.getInitialNumberValue = function getInitialNumberValue(key) {
    var value = this.initialState[key];

    if (value === undefined) {
      return undefined;
    }

    return parseFloat(value);
  };

  _proto.getInitialBooleanValue = function getInitialBooleanValue(key) {
    var value = this.initialState[key];

    if (value === undefined) {
      return undefined;
    }

    return value === 'true';
  };

  _proto.updateState = function updateState(object) {
    this.ngeoLocation.updateParams(object);

    if (this.useLocalStorage_) {
      for (var key in object) {
        console.assert(key);
        var value = object[key];
        console.assert(value !== undefined);
        window.localStorage[key] = value;
      }
    }
  };

  _proto.deleteParam = function deleteParam(key) {
    this.ngeoLocation.deleteParam(key);

    if (this.useLocalStorage_) {
      delete window.localStorage[key];
    }
  };

  return StatemanagerService;
}();
var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoStateManager', [ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
myModule.service('ngeoStateManager', StatemanagerService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/statemanager/WfsPermalink.js":
/*!******************************************!*\
  !*** ./src/statemanager/WfsPermalink.js ***!
  \******************************************/
/*! exports provided: WfsPermalinkService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WfsPermalinkService", function() { return WfsPermalinkService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/format/filter.js */ "./node_modules/ol/format/filter.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
WfsPermalinkService.$inject = ["$http", "ngeoPermalinkOgcserverUrl", "ngeoQueryResult", "ngeoWfsPermalinkOptions"];





function WfsPermalinkService($http, ngeoPermalinkOgcserverUrl, ngeoQueryResult, ngeoWfsPermalinkOptions) {
  var _this = this;

  var options = ngeoWfsPermalinkOptions;
  this.url_ = ngeoPermalinkOgcserverUrl;
  this.maxFeatures_ = options.maxFeatures !== undefined ? options.maxFeatures : 50;
  this.wfsTypes_ = {};
  console.assert(Array.isArray(options.wfsTypes), 'wfsTypes is not correctly set');
  options.wfsTypes.forEach(function (wfsType) {
    _this.wfsTypes_[wfsType.featureType] = wfsType;
  });
  this.defaultFeatureNS_ = options.defaultFeatureNS;
  this.defaultFeaturePrefix_ = options.defaultFeaturePrefix;
  this.pointRecenterZoom_ = options.pointRecenterZoom;
  this.$http_ = $http;
  this.result_ = ngeoQueryResult;
}

WfsPermalinkService.prototype.clear = function () {
  this.clearResult_();
};

WfsPermalinkService.prototype.issue = function (queryData, map, zoomLevel) {
  if (zoomLevel === void 0) {
    zoomLevel = undefined;
  }

  console.assert(this.url_, 'url is not set. to use the wfs permalink service, ' + 'set the value `ngeoWfsPermalinkOptions`');
  this.clearResult_();
  var typeName = queryData.wfsType;

  if (!this.wfsTypes_.hasOwnProperty(typeName)) {
    return;
  }

  var wfsType = this.wfsTypes_[typeName];
  var filters = this.createFilters_(queryData.filterGroups);

  if (filters === null) {
    return;
  }

  this.issueRequest_(wfsType, filters, map, queryData.showFeatures, zoomLevel);
};

WfsPermalinkService.prototype.issueRequest_ = function (wfsType, filter, map, showFeatures, zoomLevel) {
  var _this2 = this;

  if (zoomLevel === void 0) {
    zoomLevel = undefined;
  }

  var wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_4__["default"]();
  var featureRequestXml = wfsFormat.writeGetFeature({
    srsName: map.getView().getProjection().getCode(),
    featureNS: wfsType.featureNS !== undefined ? wfsType.featureNS : this.defaultFeatureNS_,
    featurePrefix: wfsType.featurePrefix !== undefined ? wfsType.featurePrefix : this.defaultFeaturePrefix_,
    featureTypes: [wfsType.featureType],
    outputFormat: 'GML3',
    filter: filter,
    maxFeatures: this.maxFeatures_
  });
  var featureRequest = new XMLSerializer().serializeToString(featureRequestXml);
  var config = {
    headers: {
      'Content-Type': 'text/xml; charset=UTF-8'
    }
  };
  this.$http_.post(this.url_, featureRequest, config).then(function (response) {
    var features = wfsFormat.readFeatures(response.data);

    if (features.length == 0) {
      return;
    }

    var size = map.getSize();

    if (size !== undefined) {
      var maxZoom = zoomLevel === undefined ? _this2.pointRecenterZoom_ : zoomLevel;
      var padding = [10, 10, 10, 10];
      map.getView().fit(_this2.getExtent_(features), {
        size: size,
        maxZoom: maxZoom,
        padding: padding
      });
    }

    if (showFeatures) {
      var resultSource = {
        'features': features,
        'id': wfsType.featureType,
        'identifierAttributeField': wfsType.label,
        'label': wfsType.featureType,
        'pending': false
      };

      _this2.result_.sources.push(resultSource);

      _this2.result_.total = features.length;
    }
  });
};

WfsPermalinkService.prototype.getExtent_ = function (features) {
  return features.reduce(function (extent, feature) {
    if (feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]) {
      var geometry = feature.getGeometry();

      if (geometry) {
        return Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_1__["extend"])(extent, geometry.getExtent());
      }

      return extent;
    }
  }, Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_1__["createEmpty"])());
};

WfsPermalinkService.prototype.createFilters_ = function (filterGroups) {
  if (filterGroups.length == 0) {
    return null;
  }

  var createFiltersForGroup = function createFiltersForGroup(filterGroup) {
    var filters = filterGroup.filters.map(function (filterDef) {
      var condition = filterDef.condition;

      if (Array.isArray(condition)) {
        return WfsPermalinkService.or_(condition.map(function (cond) {
          return Object(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["equalTo"])(filterDef.property, cond);
        }));
      } else {
        return Object(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["equalTo"])(filterDef.property, condition);
      }
    });
    return WfsPermalinkService.and_(filters);
  };

  var filters = filterGroups.map(createFiltersForGroup);

  if (filters) {
    return WfsPermalinkService.or_(filters);
  }

  return null;
};

WfsPermalinkService.and_ = function (filters) {
  return WfsPermalinkService.joinFilters_(filters, ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["and"]);
};

WfsPermalinkService.or_ = function (filters) {
  return WfsPermalinkService.joinFilters_(filters, ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["or"]);
};

WfsPermalinkService.joinFilters_ = function (filters, joinFn) {
  return filters.reduce(function (combinedFilters, currentFilter) {
    if (combinedFilters === null) {
      return currentFilter;
    } else {
      console.assert(currentFilter !== null);
      return joinFn(combinedFilters, currentFilter);
    }
  });
};

WfsPermalinkService.prototype.clearResult_ = function () {
  this.result_.total = 0;
  this.result_.sources.forEach(function (source) {
    source.features.length = 0;
  });
};

var myModule = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoWfsPermalink', []);
myModule.service('ngeoWfsPermalink', WfsPermalinkService);
/* harmony default export */ __webpack_exports__["default"] = (myModule);

/***/ }),

/***/ "./src/statemanager/module.js":
/*!************************************!*\
  !*** ./src/statemanager/module.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/statemanager/Location.js */ "./src/statemanager/Location.js");
/* harmony import */ var ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/statemanager/Service.js */ "./src/statemanager/Service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoStatemanagerModule', [ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: isEventUsinCtrlKey, isPlatformModifierKeyOnly, isShiftKeyOnly, hasCoarsePointingDevice, getBrowserLanguage, toMulti, isSafari, colorZeroPadding, rgbArrayToHex, decodeQueryString, encodeQueryString, deleteCondition, extentToRectangle, dpi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEventUsinCtrlKey", function() { return isEventUsinCtrlKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPlatformModifierKeyOnly", function() { return isPlatformModifierKeyOnly; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isShiftKeyOnly", function() { return isShiftKeyOnly; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasCoarsePointingDevice", function() { return hasCoarsePointingDevice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBrowserLanguage", function() { return getBrowserLanguage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toMulti", function() { return toMulti; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSafari", function() { return isSafari; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "colorZeroPadding", function() { return colorZeroPadding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbArrayToHex", function() { return rgbArrayToHex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeQueryString", function() { return decodeQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "encodeQueryString", function() { return encodeQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteCondition", function() { return deleteCondition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extentToRectangle", function() { return extentToRectangle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dpi", function() { return dpi; });
/* harmony import */ var ol_events_condition_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events/condition.js */ "./node_modules/ol/events/condition.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/MultiPoint.js */ "./node_modules/ol/geom/MultiPoint.js");
/* harmony import */ var ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/MultiLineString.js */ "./node_modules/ol/geom/MultiLineString.js");
/* harmony import */ var ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/geom/MultiPolygon.js */ "./node_modules/ol/geom/MultiPolygon.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/has.js */ "./node_modules/ol/has.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }










function isEventUsinCtrlKey(evt) {
  if (!evt) {
    return false;
  }

  return (ol_has_js__WEBPACK_IMPORTED_MODULE_8__["MAC"] ? evt.metaKey : evt.ctrlKey) || evt.key === 'Control';
}
function isPlatformModifierKeyOnly(evt) {
  return !evt.altKey && isEventUsinCtrlKey(evt) && !evt.shiftKey;
}
function isShiftKeyOnly(evt) {
  return !evt.altKey && !isEventUsinCtrlKey(evt) && evt.shiftKey;
}
function hasCoarsePointingDevice() {
  return matchMedia('(pointer: coarse)').matches;
}
function getBrowserLanguage(availableLanguages) {
  var browserLanguages = window.navigator.languages || [window.navigator.language];
  browserLanguages = browserLanguages.map(function (item) {
    return item.substring(0, 2);
  });
  browserLanguages = browserLanguages.filter(function (item, index, arr) {
    return arr.indexOf(item) == index;
  });
  var supportedLanguages = browserLanguages.filter(function (item) {
    return availableLanguages.includes(item);
  });
  return supportedLanguages[0];
}
function toMulti(geometry) {
  var multiGeom;

  if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
    var multiGeomPoint = new ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_2__["default"]([]);
    multiGeomPoint.appendPoint(geometry);
    multiGeom = multiGeomPoint;
  } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
    var multiGeomLine = new ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_3__["default"]([]);
    multiGeomLine.appendLineString(geometry);
    multiGeom = multiGeomLine;
  } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
    var multiGeomPolygon = new ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_4__["default"]([]);
    multiGeomPolygon.appendPolygon(geometry);
    multiGeom = multiGeomPolygon;
  } else {
    multiGeom = geometry;
  }

  return multiGeom;
}
function isSafari() {
  return navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');
}
function colorZeroPadding(hex) {
  return hex.length == 1 ? "0" + hex : hex;
}
function rgbArrayToHex(rgb) {
  var r = rgb[0];
  var g = rgb[1];
  var b = rgb[2];

  if (r != (r & 255) || g != (g & 255) || b != (b & 255)) {
    throw Error("\"(" + r + "," + g + "," + b + ")\" is not a valid RGB color");
  }

  var hexR = colorZeroPadding(r.toString(16));
  var hexG = colorZeroPadding(g.toString(16));
  var hexB = colorZeroPadding(b.toString(16));
  return "#" + hexR + hexG + hexB;
}
function decodeQueryString(queryString) {
  var queryData = {};

  if (queryString) {
    var pairs = queryString.substring(1).split('&');

    for (var _iterator = _createForOfIteratorHelperLoose(pairs), _step; !(_step = _iterator()).done;) {
      var pair = _step.value;
      var indexOfEquals = pair.indexOf('=');

      if (indexOfEquals >= 0) {
        var name = pair.substring(0, indexOfEquals);
        var value = pair.substring(indexOfEquals + 1);

        try {
          queryData[decodeURIComponent(name)] = decodeURIComponent(value);
        } catch (error) {
          console.error("Malformed parameter: " + name + "=" + value);
        }
      } else {
        queryData[pair] = '';
      }
    }
  }

  return queryData;
}
function encodeQueryString(queryData) {
  var queryItem = [];

  for (var key in queryData) {
    var value = queryData[key];
    queryItem.push(encodeURIComponent(key) + "=" + encodeURIComponent(value));
  }

  return queryItem.join('&');
}
function deleteCondition(event) {
  return Object(ol_events_condition_js__WEBPACK_IMPORTED_MODULE_0__["noModifierKeys"])(event) && Object(ol_events_condition_js__WEBPACK_IMPORTED_MODULE_0__["singleClick"])(event);
}
function extentToRectangle(extent) {
  var result = [Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopLeft"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopRight"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getBottomRight"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getBottomLeft"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopLeft"])(extent)];
  return result;
}
function dpi() {
  return 96;
}

/***/ }),

/***/ "dll-reference vendor":
/*!*************************!*\
  !*** external "vendor" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = vendor;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaWxlLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9hcHBzL2FwcG1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvYXBwcy9tb2JpbGUvQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2F1dGhlbnRpY2F0aW9uL1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9hdXRoZW50aWNhdGlvbi9jb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2F1dGhlbnRpY2F0aW9uL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2F1dGhlbnRpY2F0aW9uL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2JhY2tncm91bmRsYXllcnNlbGVjdG9yL2NvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvYmFja2dyb3VuZGxheWVyc2VsZWN0b3IvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvYmFja2dyb3VuZGxheWVyc2VsZWN0b3Ivc3RhdHVzLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvY29udHJvbGxlcnMvQWJzdHJhY3RBcHBDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvY29udHJvbGxlcnMvQWJzdHJhY3RNb2JpbGVDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvY29udHJvbGxlcnMvYm9vdHN0cmFwLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvY29udHJvbGxlcnMvY2FsY3VsYXRlQ3NzVmFycy5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2RhdGFzb3VyY2UvRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9kYXRhc291cmNlL0V4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvZGF0YXNvdXJjZS9FeHRlcm5hbE9HQy5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2RhdGFzb3VyY2UvSGVscGVyLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvZGF0YXNvdXJjZS9MYXllckJlaW5nU3dpcGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9kYXRhc291cmNlL01hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9kYXRhc291cmNlL09HQy5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2RhdGFzb3VyY2UvV0ZTQWxpYXNlcy5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2RhdGFzb3VyY2UvZmlsZUdyb3VwLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvZGF0YXNvdXJjZS9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9kaXNjbGFpbWVyL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2Ryb3BmaWxlL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2Ryb3BmaWxlL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2VkaXRpbmcvRW51bWVyYXRlQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvZWRpdGluZy9TbmFwcGluZy5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2ljb25zL2RvdC5zdmciLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9pY29ucy9sYXllcnMuc3ZnIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvaWNvbnMvc2VhcmNoLWdvLnN2ZyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2ljb25zL3NwaW5uZXIuc3ZnIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvaWNvbnMvc3Bpbm5lci5zdmc/ZGUxOSIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2ljb25zL3NwaW5uZXIuc3ZnP2U3ODkiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9pY29ucy9zdGFjay1pbmRldGVybWluYXRlLnN2ZyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbGF5ZXJ0cmVlL1N5bmNMYXllcnRyZWVNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9sYXllcnRyZWUvVHJlZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9sYXllcnRyZWUvY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9sYXllcnRyZWUvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbGF5ZXJ0cmVlL2RhdGFzb3VyY2VHcm91cFRyZWVDb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2xheWVydHJlZS9kYXRhc291cmNlR3JvdXBUcmVlQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbGF5ZXJ0cmVlL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2xheWVydHJlZS90aW1lU2xpZGVyQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbGF5ZXJ0cmVlL3RpbWVzbGlkZXJDb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL21hcC9jb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL21hcC9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9tYXAvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbWFwL21vdXNlcG9zaXRpb25Db21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL21hcC9tb3VzZXBvc2l0aW9uQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbW9iaWxlL21lYXN1cmUvYXJlYUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL21vYmlsZS9tZWFzdXJlL2Jhc2VDb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL21vYmlsZS9tZWFzdXJlL2Jhc2VDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9tb2JpbGUvbWVhc3VyZS9sZW5ndGhDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9tb2JpbGUvbWVhc3VyZS9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9tb2JpbGUvbWVhc3VyZS9wb2ludENvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvbW9iaWxlL21lYXN1cmUvcG9pbnRDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9tb2JpbGUvbmF2aWdhdGlvbi9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9tb2JpbGUvbmF2aWdhdGlvbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9wZXJtYWxpbmsvUGVybWFsaW5rLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvcGVybWFsaW5rL1NoYXJlU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL3Blcm1hbGluay9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9wZXJtYWxpbmsvc2hhcmVDb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL3Blcm1hbGluay9zaGFyZUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL3F1ZXJ5L2V4dHJhTW9kdWxlLmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvcXVlcnkvZ3JpZENvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvcXVlcnkvZ3JpZENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL3F1ZXJ5L3dpbmRvd0NvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvcXVlcnkvd2luZG93Q29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvcmFzdGVyL1Jhc3RlclNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9zZWFyY2gvRnVsbHRleHRTZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9zZWFyY2gvY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9zZWFyY2gvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvc2VhcmNoL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL3RoZW1lL01hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy90aGVtZS9UaGVtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy90aGVtZS9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy90aGVtZS9zZWxlY3RvckNvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvdGhlbWUvc2VsZWN0b3JDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FuZ3VsYXItZmxvYXQtdGhlYWQvYW5ndWxhci1mbG9hdFRoZWFkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlanMtdHlwZWFoZWFkL2Rpc3QvdHlwZWFoZWFkLmJ1bmRsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY29yZWpzLXR5cGVhaGVhZC9kaXN0L3R5cGVhaGVhZC5idW5kbGUtZXhwb3NlZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXhwb3NlLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0R2xvYmFsVGhpcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2FmLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYXItZHouanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9hci1rdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2FyLWx5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYXItbWEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9hci1zYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2FyLXRuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9hei5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2JlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ibS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2JuLWJkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYm4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9iby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2JyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9jYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2NzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvY3YuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9jeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2RhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZGUtYXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9kZS1jaC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZHYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VuLWF1LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZW4tY2EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lbi1nYi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VuLWllLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZW4taWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lbi1pbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VuLW56LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZW4tc2cuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VzLWRvLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZXMtbXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lcy11cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ldS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2ZhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZmkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9maWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9mby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2ZyLWNhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZnItY2guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9mci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2Z5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZ2EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9nZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2dsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZ29tLWRldmEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9nb20tbGF0bi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2d1LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvaGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9oaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2hyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvaHUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9oeS1hbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2lkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvaXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9pdC1jaC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2l0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvamEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9qdi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2thLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUva2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9rbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2tuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUva28uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9rdS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2t5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbGIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9sby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2x0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbHYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9tZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL21pLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbWsuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9tbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL21uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9tcy1teS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL21zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbXQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9teS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL25iLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ubC1iZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL25sLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbm4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9vYy1sbmMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9wYS1pbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3BsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvcHQtYnIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9wdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3JvLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvcnUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3NlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc2kuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3NsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc3EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zci1jeXJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3N2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc3cuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90YS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdGV0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdGcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90aC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3RrLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdGwtcGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90bGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90ci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3R6bC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3R6bS1sYXRuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdHptLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdWctY24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS91ay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdXotbGF0bi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3V6LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdmkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS94LXBzZXVkby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3lvLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvemgtY24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS96aC1oay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3poLW1vLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvemgtdHcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L21vbWVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ3VzdG9tRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dlb21ldHJ5VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvUG9wb3Zlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFzb3VyY2UvRGF0YVNvdXJjZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXNvdXJjZS9EYXRhU291cmNlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXNvdXJjZS9GaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhc291cmNlL0ZpbGVHcm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXNvdXJjZS9Hcm91cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXNvdXJjZS9IZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFzb3VyY2UvT0dDLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhc291cmNlL09HQ0dyb3VwLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhc291cmNlL1dNU0dyb3VwLmpzIiwid2VicGFjazovLy8uL3NyYy9kb3dubG9hZC9Dc3YuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rvd25sb2FkL3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYXcvZmVhdHVyZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL0NvbmRpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL1J1bGVIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm1hdC9BcmNHSVNHZW9KU09OLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybWF0L0ZlYXR1cmVIYXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvRmVhdHVyZUhhc2hTdHlsZVR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm1hdC9GZWF0dXJlUHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybWF0L1dGU0F0dHJpYnV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybWF0L1hTREF0dHJpYnV0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybWF0L2ZpbHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VvbG9jYXRpb24vY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL0NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9jb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ljb25zL3N3aXBlLnN2Zz82ZGE2Iiwid2VicGFjazovLy8uL3NyYy9pY29ucy9zd2lwZS5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL0RyYXdBemltdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL01lYXN1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL01lYXN1cmVBcmVhLmpzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcmFjdGlvbi9NZWFzdXJlQXJlYU1vYmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTWVhc3VyZUF6aW11dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTWVhc3VyZUxlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTWVhc3VyZUxlbmd0aE1vYmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTWVhc3VyZVBvaW50TW9iaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcmFjdGlvbi9Nb2JpbGVEcmF3LmpzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcmFjdGlvbi9jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVydHJlZS9Db250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9sYXllcnRyZWUvY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVydHJlZS9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9CYWNrZ3JvdW5kTGF5ZXJNZ3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9GZWF0dXJlT3ZlcmxheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL0ZlYXR1cmVPdmVybGF5TWdyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXAvTGF5ZXJIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9yZWNlbnRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL3Jlc2l6ZW1hcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL3NjYWxlc2VsZWN0b3IuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL3NjYWxlc2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21lc3NhZ2UvRGlzY2xhaW1lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9NZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdlL05vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9Qb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9kaXNwbGF5d2luZG93Q29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL21lc3NhZ2UvZGlzcGxheXdpbmRvd0NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9tb2RhbENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9wb3BvdmVyQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdlL3BvcHVwQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdlL3BvcHVwY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvQXV0b1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvRXZlbnRIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvRmVhdHVyZUhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9GaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL1RpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvVG9vbEFjdGl2YXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL1Rvb2xBY3RpdmF0ZU1nci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9XTVNUaW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL2J0bkNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9jb2xvcnBpY2tlckNvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL3NyYy9taXNjL2NvbG9ycGlja2VyQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL2NvbnRyb2xDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvZGF0ZXBpY2tlckNvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL3NyYy9taXNjL2RhdGVwaWNrZXJDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvZGVjb3JhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvZXh0cmFNb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvZmlsZXJlYWRlckNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9maWx0ZXJzLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL3NvcnRhYmxlQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL3N3aXBlLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL3N5bmNBcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL29sY3MvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9vcHRpb25zLmpzIiwid2VicGFjazovLy8uL3NyYy9xdWVyeS9BY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1ZXJ5L01hcFF1ZXJlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1ZXJ5L01vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1ZXJ5L01vZGVTZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvUXVlcmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9ydWxlL0RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J1bGUvR2VvbWV0cnkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J1bGUvUnVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcnVsZS9TZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J1bGUvVGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VhcmNoL2NyZWF0ZUdlb0pTT05CbG9vZGhvdW5kLmpzIiwid2VicGFjazovLy8uL3NyYy9zZWFyY2gvY3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kLmpzIiwid2VicGFjazovLy8uL3NyYy9zZWFyY2gvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9zZWFyY2gvc2VhcmNoRGlyZWN0aXZlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0ZW1hbmFnZXIvTG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlbWFuYWdlci9TZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0ZW1hbmFnZXIvV2ZzUGVybWFsaW5rLmpzIiwid2VicGFjazovLy8uL3NyYy9zdGF0ZW1hbmFnZXIvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL2NvbnRyaWJzL2dtZi9hcHBzL21vYmlsZS9Db250cm9sbGVyLmpzXCIpO1xuIiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBkZWNvZGVRdWVyeVN0cmluZyB9IGZyb20gJ25nZW8vdXRpbHMuanMnO1xudmFyIGFwcE1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXSk7XG5hcHBNb2R1bGUuY29uZmlnKFsnJGNvbXBpbGVQcm92aWRlcicsIGZ1bmN0aW9uICgkY29tcGlsZVByb3ZpZGVyKSB7XG4gIGlmICghKCdkZWJ1ZycgaW4gZGVjb2RlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaCkpKSB7XG4gICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKGZhbHNlKTtcbiAgfVxufV0pO1xuZXhwb3J0IGRlZmF1bHQgYXBwTW9kdWxlOyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgJy4vc2Fzcy92YXJzX21vYmlsZS5zY3NzJztcbmltcG9ydCAnLi9zYXNzL21vYmlsZS5zY3NzJztcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZkNvbnRyb2xsZXJzQWJzdHJhY3RNb2JpbGVDb250cm9sbGVyLCB7IEFic3RyYWN0TW9iaWxlQ29udHJvbGxlciB9IGZyb20gJ2dtZi9jb250cm9sbGVycy9BYnN0cmFjdE1vYmlsZUNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IGFwcEJhc2UgZnJvbSAnLi4vYXBwbW9kdWxlLmpzJztcblxuaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gIGFsZXJ0KCdZb3VyIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCwgcGxlYXNlIHVwZGF0ZSBpdCBvciB1c2UgYW5vdGhlciBvbmUuIFlvdSB3aWxsIGJlIHJlZGlyZWN0ZWQuXFxuXFxuJyArIFwiVm90cmUgbmF2aWdhdGV1ciBuJ2VzdCBwYXMgc3VwcG9ydMOpLCB2ZXVpbGxleiBsZSBtZXR0cmUgw6Agam91ciBvdSBlbiB1dGlsaXNlciB1biBhdXRyZS4gXCIgKyAnVm91cyBhbGxleiDDqnRyZSByZWRpcmlnw6kuXFxuXFxuJyArICdJaHIgQnJvd3NlciB3aXJkIG5pY2h0IHVudGVyc3TDvHR6dCwgYml0dGUgYWt0dWFsaXNpZXJlbiBTaWUgaWhuIG9kZXIgdmVyd2VuZGVuIFNpZSBlaW5lbiBhbmRlcmVuLiAnICsgJ1NpZSB3ZXJkZW4gd2VpdGVyZ2VsZWl0ZXQuJyk7XG4gIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vZ2VvbWFwZmlzaC5vcmcvJztcbn1cblxudmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0Fic3RyYWN0TW9iaWxlQ29udHJvKSB7XG4gIF9pbmhlcml0c0xvb3NlKENvbnRyb2xsZXIsIF9BYnN0cmFjdE1vYmlsZUNvbnRybyk7XG5cbiAgZnVuY3Rpb24gQ29udHJvbGxlcigpIHtcbiAgICByZXR1cm4gX0Fic3RyYWN0TW9iaWxlQ29udHJvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBDb250cm9sbGVyO1xufShBYnN0cmFjdE1vYmlsZUNvbnRyb2xsZXIpO1xuXG52YXIgYXBwTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcG1vYmlsZScsIFthcHBCYXNlLm5hbWUsIGdtZkNvbnRyb2xsZXJzQWJzdHJhY3RNb2JpbGVDb250cm9sbGVyLm5hbWVdKTtcbmFwcE1vZHVsZS5jb250cm9sbGVyKCdNb2JpbGVDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBhcHBNb2R1bGU7IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9DdXN0b21FdmVudCBmcm9tICduZ2VvL0N1c3RvbUV2ZW50LmpzJztcbmltcG9ydCBvbEV2ZW50c0V2ZW50VGFyZ2V0IGZyb20gJ29sL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0ICogYXMgU2VudHJ5IGZyb20gJ0BzZW50cnkvYnJvd3Nlcic7XG5leHBvcnQgdmFyIFJvdXRlU3VmZml4ID0ge1xuICBDSEFOR0VfUEFTU1dPUkQ6ICdsb2dpbmNoYW5nZXBhc3N3b3JkJyxcbiAgSVNfTE9HR0VEX0lOOiAnbG9naW51c2VyJyxcbiAgTE9HSU46ICdsb2dpbicsXG4gIExPR09VVDogJ2xvZ291dCcsXG4gIFJFU0VUX1BBU1NXT1JEOiAnbG9naW5yZXNldHBhc3N3b3JkJ1xufTtcbmV4cG9ydCB2YXIgQXV0aGVudGljYXRpb25TZXJ2aWNlID0gZnVuY3Rpb24gKF9vbEV2ZW50c0V2ZW50VGFyZ2V0KSB7XG4gIEF1dGhlbnRpY2F0aW9uU2VydmljZS4kaW5qZWN0ID0gW1wiJGh0dHBcIiwgXCIkcm9vdFNjb3BlXCIsIFwiYXV0aGVudGljYXRpb25CYXNlVXJsXCIsIFwiZ21mVXNlclwiLCBcImdtZkF1dGhlbnRpY2F0aW9uQ29uZmlnXCIsIFwiZ21mQXV0aGVudGljYXRpb25Ob1JlbG9hZFJvbGVcIiwgXCIkaW50ZXJ2YWxcIl07XG5cbiAgX2luaGVyaXRzTG9vc2UoQXV0aGVudGljYXRpb25TZXJ2aWNlLCBfb2xFdmVudHNFdmVudFRhcmdldCk7XG5cbiAgZnVuY3Rpb24gQXV0aGVudGljYXRpb25TZXJ2aWNlKCRodHRwLCAkcm9vdFNjb3BlLCBhdXRoZW50aWNhdGlvbkJhc2VVcmwsIGdtZlVzZXIsIGdtZkF1dGhlbnRpY2F0aW9uQ29uZmlnLCBnbWZBdXRoZW50aWNhdGlvbk5vUmVsb2FkUm9sZSwgJGludGVydmFsKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfb2xFdmVudHNFdmVudFRhcmdldC5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMuJGh0dHBfID0gJGh0dHA7XG4gICAgX3RoaXMuJHJvb3RTY29wZV8gPSAkcm9vdFNjb3BlO1xuICAgIF90aGlzLmJhc2VVcmxfID0gYXV0aGVudGljYXRpb25CYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgX3RoaXMudXNlcl8gPSBnbWZVc2VyO1xuICAgIF90aGlzLmZvcmNlUGFzc3dvcmRDaGFuZ2UgPSBnbWZBdXRoZW50aWNhdGlvbkNvbmZpZy5mb3JjZVBhc3N3b3JkQ2hhbmdlID09PSB0cnVlO1xuICAgIF90aGlzLm5vUmVsb2FkUm9sZV8gPSBnbWZBdXRoZW50aWNhdGlvbk5vUmVsb2FkUm9sZTtcblxuICAgIF90aGlzLmxvYWRfKCk7XG5cbiAgICBfdGhpcy52ZXJpZnlDb25uZWN0aW9uXyA9ICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5jaGVja0Nvbm5lY3Rpb25fKCk7XG4gICAgfSwgNjAwMDApO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBBdXRoZW50aWNhdGlvblNlcnZpY2UucHJvdG90eXBlO1xuXG4gIF9wcm90by5jaGVja0Nvbm5lY3Rpb25fID0gZnVuY3Rpb24gY2hlY2tDb25uZWN0aW9uXygpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmICh0aGlzLnVzZXJfLnVzZXJuYW1lKSB7XG4gICAgICB2YXIgdXJsID0gdGhpcy5iYXNlVXJsXyArIFwiL1wiICsgUm91dGVTdWZmaXguSVNfTE9HR0VEX0lOO1xuICAgICAgdGhpcy4kaHR0cF8uZ2V0KHVybCwge1xuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgaWYgKF90aGlzMi51c2VyXy51c2VybmFtZSAhPT0gcmVzcC5kYXRhLnVzZXJuYW1lKSB7XG4gICAgICAgICAgX3RoaXMyLmhhbmRsZURpc2Nvbm5lY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb24gY29ubmVjdGlvbiBjaGVjazogXCIgKyBlcnIuc3RhdHVzVGV4dCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURpc2Nvbm5lY3Rpb24gPSBmdW5jdGlvbiBoYW5kbGVEaXNjb25uZWN0aW9uKCkge1xuICAgIHRoaXMubG9nb3V0KCk7XG4gICAgdmFyIGV2ZW50RGlzY29ubmVjdCA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ2Rpc2Nvbm5lY3RlZCcsIHtcbiAgICAgIHVzZXI6IHRoaXMudXNlcl9cbiAgICB9KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnREaXNjb25uZWN0KTtcbiAgfTtcblxuICBfcHJvdG8ubG9hZF8gPSBmdW5jdGlvbiBsb2FkXygpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciB1cmwgPSB0aGlzLmJhc2VVcmxfICsgXCIvXCIgKyBSb3V0ZVN1ZmZpeC5JU19MT0dHRURfSU47XG4gICAgdGhpcy4kaHR0cF8uZ2V0KHVybCwge1xuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgcmV0dXJuIF90aGlzMy5oYW5kbGVMb2dpbl8odHJ1ZSwgcmVzcCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQobG9naW4sIG9sZFB3ZCwgbmV3UHdkLCBjb25mUHdkLCBvdHApIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIGlmIChvdHAgPT09IHZvaWQgMCkge1xuICAgICAgb3RwID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciB1cmwgPSB0aGlzLmJhc2VVcmxfICsgXCIvXCIgKyBSb3V0ZVN1ZmZpeC5DSEFOR0VfUEFTU1dPUkQ7XG4gICAgcmV0dXJuIHRoaXMuJGh0dHBfLnBvc3QodXJsLCAkLnBhcmFtKHtcbiAgICAgICdsb2dpbic6IGxvZ2luLFxuICAgICAgJ29sZFBhc3N3b3JkJzogb2xkUHdkLFxuICAgICAgJ290cCc6IG90cCxcbiAgICAgICduZXdQYXNzd29yZCc6IG5ld1B3ZCxcbiAgICAgICdjb25maXJtTmV3UGFzc3dvcmQnOiBjb25mUHdkXG4gICAgfSksIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgICB9LFxuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgX3RoaXM0LnNldFVzZXJfKHJlc3AuZGF0YSwgdHJ1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmxvZ2luID0gZnVuY3Rpb24gbG9naW4oX2xvZ2luLCBwd2QsIG90cCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKG90cCA9PT0gdm9pZCAwKSB7XG4gICAgICBvdHAgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIHVybCA9IHRoaXMuYmFzZVVybF8gKyBcIi9cIiArIFJvdXRlU3VmZml4LkxPR0lOO1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAnbG9naW4nOiBfbG9naW4sXG4gICAgICAncGFzc3dvcmQnOiBwd2RcbiAgICB9O1xuXG4gICAgaWYgKG90cCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHtcbiAgICAgICAgJ290cCc6IG90cFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuJGh0dHBfLnBvc3QodXJsLCAkLnBhcmFtKHBhcmFtcyksIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgICB9LFxuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgcmV0dXJuIF90aGlzNS5vblN1Y2Nlc3NmdWxMb2dpbihyZXNwKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICByZXR1cm4gX3RoaXM1LmhhbmRsZUxvZ2luXyhmYWxzZSwgcmVzcCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLm9uU3VjY2Vzc2Z1bExvZ2luID0gZnVuY3Rpb24gb25TdWNjZXNzZnVsTG9naW4ocmVzcCkge1xuICAgIHJldHVybiByZXNwO1xuICB9O1xuXG4gIF9wcm90by5sb2dvdXQgPSBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICB2YXIgbm9SZWxvYWQgPSB0aGlzLm5vUmVsb2FkUm9sZV8gPyB0aGlzLmdldFJvbGVzTmFtZXMoKS5pbmNsdWRlcyh0aGlzLm5vUmVsb2FkUm9sZV8pIDogZmFsc2U7XG4gICAgdmFyIHVybCA9IHRoaXMuYmFzZVVybF8gKyBcIi9cIiArIFJvdXRlU3VmZml4LkxPR09VVDtcbiAgICByZXR1cm4gdGhpcy4kaHR0cF8uZ2V0KHVybCwge1xuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczYucmVzZXRVc2VyXyhub1JlbG9hZCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnJlc2V0UGFzc3dvcmQgPSBmdW5jdGlvbiByZXNldFBhc3N3b3JkKGxvZ2luKSB7XG4gICAgdmFyIHVybCA9IHRoaXMuYmFzZVVybF8gKyBcIi9cIiArIFJvdXRlU3VmZml4LlJFU0VUX1BBU1NXT1JEO1xuICAgIHJldHVybiB0aGlzLiRodHRwXy5wb3N0KHVybCwgJC5wYXJhbSh7XG4gICAgICAnbG9naW4nOiBsb2dpblxuICAgIH0pLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgIHJldHVybiByZXNwLmRhdGE7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldEVtYWlsID0gZnVuY3Rpb24gZ2V0RW1haWwoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlcl8uZW1haWwgfHwgbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0Um9sZXNJZHMgPSBmdW5jdGlvbiBnZXRSb2xlc0lkcygpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyXy5yb2xlcyA/IHRoaXMudXNlcl8ucm9sZXMubWFwKGZ1bmN0aW9uIChyb2xlKSB7XG4gICAgICByZXR1cm4gcm9sZS5pZDtcbiAgICB9KSA6IFtdO1xuICB9O1xuXG4gIF9wcm90by5nZXRSb2xlc05hbWVzID0gZnVuY3Rpb24gZ2V0Um9sZXNOYW1lcygpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyXy5yb2xlcyA/IHRoaXMudXNlcl8ucm9sZXMubWFwKGZ1bmN0aW9uIChyb2xlKSB7XG4gICAgICByZXR1cm4gcm9sZS5uYW1lO1xuICAgIH0pIDogW107XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUxvZ2luXyA9IGZ1bmN0aW9uIGhhbmRsZUxvZ2luXyhjaGVja2luZ0xvZ2luU3RhdHVzLCByZXNwKSB7XG4gICAgaWYgKHJlc3AuZGF0YS5pc19wYXNzd29yZF9jaGFuZ2VkID09PSBmYWxzZSAmJiB0aGlzLmZvcmNlUGFzc3dvcmRDaGFuZ2UpIHtcbiAgICAgIHZhciBldmVudCA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ211c3RDaGFuZ2VQYXNzd29yZCcsIHtcbiAgICAgICAgdXNlcjogcmVzcC5kYXRhXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRVc2VyXyhyZXNwLmRhdGEsICFjaGVja2luZ0xvZ2luU3RhdHVzKTtcblxuICAgIGlmIChjaGVja2luZ0xvZ2luU3RhdHVzKSB7XG4gICAgICB2YXIgX2V2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgncmVhZHknLCB7XG4gICAgICAgIHVzZXI6IHRoaXMudXNlcl9cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoX2V2ZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcDtcbiAgfTtcblxuICBfcHJvdG8uc2V0VXNlcl8gPSBmdW5jdGlvbiBzZXRVc2VyXyhyZXNwRGF0YSwgZW1pdEV2ZW50KSB7XG4gICAgU2VudHJ5LnNldFVzZXIoe1xuICAgICAgdXNlcm5hbWU6IHJlc3BEYXRhLnVzZXJuYW1lXG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy51c2VyXykge1xuICAgICAgdGhpcy51c2VyX1trZXldID0gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfa2V5IGluIHJlc3BEYXRhKSB7XG4gICAgICB0aGlzLnVzZXJfW19rZXldID0gcmVzcERhdGFbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKGVtaXRFdmVudCAmJiByZXNwRGF0YS51c2VybmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdsb2dpbicsIHtcbiAgICAgICAgdXNlcjogdGhpcy51c2VyX1xuICAgICAgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucmVzZXRVc2VyXyA9IGZ1bmN0aW9uIHJlc2V0VXNlcl8obm9SZWxvYWQpIHtcbiAgICBub1JlbG9hZCA9IG5vUmVsb2FkIHx8IGZhbHNlO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMudXNlcl8pIHtcbiAgICAgIHRoaXMudXNlcl9ba2V5XSA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnbG9nb3V0Jywge1xuICAgICAgdXNlcjogdGhpcy51c2VyX1xuICAgIH0pO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cbiAgICBpZiAoIW5vUmVsb2FkKSB7XG4gICAgICB0aGlzLmxvYWRfKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBBdXRoZW50aWNhdGlvblNlcnZpY2U7XG59KG9sRXZlbnRzRXZlbnRUYXJnZXQpO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZkF1dGhlbnRpY2F0aW9uU2VydmljZScsIFtdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ2dtZkF1dGhlbnRpY2F0aW9uU2VydmljZScsIEF1dGhlbnRpY2F0aW9uU2VydmljZSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mVXNlcicsIHtcbiAgZnVuY3Rpb25hbGl0aWVzOiBudWxsLFxuICBpc19wYXNzd29yZF9jaGFuZ2VkOiBudWxsLFxuICByb2xlczogbnVsbCxcbiAgdXNlcm5hbWU6IG51bGxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdiBuZy1pZj1cIiRjdHJsLmdtZlVzZXIuaXNfaW50cmFuZXRcIiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gIDxzcGFuPnt7XFwnWW91IGFyZSByZWNvZ25pemVkIGFzIGFuIGludHJhbmV0IHVzZXIuXFwnIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuPC9kaXY+XFxuXFxuPGRpdiBuZy1pZj1cIiRjdHJsLmdtZlVzZXIudXNlcm5hbWVcIj5cXG4gIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgIDxzcGFuPnt7XFwnTG9nZ2VkIGluIGFzXFwnIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuICAgIDxzdHJvbmc+e3sgOjokY3RybC5nbWZVc2VyLnVzZXJuYW1lIH19PC9zdHJvbmc+LlxcbiAgPC9kaXY+XFxuXFxuICA8Zm9ybVxcbiAgICAgIG5hbWU9XCJsb2dvdXRGb3JtXCJcXG4gICAgICByb2xlPVwiZm9ybVwiXFxuICAgICAgbmctc3VibWl0PVwiJGN0cmwubG9nb3V0KClcIlxcbiAgICAgIG5nLWNvbnRyb2xsZXI9XCJHbWZBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXJcIlxcbiAgICAgIG5nLWNsYXNzPVwie1xcJ2hhcy1lcnJvclxcJzogJGN0cmwuZXJyb3J9XCJcXG4gICAgICBuZy1pZj1cIiEkY3RybC5jaGFuZ2luZ1Bhc3N3b3JkXCI+XFxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgPGlucHV0XFxuICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBidG4gcHJpbWVcIlxcbiAgICAgICAgICB2YWx1ZT1cInt7XFwnTG9nb3V0XFwnIHwgdHJhbnNsYXRlfX1cIiAvPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgPGlucHV0XFxuICAgICAgICBuZy1zaG93PVwiJGN0cmwuYWxsb3dQYXNzd29yZENoYW5nZVwiXFxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIGJ0biBidG4tZGVmYXVsdFwiXFxuICAgICAgICB2YWx1ZT1cInt7XFwnQ2hhbmdlIHBhc3N3b3JkXFwnIHwgdHJhbnNsYXRlfX1cIlxcbiAgICAgICAgbmctY2xpY2s9XCIkY3RybC5jaGFuZ2luZ1Bhc3N3b3JkID0gdHJ1ZVwiLz5cXG4gICAgPC9kaXY+XFxuICA8L2Zvcm0+XFxuPC9kaXY+XFxuXFxuPGRpdiBuZy1pZj1cIiRjdHJsLmluZm9NZXNzYWdlXCIgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XFxuICA8c3Bhbj57eyAkY3RybC5pbmZvTWVzc2FnZSB9fTwvc3Bhbj5cXG48L2Rpdj5cXG5cXG48ZGl2IG5nLWlmPVwiJGN0cmwuZGlzY29ubmVjdGVkU2hvd25cIiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIiB0cmFuc2xhdGU+XFxuICBZb3UgYXJlIG5vdCBsb2dnZWQgaW4gYW55IG1vcmUuIFRoZSBJbnRlcmZhY2UgaGFzIGJlZW4gcmVsb2FkZWQuXFxuPC9kaXY+XFxuXFxuPGRpdiBuZy1pZj1cIiEkY3RybC5nbWZVc2VyLnVzZXJuYW1lICYmICEkY3RybC5jaGFuZ2luZ1Bhc3N3b3JkXCI+XFxuICA8Zm9ybVxcbiAgICAgIG5hbWU9XCJsb2dpbkZvcm1cIlxcbiAgICAgIHJvbGU9XCJmb3JtXCJcXG4gICAgICBuZy1zdWJtaXQ9XCIkY3RybC5sb2dpbigpXCJcXG4gICAgICBuZy1jb250cm9sbGVyPVwiR21mQXV0aGVudGljYXRpb25Db250cm9sbGVyXCJcXG4gICAgICBuZy1jbGFzcz1cIntcXCdoYXMtZXJyb3JcXCc6ICRjdHJsLmVycm9yfVwiPlxcbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXFxuICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcXG4gICAgICAgICAgbmFtZT1cImxvZ2luXCJcXG4gICAgICAgICAgbmctbW9kZWw9XCIkY3RybC5sb2dpblZhbFwiXFxuICAgICAgICAgIG5nLWF0dHItcGxhY2Vob2xkZXI9XCJ7e1xcJ1VzZXJuYW1lXFwnIHwgdHJhbnNsYXRlfX1cIiAvPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgICA8aW5wdXRcXG4gICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcXG4gICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxcbiAgICAgICAgICBuYW1lPVwicGFzc3dvcmRcIlxcbiAgICAgICAgICBuZy1tb2RlbD1cIiRjdHJsLnB3ZFZhbFwiXFxuICAgICAgICAgIG5nLWF0dHItcGxhY2Vob2xkZXI9XCJ7e1xcJ1Bhc3N3b3JkXFwnIHwgdHJhbnNsYXRlfX1cIi8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IG5nLWlmPVwiJGN0cmwudHdvRmFjdG9yQXV0aFwiIGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIHt7XFwnVGhlIGZvbGxvd2luZyBmaWVsZCBzaG91bGQgYmUga2VwdCBlbXB0eSBvbiBmaXJzdCBsb2dpbjpcXCcgfCB0cmFuc2xhdGV9fVxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXFxuICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXFxuICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcXG4gICAgICAgICAgbmFtZT1cIm90cFwiXFxuICAgICAgICAgIG5nLW1vZGVsPVwiJGN0cmwub3RwVmFsXCJcXG4gICAgICAgICAgbmctYXR0ci1wbGFjZWhvbGRlcj1cInt7XFwnQXV0aGVudGljYXRpb24gY29kZVxcJyB8IHRyYW5zbGF0ZX19XCIvPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgPGlucHV0XFxuICAgICAgICB0eXBlPVwic3VibWl0XCJcXG4gICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIGJ0biBwcmltZVwiXFxuICAgICAgICB2YWx1ZT1cInt7XFwnQ29ubmVjdFxcJyB8IHRyYW5zbGF0ZX19XCIgLz5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJsb2dpbi1zcGlubmVyXCIgbmctaWY9XCIkY3RybC5pc0xvYWRpbmdcIj5cXG4gICAgICA8aSBjbGFzcz1cImZhIGN1c3RvbS1zcGlubmVyLWNvbm5lY3QgZmEtc3BpblwiPlxcbiAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvc3Bpbm5lci5zdmc/dmlld2JveCZoZWlnaHQ9MWVtJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcXG4gICAgICA8L2k+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IG5nLXNob3c9XCIkY3RybC5hbGxvd1Bhc3N3b3JkUmVzZXRcIiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgICA8YSBuZy1jbGljaz1cIiRjdHJsLnJlc2V0UGFzc3dvcmQoKVwiXFxuICAgICAgICAgaHJlZj1cIlwiPnt7XFwnUGFzc3dvcmQgZm9yZ290dGVuP1xcJyB8IHRyYW5zbGF0ZX19PC9hPlxcbiAgICA8L2Rpdj5cXG4gIDwvZm9ybT5cXG5cXG4gIDxkaXYgbmctaWY9XCIkY3RybC5yZXNldFBhc3N3b3JkU2hvd25cIiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIiB0cmFuc2xhdGU+XFxuICAgIEEgbmV3IHBhc3N3b3JkIGhhcyBqdXN0IGJlZW4gc2VudCB0byB5b3UgYnkgZS1tYWlsLlxcbiAgPC9kaXY+XFxuPC9kaXY+XFxuXFxuPGRpdiBuZy1pZj1cIiRjdHJsLmNoYW5naW5nUGFzc3dvcmRcIj5cXG4gIDxkaXZcXG4gICAgICBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIlxcbiAgICAgIG5nX2lmPVwiJGN0cmwudXNlck11c3RDaGFuZ2VJdHNQYXNzd29yZFwiPlxcbiAgICAgIHt7XFwnWW91IG11c3QgY2hhbmdlIHlvdXIgcGFzc3dvcmRcXCcgfCB0cmFuc2xhdGV9fVxcbiAgPC9kaXY+XFxuXFxuICA8Zm9ybVxcbiAgICAgIG5hbWU9XCJjaGFuZ2VQYXNzd29yZEZvcm1cIlxcbiAgICAgIHJvbGU9XCJmb3JtXCJcXG4gICAgICBuZy1zdWJtaXQ9XCIkY3RybC5jaGFuZ2VQYXNzd29yZCgpXCJcXG4gICAgICBuZy1jb250cm9sbGVyPVwiR21mQXV0aGVudGljYXRpb25Db250cm9sbGVyXCJcXG4gICAgICBuZy1jbGFzcz1cIntcXCdoYXMtZXJyb3JcXCc6ICRjdHJsLmVycm9yfVwiPlxcbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXFxuICAgICAgICAgIG5hbWU9XCJvbGRwYXNzd29yZFwiXFxuICAgICAgICAgIG5nLW1vZGVsPVwiJGN0cmwub2xkUHdkVmFsXCJcXG4gICAgICAgICAgbmctYXR0ci1wbGFjZWhvbGRlcj1cInt7XFwnT2xkIHBhc3N3b3JkXFwnIHwgdHJhbnNsYXRlfX1cIi8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXFxuICAgICAgICAgIG5hbWU9XCJuZXdwYXNzd29yZFwiXFxuICAgICAgICAgIG5nLW1vZGVsPVwiJGN0cmwubmV3UHdkVmFsXCJcXG4gICAgICAgICAgbmctYXR0ci1wbGFjZWhvbGRlcj1cInt7XFwnTmV3IHBhc3N3b3JkXFwnIHwgdHJhbnNsYXRlfX1cIi8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXFxuICAgICAgICAgIG5hbWU9XCJuZXdwYXNzd29yZGNvbmZpcm1cIlxcbiAgICAgICAgICBuZy1tb2RlbD1cIiRjdHJsLm5ld1B3ZENvbmZWYWxcIlxcbiAgICAgICAgICBuZy1hdHRyLXBsYWNlaG9sZGVyPVwie3tcXCdDb25maXJtIG5ldyBwYXNzd29yZFxcJyB8IHRyYW5zbGF0ZX19XCIvPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBuZy1pZj1cIiRjdHJsLmdtZlVzZXIub3RwX3VyaVwiIGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIDxsYWJlbCB0cmFuc2xhdGU+VHdvIGZhY3RvciBhdXRoZW50aWNhdGlvbiBRUiBjb2RlOjwvbGFiZWw+XFxuICAgICAgPGRpdj48aW1nIGNsYXNzPVwiXCIgbmctc3JjPVwie3skY3RybC5vdHBJbWFnZX19XCI+PC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IG5nLWlmPVwiJGN0cmwuZ21mVXNlci50d29fZmFjdG9yX3RvdHBfc2VjcmV0XCIgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgPGxhYmVsIHRyYW5zbGF0ZT5Ud28gZmFjdG9yIGF1dGhlbnRpY2F0aW9uIGtleTo8L2xhYmVsPlxcbiAgICAgIDxjb2RlPnt7JGN0cmwuZ21mVXNlci50d29fZmFjdG9yX3RvdHBfc2VjcmV0fX08L2NvZGU+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IG5nLWlmPVwiJGN0cmwudHdvRmFjdG9yQXV0aFwiIGNsYXNzPVwiZm9ybS1ncm91cFwiPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXFxuICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXFxuICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcXG4gICAgICAgICAgbmFtZT1cIm90cFwiXFxuICAgICAgICAgIG5nLW1vZGVsPVwiJGN0cmwub3RwVmFsXCJcXG4gICAgICAgICAgbmctYXR0ci1wbGFjZWhvbGRlcj1cInt7XFwnQXV0aGVudGljYXRpb24gY29kZVxcJyB8IHRyYW5zbGF0ZX19XCIvPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgPGlucHV0XFxuICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBidG4gcHJpbWVcIlxcbiAgICAgICAgICB2YWx1ZT1cInt7XFwnQ2hhbmdlIHBhc3N3b3JkXFwnIHwgdHJhbnNsYXRlfX1cIiAvPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgICA8aW5wdXRcXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXFxuICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIGJ0biBidG4tZGVmYXVsdFwiXFxuICAgICAgICAgIHZhbHVlPVwie3tcXCdDYW5jZWxcXCcgfCB0cmFuc2xhdGV9fVwiXFxuICAgICAgICAgIG5nLWNsaWNrPVwiJGN0cmwuY2hhbmdlUGFzc3dvcmRSZXNldCgpXCIgLz5cXG4gICAgPC9kaXY+XFxuICA8L2Zvcm0+XFxuPC9kaXY+XFxuXFxuPGRpdiBuZy1zaG93PVwiJGN0cmwuZXJyb3JcIiBjbGFzcz1cImdtZi1hdXRoZW50aWNhdGlvbi1lcnJvciBoZWxwLWJsb2NrXCI+PC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZkF1dGhlbnRpY2F0aW9uU2VydmljZSBmcm9tICdnbWYvYXV0aGVudGljYXRpb24vU2VydmljZS5qcyc7XG5pbXBvcnQgeyBnbWZCYWNrZ3JvdW5kbGF5ZXJTdGF0dXMgfSBmcm9tICdnbWYvYmFja2dyb3VuZGxheWVyc2VsZWN0b3Ivc3RhdHVzLmpzJztcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSAnbmdlby9tZXNzYWdlL01lc3NhZ2UuanMnO1xuaW1wb3J0IG5nZW9NZXNzYWdlTm90aWZpY2F0aW9uIGZyb20gJ25nZW8vbWVzc2FnZS9Ob3RpZmljYXRpb24uanMnO1xuaW1wb3J0IG5nZW9NZXNzYWdlTW9kYWxDb21wb25lbnQgZnJvbSAnbmdlby9tZXNzYWdlL21vZGFsQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgcXJ1cmkgZnJvbSAncXJ1cmknO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZkF1dGhlbnRpY2F0aW9uJywgW2dtZkF1dGhlbnRpY2F0aW9uU2VydmljZS5uYW1lLCBuZ2VvTWVzc2FnZU5vdGlmaWNhdGlvbi5uYW1lLCBuZ2VvTWVzc2FnZU1vZGFsQ29tcG9uZW50Lm5hbWVdKTtcblxuZnVuY3Rpb24gZ21mQXV0aGVudGljYXRpb25UZW1wbGF0ZVVybF8oZWxlbWVudCwgYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gYXR0cnMuZ21mQXV0aGVudGljYXRpb25UZW1wbGF0ZXVybDtcbiAgcmV0dXJuIHRlbXBsYXRlVXJsICE9PSB1bmRlZmluZWQgPyB0ZW1wbGF0ZVVybCA6ICdnbWYvYXV0aGVudGljYXRpb24nO1xufVxuXG5teU1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZ21mL2F1dGhlbnRpY2F0aW9uJywgcmVxdWlyZSgnLi9jb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcbmdtZkF1dGhlbnRpY2F0aW9uVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRlbGVtZW50XCIsIFwiJGF0dHJzXCIsIFwiZ21mQXV0aGVudGljYXRpb25UZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gZ21mQXV0aGVudGljYXRpb25UZW1wbGF0ZVVybCgkZWxlbWVudCwgJGF0dHJzLCBnbWZBdXRoZW50aWNhdGlvblRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBnbWZBdXRoZW50aWNhdGlvblRlbXBsYXRlVXJsKCRlbGVtZW50LCAkYXR0cnMpO1xufVxuXG52YXIgYXV0aGVudGljYXRpb25Db21wb25lbnQgPSB7XG4gIGJpbmRpbmdzOiB7XG4gICAgJ3Bhc3N3b3JkVmFsaWRhdG9yJzogJzw/Z21mQXV0aGVudGljYXRpb25QYXNzd29yZFZhbGlkYXRvcicsXG4gICAgJ29uU3VjY2Vzc2Z1bExvZ2luJzogJzw/Z21mQXV0aGVudGljYXRpb25PblN1Y2Nlc3NmdWxMb2dpbicsXG4gICAgJ2luZm9NZXNzYWdlJzogJz0/Z21mQXV0aGVudGljYXRpb25JbmZvTWVzc2FnZSdcbiAgfSxcbiAgY29udHJvbGxlcjogJ0dtZkF1dGhlbnRpY2F0aW9uQ29udHJvbGxlcicsXG4gIHRlbXBsYXRlVXJsOiBnbWZBdXRoZW50aWNhdGlvblRlbXBsYXRlVXJsXG59O1xubXlNb2R1bGUudmFsdWUoJ2dtZkF1dGhlbnRpY2F0aW9uVGVtcGxhdGVVcmwnLCBnbWZBdXRoZW50aWNhdGlvblRlbXBsYXRlVXJsXyk7XG5teU1vZHVsZS5jb21wb25lbnQoJ2dtZkF1dGhlbnRpY2F0aW9uJywgYXV0aGVudGljYXRpb25Db21wb25lbnQpO1xuZXhwb3J0IHZhciBBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIEF1dGhlbnRpY2F0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGVsZW1lbnRcIiwgXCJnbWZUd29GYWN0b3JBdXRoXCIsIFwiZ2V0dGV4dENhdGFsb2dcIiwgXCJnbWZBdXRoZW50aWNhdGlvblNlcnZpY2VcIiwgXCJnbWZVc2VyXCIsIFwibmdlb05vdGlmaWNhdGlvblwiLCBcImdtZkF1dGhlbnRpY2F0aW9uQ29uZmlnXCJdO1xuXG4gIGZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uQ29udHJvbGxlcigkc2NvcGUsICRlbGVtZW50LCBnbWZUd29GYWN0b3JBdXRoLCBnZXR0ZXh0Q2F0YWxvZywgZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlLCBnbWZVc2VyLCBuZ2VvTm90aWZpY2F0aW9uLCBnbWZBdXRoZW50aWNhdGlvbkNvbmZpZykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLiRlbGVtZW50XyA9ICRlbGVtZW50O1xuICAgIHRoaXMuZ21mVXNlciA9IGdtZlVzZXI7XG4gICAgdGhpcy5nZXR0ZXh0Q2F0YWxvZyA9IGdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMuZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlXyA9IGdtZkF1dGhlbnRpY2F0aW9uU2VydmljZTtcbiAgICB0aGlzLm5vdGlmaWNhdGlvbl8gPSBuZ2VvTm90aWZpY2F0aW9uO1xuICAgIHRoaXMudHdvRmFjdG9yQXV0aCA9IGdtZlR3b0ZhY3RvckF1dGg7XG4gICAgdGhpcy5hbGxvd1Bhc3N3b3JkUmVzZXQgPSBnbWZBdXRoZW50aWNhdGlvbkNvbmZpZy5hbGxvd1Bhc3N3b3JkUmVzZXQgIT09IGZhbHNlO1xuICAgIHRoaXMuYWxsb3dQYXNzd29yZENoYW5nZSA9IGdtZkF1dGhlbnRpY2F0aW9uQ29uZmlnLmFsbG93UGFzc3dvcmRDaGFuZ2UgIT09IGZhbHNlO1xuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0b3IgPSBudWxsO1xuICAgIHRoaXMub25TdWNjZXNzZnVsTG9naW4gPSBudWxsO1xuICAgIHRoaXMuaW5mb01lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMuY2hhbmdpbmdQYXNzd29yZCA9IGZhbHNlO1xuICAgIHRoaXMuY2hhbmdpbmdQYXNzd29yZFVzZXJuYW1lID0gbnVsbDtcbiAgICB0aGlzLnVzZXJNdXN0Q2hhbmdlSXRzUGFzc3dvcmQgPSBmYWxzZTtcbiAgICBsaXN0ZW4oZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlLCAnbXVzdENoYW5nZVBhc3N3b3JkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5nbWZVc2VyID0gZXZlbnQuZGV0YWlsLnVzZXI7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBfdGhpcy5nbWZVc2VyLnVzZXJuYW1lO1xuICAgICAgX3RoaXMuY2hhbmdpbmdQYXNzd29yZFVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICBfdGhpcy5jaGFuZ2luZ1Bhc3N3b3JkID0gdHJ1ZTtcbiAgICAgIF90aGlzLnVzZXJNdXN0Q2hhbmdlSXRzUGFzc3dvcmQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGxpc3RlbihnbWZBdXRoZW50aWNhdGlvblNlcnZpY2UsICdsb2dpbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNoYW5naW5nUGFzc3dvcmQgPSBmYWxzZTtcbiAgICAgIF90aGlzLnVzZXJNdXN0Q2hhbmdlSXRzUGFzc3dvcmQgPSBmYWxzZTtcbiAgICB9KTtcbiAgICBsaXN0ZW4oZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlLCAnZGlzY29ubmVjdGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5kaXNjb25uZWN0ZWRTaG93biA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5yZXNldFBhc3N3b3JkU2hvd24gPSBmYWxzZTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZFNob3duID0gZmFsc2U7XG4gICAgdGhpcy5lcnJvciA9IGZhbHNlO1xuICAgIHRoaXMubG9naW5WYWwgPSAnJztcbiAgICB0aGlzLnB3ZFZhbCA9ICcnO1xuICAgIHRoaXMub3RwVmFsO1xuICAgIHRoaXMub2xkUHdkVmFsID0gJyc7XG4gICAgdGhpcy5uZXdQd2RWYWwgPSAnJztcbiAgICB0aGlzLm5ld1B3ZENvbmZWYWwgPSAnJztcbiAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdtZlVzZXIub3RwX3VyaTtcbiAgICB9LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIF90aGlzLm90cEltYWdlID0gcXJ1cmkodmFsLCB7XG4gICAgICAgICAgbWFyZ2luOiAyXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEF1dGhlbnRpY2F0aW9uQ29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLiRvbkluaXQgPSBmdW5jdGlvbiAkb25Jbml0KCkge1xuICAgIGlmICh0aGlzLm9uU3VjY2Vzc2Z1bExvZ2luKSB7XG4gICAgICB0aGlzLmdtZkF1dGhlbnRpY2F0aW9uU2VydmljZV8ub25TdWNjZXNzZnVsTG9naW4gPSB0aGlzLm9uU3VjY2Vzc2Z1bExvZ2luO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBnZXR0ZXh0Q2F0YWxvZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2c7XG4gICAgdmFyIG9sZFB3ZCA9IHRoaXMub2xkUHdkVmFsO1xuICAgIHZhciBuZXdQd2QgPSB0aGlzLm5ld1B3ZFZhbDtcbiAgICB2YXIgY29uZlB3ZCA9IHRoaXMubmV3UHdkQ29uZlZhbDtcbiAgICB2YXIgZXJyb3JzID0gW107XG5cbiAgICBpZiAob2xkUHdkID09PSAnJykge1xuICAgICAgZXJyb3JzLnB1c2goZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdUaGUgb2xkIHBhc3N3b3JkIGlzIHJlcXVpcmVkLicpKTtcbiAgICB9XG5cbiAgICBpZiAobmV3UHdkID09PSAnJykge1xuICAgICAgZXJyb3JzLnB1c2goZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdUaGUgbmV3IHBhc3N3b3JkIGlzIHJlcXVpcmVkLicpKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZlB3ZCA9PT0gJycpIHtcbiAgICAgIGVycm9ycy5wdXNoKGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnVGhlIHBhc3N3b3JkIGNvbmZpcm1hdGlvbiBpcyByZXF1aXJlZC4nKSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0RXJyb3JfKGVycm9ycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvbGRQd2QgPT09IG5ld1B3ZCkge1xuICAgICAgICBlcnJvcnMucHVzaChnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ1RoZSBvbGQgYW5kIG5ldyBwYXNzd29yZHMgYXJlIHRoZSBzYW1lLicpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1B3ZCAhPT0gY29uZlB3ZCkge1xuICAgICAgICBlcnJvcnMucHVzaChnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoXCJUaGUgcGFzc3dvcmRzIGRvbid0IG1hdGNoLlwiKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnBhc3N3b3JkVmFsaWRhdG9yKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXNzd29yZFZhbGlkYXRvci5pc1Bhc3N3b3JkVmFsaWQob2xkUHdkKSkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGdldHRleHRDYXRhbG9nLmdldFN0cmluZyh0aGlzLnBhc3N3b3JkVmFsaWRhdG9yLm5vdFZhbGlkTWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuc2V0RXJyb3JfKGVycm9ycyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdXNlcm5hbWU7XG5cbiAgICAgICAgaWYgKHRoaXMudXNlck11c3RDaGFuZ2VJdHNQYXNzd29yZCkge1xuICAgICAgICAgIHVzZXJuYW1lID0gdGhpcy5jaGFuZ2luZ1Bhc3N3b3JkVXNlcm5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXNlcm5hbWUgPSB0aGlzLmdtZlVzZXIudXNlcm5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmFzc2VydCh1c2VybmFtZSk7XG4gICAgICAgIHRoaXMuZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlXy5jaGFuZ2VQYXNzd29yZCh1c2VybmFtZSwgb2xkUHdkLCBuZXdQd2QsIGNvbmZQd2QsIHRoaXMub3RwVmFsKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIuY2hhbmdlUGFzc3dvcmRSZXNldCgpO1xuXG4gICAgICAgICAgX3RoaXMyLnNldEVycm9yXyhbZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdZb3VyIHBhc3N3b3JkIGhhcyBzdWNjZXNzZnVsbHkgYmVlbiBjaGFuZ2VkLicpXSwgTWVzc2FnZVR5cGUuSU5GT1JNQVRJT04pO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgX3RoaXMyLm9sZFB3ZFZhbCA9ICcnO1xuICAgICAgICAgIF90aGlzMi5vdHBWYWwgPSAnJztcblxuICAgICAgICAgIF90aGlzMi5zZXRFcnJvcl8oZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdJbmNvcnJlY3Qgb2xkIHBhc3N3b3JkLicpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5sb2dpbiA9IGZ1bmN0aW9uIGxvZ2luKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdGhpcy5tYW51YWxMb2dpbkxvZ291dF8oKTtcbiAgICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB2YXIgZXJyb3JzID0gW107XG5cbiAgICBpZiAodGhpcy5sb2dpblZhbCA9PT0gJycpIHtcbiAgICAgIGVycm9ycy5wdXNoKGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnVGhlIHVzZXJuYW1lIGlzIHJlcXVpcmVkLicpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wd2RWYWwgPT09ICcnKSB7XG4gICAgICBlcnJvcnMucHVzaChnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ1RoZSBwYXNzd29yZCBpcyByZXF1aXJlZC4nKSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnNldEVycm9yXyhlcnJvcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdtZkF1dGhlbnRpY2F0aW9uU2VydmljZV8ubG9naW4odGhpcy5sb2dpblZhbCwgdGhpcy5wd2RWYWwsIHRoaXMub3RwVmFsKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBfdGhpczMubG9naW5WYWwgPSAnJztcbiAgICAgICAgX3RoaXMzLnB3ZFZhbCA9ICcnO1xuICAgICAgICBfdGhpczMub3RwVmFsID0gJyc7XG5cbiAgICAgICAgX3RoaXMzLnJlc2V0RXJyb3JfKCk7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMzLnB3ZFZhbCA9ICcnO1xuICAgICAgICBfdGhpczMub3RwVmFsID0gJyc7XG5cbiAgICAgICAgX3RoaXMzLnNldEVycm9yXyhnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0luY29ycmVjdCBjcmVkZW50aWFscyBvciBkaXNhYmxlZCBhY2NvdW50LicpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ubG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgdGhpcy5tYW51YWxMb2dpbkxvZ291dF8oKTtcbiAgICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmdtZkF1dGhlbnRpY2F0aW9uU2VydmljZV8ubG9nb3V0KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczQuaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgIF90aGlzNC5yZXNldEVycm9yXygpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzNC5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgX3RoaXM0LnNldEVycm9yXyhnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0NvdWxkIG5vdCBsb2cgb3V0LicpKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8ubWFudWFsTG9naW5Mb2dvdXRfID0gZnVuY3Rpb24gbWFudWFsTG9naW5Mb2dvdXRfKCkge1xuICAgIGdtZkJhY2tncm91bmRsYXllclN0YXR1cy50b3VjaGVkQnlVc2VyID0gdHJ1ZTtcbiAgfTtcblxuICBfcHJvdG8ucmVzZXRQYXNzd29yZCA9IGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcblxuICAgIGlmICghdGhpcy5sb2dpblZhbCkge1xuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2V0RXJyb3JfKGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnUGxlYXNlLCBpbnB1dCBhIGxvZ2luLi4uJykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlXy5yZXNldFBhc3N3b3JkKHRoaXMubG9naW5WYWwpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXM1LmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgX3RoaXM1LnJlc2V0UGFzc3dvcmRTaG93biA9IHRydWU7XG5cbiAgICAgIF90aGlzNS5yZXNldEVycm9yXygpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzNS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgX3RoaXM1LnNldEVycm9yXyhnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlc2V0dGluZyB0aGUgcGFzc3dvcmQuJykpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5jaGFuZ2VQYXNzd29yZFJlc2V0ID0gZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmRSZXNldCgpIHtcbiAgICB0aGlzLnJlc2V0RXJyb3JfKCk7XG4gICAgdGhpcy5jaGFuZ2luZ1Bhc3N3b3JkID0gZmFsc2U7XG4gICAgdGhpcy51c2VyTXVzdENoYW5nZUl0c1Bhc3N3b3JkID0gZmFsc2U7XG4gICAgdGhpcy5vbGRQd2RWYWwgPSAnJztcbiAgICB0aGlzLm5ld1B3ZFZhbCA9ICcnO1xuICAgIHRoaXMubmV3UHdkQ29uZlZhbCA9ICcnO1xuICB9O1xuXG4gIF9wcm90by5zZXRFcnJvcl8gPSBmdW5jdGlvbiBzZXRFcnJvcl8oZXJyb3JzLCBtZXNzYWdlVHlwZSkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgaWYgKG1lc3NhZ2VUeXBlID09IHVuZGVmaW5lZCkge1xuICAgICAgbWVzc2FnZVR5cGUgPSBNZXNzYWdlVHlwZS5FUlJPUjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lcnJvcikge1xuICAgICAgdGhpcy5yZXNldEVycm9yXygpO1xuICAgIH1cblxuICAgIHRoaXMuZXJyb3IgPSB0cnVlO1xuICAgIHZhciBjb250YWluZXIgPSB0aGlzLiRlbGVtZW50Xy5maW5kKCcuZ21mLWF1dGhlbnRpY2F0aW9uLWVycm9yJyk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXJyb3JzKSkge1xuICAgICAgZXJyb3JzID0gW2Vycm9yc107XG4gICAgfVxuXG4gICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbXNnOiBlcnJvcixcbiAgICAgICAgdGFyZ2V0OiBjb250YWluZXJcbiAgICAgIH07XG5cbiAgICAgIGlmIChtZXNzYWdlVHlwZSkge1xuICAgICAgICBvcHRpb25zLnR5cGUgPSBtZXNzYWdlVHlwZTtcbiAgICAgIH1cblxuICAgICAgX3RoaXM2Lm5vdGlmaWNhdGlvbl8ubm90aWZ5KG9wdGlvbnMpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5yZXNldEVycm9yXyA9IGZ1bmN0aW9uIHJlc2V0RXJyb3JfKCkge1xuICAgIHRoaXMubm90aWZpY2F0aW9uXy5jbGVhcigpO1xuICAgIHRoaXMuZXJyb3IgPSBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gQXV0aGVudGljYXRpb25Db250cm9sbGVyO1xufSgpO1xubXlNb2R1bGUuY29udHJvbGxlcignR21mQXV0aGVudGljYXRpb25Db250cm9sbGVyJywgQXV0aGVudGljYXRpb25Db250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZkF1dGhlbnRpY2F0aW9uQ29tcG9uZW50IGZyb20gJ2dtZi9hdXRoZW50aWNhdGlvbi9jb21wb25lbnQuanMnO1xuaW1wb3J0IGdtZkF1dGhlbnRpY2F0aW9uU2VydmljZSBmcm9tICdnbWYvYXV0aGVudGljYXRpb24vU2VydmljZS5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnZ21mQXV0aGVudGljYXRpb25Nb2R1bGUnLCBbZ21mQXV0aGVudGljYXRpb25Db21wb25lbnQubmFtZSwgZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlLm5hbWVdKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8dWwgY2xhc3M9XCJnbWYtYmFja2dyb3VuZGxheWVyc2VsZWN0b3JcIj5cXG4gIDxsaSBuZy1yZXBlYXQ9XCJsYXllciBpbiBjdHJsLmJnTGF5ZXJzXCJcXG4gICAgICBuZy1jbGljaz1cImN0cmwuc2V0TGF5ZXIobGF5ZXIpXCJcXG4gICAgICBuZy1jbGFzcz1cIntcXCdnbWYtYmFja2dyb3VuZGxheWVyc2VsZWN0b3ItYWN0aXZlXFwnOiBjdHJsLmJnTGF5ZXIgPT0gbGF5ZXIsIFxcJ2dtZi1iYWNrZ3JvdW5kbGF5ZXJzZWxlY3Rvci1kaXNhYmxlZFxcJzogY3RybC5vcGFjaXR5TGF5ZXIgPT0gbGF5ZXJ9XCI+XFxuICAgIDxpbWcgY2xhc3M9XCJnbWYtdGh1bWJcIlxcbiAgICAgICAgIG5nLXNyYz1cInt7OjpsYXllci5nZXQoXFwnbWV0YWRhdGFcXCcpW1xcJ3RodW1ibmFpbFxcJ119fVwiIC8+XFxuICAgIDxzcGFuIGNsYXNzPVwiZ21mLXRleHRcIj57e2xheWVyLmdldChcImxhYmVsXCIpIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuICAgIDxzcGFuIG5nLWNsYXNzPVwie1xcJ2dtZi1iYWNrZ3JvdW5kbGF5ZXJzZWxlY3Rvci1vcGFjaXR5LWNoZWNrXFwnOiBjdHJsLm9wYWNpdHlMYXllciA9PSBsYXllcn1cIj48L3NwYW4+XFxuICA8L2xpPlxcblxcbiAgPGlucHV0IG5nLWlmPVwiY3RybC5vcGFjaXR5TGF5ZXJcIlxcbiAgICAgICAgIGNsYXNzPVwiaW5wdXQtYWN0aW9uIGdtZi1iYWNrZ3JvdW5kbGF5ZXJzZWxlY3Rvci1vcGFjaXR5LXNsaWRlclwiXFxuICAgICAgICAgbmFtZT1cImJnLWxheWVyLW9wYWNpdHlcIlxcbiAgICAgICAgIHR5cGU9XCJyYW5nZVwiXFxuICAgICAgICAgbWluPVwiMFwiXFxuICAgICAgICAgbWF4PVwiMVwiXFxuICAgICAgICAgc3RlcD1cIjAuMDFcIlxcbiAgICAgICAgIG5nLW1vZGVsPVwiY3RybC5nZXRTZXRCZ0xheWVyT3BhY2l0eVwiXFxuICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cIntnZXR0ZXJTZXR0ZXI6IHRydWV9XCI+XFxuPC91bD5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwibmdlb0JhY2tncm91bmRMYXllck1nclwiLCBcImdtZlRoZW1lc1wiLCBcImdtZkJhY2tncm91bmRMYXllclNlbGVjdG9yT3B0aW9uc1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZ21mQmFja2dyb3VuZGxheWVyU3RhdHVzIH0gZnJvbSAnZ21mL2JhY2tncm91bmRsYXllcnNlbGVjdG9yL3N0YXR1cy5qcyc7XG5pbXBvcnQgZ21mVGhlbWVUaGVtZXMgZnJvbSAnZ21mL3RoZW1lL1RoZW1lcy5qcyc7XG5pbXBvcnQgbmdlb01hcEJhY2tncm91bmRMYXllck1nciBmcm9tICduZ2VvL21hcC9CYWNrZ3JvdW5kTGF5ZXJNZ3IuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZCYWNrZ3JvdW5kbGF5ZXJzZWxlY3RvcicsIFtnbWZUaGVtZVRoZW1lcy5uYW1lLCBuZ2VvTWFwQmFja2dyb3VuZExheWVyTWdyLm5hbWVdKTtcbm15TW9kdWxlLnZhbHVlKCdnbWZCYWNrZ3JvdW5kbGF5ZXJzZWxlY3RvclRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKCRlbGVtZW50LCAkYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gJGF0dHJzLmdtZkJhY2tncm91bmRsYXllcnNlbGVjdG9yVGVtcGxhdGV1cmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnZ21mL2JhY2tncm91bmRsYXllcnNlbGVjdG9yJztcbn0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2dtZi9iYWNrZ3JvdW5kbGF5ZXJzZWxlY3RvcicsIHJlcXVpcmUoJy4vY29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5nbWZCYWNrZ3JvdW5kbGF5ZXJzZWxlY3RvclRlbXBsYXRlVXJsLiRpbmplY3QgPSBbXCIkZWxlbWVudFwiLCBcIiRhdHRyc1wiLCBcImdtZkJhY2tncm91bmRsYXllcnNlbGVjdG9yVGVtcGxhdGVVcmxcIl07XG5cbmZ1bmN0aW9uIGdtZkJhY2tncm91bmRsYXllcnNlbGVjdG9yVGVtcGxhdGVVcmwoJGVsZW1lbnQsICRhdHRycywgZ21mQmFja2dyb3VuZGxheWVyc2VsZWN0b3JUZW1wbGF0ZVVybCkge1xuICByZXR1cm4gZ21mQmFja2dyb3VuZGxheWVyc2VsZWN0b3JUZW1wbGF0ZVVybCgkZWxlbWVudCwgJGF0dHJzKTtcbn1cblxudmFyIGJhY2tncm91bmRsYXllcnNlbGVjdG9yQ29tcG9uZW50ID0ge1xuICBjb250cm9sbGVyOiAnR21mQmFja2dyb3VuZGxheWVyc2VsZWN0b3JDb250cm9sbGVyIGFzIGN0cmwnLFxuICBiaW5kaW5nczoge1xuICAgICdtYXAnOiAnPWdtZkJhY2tncm91bmRsYXllcnNlbGVjdG9yTWFwJyxcbiAgICAnc2VsZWN0JzogJyY/Z21mQmFja2dyb3VuZGxheWVyc2VsZWN0b3JTZWxlY3QnXG4gIH0sXG4gIHRlbXBsYXRlVXJsOiBnbWZCYWNrZ3JvdW5kbGF5ZXJzZWxlY3RvclRlbXBsYXRlVXJsXG59O1xubXlNb2R1bGUuY29tcG9uZW50KCdnbWZCYWNrZ3JvdW5kbGF5ZXJzZWxlY3RvcicsIGJhY2tncm91bmRsYXllcnNlbGVjdG9yQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgbmdlb0JhY2tncm91bmRMYXllck1nciwgZ21mVGhlbWVzLCBnbWZCYWNrZ3JvdW5kTGF5ZXJTZWxlY3Rvck9wdGlvbnMpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm1hcCA9IG51bGw7XG4gIHRoaXMub3B0aW9ucyA9IGdtZkJhY2tncm91bmRMYXllclNlbGVjdG9yT3B0aW9ucztcbiAgdGhpcy5zZWxlY3QgPSBudWxsO1xuICB0aGlzLmJnTGF5ZXIgPSBudWxsO1xuICB0aGlzLmJnTGF5ZXJzID0gbnVsbDtcbiAgdGhpcy5vcGFjaXR5TGF5ZXIgPSBudWxsO1xuICB0aGlzLmdtZlRoZW1lc18gPSBnbWZUaGVtZXM7XG4gIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oZ21mVGhlbWVzLCAnY2hhbmdlJywgdGhpcy5oYW5kbGVUaGVtZXNDaGFuZ2VfLCB0aGlzKSk7XG4gIHRoaXMuYmFja2dyb3VuZExheWVyTWdyXyA9IG5nZW9CYWNrZ3JvdW5kTGF5ZXJNZ3I7XG4gIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbih0aGlzLmJhY2tncm91bmRMYXllck1ncl8sICdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBfdGhpcy5iZ0xheWVyID0gZXZlbnQuZGV0YWlsLmN1cnJlbnQ7XG4gIH0pKTtcbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCB0aGlzLmhhbmRsZURlc3Ryb3lfLmJpbmQodGhpcykpO1xufVxuXG5Db250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmhhbmRsZVRoZW1lc0NoYW5nZV8oKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmhhbmRsZVRoZW1lc0NoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIHRoaXMuZ21mVGhlbWVzXy5nZXRCZ0xheWVycygpLnRoZW4oZnVuY3Rpb24gKGxheWVycykge1xuICAgIF90aGlzMi5iZ0xheWVycyA9IGxheWVycztcblxuICAgIGlmIChfdGhpczIub3B0aW9ucy5vcGFjaXR5TGF5ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIG9wYWNpdHlMYXllciA9IGxheWVycy5maW5kKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICByZXR1cm4gbGF5ZXIuZ2V0KCdsYWJlbCcpID09PSBfdGhpczIub3B0aW9ucy5vcGFjaXR5TGF5ZXI7XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9wYWNpdHlMYXllciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIF90aGlzMi5zZXRPcGFjaXR5QmdMYXllcihvcGFjaXR5TGF5ZXIpO1xuXG4gICAgICAgIF90aGlzMi5iZ0xheWVycyA9IF90aGlzMi5iZ0xheWVycy5zbGljZSgpO1xuXG4gICAgICAgIHZhciBpbmRleE9wYSA9IF90aGlzMi5iZ0xheWVycy5maW5kSW5kZXgoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgcmV0dXJuIGxheWVyID09PSBfdGhpczIub3BhY2l0eUxheWVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpczIuYmdMYXllcnMuc3BsaWNlKGluZGV4T3BhLCAxKTtcblxuICAgICAgICBfdGhpczIuYmdMYXllcnMucHVzaChvcGFjaXR5TGF5ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5nZXRTZXRCZ0xheWVyT3BhY2l0eSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgaWYgKCF0aGlzLm9wYWNpdHlMYXllcikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBvcGFjaXR5TGF5ZXInKTtcbiAgfVxuXG4gIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub3BhY2l0eUxheWVyLnNldE9wYWNpdHkodmFsKTtcbiAgICB0aGlzLm9wYWNpdHlMYXllci5zZXRWaXNpYmxlKHZhbCAhPT0gMCk7XG4gICAgdGhpcy5iZ0xheWVyLnNldFZpc2libGUodmFsICE9PSAxKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLm9wYWNpdHlMYXllci5nZXRPcGFjaXR5KCk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5zZXRMYXllciA9IGZ1bmN0aW9uIChsYXllciwgb3B0X3NpbGVudCkge1xuICBnbWZCYWNrZ3JvdW5kbGF5ZXJTdGF0dXMudG91Y2hlZEJ5VXNlciA9IHRydWU7XG4gIHZhciBvcGFjaXR5ID0gdGhpcy5vcGFjaXR5TGF5ZXIgPyB0aGlzLm9wYWNpdHlMYXllci5nZXRPcGFjaXR5KCkgOiAwO1xuICB0aGlzLmJnTGF5ZXIgPSBsYXllcjtcbiAgdGhpcy5iYWNrZ3JvdW5kTGF5ZXJNZ3JfLnNldCh0aGlzLm1hcCwgbGF5ZXIpO1xuICBsYXllci5zZXRWaXNpYmxlKG9wYWNpdHkgIT09IDEpO1xuXG4gIGlmICh0aGlzLm9wYWNpdHlMYXllcikge1xuICAgIHRoaXMub3BhY2l0eUxheWVyLnNldFZpc2libGUob3BhY2l0eSAhPT0gMCk7XG4gICAgdGhpcy5vcGFjaXR5TGF5ZXIuc2V0T3BhY2l0eShvcGFjaXR5KTtcbiAgfVxuXG4gIGlmICghb3B0X3NpbGVudCAmJiB0aGlzLnNlbGVjdCkge1xuICAgIHRoaXMuc2VsZWN0KCk7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnNldE9wYWNpdHlCZ0xheWVyID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIHZhciBvcGFjaXR5ID0gdGhpcy5vcGFjaXR5TGF5ZXIgPyB0aGlzLm9wYWNpdHlMYXllci5nZXRPcGFjaXR5KCkgOiAwO1xuICBsYXllci5zZXRPcGFjaXR5KG9wYWNpdHkpO1xuICB0aGlzLm9wYWNpdHlMYXllciA9IGxheWVyO1xuICB0aGlzLm9wYWNpdHlMYXllci5zZXRWaXNpYmxlKG9wYWNpdHkgIT09IDApO1xuICB0aGlzLmJnTGF5ZXIuc2V0VmlzaWJsZShvcGFjaXR5ICE9PSAxKTtcbiAgdGhpcy5iYWNrZ3JvdW5kTGF5ZXJNZ3JfLnNldE9wYWNpdHlCZ0xheWVyKHRoaXMubWFwLCBsYXllcik7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVEZXN0cm95XyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gIHRoaXMubGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xufTtcblxubXlNb2R1bGUuY29udHJvbGxlcignR21mQmFja2dyb3VuZGxheWVyc2VsZWN0b3JDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJleHBvcnQgdmFyIGdtZkJhY2tncm91bmRsYXllclN0YXR1cyA9IHtcbiAgdG91Y2hlZEJ5VXNlcjogZmFsc2Vcbn07IiwiQWJzdHJhY3RBcHBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkaW5qZWN0b3JcIiwgXCJtb2JpbGVcIl07XG5pbXBvcnQgJ2pxdWVyeSc7XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCAnYW5ndWxhci1nZXR0ZXh0JztcbmltcG9ydCAnYW5ndWxhci1keW5hbWljLWxvY2FsZSc7XG5pbXBvcnQgYm9vdHN0cmFwIGZyb20gJ2dtZi9jb250cm9sbGVycy9ib290c3RyYXAuanMnO1xuaW1wb3J0IGdtZkF1dGhlbnRpY2F0aW9uTW9kdWxlIGZyb20gJ2dtZi9hdXRoZW50aWNhdGlvbi9tb2R1bGUuanMnO1xuaW1wb3J0IGdtZkJhY2tncm91bmRsYXllcnNlbGVjdG9yQ29tcG9uZW50IGZyb20gJ2dtZi9iYWNrZ3JvdW5kbGF5ZXJzZWxlY3Rvci9jb21wb25lbnQuanMnO1xuaW1wb3J0IHsgZ21mQmFja2dyb3VuZGxheWVyU3RhdHVzIH0gZnJvbSAnZ21mL2JhY2tncm91bmRsYXllcnNlbGVjdG9yL3N0YXR1cy5qcyc7XG5pbXBvcnQgZ21mRGF0YXNvdXJjZU1vZHVsZSBmcm9tICdnbWYvZGF0YXNvdXJjZS9tb2R1bGUuanMnO1xuaW1wb3J0IGdtZkRpc2NsYWltZXJDb21wb25lbnQgZnJvbSAnZ21mL2Rpc2NsYWltZXIvY29tcG9uZW50LmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVNb2R1bGUgZnJvbSAnZ21mL2xheWVydHJlZS9tb2R1bGUuanMnO1xuaW1wb3J0IGdtZk1hcE1vZHVsZSBmcm9tICdnbWYvbWFwL21vZHVsZS5qcyc7XG5pbXBvcnQgZ21mUXVlcnlFeHRyYU1vZHVsZSBmcm9tICdnbWYvcXVlcnkvZXh0cmFNb2R1bGUuanMnO1xuaW1wb3J0IGdtZlNlYXJjaE1vZHVsZSBmcm9tICdnbWYvc2VhcmNoL21vZHVsZS5qcyc7XG5pbXBvcnQgZ21mVGhlbWVNb2R1bGUgZnJvbSAnZ21mL3RoZW1lL21vZHVsZS5qcyc7XG5pbXBvcnQgY2FsY3VsYXRlQ3NzVmFycyBmcm9tICdnbWYvY29udHJvbGxlcnMvY2FsY3VsYXRlQ3NzVmFycyc7XG5pbXBvcnQgbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93Q29tcG9uZW50IGZyb20gJ25nZW8vbWVzc2FnZS9kaXNwbGF5d2luZG93Q29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY0V4dHJhTW9kdWxlIGZyb20gJ25nZW8vbWlzYy9leHRyYU1vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb01pc2NGZWF0dXJlSGVscGVyLCB7IEZlYXR1cmVGb3JtYXRUeXBlIH0gZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjVG9vbEFjdGl2YXRlIGZyb20gJ25nZW8vbWlzYy9Ub29sQWN0aXZhdGUuanMnO1xuaW1wb3J0IG5nZW9RdWVyeU1hcFF1ZXJlbnQgZnJvbSAnbmdlby9xdWVyeS9NYXBRdWVyZW50LmpzJztcbmltcG9ydCBuZ2VvUXVlcnlDb21wb25lbnQgZnJvbSAnbmdlby9xdWVyeS9jb21wb25lbnQuanMnO1xuaW1wb3J0IG5nZW9TdGF0ZW1hbmFnZXJNb2R1bGUgZnJvbSAnbmdlby9zdGF0ZW1hbmFnZXIvbW9kdWxlLmpzJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyV2ZzUGVybWFsaW5rIGZyb20gJ25nZW8vc3RhdGVtYW5hZ2VyL1dmc1Blcm1hbGluay5qcyc7XG5pbXBvcnQgbmdlb0dlb2xvY2F0aW9uIGZyb20gJ25nZW8vZ2VvbG9jYXRpb24vY29tcG9uZW50LmpzJztcbmltcG9ydCAqIGFzIG9sQXJyYXkgZnJvbSAnb2wvYXJyYXkuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCB7IFRoZW1lRXZlbnRUeXBlIH0gZnJvbSAnZ21mL3RoZW1lL01hbmFnZXIuanMnO1xuaW1wb3J0IHsgZ2V0QnJvd3Nlckxhbmd1YWdlIH0gZnJvbSAnbmdlby91dGlscy5qcyc7XG5pbXBvcnQgKiBhcyBTZW50cnkgZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbmltcG9ydCAnQGdlb2Jsb2Nrcy9wcm9qL3NyYy9zb21lcmMuanMnO1xuaW1wb3J0ICdAZ2VvYmxvY2tzL3Byb2ovc3JjL2xjYy5qcyc7XG5pbXBvcnQgJ0BnZW9ibG9ja3MvcHJvai9zcmMvdG1lcmMuanMnO1xuaW1wb3J0IHsgY3JlYXRlIGFzIGNyZWF0ZVByb2plY3Rpb24gfSBmcm9tICdAZ2VvYmxvY2tzL3Byb2ovdXRpbHMuanMnO1xuaW1wb3J0IG9sTWFwIGZyb20gJ29sL01hcC5qcyc7XG5pbXBvcnQgb2xWaWV3IGZyb20gJ29sL1ZpZXcuanMnO1xuaW1wb3J0IG9sQ29udHJvbFNjYWxlTGluZSBmcm9tICdvbC9jb250cm9sL1NjYWxlTGluZS5qcyc7XG5pbXBvcnQgb2xDb250cm9sWm9vbSBmcm9tICdvbC9jb250cm9sL1pvb20uanMnO1xuaW1wb3J0IG9sQ29udHJvbFJvdGF0ZSBmcm9tICdvbC9jb250cm9sL1JvdGF0ZS5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBpbnRlcmFjdGlvbnNEZWZhdWx0cyB9IGZyb20gJ29sL2ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBvbEludGVyYWN0aW9uRHJhZ1BhbiBmcm9tICdvbC9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmltcG9ydCB7IG5vTW9kaWZpZXJLZXlzIH0gZnJvbSAnb2wvZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5leHBvcnQgZnVuY3Rpb24gQWJzdHJhY3RBcHBDb250cm9sbGVyKCRzY29wZSwgJGluamVjdG9yLCBtb2JpbGUpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcHJvamVjdGlvbnMgPSAkaW5qZWN0b3IuZ2V0KCdnbWZQcm9qZWN0aW9uc09wdGlvbnMnKTtcblxuICBmb3IgKHZhciBjb2RlIGluIHByb2plY3Rpb25zKSB7XG4gICAgY3JlYXRlUHJvamVjdGlvbihjb2RlLCBwcm9qZWN0aW9uc1tjb2RlXS5kZWZpbml0aW9uLmpvaW4oJyAnKSwgcHJvamVjdGlvbnNbY29kZV0uZXh0ZW50KTtcbiAgfVxuXG4gIHRoaXMub3B0aW9ucyA9ICRpbmplY3Rvci5nZXQoJ2dtZk9wdGlvbnMnKTtcblxuICBpZiAodGhpcy5vcHRpb25zLmNzc1ZhcnMpIHtcbiAgICB2YXIgY3NzVmFycyA9IGNhbGN1bGF0ZUNzc1ZhcnModGhpcy5vcHRpb25zLmNzc1ZhcnMpO1xuICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcblxuICAgIGZvciAodmFyIGNzc1ZhciBpbiBjc3NWYXJzKSB7XG4gICAgICBzdHlsZS5zZXRQcm9wZXJ0eShcIi0tXCIgKyBjc3NWYXIsIGNzc1ZhcnNbY3NzVmFyXSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHNjYWxlbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2FsZWxpbmUnKTtcbiAgdmFyIG1hcCA9IG5ldyBvbE1hcChPYmplY3QuYXNzaWduKHtcbiAgICBsYXllcnM6IFtdLFxuICAgIHZpZXc6IG5ldyBvbFZpZXcodGhpcy5vcHRpb25zLnZpZXcpLFxuICAgIGNvbnRyb2xzOiB0aGlzLm9wdGlvbnMubWFwQ29udHJvbHMgfHwgW25ldyBvbENvbnRyb2xTY2FsZUxpbmUoe1xuICAgICAgdGFyZ2V0OiBzY2FsZWxpbmUsXG4gICAgICBkcGk6IDk2XG4gICAgfSksIG5ldyBvbENvbnRyb2xab29tKHRoaXMub3B0aW9ucy5jb250cm9sWm9vbSB8fCB7XG4gICAgICB0YXJnZXQ6IG1vYmlsZSA/IHVuZGVmaW5lZCA6ICdvbC16b29tLWNvbnRyb2wnLFxuICAgICAgem9vbUluVGlwTGFiZWw6ICcnLFxuICAgICAgem9vbU91dFRpcExhYmVsOiAnJ1xuICAgIH0pLCBuZXcgb2xDb250cm9sUm90YXRlKHtcbiAgICAgIGxhYmVsOiBnZXRMb2NhdGlvbkljb24oKSxcbiAgICAgIHRpcExhYmVsOiAnJ1xuICAgIH0pXSxcbiAgICBpbnRlcmFjdGlvbnM6IHRoaXMub3B0aW9ucy5tYXBJbnRlcmFjdGlvbnMgfHwgaW50ZXJhY3Rpb25zRGVmYXVsdHModGhpcy5vcHRpb25zLmludGVyYXRpb25EZWZhdWx0cyB8fCAobW9iaWxlID8ge30gOiB7XG4gICAgICBkcmFnUGFuOiBmYWxzZVxuICAgIH0pKVxuICB9LCB0aGlzLm9wdGlvbnMubWFwKSk7XG5cbiAgaWYgKCFtb2JpbGUpIHtcbiAgICBtYXAuYWRkSW50ZXJhY3Rpb24obmV3IG9sSW50ZXJhY3Rpb25EcmFnUGFuKHtcbiAgICAgIGNvbmRpdGlvbjogZHJhZ1BhbkNvbmRpdGlvblxuICAgIH0pKTtcbiAgfVxuXG4gIHRoaXMubmdlb0xvY2F0aW9uID0gJGluamVjdG9yLmdldCgnbmdlb0xvY2F0aW9uJyk7XG5cbiAgaWYgKHRoaXMubmdlb0xvY2F0aW9uLmhhc1BhcmFtKCdkZWJ1ZycpKSB7XG4gICAgd2luZG93LmluamVjdG9yID0gJGluamVjdG9yO1xuICB9XG5cbiAgdGhpcy5tYXAgPSBtYXA7XG5cbiAgaWYgKCEodGhpcy5tYXAgaW5zdGFuY2VvZiBvbE1hcCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIG1hcCB0eXBlJyk7XG4gIH1cblxuICB2YXIgbmdlb0ZlYXR1cmVzID0gJGluamVjdG9yLmdldCgnbmdlb0ZlYXR1cmVzJyk7XG4gIHRoaXMuZHJhd0ZlYXR1cmVMYXllciA9ICRpbmplY3Rvci5nZXQoJ25nZW9GZWF0dXJlT3ZlcmxheU1ncicpLmdldEZlYXR1cmVPdmVybGF5KCk7XG4gIHRoaXMuZHJhd0ZlYXR1cmVMYXllci5zZXRGZWF0dXJlcyhuZ2VvRmVhdHVyZXMpO1xuICB2YXIgbmdlb0ZlYXR1cmVIZWxwZXIgPSAkaW5qZWN0b3IuZ2V0KCduZ2VvRmVhdHVyZUhlbHBlcicpO1xuICBuZ2VvRmVhdHVyZUhlbHBlci5zZXRQcm9qZWN0aW9uKHRoaXMubWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkpO1xuICB0aGlzLmdtZlRoZW1lTWFuYWdlciA9ICRpbmplY3Rvci5nZXQoJ2dtZlRoZW1lTWFuYWdlcicpO1xuICB0aGlzLmdtZlRyZWVNYW5hZ2VyXyA9ICRpbmplY3Rvci5nZXQoJ2dtZlRyZWVNYW5hZ2VyJyk7XG4gIHRoaXMuZ21mVGhlbWVzID0gJGluamVjdG9yLmdldCgnZ21mVGhlbWVzJyk7XG4gIHRoaXMubG9hZGluZyA9IHRydWU7XG4gIHRoaXMuZ21mVGhlbWVzLmdldFRoZW1lc09iamVjdCgpLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgfSk7XG4gIHRoaXMucG9zdExvYWRpbmcgPSBmYWxzZTtcbiAgdGhpcy5wZXJtYWxpbmtfID0gJGluamVjdG9yLmdldCgnZ21mUGVybWFsaW5rJyk7XG4gIHZhciBnbWZBdXRoZW50aWNhdGlvbiA9ICRpbmplY3Rvci5nZXQoJ2dtZkF1dGhlbnRpY2F0aW9uU2VydmljZScpO1xuICB0aGlzLmhhc0VkaXRhYmxlTGF5ZXJzID0gZmFsc2U7XG5cbiAgdGhpcy51cGRhdGVIYXNFZGl0YWJsZUxheWVyc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB0aGlzLmdtZlRoZW1lcy5oYXNFZGl0YWJsZUxheWVycygpLnRoZW4oZnVuY3Rpb24gKGhhc0VkaXRhYmxlTGF5ZXJzKSB7XG4gICAgICBfdGhpczIuaGFzRWRpdGFibGVMYXllcnMgPSBoYXNFZGl0YWJsZUxheWVycztcbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLmxvZ2luUmVkaXJlY3RVcmwgPSBudWxsO1xuICB0aGlzLmxvZ2luSW5mb01lc3NhZ2UgPSBudWxsO1xuICAkc2NvcGUuJG9uKCdhdXRoZW50aWNhdGlvbnJlcXVpcmVkJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgdmFyIGdldHRleHRDYXRhbG9nID0gJGluamVjdG9yLmdldCgnZ2V0dGV4dENhdGFsb2cnKTtcbiAgICBfdGhpcy5sb2dpbkluZm9NZXNzYWdlID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdTb21lIGxheWVycyBpbiB0aGlzIGxpbmsgYXJlIG5vdCBhY2Nlc3NpYmxlIHRvIHVuYXV0aGVudGljYXRlZCB1c2Vycy4gJyArICdQbGVhc2UgbG9nIGluIHRvIHNlZSB3aG9sZSBkYXRhLicpO1xuICAgIF90aGlzLmxvZ2luUmVkaXJlY3RVcmwgPSBhcmdzLnVybDtcbiAgICBfdGhpcy5sb2dpbkFjdGl2ZSA9IHRydWU7XG4gICAgdmFyIHVuYmluZCA9ICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmxvZ2luQWN0aXZlO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMubG9naW5BY3RpdmUpIHtcbiAgICAgICAgX3RoaXMubG9naW5JbmZvTWVzc2FnZSA9IG51bGw7XG4gICAgICAgIF90aGlzLmxvZ2luUmVkaXJlY3RVcmwgPSBudWxsO1xuICAgICAgICB1bmJpbmQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgdmFyIHVzZXJDaGFuZ2UgPSBmdW5jdGlvbiB1c2VyQ2hhbmdlKGV2dCkge1xuICAgIGlmIChfdGhpcy5sb2dpblJlZGlyZWN0VXJsKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF90aGlzLmxvZ2luUmVkaXJlY3RVcmw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJvbGVJZCA9IGdtZkF1dGhlbnRpY2F0aW9uLmdldFJvbGVzSWRzKCkuam9pbignLCcpO1xuICAgIHZhciBmdW5jdGlvbmFsaXRpZXMgPSBfdGhpcy5nbWZVc2VyLmZ1bmN0aW9uYWxpdGllcztcblxuICAgIGlmIChmdW5jdGlvbmFsaXRpZXMgJiYgZnVuY3Rpb25hbGl0aWVzLmZpbHRlcmFibGVfbGF5ZXJzICYmIGZ1bmN0aW9uYWxpdGllcy5maWx0ZXJhYmxlX2xheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICBfdGhpcy5maWx0ZXJTZWxlY3RvckVuYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIF90aGlzLmdtZlRoZW1lcy5nZXRUaGVtZXNPYmplY3QoKS50aGVuKGZ1bmN0aW9uICh0aGVtZXMpIHtcbiAgICAgIGlmIChmdW5jdGlvbmFsaXRpZXMgJiYgZnVuY3Rpb25hbGl0aWVzLm9wZW5fcGFuZWwgJiYgZnVuY3Rpb25hbGl0aWVzLm9wZW5fcGFuZWxbMF0gPT09ICdsYXllcl9maWx0ZXInKSB7XG4gICAgICAgIF90aGlzLmZpbHRlclNlbGVjdG9yQWN0aXZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBwcmV2aW91c1RoZW1lTmFtZSA9IF90aGlzLmdtZlRoZW1lTWFuYWdlci5nZXRUaGVtZU5hbWUoKTtcblxuICAgIF90aGlzLmdtZlRoZW1lTWFuYWdlci5zZXRUaGVtZU5hbWUoJycsIHRydWUpO1xuXG4gICAgX3RoaXMuZ21mVGhlbWVzLmxvYWRUaGVtZXMocm9sZUlkKTtcblxuICAgIGlmIChldnQudHlwZSAhPT0gJ3JlYWR5Jykge1xuICAgICAgdmFyIHRoZW1lTmFtZSA9IF90aGlzLnBlcm1hbGlua18uZGVmYXVsdFRoZW1lTmFtZUZyb21GdW5jdGlvbmFsaXRpZXMoKTtcblxuICAgICAgX3RoaXMuZ21mVGhlbWVNYW5hZ2VyLnVwZGF0ZUN1cnJlbnRUaGVtZSh0aGVtZU5hbWUsIHByZXZpb3VzVGhlbWVOYW1lLCB0cnVlKTtcbiAgICB9XG5cbiAgICBfdGhpcy5zZXREZWZhdWx0QmFja2dyb3VuZF8obnVsbCk7XG5cbiAgICBfdGhpcy51cGRhdGVIYXNFZGl0YWJsZUxheWVyc18oKTtcbiAgfTtcblxuICB2YXIgY29ubmVjdGlvbkxvc3QgPSBmdW5jdGlvbiBjb25uZWN0aW9uTG9zdChldnQpIHtcbiAgICBfdGhpcy5sb2dpbkFjdGl2ZSA9IHRydWU7XG4gICAgdXNlckNoYW5nZShldnQpO1xuICB9O1xuXG4gIGxpc3RlbihnbWZBdXRoZW50aWNhdGlvbiwgJ3JlYWR5JywgdXNlckNoYW5nZSk7XG4gIGxpc3RlbihnbWZBdXRoZW50aWNhdGlvbiwgJ2xvZ2luJywgdXNlckNoYW5nZSk7XG4gIGxpc3RlbihnbWZBdXRoZW50aWNhdGlvbiwgJ2xvZ291dCcsIHVzZXJDaGFuZ2UpO1xuICBsaXN0ZW4oZ21mQXV0aGVudGljYXRpb24sICdkaXNjb25uZWN0ZWQnLCBjb25uZWN0aW9uTG9zdCk7XG4gIHRoaXMuZGltZW5zaW9ucyA9IHt9O1xuICB0aGlzLnBlcm1hbGlua18uc2V0RGltZW5zaW9ucyh0aGlzLmRpbWVuc2lvbnMpO1xuICB2YXIgZ21mRGF0YVNvdXJjZXNNYW5hZ2VyID0gJGluamVjdG9yLmdldCgnZ21mRGF0YVNvdXJjZXNNYW5hZ2VyJyk7XG4gIGdtZkRhdGFTb3VyY2VzTWFuYWdlci5zZXREYXRhc291cmNlTWFwKHRoaXMubWFwKTtcbiAgZ21mRGF0YVNvdXJjZXNNYW5hZ2VyLnNldERpbWVuc2lvbnModGhpcy5kaW1lbnNpb25zKTtcblxuICBpZiAoJGluamVjdG9yLmhhcygnZ21mRGVmYXVsdERpbWVuc2lvbnMnKSkge1xuICAgIHZhciBkZWZhdWx0RGltZW5zaW9ucyA9ICRpbmplY3Rvci5nZXQoJ2dtZkRlZmF1bHREaW1lbnNpb25zJyk7XG5cbiAgICBmb3IgKHZhciBkaW0gaW4gZGVmYXVsdERpbWVuc2lvbnMpIHtcbiAgICAgIGlmICh0aGlzLmRpbWVuc2lvbnNbZGltXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuZGltZW5zaW9uc1tkaW1dID0gZGVmYXVsdERpbWVuc2lvbnNbZGltXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLmJhY2tncm91bmRMYXllck1ncl8gPSAkaW5qZWN0b3IuZ2V0KCduZ2VvQmFja2dyb3VuZExheWVyTWdyJyk7XG4gICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3RoaXMuZGltZW5zaW9ucztcbiAgfSwgZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmJhY2tncm91bmRMYXllck1ncl8udXBkYXRlRGltZW5zaW9ucyhfdGhpcy5tYXAsIF90aGlzLmRpbWVuc2lvbnMpO1xuICB9KTtcbiAgdGhpcy5iYWNrZ3JvdW5kTGF5ZXJNZ3JfLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMuYmFja2dyb3VuZExheWVyTWdyXy51cGRhdGVEaW1lbnNpb25zKF90aGlzLm1hcCwgX3RoaXMuZGltZW5zaW9ucyk7XG4gIH0pO1xuICB0aGlzLmZpbHRlclNlbGVjdG9yRW5hYmxlZCA9IGZhbHNlO1xuICB0aGlzLnF1ZXJ5QWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5uZ2VvTWFwUXVlcmVudF8gPSAkaW5qZWN0b3IuZ2V0KCduZ2VvTWFwUXVlcmVudCcpO1xuICB0aGlzLmdtZlVzZXIgPSAkaW5qZWN0b3IuZ2V0KCdnbWZVc2VyJyk7XG4gIHRoaXMuc3RhdGVNYW5hZ2VyID0gJGluamVjdG9yLmdldCgnbmdlb1N0YXRlTWFuYWdlcicpO1xuICB0aGlzLnRtaER5bmFtaWNMb2NhbGUgPSAkaW5qZWN0b3IuZ2V0KCd0bWhEeW5hbWljTG9jYWxlJyk7XG4gIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuICB0aGlzLmxhbmcgPSAnJztcbiAgdGhpcy5kZWZhdWx0TGFuZyA9ICRpbmplY3Rvci5nZXQoJ2RlZmF1bHRMYW5nJyk7XG4gIHRoaXMubGFuZ1VybHMgPSAkaW5qZWN0b3IuZ2V0KCdsYW5nVXJscycpO1xuICB0aGlzLmdldHRleHRDYXRhbG9nID0gJGluamVjdG9yLmdldCgnZ2V0dGV4dENhdGFsb2cnKTtcbiAgdGhpcy5pbml0TGFuZ3VhZ2UoKTtcbiAgdGhpcy5tYXBUb29sc0dyb3VwID0gJ21hcFRvb2xzJztcbiAgdmFyIG5nZW9GZWF0dXJlT3ZlcmxheU1nciA9ICRpbmplY3Rvci5nZXQoJ25nZW9GZWF0dXJlT3ZlcmxheU1ncicpO1xuICBuZ2VvRmVhdHVyZU92ZXJsYXlNZ3IuaW5pdCh0aGlzLm1hcCk7XG4gIHZhciBuZ2VvVG9vbEFjdGl2YXRlTWdyID0gJGluamVjdG9yLmdldCgnbmdlb1Rvb2xBY3RpdmF0ZU1ncicpO1xuICB2YXIgcXVlcnlUb29sQWN0aXZhdGUgPSBuZXcgbmdlb01pc2NUb29sQWN0aXZhdGUodGhpcywgJ3F1ZXJ5QWN0aXZlJyk7XG4gIG5nZW9Ub29sQWN0aXZhdGVNZ3IucmVnaXN0ZXJUb29sKHRoaXMubWFwVG9vbHNHcm91cCwgcXVlcnlUb29sQWN0aXZhdGUsIHRydWUpO1xuICAkc2NvcGUuJHJvb3QuJG9uKFRoZW1lRXZlbnRUeXBlLlRIRU1FX05BTUVfU0VULCBmdW5jdGlvbiAoZXZlbnQsIG5hbWUpIHtcbiAgICBfdGhpcy5nbWZUaGVtZXMuZ2V0VGhlbWVPYmplY3QobmFtZSkudGhlbihmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgIF90aGlzLnNldERlZmF1bHRCYWNrZ3JvdW5kXyh0aGVtZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHZhciBvcGVuUG9wdXBfID0gZnVuY3Rpb24gb3BlblBvcHVwXyh0aXRsZSwgb3B0X3dpZHRoLCBvcHRfaGVpZ2h0LCBvcHRfYXBwbHkpIHtcbiAgICBfdGhpcy5kaXNwbGF5d2luZG93VGl0bGUgPSB0aXRsZTtcbiAgICBfdGhpcy5kaXNwbGF5d2luZG93T3BlbiA9IHRydWU7XG5cbiAgICBpZiAob3B0X3dpZHRoKSB7XG4gICAgICBfdGhpcy5kaXNwbGF5d2luZG93V2lkdGggPSBvcHRfd2lkdGggKyBcInB4XCI7XG4gICAgfVxuXG4gICAgaWYgKG9wdF9oZWlnaHQpIHtcbiAgICAgIF90aGlzLmRpc3BsYXl3aW5kb3dIZWlnaHQgPSBvcHRfaGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cblxuICAgIGlmIChvcHRfYXBwbHkgIT09IGZhbHNlKSB7XG4gICAgICBfdGhpcy4kc2NvcGUuJGFwcGx5KCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBnbWZ4ID0gd2luZG93LmdtZnggfHwge307XG4gIHdpbmRvdy5nbWZ4ID0gZ21meDtcblxuICBnbWZ4Lm9wZW5JZnJhbWVQb3B1cCA9IGZ1bmN0aW9uICh1cmwsIHRpdGxlLCBvcHRfd2lkdGgsIG9wdF9oZWlnaHQsIG9wdF9hcHBseSkge1xuICAgIF90aGlzLmRpc3BsYXl3aW5kb3dVcmwgPSB1cmw7XG4gICAgb3BlblBvcHVwXyh0aXRsZSwgb3B0X3dpZHRoLCBvcHRfaGVpZ2h0LCBvcHRfYXBwbHkpO1xuICB9O1xuXG4gIGdtZngub3BlblRleHRQb3B1cCA9IGZ1bmN0aW9uIChjb250ZW50LCB0aXRsZSwgb3B0X3dpZHRoLCBvcHRfaGVpZ2h0LCBvcHRfYXBwbHkpIHtcbiAgICBfdGhpcy5kaXNwbGF5d2luZG93Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgb3BlblBvcHVwXyh0aXRsZSwgb3B0X3dpZHRoLCBvcHRfaGVpZ2h0LCBvcHRfYXBwbHkpO1xuICB9O1xuXG4gIHRoaXMubWFuYWdlUmVzaXplID0gZmFsc2U7XG4gIHRoaXMucmVzaXplVHJhbnNpdGlvbjtcbiAgdmFyIGNneHAgPSB3aW5kb3cuY2d4cCB8fCB7fTtcbiAgd2luZG93LmNneHAgPSBjZ3hwO1xuICBjZ3hwLnRvb2xzID0gd2luZG93LmNneHAudG9vbHMgfHwge307XG5cbiAgY2d4cC50b29scy5vcGVuSW5mb1dpbmRvdyA9IGZ1bmN0aW9uICh1cmwsIHRpdGxlLCBvcHRfd2lkdGgsIG9wdF9oZWlnaHQsIG9wdF9hcHBseSkge1xuICAgIGdtZngub3BlbklmcmFtZVBvcHVwKHVybCwgdGl0bGUsIG9wdF93aWR0aCwgb3B0X2hlaWdodCwgb3B0X2FwcGx5KTtcbiAgfTtcblxuICB0aGlzLmRpc3BsYXl3aW5kb3dDb250ZW50ID0gbnVsbDtcbiAgdGhpcy5kaXNwbGF5d2luZG93RHJhZ2dhYmxlQ29udGFpbm1lbnQgPSAnLmdtZi1tYXAnO1xuICB0aGlzLmRpc3BsYXl3aW5kb3dIZWlnaHQgPSAnNTB2aCc7XG4gIHRoaXMuZGlzcGxheXdpbmRvd09wZW4gPSBmYWxzZTtcbiAgdGhpcy5kaXNwbGF5d2luZG93VGl0bGUgPSBudWxsO1xuICB0aGlzLmRpc3BsYXl3aW5kb3dVcmwgPSBudWxsO1xuICB0aGlzLmRpc3BsYXl3aW5kb3dXaWR0aCA9ICc1MHZ3JztcblxuICBpZiAoJGluamVjdG9yLmhhcygnc2VudHJ5T3B0aW9ucycpKSB7XG4gICAgdmFyIG9wdGlvbnMgPSAkaW5qZWN0b3IuZ2V0KCdzZW50cnlPcHRpb25zJyk7XG5cbiAgICBpZiAob3B0aW9ucy5kc24pIHtcbiAgICAgIHZhciB0YWdzID0gb3B0aW9ucy50YWdzIHx8IFtdO1xuICAgICAgZGVsZXRlIG9wdGlvbnMudGFncztcbiAgICAgIE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xuICAgICAgICBiZWZvcmVCcmVhZGNydW1iOiBhdWdtZW50QnJlYWRjcnVtYlxuICAgICAgfSk7XG4gICAgICBTZW50cnkuaW5pdChvcHRpb25zKTtcblxuICAgICAgaWYgKCRpbmplY3Rvci5oYXMoJ2ludGVyZmFjZScpICYmICF0YWdzWydpbnRlcmZhY2UnXSkge1xuICAgICAgICBTZW50cnkuc2V0VGFnKCdpbnRlcmZhY2UnLCAkaW5qZWN0b3IuZ2V0KCdpbnRlcmZhY2UnKSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIHRhZyBpbiB0YWdzKSB7XG4gICAgICAgIFNlbnRyeS5zZXRUYWcodGFnLCB0YWdzW3RhZ10pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkcmFnUGFuQ29uZGl0aW9uKGV2ZW50KSB7XG4gIHJldHVybiBub01vZGlmaWVyS2V5cyhldmVudCkgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5idXR0b24gIT09IDI7XG59XG5cbmZ1bmN0aW9uIGdldExheWVyQnlMYWJlbHMobGF5ZXJzLCBsYWJlbHMpIHtcbiAgaWYgKGxhYmVscyAmJiBsYWJlbHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvbEFycmF5LmZpbmQobGF5ZXJzLCBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIHJldHVybiBsYXllci5nZXQoJ2xhYmVsJykgPT09IGxhYmVsc1swXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5BYnN0cmFjdEFwcENvbnRyb2xsZXIucHJvdG90eXBlLnN3aXRjaExhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmcpIHtcbiAgaWYgKCEobGFuZyBpbiB0aGlzLmxhbmdVcmxzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBsYW5nIFVSTCcpO1xuICB9XG5cbiAgdGhpcy5nZXR0ZXh0Q2F0YWxvZy5zZXRDdXJyZW50TGFuZ3VhZ2UobGFuZyk7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2cubG9hZFJlbW90ZSh0aGlzLmxhbmdVcmxzW2xhbmddKTtcbiAgdGhpcy50bWhEeW5hbWljTG9jYWxlLnNldChsYW5nKTtcbiAgdGhpcy5sYW5nID0gbGFuZztcbn07XG5cbkFic3RyYWN0QXBwQ29udHJvbGxlci5wcm90b3R5cGUuaW5pdExhbmd1YWdlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMzID0gdGhpcztcblxuICB0aGlzLiRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpczMubGFuZztcbiAgfSwgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgX3RoaXMzLnN0YXRlTWFuYWdlci51cGRhdGVTdGF0ZSh7XG4gICAgICAnbGFuZyc6IG5ld1ZhbHVlXG4gICAgfSk7XG4gIH0pO1xuICB2YXIgYnJvd3Nlckxhbmd1YWdlID0gZ2V0QnJvd3Nlckxhbmd1YWdlKE9iamVjdC5rZXlzKHRoaXMubGFuZ1VybHMpKTtcbiAgdmFyIHVybExhbmd1YWdlID0gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0SW5pdGlhbFN0cmluZ1ZhbHVlKCdsYW5nJyk7XG5cbiAgaWYgKHVybExhbmd1YWdlICE9PSB1bmRlZmluZWQgJiYgdXJsTGFuZ3VhZ2UgaW4gdGhpcy5sYW5nVXJscykge1xuICAgIHRoaXMuc3dpdGNoTGFuZ3VhZ2UodXJsTGFuZ3VhZ2UpO1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmIChicm93c2VyTGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCAmJiBicm93c2VyTGFuZ3VhZ2UgaW4gdGhpcy5sYW5nVXJscykge1xuICAgIHRoaXMuc3dpdGNoTGFuZ3VhZ2UoYnJvd3Nlckxhbmd1YWdlKTtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zd2l0Y2hMYW5ndWFnZSh0aGlzLmRlZmF1bHRMYW5nKTtcbiAgICByZXR1cm47XG4gIH1cbn07XG5cbkFic3RyYWN0QXBwQ29udHJvbGxlci5wcm90b3R5cGUuc2V0RGVmYXVsdEJhY2tncm91bmRfID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gIHRoaXMuZ21mVGhlbWVzLmdldEJnTGF5ZXJzKCkudGhlbihmdW5jdGlvbiAobGF5ZXJzKSB7XG4gICAgdmFyIGxheWVyO1xuXG4gICAgaWYgKCFnbWZCYWNrZ3JvdW5kbGF5ZXJTdGF0dXMudG91Y2hlZEJ5VXNlcikge1xuICAgICAgbGF5ZXIgPSBfdGhpczQucGVybWFsaW5rXy5nZXRCYWNrZ3JvdW5kTGF5ZXIobGF5ZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoIWxheWVyICYmIF90aGlzNC5nbWZVc2VyLmZ1bmN0aW9uYWxpdGllcykge1xuICAgICAgbGF5ZXIgPSBnZXRMYXllckJ5TGFiZWxzKGxheWVycywgX3RoaXM0LmdtZlVzZXIuZnVuY3Rpb25hbGl0aWVzLmRlZmF1bHRfYmFzZW1hcCk7XG4gICAgfVxuXG4gICAgaWYgKCFsYXllciAmJiB0aGVtZSkge1xuICAgICAgbGF5ZXIgPSBnZXRMYXllckJ5TGFiZWxzKGxheWVycywgdGhlbWUuZnVuY3Rpb25hbGl0aWVzLmRlZmF1bHRfYmFzZW1hcCk7XG4gICAgfVxuXG4gICAgaWYgKCFsYXllcikge1xuICAgICAgbGF5ZXIgPSBsYXllcnNbbGF5ZXJzLmxlbmd0aCA+IDEgPyAxIDogMF07XG4gICAgfVxuXG4gICAgaWYgKCFsYXllcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxheWVyJyk7XG4gICAgfVxuXG4gICAgX3RoaXM0LmJhY2tncm91bmRMYXllck1ncl8uc2V0KF90aGlzNC5tYXAsIGxheWVyKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9jYXRpb25JY29uKCkge1xuICB2YXIgYXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIGFycm93LmNsYXNzTmFtZSA9ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyc7XG4gIGFycm93LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoLTAuODJyYWQpJztcbiAgdmFyIGFycm93V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgYXJyb3dXcmFwcGVyLmFwcGVuZENoaWxkKGFycm93KTtcbiAgcmV0dXJuIGFycm93V3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gYXVnbWVudEJyZWFkY3J1bWIoYnJlYWRjcnVtYiwgaGludCkge1xuICBpZiAoYnJlYWRjcnVtYi5jYXRlZ29yeSA9PT0gJ3VpLmNsaWNrJykge1xuICAgIHZhciB0YXJnZXQgPSBoaW50LmV2ZW50LnRhcmdldDtcblxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gdGFyZ2V0LmRhdGFzZXQuc2VudHJ5O1xuXG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICBicmVhZGNydW1iLm1lc3NhZ2UgPSBicmVhZGNydW1iLm1lc3NhZ2UgKyBcIiB8IFwiICsgbWVzc2FnZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0dtZkFic3RyYWN0QXBwQ29udHJvbGxlck1vZHVsZScsIFsnZ2V0dGV4dCcsICd0bWguZHluYW1pY0xvY2FsZScsIGdtZkF1dGhlbnRpY2F0aW9uTW9kdWxlLm5hbWUsIGdtZkJhY2tncm91bmRsYXllcnNlbGVjdG9yQ29tcG9uZW50Lm5hbWUsIGdtZkRhdGFzb3VyY2VNb2R1bGUubmFtZSwgZ21mRGlzY2xhaW1lckNvbXBvbmVudC5uYW1lLCBnbWZMYXllcnRyZWVNb2R1bGUubmFtZSwgZ21mTWFwTW9kdWxlLm5hbWUsIGdtZlF1ZXJ5RXh0cmFNb2R1bGUubmFtZSwgZ21mU2VhcmNoTW9kdWxlLm5hbWUsIGdtZlRoZW1lTW9kdWxlLm5hbWUsIG5nZW9NZXNzYWdlRGlzcGxheXdpbmRvd0NvbXBvbmVudC5uYW1lLCBuZ2VvTWlzY0V4dHJhTW9kdWxlLm5hbWUsIG5nZW9NaXNjRmVhdHVyZUhlbHBlci5uYW1lLCBuZ2VvUXVlcnlNYXBRdWVyZW50Lm5hbWUsIG5nZW9RdWVyeUNvbXBvbmVudC5uYW1lLCBuZ2VvU3RhdGVtYW5hZ2VyTW9kdWxlLm5hbWUsIG5nZW9TdGF0ZW1hbmFnZXJXZnNQZXJtYWxpbmsubmFtZSwgbmdlb0dlb2xvY2F0aW9uLm5hbWVdKTtcbm15TW9kdWxlLmNvbnRyb2xsZXIoJ0Fic3RyYWN0Q29udHJvbGxlcicsIEFic3RyYWN0QXBwQ29udHJvbGxlcik7XG5teU1vZHVsZS52YWx1ZSgnbmdlb0V4cG9ydEZlYXR1cmVGb3JtYXRzJywgW0ZlYXR1cmVGb3JtYXRUeXBlLktNTCwgRmVhdHVyZUZvcm1hdFR5cGUuR1BYXSk7XG5teU1vZHVsZS5jb25maWcoWyd0bWhEeW5hbWljTG9jYWxlUHJvdmlkZXInLCAnYW5ndWxhckxvY2FsZVNjcmlwdCcsIGZ1bmN0aW9uICh0bWhEeW5hbWljTG9jYWxlUHJvdmlkZXIsIGFuZ3VsYXJMb2NhbGVTY3JpcHQpIHtcbiAgdG1oRHluYW1pY0xvY2FsZVByb3ZpZGVyLmxvY2FsZUxvY2F0aW9uUGF0dGVybihhbmd1bGFyTG9jYWxlU2NyaXB0KTtcbn1dKTtcbmJvb3RzdHJhcChteU1vZHVsZSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZkNvbnRyb2xsZXJzQWJzdHJhY3RBcHBDb250cm9sbGVyLCB7IEFic3RyYWN0QXBwQ29udHJvbGxlciB9IGZyb20gJ2dtZi9jb250cm9sbGVycy9BYnN0cmFjdEFwcENvbnRyb2xsZXIuanMnO1xuaW1wb3J0IGdtZk1vYmlsZU1lYXN1cmVNb2R1bGUgZnJvbSAnZ21mL21vYmlsZS9tZWFzdXJlL21vZHVsZS5qcyc7XG5pbXBvcnQgZ21mTW9iaWxlTmF2aWdhdGlvbk1vZHVsZSBmcm9tICdnbWYvbW9iaWxlL25hdmlnYXRpb24vbW9kdWxlLmpzJztcbmltcG9ydCBnbWZRdWVyeVdpbmRvd0NvbXBvbmVudCBmcm9tICdnbWYvcXVlcnkvd2luZG93Q29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZSBmcm9tICduZ2VvL21pc2MvVG9vbEFjdGl2YXRlLmpzJztcbmltcG9ydCAnZ21mL2NvbnRyb2xsZXJzL3ZhcnNfbW9iaWxlLnNjc3MnO1xuaW1wb3J0ICdnbWYvY29udHJvbGxlcnMvbW9iaWxlLnNjc3MnO1xuZXhwb3J0IHZhciBBYnN0cmFjdE1vYmlsZUNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX0Fic3RyYWN0QXBwQ29udHJvbGxlKSB7XG4gIEFic3RyYWN0TW9iaWxlQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGluamVjdG9yXCJdO1xuXG4gIF9pbmhlcml0c0xvb3NlKEFic3RyYWN0TW9iaWxlQ29udHJvbGxlciwgX0Fic3RyYWN0QXBwQ29udHJvbGxlKTtcblxuICBmdW5jdGlvbiBBYnN0cmFjdE1vYmlsZUNvbnRyb2xsZXIoJHNjb3BlLCAkaW5qZWN0b3IpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9BYnN0cmFjdEFwcENvbnRyb2xsZS5jYWxsKHRoaXMsICRzY29wZSwgJGluamVjdG9yLCB0cnVlKSB8fCB0aGlzO1xuICAgIF90aGlzLmxlZnROYXZWaXNpYmxlID0gZmFsc2U7XG4gICAgX3RoaXMucmlnaHROYXZWaXNpYmxlID0gZmFsc2U7XG4gICAgX3RoaXMuc2VhcmNoT3ZlcmxheVZpc2libGUgPSBmYWxzZTtcbiAgICBfdGhpcy5tZWFzdXJlQXJlYUFjdGl2ZSA9IGZhbHNlO1xuICAgIF90aGlzLm1lYXN1cmVQb2ludEFjdGl2ZSA9IGZhbHNlO1xuICAgIF90aGlzLm1lYXN1cmVMZW5ndGhBY3RpdmUgPSBmYWxzZTtcbiAgICBfdGhpcy5kaXNwbGF5d2luZG93SGVpZ2h0ID0gJzEwMHZoJztcbiAgICBfdGhpcy5kaXNwbGF5d2luZG93V2lkdGggPSAnMTAwdncnO1xuICAgIHZhciBuZ2VvVG9vbEFjdGl2YXRlTWdyID0gJGluamVjdG9yLmdldCgnbmdlb1Rvb2xBY3RpdmF0ZU1ncicpO1xuICAgIHZhciBtZWFzdXJlQXJlYUFjdGl2YXRlID0gbmV3IG5nZW9NaXNjVG9vbEFjdGl2YXRlKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAnbWVhc3VyZUFyZWFBY3RpdmUnKTtcbiAgICBuZ2VvVG9vbEFjdGl2YXRlTWdyLnJlZ2lzdGVyVG9vbCgnbWFwVG9vbHMnLCBtZWFzdXJlQXJlYUFjdGl2YXRlLCBmYWxzZSk7XG4gICAgdmFyIG1lYXN1cmVQb2ludEFjdGl2YXRlID0gbmV3IG5nZW9NaXNjVG9vbEFjdGl2YXRlKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAnbWVhc3VyZVBvaW50QWN0aXZlJyk7XG4gICAgbmdlb1Rvb2xBY3RpdmF0ZU1nci5yZWdpc3RlclRvb2woJ21hcFRvb2xzJywgbWVhc3VyZVBvaW50QWN0aXZhdGUsIGZhbHNlKTtcbiAgICB2YXIgbWVhc3VyZUxlbmd0aEFjdGl2YXRlID0gbmV3IG5nZW9NaXNjVG9vbEFjdGl2YXRlKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAnbWVhc3VyZUxlbmd0aEFjdGl2ZScpO1xuICAgIG5nZW9Ub29sQWN0aXZhdGVNZ3IucmVnaXN0ZXJUb29sKCdtYXBUb29scycsIG1lYXN1cmVMZW5ndGhBY3RpdmF0ZSwgZmFsc2UpO1xuICAgIF90aGlzLnNlYXJjaExpc3RlbmVycyA9IHtcbiAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIF90aGlzLnNlYXJjaE92ZXJsYXlWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIF90aGlzLnNlYXJjaE92ZXJsYXlWaXNpYmxlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcbiAgICBfdGhpcy5tYW5hZ2VSZXNpemUgPSB0cnVlO1xuICAgIF90aGlzLnJlc2l6ZVRyYW5zaXRpb24gPSA1MDA7XG4gICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuZ21mVXNlci51c2VybmFtZTtcbiAgICB9LCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICBpZiAobmV3VmFsICE9PSBudWxsICYmIF90aGlzLm5hdklzVmlzaWJsZSgpKSB7XG4gICAgICAgIF90aGlzLnJpZ2h0TmF2VmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIF90aGlzLnJlZGlyZWN0VXJsID0gJGluamVjdG9yLmdldCgncmVkaXJlY3RVcmwnKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQWJzdHJhY3RNb2JpbGVDb250cm9sbGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8udG9nZ2xlTGVmdE5hdlZpc2liaWxpdHkgPSBmdW5jdGlvbiB0b2dnbGVMZWZ0TmF2VmlzaWJpbGl0eSgpIHtcbiAgICB0aGlzLmxlZnROYXZWaXNpYmxlID0gIXRoaXMubGVmdE5hdlZpc2libGU7XG4gIH07XG5cbiAgX3Byb3RvLnRvZ2dsZVJpZ2h0TmF2VmlzaWJpbGl0eSA9IGZ1bmN0aW9uIHRvZ2dsZVJpZ2h0TmF2VmlzaWJpbGl0eSgpIHtcbiAgICB0aGlzLnJpZ2h0TmF2VmlzaWJsZSA9ICF0aGlzLnJpZ2h0TmF2VmlzaWJsZTtcbiAgfTtcblxuICBfcHJvdG8uaGlkZU5hdiA9IGZ1bmN0aW9uIGhpZGVOYXYoKSB7XG4gICAgdGhpcy5sZWZ0TmF2VmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMucmlnaHROYXZWaXNpYmxlID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLm5hdklzVmlzaWJsZSA9IGZ1bmN0aW9uIG5hdklzVmlzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5sZWZ0TmF2VmlzaWJsZSB8fCB0aGlzLnJpZ2h0TmF2VmlzaWJsZTtcbiAgfTtcblxuICBfcHJvdG8ub3Blbk5hdk1lbnUgPSBmdW5jdGlvbiBvcGVuTmF2TWVudSh0YXJnZXQpIHtcbiAgICB2YXIgbmF2RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdnbWYtbW9iaWxlLW5hdi1idXR0b24nKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmF2RWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbGVtZW50ID0gbmF2RWxlbWVudHNbaV07XG5cbiAgICAgIGlmIChlbGVtZW50LmRhdGFzZXQgJiYgZWxlbWVudC5kYXRhc2V0LnRhcmdldCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgIGVsZW1lbnQuY2xpY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEFic3RyYWN0TW9iaWxlQ29udHJvbGxlcjtcbn0oQWJzdHJhY3RBcHBDb250cm9sbGVyKTtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdHbWZBYnN0cmFjdE1vYmlsZUNvbnRyb2xsZXJNb2R1bGUnLCBbZ21mQ29udHJvbGxlcnNBYnN0cmFjdEFwcENvbnRyb2xsZXIubmFtZSwgZ21mTW9iaWxlTWVhc3VyZU1vZHVsZS5uYW1lLCBnbWZNb2JpbGVOYXZpZ2F0aW9uTW9kdWxlLm5hbWUsIGdtZlF1ZXJ5V2luZG93Q29tcG9uZW50Lm5hbWVdKTtcbm15TW9kdWxlLmNvbnRyb2xsZXIoJ0Fic3RyYWN0TW9iaWxlQ29udHJvbGxlcicsIEFic3RyYWN0TW9iaWxlQ29udHJvbGxlcik7XG5teU1vZHVsZS52YWx1ZSgnaXNNb2JpbGUnLCB0cnVlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcblxuZnVuY3Rpb24gYm9vdHN0cmFwKG1vZHVsZSkge1xuICB2YXIgb2xkT2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4gIGlmICghb2xkT2JqZWN0VG9TdHJpbmcudG9TdHJpbmcoKS5pbmNsdWRlcygnW25hdGl2ZSBjb2RlXScpKSB7XG4gICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnW29iamVjdCBOdWxsXSc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuICdbb2JqZWN0IFVuZGVmaW5lZF0nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2xkT2JqZWN0VG9TdHJpbmcuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIGludGVyZmFjZV8gPSAkKCdtZXRhW25hbWU9aW50ZXJmYWNlXScpWzBdLmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xuICB2YXIgZHluYW1pY1VybF8gPSAkKCdtZXRhW25hbWU9ZHluYW1pY1VybF0nKVswXS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKTtcbiAgdmFyIHNlYXJjaCA9IGRvY3VtZW50LmxvY2F0aW9uID8gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoIHx8ICcnIDogJyc7XG4gIHZhciBkeW5hbWljVXJsID0gZHluYW1pY1VybF8gKyBcIj9pbnRlcmZhY2U9XCIgKyBpbnRlcmZhY2VfICsgXCImcXVlcnk9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoKSArIFwiJnBhdGg9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUpO1xuICB2YXIgcmVxdWVzdCA9ICQuYWpheChkeW5hbWljVXJsLCB7XG4gICAgJ2RhdGFUeXBlJzogJ2pzb24nLFxuICAgICd4aHJGaWVsZHMnOiB7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlXG4gICAgfVxuICB9KTtcbiAgcmVxdWVzdC5mYWlsKGZ1bmN0aW9uIChqcVhIUiwgdGV4dFN0YXR1cykge1xuICAgIHdpbmRvdy5hbGVydChcIkZhaWxlZCB0byBnZXQgdGhlIGR5bmFtaWM6IFwiICsgdGV4dFN0YXR1cyk7XG4gIH0pO1xuICByZXF1ZXN0LmRvbmUoZnVuY3Rpb24gKGR5bmFtaWMpIHtcbiAgICBpZiAoZHluYW1pYy5kb1JlZGlyZWN0KSB7XG4gICAgICB2YXIgc21hbGxfc2NyZWVuID0gd2luZG93Lm1hdGNoTWVkaWEgPyB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogMTAyNHB4KScpIDogZmFsc2U7XG5cbiAgICAgIGlmIChzbWFsbF9zY3JlZW4gJiYgJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZHluYW1pYy5yZWRpcmVjdFVybDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIGR5bmFtaWMuY29uc3RhbnRzKSB7XG4gICAgICBtb2R1bGUuY29uc3RhbnQobmFtZSwgZHluYW1pYy5jb25zdGFudHNbbmFtZV0pO1xuICAgIH1cblxuICAgIGFuZ3VsYXIuYm9vdHN0cmFwKGRvY3VtZW50LCBbXCJBcHBcIiArIGludGVyZmFjZV9dKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGJvb3RzdHJhcDsiLCJpbXBvcnQgdGlueWNvbG9yIGZyb20gJ3Rpbnljb2xvcjInO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgdmFyIGNzc1ZhcnMgPSB7fTtcblxuICBpZiAob3B0aW9uc1snYnJhbmQtcHJpbWFyeSddKSB7XG4gICAgdmFyIHByaW1hcnkgPSB0aW55Y29sb3Iob3B0aW9uc1snYnJhbmQtcHJpbWFyeSddKTtcbiAgICB2YXIgbGluayA9IHRpbnljb2xvcih7XG4gICAgICBoOiBwcmltYXJ5LnRvSHNsKCkuaCxcbiAgICAgIHM6IDAuMjUsXG4gICAgICBsOiAwLjVcbiAgICB9KTtcbiAgICBjc3NWYXJzWydsaW5rLWNvbG9yJ10gPSBsaW5rLnRvSGV4U3RyaW5nKCk7XG4gICAgY3NzVmFyc1snbGluay1ob3Zlci1jb2xvciddID0gbGluay5jbG9uZSgpLmRhcmtlbigxNSkudG9IZXhTdHJpbmcoKTtcbiAgICB2YXIgYm9yZGVyID0gcHJpbWFyeS5jbG9uZSgpLmRhcmtlbigxNSk7XG4gICAgY3NzVmFyc1snaW5wdXQtYm9yZGVyLWZvY3VzJ10gPSBib3JkZXIudG9IZXhTdHJpbmcoKTtcbiAgICBjc3NWYXJzWydpbnB1dC1ib3JkZXItZm9jdXMtZGFya2VuJ10gPSBib3JkZXIuY2xvbmUoKS5kYXJrZW4oMTUpLnRvSGV4U3RyaW5nKCk7XG4gICAgY3NzVmFyc1snYm9yZGVyLWNvbG9yJ10gPSBib3JkZXIudG9IZXhTdHJpbmcoKTtcbiAgICBjc3NWYXJzWyd0YWJsZS1ib3JkZXItY29sb3InXSA9IGJvcmRlci50b0hleFN0cmluZygpO1xuICAgIGNzc1ZhcnNbJ2hvdmVyLWJhY2tncm91bmQtY29sb3InXSA9IHByaW1hcnkuY2xvbmUoKS5saWdodGVuKDE1KS50b0hleFN0cmluZygpO1xuICAgIHZhciBidXR0b25Gb2N1cyA9IHByaW1hcnkuY2xvbmUoKTtcbiAgICBidXR0b25Gb2N1cy5zZXRBbHBoYSgwLjI1KTtcbiAgICBjc3NWYXJzWydpbnB1dC1idG4tZm9jdXMtY29sb3InXSA9IGJ1dHRvbkZvY3VzLnRvUmdiU3RyaW5nKCk7XG4gIH1cblxuICBpZiAob3B0aW9uc1snYnJhbmQtc2Vjb25kYXJ5J10pIHtcbiAgICB2YXIgc2Vjb25kYXJ5ID0gdGlueWNvbG9yKG9wdGlvbnNbJ2JyYW5kLXNlY29uZGFyeSddKTtcbiAgICBjc3NWYXJzWydicmFuZC1zZWNvbmRhcnktZGFyayddID0gc2Vjb25kYXJ5LmNsb25lKCkuZGFya2VuKDE1KS50b0hleFN0cmluZygpO1xuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihjc3NWYXJzLCBvcHRpb25zKTtcbiAgcmV0dXJuIGNzc1ZhcnM7XG59IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQnLCBbXSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQnLCB7XG4gIGRhdGFTb3VyY2U6IG51bGxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgRVhURVJOQUxMQVlFUkdST1VQX05BTUUgfSBmcm9tICdnbWYvaW5kZXguanMnO1xuaW1wb3J0IG5nZW9NYXBMYXllckhlbHBlciBmcm9tICduZ2VvL21hcC9MYXllckhlbHBlci5qcyc7XG5pbXBvcnQgbmdlb01pc2NGaWxlIGZyb20gJ25nZW8vbWlzYy9GaWxlLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2VzIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9EYXRhU291cmNlcy5qcyc7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VGaWxlIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9GaWxlLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZUZpbGVHcm91cCBmcm9tICduZ2VvL2RhdGFzb3VyY2UvRmlsZUdyb3VwLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZU9HQywgeyBUeXBlLCBXTVNJbmZvRm9ybWF0IH0gZnJvbSAnbmdlby9kYXRhc291cmNlL09HQy5qcyc7XG5pbXBvcnQgZ21mRGF0YXNvdXJjZUZpbGVHcm91cCBmcm9tICdnbWYvZGF0YXNvdXJjZS9maWxlR3JvdXAuanMnO1xuaW1wb3J0IGdtZkV4dGVybmFsRGF0YXNvdXJjZU9HQyBmcm9tICdnbWYvZGF0YXNvdXJjZS9FeHRlcm5hbE9HQy5qcyc7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VPR0NHcm91cCBmcm9tICduZ2VvL2RhdGFzb3VyY2UvT0dDR3JvdXAuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlV01TR3JvdXAgZnJvbSAnbmdlby9kYXRhc291cmNlL1dNU0dyb3VwLmpzJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbENvbGxlY3Rpb24gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHUFggZnJvbSAnb2wvZm9ybWF0L0dQWC5qcyc7XG5pbXBvcnQgb2xGb3JtYXRLTUwgZnJvbSAnb2wvZm9ybWF0L0tNTC5qcyc7XG5pbXBvcnQgeyBDb2xsZWN0aW9uRXZlbnQgfSBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmV4cG9ydCB2YXIgRXh0ZXJuYWxEYXRTb3VyY2VzTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgRXh0ZXJuYWxEYXRTb3VyY2VzTWFuYWdlci4kaW5qZWN0ID0gW1wiZ2V0dGV4dENhdGFsb2dcIiwgXCIkaW5qZWN0b3JcIiwgXCIkcVwiLCBcIiRyb290U2NvcGVcIiwgXCJnbWZEYXRhc291cmNlRmlsZUdyb3VwXCIsIFwibmdlb0RhdGFTb3VyY2VzXCIsIFwibmdlb0ZpbGVcIiwgXCJuZ2VvTGF5ZXJIZWxwZXJcIl07XG5cbiAgZnVuY3Rpb24gRXh0ZXJuYWxEYXRTb3VyY2VzTWFuYWdlcihnZXR0ZXh0Q2F0YWxvZywgJGluamVjdG9yLCAkcSwgJHJvb3RTY29wZSwgZ21mRGF0YXNvdXJjZUZpbGVHcm91cCwgbmdlb0RhdGFTb3VyY2VzLCBuZ2VvRmlsZSwgbmdlb0xheWVySGVscGVyKSB7XG4gICAgdGhpcy5pbmplY3Rvcl8gPSAkaW5qZWN0b3I7XG4gICAgdGhpcy5xXyA9ICRxO1xuICAgIHRoaXMucm9vdFNjb3BlXyA9ICRyb290U2NvcGU7XG4gICAgdGhpcy5kYXRhU291cmNlc18gPSBuZ2VvRGF0YVNvdXJjZXMuY29sbGVjdGlvbjtcbiAgICB0aGlzLm5nZW9GaWxlXyA9IG5nZW9GaWxlO1xuICAgIHRoaXMubmdlb0xheWVySGVscGVyXyA9IG5nZW9MYXllckhlbHBlcjtcbiAgICB0aGlzLmV4dERhdGFTb3VyY2VzXyA9IHt9O1xuICAgIHRoaXMuZmlsZXNfID0ge307XG4gICAgdGhpcy5tYXBfID0gbnVsbDtcbiAgICB0aGlzLmZpbGVHcm91cF8gPSBuZXcgbmdlb0RhdGFzb3VyY2VGaWxlR3JvdXAoe1xuICAgICAgZGF0YVNvdXJjZXM6IFtdLFxuICAgICAgaW5qZWN0b3I6IHRoaXMuaW5qZWN0b3JfLFxuICAgICAgdGl0bGU6IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnTG9jYWwgZmlsZXMnKVxuICAgIH0pO1xuICAgIGdtZkRhdGFzb3VyY2VGaWxlR3JvdXAuZmlsZUdyb3VwID0gdGhpcy5maWxlR3JvdXBfO1xuICAgIHRoaXMud21zR3JvdXBzQ29sbGVjdGlvbl8gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy53bXRzR3JvdXBzQ29sbGVjdGlvbl8gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy53bXRzQ2FjaGVfID0ge307XG4gICAgbGlzdGVuKHRoaXMuZGF0YVNvdXJjZXNfLCAncmVtb3ZlJywgdGhpcy5oYW5kbGVEYXRhU291cmNlc1JlbW92ZV8sIHRoaXMpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEV4dGVybmFsRGF0U291cmNlc01hbmFnZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGRXTVNHcm91cF8gPSBmdW5jdGlvbiBhZGRXTVNHcm91cF8od21zR3JvdXApIHtcbiAgICB0aGlzLndtc0dyb3Vwc0NvbGxlY3Rpb24ucHVzaCh3bXNHcm91cCk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZVdNU0dyb3VwXyA9IGZ1bmN0aW9uIHJlbW92ZVdNU0dyb3VwXyh3bXNHcm91cCkge1xuICAgIHRoaXMud21zR3JvdXBzQ29sbGVjdGlvbi5yZW1vdmUod21zR3JvdXApO1xuICB9O1xuXG4gIF9wcm90by5nZXRXTVNHcm91cCA9IGZ1bmN0aW9uIGdldFdNU0dyb3VwKHVybCkge1xuICAgIHZhciBmb3VuZCA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud21zR3JvdXBzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciB3bXNHcm91cCA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICBpZiAod21zR3JvdXAudXJsID09PSB1cmwpIHtcbiAgICAgICAgZm91bmQgPSB3bXNHcm91cDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9O1xuXG4gIF9wcm90by5hZGRXTVRTR3JvdXBfID0gZnVuY3Rpb24gYWRkV01UU0dyb3VwXyh3bXRzR3JvdXApIHtcbiAgICB0aGlzLndtdHNHcm91cHNDb2xsZWN0aW9uLnB1c2god210c0dyb3VwKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlV01UU0dyb3VwXyA9IGZ1bmN0aW9uIHJlbW92ZVdNVFNHcm91cF8od210c0dyb3VwKSB7XG4gICAgdGhpcy53bXRzR3JvdXBzQ29sbGVjdGlvbi5yZW1vdmUod210c0dyb3VwKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0V01UU0dyb3VwID0gZnVuY3Rpb24gZ2V0V01UU0dyb3VwKHVybCkge1xuICAgIHZhciBmb3VuZCA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLndtdHNHcm91cHMpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgdmFyIHdtdHNHcm91cCA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgaWYgKHdtdHNHcm91cC51cmwgPT09IHVybCkge1xuICAgICAgICBmb3VuZCA9IHdtdHNHcm91cDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9O1xuXG4gIF9wcm90by5pc0V4dGVybmFsRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGlzRXh0ZXJuYWxEYXRhU291cmNlKGRhdGFTb3VyY2UpIHtcbiAgICByZXR1cm4gISF0aGlzLmV4dERhdGFTb3VyY2VzX1tkYXRhU291cmNlLmlkXTtcbiAgfTtcblxuICBfcHJvdG8uYWRkTGF5ZXJfID0gZnVuY3Rpb24gYWRkTGF5ZXJfKGxheWVyKSB7XG4gICAgdGhpcy5sYXllckdyb3VwLmdldExheWVycygpLnB1c2gobGF5ZXIpO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVMYXllcl8gPSBmdW5jdGlvbiByZW1vdmVMYXllcl8obGF5ZXIpIHtcbiAgICB0aGlzLmxheWVyR3JvdXAuZ2V0TGF5ZXJzKCkucmVtb3ZlKGxheWVyKTtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlQW5kQWRkRGF0YVNvdXJjZUZyb21XTVNDYXBhYmlsaXR5ID0gZnVuY3Rpb24gY3JlYXRlQW5kQWRkRGF0YVNvdXJjZUZyb21XTVNDYXBhYmlsaXR5KGxheWVyLCBjYXBhYmlsaXRpZXMsIHVybCkge1xuICAgIHZhciBpZCA9IGdldElkKGxheWVyKTtcbiAgICB2YXIgc2VydmljZSA9IGNhcGFiaWxpdGllcy5TZXJ2aWNlO1xuICAgIHZhciBvcmlnaW5hbFVybCA9IHVybCB8fCBzZXJ2aWNlLk9ubGluZVJlc291cmNlO1xuICAgIHVybCA9IHNlcnZpY2UuT25saW5lUmVzb3VyY2UgfHwgdXJsO1xuICAgIHZhciBkYXRhU291cmNlO1xuXG4gICAgaWYgKHRoaXMuZXh0RGF0YVNvdXJjZXNfW2lkXSkge1xuICAgICAgZGF0YVNvdXJjZSA9IHRoaXMuZXh0RGF0YVNvdXJjZXNfW2lkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlcSA9IGNhcGFiaWxpdGllcy5DYXBhYmlsaXR5LlJlcXVlc3Q7XG4gICAgICB2YXIgZm9ybWF0cyA9IHJlcS5HZXRNYXAuRm9ybWF0O1xuICAgICAgdmFyIGltYWdlUG5nVHlwZSA9ICdpbWFnZS9wbmcnO1xuICAgICAgdmFyIG9nY0ltYWdlVHlwZSA9IGZvcm1hdHMuaW5jbHVkZXMoaW1hZ2VQbmdUeXBlKSA/IGltYWdlUG5nVHlwZSA6IGZvcm1hdHNbMF07XG4gICAgICB2YXIgaW5mb0Zvcm1hdHMgPSByZXEuR2V0RmVhdHVyZUluZm8uRm9ybWF0O1xuICAgICAgdmFyIHdtc0luZm9Gb3JtYXQgPSBpbmZvRm9ybWF0cy5pbmNsdWRlcyhXTVNJbmZvRm9ybWF0LkdNTCkgPyBXTVNJbmZvRm9ybWF0LkdNTCA6IHVuZGVmaW5lZDtcbiAgICAgIHZhciBxdWVyeWFibGUgPSBsYXllci5xdWVyeWFibGUgPT09IHRydWUgJiYgd21zSW5mb0Zvcm1hdCAhPT0gdW5kZWZpbmVkO1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgbmFtZTogbGF5ZXIuVGl0bGUsXG4gICAgICAgIG9nY0ltYWdlVHlwZTogb2djSW1hZ2VUeXBlLFxuICAgICAgICB3bXNMYXllcnM6IFt7XG4gICAgICAgICAgbmFtZTogbGF5ZXIuTmFtZSxcbiAgICAgICAgICBxdWVyeWFibGU6IHF1ZXJ5YWJsZVxuICAgICAgICB9XSxcbiAgICAgICAgb2djVHlwZTogVHlwZS5XTVMsXG4gICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgIHdtc1VybDogdXJsXG4gICAgICB9O1xuXG4gICAgICBpZiAod21zSW5mb0Zvcm1hdCkge1xuICAgICAgICBvcHRpb25zLndtc0luZm9Gb3JtYXQgPSB3bXNJbmZvRm9ybWF0O1xuICAgICAgfVxuXG4gICAgICB2YXIgbGVnZW5kID0ge1xuICAgICAgICAndGl0bGUnOiBsYXllci5UaXRsZSxcbiAgICAgICAgJ3VybCc6IG9yaWdpbmFsVXJsLFxuICAgICAgICAnbmFtZSc6IGxheWVyLk5hbWVcbiAgICAgIH07XG4gICAgICBkYXRhU291cmNlID0gbmV3IGdtZkV4dGVybmFsRGF0YXNvdXJjZU9HQyhvcHRpb25zLCBsZWdlbmQpO1xuICAgICAgdGhpcy5leHREYXRhU291cmNlc19baWRdID0gZGF0YVNvdXJjZTtcbiAgICB9XG5cbiAgICB2YXIgd21zR3JvdXAgPSB0aGlzLmdldFdNU0dyb3VwKHVybCk7XG5cbiAgICBpZiAod21zR3JvdXApIHtcbiAgICAgIGlmICghd21zR3JvdXAuZGF0YVNvdXJjZXMuaW5jbHVkZXMoZGF0YVNvdXJjZSkpIHtcbiAgICAgICAgd21zR3JvdXAuYWRkRGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlc18ucHVzaChkYXRhU291cmNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd21zR3JvdXAgPSBuZXcgbmdlb0RhdGFzb3VyY2VXTVNHcm91cCh7XG4gICAgICAgIGRhdGFTb3VyY2VzOiBbZGF0YVNvdXJjZV0sXG4gICAgICAgIGluamVjdG9yOiB0aGlzLmluamVjdG9yXyxcbiAgICAgICAgdGl0bGU6IHNlcnZpY2UuVGl0bGUsXG4gICAgICAgIHVybDogdXJsXG4gICAgICB9LCB0aGlzLm5nZW9MYXllckhlbHBlcl8pO1xuICAgICAgdGhpcy5hZGRMYXllcl8od21zR3JvdXAubGF5ZXIpO1xuICAgICAgdGhpcy5hZGRXTVNHcm91cF8od21zR3JvdXApO1xuICAgICAgdGhpcy5kYXRhU291cmNlc18ucHVzaChkYXRhU291cmNlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZUFuZEFkZERhdGFTb3VyY2VGcm9tV01UU0NhcGFiaWxpdHkgPSBmdW5jdGlvbiBjcmVhdGVBbmRBZGREYXRhU291cmNlRnJvbVdNVFNDYXBhYmlsaXR5KGxheWVyLCBjYXBhYmlsaXRpZXMsIHdtdHNVcmwpIHtcbiAgICB2YXIgaWQgPSBnZXRJZChsYXllcik7XG5cbiAgICBpZiAodGhpcy53bXRzQ2FjaGVfW2lkXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkYXRhU291cmNlO1xuXG4gICAgaWYgKHRoaXMuZXh0RGF0YVNvdXJjZXNfW2lkXSkge1xuICAgICAgZGF0YVNvdXJjZSA9IHRoaXMuZXh0RGF0YVNvdXJjZXNfW2lkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG5hbWUgPSBsYXllci5UaXRsZTtcbiAgICAgIHZhciB3bXRzTGF5ZXIgPSBsYXllci5JZGVudGlmaWVyO1xuICAgICAgZGF0YVNvdXJjZSA9IG5ldyBuZ2VvRGF0YXNvdXJjZU9HQyh7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgb2djVHlwZTogVHlwZS5XTVRTLFxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICB3bXRzTGF5ZXI6IHdtdHNMYXllcixcbiAgICAgICAgd210c1VybDogd210c1VybFxuICAgICAgfSk7XG4gICAgICB0aGlzLmV4dERhdGFTb3VyY2VzX1tpZF0gPSBkYXRhU291cmNlO1xuICAgIH1cblxuICAgIHZhciB3bXRzR3JvdXAgPSB0aGlzLmdldFdNVFNHcm91cCh3bXRzVXJsKTtcblxuICAgIGlmICghd210c0dyb3VwKSB7XG4gICAgICB3bXRzR3JvdXAgPSBuZXcgbmdlb0RhdGFzb3VyY2VPR0NHcm91cCh7XG4gICAgICAgIGRhdGFTb3VyY2VzOiBbXSxcbiAgICAgICAgdGl0bGU6IGNhcGFiaWxpdGllcy5TZXJ2aWNlSWRlbnRpZmljYXRpb24uVGl0bGUsXG4gICAgICAgIHVybDogd210c1VybFxuICAgICAgfSk7XG4gICAgICB0aGlzLmFkZFdNVFNHcm91cF8od210c0dyb3VwKTtcbiAgICB9XG5cbiAgICB3bXRzR3JvdXAuYWRkRGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgICB2YXIgbGF5ZXJPYmogPSB0aGlzLm5nZW9MYXllckhlbHBlcl8uY3JlYXRlV01UU0xheWVyRnJvbUNhcGFiaWxpdGl0ZXNPYmooY2FwYWJpbGl0aWVzLCBsYXllcik7XG4gICAgdGhpcy5hZGRMYXllcl8obGF5ZXJPYmopO1xuICAgIHRoaXMuZGF0YVNvdXJjZXNfLnB1c2goZGF0YVNvdXJjZSk7XG4gICAgdGhpcy53bXRzQ2FjaGVfW2lkXSA9IHtcbiAgICAgIGxheWVyT2JqOiBsYXllck9iaixcbiAgICAgIHVucmVnaXN0ZXI6IHRoaXMucm9vdFNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS52aXNpYmxlO1xuICAgICAgfSwgdGhpcy5oYW5kbGVXTVRTRGF0YVNvdXJjZVZpc2libGVDaGFuZ2VfLmJpbmQodGhpcywgbGF5ZXJPYmopKVxuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZUFuZEFkZERhdGFTb3VyY2VGcm9tRmlsZSA9IGZ1bmN0aW9uIGNyZWF0ZUFuZEFkZERhdGFTb3VyY2VGcm9tRmlsZShmaWxlLCBvcHRfY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5nZXRGaWxlRGF0YVNvdXJjZV8oZmlsZSkudGhlbihmdW5jdGlvbiAoZGF0YVNvdXJjZSkge1xuICAgICAgdmFyIHN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgdmFyIGZpbGVHcm91cCA9IF90aGlzLmZpbGVHcm91cF87XG5cbiAgICAgIGlmIChpc0VtcHR5KGRhdGFTb3VyY2UuZXh0ZW50KSkge1xuICAgICAgICBzdWNjZXNzID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIV90aGlzLm1hcF8pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZUdyb3VwLmRhdGFTb3VyY2VzLmluY2x1ZGVzKGRhdGFTb3VyY2UpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuYWRkTGF5ZXJfKGRhdGFTb3VyY2UubGF5ZXIpO1xuXG4gICAgICAgIGZpbGVHcm91cC5hZGREYXRhU291cmNlKGRhdGFTb3VyY2UpO1xuXG4gICAgICAgIF90aGlzLm1hcF8uZ2V0VmlldygpLmZpdChkYXRhU291cmNlLmV4dGVudCk7XG5cbiAgICAgICAgX3RoaXMuZGF0YVNvdXJjZXNfLnB1c2goZGF0YVNvdXJjZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRfY2FsbGJhY2spIHtcbiAgICAgICAgb3B0X2NhbGxiYWNrKHN1Y2Nlc3MpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChyZWplY3Rpb25zKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgZmlsZTogXCIgKyBmaWxlLm5hbWUpO1xuXG4gICAgICBpZiAob3B0X2NhbGxiYWNrKSB7XG4gICAgICAgIG9wdF9jYWxsYmFjayhmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldEZpbGVEYXRhU291cmNlXyA9IGZ1bmN0aW9uIGdldEZpbGVEYXRhU291cmNlXyhmaWxlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgZGVmZXIgPSB0aGlzLnFfLmRlZmVyKCk7XG5cbiAgICBpZiAodGhpcy5maWxlc19bZmlsZS5uYW1lXSkge1xuICAgICAgZGVmZXIucmVzb2x2ZSh0aGlzLmZpbGVzX1tmaWxlLm5hbWVdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG5nZW9GaWxlID0gdGhpcy5uZ2VvRmlsZV87XG4gICAgICBuZ2VvRmlsZS5yZWFkKGZpbGUpLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgaWYgKCFfdGhpczIubWFwXykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmZWF0dXJlcztcbiAgICAgICAgdmFyIHJlYWRPcHRpb25zID0ge1xuICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBfdGhpczIubWFwXy5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG5nZW9GaWxlLmlzS21sKGNvbnRlbnQpKSB7XG4gICAgICAgICAgZmVhdHVyZXMgPSBuZXcgb2xGb3JtYXRLTUwoKS5yZWFkRmVhdHVyZXMoY29udGVudCwgcmVhZE9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKG5nZW9GaWxlLmlzR3B4KGNvbnRlbnQpKSB7XG4gICAgICAgICAgZmVhdHVyZXMgPSBuZXcgb2xGb3JtYXRHUFgoKS5yZWFkRmVhdHVyZXMoY29udGVudCwgcmVhZE9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZlYXR1cmVzKSB7XG4gICAgICAgICAgdmFyIGlkID0gZ2V0SWQoZmlsZSk7XG4gICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBuZXcgbmdlb0RhdGFzb3VyY2VGaWxlKHtcbiAgICAgICAgICAgIGZlYXR1cmVzOiBuZXcgb2xDb2xsZWN0aW9uKGZlYXR1cmVzKSxcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIHZpc2libGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpczIuZmlsZXNfW2ZpbGUubmFtZV0gPSBkYXRhU291cmNlO1xuICAgICAgICAgIF90aGlzMi5leHREYXRhU291cmNlc19baWRdID0gZGF0YVNvdXJjZTtcbiAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGFTb3VyY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVyLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlV01UU0RhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVdNVFNEYXRhU291cmNlVmlzaWJsZUNoYW5nZV8obGF5ZXIsIHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgbGF5ZXIuc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEYXRhU291cmNlc1JlbW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVEYXRhU291cmNlc1JlbW92ZV8oZXZ0KSB7XG4gICAgaWYgKGV2dCBpbnN0YW5jZW9mIENvbGxlY3Rpb25FdmVudCkge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBldnQuZWxlbWVudDtcblxuICAgICAgaWYgKHRoaXMuZXh0RGF0YVNvdXJjZXNfW2RhdGFTb3VyY2UuaWRdID09PSBkYXRhU291cmNlKSB7XG4gICAgICAgIGlmIChkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VGaWxlKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIG5nZW9EYXRhc291cmNlT0dDKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVPR0NEYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlRmlsZURhdGFTb3VyY2VfID0gZnVuY3Rpb24gcmVtb3ZlRmlsZURhdGFTb3VyY2VfKGRhdGFTb3VyY2UpIHtcbiAgICB0aGlzLnJlbW92ZUxheWVyXyhkYXRhU291cmNlLmxheWVyKTtcbiAgICB0aGlzLmZpbGVHcm91cF8ucmVtb3ZlRGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlT0dDRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiByZW1vdmVPR0NEYXRhU291cmNlXyhkYXRhU291cmNlKSB7XG4gICAgaWYgKGRhdGFTb3VyY2Uub2djVHlwZSA9PT0gVHlwZS5XTVMpIHtcbiAgICAgIGlmICghZGF0YVNvdXJjZS53bXNVcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFTb3VyY2Uud21zVXJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB3bXNHcm91cCA9IHRoaXMuZ2V0V01TR3JvdXAoZGF0YVNvdXJjZS53bXNVcmwpO1xuXG4gICAgICBpZiAod21zR3JvdXAgJiYgd21zR3JvdXAuZGF0YVNvdXJjZXMuaW5jbHVkZXMoZGF0YVNvdXJjZSkpIHtcbiAgICAgICAgd21zR3JvdXAucmVtb3ZlRGF0YVNvdXJjZShkYXRhU291cmNlKTtcblxuICAgICAgICBpZiAoIXdtc0dyb3VwLmRhdGFTb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGF5ZXJfKHdtc0dyb3VwLmxheWVyKTtcbiAgICAgICAgICB3bXNHcm91cC5kZXN0cm95KCk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVXTVNHcm91cF8od21zR3JvdXApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkYXRhU291cmNlLm9nY1R5cGUgPT09IFR5cGUuV01UUykge1xuICAgICAgaWYgKCFkYXRhU291cmNlLndtdHNVcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFTb3VyY2Uud21zVXJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB3bXRzR3JvdXAgPSB0aGlzLmdldFdNVFNHcm91cChkYXRhU291cmNlLndtdHNVcmwpO1xuXG4gICAgICBpZiAod210c0dyb3VwICYmIHdtdHNHcm91cC5kYXRhU291cmNlcy5pbmNsdWRlcyhkYXRhU291cmNlKSkge1xuICAgICAgICB3bXRzR3JvdXAucmVtb3ZlRGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgICAgICAgdmFyIGlkID0gZGF0YVNvdXJjZS5pZDtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXllcl8odGhpcy53bXRzQ2FjaGVfW2lkXS5sYXllck9iaik7XG4gICAgICAgIHRoaXMud210c0NhY2hlX1tpZF0udW5yZWdpc3RlcigpO1xuICAgICAgICBkZWxldGUgdGhpcy53bXRzQ2FjaGVfW2lkXTtcblxuICAgICAgICBpZiAoIXdtdHNHcm91cC5kYXRhU291cmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICB3bXRzR3JvdXAuZGVzdHJveSgpO1xuICAgICAgICAgIHRoaXMucmVtb3ZlV01UU0dyb3VwXyh3bXRzR3JvdXApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5pc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy53bXNHcm91cHNDb2xsZWN0aW9uXy5nZXRMZW5ndGgoKSA9PSAwICYmIHRoaXMud210c0dyb3Vwc0NvbGxlY3Rpb25fLmdldExlbmd0aCgpID09IDAgJiYgdGhpcy5maWxlR3JvdXBfLmRhdGFTb3VyY2VzQ29sbGVjdGlvbi5nZXRMZW5ndGgoKSA9PSAwO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVBbGwgPSBmdW5jdGlvbiByZW1vdmVBbGwoKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5kYXRhU291cmNlc18uZ2V0QXJyYXkoKSksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgaWYgKHRoaXMuZXh0RGF0YVNvdXJjZXNfW2RhdGFTb3VyY2UuaWRdID09PSBkYXRhU291cmNlKSB7XG4gICAgICAgIGlmIChkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VGaWxlKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIG5nZW9EYXRhc291cmNlT0dDKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVPR0NEYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoRXh0ZXJuYWxEYXRTb3VyY2VzTWFuYWdlciwgW3tcbiAgICBrZXk6IFwiZmlsZUdyb3VwXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWxlR3JvdXBfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXNHcm91cHNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc0dyb3Vwc0NvbGxlY3Rpb25fLmdldEFycmF5KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndtc0dyb3Vwc0NvbGxlY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc0dyb3Vwc0NvbGxlY3Rpb25fO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXRzR3JvdXBzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53bXRzR3JvdXBzQ29sbGVjdGlvbl8uZ2V0QXJyYXkoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid210c0dyb3Vwc0NvbGxlY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNHcm91cHNDb2xsZWN0aW9uXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGF5ZXJHcm91cFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKCF0aGlzLm1hcF8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmdldEdyb3VwRnJvbU1hcCh0aGlzLm1hcF8sIEVYVEVSTkFMTEFZRVJHUk9VUF9OQU1FKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibWFwXCIsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobWFwKSB7XG4gICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEV4dGVybmFsRGF0U291cmNlc01hbmFnZXI7XG59KCk7XG5cbmZ1bmN0aW9uIGdldElkKGxheWVyKSB7XG4gIHJldHVybiBOdW1iZXIob2xVdGlsR2V0VWlkKGxheWVyKSkgKyAxMDAwMDAwO1xufVxuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXInLCBbZ21mRGF0YXNvdXJjZUZpbGVHcm91cC5uYW1lLCBuZ2VvTWFwTGF5ZXJIZWxwZXIubmFtZSwgbmdlb01pc2NGaWxlLm5hbWUsIG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXInLCBFeHRlcm5hbERhdFNvdXJjZXNNYW5hZ2VyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvRGF0YXNvdXJjZU9HQyBmcm9tICduZ2VvL2RhdGFzb3VyY2UvT0dDLmpzJztcblxudmFyIEdtZkV4dGVybmFsRGF0YXNvdXJjZU9HQyA9IGZ1bmN0aW9uIChfbmdlb0RhdGFzb3VyY2VPR0MpIHtcbiAgX2luaGVyaXRzTG9vc2UoR21mRXh0ZXJuYWxEYXRhc291cmNlT0dDLCBfbmdlb0RhdGFzb3VyY2VPR0MpO1xuXG4gIGZ1bmN0aW9uIEdtZkV4dGVybmFsRGF0YXNvdXJjZU9HQyhvcHRpb25zLCBsZWdlbmQpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9uZ2VvRGF0YXNvdXJjZU9HQy5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMubGVnZW5kXyA9IGxlZ2VuZDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoR21mRXh0ZXJuYWxEYXRhc291cmNlT0dDLCBbe1xuICAgIGtleTogXCJsZWdlbmRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxlZ2VuZF87XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEdtZkV4dGVybmFsRGF0YXNvdXJjZU9HQztcbn0obmdlb0RhdGFzb3VyY2VPR0MpO1xuXG5leHBvcnQgZGVmYXVsdCBHbWZFeHRlcm5hbERhdGFzb3VyY2VPR0M7IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZkVkaXRpbmdFbnVtZXJhdGVBdHRyaWJ1dGUgZnJvbSAnZ21mL2VkaXRpbmcvRW51bWVyYXRlQXR0cmlidXRlLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZUhlbHBlciBmcm9tICduZ2VvL2RhdGFzb3VyY2UvSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmV4cG9ydCB2YXIgRGF0YXNvdXJjZUhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgRGF0YXNvdXJjZUhlbHBlci4kaW5qZWN0ID0gW1wiJHFcIiwgXCJnbWZFbnVtZXJhdGVBdHRyaWJ1dGVcIiwgXCJuZ2VvRGF0YVNvdXJjZXNIZWxwZXJcIl07XG5cbiAgZnVuY3Rpb24gRGF0YXNvdXJjZUhlbHBlcigkcSwgZ21mRW51bWVyYXRlQXR0cmlidXRlLCBuZ2VvRGF0YVNvdXJjZXNIZWxwZXIpIHtcbiAgICB0aGlzLnFfID0gJHE7XG4gICAgdGhpcy5nbWZFbnVtZXJhdGVBdHRyaWJ1dGVfID0gZ21mRW51bWVyYXRlQXR0cmlidXRlO1xuICAgIHRoaXMubmdlb0RhdGFTb3VyY2VzSGVscGVyXyA9IG5nZW9EYXRhU291cmNlc0hlbHBlcjtcbiAgICB0aGlzLmNvbGxlY3Rpb25fID0gbnVsbDtcbiAgICB0aGlzLmNhY2hlXyA9IHt9O1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERhdGFzb3VyY2VIZWxwZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXREYXRhU291cmNlID0gZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZShpZCkge1xuICAgIHJldHVybiB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8uZ2V0RGF0YVNvdXJjZShpZCk7XG4gIH07XG5cbiAgX3Byb3RvLnByZXBhcmVGaWx0cmFibGVEYXRhU291cmNlID0gZnVuY3Rpb24gcHJlcGFyZUZpbHRyYWJsZURhdGFTb3VyY2UoZGF0YVNvdXJjZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgcHJlcGFyZUZpbHRyYWJsZURhdGFTb3VyY2VEZWZlciA9IHRoaXMucV8uZGVmZXIoKTtcbiAgICB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8uZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXMoZGF0YVNvdXJjZSkudGhlbihmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgICAgdmFyIGVudW1BdHRyaWJ1dGVzID0gZGF0YVNvdXJjZS5nbWZMYXllci5tZXRhZGF0YSA/IGRhdGFTb3VyY2UuZ21mTGF5ZXIubWV0YWRhdGEuZW51bWVyYXRlZEF0dHJpYnV0ZXMgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChlbnVtQXR0cmlidXRlcyAmJiBlbnVtQXR0cmlidXRlcy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG5cbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7XG4gICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKGVudW1BdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHJpYnV0ZS5uYW1lKSAmJiBhdHRyaWJ1dGUudHlwZSAhPT0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuU0VMRUNUICYmICghYXR0cmlidXRlLmNob2ljZXMgfHwgIWF0dHJpYnV0ZS5jaG9pY2VzLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZ21mRW51bWVyYXRlQXR0cmlidXRlXy5nZXRBdHRyaWJ1dGVWYWx1ZXMoZGF0YVNvdXJjZSwgYXR0cmlidXRlLm5hbWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICB2YXIgY2hvaWNlcyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKGNob2ljZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaG9pY2UudmFsdWU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlNFTEVDVDtcbiAgICAgICAgICAgICAgYXR0cmlidXRlLmNob2ljZXMgPSBjaG9pY2VzO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGF0dHJpYnV0ZXMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgICAgIF9sb29wKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3RoaXMucV8uYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwcmVwYXJlRmlsdHJhYmxlRGF0YVNvdXJjZURlZmVyLnJlc29sdmUoZGF0YVNvdXJjZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJlcGFyZUZpbHRyYWJsZURhdGFTb3VyY2VEZWZlci5yZXNvbHZlKGRhdGFTb3VyY2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcmVwYXJlRmlsdHJhYmxlRGF0YVNvdXJjZURlZmVyLnByb21pc2U7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKERhdGFzb3VyY2VIZWxwZXIsIFt7XG4gICAga2V5OiBcImNvbGxlY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8uY29sbGVjdGlvbjtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGF0YXNvdXJjZUhlbHBlcjtcbn0oKTtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZEYXRhU291cmNlc0hlbHBlcicsIFtuZ2VvRGF0YXNvdXJjZUhlbHBlci5uYW1lLCBnbWZFZGl0aW5nRW51bWVyYXRlQXR0cmlidXRlLm5hbWVdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ2dtZkRhdGFTb3VyY2VzSGVscGVyJywgRGF0YXNvdXJjZUhlbHBlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZMYXllckJlaW5nU3dpcGUnLCBbXSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mTGF5ZXJCZWluZ1N3aXBlJywge1xuICBsYXllcjogbnVsbCxcbiAgc3dpcGVWYWx1ZTogbnVsbFxufSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IEdtZkRhdGFzb3VyY2VPR0MgZnJvbSAnZ21mL2RhdGFzb3VyY2UvT0dDLmpzJztcbmltcG9ydCBnbWZEYXRhc291cmNlV0ZTQWxpYXNlcyBmcm9tICdnbWYvZGF0YXNvdXJjZS9XRlNBbGlhc2VzLmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVTeW5jTGF5ZXJ0cmVlTWFwLCB7IGdldExheWVyIH0gZnJvbSAnZ21mL2xheWVydHJlZS9TeW5jTGF5ZXJ0cmVlTWFwLmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlciBmcm9tICdnbWYvbGF5ZXJ0cmVlL1RyZWVNYW5hZ2VyLmpzJztcbmltcG9ydCBnbWZUaGVtZVRoZW1lcywgeyBUaGVtZU5vZGVUeXBlIH0gZnJvbSAnZ21mL3RoZW1lL1RoZW1lcy5qcyc7XG5pbXBvcnQgZ21mT0dDIGZyb20gJ2dtZi9kYXRhc291cmNlL09HQy5qcyc7XG5pbXBvcnQgT0dDLCB7IFNlcnZlclR5cGUsIFdGU091dHB1dEZvcm1hdCwgVHlwZSB9IGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMgZnJvbSAnbmdlby9kYXRhc291cmNlL0RhdGFTb3VyY2VzLmpzJztcbmltcG9ydCBuZ2VvRmlsdGVyUnVsZUhlbHBlciBmcm9tICduZ2VvL2ZpbHRlci9SdWxlSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWFwQmFja2dyb3VuZExheWVyTWdyIGZyb20gJ25nZW8vbWFwL0JhY2tncm91bmRMYXllck1nci5qcyc7XG5pbXBvcnQgbmdlb01hcExheWVySGVscGVyIGZyb20gJ25nZW8vbWFwL0xheWVySGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY1dNU1RpbWUgZnJvbSAnbmdlby9taXNjL1dNU1RpbWUuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbExheWVyVGlsZSBmcm9tICdvbC9sYXllci9UaWxlLmpzJztcbmltcG9ydCB7IGNsZWFyIGFzIGNsZWFyT2JqZWN0IH0gZnJvbSAnb2wvb2JqLmpzJztcbmltcG9ydCBvbExheWVySW1hZ2UgZnJvbSAnb2wvbGF5ZXIvSW1hZ2UuanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2VXTVMgZnJvbSAnb2wvc291cmNlL0ltYWdlV01TLmpzJztcbmltcG9ydCBvbFNvdXJjZVRpbGVXTVMgZnJvbSAnb2wvc291cmNlL1RpbGVXTVMuanMnO1xuZXhwb3J0IHZhciBEYXRhc291cmNlTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgRGF0YXNvdXJjZU1hbmFnZXIuJGluamVjdCA9IFtcIiRxXCIsIFwiJHJvb3RTY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiZ21mVGhlbWVzXCIsIFwiZ21mVHJlZU1hbmFnZXJcIiwgXCJuZ2VvQmFja2dyb3VuZExheWVyTWdyXCIsIFwibmdlb0RhdGFTb3VyY2VzXCIsIFwibmdlb0xheWVySGVscGVyXCIsIFwibmdlb1J1bGVIZWxwZXJcIiwgXCJuZ2VvV01TVGltZVwiLCBcImdtZldGU0FsaWFzZXNcIl07XG5cbiAgZnVuY3Rpb24gRGF0YXNvdXJjZU1hbmFnZXIoJHEsICRyb290U2NvcGUsICR0aW1lb3V0LCBnbWZUaGVtZXMsIGdtZlRyZWVNYW5hZ2VyLCBuZ2VvQmFja2dyb3VuZExheWVyTWdyLCBuZ2VvRGF0YVNvdXJjZXMsIG5nZW9MYXllckhlbHBlciwgbmdlb1J1bGVIZWxwZXIsIG5nZW9XTVNUaW1lLCBnbWZXRlNBbGlhc2VzKSB7XG4gICAgdGhpcy5xXyA9ICRxO1xuICAgIHRoaXMucm9vdFNjb3BlXyA9ICRyb290U2NvcGU7XG4gICAgdGhpcy50aW1lb3V0XyA9ICR0aW1lb3V0O1xuICAgIHRoaXMuZ21mVGhlbWVzXyA9IGdtZlRoZW1lcztcbiAgICB0aGlzLmdtZlRyZWVNYW5hZ2VyXyA9IGdtZlRyZWVNYW5hZ2VyO1xuICAgIHRoaXMubmdlb0JhY2tncm91bmRMYXllck1ncl8gPSBuZ2VvQmFja2dyb3VuZExheWVyTWdyO1xuICAgIHRoaXMubmdlb0RhdGFTb3VyY2VzXyA9IG5nZW9EYXRhU291cmNlcztcbiAgICB0aGlzLmRhdGFTb3VyY2VzXyA9IG5nZW9EYXRhU291cmNlcy5jb2xsZWN0aW9uO1xuICAgIHRoaXMubmdlb0xheWVySGVscGVyXyA9IG5nZW9MYXllckhlbHBlcjtcbiAgICB0aGlzLm5nZW9SdWxlSGVscGVyXyA9IG5nZW9SdWxlSGVscGVyO1xuICAgIHRoaXMubmdlb1dNU1RpbWVfID0gbmdlb1dNU1RpbWU7XG4gICAgdGhpcy5nbWZXRlNBbGlhc2VzXyA9IGdtZldGU0FsaWFzZXM7XG4gICAgdGhpcy5kYXRhU291cmNlc0NhY2hlXyA9IHt9O1xuICAgIHRoaXMuZGltZW5zaW9uc187XG4gICAgdGhpcy5kaW1lbnNpb25zV2F0Y2hlclVucmVnaXN0ZXIgPSBudWxsO1xuICAgIHRoaXMudHJlZUN0cmxDYWNoZV8gPSB7fTtcbiAgICB0aGlzLnRyZWVDdHJsc1VucmVnaXN0ZXJfID0gbnVsbDtcbiAgICBsaXN0ZW4odGhpcy5uZ2VvQmFja2dyb3VuZExheWVyTWdyXywgJ2NoYW5nZScsIHRoaXMuaGFuZGxlTmdlb0JhY2tncm91bmRMYXllckNoYW5nZV8sIHRoaXMpO1xuICAgIGxpc3Rlbih0aGlzLmdtZlRoZW1lc18sICdjaGFuZ2UnLCB0aGlzLmhhbmRsZVRoZW1lc0NoYW5nZV8sIHRoaXMpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERhdGFzb3VyY2VNYW5hZ2VyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0RGF0YXNvdXJjZU1hcCA9IGZ1bmN0aW9uIHNldERhdGFzb3VyY2VNYXAobWFwKSB7XG4gICAgdGhpcy5uZ2VvRGF0YVNvdXJjZXNfLm1hcCA9IG1hcDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0RGF0YXNvdXJjZSA9IGZ1bmN0aW9uIGdldERhdGFzb3VyY2UoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhU291cmNlc0NhY2hlX1tpZF07XG4gIH07XG5cbiAgX3Byb3RvLnNldERpbWVuc2lvbnMgPSBmdW5jdGlvbiBzZXREaW1lbnNpb25zKGRpbWVuc2lvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMuZGltZW5zaW9uc1dhdGNoZXJVbnJlZ2lzdGVyKSB7XG4gICAgICB0aGlzLmRpbWVuc2lvbnNXYXRjaGVyVW5yZWdpc3RlcigpO1xuICAgIH1cblxuICAgIHRoaXMuZGltZW5zaW9uc18gPSBkaW1lbnNpb25zO1xuICAgIHRoaXMuZGltZW5zaW9uc1dhdGNoZXJVbnJlZ2lzdGVyID0gdGhpcy5yb290U2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuZGltZW5zaW9uc187XG4gICAgfSwgdGhpcy5oYW5kbGVEaW1lbnNpb25zQ2hhbmdlXy5iaW5kKHRoaXMpLCB0cnVlKTtcbiAgICB0aGlzLmhhbmRsZURpbWVuc2lvbnNDaGFuZ2VfKCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURpbWVuc2lvbnNDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlRGltZW5zaW9uc0NoYW5nZV8oKSB7XG4gICAgdmFyIGxheWVycyA9IFtdO1xuICAgIHZhciBsYXllcklkcyA9IFtdO1xuICAgIHZhciBkYXRhU291cmNlcyA9IHRoaXMuZGF0YVNvdXJjZXNfLmdldEFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRhdGFTb3VyY2VzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmIChkYXRhU291cmNlIGluc3RhbmNlb2YgZ21mT0dDICYmIGRhdGFTb3VyY2UuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGFTb3VyY2UuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpIHtcbiAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5kaW1lbnNpb25zRmlsdGVyc0NvbmZpZ1trZXldLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldERhdGFTb3VyY2VMYXllcl8oZGF0YVNvdXJjZSk7XG5cbiAgICAgICAgICAgIGlmIChsYXllciA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaWQgPSBvbFV0aWxHZXRVaWQobGF5ZXIpO1xuXG4gICAgICAgICAgICBpZiAoIWxheWVySWRzLmluY2x1ZGVzKGlkKSkge1xuICAgICAgICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgICAgICAgICAgIGxheWVySWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxheWVycy5mb3JFYWNoKHRoaXMudXBkYXRlTGF5ZXJGaWx0ZXJfLmJpbmQodGhpcykpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVUaGVtZXNDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVGhlbWVzQ2hhbmdlXygpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHRoaXMuY2xlYXJEYXRhU291cmNlc18oKTtcblxuICAgIGlmICh0aGlzLnRyZWVDdHJsc1VucmVnaXN0ZXJfKSB7XG4gICAgICB0aGlzLnRyZWVDdHJsc1VucmVnaXN0ZXJfKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhclRyZWVDdHJsQ2FjaGVfKCk7XG4gICAgdGhpcy5nbWZUaGVtZXNfLmdldE9nY1NlcnZlcnNPYmplY3QoKS50aGVuKGZ1bmN0aW9uIChvZ2NTZXJ2ZXJzKSB7XG4gICAgICB2YXIgcHJvbWlzZVRoZW1lcyA9IF90aGlzMi5nbWZUaGVtZXNfLmdldFRoZW1lc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKHRoZW1lcykge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGVtZXMpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgICAgIHZhciB0aGVtZSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoZW1lLmNoaWxkcmVuKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgX3RoaXMyLmNyZWF0ZURhdGFTb3VyY2VfKGNoaWxkLCBjaGlsZCwgb2djU2VydmVycyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdmFyIHByb21pc2VCZ0xheWVycyA9IF90aGlzMi5nbWZUaGVtZXNfLmdldEJhY2tncm91bmRMYXllcnNPYmplY3QoKS50aGVuKGZ1bmN0aW9uIChiYWNrZ3JvdW5kTGF5ZXJzKSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGJhY2tncm91bmRMYXllcnMpLCBfc3RlcDQ7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNCgpKS5kb25lOykge1xuICAgICAgICAgIHZhciBiYWNrZ3JvdW5kTGF5ZXIgPSBfc3RlcDQudmFsdWU7XG5cbiAgICAgICAgICBfdGhpczIuY3JlYXRlRGF0YVNvdXJjZV8obnVsbCwgYmFja2dyb3VuZExheWVyLCBvZ2NTZXJ2ZXJzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIF90aGlzMi5xXy5hbGwoW3Byb21pc2VUaGVtZXMsIHByb21pc2VCZ0xheWVyc10pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIudHJlZUN0cmxzVW5yZWdpc3Rlcl8gPSBfdGhpczIucm9vdFNjb3BlXy4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMyLmdtZlRyZWVNYW5hZ2VyXy5yb290Q3RybCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwuY2hpbGRyZW47XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfdGhpczIuaGFuZGxlVHJlZU1hbmFnZXJSb290Q2hpbGRyZW5DaGFuZ2VfLmJpbmQoX3RoaXMyKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlVHJlZU1hbmFnZXJSb290Q2hpbGRyZW5DaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVHJlZU1hbmFnZXJSb290Q2hpbGRyZW5DaGFuZ2VfKHZhbHVlKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB0aGlzLnRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3VHJlZUN0cmxzID0gW107XG5cbiAgICAgIHZhciB2aXNpdG9yID0gZnVuY3Rpb24gdmlzaXRvcih0cmVlQ3RybCkge1xuICAgICAgICB2YXIgbm9kZSA9IHRyZWVDdHJsLm5vZGU7XG4gICAgICAgIHZhciBncm91cE5vZGUgPSBub2RlO1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBncm91cE5vZGUuY2hpbGRyZW47XG5cbiAgICAgICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgICAgIG5ld1RyZWVDdHJscy5wdXNoKHRyZWVDdHJsKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdmFsdWUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB2YWx1ZVtpXS50cmF2ZXJzZURlcHRoRmlyc3QodmlzaXRvcik7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIF9pID0gMCwgX2lpID0gbmV3VHJlZUN0cmxzLmxlbmd0aDsgX2kgPCBfaWk7IF9pKyspIHtcbiAgICAgICAgdmFyIG5ld1RyZWVDdHJsID0gbmV3VHJlZUN0cmxzW19pXTtcblxuICAgICAgICB2YXIgY2FjaGVJdGVtID0gX3RoaXMzLmdldFRyZWVDdHJsQ2FjaGVJdGVtXyhuZXdUcmVlQ3RybCk7XG5cbiAgICAgICAgaWYgKCFjYWNoZUl0ZW0pIHtcbiAgICAgICAgICBfdGhpczMuYWRkVHJlZUN0cmxUb0NhY2hlXyhuZXdUcmVlQ3RybCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNhY2hlID0gX3RoaXMzLnRyZWVDdHJsQ2FjaGVfO1xuXG4gICAgICBmb3IgKHZhciBpZCBpbiBfdGhpczMudHJlZUN0cmxDYWNoZV8pIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBjYWNoZVtpZF07XG5cbiAgICAgICAgaWYgKCFuZXdUcmVlQ3RybHMuaW5jbHVkZXMoaXRlbS50cmVlQ3RybCkpIHtcbiAgICAgICAgICBfdGhpczMucmVtb3ZlVHJlZUN0cmxDYWNoZUl0ZW1fKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyRGF0YVNvdXJjZXNfID0gZnVuY3Rpb24gY2xlYXJEYXRhU291cmNlc18oKSB7XG4gICAgdmFyIGRhdGFTb3VyY2VzID0gdGhpcy5kYXRhU291cmNlc18uZ2V0QXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSBkYXRhU291cmNlcy5sZW5ndGggLSAxLCBpaSA9IDA7IGkgPj0gaWk7IGktLSkge1xuICAgICAgaWYgKHRoaXMuZGF0YVNvdXJjZXNDYWNoZV9bZGF0YVNvdXJjZXNbaV0uaWRdKSB7XG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZXNfLnJlbW92ZShkYXRhU291cmNlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJPYmplY3QodGhpcy5kYXRhU291cmNlc0NhY2hlXyk7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZURhdGFTb3VyY2VfID0gZnVuY3Rpb24gY3JlYXRlRGF0YVNvdXJjZV8oZmlyc3RMZXZlbEdyb3VwLCBub2RlLCBvZ2NTZXJ2ZXJzKSB7XG4gICAgdmFyIGdyb3VwTm9kZSA9IG5vZGU7XG4gICAgdmFyIGNoaWxkcmVuID0gZ3JvdXBOb2RlLmNoaWxkcmVuO1xuXG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShjaGlsZHJlbiksIF9zdGVwNTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1KCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBjaGlsZCA9IF9zdGVwNS52YWx1ZTtcbiAgICAgICAgdGhpcy5jcmVhdGVEYXRhU291cmNlXyhmaXJzdExldmVsR3JvdXAsIGNoaWxkLCBvZ2NTZXJ2ZXJzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBnbWZMYXllciA9IG5vZGU7XG4gICAgdmFyIGlkID0gTnVtYmVyKG9sVXRpbEdldFVpZChnbWZMYXllcikpO1xuXG4gICAgaWYgKHRoaXMuZGF0YVNvdXJjZXNDYWNoZV9baWRdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1ldGEgPSBnbWZMYXllci5tZXRhZGF0YTtcbiAgICB2YXIgb2djVHlwZSA9IGdtZkxheWVyLnR5cGU7XG4gICAgdmFyIG1heFJlc29sdXRpb24gPSAwO1xuICAgIHZhciBtaW5SZXNvbHV0aW9uID0gMDtcbiAgICB2YXIgd210c0xheWVyO1xuICAgIHZhciB3bXRzVXJsO1xuICAgIHZhciBvZ2NJbWFnZVR5cGU7XG4gICAgdmFyIHdtc0xheWVycztcbiAgICB2YXIgd2ZzTGF5ZXJzO1xuICAgIHZhciB0aW1lUHJvcGVydHk7XG4gICAgdmFyIG9nY1NlcnZlcjtcblxuICAgIGlmIChvZ2NUeXBlID09PSBUaGVtZU5vZGVUeXBlLldNVFMpIHtcbiAgICAgIHZhciBnbWZMYXllcldNVFMgPSBnbWZMYXllcjtcbiAgICAgIHdtdHNMYXllciA9IGdtZkxheWVyV01UUy5sYXllcjtcbiAgICAgIHdtdHNVcmwgPSBnbWZMYXllcldNVFMudXJsO1xuICAgICAgbWF4UmVzb2x1dGlvbiA9IG1ldGEubWF4UXVlcnlSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBtZXRhLm1heFF1ZXJ5UmVzb2x1dGlvbiA6IG1ldGEubWF4UmVzb2x1dGlvbjtcbiAgICAgIG1pblJlc29sdXRpb24gPSBtZXRhLm1pblF1ZXJ5UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gbWV0YS5taW5RdWVyeVJlc29sdXRpb24gOiBtZXRhLm1pblJlc29sdXRpb247XG4gICAgICB2YXIgbGF5ZXJzID0gbWV0YS5xdWVyeUxheWVycyB8fCBtZXRhLndtc0xheWVycztcblxuICAgICAgaWYgKGxheWVycykge1xuICAgICAgICB3bXNMYXllcnMgPSBsYXllcnMuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGxheWVyLFxuICAgICAgICAgICAgcXVlcnlhYmxlOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdmc0xheWVycyA9IGxheWVycy5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgICAgIG1pblJlc29sdXRpb246IG1pblJlc29sdXRpb24sXG4gICAgICAgICAgICBuYW1lOiBsYXllcixcbiAgICAgICAgICAgIHF1ZXJ5YWJsZTogdHJ1ZVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAobWV0YS5vZ2NTZXJ2ZXIgJiYgb2djU2VydmVyc1ttZXRhLm9nY1NlcnZlcl0pIHtcbiAgICAgICAgb2djU2VydmVyID0gb2djU2VydmVyc1ttZXRhLm9nY1NlcnZlcl07XG4gICAgICB9XG5cbiAgICAgIG9nY0ltYWdlVHlwZSA9IGdtZkxheWVyV01UUy5pbWFnZVR5cGU7XG4gICAgfSBlbHNlIGlmIChvZ2NUeXBlID09PSBUaGVtZU5vZGVUeXBlLldNUykge1xuICAgICAgdmFyIGdtZkxheWVyV01TID0gZ21mTGF5ZXI7XG4gICAgICBtYXhSZXNvbHV0aW9uID0gZ21mTGF5ZXJXTVMubWF4UmVzb2x1dGlvbkhpbnQ7XG4gICAgICBtaW5SZXNvbHV0aW9uID0gZ21mTGF5ZXJXTVMubWluUmVzb2x1dGlvbkhpbnQ7XG4gICAgICB2YXIgcXVlcnlhYmxlID0gZmFsc2U7XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGdtZkxheWVyV01TLmNoaWxkTGF5ZXJzKSwgX3N0ZXA2OyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIHdmc2xheWVyID0gX3N0ZXA2LnZhbHVlO1xuXG4gICAgICAgIGlmICh3ZnNsYXllci5xdWVyeWFibGUpIHtcbiAgICAgICAgICBxdWVyeWFibGUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBxdWVyeUxheWVycyA9IG1ldGEucXVlcnlMYXllcnMgPyBtZXRhLnF1ZXJ5TGF5ZXJzLnNwbGl0KCcsJykgOiBudWxsO1xuICAgICAgd21zTGF5ZXJzID0gZ21mTGF5ZXJXTVMubGF5ZXJzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChjaGlsZExheWVyKSB7XG4gICAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICAgIG5hbWU6IGNoaWxkTGF5ZXIsXG4gICAgICAgICAgcXVlcnlhYmxlOiBxdWVyeWFibGVcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocXVlcnlMYXllcnMgJiYgIXF1ZXJ5TGF5ZXJzLmluY2x1ZGVzKGNoaWxkTGF5ZXIpKSB7XG4gICAgICAgICAgaXRlbS5nZXREYXRhID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH0pO1xuICAgICAgd2ZzTGF5ZXJzID0gZ21mTGF5ZXJXTVMuY2hpbGRMYXllcnMubWFwKGZ1bmN0aW9uIChjaGlsZExheWVyKSB7XG4gICAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICAgIG1heFJlc29sdXRpb246IGNoaWxkTGF5ZXIubWF4UmVzb2x1dGlvbkhpbnQsXG4gICAgICAgICAgbWluUmVzb2x1dGlvbjogY2hpbGRMYXllci5taW5SZXNvbHV0aW9uSGludCxcbiAgICAgICAgICBuYW1lOiBjaGlsZExheWVyLm5hbWUsXG4gICAgICAgICAgcXVlcnlhYmxlOiBjaGlsZExheWVyLnF1ZXJ5YWJsZVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChxdWVyeUxheWVycyAmJiAhcXVlcnlMYXllcnMuaW5jbHVkZXMoY2hpbGRMYXllci5uYW1lKSkge1xuICAgICAgICAgIGl0ZW0uZ2V0RGF0YSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9KTtcbiAgICAgIHZhciBvZ2NTZXJ2ZXJOYW1lID0gIWZpcnN0TGV2ZWxHcm91cCB8fCBmaXJzdExldmVsR3JvdXAubWl4ZWQgPyBnbWZMYXllcldNUy5vZ2NTZXJ2ZXIgOiBmaXJzdExldmVsR3JvdXAub2djU2VydmVyO1xuICAgICAgb2djU2VydmVyID0gb2djU2VydmVyc1tvZ2NTZXJ2ZXJOYW1lXTtcbiAgICAgIG9nY0ltYWdlVHlwZSA9IG9nY1NlcnZlci5pbWFnZVR5cGU7XG5cbiAgICAgIGlmIChnbWZMYXllcldNUy50aW1lKSB7XG4gICAgICAgIHRpbWVQcm9wZXJ0eSA9IGdtZkxheWVyV01TLnRpbWU7XG4gICAgICB9IGVsc2UgaWYgKGZpcnN0TGV2ZWxHcm91cCAmJiBmaXJzdExldmVsR3JvdXAudGltZSkge1xuICAgICAgICB0aW1lUHJvcGVydHkgPSBmaXJzdExldmVsR3JvdXAudGltZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgb2djU2VydmVyVHlwZSA9IG9nY1NlcnZlciA/IG9nY1NlcnZlci50eXBlIDogdW5kZWZpbmVkO1xuICAgIHZhciB3ZnNGZWF0dXJlTlMgPSBvZ2NTZXJ2ZXIgPyBvZ2NTZXJ2ZXIubmFtZXNwYWNlIDogdW5kZWZpbmVkO1xuICAgIHZhciB3bXNJc1NpbmdsZVRpbGUgPSBvZ2NTZXJ2ZXIgPyBvZ2NTZXJ2ZXIuaXNTaW5nbGVUaWxlIDogdW5kZWZpbmVkO1xuICAgIHZhciB3ZnNVcmwgPSBvZ2NTZXJ2ZXIgJiYgb2djU2VydmVyLndmc1N1cHBvcnQgPyBvZ2NTZXJ2ZXIudXJsV2ZzIDogdW5kZWZpbmVkO1xuICAgIHZhciB3bXNVcmwgPSBvZ2NTZXJ2ZXIgPyBvZ2NTZXJ2ZXIudXJsIDogdW5kZWZpbmVkO1xuICAgIHZhciB3ZnNPdXRwdXRGb3JtYXQgPSBXRlNPdXRwdXRGb3JtYXQuR01MMztcblxuICAgIGlmIChvZ2NTZXJ2ZXJUeXBlID09PSBTZXJ2ZXJUeXBlLlFHSVNTRVJWRVIpIHtcbiAgICAgIHdmc091dHB1dEZvcm1hdCA9IFdGU091dHB1dEZvcm1hdC5HTUwyO1xuICAgIH1cblxuICAgIHZhciBzbmFwcGFibGUgPSAhIW1ldGEuc25hcHBpbmdDb25maWc7XG4gICAgdmFyIHNuYXBwaW5nVG9sZXJhbmNlID0gbWV0YS5zbmFwcGluZ0NvbmZpZyA/IG1ldGEuc25hcHBpbmdDb25maWcudG9sZXJhbmNlIDogdW5kZWZpbmVkO1xuICAgIHZhciBzbmFwcGluZ1RvRWRnZXMgPSBtZXRhLnNuYXBwaW5nQ29uZmlnID8gbWV0YS5zbmFwcGluZ0NvbmZpZy5lZGdlIDogdW5kZWZpbmVkO1xuICAgIHZhciBzbmFwcGluZ1RvVmVydGljZSA9IG1ldGEuc25hcHBpbmdDb25maWcgPyBtZXRhLnNuYXBwaW5nQ29uZmlnLnZlcnRleCA6IHVuZGVmaW5lZDtcbiAgICB2YXIgZGltZW5zaW9ucyA9IHRoaXMuZGltZW5zaW9uc187XG4gICAgdmFyIGRpbWVuc2lvbnNDb25maWcgPSBub2RlLmRpbWVuc2lvbnMgfHwgZmlyc3RMZXZlbEdyb3VwID09PSBudWxsID8ge30gOiBmaXJzdExldmVsR3JvdXAuZGltZW5zaW9ucztcbiAgICB2YXIgZGltZW5zaW9uc0ZpbHRlcnNDb25maWcgPSBnbWZMYXllci5kaW1lbnNpb25zRmlsdGVycztcbiAgICB2YXIgdGltZUxvd2VyVmFsdWU7XG4gICAgdmFyIHRpbWVVcHBlclZhbHVlO1xuXG4gICAgaWYgKHRpbWVQcm9wZXJ0eSkge1xuICAgICAgdmFyIHRpbWVWYWx1ZXMgPSB0aGlzLm5nZW9XTVNUaW1lXy5nZXRPcHRpb25zKHRpbWVQcm9wZXJ0eSkudmFsdWVzO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aW1lVmFsdWVzKSkge1xuICAgICAgICB0aW1lTG93ZXJWYWx1ZSA9IHRpbWVWYWx1ZXNbMF07XG4gICAgICAgIHRpbWVVcHBlclZhbHVlID0gdGltZVZhbHVlc1sxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVMb3dlclZhbHVlID0gdGltZVZhbHVlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY29weWFibGUgPSBtZXRhLmNvcHlhYmxlO1xuICAgIHZhciBpZGVudGlmaWVyQXR0cmlidXRlID0gbWV0YS5pZGVudGlmaWVyQXR0cmlidXRlRmllbGQ7XG4gICAgdmFyIG5hbWUgPSBnbWZMYXllci5uYW1lO1xuICAgIHZhciBxdWVyeUljb25Qb3NpdGlvbiA9IG1ldGEucXVlcnlJY29uUG9zaXRpb247XG4gICAgdmFyIHRpbWVBdHRyaWJ1dGVOYW1lID0gbWV0YS50aW1lQXR0cmlidXRlO1xuICAgIHZhciB2aXNpYmxlID0gbWV0YS5pc0NoZWNrZWQgPT09IHRydWU7XG4gICAgdmFyIG9nY0F0dHJpYnV0ZXMgPSBvZ2NTZXJ2ZXIgPyBvZ2NTZXJ2ZXIuYXR0cmlidXRlcyA6IG51bGw7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBjb3B5YWJsZTogY29weWFibGUsXG4gICAgICBkaW1lbnNpb25zQ29uZmlnOiBkaW1lbnNpb25zQ29uZmlnLFxuICAgICAgZGltZW5zaW9uc0ZpbHRlcnNDb25maWc6IGRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnLFxuICAgICAgZ21mTGF5ZXI6IGdtZkxheWVyLFxuICAgICAgaWQ6IGlkLFxuICAgICAgaWRlbnRpZmllckF0dHJpYnV0ZTogaWRlbnRpZmllckF0dHJpYnV0ZSxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBvZ2NUeXBlOiBvZ2NUeXBlLFxuICAgICAgb2djQXR0cmlidXRlczogb2djQXR0cmlidXRlcyxcbiAgICAgIHF1ZXJ5SWNvblBvc2l0aW9uOiBxdWVyeUljb25Qb3NpdGlvbixcbiAgICAgIHNuYXBwYWJsZTogc25hcHBhYmxlLFxuICAgICAgdGltZUF0dHJpYnV0ZU5hbWU6IHRpbWVBdHRyaWJ1dGVOYW1lLFxuICAgICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICAgIHdmc091dHB1dEZvcm1hdDogd2ZzT3V0cHV0Rm9ybWF0XG4gICAgfTtcblxuICAgIGlmIChkaW1lbnNpb25zKSB7XG4gICAgICBvcHRpb25zLmRpbWVuc2lvbnMgPSBkaW1lbnNpb25zO1xuICAgIH1cblxuICAgIGlmIChtYXhSZXNvbHV0aW9uKSB7XG4gICAgICBvcHRpb25zLm1heFJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uO1xuICAgIH1cblxuICAgIGlmIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgICBvcHRpb25zLm1pblJlc29sdXRpb24gPSBtaW5SZXNvbHV0aW9uO1xuICAgIH1cblxuICAgIGlmIChvZ2NJbWFnZVR5cGUpIHtcbiAgICAgIG9wdGlvbnMub2djSW1hZ2VUeXBlID0gb2djSW1hZ2VUeXBlO1xuICAgIH1cblxuICAgIGlmIChvZ2NTZXJ2ZXJUeXBlKSB7XG4gICAgICBvcHRpb25zLm9nY1NlcnZlclR5cGUgPSBvZ2NTZXJ2ZXJUeXBlO1xuICAgIH1cblxuICAgIGlmIChzbmFwcGluZ1RvbGVyYW5jZSkge1xuICAgICAgb3B0aW9ucy5zbmFwcGluZ1RvbGVyYW5jZSA9IHNuYXBwaW5nVG9sZXJhbmNlO1xuICAgIH1cblxuICAgIGlmIChzbmFwcGluZ1RvRWRnZXMpIHtcbiAgICAgIG9wdGlvbnMuc25hcHBpbmdUb0VkZ2VzID0gc25hcHBpbmdUb0VkZ2VzO1xuICAgIH1cblxuICAgIGlmIChzbmFwcGluZ1RvVmVydGljZSkge1xuICAgICAgb3B0aW9ucy5zbmFwcGluZ1RvVmVydGljZSA9IHNuYXBwaW5nVG9WZXJ0aWNlO1xuICAgIH1cblxuICAgIGlmICh0aW1lTG93ZXJWYWx1ZSkge1xuICAgICAgb3B0aW9ucy50aW1lTG93ZXJWYWx1ZSA9IHRpbWVMb3dlclZhbHVlO1xuICAgIH1cblxuICAgIGlmICh0aW1lUHJvcGVydHkpIHtcbiAgICAgIG9wdGlvbnMudGltZVByb3BlcnR5ID0gdGltZVByb3BlcnR5O1xuICAgIH1cblxuICAgIGlmICh0aW1lVXBwZXJWYWx1ZSkge1xuICAgICAgb3B0aW9ucy50aW1lVXBwZXJWYWx1ZSA9IHRpbWVVcHBlclZhbHVlO1xuICAgIH1cblxuICAgIGlmICh3ZnNGZWF0dXJlTlMpIHtcbiAgICAgIG9wdGlvbnMud2ZzRmVhdHVyZU5TID0gd2ZzRmVhdHVyZU5TO1xuICAgIH1cblxuICAgIGlmICh3ZnNMYXllcnMpIHtcbiAgICAgIG9wdGlvbnMud2ZzTGF5ZXJzID0gd2ZzTGF5ZXJzO1xuICAgIH1cblxuICAgIGlmICh3ZnNVcmwpIHtcbiAgICAgIG9wdGlvbnMud2ZzVXJsID0gd2ZzVXJsO1xuICAgIH1cblxuICAgIGlmICh3bXNJc1NpbmdsZVRpbGUpIHtcbiAgICAgIG9wdGlvbnMud21zSXNTaW5nbGVUaWxlID0gd21zSXNTaW5nbGVUaWxlO1xuICAgIH1cblxuICAgIGlmICh3bXNMYXllcnMpIHtcbiAgICAgIG9wdGlvbnMud21zTGF5ZXJzID0gd21zTGF5ZXJzO1xuICAgIH1cblxuICAgIGlmICh3bXNVcmwpIHtcbiAgICAgIG9wdGlvbnMud21zVXJsID0gd21zVXJsO1xuICAgIH1cblxuICAgIGlmICh3bXRzTGF5ZXIpIHtcbiAgICAgIG9wdGlvbnMud210c0xheWVyID0gd210c0xheWVyO1xuICAgIH1cblxuICAgIGlmICh3bXRzVXJsKSB7XG4gICAgICBvcHRpb25zLndtdHNVcmwgPSB3bXRzVXJsO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YVNvdXJjZXNDYWNoZV9baWRdID0gbmV3IEdtZkRhdGFzb3VyY2VPR0Mob3B0aW9ucyk7XG4gIH07XG5cbiAgX3Byb3RvLmFkZFRyZWVDdHJsVG9DYWNoZV8gPSBmdW5jdGlvbiBhZGRUcmVlQ3RybFRvQ2FjaGVfKHRyZWVDdHJsKSB7XG4gICAgdmFyIGlkID0gb2xVdGlsR2V0VWlkKHRyZWVDdHJsLm5vZGUpO1xuICAgIHZhciBkYXRhU291cmNlID0gdGhpcy5kYXRhU291cmNlc0NhY2hlX1tpZF07XG5cbiAgICBpZiAoIWRhdGFTb3VyY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhU291cmNlJyk7XG4gICAgfVxuXG4gICAgdHJlZUN0cmwuc2V0RGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgICB2YXIgc3RhdGVXYXRjaGVyVW5yZWdpc3RlciA9IHRoaXMucm9vdFNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRyZWVDdHJsLmdldFN0YXRlKCk7XG4gICAgfSwgdGhpcy5oYW5kbGVUcmVlQ3RybFN0YXRlQ2hhbmdlXy5iaW5kKHRoaXMsIHRyZWVDdHJsKSk7XG4gICAgdmFyIGZpbHRlclJ1bGVzV2F0Y2hlclVucmVnaXN0ZXIgPSB0aGlzLnJvb3RTY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBoYXNGaWx0ZXJzID0gZGF0YVNvdXJjZS5maWx0ZXJSdWxlcyAhPT0gbnVsbDtcbiAgICAgIHZhciBpc1Zpc2libGUgPSBkYXRhU291cmNlLnZpc2libGU7XG4gICAgICByZXR1cm4gaGFzRmlsdGVycyAmJiBpc1Zpc2libGU7XG4gICAgfSwgdGhpcy5oYW5kbGVEYXRhU291cmNlRmlsdGVyUnVsZXNDaGFuZ2VfLmJpbmQodGhpcywgZGF0YVNvdXJjZSkpO1xuICAgIHZhciB0aW1lTG93ZXJWYWx1ZVdhdGNoZXJVbnJlZ2lzdGVyO1xuICAgIHZhciB0aW1lVXBwZXJWYWx1ZVdhdGNoZXJVbnJlZ2lzdGVyO1xuICAgIHZhciB3bXNMYXllcjtcblxuICAgIGlmIChkYXRhU291cmNlLnRpbWVQcm9wZXJ0eSAmJiBkYXRhU291cmNlLm9nY1R5cGUgPT09IFR5cGUuV01TKSB7XG4gICAgICB0aW1lTG93ZXJWYWx1ZVdhdGNoZXJVbnJlZ2lzdGVyID0gdGhpcy5yb290U2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBkYXRhU291cmNlLnRpbWVMb3dlclZhbHVlO1xuICAgICAgfSwgdGhpcy5oYW5kbGVEYXRhU291cmNlVGltZVZhbHVlQ2hhbmdlXy5iaW5kKHRoaXMsIGRhdGFTb3VyY2UpKTtcblxuICAgICAgaWYgKGRhdGFTb3VyY2UudGltZVByb3BlcnR5Lm1vZGUgPT09ICdyYW5nZScpIHtcbiAgICAgICAgdGltZVVwcGVyVmFsdWVXYXRjaGVyVW5yZWdpc3RlciA9IHRoaXMucm9vdFNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBkYXRhU291cmNlLnRpbWVVcHBlclZhbHVlO1xuICAgICAgICB9LCB0aGlzLmhhbmRsZURhdGFTb3VyY2VUaW1lVmFsdWVDaGFuZ2VfLmJpbmQodGhpcywgZGF0YVNvdXJjZSkpO1xuICAgICAgfVxuXG4gICAgICB3bXNMYXllciA9IGdldExheWVyKHRyZWVDdHJsKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyZWVDdHJsQ2FjaGVfW2lkXSA9IHtcbiAgICAgIGZpbHRlclJ1bGVzV2F0Y2hlclVucmVnaXN0ZXI6IGZpbHRlclJ1bGVzV2F0Y2hlclVucmVnaXN0ZXIsXG4gICAgICBzdGF0ZVdhdGNoZXJVbnJlZ2lzdGVyOiBzdGF0ZVdhdGNoZXJVbnJlZ2lzdGVyLFxuICAgICAgdGltZUxvd2VyVmFsdWVXYXRjaGVyVW5yZWdpc3RlcjogdGltZUxvd2VyVmFsdWVXYXRjaGVyVW5yZWdpc3RlcixcbiAgICAgIHRpbWVVcHBlclZhbHVlV2F0Y2hlclVucmVnaXN0ZXI6IHRpbWVVcHBlclZhbHVlV2F0Y2hlclVucmVnaXN0ZXIsXG4gICAgICB0cmVlQ3RybDogdHJlZUN0cmwsXG4gICAgICB3bXNMYXllcjogd21zTGF5ZXJcbiAgICB9O1xuICAgIHRoaXMuZGF0YVNvdXJjZXNfLnB1c2goZGF0YVNvdXJjZSk7XG4gICAgdGhpcy5nbWZXRlNBbGlhc2VzXy5kZXNjcmliZShkYXRhU291cmNlKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlVHJlZUN0cmxDYWNoZUl0ZW1fID0gZnVuY3Rpb24gcmVtb3ZlVHJlZUN0cmxDYWNoZUl0ZW1fKGl0ZW0pIHtcbiAgICB2YXIgZGF0YVNvdXJjZSA9IGl0ZW0udHJlZUN0cmwuZ2V0RGF0YVNvdXJjZSgpO1xuXG4gICAgaWYgKCFkYXRhU291cmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFTb3VyY2Ugc2hvdWxkIGJlIHNldCcpO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YVNvdXJjZXNfLnJlbW92ZShkYXRhU291cmNlKTtcbiAgICBpdGVtLnRyZWVDdHJsLnNldERhdGFTb3VyY2UobnVsbCk7XG4gICAgaXRlbS5maWx0ZXJSdWxlc1dhdGNoZXJVbnJlZ2lzdGVyKCk7XG4gICAgaXRlbS5zdGF0ZVdhdGNoZXJVbnJlZ2lzdGVyKCk7XG5cbiAgICBpZiAoaXRlbS50aW1lTG93ZXJWYWx1ZVdhdGNoZXJVbnJlZ2lzdGVyKSB7XG4gICAgICBpdGVtLnRpbWVMb3dlclZhbHVlV2F0Y2hlclVucmVnaXN0ZXIoKTtcbiAgICB9XG5cbiAgICBpZiAoaXRlbS50aW1lVXBwZXJWYWx1ZVdhdGNoZXJVbnJlZ2lzdGVyKSB7XG4gICAgICBpdGVtLnRpbWVVcHBlclZhbHVlV2F0Y2hlclVucmVnaXN0ZXIoKTtcbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy50cmVlQ3RybENhY2hlX1tvbFV0aWxHZXRVaWQoaXRlbS50cmVlQ3RybC5ub2RlKV07XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyVHJlZUN0cmxDYWNoZV8gPSBmdW5jdGlvbiBjbGVhclRyZWVDdHJsQ2FjaGVfKCkge1xuICAgIGZvciAodmFyIGlkIGluIHRoaXMudHJlZUN0cmxDYWNoZV8pIHtcbiAgICAgIHRoaXMucmVtb3ZlVHJlZUN0cmxDYWNoZUl0ZW1fKHRoaXMudHJlZUN0cmxDYWNoZV9baWRdKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVRyZWVDdHJsU3RhdGVDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVHJlZUN0cmxTdGF0ZUNoYW5nZV8odHJlZUN0cmwsIG5ld1ZhbCkge1xuICAgIHZhciB0cmVlRGF0YVNvdXJjZSA9IHRyZWVDdHJsLmdldERhdGFTb3VyY2UoKTtcblxuICAgIGlmICghdHJlZURhdGFTb3VyY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YVNvdXJjZSBzaG91bGQgYmUgc2V0Jyk7XG4gICAgfVxuXG4gICAgdmFyIHZpc2libGUgPSBuZXdWYWwgPT09ICdvbic7XG4gICAgdHJlZURhdGFTb3VyY2UudmlzaWJsZSA9IHZpc2libGU7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXREYXRhU291cmNlTGF5ZXJfKHRyZWVEYXRhU291cmNlKTtcblxuICAgIGlmIChsYXllciA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUxheWVyRmlsdGVyXyhsYXllcik7XG4gIH07XG5cbiAgX3Byb3RvLmdldFRyZWVDdHJsQ2FjaGVJdGVtXyA9IGZ1bmN0aW9uIGdldFRyZWVDdHJsQ2FjaGVJdGVtXyh0cmVlQ3RybCkge1xuICAgIHJldHVybiB0aGlzLnRyZWVDdHJsQ2FjaGVfW29sVXRpbEdldFVpZCh0cmVlQ3RybC5ub2RlKV0gfHwgbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0RGF0YVNvdXJjZUxheWVyXyA9IGZ1bmN0aW9uIGdldERhdGFTb3VyY2VMYXllcl8oZGF0YVNvdXJjZSkge1xuICAgIGlmICghKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBnbWZPR0MpIHx8IGRhdGFTb3VyY2UuZ21mTGF5ZXIgPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGlkID0gb2xVdGlsR2V0VWlkKGRhdGFTb3VyY2UuZ21mTGF5ZXIpO1xuXG4gICAgaWYgKGlkID09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpdGVtID0gdGhpcy50cmVlQ3RybENhY2hlX1tpZF07XG5cbiAgICBpZiAoaXRlbSA9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdHJlZUN0cmwgPSBpdGVtLnRyZWVDdHJsO1xuICAgIHJldHVybiBnZXRMYXllcih0cmVlQ3RybCk7XG4gIH07XG5cbiAgX3Byb3RvLnVwZGF0ZUxheWVyRmlsdGVyXyA9IGZ1bmN0aW9uIHVwZGF0ZUxheWVyRmlsdGVyXyhsYXllcikge1xuICAgIHZhciBfc291cmNlJHVwZGF0ZVBhcmFtcztcblxuICAgIGlmICghKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckltYWdlIHx8IGxheWVyIGluc3RhbmNlb2Ygb2xMYXllclRpbGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VJbWFnZVdNUyB8fCBzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVRpbGVXTVMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBhcmFtcyA9IHNvdXJjZS5nZXRQYXJhbXMoKTtcbiAgICB2YXIgbGF5ZXJzUGFyYW0gPSBwYXJhbXMuTEFZRVJTO1xuICAgIHZhciBsYXllcnNMaXN0ID0gbGF5ZXJzUGFyYW0uc3BsaXQoJywnKTtcblxuICAgIGlmICghbGF5ZXJzTGlzdC5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBsYXllcnNMaXN0Jyk7XG4gICAgfVxuXG4gICAgdmFyIGZpbHRlclBhcmFtID0gJ0ZJTFRFUic7XG4gICAgdmFyIGZpbHRlclBhcmFtVmFsdWVzID0gW107XG4gICAgdmFyIGhhc0ZpbHRlciA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobGF5ZXJzTGlzdCksIF9zdGVwNzsgIShfc3RlcDcgPSBfaXRlcmF0b3I3KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgd21zTGF5ZXJOYW1lID0gX3N0ZXA3LnZhbHVlO1xuICAgICAgdmFyIGZpbHRlclBhcmFtVmFsdWUgPSAnKCknO1xuICAgICAgdmFyIGRhdGFTb3VyY2VzID0gdGhpcy5kYXRhU291cmNlc18uZ2V0QXJyYXkoKTtcblxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZGF0YVNvdXJjZXMpLCBfc3RlcDg7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOCgpKS5kb25lOykge1xuICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwOC52YWx1ZTtcbiAgICAgICAgdmFyIGRzTGF5ZXIgPSB0aGlzLmdldERhdGFTb3VyY2VMYXllcl8oZGF0YVNvdXJjZSk7XG5cbiAgICAgICAgaWYgKGRzTGF5ZXIgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIShkYXRhU291cmNlIGluc3RhbmNlb2YgZ21mT0dDKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZGF0YVNvdXJjZSB0eXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ21mTGF5ZXJXTVMgPSBkYXRhU291cmNlLmdtZkxheWVyO1xuXG4gICAgICAgIGlmIChvbFV0aWxHZXRVaWQoZHNMYXllcikgPT0gb2xVdGlsR2V0VWlkKGxheWVyKSAmJiBsYXllci5nZXQoJ3F1ZXJ5U291cmNlSWRzJykuaW5jbHVkZXMoU3RyaW5nKGRhdGFTb3VyY2UuaWQpKSAmJiBnbWZMYXllcldNUy5sYXllcnMuc3BsaXQoJywnKS5pbmNsdWRlcyh3bXNMYXllck5hbWUpKSB7XG4gICAgICAgICAgdmFyIGlkID0gb2xVdGlsR2V0VWlkKGRhdGFTb3VyY2UuZ21mTGF5ZXIpO1xuICAgICAgICAgIHZhciBpdGVtID0gdGhpcy50cmVlQ3RybENhY2hlX1tpZF07XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBpdGVtJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHRyZWVDdHJsID0gaXRlbS50cmVlQ3RybDtcbiAgICAgICAgICB2YXIgcHJvakNvZGUgPSB0cmVlQ3RybC5tYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKS5nZXRDb2RlKCk7XG5cbiAgICAgICAgICBpZiAoIShkYXRhU291cmNlIGluc3RhbmNlb2YgT0dDKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBkYXRhc291cmNlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGZpbHRlclN0cmluZyA9IGRhdGFTb3VyY2UudmlzaWJsZSA/IHRoaXMubmdlb1J1bGVIZWxwZXJfLmNyZWF0ZUZpbHRlclN0cmluZyh7XG4gICAgICAgICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlLFxuICAgICAgICAgICAgcHJvakNvZGU6IHByb2pDb2RlLFxuICAgICAgICAgICAgaW5jRGltZW5zaW9uczogdHJ1ZVxuICAgICAgICAgIH0pIDogbnVsbDtcblxuICAgICAgICAgIGlmIChmaWx0ZXJTdHJpbmcpIHtcbiAgICAgICAgICAgIGZpbHRlclBhcmFtVmFsdWUgPSBcIihcIiArIGZpbHRlclN0cmluZyArIFwiKVwiO1xuICAgICAgICAgICAgaGFzRmlsdGVyID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZmlsdGVyUGFyYW1WYWx1ZXMucHVzaChmaWx0ZXJQYXJhbVZhbHVlKTtcbiAgICB9XG5cbiAgICBzb3VyY2UudXBkYXRlUGFyYW1zKChfc291cmNlJHVwZGF0ZVBhcmFtcyA9IHt9LCBfc291cmNlJHVwZGF0ZVBhcmFtc1tmaWx0ZXJQYXJhbV0gPSBoYXNGaWx0ZXIgPyBmaWx0ZXJQYXJhbVZhbHVlcy5qb2luKCcnKSA6IG51bGwsIF9zb3VyY2UkdXBkYXRlUGFyYW1zKSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURhdGFTb3VyY2VGaWx0ZXJSdWxlc0NoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVEYXRhU291cmNlRmlsdGVyUnVsZXNDaGFuZ2VfKGRhdGFTb3VyY2UpIHtcbiAgICBpZiAoZGF0YVNvdXJjZS5maWx0cmFibGUgIT09IHRydWUgfHwgZGF0YVNvdXJjZS5vZ2NUeXBlICE9PSBUeXBlLldNUykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsYXllciA9IHRoaXMuZ2V0RGF0YVNvdXJjZUxheWVyXyhkYXRhU291cmNlKTtcblxuICAgIGlmIChsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVMYXllckZpbHRlcl8obGF5ZXIpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEYXRhU291cmNlVGltZVZhbHVlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZURhdGFTb3VyY2VUaW1lVmFsdWVDaGFuZ2VfKGRhdGFTb3VyY2UpIHtcbiAgICB2YXIgaWQgPSBvbFV0aWxHZXRVaWQoZGF0YVNvdXJjZS5nbWZMYXllcik7XG4gICAgdmFyIGl0ZW0gPSB0aGlzLnRyZWVDdHJsQ2FjaGVfW2lkXTtcblxuICAgIGlmICghaXRlbSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGl0ZW0nKTtcbiAgICB9XG5cbiAgICB2YXIgd21zTGF5ZXIgPSBpdGVtLndtc0xheWVyO1xuICAgIHZhciB3bXNTb3VyY2UgPSB3bXNMYXllci5nZXRTb3VyY2UoKTtcbiAgICB2YXIgdGltZVByb3BlcnR5ID0gZGF0YVNvdXJjZS50aW1lUHJvcGVydHk7XG4gICAgdmFyIHRpbWVQYXJhbTtcbiAgICB2YXIgcmFuZ2UgPSBkYXRhU291cmNlLnRpbWVSYW5nZVZhbHVlO1xuXG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICBpZiAoIXRpbWVQcm9wZXJ0eSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdGltZVByb3BlcnR5Jyk7XG4gICAgICB9XG5cbiAgICAgIHRpbWVQYXJhbSA9IHRoaXMubmdlb1dNU1RpbWVfLmZvcm1hdFdNU1RpbWVQYXJhbSh0aW1lUHJvcGVydHksIHJhbmdlKTtcbiAgICB9XG5cbiAgICB2YXIgcGFyYW1zID0gd21zU291cmNlLmdldFBhcmFtcygpO1xuICAgIHZhciBjdXJyZW50VGltZVBhcmFtID0gcGFyYW1zLlRJTUU7XG5cbiAgICBpZiAoY3VycmVudFRpbWVQYXJhbSA9PT0gdGltZVBhcmFtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLnVwZGF0ZVdNU0xheWVyU3RhdGUod21zTGF5ZXIsIHdtc1NvdXJjZS5nZXRQYXJhbXMoKS5MQVlFUlMsIHRpbWVQYXJhbSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZU5nZW9CYWNrZ3JvdW5kTGF5ZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlTmdlb0JhY2tncm91bmRMYXllckNoYW5nZV8oZXZ0KSB7XG4gICAgdmFyIGV2ZW50ID0gZXZ0O1xuICAgIHZhciBwcmV2aW91c0JhY2tncm91bmRMYXllciA9IGV2ZW50LmRldGFpbC5wcmV2aW91cztcbiAgICB2YXIgY3VycmVudEJhY2tncm91bmRMYXllciA9IGV2ZW50LmRldGFpbC5jdXJyZW50O1xuICAgIHZhciBjYWNoZSA9IHRoaXMuZGF0YVNvdXJjZXNDYWNoZV87XG5cbiAgICBpZiAocHJldmlvdXNCYWNrZ3JvdW5kTGF5ZXIpIHtcbiAgICAgIHZhciBpZHMgPSBwcmV2aW91c0JhY2tncm91bmRMYXllci5nZXQoJ3F1ZXJ5U291cmNlSWRzJyk7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGlkcykpIHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoaWRzKSwgX3N0ZXA5OyAhKF9zdGVwOSA9IF9pdGVyYXRvcjkoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgaWQgPSBfc3RlcDkudmFsdWU7XG4gICAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBjYWNoZVtpZF07XG5cbiAgICAgICAgICBpZiAoZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgZGF0YVNvdXJjZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2VzXy5yZW1vdmUoZGF0YVNvdXJjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRCYWNrZ3JvdW5kTGF5ZXIpIHtcbiAgICAgIHZhciBfaWRzID0gY3VycmVudEJhY2tncm91bmRMYXllci5nZXQoJ3F1ZXJ5U291cmNlSWRzJyk7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KF9pZHMpKSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjEwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShfaWRzKSwgX3N0ZXAxMDsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgX2lkID0gX3N0ZXAxMC52YWx1ZTtcbiAgICAgICAgICB2YXIgX2RhdGFTb3VyY2UgPSBjYWNoZVtfaWRdO1xuXG4gICAgICAgICAgaWYgKF9kYXRhU291cmNlKSB7XG4gICAgICAgICAgICBfZGF0YVNvdXJjZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZXNfLnB1c2goX2RhdGFTb3VyY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRGF0YXNvdXJjZU1hbmFnZXI7XG59KCk7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mRGF0YVNvdXJjZXNNYW5hZ2VyJywgW2dtZkRhdGFzb3VyY2VXRlNBbGlhc2VzLm5hbWUsIGdtZkxheWVydHJlZVN5bmNMYXllcnRyZWVNYXAubmFtZSwgZ21mTGF5ZXJ0cmVlVHJlZU1hbmFnZXIubmFtZSwgZ21mVGhlbWVUaGVtZXMubmFtZSwgbmdlb0ZpbHRlclJ1bGVIZWxwZXIubmFtZSwgbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlcy5uYW1lLCBuZ2VvTWFwQmFja2dyb3VuZExheWVyTWdyLm5hbWUsIG5nZW9NYXBMYXllckhlbHBlci5uYW1lLCBuZ2VvTWlzY1dNU1RpbWUubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnZ21mRGF0YVNvdXJjZXNNYW5hZ2VyJywgRGF0YXNvdXJjZU1hbmFnZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9EYXRhc291cmNlT0dDIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuXG52YXIgR21mRGF0YXNvdXJjZU9HQyA9IGZ1bmN0aW9uIChfbmdlb0RhdGFzb3VyY2VPR0MpIHtcbiAgX2luaGVyaXRzTG9vc2UoR21mRGF0YXNvdXJjZU9HQywgX25nZW9EYXRhc291cmNlT0dDKTtcblxuICBmdW5jdGlvbiBHbWZEYXRhc291cmNlT0dDKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9uZ2VvRGF0YXNvdXJjZU9HQy5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMuZ21mTGF5ZXJfID0gb3B0aW9ucy5nbWZMYXllcjtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoR21mRGF0YXNvdXJjZU9HQywgW3tcbiAgICBrZXk6IFwiZ21mTGF5ZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdtZkxheWVyXztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gR21mRGF0YXNvdXJjZU9HQztcbn0obmdlb0RhdGFzb3VyY2VPR0MpO1xuXG5leHBvcnQgZGVmYXVsdCBHbWZEYXRhc291cmNlT0dDOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlSGVscGVyIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9IZWxwZXIuanMnO1xuaW1wb3J0IHsgU2VydmVyVHlwZSB9IGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuZXhwb3J0IHZhciBEYXRhc291cmNlV0ZTQWxpYXMgPSBmdW5jdGlvbiAoKSB7XG4gIERhdGFzb3VyY2VXRlNBbGlhcy4kaW5qZWN0ID0gW1wibmdlb0RhdGFTb3VyY2VzSGVscGVyXCJdO1xuXG4gIGZ1bmN0aW9uIERhdGFzb3VyY2VXRlNBbGlhcyhuZ2VvRGF0YVNvdXJjZXNIZWxwZXIpIHtcbiAgICB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8gPSBuZ2VvRGF0YVNvdXJjZXNIZWxwZXI7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRGF0YXNvdXJjZVdGU0FsaWFzLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZGVzY3JpYmUgPSBmdW5jdGlvbiBkZXNjcmliZShkYXRhU291cmNlKSB7XG4gICAgaWYgKGRhdGFTb3VyY2Uub2djU2VydmVyVHlwZSA9PT0gU2VydmVyVHlwZS5RR0lTU0VSVkVSICYmIGRhdGFTb3VyY2Uud2ZzVXJsXyAmJiBkYXRhU291cmNlLmdldFdGU0xheWVyTmFtZXMoKS5sZW5ndGggPT0gMSAmJiAhZGF0YVNvdXJjZS5hdHRyaWJ1dGVzKSB7XG4gICAgICB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8uZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXMoZGF0YVNvdXJjZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEYXRhc291cmNlV0ZTQWxpYXM7XG59KCk7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mRGF0YXNvdXJjZVdGU0FsaWFzZXMnLCBbbmdlb0RhdGFzb3VyY2VIZWxwZXIubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnZ21mV0ZTQWxpYXNlcycsIERhdGFzb3VyY2VXRlNBbGlhcyk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZEYXRhc291cmNlRmlsZUdyb3VwJywgW10pO1xubXlNb2R1bGUudmFsdWUoJ2dtZkRhdGFzb3VyY2VGaWxlR3JvdXAnLCB7XG4gIGZpbGVHcm91cDogbnVsbFxufSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBnbWZEYXRhc291cmNlRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQgZnJvbSAnZ21mL2RhdGFzb3VyY2UvRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQuanMnO1xuaW1wb3J0IGdtZkRhdGFzb3VyY2VFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlciBmcm9tICdnbWYvZGF0YXNvdXJjZS9FeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlci5qcyc7XG5pbXBvcnQgZ21mRGF0YXNvdXJjZUZpbGVHcm91cCBmcm9tICdnbWYvZGF0YXNvdXJjZS9maWxlR3JvdXAuanMnO1xuaW1wb3J0IGdtZkRhdGFzb3VyY2VIZWxwZXIgZnJvbSAnZ21mL2RhdGFzb3VyY2UvSGVscGVyLmpzJztcbmltcG9ydCBnbWZEYXRhc291cmNlTWFuYWdlciBmcm9tICdnbWYvZGF0YXNvdXJjZS9NYW5hZ2VyLmpzJztcbmltcG9ydCBnbWZEYXRhc291cmNlV0ZTQWxpYXNlcyBmcm9tICdnbWYvZGF0YXNvdXJjZS9XRlNBbGlhc2VzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCdnbWZEYXRhc291cmNlTW9kdWxlJywgW2dtZkRhdGFzb3VyY2VEYXRhU291cmNlQmVpbmdGaWx0ZXJlZC5uYW1lLCBnbWZEYXRhc291cmNlRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIubmFtZSwgZ21mRGF0YXNvdXJjZUZpbGVHcm91cC5uYW1lLCBnbWZEYXRhc291cmNlSGVscGVyLm5hbWUsIGdtZkRhdGFzb3VyY2VNYW5hZ2VyLm5hbWUsIGdtZkRhdGFzb3VyY2VXRlNBbGlhc2VzLm5hbWVdKTsiLCJEaXNjbGFpbWVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJGVsZW1lbnRcIiwgXCIkc2NlXCIsIFwiJHRpbWVvdXRcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIm5nZW9EaXNjbGFpbWVyXCIsIFwibmdlb0V2ZW50SGVscGVyXCIsIFwibmdlb0xheWVySGVscGVyXCIsIFwiZ21mRGlzY2xhaW1lck9wdGlvbnNcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xMYXllckJhc2UgZnJvbSAnb2wvbGF5ZXIvQmFzZS5qcyc7XG5pbXBvcnQgb2xMYXllckdyb3VwIGZyb20gJ29sL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCB7IERBVEFMQVlFUkdST1VQX05BTUUgfSBmcm9tICdnbWYvaW5kZXguanMnO1xuaW1wb3J0IG5nZW9NYXBMYXllckhlbHBlciBmcm9tICduZ2VvL21hcC9MYXllckhlbHBlci5qcyc7XG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gJ25nZW8vbWVzc2FnZS9NZXNzYWdlLmpzJztcbmltcG9ydCBuZ2VvTWVzc2FnZURpc2NsYWltZXIgZnJvbSAnbmdlby9tZXNzYWdlL0Rpc2NsYWltZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjRXZlbnRIZWxwZXIgZnJvbSAnbmdlby9taXNjL0V2ZW50SGVscGVyLmpzJztcbmltcG9ydCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0ICdhbmd1bGFyLXNhbml0aXplJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZEaXNjbGFpbWVyJywgWyduZ1Nhbml0aXplJywgbmdlb01hcExheWVySGVscGVyLm5hbWUsIG5nZW9NZXNzYWdlRGlzY2xhaW1lci5uYW1lLCBuZ2VvTWlzY0V2ZW50SGVscGVyLm5hbWVdKTtcbmV4cG9ydCBmdW5jdGlvbiBEaXNjbGFpbWVyQ29udHJvbGxlcigkZWxlbWVudCwgJHNjZSwgJHRpbWVvdXQsIGdldHRleHRDYXRhbG9nLCBuZ2VvRGlzY2xhaW1lciwgbmdlb0V2ZW50SGVscGVyLCBuZ2VvTGF5ZXJIZWxwZXIsIGdtZkRpc2NsYWltZXJPcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IGdtZkRpc2NsYWltZXJPcHRpb25zO1xuICB0aGlzLm1hcCA9IG51bGw7XG4gIHRoaXMudmlzaWJpbGl0eSA9IGZhbHNlO1xuICB0aGlzLm1zZztcbiAgdGhpcy5tc2dzXyA9IFtdO1xuICB0aGlzLnNjZV8gPSAkc2NlO1xuICB0aGlzLnRpbWVvdXRfID0gJHRpbWVvdXQ7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMuZWxlbWVudF8gPSAkZWxlbWVudDtcbiAgdGhpcy5kaXNjbGFpbWVyXyA9IG5nZW9EaXNjbGFpbWVyO1xuICB0aGlzLmV2ZW50SGVscGVyXyA9IG5nZW9FdmVudEhlbHBlcjtcbiAgdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfID0gbmdlb0xheWVySGVscGVyO1xuICB0aGlzLmRhdGFMYXllckdyb3VwXyA9IG51bGw7XG59XG5cbkRpc2NsYWltZXJDb250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMubWFwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICB9XG5cbiAgdGhpcy5kYXRhTGF5ZXJHcm91cF8gPSB0aGlzLm5nZW9MYXllckhlbHBlcl8uZ2V0R3JvdXBGcm9tTWFwKHRoaXMubWFwLCBEQVRBTEFZRVJHUk9VUF9OQU1FKTtcbiAgdGhpcy5yZWdpc3RlckxheWVyXyh0aGlzLmRhdGFMYXllckdyb3VwXyk7XG59O1xuXG5EaXNjbGFpbWVyQ29udHJvbGxlci5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzQWRkXyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdGhpcy50aW1lb3V0XyhmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbGF5ZXIgPSBldnQuZWxlbWVudDtcblxuICAgICAgaWYgKCEobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyQmFzZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBsYXllciB0eXBlJyk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnJlZ2lzdGVyTGF5ZXJfKGxheWVyKTtcbiAgICB9KTtcbiAgfVxufTtcblxuRGlzY2xhaW1lckNvbnRyb2xsZXIucHJvdG90eXBlLmhhbmRsZUxheWVyc1JlbW92ZV8gPSBmdW5jdGlvbiAoZXZ0KSB7XG4gIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICB2YXIgbGF5ZXIgPSBldnQuZWxlbWVudDtcblxuICAgIGlmICghKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckJhc2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGxheWVyIHR5cGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLnVucmVnaXN0ZXJMYXllcl8obGF5ZXIpO1xuICB9XG59O1xuXG5EaXNjbGFpbWVyQ29udHJvbGxlci5wcm90b3R5cGUucmVnaXN0ZXJMYXllcl8gPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgdmFyIGxheWVyVWlkID0gb2xVdGlsR2V0VWlkKGxheWVyKTtcblxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICB0aGlzLmV2ZW50SGVscGVyXy5hZGRMaXN0ZW5lcktleShsYXllclVpZCwgbGlzdGVuKGxheWVyLmdldExheWVycygpLCAnYWRkJywgdGhpcy5oYW5kbGVMYXllcnNBZGRfLCB0aGlzKSk7XG4gICAgdGhpcy5ldmVudEhlbHBlcl8uYWRkTGlzdGVuZXJLZXkobGF5ZXJVaWQsIGxpc3RlbihsYXllci5nZXRMYXllcnMoKSwgJ3JlbW92ZScsIHRoaXMuaGFuZGxlTGF5ZXJzUmVtb3ZlXywgdGhpcykpO1xuICAgIGxheWVyLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBfdGhpczIucmVnaXN0ZXJMYXllcl8obGF5ZXIpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGlzLm9wdGlvbnMubGF5ZXJWaXNpYmlsaXR5IHx8IHRoaXMub3B0aW9ucy5sYXllclZpc2liaWxpdHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGxheWVyLmdldFZpc2libGUoKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZV8obGF5ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jbG9zZUFsbF8obGF5ZXIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGlzdGVuZXJLZXkgPSBsaXN0ZW4obGF5ZXIsICdwcm9wZXJ0eWNoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAobGF5ZXIuZ2V0VmlzaWJsZSgpKSB7XG4gICAgICAgICAgX3RoaXMyLnVwZGF0ZV8obGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzMi5jbG9zZUFsbF8obGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZXZlbnRIZWxwZXJfLmFkZExpc3RlbmVyS2V5KGxheWVyVWlkLCBsaXN0ZW5lcktleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd0FsbF8obGF5ZXIpO1xuICAgIH1cbiAgfVxufTtcblxuRGlzY2xhaW1lckNvbnRyb2xsZXIucHJvdG90eXBlLnVucmVnaXN0ZXJMYXllcl8gPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgdmFyIGxheWVyVWlkID0gb2xVdGlsR2V0VWlkKGxheWVyKTtcblxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICB0aGlzLmV2ZW50SGVscGVyXy5jbGVhckxpc3RlbmVyS2V5KGxheWVyVWlkKTtcbiAgICBsYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgcmV0dXJuIF90aGlzMy51bnJlZ2lzdGVyTGF5ZXJfKGxheWVyKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmNsb3NlQWxsXyhsYXllcik7XG4gIH1cbn07XG5cbkRpc2NsYWltZXJDb250cm9sbGVyLnByb3RvdHlwZS4kb25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuZGF0YUxheWVyR3JvdXBfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFMYXllckdyb3VwJyk7XG4gIH1cblxuICB0aGlzLnVucmVnaXN0ZXJMYXllcl8odGhpcy5kYXRhTGF5ZXJHcm91cF8pO1xufTtcblxuRGlzY2xhaW1lckNvbnRyb2xsZXIucHJvdG90eXBlLnNob3dEaXNjbGFpbWVyTWVzc2FnZV8gPSBmdW5jdGlvbiAobGF5ZXJVaWQsIG1zZykge1xuICBtc2cgPSB0aGlzLmdldHRleHRDYXRhbG9nXy5nZXRTdHJpbmcobXNnKTtcblxuICBpZiAodGhpcy5vcHRpb25zLmV4dGVybmFsKSB7XG4gICAgaWYgKCF0aGlzLm1zZ3NfLmluY2x1ZGVzKG1zZykpIHtcbiAgICAgIHRoaXMubXNnc18ucHVzaChtc2cpO1xuICAgIH1cblxuICAgIHRoaXMubXNnID0gXCJcIiArIHRoaXMuc2NlXy50cnVzdEFzSHRtbCh0aGlzLm1zZ3NfLmpvaW4oJzxiciAvPicpKTtcbiAgICB0aGlzLnZpc2liaWxpdHkgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgbXNnOiBtc2csXG4gICAgICBsYXllclVpZDogbGF5ZXJVaWQsXG4gICAgICB0YXJnZXQ6IHRoaXMuZWxlbWVudF8sXG4gICAgICB0eXBlOiBNZXNzYWdlVHlwZS5XQVJOSU5HXG4gICAgfTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucG9wdXApIHtcbiAgICAgIG9wdGlvbnMucG9wdXAgPSB0aGlzLm9wdGlvbnMucG9wdXA7XG4gICAgfVxuXG4gICAgdGhpcy5kaXNjbGFpbWVyXy5hbGVydChvcHRpb25zKTtcbiAgfVxufTtcblxuRGlzY2xhaW1lckNvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlQWxsXyA9IGZ1bmN0aW9uIChsYXllcikge1xuICB2YXIgZGlzY2xhaW1lcnMgPSBsYXllci5nZXQoJ2Rpc2NsYWltZXJzJyk7XG5cbiAgaWYgKGRpc2NsYWltZXJzKSB7XG4gICAgdmFyIGxheWVyVWlkID0gb2xVdGlsR2V0VWlkKGxheWVyKTtcblxuICAgIGZvciAodmFyIGtleSBpbiBkaXNjbGFpbWVycykge1xuICAgICAgdmFyIHVpZCA9IGxheWVyVWlkICsgXCItXCIgKyBrZXk7XG4gICAgICB0aGlzLmNsb3NlRGlzY2xhaW1lck1lc3NhZ2VfKHVpZCwgZGlzY2xhaW1lcnNba2V5XSk7XG4gICAgfVxuICB9XG59O1xuXG5EaXNjbGFpbWVyQ29udHJvbGxlci5wcm90b3R5cGUuc2hvd0FsbF8gPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgdmFyIGRpc2NsYWltZXJzID0gbGF5ZXIuZ2V0KCdkaXNjbGFpbWVycycpO1xuXG4gIGlmICghZGlzY2xhaW1lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbGF5ZXJVaWQgPSBvbFV0aWxHZXRVaWQobGF5ZXIpO1xuXG4gIGZvciAodmFyIGtleSBpbiBkaXNjbGFpbWVycykge1xuICAgIHZhciB1aWQgPSBsYXllclVpZCArIFwiLVwiICsga2V5O1xuICAgIHRoaXMuc2hvd0Rpc2NsYWltZXJNZXNzYWdlXyh1aWQsIGRpc2NsYWltZXJzW2tleV0pO1xuICB9XG59O1xuXG5EaXNjbGFpbWVyQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlXyA9IGZ1bmN0aW9uIChsYXllcikge1xuICB2YXIgZGlzY2xhaW1lcnMgPSBsYXllci5nZXQoJ2Rpc2NsYWltZXJzJyk7XG5cbiAgaWYgKCFkaXNjbGFpbWVycykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICgnYWxsJyBpbiBkaXNjbGFpbWVycykge1xuICAgIGNvbnNvbGUuYXNzZXJ0KE9iamVjdC5rZXlzKGRpc2NsYWltZXJzKS5sZW5ndGggPT09IDEpO1xuICAgIHRoaXMuc2hvd0FsbF8obGF5ZXIpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsYXllcldNUyA9IGxheWVyO1xuICAgIHZhciBzb3VyY2VXTVMgPSBsYXllcldNUy5nZXRTb3VyY2UoKTtcblxuICAgIGlmIChzb3VyY2VXTVMuZ2V0UGFyYW1zKSB7XG4gICAgICB2YXIgbGF5ZXJzID0gc291cmNlV01TLmdldFBhcmFtcygpWydMQVlFUlMnXTtcbiAgICAgIHZhciBsYXllclVpZCA9IG9sVXRpbEdldFVpZChsYXllcik7XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBkaXNjbGFpbWVycykge1xuICAgICAgICB2YXIgdWlkID0gbGF5ZXJVaWQgKyBcIi1cIiArIGtleTtcblxuICAgICAgICBpZiAobGF5ZXJzLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgICAgICB0aGlzLnNob3dEaXNjbGFpbWVyTWVzc2FnZV8odWlkLCBkaXNjbGFpbWVyc1trZXldKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmNsb3NlRGlzY2xhaW1lck1lc3NhZ2VfKHVpZCwgZGlzY2xhaW1lcnNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbkRpc2NsYWltZXJDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZURpc2NsYWltZXJNZXNzYWdlXyA9IGZ1bmN0aW9uIChsYXllclVpZCwgbXNnKSB7XG4gIG1zZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2dfLmdldFN0cmluZyhtc2cpO1xuXG4gIGlmICh0aGlzLm9wdGlvbnMuZXh0ZXJuYWwpIHtcbiAgICB0aGlzLnZpc2liaWxpdHkgPSBmYWxzZTtcbiAgICB0aGlzLm1zZ3NfLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5tc2cgPSAnJztcbiAgfSBlbHNlIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIG1zZzogbXNnLFxuICAgICAgbGF5ZXJVaWQ6IGxheWVyVWlkLFxuICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnRfLFxuICAgICAgdHlwZTogTWVzc2FnZVR5cGUuV0FSTklOR1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBvcHVwKSB7XG4gICAgICBvcHRpb25zLnBvcHVwID0gdGhpcy5vcHRpb25zLnBvcHVwO1xuICAgIH1cblxuICAgIHRoaXMuZGlzY2xhaW1lcl8uY2xvc2Uob3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBkaXNjbGFpbWVyQ29tcG9uZW50ID0ge1xuICBjb250cm9sbGVyOiBEaXNjbGFpbWVyQ29udHJvbGxlcixcbiAgYmluZGluZ3M6IHtcbiAgICAnbWFwJzogJz1nbWZEaXNjbGFpbWVyTWFwJyxcbiAgICAndmlzaWJpbGl0eSc6ICc9P2dtZkRpc2NsYWltZXJFeHRlcm5hbFZpc2liaWxpdHknLFxuICAgICdtc2cnOiAnPT9nbWZEaXNjbGFpbWVyRXh0ZXJuYWxNc2cnXG4gIH1cbn07XG5teU1vZHVsZS5jb21wb25lbnQoJ2dtZkRpc2NsYWltZXInLCBkaXNjbGFpbWVyQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tICduZ2VvL21lc3NhZ2UvTWVzc2FnZS5qcyc7XG5pbXBvcnQgZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIgZnJvbSAnZ21mL2RhdGFzb3VyY2UvRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIuanMnO1xuXG52YXIgZmlsZURyb3AgPSBmdW5jdGlvbiBmaWxlRHJvcChnbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlciwgbmdlb05vdGlmaWNhdGlvbiwgZ2V0dGV4dENhdGFsb2cpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImRyb3Atem9uZS1vZmZcIiBpZD1cImRyb3Atem9uZVwiPjxwPnt7XCJEcm9wIGZpbGUgaGVyZS5cIiB8IHRyYW5zbGF0ZX19PC9wPjwvZGl2PicsXG4gICAgbGluazogZnVuY3Rpb24gbGluaygkc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICBpZiAoJHNjb3BlLmN0cmwuZmlsZURyb3BFbmFibGVkICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5iaW5kKCdkcmFnb3ZlcicsIHByb2Nlc3NEcmFnXyk7XG4gICAgICBlbGVtZW50LmJpbmQoJ2RyYWdlbnRlcicsIHByb2Nlc3NEcmFnXyk7XG4gICAgICBlbGVtZW50LmJpbmQoJ2RyYWdsZWF2ZScsIHByb2Nlc3NEcmFnXyk7XG4gICAgICBlbGVtZW50LmJpbmQoJ2Ryb3AnLCBwcm9jZXNzRHJvcF8uYmluZCh0aGlzLCBlbGVtZW50LCBnbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlciwgbmdlb05vdGlmaWNhdGlvbiwgZ2V0dGV4dENhdGFsb2cpKTtcbiAgICB9XG4gIH07XG59O1xuXG5maWxlRHJvcC4kaW5qZWN0ID0gW1wiZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJcIiwgXCJuZ2VvTm90aWZpY2F0aW9uXCIsIFwiZ2V0dGV4dENhdGFsb2dcIl07XG5maWxlRHJvcC4kaW5qZWN0ID0gW1wiZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJcIiwgXCJuZ2VvTm90aWZpY2F0aW9uXCIsIFwiZ2V0dGV4dENhdGFsb2dcIl07XG5cbmZ1bmN0aW9uIHByb2Nlc3NEcmFnXygpIHtcbiAgaWYgKGV2ZW50ICE9PSBudWxsKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIGlmIChldmVudC50eXBlID09PSAnZHJhZ2VudGVyJyB8fCBldmVudC50eXBlID09PSAnZHJhZ2xlYXZlJykge1xuICAgIHZhciBkcm9wWm9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wLXpvbmUnKTtcblxuICAgIGlmIChldmVudC50eXBlID09PSAnZHJhZ2VudGVyJykge1xuICAgICAgZHJvcFpvbmUuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC16b25lLW9mZicpO1xuICAgICAgZHJvcFpvbmUuY2xhc3NMaXN0LmFkZCgnZHJvcC16b25lJyk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdkcmFnbGVhdmUnKSB7XG4gICAgICBkcm9wWm9uZS5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wLXpvbmUnKTtcbiAgICAgIGRyb3Bab25lLmNsYXNzTGlzdC5hZGQoJ2Ryb3Atem9uZS1vZmYnKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0Ryb3BfKGVsZW1lbnQsIGdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLCBuZ2VvTm90aWZpY2F0aW9uLCBnZXR0ZXh0Q2F0YWxvZywgZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICE9PSBudWxsKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIHZhciBkcm9wWm9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wLXpvbmUnKTtcbiAgZHJvcFpvbmUuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcC16b25lJyk7XG4gIGRyb3Bab25lLmNsYXNzTGlzdC5hZGQoJ2Ryb3Atem9uZS1vZmYnKTtcbiAgdmFyIGZpbGUgPSBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlc1swXTtcbiAgZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIuY3JlYXRlQW5kQWRkRGF0YVNvdXJjZUZyb21GaWxlKGZpbGUsIGZ1bmN0aW9uIChzdWNjZXNzKSB7XG4gICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgICBkaXYuaWQgPSAnZmlsZS1hbGVydCc7XG4gICAgICB2YXIgYWxlcnRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dtZi1hcHAtbWFwLW1lc3NhZ2VzJyk7XG5cbiAgICAgIGlmIChhbGVydEVsZW1lbnRzICYmIGFsZXJ0RWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnZ21mLWZpbGUtYWxlcnQtY29udGFpbmVkJyk7XG4gICAgICAgIGFsZXJ0RWxlbWVudHNbMF0uaW5zZXJ0QmVmb3JlKGRpdiwgYWxlcnRFbGVtZW50c1swXS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdnbWYtZmlsZS1hbGVydC1hbG9uZScpO1xuICAgICAgICBlbGVtZW50WzBdLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICB9XG5cbiAgICAgIHZhciBkZWxheSA9IDQwMDA7XG4gICAgICBuZ2VvTm90aWZpY2F0aW9uLm5vdGlmeSh7XG4gICAgICAgIG1zZzogZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdUaGlzIGZpbGUgY2FuIG5vdCBiZSBpbXBvcnRlZCEnKSxcbiAgICAgICAgdHlwZTogTWVzc2FnZVR5cGUuRVJST1IsXG4gICAgICAgIHRhcmdldDogJyNmaWxlLWFsZXJ0JyxcbiAgICAgICAgZGVsYXk6IGRlbGF5XG4gICAgICB9KTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1hbGVydCcpO1xuICAgICAgICBlbC5yZW1vdmUoKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICB9XG4gIH0pO1xufVxuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mRmlsZURyb3Bab25lJywgW2dtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLm5hbWVdKTtcbm15TW9kdWxlLmRpcmVjdGl2ZSgnZ21mRmlsZURyb3Bab25lJywgZmlsZURyb3ApO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgZ21mRmlsZURyb3Bab25lIGZyb20gJ2dtZi9kcm9wZmlsZS9jb21wb25lbnQuanMnO1xuaW1wb3J0ICcuL2Ryb3BmaWxlLnNjc3MnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ2dtZkZpbGVEcm9wWm9uZU1vZHVsZScsIFtnbWZGaWxlRHJvcFpvbmUubmFtZV0pOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuZXhwb3J0IHZhciBFZGl0aW5nRW51bWVyYXRlQXR0cmlidXRlU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgRWRpdGluZ0VudW1lcmF0ZUF0dHJpYnV0ZVNlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiZ21mTGF5ZXJzVXJsXCJdO1xuXG4gIGZ1bmN0aW9uIEVkaXRpbmdFbnVtZXJhdGVBdHRyaWJ1dGVTZXJ2aWNlKCRodHRwLCBnbWZMYXllcnNVcmwpIHtcbiAgICB0aGlzLmh0dHBfID0gJGh0dHA7XG4gICAgdGhpcy5iYXNlVXJsXyA9IGdtZkxheWVyc1VybDtcbiAgICB0aGlzLnByb21pc2VzXyA9IHt9O1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEVkaXRpbmdFbnVtZXJhdGVBdHRyaWJ1dGVTZXJ2aWNlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0QXR0cmlidXRlVmFsdWVzID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlVmFsdWVzKGRhdGFTb3VyY2UsIGF0dHJpYnV0ZSkge1xuICAgIHZhciBwcm9taXNlSWQgPSBkYXRhU291cmNlLmlkICsgXCJfXCIgKyBhdHRyaWJ1dGU7XG4gICAgdmFyIG5hbWUgPSBkYXRhU291cmNlLm5hbWU7XG5cbiAgICBpZiAoIXRoaXMucHJvbWlzZXNfW3Byb21pc2VJZF0pIHtcbiAgICAgIHZhciB1cmwgPSB0aGlzLmJhc2VVcmxfICsgXCIvXCIgKyBuYW1lICsgXCIvdmFsdWVzL1wiICsgYXR0cmlidXRlO1xuICAgICAgdGhpcy5wcm9taXNlc19bcHJvbWlzZUlkXSA9IHRoaXMuaHR0cF8uZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICByZXR1cm4gcmVzcC5kYXRhLml0ZW1zO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZXNfW3Byb21pc2VJZF07XG4gIH07XG5cbiAgcmV0dXJuIEVkaXRpbmdFbnVtZXJhdGVBdHRyaWJ1dGVTZXJ2aWNlO1xufSgpO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZkVudW1lcmF0ZUF0dHJpYnV0ZScsIFtdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ2dtZkVudW1lcmF0ZUF0dHJpYnV0ZScsIEVkaXRpbmdFbnVtZXJhdGVBdHRyaWJ1dGVTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiJHFcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGluamVjdG9yXCIsIFwiJHRpbWVvdXRcIiwgXCJnbWZEYXRhc291cmNlRmlsZUdyb3VwXCIsIFwiZ21mU25hcHBpbmdDb25maWdcIiwgXCJnbWZUaGVtZXNcIiwgXCJnbWZUcmVlTWFuYWdlclwiLCBcIm5nZW9GZWF0dXJlc1wiXTtcblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZkRhdGFzb3VyY2VGaWxlR3JvdXAgZnJvbSAnZ21mL2RhdGFzb3VyY2UvZmlsZUdyb3VwLmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlciBmcm9tICdnbWYvbGF5ZXJ0cmVlL1RyZWVNYW5hZ2VyLmpzJztcbmltcG9ydCBnbWZUaGVtZVRoZW1lcywgeyBUaGVtZU5vZGVUeXBlLCBnZXRTbmFwcGluZ0NvbmZpZyB9IGZyb20gJ2dtZi90aGVtZS9UaGVtZXMuanMnO1xuaW1wb3J0IG5nZW9MYXllcnRyZWVDb250cm9sbGVyLCB7IGdldEZpcnN0UGFyZW50VHJlZSB9IGZyb20gJ25nZW8vbGF5ZXJ0cmVlL0NvbnRyb2xsZXIuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRmlsZSBmcm9tICduZ2VvL2RhdGFzb3VyY2UvRmlsZS5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX0dFT01FVFJZX05BTUUgfSBmcm9tICduZ2VvL2RhdGFzb3VyY2UvT0dDLmpzJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xDb2xsZWN0aW9uLCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IG9sRm9ybWF0V0ZTIGZyb20gJ29sL2Zvcm1hdC9XRlMuanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25TbmFwIGZyb20gJ29sL2ludGVyYWN0aW9uL1NuYXAuanMnO1xuZXhwb3J0IHZhciBDdXN0b21TbmFwID0gZnVuY3Rpb24gKF9vbEludGVyYWN0aW9uU25hcCkge1xuICBfaW5oZXJpdHNMb29zZShDdXN0b21TbmFwLCBfb2xJbnRlcmFjdGlvblNuYXApO1xuXG4gIGZ1bmN0aW9uIEN1c3RvbVNuYXAob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25TbmFwLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBfdGhpcy5zZXRBY3RpdmUoZXZ0LmtleUNvZGUgIT09IDE3KTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0QWN0aXZlKHRydWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBDdXN0b21TbmFwO1xufShvbEludGVyYWN0aW9uU25hcCk7XG5leHBvcnQgZnVuY3Rpb24gRWRpdGluZ1NuYXBwaW5nU2VydmljZSgkaHR0cCwgJHEsICRyb290U2NvcGUsICRpbmplY3RvciwgJHRpbWVvdXQsIGdtZkRhdGFzb3VyY2VGaWxlR3JvdXAsIGdtZlNuYXBwaW5nQ29uZmlnLCBnbWZUaGVtZXMsIGdtZlRyZWVNYW5hZ2VyLCBuZ2VvRmVhdHVyZXMpIHtcbiAgdGhpcy5odHRwXyA9ICRodHRwO1xuICB0aGlzLnFfID0gJHE7XG4gIHRoaXMucm9vdFNjb3BlXyA9ICRyb290U2NvcGU7XG4gIHRoaXMudGltZW91dF8gPSAkdGltZW91dDtcbiAgdGhpcy5pbmplY3Rvcl8gPSAkaW5qZWN0b3I7XG4gIHRoaXMuZ21mRGF0YXNvdXJjZUZpbGVHcm91cF8gPSBnbWZEYXRhc291cmNlRmlsZUdyb3VwO1xuICB0aGlzLmdtZlNuYXBwaW5nQ29uZmlnXyA9IGdtZlNuYXBwaW5nQ29uZmlnO1xuICB0aGlzLmdtZlRoZW1lc18gPSBnbWZUaGVtZXM7XG4gIHRoaXMuZ21mVHJlZU1hbmFnZXJfID0gZ21mVHJlZU1hbmFnZXI7XG4gIHRoaXMubmdlb0ZlYXR1cmVzXyA9IG5nZW9GZWF0dXJlcztcbiAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgdGhpcy5jYWNoZUZpbGVEYXRhU291cmNlXyA9IHt9O1xuICB0aGlzLmxpc3RlbmVyS2V5c18gPSBbXTtcbiAgdGhpcy5tYXBfID0gbnVsbDtcbiAgdGhpcy5tYXBWaWV3Q2hhbmdlUHJvbWlzZV8gPSBudWxsO1xuICB0aGlzLm5nZW9GZWF0dXJlc1NuYXBJbnRlcmFjdGlvbl8gPSBuZXcgQ3VzdG9tU25hcCh7XG4gICAgZWRnZTogZ21mU25hcHBpbmdDb25maWcuZWRnZSxcbiAgICBmZWF0dXJlczogbmdlb0ZlYXR1cmVzLFxuICAgIHBpeGVsVG9sZXJhbmNlOiBnbWZTbmFwcGluZ0NvbmZpZy50b2xlcmFuY2UsXG4gICAgdmVydGV4OiBnbWZTbmFwcGluZ0NvbmZpZy52ZXJ0ZXhcbiAgfSk7XG4gIHRoaXMub2djU2VydmVyc18gPSBudWxsO1xuICB0aGlzLm5nZW9TbmFwcGluZ1NvdXJjZV8gPSB0aGlzLmluamVjdG9yXy5oYXMoJ25nZW9TbmFwcGluZ1NvdXJjZScpID8gdGhpcy5pbmplY3Rvcl8uZ2V0KCduZ2VvU25hcHBpbmdTb3VyY2UnKSA6IHVuZGVmaW5lZDtcbn1cblxuRWRpdGluZ1NuYXBwaW5nU2VydmljZS5wcm90b3R5cGUuZW5zdXJlU25hcEludGVyYWN0aW9uc09uVG9wID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMubWFwXykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgfVxuXG4gIHZhciBtYXAgPSB0aGlzLm1hcF87XG4gIHZhciBpdGVtO1xuXG4gIGZvciAodmFyIHVpZCBpbiB0aGlzLmNhY2hlXykge1xuICAgIGl0ZW0gPSB0aGlzLmNhY2hlX1t1aWRdO1xuXG4gICAgaWYgKGl0ZW0uYWN0aXZlKSB7XG4gICAgICBpZiAoIWl0ZW0uaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGl0ZW0uaW50ZXJhY3Rpb24nKTtcbiAgICAgIH1cblxuICAgICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKGl0ZW0uaW50ZXJhY3Rpb24pO1xuICAgICAgbWFwLmFkZEludGVyYWN0aW9uKGl0ZW0uaW50ZXJhY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIF91aWQgaW4gdGhpcy5jYWNoZUZpbGVEYXRhU291cmNlXykge1xuICAgIGl0ZW0gPSB0aGlzLmNhY2hlRmlsZURhdGFTb3VyY2VfW191aWRdO1xuXG4gICAgaWYgKGl0ZW0uYWN0aXZlKSB7XG4gICAgICBpZiAoIWl0ZW0uaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGl0ZW0uaW50ZXJhY3Rpb24nKTtcbiAgICAgIH1cblxuICAgICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKGl0ZW0uaW50ZXJhY3Rpb24pO1xuICAgICAgbWFwLmFkZEludGVyYWN0aW9uKGl0ZW0uaW50ZXJhY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIG1hcC5yZW1vdmVJbnRlcmFjdGlvbih0aGlzLm5nZW9GZWF0dXJlc1NuYXBJbnRlcmFjdGlvbl8pO1xuICBtYXAuYWRkSW50ZXJhY3Rpb24odGhpcy5uZ2VvRmVhdHVyZXNTbmFwSW50ZXJhY3Rpb25fKTtcbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgdmFyIGtleXMgPSB0aGlzLmxpc3RlbmVyS2V5c187XG5cbiAgaWYgKHRoaXMubWFwXykge1xuICAgIGlmICghdGhpcy50cmVlQ3RybHNVbnJlZ2lzdGVyXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHRyZWVDdHJsc1VucmVnaXN0ZXInKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyZWVDdHJsc1VucmVnaXN0ZXJfKCk7XG4gICAgdGhpcy51bnJlZ2lzdGVyQWxsVHJlZUN0cmxfKCk7XG4gICAga2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIGtleXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLm1hcF8ucmVtb3ZlSW50ZXJhY3Rpb24odGhpcy5uZ2VvRmVhdHVyZXNTbmFwSW50ZXJhY3Rpb25fKTtcbiAgfVxuXG4gIHRoaXMubWFwXyA9IG1hcDtcblxuICBpZiAobWFwKSB7XG4gICAgdGhpcy50cmVlQ3RybHNVbnJlZ2lzdGVyXyA9IHRoaXMucm9vdFNjb3BlXy4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpczIuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsLmNoaWxkcmVuO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgX3RoaXMyLnRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFfdGhpczIuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMyLnVucmVnaXN0ZXJBbGxUcmVlQ3RybF8oKTtcblxuICAgICAgICAgIF90aGlzMi5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwudHJhdmVyc2VEZXB0aEZpcnN0KF90aGlzMi5yZWdpc3RlclRyZWVDdHJsXy5iaW5kKF90aGlzMikpO1xuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9KTtcbiAgICBrZXlzLnB1c2gobGlzdGVuKHRoaXMuZ21mVGhlbWVzXywgJ2NoYW5nZScsIHRoaXMuaGFuZGxlVGhlbWVzQ2hhbmdlXywgdGhpcyksIGxpc3RlbihtYXAsICdtb3ZlZW5kJywgdGhpcy5oYW5kbGVNYXBNb3ZlRW5kXywgdGhpcykpO1xuICAgIHZhciBmaWxlR3JvdXAgPSB0aGlzLmdtZkRhdGFzb3VyY2VGaWxlR3JvdXBfLmZpbGVHcm91cDtcblxuICAgIGlmIChmaWxlR3JvdXApIHtcbiAgICAgIGtleXMucHVzaChsaXN0ZW4oZmlsZUdyb3VwLmRhdGFTb3VyY2VzQ29sbGVjdGlvbiwgJ2FkZCcsIHRoaXMuaGFuZGxlRmlsZUdyb3VwRGF0YVNvdXJjZXNDb2xsZWN0aW9uQWRkXywgdGhpcyksIGxpc3RlbihmaWxlR3JvdXAuZGF0YVNvdXJjZXNDb2xsZWN0aW9uLCAncmVtb3ZlJywgdGhpcy5oYW5kbGVGaWxlR3JvdXBEYXRhU291cmNlc0NvbGxlY3Rpb25SZW1vdmVfLCB0aGlzKSk7XG4gICAgfVxuXG4gICAgbWFwLmFkZEludGVyYWN0aW9uKHRoaXMubmdlb0ZlYXR1cmVzU25hcEludGVyYWN0aW9uXyk7XG4gIH1cbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZVRoZW1lc0NoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gIHRoaXMub2djU2VydmVyc18gPSBudWxsO1xuICB0aGlzLmdtZlRoZW1lc18uZ2V0T2djU2VydmVyc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKG9nY1NlcnZlcnMpIHtcbiAgICBfdGhpczMub2djU2VydmVyc18gPSBvZ2NTZXJ2ZXJzO1xuICB9KTtcbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLnJlZ2lzdGVyVHJlZUN0cmxfID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gIHZhciBub2RlID0gdHJlZUN0cmwubm9kZTtcbiAgdmFyIGdyb3VwTm9kZSA9IG5vZGU7XG5cbiAgaWYgKGdyb3VwTm9kZS5jaGlsZHJlbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG5vZGUgPSB0cmVlQ3RybC5ub2RlO1xuICB2YXIgc25hcHBpbmdDb25maWcgPSBnZXRTbmFwcGluZ0NvbmZpZyhub2RlKTtcblxuICBpZiAoc25hcHBpbmdDb25maWcpIHtcbiAgICB2YXIgd2ZzQ29uZmlnID0gdGhpcy5nZXRXRlNDb25maWdfKHRyZWVDdHJsKTtcblxuICAgIGlmICh3ZnNDb25maWcpIHtcbiAgICAgIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQodHJlZUN0cmwpO1xuICAgICAgdmFyIHN0YXRlV2F0Y2hlclVucmVnaXN0ZXIgPSB0aGlzLnJvb3RTY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5pc1NuYXBwaW5nQWN0aXZlRm9yVHJlZUN0cmxfKHRyZWVDdHJsKTtcbiAgICAgIH0sIHRoaXMuaGFuZGxlVHJlZUN0cmxTdGF0ZUNoYW5nZV8uYmluZCh0aGlzLCB0cmVlQ3RybCkpO1xuICAgICAgdmFyIG9nY1NlcnZlciA9IHRoaXMuZ2V0T0dDU2VydmVyXyh0cmVlQ3RybCk7XG5cbiAgICAgIGlmICghb2djU2VydmVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBvZ2NTZXJ2ZXInKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jYWNoZV9bdWlkXSA9IHtcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgZmVhdHVyZU5TOiBvZ2NTZXJ2ZXIud2ZzRmVhdHVyZU5TLFxuICAgICAgICBmZWF0dXJlUHJlZml4OiAnZmVhdHVyZScsXG4gICAgICAgIGZlYXR1cmVzOiBuZXcgb2xDb2xsZWN0aW9uKCksXG4gICAgICAgIGludGVyYWN0aW9uOiBudWxsLFxuICAgICAgICBtYXhGZWF0dXJlczogNTAsXG4gICAgICAgIHJlcXVlc3REZWZlcnJlZDogbnVsbCxcbiAgICAgICAgc25hcHBpbmdDb25maWc6IHNuYXBwaW5nQ29uZmlnLFxuICAgICAgICB0cmVlQ3RybDogdHJlZUN0cmwsXG4gICAgICAgIHdmc0NvbmZpZzogd2ZzQ29uZmlnLFxuICAgICAgICBzdGF0ZVdhdGNoZXJVbnJlZ2lzdGVyOiBzdGF0ZVdhdGNoZXJVbnJlZ2lzdGVyXG4gICAgICB9O1xuICAgICAgdGhpcy5oYW5kbGVUcmVlQ3RybFN0YXRlQ2hhbmdlXyh0cmVlQ3RybCwgdGhpcy5pc1NuYXBwaW5nQWN0aXZlRm9yVHJlZUN0cmxfKHRyZWVDdHJsKSk7XG4gICAgfVxuICB9XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS51bnJlZ2lzdGVyQWxsVHJlZUN0cmxfID0gZnVuY3Rpb24gKCkge1xuICBmb3IgKHZhciB1aWQgaW4gdGhpcy5jYWNoZV8pIHtcbiAgICB2YXIgaXRlbSA9IHRoaXMuY2FjaGVfW3VpZF07XG5cbiAgICBpZiAoaXRlbSkge1xuICAgICAgaXRlbS5zdGF0ZVdhdGNoZXJVbnJlZ2lzdGVyKCk7XG4gICAgICB0aGlzLmRlYWN0aXZhdGVJdGVtXyhpdGVtKTtcbiAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1t1aWRdO1xuICAgIH1cbiAgfVxufTtcblxuRWRpdGluZ1NuYXBwaW5nU2VydmljZS5wcm90b3R5cGUuZ2V0T0dDU2VydmVyXyA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgZ21mTGF5ZXIgPSB0cmVlQ3RybC5ub2RlO1xuXG4gIGlmIChnbWZMYXllci50eXBlICE9PSBUaGVtZU5vZGVUeXBlLldNUykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGdtZkxheWVyV01TID0gZ21mTGF5ZXI7XG4gIHZhciBvZ2NTZXJ2ZXJOYW1lO1xuICB2YXIgZ21mR3JvdXAgPSB0cmVlQ3RybC5wYXJlbnQubm9kZTtcblxuICBpZiAoZ21mR3JvdXAubWl4ZWQpIHtcbiAgICBvZ2NTZXJ2ZXJOYW1lID0gZ21mTGF5ZXJXTVMub2djU2VydmVyO1xuICB9IGVsc2Uge1xuICAgIHZhciBmaXJzdFRyZWVDdHJsID0gZ2V0Rmlyc3RQYXJlbnRUcmVlKHRyZWVDdHJsKTtcbiAgICB2YXIgZmlyc3ROb2RlID0gZmlyc3RUcmVlQ3RybC5ub2RlO1xuICAgIG9nY1NlcnZlck5hbWUgPSBmaXJzdE5vZGUub2djU2VydmVyO1xuICB9XG5cbiAgaWYgKCFvZ2NTZXJ2ZXJOYW1lKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIXRoaXMub2djU2VydmVyc18pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgb2djU2VydmVycycpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMub2djU2VydmVyc19bb2djU2VydmVyTmFtZV07XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS5nZXRXRlNDb25maWdfID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIGlmICh0aGlzLm9nY1NlcnZlcnNfID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZ21mTGF5ZXIgPSB0cmVlQ3RybC5ub2RlO1xuXG4gIGlmIChnbWZMYXllci50eXBlICE9PSBUaGVtZU5vZGVUeXBlLldNUykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGdtZkxheWVyV01TID0gZ21mTGF5ZXI7XG4gIHZhciBmZWF0dXJlVHlwZXMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMCwgaWkgPSBnbWZMYXllcldNUy5jaGlsZExheWVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgaWYgKGdtZkxheWVyV01TLmNoaWxkTGF5ZXJzW2ldLnF1ZXJ5YWJsZSkge1xuICAgICAgZmVhdHVyZVR5cGVzLnB1c2goZ21mTGF5ZXJXTVMuY2hpbGRMYXllcnNbaV0ubmFtZSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFmZWF0dXJlVHlwZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgb2djU2VydmVyID0gdGhpcy5nZXRPR0NTZXJ2ZXJfKHRyZWVDdHJsKTtcblxuICBpZiAoIW9nY1NlcnZlciB8fCAhb2djU2VydmVyLndmc1N1cHBvcnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciB1cmxXZnMgPSBvZ2NTZXJ2ZXIudXJsV2ZzO1xuXG4gIGlmICghdXJsV2ZzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHVybFdmcycpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmZWF0dXJlVHlwZXM6IGZlYXR1cmVUeXBlcy5qb2luKCcsJyksXG4gICAgdXJsOiB1cmxXZnNcbiAgfTtcbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLmlzU25hcHBpbmdBY3RpdmVGb3JUcmVlQ3RybF8gPSBmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgaWYgKHRyZWVDdHJsLmdldFN0YXRlKCkgIT09ICdvbicpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodHJlZUN0cmwucHJvcGVydGllcy5zbmFwcGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiB0cmVlQ3RybC5wcm9wZXJ0aWVzLnNuYXBwaW5nICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc25hcHBpbmdBY3RpdmUgdHlwZScpO1xuICAgIH1cblxuICAgIHJldHVybiB0cmVlQ3RybC5wcm9wZXJ0aWVzLnNuYXBwaW5nO1xuICB9XG5cbiAgdmFyIG5vZGUgPSB0cmVlQ3RybC5ub2RlO1xuICB2YXIgY29uZmlnID0gZ2V0U25hcHBpbmdDb25maWcobm9kZSk7XG4gIHJldHVybiBjb25maWcgIT09IG51bGwgJiYgY29uZmlnLmFjdGl2YXRlZDtcbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZVRyZWVDdHJsU3RhdGVDaGFuZ2VfID0gZnVuY3Rpb24gKHRyZWVDdHJsLCBuZXdWYWwpIHtcbiAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZCh0cmVlQ3RybCk7XG4gIHZhciBpdGVtID0gdGhpcy5jYWNoZV9bdWlkXTtcbiAgbmV3VmFsID8gdGhpcy5hY3RpdmF0ZUl0ZW1fKGl0ZW0pIDogdGhpcy5kZWFjdGl2YXRlSXRlbV8oaXRlbSk7XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS5hY3RpdmF0ZUl0ZW1fID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaWYgKCF0aGlzLm1hcF8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gIH1cblxuICBpZiAoaXRlbS5hY3RpdmUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbWFwID0gdGhpcy5tYXBfO1xuICB2YXIgaW50ZXJhY3Rpb24gPSBuZXcgQ3VzdG9tU25hcCh7XG4gICAgZWRnZTogaXRlbS5zbmFwcGluZ0NvbmZpZy5lZGdlLFxuICAgIGZlYXR1cmVzOiBpdGVtLmZlYXR1cmVzLFxuICAgIHBpeGVsVG9sZXJhbmNlOiBpdGVtLnNuYXBwaW5nQ29uZmlnLnRvbGVyYW5jZSxcbiAgICB2ZXJ0ZXg6IGl0ZW0uc25hcHBpbmdDb25maWcudmVydGV4XG4gIH0pO1xuICBtYXAuYWRkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pO1xuICBpdGVtLmludGVyYWN0aW9uID0gaW50ZXJhY3Rpb247XG4gIGl0ZW0uYWN0aXZlID0gdHJ1ZTtcbiAgdGhpcy5sb2FkSXRlbUZlYXR1cmVzXyhpdGVtKTtcbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLmRlYWN0aXZhdGVJdGVtXyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIGlmICghdGhpcy5tYXBfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICB9XG5cbiAgaWYgKCFpdGVtLmFjdGl2ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBtYXAgPSB0aGlzLm1hcF87XG4gIHZhciBpbnRlcmFjdGlvbiA9IGl0ZW0uaW50ZXJhY3Rpb247XG5cbiAgaWYgKCFpbnRlcmFjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBpbnRlcmFjdGlvbicpO1xuICB9XG5cbiAgbWFwLnJlbW92ZUludGVyYWN0aW9uKGludGVyYWN0aW9uKTtcbiAgaXRlbS5pbnRlcmFjdGlvbiA9IG51bGw7XG4gIGl0ZW0uZmVhdHVyZXMuY2xlYXIoKTtcblxuICBpZiAoaXRlbS5yZXF1ZXN0RGVmZXJyZWQpIHtcbiAgICBpdGVtLnJlcXVlc3REZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgaXRlbS5yZXF1ZXN0RGVmZXJyZWQgPSBudWxsO1xuICB9XG5cbiAgaXRlbS5hY3RpdmUgPSBmYWxzZTtcbiAgdGhpcy5yZWZyZXNoU25hcHBpbmdTb3VyY2VfKCk7XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS5sb2FkQWxsSXRlbXNfID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm1hcFZpZXdDaGFuZ2VQcm9taXNlXyA9IG51bGw7XG4gIHZhciBpdGVtO1xuXG4gIGZvciAodmFyIHVpZCBpbiB0aGlzLmNhY2hlXykge1xuICAgIGl0ZW0gPSB0aGlzLmNhY2hlX1t1aWRdO1xuXG4gICAgaWYgKGl0ZW0uYWN0aXZlKSB7XG4gICAgICB0aGlzLmxvYWRJdGVtRmVhdHVyZXNfKGl0ZW0pO1xuICAgIH1cbiAgfVxufTtcblxuRWRpdGluZ1NuYXBwaW5nU2VydmljZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sb2FkQWxsSXRlbXNfKCk7XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS5sb2FkSXRlbUZlYXR1cmVzXyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gIGlmICghdGhpcy5tYXBfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICB9XG5cbiAgaWYgKGl0ZW0ucmVxdWVzdERlZmVycmVkKSB7XG4gICAgaXRlbS5yZXF1ZXN0RGVmZXJyZWQucmVzb2x2ZSgpO1xuICB9XG5cbiAgdmFyIG1hcCA9IHRoaXMubWFwXztcbiAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG5cbiAgaWYgKCFzaXplKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNpemUnKTtcbiAgfVxuXG4gIHZhciBleHRlbnQgPSB2aWV3LmNhbGN1bGF0ZUV4dGVudChzaXplKTtcbiAgdmFyIHByb2pDb2RlID0gdmlldy5nZXRQcm9qZWN0aW9uKCkuZ2V0Q29kZSgpO1xuICB2YXIgZmVhdHVyZVR5cGVzID0gaXRlbS53ZnNDb25maWcuZmVhdHVyZVR5cGVzLnNwbGl0KCcsJyk7XG4gIHZhciBnZXRGZWF0dXJlT3B0aW9ucyA9IHtcbiAgICBzcnNOYW1lOiBwcm9qQ29kZSxcbiAgICBmZWF0dXJlTlM6IGl0ZW0uZmVhdHVyZU5TLFxuICAgIGZlYXR1cmVQcmVmaXg6IGl0ZW0uZmVhdHVyZVByZWZpeCxcbiAgICBmZWF0dXJlVHlwZXM6IGZlYXR1cmVUeXBlcyxcbiAgICBvdXRwdXRGb3JtYXQ6ICdHTUwzJyxcbiAgICBiYm94OiBleHRlbnQsXG4gICAgZ2VvbWV0cnlOYW1lOiBERUZBVUxUX0dFT01FVFJZX05BTUUsXG4gICAgbWF4RmVhdHVyZXM6IGl0ZW0ubWF4RmVhdHVyZXNcbiAgfTtcbiAgdmFyIHdmc0Zvcm1hdCA9IG5ldyBvbEZvcm1hdFdGUygpO1xuICB2YXIgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG4gIHZhciBmZWF0dXJlUmVxdWVzdFhtbCA9IHdmc0Zvcm1hdC53cml0ZUdldEZlYXR1cmUoZ2V0RmVhdHVyZU9wdGlvbnMpO1xuICB2YXIgZmVhdHVyZVJlcXVlc3QgPSB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKGZlYXR1cmVSZXF1ZXN0WG1sKTtcbiAgdmFyIHVybCA9IGl0ZW0ud2ZzQ29uZmlnLnVybDtcbiAgaXRlbS5yZXF1ZXN0RGVmZXJyZWQgPSB0aGlzLnFfLmRlZmVyKCk7XG4gIHRoaXMuaHR0cF8ucG9zdCh1cmwsIGZlYXR1cmVSZXF1ZXN0LCB7XG4gICAgdGltZW91dDogaXRlbS5yZXF1ZXN0RGVmZXJyZWQucHJvbWlzZVxuICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIGl0ZW0ucmVxdWVzdERlZmVycmVkID0gbnVsbDtcbiAgICBpdGVtLmZlYXR1cmVzLmNsZWFyKCk7XG4gICAgdmFyIHJlYWRGZWF0dXJlcyA9IG5ldyBvbEZvcm1hdFdGUygpLnJlYWRGZWF0dXJlcyhyZXNwb25zZS5kYXRhKTtcblxuICAgIGlmIChyZWFkRmVhdHVyZXMpIHtcbiAgICAgIGl0ZW0uZmVhdHVyZXMuZXh0ZW5kKHJlYWRGZWF0dXJlcyk7XG5cbiAgICAgIF90aGlzNS5yZWZyZXNoU25hcHBpbmdTb3VyY2VfKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbkVkaXRpbmdTbmFwcGluZ1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZU1hcE1vdmVFbmRfID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5tYXBWaWV3Q2hhbmdlUHJvbWlzZV8pIHtcbiAgICB0aGlzLnRpbWVvdXRfLmNhbmNlbCh0aGlzLm1hcFZpZXdDaGFuZ2VQcm9taXNlXyk7XG4gIH1cblxuICB0aGlzLm1hcFZpZXdDaGFuZ2VQcm9taXNlXyA9IHRoaXMudGltZW91dF8odGhpcy5sb2FkQWxsSXRlbXNfLmJpbmQodGhpcyksIDQwMCk7XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS5yZWZyZXNoU25hcHBpbmdTb3VyY2VfID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5uZ2VvU25hcHBpbmdTb3VyY2VfID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLm5nZW9TbmFwcGluZ1NvdXJjZV8uY2xlYXIoKTtcblxuICBmb3IgKHZhciB1aWQgaW4gdGhpcy5jYWNoZV8pIHtcbiAgICB2YXIgaXRlbSA9IHRoaXMuY2FjaGVfW3VpZF07XG5cbiAgICBpZiAoaXRlbS5mZWF0dXJlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZXMnKTtcbiAgICB9XG5cbiAgICBpZiAoaXRlbS5hY3RpdmUpIHtcbiAgICAgIHRoaXMubmdlb1NuYXBwaW5nU291cmNlXy5hZGRGZWF0dXJlcyhpdGVtLmZlYXR1cmVzLmdldEFycmF5KCkpO1xuICAgIH1cbiAgfVxufTtcblxuRWRpdGluZ1NuYXBwaW5nU2VydmljZS5wcm90b3R5cGUuaGFuZGxlRmlsZUdyb3VwRGF0YVNvdXJjZXNDb2xsZWN0aW9uQWRkXyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKCEoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBmaWxlRGF0YVNvdXJjZSA9IGV2dC5lbGVtZW50O1xuXG4gIGlmICghKGZpbGVEYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VGaWxlKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBmZWF0dXJlcyA9IGZpbGVEYXRhU291cmNlLmZlYXR1cmVzQ29sbGVjdGlvbjtcbiAgdmFyIGdtZlNuYXBwaW5nQ29uZmlnID0gdGhpcy5nbWZTbmFwcGluZ0NvbmZpZ187XG4gIHZhciBpbnRlcmFjdGlvbiA9IG5ldyBDdXN0b21TbmFwKHtcbiAgICBlZGdlOiBnbWZTbmFwcGluZ0NvbmZpZy5lZGdlLFxuICAgIGZlYXR1cmVzOiBmZWF0dXJlcyxcbiAgICBwaXhlbFRvbGVyYW5jZTogZ21mU25hcHBpbmdDb25maWcudG9sZXJhbmNlLFxuICAgIHZlcnRleDogZ21mU25hcHBpbmdDb25maWcudmVydGV4XG4gIH0pO1xuICB2YXIgdmlzaWJsZVdhdGNoZXJVbnJlZ2lzdGVyID0gdGhpcy5yb290U2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZpbGVEYXRhU291cmNlLnZpc2libGU7XG4gIH0sIHRoaXMuaGFuZGxlRmlsZURhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXy5iaW5kKHRoaXMsIGZpbGVEYXRhU291cmNlKSk7XG4gIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQoZmlsZURhdGFTb3VyY2UpO1xuICB0aGlzLmNhY2hlRmlsZURhdGFTb3VyY2VfW3VpZF0gPSB7XG4gICAgYWN0aXZlOiBmYWxzZSxcbiAgICBmaWxlRGF0YVNvdXJjZTogZmlsZURhdGFTb3VyY2UsXG4gICAgaW50ZXJhY3Rpb246IGludGVyYWN0aW9uLFxuICAgIHZpc2libGVXYXRjaGVyVW5yZWdpc3RlcjogdmlzaWJsZVdhdGNoZXJVbnJlZ2lzdGVyXG4gIH07XG4gIHRoaXMuaGFuZGxlRmlsZURhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXyhmaWxlRGF0YVNvdXJjZSk7XG59O1xuXG5FZGl0aW5nU25hcHBpbmdTZXJ2aWNlLnByb3RvdHlwZS5oYW5kbGVGaWxlR3JvdXBEYXRhU291cmNlc0NvbGxlY3Rpb25SZW1vdmVfID0gZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoIShldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGZpbGVEYXRhU291cmNlID0gZXZ0LmVsZW1lbnQ7XG5cbiAgaWYgKCEoZmlsZURhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZUZpbGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZChmaWxlRGF0YVNvdXJjZSk7XG5cbiAgaWYgKCF0aGlzLmNhY2hlRmlsZURhdGFTb3VyY2VfW3VpZF0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaXRlbSA9IHRoaXMuY2FjaGVGaWxlRGF0YVNvdXJjZV9bdWlkXTtcbiAgdmFyIG1hcCA9IHRoaXMubWFwXztcbiAgaXRlbS52aXNpYmxlV2F0Y2hlclVucmVnaXN0ZXIoKTtcblxuICBpZiAoaXRlbS5hY3RpdmUpIHtcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oaXRlbS5pbnRlcmFjdGlvbik7XG4gIH1cblxuICBkZWxldGUgdGhpcy5jYWNoZUZpbGVEYXRhU291cmNlX1t1aWRdO1xufTtcblxuRWRpdGluZ1NuYXBwaW5nU2VydmljZS5wcm90b3R5cGUuaGFuZGxlRmlsZURhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXyA9IGZ1bmN0aW9uIChmaWxlRGF0YVNvdXJjZSkge1xuICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGZpbGVEYXRhU291cmNlKTtcbiAgdmFyIGl0ZW0gPSB0aGlzLmNhY2hlRmlsZURhdGFTb3VyY2VfW3VpZF07XG4gIHZhciB2aXNpYmxlID0gZmlsZURhdGFTb3VyY2UudmlzaWJsZTtcblxuICBpZiAoaXRlbS5hY3RpdmUgPT09IHZpc2libGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpdGVtLmFjdGl2ZSA9IHZpc2libGU7XG4gIHZhciBtYXAgPSB0aGlzLm1hcF87XG5cbiAgaWYgKHZpc2libGUpIHtcbiAgICBtYXAuYWRkSW50ZXJhY3Rpb24oaXRlbS5pbnRlcmFjdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKGl0ZW0uaW50ZXJhY3Rpb24pO1xuICB9XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mU25hcHBpbmcnLCBbZ21mRGF0YXNvdXJjZUZpbGVHcm91cC5uYW1lLCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlci5uYW1lLCBnbWZUaGVtZVRoZW1lcy5uYW1lLCBuZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlci5uYW1lXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCdnbWZTbmFwcGluZycsIEVkaXRpbmdTbmFwcGluZ1NlcnZpY2UpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTMgMTNcXFwiIHdpZHRoPVxcXCIxZW1cXFwiIGhlaWdodD1cXFwiMWVtXFxcIj48cGF0aCBkPVxcXCJNNi40NTggOS42M2MtMS41MjEuMDEtMi45MjUtMS4yNDYtMy4wNzItMi43NTgtLjE1Ni0xLjI3LjUzMy0yLjYwMyAxLjY4OS0zLjE2Mi45ODQtLjUwNiAyLjI0OC0uNDU0IDMuMTYuMTg0Ljk2Mi42NDIgMS41NDIgMS44NCAxLjM3MSAyLjk5OC0uMTQgMS4xMjEtLjkyMSAyLjE0LTEuOTg2IDIuNTMtLjM2OS4xNDMtLjc2NS4yMTctMS4xNjIuMjA5em0tLjAyNC0xLjEwMmMuOTk3LjA1MiAxLjk0OS0uNzQ4IDIuMDc1LTEuNzM2LjEyMy0uODQ5LS4zNDQtMS43NTYtMS4xMjQtMi4xMi0uODExLS4zOTUtMS44OTItLjE4MS0yLjQ1My41MzgtLjYwNy43MjItLjYxOSAxLjg4LjAxMSAyLjU5Mi4zNjYuNDMzLjkyMS43MTUgMS40OTEuNzI2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMjAgMjBcXFwiIHdpZHRoPVxcXCIxZW1cXFwiIGhlaWdodD1cXFwiMWVtXFxcIj48cGF0aCBkPVxcXCJNMTkuOTg0IDYuMjU2TDEwIDEuMjY0LjAxNiA2LjI1NiAxMCAxMS4yNDhsOS45ODQtNC45OTJ6TTEwIDIuOTIxbDYuNjcgMy4zMzVMMTAgOS41OTEgMy4zMyA2LjI1NiAxMCAyLjkyMXpNMTcuOTg0IDlsMiAuOTk5TDEwIDE0Ljk5Mi4wMTYgMTBsMi0xTDEwIDEyLjk5MnptMCAzLjc0M2wyIDFMMTAgMTguNzM2LjAxNiAxMy43NDRsMi0xTDEwIDE2LjczNnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE1IDE1XFxcIiB3aWR0aD1cXFwiMWVtXFxcIiBoZWlnaHQ9XFxcIjFlbVxcXCI+PHBhdGggZD1cXFwiTTUuMTExIDBjLS42OTIgMC0xLjM1OC4xMzgtMS45OS40MDdhNS4wNzYgNS4wNzYgMCAwMC0xLjYyNSAxLjA4OWMtLjQ1OC40NTctLjgyLjk5NC0xLjA5IDEuNjI2QTUuMDQ1IDUuMDQ1IDAgMDAwIDUuMTEyQzAgNS44MDIuMTM4IDYuNDY4LjQwNyA3LjFhNS4wNzYgNS4wNzYgMCAwMDEuMDg5IDEuNjI3Yy40NTcuNDU3Ljk5NC44MiAxLjYyNiAxLjA4OWE1LjA0NSA1LjA0NSAwIDAwMS45OS40MDZjMS4wNjQgMCAyLjAyMi0uMyAyLjg4OS0uOWwyLjQ5NyAyLjQ4M2EuODYyLjg2MiAwIDAwLjY1NC4yNzZjLjI1MSAwIC40NjktLjA5Mi42NTMtLjI3NmEuODkzLjg5MyAwIDAwLjI3Ni0uNjUzLjg4My44ODMgMCAwMC0uMjYxLS42NTRMOS4zMjIgOC4wMDFjLjMyNC0uNDY4LjU2My0uOTU2LjcxMi0xLjQ4MS0uMDAzLS4wMzQtLjAxNS0uMDctLjAxNS0uMTAyIDAtLjEwNC4wMzctLjIxMS4wNTgtLjMyaC0uMzM0Yy0uNDE3IDAtLjk0MS0uMjQ3LTEuMjA1LS41NTEtLjA2NS0uMDc1LS4xMzUtLjE1NC0uMTg5LS4yNDdhMy4xMDMgMy4xMDMgMCAwMS0uOTQ0IDIuMTA1Yy0uNjM2LjYzNy0xLjM5OS45NTgtMi4yOTQuOTU5LS44OTUgMC0xLjY1Ny0uMzIyLTIuMjk0LS45NTlzLS45NTgtMS4zOTktLjk1OC0yLjI5NC4zMjEtMS42NTcuOTU4LTIuMjk0IDEuMzk5LS45NTkgMi4yOTQtLjk1OGMuODk1IDAgMS42NTguMzIyIDIuMjk0Ljk1OC4zMTUuMzE1LjU2Ny42NTMuNzI2IDEuMDMuMDI0LS4zNzguMTgtLjc2OS40MDctMS4wM2ExLjc4IDEuNzggMCAwMS44NTctLjUwOCA1LjAwNiA1LjAwNiAwIDAwLS42NjgtLjgxM0E1LjA3NiA1LjA3NiAwIDAwNy4xLjQwNiA1LjA0NSA1LjA0NSAwIDAwNS4xMTEgMHpNMTUgNC4xODJxMCAuMjEtLjE0My4zNTNsLTIuNTI0IDIuNTI0cS0uMTUyLjE0My0uMzUzLjE0My0uMTk4IDAtLjM1LS4xNDNsLS4yOS0uMjkxcS0uMTQ3LS4xNDgtLjE0Ny0uMzUzdC4xNDctLjM1M2wxLjEzNi0xLjEzNmgtMi43M3EtLjIgMC0uMzI3LS4xNDUtLjEyNi0uMTQ2LS4xMjYtLjM1MXYtLjQ5NnEwLS4yMDYuMTI2LS4zNTEuMTI2LS4xNDYuMzI4LS4xNDZoMi43MjlsLTEuMTM2LTEuMTRxLS4xNDctLjEzOS0uMTQ3LS4zNDggMC0uMjEuMTQ3LS4zNWwuMjktLjI5cS4xNDgtLjE0Ny4zNS0uMTQ3LjIwNSAwIC4zNTMuMTQ3bDIuNTI0IDIuNTI0cS4xNDMuMTM2LjE0My4zNDl6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCA1MTIgNTEyXFxcIiB3aWR0aD1cXFwiMWVtXFxcIiBoZWlnaHQ9XFxcIjFlbVxcXCI+PGNpcmNsZSBjeD1cXFwiMjU2XFxcIiBjeT1cXFwiNDhcXFwiIHI9XFxcIjQ4XFxcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVxcXCIxMDkuMTdcXFwiIGN5PVxcXCIxMDguMzEzXFxcIiByPVxcXCI0M1xcXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cXFwiNDYuNTM3XFxcIiBjeT1cXFwiMjU3LjMyOFxcXCIgcj1cXFwiMzhcXFwiPjwvY2lyY2xlPjxjaXJjbGUgY3g9XFxcIjEwOC4wMjhcXFwiIGN5PVxcXCI0MDMuOTcyXFxcIiByPVxcXCIzM1xcXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cXFwiMjU1Ljc5NFxcXCIgY3k9XFxcIjQ2My45MzVcXFwiIHI9XFxcIjI4XFxcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVxcXCI0MDIuODk0XFxcIiBjeT1cXFwiNDAyLjkzNlxcXCIgcj1cXFwiMjNcXFwiPjwvY2lyY2xlPjxjaXJjbGUgY3g9XFxcIjQ2My42MjNcXFwiIGN5PVxcXCIyNTYuMTA2XFxcIiByPVxcXCIxOFxcXCI+PC9jaXJjbGU+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCA1MTIgNTEyXFxcIiB3aWR0aD1cXFwiMXJlbVxcXCIgaGVpZ2h0PVxcXCIxcmVtXFxcIj48Y2lyY2xlIGN4PVxcXCIyNTZcXFwiIGN5PVxcXCI0OFxcXCIgcj1cXFwiNDhcXFwiPjwvY2lyY2xlPjxjaXJjbGUgY3g9XFxcIjEwOS4xN1xcXCIgY3k9XFxcIjEwOC4zMTNcXFwiIHI9XFxcIjQzXFxcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVxcXCI0Ni41MzdcXFwiIGN5PVxcXCIyNTcuMzI4XFxcIiByPVxcXCIzOFxcXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cXFwiMTA4LjAyOFxcXCIgY3k9XFxcIjQwMy45NzJcXFwiIHI9XFxcIjMzXFxcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVxcXCIyNTUuNzk0XFxcIiBjeT1cXFwiNDYzLjkzNVxcXCIgcj1cXFwiMjhcXFwiPjwvY2lyY2xlPjxjaXJjbGUgY3g9XFxcIjQwMi44OTRcXFwiIGN5PVxcXCI0MDIuOTM2XFxcIiByPVxcXCIyM1xcXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cXFwiNDYzLjYyM1xcXCIgY3k9XFxcIjI1Ni4xMDZcXFwiIHI9XFxcIjE4XFxcIj48L2NpcmNsZT48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDUxMiA1MTJcXFwiIHdpZHRoPVxcXCIzcmVtXFxcIiBoZWlnaHQ9XFxcIjNyZW1cXFwiPjxjaXJjbGUgY3g9XFxcIjI1NlxcXCIgY3k9XFxcIjQ4XFxcIiByPVxcXCI0OFxcXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cXFwiMTA5LjE3XFxcIiBjeT1cXFwiMTA4LjMxM1xcXCIgcj1cXFwiNDNcXFwiPjwvY2lyY2xlPjxjaXJjbGUgY3g9XFxcIjQ2LjUzN1xcXCIgY3k9XFxcIjI1Ny4zMjhcXFwiIHI9XFxcIjM4XFxcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVxcXCIxMDguMDI4XFxcIiBjeT1cXFwiNDAzLjk3MlxcXCIgcj1cXFwiMzNcXFwiPjwvY2lyY2xlPjxjaXJjbGUgY3g9XFxcIjI1NS43OTRcXFwiIGN5PVxcXCI0NjMuOTM1XFxcIiByPVxcXCIyOFxcXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cXFwiNDAyLjg5NFxcXCIgY3k9XFxcIjQwMi45MzZcXFwiIHI9XFxcIjIzXFxcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVxcXCI0NjMuNjIzXFxcIiBjeT1cXFwiMjU2LjEwNlxcXCIgcj1cXFwiMThcXFwiPjwvY2lyY2xlPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTMgMTNcXFwiIHdpZHRoPVxcXCIxZW1cXFwiIGhlaWdodD1cXFwiMWVtXFxcIj48cGF0aCBkPVxcXCJNNi41MTMuNjE0bC02LjUgMy4yNSA2LjUgMy4yNSA2LjUtMy4yNS02LjUtMy4yNXptMCAxLjA3OGw0LjM0MiAyLjE3Mi00LjM0MiAyLjE3MkwyLjE3IDMuODY0bDQuMzQzLTIuMTcyem01LjE5OCA2LjM5NmwxLjMwMi42NS02LjUgMy4yNS02LjUtMy4yNSAxLjMwMi0uNjUgNS4xOTggMi42ek0xLjMxNSA1LjY1bC0xLjMwMi42NTEgMi4xMTQgMS4wNTcgMS4zLS42NXptMTAuMzk2IDBMOS41OTkgNi43MDhsMS4zMDIuNjUxIDIuMTEyLTEuMDU4ek04LjEyNyA3LjQ0M2wtMS42MTQuODA3LTEuMTM2LS41NjgtMS4zMDIuNjUgMi40MzggMS4yMiAyLjQzNy0xLjIyLTEuMy0uNjV6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJleHBvcnQgdmFyIERBVEFMQVlFUkdST1VQX05BTUUgPSAnZGF0YSc7XG5leHBvcnQgdmFyIEVYVEVSTkFMTEFZRVJHUk9VUF9OQU1FID0gJ2V4dGVybmFsJztcbmV4cG9ydCB2YXIgQ09PUkRJTkFURVNfTEFZRVJfTkFNRSA9ICdnbWZDb29yZGluYXRlc0xheWVyTmFtZSc7XG5leHBvcnQgdmFyIFBlcm1hbGlua1BhcmFtID0ge1xuICBCR19MQVlFUjogJ2Jhc2VsYXllcl9yZWYnLFxuICBCR19MQVlFUl9PUEFDSVRZOiAnYmFzZWxheWVyX29wYWNpdHknLFxuICBFWFRFUk5BTF9EQVRBU09VUkNFU19OQU1FUzogJ2Vkc19uJyxcbiAgRVhURVJOQUxfREFUQVNPVVJDRVNfVVJMUzogJ2Vkc191JyxcbiAgRkVBVFVSRVM6ICdybF9mZWF0dXJlcycsXG4gIE1BUF9DUk9TU0hBSVI6ICdtYXBfY3Jvc3NoYWlyJyxcbiAgTUFQX1NXSVBFOiAnbWFwX3N3aXBlJyxcbiAgTUFQX1NXSVBFX1ZBTFVFOiAnbWFwX3N3aXBlX3ZhbHVlJyxcbiAgTUFQX1RPT0xUSVA6ICdtYXBfdG9vbHRpcCcsXG4gIE1BUF9YOiAnbWFwX3gnLFxuICBNQVBfWTogJ21hcF95JyxcbiAgTUFQX1o6ICdtYXBfem9vbScsXG4gIFRSRUVfR1JPVVBTOiAndHJlZV9ncm91cHMnLFxuICBXRlNfTEFZRVI6ICd3ZnNfbGF5ZXInLFxuICBXRlNfTkdST1VQUzogJ3dmc19uZ3JvdXBzJyxcbiAgV0ZTX1NIT1dfRkVBVFVSRVM6ICd3ZnNfc2hvd0ZlYXR1cmVzJ1xufTsiLCJTeW5jTGF5ZXJ0cmVlTWFwLiRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCIsIFwibmdlb0xheWVySGVscGVyXCIsIFwibmdlb1dNU1RpbWVcIiwgXCJnbWZUaGVtZXNcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBnbWZUaGVtZVRoZW1lcywgeyBnZXROb2RlTWluUmVzb2x1dGlvbiwgZ2V0Tm9kZU1heFJlc29sdXRpb24gfSBmcm9tICdnbWYvdGhlbWUvVGhlbWVzLmpzJztcbmltcG9ydCBuZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlciwgeyBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24gfSBmcm9tICduZ2VvL2xheWVydHJlZS9Db250cm9sbGVyLmpzJztcbmltcG9ydCB7IERBVEFTT1VSQ0VfSUQsIExBWUVSX05PREVfTkFNRV9LRVksIE5PREVfSVNfTEVBRiB9IGZyb20gJ25nZW8vbWFwL0xheWVySGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY1dNU1RpbWUgZnJvbSAnbmdlby9taXNjL1dNU1RpbWUuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuaW1wb3J0IG9sTGF5ZXJJbWFnZSBmcm9tICdvbC9sYXllci9JbWFnZS5qcyc7XG5pbXBvcnQgb2xMYXllclRpbGUgZnJvbSAnb2wvbGF5ZXIvVGlsZS5qcyc7XG5pbXBvcnQgR3JvdXAgZnJvbSAnb2wvbGF5ZXIvR3JvdXAuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIFN5bmNMYXllcnRyZWVNYXAoJHJvb3RTY29wZSwgbmdlb0xheWVySGVscGVyLCBuZ2VvV01TVGltZSwgZ21mVGhlbWVzKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5sYXllckhlbHBlcl8gPSBuZ2VvTGF5ZXJIZWxwZXI7XG4gIHRoaXMubmdlb1dNU1RpbWVfID0gbmdlb1dNU1RpbWU7XG4gIHRoaXMub2djU2VydmVyc09iamVjdF8gPSBudWxsO1xuICBnbWZUaGVtZXMuZ2V0T2djU2VydmVyc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKG9nY1NlcnZlcnNPYmplY3QpIHtcbiAgICBfdGhpcy5vZ2NTZXJ2ZXJzT2JqZWN0XyA9IG9nY1NlcnZlcnNPYmplY3Q7XG4gIH0pO1xuICAkcm9vdFNjb3BlLiRvbignbmdlby1sYXllcnRyZWUtc3RhdGUnLCBmdW5jdGlvbiAobWFwLCB0cmVlQ3RybCwgZmlyc3RQYXJlbnQpIHtcbiAgICBfdGhpcy5zeW5jXyhmaXJzdFBhcmVudCk7XG4gIH0pO1xufVxuXG5TeW5jTGF5ZXJ0cmVlTWFwLnByb3RvdHlwZS5jcmVhdGVMYXllciA9IGZ1bmN0aW9uICh0cmVlQ3RybCwgbWFwLCBkYXRhTGF5ZXJHcm91cCwgb3B0X3Bvc2l0aW9uKSB7XG4gIHZhciBsYXllciA9IG51bGw7XG4gIHZhciBnbWZHcm91cCA9IHRyZWVDdHJsLm5vZGU7XG4gIHZhciBnbWZQYXJlbnRHcm91cCA9IHRyZWVDdHJsLnBhcmVudC5ub2RlO1xuXG4gIGlmIChnbWZHcm91cC5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkICYmIGdtZkdyb3VwLm1peGVkKSB7XG4gICAgbGF5ZXIgPSB0aGlzLmNyZWF0ZUdyb3VwXyh0cmVlQ3RybCwgbWFwLCBkYXRhTGF5ZXJHcm91cCwgb3B0X3Bvc2l0aW9uKTtcbiAgfSBlbHNlIGlmIChnbWZHcm91cC5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICYmIGdtZlBhcmVudEdyb3VwLm1peGVkKSB7XG4gICAgbGF5ZXIgPSB0aGlzLmNyZWF0ZUxlYWZJbkFNaXhlZEdyb3VwXyh0cmVlQ3RybCwgbWFwKTtcbiAgfSBlbHNlIGlmIChnbWZHcm91cC5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5pbml0R21mTGF5ZXJJbkFOb3RNaXhlZEdyb3VwXyh0cmVlQ3RybCwgbWFwKTtcbiAgfSBlbHNlIGlmICh0cmVlQ3RybC5kZXB0aCA9PT0gMSAmJiAhZ21mR3JvdXAubWl4ZWQpIHtcbiAgICBsYXllciA9IHRoaXMuY3JlYXRlR3JvdXBfKHRyZWVDdHJsLCBtYXAsIGRhdGFMYXllckdyb3VwLCBvcHRfcG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKGxheWVyICYmIHRyZWVDdHJsLm5vZGUubWV0YWRhdGEub3BhY2l0eSkge1xuICAgIGxheWVyLnNldE9wYWNpdHkodHJlZUN0cmwubm9kZS5tZXRhZGF0YS5vcGFjaXR5KTtcbiAgfVxuXG4gIHJldHVybiBsYXllcjtcbn07XG5cblN5bmNMYXllcnRyZWVNYXAucHJvdG90eXBlLnN5bmNfID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIHRyZWVDdHJsLnRyYXZlcnNlRGVwdGhGaXJzdChmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgICB2YXIgZ21mR3JvdXAgPSB0cmVlQ3RybC5ub2RlO1xuXG4gICAgaWYgKHRyZWVDdHJsLmxheWVyICYmICFnbWZHcm91cC5taXhlZCkge1xuICAgICAgX3RoaXMyLnVwZGF0ZUxheWVyU3RhdGVfKHRyZWVDdHJsLmxheWVyLCB0cmVlQ3RybCk7XG5cbiAgICAgIHJldHVybiBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24uREVTQ0VORDtcbiAgICB9XG4gIH0pO1xufTtcblxuU3luY0xheWVydHJlZU1hcC5wcm90b3R5cGUudXBkYXRlTGF5ZXJTdGF0ZV8gPSBmdW5jdGlvbiAobGF5ZXIsIHRyZWVDdHJsKSB7XG4gIHZhciBnbWZHcm91cCA9IHRyZWVDdHJsLm5vZGU7XG4gIHZhciBnbWZMYXllciA9IHRyZWVDdHJsLm5vZGU7XG4gIHZhciBhY3RpdmUgPSB0cmVlQ3RybC5nZXRTdGF0ZSgpID09PSAnb24nO1xuXG4gIGlmIChnbWZMYXllci50eXBlID09PSAnV01UUycpIHtcbiAgICBsYXllci5zZXRWaXNpYmxlKGFjdGl2ZSk7XG4gIH0gZWxzZSBpZiAoIWdtZkdyb3VwLm1peGVkICYmIHRyZWVDdHJsLmRlcHRoID09PSAxKSB7XG4gICAgaWYgKCEobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVySW1hZ2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGRhdGFTb3VyY2UgdHlwZScpO1xuICAgIH1cblxuICAgIHZhciBuYW1lcyA9IFtdO1xuICAgIHZhciBzdHlsZXMgPSBbXTtcbiAgICB0cmVlQ3RybC50cmF2ZXJzZURlcHRoRmlyc3QoZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gICAgICB2YXIgZ21mR3JvdXAgPSB0cmVlQ3RybC5ub2RlO1xuXG4gICAgICBpZiAoZ21mR3JvdXAuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCAmJiB0cmVlQ3RybC5nZXRTdGF0ZSgpID09PSAnb24nKSB7XG4gICAgICAgIHZhciBnbWZMYXllcldNUyA9IHRyZWVDdHJsLm5vZGU7XG4gICAgICAgIG5hbWVzLnB1c2goZ21mTGF5ZXJXTVMubGF5ZXJzKTtcbiAgICAgICAgdmFyIHN0eWxlID0gZ21mTGF5ZXJXTVMuc3R5bGUgIT09IHVuZGVmaW5lZCA/IGdtZkxheWVyV01TLnN0eWxlIDogJyc7XG4gICAgICAgIHN0eWxlcy5wdXNoKHN0eWxlKTtcbiAgICAgICAgcmV0dXJuIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5ERVNDRU5EO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKG5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgbGF5ZXIuZ2V0U291cmNlKCkudXBkYXRlUGFyYW1zKHtcbiAgICAgICdMQVlFUlMnOiBuYW1lcy5yZXZlcnNlKCkuam9pbignLCcpLFxuICAgICAgJ1NUWUxFUyc6IHN0eWxlcy5yZXZlcnNlKCkuam9pbignLCcpXG4gICAgfSk7XG5cbiAgICBpZiAobmFtZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICBsYXllci5zZXRWaXNpYmxlKHRydWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoIShsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJJbWFnZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZGF0YVNvdXJjZSB0eXBlJyk7XG4gICAgfVxuXG4gICAgbGF5ZXIuc2V0VmlzaWJsZShhY3RpdmUpO1xuICB9XG59O1xuXG5TeW5jTGF5ZXJ0cmVlTWFwLnByb3RvdHlwZS5jcmVhdGVHcm91cF8gPSBmdW5jdGlvbiAodHJlZUN0cmwsIG1hcCwgZGF0YUxheWVyR3JvdXAsIG9wdF9wb3NpdGlvbikge1xuICB2YXIgZ3JvdXBOb2RlID0gdHJlZUN0cmwubm9kZTtcbiAgdmFyIGxheWVyID0gbnVsbDtcbiAgdmFyIGlzRmlyc3RMZXZlbEdyb3VwID0gdHJlZUN0cmwucGFyZW50LmlzUm9vdDtcbiAgdmFyIHByaW50TmF0aXZlQW5nbGUgPSB0cnVlO1xuXG4gIGlmIChncm91cE5vZGUubWV0YWRhdGEucHJpbnROYXRpdmVBbmdsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcHJpbnROYXRpdmVBbmdsZSA9IGdyb3VwTm9kZS5tZXRhZGF0YS5wcmludE5hdGl2ZUFuZ2xlO1xuICB9XG5cbiAgaWYgKGlzRmlyc3RMZXZlbEdyb3VwKSB7XG4gICAgbGF5ZXIgPSB0aGlzLmNyZWF0ZUxheWVyRnJvbUdyb3VwXyh0cmVlQ3RybCwgISFncm91cE5vZGUubWl4ZWQpO1xuICAgIHZhciBwb3NpdGlvbiA9IG9wdF9wb3NpdGlvbiB8fCAwO1xuICAgIGRhdGFMYXllckdyb3VwLmdldExheWVycygpLmluc2VydEF0KHBvc2l0aW9uLCBsYXllcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGluQU1peGVkR3JvdXAgPSAhdGhpcy5pc09uZVBhcmVudE5vdE1peGVkXyh0cmVlQ3RybCk7XG5cbiAgICBpZiAoaW5BTWl4ZWRHcm91cCkge1xuICAgICAgbGF5ZXIgPSB0aGlzLmNyZWF0ZUxheWVyRnJvbUdyb3VwXyh0cmVlQ3RybCwgdHJ1ZSk7XG4gICAgICB2YXIgbGF5ZXJHcm91cCA9IGdldExheWVyKHRyZWVDdHJsLnBhcmVudCk7XG5cbiAgICAgIGlmICghKGxheWVyR3JvdXAgaW5zdGFuY2VvZiBHcm91cCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBsYXllckdyb3VwIHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgbGF5ZXJHcm91cC5nZXRMYXllcnMoKS5pbnNlcnRBdCgwLCBsYXllcik7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFsYXllcikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBsYXllcicpO1xuICB9XG5cbiAgbGF5ZXIuc2V0KCdwcmludE5hdGl2ZUFuZ2xlJywgcHJpbnROYXRpdmVBbmdsZSk7XG4gIHJldHVybiBsYXllcjtcbn07XG5cblN5bmNMYXllcnRyZWVNYXAucHJvdG90eXBlLmNyZWF0ZUxheWVyRnJvbUdyb3VwXyA9IGZ1bmN0aW9uICh0cmVlQ3RybCwgbWl4ZWQpIHtcbiAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgdmFyIGxheWVyO1xuICB2YXIgZ3JvdXBOb2RlID0gdHJlZUN0cmwubm9kZTtcblxuICBpZiAobWl4ZWQpIHtcbiAgICBsYXllciA9IHRoaXMubGF5ZXJIZWxwZXJfLmNyZWF0ZUJhc2ljR3JvdXAoKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIXRoaXMub2djU2VydmVyc09iamVjdF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBvZ2NTZXJ2ZXJzT2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgdmFyIHRpbWVQYXJhbSA9IHRoaXMuZ2V0VGltZVBhcmFtXyh0cmVlQ3RybCk7XG4gICAgdmFyIG9nY1NlcnZlciA9IHRoaXMub2djU2VydmVyc09iamVjdF9bZ3JvdXBOb2RlLm9nY1NlcnZlciB8fCAnJ107XG5cbiAgICBpZiAoIW9nY1NlcnZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9nY1NlcnZlcicpO1xuICAgIH1cblxuICAgIGlmICghb2djU2VydmVyLnVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9nY1NlcnZlci51cmwnKTtcbiAgICB9XG5cbiAgICBpZiAoIW9nY1NlcnZlci50eXBlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgb2djU2VydmVyLnR5cGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIW9nY1NlcnZlci5pbWFnZVR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBvZ2NTZXJ2ZXIuaW1hZ2VUeXBlJyk7XG4gICAgfVxuXG4gICAgbGF5ZXIgPSB0aGlzLmxheWVySGVscGVyXy5jcmVhdGVCYXNpY1dNU0xheWVyKG9nY1NlcnZlci51cmwsICcnLCBvZ2NTZXJ2ZXIuaW1hZ2VUeXBlLCBvZ2NTZXJ2ZXIudHlwZSwgdGltZVBhcmFtLCB1bmRlZmluZWQsIG9nY1NlcnZlci5jcmVkZW50aWFsID8gJ3VzZS1jcmVkZW50aWFscycgOiAnYW5vbnltb3VzJywgdW5kZWZpbmVkKTtcbiAgICBsYXllci5zZXQoREFUQVNPVVJDRV9JRCwgZ3JvdXBOb2RlLmlkKTtcbiAgICB2YXIgaGFzQWN0aXZlQ2hpbGRyZW4gPSBmYWxzZTtcbiAgICB0cmVlQ3RybC50cmF2ZXJzZURlcHRoRmlyc3QoZnVuY3Rpb24gKGN0cmwpIHtcbiAgICAgIF90aGlzMy51cGRhdGVMYXllclJlZmVyZW5jZXNfKGN0cmwubm9kZSwgbGF5ZXIpO1xuXG4gICAgICBpZiAoY3RybC5ub2RlLm1ldGFkYXRhLmlzQ2hlY2tlZCkge1xuICAgICAgICBjdHJsLnNldFN0YXRlKCdvbicsIGZhbHNlKTtcblxuICAgICAgICBfdGhpczMudXBkYXRlTGF5ZXJTdGF0ZV8obGF5ZXIsIGN0cmwpO1xuXG4gICAgICAgIGhhc0FjdGl2ZUNoaWxkcmVuID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5ERVNDRU5EO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxheWVyLnNldFZpc2libGUoaGFzQWN0aXZlQ2hpbGRyZW4pO1xuICB9XG5cbiAgbGF5ZXIuc2V0KExBWUVSX05PREVfTkFNRV9LRVksIGdyb3VwTm9kZS5uYW1lKTtcbiAgcmV0dXJuIGxheWVyO1xufTtcblxuU3luY0xheWVydHJlZU1hcC5wcm90b3R5cGUuY3JlYXRlTGVhZkluQU1peGVkR3JvdXBfID0gZnVuY3Rpb24gKHRyZWVDdHJsLCBtYXApIHtcbiAgdmFyIGdtZkxheWVyID0gdHJlZUN0cmwubm9kZTtcbiAgdmFyIGxheWVyO1xuXG4gIGlmIChnbWZMYXllci50eXBlID09PSAnV01UUycpIHtcbiAgICBsYXllciA9IHRoaXMuY3JlYXRlV01UU0xheWVyXyhnbWZMYXllcik7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCF0aGlzLm9nY1NlcnZlcnNPYmplY3RfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgb2djU2VydmVyc09iamVjdCcpO1xuICAgIH1cblxuICAgIHZhciBnbWZMYXllcldNUyA9IGdtZkxheWVyO1xuICAgIHZhciB0aW1lUGFyYW0gPSB0aGlzLmdldFRpbWVQYXJhbV8odHJlZUN0cmwpO1xuICAgIHZhciBvZ2NTZXJ2ZXIgPSB0aGlzLm9nY1NlcnZlcnNPYmplY3RfW2dtZkxheWVyV01TLm9nY1NlcnZlcl07XG5cbiAgICBpZiAoIW9nY1NlcnZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9nY1NlcnZlcicpO1xuICAgIH1cblxuICAgIGlmICghb2djU2VydmVyLnVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9nY1NlcnZlci51cmwnKTtcbiAgICB9XG5cbiAgICBpZiAoIW9nY1NlcnZlci50eXBlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgb2djU2VydmVyLnR5cGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIW9nY1NlcnZlci5pbWFnZVR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBvZ2NTZXJ2ZXIuaW1hZ2VUeXBlJyk7XG4gICAgfVxuXG4gICAgaWYgKCFnbWZMYXllcldNUy5sYXllcnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnbWZMYXllcldNUy5sYXllcnMnKTtcbiAgICB9XG5cbiAgICB2YXIgb3B0X3BhcmFtcyA9IHtcbiAgICAgIFNUWUxFUzogZ21mTGF5ZXJXTVMuc3R5bGVcbiAgICB9O1xuICAgIGxheWVyID0gdGhpcy5sYXllckhlbHBlcl8uY3JlYXRlQmFzaWNXTVNMYXllcihvZ2NTZXJ2ZXIudXJsLCBnbWZMYXllcldNUy5sYXllcnMsIG9nY1NlcnZlci5pbWFnZVR5cGUsIG9nY1NlcnZlci50eXBlLCB0aW1lUGFyYW0sIG9wdF9wYXJhbXMsIG9nY1NlcnZlci5jcmVkZW50aWFsID8gJ3VzZS1jcmVkZW50aWFscycgOiAnYW5vbnltb3VzJyk7XG4gIH1cblxuICBsYXllci5zZXQoREFUQVNPVVJDRV9JRCwgZ21mTGF5ZXIuaWQpO1xuICBsYXllci5zZXQoTEFZRVJfTk9ERV9OQU1FX0tFWSwgZ21mTGF5ZXIubmFtZSk7XG4gIGxheWVyLnNldChOT0RFX0lTX0xFQUYsIHRydWUpO1xuICB0aGlzLnVwZGF0ZUxheWVyUmVmZXJlbmNlc18oZ21mTGF5ZXIsIGxheWVyKTtcbiAgdmFyIGNoZWNrZWQgPSBnbWZMYXllci5tZXRhZGF0YS5pc0NoZWNrZWQgPT09IHRydWU7XG5cbiAgaWYgKGNoZWNrZWQpIHtcbiAgICB0cmVlQ3RybC5zZXRTdGF0ZSgnb24nLCBmYWxzZSk7XG4gIH1cblxuICBsYXllci5zZXRWaXNpYmxlKGNoZWNrZWQpO1xuICB2YXIgbGF5ZXJHcm91cCA9IGdldExheWVyKHRyZWVDdHJsLnBhcmVudCk7XG4gIGxheWVyR3JvdXAuZ2V0TGF5ZXJzKCkuaW5zZXJ0QXQoMCwgbGF5ZXIpO1xuICByZXR1cm4gbGF5ZXI7XG59O1xuXG5TeW5jTGF5ZXJ0cmVlTWFwLnByb3RvdHlwZS5pbml0R21mTGF5ZXJJbkFOb3RNaXhlZEdyb3VwXyA9IGZ1bmN0aW9uICh0cmVlQ3RybCwgbWFwKSB7XG4gIHZhciBsZWFmTm9kZSA9IHRyZWVDdHJsLm5vZGU7XG4gIHZhciBmaXJzdExldmVsR3JvdXAgPSB0aGlzLmdldEZpcnN0TGV2ZWxHcm91cEN0cmxfKHRyZWVDdHJsKTtcblxuICBpZiAoIWZpcnN0TGV2ZWxHcm91cCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmaXJzdExldmVsR3JvdXAnKTtcbiAgfVxuXG4gIHZhciBsYXllciA9IGZpcnN0TGV2ZWxHcm91cC5sYXllcjtcblxuICBpZiAoIShsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJJbWFnZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGxheWVyIHR5cGUnKTtcbiAgfVxuXG4gIGlmICghKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckltYWdlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZGF0YVNvdXJjZSB0eXBlJyk7XG4gIH1cblxuICB0aGlzLnVwZGF0ZUxheWVyUmVmZXJlbmNlc18obGVhZk5vZGUsIGxheWVyKTtcblxuICBpZiAobGVhZk5vZGUubWV0YWRhdGEuaXNDaGVja2VkKSB7XG4gICAgdHJlZUN0cmwuc2V0U3RhdGUoJ29uJywgZmFsc2UpO1xuICAgIHRoaXMudXBkYXRlTGF5ZXJTdGF0ZV8obGF5ZXIsIGZpcnN0TGV2ZWxHcm91cCk7XG4gIH0gZWxzZSB7XG4gICAgdHJlZUN0cmwucGFyZW50LnJlZnJlc2hTdGF0ZSgpO1xuICB9XG59O1xuXG5TeW5jTGF5ZXJ0cmVlTWFwLnByb3RvdHlwZS5jcmVhdGVXTVRTTGF5ZXJfID0gZnVuY3Rpb24gKGdtZkxheWVyV01UUykge1xuICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICB2YXIgbmV3TGF5ZXIgPSBuZXcgb2xMYXllclRpbGUoKTtcblxuICBpZiAoIWdtZkxheWVyV01UUy51cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ21mTGF5ZXJXTVRTLnVybCcpO1xuICB9XG5cbiAgaWYgKCFnbWZMYXllcldNVFMubGF5ZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ21mTGF5ZXJXTVRTLmxheWVyJyk7XG4gIH1cblxuICB2YXIgbWluUmVzb2x1dGlvbiA9IGdldE5vZGVNaW5SZXNvbHV0aW9uKGdtZkxheWVyV01UUyk7XG4gIHZhciBtYXhSZXNvbHV0aW9uID0gZ2V0Tm9kZU1heFJlc29sdXRpb24oZ21mTGF5ZXJXTVRTKTtcbiAgdGhpcy5sYXllckhlbHBlcl8uY3JlYXRlV01UU0xheWVyRnJvbUNhcGFiaWxpdGl0ZXMoZ21mTGF5ZXJXTVRTLnVybCwgZ21mTGF5ZXJXTVRTLmxheWVyLCBnbWZMYXllcldNVFMubWF0cml4U2V0LCBnbWZMYXllcldNVFMuZGltZW5zaW9ucywgdW5kZWZpbmVkLCBtaW5SZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uLCBnbWZMYXllcldNVFMubWV0YWRhdGEub3BhY2l0eSkudGhlbihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICBfdGhpczQubGF5ZXJIZWxwZXJfLmNvcHlQcm9wZXJ0aWVzKGxheWVyLCBuZXdMYXllciwgWyd2aXNpYmxlJ10pO1xuICB9KTtcbiAgcmV0dXJuIG5ld0xheWVyO1xufTtcblxuU3luY0xheWVydHJlZU1hcC5wcm90b3R5cGUudXBkYXRlTGF5ZXJSZWZlcmVuY2VzXyA9IGZ1bmN0aW9uIChub2RlLCBsYXllcikge1xuICB2YXIgaWQgPSBvbFV0aWxHZXRVaWQobm9kZSk7XG4gIHZhciBxdWVyeVNvdXJjZUlkcyA9IGxheWVyLmdldCgncXVlcnlTb3VyY2VJZHMnKSB8fCBbXTtcbiAgcXVlcnlTb3VyY2VJZHMucHVzaChpZCk7XG4gIGxheWVyLnNldCgncXVlcnlTb3VyY2VJZHMnLCBxdWVyeVNvdXJjZUlkcyk7XG4gIHZhciBkaXNjbGFpbWVyID0gbm9kZS5tZXRhZGF0YS5kaXNjbGFpbWVyO1xuXG4gIGlmIChkaXNjbGFpbWVyKSB7XG4gICAgdmFyIGRpc2NsYWltZXJzID0gbGF5ZXIuZ2V0KCdkaXNjbGFpbWVycycpIHx8IHt9O1xuICAgIHZhciBsYXllcnMgPSAnYWxsJztcblxuICAgIGlmICgnbGF5ZXJzJyBpbiBub2RlKSB7XG4gICAgICBsYXllcnMgPSBub2RlLmxheWVycztcbiAgICB9XG5cbiAgICBkaXNjbGFpbWVyc1tsYXllcnNdID0gZGlzY2xhaW1lcjtcbiAgICBsYXllci5zZXQoJ2Rpc2NsYWltZXJzJywgZGlzY2xhaW1lcnMpO1xuICB9XG59O1xuXG5TeW5jTGF5ZXJ0cmVlTWFwLnByb3RvdHlwZS5nZXRUaW1lUGFyYW1fID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciB3bXNUaW1lO1xuICB2YXIgdGltZVBhcmFtO1xuICB2YXIgbm9kZSA9IHRyZWVDdHJsLm5vZGU7XG5cbiAgaWYgKG5vZGUudGltZSkge1xuICAgIHdtc1RpbWUgPSBub2RlLnRpbWU7XG4gIH0gZWxzZSBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgIHRyZWVDdHJsLnRyYXZlcnNlRGVwdGhGaXJzdChmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgICAgIHZhciBub2RlID0gdHJlZUN0cmwubm9kZTtcblxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCAmJiBub2RlLnRpbWUpIHtcbiAgICAgICAgd21zVGltZSA9IG5vZGUudGltZTtcbiAgICAgICAgcmV0dXJuIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5TVE9QO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHdtc1RpbWUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMubmdlb1dNU1RpbWVfLmdldE9wdGlvbnMod21zVGltZSk7XG4gICAgdmFyIHRpbWVWYWx1ZSA9IG9wdGlvbnMudmFsdWVzO1xuICAgIHZhciB0aW1lVmFsdWVzID0gb3B0aW9ucy52YWx1ZXM7XG4gICAgdGltZVBhcmFtID0gdGhpcy5uZ2VvV01TVGltZV8uZm9ybWF0V01TVGltZVBhcmFtKHdtc1RpbWUsIHtcbiAgICAgIHN0YXJ0OiB0aW1lVmFsdWVzWzBdIHx8IHRpbWVWYWx1ZSxcbiAgICAgIGVuZDogdGltZVZhbHVlc1sxXVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRpbWVQYXJhbTtcbn07XG5cblN5bmNMYXllcnRyZWVNYXAucHJvdG90eXBlLmlzT25lUGFyZW50Tm90TWl4ZWRfID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciB0cmVlID0gdHJlZUN0cmwucGFyZW50O1xuICB2YXIgaXNPbmVQYXJlbnROb3RNaXggPSBmYWxzZTtcblxuICBkbyB7XG4gICAgdmFyIGdtZkdyb3VwID0gdHJlZS5ub2RlO1xuICAgIGlzT25lUGFyZW50Tm90TWl4ID0gZ21mR3JvdXAubWl4ZWQgPT09IGZhbHNlO1xuICAgIHRyZWUgPSB0cmVlLnBhcmVudDtcbiAgfSB3aGlsZSAodHJlZS5wYXJlbnQgJiYgIWlzT25lUGFyZW50Tm90TWl4KTtcblxuICByZXR1cm4gaXNPbmVQYXJlbnROb3RNaXg7XG59O1xuXG5TeW5jTGF5ZXJ0cmVlTWFwLnByb3RvdHlwZS5nZXRGaXJzdExldmVsR3JvdXBDdHJsXyA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgdHJlZSA9IHRyZWVDdHJsO1xuXG4gIHdoaWxlICghdHJlZS5wYXJlbnQuaXNSb290KSB7XG4gICAgdHJlZSA9IHRyZWUucGFyZW50O1xuICB9XG5cbiAgcmV0dXJuIHRyZWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF5ZXIodHJlZUN0cmwpIHtcbiAgdmFyIHRyZWUgPSB0cmVlQ3RybDtcbiAgdmFyIGxheWVyID0gbnVsbDtcblxuICB3aGlsZSAoIXRyZWUuaXNSb290ICYmIGxheWVyID09PSBudWxsKSB7XG4gICAgaWYgKHRyZWUubGF5ZXIpIHtcbiAgICAgIGxheWVyID0gdHJlZS5sYXllcjtcbiAgICB9XG5cbiAgICB0cmVlID0gdHJlZS5wYXJlbnQ7XG4gIH1cblxuICBpZiAoIWxheWVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxheWVyJyk7XG4gIH1cblxuICByZXR1cm4gbGF5ZXI7XG59XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mU3luY0xheWVydHJlZU1hcCcsIFtnbWZUaGVtZVRoZW1lcy5uYW1lLCBuZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlci5uYW1lLCBuZ2VvTWlzY1dNU1RpbWUubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnZ21mU3luY0xheWVydHJlZU1hcCcsIFN5bmNMYXllcnRyZWVNYXApO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiTGF5ZXJ0cmVlVHJlZU1hbmFnZXIuJGluamVjdCA9IFtcIiR0aW1lb3V0XCIsIFwiJGluamVjdG9yXCIsIFwiZ2V0dGV4dENhdGFsb2dcIiwgXCJuZ2VvTGF5ZXJIZWxwZXJcIiwgXCJuZ2VvTm90aWZpY2F0aW9uXCIsIFwiZ21mVGhlbWVzXCIsIFwibmdlb1N0YXRlTWFuYWdlclwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgUGVybWFsaW5rUGFyYW0gfSBmcm9tICdnbWYvaW5kZXguanMnO1xuaW1wb3J0IGdtZlRoZW1lVGhlbWVzLCB7IGZpbmRHcm91cEJ5TmFtZSwgZmluZEdyb3VwQnlMYXllck5vZGVOYW1lIH0gZnJvbSAnZ21mL3RoZW1lL1RoZW1lcy5qcyc7XG5pbXBvcnQgbmdlb0xheWVydHJlZUNvbnRyb2xsZXIsIHsgTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uLCBMYXllcnRyZWVDb250cm9sbGVyIH0gZnJvbSAnbmdlby9sYXllcnRyZWUvQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gJ25nZW8vbWVzc2FnZS9NZXNzYWdlLmpzJztcbmltcG9ydCBuZ2VvTWVzc2FnZU5vdGlmaWNhdGlvbiBmcm9tICduZ2VvL21lc3NhZ2UvTm90aWZpY2F0aW9uLmpzJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyU2VydmljZSBmcm9tICduZ2VvL3N0YXRlbWFuYWdlci9TZXJ2aWNlLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gTGF5ZXJ0cmVlVHJlZU1hbmFnZXIoJHRpbWVvdXQsICRpbmplY3RvciwgZ2V0dGV4dENhdGFsb2csIG5nZW9MYXllckhlbHBlciwgbmdlb05vdGlmaWNhdGlvbiwgZ21mVGhlbWVzLCBuZ2VvU3RhdGVNYW5hZ2VyKSB7XG4gIHRoaXMuJHRpbWVvdXRfID0gJHRpbWVvdXQ7XG4gIHRoaXMuJGluamVjdG9yXyA9ICRpbmplY3RvcjtcbiAgdGhpcy5nZXR0ZXh0Q2F0YWxvZ18gPSBnZXR0ZXh0Q2F0YWxvZztcbiAgdGhpcy5sYXllckhlbHBlcl8gPSBuZ2VvTGF5ZXJIZWxwZXI7XG4gIHRoaXMubmdlb05vdGlmaWNhdGlvbl8gPSBuZ2VvTm90aWZpY2F0aW9uO1xuICB0aGlzLmdtZlRoZW1lc18gPSBnbWZUaGVtZXM7XG4gIHRoaXMucm9vdCA9IHtcbiAgICBjaGlsZHJlbjogW11cbiAgfTtcbiAgdGhpcy5yb290Q3RybCA9IG51bGw7XG4gIHRoaXMubnVtYmVyT2ZHcm91cHNUb0FkZEluVGhpc0RpZ2VzdExvb3AgPSAwO1xuICB0aGlzLmdyb3Vwc1RvQWRkSW5UaGlzRGlnZXN0TG9vcF8gPSBbXTtcbiAgdGhpcy5wcm9taXNlRm9yR3JvdXBzVG9BZGRJblRoaXNEaWdlc3RMb29wXyA9IG51bGw7XG4gIHRoaXMubmdlb1N0YXRlTWFuYWdlcl8gPSBuZ2VvU3RhdGVNYW5hZ2VyO1xuICB0aGlzLmluaXRpYWxMZXZlbEZpcnN0R3JvdXBzXyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5vZ2NTZXJ2ZXJzXyA9IG51bGw7XG4gIGxpc3Rlbih0aGlzLmdtZlRoZW1lc18sICdjaGFuZ2UnLCB0aGlzLmhhbmRsZVRoZW1lc0NoYW5nZV8sIHRoaXMpO1xufVxuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUuaGFuZGxlVGhlbWVzQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLmdtZlRoZW1lc18uZ2V0T2djU2VydmVyc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKG9nY1NlcnZlcnMpIHtcbiAgICBfdGhpcy5vZ2NTZXJ2ZXJzXyA9IG9nY1NlcnZlcnM7XG4gIH0pO1xuXG4gIGlmICh0aGlzLnJvb3RDdHJsICYmIHRoaXMucm9vdEN0cmwuY2hpbGRyZW4pIHtcbiAgICB0aGlzLmdtZlRoZW1lc18uZ2V0VGhlbWVzT2JqZWN0KCkudGhlbihmdW5jdGlvbiAodGhlbWVzKSB7XG4gICAgICBfdGhpcy5yZWZyZXNoRmlyc3RMZXZlbEdyb3Vwc18odGhlbWVzKTtcbiAgICB9KTtcbiAgfVxufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLnNldEZpcnN0TGV2ZWxHcm91cHMgPSBmdW5jdGlvbiAoZmlyc3RMZXZlbEdyb3Vwcykge1xuICB0aGlzLnBhcnNlVHJlZU5vZGVzKHRoaXMucm9vdCk7XG4gIHRoaXMucm9vdC5jaGlsZHJlbi5sZW5ndGggPSAwO1xuICB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLmRlbGV0ZVBhcmFtKFBlcm1hbGlua1BhcmFtLlRSRUVfR1JPVVBTKTtcbiAgcmV0dXJuIHRoaXMuYWRkRmlyc3RMZXZlbEdyb3VwcyhmaXJzdExldmVsR3JvdXBzKTtcbn07XG5cbkxheWVydHJlZVRyZWVNYW5hZ2VyLnByb3RvdHlwZS5hZGRGaXJzdExldmVsR3JvdXBzID0gZnVuY3Rpb24gKGZpcnN0TGV2ZWxHcm91cHMsIG9wdF9hZGQsIG9wdF9zaWxlbnQpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgdmFyIGdyb3VwTm90QWRkZWQgPSBbXTtcbiAgZmlyc3RMZXZlbEdyb3Vwcy5zbGljZSgpLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkge1xuICAgIGlmICghX3RoaXMyLmFkZEZpcnN0TGV2ZWxHcm91cF8oZ3JvdXApKSB7XG4gICAgICBncm91cE5vdEFkZGVkLnB1c2goZ3JvdXApO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGdyb3VwTm90QWRkZWQubGVuZ3RoID4gMCAmJiAhb3B0X3NpbGVudCkge1xuICAgIHRoaXMubm90aWZ5Q2FudEFkZEdyb3Vwc18oZ3JvdXBOb3RBZGRlZCk7XG4gIH1cblxuICByZXR1cm4gZ3JvdXBOb3RBZGRlZC5sZW5ndGggPT09IDA7XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUuc2V0SW5pdGlhbEZpcnN0TGV2ZWxHcm91cHMgPSBmdW5jdGlvbiAoZmlyc3RHcm91cHMpIHtcbiAgdGhpcy5pbml0aWFsTGV2ZWxGaXJzdEdyb3Vwc18gPSBmaXJzdEdyb3Vwcztcbn07XG5cbkxheWVydHJlZVRyZWVNYW5hZ2VyLnByb3RvdHlwZS5wYXJzZVRyZWVOb2RlcyA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gIHZhciBncm91cCA9IG5vZGU7XG5cbiAgaWYgKGdyb3VwLmNoaWxkcmVuKSB7XG4gICAgZ3JvdXAuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIF90aGlzMy5wYXJzZVRyZWVOb2RlcyhjaGlsZCk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoZ3JvdXAucG9wdXBJZCkge1xuICAgIHRoaXMucmVtb3ZlUG9wdXBfKGdyb3VwKTtcbiAgfVxufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLnJlbW92ZVBvcHVwXyA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIHZhciBwb3B1cElkID0gbm9kZS5wb3B1cElkO1xuICAkKFwiI1wiICsgcG9wdXBJZCkucmVtb3ZlKCk7XG4gIGRlbGV0ZSBub2RlLnBvcHVwSWQ7XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUucmVvcmRlckNoaWxkXyA9IGZ1bmN0aW9uIChhcnJheSwgb2xkX2luZGV4LCBuZXdfaW5kZXgpIHtcbiAgYXJyYXkuc3BsaWNlKG5ld19pbmRleCwgMCwgYXJyYXkuc3BsaWNlKG9sZF9pbmRleCwgMSlbMF0pO1xufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVRyZWVHcm91cHNTdGF0ZV8gPSBmdW5jdGlvbiAoZ3JvdXBzKSB7XG4gIHZhciB0cmVlR3JvdXBzUGFyYW0gPSB7fTtcbiAgdHJlZUdyb3Vwc1BhcmFtW1Blcm1hbGlua1BhcmFtLlRSRUVfR1JPVVBTXSA9IGdyb3Vwcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5uYW1lO1xuICB9KS5qb2luKCcsJyk7XG4gIHRoaXMubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUodHJlZUdyb3Vwc1BhcmFtKTtcblxuICBpZiAodGhpcy4kaW5qZWN0b3JfLmhhcygnZ21mUGVybWFsaW5rJykpIHtcbiAgICB0aGlzLiRpbmplY3Rvcl8uZ2V0KCdnbWZQZXJtYWxpbmsnKS5jbGVhblBhcmFtcyhncm91cHMpO1xuICB9XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUuYWRkRmlyc3RMZXZlbEdyb3VwXyA9IGZ1bmN0aW9uIChncm91cCkge1xuICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICB2YXIgYWxyZWFkeUFkZGVkID0gZmFsc2U7XG4gIHZhciBncm91cElEID0gZ3JvdXAuaWQ7XG4gIHRoaXMucm9vdC5jaGlsZHJlbi5zb21lKGZ1bmN0aW9uIChyb290Q2hpbGQpIHtcbiAgICBpZiAoZ3JvdXBJRCA9PT0gcm9vdENoaWxkLmlkKSB7XG4gICAgICBhbHJlYWR5QWRkZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LCB0aGlzKTtcbiAgdGhpcy5ncm91cHNUb0FkZEluVGhpc0RpZ2VzdExvb3BfLnNvbWUoZnVuY3Rpb24gKGdycCkge1xuICAgIGlmIChncm91cElEID09PSBncnAuaWQpIHtcbiAgICAgIGFscmVhZHlBZGRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sIHRoaXMpO1xuXG4gIGlmIChhbHJlYWR5QWRkZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB0aGlzLmdyb3Vwc1RvQWRkSW5UaGlzRGlnZXN0TG9vcF8ucHVzaChncm91cCk7XG4gIHRoaXMubnVtYmVyT2ZHcm91cHNUb0FkZEluVGhpc0RpZ2VzdExvb3AgPSAwO1xuXG4gIGlmICh0aGlzLnByb21pc2VGb3JHcm91cHNUb0FkZEluVGhpc0RpZ2VzdExvb3BfICE9PSBudWxsKSB7XG4gICAgdGhpcy4kdGltZW91dF8uY2FuY2VsKHRoaXMucHJvbWlzZUZvckdyb3Vwc1RvQWRkSW5UaGlzRGlnZXN0TG9vcF8pO1xuICB9XG5cbiAgdGhpcy5wcm9taXNlRm9yR3JvdXBzVG9BZGRJblRoaXNEaWdlc3RMb29wXyA9IHRoaXMuJHRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpczQubnVtYmVyT2ZHcm91cHNUb0FkZEluVGhpc0RpZ2VzdExvb3AgPSBfdGhpczQuZ3JvdXBzVG9BZGRJblRoaXNEaWdlc3RMb29wXy5sZW5ndGg7XG5cbiAgICBfdGhpczQuZ3JvdXBzVG9BZGRJblRoaXNEaWdlc3RMb29wXy5mb3JFYWNoKGZ1bmN0aW9uIChncnApIHtcbiAgICAgIF90aGlzNC5yb290LmNoaWxkcmVuLnVuc2hpZnQoZ3JwKTtcblxuICAgICAgX3RoaXM0LnJvb3QuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIG9sZF9pbmRleCkge1xuICAgICAgICBpZiAoX3RoaXM0LmluaXRpYWxMZXZlbEZpcnN0R3JvdXBzXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIG5ld19pbmRleCA9IF90aGlzNC5pbml0aWFsTGV2ZWxGaXJzdEdyb3Vwc18uZmluZEluZGV4KGZ1bmN0aW9uIChmaXJzdExldmVsR3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdExldmVsR3JvdXAuaWQgPT09IGdyb3VwLmlkO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKG5ld19pbmRleCAhPT0gLTEgJiYgbmV3X2luZGV4ICE9PSBvbGRfaW5kZXgpIHtcbiAgICAgICAgICAgIF90aGlzNC5yZW9yZGVyQ2hpbGRfKF90aGlzNC5yb290LmNoaWxkcmVuLCBvbGRfaW5kZXgsIG5ld19pbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIF90aGlzNC5pbml0aWFsTGV2ZWxGaXJzdEdyb3Vwc18gPSB1bmRlZmluZWQ7XG5cbiAgICBfdGhpczQudXBkYXRlVHJlZUdyb3Vwc1N0YXRlXyhfdGhpczQucm9vdC5jaGlsZHJlbik7XG5cbiAgICBfdGhpczQuZ3JvdXBzVG9BZGRJblRoaXNEaWdlc3RMb29wXy5sZW5ndGggPSAwO1xuICAgIF90aGlzNC5wcm9taXNlRm9yR3JvdXBzVG9BZGRJblRoaXNEaWdlc3RMb29wXyA9IG51bGw7XG4gIH0pO1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkxheWVydHJlZVRyZWVNYW5hZ2VyLnByb3RvdHlwZS5hZGRHcm91cEJ5TmFtZSA9IGZ1bmN0aW9uIChncm91cE5hbWUsIG9wdF9hZGQpIHtcbiAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgdGhpcy5nbWZUaGVtZXNfLmdldFRoZW1lc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKHRoZW1lcykge1xuICAgIHZhciBncm91cCA9IGZpbmRHcm91cEJ5TmFtZSh0aGVtZXMsIGdyb3VwTmFtZSk7XG5cbiAgICBpZiAoZ3JvdXApIHtcbiAgICAgIF90aGlzNS5hZGRGaXJzdExldmVsR3JvdXBzKFtncm91cF0sIG9wdF9hZGQsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLmFkZEdyb3VwQnlMYXllck5hbWUgPSBmdW5jdGlvbiAobGF5ZXJOYW1lLCBvcHRfYWRkLCBvcHRfc2lsZW50KSB7XG4gIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gIHRoaXMuZ21mVGhlbWVzXy5nZXRUaGVtZXNPYmplY3QoKS50aGVuKGZ1bmN0aW9uICh0aGVtZXMpIHtcbiAgICB2YXIgZ3JvdXAgPSBmaW5kR3JvdXBCeUxheWVyTm9kZU5hbWUodGhlbWVzLCBsYXllck5hbWUpO1xuXG4gICAgaWYgKGdyb3VwKSB7XG4gICAgICB2YXIgZ3JvdXBBZGRlZCA9IF90aGlzNi5hZGRGaXJzdExldmVsR3JvdXBzKFtncm91cF0sIG9wdF9hZGQsIG9wdF9zaWxlbnQpO1xuXG4gICAgICBfdGhpczYuJHRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRyZWVDdHJsID0gX3RoaXM2LmdldFRyZWVDdHJsQnlOb2RlSWQoZ3JvdXAuaWQpO1xuXG4gICAgICAgIGlmICghdHJlZUN0cmwpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1RyZWUgY29udHJvbGxlciBub3QgZm91bmQsIHVuYWJsZSB0byBhZGQgdGhlIGdyb3VwJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRyZWVDdHJsVG9BY3RpdmUgPSBudWxsO1xuICAgICAgICB0cmVlQ3RybC50cmF2ZXJzZURlcHRoRmlyc3QoZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gICAgICAgICAgaWYgKHRyZWVDdHJsLm5vZGUubmFtZSA9PT0gbGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICB0cmVlQ3RybFRvQWN0aXZlID0gdHJlZUN0cmw7XG4gICAgICAgICAgICByZXR1cm4gTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uLlNUT1A7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZ3JvdXBBZGRlZCkge1xuICAgICAgICAgIHRyZWVDdHJsLnNldFN0YXRlKCdvZmYnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmVlQ3RybFRvQWN0aXZlIGluc3RhbmNlb2YgTGF5ZXJ0cmVlQ29udHJvbGxlcikge1xuICAgICAgICAgIHRyZWVDdHJsVG9BY3RpdmUuc2V0U3RhdGUoJ29uJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbiAoZ3JvdXApIHtcbiAgdmFyIGNoaWxkcmVuID0gdGhpcy5yb290LmNoaWxkcmVuO1xuICB2YXIgaW5kZXggPSAwLFxuICAgICAgZm91bmQgPSBmYWxzZTtcbiAgY2hpbGRyZW4uc29tZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQubmFtZSA9PT0gZ3JvdXAubmFtZSkge1xuICAgICAgcmV0dXJuIGZvdW5kID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpbmRleCsrO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG5cbiAgaWYgKGZvdW5kKSB7XG4gICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnVwZGF0ZVRyZWVHcm91cHNTdGF0ZV8oY2hpbGRyZW4pO1xuICB9XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuICB3aGlsZSAodGhpcy5yb290LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgIHRoaXMucmVtb3ZlR3JvdXAodGhpcy5yb290LmNoaWxkcmVuWzBdKTtcbiAgfVxufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLmNsb25lR3JvdXBOb2RlXyA9IGZ1bmN0aW9uIChncm91cCwgbmFtZXMpIHtcbiAgdmFyIGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgZ3JvdXApO1xuICB0aGlzLnRvZ2dsZU5vZGVDaGVja18oY2xvbmUsIG5hbWVzKTtcbiAgcmV0dXJuIGNsb25lO1xufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLnRvZ2dsZU5vZGVDaGVja18gPSBmdW5jdGlvbiAobm9kZSwgbmFtZXMpIHtcbiAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgdmFyIGdyb3VwTm9kZSA9IG5vZGU7XG5cbiAgaWYgKCFncm91cE5vZGUuY2hpbGRyZW4pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBncm91cE5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGROb2RlKSB7XG4gICAgdmFyIGNoaWxkR3JvdXBOb2RlID0gY2hpbGROb2RlO1xuXG4gICAgaWYgKGNoaWxkR3JvdXBOb2RlLmNoaWxkcmVuKSB7XG4gICAgICBfdGhpczcudG9nZ2xlTm9kZUNoZWNrXyhjaGlsZEdyb3VwTm9kZSwgbmFtZXMpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGROb2RlLm1ldGFkYXRhKSB7XG4gICAgICBjaGlsZE5vZGUubWV0YWRhdGEuaXNDaGVja2VkID0gbmFtZXMuaW5jbHVkZXMoY2hpbGROb2RlLm5hbWUpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUubm90aWZ5Q2FudEFkZEdyb3Vwc18gPSBmdW5jdGlvbiAoZ3JvdXBzKSB7XG4gIHZhciBuYW1lcyA9IFtdO1xuICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nXztcbiAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgbmFtZXMucHVzaChnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoZ3JvdXAubmFtZSkpO1xuICB9KTtcbiAgdmFyIG1zZyA9IG5hbWVzLmxlbmd0aCA8IDIgPyBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ2dyb3VwIGlzIGFscmVhZHkgbG9hZGVkLicpIDogZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdncm91cHMgYXJlIGFscmVhZHkgbG9hZGVkLicpO1xuICB0aGlzLm5nZW9Ob3RpZmljYXRpb25fLm5vdGlmeSh7XG4gICAgbXNnOiBuYW1lcy5qb2luKCcsICcpICsgXCIgXCIgKyBtc2csXG4gICAgdHlwZTogTWVzc2FnZVR5cGUuSU5GT1JNQVRJT05cbiAgfSk7XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUuZ2V0VHJlZUN0cmxCeU5vZGVJZCA9IGZ1bmN0aW9uIChpZCkge1xuICB2YXIgY29ycmVzcG9uZGluZ1RyZWVDdHJsID0gbnVsbDtcblxuICBpZiAodGhpcy5yb290Q3RybCAmJiB0aGlzLnJvb3RDdHJsLnRyYXZlcnNlRGVwdGhGaXJzdCkge1xuICAgIHRoaXMucm9vdEN0cmwudHJhdmVyc2VEZXB0aEZpcnN0KGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICAgICAgaWYgKHRyZWVDdHJsLm5vZGUuaWQgPT09IGlkKSB7XG4gICAgICAgIGNvcnJlc3BvbmRpbmdUcmVlQ3RybCA9IHRyZWVDdHJsO1xuICAgICAgICByZXR1cm4gTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uLlNUT1A7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gY29ycmVzcG9uZGluZ1RyZWVDdHJsO1xufTtcblxuTGF5ZXJ0cmVlVHJlZU1hbmFnZXIucHJvdG90eXBlLmdldE9nY1NlcnZlciA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICBpZiAoIXRoaXMub2djU2VydmVyc18pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgb2djU2VydmVycycpO1xuICB9XG5cbiAgdmFyIGdtZlBhcmVudEdyb3VwID0gdHJlZUN0cmwucGFyZW50Lm5vZGU7XG5cbiAgaWYgKGdtZlBhcmVudEdyb3VwLm1peGVkKSB7XG4gICAgdmFyIGdtZkxheWVyV01TID0gdHJlZUN0cmwubm9kZTtcblxuICAgIGlmICghZ21mTGF5ZXJXTVMub2djU2VydmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ21mTGF5ZXJXTVMub2djU2VydmVyJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub2djU2VydmVyc19bZ21mTGF5ZXJXTVMub2djU2VydmVyXTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZmlyc3RMZXZlbEdyb3VwQ3RybCA9IHRyZWVDdHJsO1xuXG4gICAgd2hpbGUgKCFmaXJzdExldmVsR3JvdXBDdHJsLnBhcmVudC5pc1Jvb3QpIHtcbiAgICAgIGZpcnN0TGV2ZWxHcm91cEN0cmwgPSBmaXJzdExldmVsR3JvdXBDdHJsLnBhcmVudDtcbiAgICB9XG5cbiAgICB2YXIgZ21mR3JvdXAgPSBmaXJzdExldmVsR3JvdXBDdHJsLm5vZGU7XG5cbiAgICBpZiAoIWdtZkdyb3VwLm9nY1NlcnZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdtZkdyb3VwLm9nY1NlcnZlcicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm9nY1NlcnZlcnNfW2dtZkdyb3VwLm9nY1NlcnZlcl07XG4gIH1cbn07XG5cbkxheWVydHJlZVRyZWVNYW5hZ2VyLnByb3RvdHlwZS5yZWZyZXNoRmlyc3RMZXZlbEdyb3Vwc18gPSBmdW5jdGlvbiAodGhlbWVzKSB7XG4gIHZhciBfdGhpczggPSB0aGlzO1xuXG4gIGlmICghdGhpcy5yb290Q3RybCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByb290Q3RybCcpO1xuICB9XG5cbiAgdmFyIGZpcnN0TGV2ZWxHcm91cHNGdWxsU3RhdGUgPSB7fTtcbiAgdGhpcy5yb290Q3RybC5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gICAgdmFyIG5hbWUgPSB0cmVlQ3RybC5ub2RlLm5hbWU7XG4gICAgZmlyc3RMZXZlbEdyb3Vwc0Z1bGxTdGF0ZVtuYW1lXSA9IF90aGlzOC5nZXRGaXJzdExldmVsR3JvdXBGdWxsU3RhdGVfKHRyZWVDdHJsKTtcbiAgfSk7XG4gIHZhciBub2Rlc1RvUmVzdG9yZSA9IFtdO1xuICB0aGlzLnJvb3QuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIG5hbWUgPSBub2RlLm5hbWU7XG4gICAgdmFyIG5vZGVUb1Jlc3RvcmUgPSBmaW5kR3JvdXBCeU5hbWUodGhlbWVzLCBuYW1lKTtcblxuICAgIGlmIChub2RlVG9SZXN0b3JlKSB7XG4gICAgICB2YXIgZnVsbFN0YXRlID0gZmlyc3RMZXZlbEdyb3Vwc0Z1bGxTdGF0ZVtuYW1lXTtcblxuICAgICAgaWYgKGZ1bGxTdGF0ZSkge1xuICAgICAgICBfdGhpczguc2V0Tm9kZU1ldGFkYXRhRnJvbUZ1bGxTdGF0ZV8obm9kZVRvUmVzdG9yZSwgZnVsbFN0YXRlKTtcbiAgICAgIH1cblxuICAgICAgbm9kZXNUb1Jlc3RvcmUucHVzaChub2RlVG9SZXN0b3JlKTtcbiAgICB9XG4gIH0pO1xuICB0aGlzLnNldEZpcnN0TGV2ZWxHcm91cHMobm9kZXNUb1Jlc3RvcmUpO1xuICB0aGlzLiR0aW1lb3V0XyhmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXM4LnVwZGF0ZVRyZWVHcm91cHNTdGF0ZV8oX3RoaXM4LnJvb3QuY2hpbGRyZW4pO1xuICB9KTtcbn07XG5cbkxheWVydHJlZVRyZWVNYW5hZ2VyLnByb3RvdHlwZS5nZXRGaXJzdExldmVsR3JvdXBGdWxsU3RhdGVfID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gIHZhciBjaGlsZHJlbiA9IHt9O1xuICB0cmVlQ3RybC5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgY2hpbGRyZW5bY2hpbGQubm9kZS5uYW1lXSA9IF90aGlzOS5nZXRGaXJzdExldmVsR3JvdXBGdWxsU3RhdGVfKGNoaWxkKTtcbiAgfSk7XG4gIHZhciBpc0NoZWNrZWQsIGlzRXhwYW5kZWQsIGlzTGVnZW5kRXhwYW5kZWQ7XG5cbiAgaWYgKHRyZWVDdHJsLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbm9kZUVsZW1lbnQgPSAkKFwiI2dtZi1sYXllcnRyZWUtbGF5ZXItZ3JvdXAtXCIgKyB0cmVlQ3RybC51aWQpO1xuXG4gICAgaWYgKG5vZGVFbGVtZW50KSB7XG4gICAgICBpc0V4cGFuZGVkID0gbm9kZUVsZW1lbnQuaGFzQ2xhc3MoJ3Nob3cnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaXNDaGVja2VkID0gdHJlZUN0cmwuZ2V0U3RhdGUoKTtcblxuICAgIGlmIChpc0NoZWNrZWQgPT09ICdvbicpIHtcbiAgICAgIGlzQ2hlY2tlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChpc0NoZWNrZWQgPT09ICdvZmYnKSB7XG4gICAgICBpc0NoZWNrZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXNDaGVja2VkID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBsZWdlbmRFbGVtZW50ID0gJChcIiNnbWYtbGF5ZXJ0cmVlLW5vZGUtXCIgKyB0cmVlQ3RybC51aWQgKyBcIi1sZWdlbmRcIik7XG5cbiAgICBpZiAobGVnZW5kRWxlbWVudCkge1xuICAgICAgaXNMZWdlbmRFeHBhbmRlZCA9IGxlZ2VuZEVsZW1lbnQuaXMoJzp2aXNpYmxlJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgaXNDaGVja2VkOiBpc0NoZWNrZWQsXG4gICAgaXNFeHBhbmRlZDogaXNFeHBhbmRlZCxcbiAgICBpc0xlZ2VuZEV4cGFuZGVkOiBpc0xlZ2VuZEV4cGFuZGVkXG4gIH07XG59O1xuXG5MYXllcnRyZWVUcmVlTWFuYWdlci5wcm90b3R5cGUuc2V0Tm9kZU1ldGFkYXRhRnJvbUZ1bGxTdGF0ZV8gPSBmdW5jdGlvbiAobm9kZSwgZnVsbFN0YXRlKSB7XG4gIHZhciBfdGhpczEwID0gdGhpcztcblxuICBpZiAoIWZ1bGxTdGF0ZSkge1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgdmFyIGdyb3VwTm9kZSA9IG5vZGU7XG5cbiAgaWYgKGdyb3VwTm9kZS5jaGlsZHJlbikge1xuICAgIGdyb3VwTm9kZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBfdGhpczEwLnNldE5vZGVNZXRhZGF0YUZyb21GdWxsU3RhdGVfKGNoaWxkLCBmdWxsU3RhdGUuY2hpbGRyZW5bY2hpbGQubmFtZV0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG1ldGFkYXRhID0gbm9kZS5tZXRhZGF0YTtcbiAgbWV0YWRhdGEuaXNDaGVja2VkID0gZnVsbFN0YXRlLmlzQ2hlY2tlZDtcbiAgbWV0YWRhdGEuaXNFeHBhbmRlZCA9IGZ1bGxTdGF0ZS5pc0V4cGFuZGVkO1xuICBtZXRhZGF0YS5pc0xlZ2VuZEV4cGFuZGVkID0gZnVsbFN0YXRlLmlzTGVnZW5kRXhwYW5kZWQ7XG4gIHJldHVybiBub2RlO1xufTtcblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZlRyZWVNYW5hZ2VyJywgW2dtZlRoZW1lVGhlbWVzLm5hbWUsIG5nZW9MYXllcnRyZWVDb250cm9sbGVyLm5hbWUsIG5nZW9NZXNzYWdlTm90aWZpY2F0aW9uLm5hbWUsIG5nZW9TdGF0ZW1hbmFnZXJTZXJ2aWNlLm5hbWVdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ2dtZlRyZWVNYW5hZ2VyJywgTGF5ZXJ0cmVlVHJlZU1hbmFnZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdlxcbiAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1yb290LXRvb2xzXCJcXG4gICBuZy1pZj1cImxheWVydHJlZUN0cmwuaXNSb290XCI+XFxuICA8YVxcbiAgICAgaHJlZlxcbiAgICAgbmctaWY9XCJnbWZMYXllcnRyZWVDdHJsLm5vZGVzQ291bnQoKSA+IDAgfHwgIWdtZkxheWVydHJlZUN0cmwuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIuaXNFbXB0eSgpXCJcXG4gICAgIG5nLWNsaWNrPVwiZ21mTGF5ZXJ0cmVlQ3RybC5yZW1vdmVBbGxOb2RlcygpXCI+XFxuICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtdHJhc2hcIj48L3NwYW4+IHt7XFwnQ2xlYXIgYWxsXFwnIHwgdHJhbnNsYXRlfX1cXG4gIDwvYT5cXG48L2Rpdj5cXG48ZGl2XFxuICBuZy1pZj1cIjo6IWxheWVydHJlZUN0cmwuaXNSb290XCJcXG4gIGlkPVwiZ21mLWxheWVydHJlZS1ub2RlLXt7OjpsYXllcnRyZWVDdHJsLnVpZH19XCJcXG4gIG5nLWNsYXNzPVwiW2xheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlbiA/IFxcJ2dtZi1sYXllcnRyZWUtZ3JvdXBcXCcgOiBcXCdnbWYtbGF5ZXJ0cmVlLWxlYWZcXCcsIFxcJ2dtZi1sYXllcnRyZWUtZGVwdGgtXFwnICsgbGF5ZXJ0cmVlQ3RybC5kZXB0aCwgZ21mTGF5ZXJ0cmVlQ3RybC5nZXRSZXNvbHV0aW9uU3R5bGUobGF5ZXJ0cmVlQ3RybC5ub2RlKSwgZ21mTGF5ZXJ0cmVlQ3RybC5nZXROb2RlU3RhdGUobGF5ZXJ0cmVlQ3RybCldXCI+XFxuXFxuICA8ZGl2XFxuICAgIGNsYXNzPVwibmdlby1zb3J0YWJsZS1oYW5kbGVcIlxcbiAgICBuZy1zaG93PVwibGF5ZXJ0cmVlQ3RybC5kZXB0aCA9PT0gMSAmJiBsYXllcnRyZWVDdHJsLnBhcmVudC5jaGlsZHJlbi5sZW5ndGggPiAxXCI+XFxuICAgIDxpIGNsYXNzPVwiZ21mLWxheWVydHJlZS1zb3J0YWJsZS1oYW5kbGUtaWNvbiBmYSBmYS1lbGxpcHNpcy12XCI+PC9pPlxcbiAgPC9kaXY+XFxuXFxuICA8YVxcbiAgICBuZy1pZj1cIjo6bGF5ZXJ0cmVlQ3RybC5ub2RlLmNoaWxkcmVuXCJcXG4gICAgZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXFxuICAgIGhyZWY9XCIjZ21mLWxheWVydHJlZS1sYXllci1ncm91cC17ezo6bGF5ZXJ0cmVlQ3RybC51aWR9fVwiXFxuICAgIGFyaWEtZXhwYW5kZWQ9XCJ7ezo6bGF5ZXJ0cmVlQ3RybC5ub2RlLm1ldGFkYXRhLmlzRXhwYW5kZWR9fVwiXFxuICAgIGNsYXNzPVwiZmEgZ21mLWxheWVydHJlZS1leHBhbmQtbm9kZSBmYS1md1wiPlxcbiAgPC9hPlxcblxcbiAgPGFcXG4gICAgaHJlZlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVBY3RpdmUobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBuZy1pZj1cIjo6IWxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlbiAmJiBnbWZMYXllcnRyZWVDdHJsLmdldExlZ2VuZEljb25VUkwobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBjbGFzcz1cImdtZi1sYXllcnRyZWUtbGF5ZXItaWNvblwiXFxuICA+XFxuICAgIDxkaXY+PCEtLVRoaXMgZGl2IGlzIHJlcXVpcmVkIGZvciBmbGV4IGlzc3VlcyB3aXRoIElFMTEtLT5cXG4gICAgICA8aW1nXFxuICAgICAgICBuZy1pZj1cIjo6KGxlZ2VuZEljb25Vcmw9Z21mTGF5ZXJ0cmVlQ3RybC5nZXRMZWdlbmRJY29uVVJMKGxheWVydHJlZUN0cmwpKVwiXFxuICAgICAgICBuZy1zcmM9XCJ7ezo6bGVnZW5kSWNvblVybH19XCI+XFxuICAgICAgPC9pbWc+XFxuICAgIDwvZGl2PlxcbiAgPC9hPlxcbiAgPGFcXG4gICAgaHJlZlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVBY3RpdmUobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBuZy1pZj1cIjo6IWxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlbiAmJiAhZ21mTGF5ZXJ0cmVlQ3RybC5nZXRMZWdlbmRJY29uVVJMKGxheWVydHJlZUN0cmwpXCJcXG4gICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLWxheWVyLWljb24gZ21mLWxheWVydHJlZS1uby1sYXllci1pY29uXCJcXG4gID4nICtcbigoX190ID0gKHJlcXVpcmUoJ2dtZi9pY29ucy9kb3Quc3ZnP3ZpZXdib3gmaGVpZ2h0PTFlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nPC9hPlxcblxcbiAgPGFcXG4gICAgaHJlZlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVBY3RpdmUobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBuZy1pZj1cImxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlbiAmJiBsYXllcnRyZWVDdHJsLmxheWVyLmxvYWRpbmdcIlxcbiAgICBjbGFzcz1cImZhIGZhLWZ3IGN1c3RvbS1zcGlubmVyLWdlbmVyaWMgZmEtc3BpblwiXFxuICA+JyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvc3Bpbm5lci5zdmc/dmlld2JveCZoZWlnaHQ9MXJlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nPC9hPlxcbiAgPGFcXG4gICAgaHJlZlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVBY3RpdmUobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBuZy1pZj1cImxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlbiAmJiAhbGF5ZXJ0cmVlQ3RybC5sYXllci5sb2FkaW5nXCJcXG4gICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLXN0YXRlIGdtZi1ub3QtaW50ZXJtZWRpYXRlXCJcXG4gID4nICtcbigoX190ID0gKHJlcXVpcmUoJ2dtZi9pY29ucy9sYXllcnMuc3ZnP3ZpZXdib3gmaGVpZ2h0PTFlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nPC9hPlxcbiAgPGFcXG4gICAgaHJlZlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVBY3RpdmUobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBuZy1pZj1cImxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlbiAmJiAhbGF5ZXJ0cmVlQ3RybC5sYXllci5sb2FkaW5nXCJcXG4gICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLXN0YXRlIGdtZi1pbnRlcm1lZGlhdGVcIlxcbiAgPicgK1xuKChfX3QgPSAocmVxdWlyZSgnZ21mL2ljb25zL3N0YWNrLWluZGV0ZXJtaW5hdGUuc3ZnP3ZpZXdib3gmaGVpZ2h0PTFlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nPC9hPlxcblxcbiAgPGFcXG4gICAgaHJlZlxcbiAgICBkYXRhLXNlbnRyeT1cImlkOnt7bGF5ZXJ0cmVlQ3RybC5ub2RlLmlkfX1cIlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVBY3RpdmUobGF5ZXJ0cmVlQ3RybClcIlxcbiAgICBjbGFzcz1cImdtZi1sYXllcnRyZWUtbmFtZVwiPlxcbiAgICB7e2xheWVydHJlZUN0cmwubm9kZS5uYW1lIHwgdHJhbnNsYXRlfX1cXG4gICAgPGkgbmctaWY9XCJnbWZMYXllcnRyZWVDdHJsLmdtZkxheWVyQmVpbmdTd2lwZS5sYXllciAmJiBnbWZMYXllcnRyZWVDdHJsLmdtZkxheWVyQmVpbmdTd2lwZS5sYXllciA9PT0gbGF5ZXJ0cmVlQ3RybC5sYXllclwiPlxcbiAgICAgICcgK1xuKChfX3QgPSAocmVxdWlyZSgnbmdlby9pY29ucy9zd2lwZS5zdmc/dmlld2JveCZ3aWR0aD0xZW0nKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICA8L2k+XFxuXFxuICAgIDxpXFxuICAgICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLXpvb21cIlxcbiAgICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgICAgZGF0YS1wbGFjZW1lbnQ9XCJ0b3BcIlxcbiAgICAgIGRhdGEtdGl0bGU9XCJ7e1xcJ05vdCB2aXNpYmxlIGF0IGN1cnJlbnQgc2NhbGUuIENsaWNrIHRvIHpvb20uXFwnfHRyYW5zbGF0ZX19XCJcXG4gICAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC56b29tVG9SZXNvbHV0aW9uKGxheWVydHJlZUN0cmwpOyAkZXZlbnQucHJldmVudERlZmF1bHQoKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1wiXFxuICAgICAgbmctaWY9XCJnbWZMYXllcnRyZWVDdHJsLmdldE5vZGVTdGF0ZShsYXllcnRyZWVDdHJsKSA9PSBcXCdvblxcJ1wiXFxuICAgID4nICtcbigoX190ID0gKHJlcXVpcmUoJ2dtZi9pY29ucy9zZWFyY2gtZ28uc3ZnP3ZpZXdib3gmaGVpZ2h0PTFlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nPC9pPlxcblxcbiAgICA8c3BhblxcbiAgICAgIG5nZW8tcG9wb3ZlclxcbiAgICAgIG5nZW8tcG9wb3Zlci1kaXNtaXNzPVwiLmNvbnRlbnRcIlxcbiAgICAgIG5nLWlmPVwiZ21mTGF5ZXJ0cmVlQ3RybC5nZXROb2RlU3RhdGUobGF5ZXJ0cmVlQ3RybCkgIT09IFxcJ29mZlxcJyAmJiBsYXllcnRyZWVDdHJsLm5vZGUudGltZSAmJiBsYXllcnRyZWVDdHJsLm5vZGUudGltZS5tb2RlICE9PSBcXCdkaXNhYmxlZFxcJ1wiPlxcblxcbiAgICAgIDxzcGFuXFxuICAgICAgICBuZ2VvLXBvcG92ZXItYW5jaG9yXFxuICAgICAgICBjbGFzcz1cImZhciBmYS1jbG9ja1wiXFxuICAgICAgICBuZy1jbGljaz1cIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxcbiAgICAgICAgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcXG4gICAgICAgIGRhdGEtcGxhY2VtZW50PVwidG9wXCJcXG4gICAgICAgIHRpdGxlPVwie3tcXCdDbGljayB0byBlbnRlciBhIHBlcmlvZC5cXCd8dHJhbnNsYXRlfX1cIj5cXG4gICAgICA8L3NwYW4+XFxuXFxuICAgICAgPGRpdiBuZ2VvLXBvcG92ZXItY29udGVudD5cXG4gICAgICAgIDxuZ2VvLWRhdGUtcGlja2VyXFxuICAgICAgICAgIG5nLWlmPVwiOjpsYXllcnRyZWVDdHJsLm5vZGUudGltZS53aWRnZXQgPT09IFxcJ2RhdGVwaWNrZXJcXCdcIlxcbiAgICAgICAgICB0aW1lPVwibGF5ZXJ0cmVlQ3RybC5ub2RlLnRpbWVcIlxcbiAgICAgICAgICBvbi1kYXRlLXNlbGVjdGVkPVwiZ21mTGF5ZXJ0cmVlQ3RybC51cGRhdGVUaW1lRGF0YShsYXllcnRyZWVDdHJsLCB0aW1lKVwiPlxcbiAgICAgICAgPC9uZ2VvLWRhdGUtcGlja2VyPlxcblxcbiAgICAgICAgPGdtZi10aW1lLXNsaWRlclxcbiAgICAgICAgICBuZy1pZj1cIjo6bGF5ZXJ0cmVlQ3RybC5ub2RlLnRpbWUud2lkZ2V0ID09PSBcXCdzbGlkZXJcXCdcIlxcbiAgICAgICAgICBnbWYtdGltZS1zbGlkZXItdGltZT1cImxheWVydHJlZUN0cmwubm9kZS50aW1lXCJcXG4gICAgICAgICAgZ21mLXRpbWUtc2xpZGVyLW9uLWRhdGUtc2VsZWN0ZWQ9XCJnbWZMYXllcnRyZWVDdHJsLnVwZGF0ZVRpbWVEYXRhKGxheWVydHJlZUN0cmwsIHRpbWUpXCI+XFxuICAgICAgICA8L2dtZi10aW1lLXNsaWRlcj5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9zcGFuPlxcblxcbiAgICA8c3BhblxcbiAgICAgIGNsYXNzPVwiZmEgZmEtZWRpdFwiXFxuICAgICAgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcXG4gICAgICBkYXRhLXBsYWNlbWVudD1cInJpZ2h0XCJcXG4gICAgICB0aXRsZT1cInt7XFwnQ3VycmVudGx5IGVkaXRpbmcgdGhpcyBsYXllclxcJ3x0cmFuc2xhdGV9fVwiXFxuICAgICAgbmctaWY9XCJsYXllcnRyZWVDdHJsLnByb3BlcnRpZXMuZWRpdGluZ1wiPlxcbiAgICA8L3NwYW4+XFxuXFxuICAgIDxzcGFuXFxuICAgICAgY2xhc3M9XCJmYXMgZmEtbWFnbmV0XCJcXG4gICAgICBuZy1pZj1cImxheWVydHJlZUN0cmwubm9kZS5tZXRhZGF0YS5zbmFwcGluZ0NvbmZpZ1wiXFxuICAgICAgbmctY2xhc3M9XCJnbWZMYXllcnRyZWVDdHJsLmlzU25hcHBpbmdBY3RpdmF0ZWQobGF5ZXJ0cmVlQ3RybCkgPyBcXCdvblxcJyA6IFxcJ29mZlxcJ1wiXFxuICAgICAgbmctY2xpY2s9XCJnbWZMYXllcnRyZWVDdHJsLnRvZ2dsZVNuYXBwaW5nKGxheWVydHJlZUN0cmwpOyAkZXZlbnQucHJldmVudERlZmF1bHQoKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1wiXFxuICAgICAgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcXG4gICAgICBkYXRhLXBsYWNlbWVudD1cInRvcFwiXFxuICAgICAgZGF0YS10aXRsZT1cInt7XFwnQ2xpY2sgdG8gdG9nZ2xlIHNuYXBwaW5nLlxcJ3x0cmFuc2xhdGV9fVwiXFxuICAgID5cXG4gICAgPC9zcGFuPlxcbiAgPC9hPlxcblxcbiAgPHNwYW4gY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLXJpZ2h0LWJ1dHRvbnNcIj5cXG4gICAgPGFcXG4gICAgICBocmVmPVwiXCJcXG4gICAgICBuZy1pZj1cIjo6bGF5ZXJ0cmVlQ3RybC5kZXB0aCA9PSAxXCJcXG4gICAgICBuZy1jbGljaz1cImdtZkxheWVydHJlZUN0cmwucmVtb3ZlTm9kZShsYXllcnRyZWVDdHJsLm5vZGUpXCI+XFxuICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS10cmFzaFwiPjwvc3Bhbj5cXG4gICAgPC9hPlxcblxcbiAgICA8YVxcbiAgICAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1ub2RlLW1lbnUtYnRuXCJcXG4gICAgICBocmVmPVwiXCJcXG4gICAgICBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5zdXBwb3J0c0N1c3RvbWl6YXRpb24obGF5ZXJ0cmVlQ3RybClcIlxcbiAgICAgIG5nLWNsaWNrPVwiOjpnbWZMYXllcnRyZWVDdHJsLnRvZ2dsZU5vZGVNZW51KFxcJyNnbWYtbGF5ZXJ0cmVlLW5vZGUtbWVudS1cXCcgKyBsYXllcnRyZWVDdHJsLnVpZClcIj5cXG4gICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWNvZ1wiPjwvc3Bhbj5cXG4gICAgPC9hPlxcblxcbiAgICA8c3BhblxcbiAgICAgIG5nZW8tcG9wb3ZlclxcbiAgICAgIG5nLWlmPVwiOjoobGF5ZXJ0cmVlQ3RybC5kZXB0aCA9PT0gMSAmJiAhbGF5ZXJ0cmVlQ3RybC5ub2RlLm1peGVkKSB8fCAobGF5ZXJ0cmVlQ3RybC5kZXB0aCA+IDEgJiYgbGF5ZXJ0cmVlQ3RybC5wYXJlbnQubm9kZS5taXhlZCAmJiAhbGF5ZXJ0cmVlQ3RybC5ub2RlLmNoaWxkcmVuKSB8fCAoZ21mTGF5ZXJ0cmVlQ3RybC5nZXRMZWdlbmRzT2JqZWN0KGxheWVydHJlZUN0cmwpICYmIGxheWVydHJlZUN0cmwubm9kZS5tZXRhZGF0YS5sZWdlbmQpIHx8IGxheWVydHJlZUN0cmwuZ2V0RGF0YVNvdXJjZSgpLmZpbHRyYWJsZVwiIG5nZW8tcG9wb3Zlci1kaXNtaXNzPVwiLmNvbnRlbnRcIlxcbiAgICAgIG5nLWNsaWNrPVwiOjpnbWZMYXllcnRyZWVDdHJsLnRhZ1BvcHVwKGxheWVydHJlZUN0cmwubm9kZSlcIj5cXG5cXG4gICAgICA8c3BhblxcbiAgICAgICAgbmdlby1wb3BvdmVyLWFuY2hvclxcbiAgICAgICAgY2xhc3M9XCJleHRyYS1hY3Rpb25zIGZhIGZhLWNvZ1wiXFxuICAgICAgICBpZD1cInBvcHVwLWlkLXt7bGF5ZXJ0cmVlQ3RybC5ub2RlLm9sX3VpZH19XCI+XFxuICAgICAgPC9zcGFuPlxcblxcbiAgICAgIDxkaXYgbmdlby1wb3BvdmVyLWNvbnRlbnQ+XFxuICAgICAgICA8dWw+XFxuICAgICAgICAgIDxsaSBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5zdXBwb3J0c09wYWNpdHlDaGFuZ2UobGF5ZXJ0cmVlQ3RybClcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRpbnQgZmEtZndcIj48L2k+XFxuICAgICAgICAgICAgPHNwYW4+e3tcXCdPcGFjaXR5XFwnfHRyYW5zbGF0ZX19PC9zcGFuPlxcbiAgICAgICAgICAgIDxpbnB1dFxcbiAgICAgICAgICAgICAgY2xhc3M9XCJpbnB1dC1hY3Rpb25cIlxcbiAgICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcXG4gICAgICAgICAgICAgIG1pbj1cIjBcIlxcbiAgICAgICAgICAgICAgbWF4PVwiMVwiXFxuICAgICAgICAgICAgICBzdGVwPVwiMC4wMVwiXFxuICAgICAgICAgICAgICBuZy1tb2RlbD1cImxheWVydHJlZUN0cmwubGF5ZXIub3BhY2l0eVwiIC8+XFxuICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgIDxsaSBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5nZXRMZWdlbmRzT2JqZWN0KGxheWVydHJlZUN0cmwpICYmIGxheWVydHJlZUN0cmwubm9kZS5tZXRhZGF0YS5sZWdlbmRcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRoLWxpc3QgZmEtZndcIj48L2k+XFxuICAgICAgICAgICAgPGFcXG4gICAgICAgICAgICAgIG5nLWNsaWNrPVwiOjpnbWZMYXllcnRyZWVDdHJsLnRvZ2dsZU5vZGVMZWdlbmQoXFwnI2dtZi1sYXllcnRyZWUtbm9kZS1cXCcgKyBsYXllcnRyZWVDdHJsLnVpZCArIFxcJy1sZWdlbmRcXCcpOyBwb3BvdmVyQ3RybC5kaXNtaXNzUG9wb3ZlcigpXCJcXG4gICAgICAgICAgICAgIGhyZWY9XCJcIj5cXG4gICAgICAgICAgICAgIHt7XFwnU2hvdy9oaWRlIGxlZ2VuZFxcJ3x0cmFuc2xhdGV9fVxcbiAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgPC9saT5cXG4gICAgICAgICAgPGxpIG5nLWlmPVwiOjpnbWZMYXllcnRyZWVDdHJsLnN1cHBvcnRzT3BhY2l0eUNoYW5nZShsYXllcnRyZWVDdHJsKVwiPlxcbiAgICAgICAgICAgIDxpPicgK1xuKChfX3QgPSAocmVxdWlyZSgnbmdlby9pY29ucy9zd2lwZS5zdmc/dmlld2JveCZoZWlnaHQ9MWVtJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbic8L2k+XFxuICAgICAgICAgICAgPGFcXG4gICAgICAgICAgICAgIG5nLWNsaWNrPVwiOjpnbWZMYXllcnRyZWVDdHJsLnRvZ2dsZVN3aXBlTGF5ZXIobGF5ZXJ0cmVlQ3RybCk7IHBvcG92ZXJDdHJsLmRpc21pc3NQb3BvdmVyKClcIlxcbiAgICAgICAgICAgICAgaHJlZj1cIlwiXFxuICAgICAgICAgICAgICBuZy1tb2RlbD1cImxheWVydHJlZUN0cmwubGF5ZXJcIlxcbiAgICAgICAgICAgICAgPlxcbiAgICAgICAgICAgICAge3tcXCdTd2lwZSB3aXRoIHRoaXMgbGF5ZXJcXCd8IHRyYW5zbGF0ZX19XFxuICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICA8bGkgbmctaWY9XCJnbWZMYXllcnRyZWVDdHJsLmlzRmlsdHJhYmxlKGxheWVydHJlZUN0cmwpXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1maWx0ZXIgZmEtZndcIj48L2k+XFxuICAgICAgICAgICAgPGFcXG4gICAgICAgICAgICAgIG5nLWNsaWNrPVwiZ21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVGaWx0cmFibGVEYXRhU291cmNlKGxheWVydHJlZUN0cmwuZ2V0RGF0YVNvdXJjZSgpKVwiXFxuICAgICAgICAgICAgICBocmVmPVwiXCI+XFxuICAgICAgICAgICAgICB7e1xcJ0ZpbHRlclxcJ3x0cmFuc2xhdGV9fVxcbiAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgPC9saT5cXG4gICAgICAgICAgPGxpIGNsYXNzPVwibW9yZS1vcHRpb25zLWluZm9cIiBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5nZXRGaXJzdFBhcmVudFdpdGhMYXllckZ1bmN0aW9ucyhsYXllcnRyZWVDdHJsKSAhPT0gbnVsbFwiPlxcbiAgICAgICAgICAgIDxzcGFuPnt7XFwnTW9yZSBvcHRpb25zIGF0IHRoZSBncm91cCBsZXZlbFxcJ3x0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gICAgICAgICAgPC9saT5cXG4gICAgICAgIDwvdWw+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvc3Bhbj5cXG5cXG4gICAgPHNwYW5cXG4gICAgICBjbGFzcz1cImdtZi1sYXllcnRyZWUtbWV0YWRhdGFcIlxcbiAgICAgIG5nLWlmPVwiOjpsYXllcnRyZWVDdHJsLm5vZGUubWV0YWRhdGEubWV0YWRhdGFVcmxcIj5cXG5cXG4gICAgICA8c3BhbiBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5vcHRpb25zLm9wZW5MaW5rc0luTmV3V2luZG93ID09PSB0cnVlXCI+XFxuICAgICAgICA8YVxcbiAgICAgICAgICB0aXRsZT1cInt7XFwnTW9yZSBpbmZvcm1hdGlvblxcJ3x0cmFuc2xhdGV9fVwiXFxuICAgICAgICAgIGhyZWY9XCJ7ezo6bGF5ZXJ0cmVlQ3RybC5ub2RlLm1ldGFkYXRhLm1ldGFkYXRhVXJsfX1cIlxcbiAgICAgICAgICB0YXJnZXQ9XCJibGFua19cIj5cXG4gICAgICAgIDwvYT5cXG4gICAgICA8L3NwYW4+XFxuXFxuICAgICAgPHNwYW4gbmctaWY9XCI6OmdtZkxheWVydHJlZUN0cmwub3B0aW9ucy5vcGVuTGlua3NJbk5ld1dpbmRvdyAhPT0gdHJ1ZVwiPlxcbiAgICAgICAgPGFcXG4gICAgICAgICAgdGl0bGU9XCJ7e1xcJ01vcmUgaW5mb3JtYXRpb25cXCd8dHJhbnNsYXRlfX1cIlxcbiAgICAgICAgICBocmVmPVwiXCIgbmctY2xpY2s9XCJnbWZMYXllcnRyZWVDdHJsLmRpc3BsYXlNZXRhZGF0YShsYXllcnRyZWVDdHJsKVwiPlxcbiAgICAgICAgPC9hPlxcbiAgICAgIDwvc3Bhbj5cXG4gICAgPC9zcGFuPlxcbiAgPC9zcGFuPlxcbjwvZGl2PlxcblxcbjxkaXZcXG4gIGNsYXNzPVwiZ21mLWxheWVydHJlZS1ub2RlLW1lbnUgZC1ub25lXCJcXG4gIGlkPVwiZ21mLWxheWVydHJlZS1ub2RlLW1lbnUte3s6OmxheWVydHJlZUN0cmwudWlkfX1cIlxcbiAgbmctaWY9XCI6OmdtZkxheWVydHJlZUN0cmwuc3VwcG9ydHNDdXN0b21pemF0aW9uKGxheWVydHJlZUN0cmwpXCI+XFxuXFxuICA8ZGl2IGNsYXNzPVwibW9yZS1vcHRpb25zLWluZm9cIiBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5nZXRGaXJzdFBhcmVudFdpdGhMYXllckZ1bmN0aW9ucyhsYXllcnRyZWVDdHJsKSAhPT0gbnVsbFwiPlxcbiAgICAgPHNwYW4+e3tcXCdNb3JlIG9wdGlvbnMgYXQgdGhlIGdyb3VwIGxldmVsXFwnfHRyYW5zbGF0ZX19PC9zcGFuPlxcbiAgPC9kaXY+XFxuXFxuICA8ZGl2IG5nLWlmPVwiOjpnbWZMYXllcnRyZWVDdHJsLnN1cHBvcnRzT3BhY2l0eUNoYW5nZShsYXllcnRyZWVDdHJsKVwiPlxcbiAgICA8aSBjbGFzcz1cImZhIGZhLXRpbnQgZmEtZndcIj48L2k+XFxuICAgIDxzcGFuPnt7XFwnT3BhY2l0eVxcJ3x0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gICAgPGlucHV0XFxuICAgICAgICBjbGFzcz1cImlucHV0LWFjdGlvblwiXFxuICAgICAgICB0eXBlPVwicmFuZ2VcIlxcbiAgICAgICAgbWluPVwiMFwiXFxuICAgICAgICBtYXg9XCIxXCJcXG4gICAgICAgIHN0ZXA9XCIwLjAxXCJcXG4gICAgICAgIG5nLW1vZGVsPVwibGF5ZXJ0cmVlQ3RybC5sYXllci5vcGFjaXR5XCIgLz5cXG4gIDwvZGl2PlxcblxcbiAgPGFcXG4gICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLW5vZGUtbWVudS10b2dnbGVsZWdlbmRcIlxcbiAgICBuZy1pZj1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC5zdXBwb3J0c0xlZ2VuZChsYXllcnRyZWVDdHJsKVwiXFxuICAgIG5nLWNsaWNrPVwiOjpnbWZMYXllcnRyZWVDdHJsLnRvZ2dsZU5vZGVMZWdlbmQoXFwnI2dtZi1sYXllcnRyZWUtbm9kZS1cXCcgKyBsYXllcnRyZWVDdHJsLnVpZCArIFxcJy1sZWdlbmRcXCcpXCJcXG4gICAgaHJlZj1cIlwiPlxcbiAgICA8c3BhblxcbiAgICAgICAgY2xhc3M9XCJmYSBmYS10aC1saXN0XCI+XFxuICAgIDwvc3Bhbj5cXG4gICAge3tcXCdTaG93L2hpZGUgbGVnZW5kXFwnfHRyYW5zbGF0ZX19XFxuICA8L2E+XFxuPC9kaXY+XFxuPGRpdlxcbiAgbmctaWY9XCI6OiFsYXllcnRyZWVDdHJsLmlzUm9vdCAmJiBnbWZMYXllcnRyZWVDdHJsLmdldExlZ2VuZHNPYmplY3QobGF5ZXJ0cmVlQ3RybCkgJiYgbGF5ZXJ0cmVlQ3RybC5ub2RlLm1ldGFkYXRhLmxlZ2VuZFwiIGlkPVwiZ21mLWxheWVydHJlZS1ub2RlLXt7OjpsYXllcnRyZWVDdHJsLnVpZH19LWxlZ2VuZFwiXFxuICBjbGFzcz1cImdtZi1sYXllcnRyZWUtbGVnZW5kXCJcXG4gIG5nLWNsYXNzPVwiW2dtZkxheWVydHJlZUN0cmwuZ2V0Tm9kZVN0YXRlKGxheWVydHJlZUN0cmwpLCBsYXllcnRyZWVDdHJsLm5vZGUubWV0YWRhdGEuaXNMZWdlbmRFeHBhbmRlZCA/IFxcJ3Nob3dcXCcgOiBcXCdcXCddXCI+XFxuXFxuICA8YVxcbiAgICB0aXRsZT1cInt7XFwnSGlkZSBsZWdlbmRcXCd8dHJhbnNsYXRlfX1cIlxcbiAgICBuZy1jbGljaz1cIjo6Z21mTGF5ZXJ0cmVlQ3RybC50b2dnbGVOb2RlTGVnZW5kKFxcJyNnbWYtbGF5ZXJ0cmVlLW5vZGUtXFwnICsgbGF5ZXJ0cmVlQ3RybC51aWQgKyBcXCctbGVnZW5kXFwnKVwiXFxuICAgIGhyZWY9XCJcIj5cXG4gICAge3tcXCdIaWRlIGxlZ2VuZFxcJ3x0cmFuc2xhdGV9fVxcbiAgPC9hPlxcbiAgPGRpdiBuZy1pZj1cImdtZkxheWVydHJlZUN0cmwuaXNOb2RlTGVnZW5kVmlzaWJsZShcXCcjZ21mLWxheWVydHJlZS1ub2RlLVxcJyArIGxheWVydHJlZUN0cmwudWlkICsgXFwnLWxlZ2VuZFxcJylcIj5cXG4gICAgPGRpdiBuZy1yZXBlYXQ9XCIodGl0bGUsIHVybCkgaW4gZ21mTGF5ZXJ0cmVlQ3RybC5nZXRMZWdlbmRzT2JqZWN0KGxheWVydHJlZUN0cmwpXCI+XFxuICAgICAgPHAgbmctaWY9XCJnbWZMYXllcnRyZWVDdHJsLmdldE51bWJlck9mTGVnZW5kc09iamVjdChsYXllcnRyZWVDdHJsKSA+IDFcIj57e3RpdGxlfHRyYW5zbGF0ZX19PC9wPlxcbiAgICAgIDxpbWcgbmctc3JjPVwie3t1cmx9fVwiPjwvaW1nPlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2Plxcblxcbjx1bFxcbiAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1yb290LWV4dGVybmFsLWRhdGFzb3VyY2VzXCJcXG4gICBuZy1pZj1cImxheWVydHJlZUN0cmwuaXNSb290ICYmIChnbWZMYXllcnRyZWVDdHJsLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLndtc0dyb3Vwcy5sZW5ndGggfHwgZ21mTGF5ZXJ0cmVlQ3RybC5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlci53bXRzR3JvdXBzLmxlbmd0aCB8fCBnbWZMYXllcnRyZWVDdHJsLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLmZpbGVHcm91cC5kYXRhU291cmNlcy5sZW5ndGgpXCI+XFxuICA8Z21mLWRhdGFzb3VyY2Vncm91cHRyZWVcXG4gICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLW5vZGUgZ21mLWxheWVydHJlZS1kZXB0aC0xXCJcXG4gICAgbmctcmVwZWF0PVwid210c0dyb3VwIGluIGdtZkxheWVydHJlZUN0cmwuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIud210c0dyb3Vwc1wiXFxuICAgIGdyb3VwPVwid210c0dyb3VwXCJcXG4gID5cXG4gIDwvZ21mLWRhdGFzb3VyY2Vncm91cHRyZWU+XFxuICA8Z21mLWRhdGFzb3VyY2Vncm91cHRyZWVcXG4gICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLW5vZGUgZ21mLWxheWVydHJlZS1kZXB0aC0xXCJcXG4gICAgbmctcmVwZWF0PVwid21zR3JvdXAgaW4gZ21mTGF5ZXJ0cmVlQ3RybC5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlci53bXNHcm91cHNcIlxcbiAgICBncm91cD1cIndtc0dyb3VwXCJcXG4gICAgZ2V0LXNjYWxlPVwiZ21mTGF5ZXJ0cmVlQ3RybC5nZXRTY2FsZV8oKVwiXFxuICA+XFxuICA8L2dtZi1kYXRhc291cmNlZ3JvdXB0cmVlPlxcbiAgPGdtZi1kYXRhc291cmNlZ3JvdXB0cmVlXFxuICAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1ub2RlIGdtZi1sYXllcnRyZWUtZGVwdGgtMVwiXFxuICAgIG5nLWlmPVwiZ21mTGF5ZXJ0cmVlQ3RybC5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlci5maWxlR3JvdXAuZGF0YVNvdXJjZXMubGVuZ3RoXCJcXG4gICAgZ3JvdXA9XCJnbWZMYXllcnRyZWVDdHJsLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLmZpbGVHcm91cFwiXFxuICA+XFxuICA8L2dtZi1kYXRhc291cmNlZ3JvdXB0cmVlPlxcbjwvdWw+XFxuXFxuPHVsXFxuICBpZD1cImdtZi1sYXllcnRyZWUtbGF5ZXItZ3JvdXAte3s6OmxheWVydHJlZUN0cmwudWlkfX1cIlxcbiAgbmctaWY9XCI6OmxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlblwiXFxuICBuZy1jbGFzcz1cIntjb2xsYXBzZTogIShsYXllcnRyZWVDdHJsLmlzUm9vdCB8fCBnbWZMYXllcnRyZWVDdHJsLm9wdGlvbnMuaXNFeHBhbmRlZCksIHNob3c6IGxheWVydHJlZUN0cmwubm9kZS5tZXRhZGF0YS5pc0V4cGFuZGVkfVwiXFxuICBuZ2VvLXNvcnRhYmxlPVwiOjpsYXllcnRyZWVDdHJsLmlzUm9vdCAmJiBsYXllcnRyZWVDdHJsLm5vZGUuY2hpbGRyZW5cIlxcbiAgbmdlby1zb3J0YWJsZS1vcHRpb25zPVwie2hhbmRsZUNsYXNzTmFtZTogXFwnbmdlby1zb3J0YWJsZS1oYW5kbGVcXCcsIGRyYWdnZXJDbGFzc05hbWU6IFxcJ2dtZi1sYXllcnRyZWUtZHJhZ2dlclxcJywgcGxhY2Vob2xkZXJDbGFzc05hbWUgOiBcXCdnbWYtbGF5ZXJ0cmVlLWN1cnItZHJhZy1pdGVtXFwnfVwiXFxuICBuZ2VvLXNvcnRhYmxlLWNhbGxiYWNrPVwiOjpnbWZMYXllcnRyZWVDdHJsLmFmdGVyUmVvcmRlclwiXFxuICBuZ2VvLXNvcnRhYmxlLWNhbGxiYWNrLWN0eD1cIjo6Z21mTGF5ZXJ0cmVlQ3RybFwiPlxcblxcbiAgPGxpXFxuICAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1ub2RlXCJcXG4gICAgbmctcmVwZWF0PVwibm9kZSBpbiBsYXllcnRyZWVDdHJsLm5vZGUuY2hpbGRyZW5cIlxcbiAgICBuZy1jbGFzcz1cIlxcJ2dtZi1sYXllcnRyZWUtZGVwdGgtXFwnICsgbGF5ZXJ0cmVlQ3RybC5kZXB0aFwiXFxuICAgIG5nZW8tbGF5ZXJ0cmVlPVwibm9kZVwiXFxuICAgIG5nZW8tbGF5ZXJ0cmVlLW5vdHJvb3RcXG4gICAgbmdlby1sYXllcnRyZWUtbWFwPVwibGF5ZXJ0cmVlQ3RybC5tYXBcIlxcbiAgICBuZ2VvLWxheWVydHJlZS1ub2RlbGF5ZXJleHByPVwibGF5ZXJ0cmVlQ3RybC5ub2RlbGF5ZXJFeHByXCJcXG4gICAgbmdlby1sYXllcnRyZWUtbGlzdGVuZXJzZXhwcj1cImxheWVydHJlZUN0cmwubGlzdGVuZXJzRXhwclwiPlxcbiAgPC9saT5cXG48L3VsPlxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkZWxlbWVudFwiLCBcIiRzY29wZVwiLCBcIm5nZW9MYXllckhlbHBlclwiLCBcImdtZkxheWVyQmVpbmdTd2lwZVwiLCBcImdtZkRhdGFTb3VyY2VCZWluZ0ZpbHRlcmVkXCIsIFwiZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJcIiwgXCJnbWZQZXJtYWxpbmtcIiwgXCJnbWZUcmVlTWFuYWdlclwiLCBcImdtZlN5bmNMYXllcnRyZWVNYXBcIiwgXCJuZ2VvV01TVGltZVwiLCBcImdtZlRoZW1lc1wiLCBcIiR0aW1lb3V0XCIsIFwiZ21mTGF5ZXJUcmVlT3B0aW9uc1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgREFUQUxBWUVSR1JPVVBfTkFNRSB9IGZyb20gJ2dtZi9pbmRleC5qcyc7XG5pbXBvcnQgZ21mRGF0YXNvdXJjZURhdGFTb3VyY2VCZWluZ0ZpbHRlcmVkIGZyb20gJ2dtZi9kYXRhc291cmNlL0RhdGFTb3VyY2VCZWluZ0ZpbHRlcmVkLmpzJztcbmltcG9ydCBnbWZMYXllckJlaW5nU3dpcGUgZnJvbSAnZ21mL2RhdGFzb3VyY2UvTGF5ZXJCZWluZ1N3aXBlLmpzJztcbmltcG9ydCBnbWZEYXRhc291cmNlRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIgZnJvbSAnZ21mL2RhdGFzb3VyY2UvRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIuanMnO1xuaW1wb3J0IGdtZlBlcm1hbGlua1Blcm1hbGluayBmcm9tICdnbWYvcGVybWFsaW5rL1Blcm1hbGluay5qcyc7XG5pbXBvcnQgZ21mTGF5ZXJ0cmVlRGF0YXNvdXJjZUdyb3VwVHJlZUNvbXBvbmVudCBmcm9tICdnbWYvbGF5ZXJ0cmVlL2RhdGFzb3VyY2VHcm91cFRyZWVDb21wb25lbnQuanMnO1xuaW1wb3J0IGdtZkxheWVydHJlZVN5bmNMYXllcnRyZWVNYXAgZnJvbSAnZ21mL2xheWVydHJlZS9TeW5jTGF5ZXJ0cmVlTWFwLmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlciBmcm9tICdnbWYvbGF5ZXJ0cmVlL1RyZWVNYW5hZ2VyLmpzJztcbmltcG9ydCBnbWZUaGVtZVRoZW1lcywgeyBnZXROb2RlTWluUmVzb2x1dGlvbiwgZ2V0Tm9kZU1heFJlc29sdXRpb24sIGdldFNuYXBwaW5nQ29uZmlnIH0gZnJvbSAnZ21mL3RoZW1lL1RoZW1lcy5qcyc7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VPR0MsIHsgU2VydmVyVHlwZSB9IGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuaW1wb3J0IG5nZW9MYXllcnRyZWVDb21wb25lbnQgZnJvbSAnbmdlby9sYXllcnRyZWUvY29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlciwgeyBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24gfSBmcm9tICduZ2VvL2xheWVydHJlZS9Db250cm9sbGVyLmpzJztcbmltcG9ydCBuZ2VvTWFwTGF5ZXJIZWxwZXIgZnJvbSAnbmdlby9tYXAvTGF5ZXJIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjU3luY0FycmF5cyBmcm9tICduZ2VvL21pc2Mvc3luY0FycmF5cy5qcyc7XG5pbXBvcnQgbmdlb01pc2NXTVNUaW1lIGZyb20gJ25nZW8vbWlzYy9XTVNUaW1lLmpzJztcbmltcG9ydCBvbExheWVyVGlsZSBmcm9tICdvbC9sYXllci9UaWxlLmpzJztcbmltcG9ydCBvbExheWVyTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ29sL29iai5qcyc7XG5pbXBvcnQgb2xTb3VyY2VJbWFnZVdNUyBmcm9tICdvbC9zb3VyY2UvSW1hZ2VXTVMuanMnO1xuaW1wb3J0IG9sU291cmNlVGlsZVdNUyBmcm9tICdvbC9zb3VyY2UvVGlsZVdNUy5qcyc7XG5pbXBvcnQgb2xTb3VyY2VXTVRTIGZyb20gJ29sL3NvdXJjZS9XTVRTLmpzJztcbmltcG9ydCBMYXllckJhc2UgZnJvbSAnb2wvbGF5ZXIvQmFzZS5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2pzL3NyYy9jb2xsYXBzZS5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mTGF5ZXJ0cmVlQ29tcG9uZW50JywgW2dtZkRhdGFzb3VyY2VEYXRhU291cmNlQmVpbmdGaWx0ZXJlZC5uYW1lLCBnbWZEYXRhc291cmNlRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIubmFtZSwgZ21mUGVybWFsaW5rUGVybWFsaW5rLm5hbWUsIGdtZkxheWVydHJlZURhdGFzb3VyY2VHcm91cFRyZWVDb21wb25lbnQubmFtZSwgZ21mTGF5ZXJ0cmVlU3luY0xheWVydHJlZU1hcC5uYW1lLCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlci5uYW1lLCBnbWZUaGVtZVRoZW1lcy5uYW1lLCBuZ2VvTGF5ZXJ0cmVlQ29tcG9uZW50Lm5hbWUsIG5nZW9MYXllcnRyZWVDb250cm9sbGVyLm5hbWUsIG5nZW9NYXBMYXllckhlbHBlci5uYW1lLCBuZ2VvTWlzY1dNU1RpbWUubmFtZSwgZ21mTGF5ZXJCZWluZ1N3aXBlLm5hbWVdKTtcbm15TW9kdWxlLnZhbHVlKCduZ2VvTGF5ZXJ0cmVlVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cnMpIHtcbiAgcmV0dXJuICdnbWYvbGF5ZXJ0cmVlJztcbn0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2dtZi9sYXllcnRyZWUnLCByZXF1aXJlKCcuL2NvbXBvbmVudC5odG1sJykpO1xufV0pO1xubXlNb2R1bGUudmFsdWUoJ2dtZkxheWVydHJlZVRlbXBsYXRlJywgZnVuY3Rpb24gKCRlbGVtZW50LCAkYXR0cnMpIHtcbiAgdmFyIHN1YlRlbXBsYXRlVXJsID0gJ2dtZi9sYXllcnRyZWUnO1xuICByZXR1cm4gJzxkaXYgbmdlby1sYXllcnRyZWU9XCJnbWZMYXllcnRyZWVDdHJsLnJvb3RcIiAnICsgJ25nZW8tbGF5ZXJ0cmVlLW1hcD1cImdtZkxheWVydHJlZUN0cmwubWFwXCIgJyArICduZ2VvLWxheWVydHJlZS1ub2RlbGF5ZXI9XCJnbWZMYXllcnRyZWVDdHJsLmdldExheWVyKHRyZWVDdHJsKVwiICcgKyAnbmdlby1sYXllcnRyZWUtbGlzdGVuZXJzPVwiZ21mTGF5ZXJ0cmVlQ3RybC5saXN0ZW5lcnModHJlZVNjb3BlLCB0cmVlQ3RybClcIiAnICsgKFwibmdlby1sYXllcnRyZWUtdGVtcGxhdGV1cmw9XFxcIlwiICsgc3ViVGVtcGxhdGVVcmwgKyBcIlxcXCI+XCIpICsgJzwvZGl2Pic7XG59KTtcbmdtZkxheWVydHJlZVRlbXBsYXRlLiRpbmplY3QgPSBbXCIkZWxlbWVudFwiLCBcIiRhdHRyc1wiLCBcImdtZkxheWVydHJlZVRlbXBsYXRlXCJdO1xuXG5mdW5jdGlvbiBnbWZMYXllcnRyZWVUZW1wbGF0ZSgkZWxlbWVudCwgJGF0dHJzLCBnbWZMYXllcnRyZWVUZW1wbGF0ZSkge1xuICByZXR1cm4gZ21mTGF5ZXJ0cmVlVGVtcGxhdGUoJGVsZW1lbnQsICRhdHRycyk7XG59XG5cbnZhciBsYXllcnRyZWVDb21wb25lbnQgPSB7XG4gIGNvbnRyb2xsZXI6ICdHbWZMYXllcnRyZWVDb250cm9sbGVyIGFzIGdtZkxheWVydHJlZUN0cmwnLFxuICBiaW5kaW5nczoge1xuICAgICdtYXAnOiAnPWdtZkxheWVydHJlZU1hcCcsXG4gICAgJ2RpbWVuc2lvbnMnOiAnPT9nbWZMYXllcnRyZWVEaW1lbnNpb25zJ1xuICB9LFxuICB0ZW1wbGF0ZTogZ21mTGF5ZXJ0cmVlVGVtcGxhdGVcbn07XG5teU1vZHVsZS5jb21wb25lbnQoJ2dtZkxheWVydHJlZScsIGxheWVydHJlZUNvbXBvbmVudCk7XG5leHBvcnQgZnVuY3Rpb24gQ29udHJvbGxlcigkZWxlbWVudCwgJHNjb3BlLCBuZ2VvTGF5ZXJIZWxwZXIsIGdtZkxheWVyQmVpbmdTd2lwZSwgZ21mRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQsIGdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLCBnbWZQZXJtYWxpbmssIGdtZlRyZWVNYW5hZ2VyLCBnbWZTeW5jTGF5ZXJ0cmVlTWFwLCBuZ2VvV01TVGltZSwgZ21mVGhlbWVzLCAkdGltZW91dCwgZ21mTGF5ZXJUcmVlT3B0aW9ucykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMub3B0aW9ucyA9IGdtZkxheWVyVHJlZU9wdGlvbnM7XG4gIHRoaXMubWFwO1xuICB0aGlzLmRpbWVuc2lvbnMgPSBudWxsO1xuICB0aGlzLnNjb3BlXyA9ICRzY29wZTtcbiAgdGhpcy5sYXllckhlbHBlcl8gPSBuZ2VvTGF5ZXJIZWxwZXI7XG4gIHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlID0gZ21mTGF5ZXJCZWluZ1N3aXBlO1xuICB0aGlzLmdtZkRhdGFTb3VyY2VCZWluZ0ZpbHRlcmVkID0gZ21mRGF0YVNvdXJjZUJlaW5nRmlsdGVyZWQ7XG4gIHRoaXMuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXIgPSBnbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcjtcbiAgdGhpcy5nbWZQZXJtYWxpbmtfID0gZ21mUGVybWFsaW5rO1xuICB0aGlzLmdtZlRyZWVNYW5hZ2VyXyA9IGdtZlRyZWVNYW5hZ2VyO1xuICB2YXIgcm9vdCA9IGdtZlRyZWVNYW5hZ2VyLnJvb3Q7XG5cbiAgaWYgKCFyb290KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJvb3QnKTtcbiAgfVxuXG4gIHRoaXMucm9vdCA9IHJvb3Q7XG4gIHRoaXMuZ21mU3luY0xheWVydHJlZU1hcF8gPSBnbWZTeW5jTGF5ZXJ0cmVlTWFwO1xuICB0aGlzLm5nZW9XTVNUaW1lXyA9IG5nZW9XTVNUaW1lO1xuICB0aGlzLmdyb3VwTm9kZVN0YXRlc18gPSB7fTtcbiAgdGhpcy5kYXRhTGF5ZXJHcm91cF8gPSBudWxsO1xuICB0aGlzLmxheWVycyA9IFtdO1xuICB0aGlzLmdtZlRoZW1lc18gPSBnbWZUaGVtZXM7XG4gIHRoaXMuJHRpbWVvdXRfID0gJHRpbWVvdXQ7XG4gICRlbGVtZW50Lm9uKCdzaG93bi5icy5jb2xsYXBzZScsIGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy5zY29wZV8uJGFwcGx5KCk7XG4gIH0pO1xufVxuXG5Db250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICB0aGlzLmRhdGFMYXllckdyb3VwXyA9IHRoaXMubGF5ZXJIZWxwZXJfLmdldEdyb3VwRnJvbU1hcCh0aGlzLm1hcCwgREFUQUxBWUVSR1JPVVBfTkFNRSk7XG4gIG5nZW9NaXNjU3luY0FycmF5cyh0aGlzLmRhdGFMYXllckdyb3VwXy5nZXRMYXllcnMoKS5nZXRBcnJheSgpLCB0aGlzLmxheWVycywgdHJ1ZSwgdGhpcy5zY29wZV8sIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG4gIHRoaXMuc2NvcGVfLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpczIubGF5ZXJzO1xuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMyLm1hcC5yZW5kZXIoKTtcblxuICAgIGlmIChfdGhpczIuZ21mTGF5ZXJCZWluZ1N3aXBlLmxheWVyICYmICFfdGhpczIubGF5ZXJzLmluY2x1ZGVzKF90aGlzMi5nbWZMYXllckJlaW5nU3dpcGUubGF5ZXIpKSB7XG4gICAgICBfdGhpczIuZ21mTGF5ZXJCZWluZ1N3aXBlLmxheWVyID0gbnVsbDtcbiAgICB9XG4gIH0pO1xuICB0aGlzLnNjb3BlXy4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX3RoaXMyLmdtZlRyZWVNYW5hZ2VyXy5yb290Q3RybCkge1xuICAgICAgcmV0dXJuIF90aGlzMi5kaW1lbnNpb25zO1xuICAgIH1cbiAgfSwgZnVuY3Rpb24gKGRpbWVuc2lvbnMpIHtcbiAgICBpZiAoZGltZW5zaW9ucykge1xuICAgICAgaWYgKCFfdGhpczIuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwnKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMyLnVwZGF0ZURpbWVuc2lvbnNfKF90aGlzMi5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVEaW1lbnNpb25zXyA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgX3RoaXMzID0gdGhpcztcblxuICB0cmVlQ3RybC50cmF2ZXJzZURlcHRoRmlyc3QoZnVuY3Rpb24gKGN0cmwpIHtcbiAgICBpZiAoY3RybC5ub2RlLmRpbWVuc2lvbnMpIHtcbiAgICAgIHZhciBsYXllciA9IGN0cmwubGF5ZXI7XG5cbiAgICAgIGlmICghKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckxheWVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGZlYXR1cmUgdHlwZScpO1xuICAgICAgfVxuXG4gICAgICBfdGhpczMudXBkYXRlTGF5ZXJEaW1lbnNpb25zXyhsYXllciwgY3RybC5ub2RlKTtcblxuICAgICAgcmV0dXJuIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5ERVNDRU5EO1xuICAgIH1cbiAgfSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVMYXllckRpbWVuc2lvbnNfID0gZnVuY3Rpb24gKGxheWVyLCBub2RlKSB7XG4gIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gIGlmICh0aGlzLmRpbWVuc2lvbnMgJiYgbm9kZS5kaW1lbnNpb25zKSB7XG4gICAgdmFyIGRpbWVuc2lvbnMgPSB7fTtcblxuICAgIGZvciAodmFyIGtleSBpbiBub2RlLmRpbWVuc2lvbnMpIHtcbiAgICAgIGlmIChub2RlLmRpbWVuc2lvbnNba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGRpbWVuc2lvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaW1lbnNpb25zW2tleV0gPSBub2RlLmRpbWVuc2lvbnNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzRW1wdHkoZGltZW5zaW9ucykpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcblxuICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlV01UUykge1xuICAgICAgICBzb3VyY2UudXBkYXRlRGltZW5zaW9ucyhkaW1lbnNpb25zKTtcbiAgICAgIH0gZWxzZSBpZiAoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VUaWxlV01TIHx8IHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlSW1hZ2VXTVMpIHtcbiAgICAgICAgc291cmNlLnVwZGF0ZVBhcmFtcyhkaW1lbnNpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxheWVyLm9uY2UoJ2NoYW5nZTpzb3VyY2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCEobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyTGF5ZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGZlYXR1cmUgdHlwZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzNC51cGRhdGVMYXllckRpbWVuc2lvbnNfKGxheWVyLCBub2RlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5nZXRMYXllciA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICBpZiAoIXRoaXMuZGF0YUxheWVyR3JvdXBfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFMYXllckdyb3VwJyk7XG4gIH1cblxuICB2YXIgb3B0X3Bvc2l0aW9uO1xuXG4gIGlmICh0cmVlQ3RybC5wYXJlbnQuaXNSb290KSB7XG4gICAgdGhpcy5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwgPSB0cmVlQ3RybC5wYXJlbnQ7XG4gICAgb3B0X3Bvc2l0aW9uID0gdGhpcy5nbWZUcmVlTWFuYWdlcl8ucm9vdC5jaGlsZHJlbi5sZW5ndGggLSB0aGlzLmdtZlRyZWVNYW5hZ2VyXy5udW1iZXJPZkdyb3Vwc1RvQWRkSW5UaGlzRGlnZXN0TG9vcCB8fCAwO1xuICB9XG5cbiAgdmFyIGxheWVyID0gdGhpcy5nbWZTeW5jTGF5ZXJ0cmVlTWFwXy5jcmVhdGVMYXllcih0cmVlQ3RybCwgdGhpcy5tYXAsIHRoaXMuZGF0YUxheWVyR3JvdXBfLCBvcHRfcG9zaXRpb24pO1xuXG4gIGlmIChsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJMYXllcikge1xuICAgIHZhciBub2RlID0gdHJlZUN0cmwubm9kZTtcbiAgICB0aGlzLnVwZGF0ZUxheWVyRGltZW5zaW9uc18obGF5ZXIsIG5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIGxheWVyO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gKHNjb3BlLCB0cmVlQ3RybCkge1xuICBpZiAoIXRoaXMuZGF0YUxheWVyR3JvdXBfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFMYXllckdyb3VwJyk7XG4gIH1cblxuICB2YXIgZGF0YUxheWVyR3JvdXAgPSB0aGlzLmRhdGFMYXllckdyb3VwXztcbiAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHJlZUN0cmwubGF5ZXIpIHtcbiAgICAgIGRhdGFMYXllckdyb3VwLmdldExheWVycygpLnJlbW92ZSh0cmVlQ3RybC5sYXllcik7XG4gICAgfVxuICB9KTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZUFjdGl2ZSA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgc3RhdGUgPSB0cmVlQ3RybC5nZXRTdGF0ZSgpO1xuXG4gIGlmICh0cmVlQ3RybC5ub2RlLm1ldGFkYXRhICYmIHRyZWVDdHJsLm5vZGUubWV0YWRhdGEuZXhjbHVzaXZlR3JvdXApIHtcbiAgICB0cmVlQ3RybC5zZXRTdGF0ZShzdGF0ZSA9PT0gJ29mZicgPyAnb24nIDogJ29mZicpO1xuICB9IGVsc2Uge1xuICAgIHRyZWVDdHJsLnNldFN0YXRlKHN0YXRlID09PSAnb24nID8gJ29mZicgOiAnb24nKTtcbiAgfVxufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0Tm9kZVN0YXRlID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHJldHVybiB0cmVlQ3RybC5nZXRTdGF0ZSgpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVGltZURhdGEgPSBmdW5jdGlvbiAobGF5ZXJ0cmVlQ3RybCwgdGltZSkge1xuICB0aGlzLnVwZGF0ZVdNU1RpbWVMYXllclN0YXRlKGxheWVydHJlZUN0cmwsIHRpbWUpO1xuICB0aGlzLmdtZlBlcm1hbGlua18ucmVmcmVzaExheWVyVGltZShsYXllcnRyZWVDdHJsLCB0aW1lKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVdNU1RpbWVMYXllclN0YXRlID0gZnVuY3Rpb24gKGxheWVydHJlZUN0cmwsIHRpbWUpIHtcbiAgaWYgKCF0aW1lKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGRhdGFTb3VyY2UgPSBsYXllcnRyZWVDdHJsLmdldERhdGFTb3VyY2UoKTtcblxuICBpZiAoZGF0YVNvdXJjZSkge1xuICAgIGlmICghKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZGF0YVNvdXJjZSB0eXBlJyk7XG4gICAgfVxuXG4gICAgZGF0YVNvdXJjZS50aW1lUmFuZ2VWYWx1ZSA9IHRpbWU7XG4gIH0gZWxzZSBpZiAobGF5ZXJ0cmVlQ3RybC5jaGlsZHJlbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVydHJlZUN0cmwuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdGhpcy51cGRhdGVXTVNUaW1lTGF5ZXJTdGF0ZShsYXllcnRyZWVDdHJsLmNoaWxkcmVuW2ldLCB0aW1lKTtcbiAgICB9XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldExlZ2VuZEljb25VUkwgPSBmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgdmFyIGljb25VcmwgPSB0cmVlQ3RybC5ub2RlLm1ldGFkYXRhLmljb25Vcmw7XG5cbiAgaWYgKGljb25VcmwgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBpY29uVXJsO1xuICB9XG5cbiAgdmFyIGdtZkdyb3VwID0gdHJlZUN0cmwubm9kZTtcblxuICBpZiAoZ21mR3JvdXAuY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgZ21mTGF5ZXIgPSB0cmVlQ3RybC5ub2RlO1xuXG4gIGlmIChnbWZMYXllci50eXBlICE9PSAnV01TJykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgZ21mTGF5ZXJXTVMgPSBnbWZMYXllcjtcbiAgdmFyIGxlZ2VuZFJ1bGUgPSBnbWZMYXllcldNUy5tZXRhZGF0YS5sZWdlbmRSdWxlO1xuXG4gIGlmIChsZWdlbmRSdWxlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIGxheWVyTmFtZSA9IGdtZkxheWVyV01TLmxheWVycy5zcGxpdCgnLCcpWzBdO1xuICB2YXIgZ21mT2djU2VydmVyID0gdGhpcy5nbWZUcmVlTWFuYWdlcl8uZ2V0T2djU2VydmVyKHRyZWVDdHJsKTtcbiAgcmV0dXJuIHRoaXMubGF5ZXJIZWxwZXJfLmdldFdNU0xlZ2VuZFVSTChnbWZPZ2NTZXJ2ZXIudXJsLCBsYXllck5hbWUsIHVuZGVmaW5lZCwgbGVnZW5kUnVsZSwgMjAsIDIwKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldExlZ2VuZHNPYmplY3QgPSBmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgdmFyIGxlZ2VuZHNPYmplY3QgPSB7fTtcblxuICBpZiAodHJlZUN0cmwubm9kZS5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZ21mTGF5ZXIgPSB0cmVlQ3RybC5ub2RlO1xuICB2YXIgZ21mTGF5ZXJEZWZhdWx0TmFtZSA9IGdtZkxheWVyLm5hbWU7XG5cbiAgaWYgKGdtZkxheWVyLm1ldGFkYXRhLmxlZ2VuZEltYWdlKSB7XG4gICAgbGVnZW5kc09iamVjdFtnbWZMYXllckRlZmF1bHROYW1lXSA9IGdtZkxheWVyLm1ldGFkYXRhLmxlZ2VuZEltYWdlO1xuICAgIHJldHVybiBsZWdlbmRzT2JqZWN0O1xuICB9XG5cbiAgdmFyIGxheWVyID0gdHJlZUN0cmwubGF5ZXI7XG5cbiAgaWYgKGdtZkxheWVyLnR5cGUgPT09ICdXTVRTJykge1xuICAgIGlmICghKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllclRpbGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGxheWVyJyk7XG4gICAgfVxuXG4gICAgdmFyIHdtdHNMZWdlbmRVUkwgPSB0aGlzLmxheWVySGVscGVyXy5nZXRXTVRTTGVnZW5kVVJMKGxheWVyKTtcblxuICAgIGlmICh3bXRzTGVnZW5kVVJMICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxlZ2VuZHNPYmplY3RbZ21mTGF5ZXJEZWZhdWx0TmFtZV0gPSB3bXRzTGVnZW5kVVJMO1xuICAgIH1cblxuICAgIHJldHVybiB3bXRzTGVnZW5kVVJMID8gbGVnZW5kc09iamVjdCA6IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGdtZkxheWVyV01TID0gZ21mTGF5ZXI7XG4gICAgdmFyIGxheWVyc05hbWVzID0gZ21mTGF5ZXJXTVMubGF5ZXJzO1xuICAgIHZhciBnbWZPZ2NTZXJ2ZXIgPSB0aGlzLmdtZlRyZWVNYW5hZ2VyXy5nZXRPZ2NTZXJ2ZXIodHJlZUN0cmwpO1xuICAgIHZhciBzY2FsZSA9IHRoaXMuZ2V0U2NhbGVfKCk7XG4gICAgdmFyIGxheWVyTmFtZXNMaXN0O1xuXG4gICAgaWYgKGdtZk9nY1NlcnZlci50eXBlID09PSBTZXJ2ZXJUeXBlLlFHSVNTRVJWRVIpIHtcbiAgICAgIGxheWVyTmFtZXNMaXN0ID0gW2xheWVyc05hbWVzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5ZXJOYW1lc0xpc3QgPSBsYXllcnNOYW1lcy5zcGxpdCgnLCcpO1xuICAgIH1cblxuICAgIGxheWVyTmFtZXNMaXN0LmZvckVhY2goZnVuY3Rpb24gKGxheWVyTmFtZSkge1xuICAgICAgdmFyIHdtdHNMZWdlbmRVUkwgPSBfdGhpczUubGF5ZXJIZWxwZXJfLmdldFdNU0xlZ2VuZFVSTChnbWZPZ2NTZXJ2ZXIudXJsLCBsYXllck5hbWUsIHNjYWxlKTtcblxuICAgICAgaWYgKCF3bXRzTGVnZW5kVVJMKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB3bXRzTGVnZW5kVVJMJyk7XG4gICAgICB9XG5cbiAgICAgIGxlZ2VuZHNPYmplY3RbbGF5ZXJOYW1lXSA9IHdtdHNMZWdlbmRVUkw7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxlZ2VuZHNPYmplY3Q7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldE51bWJlck9mTGVnZW5kc09iamVjdCA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgbGVnZW5kc09iamVjdCA9IHRoaXMuZ2V0TGVnZW5kc09iamVjdCh0cmVlQ3RybCk7XG4gIHJldHVybiBsZWdlbmRzT2JqZWN0ID8gT2JqZWN0LmtleXMobGVnZW5kc09iamVjdCkubGVuZ3RoIDogMDtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldFNjYWxlXyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZpZXcgPSB0aGlzLm1hcC5nZXRWaWV3KCk7XG4gIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgaWYgKHJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXNvbHV0aW9uJyk7XG4gIH1cblxuICB2YXIgbXB1ID0gdmlldy5nZXRQcm9qZWN0aW9uKCkuZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuXG4gIGlmICghbXB1KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1wdScpO1xuICB9XG5cbiAgdmFyIGRwaSA9IDI1LjQgLyAwLjI4O1xuICByZXR1cm4gcmVzb2x1dGlvbiAqIG1wdSAqIDM5LjM3ICogZHBpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuaXNTbmFwcGluZ0FjdGl2YXRlZCA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICBpZiAodHJlZUN0cmwucHJvcGVydGllcy5zbmFwcGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiB0cmVlQ3RybC5wcm9wZXJ0aWVzLnNuYXBwaW5nICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc25hcHBpbmdBY3RpdmUgdHlwZScpO1xuICAgIH1cblxuICAgIHJldHVybiB0cmVlQ3RybC5wcm9wZXJ0aWVzLnNuYXBwaW5nO1xuICB9XG5cbiAgdmFyIG5vZGUgPSB0cmVlQ3RybC5ub2RlO1xuICB2YXIgY29uZmlnID0gZ2V0U25hcHBpbmdDb25maWcobm9kZSk7XG4gIHJldHVybiBjb25maWcgIT09IG51bGwgJiYgY29uZmlnLmFjdGl2YXRlZDtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZVNuYXBwaW5nID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHRyZWVDdHJsLnByb3BlcnRpZXMuc25hcHBpbmcgPSAhdGhpcy5pc1NuYXBwaW5nQWN0aXZhdGVkKHRyZWVDdHJsKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmRpc3BsYXlNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgbm9kZSA9IHRyZWVDdHJsLm5vZGU7XG4gIHZhciBtZXRhZGF0YVVSTCA9IG5vZGUubWV0YWRhdGEubWV0YWRhdGFVcmw7XG5cbiAgaWYgKG1ldGFkYXRhVVJMICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZ21meCA9IHdpbmRvdy5nbWZ4O1xuXG4gICAgaWYgKGdtZngub3BlbklmcmFtZVBvcHVwKSB7XG4gICAgICBnbWZ4Lm9wZW5JZnJhbWVQb3B1cChtZXRhZGF0YVVSTCwgbm9kZS5uYW1lLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZmFsc2UpO1xuICAgIH1cbiAgfVxufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuYWZ0ZXJSZW9yZGVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICBpZiAoIXRoaXMuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdtZlRyZWVNYW5hZ2VyXy5yb290Q3RybCcpO1xuICB9XG5cbiAgdmFyIGdtZlJvb3RHcm91cCA9IHRoaXMuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsLm5vZGU7XG4gIHZhciBncm91cE5vZGVzID0gZ21mUm9vdEdyb3VwLmNoaWxkcmVuO1xuICB2YXIgY3VycmVudFRyZWVDdHJscyA9IHRoaXMuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsLmNoaWxkcmVuO1xuICB2YXIgdHJlZUN0cmxzID0gW107XG4gIGdyb3VwTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgIGN1cnJlbnRUcmVlQ3RybHMuc29tZShmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgICAgIGlmICh0cmVlQ3RybC5ub2RlID09PSBub2RlKSB7XG4gICAgICAgIHRyZWVDdHJscy5wdXNoKHRyZWVDdHJsKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH0pO1xuICB0aGlzLmdtZlRyZWVNYW5hZ2VyXy5yb290Q3RybC5jaGlsZHJlbiA9IHRyZWVDdHJscztcbiAgdGhpcy5sYXllcnMubGVuZ3RoID0gMDtcbiAgdGhpcy5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICBpZiAoIShjaGlsZC5sYXllciBpbnN0YW5jZW9mIExheWVyQmFzZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgY2hpbGQubGF5ZXInKTtcbiAgICB9XG5cbiAgICBfdGhpczYubGF5ZXJzLnB1c2goY2hpbGQubGF5ZXIpO1xuICB9KTtcbiAgdGhpcy5nbWZQZXJtYWxpbmtfLnJlZnJlc2hGaXJzdExldmVsR3JvdXBzKCk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS50YWdQb3B1cCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gIHZhciB1aWQgPSBnZXRVaWQobm9kZSk7XG4gIHZhciBwb3B1cElkID0gJChcIiNwb3B1cC1pZC1cIiArIHVpZCkuYXR0cignYXJpYS1kZXNjcmliZWRieScpO1xuXG4gIGlmICghbm9kZS5wb3B1cElkKSB7XG4gICAgbm9kZS5wb3B1cElkID0gcG9wdXBJZDtcbiAgfSBlbHNlIHtcbiAgICBkZWxldGUgbm9kZS5wb3B1cElkO1xuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmVOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgdGhpcy5nbWZUcmVlTWFuYWdlcl8ucGFyc2VUcmVlTm9kZXMobm9kZSk7XG4gIHRoaXMuZ21mVHJlZU1hbmFnZXJfLnJlbW92ZUdyb3VwKG5vZGUpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlQWxsTm9kZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZ21mVHJlZU1hbmFnZXJfLnBhcnNlVHJlZU5vZGVzKHRoaXMucm9vdCk7XG4gIHRoaXMuZ21mVHJlZU1hbmFnZXJfLnJlbW92ZUFsbCgpO1xuICB0aGlzLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyLnJlbW92ZUFsbCgpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUubm9kZXNDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZ21mVHJlZU1hbmFnZXJfLnJvb3QuY2hpbGRyZW4ubGVuZ3RoO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvblN0eWxlID0gZnVuY3Rpb24gKGdtZkxheWVyKSB7XG4gIHZhciByZXNvbHV0aW9uID0gdGhpcy5tYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcblxuICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgfVxuXG4gIHZhciBtaW5SZXNvbHV0aW9uID0gZ2V0Tm9kZU1pblJlc29sdXRpb24oZ21mTGF5ZXIpO1xuXG4gIGlmIChtaW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVzb2x1dGlvbiA8IG1pblJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gJ291dC1vZi1yZXNvbHV0aW9uJztcbiAgfVxuXG4gIHZhciBtYXhSZXNvbHV0aW9uID0gZ2V0Tm9kZU1heFJlc29sdXRpb24oZ21mTGF5ZXIpO1xuXG4gIGlmIChtYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVzb2x1dGlvbiA+IG1heFJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gJ291dC1vZi1yZXNvbHV0aW9uJztcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS56b29tVG9SZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBnbWZMYXllciA9IHRyZWVDdHJsLm5vZGU7XG4gIHZhciB2aWV3ID0gdGhpcy5tYXAuZ2V0VmlldygpO1xuICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuXG4gIGlmIChyZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVzb2x1dGlvbicpO1xuICB9XG5cbiAgdmFyIG1pblJlc29sdXRpb24gPSBnZXROb2RlTWluUmVzb2x1dGlvbihnbWZMYXllcik7XG4gIHZhciBjb25zdHJhaW5SZXNvbHV0aW9uID0gdmlldy5nZXRDb25zdHJhaW50cygpLnJlc29sdXRpb247XG4gIHZhciBzaXplID0gdGhpcy5tYXAuZ2V0U2l6ZSgpO1xuXG4gIGlmIChzaXplID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2l6ZScpO1xuICB9XG5cbiAgaWYgKG1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCAmJiByZXNvbHV0aW9uIDwgbWluUmVzb2x1dGlvbikge1xuICAgIHZpZXcuc2V0UmVzb2x1dGlvbihjb25zdHJhaW5SZXNvbHV0aW9uKG1pblJlc29sdXRpb24sIDEsIHNpemUpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IGdldE5vZGVNYXhSZXNvbHV0aW9uKGdtZkxheWVyKTtcblxuICAgIGlmIChtYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVzb2x1dGlvbiA+IG1heFJlc29sdXRpb24pIHtcbiAgICAgIHZpZXcuc2V0UmVzb2x1dGlvbihjb25zdHJhaW5SZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIC0xLCBzaXplKSk7XG4gICAgfVxuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS50b2dnbGVTd2lwZUxheWVyID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gIGlmICghdHJlZUN0cmwubGF5ZXIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdObyBsYXllcicpO1xuICB9IGVsc2UgaWYgKHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlLmxheWVyID09PSB0cmVlQ3RybC5sYXllcikge1xuICAgIHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlLmxheWVyID0gbnVsbDtcbiAgICB0aGlzLm1hcC5yZW5kZXIoKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmdtZkxheWVyQmVpbmdTd2lwZS5sYXllciA9IG51bGw7XG4gICAgdGhpcy4kdGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXM3LmdtZkxheWVyQmVpbmdTd2lwZS5sYXllciA9IHRyZWVDdHJsLmxheWVyO1xuXG4gICAgICBfdGhpczcubWFwLnJlbmRlcigpO1xuICAgIH0sIDApO1xuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS50b2dnbGVOb2RlTGVnZW5kID0gZnVuY3Rpb24gKGxlZ2VuZE5vZGVJZCkge1xuICB2YXIgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsZWdlbmROb2RlSWQpO1xuXG4gIGlmIChkaXYpIHtcbiAgICBkaXYuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS50b2dnbGVOb2RlTWVudSA9IGZ1bmN0aW9uIChtZW51Tm9kZUlkKSB7XG4gIHZhciBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1lbnVOb2RlSWQpO1xuXG4gIGlmIChkaXYpIHtcbiAgICBkaXYuY2xhc3NMaXN0LnRvZ2dsZSgnZC1ub25lJyk7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZUZpbHRyYWJsZURhdGFTb3VyY2UgPSBmdW5jdGlvbiAoZHMpIHtcbiAgdGhpcy5nbWZEYXRhU291cmNlQmVpbmdGaWx0ZXJlZC5kYXRhU291cmNlID0gZHM7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5pc05vZGVMZWdlbmRWaXNpYmxlID0gZnVuY3Rpb24gKGxlZ2VuZE5vZGVJZCkge1xuICByZXR1cm4gJChsZWdlbmROb2RlSWQpLmlzKCc6dmlzaWJsZScpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuc3VwcG9ydHNDdXN0b21pemF0aW9uID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHJldHVybiAhdHJlZUN0cmwuaXNSb290ICYmICh0aGlzLnN1cHBvcnRzTGVnZW5kKHRyZWVDdHJsKSB8fCB0aGlzLnN1cHBvcnRzT3BhY2l0eUNoYW5nZSh0cmVlQ3RybCkpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuc3VwcG9ydHNMZWdlbmQgPSBmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgdmFyIG5vZGUgPSB0cmVlQ3RybC5ub2RlO1xuICByZXR1cm4gISFub2RlLm1ldGFkYXRhICYmICEhbm9kZS5tZXRhZGF0YS5sZWdlbmQgJiYgISF0aGlzLmdldExlZ2VuZHNPYmplY3QodHJlZUN0cmwpO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuc3VwcG9ydHNPcGFjaXR5Q2hhbmdlID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBub2RlID0gdHJlZUN0cmwubm9kZTtcbiAgdmFyIHBhcmVudE5vZGUgPSB0cmVlQ3RybC5wYXJlbnQgPyB0cmVlQ3RybC5wYXJlbnQubm9kZSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuICEhdHJlZUN0cmwubGF5ZXIgJiYgKHRyZWVDdHJsLmRlcHRoID09PSAxICYmICFub2RlLm1peGVkIHx8IHRyZWVDdHJsLmRlcHRoID4gMSAmJiBwYXJlbnROb2RlLm1peGVkICYmICghbm9kZS5jaGlsZHJlbiB8fCBub2RlLmNoaWxkcmVuICYmICFub2RlLm1peGVkKSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5pc0ZpbHRyYWJsZSA9IGZ1bmN0aW9uICh0cmVlQ3RybCkge1xuICB2YXIgZGF0YXNvdXJjZSA9IHRyZWVDdHJsLmdldERhdGFTb3VyY2UoKTtcbiAgcmV0dXJuIGRhdGFzb3VyY2UgPyBkYXRhc291cmNlLmZpbHRyYWJsZSA6IGZhbHNlO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0Rmlyc3RQYXJlbnRXaXRoTGF5ZXJGdW5jdGlvbnMgPSBmdW5jdGlvbiAodHJlZUN0cmwpIHtcbiAgdmFyIHBhcmVudFRyZWVDdHJsID0gdHJlZUN0cmwucGFyZW50O1xuXG4gIGlmICghcGFyZW50VHJlZUN0cmwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICh0aGlzLnN1cHBvcnRzT3BhY2l0eUNoYW5nZShwYXJlbnRUcmVlQ3RybCkgfHwgdGhpcy5pc0ZpbHRyYWJsZShwYXJlbnRUcmVlQ3RybCkpIHtcbiAgICByZXR1cm4gcGFyZW50VHJlZUN0cmw7XG4gIH1cblxuICByZXR1cm4gdGhpcy5nZXRGaXJzdFBhcmVudFdpdGhMYXllckZ1bmN0aW9ucyhwYXJlbnRUcmVlQ3RybCk7XG59O1xuXG5teU1vZHVsZS5jb250cm9sbGVyKCdHbWZMYXllcnRyZWVDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2XFxuICBjbGFzcz1cImdtZi1sYXllcnRyZWUtZ3JvdXAgZ21mLWxheWVydHJlZS1kZXB0aC0xIHt7JGN0cmwuZ3JvdXAudmlzaWJpbGl0eVN0YXRlfX1cIlxcbj5cXG4gIDxhXFxuICAgIGRhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIlxcbiAgICBocmVmPVwiI2dtZi1sYXllcnRyZWUtbGF5ZXItZ3JvdXAte3s6OiRjdHJsLmdldEdyb3VwVWlkKCl9fVwiXFxuICAgIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCJcXG4gICAgY2xhc3M9XCJmYSBnbWYtbGF5ZXJ0cmVlLWV4cGFuZC1ub2RlIGZhLWZ3XCI+XFxuICA8L2E+XFxuXFxuICA8YVxcbiAgICBjbGFzcz1cImZhIGZhLWZ3IGdtZi1sYXllcnRyZWUtc3RhdGVcIlxcbiAgICBocmVmXFxuICAgIG5nLWNsaWNrPVwiJGN0cmwudG9nZ2xlKClcIlxcbiAgPicgK1xuKChfX3QgPSAocmVxdWlyZSgnZ21mL2ljb25zL2xheWVycy5zdmc/dmlld2JveCZoZWlnaHQ9MWVtJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbic8L2E+XFxuXFxuICA8YVxcbiAgICBjbGFzcz1cImdtZi1sYXllcnRyZWUtbmFtZVwiXFxuICAgIGhyZWZcXG4gICAgbmctY2xpY2s9XCIkY3RybC50b2dnbGUoKVwiXFxuICA+XFxuICAgIDxzcGFuPnt7JGN0cmwuZ3JvdXAudGl0bGUgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gIDwvYT5cXG5cXG4gIDxzcGFuIGNsYXNzPVwiZ21mLWxheWVydHJlZS1yaWdodC1idXR0b25zXCI+XFxuICAgIDxhXFxuICAgICAgaHJlZj1cIlwiXFxuICAgICAgbmctY2xpY2s9XCIkY3RybC5yZW1vdmUoKVwiPlxcbiAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtdHJhc2hcIj48L3NwYW4+XFxuICAgIDwvYT5cXG4gIDwvc3Bhbj5cXG48L2Rpdj5cXG5cXG48dWxcXG4gIGlkPVwiZ21mLWxheWVydHJlZS1sYXllci1ncm91cC17ezo6JGN0cmwuZ2V0R3JvdXBVaWQoKX19XCJcXG4gIGNsYXNzPVwiY29sbGFwc2UgaW4gc2hvd1wiXFxuPlxcbiAgPGxpXFxuICAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1ub2RlIGdtZi1sYXllcnRyZWUtZGVwdGgtMlwiXFxuICAgIG5nLWNsYXNzPVwiW2RhdGFTb3VyY2UudmlzaWJsZSA/IFxcJ29uXFwnIDogXFwnb2ZmXFwnXVwiXFxuICAgIG5nLXJlcGVhdD1cImRhdGFTb3VyY2UgaW4gJGN0cmwuZ3JvdXAuZGF0YVNvdXJjZXNcIlxcbiAgPlxcbiAgICA8ZGl2IGNsYXNzPVwiZ21mLWxheWVydHJlZS1sZWFmXCI+XFxuICAgICAgPGFcXG4gICAgICAgIGhyZWZcXG4gICAgICAgIG5nLWNsaWNrPVwiJGN0cmwudG9nZ2xlRGF0YVNvdXJjZShkYXRhU291cmNlKVwiXFxuICAgICAgICBjbGFzcz1cImdtZi1sYXllcnRyZWUtbGF5ZXItaWNvbiBnbWYtbGF5ZXJ0cmVlLW5vLWxheWVyLWljb25cIlxcbiAgICAgID5cXG4gICAgICA8L2E+XFxuICAgICAgPGFcXG4gICAgICAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1uYW1lXCJcXG4gICAgICAgIGhyZWZcXG4gICAgICAgIG5nLWNsaWNrPVwiJGN0cmwudG9nZ2xlRGF0YVNvdXJjZShkYXRhU291cmNlKVwiXFxuICAgICAgPlxcbiAgICAgICAgPHNwYW4+e3tkYXRhU291cmNlLm5hbWUgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gICAgICA8L2E+XFxuXFxuICAgICAgPHNwYW4gY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLXJpZ2h0LWJ1dHRvbnNcIj5cXG4gICAgICAgIDxhXFxuICAgICAgICAgIGhyZWY9XCJcIlxcbiAgICAgICAgICBuZy1jbGljaz1cIiRjdHJsLnJlbW92ZURhdGFTb3VyY2UoZGF0YVNvdXJjZSlcIj5cXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS10cmFzaFwiPjwvc3Bhbj5cXG4gICAgICAgIDwvYT5cXG4gICAgICAgIDxhXFxuICAgICAgICAgIGNsYXNzPVwiZ21mLWxheWVydHJlZS1ub2RlLW1lbnUtYnRuXCJcXG4gICAgICAgICAgaHJlZj1cIlwiXFxuICAgICAgICAgIG5nLWlmPWN0cmwuZ2V0TGVnZW5kVXJsKGRhdGFTb3VyY2UubGVnZW5kKT5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWNvZ1wiPjwvc3Bhbj5cXG4gICAgICAgIDwvYT5cXG4gICAgICAgIDxzcGFuXFxuICAgICAgICAgIG5nZW8tcG9wb3ZlclxcbiAgICAgICAgICBuZy1pZj1cIiRjdHJsLmdldExlZ2VuZFVybChkYXRhU291cmNlLmxlZ2VuZClcIlxcbiAgICAgICAgICBuZ2VvLXBvcG92ZXItZGlzbWlzcz1cIi5jb250ZW50XCI+XFxuICAgICAgICAgICAgPHNwYW5cXG4gICAgICAgICAgICAgIG5nZW8tcG9wb3Zlci1hbmNob3JcXG4gICAgICAgICAgICAgIGNsYXNzPVwiZXh0cmEtYWN0aW9ucyBmYSBmYS1jb2dcIlxcbiAgICAgICAgICAgICAgaWQ9XCJwb3B1cC1pZC17e2RhdGFTb3VyY2UuaWR9fVwiPlxcbiAgICAgICAgICAgIDwvc3Bhbj5cXG5cXG4gICAgICAgICAgICA8ZGl2IG5nZW8tcG9wb3Zlci1jb250ZW50PlxcbiAgICAgICAgICAgICAgPHVsPlxcbiAgICAgICAgICAgICAgICA8bGkgbmctaWY9XCIkY3RybC5nZXRMZWdlbmRVcmwoZGF0YVNvdXJjZS5sZWdlbmQpXCI+XFxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10aC1saXN0IGZhLWZ3XCI+PC9pPlxcbiAgICAgICAgICAgICAgICAgIDxhXFxuICAgICAgICAgICAgICAgICAgICBuZy1jbGljaz1cIiRjdHJsLnRvZ2dsZU5vZGVMZWdlbmQoZGF0YVNvdXJjZS5pZCArIFxcJ2xlZ2VuZFxcJyk7IHBvcG92ZXJDdHJsLmRpc21pc3NQb3BvdmVyKClcIlxcbiAgICAgICAgICAgICAgICAgICAgaHJlZj1cIlwiXFxuICAgICAgICAgICAgICAgICAgPlxcbiAgICAgICAgICAgICAgICAgICAge3tcXCdTaG93L2hpZGUgbGVnZW5kXFwnfHRyYW5zbGF0ZX19XFxuICAgICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvc3Bhbj5cXG4gICAgICA8L3NwYW4+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2XFxuICAgICAgaWQ9XCJ7e2RhdGFTb3VyY2UuaWQgKyBcXCdsZWdlbmRcXCd9fVwiXFxuICAgICAgY2xhc3M9XCJnbWYtbGF5ZXJ0cmVlLWxlZ2VuZFwiPlxcbiAgICAgIDxhXFxuICAgICAgICB0aXRsZT1cInt7XFwnSGlkZSBsZWdlbmRcXCd8dHJhbnNsYXRlfX1cIlxcbiAgICAgICAgbmctY2xpY2s9XCIkY3RybC50b2dnbGVOb2RlTGVnZW5kKGRhdGFTb3VyY2UuaWQgKyBcXCdsZWdlbmRcXCcpXCJcXG4gICAgICAgIGhyZWY9XCJcIj5cXG4gICAgICAgIHt7XFwnSGlkZSBsZWdlbmRcXCd8dHJhbnNsYXRlfX1cXG4gICAgICA8L2E+XFxuICAgICAgPGRpdiBuZy1pZj1cIiRjdHJsLmdldExlZ2VuZFVybChkYXRhU291cmNlLmxlZ2VuZClcIiBjbGFzcz1cImdtZi1pbXBvcnRlZC1sZWdlbmRcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdtZi1sZWdlbmQtaW1hZ2VcIj5cXG4gICAgICAgICAgICA8aW1nIG5nLXNyYz1cInt7JGN0cmwuZ2V0TGVnZW5kVXJsKGRhdGFTb3VyY2UubGVnZW5kKX19XCI+PC9pbWc+XFxuICAgICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvbGk+XFxuPC91bD5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlcyBmcm9tICduZ2VvL2RhdGFzb3VyY2UvRGF0YVNvdXJjZXMuanMnO1xuaW1wb3J0IG5nZW9NYXBMYXllckhlbHBlciBmcm9tICduZ2VvL21hcC9MYXllckhlbHBlci5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mTGF5ZXJ0cmVlRGF0YXNvdXJjZUdyb3VwVHJlZUNvbXBvbmVudCcsIFtuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2VzLm5hbWUsIG5nZW9NYXBMYXllckhlbHBlci5uYW1lXSk7XG5teU1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZ21mL2xheWVydHJlZS9kYXRhc291cmNlR3JvdXBUcmVlQ29tcG9uZW50JywgcmVxdWlyZSgnLi9kYXRhc291cmNlR3JvdXBUcmVlQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mTGF5ZXJ0cmVlRGF0YXNvdXJjZUdyb3VwVHJlZVRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKCRhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSAkYXR0cnNbJ2dtZkxheWVydHJlZURhdGFzb3VyY2VHcm91cFRyZWVUZW1wbGF0ZVVybCddO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ2dtZi9sYXllcnRyZWUvZGF0YXNvdXJjZUdyb3VwVHJlZUNvbXBvbmVudCc7XG59KTtcbmdtZkxheWVydHJlZURhdGFzb3VyY2VHcm91cFRyZWVUZW1wbGF0ZVVybC4kaW5qZWN0ID0gW1wiJGF0dHJzXCIsIFwiZ21mTGF5ZXJ0cmVlRGF0YXNvdXJjZUdyb3VwVHJlZVRlbXBsYXRlVXJsXCJdO1xuXG5mdW5jdGlvbiBnbWZMYXllcnRyZWVEYXRhc291cmNlR3JvdXBUcmVlVGVtcGxhdGVVcmwoJGF0dHJzLCBnbWZMYXllcnRyZWVEYXRhc291cmNlR3JvdXBUcmVlVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIGdtZkxheWVydHJlZURhdGFzb3VyY2VHcm91cFRyZWVUZW1wbGF0ZVVybCgkYXR0cnMpO1xufVxuXG5leHBvcnQgdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIm5nZW9EYXRhU291cmNlc1wiLCBcIm5nZW9MYXllckhlbHBlclwiXTtcblxuICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgbmdlb0RhdGFTb3VyY2VzLCBuZ2VvTGF5ZXJIZWxwZXIpIHtcbiAgICB0aGlzLmdyb3VwID0gbnVsbDtcbiAgICB0aGlzLnNjb3BlXyA9ICRzY29wZTtcbiAgICB0aGlzLmRhdGFTb3VyY2VzXyA9IG5nZW9EYXRhU291cmNlcy5jb2xsZWN0aW9uO1xuICAgIHRoaXMubGF5ZXJIZWxwZXJfID0gbmdlb0xheWVySGVscGVyO1xuICAgIHRoaXMuZ2V0U2NhbGUgPSBudWxsO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IENvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRHcm91cFVpZCA9IGZ1bmN0aW9uIGdldEdyb3VwVWlkKCkge1xuICAgIHJldHVybiBcImRhdGFzb3VyY2Vncm91cHRyZWUtXCIgKyBvbFV0aWxHZXRVaWQodGhpcy5ncm91cCk7XG4gIH07XG5cbiAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICBpZiAoIXRoaXMuZ3JvdXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBncm91cCcpO1xuICAgIH1cblxuICAgIHRoaXMuZ3JvdXAudG9nZ2xlVmlzaWJpbGl0eVN0YXRlKCk7XG4gIH07XG5cbiAgX3Byb3RvLnRvZ2dsZURhdGFTb3VyY2UgPSBmdW5jdGlvbiB0b2dnbGVEYXRhU291cmNlKGRhdGFTb3VyY2UpIHtcbiAgICBkYXRhU291cmNlLnZpc2libGUgPSAhZGF0YVNvdXJjZS52aXNpYmxlO1xuXG4gICAgaWYgKGRhdGFTb3VyY2UudmlzaWJsZSkge1xuICAgICAgdGhpcy5zZXRMZWdlbmRWaXNpYmlsaXR5KHRydWUsIGRhdGFTb3VyY2UuaWQudG9TdHJpbmcoKSArICdsZWdlbmQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRMZWdlbmRWaXNpYmlsaXR5KGZhbHNlLCBkYXRhU291cmNlLmlkLnRvU3RyaW5nKCkgKyAnbGVnZW5kJyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgaWYgKCF0aGlzLmdyb3VwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ3JvdXAnKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gdGhpcy5ncm91cC5kYXRhU291cmNlcy5sZW5ndGggLSAxLCBpaSA9IDA7IGkgPj0gaWk7IGktLSkge1xuICAgICAgdGhpcy5kYXRhU291cmNlc18ucmVtb3ZlKHRoaXMuZ3JvdXAuZGF0YVNvdXJjZXNbaV0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIHJlbW92ZURhdGFTb3VyY2UoZGF0YVNvdXJjZSkge1xuICAgIHRoaXMuZGF0YVNvdXJjZXNfLnJlbW92ZShkYXRhU291cmNlKTtcbiAgfTtcblxuICBfcHJvdG8udG9nZ2xlTm9kZUxlZ2VuZCA9IGZ1bmN0aW9uIHRvZ2dsZU5vZGVMZWdlbmQobGVnZW5kTm9kZUlkKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2VuZE5vZGVJZCk7XG5cbiAgICBpZiAoZGl2KSB7XG4gICAgICBkaXYuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uZ2V0TGVnZW5kVXJsID0gZnVuY3Rpb24gZ2V0TGVnZW5kVXJsKGxlZ2VuZCkge1xuICAgIGlmIChsZWdlbmQpIHtcbiAgICAgIHJldHVybiB0aGlzLmxheWVySGVscGVyXy5nZXRXTVNMZWdlbmRVUkwobGVnZW5kLnVybCwgbGVnZW5kLm5hbWUsIHRoaXMuZ2V0U2NhbGUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2V0TGVnZW5kVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIHNldExlZ2VuZFZpc2liaWxpdHkoc2hvdywgbGVnZW5kTm9kZUlkKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2VuZE5vZGVJZCk7XG5cbiAgICBpZiAoZGl2KSB7XG4gICAgICBzaG93ID8gZGl2LmNsYXNzTGlzdC5yZW1vdmUoJ29mZicpIDogZGl2LmNsYXNzTGlzdC5hZGQoJ29mZicpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ29udHJvbGxlcjtcbn0oKTtcbm15TW9kdWxlLmNvbXBvbmVudCgnZ21mRGF0YXNvdXJjZWdyb3VwdHJlZScsIHtcbiAgYmluZGluZ3M6IHtcbiAgICAnZ3JvdXAnOiAnPCcsXG4gICAgJ2dldFNjYWxlJzogJyYnXG4gIH0sXG4gIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIsXG4gIHRlbXBsYXRlVXJsOiBnbWZMYXllcnRyZWVEYXRhc291cmNlR3JvdXBUcmVlVGVtcGxhdGVVcmxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgZ21mTGF5ZXJ0cmVlQ29tcG9uZW50IGZyb20gJ2dtZi9sYXllcnRyZWUvY29tcG9uZW50LmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVEYXRhc291cmNlR3JvdXBUcmVlQ29tcG9uZW50IGZyb20gJ2dtZi9sYXllcnRyZWUvZGF0YXNvdXJjZUdyb3VwVHJlZUNvbXBvbmVudC5qcyc7XG5pbXBvcnQgZ21mTGF5ZXJ0cmVlU3luY0xheWVydHJlZU1hcCBmcm9tICdnbWYvbGF5ZXJ0cmVlL1N5bmNMYXllcnRyZWVNYXAuanMnO1xuaW1wb3J0IGdtZkxheWVydHJlZVRpbWVTbGlkZXJDb21wb25lbnQgZnJvbSAnZ21mL2xheWVydHJlZS90aW1lU2xpZGVyQ29tcG9uZW50LmpzJztcbmltcG9ydCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlciBmcm9tICdnbWYvbGF5ZXJ0cmVlL1RyZWVNYW5hZ2VyLmpzJztcbmltcG9ydCAnLi9jb21tb24uc2Nzcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnZ21mTGF5ZXJ0cmVlTW9kdWxlJywgW2dtZkxheWVydHJlZUNvbXBvbmVudC5uYW1lLCBnbWZMYXllcnRyZWVEYXRhc291cmNlR3JvdXBUcmVlQ29tcG9uZW50Lm5hbWUsIGdtZkxheWVydHJlZVN5bmNMYXllcnRyZWVNYXAubmFtZSwgZ21mTGF5ZXJ0cmVlVGltZVNsaWRlckNvbXBvbmVudC5uYW1lLCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlci5uYW1lXSk7IiwiQ29udHJvbGxlci4kaW5qZWN0ID0gW1wibmdlb1dNU1RpbWVcIiwgXCJuZ2VvRGVib3VuY2VcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWlzY1dNU1RpbWUgZnJvbSAnbmdlby9taXNjL1dNU1RpbWUuanMnO1xuaW1wb3J0IG5nZW9NaXNjRGVib3VuY2UgZnJvbSAnbmdlby9taXNjL2RlYm91bmNlLmpzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvc2xpZGVyLmpzJztcbmltcG9ydCAnbmdlby9zYXNzL2pxdWVyeS11aS5zY3NzJztcbmltcG9ydCAnYW5ndWxhci11aS1zbGlkZXInO1xuaW1wb3J0ICcuL3RpbWVzbGlkZXIuc2Nzcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mTGF5ZXJ0cmVlVGltZVNsaWRlckNvbXBvbmVudCcsIFtuZ2VvTWlzY1dNU1RpbWUubmFtZSwgbmdlb01pc2NEZWJvdW5jZS5uYW1lLCAndWkuc2xpZGVyJ10pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2dtZi9sYXllcnRyZWUvdGltZXNsaWRlckNvbXBvbmVudCcsIHJlcXVpcmUoJy4vdGltZXNsaWRlckNvbXBvbmVudC5odG1sJykpO1xufV0pO1xuXG5mdW5jdGlvbiBsYXllcnRyZWVUaW1lU2xpZGVyQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7XG4gICAgICBvbkRhdGVTZWxlY3RlZDogJyZnbWZUaW1lU2xpZGVyT25EYXRlU2VsZWN0ZWQnLFxuICAgICAgdGltZTogJz1nbWZUaW1lU2xpZGVyVGltZSdcbiAgICB9LFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgY29udHJvbGxlcjogJ2dtZlRpbWVTbGlkZXJDb250cm9sbGVyIGFzIHNsaWRlckN0cmwnLFxuICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgIHRlbXBsYXRlVXJsOiAnZ21mL2xheWVydHJlZS90aW1lc2xpZGVyQ29tcG9uZW50JyxcbiAgICBsaW5rOiB7XG4gICAgICBwcmU6IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICAgIGlmICghY3RybCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjdHJsJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjdHJsLmluaXQoKTtcbiAgICAgICAgY3RybC5zbGlkZXJPcHRpb25zLnN0b3AgPSBvblNsaWRlclJlbGVhc2VkXztcbiAgICAgICAgY3RybC5zbGlkZXJPcHRpb25zLnNsaWRlID0gY3RybC5uZ2VvRGVib3VuY2VfKG9uU2xpZGVyUmVsZWFzZWRfLCAzMDAsIHRydWUpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uU2xpZGVyUmVsZWFzZWRfKGUsIHNsaWRlclVpKSB7XG4gICAgICAgICAgaWYgKCFjdHJsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY3RybCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN0cmwub25EYXRlU2VsZWN0ZWQoe1xuICAgICAgICAgICAgdGltZTogY29tcHV0ZURhdGVzXyhlLCBzbGlkZXJVaSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVEYXRlc18oZSwgc2xpZGVyVWkpIHtcbiAgICAgICAgICBpZiAoIWN0cmwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjdHJsJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHNEYXRlLCBlRGF0ZSwgd21zdGltZTtcblxuICAgICAgICAgIGlmIChzbGlkZXJVaS52YWx1ZXMpIHtcbiAgICAgICAgICAgIHNEYXRlID0gbmV3IERhdGUoY3RybC5nZXRDbG9zZXN0VmFsdWVfKHNsaWRlclVpLnZhbHVlc1swXSkpO1xuICAgICAgICAgICAgZURhdGUgPSBuZXcgRGF0ZShjdHJsLmdldENsb3Nlc3RWYWx1ZV8oc2xpZGVyVWkudmFsdWVzWzFdKSk7XG4gICAgICAgICAgICBjdHJsLmRhdGVzID0gW3NEYXRlLCBlRGF0ZV07XG4gICAgICAgICAgICB3bXN0aW1lID0ge1xuICAgICAgICAgICAgICBzdGFydDogc0RhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICBlbmQ6IGVEYXRlLmdldFRpbWUoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc0RhdGUgPSBuZXcgRGF0ZShjdHJsLmdldENsb3Nlc3RWYWx1ZV8oc2xpZGVyVWkudmFsdWUpKTtcbiAgICAgICAgICAgIGN0cmwuZGF0ZXMgPSBzRGF0ZTtcbiAgICAgICAgICAgIHdtc3RpbWUgPSB7XG4gICAgICAgICAgICAgIHN0YXJ0OiBzRGF0ZS5nZXRUaW1lKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgcmV0dXJuIHdtc3RpbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnZ21mVGltZVNsaWRlcicsIGxheWVydHJlZVRpbWVTbGlkZXJDb21wb25lbnQpO1xuZXhwb3J0IGZ1bmN0aW9uIENvbnRyb2xsZXIobmdlb1dNU1RpbWUsIG5nZW9EZWJvdW5jZSkge1xuICB0aGlzLm5nZW9XTVNUaW1lXyA9IG5nZW9XTVNUaW1lO1xuICB0aGlzLm5nZW9EZWJvdW5jZV8gPSBuZ2VvRGVib3VuY2U7XG5cbiAgdGhpcy5vbkRhdGVTZWxlY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIHRoaXMudGltZSA9IG51bGw7XG4gIHRoaXMuaXNNb2RlUmFuZ2UgPSBmYWxzZTtcbiAgdGhpcy5taW5WYWx1ZSA9IC0xO1xuICB0aGlzLm1heFZhbHVlID0gOTk5OTk5O1xuICB0aGlzLnRpbWVWYWx1ZUxpc3QgPSBudWxsO1xuICB0aGlzLnNsaWRlck9wdGlvbnMgPSBudWxsO1xuICB0aGlzLmRhdGVzID0gW107XG59XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy50aW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHRpbWUnKTtcbiAgfVxuXG4gIHZhciBpbml0aWFsT3B0aW9uc18gPSB0aGlzLm5nZW9XTVNUaW1lXy5nZXRPcHRpb25zKHRoaXMudGltZSk7XG4gIHRoaXMuaXNNb2RlUmFuZ2UgPSB0aGlzLnRpbWUubW9kZSA9PT0gJ3JhbmdlJztcbiAgdGhpcy5taW5WYWx1ZSA9IGluaXRpYWxPcHRpb25zXy5taW5EYXRlO1xuICB0aGlzLm1heFZhbHVlID0gaW5pdGlhbE9wdGlvbnNfLm1heERhdGU7XG4gIHZhciB2YWx1ZXMgPSBpbml0aWFsT3B0aW9uc18udmFsdWVzO1xuXG4gIGlmICh0aGlzLmlzTW9kZVJhbmdlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlcykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgT3B0aW9ucyB2YWx1ZXMnKTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGVzID0gW3ZhbHVlc1swXSwgdmFsdWVzWzFdXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmRhdGVzID0gaW5pdGlhbE9wdGlvbnNfLnZhbHVlcztcbiAgfVxuXG4gIHRoaXMudGltZVZhbHVlTGlzdCA9IHRoaXMuZ2V0VGltZVZhbHVlTGlzdF8oKTtcbiAgdGhpcy5zbGlkZXJPcHRpb25zID0ge1xuICAgIHJhbmdlOiB0aGlzLmlzTW9kZVJhbmdlLFxuICAgIG1pbjogdGhpcy5taW5WYWx1ZSxcbiAgICBtYXg6IHRoaXMubWF4VmFsdWVcbiAgfTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldFRpbWVWYWx1ZUxpc3RfID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMudGltZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0aW1lJyk7XG4gIH1cblxuICB2YXIgd21zVGltZSA9IHRoaXMudGltZTtcbiAgdmFyIHRpbWVWYWx1ZUxpc3QgPSBbXTtcbiAgdmFyIG1pbkRhdGUgPSBuZXcgRGF0ZSh0aGlzLm1pblZhbHVlKTtcbiAgdmFyIG1heERhdGUgPSBuZXcgRGF0ZSh0aGlzLm1heFZhbHVlKTtcblxuICBpZiAod21zVGltZS52YWx1ZXMpIHtcbiAgICB0aW1lVmFsdWVMaXN0ID0gW107XG4gICAgd21zVGltZS52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgdGltZVZhbHVlTGlzdC5wdXNoKG5ldyBEYXRlKGRhdGUpLmdldFRpbWUoKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG1heE5iVmFsdWVzID0gMTAyNDtcblxuICAgIGlmICh3bXNUaW1lLnJlc29sdXRpb24gPT0gJ2RheScpIHtcbiAgICAgIG1heE5iVmFsdWVzICo9IDEyO1xuICAgIH1cblxuICAgIHZhciBlbmREYXRlID0gbmV3IERhdGUobWluRGF0ZS5nZXRUaW1lKCkpO1xuICAgIGVuZERhdGUuc2V0RnVsbFllYXIobWluRGF0ZS5nZXRGdWxsWWVhcigpICsgbWF4TmJWYWx1ZXMgKiB3bXNUaW1lLmludGVydmFsWzBdKTtcbiAgICBlbmREYXRlLnNldE1vbnRoKG1pbkRhdGUuZ2V0TW9udGgoKSArIG1heE5iVmFsdWVzICogd21zVGltZS5pbnRlcnZhbFsxXSwgbWluRGF0ZS5nZXREYXRlKCkgKyBtYXhOYlZhbHVlcyAqIHdtc1RpbWUuaW50ZXJ2YWxbMl0pO1xuICAgIGVuZERhdGUuc2V0U2Vjb25kcyhtaW5EYXRlLmdldFNlY29uZHMoKSArIG1heE5iVmFsdWVzICogd21zVGltZS5pbnRlcnZhbFszXSk7XG5cbiAgICBpZiAoZW5kRGF0ZSA+IG1heERhdGUpIHtcbiAgICAgIHRpbWVWYWx1ZUxpc3QgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgdmFyIG5leHREYXRlID0gbmV3IERhdGUobWluRGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgICBuZXh0RGF0ZS5zZXRGdWxsWWVhcihtaW5EYXRlLmdldEZ1bGxZZWFyKCkgKyBpICogd21zVGltZS5pbnRlcnZhbFswXSk7XG4gICAgICAgIG5leHREYXRlLnNldE1vbnRoKG1pbkRhdGUuZ2V0TW9udGgoKSArIGkgKiB3bXNUaW1lLmludGVydmFsWzFdLCBtaW5EYXRlLmdldERhdGUoKSArIGkgKiB3bXNUaW1lLmludGVydmFsWzJdKTtcbiAgICAgICAgbmV4dERhdGUuc2V0U2Vjb25kcyhtaW5EYXRlLmdldFNlY29uZHMoKSArIGkgKiB3bXNUaW1lLmludGVydmFsWzNdKTtcblxuICAgICAgICBpZiAobmV4dERhdGUgPD0gbWF4RGF0ZSkge1xuICAgICAgICAgIHRpbWVWYWx1ZUxpc3QucHVzaChuZXh0RGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRpbWVWYWx1ZUxpc3Q7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5nZXRDbG9zZXN0VmFsdWVfID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuICBpZiAoIXRoaXMudGltZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0aW1lJyk7XG4gIH1cblxuICBpZiAodGltZXN0YW1wIDw9IHRoaXMubWluVmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5taW5WYWx1ZTtcbiAgfVxuXG4gIGlmICh0aW1lc3RhbXAgPj0gdGhpcy5tYXhWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLm1heFZhbHVlO1xuICB9XG5cbiAgaWYgKHRoaXMudGltZVZhbHVlTGlzdCkge1xuICAgIHZhciBpbmRleDtcbiAgICB2YXIgbGVmdEluZGV4ID0gMDtcbiAgICB2YXIgcmlnaHRJbmRleCA9IHRoaXMudGltZVZhbHVlTGlzdC5sZW5ndGggLSAxO1xuXG4gICAgd2hpbGUgKHJpZ2h0SW5kZXggLSBsZWZ0SW5kZXggPiAxKSB7XG4gICAgICBpbmRleCA9IE1hdGguZmxvb3IoKGxlZnRJbmRleCArIHJpZ2h0SW5kZXgpIC8gMik7XG5cbiAgICAgIGlmICh0aGlzLnRpbWVWYWx1ZUxpc3RbaW5kZXhdID49IHRpbWVzdGFtcCkge1xuICAgICAgICByaWdodEluZGV4ID0gaW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZWZ0SW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGVmdERpc3RhbmNlID0gTWF0aC5hYnModGhpcy50aW1lVmFsdWVMaXN0W2xlZnRJbmRleF0gLSB0aW1lc3RhbXApO1xuICAgIHZhciByaWdodERpc3RhbmNlID0gTWF0aC5hYnModGhpcy50aW1lVmFsdWVMaXN0W3JpZ2h0SW5kZXhdIC0gdGltZXN0YW1wKTtcbiAgICByZXR1cm4gdGhpcy50aW1lVmFsdWVMaXN0W2xlZnREaXN0YW5jZSA8IHJpZ2h0RGlzdGFuY2UgPyBsZWZ0SW5kZXggOiByaWdodEluZGV4XTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7XG4gICAgdmFyIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHRoaXMubWluVmFsdWUpO1xuICAgIHZhciBiZXN0RGF0ZSA9IG5ldyBEYXRlKHRoaXMubWluVmFsdWUpO1xuICAgIHZhciBtYXhEYXRlID0gbmV3IERhdGUodGhpcy5tYXhWYWx1ZSk7XG4gICAgdmFyIGJlc3REaXN0YW5jZSA9IE1hdGguYWJzKHRhcmdldERhdGUuZ2V0VGltZSgpIC0gYmVzdERhdGUuZ2V0VGltZSgpKTtcblxuICAgIGZvciAodmFyIGkgPSAxOzsgaSsrKSB7XG4gICAgICB2YXIgbmV4dCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgbmV4dC5zZXRGdWxsWWVhcihzdGFydERhdGUuZ2V0RnVsbFllYXIoKSArIGkgKiB0aGlzLnRpbWUuaW50ZXJ2YWxbMF0pO1xuICAgICAgbmV4dC5zZXRNb250aChzdGFydERhdGUuZ2V0TW9udGgoKSArIGkgKiB0aGlzLnRpbWUuaW50ZXJ2YWxbMV0sIHN0YXJ0RGF0ZS5nZXREYXRlKCkgKyBpICogdGhpcy50aW1lLmludGVydmFsWzJdKTtcbiAgICAgIG5leHQuc2V0U2Vjb25kcyhzdGFydERhdGUuZ2V0U2Vjb25kcygpICsgaSAqIHRoaXMudGltZS5pbnRlcnZhbFszXSk7XG5cbiAgICAgIGlmIChuZXh0ID4gbWF4RGF0ZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5hYnModGFyZ2V0RGF0ZS5nZXRUaW1lKCkgLSBuZXh0LmdldFRpbWUoKSk7XG5cbiAgICAgIGlmIChkaXN0YW5jZSA8PSBiZXN0RGlzdGFuY2UpIHtcbiAgICAgICAgYmVzdERhdGUgPSBuZXh0O1xuICAgICAgICBiZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBiZXN0RGF0ZS5nZXRUaW1lKCk7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmdldExvY2FsaXplZERhdGUgPSBmdW5jdGlvbiAodGltZSkge1xuICBpZiAoIXRoaXMudGltZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0aW1lJyk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5uZ2VvV01TVGltZV8uZm9ybWF0VGltZVZhbHVlKHRpbWUsIHRoaXMudGltZS5yZXNvbHV0aW9uKTtcbn07XG5cbm15TW9kdWxlLmNvbnRyb2xsZXIoJ2dtZlRpbWVTbGlkZXJDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwiZ21mLXRpbWUtc2xpZGVyXCI+XFxuXFxuICA8ZGl2XFxuICAgIHVpLXNsaWRlcj1cInNsaWRlckN0cmwuc2xpZGVyT3B0aW9uc1wiXFxuICAgIG5nLW1vZGVsPVwic2xpZGVyQ3RybC5kYXRlc1wiPlxcbiAgICA8c3BhblxcbiAgICAgIGNsYXNzPVwidWktc2xpZGVyLWhhbmRsZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGxcIlxcbiAgICAgIHRhYmluZGV4PVwiMFwiXFxuICAgICAgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcXG4gICAgICB0aXRsZT1cIlwiPlxcbiAgICA8L3NwYW4+XFxuICA8L2Rpdj5cXG5cXG4gIDxkaXYgY2xhc3M9XCJnbWYtdGltZS1zbGlkZXItZGlzcGxheWVkLWRhdGVzXCI+XFxuICAgIDxkaXZcXG4gICAgICBjbGFzcz1cImdtZi10aW1lLXNsaWRlci1zdGFydC1kYXRlXCJcXG4gICAgICBuZy1pZj1cIjo6c2xpZGVyQ3RybC50aW1lLm1vZGUgPT09IFxcJ3JhbmdlXFwnXCI+XFxuICAgICAgPHNwYW4+e3tzbGlkZXJDdHJsLmdldExvY2FsaXplZERhdGUoc2xpZGVyQ3RybC5kYXRlc1swXSl9fTwvc3Bhbj5cXG4gICAgPC9kaXY+XFxuXFxuICAgIDxkaXZcXG4gICAgICBjbGFzcz1cImdtZi10aW1lLXNsaWRlci1zdGFydC1kYXRlXCJcXG4gICAgICBuZy1pZj1cIjo6c2xpZGVyQ3RybC50aW1lLm1vZGUgPT09IFxcJ3ZhbHVlXFwnXCI+XFxuICAgICAgPHNwYW4+e3tzbGlkZXJDdHJsLmdldExvY2FsaXplZERhdGUoc2xpZGVyQ3RybC5kYXRlcyl9fTwvc3Bhbj5cXG4gICAgPC9kaXY+XFxuXFxuICAgIDxkaXZcXG4gICAgICBjbGFzcz1cImdtZi10aW1lLXNsaWRlci1lbmQtZGF0ZVwiXFxuICAgICAgbmctaWY9XCI6OnNsaWRlckN0cmwudGltZS5tb2RlID09PSBcXCdyYW5nZVxcJ1wiPlxcbiAgICAgIDxzcGFuPnt7c2xpZGVyQ3RybC5nZXRMb2NhbGl6ZWREYXRlKHNsaWRlckN0cmwuZGF0ZXNbMV0pfX08L3NwYW4+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XFxuXFxuPC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxkaXZcXG4gICAgbmdlby1tYXA9XCJjdHJsLm1hcFwiXFxuICAgIG5nZW8tbWFwLW1hbmFnZS1yZXNpemU9XCJjdHJsLm1hbmFnZVJlc2l6ZVwiXFxuICAgIG5nZW8tbWFwLXJlc2l6ZS10cmFuc2l0aW9uPVwiY3RybC5yZXNpemVUcmFuc2l0aW9uXCJcXG4gICAgZ21mLWZpbGUtZHJvcC16b25lPlxcbjwvZGl2Plxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCJuZ2VvRmVhdHVyZU92ZXJsYXlNZ3JcIiwgXCJnbWZQZXJtYWxpbmtcIiwgXCJnbWZTbmFwcGluZ1wiLCBcIiRpbmplY3RvclwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZlBlcm1hbGlua01vZHVsZSBmcm9tICdnbWYvcGVybWFsaW5rL21vZHVsZS5qcyc7XG5pbXBvcnQgZ21mRWRpdGluZ1NuYXBwaW5nIGZyb20gJ2dtZi9lZGl0aW5nL1NuYXBwaW5nLmpzJztcbmltcG9ydCBnbWZGaWxlRHJvcFpvbmVNb2R1bGUgZnJvbSAnZ21mL2Ryb3BmaWxlL21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb01hcE1vZHVsZSBmcm9tICduZ2VvL21hcC9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9NYXBGZWF0dXJlT3ZlcmxheU1nciBmcm9tICduZ2VvL21hcC9GZWF0dXJlT3ZlcmxheU1nci5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mTWFwQ29tcG9uZW50JywgW2dtZlBlcm1hbGlua01vZHVsZS5uYW1lLCBnbWZFZGl0aW5nU25hcHBpbmcubmFtZSwgZ21mRmlsZURyb3Bab25lTW9kdWxlLm5hbWUsIG5nZW9NYXBNb2R1bGUubmFtZSwgbmdlb01hcEZlYXR1cmVPdmVybGF5TWdyLm5hbWVdKTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdnbWYvbWFwJywgcmVxdWlyZSgnLi9jb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcblxuZnVuY3Rpb24gZ21mTWFwQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7XG4gICAgICAnbWFwJzogJzxnbWZNYXBNYXAnLFxuICAgICAgJ21hbmFnZVJlc2l6ZSc6ICc8Z21mTWFwTWFuYWdlUmVzaXplJyxcbiAgICAgICdyZXNpemVUcmFuc2l0aW9uJzogJzxnbWZNYXBSZXNpemVUcmFuc2l0aW9uJ1xuICAgIH0sXG4gICAgY29udHJvbGxlcjogJ0dtZk1hcENvbnRyb2xsZXIgYXMgY3RybCcsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ2dtZi9tYXAnXG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnZ21mTWFwJywgZ21mTWFwQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyKG5nZW9GZWF0dXJlT3ZlcmxheU1nciwgZ21mUGVybWFsaW5rLCBnbWZTbmFwcGluZywgJGluamVjdG9yKSB7XG4gIHRoaXMubWFwID0gbnVsbDtcbiAgdGhpcy5tYW5hZ2VSZXNpemUgPSBudWxsO1xuICB0aGlzLnJlc2l6ZVRyYW5zaXRpb24gPSBudWxsO1xuICB0aGlzLm5nZW9GZWF0dXJlT3ZlcmxheU1ncl8gPSBuZ2VvRmVhdHVyZU92ZXJsYXlNZ3I7XG4gIHRoaXMuZ21mUGVybWFsaW5rXyA9IGdtZlBlcm1hbGluaztcbiAgdGhpcy5nbWZTbmFwcGluZ18gPSBnbWZTbmFwcGluZztcbiAgdGhpcy5maWxlRHJvcEVuYWJsZWQgPSAkaW5qZWN0b3IuaGFzKCdnbWZGaWxlRHJvcEVuYWJsZWQnKSA/ICRpbmplY3Rvci5nZXQoJ2dtZkZpbGVEcm9wRW5hYmxlZCcpIDogZmFsc2U7XG59XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5tYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gIH1cblxuICB0aGlzLm5nZW9GZWF0dXJlT3ZlcmxheU1ncl8uaW5pdCh0aGlzLm1hcCk7XG4gIHRoaXMuZ21mUGVybWFsaW5rXy5zZXRNYXAodGhpcy5tYXApO1xuICB0aGlzLmdtZlNuYXBwaW5nXy5zZXRNYXAodGhpcy5tYXApO1xufTtcblxubXlNb2R1bGUuY29udHJvbGxlcignR21mTWFwQ29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgZ21mTWFwQ29tcG9uZW50IGZyb20gJ2dtZi9tYXAvY29tcG9uZW50LmpzJztcbmltcG9ydCBnbWZNYXBNb3VzZXBvc2l0aW9uQ29tcG9uZW50IGZyb20gJ2dtZi9tYXAvbW91c2Vwb3NpdGlvbkNvbXBvbmVudC5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnZ21mTWFwTW9kdWxlJywgW2dtZk1hcENvbXBvbmVudC5uYW1lLCBnbWZNYXBNb3VzZXBvc2l0aW9uQ29tcG9uZW50Lm5hbWVdKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIGRyb3B1cFwiPlxcbiAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XFxuICAgIDxzcGFuIGNsYXNzPVwiZ21mLW1vdXNlcG9zaXRpb24tY29udHJvbC10YXJnZXRcIj48L3NwYW4+XFxuICA8L2J1dHRvbj5cXG4gIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1yaWdodFwiIHJvbGU9XCJtZW51XCI+XFxuICAgIDxsaSBjbGFzcz1cImRyb3Bkb3duLWhlYWRlclwiIHRyYW5zbGF0ZT5Db29yZGluYXRlIHN5c3RlbXM8L2xpPlxcbiAgICA8bGkgbmctcmVwZWF0PVwicHJvaml0ZW0gaW4gOjpjdHJsLnByb2plY3Rpb25zXCI+XFxuICAgICAgPGEgaHJlZiBuZy1jbGljaz1cImN0cmwuc2V0UHJvamVjdGlvbihwcm9qaXRlbSlcIj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtZndcIiBuZy1jbGFzcz1cIntcXCdmYS1jaGVja1xcJzogY3RybC5wcm9qZWN0aW9uID09IHByb2ppdGVtfVwiPjwvc3Bhbj5cXG4gICAgICAgIHt7Ojpwcm9qaXRlbS5sYWJlbH19XFxuICAgICAgPC9hPlxcbiAgICA8L2xpPlxcbiAgPC91bD5cXG48L2Rpdj5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJGVsZW1lbnRcIiwgXCIkZmlsdGVyXCIsIFwiJHNjb3BlXCIsIFwiZ2V0dGV4dENhdGFsb2dcIiwgXCJnbWZNb3VzZVBvc2l0aW9uT3B0aW9uc1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9NaXNjRmlsdGVycyBmcm9tICduZ2VvL21pc2MvZmlsdGVycy5qcyc7XG5pbXBvcnQgb2xDb250cm9sTW91c2VQb3NpdGlvbiBmcm9tICdvbC9jb250cm9sL01vdXNlUG9zaXRpb24uanMnO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2Ryb3Bkb3duLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZNYXBNb3VzZXBvc2l0aW9uJywgW25nZW9NaXNjRmlsdGVycy5uYW1lXSk7XG5teU1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZ21mL21hcC9tb3VzZXBvc2l0aW9uQ29tcG9uZW50JywgcmVxdWlyZSgnLi9tb3VzZXBvc2l0aW9uQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mTWFwTW91c2Vwb3NpdGlvblRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKCRhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSAkYXR0cnMuZ21mTWFwTW91c2Vwb3NpdGlvblRlbXBsYXRlVXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ2dtZi9tYXAvbW91c2Vwb3NpdGlvbkNvbXBvbmVudCc7XG59KTtcbmdtZk1hcE1vdXNlcG9zaXRpb25UZW1wbGF0ZVVybC4kaW5qZWN0ID0gW1wiJGF0dHJzXCIsIFwiZ21mTWFwTW91c2Vwb3NpdGlvblRlbXBsYXRlVXJsXCJdO1xuXG5mdW5jdGlvbiBnbWZNYXBNb3VzZXBvc2l0aW9uVGVtcGxhdGVVcmwoJGF0dHJzLCBnbWZNYXBNb3VzZXBvc2l0aW9uVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIGdtZk1hcE1vdXNlcG9zaXRpb25UZW1wbGF0ZVVybCgkYXR0cnMpO1xufVxuXG52YXIgbWFwTW91c2Vwb3NpdGlvbkNvbXBvbmVudCA9IHtcbiAgY29udHJvbGxlcjogJ2dtZk1vdXNlcG9zaXRpb25Db250cm9sbGVyIGFzIGN0cmwnLFxuICBiaW5kaW5nczoge1xuICAgICdtYXAnOiAnPGdtZk1vdXNlcG9zaXRpb25NYXAnXG4gIH0sXG4gIHRlbXBsYXRlVXJsOiBnbWZNYXBNb3VzZXBvc2l0aW9uVGVtcGxhdGVVcmxcbn07XG5teU1vZHVsZS5jb21wb25lbnQoJ2dtZk1vdXNlcG9zaXRpb24nLCBtYXBNb3VzZXBvc2l0aW9uQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyKCRlbGVtZW50LCAkZmlsdGVyLCAkc2NvcGUsIGdldHRleHRDYXRhbG9nLCBnbWZNb3VzZVBvc2l0aW9uT3B0aW9ucykge1xuICB0aGlzLm9wdGlvbnMgPSBnbWZNb3VzZVBvc2l0aW9uT3B0aW9ucztcbiAgdGhpcy5tYXAgPSBudWxsO1xuICB0aGlzLnByb2plY3Rpb24gPSBudWxsO1xuICB0aGlzLiRzY29wZV8gPSAkc2NvcGU7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMuJGVsZW1lbnRfID0gJGVsZW1lbnQ7XG4gIHRoaXMuJGZpbHRlcl8gPSAkZmlsdGVyO1xuICB0aGlzLmNvbnRyb2xfID0gbnVsbDtcbn1cblxuQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLiRzY29wZV8uJG9uKCdnZXR0ZXh0TGFuZ3VhZ2VDaGFuZ2VkJywgZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmluaXRPbENvbnRyb2xfKCk7XG4gIH0pO1xuICB0aGlzLmluaXRPbENvbnRyb2xfKCk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5pbml0T2xDb250cm9sXyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgaWYgKCF0aGlzLm1hcCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgfVxuXG4gIGlmICh0aGlzLmNvbnRyb2xfICE9PSBudWxsKSB7XG4gICAgdGhpcy5tYXAucmVtb3ZlQ29udHJvbCh0aGlzLmNvbnRyb2xfKTtcbiAgfVxuXG4gIHZhciBmb3JtYXRGbiA9IGZ1bmN0aW9uIGZvcm1hdEZuKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKCFfdGhpczIucHJvamVjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb2plY3Rpb24nKTtcbiAgICB9XG5cbiAgICB2YXIgZmlsdGVyQW5kQXJncyA9IF90aGlzMi5wcm9qZWN0aW9uLmZpbHRlci5zcGxpdCgnOicpO1xuXG4gICAgdmFyIHNoaWZ0ZWRGaWx0ZXJBbmRBcmdzID0gZmlsdGVyQW5kQXJncy5zaGlmdCgpO1xuXG4gICAgaWYgKCFzaGlmdGVkRmlsdGVyQW5kQXJncykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNoaWZ0ZWRGaWx0ZXJBbmRBcmdzJyk7XG4gICAgfVxuXG4gICAgdmFyIGZpbHRlciA9IF90aGlzMi4kZmlsdGVyXyhzaGlmdGVkRmlsdGVyQW5kQXJncyk7XG5cbiAgICBpZiAodHlwZW9mIGZpbHRlciAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGZpbHRlciB0eXBlJyk7XG4gICAgfVxuXG4gICAgdmFyIGFyZ3MgPSBmaWx0ZXJBbmRBcmdzO1xuICAgIGFyZ3MudW5zaGlmdChjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIGZpbHRlci5hcHBseShfdGhpczIsIGFyZ3MpO1xuICB9O1xuXG4gIHZhciBnZXR0ZXh0Q2F0YWxvZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2dfO1xuICB0aGlzLmNvbnRyb2xfID0gbmV3IG9sQ29udHJvbE1vdXNlUG9zaXRpb24oe1xuICAgIGNsYXNzTmFtZTogJ2dtZi1tb3VzZXBvc2l0aW9uLWNvbnRyb2wnLFxuICAgIGNvb3JkaW5hdGVGb3JtYXQ6IGZvcm1hdEZuLFxuICAgIHRhcmdldDogdGhpcy4kZWxlbWVudF8uZmluZCgnLmdtZi1tb3VzZXBvc2l0aW9uLWNvbnRyb2wtdGFyZ2V0JykuZ2V0KDApLFxuICAgIHVuZGVmaW5lZEhUTUw6IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnQ29vcmRpbmF0ZXMnKVxuICB9KTtcbiAgdGhpcy5zZXRQcm9qZWN0aW9uKHRoaXMub3B0aW9ucy5wcm9qZWN0aW9uc1swXSk7XG4gIHRoaXMubWFwLmFkZENvbnRyb2wodGhpcy5jb250cm9sXyk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5zZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgaWYgKCF0aGlzLmNvbnRyb2xfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbnRyb2wnKTtcbiAgfVxuXG4gIHRoaXMuY29udHJvbF8uc2V0UHJvamVjdGlvbihwcm9qZWN0aW9uLmNvZGUpO1xuICB0aGlzLnByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xufTtcblxubXlNb2R1bGUuY29udHJvbGxlcignZ21mTW91c2Vwb3NpdGlvbkNvbnRyb2xsZXInLCBDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIm1vYmlsZU1lYXN1cmVBcmVhQ29tcG9uZW50LiRpbmplY3QgPSBbXCJnbWZNb2JpbGVNZWFzdXJlQXJlYVRlbXBsYXRlVXJsXCJdO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01pc2NGaWx0ZXJzIGZyb20gJ25nZW8vbWlzYy9maWx0ZXJzLmpzJztcbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlQXJlYU1vYmlsZSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmVBcmVhTW9iaWxlLmpzJztcbmltcG9ydCB7IE1lYXN1ZU1vYmlsZUJhc2VDb250cm9sbGVyIH0gZnJvbSAnZ21mL21vYmlsZS9tZWFzdXJlL2Jhc2VDb21wb25lbnQuanMnO1xuaW1wb3J0IHsgYnVpbGRTdHlsZSB9IGZyb20gJ25nZW8vb3B0aW9ucy5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mTW9iaWxlTWVhc3VyZUFyZWEnLCBbbmdlb01pc2NGaWx0ZXJzLm5hbWVdKTtcbm15TW9kdWxlLnZhbHVlKCdnbWZNb2JpbGVNZWFzdXJlQXJlYVRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9IGF0dHJzLmdtZk1vYmlsZU1lYXN1cmVBcmVhVGVtcGxhdGV1cmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnZ21mL21lYXN1cmUvYXJlYUNvbXBvbmVudCc7XG59KTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdnbWYvbWVhc3VyZS9hcmVhQ29tcG9uZW50JywgcmVxdWlyZSgnLi9iYXNlQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5cbmZ1bmN0aW9uIG1vYmlsZU1lYXN1cmVBcmVhQ29tcG9uZW50KGdtZk1vYmlsZU1lYXN1cmVBcmVhVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiB7XG4gICAgICAnYWN0aXZlJzogJz1nbWZNb2JpbGVNZWFzdXJlYXJlYUFjdGl2ZScsXG4gICAgICAnbWFwJzogJz1nbWZNb2JpbGVNZWFzdXJlYXJlYU1hcCdcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6ICdHbWZNb2JpbGVNZWFzdXJlQXJlYUNvbnRyb2xsZXIgYXMgY3RybCcsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogZ21mTW9iaWxlTWVhc3VyZUFyZWFUZW1wbGF0ZVVybCxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuICAgICAgaWYgKCFjb250cm9sbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb250cm9sbGVyJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRyb2xsZXIuaW5pdCgpO1xuICAgIH1cbiAgfTtcbn1cblxubXlNb2R1bGUuZGlyZWN0aXZlKCdnbWZNb2JpbGVNZWFzdXJlYXJlYScsIG1vYmlsZU1lYXN1cmVBcmVhQ29tcG9uZW50KTtcbmV4cG9ydCB2YXIgQ29udHJvbGxlciA9IGZ1bmN0aW9uIChfTWVhc3VlTW9iaWxlQmFzZUNvbnQpIHtcbiAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGZpbHRlclwiLCBcImdldHRleHRDYXRhbG9nXCIsIFwiZ21mTW9iaWxlTWVhc3VyZUFyZWFPcHRpb25zXCJdO1xuXG4gIF9pbmhlcml0c0xvb3NlKENvbnRyb2xsZXIsIF9NZWFzdWVNb2JpbGVCYXNlQ29udCk7XG5cbiAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsIGdldHRleHRDYXRhbG9nLCBnbWZNb2JpbGVNZWFzdXJlQXJlYU9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9NZWFzdWVNb2JpbGVCYXNlQ29udC5jYWxsKHRoaXMsICRzY29wZSwgJGZpbHRlciwgZ2V0dGV4dENhdGFsb2cpIHx8IHRoaXM7XG4gICAgX3RoaXMub3B0aW9ucyA9IGdtZk1vYmlsZU1lYXN1cmVBcmVhT3B0aW9ucztcbiAgICBfdGhpcy5tZWFzdXJlID0gbnVsbDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQ29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMubWVhc3VyZSA9IG5ldyBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlQXJlYU1vYmlsZSh0aGlzLmZpbHRlcignbmdlb1VuaXRQcmVmaXgnKSwgdGhpcy5nZXR0ZXh0Q2F0YWxvZywge1xuICAgICAgcHJlY2lzaW9uOiB0aGlzLm9wdGlvbnMucHJlY2lzaW9uIHx8IDIsXG4gICAgICBza2V0Y2hTdHlsZTogYnVpbGRTdHlsZSh0aGlzLm9wdGlvbnMuc2tldGNoU3R5bGUpXG4gICAgfSk7XG5cbiAgICBfTWVhc3VlTW9iaWxlQmFzZUNvbnQucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uYWRkUG9pbnQgPSBmdW5jdGlvbiBhZGRQb2ludCgpIHtcbiAgICBpZiAoIXRoaXMuZHJhd0ludGVyYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ludGVyYWN0aW9uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3SW50ZXJhY3Rpb24uYWRkVG9EcmF3aW5nKCk7XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgaWYgKCF0aGlzLmRyYXdJbnRlcmFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRyYXdJbnRlcmFjdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuZHJhd0ludGVyYWN0aW9uLmNsZWFyRHJhd2luZygpO1xuICB9O1xuXG4gIF9wcm90by5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2goKSB7XG4gICAgaWYgKCF0aGlzLmRyYXdJbnRlcmFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRyYXdJbnRlcmFjdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuZHJhd0ludGVyYWN0aW9uLmZpbmlzaERyYXdpbmcoKTtcbiAgfTtcblxuICBfcHJvdG8uZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gQ29udHJvbGxlcjtcbn0oTWVhc3VlTW9iaWxlQmFzZUNvbnRyb2xsZXIpO1xubXlNb2R1bGUuY29udHJvbGxlcignR21mTW9iaWxlTWVhc3VyZUFyZWFDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8YSBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXFxuICAgbmctaWY9XCJjdHJsLmRyYXdpbmcgJiYgKCFjdHJsLnZhbGlkKVwiXFxuICAgbmctY2xpY2s9XCJjdHJsLmFkZFBvaW50KClcIj5cXG4gICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L3NwYW4+XFxuICAgICB7e1xcJ1NldCBhcyBzdGFydGluZyBwb2ludFxcJyB8IHRyYW5zbGF0ZX19XFxuPC9hPlxcbjxhIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCJcXG4gICBuZy1pZj1cImN0cmwuZGlydHlcIlxcbiAgIG5nLWNsaWNrPVwiY3RybC5hZGRQb2ludCgpXCI+XFxuICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLXBsdXNcIj48L3NwYW4+XFxuICAgICB7e1xcJ0FkZCBuZXcgcG9pbnRcXCcgfCB0cmFuc2xhdGV9fVxcbjwvYT5cXG48YSBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXFxuICAgbmctaWY9XCJjdHJsLmRyYXdpbmcgJiYgY3RybC52YWxpZCAmJiAhY3RybC5kaXJ0eVwiXFxuICAgbmctY2xpY2s9XCJjdHJsLmZpbmlzaCgpXCI+XFxuICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9zcGFuPlxcbiAgICAge3tcXCdUZXJtaW5hdGVcXCcgfCB0cmFuc2xhdGV9fVxcbjwvYT5cXG48YSBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXFxuICAgbmctaWY9XCJjdHJsLnZhbGlkXCJcXG4gICBuZy1jbGljaz1cImN0cmwuY2xlYXIoKVwiPlxcbiAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1yZXBlYXRcIj48L3NwYW4+XFxuICAgICB7e1xcJ0NsZWFyXFwnIHwgdHJhbnNsYXRlfX1cXG48L2E+XFxuPGEgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIlxcbiAgIG5nLWlmPVwiY3RybC5hY3RpdmVcIlxcbiAgIG5nLWNsaWNrPVwiY3RybC5kZWFjdGl2YXRlKClcIj5cXG4gICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtdGltZXNcIj48L3NwYW4+XFxuICAgICB7e1xcJ0Nsb3NlXFwnIHwgdHJhbnNsYXRlfX1cXG48L2E+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsIk1lYXN1ZU1vYmlsZUJhc2VDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZmlsdGVyXCIsIFwiZ2V0dGV4dENhdGFsb2dcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGludGVyYWN0aW9uRGVjb3JhdGlvbiB9IGZyb20gJ25nZW8vbWlzYy9kZWNvcmF0ZS5qcyc7XG5pbXBvcnQgbmdlb01pc2NGaWx0ZXJzIGZyb20gJ25nZW8vbWlzYy9maWx0ZXJzLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgTW9iaWxlRHJhdyBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01vYmlsZURyYXcuanMnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZk1vYmlsZU1lYXN1cmVCYXNlJywgW25nZW9NaXNjRmlsdGVycy5uYW1lXSk7XG5leHBvcnQgZnVuY3Rpb24gTWVhc3VlTW9iaWxlQmFzZUNvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCBnZXR0ZXh0Q2F0YWxvZykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMuc2NvcGUgPSAkc2NvcGU7XG4gIHRoaXMuZmlsdGVyID0gJGZpbHRlcjtcbiAgdGhpcy5nZXR0ZXh0Q2F0YWxvZyA9IGdldHRleHRDYXRhbG9nO1xuICB0aGlzLm1hcCA9IG51bGw7XG4gIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gIHRoaXMuc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3RoaXMuYWN0aXZlO1xuICB9LCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgaWYgKCFfdGhpcy5tZWFzdXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZScpO1xuICAgIH1cblxuICAgIF90aGlzLm1lYXN1cmUuc2V0QWN0aXZlKG5ld1ZhbCk7XG4gIH0pO1xuICB0aGlzLm1lYXN1cmUgPSBudWxsO1xuICB0aGlzLmRyYXdJbnRlcmFjdGlvbiA9IG51bGw7XG4gIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgdGhpcy5kcmF3aW5nID0gZmFsc2U7XG4gIHRoaXMudmFsaWQgPSBmYWxzZTtcbn1cblxuTWVhc3VlTW9iaWxlQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIGlmICghdGhpcy5tYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gIH1cblxuICBpZiAoIXRoaXMubWVhc3VyZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlJyk7XG4gIH1cblxuICB0aGlzLm1lYXN1cmUuc2V0QWN0aXZlKHRoaXMuYWN0aXZlKTtcbiAgaW50ZXJhY3Rpb25EZWNvcmF0aW9uKHRoaXMubWVhc3VyZSk7XG4gIHZhciBkcmF3SW50ZXJhY3Rpb24gPSB0aGlzLm1lYXN1cmUuZ2V0RHJhd0ludGVyYWN0aW9uKCk7XG5cbiAgaWYgKCEoZHJhd0ludGVyYWN0aW9uIGluc3RhbmNlb2YgTW9iaWxlRHJhdykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGRyYXdJbnRlcmFjdGlvbicpO1xuICB9XG5cbiAgdGhpcy5kcmF3SW50ZXJhY3Rpb24gPSBkcmF3SW50ZXJhY3Rpb247XG4gIGludGVyYWN0aW9uRGVjb3JhdGlvbihkcmF3SW50ZXJhY3Rpb24pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2hhc1BvaW50cycsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRyYXdJbnRlcmFjdGlvbi5nZXRGZWF0dXJlKCkgIT09IG51bGw7XG4gICAgfVxuICB9KTtcbiAgbGlzdGVuKGRyYXdJbnRlcmFjdGlvbiwgJ2NoYW5nZTpkaXJ0eScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBfdGhpczIuZGlydHkgPSBkcmF3SW50ZXJhY3Rpb24uZ2V0RGlydHkoKTtcblxuICAgIGlmIChfdGhpczIuZGlydHkpIHtcbiAgICAgIF90aGlzMi5zY29wZS4kYXBwbHkoKTtcbiAgICB9XG4gIH0sIHRoaXMpO1xuICBsaXN0ZW4oZHJhd0ludGVyYWN0aW9uLCAnY2hhbmdlOmRyYXdpbmcnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgX3RoaXMyLmRyYXdpbmcgPSBkcmF3SW50ZXJhY3Rpb24uZ2V0RHJhd2luZygpO1xuICB9LCB0aGlzKTtcbiAgbGlzdGVuKGRyYXdJbnRlcmFjdGlvbiwgJ2NoYW5nZTp2YWxpZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBfdGhpczIudmFsaWQgPSBkcmF3SW50ZXJhY3Rpb24uZ2V0VmFsaWQoKTtcbiAgfSwgdGhpcyk7XG4gIHRoaXMubWFwLmFkZEludGVyYWN0aW9uKHRoaXMubWVhc3VyZSk7XG59O1xuXG5teU1vZHVsZS5jb250cm9sbGVyKCdnbWZNZWFzdWVNb2JpbGVCYXNlQ29udHJvbGxlcicsIE1lYXN1ZU1vYmlsZUJhc2VDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIm1vYmlsZU1lYXN1cmVMZW50aENvbXBvbmVudC4kaW5qZWN0ID0gW1wiZ21mTW9iaWxlTWVhc3VyZUxlbmd0aFRlbXBsYXRlVXJsXCJdO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01pc2NGaWx0ZXJzIGZyb20gJ25nZW8vbWlzYy9maWx0ZXJzLmpzJztcbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlTGVuZ3RoTW9iaWxlIGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZUxlbmd0aE1vYmlsZS5qcyc7XG5pbXBvcnQgeyBNZWFzdWVNb2JpbGVCYXNlQ29udHJvbGxlciB9IGZyb20gJ2dtZi9tb2JpbGUvbWVhc3VyZS9iYXNlQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGJ1aWxkU3R5bGUgfSBmcm9tICduZ2VvL29wdGlvbnMuanMnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZk1vYmlsZU1lYXN1cmVMZW5ndGgnLCBbbmdlb01pc2NGaWx0ZXJzLm5hbWVdKTtcbm15TW9kdWxlLnZhbHVlKCdnbWZNb2JpbGVNZWFzdXJlTGVuZ3RoVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gYXR0cnMuZ21mTW9iaWxlTWVhc3VyZUxlbmd0aFRlbXBsYXRldXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ2dtZi9tZWFzdXJlL2xlbmd0aENvbXBvbmVudCc7XG59KTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdnbWYvbWVhc3VyZS9sZW5ndGhDb21wb25lbnQnLCByZXF1aXJlKCcuL2Jhc2VDb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcblxuZnVuY3Rpb24gbW9iaWxlTWVhc3VyZUxlbnRoQ29tcG9uZW50KGdtZk1vYmlsZU1lYXN1cmVMZW5ndGhUZW1wbGF0ZVVybCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IHtcbiAgICAgICdhY3RpdmUnOiAnPWdtZk1vYmlsZU1lYXN1cmVsZW5ndGhBY3RpdmUnLFxuICAgICAgJ21hcCc6ICc9Z21mTW9iaWxlTWVhc3VyZWxlbmd0aE1hcCdcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6ICdHbWZNb2JpbGVNZWFzdXJlTGVuZ3RoQ29udHJvbGxlciBhcyBjdHJsJyxcbiAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBnbWZNb2JpbGVNZWFzdXJlTGVuZ3RoVGVtcGxhdGVVcmwsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXIpIHtcbiAgICAgIGlmICghY29udHJvbGxlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29udHJvbGxlcicpO1xuICAgICAgfVxuXG4gICAgICBjb250cm9sbGVyLmluaXQoKTtcbiAgICB9XG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnZ21mTW9iaWxlTWVhc3VyZWxlbmd0aCcsIG1vYmlsZU1lYXN1cmVMZW50aENvbXBvbmVudCk7XG5leHBvcnQgdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX01lYXN1ZU1vYmlsZUJhc2VDb250KSB7XG4gIENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRmaWx0ZXJcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcImdtZk1vYmlsZU1lYXN1cmVMZW5ndGhPcHRpb25zXCJdO1xuXG4gIF9pbmhlcml0c0xvb3NlKENvbnRyb2xsZXIsIF9NZWFzdWVNb2JpbGVCYXNlQ29udCk7XG5cbiAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsIGdldHRleHRDYXRhbG9nLCBnbWZNb2JpbGVNZWFzdXJlTGVuZ3RoT3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX01lYXN1ZU1vYmlsZUJhc2VDb250LmNhbGwodGhpcywgJHNjb3BlLCAkZmlsdGVyLCBnZXR0ZXh0Q2F0YWxvZykgfHwgdGhpcztcbiAgICBfdGhpcy5vcHRpb25zID0gZ21mTW9iaWxlTWVhc3VyZUxlbmd0aE9wdGlvbnM7XG4gICAgX3RoaXMubWVhc3VyZSA9IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IENvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5pbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLm1lYXN1cmUgPSBuZXcgbmdlb0ludGVyYWN0aW9uTWVhc3VyZUxlbmd0aE1vYmlsZSh0aGlzLmZpbHRlcignbmdlb1VuaXRQcmVmaXgnKSwgdGhpcy5nZXR0ZXh0Q2F0YWxvZywge1xuICAgICAgcHJlY2lzaW9uOiB0aGlzLm9wdGlvbnMucHJlY2lzaW9uIHx8IDMsXG4gICAgICBza2V0Y2hTdHlsZTogYnVpbGRTdHlsZSh0aGlzLm9wdGlvbnMuc2tldGNoU3R5bGUpXG4gICAgfSk7XG5cbiAgICBfTWVhc3VlTW9iaWxlQmFzZUNvbnQucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uYWRkUG9pbnQgPSBmdW5jdGlvbiBhZGRQb2ludCgpIHtcbiAgICBpZiAoIXRoaXMuZHJhd0ludGVyYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ludGVyYWN0aW9uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5kcmF3SW50ZXJhY3Rpb24uYWRkVG9EcmF3aW5nKCk7XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgaWYgKCF0aGlzLmRyYXdJbnRlcmFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRyYXdJbnRlcmFjdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuZHJhd0ludGVyYWN0aW9uLmNsZWFyRHJhd2luZygpO1xuICB9O1xuXG4gIF9wcm90by5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2goKSB7XG4gICAgaWYgKCF0aGlzLmRyYXdJbnRlcmFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRyYXdJbnRlcmFjdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuZHJhd0ludGVyYWN0aW9uLmZpbmlzaERyYXdpbmcoKTtcbiAgfTtcblxuICBfcHJvdG8uZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gQ29udHJvbGxlcjtcbn0oTWVhc3VlTW9iaWxlQmFzZUNvbnRyb2xsZXIpO1xubXlNb2R1bGUuY29udHJvbGxlcignR21mTW9iaWxlTWVhc3VyZUxlbmd0aENvbnRyb2xsZXInLCBDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZk1vYmlsZU1lYXN1cmVBcmVhQ29tcG9uZW50IGZyb20gJ2dtZi9tb2JpbGUvbWVhc3VyZS9hcmVhQ29tcG9uZW50LmpzJztcbmltcG9ydCBnbWZNb2JpbGVNZWFzdXJlTGVuZ3RoQ29tcG9uZW50IGZyb20gJ2dtZi9tb2JpbGUvbWVhc3VyZS9sZW5ndGhDb21wb25lbnQuanMnO1xuaW1wb3J0IGdtZk1vYmlsZU1lYXN1cmVQb2ludENvbXBvbmVudCBmcm9tICdnbWYvbW9iaWxlL21lYXN1cmUvcG9pbnRDb21wb25lbnQuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ2dtZk1vYmlsZU1lYXN1cmVNb2R1bGUnLCBbZ21mTW9iaWxlTWVhc3VyZUFyZWFDb21wb25lbnQubmFtZSwgZ21mTW9iaWxlTWVhc3VyZUxlbmd0aENvbXBvbmVudC5uYW1lLCBnbWZNb2JpbGVNZWFzdXJlUG9pbnRDb21wb25lbnQubmFtZV0pOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxhIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCJcXG4gICBuZy1pZj1cImN0cmwuYWN0aXZlXCJcXG4gICBuZy1jbGljaz1cImN0cmwuZGVhY3RpdmF0ZSgpXCI+XFxuICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9zcGFuPlxcbiAgICAge3tcXCdDbG9zZVxcJyB8IHRyYW5zbGF0ZX19XFxuPC9hPlxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJNb2JpbGVNZWFzdXJlUG9pbnRDb250cm9sbGVyLiRpbmplY3QgPSBbXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIiRzY29wZVwiLCBcIiRmaWx0ZXJcIiwgXCJnbWZSYXN0ZXJcIiwgXCJuZ2VvRGVib3VuY2VcIiwgXCJnbWZNb2JpbGVNZWFzdXJlUG9pbnRPcHRpb25zXCJdO1xubW9iaWxlTWVhc3VyZVBvaW50Q29tcG9uZW50LiRpbmplY3QgPSBbXCJnbWZNb2JpbGVNZWFzdXJlUG9pbnRUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBnbWZSYXN0ZXJSYXN0ZXJTZXJ2aWNlIGZyb20gJ2dtZi9yYXN0ZXIvUmFzdGVyU2VydmljZS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZVBvaW50TW9iaWxlIGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZVBvaW50TW9iaWxlLmpzJztcbmltcG9ydCBuZ2VvTWlzY0RlYm91bmNlIGZyb20gJ25nZW8vbWlzYy9kZWJvdW5jZS5qcyc7XG5pbXBvcnQgeyBpbnRlcmFjdGlvbkRlY29yYXRpb24gfSBmcm9tICduZ2VvL21pc2MvZGVjb3JhdGUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBNb2JpbGVEcmF3IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTW9iaWxlRHJhdy5qcyc7XG5pbXBvcnQgeyBidWlsZFN0eWxlIH0gZnJvbSAnbmdlby9vcHRpb25zLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZNb2JpbGVNZWFzdXJlUG9pbnQnLCBbZ21mUmFzdGVyUmFzdGVyU2VydmljZS5uYW1lLCBuZ2VvTWlzY0RlYm91bmNlLm5hbWVdKTtcbm15TW9kdWxlLnZhbHVlKCdnbWZNb2JpbGVNZWFzdXJlUG9pbnRUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSBhdHRycy5nbWZNb2JpbGVNZWFzdXJlUG9pbnRUZW1wbGF0ZXVybDtcbiAgcmV0dXJuIHRlbXBsYXRlVXJsICE9PSB1bmRlZmluZWQgPyB0ZW1wbGF0ZVVybCA6ICdnbWYvbWVhc3VyZS9wb2ludENvbXBvbmVudCc7XG59KTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdnbWYvbWVhc3VyZS9wb2ludENvbXBvbmVudCcsIHJlcXVpcmUoJy4vcG9pbnRDb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcblxuZnVuY3Rpb24gbW9iaWxlTWVhc3VyZVBvaW50Q29tcG9uZW50KGdtZk1vYmlsZU1lYXN1cmVQb2ludFRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZToge1xuICAgICAgJ2FjdGl2ZSc6ICc9Z21mTW9iaWxlTWVhc3VyZXBvaW50QWN0aXZlJyxcbiAgICAgICdtYXAnOiAnPWdtZk1vYmlsZU1lYXN1cmVwb2ludE1hcCdcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6ICdHbWZNb2JpbGVNZWFzdXJlUG9pbnRDb250cm9sbGVyIGFzIGN0cmwnLFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6IGdtZk1vYmlsZU1lYXN1cmVQb2ludFRlbXBsYXRlVXJsLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVyKSB7XG4gICAgICBpZiAoIWNvbnRyb2xsZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbnRyb2xsZXInKTtcbiAgICAgIH1cblxuICAgICAgY29udHJvbGxlci5pbml0KCk7XG4gICAgfVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ2dtZk1vYmlsZU1lYXN1cmVwb2ludCcsIG1vYmlsZU1lYXN1cmVQb2ludENvbXBvbmVudCk7XG5leHBvcnQgZnVuY3Rpb24gTW9iaWxlTWVhc3VyZVBvaW50Q29udHJvbGxlcihnZXR0ZXh0Q2F0YWxvZywgJHNjb3BlLCAkZmlsdGVyLCBnbWZSYXN0ZXIsIG5nZW9EZWJvdW5jZSwgZ21mTW9iaWxlTWVhc3VyZVBvaW50T3B0aW9ucykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMub3B0aW9ucyA9IGdtZk1vYmlsZU1lYXN1cmVQb2ludE9wdGlvbnM7XG4gIHRoaXMuZ21mUmFzdGVyXyA9IGdtZlJhc3RlcjtcbiAgdGhpcy5uZ2VvRGVib3VuY2VfID0gbmdlb0RlYm91bmNlO1xuICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICB0aGlzLiRmaWx0ZXJfID0gJGZpbHRlcjtcbiAgdGhpcy5tYXAgPSBudWxsO1xuICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX3RoaXMuYWN0aXZlO1xuICB9LCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgaWYgKCFfdGhpcy5tZWFzdXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZScpO1xuICAgIH1cblxuICAgIF90aGlzLm1lYXN1cmUuc2V0QWN0aXZlKG5ld1ZhbCk7XG5cbiAgICBfdGhpcy5oYW5kbGVNZWFzdXJlQWN0aXZlQ2hhbmdlXygpO1xuICB9KTtcbiAgdGhpcy5tZWFzdXJlID0gbnVsbDtcbiAgdGhpcy5kcmF3SW50ZXJhY3Rpb24gPSBudWxsO1xuICB0aGlzLm1hcFZpZXdQcm9wZXJ0eUNoYW5nZUV2ZW50S2V5XyA9IG51bGw7XG59XG5cbk1vYmlsZU1lYXN1cmVQb2ludENvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubWVhc3VyZSA9IG5ldyBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlUG9pbnRNb2JpbGUodGhpcy4kZmlsdGVyXygnbmdlb051bWJlckNvb3JkaW5hdGVzJyksIHRoaXMub3B0aW9ucy5mb3JtYXQsIHtcbiAgICBkZWNpbWFsczogdGhpcy5vcHRpb25zLmRlY2ltYWxzLFxuICAgIHNrZXRjaFN0eWxlOiBidWlsZFN0eWxlKHRoaXMub3B0aW9ucy5za2V0Y2hTdHlsZSlcbiAgfSk7XG4gIHRoaXMubWVhc3VyZS5zZXRBY3RpdmUodGhpcy5hY3RpdmUpO1xuICBpbnRlcmFjdGlvbkRlY29yYXRpb24odGhpcy5tZWFzdXJlKTtcbiAgdmFyIGRyYXdJbnRlcmFjdGlvbiA9IHRoaXMubWVhc3VyZS5nZXREcmF3SW50ZXJhY3Rpb24oKTtcblxuICBpZiAoIShkcmF3SW50ZXJhY3Rpb24gaW5zdGFuY2VvZiBNb2JpbGVEcmF3KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZHJhd0ludGVyYWN0aW9uJyk7XG4gIH1cblxuICB0aGlzLmRyYXdJbnRlcmFjdGlvbiA9IGRyYXdJbnRlcmFjdGlvbjtcbiAgaW50ZXJhY3Rpb25EZWNvcmF0aW9uKHRoaXMuZHJhd0ludGVyYWN0aW9uKTtcblxuICBpZiAoIXRoaXMubWFwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICB9XG5cbiAgdGhpcy5tYXAuYWRkSW50ZXJhY3Rpb24odGhpcy5tZWFzdXJlKTtcbn07XG5cbk1vYmlsZU1lYXN1cmVQb2ludENvbnRyb2xsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYWN0aXZlID0gZmFsc2U7XG59O1xuXG5Nb2JpbGVNZWFzdXJlUG9pbnRDb250cm9sbGVyLnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiB0aGlzLmdldHRleHRDYXRhbG9nXy5nZXRTdHJpbmcoc3RyKTtcbn07XG5cbk1vYmlsZU1lYXN1cmVQb2ludENvbnRyb2xsZXIucHJvdG90eXBlLmhhbmRsZU1lYXN1cmVBY3RpdmVDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMubWFwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICB9XG5cbiAgaWYgKCF0aGlzLm1lYXN1cmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZScpO1xuICB9XG5cbiAgaWYgKHRoaXMubWVhc3VyZS5nZXRBY3RpdmUoKSkge1xuICAgIHZhciB2aWV3ID0gdGhpcy5tYXAuZ2V0VmlldygpO1xuICAgIHRoaXMubWFwVmlld1Byb3BlcnR5Q2hhbmdlRXZlbnRLZXlfID0gbGlzdGVuKHZpZXcsICdwcm9wZXJ0eWNoYW5nZScsIHRoaXMubmdlb0RlYm91bmNlXyh0aGlzLmdldE1lYXN1cmVfLmJpbmQodGhpcyksIDMwMCwgdHJ1ZSksIHRoaXMpO1xuICAgIHRoaXMuZ2V0TWVhc3VyZV8oKTtcbiAgfSBlbHNlIGlmICh0aGlzLm1hcFZpZXdQcm9wZXJ0eUNoYW5nZUV2ZW50S2V5Xykge1xuICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBWaWV3UHJvcGVydHlDaGFuZ2VFdmVudEtleV8pO1xuICAgIHRoaXMubWFwVmlld1Byb3BlcnR5Q2hhbmdlRXZlbnRLZXlfID0gbnVsbDtcbiAgfVxufTtcblxuTW9iaWxlTWVhc3VyZVBvaW50Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0TWVhc3VyZV8gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIGlmICghdGhpcy5tYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gIH1cblxuICB2YXIgY2VudGVyID0gdGhpcy5tYXAuZ2V0VmlldygpLmdldENlbnRlcigpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShjZW50ZXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBjZW50ZXInKTtcbiAgfVxuXG4gIGlmICghdGhpcy5vcHRpb25zLnJhc3RlckxheWVycyB8fCB0aGlzLm9wdGlvbnMucmFzdGVyTGF5ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwYXJhbXMgPSB7XG4gICAgJ2xheWVycyc6IHRoaXMub3B0aW9ucy5yYXN0ZXJMYXllcnMubWFwKGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgIHJldHVybiBjb25maWcubmFtZTtcbiAgICB9KS5qb2luKCcsJylcbiAgfTtcbiAgdGhpcy5nbWZSYXN0ZXJfLmdldFJhc3RlcihjZW50ZXIsIHBhcmFtcykudGhlbihmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgaWYgKCFfdGhpczIubWVhc3VyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1lYXN1cmUnKTtcbiAgICB9XG5cbiAgICB2YXIgZWwgPSBfdGhpczIubWVhc3VyZS5nZXRUb29sdGlwRWxlbWVudCgpO1xuXG4gICAgdmFyIGN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBjbGFzc05hbWUgPSAnZ21mLW1vYmlsZS1tZWFzdXJlLXBvaW50JztcbiAgICBjdG4uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShfdGhpczIub3B0aW9ucy5yYXN0ZXJMYXllcnMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGNvbmZpZyA9IF9zdGVwLnZhbHVlO1xuICAgICAgdmFyIGtleSA9IGNvbmZpZy5uYW1lO1xuXG4gICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICAgICAgdmFyIGNoaWxkRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2hpbGRFbC5jbGFzc05hbWUgPSBcImdtZi1tb2JpbGUtbWVhc3VyZS1wb2ludC1cIiArIGtleTtcbiAgICAgICAgdmFyIHVuaXQgPSBjb25maWcudW5pdCB8fCAnJztcbiAgICAgICAgdmFyIGRlY2ltYWxzID0gY29uZmlnLmRlY2ltYWxzID4gMCA/IGNvbmZpZy5kZWNpbWFscyA6IDA7XG4gICAgICAgIHZhbHVlID0gX3RoaXMyLiRmaWx0ZXJfKCdudW1iZXInKSh2YWx1ZSwgZGVjaW1hbHMpO1xuICAgICAgICBjaGlsZEVsLmlubmVySFRNTCA9IFtfdGhpczIudHJhbnNsYXRlKGtleSksICc6ICcsIHZhbHVlLCAnICcsIHVuaXRdLmpvaW4oJycpO1xuICAgICAgICBjdG4uYXBwZW5kQ2hpbGQoY2hpbGRFbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzQ3RuID0gZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpO1xuXG4gICAgaWYgKHByZXZpb3VzQ3RuWzBdKSB7XG4gICAgICBwcmV2aW91c0N0blswXS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBlbC5hcHBlbmRDaGlsZChjdG4pO1xuICB9KTtcbn07XG5cbm15TW9kdWxlLmNvbnRyb2xsZXIoJ0dtZk1vYmlsZU1lYXN1cmVQb2ludENvbnRyb2xsZXInLCBNb2JpbGVNZWFzdXJlUG9pbnRDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZk1vYmlsZU5hdicsIFtdKTtcbnZhciBDTEFTU19OQU1FUyA9IHtcbiAgQUNUSVZFOiAnZ21mLW1vYmlsZS1uYXYtYWN0aXZlJyxcbiAgQkFDSzogJ2dtZi1tb2JpbGUtbmF2LWJhY2snLFxuICBHT19CQUNLOiAnZ21mLW1vYmlsZS1uYXYtZ28tYmFjaycsXG4gIFNMSURFOiAnZ21mLW1vYmlsZS1uYXYtc2xpZGUnLFxuICBTTElERV9PVVQ6ICdnbWYtbW9iaWxlLW5hdi1zbGlkZS1vdXQnXG59O1xuXG5mdW5jdGlvbiBtb2JpbGVOYXZpZ2F0aW9uQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgY29udHJvbGxlcjogJ2dtZk1vYmlsZU5hdkNvbnRyb2xsZXIgYXMgbmF2Q3RybCcsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICBzY29wZTogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmF2Q3RybCkge1xuICAgICAgaWYgKCFuYXZDdHJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBuYXZDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIG5hdkN0cmwuaW5pdChlbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnZ21mTW9iaWxlTmF2JywgbW9iaWxlTmF2aWdhdGlvbkNvbXBvbmVudCk7XG5leHBvcnQgZnVuY3Rpb24gQ29udHJvbGxlcigpIHtcbiAgdGhpcy5zbGlkXyA9IFtdO1xuICB0aGlzLmFjdGl2ZV8gPSBudWxsO1xuICB0aGlzLmhlYWRlcl8gPSBudWxsO1xuICB0aGlzLmJhY2tCdXR0b25fID0gbnVsbDtcbiAgdGhpcy5iYWNrID0gdGhpcy5iYWNrXy5iaW5kKHRoaXMpO1xufVxubXlNb2R1bGUuY29udHJvbGxlcignZ21mTW9iaWxlTmF2Q29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLmFjdGl2ZV8gPSAkKGVsZW1lbnQuZmluZChcIi5cIiArIENMQVNTX05BTUVTLkFDVElWRSArIFwiLlwiICsgQ0xBU1NfTkFNRVMuU0xJREUpKTtcbiAgdGhpcy5oZWFkZXJfID0gJChlbGVtZW50LmZpbmQoJz4gaGVhZGVyJykpO1xuICB0aGlzLmJhY2tCdXR0b25fID0gJChlbGVtZW50LmZpbmQoXCJoZWFkZXIgPiAuXCIgKyBDTEFTU19OQU1FUy5HT19CQUNLKSk7XG5cbiAgdmFyIG9uQ2xpY2sgPSBmdW5jdGlvbiBvbkNsaWNrKGV2dCkge1xuICAgIHZhciBzbGlkZU91dCA9ICQoZXZ0LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoXCIuXCIgKyBDTEFTU19OQU1FUy5TTElERSk7XG5cbiAgICBpZiAoc2xpZGVPdXQubGVuZ3RoICE9IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc2xpZGVPdXQnKTtcbiAgICB9XG5cbiAgICBfdGhpcy5zbGlkXy5wdXNoKHNsaWRlT3V0KTtcblxuICAgIHNsaWRlT3V0LmFkZENsYXNzKENMQVNTX05BTUVTLlNMSURFX09VVCkucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRVMuQUNUSVZFKTtcbiAgICB2YXIgZGF0YXRhcmdldCA9ICQoZXZ0LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtdGFyZ2V0Jyk7XG5cbiAgICBpZiAoIWRhdGF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhdGFyZ2V0Jyk7XG4gICAgfVxuXG4gICAgdmFyIHNsaWRlSW4gPSAkKGRhdGF0YXJnZXQpO1xuXG4gICAgaWYgKHNsaWRlSW4ubGVuZ3RoICE9IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc2xpZGVJbicpO1xuICAgIH1cblxuICAgIHNsaWRlSW4uYWRkQ2xhc3MoQ0xBU1NfTkFNRVMuQUNUSVZFKTtcblxuICAgIF90aGlzLnVwZGF0ZU5hdmlnYXRpb25IZWFkZXJfKHNsaWRlSW4sIGZhbHNlKTtcblxuICAgIF90aGlzLmFjdGl2ZV8gPSBzbGlkZUluO1xuICB9O1xuXG4gIGVsZW1lbnQuZmluZCgnW2RhdGEtdG9nZ2xlPXNsaWRlLWluXScpLm9uKHtcbiAgICAnY2xpY2snOiBvbkNsaWNrXG4gIH0pO1xuICB0aGlzLmJhY2tCdXR0b25fLmNsaWNrKHRoaXMuYmFjay5iaW5kKHRoaXMpKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZU5hdmlnYXRpb25IZWFkZXJfID0gZnVuY3Rpb24gKGFjdGl2ZSwgYmFjaykge1xuICBpZiAoIXRoaXMuaGVhZGVyXykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBoZWFkZXInKTtcbiAgfVxuXG4gIGlmICghdGhpcy5iYWNrQnV0dG9uXykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBiYWNrQnV0dG9uJyk7XG4gIH1cblxuICB0aGlzLmhlYWRlcl8udG9nZ2xlQ2xhc3MoQ0xBU1NfTkFNRVMuQkFDSywgYmFjayk7XG4gIHRoaXMuaGVhZGVyXy5maW5kKFwibmF2Om5vdCguXCIgKyBDTEFTU19OQU1FUy5BQ1RJVkUgKyBcIiArKVwiKS5yZW1vdmUoKTtcbiAgdGhpcy5oZWFkZXJfLmZpbmQoXCJuYXYuXCIgKyBDTEFTU19OQU1FUy5BQ1RJVkUpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVTLkFDVElWRSkuYWRkQ2xhc3MoQ0xBU1NfTkFNRVMuU0xJREVfT1VUKTtcbiAgdGhpcy5iYWNrQnV0dG9uXy50b2dnbGVDbGFzcyhDTEFTU19OQU1FUy5BQ1RJVkUsIHRoaXMuc2xpZF8ubGVuZ3RoID4gMCk7XG4gIHZhciBuYXYgPSAkKCc8bmF2PicpO1xuICBuYXYuYXBwZW5kKCQoJzxzcGFuPicsIHtcbiAgICB0ZXh0OiBhY3RpdmUuYXR0cignZGF0YS1oZWFkZXItdGl0bGUnKVxuICB9KSk7XG4gIHRoaXMuaGVhZGVyXy5hcHBlbmQobmF2KTtcbiAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIG5hdi5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIG5hdi5vZmZzZXQoKTtcbiAgICBuYXYuY3NzKCdkaXNwbGF5JywgJycpO1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIG5hdi5wb3NpdGlvbigpO1xuICAgICAgbmF2LmFkZENsYXNzKENMQVNTX05BTUVTLkFDVElWRSk7XG4gICAgfSwgMCk7XG4gIH0sIDApO1xufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuYmFja18gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5hY3RpdmVfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGFjdGl2ZScpO1xuICB9XG5cbiAgaWYgKHRoaXMuc2xpZF8ubGVuZ3RoIDw9IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLmFjdGl2ZV8ucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRVMuQUNUSVZFKTtcbiAgdmFyIHNsaWRlQmFjayA9IHRoaXMuc2xpZF8ucG9wKCk7XG5cbiAgaWYgKCFzbGlkZUJhY2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2xpZGVCYWNrJyk7XG4gIH1cblxuICBzbGlkZUJhY2suYWRkQ2xhc3MoQ0xBU1NfTkFNRVMuQUNUSVZFKS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FUy5TTElERV9PVVQpO1xuICB0aGlzLnVwZGF0ZU5hdmlnYXRpb25IZWFkZXJfKHNsaWRlQmFjaywgdHJ1ZSk7XG4gIHRoaXMuYWN0aXZlXyA9IHNsaWRlQmFjaztcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmJhY2tJZkFjdGl2ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIGlmICh0aGlzLmFjdGl2ZV8gIT09IG51bGwgJiYgdGhpcy5hY3RpdmVfLmlzKGVsZW1lbnQpKSB7XG4gICAgdGhpcy5iYWNrXygpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBtb2JpbGVOYXZpZ2F0aW9uQmFja0NvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnXl5nbWZNb2JpbGVOYXYnLFxuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IGZhbHNlLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuYXZDdHJsKSB7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0cnMuZ21mTW9iaWxlTmF2QmFjaywgZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgIGlmICghbmF2Q3RybCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBuYXZDdHJsJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3VmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgbmF2Q3RybC5iYWNrSWZBY3RpdmUoZWxlbWVudFswXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubXlNb2R1bGUuZGlyZWN0aXZlKCdnbWZNb2JpbGVOYXZCYWNrJywgbW9iaWxlTmF2aWdhdGlvbkJhY2tDb21wb25lbnQpO1xuXG5mdW5jdGlvbiBtb2JpbGVOYXZpZ2F0aW9uQmFja09uQ2xpY2tDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ15eZ21mTW9iaWxlTmF2JyxcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiBmYWxzZSxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmF2Q3RybCkge1xuICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghbmF2Q3RybCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBuYXZDdHJsJyk7XG4gICAgICAgIH1cblxuICAgICAgICBuYXZDdHJsLmJhY2tJZkFjdGl2ZShlbGVtZW50WzBdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubXlNb2R1bGUuZGlyZWN0aXZlKCdnbWZNb2JpbGVOYXZCYWNrT25DbGljaycsIG1vYmlsZU5hdmlnYXRpb25CYWNrT25DbGlja0NvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBnbWZNb2JpbGVOYXZpZ2F0aW9uQ29tcG9uZW50IGZyb20gJ2dtZi9tb2JpbGUvbmF2aWdhdGlvbi9jb21wb25lbnQuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ2dtZk1vYmlsZU5hdmlnYXRpb25Nb2R1bGUnLCBbZ21mTW9iaWxlTmF2aWdhdGlvbkNvbXBvbmVudC5uYW1lXSk7IiwiUGVybWFsaW5rU2VydmljZS4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkdGltZW91dFwiLCBcIiRyb290U2NvcGVcIiwgXCIkaW5qZWN0b3JcIiwgXCJuZ2VvRGVib3VuY2VcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIm5nZW9FdmVudEhlbHBlclwiLCBcIm5nZW9TdGF0ZU1hbmFnZXJcIiwgXCJuZ2VvTG9jYXRpb25cIiwgXCJnbWZMYXllckJlaW5nU3dpcGVcIiwgXCJnbWZQZXJtYWxpbmtPcHRpb25zXCIsIFwiZ21mRGF0YVNvdXJjZXNNYW5hZ2VyXCIsIFwibmdlb1dNU1RpbWVcIl07XG5cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBQZXJtYWxpbmtQYXJhbSB9IGZyb20gJ2dtZi9pbmRleC5qcyc7XG5pbXBvcnQgZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlIGZyb20gJ2dtZi9hdXRoZW50aWNhdGlvbi9TZXJ2aWNlLmpzJztcbmltcG9ydCBnbWZMYXllckJlaW5nU3dpcGUgZnJvbSAnZ21mL2RhdGFzb3VyY2UvTGF5ZXJCZWluZ1N3aXBlLmpzJztcbmltcG9ydCBnbWZUaGVtZU1hbmFnZXIsIHsgVGhlbWVFdmVudFR5cGUgfSBmcm9tICdnbWYvdGhlbWUvTWFuYWdlci5qcyc7XG5pbXBvcnQgZ21mVGhlbWVUaGVtZXMsIHsgZmluZFRoZW1lQnlOYW1lLCBmaW5kR3JvdXBCeU5hbWUgfSBmcm9tICdnbWYvdGhlbWUvVGhlbWVzLmpzJztcbmltcG9ydCBuZ2VvUG9wb3ZlciBmcm9tICduZ2VvL1BvcG92ZXIuanMnO1xuaW1wb3J0IG5nZW9EcmF3RmVhdHVyZXMgZnJvbSAnbmdlby9kcmF3L2ZlYXR1cmVzLmpzJztcbmltcG9ydCBnbWZEYXRhU291cmNlc01hbmFnZXIgZnJvbSAnZ21mL2RhdGFzb3VyY2UvTWFuYWdlci5qcyc7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VHcm91cCBmcm9tICduZ2VvL2RhdGFzb3VyY2UvR3JvdXAuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlT0dDLCB7IGd1ZXNzU2VydmljZVR5cGVCeVVybCwgVHlwZSB9IGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuaW1wb3J0IHsgUGVybWFsaW5rM2RQYXJhbSB9IGZyb20gJ25nZW8vb2xjcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRGZWF0dXJlSGFzaCBmcm9tICduZ2VvL2Zvcm1hdC9GZWF0dXJlSGFzaC5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzIGZyb20gJ25nZW8vZm9ybWF0L0ZlYXR1cmVQcm9wZXJ0aWVzLmpzJztcbmltcG9ydCB7IExBWUVSX05PREVfTkFNRV9LRVkgfSBmcm9tICduZ2VvL21hcC9MYXllckhlbHBlci5qcyc7XG5pbXBvcnQgbmdlb01pc2NEZWJvdW5jZSBmcm9tICduZ2VvL21pc2MvZGVib3VuY2UuanMnO1xuaW1wb3J0IG5nZW9NaXNjRXZlbnRIZWxwZXIgZnJvbSAnbmdlby9taXNjL0V2ZW50SGVscGVyLmpzJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyTW9kdWxlIGZyb20gJ25nZW8vc3RhdGVtYW5hZ2VyL21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb1N0YXRlbWFuYWdlclNlcnZpY2UgZnJvbSAnbmdlby9zdGF0ZW1hbmFnZXIvU2VydmljZS5qcyc7XG5pbXBvcnQgbmdlb0xheWVydHJlZUNvbnRyb2xsZXIsIHsgTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uIH0gZnJvbSAnbmdlby9sYXllcnRyZWUvQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCBvbEdlb21NdWx0aVBvaW50IGZyb20gJ29sL2dlb20vTXVsdGlQb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xMYXllckdyb3VwIGZyb20gJ29sL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IHsgYnVpbGRTdHlsZSB9IGZyb20gJ25nZW8vb3B0aW9ucy5qcyc7XG5leHBvcnQgdmFyIE9wZW5MYXllcnNMYXllclByb3BlcnRpZXMgPSB7XG4gIE9QQUNJVFk6ICdvcGFjaXR5J1xufTtcbnZhciBFeHREU1NlcGFyYXRvciA9IHtcbiAgTElTVDogJywnLFxuICBOQU1FUzogJzsnXG59O1xudmFyIFBhcmFtUHJlZml4ID0ge1xuICBESU1FTlNJT05TOiAnZGltXycsXG4gIFRSRUVfRU5BQkxFOiAndHJlZV9lbmFibGVfJyxcbiAgVFJFRV9HUk9VUF9MQVlFUlM6ICd0cmVlX2dyb3VwX2xheWVyc18nLFxuICBUUkVFX0dST1VQX09QQUNJVFk6ICd0cmVlX2dyb3VwX29wYWNpdHlfJyxcbiAgVFJFRV9PUEFDSVRZOiAndHJlZV9vcGFjaXR5XycsXG4gIFRSRUVfVElNRTogJ3RyZWVfdGltZV8nLFxuICBXRlM6ICd3ZnNfJ1xufTtcbmV4cG9ydCBmdW5jdGlvbiBQZXJtYWxpbmtTZXJ2aWNlKCRxLCAkdGltZW91dCwgJHJvb3RTY29wZSwgJGluamVjdG9yLCBuZ2VvRGVib3VuY2UsIGdldHRleHRDYXRhbG9nLCBuZ2VvRXZlbnRIZWxwZXIsIG5nZW9TdGF0ZU1hbmFnZXIsIG5nZW9Mb2NhdGlvbiwgZ21mTGF5ZXJCZWluZ1N3aXBlLCBnbWZQZXJtYWxpbmtPcHRpb25zLCBnbWZEYXRhU291cmNlc01hbmFnZXIsIG5nZW9XTVNUaW1lKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5xXyA9ICRxO1xuICB0aGlzLnJvb3RTY29wZV8gPSAkcm9vdFNjb3BlO1xuICB0aGlzLiR0aW1lb3V0XyA9ICR0aW1lb3V0O1xuICB0aGlzLm1hcFZpZXdQcm9wZXJ0eUNoYW5nZUV2ZW50S2V5XyA9IG51bGw7XG4gIHRoaXMubmdlb0RlYm91bmNlXyA9IG5nZW9EZWJvdW5jZTtcbiAgdGhpcy5uZ2VvRXZlbnRIZWxwZXJfID0gbmdlb0V2ZW50SGVscGVyO1xuICB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfID0gbmdlb1N0YXRlTWFuYWdlcjtcbiAgdGhpcy5nbWZEYXRhU291cmNlc01hbmFnZXJfID0gZ21mRGF0YVNvdXJjZXNNYW5hZ2VyO1xuICB0aGlzLm5nZW9XTVNUaW1lXyA9IG5nZW9XTVNUaW1lO1xuICB0aGlzLm5nZW9GZWF0dXJlc18gPSAkaW5qZWN0b3IuaGFzKCduZ2VvRmVhdHVyZXMnKSA/ICRpbmplY3Rvci5nZXQoJ25nZW9GZWF0dXJlcycpIDogbnVsbDtcbiAgdGhpcy5uZ2VvQmFja2dyb3VuZExheWVyTWdyXyA9ICRpbmplY3Rvci5oYXMoJ25nZW9CYWNrZ3JvdW5kTGF5ZXJNZ3InKSA/ICRpbmplY3Rvci5nZXQoJ25nZW9CYWNrZ3JvdW5kTGF5ZXJNZ3InKSA6IG51bGw7XG4gIHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlXyA9IGdtZkxheWVyQmVpbmdTd2lwZTtcbiAgdmFyIG5nZW9GZWF0dXJlT3ZlcmxheU1nciA9ICRpbmplY3Rvci5oYXMoJ25nZW9GZWF0dXJlT3ZlcmxheU1ncicpID8gJGluamVjdG9yLmdldCgnbmdlb0ZlYXR1cmVPdmVybGF5TWdyJykgOiBudWxsO1xuICB0aGlzLmZlYXR1cmVPdmVybGF5XyA9IG5nZW9GZWF0dXJlT3ZlcmxheU1nciA/IG5nZW9GZWF0dXJlT3ZlcmxheU1nci5nZXRGZWF0dXJlT3ZlcmxheSgpIDogbnVsbDtcbiAgdGhpcy5mZWF0dXJlSGVscGVyXyA9ICRpbmplY3Rvci5oYXMoJ25nZW9GZWF0dXJlSGVscGVyJykgPyAkaW5qZWN0b3IuZ2V0KCduZ2VvRmVhdHVyZUhlbHBlcicpIDogbnVsbDtcbiAgdGhpcy5uZ2VvUXVlcmVudF8gPSAkaW5qZWN0b3IuaGFzKCduZ2VvUXVlcmVudCcpID8gJGluamVjdG9yLmdldCgnbmdlb1F1ZXJlbnQnKSA6IG51bGw7XG5cbiAgaWYgKGdtZlBlcm1hbGlua09wdGlvbnMudXNlTG9jYWxTdG9yYWdlID09PSB0cnVlKSB7XG4gICAgdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy5zZXRVc2VMb2NhbFN0b3JhZ2UodHJ1ZSk7XG4gIH1cblxuICB0aGlzLmNyb3NzaGFpckVuYWJsZWRCeURlZmF1bHRfID0gISFnbWZQZXJtYWxpbmtPcHRpb25zLmNyb3NzaGFpckVuYWJsZWRCeURlZmF1bHQ7XG4gIHRoaXMucG9pbnRSZWNlbnRlclpvb21fID0gZ21mUGVybWFsaW5rT3B0aW9ucy5wb2ludFJlY2VudGVyWm9vbTtcbiAgdGhpcy5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcl8gPSAkaW5qZWN0b3IuaGFzKCdnbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcicpID8gJGluamVjdG9yLmdldCgnZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXInKSA6IG51bGw7XG4gIHRoaXMuZ21mVGhlbWVzXyA9ICRpbmplY3Rvci5oYXMoJ2dtZlRoZW1lcycpID8gJGluamVjdG9yLmdldCgnZ21mVGhlbWVzJykgOiBudWxsO1xuICB0aGlzLmdtZk9iamVjdEVkaXRpbmdNYW5hZ2VyXyA9ICRpbmplY3Rvci5oYXMoJ2dtZk9iamVjdEVkaXRpbmdNYW5hZ2VyJykgPyAkaW5qZWN0b3IuZ2V0KCdnbWZPYmplY3RFZGl0aW5nTWFuYWdlcicpIDogbnVsbDtcbiAgdGhpcy5nbWZUaGVtZU1hbmFnZXJfID0gJGluamVjdG9yLmhhcygnZ21mVGhlbWVNYW5hZ2VyJykgPyAkaW5qZWN0b3IuZ2V0KCdnbWZUaGVtZU1hbmFnZXInKSA6IG51bGw7XG4gIHRoaXMuZGVmYXVsdFRoZW1lXyA9ICRpbmplY3Rvci5oYXMoJ2RlZmF1bHRUaGVtZScpID8gJGluamVjdG9yLmdldCgnZGVmYXVsdFRoZW1lJykgOiB1bmRlZmluZWQ7XG4gIHRoaXMuZ21mVHJlZU1hbmFnZXJfID0gJGluamVjdG9yLmhhcygnZ21mVHJlZU1hbmFnZXInKSA/ICRpbmplY3Rvci5nZXQoJ2dtZlRyZWVNYW5hZ2VyJykgOiBudWxsO1xuICB0aGlzLm5nZW9Mb2NhdGlvbl8gPSBuZ2VvTG9jYXRpb247XG4gIHRoaXMubmdlb1dmc1Blcm1hbGlua18gPSAkaW5qZWN0b3IuaGFzKCduZ2VvV2ZzUGVybWFsaW5rJykgPyAkaW5qZWN0b3IuZ2V0KCduZ2VvV2ZzUGVybWFsaW5rJykgOiBudWxsO1xuICB0aGlzLmdtZlVzZXJfID0gJGluamVjdG9yLmhhcygnZ21mVXNlcicpID8gJGluamVjdG9yLmdldCgnZ21mVXNlcicpIDogbnVsbDtcbiAgdGhpcy5tYXBfID0gbnVsbDtcbiAgdGhpcy5uZ2VvQXV0b1Byb2plY3Rpb25fID0gJGluamVjdG9yLmhhcygnbmdlb0F1dG9Qcm9qZWN0aW9uJykgPyAkaW5qZWN0b3IuZ2V0KCduZ2VvQXV0b1Byb2plY3Rpb24nKSA6IG51bGw7XG4gIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICB0aGlzLnNvdXJjZVByb2plY3Rpb25zXyA9IG51bGw7XG5cbiAgaWYgKGdtZlBlcm1hbGlua09wdGlvbnMucHJvamVjdGlvbkNvZGVzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5uZ2VvQXV0b1Byb2plY3Rpb25fKSB7XG4gICAgdmFyIHByb2plY3Rpb25zID0gdGhpcy5uZ2VvQXV0b1Byb2plY3Rpb25fLmdldFByb2plY3Rpb25MaXN0KGdtZlBlcm1hbGlua09wdGlvbnMucHJvamVjdGlvbkNvZGVzKTtcblxuICAgIGlmIChwcm9qZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNvdXJjZVByb2plY3Rpb25zXyA9IHByb2plY3Rpb25zO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuY3Jvc3NoYWlyRmVhdHVyZV8gPSBudWxsO1xuICB0aGlzLmNyb3NzaGFpclN0eWxlXyA9IGJ1aWxkU3R5bGUoZ21mUGVybWFsaW5rT3B0aW9ucy5jcm9zc2hhaXJTdHlsZSk7XG4gIHRoaXMubWFwVG9vbHRpcF8gPSBudWxsO1xuICB0aGlzLmZlYXR1cmVIYXNoRm9ybWF0XyA9IG5ldyBuZ2VvRm9ybWF0RmVhdHVyZUhhc2goe1xuICAgIHNldFN0eWxlOiBmYWxzZSxcbiAgICBlbmNvZGVTdHlsZXM6IGZhbHNlLFxuICAgIHByb3BlcnRpZXNUeXBlOiB7XG4gICAgICAnZmlsbENvbG9yJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLkNPTE9SLFxuICAgICAgJ2ZpbGxPcGFjaXR5Jzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLk9QQUNJVFksXG4gICAgICAnZm9udENvbG9yJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLkNPTE9SLFxuICAgICAgJ2ZvbnRTaXplJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNJWkUsXG4gICAgICAnaXNCb3gnOiBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuSVNfUkVDVEFOR0xFLFxuICAgICAgJ2lzQ2lyY2xlJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX0NJUkNMRSxcbiAgICAgICdpc0xhYmVsJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1RFWFQsXG4gICAgICAnbmFtZSc6IG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5OQU1FLFxuICAgICAgJ3BvaW50UmFkaXVzJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNJWkUsXG4gICAgICAnc2hvd0xhYmVsJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNIT1dfTEFCRUwsXG4gICAgICAnc2hvd01lYXN1cmUnOiBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuU0hPV19NRUFTVVJFLFxuICAgICAgJ3N0cm9rZUNvbG9yJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLkNPTE9SLFxuICAgICAgJ3N0cm9rZVdpZHRoJzogbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNUUk9LRVxuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlczoge1xuICAgICAgJ25hbWUnOiBmdW5jdGlvbiBuYW1lKGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoZ2VvbWV0cnkuZ2V0VHlwZSgpKTtcbiAgICAgIH0sXG4gICAgICAnZmlsbE9wYWNpdHknOiBmdW5jdGlvbiBmaWxsT3BhY2l0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAuNTtcbiAgICAgIH0sXG4gICAgICAnc2hvd0xhYmVsJzogZnVuY3Rpb24gc2hvd0xhYmVsKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9LFxuICAgICAgJ3Nob3dNZWFzdXJlJzogZnVuY3Rpb24gc2hvd01lYXN1cmUoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmICh0aGlzLm5nZW9CYWNrZ3JvdW5kTGF5ZXJNZ3JfKSB7XG4gICAgbGlzdGVuKHRoaXMubmdlb0JhY2tncm91bmRMYXllck1ncl8sICdjaGFuZ2UnLCB0aGlzLmhhbmRsZUJhY2tncm91bmRMYXllck1hbmFnZXJDaGFuZ2VfLCB0aGlzKTtcbiAgfVxuXG4gIHRoaXMucm9vdFNjb3BlXy4kb24oJ25nZW8tbGF5ZXJ0cmVlLXN0YXRlJywgZnVuY3Rpb24gKGV2ZW50LCB0cmVlQ3RybCwgZmlyc3RQYXJlbnQpIHtcbiAgICB2YXIgbmV3U3RhdGUgPSB7fTtcblxuICAgIGlmIChmaXJzdFBhcmVudC5ub2RlLm1peGVkKSB7XG4gICAgICB2YXIgc3RhdGUgPSB0cmVlQ3RybC5nZXRTdGF0ZSgpO1xuXG4gICAgICBpZiAoc3RhdGUgIT09ICdvbicgJiYgc3RhdGUgIT09ICdvZmYnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc3RhdGUnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHZpc2libGUgPSBzdGF0ZSA9PT0gJ29uJztcbiAgICAgIHRyZWVDdHJsLnRyYXZlcnNlRGVwdGhGaXJzdChmdW5jdGlvbiAoY3RybCkge1xuICAgICAgICB2YXIgZ3JvdXBOb2RlID0gY3RybC5ub2RlO1xuXG4gICAgICAgIGlmIChncm91cE5vZGUuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhciBwYXJhbSA9IFBhcmFtUHJlZml4LlRSRUVfRU5BQkxFICsgY3RybC5ub2RlLm5hbWU7XG4gICAgICAgICAgbmV3U3RhdGVbcGFyYW1dID0gXCJcIiArIHZpc2libGU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZ21mTGF5ZXJOYW1lcyA9IFtdO1xuICAgICAgZmlyc3RQYXJlbnQudHJhdmVyc2VEZXB0aEZpcnN0KGZ1bmN0aW9uIChjdHJsKSB7XG4gICAgICAgIHZhciBncm91cE5vZGUgPSBjdHJsLm5vZGU7XG5cbiAgICAgICAgaWYgKGdyb3VwTm9kZS5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICYmIGN0cmwuZ2V0U3RhdGUoKSA9PT0gJ29uJykge1xuICAgICAgICAgIGdtZkxheWVyTmFtZXMucHVzaChjdHJsLm5vZGUubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbmV3U3RhdGVbXCJcIiArIFBhcmFtUHJlZml4LlRSRUVfR1JPVVBfTEFZRVJTICsgZmlyc3RQYXJlbnQubm9kZS5uYW1lXSA9IGdtZkxheWVyTmFtZXMuam9pbignLCcpO1xuICAgIH1cblxuICAgIF90aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLnVwZGF0ZVN0YXRlKG5ld1N0YXRlKTtcbiAgfSk7XG4gIHRoaXMucm9vdFNjb3BlXy4kb24oJ25nZW8tbGF5ZXJ0cmVlLW9wYWNpdHknLCBmdW5jdGlvbiAoZXZlbnQsIHRyZWVDdHJsKSB7XG4gICAgdmFyIG5ld1N0YXRlID0ge307XG4gICAgdmFyIG9wYWNpdHkgPSB0cmVlQ3RybC5sYXllci5nZXRPcGFjaXR5KCk7XG4gICAgdmFyIHN0YXRlTmFtZSA9IFwiXCIgKyAodHJlZUN0cmwucGFyZW50Lm5vZGUubWl4ZWQgPyBQYXJhbVByZWZpeC5UUkVFX09QQUNJVFkgOiBQYXJhbVByZWZpeC5UUkVFX0dST1VQX09QQUNJVFkpICsgdHJlZUN0cmwubm9kZS5uYW1lO1xuICAgIG5ld1N0YXRlW3N0YXRlTmFtZV0gPSBvcGFjaXR5O1xuXG4gICAgX3RoaXMubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUobmV3U3RhdGUpO1xuICB9KTtcbiAgdmFyIGZlYXR1cmVzID0gdGhpcy5nZXRGZWF0dXJlcygpO1xuXG4gIGlmICh0aGlzLm5nZW9GZWF0dXJlc18pIHtcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICBpZiAoX3RoaXMuZmVhdHVyZUhlbHBlcl8pIHtcbiAgICAgICAgX3RoaXMuZmVhdHVyZUhlbHBlcl8uc2V0U3R5bGUoZmVhdHVyZSk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmFkZE5nZW9GZWF0dXJlXyhmZWF0dXJlKTtcbiAgICB9KTtcbiAgICB0aGlzLm5nZW9GZWF0dXJlc18uZXh0ZW5kKGZlYXR1cmVzKTtcbiAgICBsaXN0ZW4odGhpcy5uZ2VvRmVhdHVyZXNfLCAnYWRkJywgdGhpcy5oYW5kbGVOZ2VvRmVhdHVyZXNBZGRfLCB0aGlzKTtcbiAgICBsaXN0ZW4odGhpcy5uZ2VvRmVhdHVyZXNfLCAncmVtb3ZlJywgdGhpcy5oYW5kbGVOZ2VvRmVhdHVyZXNSZW1vdmVfLCB0aGlzKTtcbiAgfVxuXG4gIGlmICh0aGlzLmZlYXR1cmVIZWxwZXJfKSB7XG4gICAgdGhpcy5yb290U2NvcGVfLiRvbignJGxvY2FsZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIGlmICghX3RoaXMuZmVhdHVyZUhlbHBlcl8pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZUhlbHBlcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuZmVhdHVyZUhlbHBlcl8uc2V0U3R5bGUoZmVhdHVyZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICh0aGlzLmdtZlRoZW1lTWFuYWdlcl8pIHtcbiAgICB0aGlzLnJvb3RTY29wZV8uJG9uKFRoZW1lRXZlbnRUeXBlLlRIRU1FX05BTUVfU0VULCBmdW5jdGlvbiAoZXZlbnQsIG5hbWUpIHtcbiAgICAgIF90aGlzLnNldFRoZW1lSW5VcmxfKG5hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgdGhpcy5yb290U2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90aGlzLmdtZkxheWVyQmVpbmdTd2lwZV8ubGF5ZXI7XG4gIH0sIHRoaXMuaGFuZGxlTGF5ZXJCZWluZ1N3aXBlQ2hhbmdlXy5iaW5kKHRoaXMpKTtcbiAgdGhpcy5yb290U2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90aGlzLmdtZkxheWVyQmVpbmdTd2lwZV8uc3dpcGVWYWx1ZTtcbiAgfSwgdGhpcy5oYW5kbGVNYXBTd2lwZVZhbHVlXy5iaW5kKHRoaXMpKTtcbiAgdGhpcy5zZXRFeHRlcm5hbERhdGFTb3VyY2VzU3RhdGVQcm9taXNlXyA9IG51bGw7XG5cbiAgaWYgKHRoaXMubmdlb1F1ZXJlbnRfICYmIHRoaXMuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJfKSB7XG4gICAgdGhpcy5pbml0RXh0ZXJuYWxEYXRhU291cmNlc18oKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJfKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcicpO1xuICAgICAgfVxuXG4gICAgICBsaXN0ZW4oX3RoaXMuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJfLndtc0dyb3Vwc0NvbGxlY3Rpb24sICdhZGQnLCBfdGhpcy5oYW5kbGVFeHRlcm5hbERTR3JvdXBDb2xsZWN0aW9uQWRkXywgX3RoaXMpO1xuICAgICAgbGlzdGVuKF90aGlzLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyXy53bXNHcm91cHNDb2xsZWN0aW9uLCAncmVtb3ZlJywgX3RoaXMuaGFuZGxlRXh0ZXJuYWxEU0dyb3VwQ29sbGVjdGlvblJlbW92ZV8sIF90aGlzKTtcbiAgICAgIGxpc3RlbihfdGhpcy5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcl8ud210c0dyb3Vwc0NvbGxlY3Rpb24sICdhZGQnLCBfdGhpcy5oYW5kbGVFeHRlcm5hbERTR3JvdXBDb2xsZWN0aW9uQWRkXywgX3RoaXMpO1xuICAgICAgbGlzdGVuKF90aGlzLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyXy53bXRzR3JvdXBzQ29sbGVjdGlvbiwgJ3JlbW92ZScsIF90aGlzLmhhbmRsZUV4dGVybmFsRFNHcm91cENvbGxlY3Rpb25SZW1vdmVfLCBfdGhpcyk7XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoX3RoaXMuZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXJfLndtc0dyb3VwcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3bXNHcm91cCA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgIF90aGlzLnJlZ2lzdGVyRXh0ZXJuYWxEU0dyb3VwXyh3bXNHcm91cCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKF90aGlzLmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyXy53bXRzR3JvdXBzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIHdtdHNHcm91cCA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICBfdGhpcy5yZWdpc3RlckV4dGVybmFsRFNHcm91cF8od210c0dyb3VwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMuaW5pdExheWVyc18oKTtcbn1cblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuaGFuZGxlTGF5ZXJCZWluZ1N3aXBlQ2hhbmdlXyA9IGZ1bmN0aW9uIChsYXllciwgb2xkTGF5ZXIpIHtcbiAgaWYgKGxheWVyID09PSBvbGRMYXllcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChsYXllcikge1xuICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICB2YXIgbWFwU3dpcGVWYWx1ZSA9IHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlXy5zd2lwZVZhbHVlO1xuXG4gICAgaWYgKG1hcFN3aXBlVmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlXy5zd2lwZVZhbHVlID0gMC41O1xuICAgIH1cblxuICAgIHZhciBkYXRhU291cmNlSWQgPSBsYXllci5nZXQoJ2RhdGFTb3VyY2VJZCcpO1xuICAgIG9iamVjdFtQZXJtYWxpbmtQYXJhbS5NQVBfU1dJUEVdID0gZGF0YVNvdXJjZUlkO1xuICAgIG9iamVjdFtQZXJtYWxpbmtQYXJhbS5NQVBfU1dJUEVfVkFMVUVdID0gXCJcIiArIG1hcFN3aXBlVmFsdWU7XG4gICAgdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy51cGRhdGVTdGF0ZShvYmplY3QpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZGVsZXRlUGFyYW0oUGVybWFsaW5rUGFyYW0uTUFQX1NXSVBFKTtcbiAgICB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLmRlbGV0ZVBhcmFtKFBlcm1hbGlua1BhcmFtLk1BUF9TV0lQRV9WQUxVRSk7XG4gIH1cbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZU1hcFN3aXBlVmFsdWVfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbWFwU3dpcGVWYWx1ZSA9IHRoaXMuZ21mTGF5ZXJCZWluZ1N3aXBlXy5zd2lwZVZhbHVlO1xuICB2YXIgb2JqZWN0ID0ge307XG5cbiAgaWYgKG1hcFN3aXBlVmFsdWUpIHtcbiAgICBvYmplY3RbUGVybWFsaW5rUGFyYW0uTUFQX1NXSVBFX1ZBTFVFXSA9IFwiXCIgKyBtYXBTd2lwZVZhbHVlO1xuICAgIHRoaXMubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUob2JqZWN0KTtcbiAgfVxufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuZ2V0TWFwQ2VudGVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgeCA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbE51bWJlclZhbHVlKFBlcm1hbGlua1BhcmFtLk1BUF9YKTtcbiAgdmFyIHkgPSB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLmdldEluaXRpYWxOdW1iZXJWYWx1ZShQZXJtYWxpbmtQYXJhbS5NQVBfWSk7XG5cbiAgaWYgKHggIT09IHVuZGVmaW5lZCAmJiB5ICE9PSB1bmRlZmluZWQgJiYgIWlzTmFOKHgpICYmICFpc05hTih5KSkge1xuICAgIHZhciBjZW50ZXIgPSBbeCwgeV07XG5cbiAgICBpZiAodGhpcy5zb3VyY2VQcm9qZWN0aW9uc18gIT09IG51bGwgJiYgdGhpcy5uZ2VvQXV0b1Byb2plY3Rpb25fKSB7XG4gICAgICBpZiAoIXRoaXMubWFwXykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXRQcm9qZWN0aW9uID0gdGhpcy5tYXBfLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICB2YXIgcmVwcm9qZWN0ZWRDZW50ZXIgPSB0aGlzLm5nZW9BdXRvUHJvamVjdGlvbl8udHJ5UHJvamVjdGlvbnNXaXRoSW52ZXJzaW9uKGNlbnRlciwgdGFyZ2V0UHJvamVjdGlvbi5nZXRFeHRlbnQoKSwgdGFyZ2V0UHJvamVjdGlvbiwgdGhpcy5zb3VyY2VQcm9qZWN0aW9uc18pO1xuXG4gICAgICBpZiAocmVwcm9qZWN0ZWRDZW50ZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcHJvamVjdGVkQ2VudGVyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjZW50ZXI7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmdldE1hcFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB6b29tID0gdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy5nZXRJbml0aWFsTnVtYmVyVmFsdWUoUGVybWFsaW5rUGFyYW0uTUFQX1opO1xuICByZXR1cm4gem9vbSAhPT0gdW5kZWZpbmVkICYmIGlzTmFOKHpvb20pID8gdW5kZWZpbmVkIDogem9vbTtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmdldE1hcENyb3NzaGFpciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNyb3NzaGFpciA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbEJvb2xlYW5WYWx1ZShQZXJtYWxpbmtQYXJhbS5NQVBfQ1JPU1NIQUlSKTtcbiAgcmV0dXJuIGNyb3NzaGFpciA9PT0gdW5kZWZpbmVkID8gdGhpcy5jcm9zc2hhaXJFbmFibGVkQnlEZWZhdWx0XyA6IGNyb3NzaGFpcjtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLnNldE1hcENyb3NzaGFpciA9IGZ1bmN0aW9uIChvcHRfY2VudGVyKSB7XG4gIGlmICghdGhpcy5tYXBfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICB9XG5cbiAgaWYgKCF0aGlzLmZlYXR1cmVPdmVybGF5Xykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmZWF0dXJlT3ZlcmxheScpO1xuICB9XG5cbiAgdmFyIGNyb3NzaGFpckNvb3JkaW5hdGU7XG5cbiAgaWYgKG9wdF9jZW50ZXIpIHtcbiAgICBjcm9zc2hhaXJDb29yZGluYXRlID0gb3B0X2NlbnRlcjtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc2hhaXJDb29yZGluYXRlID0gdGhpcy5tYXBfLmdldFZpZXcoKS5nZXRDZW50ZXIoKTtcbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShjcm9zc2hhaXJDb29yZGluYXRlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgY3Jvc3NoYWlyQ29vcmRpbmF0ZScpO1xuICB9XG5cbiAgaWYgKHRoaXMuY3Jvc3NoYWlyRmVhdHVyZV8pIHtcbiAgICB0aGlzLmZlYXR1cmVPdmVybGF5Xy5yZW1vdmVGZWF0dXJlKHRoaXMuY3Jvc3NoYWlyRmVhdHVyZV8pO1xuICB9XG5cbiAgdGhpcy5jcm9zc2hhaXJGZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUobmV3IG9sR2VvbVBvaW50KGNyb3NzaGFpckNvb3JkaW5hdGUpKTtcbiAgdGhpcy5jcm9zc2hhaXJGZWF0dXJlXy5zZXRTdHlsZSh0aGlzLmNyb3NzaGFpclN0eWxlXyk7XG4gIHRoaXMuZmVhdHVyZU92ZXJsYXlfLmFkZEZlYXR1cmUodGhpcy5jcm9zc2hhaXJGZWF0dXJlXyk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5nZXRNYXBUb29sdGlwID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy5nZXRJbml0aWFsU3RyaW5nVmFsdWUoUGVybWFsaW5rUGFyYW0uTUFQX1RPT0xUSVApO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuc2V0TWFwVG9vbHRpcCA9IGZ1bmN0aW9uICh0b29sdGlwVGV4dCwgb3B0X2NlbnRlcikge1xuICBpZiAoIXRoaXMubWFwXykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgfVxuXG4gIHZhciB0b29sdGlwUG9zaXRpb247XG5cbiAgaWYgKG9wdF9jZW50ZXIpIHtcbiAgICB0b29sdGlwUG9zaXRpb24gPSBvcHRfY2VudGVyO1xuICB9IGVsc2Uge1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLm1hcF8uZ2V0VmlldygpLmdldENlbnRlcigpO1xuXG4gICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjZW50ZXInKTtcbiAgICB9XG5cbiAgICB0b29sdGlwUG9zaXRpb24gPSBjZW50ZXI7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkodG9vbHRpcFBvc2l0aW9uKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgdG9vbHRpcFBvc2l0aW9uIHR5cGUnKTtcbiAgfVxuXG4gIHZhciBkaXYgPSAkKCc8ZGl2Lz4nLCB7XG4gICAgJ2NsYXNzJzogJ2dtZi1wZXJtYWxpbmstdG9vbHRpcCcsXG4gICAgJ3RleHQnOiB0b29sdGlwVGV4dFxuICB9KVswXTtcblxuICBpZiAodGhpcy5tYXBUb29sdGlwXyAhPT0gbnVsbCkge1xuICAgIHRoaXMubWFwXy5yZW1vdmVPdmVybGF5KHRoaXMubWFwVG9vbHRpcF8pO1xuICB9XG5cbiAgdGhpcy5tYXBUb29sdGlwXyA9IG5ldyBuZ2VvUG9wb3Zlcih7XG4gICAgZWxlbWVudDogZGl2LFxuICAgIHBvc2l0aW9uOiB0b29sdGlwUG9zaXRpb25cbiAgfSk7XG4gIHRoaXMubWFwXy5hZGRPdmVybGF5KHRoaXMubWFwVG9vbHRpcF8pO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBmID0gdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy5nZXRJbml0aWFsU3RyaW5nVmFsdWUoUGVybWFsaW5rUGFyYW0uRkVBVFVSRVMpO1xuXG4gIGlmIChmICE9PSB1bmRlZmluZWQgJiYgZiAhPT0gJycpIHtcbiAgICByZXR1cm4gdGhpcy5mZWF0dXJlSGFzaEZvcm1hdF8ucmVhZEZlYXR1cmVzKGYpO1xuICB9XG5cbiAgcmV0dXJuIFtdO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuc2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uIChkaW1lbnNpb25zKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIHZhciBrZXlzID0gdGhpcy5uZ2VvTG9jYXRpb25fLmdldFBhcmFtS2V5c1dpdGhQcmVmaXgoUGFyYW1QcmVmaXguRElNRU5TSU9OUyk7XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uoa2V5cyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgdmFyIGtleSA9IF9zdGVwMy52YWx1ZTtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLm5nZW9Mb2NhdGlvbl8uZ2V0UGFyYW0oa2V5KTtcblxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2YWx1ZScpO1xuICAgIH1cblxuICAgIGRpbWVuc2lvbnNba2V5LnNsaWNlKFBhcmFtUHJlZml4LkRJTUVOU0lPTlMubGVuZ3RoKV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHRoaXMucm9vdFNjb3BlXy4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGltZW5zaW9ucztcbiAgfSwgZnVuY3Rpb24gKGRpbWVuc2lvbnMpIHtcbiAgICB2YXIgcGFyYW1zID0ge307XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZGltZW5zaW9ucykge1xuICAgICAgcGFyYW1zW1BhcmFtUHJlZml4LkRJTUVOU0lPTlMgKyBrZXldID0gZGltZW5zaW9uc1trZXldO1xuICAgIH1cblxuICAgIF90aGlzMi5uZ2VvTG9jYXRpb25fLnVwZGF0ZVBhcmFtcyhwYXJhbXMpO1xuICB9KTtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgaWYgKG1hcCA9PT0gdGhpcy5tYXBfKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMubWFwXykge1xuICAgIHRoaXMudW5yZWdpc3Rlck1hcF8oKTtcbiAgICB0aGlzLm1hcF8gPSBudWxsO1xuICB9XG5cbiAgaWYgKG1hcCkge1xuICAgIHRoaXMubWFwXyA9IG1hcDtcblxuICAgIGlmICh0aGlzLmdtZk9iamVjdEVkaXRpbmdNYW5hZ2VyXykge1xuICAgICAgdGhpcy5nbWZPYmplY3RFZGl0aW5nTWFuYWdlcl8uZ2V0RmVhdHVyZSgpLnRoZW4oZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgX3RoaXMzLnJlZ2lzdGVyTWFwXyhtYXAsIGZlYXR1cmUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJNYXBfKG1hcCwgbnVsbCk7XG4gICAgfVxuICB9XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5yZWdpc3Rlck1hcF8gPSBmdW5jdGlvbiAobWFwLCBvZUZlYXR1cmUpIHtcbiAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICB2YXIgY2VudGVyO1xuICB2YXIgem9vbTtcbiAgdmFyIGdlb20gPSB0eXBlb2Ygb2VGZWF0dXJlICE9PSAndW5kZWZpbmVkJyAmJiBvZUZlYXR1cmUgIT09IG51bGwgPyBvZUZlYXR1cmUuZ2V0R2VvbWV0cnkoKSA6IHVuZGVmaW5lZDtcblxuICBpZiAoZ2VvbSkge1xuICAgIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcblxuICAgIGlmICghc2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNpemUnKTtcbiAgICB9XG5cbiAgICB2YXIgbWF4Wm9vbTtcblxuICAgIGlmIChnZW9tIGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQgfHwgZ2VvbSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpUG9pbnQpIHtcbiAgICAgIG1heFpvb20gPSB0aGlzLnBvaW50UmVjZW50ZXJab29tXztcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHNpemU6IHNpemVcbiAgICB9O1xuXG4gICAgaWYgKG1heFpvb20pIHtcbiAgICAgIG9wdGlvbnMubWF4Wm9vbSA9IG1heFpvb207XG4gICAgfVxuXG4gICAgdmlldy5maXQoZ2VvbS5nZXRFeHRlbnQoKSwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVuYWJsZWQzZCA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbEJvb2xlYW5WYWx1ZShQZXJtYWxpbmszZFBhcmFtLkVOQUJMRUQpO1xuXG4gICAgaWYgKCFlbmFibGVkM2QpIHtcbiAgICAgIGNlbnRlciA9IHRoaXMuZ2V0TWFwQ2VudGVyKCk7XG5cbiAgICAgIGlmIChjZW50ZXIpIHtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICAgIH1cblxuICAgICAgem9vbSA9IHRoaXMuZ2V0TWFwWm9vbSgpO1xuXG4gICAgICBpZiAoem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZpZXcuc2V0Wm9vbSh6b29tKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLm1hcFZpZXdQcm9wZXJ0eUNoYW5nZUV2ZW50S2V5XyA9IGxpc3Rlbih2aWV3LCAncHJvcGVydHljaGFuZ2UnLCB0aGlzLm5nZW9EZWJvdW5jZV8oZnVuY3Rpb24gKCkge1xuICAgIHZhciBjZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuXG4gICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjZW50ZXInKTtcbiAgICB9XG5cbiAgICB2YXIgem9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICBvYmplY3RbUGVybWFsaW5rUGFyYW0uTUFQX1hdID0gXCJcIiArIE1hdGgucm91bmQoY2VudGVyWzBdKTtcbiAgICBvYmplY3RbUGVybWFsaW5rUGFyYW0uTUFQX1ldID0gXCJcIiArIE1hdGgucm91bmQoY2VudGVyWzFdKTtcbiAgICBvYmplY3RbUGVybWFsaW5rUGFyYW0uTUFQX1pdID0gXCJcIiArIHpvb207XG5cbiAgICBfdGhpczQubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUob2JqZWN0KTtcbiAgfSwgMzAwLCB0cnVlKSwgdGhpcyk7XG5cbiAgaWYgKHRoaXMuZ2V0TWFwQ3Jvc3NoYWlyKCkgJiYgdGhpcy5mZWF0dXJlT3ZlcmxheV8pIHtcbiAgICB0aGlzLnNldE1hcENyb3NzaGFpcihjZW50ZXIpO1xuICB9XG5cbiAgdmFyIHRvb2x0aXBUZXh0ID0gdGhpcy5nZXRNYXBUb29sdGlwKCk7XG5cbiAgaWYgKHRvb2x0aXBUZXh0KSB7XG4gICAgdGhpcy5zZXRNYXBUb29sdGlwKHRvb2x0aXBUZXh0LCBjZW50ZXIpO1xuICB9XG5cbiAgdmFyIHdmc1Blcm1hbGlua0RhdGEgPSB0aGlzLmdldFdmc1Blcm1hbGlua0RhdGFfKCk7XG5cbiAgaWYgKHdmc1Blcm1hbGlua0RhdGEgIT09IG51bGwgJiYgdGhpcy5uZ2VvV2ZzUGVybWFsaW5rXykge1xuICAgIHRoaXMubmdlb1dmc1Blcm1hbGlua18uaXNzdWUod2ZzUGVybWFsaW5rRGF0YSwgbWFwLCB6b29tKTtcbiAgfVxufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUudW5yZWdpc3Rlck1hcF8gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5tYXBWaWV3UHJvcGVydHlDaGFuZ2VFdmVudEtleV8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwVmlld1Byb3BlcnR5Q2hhbmdlRXZlbnRLZXknKTtcbiAgfVxuXG4gIHVubGlzdGVuQnlLZXkodGhpcy5tYXBWaWV3UHJvcGVydHlDaGFuZ2VFdmVudEtleV8pO1xuICB0aGlzLm1hcFZpZXdQcm9wZXJ0eUNoYW5nZUV2ZW50S2V5XyA9IG51bGw7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5nZXRCYWNrZ3JvdW5kTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXJzKSB7XG4gIHZhciBsYXllck5hbWUgPSB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLmdldEluaXRpYWxTdHJpbmdWYWx1ZShQZXJtYWxpbmtQYXJhbS5CR19MQVlFUik7XG5cbiAgaWYgKGxheWVyTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobGF5ZXJzKSwgX3N0ZXA0OyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQoKSkuZG9uZTspIHtcbiAgICAgIHZhciBsYXllciA9IF9zdGVwNC52YWx1ZTtcblxuICAgICAgaWYgKGxheWVyLmdldCgnbGFiZWwnKSA9PT0gbGF5ZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiBsYXllcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmdldEJhY2tncm91bmRMYXllck9wYWNpdHkgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBvcGFjaXR5XyA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbE51bWJlclZhbHVlKFBlcm1hbGlua1BhcmFtLkJHX0xBWUVSX09QQUNJVFkpO1xuICByZXR1cm4gb3BhY2l0eV8gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBvcGFjaXR5XyAvIDEwMDtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZUJhY2tncm91bmRMYXllck1hbmFnZXJDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICBpZiAoIXRoaXMubWFwXyB8fCAhdGhpcy5uZ2VvQmFja2dyb3VuZExheWVyTWdyXykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBsYXllciA9IHRoaXMubmdlb0JhY2tncm91bmRMYXllck1ncl8uZ2V0KHRoaXMubWFwXyk7XG5cbiAgaWYgKCFsYXllcikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBsYXllcicpO1xuICB9XG5cbiAgdmFyIGxheWVyTmFtZSA9IGxheWVyLmdldCgnbGFiZWwnKTtcblxuICBpZiAodHlwZW9mIGxheWVyTmFtZSAhPSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgbGF5ZXJOYW1lIHR5cGUnKTtcbiAgfVxuXG4gIHZhciBvYmplY3QgPSB7fTtcbiAgb2JqZWN0W1Blcm1hbGlua1BhcmFtLkJHX0xBWUVSXSA9IGxheWVyTmFtZTtcbiAgdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy51cGRhdGVTdGF0ZShvYmplY3QpO1xuICB2YXIgYmFja2dyb3VuZExheWVyID0gdGhpcy5uZ2VvQmFja2dyb3VuZExheWVyTWdyXy5nZXRPcGFjaXR5QmdMYXllcih0aGlzLm1hcF8pO1xuXG4gIGlmIChiYWNrZ3JvdW5kTGF5ZXIpIHtcbiAgICB2YXIgb3BhY2l0eSA9IHRoaXMuZ2V0QmFja2dyb3VuZExheWVyT3BhY2l0eSgpO1xuXG4gICAgaWYgKG9wYWNpdHkgIT09IG51bGwpIHtcbiAgICAgIGJhY2tncm91bmRMYXllci5zZXRPcGFjaXR5KG9wYWNpdHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgX29wYWNpdHkgPSBiYWNrZ3JvdW5kTGF5ZXIuZ2V0T3BhY2l0eSgpO1xuXG4gICAgICB2YXIgX29iamVjdCA9IHt9O1xuICAgICAgX29iamVjdFtQZXJtYWxpbmtQYXJhbS5CR19MQVlFUl9PUEFDSVRZXSA9IFwiXCIgKyBfb3BhY2l0eSAqIDEwMDtcbiAgICAgIHRoaXMubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUoX29iamVjdCk7XG4gICAgfVxuXG4gICAgbGlzdGVuKGJhY2tncm91bmRMYXllciwgJ2NoYW5nZTpvcGFjaXR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG9wYWNpdHkgPSBiYWNrZ3JvdW5kTGF5ZXIuZ2V0T3BhY2l0eSgpO1xuICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgb2JqZWN0W1Blcm1hbGlua1BhcmFtLkJHX0xBWUVSX09QQUNJVFldID0gXCJcIiArIG9wYWNpdHkgKiAxMDA7XG5cbiAgICAgIF90aGlzNS5uZ2VvU3RhdGVNYW5hZ2VyXy51cGRhdGVTdGF0ZShvYmplY3QpO1xuICAgIH0pO1xuICB9XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5yZWZyZXNoRmlyc3RMZXZlbEdyb3VwcyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLmdtZlRyZWVNYW5hZ2VyXykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghdGhpcy5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsJyk7XG4gIH1cblxuICB2YXIgZ3JvdXBOb2RlID0gdGhpcy5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwubm9kZTtcbiAgdmFyIGdyb3VwTm9kZXMgPSBncm91cE5vZGUuY2hpbGRyZW47XG4gIHZhciBvcmRlcmVkTmFtZXMgPSBncm91cE5vZGVzID8gZ3JvdXBOb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5uYW1lO1xuICB9KSA6IFtdO1xuICB2YXIgb2JqZWN0ID0ge307XG4gIG9iamVjdFtQZXJtYWxpbmtQYXJhbS5UUkVFX0dST1VQU10gPSBvcmRlcmVkTmFtZXMuam9pbignLCcpO1xuICB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLnVwZGF0ZVN0YXRlKG9iamVjdCk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5yZWZyZXNoTGF5ZXJUaW1lID0gZnVuY3Rpb24gKHRyZWVDdHJsLCB0aW1lKSB7XG4gIHZhciBuZXdTdGF0ZSA9IHt9O1xuICB2YXIgc3RhdGVOYW1lID0gXCJcIiArIFBhcmFtUHJlZml4LlRSRUVfVElNRSArIHRyZWVDdHJsLm5vZGUubmFtZTtcbiAgdmFyIHRpbWVub2RlID0gdHJlZUN0cmwubm9kZTtcbiAgdmFyIHRpbWVQYXJhbSA9IHRoaXMubmdlb1dNU1RpbWVfLmZvcm1hdFdNU1RpbWVQYXJhbSh0aW1lbm9kZS50aW1lLCB0aW1lKTtcbiAgbmV3U3RhdGVbc3RhdGVOYW1lXSA9IHRpbWVQYXJhbTtcbiAgdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy51cGRhdGVTdGF0ZShuZXdTdGF0ZSk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS50aGVtZUluVXJsXyA9IGZ1bmN0aW9uIChwYXRoRWxlbWVudHMpIHtcbiAgdmFyIGluZGV4T2ZUaGVtZSA9IHBhdGhFbGVtZW50cy5pbmRleE9mKCd0aGVtZScpO1xuICByZXR1cm4gaW5kZXhPZlRoZW1lICE9IC0xICYmIGluZGV4T2ZUaGVtZSA9PSBwYXRoRWxlbWVudHMubGVuZ3RoIC0gMjtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLnNldFRoZW1lSW5VcmxfID0gZnVuY3Rpb24gKHRoZW1lTmFtZSkge1xuICB2YXIgcGF0aCA9IHRoaXMubmdlb0xvY2F0aW9uXy5nZXRQYXRoKCk7XG5cbiAgaWYgKCFwYXRoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHBhdGgnKTtcbiAgfVxuXG4gIGlmICh0aGVtZU5hbWUpIHtcbiAgICB2YXIgcGF0aEVsZW1lbnRzID0gcGF0aC5zcGxpdCgnLycpO1xuXG4gICAgaWYgKHBhdGhFbGVtZW50cy5sZW5ndGggPD0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBwYXRoRWxlbWVudHMnKTtcbiAgICB9XG5cbiAgICBpZiAocGF0aEVsZW1lbnRzW3BhdGhFbGVtZW50cy5sZW5ndGggLSAxXSA9PT0gJycpIHtcbiAgICAgIHBhdGhFbGVtZW50cy5zcGxpY2UocGF0aEVsZW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRoZW1lSW5VcmxfKHBhdGhFbGVtZW50cykpIHtcbiAgICAgIHBhdGhFbGVtZW50c1twYXRoRWxlbWVudHMubGVuZ3RoIC0gMV0gPSB0aGVtZU5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGhFbGVtZW50cy5wdXNoKCd0aGVtZScsIHRoZW1lTmFtZSk7XG4gICAgfVxuXG4gICAgdGhpcy5uZ2VvTG9jYXRpb25fLnNldFBhdGgocGF0aEVsZW1lbnRzLmpvaW4oJy8nKSk7XG4gIH1cbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmRlZmF1bHRUaGVtZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwYXRoID0gdGhpcy5uZ2VvTG9jYXRpb25fLmdldFBhdGgoKTtcblxuICBpZiAoIXBhdGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcGF0aCcpO1xuICB9XG5cbiAgdmFyIHBhdGhFbGVtZW50cyA9IHBhdGguc3BsaXQoJy8nKTtcblxuICBpZiAodGhpcy50aGVtZUluVXJsXyhwYXRoRWxlbWVudHMpKSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSShwYXRoRWxlbWVudHNbcGF0aEVsZW1lbnRzLmxlbmd0aCAtIDFdKTtcbiAgfVxuXG4gIHZhciB0biA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbFN0cmluZ1ZhbHVlKCd0aGVtZScpO1xuXG4gIGlmICh0bikge1xuICAgIHJldHVybiB0bjtcbiAgfVxuXG4gIHZhciBkZWZhdWx0VGhlbWUgPSB0aGlzLmRlZmF1bHRUaGVtZU5hbWVGcm9tRnVuY3Rpb25hbGl0aWVzKCk7XG5cbiAgaWYgKGRlZmF1bHRUaGVtZSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBkZWZhdWx0VGhlbWU7XG4gIH1cblxuICBpZiAodGhpcy5kZWZhdWx0VGhlbWVfKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdFRoZW1lXztcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuZGVmYXVsdFRoZW1lTmFtZUZyb21GdW5jdGlvbmFsaXRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5nbWZVc2VyXykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGZ1bmN0aW9uYWxpdGllcyA9IHRoaXMuZ21mVXNlcl8uZnVuY3Rpb25hbGl0aWVzO1xuXG4gIGlmIChmdW5jdGlvbmFsaXRpZXMgJiYgJ2RlZmF1bHRfdGhlbWUnIGluIGZ1bmN0aW9uYWxpdGllcykge1xuICAgIHZhciBkZWZhdWx0VGhlbWUgPSBmdW5jdGlvbmFsaXRpZXMuZGVmYXVsdF90aGVtZTtcblxuICAgIGlmIChkZWZhdWx0VGhlbWUubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRUaGVtZVswXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmluaXRMYXllcnNfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICB2YXIgaW5pdGlhbFVyaSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB2YXIgYXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGZhbHNlO1xuXG4gIGlmICghdGhpcy5nbWZUaGVtZXNfKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5nbWZUaGVtZXNfLmdldFRoZW1lc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKHRoZW1lcykge1xuICAgIHZhciB0aGVtZU5hbWUgPSBfdGhpczYuZGVmYXVsdFRoZW1lTmFtZSgpO1xuXG4gICAgaWYgKF90aGlzNi5nbWZUaGVtZU1hbmFnZXJfKSB7XG4gICAgICBfdGhpczYuZ21mVGhlbWVNYW5hZ2VyXy5zZXRUaGVtZU5hbWUoX3RoaXM2LmdtZlRoZW1lTWFuYWdlcl8ubW9kZUZsdXNoID8gdGhlbWVOYW1lIDogJycpO1xuICAgIH1cblxuICAgIHZhciBmaXJzdExldmVsR3JvdXBzID0gW107XG4gICAgdmFyIHRoZW1lO1xuXG4gICAgdmFyIGdyb3Vwc05hbWVzID0gX3RoaXM2Lm5nZW9Mb2NhdGlvbl8uZ2V0UGFyYW0oUGVybWFsaW5rUGFyYW0uVFJFRV9HUk9VUFMpO1xuXG4gICAgaWYgKGdyb3Vwc05hbWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoZW1lID0gZmluZFRoZW1lQnlOYW1lKHRoZW1lcywgdGhlbWVOYW1lKTtcblxuICAgICAgaWYgKHRoZW1lKSB7XG4gICAgICAgIGZpcnN0TGV2ZWxHcm91cHMgPSB0aGVtZS5jaGlsZHJlbjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZ3JvdXBzTmFtZXMuc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cE5hbWUpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gZmluZEdyb3VwQnlOYW1lKHRoZW1lcywgZ3JvdXBOYW1lKTtcblxuICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICBmaXJzdExldmVsR3JvdXBzLnB1c2goZ3JvdXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXM2LmdtZlRyZWVNYW5hZ2VyXykge1xuICAgICAgX3RoaXM2LmdtZlRyZWVNYW5hZ2VyXy5zZXRGaXJzdExldmVsR3JvdXBzKGZpcnN0TGV2ZWxHcm91cHMpO1xuICAgIH1cblxuICAgIF90aGlzNi4kdGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpczYuZ21mVHJlZU1hbmFnZXJfIHx8ICFfdGhpczYuZ21mVHJlZU1hbmFnZXJfLnJvb3RDdHJsKSB7XG4gICAgICAgIGlmIChhdXRoZW50aWNhdGlvblJlcXVpcmVkICYmIF90aGlzNi5nbWZVc2VyXyAmJiBfdGhpczYuZ21mVXNlcl8ucm9sZXMgPT09IG51bGwpIHtcbiAgICAgICAgICBfdGhpczYucm9vdFNjb3BlXy4kYnJvYWRjYXN0KCdhdXRoZW50aWNhdGlvbnJlcXVpcmVkJywge1xuICAgICAgICAgICAgdXJsOiBpbml0aWFsVXJpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXllckJlaW5nU3dpcGVWYWx1ZSA9IF90aGlzNi5uZ2VvU3RhdGVNYW5hZ2VyXy5nZXRJbml0aWFsTnVtYmVyVmFsdWUoUGVybWFsaW5rUGFyYW0uTUFQX1NXSVBFKTtcblxuICAgICAgdmFyIG1hcFN3aXBlVmFsdWUgPSBfdGhpczYubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbE51bWJlclZhbHVlKFBlcm1hbGlua1BhcmFtLk1BUF9TV0lQRV9WQUxVRSk7XG5cbiAgICAgIHZhciB2aXNpdG9yID0gZnVuY3Rpb24gdmlzaXRvcih0cmVlQ3RybCkge1xuICAgICAgICBpZiAodHJlZUN0cmwuaXNSb290KSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBncm91cE5vZGUgPSB0cmVlQ3RybC5ub2RlO1xuICAgICAgICB2YXIgcGFyZW50R3JvdXBOb2RlID0gdHJlZUN0cmwucGFyZW50Lm5vZGU7XG5cbiAgICAgICAgdmFyIG9wYWNpdHkgPSBfdGhpczYubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbE51bWJlclZhbHVlKChwYXJlbnRHcm91cE5vZGUubWl4ZWQgPyBQYXJhbVByZWZpeC5UUkVFX09QQUNJVFkgOiBQYXJhbVByZWZpeC5UUkVFX0dST1VQX09QQUNJVFkpICsgdHJlZUN0cmwubm9kZS5uYW1lKTtcblxuICAgICAgICBpZiAodHJlZUN0cmwubGF5ZXIpIHtcbiAgICAgICAgICBpZiAob3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0cmVlQ3RybC5sYXllci5zZXRPcGFjaXR5KG9wYWNpdHkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsYXllckJlaW5nU3dpcGVWYWx1ZSAhPT0gbnVsbCAmJiBsYXllckJlaW5nU3dpcGVWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIHRyZWVDdHJsLmxheWVyLmdldCgnZGF0YVNvdXJjZUlkJykgPT09IGxheWVyQmVpbmdTd2lwZVZhbHVlKSB7XG4gICAgICAgICAgICBpZiAobWFwU3dpcGVWYWx1ZSAhPT0gbnVsbCAmJiBtYXBTd2lwZVZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgX3RoaXM2LmdtZkxheWVyQmVpbmdTd2lwZV8uc3dpcGVWYWx1ZSA9IG1hcFN3aXBlVmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzNi5nbWZMYXllckJlaW5nU3dpcGVfLmxheWVyID0gdHJlZUN0cmwubGF5ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRpbWVub2RlID0gdHJlZUN0cmwubm9kZTtcblxuICAgICAgICBpZiAodGltZW5vZGUgJiYgdGltZW5vZGUudGltZSkge1xuICAgICAgICAgIF90aGlzNi5zZXROb2RlVGltZV8odHJlZUN0cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyZWVDdHJsLnBhcmVudC5ub2RlICYmIHBhcmVudEdyb3VwTm9kZS5taXhlZCAmJiBncm91cE5vZGUuY2hpbGRyZW4gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIGVuYWJsZSA9IF90aGlzNi5uZ2VvU3RhdGVNYW5hZ2VyXy5nZXRJbml0aWFsQm9vbGVhblZhbHVlKFBhcmFtUHJlZml4LlRSRUVfRU5BQkxFICsgdHJlZUN0cmwubm9kZS5uYW1lKTtcblxuICAgICAgICAgIGlmIChlbmFibGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdHJlZUN0cmwuc2V0U3RhdGUoZW5hYmxlID8gJ29uJyA6ICdvZmYnLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFncm91cE5vZGUubWl4ZWQgJiYgdHJlZUN0cmwuZGVwdGggPT0gMSkge1xuICAgICAgICAgIHZhciBncm91cExheWVycyA9IF90aGlzNi5uZ2VvU3RhdGVNYW5hZ2VyXy5nZXRJbml0aWFsU3RyaW5nVmFsdWUoUGFyYW1QcmVmaXguVFJFRV9HUk9VUF9MQVlFUlMgKyB0cmVlQ3RybC5ub2RlLm5hbWUpO1xuXG4gICAgICAgICAgaWYgKGdyb3VwTGF5ZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBncm91cExheWVyc0FycmF5ID0gZ3JvdXBMYXllcnMgPT0gJycgPyBbXSA6IGdyb3VwTGF5ZXJzLnNwbGl0KCcsJyk7XG5cbiAgICAgICAgICAgIHZhciBfdmlzaXRvciA9IGZ1bmN0aW9uIF92aXNpdG9yKHRyZWVDdHJsKSB7XG4gICAgICAgICAgICAgIHZhciBncm91cE5vZGUgPSB0cmVlQ3RybC5ub2RlO1xuXG4gICAgICAgICAgICAgIGlmIChncm91cE5vZGUuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBfZW5hYmxlID0gZ3JvdXBMYXllcnNBcnJheS5pbmNsdWRlcyh0cmVlQ3RybC5ub2RlLm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9lbmFibGUpIHtcbiAgICAgICAgICAgICAgICAgIGdyb3VwTGF5ZXJzQXJyYXkuc3BsaWNlKGdyb3VwTGF5ZXJzQXJyYXkuaW5kZXhPZih0cmVlQ3RybC5ub2RlLm5hbWUpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cmVlQ3RybC5zZXRTdGF0ZShfZW5hYmxlID8gJ29uJyA6ICdvZmYnLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdHJlZUN0cmwudHJhdmVyc2VEZXB0aEZpcnN0KF92aXNpdG9yKTtcblxuICAgICAgICAgICAgaWYgKGdyb3VwTGF5ZXJzQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzNi5nbWZUcmVlTWFuYWdlcl8ucm9vdEN0cmwudHJhdmVyc2VEZXB0aEZpcnN0KHZpc2l0b3IpO1xuXG4gICAgICB2YXIgZmlyc3RQYXJlbnRzID0gX3RoaXM2LmdtZlRyZWVNYW5hZ2VyXy5yb290Q3RybC5jaGlsZHJlbjtcbiAgICAgIGZpcnN0UGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChmaXJzdFBhcmVudCkge1xuICAgICAgICBmaXJzdFBhcmVudC50cmF2ZXJzZURlcHRoRmlyc3QoZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gICAgICAgICAgaWYgKHRyZWVDdHJsLmdldFN0YXRlKCkgIT09ICdpbmRldGVybWluYXRlJykge1xuICAgICAgICAgICAgX3RoaXM2LnJvb3RTY29wZV8uJGJyb2FkY2FzdCgnbmdlby1sYXllcnRyZWUtc3RhdGUnLCB0cmVlQ3RybCwgZmlyc3RQYXJlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uLlNUT1A7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYXV0aGVudGljYXRpb25SZXF1aXJlZCAmJiBfdGhpczYuZ21mVXNlcl8gJiYgX3RoaXM2LmdtZlVzZXJfLnJvbGVzID09PSBudWxsKSB7XG4gICAgICAgIF90aGlzNi5yb290U2NvcGVfLiRicm9hZGNhc3QoJ2F1dGhlbnRpY2F0aW9ucmVxdWlyZWQnLCB7XG4gICAgICAgICAgdXJsOiBpbml0aWFsVXJpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZU5nZW9GZWF0dXJlc0FkZF8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGZlYXR1cmUgPSBldmVudC5lbGVtZW50O1xuXG4gICAgaWYgKCEoZmVhdHVyZSBpbnN0YW5jZW9mIG9sRmVhdHVyZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZmVhdHVyZSB0eXBlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGROZ2VvRmVhdHVyZV8oZmVhdHVyZSk7XG4gIH1cbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZU5nZW9GZWF0dXJlc1JlbW92ZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGZlYXR1cmUgPSBldmVudC5lbGVtZW50O1xuXG4gICAgaWYgKCEoZmVhdHVyZSBpbnN0YW5jZW9mIG9sRmVhdHVyZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZmVhdHVyZSB0eXBlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVOZ2VvRmVhdHVyZV8oZmVhdHVyZSk7XG4gIH1cbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmFkZE5nZW9GZWF0dXJlXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQoZmVhdHVyZSk7XG4gIHRoaXMubmdlb0V2ZW50SGVscGVyXy5hZGRMaXN0ZW5lcktleSh1aWQsIGxpc3RlbihmZWF0dXJlLCAnY2hhbmdlJywgdGhpcy5uZ2VvRGVib3VuY2VfKHRoaXMuaGFuZGxlTmdlb0ZlYXR1cmVzQ2hhbmdlXywgMjUwLCB0cnVlKSwgdGhpcykpO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUucmVtb3ZlTmdlb0ZlYXR1cmVfID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKTtcbiAgdGhpcy5uZ2VvRXZlbnRIZWxwZXJfLmNsZWFyTGlzdGVuZXJLZXkodWlkKTtcbiAgdGhpcy5oYW5kbGVOZ2VvRmVhdHVyZXNDaGFuZ2VfKCk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5oYW5kbGVOZ2VvRmVhdHVyZXNDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMubmdlb0ZlYXR1cmVzXykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBmZWF0dXJlcyA9IHRoaXMubmdlb0ZlYXR1cmVzXy5nZXRBcnJheSgpO1xuICB2YXIgZGF0YSA9IHRoaXMuZmVhdHVyZUhhc2hGb3JtYXRfLndyaXRlRmVhdHVyZXMoZmVhdHVyZXMpO1xuICB2YXIgb2JqZWN0ID0ge307XG4gIG9iamVjdFtQZXJtYWxpbmtQYXJhbS5GRUFUVVJFU10gPSBkYXRhO1xuICB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLnVwZGF0ZVN0YXRlKG9iamVjdCk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5nZXRXZnNQZXJtYWxpbmtEYXRhXyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHdmc0xheWVyID0gdGhpcy5uZ2VvTG9jYXRpb25fLmdldFBhcmFtKFBlcm1hbGlua1BhcmFtLldGU19MQVlFUik7XG5cbiAgaWYgKCF3ZnNMYXllcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIG51bUdyb3VwcyA9IHRoaXMubmdlb0xvY2F0aW9uXy5nZXRQYXJhbUFzSW50KFBlcm1hbGlua1BhcmFtLldGU19OR1JPVVBTKTtcbiAgdmFyIHBhcmFtS2V5cyA9IHRoaXMubmdlb0xvY2F0aW9uXy5nZXRQYXJhbUtleXNXaXRoUHJlZml4KFBhcmFtUHJlZml4LldGUyk7XG4gIHZhciBmaWx0ZXJHcm91cHMgPSBbXTtcbiAgdmFyIGZpbHRlckdyb3VwO1xuXG4gIGlmIChudW1Hcm91cHMgPT09IHVuZGVmaW5lZCkge1xuICAgIGZpbHRlckdyb3VwID0gdGhpcy5jcmVhdGVGaWx0ZXJHcm91cF8oUGFyYW1QcmVmaXguV0ZTLCBwYXJhbUtleXMpO1xuXG4gICAgaWYgKGZpbHRlckdyb3VwICE9PSBudWxsKSB7XG4gICAgICBmaWx0ZXJHcm91cHMucHVzaChmaWx0ZXJHcm91cCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtR3JvdXBzOyBpKyspIHtcbiAgICAgIGZpbHRlckdyb3VwID0gdGhpcy5jcmVhdGVGaWx0ZXJHcm91cF8oXCJcIiArIFBhcmFtUHJlZml4LldGUyArIGkgKyBcIl9cIiwgcGFyYW1LZXlzKTtcblxuICAgICAgaWYgKGZpbHRlckdyb3VwICE9PSBudWxsKSB7XG4gICAgICAgIGZpbHRlckdyb3Vwcy5wdXNoKGZpbHRlckdyb3VwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZmlsdGVyR3JvdXBzLmxlbmd0aCA9PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgc2hvd0ZlYXR1cmVzUGFyYW0gPSB0aGlzLm5nZW9Mb2NhdGlvbl8uZ2V0UGFyYW0oUGVybWFsaW5rUGFyYW0uV0ZTX1NIT1dfRkVBVFVSRVMpO1xuICB2YXIgc2hvd0ZlYXR1cmVzID0gIShzaG93RmVhdHVyZXNQYXJhbSA9PT0gJzAnIHx8IHNob3dGZWF0dXJlc1BhcmFtID09PSAnZmFsc2UnKTtcbiAgcmV0dXJuIHtcbiAgICB3ZnNUeXBlOiB3ZnNMYXllcixcbiAgICBzaG93RmVhdHVyZXM6IHNob3dGZWF0dXJlcyxcbiAgICBmaWx0ZXJHcm91cHM6IGZpbHRlckdyb3Vwc1xuICB9O1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuY3JlYXRlRmlsdGVyR3JvdXBfID0gZnVuY3Rpb24gKHByZWZpeCwgcGFyYW1LZXlzKSB7XG4gIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gIHZhciBmaWx0ZXJzID0gW107XG4gIHBhcmFtS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbUtleSkge1xuICAgIGlmIChwYXJhbUtleSA9PSBQZXJtYWxpbmtQYXJhbS5XRlNfTEFZRVIgfHwgcGFyYW1LZXkgPT0gUGVybWFsaW5rUGFyYW0uV0ZTX1NIT1dfRkVBVFVSRVMgfHwgcGFyYW1LZXkgPT0gUGVybWFsaW5rUGFyYW0uV0ZTX05HUk9VUFMgfHwgIXBhcmFtS2V5LnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IF90aGlzNy5uZ2VvTG9jYXRpb25fLmdldFBhcmFtKHBhcmFtS2V5KTtcblxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY29uZGl0aW9uID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICB2YXIgZmlsdGVyID0ge1xuICAgICAgcHJvcGVydHk6IHBhcmFtS2V5LnJlcGxhY2UocHJlZml4LCAnJyksXG4gICAgICBjb25kaXRpb246IGNvbmRpdGlvblxuICAgIH07XG4gICAgZmlsdGVycy5wdXNoKGZpbHRlcik7XG4gIH0pO1xuICByZXR1cm4gZmlsdGVycy5sZW5ndGggPiAwID8ge1xuICAgIGZpbHRlcnM6IGZpbHRlcnNcbiAgfSA6IG51bGw7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5pbml0RXh0ZXJuYWxEYXRhU291cmNlc18gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpczggPSB0aGlzO1xuXG4gIGlmICghdGhpcy5uZ2VvUXVlcmVudF8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgbmdlb1F1ZXJlbnQnKTtcbiAgfVxuXG4gIGlmICghdGhpcy5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcl8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ21mRXh0ZXJuYWxEYXRhU291cmNlc01hbmFnZXInKTtcbiAgfVxuXG4gIHZhciBuZ2VvUXVlcmVudCA9IHRoaXMubmdlb1F1ZXJlbnRfO1xuICB2YXIgZ21mRXh0RFNNYW5hZ2VyID0gdGhpcy5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcl87XG4gIHZhciBwcm9taXNlcyA9IFtdO1xuICB2YXIgbGF5ZXJOYW1lc1N0cmluZyA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbFN0cmluZ1ZhbHVlKFBlcm1hbGlua1BhcmFtLkVYVEVSTkFMX0RBVEFTT1VSQ0VTX05BTUVTKTtcbiAgdmFyIHVybHNTdHJpbmcgPSB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfLmdldEluaXRpYWxTdHJpbmdWYWx1ZShQZXJtYWxpbmtQYXJhbS5FWFRFUk5BTF9EQVRBU09VUkNFU19VUkxTKTtcblxuICBpZiAobGF5ZXJOYW1lc1N0cmluZyAmJiB1cmxzU3RyaW5nKSB7XG4gICAgdmFyIGxheWVyTmFtZXMgPSBsYXllck5hbWVzU3RyaW5nLnNwbGl0KEV4dERTU2VwYXJhdG9yLkxJU1QpO1xuICAgIHZhciB1cmxzID0gdXJsc1N0cmluZy5zcGxpdChFeHREU1NlcGFyYXRvci5MSVNUKTtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGksIGlpKSB7XG4gICAgICB2YXIgZ3JvdXBMYXllck5hbWVzU3RyaW5nID0gbGF5ZXJOYW1lc1tpXTtcblxuICAgICAgaWYgKCFncm91cExheWVyTmFtZXNTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIFwiYnJlYWtcIjtcbiAgICAgIH1cblxuICAgICAgdmFyIGdyb3VwTGF5ZXJOYW1lcyA9IGdyb3VwTGF5ZXJOYW1lc1N0cmluZy5zcGxpdChFeHREU1NlcGFyYXRvci5OQU1FUyk7XG4gICAgICB2YXIgdXJsID0gdXJsc1tpXTtcbiAgICAgIHZhciBzZXJ2aWNlVHlwZSA9IGd1ZXNzU2VydmljZVR5cGVCeVVybCh1cmwpO1xuXG4gICAgICB2YXIgZ2V0Q2FwYWJpbGl0aWVzRGVmZXIgPSBfdGhpczgucV8uZGVmZXIoKTtcblxuICAgICAgcHJvbWlzZXMucHVzaChnZXRDYXBhYmlsaXRpZXNEZWZlci5wcm9taXNlKTtcblxuICAgICAgaWYgKHNlcnZpY2VUeXBlID09PSBUeXBlLldNUykge1xuICAgICAgICBuZ2VvUXVlcmVudC53bXNHZXRDYXBhYmlsaXRpZXModXJsKS50aGVuKGZ1bmN0aW9uIChjYXBhYmlsaXRpZXMpIHtcbiAgICAgICAgICBnZXRDYXBhYmlsaXRpZXNEZWZlci5yZXNvbHZlKHtcbiAgICAgICAgICAgIGNhcGFiaWxpdGllczogY2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgZ3JvdXBMYXllck5hbWVzOiBncm91cExheWVyTmFtZXMsXG4gICAgICAgICAgICBzZXJ2aWNlVHlwZTogc2VydmljZVR5cGUsXG4gICAgICAgICAgICB1cmw6IHVybFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZ2V0Q2FwYWJpbGl0aWVzRGVmZXIucmVqZWN0KHtcbiAgICAgICAgICAgIGdyb3VwTGF5ZXJOYW1lczogZ3JvdXBMYXllck5hbWVzLFxuICAgICAgICAgICAgc2VydmljZVR5cGU6IHNlcnZpY2VUeXBlLFxuICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHNlcnZpY2VUeXBlID09PSBUeXBlLldNVFMpIHtcbiAgICAgICAgbmdlb1F1ZXJlbnQud210c0dldENhcGFiaWxpdGllcyh1cmwpLnRoZW4oZnVuY3Rpb24gKGNhcGFiaWxpdGllcykge1xuICAgICAgICAgIGdldENhcGFiaWxpdGllc0RlZmVyLnJlc29sdmUoe1xuICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiBjYXBhYmlsaXRpZXMsXG4gICAgICAgICAgICBncm91cExheWVyTmFtZXM6IGdyb3VwTGF5ZXJOYW1lcyxcbiAgICAgICAgICAgIHNlcnZpY2VUeXBlOiBzZXJ2aWNlVHlwZSxcbiAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBnZXRDYXBhYmlsaXRpZXNEZWZlci5yZWplY3Qoe1xuICAgICAgICAgICAgZ3JvdXBMYXllck5hbWVzOiBncm91cExheWVyTmFtZXMsXG4gICAgICAgICAgICBzZXJ2aWNlVHlwZTogc2VydmljZVR5cGUsXG4gICAgICAgICAgICB1cmw6IHVybFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdldENhcGFiaWxpdGllc0RlZmVyLnJlamVjdCh7XG4gICAgICAgICAgZ3JvdXBMYXllck5hbWVzOiBncm91cExheWVyTmFtZXMsXG4gICAgICAgICAgc2VydmljZVR5cGU6IHNlcnZpY2VUeXBlLFxuICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB1cmxzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHZhciBfcmV0ID0gX2xvb3AoaSwgaWkpO1xuXG4gICAgICBpZiAoX3JldCA9PT0gXCJicmVha1wiKSBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcy5xXy5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlcykge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHJlc3BvbnNlcyksIF9zdGVwNTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSBfc3RlcDUudmFsdWU7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zZXJ2aWNlVHlwZSA9PT0gVHlwZS5XTVMpIHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UocmVzcG9uc2UuZ3JvdXBMYXllck5hbWVzKSwgX3N0ZXA2OyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgbGF5ZXJOYW1lID0gX3N0ZXA2LnZhbHVlO1xuICAgICAgICAgIHZhciBsYXllckNhcCA9IG5nZW9RdWVyZW50Lndtc0ZpbmRMYXllckNhcGFiaWxpdHkocmVzcG9uc2UuY2FwYWJpbGl0aWVzLkNhcGFiaWxpdHkuTGF5ZXIuTGF5ZXIsIGxheWVyTmFtZSk7XG5cbiAgICAgICAgICBpZiAobGF5ZXJDYXApIHtcbiAgICAgICAgICAgIGdtZkV4dERTTWFuYWdlci5jcmVhdGVBbmRBZGREYXRhU291cmNlRnJvbVdNU0NhcGFiaWxpdHkobGF5ZXJDYXAsIHJlc3BvbnNlLmNhcGFiaWxpdGllcywgcmVzcG9uc2UudXJsKTtcbiAgICAgICAgICB9IGVsc2Uge31cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zZXJ2aWNlVHlwZSA9PT0gVHlwZS5XTVRTKSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHJlc3BvbnNlLmdyb3VwTGF5ZXJOYW1lcyksIF9zdGVwNzsgIShfc3RlcDcgPSBfaXRlcmF0b3I3KCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIF9sYXllck5hbWUgPSBfc3RlcDcudmFsdWU7XG5cbiAgICAgICAgICB2YXIgX2xheWVyQ2FwID0gbmdlb1F1ZXJlbnQud210c0ZpbmRMYXllckNhcGFiaWxpdHkocmVzcG9uc2UuY2FwYWJpbGl0aWVzLkNvbnRlbnRzLkxheWVyLCBfbGF5ZXJOYW1lKTtcblxuICAgICAgICAgIGlmIChfbGF5ZXJDYXApIHtcbiAgICAgICAgICAgIGdtZkV4dERTTWFuYWdlci5jcmVhdGVBbmRBZGREYXRhU291cmNlRnJvbVdNVFNDYXBhYmlsaXR5KF9sYXllckNhcCwgcmVzcG9uc2UuY2FwYWJpbGl0aWVzLCByZXNwb25zZS51cmwpO1xuICAgICAgICAgIH0gZWxzZSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBmdW5jdGlvbiAocmVqZWN0aW9ucykge30pO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuaGFuZGxlRXh0ZXJuYWxEU0dyb3VwQ29sbGVjdGlvbkFkZF8gPSBmdW5jdGlvbiAoZXZ0KSB7XG4gIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICB2YXIgZ3JvdXAgPSBldnQuZWxlbWVudDtcblxuICAgIGlmICghKGdyb3VwIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VHcm91cCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZ3JvdXAgdHlwZScpO1xuICAgIH1cblxuICAgIHRoaXMucmVnaXN0ZXJFeHRlcm5hbERTR3JvdXBfKGdyb3VwKTtcbiAgICB0aGlzLnNldEV4dGVybmFsRGF0YVNvdXJjZXNTdGF0ZV8oKTtcbiAgfVxufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXJFeHRlcm5hbERTR3JvdXBfID0gZnVuY3Rpb24gKGdyb3VwKSB7XG4gIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbihncm91cC5kYXRhU291cmNlc0NvbGxlY3Rpb24sICdhZGQnLCB0aGlzLnNldEV4dGVybmFsRGF0YVNvdXJjZXNTdGF0ZV8sIHRoaXMpLCBsaXN0ZW4oZ3JvdXAuZGF0YVNvdXJjZXNDb2xsZWN0aW9uLCAncmVtb3ZlJywgdGhpcy5zZXRFeHRlcm5hbERhdGFTb3VyY2VzU3RhdGVfLCB0aGlzKSk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5jb250YWluc0xheWVyTmFtZSA9IGZ1bmN0aW9uIChsYXllciwgbmFtZSkge1xuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllci5nZXRMYXllcnMoKS5nZXRBcnJheSgpKSwgX3N0ZXA4OyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgoKSkuZG9uZTspIHtcbiAgICAgIHZhciBsID0gX3N0ZXA4LnZhbHVlO1xuXG4gICAgICBpZiAoIWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxheWVyJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbnRhaW5zTGF5ZXJOYW1lKGwsIG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGF5ZXIuZ2V0KExBWUVSX05PREVfTkFNRV9LRVkpID09IG5hbWU7XG4gIH1cbn07XG5cblBlcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmhhbmRsZUV4dGVybmFsRFNHcm91cENvbGxlY3Rpb25SZW1vdmVfID0gZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGdyb3VwID0gZXZ0LmVsZW1lbnQ7XG5cbiAgICBpZiAoIShncm91cCBpbnN0YW5jZW9mIG5nZW9EYXRhc291cmNlR3JvdXApKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGdyb3VwIHR5cGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLnVucmVnaXN0ZXJFeHRlcm5hbERTR3JvdXBfKGdyb3VwKTtcbiAgICB0aGlzLnNldEV4dGVybmFsRGF0YVNvdXJjZXNTdGF0ZV8oKTtcbiAgfVxufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUudW5yZWdpc3RlckV4dGVybmFsRFNHcm91cF8gPSBmdW5jdGlvbiAoZ3JvdXApIHtcbiAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG59O1xuXG5QZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5zZXRFeHRlcm5hbERhdGFTb3VyY2VzU3RhdGVfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICBpZiAodGhpcy5zZXRFeHRlcm5hbERhdGFTb3VyY2VzU3RhdGVQcm9taXNlXykge1xuICAgIHRoaXMuJHRpbWVvdXRfLmNhbmNlbCh0aGlzLnNldEV4dGVybmFsRGF0YVNvdXJjZXNTdGF0ZVByb21pc2VfKTtcbiAgfVxuXG4gIHRoaXMuc2V0RXh0ZXJuYWxEYXRhU291cmNlc1N0YXRlUHJvbWlzZV8gPSB0aGlzLiR0aW1lb3V0XyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzOSRuZ2VvU3RhdGVNYW5hZztcblxuICAgIGlmICghX3RoaXM5LmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyJyk7XG4gICAgfVxuXG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgdmFyIHVybHMgPSBbXTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKF90aGlzOS5nbWZFeHRlcm5hbERhdGFTb3VyY2VzTWFuYWdlcl8ud21zR3JvdXBzKSwgX3N0ZXA5OyAhKF9zdGVwOSA9IF9pdGVyYXRvcjkoKSkuZG9uZTspIHtcbiAgICAgIHZhciB3bXNHcm91cCA9IF9zdGVwOS52YWx1ZTtcbiAgICAgIHVybHMucHVzaCh3bXNHcm91cC51cmwpO1xuICAgICAgdmFyIHdtc0dyb3VwTGF5ZXJOYW1lcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uod21zR3JvdXAuZGF0YVNvdXJjZXMpLCBfc3RlcDExOyAhKF9zdGVwMTEgPSBfaXRlcmF0b3IxMSgpKS5kb25lOykge1xuICAgICAgICB2YXIgd21zRGF0YVNvdXJjZSA9IF9zdGVwMTEudmFsdWU7XG5cbiAgICAgICAgaWYgKHdtc0RhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQykge1xuICAgICAgICAgIHZhciBsYXllck5hbWUgPSB3bXNEYXRhU291cmNlLmdldFdGU0xheWVyTmFtZXMoKVswXTtcbiAgICAgICAgICB3bXNHcm91cExheWVyTmFtZXMucHVzaChsYXllck5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5hbWVzLnB1c2god21zR3JvdXBMYXllck5hbWVzLmpvaW4oRXh0RFNTZXBhcmF0b3IuTkFNRVMpKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoX3RoaXM5LmdtZkV4dGVybmFsRGF0YVNvdXJjZXNNYW5hZ2VyXy53bXRzR3JvdXBzKSwgX3N0ZXAxMDsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAoKSkuZG9uZTspIHtcbiAgICAgIHZhciB3bXRzR3JvdXAgPSBfc3RlcDEwLnZhbHVlO1xuICAgICAgdXJscy5wdXNoKHdtdHNHcm91cC51cmwpO1xuICAgICAgdmFyIHdtdHNHcm91cExheWVyTmFtZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHdtdHNHcm91cC5kYXRhU291cmNlcyksIF9zdGVwMTI7ICEoX3N0ZXAxMiA9IF9pdGVyYXRvcjEyKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3bXRzRGF0YVNvdXJjZSA9IF9zdGVwMTIudmFsdWU7XG5cbiAgICAgICAgaWYgKCF3bXRzRGF0YVNvdXJjZS53bXRzTGF5ZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgd210c0RhdGFTb3VyY2Uud210c0xheWVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICB3bXRzR3JvdXBMYXllck5hbWVzLnB1c2god210c0RhdGFTb3VyY2Uud210c0xheWVyKTtcbiAgICAgIH1cblxuICAgICAgbmFtZXMucHVzaCh3bXRzR3JvdXBMYXllck5hbWVzLmpvaW4oRXh0RFNTZXBhcmF0b3IuTkFNRVMpKTtcbiAgICB9XG5cbiAgICBfdGhpczkubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUoKF90aGlzOSRuZ2VvU3RhdGVNYW5hZyA9IHt9LCBfdGhpczkkbmdlb1N0YXRlTWFuYWdbUGVybWFsaW5rUGFyYW0uRVhURVJOQUxfREFUQVNPVVJDRVNfTkFNRVNdID0gbmFtZXMuam9pbihFeHREU1NlcGFyYXRvci5MSVNUKSwgX3RoaXM5JG5nZW9TdGF0ZU1hbmFnW1Blcm1hbGlua1BhcmFtLkVYVEVSTkFMX0RBVEFTT1VSQ0VTX1VSTFNdID0gdXJscy5qb2luKEV4dERTU2VwYXJhdG9yLkxJU1QpLCBfdGhpczkkbmdlb1N0YXRlTWFuYWcpKTtcblxuICAgIF90aGlzOS5zZXRFeHRlcm5hbERhdGFTb3VyY2VzU3RhdGVQcm9taXNlXyA9IG51bGw7XG4gIH0pO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuY2xlYW5QYXJhbXMgPSBmdW5jdGlvbiAoZ3JvdXBzKSB7XG4gIHZhciBfdGhpczEwID0gdGhpcztcblxuICB2YXIga2V5cyA9IHRoaXMubmdlb0xvY2F0aW9uXy5nZXRQYXJhbUtleXMoKTtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IxMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uoa2V5cyksIF9zdGVwMTM7ICEoX3N0ZXAxMyA9IF9pdGVyYXRvcjEzKCkpLmRvbmU7KSB7XG4gICAgdmFyIGtleSA9IF9zdGVwMTMudmFsdWU7XG5cbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoUGFyYW1QcmVmaXguVFJFRV9HUk9VUF9MQVlFUlMpKSB7XG4gICAgICB2YXIgdmFsdWUgPSBrZXkuc3Vic3RyaW5nKFBhcmFtUHJlZml4LlRSRUVfR1JPVVBfTEFZRVJTLmxlbmd0aCk7XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjE1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShncm91cHMpLCBfc3RlcDE1OyAhKF9zdGVwMTUgPSBfaXRlcmF0b3IxNSgpKS5kb25lOykge1xuICAgICAgICB2YXIgZ3JvdXAgPSBfc3RlcDE1LnZhbHVlO1xuXG4gICAgICAgIGlmIChncm91cC5uYW1lID09IHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy5kZWxldGVQYXJhbShrZXkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGtleS5zdGFydHNXaXRoKFBhcmFtUHJlZml4LlRSRUVfR1JPVVBfT1BBQ0lUWSkpIHtcbiAgICAgIHZhciBfdmFsdWUyID0ga2V5LnN1YnN0cmluZyhQYXJhbVByZWZpeC5UUkVFX0dST1VQX09QQUNJVFkubGVuZ3RoKTtcblxuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGdyb3VwcyksIF9zdGVwMTY7ICEoX3N0ZXAxNiA9IF9pdGVyYXRvcjE2KCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBfZ3JvdXAgPSBfc3RlcDE2LnZhbHVlO1xuXG4gICAgICAgIGlmIChfZ3JvdXAubmFtZSA9PSBfdmFsdWUyKSB7XG4gICAgICAgICAgdGhpcy5uZ2VvU3RhdGVNYW5hZ2VyXy5kZWxldGVQYXJhbShrZXkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdGhpcy4kdGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgIGlmICghX3RoaXMxMC5tYXBfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxheWVyID0gX3RoaXMxMC5tYXBfLmdldExheWVyR3JvdXAoKTtcblxuICAgIGlmICghbGF5ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBsYXllcicpO1xuICAgIH1cblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjE0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShrZXlzKSwgX3N0ZXAxNDsgIShfc3RlcDE0ID0gX2l0ZXJhdG9yMTQoKSkuZG9uZTspIHtcbiAgICAgIHZhciBrZXkgPSBfc3RlcDE0LnZhbHVlO1xuXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoUGFyYW1QcmVmaXguVFJFRV9FTkFCTEUpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGtleS5zdWJzdHJpbmcoUGFyYW1QcmVmaXguVFJFRV9FTkFCTEUubGVuZ3RoKTtcblxuICAgICAgICBpZiAoIV90aGlzMTAuY29udGFpbnNMYXllck5hbWUobGF5ZXIsIHZhbHVlKSkge1xuICAgICAgICAgIF90aGlzMTAubmdlb1N0YXRlTWFuYWdlcl8uZGVsZXRlUGFyYW0oa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoUGFyYW1QcmVmaXguVFJFRV9PUEFDSVRZKSkge1xuICAgICAgICB2YXIgX3ZhbHVlID0ga2V5LnN1YnN0cmluZyhQYXJhbVByZWZpeC5UUkVFX09QQUNJVFkubGVuZ3RoKTtcblxuICAgICAgICBpZiAoIV90aGlzMTAuY29udGFpbnNMYXllck5hbWUobGF5ZXIsIF92YWx1ZSkpIHtcbiAgICAgICAgICBfdGhpczEwLm5nZW9TdGF0ZU1hbmFnZXJfLmRlbGV0ZVBhcmFtKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuc2V0Tm9kZVRpbWVfID0gZnVuY3Rpb24gKHRyZWVDdHJsKSB7XG4gIHZhciBfdGhpczExID0gdGhpcztcblxuICB2YXIgdGltZSA9IHRoaXMubmdlb1N0YXRlTWFuYWdlcl8uZ2V0SW5pdGlhbFN0cmluZ1ZhbHVlKFBhcmFtUHJlZml4LlRSRUVfVElNRSArIHRyZWVDdHJsLm5vZGUubmFtZSk7XG5cbiAgaWYgKHRpbWUpIHtcbiAgICB2YXIgYm91bmRzID0gdGltZS5zcGxpdCgnLycpO1xuICAgIHZhciBub2RlID0gdHJlZUN0cmwubm9kZTtcbiAgICBub2RlLnRpbWUubWluRGVmVmFsdWUgPSBib3VuZHNbMF07XG4gICAgbm9kZS50aW1lLm1heERlZlZhbHVlID0gYm91bmRzWzFdO1xuICAgIHZhciBkYXRhU291cmNlID0gdGhpcy5nbWZEYXRhU291cmNlc01hbmFnZXJfLmdldERhdGFzb3VyY2Uob2xVdGlsR2V0VWlkKHRyZWVDdHJsLm5vZGUpKTtcblxuICAgIGlmIChkYXRhU291cmNlKSB7XG4gICAgICBpZiAoIShkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VPR0MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZGF0YVNvdXJjZSB0eXBlJyk7XG4gICAgICB9XG5cbiAgICAgIGRhdGFTb3VyY2UudGltZUxvd2VyVmFsdWUgPSBuZXcgRGF0ZShib3VuZHNbMF0pLmdldFRpbWUoKTtcbiAgICAgIGRhdGFTb3VyY2UudGltZVVwcGVyVmFsdWUgPSBuZXcgRGF0ZShib3VuZHNbMV0pLmdldFRpbWUoKTtcbiAgICB9IGVsc2UgaWYgKHRyZWVDdHJsLmNoaWxkcmVuKSB7XG4gICAgICB0cmVlQ3RybC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IF90aGlzMTEuZ21mRGF0YVNvdXJjZXNNYW5hZ2VyXy5nZXREYXRhc291cmNlKG9sVXRpbEdldFVpZChjaGlsZC5ub2RlKSk7XG5cbiAgICAgICAgaWYgKGRhdGFTb3VyY2UpIHtcbiAgICAgICAgICBkYXRhU291cmNlLnRpbWVMb3dlclZhbHVlID0gbmV3IERhdGUoYm91bmRzWzBdKS5nZXRUaW1lKCk7XG4gICAgICAgICAgZGF0YVNvdXJjZS50aW1lVXBwZXJWYWx1ZSA9IG5ldyBEYXRlKGJvdW5kc1sxXSkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZQZXJtYWxpbmsnLCBbZ21mQXV0aGVudGljYXRpb25TZXJ2aWNlLm5hbWUsIGdtZlRoZW1lTWFuYWdlci5uYW1lLCBnbWZUaGVtZVRoZW1lcy5uYW1lLCBnbWZEYXRhU291cmNlc01hbmFnZXIubmFtZSwgbmdlb0RyYXdGZWF0dXJlcy5uYW1lLCBnbWZMYXllckJlaW5nU3dpcGUubmFtZSwgbmdlb0xheWVydHJlZUNvbnRyb2xsZXIubmFtZSwgbmdlb01pc2NEZWJvdW5jZS5uYW1lLCBuZ2VvTWlzY0V2ZW50SGVscGVyLm5hbWUsIG5nZW9TdGF0ZW1hbmFnZXJNb2R1bGUubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnZ21mUGVybWFsaW5rJywgUGVybWFsaW5rU2VydmljZSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciByZWdleHAgPSBbXTtcblxuICBmb3IgKHZhciBrZXkxIGluIFBhcmFtUHJlZml4KSB7XG4gICAgcmVnZXhwLnB1c2gobmV3IFJlZ0V4cChQYXJhbVByZWZpeFtrZXkxXSArIFwiLipcIikpO1xuICB9XG5cbiAgZm9yICh2YXIga2V5MiBpbiBQZXJtYWxpbmtQYXJhbSkge1xuICAgIHJlZ2V4cC5wdXNoKG5ldyBSZWdFeHAoUGFyYW1QcmVmaXhba2V5Ml0pKTtcbiAgfVxuXG4gIG5nZW9TdGF0ZW1hbmFnZXJTZXJ2aWNlLnZhbHVlKCduZ2VvVXNlZEtleVJlZ2V4cCcsIHJlZ2V4cCk7XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJQZXJtYWxpbmtTaGFyZVNlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiZ21mU2hvcnRlbmVyQ3JlYXRlVXJsXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5leHBvcnQgZnVuY3Rpb24gUGVybWFsaW5rU2hhcmVTZXJ2aWNlKCRodHRwLCBnbWZTaG9ydGVuZXJDcmVhdGVVcmwpIHtcbiAgdGhpcy4kaHR0cF8gPSAkaHR0cDtcbiAgdGhpcy5nbWZTaG9ydGVuZXJDcmVhdGVVcmxfID0gZ21mU2hvcnRlbmVyQ3JlYXRlVXJsO1xufVxuXG5QZXJtYWxpbmtTaGFyZVNlcnZpY2UucHJvdG90eXBlLmdldFNob3J0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICB2YXIgcGFyYW1zID0ge1xuICAgIHVybDogdXJsXG4gIH07XG5cbiAgaWYgKCF0aGlzLmdtZlNob3J0ZW5lckNyZWF0ZVVybF8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YToge1xuICAgICAgICBzaG9ydF91cmw6IHVybFxuICAgICAgfSxcbiAgICAgIHN0YXR1czogMjAwXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLnBvc3RTaG9ydFVybF8ocGFyYW1zKTtcbn07XG5cblBlcm1hbGlua1NoYXJlU2VydmljZS5wcm90b3R5cGUuc2VuZFNob3J0VXJsID0gZnVuY3Rpb24gKHNob3J0VXJsLCBlbWFpbCwgb3B0X21lc3NhZ2UpIHtcbiAgdmFyIHBhcmFtcyA9IHtcbiAgICB1cmw6IHNob3J0VXJsLFxuICAgIGVtYWlsOiBlbWFpbFxuICB9O1xuXG4gIGlmIChvcHRfbWVzc2FnZSkge1xuICAgIHBhcmFtcy5tZXNzYWdlID0gb3B0X21lc3NhZ2U7XG4gIH1cblxuICByZXR1cm4gdGhpcy5wb3N0U2hvcnRVcmxfKHBhcmFtcyk7XG59O1xuXG5QZXJtYWxpbmtTaGFyZVNlcnZpY2UucHJvdG90eXBlLnBvc3RTaG9ydFVybF8gPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIHJldHVybiB0aGlzLiRodHRwXy5wb3N0KHRoaXMuZ21mU2hvcnRlbmVyQ3JlYXRlVXJsXywgJC5wYXJhbShwYXJhbXMpLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCB2YXIgVVJMX01BWF9MRU4gPSAyMDgzO1xuZXhwb3J0IHZhciBVUkxfUEFUSF9NQVhfTEVOID0gMjA0ODtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZTaGFyZVNlcnZpY2UnLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCdnbWZTaGFyZVNlcnZpY2UnLCBQZXJtYWxpbmtTaGFyZVNlcnZpY2UpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgZ21mUGVybWFsaW5rUGVybWFsaW5rIGZyb20gJ2dtZi9wZXJtYWxpbmsvUGVybWFsaW5rLmpzJztcbmltcG9ydCBnbWZQZXJtYWxpbmtTaGFyZVNlcnZpY2UgZnJvbSAnZ21mL3Blcm1hbGluay9TaGFyZVNlcnZpY2UuanMnO1xuaW1wb3J0IGdtZlBlcm1hbGlua1NoYXJlQ29tcG9uZW50IGZyb20gJ2dtZi9wZXJtYWxpbmsvc2hhcmVDb21wb25lbnQuanMnO1xuaW1wb3J0ICcuL3NoYXJlLnNjc3MnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ2dtZlBlcm1hbGlua01vZHVsZScsIFtnbWZQZXJtYWxpbmtQZXJtYWxpbmsubmFtZSwgZ21mUGVybWFsaW5rU2hhcmVTZXJ2aWNlLm5hbWUsIGdtZlBlcm1hbGlua1NoYXJlQ29tcG9uZW50Lm5hbWVdKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyIHVpLWRyYWdnYWJsZS1oYW5kbGVcIj5cXG4gIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgdHJhbnNsYXRlPlNoYXJlIHRoaXMgbWFwPC9oND5cXG4gIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+PC9idXR0b24+XFxuPC9kaXY+XFxuPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cXG4gIDxmb3JtIHJvbGU9XCJmb3JtXCIgbmFtZT1cImdtZlNoYXJlRm9ybVwiIG5vdmFsaWRhdGU+XFxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgPGxhYmVsIGZvcj1cImdtZlNoYXJlSW5wdXRTaG9ydExpbmste3s6OiRjdHJsLnVpZH19XCIgdHJhbnNsYXRlPlBlcm1hbGluazwvbGFiZWw+XFxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImdtZlNoYXJlSW5wdXRTaG9ydExpbmste3s6OiRjdHJsLnVpZH19XCIgb25jbGljaz1cInRoaXMuc2VsZWN0KClcIiBuZy1tb2RlbD1cIiRjdHJsLnNob3J0TGlua1wiIHJlYWRvbmx5PVwiVHJ1ZVwiPlxcbiAgICAgIDxwIGNsYXNzPVwiaGVscC1ibG9ja1wiIHRyYW5zbGF0ZT5Db3B5IHRoaXMgbGluayB0byBzaGFyZSBpdC48L3A+XFxuICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWRhbmdlclwiIG5nLWlmPVwiJGN0cmwuc2hvd0xlbmd0aFdhcm5pbmdcIj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIj48L3NwYW4+XFxuICAgICAgICB7e1xcJ1lvdSBoYXZlIGEgbG90IG9mIGRyYXduIGVsZW1lbnRzIGluIHRoaXMgbWFwLiBUaGUgYWJvdmUgbGluayBtYXkgbm90IGJlIGNvcnJlY3RseSBzdXBwb3J0ZWQgYnkgc29tZSBicm93c2Vycy5cXCcgfCB0cmFuc2xhdGV9fVxcbiAgICAgIDwvcD5cXG4gICAgICA8cCBjbGFzcz1cInRleHQtZGFuZ2VyXCIgbmctaWY9XCIkY3RybC5lcnJvck9uR2V0U2hvcnRVcmxcIj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmEgZmEtZXhjbGFtYXRpb25cIj48L3NwYW4+XFxuICAgICAgICB7e1xcJ0Vycm9yLCBjYW5ub3QgZ2V0IHRoZSBzaG9ydGVuZWQgVVJMLlxcJyB8IHRyYW5zbGF0ZX19XFxuICAgICAgPC9wPlxcbiAgICA8L2Rpdj5cXG4gICAgPGhyIG5nLWlmPVwiOjokY3RybC5vcHRpb25zLmVuYWJsZUVtYWlsICE9PSBmYWxzZVwiPlxcbiAgICA8ZGl2IGNsYXNzPVwiZ21mLXNoYXJlLWVtYWlsXCIgbmctaWY9XCI6OiRjdHJsLm9wdGlvbnMuZW5hYmxlRW1haWwgIT09IGZhbHNlXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cXG4gICAgICAgIDxsYWJlbCBmb3I9XCJnbWZTaGFyZUlucHV0RW1haWwte3s6OiRjdHJsLnVpZH19XCIgdHJhbnNsYXRlPlNlbmQgdGhpcyBsaW5rIHRvPC9sYWJlbD5cXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZW1haWxcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiICBuYW1lPVwiaW5wdXRFbWFpbFwiIGlkPVwiZ21mU2hhcmVJbnB1dEVtYWlsLXt7OjokY3RybC51aWR9fVwiIHBsYWNlaG9sZGVyPVwiRS1tYWlsXCIgbmctbW9kZWw9XCIkY3RybC5lbWFpbFwiIHJlcXVpcmVkPlxcbiAgICAgICAgPHNwYW4gbmctc2hvdz1cImdtZlNoYXJlRm9ybS4kc3VibWl0dGVkIHx8IGdtZlNoYXJlRm9ybS5pbnB1dEVtYWlsLiR0b3VjaGVkXCI+XFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1kYW5nZXJcIiBuZy1zaG93PVwiZ21mU2hhcmVGb3JtLmlucHV0RW1haWwuJGVycm9yLmVtYWlsIHx8IGdtZlNoYXJlRm9ybS5pbnB1dEVtYWlsLiRlcnJvci5yZXF1aXJlZFwiPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XFxuICAgICAgICAgICAge3tcXCdJbnZhbGlkIGVtYWlsLlxcJyB8IHRyYW5zbGF0ZX19PC9zcGFuPlxcbiAgICAgICAgPC9zcGFuPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XFxuICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuZy1hdHRyLXBsYWNlaG9sZGVyPVwie3tcXCdNZXNzYWdlIChvcHRpb25hbClcXCcgfMKgdHJhbnNsYXRlIH19XCIgbmctbW9kZWw9XCIkY3RybC5tZXNzYWdlXCI+PC90ZXh0YXJlYT5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtZGVmYXVsdFwiIG5nLWlmPVwiISRjdHJsLmlzRmluaXNoZWRTdGF0ZVwiPlxcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBjdXN0b20tc3Bpbm5lci1nZW5lcmljIGZhLXNwaW5cIj5cXG4gICAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvc3Bpbm5lci5zdmc/dmlld2JveCZoZWlnaHQ9MXJlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nXFxuICAgICAgICA8L2k+XFxuICAgICAgPC9zcGFuPlxcbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zdWNjZXNzXCIgbmctaWY9XCIkY3RybC5zdWNjZXNzZnVsbHlTZW50XCI+XFxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWNoZWNrXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxcbiAgICAgICAgICB7eyBcXCdMaW5rIHN1Y2Nlc3NmdWxseSBzZW50LlxcJyB8IHRyYW5zbGF0ZSB9fVxcbiAgICAgIDwvc3Bhbj5cXG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtZGFuZ2VyXCIgbmctaWY9XCIkY3RybC5lcnJvck9uc2VuZFwiPlxcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1leGNsYW1hdGlvblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cXG4gICAgICAgICAge3sgXFwnRXJyb3IsIHRoZSBsaW5rIGhhcyBub3QgYmVlbiBzZW50LlxcJyB8IHRyYW5zbGF0ZSB9fVxcbiAgICAgIDwvc3Bhbj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXJpZ2h0XCI+XFxuICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIHRyYW5zbGF0ZT5DbG9zZTwvYnV0dG9uPlxcbiAgICAgIDxidXR0b24gbmctaWY9XCI6OiRjdHJsLm9wdGlvbnMuZW5hYmxlRW1haWwgIT09IGZhbHNlXCJcXG4gICAgICAgIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwcmltZVwiXFxuICAgICAgICBuZy1jbGljaz1cIiRjdHJsLnNlbmRTaG9ydFVybCgpXCJcXG4gICAgICAgIG5nLWRpc2FibGVkPVwiIWdtZlNoYXJlRm9ybS4kdmFsaWRcIlxcbiAgICAgICAgdHJhbnNsYXRlPlNlbmRcXG4gICAgICA8L2J1dHRvbj5cXG4gICAgPC9kaXY+XFxuICA8L2Zvcm0+XFxuPC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZlBlcm1hbGlua1NoYXJlU2VydmljZSwgeyBVUkxfTUFYX0xFTiwgVVJMX1BBVEhfTUFYX0xFTiB9IGZyb20gJ2dtZi9wZXJtYWxpbmsvU2hhcmVTZXJ2aWNlLmpzJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyTG9jYXRpb24gZnJvbSAnbmdlby9zdGF0ZW1hbmFnZXIvTG9jYXRpb24uanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZlBlcm1hbGlua1NoYXJlQ29tcG9uZW50JywgW2dtZlBlcm1hbGlua1NoYXJlU2VydmljZS5uYW1lLCBuZ2VvU3RhdGVtYW5hZ2VyTG9jYXRpb24ubmFtZV0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2dtZi9wZXJtYWxpbmsvc2hhcmVDb21wb25lbnQnLCByZXF1aXJlKCcuL3NoYXJlQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mUGVybWFsaW5rU2hhcmVUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uICgkYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gJGF0dHJzLmdtZlBlcm1hbGlua1NoYXJlVGVtcGxhdGVVcmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnZ21mL3Blcm1hbGluay9zaGFyZUNvbXBvbmVudCc7XG59KTtcbmdtZlBlcm1hbGlua1NoYXJlVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRhdHRyc1wiLCBcImdtZlBlcm1hbGlua1NoYXJlVGVtcGxhdGVVcmxcIl07XG5cbmZ1bmN0aW9uIGdtZlBlcm1hbGlua1NoYXJlVGVtcGxhdGVVcmwoJGF0dHJzLCBnbWZQZXJtYWxpbmtTaGFyZVRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBnbWZQZXJtYWxpbmtTaGFyZVRlbXBsYXRlVXJsKCRhdHRycyk7XG59XG5cbnZhciBwZXJtYWxpbmtTaGFyZUNvbXBvbmVudCA9IHtcbiAgY29udHJvbGxlcjogJ0dtZlNoYXJlQ29udHJvbGxlcicsXG4gIHRlbXBsYXRlVXJsOiBnbWZQZXJtYWxpbmtTaGFyZVRlbXBsYXRlVXJsXG59O1xubXlNb2R1bGUuY29tcG9uZW50KCdnbWZTaGFyZScsIHBlcm1hbGlua1NoYXJlQ29tcG9uZW50KTtcbmV4cG9ydCB2YXIgU2hhcmVDb21wb25lbnRDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBTaGFyZUNvbXBvbmVudENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIm5nZW9Mb2NhdGlvblwiLCBcImdtZlNoYXJlU2VydmljZVwiLCBcIiRxXCIsIFwiJGF0dHJzXCIsIFwiZ21mU2hhcmVPcHRpb25zXCJdO1xuXG4gIGZ1bmN0aW9uIFNoYXJlQ29tcG9uZW50Q29udHJvbGxlcigkc2NvcGUsIG5nZW9Mb2NhdGlvbiwgZ21mU2hhcmVTZXJ2aWNlLCAkcSwgJGF0dHJzLCBnbWZTaGFyZU9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBnbWZTaGFyZU9wdGlvbnM7XG4gICAgdGhpcy51aWQgPSBvbFV0aWxHZXRVaWQodGhpcyk7XG4gICAgdGhpcy4kc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMuZ21mU2hhcmVTZXJ2aWNlXyA9IGdtZlNoYXJlU2VydmljZTtcbiAgICB0aGlzLiRxXyA9ICRxO1xuICAgIHRoaXMubmdlb0xvY2F0aW9uXyA9IG5nZW9Mb2NhdGlvbjtcbiAgICB0aGlzLnNob3J0TGluayA9ICcnO1xuICAgIHRoaXMuZW1haWwgPSAnJztcbiAgICB0aGlzLm1lc3NhZ2UgPSAnJztcbiAgICB0aGlzLnBlcm1hbGlua18gPSB0aGlzLm5nZW9Mb2NhdGlvbl8uZ2V0VXJpU3RyaW5nKCk7XG4gICAgdmFyIHBhdGggPSBuZ2VvTG9jYXRpb24uZ2V0UGF0aCgpO1xuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcGF0aCcpO1xuICAgIH1cblxuICAgIHRoaXMuc2hvd0xlbmd0aFdhcm5pbmcgPSB0aGlzLnBlcm1hbGlua18ubGVuZ3RoID4gVVJMX01BWF9MRU4gfHwgcGF0aC5sZW5ndGggPiBVUkxfUEFUSF9NQVhfTEVOO1xuICAgIHRoaXMuc3VjY2Vzc2Z1bGx5U2VudCA9IGZhbHNlO1xuICAgIHRoaXMuZXJyb3JPbnNlbmQgPSBmYWxzZTtcbiAgICB0aGlzLmlzRmluaXNoZWRTdGF0ZSA9IHRydWU7XG4gICAgdGhpcy5lcnJvck9uR2V0U2hvcnRVcmwgPSBmYWxzZTtcbiAgICB0aGlzLmdldFNob3J0VXJsKCk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU2hhcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0U2hvcnRVcmwgPSBmdW5jdGlvbiBnZXRTaG9ydFVybCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy4kcV8ud2hlbih0aGlzLmdtZlNoYXJlU2VydmljZV8uZ2V0U2hvcnRVcmwodGhpcy5wZXJtYWxpbmtfKSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgX3RoaXMuc2hvcnRMaW5rID0gcmVzcC5kYXRhLnNob3J0X3VybDtcbiAgICAgIF90aGlzLmVycm9yT25HZXRTaG9ydFVybCA9IGZhbHNlO1xuICAgIH0sIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICBfdGhpcy5zaG9ydExpbmsgPSBfdGhpcy5wZXJtYWxpbmtfO1xuICAgICAgX3RoaXMuZXJyb3JPbkdldFNob3J0VXJsID0gdHJ1ZTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uc2VuZFNob3J0VXJsID0gZnVuY3Rpb24gc2VuZFNob3J0VXJsKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdGhpcy5lcnJvck9uc2VuZCA9IGZhbHNlO1xuICAgIHRoaXMuc3VjY2Vzc2Z1bGx5U2VudCA9IGZhbHNlO1xuICAgIHRoaXMuaXNGaW5pc2hlZFN0YXRlID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy4kc2NvcGVfLmdtZlNoYXJlRm9ybS4kdmFsaWQpIHtcbiAgICAgIHRoaXMuJHFfLndoZW4odGhpcy5nbWZTaGFyZVNlcnZpY2VfLnNlbmRTaG9ydFVybCh0aGlzLnBlcm1hbGlua18sIHRoaXMuZW1haWwsIHRoaXMubWVzc2FnZSkpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgX3RoaXMyLnN1Y2Nlc3NmdWxseVNlbnQgPSB0cnVlO1xuICAgICAgICBfdGhpczIuaXNGaW5pc2hlZFN0YXRlID0gdHJ1ZTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgIF90aGlzMi5lcnJvck9uc2VuZCA9IHRydWU7XG4gICAgICAgIF90aGlzMi5pc0ZpbmlzaGVkU3RhdGUgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTaGFyZUNvbXBvbmVudENvbnRyb2xsZXI7XG59KCk7XG5teU1vZHVsZS5jb250cm9sbGVyKCdHbWZTaGFyZUNvbnRyb2xsZXInLCBTaGFyZUNvbXBvbmVudENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgZ21mUXVlcnlHcmlkQ29tcG9uZW50IGZyb20gJ2dtZi9xdWVyeS9ncmlkQ29tcG9uZW50LmpzJztcbmltcG9ydCBnbWZRdWVyeVdpbmRvd0NvbXBvbmVudCBmcm9tICdnbWYvcXVlcnkvd2luZG93Q29tcG9uZW50LmpzJztcbmltcG9ydCAnLi9ncmlkLnNjc3MnO1xuaW1wb3J0ICcuL3dpbmRvdy5zY3NzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCdnbWZRdWVyeUV4dHJhTW9kdWxlJywgW2dtZlF1ZXJ5R3JpZENvbXBvbmVudC5uYW1lLCBnbWZRdWVyeVdpbmRvd0NvbXBvbmVudC5uYW1lXSk7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdiBjbGFzcz1cImdtZi1kaXNwbGF5cXVlcnlncmlkIHBhbmVsXCIgbmctc2hvdz1cImN0cmwuYWN0aXZlXCI+XFxuICA8ZGl2XFxuICAgIGNsYXNzPVwiY2xvc2VcIlxcbiAgICBuZy1jbGljaz1cImN0cmwuY2xlYXIoKVwiPlxcbiAgICAmdGltZXM7XFxuICA8L2Rpdj5cXG5cXG4gIDx1bFxcbiAgICBjbGFzcz1cIm5hdiBuYXYtcGlsbHNcIlxcbiAgICByb2xlPVwidGFibGlzdFwiPlxcblxcbiAgICA8bGlcXG4gICAgICBjbGFzcz1cIm5hdi1pdGVtXCJcXG4gICAgICBuZy1yZXBlYXQ9XCJncmlkU291cmNlIGluIGN0cmwuZ2V0R3JpZFNvdXJjZXMoKSB0cmFjayBieSBncmlkU291cmNlLnNvdXJjZS5sYWJlbFwiXFxuICAgICAgcm9sZT1cInByZXNlbnRhdGlvblwiXFxuICAgICAgbmctY2xpY2s9XCJjdHJsLnNlbGVjdFRhYihncmlkU291cmNlKVwiPlxcblxcbiAgICAgIDxhXFxuICAgICAgICBjbGFzcz1cIm5hdi1saW5rXCJcXG4gICAgICAgIGhyZWY9XCIje3tjdHJsLmVzY2FwZVZhbHVlKGdyaWRTb3VyY2Uuc291cmNlLmxhYmVsKX19XCJcXG4gICAgICAgIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZVxcJyA6IGN0cmwuaXNTZWxlY3RlZChncmlkU291cmNlKX1cIlxcbiAgICAgICAgZGF0YS10YXJnZXQ9XCIje3tjdHJsLmVzY2FwZVZhbHVlKGdyaWRTb3VyY2Uuc291cmNlLmxhYmVsKX19XCJcXG4gICAgICAgIGFyaWEtY29udHJvbHM9XCJ7e2N0cmwuZXNjYXBlVmFsdWUoZ3JpZFNvdXJjZS5zb3VyY2UubGFiZWwpfX1cIlxcbiAgICAgICAgcm9sZT1cInRhYlwiXFxuICAgICAgICBkYXRhLXRvZ2dsZT1cInRhYlwiPlxcblxcbiAgICAgICAgPHNwYW4+XFxuICAgICAgICAgIHt7Z3JpZFNvdXJjZS5zb3VyY2UubGFiZWwgfCB0cmFuc2xhdGV9fSAoe3tncmlkU291cmNlLnNvdXJjZS5mZWF0dXJlcy5sZW5ndGh9fSlcXG4gICAgICAgIDwvc3Bhbj5cXG4gICAgICA8L2E+XFxuICAgIDwvbGk+XFxuICA8L3VsPlxcblxcbiAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50XCI+XFxuICAgIDxkaXZcXG4gICAgICBuZy1yZXBlYXQ9XCJncmlkU291cmNlIGluIGN0cmwuZ2V0R3JpZFNvdXJjZXMoKSB0cmFjayBieSBncmlkU291cmNlLnNvdXJjZS5sYWJlbFwiXFxuICAgICAgcm9sZT1cInRhYnBhbmVsXCJcXG4gICAgICBjbGFzcz1cInRhYi1wYW5lXCJcXG4gICAgICBuZy1jbGFzcz1cIntcXCdhY3RpdmVcXCcgOiBjdHJsLmlzU2VsZWN0ZWQoZ3JpZFNvdXJjZSl9XCJcXG4gICAgICBpZD1cInt7Y3RybC5lc2NhcGVWYWx1ZShncmlkU291cmNlLnNvdXJjZS5sYWJlbCl9fVwiPlxcblxcbiAgICAgIDxuZ2VvLWdyaWRcXG4gICAgICAgIG5nZW8tZ3JpZC1jb25maWd1cmF0aW9uPVwiZ3JpZFNvdXJjZS5jb25maWd1cmF0aW9uXCI+XFxuICAgICAgPC9uZ2VvLWdyaWQ+XFxuICA8L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cXG4gIDxkaXYgbmctc2hvdz1cIiFjdHJsLnBlbmRpbmcgJiYgY3RybC5nZXRBY3RpdmVHcmlkU291cmNlKCkgJiYgY3RybC5nZXRBY3RpdmVHcmlkU291cmNlKCkuY29uZmlndXJhdGlvbiAhPT0gbnVsbFwiIGNsYXNzPVwicm93XCI+XFxuICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNSBteS1hdXRvXCI+XFxuICAgICAgPHNwYW4gbmctaWY9XCJjdHJsLmhhc09uZVdpdGhUb29NYW55UmVzdWx0c18oKVwiIGNsYXNzPVwiZ21mLXF1ZXJ5LWdyaWQtdG9vLW1hbnkgdGV4dC13YXJuaW5nXCI+e3tcXCdPbmx5XFwnIHwgdHJhbnNsYXRlfX0ge3tjdHJsLnN1bU9mRmVhdHVyZXN9fSB7e1xcJ29mXFwnIHwgdHJhbnNsYXRlfX0ge3tjdHJsLnN1bU9mQXZhaWxhYmxlUmVzdWx0c319IHt7XFwncmVzdWx0cyBkaXNwbGF5ZWQsIGFzIHRoZSBtYXhpbXVtIG51bWJlciBpcyByZWFjaGVkLiBQbGVhc2UgcmVmaW5lIHlvdXIgcXVlcnkuXFwnIHwgdHJhbnNsYXRlIH19PC9zcGFuPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImNvbC1tZC03XCIgY2xhc3M9XCJwdWxsLXJpZ2h0XCI+XFxuICAgICAgPHVsIGNsYXNzPVwibmF2IGp1c3RpZnktY29udGVudC1lbmRcIj5cXG4gICAgICAgIDxsaVxcbiAgICAgICAgICBjbGFzcz1cIm5nLWhpZGVcIlxcbiAgICAgICAgICBuZy1zaG93PVwiY3RybC5pc09uZVNlbGVjdGVkKClcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJ0biBidG4tc20gbmctYmluZGluZ1wiPlxcbiAgICAgICAgICAgIHt7Y3RybC5nZXRTZWxlY3RlZFJvd0NvdW50KCl9fSA8c3BhbiB0cmFuc2xhdGU+c2VsZWN0ZWQgZWxlbWVudChzKTwvc3Bhbj5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2xpPlxcblxcbiAgICAgICAgPGxpXFxuICAgICAgICAgIG5nLXNob3c9XCJjdHJsLmlzT25lU2VsZWN0ZWQoKVwiXFxuICAgICAgICAgIGNsYXNzPVwibmctaGlkZVwiPlxcbiAgICAgICAgICA8YnV0dG9uXFxuICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXNtXCJcXG4gICAgICAgICAgICB0aXRsZT1cInt7XFwnWm9vbSB0byBzZWxlY3Rpb25cXCcgfCB0cmFuc2xhdGV9fVwiXFxuICAgICAgICAgICAgbmctY2xpY2s9XCJjdHJsLnpvb21Ub1NlbGVjdGlvbigpXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1zZWFyY2gtcGx1c1wiPjwvaT4gPHNwYW4gdHJhbnNsYXRlPlpvb20gdG88L3NwYW4+XFxuICAgICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgPC9saT5cXG5cXG4gICAgICAgIDxsaVxcbiAgICAgICAgICBuZy1zaG93PVwiY3RybC5pc09uZVNlbGVjdGVkKClcIlxcbiAgICAgICAgICBjbGFzcz1cIm5nLWhpZGVcIj5cXG4gICAgICAgICAgPGJ1dHRvblxcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi1zbVwiXFxuICAgICAgICAgICAgdGl0bGU9XCJ7e1xcJ0V4cG9ydCBzZWxlY3Rpb24gYXMgQ1NWXFwnIHwgdHJhbnNsYXRlfX1cIlxcbiAgICAgICAgICAgIG5nLWNsaWNrPVwiY3RybC5kb3dubG9hZENzdigpXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1kb3dubG9hZFwiPjwvaT4gPHNwYW4gdHJhbnNsYXRlPkV4cG9ydCBhcyBDU1Y8L3NwYW4+XFxuICAgICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgPC9saT5cXG5cXG4gICAgICAgIDxsaSBjbGFzcz1cImRyb3Bkb3duXCI+XFxuICAgICAgICAgIDxidXR0b25cXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgICAgICAgICBjbGFzcz1cImRyb3B1cCBidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGRyb3Bkb3duLXRvZ2dsZVwiXFxuICAgICAgICAgICAgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXFxuICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cInRydWVcIlxcbiAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPlxcbiAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT5TZWxlY3Q8L3NwYW4+XFxuICAgICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgICA8dWxcXG4gICAgICAgICAgICBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIlxcbiAgICAgICAgICAgIGFyaWEtbGFiZWxsZWRieT1cImRMYWJlbFwiPlxcbiAgICAgICAgICAgIDxsaT5cXG4gICAgICAgICAgICAgIDxhXFxuICAgICAgICAgICAgICAgIGhyZWY9XCJcIlxcbiAgICAgICAgICAgICAgICBuZy1jbGljaz1cImN0cmwuc2VsZWN0QWxsKClcIiB0cmFuc2xhdGU+QWxsPC9hPlxcbiAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgPGxpPlxcbiAgICAgICAgICAgICAgPGFcXG4gICAgICAgICAgICAgICAgaHJlZj1cIlwiXFxuICAgICAgICAgICAgICAgIG5nLWNsaWNrPVwiY3RybC51bnNlbGVjdEFsbCgpXCIgdHJhbnNsYXRlPk5vbmU8L2E+XFxuICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgICA8bGk+XFxuICAgICAgICAgICAgICA8YVxcbiAgICAgICAgICAgICAgICBocmVmPVwiXCJcXG4gICAgICAgICAgICAgICAgbmctY2xpY2s9XCJjdHJsLmludmVydFNlbGVjdGlvbigpXCIgdHJhbnNsYXRlPlJldmVyc2Ugc2VsZWN0aW9uPC9hPlxcbiAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgIDwvdWw+XFxuICAgICAgICA8L2xpPlxcbiAgICAgIDwvdWw+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XFxuICA8L2Rpdj5cXG5cXG4gIDxkaXYgbmctc2hvdz1cImN0cmwucGVuZGluZ1wiIGNsYXNzPVwic3Bpbm5lci1ncmlkXCI+XFxuICAgIDxpIGNsYXNzPVwiZmEgZmEtc3BpblwiPlxcbiAgICAgICcgK1xuKChfX3QgPSAocmVxdWlyZSgnZ21mL2ljb25zL3NwaW5uZXIuc3ZnP3ZpZXdib3gmaGVpZ2h0PTNyZW0nKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICA8L2k+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiUXVlcnlHcmlkQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwibmdlb1F1ZXJ5UmVzdWx0XCIsIFwibmdlb01hcFF1ZXJlbnRcIiwgXCJuZ2VvRmVhdHVyZU92ZXJsYXlNZ3JcIiwgXCIkdGltZW91dFwiLCBcIm5nZW9Dc3ZEb3dubG9hZFwiLCBcIm5nZW9RdWVyeU9wdGlvbnNcIiwgXCJnbWZDc3ZGaWxlbmFtZVwiLCBcIiRlbGVtZW50XCIsIFwiZ21mRGlzcGxheVF1ZXJ5R3JpZE9wdGlvbnNcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRG93bmxvYWRDc3YgZnJvbSAnbmdlby9kb3dubG9hZC9Dc3YuanMnO1xuaW1wb3J0IG5nZW9Eb3dubG9hZFNlcnZpY2UgZnJvbSAnbmdlby9kb3dubG9hZC9zZXJ2aWNlLmpzJztcbmltcG9ydCBuZ2VvR3JpZENvbXBvbmVudCBmcm9tICduZ2VvL2dyaWQvY29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvR3JpZENvbmZpZywgeyBnZXRSb3dVaWQgfSBmcm9tICduZ2VvL2dyaWQvQ29uZmlnLmpzJztcbmltcG9ydCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXlNZ3IgZnJvbSAnbmdlby9tYXAvRmVhdHVyZU92ZXJsYXlNZ3IuanMnO1xuaW1wb3J0IG5nZW9RdWVyeU1hcFF1ZXJlbnQgZnJvbSAnbmdlby9xdWVyeS9NYXBRdWVyZW50LmpzJztcbmltcG9ydCBvbENvbGxlY3Rpb24gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgKiBhcyBvbEV4dGVudCBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IG9sTWFwIGZyb20gJ29sL01hcC5qcyc7XG5pbXBvcnQgeyBidWlsZFN0eWxlIH0gZnJvbSAnbmdlby9vcHRpb25zLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2pzL3NyYy9kcm9wZG93bi5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mUXVlcnlHcmlkQ29tcG9uZW50JywgW25nZW9Eb3dubG9hZENzdi5uYW1lLCBuZ2VvRG93bmxvYWRTZXJ2aWNlLm5hbWUsIG5nZW9HcmlkQ29tcG9uZW50Lm5hbWUsIG5nZW9NYXBGZWF0dXJlT3ZlcmxheU1nci5uYW1lLCBuZ2VvUXVlcnlNYXBRdWVyZW50Lm5hbWVdKTtcbm15TW9kdWxlLnZhbHVlKCdnbWZEaXNwbGF5cXVlcnlncmlkVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGVsZW1lbnQsICRhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSAkYXR0cnMuZ21mRGlzcGxheXF1ZXJ5Z3JpZFRlbXBsYXRldXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ2dtZi9xdWVyeS9ncmlkQ29tcG9uZW50Jztcbn0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2dtZi9xdWVyeS9ncmlkQ29tcG9uZW50JywgcmVxdWlyZSgnLi9ncmlkQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5nbWZEaXNwbGF5cXVlcnlncmlkVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRlbGVtZW50XCIsIFwiJGF0dHJzXCIsIFwiZ21mRGlzcGxheXF1ZXJ5Z3JpZFRlbXBsYXRlVXJsXCJdO1xuXG5mdW5jdGlvbiBnbWZEaXNwbGF5cXVlcnlncmlkVGVtcGxhdGVVcmwoJGVsZW1lbnQsICRhdHRycywgZ21mRGlzcGxheXF1ZXJ5Z3JpZFRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBnbWZEaXNwbGF5cXVlcnlncmlkVGVtcGxhdGVVcmwoJGVsZW1lbnQsICRhdHRycyk7XG59XG5cbnZhciBxdWVyeUdyaWRDb21wb25lbnQgPSB7XG4gIGNvbnRyb2xsZXI6ICdHbWZEaXNwbGF5cXVlcnlncmlkQ29udHJvbGxlciBhcyBjdHJsJyxcbiAgYmluZGluZ3M6IHtcbiAgICAnYWN0aXZlJzogJz0/Z21mRGlzcGxheXF1ZXJ5Z3JpZEFjdGl2ZScsXG4gICAgJ2dldE1hcEZuJzogJyZnbWZEaXNwbGF5cXVlcnlncmlkTWFwJ1xuICB9LFxuICB0ZW1wbGF0ZVVybDogZ21mRGlzcGxheXF1ZXJ5Z3JpZFRlbXBsYXRlVXJsXG59O1xubXlNb2R1bGUuY29tcG9uZW50KCdnbWZEaXNwbGF5cXVlcnlncmlkJywgcXVlcnlHcmlkQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBRdWVyeUdyaWRDb250cm9sbGVyKCRzY29wZSwgbmdlb1F1ZXJ5UmVzdWx0LCBuZ2VvTWFwUXVlcmVudCwgbmdlb0ZlYXR1cmVPdmVybGF5TWdyLCAkdGltZW91dCwgbmdlb0NzdkRvd25sb2FkLCBuZ2VvUXVlcnlPcHRpb25zLCBnbWZDc3ZGaWxlbmFtZSwgJGVsZW1lbnQsIGdtZkRpc3BsYXlRdWVyeUdyaWRPcHRpb25zKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5vcHRpb25zID0gZ21mRGlzcGxheVF1ZXJ5R3JpZE9wdGlvbnM7XG4gIHRoaXMuJHNjb3BlXyA9ICRzY29wZTtcbiAgdGhpcy4kdGltZW91dF8gPSAkdGltZW91dDtcbiAgdGhpcy5uZ2VvUXVlcnlSZXN1bHQgPSBuZ2VvUXVlcnlSZXN1bHQ7XG4gIHRoaXMubmdlb01hcFF1ZXJlbnRfID0gbmdlb01hcFF1ZXJlbnQ7XG4gIHRoaXMubmdlb0NzdkRvd25sb2FkXyA9IG5nZW9Dc3ZEb3dubG9hZDtcbiAgdGhpcy4kZWxlbWVudF8gPSAkZWxlbWVudDtcbiAgdGhpcy5tYXhSZXN1bHRzID0gbmdlb1F1ZXJ5T3B0aW9ucy5saW1pdCAhPT0gdW5kZWZpbmVkID8gbmdlb1F1ZXJ5T3B0aW9ucy5saW1pdCA6IDUwO1xuICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgdGhpcy5ncmlkU291cmNlcyA9IHt9O1xuICB0aGlzLmxvYWRlZEdyaWRTb3VyY2VzID0gW107XG4gIHRoaXMuc2VsZWN0ZWRUYWIgPSBudWxsO1xuICB0aGlzLmZlYXR1cmVzRm9yU291cmNlc18gPSB7fTtcbiAgdGhpcy5mZWF0dXJlc18gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gIHRoaXMubmdlb0ZlYXR1cmVPdmVybGF5TWdyXyA9IG5nZW9GZWF0dXJlT3ZlcmxheU1ncjtcbiAgdGhpcy5oaWdobGlnaHRGZWF0dXJlc18gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gIHRoaXMuZmlsZW5hbWVfID0gZ21mQ3N2RmlsZW5hbWU7XG4gIHRoaXMubWFwXyA9IG51bGw7XG4gIHRoaXMuc3VtT2ZGZWF0dXJlcyA9IDA7XG4gIHRoaXMuc3VtT2ZBdmFpbGFibGVSZXN1bHRzID0gMDtcbiAgdGhpcy4kc2NvcGVfLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZ2VvUXVlcnlSZXN1bHQ7XG4gIH0sIGZ1bmN0aW9uIChuZXdRdWVyeVJlc3VsdCwgb2xkUXVlcnlSZXN1bHQpIHtcbiAgICBpZiAobmdlb1F1ZXJ5UmVzdWx0LnBlbmRpbmcpIHtcbiAgICAgIF90aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICBfdGhpcy5wZW5kaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAobmV3UXVlcnlSZXN1bHQgIT09IG9sZFF1ZXJ5UmVzdWx0KSB7XG4gICAgICBfdGhpcy51cGRhdGVEYXRhXygpO1xuICAgIH1cbiAgfSk7XG4gIHRoaXMudW5yZWdpc3RlclNlbGVjdFdhdGNoZXJfID0gbnVsbDtcbiAgdGhpcy5nZXRNYXBGbiA9IG51bGw7XG59XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5nZXRNYXBGbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZXRNYXBGbicpO1xuICB9XG5cbiAgdmFyIGZlYXR1cmVzT3ZlcmxheSA9IHRoaXMubmdlb0ZlYXR1cmVPdmVybGF5TWdyXy5nZXRGZWF0dXJlT3ZlcmxheSgpO1xuICBmZWF0dXJlc092ZXJsYXkuc2V0RmVhdHVyZXModGhpcy5mZWF0dXJlc18pO1xuICBmZWF0dXJlc092ZXJsYXkuc2V0U3R5bGUoYnVpbGRTdHlsZSh0aGlzLm9wdGlvbnMuZmVhdHVyZXNTdHlsZSkpO1xuICB2YXIgaGlnaGxpZ2h0RmVhdHVyZXNPdmVybGF5ID0gdGhpcy5uZ2VvRmVhdHVyZU92ZXJsYXlNZ3JfLmdldEZlYXR1cmVPdmVybGF5KCk7XG4gIGhpZ2hsaWdodEZlYXR1cmVzT3ZlcmxheS5zZXRGZWF0dXJlcyh0aGlzLmhpZ2hsaWdodEZlYXR1cmVzXyk7XG4gIHZhciBoaWdobGlnaHRGZWF0dXJlU3R5bGUgPSBidWlsZFN0eWxlKHRoaXMub3B0aW9ucy5zZWxlY3RlZEZlYXR1cmVTdHlsZSk7XG4gIGhpZ2hsaWdodEZlYXR1cmVzT3ZlcmxheS5zZXRTdHlsZShoaWdobGlnaHRGZWF0dXJlU3R5bGUpO1xuICB2YXIgbWFwRm4gPSB0aGlzLmdldE1hcEZuO1xuXG4gIGlmIChtYXBGbikge1xuICAgIHZhciBtYXAgPSBtYXBGbigpO1xuXG4gICAgaWYgKCEobWFwIGluc3RhbmNlb2Ygb2xNYXApKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIG1hcCB0eXBlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICB9XG59O1xuXG5RdWVyeUdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRHcmlkU291cmNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgcmV0dXJuIHRoaXMubG9hZGVkR3JpZFNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2VMYWJlbCkge1xuICAgIHJldHVybiBfdGhpczIuZ3JpZFNvdXJjZXNbc291cmNlTGFiZWxdO1xuICB9KTtcbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZURhdGFfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMzID0gdGhpcztcblxuICBpZiAoKHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnBlbmRpbmcgfHwgdGhpcy5uZ2VvUXVlcnlSZXN1bHQudG90YWwgPT09IDApICYmICF0aGlzLmhhc09uZVdpdGhUb29NYW55UmVzdWx0c18oKSkge1xuICAgIHZhciBvbGRBY3RpdmUgPSB0aGlzLmFjdGl2ZTtcbiAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICBpZiAob2xkQWN0aXZlKSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnBlbmRpbmc7XG4gICAgICB0aGlzLnBlbmRpbmcgPSB0aGlzLm5nZW9RdWVyeVJlc3VsdC5wZW5kaW5nO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuc3VtT2ZBdmFpbGFibGVSZXN1bHRzID0gMDtcbiAgdGhpcy5zdW1PZkZlYXR1cmVzID0gMDtcbiAgdmFyIGNvdW50ZWRTb3VyY2VzID0gW107XG4gIHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgaWYgKCFjb3VudGVkU291cmNlcy5pbmNsdWRlcyhzb3VyY2UubGFiZWwpKSB7XG4gICAgICBfdGhpczMuc3VtT2ZGZWF0dXJlcyArPSBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmICghc291cmNlLnJlcXVlc3RQYXJ0bmVycyB8fCAhc291cmNlLnJlcXVlc3RQYXJ0bmVycy5zb21lKGZ1bmN0aW9uIChsYWJlbCkge1xuICAgICAgcmV0dXJuIGNvdW50ZWRTb3VyY2VzLmluY2x1ZGVzKGxhYmVsKTtcbiAgICB9KSkge1xuICAgICAgX3RoaXMzLnN1bU9mQXZhaWxhYmxlUmVzdWx0cyArPSBzb3VyY2UudG90YWxGZWF0dXJlQ291bnQ7XG4gICAgfVxuXG4gICAgY291bnRlZFNvdXJjZXMucHVzaChzb3VyY2UubGFiZWwpO1xuICB9KTtcbiAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIHNvdXJjZXMgPSB0aGlzLm5nZW9RdWVyeVJlc3VsdC5zb3VyY2VzO1xuXG4gIGlmIChPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMubWVyZ2VUYWJzIHx8IHt9KS5sZW5ndGggPiAwKSB7XG4gICAgc291cmNlcyA9IHRoaXMuZ2V0TWVyZ2VkU291cmNlc18oc291cmNlcyk7XG4gIH1cblxuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UudG9vTWFueVJlc3VsdHMgJiYgc291cmNlLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgX3RoaXMzLm1ha2VHcmlkXyhudWxsLCBzb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VyY2UuaWQgPSBfdGhpczMuZXNjYXBlVmFsdWUoc291cmNlLmlkKTtcbiAgICAgIHZhciBmZWF0dXJlcyA9IHNvdXJjZS5mZWF0dXJlcztcblxuICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgX3RoaXMzLmNvbGxlY3REYXRhXyhzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHRoaXMubG9hZGVkR3JpZFNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5zZWxlY3RlZFRhYiA9PT0gbnVsbCB8fCAhKFwiXCIgKyB0aGlzLnNlbGVjdGVkVGFiIGluIHRoaXMuZ3JpZFNvdXJjZXMpKSB7XG4gICAgdGhpcy4kdGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZpcnN0U291cmNlSWQgPSBfdGhpczMubG9hZGVkR3JpZFNvdXJjZXNbMF07XG5cbiAgICAgIF90aGlzMy5zZWxlY3RUYWIoX3RoaXMzLmdyaWRTb3VyY2VzW2ZpcnN0U291cmNlSWRdKTtcbiAgICB9LCAwKTtcbiAgfVxufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUuaGFzT25lV2l0aFRvb01hbnlSZXN1bHRzXyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnNvdXJjZXMuc29tZShmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgcmV0dXJuIHNvdXJjZS50b29NYW55UmVzdWx0cztcbiAgfSk7XG59O1xuXG5RdWVyeUdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5lc2NhcGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHZhciB0b0VzY2FwZSA9IC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcIHxdL2c7XG5cbiAgICBpZiAodmFsdWUubWF0Y2godG9Fc2NhcGUpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSh0b0VzY2FwZSwgJ18nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uIChncmlkU291cmNlKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdGVkVGFiID09PSBncmlkU291cmNlLnNvdXJjZS5sYWJlbDtcbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmdldE1lcmdlZFNvdXJjZXNfID0gZnVuY3Rpb24gKHNvdXJjZXMpIHtcbiAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgdmFyIGFsbFNvdXJjZXMgPSBbXTtcbiAgdmFyIG1lcmdlZFNvdXJjZXMgPSB7fTtcbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICB2YXIgbWVyZ2VkU291cmNlID0gX3RoaXM0LmdldE1lcmdlZFNvdXJjZV8oc291cmNlLCBtZXJnZWRTb3VyY2VzKTtcblxuICAgIGlmIChtZXJnZWRTb3VyY2UgPT09IG51bGwpIHtcbiAgICAgIGFsbFNvdXJjZXMucHVzaChzb3VyY2UpO1xuICAgIH1cbiAgfSk7XG5cbiAgZm9yICh2YXIgbWVyZ2VkU291cmNlSWQgaW4gbWVyZ2VkU291cmNlcykge1xuICAgIGFsbFNvdXJjZXMucHVzaChtZXJnZWRTb3VyY2VzW21lcmdlZFNvdXJjZUlkXSk7XG4gIH1cblxuICByZXR1cm4gYWxsU291cmNlcztcbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmdldE1lcmdlZFNvdXJjZV8gPSBmdW5jdGlvbiAoc291cmNlLCBtZXJnZWRTb3VyY2VzKSB7XG4gIHZhciBtZXJnZVNvdXJjZUlkID0gbnVsbDtcblxuICBmb3IgKHZhciBjdXJyZW50TWVyZ2VTb3VyY2VJZCBpbiB0aGlzLm9wdGlvbnMubWVyZ2VUYWJzIHx8IHt9KSB7XG4gICAgdmFyIHNvdXJjZUxhYmVscyA9IHRoaXMub3B0aW9ucy5tZXJnZVRhYnNbY3VycmVudE1lcmdlU291cmNlSWRdO1xuICAgIHZhciBjb250YWluc1NvdXJjZSA9IHNvdXJjZUxhYmVscy5zb21lKGZ1bmN0aW9uIChzb3VyY2VMYWJlbCkge1xuICAgICAgcmV0dXJuIHNvdXJjZUxhYmVsID09IHNvdXJjZS5sYWJlbDtcbiAgICB9KTtcblxuICAgIGlmIChjb250YWluc1NvdXJjZSkge1xuICAgICAgbWVyZ2VTb3VyY2VJZCA9IGN1cnJlbnRNZXJnZVNvdXJjZUlkO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKG1lcmdlU291cmNlSWQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBuZXdSZXF1ZXN0ID0gdHJ1ZTtcbiAgdmFyIG1lcmdlU291cmNlO1xuXG4gIGlmIChtZXJnZVNvdXJjZUlkIGluIG1lcmdlZFNvdXJjZXMpIHtcbiAgICBtZXJnZVNvdXJjZSA9IG1lcmdlZFNvdXJjZXNbbWVyZ2VTb3VyY2VJZF07XG5cbiAgICBpZiAoc291cmNlLnJlcXVlc3RQYXJ0bmVycykge1xuICAgICAgbmV3UmVxdWVzdCA9ICFzb3VyY2UucmVxdWVzdFBhcnRuZXJzLnNvbWUoZnVuY3Rpb24gKGxhYmVsKSB7XG4gICAgICAgIHJldHVybiBtZXJnZVNvdXJjZS5tZXJnZUNvbXBvc2FudHMuaW5jbHVkZXMobGFiZWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbWVyZ2VTb3VyY2UubWVyZ2VDb21wb3NhbnRzLnB1c2goc291cmNlLmxhYmVsKTtcbiAgfSBlbHNlIHtcbiAgICBtZXJnZVNvdXJjZSA9IHtcbiAgICAgIGZlYXR1cmVzOiBbXSxcbiAgICAgIGlkOiBtZXJnZVNvdXJjZUlkLFxuICAgICAgbGFiZWw6IG1lcmdlU291cmNlSWQsXG4gICAgICBsaW1pdDogMCxcbiAgICAgIHBlbmRpbmc6IGZhbHNlLFxuICAgICAgdG9vTWFueVJlc3VsdHM6IGZhbHNlLFxuICAgICAgbWVyZ2VDb21wb3NhbnRzOiBbc291cmNlLmxhYmVsXVxuICAgIH07XG4gICAgbWVyZ2VkU291cmNlc1ttZXJnZVNvdXJjZUlkXSA9IG1lcmdlU291cmNlO1xuICB9XG5cbiAgc291cmNlLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICBtZXJnZVNvdXJjZS5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICB9KTtcbiAgbWVyZ2VTb3VyY2UudG9vTWFueVJlc3VsdHMgPSBtZXJnZVNvdXJjZS50b29NYW55UmVzdWx0cyB8fCBzb3VyY2UudG9vTWFueVJlc3VsdHM7XG5cbiAgaWYgKG5ld1JlcXVlc3QpIHtcbiAgICBpZiAoc291cmNlLnRvdGFsRmVhdHVyZUNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1lcmdlU291cmNlLnRvdGFsRmVhdHVyZUNvdW50ID0gbWVyZ2VTb3VyY2UudG90YWxGZWF0dXJlQ291bnQgIT09IHVuZGVmaW5lZCA/IG1lcmdlU291cmNlLnRvdGFsRmVhdHVyZUNvdW50ICsgc291cmNlLnRvdGFsRmVhdHVyZUNvdW50IDogc291cmNlLnRvdGFsRmVhdHVyZUNvdW50O1xuICAgIH1cblxuICAgIG1lcmdlU291cmNlLmxpbWl0ICs9IHNvdXJjZS5saW1pdDtcbiAgfVxuXG4gIHJldHVybiBtZXJnZVNvdXJjZTtcbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNvbGxlY3REYXRhXyA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgdmFyIGZlYXR1cmVzID0gc291cmNlLmZlYXR1cmVzO1xuICB2YXIgYWxsUHJvcGVydGllcyA9IFtdO1xuICB2YXIgZmVhdHVyZUdlb21ldHJpZXNOYW1lcyA9IFtdO1xuICB2YXIgZmVhdHVyZXNGb3JTb3VyY2UgPSB7fTtcbiAgdmFyIHByb3BlcnRpZXMsIGZlYXR1cmVHZW9tZXRyeU5hbWU7XG4gIGZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICBwcm9wZXJ0aWVzID0gZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCk7XG5cbiAgICBpZiAocHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmZWF0dXJlR2VvbWV0cnlOYW1lID0gZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKTtcblxuICAgICAgaWYgKCFmZWF0dXJlR2VvbWV0cmllc05hbWVzLmluY2x1ZGVzKGZlYXR1cmVHZW9tZXRyeU5hbWUpKSB7XG4gICAgICAgIGZlYXR1cmVHZW9tZXRyaWVzTmFtZXMucHVzaChmZWF0dXJlR2VvbWV0cnlOYW1lKTtcbiAgICAgIH1cblxuICAgICAgYWxsUHJvcGVydGllcy5wdXNoKHByb3BlcnRpZXMpO1xuICAgICAgZmVhdHVyZXNGb3JTb3VyY2VbZ2V0Um93VWlkKHByb3BlcnRpZXMpXSA9IGZlYXR1cmU7XG4gICAgfVxuICB9KTtcbiAgdGhpcy5jbGVhblByb3BlcnRpZXNfKGFsbFByb3BlcnRpZXMsIGZlYXR1cmVHZW9tZXRyaWVzTmFtZXMpO1xuXG4gIGlmIChhbGxQcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgZ3JpZENyZWF0ZWQgPSB0aGlzLm1ha2VHcmlkXyhhbGxQcm9wZXJ0aWVzLCBzb3VyY2UpO1xuXG4gICAgaWYgKGdyaWRDcmVhdGVkKSB7XG4gICAgICB0aGlzLmZlYXR1cmVzRm9yU291cmNlc19bXCJcIiArIHNvdXJjZS5sYWJlbF0gPSBmZWF0dXJlc0ZvclNvdXJjZTtcbiAgICB9XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNsZWFuUHJvcGVydGllc18gPSBmdW5jdGlvbiAoYWxsUHJvcGVydGllcywgZmVhdHVyZUdlb21ldHJpZXNOYW1lcykge1xuICBhbGxQcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgICBmZWF0dXJlR2VvbWV0cmllc05hbWVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmVHZW9tZXRyeU5hbWUpIHtcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2ZlYXR1cmVHZW9tZXRyeU5hbWVdO1xuICAgIH0pO1xuICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmJvdW5kZWRCeTtcbiAgICBkZWxldGUgcHJvcGVydGllcy5uZ2VvX2ZlYXR1cmVfdHlwZV87XG4gIH0pO1xuXG4gIGlmICh0aGlzLm9wdGlvbnMucmVtb3ZlRW1wdHlDb2x1bW5zID09PSB0cnVlKSB7XG4gICAgdGhpcy5yZW1vdmVFbXB0eUNvbHVtbnNGbl8oYWxsUHJvcGVydGllcyk7XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZUVtcHR5Q29sdW1uc0ZuXyA9IGZ1bmN0aW9uIChhbGxQcm9wZXJ0aWVzKSB7XG4gIHZhciBrZXlzVG9LZWVwID0gW107XG4gIHZhciBpLCBrZXk7XG5cbiAgZm9yIChrZXkgaW4gYWxsUHJvcGVydGllc1swXSkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBhbGxQcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYWxsUHJvcGVydGllc1tpXVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5c1RvS2VlcC5wdXNoKGtleSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBrZXlUb1JlbW92ZTtcbiAgYWxsUHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAga2V5VG9SZW1vdmUgPSBbXTtcblxuICAgIGZvciAoa2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmICgha2V5c1RvS2VlcC5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIGtleVRvUmVtb3ZlLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBrZXlUb1JlbW92ZS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2tleV07XG4gICAgfSk7XG4gIH0pO1xufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUubWFrZUdyaWRfID0gZnVuY3Rpb24gKGRhdGEsIHNvdXJjZSkge1xuICB2YXIgc291cmNlTGFiZWwgPSBcIlwiICsgc291cmNlLmxhYmVsO1xuICB2YXIgZ3JpZENvbmZpZyA9IG51bGw7XG5cbiAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICBncmlkQ29uZmlnID0gdGhpcy5nZXRHcmlkQ29uZmlndXJhdGlvbl8oZGF0YSk7XG5cbiAgICBpZiAoZ3JpZENvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghdGhpcy5sb2FkZWRHcmlkU291cmNlcy5pbmNsdWRlcyhzb3VyY2VMYWJlbCkpIHtcbiAgICB0aGlzLmxvYWRlZEdyaWRTb3VyY2VzLnB1c2goc291cmNlTGFiZWwpO1xuICB9XG5cbiAgdGhpcy5ncmlkU291cmNlc1tzb3VyY2VMYWJlbF0gPSB7XG4gICAgc291cmNlOiBzb3VyY2VcbiAgfTtcblxuICBpZiAoZ3JpZENvbmZpZykge1xuICAgIHRoaXMuZ3JpZFNvdXJjZXNbc291cmNlTGFiZWxdLmNvbmZpZ3VyYXRpb24gPSBncmlkQ29uZmlnO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5RdWVyeUdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRHcmlkQ29uZmlndXJhdGlvbl8gPSBmdW5jdGlvbiAoZGF0YSkge1xuICBpZiAoIWRhdGEubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGEnKTtcbiAgfVxuXG4gIHZhciBjbG9uZSA9IHt9O1xuICBPYmplY3QuYXNzaWduKGNsb25lLCBkYXRhWzBdKTtcbiAgZGVsZXRlIGNsb25lLm9sX3VpZDtcbiAgdmFyIGNvbHVtbnMgPSBPYmplY3Qua2V5cyhjbG9uZSk7XG4gIHZhciBjb2x1bW5EZWZzID0gW107XG4gIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7XG4gICAgY29sdW1uRGVmcy5wdXNoKHtcbiAgICAgIG5hbWU6IGNvbHVtblxuICAgIH0pO1xuICB9KTtcblxuICBpZiAoY29sdW1uRGVmcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIG5ldyBuZ2VvR3JpZENvbmZpZyhkYXRhLCBjb2x1bW5EZWZzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0QWN0aXZlR3JpZFNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuc2VsZWN0ZWRUYWIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5ncmlkU291cmNlc1tcIlwiICsgdGhpcy5zZWxlY3RlZFRhYl07XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgdGhpcy5ncmlkU291cmNlcyA9IHt9O1xuICB0aGlzLmxvYWRlZEdyaWRTb3VyY2VzID0gW107XG4gIHRoaXMuc2VsZWN0ZWRUYWIgPSBudWxsO1xuICB0aGlzLnRvb01hbnlSZXN1bHRzID0gZmFsc2U7XG4gIHRoaXMuZmVhdHVyZXNfLmNsZWFyKCk7XG4gIHRoaXMuaGlnaGxpZ2h0RmVhdHVyZXNfLmNsZWFyKCk7XG4gIHRoaXMubmdlb01hcFF1ZXJlbnRfLmNsZWFyKCk7XG4gIHRoaXMuZmVhdHVyZXNGb3JTb3VyY2VzXyA9IHt9O1xuXG4gIGlmICh0aGlzLnVucmVnaXN0ZXJTZWxlY3RXYXRjaGVyXykge1xuICAgIHRoaXMudW5yZWdpc3RlclNlbGVjdFdhdGNoZXJfKCk7XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLnNlbGVjdFRhYiA9IGZ1bmN0aW9uIChncmlkU291cmNlKSB7XG4gIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gIHZhciBzb3VyY2UgPSBncmlkU291cmNlLnNvdXJjZTtcbiAgdGhpcy5zZWxlY3RlZFRhYiA9IHNvdXJjZS5sYWJlbDtcblxuICBpZiAodGhpcy51bnJlZ2lzdGVyU2VsZWN0V2F0Y2hlcl8pIHtcbiAgICB0aGlzLnVucmVnaXN0ZXJTZWxlY3RXYXRjaGVyXygpO1xuICAgIHRoaXMudW5yZWdpc3RlclNlbGVjdFdhdGNoZXJfID0gbnVsbDtcbiAgfVxuXG4gIGlmIChncmlkU291cmNlLmNvbmZpZ3VyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudW5yZWdpc3RlclNlbGVjdFdhdGNoZXJfID0gdGhpcy4kc2NvcGVfLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGdyaWRTb3VyY2UuY29uZmlndXJhdGlvbi5zZWxlY3RlZFJvd3M7XG4gICAgfSwgZnVuY3Rpb24gKG5ld1NlbGVjdGVkLCBvbGRTZWxlY3RlZFJvd3MpIHtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhuZXdTZWxlY3RlZCkgIT09IE9iamVjdC5rZXlzKG9sZFNlbGVjdGVkUm93cykpIHtcbiAgICAgICAgX3RoaXM1Lm9uU2VsZWN0aW9uQ2hhbmdlZF8oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHRoaXMudXBkYXRlRmVhdHVyZXNfKGdyaWRTb3VyY2UpO1xuICB0aGlzLnJlZmxvd0dyaWRfKCk7XG59O1xuXG5RdWVyeUdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5yZWZsb3dHcmlkXyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGlkID0gdGhpcy5lc2NhcGVWYWx1ZSh0aGlzLnNlbGVjdGVkVGFiIHx8ICcnKTtcbiAgdmFyIGFjdGl2ZVBhbmUgPSB0aGlzLiRlbGVtZW50Xy5maW5kKFwiZGl2LnRhYi1wYW5lI1wiICsgaWQpO1xuICBhY3RpdmVQYW5lLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gIHRoaXMuJHRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICBhY3RpdmVQYW5lLmZpbmQoJ2Rpdi5uZ2VvLWdyaWQtdGFibGUtY29udGFpbmVyIHRhYmxlJykudHJpZ2dlcigncmVmbG93Jyk7XG4gIH0pO1xufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuc2VsZWN0ZWRUYWIgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZ3JpZFNvdXJjZSA9IHRoaXMuZ3JpZFNvdXJjZXNbXCJcIiArIHRoaXMuc2VsZWN0ZWRUYWJdO1xuICB0aGlzLnVwZGF0ZUZlYXR1cmVzXyhncmlkU291cmNlKTtcbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZUZlYXR1cmVzXyA9IGZ1bmN0aW9uIChncmlkU291cmNlKSB7XG4gIHRoaXMuZmVhdHVyZXNfLmNsZWFyKCk7XG4gIHRoaXMuaGlnaGxpZ2h0RmVhdHVyZXNfLmNsZWFyKCk7XG5cbiAgaWYgKCFncmlkU291cmNlLmNvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc291cmNlTGFiZWwgPSBcIlwiICsgZ3JpZFNvdXJjZS5zb3VyY2UubGFiZWw7XG4gIHZhciBmZWF0dXJlc0ZvclNvdXJjZSA9IHRoaXMuZmVhdHVyZXNGb3JTb3VyY2VzX1tzb3VyY2VMYWJlbF07XG4gIHZhciBzZWxlY3RlZFJvd3MgPSBncmlkU291cmNlLmNvbmZpZ3VyYXRpb24uc2VsZWN0ZWRSb3dzO1xuXG4gIGZvciAodmFyIHJvd0lkIGluIGZlYXR1cmVzRm9yU291cmNlKSB7XG4gICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc0ZvclNvdXJjZVtyb3dJZF07XG5cbiAgICBpZiAocm93SWQgaW4gc2VsZWN0ZWRSb3dzKSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodEZlYXR1cmVzXy5wdXNoKGZlYXR1cmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZlYXR1cmVzXy5wdXNoKGZlYXR1cmUpO1xuICAgIH1cbiAgfVxufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUuaXNPbmVTZWxlY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0QWN0aXZlR3JpZFNvdXJjZSgpO1xuXG4gIGlmIChzb3VyY2UgPT09IG51bGwgfHwgc291cmNlLmNvbmZpZ3VyYXRpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHNvdXJjZS5jb25maWd1cmF0aW9uLmdldFNlbGVjdGVkQ291bnQoKSA+IDA7XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmdldFNlbGVjdGVkUm93Q291bnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzLmdldEFjdGl2ZUdyaWRTb3VyY2UoKTtcblxuICBpZiAoc291cmNlID09PSBudWxsIHx8IHNvdXJjZS5jb25maWd1cmF0aW9uID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHNvdXJjZS5jb25maWd1cmF0aW9uLmdldFNlbGVjdGVkQ291bnQoKTtcbiAgfVxufTtcblxuUXVlcnlHcmlkQ29udHJvbGxlci5wcm90b3R5cGUuc2VsZWN0QWxsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc291cmNlID0gdGhpcy5nZXRBY3RpdmVHcmlkU291cmNlKCk7XG5cbiAgaWYgKHNvdXJjZSAhPT0gbnVsbCkge1xuICAgIHNvdXJjZS5jb25maWd1cmF0aW9uLnNlbGVjdEFsbCgpO1xuICB9XG59O1xuXG5RdWVyeUdyaWRDb250cm9sbGVyLnByb3RvdHlwZS51bnNlbGVjdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0QWN0aXZlR3JpZFNvdXJjZSgpO1xuXG4gIGlmIChzb3VyY2UgIT09IG51bGwpIHtcbiAgICBzb3VyY2UuY29uZmlndXJhdGlvbi51bnNlbGVjdEFsbCgpO1xuICB9XG59O1xuXG5RdWVyeUdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5pbnZlcnRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzLmdldEFjdGl2ZUdyaWRTb3VyY2UoKTtcblxuICBpZiAoc291cmNlICE9PSBudWxsKSB7XG4gICAgc291cmNlLmNvbmZpZ3VyYXRpb24uaW52ZXJ0U2VsZWN0aW9uKCk7XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLnpvb21Ub1NlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLm1hcF8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gIH1cblxuICB2YXIgc291cmNlID0gdGhpcy5nZXRBY3RpdmVHcmlkU291cmNlKCk7XG5cbiAgaWYgKHNvdXJjZSAhPT0gbnVsbCkge1xuICAgIHZhciBleHRlbnQgPSBvbEV4dGVudC5jcmVhdGVFbXB0eSgpO1xuICAgIHRoaXMuaGlnaGxpZ2h0RmVhdHVyZXNfLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgaWYgKCFnZW9tZXRyeSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICAgIH1cblxuICAgICAgb2xFeHRlbnQuZXh0ZW5kKGV4dGVudCwgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpO1xuICAgIH0pO1xuICAgIHZhciBzaXplID0gdGhpcy5tYXBfLmdldFNpemUoKTtcblxuICAgIGlmICghc2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNpemUnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1hcF8uZ2V0VmlldygpLmZpdChleHRlbnQsIHtcbiAgICAgIHNpemU6IHNpemUsXG4gICAgICBtYXhab29tOiB0aGlzLm9wdGlvbnMubWF4UmVjZW50ZXJab29tXG4gICAgfSk7XG4gIH1cbn07XG5cblF1ZXJ5R3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmRvd25sb2FkQ3N2ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc291cmNlID0gdGhpcy5nZXRBY3RpdmVHcmlkU291cmNlKCk7XG5cbiAgaWYgKHNvdXJjZSAhPT0gbnVsbCkge1xuICAgIHZhciBjb2x1bW5EZWZzID0gc291cmNlLmNvbmZpZ3VyYXRpb24uY29sdW1uRGVmcztcblxuICAgIGlmICghY29sdW1uRGVmcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbHVtbkRlZnMnKTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0ZWRSb3dzID0gc291cmNlLmNvbmZpZ3VyYXRpb24uZ2V0U2VsZWN0ZWRSb3dzKCk7XG4gICAgdGhpcy5uZ2VvQ3N2RG93bmxvYWRfLnN0YXJ0RG93bmxvYWQoc2VsZWN0ZWRSb3dzLCBjb2x1bW5EZWZzLCB0aGlzLmZpbGVuYW1lXyk7XG4gIH1cbn07XG5cbm15TW9kdWxlLmNvbnRyb2xsZXIoJ0dtZkRpc3BsYXlxdWVyeWdyaWRDb250cm9sbGVyJywgUXVlcnlHcmlkQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwic3Bpbm5lci13aW5kb3dcIiBuZy1pZj1cImN0cmwuaXNMb2FkaW5nXCI+XFxuICA8aSBjbGFzcz1cImZhIGZhLXNwaW5cIj5cXG4gICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvc3Bpbm5lci5zdmc/dmlld2JveCZoZWlnaHQ9M3JlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nXFxuICA8L2k+XFxuPC9kaXY+XFxuXFxuPGRpdlxcbiAgY2xhc3M9XCJnbWYtZGlzcGxheXF1ZXJ5d2luZG93XCJcXG4gIG5nLWNsYXNzPVwie1xcJ2Rlc2t0b3BcXCc6IGN0cmwuZGVza3RvcCwgXFwnbW9iaWxlXFwnOiAhY3RybC5kZXNrdG9wfVwiXFxuICBuZy1zaG93PVwiY3RybC5vcGVuXCI+XFxuXFxuICA8YnV0dG9uXFxuICAgIGNsYXNzPVwiY29sbGFwc2UtYnV0dG9uXCJcXG4gICAgdHlwZT1cImJ1dHRvblwiXFxuICAgIG5nLXNob3c9XCI6OiFjdHJsLmRlc2t0b3BcIlxcbiAgICBuZ2VvLXN3aXBlLXVwPVwiY3RybC5jb2xsYXBzZWQgPSBmYWxzZVwiXFxuICAgIG5nZW8tc3dpcGUtZG93bj1cImN0cmwuY29sbGFwc2VkID0gdHJ1ZVwiXFxuICAgIG5nZW8tc3dpcGUtZGlzYWJsZS1tb3VzZVxcbiAgICBuZy1jbGljaz1cImN0cmwuY29sbGFwc2VkID0gIWN0cmwuY29sbGFwc2VkXCJcXG4gICAgbmctY2xhc3M9XCJbY3RybC5jb2xsYXBzZWQgPyBcXCdjb2xsYXBzZS1idXR0b24tdXBcXCcgOiBcXCdjb2xsYXBzZS1idXR0b24tZG93blxcJ11cIj5cXG4gIDwvYnV0dG9uPlxcblxcbiAgPGRpdlxcbiAgY2xhc3M9XCJ3aW5kb3djb250YWluZXJcIlxcbiAgbmctc3dpcGUtZGlzYWJsZS1tb3VzZVxcbiAgbmctc3dpcGUtbGVmdD1cImN0cmwubmV4dCgpXCJcXG4gIG5nLXN3aXBlLXJpZ2h0PVwiY3RybC5wcmV2aW91cygpXCI+XFxuXFxuICAgIDxidXR0b25cXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgICBjbGFzcz1cImJ0biBmYS10aW1lcyBjbG9zZVwiXFxuICAgICAgbmctY2xpY2s9XCJjdHJsLmNsb3NlKClcIj5cXG4gICAgPC9idXR0b24+XFxuXFxuICAgIDxkaXZcXG4gICAgICBjbGFzcz1cImFuaW1hdGlvbi1jb250YWluZXJcIlxcbiAgICAgIG5nLWNsYXNzPVwiW2N0cmwuY29sbGFwc2VkID8gXFwnXFwnIDogXFwnYW5pbWF0aW9uLWNvbnRhaW5lci1kZXRhaWxlZFxcJywgY3RybC5pc05leHQgPyBcXCduZXh0XFwnIDogXFwncHJldmlvdXNcXCddXCI+XFxuXFxuICAgICAgPGRpdlxcbiAgICAgICAgbmctYW5pbWF0ZS1zd2FwPVwiY3RybC5hbmltYXRlXCJcXG4gICAgICAgIGNsYXNzPVwic2xpZGUtYW5pbWF0aW9uIGdtZi1hbmltYXRhYmxlXCI+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyIHVpLWRyYWdnYWJsZS1oYW5kbGVcIj5cXG4gICAgICAgICAgPHBcXG4gICAgICAgICAgICBjbGFzcz1cInRpdGxlXCJcXG4gICAgICAgICAgICA+e3tjdHJsLnNvdXJjZS5sYWJlbCB8IHRyYW5zbGF0ZX19PC9wPlxcbiAgICAgICAgICA8cFxcbiAgICAgICAgICAgIGNsYXNzPVwic3VidGl0bGVcIlxcbiAgICAgICAgICAgID57e2N0cmwuZ2V0RmVhdHVyZVZhbHVlcygpW2N0cmwuc291cmNlLmlkZW50aWZpZXJBdHRyaWJ1dGVGaWVsZF19fTwvcD5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbHNcIj5cXG4gICAgICAgICAgPHRhYmxlPlxcbiAgICAgICAgICAgIDx0clxcbiAgICAgICAgICAgICAgbmctcmVwZWF0PVwiKGtleSwgdmFsdWUpIGluIGN0cmwuZ2V0RmVhdHVyZVZhbHVlcygpXCJcXG4gICAgICAgICAgICAgIG5nLWlmPVwidmFsdWUgIT09IHVuZGVmaW5lZFwiPlxcbiAgICAgICAgICAgICAgPHRkXFxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZGV0YWlscy1rZXlcIlxcbiAgICAgICAgICAgICAgICBuZy1iaW5kLWh0bWw9XCJrZXkgfCB0cmFuc2xhdGUgfCBuZ2VvVHJ1c3RIdG1sXCJcXG4gICAgICAgICAgICAgICAgPjwvdGQ+XFxuICAgICAgICAgICAgICA8dGRcXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkZXRhaWxzLXZhbHVlXCJcXG4gICAgICAgICAgICAgICAgbmctYmluZC1odG1sPVwidmFsdWUgfCByZW1vdmVDREFUQSB8IG5nZW9UcnVzdEh0bWxBdXRvXCJcXG4gICAgICAgICAgICAgICAgPjwvdGQ+XFxuICAgICAgICAgICAgPC90cj5cXG4gICAgICAgICAgPC90YWJsZT5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cIm5hdmlnYXRlXCI+XFxuXFxuICAgICAgPGRpdiBjbGFzcz1cInBsYWNlaG9sZGVyXCI+XFxuICAgICAgICA8YnV0dG9uXFxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxcbiAgICAgICAgICBjbGFzcz1cInByZXZpb3VzIGJ0blwiXFxuICAgICAgICAgIG5nLWRpc2FibGVkPVwiY3RybC5pc0ZpcnN0KClcIlxcbiAgICAgICAgICBuZy1zaG93PVwiY3RybC5nZXRSZXN1bHRMZW5ndGgoKSA+IDFcIlxcbiAgICAgICAgICBuZy1jbGljaz1cImN0cmwucHJldmlvdXMoKVwiPlxcbiAgICAgICAgICA8c3BhbiBuZy1zaG93PVwiOjpjdHJsLmRlc2t0b3BcIj57e1xcJ1ByZXYuXFwnIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgICA8L2Rpdj5cXG5cXG4gICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0c1wiPlxcbiAgICAgICAgPHNwYW4gbmctc2hvdz1cIjo6IWN0cmwuZGVza3RvcFwiPnt7XFwnUmVzdWx0XFwnIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuICAgICAgICA8c3Bhbj57e2N0cmwuY3VycmVudFJlc3VsdCArIDF9fTwvc3Bhbj5cXG4gICAgICAgIDxzcGFuPi88L3NwYW4+XFxuICAgICAgICA8c3Bhbj57e2N0cmwuZ2V0UmVzdWx0TGVuZ3RoKCl9fTwvc3Bhbj5cXG5cXG4gICAgICAgIDxkaXZcXG4gICAgICAgICAgbmctc2hvdz1cIjo6Y3RybC5kZXNrdG9wXCJcXG4gICAgICAgICAgY2xhc3M9XCJkcm9wdXBcIj5cXG5cXG4gICAgICAgICAgPGJ1dHRvblxcbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGRyb3Bkb3duLXRvZ2dsZVwiXFxuICAgICAgICAgICAgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXFxuICAgICAgICAgICAgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1maWx0ZXJcIj48L3NwYW4+XFxuICAgICAgICAgIDwvYnV0dG9uPlxcblxcbiAgICAgICAgICA8dWxcXG4gICAgICAgICAgICBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1yaWdodFwiXFxuICAgICAgICAgICAgcm9sZT1cIm1lbnVcIj5cXG5cXG4gICAgICAgICAgICA8bGk+XFxuICAgICAgICAgICAgICA8YVxcbiAgICAgICAgICAgICAgICBocmVmPVwiI1wiXFxuICAgICAgICAgICAgICAgIG5nLWNsaWNrPVwiY3RybC5zZXRTZWxlY3RlZFNvdXJjZShudWxsKVwiPlxcbiAgICAgICAgICAgICAgICA8aVxcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZmEgZmEtZndcIlxcbiAgICAgICAgICAgICAgICAgIG5nLWNsYXNzPVwie1xcJ2ZhLWNoZWNrXFwnOiBjdHJsLnNlbGVjdGVkU291cmNlID09PSBudWxsfVwiPlxcbiAgICAgICAgICAgICAgICA8L2k+XFxuICAgICAgICAgICAgICAgIDxzcGFuPnt7XFwnQWxsIGxheWVyc1xcJyB8IHRyYW5zbGF0ZX19ICh7e2N0cmwubmdlb1F1ZXJ5UmVzdWx0LnRvdGFsfX0pPC9zcGFuPlxcbiAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgIDwvbGk+XFxuXFxuICAgICAgICAgICAgPGxpXFxuICAgICAgICAgICAgICByb2xlPVwic2VwYXJhdG9yXCJcXG4gICAgICAgICAgICAgIGNsYXNzPVwiZGl2aWRlclwiPlxcbiAgICAgICAgICAgIDwvbGk+XFxuXFxuICAgICAgICAgICAgPGxpXFxuICAgICAgICAgICAgICBuZy1yZXBlYXQtc3RhcnQ9XCJzb3VyY2UgaW4gY3RybC5uZ2VvUXVlcnlSZXN1bHQuc291cmNlc1wiIG5nLXJlcGVhdC1lbmRcXG4gICAgICAgICAgICAgIG5nLWNsYXNzPVwie1xcJ2Rpc2FibGVkXFwnOiBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoIDw9IDB9XCI+XFxuICAgICAgICAgICAgICA8YVxcbiAgICAgICAgICAgICAgICBocmVmPVwiI1wiXFxuICAgICAgICAgICAgICAgIG5nLWNsaWNrPVwiY3RybC5zZXRTZWxlY3RlZFNvdXJjZShzb3VyY2UpXCI+XFxuICAgICAgICAgICAgICAgIDxpXFxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmYSBmYS1md1wiXFxuICAgICAgICAgICAgICAgICAgbmctY2xhc3M9XCJ7XFwnZmEtY2hlY2tcXCc6IGN0cmwuc2VsZWN0ZWRTb3VyY2UgPT09IHNvdXJjZX1cIj5cXG4gICAgICAgICAgICAgICAgPC9pPlxcbiAgICAgICAgICAgICAgICA8c3Bhbj57e3NvdXJjZS5sYWJlbCB8IHRyYW5zbGF0ZX19ICh7e3NvdXJjZS5mZWF0dXJlcy5sZW5ndGh9fSk8L3NwYW4+XFxuICAgICAgICAgICAgICA8L2E+XFxuICAgICAgICAgICAgPC9saT5cXG4gICAgICAgICAgPC91bD5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgPGRpdlxcbiAgICAgICAgICBuZy1zaG93PVwiOjpjdHJsLmRlc2t0b3BcIlxcbiAgICAgICAgICBjbGFzcz1cImRyb3B1cFwiPlxcblxcbiAgICAgICAgICA8YnV0dG9uXFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXFxuICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgZHJvcGRvd24tdG9nZ2xlXCJcXG4gICAgICAgICAgICBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJcXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWRvd25sb2FkXCI+PC9zcGFuPlxcbiAgICAgICAgICA8L2J1dHRvbj5cXG5cXG4gICAgICAgICAgPHVsXFxuICAgICAgICAgICAgY2xhc3M9XCJkcm9wZG93bi1tZW51IGRyb3Bkb3duLW1lbnUtcmlnaHRcIlxcbiAgICAgICAgICAgIHJvbGU9XCJtZW51XCI+XFxuICAgICAgICAgICAgPGxpXFxuICAgICAgICAgICAgICBuZy1yZXBlYXQtc3RhcnQ9XCJzb3VyY2UgaW4gY3RybC5uZ2VvUXVlcnlSZXN1bHQuc291cmNlc1wiIG5nLXJlcGVhdC1lbmRcXG4gICAgICAgICAgICAgIG5nLWNsYXNzPVwie1xcJ2Rpc2FibGVkXFwnOiBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoIDw9IDB9XCI+XFxuICAgICAgICAgICAgICA8YVxcbiAgICAgICAgICAgICAgICBocmVmPVwiI1wiXFxuICAgICAgICAgICAgICAgIG5nLWNsaWNrPVwiY3RybC5kb3dubG9hZENTVihzb3VyY2UpXCI+XFxuICAgICAgICAgICAgICAgIDxzcGFuPnt7XFwnRXhwb3J0XFwnIHwgdHJhbnNsYXRlfX0ge3tzb3VyY2UubGFiZWwgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICA8L2xpPlxcbiAgICAgICAgICA8L3VsPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuXFxuICAgICAgPGRpdiBjbGFzcz1cInBsYWNlaG9sZGVyXCI+XFxuICAgICAgICA8YnV0dG9uXFxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxcbiAgICAgICAgICBjbGFzcz1cIm5leHQgYnRuXCJcXG4gICAgICAgICAgbmctZGlzYWJsZWQ9XCJjdHJsLmlzTGFzdCgpXCJcXG4gICAgICAgICAgbmctc2hvdz1cImN0cmwuZ2V0UmVzdWx0TGVuZ3RoKCkgPiAxXCJcXG4gICAgICAgICAgbmctY2xpY2s9XCJjdHJsLm5leHQoKVwiPlxcbiAgICAgICAgICA8c3BhbiBuZy1zaG93PVwiOjpjdHJsLmRlc2t0b3BcIj57e1xcJ05leHRcXCcgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2Plxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJRdWVyeVdpbmRvd0NvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRlbGVtZW50XCIsIFwiJHNjb3BlXCIsIFwibmdlb1F1ZXJ5UmVzdWx0XCIsIFwibmdlb01hcFF1ZXJlbnRcIiwgXCJuZ2VvQ3N2RG93bmxvYWRcIiwgXCJuZ2VvRmVhdHVyZU92ZXJsYXlNZ3JcIiwgXCJnbWZDc3ZGaWxlbmFtZVwiLCBcImdtZkRpc3BsYXlRdWVyeVdpbmRvd09wdGlvbnNcIl07XG5cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0Rvd25sb2FkQ3N2IGZyb20gJ25nZW8vZG93bmxvYWQvQ3N2LmpzJztcbmltcG9ydCBuZ2VvRG93bmxvYWRTZXJ2aWNlIGZyb20gJ25nZW8vZG93bmxvYWQvc2VydmljZS5qcyc7XG5pbXBvcnQgbmdlb01hcEZlYXR1cmVPdmVybGF5TWdyIGZyb20gJ25nZW8vbWFwL0ZlYXR1cmVPdmVybGF5TWdyLmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZlYXR1cmVIZWxwZXIsIHsgZ2V0RmlsdGVyZWRGZWF0dXJlVmFsdWVzIH0gZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjU3dpcGUgZnJvbSAnbmdlby9taXNjL3N3aXBlLmpzJztcbmltcG9ydCBuZ2VvUXVlcnlNYXBRdWVyZW50IGZyb20gJ25nZW8vcXVlcnkvTWFwUXVlcmVudC5qcyc7XG5pbXBvcnQgb2xDb2xsZWN0aW9uIGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ29sL29iai5qcyc7XG5pbXBvcnQgeyBidWlsZFN0eWxlIH0gZnJvbSAnbmdlby9vcHRpb25zLmpzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvcmVzaXphYmxlLmpzJztcbmltcG9ydCAnbmdlby9zYXNzL2pxdWVyeS11aS5zY3NzJztcbmltcG9ydCAnYW5ndWxhci1hbmltYXRlJztcbmltcG9ydCAnYW5ndWxhci10b3VjaCc7XG5pbXBvcnQgJ2Jvb3RzdHJhcC9qcy9zcmMvY29sbGFwc2UuanMnO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2Ryb3Bkb3duLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZRdWVyeVdpbmRvd0NvbXBvbmVudCcsIFtuZ2VvRG93bmxvYWRDc3YubmFtZSwgbmdlb0Rvd25sb2FkU2VydmljZS5uYW1lLCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXlNZ3IubmFtZSwgbmdlb01pc2NGZWF0dXJlSGVscGVyLm5hbWUsIG5nZW9NaXNjU3dpcGUubmFtZSwgbmdlb1F1ZXJ5TWFwUXVlcmVudC5uYW1lLCAnbmdBbmltYXRlJywgJ25nVG91Y2gnXSk7XG5teU1vZHVsZS5jb25maWcoWyckYW5pbWF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRhbmltYXRlUHJvdmlkZXIpIHtcbiAgJGFuaW1hdGVQcm92aWRlci5jbGFzc05hbWVGaWx0ZXIoL2dtZi1hbmltYXRhYmxlLyk7XG59XSk7XG5teU1vZHVsZS52YWx1ZSgnZ21mRGlzcGxheXF1ZXJ5d2luZG93VGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGVsZW1lbnQsICRhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSAkYXR0cnMuZ21mRGlzcGxheXF1ZXJ5d2luZG93VGVtcGxhdGV1cmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnZ21mL3F1ZXJ5L3dpbmRvd0NvbXBvbmVudCc7XG59KTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdnbWYvcXVlcnkvd2luZG93Q29tcG9uZW50JywgcmVxdWlyZSgnLi93aW5kb3dDb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcbmdtZkRpc3BsYXlxdWVyeXdpbmRvd1RlbXBsYXRlVXJsLiRpbmplY3QgPSBbXCIkZWxlbWVudFwiLCBcIiRhdHRyc1wiLCBcImdtZkRpc3BsYXlxdWVyeXdpbmRvd1RlbXBsYXRlVXJsXCJdO1xuXG5mdW5jdGlvbiBnbWZEaXNwbGF5cXVlcnl3aW5kb3dUZW1wbGF0ZVVybCgkZWxlbWVudCwgJGF0dHJzLCBnbWZEaXNwbGF5cXVlcnl3aW5kb3dUZW1wbGF0ZVVybCkge1xuICByZXR1cm4gZ21mRGlzcGxheXF1ZXJ5d2luZG93VGVtcGxhdGVVcmwoJGVsZW1lbnQsICRhdHRycyk7XG59XG5cbnZhciBxdWVyeVdpbmRvd0NvbXBvbmVudCA9IHtcbiAgY29udHJvbGxlcjogJ0dtZkRpc3BsYXlxdWVyeXdpbmRvd0NvbnRyb2xsZXIgYXMgY3RybCcsXG4gIGJpbmRpbmdzOiB7XG4gICAgJ2RyYWdnYWJsZUNvbnRhaW5tZW50JzogJzw/Z21mRGlzcGxheXF1ZXJ5d2luZG93RHJhZ2dhYmxlQ29udGFpbm1lbnQnLFxuICAgICdkZXNrdG9wJzogJz1nbWZEaXNwbGF5cXVlcnl3aW5kb3dEZXNrdG9wJ1xuICB9LFxuICB0ZW1wbGF0ZVVybDogZ21mRGlzcGxheXF1ZXJ5d2luZG93VGVtcGxhdGVVcmxcbn07XG5teU1vZHVsZS5jb21wb25lbnQoJ2dtZkRpc3BsYXlxdWVyeXdpbmRvdycsIHF1ZXJ5V2luZG93Q29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBRdWVyeVdpbmRvd0NvbnRyb2xsZXIoJGVsZW1lbnQsICRzY29wZSwgbmdlb1F1ZXJ5UmVzdWx0LCBuZ2VvTWFwUXVlcmVudCwgbmdlb0NzdkRvd25sb2FkLCBuZ2VvRmVhdHVyZU92ZXJsYXlNZ3IsIGdtZkNzdkZpbGVuYW1lLCBnbWZEaXNwbGF5UXVlcnlXaW5kb3dPcHRpb25zKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5vcHRpb25zID0gZ21mRGlzcGxheVF1ZXJ5V2luZG93T3B0aW9ucztcbiAgdGhpcy5kcmFnZ2FibGVDb250YWlubWVudCA9ICcnO1xuICB0aGlzLmRlc2t0b3AgPSBmYWxzZTtcbiAgdGhpcy5jb2xsYXBzZWQgPSBmYWxzZTtcbiAgdGhpcy5uZ2VvUXVlcnlSZXN1bHQgPSB7XG4gICAgc291cmNlczogW10sXG4gICAgdG90YWw6IDAsXG4gICAgcGVuZGluZzogZmFsc2VcbiAgfTtcbiAgdGhpcy5uZ2VvTWFwUXVlcmVudF8gPSBuZ2VvTWFwUXVlcmVudDtcbiAgdGhpcy5uZ2VvQ3N2RG93bmxvYWRfID0gbmdlb0NzdkRvd25sb2FkO1xuICB0aGlzLmZpbGVuYW1lXyA9IGdtZkNzdkZpbGVuYW1lO1xuICB0aGlzLnNlbGVjdGVkU291cmNlID0gbnVsbDtcbiAgdGhpcy5mZWF0dXJlc18gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gIHRoaXMubmdlb0ZlYXR1cmVPdmVybGF5TWdyXyA9IG5nZW9GZWF0dXJlT3ZlcmxheU1ncjtcbiAgdGhpcy5oaWdobGlnaHRGZWF0dXJlc18gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gIHRoaXMuc291cmNlID0gbnVsbDtcbiAgdGhpcy5mZWF0dXJlID0gbnVsbDtcbiAgdGhpcy5jdXJyZW50UmVzdWx0ID0gLTE7XG4gIHRoaXMuaXNOZXh0ID0gdHJ1ZTtcbiAgdGhpcy5hbmltYXRlID0gMDtcbiAgdGhpcy5vcGVuID0gZmFsc2U7XG4gIHRoaXMuZWxlbWVudF8gPSAkZWxlbWVudDtcbiAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZ2VvUXVlcnlSZXN1bHQ7XG4gIH0sIGZ1bmN0aW9uIChuZXdRdWVyeVJlc3VsdCwgb2xkUXVlcnlSZXN1bHQpIHtcbiAgICBfdGhpcy5pc0xvYWRpbmcgPSBuZXdRdWVyeVJlc3VsdC5wZW5kaW5nO1xuXG4gICAgX3RoaXMudXBkYXRlUXVlcnlSZXN1bHRfKG5ld1F1ZXJ5UmVzdWx0KTtcblxuICAgIGlmIChuZXdRdWVyeVJlc3VsdC50b3RhbCA+IDApIHtcbiAgICAgIF90aGlzLnNob3coKTtcbiAgICB9IGVsc2UgaWYgKG9sZFF1ZXJ5UmVzdWx0ICE9PSBuZXdRdWVyeVJlc3VsdCkge1xuICAgICAgX3RoaXMub3BlbiA9IGZhbHNlO1xuXG4gICAgICBfdGhpcy5jbGVhcigpO1xuICAgIH1cbiAgfSk7XG59XG5cblF1ZXJ5V2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jb2xsYXBzZWQgPSB0aGlzLm9wdGlvbnMuY29sbGFwc2VkID09PSB1bmRlZmluZWQgPyAhdGhpcy5kZXNrdG9wIDogdGhpcy5vcHRpb25zLmNvbGxhcHNlZDtcbiAgdGhpcy5kcmFnZ2FibGVDb250YWlubWVudCA9IHRoaXMuZHJhZ2dhYmxlQ29udGFpbm1lbnQgfHwgJ2RvY3VtZW50JztcbiAgdmFyIGZlYXR1cmVzT3ZlcmxheSA9IHRoaXMubmdlb0ZlYXR1cmVPdmVybGF5TWdyXy5nZXRGZWF0dXJlT3ZlcmxheSgpO1xuICBmZWF0dXJlc092ZXJsYXkuc2V0RmVhdHVyZXModGhpcy5mZWF0dXJlc18pO1xuICBmZWF0dXJlc092ZXJsYXkuc2V0U3R5bGUoYnVpbGRTdHlsZSh0aGlzLm9wdGlvbnMuZmVhdHVyZXNTdHlsZSkpO1xuICB2YXIgaGlnaGxpZ2h0RmVhdHVyZXNPdmVybGF5ID0gdGhpcy5uZ2VvRmVhdHVyZU92ZXJsYXlNZ3JfLmdldEZlYXR1cmVPdmVybGF5KCk7XG4gIGhpZ2hsaWdodEZlYXR1cmVzT3ZlcmxheS5zZXRGZWF0dXJlcyh0aGlzLmhpZ2hsaWdodEZlYXR1cmVzXyk7XG4gIGhpZ2hsaWdodEZlYXR1cmVzT3ZlcmxheS5zZXRTdHlsZShidWlsZFN0eWxlKHRoaXMub3B0aW9ucy5zZWxlY3RlZEZlYXR1cmVTdHlsZSkpO1xuICB2YXIgd2luZG93Q29udGFpbmVyID0gdGhpcy5lbGVtZW50Xy5maW5kKCcuZ21mLWRpc3BsYXlxdWVyeXdpbmRvdyAud2luZG93Y29udGFpbmVyJyk7XG5cbiAgaWYgKHRoaXMuZGVza3RvcCkge1xuICAgIHdpbmRvd0NvbnRhaW5lci5kcmFnZ2FibGUoe1xuICAgICAgaGFuZGxlOiAnLmhlYWRlcicsXG4gICAgICBjb250YWlubWVudDogdGhpcy5kcmFnZ2FibGVDb250YWlubWVudFxuICAgIH0pO1xuICAgIHdpbmRvd0NvbnRhaW5lci5yZXNpemFibGUoe1xuICAgICAgaGFuZGxlczogJ2FsbCcsXG4gICAgICBtaW5IZWlnaHQ6IDI0MCxcbiAgICAgIG1pbldpZHRoOiAyNjBcbiAgICB9KTtcbiAgfVxufTtcblxuUXVlcnlXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNsZWFyKCk7XG4gIHRoaXMudXBkYXRlRmVhdHVyZXNfKCk7XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZUZlYXR1cmVzXyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5zZXRDdXJyZW50UmVzdWx0XygwLCBmYWxzZSk7XG5cbiAgaWYgKHRoaXMuc291cmNlICE9PSBudWxsKSB7XG4gICAgdGhpcy5jb2xsZWN0RmVhdHVyZXNfKCk7XG4gICAgdGhpcy5oaWdobGlnaHRDdXJyZW50RmVhdHVyZV8oKTtcbiAgICB0aGlzLm9wZW4gPSB0cnVlO1xuICB9XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnNldEN1cnJlbnRSZXN1bHRfID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBzZXRIaWdobGlnaHQpIHtcbiAgdmFyIGhhc0NoYW5nZWQgPSBmYWxzZTtcblxuICBpZiAocG9zaXRpb24gIT09IHRoaXMuY3VycmVudFJlc3VsdCkge1xuICAgIHZhciBpLCBzb3VyY2UsIGZlYXR1cmVzO1xuICAgIHZhciBsYXN0RmVhdHVyZSA9IHRoaXMuZmVhdHVyZTtcbiAgICB2YXIgc291cmNlcyA9IHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnNvdXJjZXM7XG4gICAgdGhpcy5jdXJyZW50UmVzdWx0ID0gcG9zaXRpb247XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgc291cmNlID0gc291cmNlc1tpXTtcblxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTb3VyY2UgIT09IG51bGwgJiYgdGhpcy5zZWxlY3RlZFNvdXJjZSAhPT0gc291cmNlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBmZWF0dXJlcyA9IHNvdXJjZS5mZWF0dXJlcztcblxuICAgICAgaWYgKHBvc2l0aW9uID49IGZlYXR1cmVzLmxlbmd0aCkge1xuICAgICAgICBwb3NpdGlvbiAtPSBmZWF0dXJlcy5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5mZWF0dXJlID0gc291cmNlLmZlYXR1cmVzW3Bvc2l0aW9uXTtcbiAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZXRIaWdobGlnaHQpIHtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0Q3VycmVudEZlYXR1cmVfKGxhc3RGZWF0dXJlIHx8IHVuZGVmaW5lZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGhhc0NoYW5nZWQ7XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcG9zaXRpb24gPSB0aGlzLmN1cnJlbnRSZXN1bHQgLSAxO1xuXG4gIGlmIChwb3NpdGlvbiA8IDApIHtcbiAgICBwb3NpdGlvbiA9IHRoaXMuZ2V0UmVzdWx0TGVuZ3RoKCkgLSAxO1xuICB9XG5cbiAgdmFyIGhhc0NoYW5nZWQgPSB0aGlzLnNldEN1cnJlbnRSZXN1bHRfKHBvc2l0aW9uLCB0cnVlKTtcblxuICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgIHRoaXMuYW5pbWF0ZV8oZmFsc2UpO1xuICB9XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwb3NpdGlvbiA9IHRoaXMuY3VycmVudFJlc3VsdCArIDE7XG4gIHZhciBwb3NpdGlvbk1heCA9IHRoaXMuZ2V0UmVzdWx0TGVuZ3RoKCkgLSAxO1xuXG4gIGlmIChwb3NpdGlvbiA+IHBvc2l0aW9uTWF4KSB7XG4gICAgcG9zaXRpb24gPSAwO1xuICB9XG5cbiAgdmFyIGhhc0NoYW5nZWQgPSB0aGlzLnNldEN1cnJlbnRSZXN1bHRfKHBvc2l0aW9uLCB0cnVlKTtcblxuICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgIHRoaXMuYW5pbWF0ZV8odHJ1ZSk7XG4gIH1cbn07XG5cblF1ZXJ5V2luZG93Q29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlUXVlcnlSZXN1bHRfID0gZnVuY3Rpb24gKHF1ZXJ5UmVzdWx0KSB7XG4gIHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnRvdGFsID0gMDtcbiAgdGhpcy5uZ2VvUXVlcnlSZXN1bHQuc291cmNlcy5sZW5ndGggPSAwO1xuXG4gIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UocXVlcnlSZXN1bHQuc291cmNlcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgdmFyIHNvdXJjZSA9IF9zdGVwLnZhbHVlO1xuICAgIHNvdXJjZS5mZWF0dXJlcyA9IHNvdXJjZS5mZWF0dXJlcy5maWx0ZXIoZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgIGlmICghZmVhdHVyZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gIWlzRW1wdHkoZ2V0RmlsdGVyZWRGZWF0dXJlVmFsdWVzKGZlYXR1cmUpKTtcbiAgICB9KTtcbiAgICB0aGlzLm5nZW9RdWVyeVJlc3VsdC5zb3VyY2VzLnB1c2goc291cmNlKTtcbiAgICB0aGlzLm5nZW9RdWVyeVJlc3VsdC50b3RhbCArPSBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoO1xuICB9XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFJlc3VsdExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuc2VsZWN0ZWRTb3VyY2UgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdGhpcy5uZ2VvUXVlcnlSZXN1bHQudG90YWw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRTb3VyY2UuZmVhdHVyZXMubGVuZ3RoO1xuICB9XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLmlzRmlyc3QgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmN1cnJlbnRSZXN1bHQgPT0gMDtcbn07XG5cblF1ZXJ5V2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuaXNMYXN0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5jdXJyZW50UmVzdWx0ID09IHRoaXMuZ2V0UmVzdWx0TGVuZ3RoKCkgLSAxO1xufTtcblxuUXVlcnlXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRGZWF0dXJlVmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuZmVhdHVyZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGdldEZpbHRlcmVkRmVhdHVyZVZhbHVlcyh0aGlzLmZlYXR1cmUpO1xufTtcblxuUXVlcnlXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5hbmltYXRlXyA9IGZ1bmN0aW9uIChpc05leHQpIHtcbiAgdGhpcy5pc05leHQgPSBpc05leHQ7XG4gIHRoaXMuYW5pbWF0ZSsrO1xufTtcblxuUXVlcnlXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5jb2xsZWN0RmVhdHVyZXNfID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc291cmNlcyA9IHRoaXMubmdlb1F1ZXJ5UmVzdWx0LnNvdXJjZXM7XG4gIHRoaXMuZmVhdHVyZXNfLmNsZWFyKCk7XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uoc291cmNlcyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgdmFyIHNvdXJjZSA9IF9zdGVwMi52YWx1ZTtcblxuICAgIGlmICh0aGlzLnNlbGVjdGVkU291cmNlICE9PSBudWxsICYmIHRoaXMuc2VsZWN0ZWRTb3VyY2UgIT09IHNvdXJjZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGZlYXR1cmVzID0gc291cmNlLmZlYXR1cmVzO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZmVhdHVyZXMpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgdmFyIGZlYXR1cmUgPSBfc3RlcDMudmFsdWU7XG4gICAgICB0aGlzLmZlYXR1cmVzXy5wdXNoKGZlYXR1cmUpO1xuICAgIH1cbiAgfVxufTtcblxuUXVlcnlXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5oaWdobGlnaHRDdXJyZW50RmVhdHVyZV8gPSBmdW5jdGlvbiAob3B0X2xhc3RGZWF0dXJlKSB7XG4gIGlmICghdGhpcy5mZWF0dXJlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZlYXR1cmUnKTtcbiAgfVxuXG4gIHRoaXMuaGlnaGxpZ2h0RmVhdHVyZXNfLmNsZWFyKCk7XG4gIHRoaXMuZmVhdHVyZXNfLnJlbW92ZSh0aGlzLmZlYXR1cmUpO1xuICB0aGlzLmhpZ2hsaWdodEZlYXR1cmVzXy5wdXNoKHRoaXMuZmVhdHVyZSk7XG5cbiAgaWYgKG9wdF9sYXN0RmVhdHVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5mZWF0dXJlc18ucHVzaChvcHRfbGFzdEZlYXR1cmUpO1xuICB9XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgdGhpcy5jbGVhcigpO1xuICB0aGlzLm5nZW9NYXBRdWVyZW50Xy5jbGVhcigpO1xufTtcblxuUXVlcnlXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5mZWF0dXJlID0gbnVsbDtcbiAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICB0aGlzLmN1cnJlbnRSZXN1bHQgPSAtMTtcbiAgdGhpcy5mZWF0dXJlc18uY2xlYXIoKTtcbiAgdGhpcy5oaWdobGlnaHRGZWF0dXJlc18uY2xlYXIoKTtcbiAgdGhpcy5zZWxlY3RlZFNvdXJjZSA9IG51bGw7XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLnNldFNlbGVjdGVkU291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICBpZiAoc291cmNlICE9PSBudWxsICYmIHNvdXJjZS5mZWF0dXJlcy5sZW5ndGggPD0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuY2xlYXIoKTtcbiAgdGhpcy5zZWxlY3RlZFNvdXJjZSA9IHNvdXJjZTtcbiAgdGhpcy51cGRhdGVGZWF0dXJlc18oKTtcbn07XG5cblF1ZXJ5V2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZG93bmxvYWRDU1YgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5nZXRDU1ZEYXRhXyhzb3VyY2UpO1xuICB2YXIgY29sdW1uRGVmcyA9IHRoaXMuZ2V0Q1NWSGVhZGVyRGVmaW5pdGlvbl8oZGF0YSk7XG5cbiAgaWYgKGNvbHVtbkRlZnMpIHtcbiAgICB0aGlzLm5nZW9Dc3ZEb3dubG9hZF8uc3RhcnREb3dubG9hZChkYXRhLCBjb2x1bW5EZWZzLCB0aGlzLmZpbGVuYW1lXyk7XG4gIH1cbn07XG5cblF1ZXJ5V2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0Q1NWRGF0YV8gPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gIGlmICghc291cmNlIHx8IHNvdXJjZS5mZWF0dXJlcy5sZW5ndGggPD0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBzb3VyY2UuZmVhdHVyZXMubWFwKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgcmV0dXJuIGdldEZpbHRlcmVkRmVhdHVyZVZhbHVlcyhmZWF0dXJlKTtcbiAgfSk7XG59O1xuXG5RdWVyeVdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldENTVkhlYWRlckRlZmluaXRpb25fID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGRpc3RpbmN0S2V5cyA9IG5ldyBTZXQoKTtcbiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkYXR1bSkge1xuICAgIE9iamVjdC5rZXlzKGRhdHVtKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGRhdHVtW2tleV0gIT09IHVuZGVmaW5lZDtcbiAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBkaXN0aW5jdEtleXMuYWRkKGtleSk7XG4gICAgfSk7XG4gIH0pO1xuICB2YXIgY29sdW1uRGVmcyA9IFtdO1xuICBkaXN0aW5jdEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIGNvbHVtbkRlZnMucHVzaCh7XG4gICAgICBuYW1lOiBrZXlcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBjb2x1bW5EZWZzO1xufTtcblxubXlNb2R1bGUuY29udHJvbGxlcignR21mRGlzcGxheXF1ZXJ5d2luZG93Q29udHJvbGxlcicsIFF1ZXJ5V2luZG93Q29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJSYXN0ZXJTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcImdtZlJhc3RlclVybFwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuZXhwb3J0IGZ1bmN0aW9uIFJhc3RlclNlcnZpY2UoJGh0dHAsIGdtZlJhc3RlclVybCkge1xuICB0aGlzLiRodHRwXyA9ICRodHRwO1xuICB0aGlzLnVybF8gPSBnbWZSYXN0ZXJVcmw7XG59XG52YXIgUGFyYW0gPSB7XG4gIFg6ICdsb24nLFxuICBZOiAnbGF0J1xufTtcblxuUmFzdGVyU2VydmljZS5wcm90b3R5cGUuZ2V0UmFzdGVyID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIG9wdF9wYXJhbXMpIHtcbiAgdmFyIHBhcmFtcyA9IG9wdF9wYXJhbXMgfHwge307XG4gIHBhcmFtc1tQYXJhbS5YXSA9IGNvb3JkaW5hdGVbMF07XG4gIHBhcmFtc1tQYXJhbS5ZXSA9IGNvb3JkaW5hdGVbMV07XG4gIHJldHVybiB0aGlzLiRodHRwXy5nZXQodGhpcy51cmxfLCB7XG4gICAgcGFyYW1zOiBwYXJhbXNcbiAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgIHJldHVybiByZXNwLmRhdGE7XG4gIH0pO1xufTtcblxuUmFzdGVyU2VydmljZS5wcm90b3R5cGUuaGFuZGxlR2V0UmFzdGVyXyA9IGZ1bmN0aW9uIChyZXNwKSB7XG4gIHJldHVybiByZXNwLmRhdGE7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mUmFzdGVyJywgW10pO1xubXlNb2R1bGUuc2VydmljZSgnZ21mUmFzdGVyJywgUmFzdGVyU2VydmljZSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJGdWxsdGV4dFNlYXJjaFNlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiZnVsbHRleHRzZWFyY2hVcmxcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGVuY29kZVF1ZXJ5U3RyaW5nLCBkZWNvZGVRdWVyeVN0cmluZyB9IGZyb20gJ25nZW8vdXRpbHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEZ1bGx0ZXh0U2VhcmNoU2VydmljZSgkaHR0cCwgZnVsbHRleHRzZWFyY2hVcmwpIHtcbiAgdGhpcy4kaHR0cF8gPSAkaHR0cDtcbiAgdGhpcy51cmxfID0gZnVsbHRleHRzZWFyY2hVcmw7XG4gIHZhciB1cmwgPSB0aGlzLnVybF8uc3BsaXQoJz8nKTtcbiAgdGhpcy5iYXNlVXJsXyA9IHVybFswXTtcbiAgdmFyIHF1ZXJ5U3RyaW5nID0gdXJsLmxlbmd0aCA9PSAyID8gXCI/XCIgKyB1cmxbMV0gOiAnJztcbiAgdGhpcy5kZWZhdWx0UGFyYW1zXyA9IGRlY29kZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcbn1cblxuRnVsbHRleHRTZWFyY2hTZXJ2aWNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbiAocXVlcnksIHBhcmFtcykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBxdWVyeVBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFBhcmFtc18sIHBhcmFtcyk7XG4gIHF1ZXJ5UGFyYW1zWydxdWVyeSddID0gcXVlcnk7XG4gIHZhciB1cmwgPSB0aGlzLmJhc2VVcmxfICsgXCI/XCIgKyBlbmNvZGVRdWVyeVN0cmluZyhxdWVyeVBhcmFtcyk7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgX3RoaXMuJGh0dHBfLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHJlc3BbJ2RhdGEnXSk7XG4gICAgfSkuY2F0Y2gocmVqZWN0KTtcbiAgfSk7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mU2VhcmNoRnVsbHRleHRTZWFyY2gnLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCdnbWZTZWFyY2hGdWxsdGV4dFNlYXJjaCcsIEZ1bGx0ZXh0U2VhcmNoU2VydmljZSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwiZ21mLXNlYXJjaFwiPlxcbiAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctYXR0ci1wbGFjZWhvbGRlcj1cInt7JGN0cmwucGxhY2Vob2xkZXJ8dHJhbnNsYXRlfX1cIlxcbiAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXFxuICAgIG5nLW1vZGVsPVwiJGN0cmwuaW5wdXRWYWx1ZVwiXFxuICAgIG5nZW8tc2VhcmNoPVwiJGN0cmwub3B0aW9uc1wiXFxuICAgIG5nZW8tc2VhcmNoLWRhdGFzZXRzPVwiJGN0cmwuZGF0YXNldHNcIlxcbiAgICBuZ2VvLXNlYXJjaC1saXN0ZW5lcnM9XCIkY3RybC5saXN0ZW5lcnNcIj5cXG4gIDxzcGFuIGNsYXNzPVwiZ21mLWNsZWFyLWJ1dHRvbiBuZy1oaWRlXCJcXG4gICAgbmctaGlkZT1cIiEkY3RybC5jbGVhckJ1dHRvbiB8fCAkY3RybC5pbnB1dFZhbHVlID09IFxcJ1xcJyAmJiAkY3RybC5mZWF0dXJlT3ZlcmxheV8uaXNFbXB0eSgpXCJcXG4gICAgbmctY2xpY2s9XCIkY3RybC5vbkNsZWFyQnV0dG9uKClcIj5cXG4gIDwvc3Bhbj5cXG48L2Rpdj5cXG48c3BhbiBuZy1pZj1cIiRjdHJsLm9wdGlvbnMuY29sb3JDaG9vc2VyXCI+XFxuICA8c3BhbiBuZy1zaG93PVwiJGN0cmwuZGlzcGxheUNvbG9yUGlja2VyXCIgbmdlby1wb3BvdmVyIG5nZW8tcG9wb3Zlci1wbGFjZW1lbnQ9XCJib3R0b21cIj5cXG4gICAgPGJ1dHRvbiBjbGFzcz1cImdtZi1jb2xvci1idXR0b24gZmEgZmEtdGludFwiIG5nZW8tcG9wb3Zlci1hbmNob3JcXG4gICAgICAgICAgICBkYXRhLW9yaWdpbmFsLXRpdGxlPVwie3tcXCdDaGFuZ2UgdGhlIGNvbG9yIG9mIHRoZSBzZWFyY2ggcmVzdWx0XFwnfHRyYW5zbGF0ZX19XCI+PC9idXR0b24+XFxuICAgIDxkaXYgbmdlby1wb3BvdmVyLWNvbnRlbnQ+XFxuICAgICAgPGRpdiBuZ2VvLWNvbG9ycGlja2VyIG5nZW8tY29sb3JwaWNrZXItY29sb3I9XCIkY3RybC5jb2xvclwiPjwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIDwvc3Bhbj5cXG48L3NwYW4+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBDT09SRElOQVRFU19MQVlFUl9OQU1FIH0gZnJvbSAnZ21mL2luZGV4LmpzJztcbmltcG9ydCB7IGdtZkJhY2tncm91bmRsYXllclN0YXR1cyB9IGZyb20gJ2dtZi9iYWNrZ3JvdW5kbGF5ZXJzZWxlY3Rvci9zdGF0dXMuanMnO1xuaW1wb3J0IGdtZkxheWVydHJlZVRyZWVNYW5hZ2VyIGZyb20gJ2dtZi9sYXllcnRyZWUvVHJlZU1hbmFnZXIuanMnO1xuaW1wb3J0IGdtZlNlYXJjaEZ1bGx0ZXh0U2VhcmNoIGZyb20gJ2dtZi9zZWFyY2gvRnVsbHRleHRTZWFyY2guanMnO1xuaW1wb3J0IGdtZlRoZW1lVGhlbWVzLCB7IGZpbmRUaGVtZUJ5TmFtZSB9IGZyb20gJ2dtZi90aGVtZS9UaGVtZXMuanMnO1xuaW1wb3J0IG5nZW9NYXBGZWF0dXJlT3ZlcmxheU1nciBmcm9tICduZ2VvL21hcC9GZWF0dXJlT3ZlcmxheU1nci5qcyc7XG5pbXBvcnQgbmdlb01pc2NBdXRvUHJvamVjdGlvbiBmcm9tICduZ2VvL21pc2MvQXV0b1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IG5nZW9NaXNjQ29sb3JwaWNrZXJDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL2NvbG9ycGlja2VyQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWVzc2FnZVBvcG92ZXJDb21wb25lbnQgZnJvbSAnbmdlby9tZXNzYWdlL3BvcG92ZXJDb21wb25lbnQuanMnO1xuaW1wb3J0IG5nZW9TZWFyY2hNb2R1bGUgZnJvbSAnbmdlby9zZWFyY2gvbW9kdWxlLmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBhc0FycmF5IGFzIGFzQ29sb3JBcnJheSB9IGZyb20gJ29sL2NvbG9yLmpzJztcbmltcG9ydCBvbEdlb21Qb2ludCBmcm9tICdvbC9nZW9tL1BvaW50LmpzJztcbmltcG9ydCBvbEZvcm1hdEdlb0pTT04gZnJvbSAnb2wvZm9ybWF0L0dlb0pTT04uanMnO1xuaW1wb3J0ICogYXMgb2xQcm9qIGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0IHsgYXBwZW5kUGFyYW1zIGFzIG9sVXJpQXBwZW5kUGFyYW1zIH0gZnJvbSAnb2wvdXJpLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICdvbC9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU3R5bGUgfSBmcm9tICduZ2VvL29wdGlvbnMuanMnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2dtZlNlYXJjaCcsIFtnbWZMYXllcnRyZWVUcmVlTWFuYWdlci5uYW1lLCBnbWZTZWFyY2hGdWxsdGV4dFNlYXJjaC5uYW1lLCBnbWZUaGVtZVRoZW1lcy5uYW1lLCBuZ2VvTWlzY0F1dG9Qcm9qZWN0aW9uLm5hbWUsIG5nZW9NaXNjQ29sb3JwaWNrZXJDb21wb25lbnQubmFtZSwgbmdlb1NlYXJjaE1vZHVsZS5uYW1lLCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXlNZ3IubmFtZSwgbmdlb01lc3NhZ2VQb3BvdmVyQ29tcG9uZW50Lm5hbWVdKTtcblxuZnVuY3Rpb24gZ21mU2VhcmNoVGVtcGxhdGVVcmxfKGVsZW1lbnQsIGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9IGF0dHJzLmdtZlNlYXJjaFRlbXBsYXRldXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ2dtZi9zZWFyY2gnO1xufVxuXG5teU1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZ21mL3NlYXJjaCcsIHJlcXVpcmUoJy4vY29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5nbWZTZWFyY2hUZW1wbGF0ZVVybC4kaW5qZWN0ID0gW1wiJGVsZW1lbnRcIiwgXCIkYXR0cnNcIiwgXCJnbWZTZWFyY2hUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gZ21mU2VhcmNoVGVtcGxhdGVVcmwoJGVsZW1lbnQsICRhdHRycywgZ21mU2VhcmNoVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIGdtZlNlYXJjaFRlbXBsYXRlVXJsKCRlbGVtZW50LCAkYXR0cnMpO1xufVxuXG52YXIgc2VhcmNoQ29tcG9uZW50ID0ge1xuICBiaW5kaW5nczoge1xuICAgICdpbnB1dFZhbHVlJzogJz0/Z21mU2VhcmNoSW5wdXRWYWx1ZScsXG4gICAgJ21hcCc6ICc8Z21mU2VhcmNoTWFwJyxcbiAgICAndHlwZWFoZWFkT3B0aW9ucyc6ICc8P2dtZlNlYXJjaE9wdGlvbnMnLFxuICAgICdhZGRpdGlvbmFsTGlzdGVuZXJzJzogJzxnbWZTZWFyY2hMaXN0ZW5lcnMnLFxuICAgICdvbkluaXRDYWxsYmFjayc6ICc8P2dtZlNlYXJjaE9uSW5pdCcsXG4gICAgJ3NlYXJjaEFjdGlvbkNhbGxiYWNrJzogJyY/Z21mU2VhcmNoQWN0aW9uJ1xuICB9LFxuICBjb250cm9sbGVyOiAnZ21mU2VhcmNoQ29udHJvbGxlcicsXG4gIHRlbXBsYXRlVXJsOiBnbWZTZWFyY2hUZW1wbGF0ZVVybFxufTtcbm15TW9kdWxlLnZhbHVlKCdnbWZTZWFyY2hUZW1wbGF0ZVVybCcsIGdtZlNlYXJjaFRlbXBsYXRlVXJsXyk7XG5teU1vZHVsZS5jb21wb25lbnQoJ2dtZlNlYXJjaCcsIHNlYXJjaENvbXBvbmVudCk7XG5leHBvcnQgdmFyIFNlYXJjaENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFNlYXJjaENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRlbGVtZW50XCIsIFwiJHNjb3BlXCIsIFwiJGNvbXBpbGVcIiwgXCIkdGltZW91dFwiLCBcImdldHRleHRDYXRhbG9nXCIsIFwibmdlb0F1dG9Qcm9qZWN0aW9uXCIsIFwibmdlb1NlYXJjaENyZWF0ZUdlb0pTT05CbG9vZGhvdW5kXCIsIFwibmdlb0ZlYXR1cmVPdmVybGF5TWdyXCIsIFwiZ21mVGhlbWVzXCIsIFwiZ21mVHJlZU1hbmFnZXJcIiwgXCJnbWZTZWFyY2hGdWxsdGV4dFNlYXJjaFwiLCBcIm5nZW9Mb2NhdGlvblwiLCBcImdtZlNlYXJjaE9wdGlvbnNcIiwgXCJnbWZTZWFyY2hHcm91cHNcIiwgXCJmdWxsdGV4dHNlYXJjaFVybFwiXTtcblxuICBmdW5jdGlvbiBTZWFyY2hDb250cm9sbGVyKCRlbGVtZW50LCAkc2NvcGUsICRjb21waWxlLCAkdGltZW91dCwgZ2V0dGV4dENhdGFsb2csIG5nZW9BdXRvUHJvamVjdGlvbiwgbmdlb1NlYXJjaENyZWF0ZUdlb0pTT05CbG9vZGhvdW5kLCBuZ2VvRmVhdHVyZU92ZXJsYXlNZ3IsIGdtZlRoZW1lcywgZ21mVHJlZU1hbmFnZXIsIGdtZlNlYXJjaEZ1bGx0ZXh0U2VhcmNoLCBuZ2VvTG9jYXRpb24sIGdtZlNlYXJjaE9wdGlvbnMsIGdtZlNlYXJjaEdyb3VwcywgZnVsbHRleHRzZWFyY2hVcmwpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5vcHRpb25zID0gZ21mU2VhcmNoT3B0aW9ucztcbiAgICB0aGlzLmdyb3VwcyA9IGdtZlNlYXJjaEdyb3VwcztcbiAgICB0aGlzLmZ1bGx0ZXh0c2VhcmNoVXJsID0gZnVsbHRleHRzZWFyY2hVcmw7XG4gICAgdGhpcy5lbGVtZW50XyA9ICRlbGVtZW50O1xuICAgIHRoaXMuc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMuY29tcGlsZV8gPSAkY29tcGlsZTtcbiAgICB0aGlzLnRpbWVvdXRfID0gJHRpbWVvdXQ7XG4gICAgdGhpcy5nZXR0ZXh0Q2F0YWxvZ18gPSBnZXR0ZXh0Q2F0YWxvZztcbiAgICB0aGlzLmdtZlRoZW1lc18gPSBnbWZUaGVtZXM7XG4gICAgdGhpcy5nbWZUcmVlTWFuYWdlcl8gPSBnbWZUcmVlTWFuYWdlcjtcbiAgICB0aGlzLmZ1bGxUZXh0U2VhcmNoXyA9IGdtZlNlYXJjaEZ1bGx0ZXh0U2VhcmNoO1xuICAgIHRoaXMubmdlb1NlYXJjaENyZWF0ZUdlb0pTT05CbG9vZGhvdW5kXyA9IG5nZW9TZWFyY2hDcmVhdGVHZW9KU09OQmxvb2Rob3VuZDtcbiAgICB0aGlzLm5nZW9GZWF0dXJlT3ZlcmxheU1nciA9IG5nZW9GZWF0dXJlT3ZlcmxheU1ncjtcbiAgICB0aGlzLm5nZW9Mb2NhdGlvbl8gPSBuZ2VvTG9jYXRpb247XG4gICAgdGhpcy5uZ2VvQXV0b1Byb2plY3Rpb25fID0gbmdlb0F1dG9Qcm9qZWN0aW9uO1xuICAgIHRoaXMubWFwID0gbnVsbDtcbiAgICB0aGlzLm9uSW5pdENhbGxiYWNrID0gbnVsbDtcbiAgICB0aGlzLnNlYXJjaEFjdGlvbkNhbGxiYWNrO1xuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIgfHwgJ1NlYXJjaOKApic7XG4gICAgZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdTZWFyY2jigKYnKTtcbiAgICB0aGlzLmNvb3JkaW5hdGVzUHJvamVjdGlvbnNJbnN0YW5jZXMgPSBbXTtcbiAgICB0aGlzLmZlYXR1cmVPdmVybGF5XyA9IG5nZW9GZWF0dXJlT3ZlcmxheU1nci5nZXRGZWF0dXJlT3ZlcmxheSgpO1xuICAgIHRoaXMudHlwZWFoZWFkT3B0aW9ucyA9IHtcbiAgICAgIGhpZ2hsaWdodDogdHJ1ZVxuICAgIH07XG4gICAgdGhpcy5kYXRhc2V0cyA9IFtdO1xuICAgIHRoaXMuaW5wdXRWYWx1ZSA9ICcnO1xuICAgIHRoaXMuY29sb3IgPSAnJztcbiAgICB0aGlzLmRpc3BsYXlDb2xvclBpY2tlciA9IGZhbHNlO1xuICAgIHRoaXMubGlzdGVuZXJzID0gbnVsbDtcbiAgICB0aGlzLmFkZGl0aW9uYWxMaXN0ZW5lcnMgPSB7fTtcbiAgICB0aGlzLmNsZWFyQnV0dG9uID0gdGhpcy5vcHRpb25zLmNsZWFyQnV0dG9uICE9PSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmNsZWFyQnV0dG9uKSB7XG4gICAgICB0aGlzLmVsZW1lbnRfLmZpbmQoJ2lucHV0Jykub24oJ2ZvY3VzIGJsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmNsZWFyKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmZlYXR1cmVPdmVybGF5Xy5zZXRTdHlsZSh0aGlzLmdldFNlYXJjaFN0eWxlXy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmNvbG9yO1xuICAgIH0sIHRoaXMuc2V0U3R5bGVDb2xvci5iaW5kKHRoaXMpKTtcblxuICAgIGlmICh0aGlzLm5nZW9Mb2NhdGlvbl8pIHtcbiAgICAgIHZhciBzZWFyY2hRdWVyeSA9IHRoaXMubmdlb0xvY2F0aW9uXy5nZXRQYXJhbSgnc2VhcmNoJyk7XG5cbiAgICAgIGlmIChzZWFyY2hRdWVyeSkge1xuICAgICAgICB2YXIgcmVzdWx0SW5kZXggPSAxO1xuXG4gICAgICAgIGlmICh0aGlzLm5nZW9Mb2NhdGlvbl8uZ2V0UGFyYW0oJ3NlYXJjaC1zZWxlY3QtaW5kZXgnKSkge1xuICAgICAgICAgIHJlc3VsdEluZGV4ID0gcGFyc2VJbnQodGhpcy5uZ2VvTG9jYXRpb25fLmdldFBhcmFtKCdzZWFyY2gtc2VsZWN0LWluZGV4JykgfHwgJycsIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXBab29tO1xuXG4gICAgICAgIGlmICh0aGlzLm5nZW9Mb2NhdGlvbl8uZ2V0UGFyYW0oJ3NlYXJjaC1tYXh6b29tJykpIHtcbiAgICAgICAgICBtYXBab29tID0gcGFyc2VJbnQodGhpcy5uZ2VvTG9jYXRpb25fLmdldFBhcmFtKCdzZWFyY2gtbWF4em9vbScpIHx8ICcnLCAxMCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5uZ2VvTG9jYXRpb25fLmdldFBhcmFtKCdtYXBfem9vbScpKSB7XG4gICAgICAgICAgbWFwWm9vbSA9IHBhcnNlSW50KHRoaXMubmdlb0xvY2F0aW9uXy5nZXRQYXJhbSgnbWFwX3pvb20nKSB8fCAnJywgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mdWxsdGV4dHNlYXJjaF8oc2VhcmNoUXVlcnksIHJlc3VsdEluZGV4LCBtYXBab29tKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU2VhcmNoQ29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLiRvbkluaXQgPSBmdW5jdGlvbiAkb25Jbml0KCkge1xuICAgIHRoaXMuY29vcmRpbmF0ZXNQcm9qZWN0aW9uc0luc3RhbmNlcyA9IHRoaXMub3B0aW9ucy5jb29yZGluYXRlc1Byb2plY3Rpb25zID09PSB1bmRlZmluZWQgPyBbdGhpcy5tYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKV0gOiB0aGlzLm5nZW9BdXRvUHJvamVjdGlvbl8uZ2V0UHJvamVjdGlvbkxpc3QodGhpcy5vcHRpb25zLmNvb3JkaW5hdGVzUHJvamVjdGlvbnMpO1xuICAgIHRoaXMuaW5pdERhdGFzZXRzXygpO1xuICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5tZXJnZUxpc3RlbmVyc18odGhpcy5hZGRpdGlvbmFsTGlzdGVuZXJzLCB7XG4gICAgICBzZWxlY3Q6IHRoaXMuc2VsZWN0Xy5iaW5kKHRoaXMpLFxuICAgICAgY2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZV8uYmluZCh0aGlzKSxcbiAgICAgIGNsb3NlOiB0aGlzLmNsb3NlXy5iaW5kKHRoaXMpLFxuICAgICAgZGF0YXNldHNlbXB0eTogdGhpcy5kYXRhc2V0c2VtcHR5Xy5iaW5kKHRoaXMpXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5vbkluaXRDYWxsYmFjaykge1xuICAgICAgdGhpcy5vbkluaXRDYWxsYmFjaygpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ubWVyZ2VMaXN0ZW5lcnNfID0gZnVuY3Rpb24gbWVyZ2VMaXN0ZW5lcnNfKGFkZGl0aW9uYWxMaXN0ZW5lcnMsIGxpc3RlbmVycykge1xuICAgIGlmIChhZGRpdGlvbmFsTGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBsaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9wZW46IGFkZGl0aW9uYWxMaXN0ZW5lcnMub3BlbixcbiAgICAgIGNsb3NlOiBhZGRpdGlvbmFsTGlzdGVuZXJzLmNsb3NlID09PSB1bmRlZmluZWQgPyBsaXN0ZW5lcnMuY2xvc2UgOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxpc3RlbmVycy5jbG9zZSgpO1xuICAgICAgICBhZGRpdGlvbmFsTGlzdGVuZXJzLmNsb3NlKCk7XG4gICAgICB9LFxuICAgICAgY2hhbmdlOiBhZGRpdGlvbmFsTGlzdGVuZXJzLmNoYW5nZSxcbiAgICAgIGN1cnNvcmNoYW5nZTogYWRkaXRpb25hbExpc3RlbmVycy5jdXJzb3JjaGFuZ2UsXG4gICAgICBkYXRhc2V0c2VtcHR5OiBhZGRpdGlvbmFsTGlzdGVuZXJzLmRhdGFzZXRzZW1wdHksXG4gICAgICBzZWxlY3Q6IGFkZGl0aW9uYWxMaXN0ZW5lcnMuc2VsZWN0ID09PSB1bmRlZmluZWQgPyBsaXN0ZW5lcnMuc2VsZWN0IDogZnVuY3Rpb24gKGV2dCwgb2JqLCBkYXRhc2V0KSB7XG4gICAgICAgIGxpc3RlbmVycy5zZWxlY3QoZXZ0LCBvYmosIGRhdGFzZXQpO1xuICAgICAgICBhZGRpdGlvbmFsTGlzdGVuZXJzLnNlbGVjdChldnQsIG9iaiwgZGF0YXNldCk7XG4gICAgICB9LFxuICAgICAgYXV0b2NvbXBsZXRlOiBhZGRpdGlvbmFsTGlzdGVuZXJzLmF1dG9jb21wbGV0ZVxuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvLmluaXREYXRhc2V0c18gPSBmdW5jdGlvbiBpbml0RGF0YXNldHNfKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGdldHRleHRDYXRhbG9nID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ187XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHtcbiAgICAgIHZhciBkYXRhc291cmNlID0gX3N0ZXAudmFsdWU7XG4gICAgICB2YXIgZ3JvdXBWYWx1ZXMgPSBkYXRhc291cmNlLmdyb3VwVmFsdWVzICE9PSB1bmRlZmluZWQgPyBkYXRhc291cmNlLmdyb3VwVmFsdWVzIDogX3RoaXMyLmdyb3VwcztcbiAgICAgIHZhciBncm91cEFjdGlvbnMgPSBkYXRhc291cmNlLmdyb3VwQWN0aW9ucyB8fCBbXTtcbiAgICAgIHZhciBmaWx0ZXJzID0gW107XG5cbiAgICAgIGlmIChncm91cFZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZmlsdGVycy5wdXNoKHtcbiAgICAgICAgICAndGl0bGUnOiAnJyxcbiAgICAgICAgICAnZmlsdGVyJzogX3RoaXMyLmZpbHRlckxheWVybmFtZV8oKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyb3VwVmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyTmFtZSkge1xuICAgICAgICAgIGZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICAndGl0bGUnOiBsYXllck5hbWUsXG4gICAgICAgICAgICAnZmlsdGVyJzogX3RoaXMyLmZpbHRlckxheWVybmFtZV8obGF5ZXJOYW1lKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ3JvdXBBY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBmaWx0ZXJzLnB1c2goe1xuICAgICAgICAgICd0aXRsZSc6IGdldHRleHRDYXRhbG9nLmdldFN0cmluZyhhY3Rpb24udGl0bGUpLFxuICAgICAgICAgICdmaWx0ZXInOiBfdGhpczIuZmlsdGVyQWN0aW9uXyhhY3Rpb24uYWN0aW9uKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZmlsdGVycy5mb3JFYWNoKGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICAgICAgX3RoaXMyLmRhdGFzZXRzLnB1c2goX3RoaXMyLmNyZWF0ZURhdGFzZXRfKHtcbiAgICAgICAgICBibG9vZGhvdW5kT3B0aW9uczogZGF0YXNvdXJjZS5ibG9vZGhvdW5kT3B0aW9ucyxcbiAgICAgICAgICBkYXRhc2V0VGl0bGU6IGZpbHRlci50aXRsZSxcbiAgICAgICAgICBsYWJlbEtleTogZGF0YXNvdXJjZS5sYWJlbEtleSxcbiAgICAgICAgICBwcm9qZWN0aW9uOiBkYXRhc291cmNlLnByb2plY3Rpb24sXG4gICAgICAgICAgdHlwZWFoZWFkRGF0YXNldE9wdGlvbnM6IGRhdGFzb3VyY2UudHlwZWFoZWFkRGF0YXNldE9wdGlvbnMsXG4gICAgICAgICAgdXJsOiBkYXRhc291cmNlLnVybCB8fCBfdGhpczIuZnVsbHRleHRzZWFyY2hVcmxcbiAgICAgICAgfSwgZmlsdGVyLmZpbHRlcikpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5vcHRpb25zLmRhdGFzb3VyY2VzIHx8IFtdKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIF9sb29wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhc2V0cy5wdXNoKHtcbiAgICAgIHNvdXJjZTogdGhpcy5jcmVhdGVTZWFyY2hDb29yZGluYXRlc18odGhpcy5tYXAuZ2V0VmlldygpKSxcbiAgICAgIG5hbWU6ICdjb29yZGluYXRlcycsXG4gICAgICBkaXNwbGF5OiAnbGFiZWwnLFxuICAgICAgdGVtcGxhdGVzOiB7XG4gICAgICAgIGhlYWRlcjogZnVuY3Rpb24gaGVhZGVyKCkge1xuICAgICAgICAgIHZhciBoZWFkZXIgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ1JlY2VudGVyIHRvJyk7XG4gICAgICAgICAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZ21mLXNlYXJjaC1oZWFkZXJcXFwiIHRyYW5zbGF0ZT5cIiArIGhlYWRlciArIFwiPC9kaXY+XCI7XG4gICAgICAgIH0sXG4gICAgICAgIHN1Z2dlc3Rpb246IGZ1bmN0aW9uIHN1Z2dlc3Rpb24oX3N1Z2dlc3Rpb24pIHtcbiAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBfc3VnZ2VzdGlvbi5sYWJlbDtcbiAgICAgICAgICB2YXIgaHRtbCA9IFwiPHAgY2xhc3M9XFxcImdtZi1zZWFyY2gtbGFiZWxcXFwiPlwiICsgY29vcmRpbmF0ZXMgKyBcIjwvcD5cIjtcbiAgICAgICAgICBodG1sID0gXCI8ZGl2IGNsYXNzPVxcXCJnbWYtc2VhcmNoLWRhdHVtXFxcIj5cIiArIGh0bWwgKyBcIjwvZGl2PlwiO1xuICAgICAgICAgIHJldHVybiBodG1sO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZURhdGFzZXRfID0gZnVuY3Rpb24gY3JlYXRlRGF0YXNldF8oY29uZmlnLCBvcHRfZmlsdGVyKSB7XG4gICAgdmFyIGdldHRleHRDYXRhbG9nID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ187XG4gICAgdmFyIGNvbXBvbmVudFNjb3BlID0gdGhpcy5zY29wZV87XG4gICAgdmFyIGNvbXBpbGUgPSB0aGlzLmNvbXBpbGVfO1xuICAgIHZhciBibG9vZGhvdW5kRW5naW5lID0gdGhpcy5jcmVhdGVBbmRJbml0Qmxvb2Rob3VuZF8oY29uZmlnLCBvcHRfZmlsdGVyKTtcbiAgICB2YXIgdHlwZWFoZWFkRGF0YXNldCA9IHtcbiAgICAgIGxpbWl0OiBJbmZpbml0eSxcbiAgICAgIHNvdXJjZTogYmxvb2Rob3VuZEVuZ2luZS50dEFkYXB0ZXIoKSxcbiAgICAgIGRpc3BsYXk6IGZ1bmN0aW9uIGRpc3BsYXkoc3VnZ2VzdGlvbikge1xuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbi5nZXQoY29uZmlnLmxhYmVsS2V5KTtcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZXM6IHtcbiAgICAgICAgaGVhZGVyOiBmdW5jdGlvbiBoZWFkZXIoKSB7XG4gICAgICAgICAgaWYgKCFjb25maWcuZGF0YXNldFRpdGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoY29uZmlnLmRhdGFzZXRUaXRsZSk7XG4gICAgICAgICAgICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJnbWYtc2VhcmNoLWhlYWRlclxcXCI+XCIgKyBoZWFkZXIgKyBcIjwvZGl2PlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3VnZ2VzdGlvbjogZnVuY3Rpb24gc3VnZ2VzdGlvbihfc3VnZ2VzdGlvbjIpIHtcbiAgICAgICAgICB2YXIgc2NvcGUgPSBjb21wb25lbnRTY29wZS4kbmV3KHRydWUpO1xuICAgICAgICAgIHNjb3BlLmZlYXR1cmUgPSBfc3VnZ2VzdGlvbjI7XG4gICAgICAgICAgdmFyIGh0bWwgPSBcIjxwIGNsYXNzPVxcXCJnbWYtc2VhcmNoLWxhYmVsXFxcIiB0cmFuc2xhdGU+XCIgKyBfc3VnZ2VzdGlvbjIuZ2V0KGNvbmZpZy5sYWJlbEtleSkgKyBcIjwvcD5cIjtcbiAgICAgICAgICBodG1sICs9IFwiPHAgY2xhc3M9XFxcImdtZi1zZWFyY2gtZ3JvdXBcXFwiIHRyYW5zbGF0ZT5cIiArIChfc3VnZ2VzdGlvbjIuZ2V0KCdsYXllcl9uYW1lJykgfHwgY29uZmlnLmRhdGFzZXRUaXRsZSkgKyBcIjwvcD5cIjtcbiAgICAgICAgICBodG1sID0gXCI8ZGl2IGNsYXNzPVxcXCJnbWYtc2VhcmNoLWRhdHVtXFxcIj5cIiArIGh0bWwgKyBcIjwvZGl2PlwiO1xuICAgICAgICAgIHJldHVybiBjb21waWxlKGh0bWwpKHNjb3BlKS5odG1sKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGNvbmZpZy50eXBlYWhlYWREYXRhc2V0T3B0aW9ucykge1xuICAgICAgT2JqZWN0LmFzc2lnbih0eXBlYWhlYWREYXRhc2V0LCBjb25maWcudHlwZWFoZWFkRGF0YXNldE9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlYWhlYWREYXRhc2V0O1xuICB9O1xuXG4gIF9wcm90by5maWx0ZXJBY3Rpb25fID0gZnVuY3Rpb24gZmlsdGVyQWN0aW9uXyhhY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgIHZhciBwcm9wZXJ0aWVzID0gZmVhdHVyZS5wcm9wZXJ0aWVzIHx8IHt9O1xuXG4gICAgICBpZiAocHJvcGVydGllcy5hY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiAhcHJvcGVydGllcy5sYXllcl9uYW1lICYmIHByb3BlcnRpZXMuYWN0aW9ucy5zb21lKGZ1bmN0aW9uIChhY3QpIHtcbiAgICAgICAgICByZXR1cm4gYWN0LmFjdGlvbiA9PT0gYWN0aW9uO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIF9wcm90by5maWx0ZXJMYXllcm5hbWVfID0gZnVuY3Rpb24gZmlsdGVyTGF5ZXJuYW1lXyhvcHRfbGF5ZXJOYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICB2YXIgZmVhdHVyZUxheWVyTmFtZSA9IChmZWF0dXJlLnByb3BlcnRpZXMgfHwge30pLmxheWVyX25hbWU7XG5cbiAgICAgIGlmIChmZWF0dXJlTGF5ZXJOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0X2xheWVyTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmVhdHVyZUxheWVyTmFtZSA9PT0gb3B0X2xheWVyTmFtZTtcbiAgICB9O1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVBbmRJbml0Qmxvb2Rob3VuZF8gPSBmdW5jdGlvbiBjcmVhdGVBbmRJbml0Qmxvb2Rob3VuZF8oY29uZmlnLCBvcHRfZmlsdGVyKSB7XG4gICAgaWYgKCF0aGlzLm1hcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgIH1cblxuICAgIHZhciBtYXBQcm9qZWN0aW9uQ29kZSA9IHRoaXMubWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkuZ2V0Q29kZSgpO1xuICAgIHZhciByZW1vdGVPcHRpb25zID0gdGhpcy5nZXRCbG9vZGhvdWRSZW1vdGVPcHRpb25zXygpO1xuICAgIHZhciBibG9vZGhvdW5kID0gdGhpcy5uZ2VvU2VhcmNoQ3JlYXRlR2VvSlNPTkJsb29kaG91bmRfKGNvbmZpZy51cmwsIG9wdF9maWx0ZXIsIG9sUHJvai5nZXQobWFwUHJvamVjdGlvbkNvZGUpLCBvbFByb2ouZ2V0KGNvbmZpZy5wcm9qZWN0aW9uKSwgY29uZmlnLmJsb29kaG91bmRPcHRpb25zLCByZW1vdGVPcHRpb25zKTtcbiAgICBibG9vZGhvdW5kLmluaXRpYWxpemUoKTtcbiAgICByZXR1cm4gYmxvb2Rob3VuZDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0Qmxvb2Rob3VkUmVtb3RlT3B0aW9uc18gPSBmdW5jdGlvbiBnZXRCbG9vZGhvdWRSZW1vdGVPcHRpb25zXygpIHtcbiAgICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nXztcbiAgICByZXR1cm4ge1xuICAgICAgcmF0ZUxpbWl0V2FpdDogdGhpcy5vcHRpb25zLmRlbGF5ID09IHVuZGVmaW5lZCA/IDUwIDogdGhpcy5vcHRpb25zLmRlbGF5LFxuICAgICAgcHJlcGFyZTogZnVuY3Rpb24gcHJlcGFyZShxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIHVybCA9IHNldHRpbmdzLnVybDtcblxuICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBVUkwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsYW5nID0gZ2V0dGV4dENhdGFsb2cuZ2V0Q3VycmVudExhbmd1YWdlKCk7XG4gICAgICAgIHNldHRpbmdzLnhockZpZWxkcyA9IHtcbiAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgc2V0dGluZ3MudXJsID0gb2xVcmlBcHBlbmRQYXJhbXModXJsLCB7XG4gICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgIGxhbmc6IGxhbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVTZWFyY2hDb29yZGluYXRlc18gPSBmdW5jdGlvbiBjcmVhdGVTZWFyY2hDb29yZGluYXRlc18odmlldykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIHZpZXdQcm9qZWN0aW9uID0gdmlldy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgdmFyIGV4dGVudCA9IHZpZXdQcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHJldHVybiBmdW5jdGlvbiAocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgc3VnZ2VzdGlvbnMgPSBbXTtcblxuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gX3RoaXMzLm5nZW9BdXRvUHJvamVjdGlvbl8uc3RyaW5nVG9Db29yZGluYXRlcyhxdWVyeSk7XG5cbiAgICAgIGlmIChjb29yZGluYXRlcyA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3NpdGlvbiA9IF90aGlzMy5uZ2VvQXV0b1Byb2plY3Rpb25fLnRyeVByb2plY3Rpb25zV2l0aEludmVyc2lvbihjb29yZGluYXRlcywgZXh0ZW50LCB2aWV3UHJvamVjdGlvbiwgX3RoaXMzLm9wdGlvbnMuY29vcmRpbmF0ZXNQcm9qZWN0aW9ucyk7XG5cbiAgICAgIGlmIChwb3NpdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICBsYWJlbDogY29vcmRpbmF0ZXMuam9pbignICcpLFxuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIHR0X3NvdXJjZTogJ2Nvb3JkaW5hdGVzJ1xuICAgICAgfSk7XG4gICAgICBjYWxsYmFjayhzdWdnZXN0aW9ucyk7XG4gICAgfTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0U2VhcmNoU3R5bGVfID0gZnVuY3Rpb24gZ2V0U2VhcmNoU3R5bGVfKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgICBpZiAoIWZlYXR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmZWF0dXJlJyk7XG4gICAgfVxuXG4gICAgdmFyIHN0eWxlID0gYnVpbGRTdHlsZSh0aGlzLm9wdGlvbnMuc3R5bGVzW2ZlYXR1cmUuZ2V0KCdsYXllcl9uYW1lJyldIHx8IHRoaXMub3B0aW9ucy5zdHlsZXNbJ2RlZmF1bHQnXSk7XG4gICAgdmFyIHRydWVTdHlsZSA9IHN0eWxlO1xuXG4gICAgaWYgKHRoaXMuY29sb3IpIHtcbiAgICAgIHZhciBjb2xvciA9IGFzQ29sb3JBcnJheSh0aGlzLmNvbG9yKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZSA9IHRydWVTdHlsZS5nZXRTdHJva2UoKTtcbiAgICAgIHZhciBwcmV2U3Ryb2tlQ29sb3IgPSBzdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgdmFyIHN0cm9rZUNvbG9yID0gY29sb3Iuc2xpY2UoKTtcbiAgICAgIHN0cm9rZUNvbG9yWzNdID0gcHJldlN0cm9rZUNvbG9yWzNdO1xuXG4gICAgICBpZiAoc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgc3Ryb2tlU3R5bGUuc2V0Q29sb3Ioc3Ryb2tlQ29sb3IpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmlsbFN0eWxlID0gdHJ1ZVN0eWxlLmdldEZpbGwoKTtcbiAgICAgIHZhciBwcmV2RmlsbENvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG4gICAgICB2YXIgZmlsbENvbG9yID0gY29sb3Iuc2xpY2UoKTtcbiAgICAgIGZpbGxDb2xvclszXSA9IHByZXZGaWxsQ29sb3JbM107XG5cbiAgICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgICAgZmlsbFN0eWxlLnNldENvbG9yKGZpbGxDb2xvcik7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbWFnZVN0eWxlID0gdHJ1ZVN0eWxlLmdldEltYWdlKCk7XG5cbiAgICAgIGlmIChpbWFnZVN0eWxlKSB7XG4gICAgICAgIGltYWdlU3R5bGUgPSBpbWFnZVN0eWxlLmNsb25lKCk7XG4gICAgICAgIHZhciBjaXJjbGVTdHlsZSA9IGltYWdlU3R5bGU7XG4gICAgICAgIHZhciBpbWFnZVN0cm9rZVN0eWxlID0gY2lyY2xlU3R5bGUuZ2V0U3Ryb2tlKCk7XG5cbiAgICAgICAgaWYgKGltYWdlU3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgICBpbWFnZVN0cm9rZVN0eWxlLnNldENvbG9yKHN0cm9rZUNvbG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbWFnZUZpbGxTdHlsZSA9IGNpcmNsZVN0eWxlLmdldEZpbGwoKTtcblxuICAgICAgICBpZiAoaW1hZ2VGaWxsU3R5bGUpIHtcbiAgICAgICAgICBpbWFnZUZpbGxTdHlsZS5zZXRDb2xvcihmaWxsQ29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ1ZVN0eWxlLnNldEltYWdlKGltYWdlU3R5bGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlU3R5bGU7XG4gIH07XG5cbiAgX3Byb3RvLnNldFN0eWxlQ29sb3IgPSBmdW5jdGlvbiBzZXRTdHlsZUNvbG9yKGNvbG9yKSB7XG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICB0aGlzLm5nZW9GZWF0dXJlT3ZlcmxheU1nci5nZXRMYXllcigpLmNoYW5nZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNldFRURHJvcGRvd25WaXNpYmlsaXR5XyA9IGZ1bmN0aW9uIHNldFRURHJvcGRvd25WaXNpYmlsaXR5XygpIHtcbiAgICBpZiAodGhpcy5jbGVhckJ1dHRvbikge1xuICAgICAgdmFyIHR0RHJvcGRvd24gPSB0aGlzLmVsZW1lbnRfLmZpbmQoJy50d2l0dGVyLXR5cGVhaGVhZCAudHQtbWVudScpO1xuICAgICAgdGhpcy5pbnB1dFZhbHVlID8gdHREcm9wZG93bi5zaG93KCkgOiB0dERyb3Bkb3duLmhpZGUoKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLm9uQ2xlYXJCdXR0b24gPSBmdW5jdGlvbiBvbkNsZWFyQnV0dG9uKCkge1xuICAgIHRoaXMuZmVhdHVyZU92ZXJsYXlfLmNsZWFyKCk7XG4gICAgdGhpcy5jbGVhcigpO1xuICAgIHRoaXMuZGlzcGxheUNvbG9yUGlja2VyID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdmFyIHR5cGVhaGVhZCA9IHRoaXMuZWxlbWVudF8uZmluZCgnLnR3aXR0ZXItdHlwZWFoZWFkJyk7XG4gICAgdmFyIHR0bWVudSA9IHR5cGVhaGVhZC5jaGlsZHJlbignLnR0LW1lbnUnKTtcbiAgICB2YXIgaW5wdXRzID0gdHlwZWFoZWFkLmNoaWxkcmVuKCdpbnB1dCcpO1xuICAgIHRoaXMuaW5wdXRWYWx1ZSA9ICcnO1xuICAgICQoaW5wdXRzWzFdKS50eXBlYWhlYWQoJ3ZhbCcsICcnKTtcbiAgICB0dG1lbnUuY2hpbGRyZW4oJy50dC1kYXRhc2V0JykuZW1wdHkoKTtcbiAgICB0aGlzLnNldFRURHJvcGRvd25WaXNpYmlsaXR5XygpO1xuICB9O1xuXG4gIF9wcm90by5ibHVyID0gZnVuY3Rpb24gYmx1cigpIHtcbiAgICB2YXIgdHlwZWFoZWFkID0gdGhpcy5lbGVtZW50Xy5maW5kKCcudHdpdHRlci10eXBlYWhlYWQnKTtcbiAgICB2YXIgaW5wdXRzID0gdHlwZWFoZWFkLmNoaWxkcmVuKCdpbnB1dCcpO1xuICAgIHRoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgJChpbnB1dHNbMV0pLmJsdXIoKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uc2VsZWN0XyA9IGZ1bmN0aW9uIHNlbGVjdF8oZXZlbnQsIHN1Z2dlc3Rpb24sIGRhdGFzZXQpIHtcbiAgICBpZiAoIXRoaXMubWFwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gICAgfVxuXG4gICAgaWYgKHN1Z2dlc3Rpb24udHRfc291cmNlID09PSAnY29vcmRpbmF0ZXMnKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZVN1Z2dlc3Rpb24gPSBzdWdnZXN0aW9uO1xuICAgICAgdmFyIGdlb20gPSBuZXcgb2xHZW9tUG9pbnQoY29vcmRpbmF0ZVN1Z2dlc3Rpb24ucG9zaXRpb24pO1xuICAgICAgdGhpcy5mZWF0dXJlT3ZlcmxheV8uY2xlYXIoKTtcbiAgICAgIHRoaXMuZmVhdHVyZU92ZXJsYXlfLmFkZEZlYXR1cmUobmV3IG9sRmVhdHVyZSh7XG4gICAgICAgIGdlb21ldHJ5OiBnZW9tLFxuICAgICAgICAnbGF5ZXJfbmFtZSc6IENPT1JESU5BVEVTX0xBWUVSX05BTUVcbiAgICAgIH0pKTtcbiAgICAgIHRoaXMubWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoY29vcmRpbmF0ZVN1Z2dlc3Rpb24ucG9zaXRpb24pO1xuICAgICAgdGhpcy5sZWF2ZVNlYXJjaF8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCEoc3VnZ2VzdGlvbiBpbnN0YW5jZW9mIG9sRmVhdHVyZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBzdWdnZXN0aW9uIHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZWxlY3RGcm9tR01GXyhldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5zZWxlY3RGcm9tR01GXyA9IGZ1bmN0aW9uIHNlbGVjdEZyb21HTUZfKGV2ZW50LCBmZWF0dXJlLCBkYXRhc2V0KSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMubWFwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gICAgfVxuXG4gICAgdmFyIGFjdGlvbnMgPSBmZWF0dXJlLmdldCgnYWN0aW9ucycpO1xuICAgIHZhciBmZWF0dXJlR2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoYWN0aW9ucykge1xuICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihpLCBpaSkge1xuICAgICAgICB2YXIgYWN0aW9uID0gYWN0aW9uc1tpXTtcbiAgICAgICAgdmFyIGFjdGlvbk5hbWUgPSBhY3Rpb24uYWN0aW9uO1xuICAgICAgICB2YXIgYWN0aW9uRGF0YSA9IGFjdGlvbi5kYXRhO1xuXG4gICAgICAgIGlmIChhY3Rpb25OYW1lID09ICdhZGRfdGhlbWUnKSB7XG4gICAgICAgICAgX3RoaXM0LmdtZlRoZW1lc18uZ2V0VGhlbWVzT2JqZWN0KCkudGhlbihmdW5jdGlvbiAodGhlbWVzKSB7XG4gICAgICAgICAgICB2YXIgdGhlbWUgPSBmaW5kVGhlbWVCeU5hbWUodGhlbWVzLCBhY3Rpb25EYXRhKTtcblxuICAgICAgICAgICAgaWYgKHRoZW1lKSB7XG4gICAgICAgICAgICAgIGdtZkJhY2tncm91bmRsYXllclN0YXR1cy50b3VjaGVkQnlVc2VyID0gdHJ1ZTtcblxuICAgICAgICAgICAgICBfdGhpczQuZ21mVHJlZU1hbmFnZXJfLmFkZEZpcnN0TGV2ZWxHcm91cHModGhlbWUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbk5hbWUgPT0gJ2FkZF9ncm91cCcpIHtcbiAgICAgICAgICBfdGhpczQuZ21mVHJlZU1hbmFnZXJfLmFkZEdyb3VwQnlOYW1lKGFjdGlvbkRhdGEsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbk5hbWUgPT0gJ2FkZF9sYXllcicpIHtcbiAgICAgICAgICB2YXIgZ3JvdXBBY3Rpb25zID0gX3RoaXM0Lm9wdGlvbnMuZGF0YXNvdXJjZXNbMF0uZ3JvdXBBY3Rpb25zO1xuICAgICAgICAgIHZhciBkYXRhc291cmNlc0FjdGlvbnNIYXZlQWRkTGF5ZXI7XG4gICAgICAgICAgZ3JvdXBBY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwQWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZ3JvdXBBY3Rpb24uYWN0aW9uID09PSAnYWRkX2xheWVyJykge1xuICAgICAgICAgICAgICBkYXRhc291cmNlc0FjdGlvbnNIYXZlQWRkTGF5ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChkYXRhc291cmNlc0FjdGlvbnNIYXZlQWRkTGF5ZXIpIHtcbiAgICAgICAgICAgIHZhciBzaWxlbnQgPSAhIWZlYXR1cmVHZW9tZXRyeTtcblxuICAgICAgICAgICAgX3RoaXM0LmdtZlRyZWVNYW5hZ2VyXy5hZGRHcm91cEJ5TGF5ZXJOYW1lKGFjdGlvbkRhdGEsIHRydWUsIHNpbGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfdGhpczQuc2VhcmNoQWN0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIF90aGlzNC5zZWFyY2hBY3Rpb25DYWxsYmFjayhhY3Rpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIF9sb29wMihpLCBpaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNpemUgPSB0aGlzLm1hcC5nZXRTaXplKCk7XG5cbiAgICBpZiAoZmVhdHVyZUdlb21ldHJ5IGluc3RhbmNlb2YgU2ltcGxlR2VvbWV0cnkgJiYgc2l6ZSkge1xuICAgICAgdmFyIHZpZXcgPSB0aGlzLm1hcC5nZXRWaWV3KCk7XG4gICAgICB0aGlzLmZlYXR1cmVPdmVybGF5Xy5jbGVhcigpO1xuICAgICAgdGhpcy5mZWF0dXJlT3ZlcmxheV8uYWRkRmVhdHVyZShmZWF0dXJlKTtcbiAgICAgIHRoaXMuZGlzcGxheUNvbG9yUGlja2VyID0gdHJ1ZTtcbiAgICAgIHZhciBmaXRBcnJheSA9IGZlYXR1cmVHZW9tZXRyeS5nZXRUeXBlKCkgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nID8gZmVhdHVyZUdlb21ldHJ5LmdldEV4dGVudCgpIDogZmVhdHVyZUdlb21ldHJ5O1xuICAgICAgdmlldy5maXQoZml0QXJyYXksIHtcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgbWF4Wm9vbTogdGhpcy5vcHRpb25zLm1heFpvb20gfHwgMTZcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMubGVhdmVTZWFyY2hfKCk7XG4gIH07XG5cbiAgX3Byb3RvLmxlYXZlU2VhcmNoXyA9IGZ1bmN0aW9uIGxlYXZlU2VhcmNoXygpIHtcbiAgICBpZiAoIXRoaXMuY2xlYXJCdXR0b24pIHtcbiAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICB0aGlzLmJsdXIoKTtcbiAgfTtcblxuICBfcHJvdG8uY2xvc2VfID0gZnVuY3Rpb24gY2xvc2VfKCkge1xuICAgIGlmICghdGhpcy5jbGVhckJ1dHRvbikge1xuICAgICAgdGhpcy5zZXRUVERyb3Bkb3duVmlzaWJpbGl0eV8oKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmRhdGFzZXRzZW1wdHlfID0gZnVuY3Rpb24gZGF0YXNldHNlbXB0eV8oZXZlbnQsIHF1ZXJ5LCBlbXB0eSkge1xuICAgIHZhciBtZW51ID0gdGhpcy5lbGVtZW50Xy5maW5kKCcudHdpdHRlci10eXBlYWhlYWQgLnR0LW1lbnUnKTtcbiAgICB2YXIgbWVzc2FnZSA9IG1lbnUuY2hpbGRyZW4oJy5nbWYtc2VhcmNoLW5vLXJlc3VsdHMnKTtcblxuICAgIGlmIChtZXNzYWdlLmxlbmd0aCA9PSAwKSB7XG4gICAgICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nXztcbiAgICAgIHZhciBpbm5lckhUTUwgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ05vIHJlc3VsdCBmb3VuZCcpO1xuICAgICAgdmFyIGRpdiA9ICQoXCI8ZGl2IGNsYXNzPVxcXCJnbWYtc2VhcmNoLW5vLXJlc3VsdHNcXFwiIHRyYW5zbGF0ZT5cIiArIGlubmVySFRNTCArIFwiPC9kaXY+XCIpO1xuICAgICAgbWVudS5hcHBlbmQoZGl2KTtcbiAgICB9XG5cbiAgICBpZiAoZW1wdHkpIHtcbiAgICAgIG1lc3NhZ2Uuc2hvdygpO1xuICAgICAgbWVudS5hZGRDbGFzcygnZ21mLXNlYXJjaC1uby1yZXN1bHRzJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbnUucmVtb3ZlQ2xhc3MoJ2dtZi1zZWFyY2gtbm8tcmVzdWx0cycpO1xuICAgICAgbWVzc2FnZS5oaWRlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5mdWxsdGV4dHNlYXJjaF8gPSBmdW5jdGlvbiBmdWxsdGV4dHNlYXJjaF8ocXVlcnksIHJlc3VsdEluZGV4LCBvcHRfem9vbSkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKHJlc3VsdEluZGV4IDwgMSkge1xuICAgICAgcmVzdWx0SW5kZXggPSAxO1xuICAgIH1cblxuICAgIHRoaXMuZnVsbFRleHRTZWFyY2hfLnNlYXJjaChxdWVyeSwge1xuICAgICAgbGltaXQ6IFwiXCIgKyByZXN1bHRJbmRleFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmICghX3RoaXM1Lm1hcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhICYmIGRhdGEuZmVhdHVyZXNbcmVzdWx0SW5kZXggLSAxXSkge1xuICAgICAgICB2YXIgZm9ybWF0ID0gbmV3IG9sRm9ybWF0R2VvSlNPTigpO1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGZvcm1hdC5yZWFkRmVhdHVyZShkYXRhLmZlYXR1cmVzW3Jlc3VsdEluZGV4IC0gMV0pO1xuXG4gICAgICAgIF90aGlzNS5mZWF0dXJlT3ZlcmxheV8uYWRkRmVhdHVyZShmZWF0dXJlKTtcblxuICAgICAgICB2YXIgZml0T3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGlmIChvcHRfem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZml0T3B0aW9ucy5tYXhab29tID0gb3B0X3pvb207XG4gICAgICAgICAgZml0T3B0aW9ucy5zaXplID0gX3RoaXM1Lm1hcC5nZXRTaXplKCkgfHwgbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczUubWFwLmdldFZpZXcoKS5maXQoZ2VvbWV0cnkuZ2V0RXh0ZW50KCksIGZpdE9wdGlvbnMpO1xuXG4gICAgICAgIF90aGlzNS5pbnB1dFZhbHVlID0gZmVhdHVyZS5nZXQoJ2xhYmVsJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VfKGV2ZW50LCBxdWVyeSkge1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YXNldHNlbXB0eV8oZXZlbnQsIHF1ZXJ5LCBmYWxzZSk7XG4gIH07XG5cbiAgcmV0dXJuIFNlYXJjaENvbnRyb2xsZXI7XG59KCk7XG5teU1vZHVsZS5jb250cm9sbGVyKCdnbWZTZWFyY2hDb250cm9sbGVyJywgU2VhcmNoQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBnbWZTZWFyY2hDb21wb25lbnQgZnJvbSAnZ21mL3NlYXJjaC9jb21wb25lbnQuanMnO1xuaW1wb3J0IGdtZlNlYXJjaEZ1bGx0ZXh0U2VhcmNoIGZyb20gJ2dtZi9zZWFyY2gvRnVsbHRleHRTZWFyY2guanMnO1xuaW1wb3J0ICcuL3NlYXJjaC5zY3NzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCdnbWZTZWFyY2hNb2R1bGUnLCBbZ21mU2VhcmNoQ29tcG9uZW50Lm5hbWUsIGdtZlNlYXJjaEZ1bGx0ZXh0U2VhcmNoLm5hbWVdKTsiLCJUaGVtZU1hbmFnZXJTZXJ2aWNlLiRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCIsIFwiZ21mVGhlbWVzXCIsIFwiZ21mVHJlZU1hbmFnZXJNb2RlRmx1c2hcIiwgXCJnbWZUcmVlTWFuYWdlclwiLCBcIm5nZW9TdGF0ZU1hbmFnZXJcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBnbWZMYXllcnRyZWVUcmVlTWFuYWdlciBmcm9tICdnbWYvbGF5ZXJ0cmVlL1RyZWVNYW5hZ2VyLmpzJztcbmltcG9ydCBnbWZUaGVtZVRoZW1lcywgeyBmaW5kVGhlbWVCeU5hbWUgfSBmcm9tICdnbWYvdGhlbWUvVGhlbWVzLmpzJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyU2VydmljZSBmcm9tICduZ2VvL3N0YXRlbWFuYWdlci9TZXJ2aWNlLmpzJztcbmV4cG9ydCB2YXIgVGhlbWVFdmVudFR5cGUgPSB7XG4gIFRIRU1FX05BTUVfU0VUOiAnZ21mLXRoZW1lbWFuYWdlci10aGVtZV9uYW1lX3NldCdcbn07XG5leHBvcnQgZnVuY3Rpb24gVGhlbWVNYW5hZ2VyU2VydmljZSgkcm9vdFNjb3BlLCBnbWZUaGVtZXMsIGdtZlRyZWVNYW5hZ2VyTW9kZUZsdXNoLCBnbWZUcmVlTWFuYWdlciwgbmdlb1N0YXRlTWFuYWdlcikge1xuICB0aGlzLiRyb290U2NvcGVfID0gJHJvb3RTY29wZTtcbiAgdGhpcy5nbWZUaGVtZXNfID0gZ21mVGhlbWVzO1xuICB0aGlzLm1vZGVGbHVzaCA9IGdtZlRyZWVNYW5hZ2VyTW9kZUZsdXNoO1xuICB0aGlzLmdtZlRyZWVNYW5hZ2VyXyA9IGdtZlRyZWVNYW5hZ2VyO1xuICB0aGlzLm5nZW9TdGF0ZU1hbmFnZXJfID0gbmdlb1N0YXRlTWFuYWdlcjtcbiAgdGhpcy50aGVtZU5hbWVfID0gJyc7XG59XG5cblRoZW1lTWFuYWdlclNlcnZpY2UucHJvdG90eXBlLmFkZFRoZW1lID0gZnVuY3Rpb24gKHRoZW1lLCBvcHRfc2lsZW50KSB7XG4gIGlmICh0aGlzLm1vZGVGbHVzaCkge1xuICAgIHRoaXMubmdlb1N0YXRlTWFuYWdlcl8udXBkYXRlU3RhdGUoe1xuICAgICAgJ3RoZW1lJzogdGhlbWUubmFtZVxuICAgIH0pO1xuICAgIHRoaXMuc2V0VGhlbWVOYW1lKHRoZW1lLm5hbWUpO1xuICAgIHRoaXMuZ21mVHJlZU1hbmFnZXJfLnNldEZpcnN0TGV2ZWxHcm91cHModGhlbWUuY2hpbGRyZW4pO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZ21mVHJlZU1hbmFnZXJfLmFkZEZpcnN0TGV2ZWxHcm91cHModGhlbWUuY2hpbGRyZW4sIGZhbHNlLCBvcHRfc2lsZW50KTtcbiAgfVxufTtcblxuVGhlbWVNYW5hZ2VyU2VydmljZS5wcm90b3R5cGUuZ2V0VGhlbWVOYW1lID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy50aGVtZU5hbWVfO1xufTtcblxuVGhlbWVNYW5hZ2VyU2VydmljZS5wcm90b3R5cGUuaXNMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gIXRoaXMuZ21mVGhlbWVzXy5sb2FkZWQ7XG59O1xuXG5UaGVtZU1hbmFnZXJTZXJ2aWNlLnByb3RvdHlwZS51cGRhdGVDdXJyZW50VGhlbWUgPSBmdW5jdGlvbiAodGhlbWVOYW1lLCBmYWxsYmFja1RoZW1lTmFtZSwgb3B0X3NpbGVudCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMuZ21mVGhlbWVzXy5nZXRUaGVtZXNPYmplY3QoKS50aGVuKGZ1bmN0aW9uICh0aGVtZXMpIHtcbiAgICBpZiAoIXRoZW1lTmFtZSAmJiBfdGhpcy5tb2RlRmx1c2gpIHtcbiAgICAgIHZhciBmYWxsYmFja1RoZW1lID0gZmluZFRoZW1lQnlOYW1lKHRoZW1lcywgZmFsbGJhY2tUaGVtZU5hbWUpO1xuXG4gICAgICBpZiAoZmFsbGJhY2tUaGVtZSkge1xuICAgICAgICBfdGhpcy5nbWZUcmVlTWFuYWdlcl8uc2V0SW5pdGlhbEZpcnN0TGV2ZWxHcm91cHMoZmFsbGJhY2tUaGVtZS5jaGlsZHJlbik7XG5cbiAgICAgICAgX3RoaXMuZ21mVHJlZU1hbmFnZXJfLmFkZEZpcnN0TGV2ZWxHcm91cHMoZmFsbGJhY2tUaGVtZS5jaGlsZHJlbiwgZmFsc2UsIG9wdF9zaWxlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGVtZU5hbWUpIHtcbiAgICAgIHZhciB0aGVtZSA9IGZpbmRUaGVtZUJ5TmFtZSh0aGVtZXMsIHRoZW1lTmFtZSk7XG5cbiAgICAgIGlmICh0aGVtZSkge1xuICAgICAgICBfdGhpcy5hZGRUaGVtZSh0aGVtZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIF90aGlzLnNldFRoZW1lTmFtZShmYWxsYmFja1RoZW1lTmFtZSk7XG4gICAgfVxuICB9KTtcbn07XG5cblRoZW1lTWFuYWdlclNlcnZpY2UucHJvdG90eXBlLnNldFRoZW1lTmFtZSA9IGZ1bmN0aW9uIChuYW1lLCBvcHRfc2lsZW50KSB7XG4gIHRoaXMudGhlbWVOYW1lXyA9IG5hbWU7XG5cbiAgaWYgKCFvcHRfc2lsZW50KSB7XG4gICAgdGhpcy4kcm9vdFNjb3BlXy4kZW1pdChUaGVtZUV2ZW50VHlwZS5USEVNRV9OQU1FX1NFVCwgbmFtZSk7XG4gIH1cbn07XG5cblRoZW1lTWFuYWdlclNlcnZpY2UucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5nbWZUcmVlTWFuYWdlcl8ucmVtb3ZlQWxsKCk7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mVGhlbWVNYW5hZ2VyJywgW2dtZkxheWVydHJlZVRyZWVNYW5hZ2VyLm5hbWUsIGdtZlRoZW1lVGhlbWVzLm5hbWUsIG5nZW9TdGF0ZW1hbmFnZXJTZXJ2aWNlLm5hbWVdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ2dtZlRoZW1lTWFuYWdlcicsIFRoZW1lTWFuYWdlclNlcnZpY2UpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01hcExheWVySGVscGVyLCB7IERBVEFTT1VSQ0VfSUQgfSBmcm9tICduZ2VvL21hcC9MYXllckhlbHBlci5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgKiBhcyBvbEFycmF5IGZyb20gJ29sL2FycmF5LmpzJztcbmltcG9ydCBvbENvbGxlY3Rpb24gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgb2xFdmVudHNFdmVudFRhcmdldCBmcm9tICdvbC9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBWZWN0b3JMYXllciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yLmpzJztcbmV4cG9ydCB2YXIgVGhlbWVzU2VydmljZSA9IGZ1bmN0aW9uIChfb2xFdmVudHNFdmVudFRhcmdldCkge1xuICBUaGVtZXNTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcIiRpbmplY3RvclwiLCBcIiRxXCIsIFwibmdlb0xheWVySGVscGVyXCIsIFwiZ2V0dGV4dENhdGFsb2dcIiwgXCJnbWZUaGVtZXNPcHRpb25zXCIsIFwiZ21mVHJlZVVybFwiXTtcblxuICBfaW5oZXJpdHNMb29zZShUaGVtZXNTZXJ2aWNlLCBfb2xFdmVudHNFdmVudFRhcmdldCk7XG5cbiAgZnVuY3Rpb24gVGhlbWVzU2VydmljZSgkaHR0cCwgJGluamVjdG9yLCAkcSwgbmdlb0xheWVySGVscGVyLCBnZXR0ZXh0Q2F0YWxvZywgZ21mVGhlbWVzT3B0aW9ucywgZ21mVHJlZVVybCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sRXZlbnRzRXZlbnRUYXJnZXQuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIF90aGlzLmFkZEJsYW5rQmFja2dyb3VuZExheWVyXyA9IHRydWU7XG5cbiAgICBpZiAoZ21mVGhlbWVzT3B0aW9ucy5hZGRCbGFua0JhY2tncm91bmRMYXllciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBfdGhpcy5hZGRCbGFua0JhY2tncm91bmRMYXllcl8gPSBnbWZUaGVtZXNPcHRpb25zLmFkZEJsYW5rQmFja2dyb3VuZExheWVyO1xuICAgIH1cblxuICAgIF90aGlzLiRxXyA9ICRxO1xuICAgIF90aGlzLiRodHRwXyA9ICRodHRwO1xuICAgIF90aGlzLnRyZWVVcmxfID0gZ21mVHJlZVVybDtcbiAgICBfdGhpcy5uZ2VvTG9jYXRpb25fID0gbnVsbDtcblxuICAgIGlmICgkaW5qZWN0b3IuaGFzKCduZ2VvTG9jYXRpb24nKSkge1xuICAgICAgX3RoaXMubmdlb0xvY2F0aW9uXyA9ICRpbmplY3Rvci5nZXQoJ25nZW9Mb2NhdGlvbicpO1xuICAgIH1cblxuICAgIF90aGlzLmxheWVySGVscGVyXyA9IG5nZW9MYXllckhlbHBlcjtcbiAgICBfdGhpcy5nZXR0ZXh0Q2F0YWxvZyA9IGdldHRleHRDYXRhbG9nO1xuICAgIF90aGlzLmRlZmVycmVkXyA9ICRxLmRlZmVyKCk7XG4gICAgX3RoaXMucHJvbWlzZV8gPSBfdGhpcy5kZWZlcnJlZF8ucHJvbWlzZTtcbiAgICBfdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICBfdGhpcy5iZ0xheWVyUHJvbWlzZV8gPSBudWxsO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBUaGVtZXNTZXJ2aWNlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0QmdMYXllcnMgPSBmdW5jdGlvbiBnZXRCZ0xheWVycygpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBnZXR0ZXh0Q2F0YWxvZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2c7XG5cbiAgICBpZiAodGhpcy5iZ0xheWVyUHJvbWlzZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLmJnTGF5ZXJQcm9taXNlXztcbiAgICB9XG5cbiAgICB2YXIgJHEgPSB0aGlzLiRxXztcbiAgICB2YXIgbGF5ZXJIZWxwZXIgPSB0aGlzLmxheWVySGVscGVyXztcblxuICAgIHZhciBnZXRJZHMgPSBmdW5jdGlvbiBnZXRJZHMoaXRlbSwgYXJyYXkpIHtcbiAgICAgIGFycmF5LnB1c2gob2xVdGlsR2V0VWlkKGl0ZW0pKTtcbiAgICAgIHZhciBncm91cEl0ZW0gPSBpdGVtO1xuICAgICAgdmFyIGNoaWxkcmVuID0gZ3JvdXBJdGVtLmNoaWxkcmVuIHx8IFtdO1xuICAgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgZ2V0SWRzKGNoaWxkLCBhcnJheSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soaXRlbSwgbGF5ZXIpIHtcbiAgICAgIGxheWVyLnNldCgnbGFiZWwnLCBpdGVtLm5hbWUpO1xuICAgICAgbGF5ZXIuc2V0KCdtZXRhZGF0YScsIGl0ZW0ubWV0YWRhdGEpO1xuICAgICAgbGF5ZXIuc2V0KCdkaW1lbnNpb25zJywgaXRlbS5kaW1lbnNpb25zKTtcbiAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgIGdldElkcyhpdGVtLCBpZHMpO1xuICAgICAgbGF5ZXIuc2V0KCdxdWVyeVNvdXJjZUlkcycsIGlkcyk7XG4gICAgICBsYXllci5zZXQoREFUQVNPVVJDRV9JRCwgaXRlbS5pZCk7XG4gICAgICByZXR1cm4gbGF5ZXI7XG4gICAgfTtcblxuICAgIHZhciBsYXllckxheWVyQ3JlYXRpb25GbiA9IGZ1bmN0aW9uIGxheWVyTGF5ZXJDcmVhdGlvbkZuKG9nY1NlcnZlcnMsIGdtZkxheWVyKSB7XG4gICAgICBpZiAoZ21mTGF5ZXIudHlwZSA9PT0gJ1dNVFMnKSB7XG4gICAgICAgIHZhciBnbWZMYXllcldNVFMgPSBnbWZMYXllcjtcblxuICAgICAgICBpZiAoIWdtZkxheWVyV01UUy51cmwpIHtcbiAgICAgICAgICB0aHJvdyAnTGF5ZXIgVVJMIGlzIHJlcXVpcmVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gZ2V0Tm9kZU1pblJlc29sdXRpb24oZ21mTGF5ZXJXTVRTKTtcbiAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSBnZXROb2RlTWF4UmVzb2x1dGlvbihnbWZMYXllcldNVFMpO1xuICAgICAgICB2YXIgbGF5ZXIgPSBsYXllckhlbHBlci5jcmVhdGVXTVRTTGF5ZXJGcm9tQ2FwYWJpbGl0aXRlcyhnbWZMYXllcldNVFMudXJsLCBnbWZMYXllcldNVFMubGF5ZXIgfHwgJycsIGdtZkxheWVyV01UUy5tYXRyaXhTZXQsIGdtZkxheWVyLmRpbWVuc2lvbnMsIGdtZkxheWVyV01UUy5tZXRhZGF0YS5jdXN0b21PcGVuTGF5ZXJzT3B0aW9ucywgbWluUmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbiwgZ21mTGF5ZXJXTVRTLm1ldGFkYXRhLm9wYWNpdHkpLnRoZW4oY2FsbGJhY2suYmluZChudWxsLCBnbWZMYXllcikpLnRoZW4obnVsbCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgdmFyIG1lc3NhZ2UgPSBcIlVuYWJsZSB0byBidWlsZCBsYXllciBcXFwiXCIgKyBnbWZMYXllcldNVFMubGF5ZXIgKyBcIlxcXCIgXCIgKyAoXCJmcm9tIFdNVFNDYXBhYmlsaXRpZXM6IFwiICsgZ21mTGF5ZXJXTVRTLnVybCArIFwiXFxuXCIpO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gXCJPcGVuTGF5ZXJzIGVycm9yIGlzIFxcXCJcIiArIHJlc3BvbnNlLm1lc3NhZ2U7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICByZXR1cm4gJHEucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxheWVyO1xuICAgICAgfSBlbHNlIGlmIChnbWZMYXllci50eXBlID09PSAnV01TJykge1xuICAgICAgICB2YXIgZ21mTGF5ZXJXTVMgPSBnbWZMYXllcjtcblxuICAgICAgICBpZiAoIWdtZkxheWVyV01TLm9nY1NlcnZlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnbWZMYXllcldNUy5vZ2NTZXJ2ZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZXJ2ZXIgPSBvZ2NTZXJ2ZXJzW2dtZkxheWVyV01TLm9nY1NlcnZlcl07XG5cbiAgICAgICAgaWYgKCFzZXJ2ZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2VydmVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlcnZlci51cmwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2VydmVyLnVybCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZXJ2ZXIuaW1hZ2VUeXBlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNlcnZlci5pbWFnZVR5cGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcHRfcGFyYW1zID0ge1xuICAgICAgICAgIFNUWUxFUzogZ21mTGF5ZXJXTVMuc3R5bGVcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ21mTGF5ZXIuZGltZW5zaW9ucykge1xuICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZ21mTGF5ZXIuZGltZW5zaW9ucyk7IF9pIDwgX09iamVjdCRlbnRyaWVzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIF9PYmplY3QkZW50cmllcyRfaSA9IF9PYmplY3QkZW50cmllc1tfaV0sXG4gICAgICAgICAgICAgICAga2V5ID0gX09iamVjdCRlbnRyaWVzJF9pWzBdLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzJF9pWzFdO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgb3B0X3BhcmFtc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGdtZkxheWVyLCBsYXllckhlbHBlci5jcmVhdGVCYXNpY1dNU0xheWVyKHNlcnZlci51cmwsIGdtZkxheWVyV01TLmxheWVycyB8fCAnJywgc2VydmVyLmltYWdlVHlwZSwgc2VydmVyLnR5cGUsIHVuZGVmaW5lZCwgb3B0X3BhcmFtcywgc2VydmVyLmNyZWRlbnRpYWwgPyAndXNlLWNyZWRlbnRpYWxzJyA6ICdhbm9ueW1vdXMnLCBnbWZMYXllcldNUy5tZXRhZGF0YS5jdXN0b21PcGVuTGF5ZXJzT3B0aW9ucykpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBcIlVuc3VwcG9ydGVkIHR5cGU6IFwiICsgZ21mTGF5ZXIudHlwZTtcbiAgICB9O1xuXG4gICAgdmFyIGxheWVyR3JvdXBDcmVhdGlvbkZuID0gZnVuY3Rpb24gbGF5ZXJHcm91cENyZWF0aW9uRm4ob2djU2VydmVycywgaXRlbSkge1xuICAgICAgdmFyIG9yZGVyZWRDaGlsZHJlbiA9IGl0ZW0uY2hpbGRyZW4ubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgICAgfSkucmV2ZXJzZSgpO1xuICAgICAgdmFyIHByb21pc2VzID0gb3JkZXJlZENoaWxkcmVuLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gbGF5ZXJMYXllckNyZWF0aW9uRm4ob2djU2VydmVycywgaXRlbSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKGxheWVycykge1xuICAgICAgICB2YXIgY29sbGVjdGlvbjtcblxuICAgICAgICBpZiAobGF5ZXJzKSB7XG4gICAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29sbGVjdGlvbiA9IG5ldyBvbENvbGxlY3Rpb24obGF5ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBncm91cCA9IGxheWVySGVscGVyLmNyZWF0ZUJhc2ljR3JvdXAoY29sbGVjdGlvbik7XG4gICAgICAgIGNhbGxiYWNrKGl0ZW0sIGdyb3VwKTtcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlU3VjY2Vzc0ZuID0gZnVuY3Rpb24gcHJvbWlzZVN1Y2Nlc3NGbihkYXRhKSB7XG4gICAgICB2YXIgcHJvbWlzZXMgPSBkYXRhLmJhY2tncm91bmRfbGF5ZXJzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaXRlbUxheWVyID0gaXRlbTtcbiAgICAgICAgdmFyIGl0ZW1Hcm91cCA9IGl0ZW07XG4gICAgICAgIHZhciBpdGVtVHlwZSA9IGl0ZW1MYXllci50eXBlO1xuXG4gICAgICAgIGlmIChpdGVtVHlwZSA9PT0gJ1dNVFMnIHx8IGl0ZW1UeXBlID09PSAnV01TJykge1xuICAgICAgICAgIHJldHVybiBsYXllckxheWVyQ3JlYXRpb25GbihkYXRhLm9nY1NlcnZlcnMsIGl0ZW1MYXllcik7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbUdyb3VwLmNoaWxkcmVuKSB7XG4gICAgICAgICAgcmV0dXJuIGxheWVyR3JvdXBDcmVhdGlvbkZuKGRhdGEub2djU2VydmVycywgaXRlbUdyb3VwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAkcS5hbGwocHJvbWlzZXMpO1xuICAgIH07XG5cbiAgICB0aGlzLmJnTGF5ZXJQcm9taXNlXyA9IHRoaXMucHJvbWlzZV8udGhlbihwcm9taXNlU3VjY2Vzc0ZuKS50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgIHZhciBsYXllcnMgPSBbXTtcblxuICAgICAgaWYgKF90aGlzMi5hZGRCbGFua0JhY2tncm91bmRMYXllcl8pIHtcbiAgICAgICAgZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdibGFuaycpO1xuICAgICAgICB2YXIgbGF5ZXIgPSBuZXcgVmVjdG9yTGF5ZXIoe1xuICAgICAgICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSgpXG4gICAgICAgIH0pO1xuICAgICAgICBsYXllci5zZXQoJ2xhYmVsJywgJ2JsYW5rJyk7XG4gICAgICAgIGxheWVyLnNldCgnbWV0YWRhdGEnLCB7XG4gICAgICAgICAgdGh1bWJuYWlsOiAnJ1xuICAgICAgICB9KTtcbiAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBsYXllcnM7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuYmdMYXllclByb21pc2VfO1xuICB9O1xuXG4gIF9wcm90by5nZXRUaGVtZU9iamVjdCA9IGZ1bmN0aW9uIGdldFRoZW1lT2JqZWN0KHRoZW1lTmFtZSkge1xuICAgIHJldHVybiB0aGlzLnByb21pc2VfLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHJldHVybiBmaW5kVGhlbWVCeU5hbWUoZGF0YS50aGVtZXMsIHRoZW1lTmFtZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldFRoZW1lc09iamVjdCA9IGZ1bmN0aW9uIGdldFRoZW1lc09iamVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlXy50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YS50aGVtZXM7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldEJhY2tncm91bmRMYXllcnNPYmplY3QgPSBmdW5jdGlvbiBnZXRCYWNrZ3JvdW5kTGF5ZXJzT2JqZWN0KCkge1xuICAgIGlmICh0aGlzLnByb21pc2VfID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJvbWlzZScpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb21pc2VfLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHJldHVybiBkYXRhLmJhY2tncm91bmRfbGF5ZXJzO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5nZXRPZ2NTZXJ2ZXJzT2JqZWN0ID0gZnVuY3Rpb24gZ2V0T2djU2VydmVyc09iamVjdCgpIHtcbiAgICBpZiAodGhpcy5wcm9taXNlXyA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb21pc2UnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9taXNlXy50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YS5vZ2NTZXJ2ZXJzO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5oYXNFZGl0YWJsZUxheWVycyA9IGZ1bmN0aW9uIGhhc0VkaXRhYmxlTGF5ZXJzKCkge1xuICAgIGlmICh0aGlzLnByb21pc2VfID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJvbWlzZScpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByb21pc2VfLnRoZW4odGhpcy5oYXNFZGl0YWJsZUxheWVyc18uYmluZCh0aGlzKSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhc0VkaXRhYmxlTGF5ZXJzXyA9IGZ1bmN0aW9uIGhhc0VkaXRhYmxlTGF5ZXJzXyhkYXRhKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICByZXR1cm4gZGF0YS50aGVtZXMuc29tZShmdW5jdGlvbiAodGhlbWUpIHtcbiAgICAgIHZhciBoYXNFZGl0YWJsZUxheWVycyA9IHRoZW1lLmNoaWxkcmVuLnNvbWUoX3RoaXMzLmhhc05vZGVFZGl0YWJsZUxheWVyc18uYmluZChfdGhpczMpKTtcbiAgICAgIHJldHVybiBoYXNFZGl0YWJsZUxheWVycztcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFzTm9kZUVkaXRhYmxlTGF5ZXJzXyA9IGZ1bmN0aW9uIGhhc05vZGVFZGl0YWJsZUxheWVyc18obm9kZSkge1xuICAgIHZhciBnbWZHcm91cCA9IG5vZGU7XG4gICAgdmFyIGdtZkxheWVyID0gbm9kZTtcblxuICAgIGlmIChnbWZMYXllci5lZGl0YWJsZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGhhc0VkaXRhYmxlTGF5ZXJzID0gZmFsc2U7XG4gICAgdmFyIGNoaWxkcmVuID0gZ21mR3JvdXAuY2hpbGRyZW47XG5cbiAgICBpZiAoY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICBoYXNFZGl0YWJsZUxheWVycyA9IGNoaWxkcmVuLnNvbWUodGhpcy5oYXNOb2RlRWRpdGFibGVMYXllcnNfLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNFZGl0YWJsZUxheWVycztcbiAgfTtcblxuICBfcHJvdG8ubG9hZFRoZW1lcyA9IGZ1bmN0aW9uIGxvYWRUaGVtZXMob3B0X3JvbGVJZCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLnRyZWVVcmxfKSB7XG4gICAgICB0aHJvdyAnZ21mVHJlZVVybCBzaG91bGQgYmUgZGVmaW5lZC4nO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmxvYWRlZCkge1xuICAgICAgdGhpcy5kZWZlcnJlZF8gPSB0aGlzLiRxXy5kZWZlcigpO1xuICAgICAgdGhpcy5wcm9taXNlXyA9IHRoaXMuZGVmZXJyZWRfLnByb21pc2U7XG4gICAgICB0aGlzLmJnTGF5ZXJQcm9taXNlXyA9IG51bGw7XG4gICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuJGh0dHBfLmdldCh0aGlzLnRyZWVVcmxfLCB7XG4gICAgICBwYXJhbXM6IG9wdF9yb2xlSWQgIT09IHVuZGVmaW5lZCA/IHtcbiAgICAgICAgJ3JvbGUnOiBvcHRfcm9sZUlkXG4gICAgICB9IDoge30sXG4gICAgICBjYWNoZTogZmFsc2UsXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3JzLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gXCJUaGUgdGhlbWVzIGNvbnRhaW4gc29tZSBlcnJvcnM6XFxuXCIgKyByZXNwb25zZS5kYXRhLmVycm9ycy5qb2luKCdcXG4nKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcblxuICAgICAgICBpZiAoX3RoaXM0Lm5nZW9Mb2NhdGlvbl8gIT09IG51bGwgJiYgX3RoaXM0Lm5nZW9Mb2NhdGlvbl8uaGFzUGFyYW0oJ2RlYnVnJykpIHtcbiAgICAgICAgICB3aW5kb3cuYWxlcnQobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgT2JqZWN0LnZhbHVlcyhyZXNwb25zZS5kYXRhLm9nY1NlcnZlcnMpLmZvckVhY2goZnVuY3Rpb24gKHNlcnZlcikge1xuICAgICAgICBzZXJ2ZXIuZ2VvbWV0cnlOYW1lID0gc2VydmVyLmdlb21ldHJ5TmFtZSB8fCAnZ2VvbWV0cnknO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzNC5kZWZlcnJlZF8ucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblxuICAgICAgX3RoaXM0LmRpc3BhdGNoRXZlbnQoJ2NoYW5nZScpO1xuXG4gICAgICBfdGhpczQubG9hZGVkID0gdHJ1ZTtcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIF90aGlzNC5kZWZlcnJlZF8ucmVqZWN0KHJlc3BvbnNlKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gVGhlbWVzU2VydmljZTtcbn0ob2xFdmVudHNFdmVudFRhcmdldCk7XG5leHBvcnQgZnVuY3Rpb24gZmluZEdyb3VwQnlMYXllck5vZGVOYW1lKHRoZW1lcywgbmFtZSkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGVtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIHZhciB0aGVtZSA9IHRoZW1lc1tpXTtcblxuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHRoZW1lLmNoaWxkcmVuLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgIHZhciBncm91cCA9IHRoZW1lLmNoaWxkcmVuW2pdO1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSBbXTtcbiAgICAgIGdldEZsYXROb2Rlcyhncm91cCwgY2hpbGROb2Rlcyk7XG5cbiAgICAgIGlmIChmaW5kT2JqZWN0QnlOYW1lKGNoaWxkTm9kZXMsIG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBncm91cDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5kR3JvdXBCeU5hbWUodGhlbWVzLCBuYW1lKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoZW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgdmFyIHRoZW1lID0gdGhlbWVzW2ldO1xuXG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gdGhlbWUuY2hpbGRyZW4ubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgdmFyIGdyb3VwID0gdGhlbWUuY2hpbGRyZW5bal07XG4gICAgICB2YXIgaW50ZXJuYWxOb2RlcyA9IFtdO1xuICAgICAgZ2V0RmxhdEludGVybmFsTm9kZXMoZ3JvdXAsIGludGVybmFsTm9kZXMpO1xuXG4gICAgICBpZiAoZmluZE9iamVjdEJ5TmFtZShpbnRlcm5hbE5vZGVzLCBuYW1lKSkge1xuICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZE9iamVjdEJ5TmFtZShvYmplY3RzLCBvYmplY3ROYW1lKSB7XG4gIHJldHVybiBvbEFycmF5LmZpbmQob2JqZWN0cywgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QubmFtZSA9PT0gb2JqZWN0TmFtZTtcbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZFRoZW1lQnlOYW1lKHRoZW1lcywgdGhlbWVOYW1lKSB7XG4gIHJldHVybiBmaW5kT2JqZWN0QnlOYW1lKHRoZW1lcywgdGhlbWVOYW1lKTtcbn1cblxuZnVuY3Rpb24gZ2V0RmxhdEludGVybmFsTm9kZXMobm9kZSwgbm9kZXMpIHtcbiAgdmFyIGdtZkdyb3VwID0gbm9kZTtcbiAgdmFyIGNoaWxkcmVuID0gZ21mR3JvdXAuY2hpbGRyZW47XG5cbiAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICBub2Rlcy5wdXNoKG5vZGUpO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShjaGlsZHJlbiksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgY2hpbGQgPSBfc3RlcC52YWx1ZTtcbiAgICAgIGdldEZsYXRJbnRlcm5hbE5vZGVzKGNoaWxkLCBub2Rlcyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGbGF0Tm9kZXMobm9kZSwgbm9kZXMpIHtcbiAgdmFyIGdtZkdyb3VwID0gbm9kZTtcbiAgdmFyIGNoaWxkcmVuID0gZ21mR3JvdXAuY2hpbGRyZW47XG5cbiAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShjaGlsZHJlbiksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgY2hpbGQgPSBfc3RlcDIudmFsdWU7XG4gICAgICBnZXRGbGF0Tm9kZXMoY2hpbGQsIG5vZGVzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNuYXBwaW5nQ29uZmlnKG5vZGUpIHtcbiAgdmFyIGNvbmZpZyA9IG5vZGUubWV0YWRhdGEgJiYgbm9kZS5tZXRhZGF0YS5zbmFwcGluZ0NvbmZpZyAhPT0gdW5kZWZpbmVkID8gbm9kZS5tZXRhZGF0YS5zbmFwcGluZ0NvbmZpZyA6IG51bGw7XG5cbiAgaWYgKGNvbmZpZyAmJiBjb25maWcuYWN0aXZhdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICBjb25maWcuYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBjb25maWc7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZU1heFJlc29sdXRpb24oZ21mTGF5ZXIpIHtcbiAgdmFyIG1ldGFkYXRhID0gZ21mTGF5ZXIubWV0YWRhdGE7XG4gIHZhciBnbWZMYXllcldNUyA9IGdtZkxheWVyO1xuICB2YXIgbWF4UmVzb2x1dGlvbiA9IGdtZkxheWVyV01TLm1heFJlc29sdXRpb25IaW50O1xuXG4gIGlmIChtYXhSZXNvbHV0aW9uID09PSB1bmRlZmluZWQgJiYgbWV0YWRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgIG1heFJlc29sdXRpb24gPSBtZXRhZGF0YS5tYXhSZXNvbHV0aW9uO1xuICB9XG5cbiAgcmV0dXJuIG1heFJlc29sdXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZU1pblJlc29sdXRpb24oZ21mTGF5ZXIpIHtcbiAgdmFyIG1ldGFkYXRhID0gZ21mTGF5ZXIubWV0YWRhdGE7XG4gIHZhciBnbWZMYXllcldNUyA9IGdtZkxheWVyO1xuICB2YXIgbWluUmVzb2x1dGlvbiA9IGdtZkxheWVyV01TLm1pblJlc29sdXRpb25IaW50O1xuXG4gIGlmIChtaW5SZXNvbHV0aW9uID09PSB1bmRlZmluZWQgJiYgbWV0YWRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgIG1pblJlc29sdXRpb24gPSBtZXRhZGF0YS5taW5SZXNvbHV0aW9uO1xuICB9XG5cbiAgcmV0dXJuIG1pblJlc29sdXRpb247XG59XG5leHBvcnQgdmFyIFRoZW1lTm9kZVR5cGUgPSB7XG4gIE1JWEVEX0dST1VQOiAnTWl4ZWRHcm91cCcsXG4gIE5PVF9NSVhFRF9HUk9VUDogJ05vdE1peGVkR3JvdXAnLFxuICBXTVRTOiAnV01UUycsXG4gIFdNUzogJ1dNUydcbn07XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnZ21mVGhlbWVzJywgW25nZW9NYXBMYXllckhlbHBlci5uYW1lXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCdnbWZUaGVtZXMnLCBUaGVtZXNTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IGdtZlRoZW1lTWFuYWdlciBmcm9tICdnbWYvdGhlbWUvTWFuYWdlci5qcyc7XG5pbXBvcnQgZ21mVGhlbWVTZWxlY3RvckNvbXBvbmVudCBmcm9tICdnbWYvdGhlbWUvc2VsZWN0b3JDb21wb25lbnQuanMnO1xuaW1wb3J0IGdtZlRoZW1lVGhlbWVzIGZyb20gJ2dtZi90aGVtZS9UaGVtZXMuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ2dtZlRoZW1lTW9kdWxlJywgW2dtZlRoZW1lU2VsZWN0b3JDb21wb25lbnQubmFtZSwgZ21mVGhlbWVNYW5hZ2VyLm5hbWUsIGdtZlRoZW1lVGhlbWVzLm5hbWVdKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8dWwgY2xhc3M9XCJnbWYtdGhlbWUtc2VsZWN0b3JcIj5cXG4gIDxsaVxcbiAgICAgIG5nLXJlcGVhdD1cInRoZW1lIGluICRjdHJsLnRoZW1lc1wiXFxuICAgICAgbmctY2xpY2s9XCIkY3RybC5zZXRUaGVtZSh0aGVtZSlcIlxcbiAgICAgIG5nLWNsYXNzPVwie1xcJ2dtZi10aGVtZS1zZWxlY3Rvci1hY3RpdmVcXCc6ICRjdHJsLmdtZlRoZW1lTWFuYWdlci5nZXRUaGVtZU5hbWUoKSA9PSB0aGVtZS5uYW1lfVwiPlxcbiAgICA8aW1nIGNsYXNzPVwiZ21mLXRodW1iXCJcXG4gICAgICAgICBuZy1zcmM9XCJ7ezo6dGhlbWUuaWNvbn19XCIgLz5cXG4gICAgPHNwYW4gY2xhc3M9XCJnbWYtdGV4dFwiPnt7dGhlbWUubmFtZSB8IHRyYW5zbGF0ZX19PC9zcGFuPlxcbiAgPC9saT5cXG48L3VsPlxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJnbWZUaGVtZU1hbmFnZXJcIiwgXCJnbWZUaGVtZXNcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGdtZkJhY2tncm91bmRsYXllclN0YXR1cyB9IGZyb20gJ2dtZi9iYWNrZ3JvdW5kbGF5ZXJzZWxlY3Rvci9zdGF0dXMuanMnO1xuaW1wb3J0IGdtZlRoZW1lTWFuYWdlciBmcm9tICdnbWYvdGhlbWUvTWFuYWdlci5qcyc7XG5pbXBvcnQgZ21mVGhlbWVUaGVtZXMgZnJvbSAnZ21mL3RoZW1lL1RoZW1lcy5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2Ryb3Bkb3duLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdnbWZUaGVtZVNlbGVjdG9yQ29tcG9uZW50JywgW2dtZlRoZW1lTWFuYWdlci5uYW1lLCBnbWZUaGVtZVRoZW1lcy5uYW1lXSk7XG5teU1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZ21mL3RoZW1lL3NlbGVjdG9yQ29tcG9uZW50JywgcmVxdWlyZSgnLi9zZWxlY3RvckNvbXBvbmVudC5odG1sJykpO1xufV0pO1xubXlNb2R1bGUudmFsdWUoJ2dtZlRoZW1lU2VsZWN0b3JUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uICgkYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gJGF0dHJzLmdtZlRoZW1lU2VsZWN0b3JUZW1wbGF0ZVVybDtcbiAgcmV0dXJuIHRlbXBsYXRlVXJsICE9PSB1bmRlZmluZWQgPyB0ZW1wbGF0ZVVybCA6ICdnbWYvdGhlbWUvc2VsZWN0b3JDb21wb25lbnQnO1xufSk7XG5nbWZUaGVtZVNlbGVjdG9yVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRhdHRyc1wiLCBcImdtZlRoZW1lU2VsZWN0b3JUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gZ21mVGhlbWVTZWxlY3RvclRlbXBsYXRlVXJsKCRhdHRycywgZ21mVGhlbWVTZWxlY3RvclRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBnbWZUaGVtZVNlbGVjdG9yVGVtcGxhdGVVcmwoJGF0dHJzKTtcbn1cblxudmFyIHRoZW1lU2VsZWN0b3JDb21wb25lbnQgPSB7XG4gIGJpbmRpbmdzOiB7XG4gICAgJ2ZpbHRlcic6ICc8Z21mVGhlbWVzZWxlY3RvckZpbHRlcidcbiAgfSxcbiAgY29udHJvbGxlcjogJ2dtZlRoZW1lc2VsZWN0b3JDb250cm9sbGVyJyxcbiAgdGVtcGxhdGVVcmw6IGdtZlRoZW1lU2VsZWN0b3JUZW1wbGF0ZVVybFxufTtcbm15TW9kdWxlLmNvbXBvbmVudCgnZ21mVGhlbWVzZWxlY3RvcicsIHRoZW1lU2VsZWN0b3JDb21wb25lbnQpO1xuZXhwb3J0IGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCBnbWZUaGVtZU1hbmFnZXIsIGdtZlRoZW1lcykge1xuICB0aGlzLmdtZlRoZW1lTWFuYWdlciA9IGdtZlRoZW1lTWFuYWdlcjtcbiAgdGhpcy5nbWZUaGVtZXNfID0gZ21mVGhlbWVzO1xuICB0aGlzLnRoZW1lcyA9IFtdO1xuXG4gIHRoaXMuZmlsdGVyID0gZnVuY3Rpb24gKHRoZW1lKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfTtcblxuICB0aGlzLmxpc3RlbmVyS2V5c18gPSBbXTtcbiAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKHRoaXMuZ21mVGhlbWVzXywgJ2NoYW5nZScsIHRoaXMuc2V0VGhlbWVzXywgdGhpcykpO1xuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIHRoaXMuaGFuZGxlRGVzdHJveV8uYmluZCh0aGlzKSk7XG59XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnNldFRoZW1lc18gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5nbWZUaGVtZXNfLmdldFRoZW1lc09iamVjdCgpLnRoZW4oZnVuY3Rpb24gKHRoZW1lcykge1xuICAgIF90aGlzLnRoZW1lcyA9IF90aGlzLmZpbHRlciA/IHRoZW1lcy5maWx0ZXIoX3RoaXMuZmlsdGVyKSA6IHRoZW1lcztcbiAgfSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5zZXRUaGVtZSA9IGZ1bmN0aW9uICh0aGVtZSwgb3B0X3NpbGVudCkge1xuICBnbWZCYWNrZ3JvdW5kbGF5ZXJTdGF0dXMudG91Y2hlZEJ5VXNlciA9IHRydWU7XG5cbiAgaWYgKHRoZW1lKSB7XG4gICAgdGhpcy5nbWZUaGVtZU1hbmFnZXIuYWRkVGhlbWUodGhlbWUsIG9wdF9zaWxlbnQpO1xuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVEZXN0cm95XyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gIHRoaXMubGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xufTtcblxubXlNb2R1bGUuY29udHJvbGxlcignZ21mVGhlbWVzZWxlY3RvckNvbnRyb2xsZXInLCBDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIi8qKlxuICogZmxvYXRUaGVhZCB3cmFwcGVyIGZvciBBbmd1bGFySlNcbiAqIEB2ZXJzaW9uIHYwLjEuMCAtIDIwMTUtMTAtMjVcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9icmFuZG9uLWJhcmtlci9hbmd1bGFyLWZsb2F0VGhlYWRcbiAqIEBhdXRob3IgQnJhbmRvbiBCYXJrZXJcbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2Zsb2F0VGhlYWQnLCBbXSkuZGlyZWN0aXZlKCdmbG9hdFRoZWFkJywgWyckdGltZW91dCcsICckbG9nJywgZmxvYXRUaGVhZF0pO1xuXG4gIGZ1bmN0aW9uIGZsb2F0VGhlYWQoJHRpbWVvdXQsICRsb2cpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGZsb2F0VGhlYWQ6ICc9PycsXG4gICAgICAgIGZsb2F0VGhlYWRFbmFibGVkOiAnPT8nXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgICAgICBpZiAoISRhdHRycy5oYXNPd25Qcm9wZXJ0eSgnZmxvYXRUaGVhZEVuYWJsZWQnKSkge1xuICAgICAgICAgICRzY29wZS5mbG9hdFRoZWFkRW5hYmxlZCA9ICRhdHRycy5mbG9hdFRoZWFkRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISRhdHRycy5oYXNPd25Qcm9wZXJ0eSgnZmxvYXRUaGVhZCcpIHx8ICRhdHRycy5mbG9hdFRoZWFkID09PSAnJykge1xuICAgICAgICAgICRzY29wZS5mbG9hdFRoZWFkID0gJGF0dHJzLmZsb2F0VGhlYWQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgfV0sXG4gICAgICBsaW5rOiBsaW5rLFxuICAgICAgcmVzdHJpY3Q6ICdBJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCdmbG9hdFRoZWFkRW5hYmxlZCcsIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KCRzY29wZS5mbG9hdFRoZWFkKSkge1xuICAgICAgICAgICAgalF1ZXJ5KCRlbGVtZW50KS5mbG9hdFRoZWFkKCRzY29wZS5mbG9hdFRoZWFkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgalF1ZXJ5KCRlbGVtZW50KS5mbG9hdFRoZWFkKCdkZXN0cm95Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiR3YXRjaCgnZmxvYXRUaGVhZCcsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwgfHwgISRzY29wZS5mbG9hdFRoZWFkRW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGpRdWVyeSgkZWxlbWVudCkuZmxvYXRUaGVhZCgnZGVzdHJveScpO1xuXG4gICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KG5ld1ZhbCkpIHtcbiAgICAgICAgICBqUXVlcnkoJGVsZW1lbnQpLmZsb2F0VGhlYWQobmV3VmFsKTtcbiAgICAgICAgfVxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChuZ01vZGVsKSB7XG4gICAgICAgIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCRzY29wZS5mbG9hdFRoZWFkRW5hYmxlZCAmJiBhbmd1bGFyLmlzT2JqZWN0KCRzY29wZS5mbG9hdFRoZWFkKSkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBqUXVlcnkoJGVsZW1lbnQpLmZsb2F0VGhlYWQoJ3JlZmxvdycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsb2cuaW5mbygnZmxvYXRUaGVhZDogbmdNb2RlbCBub3QgcHJvdmlkZWQhJyk7XG4gICAgICB9XG5cbiAgICAgICRlbGVtZW50LmJpbmQoJ3VwZGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGpRdWVyeSgkZWxlbWVudCkuZmxvYXRUaGVhZCgncmVmbG93Jyk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfSk7XG4gICAgICAkZWxlbWVudC5iaW5kKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgalF1ZXJ5KCRlbGVtZW50KS5mbG9hdFRoZWFkKCdkZXN0cm95Jyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uIChhMCkge1xuICAgICAgcmV0dXJuIHJvb3RbXCJCbG9vZGhvdW5kXCJdID0gZmFjdG9yeShhMCk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbiAgfSBlbHNlIHtcbiAgICByb290W1wiQmxvb2Rob3VuZFwiXSA9IGZhY3Rvcnkocm9vdFtcImpRdWVyeVwiXSk7XG4gIH1cbn0pKHRoaXMsIGZ1bmN0aW9uICgkKSB7XG4gIHZhciBfID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTXNpZTogZnVuY3Rpb24gaXNNc2llKCkge1xuICAgICAgICByZXR1cm4gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhtc2llIHxydjopKFxcZCsoLlxcZCspPykvaSlbMl0gOiBmYWxzZTtcbiAgICAgIH0sXG4gICAgICBpc0JsYW5rU3RyaW5nOiBmdW5jdGlvbiBpc0JsYW5rU3RyaW5nKHN0cikge1xuICAgICAgICByZXR1cm4gIXN0ciB8fCAvXlxccyokLy50ZXN0KHN0cik7XG4gICAgICB9LFxuICAgICAgZXNjYXBlUmVnRXhDaGFyczogZnVuY3Rpb24gZXNjYXBlUmVnRXhDaGFycyhzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG4gICAgICB9LFxuICAgICAgaXNTdHJpbmc6IGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIjtcbiAgICAgIH0sXG4gICAgICBpc051bWJlcjogZnVuY3Rpb24gaXNOdW1iZXIob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm51bWJlclwiO1xuICAgICAgfSxcbiAgICAgIGlzQXJyYXk6ICQuaXNBcnJheSxcbiAgICAgIGlzRnVuY3Rpb246ICQuaXNGdW5jdGlvbixcbiAgICAgIGlzT2JqZWN0OiAkLmlzUGxhaW5PYmplY3QsXG4gICAgICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiO1xuICAgICAgfSxcbiAgICAgIGlzRWxlbWVudDogZnVuY3Rpb24gaXNFbGVtZW50KG9iaikge1xuICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gICAgICB9LFxuICAgICAgaXNKUXVlcnk6IGZ1bmN0aW9uIGlzSlF1ZXJ5KG9iaikge1xuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgJDtcbiAgICAgIH0sXG4gICAgICB0b1N0cjogZnVuY3Rpb24gdG9TdHIocykge1xuICAgICAgICByZXR1cm4gXy5pc1VuZGVmaW5lZChzKSB8fCBzID09PSBudWxsID8gXCJcIiA6IHMgKyBcIlwiO1xuICAgICAgfSxcbiAgICAgIGJpbmQ6ICQucHJveHksXG4gICAgICBlYWNoOiBmdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGNiKSB7XG4gICAgICAgICQuZWFjaChjb2xsZWN0aW9uLCByZXZlcnNlQXJncyk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmV2ZXJzZUFyZ3MoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtYXA6ICQubWFwLFxuICAgICAgZmlsdGVyOiAkLmdyZXAsXG4gICAgICBldmVyeTogZnVuY3Rpb24gZXZlcnkob2JqLCB0ZXN0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuXG4gICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICAgICAgICAgIGlmICghKHJlc3VsdCA9IHRlc3QuY2FsbChudWxsLCB2YWwsIGtleSwgb2JqKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICB9LFxuICAgICAgc29tZTogZnVuY3Rpb24gc29tZShvYmosIHRlc3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICAgICAgICAgIGlmIChyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICB9LFxuICAgICAgbWl4aW46ICQuZXh0ZW5kLFxuICAgICAgaWRlbnRpdHk6IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9LFxuICAgICAgY2xvbmU6IGZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwge30sIG9iaik7XG4gICAgICB9LFxuICAgICAgZ2V0SWRHZW5lcmF0b3I6IGZ1bmN0aW9uIGdldElkR2VuZXJhdG9yKCkge1xuICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNvdW50ZXIrKztcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0aWZ5OiBmdW5jdGlvbiB0ZW1wbGF0aWZ5KG9iaikge1xuICAgICAgICByZXR1cm4gJC5pc0Z1bmN0aW9uKG9iaikgPyBvYmogOiB0ZW1wbGF0ZTtcblxuICAgICAgICBmdW5jdGlvbiB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZlcjogZnVuY3Rpb24gZGVmZXIoZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgICB9LFxuICAgICAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgbGF0ZXIsXG4gICAgICAgICAgICAgIGNhbGxOb3c7XG5cbiAgICAgICAgICBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblxuICAgICAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgdGhyb3R0bGU6IGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQpIHtcbiAgICAgICAgdmFyIGNvbnRleHQsIGFyZ3MsIHRpbWVvdXQsIHJlc3VsdCwgcHJldmlvdXMsIGxhdGVyO1xuICAgICAgICBwcmV2aW91cyA9IDA7XG5cbiAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICAgICAgICBwcmV2aW91cyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuXG4gICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KHZhbCkge1xuICAgICAgICByZXR1cm4gXy5pc1N0cmluZyh2YWwpID8gdmFsIDogSlNPTi5zdHJpbmdpZnkodmFsKTtcbiAgICAgIH0sXG4gICAgICBndWlkOiBmdW5jdGlvbiBndWlkKCkge1xuICAgICAgICBmdW5jdGlvbiBfcDgocykge1xuICAgICAgICAgIHZhciBwID0gKE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDIsIDgpO1xuICAgICAgICAgIHJldHVybiBzID8gXCItXCIgKyBwLnN1YnN0cigwLCA0KSArIFwiLVwiICsgcC5zdWJzdHIoNCwgNCkgOiBwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFwidHQtXCIgKyBfcDgoKSArIF9wOCh0cnVlKSArIF9wOCh0cnVlKSArIF9wOCgpO1xuICAgICAgfSxcbiAgICAgIG5vb3A6IGZ1bmN0aW9uIG5vb3AoKSB7fVxuICAgIH07XG4gIH0oKTtcblxuICB2YXIgVkVSU0lPTiA9IFwiMS4zLjFcIjtcblxuICB2YXIgdG9rZW5pemVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHJldHVybiB7XG4gICAgICBub253b3JkOiBub253b3JkLFxuICAgICAgd2hpdGVzcGFjZTogd2hpdGVzcGFjZSxcbiAgICAgIG5ncmFtOiBuZ3JhbSxcbiAgICAgIG9iajoge1xuICAgICAgICBub253b3JkOiBnZXRPYmpUb2tlbml6ZXIobm9ud29yZCksXG4gICAgICAgIHdoaXRlc3BhY2U6IGdldE9ialRva2VuaXplcih3aGl0ZXNwYWNlKSxcbiAgICAgICAgbmdyYW06IGdldE9ialRva2VuaXplcihuZ3JhbSlcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gd2hpdGVzcGFjZShzdHIpIHtcbiAgICAgIHN0ciA9IF8udG9TdHIoc3RyKTtcbiAgICAgIHJldHVybiBzdHIgPyBzdHIuc3BsaXQoL1xccysvKSA6IFtdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vbndvcmQoc3RyKSB7XG4gICAgICBzdHIgPSBfLnRvU3RyKHN0cik7XG4gICAgICByZXR1cm4gc3RyID8gc3RyLnNwbGl0KC9cXFcrLykgOiBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZ3JhbShzdHIpIHtcbiAgICAgIHN0ciA9IF8udG9TdHIoc3RyKTtcbiAgICAgIHZhciB0b2tlbnMgPSBbXSxcbiAgICAgICAgICB3b3JkID0gXCJcIjtcblxuICAgICAgXy5lYWNoKHN0ci5zcGxpdChcIlwiKSwgZnVuY3Rpb24gKGNoYXIpIHtcbiAgICAgICAgaWYgKGNoYXIubWF0Y2goL1xccysvKSkge1xuICAgICAgICAgIHdvcmQgPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHdvcmQgKyBjaGFyKTtcbiAgICAgICAgICB3b3JkICs9IGNoYXI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE9ialRva2VuaXplcih0b2tlbml6ZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRLZXkoa2V5cykge1xuICAgICAgICBrZXlzID0gXy5pc0FycmF5KGtleXMpID8ga2V5cyA6IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRva2VuaXplKG8pIHtcbiAgICAgICAgICB2YXIgdG9rZW5zID0gW107XG5cbiAgICAgICAgICBfLmVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHRva2VucyA9IHRva2Vucy5jb25jYXQodG9rZW5pemVyKF8udG9TdHIob1trXSkpKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cbiAgfSgpO1xuXG4gIHZhciBMcnVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIExydUNhY2hlKG1heFNpemUpIHtcbiAgICAgIHRoaXMubWF4U2l6ZSA9IF8uaXNOdW1iZXIobWF4U2l6ZSkgPyBtYXhTaXplIDogMTAwO1xuICAgICAgdGhpcy5yZXNldCgpO1xuXG4gICAgICBpZiAodGhpcy5tYXhTaXplIDw9IDApIHtcbiAgICAgICAgdGhpcy5zZXQgPSB0aGlzLmdldCA9ICQubm9vcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfLm1peGluKExydUNhY2hlLnByb3RvdHlwZSwge1xuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWwpIHtcbiAgICAgICAgdmFyIHRhaWxJdGVtID0gdGhpcy5saXN0LnRhaWwsXG4gICAgICAgICAgICBub2RlO1xuXG4gICAgICAgIGlmICh0aGlzLnNpemUgPj0gdGhpcy5tYXhTaXplKSB7XG4gICAgICAgICAgdGhpcy5saXN0LnJlbW92ZSh0YWlsSXRlbSk7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuaGFzaFt0YWlsSXRlbS5rZXldO1xuICAgICAgICAgIHRoaXMuc2l6ZS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUgPSB0aGlzLmhhc2hba2V5XSkge1xuICAgICAgICAgIG5vZGUudmFsID0gdmFsO1xuICAgICAgICAgIHRoaXMubGlzdC5tb3ZlVG9Gcm9udChub2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gbmV3IE5vZGUoa2V5LCB2YWwpO1xuICAgICAgICAgIHRoaXMubGlzdC5hZGQobm9kZSk7XG4gICAgICAgICAgdGhpcy5oYXNoW2tleV0gPSBub2RlO1xuICAgICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5oYXNoW2tleV07XG5cbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICB0aGlzLmxpc3QubW92ZVRvRnJvbnQobm9kZSk7XG4gICAgICAgICAgcmV0dXJuIG5vZGUudmFsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLmhhc2ggPSB7fTtcbiAgICAgICAgdGhpcy5saXN0ID0gbmV3IExpc3QoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIExpc3QoKSB7XG4gICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO1xuICAgIH1cblxuICAgIF8ubWl4aW4oTGlzdC5wcm90b3R5cGUsIHtcbiAgICAgIGFkZDogZnVuY3Rpb24gYWRkKG5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgICAgIG5vZGUubmV4dCA9IHRoaXMuaGVhZDtcbiAgICAgICAgICB0aGlzLmhlYWQucHJldiA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhlYWQgPSBub2RlO1xuICAgICAgICB0aGlzLnRhaWwgPSB0aGlzLnRhaWwgfHwgbm9kZTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShub2RlKSB7XG4gICAgICAgIG5vZGUucHJldiA/IG5vZGUucHJldi5uZXh0ID0gbm9kZS5uZXh0IDogdGhpcy5oZWFkID0gbm9kZS5uZXh0O1xuICAgICAgICBub2RlLm5leHQgPyBub2RlLm5leHQucHJldiA9IG5vZGUucHJldiA6IHRoaXMudGFpbCA9IG5vZGUucHJldjtcbiAgICAgIH0sXG4gICAgICBtb3ZlVG9Gcm9udDogZnVuY3Rpb24gbW92ZVRvRnJvbnQobm9kZSkge1xuICAgICAgICB0aGlzLnJlbW92ZShub2RlKTtcbiAgICAgICAgdGhpcy5hZGQobm9kZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBOb2RlKGtleSwgdmFsKSB7XG4gICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgIHRoaXMudmFsID0gdmFsO1xuICAgICAgdGhpcy5wcmV2ID0gdGhpcy5uZXh0ID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gTHJ1Q2FjaGU7XG4gIH0oKTtcblxuICB2YXIgUGVyc2lzdGVudFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgTE9DQUxfU1RPUkFHRTtcblxuICAgIHRyeSB7XG4gICAgICBMT0NBTF9TVE9SQUdFID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgIExPQ0FMX1NUT1JBR0Uuc2V0SXRlbShcIn5+flwiLCBcIiFcIik7XG4gICAgICBMT0NBTF9TVE9SQUdFLnJlbW92ZUl0ZW0oXCJ+fn5cIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBMT0NBTF9TVE9SQUdFID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50U3RvcmFnZShuYW1lc3BhY2UsIG92ZXJyaWRlKSB7XG4gICAgICB0aGlzLnByZWZpeCA9IFtcIl9fXCIsIG5hbWVzcGFjZSwgXCJfX1wiXS5qb2luKFwiXCIpO1xuICAgICAgdGhpcy50dGxLZXkgPSBcIl9fdHRsX19cIjtcbiAgICAgIHRoaXMua2V5TWF0Y2hlciA9IG5ldyBSZWdFeHAoXCJeXCIgKyBfLmVzY2FwZVJlZ0V4Q2hhcnModGhpcy5wcmVmaXgpKTtcbiAgICAgIHRoaXMubHMgPSBvdmVycmlkZSB8fCBMT0NBTF9TVE9SQUdFO1xuICAgICAgIXRoaXMubHMgJiYgdGhpcy5fbm9vcCgpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oUGVyc2lzdGVudFN0b3JhZ2UucHJvdG90eXBlLCB7XG4gICAgICBfcHJlZml4OiBmdW5jdGlvbiBfcHJlZml4KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXggKyBrZXk7XG4gICAgICB9LFxuICAgICAgX3R0bEtleTogZnVuY3Rpb24gX3R0bEtleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZWZpeChrZXkpICsgdGhpcy50dGxLZXk7XG4gICAgICB9LFxuICAgICAgX25vb3A6IGZ1bmN0aW9uIF9ub29wKCkge1xuICAgICAgICB0aGlzLmdldCA9IHRoaXMuc2V0ID0gdGhpcy5yZW1vdmUgPSB0aGlzLmNsZWFyID0gdGhpcy5pc0V4cGlyZWQgPSBfLm5vb3A7XG4gICAgICB9LFxuICAgICAgX3NhZmVTZXQ6IGZ1bmN0aW9uIF9zYWZlU2V0KGtleSwgdmFsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5scy5zZXRJdGVtKGtleSwgdmFsKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyci5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX25vb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBpcmVkKGtleSkpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZShrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlY29kZSh0aGlzLmxzLmdldEl0ZW0odGhpcy5fcHJlZml4KGtleSkpKTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbCwgdHRsKSB7XG4gICAgICAgIGlmIChfLmlzTnVtYmVyKHR0bCkpIHtcbiAgICAgICAgICB0aGlzLl9zYWZlU2V0KHRoaXMuX3R0bEtleShrZXkpLCBlbmNvZGUobm93KCkgKyB0dGwpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxzLnJlbW92ZUl0ZW0odGhpcy5fdHRsS2V5KGtleSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhZmVTZXQodGhpcy5fcHJlZml4KGtleSksIGVuY29kZSh2YWwpKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICAgICAgdGhpcy5scy5yZW1vdmVJdGVtKHRoaXMuX3R0bEtleShrZXkpKTtcbiAgICAgICAgdGhpcy5scy5yZW1vdmVJdGVtKHRoaXMuX3ByZWZpeChrZXkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICB2YXIgaSxcbiAgICAgICAgICAgIGtleXMgPSBnYXRoZXJNYXRjaGluZ0tleXModGhpcy5rZXlNYXRjaGVyKTtcblxuICAgICAgICBmb3IgKGkgPSBrZXlzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgIHRoaXMucmVtb3ZlKGtleXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgaXNFeHBpcmVkOiBmdW5jdGlvbiBpc0V4cGlyZWQoa2V5KSB7XG4gICAgICAgIHZhciB0dGwgPSBkZWNvZGUodGhpcy5scy5nZXRJdGVtKHRoaXMuX3R0bEtleShrZXkpKSk7XG4gICAgICAgIHJldHVybiBfLmlzTnVtYmVyKHR0bCkgJiYgbm93KCkgPiB0dGwgPyB0cnVlIDogZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUGVyc2lzdGVudFN0b3JhZ2U7XG5cbiAgICBmdW5jdGlvbiBub3coKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF8uaXNVbmRlZmluZWQodmFsKSA/IG51bGwgOiB2YWwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZSh2YWwpIHtcbiAgICAgIHJldHVybiAkLnBhcnNlSlNPTih2YWwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdhdGhlck1hdGNoaW5nS2V5cyhrZXlNYXRjaGVyKSB7XG4gICAgICB2YXIgaSxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAga2V5cyA9IFtdLFxuICAgICAgICAgIGxlbiA9IExPQ0FMX1NUT1JBR0UubGVuZ3RoO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKChrZXkgPSBMT0NBTF9TVE9SQUdFLmtleShpKSkubWF0Y2goa2V5TWF0Y2hlcikpIHtcbiAgICAgICAgICBrZXlzLnB1c2goa2V5LnJlcGxhY2Uoa2V5TWF0Y2hlciwgXCJcIikpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgfSgpO1xuXG4gIHZhciBUcmFuc3BvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgcGVuZGluZ1JlcXVlc3RzQ291bnQgPSAwLFxuICAgICAgICBwZW5kaW5nUmVxdWVzdHMgPSB7fSxcbiAgICAgICAgc2hhcmVkQ2FjaGUgPSBuZXcgTHJ1Q2FjaGUoMTApO1xuXG4gICAgZnVuY3Rpb24gVHJhbnNwb3J0KG8pIHtcbiAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgdGhpcy5tYXhQZW5kaW5nUmVxdWVzdHMgPSBvLm1heFBlbmRpbmdSZXF1ZXN0cyB8fCA2O1xuICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdFJlcSA9IG51bGw7XG4gICAgICB0aGlzLl9zZW5kID0gby50cmFuc3BvcnQ7XG4gICAgICB0aGlzLl9nZXQgPSBvLmxpbWl0ZXIgPyBvLmxpbWl0ZXIodGhpcy5fZ2V0KSA6IHRoaXMuX2dldDtcbiAgICAgIHRoaXMuX2NhY2hlID0gby5jYWNoZSA9PT0gZmFsc2UgPyBuZXcgTHJ1Q2FjaGUoMCkgOiBzaGFyZWRDYWNoZTtcbiAgICB9XG5cbiAgICBUcmFuc3BvcnQuc2V0TWF4UGVuZGluZ1JlcXVlc3RzID0gZnVuY3Rpb24gc2V0TWF4UGVuZGluZ1JlcXVlc3RzKG51bSkge1xuICAgICAgdGhpcy5tYXhQZW5kaW5nUmVxdWVzdHMgPSBudW07XG4gICAgfTtcblxuICAgIFRyYW5zcG9ydC5yZXNldENhY2hlID0gZnVuY3Rpb24gcmVzZXRDYWNoZSgpIHtcbiAgICAgIHNoYXJlZENhY2hlLnJlc2V0KCk7XG4gICAgfTtcblxuICAgIF8ubWl4aW4oVHJhbnNwb3J0LnByb3RvdHlwZSwge1xuICAgICAgX2ZpbmdlcnByaW50OiBmdW5jdGlvbiBmaW5nZXJwcmludChvKSB7XG4gICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICByZXR1cm4gby51cmwgKyBvLnR5cGUgKyAkLnBhcmFtKG8uZGF0YSB8fCB7fSk7XG4gICAgICB9LFxuICAgICAgX2dldDogZnVuY3Rpb24gX2dldChvLCBjYikge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBmaW5nZXJwcmludCxcbiAgICAgICAgICAgIGpxWGhyO1xuICAgICAgICBmaW5nZXJwcmludCA9IHRoaXMuX2ZpbmdlcnByaW50KG8pO1xuXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbGxlZCB8fCBmaW5nZXJwcmludCAhPT0gdGhpcy5sYXN0UmVxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGpxWGhyID0gcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XSkge1xuICAgICAgICAgIGpxWGhyLmRvbmUoZG9uZSkuZmFpbChmYWlsKTtcbiAgICAgICAgfSBlbHNlIGlmIChwZW5kaW5nUmVxdWVzdHNDb3VudCA8IHRoaXMubWF4UGVuZGluZ1JlcXVlc3RzKSB7XG4gICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQrKztcbiAgICAgICAgICBwZW5kaW5nUmVxdWVzdHNbZmluZ2VycHJpbnRdID0gdGhpcy5fc2VuZChvKS5kb25lKGRvbmUpLmZhaWwoZmFpbCkuYWx3YXlzKGFsd2F5cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbkRlY2tSZXF1ZXN0QXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRvbmUocmVzcCkge1xuICAgICAgICAgIGNiKG51bGwsIHJlc3ApO1xuXG4gICAgICAgICAgdGhhdC5fY2FjaGUuc2V0KGZpbmdlcnByaW50LCByZXNwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZhaWwoKSB7XG4gICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhbHdheXMoKSB7XG4gICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQtLTtcbiAgICAgICAgICBkZWxldGUgcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XTtcblxuICAgICAgICAgIGlmICh0aGF0Lm9uRGVja1JlcXVlc3RBcmdzKSB7XG4gICAgICAgICAgICB0aGF0Ll9nZXQuYXBwbHkodGhhdCwgdGhhdC5vbkRlY2tSZXF1ZXN0QXJncyk7XG5cbiAgICAgICAgICAgIHRoYXQub25EZWNrUmVxdWVzdEFyZ3MgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KG8sIGNiKSB7XG4gICAgICAgIHZhciByZXNwLCBmaW5nZXJwcmludDtcbiAgICAgICAgY2IgPSBjYiB8fCAkLm5vb3A7XG4gICAgICAgIG8gPSBfLmlzU3RyaW5nKG8pID8ge1xuICAgICAgICAgIHVybDogb1xuICAgICAgICB9IDogbyB8fCB7fTtcbiAgICAgICAgZmluZ2VycHJpbnQgPSB0aGlzLl9maW5nZXJwcmludChvKTtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXN0UmVxID0gZmluZ2VycHJpbnQ7XG5cbiAgICAgICAgaWYgKHJlc3AgPSB0aGlzLl9jYWNoZS5nZXQoZmluZ2VycHJpbnQpKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZ2V0KG8sIGNiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gVHJhbnNwb3J0O1xuICB9KCk7XG5cbiAgdmFyIFNlYXJjaEluZGV4ID0gd2luZG93LlNlYXJjaEluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIENISUxEUkVOID0gXCJjXCIsXG4gICAgICAgIElEUyA9IFwiaVwiO1xuXG4gICAgZnVuY3Rpb24gU2VhcmNoSW5kZXgobykge1xuICAgICAgbyA9IG8gfHwge307XG5cbiAgICAgIGlmICghby5kYXR1bVRva2VuaXplciB8fCAhby5xdWVyeVRva2VuaXplcikge1xuICAgICAgICAkLmVycm9yKFwiZGF0dW1Ub2tlbml6ZXIgYW5kIHF1ZXJ5VG9rZW5pemVyIGFyZSBib3RoIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlkZW50aWZ5ID0gby5pZGVudGlmeSB8fCBfLnN0cmluZ2lmeTtcbiAgICAgIHRoaXMuZGF0dW1Ub2tlbml6ZXIgPSBvLmRhdHVtVG9rZW5pemVyO1xuICAgICAgdGhpcy5xdWVyeVRva2VuaXplciA9IG8ucXVlcnlUb2tlbml6ZXI7XG4gICAgICB0aGlzLm1hdGNoQW55UXVlcnlUb2tlbiA9IG8ubWF0Y2hBbnlRdWVyeVRva2VuO1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oU2VhcmNoSW5kZXgucHJvdG90eXBlLCB7XG4gICAgICBib290c3RyYXA6IGZ1bmN0aW9uIGJvb3RzdHJhcChvKSB7XG4gICAgICAgIHRoaXMuZGF0dW1zID0gby5kYXR1bXM7XG4gICAgICAgIHRoaXMudHJpZSA9IG8udHJpZTtcbiAgICAgIH0sXG4gICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChkYXRhKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgZGF0YSA9IF8uaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV07XG5cbiAgICAgICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uIChkYXR1bSkge1xuICAgICAgICAgIHZhciBpZCwgdG9rZW5zO1xuICAgICAgICAgIHRoYXQuZGF0dW1zW2lkID0gdGhhdC5pZGVudGlmeShkYXR1bSldID0gZGF0dW07XG4gICAgICAgICAgdG9rZW5zID0gbm9ybWFsaXplVG9rZW5zKHRoYXQuZGF0dW1Ub2tlbml6ZXIoZGF0dW0pKTtcblxuICAgICAgICAgIF8uZWFjaCh0b2tlbnMsIGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIG5vZGUsIGNoYXJzLCBjaDtcbiAgICAgICAgICAgIG5vZGUgPSB0aGF0LnRyaWU7XG4gICAgICAgICAgICBjaGFycyA9IHRva2VuLnNwbGl0KFwiXCIpO1xuXG4gICAgICAgICAgICB3aGlsZSAoY2ggPSBjaGFycy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSBub2RlW0NISUxEUkVOXVtjaF0gfHwgKG5vZGVbQ0hJTERSRU5dW2NoXSA9IG5ld05vZGUoKSk7XG4gICAgICAgICAgICAgIG5vZGVbSURTXS5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWRzKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIF8ubWFwKGlkcywgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuZGF0dW1zW2lkXTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2gocXVlcnkpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgdG9rZW5zLFxuICAgICAgICAgICAgbWF0Y2hlcztcbiAgICAgICAgdG9rZW5zID0gbm9ybWFsaXplVG9rZW5zKHRoaXMucXVlcnlUb2tlbml6ZXIocXVlcnkpKTtcblxuICAgICAgICBfLmVhY2godG9rZW5zLCBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICB2YXIgbm9kZSwgY2hhcnMsIGNoLCBpZHM7XG5cbiAgICAgICAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA9PT0gMCAmJiAhdGhhdC5tYXRjaEFueVF1ZXJ5VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlID0gdGhhdC50cmllO1xuICAgICAgICAgIGNoYXJzID0gdG9rZW4uc3BsaXQoXCJcIik7XG5cbiAgICAgICAgICB3aGlsZSAobm9kZSAmJiAoY2ggPSBjaGFycy5zaGlmdCgpKSkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGVbQ0hJTERSRU5dW2NoXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobm9kZSAmJiBjaGFycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlkcyA9IG5vZGVbSURTXS5zbGljZSgwKTtcbiAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzID8gZ2V0SW50ZXJzZWN0aW9uKG1hdGNoZXMsIGlkcykgOiBpZHM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhhdC5tYXRjaEFueVF1ZXJ5VG9rZW4pIHtcbiAgICAgICAgICAgICAgbWF0Y2hlcyA9IFtdO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbWF0Y2hlcyA/IF8ubWFwKHVuaXF1ZShtYXRjaGVzKSwgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuZGF0dW1zW2lkXTtcbiAgICAgICAgfSkgOiBbXTtcbiAgICAgIH0sXG4gICAgICBhbGw6IGZ1bmN0aW9uIGFsbCgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRhdHVtcykge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKHRoaXMuZGF0dW1zW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgIH0sXG4gICAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuZGF0dW1zID0ge307XG4gICAgICAgIHRoaXMudHJpZSA9IG5ld05vZGUoKTtcbiAgICAgIH0sXG4gICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXR1bXM6IHRoaXMuZGF0dW1zLFxuICAgICAgICAgIHRyaWU6IHRoaXMudHJpZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFNlYXJjaEluZGV4O1xuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplVG9rZW5zKHRva2Vucykge1xuICAgICAgdG9rZW5zID0gXy5maWx0ZXIodG9rZW5zLCBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICEhdG9rZW47XG4gICAgICB9KTtcbiAgICAgIHRva2VucyA9IF8ubWFwKHRva2VucywgZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0b2tlbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld05vZGUoKSB7XG4gICAgICB2YXIgbm9kZSA9IHt9O1xuICAgICAgbm9kZVtJRFNdID0gW107XG4gICAgICBub2RlW0NISUxEUkVOXSA9IHt9O1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5pcXVlKGFycmF5KSB7XG4gICAgICB2YXIgc2VlbiA9IHt9LFxuICAgICAgICAgIHVuaXF1ZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICghc2VlblthcnJheVtpXV0pIHtcbiAgICAgICAgICBzZWVuW2FycmF5W2ldXSA9IHRydWU7XG4gICAgICAgICAgdW5pcXVlcy5wdXNoKGFycmF5W2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5pcXVlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oYXJyYXlBLCBhcnJheUIpIHtcbiAgICAgIHZhciBhaSA9IDAsXG4gICAgICAgICAgYmkgPSAwLFxuICAgICAgICAgIGludGVyc2VjdGlvbiA9IFtdO1xuICAgICAgYXJyYXlBID0gYXJyYXlBLnNvcnQoKTtcbiAgICAgIGFycmF5QiA9IGFycmF5Qi5zb3J0KCk7XG4gICAgICB2YXIgbGVuQXJyYXlBID0gYXJyYXlBLmxlbmd0aCxcbiAgICAgICAgICBsZW5BcnJheUIgPSBhcnJheUIubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoYWkgPCBsZW5BcnJheUEgJiYgYmkgPCBsZW5BcnJheUIpIHtcbiAgICAgICAgaWYgKGFycmF5QVthaV0gPCBhcnJheUJbYmldKSB7XG4gICAgICAgICAgYWkrKztcbiAgICAgICAgfSBlbHNlIGlmIChhcnJheUFbYWldID4gYXJyYXlCW2JpXSkge1xuICAgICAgICAgIGJpKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW9uLnB1c2goYXJyYXlBW2FpXSk7XG4gICAgICAgICAgYWkrKztcbiAgICAgICAgICBiaSsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gICAgfVxuICB9KCk7XG5cbiAgdmFyIFByZWZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGtleXM7XG4gICAga2V5cyA9IHtcbiAgICAgIGRhdGE6IFwiZGF0YVwiLFxuICAgICAgcHJvdG9jb2w6IFwicHJvdG9jb2xcIixcbiAgICAgIHRodW1icHJpbnQ6IFwidGh1bWJwcmludFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFByZWZldGNoKG8pIHtcbiAgICAgIHRoaXMudXJsID0gby51cmw7XG4gICAgICB0aGlzLnR0bCA9IG8udHRsO1xuICAgICAgdGhpcy5jYWNoZSA9IG8uY2FjaGU7XG4gICAgICB0aGlzLnByZXBhcmUgPSBvLnByZXBhcmU7XG4gICAgICB0aGlzLnRyYW5zZm9ybSA9IG8udHJhbnNmb3JtO1xuICAgICAgdGhpcy50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydDtcbiAgICAgIHRoaXMudGh1bWJwcmludCA9IG8udGh1bWJwcmludDtcbiAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBQZXJzaXN0ZW50U3RvcmFnZShvLmNhY2hlS2V5KTtcbiAgICB9XG5cbiAgICBfLm1peGluKFByZWZldGNoLnByb3RvdHlwZSwge1xuICAgICAgX3NldHRpbmdzOiBmdW5jdGlvbiBzZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgc3RvcmU6IGZ1bmN0aW9uIHN0b3JlKGRhdGEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLmRhdGEsIGRhdGEsIHRoaXMudHRsKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCwgdGhpcy50dGwpO1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KGtleXMudGh1bWJwcmludCwgdGhpcy50aHVtYnByaW50LCB0aGlzLnR0bCk7XG4gICAgICB9LFxuICAgICAgZnJvbUNhY2hlOiBmdW5jdGlvbiBmcm9tQ2FjaGUoKSB7XG4gICAgICAgIHZhciBzdG9yZWQgPSB7fSxcbiAgICAgICAgICAgIGlzRXhwaXJlZDtcblxuICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0b3JlZC5kYXRhID0gdGhpcy5zdG9yYWdlLmdldChrZXlzLmRhdGEpO1xuICAgICAgICBzdG9yZWQucHJvdG9jb2wgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMucHJvdG9jb2wpO1xuICAgICAgICBzdG9yZWQudGh1bWJwcmludCA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy50aHVtYnByaW50KTtcbiAgICAgICAgaXNFeHBpcmVkID0gc3RvcmVkLnRodW1icHJpbnQgIT09IHRoaXMudGh1bWJwcmludCB8fCBzdG9yZWQucHJvdG9jb2wgIT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICByZXR1cm4gc3RvcmVkLmRhdGEgJiYgIWlzRXhwaXJlZCA/IHN0b3JlZC5kYXRhIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBmcm9tTmV0d29yazogZnVuY3Rpb24gZnJvbU5ldHdvcmsoY2IpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgc2V0dGluZ3M7XG5cbiAgICAgICAgaWYgKCFjYikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldHRpbmdzID0gdGhpcy5wcmVwYXJlKHRoaXMuX3NldHRpbmdzKCkpO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydChzZXR0aW5ncykuZmFpbChvbkVycm9yKS5kb25lKG9uUmVzcG9uc2UpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoKSB7XG4gICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvblJlc3BvbnNlKHJlc3ApIHtcbiAgICAgICAgICBjYihudWxsLCB0aGF0LnRyYW5zZm9ybShyZXNwKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBQcmVmZXRjaDtcbiAgfSgpO1xuXG4gIHZhciBSZW1vdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBSZW1vdGUobykge1xuICAgICAgdGhpcy51cmwgPSBvLnVybDtcbiAgICAgIHRoaXMucHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgIHRoaXMudHJhbnNmb3JtID0gby50cmFuc2Zvcm07XG4gICAgICB0aGlzLmluZGV4UmVzcG9uc2UgPSBvLmluZGV4UmVzcG9uc2U7XG4gICAgICB0aGlzLnRyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQoe1xuICAgICAgICBjYWNoZTogby5jYWNoZSxcbiAgICAgICAgbGltaXRlcjogby5saW1pdGVyLFxuICAgICAgICB0cmFuc3BvcnQ6IG8udHJhbnNwb3J0LFxuICAgICAgICBtYXhQZW5kaW5nUmVxdWVzdHM6IG8ubWF4UGVuZGluZ1JlcXVlc3RzXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfLm1peGluKFJlbW90ZS5wcm90b3R5cGUsIHtcbiAgICAgIF9zZXR0aW5nczogZnVuY3Rpb24gc2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KHF1ZXJ5LCBjYikge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBzZXR0aW5ncztcblxuICAgICAgICBpZiAoIWNiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcXVlcnkgPSBxdWVyeSB8fCBcIlwiO1xuICAgICAgICBzZXR0aW5ncyA9IHRoaXMucHJlcGFyZShxdWVyeSwgdGhpcy5fc2V0dGluZ3MoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXQoc2V0dGluZ3MsIG9uUmVzcG9uc2UpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uUmVzcG9uc2UoZXJyLCByZXNwKSB7XG4gICAgICAgICAgZXJyID8gY2IoW10pIDogY2IodGhhdC50cmFuc2Zvcm0ocmVzcCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FuY2VsTGFzdFJlcXVlc3Q6IGZ1bmN0aW9uIGNhbmNlbExhc3RSZXF1ZXN0KCkge1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBSZW1vdGU7XG4gIH0oKTtcblxuICB2YXIgb1BhcnNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHJldHVybiBmdW5jdGlvbiBwYXJzZShvKSB7XG4gICAgICB2YXIgZGVmYXVsdHMsIHNvcnRlcjtcbiAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICBpbml0aWFsaXplOiB0cnVlLFxuICAgICAgICBpZGVudGlmeTogXy5zdHJpbmdpZnksXG4gICAgICAgIGRhdHVtVG9rZW5pemVyOiBudWxsLFxuICAgICAgICBxdWVyeVRva2VuaXplcjogbnVsbCxcbiAgICAgICAgbWF0Y2hBbnlRdWVyeVRva2VuOiBmYWxzZSxcbiAgICAgICAgc3VmZmljaWVudDogNSxcbiAgICAgICAgaW5kZXhSZW1vdGU6IGZhbHNlLFxuICAgICAgICBzb3J0ZXI6IG51bGwsXG4gICAgICAgIGxvY2FsOiBbXSxcbiAgICAgICAgcHJlZmV0Y2g6IG51bGwsXG4gICAgICAgIHJlbW90ZTogbnVsbFxuICAgICAgfTtcbiAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvIHx8IHt9KTtcbiAgICAgICFvLmRhdHVtVG9rZW5pemVyICYmICQuZXJyb3IoXCJkYXR1bVRva2VuaXplciBpcyByZXF1aXJlZFwiKTtcbiAgICAgICFvLnF1ZXJ5VG9rZW5pemVyICYmICQuZXJyb3IoXCJxdWVyeVRva2VuaXplciBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHNvcnRlciA9IG8uc29ydGVyO1xuICAgICAgby5zb3J0ZXIgPSBzb3J0ZXIgPyBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geC5zb3J0KHNvcnRlcik7XG4gICAgICB9IDogXy5pZGVudGl0eTtcbiAgICAgIG8ubG9jYWwgPSBfLmlzRnVuY3Rpb24oby5sb2NhbCkgPyBvLmxvY2FsKCkgOiBvLmxvY2FsO1xuICAgICAgby5wcmVmZXRjaCA9IHBhcnNlUHJlZmV0Y2goby5wcmVmZXRjaCk7XG4gICAgICBvLnJlbW90ZSA9IHBhcnNlUmVtb3RlKG8ucmVtb3RlKTtcbiAgICAgIHJldHVybiBvO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwYXJzZVByZWZldGNoKG8pIHtcbiAgICAgIHZhciBkZWZhdWx0cztcblxuICAgICAgaWYgKCFvKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICB0dGw6IDI0ICogNjAgKiA2MCAqIDFlMyxcbiAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgIGNhY2hlS2V5OiBudWxsLFxuICAgICAgICB0aHVtYnByaW50OiBcIlwiLFxuICAgICAgICBwcmVwYXJlOiBfLmlkZW50aXR5LFxuICAgICAgICB0cmFuc2Zvcm06IF8uaWRlbnRpdHksXG4gICAgICAgIHRyYW5zcG9ydDogbnVsbFxuICAgICAgfTtcbiAgICAgIG8gPSBfLmlzU3RyaW5nKG8pID8ge1xuICAgICAgICB1cmw6IG9cbiAgICAgIH0gOiBvO1xuICAgICAgbyA9IF8ubWl4aW4oZGVmYXVsdHMsIG8pO1xuICAgICAgIW8udXJsICYmICQuZXJyb3IoXCJwcmVmZXRjaCByZXF1aXJlcyB1cmwgdG8gYmUgc2V0XCIpO1xuICAgICAgby50cmFuc2Zvcm0gPSBvLmZpbHRlciB8fCBvLnRyYW5zZm9ybTtcbiAgICAgIG8uY2FjaGVLZXkgPSBvLmNhY2hlS2V5IHx8IG8udXJsO1xuICAgICAgby50aHVtYnByaW50ID0gVkVSU0lPTiArIG8udGh1bWJwcmludDtcbiAgICAgIG8udHJhbnNwb3J0ID0gby50cmFuc3BvcnQgPyBjYWxsYmFja1RvRGVmZXJyZWQoby50cmFuc3BvcnQpIDogJC5hamF4O1xuICAgICAgcmV0dXJuIG87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VSZW1vdGUobykge1xuICAgICAgdmFyIGRlZmF1bHRzO1xuXG4gICAgICBpZiAoIW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgcHJlcGFyZTogbnVsbCxcbiAgICAgICAgcmVwbGFjZTogbnVsbCxcbiAgICAgICAgd2lsZGNhcmQ6IG51bGwsXG4gICAgICAgIGxpbWl0ZXI6IG51bGwsXG4gICAgICAgIHJhdGVMaW1pdEJ5OiBcImRlYm91bmNlXCIsXG4gICAgICAgIHJhdGVMaW1pdFdhaXQ6IDMwMCxcbiAgICAgICAgdHJhbnNmb3JtOiBfLmlkZW50aXR5LFxuICAgICAgICB0cmFuc3BvcnQ6IG51bGxcbiAgICAgIH07XG4gICAgICBvID0gXy5pc1N0cmluZyhvKSA/IHtcbiAgICAgICAgdXJsOiBvXG4gICAgICB9IDogbztcbiAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvKTtcbiAgICAgICFvLnVybCAmJiAkLmVycm9yKFwicmVtb3RlIHJlcXVpcmVzIHVybCB0byBiZSBzZXRcIik7XG4gICAgICBvLnRyYW5zZm9ybSA9IG8uZmlsdGVyIHx8IG8udHJhbnNmb3JtO1xuICAgICAgby5wcmVwYXJlID0gdG9SZW1vdGVQcmVwYXJlKG8pO1xuICAgICAgby5saW1pdGVyID0gdG9MaW1pdGVyKG8pO1xuICAgICAgby50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydCA/IGNhbGxiYWNrVG9EZWZlcnJlZChvLnRyYW5zcG9ydCkgOiAkLmFqYXg7XG4gICAgICBkZWxldGUgby5yZXBsYWNlO1xuICAgICAgZGVsZXRlIG8ud2lsZGNhcmQ7XG4gICAgICBkZWxldGUgby5yYXRlTGltaXRCeTtcbiAgICAgIGRlbGV0ZSBvLnJhdGVMaW1pdFdhaXQ7XG4gICAgICByZXR1cm4gbztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b1JlbW90ZVByZXBhcmUobykge1xuICAgICAgdmFyIHByZXBhcmUsIHJlcGxhY2UsIHdpbGRjYXJkO1xuICAgICAgcHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgIHJlcGxhY2UgPSBvLnJlcGxhY2U7XG4gICAgICB3aWxkY2FyZCA9IG8ud2lsZGNhcmQ7XG5cbiAgICAgIGlmIChwcmVwYXJlKSB7XG4gICAgICAgIHJldHVybiBwcmVwYXJlO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICBwcmVwYXJlID0gcHJlcGFyZUJ5UmVwbGFjZTtcbiAgICAgIH0gZWxzZSBpZiAoby53aWxkY2FyZCkge1xuICAgICAgICBwcmVwYXJlID0gcHJlcGFyZUJ5V2lsZGNhcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmVwYXJlID0gaWRlbnRpdHlQcmVwYXJlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJlcGFyZTtcblxuICAgICAgZnVuY3Rpb24gcHJlcGFyZUJ5UmVwbGFjZShxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgc2V0dGluZ3MudXJsID0gcmVwbGFjZShzZXR0aW5ncy51cmwsIHF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwcmVwYXJlQnlXaWxkY2FyZChxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsLnJlcGxhY2Uod2lsZGNhcmQsIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkpO1xuICAgICAgICByZXR1cm4gc2V0dGluZ3M7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlkZW50aXR5UHJlcGFyZShxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvTGltaXRlcihvKSB7XG4gICAgICB2YXIgbGltaXRlciwgbWV0aG9kLCB3YWl0O1xuICAgICAgbGltaXRlciA9IG8ubGltaXRlcjtcbiAgICAgIG1ldGhvZCA9IG8ucmF0ZUxpbWl0Qnk7XG4gICAgICB3YWl0ID0gby5yYXRlTGltaXRXYWl0O1xuXG4gICAgICBpZiAoIWxpbWl0ZXIpIHtcbiAgICAgICAgbGltaXRlciA9IC9edGhyb3R0bGUkL2kudGVzdChtZXRob2QpID8gdGhyb3R0bGUod2FpdCkgOiBkZWJvdW5jZSh3YWl0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxpbWl0ZXI7XG5cbiAgICAgIGZ1bmN0aW9uIGRlYm91bmNlKHdhaXQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlKGZuKSB7XG4gICAgICAgICAgcmV0dXJuIF8uZGVib3VuY2UoZm4sIHdhaXQpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aHJvdHRsZSh3YWl0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiB0aHJvdHRsZShmbikge1xuICAgICAgICAgIHJldHVybiBfLnRocm90dGxlKGZuLCB3YWl0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsYmFja1RvRGVmZXJyZWQoZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyKG8pIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICBmbihvLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG5cbiAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3ApIHtcbiAgICAgICAgICBfLmRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9KCk7XG5cbiAgdmFyIEJsb29kaG91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgb2xkO1xuICAgIG9sZCA9IHdpbmRvdyAmJiB3aW5kb3cuQmxvb2Rob3VuZDtcblxuICAgIGZ1bmN0aW9uIEJsb29kaG91bmQobykge1xuICAgICAgbyA9IG9QYXJzZXIobyk7XG4gICAgICB0aGlzLnNvcnRlciA9IG8uc29ydGVyO1xuICAgICAgdGhpcy5pZGVudGlmeSA9IG8uaWRlbnRpZnk7XG4gICAgICB0aGlzLnN1ZmZpY2llbnQgPSBvLnN1ZmZpY2llbnQ7XG4gICAgICB0aGlzLmluZGV4UmVtb3RlID0gby5pbmRleFJlbW90ZTtcbiAgICAgIHRoaXMubG9jYWwgPSBvLmxvY2FsO1xuICAgICAgdGhpcy5yZW1vdGUgPSBvLnJlbW90ZSA/IG5ldyBSZW1vdGUoby5yZW1vdGUpIDogbnVsbDtcbiAgICAgIHRoaXMucHJlZmV0Y2ggPSBvLnByZWZldGNoID8gbmV3IFByZWZldGNoKG8ucHJlZmV0Y2gpIDogbnVsbDtcbiAgICAgIHRoaXMuaW5kZXggPSBuZXcgU2VhcmNoSW5kZXgoe1xuICAgICAgICBpZGVudGlmeTogdGhpcy5pZGVudGlmeSxcbiAgICAgICAgZGF0dW1Ub2tlbml6ZXI6IG8uZGF0dW1Ub2tlbml6ZXIsXG4gICAgICAgIHF1ZXJ5VG9rZW5pemVyOiBvLnF1ZXJ5VG9rZW5pemVyXG4gICAgICB9KTtcbiAgICAgIG8uaW5pdGlhbGl6ZSAhPT0gZmFsc2UgJiYgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgQmxvb2Rob3VuZC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgIHdpbmRvdyAmJiAod2luZG93LkJsb29kaG91bmQgPSBvbGQpO1xuICAgICAgcmV0dXJuIEJsb29kaG91bmQ7XG4gICAgfTtcblxuICAgIEJsb29kaG91bmQudG9rZW5pemVycyA9IHRva2VuaXplcnM7XG5cbiAgICBfLm1peGluKEJsb29kaG91bmQucHJvdG90eXBlLCB7XG4gICAgICBfX3R0QWRhcHRlcjogZnVuY3Rpb24gdHRBZGFwdGVyKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZSA/IHdpdGhBc3luYyA6IHdpdGhvdXRBc3luYztcblxuICAgICAgICBmdW5jdGlvbiB3aXRoQXN5bmMocXVlcnksIHN5bmMsIGFzeW5jKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuc2VhcmNoKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB3aXRob3V0QXN5bmMocXVlcnksIHN5bmMpIHtcbiAgICAgICAgICByZXR1cm4gdGhhdC5zZWFyY2gocXVlcnksIHN5bmMpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX2xvYWRQcmVmZXRjaDogZnVuY3Rpb24gbG9hZFByZWZldGNoKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBkZWZlcnJlZCxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ7XG4gICAgICAgIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgIGlmICghdGhpcy5wcmVmZXRjaCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZXJpYWxpemVkID0gdGhpcy5wcmVmZXRjaC5mcm9tQ2FjaGUoKSkge1xuICAgICAgICAgIHRoaXMuaW5kZXguYm9vdHN0cmFwKHNlcmlhbGl6ZWQpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByZWZldGNoLmZyb21OZXR3b3JrKGRvbmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblxuICAgICAgICBmdW5jdGlvbiBkb25lKGVyciwgZGF0YSkge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGF0LmFkZChkYXRhKTtcbiAgICAgICAgICB0aGF0LnByZWZldGNoLnN0b3JlKHRoYXQuaW5kZXguc2VyaWFsaXplKCkpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9pbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBkZWZlcnJlZDtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgICh0aGlzLmluaXRQcm9taXNlID0gdGhpcy5fbG9hZFByZWZldGNoKCkpLmRvbmUoYWRkTG9jYWxUb0luZGV4KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5pbml0UHJvbWlzZTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRMb2NhbFRvSW5kZXgoKSB7XG4gICAgICAgICAgdGhhdC5hZGQodGhhdC5sb2NhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKGZvcmNlKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pbml0UHJvbWlzZSB8fCBmb3JjZSA/IHRoaXMuX2luaXRpYWxpemUoKSA6IHRoaXMuaW5pdFByb21pc2U7XG4gICAgICB9LFxuICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoZGF0YSkge1xuICAgICAgICB0aGlzLmluZGV4LmFkZChkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWRzKSB7XG4gICAgICAgIGlkcyA9IF8uaXNBcnJheShpZHMpID8gaWRzIDogW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5nZXQoaWRzKTtcbiAgICAgIH0sXG4gICAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChxdWVyeSwgc3luYywgYXN5bmMpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgbG9jYWw7XG4gICAgICAgIHN5bmMgPSBzeW5jIHx8IF8ubm9vcDtcbiAgICAgICAgYXN5bmMgPSBhc3luYyB8fCBfLm5vb3A7XG4gICAgICAgIGxvY2FsID0gdGhpcy5zb3J0ZXIodGhpcy5pbmRleC5zZWFyY2gocXVlcnkpKTtcbiAgICAgICAgc3luYyh0aGlzLnJlbW90ZSA/IGxvY2FsLnNsaWNlKCkgOiBsb2NhbCk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVtb3RlICYmIGxvY2FsLmxlbmd0aCA8IHRoaXMuc3VmZmljaWVudCkge1xuICAgICAgICAgIHRoaXMucmVtb3RlLmdldChxdWVyeSwgcHJvY2Vzc1JlbW90ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW1vdGUpIHtcbiAgICAgICAgICB0aGlzLnJlbW90ZS5jYW5jZWxMYXN0UmVxdWVzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1JlbW90ZShyZW1vdGUpIHtcbiAgICAgICAgICB2YXIgbm9uRHVwbGljYXRlcyA9IFtdO1xuXG4gICAgICAgICAgXy5lYWNoKHJlbW90ZSwgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICFfLnNvbWUobG9jYWwsIGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGF0LmlkZW50aWZ5KHIpID09PSB0aGF0LmlkZW50aWZ5KGwpO1xuICAgICAgICAgICAgfSkgJiYgbm9uRHVwbGljYXRlcy5wdXNoKHIpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhhdC5pbmRleFJlbW90ZSAmJiB0aGF0LmFkZChub25EdXBsaWNhdGVzKTtcbiAgICAgICAgICBhc3luYyhub25EdXBsaWNhdGVzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFsbDogZnVuY3Rpb24gYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5hbGwoKTtcbiAgICAgIH0sXG4gICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuaW5kZXgucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgY2xlYXJQcmVmZXRjaENhY2hlOiBmdW5jdGlvbiBjbGVhclByZWZldGNoQ2FjaGUoKSB7XG4gICAgICAgIHRoaXMucHJlZmV0Y2ggJiYgdGhpcy5wcmVmZXRjaC5jbGVhcigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBjbGVhclJlbW90ZUNhY2hlOiBmdW5jdGlvbiBjbGVhclJlbW90ZUNhY2hlKCkge1xuICAgICAgICBUcmFuc3BvcnQucmVzZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICB0dEFkYXB0ZXI6IGZ1bmN0aW9uIHR0QWRhcHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX190dEFkYXB0ZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBCbG9vZGhvdW5kO1xuICB9KCk7XG5cbiAgcmV0dXJuIEJsb29kaG91bmQ7XG59KTtcblxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uIChhMCkge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoYTApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShyb290W1wialF1ZXJ5XCJdKTtcbiAgfVxufSkodGhpcywgZnVuY3Rpb24gKCQpIHtcbiAgdmFyIF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNc2llOiBmdW5jdGlvbiBpc01zaWUoKSB7XG4gICAgICAgIHJldHVybiAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpID8gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKG1zaWUgfHJ2OikoXFxkKyguXFxkKyk/KS9pKVsyXSA6IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGlzQmxhbmtTdHJpbmc6IGZ1bmN0aW9uIGlzQmxhbmtTdHJpbmcoc3RyKSB7XG4gICAgICAgIHJldHVybiAhc3RyIHx8IC9eXFxzKiQvLnRlc3Qoc3RyKTtcbiAgICAgIH0sXG4gICAgICBlc2NhcGVSZWdFeENoYXJzOiBmdW5jdGlvbiBlc2NhcGVSZWdFeENoYXJzKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgIH0sXG4gICAgICBpc1N0cmluZzogZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiO1xuICAgICAgfSxcbiAgICAgIGlzTnVtYmVyOiBmdW5jdGlvbiBpc051bWJlcihvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwibnVtYmVyXCI7XG4gICAgICB9LFxuICAgICAgaXNBcnJheTogJC5pc0FycmF5LFxuICAgICAgaXNGdW5jdGlvbjogJC5pc0Z1bmN0aW9uLFxuICAgICAgaXNPYmplY3Q6ICQuaXNQbGFpbk9iamVjdCxcbiAgICAgIGlzVW5kZWZpbmVkOiBmdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCI7XG4gICAgICB9LFxuICAgICAgaXNFbGVtZW50OiBmdW5jdGlvbiBpc0VsZW1lbnQob2JqKSB7XG4gICAgICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgICAgIH0sXG4gICAgICBpc0pRdWVyeTogZnVuY3Rpb24gaXNKUXVlcnkob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiAkO1xuICAgICAgfSxcbiAgICAgIHRvU3RyOiBmdW5jdGlvbiB0b1N0cihzKSB7XG4gICAgICAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHMpIHx8IHMgPT09IG51bGwgPyBcIlwiIDogcyArIFwiXCI7XG4gICAgICB9LFxuICAgICAgYmluZDogJC5wcm94eSxcbiAgICAgIGVhY2g6IGZ1bmN0aW9uIGVhY2goY29sbGVjdGlvbiwgY2IpIHtcbiAgICAgICAgJC5lYWNoKGNvbGxlY3Rpb24sIHJldmVyc2VBcmdzKTtcblxuICAgICAgICBmdW5jdGlvbiByZXZlcnNlQXJncyhpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY2IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1hcDogJC5tYXAsXG4gICAgICBmaWx0ZXI6ICQuZ3JlcCxcbiAgICAgIGV2ZXJ5OiBmdW5jdGlvbiBldmVyeShvYmosIHRlc3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgICAgaWYgKCEocmVzdWx0ID0gdGVzdC5jYWxsKG51bGwsIHZhbCwga2V5LCBvYmopKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBzb21lOiBmdW5jdGlvbiBzb21lKG9iaiwgdGVzdCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9IHRlc3QuY2FsbChudWxsLCB2YWwsIGtleSwgb2JqKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBtaXhpbjogJC5leHRlbmQsXG4gICAgICBpZGVudGl0eTogZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH0sXG4gICAgICBjbG9uZTogZnVuY3Rpb24gY2xvbmUob2JqKSB7XG4gICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgb2JqKTtcbiAgICAgIH0sXG4gICAgICBnZXRJZEdlbmVyYXRvcjogZnVuY3Rpb24gZ2V0SWRHZW5lcmF0b3IoKSB7XG4gICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY291bnRlcisrO1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRpZnk6IGZ1bmN0aW9uIHRlbXBsYXRpZnkob2JqKSB7XG4gICAgICAgIHJldHVybiAkLmlzRnVuY3Rpb24ob2JqKSA/IG9iaiA6IHRlbXBsYXRlO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRlbXBsYXRlKCkge1xuICAgICAgICAgIHJldHVybiBTdHJpbmcob2JqKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmVyOiBmdW5jdGlvbiBkZWZlcihmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICAgIH0sXG4gICAgICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgICAgIHZhciB0aW1lb3V0LCByZXN1bHQ7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgICBsYXRlcixcbiAgICAgICAgICAgICAgY2FsbE5vdztcblxuICAgICAgICAgIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXG4gICAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0aHJvdHRsZTogZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCkge1xuICAgICAgICB2YXIgY29udGV4dCwgYXJncywgdGltZW91dCwgcmVzdWx0LCBwcmV2aW91cywgbGF0ZXI7XG4gICAgICAgIHByZXZpb3VzID0gMDtcblxuICAgICAgICBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgICAgIHByZXZpb3VzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkodmFsKSB7XG4gICAgICAgIHJldHVybiBfLmlzU3RyaW5nKHZhbCkgPyB2YWwgOiBKU09OLnN0cmluZ2lmeSh2YWwpO1xuICAgICAgfSxcbiAgICAgIGd1aWQ6IGZ1bmN0aW9uIGd1aWQoKSB7XG4gICAgICAgIGZ1bmN0aW9uIF9wOChzKSB7XG4gICAgICAgICAgdmFyIHAgPSAoTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMiwgOCk7XG4gICAgICAgICAgcmV0dXJuIHMgPyBcIi1cIiArIHAuc3Vic3RyKDAsIDQpICsgXCItXCIgKyBwLnN1YnN0cig0LCA0KSA6IHA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gXCJ0dC1cIiArIF9wOCgpICsgX3A4KHRydWUpICsgX3A4KHRydWUpICsgX3A4KCk7XG4gICAgICB9LFxuICAgICAgbm9vcDogZnVuY3Rpb24gbm9vcCgpIHt9XG4gICAgfTtcbiAgfSgpO1xuXG4gIHZhciBXV1cgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgZGVmYXVsdENsYXNzTmFtZXMgPSB7XG4gICAgICB3cmFwcGVyOiBcInR3aXR0ZXItdHlwZWFoZWFkXCIsXG4gICAgICBpbnB1dDogXCJ0dC1pbnB1dFwiLFxuICAgICAgaGludDogXCJ0dC1oaW50XCIsXG4gICAgICBtZW51OiBcInR0LW1lbnVcIixcbiAgICAgIGRhdGFzZXQ6IFwidHQtZGF0YXNldFwiLFxuICAgICAgc3VnZ2VzdGlvbjogXCJ0dC1zdWdnZXN0aW9uXCIsXG4gICAgICBzZWxlY3RhYmxlOiBcInR0LXNlbGVjdGFibGVcIixcbiAgICAgIGVtcHR5OiBcInR0LWVtcHR5XCIsXG4gICAgICBvcGVuOiBcInR0LW9wZW5cIixcbiAgICAgIGN1cnNvcjogXCJ0dC1jdXJzb3JcIixcbiAgICAgIGhpZ2hsaWdodDogXCJ0dC1oaWdobGlnaHRcIlxuICAgIH07XG4gICAgcmV0dXJuIGJ1aWxkO1xuXG4gICAgZnVuY3Rpb24gYnVpbGQobykge1xuICAgICAgdmFyIHd3dywgY2xhc3NlcztcbiAgICAgIGNsYXNzZXMgPSBfLm1peGluKHt9LCBkZWZhdWx0Q2xhc3NOYW1lcywgbyk7XG4gICAgICB3d3cgPSB7XG4gICAgICAgIGNzczogYnVpbGRDc3MoKSxcbiAgICAgICAgY2xhc3NlczogY2xhc3NlcyxcbiAgICAgICAgaHRtbDogYnVpbGRIdG1sKGNsYXNzZXMpLFxuICAgICAgICBzZWxlY3RvcnM6IGJ1aWxkU2VsZWN0b3JzKGNsYXNzZXMpXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3NzOiB3d3cuY3NzLFxuICAgICAgICBodG1sOiB3d3cuaHRtbCxcbiAgICAgICAgY2xhc3Nlczogd3d3LmNsYXNzZXMsXG4gICAgICAgIHNlbGVjdG9yczogd3d3LnNlbGVjdG9ycyxcbiAgICAgICAgbWl4aW46IGZ1bmN0aW9uIG1peGluKG8pIHtcbiAgICAgICAgICBfLm1peGluKG8sIHd3dyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRIdG1sKGMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyYXBwZXI6ICc8c3BhbiBjbGFzcz1cIicgKyBjLndyYXBwZXIgKyAnXCI+PC9zcGFuPicsXG4gICAgICAgIG1lbnU6ICc8ZGl2IHJvbGU9XCJsaXN0Ym94XCIgY2xhc3M9XCInICsgYy5tZW51ICsgJ1wiPjwvZGl2PidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRTZWxlY3RvcnMoY2xhc3Nlcykge1xuICAgICAgdmFyIHNlbGVjdG9ycyA9IHt9O1xuXG4gICAgICBfLmVhY2goY2xhc3NlcywgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgc2VsZWN0b3JzW2tdID0gXCIuXCIgKyB2O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxlY3RvcnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDc3MoKSB7XG4gICAgICB2YXIgY3NzID0ge1xuICAgICAgICB3cmFwcGVyOiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiXG4gICAgICAgIH0sXG4gICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgbGVmdDogXCIwXCIsXG4gICAgICAgICAgYm9yZGVyQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICBib3hTaGFkb3c6IFwibm9uZVwiLFxuICAgICAgICAgIG9wYWNpdHk6IFwiMVwiXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0V2l0aE5vSGludDoge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIlxuICAgICAgICB9LFxuICAgICAgICBtZW51OiB7XG4gICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICB0b3A6IFwiMTAwJVwiLFxuICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgIHpJbmRleDogXCIxMDBcIixcbiAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICB9LFxuICAgICAgICBsdHI6IHtcbiAgICAgICAgICBsZWZ0OiBcIjBcIixcbiAgICAgICAgICByaWdodDogXCJhdXRvXCJcbiAgICAgICAgfSxcbiAgICAgICAgcnRsOiB7XG4gICAgICAgICAgbGVmdDogXCJhdXRvXCIsXG4gICAgICAgICAgcmlnaHQ6IFwiIDBcIlxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZiAoXy5pc01zaWUoKSkge1xuICAgICAgICBfLm1peGluKGNzcy5pbnB1dCwge1xuICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJ1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3KVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3NzO1xuICAgIH1cbiAgfSgpO1xuXG4gIHZhciBFdmVudEJ1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBuYW1lc3BhY2UsIGRlcHJlY2F0aW9uTWFwO1xuICAgIG5hbWVzcGFjZSA9IFwidHlwZWFoZWFkOlwiO1xuICAgIGRlcHJlY2F0aW9uTWFwID0ge1xuICAgICAgcmVuZGVyOiBcInJlbmRlcmVkXCIsXG4gICAgICBjdXJzb3JjaGFuZ2U6IFwiY3Vyc29yY2hhbmdlZFwiLFxuICAgICAgc2VsZWN0OiBcInNlbGVjdGVkXCIsXG4gICAgICBhdXRvY29tcGxldGU6IFwiYXV0b2NvbXBsZXRlZFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEV2ZW50QnVzKG8pIHtcbiAgICAgIGlmICghbyB8fCAhby5lbCkge1xuICAgICAgICAkLmVycm9yKFwiRXZlbnRCdXMgaW5pdGlhbGl6ZWQgd2l0aG91dCBlbFwiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kZWwgPSAkKG8uZWwpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oRXZlbnRCdXMucHJvdG90eXBlLCB7XG4gICAgICBfdHJpZ2dlcjogZnVuY3Rpb24gX3RyaWdnZXIodHlwZSwgYXJncykge1xuICAgICAgICB2YXIgJGUgPSAkLkV2ZW50KG5hbWVzcGFjZSArIHR5cGUpO1xuICAgICAgICB0aGlzLiRlbC50cmlnZ2VyLmNhbGwodGhpcy4kZWwsICRlLCBhcmdzIHx8IFtdKTtcbiAgICAgICAgcmV0dXJuICRlO1xuICAgICAgfSxcbiAgICAgIGJlZm9yZTogZnVuY3Rpb24gYmVmb3JlKHR5cGUpIHtcbiAgICAgICAgdmFyIGFyZ3MsICRlO1xuICAgICAgICBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAkZSA9IHRoaXMuX3RyaWdnZXIoXCJiZWZvcmVcIiArIHR5cGUsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gJGUuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgICB9LFxuICAgICAgdHJpZ2dlcjogZnVuY3Rpb24gdHJpZ2dlcih0eXBlKSB7XG4gICAgICAgIHZhciBkZXByZWNhdGVkVHlwZTtcblxuICAgICAgICB0aGlzLl90cmlnZ2VyKHR5cGUsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG5cbiAgICAgICAgaWYgKGRlcHJlY2F0ZWRUeXBlID0gZGVwcmVjYXRpb25NYXBbdHlwZV0pIHtcbiAgICAgICAgICB0aGlzLl90cmlnZ2VyKGRlcHJlY2F0ZWRUeXBlLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gRXZlbnRCdXM7XG4gIH0oKTtcblxuICB2YXIgRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHNwbGl0dGVyID0gL1xccysvLFxuICAgICAgICBuZXh0VGljayA9IGdldE5leHRUaWNrKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3luYzogb25TeW5jLFxuICAgICAgb25Bc3luYzogb25Bc3luYyxcbiAgICAgIG9mZjogb2ZmLFxuICAgICAgdHJpZ2dlcjogdHJpZ2dlclxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBvbihtZXRob2QsIHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgdmFyIHR5cGU7XG5cbiAgICAgIGlmICghY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHR5cGVzID0gdHlwZXMuc3BsaXQoc3BsaXR0ZXIpO1xuICAgICAgY2IgPSBjb250ZXh0ID8gYmluZENvbnRleHQoY2IsIGNvbnRleHQpIDogY2I7XG4gICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cbiAgICAgIHdoaWxlICh0eXBlID0gdHlwZXMuc2hpZnQoKSkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3NbdHlwZV0gPSB0aGlzLl9jYWxsYmFja3NbdHlwZV0gfHwge1xuICAgICAgICAgIHN5bmM6IFtdLFxuICAgICAgICAgIGFzeW5jOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrc1t0eXBlXVttZXRob2RdLnB1c2goY2IpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkFzeW5jKHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIG9uLmNhbGwodGhpcywgXCJhc3luY1wiLCB0eXBlcywgY2IsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uU3luYyh0eXBlcywgY2IsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBvbi5jYWxsKHRoaXMsIFwic3luY1wiLCB0eXBlcywgY2IsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9mZih0eXBlcykge1xuICAgICAgdmFyIHR5cGU7XG5cbiAgICAgIGlmICghdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB0eXBlcyA9IHR5cGVzLnNwbGl0KHNwbGl0dGVyKTtcblxuICAgICAgd2hpbGUgKHR5cGUgPSB0eXBlcy5zaGlmdCgpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdHlwZV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyaWdnZXIodHlwZXMpIHtcbiAgICAgIHZhciB0eXBlLCBjYWxsYmFja3MsIGFyZ3MsIHN5bmNGbHVzaCwgYXN5bmNGbHVzaDtcblxuICAgICAgaWYgKCF0aGlzLl9jYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHR5cGVzID0gdHlwZXMuc3BsaXQoc3BsaXR0ZXIpO1xuICAgICAgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgd2hpbGUgKCh0eXBlID0gdHlwZXMuc2hpZnQoKSkgJiYgKGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1t0eXBlXSkpIHtcbiAgICAgICAgc3luY0ZsdXNoID0gZ2V0Rmx1c2goY2FsbGJhY2tzLnN5bmMsIHRoaXMsIFt0eXBlXS5jb25jYXQoYXJncykpO1xuICAgICAgICBhc3luY0ZsdXNoID0gZ2V0Rmx1c2goY2FsbGJhY2tzLmFzeW5jLCB0aGlzLCBbdHlwZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgc3luY0ZsdXNoKCkgJiYgbmV4dFRpY2soYXN5bmNGbHVzaCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEZsdXNoKGNhbGxiYWNrcywgY29udGV4dCwgYXJncykge1xuICAgICAgcmV0dXJuIGZsdXNoO1xuXG4gICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgdmFyIGNhbmNlbGxlZDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FsbGJhY2tzLmxlbmd0aDsgIWNhbmNlbGxlZCAmJiBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICBjYW5jZWxsZWQgPSBjYWxsYmFja3NbaV0uYXBwbHkoY29udGV4dCwgYXJncykgPT09IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFjYW5jZWxsZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV4dFRpY2soKSB7XG4gICAgICB2YXIgbmV4dFRpY2tGbjtcblxuICAgICAgaWYgKHdpbmRvdy5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgbmV4dFRpY2tGbiA9IGZ1bmN0aW9uIG5leHRUaWNrU2V0SW1tZWRpYXRlKGZuKSB7XG4gICAgICAgICAgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0VGlja0ZuID0gZnVuY3Rpb24gbmV4dFRpY2tTZXRUaW1lb3V0KGZuKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV4dFRpY2tGbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiaW5kQ29udGV4dChmbiwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIGZuLmJpbmQgPyBmbi5iaW5kKGNvbnRleHQpIDogZnVuY3Rpb24gKCkge1xuICAgICAgICBmbi5hcHBseShjb250ZXh0LCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgfTtcbiAgICB9XG4gIH0oKTtcblxuICB2YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKGRvYykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgbm9kZTogbnVsbCxcbiAgICAgIHBhdHRlcm46IG51bGwsXG4gICAgICB0YWdOYW1lOiBcInN0cm9uZ1wiLFxuICAgICAgY2xhc3NOYW1lOiBudWxsLFxuICAgICAgd29yZHNPbmx5OiBmYWxzZSxcbiAgICAgIGNhc2VTZW5zaXRpdmU6IGZhbHNlLFxuICAgICAgZGlhY3JpdGljSW5zZW5zaXRpdmU6IGZhbHNlXG4gICAgfTtcbiAgICB2YXIgYWNjZW50ZWQgPSB7XG4gICAgICBBOiBcIltBYcKqw4Atw4XDoC3DpcSALcSFx43HjsiALciDyKbIp+G0rOG1g+G4gOG4geG6muG6oC3huqPigpDihIDihIHihLvikpzikrbik5DjjbEt4420446ALeOOhOOOiOOOieOOqS3jjq/jj4Ljj4rjj5/jj7/vvKHvvYFdXCIsXG4gICAgICBCOiBcIltCYuG0ruG1h+G4gi3huIfihKzikp3ikrfik5HjjbTjjoUt446H44+D44+I44+U44+d77yi772CXVwiLFxuICAgICAgQzogXCJbQ2PDh8OnxIYtxI3htpzihIDihILihIPihIXihIbihK3iha3ihb3ikp7ikrjik5Ljjbbjjojjjonjjp3jjqDjjqTjj4Qt44+H77yj772DXVwiLFxuICAgICAgRDogXCJbRGTEjsSPx4Qtx4bHsS3Hs+G0sOG1iOG4ii3huJPihYXihYbiha7ihb7ikp/ikrnik5Pji4/jjbLjjbct4425446X446tLeOOr+OPheOPiO+8pO+9hF1cIixcbiAgICAgIEU6IFwiW0Vlw4gtw4vDqC3Dq8SSLcSbyIQtyIfIqMip4bSx4bWJ4biYLeG4m+G6uC3hur3igpHihKHihK/ihLDihYfikqDikrrik5TjiZDji43ji47vvKXvvYVdXCIsXG4gICAgICBGOiBcIltGZuG2oOG4nuG4n+KEieKEseKEu+KSoeKSu+KTleOOii3jjozjjpnvrIAt76yE77ym772GXVwiLFxuICAgICAgRzogXCJbR2fEnC3Eo8emx6fHtMe14bSz4bWN4big4bih4oSK4pKi4pK84pOW44uM44uN446H446NLeOOj+OOk+OOrOOPhuOPieOPkuOPv++8p++9h11cIixcbiAgICAgIEg6IFwiW0hoxKTEpcieyJ/KsOG0tOG4oi3huKvhupbihIst4oSO4pKj4pK94pOX44uM442x446QLeOOlOOPiuOPi+OPl++8qO+9iF1cIixcbiAgICAgIEk6IFwiW0lpw4wtw4/DrC3Dr8SoLcSwxLLEs8ePx5DIiC3Ii+G0teG1ouG4rOG4reG7iC3hu4vigbHihJDihJHihLnihYjihaAt4oWj4oWlLeKFqOKFquKFq+KFsC3ihbPihbUt4oW44oW64oW74pKk4pK+4pOY442644+M44+V76yB76yD77yp772JXVwiLFxuICAgICAgSjogXCJbSmrEsi3EtceHLceMx7DKsuG0tuKFieKSpeKSv+KTmeKxvO+8qu+9il1cIixcbiAgICAgIEs6IFwiW0trxLbEt8eox6nhtLfhtY/huLAt4bi14oSq4pKm4pOA4pOa446E446F446J446P446R446Y446e446i446m446q4464446+44+A44+G44+NLeOPj++8q++9i11cIixcbiAgICAgIEw6IFwiW0xsxLktxYDHhy3Hicuh4bS44bi24bi34bi6LeG4veKEkuKEk+KEoeKFrOKFvOKSp+KTgeKTm+OLj+OOiOOOieOPkC3jj5Pjj5Xjj5bjj7/vrILvrITvvKzvvYxdXCIsXG4gICAgICBNOiBcIltNbeG0ueG1kOG4vi3huYPihKDihKLihLPiha/ihb/ikqjik4Lik5zjjbct4425446D446G446O446S446W446ZLeOOqOOOq+OOs+OOt+OOueOOveOOv+OPgeOPguOPjuOPkOOPlC3jj5bjj5jjj5njj57jj5/vvK3vvY1dXCIsXG4gICAgICBOOiBcIltObsORw7HFgy3FiceKLceMx7jHueG0uuG5hC3huYvigb/ihJXihJbikqnik4Pik53jjoHjjovjjprjjrHjjrXjjrvjj4zjj5HvvK7vvY5dXCIsXG4gICAgICBPOiBcIltPb8K6w5Itw5bDsi3DtsWMLcWRxqDGoceRx5LHqseryIwtyI/Irsiv4bS84bWS4buMLeG7j+KCkuKEheKEluKEtOKSquKThOKTnuONteOPh+OPkuOPlu+8r++9j11cIixcbiAgICAgIFA6IFwiW1Bw4bS+4bWW4bmULeG5l+KEmeKSq+KTheKTn+OJkOONseONtuOOgOOOiuOOqS3jjqzjjrDjjrTjjrrjj4vjj5ct44+a77yw772QXVwiLFxuICAgICAgUTogXCJbUXHihJrikqzik4bik6Djj4PvvLHvvZFdXCIsXG4gICAgICBSOiBcIltScsWULcWZyJAtyJPKs+G0v+G1o+G5mC3huZvhuZ7huZ/igqjihJst4oSd4pKt4pOH4pOh44uN4420446tLeOOr+OPmuOPm++8su+9kl1cIixcbiAgICAgIFM6IFwiW1NzxZotxaHFv8iYyJnLouG5oC3huaPigqjihIHihKDikq7ik4jik6Ljjqfjjqjjjq4t446z44+b44+c76yG77yz772TXVwiLFxuICAgICAgVDogXCJbVHTFoi3FpciayJvhtYDhtZfhuaot4bmx4bqX4oSh4oSi4pKv4pOJ4pOj44mQ44uP446U44+P76yF76yG77y0772UXVwiLFxuICAgICAgVTogXCJbVXXDmS3DnMO5LcO8xagtxbPGr8awx5PHlMiULciX4bWB4bWY4bWk4bmyLeG5t+G7pC3hu6fihIbikrDik4rik6TjjbPjjbrvvLXvvZVdXCIsXG4gICAgICBWOiBcIltWduG1m+G1peG5vC3hub/ihaMt4oWn4oWzLeKFt+KSseKTi+KTpeKxveOLjuONteOOtC3jjrnjj5zjj57vvLbvvZZdXCIsXG4gICAgICBXOiBcIltXd8W0xbXKt+G1guG6gC3huonhupjikrLik4zik6bjjrot446/44+d77y3772XXVwiLFxuICAgICAgWDogXCJbWHjLo+G6ii3huo3igpPihLvihagt4oWr4oW4LeKFu+KSs+KTjeKTp+OPk++8uO+9mF1cIixcbiAgICAgIFk6IFwiW1l5w53DvcO/xbYtxbjIssizyrjhuo7huo/hupnhu7It4bu54pK04pOO4pOo44+J77y5772ZXVwiLFxuICAgICAgWjogXCJbWnrFuS3FvsexLcez4ba74bqQLeG6leKEpOKEqOKSteKTj+KTqeOOkC3jjpTvvLrvvZpdXCJcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiBoaWdodGxpZ2h0KG8pIHtcbiAgICAgIHZhciByZWdleDtcbiAgICAgIG8gPSBfLm1peGluKHt9LCBkZWZhdWx0cywgbyk7XG5cbiAgICAgIGlmICghby5ub2RlIHx8ICFvLnBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvLnBhdHRlcm4gPSBfLmlzQXJyYXkoby5wYXR0ZXJuKSA/IG8ucGF0dGVybiA6IFtvLnBhdHRlcm5dO1xuICAgICAgcmVnZXggPSBnZXRSZWdleChvLnBhdHRlcm4sIG8uY2FzZVNlbnNpdGl2ZSwgby53b3Jkc09ubHksIG8uZGlhY3JpdGljSW5zZW5zaXRpdmUpO1xuICAgICAgdHJhdmVyc2Uoby5ub2RlLCBoaWdodGxpZ2h0VGV4dE5vZGUpO1xuXG4gICAgICBmdW5jdGlvbiBoaWdodGxpZ2h0VGV4dE5vZGUodGV4dE5vZGUpIHtcbiAgICAgICAgdmFyIG1hdGNoLCBwYXR0ZXJuTm9kZSwgd3JhcHBlck5vZGU7XG5cbiAgICAgICAgaWYgKG1hdGNoID0gcmVnZXguZXhlYyh0ZXh0Tm9kZS5kYXRhKSkge1xuICAgICAgICAgIHdyYXBwZXJOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoby50YWdOYW1lKTtcbiAgICAgICAgICBvLmNsYXNzTmFtZSAmJiAod3JhcHBlck5vZGUuY2xhc3NOYW1lID0gby5jbGFzc05hbWUpO1xuICAgICAgICAgIHBhdHRlcm5Ob2RlID0gdGV4dE5vZGUuc3BsaXRUZXh0KG1hdGNoLmluZGV4KTtcbiAgICAgICAgICBwYXR0ZXJuTm9kZS5zcGxpdFRleHQobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICB3cmFwcGVyTm9kZS5hcHBlbmRDaGlsZChwYXR0ZXJuTm9kZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgIHRleHROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHdyYXBwZXJOb2RlLCBwYXR0ZXJuTm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISFtYXRjaDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdHJhdmVyc2UoZWwsIGhpZ2h0bGlnaHRUZXh0Tm9kZSkge1xuICAgICAgICB2YXIgY2hpbGROb2RlLFxuICAgICAgICAgICAgVEVYVF9OT0RFX1RZUEUgPSAzO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNoaWxkTm9kZSA9IGVsLmNoaWxkTm9kZXNbaV07XG5cbiAgICAgICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlID09PSBURVhUX05PREVfVFlQRSkge1xuICAgICAgICAgICAgaSArPSBoaWdodGxpZ2h0VGV4dE5vZGUoY2hpbGROb2RlKSA/IDEgOiAwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmF2ZXJzZShjaGlsZE5vZGUsIGhpZ2h0bGlnaHRUZXh0Tm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFjY2VudF9yZXBsYWNlcihjaHIpIHtcbiAgICAgIHJldHVybiBhY2NlbnRlZFtjaHIudG9VcHBlckNhc2UoKV0gfHwgY2hyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFJlZ2V4KHBhdHRlcm5zLCBjYXNlU2Vuc2l0aXZlLCB3b3Jkc09ubHksIGRpYWNyaXRpY0luc2Vuc2l0aXZlKSB7XG4gICAgICB2YXIgZXNjYXBlZFBhdHRlcm5zID0gW10sXG4gICAgICAgICAgcmVnZXhTdHI7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwYXR0ZXJucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgZXNjYXBlZFdvcmQgPSBfLmVzY2FwZVJlZ0V4Q2hhcnMocGF0dGVybnNbaV0pO1xuXG4gICAgICAgIGlmIChkaWFjcml0aWNJbnNlbnNpdGl2ZSkge1xuICAgICAgICAgIGVzY2FwZWRXb3JkID0gZXNjYXBlZFdvcmQucmVwbGFjZSgvXFxTL2csIGFjY2VudF9yZXBsYWNlcik7XG4gICAgICAgIH1cblxuICAgICAgICBlc2NhcGVkUGF0dGVybnMucHVzaChlc2NhcGVkV29yZCk7XG4gICAgICB9XG5cbiAgICAgIHJlZ2V4U3RyID0gd29yZHNPbmx5ID8gXCJcXFxcYihcIiArIGVzY2FwZWRQYXR0ZXJucy5qb2luKFwifFwiKSArIFwiKVxcXFxiXCIgOiBcIihcIiArIGVzY2FwZWRQYXR0ZXJucy5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgcmV0dXJuIGNhc2VTZW5zaXRpdmUgPyBuZXcgUmVnRXhwKHJlZ2V4U3RyKSA6IG5ldyBSZWdFeHAocmVnZXhTdHIsIFwiaVwiKTtcbiAgICB9XG4gIH0od2luZG93LmRvY3VtZW50KTtcblxuICB2YXIgSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgc3BlY2lhbEtleUNvZGVNYXA7XG4gICAgc3BlY2lhbEtleUNvZGVNYXAgPSB7XG4gICAgICA5OiBcInRhYlwiLFxuICAgICAgMjc6IFwiZXNjXCIsXG4gICAgICAzNzogXCJsZWZ0XCIsXG4gICAgICAzOTogXCJyaWdodFwiLFxuICAgICAgMTM6IFwiZW50ZXJcIixcbiAgICAgIDM4OiBcInVwXCIsXG4gICAgICA0MDogXCJkb3duXCJcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5wdXQobywgd3d3KSB7XG4gICAgICB2YXIgaWQ7XG4gICAgICBvID0gbyB8fCB7fTtcblxuICAgICAgaWYgKCFvLmlucHV0KSB7XG4gICAgICAgICQuZXJyb3IoXCJpbnB1dCBpcyBtaXNzaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICB3d3cubWl4aW4odGhpcyk7XG4gICAgICB0aGlzLiRoaW50ID0gJChvLmhpbnQpO1xuICAgICAgdGhpcy4kaW5wdXQgPSAkKG8uaW5wdXQpO1xuICAgICAgdGhpcy4kbWVudSA9ICQoby5tZW51KTtcbiAgICAgIGlkID0gdGhpcy4kaW5wdXQuYXR0cihcImlkXCIpIHx8IF8uZ3VpZCgpO1xuICAgICAgdGhpcy4kbWVudS5hdHRyKFwiaWRcIiwgaWQgKyBcIl9saXN0Ym94XCIpO1xuICAgICAgdGhpcy4kaGludC5hdHRyKHtcbiAgICAgICAgXCJhcmlhLWhpZGRlblwiOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuJGlucHV0LmF0dHIoe1xuICAgICAgICBcImFyaWEtb3duc1wiOiBpZCArIFwiX2xpc3Rib3hcIixcbiAgICAgICAgcm9sZTogXCJjb21ib2JveFwiLFxuICAgICAgICBcImFyaWEtYXV0b2NvbXBsZXRlXCI6IFwibGlzdFwiLFxuICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMuJGlucHV0LnZhbCgpO1xuICAgICAgdGhpcy5xdWVyeVdoZW5Gb2N1c2VkID0gdGhpcy5oYXNGb2N1cygpID8gdGhpcy5xdWVyeSA6IG51bGw7XG4gICAgICB0aGlzLiRvdmVyZmxvd0hlbHBlciA9IGJ1aWxkT3ZlcmZsb3dIZWxwZXIodGhpcy4kaW5wdXQpO1xuXG4gICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG5cbiAgICAgIGlmICh0aGlzLiRoaW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnNldEhpbnQgPSB0aGlzLmdldEhpbnQgPSB0aGlzLmNsZWFySGludCA9IHRoaXMuY2xlYXJIaW50SWZJbnZhbGlkID0gXy5ub29wO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uU3luYyhcImN1cnNvcmNoYW5nZVwiLCB0aGlzLl91cGRhdGVEZXNjZW5kZW50KTtcbiAgICB9XG5cbiAgICBJbnB1dC5ub3JtYWxpemVRdWVyeSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBfLnRvU3RyKHN0cikucmVwbGFjZSgvXlxccyovZywgXCJcIikucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgfTtcblxuICAgIF8ubWl4aW4oSW5wdXQucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIsIHtcbiAgICAgIF9vbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICAgdGhpcy5yZXNldElucHV0VmFsdWUoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiYmx1cnJlZFwiKTtcbiAgICAgIH0sXG4gICAgICBfb25Gb2N1czogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgICAgdGhpcy5xdWVyeVdoZW5Gb2N1c2VkID0gdGhpcy5xdWVyeTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiZm9jdXNlZFwiKTtcbiAgICAgIH0sXG4gICAgICBfb25LZXlkb3duOiBmdW5jdGlvbiBvbktleWRvd24oJGUpIHtcbiAgICAgICAgdmFyIGtleU5hbWUgPSBzcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXTtcblxuICAgICAgICB0aGlzLl9tYW5hZ2VQcmV2ZW50RGVmYXVsdChrZXlOYW1lLCAkZSk7XG5cbiAgICAgICAgaWYgKGtleU5hbWUgJiYgdGhpcy5fc2hvdWxkVHJpZ2dlcihrZXlOYW1lLCAkZSkpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoa2V5TmFtZSArIFwiS2V5ZWRcIiwgJGUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX29uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG4gICAgICAgIHRoaXMuX3NldFF1ZXJ5KHRoaXMuZ2V0SW5wdXRWYWx1ZSgpKTtcblxuICAgICAgICB0aGlzLmNsZWFySGludElmSW52YWxpZCgpO1xuXG4gICAgICAgIHRoaXMuX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKTtcbiAgICAgIH0sXG4gICAgICBfbWFuYWdlUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uIG1hbmFnZVByZXZlbnREZWZhdWx0KGtleU5hbWUsICRlKSB7XG4gICAgICAgIHZhciBwcmV2ZW50RGVmYXVsdDtcblxuICAgICAgICBzd2l0Y2ggKGtleU5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwidXBcIjpcbiAgICAgICAgICBjYXNlIFwiZG93blwiOlxuICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSAhd2l0aE1vZGlmaWVyKCRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2ZW50RGVmYXVsdCAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSxcbiAgICAgIF9zaG91bGRUcmlnZ2VyOiBmdW5jdGlvbiBzaG91bGRUcmlnZ2VyKGtleU5hbWUsICRlKSB7XG4gICAgICAgIHZhciB0cmlnZ2VyO1xuXG4gICAgICAgIHN3aXRjaCAoa2V5TmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJ0YWJcIjpcbiAgICAgICAgICAgIHRyaWdnZXIgPSAhd2l0aE1vZGlmaWVyKCRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRyaWdnZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyaWdnZXI7XG4gICAgICB9LFxuICAgICAgX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIGNoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXIgPSAodGhpcy4kaW5wdXQuY3NzKFwiZGlyZWN0aW9uXCIpIHx8IFwibHRyXCIpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZGlyICE9PSBkaXIpIHtcbiAgICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgICB0aGlzLiRoaW50LmF0dHIoXCJkaXJcIiwgZGlyKTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJsYW5nRGlyQ2hhbmdlZFwiLCBkaXIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3NldFF1ZXJ5OiBmdW5jdGlvbiBzZXRRdWVyeSh2YWwsIHNpbGVudCkge1xuICAgICAgICB2YXIgYXJlRXF1aXZhbGVudCwgaGFzRGlmZmVyZW50V2hpdGVzcGFjZTtcbiAgICAgICAgYXJlRXF1aXZhbGVudCA9IGFyZVF1ZXJpZXNFcXVpdmFsZW50KHZhbCwgdGhpcy5xdWVyeSk7XG4gICAgICAgIGhhc0RpZmZlcmVudFdoaXRlc3BhY2UgPSBhcmVFcXVpdmFsZW50ID8gdGhpcy5xdWVyeS5sZW5ndGggIT09IHZhbC5sZW5ndGggOiBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHZhbDtcblxuICAgICAgICBpZiAoIXNpbGVudCAmJiAhYXJlRXF1aXZhbGVudCkge1xuICAgICAgICAgIHRoaXMudHJpZ2dlcihcInF1ZXJ5Q2hhbmdlZFwiLCB0aGlzLnF1ZXJ5KTtcbiAgICAgICAgfSBlbHNlIGlmICghc2lsZW50ICYmIGhhc0RpZmZlcmVudFdoaXRlc3BhY2UpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJ3aGl0ZXNwYWNlQ2hhbmdlZFwiLCB0aGlzLnF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF91cGRhdGVEZXNjZW5kZW50OiBmdW5jdGlvbiB1cGRhdGVEZXNjZW5kZW50KGV2ZW50LCBpZCkge1xuICAgICAgICB0aGlzLiRpbnB1dC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsIGlkKTtcbiAgICAgIH0sXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBvbkJsdXIsXG4gICAgICAgICAgICBvbkZvY3VzLFxuICAgICAgICAgICAgb25LZXlkb3duLFxuICAgICAgICAgICAgb25JbnB1dDtcbiAgICAgICAgb25CbHVyID0gXy5iaW5kKHRoaXMuX29uQmx1ciwgdGhpcyk7XG4gICAgICAgIG9uRm9jdXMgPSBfLmJpbmQodGhpcy5fb25Gb2N1cywgdGhpcyk7XG4gICAgICAgIG9uS2V5ZG93biA9IF8uYmluZCh0aGlzLl9vbktleWRvd24sIHRoaXMpO1xuICAgICAgICBvbklucHV0ID0gXy5iaW5kKHRoaXMuX29uSW5wdXQsIHRoaXMpO1xuICAgICAgICB0aGlzLiRpbnB1dC5vbihcImJsdXIudHRcIiwgb25CbHVyKS5vbihcImZvY3VzLnR0XCIsIG9uRm9jdXMpLm9uKFwia2V5ZG93bi50dFwiLCBvbktleWRvd24pO1xuXG4gICAgICAgIGlmICghXy5pc01zaWUoKSB8fCBfLmlzTXNpZSgpID4gOSkge1xuICAgICAgICAgIHRoaXMuJGlucHV0Lm9uKFwiaW5wdXQudHRcIiwgb25JbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kaW5wdXQub24oXCJrZXlkb3duLnR0IGtleXByZXNzLnR0IGN1dC50dCBwYXN0ZS50dFwiLCBmdW5jdGlvbiAoJGUpIHtcbiAgICAgICAgICAgIGlmIChzcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF8uZGVmZXIoXy5iaW5kKHRoYXQuX29uSW5wdXQsIHRoYXQsICRlKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgIHRoaXMuJGlucHV0LmZvY3VzKCk7XG4gICAgICB9LFxuICAgICAgYmx1cjogZnVuY3Rpb24gYmx1cigpIHtcbiAgICAgICAgdGhpcy4kaW5wdXQuYmx1cigpO1xuICAgICAgfSxcbiAgICAgIGdldExhbmdEaXI6IGZ1bmN0aW9uIGdldExhbmdEaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcjtcbiAgICAgIH0sXG4gICAgICBnZXRRdWVyeTogZnVuY3Rpb24gZ2V0UXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5IHx8IFwiXCI7XG4gICAgICB9LFxuICAgICAgc2V0UXVlcnk6IGZ1bmN0aW9uIHNldFF1ZXJ5KHZhbCwgc2lsZW50KSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh2YWwpO1xuXG4gICAgICAgIHRoaXMuX3NldFF1ZXJ5KHZhbCwgc2lsZW50KTtcbiAgICAgIH0sXG4gICAgICBoYXNRdWVyeUNoYW5nZWRTaW5jZUxhc3RGb2N1czogZnVuY3Rpb24gaGFzUXVlcnlDaGFuZ2VkU2luY2VMYXN0Rm9jdXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5ICE9PSB0aGlzLnF1ZXJ5V2hlbkZvY3VzZWQ7XG4gICAgICB9LFxuICAgICAgZ2V0SW5wdXRWYWx1ZTogZnVuY3Rpb24gZ2V0SW5wdXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGlucHV0LnZhbCgpO1xuICAgICAgfSxcbiAgICAgIHNldElucHV0VmFsdWU6IGZ1bmN0aW9uIHNldElucHV0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy4kaW5wdXQudmFsKHZhbHVlKTtcbiAgICAgICAgdGhpcy5jbGVhckhpbnRJZkludmFsaWQoKTtcblxuICAgICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG4gICAgICB9LFxuICAgICAgcmVzZXRJbnB1dFZhbHVlOiBmdW5jdGlvbiByZXNldElucHV0VmFsdWUoKSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh0aGlzLnF1ZXJ5KTtcbiAgICAgIH0sXG4gICAgICBnZXRIaW50OiBmdW5jdGlvbiBnZXRIaW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kaGludC52YWwoKTtcbiAgICAgIH0sXG4gICAgICBzZXRIaW50OiBmdW5jdGlvbiBzZXRIaW50KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuJGhpbnQudmFsKHZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBjbGVhckhpbnQ6IGZ1bmN0aW9uIGNsZWFySGludCgpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFwiXCIpO1xuICAgICAgfSxcbiAgICAgIGNsZWFySGludElmSW52YWxpZDogZnVuY3Rpb24gY2xlYXJIaW50SWZJbnZhbGlkKCkge1xuICAgICAgICB2YXIgdmFsLCBoaW50LCB2YWxJc1ByZWZpeE9mSGludCwgaXNWYWxpZDtcbiAgICAgICAgdmFsID0gdGhpcy5nZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgIGhpbnQgPSB0aGlzLmdldEhpbnQoKTtcbiAgICAgICAgdmFsSXNQcmVmaXhPZkhpbnQgPSB2YWwgIT09IGhpbnQgJiYgaGludC5pbmRleE9mKHZhbCkgPT09IDA7XG4gICAgICAgIGlzVmFsaWQgPSB2YWwgIT09IFwiXCIgJiYgdmFsSXNQcmVmaXhPZkhpbnQgJiYgIXRoaXMuaGFzT3ZlcmZsb3coKTtcbiAgICAgICAgIWlzVmFsaWQgJiYgdGhpcy5jbGVhckhpbnQoKTtcbiAgICAgIH0sXG4gICAgICBoYXNGb2N1czogZnVuY3Rpb24gaGFzRm9jdXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRpbnB1dC5pcyhcIjpmb2N1c1wiKTtcbiAgICAgIH0sXG4gICAgICBoYXNPdmVyZmxvdzogZnVuY3Rpb24gaGFzT3ZlcmZsb3coKSB7XG4gICAgICAgIHZhciBjb25zdHJhaW50ID0gdGhpcy4kaW5wdXQud2lkdGgoKSAtIDI7XG4gICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyLnRleHQodGhpcy5nZXRJbnB1dFZhbHVlKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy4kb3ZlcmZsb3dIZWxwZXIud2lkdGgoKSA+PSBjb25zdHJhaW50O1xuICAgICAgfSxcbiAgICAgIGlzQ3Vyc29yQXRFbmQ6IGZ1bmN0aW9uIGlzQ3Vyc29yQXRFbmQoKSB7XG4gICAgICAgIHZhciB2YWx1ZUxlbmd0aCwgc2VsZWN0aW9uU3RhcnQsIHJhbmdlO1xuICAgICAgICB2YWx1ZUxlbmd0aCA9IHRoaXMuJGlucHV0LnZhbCgpLmxlbmd0aDtcbiAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSB0aGlzLiRpbnB1dFswXS5zZWxlY3Rpb25TdGFydDtcblxuICAgICAgICBpZiAoXy5pc051bWJlcihzZWxlY3Rpb25TdGFydCkpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uU3RhcnQgPT09IHZhbHVlTGVuZ3RoO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICAgIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIC12YWx1ZUxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlTGVuZ3RoID09PSByYW5nZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuJGhpbnQub2ZmKFwiLnR0XCIpO1xuICAgICAgICB0aGlzLiRpbnB1dC5vZmYoXCIudHRcIik7XG4gICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLiRoaW50ID0gdGhpcy4kaW5wdXQgPSB0aGlzLiRvdmVyZmxvd0hlbHBlciA9ICQoXCI8ZGl2PlwiKTtcbiAgICAgIH0sXG4gICAgICBzZXRBcmlhRXhwYW5kZWQ6IGZ1bmN0aW9uIHNldEFyaWFFeHBhbmRlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLiRpbnB1dC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gSW5wdXQ7XG5cbiAgICBmdW5jdGlvbiBidWlsZE92ZXJmbG93SGVscGVyKCRpbnB1dCkge1xuICAgICAgcmV0dXJuICQoJzxwcmUgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9wcmU+JykuY3NzKHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgdmlzaWJpbGl0eTogXCJoaWRkZW5cIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJwcmVcIixcbiAgICAgICAgZm9udEZhbWlseTogJGlucHV0LmNzcyhcImZvbnQtZmFtaWx5XCIpLFxuICAgICAgICBmb250U2l6ZTogJGlucHV0LmNzcyhcImZvbnQtc2l6ZVwiKSxcbiAgICAgICAgZm9udFN0eWxlOiAkaW5wdXQuY3NzKFwiZm9udC1zdHlsZVwiKSxcbiAgICAgICAgZm9udFZhcmlhbnQ6ICRpbnB1dC5jc3MoXCJmb250LXZhcmlhbnRcIiksXG4gICAgICAgIGZvbnRXZWlnaHQ6ICRpbnB1dC5jc3MoXCJmb250LXdlaWdodFwiKSxcbiAgICAgICAgd29yZFNwYWNpbmc6ICRpbnB1dC5jc3MoXCJ3b3JkLXNwYWNpbmdcIiksXG4gICAgICAgIGxldHRlclNwYWNpbmc6ICRpbnB1dC5jc3MoXCJsZXR0ZXItc3BhY2luZ1wiKSxcbiAgICAgICAgdGV4dEluZGVudDogJGlucHV0LmNzcyhcInRleHQtaW5kZW50XCIpLFxuICAgICAgICB0ZXh0UmVuZGVyaW5nOiAkaW5wdXQuY3NzKFwidGV4dC1yZW5kZXJpbmdcIiksXG4gICAgICAgIHRleHRUcmFuc2Zvcm06ICRpbnB1dC5jc3MoXCJ0ZXh0LXRyYW5zZm9ybVwiKVxuICAgICAgfSkuaW5zZXJ0QWZ0ZXIoJGlucHV0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcmVRdWVyaWVzRXF1aXZhbGVudChhLCBiKSB7XG4gICAgICByZXR1cm4gSW5wdXQubm9ybWFsaXplUXVlcnkoYSkgPT09IElucHV0Lm5vcm1hbGl6ZVF1ZXJ5KGIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdpdGhNb2RpZmllcigkZSkge1xuICAgICAgcmV0dXJuICRlLmFsdEtleSB8fCAkZS5jdHJsS2V5IHx8ICRlLm1ldGFLZXkgfHwgJGUuc2hpZnRLZXk7XG4gICAgfVxuICB9KCk7XG5cbiAgdmFyIERhdGFzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIga2V5cywgbmFtZUdlbmVyYXRvcjtcbiAgICBrZXlzID0ge1xuICAgICAgZGF0YXNldDogXCJ0dC1zZWxlY3RhYmxlLWRhdGFzZXRcIixcbiAgICAgIHZhbDogXCJ0dC1zZWxlY3RhYmxlLWRpc3BsYXlcIixcbiAgICAgIG9iajogXCJ0dC1zZWxlY3RhYmxlLW9iamVjdFwiXG4gICAgfTtcbiAgICBuYW1lR2VuZXJhdG9yID0gXy5nZXRJZEdlbmVyYXRvcigpO1xuXG4gICAgZnVuY3Rpb24gRGF0YXNldChvLCB3d3cpIHtcbiAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgby50ZW1wbGF0ZXMgPSBvLnRlbXBsYXRlcyB8fCB7fTtcbiAgICAgIG8udGVtcGxhdGVzLm5vdEZvdW5kID0gby50ZW1wbGF0ZXMubm90Rm91bmQgfHwgby50ZW1wbGF0ZXMuZW1wdHk7XG5cbiAgICAgIGlmICghby5zb3VyY2UpIHtcbiAgICAgICAgJC5lcnJvcihcIm1pc3Npbmcgc291cmNlXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW8ubm9kZSkge1xuICAgICAgICAkLmVycm9yKFwibWlzc2luZyBub2RlXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoby5uYW1lICYmICFpc1ZhbGlkTmFtZShvLm5hbWUpKSB7XG4gICAgICAgICQuZXJyb3IoXCJpbnZhbGlkIGRhdGFzZXQgbmFtZTogXCIgKyBvLm5hbWUpO1xuICAgICAgfVxuXG4gICAgICB3d3cubWl4aW4odGhpcyk7XG4gICAgICB0aGlzLmhpZ2hsaWdodCA9ICEhby5oaWdobGlnaHQ7XG4gICAgICB0aGlzLm5hbWUgPSBfLnRvU3RyKG8ubmFtZSB8fCBuYW1lR2VuZXJhdG9yKCkpO1xuICAgICAgdGhpcy5saW1pdCA9IG8ubGltaXQgfHwgNTtcbiAgICAgIHRoaXMuZGlzcGxheUZuID0gZ2V0RGlzcGxheUZuKG8uZGlzcGxheSB8fCBvLmRpc3BsYXlLZXkpO1xuICAgICAgdGhpcy50ZW1wbGF0ZXMgPSBnZXRUZW1wbGF0ZXMoby50ZW1wbGF0ZXMsIHRoaXMuZGlzcGxheUZuKTtcbiAgICAgIHRoaXMuc291cmNlID0gby5zb3VyY2UuX190dEFkYXB0ZXIgPyBvLnNvdXJjZS5fX3R0QWRhcHRlcigpIDogby5zb3VyY2U7XG4gICAgICB0aGlzLmFzeW5jID0gXy5pc1VuZGVmaW5lZChvLmFzeW5jKSA/IHRoaXMuc291cmNlLmxlbmd0aCA+IDIgOiAhIW8uYXN5bmM7XG5cbiAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcblxuICAgICAgdGhpcy4kZWwgPSAkKG8ubm9kZSkuYXR0cihcInJvbGVcIiwgXCJwcmVzZW50YXRpb25cIikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRhdGFzZXQpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5kYXRhc2V0ICsgXCItXCIgKyB0aGlzLm5hbWUpO1xuICAgIH1cblxuICAgIERhdGFzZXQuZXh0cmFjdERhdGEgPSBmdW5jdGlvbiBleHRyYWN0RGF0YShlbCkge1xuICAgICAgdmFyICRlbCA9ICQoZWwpO1xuXG4gICAgICBpZiAoJGVsLmRhdGEoa2V5cy5vYmopKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YXNldDogJGVsLmRhdGEoa2V5cy5kYXRhc2V0KSB8fCBcIlwiLFxuICAgICAgICAgIHZhbDogJGVsLmRhdGEoa2V5cy52YWwpIHx8IFwiXCIsXG4gICAgICAgICAgb2JqOiAkZWwuZGF0YShrZXlzLm9iaikgfHwgbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgXy5taXhpbihEYXRhc2V0LnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyLCB7XG4gICAgICBfb3ZlcndyaXRlOiBmdW5jdGlvbiBvdmVyd3JpdGUocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlclN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3luYyAmJiB0aGlzLnRlbXBsYXRlcy5wZW5kaW5nKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyUGVuZGluZyhxdWVyeSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYXN5bmMgJiYgdGhpcy50ZW1wbGF0ZXMubm90Rm91bmQpIHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXJOb3RGb3VuZChxdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZW1wdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlcmVkXCIsIHN1Z2dlc3Rpb25zLCBmYWxzZSwgdGhpcy5uYW1lKTtcbiAgICAgIH0sXG4gICAgICBfYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCAmJiB0aGlzLiRsYXN0U3VnZ2VzdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9hcHBlbmRTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlclN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuJGxhc3RTdWdnZXN0aW9uLmxlbmd0aCAmJiB0aGlzLnRlbXBsYXRlcy5ub3RGb3VuZCkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlck5vdEZvdW5kKHF1ZXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlcmVkXCIsIHN1Z2dlc3Rpb25zLCB0cnVlLCB0aGlzLm5hbWUpO1xuICAgICAgfSxcbiAgICAgIF9yZW5kZXJTdWdnZXN0aW9uczogZnVuY3Rpb24gcmVuZGVyU3VnZ2VzdGlvbnMocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHZhciAkZnJhZ21lbnQ7XG4gICAgICAgICRmcmFnbWVudCA9IHRoaXMuX2dldFN1Z2dlc3Rpb25zRnJhZ21lbnQocXVlcnksIHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkZnJhZ21lbnQuY2hpbGRyZW4oKS5sYXN0KCk7XG4gICAgICAgIHRoaXMuJGVsLmh0bWwoJGZyYWdtZW50KS5wcmVwZW5kKHRoaXMuX2dldEhlYWRlcihxdWVyeSwgc3VnZ2VzdGlvbnMpKS5hcHBlbmQodGhpcy5fZ2V0Rm9vdGVyKHF1ZXJ5LCBzdWdnZXN0aW9ucykpO1xuICAgICAgfSxcbiAgICAgIF9hcHBlbmRTdWdnZXN0aW9uczogZnVuY3Rpb24gYXBwZW5kU3VnZ2VzdGlvbnMocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHZhciAkZnJhZ21lbnQsICRsYXN0U3VnZ2VzdGlvbjtcbiAgICAgICAgJGZyYWdtZW50ID0gdGhpcy5fZ2V0U3VnZ2VzdGlvbnNGcmFnbWVudChxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAkbGFzdFN1Z2dlc3Rpb24gPSAkZnJhZ21lbnQuY2hpbGRyZW4oKS5sYXN0KCk7XG4gICAgICAgIHRoaXMuJGxhc3RTdWdnZXN0aW9uLmFmdGVyKCRmcmFnbWVudCk7XG4gICAgICAgIHRoaXMuJGxhc3RTdWdnZXN0aW9uID0gJGxhc3RTdWdnZXN0aW9uO1xuICAgICAgfSxcbiAgICAgIF9yZW5kZXJQZW5kaW5nOiBmdW5jdGlvbiByZW5kZXJQZW5kaW5nKHF1ZXJ5KSB7XG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVzLnBlbmRpbmc7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuXG4gICAgICAgIHRlbXBsYXRlICYmIHRoaXMuJGVsLmh0bWwodGVtcGxhdGUoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgfSkpO1xuICAgICAgfSxcbiAgICAgIF9yZW5kZXJOb3RGb3VuZDogZnVuY3Rpb24gcmVuZGVyTm90Rm91bmQocXVlcnkpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZXMubm90Rm91bmQ7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuXG4gICAgICAgIHRlbXBsYXRlICYmIHRoaXMuJGVsLmh0bWwodGVtcGxhdGUoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgfSkpO1xuICAgICAgfSxcbiAgICAgIF9lbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgICAgIHRoaXMuJGVsLmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuICAgICAgfSxcbiAgICAgIF9nZXRTdWdnZXN0aW9uc0ZyYWdtZW50OiBmdW5jdGlvbiBnZXRTdWdnZXN0aW9uc0ZyYWdtZW50KHF1ZXJ5LCBzdWdnZXN0aW9ucykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBmcmFnbWVudDtcbiAgICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgXy5lYWNoKHN1Z2dlc3Rpb25zLCBmdW5jdGlvbiBnZXRTdWdnZXN0aW9uTm9kZShzdWdnZXN0aW9uKSB7XG4gICAgICAgICAgdmFyICRlbCwgY29udGV4dDtcbiAgICAgICAgICBjb250ZXh0ID0gdGhhdC5faW5qZWN0UXVlcnkocXVlcnksIHN1Z2dlc3Rpb24pO1xuICAgICAgICAgICRlbCA9ICQodGhhdC50ZW1wbGF0ZXMuc3VnZ2VzdGlvbihjb250ZXh0KSkuZGF0YShrZXlzLmRhdGFzZXQsIHRoYXQubmFtZSkuZGF0YShrZXlzLm9iaiwgc3VnZ2VzdGlvbikuZGF0YShrZXlzLnZhbCwgdGhhdC5kaXNwbGF5Rm4oc3VnZ2VzdGlvbikpLmFkZENsYXNzKHRoYXQuY2xhc3Nlcy5zdWdnZXN0aW9uICsgXCIgXCIgKyB0aGF0LmNsYXNzZXMuc2VsZWN0YWJsZSk7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoJGVsWzBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oaWdobGlnaHQgJiYgaGlnaGxpZ2h0KHtcbiAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuY2xhc3Nlcy5oaWdobGlnaHQsXG4gICAgICAgICAgbm9kZTogZnJhZ21lbnQsXG4gICAgICAgICAgcGF0dGVybjogcXVlcnlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAkKGZyYWdtZW50KTtcbiAgICAgIH0sXG4gICAgICBfZ2V0Rm9vdGVyOiBmdW5jdGlvbiBnZXRGb290ZXIocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlcy5mb290ZXIgPyB0aGlzLnRlbXBsYXRlcy5mb290ZXIoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgZGF0YXNldDogdGhpcy5uYW1lXG4gICAgICAgIH0pIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBfZ2V0SGVhZGVyOiBmdW5jdGlvbiBnZXRIZWFkZXIocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlcy5oZWFkZXIgPyB0aGlzLnRlbXBsYXRlcy5oZWFkZXIoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgZGF0YXNldDogdGhpcy5uYW1lXG4gICAgICAgIH0pIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBfcmVzZXRMYXN0U3VnZ2VzdGlvbjogZnVuY3Rpb24gcmVzZXRMYXN0U3VnZ2VzdGlvbigpIHtcbiAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkKCk7XG4gICAgICB9LFxuICAgICAgX2luamVjdFF1ZXJ5OiBmdW5jdGlvbiBpbmplY3RRdWVyeShxdWVyeSwgb2JqKSB7XG4gICAgICAgIHJldHVybiBfLmlzT2JqZWN0KG9iaikgPyBfLm1peGluKHtcbiAgICAgICAgICBfcXVlcnk6IHF1ZXJ5XG4gICAgICAgIH0sIG9iaikgOiBvYmo7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUocXVlcnkpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgY2FuY2VsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgIHN5bmNDYWxsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgIHJlbmRlcmVkID0gMDtcbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcblxuICAgICAgICB0aGlzLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgICBjYW5jZWxlZCA9IHRydWU7XG4gICAgICAgICAgdGhhdC5jYW5jZWwgPSAkLm5vb3A7XG4gICAgICAgICAgdGhhdC5hc3luYyAmJiB0aGF0LnRyaWdnZXIoXCJhc3luY0NhbmNlbGVkXCIsIHF1ZXJ5LCB0aGF0Lm5hbWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc291cmNlKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgICFzeW5jQ2FsbGVkICYmIHN5bmMoW10pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHN5bmMoc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICBpZiAoc3luY0NhbGxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN5bmNDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIHN1Z2dlc3Rpb25zID0gKHN1Z2dlc3Rpb25zIHx8IFtdKS5zbGljZSgwLCB0aGF0LmxpbWl0KTtcbiAgICAgICAgICByZW5kZXJlZCA9IHN1Z2dlc3Rpb25zLmxlbmd0aDtcblxuICAgICAgICAgIHRoYXQuX292ZXJ3cml0ZShxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuXG4gICAgICAgICAgaWYgKHJlbmRlcmVkIDwgdGhhdC5saW1pdCAmJiB0aGF0LmFzeW5jKSB7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoXCJhc3luY1JlcXVlc3RlZFwiLCBxdWVyeSwgdGhhdC5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhc3luYyhzdWdnZXN0aW9ucykge1xuICAgICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG5cbiAgICAgICAgICBpZiAoIWNhbmNlbGVkICYmIHJlbmRlcmVkIDwgdGhhdC5saW1pdCkge1xuICAgICAgICAgICAgdGhhdC5jYW5jZWwgPSAkLm5vb3A7XG4gICAgICAgICAgICB2YXIgaWR4ID0gTWF0aC5hYnMocmVuZGVyZWQgLSB0aGF0LmxpbWl0KTtcbiAgICAgICAgICAgIHJlbmRlcmVkICs9IGlkeDtcblxuICAgICAgICAgICAgdGhhdC5fYXBwZW5kKHF1ZXJ5LCBzdWdnZXN0aW9ucy5zbGljZSgwLCBpZHgpKTtcblxuICAgICAgICAgICAgdGhhdC5hc3luYyAmJiB0aGF0LnRyaWdnZXIoXCJhc3luY1JlY2VpdmVkXCIsIHF1ZXJ5LCB0aGF0Lm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbmNlbDogJC5ub29wLFxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9lbXB0eSgpO1xuXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImNsZWFyZWRcIik7XG4gICAgICB9LFxuICAgICAgaXNFbXB0eTogZnVuY3Rpb24gaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGVsLmlzKFwiOmVtcHR5XCIpO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuJGVsID0gJChcIjxkaXY+XCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIERhdGFzZXQ7XG5cbiAgICBmdW5jdGlvbiBnZXREaXNwbGF5Rm4oZGlzcGxheSkge1xuICAgICAgZGlzcGxheSA9IGRpc3BsYXkgfHwgXy5zdHJpbmdpZnk7XG4gICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGRpc3BsYXkpID8gZGlzcGxheSA6IGRpc3BsYXlGbjtcblxuICAgICAgZnVuY3Rpb24gZGlzcGxheUZuKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqW2Rpc3BsYXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlcyh0ZW1wbGF0ZXMsIGRpc3BsYXlGbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm90Rm91bmQ6IHRlbXBsYXRlcy5ub3RGb3VuZCAmJiBfLnRlbXBsYXRpZnkodGVtcGxhdGVzLm5vdEZvdW5kKSxcbiAgICAgICAgcGVuZGluZzogdGVtcGxhdGVzLnBlbmRpbmcgJiYgXy50ZW1wbGF0aWZ5KHRlbXBsYXRlcy5wZW5kaW5nKSxcbiAgICAgICAgaGVhZGVyOiB0ZW1wbGF0ZXMuaGVhZGVyICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMuaGVhZGVyKSxcbiAgICAgICAgZm9vdGVyOiB0ZW1wbGF0ZXMuZm9vdGVyICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMuZm9vdGVyKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogdGVtcGxhdGVzLnN1Z2dlc3Rpb24gPyB1c2VyU3VnZ2VzdGlvblRlbXBsYXRlIDogc3VnZ2VzdGlvblRlbXBsYXRlXG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiB1c2VyU3VnZ2VzdGlvblRlbXBsYXRlKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGVtcGxhdGVzLnN1Z2dlc3Rpb247XG4gICAgICAgIHJldHVybiAkKHRlbXBsYXRlKGNvbnRleHQpKS5hdHRyKFwiaWRcIiwgXy5ndWlkKCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzdWdnZXN0aW9uVGVtcGxhdGUoY29udGV4dCkge1xuICAgICAgICByZXR1cm4gJCgnPGRpdiByb2xlPVwib3B0aW9uXCI+JykuYXR0cihcImlkXCIsIF8uZ3VpZCgpKS50ZXh0KGRpc3BsYXlGbihjb250ZXh0KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNWYWxpZE5hbWUoc3RyKSB7XG4gICAgICByZXR1cm4gL15bX2EtekEtWjAtOS1dKyQvLnRlc3Qoc3RyKTtcbiAgICB9XG4gIH0oKTtcblxuICB2YXIgTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIE1lbnUobywgd3d3KSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBvID0gbyB8fCB7fTtcblxuICAgICAgaWYgKCFvLm5vZGUpIHtcbiAgICAgICAgJC5lcnJvcihcIm5vZGUgaXMgcmVxdWlyZWRcIik7XG4gICAgICB9XG5cbiAgICAgIHd3dy5taXhpbih0aGlzKTtcbiAgICAgIHRoaXMuJG5vZGUgPSAkKG8ubm9kZSk7XG4gICAgICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgIHRoaXMuZGF0YXNldHMgPSBfLm1hcChvLmRhdGFzZXRzLCBpbml0aWFsaXplRGF0YXNldCk7XG5cbiAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhc2V0KG9EYXRhc2V0KSB7XG4gICAgICAgIHZhciBub2RlID0gdGhhdC4kbm9kZS5maW5kKG9EYXRhc2V0Lm5vZGUpLmZpcnN0KCk7XG4gICAgICAgIG9EYXRhc2V0Lm5vZGUgPSBub2RlLmxlbmd0aCA/IG5vZGUgOiAkKFwiPGRpdj5cIikuYXBwZW5kVG8odGhhdC4kbm9kZSk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YXNldChvRGF0YXNldCwgd3d3KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfLm1peGluKE1lbnUucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIsIHtcbiAgICAgIF9vblNlbGVjdGFibGVDbGljazogZnVuY3Rpb24gb25TZWxlY3RhYmxlQ2xpY2soJGUpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwic2VsZWN0YWJsZUNsaWNrZWRcIiwgJCgkZS5jdXJyZW50VGFyZ2V0KSk7XG4gICAgICB9LFxuICAgICAgX29uUmVuZGVyZWQ6IGZ1bmN0aW9uIG9uUmVuZGVyZWQodHlwZSwgZGF0YXNldCwgc3VnZ2VzdGlvbnMsIGFzeW5jKSB7XG4gICAgICAgIHRoaXMuJG5vZGUudG9nZ2xlQ2xhc3ModGhpcy5jbGFzc2VzLmVtcHR5LCB0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJkYXRhc2V0UmVuZGVyZWRcIiwgZGF0YXNldCwgc3VnZ2VzdGlvbnMsIGFzeW5jKTtcbiAgICAgIH0sXG4gICAgICBfb25DbGVhcmVkOiBmdW5jdGlvbiBvbkNsZWFyZWQoKSB7XG4gICAgICAgIHRoaXMuJG5vZGUudG9nZ2xlQ2xhc3ModGhpcy5jbGFzc2VzLmVtcHR5LCB0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJkYXRhc2V0Q2xlYXJlZFwiKTtcbiAgICAgIH0sXG4gICAgICBfcHJvcGFnYXRlOiBmdW5jdGlvbiBwcm9wYWdhdGUoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSxcbiAgICAgIF9hbGxEYXRhc2V0c0VtcHR5OiBmdW5jdGlvbiBhbGxEYXRhc2V0c0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gXy5ldmVyeSh0aGlzLmRhdGFzZXRzLCBfLmJpbmQoZnVuY3Rpb24gaXNEYXRhc2V0RW1wdHkoZGF0YXNldCkge1xuICAgICAgICAgIHZhciBpc0VtcHR5ID0gZGF0YXNldC5pc0VtcHR5KCk7XG4gICAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCAhaXNFbXB0eSk7XG4gICAgICAgICAgcmV0dXJuIGlzRW1wdHk7XG4gICAgICAgIH0sIHRoaXMpKTtcbiAgICAgIH0sXG4gICAgICBfZ2V0U2VsZWN0YWJsZXM6IGZ1bmN0aW9uIGdldFNlbGVjdGFibGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbm9kZS5maW5kKHRoaXMuc2VsZWN0b3JzLnNlbGVjdGFibGUpO1xuICAgICAgfSxcbiAgICAgIF9yZW1vdmVDdXJzb3I6IGZ1bmN0aW9uIF9yZW1vdmVDdXJzb3IoKSB7XG4gICAgICAgIHZhciAkc2VsZWN0YWJsZSA9IHRoaXMuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpO1xuICAgICAgICAkc2VsZWN0YWJsZSAmJiAkc2VsZWN0YWJsZS5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuY3Vyc29yKTtcbiAgICAgIH0sXG4gICAgICBfZW5zdXJlVmlzaWJsZTogZnVuY3Rpb24gZW5zdXJlVmlzaWJsZSgkZWwpIHtcbiAgICAgICAgdmFyIGVsVG9wLCBlbEJvdHRvbSwgbm9kZVNjcm9sbFRvcCwgbm9kZUhlaWdodDtcbiAgICAgICAgZWxUb3AgPSAkZWwucG9zaXRpb24oKS50b3A7XG4gICAgICAgIGVsQm90dG9tID0gZWxUb3AgKyAkZWwub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgIG5vZGVTY3JvbGxUb3AgPSB0aGlzLiRub2RlLnNjcm9sbFRvcCgpO1xuICAgICAgICBub2RlSGVpZ2h0ID0gdGhpcy4kbm9kZS5oZWlnaHQoKSArIHBhcnNlSW50KHRoaXMuJG5vZGUuY3NzKFwicGFkZGluZ1RvcFwiKSwgMTApICsgcGFyc2VJbnQodGhpcy4kbm9kZS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpLCAxMCk7XG5cbiAgICAgICAgaWYgKGVsVG9wIDwgMCkge1xuICAgICAgICAgIHRoaXMuJG5vZGUuc2Nyb2xsVG9wKG5vZGVTY3JvbGxUb3AgKyBlbFRvcCk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZUhlaWdodCA8IGVsQm90dG9tKSB7XG4gICAgICAgICAgdGhpcy4kbm9kZS5zY3JvbGxUb3Aobm9kZVNjcm9sbFRvcCArIChlbEJvdHRvbSAtIG5vZGVIZWlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICAgIG9uU2VsZWN0YWJsZUNsaWNrO1xuICAgICAgICBvblNlbGVjdGFibGVDbGljayA9IF8uYmluZCh0aGlzLl9vblNlbGVjdGFibGVDbGljaywgdGhpcyk7XG4gICAgICAgIHRoaXMuJG5vZGUub24oXCJjbGljay50dFwiLCB0aGlzLnNlbGVjdG9ycy5zZWxlY3RhYmxlLCBvblNlbGVjdGFibGVDbGljayk7XG4gICAgICAgIHRoaXMuJG5vZGUub24oXCJtb3VzZW92ZXJcIiwgdGhpcy5zZWxlY3RvcnMuc2VsZWN0YWJsZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuc2V0Q3Vyc29yKCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kbm9kZS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX3JlbW92ZUN1cnNvcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgZnVuY3Rpb24gKGRhdGFzZXQpIHtcbiAgICAgICAgICBkYXRhc2V0Lm9uU3luYyhcImFzeW5jUmVxdWVzdGVkXCIsIHRoYXQuX3Byb3BhZ2F0ZSwgdGhhdCkub25TeW5jKFwiYXN5bmNDYW5jZWxlZFwiLCB0aGF0Ll9wcm9wYWdhdGUsIHRoYXQpLm9uU3luYyhcImFzeW5jUmVjZWl2ZWRcIiwgdGhhdC5fcHJvcGFnYXRlLCB0aGF0KS5vblN5bmMoXCJyZW5kZXJlZFwiLCB0aGF0Ll9vblJlbmRlcmVkLCB0aGF0KS5vblN5bmMoXCJjbGVhcmVkXCIsIHRoYXQuX29uQ2xlYXJlZCwgdGhhdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGlzT3BlbjogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbm9kZS5oYXNDbGFzcyh0aGlzLmNsYXNzZXMub3Blbik7XG4gICAgICB9LFxuICAgICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5zY3JvbGxUb3AoMCk7XG4gICAgICAgIHRoaXMuJG5vZGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuICAgICAgfSxcbiAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuJG5vZGUucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuXG4gICAgICAgIHRoaXMuX3JlbW92ZUN1cnNvcigpO1xuICAgICAgfSxcbiAgICAgIHNldExhbmd1YWdlRGlyZWN0aW9uOiBmdW5jdGlvbiBzZXRMYW5ndWFnZURpcmVjdGlvbihkaXIpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiZGlyXCIsIGRpcik7XG4gICAgICB9LFxuICAgICAgc2VsZWN0YWJsZVJlbGF0aXZlVG9DdXJzb3I6IGZ1bmN0aW9uIHNlbGVjdGFibGVSZWxhdGl2ZVRvQ3Vyc29yKGRlbHRhKSB7XG4gICAgICAgIHZhciAkc2VsZWN0YWJsZXMsICRvbGRDdXJzb3IsIG9sZEluZGV4LCBuZXdJbmRleDtcbiAgICAgICAgJG9sZEN1cnNvciA9IHRoaXMuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpO1xuICAgICAgICAkc2VsZWN0YWJsZXMgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpO1xuICAgICAgICBvbGRJbmRleCA9ICRvbGRDdXJzb3IgPyAkc2VsZWN0YWJsZXMuaW5kZXgoJG9sZEN1cnNvcikgOiAtMTtcbiAgICAgICAgbmV3SW5kZXggPSBvbGRJbmRleCArIGRlbHRhO1xuICAgICAgICBuZXdJbmRleCA9IChuZXdJbmRleCArIDEpICUgKCRzZWxlY3RhYmxlcy5sZW5ndGggKyAxKSAtIDE7XG4gICAgICAgIG5ld0luZGV4ID0gbmV3SW5kZXggPCAtMSA/ICRzZWxlY3RhYmxlcy5sZW5ndGggLSAxIDogbmV3SW5kZXg7XG4gICAgICAgIHJldHVybiBuZXdJbmRleCA9PT0gLTEgPyBudWxsIDogJHNlbGVjdGFibGVzLmVxKG5ld0luZGV4KTtcbiAgICAgIH0sXG4gICAgICBzZXRDdXJzb3I6IGZ1bmN0aW9uIHNldEN1cnNvcigkc2VsZWN0YWJsZSkge1xuICAgICAgICB0aGlzLl9yZW1vdmVDdXJzb3IoKTtcblxuICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSAkc2VsZWN0YWJsZSAmJiAkc2VsZWN0YWJsZS5maXJzdCgpKSB7XG4gICAgICAgICAgJHNlbGVjdGFibGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmN1cnNvcik7XG5cbiAgICAgICAgICB0aGlzLl9lbnN1cmVWaXNpYmxlKCRzZWxlY3RhYmxlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldFNlbGVjdGFibGVEYXRhOiBmdW5jdGlvbiBnZXRTZWxlY3RhYmxlRGF0YSgkZWwpIHtcbiAgICAgICAgcmV0dXJuICRlbCAmJiAkZWwubGVuZ3RoID8gRGF0YXNldC5leHRyYWN0RGF0YSgkZWwpIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRBY3RpdmVTZWxlY3RhYmxlOiBmdW5jdGlvbiBnZXRBY3RpdmVTZWxlY3RhYmxlKCkge1xuICAgICAgICB2YXIgJHNlbGVjdGFibGUgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpLmZpbHRlcih0aGlzLnNlbGVjdG9ycy5jdXJzb3IpLmZpcnN0KCk7XG5cbiAgICAgICAgcmV0dXJuICRzZWxlY3RhYmxlLmxlbmd0aCA/ICRzZWxlY3RhYmxlIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRUb3BTZWxlY3RhYmxlOiBmdW5jdGlvbiBnZXRUb3BTZWxlY3RhYmxlKCkge1xuICAgICAgICB2YXIgJHNlbGVjdGFibGUgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpLmZpcnN0KCk7XG5cbiAgICAgICAgcmV0dXJuICRzZWxlY3RhYmxlLmxlbmd0aCA/ICRzZWxlY3RhYmxlIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShxdWVyeSkge1xuICAgICAgICB2YXIgaXNWYWxpZFVwZGF0ZSA9IHF1ZXJ5ICE9PSB0aGlzLnF1ZXJ5O1xuXG4gICAgICAgIGlmIChpc1ZhbGlkVXBkYXRlKSB7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuXG4gICAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIHVwZGF0ZURhdGFzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWRVcGRhdGU7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgZGF0YXNldC51cGRhdGUocXVlcnkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZW1wdHk6IGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgY2xlYXJEYXRhc2V0KTtcblxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgdGhpcy4kbm9kZS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZW1wdHkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyRGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgZGF0YXNldC5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5vZmYoXCIudHRcIik7XG4gICAgICAgIHRoaXMuJG5vZGUgPSAkKFwiPGRpdj5cIik7XG5cbiAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIGRlc3Ryb3lEYXRhc2V0KTtcblxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95RGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgZGF0YXNldC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBNZW51O1xuICB9KCk7XG5cbiAgdmFyIFN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFN0YXR1cyhvcHRpb25zKSB7XG4gICAgICB0aGlzLiRlbCA9ICQoXCI8c3Bhbj48L3NwYW4+XCIsIHtcbiAgICAgICAgcm9sZTogXCJzdGF0dXNcIixcbiAgICAgICAgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIlxuICAgICAgfSkuY3NzKHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgcGFkZGluZzogXCIwXCIsXG4gICAgICAgIGJvcmRlcjogXCIwXCIsXG4gICAgICAgIGhlaWdodDogXCIxcHhcIixcbiAgICAgICAgd2lkdGg6IFwiMXB4XCIsXG4gICAgICAgIFwibWFyZ2luLWJvdHRvbVwiOiBcIi0xcHhcIixcbiAgICAgICAgXCJtYXJnaW4tcmlnaHRcIjogXCItMXB4XCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICBjbGlwOiBcInJlY3QoMCAwIDAgMClcIixcbiAgICAgICAgXCJ3aGl0ZS1zcGFjZVwiOiBcIm5vd3JhcFwiXG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnMuJGlucHV0LmFmdGVyKHRoaXMuJGVsKTtcblxuICAgICAgXy5lYWNoKG9wdGlvbnMubWVudS5kYXRhc2V0cywgXy5iaW5kKGZ1bmN0aW9uIChkYXRhc2V0KSB7XG4gICAgICAgIGlmIChkYXRhc2V0Lm9uU3luYykge1xuICAgICAgICAgIGRhdGFzZXQub25TeW5jKFwicmVuZGVyZWRcIiwgXy5iaW5kKHRoaXMudXBkYXRlLCB0aGlzKSk7XG4gICAgICAgICAgZGF0YXNldC5vblN5bmMoXCJjbGVhcmVkXCIsIF8uYmluZCh0aGlzLmNsZWFyZWQsIHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcykpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oU3RhdHVzLnByb3RvdHlwZSwge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZXZlbnQsIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBzdWdnZXN0aW9ucy5sZW5ndGg7XG4gICAgICAgIHZhciB3b3JkcztcblxuICAgICAgICBpZiAobGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgd29yZHMgPSB7XG4gICAgICAgICAgICByZXN1bHQ6IFwicmVzdWx0XCIsXG4gICAgICAgICAgICBpczogXCJpc1wiXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3b3JkcyA9IHtcbiAgICAgICAgICAgIHJlc3VsdDogXCJyZXN1bHRzXCIsXG4gICAgICAgICAgICBpczogXCJhcmVcIlxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRlbC50ZXh0KGxlbmd0aCArIFwiIFwiICsgd29yZHMucmVzdWx0ICsgXCIgXCIgKyB3b3Jkcy5pcyArIFwiIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuXCIpO1xuICAgICAgfSxcbiAgICAgIGNsZWFyZWQ6IGZ1bmN0aW9uIGNsZWFyZWQoKSB7XG4gICAgICAgIHRoaXMuJGVsLnRleHQoXCJcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gU3RhdHVzO1xuICB9KCk7XG5cbiAgdmFyIERlZmF1bHRNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHMgPSBNZW51LnByb3RvdHlwZTtcblxuICAgIGZ1bmN0aW9uIERlZmF1bHRNZW51KCkge1xuICAgICAgTWVudS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oRGVmYXVsdE1lbnUucHJvdG90eXBlLCBNZW51LnByb3RvdHlwZSwge1xuICAgICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgIXRoaXMuX2FsbERhdGFzZXRzRW1wdHkoKSAmJiB0aGlzLl9zaG93KCk7XG4gICAgICAgIHJldHVybiBzLm9wZW4uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgIH0sXG4gICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX2hpZGUoKTtcblxuICAgICAgICByZXR1cm4gcy5jbG9zZS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgfSxcbiAgICAgIF9vblJlbmRlcmVkOiBmdW5jdGlvbiBvblJlbmRlcmVkKCkge1xuICAgICAgICBpZiAodGhpcy5fYWxsRGF0YXNldHNFbXB0eSgpKSB7XG4gICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaXNPcGVuKCkgJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHMuX29uUmVuZGVyZWQuYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgIH0sXG4gICAgICBfb25DbGVhcmVkOiBmdW5jdGlvbiBvbkNsZWFyZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpIHtcbiAgICAgICAgICB0aGlzLl9oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5pc09wZW4oKSAmJiB0aGlzLl9zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcy5fb25DbGVhcmVkLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICB9LFxuICAgICAgc2V0TGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIHNldExhbmd1YWdlRGlyZWN0aW9uKGRpcikge1xuICAgICAgICB0aGlzLiRub2RlLmNzcyhkaXIgPT09IFwibHRyXCIgPyB0aGlzLmNzcy5sdHIgOiB0aGlzLmNzcy5ydGwpO1xuICAgICAgICByZXR1cm4gcy5zZXRMYW5ndWFnZURpcmVjdGlvbi5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgfSxcbiAgICAgIF9oaWRlOiBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICB0aGlzLiRub2RlLmhpZGUoKTtcbiAgICAgIH0sXG4gICAgICBfc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gRGVmYXVsdE1lbnU7XG4gIH0oKTtcblxuICB2YXIgVHlwZWFoZWFkID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gVHlwZWFoZWFkKG8sIHd3dykge1xuICAgICAgdmFyIG9uRm9jdXNlZCwgb25CbHVycmVkLCBvbkVudGVyS2V5ZWQsIG9uVGFiS2V5ZWQsIG9uRXNjS2V5ZWQsIG9uVXBLZXllZCwgb25Eb3duS2V5ZWQsIG9uTGVmdEtleWVkLCBvblJpZ2h0S2V5ZWQsIG9uUXVlcnlDaGFuZ2VkLCBvbldoaXRlc3BhY2VDaGFuZ2VkO1xuICAgICAgbyA9IG8gfHwge307XG5cbiAgICAgIGlmICghby5pbnB1dCkge1xuICAgICAgICAkLmVycm9yKFwibWlzc2luZyBpbnB1dFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvLm1lbnUpIHtcbiAgICAgICAgJC5lcnJvcihcIm1pc3NpbmcgbWVudVwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvLmV2ZW50QnVzKSB7XG4gICAgICAgICQuZXJyb3IoXCJtaXNzaW5nIGV2ZW50IGJ1c1wiKTtcbiAgICAgIH1cblxuICAgICAgd3d3Lm1peGluKHRoaXMpO1xuICAgICAgdGhpcy5ldmVudEJ1cyA9IG8uZXZlbnRCdXM7XG4gICAgICB0aGlzLm1pbkxlbmd0aCA9IF8uaXNOdW1iZXIoby5taW5MZW5ndGgpID8gby5taW5MZW5ndGggOiAxO1xuICAgICAgdGhpcy5pbnB1dCA9IG8uaW5wdXQ7XG4gICAgICB0aGlzLm1lbnUgPSBvLm1lbnU7XG4gICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5hdXRvc2VsZWN0ID0gISFvLmF1dG9zZWxlY3Q7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5pbnB1dC5oYXNGb2N1cygpICYmIHRoaXMuYWN0aXZhdGUoKTtcbiAgICAgIHRoaXMuZGlyID0gdGhpcy5pbnB1dC5nZXRMYW5nRGlyKCk7XG5cbiAgICAgIHRoaXMuX2hhY2tzKCk7XG5cbiAgICAgIHRoaXMubWVudS5iaW5kKCkub25TeW5jKFwic2VsZWN0YWJsZUNsaWNrZWRcIiwgdGhpcy5fb25TZWxlY3RhYmxlQ2xpY2tlZCwgdGhpcykub25TeW5jKFwiYXN5bmNSZXF1ZXN0ZWRcIiwgdGhpcy5fb25Bc3luY1JlcXVlc3RlZCwgdGhpcykub25TeW5jKFwiYXN5bmNDYW5jZWxlZFwiLCB0aGlzLl9vbkFzeW5jQ2FuY2VsZWQsIHRoaXMpLm9uU3luYyhcImFzeW5jUmVjZWl2ZWRcIiwgdGhpcy5fb25Bc3luY1JlY2VpdmVkLCB0aGlzKS5vblN5bmMoXCJkYXRhc2V0UmVuZGVyZWRcIiwgdGhpcy5fb25EYXRhc2V0UmVuZGVyZWQsIHRoaXMpLm9uU3luYyhcImRhdGFzZXRDbGVhcmVkXCIsIHRoaXMuX29uRGF0YXNldENsZWFyZWQsIHRoaXMpO1xuICAgICAgb25Gb2N1c2VkID0gYyh0aGlzLCBcImFjdGl2YXRlXCIsIFwib3BlblwiLCBcIl9vbkZvY3VzZWRcIik7XG4gICAgICBvbkJsdXJyZWQgPSBjKHRoaXMsIFwiZGVhY3RpdmF0ZVwiLCBcIl9vbkJsdXJyZWRcIik7XG4gICAgICBvbkVudGVyS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25FbnRlcktleWVkXCIpO1xuICAgICAgb25UYWJLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcImlzT3BlblwiLCBcIl9vblRhYktleWVkXCIpO1xuICAgICAgb25Fc2NLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcIl9vbkVzY0tleWVkXCIpO1xuICAgICAgb25VcEtleWVkID0gYyh0aGlzLCBcImlzQWN0aXZlXCIsIFwib3BlblwiLCBcIl9vblVwS2V5ZWRcIik7XG4gICAgICBvbkRvd25LZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcIm9wZW5cIiwgXCJfb25Eb3duS2V5ZWRcIik7XG4gICAgICBvbkxlZnRLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcImlzT3BlblwiLCBcIl9vbkxlZnRLZXllZFwiKTtcbiAgICAgIG9uUmlnaHRLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcImlzT3BlblwiLCBcIl9vblJpZ2h0S2V5ZWRcIik7XG4gICAgICBvblF1ZXJ5Q2hhbmdlZCA9IGModGhpcywgXCJfb3BlbklmQWN0aXZlXCIsIFwiX29uUXVlcnlDaGFuZ2VkXCIpO1xuICAgICAgb25XaGl0ZXNwYWNlQ2hhbmdlZCA9IGModGhpcywgXCJfb3BlbklmQWN0aXZlXCIsIFwiX29uV2hpdGVzcGFjZUNoYW5nZWRcIik7XG4gICAgICB0aGlzLmlucHV0LmJpbmQoKS5vblN5bmMoXCJmb2N1c2VkXCIsIG9uRm9jdXNlZCwgdGhpcykub25TeW5jKFwiYmx1cnJlZFwiLCBvbkJsdXJyZWQsIHRoaXMpLm9uU3luYyhcImVudGVyS2V5ZWRcIiwgb25FbnRlcktleWVkLCB0aGlzKS5vblN5bmMoXCJ0YWJLZXllZFwiLCBvblRhYktleWVkLCB0aGlzKS5vblN5bmMoXCJlc2NLZXllZFwiLCBvbkVzY0tleWVkLCB0aGlzKS5vblN5bmMoXCJ1cEtleWVkXCIsIG9uVXBLZXllZCwgdGhpcykub25TeW5jKFwiZG93bktleWVkXCIsIG9uRG93bktleWVkLCB0aGlzKS5vblN5bmMoXCJsZWZ0S2V5ZWRcIiwgb25MZWZ0S2V5ZWQsIHRoaXMpLm9uU3luYyhcInJpZ2h0S2V5ZWRcIiwgb25SaWdodEtleWVkLCB0aGlzKS5vblN5bmMoXCJxdWVyeUNoYW5nZWRcIiwgb25RdWVyeUNoYW5nZWQsIHRoaXMpLm9uU3luYyhcIndoaXRlc3BhY2VDaGFuZ2VkXCIsIG9uV2hpdGVzcGFjZUNoYW5nZWQsIHRoaXMpLm9uU3luYyhcImxhbmdEaXJDaGFuZ2VkXCIsIHRoaXMuX29uTGFuZ0RpckNoYW5nZWQsIHRoaXMpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oVHlwZWFoZWFkLnByb3RvdHlwZSwge1xuICAgICAgX2hhY2tzOiBmdW5jdGlvbiBoYWNrcygpIHtcbiAgICAgICAgdmFyICRpbnB1dCwgJG1lbnU7XG4gICAgICAgICRpbnB1dCA9IHRoaXMuaW5wdXQuJGlucHV0IHx8ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgJG1lbnUgPSB0aGlzLm1lbnUuJG5vZGUgfHwgJChcIjxkaXY+XCIpO1xuICAgICAgICAkaW5wdXQub24oXCJibHVyLnR0XCIsIGZ1bmN0aW9uICgkZSkge1xuICAgICAgICAgIHZhciBhY3RpdmUsIGlzQWN0aXZlLCBoYXNBY3RpdmU7XG4gICAgICAgICAgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICBpc0FjdGl2ZSA9ICRtZW51LmlzKGFjdGl2ZSk7XG4gICAgICAgICAgaGFzQWN0aXZlID0gJG1lbnUuaGFzKGFjdGl2ZSkubGVuZ3RoID4gMDtcblxuICAgICAgICAgIGlmIChfLmlzTXNpZSgpICYmIChpc0FjdGl2ZSB8fCBoYXNBY3RpdmUpKSB7XG4gICAgICAgICAgICAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICRtZW51Lm9uKFwibW91c2Vkb3duLnR0XCIsIGZ1bmN0aW9uICgkZSkge1xuICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIF9vblNlbGVjdGFibGVDbGlja2VkOiBmdW5jdGlvbiBvblNlbGVjdGFibGVDbGlja2VkKHR5cGUsICRlbCkge1xuICAgICAgICB0aGlzLnNlbGVjdCgkZWwpO1xuICAgICAgfSxcbiAgICAgIF9vbkRhdGFzZXRDbGVhcmVkOiBmdW5jdGlvbiBvbkRhdGFzZXRDbGVhcmVkKCkge1xuICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICB9LFxuICAgICAgX29uRGF0YXNldFJlbmRlcmVkOiBmdW5jdGlvbiBvbkRhdGFzZXRSZW5kZXJlZCh0eXBlLCBzdWdnZXN0aW9ucywgYXN5bmMsIGRhdGFzZXQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlSGludCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmF1dG9zZWxlY3QpIHtcbiAgICAgICAgICB2YXIgY3Vyc29yQ2xhc3MgPSB0aGlzLnNlbGVjdG9ycy5jdXJzb3Iuc3Vic3RyKDEpO1xuICAgICAgICAgIHRoaXMubWVudS4kbm9kZS5maW5kKHRoaXMuc2VsZWN0b3JzLnN1Z2dlc3Rpb24pLmZpcnN0KCkuYWRkQ2xhc3MoY3Vyc29yQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwicmVuZGVyXCIsIHN1Z2dlc3Rpb25zLCBhc3luYywgZGF0YXNldCk7XG4gICAgICB9LFxuICAgICAgX29uQXN5bmNSZXF1ZXN0ZWQ6IGZ1bmN0aW9uIG9uQXN5bmNSZXF1ZXN0ZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYXN5bmNyZXF1ZXN0XCIsIHF1ZXJ5LCBkYXRhc2V0KTtcbiAgICAgIH0sXG4gICAgICBfb25Bc3luY0NhbmNlbGVkOiBmdW5jdGlvbiBvbkFzeW5jQ2FuY2VsZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYXN5bmNjYW5jZWxcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgfSxcbiAgICAgIF9vbkFzeW5jUmVjZWl2ZWQ6IGZ1bmN0aW9uIG9uQXN5bmNSZWNlaXZlZCh0eXBlLCBkYXRhc2V0LCBxdWVyeSkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhc3luY3JlY2VpdmVcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgfSxcbiAgICAgIF9vbkZvY3VzZWQ6IGZ1bmN0aW9uIG9uRm9jdXNlZCgpIHtcbiAgICAgICAgdGhpcy5fbWluTGVuZ3RoTWV0KCkgJiYgdGhpcy5tZW51LnVwZGF0ZSh0aGlzLmlucHV0LmdldFF1ZXJ5KCkpO1xuICAgICAgfSxcbiAgICAgIF9vbkJsdXJyZWQ6IGZ1bmN0aW9uIG9uQmx1cnJlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXQuaGFzUXVlcnlDaGFuZ2VkU2luY2VMYXN0Rm9jdXMoKSkge1xuICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImNoYW5nZVwiLCB0aGlzLmlucHV0LmdldFF1ZXJ5KCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX29uRW50ZXJLZXllZDogZnVuY3Rpb24gb25FbnRlcktleWVkKHR5cGUsICRlKSB7XG4gICAgICAgIHZhciAkc2VsZWN0YWJsZTtcblxuICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSkge1xuICAgICAgICAgICAgJGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmF1dG9zZWxlY3QpIHtcbiAgICAgICAgICBpZiAodGhpcy5zZWxlY3QodGhpcy5tZW51LmdldFRvcFNlbGVjdGFibGUoKSkpIHtcbiAgICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBfb25UYWJLZXllZDogZnVuY3Rpb24gb25UYWJLZXllZCh0eXBlLCAkZSkge1xuICAgICAgICB2YXIgJHNlbGVjdGFibGU7XG5cbiAgICAgICAgaWYgKCRzZWxlY3RhYmxlID0gdGhpcy5tZW51LmdldEFjdGl2ZVNlbGVjdGFibGUoKSkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXV0b3NlbGVjdCkge1xuICAgICAgICAgIGlmICgkc2VsZWN0YWJsZSA9IHRoaXMubWVudS5nZXRUb3BTZWxlY3RhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vbkVzY0tleWVkOiBmdW5jdGlvbiBvbkVzY0tleWVkKCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9LFxuICAgICAgX29uVXBLZXllZDogZnVuY3Rpb24gb25VcEtleWVkKCkge1xuICAgICAgICB0aGlzLm1vdmVDdXJzb3IoLTEpO1xuICAgICAgfSxcbiAgICAgIF9vbkRvd25LZXllZDogZnVuY3Rpb24gb25Eb3duS2V5ZWQoKSB7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvcigrMSk7XG4gICAgICB9LFxuICAgICAgX29uTGVmdEtleWVkOiBmdW5jdGlvbiBvbkxlZnRLZXllZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcInJ0bFwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgdGhpcy5hdXRvY29tcGxldGUodGhpcy5tZW51LmdldEFjdGl2ZVNlbGVjdGFibGUoKSB8fCB0aGlzLm1lbnUuZ2V0VG9wU2VsZWN0YWJsZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vblJpZ2h0S2V5ZWQ6IGZ1bmN0aW9uIG9uUmlnaHRLZXllZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcImx0clwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgdGhpcy5hdXRvY29tcGxldGUodGhpcy5tZW51LmdldEFjdGl2ZVNlbGVjdGFibGUoKSB8fCB0aGlzLm1lbnUuZ2V0VG9wU2VsZWN0YWJsZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vblF1ZXJ5Q2hhbmdlZDogZnVuY3Rpb24gb25RdWVyeUNoYW5nZWQoZSwgcXVlcnkpIHtcbiAgICAgICAgdGhpcy5fbWluTGVuZ3RoTWV0KHF1ZXJ5KSA/IHRoaXMubWVudS51cGRhdGUocXVlcnkpIDogdGhpcy5tZW51LmVtcHR5KCk7XG4gICAgICB9LFxuICAgICAgX29uV2hpdGVzcGFjZUNoYW5nZWQ6IGZ1bmN0aW9uIG9uV2hpdGVzcGFjZUNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhpbnQoKTtcbiAgICAgIH0sXG4gICAgICBfb25MYW5nRGlyQ2hhbmdlZDogZnVuY3Rpb24gb25MYW5nRGlyQ2hhbmdlZChlLCBkaXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyICE9PSBkaXIpIHtcbiAgICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgICB0aGlzLm1lbnUuc2V0TGFuZ3VhZ2VEaXJlY3Rpb24oZGlyKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vcGVuSWZBY3RpdmU6IGZ1bmN0aW9uIG9wZW5JZkFjdGl2ZSgpIHtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSgpICYmIHRoaXMub3BlbigpO1xuICAgICAgfSxcbiAgICAgIF9taW5MZW5ndGhNZXQ6IGZ1bmN0aW9uIG1pbkxlbmd0aE1ldChxdWVyeSkge1xuICAgICAgICBxdWVyeSA9IF8uaXNTdHJpbmcocXVlcnkpID8gcXVlcnkgOiB0aGlzLmlucHV0LmdldFF1ZXJ5KCkgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5Lmxlbmd0aCA+PSB0aGlzLm1pbkxlbmd0aDtcbiAgICAgIH0sXG4gICAgICBfdXBkYXRlSGludDogZnVuY3Rpb24gdXBkYXRlSGludCgpIHtcbiAgICAgICAgdmFyICRzZWxlY3RhYmxlLCBkYXRhLCB2YWwsIHF1ZXJ5LCBlc2NhcGVkUXVlcnksIGZyb250TWF0Y2hSZWdFeCwgbWF0Y2g7XG4gICAgICAgICRzZWxlY3RhYmxlID0gdGhpcy5tZW51LmdldFRvcFNlbGVjdGFibGUoKTtcbiAgICAgICAgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkc2VsZWN0YWJsZSk7XG4gICAgICAgIHZhbCA9IHRoaXMuaW5wdXQuZ2V0SW5wdXRWYWx1ZSgpO1xuXG4gICAgICAgIGlmIChkYXRhICYmICFfLmlzQmxhbmtTdHJpbmcodmFsKSAmJiAhdGhpcy5pbnB1dC5oYXNPdmVyZmxvdygpKSB7XG4gICAgICAgICAgcXVlcnkgPSBJbnB1dC5ub3JtYWxpemVRdWVyeSh2YWwpO1xuICAgICAgICAgIGVzY2FwZWRRdWVyeSA9IF8uZXNjYXBlUmVnRXhDaGFycyhxdWVyeSk7XG4gICAgICAgICAgZnJvbnRNYXRjaFJlZ0V4ID0gbmV3IFJlZ0V4cChcIl4oPzpcIiArIGVzY2FwZWRRdWVyeSArIFwiKSguKyQpXCIsIFwiaVwiKTtcbiAgICAgICAgICBtYXRjaCA9IGZyb250TWF0Y2hSZWdFeC5leGVjKGRhdGEudmFsKTtcbiAgICAgICAgICBtYXRjaCAmJiB0aGlzLmlucHV0LnNldEhpbnQodmFsICsgbWF0Y2hbMV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpc0VuYWJsZWQ6IGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlZDtcbiAgICAgIH0sXG4gICAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIH0sXG4gICAgICBpc0FjdGl2ZTogZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZTtcbiAgICAgIH0sXG4gICAgICBhY3RpdmF0ZTogZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0VuYWJsZWQoKSB8fCB0aGlzLmV2ZW50QnVzLmJlZm9yZShcImFjdGl2ZVwiKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYWN0aXZlXCIpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50QnVzLmJlZm9yZShcImlkbGVcIikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiaWRsZVwiKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGlzT3BlbjogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZW51LmlzT3BlbigpO1xuICAgICAgfSxcbiAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4oKSAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dC5zZXRBcmlhRXhwYW5kZWQodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tZW51Lm9wZW4oKTtcblxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUhpbnQoKTtcblxuICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcIm9wZW5cIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4oKTtcbiAgICAgIH0sXG4gICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3BlbigpICYmICF0aGlzLmV2ZW50QnVzLmJlZm9yZShcImNsb3NlXCIpKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dC5zZXRBcmlhRXhwYW5kZWQoZmFsc2UpO1xuICAgICAgICAgIHRoaXMubWVudS5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgICAgdGhpcy5pbnB1dC5yZXNldElucHV0VmFsdWUoKTtcbiAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJjbG9zZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhdGhpcy5pc09wZW4oKTtcbiAgICAgIH0sXG4gICAgICBzZXRWYWw6IGZ1bmN0aW9uIHNldFZhbCh2YWwpIHtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXRRdWVyeShfLnRvU3RyKHZhbCkpO1xuICAgICAgfSxcbiAgICAgIGdldFZhbDogZnVuY3Rpb24gZ2V0VmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC5nZXRRdWVyeSgpO1xuICAgICAgfSxcbiAgICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KCRzZWxlY3RhYmxlKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5tZW51LmdldFNlbGVjdGFibGVEYXRhKCRzZWxlY3RhYmxlKTtcblxuICAgICAgICBpZiAoZGF0YSAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJzZWxlY3RcIiwgZGF0YS5vYmosIGRhdGEuZGF0YXNldCkpIHtcbiAgICAgICAgICB0aGlzLmlucHV0LnNldFF1ZXJ5KGRhdGEudmFsLCB0cnVlKTtcbiAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJzZWxlY3RcIiwgZGF0YS5vYmosIGRhdGEuZGF0YXNldCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGF1dG9jb21wbGV0ZTogZnVuY3Rpb24gYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSB7XG4gICAgICAgIHZhciBxdWVyeSwgZGF0YSwgaXNWYWxpZDtcbiAgICAgICAgcXVlcnkgPSB0aGlzLmlucHV0LmdldFF1ZXJ5KCk7XG4gICAgICAgIGRhdGEgPSB0aGlzLm1lbnUuZ2V0U2VsZWN0YWJsZURhdGEoJHNlbGVjdGFibGUpO1xuICAgICAgICBpc1ZhbGlkID0gZGF0YSAmJiBxdWVyeSAhPT0gZGF0YS52YWw7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgIXRoaXMuZXZlbnRCdXMuYmVmb3JlKFwiYXV0b2NvbXBsZXRlXCIsIGRhdGEub2JqLCBkYXRhLmRhdGFzZXQpKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dC5zZXRRdWVyeShkYXRhLnZhbCk7XG4gICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYXV0b2NvbXBsZXRlXCIsIGRhdGEub2JqLCBkYXRhLmRhdGFzZXQpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICAgIG1vdmVDdXJzb3I6IGZ1bmN0aW9uIG1vdmVDdXJzb3IoZGVsdGEpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCAkY2FuZGlkYXRlLCBkYXRhLCBzdWdnZXN0aW9uLCBkYXRhc2V0TmFtZSwgY2FuY2VsTW92ZSwgaWQ7XG4gICAgICAgIHF1ZXJ5ID0gdGhpcy5pbnB1dC5nZXRRdWVyeSgpO1xuICAgICAgICAkY2FuZGlkYXRlID0gdGhpcy5tZW51LnNlbGVjdGFibGVSZWxhdGl2ZVRvQ3Vyc29yKGRlbHRhKTtcbiAgICAgICAgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkY2FuZGlkYXRlKTtcbiAgICAgICAgc3VnZ2VzdGlvbiA9IGRhdGEgPyBkYXRhLm9iaiA6IG51bGw7XG4gICAgICAgIGRhdGFzZXROYW1lID0gZGF0YSA/IGRhdGEuZGF0YXNldCA6IG51bGw7XG4gICAgICAgIGlkID0gJGNhbmRpZGF0ZSA/ICRjYW5kaWRhdGUuYXR0cihcImlkXCIpIDogbnVsbDtcbiAgICAgICAgdGhpcy5pbnB1dC50cmlnZ2VyKFwiY3Vyc29yY2hhbmdlXCIsIGlkKTtcbiAgICAgICAgY2FuY2VsTW92ZSA9IHRoaXMuX21pbkxlbmd0aE1ldCgpICYmIHRoaXMubWVudS51cGRhdGUocXVlcnkpO1xuXG4gICAgICAgIGlmICghY2FuY2VsTW92ZSAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJjdXJzb3JjaGFuZ2VcIiwgc3VnZ2VzdGlvbiwgZGF0YXNldE5hbWUpKSB7XG4gICAgICAgICAgdGhpcy5tZW51LnNldEN1cnNvcigkY2FuZGlkYXRlKTtcblxuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEudmFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0SW5wdXRWYWx1ZShkYXRhLnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQucmVzZXRJbnB1dFZhbHVlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUhpbnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJjdXJzb3JjaGFuZ2VcIiwgc3VnZ2VzdGlvbiwgZGF0YXNldE5hbWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1lbnUuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFR5cGVhaGVhZDtcblxuICAgIGZ1bmN0aW9uIGMoY3R4KSB7XG4gICAgICB2YXIgbWV0aG9kcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgICAgIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgcmV0dXJuIGN0eFttZXRob2RdLmFwcGx5KGN0eCwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH0oKTtcblxuICAoZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG9sZCwga2V5cywgbWV0aG9kcztcbiAgICBvbGQgPSAkLmZuLnR5cGVhaGVhZDtcbiAgICBrZXlzID0ge1xuICAgICAgd3d3OiBcInR0LXd3d1wiLFxuICAgICAgYXR0cnM6IFwidHQtYXR0cnNcIixcbiAgICAgIHR5cGVhaGVhZDogXCJ0dC10eXBlYWhlYWRcIlxuICAgIH07XG4gICAgbWV0aG9kcyA9IHtcbiAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobywgZGF0YXNldHMpIHtcbiAgICAgICAgdmFyIHd3dztcbiAgICAgICAgZGF0YXNldHMgPSBfLmlzQXJyYXkoZGF0YXNldHMpID8gZGF0YXNldHMgOiBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICB3d3cgPSBXV1coby5jbGFzc05hbWVzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChhdHRhY2gpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGF0dGFjaCgpIHtcbiAgICAgICAgICB2YXIgJGlucHV0LCAkd3JhcHBlciwgJGhpbnQsICRtZW51LCBkZWZhdWx0SGludCwgZGVmYXVsdE1lbnUsIGV2ZW50QnVzLCBpbnB1dCwgbWVudSwgc3RhdHVzLCB0eXBlYWhlYWQsIE1lbnVDb25zdHJ1Y3RvcjtcblxuICAgICAgICAgIF8uZWFjaChkYXRhc2V0cywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIGQuaGlnaGxpZ2h0ID0gISFvLmhpZ2hsaWdodDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgICAgJHdyYXBwZXIgPSAkKHd3dy5odG1sLndyYXBwZXIpO1xuICAgICAgICAgICRoaW50ID0gJGVsT3JOdWxsKG8uaGludCk7XG4gICAgICAgICAgJG1lbnUgPSAkZWxPck51bGwoby5tZW51KTtcbiAgICAgICAgICBkZWZhdWx0SGludCA9IG8uaGludCAhPT0gZmFsc2UgJiYgISRoaW50O1xuICAgICAgICAgIGRlZmF1bHRNZW51ID0gby5tZW51ICE9PSBmYWxzZSAmJiAhJG1lbnU7XG4gICAgICAgICAgZGVmYXVsdEhpbnQgJiYgKCRoaW50ID0gYnVpbGRIaW50RnJvbUlucHV0KCRpbnB1dCwgd3d3KSk7XG4gICAgICAgICAgZGVmYXVsdE1lbnUgJiYgKCRtZW51ID0gJCh3d3cuaHRtbC5tZW51KS5jc3Mod3d3LmNzcy5tZW51KSk7XG4gICAgICAgICAgJGhpbnQgJiYgJGhpbnQudmFsKFwiXCIpO1xuICAgICAgICAgICRpbnB1dCA9IHByZXBJbnB1dCgkaW5wdXQsIHd3dyk7XG5cbiAgICAgICAgICBpZiAoZGVmYXVsdEhpbnQgfHwgZGVmYXVsdE1lbnUpIHtcbiAgICAgICAgICAgICR3cmFwcGVyLmNzcyh3d3cuY3NzLndyYXBwZXIpO1xuICAgICAgICAgICAgJGlucHV0LmNzcyhkZWZhdWx0SGludCA/IHd3dy5jc3MuaW5wdXQgOiB3d3cuY3NzLmlucHV0V2l0aE5vSGludCk7XG4gICAgICAgICAgICAkaW5wdXQud3JhcCgkd3JhcHBlcikucGFyZW50KCkucHJlcGVuZChkZWZhdWx0SGludCA/ICRoaW50IDogbnVsbCkuYXBwZW5kKGRlZmF1bHRNZW51ID8gJG1lbnUgOiBudWxsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBNZW51Q29uc3RydWN0b3IgPSBkZWZhdWx0TWVudSA/IERlZmF1bHRNZW51IDogTWVudTtcbiAgICAgICAgICBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cyh7XG4gICAgICAgICAgICBlbDogJGlucHV0XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaW5wdXQgPSBuZXcgSW5wdXQoe1xuICAgICAgICAgICAgaGludDogJGhpbnQsXG4gICAgICAgICAgICBpbnB1dDogJGlucHV0LFxuICAgICAgICAgICAgbWVudTogJG1lbnVcbiAgICAgICAgICB9LCB3d3cpO1xuICAgICAgICAgIG1lbnUgPSBuZXcgTWVudUNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIG5vZGU6ICRtZW51LFxuICAgICAgICAgICAgZGF0YXNldHM6IGRhdGFzZXRzXG4gICAgICAgICAgfSwgd3d3KTtcbiAgICAgICAgICBzdGF0dXMgPSBuZXcgU3RhdHVzKHtcbiAgICAgICAgICAgICRpbnB1dDogJGlucHV0LFxuICAgICAgICAgICAgbWVudTogbWVudVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHR5cGVhaGVhZCA9IG5ldyBUeXBlYWhlYWQoe1xuICAgICAgICAgICAgaW5wdXQ6IGlucHV0LFxuICAgICAgICAgICAgbWVudTogbWVudSxcbiAgICAgICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcbiAgICAgICAgICAgIG1pbkxlbmd0aDogby5taW5MZW5ndGgsXG4gICAgICAgICAgICBhdXRvc2VsZWN0OiBvLmF1dG9zZWxlY3RcbiAgICAgICAgICB9LCB3d3cpO1xuICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMud3d3LCB3d3cpO1xuICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMudHlwZWFoZWFkLCB0eXBlYWhlYWQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaXNFbmFibGVkOiBmdW5jdGlvbiBpc0VuYWJsZWQoKSB7XG4gICAgICAgIHZhciBlbmFibGVkO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIGVuYWJsZWQgPSB0LmlzRW5hYmxlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgICB9LFxuICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHR0RWFjaCh0aGlzLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHQuZW5hYmxlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0LmRpc2FibGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZTtcbiAgICAgICAgdHRFYWNoKHRoaXMuZmlyc3QoKSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBhY3RpdmUgPSB0LmlzQWN0aXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWN0aXZlO1xuICAgICAgfSxcbiAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5hY3RpdmF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5kZWFjdGl2YXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBpc09wZW46IGZ1bmN0aW9uIGlzT3BlbigpIHtcbiAgICAgICAgdmFyIG9wZW47XG4gICAgICAgIHR0RWFjaCh0aGlzLmZpcnN0KCksIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgb3BlbiA9IHQuaXNPcGVuKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3BlbjtcbiAgICAgIH0sXG4gICAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0Lm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoZWwpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmYWxzZSxcbiAgICAgICAgICAgICRlbCA9ICQoZWwpO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0LnNlbGVjdCgkZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9LFxuICAgICAgYXV0b2NvbXBsZXRlOiBmdW5jdGlvbiBhdXRvY29tcGxldGUoZWwpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmYWxzZSxcbiAgICAgICAgICAgICRlbCA9ICQoZWwpO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0LmF1dG9jb21wbGV0ZSgkZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9LFxuICAgICAgbW92ZUN1cnNvcjogZnVuY3Rpb24gbW92ZUN1cnNvZShkZWx0YSkge1xuICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0Lm1vdmVDdXJzb3IoZGVsdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9LFxuICAgICAgdmFsOiBmdW5jdGlvbiB2YWwobmV3VmFsKSB7XG4gICAgICAgIHZhciBxdWVyeTtcblxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcXVlcnkgPSB0LmdldFZhbCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBxdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQuc2V0VmFsKF8udG9TdHIobmV3VmFsKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHR5cGVhaGVhZCwgJGlucHV0KSB7XG4gICAgICAgICAgcmV2ZXJ0KCRpbnB1dCk7XG4gICAgICAgICAgdHlwZWFoZWFkLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkLmZuLnR5cGVhaGVhZCA9IGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkLmZuLnR5cGVhaGVhZC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgICQuZm4udHlwZWFoZWFkID0gb2xkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHR0RWFjaCgkZWxzLCBmbikge1xuICAgICAgJGVscy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyksXG4gICAgICAgICAgICB0eXBlYWhlYWQ7XG4gICAgICAgICh0eXBlYWhlYWQgPSAkaW5wdXQuZGF0YShrZXlzLnR5cGVhaGVhZCkpICYmIGZuKHR5cGVhaGVhZCwgJGlucHV0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkSGludEZyb21JbnB1dCgkaW5wdXQsIHd3dykge1xuICAgICAgcmV0dXJuICRpbnB1dC5jbG9uZSgpLmFkZENsYXNzKHd3dy5jbGFzc2VzLmhpbnQpLnJlbW92ZURhdGEoKS5jc3Mod3d3LmNzcy5oaW50KS5jc3MoZ2V0QmFja2dyb3VuZFN0eWxlcygkaW5wdXQpKS5wcm9wKHtcbiAgICAgICAgcmVhZG9ubHk6IHRydWUsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgfSkucmVtb3ZlQXR0cihcImlkIG5hbWUgcGxhY2Vob2xkZXJcIikucmVtb3ZlQ2xhc3MoXCJyZXF1aXJlZFwiKS5hdHRyKHtcbiAgICAgICAgc3BlbGxjaGVjazogXCJmYWxzZVwiLFxuICAgICAgICB0YWJpbmRleDogLTFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXBJbnB1dCgkaW5wdXQsIHd3dykge1xuICAgICAgJGlucHV0LmRhdGEoa2V5cy5hdHRycywge1xuICAgICAgICBkaXI6ICRpbnB1dC5hdHRyKFwiZGlyXCIpLFxuICAgICAgICBhdXRvY29tcGxldGU6ICRpbnB1dC5hdHRyKFwiYXV0b2NvbXBsZXRlXCIpLFxuICAgICAgICBzcGVsbGNoZWNrOiAkaW5wdXQuYXR0cihcInNwZWxsY2hlY2tcIiksXG4gICAgICAgIHN0eWxlOiAkaW5wdXQuYXR0cihcInN0eWxlXCIpXG4gICAgICB9KTtcbiAgICAgICRpbnB1dC5hZGRDbGFzcyh3d3cuY2xhc3Nlcy5pbnB1dCkuYXR0cih7XG4gICAgICAgIHNwZWxsY2hlY2s6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgISRpbnB1dC5hdHRyKFwiZGlyXCIpICYmICRpbnB1dC5hdHRyKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIHJldHVybiAkaW5wdXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QmFja2dyb3VuZFN0eWxlcygkZWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJhY2tncm91bmRBdHRhY2htZW50OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1hdHRhY2htZW50XCIpLFxuICAgICAgICBiYWNrZ3JvdW5kQ2xpcDogJGVsLmNzcyhcImJhY2tncm91bmQtY2xpcFwiKSxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiKSxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiKSxcbiAgICAgICAgYmFja2dyb3VuZE9yaWdpbjogJGVsLmNzcyhcImJhY2tncm91bmQtb3JpZ2luXCIpLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICRlbC5jc3MoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiksXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1zaXplXCIpXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJldmVydCgkaW5wdXQpIHtcbiAgICAgIHZhciB3d3csICR3cmFwcGVyO1xuICAgICAgd3d3ID0gJGlucHV0LmRhdGEoa2V5cy53d3cpO1xuICAgICAgJHdyYXBwZXIgPSAkaW5wdXQucGFyZW50KCkuZmlsdGVyKHd3dy5zZWxlY3RvcnMud3JhcHBlcik7XG5cbiAgICAgIF8uZWFjaCgkaW5wdXQuZGF0YShrZXlzLmF0dHJzKSwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgIF8uaXNVbmRlZmluZWQodmFsKSA/ICRpbnB1dC5yZW1vdmVBdHRyKGtleSkgOiAkaW5wdXQuYXR0cihrZXksIHZhbCk7XG4gICAgICB9KTtcblxuICAgICAgJGlucHV0LnJlbW92ZURhdGEoa2V5cy50eXBlYWhlYWQpLnJlbW92ZURhdGEoa2V5cy53d3cpLnJlbW92ZURhdGEoa2V5cy5hdHRyKS5yZW1vdmVDbGFzcyh3d3cuY2xhc3Nlcy5pbnB1dCk7XG5cbiAgICAgIGlmICgkd3JhcHBlci5sZW5ndGgpIHtcbiAgICAgICAgJGlucHV0LmRldGFjaCgpLmluc2VydEFmdGVyKCR3cmFwcGVyKTtcbiAgICAgICAgJHdyYXBwZXIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gJGVsT3JOdWxsKG9iaikge1xuICAgICAgdmFyIGlzVmFsaWQsICRlbDtcbiAgICAgIGlzVmFsaWQgPSBfLmlzSlF1ZXJ5KG9iaikgfHwgXy5pc0VsZW1lbnQob2JqKTtcbiAgICAgICRlbCA9IGlzVmFsaWQgPyAkKG9iaikuZmlyc3QoKSA6IFtdO1xuICAgICAgcmV0dXJuICRlbC5sZW5ndGggPyAkZWwgOiBudWxsO1xuICAgIH1cbiAgfSkoKTtcbn0pOyIsInZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCItIS4uLy4uL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanM/P3JlZi0tOSEuL3R5cGVhaGVhZC5idW5kbGUuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX18gPSByZXF1aXJlKFwiLi4vLi4vZXhwb3NlLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0R2xvYmFsVGhpcy5qc1wiKTtcbnZhciBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fID0gX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX187XG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJCbG9vZGhvdW5kXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcIkJsb29kaG91bmRcIl0gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXztcbmVsc2UgdGhyb3cgbmV3IEVycm9yKCdbZXhwb3Nlcy1sb2FkZXJdIFRoZSBcIkJsb29kaG91bmRcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbm1vZHVsZS5leHBvcnRzID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICB9XG5cbiAgdmFyIGc7XG5cbiAgdHJ5IHtcbiAgICBnID0gdGhpcyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzZWxmID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZztcbn0oKTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhZicsIHtcbiAgbW9udGhzOiAnSmFudWFyaWVfRmVicnVhcmllX01hYXJ0X0FwcmlsX01laV9KdW5pZV9KdWxpZV9BdWd1c3R1c19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01ydF9BcHJfTWVpX0p1bl9KdWxfQXVnX1NlcF9Pa3RfTm92X0Rlcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdTb25kYWdfTWFhbmRhZ19EaW5zZGFnX1dvZW5zZGFnX0RvbmRlcmRhZ19WcnlkYWdfU2F0ZXJkYWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTb25fTWFhX0Rpbl9Xb2VfRG9uX1ZyeV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU29fTWFfRGlfV29fRG9fVnJfU2EnLnNwbGl0KCdfJyksXG4gIG1lcmlkaWVtUGFyc2U6IC92bXxubS9pLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIC9ebm0kL2kudGVzdChpbnB1dCk7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA8IDEyKSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICd2bScgOiAnVk0nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICdubScgOiAnTk0nO1xuICAgIH1cbiAgfSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tWYW5kYWcgb21dIExUJyxcbiAgICBuZXh0RGF5OiAnW03DtHJlIG9tXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtvbV0gTFQnLFxuICAgIGxhc3REYXk6ICdbR2lzdGVyIG9tXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFhc10gZGRkZCBbb21dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ29vciAlcycsXG4gICAgcGFzdDogJyVzIGdlbGVkZScsXG4gICAgczogXCInbiBwYWFyIHNla29uZGVzXCIsXG4gICAgc3M6ICclZCBzZWtvbmRlcycsXG4gICAgbTogXCInbiBtaW51dXRcIixcbiAgICBtbTogJyVkIG1pbnV0ZScsXG4gICAgaDogXCInbiB1dXJcIixcbiAgICBoaDogJyVkIHVyZScsXG4gICAgZDogXCInbiBkYWdcIixcbiAgICBkZDogJyVkIGRhZScsXG4gICAgTTogXCInbiBtYWFuZFwiLFxuICAgIE1NOiAnJWQgbWFhbmRlJyxcbiAgICB5OiBcIiduIGphYXJcIixcbiAgICB5eTogJyVkIGphYXInXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdGV8ZGUpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVyICsgKG51bWJlciA9PT0gMSB8fCBudW1iZXIgPT09IDggfHwgbnVtYmVyID49IDIwID8gJ3N0ZScgOiAnZGUnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG52YXIgcGx1cmFsRm9ybSA9IGZ1bmN0aW9uIHBsdXJhbEZvcm0obikge1xuICByZXR1cm4gbiA9PT0gMCA/IDAgOiBuID09PSAxID8gMSA6IG4gPT09IDIgPyAyIDogbiAlIDEwMCA+PSAzICYmIG4gJSAxMDAgPD0gMTAgPyAzIDogbiAlIDEwMCA+PSAxMSA/IDQgOiA1O1xufSxcbiAgICBwbHVyYWxzID0ge1xuICBzOiBbJ9ij2YLZhCDZhdmGINir2KfZhtmK2KknLCAn2KvYp9mG2YrYqSDZiNin2K3Yr9ipJywgWyfYq9in2YbZitiq2KfZhicsICfYq9in2YbZitiq2YrZhiddLCAnJWQg2KvZiNin2YYnLCAnJWQg2KvYp9mG2YrYqScsICclZCDYq9in2YbZitipJ10sXG4gIG06IFsn2KPZgtmEINmF2YYg2K/ZgtmK2YLYqScsICfYr9mC2YrZgtipINmI2KfYrdiv2KknLCBbJ9iv2YLZitmC2KrYp9mGJywgJ9iv2YLZitmC2KrZitmGJ10sICclZCDYr9mC2KfYptmCJywgJyVkINiv2YLZitmC2KknLCAnJWQg2K/ZgtmK2YLYqSddLFxuICBoOiBbJ9ij2YLZhCDZhdmGINiz2KfYudipJywgJ9iz2KfYudipINmI2KfYrdiv2KknLCBbJ9iz2KfYudiq2KfZhicsICfYs9in2LnYqtmK2YYnXSwgJyVkINiz2KfYudin2KonLCAnJWQg2LPYp9i52KknLCAnJWQg2LPYp9i52KknXSxcbiAgZDogWyfYo9mC2YQg2YXZhiDZitmI2YUnLCAn2YrZiNmFINmI2KfYrdivJywgWyfZitmI2YXYp9mGJywgJ9mK2YjZhdmK2YYnXSwgJyVkINij2YrYp9mFJywgJyVkINmK2YjZhdmL2KcnLCAnJWQg2YrZiNmFJ10sXG4gIE06IFsn2KPZgtmEINmF2YYg2LTZh9ixJywgJ9i02YfYsSDZiNin2K3YrycsIFsn2LTZh9ix2KfZhicsICfYtNmH2LHZitmGJ10sICclZCDYo9i02YfYsScsICclZCDYtNmH2LHYpycsICclZCDYtNmH2LEnXSxcbiAgeTogWyfYo9mC2YQg2YXZhiDYudin2YUnLCAn2LnYp9mFINmI2KfYrdivJywgWyfYudin2YXYp9mGJywgJ9i52KfZhdmK2YYnXSwgJyVkINij2LnZiNin2YUnLCAnJWQg2LnYp9mF2YvYpycsICclZCDYudin2YUnXVxufSxcbiAgICBwbHVyYWxpemUgPSBmdW5jdGlvbiBwbHVyYWxpemUodSkge1xuICByZXR1cm4gZnVuY3Rpb24gKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICAgIHZhciBmID0gcGx1cmFsRm9ybShudW1iZXIpLFxuICAgICAgICBzdHIgPSBwbHVyYWxzW3VdW3BsdXJhbEZvcm0obnVtYmVyKV07XG5cbiAgICBpZiAoZiA9PT0gMikge1xuICAgICAgc3RyID0gc3RyW3dpdGhvdXRTdWZmaXggPyAwIDogMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xuICB9O1xufSxcbiAgICBtb250aHMgPSBbJ9is2KfZhtmB2YonLCAn2YHZitmB2LHZiicsICfZhdin2LHYsycsICfYo9mB2LHZitmEJywgJ9mF2KfZiicsICfYrNmI2KfZhicsICfYrNmI2YrZhNmK2KknLCAn2KPZiNiqJywgJ9iz2KjYqtmF2KjYsScsICfYo9mD2KrZiNio2LEnLCAn2YbZiNmB2YXYqNixJywgJ9iv2YrYs9mF2KjYsSddO1xuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhci1keicsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHMsXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogXCJEL1xcdTIwMEZNL1xcdTIwMEZZWVlZXCIsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2LV82YUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuICfZhScgPT09IGlucHV0O1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfYtSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2YUnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9mL2Kcg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3REYXk6ICdb2KPZhdizINi52YbYryDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9i52YbYryDYp9mE2LPYp9i52KldIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9io2LnYryAlcycsXG4gICAgcGFzdDogJ9mF2YbYsCAlcycsXG4gICAgczogcGx1cmFsaXplKCdzJyksXG4gICAgc3M6IHBsdXJhbGl6ZSgncycpLFxuICAgIG06IHBsdXJhbGl6ZSgnbScpLFxuICAgIG1tOiBwbHVyYWxpemUoJ20nKSxcbiAgICBoOiBwbHVyYWxpemUoJ2gnKSxcbiAgICBoaDogcGx1cmFsaXplKCdoJyksXG4gICAgZDogcGx1cmFsaXplKCdkJyksXG4gICAgZGQ6IHBsdXJhbGl6ZSgnZCcpLFxuICAgIE06IHBsdXJhbGl6ZSgnTScpLFxuICAgIE1NOiBwbHVyYWxpemUoJ00nKSxcbiAgICB5OiBwbHVyYWxpemUoJ3knKSxcbiAgICB5eTogcGx1cmFsaXplKCd5JylcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FyLWt3Jywge1xuICBtb250aHM6ICfZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZil/ZitmI2YbZitmIX9mK2YjZhNmK2YjYsl/Yuti02Kpf2LTYqtmG2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmG2KjYsV/Yr9is2YbYqNixJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9mK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mKX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiNiyX9i62LTYql/YtNiq2YbYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YbYqNixX9iv2KzZhtio2LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYqtmG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KfYrdivX9in2KrZhtmK2YZf2KvZhNin2KvYp9ihX9in2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9inINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0RGF5OiAnW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfZgdmKICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiAn2KvZiNin2YYnLFxuICAgIHNzOiAnJWQg2KvYp9mG2YrYqScsXG4gICAgbTogJ9iv2YLZitmC2KknLFxuICAgIG1tOiAnJWQg2K/Zgtin2KbZgicsXG4gICAgaDogJ9iz2KfYudipJyxcbiAgICBoaDogJyVkINiz2KfYudin2KonLFxuICAgIGQ6ICfZitmI2YUnLFxuICAgIGRkOiAnJWQg2KPZitin2YUnLFxuICAgIE06ICfYtNmH2LEnLFxuICAgIE1NOiAnJWQg2KPYtNmH2LEnLFxuICAgIHk6ICfYs9mG2KknLFxuICAgIHl5OiAnJWQg2LPZhtmI2KfYqidcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDEyXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJzEnLFxuICAyOiAnMicsXG4gIDM6ICczJyxcbiAgNDogJzQnLFxuICA1OiAnNScsXG4gIDY6ICc2JyxcbiAgNzogJzcnLFxuICA4OiAnOCcsXG4gIDk6ICc5JyxcbiAgMDogJzAnXG59LFxuICAgIHBsdXJhbEZvcm0gPSBmdW5jdGlvbiBwbHVyYWxGb3JtKG4pIHtcbiAgcmV0dXJuIG4gPT09IDAgPyAwIDogbiA9PT0gMSA/IDEgOiBuID09PSAyID8gMiA6IG4gJSAxMDAgPj0gMyAmJiBuICUgMTAwIDw9IDEwID8gMyA6IG4gJSAxMDAgPj0gMTEgPyA0IDogNTtcbn0sXG4gICAgcGx1cmFscyA9IHtcbiAgczogWyfYo9mC2YQg2YXZhiDYq9in2YbZitipJywgJ9ir2KfZhtmK2Kkg2YjYp9it2K/YqScsIFsn2KvYp9mG2YrYqtin2YYnLCAn2KvYp9mG2YrYqtmK2YYnXSwgJyVkINir2YjYp9mGJywgJyVkINir2KfZhtmK2KknLCAnJWQg2KvYp9mG2YrYqSddLFxuICBtOiBbJ9ij2YLZhCDZhdmGINiv2YLZitmC2KknLCAn2K/ZgtmK2YLYqSDZiNin2K3Yr9ipJywgWyfYr9mC2YrZgtiq2KfZhicsICfYr9mC2YrZgtiq2YrZhiddLCAnJWQg2K/Zgtin2KbZgicsICclZCDYr9mC2YrZgtipJywgJyVkINiv2YLZitmC2KknXSxcbiAgaDogWyfYo9mC2YQg2YXZhiDYs9in2LnYqScsICfYs9in2LnYqSDZiNin2K3Yr9ipJywgWyfYs9in2LnYqtin2YYnLCAn2LPYp9i52KrZitmGJ10sICclZCDYs9in2LnYp9iqJywgJyVkINiz2KfYudipJywgJyVkINiz2KfYudipJ10sXG4gIGQ6IFsn2KPZgtmEINmF2YYg2YrZiNmFJywgJ9mK2YjZhSDZiNin2K3YrycsIFsn2YrZiNmF2KfZhicsICfZitmI2YXZitmGJ10sICclZCDYo9mK2KfZhScsICclZCDZitmI2YXZi9inJywgJyVkINmK2YjZhSddLFxuICBNOiBbJ9ij2YLZhCDZhdmGINi02YfYsScsICfYtNmH2LEg2YjYp9it2K8nLCBbJ9i02YfYsdin2YYnLCAn2LTZh9ix2YrZhiddLCAnJWQg2KPYtNmH2LEnLCAnJWQg2LTZh9ix2KcnLCAnJWQg2LTZh9ixJ10sXG4gIHk6IFsn2KPZgtmEINmF2YYg2LnYp9mFJywgJ9i52KfZhSDZiNin2K3YrycsIFsn2LnYp9mF2KfZhicsICfYudin2YXZitmGJ10sICclZCDYo9i52YjYp9mFJywgJyVkINi52KfZhdmL2KcnLCAnJWQg2LnYp9mFJ11cbn0sXG4gICAgcGx1cmFsaXplID0gZnVuY3Rpb24gcGx1cmFsaXplKHUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgICB2YXIgZiA9IHBsdXJhbEZvcm0obnVtYmVyKSxcbiAgICAgICAgc3RyID0gcGx1cmFsc1t1XVtwbHVyYWxGb3JtKG51bWJlcildO1xuXG4gICAgaWYgKGYgPT09IDIpIHtcbiAgICAgIHN0ciA9IHN0clt3aXRob3V0U3VmZml4ID8gMCA6IDFdO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvJWQvaSwgbnVtYmVyKTtcbiAgfTtcbn0sXG4gICAgbW9udGhzID0gWyfZitmG2KfZitixJywgJ9mB2KjYsdin2YrYsScsICfZhdin2LHYsycsICfYo9io2LHZitmEJywgJ9mF2KfZitmIJywgJ9mK2YjZhtmK2YgnLCAn2YrZiNmE2YrZiCcsICfYo9i62LPYt9izJywgJ9iz2KjYqtmF2KjYsScsICfYo9mD2KrZiNio2LEnLCAn2YbZiNmB2YXYqNixJywgJ9iv2YrYs9mF2KjYsSddO1xuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhci1seScsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHMsXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogXCJEL1xcdTIwMEZNL1xcdTIwMEZZWVlZXCIsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2LV82YUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuICfZhScgPT09IGlucHV0O1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfYtSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2YUnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9mL2Kcg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3REYXk6ICdb2KPZhdizINi52YbYryDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9i52YbYryDYp9mE2LPYp9i52KldIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9io2LnYryAlcycsXG4gICAgcGFzdDogJ9mF2YbYsCAlcycsXG4gICAgczogcGx1cmFsaXplKCdzJyksXG4gICAgc3M6IHBsdXJhbGl6ZSgncycpLFxuICAgIG06IHBsdXJhbGl6ZSgnbScpLFxuICAgIG1tOiBwbHVyYWxpemUoJ20nKSxcbiAgICBoOiBwbHVyYWxpemUoJ2gnKSxcbiAgICBoaDogcGx1cmFsaXplKCdoJyksXG4gICAgZDogcGx1cmFsaXplKCdkJyksXG4gICAgZGQ6IHBsdXJhbGl6ZSgnZCcpLFxuICAgIE06IHBsdXJhbGl6ZSgnTScpLFxuICAgIE1NOiBwbHVyYWxpemUoJ00nKSxcbiAgICB5OiBwbHVyYWxpemUoJ3knKSxcbiAgICB5eTogcGx1cmFsaXplKCd5JylcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgv2IwvZywgJywnKTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDYsXG4gICAgZG95OiAxMlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhci1tYScsIHtcbiAgbW9udGhzOiAn2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2Ypf2YrZiNmG2YrZiF/ZitmI2YTZitmI2LJf2LrYtNiqX9i02KrZhtio2LFf2KPZg9iq2YjYqNixX9mG2YjZhtio2LFf2K/YrNmG2KjYsScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZil/ZitmI2YbZitmIX9mK2YjZhNmK2YjYsl/Yuti02Kpf2LTYqtmG2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmG2KjYsV/Yr9is2YbYqNixJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ9in2YTYo9it2K9f2KfZhNil2KvZhtmK2YZf2KfZhNir2YTYp9ir2KfYoV/Yp9mE2KPYsdio2LnYp9ihX9in2YTYrtmF2YrYs1/Yp9mE2KzZhdi52Klf2KfZhNiz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9in2K3Yr1/Yp9ir2YbZitmGX9ir2YTYp9ir2KfYoV/Yp9ix2KjYudin2KFf2K7ZhdmK2LNf2KzZhdi52Klf2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9itX9mGX9irX9ixX9iuX9isX9izJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYp9mE2YrZiNmFINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBuZXh0RGF5OiAnW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdERheTogJ1vYo9mF2LMg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2YHZiiAlcycsXG4gICAgcGFzdDogJ9mF2YbYsCAlcycsXG4gICAgczogJ9ir2YjYp9mGJyxcbiAgICBzczogJyVkINir2KfZhtmK2KknLFxuICAgIG06ICfYr9mC2YrZgtipJyxcbiAgICBtbTogJyVkINiv2YLYp9im2YInLFxuICAgIGg6ICfYs9in2LnYqScsXG4gICAgaGg6ICclZCDYs9in2LnYp9iqJyxcbiAgICBkOiAn2YrZiNmFJyxcbiAgICBkZDogJyVkINij2YrYp9mFJyxcbiAgICBNOiAn2LTZh9ixJyxcbiAgICBNTTogJyVkINij2LTZh9ixJyxcbiAgICB5OiAn2LPZhtipJyxcbiAgICB5eTogJyVkINiz2YbZiNin2KonXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfZoScsXG4gIDI6ICfZoicsXG4gIDM6ICfZoycsXG4gIDQ6ICfZpCcsXG4gIDU6ICfZpScsXG4gIDY6ICfZpicsXG4gIDc6ICfZpycsXG4gIDg6ICfZqCcsXG4gIDk6ICfZqScsXG4gIDA6ICfZoCdcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn2aEnOiAnMScsXG4gICfZoic6ICcyJyxcbiAgJ9mjJzogJzMnLFxuICAn2aQnOiAnNCcsXG4gICfZpSc6ICc1JyxcbiAgJ9mmJzogJzYnLFxuICAn2acnOiAnNycsXG4gICfZqCc6ICc4JyxcbiAgJ9mpJzogJzknLFxuICAn2aAnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhci1zYScsIHtcbiAgbW9udGhzOiAn2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2YrZiF/ZitmI2YbZitmIX9mK2YjZhNmK2Yhf2KPYutiz2LfYs1/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2YrZiF/ZitmI2YbZitmIX9mK2YjZhNmK2Yhf2KPYutiz2LfYs1/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9i1fNmFLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAn2YUnID09PSBpbnB1dDtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn2LUnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ9mFJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYp9mE2YrZiNmFINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBuZXh0RGF5OiAnW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdERheTogJ1vYo9mF2LMg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2YHZiiAlcycsXG4gICAgcGFzdDogJ9mF2YbYsCAlcycsXG4gICAgczogJ9ir2YjYp9mGJyxcbiAgICBzczogJyVkINir2KfZhtmK2KknLFxuICAgIG06ICfYr9mC2YrZgtipJyxcbiAgICBtbTogJyVkINiv2YLYp9im2YInLFxuICAgIGg6ICfYs9in2LnYqScsXG4gICAgaGg6ICclZCDYs9in2LnYp9iqJyxcbiAgICBkOiAn2YrZiNmFJyxcbiAgICBkZDogJyVkINij2YrYp9mFJyxcbiAgICBNOiAn2LTZh9ixJyxcbiAgICBNTTogJyVkINij2LTZh9ixJyxcbiAgICB5OiAn2LPZhtipJyxcbiAgICB5eTogJyVkINiz2YbZiNin2KonXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vZodmi2aPZpNml2abZp9mo2anZoF0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KS5yZXBsYWNlKC/YjC9nLCAnLCcpO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSkucmVwbGFjZSgvLC9nLCAn2IwnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYXItdG4nLCB7XG4gIG1vbnRoczogJ9is2KfZhtmB2Ypf2YHZitmB2LHZil/Zhdin2LHYs1/Yo9mB2LHZitmEX9mF2KfZil/YrNmI2KfZhl/YrNmI2YrZhNmK2Klf2KPZiNiqX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfYrNin2YbZgdmKX9mB2YrZgdix2Ypf2YXYp9ix2LNf2KPZgdix2YrZhF/Zhdin2Ypf2KzZiNin2YZf2KzZiNmK2YTZitipX9ij2YjYql/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9inINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0RGF5OiAnW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfZgdmKICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiAn2KvZiNin2YYnLFxuICAgIHNzOiAnJWQg2KvYp9mG2YrYqScsXG4gICAgbTogJ9iv2YLZitmC2KknLFxuICAgIG1tOiAnJWQg2K/Zgtin2KbZgicsXG4gICAgaDogJ9iz2KfYudipJyxcbiAgICBoaDogJyVkINiz2KfYudin2KonLFxuICAgIGQ6ICfZitmI2YUnLFxuICAgIGRkOiAnJWQg2KPZitin2YUnLFxuICAgIE06ICfYtNmH2LEnLFxuICAgIE1NOiAnJWQg2KPYtNmH2LEnLFxuICAgIHk6ICfYs9mG2KknLFxuICAgIHl5OiAnJWQg2LPZhtmI2KfYqidcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn2aEnLFxuICAyOiAn2aInLFxuICAzOiAn2aMnLFxuICA0OiAn2aQnLFxuICA1OiAn2aUnLFxuICA2OiAn2aYnLFxuICA3OiAn2acnLFxuICA4OiAn2agnLFxuICA5OiAn2aknLFxuICAwOiAn2aAnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ9mhJzogJzEnLFxuICAn2aInOiAnMicsXG4gICfZoyc6ICczJyxcbiAgJ9mkJzogJzQnLFxuICAn2aUnOiAnNScsXG4gICfZpic6ICc2JyxcbiAgJ9mnJzogJzcnLFxuICAn2agnOiAnOCcsXG4gICfZqSc6ICc5JyxcbiAgJ9mgJzogJzAnXG59LFxuICAgIHBsdXJhbEZvcm0gPSBmdW5jdGlvbiBwbHVyYWxGb3JtKG4pIHtcbiAgcmV0dXJuIG4gPT09IDAgPyAwIDogbiA9PT0gMSA/IDEgOiBuID09PSAyID8gMiA6IG4gJSAxMDAgPj0gMyAmJiBuICUgMTAwIDw9IDEwID8gMyA6IG4gJSAxMDAgPj0gMTEgPyA0IDogNTtcbn0sXG4gICAgcGx1cmFscyA9IHtcbiAgczogWyfYo9mC2YQg2YXZhiDYq9in2YbZitipJywgJ9ir2KfZhtmK2Kkg2YjYp9it2K/YqScsIFsn2KvYp9mG2YrYqtin2YYnLCAn2KvYp9mG2YrYqtmK2YYnXSwgJyVkINir2YjYp9mGJywgJyVkINir2KfZhtmK2KknLCAnJWQg2KvYp9mG2YrYqSddLFxuICBtOiBbJ9ij2YLZhCDZhdmGINiv2YLZitmC2KknLCAn2K/ZgtmK2YLYqSDZiNin2K3Yr9ipJywgWyfYr9mC2YrZgtiq2KfZhicsICfYr9mC2YrZgtiq2YrZhiddLCAnJWQg2K/Zgtin2KbZgicsICclZCDYr9mC2YrZgtipJywgJyVkINiv2YLZitmC2KknXSxcbiAgaDogWyfYo9mC2YQg2YXZhiDYs9in2LnYqScsICfYs9in2LnYqSDZiNin2K3Yr9ipJywgWyfYs9in2LnYqtin2YYnLCAn2LPYp9i52KrZitmGJ10sICclZCDYs9in2LnYp9iqJywgJyVkINiz2KfYudipJywgJyVkINiz2KfYudipJ10sXG4gIGQ6IFsn2KPZgtmEINmF2YYg2YrZiNmFJywgJ9mK2YjZhSDZiNin2K3YrycsIFsn2YrZiNmF2KfZhicsICfZitmI2YXZitmGJ10sICclZCDYo9mK2KfZhScsICclZCDZitmI2YXZi9inJywgJyVkINmK2YjZhSddLFxuICBNOiBbJ9ij2YLZhCDZhdmGINi02YfYsScsICfYtNmH2LEg2YjYp9it2K8nLCBbJ9i02YfYsdin2YYnLCAn2LTZh9ix2YrZhiddLCAnJWQg2KPYtNmH2LEnLCAnJWQg2LTZh9ix2KcnLCAnJWQg2LTZh9ixJ10sXG4gIHk6IFsn2KPZgtmEINmF2YYg2LnYp9mFJywgJ9i52KfZhSDZiNin2K3YrycsIFsn2LnYp9mF2KfZhicsICfYudin2YXZitmGJ10sICclZCDYo9i52YjYp9mFJywgJyVkINi52KfZhdmL2KcnLCAnJWQg2LnYp9mFJ11cbn0sXG4gICAgcGx1cmFsaXplID0gZnVuY3Rpb24gcGx1cmFsaXplKHUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgICB2YXIgZiA9IHBsdXJhbEZvcm0obnVtYmVyKSxcbiAgICAgICAgc3RyID0gcGx1cmFsc1t1XVtwbHVyYWxGb3JtKG51bWJlcildO1xuXG4gICAgaWYgKGYgPT09IDIpIHtcbiAgICAgIHN0ciA9IHN0clt3aXRob3V0U3VmZml4ID8gMCA6IDFdO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvJWQvaSwgbnVtYmVyKTtcbiAgfTtcbn0sXG4gICAgbW9udGhzID0gWyfZitmG2KfZitixJywgJ9mB2KjYsdin2YrYsScsICfZhdin2LHYsycsICfYo9io2LHZitmEJywgJ9mF2KfZitmIJywgJ9mK2YjZhtmK2YgnLCAn2YrZiNmE2YrZiCcsICfYo9i62LPYt9izJywgJ9iz2KjYqtmF2KjYsScsICfYo9mD2KrZiNio2LEnLCAn2YbZiNmB2YXYqNixJywgJ9iv2YrYs9mF2KjYsSddO1xuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhcicsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHMsXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogXCJEL1xcdTIwMEZNL1xcdTIwMEZZWVlZXCIsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2LV82YUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuICfZhScgPT09IGlucHV0O1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfYtSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2YUnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9mL2Kcg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3REYXk6ICdb2KPZhdizINi52YbYryDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9i52YbYryDYp9mE2LPYp9i52KldIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9io2LnYryAlcycsXG4gICAgcGFzdDogJ9mF2YbYsCAlcycsXG4gICAgczogcGx1cmFsaXplKCdzJyksXG4gICAgc3M6IHBsdXJhbGl6ZSgncycpLFxuICAgIG06IHBsdXJhbGl6ZSgnbScpLFxuICAgIG1tOiBwbHVyYWxpemUoJ20nKSxcbiAgICBoOiBwbHVyYWxpemUoJ2gnKSxcbiAgICBoaDogcGx1cmFsaXplKCdoJyksXG4gICAgZDogcGx1cmFsaXplKCdkJyksXG4gICAgZGQ6IHBsdXJhbGl6ZSgnZCcpLFxuICAgIE06IHBsdXJhbGl6ZSgnTScpLFxuICAgIE1NOiBwbHVyYWxpemUoJ00nKSxcbiAgICB5OiBwbHVyYWxpemUoJ3knKSxcbiAgICB5eTogcGx1cmFsaXplKCd5JylcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KS5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiA2LFxuICAgIGRveTogMTJcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN1ZmZpeGVzID0ge1xuICAxOiAnLWluY2knLFxuICA1OiAnLWluY2knLFxuICA4OiAnLWluY2knLFxuICA3MDogJy1pbmNpJyxcbiAgODA6ICctaW5jaScsXG4gIDI6ICctbmNpJyxcbiAgNzogJy1uY2knLFxuICAyMDogJy1uY2knLFxuICA1MDogJy1uY2knLFxuICAzOiAnLcO8bmPDvCcsXG4gIDQ6ICctw7xuY8O8JyxcbiAgMTAwOiAnLcO8bmPDvCcsXG4gIDY6ICctbmPEsScsXG4gIDk6ICctdW5jdScsXG4gIDEwOiAnLXVuY3UnLFxuICAzMDogJy11bmN1JyxcbiAgNjA6ICctxLFuY8SxJyxcbiAgOTA6ICctxLFuY8SxJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2F6Jywge1xuICBtb250aHM6ICd5YW52YXJfZmV2cmFsX21hcnRfYXByZWxfbWF5X2l5dW5faXl1bF9hdnF1c3Rfc2VudHlhYnJfb2t0eWFicl9ub3lhYnJfZGVrYWJyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ3lhbl9mZXZfbWFyX2Fwcl9tYXlfaXluX2l5bF9hdnFfc2VuX29rdF9ub3lfZGVrJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0JhemFyX0JhemFyIGVydMmZc2lfw4fJmXLFn8mZbmLJmSBheMWfYW3EsV/Dh8mZcsWfyZluYsmZX0PDvG3JmSBheMWfYW3EsV9Dw7xtyZlfxZ7JmW5iyZknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdCYXpfQnpFX8OHQXhfw4fJmXJfQ0F4X0PDvG1fxZ7JmW4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnQnpfQkVfw4dBX8OHyZlfQ0FfQ8O8X8WeyZknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tidWfDvG4gc2FhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbc2FiYWggc2FhdF0gTFQnLFxuICAgIG5leHRXZWVrOiAnW2fJmWzJmW4gaMmZZnTJmV0gZGRkZCBbc2FhdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbZMO8bsmZbl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW2tlw6fJmW4gaMmZZnTJmV0gZGRkZCBbc2FhdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgc29ucmEnLFxuICAgIHBhc3Q6ICclcyDJmXZ2yZlsJyxcbiAgICBzOiAnYmlyIG5lw6fJmSBzYW5pecmZJyxcbiAgICBzczogJyVkIHNhbml5yZknLFxuICAgIG06ICdiaXIgZMmZcWlxyZknLFxuICAgIG1tOiAnJWQgZMmZcWlxyZknLFxuICAgIGg6ICdiaXIgc2FhdCcsXG4gICAgaGg6ICclZCBzYWF0JyxcbiAgICBkOiAnYmlyIGfDvG4nLFxuICAgIGRkOiAnJWQgZ8O8bicsXG4gICAgTTogJ2JpciBheScsXG4gICAgTU06ICclZCBheScsXG4gICAgeTogJ2JpciBpbCcsXG4gICAgeXk6ICclZCBpbCdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL2dlY8mZfHPJmWjJmXJ8Z8O8bmTDvHp8YXjFn2FtLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXihnw7xuZMO8enxheMWfYW0pJC8udGVzdChpbnB1dCk7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAnZ2VjyZknO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ3PJmWjJmXInO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ2fDvG5kw7x6JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdheMWfYW0nO1xuICAgIH1cbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LSjEsW5jxLF8aW5jaXxuY2l8w7xuY8O8fG5jxLF8dW5jdSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIGlmIChudW1iZXIgPT09IDApIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLcSxbmPEsSc7XG4gICAgfVxuXG4gICAgdmFyIGEgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgYiA9IG51bWJlciAlIDEwMCAtIGEsXG4gICAgICAgIGMgPSBudW1iZXIgPj0gMTAwID8gMTAwIDogbnVsbDtcbiAgICByZXR1cm4gbnVtYmVyICsgKHN1ZmZpeGVzW2FdIHx8IHN1ZmZpeGVzW2JdIHx8IHN1ZmZpeGVzW2NdKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwbHVyYWwod29yZCwgbnVtKSB7XG4gIHZhciBmb3JtcyA9IHdvcmQuc3BsaXQoJ18nKTtcbiAgcmV0dXJuIG51bSAlIDEwID09PSAxICYmIG51bSAlIDEwMCAhPT0gMTEgPyBmb3Jtc1swXSA6IG51bSAlIDEwID49IDIgJiYgbnVtICUgMTAgPD0gNCAmJiAobnVtICUgMTAwIDwgMTAgfHwgbnVtICUgMTAwID49IDIwKSA/IGZvcm1zWzFdIDogZm9ybXNbMl07XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBzczogd2l0aG91dFN1ZmZpeCA/ICfRgdC10LrRg9C90LTQsF/RgdC10LrRg9C90LTRi1/RgdC10LrRg9C90LQnIDogJ9GB0LXQutGD0L3QtNGDX9GB0LXQutGD0L3QtNGLX9GB0LXQutGD0L3QtCcsXG4gICAgbW06IHdpdGhvdXRTdWZmaXggPyAn0YXQstGW0LvRltC90LBf0YXQstGW0LvRltC90Ytf0YXQstGW0LvRltC9JyA6ICfRhdCy0ZbQu9GW0L3Rg1/RhdCy0ZbQu9GW0L3Ri1/RhdCy0ZbQu9GW0L0nLFxuICAgIGhoOiB3aXRob3V0U3VmZml4ID8gJ9Cz0LDQtNC30ZbQvdCwX9Cz0LDQtNC30ZbQvdGLX9Cz0LDQtNC30ZbQvScgOiAn0LPQsNC00LfRltC90YNf0LPQsNC00LfRltC90Ytf0LPQsNC00LfRltC9JyxcbiAgICBkZDogJ9C00LfQtdC90Yxf0LTQvdGWX9C00LfRkdC9JyxcbiAgICBNTTogJ9C80LXRgdGP0YZf0LzQtdGB0Y/RhtGLX9C80LXRgdGP0YbQsNGeJyxcbiAgICB5eTogJ9Cz0L7QtF/Qs9Cw0LTRi1/Qs9Cw0LTQvtGeJ1xuICB9O1xuXG4gIGlmIChrZXkgPT09ICdtJykge1xuICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ9GF0LLRltC70ZbQvdCwJyA6ICfRhdCy0ZbQu9GW0L3Rgyc7XG4gIH0gZWxzZSBpZiAoa2V5ID09PSAnaCcpIHtcbiAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICfQs9Cw0LTQt9GW0L3QsCcgOiAn0LPQsNC00LfRltC90YMnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudW1iZXIgKyAnICcgKyBwbHVyYWwoZm9ybWF0W2tleV0sICtudW1iZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JlJywge1xuICBtb250aHM6IHtcbiAgICBmb3JtYXQ6ICfRgdGC0YPQtNC30LXQvdGPX9C70Y7RgtCw0LPQsF/RgdCw0LrQsNCy0ZbQutCwX9C60YDQsNGB0LDQstGW0LrQsF/RgtGA0LDRntC90Y9f0YfRjdGA0LLQtdC90Y9f0LvRltC/0LXQvdGPX9C20L3RltGe0L3Rj1/QstC10YDQsNGB0L3Rj1/QutCw0YHRgtGA0YvRh9C90ZbQutCwX9C70ZbRgdGC0LDQv9Cw0LTQsF/RgdC90LXQttC90Y8nLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ9GB0YLRg9C00LfQtdC90Yxf0LvRjtGC0Ytf0YHQsNC60LDQstGW0Lpf0LrRgNCw0YHQsNCy0ZbQul/RgtGA0LDQstC10L3RjF/Rh9GN0YDQstC10L3RjF/Qu9GW0L/QtdC90Yxf0LbQvdGW0LLQtdC90Yxf0LLQtdGA0LDRgdC10L3RjF/QutCw0YHRgtGA0YvRh9C90ZbQul/Qu9GW0YHRgtCw0L/QsNC0X9GB0L3QtdC20LDQvdGMJy5zcGxpdCgnXycpXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAn0YHRgtGD0LRf0LvRjtGCX9GB0LDQul/QutGA0LDRgV/RgtGA0LDQsl/Rh9GN0YDQsl/Qu9GW0L9f0LbQvdGW0LJf0LLQtdGAX9C60LDRgdGCX9C70ZbRgdGCX9GB0L3QtdC2Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czoge1xuICAgIGZvcm1hdDogJ9C90Y/QtNC30LXQu9GOX9C/0LDQvdGP0LTQt9C10LvQsNC6X9Cw0Z7RgtC+0YDQsNC6X9GB0LXRgNCw0LTRg1/Rh9Cw0YbQstC10YBf0L/Rj9GC0L3RltGG0YNf0YHRg9Cx0L7RgtGDJy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICfQvdGP0LTQt9C10LvRj1/Qv9Cw0L3Rj9C00LfQtdC70LDQul/QsNGe0YLQvtGA0LDQul/RgdC10YDQsNC00LBf0YfQsNGG0LLQtdGAX9C/0Y/RgtC90ZbRhtCwX9GB0YPQsdC+0YLQsCcuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL1xcWyA/W9Cj0YPRnl0gPyg/OtC80ZbQvdGD0LvRg9GOfNC90LDRgdGC0YPQv9C90YPRjik/ID9cXF0gP2RkZGQvXG4gIH0sXG4gIHdlZWtkYXlzU2hvcnQ6ICfQvdC0X9C/0L1f0LDRgl/RgdGAX9GH0YZf0L/Rgl/RgdCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9C90LRf0L/QvV/QsNGCX9GB0YBf0YfRhl/Qv9GCX9GB0LEnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZINCzLicsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkg0LMuLCBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZINCzLiwgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQodGR0L3QvdGPINGeXSBMVCcsXG4gICAgbmV4dERheTogJ1vQl9Cw0Z7RgtGA0LAg0Z5dIExUJyxcbiAgICBsYXN0RGF5OiAnW9Cj0YfQvtGA0LAg0Z5dIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ1vQo10gZGRkZCBb0Z5dIExUJztcbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdb0KMg0LzRltC90YPQu9GD0Y5dIGRkZGQgW9GeXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gJ1vQoyDQvNGW0L3Rg9C70YtdIGRkZGQgW9GeXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9C/0YDQsNC3ICVzJyxcbiAgICBwYXN0OiAnJXMg0YLQsNC80YMnLFxuICAgIHM6ICfQvdC10LrQsNC70YzQutGWINGB0LXQutGD0L3QtCcsXG4gICAgbTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBtbTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBoOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIGhoOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIGQ6ICfQtNC30LXQvdGMJyxcbiAgICBkZDogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBNOiAn0LzQtdGB0Y/RhicsXG4gICAgTU06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgeTogJ9Cz0L7QtCcsXG4gICAgeXk6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWxcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9C90L7Rh9GLfNGA0LDQvdGW0YbRi3zQtNC90Y980LLQtdGH0LDRgNCwLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXijQtNC90Y980LLQtdGH0LDRgNCwKSQvLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ9C90L7Rh9GLJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfRgNCw0L3RltGG0YsnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ9C00L3Rjyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0LLQtdGH0LDRgNCwJztcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS0o0ZZ80Yt80LPQsCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIChudW1iZXIgJSAxMCA9PT0gMiB8fCBudW1iZXIgJSAxMCA9PT0gMykgJiYgbnVtYmVyICUgMTAwICE9PSAxMiAmJiBudW1iZXIgJSAxMDAgIT09IDEzID8gbnVtYmVyICsgJy3RlicgOiBudW1iZXIgKyAnLdGLJztcblxuICAgICAgY2FzZSAnRCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnLdCz0LAnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYmcnLCB7XG4gIG1vbnRoczogJ9GP0L3Rg9Cw0YDQuF/RhNC10LLRgNGD0LDRgNC4X9C80LDRgNGCX9Cw0L/RgNC40Ltf0LzQsNC5X9GO0L3QuF/RjtC70Lhf0LDQstCz0YPRgdGCX9GB0LXQv9GC0LXQvNCy0YDQuF/QvtC60YLQvtC80LLRgNC4X9C90L7QtdC80LLRgNC4X9C00LXQutC10LzQstGA0LgnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn0Y/QvdGDX9GE0LXQsl/QvNCw0YBf0LDQv9GAX9C80LDQuV/RjtC90Lhf0Y7Qu9C4X9Cw0LLQs1/RgdC10L9f0L7QutGCX9C90L7QtV/QtNC10LonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn0L3QtdC00LXQu9GPX9C/0L7QvdC10LTQtdC70L3QuNC6X9Cy0YLQvtGA0L3QuNC6X9GB0YDRj9C00LBf0YfQtdGC0LLRitGA0YLRitC6X9C/0LXRgtGK0Lpf0YHRitCx0L7RgtCwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn0L3QtdC0X9C/0L7QvV/QstGC0L5f0YHRgNGPX9GH0LXRgl/Qv9C10YJf0YHRitCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9C90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnRC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9CU0L3QtdGBINCyXSBMVCcsXG4gICAgbmV4dERheTogJ1vQo9GC0YDQtSDQsl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb0LJdIExUJyxcbiAgICBsYXN0RGF5OiAnW9CS0YfQtdGA0LAg0LJdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1vQnNC40L3QsNC70LDRgtCwXSBkZGRkIFvQsl0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1vQnNC40L3QsNC70LjRj10gZGRkZCBb0LJdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0YHQu9C10LQgJXMnLFxuICAgIHBhc3Q6ICfQv9GA0LXQtNC4ICVzJyxcbiAgICBzOiAn0L3Rj9C60L7Qu9C60L4g0YHQtdC60YPQvdC00LgnLFxuICAgIHNzOiAnJWQg0YHQtdC60YPQvdC00LgnLFxuICAgIG06ICfQvNC40L3Rg9GC0LAnLFxuICAgIG1tOiAnJWQg0LzQuNC90YPRgtC4JyxcbiAgICBoOiAn0YfQsNGBJyxcbiAgICBoaDogJyVkINGH0LDRgdCwJyxcbiAgICBkOiAn0LTQtdC9JyxcbiAgICBkZDogJyVkINC00LXQvdCwJyxcbiAgICB3OiAn0YHQtdC00LzQuNGG0LAnLFxuICAgIHd3OiAnJWQg0YHQtdC00LzQuNGG0LgnLFxuICAgIE06ICfQvNC10YHQtdGGJyxcbiAgICBNTTogJyVkINC80LXRgdC10YbQsCcsXG4gICAgeTogJ9Cz0L7QtNC40L3QsCcsXG4gICAgeXk6ICclZCDQs9C+0LTQuNC90LgnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS0o0LXQsnzQtdC9fNGC0Lh80LLQuHzRgNC4fNC80LgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgbGFzdERpZ2l0ID0gbnVtYmVyICUgMTAsXG4gICAgICAgIGxhc3QyRGlnaXRzID0gbnVtYmVyICUgMTAwO1xuXG4gICAgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0LXQsic7XG4gICAgfSBlbHNlIGlmIChsYXN0MkRpZ2l0cyA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0LXQvSc7XG4gICAgfSBlbHNlIGlmIChsYXN0MkRpZ2l0cyA+IDEwICYmIGxhc3QyRGlnaXRzIDwgMjApIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdGC0LgnO1xuICAgIH0gZWxzZSBpZiAobGFzdERpZ2l0ID09PSAxKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3QstC4JztcbiAgICB9IGVsc2UgaWYgKGxhc3REaWdpdCA9PT0gMikge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0YDQuCc7XG4gICAgfSBlbHNlIGlmIChsYXN0RGlnaXQgPT09IDcgfHwgbGFzdERpZ2l0ID09PSA4KSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3QvNC4JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0YLQuCc7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdibScsIHtcbiAgbW9udGhzOiAnWmFud3V5ZWthbG9fRmV3dXJ1eWVrYWxvX01hcmlzaWthbG9fQXdpcmlsaWthbG9fTcmba2Fsb19adXfJm25rYWxvX1p1bHV5ZWthbG9fVXRpa2Fsb19TyZt0YW5idXJ1a2Fsb1/JlGt1dMmUYnVydWthbG9fTm93YW5idXJ1a2Fsb19EZXNhbmJ1cnVrYWxvJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ1phbl9GZXdfTWFyX0F3aV9NyZtfWnV3X1p1bF9VdGlfU8mbdF/JlGt1X05vd19EZXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnS2FyaV9OdMmbbsmbbl9UYXJhdGFfQXJhYmFfQWxhbWlzYV9KdW1hX1NpYmlyaScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0thcl9OdMmbX1Rhcl9BcmFfQWxhX0p1bV9TaWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnS2FfTnRfVGFfQXJfQWxfSnVfU2knLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ01NTU0gW3RpbGVdIEQgW3Nhbl0gWVlZWScsXG4gICAgTExMOiAnTU1NTSBbdGlsZV0gRCBbc2FuXSBZWVlZIFtsyZtyyZtdIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBNTU1NIFt0aWxlXSBEIFtzYW5dIFlZWVkgW2zJm3LJm10gSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tCaSBsyZtyyZtdIExUJyxcbiAgICBuZXh0RGF5OiAnW1NpbmkgbMmbcsmbXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtkb24gbMmbcsmbXSBMVCcsXG4gICAgbGFzdERheTogJ1tLdW51IGzJm3LJm10gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbdMmbbcmbbmVuIGzJm3LJm10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMga8mUbsmUJyxcbiAgICBwYXN0OiAnYSBiyZsgJXMgYsmUJyxcbiAgICBzOiAnc2FuZ2EgZGFtYSBkYW1hJyxcbiAgICBzczogJ3Nla29uZGkgJWQnLFxuICAgIG06ICdtaW5pdGkga2VsZW4nLFxuICAgIG1tOiAnbWluaXRpICVkJyxcbiAgICBoOiAnbMmbcsmbIGtlbGVuJyxcbiAgICBoaDogJ2zJm3LJmyAlZCcsXG4gICAgZDogJ3RpbGUga2VsZW4nLFxuICAgIGRkOiAndGlsZSAlZCcsXG4gICAgTTogJ2thbG8ga2VsZW4nLFxuICAgIE1NOiAna2FsbyAlZCcsXG4gICAgeTogJ3NhbiBrZWxlbicsXG4gICAgeXk6ICdzYW4gJWQnXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfgp6cnLFxuICAyOiAn4KeoJyxcbiAgMzogJ+CnqScsXG4gIDQ6ICfgp6onLFxuICA1OiAn4KerJyxcbiAgNjogJ+CnrCcsXG4gIDc6ICfgp60nLFxuICA4OiAn4KeuJyxcbiAgOTogJ+CnrycsXG4gIDA6ICfgp6YnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+Cnpyc6ICcxJyxcbiAgJ+CnqCc6ICcyJyxcbiAgJ+CnqSc6ICczJyxcbiAgJ+Cnqic6ICc0JyxcbiAgJ+Cnqyc6ICc1JyxcbiAgJ+CnrCc6ICc2JyxcbiAgJ+CnrSc6ICc3JyxcbiAgJ+Cnric6ICc4JyxcbiAgJ+Cnryc6ICc5JyxcbiAgJ+Cnpic6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JuLWJkJywge1xuICBtb250aHM6ICfgppzgpr7gpqjgp4Hgp5/gpr7gprDgpr9f4Kar4KeH4Kas4KeN4Kaw4KeB4Kef4Ka+4Kaw4Ka/X+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprDgpr/gprJf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprLgpr7gpodf4KaG4KaX4Ka44KeN4KafX+CmuOCnh+CmquCnjeCmn+Cnh+CmruCnjeCmrOCmsF/gpoXgppXgp43gpp/gp4vgpqzgprBf4Kao4Kat4KeH4Kau4KeN4Kas4KawX+CmoeCmv+CmuOCnh+CmruCnjeCmrOCmsCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgppzgpr7gpqjgp4Ff4Kar4KeH4Kas4KeN4Kaw4KeBX+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprDgpr/gprJf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprLgpr7gpodf4KaG4KaX4Ka44KeN4KafX+CmuOCnh+CmquCnjeCmn1/gpoXgppXgp43gpp/gp4tf4Kao4Kat4KeHX+CmoeCmv+CmuOCnhycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfgprDgpqzgpr/gpqzgpr7gprBf4Ka44KeL4Kau4Kas4Ka+4KawX+CmruCmmeCnjeCml+CmsuCmrOCmvuCmsF/gpqzgp4Hgpqfgpqzgpr7gprBf4Kas4KeD4Ka54Ka44KeN4Kaq4Kak4Ka/4Kas4Ka+4KawX+CmtuCngeCmleCnjeCmsOCmrOCmvuCmsF/gprbgpqjgpr/gpqzgpr7gprAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgprDgpqzgpr9f4Ka44KeL4KauX+CmruCmmeCnjeCml+Cmsl/gpqzgp4Hgpqdf4Kas4KeD4Ka54Ka44KeN4Kaq4Kak4Ka/X+CmtuCngeCmleCnjeCmsF/gprbgpqjgpr8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4Kaw4Kas4Ka/X+CmuOCni+Cmrl/gpq7gppngp43gppfgprJf4Kas4KeB4KanX+CmrOCng+CmuV/gprbgp4HgppXgp43gprBf4Ka24Kao4Ka/Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tIOCmuOCmruCnnycsXG4gICAgTFRTOiAnQSBoOm1tOnNzIOCmuOCmruCnnycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBBIGg6bW0g4Ka44Kau4KefJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSDgprjgpq7gp58nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgpobgppxdIExUJyxcbiAgICBuZXh0RGF5OiAnW+CmhuCml+CmvuCmruCngOCmleCmvuCmsl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCwgTFQnLFxuICAgIGxhc3REYXk6ICdb4KaX4Kak4KaV4Ka+4KayXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4KaX4KakXSBkZGRkLCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDgpqrgprDgp4cnLFxuICAgIHBhc3Q6ICclcyDgpobgppfgp4cnLFxuICAgIHM6ICfgppXgp5/gp4fgppUg4Ka44KeH4KaV4KeH4Kao4KeN4KahJyxcbiAgICBzczogJyVkIOCmuOCnh+CmleCnh+CmqOCnjeCmoScsXG4gICAgbTogJ+Cmj+CmlSDgpq7gpr/gpqjgpr/gpp8nLFxuICAgIG1tOiAnJWQg4Kau4Ka/4Kao4Ka/4KafJyxcbiAgICBoOiAn4KaP4KaVIOCmmOCmqOCnjeCmn+CmvicsXG4gICAgaGg6ICclZCDgppjgpqjgp43gpp/gpr4nLFxuICAgIGQ6ICfgpo/gppUg4Kam4Ka/4KaoJyxcbiAgICBkZDogJyVkIOCmpuCmv+CmqCcsXG4gICAgTTogJ+Cmj+CmlSDgpq7gpr7gprgnLFxuICAgIE1NOiAnJWQg4Kau4Ka+4Ka4JyxcbiAgICB5OiAn4KaP4KaVIOCmrOCmm+CmsCcsXG4gICAgeXk6ICclZCDgpqzgppvgprAnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgp6fgp6jgp6ngp6rgp6vgp6zgp63gp67gp6/gp6ZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CmsOCmvuCmpHzgpq3gp4vgprB84Ka44KaV4Ka+4KayfOCmpuCngeCmquCngeCmsHzgpqzgpr/gppXgpr7gprJ84Ka44Kao4KeN4Kan4KeN4Kav4Ka+fOCmsOCmvuCmpC8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgprDgpr7gpqQnKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpq3gp4vgprAnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4Ka44KaV4Ka+4KayJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CmpuCngeCmquCngeCmsCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDMgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpqzgpr/gppXgpr7gprInKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgprjgpqjgp43gpqfgp43gpq/gpr4nKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfgprDgpr7gpqQnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDYpIHtcbiAgICAgIHJldHVybiAn4Kat4KeL4KawJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfgprjgppXgpr7gprInO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE1KSB7XG4gICAgICByZXR1cm4gJ+CmpuCngeCmquCngeCmsCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTgpIHtcbiAgICAgIHJldHVybiAn4Kas4Ka/4KaV4Ka+4KayJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgprjgpqjgp43gpqfgp43gpq/gpr4nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+CmsOCmvuCmpCc7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4KenJyxcbiAgMjogJ+CnqCcsXG4gIDM6ICfgp6knLFxuICA0OiAn4KeqJyxcbiAgNTogJ+CnqycsXG4gIDY6ICfgp6wnLFxuICA3OiAn4KetJyxcbiAgODogJ+CnricsXG4gIDk6ICfgp68nLFxuICAwOiAn4KemJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgp6cnOiAnMScsXG4gICfgp6gnOiAnMicsXG4gICfgp6knOiAnMycsXG4gICfgp6onOiAnNCcsXG4gICfgp6snOiAnNScsXG4gICfgp6wnOiAnNicsXG4gICfgp60nOiAnNycsXG4gICfgp64nOiAnOCcsXG4gICfgp68nOiAnOScsXG4gICfgp6YnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdibicsIHtcbiAgbW9udGhzOiAn4Kac4Ka+4Kao4KeB4Kef4Ka+4Kaw4Ka/X+Cmq+Cnh+CmrOCnjeCmsOCngeCnn+CmvuCmsOCmv1/gpq7gpr7gprDgp43gpppf4KaP4Kaq4KeN4Kaw4Ka/4KayX+CmruCnh1/gppzgp4Hgpqhf4Kac4KeB4Kay4Ka+4KaHX+CmhuCml+CmuOCnjeCmn1/gprjgp4fgpqrgp43gpp/gp4fgpq7gp43gpqzgprBf4KaF4KaV4KeN4Kaf4KeL4Kas4KawX+CmqOCmreCnh+CmruCnjeCmrOCmsF/gpqHgpr/gprjgp4fgpq7gp43gpqzgprAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4Kac4Ka+4Kao4KeBX+Cmq+Cnh+CmrOCnjeCmsOCngV/gpq7gpr7gprDgp43gpppf4KaP4Kaq4KeN4Kaw4Ka/4KayX+CmruCnh1/gppzgp4Hgpqhf4Kac4KeB4Kay4Ka+4KaHX+CmhuCml+CmuOCnjeCmn1/gprjgp4fgpqrgp43gpp9f4KaF4KaV4KeN4Kaf4KeLX+CmqOCmreCnh1/gpqHgpr/gprjgp4cnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4Kaw4Kas4Ka/4Kas4Ka+4KawX+CmuOCni+CmruCmrOCmvuCmsF/gpq7gppngp43gppfgprLgpqzgpr7gprBf4Kas4KeB4Kan4Kas4Ka+4KawX+CmrOCng+CmueCmuOCnjeCmquCmpOCmv+CmrOCmvuCmsF/gprbgp4HgppXgp43gprDgpqzgpr7gprBf4Ka24Kao4Ka/4Kas4Ka+4KawJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4Kaw4Kas4Ka/X+CmuOCni+Cmrl/gpq7gppngp43gppfgprJf4Kas4KeB4KanX+CmrOCng+CmueCmuOCnjeCmquCmpOCmv1/gprbgp4HgppXgp43gprBf4Ka24Kao4Ka/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CmsOCmrOCmv1/gprjgp4vgpq5f4Kau4KaZ4KeN4KaX4KayX+CmrOCngeCmp1/gpqzgp4Pgprlf4Ka24KeB4KaV4KeN4KawX+CmtuCmqOCmvycuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSDgprjgpq7gp58nLFxuICAgIExUUzogJ0EgaDptbTpzcyDgprjgpq7gp58nLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tIOCmuOCmruCnnycsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4Ka44Kau4KefJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4KaG4KacXSBMVCcsXG4gICAgbmV4dERheTogJ1vgpobgppfgpr7gpq7gp4DgppXgpr7gprJdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQsIExUJyxcbiAgICBsYXN0RGF5OiAnW+Cml+CmpOCmleCmvuCmsl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+Cml+CmpF0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4Kaq4Kaw4KeHJyxcbiAgICBwYXN0OiAnJXMg4KaG4KaX4KeHJyxcbiAgICBzOiAn4KaV4Kef4KeH4KaVIOCmuOCnh+CmleCnh+CmqOCnjeCmoScsXG4gICAgc3M6ICclZCDgprjgp4fgppXgp4fgpqjgp43gpqEnLFxuICAgIG06ICfgpo/gppUg4Kau4Ka/4Kao4Ka/4KafJyxcbiAgICBtbTogJyVkIOCmruCmv+CmqOCmv+CmnycsXG4gICAgaDogJ+Cmj+CmlSDgppjgpqjgp43gpp/gpr4nLFxuICAgIGhoOiAnJWQg4KaY4Kao4KeN4Kaf4Ka+JyxcbiAgICBkOiAn4KaP4KaVIOCmpuCmv+CmqCcsXG4gICAgZGQ6ICclZCDgpqbgpr/gpqgnLFxuICAgIE06ICfgpo/gppUg4Kau4Ka+4Ka4JyxcbiAgICBNTTogJyVkIOCmruCmvuCmuCcsXG4gICAgeTogJ+Cmj+CmlSDgpqzgppvgprAnLFxuICAgIHl5OiAnJWQg4Kas4Kab4KawJ1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Ken4Keo4Kep4Keq4Ker4Kes4Ket4Keu4Kev4KemXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gprDgpr7gpqR84Ka44KaV4Ka+4KayfOCmpuCngeCmquCngeCmsHzgpqzgpr/gppXgpr7gprJ84Kaw4Ka+4KakLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CmsOCmvuCmpCcgJiYgaG91ciA+PSA0IHx8IG1lcmlkaWVtID09PSAn4Kam4KeB4Kaq4KeB4KawJyAmJiBob3VyIDwgNSB8fCBtZXJpZGllbSA9PT0gJ+CmrOCmv+CmleCmvuCmsicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfgprDgpr7gpqQnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEwKSB7XG4gICAgICByZXR1cm4gJ+CmuOCmleCmvuCmsic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn4Kam4KeB4Kaq4KeB4KawJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgpqzgpr/gppXgpr7gprInO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+CmsOCmvuCmpCc7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4LyhJyxcbiAgMjogJ+C8oicsXG4gIDM6ICfgvKMnLFxuICA0OiAn4LykJyxcbiAgNTogJ+C8pScsXG4gIDY6ICfgvKYnLFxuICA3OiAn4LynJyxcbiAgODogJ+C8qCcsXG4gIDk6ICfgvKknLFxuICAwOiAn4LygJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgvKEnOiAnMScsXG4gICfgvKInOiAnMicsXG4gICfgvKMnOiAnMycsXG4gICfgvKQnOiAnNCcsXG4gICfgvKUnOiAnNScsXG4gICfgvKYnOiAnNicsXG4gICfgvKcnOiAnNycsXG4gICfgvKgnOiAnOCcsXG4gICfgvKknOiAnOScsXG4gICfgvKAnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdibycsIHtcbiAgbW9udGhzOiAn4L2f4L6z4LyL4L2W4LyL4L2R4L2E4LyL4L2U4L28X+C9n+C+s+C8i+C9luC8i+C9guC9ieC9suC9puC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvYLgvabgvbTgvZjgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2e4L2y4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9o+C+lOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZHgvrLgvbTgvYLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2R4L204L2T4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9ouC+kuC+seC9keC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZHgvYLgvbTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9guC9heC9suC9guC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvYLgvYngvbLgvabgvIvgvZQnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4L2f4L6z4LyLMV/gvZ/gvrPgvIsyX+C9n+C+s+C8izNf4L2f4L6z4LyLNF/gvZ/gvrPgvIs1X+C9n+C+s+C8izZf4L2f4L6z4LyLN1/gvZ/gvrPgvIs4X+C9n+C+s+C8izlf4L2f4L6z4LyLMTBf4L2f4L6z4LyLMTFf4L2f4L6z4LyLMTInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0UmVnZXg6IC9eKOC9n+C+s+C8i1xcZHsxLDJ9KS8sXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4L2C4L2f4L2g4LyL4L2J4L2y4LyL4L2Y4LyLX+C9guC9n+C9oOC8i+C9n+C+s+C8i+C9luC8i1/gvYLgvZ/gvaDgvIvgvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2C4L2f4L2g4LyL4L2j4L634L2C4LyL4L2U4LyLX+C9guC9n+C9oOC8i+C9leC9tOC9ouC8i+C9luC9tF/gvYLgvZ/gvaDgvIvgvZTgvIvgvabgvYTgvabgvItf4L2C4L2f4L2g4LyL4L2m4L6k4L264L2T4LyL4L2U4LyLJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4L2J4L2y4LyL4L2Y4LyLX+C9n+C+s+C8i+C9luC8i1/gvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2j4L634L2C4LyL4L2U4LyLX+C9leC9tOC9ouC8i+C9luC9tF/gvZTgvIvgvabgvYTgvabgvItf4L2m4L6k4L264L2T4LyL4L2U4LyLJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+C9ieC9sl/gvZ/gvrNf4L2Y4L2y4L2CX+C9o+C+t+C9gl/gvZXgvbTgvaJf4L2m4L2E4L2mX+C9puC+pOC9uuC9kycuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbScsXG4gICAgTFRTOiAnQSBoOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgvZHgvbLgvIvgvaLgvbLgvYRdIExUJyxcbiAgICBuZXh0RGF5OiAnW+C9puC9hOC8i+C9ieC9suC9k10gTFQnLFxuICAgIG5leHRXZWVrOiAnW+C9luC9keC9tOC9k+C8i+C9leC+suC9guC8i+C9ouC+l+C9uuC9puC8i+C9mF0sIExUJyxcbiAgICBsYXN0RGF5OiAnW+C9geC8i+C9puC9hF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+C9luC9keC9tOC9k+C8i+C9leC+suC9guC8i+C9mOC9kOC9oOC8i+C9mF0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4L2j4LyLJyxcbiAgICBwYXN0OiAnJXMg4L2m4L6U4L2T4LyL4L2jJyxcbiAgICBzOiAn4L2j4L2Y4LyL4L2m4L2EJyxcbiAgICBzczogJyVkIOC9puC+kOC9ouC8i+C9huC8jScsXG4gICAgbTogJ+C9puC+kOC9ouC8i+C9mOC8i+C9guC9heC9suC9gicsXG4gICAgbW06ICclZCDgvabgvpDgvaLgvIvgvZgnLFxuICAgIGg6ICfgvYbgvbTgvIvgvZrgvbzgvZHgvIvgvYLgvYXgvbLgvYInLFxuICAgIGhoOiAnJWQg4L2G4L204LyL4L2a4L284L2RJyxcbiAgICBkOiAn4L2J4L2y4L2T4LyL4L2C4L2F4L2y4L2CJyxcbiAgICBkZDogJyVkIOC9ieC9suC9k+C8iycsXG4gICAgTTogJ+C9n+C+s+C8i+C9luC8i+C9guC9heC9suC9gicsXG4gICAgTU06ICclZCDgvZ/gvrPgvIvgvZYnLFxuICAgIHk6ICfgvaPgvbzgvIvgvYLgvYXgvbLgvYInLFxuICAgIHl5OiAnJWQg4L2j4L28J1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Lyh4Lyi4Lyj4Lyk4Lyl4Lym4Lyn4Lyo4Lyp4LygXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gvZjgvZrgvZPgvIvgvZjgvbx84L2e4L284L2C4L2m4LyL4L2A4L2mfOC9ieC9suC9k+C8i+C9guC9tOC9hHzgvZHgvYLgvbzgvYTgvIvgvZHgvYJ84L2Y4L2a4L2T4LyL4L2Y4L28LyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+C9mOC9muC9k+C8i+C9mOC9vCcgJiYgaG91ciA+PSA0IHx8IG1lcmlkaWVtID09PSAn4L2J4L2y4L2T4LyL4L2C4L204L2EJyAmJiBob3VyIDwgNSB8fCBtZXJpZGllbSA9PT0gJ+C9keC9guC9vOC9hOC8i+C9keC9gicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfgvZjgvZrgvZPgvIvgvZjgvbwnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEwKSB7XG4gICAgICByZXR1cm4gJ+C9nuC9vOC9guC9puC8i+C9gOC9pic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn4L2J4L2y4L2T4LyL4L2C4L204L2EJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgvZHgvYLgvbzgvYTgvIvgvZHgvYInO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+C9mOC9muC9k+C8i+C9mOC9vCc7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhNdXRhdGlvbihudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIG1tOiAnbXVudXRlbm4nLFxuICAgIE1NOiAnbWl6JyxcbiAgICBkZDogJ2RldmV6aCdcbiAgfTtcbiAgcmV0dXJuIG51bWJlciArICcgJyArIG11dGF0aW9uKGZvcm1hdFtrZXldLCBudW1iZXIpO1xufVxuXG5mdW5jdGlvbiBzcGVjaWFsTXV0YXRpb25Gb3JZZWFycyhudW1iZXIpIHtcbiAgc3dpdGNoIChsYXN0TnVtYmVyKG51bWJlcikpIHtcbiAgICBjYXNlIDE6XG4gICAgY2FzZSAzOlxuICAgIGNhc2UgNDpcbiAgICBjYXNlIDU6XG4gICAgY2FzZSA5OlxuICAgICAgcmV0dXJuIG51bWJlciArICcgYmxvYXonO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudW1iZXIgKyAnIHZsb2F6JztcbiAgfVxufVxuXG5mdW5jdGlvbiBsYXN0TnVtYmVyKG51bWJlcikge1xuICBpZiAobnVtYmVyID4gOSkge1xuICAgIHJldHVybiBsYXN0TnVtYmVyKG51bWJlciAlIDEwKTtcbiAgfVxuXG4gIHJldHVybiBudW1iZXI7XG59XG5cbmZ1bmN0aW9uIG11dGF0aW9uKHRleHQsIG51bWJlcikge1xuICBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgcmV0dXJuIHNvZnRNdXRhdGlvbih0ZXh0KTtcbiAgfVxuXG4gIHJldHVybiB0ZXh0O1xufVxuXG5mdW5jdGlvbiBzb2Z0TXV0YXRpb24odGV4dCkge1xuICB2YXIgbXV0YXRpb25UYWJsZSA9IHtcbiAgICBtOiAndicsXG4gICAgYjogJ3YnLFxuICAgIGQ6ICd6J1xuICB9O1xuXG4gIGlmIChtdXRhdGlvblRhYmxlW3RleHQuY2hhckF0KDApXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICByZXR1cm4gbXV0YXRpb25UYWJsZVt0ZXh0LmNoYXJBdCgwKV0gKyB0ZXh0LnN1YnN0cmluZygxKTtcbn1cblxudmFyIG1vbnRoc1BhcnNlID0gWy9eZ2VuL2ksIC9eY1vKvFxcJ11od2UvaSwgL15tZXUvaSwgL15lYnIvaSwgL15tYWUvaSwgL14obWV6fGV2ZSkvaSwgL15nb3UvaSwgL15lb3MvaSwgL15nd2UvaSwgL15oZXIvaSwgL15kdS9pLCAvXmtlci9pXSxcbiAgICBtb250aHNSZWdleCA9IC9eKGdlbnZlcnxjW8q8XFwnXWh3ZXZyZXJ8bWV1cnpofGVicmVsfG1hZXxtZXpoZXZlbnxnb3VlcmV8ZW9zdHxnd2VuZ29sb3xoZXJlfGR1fGtlcnp1fGdlbnxjW8q8XFwnXWh3ZXxtZXV8ZWJyfG1hZXxldmV8Z291fGVvc3xnd2V8aGVyfGR1fGtlcikvaSxcbiAgICBtb250aHNTdHJpY3RSZWdleCA9IC9eKGdlbnZlcnxjW8q8XFwnXWh3ZXZyZXJ8bWV1cnpofGVicmVsfG1hZXxtZXpoZXZlbnxnb3VlcmV8ZW9zdHxnd2VuZ29sb3xoZXJlfGR1fGtlcnp1KS9pLFxuICAgIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXggPSAvXihnZW58Y1vKvFxcJ11od2V8bWV1fGVicnxtYWV8ZXZlfGdvdXxlb3N8Z3dlfGhlcnxkdXxrZXIpL2ksXG4gICAgZnVsbFdlZWtkYXlzUGFyc2UgPSBbL15zdWwvaSwgL15sdW4vaSwgL15tZXVyemgvaSwgL15tZXJjW8q8XFwnXWhlci9pLCAvXnlhb3UvaSwgL15nd2VuZXIvaSwgL15zYWRvcm4vaV0sXG4gICAgc2hvcnRXZWVrZGF5c1BhcnNlID0gWy9eU3VsL2ksIC9eTHVuL2ksIC9eTWV1L2ksIC9eTWVyL2ksIC9eWWFvL2ksIC9eR3dlL2ksIC9eU2FkL2ldLFxuICAgIG1pbldlZWtkYXlzUGFyc2UgPSBbL15TdS9pLCAvXkx1L2ksIC9eTWUoW15yXXwkKS9pLCAvXk1lci9pLCAvXllhL2ksIC9eR3cvaSwgL15TYS9pXTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JyJywge1xuICBtb250aHM6ICdHZW52ZXJfQ8q8aHdldnJlcl9NZXVyemhfRWJyZWxfTWFlX01lemhldmVuX0dvdWVyZV9Fb3N0X0d3ZW5nb2xvX0hlcmVfRHVfS2VyenUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnR2VuX0PKvGh3ZV9NZXVfRWJyX01hZV9FdmVfR291X0Vvc19Hd2VfSGVyX0R1X0tlcicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdTdWxfTHVuX01ldXJ6aF9NZXJjyrxoZXJfWWFvdV9Hd2VuZXJfU2Fkb3JuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VsX0x1bl9NZXVfTWVyX1lhb19Hd2VfU2FkJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X0x1X01lX01lcl9ZYV9Hd19TYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZTogbWluV2Vla2RheXNQYXJzZSxcbiAgZnVsbFdlZWtkYXlzUGFyc2U6IGZ1bGxXZWVrZGF5c1BhcnNlLFxuICBzaG9ydFdlZWtkYXlzUGFyc2U6IHNob3J0V2Vla2RheXNQYXJzZSxcbiAgbWluV2Vla2RheXNQYXJzZTogbWluV2Vla2RheXNQYXJzZSxcbiAgbW9udGhzUmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTaG9ydFJlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IG1vbnRoc1N0cmljdFJlZ2V4LFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiBtb250aHNTaG9ydFN0cmljdFJlZ2V4LFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIFthIHZpel0gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIFthIHZpel0gTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBbYSB2aXpdIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0hpeml2IGRhXSBMVCcsXG4gICAgbmV4dERheTogJ1tXYXJjyrxob2F6aCBkYV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbZGFdIExUJyxcbiAgICBsYXN0RGF5OiAnW0RlY8q8aCBkYV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbcGFzZXQgZGFdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2EtYmVubiAlcycsXG4gICAgcGFzdDogJyVzIMq8em8nLFxuICAgIHM6ICd1biBuZWJldWQgc2Vnb25kZW5ub8O5JyxcbiAgICBzczogJyVkIGVpbGVubicsXG4gICAgbTogJ3VyIHZ1bnV0ZW5uJyxcbiAgICBtbTogcmVsYXRpdmVUaW1lV2l0aE11dGF0aW9uLFxuICAgIGg6ICd1biBldXInLFxuICAgIGhoOiAnJWQgZXVyJyxcbiAgICBkOiAndW4gZGV2ZXpoJyxcbiAgICBkZDogcmVsYXRpdmVUaW1lV2l0aE11dGF0aW9uLFxuICAgIE06ICd1ciBtaXonLFxuICAgIE1NOiByZWxhdGl2ZVRpbWVXaXRoTXV0YXRpb24sXG4gICAgeTogJ3VyIGJsb2F6JyxcbiAgICB5eTogc3BlY2lhbE11dGF0aW9uRm9yWWVhcnNcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGHDsXx2ZXQpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgb3V0cHV0ID0gbnVtYmVyID09PSAxID8gJ2HDsScgOiAndmV0JztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvYS5tLnxnLm0uLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTSh0b2tlbikge1xuICAgIHJldHVybiB0b2tlbiA9PT0gJ2cubS4nO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgcmV0dXJuIGhvdXIgPCAxMiA/ICdhLm0uJyA6ICdnLm0uJztcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3NzJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmRhJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmRlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2VrdW5kaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2plZG5hIG1pbnV0YScgOiAnamVkbmUgbWludXRlJztcblxuICAgIGNhc2UgJ21tJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdtaW51dGEnO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIgfHwgbnVtYmVyID09PSAzIHx8IG51bWJlciA9PT0gNCkge1xuICAgICAgICByZXN1bHQgKz0gJ21pbnV0ZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ21pbnV0YSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2plZGFuIHNhdCcgOiAnamVkbm9nIHNhdGEnO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ3NhdCc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2F0YSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ3NhdGknO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ2Rhbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ2RhbmEnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ21qZXNlYyc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWplc2VjYSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ21qZXNlY2knO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ2dvZGluYSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnZ29kaW5lJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnZ29kaW5hJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdicycsIHtcbiAgbW9udGhzOiAnamFudWFyX2ZlYnJ1YXJfbWFydF9hcHJpbF9tYWpfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iYXJfb2t0b2Jhcl9ub3ZlbWJhcl9kZWNlbWJhcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW4uX2ZlYi5fbWFyLl9hcHIuX21hai5fanVuLl9qdWwuX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVjLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICduZWRqZWxqYV9wb25lZGplbGpha191dG9yYWtfc3JpamVkYV/EjWV0dnJ0YWtfcGV0YWtfc3Vib3RhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnbmVkLl9wb24uX3V0by5fc3JpLl/EjWV0Ll9wZXQuX3N1Yi4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnbmVfcG9fdXRfc3JfxI1lX3BlX3N1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tkYW5hcyB1XSBMVCcsXG4gICAgbmV4dERheTogJ1tzdXRyYSB1XSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbbmVkamVsanVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzcmlqZWR1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbc3Vib3R1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBkZGRkIFt1XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW2p1xI1lciB1XSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3Byb8WhbHVdIGRkZGQgW3VdIExUJztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbcHJvxaFsZV0gW3N1Ym90ZV0gW3VdIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuICdbcHJvxaFsaV0gZGRkZCBbdV0gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd6YSAlcycsXG4gICAgcGFzdDogJ3ByaWplICVzJyxcbiAgICBzOiAncGFyIHNla3VuZGknLFxuICAgIHNzOiB0cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRlLFxuICAgIG1tOiB0cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogJ2RhbicsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiAnbWplc2VjJyxcbiAgICBNTTogdHJhbnNsYXRlLFxuICAgIHk6ICdnb2RpbnUnLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2NhJywge1xuICBtb250aHM6IHtcbiAgICBzdGFuZGFsb25lOiAnZ2VuZXJfZmVicmVyX21hcsOnX2FicmlsX21haWdfanVueV9qdWxpb2xfYWdvc3Rfc2V0ZW1icmVfb2N0dWJyZV9ub3ZlbWJyZV9kZXNlbWJyZScuc3BsaXQoJ18nKSxcbiAgICBmb3JtYXQ6IFwiZGUgZ2VuZXJfZGUgZmVicmVyX2RlIG1hcsOnX2QnYWJyaWxfZGUgbWFpZ19kZSBqdW55X2RlIGp1bGlvbF9kJ2Fnb3N0X2RlIHNldGVtYnJlX2Qnb2N0dWJyZV9kZSBub3ZlbWJyZV9kZSBkZXNlbWJyZVwiLnNwbGl0KCdfJyksXG4gICAgaXNGb3JtYXQ6IC9EW29EXT8oXFxzKStNTU1NL1xuICB9LFxuICBtb250aHNTaG9ydDogJ2dlbi5fZmVici5fbWFyw6dfYWJyLl9tYWlnX2p1bnlfanVsLl9hZy5fc2V0Ll9vY3QuX25vdi5fZGVzLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdkaXVtZW5nZV9kaWxsdW5zX2RpbWFydHNfZGltZWNyZXNfZGlqb3VzX2RpdmVuZHJlc19kaXNzYWJ0ZScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RnLl9kbC5fZHQuX2RjLl9kai5fZHYuX2RzLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkZ19kbF9kdF9kY19kal9kdl9kcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFtkZV0gWVlZWScsXG4gICAgbGw6ICdEIE1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gW2RlXSBZWVlZIFthIGxlc10gSDptbScsXG4gICAgbGxsOiAnRCBNTU0gWVlZWSwgSDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFtkZV0gWVlZWSBbYSBsZXNdIEg6bW0nLFxuICAgIGxsbGw6ICdkZGQgRCBNTU0gWVlZWSwgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBmdW5jdGlvbiBzYW1lRGF5KCkge1xuICAgICAgcmV0dXJuICdbYXZ1aSBhICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ2xlcycgOiAnbGEnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHREYXk6IGZ1bmN0aW9uIG5leHREYXkoKSB7XG4gICAgICByZXR1cm4gJ1tkZW3DoCBhICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ2xlcycgOiAnbGEnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnZGRkZCBbYSAnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdsZXMnIDogJ2xhJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0RGF5OiBmdW5jdGlvbiBsYXN0RGF5KCkge1xuICAgICAgcmV0dXJuICdbYWhpciBhICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ2xlcycgOiAnbGEnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiAnW2VsXSBkZGRkIFtwYXNzYXQgYSAnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdsZXMnIDogJ2xhJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogXCJkJ2FxdcOtICVzXCIsXG4gICAgcGFzdDogJ2ZhICVzJyxcbiAgICBzOiAndW5zIHNlZ29ucycsXG4gICAgc3M6ICclZCBzZWdvbnMnLFxuICAgIG06ICd1biBtaW51dCcsXG4gICAgbW06ICclZCBtaW51dHMnLFxuICAgIGg6ICd1bmEgaG9yYScsXG4gICAgaGg6ICclZCBob3JlcycsXG4gICAgZDogJ3VuIGRpYScsXG4gICAgZGQ6ICclZCBkaWVzJyxcbiAgICBNOiAndW4gbWVzJyxcbiAgICBNTTogJyVkIG1lc29zJyxcbiAgICB5OiAndW4gYW55JyxcbiAgICB5eTogJyVkIGFueXMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShyfG58dHzDqHxhKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICB2YXIgb3V0cHV0ID0gbnVtYmVyID09PSAxID8gJ3InIDogbnVtYmVyID09PSAyID8gJ24nIDogbnVtYmVyID09PSAzID8gJ3InIDogbnVtYmVyID09PSA0ID8gJ3QnIDogJ8OoJztcblxuICAgIGlmIChwZXJpb2QgPT09ICd3JyB8fCBwZXJpb2QgPT09ICdXJykge1xuICAgICAgb3V0cHV0ID0gJ2EnO1xuICAgIH1cblxuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHMgPSAnbGVkZW5fw7pub3JfYsWZZXplbl9kdWJlbl9rdsSbdGVuX8SNZXJ2ZW5fxI1lcnZlbmVjX3NycGVuX3rDocWZw61fxZnDrWplbl9saXN0b3BhZF9wcm9zaW5lYycuc3BsaXQoJ18nKSxcbiAgICBtb250aHNTaG9ydCA9ICdsZWRfw7pub19ixZllX2R1Yl9rdsSbX8SNdm5fxI12Y19zcnBfesOhxZlfxZnDrWpfbGlzX3Bybycuc3BsaXQoJ18nKSxcbiAgICBtb250aHNQYXJzZSA9IFsvXmxlZC9pLCAvXsO6bm8vaSwgL15ixZllL2ksIC9eZHViL2ksIC9ea3bEmy9pLCAvXijEjXZufMSNZXJ2ZW4kfMSNZXJ2bmEpL2ksIC9eKMSNdmN8xI1lcnZlbmVjfMSNZXJ2ZW5jZSkvaSwgL15zcnAvaSwgL156w6HFmS9pLCAvXsWZw61qL2ksIC9ebGlzL2ksIC9ecHJvL2ldLFxuICAgIG1vbnRoc1JlZ2V4ID0gL14obGVkZW58w7pub3J8YsWZZXplbnxkdWJlbnxrdsSbdGVufMSNZXJ2ZW5lY3zEjWVydmVuY2V8xI1lcnZlbnzEjWVydm5hfHNycGVufHrDocWZw618xZnDrWplbnxsaXN0b3BhZHxwcm9zaW5lY3xsZWR8w7pub3xixZllfGR1YnxrdsSbfMSNdm58xI12Y3xzcnB8esOhxZl8xZnDrWp8bGlzfHBybykvaTtcblxuZnVuY3Rpb24gcGx1cmFsKG4pIHtcbiAgcmV0dXJuIG4gPiAxICYmIG4gPCA1ICYmIH5+KG4gLyAxMCkgIT09IDE7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAncMOhciBzZWt1bmQnIDogJ3DDoXIgc2VrdW5kYW1pJztcblxuICAgIGNhc2UgJ3NzJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnc2VrdW5keScgOiAnc2VrdW5kJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ3Nla3VuZGFtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ21pbnV0YScgOiBpc0Z1dHVyZSA/ICdtaW51dHUnIDogJ21pbnV0b3UnO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdtaW51dHknIDogJ21pbnV0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ21pbnV0YW1pJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnaG9kaW5hJyA6IGlzRnV0dXJlID8gJ2hvZGludScgOiAnaG9kaW5vdSc7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ2hvZGlueScgOiAnaG9kaW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnaG9kaW5hbWknO1xuICAgICAgfVxuXG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdkZW4nIDogJ2RuZW0nO1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdkbnknIDogJ2Ruw60nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnZG55JztcbiAgICAgIH1cblxuICAgIGNhc2UgJ00nOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbcSbc8OtYycgOiAnbcSbc8OtY2VtJztcblxuICAgIGNhc2UgJ01NJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnbcSbc8OtY2UnIDogJ23Em3PDrWPFrycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdtxJtzw61jaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ3JvaycgOiAncm9rZW0nO1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdyb2t5JyA6ICdsZXQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnbGV0eSc7XG4gICAgICB9XG5cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdjcycsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHNTaG9ydCxcbiAgbW9udGhzUmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTaG9ydFJlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC9eKGxlZGVufGxlZG5hfMO6bm9yYXzDum5vcnxixZllemVufGLFmWV6bmF8ZHViZW58ZHVibmF8a3bEm3RlbnxrdsSbdG5hfMSNZXJ2ZW5lY3zEjWVydmVuY2V8xI1lcnZlbnzEjWVydm5hfHNycGVufHNycG5hfHrDocWZw618xZnDrWplbnzFmcOtam5hfGxpc3RvcGFkdXxsaXN0b3BhZHxwcm9zaW5lY3xwcm9zaW5jZSkvaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogL14obGVkfMO6bm98YsWZZXxkdWJ8a3bEm3zEjXZufMSNdmN8c3JwfHrDocWZfMWZw61qfGxpc3xwcm8pL2ksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHdlZWtkYXlzOiAnbmVkxJtsZV9wb25kxJtsw61fw7p0ZXLDvV9zdMWZZWRhX8SNdHZydGVrX3DDoXRla19zb2JvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZV9wb1/DunRfc3RfxI10X3DDoV9zbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb1/DunRfc3RfxI10X3DDoV9zbycuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQuIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBsOiAnRC4gTS4gWVlZWSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2RuZXMgdl0gTFQnLFxuICAgIG5leHREYXk6ICdbesOtdHJhIHZdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3YgbmVkxJtsaSB2XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgcmV0dXJuICdbdl0gZGRkZCBbdl0gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1t2ZSBzdMWZZWR1IHZdIExUJztcblxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuICdbdmUgxI10dnJ0ZWsgdl0gTFQnO1xuXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t2IHDDoXRlayB2XSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3Ygc29ib3R1IHZdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdbdsSNZXJhIHZdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW21pbnVsb3UgbmVkxJtsaSB2XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgcmV0dXJuICdbbWludWzDqV0gZGRkZCBbdl0gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1ttaW51bG91IHN0xZllZHUgdl0gTFQnO1xuXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW21pbnVsw71dIGRkZGQgW3ZdIExUJztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbbWludWxvdSBzb2JvdHUgdl0gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd6YSAlcycsXG4gICAgcGFzdDogJ3DFmWVkICVzJyxcbiAgICBzOiB0cmFuc2xhdGUsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiB0cmFuc2xhdGUsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiB0cmFuc2xhdGUsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiB0cmFuc2xhdGUsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnY3YnLCB7XG4gIG1vbnRoczogJ9C605HRgNC70LDRh1/QvdCw0YDTkdGBX9C/0YPRiF/QsNC60LBf0LzQsNC5X9Kr05fRgNGC0LzQtV/Rg9GC05Ff0qvRg9GA0LvQsF/QsNCy05HQvV/RjtC/0LBf0YfTs9C6X9GA0LDRiNGC0LDQsicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfQutOR0YBf0L3QsNGAX9C/0YPRiF/QsNC60LBf0LzQsNC5X9Kr05fRgF/Rg9GC05Ff0qvRg9GAX9Cw0LLQvV/RjtC/0LBf0YfTs9C6X9GA0LDRiCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfQstGL0YDRgdCw0YDQvdC40LrRg9C9X9GC0YPQvdGC0LjQutGD0L1f0YvRgtC70LDRgNC40LrRg9C9X9GO0L3QutGD0L1f0LrTl9Kr0L3QtdGA0L3QuNC60YPQvV/RjdGA0L3QtdC60YPQvV/RiNOR0LzQsNGC0LrRg9C9Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn0LLRi9GAX9GC0YPQvV/Ri9GC0Ltf0Y7QvV/QutOX0qtf0Y3RgNC9X9GI05HQvCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQstGAX9GC0L1f0YvRgl/RjtC9X9C60qtf0Y3RgF/RiNC8Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQtTU0tWVlZWScsXG4gICAgTEw6ICdZWVlZIFvSq9GD0LvRhdC4XSBNTU1NIFvRg9C505HRhdOX0L1dIERbLdC805fRiNOXXScsXG4gICAgTExMOiAnWVlZWSBb0qvRg9C70YXQuF0gTU1NTSBb0YPQudOR0YXTl9C9XSBEWy3QvNOX0YjTl10sIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgWVlZWSBb0qvRg9C70YXQuF0gTU1NTSBb0YPQudOR0YXTl9C9XSBEWy3QvNOX0YjTl10sIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb0J/QsNGP0L1dIExUIFvRgdC10YXQtdGC0YDQtV0nLFxuICAgIG5leHREYXk6ICdb0KvRgNCw0L1dIExUIFvRgdC10YXQtdGC0YDQtV0nLFxuICAgIGxhc3REYXk6ICdb05bQvdC10YBdIExUIFvRgdC10YXQtdGC0YDQtV0nLFxuICAgIG5leHRXZWVrOiAnW9Kq0LjRgtC10YFdIGRkZGQgTFQgW9GB0LXRhdC10YLRgNC1XScsXG4gICAgbGFzdFdlZWs6ICdb0JjRgNGC0L3Tl10gZGRkZCBMVCBb0YHQtdGF0LXRgtGA0LVdJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogZnVuY3Rpb24gZnV0dXJlKG91dHB1dCkge1xuICAgICAgdmFyIGFmZml4ID0gL9GB0LXRhdC10YIkL2kuZXhlYyhvdXRwdXQpID8gJ9GA0LXQvScgOiAv0qvRg9C7JC9pLmV4ZWMob3V0cHV0KSA/ICfRgtCw0L0nIDogJ9GA0LDQvSc7XG4gICAgICByZXR1cm4gb3V0cHV0ICsgYWZmaXg7XG4gICAgfSxcbiAgICBwYXN0OiAnJXMg0LrQsNGP0LvQu9CwJyxcbiAgICBzOiAn0L/Tl9GALdC40Log0qvQtdC60LrRg9C90YInLFxuICAgIHNzOiAnJWQg0qvQtdC60LrRg9C90YInLFxuICAgIG06ICfQv9OX0YAg0LzQuNC90YPRgicsXG4gICAgbW06ICclZCDQvNC40L3Rg9GCJyxcbiAgICBoOiAn0L/Tl9GAINGB0LXRhdC10YInLFxuICAgIGhoOiAnJWQg0YHQtdGF0LXRgicsXG4gICAgZDogJ9C/05fRgCDQutGD0L0nLFxuICAgIGRkOiAnJWQg0LrRg9C9JyxcbiAgICBNOiAn0L/Tl9GAINGD0LnTkdGFJyxcbiAgICBNTTogJyVkINGD0LnTkdGFJyxcbiAgICB5OiAn0L/Tl9GAINKr0YPQuycsXG4gICAgeXk6ICclZCDSq9GD0LsnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS3QvNOX0YgvLFxuICBvcmRpbmFsOiAnJWQt0LzTl9GIJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnY3knLCB7XG4gIG1vbnRoczogJ0lvbmF3cl9DaHdlZnJvcl9NYXdydGhfRWJyaWxsX01haV9NZWhlZmluX0dvcmZmZW5uYWZfQXdzdF9NZWRpX0h5ZHJlZl9UYWNod2VkZF9SaGFnZnlyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0lvbl9DaHdlX01hd19FYnJfTWFpX01laF9Hb3JfQXdzX01lZF9IeWRfVGFjaF9SaGFnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0R5ZGQgU3VsX0R5ZGQgTGx1bl9EeWRkIE1hd3J0aF9EeWRkIE1lcmNoZXJfRHlkZCBJYXVfRHlkZCBHd2VuZXJfRHlkZCBTYWR3cm4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdWxfTGx1bl9NYXdfTWVyX0lhdV9Hd2VfU2FkJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X0xsX01hX01lX0lhX0d3X1NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSGVkZGl3IGFtXSBMVCcsXG4gICAgbmV4dERheTogJ1tZZm9yeSBhbV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYW1dIExUJyxcbiAgICBsYXN0RGF5OiAnW0Rkb2UgYW1dIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2Rpd2V0aGFmIGFtXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdtZXduICVzJyxcbiAgICBwYXN0OiAnJXMgeW4gw7RsJyxcbiAgICBzOiAneWNoeWRpZyBlaWxpYWRhdScsXG4gICAgc3M6ICclZCBlaWxpYWQnLFxuICAgIG06ICdtdW51ZCcsXG4gICAgbW06ICclZCBtdW51ZCcsXG4gICAgaDogJ2F3cicsXG4gICAgaGg6ICclZCBhd3InLFxuICAgIGQ6ICdkaXdybm9kJyxcbiAgICBkZDogJyVkIGRpd3Jub2QnLFxuICAgIE06ICdtaXMnLFxuICAgIE1NOiAnJWQgbWlzJyxcbiAgICB5OiAnYmx3eWRkeW4nLFxuICAgIHl5OiAnJWQgZmx5bmVkZCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGZlZHxhaW58YWZ8aWx8eWRkfGVkfGVnKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIsXG4gICAgICAgIG91dHB1dCA9ICcnLFxuICAgICAgICBsb29rdXAgPSBbJycsICdhZicsICdpbCcsICd5ZGQnLCAneWRkJywgJ2VkJywgJ2VkJywgJ2VkJywgJ2ZlZCcsICdmZWQnLCAnZmVkJywgJ2VnJywgJ2ZlZCcsICdlZycsICdlZycsICdmZWQnLCAnZWcnLCAnZWcnLCAnZmVkJywgJ2VnJywgJ2ZlZCddO1xuXG4gICAgaWYgKGIgPiAyMCkge1xuICAgICAgaWYgKGIgPT09IDQwIHx8IGIgPT09IDUwIHx8IGIgPT09IDYwIHx8IGIgPT09IDgwIHx8IGIgPT09IDEwMCkge1xuICAgICAgICBvdXRwdXQgPSAnZmVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dHB1dCA9ICdhaW4nO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYiA+IDApIHtcbiAgICAgIG91dHB1dCA9IGxvb2t1cFtiXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdkYScsIHtcbiAgbW9udGhzOiAnamFudWFyX2ZlYnJ1YXJfbWFydHNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3Rfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnc8O4bmRhZ19tYW5kYWdfdGlyc2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbMO4cmRhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3PDuG5fbWFuX3Rpcl9vbnNfdG9yX2ZyZV9sw7hyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ3PDuF9tYV90aV9vbl90b19mcl9sw7gnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBbZC5dIEQuIE1NTU0gWVlZWSBba2wuXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2kgZGFnIGtsLl0gTFQnLFxuICAgIG5leHREYXk6ICdbaSBtb3JnZW4ga2wuXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdww6UgZGRkZCBba2wuXSBMVCcsXG4gICAgbGFzdERheTogJ1tpIGfDpXIga2wuXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbaV0gZGRkZFtzIGtsLl0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb20gJXMnLFxuICAgIHBhc3Q6ICclcyBzaWRlbicsXG4gICAgczogJ2bDpSBzZWt1bmRlcicsXG4gICAgc3M6ICclZCBzZWt1bmRlcicsXG4gICAgbTogJ2V0IG1pbnV0JyxcbiAgICBtbTogJyVkIG1pbnV0dGVyJyxcbiAgICBoOiAnZW4gdGltZScsXG4gICAgaGg6ICclZCB0aW1lcicsXG4gICAgZDogJ2VuIGRhZycsXG4gICAgZGQ6ICclZCBkYWdlJyxcbiAgICBNOiAnZW4gbcOlbmVkJyxcbiAgICBNTTogJyVkIG3DpW5lZGVyJyxcbiAgICB5OiAnZXQgw6VyJyxcbiAgICB5eTogJyVkIMOlcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBtOiBbJ2VpbmUgTWludXRlJywgJ2VpbmVyIE1pbnV0ZSddLFxuICAgIGg6IFsnZWluZSBTdHVuZGUnLCAnZWluZXIgU3R1bmRlJ10sXG4gICAgZDogWydlaW4gVGFnJywgJ2VpbmVtIFRhZyddLFxuICAgIGRkOiBbbnVtYmVyICsgJyBUYWdlJywgbnVtYmVyICsgJyBUYWdlbiddLFxuICAgIHc6IFsnZWluZSBXb2NoZScsICdlaW5lciBXb2NoZSddLFxuICAgIE06IFsnZWluIE1vbmF0JywgJ2VpbmVtIE1vbmF0J10sXG4gICAgTU06IFtudW1iZXIgKyAnIE1vbmF0ZScsIG51bWJlciArICcgTW9uYXRlbiddLFxuICAgIHk6IFsnZWluIEphaHInLCAnZWluZW0gSmFociddLFxuICAgIHl5OiBbbnVtYmVyICsgJyBKYWhyZScsIG51bWJlciArICcgSmFocmVuJ11cbiAgfTtcbiAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyBmb3JtYXRba2V5XVswXSA6IGZvcm1hdFtrZXldWzFdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdkZS1hdCcsIHtcbiAgbW9udGhzOiAnSsOkbm5lcl9GZWJydWFyX03DpHJ6X0FwcmlsX01haV9KdW5pX0p1bGlfQXVndXN0X1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0RlemVtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0rDpG4uX0ZlYi5fTcOkcnpfQXByLl9NYWlfSnVuaV9KdWxpX0F1Zy5fU2VwLl9Pa3QuX05vdi5fRGV6Licuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdTb25udGFnX01vbnRhZ19EaWVuc3RhZ19NaXR0d29jaF9Eb25uZXJzdGFnX0ZyZWl0YWdfU2Ftc3RhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1NvLl9Nby5fRGkuX01pLl9Eby5fRnIuX1NhLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTb19Nb19EaV9NaV9Eb19Gcl9TYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2hldXRlIHVtXSBMVCBbVWhyXScsXG4gICAgc2FtZUVsc2U6ICdMJyxcbiAgICBuZXh0RGF5OiAnW21vcmdlbiB1bV0gTFQgW1Vocl0nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbdW1dIExUIFtVaHJdJyxcbiAgICBsYXN0RGF5OiAnW2dlc3Rlcm4gdW1dIExUIFtVaHJdJyxcbiAgICBsYXN0V2VlazogJ1tsZXR6dGVuXSBkZGRkIFt1bV0gTFQgW1Vocl0nXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAndm9yICVzJyxcbiAgICBzOiAnZWluIHBhYXIgU2VrdW5kZW4nLFxuICAgIHNzOiAnJWQgU2VrdW5kZW4nLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06ICclZCBNaW51dGVuJyxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiAnJWQgU3R1bmRlbicsXG4gICAgZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB3OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHd3OiAnJWQgV29jaGVuJyxcbiAgICBNOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE1NOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHk6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeXk6IHByb2Nlc3NSZWxhdGl2ZVRpbWVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBtOiBbJ2VpbmUgTWludXRlJywgJ2VpbmVyIE1pbnV0ZSddLFxuICAgIGg6IFsnZWluZSBTdHVuZGUnLCAnZWluZXIgU3R1bmRlJ10sXG4gICAgZDogWydlaW4gVGFnJywgJ2VpbmVtIFRhZyddLFxuICAgIGRkOiBbbnVtYmVyICsgJyBUYWdlJywgbnVtYmVyICsgJyBUYWdlbiddLFxuICAgIHc6IFsnZWluZSBXb2NoZScsICdlaW5lciBXb2NoZSddLFxuICAgIE06IFsnZWluIE1vbmF0JywgJ2VpbmVtIE1vbmF0J10sXG4gICAgTU06IFtudW1iZXIgKyAnIE1vbmF0ZScsIG51bWJlciArICcgTW9uYXRlbiddLFxuICAgIHk6IFsnZWluIEphaHInLCAnZWluZW0gSmFociddLFxuICAgIHl5OiBbbnVtYmVyICsgJyBKYWhyZScsIG51bWJlciArICcgSmFocmVuJ11cbiAgfTtcbiAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyBmb3JtYXRba2V5XVswXSA6IGZvcm1hdFtrZXldWzFdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdkZS1jaCcsIHtcbiAgbW9udGhzOiAnSmFudWFyX0ZlYnJ1YXJfTcOkcnpfQXByaWxfTWFpX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuLl9GZWIuX03DpHJ6X0Fwci5fTWFpX0p1bmlfSnVsaV9BdWcuX1NlcC5fT2t0Ll9Ob3YuX0Rlei4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnU29ubnRhZ19Nb250YWdfRGllbnN0YWdfTWl0dHdvY2hfRG9ubmVyc3RhZ19GcmVpdGFnX1NhbXN0YWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTb19Nb19EaV9NaV9Eb19Gcl9TYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTb19Nb19EaV9NaV9Eb19Gcl9TYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2hldXRlIHVtXSBMVCBbVWhyXScsXG4gICAgc2FtZUVsc2U6ICdMJyxcbiAgICBuZXh0RGF5OiAnW21vcmdlbiB1bV0gTFQgW1Vocl0nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbdW1dIExUIFtVaHJdJyxcbiAgICBsYXN0RGF5OiAnW2dlc3Rlcm4gdW1dIExUIFtVaHJdJyxcbiAgICBsYXN0V2VlazogJ1tsZXR6dGVuXSBkZGRkIFt1bV0gTFQgW1Vocl0nXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAndm9yICVzJyxcbiAgICBzOiAnZWluIHBhYXIgU2VrdW5kZW4nLFxuICAgIHNzOiAnJWQgU2VrdW5kZW4nLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06ICclZCBNaW51dGVuJyxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiAnJWQgU3R1bmRlbicsXG4gICAgZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB3OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHd3OiAnJWQgV29jaGVuJyxcbiAgICBNOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE1NOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHk6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeXk6IHByb2Nlc3NSZWxhdGl2ZVRpbWVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBtOiBbJ2VpbmUgTWludXRlJywgJ2VpbmVyIE1pbnV0ZSddLFxuICAgIGg6IFsnZWluZSBTdHVuZGUnLCAnZWluZXIgU3R1bmRlJ10sXG4gICAgZDogWydlaW4gVGFnJywgJ2VpbmVtIFRhZyddLFxuICAgIGRkOiBbbnVtYmVyICsgJyBUYWdlJywgbnVtYmVyICsgJyBUYWdlbiddLFxuICAgIHc6IFsnZWluZSBXb2NoZScsICdlaW5lciBXb2NoZSddLFxuICAgIE06IFsnZWluIE1vbmF0JywgJ2VpbmVtIE1vbmF0J10sXG4gICAgTU06IFtudW1iZXIgKyAnIE1vbmF0ZScsIG51bWJlciArICcgTW9uYXRlbiddLFxuICAgIHk6IFsnZWluIEphaHInLCAnZWluZW0gSmFociddLFxuICAgIHl5OiBbbnVtYmVyICsgJyBKYWhyZScsIG51bWJlciArICcgSmFocmVuJ11cbiAgfTtcbiAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyBmb3JtYXRba2V5XVswXSA6IGZvcm1hdFtrZXldWzFdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdkZScsIHtcbiAgbW9udGhzOiAnSmFudWFyX0ZlYnJ1YXJfTcOkcnpfQXByaWxfTWFpX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuLl9GZWIuX03DpHJ6X0Fwci5fTWFpX0p1bmlfSnVsaV9BdWcuX1NlcC5fT2t0Ll9Ob3YuX0Rlei4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnU29ubnRhZ19Nb250YWdfRGllbnN0YWdfTWl0dHdvY2hfRG9ubmVyc3RhZ19GcmVpdGFnX1NhbXN0YWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTby5fTW8uX0RpLl9NaS5fRG8uX0ZyLl9TYS4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU29fTW9fRGlfTWlfRG9fRnJfU2EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1toZXV0ZSB1bV0gTFQgW1Vocl0nLFxuICAgIHNhbWVFbHNlOiAnTCcsXG4gICAgbmV4dERheTogJ1ttb3JnZW4gdW1dIExUIFtVaHJdJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3VtXSBMVCBbVWhyXScsXG4gICAgbGFzdERheTogJ1tnZXN0ZXJuIHVtXSBMVCBbVWhyXScsXG4gICAgbGFzdFdlZWs6ICdbbGV0enRlbl0gZGRkZCBbdW1dIExUIFtVaHJdJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdpbiAlcycsXG4gICAgcGFzdDogJ3ZvciAlcycsXG4gICAgczogJ2VpbiBwYWFyIFNla3VuZGVuJyxcbiAgICBzczogJyVkIFNla3VuZGVuJyxcbiAgICBtOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG1tOiAnJWQgTWludXRlbicsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogJyVkIFN0dW5kZW4nLFxuICAgIGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgdzogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB3dzogJyVkIFdvY2hlbicsXG4gICAgTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBNTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHl5OiBwcm9jZXNzUmVsYXRpdmVUaW1lXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzID0gWyfelt6s3oLeqt6H3qbeg96pJywgJ96K3qzehN6w3oPeqt6H3qbeg96pJywgJ96J3qfeg96o3pfeqicsICfeh96t3pXesN6D3qnejd6qJywgJ96J3q0nLCAn3pbeq96C3rAnLCAn3pbeqt6N3qbeh96oJywgJ96H3q/ejt6m3pDesN6T3qonLCAn3pDerN6V3rDek96s3onesN6E3qbeg96qJywgJ96H3q7eht6w3pPer96E3qbeg96qJywgJ96C3q7eiN6s3onesN6E3qbeg96qJywgJ96R3qjekN6s3onesN6E3qbeg96qJ10sXG4gICAgd2Vla2RheXMgPSBbJ96H3qfei96o3ofesN6M3qYnLCAn3oDer96J3qYnLCAn3ofept6C3rDejt6n3oPepicsICfehN6q3ovepicsICfehN6q3oPep96Q3rDeit6m3ozeqCcsICfegN6q3obeqt6D3qonLCAn3oDert6C3qjegN6o3oPeqiddO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZHYnLCB7XG4gIG1vbnRoczogbW9udGhzLFxuICBtb250aHNTaG9ydDogbW9udGhzLFxuICB3ZWVrZGF5czogd2Vla2RheXMsXG4gIHdlZWtkYXlzU2hvcnQ6IHdlZWtkYXlzLFxuICB3ZWVrZGF5c01pbjogJ96H3qfei96oX96A3q/eid6mX96H3qbegt6wX96E3qrei96mX96E3qreg96nX96A3qreht6qX96A3q7egt6oJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnRC9NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL96J3oZ83oneii8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gJ96J3oonID09PSBpbnB1dDtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn3onehic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn3oneiic7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb3oneqN6H3qbei96qXSBMVCcsXG4gICAgbmV4dERheTogJ1veid6n3ovept6J3qddIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgTFQnLFxuICAgIGxhc3REYXk6ICdb3ofeqN6H3rDelN6sXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb3orep96H3qjejN6q3ojeqF0gZGRkZCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfejN6s3oPerd6O3qbeh96oICVzJyxcbiAgICBwYXN0OiAn3obeqt6D3qjegt6wICVzJyxcbiAgICBzOiAn3pDeqN6G3qregt6w3ozeqt6G3q7ehd6s3ofesCcsXG4gICAgc3M6ICdkJSDekN6o3obeqt6C3rDejN6qJyxcbiAgICBtOiAn3oneqN6C3qjek96s3ofesCcsXG4gICAgbW06ICfeid6o3oLeqN6T3qogJWQnLFxuICAgIGg6ICfejt6m3pHeqN6H3qjeg96s3ofesCcsXG4gICAgaGg6ICfejt6m3pHeqN6H3qjeg96qICVkJyxcbiAgICBkOiAn3oveqt6I3qbegN6s3ofesCcsXG4gICAgZGQ6ICfei96q3ojept6Q3rAgJWQnLFxuICAgIE06ICfeid6m3oDerN6H3rAnLFxuICAgIE1NOiAn3onept6Q3rAgJWQnLFxuICAgIHk6ICfeh96m3oDept6D3qzeh96wJyxcbiAgICB5eTogJ96H3qbegN6m3oPeqiAlZCdcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgv2IwvZywgJywnKTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDcsXG4gICAgZG95OiAxMlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oaW5wdXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBGdW5jdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5wdXQgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlbCcsIHtcbiAgbW9udGhzTm9taW5hdGl2ZUVsOiAnzpnOsc69zr/Phc6sz4HOuc6/z4JfzqbOtc6yz4HOv8+FzqzPgc65zr/Pgl/OnM6sz4HPhM65zr/Pgl/Okc+Az4HOr867zrnOv8+CX86czqzOuc6/z4JfzpnOv8+Nzr3Ouc6/z4JfzpnOv8+NzrvOuc6/z4JfzpHPjc6zzr/Phc+Dz4TOv8+CX86jzrXPgM+Ezq3OvM6yz4HOuc6/z4Jfzp/Ous+Ez47Oss+BzrnOv8+CX86dzr/Orc68zrLPgc65zr/Pgl/OlM61zrrOrc68zrLPgc65zr/Pgicuc3BsaXQoJ18nKSxcbiAgbW9udGhzR2VuaXRpdmVFbDogJ86ZzrHOvc6/z4XOsc+Bzq/Ov8+FX86mzrXOss+Bzr/Phc6xz4HOr86/z4VfzpzOsc+Bz4TOr86/z4VfzpHPgM+BzrnOu86vzr/PhV/OnM6xzpDOv8+FX86Zzr/Phc69zq/Ov8+FX86Zzr/Phc67zq/Ov8+FX86Rz4XOs86/z43Pg8+Ezr/PhV/Oo861z4DPhM61zrzOss+Bzq/Ov8+FX86fzrrPhM+JzrLPgc6vzr/PhV/Onc6/zrXOvM6yz4HOr86/z4VfzpTOtc66zrXOvM6yz4HOr86/z4UnLnNwbGl0KCdfJyksXG4gIG1vbnRoczogZnVuY3Rpb24gbW9udGhzKG1vbWVudFRvRm9ybWF0LCBmb3JtYXQpIHtcbiAgICBpZiAoIW1vbWVudFRvRm9ybWF0KSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW9udGhzTm9taW5hdGl2ZUVsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3N0cmluZycgJiYgL0QvLnRlc3QoZm9ybWF0LnN1YnN0cmluZygwLCBmb3JtYXQuaW5kZXhPZignTU1NTScpKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb250aHNHZW5pdGl2ZUVsW21vbWVudFRvRm9ybWF0Lm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW9udGhzTm9taW5hdGl2ZUVsW21vbWVudFRvRm9ybWF0Lm1vbnRoKCldO1xuICAgIH1cbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICfOmc6xzr1fzqbOtc6yX86czrHPgV/Okc+Az4FfzpzOsc+KX86Zzr/Phc69X86Zzr/Phc67X86Rz4XOs1/Oo861z4Bfzp/Ous+EX86dzr/OtV/OlM61zronLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnzprPhc+BzrnOsc66zq5fzpTOtc+Fz4TOrc+BzrFfzqTPgc6vz4TOt1/OpM61z4TOrM+Bz4TOt1/OoM6tzrzPgM+EzrdfzqDOsc+BzrHPg866zrXPhc6uX86jzqzOss6yzrHPhM6/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnzprPhc+BX86UzrXPhV/OpM+BzrlfzqTOtc+EX86gzrXOvF/OoM6xz4FfzqPOsc6yJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ86az4VfzpTOtV/OpM+BX86kzrVfzqDOtV/OoM6xX86jzrEnLnNwbGl0KCdfJyksXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA+IDExKSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICfOvM68JyA6ICfOnM6cJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAnz4DOvCcgOiAnzqDOnCc7XG4gICAgfVxuICB9LFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIChpbnB1dCArICcnKS50b0xvd2VyQ2FzZSgpWzBdID09PSAnzrwnO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvW86gzpxdXFwuP86cP1xcLj8vaSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2g6bW0gQScsXG4gICAgTFRTOiAnaDptbTpzcyBBJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBJ1xuICB9LFxuICBjYWxlbmRhckVsOiB7XG4gICAgc2FtZURheTogJ1vOo86uzrzOtc+BzrEge31dIExUJyxcbiAgICBuZXh0RGF5OiAnW86Rz43Pgc65zr8ge31dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3t9XSBMVCcsXG4gICAgbGFzdERheTogJ1vOp864zrXPgiB7fV0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbz4TOvyDPgM+Bzr/Ot86zzr/Pjc68zrXOvc6/XSBkZGRkIFt7fV0gTFQnO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICdbz4TOt869IM+Az4HOv863zrPOv8+NzrzOtc69zrddIGRkZGQgW3t9XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIGNhbGVuZGFyOiBmdW5jdGlvbiBjYWxlbmRhcihrZXksIG1vbSkge1xuICAgIHZhciBvdXRwdXQgPSB0aGlzLl9jYWxlbmRhckVsW2tleV0sXG4gICAgICAgIGhvdXJzID0gbW9tICYmIG1vbS5ob3VycygpO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3V0cHV0KSkge1xuICAgICAgb3V0cHV0ID0gb3V0cHV0LmFwcGx5KG1vbSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dC5yZXBsYWNlKCd7fScsIGhvdXJzICUgMTIgPT09IDEgPyAnz4PPhM63JyA6ICfPg8+EzrnPgicpO1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfPg861ICVzJyxcbiAgICBwYXN0OiAnJXMgz4DPgc65zr0nLFxuICAgIHM6ICfOu86vzrPOsSDOtM61z4XPhM61z4HPjM67zrXPgM+EzrEnLFxuICAgIHNzOiAnJWQgzrTOtc+Fz4TOtc+Bz4zOu861z4DPhM6xJyxcbiAgICBtOiAnzq3Ovc6xIM67zrXPgM+Ez4wnLFxuICAgIG1tOiAnJWQgzrvOtc+Az4TOrCcsXG4gICAgaDogJ868zq/OsSDPjs+BzrEnLFxuICAgIGhoOiAnJWQgz47Pgc61z4InLFxuICAgIGQ6ICfOvM6vzrEgzrzOrc+BzrEnLFxuICAgIGRkOiAnJWQgzrzOrc+BzrXPgicsXG4gICAgTTogJ86tzr3Osc+CIM68zq7Ovc6xz4InLFxuICAgIE1NOiAnJWQgzrzOrs69zrXPgicsXG4gICAgeTogJ86tzr3Osc+CIM+Hz4HPjM69zr/PgicsXG4gICAgeXk6ICclZCDPh8+Bz4zOvc65zrEnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfc63LyxcbiAgb3JkaW5hbDogJyVkzrcnLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlbi1hdScsIHtcbiAgbW9udGhzOiAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTdV9Nb19UdV9XZV9UaF9Gcl9TYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2g6bW0gQScsXG4gICAgTFRTOiAnaDptbTpzcyBBJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAnJXMgYWdvJyxcbiAgICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3M6ICclZCBzZWNvbmRzJyxcbiAgICBtOiAnYSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ2FuIGhvdXInLFxuICAgIGhoOiAnJWQgaG91cnMnLFxuICAgIGQ6ICdhIGRheScsXG4gICAgZGQ6ICclZCBkYXlzJyxcbiAgICBNOiAnYSBtb250aCcsXG4gICAgTU06ICclZCBtb250aHMnLFxuICAgIHk6ICdhIHllYXInLFxuICAgIHl5OiAnJWQgeWVhcnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VuLWNhJywge1xuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ01NTU0gRCwgWVlZWScsXG4gICAgTExMOiAnTU1NTSBELCBZWVlZIGg6bW0gQScsXG4gICAgTExMTDogJ2RkZGQsIE1NTU0gRCwgWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW4tZ2InLCB7XG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAnJXMgYWdvJyxcbiAgICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3M6ICclZCBzZWNvbmRzJyxcbiAgICBtOiAnYSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ2FuIGhvdXInLFxuICAgIGhoOiAnJWQgaG91cnMnLFxuICAgIGQ6ICdhIGRheScsXG4gICAgZGQ6ICclZCBkYXlzJyxcbiAgICBNOiAnYSBtb250aCcsXG4gICAgTU06ICclZCBtb250aHMnLFxuICAgIHk6ICdhIHllYXInLFxuICAgIHl5OiAnJWQgeWVhcnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VuLWllJywge1xuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAnJXMgYWdvJyxcbiAgICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3M6ICclZCBzZWNvbmRzJyxcbiAgICBtOiAnYSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ2FuIGhvdXInLFxuICAgIGhoOiAnJWQgaG91cnMnLFxuICAgIGQ6ICdhIGRheScsXG4gICAgZGQ6ICclZCBkYXlzJyxcbiAgICBNOiAnYSBtb250aCcsXG4gICAgTU06ICclZCBtb250aHMnLFxuICAgIHk6ICdhIHllYXInLFxuICAgIHl5OiAnJWQgeWVhcnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VuLWlsJywge1xuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW1RvZGF5IGF0XSBMVCcsXG4gICAgbmV4dERheTogJ1tUb21vcnJvdyBhdF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYXRdIExUJyxcbiAgICBsYXN0RGF5OiAnW1llc3RlcmRheSBhdF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQgW2F0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdpbiAlcycsXG4gICAgcGFzdDogJyVzIGFnbycsXG4gICAgczogJ2EgZmV3IHNlY29uZHMnLFxuICAgIHNzOiAnJWQgc2Vjb25kcycsXG4gICAgbTogJ2EgbWludXRlJyxcbiAgICBtbTogJyVkIG1pbnV0ZXMnLFxuICAgIGg6ICdhbiBob3VyJyxcbiAgICBoaDogJyVkIGhvdXJzJyxcbiAgICBkOiAnYSBkYXknLFxuICAgIGRkOiAnJWQgZGF5cycsXG4gICAgTTogJ2EgbW9udGgnLFxuICAgIE1NOiAnJWQgbW9udGhzJyxcbiAgICB5OiAnYSB5ZWFyJyxcbiAgICB5eTogJyVkIHllYXJzJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oc3R8bmR8cmR8dGgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICBvdXRwdXQgPSB+fihudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEgPyAndGgnIDogYiA9PT0gMSA/ICdzdCcgOiBiID09PSAyID8gJ25kJyA6IGIgPT09IDMgPyAncmQnIDogJ3RoJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlbi1pbicsIHtcbiAgbW9udGhzOiAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTdV9Nb19UdV9XZV9UaF9Gcl9TYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2g6bW0gQScsXG4gICAgTFRTOiAnaDptbTpzcyBBJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAnJXMgYWdvJyxcbiAgICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3M6ICclZCBzZWNvbmRzJyxcbiAgICBtOiAnYSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ2FuIGhvdXInLFxuICAgIGhoOiAnJWQgaG91cnMnLFxuICAgIGQ6ICdhIGRheScsXG4gICAgZGQ6ICclZCBkYXlzJyxcbiAgICBNOiAnYSBtb250aCcsXG4gICAgTU06ICclZCBtb250aHMnLFxuICAgIHk6ICdhIHllYXInLFxuICAgIHl5OiAnJWQgeWVhcnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VuLW56Jywge1xuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW4tc2cnLCB7XG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAnJXMgYWdvJyxcbiAgICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3M6ICclZCBzZWNvbmRzJyxcbiAgICBtOiAnYSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ2FuIGhvdXInLFxuICAgIGhoOiAnJWQgaG91cnMnLFxuICAgIGQ6ICdhIGRheScsXG4gICAgZGQ6ICclZCBkYXlzJyxcbiAgICBNOiAnYSBtb250aCcsXG4gICAgTU06ICclZCBtb250aHMnLFxuICAgIHk6ICdhIHllYXInLFxuICAgIHl5OiAnJWQgeWVhcnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VvJywge1xuICBtb250aHM6ICdqYW51YXJvX2ZlYnJ1YXJvX21hcnRvX2Fwcmlsb19tYWpvX2p1bmlvX2p1bGlvX2HFrWd1c3RvX3NlcHRlbWJyb19va3RvYnJvX25vdmVtYnJvX2RlY2VtYnJvJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFydF9hcHJfbWFqX2p1bl9qdWxfYcWtZ19zZXB0X29rdF9ub3ZfZGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ2RpbWFuxIlvX2x1bmRvX21hcmRvX21lcmtyZWRvX8S1YcWtZG9fdmVuZHJlZG9fc2FiYXRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZGltX2x1bl9tYXJkX21lcmtfxLVhxa1fdmVuX3NhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkaV9sdV9tYV9tZV/EtWFfdmVfc2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ1tsYV0gRFstYW4gZGVdIE1NTU0sIFlZWVknLFxuICAgIExMTDogJ1tsYV0gRFstYW4gZGVdIE1NTU0sIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkW25dLCBbbGFdIERbLWFuIGRlXSBNTU1NLCBZWVlZIEhIOm1tJyxcbiAgICBsbGxsOiAnZGRkLCBbbGFdIERbLWFuIGRlXSBNTU0sIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9bYXBdXFwudFxcLm0vaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PT0gJ3AnO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPiAxMSkge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAncC50Lm0uJyA6ICdQLlQuTS4nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICdhLnQubS4nIDogJ0EuVC5NLic7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSG9kaWHFrSBqZV0gTFQnLFxuICAgIG5leHREYXk6ICdbTW9yZ2HFrSBqZV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZFtuIGplXSBMVCcsXG4gICAgbGFzdERheTogJ1tIaWVyYcWtIGplXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbcGFzaW50YW5dIGRkZGRbbiBqZV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAncG9zdCAlcycsXG4gICAgcGFzdDogJ2FudGHFrSAlcycsXG4gICAgczogJ2tlbGthaiBzZWt1bmRvaicsXG4gICAgc3M6ICclZCBzZWt1bmRvaicsXG4gICAgbTogJ3VudSBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvaicsXG4gICAgaDogJ3VudSBob3JvJyxcbiAgICBoaDogJyVkIGhvcm9qJyxcbiAgICBkOiAndW51IHRhZ28nLFxuICAgIGRkOiAnJWQgdGFnb2onLFxuICAgIE06ICd1bnUgbW9uYXRvJyxcbiAgICBNTTogJyVkIG1vbmF0b2onLFxuICAgIHk6ICd1bnUgamFybycsXG4gICAgeXk6ICclZCBqYXJvaidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9YS8sXG4gIG9yZGluYWw6ICclZGEnLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbnZhciBtb250aHNTaG9ydERvdCA9ICdlbmUuX2ZlYi5fbWFyLl9hYnIuX21heS5fanVuLl9qdWwuX2Fnby5fc2VwLl9vY3QuX25vdi5fZGljLicuc3BsaXQoJ18nKSxcbiAgICBfbW9udGhzU2hvcnQgPSAnZW5lX2ZlYl9tYXJfYWJyX21heV9qdW5fanVsX2Fnb19zZXBfb2N0X25vdl9kaWMnLnNwbGl0KCdfJyksXG4gICAgbW9udGhzUGFyc2UgPSBbL15lbmUvaSwgL15mZWIvaSwgL15tYXIvaSwgL15hYnIvaSwgL15tYXkvaSwgL15qdW4vaSwgL15qdWwvaSwgL15hZ28vaSwgL15zZXAvaSwgL15vY3QvaSwgL15ub3YvaSwgL15kaWMvaV0sXG4gICAgbW9udGhzUmVnZXggPSAvXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlfGVuZVxcLj98ZmViXFwuP3xtYXJcXC4/fGFiclxcLj98bWF5XFwuP3xqdW5cXC4/fGp1bFxcLj98YWdvXFwuP3xzZXBcXC4/fG9jdFxcLj98bm92XFwuP3xkaWNcXC4/KS9pO1xuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlcy1kbycsIHtcbiAgbW9udGhzOiAnZW5lcm9fZmVicmVyb19tYXJ6b19hYnJpbF9tYXlvX2p1bmlvX2p1bGlvX2Fnb3N0b19zZXB0aWVtYnJlX29jdHVicmVfbm92aWVtYnJlX2RpY2llbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0RG90O1xuICAgIH0gZWxzZSBpZiAoLy1NTU0tLy50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHJldHVybiBfbW9udGhzU2hvcnRbbS5tb250aCgpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0RG90W20ubW9udGgoKV07XG4gICAgfVxuICB9LFxuICBtb250aHNSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1Nob3J0UmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTdHJpY3RSZWdleDogL14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZSkvaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogL14oZW5lXFwuP3xmZWJcXC4/fG1hclxcLj98YWJyXFwuP3xtYXlcXC4/fGp1blxcLj98anVsXFwuP3xhZ29cXC4/fHNlcFxcLj98b2N0XFwuP3xub3ZcXC4/fGRpY1xcLj8pL2ksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHdlZWtkYXlzOiAnZG9taW5nb19sdW5lc19tYXJ0ZXNfbWnDqXJjb2xlc19qdWV2ZXNfdmllcm5lc19zw6FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZG9tLl9sdW4uX21hci5fbWnDqS5fanVlLl92aWUuX3PDoWIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RvX2x1X21hX21pX2p1X3ZpX3PDoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWScsXG4gICAgTExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQScsXG4gICAgTExMTDogJ2RkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogZnVuY3Rpb24gc2FtZURheSgpIHtcbiAgICAgIHJldHVybiAnW2hveSBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBuZXh0RGF5OiBmdW5jdGlvbiBuZXh0RGF5KCkge1xuICAgICAgcmV0dXJuICdbbWHDsWFuYSBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ2RkZGQgW2EgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3REYXk6IGZ1bmN0aW9uIGxhc3REYXkoKSB7XG4gICAgICByZXR1cm4gJ1theWVyIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiAnW2VsXSBkZGRkIFtwYXNhZG8gYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdlbiAlcycsXG4gICAgcGFzdDogJ2hhY2UgJXMnLFxuICAgIHM6ICd1bm9zIHNlZ3VuZG9zJyxcbiAgICBzczogJyVkIHNlZ3VuZG9zJyxcbiAgICBtOiAndW4gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0b3MnLFxuICAgIGg6ICd1bmEgaG9yYScsXG4gICAgaGg6ICclZCBob3JhcycsXG4gICAgZDogJ3VuIGTDrWEnLFxuICAgIGRkOiAnJWQgZMOtYXMnLFxuICAgIHc6ICd1bmEgc2VtYW5hJyxcbiAgICB3dzogJyVkIHNlbWFuYXMnLFxuICAgIE06ICd1biBtZXMnLFxuICAgIE1NOiAnJWQgbWVzZXMnLFxuICAgIHk6ICd1biBhw7FvJyxcbiAgICB5eTogJyVkIGHDsW9zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3Cui8sXG4gIG9yZGluYWw6ICclZMK6JyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG52YXIgbW9udGhzU2hvcnREb3QgPSAnZW5lLl9mZWIuX21hci5fYWJyLl9tYXkuX2p1bi5fanVsLl9hZ28uX3NlcC5fb2N0Ll9ub3YuX2RpYy4nLnNwbGl0KCdfJyksXG4gICAgX21vbnRoc1Nob3J0ID0gJ2VuZV9mZWJfbWFyX2Ficl9tYXlfanVuX2p1bF9hZ29fc2VwX29jdF9ub3ZfZGljJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1BhcnNlID0gWy9eZW5lL2ksIC9eZmViL2ksIC9ebWFyL2ksIC9eYWJyL2ksIC9ebWF5L2ksIC9eanVuL2ksIC9eanVsL2ksIC9eYWdvL2ksIC9ec2VwL2ksIC9eb2N0L2ksIC9ebm92L2ksIC9eZGljL2ldLFxuICAgIG1vbnRoc1JlZ2V4ID0gL14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZXxlbmVcXC4/fGZlYlxcLj98bWFyXFwuP3xhYnJcXC4/fG1heVxcLj98anVuXFwuP3xqdWxcXC4/fGFnb1xcLj98c2VwXFwuP3xvY3RcXC4/fG5vdlxcLj98ZGljXFwuPykvaTtcblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZXMtbXgnLCB7XG4gIG1vbnRoczogJ2VuZXJvX2ZlYnJlcm9fbWFyem9fYWJyaWxfbWF5b19qdW5pb19qdWxpb19hZ29zdG9fc2VwdGllbWJyZV9vY3R1YnJlX25vdmllbWJyZV9kaWNpZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiBmdW5jdGlvbiBtb250aHNTaG9ydChtLCBmb3JtYXQpIHtcbiAgICBpZiAoIW0pIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydERvdDtcbiAgICB9IGVsc2UgaWYgKC8tTU1NLS8udGVzdChmb3JtYXQpKSB7XG4gICAgICByZXR1cm4gX21vbnRoc1Nob3J0W20ubW9udGgoKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydERvdFttLm1vbnRoKCldO1xuICAgIH1cbiAgfSxcbiAgbW9udGhzUmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTaG9ydFJlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmUpL2ksXG4gIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6IC9eKGVuZVxcLj98ZmViXFwuP3xtYXJcXC4/fGFiclxcLj98bWF5XFwuP3xqdW5cXC4/fGp1bFxcLj98YWdvXFwuP3xzZXBcXC4/fG9jdFxcLj98bm92XFwuP3xkaWNcXC4/KS9pLFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICB3ZWVrZGF5czogJ2RvbWluZ29fbHVuZXNfbWFydGVzX21pw6lyY29sZXNfanVldmVzX3ZpZXJuZXNfc8OhYmFkbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RvbS5fbHVuLl9tYXIuX21pw6kuX2p1ZS5fdmllLl9zw6FiLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkb19sdV9tYV9taV9qdV92aV9zw6EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWScsXG4gICAgTExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBmdW5jdGlvbiBzYW1lRGF5KCkge1xuICAgICAgcmV0dXJuICdbaG95IGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHREYXk6IGZ1bmN0aW9uIG5leHREYXkoKSB7XG4gICAgICByZXR1cm4gJ1ttYcOxYW5hIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnZGRkZCBbYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdERheTogZnVuY3Rpb24gbGFzdERheSgpIHtcbiAgICAgIHJldHVybiAnW2F5ZXIgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuICdbZWxdIGRkZGQgW3Bhc2FkbyBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2VuICVzJyxcbiAgICBwYXN0OiAnaGFjZSAlcycsXG4gICAgczogJ3Vub3Mgc2VndW5kb3MnLFxuICAgIHNzOiAnJWQgc2VndW5kb3MnLFxuICAgIG06ICd1biBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvcycsXG4gICAgaDogJ3VuYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmFzJyxcbiAgICBkOiAndW4gZMOtYScsXG4gICAgZGQ6ICclZCBkw61hcycsXG4gICAgdzogJ3VuYSBzZW1hbmEnLFxuICAgIHd3OiAnJWQgc2VtYW5hcycsXG4gICAgTTogJ3VuIG1lcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VuIGHDsW8nLFxuICAgIHl5OiAnJWQgYcOxb3MnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNFxuICB9LFxuICBpbnZhbGlkRGF0ZTogJ0ZlY2hhIGludsOhbGlkYSdcbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxudmFyIG1vbnRoc1Nob3J0RG90ID0gJ2VuZS5fZmViLl9tYXIuX2Fici5fbWF5Ll9qdW4uX2p1bC5fYWdvLl9zZXAuX29jdC5fbm92Ll9kaWMuJy5zcGxpdCgnXycpLFxuICAgIF9tb250aHNTaG9ydCA9ICdlbmVfZmViX21hcl9hYnJfbWF5X2p1bl9qdWxfYWdvX3NlcF9vY3Rfbm92X2RpYycuc3BsaXQoJ18nKSxcbiAgICBtb250aHNQYXJzZSA9IFsvXmVuZS9pLCAvXmZlYi9pLCAvXm1hci9pLCAvXmFici9pLCAvXm1heS9pLCAvXmp1bi9pLCAvXmp1bC9pLCAvXmFnby9pLCAvXnNlcC9pLCAvXm9jdC9pLCAvXm5vdi9pLCAvXmRpYy9pXSxcbiAgICBtb250aHNSZWdleCA9IC9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmV8ZW5lXFwuP3xmZWJcXC4/fG1hclxcLj98YWJyXFwuP3xtYXlcXC4/fGp1blxcLj98anVsXFwuP3xhZ29cXC4/fHNlcFxcLj98b2N0XFwuP3xub3ZcXC4/fGRpY1xcLj8pL2k7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VzLXVzJywge1xuICBtb250aHM6ICdlbmVyb19mZWJyZXJvX21hcnpvX2FicmlsX21heW9fanVuaW9fanVsaW9fYWdvc3RvX3NlcHRpZW1icmVfb2N0dWJyZV9ub3ZpZW1icmVfZGljaWVtYnJlJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnREb3Q7XG4gICAgfSBlbHNlIGlmICgvLU1NTS0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIF9tb250aHNTaG9ydFttLm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnREb3RbbS5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1JlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU2hvcnRSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXihlbmVcXC4/fGZlYlxcLj98bWFyXFwuP3xhYnJcXC4/fG1heVxcLj98anVuXFwuP3xqdWxcXC4/fGFnb1xcLj98c2VwXFwuP3xvY3RcXC4/fG5vdlxcLj98ZGljXFwuPykvaSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICdkb21pbmdvX2x1bmVzX21hcnRlc19tacOpcmNvbGVzX2p1ZXZlc192aWVybmVzX3PDoWJhZG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkb20uX2x1bi5fbWFyLl9tacOpLl9qdWUuX3ZpZS5fc8OhYi4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnZG9fbHVfbWFfbWlfanVfdmlfc8OhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdoOm1tIEEnLFxuICAgIExUUzogJ2g6bW06c3MgQScsXG4gICAgTDogJ01NL0REL1lZWVknLFxuICAgIExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBMTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBmdW5jdGlvbiBzYW1lRGF5KCkge1xuICAgICAgcmV0dXJuICdbaG95IGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHREYXk6IGZ1bmN0aW9uIG5leHREYXkoKSB7XG4gICAgICByZXR1cm4gJ1ttYcOxYW5hIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnZGRkZCBbYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdERheTogZnVuY3Rpb24gbGFzdERheSgpIHtcbiAgICAgIHJldHVybiAnW2F5ZXIgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuICdbZWxdIGRkZGQgW3Bhc2FkbyBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2VuICVzJyxcbiAgICBwYXN0OiAnaGFjZSAlcycsXG4gICAgczogJ3Vub3Mgc2VndW5kb3MnLFxuICAgIHNzOiAnJWQgc2VndW5kb3MnLFxuICAgIG06ICd1biBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvcycsXG4gICAgaDogJ3VuYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmFzJyxcbiAgICBkOiAndW4gZMOtYScsXG4gICAgZGQ6ICclZCBkw61hcycsXG4gICAgdzogJ3VuYSBzZW1hbmEnLFxuICAgIHd3OiAnJWQgc2VtYW5hcycsXG4gICAgTTogJ3VuIG1lcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VuIGHDsW8nLFxuICAgIHl5OiAnJWQgYcOxb3MnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbnZhciBtb250aHNTaG9ydERvdCA9ICdlbmUuX2ZlYi5fbWFyLl9hYnIuX21heS5fanVuLl9qdWwuX2Fnby5fc2VwLl9vY3QuX25vdi5fZGljLicuc3BsaXQoJ18nKSxcbiAgICBfbW9udGhzU2hvcnQgPSAnZW5lX2ZlYl9tYXJfYWJyX21heV9qdW5fanVsX2Fnb19zZXBfb2N0X25vdl9kaWMnLnNwbGl0KCdfJyksXG4gICAgbW9udGhzUGFyc2UgPSBbL15lbmUvaSwgL15mZWIvaSwgL15tYXIvaSwgL15hYnIvaSwgL15tYXkvaSwgL15qdW4vaSwgL15qdWwvaSwgL15hZ28vaSwgL15zZXAvaSwgL15vY3QvaSwgL15ub3YvaSwgL15kaWMvaV0sXG4gICAgbW9udGhzUmVnZXggPSAvXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlfGVuZVxcLj98ZmViXFwuP3xtYXJcXC4/fGFiclxcLj98bWF5XFwuP3xqdW5cXC4/fGp1bFxcLj98YWdvXFwuP3xzZXBcXC4/fG9jdFxcLj98bm92XFwuP3xkaWNcXC4/KS9pO1xuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlcycsIHtcbiAgbW9udGhzOiAnZW5lcm9fZmVicmVyb19tYXJ6b19hYnJpbF9tYXlvX2p1bmlvX2p1bGlvX2Fnb3N0b19zZXB0aWVtYnJlX29jdHVicmVfbm92aWVtYnJlX2RpY2llbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0RG90O1xuICAgIH0gZWxzZSBpZiAoLy1NTU0tLy50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHJldHVybiBfbW9udGhzU2hvcnRbbS5tb250aCgpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0RG90W20ubW9udGgoKV07XG4gICAgfVxuICB9LFxuICBtb250aHNSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1Nob3J0UmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTdHJpY3RSZWdleDogL14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZSkvaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogL14oZW5lXFwuP3xmZWJcXC4/fG1hclxcLj98YWJyXFwuP3xtYXlcXC4/fGp1blxcLj98anVsXFwuP3xhZ29cXC4/fHNlcFxcLj98b2N0XFwuP3xub3ZcXC4/fGRpY1xcLj8pL2ksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHdlZWtkYXlzOiAnZG9taW5nb19sdW5lc19tYXJ0ZXNfbWnDqXJjb2xlc19qdWV2ZXNfdmllcm5lc19zw6FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZG9tLl9sdW4uX21hci5fbWnDqS5fanVlLl92aWUuX3PDoWIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RvX2x1X21hX21pX2p1X3ZpX3PDoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBMTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6IGZ1bmN0aW9uIHNhbWVEYXkoKSB7XG4gICAgICByZXR1cm4gJ1tob3kgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dERheTogZnVuY3Rpb24gbmV4dERheSgpIHtcbiAgICAgIHJldHVybiAnW21hw7FhbmEgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuICdkZGRkIFthIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0RGF5OiBmdW5jdGlvbiBsYXN0RGF5KCkge1xuICAgICAgcmV0dXJuICdbYXllciBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ1tlbF0gZGRkZCBbcGFzYWRvIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZW4gJXMnLFxuICAgIHBhc3Q6ICdoYWNlICVzJyxcbiAgICBzOiAndW5vcyBzZWd1bmRvcycsXG4gICAgc3M6ICclZCBzZWd1bmRvcycsXG4gICAgbTogJ3VuIG1pbnV0bycsXG4gICAgbW06ICclZCBtaW51dG9zJyxcbiAgICBoOiAndW5hIGhvcmEnLFxuICAgIGhoOiAnJWQgaG9yYXMnLFxuICAgIGQ6ICd1biBkw61hJyxcbiAgICBkZDogJyVkIGTDrWFzJyxcbiAgICB3OiAndW5hIHNlbWFuYScsXG4gICAgd3c6ICclZCBzZW1hbmFzJyxcbiAgICBNOiAndW4gbWVzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW4gYcOxbycsXG4gICAgeXk6ICclZCBhw7FvcydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH0sXG4gIGludmFsaWREYXRlOiAnRmVjaGEgaW52w6FsaWRhJ1xufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIHM6IFsnbcO1bmUgc2VrdW5kaScsICdtw7VuaSBzZWt1bmQnLCAncGFhciBzZWt1bmRpdCddLFxuICAgIHNzOiBbbnVtYmVyICsgJ3Nla3VuZGknLCBudW1iZXIgKyAnc2VrdW5kaXQnXSxcbiAgICBtOiBbJ8O8aGUgbWludXRpJywgJ8O8a3MgbWludXQnXSxcbiAgICBtbTogW251bWJlciArICcgbWludXRpJywgbnVtYmVyICsgJyBtaW51dGl0J10sXG4gICAgaDogWyfDvGhlIHR1bm5pJywgJ3R1bmQgYWVnYScsICfDvGtzIHR1bmQnXSxcbiAgICBoaDogW251bWJlciArICcgdHVubmknLCBudW1iZXIgKyAnIHR1bmRpJ10sXG4gICAgZDogWyfDvGhlIHDDpGV2YScsICfDvGtzIHDDpGV2J10sXG4gICAgTTogWydrdXUgYWphJywgJ2t1dSBhZWdhJywgJ8O8a3Mga3V1J10sXG4gICAgTU06IFtudW1iZXIgKyAnIGt1dScsIG51bWJlciArICcga3V1ZCddLFxuICAgIHk6IFsnw7xoZSBhYXN0YScsICdhYXN0YScsICfDvGtzIGFhc3RhJ10sXG4gICAgeXk6IFtudW1iZXIgKyAnIGFhc3RhJywgbnVtYmVyICsgJyBhYXN0YXQnXVxuICB9O1xuXG4gIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgcmV0dXJuIGZvcm1hdFtrZXldWzJdID8gZm9ybWF0W2tleV1bMl0gOiBmb3JtYXRba2V5XVsxXTtcbiAgfVxuXG4gIHJldHVybiBpc0Z1dHVyZSA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2V0Jywge1xuICBtb250aHM6ICdqYWFudWFyX3ZlZWJydWFyX23DpHJ0c19hcHJpbGxfbWFpX2p1dW5pX2p1dWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b29iZXJfbm92ZW1iZXJfZGV0c2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phYW5fdmVlYnJfbcOkcnRzX2Fwcl9tYWlfanV1bmlfanV1bGlfYXVnX3NlcHRfb2t0X25vdl9kZXRzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ3DDvGhhcMOkZXZfZXNtYXNww6Rldl90ZWlzaXDDpGV2X2tvbG1hcMOkZXZfbmVsamFww6Rldl9yZWVkZV9sYXVww6Rldicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1BfRV9UX0tfTl9SX0wnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnUF9FX1RfS19OX1JfTCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW1TDpG5hLF0gTFQnLFxuICAgIG5leHREYXk6ICdbSG9tbWUsXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbSsOkcmdtaW5lXSBkZGRkIExUJyxcbiAgICBsYXN0RGF5OiAnW0VpbGUsXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbRWVsbWluZV0gZGRkZCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBww6RyYXN0JyxcbiAgICBwYXN0OiAnJXMgdGFnYXNpJyxcbiAgICBzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHNzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiAnJWQgcMOkZXZhJyxcbiAgICBNOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE1NOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHk6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeXk6IHByb2Nlc3NSZWxhdGl2ZVRpbWVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2V1Jywge1xuICBtb250aHM6ICd1cnRhcnJpbGFfb3RzYWlsYV9tYXJ0eG9hX2FwaXJpbGFfbWFpYXR6YV9la2FpbmFfdXp0YWlsYV9hYnV6dHVhX2lyYWlsYV91cnJpYV9hemFyb2FfYWJlbmR1YScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICd1cnQuX290cy5fbWFyLl9hcGkuX21haS5fZWthLl91enQuX2FidS5faXJhLl91cnIuX2F6YS5fYWJlLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdpZ2FuZGVhX2FzdGVsZWhlbmFfYXN0ZWFydGVhX2FzdGVhemtlbmFfb3N0ZWd1bmFfb3N0aXJhbGFfbGFydW5iYXRhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnaWcuX2FsLl9hci5fYXouX29nLl9vbC5fbHIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2lnX2FsX2FyX2F6X29nX29sX2xyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ1lZWVlba29dIE1NTU1bcmVuXSBEW2FdJyxcbiAgICBMTEw6ICdZWVlZW2tvXSBNTU1NW3Jlbl0gRFthXSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIFlZWVlba29dIE1NTU1bcmVuXSBEW2FdIEhIOm1tJyxcbiAgICBsOiAnWVlZWS1NLUQnLFxuICAgIGxsOiAnWVlZWVtrb10gTU1NIERbYV0nLFxuICAgIGxsbDogJ1lZWVlba29dIE1NTSBEW2FdIEhIOm1tJyxcbiAgICBsbGxsOiAnZGRkLCBZWVlZW2tvXSBNTU0gRFthXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2dhdXJdIExUW2V0YW5dJyxcbiAgICBuZXh0RGF5OiAnW2JpaGFyXSBMVFtldGFuXScsXG4gICAgbmV4dFdlZWs6ICdkZGRkIExUW2V0YW5dJyxcbiAgICBsYXN0RGF5OiAnW2F0em9dIExUW2V0YW5dJyxcbiAgICBsYXN0V2VlazogJ1thdXJyZWtvXSBkZGRkIExUW2V0YW5dJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIGJhcnJ1JyxcbiAgICBwYXN0OiAnZHVlbGEgJXMnLFxuICAgIHM6ICdzZWd1bmRvIGJhdHp1aycsXG4gICAgc3M6ICclZCBzZWd1bmRvJyxcbiAgICBtOiAnbWludXR1IGJhdCcsXG4gICAgbW06ICclZCBtaW51dHUnLFxuICAgIGg6ICdvcmR1IGJhdCcsXG4gICAgaGg6ICclZCBvcmR1JyxcbiAgICBkOiAnZWd1biBiYXQnLFxuICAgIGRkOiAnJWQgZWd1bicsXG4gICAgTTogJ2hpbGFiZXRlIGJhdCcsXG4gICAgTU06ICclZCBoaWxhYmV0ZScsXG4gICAgeTogJ3VydGUgYmF0JyxcbiAgICB5eTogJyVkIHVydGUnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn27EnLFxuICAyOiAn27InLFxuICAzOiAn27MnLFxuICA0OiAn27QnLFxuICA1OiAn27UnLFxuICA2OiAn27YnLFxuICA3OiAn27cnLFxuICA4OiAn27gnLFxuICA5OiAn27knLFxuICAwOiAn27AnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ9uxJzogJzEnLFxuICAn27InOiAnMicsXG4gICfbsyc6ICczJyxcbiAgJ9u0JzogJzQnLFxuICAn27UnOiAnNScsXG4gICfbtic6ICc2JyxcbiAgJ9u3JzogJzcnLFxuICAn27gnOiAnOCcsXG4gICfbuSc6ICc5JyxcbiAgJ9uwJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZmEnLCB7XG4gIG1vbnRoczogJ9qY2KfZhtmI24zZh1/ZgdmI2LHbjNmHX9mF2KfYsdizX9ii2YjYsduM2YRf2YXZh1/amNmI2KbZhl/amNmI2KbbjNmHX9in2YjYql/Ys9m+2KrYp9mF2KjYsV/Yp9qp2KrYqNixX9mG2YjYp9mF2KjYsV/Yr9iz2KfZhdio2LEnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn2pjYp9mG2YjbjNmHX9mB2YjYsduM2Ydf2YXYp9ix2LNf2KLZiNix24zZhF/ZhdmHX9qY2YjYptmGX9qY2YjYptuM2Ydf2KfZiNiqX9iz2b7Yqtin2YXYqNixX9in2qnYqtio2LFf2YbZiNin2YXYqNixX9iv2LPYp9mF2KjYsScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6IFwiXFx1MDZDQ1xcdTA2QTlcXHUyMDBDXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjJGXFx1MDY0OFxcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdfXFx1MDYzM1xcdTA2NDdcXHUyMDBDXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjg2XFx1MDY0N1xcdTA2MjdcXHUwNjMxXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjdFXFx1MDY0NlxcdTA2MkNcXHUyMDBDXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjJDXFx1MDY0NVxcdTA2MzlcXHUwNjQ3X1xcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdcIi5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiBcIlxcdTA2Q0NcXHUwNkE5XFx1MjAwQ1xcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdfXFx1MDYyRlxcdTA2NDhcXHUwNjM0XFx1MDY0NlxcdTA2MjhcXHUwNjQ3X1xcdTA2MzNcXHUwNjQ3XFx1MjAwQ1xcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdfXFx1MDY4NlxcdTA2NDdcXHUwNjI3XFx1MDYzMVxcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdfXFx1MDY3RVxcdTA2NDZcXHUwNjJDXFx1MjAwQ1xcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdfXFx1MDYyQ1xcdTA2NDVcXHUwNjM5XFx1MDY0N19cXHUwNjM0XFx1MDY0NlxcdTA2MjhcXHUwNjQ3XCIuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfbjF/Yr1/Ys1/ahl/Zvl/YrF/YtCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9mC2KjZhCDYp9iyINi42YfYsXzYqNi52K8g2KfYsiDYuNmH2LEvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIC/YqNi52K8g2KfYsiDYuNmH2LEvLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfZgtio2YQg2KfYsiDYuNmH2LEnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ9io2LnYryDYp9iyINi42YfYsSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfZhdix2YjYsiDYs9in2LnYql0gTFQnLFxuICAgIG5leHREYXk6ICdb2YHYsdiv2Kcg2LPYp9i52KpdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9iz2KfYudiqXSBMVCcsXG4gICAgbGFzdERheTogJ1vYr9uM2LHZiNiyINiz2KfYudiqXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvZvtuM2LRdIFvYs9in2LnYql0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2K/YsSAlcycsXG4gICAgcGFzdDogJyVzINm+24zYtCcsXG4gICAgczogJ9qG2YbYryDYq9in2YbbjNmHJyxcbiAgICBzczogJyVkINir2KfZhtuM2YcnLFxuICAgIG06ICfbjNqpINiv2YLbjNmC2YcnLFxuICAgIG1tOiAnJWQg2K/ZgtuM2YLZhycsXG4gICAgaDogJ9uM2qkg2LPYp9i52KonLFxuICAgIGhoOiAnJWQg2LPYp9i52KonLFxuICAgIGQ6ICfbjNqpINix2YjYsicsXG4gICAgZGQ6ICclZCDYsdmI2LInLFxuICAgIE06ICfbjNqpINmF2KfZhycsXG4gICAgTU06ICclZCDZhdin2YcnLFxuICAgIHk6ICfbjNqpINiz2KfZhCcsXG4gICAgeXk6ICclZCDYs9in2YQnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vbsC3buV0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KS5yZXBsYWNlKC/YjC9nLCAnLCcpO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSkucmVwbGFjZSgvLC9nLCAn2IwnKTtcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ92YUvLFxuICBvcmRpbmFsOiAnJWTZhScsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDYsXG4gICAgZG95OiAxMlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbnVtYmVyc1Bhc3QgPSAnbm9sbGEgeWtzaSBrYWtzaSBrb2xtZSBuZWxqw6Qgdmlpc2kga3V1c2kgc2VpdHNlbcOkbiBrYWhkZWtzYW4geWhkZWtzw6RuJy5zcGxpdCgnICcpLFxuICAgIG51bWJlcnNGdXR1cmUgPSBbJ25vbGxhJywgJ3loZGVuJywgJ2thaGRlbicsICdrb2xtZW4nLCAnbmVsasOkbicsICd2aWlkZW4nLCAna3V1ZGVuJywgbnVtYmVyc1Bhc3RbN10sIG51bWJlcnNQYXN0WzhdLCBudW1iZXJzUGFzdFs5XV07XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gaXNGdXR1cmUgPyAnbXV1dGFtYW4gc2VrdW5uaW4nIDogJ211dXRhbWEgc2VrdW50aSc7XG5cbiAgICBjYXNlICdzcyc6XG4gICAgICByZXN1bHQgPSBpc0Z1dHVyZSA/ICdzZWt1bm5pbicgOiAnc2VrdW50aWEnO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBpc0Z1dHVyZSA/ICdtaW51dXRpbicgOiAnbWludXV0dGknO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgcmVzdWx0ID0gaXNGdXR1cmUgPyAnbWludXV0aW4nIDogJ21pbnV1dHRpYSc7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIGlzRnV0dXJlID8gJ3R1bm5pbicgOiAndHVudGknO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgcmVzdWx0ID0gaXNGdXR1cmUgPyAndHVubmluJyA6ICd0dW50aWEnO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBpc0Z1dHVyZSA/ICdww6RpdsOkbicgOiAncMOkaXbDpCc7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICByZXN1bHQgPSBpc0Z1dHVyZSA/ICdww6RpdsOkbicgOiAncMOkaXbDpMOkJztcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnTSc6XG4gICAgICByZXR1cm4gaXNGdXR1cmUgPyAna3V1a2F1ZGVuJyA6ICdrdXVrYXVzaSc7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICByZXN1bHQgPSBpc0Z1dHVyZSA/ICdrdXVrYXVkZW4nIDogJ2t1dWthdXR0YSc7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIGlzRnV0dXJlID8gJ3Z1b2RlbicgOiAndnVvc2knO1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgcmVzdWx0ID0gaXNGdXR1cmUgPyAndnVvZGVuJyA6ICd2dW90dGEnO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXN1bHQgPSB2ZXJiYWxOdW1iZXIobnVtYmVyLCBpc0Z1dHVyZSkgKyAnICcgKyByZXN1bHQ7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHZlcmJhbE51bWJlcihudW1iZXIsIGlzRnV0dXJlKSB7XG4gIHJldHVybiBudW1iZXIgPCAxMCA/IGlzRnV0dXJlID8gbnVtYmVyc0Z1dHVyZVtudW1iZXJdIDogbnVtYmVyc1Bhc3RbbnVtYmVyXSA6IG51bWJlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZmknLCB7XG4gIG1vbnRoczogJ3RhbW1pa3V1X2hlbG1pa3V1X21hYWxpc2t1dV9odWh0aWt1dV90b3Vrb2t1dV9rZXPDpGt1dV9oZWluw6RrdXVfZWxva3V1X3N5eXNrdXVfbG9rYWt1dV9tYXJyYXNrdXVfam91bHVrdXUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAndGFtbWlfaGVsbWlfbWFhbGlzX2h1aHRpX3RvdWtvX2tlc8OkX2hlaW7DpF9lbG9fc3l5c19sb2thX21hcnJhc19qb3VsdScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdzdW5udW50YWlfbWFhbmFudGFpX3RpaXN0YWlfa2Vza2l2aWlra29fdG9yc3RhaV9wZXJqYW50YWlfbGF1YW50YWknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdzdV9tYV90aV9rZV90b19wZV9sYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdzdV9tYV90aV9rZV90b19wZV9sYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hILm1tJyxcbiAgICBMVFM6ICdISC5tbS5zcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRG8gTU1NTVt0YV0gWVlZWScsXG4gICAgTExMOiAnRG8gTU1NTVt0YV0gWVlZWSwgW2tsb10gSEgubW0nLFxuICAgIExMTEw6ICdkZGRkLCBEbyBNTU1NW3RhXSBZWVlZLCBba2xvXSBISC5tbScsXG4gICAgbDogJ0QuTS5ZWVlZJyxcbiAgICBsbDogJ0RvIE1NTSBZWVlZJyxcbiAgICBsbGw6ICdEbyBNTU0gWVlZWSwgW2tsb10gSEgubW0nLFxuICAgIGxsbGw6ICdkZGQsIERvIE1NTSBZWVlZLCBba2xvXSBISC5tbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW3TDpG7DpMOkbl0gW2tsb10gTFQnLFxuICAgIG5leHREYXk6ICdbaHVvbWVubmFdIFtrbG9dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2tsb10gTFQnLFxuICAgIGxhc3REYXk6ICdbZWlsZW5dIFtrbG9dIExUJyxcbiAgICBsYXN0V2VlazogJ1t2aWltZV0gZGRkZFtuYV0gW2tsb10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgcMOkw6RzdMOkJyxcbiAgICBwYXN0OiAnJXMgc2l0dGVuJyxcbiAgICBzOiB0cmFuc2xhdGUsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiB0cmFuc2xhdGUsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiB0cmFuc2xhdGUsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiB0cmFuc2xhdGUsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZmlsJywge1xuICBtb250aHM6ICdFbmVyb19QZWJyZXJvX01hcnNvX0FicmlsX01heW9fSHVueW9fSHVseW9fQWdvc3RvX1NldHllbWJyZV9Pa3R1YnJlX05vYnllbWJyZV9EaXN5ZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnRW5lX1BlYl9NYXJfQWJyX01heV9IdW5fSHVsX0Fnb19TZXRfT2t0X05vYl9EaXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnTGluZ2dvX0x1bmVzX01hcnRlc19NaXllcmt1bGVzX0h1d2ViZXNfQml5ZXJuZXNfU2FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnTGluX0x1bl9NYXJfTWl5X0h1d19CaXlfU2FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ0xpX0x1X01hX01pX0h1X0JpX1NhYicuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ01NL0QvWVlZWScsXG4gICAgTEw6ICdNTU1NIEQsIFlZWVknLFxuICAgIExMTDogJ01NTU0gRCwgWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIE1NTU0gREQsIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ0xUIFtuZ2F5b25nIGFyYXddJyxcbiAgICBuZXh0RGF5OiAnW0J1a2FzIG5nXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdMVCBbc2Egc3VzdW5vZCBuYV0gZGRkZCcsXG4gICAgbGFzdERheTogJ0xUIFtrYWhhcG9uXScsXG4gICAgbGFzdFdlZWs6ICdMVCBbbm9vbmcgbmFrYXJhYW5nXSBkZGRkJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3NhIGxvb2IgbmcgJXMnLFxuICAgIHBhc3Q6ICclcyBhbmcgbmFrYWxpcGFzJyxcbiAgICBzOiAnaWxhbmcgc2VndW5kbycsXG4gICAgc3M6ICclZCBzZWd1bmRvJyxcbiAgICBtOiAnaXNhbmcgbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0bycsXG4gICAgaDogJ2lzYW5nIG9yYXMnLFxuICAgIGhoOiAnJWQgb3JhcycsXG4gICAgZDogJ2lzYW5nIGFyYXcnLFxuICAgIGRkOiAnJWQgYXJhdycsXG4gICAgTTogJ2lzYW5nIGJ1d2FuJyxcbiAgICBNTTogJyVkIGJ1d2FuJyxcbiAgICB5OiAnaXNhbmcgdGFvbicsXG4gICAgeXk6ICclZCB0YW9uJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0vLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2ZvJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJzX2FwcsOtbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW5fZmViX21hcl9hcHJfbWFpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2Rlcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdzdW5udWRhZ3VyX23DoW5hZGFndXJfdMO9c2RhZ3VyX21pa3VkYWd1cl9ow7NzZGFndXJfZnLDrWdnamFkYWd1cl9sZXlnYXJkYWd1cicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3N1bl9tw6FuX3TDvXNfbWlrX2jDs3NfZnLDrV9sZXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnc3VfbcOhX3TDvV9taV9ow7NfZnJfbGUnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRC4gTU1NTSwgWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW8ONIGRhZyBrbC5dIExUJyxcbiAgICBuZXh0RGF5OiAnW8ONIG1vcmdpbiBrbC5dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2tsLl0gTFQnLFxuICAgIGxhc3REYXk6ICdbw40gZ2rDoXIga2wuXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbc8Otw7BzdHVdIGRkZGQgW2tsXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd1bSAlcycsXG4gICAgcGFzdDogJyVzIHPDrcOwYW5pJyxcbiAgICBzOiAnZsOhIHNla3VuZCcsXG4gICAgc3M6ICclZCBzZWt1bmRpcicsXG4gICAgbTogJ2VpbiBtaW51dHR1cicsXG4gICAgbW06ICclZCBtaW51dHRpcicsXG4gICAgaDogJ2VpbiB0w61taScsXG4gICAgaGg6ICclZCB0w61tYXInLFxuICAgIGQ6ICdlaW4gZGFndXInLFxuICAgIGRkOiAnJWQgZGFnYXInLFxuICAgIE06ICdlaW4gbcOhbmHDsHVyJyxcbiAgICBNTTogJyVkIG3DoW5hw7BpcicsXG4gICAgeTogJ2VpdHQgw6FyJyxcbiAgICB5eTogJyVkIMOhcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2ZyLWNhJywge1xuICBtb250aHM6ICdqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnZGltYW5jaGVfbHVuZGlfbWFyZGlfbWVyY3JlZGlfamV1ZGlfdmVuZHJlZGlfc2FtZWRpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZGltLl9sdW4uX21hci5fbWVyLl9qZXUuX3Zlbi5fc2FtLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkaV9sdV9tYV9tZV9qZV92ZV9zYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS1NTS1ERCcsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbQXVqb3VyZOKAmWh1aSDDoF0gTFQnLFxuICAgIG5leHREYXk6ICdbRGVtYWluIMOgXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvDoF0gTFQnLFxuICAgIGxhc3REYXk6ICdbSGllciDDoF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbZGVybmllciDDoF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZGFucyAlcycsXG4gICAgcGFzdDogJ2lsIHkgYSAlcycsXG4gICAgczogJ3F1ZWxxdWVzIHNlY29uZGVzJyxcbiAgICBzczogJyVkIHNlY29uZGVzJyxcbiAgICBtOiAndW5lIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAndW5lIGhldXJlJyxcbiAgICBoaDogJyVkIGhldXJlcycsXG4gICAgZDogJ3VuIGpvdXInLFxuICAgIGRkOiAnJWQgam91cnMnLFxuICAgIE06ICd1biBtb2lzJyxcbiAgICBNTTogJyVkIG1vaXMnLFxuICAgIHk6ICd1biBhbicsXG4gICAgeXk6ICclZCBhbnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShlcnxlKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnUSc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAnZXInIDogJ2UnKTtcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAncmUnIDogJ2UnKTtcbiAgICB9XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2ZyLWNoJywge1xuICBtb250aHM6ICdqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnZGltYW5jaGVfbHVuZGlfbWFyZGlfbWVyY3JlZGlfamV1ZGlfdmVuZHJlZGlfc2FtZWRpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZGltLl9sdW4uX21hci5fbWVyLl9qZXUuX3Zlbi5fc2FtLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkaV9sdV9tYV9tZV9qZV92ZV9zYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbQXVqb3VyZOKAmWh1aSDDoF0gTFQnLFxuICAgIG5leHREYXk6ICdbRGVtYWluIMOgXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvDoF0gTFQnLFxuICAgIGxhc3REYXk6ICdbSGllciDDoF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbZGVybmllciDDoF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZGFucyAlcycsXG4gICAgcGFzdDogJ2lsIHkgYSAlcycsXG4gICAgczogJ3F1ZWxxdWVzIHNlY29uZGVzJyxcbiAgICBzczogJyVkIHNlY29uZGVzJyxcbiAgICBtOiAndW5lIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAndW5lIGhldXJlJyxcbiAgICBoaDogJyVkIGhldXJlcycsXG4gICAgZDogJ3VuIGpvdXInLFxuICAgIGRkOiAnJWQgam91cnMnLFxuICAgIE06ICd1biBtb2lzJyxcbiAgICBNTTogJyVkIG1vaXMnLFxuICAgIHk6ICd1biBhbicsXG4gICAgeXk6ICclZCBhbnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShlcnxlKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnUSc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAnZXInIDogJ2UnKTtcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAncmUnIDogJ2UnKTtcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHNTdHJpY3RSZWdleCA9IC9eKGphbnZpZXJ8ZsOpdnJpZXJ8bWFyc3xhdnJpbHxtYWl8anVpbnxqdWlsbGV0fGFvw7t0fHNlcHRlbWJyZXxvY3RvYnJlfG5vdmVtYnJlfGTDqWNlbWJyZSkvaSxcbiAgICBtb250aHNTaG9ydFN0cmljdFJlZ2V4ID0gLyhqYW52XFwuP3xmw6l2clxcLj98bWFyc3xhdnJcXC4/fG1haXxqdWlufGp1aWxcXC4/fGFvw7t0fHNlcHRcXC4/fG9jdFxcLj98bm92XFwuP3xkw6ljXFwuPykvaSxcbiAgICBtb250aHNSZWdleCA9IC8oamFudlxcLj98ZsOpdnJcXC4/fG1hcnN8YXZyXFwuP3xtYWl8anVpbnxqdWlsXFwuP3xhb8O7dHxzZXB0XFwuP3xvY3RcXC4/fG5vdlxcLj98ZMOpY1xcLj98amFudmllcnxmw6l2cmllcnxtYXJzfGF2cmlsfG1haXxqdWlufGp1aWxsZXR8YW/Du3R8c2VwdGVtYnJlfG9jdG9icmV8bm92ZW1icmV8ZMOpY2VtYnJlKS9pLFxuICAgIG1vbnRoc1BhcnNlID0gWy9eamFudi9pLCAvXmbDqXZyL2ksIC9ebWFycy9pLCAvXmF2ci9pLCAvXm1haS9pLCAvXmp1aW4vaSwgL15qdWlsL2ksIC9eYW/Du3QvaSwgL15zZXB0L2ksIC9eb2N0L2ksIC9ebm92L2ksIC9eZMOpYy9pXTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2ZyJywge1xuICBtb250aHM6ICdqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1JlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU2hvcnRSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiBtb250aHNTdHJpY3RSZWdleCxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogbW9udGhzU2hvcnRTdHJpY3RSZWdleCxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICdkaW1hbmNoZV9sdW5kaV9tYXJkaV9tZXJjcmVkaV9qZXVkaV92ZW5kcmVkaV9zYW1lZGknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RpX2x1X21hX21lX2plX3ZlX3NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tBdWpvdXJk4oCZaHVpIMOgXSBMVCcsXG4gICAgbmV4dERheTogJ1tEZW1haW4gw6BdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW8OgXSBMVCcsXG4gICAgbGFzdERheTogJ1tIaWVyIMOgXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtkZXJuaWVyIMOgXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdkYW5zICVzJyxcbiAgICBwYXN0OiAnaWwgeSBhICVzJyxcbiAgICBzOiAncXVlbHF1ZXMgc2Vjb25kZXMnLFxuICAgIHNzOiAnJWQgc2Vjb25kZXMnLFxuICAgIG06ICd1bmUgbWludXRlJyxcbiAgICBtbTogJyVkIG1pbnV0ZXMnLFxuICAgIGg6ICd1bmUgaGV1cmUnLFxuICAgIGhoOiAnJWQgaGV1cmVzJyxcbiAgICBkOiAndW4gam91cicsXG4gICAgZGQ6ICclZCBqb3VycycsXG4gICAgdzogJ3VuZSBzZW1haW5lJyxcbiAgICB3dzogJyVkIHNlbWFpbmVzJyxcbiAgICBNOiAndW4gbW9pcycsXG4gICAgTU06ICclZCBtb2lzJyxcbiAgICB5OiAndW4gYW4nLFxuICAgIHl5OiAnJWQgYW5zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZXJ8KS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnRCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxID8gJ2VyJyA6ICcnKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnUSc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgY2FzZSAnZCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxID8gJ2VyJyA6ICdlJyk7XG5cbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxID8gJ3JlJyA6ICdlJyk7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzU2hvcnRXaXRoRG90cyA9ICdqYW4uX2ZlYi5fbXJ0Ll9hcHIuX21haV9qdW4uX2p1bC5fYXVnLl9zZXAuX29rdC5fbm92Ll9kZXMuJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1Nob3J0V2l0aG91dERvdHMgPSAnamFuX2ZlYl9tcnRfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMnLnNwbGl0KCdfJyk7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdmeScsIHtcbiAgbW9udGhzOiAnamFubmV3YXJpc19mZWJyZXdhcmlzX21hYXJ0X2FwcmlsX21hYWllX2p1bnlfanVseV9hdWd1c3R1c19zZXB0aW1iZXJfb2t0b2Jlcl9ub3ZpbWJlcl9kZXNpbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aERvdHM7XG4gICAgfSBlbHNlIGlmICgvLU1NTS0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aG91dERvdHNbbS5tb250aCgpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aERvdHNbbS5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnc25laW5fbW9hbmRlaV90aWlzZGVpX3dvYW5zZGVpX3RvbmdlcnNkZWlfZnJlZWRfc25lb24nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdzaS5fbW8uX3RpLl93by5fdG8uX2ZyLl9zby4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU2lfTW9fVGlfV29fVG9fRnJfU28nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELU1NLVlZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2hqb2VkIG9tXSBMVCcsXG4gICAgbmV4dERheTogJ1ttb2FybiBvbV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbb21dIExUJyxcbiAgICBsYXN0RGF5OiAnW2p1c3RlciBvbV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW8O0ZnLDu25lXSBkZGRkIFtvbV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb2VyICVzJyxcbiAgICBwYXN0OiAnJXMgbHluJyxcbiAgICBzOiAnaW4gcGVhciBzZWtvbmRlbicsXG4gICAgc3M6ICclZCBzZWtvbmRlbicsXG4gICAgbTogJ2llbiBtaW7DunQnLFxuICAgIG1tOiAnJWQgbWludXRlbicsXG4gICAgaDogJ2llbiBvZXJlJyxcbiAgICBoaDogJyVkIG9lcmVuJyxcbiAgICBkOiAnaWVuIGRlaScsXG4gICAgZGQ6ICclZCBkYWdlbicsXG4gICAgTTogJ2llbiBtb2FubmUnLFxuICAgIE1NOiAnJWQgbW9hbm5lbicsXG4gICAgeTogJ2llbiBqaWVyJyxcbiAgICB5eTogJyVkIGppZXJyZW4nXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdGV8ZGUpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVyICsgKG51bWJlciA9PT0gMSB8fCBudW1iZXIgPT09IDggfHwgbnVtYmVyID49IDIwID8gJ3N0ZScgOiAnZGUnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRocyA9IFsnRWFuw6FpcicsICdGZWFiaHJhJywgJ03DoXJ0YScsICdBaWJyZcOhbicsICdCZWFsdGFpbmUnLCAnTWVpdGhlYW1oJywgJ0nDumlsJywgJ0zDum5hc2EnLCAnTWXDoW4gRsOzbWhhaXInLCAnRGVpcmVhZGggRsOzbWhhaXInLCAnU2FtaGFpbicsICdOb2xsYWlnJ10sXG4gICAgbW9udGhzU2hvcnQgPSBbJ0VhbicsICdGZWFiaCcsICdNw6FydCcsICdBaWInLCAnQmVhbCcsICdNZWl0aCcsICdJw7ppbCcsICdMw7puJywgJ00uRi4nLCAnRC5GLicsICdTYW1oJywgJ05vbGwnXSxcbiAgICB3ZWVrZGF5cyA9IFsnRMOpIERvbWhuYWlnaCcsICdEw6kgTHVhaW4nLCAnRMOpIE3DoWlydCcsICdEw6kgQ8OpYWRhb2luJywgJ0TDqWFyZGFvaW4nLCAnRMOpIGhBb2luZScsICdEw6kgU2F0aGFpcm4nXSxcbiAgICB3ZWVrZGF5c1Nob3J0ID0gWydEb21oJywgJ0x1YW4nLCAnTcOhaXJ0JywgJ0PDqWFkJywgJ0TDqWFyJywgJ0FvaW5lJywgJ1NhdGgnXSxcbiAgICB3ZWVrZGF5c01pbiA9IFsnRG8nLCAnTHUnLCAnTcOhJywgJ0PDqScsICdEw6knLCAnQScsICdTYSddO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZ2EnLCB7XG4gIG1vbnRoczogbW9udGhzLFxuICBtb250aHNTaG9ydDogbW9udGhzU2hvcnQsXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiB3ZWVrZGF5cyxcbiAgd2Vla2RheXNTaG9ydDogd2Vla2RheXNTaG9ydCxcbiAgd2Vla2RheXNNaW46IHdlZWtkYXlzTWluLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0lubml1IGFnXSBMVCcsXG4gICAgbmV4dERheTogJ1tBbcOhcmFjaCBhZ10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYWddIExUJyxcbiAgICBsYXN0RGF5OiAnW0lubsOpIGFnXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtzZW8gY2FpdGVdIFthZ10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaSAlcycsXG4gICAgcGFzdDogJyVzIMOzIHNoaW4nLFxuICAgIHM6ICdjw7pwbGEgc29pY2luZCcsXG4gICAgc3M6ICclZCBzb2ljaW5kJyxcbiAgICBtOiAnbsOzaW3DqWFkJyxcbiAgICBtbTogJyVkIG7Ds2ltw6lhZCcsXG4gICAgaDogJ3VhaXIgYW4gY2hsb2lnJyxcbiAgICBoaDogJyVkIHVhaXIgYW4gY2hsb2lnJyxcbiAgICBkOiAnbMOhJyxcbiAgICBkZDogJyVkIGzDoScsXG4gICAgTTogJ23DrScsXG4gICAgTU06ICclZCBtw61vbm5hJyxcbiAgICB5OiAnYmxpYWluJyxcbiAgICB5eTogJyVkIGJsaWFpbidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGR8bmF8bWgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgb3V0cHV0ID0gbnVtYmVyID09PSAxID8gJ2QnIDogbnVtYmVyICUgMTAgPT09IDIgPyAnbmEnIDogJ21oJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzID0gWydBbSBGYW9pbGxlYWNoJywgJ0FuIEdlYXJyYW4nLCAnQW0gTcOgcnQnLCAnQW4gR2libGVhbicsICdBbiBDw6hpdGVhbicsICdBbiB0LcOSZ21oaW9zJywgJ0FuIHQtSXVjaGFyJywgJ0FuIEzDuW5hc3RhbCcsICdBbiB0LVN1bHRhaW4nLCAnQW4gRMOgbWhhaXInLCAnQW4gdC1TYW1oYWluJywgJ0FuIETDuWJobGFjaGQnXSxcbiAgICBtb250aHNTaG9ydCA9IFsnRmFvaScsICdHZWFyJywgJ03DoHJ0JywgJ0dpYmwnLCAnQ8OoaXQnLCAnw5JnbWgnLCAnSXVjaCcsICdMw7luJywgJ1N1bHQnLCAnRMOgbWgnLCAnU2FtaCcsICdEw7liaCddLFxuICAgIHdlZWtkYXlzID0gWydEaWTDsm1obmFpY2gnLCAnRGlsdWFpbicsICdEaW3DoGlydCcsICdEaWNpYWRhaW4nLCAnRGlhcmRhb2luJywgJ0RpaGFvaW5lJywgJ0Rpc2F0aGFpcm5lJ10sXG4gICAgd2Vla2RheXNTaG9ydCA9IFsnRGlkJywgJ0RpbCcsICdEaW0nLCAnRGljJywgJ0RpYScsICdEaWgnLCAnRGlzJ10sXG4gICAgd2Vla2RheXNNaW4gPSBbJ0TDsicsICdMdScsICdNw6AnLCAnQ2knLCAnQXInLCAnSGEnLCAnU2EnXTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2dkJywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRoc1Nob3J0LFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogd2Vla2RheXMsXG4gIHdlZWtkYXlzU2hvcnQ6IHdlZWtkYXlzU2hvcnQsXG4gIHdlZWtkYXlzTWluOiB3ZWVrZGF5c01pbixcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tBbi1kaXVnaCBhaWddIExUJyxcbiAgICBuZXh0RGF5OiAnW0EtbcOgaXJlYWNoIGFpZ10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYWlnXSBMVCcsXG4gICAgbGFzdERheTogJ1tBbi1kw6ggYWlnXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtzZW8gY2hhaWRoXSBbYWlnXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdhbm4gYW4gJXMnLFxuICAgIHBhc3Q6ICdiaG8gY2hpb25uICVzJyxcbiAgICBzOiAnYmVhZ2FuIGRpb2dhbicsXG4gICAgc3M6ICclZCBkaW9nYW4nLFxuICAgIG06ICdtaW9uYWlkJyxcbiAgICBtbTogJyVkIG1pb25haWRlYW4nLFxuICAgIGg6ICd1YWlyJyxcbiAgICBoaDogJyVkIHVhaXJlYW4nLFxuICAgIGQ6ICdsYXRoYScsXG4gICAgZGQ6ICclZCBsYXRoYScsXG4gICAgTTogJ23DrG9zJyxcbiAgICBNTTogJyVkIG3DrG9zYW4nLFxuICAgIHk6ICdibGlhZGhuYScsXG4gICAgeXk6ICclZCBibGlhZGhuYSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGR8bmF8bWgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgb3V0cHV0ID0gbnVtYmVyID09PSAxID8gJ2QnIDogbnVtYmVyICUgMTAgPT09IDIgPyAnbmEnIDogJ21oJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdnbCcsIHtcbiAgbW9udGhzOiAneGFuZWlyb19mZWJyZWlyb19tYXJ6b19hYnJpbF9tYWlvX3h1w7FvX3h1bGxvX2Fnb3N0b19zZXRlbWJyb19vdXR1YnJvX25vdmVtYnJvX2RlY2VtYnJvJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ3hhbi5fZmViLl9tYXIuX2Fici5fbWFpLl94dcOxLl94dWwuX2Fnby5fc2V0Ll9vdXQuX25vdi5fZGVjLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdkb21pbmdvX2x1bnNfbWFydGVzX23DqXJjb3Jlc194b3Zlc192ZW5yZXNfc8OhYmFkbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RvbS5fbHVuLl9tYXIuX23DqXIuX3hvdi5fdmVuLl9zw6FiLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkb19sdV9tYV9tw6lfeG9fdmVfc8OhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVknLFxuICAgIExMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogZnVuY3Rpb24gc2FtZURheSgpIHtcbiAgICAgIHJldHVybiAnW2hveGUgJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAnw6FzJyA6ICfDoScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dERheTogZnVuY3Rpb24gbmV4dERheSgpIHtcbiAgICAgIHJldHVybiAnW21hw7HDoSAnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICfDoXMnIDogJ8OhJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ2RkZGQgWycgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ8OhcycgOiAnYScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdERheTogZnVuY3Rpb24gbGFzdERheSgpIHtcbiAgICAgIHJldHVybiAnW29udGUgJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAnw6EnIDogJ2EnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiAnW29dIGRkZGQgW3Bhc2FkbyAnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICfDoXMnIDogJ2EnKSArICddIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiBmdW5jdGlvbiBmdXR1cmUoc3RyKSB7XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ3VuJykgPT09IDApIHtcbiAgICAgICAgcmV0dXJuICduJyArIHN0cjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICdlbiAnICsgc3RyO1xuICAgIH0sXG4gICAgcGFzdDogJ2hhaSAlcycsXG4gICAgczogJ3VucyBzZWd1bmRvcycsXG4gICAgc3M6ICclZCBzZWd1bmRvcycsXG4gICAgbTogJ3VuIG1pbnV0bycsXG4gICAgbW06ICclZCBtaW51dG9zJyxcbiAgICBoOiAndW5oYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmFzJyxcbiAgICBkOiAndW4gZMOtYScsXG4gICAgZGQ6ICclZCBkw61hcycsXG4gICAgTTogJ3VuIG1lcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VuIGFubycsXG4gICAgeXk6ICclZCBhbm9zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3Cui8sXG4gIG9yZGluYWw6ICclZMK6JyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIHM6IFsn4KSl4KWL4KSh4KSv4KS+IOCkuOClheCkleCkguCkoeCkvuCkguCkqOClgCcsICfgpKXgpYvgpKHgpYcg4KS44KWF4KSV4KSC4KShJ10sXG4gICAgc3M6IFtudW1iZXIgKyAnIOCkuOClheCkleCkguCkoeCkvuCkguCkqOClgCcsIG51bWJlciArICcg4KS44KWF4KSV4KSC4KShJ10sXG4gICAgbTogWyfgpI/gpJXgpL4g4KSu4KS/4KSj4KSf4KS+4KSoJywgJ+Ckj+CklSDgpK7gpL/gpKjgpYLgpJ8nXSxcbiAgICBtbTogW251bWJlciArICcg4KSu4KS/4KSj4KSf4KS+4KSC4KSo4KWAJywgbnVtYmVyICsgJyDgpK7gpL/gpKPgpJ/gpL7gpIInXSxcbiAgICBoOiBbJ+Ckj+CkleCkviDgpLXgpLDgpL7gpKgnLCAn4KSP4KSVIOCkteCksCddLFxuICAgIGhoOiBbbnVtYmVyICsgJyDgpLXgpLDgpL7gpILgpKjgpYAnLCBudW1iZXIgKyAnIOCkteCksOCkvuCkgiddLFxuICAgIGQ6IFsn4KSP4KSV4KS+IOCkpuCkv+CkuOCkvuCkqCcsICfgpI/gpJUg4KSm4KWA4KS4J10sXG4gICAgZGQ6IFtudW1iZXIgKyAnIOCkpuCkv+CkuOCkvuCkguCkqOClgCcsIG51bWJlciArICcg4KSm4KWA4KS4J10sXG4gICAgTTogWyfgpI/gpJXgpL4g4KSu4KWN4KS54KSv4KSo4KWN4KSv4KS+4KSoJywgJ+Ckj+CklSDgpK7gpY3gpLngpK/gpKjgpYsnXSxcbiAgICBNTTogW251bWJlciArICcg4KSu4KWN4KS54KSv4KSo4KWN4KSv4KS+4KSo4KWAJywgbnVtYmVyICsgJyDgpK7gpY3gpLngpK/gpKjgpYcnXSxcbiAgICB5OiBbJ+Ckj+CkleCkviDgpLXgpLDgpY3gpLjgpL7gpKgnLCAn4KSP4KSVIOCkteCksOCljeCkuCddLFxuICAgIHl5OiBbbnVtYmVyICsgJyDgpLXgpLDgpY3gpLjgpL7gpILgpKjgpYAnLCBudW1iZXIgKyAnIOCkteCksOCljeCkuOCkvuCkgiddXG4gIH07XG4gIHJldHVybiBpc0Z1dHVyZSA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2dvbS1kZXZhJywge1xuICBtb250aHM6IHtcbiAgICBzdGFuZGFsb25lOiAn4KSc4KS+4KSo4KWH4KS14KS+4KSw4KWAX+Ckq+Clh+CkrOCljeCksOClgeCkteCkvuCksOClgF/gpK7gpL7gpLDgpY3gpJpf4KSP4KSq4KWN4KSw4KWA4KSyX+CkruClh1/gpJzgpYLgpKhf4KSc4KWB4KSy4KSvX+CkkeCkl+CkuOCljeCkn1/gpLjgpKrgpY3gpJ/gpYfgpILgpKzgpLBf4KSR4KSV4KWN4KSf4KWL4KSs4KSwX+CkqOCli+CkteCljeCkueClh+CkguCkrOCksF/gpKHgpL/gpLjgpYfgpILgpKzgpLAnLnNwbGl0KCdfJyksXG4gICAgZm9ybWF0OiAn4KSc4KS+4KSo4KWH4KS14KS+4KSw4KWA4KSa4KWN4KSv4KS+X+Ckq+Clh+CkrOCljeCksOClgeCkteCkvuCksOClgOCkmuCljeCkr+Ckvl/gpK7gpL7gpLDgpY3gpJrgpL7gpJrgpY3gpK/gpL5f4KSP4KSq4KWN4KSw4KWA4KSy4KS+4KSa4KWN4KSv4KS+X+CkruClh+Ckr+CkvuCkmuCljeCkr+Ckvl/gpJzgpYLgpKjgpL7gpJrgpY3gpK/gpL5f4KSc4KWB4KSy4KSv4KS+4KSa4KWN4KSv4KS+X+CkkeCkl+CkuOCljeCkn+CkvuCkmuCljeCkr+Ckvl/gpLjgpKrgpY3gpJ/gpYfgpILgpKzgpLDgpL7gpJrgpY3gpK/gpL5f4KSR4KSV4KWN4KSf4KWL4KSs4KSw4KS+4KSa4KWN4KSv4KS+X+CkqOCli+CkteCljeCkueClh+CkguCkrOCksOCkvuCkmuCljeCkr+Ckvl/gpKHgpL/gpLjgpYfgpILgpKzgpLDgpL7gpJrgpY3gpK/gpL4nLnNwbGl0KCdfJyksXG4gICAgaXNGb3JtYXQ6IC9NTU1NKFxccykrRFtvRF0/L1xuICB9LFxuICBtb250aHNTaG9ydDogJ+CknOCkvuCkqOClhy5f4KSr4KWH4KSs4KWN4KSw4KWBLl/gpK7gpL7gpLDgpY3gpJpf4KSP4KSq4KWN4KSw4KWALl/gpK7gpYdf4KSc4KWC4KSoX+CknOClgeCksi5f4KSR4KSXLl/gpLjgpKrgpY3gpJ/gpYfgpIIuX+CkkeCkleCljeCkn+Cliy5f4KSo4KWL4KS14KWN4KS54KWH4KSCLl/gpKHgpL/gpLjgpYfgpIIuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ+CkhuCkr+CkpOCkvuCksF/gpLjgpYvgpK7gpL7gpLBf4KSu4KSC4KSX4KSz4KS+4KSwX+CkrOClgeCkp+CkteCkvuCksF/gpKzgpL/gpLDgpYfgpLjgpY3gpKTgpL7gpLBf4KS44KWB4KSV4KWN4KSw4KS+4KSwX+CktuClh+CkqOCkteCkvuCksCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CkhuCkr+CkpC5f4KS44KWL4KSuLl/gpK7gpILgpJfgpLMuX+CkrOClgeCkpy5f4KSs4KWN4KSw4KWH4KS44KWN4KSkLl/gpLjgpYHgpJXgpY3gpLAuX+CktuClh+CkqC4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4KSGX+CkuOCli1/gpK7gpIJf4KSs4KWBX+CkrOCljeCksOClh1/gpLjgpYFf4KS24KWHJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0gW+CkteCkvuCknOCkpOCkvuCkgl0nLFxuICAgIExUUzogJ0EgaDptbTpzcyBb4KS14KS+4KSc4KSk4KS+4KSCXScsXG4gICAgTDogJ0RELU1NLVlZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEEgaDptbSBb4KS14KS+4KSc4KSk4KS+4KSCXScsXG4gICAgTExMTDogJ2RkZGQsIE1NTU0gRG8sIFlZWVksIEEgaDptbSBb4KS14KS+4KSc4KSk4KS+4KSCXScsXG4gICAgbGxsbDogJ2RkZCwgRCBNTU0gWVlZWSwgQSBoOm1tIFvgpLXgpL7gpJzgpKTgpL7gpIJdJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4KSG4KSv4KScXSBMVCcsXG4gICAgbmV4dERheTogJ1vgpKvgpL7gpLLgpY3gpK/gpL7gpIJdIExUJyxcbiAgICBuZXh0V2VlazogJ1vgpKvgpYHgpKHgpLLgpYtdIGRkZGRbLF0gTFQnLFxuICAgIGxhc3REYXk6ICdb4KSV4KS+4KSyXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4KSr4KS+4KSf4KSy4KWLXSBkZGRkWyxdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzJyxcbiAgICBwYXN0OiAnJXMg4KSG4KSm4KWA4KSCJyxcbiAgICBzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHNzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0o4KS14KWH4KSwKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnRCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn4KS14KWH4KSwJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnUSc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDNcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CksOCkvuCkpOClgHzgpLjgpJXgpL7gpLPgpYDgpIJ84KSm4KSo4KSq4KS+4KSw4KS+4KSCfOCkuOCkvuCkguCknOClhy8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgpLDgpL7gpKTgpYAnKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpLjgpJXgpL7gpLPgpYDgpIInKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KSm4KSo4KSq4KS+4KSw4KS+4KSCJykge1xuICAgICAgcmV0dXJuIGhvdXIgPiAxMiA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CkuOCkvuCkguCknOClhycpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CksOCkvuCkpOClgCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn4KS44KSV4KS+4KSz4KWA4KSCJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNikge1xuICAgICAgcmV0dXJuICfgpKbgpKjgpKrgpL7gpLDgpL7gpIInO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CkuOCkvuCkguCknOClhyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4KSw4KS+4KSk4KWAJztcbiAgICB9XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBzOiBbJ3Rob2RkZWEgc2Vrb25kYW1uaScsICd0aG9kZGUgc2Vrb25kJ10sXG4gICAgc3M6IFtudW1iZXIgKyAnIHNla29uZGFtbmknLCBudW1iZXIgKyAnIHNla29uZCddLFxuICAgIG06IFsnZWthIG1pbnRhbicsICdlayBtaW51dCddLFxuICAgIG1tOiBbbnVtYmVyICsgJyBtaW50YW1uaScsIG51bWJlciArICcgbWludGFtJ10sXG4gICAgaDogWydla2Egdm9yYW4nLCAnZWsgdm9yJ10sXG4gICAgaGg6IFtudW1iZXIgKyAnIHZvcmFtbmknLCBudW1iZXIgKyAnIHZvcmFtJ10sXG4gICAgZDogWydla2EgZGlzYW4nLCAnZWsgZGlzJ10sXG4gICAgZGQ6IFtudW1iZXIgKyAnIGRpc2FtbmknLCBudW1iZXIgKyAnIGRpcyddLFxuICAgIE06IFsnZWthIG1ob2luZWFuJywgJ2VrIG1ob2lubyddLFxuICAgIE1NOiBbbnVtYmVyICsgJyBtaG9pbmVhbW5pJywgbnVtYmVyICsgJyBtaG9pbmUnXSxcbiAgICB5OiBbJ2VrYSB2b3JzYW4nLCAnZWsgdm9yb3MnXSxcbiAgICB5eTogW251bWJlciArICcgdm9yc2FtbmknLCBudW1iZXIgKyAnIHZvcnNhbSddXG4gIH07XG4gIHJldHVybiBpc0Z1dHVyZSA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2dvbS1sYXRuJywge1xuICBtb250aHM6IHtcbiAgICBzdGFuZGFsb25lOiAnSmFuZXJfRmVicmVyX01hcnNfQWJyaWxfTWFpX0p1bl9KdWxhaV9BZ29zdF9TZXRlbWJyX090dWJyX05vdmVtYnJfRGV6ZW1icicuc3BsaXQoJ18nKSxcbiAgICBmb3JtYXQ6ICdKYW5lcmFjaGVhX0ZlYnJlcmFjaGVhX01hcnNhY2hlYV9BYnJpbGFjaGVhX01haWFjaGVhX0p1bmFjaGVhX0p1bGFpYWNoZWFfQWdvc3RhY2hlYV9TZXRlbWJyYWNoZWFfT3R1YnJhY2hlYV9Ob3ZlbWJyYWNoZWFfRGV6ZW1icmFjaGVhJy5zcGxpdCgnXycpLFxuICAgIGlzRm9ybWF0OiAvTU1NTShcXHMpK0Rbb0RdPy9cbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICdKYW4uX0ZlYi5fTWFyc19BYnIuX01haV9KdW5fSnVsLl9BZ28uX1NldC5fT3R1Ll9Ob3YuX0Rlei4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiBcIkFpdGFyX1NvbWFyX01vbmdsbGFyX0J1ZGh2YXJfQmlyZXN0YXJfU3VrcmFyX1Nvbid2YXJcIi5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnQWl0Ll9Tb20uX01vbi5fQnVkLl9CcmUuX1N1ay5fU29uLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdBaV9TbV9Nb19CdV9Ccl9TdV9Tbicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tIFt2YXp0YV0nLFxuICAgIExUUzogJ0EgaDptbTpzcyBbdmF6dGFdJyxcbiAgICBMOiAnREQtTU0tWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgQSBoOm1tIFt2YXp0YV0nLFxuICAgIExMTEw6ICdkZGRkLCBNTU1NIERvLCBZWVlZLCBBIGg6bW0gW3ZhenRhXScsXG4gICAgbGxsbDogJ2RkZCwgRCBNTU0gWVlZWSwgQSBoOm1tIFt2YXp0YV0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tBaXpdIExUJyxcbiAgICBuZXh0RGF5OiAnW0ZhbGVhbV0gTFQnLFxuICAgIG5leHRXZWVrOiAnW0Z1ZGRsb10gZGRkZFssXSBMVCcsXG4gICAgbGFzdERheTogJ1tLYWxdIExUJyxcbiAgICBsYXN0V2VlazogJ1tGYXR0bG9dIGRkZGRbLF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMnLFxuICAgIHBhc3Q6ICclcyBhZGltJyxcbiAgICBzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHNzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZXIpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdEJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICdlcic7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICBjYXNlICdNJzpcbiAgICAgIGNhc2UgJ1EnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiAzXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9yYXRpfHNva2FsbGltfGRvbnBhcmFtfHNhbmplLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ3JhdGknKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdzb2thbGxpbScpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdkb25wYXJhbScpIHtcbiAgICAgIHJldHVybiBob3VyID4gMTIgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdzYW5qZScpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ3JhdGknO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ3Nva2FsbGltJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNikge1xuICAgICAgcmV0dXJuICdkb25wYXJhbSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAnc2FuamUnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ3JhdGknO1xuICAgIH1cbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+CrpycsXG4gIDI6ICfgq6gnLFxuICAzOiAn4KupJyxcbiAgNDogJ+CrqicsXG4gIDU6ICfgq6snLFxuICA2OiAn4KusJyxcbiAgNzogJ+CrrScsXG4gIDg6ICfgq64nLFxuICA5OiAn4KuvJyxcbiAgMDogJ+Crpidcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4KunJzogJzEnLFxuICAn4KuoJzogJzInLFxuICAn4KupJzogJzMnLFxuICAn4KuqJzogJzQnLFxuICAn4KurJzogJzUnLFxuICAn4KusJzogJzYnLFxuICAn4KutJzogJzcnLFxuICAn4KuuJzogJzgnLFxuICAn4KuvJzogJzknLFxuICAn4KumJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZ3UnLCB7XG4gIG1vbnRoczogJ+CqnOCqvuCqqOCrjeCqr+CrgeCqhuCqsOCrgF/gqqvgq4fgqqzgq43gqrDgq4HgqobgqrDgq4Bf4Kqu4Kq+4Kqw4KuN4KqaX+Cqj+CqquCrjeCqsOCqv+Cqsl/gqq7gq4df4Kqc4KuC4KqoX+CqnOCrgeCqsuCqvuCqiF/gqpHgqpfgqrjgq43gqp9f4Kq44Kqq4KuN4Kqf4KuH4Kqu4KuN4Kqs4KqwX+CqkeCqleCrjeCqn+CrjeCqrOCqsF/gqqjgqrXgq4fgqq7gq43gqqzgqrBf4Kqh4Kq/4Kq44KuH4Kqu4KuN4Kqs4KqwJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+CqnOCqvuCqqOCrjeCqr+CrgS5f4Kqr4KuH4Kqs4KuN4Kqw4KuBLl/gqq7gqr7gqrDgq43gqppf4KqP4Kqq4KuN4Kqw4Kq/Ll/gqq7gq4df4Kqc4KuC4KqoX+CqnOCrgeCqsuCqvi5f4KqR4KqXLl/gqrjgqqrgq43gqp/gq4cuX+CqkeCqleCrjeCqn+CrjS5f4Kqo4Kq14KuHLl/gqqHgqr/gqrjgq4cuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ+CqsOCqteCqv+CqteCqvuCqsF/gqrjgq4vgqq7gqrXgqr7gqrBf4Kqu4KqC4KqX4Kqz4Kq14Kq+4KqwX+CqrOCrgeCqp+CrjeCqteCqvuCqsF/gqpfgq4HgqrDgq4HgqrXgqr7gqrBf4Kq24KuB4KqV4KuN4Kqw4Kq14Kq+4KqwX+CqtuCqqOCqv+CqteCqvuCqsCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CqsOCqteCqv1/gqrjgq4vgqq5f4Kqu4KqC4KqX4KqzX+CqrOCrgeCqp+CrjV/gqpfgq4HgqrDgq4Ff4Kq24KuB4KqV4KuN4KqwX+CqtuCqqOCqvycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgqrBf4Kq44KuLX+CqruCqgl/gqqzgq4Ff4KqX4KuBX+CqtuCrgV/gqrYnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0g4Kq14Kq+4KqX4KuN4Kqv4KuHJyxcbiAgICBMVFM6ICdBIGg6bW06c3Mg4Kq14Kq+4KqX4KuN4Kqv4KuHJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbSDgqrXgqr7gqpfgq43gqq/gq4cnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCqteCqvuCql+CrjeCqr+CrhydcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CqhuCqnF0gTFQnLFxuICAgIG5leHREYXk6ICdb4KqV4Kq+4Kqy4KuHXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgqpfgqofgqpXgqr7gqrLgq4ddIExUJyxcbiAgICBsYXN0V2VlazogJ1vgqqrgqr7gqpvgqrLgqr5dIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOCqruCqvicsXG4gICAgcGFzdDogJyVzIOCqquCqueCrh+CqsuCqvicsXG4gICAgczogJ+CqheCqruCrgeCqlSDgqqrgqrPgq4snLFxuICAgIHNzOiAnJWQg4Kq44KuH4KqV4KqC4KqhJyxcbiAgICBtOiAn4KqP4KqVIOCqruCqv+CqqOCqv+CqnycsXG4gICAgbW06ICclZCDgqq7gqr/gqqjgqr/gqp8nLFxuICAgIGg6ICfgqo/gqpUg4KqV4Kqy4Kq+4KqVJyxcbiAgICBoaDogJyVkIOCqleCqsuCqvuCqlScsXG4gICAgZDogJ+Cqj+CqlSDgqqbgqr/gqrXgqrgnLFxuICAgIGRkOiAnJWQg4Kqm4Kq/4Kq14Kq4JyxcbiAgICBNOiAn4KqP4KqVIOCqruCqueCqv+CqqOCriycsXG4gICAgTU06ICclZCDgqq7gqrngqr/gqqjgq4snLFxuICAgIHk6ICfgqo/gqpUg4Kq14Kqw4KuN4Kq3JyxcbiAgICB5eTogJyVkIOCqteCqsOCrjeCqtydcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+Crp+CrqOCrqeCrquCrq+CrrOCrreCrruCrr+Crpl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4Kqw4Kq+4KqkfOCqrOCqquCri+CqsHzgqrjgqrXgqr7gqrB84Kq44Kq+4KqC4KqcLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CqsOCqvuCqpCcpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CquOCqteCqvuCqsCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgqqzgqqrgq4vgqrAnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CquOCqvuCqguCqnCcpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CqsOCqvuCqpCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAn4Kq44Kq14Kq+4KqwJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgqqzgqqrgq4vgqrAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CquOCqvuCqguCqnCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4Kqw4Kq+4KqkJztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2hlJywge1xuICBtb250aHM6ICfXmdeg15XXkNeoX9ek15HXqNeV15DXqF/Xnteo16Vf15DXpNeo15nXnF/XnteQ15lf15nXldeg15lf15nXldec15lf15DXldeS15XXodeYX9eh16TXmNee15HXqF/XkNeV16fXmNeV15HXqF/XoNeV15HXnteR16hf15PXptee15HXqCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfXmdeg15XXs1/XpNeR16jXs1/Xnteo16Vf15DXpNeo17Nf157XkNeZX9eZ15XXoNeZX9eZ15XXnNeZX9eQ15XXktezX9eh16TXmNezX9eQ15XXp9ezX9eg15XXkdezX9eT16bXntezJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ9eo15DXqdeV159f16nXoNeZX9ep15zXmdep15lf16jXkdeZ16LXmV/Xl9ee15nXqdeZX9ep15nXqdeZX9ep15HXqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9eQ17Nf15HXs1/XktezX9eT17Nf15TXs1/XldezX9ep17MnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn15Bf15Ff15Jf15Nf15Rf15Vf16knLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgW9eRXU1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBb15FdTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBb15FdTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBsOiAnRC9NL1lZWVknLFxuICAgIGxsOiAnRCBNTU0gWVlZWScsXG4gICAgbGxsOiAnRCBNTU0gWVlZWSBISDptbScsXG4gICAgbGxsbDogJ2RkZCwgRCBNTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9eU15nXldedINeR1r5dTFQnLFxuICAgIG5leHREYXk6ICdb157Xl9eoINeR1r5dTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb15HXqdei15RdIExUJyxcbiAgICBsYXN0RGF5OiAnW9eQ16rXnteV15wg15HWvl1MVCcsXG4gICAgbGFzdFdlZWs6ICdb15HXmdeV151dIGRkZGQgW9eU15DXl9eo15XXnyDXkdep16LXlF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn15HXoteV15MgJXMnLFxuICAgIHBhc3Q6ICfXnNek16DXmSAlcycsXG4gICAgczogJ9ee16HXpNeoINep16DXmdeV16onLFxuICAgIHNzOiAnJWQg16nXoNeZ15XXqicsXG4gICAgbTogJ9eT16fXlCcsXG4gICAgbW06ICclZCDXk9en15XXqicsXG4gICAgaDogJ9ep16LXlCcsXG4gICAgaGg6IGZ1bmN0aW9uIGhoKG51bWJlcikge1xuICAgICAgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXR1cm4gJ9ep16LXqteZ15nXnSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudW1iZXIgKyAnINep16LXldeqJztcbiAgICB9LFxuICAgIGQ6ICfXmdeV150nLFxuICAgIGRkOiBmdW5jdGlvbiBkZChudW1iZXIpIHtcbiAgICAgIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICAgICAgcmV0dXJuICfXmdeV157XmdeZ150nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVtYmVyICsgJyDXmdee15nXnSc7XG4gICAgfSxcbiAgICBNOiAn15fXldeT16knLFxuICAgIE1NOiBmdW5jdGlvbiBNTShudW1iZXIpIHtcbiAgICAgIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICAgICAgcmV0dXJuICfXl9eV15PXqdeZ15nXnSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudW1iZXIgKyAnINeX15XXk9ep15nXnSc7XG4gICAgfSxcbiAgICB5OiAn16nXoNeUJyxcbiAgICB5eTogZnVuY3Rpb24geXkobnVtYmVyKSB7XG4gICAgICBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgICAgIHJldHVybiAn16nXoNeq15nXmdedJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyICUgMTAgPT09IDAgJiYgbnVtYmVyICE9PSAxMCkge1xuICAgICAgICByZXR1cm4gbnVtYmVyICsgJyDXqdeg15QnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVtYmVyICsgJyDXqdeg15nXnSc7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv15DXl9eUXCLXpnzXnNek16DXlFwi16Z815DXl9eo15kg15TXpteU16jXmdeZ151815zXpNeg15kg15TXpteU16jXmdeZ151815zXpNeg15XXqiDXkdeV16fXqHzXkdeR15XXp9eofNeR16LXqNeRL2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL14o15DXl9eUXCLXpnzXkNeX16jXmSDXlNem15TXqNeZ15nXnXzXkdei16jXkSkkLy50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNSkge1xuICAgICAgcmV0dXJuICfXnNek16DXldeqINeR15XXp9eoJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMCkge1xuICAgICAgcmV0dXJuICfXkdeR15XXp9eoJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAn15zXpNeg15RcItemJyA6ICfXnNek16DXmSDXlNem15TXqNeZ15nXnSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTgpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ9eQ15fXlFwi16YnIDogJ9eQ15fXqNeZINeU16bXlNeo15nXmdedJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfXkdei16jXkSc7XG4gICAgfVxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4KWnJyxcbiAgMjogJ+ClqCcsXG4gIDM6ICfgpaknLFxuICA0OiAn4KWqJyxcbiAgNTogJ+ClqycsXG4gIDY6ICfgpawnLFxuICA3OiAn4KWtJyxcbiAgODogJ+ClricsXG4gIDk6ICfgpa8nLFxuICAwOiAn4KWmJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgpacnOiAnMScsXG4gICfgpagnOiAnMicsXG4gICfgpaknOiAnMycsXG4gICfgpaonOiAnNCcsXG4gICfgpasnOiAnNScsXG4gICfgpawnOiAnNicsXG4gICfgpa0nOiAnNycsXG4gICfgpa4nOiAnOCcsXG4gICfgpa8nOiAnOScsXG4gICfgpaYnOiAnMCdcbn0sXG4gICAgbW9udGhzUGFyc2UgPSBbL17gpJzgpKgvaSwgL17gpKvgpLzgpLB84KSr4KSwL2ksIC9e4KSu4KS+4KSw4KWN4KSaL2ksIC9e4KSF4KSq4KWN4KSw4KWIL2ksIC9e4KSu4KSIL2ksIC9e4KSc4KWC4KSoL2ksIC9e4KSc4KWB4KSyL2ksIC9e4KSF4KSXL2ksIC9e4KS44KS/4KSk4KSCfOCkuOCkv+CkpC9pLCAvXuCkheCkleCljeCkn+Clgi9pLCAvXuCkqOCktXzgpKjgpLXgpIIvaSwgL17gpKbgpL/gpLjgpIJ84KSm4KS/4KS4L2ldLFxuICAgIHNob3J0TW9udGhzUGFyc2UgPSBbL17gpJzgpKgvaSwgL17gpKvgpLzgpLAvaSwgL17gpK7gpL7gpLDgpY3gpJovaSwgL17gpIXgpKrgpY3gpLDgpYgvaSwgL17gpK7gpIgvaSwgL17gpJzgpYLgpKgvaSwgL17gpJzgpYHgpLIvaSwgL17gpIXgpJcvaSwgL17gpLjgpL/gpKQvaSwgL17gpIXgpJXgpY3gpJ/gpYIvaSwgL17gpKjgpLUvaSwgL17gpKbgpL/gpLgvaV07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdoaScsIHtcbiAgbW9udGhzOiB7XG4gICAgZm9ybWF0OiAn4KSc4KSo4KS14KSw4KWAX+Ckq+CkvOCksOCkteCksOClgF/gpK7gpL7gpLDgpY3gpJpf4KSF4KSq4KWN4KSw4KWI4KSyX+CkruCkiF/gpJzgpYLgpKhf4KSc4KWB4KSy4KS+4KSIX+CkheCkl+CkuOCljeCkpF/gpLjgpL/gpKTgpK7gpY3gpKzgpLBf4KSF4KSV4KWN4KSf4KWC4KSs4KSwX+CkqOCkteCkruCljeCkrOCksF/gpKbgpL/gpLjgpK7gpY3gpKzgpLAnLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ+CknOCkqOCkteCksOClgF/gpKvgpLDgpLXgpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCliOCksl/gpK7gpIhf4KSc4KWC4KSoX+CknOClgeCksuCkvuCkiF/gpIXgpJfgpLjgpY3gpKRf4KS44KS/4KSk4KSC4KSs4KSwX+CkheCkleCljeCkn+ClguCkrOCksF/gpKjgpLXgpILgpKzgpLBf4KSm4KS/4KS44KSC4KSs4KSwJy5zcGxpdCgnXycpXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAn4KSc4KSoLl/gpKvgpLzgpLAuX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpYguX+CkruCkiF/gpJzgpYLgpKhf4KSc4KWB4KSyLl/gpIXgpJcuX+CkuOCkv+CkpC5f4KSF4KSV4KWN4KSf4KWCLl/gpKjgpLUuX+CkpuCkv+CkuC4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4KSw4KS14KS/4KS14KS+4KSwX+CkuOCli+CkruCkteCkvuCksF/gpK7gpILgpJfgpLLgpLXgpL7gpLBf4KSs4KWB4KSn4KS14KS+4KSwX+Ckl+ClgeCksOClguCkteCkvuCksF/gpLbgpYHgpJXgpY3gpLDgpLXgpL7gpLBf4KS24KSo4KS/4KS14KS+4KSwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4KSw4KS14KS/X+CkuOCli+Ckrl/gpK7gpILgpJfgpLJf4KSs4KWB4KSnX+Ckl+ClgeCksOClgl/gpLbgpYHgpJXgpY3gpLBf4KS24KSo4KS/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CksF/gpLjgpYtf4KSu4KSCX+CkrOClgV/gpJfgpYFf4KS24KWBX+Ckticuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSDgpKzgpJzgpYcnLFxuICAgIExUUzogJ0EgaDptbTpzcyDgpKzgpJzgpYcnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tIOCkrOCknOClhycsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4KSs4KSc4KWHJ1xuICB9LFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IHNob3J0TW9udGhzUGFyc2UsXG4gIG1vbnRoc1JlZ2V4OiAvXijgpJzgpKjgpLXgpLDgpYB84KSc4KSoXFwuP3zgpKvgpLzgpLDgpLXgpLDgpYB84KSr4KSw4KS14KSw4KWAfOCkq+CkvOCksFxcLj984KSu4KS+4KSw4KWN4KSaP3zgpIXgpKrgpY3gpLDgpYjgpLJ84KSF4KSq4KWN4KSw4KWIXFwuP3zgpK7gpIg/fOCknOClguCkqD984KSc4KWB4KSy4KS+4KSIfOCknOClgeCkslxcLj984KSF4KSX4KS44KWN4KSkfOCkheCkl1xcLj984KS44KS/4KSk4KSu4KWN4KSs4KSwfOCkuOCkv+CkpOCkguCkrOCksHzgpLjgpL/gpKRcXC4/fOCkheCkleCljeCkn+ClguCkrOCksHzgpIXgpJXgpY3gpJ/gpYJcXC4/fOCkqOCkteCkruCljeCkrOCksHzgpKjgpLXgpILgpKzgpLB84KSo4KS1XFwuP3zgpKbgpL/gpLjgpK7gpY3gpKzgpLB84KSm4KS/4KS44KSC4KSs4KSwfOCkpuCkv+CkuFxcLj8pL2ksXG4gIG1vbnRoc1Nob3J0UmVnZXg6IC9eKOCknOCkqOCkteCksOClgHzgpJzgpKhcXC4/fOCkq+CkvOCksOCkteCksOClgHzgpKvgpLDgpLXgpLDgpYB84KSr4KS84KSwXFwuP3zgpK7gpL7gpLDgpY3gpJo/fOCkheCkquCljeCksOCliOCksnzgpIXgpKrgpY3gpLDgpYhcXC4/fOCkruCkiD984KSc4KWC4KSoP3zgpJzgpYHgpLLgpL7gpIh84KSc4KWB4KSyXFwuP3zgpIXgpJfgpLjgpY3gpKR84KSF4KSXXFwuP3zgpLjgpL/gpKTgpK7gpY3gpKzgpLB84KS44KS/4KSk4KSC4KSs4KSwfOCkuOCkv+CkpFxcLj984KSF4KSV4KWN4KSf4KWC4KSs4KSwfOCkheCkleCljeCkn+ClglxcLj984KSo4KS14KSu4KWN4KSs4KSwfOCkqOCkteCkguCkrOCksHzgpKjgpLVcXC4/fOCkpuCkv+CkuOCkruCljeCkrOCksHzgpKbgpL/gpLjgpILgpKzgpLB84KSm4KS/4KS4XFwuPykvaSxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC9eKOCknOCkqOCkteCksOClgD984KSr4KS84KSw4KS14KSw4KWAfOCkq+CksOCkteCksOClgD984KSu4KS+4KSw4KWN4KSaP3zgpIXgpKrgpY3gpLDgpYjgpLI/fOCkruCkiD984KSc4KWC4KSoP3zgpJzgpYHgpLLgpL7gpIg/fOCkheCkl+CkuOCljeCkpD984KS44KS/4KSk4KSu4KWN4KSs4KSwfOCkuOCkv+CkpOCkguCkrOCksHzgpLjgpL/gpKQ/XFwuP3zgpIXgpJXgpY3gpJ/gpYLgpKzgpLB84KSF4KSV4KWN4KSf4KWCXFwuP3zgpKjgpLXgpK7gpY3gpKzgpLB84KSo4KS14KSC4KSs4KSwP3zgpKbgpL/gpLjgpK7gpY3gpKzgpLB84KSm4KS/4KS44KSC4KSs4KSwPykvaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogL14o4KSc4KSoXFwuP3zgpKvgpLzgpLBcXC4/fOCkruCkvuCksOCljeCkmj984KSF4KSq4KWN4KSw4KWIXFwuP3zgpK7gpIg/fOCknOClguCkqD984KSc4KWB4KSyXFwuP3zgpIXgpJdcXC4/fOCkuOCkv+CkpFxcLj984KSF4KSV4KWN4KSf4KWCXFwuP3zgpKjgpLVcXC4/fOCkpuCkv+CkuFxcLj8pL2ksXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgpIbgpJxdIExUJyxcbiAgICBuZXh0RGF5OiAnW+CkleCksl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCwgTFQnLFxuICAgIGxhc3REYXk6ICdb4KSV4KSyXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4KSq4KS/4KSb4KSy4KWHXSBkZGRkLCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDgpK7gpYfgpIInLFxuICAgIHBhc3Q6ICclcyDgpKrgpLngpLLgpYcnLFxuICAgIHM6ICfgpJXgpYHgpJsg4KS54KWAIOCkleCljeCkt+CkoycsXG4gICAgc3M6ICclZCDgpLjgpYfgpJXgpILgpKEnLFxuICAgIG06ICfgpI/gpJUg4KSu4KS/4KSo4KSfJyxcbiAgICBtbTogJyVkIOCkruCkv+CkqOCknycsXG4gICAgaDogJ+Ckj+CklSDgpJjgpILgpJ/gpL4nLFxuICAgIGhoOiAnJWQg4KSY4KSC4KSf4KWHJyxcbiAgICBkOiAn4KSP4KSVIOCkpuCkv+CkqCcsXG4gICAgZGQ6ICclZCDgpKbgpL/gpKgnLFxuICAgIE06ICfgpI/gpJUg4KSu4KS54KWA4KSo4KWHJyxcbiAgICBNTTogJyVkIOCkruCkueClgOCkqOClhycsXG4gICAgeTogJ+Ckj+CklSDgpLXgpLDgpY3gpLcnLFxuICAgIHl5OiAnJWQg4KS14KSw4KWN4KS3J1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4KWn4KWo4KWp4KWq4KWr4KWs4KWt4KWu4KWv4KWmXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gpLDgpL7gpKR84KS44KWB4KSs4KS5fOCkpuCli+CkquCkueCksHzgpLbgpL7gpK4vLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4KSw4KS+4KSkJykge1xuICAgICAgcmV0dXJuIGhvdXIgPCA0ID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KS44KWB4KSs4KS5Jykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CkpuCli+CkquCkueCksCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDEwID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KS24KS+4KSuJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn4KSw4KS+4KSkJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMCkge1xuICAgICAgcmV0dXJuICfgpLjgpYHgpKzgpLknO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ+CkpuCli+CkquCkueCksCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAn4KS24KS+4KSuJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfgpLDgpL7gpKQnO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3NzJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmRhJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmRlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2VrdW5kaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2plZG5hIG1pbnV0YScgOiAnamVkbmUgbWludXRlJztcblxuICAgIGNhc2UgJ21tJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdtaW51dGEnO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIgfHwgbnVtYmVyID09PSAzIHx8IG51bWJlciA9PT0gNCkge1xuICAgICAgICByZXN1bHQgKz0gJ21pbnV0ZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ21pbnV0YSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2plZGFuIHNhdCcgOiAnamVkbm9nIHNhdGEnO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ3NhdCc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2F0YSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ3NhdGknO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ2Rhbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ2RhbmEnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ21qZXNlYyc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWplc2VjYSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ21qZXNlY2knO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ2dvZGluYSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnZ29kaW5lJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnZ29kaW5hJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdocicsIHtcbiAgbW9udGhzOiB7XG4gICAgZm9ybWF0OiAnc2lqZcSNbmphX3ZlbGphxI1lX2/FvnVqa2FfdHJhdm5qYV9zdmlibmphX2xpcG5qYV9zcnBuamFfa29sb3ZvemFfcnVqbmFfbGlzdG9wYWRhX3N0dWRlbm9nYV9wcm9zaW5jYScuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAnc2lqZcSNYW5qX3ZlbGphxI1hX2/FvnVqYWtfdHJhdmFual9zdmliYW5qX2xpcGFual9zcnBhbmpfa29sb3Zvel9ydWphbl9saXN0b3BhZF9zdHVkZW5pX3Byb3NpbmFjJy5zcGxpdCgnXycpXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAnc2lqLl92ZWxqLl9vxb51Ll90cmEuX3N2aS5fbGlwLl9zcnAuX2tvbC5fcnVqLl9saXMuX3N0dS5fcHJvLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICduZWRqZWxqYV9wb25lZGplbGpha191dG9yYWtfc3JpamVkYV/EjWV0dnJ0YWtfcGV0YWtfc3Vib3RhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnbmVkLl9wb24uX3V0by5fc3JpLl/EjWV0Ll9wZXQuX3N1Yi4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnbmVfcG9fdXRfc3JfxI1lX3BlX3N1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEbyBNTU1NIFlZWVknLFxuICAgIExMTDogJ0RvIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRG8gTU1NTSBZWVlZIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tkYW5hcyB1XSBMVCcsXG4gICAgbmV4dERheTogJ1tzdXRyYSB1XSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbbmVkamVsanVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzcmlqZWR1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbc3Vib3R1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBkZGRkIFt1XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW2p1xI1lciB1XSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1twcm/FoWx1XSBbbmVkamVsanVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3Byb8WhbHVdIFtzcmlqZWR1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1twcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1twcm/FoWxpXSBkZGRkIFt1XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3phICVzJyxcbiAgICBwYXN0OiAncHJpamUgJXMnLFxuICAgIHM6ICdwYXIgc2VrdW5kaScsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiAnZGFuJyxcbiAgICBkZDogdHJhbnNsYXRlLFxuICAgIE06ICdtamVzZWMnLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogJ2dvZGludScsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHdlZWtFbmRpbmdzID0gJ3Zhc8Ohcm5hcCBow6l0ZsWRbiBrZWRkZW4gc3plcmTDoW4gY3PDvHTDtnJ0w7Zrw7ZuIHDDqW50ZWtlbiBzem9tYmF0b24nLnNwbGl0KCcgJyk7XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIG51bSA9IG51bWJlcjtcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnbsOpaMOhbnkgbcOhc29kcGVyYycgOiAnbsOpaMOhbnkgbcOhc29kcGVyY2UnO1xuXG4gICAgY2FzZSAnc3MnOlxuICAgICAgcmV0dXJuIG51bSArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4KSA/ICcgbcOhc29kcGVyYycgOiAnIG3DoXNvZHBlcmNlJztcblxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuICdlZ3knICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIHBlcmMnIDogJyBwZXJjZScpO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgcmV0dXJuIG51bSArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4ID8gJyBwZXJjJyA6ICcgcGVyY2UnKTtcblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuICdlZ3knICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIMOzcmEnIDogJyDDs3LDoWphJyk7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICByZXR1cm4gbnVtICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIMOzcmEnIDogJyDDs3LDoWphJyk7XG5cbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiAnZWd5JyArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4ID8gJyBuYXAnIDogJyBuYXBqYScpO1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgcmV0dXJuIG51bSArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4ID8gJyBuYXAnIDogJyBuYXBqYScpO1xuXG4gICAgY2FzZSAnTSc6XG4gICAgICByZXR1cm4gJ2VneScgKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgaMOzbmFwJyA6ICcgaMOzbmFwamEnKTtcblxuICAgIGNhc2UgJ01NJzpcbiAgICAgIHJldHVybiBudW0gKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgaMOzbmFwJyA6ICcgaMOzbmFwamEnKTtcblxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuICdlZ3knICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIMOpdicgOiAnIMOpdmUnKTtcblxuICAgIGNhc2UgJ3l5JzpcbiAgICAgIHJldHVybiBudW0gKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgw6l2JyA6ICcgw6l2ZScpO1xuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiB3ZWVrKGlzRnV0dXJlKSB7XG4gIHJldHVybiAoaXNGdXR1cmUgPyAnJyA6ICdbbcO6bHRdICcpICsgJ1snICsgd2Vla0VuZGluZ3NbdGhpcy5kYXkoKV0gKyAnXSBMVFsta29yXSc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2h1Jywge1xuICBtb250aHM6ICdqYW51w6FyX2ZlYnJ1w6FyX23DoXJjaXVzX8OhcHJpbGlzX23DoWp1c19qw7puaXVzX2rDumxpdXNfYXVndXN6dHVzX3N6ZXB0ZW1iZXJfb2t0w7NiZXJfbm92ZW1iZXJfZGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuLl9mZWIuX23DoXJjLl/DoXByLl9tw6FqLl9qw7puLl9qw7psLl9hdWcuX3N6ZXB0Ll9va3QuX25vdi5fZGVjLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICd2YXPDoXJuYXBfaMOpdGbFkV9rZWRkX3N6ZXJkYV9jc8O8dMO2cnTDtmtfcMOpbnRla19zem9tYmF0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAndmFzX2jDqXRfa2VkZF9zemVfY3PDvHRfcMOpbl9zem8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAndl9oX2tfc3plX2NzX3Bfc3pvJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ1lZWVkuTU0uREQuJyxcbiAgICBMTDogJ1lZWVkuIE1NTU0gRC4nLFxuICAgIExMTDogJ1lZWVkuIE1NTU0gRC4gSDptbScsXG4gICAgTExMTDogJ1lZWVkuIE1NTU0gRC4sIGRkZGQgSDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL2RlfGR1L2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCkgPT09ICd1JztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzIDwgMTIpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID09PSB0cnVlID8gJ2RlJyA6ICdERSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID09PSB0cnVlID8gJ2R1JyA6ICdEVSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbbWFdIExUWy1rb3JdJyxcbiAgICBuZXh0RGF5OiAnW2hvbG5hcF0gTFRbLWtvcl0nLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiB3ZWVrLmNhbGwodGhpcywgdHJ1ZSk7XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW3RlZ25hcF0gTFRbLWtvcl0nLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiB3ZWVrLmNhbGwodGhpcywgZmFsc2UpO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBtw7psdmEnLFxuICAgIHBhc3Q6ICclcycsXG4gICAgczogdHJhbnNsYXRlLFxuICAgIHNzOiB0cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRlLFxuICAgIG1tOiB0cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogdHJhbnNsYXRlLFxuICAgIGRkOiB0cmFuc2xhdGUsXG4gICAgTTogdHJhbnNsYXRlLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogdHJhbnNsYXRlLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2h5LWFtJywge1xuICBtb250aHM6IHtcbiAgICBmb3JtYXQ6ICfVsNW41oLVttW+1aHWgNWrX9aD1aXVv9aA1b7VodaA1atf1bTVodaA1b/Vq1/VodW61oDVq9Ws1atf1bTVodW11avVvdWrX9Ww1bjWgtW21avVvdWrX9Ww1bjWgtWs1avVvdWrX9aF1aPVuNW91b/VuNW91atf1b3VpdW61b/VpdW01aLVpdaA1atf1bDVuNWv1b/VpdW01aLVpdaA1atf1bbVuNW11aXVtNWi1aXWgNWrX9Wk1aXVr9W/1aXVtNWi1aXWgNWrJy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICfVsNW41oLVttW+1aHWgF/Wg9Wl1b/WgNW+1aHWgF/VtNWh1oDVv1/VodW61oDVq9WsX9W01aHVtdWr1b1f1bDVuNaC1bbVq9W9X9Ww1bjWgtWs1avVvV/WhdWj1bjVvdW/1bjVvV/VvdWl1brVv9Wl1bTVotWl1oBf1bDVuNWv1b/VpdW01aLVpdaAX9W21bjVtdWl1bTVotWl1oBf1aTVpdWv1b/VpdW01aLVpdaAJy5zcGxpdCgnXycpXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAn1bDVttW+X9aD1b/WgF/VtNaA1b9f1aHVutaAX9W01bXVvV/VsNW21b1f1bDVrNW9X9aF1aPVvV/VvdW61b9f1bDVr9W/X9W21bTVol/VpNWv1b8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn1a/Vq9aA1aHVr9WrX9Wl1oDVr9W41oLVt9Wh1aLVqdWrX9Wl1oDVpdaE1bfVodWi1anVq1/VudW41oDVpdaE1bfVodWi1anVq1/VsNWr1bbVo9W31aHVotWp1atf1bjWgtaA1aLVodWpX9W31aHVotWh1aknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfVr9aA1a9f1aXWgNWvX9Wl1oDWhF/VudaA1oRf1bDVttWjX9W41oLWgNWiX9W31aLVqScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfVr9aA1a9f1aXWgNWvX9Wl1oDWhF/VudaA1oRf1bDVttWjX9W41oLWgNWiX9W31aLVqScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVkg1akuJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSDVqS4sIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkg1akuLCBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9Wh1bXVvdaF1oBdIExUJyxcbiAgICBuZXh0RGF5OiAnW9W+1aHVstWoXSBMVCcsXG4gICAgbGFzdERheTogJ1vVpdaA1aXVr10gTFQnLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnZGRkZCBb1oXWgNWoINWq1aHVtNWoXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ1vVodW21oHVodWuXSBkZGRkIFvWhdaA1agg1arVodW01ahdIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg1bDVpdW/1bgnLFxuICAgIHBhc3Q6ICclcyDVodW81aHVuycsXG4gICAgczogJ9W01asg1oTVodW21asg1b7VodW11oDVr9W11aHVticsXG4gICAgc3M6ICclZCDVvtWh1bXWgNWv1bXVodW2JyxcbiAgICBtOiAn1oDVuNW61aUnLFxuICAgIG1tOiAnJWQg1oDVuNW61aUnLFxuICAgIGg6ICfVqtWh1bQnLFxuICAgIGhoOiAnJWQg1arVodW0JyxcbiAgICBkOiAn1oXWgCcsXG4gICAgZGQ6ICclZCDWhdaAJyxcbiAgICBNOiAn1aHVtNWr1b0nLFxuICAgIE1NOiAnJWQg1aHVtNWr1b0nLFxuICAgIHk6ICfVv9Wh1oDVqycsXG4gICAgeXk6ICclZCDVv9Wh1oDVqydcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9Wj1avVt9Wl1oDVvtWhfNWh1bzVodW+1bjVv9W+1aF81oHVpdaA1aXVr9W+1aF81aXWgNWl1a/VuNW11aHVti8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL14o1oHVpdaA1aXVr9W+1aF81aXWgNWl1a/VuNW11aHVtikkLy50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn1aPVq9W31aXWgNW+1aEnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9Wh1bzVodW+1bjVv9W+1aEnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ9aB1aXWgNWl1a/VvtWhJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfVpdaA1aXVr9W41bXVodW2JztcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfXxcXGR7MSwyfS0o1avVtnzWgNWkKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnREREJzpcbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICBjYXNlICdERERvJzpcbiAgICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiBudW1iZXIgKyAnLdWr1bYnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bWJlciArICct1oDVpCc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdpZCcsIHtcbiAgbW9udGhzOiAnSmFudWFyaV9GZWJydWFyaV9NYXJldF9BcHJpbF9NZWlfSnVuaV9KdWxpX0FndXN0dXNfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGVzZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01laV9KdW5fSnVsX0FndF9TZXBfT2t0X05vdl9EZXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnTWluZ2d1X1NlbmluX1NlbGFzYV9SYWJ1X0thbWlzX0p1bWF0X1NhYnR1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnTWluX1Nlbl9TZWxfUmFiX0thbV9KdW1fU2FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ01nX1NuX1NsX1JiX0ttX0ptX1NiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEgubW0nLFxuICAgIExUUzogJ0hILm1tLnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9wYWdpfHNpYW5nfHNvcmV8bWFsYW0vLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAncGFnaScpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdzaWFuZycpIHtcbiAgICAgIHJldHVybiBob3VyID49IDExID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAnc29yZScgfHwgbWVyaWRpZW0gPT09ICdtYWxhbScpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMSkge1xuICAgICAgcmV0dXJuICdwYWdpJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTUpIHtcbiAgICAgIHJldHVybiAnc2lhbmcnO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxOSkge1xuICAgICAgcmV0dXJuICdzb3JlJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdtYWxhbSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSGFyaSBpbmkgcHVrdWxdIExUJyxcbiAgICBuZXh0RGF5OiAnW0Jlc29rIHB1a3VsXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtwdWt1bF0gTFQnLFxuICAgIGxhc3REYXk6ICdbS2VtYXJpbiBwdWt1bF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbbGFsdSBwdWt1bF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZGFsYW0gJXMnLFxuICAgIHBhc3Q6ICclcyB5YW5nIGxhbHUnLFxuICAgIHM6ICdiZWJlcmFwYSBkZXRpaycsXG4gICAgc3M6ICclZCBkZXRpaycsXG4gICAgbTogJ3NlbWVuaXQnLFxuICAgIG1tOiAnJWQgbWVuaXQnLFxuICAgIGg6ICdzZWphbScsXG4gICAgaGg6ICclZCBqYW0nLFxuICAgIGQ6ICdzZWhhcmknLFxuICAgIGRkOiAnJWQgaGFyaScsXG4gICAgTTogJ3NlYnVsYW4nLFxuICAgIE1NOiAnJWQgYnVsYW4nLFxuICAgIHk6ICdzZXRhaHVuJyxcbiAgICB5eTogJyVkIHRhaHVuJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHBsdXJhbChuKSB7XG4gIGlmIChuICUgMTAwID09PSAxMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKG4gJSAxMCA9PT0gMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciByZXN1bHQgPSBudW1iZXIgKyAnICc7XG5cbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ25va2tyYXIgc2Vrw7puZHVyJyA6ICdub2trcnVtIHNla8O6bmR1bSc7XG5cbiAgICBjYXNlICdzcyc6XG4gICAgICBpZiAocGx1cmFsKG51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ3Nla8O6bmR1cicgOiAnc2Vrw7puZHVtJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgKyAnc2Vrw7puZGEnO1xuXG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdtw61uw7p0YScgOiAnbcOtbsO6dHUnO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgaWYgKHBsdXJhbChudW1iZXIpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtw61uw7p0dXInIDogJ23DrW7DunR1bScpO1xuICAgICAgfSBlbHNlIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnbcOtbsO6dGEnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0ICsgJ23DrW7DunR1JztcblxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIGlmIChwbHVyYWwobnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAna2x1a2t1c3R1bmRpcicgOiAna2x1a2t1c3R1bmR1bScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0ICsgJ2tsdWtrdXN0dW5kJztcblxuICAgIGNhc2UgJ2QnOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICAgICAgcmV0dXJuICdkYWd1cic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0Z1dHVyZSA/ICdkYWcnIDogJ2RlZ2knO1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgaWYgKHBsdXJhbChudW1iZXIpKSB7XG4gICAgICAgIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCArICdkYWdhcic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKGlzRnV0dXJlID8gJ2RhZ2EnIDogJ2TDtmd1bScpO1xuICAgICAgfSBlbHNlIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnZGFndXInO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0ICsgKGlzRnV0dXJlID8gJ2RhZycgOiAnZGVnaScpO1xuXG4gICAgY2FzZSAnTSc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gJ23DoW51w7B1cic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0Z1dHVyZSA/ICdtw6FudcOwJyA6ICdtw6FudcOwaSc7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICBpZiAocGx1cmFsKG51bWJlcikpIHtcbiAgICAgICAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ23DoW51w7Bpcic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKGlzRnV0dXJlID8gJ23DoW51w7BpJyA6ICdtw6FudcOwdW0nKTtcbiAgICAgIH0gZWxzZSBpZiAod2l0aG91dFN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ23DoW51w7B1cic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgKyAoaXNGdXR1cmUgPyAnbcOhbnXDsCcgOiAnbcOhbnXDsGknKTtcblxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnw6FyJyA6ICfDoXJpJztcblxuICAgIGNhc2UgJ3l5JzpcbiAgICAgIGlmIChwbHVyYWwobnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnw6FyJyA6ICfDoXJ1bScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnw6FyJyA6ICfDoXJpJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnaXMnLCB7XG4gIG1vbnRoczogJ2phbsO6YXJfZmVicsO6YXJfbWFyc19hcHLDrWxfbWHDrV9qw7puw61fasO6bMOtX8OhZ8O6c3Rfc2VwdGVtYmVyX29rdMOzYmVyX27Ds3ZlbWJlcl9kZXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW5fZmViX21hcl9hcHJfbWHDrV9qw7puX2rDumxfw6Fnw7pfc2VwX29rdF9uw7N2X2Rlcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdzdW5udWRhZ3VyX23DoW51ZGFndXJfw75yacOwanVkYWd1cl9tacOwdmlrdWRhZ3VyX2ZpbW10dWRhZ3VyX2bDtnN0dWRhZ3VyX2xhdWdhcmRhZ3VyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnc3VuX23DoW5fw75yaV9tacOwX2ZpbV9mw7ZzX2xhdScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTdV9Nw6Ffw55yX01pX0ZpX0bDtl9MYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkgW2tsLl0gSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW8OtIGRhZyBrbC5dIExUJyxcbiAgICBuZXh0RGF5OiAnW8OhIG1vcmd1biBrbC5dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2tsLl0gTFQnLFxuICAgIGxhc3REYXk6ICdbw60gZ8OmciBrbC5dIExUJyxcbiAgICBsYXN0V2VlazogJ1tzw63DsGFzdGFdIGRkZGQgW2tsLl0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZWZ0aXIgJXMnLFxuICAgIHBhc3Q6ICdmeXJpciAlcyBzw63DsGFuJyxcbiAgICBzOiB0cmFuc2xhdGUsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiAna2x1a2t1c3R1bmQnLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogdHJhbnNsYXRlLFxuICAgIGRkOiB0cmFuc2xhdGUsXG4gICAgTTogdHJhbnNsYXRlLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogdHJhbnNsYXRlLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2l0LWNoJywge1xuICBtb250aHM6ICdnZW5uYWlvX2ZlYmJyYWlvX21hcnpvX2FwcmlsZV9tYWdnaW9fZ2l1Z25vX2x1Z2xpb19hZ29zdG9fc2V0dGVtYnJlX290dG9icmVfbm92ZW1icmVfZGljZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnZ2VuX2ZlYl9tYXJfYXByX21hZ19naXVfbHVnX2Fnb19zZXRfb3R0X25vdl9kaWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnZG9tZW5pY2FfbHVuZWTDrF9tYXJ0ZWTDrF9tZXJjb2xlZMOsX2dpb3ZlZMOsX3ZlbmVyZMOsX3NhYmF0bycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RvbV9sdW5fbWFyX21lcl9naW9fdmVuX3NhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkb19sdV9tYV9tZV9naV92ZV9zYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW09nZ2kgYWxsZV0gTFQnLFxuICAgIG5leHREYXk6ICdbRG9tYW5pIGFsbGVdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2FsbGVdIExUJyxcbiAgICBsYXN0RGF5OiAnW0llcmkgYWxsZV0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICdbbGEgc2NvcnNhXSBkZGRkIFthbGxlXSBMVCc7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJ1tsbyBzY29yc29dIGRkZGQgW2FsbGVdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiBmdW5jdGlvbiBmdXR1cmUocykge1xuICAgICAgcmV0dXJuICgvXlswLTldLiskLy50ZXN0KHMpID8gJ3RyYScgOiAnaW4nKSArICcgJyArIHM7XG4gICAgfSxcbiAgICBwYXN0OiAnJXMgZmEnLFxuICAgIHM6ICdhbGN1bmkgc2Vjb25kaScsXG4gICAgc3M6ICclZCBzZWNvbmRpJyxcbiAgICBtOiAndW4gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0aScsXG4gICAgaDogXCJ1bidvcmFcIixcbiAgICBoaDogJyVkIG9yZScsXG4gICAgZDogJ3VuIGdpb3JubycsXG4gICAgZGQ6ICclZCBnaW9ybmknLFxuICAgIE06ICd1biBtZXNlJyxcbiAgICBNTTogJyVkIG1lc2knLFxuICAgIHk6ICd1biBhbm5vJyxcbiAgICB5eTogJyVkIGFubmknXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdpdCcsIHtcbiAgbW9udGhzOiAnZ2VubmFpb19mZWJicmFpb19tYXJ6b19hcHJpbGVfbWFnZ2lvX2dpdWdub19sdWdsaW9fYWdvc3RvX3NldHRlbWJyZV9vdHRvYnJlX25vdmVtYnJlX2RpY2VtYnJlJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2dlbl9mZWJfbWFyX2Fwcl9tYWdfZ2l1X2x1Z19hZ29fc2V0X290dF9ub3ZfZGljJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ2RvbWVuaWNhX2x1bmVkw6xfbWFydGVkw6xfbWVyY29sZWTDrF9naW92ZWTDrF92ZW5lcmTDrF9zYWJhdG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkb21fbHVuX21hcl9tZXJfZ2lvX3Zlbl9zYWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnZG9fbHVfbWFfbWVfZ2lfdmVfc2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogZnVuY3Rpb24gc2FtZURheSgpIHtcbiAgICAgIHJldHVybiAnW09nZ2kgYScgKyAodGhpcy5ob3VycygpID4gMSA/ICdsbGUgJyA6IHRoaXMuaG91cnMoKSA9PT0gMCA/ICcgJyA6IFwibGwnXCIpICsgJ11MVCc7XG4gICAgfSxcbiAgICBuZXh0RGF5OiBmdW5jdGlvbiBuZXh0RGF5KCkge1xuICAgICAgcmV0dXJuICdbRG9tYW5pIGEnICsgKHRoaXMuaG91cnMoKSA+IDEgPyAnbGxlICcgOiB0aGlzLmhvdXJzKCkgPT09IDAgPyAnICcgOiBcImxsJ1wiKSArICddTFQnO1xuICAgIH0sXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuICdkZGRkIFthJyArICh0aGlzLmhvdXJzKCkgPiAxID8gJ2xsZSAnIDogdGhpcy5ob3VycygpID09PSAwID8gJyAnIDogXCJsbCdcIikgKyAnXUxUJztcbiAgICB9LFxuICAgIGxhc3REYXk6IGZ1bmN0aW9uIGxhc3REYXkoKSB7XG4gICAgICByZXR1cm4gJ1tJZXJpIGEnICsgKHRoaXMuaG91cnMoKSA+IDEgPyAnbGxlICcgOiB0aGlzLmhvdXJzKCkgPT09IDAgPyAnICcgOiBcImxsJ1wiKSArICddTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1tMYSBzY29yc2FdIGRkZGQgW2EnICsgKHRoaXMuaG91cnMoKSA+IDEgPyAnbGxlICcgOiB0aGlzLmhvdXJzKCkgPT09IDAgPyAnICcgOiBcImxsJ1wiKSArICddTFQnO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICdbTG8gc2NvcnNvXSBkZGRkIFthJyArICh0aGlzLmhvdXJzKCkgPiAxID8gJ2xsZSAnIDogdGhpcy5ob3VycygpID09PSAwID8gJyAnIDogXCJsbCdcIikgKyAnXUxUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAndHJhICVzJyxcbiAgICBwYXN0OiAnJXMgZmEnLFxuICAgIHM6ICdhbGN1bmkgc2Vjb25kaScsXG4gICAgc3M6ICclZCBzZWNvbmRpJyxcbiAgICBtOiAndW4gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0aScsXG4gICAgaDogXCJ1bidvcmFcIixcbiAgICBoaDogJyVkIG9yZScsXG4gICAgZDogJ3VuIGdpb3JubycsXG4gICAgZGQ6ICclZCBnaW9ybmknLFxuICAgIHc6ICd1bmEgc2V0dGltYW5hJyxcbiAgICB3dzogJyVkIHNldHRpbWFuZScsXG4gICAgTTogJ3VuIG1lc2UnLFxuICAgIE1NOiAnJWQgbWVzaScsXG4gICAgeTogJ3VuIGFubm8nLFxuICAgIHl5OiAnJWQgYW5uaSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2phJywge1xuICBlcmFzOiBbe1xuICAgIHNpbmNlOiAnMjAxOS0wNS0wMScsXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICfku6TlkownLFxuICAgIG5hcnJvdzogJ+OLvycsXG4gICAgYWJicjogJ1InXG4gIH0sIHtcbiAgICBzaW5jZTogJzE5ODktMDEtMDgnLFxuICAgIHVudGlsOiAnMjAxOS0wNC0zMCcsXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICflubPmiJAnLFxuICAgIG5hcnJvdzogJ+ONuycsXG4gICAgYWJicjogJ0gnXG4gIH0sIHtcbiAgICBzaW5jZTogJzE5MjYtMTItMjUnLFxuICAgIHVudGlsOiAnMTk4OS0wMS0wNycsXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICfmmK3lkownLFxuICAgIG5hcnJvdzogJ+ONvCcsXG4gICAgYWJicjogJ1MnXG4gIH0sIHtcbiAgICBzaW5jZTogJzE5MTItMDctMzAnLFxuICAgIHVudGlsOiAnMTkyNi0xMi0yNCcsXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICflpKfmraMnLFxuICAgIG5hcnJvdzogJ+ONvScsXG4gICAgYWJicjogJ1QnXG4gIH0sIHtcbiAgICBzaW5jZTogJzE4NzMtMDEtMDEnLFxuICAgIHVudGlsOiAnMTkxMi0wNy0yOScsXG4gICAgb2Zmc2V0OiA2LFxuICAgIG5hbWU6ICfmmI7msrsnLFxuICAgIG5hcnJvdzogJ+ONvicsXG4gICAgYWJicjogJ00nXG4gIH0sIHtcbiAgICBzaW5jZTogJzAwMDEtMDEtMDEnLFxuICAgIHVudGlsOiAnMTg3My0xMi0zMScsXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICfopb/mmqYnLFxuICAgIG5hcnJvdzogJ0FEJyxcbiAgICBhYmJyOiAnQUQnXG4gIH0sIHtcbiAgICBzaW5jZTogJzAwMDAtMTItMzEnLFxuICAgIHVudGlsOiAtSW5maW5pdHksXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICfntIDlhYPliY0nLFxuICAgIG5hcnJvdzogJ0JDJyxcbiAgICBhYmJyOiAnQkMnXG4gIH1dLFxuICBlcmFZZWFyT3JkaW5hbFJlZ2V4OiAvKOWFg3xcXGQrKeW5tC8sXG4gIGVyYVllYXJPcmRpbmFsUGFyc2U6IGZ1bmN0aW9uIGVyYVllYXJPcmRpbmFsUGFyc2UoaW5wdXQsIG1hdGNoKSB7XG4gICAgcmV0dXJuIG1hdGNoWzFdID09PSAn5YWDJyA/IDEgOiBwYXJzZUludChtYXRjaFsxXSB8fCBpbnB1dCwgMTApO1xuICB9LFxuICBtb250aHM6ICcx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICcx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfml6Xmm5zml6Vf5pyI5puc5pelX+eBq+abnOaXpV/msLTmm5zml6Vf5pyo5puc5pelX+mHkeabnOaXpV/lnJ/mm5zml6UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfml6Vf5pyIX+eBq1/msLRf5pyoX+mHkV/lnJ8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn5pelX+aciF/ngatf5rC0X+acqF/ph5Ff5ZyfJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS9NTS9ERCcsXG4gICAgTEw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIExMTDogJ1lZWVnlubRN5pyIROaXpSBISDptbScsXG4gICAgTExMTDogJ1lZWVnlubRN5pyIROaXpSBkZGRkIEhIOm1tJyxcbiAgICBsOiAnWVlZWS9NTS9ERCcsXG4gICAgbGw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIGxsbDogJ1lZWVnlubRN5pyIROaXpSBISDptbScsXG4gICAgbGxsbDogJ1lZWVnlubRN5pyIROaXpShkZGQpIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv5Y2I5YmNfOWNiOW+jC9pLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSAn5Y2I5b6MJztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn5Y2I5YmNJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfljYjlvownO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+S7iuaXpV0gTFQnLFxuICAgIG5leHREYXk6ICdb5piO5pelXSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKG5vdykge1xuICAgICAgaWYgKG5vdy53ZWVrKCkgIT09IHRoaXMud2VlaygpKSB7XG4gICAgICAgIHJldHVybiAnW+adpemAsV1kZGRkIExUJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnZGRkZCBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW+aYqOaXpV0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2Vlayhub3cpIHtcbiAgICAgIGlmICh0aGlzLndlZWsoKSAhPT0gbm93LndlZWsoKSkge1xuICAgICAgICByZXR1cm4gJ1vlhYjpgLFdZGRkZCBMVCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ2RkZGQgTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3ml6UvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ3knOlxuICAgICAgICByZXR1cm4gbnVtYmVyID09PSAxID8gJ+WFg+W5tCcgOiBudW1iZXIgKyAn5bm0JztcblxuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pelJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz5b6MJyxcbiAgICBwYXN0OiAnJXPliY0nLFxuICAgIHM6ICfmlbDnp5InLFxuICAgIHNzOiAnJWTnp5InLFxuICAgIG06ICcx5YiGJyxcbiAgICBtbTogJyVk5YiGJyxcbiAgICBoOiAnMeaZgumWkycsXG4gICAgaGg6ICclZOaZgumWkycsXG4gICAgZDogJzHml6UnLFxuICAgIGRkOiAnJWTml6UnLFxuICAgIE06ICcx44O25pyIJyxcbiAgICBNTTogJyVk44O25pyIJyxcbiAgICB5OiAnMeW5tCcsXG4gICAgeXk6ICclZOW5tCdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnanYnLCB7XG4gIG1vbnRoczogJ0phbnVhcmlfRmVicnVhcmlfTWFyZXRfQXByaWxfTWVpX0p1bmlfSnVsaV9BZ3VzdHVzX1NlcHRlbWJlcl9Pa3RvYmVyX05vcGVtYmVyX0Rlc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NZWlfSnVuX0p1bF9BZ3NfU2VwX09rdF9Ob3BfRGVzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ01pbmdndV9TZW5lbl9TZWxvc29fUmVidV9LZW1pc19KZW11d2FoX1NlcHR1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnTWluX1Nlbl9TZWxfUmViX0tlbV9KZW1fU2VwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ01nX1NuX1NsX1JiX0ttX0ptX1NwJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEgubW0nLFxuICAgIExUUzogJ0hILm1tLnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9lbmppbmd8c2l5YW5nfHNvbnRlbnxuZGFsdS8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICdlbmppbmcnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAnc2l5YW5nJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdzb250ZW4nIHx8IG1lcmlkaWVtID09PSAnbmRhbHUnKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzIDwgMTEpIHtcbiAgICAgIHJldHVybiAnZW5qaW5nJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTUpIHtcbiAgICAgIHJldHVybiAnc2l5YW5nJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTkpIHtcbiAgICAgIHJldHVybiAnc29udGVuJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICduZGFsdSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbRGludGVuIHB1bmlrbyBwdWt1bF0gTFQnLFxuICAgIG5leHREYXk6ICdbTWJlbmphbmcgcHVrdWxdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3B1a3VsXSBMVCcsXG4gICAgbGFzdERheTogJ1tLYWxhIHdpbmdpIHB1a3VsXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtrZXBlbmdrZXIgcHVrdWxdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3dvbnRlbiBpbmcgJXMnLFxuICAgIHBhc3Q6ICclcyBpbmdrYW5nIGtlcGVuZ2tlcicsXG4gICAgczogJ3Nhd2V0YXdpcyBkZXRpaycsXG4gICAgc3M6ICclZCBkZXRpaycsXG4gICAgbTogJ3NldHVuZ2dhbCBtZW5pdCcsXG4gICAgbW06ICclZCBtZW5pdCcsXG4gICAgaDogJ3NldHVuZ2dhbCBqYW0nLFxuICAgIGhoOiAnJWQgamFtJyxcbiAgICBkOiAnc2VkaW50ZW4nLFxuICAgIGRkOiAnJWQgZGludGVuJyxcbiAgICBNOiAnc2V3dWxhbicsXG4gICAgTU06ICclZCB3dWxhbicsXG4gICAgeTogJ3NldGF1bicsXG4gICAgeXk6ICclZCB0YXVuJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdrYScsIHtcbiAgbW9udGhzOiAn4YOY4YOQ4YOc4YOV4YOQ4YOg4YOYX+GDl+GDlOGDkeGDlOGDoOGDleGDkOGDmuGDmF/hg5vhg5Dhg6Dhg6Lhg5hf4YOQ4YOe4YOg4YOY4YOa4YOYX+GDm+GDkOGDmOGDoeGDmF/hg5jhg5Xhg5zhg5jhg6Hhg5hf4YOY4YOV4YOa4YOY4YOh4YOYX+GDkOGDkuGDleGDmOGDoeGDouGDnV/hg6Hhg5Thg6Xhg6Lhg5Thg5vhg5Hhg5Thg6Dhg5hf4YOd4YOl4YOi4YOd4YOb4YOR4YOU4YOg4YOYX+GDnOGDneGDlOGDm+GDkeGDlOGDoOGDmF/hg5Phg5Thg5nhg5Thg5vhg5Hhg5Thg6Dhg5gnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4YOY4YOQ4YOcX+GDl+GDlOGDkV/hg5vhg5Dhg6Bf4YOQ4YOe4YOgX+GDm+GDkOGDmF/hg5jhg5Xhg5xf4YOY4YOV4YOaX+GDkOGDkuGDlV/hg6Hhg5Thg6Vf4YOd4YOl4YOiX+GDnOGDneGDlF/hg5Phg5Thg5knLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiB7XG4gICAgc3RhbmRhbG9uZTogJ+GDmeGDleGDmOGDoOGDkF/hg53hg6Dhg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOh4YOQ4YOb4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDneGDl+GDruGDqOGDkOGDkeGDkOGDl+GDmF/hg67hg6Phg5fhg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOe4YOQ4YOg4YOQ4YOh4YOZ4YOU4YOV4YOYX+GDqOGDkOGDkeGDkOGDl+GDmCcuc3BsaXQoJ18nKSxcbiAgICBmb3JtYXQ6ICfhg5nhg5Xhg5jhg6Dhg5Dhg6Ff4YOd4YOg4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDoeGDkOGDm+GDqOGDkOGDkeGDkOGDl+GDoV/hg53hg5fhg67hg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOu4YOj4YOX4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDnuGDkOGDoOGDkOGDoeGDmeGDlOGDleGDoV/hg6jhg5Dhg5Hhg5Dhg5fhg6EnLnNwbGl0KCdfJyksXG4gICAgaXNGb3JtYXQ6IC8o4YOs4YOY4YOc4YOQfOGDqOGDlOGDm+GDk+GDlOGDkikvXG4gIH0sXG4gIHdlZWtkYXlzU2hvcnQ6ICfhg5nhg5Xhg5hf4YOd4YOg4YOoX+GDoeGDkOGDm1/hg53hg5fhg65f4YOu4YOj4YOXX+GDnuGDkOGDoF/hg6jhg5Dhg5EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4YOZ4YOVX+GDneGDoF/hg6Hhg5Bf4YOd4YOXX+GDruGDo1/hg57hg5Bf4YOo4YOQJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+GDk+GDpuGDlOGDoV0gTFRbLeGDluGDlF0nLFxuICAgIG5leHREYXk6ICdb4YOu4YOV4YOQ4YOaXSBMVFst4YOW4YOUXScsXG4gICAgbGFzdERheTogJ1vhg5Lhg6Phg6jhg5jhg5xdIExUWy3hg5bhg5RdJyxcbiAgICBuZXh0V2VlazogJ1vhg6jhg5Thg5vhg5Phg5Thg5JdIGRkZGQgTFRbLeGDluGDlF0nLFxuICAgIGxhc3RXZWVrOiAnW+GDrOGDmOGDnOGDkF0gZGRkZCBMVC3hg5bhg5QnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiBmdW5jdGlvbiBmdXR1cmUocykge1xuICAgICAgcmV0dXJuIHMucmVwbGFjZSgvKOGDrOGDkOGDm3zhg6zhg6Phg5d84YOh4YOQ4YOQ4YOXfOGDrOGDlOGDmnzhg5Phg6Z84YOX4YOVKSjhg5h84YOUKS8sIGZ1bmN0aW9uICgkMCwgJDEsICQyKSB7XG4gICAgICAgIHJldHVybiAkMiA9PT0gJ+GDmCcgPyAkMSArICfhg6jhg5gnIDogJDEgKyAkMiArICfhg6jhg5gnO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXN0OiBmdW5jdGlvbiBwYXN0KHMpIHtcbiAgICAgIGlmICgvKOGDrOGDkOGDm+GDmHzhg6zhg6Phg5fhg5h84YOh4YOQ4YOQ4YOX4YOYfOGDk+GDpuGDlHzhg5fhg5Xhg5QpLy50ZXN0KHMpKSB7XG4gICAgICAgIHJldHVybiBzLnJlcGxhY2UoLyjhg5h84YOUKSQvLCAn4YOY4YOhIOGDrOGDmOGDnCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoL+GDrOGDlOGDmuGDmC8udGVzdChzKSkge1xuICAgICAgICByZXR1cm4gcy5yZXBsYWNlKC/hg6zhg5Thg5rhg5gkLywgJ+GDrOGDmuGDmOGDoSDhg6zhg5jhg5wnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHM7XG4gICAgfSxcbiAgICBzOiAn4YOg4YOQ4YOb4YOT4YOU4YOc4YOY4YOb4YOUIOGDrOGDkOGDm+GDmCcsXG4gICAgc3M6ICclZCDhg6zhg5Dhg5vhg5gnLFxuICAgIG06ICfhg6zhg6Phg5fhg5gnLFxuICAgIG1tOiAnJWQg4YOs4YOj4YOX4YOYJyxcbiAgICBoOiAn4YOh4YOQ4YOQ4YOX4YOYJyxcbiAgICBoaDogJyVkIOGDoeGDkOGDkOGDl+GDmCcsXG4gICAgZDogJ+GDk+GDpuGDlCcsXG4gICAgZGQ6ICclZCDhg5Phg6bhg5QnLFxuICAgIE06ICfhg5fhg5Xhg5QnLFxuICAgIE1NOiAnJWQg4YOX4YOV4YOUJyxcbiAgICB5OiAn4YOs4YOU4YOa4YOYJyxcbiAgICB5eTogJyVkIOGDrOGDlOGDmuGDmCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogLzB8MS3hg5rhg5h84YOb4YOULVxcZHsxLDJ9fFxcZHsxLDJ9LeGDlC8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG5cbiAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3hg5rhg5gnO1xuICAgIH1cblxuICAgIGlmIChudW1iZXIgPCAyMCB8fCBudW1iZXIgPD0gMTAwICYmIG51bWJlciAlIDIwID09PSAwIHx8IG51bWJlciAlIDEwMCA9PT0gMCkge1xuICAgICAgcmV0dXJuICfhg5vhg5QtJyArIG51bWJlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVtYmVyICsgJy3hg5QnO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3VmZml4ZXMgPSB7XG4gIDA6ICct0YjRlicsXG4gIDE6ICct0YjRlicsXG4gIDI6ICct0YjRlicsXG4gIDM6ICct0YjRlicsXG4gIDQ6ICct0YjRlicsXG4gIDU6ICct0YjRlicsXG4gIDY6ICct0YjRiycsXG4gIDc6ICct0YjRlicsXG4gIDg6ICct0YjRlicsXG4gIDk6ICct0YjRiycsXG4gIDEwOiAnLdGI0YsnLFxuICAyMDogJy3RiNGLJyxcbiAgMzA6ICct0YjRiycsXG4gIDQwOiAnLdGI0YsnLFxuICA1MDogJy3RiNGWJyxcbiAgNjA6ICct0YjRiycsXG4gIDcwOiAnLdGI0ZYnLFxuICA4MDogJy3RiNGWJyxcbiAgOTA6ICct0YjRiycsXG4gIDEwMDogJy3RiNGWJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2trJywge1xuICBtb250aHM6ICfSm9Cw0qPRgtCw0YBf0LDSm9C/0LDQvV/QvdCw0YPRgNGL0Ldf0YHTmdGD0ZbRgF/QvNCw0LzRi9GAX9C80LDRg9GB0YvQvF/RiNGW0LvQtNC1X9GC0LDQvNGL0Ldf0pvRi9GA0LrSr9C50LXQul/Sm9Cw0LfQsNC9X9Kb0LDRgNCw0YjQsF/QttC10LvRgtC+0pvRgdCw0L0nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn0pvQsNKjX9Cw0pvQv1/QvdCw0YNf0YHTmdGDX9C80LDQvF/QvNCw0YNf0YjRltC7X9GC0LDQvF/Sm9GL0YBf0pvQsNC3X9Kb0LDRgF/QttC10LsnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn0LbQtdC60YHQtdC90LHRll/QtNKv0LnRgdC10L3QsdGWX9GB0LXQudGB0LXQvdCx0ZZf0YHTmdGA0YHQtdC90LHRll/QsdC10LnRgdC10L3QsdGWX9C20rHQvNCwX9GB0LXQvdCx0ZYnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQttC10Lpf0LTSr9C5X9GB0LXQuV/RgdOZ0YBf0LHQtdC5X9C20rHQvF/RgdC10L0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0LbQul/QtNC5X9GB0Llf0YHRgF/QsdC5X9C20Lxf0YHQvScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQkdKv0LPRltC9INGB0LDSk9Cw0YJdIExUJyxcbiAgICBuZXh0RGF5OiAnW9CV0YDRgtC10qMg0YHQsNKT0LDRgl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb0YHQsNKT0LDRgl0gTFQnLFxuICAgIGxhc3REYXk6ICdb0JrQtdGI0LUg0YHQsNKT0LDRgl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW9Oo0YLQutC10L0g0LDQv9GC0LDQvdGL0qNdIGRkZGQgW9GB0LDSk9Cw0YJdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzINGW0YjRltC90LTQtScsXG4gICAgcGFzdDogJyVzINCx0rHRgNGL0L0nLFxuICAgIHM6ICfQsdGW0YDQvdC10YjQtSDRgdC10LrRg9C90LQnLFxuICAgIHNzOiAnJWQg0YHQtdC60YPQvdC0JyxcbiAgICBtOiAn0LHRltGAINC80LjQvdGD0YInLFxuICAgIG1tOiAnJWQg0LzQuNC90YPRgicsXG4gICAgaDogJ9Cx0ZbRgCDRgdCw0pPQsNGCJyxcbiAgICBoaDogJyVkINGB0LDSk9Cw0YInLFxuICAgIGQ6ICfQsdGW0YAg0LrSr9C9JyxcbiAgICBkZDogJyVkINC60q/QvScsXG4gICAgTTogJ9Cx0ZbRgCDQsNC5JyxcbiAgICBNTTogJyVkINCw0LknLFxuICAgIHk6ICfQsdGW0YAg0LbRi9C7JyxcbiAgICB5eTogJyVkINC20YvQuydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LSjRiNGWfNGI0YspLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYSA9IG51bWJlciAlIDEwLFxuICAgICAgICBiID0gbnVtYmVyID49IDEwMCA/IDEwMCA6IG51bGw7XG4gICAgcmV0dXJuIG51bWJlciArIChzdWZmaXhlc1tudW1iZXJdIHx8IHN1ZmZpeGVzW2FdIHx8IHN1ZmZpeGVzW2JdKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+GfoScsXG4gIDI6ICfhn6InLFxuICAzOiAn4Z+jJyxcbiAgNDogJ+GfpCcsXG4gIDU6ICfhn6UnLFxuICA2OiAn4Z+mJyxcbiAgNzogJ+GfpycsXG4gIDg6ICfhn6gnLFxuICA5OiAn4Z+pJyxcbiAgMDogJ+GfoCdcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4Z+hJzogJzEnLFxuICAn4Z+iJzogJzInLFxuICAn4Z+jJzogJzMnLFxuICAn4Z+kJzogJzQnLFxuICAn4Z+lJzogJzUnLFxuICAn4Z+mJzogJzYnLFxuICAn4Z+nJzogJzcnLFxuICAn4Z+oJzogJzgnLFxuICAn4Z+pJzogJzknLFxuICAn4Z+gJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgna20nLCB7XG4gIG1vbnRoczogJ+GemOGegOGemuGetl/hnoDhnrvhnpjhn5Lhnpfhn4hf4Z6Y4Z644Z6T4Z62X+GemOGfgeGen+Getl/hnqfhnp/hnpfhnrZf4Z6Y4Z634Z6Q4Z674Z6T4Z62X+GegOGegOGfkuGegOGeiuGetl/hnp/hnrjhnqDhnrZf4Z6A4Z6J4Z+S4Z6J4Z62X+Gej+Geu+Gem+Getl/hnpzhnrfhnoXhn5LhnobhnrfhnoDhnrZf4Z6S4Z+S4Z6T4Z68Jy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+GemOGegOGemuGetl/hnoDhnrvhnpjhn5Lhnpfhn4hf4Z6Y4Z644Z6T4Z62X+GemOGfgeGen+Getl/hnqfhnp/hnpfhnrZf4Z6Y4Z634Z6Q4Z674Z6T4Z62X+GegOGegOGfkuGegOGeiuGetl/hnp/hnrjhnqDhnrZf4Z6A4Z6J4Z+S4Z6J4Z62X+Gej+Geu+Gem+Getl/hnpzhnrfhnoXhn5LhnobhnrfhnoDhnrZf4Z6S4Z+S4Z6T4Z68Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+GeouGetuGekeGet+Gej+GfkuGemV/hnoXhn5DhnpPhn5LhnpFf4Z6i4Z6E4Z+S4Z6C4Z624Z6aX+GeluGeu+Gekl/hnpbhn5LhnprhnqDhnp/hn5LhnpThno/hnrfhn41f4Z6f4Z674Z6A4Z+S4Z6aX+Gen+GfheGemuGfjScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+GeouGetl/hnoVf4Z6iX+Gell/hnpbhn5Lhnppf4Z6f4Z67X+Genycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfhnqLhnrZf4Z6FX+Geol/hnpZf4Z6W4Z+S4Z6aX+Gen+Geu1/hnp8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/hnpbhn5LhnprhnrnhnoB84Z6b4Z+S4Z6E4Z624Z6FLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gJ+Gem+GfkuGehOGetuGehSc7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ+GeluGfkuGemuGeueGegCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4Z6b4Z+S4Z6E4Z624Z6FJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vhnpDhn5LhnoThn4PhnpPhn4Hhn4cg4Z6Y4Z+J4Z+E4Z6EXSBMVCcsXG4gICAgbmV4dERheTogJ1vhnp/hn5LhnqLhn4LhnoAg4Z6Y4Z+J4Z+E4Z6EXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvhnpjhn4nhn4ThnoRdIExUJyxcbiAgICBsYXN0RGF5OiAnW+GemOGfkuGen+Get+Gem+GemOGet+GeiSDhnpjhn4nhn4ThnoRdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW+Gen+GelOGfkuGej+GetuGeoOGfjeGemOGeu+Gek10gW+GemOGfieGfhOGehF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPhnpHhn4Dhno8nLFxuICAgIHBhc3Q6ICclc+GemOGeu+GekycsXG4gICAgczogJ+GelOGfieGeu+Gek+GfkuGemOGetuGek+GenOGet+Gek+GetuGekeGeuCcsXG4gICAgc3M6ICclZCDhnpzhnrfhnpPhnrbhnpHhnrgnLFxuICAgIG06ICfhnpjhnr3hnpnhnpPhnrbhnpHhnrgnLFxuICAgIG1tOiAnJWQg4Z6T4Z624Z6R4Z64JyxcbiAgICBoOiAn4Z6Y4Z694Z6Z4Z6Y4Z+J4Z+E4Z6EJyxcbiAgICBoaDogJyVkIOGemOGfieGfhOGehCcsXG4gICAgZDogJ+GemOGeveGemeGekOGfkuGehOGfgycsXG4gICAgZGQ6ICclZCDhnpDhn5LhnoThn4MnLFxuICAgIE06ICfhnpjhnr3hnpnhnoHhn4InLFxuICAgIE1NOiAnJWQg4Z6B4Z+CJyxcbiAgICB5OiAn4Z6Y4Z694Z6Z4Z6G4Z+S4Z6T4Z624Z+GJyxcbiAgICB5eTogJyVkIOGehuGfkuGek+GetuGfhidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL+GekeGeuFxcZHsxLDJ9LyxcbiAgb3JkaW5hbDogJ+GekeGeuCVkJyxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+GfoeGfouGfo+GfpOGfpeGfpuGfp+GfqOGfqeGfoF0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4LOnJyxcbiAgMjogJ+CzqCcsXG4gIDM6ICfgs6knLFxuICA0OiAn4LOqJyxcbiAgNTogJ+CzqycsXG4gIDY6ICfgs6wnLFxuICA3OiAn4LOtJyxcbiAgODogJ+CzricsXG4gIDk6ICfgs68nLFxuICAwOiAn4LOmJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgs6cnOiAnMScsXG4gICfgs6gnOiAnMicsXG4gICfgs6knOiAnMycsXG4gICfgs6onOiAnNCcsXG4gICfgs6snOiAnNScsXG4gICfgs6wnOiAnNicsXG4gICfgs60nOiAnNycsXG4gICfgs64nOiAnOCcsXG4gICfgs68nOiAnOScsXG4gICfgs6YnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdrbicsIHtcbiAgbW9udGhzOiAn4LKc4LKo4LK14LKw4LK/X+Cyq+CzhuCyrOCzjeCysOCyteCysOCyv1/gsq7gsr7gsrDgs43gsprgs41f4LKP4LKq4LON4LKw4LK/4LKy4LONX+CyruCzhuCzlV/gspzgs4Lgsqjgs41f4LKc4LOB4LKy4LOG4LOWX+CyhuCyl+CyuOCzjeCyn+CzjV/gsrjgs4bgsqrgs43gsp/gs4bgsoLgsqzgsrDgs41f4LKF4LKV4LON4LKf4LOG4LOC4LOV4LKs4LKw4LONX+CyqOCyteCzhuCyguCyrOCysOCzjV/gsqHgsr/gsrjgs4bgsoLgsqzgsrDgs40nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4LKc4LKoX+Cyq+CzhuCyrOCzjeCysF/gsq7gsr7gsrDgs43gsprgs41f4LKP4LKq4LON4LKw4LK/4LKy4LONX+CyruCzhuCzlV/gspzgs4Lgsqjgs41f4LKc4LOB4LKy4LOG4LOWX+CyhuCyl+CyuOCzjeCyn+CzjV/gsrjgs4bgsqrgs43gsp/gs4bgsoJf4LKF4LKV4LON4LKf4LOG4LOC4LOVX+CyqOCyteCzhuCygl/gsqHgsr/gsrjgs4bgsoInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4LKt4LK+4LKo4LOB4LK14LK+4LKwX+CyuOCzhuCzguCzleCyruCyteCyvuCysF/gsq7gsoLgspfgsrPgsrXgsr7gsrBf4LKs4LOB4LKn4LK14LK+4LKwX+Cyl+CzgeCysOCzgeCyteCyvuCysF/gsrbgs4HgspXgs43gsrDgsrXgsr7gsrBf4LK24LKo4LK/4LK14LK+4LKwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4LKt4LK+4LKo4LOBX+CyuOCzhuCzguCzleCyrl/gsq7gsoLgspfgsrNf4LKs4LOB4LKnX+Cyl+CzgeCysOCzgV/gsrbgs4HgspXgs43gsrBf4LK24LKo4LK/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CyreCyvl/gsrjgs4bgs4Lgs5Vf4LKu4LKCX+CyrOCzgV/gspfgs4Ff4LK24LOBX+Cyticuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbScsXG4gICAgTFRTOiAnQSBoOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgsofgsoLgsqbgs4FdIExUJyxcbiAgICBuZXh0RGF5OiAnW+CyqOCyvuCys+Czhl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCwgTFQnLFxuICAgIGxhc3REYXk6ICdb4LKo4LK/4LKo4LON4LKo4LOGXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4LKV4LOG4LOC4LKo4LOG4LKvXSBkZGRkLCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDgsqjgsoLgsqTgsrAnLFxuICAgIHBhc3Q6ICclcyDgsrngsr/gsoLgsqbgs4YnLFxuICAgIHM6ICfgspXgs4bgsrLgsrXgs4Eg4LKV4LON4LK34LKj4LKX4LKz4LOBJyxcbiAgICBzczogJyVkIOCyuOCzhuCyleCzhuCyguCyoeCzgeCyl+Cys+CzgScsXG4gICAgbTogJ+CykuCyguCypuCzgSDgsqjgsr/gsq7gsr/gsrcnLFxuICAgIG1tOiAnJWQg4LKo4LK/4LKu4LK/4LK3JyxcbiAgICBoOiAn4LKS4LKC4LKm4LOBIOCyl+CyguCyn+CzhicsXG4gICAgaGg6ICclZCDgspfgsoLgsp/gs4YnLFxuICAgIGQ6ICfgspLgsoLgsqbgs4Eg4LKm4LK/4LKoJyxcbiAgICBkZDogJyVkIOCypuCyv+CyqCcsXG4gICAgTTogJ+CykuCyguCypuCzgSDgsqTgsr/gsoLgspfgsrPgs4EnLFxuICAgIE1NOiAnJWQg4LKk4LK/4LKC4LKX4LKz4LOBJyxcbiAgICB5OiAn4LKS4LKC4LKm4LOBIOCyteCysOCzjeCytycsXG4gICAgeXk6ICclZCDgsrXgsrDgs43gsrcnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgs6fgs6jgs6ngs6rgs6vgs6zgs63gs67gs6/gs6ZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CysOCyvuCypOCzjeCysOCyv3zgsqzgs4bgsrPgsr/gspfgs43gspfgs4Z84LKu4LKn4LON4LKv4LK+4LK54LON4LKofOCyuOCyguCynOCzhi8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgsrDgsr7gsqTgs43gsrDgsr8nKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgsqzgs4bgsrPgsr/gspfgs43gspfgs4YnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4LKu4LKn4LON4LKv4LK+4LK54LON4LKoJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTAgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgsrjgsoLgspzgs4YnKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfgsrDgsr7gsqTgs43gsrDgsr8nO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEwKSB7XG4gICAgICByZXR1cm4gJ+CyrOCzhuCys+Cyv+Cyl+CzjeCyl+Czhic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn4LKu4LKn4LON4LKv4LK+4LK54LON4LKoJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgsrjgsoLgspzgs4YnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+CysOCyvuCypOCzjeCysOCyvyc7XG4gICAgfVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0o4LKo4LOG4LOVKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlciArICfgsqjgs4bgs5UnO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdrbycsIHtcbiAgbW9udGhzOiAnMeyblF8y7JuUXzPsm5RfNOyblF817JuUXzbsm5RfN+yblF847JuUXznsm5RfMTDsm5RfMTHsm5RfMTLsm5QnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnMeyblF8y7JuUXzPsm5RfNOyblF817JuUXzbsm5RfN+yblF847JuUXznsm5RfMTDsm5RfMTHsm5RfMTLsm5QnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn7J287JqU7J28X+yblOyalOydvF/tmZTsmpTsnbxf7IiY7JqU7J28X+uqqeyalOydvF/quIjsmpTsnbxf7Yag7JqU7J28Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn7J28X+yblF/tmZRf7IiYX+uqqV/quIhf7YagJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+ydvF/sm5Rf7ZmUX+yImF/rqqlf6riIX+2GoCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbScsXG4gICAgTFRTOiAnQSBoOm1tOnNzJyxcbiAgICBMOiAnWVlZWS5NTS5ERC4nLFxuICAgIExMOiAnWVlZWeuFhCBNTU1NIETsnbwnLFxuICAgIExMTDogJ1lZWVnrhYQgTU1NTSBE7J28IEEgaDptbScsXG4gICAgTExMTDogJ1lZWVnrhYQgTU1NTSBE7J28IGRkZGQgQSBoOm1tJyxcbiAgICBsOiAnWVlZWS5NTS5ERC4nLFxuICAgIGxsOiAnWVlZWeuFhCBNTU1NIETsnbwnLFxuICAgIGxsbDogJ1lZWVnrhYQgTU1NTSBE7J28IEEgaDptbScsXG4gICAgbGxsbDogJ1lZWVnrhYQgTU1NTSBE7J28IGRkZGQgQSBoOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICfsmKTripggTFQnLFxuICAgIG5leHREYXk6ICfrgrTsnbwgTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBMVCcsXG4gICAgbGFzdERheTogJ+yWtOygnCBMVCcsXG4gICAgbGFzdFdlZWs6ICfsp4Drgpzso7wgZGRkZCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDtm4QnLFxuICAgIHBhc3Q6ICclcyDsoIQnLFxuICAgIHM6ICfrqocg7LSIJyxcbiAgICBzczogJyVk7LSIJyxcbiAgICBtOiAnMeu2hCcsXG4gICAgbW06ICclZOu2hCcsXG4gICAgaDogJ+2VnCDsi5zqsIQnLFxuICAgIGhoOiAnJWTsi5zqsIQnLFxuICAgIGQ6ICftlZjro6gnLFxuICAgIGRkOiAnJWTsnbwnLFxuICAgIE06ICftlZwg64usJyxcbiAgICBNTTogJyVk64usJyxcbiAgICB5OiAn7J28IOuFhCcsXG4gICAgeXk6ICclZOuFhCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KOydvHzsm5R87KO8KS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn7J28JztcblxuICAgICAgY2FzZSAnTSc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn7JuUJztcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfso7wnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+yYpOyghHzsmKTtm4QvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuID09PSAn7Jik7ZuEJztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNVcHBlcikge1xuICAgIHJldHVybiBob3VyIDwgMTIgPyAn7Jik7KCEJyA6ICfsmKTtm4QnO1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn2aEnLFxuICAyOiAn2aInLFxuICAzOiAn2aMnLFxuICA0OiAn2aQnLFxuICA1OiAn2aUnLFxuICA2OiAn2aYnLFxuICA3OiAn2acnLFxuICA4OiAn2agnLFxuICA5OiAn2aknLFxuICAwOiAn2aAnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ9mhJzogJzEnLFxuICAn2aInOiAnMicsXG4gICfZoyc6ICczJyxcbiAgJ9mkJzogJzQnLFxuICAn2aUnOiAnNScsXG4gICfZpic6ICc2JyxcbiAgJ9mnJzogJzcnLFxuICAn2agnOiAnOCcsXG4gICfZqSc6ICc5JyxcbiAgJ9mgJzogJzAnXG59LFxuICAgIG1vbnRocyA9IFsn2qnYp9mG2YjZhtuMINiv2YjZiNuV2YUnLCAn2LTZiNio2KfYqicsICfYptin2LLYp9ixJywgJ9mG24zYs9in2YYnLCAn2KbYp9uM2KfYsScsICfYrdmI2LLblduM2LHYp9mGJywgJ9iq25XZhdmF2YjYsicsICfYptin2KgnLCAn2KbblduM2YTZiNmI2YQnLCAn2KrYtNix24zZhtuMINuM25XZg9uV2YUnLCAn2KrYtNix24zZhtuMINiv2YjZiNuV2YUnLCAn2YPYp9mG2YjZhtuMINuM25XaqduV2YUnXTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2t1Jywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRocyxcbiAgd2Vla2RheXM6ICfbjNmH4oCM2YPYtNmH4oCM2YXZhdmH4oCMX9iv2YjZiNi02YfigIzZhdmF2YfigIxf2LPbjti02YfigIzZhdmF2YfigIxf2obZiNin2LHYtNmH4oCM2YXZhdmH4oCMX9m+247Zhtis2LTZh+KAjNmF2YXZh+KAjF/Zh9mH4oCM24zZhtuMX9i02YfigIzZhdmF2YfigIwnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfbjNmH4oCM2YPYtNmH4oCM2YVf2K/ZiNmI2LTZh+KAjNmFX9iz247YtNmH4oCM2YVf2obZiNin2LHYtNmH4oCM2YVf2b7bjtmG2KzYtNmH4oCM2YVf2YfZh+KAjNuM2YbbjF/YtNmH4oCM2YXZhdmH4oCMJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9uMX9ivX9izX9qGX9m+X9mHX9i0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2KbbjtmI2KfYsdmH4oCMfNio2YfigIzbjNin2YbbjC8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL9im247ZiNin2LHZh+KAjC8udGVzdChpbnB1dCk7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9io2YfigIzbjNin2YbbjCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2KbbjtmI2KfYsdmH4oCMJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYptmH4oCM2YXYsduGINmD2KfYqtqY2YXbjtixXSBMVCcsXG4gICAgbmV4dERheTogJ1vYqNmH4oCM24zYp9mG24wg2YPYp9iq2pjZhduO2LFdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9mD2KfYqtqY2YXbjtixXSBMVCcsXG4gICAgbGFzdERheTogJ1vYr9mI247ZhtuOINmD2KfYqtqY2YXbjtixXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvZg9in2KramNmF247YsV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2YTZh+KAjCAlcycsXG4gICAgcGFzdDogJyVzJyxcbiAgICBzOiAn2obZh+KAjNmG2K8g2obYsdmD2YfigIzbjNmH4oCM2YMnLFxuICAgIHNzOiAn2obYsdmD2YfigIwgJWQnLFxuICAgIG06ICfbjNmH4oCM2YMg2K7ZiNmE2YfigIzZgycsXG4gICAgbW06ICclZCDYrtmI2YTZh+KAjNmDJyxcbiAgICBoOiAn24zZh+KAjNmDINmD2KfYqtqY2YXbjtixJyxcbiAgICBoaDogJyVkINmD2KfYqtqY2YXbjtixJyxcbiAgICBkOiAn24zZh+KAjNmDINqV24bamCcsXG4gICAgZGQ6ICclZCDalduG2pgnLFxuICAgIE06ICfbjNmH4oCM2YMg2YXYp9mG2q8nLFxuICAgIE1NOiAnJWQg2YXYp9mG2q8nLFxuICAgIHk6ICfbjNmH4oCM2YMg2LPYp9q1JyxcbiAgICB5eTogJyVkINiz2KfatSdcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KS5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiA2LFxuICAgIGRveTogMTJcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN1ZmZpeGVzID0ge1xuICAwOiAnLdGH0q8nLFxuICAxOiAnLdGH0LgnLFxuICAyOiAnLdGH0LgnLFxuICAzOiAnLdGH0q8nLFxuICA0OiAnLdGH0q8nLFxuICA1OiAnLdGH0LgnLFxuICA2OiAnLdGH0YsnLFxuICA3OiAnLdGH0LgnLFxuICA4OiAnLdGH0LgnLFxuICA5OiAnLdGH0YMnLFxuICAxMDogJy3Rh9GDJyxcbiAgMjA6ICct0YfRiycsXG4gIDMwOiAnLdGH0YMnLFxuICA0MDogJy3Rh9GLJyxcbiAgNTA6ICct0YfSrycsXG4gIDYwOiAnLdGH0YsnLFxuICA3MDogJy3Rh9C4JyxcbiAgODA6ICct0YfQuCcsXG4gIDkwOiAnLdGH0YMnLFxuICAxMDA6ICct0YfSrydcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdreScsIHtcbiAgbW9udGhzOiAn0Y/QvdCy0LDRgNGMX9GE0LXQstGA0LDQu9GMX9C80LDRgNGCX9Cw0L/RgNC10LvRjF/QvNCw0Llf0LjRjtC90Yxf0LjRjtC70Yxf0LDQstCz0YPRgdGCX9GB0LXQvdGC0Y/QsdGA0Yxf0L7QutGC0Y/QsdGA0Yxf0L3QvtGP0LHRgNGMX9C00LXQutCw0LHRgNGMJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9GP0L3Qsl/RhNC10LJf0LzQsNGA0YJf0LDQv9GAX9C80LDQuV/QuNGO0L3RjF/QuNGO0LvRjF/QsNCy0LNf0YHQtdC9X9C+0LrRgl/QvdC+0Y9f0LTQtdC6Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ9CW0LXQutGI0LXQvNCx0Lhf0JTSr9C50YjTqdC80LHSr1/QqNC10LnRiNC10LzQsdC4X9Co0LDRgNGI0LXQvNCx0Lhf0JHQtdC50YjQtdC80LHQuF/QltGD0LzQsF/QmNGI0LXQvNCx0LgnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQltC10Lpf0JTSr9C5X9Co0LXQuV/QqNCw0YBf0JHQtdC5X9CW0YPQvF/QmNGI0LUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0JbQul/QlNC5X9Co0Llf0KjRgF/QkdC5X9CW0Lxf0JjRiCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQkdKv0LPSr9C9INGB0LDQsNGCXSBMVCcsXG4gICAgbmV4dERheTogJ1vQrdGA0YLQtdKjINGB0LDQsNGCXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvRgdCw0LDRgl0gTFQnLFxuICAgIGxhc3REYXk6ICdb0JrQtdGH0Y3RjSDRgdCw0LDRgl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW9Oo0YLQutOp0L0g0LDQv9GC0LDQvdGL0L1dIGRkZGQgW9C60q/QvdKvXSBb0YHQsNCw0YJdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzINC40YfQuNC90LTQtScsXG4gICAgcGFzdDogJyVzINC80YPRgNGD0L0nLFxuICAgIHM6ICfQsdC40YDQvdC10YfQtSDRgdC10LrRg9C90LQnLFxuICAgIHNzOiAnJWQg0YHQtdC60YPQvdC0JyxcbiAgICBtOiAn0LHQuNGAINC80q/QvdOp0YInLFxuICAgIG1tOiAnJWQg0LzSr9C906nRgicsXG4gICAgaDogJ9Cx0LjRgCDRgdCw0LDRgicsXG4gICAgaGg6ICclZCDRgdCw0LDRgicsXG4gICAgZDogJ9Cx0LjRgCDQutKv0L0nLFxuICAgIGRkOiAnJWQg0LrSr9C9JyxcbiAgICBNOiAn0LHQuNGAINCw0LknLFxuICAgIE1NOiAnJWQg0LDQuScsXG4gICAgeTogJ9Cx0LjRgCDQttGL0LsnLFxuICAgIHl5OiAnJWQg0LbRi9C7J1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0tKNGH0Lh80YfRi3zRh9KvfNGH0YMpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYSA9IG51bWJlciAlIDEwLFxuICAgICAgICBiID0gbnVtYmVyID49IDEwMCA/IDEwMCA6IG51bGw7XG4gICAgcmV0dXJuIG51bWJlciArIChzdWZmaXhlc1tudW1iZXJdIHx8IHN1ZmZpeGVzW2FdIHx8IHN1ZmZpeGVzW2JdKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIG06IFsnZW5nIE1pbnV0dCcsICdlbmdlciBNaW51dHQnXSxcbiAgICBoOiBbJ2VuZyBTdG9ubicsICdlbmdlciBTdG9ubiddLFxuICAgIGQ6IFsnZWVuIERhZycsICdlbmdlbSBEYWcnXSxcbiAgICBNOiBbJ2VlIE1vdW50JywgJ2VuZ2VtIE1vdW50J10sXG4gICAgeTogWydlZSBKb2VyJywgJ2VuZ2VtIEpvZXInXVxuICB9O1xuICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NGdXR1cmVUaW1lKHN0cmluZykge1xuICB2YXIgbnVtYmVyID0gc3RyaW5nLnN1YnN0cigwLCBzdHJpbmcuaW5kZXhPZignICcpKTtcblxuICBpZiAoZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlcikpIHtcbiAgICByZXR1cm4gJ2EgJyArIHN0cmluZztcbiAgfVxuXG4gIHJldHVybiAnYW4gJyArIHN0cmluZztcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1Bhc3RUaW1lKHN0cmluZykge1xuICB2YXIgbnVtYmVyID0gc3RyaW5nLnN1YnN0cigwLCBzdHJpbmcuaW5kZXhPZignICcpKTtcblxuICBpZiAoZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlcikpIHtcbiAgICByZXR1cm4gJ3ZpcnUgJyArIHN0cmluZztcbiAgfVxuXG4gIHJldHVybiAndmlydW4gJyArIHN0cmluZztcbn1cblxuZnVuY3Rpb24gZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlcikge1xuICBudW1iZXIgPSBwYXJzZUludChudW1iZXIsIDEwKTtcblxuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChudW1iZXIgPCAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAobnVtYmVyIDwgMTApIHtcbiAgICBpZiAoNCA8PSBudW1iZXIgJiYgbnVtYmVyIDw9IDcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIGlmIChudW1iZXIgPCAxMDApIHtcbiAgICB2YXIgbGFzdERpZ2l0ID0gbnVtYmVyICUgMTAsXG4gICAgICAgIGZpcnN0RGlnaXQgPSBudW1iZXIgLyAxMDtcblxuICAgIGlmIChsYXN0RGlnaXQgPT09IDApIHtcbiAgICAgIHJldHVybiBlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIoZmlyc3REaWdpdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVpZmVsZXJSZWdlbEFwcGxpZXNUb051bWJlcihsYXN0RGlnaXQpO1xuICB9IGVsc2UgaWYgKG51bWJlciA8IDEwMDAwKSB7XG4gICAgd2hpbGUgKG51bWJlciA+PSAxMCkge1xuICAgICAgbnVtYmVyID0gbnVtYmVyIC8gMTA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVpZmVsZXJSZWdlbEFwcGxpZXNUb051bWJlcihudW1iZXIpO1xuICB9IGVsc2Uge1xuICAgIG51bWJlciA9IG51bWJlciAvIDEwMDA7XG4gICAgcmV0dXJuIGVpZmVsZXJSZWdlbEFwcGxpZXNUb051bWJlcihudW1iZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2xiJywge1xuICBtb250aHM6ICdKYW51YXJfRmVicnVhcl9Nw6RlcnpfQWJyw6tsbF9NZWVfSnVuaV9KdWxpX0F1Z3VzdF9TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXplbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW4uX0ZlYnIuX01yei5fQWJyLl9NZWVfSnVuLl9KdWwuX0F1Zy5fU2VwdC5fT2t0Ll9Ob3YuX0Rlei4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnU29ubmRlZ19Nw6lpbmRlZ19Ew6tuc2NoZGVnX03Dq3R0d29jaF9Eb25uZXNjaGRlZ19GcmVpZGVnX1NhbXNjaGRlZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1NvLl9Nw6kuX0TDqy5fTcOrLl9Eby5fRnIuX1NhLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTb19Nw6lfRMOrX03Dq19Eb19Gcl9TYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbSBbQXVlcl0nLFxuICAgIExUUzogJ0g6bW06c3MgW0F1ZXJdJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBIOm1tIFtBdWVyXScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIFtBdWVyXSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0hhdXQgdW1dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnLFxuICAgIG5leHREYXk6ICdbTXVlciB1bV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbdW1dIExUJyxcbiAgICBsYXN0RGF5OiAnW0fDq3NjaHRlciB1bV0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gJ1tMZXNjaHRlbl0gZGRkZCBbdW1dIExUJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiAnW0xlc2NodGVdIGRkZGQgW3VtXSBMVCc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6IHByb2Nlc3NGdXR1cmVUaW1lLFxuICAgIHBhc3Q6IHByb2Nlc3NQYXN0VGltZSxcbiAgICBzOiAnZSBwdWVyIFNla29ubmVuJyxcbiAgICBzczogJyVkIFNla29ubmVuJyxcbiAgICBtOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG1tOiAnJWQgTWludXR0ZW4nLFxuICAgIGg6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaGg6ICclZCBTdG9ubmVuJyxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiAnJWQgRGVlZycsXG4gICAgTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBNTTogJyVkIE3DqWludCcsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogJyVkIEpvZXInXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdsbycsIHtcbiAgbW9udGhzOiAn4Lqh4Lqx4LqH4LqB4Lqt4LqZX+C6geC6uOC6oeC6nuC6sl/guqHgurXgupngurJf4LuA4Lqh4Lqq4LqyX+C6nuC6tuC6lOC6quC6sOC6nuC6sl/guqHgurTgupbgurjgupngurJf4LqB4LuN4Lql4Lqw4LqB4Lq74LqUX+C6quC6tOC6h+C6q+C6sl/guoHgurHgupnguo3gurJf4LqV4Lq44Lql4LqyX+C6nuC6sOC6iOC6tOC6gV/gupfgurHgupnguqfgurInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4Lqh4Lqx4LqH4LqB4Lqt4LqZX+C6geC6uOC6oeC6nuC6sl/guqHgurXgupngurJf4LuA4Lqh4Lqq4LqyX+C6nuC6tuC6lOC6quC6sOC6nuC6sl/guqHgurTgupbgurjgupngurJf4LqB4LuN4Lql4Lqw4LqB4Lq74LqUX+C6quC6tOC6h+C6q+C6sl/guoHgurHgupnguo3gurJf4LqV4Lq44Lql4LqyX+C6nuC6sOC6iOC6tOC6gV/gupfgurHgupnguqfgurInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4Lqt4Lqy4LqX4Lq04LqUX+C6iOC6seC6mV/guq3gurHguofguoTgurLguplf4Lqe4Lq44LqUX+C6nuC6sOC6q+C6seC6lF/guqrgurjguoFf4LuA4Lqq4Lq74LqyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4LqX4Lq04LqUX+C6iOC6seC6mV/guq3gurHguofguoTgurLguplf4Lqe4Lq44LqUX+C6nuC6sOC6q+C6seC6lF/guqrgurjguoFf4LuA4Lqq4Lq74LqyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+C6l1/guohf4Lqt4LqEX+C6nl/gup7guqtf4Lqq4LqBX+C6qicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICfguqfgurHguplkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4LqV4Lqt4LqZ4LuA4LqK4Lq74LuJ4LqyfOC6leC6reC6meC7geC6peC6hy8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09ICfgupXguq3gupngu4HguqXguocnO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfgupXguq3gupngu4Dguorgurvgu4ngurInO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+C6leC6reC6meC7geC6peC6hyc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4Lqh4Lq34LuJ4LqZ4Lq14LuJ4LuA4Lqn4Lql4LqyXSBMVCcsXG4gICAgbmV4dERheTogJ1vguqHgurfgu4nguq3gurfgu4jgupngu4DguqfguqXgurJdIExUJyxcbiAgICBuZXh0V2VlazogJ1vguqfgurHgupldZGRkZFvgu5zgu4ngurLgu4DguqfguqXgurJdIExUJyxcbiAgICBsYXN0RGF5OiAnW+C6oeC6t+C7ieC6p+C6suC6meC6meC6teC7ieC7gOC6p+C6peC6sl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+C6p+C6seC6mV1kZGRkW+C7geC6peC7ieC6p+C6meC6teC7ieC7gOC6p+C6peC6sl0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn4Lqt4Lq14LqBICVzJyxcbiAgICBwYXN0OiAnJXPgupzgu4jgurLgupnguqHgurInLFxuICAgIHM6ICfguprgu43gu4jgu4Dgupfgurvgu4jgurLgu4PgupTguqfgurTgupngurLgupfgurUnLFxuICAgIHNzOiAnJWQg4Lqn4Lq04LqZ4Lqy4LqX4Lq1JyxcbiAgICBtOiAnMSDgupngurLgupfgurUnLFxuICAgIG1tOiAnJWQg4LqZ4Lqy4LqX4Lq1JyxcbiAgICBoOiAnMSDguorgurvgu4jguqfgu4LguqHguocnLFxuICAgIGhoOiAnJWQg4LqK4Lq74LuI4Lqn4LuC4Lqh4LqHJyxcbiAgICBkOiAnMSDguqHgurfgu4knLFxuICAgIGRkOiAnJWQg4Lqh4Lq34LuJJyxcbiAgICBNOiAnMSDgu4DgupTgurfguq3gupknLFxuICAgIE1NOiAnJWQg4LuA4LqU4Lq34Lqt4LqZJyxcbiAgICB5OiAnMSDgupvgurUnLFxuICAgIHl5OiAnJWQg4Lqb4Lq1J1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvKOC6l+C6teC7iClcXGR7MSwyfS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuICfgupfgurXgu4gnICsgbnVtYmVyO1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgdW5pdHMgPSB7XG4gIHNzOiAnc2VrdW5kxJdfc2VrdW5kxb5pxbNfc2VrdW5kZXMnLFxuICBtOiAnbWludXTEl19taW51dMSXc19taW51dMSZJyxcbiAgbW06ICdtaW51dMSXc19taW51xI1pxbNfbWludXRlcycsXG4gIGg6ICd2YWxhbmRhX3ZhbGFuZG9zX3ZhbGFuZMSFJyxcbiAgaGg6ICd2YWxhbmRvc192YWxhbmTFs192YWxhbmRhcycsXG4gIGQ6ICdkaWVuYV9kaWVub3NfZGllbsSFJyxcbiAgZGQ6ICdkaWVub3NfZGllbsWzX2RpZW5hcycsXG4gIE06ICdtxJdudW9fbcSXbmVzaW9fbcSXbmVzxK8nLFxuICBNTTogJ23El25lc2lhaV9txJduZXNpxbNfbcSXbmVzaXVzJyxcbiAgeTogJ21ldGFpX21ldMWzX21ldHVzJyxcbiAgeXk6ICdtZXRhaV9tZXTFs19tZXR1cydcbn07XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZVNlY29uZHMobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgcmV0dXJuICdrZWxpb3Mgc2VrdW5kxJdzJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaXNGdXR1cmUgPyAna2VsacWzIHNla3VuZMW+acWzJyA6ICdrZWxpYXMgc2VrdW5kZXMnO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZVNpbmd1bGFyKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IGZvcm1zKGtleSlbMF0gOiBpc0Z1dHVyZSA/IGZvcm1zKGtleSlbMV0gOiBmb3JtcyhrZXkpWzJdO1xufVxuXG5mdW5jdGlvbiBzcGVjaWFsKG51bWJlcikge1xuICByZXR1cm4gbnVtYmVyICUgMTAgPT09IDAgfHwgbnVtYmVyID4gMTAgJiYgbnVtYmVyIDwgMjA7XG59XG5cbmZ1bmN0aW9uIGZvcm1zKGtleSkge1xuICByZXR1cm4gdW5pdHNba2V5XS5zcGxpdCgnXycpO1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciByZXN1bHQgPSBudW1iZXIgKyAnICc7XG5cbiAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgIHJldHVybiByZXN1bHQgKyB0cmFuc2xhdGVTaW5ndWxhcihudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleVswXSwgaXNGdXR1cmUpO1xuICB9IGVsc2UgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICByZXR1cm4gcmVzdWx0ICsgKHNwZWNpYWwobnVtYmVyKSA/IGZvcm1zKGtleSlbMV0gOiBmb3JtcyhrZXkpWzBdKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoaXNGdXR1cmUpIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyBmb3JtcyhrZXkpWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHNwZWNpYWwobnVtYmVyKSA/IGZvcm1zKGtleSlbMV0gOiBmb3JtcyhrZXkpWzJdKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbHQnLCB7XG4gIG1vbnRoczoge1xuICAgIGZvcm1hdDogJ3NhdXNpb192YXNhcmlvX2tvdm9fYmFsYW5kxb5pb19nZWd1xb7El3NfYmlyxb5lbGlvX2xpZXBvc19ydWdwasWrxI1pb19ydWdzxJdqb19zcGFsaW9fbGFwa3JpxI1pb19ncnVvZMW+aW8nLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ3NhdXNpc192YXNhcmlzX2tvdmFzX2JhbGFuZGlzX2dlZ3XFvsSXX2JpcsW+ZWxpc19saWVwYV9ydWdwasWrdGlzX3J1Z3PEl2ppc19zcGFsaXNfbGFwa3JpdGlzX2dydW9kaXMnLnNwbGl0KCdfJyksXG4gICAgaXNGb3JtYXQ6IC9EW29EXT8oXFxbW15cXFtcXF1dKlxcXXxcXHMpK01NTU0/fE1NTU0/KFxcW1teXFxbXFxdXSpcXF18XFxzKStEW29EXT8vXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAnc2F1X3Zhc19rb3ZfYmFsX2dlZ19iaXJfbGllX3JncF9yZ3Nfc3BhX2xhcF9ncmQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiB7XG4gICAgZm9ybWF0OiAnc2VrbWFkaWVuxK9fcGlybWFkaWVuxK9fYW50cmFkaWVuxK9fdHJlxI1pYWRpZW7Er19rZXR2aXJ0YWRpZW7Er19wZW5rdGFkaWVuxK9fxaFlxaF0YWRpZW7Erycuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAnc2VrbWFkaWVuaXNfcGlybWFkaWVuaXNfYW50cmFkaWVuaXNfdHJlxI1pYWRpZW5pc19rZXR2aXJ0YWRpZW5pc19wZW5rdGFkaWVuaXNfxaFlxaF0YWRpZW5pcycuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL2RkZGQgSEg6bW0vXG4gIH0sXG4gIHdlZWtkYXlzU2hvcnQ6ICdTZWtfUGlyX0FudF9UcmVfS2V0X1Blbl/FoGXFoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTX1BfQV9UX0tfUG5fxaAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnWVlZWSBbbS5dIE1NTU0gRCBbZC5dJyxcbiAgICBMTEw6ICdZWVlZIFttLl0gTU1NTSBEIFtkLl0sIEhIOm1tIFt2YWwuXScsXG4gICAgTExMTDogJ1lZWVkgW20uXSBNTU1NIEQgW2QuXSwgZGRkZCwgSEg6bW0gW3ZhbC5dJyxcbiAgICBsOiAnWVlZWS1NTS1ERCcsXG4gICAgbGw6ICdZWVlZIFttLl0gTU1NTSBEIFtkLl0nLFxuICAgIGxsbDogJ1lZWVkgW20uXSBNTU1NIEQgW2QuXSwgSEg6bW0gW3ZhbC5dJyxcbiAgICBsbGxsOiAnWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBkZGQsIEhIOm1tIFt2YWwuXSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW8WgaWFuZGllbl0gTFQnLFxuICAgIG5leHREYXk6ICdbUnl0b2pdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgTFQnLFxuICAgIGxhc3REYXk6ICdbVmFrYXJdIExUJyxcbiAgICBsYXN0V2VlazogJ1tQcmHEl2p1c8SvXSBkZGRkIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3BvICVzJyxcbiAgICBwYXN0OiAncHJpZcWhICVzJyxcbiAgICBzOiB0cmFuc2xhdGVTZWNvbmRzLFxuICAgIHNzOiB0cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRlU2luZ3VsYXIsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGVTaW5ndWxhcixcbiAgICBoaDogdHJhbnNsYXRlLFxuICAgIGQ6IHRyYW5zbGF0ZVNpbmd1bGFyLFxuICAgIGRkOiB0cmFuc2xhdGUsXG4gICAgTTogdHJhbnNsYXRlU2luZ3VsYXIsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiB0cmFuc2xhdGVTaW5ndWxhcixcbiAgICB5eTogdHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS1vamkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXIgKyAnLW9qaSc7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciB1bml0cyA9IHtcbiAgc3M6ICdzZWt1bmRlc19zZWt1bmTEk21fc2VrdW5kZV9zZWt1bmRlcycuc3BsaXQoJ18nKSxcbiAgbTogJ21pbsWrdGVzX21pbsWrdMSTbV9taW7Fq3RlX21pbsWrdGVzJy5zcGxpdCgnXycpLFxuICBtbTogJ21pbsWrdGVzX21pbsWrdMSTbV9taW7Fq3RlX21pbsWrdGVzJy5zcGxpdCgnXycpLFxuICBoOiAnc3R1bmRhc19zdHVuZMSBbV9zdHVuZGFfc3R1bmRhcycuc3BsaXQoJ18nKSxcbiAgaGg6ICdzdHVuZGFzX3N0dW5kxIFtX3N0dW5kYV9zdHVuZGFzJy5zcGxpdCgnXycpLFxuICBkOiAnZGllbmFzX2RpZW7EgW1fZGllbmFfZGllbmFzJy5zcGxpdCgnXycpLFxuICBkZDogJ2RpZW5hc19kaWVuxIFtX2RpZW5hX2RpZW5hcycuc3BsaXQoJ18nKSxcbiAgTTogJ23Ek25lxaFhX23Ek25lxaFpZW1fbcSTbmVzaXNfbcSTbmXFoWknLnNwbGl0KCdfJyksXG4gIE1NOiAnbcSTbmXFoWFfbcSTbmXFoWllbV9txJNuZXNpc19txJNuZcWhaScuc3BsaXQoJ18nKSxcbiAgeTogJ2dhZGFfZ2FkaWVtX2dhZHNfZ2FkaScuc3BsaXQoJ18nKSxcbiAgeXk6ICdnYWRhX2dhZGllbV9nYWRzX2dhZGknLnNwbGl0KCdfJylcbn07XG5cbmZ1bmN0aW9uIGZvcm1hdChmb3JtcywgbnVtYmVyLCB3aXRob3V0U3VmZml4KSB7XG4gIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgcmV0dXJuIG51bWJlciAlIDEwID09PSAxICYmIG51bWJlciAlIDEwMCAhPT0gMTEgPyBmb3Jtc1syXSA6IGZvcm1zWzNdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudW1iZXIgJSAxMCA9PT0gMSAmJiBudW1iZXIgJSAxMDAgIT09IDExID8gZm9ybXNbMF0gOiBmb3Jtc1sxXTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHJldHVybiBudW1iZXIgKyAnICcgKyBmb3JtYXQodW5pdHNba2V5XSwgbnVtYmVyLCB3aXRob3V0U3VmZml4KTtcbn1cblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHJldHVybiBmb3JtYXQodW5pdHNba2V5XSwgbnVtYmVyLCB3aXRob3V0U3VmZml4KTtcbn1cblxuZnVuY3Rpb24gcmVsYXRpdmVTZWNvbmRzKG51bWJlciwgd2l0aG91dFN1ZmZpeCkge1xuICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdkYcW+YXMgc2VrdW5kZXMnIDogJ2Rhxb7EgW0gc2VrdW5kxJNtJztcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbHYnLCB7XG4gIG1vbnRoczogJ2phbnbEgXJpc19mZWJydcSBcmlzX21hcnRzX2FwcsSrbGlzX21haWpzX2rFq25panNfasWrbGlqc19hdWd1c3RzX3NlcHRlbWJyaXNfb2t0b2JyaXNfbm92ZW1icmlzX2RlY2VtYnJpcycuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW5fZmViX21hcl9hcHJfbWFpX2rFq25fasWrbF9hdWdfc2VwX29rdF9ub3ZfZGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ3N2xJN0ZGllbmFfcGlybWRpZW5hX290cmRpZW5hX3RyZcWhZGllbmFfY2V0dXJ0ZGllbmFfcGlla3RkaWVuYV9zZXN0ZGllbmEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdl9QX09fVF9DX1BrX1MnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3ZfUF9PX1RfQ19Qa19TJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZLicsXG4gICAgTEw6ICdZWVlZLiBbZ2FkYV0gRC4gTU1NTScsXG4gICAgTExMOiAnWVlZWS4gW2dhZGFdIEQuIE1NTU0sIEhIOm1tJyxcbiAgICBMTExMOiAnWVlZWS4gW2dhZGFdIEQuIE1NTU0sIGRkZGQsIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbxaBvZGllbiBwdWxrc3Rlbl0gTFQnLFxuICAgIG5leHREYXk6ICdbUsSrdCBwdWxrc3Rlbl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbcHVsa3N0ZW5dIExUJyxcbiAgICBsYXN0RGF5OiAnW1Zha2FyIHB1bGtzdGVuXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbUGFnxIFqdcWhxIFdIGRkZGQgW3B1bGtzdGVuXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdwxJNjICVzJyxcbiAgICBwYXN0OiAncGlybXMgJXMnLFxuICAgIHM6IHJlbGF0aXZlU2Vjb25kcyxcbiAgICBzczogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBtOiByZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIsXG4gICAgbW06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgaDogcmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyLFxuICAgIGhoOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIGQ6IHJlbGF0aXZlVGltZVdpdGhTaW5ndWxhcixcbiAgICBkZDogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBNOiByZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIsXG4gICAgTU06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgeTogcmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyLFxuICAgIHl5OiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgdHJhbnNsYXRvciA9IHtcbiAgd29yZHM6IHtcbiAgICBzczogWydzZWt1bmQnLCAnc2VrdW5kYScsICdzZWt1bmRpJ10sXG4gICAgbTogWydqZWRhbiBtaW51dCcsICdqZWRub2cgbWludXRhJ10sXG4gICAgbW06IFsnbWludXQnLCAnbWludXRhJywgJ21pbnV0YSddLFxuICAgIGg6IFsnamVkYW4gc2F0JywgJ2plZG5vZyBzYXRhJ10sXG4gICAgaGg6IFsnc2F0JywgJ3NhdGEnLCAnc2F0aSddLFxuICAgIGRkOiBbJ2RhbicsICdkYW5hJywgJ2RhbmEnXSxcbiAgICBNTTogWydtamVzZWMnLCAnbWplc2VjYScsICdtamVzZWNpJ10sXG4gICAgeXk6IFsnZ29kaW5hJywgJ2dvZGluZScsICdnb2RpbmEnXVxuICB9LFxuICBjb3JyZWN0R3JhbW1hdGljYWxDYXNlOiBmdW5jdGlvbiBjb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlciwgd29yZEtleSkge1xuICAgIHJldHVybiBudW1iZXIgPT09IDEgPyB3b3JkS2V5WzBdIDogbnVtYmVyID49IDIgJiYgbnVtYmVyIDw9IDQgPyB3b3JkS2V5WzFdIDogd29yZEtleVsyXTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgICB2YXIgd29yZEtleSA9IHRyYW5zbGF0b3Iud29yZHNba2V5XTtcblxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IHdvcmRLZXlbMF0gOiB3b3JkS2V5WzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJyAnICsgdHJhbnNsYXRvci5jb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlciwgd29yZEtleSk7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbWUnLCB7XG4gIG1vbnRoczogJ2phbnVhcl9mZWJydWFyX21hcnRfYXByaWxfbWFqX2p1bl9qdWxfYXZndXN0X3NlcHRlbWJhcl9va3RvYmFyX25vdmVtYmFyX2RlY2VtYmFyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbi5fZmViLl9tYXIuX2Fwci5fbWFqX2p1bl9qdWxfYXZnLl9zZXAuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ25lZGplbGphX3BvbmVkamVsamFrX3V0b3Jha19zcmlqZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZWQuX3Bvbi5fdXRvLl9zcmkuX8SNZXQuX3BldC5fc3ViLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb191dF9zcl/EjWVfcGVfc3UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2RhbmFzIHVdIExUJyxcbiAgICBuZXh0RGF5OiAnW3NqdXRyYSB1XSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbbmVkamVsanVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzcmlqZWR1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbc3Vib3R1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBkZGRkIFt1XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW2p1xI1lIHVdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICB2YXIgbGFzdFdlZWtEYXlzID0gWydbcHJvxaFsZV0gW25lZGplbGplXSBbdV0gTFQnLCAnW3Byb8WhbG9nXSBbcG9uZWRqZWxqa2FdIFt1XSBMVCcsICdbcHJvxaFsb2ddIFt1dG9ya2FdIFt1XSBMVCcsICdbcHJvxaFsZV0gW3NyaWplZGVdIFt1XSBMVCcsICdbcHJvxaFsb2ddIFvEjWV0dnJ0a2FdIFt1XSBMVCcsICdbcHJvxaFsb2ddIFtwZXRrYV0gW3VdIExUJywgJ1twcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQnXTtcbiAgICAgIHJldHVybiBsYXN0V2Vla0RheXNbdGhpcy5kYXkoKV07XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3phICVzJyxcbiAgICBwYXN0OiAncHJpamUgJXMnLFxuICAgIHM6ICduZWtvbGlrbyBzZWt1bmRpJyxcbiAgICBzczogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBkOiAnZGFuJyxcbiAgICBkZDogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgTTogJ21qZXNlYycsXG4gICAgTU06IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIHk6ICdnb2RpbnUnLFxuICAgIHl5OiB0cmFuc2xhdG9yLnRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbWknLCB7XG4gIG1vbnRoczogJ0tvaGktdMSBdGVfSHVpLXRhbmd1cnVfUG91dMWrLXRlLXJhbmdpX1BhZW5nYS13aMSBd2jEgV9IYXJhdHVhX1BpcGlyaV9IxY1uZ29pbmdvaV9IZXJlLXR1cmkta8WNa8SBX01haHVydV9XaGlyaW5nYS3EgS1udWt1X1doaXJpbmdhLcSBLXJhbmdpX0hha2loZWEnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnS29oaV9IdWlfUG91X1BhZV9IYXJhX1BpcGlfSMWNbmdvaV9IZXJlX01haHVfV2hpLW51X1doaS1yYV9IYWtpJy5zcGxpdCgnXycpLFxuICBtb250aHNSZWdleDogLyg/OlsnYS16XFx1MDEwMVxcdTAxNERcXHUwMTZCXStcXC0/KXsxLDN9L2ksXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvKD86WydhLXpcXHUwMTAxXFx1MDE0RFxcdTAxNkJdK1xcLT8pezEsM30vaSxcbiAgbW9udGhzU2hvcnRSZWdleDogLyg/OlsnYS16XFx1MDEwMVxcdTAxNERcXHUwMTZCXStcXC0/KXsxLDN9L2ksXG4gIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6IC8oPzpbJ2EtelxcdTAxMDFcXHUwMTREXFx1MDE2Ql0rXFwtPyl7MSwyfS9pLFxuICB3ZWVrZGF5czogJ1LEgXRhcHVfTWFuZV9UxatyZWlfV2VuZXJlaV9UxIFpdGVfUGFyYWlyZV9IxIF0YXJlaScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1RhX01hX1TFq19XZV9UxIFpX1BhX0jEgScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdUYV9NYV9UxatfV2VfVMSBaV9QYV9IxIEnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBbaV0gSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBbaV0gSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tpIHRlaWUgbWFoYW5hLCBpXSBMVCcsXG4gICAgbmV4dERheTogJ1thcG9wbyBpXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtpXSBMVCcsXG4gICAgbGFzdERheTogJ1tpbmFuYWhpIGldIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW3doYWthbXV0dW5nYSBpXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdpIHJvdG8gaSAlcycsXG4gICAgcGFzdDogJyVzIGkgbXVhJyxcbiAgICBzOiAndGUgaMSTa29uYSBydWFydWEnLFxuICAgIHNzOiAnJWQgaMSTa29uYScsXG4gICAgbTogJ2hlIG1lbmV0aScsXG4gICAgbW06ICclZCBtZW5ldGknLFxuICAgIGg6ICd0ZSBoYW9yYScsXG4gICAgaGg6ICclZCBoYW9yYScsXG4gICAgZDogJ2hlIHJhJyxcbiAgICBkZDogJyVkIHJhJyxcbiAgICBNOiAnaGUgbWFyYW1hJyxcbiAgICBNTTogJyVkIG1hcmFtYScsXG4gICAgeTogJ2hlIHRhdScsXG4gICAgeXk6ICclZCB0YXUnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtaycsIHtcbiAgbW9udGhzOiAn0ZjQsNC90YPQsNGA0Lhf0YTQtdCy0YDRg9Cw0YDQuF/QvNCw0YDRgl/QsNC/0YDQuNC7X9C80LDRmF/RmNGD0L3QuF/RmNGD0LvQuF/QsNCy0LPRg9GB0YJf0YHQtdC/0YLQtdC80LLRgNC4X9C+0LrRgtC+0LzQstGA0Lhf0L3QvtC10LzQstGA0Lhf0LTQtdC60LXQvNCy0YDQuCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfRmNCw0L1f0YTQtdCyX9C80LDRgF/QsNC/0YBf0LzQsNGYX9GY0YPQvV/RmNGD0Ltf0LDQstCzX9GB0LXQv1/QvtC60YJf0L3QvtC1X9C00LXQuicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfQvdC10LTQtdC70LBf0L/QvtC90LXQtNC10LvQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTQsF/Rh9C10YLQstGA0YLQvtC6X9C/0LXRgtC+0Lpf0YHQsNCx0L7RgtCwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn0L3QtdC0X9C/0L7QvV/QstGC0L5f0YHRgNC1X9GH0LXRgl/Qv9C10YJf0YHQsNCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9C9ZV/Qv29f0LLRgl/RgdGAX9GH0LVf0L/QtV/RgWEnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnRC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9CU0LXQvdC10YEg0LLQvl0gTFQnLFxuICAgIG5leHREYXk6ICdb0KPRgtGA0LUg0LLQvl0gTFQnLFxuICAgIG5leHRXZWVrOiAnW9CS0L5dIGRkZGQgW9Cy0L5dIExUJyxcbiAgICBsYXN0RGF5OiAnW9CS0YfQtdGA0LAg0LLQvl0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW9CY0LfQvNC40L3QsNGC0LDRgtCwXSBkZGRkIFvQstC+XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW9CY0LfQvNC40L3QsNGC0LjQvtGCXSBkZGRkIFvQstC+XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9C30LAgJXMnLFxuICAgIHBhc3Q6ICfQv9GA0LXQtCAlcycsXG4gICAgczogJ9C90LXQutC+0LvQutGDINGB0LXQutGD0L3QtNC4JyxcbiAgICBzczogJyVkINGB0LXQutGD0L3QtNC4JyxcbiAgICBtOiAn0LXQtNC90LAg0LzQuNC90YPRgtCwJyxcbiAgICBtbTogJyVkINC80LjQvdGD0YLQuCcsXG4gICAgaDogJ9C10LTQtdC9INGH0LDRgScsXG4gICAgaGg6ICclZCDRh9Cw0YHQsCcsXG4gICAgZDogJ9C10LTQtdC9INC00LXQvScsXG4gICAgZGQ6ICclZCDQtNC10L3QsCcsXG4gICAgTTogJ9C10LTQtdC9INC80LXRgdC10YYnLFxuICAgIE1NOiAnJWQg0LzQtdGB0LXRhtC4JyxcbiAgICB5OiAn0LXQtNC90LAg0LPQvtC00LjQvdCwJyxcbiAgICB5eTogJyVkINCz0L7QtNC40L3QuCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LSjQtdCyfNC10L180YLQuHzQstC4fNGA0Lh80LzQuCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBsYXN0RGlnaXQgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgbGFzdDJEaWdpdHMgPSBudW1iZXIgJSAxMDA7XG5cbiAgICBpZiAobnVtYmVyID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3QtdCyJztcbiAgICB9IGVsc2UgaWYgKGxhc3QyRGlnaXRzID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3QtdC9JztcbiAgICB9IGVsc2UgaWYgKGxhc3QyRGlnaXRzID4gMTAgJiYgbGFzdDJEaWdpdHMgPCAyMCkge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0YLQuCc7XG4gICAgfSBlbHNlIGlmIChsYXN0RGlnaXQgPT09IDEpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdCy0LgnO1xuICAgIH0gZWxzZSBpZiAobGFzdERpZ2l0ID09PSAyKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3RgNC4JztcbiAgICB9IGVsc2UgaWYgKGxhc3REaWdpdCA9PT0gNyB8fCBsYXN0RGlnaXQgPT09IDgpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdC80LgnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3RgtC4JztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ21sJywge1xuICBtb250aHM6ICfgtJzgtKjgtYHgtLXgtLDgtL9f4LSr4LWG4LSs4LWN4LSw4LWB4LS14LSw4LS/X+C0ruC0vuC1vOC0muC1jeC0muC1jV/gtI/gtKrgtY3gtLDgtL/gtb1f4LSu4LWH4LSv4LWNX+C0nOC1guC1ul/gtJzgtYLgtLLgtYhf4LST4LSX4LS44LWN4LSx4LWN4LSx4LWNX+C0uOC1huC0quC1jeC0seC1jeC0seC0guC0rOC1vF/gtJLgtJXgtY3gtJ/gtYvgtKzgtbxf4LSo4LS14LSC4LSs4LW8X+C0oeC0v+C0uOC0guC0rOC1vCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgtJzgtKjgtYEuX+C0q+C1huC0rOC1jeC0sOC1gS5f4LSu4LS+4LW8Ll/gtI/gtKrgtY3gtLDgtL8uX+C0ruC1h+C0r+C1jV/gtJzgtYLgtbpf4LSc4LWC4LSy4LWILl/gtJPgtJcuX+C0uOC1huC0quC1jeC0seC1jeC0sS5f4LSS4LSV4LWN4LSf4LWLLl/gtKjgtLXgtIIuX+C0oeC0v+C0uOC0gi4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4LSe4LS+4LSv4LSx4LS+4LS04LWN4LSaX+C0pOC0v+C0meC1jeC0leC0s+C0vuC0tOC1jeC0ml/gtJrgtYrgtLXgtY3gtLXgtL7gtLTgtY3gtJpf4LSs4LWB4LSn4LSo4LS+4LS04LWN4LSaX+C0teC1jeC0r+C0vuC0tOC0vuC0tOC1jeC0ml/gtLXgtYbgtLPgtY3gtLPgtL/gtK/gtL7gtLTgtY3gtJpf4LS24LSo4LS/4LSv4LS+4LS04LWN4LSaJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4LSe4LS+4LSv4LW8X+C0pOC0v+C0meC1jeC0leC1vl/gtJrgtYrgtLXgtY3gtLVf4LSs4LWB4LSn4LW7X+C0teC1jeC0r+C0vuC0tOC0gl/gtLXgtYbgtLPgtY3gtLPgtL9f4LS24LSo4LS/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+C0nuC0vl/gtKTgtL9f4LSa4LWKX+C0rOC1gV/gtLXgtY3gtK/gtL5f4LS14LWGX+C0ticuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSAt4LSo4LWBJyxcbiAgICBMVFM6ICdBIGg6bW06c3MgLeC0qOC1gScsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBBIGg6bW0gLeC0qOC1gScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0gLeC0qOC1gSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+C0h+C0qOC1jeC0qOC1jV0gTFQnLFxuICAgIG5leHREYXk6ICdb4LSo4LS+4LSz4LWGXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgtIfgtKjgtY3gtKjgtLLgtYZdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgtJXgtLTgtL/gtJ7gtY3gtJ5dIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOC0leC0tOC0v+C0nuC1jeC0nuC1jScsXG4gICAgcGFzdDogJyVzIOC0ruC1geC1u+C0quC1jScsXG4gICAgczogJ+C0heC1veC0qiDgtKjgtL/gtK7gtL/gtLfgtJngtY3gtJngtb4nLFxuICAgIHNzOiAnJWQg4LS44LWG4LSV4LWN4LSV4LW74LSh4LWNJyxcbiAgICBtOiAn4LSS4LSw4LWBIOC0ruC0v+C0qOC0v+C0seC1jeC0seC1jScsXG4gICAgbW06ICclZCDgtK7gtL/gtKjgtL/gtLHgtY3gtLHgtY0nLFxuICAgIGg6ICfgtJLgtLDgtYEg4LSu4LSj4LS/4LSV4LWN4LSV4LWC4LW8JyxcbiAgICBoaDogJyVkIOC0ruC0o+C0v+C0leC1jeC0leC1guC1vCcsXG4gICAgZDogJ+C0kuC0sOC1gSDgtKbgtL/gtLXgtLjgtIInLFxuICAgIGRkOiAnJWQg4LSm4LS/4LS14LS44LSCJyxcbiAgICBNOiAn4LSS4LSw4LWBIOC0ruC0vuC0uOC0gicsXG4gICAgTU06ICclZCDgtK7gtL7gtLjgtIInLFxuICAgIHk6ICfgtJLgtLDgtYEg4LS14LW84LS34LSCJyxcbiAgICB5eTogJyVkIOC0teC1vOC0t+C0gidcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+C0sOC0vuC0pOC1jeC0sOC0v3zgtLDgtL7gtLXgtL/gtLLgtYZ84LSJ4LSa4LWN4LSaIOC0leC0tOC0v+C0nuC1jeC0nuC1jXzgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIJ84LSw4LS+4LSk4LWN4LSw4LS/L2ksXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgtLDgtL7gtKTgtY3gtLDgtL8nICYmIGhvdXIgPj0gNCB8fCBtZXJpZGllbSA9PT0gJ+C0ieC0muC1jeC0miDgtJXgtLTgtL/gtJ7gtY3gtJ7gtY0nIHx8IG1lcmlkaWVtID09PSAn4LS14LWI4LSV4LWB4LSo4LWN4LSo4LWH4LSw4LSCJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+C0sOC0vuC0pOC1jeC0sOC0vyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn4LSw4LS+4LS14LS/4LSy4LWGJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgtIngtJrgtY3gtJog4LSV4LS04LS/4LSe4LWN4LSe4LWNJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIInO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+C0sOC0vuC0pOC1jeC0sOC0vyc7XG4gICAgfVxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ9GF0Y3QtNGF0Y3QvSDRgdC10LrRg9C90LQnIDogJ9GF0Y3QtNGF0Y3QvSDRgdC10LrRg9C90LTRi9C9JztcblxuICAgIGNhc2UgJ3NzJzpcbiAgICAgIHJldHVybiBudW1iZXIgKyAod2l0aG91dFN1ZmZpeCA/ICcg0YHQtdC60YPQvdC0JyA6ICcg0YHQtdC60YPQvdC00YvQvScpO1xuXG4gICAgY2FzZSAnbSc6XG4gICAgY2FzZSAnbW0nOlxuICAgICAgcmV0dXJuIG51bWJlciArICh3aXRob3V0U3VmZml4ID8gJyDQvNC40L3Rg9GCJyA6ICcg0LzQuNC90YPRgtGL0L0nKTtcblxuICAgIGNhc2UgJ2gnOlxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIHJldHVybiBudW1iZXIgKyAod2l0aG91dFN1ZmZpeCA/ICcg0YbQsNCzJyA6ICcg0YbQsNCz0LjQudC9Jyk7XG5cbiAgICBjYXNlICdkJzpcbiAgICBjYXNlICdkZCc6XG4gICAgICByZXR1cm4gbnVtYmVyICsgKHdpdGhvdXRTdWZmaXggPyAnINOp0LTTqdGAJyA6ICcg06nQtNGA0LjQudC9Jyk7XG5cbiAgICBjYXNlICdNJzpcbiAgICBjYXNlICdNTSc6XG4gICAgICByZXR1cm4gbnVtYmVyICsgKHdpdGhvdXRTdWZmaXggPyAnINGB0LDRgCcgOiAnINGB0LDRgNGL0L0nKTtcblxuICAgIGNhc2UgJ3knOlxuICAgIGNhc2UgJ3l5JzpcbiAgICAgIHJldHVybiBudW1iZXIgKyAod2l0aG91dFN1ZmZpeCA/ICcg0LbQuNC7JyA6ICcg0LbQuNC70LjQudC9Jyk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bWJlcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtbicsIHtcbiAgbW9udGhzOiAn0J3RjdCz0LTSr9Cz0Y3RjdGAINGB0LDRgF/QpdC+0ZHRgNC00YPQs9Cw0LDRgCDRgdCw0YBf0JPRg9GA0LDQstC00YPQs9Cw0LDRgCDRgdCw0YBf0JTTqdGA06nQstC00q/Qs9GN0Y3RgCDRgdCw0YBf0KLQsNCy0LTRg9Cz0LDQsNGAINGB0LDRgF/Ql9GD0YDQs9Cw0LTRg9Cz0LDQsNGAINGB0LDRgF/QlNC+0LvQtNGD0LPQsNCw0YAg0YHQsNGAX9Cd0LDQudC80LTRg9Cz0LDQsNGAINGB0LDRgF/QldGB0LTSr9Cz0Y3RjdGAINGB0LDRgF/QkNGA0LDQstC00YPQs9Cw0LDRgCDRgdCw0YBf0JDRgNCy0LDQvSDQvdGN0LPQtNKv0LPRjdGN0YAg0YHQsNGAX9CQ0YDQstCw0L0g0YXQvtGR0YDQtNGD0LPQsNCw0YAg0YHQsNGAJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJzEg0YHQsNGAXzIg0YHQsNGAXzMg0YHQsNGAXzQg0YHQsNGAXzUg0YHQsNGAXzYg0YHQsNGAXzcg0YHQsNGAXzgg0YHQsNGAXzkg0YHQsNGAXzEwINGB0LDRgF8xMSDRgdCw0YBfMTIg0YHQsNGAJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ9Cd0Y/QvF/QlNCw0LLQsNCwX9Cc0Y/Qs9C80LDRgF/Qm9GF0LDQs9Cy0LBf0J/Sr9GA0Y3Qsl/QkdCw0LDRgdCw0L1f0JHRj9C80LHQsCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9Cd0Y/QvF/QlNCw0LJf0JzRj9CzX9Cb0YXQsF/Qn9Kv0YBf0JHQsNCwX9CR0Y/QvCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQndGPX9CU0LBf0JzRj1/Qm9GFX9Cf0q9f0JHQsF/QkdGPJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ1lZWVkg0L7QvdGLIE1NTU3Ri9C9IEQnLFxuICAgIExMTDogJ1lZWVkg0L7QvdGLIE1NTU3Ri9C9IEQgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBZWVlZINC+0L3RiyBNTU1N0YvQvSBEIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv0q7TqHzSrtClL2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09ICfSrtClJztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn0q7TqCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0q7QpSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb06jQvdOp06nQtNOp0YBdIExUJyxcbiAgICBuZXh0RGF5OiAnW9Cc0LDRgNCz0LDQsNGIXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb0JjRgNGN0YVdIGRkZGQgTFQnLFxuICAgIGxhc3REYXk6ICdb06jRh9C40LPQtNOp0YBdIExUJyxcbiAgICBsYXN0V2VlazogJ1vTqNC90LPTqdGA0YHTqdC9XSBkZGRkIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzINC00LDRgNCw0LAnLFxuICAgIHBhc3Q6ICclcyDTqdC80L3TqScsXG4gICAgczogdHJhbnNsYXRlLFxuICAgIHNzOiB0cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRlLFxuICAgIG1tOiB0cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogdHJhbnNsYXRlLFxuICAgIGRkOiB0cmFuc2xhdGUsXG4gICAgTTogdHJhbnNsYXRlLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogdHJhbnNsYXRlLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9INOp0LTTqdGALyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICcg06nQtNOp0YAnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+ClpycsXG4gIDI6ICfgpagnLFxuICAzOiAn4KWpJyxcbiAgNDogJ+ClqicsXG4gIDU6ICfgpasnLFxuICA2OiAn4KWsJyxcbiAgNzogJ+ClrScsXG4gIDg6ICfgpa4nLFxuICA5OiAn4KWvJyxcbiAgMDogJ+Clpidcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4KWnJzogJzEnLFxuICAn4KWoJzogJzInLFxuICAn4KWpJzogJzMnLFxuICAn4KWqJzogJzQnLFxuICAn4KWrJzogJzUnLFxuICAn4KWsJzogJzYnLFxuICAn4KWtJzogJzcnLFxuICAn4KWuJzogJzgnLFxuICAn4KWvJzogJzknLFxuICAn4KWmJzogJzAnXG59O1xuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWVNcihudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgdmFyIG91dHB1dCA9ICcnO1xuXG4gIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgc3dpdGNoIChzdHJpbmcpIHtcbiAgICAgIGNhc2UgJ3MnOlxuICAgICAgICBvdXRwdXQgPSAn4KSV4KS+4KS54KWAIOCkuOClh+CkleCkguCkpic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzcyc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpLjgpYfgpJXgpILgpKYnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJUg4KSu4KS/4KSo4KS/4KSfJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ21tJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkruCkv+CkqOCkv+Ckn+Clhyc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdoJzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CklSDgpKTgpL7gpLgnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnaGgnOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KSk4KS+4KS4JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgICBvdXRwdXQgPSAn4KSP4KSVIOCkpuCkv+CkteCkuCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdkZCc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpKbgpL/gpLXgpLgnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnTSc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJUg4KSu4KS54KS/4KSo4KS+JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ01NJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkruCkueCkv+CkqOClhyc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd5JzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CklSDgpLXgpLDgpY3gpLcnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAneXknOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KS14KSw4KWN4KS34KWHJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHN3aXRjaCAoc3RyaW5nKSB7XG4gICAgICBjYXNlICdzJzpcbiAgICAgICAgb3V0cHV0ID0gJ+CkleCkvuCkueClgCDgpLjgpYfgpJXgpILgpKbgpL7gpIInO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnc3MnOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KS44KWH4KSV4KSC4KSm4KS+4KSCJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICBvdXRwdXQgPSAn4KSP4KSV4KS+IOCkruCkv+CkqOCkv+Ckn+Ckvic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdtbSc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpK7gpL/gpKjgpL/gpJ/gpL7gpIInO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnaCc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJXgpL4g4KSk4KS+4KS44KS+JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2hoJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkpOCkvuCkuOCkvuCkgic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdkJzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CkleCkviDgpKbgpL/gpLXgpLjgpL4nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZGQnOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KSm4KS/4KS14KS44KS+4KSCJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ00nOlxuICAgICAgICBvdXRwdXQgPSAn4KSP4KSV4KS+IOCkruCkueCkv+CkqOCljeCkr+Ckvic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdNTSc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpK7gpLngpL/gpKjgpY3gpK/gpL7gpIInO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAneSc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJXgpL4g4KS14KSw4KWN4KS34KS+JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3l5JzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkteCksOCljeCkt+CkvuCkgic7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdXRwdXQucmVwbGFjZSgvJWQvaSwgbnVtYmVyKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbXInLCB7XG4gIG1vbnRoczogJ+CknOCkvuCkqOClh+CkteCkvuCksOClgF/gpKvgpYfgpKzgpY3gpLDgpYHgpLXgpL7gpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+Ckj+CkquCljeCksOCkv+Cksl/gpK7gpYdf4KSc4KWC4KSoX+CknOClgeCksuCliF/gpJHgpJfgpLjgpY3gpJ9f4KS44KSq4KWN4KSf4KWH4KSC4KSs4KSwX+CkkeCkleCljeCkn+Cli+CkrOCksF/gpKjgpYvgpLXgpY3gpLngpYfgpILgpKzgpLBf4KSh4KS/4KS44KWH4KSC4KSs4KSwJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+CknOCkvuCkqOClhy5f4KSr4KWH4KSs4KWN4KSw4KWBLl/gpK7gpL7gpLDgpY3gpJouX+Ckj+CkquCljeCksOCkvy5f4KSu4KWHLl/gpJzgpYLgpKguX+CknOClgeCksuCliC5f4KSR4KSXLl/gpLjgpKrgpY3gpJ/gpYfgpIIuX+CkkeCkleCljeCkn+Cliy5f4KSo4KWL4KS14KWN4KS54KWH4KSCLl/gpKHgpL/gpLjgpYfgpIIuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ+CksOCkteCkv+CkteCkvuCksF/gpLjgpYvgpK7gpLXgpL7gpLBf4KSu4KSC4KSX4KSz4KS14KS+4KSwX+CkrOClgeCkp+CkteCkvuCksF/gpJfgpYHgpLDgpYLgpLXgpL7gpLBf4KS24KWB4KSV4KWN4KSw4KS14KS+4KSwX+CktuCkqOCkv+CkteCkvuCksCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CksOCkteCkv1/gpLjgpYvgpK5f4KSu4KSC4KSX4KSzX+CkrOClgeCkp1/gpJfgpYHgpLDgpYJf4KS24KWB4KSV4KWN4KSwX+CktuCkqOCkvycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgpLBf4KS44KWLX+CkruCkgl/gpKzgpYFf4KSX4KWBX+CktuClgV/gpLYnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0g4KS14KS+4KSc4KSk4KS+JyxcbiAgICBMVFM6ICdBIGg6bW06c3Mg4KS14KS+4KSc4KSk4KS+JyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbSDgpLXgpL7gpJzgpKTgpL4nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCkteCkvuCknOCkpOCkvidcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CkhuCknF0gTFQnLFxuICAgIG5leHREYXk6ICdb4KSJ4KSm4KWN4KSv4KS+XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgpJXgpL7gpLJdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgpK7gpL7gpJfgpYDgpLJdIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz4KSu4KSn4KWN4KSv4KWHJyxcbiAgICBwYXN0OiAnJXPgpKrgpYLgpLDgpY3gpLXgpYAnLFxuICAgIHM6IHJlbGF0aXZlVGltZU1yLFxuICAgIHNzOiByZWxhdGl2ZVRpbWVNcixcbiAgICBtOiByZWxhdGl2ZVRpbWVNcixcbiAgICBtbTogcmVsYXRpdmVUaW1lTXIsXG4gICAgaDogcmVsYXRpdmVUaW1lTXIsXG4gICAgaGg6IHJlbGF0aXZlVGltZU1yLFxuICAgIGQ6IHJlbGF0aXZlVGltZU1yLFxuICAgIGRkOiByZWxhdGl2ZVRpbWVNcixcbiAgICBNOiByZWxhdGl2ZVRpbWVNcixcbiAgICBNTTogcmVsYXRpdmVUaW1lTXIsXG4gICAgeTogcmVsYXRpdmVUaW1lTXIsXG4gICAgeXk6IHJlbGF0aXZlVGltZU1yXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgpafgpajgpangpargpavgpazgpa3gpa7gpa/gpaZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CkquCkueCkvuCkn+Clh3zgpLjgpJXgpL7gpLPgpYB84KSm4KWB4KSq4KS+4KSw4KWAfOCkuOCkvuCkr+CkguCkleCkvuCks+ClgHzgpLDgpL7gpKTgpY3gpLDgpYAvLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4KSq4KS54KS+4KSf4KWHJyB8fCBtZXJpZGllbSA9PT0gJ+CkuOCkleCkvuCks+ClgCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpKbgpYHgpKrgpL7gpLDgpYAnIHx8IG1lcmlkaWVtID09PSAn4KS44KS+4KSv4KSC4KSV4KS+4KSz4KWAJyB8fCBtZXJpZGllbSA9PT0gJ+CksOCkvuCkpOCljeCksOClgCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDEyID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA+PSAwICYmIGhvdXIgPCA2KSB7XG4gICAgICByZXR1cm4gJ+CkquCkueCkvuCkn+Clhyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn4KS44KSV4KS+4KSz4KWAJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgpKbgpYHgpKrgpL7gpLDgpYAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CkuOCkvuCkr+CkguCkleCkvuCks+ClgCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4KSw4KS+4KSk4KWN4KSw4KWAJztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ21zLW15Jywge1xuICBtb250aHM6ICdKYW51YXJpX0ZlYnJ1YXJpX01hY19BcHJpbF9NZWlfSnVuX0p1bGFpX09nb3NfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGlzZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYWNfQXByX01laV9KdW5fSnVsX09nc19TZXBfT2t0X05vdl9EaXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnQWhhZF9Jc25pbl9TZWxhc2FfUmFidV9LaGFtaXNfSnVtYWF0X1NhYnR1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnQWhkX0lzbl9TZWxfUmFiX0toYV9KdW1fU2FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ0FoX0lzX1NsX1JiX0ttX0ptX1NiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEgubW0nLFxuICAgIExUUzogJ0hILm1tLnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9wYWdpfHRlbmdhaGFyaXxwZXRhbmd8bWFsYW0vLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAncGFnaScpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICd0ZW5nYWhhcmknKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3BldGFuZycgfHwgbWVyaWRpZW0gPT09ICdtYWxhbScpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMSkge1xuICAgICAgcmV0dXJuICdwYWdpJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTUpIHtcbiAgICAgIHJldHVybiAndGVuZ2FoYXJpJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTkpIHtcbiAgICAgIHJldHVybiAncGV0YW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdtYWxhbSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSGFyaSBpbmkgcHVrdWxdIExUJyxcbiAgICBuZXh0RGF5OiAnW0Vzb2sgcHVrdWxdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3B1a3VsXSBMVCcsXG4gICAgbGFzdERheTogJ1tLZWxtYXJpbiBwdWt1bF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbbGVwYXMgcHVrdWxdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2RhbGFtICVzJyxcbiAgICBwYXN0OiAnJXMgeWFuZyBsZXBhcycsXG4gICAgczogJ2JlYmVyYXBhIHNhYXQnLFxuICAgIHNzOiAnJWQgc2FhdCcsXG4gICAgbTogJ3NlbWluaXQnLFxuICAgIG1tOiAnJWQgbWluaXQnLFxuICAgIGg6ICdzZWphbScsXG4gICAgaGg6ICclZCBqYW0nLFxuICAgIGQ6ICdzZWhhcmknLFxuICAgIGRkOiAnJWQgaGFyaScsXG4gICAgTTogJ3NlYnVsYW4nLFxuICAgIE1NOiAnJWQgYnVsYW4nLFxuICAgIHk6ICdzZXRhaHVuJyxcbiAgICB5eTogJyVkIHRhaHVuJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtcycsIHtcbiAgbW9udGhzOiAnSmFudWFyaV9GZWJydWFyaV9NYWNfQXByaWxfTWVpX0p1bl9KdWxhaV9PZ29zX1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0Rpc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9PZ3NfU2VwX09rdF9Ob3ZfRGlzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0FoYWRfSXNuaW5fU2VsYXNhX1JhYnVfS2hhbWlzX0p1bWFhdF9TYWJ0dScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0FoZF9Jc25fU2VsX1JhYl9LaGFfSnVtX1NhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdBaF9Jc19TbF9SYl9LbV9KbV9TYicuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hILm1tJyxcbiAgICBMVFM6ICdISC5tbS5zcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvcGFnaXx0ZW5nYWhhcml8cGV0YW5nfG1hbGFtLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ3BhZ2knKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAndGVuZ2FoYXJpJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdwZXRhbmcnIHx8IG1lcmlkaWVtID09PSAnbWFsYW0nKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzIDwgMTEpIHtcbiAgICAgIHJldHVybiAncGFnaSc7XG4gICAgfSBlbHNlIGlmIChob3VycyA8IDE1KSB7XG4gICAgICByZXR1cm4gJ3RlbmdhaGFyaSc7XG4gICAgfSBlbHNlIGlmIChob3VycyA8IDE5KSB7XG4gICAgICByZXR1cm4gJ3BldGFuZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnbWFsYW0nO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0hhcmkgaW5pIHB1a3VsXSBMVCcsXG4gICAgbmV4dERheTogJ1tFc29rIHB1a3VsXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtwdWt1bF0gTFQnLFxuICAgIGxhc3REYXk6ICdbS2VsbWFyaW4gcHVrdWxdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2xlcGFzIHB1a3VsXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdkYWxhbSAlcycsXG4gICAgcGFzdDogJyVzIHlhbmcgbGVwYXMnLFxuICAgIHM6ICdiZWJlcmFwYSBzYWF0JyxcbiAgICBzczogJyVkIHNhYXQnLFxuICAgIG06ICdzZW1pbml0JyxcbiAgICBtbTogJyVkIG1pbml0JyxcbiAgICBoOiAnc2VqYW0nLFxuICAgIGhoOiAnJWQgamFtJyxcbiAgICBkOiAnc2VoYXJpJyxcbiAgICBkZDogJyVkIGhhcmknLFxuICAgIE06ICdzZWJ1bGFuJyxcbiAgICBNTTogJyVkIGJ1bGFuJyxcbiAgICB5OiAnc2V0YWh1bicsXG4gICAgeXk6ICclZCB0YWh1bidcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbXQnLCB7XG4gIG1vbnRoczogJ0phbm5hcl9GcmFyX01hcnp1X0FwcmlsX01lamp1X8SgdW5qdV9MdWxqdV9Bd3dpc3N1X1NldHRlbWJydV9PdHR1YnJ1X05vdmVtYnJ1X0RpxItlbWJydScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRnJhX01hcl9BcHJfTWVqX8SgdW5fTHVsX0F3d19TZXRfT3R0X05vdl9EacSLJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0lsLcSmYWRkX0l0LVRuZWpuX0l0LVRsaWV0YV9MLUVyYmfEp2FfSWwtxKZhbWlzX0lsLcSgaW1nxKdhX0lzLVNpYnQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfEpmFkX1RuZV9UbGlfRXJiX8SmYW1fxKBpbV9TaWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnxKZhX1RuX1RsX0VyX8SmYV/EoGlfU2knLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSWxsdW0gZmlsLV1MVCcsXG4gICAgbmV4dERheTogJ1tHxKdhZGEgZmlsLV1MVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtmaWwtXUxUJyxcbiAgICBsYXN0RGF5OiAnW0lsLWJpZXJhxKcgZmlsLV1MVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtsaSBnxKdhZGRhXSBbZmlsLV1MVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdm4oCZICVzJyxcbiAgICBwYXN0OiAnJXMgaWx1JyxcbiAgICBzOiAnZnRpdCBzZWtvbmRpJyxcbiAgICBzczogJyVkIHNla29uZGknLFxuICAgIG06ICdtaW51dGEnLFxuICAgIG1tOiAnJWQgbWludXRpJyxcbiAgICBoOiAnc2llZ8SnYScsXG4gICAgaGg6ICclZCBzaWVnxKdhdCcsXG4gICAgZDogJ8ShdXJuYXRhJyxcbiAgICBkZDogJyVkIMShcmFuZXQnLFxuICAgIE06ICd4YWhhcicsXG4gICAgTU06ICclZCB4aHVyJyxcbiAgICB5OiAnc2VuYScsXG4gICAgeXk6ICclZCBzbmknXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4YGBJyxcbiAgMjogJ+GBgicsXG4gIDM6ICfhgYMnLFxuICA0OiAn4YGEJyxcbiAgNTogJ+GBhScsXG4gIDY6ICfhgYYnLFxuICA3OiAn4YGHJyxcbiAgODogJ+GBiCcsXG4gIDk6ICfhgYknLFxuICAwOiAn4YGAJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfhgYEnOiAnMScsXG4gICfhgYInOiAnMicsXG4gICfhgYMnOiAnMycsXG4gICfhgYQnOiAnNCcsXG4gICfhgYUnOiAnNScsXG4gICfhgYYnOiAnNicsXG4gICfhgYcnOiAnNycsXG4gICfhgYgnOiAnOCcsXG4gICfhgYknOiAnOScsXG4gICfhgYAnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdteScsIHtcbiAgbW9udGhzOiAn4YCH4YCU4YC64YCU4YCd4YCr4YCb4YCuX+GAluGAseGAluGAseGArOGAuuGAneGAq+GAm+GArl/hgJnhgJDhgLpf4YCn4YCV4YC84YCuX+GAmeGAsV/hgIfhgL3hgJThgLpf4YCH4YCw4YCc4YCt4YCv4YCE4YC6X+GAnuGAvOGAguGAr+GAkOGAul/hgIXhgIDhgLrhgJDhgIThgLrhgJjhgKxf4YCh4YCx4YCs4YCA4YC64YCQ4YCt4YCv4YCY4YCsX+GAlOGAreGAr+GAneGAhOGAuuGAmOGArF/hgJLhgK7hgIfhgIThgLrhgJjhgKwnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4YCH4YCU4YC6X+GAluGAsV/hgJnhgJDhgLpf4YCV4YC84YCuX+GAmeGAsV/hgIfhgL3hgJThgLpf4YCc4YCt4YCv4YCE4YC6X+GAnuGAvF/hgIXhgIDhgLpf4YCh4YCx4YCs4YCA4YC6X+GAlOGAreGAr1/hgJLhgK4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4YCQ4YCU4YCE4YC64YC54YCC4YCU4YC94YCxX+GAkOGAlOGAhOGAuuGAueGAnOGArF/hgKHhgIThgLrhgLnhgILhgKtf4YCX4YCv4YCS4YC54YCT4YCf4YCw4YC4X+GAgOGAvOGArOGAnuGAleGAkOGAseGAuF/hgJ7hgLHhgKzhgIDhgLzhgKxf4YCF4YCU4YCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4YCU4YC94YCxX+GAnOGArF/hgILhgKtf4YCf4YCw4YC4X+GAgOGAvOGArF/hgJ7hgLHhgKxf4YCU4YCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+GAlOGAveGAsV/hgJzhgKxf4YCC4YCrX+GAn+GAsOGAuF/hgIDhgLzhgKxf4YCe4YCx4YCsX+GAlOGAsScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+GAmuGAlOGAsS5dIExUIFvhgJnhgL7hgKxdJyxcbiAgICBuZXh0RGF5OiAnW+GAmeGAlOGAgOGAuuGAluGAvOGAlOGAul0gTFQgW+GAmeGAvuGArF0nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBMVCBb4YCZ4YC+4YCsXScsXG4gICAgbGFzdERheTogJ1vhgJnhgJThgLEu4YCAXSBMVCBb4YCZ4YC+4YCsXScsXG4gICAgbGFzdFdlZWs6ICdb4YCV4YC84YCu4YC44YCB4YCy4YC34YCe4YCx4YCsXSBkZGRkIExUIFvhgJnhgL7hgKxdJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ+GAnOGArOGAmeGAiuGAuuGAtyAlcyDhgJnhgL7hgKwnLFxuICAgIHBhc3Q6ICfhgJzhgL3hgJThgLrhgIHhgLLhgLfhgJ7hgLHhgKwgJXMg4YCAJyxcbiAgICBzOiAn4YCF4YCA4YC54YCA4YCU4YC6LuGAoeGAlOGAiuGAuuGAuOGAhOGAmuGAuicsXG4gICAgc3M6ICclZCDhgIXhgIDhgLnhgIDhgJThgLfhgLonLFxuICAgIG06ICfhgJDhgIXhgLrhgJnhgK3hgJThgIXhgLonLFxuICAgIG1tOiAnJWQg4YCZ4YCt4YCU4YCF4YC6JyxcbiAgICBoOiAn4YCQ4YCF4YC64YCU4YCs4YCb4YCuJyxcbiAgICBoaDogJyVkIOGAlOGArOGAm+GAricsXG4gICAgZDogJ+GAkOGAheGAuuGAm+GAgOGAuicsXG4gICAgZGQ6ICclZCDhgJvhgIDhgLonLFxuICAgIE06ICfhgJDhgIXhgLrhgJwnLFxuICAgIE1NOiAnJWQg4YCcJyxcbiAgICB5OiAn4YCQ4YCF4YC64YCU4YC+4YCF4YC6JyxcbiAgICB5eTogJyVkIOGAlOGAvuGAheGAuidcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+GBgeGBguGBg+GBhOGBheGBhuGBh+GBiOGBieGBgF0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCduYicsIHtcbiAgbW9udGhzOiAnamFudWFyX2ZlYnJ1YXJfbWFyc19hcHJpbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW4uX2ZlYi5fbWFyc19hcHIuX21haV9qdW5pX2p1bGlfYXVnLl9zZXAuX29rdC5fbm92Ll9kZXMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ3PDuG5kYWdfbWFuZGFnX3RpcnNkYWdfb25zZGFnX3RvcnNkYWdfZnJlZGFnX2zDuHJkYWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdzw7guX21hLl90aS5fb24uX3RvLl9mci5fbMO4Licuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdzw7hfbWFfdGlfb25fdG9fZnJfbMO4Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIFtrbC5dIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBELiBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tpIGRhZyBrbC5dIExUJyxcbiAgICBuZXh0RGF5OiAnW2kgbW9yZ2VuIGtsLl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBba2wuXSBMVCcsXG4gICAgbGFzdERheTogJ1tpIGfDpXIga2wuXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbZm9ycmlnZV0gZGRkZCBba2wuXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdvbSAlcycsXG4gICAgcGFzdDogJyVzIHNpZGVuJyxcbiAgICBzOiAnbm9lbiBzZWt1bmRlcicsXG4gICAgc3M6ICclZCBzZWt1bmRlcicsXG4gICAgbTogJ2V0dCBtaW51dHQnLFxuICAgIG1tOiAnJWQgbWludXR0ZXInLFxuICAgIGg6ICdlbiB0aW1lJyxcbiAgICBoaDogJyVkIHRpbWVyJyxcbiAgICBkOiAnZW4gZGFnJyxcbiAgICBkZDogJyVkIGRhZ2VyJyxcbiAgICB3OiAnZW4gdWtlJyxcbiAgICB3dzogJyVkIHVrZXInLFxuICAgIE06ICdlbiBtw6VuZWQnLFxuICAgIE1NOiAnJWQgbcOlbmVkZXInLFxuICAgIHk6ICdldHQgw6VyJyxcbiAgICB5eTogJyVkIMOlcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfgpacnLFxuICAyOiAn4KWoJyxcbiAgMzogJ+ClqScsXG4gIDQ6ICfgpaonLFxuICA1OiAn4KWrJyxcbiAgNjogJ+ClrCcsXG4gIDc6ICfgpa0nLFxuICA4OiAn4KWuJyxcbiAgOTogJ+ClrycsXG4gIDA6ICfgpaYnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+Clpyc6ICcxJyxcbiAgJ+ClqCc6ICcyJyxcbiAgJ+ClqSc6ICczJyxcbiAgJ+Clqic6ICc0JyxcbiAgJ+Clqyc6ICc1JyxcbiAgJ+ClrCc6ICc2JyxcbiAgJ+ClrSc6ICc3JyxcbiAgJ+Clric6ICc4JyxcbiAgJ+Clryc6ICc5JyxcbiAgJ+Clpic6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ25lJywge1xuICBtb250aHM6ICfgpJzgpKjgpLXgpLDgpYBf4KSr4KWH4KSs4KWN4KSw4KWB4KS14KSw4KWAX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpL/gpLJf4KSu4KSIX+CknOClgeCkqF/gpJzgpYHgpLLgpL7gpIhf4KSF4KSX4KS34KWN4KSfX+CkuOClh+CkquCljeCkn+Clh+CkruCljeCkrOCksF/gpIXgpJXgpY3gpJ/gpYvgpKzgpLBf4KSo4KWL4KSt4KWH4KSu4KWN4KSs4KSwX+CkoeCkv+CkuOClh+CkruCljeCkrOCksCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgpJzgpKguX+Ckq+Clh+CkrOCljeCksOClgS5f4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCkvy5f4KSu4KSIX+CknOClgeCkqF/gpJzgpYHgpLLgpL7gpIguX+CkheCkly5f4KS44KWH4KSq4KWN4KSfLl/gpIXgpJXgpY3gpJ/gpYsuX+CkqOCli+CkreClhy5f4KSh4KS/4KS44KWHLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfgpIbgpIfgpKTgpKzgpL7gpLBf4KS44KWL4KSu4KSs4KS+4KSwX+CkruCkmeCljeCkl+CksuCkrOCkvuCksF/gpKzgpYHgpKfgpKzgpL7gpLBf4KSs4KS/4KS54KS/4KSs4KS+4KSwX+CktuClgeCkleCljeCksOCkrOCkvuCksF/gpLbgpKjgpL/gpKzgpL7gpLAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgpIbgpIfgpKQuX+CkuOCli+Ckri5f4KSu4KSZ4KWN4KSX4KSyLl/gpKzgpYHgpKcuX+CkrOCkv+CkueCkvy5f4KS24KWB4KSV4KWN4KSwLl/gpLbgpKjgpL8uJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+Ckhi5f4KS44KWLLl/gpK7gpIIuX+CkrOClgS5f4KSs4KS/Ll/gpLbgpYEuX+Ckti4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0HgpJXgpYsgaDptbSDgpKzgpJzgpYcnLFxuICAgIExUUzogJ0HgpJXgpYsgaDptbTpzcyDgpKzgpJzgpYcnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQeCkleCliyBoOm1tIOCkrOCknOClhycsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBB4KSV4KWLIGg6bW0g4KSs4KSc4KWHJ1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4KWn4KWo4KWp4KWq4KWr4KWs4KWt4KWu4KWv4KWmXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gpLDgpL7gpKTgpL984KSs4KS/4KS54KS+4KSofOCkpuCkv+CkieCkgeCkuOCli3zgpLjgpL7gpIHgpJ0vLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4KSw4KS+4KSk4KS/Jykge1xuICAgICAgcmV0dXJuIGhvdXIgPCA0ID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KSs4KS/4KS54KS+4KSoJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CkpuCkv+CkieCkgeCkuOCliycpIHtcbiAgICAgIHJldHVybiBob3VyID49IDEwID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KS44KS+4KSB4KSdJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDMpIHtcbiAgICAgIHJldHVybiAn4KSw4KS+4KSk4KS/JztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfgpKzgpL/gpLngpL7gpKgnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE2KSB7XG4gICAgICByZXR1cm4gJ+CkpuCkv+CkieCkgeCkuOCliyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAn4KS44KS+4KSB4KSdJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfgpLDgpL7gpKTgpL8nO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CkhuCknF0gTFQnLFxuICAgIG5leHREYXk6ICdb4KSt4KWL4KSy4KS/XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb4KSG4KSJ4KSB4KSm4KWLXSBkZGRkWyxdIExUJyxcbiAgICBsYXN0RGF5OiAnW+CkueCkv+CknOCli10gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+Ckl+Ckj+CkleCli10gZGRkZFssXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclc+CkruCkvicsXG4gICAgcGFzdDogJyVzIOCkheCkl+CkvuCkoeCkvycsXG4gICAgczogJ+CkleClh+CkueClgCDgpJXgpY3gpLfgpKMnLFxuICAgIHNzOiAnJWQg4KS44KWH4KSV4KWH4KSj4KWN4KShJyxcbiAgICBtOiAn4KSP4KSVIOCkruCkv+CkqOClh+CknycsXG4gICAgbW06ICclZCDgpK7gpL/gpKjgpYfgpJ8nLFxuICAgIGg6ICfgpI/gpJUg4KSY4KSj4KWN4KSf4KS+JyxcbiAgICBoaDogJyVkIOCkmOCko+CljeCkn+CkvicsXG4gICAgZDogJ+Ckj+CklSDgpKbgpL/gpKgnLFxuICAgIGRkOiAnJWQg4KSm4KS/4KSoJyxcbiAgICBNOiAn4KSP4KSVIOCkruCkueCkv+CkqOCkvicsXG4gICAgTU06ICclZCDgpK7gpLngpL/gpKjgpL4nLFxuICAgIHk6ICfgpI/gpJUg4KSs4KSw4KWN4KS3JyxcbiAgICB5eTogJyVkIOCkrOCksOCljeCktydcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRoc1Nob3J0V2l0aERvdHMgPSAnamFuLl9mZWIuX21ydC5fYXByLl9tZWlfanVuLl9qdWwuX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVjLicuc3BsaXQoJ18nKSxcbiAgICBtb250aHNTaG9ydFdpdGhvdXREb3RzID0gJ2phbl9mZWJfbXJ0X2Fwcl9tZWlfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1BhcnNlID0gWy9eamFuL2ksIC9eZmViL2ksIC9ebWFhcnR8bXJ0Lj8kL2ksIC9eYXByL2ksIC9ebWVpJC9pLCAvXmp1bltpLl0/JC9pLCAvXmp1bFtpLl0/JC9pLCAvXmF1Zy9pLCAvXnNlcC9pLCAvXm9rdC9pLCAvXm5vdi9pLCAvXmRlYy9pXSxcbiAgICBtb250aHNSZWdleCA9IC9eKGphbnVhcml8ZmVicnVhcml8bWFhcnR8YXByaWx8bWVpfGp1W25sXWl8YXVndXN0dXN8c2VwdGVtYmVyfG9rdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXJ8amFuXFwuP3xmZWJcXC4/fG1ydFxcLj98YXByXFwuP3xqdVtubF1cXC4/fGF1Z1xcLj98c2VwXFwuP3xva3RcXC4/fG5vdlxcLj98ZGVjXFwuPykvaTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ25sLWJlJywge1xuICBtb250aHM6ICdqYW51YXJpX2ZlYnJ1YXJpX21hYXJ0X2FwcmlsX21laV9qdW5pX2p1bGlfYXVndXN0dXNfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiBmdW5jdGlvbiBtb250aHNTaG9ydChtLCBmb3JtYXQpIHtcbiAgICBpZiAoIW0pIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydFdpdGhEb3RzO1xuICAgIH0gZWxzZSBpZiAoLy1NTU0tLy50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydFdpdGhvdXREb3RzW20ubW9udGgoKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydFdpdGhEb3RzW20ubW9udGgoKV07XG4gICAgfVxuICB9LFxuICBtb250aHNSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1Nob3J0UmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTdHJpY3RSZWdleDogL14oamFudWFyaXxmZWJydWFyaXxtYWFydHxhcHJpbHxtZWl8anVbbmxdaXxhdWd1c3R1c3xzZXB0ZW1iZXJ8b2t0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcikvaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogL14oamFuXFwuP3xmZWJcXC4/fG1ydFxcLj98YXByXFwuP3xtZWl8anVbbmxdXFwuP3xhdWdcXC4/fHNlcFxcLj98b2t0XFwuP3xub3ZcXC4/fGRlY1xcLj8pL2ksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHdlZWtkYXlzOiAnem9uZGFnX21hYW5kYWdfZGluc2RhZ193b2Vuc2RhZ19kb25kZXJkYWdfdnJpamRhZ196YXRlcmRhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3pvLl9tYS5fZGkuX3dvLl9kby5fdnIuX3phLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICd6b19tYV9kaV93b19kb192cl96YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbdmFuZGFhZyBvbV0gTFQnLFxuICAgIG5leHREYXk6ICdbbW9yZ2VuIG9tXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtvbV0gTFQnLFxuICAgIGxhc3REYXk6ICdbZ2lzdGVyZW4gb21dIExUJyxcbiAgICBsYXN0V2VlazogJ1thZmdlbG9wZW5dIGRkZGQgW29tXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdvdmVyICVzJyxcbiAgICBwYXN0OiAnJXMgZ2VsZWRlbicsXG4gICAgczogJ2VlbiBwYWFyIHNlY29uZGVuJyxcbiAgICBzczogJyVkIHNlY29uZGVuJyxcbiAgICBtOiAnw6nDqW4gbWludXV0JyxcbiAgICBtbTogJyVkIG1pbnV0ZW4nLFxuICAgIGg6ICfDqcOpbiB1dXInLFxuICAgIGhoOiAnJWQgdXVyJyxcbiAgICBkOiAnw6nDqW4gZGFnJyxcbiAgICBkZDogJyVkIGRhZ2VuJyxcbiAgICBNOiAnw6nDqW4gbWFhbmQnLFxuICAgIE1NOiAnJWQgbWFhbmRlbicsXG4gICAgeTogJ8Opw6luIGphYXInLFxuICAgIHl5OiAnJWQgamFhcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0ZXxkZSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxIHx8IG51bWJlciA9PT0gOCB8fCBudW1iZXIgPj0gMjAgPyAnc3RlJyA6ICdkZScpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzU2hvcnRXaXRoRG90cyA9ICdqYW4uX2ZlYi5fbXJ0Ll9hcHIuX21laV9qdW4uX2p1bC5fYXVnLl9zZXAuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1Nob3J0V2l0aG91dERvdHMgPSAnamFuX2ZlYl9tcnRfYXByX21laV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXG4gICAgbW9udGhzUGFyc2UgPSBbL15qYW4vaSwgL15mZWIvaSwgL15tYWFydHxtcnQuPyQvaSwgL15hcHIvaSwgL15tZWkkL2ksIC9eanVuW2kuXT8kL2ksIC9eanVsW2kuXT8kL2ksIC9eYXVnL2ksIC9ec2VwL2ksIC9eb2t0L2ksIC9ebm92L2ksIC9eZGVjL2ldLFxuICAgIG1vbnRoc1JlZ2V4ID0gL14oamFudWFyaXxmZWJydWFyaXxtYWFydHxhcHJpbHxtZWl8anVbbmxdaXxhdWd1c3R1c3xzZXB0ZW1iZXJ8b2t0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcnxqYW5cXC4/fGZlYlxcLj98bXJ0XFwuP3xhcHJcXC4/fGp1W25sXVxcLj98YXVnXFwuP3xzZXBcXC4/fG9rdFxcLj98bm92XFwuP3xkZWNcXC4/KS9pO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbmwnLCB7XG4gIG1vbnRoczogJ2phbnVhcmlfZmVicnVhcmlfbWFhcnRfYXByaWxfbWVpX2p1bmlfanVsaV9hdWd1c3R1c19zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aERvdHM7XG4gICAgfSBlbHNlIGlmICgvLU1NTS0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aG91dERvdHNbbS5tb250aCgpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aERvdHNbbS5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1JlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU2hvcnRSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvXihqYW51YXJpfGZlYnJ1YXJpfG1hYXJ0fGFwcmlsfG1laXxqdVtubF1pfGF1Z3VzdHVzfHNlcHRlbWJlcnxva3RvYmVyfG5vdmVtYmVyfGRlY2VtYmVyKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXihqYW5cXC4/fGZlYlxcLj98bXJ0XFwuP3xhcHJcXC4/fG1laXxqdVtubF1cXC4/fGF1Z1xcLj98c2VwXFwuP3xva3RcXC4/fG5vdlxcLj98ZGVjXFwuPykvaSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICd6b25kYWdfbWFhbmRhZ19kaW5zZGFnX3dvZW5zZGFnX2RvbmRlcmRhZ192cmlqZGFnX3phdGVyZGFnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnem8uX21hLl9kaS5fd28uX2RvLl92ci5femEuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ3pvX21hX2RpX3dvX2RvX3ZyX3phJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC1NTS1ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1t2YW5kYWFnIG9tXSBMVCcsXG4gICAgbmV4dERheTogJ1ttb3JnZW4gb21dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW29tXSBMVCcsXG4gICAgbGFzdERheTogJ1tnaXN0ZXJlbiBvbV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW2FmZ2Vsb3Blbl0gZGRkZCBbb21dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ292ZXIgJXMnLFxuICAgIHBhc3Q6ICclcyBnZWxlZGVuJyxcbiAgICBzOiAnZWVuIHBhYXIgc2Vjb25kZW4nLFxuICAgIHNzOiAnJWQgc2Vjb25kZW4nLFxuICAgIG06ICfDqcOpbiBtaW51dXQnLFxuICAgIG1tOiAnJWQgbWludXRlbicsXG4gICAgaDogJ8Opw6luIHV1cicsXG4gICAgaGg6ICclZCB1dXInLFxuICAgIGQ6ICfDqcOpbiBkYWcnLFxuICAgIGRkOiAnJWQgZGFnZW4nLFxuICAgIHc6ICfDqcOpbiB3ZWVrJyxcbiAgICB3dzogJyVkIHdla2VuJyxcbiAgICBNOiAnw6nDqW4gbWFhbmQnLFxuICAgIE1NOiAnJWQgbWFhbmRlbicsXG4gICAgeTogJ8Opw6luIGphYXInLFxuICAgIHl5OiAnJWQgamFhcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0ZXxkZSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxIHx8IG51bWJlciA9PT0gOCB8fCBudW1iZXIgPj0gMjAgPyAnc3RlJyA6ICdkZScpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdubicsIHtcbiAgbW9udGhzOiAnamFudWFyX2ZlYnJ1YXJfbWFyc19hcHJpbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW4uX2ZlYi5fbWFyc19hcHIuX21haV9qdW5pX2p1bGlfYXVnLl9zZXAuX29rdC5fbm92Ll9kZXMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ3N1bmRhZ19tw6VuZGFnX3R5c2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbGF1cmRhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3N1Ll9tw6UuX3R5Ll9vbi5fdG8uX2ZyLl9sYXUuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ3N1X23DpV90eV9vbl90b19mcl9sYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBba2wuXSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBELiBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tJIGRhZyBrbG9ra2FdIExUJyxcbiAgICBuZXh0RGF5OiAnW0kgbW9yZ29uIGtsb2trYV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBba2xva2thXSBMVCcsXG4gICAgbGFzdERheTogJ1tJIGfDpXIga2xva2thXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbRsO4cmVnw6VhbmRlXSBkZGRkIFtrbG9ra2FdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ29tICVzJyxcbiAgICBwYXN0OiAnJXMgc2lkYW4nLFxuICAgIHM6ICdub2tyZSBzZWt1bmQnLFxuICAgIHNzOiAnJWQgc2VrdW5kJyxcbiAgICBtOiAnZWl0IG1pbnV0dCcsXG4gICAgbW06ICclZCBtaW51dHQnLFxuICAgIGg6ICdlaW4gdGltZScsXG4gICAgaGg6ICclZCB0aW1hcicsXG4gICAgZDogJ2VpbiBkYWcnLFxuICAgIGRkOiAnJWQgZGFnYXInLFxuICAgIHc6ICdlaSB2ZWtlJyxcbiAgICB3dzogJyVkIHZla2VyJyxcbiAgICBNOiAnZWluIG3DpW5hZCcsXG4gICAgTU06ICclZCBtw6VuYWRlcicsXG4gICAgeTogJ2VpdCDDpXInLFxuICAgIHl5OiAnJWQgw6VyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnb2MtbG5jJywge1xuICBtb250aHM6IHtcbiAgICBzdGFuZGFsb25lOiAnZ2VuacOocl9mZWJyacOocl9tYXLDp19hYnJpbF9tYWlfanVuaF9qdWxoZXRfYWdvc3Rfc2V0ZW1icmVfb2N0w7JicmVfbm92ZW1icmVfZGVjZW1icmUnLnNwbGl0KCdfJyksXG4gICAgZm9ybWF0OiBcImRlIGdlbmnDqHJfZGUgZmVicmnDqHJfZGUgbWFyw6dfZCdhYnJpbF9kZSBtYWlfZGUganVuaF9kZSBqdWxoZXRfZCdhZ29zdF9kZSBzZXRlbWJyZV9kJ29jdMOyYnJlX2RlIG5vdmVtYnJlX2RlIGRlY2VtYnJlXCIuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL0Rbb0RdPyhcXHMpK01NTU0vXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAnZ2VuLl9mZWJyLl9tYXLDp19hYnIuX21haV9qdW5oX2p1bGguX2Fnby5fc2V0Ll9vY3QuX25vdi5fZGVjLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdkaW1lbmdlX2RpbHVuc19kaW1hcnNfZGltw6hjcmVzX2RpasOydXNfZGl2ZW5kcmVzX2Rpc3NhYnRlJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZGcuX2RsLl9kbS5fZGMuX2RqLl9kdi5fZHMuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RnX2RsX2RtX2RjX2RqX2R2X2RzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBsbDogJ0QgTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBbZGVdIFlZWVkgW2FdIEg6bW0nLFxuICAgIGxsbDogJ0QgTU1NIFlZWVksIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBbZGVdIFlZWVkgW2FdIEg6bW0nLFxuICAgIGxsbGw6ICdkZGQgRCBNTU0gWVlZWSwgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW3XDqGkgYV0gTFQnLFxuICAgIG5leHREYXk6ICdbZGVtYW4gYV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYV0gTFQnLFxuICAgIGxhc3REYXk6ICdbacOociBhXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtwYXNzYXQgYV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiBcImQnYXF1w60gJXNcIixcbiAgICBwYXN0OiAnZmEgJXMnLFxuICAgIHM6ICd1bmFzIHNlZ29uZGFzJyxcbiAgICBzczogJyVkIHNlZ29uZGFzJyxcbiAgICBtOiAndW5hIG1pbnV0YScsXG4gICAgbW06ICclZCBtaW51dGFzJyxcbiAgICBoOiAndW5hIG9yYScsXG4gICAgaGg6ICclZCBvcmFzJyxcbiAgICBkOiAndW4gam9ybicsXG4gICAgZGQ6ICclZCBqb3JucycsXG4gICAgTTogJ3VuIG1lcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VuIGFuJyxcbiAgICB5eTogJyVkIGFucydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHJ8bnx0fMOofGEpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgPT09IDEgPyAncicgOiBudW1iZXIgPT09IDIgPyAnbicgOiBudW1iZXIgPT09IDMgPyAncicgOiBudW1iZXIgPT09IDQgPyAndCcgOiAnw6gnO1xuXG4gICAgaWYgKHBlcmlvZCA9PT0gJ3cnIHx8IHBlcmlvZCA9PT0gJ1cnKSB7XG4gICAgICBvdXRwdXQgPSAnYSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+CppycsXG4gIDI6ICfgqagnLFxuICAzOiAn4KmpJyxcbiAgNDogJ+CpqicsXG4gIDU6ICfgqasnLFxuICA2OiAn4KmsJyxcbiAgNzogJ+CprScsXG4gIDg6ICfgqa4nLFxuICA5OiAn4KmvJyxcbiAgMDogJ+Cppidcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4KmnJzogJzEnLFxuICAn4KmoJzogJzInLFxuICAn4KmpJzogJzMnLFxuICAn4KmqJzogJzQnLFxuICAn4KmrJzogJzUnLFxuICAn4KmsJzogJzYnLFxuICAn4KmtJzogJzcnLFxuICAn4KmuJzogJzgnLFxuICAn4KmvJzogJzknLFxuICAn4KmmJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgncGEtaW4nLCB7XG4gIG1vbnRoczogJ+ConOCoqOCoteCosOCpgF/gqKvgqLzgqLDgqLXgqLDgqYBf4Kiu4Ki+4Kiw4KiaX+CoheCoquCpjeCosOCpiOCosl/gqK7gqIhf4Kic4KmC4KioX+ConOCpgeCosuCovuCoiF/gqIXgqJfgqLjgqKRf4Ki44Kik4Kmw4Kis4KiwX+CoheColeCopOCpguCorOCosF/gqKjgqLXgqbDgqKzgqLBf4Kim4Ki44Kmw4Kis4KiwJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+ConOCoqOCoteCosOCpgF/gqKvgqLzgqLDgqLXgqLDgqYBf4Kiu4Ki+4Kiw4KiaX+CoheCoquCpjeCosOCpiOCosl/gqK7gqIhf4Kic4KmC4KioX+ConOCpgeCosuCovuCoiF/gqIXgqJfgqLjgqKRf4Ki44Kik4Kmw4Kis4KiwX+CoheColeCopOCpguCorOCosF/gqKjgqLXgqbDgqKzgqLBf4Kim4Ki44Kmw4Kis4KiwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+CokOCopOCoteCovuCosF/gqLjgqYvgqK7gqLXgqL7gqLBf4Kiu4Kmw4KiX4Kiy4Ki14Ki+4KiwX+CorOCpgeCop+CoteCovuCosF/gqLXgqYDgqLDgqLXgqL7gqLBf4Ki44Ki84KmB4Kmx4KiV4Kiw4Ki14Ki+4KiwX+CouOCovOCoqOCpgOComuCosOCoteCovuCosCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CokOCopF/gqLjgqYvgqK5f4Kiu4Kmw4KiX4KiyX+CorOCpgeCop1/gqLXgqYDgqLBf4Ki44Ki84KmB4KiV4KiwX+CouOCovOCoqOCpgCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgqJDgqKRf4Ki44KmL4KiuX+CoruCpsOCol+Cosl/gqKzgqYHgqKdf4Ki14KmA4KiwX+CouOCovOCpgeColeCosF/gqLjgqLzgqKjgqYAnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0g4Ki14Kic4KmHJyxcbiAgICBMVFM6ICdBIGg6bW06c3Mg4Ki14Kic4KmHJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbSDgqLXgqJzgqYcnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCoteConOCphydcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CoheConF0gTFQnLFxuICAgIG5leHREYXk6ICdb4KiV4KiyXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb4KiF4KiX4Kiy4Ki+XSBkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgqJXgqLJdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgqKrgqL/gqJvgqLLgqYddIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOCoteCov+CpseComicsXG4gICAgcGFzdDogJyVzIOCoquCov+Com+CosuCphycsXG4gICAgczogJ+ColeCpgeConSDgqLjgqJXgqL/gqbDgqJ8nLFxuICAgIHNzOiAnJWQg4Ki44KiV4Ki/4Kmw4KifJyxcbiAgICBtOiAn4KiH4KiVIOCoruCov+CpsOConycsXG4gICAgbW06ICclZCDgqK7gqL/gqbDgqJ8nLFxuICAgIGg6ICfgqIfgqbHgqJUg4KiY4Kmw4Kif4Ki+JyxcbiAgICBoaDogJyVkIOComOCpsOCon+CphycsXG4gICAgZDogJ+Coh+CpseColSDgqKbgqL/gqKgnLFxuICAgIGRkOiAnJWQg4Kim4Ki/4KioJyxcbiAgICBNOiAn4KiH4Kmx4KiVIOCoruCoueCpgOCoqOCovicsXG4gICAgTU06ICclZCDgqK7gqLngqYDgqKjgqYcnLFxuICAgIHk6ICfgqIfgqbHgqJUg4Ki44Ki+4KiyJyxcbiAgICB5eTogJyVkIOCouOCovuCosidcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+Cpp+CpqOCpqeCpquCpq+CprOCpreCpruCpr+Cppl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4Kiw4Ki+4KikfOCouOCoteCph+CosHzgqKbgqYHgqKrgqLngqL/gqLB84Ki44Ki84Ki+4KiuLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CosOCovuCopCcpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CouOCoteCph+CosCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgqKbgqYHgqKrgqLngqL/gqLAnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CouOCovOCovuCoricpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CosOCovuCopCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAn4Ki44Ki14KmH4KiwJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgqKbgqYHgqKrgqLngqL/gqLAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CouOCovOCovuCoric7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4Kiw4Ki+4KikJztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHNOb21pbmF0aXZlID0gJ3N0eWN6ZcWEX2x1dHlfbWFyemVjX2t3aWVjaWXFhF9tYWpfY3plcndpZWNfbGlwaWVjX3NpZXJwaWXFhF93cnplc2llxYRfcGHFumR6aWVybmlrX2xpc3RvcGFkX2dydWR6aWXFhCcuc3BsaXQoJ18nKSxcbiAgICBtb250aHNTdWJqZWN0aXZlID0gJ3N0eWN6bmlhX2x1dGVnb19tYXJjYV9rd2lldG5pYV9tYWphX2N6ZXJ3Y2FfbGlwY2Ffc2llcnBuaWFfd3J6ZcWbbmlhX3Bhxbpkemllcm5pa2FfbGlzdG9wYWRhX2dydWRuaWEnLnNwbGl0KCdfJyksXG4gICAgbW9udGhzUGFyc2UgPSBbL15zdHkvaSwgL15sdXQvaSwgL15tYXIvaSwgL15rd2kvaSwgL15tYWovaSwgL15jemUvaSwgL15saXAvaSwgL15zaWUvaSwgL153cnovaSwgL15wYcW6L2ksIC9ebGlzL2ksIC9eZ3J1L2ldO1xuXG5mdW5jdGlvbiBwbHVyYWwobikge1xuICByZXR1cm4gbiAlIDEwIDwgNSAmJiBuICUgMTAgPiAxICYmIH5+KG4gLyAxMCkgJSAxMCAhPT0gMTtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHZhciByZXN1bHQgPSBudW1iZXIgKyAnICc7XG5cbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdzcyc6XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ3Nla3VuZHknIDogJ3Nla3VuZCcpO1xuXG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdtaW51dGEnIDogJ21pbnV0xJknO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdtaW51dHknIDogJ21pbnV0Jyk7XG5cbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2dvZHppbmEnIDogJ2dvZHppbsSZJztcblxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnZ29kemlueScgOiAnZ29kemluJyk7XG5cbiAgICBjYXNlICd3dyc6XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ3R5Z29kbmllJyA6ICd0eWdvZG5pJyk7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ21pZXNpxIVjZScgOiAnbWllc2nEmWN5Jyk7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ2xhdGEnIDogJ2xhdCcpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3BsJywge1xuICBtb250aHM6IGZ1bmN0aW9uIG1vbnRocyhtb21lbnRUb0Zvcm1hdCwgZm9ybWF0KSB7XG4gICAgaWYgKCFtb21lbnRUb0Zvcm1hdCkge1xuICAgICAgcmV0dXJuIG1vbnRoc05vbWluYXRpdmU7XG4gICAgfSBlbHNlIGlmICgvRCBNTU1NLy50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHJldHVybiBtb250aHNTdWJqZWN0aXZlW21vbWVudFRvRm9ybWF0Lm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9udGhzTm9taW5hdGl2ZVttb21lbnRUb0Zvcm1hdC5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAnc3R5X2x1dF9tYXJfa3dpX21hal9jemVfbGlwX3NpZV93cnpfcGHFul9saXNfZ3J1Jy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICB3ZWVrZGF5czogJ25pZWR6aWVsYV9wb25pZWR6aWHFgmVrX3d0b3Jla1/Fm3JvZGFfY3p3YXJ0ZWtfcGnEhXRla19zb2JvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZHpfcG9uX3d0X8Wbcl9jendfcHRfc29iJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ05kX1BuX1d0X8Wacl9Del9QdF9Tbycuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tEemnFmyBvXSBMVCcsXG4gICAgbmV4dERheTogJ1tKdXRybyBvXSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1tXIG5pZWR6aWVsxJkgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gJ1tXZSB3dG9yZWsgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1tXIMWbcm9kxJkgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1tXIHNvYm90xJkgb10gTFQnO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICdbV10gZGRkZCBbb10gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGFzdERheTogJ1tXY3pvcmFqIG9dIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW1cgemVzesWCxIUgbmllZHppZWzEmSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW1cgemVzesWCxIUgxZtyb2TEmSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW1cgemVzesWCxIUgc29ib3TEmSBvXSBMVCc7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJ1tXIHplc3rFgnldIGRkZGQgW29dIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnemEgJXMnLFxuICAgIHBhc3Q6ICclcyB0ZW11JyxcbiAgICBzOiAna2lsa2Egc2VrdW5kJyxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0ZSxcbiAgICBoaDogdHJhbnNsYXRlLFxuICAgIGQ6ICcxIGR6aWXFhCcsXG4gICAgZGQ6ICclZCBkbmknLFxuICAgIHc6ICd0eWR6aWXFhCcsXG4gICAgd3c6IHRyYW5zbGF0ZSxcbiAgICBNOiAnbWllc2nEhWMnLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogJ3JvaycsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgncHQtYnInLCB7XG4gIG1vbnRoczogJ2phbmVpcm9fZmV2ZXJlaXJvX21hcsOnb19hYnJpbF9tYWlvX2p1bmhvX2p1bGhvX2Fnb3N0b19zZXRlbWJyb19vdXR1YnJvX25vdmVtYnJvX2RlemVtYnJvJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZXZfbWFyX2Ficl9tYWlfanVuX2p1bF9hZ29fc2V0X291dF9ub3ZfZGV6Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ2RvbWluZ29fc2VndW5kYS1mZWlyYV90ZXLDp2EtZmVpcmFfcXVhcnRhLWZlaXJhX3F1aW50YS1mZWlyYV9zZXh0YS1mZWlyYV9zw6FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZG9tX3NlZ190ZXJfcXVhX3F1aV9zZXhfc8OhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkb18ywqpfM8KqXzTCql81wqpfNsKqX3PDoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVknLFxuICAgIExMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWSBbw6BzXSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBbw6BzXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0hvamUgw6BzXSBMVCcsXG4gICAgbmV4dERheTogJ1tBbWFuaMOjIMOgc10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbw6BzXSBMVCcsXG4gICAgbGFzdERheTogJ1tPbnRlbSDDoHNdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXkoKSA9PT0gMCB8fCB0aGlzLmRheSgpID09PSA2ID8gJ1vDmmx0aW1vXSBkZGRkIFvDoHNdIExUJyA6ICdbw5psdGltYV0gZGRkZCBbw6BzXSBMVCc7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2VtICVzJyxcbiAgICBwYXN0OiAnaMOhICVzJyxcbiAgICBzOiAncG91Y29zIHNlZ3VuZG9zJyxcbiAgICBzczogJyVkIHNlZ3VuZG9zJyxcbiAgICBtOiAndW0gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0b3MnLFxuICAgIGg6ICd1bWEgaG9yYScsXG4gICAgaGg6ICclZCBob3JhcycsXG4gICAgZDogJ3VtIGRpYScsXG4gICAgZGQ6ICclZCBkaWFzJyxcbiAgICBNOiAndW0gbcOqcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VtIGFubycsXG4gICAgeXk6ICclZCBhbm9zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3Cui8sXG4gIG9yZGluYWw6ICclZMK6JyxcbiAgaW52YWxpZERhdGU6ICdEYXRhIGludsOhbGlkYSdcbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3B0Jywge1xuICBtb250aHM6ICdqYW5laXJvX2ZldmVyZWlyb19tYXLDp29fYWJyaWxfbWFpb19qdW5ob19qdWxob19hZ29zdG9fc2V0ZW1icm9fb3V0dWJyb19ub3ZlbWJyb19kZXplbWJybycuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW5fZmV2X21hcl9hYnJfbWFpX2p1bl9qdWxfYWdvX3NldF9vdXRfbm92X2Rleicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdEb21pbmdvX1NlZ3VuZGEtZmVpcmFfVGVyw6dhLWZlaXJhX1F1YXJ0YS1mZWlyYV9RdWludGEtZmVpcmFfU2V4dGEtZmVpcmFfU8OhYmFkbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0RvbV9TZWdfVGVyX1F1YV9RdWlfU2V4X1PDoWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnRG9fMsKqXzPCql80wqpfNcKqXzbCql9Tw6EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBMTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tIb2plIMOgc10gTFQnLFxuICAgIG5leHREYXk6ICdbQW1hbmjDoyDDoHNdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW8Ogc10gTFQnLFxuICAgIGxhc3REYXk6ICdbT250ZW0gw6BzXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF5KCkgPT09IDAgfHwgdGhpcy5kYXkoKSA9PT0gNiA/ICdbw5psdGltb10gZGRkZCBbw6BzXSBMVCcgOiAnW8OabHRpbWFdIGRkZGQgW8Ogc10gTFQnO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdlbSAlcycsXG4gICAgcGFzdDogJ2jDoSAlcycsXG4gICAgczogJ3NlZ3VuZG9zJyxcbiAgICBzczogJyVkIHNlZ3VuZG9zJyxcbiAgICBtOiAndW0gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0b3MnLFxuICAgIGg6ICd1bWEgaG9yYScsXG4gICAgaGg6ICclZCBob3JhcycsXG4gICAgZDogJ3VtIGRpYScsXG4gICAgZGQ6ICclZCBkaWFzJyxcbiAgICB3OiAndW1hIHNlbWFuYScsXG4gICAgd3c6ICclZCBzZW1hbmFzJyxcbiAgICBNOiAndW0gbcOqcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VtIGFubycsXG4gICAgeXk6ICclZCBhbm9zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3Cui8sXG4gIG9yZGluYWw6ICclZMK6JyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgc3M6ICdzZWN1bmRlJyxcbiAgICBtbTogJ21pbnV0ZScsXG4gICAgaGg6ICdvcmUnLFxuICAgIGRkOiAnemlsZScsXG4gICAgd3c6ICdzxINwdMSDbcOibmknLFxuICAgIE1NOiAnbHVuaScsXG4gICAgeXk6ICdhbmknXG4gIH0sXG4gICAgICBzZXBhcmF0b3IgPSAnICc7XG5cbiAgaWYgKG51bWJlciAlIDEwMCA+PSAyMCB8fCBudW1iZXIgPj0gMTAwICYmIG51bWJlciAlIDEwMCA9PT0gMCkge1xuICAgIHNlcGFyYXRvciA9ICcgZGUgJztcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgKyBzZXBhcmF0b3IgKyBmb3JtYXRba2V5XTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgncm8nLCB7XG4gIG1vbnRoczogJ2lhbnVhcmllX2ZlYnJ1YXJpZV9tYXJ0aWVfYXByaWxpZV9tYWlfaXVuaWVfaXVsaWVfYXVndXN0X3NlcHRlbWJyaWVfb2N0b21icmllX25vaWVtYnJpZV9kZWNlbWJyaWUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnaWFuLl9mZWIuX21hcnQuX2Fwci5fbWFpX2l1bi5faXVsLl9hdWcuX3NlcHQuX29jdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ2R1bWluaWPEg19sdW5pX21hcsibaV9taWVyY3VyaV9qb2lfdmluZXJpX3PDom1ixIN0xIMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdEdW1fTHVuX01hcl9NaWVfSm9pX1Zpbl9Tw6JtJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ0R1X0x1X01hX01pX0pvX1ZpX1PDoicuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2F6aSBsYV0gTFQnLFxuICAgIG5leHREYXk6ICdbbcOiaW5lIGxhXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtsYV0gTFQnLFxuICAgIGxhc3REYXk6ICdbaWVyaSBsYV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW2Zvc3RhXSBkZGRkIFtsYV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAncGVzdGUgJXMnLFxuICAgIHBhc3Q6ICclcyDDrm4gdXJtxIMnLFxuICAgIHM6ICdjw6J0ZXZhIHNlY3VuZGUnLFxuICAgIHNzOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIG06ICd1biBtaW51dCcsXG4gICAgbW06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgaDogJ28gb3LEgycsXG4gICAgaGg6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgZDogJ28gemknLFxuICAgIGRkOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIHc6ICdvIHPEg3B0xINtw6JuxIMnLFxuICAgIHd3OiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIE06ICdvIGx1bsSDJyxcbiAgICBNTTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICB5OiAndW4gYW4nLFxuICAgIHl5OiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcGx1cmFsKHdvcmQsIG51bSkge1xuICB2YXIgZm9ybXMgPSB3b3JkLnNwbGl0KCdfJyk7XG4gIHJldHVybiBudW0gJSAxMCA9PT0gMSAmJiBudW0gJSAxMDAgIT09IDExID8gZm9ybXNbMF0gOiBudW0gJSAxMCA+PSAyICYmIG51bSAlIDEwIDw9IDQgJiYgKG51bSAlIDEwMCA8IDEwIHx8IG51bSAlIDEwMCA+PSAyMCkgPyBmb3Jtc1sxXSA6IGZvcm1zWzJdO1xufVxuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgc3M6IHdpdGhvdXRTdWZmaXggPyAn0YHQtdC60YPQvdC00LBf0YHQtdC60YPQvdC00Ytf0YHQtdC60YPQvdC0JyA6ICfRgdC10LrRg9C90LTRg1/RgdC10LrRg9C90LTRi1/RgdC10LrRg9C90LQnLFxuICAgIG1tOiB3aXRob3V0U3VmZml4ID8gJ9C80LjQvdGD0YLQsF/QvNC40L3Rg9GC0Ytf0LzQuNC90YPRgicgOiAn0LzQuNC90YPRgtGDX9C80LjQvdGD0YLRi1/QvNC40L3Rg9GCJyxcbiAgICBoaDogJ9GH0LDRgV/Rh9Cw0YHQsF/Rh9Cw0YHQvtCyJyxcbiAgICBkZDogJ9C00LXQvdGMX9C00L3Rj1/QtNC90LXQuScsXG4gICAgd3c6ICfQvdC10LTQtdC70Y9f0L3QtdC00LXQu9C4X9C90LXQtNC10LvRjCcsXG4gICAgTU06ICfQvNC10YHRj9GGX9C80LXRgdGP0YbQsF/QvNC10YHRj9GG0LXQsicsXG4gICAgeXk6ICfQs9C+0LRf0LPQvtC00LBf0LvQtdGCJ1xuICB9O1xuXG4gIGlmIChrZXkgPT09ICdtJykge1xuICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ9C80LjQvdGD0YLQsCcgOiAn0LzQuNC90YPRgtGDJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVtYmVyICsgJyAnICsgcGx1cmFsKGZvcm1hdFtrZXldLCArbnVtYmVyKTtcbiAgfVxufVxuXG52YXIgbW9udGhzUGFyc2UgPSBbL17Rj9C90LIvaSwgL17RhNC10LIvaSwgL17QvNCw0YAvaSwgL17QsNC/0YAvaSwgL17QvNCwW9C50Y9dL2ksIC9e0LjRjtC9L2ksIC9e0LjRjtC7L2ksIC9e0LDQstCzL2ksIC9e0YHQtdC9L2ksIC9e0L7QutGCL2ksIC9e0L3QvtGPL2ksIC9e0LTQtdC6L2ldO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgncnUnLCB7XG4gIG1vbnRoczoge1xuICAgIGZvcm1hdDogJ9GP0L3QstCw0YDRj1/RhNC10LLRgNCw0LvRj1/QvNCw0YDRgtCwX9Cw0L/RgNC10LvRj1/QvNCw0Y9f0LjRjtC90Y9f0LjRjtC70Y9f0LDQstCz0YPRgdGC0LBf0YHQtdC90YLRj9Cx0YDRj1/QvtC60YLRj9Cx0YDRj1/QvdC+0Y/QsdGA0Y9f0LTQtdC60LDQsdGA0Y8nLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ9GP0L3QstCw0YDRjF/RhNC10LLRgNCw0LvRjF/QvNCw0YDRgl/QsNC/0YDQtdC70Yxf0LzQsNC5X9C40Y7QvdGMX9C40Y7Qu9GMX9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgNGMX9C+0LrRgtGP0LHRgNGMX9C90L7Rj9Cx0YDRjF/QtNC10LrQsNCx0YDRjCcuc3BsaXQoJ18nKVxuICB9LFxuICBtb250aHNTaG9ydDoge1xuICAgIGZvcm1hdDogJ9GP0L3Qsi5f0YTQtdCy0YAuX9C80LDRgC5f0LDQv9GALl/QvNCw0Y9f0LjRjtC90Y9f0LjRjtC70Y9f0LDQstCzLl/RgdC10L3Rgi5f0L7QutGCLl/QvdC+0Y/QsS5f0LTQtdC6Licuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAn0Y/QvdCyLl/RhNC10LLRgC5f0LzQsNGA0YJf0LDQv9GALl/QvNCw0Llf0LjRjtC90Yxf0LjRjtC70Yxf0LDQstCzLl/RgdC10L3Rgi5f0L7QutGCLl/QvdC+0Y/QsS5f0LTQtdC6Licuc3BsaXQoJ18nKVxuICB9LFxuICB3ZWVrZGF5czoge1xuICAgIHN0YW5kYWxvbmU6ICfQstC+0YHQutGA0LXRgdC10L3RjNC1X9C/0L7QvdC10LTQtdC70YzQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTQsF/Rh9C10YLQstC10YDQs1/Qv9GP0YLQvdC40YbQsF/RgdGD0LHQsdC+0YLQsCcuc3BsaXQoJ18nKSxcbiAgICBmb3JtYXQ6ICfQstC+0YHQutGA0LXRgdC10L3RjNC1X9C/0L7QvdC10LTQtdC70YzQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTRg1/Rh9C10YLQstC10YDQs1/Qv9GP0YLQvdC40YbRg1/RgdGD0LHQsdC+0YLRgycuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL1xcWyA/W9CS0LJdID8oPzrQv9GA0L7RiNC70YPRjnzRgdC70LXQtNGD0Y7RidGD0Y580Y3RgtGDKT8gP10gP2RkZGQvXG4gIH0sXG4gIHdlZWtkYXlzU2hvcnQ6ICfQstGBX9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9Cy0YFf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIG1vbnRoc1JlZ2V4OiAvXijRj9C90LLQsNGAW9GM0Y9dfNGP0L3QslxcLj980YTQtdCy0YDQsNC7W9GM0Y9dfNGE0LXQstGAP1xcLj980LzQsNGA0YLQsD980LzQsNGAXFwuP3zQsNC/0YDQtdC7W9GM0Y9dfNCw0L/RgFxcLj980LzQsFvQudGPXXzQuNGO0L1b0YzRj1180LjRjtC9XFwuP3zQuNGO0Ltb0YzRj1180LjRjtC7XFwuP3zQsNCy0LPRg9GB0YLQsD980LDQstCzXFwuP3zRgdC10L3RgtGP0LHRgFvRjNGPXXzRgdC10L3Rgj9cXC4/fNC+0LrRgtGP0LHRgFvRjNGPXXzQvtC60YJcXC4/fNC90L7Rj9Cx0YBb0YzRj1180L3QvtGP0LE/XFwuP3zQtNC10LrQsNCx0YBb0YzRj1180LTQtdC6XFwuPykvaSxcbiAgbW9udGhzU2hvcnRSZWdleDogL14o0Y/QvdCy0LDRgFvRjNGPXXzRj9C90LJcXC4/fNGE0LXQstGA0LDQu1vRjNGPXXzRhNC10LLRgD9cXC4/fNC80LDRgNGC0LA/fNC80LDRgFxcLj980LDQv9GA0LXQu1vRjNGPXXzQsNC/0YBcXC4/fNC80LBb0LnRj1180LjRjtC9W9GM0Y9dfNC40Y7QvVxcLj980LjRjtC7W9GM0Y9dfNC40Y7Qu1xcLj980LDQstCz0YPRgdGC0LA/fNCw0LLQs1xcLj980YHQtdC90YLRj9Cx0YBb0YzRj1180YHQtdC90YI/XFwuP3zQvtC60YLRj9Cx0YBb0YzRj1180L7QutGCXFwuP3zQvdC+0Y/QsdGAW9GM0Y9dfNC90L7Rj9CxP1xcLj980LTQtdC60LDQsdGAW9GM0Y9dfNC00LXQulxcLj8pL2ksXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvXijRj9C90LLQsNGAW9GP0YxdfNGE0LXQstGA0LDQu1vRj9GMXXzQvNCw0YDRgtCwP3zQsNC/0YDQtdC7W9GP0YxdfNC80LBb0Y/QuV180LjRjtC9W9GP0YxdfNC40Y7Qu1vRj9GMXXzQsNCy0LPRg9GB0YLQsD980YHQtdC90YLRj9Cx0YBb0Y/RjF180L7QutGC0Y/QsdGAW9GP0YxdfNC90L7Rj9Cx0YBb0Y/RjF180LTQtdC60LDQsdGAW9GP0YxdKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXijRj9C90LJcXC580YTQtdCy0YA/XFwufNC80LDRgFvRgi5dfNCw0L/RgFxcLnzQvNCwW9GP0LldfNC40Y7QvVvRjNGPLl180LjRjtC7W9GM0Y8uXXzQsNCy0LNcXC580YHQtdC90YI/XFwufNC+0LrRglxcLnzQvdC+0Y/QsT9cXC580LTQtdC6XFwuKS9pLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVkg0LMuJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSDQsy4sIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSDQsy4sIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQodC10LPQvtC00L3Rjywg0LJdIExUJyxcbiAgICBuZXh0RGF5OiAnW9CX0LDQstGC0YDQsCwg0LJdIExUJyxcbiAgICBsYXN0RGF5OiAnW9CS0YfQtdGA0LAsINCyXSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKG5vdykge1xuICAgICAgaWYgKG5vdy53ZWVrKCkgIT09IHRoaXMud2VlaygpKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiAnW9CSINGB0LvQtdC00YPRjtGJ0LXQtV0gZGRkZCwgW9CyXSBMVCc7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiAnW9CSINGB0LvQtdC00YPRjtGJ0LjQuV0gZGRkZCwgW9CyXSBMVCc7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiAnW9CSINGB0LvQtdC00YPRjtGJ0YPRjl0gZGRkZCwgW9CyXSBMVCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmRheSgpID09PSAyKSB7XG4gICAgICAgICAgcmV0dXJuICdb0JLQvl0gZGRkZCwgW9CyXSBMVCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICdb0JJdIGRkZGQsIFvQsl0gTFQnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsobm93KSB7XG4gICAgICBpZiAobm93LndlZWsoKSAhPT0gdGhpcy53ZWVrKCkpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuICdb0JIg0L/RgNC+0YjQu9C+0LVdIGRkZGQsIFvQsl0gTFQnO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gJ1vQkiDQv9GA0L7RiNC70YvQuV0gZGRkZCwgW9CyXSBMVCc7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiAnW9CSINC/0YDQvtGI0LvRg9GOXSBkZGRkLCBb0LJdIExUJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuZGF5KCkgPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gJ1vQktC+XSBkZGRkLCBb0LJdIExUJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gJ1vQkl0gZGRkZCwgW9CyXSBMVCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0YfQtdGA0LXQtyAlcycsXG4gICAgcGFzdDogJyVzINC90LDQt9Cw0LQnLFxuICAgIHM6ICfQvdC10YHQutC+0LvRjNC60L4g0YHQtdC60YPQvdC0JyxcbiAgICBzczogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBtOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIG1tOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIGg6ICfRh9Cw0YEnLFxuICAgIGhoOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIGQ6ICfQtNC10L3RjCcsXG4gICAgZGQ6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgdzogJ9C90LXQtNC10LvRjycsXG4gICAgd3c6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgTTogJ9C80LXRgdGP0YYnLFxuICAgIE1NOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIHk6ICfQs9C+0LQnLFxuICAgIHl5OiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/QvdC+0YfQuHzRg9GC0YDQsHzQtNC90Y980LLQtdGH0LXRgNCwL2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL14o0LTQvdGPfNCy0LXRh9C10YDQsCkkLy50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfQvdC+0YfQuCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn0YPRgtGA0LAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ9C00L3Rjyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0LLQtdGH0LXRgNCwJztcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS0o0Ll80LPQvnzRjykvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJy3QuSc7XG5cbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJy3Qs9C+JztcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICct0Y8nO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRocyA9IFsn2KzZhtmI2LHZiicsICfZgdmK2KjYsdmI2LHZiicsICfZhdin2LHahicsICfYp9m+2LHZitmEJywgJ9mF2KbZiicsICfYrNmI2YYnLCAn2KzZiNmE2KfYodmQJywgJ9ii2q/Ys9m9JywgJ9iz2YrZvtm92YXYqNixJywgJ9ii2qrZvdmI2KjYsScsICfZhtmI2YXYqNixJywgJ9qK2LPZhdio2LEnXSxcbiAgICBkYXlzID0gWyfYotqG2LEnLCAn2LPZiNmF2LEnLCAn2Kfasdin2LHZiCcsICfYp9ix2KjYuScsICfYrtmF2YrYsycsICfYrNmF2LknLCAn2ofZhtqH2LEnXTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NkJywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRocyxcbiAgd2Vla2RheXM6IGRheXMsXG4gIHdlZWtkYXlzU2hvcnQ6IGRheXMsXG4gIHdlZWtkYXlzTWluOiBkYXlzLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRk2IwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/Ytdio2K182LTYp9mFLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAn2LTYp9mFJyA9PT0gaW5wdXQ7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9i12KjYrSc7XG4gICAgfVxuXG4gICAgcmV0dXJuICfYtNin2YUnO1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfahF0gTFQnLFxuICAgIG5leHREYXk6ICdb2LPagNin2rvZil0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2Kfas9mK2YYg2YfZgdiq2Yog2KrZil0gTFQnLFxuICAgIGxhc3REYXk6ICdb2qrYp9mE2YfZh10gTFQnLFxuICAgIGxhc3RXZWVrOiAnW9qv2LLYsdmK2YQg2YfZgdiq2YpdIGRkZGQgW9iq2YpdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzINm+2YjYoScsXG4gICAgcGFzdDogJyVzINin2rMnLFxuICAgIHM6ICfahtmG2K8g2LPZitqq2YbaiicsXG4gICAgc3M6ICclZCDYs9mK2qrZhtqKJyxcbiAgICBtOiAn2YfaqiDZhdmG2b0nLFxuICAgIG1tOiAnJWQg2YXZhtm9JyxcbiAgICBoOiAn2YfaqiDaqtmE2KfaqicsXG4gICAgaGg6ICclZCDaqtmE2KfaqicsXG4gICAgZDogJ9mH2qog2o/ZitmG2YfZhicsXG4gICAgZGQ6ICclZCDaj9mK2YbZh9mGJyxcbiAgICBNOiAn2YfaqiDZhdmH2YrZhtmIJyxcbiAgICBNTTogJyVkINmF2YfZitmG2KcnLFxuICAgIHk6ICfZh9qqINiz2KfZhCcsXG4gICAgeXk6ICclZCDYs9in2YQnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdzZScsIHtcbiAgbW9udGhzOiAnb8SRxJFhamFnZW3DoW5udV9ndW92dmFtw6FubnVfbmp1a8SNYW3DoW5udV9jdW/Fi29tw6FubnVfbWllc3NlbcOhbm51X2dlYXNzZW3DoW5udV9zdW9pZG5lbcOhbm51X2JvcmdlbcOhbm51X8SNYWvEjWFtw6FubnVfZ29sZ2dvdG3DoW5udV9za8OhYm1hbcOhbm51X2p1b3ZsYW3DoW5udScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdvxJHEkWpfZ3Vvdl9uanVrX2N1b19taWVzX2dlYXNfc3VvaV9ib3JnX8SNYWvEjV9nb2xnX3Nrw6FiX2p1b3YnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnc290bmFiZWFpdmlfdnVvc3PDoXJnYV9tYcWLxYtlYsOhcmdhX2dhc2thdmFoa2t1X2R1b3Jhc3RhdF9iZWFyamFkYXRfbMOhdnZhcmRhdCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3NvdG5fdnVvc19tYcWLX2dhc2tfZHVvcl9iZWFyX2zDoXYnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnc192X21fZ19kX2JfTCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnTU1NTSBELiBbYi5dIFlZWVknLFxuICAgIExMTDogJ01NTU0gRC4gW2IuXSBZWVlZIFt0aS5dIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgTU1NTSBELiBbYi5dIFlZWVkgW3RpLl0gSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tvdG5lIHRpXSBMVCcsXG4gICAgbmV4dERheTogJ1tpaHR0aW4gdGldIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3RpXSBMVCcsXG4gICAgbGFzdERheTogJ1tpa3RlIHRpXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbb3ZkZGl0XSBkZGRkIFt0aV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgZ2Vhxb5lcycsXG4gICAgcGFzdDogJ21hxYtpdCAlcycsXG4gICAgczogJ21vYWRkZSBzZWt1bmRkYXQnLFxuICAgIHNzOiAnJWQgc2VrdW5kZGF0JyxcbiAgICBtOiAnb2t0YSBtaW51aHRhJyxcbiAgICBtbTogJyVkIG1pbnVodGF0JyxcbiAgICBoOiAnb2t0YSBkaWltbXUnLFxuICAgIGhoOiAnJWQgZGlpbW11dCcsXG4gICAgZDogJ29rdGEgYmVhaXZpJyxcbiAgICBkZDogJyVkIGJlYWl2dml0JyxcbiAgICBNOiAnb2t0YSBtw6FubnUnLFxuICAgIE1NOiAnJWQgbcOhbnV0JyxcbiAgICB5OiAnb2t0YSBqYWhraScsXG4gICAgeXk6ICclZCBqYWdpdCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NpJywge1xuICBtb250aHM6ICfgtqLgtrHgt4Dgt4/gtrvgt5Jf4La04LeZ4La24La74LeA4LeP4La74LeSX+C2uOC3j+C2u+C3iuC2reC3lF/gtoXgtrTgt4rigI3gtrvgt5rgtr3gt4pf4La44LeQ4La64LeSX+C2ouC3luC2seC3kl/gtqLgt5bgtr3gt5Jf4LaF4Lac4Led4LeD4LeK4Lat4LeUX+C3g+C3kOC2tOC3iuC2reC3kOC2uOC3iuC2tuC2u+C3il/gtpTgtprgt4rgtq3gt53gtrbgtrvgt4pf4Lax4Lec4LeA4LeQ4La44LeK4La24La74LeKX+C2r+C3meC3g+C3kOC2uOC3iuC2tuC2u+C3iicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgtqLgtrFf4La04LeZ4La2X+C2uOC3j+C2u+C3il/gtoXgtrTgt4pf4La44LeQ4La64LeSX+C2ouC3luC2seC3kl/gtqLgt5bgtr3gt5Jf4LaF4Lac4LedX+C3g+C3kOC2tOC3il/gtpTgtprgt4pf4Lax4Lec4LeA4LeQX+C2r+C3meC3g+C3kCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfgtongtrvgt5Lgtq/gt49f4LeD4Laz4LeU4Lav4LePX+C2heC2n+C3hOC2u+C3lOC3gOC3j+C2r+C3j1/gtrbgtq/gt4/gtq/gt49f4La24LeK4oCN4La74LeE4LeD4LeK4La04Lat4LeS4Lax4LeK4Lav4LePX+C3g+C3kuC2muC3lOC2u+C3j+C2r+C3j1/gt4Pgt5ngtrHgt4Pgt5Tgtrvgt4/gtq/gt48nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgtongtrvgt5Jf4LeD4Laz4LeUX+C2heC2n1/gtrbgtq/gt49f4La24LeK4oCN4La74LeEX+C3g+C3kuC2muC3lF/gt4Pgt5ngtrEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4LaJX+C3g1/gtoVf4La2X+C2tuC3iuKAjeC2u1/gt4Pgt5Jf4LeD4LeZJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdhIGg6bW0nLFxuICAgIExUUzogJ2EgaDptbTpzcycsXG4gICAgTDogJ1lZWVkvTU0vREQnLFxuICAgIExMOiAnWVlZWSBNTU1NIEQnLFxuICAgIExMTDogJ1lZWVkgTU1NTSBELCBhIGg6bW0nLFxuICAgIExMTEw6ICdZWVlZIE1NTU0gRCBb4LeA4LeQ4Lax4LeSXSBkZGRkLCBhIGg6bW06c3MnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgtoXgtq9dIExUW+C2p10nLFxuICAgIG5leHREYXk6ICdb4LeE4LeZ4LanXSBMVFvgtqddJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgTFRb4LanXScsXG4gICAgbGFzdERheTogJ1vgtorgtrrgt5pdIExUW+C2p10nLFxuICAgIGxhc3RXZWVrOiAnW+C2tOC3g+C3lOC2nOC3kuC2ul0gZGRkZCBMVFvgtqddJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz4Laa4LeS4Lax4LeKJyxcbiAgICBwYXN0OiAnJXPgtprgtqcg4La04LeZ4La7JyxcbiAgICBzOiAn4Lat4Lat4LeK4La04La7IOC2muC3kuC3hOC3kuC2tOC2uicsXG4gICAgc3M6ICfgtq3gtq3gt4rgtrTgtrsgJWQnLFxuICAgIG06ICfgtrjgt5LgtrHgt5Lgtq3gt4rgtq3gt5Tgt4AnLFxuICAgIG1tOiAn4La44LeS4Lax4LeS4Lat4LeK4Lat4LeUICVkJyxcbiAgICBoOiAn4La04LeQ4La6JyxcbiAgICBoaDogJ+C2tOC3kOC2uiAlZCcsXG4gICAgZDogJ+C2r+C3kuC2seC2uicsXG4gICAgZGQ6ICfgtq/gt5LgtrEgJWQnLFxuICAgIE06ICfgtrjgt4/gt4PgtronLFxuICAgIE1NOiAn4La44LeP4LeDICVkJyxcbiAgICB5OiAn4LeA4LeD4La7JyxcbiAgICB5eTogJ+C3gOC3g+C2uyAlZCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9IOC3gOC3kOC2seC3ki8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlciArICcg4LeA4LeQ4Lax4LeSJztcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+C2tOC3meC2uyDgt4Dgtrvgt5R84La04LeD4LeKIOC3gOC2u+C3lHzgtrTgt5ku4LeAfOC2tC7gt4AuLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gJ+C2tC7gt4AuJyB8fCBpbnB1dCA9PT0gJ+C2tOC3g+C3iiDgt4Dgtrvgt5QnO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPiAxMSkge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAn4La0LuC3gC4nIDogJ+C2tOC3g+C3iiDgt4Dgtrvgt5QnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICfgtrTgt5ku4LeALicgOiAn4La04LeZ4La7IOC3gOC2u+C3lCc7XG4gICAgfVxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzID0gJ2phbnXDoXJfZmVicnXDoXJfbWFyZWNfYXByw61sX23DoWpfasO6bl9qw7psX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0w7NiZXJfbm92ZW1iZXJfZGVjZW1iZXInLnNwbGl0KCdfJyksXG4gICAgbW9udGhzU2hvcnQgPSAnamFuX2ZlYl9tYXJfYXByX23DoWpfasO6bl9qw7psX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyk7XG5cbmZ1bmN0aW9uIHBsdXJhbChuKSB7XG4gIHJldHVybiBuID4gMSAmJiBuIDwgNTtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgcmVzdWx0ID0gbnVtYmVyICsgJyAnO1xuXG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdww6FyIHNla8O6bmQnIDogJ3DDoXIgc2VrdW5kYW1pJztcblxuICAgIGNhc2UgJ3NzJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnc2VrdW5keScgOiAnc2Vrw7puZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdzZWt1bmRhbWknO1xuICAgICAgfVxuXG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdtaW7DunRhJyA6IGlzRnV0dXJlID8gJ21pbsO6dHUnIDogJ21pbsO6dG91JztcblxuICAgIGNhc2UgJ21tJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnbWluw7p0eScgOiAnbWluw7p0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ21pbsO6dGFtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2hvZGluYScgOiBpc0Z1dHVyZSA/ICdob2RpbnUnIDogJ2hvZGlub3UnO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdob2RpbnknIDogJ2hvZMOtbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdob2RpbmFtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2RlxYgnIDogJ2TFiG9tJztcblxuICAgIGNhc2UgJ2RkJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnZG5pJyA6ICdkbsOtJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ2TFiGFtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICdNJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ21lc2lhYycgOiAnbWVzaWFjb20nO1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdtZXNpYWNlJyA6ICdtZXNpYWNvdicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdtZXNpYWNtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ3JvaycgOiAncm9rb20nO1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdyb2t5JyA6ICdyb2tvdicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdyb2ttaSc7XG4gICAgICB9XG5cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdzaycsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHNTaG9ydCxcbiAgd2Vla2RheXM6ICduZWRlxL5hX3BvbmRlbG9rX3V0b3Jva19zdHJlZGFfxaF0dnJ0b2tfcGlhdG9rX3NvYm90YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ25lX3BvX3V0X3N0X8WhdF9waV9zbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb191dF9zdF/FoXRfcGlfc28nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBELiBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2RuZXMgb10gTFQnLFxuICAgIG5leHREYXk6ICdbemFqdHJhIG9dIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3YgbmVkZcS+dSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgcmV0dXJuICdbdl0gZGRkZCBbb10gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1t2IHN0cmVkdSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiAnW3ZvIMWhdHZydG9rIG9dIExUJztcblxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuICdbdiBwaWF0b2sgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1t2IHNvYm90dSBvXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW3bEjWVyYSBvXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1ttaW51bMO6IG5lZGXEvnUgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiAnW21pbnVsw71dIGRkZGQgW29dIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbbWludWzDuiBzdHJlZHUgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW21pbnVsw71dIGRkZGQgW29dIExUJztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbbWludWzDuiBzb2JvdHUgb10gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd6YSAlcycsXG4gICAgcGFzdDogJ3ByZWQgJXMnLFxuICAgIHM6IHRyYW5zbGF0ZSxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0ZSxcbiAgICBoaDogdHJhbnNsYXRlLFxuICAgIGQ6IHRyYW5zbGF0ZSxcbiAgICBkZDogdHJhbnNsYXRlLFxuICAgIE06IHRyYW5zbGF0ZSxcbiAgICBNTTogdHJhbnNsYXRlLFxuICAgIHk6IHRyYW5zbGF0ZSxcbiAgICB5eTogdHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciByZXN1bHQgPSBudW1iZXIgKyAnICc7XG5cbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ25la2FqIHNla3VuZCcgOiAnbmVrYWogc2VrdW5kYW1pJztcblxuICAgIGNhc2UgJ3NzJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggPyAnc2VrdW5kbycgOiAnc2VrdW5kaSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdzZWt1bmRpJyA6ICdzZWt1bmRhaCc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDUpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnc2VrdW5kZScgOiAnc2VrdW5kYWgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmQnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdlbmEgbWludXRhJyA6ICdlbm8gbWludXRvJztcblxuICAgIGNhc2UgJ21tJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggPyAnbWludXRhJyA6ICdtaW51dG8nO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbWludXRpJyA6ICdtaW51dGFtYSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDUpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbWludXRlJyA6ICdtaW51dGFtaSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtaW51dCcgOiAnbWludXRhbWknO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdlbmEgdXJhJyA6ICdlbm8gdXJvJztcblxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggPyAndXJhJyA6ICd1cm8nO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAndXJpJyA6ICd1cmFtYSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDUpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAndXJlJyA6ICd1cmFtaSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICd1cicgOiAndXJhbWknO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdlbiBkYW4nIDogJ2VuaW0gZG5lbSc7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2RhbicgOiAnZG5lbSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdkbmknIDogJ2RuZXZvbWEnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnZG5pJyA6ICdkbmV2aSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdNJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2VuIG1lc2VjJyA6ICdlbmltIG1lc2VjZW0nO1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtZXNlYycgOiAnbWVzZWNlbSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtZXNlY2EnIDogJ21lc2VjZW1hJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgNSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtZXNlY2UnIDogJ21lc2VjaSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtZXNlY2V2JyA6ICdtZXNlY2knO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdlbm8gbGV0bycgOiAnZW5pbSBsZXRvbSc7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2xldG8nIDogJ2xldG9tJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2xldGknIDogJ2xldG9tYSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDUpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbGV0YScgOiAnbGV0aSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdsZXQnIDogJ2xldGknO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NsJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJlY19hcHJpbF9tYWpfanVuaWpfanVsaWpfYXZndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbi5fZmViLl9tYXIuX2Fwci5fbWFqLl9qdW4uX2p1bC5fYXZnLl9zZXAuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ25lZGVsamFfcG9uZWRlbGpla190b3Jla19zcmVkYV/EjWV0cnRla19wZXRla19zb2JvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZWQuX3Bvbi5fdG9yLl9zcmUuX8SNZXQuX3BldC5fc29iLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb190b19zcl/EjWVfcGVfc28nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC4gTU0uIFlZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbZGFuZXMgb2JdIExUJyxcbiAgICBuZXh0RGF5OiAnW2p1dHJpIG9iXSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1t2XSBbbmVkZWxqb10gW29iXSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3ZdIFtzcmVkb10gW29iXSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3ZdIFtzb2JvdG9dIFtvYl0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t2XSBkZGRkIFtvYl0gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGFzdERheTogJ1t2xI1lcmFqIG9iXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1twcmVqxaFuam9dIFtuZWRlbGpvXSBbb2JdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbcHJlasWhbmpvXSBbc3JlZG9dIFtvYl0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1twcmVqxaFuam9dIFtzb2JvdG9dIFtvYl0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1twcmVqxaFuamldIGRkZGQgW29iXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ8SNZXogJXMnLFxuICAgIHBhc3Q6ICdwcmVkICVzJyxcbiAgICBzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHNzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc3EnLCB7XG4gIG1vbnRoczogJ0phbmFyX1Noa3VydF9NYXJzX1ByaWxsX01hal9RZXJzaG9yX0tvcnJpa19HdXNodF9TaHRhdG9yX1RldG9yX07Dq250b3JfRGhqZXRvcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fU2hrX01hcl9QcmlfTWFqX1Flcl9Lb3JfR3VzX1NodF9UZXRfTsOrbl9EaGonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnRSBEaWVsX0UgSMOrbsOrX0UgTWFydMOrX0UgTcOrcmt1csOrX0UgRW5qdGVfRSBQcmVtdGVfRSBTaHR1bsOrJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnRGllX0jDq25fTWFyX03Dq3JfRW5qX1ByZV9TaHQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnRF9IX01hX03Dq19FX1BfU2gnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbWVyaWRpZW1QYXJzZTogL1BEfE1ELyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC5jaGFyQXQoMCkgPT09ICdNJztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgcmV0dXJuIGhvdXJzIDwgMTIgPyAnUEQnIDogJ01EJztcbiAgfSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tTb3QgbsOrXSBMVCcsXG4gICAgbmV4dERheTogJ1tOZXPDq3IgbsOrXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtuw6tdIExUJyxcbiAgICBsYXN0RGF5OiAnW0RqZSBuw6tdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2Uga2FsdWFyIG7Dq10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnbsOrICVzJyxcbiAgICBwYXN0OiAnJXMgbcOrIHBhcsOrJyxcbiAgICBzOiAnZGlzYSBzZWtvbmRhJyxcbiAgICBzczogJyVkIHNla29uZGEnLFxuICAgIG06ICduasOrIG1pbnV0w6snLFxuICAgIG1tOiAnJWQgbWludXRhJyxcbiAgICBoOiAnbmrDqyBvcsOrJyxcbiAgICBoaDogJyVkIG9yw6snLFxuICAgIGQ6ICduasOrIGRpdMOrJyxcbiAgICBkZDogJyVkIGRpdMOrJyxcbiAgICBNOiAnbmrDqyBtdWFqJyxcbiAgICBNTTogJyVkIG11YWonLFxuICAgIHk6ICduasOrIHZpdCcsXG4gICAgeXk6ICclZCB2aXRlJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHRyYW5zbGF0b3IgPSB7XG4gIHdvcmRzOiB7XG4gICAgc3M6IFsn0YHQtdC60YPQvdC00LAnLCAn0YHQtdC60YPQvdC00LUnLCAn0YHQtdC60YPQvdC00LgnXSxcbiAgICBtOiBbJ9GY0LXQtNCw0L0g0LzQuNC90YPRgicsICfRmNC10LTQvdC1INC80LjQvdGD0YLQtSddLFxuICAgIG1tOiBbJ9C80LjQvdGD0YInLCAn0LzQuNC90YPRgtC1JywgJ9C80LjQvdGD0YLQsCddLFxuICAgIGg6IFsn0ZjQtdC00LDQvSDRgdCw0YInLCAn0ZjQtdC00L3QvtCzINGB0LDRgtCwJ10sXG4gICAgaGg6IFsn0YHQsNGCJywgJ9GB0LDRgtCwJywgJ9GB0LDRgtC4J10sXG4gICAgZGQ6IFsn0LTQsNC9JywgJ9C00LDQvdCwJywgJ9C00LDQvdCwJ10sXG4gICAgTU06IFsn0LzQtdGB0LXRhicsICfQvNC10YHQtdGG0LAnLCAn0LzQtdGB0LXRhtC4J10sXG4gICAgeXk6IFsn0LPQvtC00LjQvdCwJywgJ9Cz0L7QtNC40L3QtScsICfQs9C+0LTQuNC90LAnXVxuICB9LFxuICBjb3JyZWN0R3JhbW1hdGljYWxDYXNlOiBmdW5jdGlvbiBjb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlciwgd29yZEtleSkge1xuICAgIHJldHVybiBudW1iZXIgPT09IDEgPyB3b3JkS2V5WzBdIDogbnVtYmVyID49IDIgJiYgbnVtYmVyIDw9IDQgPyB3b3JkS2V5WzFdIDogd29yZEtleVsyXTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgICB2YXIgd29yZEtleSA9IHRyYW5zbGF0b3Iud29yZHNba2V5XTtcblxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IHdvcmRLZXlbMF0gOiB3b3JkS2V5WzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJyAnICsgdHJhbnNsYXRvci5jb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlciwgd29yZEtleSk7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc3ItY3lybCcsIHtcbiAgbW9udGhzOiAn0ZjQsNC90YPQsNGAX9GE0LXQsdGA0YPQsNGAX9C80LDRgNGCX9Cw0L/RgNC40Ltf0LzQsNGYX9GY0YPQvV/RmNGD0Ltf0LDQstCz0YPRgdGCX9GB0LXQv9GC0LXQvNCx0LDRgF/QvtC60YLQvtCx0LDRgF/QvdC+0LLQtdC80LHQsNGAX9C00LXRhtC10LzQsdCw0YAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn0ZjQsNC9Ll/RhNC10LEuX9C80LDRgC5f0LDQv9GALl/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LMuX9GB0LXQvy5f0L7QutGCLl/QvdC+0LIuX9C00LXRhi4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn0L3QtdC00LXRmdCwX9C/0L7QvdC10LTQtdGZ0LDQul/Rg9GC0L7RgNCw0Lpf0YHRgNC10LTQsF/Rh9C10YLQstGA0YLQsNC6X9C/0LXRgtCw0Lpf0YHRg9Cx0L7RgtCwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn0L3QtdC0Ll/Qv9C+0L0uX9GD0YLQvi5f0YHRgNC1Ll/Rh9C10YIuX9C/0LXRgi5f0YHRg9CxLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQvdC1X9C/0L5f0YPRgl/RgdGAX9GH0LVf0L/QtV/RgdGDJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnRC4gTS4gWVlZWS4nLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZLicsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZLiBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRC4gTU1NTSBZWVlZLiBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb0LTQsNC90LDRgSDRg10gTFQnLFxuICAgIG5leHREYXk6ICdb0YHRg9GC0YDQsCDRg10gTFQnLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICdb0YNdIFvQvdC10LTQtdGZ0YNdIFvRg10gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1vRg10gW9GB0YDQtdC00YNdIFvRg10gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1vRg10gW9GB0YPQsdC+0YLRg10gW9GDXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW9GDXSBkZGRkIFvRg10gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGFzdERheTogJ1vRmNGD0YfQtSDRg10gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHZhciBsYXN0V2Vla0RheXMgPSBbJ1vQv9GA0L7RiNC70LVdIFvQvdC10LTQtdGZ0LVdIFvRg10gTFQnLCAnW9C/0YDQvtGI0LvQvtCzXSBb0L/QvtC90LXQtNC10ZnQutCwXSBb0YNdIExUJywgJ1vQv9GA0L7RiNC70L7Qs10gW9GD0YLQvtGA0LrQsF0gW9GDXSBMVCcsICdb0L/RgNC+0YjQu9C1XSBb0YHRgNC10LTQtV0gW9GDXSBMVCcsICdb0L/RgNC+0YjQu9C+0LNdIFvRh9C10YLQstGA0YLQutCwXSBb0YNdIExUJywgJ1vQv9GA0L7RiNC70L7Qs10gW9C/0LXRgtC60LBdIFvRg10gTFQnLCAnW9C/0YDQvtGI0LvQtV0gW9GB0YPQsdC+0YLQtV0gW9GDXSBMVCddO1xuICAgICAgcmV0dXJuIGxhc3RXZWVrRGF5c1t0aGlzLmRheSgpXTtcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0LfQsCAlcycsXG4gICAgcGFzdDogJ9C/0YDQtSAlcycsXG4gICAgczogJ9C90LXQutC+0LvQuNC60L4g0YHQtdC60YPQvdC00LgnLFxuICAgIHNzOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGQ6ICfQtNCw0L0nLFxuICAgIGRkOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBNOiAn0LzQtdGB0LXRhicsXG4gICAgTU06IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIHk6ICfQs9C+0LTQuNC90YMnLFxuICAgIHl5OiB0cmFuc2xhdG9yLnRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHRyYW5zbGF0b3IgPSB7XG4gIHdvcmRzOiB7XG4gICAgc3M6IFsnc2VrdW5kYScsICdzZWt1bmRlJywgJ3Nla3VuZGknXSxcbiAgICBtOiBbJ2plZGFuIG1pbnV0JywgJ2plZG5lIG1pbnV0ZSddLFxuICAgIG1tOiBbJ21pbnV0JywgJ21pbnV0ZScsICdtaW51dGEnXSxcbiAgICBoOiBbJ2plZGFuIHNhdCcsICdqZWRub2cgc2F0YSddLFxuICAgIGhoOiBbJ3NhdCcsICdzYXRhJywgJ3NhdGknXSxcbiAgICBkZDogWydkYW4nLCAnZGFuYScsICdkYW5hJ10sXG4gICAgTU06IFsnbWVzZWMnLCAnbWVzZWNhJywgJ21lc2VjaSddLFxuICAgIHl5OiBbJ2dvZGluYScsICdnb2RpbmUnLCAnZ29kaW5hJ11cbiAgfSxcbiAgY29ycmVjdEdyYW1tYXRpY2FsQ2FzZTogZnVuY3Rpb24gY29ycmVjdEdyYW1tYXRpY2FsQ2FzZShudW1iZXIsIHdvcmRLZXkpIHtcbiAgICByZXR1cm4gbnVtYmVyID09PSAxID8gd29yZEtleVswXSA6IG51bWJlciA+PSAyICYmIG51bWJlciA8PSA0ID8gd29yZEtleVsxXSA6IHdvcmRLZXlbMl07XG4gIH0sXG4gIHRyYW5zbGF0ZTogZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gICAgdmFyIHdvcmRLZXkgPSB0cmFuc2xhdG9yLndvcmRzW2tleV07XG5cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyB3b3JkS2V5WzBdIDogd29yZEtleVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bWJlciArICcgJyArIHRyYW5zbGF0b3IuY29ycmVjdEdyYW1tYXRpY2FsQ2FzZShudW1iZXIsIHdvcmRLZXkpO1xuICAgIH1cbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NyJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJ0X2FwcmlsX21hal9qdW5fanVsX2F2Z3VzdF9zZXB0ZW1iYXJfb2t0b2Jhcl9ub3ZlbWJhcl9kZWNlbWJhcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW4uX2ZlYi5fbWFyLl9hcHIuX21hal9qdW5fanVsX2F2Zy5fc2VwLl9va3QuX25vdi5fZGVjLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICduZWRlbGphX3BvbmVkZWxqYWtfdXRvcmFrX3NyZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZWQuX3Bvbi5fdXRvLl9zcmUuX8SNZXQuX3BldC5fc3ViLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb191dF9zcl/EjWVfcGVfc3UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdELiBNLiBZWVlZLicsXG4gICAgTEw6ICdELiBNTU1NIFlZWVkuJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkuIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkuIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tkYW5hcyB1XSBMVCcsXG4gICAgbmV4dERheTogJ1tzdXRyYSB1XSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbbmVkZWxqdV0gW3VdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbdV0gW3NyZWR1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbc3Vib3R1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBkZGRkIFt1XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW2p1xI1lIHVdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICB2YXIgbGFzdFdlZWtEYXlzID0gWydbcHJvxaFsZV0gW25lZGVsamVdIFt1XSBMVCcsICdbcHJvxaFsb2ddIFtwb25lZGVsamthXSBbdV0gTFQnLCAnW3Byb8WhbG9nXSBbdXRvcmthXSBbdV0gTFQnLCAnW3Byb8WhbGVdIFtzcmVkZV0gW3VdIExUJywgJ1twcm/FoWxvZ10gW8SNZXR2cnRrYV0gW3VdIExUJywgJ1twcm/FoWxvZ10gW3BldGthXSBbdV0gTFQnLCAnW3Byb8WhbGVdIFtzdWJvdGVdIFt1XSBMVCddO1xuICAgICAgcmV0dXJuIGxhc3RXZWVrRGF5c1t0aGlzLmRheSgpXTtcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnemEgJXMnLFxuICAgIHBhc3Q6ICdwcmUgJXMnLFxuICAgIHM6ICduZWtvbGlrbyBzZWt1bmRpJyxcbiAgICBzczogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBkOiAnZGFuJyxcbiAgICBkZDogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgTTogJ21lc2VjJyxcbiAgICBNTTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgeTogJ2dvZGludScsXG4gICAgeXk6IHRyYW5zbGF0b3IudHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdzcycsIHtcbiAgbW9udGhzOiBcIkJoaW1iaWR2d2FuZV9JbmRsb3ZhbmFfSW5kbG92J2xlbmtodWx1X01hYmFzYV9Jbmtod2VraHdldGlfSW5obGFiYV9LaG9sd2FuZV9JbmdjaV9JbnlvbmlfSW1waGFsYV9Md2V0aV9JbmdvbmdvbmlcIi5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0JoaV9JbmFfSW51X01hYl9JbmtfSW5oX0tob19JZ2NfSW55X0ltcF9Md2VfSWdvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0xpc29udGZvX1Vtc29tYnVsdWtvX0xlc2liaWxpX0xlc2l0c2F0ZnVfTGVzaW5lX0xlc2lobGFudV9VbWdjaWJlbG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdMaXNfVW1iX0xzYl9MZXNfTHNpX0xzaF9VbWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnTGlfVXNfTGJfTHRfTHNfTGhfVWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2g6bW0gQScsXG4gICAgTFRTOiAnaDptbTpzcyBBJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbTmFtdWhsYSBuZ2FdIExUJyxcbiAgICBuZXh0RGF5OiAnW0t1c2FzYSBuZ2FdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW25nYV0gTFQnLFxuICAgIGxhc3REYXk6ICdbSXRvbG8gbmdhXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtsZWxpcGhlbGlsZV0gW25nYV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnbmdhICVzJyxcbiAgICBwYXN0OiAnd2VudGVrYSBuZ2EgJXMnLFxuICAgIHM6ICdlbWl6dXp3YW5hIGxvbWNhbmUnLFxuICAgIHNzOiAnJWQgbXp1endhbmEnLFxuICAgIG06ICd1bXp1enUnLFxuICAgIG1tOiAnJWQgZW1penV6dScsXG4gICAgaDogJ2xpaG9yYScsXG4gICAgaGg6ICclZCBlbWFob3JhJyxcbiAgICBkOiAnbGlsYW5nYScsXG4gICAgZGQ6ICclZCBlbWFsYW5nYScsXG4gICAgTTogJ2lueWFuZ2EnLFxuICAgIE1NOiAnJWQgdGlueWFuZ2EnLFxuICAgIHk6ICd1bW55YWthJyxcbiAgICB5eTogJyVkIGltaW55YWthJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvZWt1c2VuaXxlbWluaXxlbnRzYW1iYW1hfGVidXN1a3UvLFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMSkge1xuICAgICAgcmV0dXJuICdla3VzZW5pJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTUpIHtcbiAgICAgIHJldHVybiAnZW1pbmknO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxOSkge1xuICAgICAgcmV0dXJuICdlbnRzYW1iYW1hJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdlYnVzdWt1JztcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICdla3VzZW5pJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ2VtaW5pJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdlbnRzYW1iYW1hJyB8fCBtZXJpZGllbSA9PT0gJ2VidXN1a3UnKSB7XG4gICAgICBpZiAoaG91ciA9PT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS8sXG4gIG9yZGluYWw6ICclZCcsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3N2Jywge1xuICBtb250aHM6ICdqYW51YXJpX2ZlYnJ1YXJpX21hcnNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3RpX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ3PDtm5kYWdfbcOlbmRhZ190aXNkYWdfb25zZGFnX3RvcnNkYWdfZnJlZGFnX2zDtnJkYWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdzw7ZuX23DpW5fdGlzX29uc190b3JfZnJlX2zDtnInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnc8O2X23DpV90aV9vbl90b19mcl9sw7YnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBba2wuXSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nLFxuICAgIGxsbDogJ0QgTU1NIFlZWVkgSEg6bW0nLFxuICAgIGxsbGw6ICdkZGQgRCBNTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0lkYWddIExUJyxcbiAgICBuZXh0RGF5OiAnW0ltb3Jnb25dIExUJyxcbiAgICBsYXN0RGF5OiAnW0lnw6VyXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbUMOlXSBkZGRkIExUJyxcbiAgICBsYXN0V2VlazogJ1tJXSBkZGRkW3NdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ29tICVzJyxcbiAgICBwYXN0OiAnZsO2ciAlcyBzZWRhbicsXG4gICAgczogJ27DpWdyYSBzZWt1bmRlcicsXG4gICAgc3M6ICclZCBzZWt1bmRlcicsXG4gICAgbTogJ2VuIG1pbnV0JyxcbiAgICBtbTogJyVkIG1pbnV0ZXInLFxuICAgIGg6ICdlbiB0aW1tZScsXG4gICAgaGg6ICclZCB0aW1tYXInLFxuICAgIGQ6ICdlbiBkYWcnLFxuICAgIGRkOiAnJWQgZGFnYXInLFxuICAgIE06ICdlbiBtw6VuYWQnLFxuICAgIE1NOiAnJWQgbcOlbmFkZXInLFxuICAgIHk6ICdldHQgw6VyJyxcbiAgICB5eTogJyVkIMOlcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KFxcOmV8XFw6YSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICc6ZScgOiBiID09PSAxID8gJzphJyA6IGIgPT09IDIgPyAnOmEnIDogYiA9PT0gMyA/ICc6ZScgOiAnOmUnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3N3Jywge1xuICBtb250aHM6ICdKYW51YXJpX0ZlYnJ1YXJpX01hY2hpX0FwcmlsaV9NZWlfSnVuaV9KdWxhaV9BZ29zdGlfU2VwdGVtYmFfT2t0b2JhX05vdmVtYmFfRGVzZW1iYScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hY19BcHJfTWVpX0p1bl9KdWxfQWdvX1NlcF9Pa3RfTm92X0Rlcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdKdW1hcGlsaV9KdW1hdGF0dV9KdW1hbm5lX0p1bWF0YW5vX0FsaGFtaXNpX0lqdW1hYV9KdW1hbW9zaScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0pwbF9KdGF0X0pubmVfSnRhbl9BbGhfSWptX0ptb3MnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnSjJfSjNfSjRfSjVfQWxfSWpfSjEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2hoOm1tIEEnLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2xlbyBzYWFdIExUJyxcbiAgICBuZXh0RGF5OiAnW2tlc2hvIHNhYV0gTFQnLFxuICAgIG5leHRXZWVrOiAnW3dpa2kgaWpheW9dIGRkZGQgW3NhYXRdIExUJyxcbiAgICBsYXN0RGF5OiAnW2phbmFdIExUJyxcbiAgICBsYXN0V2VlazogJ1t3aWtpIGlsaXlvcGl0YV0gZGRkZCBbc2FhdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgYmFhZGF5ZScsXG4gICAgcGFzdDogJ3Rva2VhICVzJyxcbiAgICBzOiAnaGl2aSBwdW5kZScsXG4gICAgc3M6ICdzZWt1bmRlICVkJyxcbiAgICBtOiAnZGFraWthIG1vamEnLFxuICAgIG1tOiAnZGFraWthICVkJyxcbiAgICBoOiAnc2FhIGxpbW9qYScsXG4gICAgaGg6ICdtYXNhYSAlZCcsXG4gICAgZDogJ3Npa3UgbW9qYScsXG4gICAgZGQ6ICdzaWt1ICVkJyxcbiAgICBNOiAnbXdlemkgbW1vamEnLFxuICAgIE1NOiAnbWllemkgJWQnLFxuICAgIHk6ICdtd2FrYSBtbW9qYScsXG4gICAgeXk6ICdtaWFrYSAlZCdcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+CvpycsXG4gIDI6ICfgr6gnLFxuICAzOiAn4K+pJyxcbiAgNDogJ+CvqicsXG4gIDU6ICfgr6snLFxuICA2OiAn4K+sJyxcbiAgNzogJ+CvrScsXG4gIDg6ICfgr64nLFxuICA5OiAn4K+vJyxcbiAgMDogJ+Cvpidcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4K+nJzogJzEnLFxuICAn4K+oJzogJzInLFxuICAn4K+pJzogJzMnLFxuICAn4K+qJzogJzQnLFxuICAn4K+rJzogJzUnLFxuICAn4K+sJzogJzYnLFxuICAn4K+tJzogJzcnLFxuICAn4K+uJzogJzgnLFxuICAn4K+vJzogJzknLFxuICAn4K+mJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndGEnLCB7XG4gIG1vbnRoczogJ+CunOCuqeCuteCusOCuv1/grqrgrr/grqrgr43grrDgrrXgrrDgrr9f4K6u4K6+4K6w4K+N4K6a4K+NX+Cuj+CuquCvjeCusOCusuCvjV/grq7gr4df4K6c4K+C4K6p4K+NX+CunOCvguCusuCviF/grobgrpXgrrjgr43grp/gr41f4K6a4K+G4K6q4K+N4K6f4K+G4K6u4K+N4K6q4K6w4K+NX+CuheCuleCvjeCun+Cvh+CuvuCuquCusOCvjV/grqjgrrXgrq7gr43grqrgrrDgr41f4K6f4K6/4K6a4K6u4K+N4K6q4K6w4K+NJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+CunOCuqeCuteCusOCuv1/grqrgrr/grqrgr43grrDgrrXgrrDgrr9f4K6u4K6+4K6w4K+N4K6a4K+NX+Cuj+CuquCvjeCusOCusuCvjV/grq7gr4df4K6c4K+C4K6p4K+NX+CunOCvguCusuCviF/grobgrpXgrrjgr43grp/gr41f4K6a4K+G4K6q4K+N4K6f4K+G4K6u4K+N4K6q4K6w4K+NX+CuheCuleCvjeCun+Cvh+CuvuCuquCusOCvjV/grqjgrrXgrq7gr43grqrgrrDgr41f4K6f4K6/4K6a4K6u4K+N4K6q4K6w4K+NJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+CunuCuvuCur+Cuv+CuseCvjeCuseCvgeCuleCvjeCuleCuv+CutOCuruCviF/grqTgrr/grpngr43grpXgrp/gr43grpXgrr/grrTgrq7gr4hf4K6a4K+G4K614K+N4K614K6+4K6v4K+N4K6V4K6/4K604K6u4K+IX+CuquCvgeCupOCuqeCvjeCuleCuv+CutOCuruCviF/grrXgrr/grq/grr7grrTgrpXgr43grpXgrr/grrTgrq7gr4hf4K614K+G4K6z4K+N4K6z4K6/4K6V4K+N4K6V4K6/4K604K6u4K+IX+CumuCuqeCuv+CuleCvjeCuleCuv+CutOCuruCviCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CunuCuvuCur+Cuv+CuseCvgV/grqTgrr/grpngr43grpXgrrPgr41f4K6a4K+G4K614K+N4K614K6+4K6v4K+NX+CuquCvgeCupOCuqeCvjV/grrXgrr/grq/grr7grrTgrqngr41f4K614K+G4K6z4K+N4K6z4K6/X+CumuCuqeCuvycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgrp7grr5f4K6k4K6/X+CumuCvhl/grqrgr4Ff4K614K6/X+CuteCvhl/grponLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSwgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgrofgrqngr43grrHgr4FdIExUJyxcbiAgICBuZXh0RGF5OiAnW+CuqOCuvuCus+CviF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCwgTFQnLFxuICAgIGxhc3REYXk6ICdb4K6o4K+H4K6x4K+N4K6x4K+BXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4K6V4K6f4K6o4K+N4K6kIOCuteCuvuCusOCuruCvjV0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4K6H4K6y4K+NJyxcbiAgICBwYXN0OiAnJXMg4K6u4K+B4K6p4K+NJyxcbiAgICBzOiAn4K6S4K6w4K+BIOCumuCuv+CusiDgrrXgrr/grqjgrr7grp/grr/grpXgrrPgr40nLFxuICAgIHNzOiAnJWQg4K614K6/4K6o4K6+4K6f4K6/4K6V4K6z4K+NJyxcbiAgICBtOiAn4K6S4K6w4K+BIOCuqOCuv+CuruCuv+Cun+CuruCvjScsXG4gICAgbW06ICclZCDgrqjgrr/grq7grr/grp/grpngr43grpXgrrPgr40nLFxuICAgIGg6ICfgrpLgrrDgr4Eg4K6u4K6j4K6/IOCuqOCvh+CusOCuruCvjScsXG4gICAgaGg6ICclZCDgrq7grqPgrr8g4K6o4K+H4K6w4K6u4K+NJyxcbiAgICBkOiAn4K6S4K6w4K+BIOCuqOCuvuCus+CvjScsXG4gICAgZGQ6ICclZCDgrqjgrr7grp/gr43grpXgrrPgr40nLFxuICAgIE06ICfgrpLgrrDgr4Eg4K6u4K6+4K6k4K6u4K+NJyxcbiAgICBNTTogJyVkIOCuruCuvuCupOCumeCvjeCuleCus+CvjScsXG4gICAgeTogJ+CukuCusOCvgSDgrrXgrrDgr4Hgrp/grq7gr40nLFxuICAgIHl5OiAnJWQg4K6G4K6j4K+N4K6f4K+B4K6V4K6z4K+NJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3grrXgrqTgr4EvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXIgKyAn4K614K6k4K+BJztcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+Cvp+CvqOCvqeCvquCvq+CvrOCvreCvruCvr+Cvpl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4K6v4K6+4K6u4K6u4K+NfOCuteCviOCuleCuseCviHzgrpXgrr7grrLgr4h84K6o4K6j4K+N4K6q4K6V4K6y4K+NfOCujuCuseCvjeCuquCuvuCun+CvgXzgrq7grr7grrLgr4gvLFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAyKSB7XG4gICAgICByZXR1cm4gJyDgrq/grr7grq7grq7gr40nO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDYpIHtcbiAgICAgIHJldHVybiAnIOCuteCviOCuleCuseCviCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAnIOCuleCuvuCusuCviCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTQpIHtcbiAgICAgIHJldHVybiAnIOCuqOCuo+CvjeCuquCuleCusuCvjSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTgpIHtcbiAgICAgIHJldHVybiAnIOCujuCuseCvjeCuquCuvuCun+CvgSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjIpIHtcbiAgICAgIHJldHVybiAnIOCuruCuvuCusuCviCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnIOCur+CuvuCuruCuruCvjSc7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4K6v4K6+4K6u4K6u4K+NJykge1xuICAgICAgcmV0dXJuIGhvdXIgPCAyID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4K614K+I4K6V4K6x4K+IJyB8fCBtZXJpZGllbSA9PT0gJ+CuleCuvuCusuCviCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgrqjgrqPgr43grqrgrpXgrrLgr40nKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0ZScsIHtcbiAgbW9udGhzOiAn4LCc4LCo4LC14LCw4LC/X+Cwq+Cwv+CwrOCxjeCwsOCwteCwsOCwv1/gsK7gsL7gsLDgsY3gsJrgsL9f4LCP4LCq4LGN4LCw4LC/4LCy4LGNX+CwruCxh1/gsJzgsYLgsKjgsY1f4LCc4LGB4LCy4LGIX+CwhuCwl+CwuOCxjeCwn+CxgV/gsLjgsYbgsKrgsY3gsJ/gsYbgsILgsKzgsLDgsY1f4LCF4LCV4LGN4LCf4LGL4LCs4LCw4LGNX+CwqOCwteCwguCwrOCwsOCxjV/gsKHgsL/gsLjgsYbgsILgsKzgsLDgsY0nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4LCc4LCoLl/gsKvgsL/gsKzgsY3gsLAuX+CwruCwvuCwsOCxjeCwmuCwv1/gsI/gsKrgsY3gsLDgsL8uX+CwruCxh1/gsJzgsYLgsKjgsY1f4LCc4LGB4LCy4LGIX+CwhuCwly5f4LC44LGG4LCq4LGNLl/gsIXgsJXgsY3gsJ/gsYsuX+CwqOCwtS5f4LCh4LC/4LC44LGGLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfgsIbgsKbgsL/gsLXgsL7gsLDgsIJf4LC44LGL4LCu4LC14LC+4LCw4LCCX+CwruCwguCwl+Cws+CwteCwvuCwsOCwgl/gsKzgsYHgsKfgsLXgsL7gsLDgsIJf4LCX4LGB4LCw4LGB4LC14LC+4LCw4LCCX+CwtuCxgeCwleCxjeCwsOCwteCwvuCwsOCwgl/gsLbgsKjgsL/gsLXgsL7gsLDgsIInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgsIbgsKbgsL9f4LC44LGL4LCuX+CwruCwguCwl+Cws1/gsKzgsYHgsKdf4LCX4LGB4LCw4LGBX+CwtuCxgeCwleCxjeCwsF/gsLbgsKjgsL8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4LCGX+CwuOCxi1/gsK7gsIJf4LCs4LGBX+Cwl+CxgV/gsLbgsYFf4LC2Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tJyxcbiAgICBMVFM6ICdBIGg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CwqOCxh+CwoeCxgV0gTFQnLFxuICAgIG5leHREYXk6ICdb4LCw4LGH4LCq4LGBXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgsKjgsL/gsKjgsY3gsKhdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgsJfgsKRdIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOCwsuCxiycsXG4gICAgcGFzdDogJyVzIOCwleCxjeCwsOCwv+CwpOCwgicsXG4gICAgczogJ+CwleCxiuCwqOCxjeCwqOCwvyDgsJXgsY3gsLfgsKPgsL7gsLLgsYEnLFxuICAgIHNzOiAnJWQg4LC44LGG4LCV4LCo4LGN4LCy4LGBJyxcbiAgICBtOiAn4LCS4LCVIOCwqOCwv+CwruCwv+Cwt+CwgicsXG4gICAgbW06ICclZCDgsKjgsL/gsK7gsL/gsLfgsL7gsLLgsYEnLFxuICAgIGg6ICfgsJLgsJUg4LCX4LCC4LCfJyxcbiAgICBoaDogJyVkIOCwl+CwguCwn+CwsuCxgScsXG4gICAgZDogJ+CwkuCwlSDgsLDgsYvgsJzgsYEnLFxuICAgIGRkOiAnJWQg4LCw4LGL4LCc4LGB4LCy4LGBJyxcbiAgICBNOiAn4LCS4LCVIOCwqOCxhuCwsicsXG4gICAgTU06ICclZCDgsKjgsYbgsLLgsLLgsYEnLFxuICAgIHk6ICfgsJLgsJUg4LC44LCC4LC14LCk4LGN4LC44LCw4LCCJyxcbiAgICB5eTogJyVkIOCwuOCwguCwteCwpOCxjeCwuOCwsOCwvuCwsuCxgSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ94LC1LyxcbiAgb3JkaW5hbDogJyVk4LC1JyxcbiAgbWVyaWRpZW1QYXJzZTogL+CwsOCwvuCwpOCxjeCwsOCwv3zgsIngsKbgsK/gsIJ84LCu4LCn4LGN4LCv4LC+4LC54LGN4LCo4LCCfOCwuOCwvuCwr+CwguCwpOCxjeCwsOCwgi8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgsLDgsL7gsKTgsY3gsLDgsL8nKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgsIngsKbgsK/gsIInKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4LCu4LCn4LGN4LCv4LC+4LC54LGN4LCo4LCCJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTAgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgsLjgsL7gsK/gsILgsKTgsY3gsLDgsIInKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfgsLDgsL7gsKTgsY3gsLDgsL8nO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEwKSB7XG4gICAgICByZXR1cm4gJ+CwieCwpuCwr+Cwgic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn4LCu4LCn4LGN4LCv4LC+4LC54LGN4LCo4LCCJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgsLjgsL7gsK/gsILgsKTgsY3gsLDgsIInO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+CwsOCwvuCwpOCxjeCwsOCwvyc7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0ZXQnLCB7XG4gIG1vbnRoczogJ0phbmVpcnVfRmV2ZXJlaXJ1X01hcnN1X0FicmlsX01haXVfSnXDsXVfSnVsbHVfQWd1c3R1X1NldGVtYnJ1X091dHVicnVfTm92ZW1icnVfRGV6ZW1icnUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0Zldl9NYXJfQWJyX01haV9KdW5fSnVsX0Fnb19TZXRfT3V0X05vdl9EZXonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnRG9taW5ndV9TZWd1bmRhX1RlcnNhX0t1YXJ0YV9LaW50YV9TZXN0YV9TYWJhZHUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdEb21fU2VnX1RlcnNfS3VhX0tpbnRfU2VzdF9TYWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnRG9fU2VnX1RlX0t1X0tpX1Nlc19TYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tPaGluIGloYV0gTFQnLFxuICAgIG5leHREYXk6ICdbQWJhbiBpaGFdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2loYV0gTFQnLFxuICAgIGxhc3REYXk6ICdbSG9yaXNlaWsgaWhhXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtzZW1hbmEga290dWtdIFtpaGFdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2loYSAlcycsXG4gICAgcGFzdDogJyVzIGxpdWJhJyxcbiAgICBzOiAnc2VndW5kdSBiYWx1bicsXG4gICAgc3M6ICdzZWd1bmR1ICVkJyxcbiAgICBtOiAnbWludXR1IGlkYScsXG4gICAgbW06ICdtaW51dHUgJWQnLFxuICAgIGg6ICdvcmFzIGlkYScsXG4gICAgaGg6ICdvcmFzICVkJyxcbiAgICBkOiAnbG9yb24gaWRhJyxcbiAgICBkZDogJ2xvcm9uICVkJyxcbiAgICBNOiAnZnVsYW4gaWRhJyxcbiAgICBNTTogJ2Z1bGFuICVkJyxcbiAgICB5OiAndGluYW4gaWRhJyxcbiAgICB5eTogJ3RpbmFuICVkJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oc3R8bmR8cmR8dGgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICBvdXRwdXQgPSB+fihudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEgPyAndGgnIDogYiA9PT0gMSA/ICdzdCcgOiBiID09PSAyID8gJ25kJyA6IGIgPT09IDMgPyAncmQnIDogJ3RoJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3VmZml4ZXMgPSB7XG4gIDA6ICct0YPQvCcsXG4gIDE6ICct0YPQvCcsXG4gIDI6ICct0Y7QvCcsXG4gIDM6ICct0Y7QvCcsXG4gIDQ6ICct0YPQvCcsXG4gIDU6ICct0YPQvCcsXG4gIDY6ICct0YPQvCcsXG4gIDc6ICct0YPQvCcsXG4gIDg6ICct0YPQvCcsXG4gIDk6ICct0YPQvCcsXG4gIDEwOiAnLdGD0LwnLFxuICAxMjogJy3Rg9C8JyxcbiAgMTM6ICct0YPQvCcsXG4gIDIwOiAnLdGD0LwnLFxuICAzMDogJy3RjtC8JyxcbiAgNDA6ICct0YPQvCcsXG4gIDUwOiAnLdGD0LwnLFxuICA2MDogJy3Rg9C8JyxcbiAgNzA6ICct0YPQvCcsXG4gIDgwOiAnLdGD0LwnLFxuICA5MDogJy3Rg9C8JyxcbiAgMTAwOiAnLdGD0LwnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndGcnLCB7XG4gIG1vbnRoczoge1xuICAgIGZvcm1hdDogJ9GP0L3QstCw0YDQuF/RhNC10LLRgNCw0LvQuF/QvNCw0YDRgtC4X9Cw0L/RgNC10LvQuF/QvNCw0LnQuF/QuNGO0L3QuF/QuNGO0LvQuF/QsNCy0LPRg9GB0YLQuF/RgdC10L3RgtGP0LHRgNC4X9C+0LrRgtGP0LHRgNC4X9C90L7Rj9Cx0YDQuF/QtNC10LrQsNCx0YDQuCcuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAn0Y/QvdCy0LDRgF/RhNC10LLRgNCw0Ltf0LzQsNGA0YJf0LDQv9GA0LXQu1/QvNCw0Llf0LjRjtC9X9C40Y7Qu1/QsNCy0LPRg9GB0YJf0YHQtdC90YLRj9Cx0YBf0L7QutGC0Y/QsdGAX9C90L7Rj9Cx0YBf0LTQtdC60LDQsdGAJy5zcGxpdCgnXycpXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAn0Y/QvdCyX9GE0LXQsl/QvNCw0YBf0LDQv9GAX9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs1/RgdC10L1f0L7QutGCX9C90L7Rj1/QtNC10LonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn0Y/QutGI0LDQvdCx0LVf0LTRg9GI0LDQvdCx0LVf0YHQtdGI0LDQvdCx0LVf0YfQvtGA0YjQsNC90LHQtV/Qv9Cw0L3St9GI0LDQvdCx0LVf0rfRg9C80YrQsF/RiNCw0L3QsdC1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn0Y/RiNCxX9C00YjQsV/RgdGI0LFf0YfRiNCxX9C/0YjQsV/St9GD0Lxf0YjQvdCxJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9GP0Yhf0LTRiF/RgdGIX9GH0Yhf0L/RiF/St9C8X9GI0LEnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb0JjQvNGA06/QtyDRgdC+0LDRgtC4XSBMVCcsXG4gICAgbmV4dERheTogJ1vQpNCw0YDQtNC+INGB0L7QsNGC0LhdIExUJyxcbiAgICBsYXN0RGF5OiAnW9CU0LjRgNOv0Lcg0YHQvtCw0YLQuF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZFvQuF0gW9Kz0LDRhNGC0LDQuCDQvtGP0L3QtNCwINGB0L7QsNGC0LhdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGRb0LhdIFvSs9Cw0YTRgtCw0Lgg0LPRg9C30LDRiNGC0LAg0YHQvtCw0YLQuF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0LHQsNGK0LTQuCAlcycsXG4gICAgcGFzdDogJyVzINC/0LXRiCcsXG4gICAgczogJ9GP0LrRh9Cw0L3QtCDRgdC+0L3QuNGPJyxcbiAgICBtOiAn0Y/QuiDQtNCw0pvQuNKb0LAnLFxuICAgIG1tOiAnJWQg0LTQsNKb0LjSm9CwJyxcbiAgICBoOiAn0Y/QuiDRgdC+0LDRgicsXG4gICAgaGg6ICclZCDRgdC+0LDRgicsXG4gICAgZDogJ9GP0Log0YDTr9C3JyxcbiAgICBkZDogJyVkINGA06/QtycsXG4gICAgTTogJ9GP0Log0LzQvtKzJyxcbiAgICBNTTogJyVkINC80L7SsycsXG4gICAgeTogJ9GP0Log0YHQvtC7JyxcbiAgICB5eTogJyVkINGB0L7QuydcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9GI0LDQsXzRgdGD0LHSs3zRgNOv0Ld80LHQtdCz0L7Ssy8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfRiNCw0LEnKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfRgdGD0LHSsycpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfRgNOv0LcnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ9Cx0LXQs9C+0rMnKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfRiNCw0LEnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDExKSB7XG4gICAgICByZXR1cm4gJ9GB0YPQsdKzJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNikge1xuICAgICAgcmV0dXJuICfRgNOv0LcnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE5KSB7XG4gICAgICByZXR1cm4gJ9Cx0LXQs9C+0rMnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ9GI0LDQsSc7XG4gICAgfVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0tKNGD0Lx80Y7QvCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBhID0gbnVtYmVyICUgMTAsXG4gICAgICAgIGIgPSBudW1iZXIgPj0gMTAwID8gMTAwIDogbnVsbDtcbiAgICByZXR1cm4gbnVtYmVyICsgKHN1ZmZpeGVzW251bWJlcl0gfHwgc3VmZml4ZXNbYV0gfHwgc3VmZml4ZXNbYl0pO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0aCcsIHtcbiAgbW9udGhzOiAn4Lih4LiB4Lij4Liy4LiE4LihX+C4geC4uOC4oeC4oOC4suC4nuC4seC4meC4mOC5jF/guKHguLXguJnguLLguITguKFf4LmA4Lih4Lip4Liy4Lii4LiZX+C4nuC4pOC4qeC4oOC4suC4hOC4oV/guKHguLTguJbguLjguJnguLLguKLguJlf4LiB4Lij4LiB4LiO4Liy4LiE4LihX+C4quC4tOC4h+C4q+C4suC4hOC4oV/guIHguLHguJnguKLguLLguKLguJlf4LiV4Li44Lil4Liy4LiE4LihX+C4nuC4pOC4qOC4iOC4tOC4geC4suC4ouC4mV/guJjguLHguJnguKfguLLguITguKEnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4LihLuC4hC5f4LiBLuC4ni5f4Lih4Li1LuC4hC5f4LmA4LihLuC4oi5f4LieLuC4hC5f4Lih4Li0LuC4oi5f4LiBLuC4hC5f4LiqLuC4hC5f4LiBLuC4oi5f4LiVLuC4hC5f4LieLuC4oi5f4LiYLuC4hC4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4Lit4Liy4LiX4Li04LiV4Lii4LmMX+C4iOC4seC4meC4l+C4o+C5jF/guK3guLHguIfguITguLLguKNf4Lie4Li44LiYX+C4nuC4pOC4q+C4seC4quC4muC4lOC4tV/guKjguLjguIHguKPguYxf4LmA4Liq4Liy4Lij4LmMJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4Lit4Liy4LiX4Li04LiV4Lii4LmMX+C4iOC4seC4meC4l+C4o+C5jF/guK3guLHguIfguITguLLguKNf4Lie4Li44LiYX+C4nuC4pOC4q+C4seC4ql/guKjguLjguIHguKPguYxf4LmA4Liq4Liy4Lij4LmMJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+C4reC4si5f4LiILl/guK0uX+C4ni5f4Lie4LikLl/guKguX+C4qi4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSDguYDguKfguKXguLIgSDptbScsXG4gICAgTExMTDogJ+C4p+C4seC4mWRkZGTguJfguLXguYggRCBNTU1NIFlZWVkg4LmA4Lin4Lil4LiyIEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/guIHguYjguK3guJnguYDguJfguLXguYjguKLguId84Lir4Lil4Lix4LiH4LmA4LiX4Li14LmI4Lii4LiHLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gJ+C4q+C4peC4seC4h+C5gOC4l+C4teC5iOC4ouC4hyc7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ+C4geC5iOC4reC4meC5gOC4l+C4teC5iOC4ouC4hyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4Lir4Lil4Lix4LiH4LmA4LiX4Li14LmI4Lii4LiHJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vguKfguLHguJnguJnguLXguYkg4LmA4Lin4Lil4LiyXSBMVCcsXG4gICAgbmV4dERheTogJ1vguJ7guKPguLjguYjguIfguJnguLXguYkg4LmA4Lin4Lil4LiyXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkW+C4q+C4meC5ieC4siDguYDguKfguKXguLJdIExUJyxcbiAgICBsYXN0RGF5OiAnW+C5gOC4oeC4t+C5iOC4reC4p+C4suC4meC4meC4teC5iSDguYDguKfguKXguLJdIExUJyxcbiAgICBsYXN0V2VlazogJ1vguKfguLHguJldZGRkZFvguJfguLXguYjguYHguKXguYnguKcg4LmA4Lin4Lil4LiyXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfguK3guLXguIEgJXMnLFxuICAgIHBhc3Q6ICclc+C4l+C4teC5iOC5geC4peC5ieC4pycsXG4gICAgczogJ+C5hOC4oeC5iOC4geC4teC5iOC4p+C4tOC4meC4suC4l+C4tScsXG4gICAgc3M6ICclZCDguKfguLTguJnguLLguJfguLUnLFxuICAgIG06ICcxIOC4meC4suC4l+C4tScsXG4gICAgbW06ICclZCDguJnguLLguJfguLUnLFxuICAgIGg6ICcxIOC4iuC4seC5iOC4p+C5guC4oeC4hycsXG4gICAgaGg6ICclZCDguIrguLHguYjguKfguYLguKHguIcnLFxuICAgIGQ6ICcxIOC4p+C4seC4mScsXG4gICAgZGQ6ICclZCDguKfguLHguJknLFxuICAgIHc6ICcxIOC4quC4seC4m+C4lOC4suC4q+C5jCcsXG4gICAgd3c6ICclZCDguKrguLHguJvguJTguLLguKvguYwnLFxuICAgIE06ICcxIOC5gOC4lOC4t+C4reC4mScsXG4gICAgTU06ICclZCDguYDguJTguLfguK3guJknLFxuICAgIHk6ICcxIOC4m+C4tScsXG4gICAgeXk6ICclZCDguJvguLUnXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzdWZmaXhlcyA9IHtcbiAgMTogXCInaW5qaVwiLFxuICA1OiBcIidpbmppXCIsXG4gIDg6IFwiJ2luamlcIixcbiAgNzA6IFwiJ2luamlcIixcbiAgODA6IFwiJ2luamlcIixcbiAgMjogXCInbmppXCIsXG4gIDc6IFwiJ25qaVwiLFxuICAyMDogXCInbmppXCIsXG4gIDUwOiBcIiduamlcIixcbiAgMzogXCInw7xuamlcIixcbiAgNDogXCInw7xuamlcIixcbiAgMTAwOiBcIifDvG5qaVwiLFxuICA2OiBcIiduanlcIixcbiAgOTogXCIndW5qeVwiLFxuICAxMDogXCIndW5qeVwiLFxuICAzMDogXCIndW5qeVwiLFxuICA2MDogXCIneW5qeVwiLFxuICA5MDogXCIneW5qeVwiXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndGsnLCB7XG4gIG1vbnRoczogJ8OdYW53YXJfRmV3cmFsX01hcnRfQXByZWxfTWHDvV9Jw711bl9Jw711bF9Bd2d1c3RfU2VudMO9YWJyX09rdMO9YWJyX05vw71hYnJfRGVrYWJyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ8OdYW5fRmV3X01hcl9BcHJfTWHDvV9Jw71uX0nDvWxfQXdnX1Nlbl9Pa3RfTm/DvV9EZWsnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnw51la8WfZW5iZV9EdcWfZW5iZV9TacWfZW5iZV/Dh2FyxZ9lbmJlX1BlbsWfZW5iZV9Bbm5hX8WeZW5iZScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ8OdZWtfRHXFn19TacWfX8OHYXJfUGVuX0Fubl/FnmVuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ8Oda19ExZ9fU8WfX8OHcl9Qbl9Bbl/Fnm4nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbYnVnw7xuIHNhZ2F0XSBMVCcsXG4gICAgbmV4dERheTogJ1tlcnRpciBzYWdhdF0gTFQnLFxuICAgIG5leHRXZWVrOiAnW2luZGlraV0gZGRkZCBbc2FnYXRdIExUJyxcbiAgICBsYXN0RGF5OiAnW2TDvMO9bl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW2dlw6dlbl0gZGRkZCBbc2FnYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIHNvxYgnLFxuICAgIHBhc3Q6ICclcyDDtsWIJyxcbiAgICBzOiAnYmlybsOkw6dlIHNla3VudCcsXG4gICAgbTogJ2JpciBtaW51dCcsXG4gICAgbW06ICclZCBtaW51dCcsXG4gICAgaDogJ2JpciBzYWdhdCcsXG4gICAgaGg6ICclZCBzYWdhdCcsXG4gICAgZDogJ2JpciBnw7xuJyxcbiAgICBkZDogJyVkIGfDvG4nLFxuICAgIE06ICdiaXIgYcO9JyxcbiAgICBNTTogJyVkIGHDvScsXG4gICAgeTogJ2JpciDDvXlsJyxcbiAgICB5eTogJyVkIMO9eWwnXG4gIH0sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RvJzpcbiAgICAgIGNhc2UgJ0REJzpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBudW1iZXIgKyBcIid1bmp5XCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYSA9IG51bWJlciAlIDEwLFxuICAgICAgICAgICAgYiA9IG51bWJlciAlIDEwMCAtIGEsXG4gICAgICAgICAgICBjID0gbnVtYmVyID49IDEwMCA/IDEwMCA6IG51bGw7XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAoc3VmZml4ZXNbYV0gfHwgc3VmZml4ZXNbYl0gfHwgc3VmZml4ZXNbY10pO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndGwtcGgnLCB7XG4gIG1vbnRoczogJ0VuZXJvX1BlYnJlcm9fTWFyc29fQWJyaWxfTWF5b19IdW55b19IdWx5b19BZ29zdG9fU2V0eWVtYnJlX09rdHVicmVfTm9ieWVtYnJlX0Rpc3llbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdFbmVfUGViX01hcl9BYnJfTWF5X0h1bl9IdWxfQWdvX1NldF9Pa3RfTm9iX0Rpcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdMaW5nZ29fTHVuZXNfTWFydGVzX01peWVya3VsZXNfSHV3ZWJlc19CaXllcm5lc19TYWJhZG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdMaW5fTHVuX01hcl9NaXlfSHV3X0JpeV9TYWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnTGlfTHVfTWFfTWlfSHVfQmlfU2FiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnTU0vRC9ZWVlZJyxcbiAgICBMTDogJ01NTU0gRCwgWVlZWScsXG4gICAgTExMOiAnTU1NTSBELCBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgTU1NTSBERCwgWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnTFQgW25nYXlvbmcgYXJhd10nLFxuICAgIG5leHREYXk6ICdbQnVrYXMgbmddIExUJyxcbiAgICBuZXh0V2VlazogJ0xUIFtzYSBzdXN1bm9kIG5hXSBkZGRkJyxcbiAgICBsYXN0RGF5OiAnTFQgW2thaGFwb25dJyxcbiAgICBsYXN0V2VlazogJ0xUIFtub29uZyBuYWthcmFhbmddIGRkZGQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnc2EgbG9vYiBuZyAlcycsXG4gICAgcGFzdDogJyVzIGFuZyBuYWthbGlwYXMnLFxuICAgIHM6ICdpbGFuZyBzZWd1bmRvJyxcbiAgICBzczogJyVkIHNlZ3VuZG8nLFxuICAgIG06ICdpc2FuZyBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvJyxcbiAgICBoOiAnaXNhbmcgb3JhcycsXG4gICAgaGg6ICclZCBvcmFzJyxcbiAgICBkOiAnaXNhbmcgYXJhdycsXG4gICAgZGQ6ICclZCBhcmF3JyxcbiAgICBNOiAnaXNhbmcgYnV3YW4nLFxuICAgIE1NOiAnJWQgYnV3YW4nLFxuICAgIHk6ICdpc2FuZyB0YW9uJyxcbiAgICB5eTogJyVkIHRhb24nXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG51bWJlcnNOb3VucyA9ICdwYWdoX3dh4oCZX2NoYeKAmV93ZWpfbG9TX3ZhZ2hfamF2X1NvY2hfY2hvcmdoX0h1dCcuc3BsaXQoJ18nKTtcblxuZnVuY3Rpb24gdHJhbnNsYXRlRnV0dXJlKG91dHB1dCkge1xuICB2YXIgdGltZSA9IG91dHB1dDtcbiAgdGltZSA9IG91dHB1dC5pbmRleE9mKCdqYWonKSAhPT0gLTEgPyB0aW1lLnNsaWNlKDAsIC0zKSArICdsZVMnIDogb3V0cHV0LmluZGV4T2YoJ2phcicpICE9PSAtMSA/IHRpbWUuc2xpY2UoMCwgLTMpICsgJ3dhUScgOiBvdXRwdXQuaW5kZXhPZignRElTJykgIT09IC0xID8gdGltZS5zbGljZSgwLCAtMykgKyAnbmVtJyA6IHRpbWUgKyAnIHBJcSc7XG4gIHJldHVybiB0aW1lO1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGVQYXN0KG91dHB1dCkge1xuICB2YXIgdGltZSA9IG91dHB1dDtcbiAgdGltZSA9IG91dHB1dC5pbmRleE9mKCdqYWonKSAhPT0gLTEgPyB0aW1lLnNsaWNlKDAsIC0zKSArICdIdeKAmScgOiBvdXRwdXQuaW5kZXhPZignamFyJykgIT09IC0xID8gdGltZS5zbGljZSgwLCAtMykgKyAnd2VuJyA6IG91dHB1dC5pbmRleE9mKCdESVMnKSAhPT0gLTEgPyB0aW1lLnNsaWNlKDAsIC0zKSArICdiZW4nIDogdGltZSArICcgcmV0JztcbiAgcmV0dXJuIHRpbWU7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgdmFyIG51bWJlck5vdW4gPSBudW1iZXJBc05vdW4obnVtYmVyKTtcblxuICBzd2l0Y2ggKHN0cmluZykge1xuICAgIGNhc2UgJ3NzJzpcbiAgICAgIHJldHVybiBudW1iZXJOb3VuICsgJyBsdXAnO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgcmV0dXJuIG51bWJlck5vdW4gKyAnIHR1cCc7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICByZXR1cm4gbnVtYmVyTm91biArICcgcmVwJztcblxuICAgIGNhc2UgJ2RkJzpcbiAgICAgIHJldHVybiBudW1iZXJOb3VuICsgJyBqYWonO1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgcmV0dXJuIG51bWJlck5vdW4gKyAnIGphcic7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICByZXR1cm4gbnVtYmVyTm91biArICcgRElTJztcbiAgfVxufVxuXG5mdW5jdGlvbiBudW1iZXJBc05vdW4obnVtYmVyKSB7XG4gIHZhciBodW5kcmVkID0gTWF0aC5mbG9vcihudW1iZXIgJSAxMDAwIC8gMTAwKSxcbiAgICAgIHRlbiA9IE1hdGguZmxvb3IobnVtYmVyICUgMTAwIC8gMTApLFxuICAgICAgb25lID0gbnVtYmVyICUgMTAsXG4gICAgICB3b3JkID0gJyc7XG5cbiAgaWYgKGh1bmRyZWQgPiAwKSB7XG4gICAgd29yZCArPSBudW1iZXJzTm91bnNbaHVuZHJlZF0gKyAndmF0bGgnO1xuICB9XG5cbiAgaWYgKHRlbiA+IDApIHtcbiAgICB3b3JkICs9ICh3b3JkICE9PSAnJyA/ICcgJyA6ICcnKSArIG51bWJlcnNOb3Vuc1t0ZW5dICsgJ21hSCc7XG4gIH1cblxuICBpZiAob25lID4gMCkge1xuICAgIHdvcmQgKz0gKHdvcmQgIT09ICcnID8gJyAnIDogJycpICsgbnVtYmVyc05vdW5zW29uZV07XG4gIH1cblxuICByZXR1cm4gd29yZCA9PT0gJycgPyAncGFnaCcgOiB3b3JkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0bGgnLCB7XG4gIG1vbnRoczogJ3RlcmHigJkgamFyIHdh4oCZX3RlcmHigJkgamFyIGNoYeKAmV90ZXJh4oCZIGphciB3ZWpfdGVyYeKAmSBqYXIgbG9TX3RlcmHigJkgamFyIHZhZ2hfdGVyYeKAmSBqYXIgamF2X3RlcmHigJkgamFyIFNvY2hfdGVyYeKAmSBqYXIgY2hvcmdoX3RlcmHigJkgamFyIEh1dF90ZXJh4oCZIGphciB3YeKAmW1hSF90ZXJh4oCZIGphciB3YeKAmW1hSCB3YeKAmV90ZXJh4oCZIGphciB3YeKAmW1hSCBjaGHigJknLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFyIHdh4oCZX2phciBjaGHigJlfamFyIHdlal9qYXIgbG9TX2phciB2YWdoX2phciBqYXZfamFyIFNvY2hfamFyIGNob3JnaF9qYXIgSHV0X2phciB3YeKAmW1hSF9qYXIgd2HigJltYUggd2HigJlfamFyIHdh4oCZbWFIIGNoYeKAmScuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdsb2ptSXRqYWpfRGFTamFqX3Bvdmphal9naEl0bGhqYWpfbG9naGphal9idXFqYWpfZ2hJbmphaicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2xvam1JdGphal9EYVNqYWpfcG92amFqX2doSXRsaGphal9sb2doamFqX2J1cWphal9naEluamFqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2xvam1JdGphal9EYVNqYWpfcG92amFqX2doSXRsaGphal9sb2doamFqX2J1cWphal9naEluamFqJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0RhSGphal0gTFQnLFxuICAgIG5leHREYXk6ICdbd2HigJlsZVNdIExUJyxcbiAgICBuZXh0V2VlazogJ0xMTCcsXG4gICAgbGFzdERheTogJ1t3YeKAmUh14oCZXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdMTEwnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiB0cmFuc2xhdGVGdXR1cmUsXG4gICAgcGFzdDogdHJhbnNsYXRlUGFzdCxcbiAgICBzOiAncHVTIGx1cCcsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiAnd2HigJkgdHVwJyxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6ICd3YeKAmSByZXAnLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogJ3dh4oCZIGphaicsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiAnd2HigJkgamFyJyxcbiAgICBNTTogdHJhbnNsYXRlLFxuICAgIHk6ICd3YeKAmSBESVMnLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzdWZmaXhlcyA9IHtcbiAgMTogXCInaW5jaVwiLFxuICA1OiBcIidpbmNpXCIsXG4gIDg6IFwiJ2luY2lcIixcbiAgNzA6IFwiJ2luY2lcIixcbiAgODA6IFwiJ2luY2lcIixcbiAgMjogXCInbmNpXCIsXG4gIDc6IFwiJ25jaVwiLFxuICAyMDogXCInbmNpXCIsXG4gIDUwOiBcIiduY2lcIixcbiAgMzogXCInw7xuY8O8XCIsXG4gIDQ6IFwiJ8O8bmPDvFwiLFxuICAxMDA6IFwiJ8O8bmPDvFwiLFxuICA2OiBcIiduY8SxXCIsXG4gIDk6IFwiJ3VuY3VcIixcbiAgMTA6IFwiJ3VuY3VcIixcbiAgMzA6IFwiJ3VuY3VcIixcbiAgNjA6IFwiJ8SxbmPEsVwiLFxuICA5MDogXCInxLFuY8SxXCJcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0cicsIHtcbiAgbW9udGhzOiAnT2Nha1/FnnViYXRfTWFydF9OaXNhbl9NYXnEsXNfSGF6aXJhbl9UZW1tdXpfQcSfdXN0b3NfRXlsw7xsX0VraW1fS2FzxLFtX0FyYWzEsWsnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnT2NhX8WedWJfTWFyX05pc19NYXlfSGF6X1RlbV9BxJ91X0V5bF9Fa2lfS2FzX0FyYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdQYXphcl9QYXphcnRlc2lfU2FsxLFfw4dhcsWfYW1iYV9QZXLFn2VtYmVfQ3VtYV9DdW1hcnRlc2knLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdQYXpfUHRzX1NhbF/Dh2FyX1Blcl9DdW1fQ3RzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1B6X1B0X1NhX8OHYV9QZV9DdV9DdCcuc3BsaXQoJ18nKSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzIDwgMTIpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ8O2w7YnIDogJ8OWw5YnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICfDtnMnIDogJ8OWUyc7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvw7bDtnzDlsOWfMO2c3zDllMvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSAnw7ZzJyB8fCBpbnB1dCA9PT0gJ8OWUyc7XG4gIH0sXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbYnVnw7xuIHNhYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW3lhcsSxbiBzYWF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbZ2VsZWNla10gZGRkZCBbc2FhdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbZMO8bl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW2dlw6dlbl0gZGRkZCBbc2FhdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgc29ucmEnLFxuICAgIHBhc3Q6ICclcyDDtm5jZScsXG4gICAgczogJ2Jpcmthw6cgc2FuaXllJyxcbiAgICBzczogJyVkIHNhbml5ZScsXG4gICAgbTogJ2JpciBkYWtpa2EnLFxuICAgIG1tOiAnJWQgZGFraWthJyxcbiAgICBoOiAnYmlyIHNhYXQnLFxuICAgIGhoOiAnJWQgc2FhdCcsXG4gICAgZDogJ2JpciBnw7xuJyxcbiAgICBkZDogJyVkIGfDvG4nLFxuICAgIHc6ICdiaXIgaGFmdGEnLFxuICAgIHd3OiAnJWQgaGFmdGEnLFxuICAgIE06ICdiaXIgYXknLFxuICAgIE1NOiAnJWQgYXknLFxuICAgIHk6ICdiaXIgecSxbCcsXG4gICAgeXk6ICclZCB5xLFsJ1xuICB9LFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnRCc6XG4gICAgICBjYXNlICdEbyc6XG4gICAgICBjYXNlICdERCc6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChudW1iZXIgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gbnVtYmVyICsgXCInxLFuY8SxXCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYSA9IG51bWJlciAlIDEwLFxuICAgICAgICAgICAgYiA9IG51bWJlciAlIDEwMCAtIGEsXG4gICAgICAgICAgICBjID0gbnVtYmVyID49IDEwMCA/IDEwMCA6IG51bGw7XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAoc3VmZml4ZXNbYV0gfHwgc3VmZml4ZXNbYl0gfHwgc3VmZml4ZXNbY10pO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndHpsJywge1xuICBtb250aHM6ICdKYW51YXJfRmV2cmFnbGhfTWFyw6dfQXZyw691X01haV9Hw7xuX0p1bGlhX0d1c2NodF9TZXRlbXZhcl9MaXN0b3DDpHRzX05vZW12YXJfWmVjZW12YXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0Zldl9NYXJfQXZyX01haV9Hw7xuX0p1bF9HdXNfU2V0X0xpc19Ob2VfWmVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1PDumxhZGlfTMO6bmXDp2lfTWFpdHppX03DoXJjdXJpX1how7phZGlfVmnDqW5lcsOnaV9Tw6F0dXJpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU8O6bF9Mw7puX01haV9Nw6FyX1how7pfVmnDqV9Tw6F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1PDul9Mw7pfTWFfTcOhX1hoX1ZpX1PDoScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hILm1tJyxcbiAgICBMVFM6ICdISC5tbS5zcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBbZGFsbGFzXSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFtkYWxsYXNdIFlZWVkgSEgubW0nLFxuICAgIExMTEw6ICdkZGRkLCBbbGldIEQuIE1NTU0gW2RhbGxhc10gWVlZWSBISC5tbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL2RcXCdvfGRcXCdhL2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gXCJkJ29cIiA9PT0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzID4gMTEpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gXCJkJ29cIiA6IFwiRCdPXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gXCJkJ2FcIiA6IFwiRCdBXCI7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbb3hoaSDDoF0gTFQnLFxuICAgIG5leHREYXk6ICdbZGVtw6Agw6BdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW8OgXSBMVCcsXG4gICAgbGFzdERheTogJ1tpZWlyaSDDoF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW3PDvHIgZWxdIGRkZGQgW2xhc3RldSDDoF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb3NwcmVpICVzJyxcbiAgICBwYXN0OiAnamElcycsXG4gICAgczogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBzczogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG1tOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGg6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaGg6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBNOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE1NOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHk6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeXk6IHByb2Nlc3NSZWxhdGl2ZVRpbWVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIHM6IFsndmllbnNhcyBzZWN1bmRzJywgXCInaWVuc2FzIHNlY3VuZHNcIl0sXG4gICAgc3M6IFtudW1iZXIgKyAnIHNlY3VuZHMnLCAnJyArIG51bWJlciArICcgc2VjdW5kcyddLFxuICAgIG06IFtcIiduIG3DrXV0XCIsIFwiJ2llbnMgbcOtdXRcIl0sXG4gICAgbW06IFtudW1iZXIgKyAnIG3DrXV0cycsICcnICsgbnVtYmVyICsgJyBtw611dHMnXSxcbiAgICBoOiBbXCInbiDDvm9yYVwiLCBcIidpZW5zYSDDvm9yYVwiXSxcbiAgICBoaDogW251bWJlciArICcgw75vcmFzJywgJycgKyBudW1iZXIgKyAnIMO+b3JhcyddLFxuICAgIGQ6IFtcIiduIHppdWFcIiwgXCInaWVuc2Egeml1YVwiXSxcbiAgICBkZDogW251bWJlciArICcgeml1YXMnLCAnJyArIG51bWJlciArICcgeml1YXMnXSxcbiAgICBNOiBbXCInbiBtZXNcIiwgXCInaWVucyBtZXNcIl0sXG4gICAgTU06IFtudW1iZXIgKyAnIG1lc2VuJywgJycgKyBudW1iZXIgKyAnIG1lc2VuJ10sXG4gICAgeTogW1wiJ24gYXJcIiwgXCInaWVucyBhclwiXSxcbiAgICB5eTogW251bWJlciArICcgYXJzJywgJycgKyBudW1iZXIgKyAnIGFycyddXG4gIH07XG4gIHJldHVybiBpc0Z1dHVyZSA/IGZvcm1hdFtrZXldWzBdIDogd2l0aG91dFN1ZmZpeCA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndHptLWxhdG4nLCB7XG4gIG1vbnRoczogJ2lubmF5cl9icsukYXlyy6RfbWFyy6Rzy6RfaWJyaXJfbWF5eXdfeXdueXdfeXdseXd6X8mjd8WhdF/FoXd0YW5iaXJfa3TLpHdicsukX253d2FuYmlyX2R3am5iaXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnaW5uYXlyX2Jyy6RheXLLpF9tYXLLpHPLpF9pYnJpcl9tYXl5d195d255d195d2x5d3pfyaN3xaF0X8Whd3RhbmJpcl9rdMukd2Jyy6Rfbnd3YW5iaXJfZHdqbmJpcicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdhc2FtYXNfYXluYXNfYXNpbmFzX2FrcmFzX2Frd2FzX2FzaW13YXNfYXNp4biNeWFzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnYXNhbWFzX2F5bmFzX2FzaW5hc19ha3Jhc19ha3dhc19hc2ltd2FzX2FzaeG4jXlhcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdhc2FtYXNfYXluYXNfYXNpbmFzX2FrcmFzX2Frd2FzX2FzaW13YXNfYXNp4biNeWFzJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbYXNka2ggZ10gTFQnLFxuICAgIG5leHREYXk6ICdbYXNrYSBnXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtnXSBMVCcsXG4gICAgbGFzdERheTogJ1thc3NhbnQgZ10gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbZ10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZGFka2ggcyB5YW4gJXMnLFxuICAgIHBhc3Q6ICd5YW4gJXMnLFxuICAgIHM6ICdpbWlrJyxcbiAgICBzczogJyVkIGltaWsnLFxuICAgIG06ICdtaW514biNJyxcbiAgICBtbTogJyVkIG1pbnXhuI0nLFxuICAgIGg6ICdzYcmbYScsXG4gICAgaGg6ICclZCB0YXNzYcmbaW4nLFxuICAgIGQ6ICdhc3MnLFxuICAgIGRkOiAnJWQgb3NzYW4nLFxuICAgIE06ICdheW93cicsXG4gICAgTU06ICclZCBpeXlpcm4nLFxuICAgIHk6ICdhc2dhcycsXG4gICAgeXk6ICclZCBpc2dhc24nXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDYsXG4gICAgZG95OiAxMlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0em0nLCB7XG4gIG1vbnRoczogJ+K1ieK1j+K1j+K0sOK1ouK1lF/itLHitZXitLDitaLitZVf4rWO4rSw4rWV4rWaX+K1ieK0seK1lOK1ieK1lF/itY7itLDitaLitaLitZNf4rWi4rWT4rWP4rWi4rWTX+K1ouK1k+K1jeK1ouK1k+K1o1/itZbitZPitZvitZxf4rWb4rWT4rWc4rSw4rWP4rSx4rWJ4rWUX+K0veK1n+K1k+K0seK1lV/itY/itZPitaHitLDitY/itLHitYnitZRf4rS34rWT4rWK4rWP4rSx4rWJ4rWUJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+K1ieK1j+K1j+K0sOK1ouK1lF/itLHitZXitLDitaLitZVf4rWO4rSw4rWV4rWaX+K1ieK0seK1lOK1ieK1lF/itY7itLDitaLitaLitZNf4rWi4rWT4rWP4rWi4rWTX+K1ouK1k+K1jeK1ouK1k+K1o1/itZbitZPitZvitZxf4rWb4rWT4rWc4rSw4rWP4rSx4rWJ4rWUX+K0veK1n+K1k+K0seK1lV/itY/itZPitaHitLDitY/itLHitYnitZRf4rS34rWT4rWK4rWP4rSx4rWJ4rWUJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+K0sOK1meK0sOK1juK0sOK1mV/itLDitaLitY/itLDitZlf4rSw4rWZ4rWJ4rWP4rSw4rWZX+K0sOK0veK1lOK0sOK1mV/itLDitL3itaHitLDitZlf4rSw4rWZ4rWJ4rWO4rWh4rSw4rWZX+K0sOK1meK1ieK0ueK1ouK0sOK1mScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+K0sOK1meK0sOK1juK0sOK1mV/itLDitaLitY/itLDitZlf4rSw4rWZ4rWJ4rWP4rSw4rWZX+K0sOK0veK1lOK0sOK1mV/itLDitL3itaHitLDitZlf4rSw4rWZ4rWJ4rWO4rWh4rSw4rWZX+K0sOK1meK1ieK0ueK1ouK0sOK1mScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfitLDitZnitLDitY7itLDitZlf4rSw4rWi4rWP4rSw4rWZX+K0sOK1meK1ieK1j+K0sOK1mV/itLDitL3itZTitLDitZlf4rSw4rS94rWh4rSw4rWZX+K0sOK1meK1ieK1juK1oeK0sOK1mV/itLDitZnitYnitLnitaLitLDitZknLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vitLDitZnitLfitYUg4rS0XSBMVCcsXG4gICAgbmV4dERheTogJ1vitLDitZnitL3itLAg4rS0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvitLRdIExUJyxcbiAgICBsYXN0RGF5OiAnW+K0sOK1muK0sOK1j+K1nCDitLRdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW+K0tF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn4rS34rSw4rS34rWFIOK1mSDitaLitLDitY8gJXMnLFxuICAgIHBhc3Q6ICfitaLitLDitY8gJXMnLFxuICAgIHM6ICfitYnitY7itYnitL0nLFxuICAgIHNzOiAnJWQg4rWJ4rWO4rWJ4rS9JyxcbiAgICBtOiAn4rWO4rWJ4rWP4rWT4rS6JyxcbiAgICBtbTogJyVkIOK1juK1ieK1j+K1k+K0uicsXG4gICAgaDogJ+K1meK0sOK1hOK0sCcsXG4gICAgaGg6ICclZCDitZzitLDitZnitZnitLDitYTitYnitY8nLFxuICAgIGQ6ICfitLDitZnitZknLFxuICAgIGRkOiAnJWQgb+K1meK1meK0sOK1jycsXG4gICAgTTogJ+K0sOK1om/itZPitZQnLFxuICAgIE1NOiAnJWQg4rWJ4rWi4rWi4rWJ4rWU4rWPJyxcbiAgICB5OiAn4rSw4rWZ4rSz4rSw4rWZJyxcbiAgICB5eTogJyVkIOK1ieK1meK0s+K0sOK1meK1jydcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogNixcbiAgICBkb3k6IDEyXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3VnLWNuJywge1xuICBtb250aHM6ICfZitin2Ybbi9in2LFf2YHbkNuL2LHYp9mEX9mF2KfYsdiqX9im2KfZvtix25DZhF/Zhdin2Ypf2KbZidmK24fZhl/YptmJ2Yrbh9mEX9im2Kfbi9i624fYs9iqX9iz25DZhtiq25XYqNmJ2LFf2KbbhtmD2Krbldio2YnYsV/ZhtmI2YrYp9io2YnYsV/Yr9uQ2YPYp9io2YnYsScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfZitin2Ybbi9in2LFf2YHbkNuL2LHYp9mEX9mF2KfYsdiqX9im2KfZvtix25DZhF/Zhdin2Ypf2KbZidmK24fZhl/YptmJ2Yrbh9mEX9im2Kfbi9i624fYs9iqX9iz25DZhtiq25XYqNmJ2LFf2KbbhtmD2Krbldio2YnYsV/ZhtmI2YrYp9io2YnYsV/Yr9uQ2YPYp9io2YnYsScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfZituV2YPYtNuV2YbYqNuVX9iv24jYtNuV2YbYqNuVX9iz25XZiti025XZhtio25Vf2obYp9ix2LTbldmG2KjblV/ZvtuV2YrYtNuV2YbYqNuVX9is24jZhduVX9i025XZhtio25UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfZituVX9iv24hf2LPblV/ahtinX9m+25Vf2KzbiF/YtNuVJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9mK25Vf2K/biF/Ys9uVX9qG2Kdf2b7blV/YrNuIX9i025UnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ1lZWVkt2YrZidmE2YlNLdim2KfZitmG2YnarUQt2YPbiNmG2YknLFxuICAgIExMTDogJ1lZWVkt2YrZidmE2YlNLdim2KfZitmG2YnarUQt2YPbiNmG2YnYjCBISDptbScsXG4gICAgTExMTDogJ2RkZGTYjCBZWVlZLdmK2YnZhNmJTS3Yptin2YrZhtmJ2q1ELdmD24jZhtmJ2IwgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/ZituQ2LHZidmFINmD25DahtuVfNiz25XavtuV2LF82obbiNi02KrZidmGINio24fYsduH2YZ82obbiNi0fNqG24jYtNiq2YnZhiDZg9uQ2YrZidmGfNmD25Xahi8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfZituQ2LHZidmFINmD25DahtuVJyB8fCBtZXJpZGllbSA9PT0gJ9iz25XavtuV2LEnIHx8IG1lcmlkaWVtID09PSAn2obbiNi02KrZidmGINio24fYsduH2YYnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn2obbiNi02KrZidmGINmD25DZitmJ2YYnIHx8IG1lcmlkaWVtID09PSAn2YPbldqGJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIHZhciBobSA9IGhvdXIgKiAxMDAgKyBtaW51dGU7XG5cbiAgICBpZiAoaG0gPCA2MDApIHtcbiAgICAgIHJldHVybiAn2YrbkNix2YnZhSDZg9uQ2obblSc7XG4gICAgfSBlbHNlIGlmIChobSA8IDkwMCkge1xuICAgICAgcmV0dXJuICfYs9uV2r7bldixJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTEzMCkge1xuICAgICAgcmV0dXJuICfahtuI2LTYqtmJ2YYg2Kjbh9ix24fZhic7XG4gICAgfSBlbHNlIGlmIChobSA8IDEyMzApIHtcbiAgICAgIHJldHVybiAn2obbiNi0JztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTgwMCkge1xuICAgICAgcmV0dXJuICfahtuI2LTYqtmJ2YYg2YPbkNmK2YnZhic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2YPbldqGJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYqNuI2q/biNmGINiz2KfYptuV2KpdIExUJyxcbiAgICBuZXh0RGF5OiAnW9im25XYqtuVINiz2KfYptuV2KpdIExUJyxcbiAgICBuZXh0V2VlazogJ1vZg9uQ2YTbldix2YPZiV0gZGRkZCBb2LPYp9im25XYql0gTFQnLFxuICAgIGxhc3REYXk6ICdb2KrbhtmG24jar9uI2YZdIExUJyxcbiAgICBsYXN0V2VlazogJ1vYptin2YTYr9mJ2YbZgtmJXSBkZGRkIFvYs9in2KbbldiqXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDZg9uQ2YrZidmGJyxcbiAgICBwYXN0OiAnJXMg2Kjbh9ix24fZhicsXG4gICAgczogJ9mG25XahtqG25Ug2LPbkNmD2YjZhtiqJyxcbiAgICBzczogJyVkINiz25DZg9mI2YbYqicsXG4gICAgbTogJ9io2YnYsSDZhdmJ2Ybbh9iqJyxcbiAgICBtbTogJyVkINmF2YnZhtuH2KonLFxuICAgIGg6ICfYqNmJ2LEg2LPYp9im25XYqicsXG4gICAgaGg6ICclZCDYs9in2KbbldiqJyxcbiAgICBkOiAn2KjZidixINmD24jZhicsXG4gICAgZGQ6ICclZCDZg9uI2YYnLFxuICAgIE06ICfYqNmJ2LEg2KbYp9mKJyxcbiAgICBNTTogJyVkINim2KfZiicsXG4gICAgeTogJ9io2YnYsSDZitmJ2YQnLFxuICAgIHl5OiAnJWQg2YrZidmEJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oLdmD24jZhtmJfC3Yptin2Yp8Ldq+25XZvtiq25UpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICct2YPbiNmG2YknO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJy3avtuV2b7YqtuVJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHBsdXJhbCh3b3JkLCBudW0pIHtcbiAgdmFyIGZvcm1zID0gd29yZC5zcGxpdCgnXycpO1xuICByZXR1cm4gbnVtICUgMTAgPT09IDEgJiYgbnVtICUgMTAwICE9PSAxMSA/IGZvcm1zWzBdIDogbnVtICUgMTAgPj0gMiAmJiBudW0gJSAxMCA8PSA0ICYmIChudW0gJSAxMDAgPCAxMCB8fCBudW0gJSAxMDAgPj0gMjApID8gZm9ybXNbMV0gOiBmb3Jtc1syXTtcbn1cblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lV2l0aFBsdXJhbChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIHNzOiB3aXRob3V0U3VmZml4ID8gJ9GB0LXQutGD0L3QtNCwX9GB0LXQutGD0L3QtNC4X9GB0LXQutGD0L3QtCcgOiAn0YHQtdC60YPQvdC00YNf0YHQtdC60YPQvdC00Lhf0YHQtdC60YPQvdC0JyxcbiAgICBtbTogd2l0aG91dFN1ZmZpeCA/ICfRhdCy0LjQu9C40L3QsF/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0nIDogJ9GF0LLQuNC70LjQvdGDX9GF0LLQuNC70LjQvdC4X9GF0LLQuNC70LjQvScsXG4gICAgaGg6IHdpdGhvdXRTdWZmaXggPyAn0LPQvtC00LjQvdCwX9Cz0L7QtNC40L3QuF/Qs9C+0LTQuNC9JyA6ICfQs9C+0LTQuNC90YNf0LPQvtC00LjQvdC4X9Cz0L7QtNC40L0nLFxuICAgIGRkOiAn0LTQtdC90Yxf0LTQvdGWX9C00L3RltCyJyxcbiAgICBNTTogJ9C80ZbRgdGP0YbRjF/QvNGW0YHRj9GG0ZZf0LzRltGB0Y/RhtGW0LInLFxuICAgIHl5OiAn0YDRltC6X9GA0L7QutC4X9GA0L7QutGW0LInXG4gIH07XG5cbiAgaWYgKGtleSA9PT0gJ20nKSB7XG4gICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAn0YXQstC40LvQuNC90LAnIDogJ9GF0LLQuNC70LjQvdGDJztcbiAgfSBlbHNlIGlmIChrZXkgPT09ICdoJykge1xuICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ9Cz0L7QtNC40L3QsCcgOiAn0LPQvtC00LjQvdGDJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVtYmVyICsgJyAnICsgcGx1cmFsKGZvcm1hdFtrZXldLCArbnVtYmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3ZWVrZGF5c0Nhc2VSZXBsYWNlKG0sIGZvcm1hdCkge1xuICB2YXIgd2Vla2RheXMgPSB7XG4gICAgbm9taW5hdGl2ZTogJ9C90LXQtNGW0LvRj1/Qv9C+0L3QtdC00ZbQu9C+0Lpf0LLRltCy0YLQvtGA0L7Qul/RgdC10YDQtdC00LBf0YfQtdGC0LLQtdGAX9C/4oCZ0Y/RgtC90LjRhtGPX9GB0YPQsdC+0YLQsCcuc3BsaXQoJ18nKSxcbiAgICBhY2N1c2F0aXZlOiAn0L3QtdC00ZbQu9GOX9C/0L7QvdC10LTRltC70L7Qul/QstGW0LLRgtC+0YDQvtC6X9GB0LXRgNC10LTRg1/Rh9C10YLQstC10YBf0L/igJnRj9GC0L3QuNGG0Y5f0YHRg9Cx0L7RgtGDJy5zcGxpdCgnXycpLFxuICAgIGdlbml0aXZlOiAn0L3QtdC00ZbQu9GWX9C/0L7QvdC10LTRltC70LrQsF/QstGW0LLRgtC+0YDQutCwX9GB0LXRgNC10LTQuF/Rh9C10YLQstC10YDQs9CwX9C/4oCZ0Y/RgtC90LjRhtGWX9GB0YPQsdC+0YLQuCcuc3BsaXQoJ18nKVxuICB9LFxuICAgICAgbm91bkNhc2U7XG5cbiAgaWYgKG0gPT09IHRydWUpIHtcbiAgICByZXR1cm4gd2Vla2RheXNbJ25vbWluYXRpdmUnXS5zbGljZSgxLCA3KS5jb25jYXQod2Vla2RheXNbJ25vbWluYXRpdmUnXS5zbGljZSgwLCAxKSk7XG4gIH1cblxuICBpZiAoIW0pIHtcbiAgICByZXR1cm4gd2Vla2RheXNbJ25vbWluYXRpdmUnXTtcbiAgfVxuXG4gIG5vdW5DYXNlID0gLyhcXFtb0JLQstCj0YNdXFxdKSA/ZGRkZC8udGVzdChmb3JtYXQpID8gJ2FjY3VzYXRpdmUnIDogL1xcWz8oPzrQvNC40L3Rg9C70L7Rl3zQvdCw0YHRgtGD0L/QvdC+0ZcpPyA/XFxdID9kZGRkLy50ZXN0KGZvcm1hdCkgPyAnZ2VuaXRpdmUnIDogJ25vbWluYXRpdmUnO1xuICByZXR1cm4gd2Vla2RheXNbbm91bkNhc2VdW20uZGF5KCldO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzSG91cnNGdW5jdGlvbihzdHIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gc3RyICsgJ9C+JyArICh0aGlzLmhvdXJzKCkgPT09IDExID8gJ9CxJyA6ICcnKSArICddIExUJztcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndWsnLCB7XG4gIG1vbnRoczoge1xuICAgIGZvcm1hdDogJ9GB0ZbRh9C90Y9f0LvRjtGC0L7Qs9C+X9Cx0LXRgNC10LfQvdGPX9C60LLRltGC0L3Rj1/RgtGA0LDQstC90Y9f0YfQtdGA0LLQvdGPX9C70LjQv9C90Y9f0YHQtdGA0L/QvdGPX9Cy0LXRgNC10YHQvdGPX9C20L7QstGC0L3Rj1/Qu9C40YHRgtC+0L/QsNC00LBf0LPRgNGD0LTQvdGPJy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICfRgdGW0YfQtdC90Yxf0LvRjtGC0LjQuV/QsdC10YDQtdC30LXQvdGMX9C60LLRltGC0LXQvdGMX9GC0YDQsNCy0LXQvdGMX9GH0LXRgNCy0LXQvdGMX9C70LjQv9C10L3RjF/RgdC10YDQv9C10L3RjF/QstC10YDQtdGB0LXQvdGMX9C20L7QstGC0LXQvdGMX9C70LjRgdGC0L7Qv9Cw0LRf0LPRgNGD0LTQtdC90YwnLnNwbGl0KCdfJylcbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICfRgdGW0Ydf0LvRjtGCX9Cx0LXRgF/QutCy0ZbRgl/RgtGA0LDQsl/Rh9C10YDQsl/Qu9C40L9f0YHQtdGA0L9f0LLQtdGAX9C20L7QstGCX9C70LjRgdGCX9Cz0YDRg9C0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogd2Vla2RheXNDYXNlUmVwbGFjZSxcbiAgd2Vla2RheXNTaG9ydDogJ9C90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0L3QtF/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVkg0YAuJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSDRgC4sIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkg0YAuLCBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBwcm9jZXNzSG91cnNGdW5jdGlvbignW9Ch0YzQvtCz0L7QtNC90ZYgJyksXG4gICAgbmV4dERheTogcHJvY2Vzc0hvdXJzRnVuY3Rpb24oJ1vQl9Cw0LLRgtGA0LAgJyksXG4gICAgbGFzdERheTogcHJvY2Vzc0hvdXJzRnVuY3Rpb24oJ1vQktGH0L7RgNCwICcpLFxuICAgIG5leHRXZWVrOiBwcm9jZXNzSG91cnNGdW5jdGlvbignW9CjXSBkZGRkIFsnKSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiBwcm9jZXNzSG91cnNGdW5jdGlvbignW9Cc0LjQvdGD0LvQvtGXXSBkZGRkIFsnKS5jYWxsKHRoaXMpO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuIHByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCdb0JzQuNC90YPQu9C+0LPQvl0gZGRkZCBbJykuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0LfQsCAlcycsXG4gICAgcGFzdDogJyVzINGC0L7QvNGDJyxcbiAgICBzOiAn0LTQtdC60ZbQu9GM0LrQsCDRgdC10LrRg9C90LQnLFxuICAgIHNzOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIG06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgbW06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgaDogJ9Cz0L7QtNC40L3RgycsXG4gICAgaGg6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgZDogJ9C00LXQvdGMJyxcbiAgICBkZDogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBNOiAn0LzRltGB0Y/RhtGMJyxcbiAgICBNTTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICB5OiAn0YDRltC6JyxcbiAgICB5eTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbFxuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv0L3QvtGH0ZZ80YDQsNC90LrRg3zQtNC90Y980LLQtdGH0L7RgNCwLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXijQtNC90Y980LLQtdGH0L7RgNCwKSQvLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ9C90L7Rh9GWJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfRgNCw0L3QutGDJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfQtNC90Y8nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ9Cy0LXRh9C+0YDQsCc7XG4gICAgfVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0tKNC5fNCz0L4pLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdNJzpcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnLdC5JztcblxuICAgICAgY2FzZSAnRCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnLdCz0L4nO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRocyA9IFsn2KzZhtmI2LHbjCcsICfZgdix2YjYsduMJywgJ9mF2KfYsdqGJywgJ9in2b7YsduM2YQnLCAn2YXYptuMJywgJ9is2YjZhicsICfYrNmI2YTYp9im24wnLCAn2Kfar9iz2KonLCAn2LPYqtmF2KjYsScsICfYp9qp2KrZiNio2LEnLCAn2YbZiNmF2KjYsScsICfYr9iz2YXYqNixJ10sXG4gICAgZGF5cyA9IFsn2KfYqtmI2KfYsScsICfZvtuM2LEnLCAn2YXZhtqv2YQnLCAn2KjYr9q+JywgJ9is2YXYudix2KfYqicsICfYrNmF2LnbgScsICfbgdmB2KrbgSddO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndXInLCB7XG4gIG1vbnRoczogbW9udGhzLFxuICBtb250aHNTaG9ydDogbW9udGhzLFxuICB3ZWVrZGF5czogZGF5cyxcbiAgd2Vla2RheXNTaG9ydDogZGF5cyxcbiAgd2Vla2RheXNNaW46IGRheXMsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGTYjCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9i12KjYrXzYtNin2YUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuICfYtNin2YUnID09PSBpbnB1dDtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn2LXYqNitJztcbiAgICB9XG5cbiAgICByZXR1cm4gJ9i02KfZhSc7XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYotisINio2YjZgtiqXSBMVCcsXG4gICAgbmV4dERheTogJ1vaqdmEINio2YjZgtiqXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYqNmI2YLYql0gTFQnLFxuICAgIGxhc3REYXk6ICdb2q/YsNi02KrbgSDYsdmI2LIg2KjZiNmC2KpdIExUJyxcbiAgICBsYXN0V2VlazogJ1var9iw2LTYqtuBXSBkZGRkIFvYqNmI2YLYql0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg2KjYudivJyxcbiAgICBwYXN0OiAnJXMg2YLYqNmEJyxcbiAgICBzOiAn2obZhtivINiz24zaqdmG2ognLFxuICAgIHNzOiAnJWQg2LPbjNqp2YbaiCcsXG4gICAgbTogJ9in24zaqSDZhdmG2bknLFxuICAgIG1tOiAnJWQg2YXZhtm5JyxcbiAgICBoOiAn2KfbjNqpINqv2r7Zhtm524EnLFxuICAgIGhoOiAnJWQg2q/avtmG2bnbkicsXG4gICAgZDogJ9in24zaqSDYr9mGJyxcbiAgICBkZDogJyVkINiv2YYnLFxuICAgIE06ICfYp9uM2qkg2YXYp9uBJyxcbiAgICBNTTogJyVkINmF2KfbgScsXG4gICAgeTogJ9in24zaqSDYs9in2YQnLFxuICAgIHl5OiAnJWQg2LPYp9mEJ1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC/YjC9nLCAnLCcpO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLC9nLCAn2IwnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndXotbGF0bicsIHtcbiAgbW9udGhzOiAnWWFudmFyX0ZldnJhbF9NYXJ0X0FwcmVsX01heV9JeXVuX0l5dWxfQXZndXN0X1NlbnRhYnJfT2t0YWJyX05veWFicl9EZWthYnInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnWWFuX0Zldl9NYXJfQXByX01heV9JeXVuX0l5dWxfQXZnX1Nlbl9Pa3RfTm95X0Rlaycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdZYWtzaGFuYmFfRHVzaGFuYmFfU2VzaGFuYmFfQ2hvcnNoYW5iYV9QYXlzaGFuYmFfSnVtYV9TaGFuYmEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdZYWtfRHVzaF9TZXNoX0Nob3JfUGF5X0p1bV9TaGFuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1lhX0R1X1NlX0Nob19QYV9KdV9TaGEnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ0QgTU1NTSBZWVlZLCBkZGRkIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbQnVndW4gc29hdF0gTFQgW2RhXScsXG4gICAgbmV4dERheTogJ1tFcnRhZ2FdIExUIFtkYV0nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBba3VuaSBzb2F0XSBMVCBbZGFdJyxcbiAgICBsYXN0RGF5OiAnW0tlY2hhIHNvYXRdIExUIFtkYV0nLFxuICAgIGxhc3RXZWVrOiBcIltPJ3RnYW5dIGRkZGQgW2t1bmkgc29hdF0gTFQgW2RhXVwiLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnWWFxaW4gJXMgaWNoaWRhJyxcbiAgICBwYXN0OiAnQmlyIG5lY2hhICVzIG9sZGluJyxcbiAgICBzOiAnc29uaXlhJyxcbiAgICBzczogJyVkIHNvbml5YScsXG4gICAgbTogJ2JpciBkYXFpcWEnLFxuICAgIG1tOiAnJWQgZGFxaXFhJyxcbiAgICBoOiAnYmlyIHNvYXQnLFxuICAgIGhoOiAnJWQgc29hdCcsXG4gICAgZDogJ2JpciBrdW4nLFxuICAgIGRkOiAnJWQga3VuJyxcbiAgICBNOiAnYmlyIG95JyxcbiAgICBNTTogJyVkIG95JyxcbiAgICB5OiAnYmlyIHlpbCcsXG4gICAgeXk6ICclZCB5aWwnXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3V6Jywge1xuICBtb250aHM6ICfRj9C90LLQsNGAX9GE0LXQstGA0LDQu1/QvNCw0YDRgl/QsNC/0YDQtdC7X9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgF/QvtC60YLRj9Cx0YBf0L3QvtGP0LHRgF/QtNC10LrQsNCx0YAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn0Y/QvdCyX9GE0LXQsl/QvNCw0YBf0LDQv9GAX9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs1/RgdC10L1f0L7QutGCX9C90L7Rj1/QtNC10LonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn0K/QutGI0LDQvdCx0LBf0JTRg9GI0LDQvdCx0LBf0KHQtdGI0LDQvdCx0LBf0KfQvtGA0YjQsNC90LHQsF/Qn9Cw0LnRiNCw0L3QsdCwX9CW0YPQvNCwX9Co0LDQvdCx0LAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQr9C60Yhf0JTRg9GIX9Ch0LXRiF/Qp9C+0YBf0J/QsNC5X9CW0YPQvF/QqNCw0L0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0K/Qul/QlNGDX9Ch0LVf0KfQvl/Qn9CwX9CW0YNf0KjQsCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnRCBNTU1NIFlZWVksIGRkZGQgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQkdGD0LPRg9C9INGB0L7QsNGCXSBMVCBb0LTQsF0nLFxuICAgIG5leHREYXk6ICdb0K3RgNGC0LDQs9CwXSBMVCBb0LTQsF0nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb0LrRg9C90Lgg0YHQvtCw0YJdIExUIFvQtNCwXScsXG4gICAgbGFzdERheTogJ1vQmtC10YfQsCDRgdC+0LDRgl0gTFQgW9C00LBdJyxcbiAgICBsYXN0V2VlazogJ1vQo9GC0LPQsNC9XSBkZGRkIFvQutGD0L3QuCDRgdC+0LDRgl0gTFQgW9C00LBdJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9Cv0LrQuNC9ICVzINC40YfQuNC00LAnLFxuICAgIHBhc3Q6ICfQkdC40YAg0L3QtdGH0LAgJXMg0L7Qu9C00LjQvScsXG4gICAgczogJ9GE0YPRgNGB0LDRgicsXG4gICAgc3M6ICclZCDRhNGD0YDRgdCw0YInLFxuICAgIG06ICfQsdC40YAg0LTQsNC60LjQutCwJyxcbiAgICBtbTogJyVkINC00LDQutC40LrQsCcsXG4gICAgaDogJ9Cx0LjRgCDRgdC+0LDRgicsXG4gICAgaGg6ICclZCDRgdC+0LDRgicsXG4gICAgZDogJ9Cx0LjRgCDQutGD0L0nLFxuICAgIGRkOiAnJWQg0LrRg9C9JyxcbiAgICBNOiAn0LHQuNGAINC+0LknLFxuICAgIE1NOiAnJWQg0L7QuScsXG4gICAgeTogJ9Cx0LjRgCDQudC40LsnLFxuICAgIHl5OiAnJWQg0LnQuNC7J1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd2aScsIHtcbiAgbW9udGhzOiAndGjDoW5nIDFfdGjDoW5nIDJfdGjDoW5nIDNfdGjDoW5nIDRfdGjDoW5nIDVfdGjDoW5nIDZfdGjDoW5nIDdfdGjDoW5nIDhfdGjDoW5nIDlfdGjDoW5nIDEwX3Row6FuZyAxMV90aMOhbmcgMTInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnVGhnIDAxX1RoZyAwMl9UaGcgMDNfVGhnIDA0X1RoZyAwNV9UaGcgMDZfVGhnIDA3X1RoZyAwOF9UaGcgMDlfVGhnIDEwX1RoZyAxMV9UaGcgMTInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnY2jhu6cgbmjhuq10X3Ro4bupIGhhaV90aOG7qSBiYV90aOG7qSB0xrBfdGjhu6kgbsSDbV90aOG7qSBzw6F1X3Ro4bupIGLhuqN5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnQ05fVDJfVDNfVDRfVDVfVDZfVDcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnQ05fVDJfVDNfVDRfVDVfVDZfVDcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbWVyaWRpZW1QYXJzZTogL3NhfGNoL2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL15jaCQvaS50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzIDwgMTIpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ3NhJyA6ICdTQSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ2NoJyA6ICdDSCc7XG4gICAgfVxuICB9LFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gW27Eg21dIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBbbsSDbV0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBbbsSDbV0gWVlZWSBISDptbScsXG4gICAgbDogJ0REL00vWVlZWScsXG4gICAgbGw6ICdEIE1NTSBZWVlZJyxcbiAgICBsbGw6ICdEIE1NTSBZWVlZIEhIOm1tJyxcbiAgICBsbGxsOiAnZGRkLCBEIE1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSMO0bSBuYXkgbMO6Y10gTFQnLFxuICAgIG5leHREYXk6ICdbTmfDoHkgbWFpIGzDumNdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3R14bqnbiB04bubaSBsw7pjXSBMVCcsXG4gICAgbGFzdERheTogJ1tIw7RtIHF1YSBsw7pjXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFt0deG6p24gdHLGsOG7m2MgbMO6Y10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgdOG7m2knLFxuICAgIHBhc3Q6ICclcyB0csaw4bubYycsXG4gICAgczogJ3bDoGkgZ2nDonknLFxuICAgIHNzOiAnJWQgZ2nDonknLFxuICAgIG06ICdt4buZdCBwaMO6dCcsXG4gICAgbW06ICclZCBwaMO6dCcsXG4gICAgaDogJ23hu5l0IGdp4budJyxcbiAgICBoaDogJyVkIGdp4budJyxcbiAgICBkOiAnbeG7mXQgbmfDoHknLFxuICAgIGRkOiAnJWQgbmfDoHknLFxuICAgIHc6ICdt4buZdCB0deG6p24nLFxuICAgIHd3OiAnJWQgdHXhuqduJyxcbiAgICBNOiAnbeG7mXQgdGjDoW5nJyxcbiAgICBNTTogJyVkIHRow6FuZycsXG4gICAgeTogJ23hu5l0IG7Eg20nLFxuICAgIHl5OiAnJWQgbsSDbSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd4LXBzZXVkbycsIHtcbiAgbW9udGhzOiAnSn7DocOxw7rDoX5yw71fRn7DqWJyw7p+w6Fyw71ffk3DoXJjfmhfw4FwfnLDrWxffk3DocO9X35Kw7rDscOpfl9Kw7psfsO9X8OBw7p+Z8O6c3R+X1PDqXB+dMOpbWJ+w6lyX8OTfmN0w7NifsOpcl/DkX7Ds3bDqW1+YsOpcl9+RMOpY8Opfm1iw6lyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0p+w6HDsV9+RsOpYl9+TcOhcl9+w4Fwcl9+TcOhw71ffkrDusOxX35Kw7psX37DgcO6Z19+U8OpcF9+w5NjdF9+w5HDs3ZffkTDqWMnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnU37DusOxZMOhfsO9X03Ds37DsWTDocO9fl9Uw7rDqX5zZMOhw71+X1fDqWR+w7HDqXNkfsOhw71fVH5ow7pyc35kw6HDvV9+RnLDrWR+w6HDvV9TfsOhdMO6cn5kw6HDvScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N+w7rDsV9+TcOzw7FfflTDusOpX35Xw6lkX35UaMO6X35GcsOtX35Tw6F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N+w7pfTcOzfl9Uw7pfflfDqV9UfmhfRnJ+X1PDoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVH7Ds2TDoX7DvSDDoXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1R+w7Ntw7N+cnLDs353IMOhdF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbw6F0XSBMVCcsXG4gICAgbGFzdERheTogJ1vDnX7DqXN0fsOpcmTDoX7DvSDDoXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMfsOhc3RdIGRkZGQgW8OhdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnw61+w7EgJXMnLFxuICAgIHBhc3Q6ICclcyDDoX5nw7MnLFxuICAgIHM6ICfDoSB+ZsOpdyB+c8OpY8OzfsOxZHMnLFxuICAgIHNzOiAnJWQgc37DqWPDs8OxfmRzJyxcbiAgICBtOiAnw6Egfm3DrcOxfsO6dMOpJyxcbiAgICBtbTogJyVkIG1+w63DscO6fnTDqXMnLFxuICAgIGg6ICfDoX7DsSBow7N+w7pyJyxcbiAgICBoaDogJyVkIGh+w7PDunJzJyxcbiAgICBkOiAnw6EgfmTDocO9JyxcbiAgICBkZDogJyVkIGR+w6HDvXMnLFxuICAgIE06ICfDoSB+bcOzw7F+dGgnLFxuICAgIE1NOiAnJWQgbX7Ds8OxdH5ocycsXG4gICAgeTogJ8OhIH7DvcOpw6FyJyxcbiAgICB5eTogJyVkIMO9fsOpw6FycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHRofHN0fG5kfHJkKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgneW8nLCB7XG4gIG1vbnRoczogJ1PhurnMgXLhurnMgV9FzIByZcyAbGXMgF/hurhy4bq5zIBuYcyAX0nMgGdiZcyBX0XMgGJpYmlfT8yAa3XMgGR1X0Fn4bq5bW9fT8yAZ3XMgW5fT3dld2Vf4buMzIB3YcyAcmHMgF9CZcyBbHXMgV/hu4zMgHDhurnMgMyAJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ1PhurnMgXJfRcyAcmxf4bq4cm5fScyAZ2JfRcyAYmlfT8yAa3XMgF9BZ+G6uV9PzIBndcyBX093ZV/hu4zMgHdhzIBfQmXMgWxf4buMzIBw4bq5zIDMgCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdBzIBpzIBrdcyBX0FqZcyBX0nMgHPhurnMgWd1bl/hu4xq4buNzIFydcyBX+G7jGrhu43MgWLhu41f4bq4dGnMgF9BzIBiYcyBbeG6ucyBdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdBzIBpzIBrX0FqZcyBX0nMgHPhurnMgV/hu4xqcl/hu4xqYl/hurh0acyAX0HMgGJhzIEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnQcyAacyAX0FqX0nMgHNf4buMcl/hu4xiX+G6uHRfQcyAYicuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2g6bW0gQScsXG4gICAgTFRTOiAnaDptbTpzcyBBJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbT8yAbmnMgCBuaV0gTFQnLFxuICAgIG5leHREYXk6ICdb4buMzIBsYSBuaV0gTFQnLFxuICAgIG5leHRXZWVrOiBcImRkZGQgW+G7jHPhurnMgCB0b8yBbidi4buNXSBbbmldIExUXCIsXG4gICAgbGFzdERheTogJ1tBzIBuYSBuaV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb4buMc+G6ucyAIHRvzIFs4buNzIFdIFtuaV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnbmnMgSAlcycsXG4gICAgcGFzdDogJyVzIGvhu41qYcyBJyxcbiAgICBzOiAnacyAc+G6uWp1zIEgYWF5YcyBIGRpZScsXG4gICAgc3M6ICdhYXlhzIEgJWQnLFxuICAgIG06ICdpzIBz4bq5anXMgSBrYW4nLFxuICAgIG1tOiAnacyAc+G6uWp1zIEgJWQnLFxuICAgIGg6ICd3YcyBa2F0aSBrYW4nLFxuICAgIGhoOiAnd2HMgWthdGkgJWQnLFxuICAgIGQ6ICfhu41q4buNzIEga2FuJyxcbiAgICBkZDogJ+G7jWrhu43MgSAlZCcsXG4gICAgTTogJ29zdcyAIGthbicsXG4gICAgTU06ICdvc3XMgCAlZCcsXG4gICAgeTogJ+G7jWR1zIFuIGthbicsXG4gICAgeXk6ICfhu41kdcyBbiAlZCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL+G7jWrhu43MgVxcc1xcZHsxLDJ9LyxcbiAgb3JkaW5hbDogJ+G7jWrhu43MgSAlZCcsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3poLWNuJywge1xuICBtb250aHM6ICfkuIDmnIhf5LqM5pyIX+S4ieaciF/lm5vmnIhf5LqU5pyIX+WFreaciF/kuIPmnIhf5YWr5pyIX+S5neaciF/ljYHmnIhf5Y2B5LiA5pyIX+WNgeS6jOaciCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICcx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICflkajml6Vf5ZGo5LiAX+WRqOS6jF/lkajkuIlf5ZGo5ZubX+WRqOS6lF/lkajlha0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn5pelX+S4gF/kuoxf5LiJX+Wbm1/kupRf5YWtJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS9NTS9ERCcsXG4gICAgTEw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIExMTDogJ1lZWVnlubRN5pyIROaXpUFo54K5bW3liIYnLFxuICAgIExMTEw6ICdZWVlZ5bm0TeaciETml6VkZGRkQWjngrltbeWIhicsXG4gICAgbDogJ1lZWVkvTS9EJyxcbiAgICBsbDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgbGxsOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBsbGxsOiAnWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+WHjOaZqHzml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+WHjOaZqCcgfHwgbWVyaWRpZW0gPT09ICfml6nkuIonIHx8IG1lcmlkaWVtID09PSAn5LiK5Y2IJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+S4i+WNiCcgfHwgbWVyaWRpZW0gPT09ICfmmZrkuIonKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgdmFyIGhtID0gaG91ciAqIDEwMCArIG1pbnV0ZTtcblxuICAgIGlmIChobSA8IDYwMCkge1xuICAgICAgcmV0dXJuICflh4zmmagnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCA5MDApIHtcbiAgICAgIHJldHVybiAn5pep5LiKJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTEzMCkge1xuICAgICAgcmV0dXJuICfkuIrljYgnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMjMwKSB7XG4gICAgICByZXR1cm4gJ+S4reWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDE4MDApIHtcbiAgICAgIHJldHVybiAn5LiL5Y2IJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfmmZrkuIonO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+S7iuWkqV1MVCcsXG4gICAgbmV4dERheTogJ1vmmI7lpKldTFQnLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2Vlayhub3cpIHtcbiAgICAgIGlmIChub3cud2VlaygpICE9PSB0aGlzLndlZWsoKSkge1xuICAgICAgICByZXR1cm4gJ1vkuItdZGRkTFQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdb5pysXWRkZExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdb5pio5aSpXUxUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsobm93KSB7XG4gICAgICBpZiAodGhpcy53ZWVrKCkgIT09IG5vdy53ZWVrKCkpIHtcbiAgICAgICAgcmV0dXJuICdb5LiKXWRkZExUJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnW+acrF1kZGRMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSjml6V85pyIfOWRqCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnRCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+aXpSc7XG5cbiAgICAgIGNhc2UgJ00nOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+aciCc7XG5cbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5ZGoJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz5ZCOJyxcbiAgICBwYXN0OiAnJXPliY0nLFxuICAgIHM6ICflh6Dnp5InLFxuICAgIHNzOiAnJWQg56eSJyxcbiAgICBtOiAnMSDliIbpkp8nLFxuICAgIG1tOiAnJWQg5YiG6ZKfJyxcbiAgICBoOiAnMSDlsI/ml7YnLFxuICAgIGhoOiAnJWQg5bCP5pe2JyxcbiAgICBkOiAnMSDlpKknLFxuICAgIGRkOiAnJWQg5aSpJyxcbiAgICB3OiAnMSDlkagnLFxuICAgIHd3OiAnJWQg5ZGoJyxcbiAgICBNOiAnMSDkuKrmnIgnLFxuICAgIE1NOiAnJWQg5Liq5pyIJyxcbiAgICB5OiAnMSDlubQnLFxuICAgIHl5OiAnJWQg5bm0J1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd6aC1oaycsIHtcbiAgbW9udGhzOiAn5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnMeaciF8y5pyIXzPmnIhfNOaciF815pyIXzbmnIhfN+aciF845pyIXznmnIhfMTDmnIhfMTHmnIhfMTLmnIgnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn5pif5pyf5pelX+aYn+acn+S4gF/mmJ/mnJ/kuoxf5pif5pyf5LiJX+aYn+acn+Wbm1/mmJ/mnJ/kupRf5pif5pyf5YWtJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn6YCx5pelX+mAseS4gF/pgLHkuoxf6YCx5LiJX+mAseWbm1/pgLHkupRf6YCx5YWtJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+aXpV/kuIBf5LqMX+S4iV/lm5tf5LqUX+WFrScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVkvTU0vREQnLFxuICAgIExMOiAnWVlZWeW5tE3mnIhE5pelJyxcbiAgICBMTEw6ICdZWVlZ5bm0TeaciETml6UgSEg6bW0nLFxuICAgIExMTEw6ICdZWVlZ5bm0TeaciETml6VkZGRkIEhIOm1tJyxcbiAgICBsOiAnWVlZWS9NL0QnLFxuICAgIGxsOiAnWVlZWeW5tE3mnIhE5pelJyxcbiAgICBsbGw6ICdZWVlZ5bm0TeaciETml6UgSEg6bW0nLFxuICAgIGxsbGw6ICdZWVlZ5bm0TeaciETml6VkZGRkIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv5YeM5pmofOaXqeS4inzkuIrljYh85Lit5Y2IfOS4i+WNiHzmmZrkuIovLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn5YeM5pmoJyB8fCBtZXJpZGllbSA9PT0gJ+aXqeS4iicgfHwgbWVyaWRpZW0gPT09ICfkuIrljYgnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn5Lit5Y2IJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfkuIvljYgnIHx8IG1lcmlkaWVtID09PSAn5pma5LiKJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICB2YXIgaG0gPSBob3VyICogMTAwICsgbWludXRlO1xuXG4gICAgaWYgKGhtIDwgNjAwKSB7XG4gICAgICByZXR1cm4gJ+WHjOaZqCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDkwMCkge1xuICAgICAgcmV0dXJuICfml6nkuIonO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMjAwKSB7XG4gICAgICByZXR1cm4gJ+S4iuWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA9PT0gMTIwMCkge1xuICAgICAgcmV0dXJuICfkuK3ljYgnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxODAwKSB7XG4gICAgICByZXR1cm4gJ+S4i+WNiCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn5pma5LiKJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vku4rlpKldTFQnLFxuICAgIG5leHREYXk6ICdb5piO5aSpXUxUJyxcbiAgICBuZXh0V2VlazogJ1vkuItdZGRkZExUJyxcbiAgICBsYXN0RGF5OiAnW+aYqOWkqV1MVCcsXG4gICAgbGFzdFdlZWs6ICdb5LiKXWRkZGRMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0o5pelfOaciHzpgLEpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfml6UnO1xuXG4gICAgICBjYXNlICdNJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfmnIgnO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+mAsSc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclc+W+jCcsXG4gICAgcGFzdDogJyVz5YmNJyxcbiAgICBzOiAn5bm+56eSJyxcbiAgICBzczogJyVkIOenkicsXG4gICAgbTogJzEg5YiG6ZCYJyxcbiAgICBtbTogJyVkIOWIhumQmCcsXG4gICAgaDogJzEg5bCP5pmCJyxcbiAgICBoaDogJyVkIOWwj+aZgicsXG4gICAgZDogJzEg5aSpJyxcbiAgICBkZDogJyVkIOWkqScsXG4gICAgTTogJzEg5YCL5pyIJyxcbiAgICBNTTogJyVkIOWAi+aciCcsXG4gICAgeTogJzEg5bm0JyxcbiAgICB5eTogJyVkIOW5tCdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnemgtbW8nLCB7XG4gIG1vbnRoczogJ+S4gOaciF/kuozmnIhf5LiJ5pyIX+Wbm+aciF/kupTmnIhf5YWt5pyIX+S4g+aciF/lhavmnIhf5Lmd5pyIX+WNgeaciF/ljYHkuIDmnIhf5Y2B5LqM5pyIJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJzHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+aYn+acn+aXpV/mmJ/mnJ/kuIBf5pif5pyf5LqMX+aYn+acn+S4iV/mmJ/mnJ/lm5tf5pif5pyf5LqUX+aYn+acn+WFrScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+mAseaXpV/pgLHkuIBf6YCx5LqMX+mAseS4iV/pgLHlm5tf6YCx5LqUX+mAseWFrScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgTExMOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBMTExMOiAnWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbScsXG4gICAgbDogJ0QvTS9ZWVlZJyxcbiAgICBsbDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgbGxsOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBsbGxsOiAnWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+WHjOaZqHzml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+WHjOaZqCcgfHwgbWVyaWRpZW0gPT09ICfml6nkuIonIHx8IG1lcmlkaWVtID09PSAn5LiK5Y2IJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+S4reWNiCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDExID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn5LiL5Y2IJyB8fCBtZXJpZGllbSA9PT0gJ+aZmuS4iicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgdmFyIGhtID0gaG91ciAqIDEwMCArIG1pbnV0ZTtcblxuICAgIGlmIChobSA8IDYwMCkge1xuICAgICAgcmV0dXJuICflh4zmmagnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCA5MDApIHtcbiAgICAgIHJldHVybiAn5pep5LiKJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTEzMCkge1xuICAgICAgcmV0dXJuICfkuIrljYgnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMjMwKSB7XG4gICAgICByZXR1cm4gJ+S4reWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDE4MDApIHtcbiAgICAgIHJldHVybiAn5LiL5Y2IJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfmmZrkuIonO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+S7iuWkqV0gTFQnLFxuICAgIG5leHREYXk6ICdb5piO5aSpXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb5LiLXWRkZGQgTFQnLFxuICAgIGxhc3REYXk6ICdb5pio5aSpXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb5LiKXWRkZGQgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KOaXpXzmnIh86YCxKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pelJztcblxuICAgICAgY2FzZSAnTSc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pyIJztcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfpgLEnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPlhacnLFxuICAgIHBhc3Q6ICclc+WJjScsXG4gICAgczogJ+W5vuenkicsXG4gICAgc3M6ICclZCDnp5InLFxuICAgIG06ICcxIOWIhumQmCcsXG4gICAgbW06ICclZCDliIbpkJgnLFxuICAgIGg6ICcxIOWwj+aZgicsXG4gICAgaGg6ICclZCDlsI/mmYInLFxuICAgIGQ6ICcxIOWkqScsXG4gICAgZGQ6ICclZCDlpKknLFxuICAgIE06ICcxIOWAi+aciCcsXG4gICAgTU06ICclZCDlgIvmnIgnLFxuICAgIHk6ICcxIOW5tCcsXG4gICAgeXk6ICclZCDlubQnXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3poLXR3Jywge1xuICBtb250aHM6ICfkuIDmnIhf5LqM5pyIX+S4ieaciF/lm5vmnIhf5LqU5pyIX+WFreaciF/kuIPmnIhf5YWr5pyIX+S5neaciF/ljYHmnIhf5Y2B5LiA5pyIX+WNgeS6jOaciCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICcx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfpgLHml6Vf6YCx5LiAX+mAseS6jF/pgLHkuIlf6YCx5ZubX+mAseS6lF/pgLHlha0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn5pelX+S4gF/kuoxf5LiJX+Wbm1/kupRf5YWtJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS9NTS9ERCcsXG4gICAgTEw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIExMTDogJ1lZWVnlubRN5pyIROaXpSBISDptbScsXG4gICAgTExMTDogJ1lZWVnlubRN5pyIROaXpWRkZGQgSEg6bW0nLFxuICAgIGw6ICdZWVlZL00vRCcsXG4gICAgbGw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIGxsbDogJ1lZWVnlubRN5pyIROaXpSBISDptbScsXG4gICAgbGxsbDogJ1lZWVnlubRN5pyIROaXpWRkZGQgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/lh4zmmah85pep5LiKfOS4iuWNiHzkuK3ljYh85LiL5Y2IfOaZmuS4ii8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICflh4zmmagnIHx8IG1lcmlkaWVtID09PSAn5pep5LiKJyB8fCBtZXJpZGllbSA9PT0gJ+S4iuWNiCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfkuK3ljYgnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+S4i+WNiCcgfHwgbWVyaWRpZW0gPT09ICfmmZrkuIonKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIHZhciBobSA9IGhvdXIgKiAxMDAgKyBtaW51dGU7XG5cbiAgICBpZiAoaG0gPCA2MDApIHtcbiAgICAgIHJldHVybiAn5YeM5pmoJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgOTAwKSB7XG4gICAgICByZXR1cm4gJ+aXqeS4iic7XG4gICAgfSBlbHNlIGlmIChobSA8IDExMzApIHtcbiAgICAgIHJldHVybiAn5LiK5Y2IJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTIzMCkge1xuICAgICAgcmV0dXJuICfkuK3ljYgnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxODAwKSB7XG4gICAgICByZXR1cm4gJ+S4i+WNiCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn5pma5LiKJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vku4rlpKldIExUJyxcbiAgICBuZXh0RGF5OiAnW+aYjuWkqV0gTFQnLFxuICAgIG5leHRXZWVrOiAnW+S4i11kZGRkIExUJyxcbiAgICBsYXN0RGF5OiAnW+aYqOWkqV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+S4il1kZGRkIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSjml6V85pyIfOmAsSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnRCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+aXpSc7XG5cbiAgICAgIGNhc2UgJ00nOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+aciCc7XG5cbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn6YCxJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz5b6MJyxcbiAgICBwYXN0OiAnJXPliY0nLFxuICAgIHM6ICflub7np5InLFxuICAgIHNzOiAnJWQg56eSJyxcbiAgICBtOiAnMSDliIbpkJgnLFxuICAgIG1tOiAnJWQg5YiG6ZCYJyxcbiAgICBoOiAnMSDlsI/mmYInLFxuICAgIGhoOiAnJWQg5bCP5pmCJyxcbiAgICBkOiAnMSDlpKknLFxuICAgIGRkOiAnJWQg5aSpJyxcbiAgICBNOiAnMSDlgIvmnIgnLFxuICAgIE1NOiAnJWQg5YCL5pyIJyxcbiAgICB5OiAnMSDlubQnLFxuICAgIHl5OiAnJWQg5bm0J1xuICB9XG59KTsiLCJ2YXIgaG9va0NhbGxiYWNrO1xuXG5mdW5jdGlvbiBob29rcygpIHtcbiAgcmV0dXJuIGhvb2tDYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBzZXRIb29rQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgaG9va0NhbGxiYWNrID0gY2FsbGJhY2s7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXkoaW5wdXQpIHtcbiAgcmV0dXJuIGlucHV0IGluc3RhbmNlb2YgQXJyYXkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoaW5wdXQpIHtcbiAgcmV0dXJuIGlucHV0ICE9IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbmZ1bmN0aW9uIGhhc093blByb3AoYSwgYikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIGIpO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdEVtcHR5KG9iaikge1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGs7XG5cbiAgICBmb3IgKGsgaW4gb2JqKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcChvYmosIGspKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgPT09IHZvaWQgMDtcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoaW5wdXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG59XG5cbmZ1bmN0aW9uIGlzRGF0ZShpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBEYXRlIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuZnVuY3Rpb24gbWFwKGFyciwgZm4pIHtcbiAgdmFyIHJlcyA9IFtdLFxuICAgICAgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgcmVzLnB1c2goZm4oYXJyW2ldLCBpKSk7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBleHRlbmQoYSwgYikge1xuICBmb3IgKHZhciBpIGluIGIpIHtcbiAgICBpZiAoaGFzT3duUHJvcChiLCBpKSkge1xuICAgICAgYVtpXSA9IGJbaV07XG4gICAgfVxuICB9XG5cbiAgaWYgKGhhc093blByb3AoYiwgJ3RvU3RyaW5nJykpIHtcbiAgICBhLnRvU3RyaW5nID0gYi50b1N0cmluZztcbiAgfVxuXG4gIGlmIChoYXNPd25Qcm9wKGIsICd2YWx1ZU9mJykpIHtcbiAgICBhLnZhbHVlT2YgPSBiLnZhbHVlT2Y7XG4gIH1cblxuICByZXR1cm4gYTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVVRDKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0KSB7XG4gIHJldHVybiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0LCB0cnVlKS51dGMoKTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFBhcnNpbmdGbGFncygpIHtcbiAgcmV0dXJuIHtcbiAgICBlbXB0eTogZmFsc2UsXG4gICAgdW51c2VkVG9rZW5zOiBbXSxcbiAgICB1bnVzZWRJbnB1dDogW10sXG4gICAgb3ZlcmZsb3c6IC0yLFxuICAgIGNoYXJzTGVmdE92ZXI6IDAsXG4gICAgbnVsbElucHV0OiBmYWxzZSxcbiAgICBpbnZhbGlkRXJhOiBudWxsLFxuICAgIGludmFsaWRNb250aDogbnVsbCxcbiAgICBpbnZhbGlkRm9ybWF0OiBmYWxzZSxcbiAgICB1c2VySW52YWxpZGF0ZWQ6IGZhbHNlLFxuICAgIGlzbzogZmFsc2UsXG4gICAgcGFyc2VkRGF0ZVBhcnRzOiBbXSxcbiAgICBlcmE6IG51bGwsXG4gICAgbWVyaWRpZW06IG51bGwsXG4gICAgcmZjMjgyMjogZmFsc2UsXG4gICAgd2Vla2RheU1pc21hdGNoOiBmYWxzZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRQYXJzaW5nRmxhZ3MobSkge1xuICBpZiAobS5fcGYgPT0gbnVsbCkge1xuICAgIG0uX3BmID0gZGVmYXVsdFBhcnNpbmdGbGFncygpO1xuICB9XG5cbiAgcmV0dXJuIG0uX3BmO1xufVxuXG52YXIgc29tZTtcblxuaWYgKEFycmF5LnByb3RvdHlwZS5zb21lKSB7XG4gIHNvbWUgPSBBcnJheS5wcm90b3R5cGUuc29tZTtcbn0gZWxzZSB7XG4gIHNvbWUgPSBmdW5jdGlvbiBzb21lKGZ1bikge1xuICAgIHZhciB0ID0gT2JqZWN0KHRoaXMpLFxuICAgICAgICBsZW4gPSB0Lmxlbmd0aCA+Pj4gMCxcbiAgICAgICAgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGkgaW4gdCAmJiBmdW4uY2FsbCh0aGlzLCB0W2ldLCBpLCB0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWQobSkge1xuICBpZiAobS5faXNWYWxpZCA9PSBudWxsKSB7XG4gICAgdmFyIGZsYWdzID0gZ2V0UGFyc2luZ0ZsYWdzKG0pLFxuICAgICAgICBwYXJzZWRQYXJ0cyA9IHNvbWUuY2FsbChmbGFncy5wYXJzZWREYXRlUGFydHMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICByZXR1cm4gaSAhPSBudWxsO1xuICAgIH0pLFxuICAgICAgICBpc05vd1ZhbGlkID0gIWlzTmFOKG0uX2QuZ2V0VGltZSgpKSAmJiBmbGFncy5vdmVyZmxvdyA8IDAgJiYgIWZsYWdzLmVtcHR5ICYmICFmbGFncy5pbnZhbGlkRXJhICYmICFmbGFncy5pbnZhbGlkTW9udGggJiYgIWZsYWdzLmludmFsaWRXZWVrZGF5ICYmICFmbGFncy53ZWVrZGF5TWlzbWF0Y2ggJiYgIWZsYWdzLm51bGxJbnB1dCAmJiAhZmxhZ3MuaW52YWxpZEZvcm1hdCAmJiAhZmxhZ3MudXNlckludmFsaWRhdGVkICYmICghZmxhZ3MubWVyaWRpZW0gfHwgZmxhZ3MubWVyaWRpZW0gJiYgcGFyc2VkUGFydHMpO1xuXG4gICAgaWYgKG0uX3N0cmljdCkge1xuICAgICAgaXNOb3dWYWxpZCA9IGlzTm93VmFsaWQgJiYgZmxhZ3MuY2hhcnNMZWZ0T3ZlciA9PT0gMCAmJiBmbGFncy51bnVzZWRUb2tlbnMubGVuZ3RoID09PSAwICYmIGZsYWdzLmJpZ0hvdXIgPT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmlzRnJvemVuID09IG51bGwgfHwgIU9iamVjdC5pc0Zyb3plbihtKSkge1xuICAgICAgbS5faXNWYWxpZCA9IGlzTm93VmFsaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc05vd1ZhbGlkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtLl9pc1ZhbGlkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJbnZhbGlkKGZsYWdzKSB7XG4gIHZhciBtID0gY3JlYXRlVVRDKE5hTik7XG5cbiAgaWYgKGZsYWdzICE9IG51bGwpIHtcbiAgICBleHRlbmQoZ2V0UGFyc2luZ0ZsYWdzKG0pLCBmbGFncyk7XG4gIH0gZWxzZSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKG0pLnVzZXJJbnZhbGlkYXRlZCA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gbTtcbn1cblxudmFyIG1vbWVudFByb3BlcnRpZXMgPSBob29rcy5tb21lbnRQcm9wZXJ0aWVzID0gW10sXG4gICAgdXBkYXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuXG5mdW5jdGlvbiBjb3B5Q29uZmlnKHRvLCBmcm9tKSB7XG4gIHZhciBpLCBwcm9wLCB2YWw7XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pc0FNb21lbnRPYmplY3QpKSB7XG4gICAgdG8uX2lzQU1vbWVudE9iamVjdCA9IGZyb20uX2lzQU1vbWVudE9iamVjdDtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5faSkpIHtcbiAgICB0by5faSA9IGZyb20uX2k7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2YpKSB7XG4gICAgdG8uX2YgPSBmcm9tLl9mO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9sKSkge1xuICAgIHRvLl9sID0gZnJvbS5fbDtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5fc3RyaWN0KSkge1xuICAgIHRvLl9zdHJpY3QgPSBmcm9tLl9zdHJpY3Q7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3R6bSkpIHtcbiAgICB0by5fdHptID0gZnJvbS5fdHptO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pc1VUQykpIHtcbiAgICB0by5faXNVVEMgPSBmcm9tLl9pc1VUQztcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5fb2Zmc2V0KSkge1xuICAgIHRvLl9vZmZzZXQgPSBmcm9tLl9vZmZzZXQ7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3BmKSkge1xuICAgIHRvLl9wZiA9IGdldFBhcnNpbmdGbGFncyhmcm9tKTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5fbG9jYWxlKSkge1xuICAgIHRvLl9sb2NhbGUgPSBmcm9tLl9sb2NhbGU7XG4gIH1cblxuICBpZiAobW9tZW50UHJvcGVydGllcy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG1vbWVudFByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHByb3AgPSBtb21lbnRQcm9wZXJ0aWVzW2ldO1xuICAgICAgdmFsID0gZnJvbVtwcm9wXTtcblxuICAgICAgaWYgKCFpc1VuZGVmaW5lZCh2YWwpKSB7XG4gICAgICAgIHRvW3Byb3BdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxuZnVuY3Rpb24gTW9tZW50KGNvbmZpZykge1xuICBjb3B5Q29uZmlnKHRoaXMsIGNvbmZpZyk7XG4gIHRoaXMuX2QgPSBuZXcgRGF0ZShjb25maWcuX2QgIT0gbnVsbCA/IGNvbmZpZy5fZC5nZXRUaW1lKCkgOiBOYU4pO1xuXG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICB0aGlzLl9kID0gbmV3IERhdGUoTmFOKTtcbiAgfVxuXG4gIGlmICh1cGRhdGVJblByb2dyZXNzID09PSBmYWxzZSkge1xuICAgIHVwZGF0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgIGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzKTtcbiAgICB1cGRhdGVJblByb2dyZXNzID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNNb21lbnQob2JqKSB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiBNb21lbnQgfHwgb2JqICE9IG51bGwgJiYgb2JqLl9pc0FNb21lbnRPYmplY3QgIT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gd2Fybihtc2cpIHtcbiAgaWYgKGhvb2tzLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncyA9PT0gZmFsc2UgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUud2Fybikge1xuICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRpb24gd2FybmluZzogJyArIG1zZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlKG1zZywgZm4pIHtcbiAgdmFyIGZpcnN0VGltZSA9IHRydWU7XG4gIHJldHVybiBleHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIGlmIChob29rcy5kZXByZWNhdGlvbkhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyKG51bGwsIG1zZyk7XG4gICAgfVxuXG4gICAgaWYgKGZpcnN0VGltZSkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSxcbiAgICAgICAgICBhcmcsXG4gICAgICAgICAgaSxcbiAgICAgICAgICBrZXk7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnID0gJyc7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYXJnICs9ICdcXG5bJyArIGkgKyAnXSAnO1xuXG4gICAgICAgICAgZm9yIChrZXkgaW4gYXJndW1lbnRzWzBdKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcChhcmd1bWVudHNbMF0sIGtleSkpIHtcbiAgICAgICAgICAgICAgYXJnICs9IGtleSArICc6ICcgKyBhcmd1bWVudHNbMF1ba2V5XSArICcsICc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXJnID0gYXJnLnNsaWNlKDAsIC0yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cblxuICAgICAgICBhcmdzLnB1c2goYXJnKTtcbiAgICAgIH1cblxuICAgICAgd2Fybihtc2cgKyAnXFxuQXJndW1lbnRzOiAnICsgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykuam9pbignJykgKyAnXFxuJyArIG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICAgIGZpcnN0VGltZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LCBmbik7XG59XG5cbnZhciBkZXByZWNhdGlvbnMgPSB7fTtcblxuZnVuY3Rpb24gZGVwcmVjYXRlU2ltcGxlKG5hbWUsIG1zZykge1xuICBpZiAoaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyICE9IG51bGwpIHtcbiAgICBob29rcy5kZXByZWNhdGlvbkhhbmRsZXIobmFtZSwgbXNnKTtcbiAgfVxuXG4gIGlmICghZGVwcmVjYXRpb25zW25hbWVdKSB7XG4gICAgd2Fybihtc2cpO1xuICAgIGRlcHJlY2F0aW9uc1tuYW1lXSA9IHRydWU7XG4gIH1cbn1cblxuaG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzID0gZmFsc2U7XG5ob29rcy5kZXByZWNhdGlvbkhhbmRsZXIgPSBudWxsO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGlucHV0KSB7XG4gIHJldHVybiB0eXBlb2YgRnVuY3Rpb24gIT09ICd1bmRlZmluZWQnICYmIGlucHV0IGluc3RhbmNlb2YgRnVuY3Rpb24gfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuZnVuY3Rpb24gc2V0KGNvbmZpZykge1xuICB2YXIgcHJvcCwgaTtcblxuICBmb3IgKGkgaW4gY29uZmlnKSB7XG4gICAgaWYgKGhhc093blByb3AoY29uZmlnLCBpKSkge1xuICAgICAgcHJvcCA9IGNvbmZpZ1tpXTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ocHJvcCkpIHtcbiAgICAgICAgdGhpc1tpXSA9IHByb3A7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzWydfJyArIGldID0gcHJvcDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIHRoaXMuX2RheU9mTW9udGhPcmRpbmFsUGFyc2VMZW5pZW50ID0gbmV3IFJlZ0V4cCgodGhpcy5fZGF5T2ZNb250aE9yZGluYWxQYXJzZS5zb3VyY2UgfHwgdGhpcy5fb3JkaW5hbFBhcnNlLnNvdXJjZSkgKyAnfCcgKyAvXFxkezEsMn0vLnNvdXJjZSk7XG59XG5cbmZ1bmN0aW9uIG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsIGNoaWxkQ29uZmlnKSB7XG4gIHZhciByZXMgPSBleHRlbmQoe30sIHBhcmVudENvbmZpZyksXG4gICAgICBwcm9wO1xuXG4gIGZvciAocHJvcCBpbiBjaGlsZENvbmZpZykge1xuICAgIGlmIChoYXNPd25Qcm9wKGNoaWxkQ29uZmlnLCBwcm9wKSkge1xuICAgICAgaWYgKGlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkgJiYgaXNPYmplY3QoY2hpbGRDb25maWdbcHJvcF0pKSB7XG4gICAgICAgIHJlc1twcm9wXSA9IHt9O1xuICAgICAgICBleHRlbmQocmVzW3Byb3BdLCBwYXJlbnRDb25maWdbcHJvcF0pO1xuICAgICAgICBleHRlbmQocmVzW3Byb3BdLCBjaGlsZENvbmZpZ1twcm9wXSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkQ29uZmlnW3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgcmVzW3Byb3BdID0gY2hpbGRDb25maWdbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgcmVzW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAocHJvcCBpbiBwYXJlbnRDb25maWcpIHtcbiAgICBpZiAoaGFzT3duUHJvcChwYXJlbnRDb25maWcsIHByb3ApICYmICFoYXNPd25Qcm9wKGNoaWxkQ29uZmlnLCBwcm9wKSAmJiBpc09iamVjdChwYXJlbnRDb25maWdbcHJvcF0pKSB7XG4gICAgICByZXNbcHJvcF0gPSBleHRlbmQoe30sIHJlc1twcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gTG9jYWxlKGNvbmZpZykge1xuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICB0aGlzLnNldChjb25maWcpO1xuICB9XG59XG5cbnZhciBrZXlzO1xuXG5pZiAoT2JqZWN0LmtleXMpIHtcbiAga2V5cyA9IE9iamVjdC5rZXlzO1xufSBlbHNlIHtcbiAga2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gICAgdmFyIGksXG4gICAgICAgIHJlcyA9IFtdO1xuXG4gICAgZm9yIChpIGluIG9iaikge1xuICAgICAgaWYgKGhhc093blByb3Aob2JqLCBpKSkge1xuICAgICAgICByZXMucHVzaChpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzO1xuICB9O1xufVxuXG52YXIgZGVmYXVsdENhbGVuZGFyID0ge1xuICBzYW1lRGF5OiAnW1RvZGF5IGF0XSBMVCcsXG4gIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICBsYXN0RGF5OiAnW1llc3RlcmRheSBhdF0gTFQnLFxuICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICBzYW1lRWxzZTogJ0wnXG59O1xuXG5mdW5jdGlvbiBjYWxlbmRhcihrZXksIG1vbSwgbm93KSB7XG4gIHZhciBvdXRwdXQgPSB0aGlzLl9jYWxlbmRhcltrZXldIHx8IHRoaXMuX2NhbGVuZGFyWydzYW1lRWxzZSddO1xuICByZXR1cm4gaXNGdW5jdGlvbihvdXRwdXQpID8gb3V0cHV0LmNhbGwobW9tLCBub3cpIDogb3V0cHV0O1xufVxuXG5mdW5jdGlvbiB6ZXJvRmlsbChudW1iZXIsIHRhcmdldExlbmd0aCwgZm9yY2VTaWduKSB7XG4gIHZhciBhYnNOdW1iZXIgPSAnJyArIE1hdGguYWJzKG51bWJlciksXG4gICAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG4gICAgICBzaWduID0gbnVtYmVyID49IDA7XG4gIHJldHVybiAoc2lnbiA/IGZvcmNlU2lnbiA/ICcrJyA6ICcnIDogJy0nKSArIE1hdGgucG93KDEwLCBNYXRoLm1heCgwLCB6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpICsgYWJzTnVtYmVyO1xufVxuXG52YXIgZm9ybWF0dGluZ1Rva2VucyA9IC8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhbSGhdbW0oc3MpP3xNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xRbz98TnsxLDV9fFlZWVlZWXxZWVlZWXxZWVlZfFlZfHl7Miw0fXx5bz98Z2coZ2dnPyk/fEdHKEdHRz8pP3xlfEV8YXxBfGhoP3xISD98a2s/fG1tP3xzcz98U3sxLDl9fHh8WHx6ej98Wlo/fC4pL2csXG4gICAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zID0gLyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZyxcbiAgICBmb3JtYXRGdW5jdGlvbnMgPSB7fSxcbiAgICBmb3JtYXRUb2tlbkZ1bmN0aW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRGb3JtYXRUb2tlbih0b2tlbiwgcGFkZGVkLCBvcmRpbmFsLCBjYWxsYmFjaykge1xuICB2YXIgZnVuYyA9IGNhbGxiYWNrO1xuXG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgICByZXR1cm4gdGhpc1tjYWxsYmFja10oKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHRva2VuKSB7XG4gICAgZm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dID0gZnVuYztcbiAgfVxuXG4gIGlmIChwYWRkZWQpIHtcbiAgICBmb3JtYXRUb2tlbkZ1bmN0aW9uc1twYWRkZWRbMF1dID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHplcm9GaWxsKGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgcGFkZGVkWzFdLCBwYWRkZWRbMl0pO1xuICAgIH07XG4gIH1cblxuICBpZiAob3JkaW5hbCkge1xuICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW29yZGluYWxdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm9yZGluYWwoZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0b2tlbik7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVGb3JtYXR0aW5nVG9rZW5zKGlucHV0KSB7XG4gIGlmIChpbnB1dC5tYXRjaCgvXFxbW1xcc1xcU10vKSkge1xuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9eXFxbfFxcXSQvZywgJycpO1xuICB9XG5cbiAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1xcXFwvZywgJycpO1xufVxuXG5mdW5jdGlvbiBtYWtlRm9ybWF0RnVuY3Rpb24oZm9ybWF0KSB7XG4gIHZhciBhcnJheSA9IGZvcm1hdC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKSxcbiAgICAgIGksXG4gICAgICBsZW5ndGg7XG5cbiAgZm9yIChpID0gMCwgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZm9ybWF0VG9rZW5GdW5jdGlvbnNbYXJyYXlbaV1dKSB7XG4gICAgICBhcnJheVtpXSA9IGZvcm1hdFRva2VuRnVuY3Rpb25zW2FycmF5W2ldXTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJyYXlbaV0gPSByZW1vdmVGb3JtYXR0aW5nVG9rZW5zKGFycmF5W2ldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG1vbSkge1xuICAgIHZhciBvdXRwdXQgPSAnJyxcbiAgICAgICAgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgb3V0cHV0ICs9IGlzRnVuY3Rpb24oYXJyYXlbaV0pID8gYXJyYXlbaV0uY2FsbChtb20sIGZvcm1hdCkgOiBhcnJheVtpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRNb21lbnQobSwgZm9ybWF0KSB7XG4gIGlmICghbS5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gbS5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgfVxuXG4gIGZvcm1hdCA9IGV4cGFuZEZvcm1hdChmb3JtYXQsIG0ubG9jYWxlRGF0YSgpKTtcbiAgZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF0gPSBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XSB8fCBtYWtlRm9ybWF0RnVuY3Rpb24oZm9ybWF0KTtcbiAgcmV0dXJuIGZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdKG0pO1xufVxuXG5mdW5jdGlvbiBleHBhbmRGb3JtYXQoZm9ybWF0LCBsb2NhbGUpIHtcbiAgdmFyIGkgPSA1O1xuXG4gIGZ1bmN0aW9uIHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2VucyhpbnB1dCkge1xuICAgIHJldHVybiBsb2NhbGUubG9uZ0RhdGVGb3JtYXQoaW5wdXQpIHx8IGlucHV0O1xuICB9XG5cbiAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleCA9IDA7XG5cbiAgd2hpbGUgKGkgPj0gMCAmJiBsb2NhbEZvcm1hdHRpbmdUb2tlbnMudGVzdChmb3JtYXQpKSB7XG4gICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UobG9jYWxGb3JtYXR0aW5nVG9rZW5zLCByZXBsYWNlTG9uZ0RhdGVGb3JtYXRUb2tlbnMpO1xuICAgIGxvY2FsRm9ybWF0dGluZ1Rva2Vucy5sYXN0SW5kZXggPSAwO1xuICAgIGkgLT0gMTtcbiAgfVxuXG4gIHJldHVybiBmb3JtYXQ7XG59XG5cbnZhciBkZWZhdWx0TG9uZ0RhdGVGb3JtYXQgPSB7XG4gIExUUzogJ2g6bW06c3MgQScsXG4gIExUOiAnaDptbSBBJyxcbiAgTDogJ01NL0REL1lZWVknLFxuICBMTDogJ01NTU0gRCwgWVlZWScsXG4gIExMTDogJ01NTU0gRCwgWVlZWSBoOm1tIEEnLFxuICBMTExMOiAnZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQSdcbn07XG5cbmZ1bmN0aW9uIGxvbmdEYXRlRm9ybWF0KGtleSkge1xuICB2YXIgZm9ybWF0ID0gdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XSxcbiAgICAgIGZvcm1hdFVwcGVyID0gdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5LnRvVXBwZXJDYXNlKCldO1xuXG4gIGlmIChmb3JtYXQgfHwgIWZvcm1hdFVwcGVyKSB7XG4gICAgcmV0dXJuIGZvcm1hdDtcbiAgfVxuXG4gIHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV0gPSBmb3JtYXRVcHBlci5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKS5tYXAoZnVuY3Rpb24gKHRvaykge1xuICAgIGlmICh0b2sgPT09ICdNTU1NJyB8fCB0b2sgPT09ICdNTScgfHwgdG9rID09PSAnREQnIHx8IHRvayA9PT0gJ2RkZGQnKSB7XG4gICAgICByZXR1cm4gdG9rLnNsaWNlKDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0b2s7XG4gIH0pLmpvaW4oJycpO1xuICByZXR1cm4gdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XTtcbn1cblxudmFyIGRlZmF1bHRJbnZhbGlkRGF0ZSA9ICdJbnZhbGlkIGRhdGUnO1xuXG5mdW5jdGlvbiBpbnZhbGlkRGF0ZSgpIHtcbiAgcmV0dXJuIHRoaXMuX2ludmFsaWREYXRlO1xufVxuXG52YXIgZGVmYXVsdE9yZGluYWwgPSAnJWQnLFxuICAgIGRlZmF1bHREYXlPZk1vbnRoT3JkaW5hbFBhcnNlID0gL1xcZHsxLDJ9LztcblxuZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgcmV0dXJuIHRoaXMuX29yZGluYWwucmVwbGFjZSgnJWQnLCBudW1iZXIpO1xufVxuXG52YXIgZGVmYXVsdFJlbGF0aXZlVGltZSA9IHtcbiAgZnV0dXJlOiAnaW4gJXMnLFxuICBwYXN0OiAnJXMgYWdvJyxcbiAgczogJ2EgZmV3IHNlY29uZHMnLFxuICBzczogJyVkIHNlY29uZHMnLFxuICBtOiAnYSBtaW51dGUnLFxuICBtbTogJyVkIG1pbnV0ZXMnLFxuICBoOiAnYW4gaG91cicsXG4gIGhoOiAnJWQgaG91cnMnLFxuICBkOiAnYSBkYXknLFxuICBkZDogJyVkIGRheXMnLFxuICB3OiAnYSB3ZWVrJyxcbiAgd3c6ICclZCB3ZWVrcycsXG4gIE06ICdhIG1vbnRoJyxcbiAgTU06ICclZCBtb250aHMnLFxuICB5OiAnYSB5ZWFyJyxcbiAgeXk6ICclZCB5ZWFycydcbn07XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgdmFyIG91dHB1dCA9IHRoaXMuX3JlbGF0aXZlVGltZVtzdHJpbmddO1xuICByZXR1cm4gaXNGdW5jdGlvbihvdXRwdXQpID8gb3V0cHV0KG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkgOiBvdXRwdXQucmVwbGFjZSgvJWQvaSwgbnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gcGFzdEZ1dHVyZShkaWZmLCBvdXRwdXQpIHtcbiAgdmFyIGZvcm1hdCA9IHRoaXMuX3JlbGF0aXZlVGltZVtkaWZmID4gMCA/ICdmdXR1cmUnIDogJ3Bhc3QnXTtcbiAgcmV0dXJuIGlzRnVuY3Rpb24oZm9ybWF0KSA/IGZvcm1hdChvdXRwdXQpIDogZm9ybWF0LnJlcGxhY2UoLyVzL2ksIG91dHB1dCk7XG59XG5cbnZhciBhbGlhc2VzID0ge307XG5cbmZ1bmN0aW9uIGFkZFVuaXRBbGlhcyh1bml0LCBzaG9ydGhhbmQpIHtcbiAgdmFyIGxvd2VyQ2FzZSA9IHVuaXQudG9Mb3dlckNhc2UoKTtcbiAgYWxpYXNlc1tsb3dlckNhc2VdID0gYWxpYXNlc1tsb3dlckNhc2UgKyAncyddID0gYWxpYXNlc1tzaG9ydGhhbmRdID0gdW5pdDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVW5pdHModW5pdHMpIHtcbiAgcmV0dXJuIHR5cGVvZiB1bml0cyA9PT0gJ3N0cmluZycgPyBhbGlhc2VzW3VuaXRzXSB8fCBhbGlhc2VzW3VuaXRzLnRvTG93ZXJDYXNlKCldIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPYmplY3RVbml0cyhpbnB1dE9iamVjdCkge1xuICB2YXIgbm9ybWFsaXplZElucHV0ID0ge30sXG4gICAgICBub3JtYWxpemVkUHJvcCxcbiAgICAgIHByb3A7XG5cbiAgZm9yIChwcm9wIGluIGlucHV0T2JqZWN0KSB7XG4gICAgaWYgKGhhc093blByb3AoaW5wdXRPYmplY3QsIHByb3ApKSB7XG4gICAgICBub3JtYWxpemVkUHJvcCA9IG5vcm1hbGl6ZVVuaXRzKHByb3ApO1xuXG4gICAgICBpZiAobm9ybWFsaXplZFByb3ApIHtcbiAgICAgICAgbm9ybWFsaXplZElucHV0W25vcm1hbGl6ZWRQcm9wXSA9IGlucHV0T2JqZWN0W3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub3JtYWxpemVkSW5wdXQ7XG59XG5cbnZhciBwcmlvcml0aWVzID0ge307XG5cbmZ1bmN0aW9uIGFkZFVuaXRQcmlvcml0eSh1bml0LCBwcmlvcml0eSkge1xuICBwcmlvcml0aWVzW3VuaXRdID0gcHJpb3JpdHk7XG59XG5cbmZ1bmN0aW9uIGdldFByaW9yaXRpemVkVW5pdHModW5pdHNPYmopIHtcbiAgdmFyIHVuaXRzID0gW10sXG4gICAgICB1O1xuXG4gIGZvciAodSBpbiB1bml0c09iaikge1xuICAgIGlmIChoYXNPd25Qcm9wKHVuaXRzT2JqLCB1KSkge1xuICAgICAgdW5pdHMucHVzaCh7XG4gICAgICAgIHVuaXQ6IHUsXG4gICAgICAgIHByaW9yaXR5OiBwcmlvcml0aWVzW3VdXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB1bml0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGEucHJpb3JpdHkgLSBiLnByaW9yaXR5O1xuICB9KTtcbiAgcmV0dXJuIHVuaXRzO1xufVxuXG5mdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDAgIT09IDAgfHwgeWVhciAlIDQwMCA9PT0gMDtcbn1cblxuZnVuY3Rpb24gYWJzRmxvb3IobnVtYmVyKSB7XG4gIGlmIChudW1iZXIgPCAwKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpIHx8IDA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b0ludChhcmd1bWVudEZvckNvZXJjaW9uKSB7XG4gIHZhciBjb2VyY2VkTnVtYmVyID0gK2FyZ3VtZW50Rm9yQ29lcmNpb24sXG4gICAgICB2YWx1ZSA9IDA7XG5cbiAgaWYgKGNvZXJjZWROdW1iZXIgIT09IDAgJiYgaXNGaW5pdGUoY29lcmNlZE51bWJlcikpIHtcbiAgICB2YWx1ZSA9IGFic0Zsb29yKGNvZXJjZWROdW1iZXIpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBtYWtlR2V0U2V0KHVuaXQsIGtlZXBUaW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgc2V0JDEodGhpcywgdW5pdCwgdmFsdWUpO1xuICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIGtlZXBUaW1lKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0KHRoaXMsIHVuaXQpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0KG1vbSwgdW5pdCkge1xuICByZXR1cm4gbW9tLmlzVmFsaWQoKSA/IG1vbS5fZFsnZ2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyB1bml0XSgpIDogTmFOO1xufVxuXG5mdW5jdGlvbiBzZXQkMShtb20sIHVuaXQsIHZhbHVlKSB7XG4gIGlmIChtb20uaXNWYWxpZCgpICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICBpZiAodW5pdCA9PT0gJ0Z1bGxZZWFyJyAmJiBpc0xlYXBZZWFyKG1vbS55ZWFyKCkpICYmIG1vbS5tb250aCgpID09PSAxICYmIG1vbS5kYXRlKCkgPT09IDI5KSB7XG4gICAgICB2YWx1ZSA9IHRvSW50KHZhbHVlKTtcblxuICAgICAgbW9tLl9kWydzZXQnICsgKG1vbS5faXNVVEMgPyAnVVRDJyA6ICcnKSArIHVuaXRdKHZhbHVlLCBtb20ubW9udGgoKSwgZGF5c0luTW9udGgodmFsdWUsIG1vbS5tb250aCgpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vbS5fZFsnc2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyB1bml0XSh2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHN0cmluZ0dldCh1bml0cykge1xuICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICBpZiAoaXNGdW5jdGlvbih0aGlzW3VuaXRzXSkpIHtcbiAgICByZXR1cm4gdGhpc1t1bml0c10oKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdTZXQodW5pdHMsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdW5pdHMgPT09ICdvYmplY3QnKSB7XG4gICAgdW5pdHMgPSBub3JtYWxpemVPYmplY3RVbml0cyh1bml0cyk7XG4gICAgdmFyIHByaW9yaXRpemVkID0gZ2V0UHJpb3JpdGl6ZWRVbml0cyh1bml0cyksXG4gICAgICAgIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgcHJpb3JpdGl6ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXNbcHJpb3JpdGl6ZWRbaV0udW5pdF0odW5pdHNbcHJpb3JpdGl6ZWRbaV0udW5pdF0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKHRoaXNbdW5pdHNdKSkge1xuICAgICAgcmV0dXJuIHRoaXNbdW5pdHNdKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxudmFyIG1hdGNoMSA9IC9cXGQvLFxuICAgIG1hdGNoMiA9IC9cXGRcXGQvLFxuICAgIG1hdGNoMyA9IC9cXGR7M30vLFxuICAgIG1hdGNoNCA9IC9cXGR7NH0vLFxuICAgIG1hdGNoNiA9IC9bKy1dP1xcZHs2fS8sXG4gICAgbWF0Y2gxdG8yID0gL1xcZFxcZD8vLFxuICAgIG1hdGNoM3RvNCA9IC9cXGRcXGRcXGRcXGQ/LyxcbiAgICBtYXRjaDV0bzYgPSAvXFxkXFxkXFxkXFxkXFxkXFxkPy8sXG4gICAgbWF0Y2gxdG8zID0gL1xcZHsxLDN9LyxcbiAgICBtYXRjaDF0bzQgPSAvXFxkezEsNH0vLFxuICAgIG1hdGNoMXRvNiA9IC9bKy1dP1xcZHsxLDZ9LyxcbiAgICBtYXRjaFVuc2lnbmVkID0gL1xcZCsvLFxuICAgIG1hdGNoU2lnbmVkID0gL1srLV0/XFxkKy8sXG4gICAgbWF0Y2hPZmZzZXQgPSAvWnxbKy1dXFxkXFxkOj9cXGRcXGQvZ2ksXG4gICAgbWF0Y2hTaG9ydE9mZnNldCA9IC9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/L2dpLFxuICAgIG1hdGNoVGltZXN0YW1wID0gL1srLV0/XFxkKyhcXC5cXGR7MSwzfSk/LyxcbiAgICBtYXRjaFdvcmQgPSAvWzAtOV17MCwyNTZ9WydhLXpcXHUwMEEwLVxcdTA1RkZcXHUwNzAwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGMDdcXHVGRjEwLVxcdUZGRUZdezEsMjU2fXxbXFx1MDYwMC1cXHUwNkZGXFwvXXsxLDI1Nn0oXFxzKj9bXFx1MDYwMC1cXHUwNkZGXXsxLDI1Nn0pezEsMn0vaSxcbiAgICByZWdleGVzO1xucmVnZXhlcyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRSZWdleFRva2VuKHRva2VuLCByZWdleCwgc3RyaWN0UmVnZXgpIHtcbiAgcmVnZXhlc1t0b2tlbl0gPSBpc0Z1bmN0aW9uKHJlZ2V4KSA/IHJlZ2V4IDogZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGVEYXRhKSB7XG4gICAgcmV0dXJuIGlzU3RyaWN0ICYmIHN0cmljdFJlZ2V4ID8gc3RyaWN0UmVnZXggOiByZWdleDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0UGFyc2VSZWdleEZvclRva2VuKHRva2VuLCBjb25maWcpIHtcbiAgaWYgKCFoYXNPd25Qcm9wKHJlZ2V4ZXMsIHRva2VuKSkge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKHVuZXNjYXBlRm9ybWF0KHRva2VuKSk7XG4gIH1cblxuICByZXR1cm4gcmVnZXhlc1t0b2tlbl0oY29uZmlnLl9zdHJpY3QsIGNvbmZpZy5fbG9jYWxlKTtcbn1cblxuZnVuY3Rpb24gdW5lc2NhcGVGb3JtYXQocykge1xuICByZXR1cm4gcmVnZXhFc2NhcGUocy5yZXBsYWNlKCdcXFxcJywgJycpLnJlcGxhY2UoL1xcXFwoXFxbKXxcXFxcKFxcXSl8XFxbKFteXFxdXFxbXSopXFxdfFxcXFwoLikvZywgZnVuY3Rpb24gKG1hdGNoZWQsIHAxLCBwMiwgcDMsIHA0KSB7XG4gICAgcmV0dXJuIHAxIHx8IHAyIHx8IHAzIHx8IHA0O1xuICB9KSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2V4RXNjYXBlKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJyk7XG59XG5cbnZhciB0b2tlbnMgPSB7fTtcblxuZnVuY3Rpb24gYWRkUGFyc2VUb2tlbih0b2tlbiwgY2FsbGJhY2spIHtcbiAgdmFyIGksXG4gICAgICBmdW5jID0gY2FsbGJhY2s7XG5cbiAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICB0b2tlbiA9IFt0b2tlbl07XG4gIH1cblxuICBpZiAoaXNOdW1iZXIoY2FsbGJhY2spKSB7XG4gICAgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoaW5wdXQsIGFycmF5KSB7XG4gICAgICBhcnJheVtjYWxsYmFja10gPSB0b0ludChpbnB1dCk7XG4gICAgfTtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCB0b2tlbi5sZW5ndGg7IGkrKykge1xuICAgIHRva2Vuc1t0b2tlbltpXV0gPSBmdW5jO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZFdlZWtQYXJzZVRva2VuKHRva2VuLCBjYWxsYmFjaykge1xuICBhZGRQYXJzZVRva2VuKHRva2VuLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcsIHRva2VuKSB7XG4gICAgY29uZmlnLl93ID0gY29uZmlnLl93IHx8IHt9O1xuICAgIGNhbGxiYWNrKGlucHV0LCBjb25maWcuX3csIGNvbmZpZywgdG9rZW4pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkVGltZVRvQXJyYXlGcm9tVG9rZW4odG9rZW4sIGlucHV0LCBjb25maWcpIHtcbiAgaWYgKGlucHV0ICE9IG51bGwgJiYgaGFzT3duUHJvcCh0b2tlbnMsIHRva2VuKSkge1xuICAgIHRva2Vuc1t0b2tlbl0oaW5wdXQsIGNvbmZpZy5fYSwgY29uZmlnLCB0b2tlbik7XG4gIH1cbn1cblxudmFyIFlFQVIgPSAwLFxuICAgIE1PTlRIID0gMSxcbiAgICBEQVRFID0gMixcbiAgICBIT1VSID0gMyxcbiAgICBNSU5VVEUgPSA0LFxuICAgIFNFQ09ORCA9IDUsXG4gICAgTUlMTElTRUNPTkQgPSA2LFxuICAgIFdFRUsgPSA3LFxuICAgIFdFRUtEQVkgPSA4O1xuXG5mdW5jdGlvbiBtb2QobiwgeCkge1xuICByZXR1cm4gKG4gJSB4ICsgeCkgJSB4O1xufVxuXG52YXIgaW5kZXhPZjtcblxuaWYgKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XG4gIGluZGV4T2YgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZjtcbn0gZWxzZSB7XG4gIGluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mKG8pIHtcbiAgICB2YXIgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAodGhpc1tpXSA9PT0gbykge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XG4gIGlmIChpc05hTih5ZWFyKSB8fCBpc05hTihtb250aCkpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG1vZE1vbnRoID0gbW9kKG1vbnRoLCAxMik7XG4gIHllYXIgKz0gKG1vbnRoIC0gbW9kTW9udGgpIC8gMTI7XG4gIHJldHVybiBtb2RNb250aCA9PT0gMSA/IGlzTGVhcFllYXIoeWVhcikgPyAyOSA6IDI4IDogMzEgLSBtb2RNb250aCAlIDcgJSAyO1xufVxuXG5hZGRGb3JtYXRUb2tlbignTScsIFsnTU0nLCAyXSwgJ01vJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tb250aCgpICsgMTtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oJ01NTScsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRoc1Nob3J0KHRoaXMsIGZvcm1hdCk7XG59KTtcbmFkZEZvcm1hdFRva2VuKCdNTU1NJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsIGZvcm1hdCk7XG59KTtcbmFkZFVuaXRBbGlhcygnbW9udGgnLCAnTScpO1xuYWRkVW5pdFByaW9yaXR5KCdtb250aCcsIDgpO1xuYWRkUmVnZXhUb2tlbignTScsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdNTScsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ01NTScsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUubW9udGhzU2hvcnRSZWdleChpc1N0cmljdCk7XG59KTtcbmFkZFJlZ2V4VG9rZW4oJ01NTU0nLCBmdW5jdGlvbiAoaXNTdHJpY3QsIGxvY2FsZSkge1xuICByZXR1cm4gbG9jYWxlLm1vbnRoc1JlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUGFyc2VUb2tlbihbJ00nLCAnTU0nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICBhcnJheVtNT05USF0gPSB0b0ludChpbnB1dCkgLSAxO1xufSk7XG5hZGRQYXJzZVRva2VuKFsnTU1NJywgJ01NTU0nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICB2YXIgbW9udGggPSBjb25maWcuX2xvY2FsZS5tb250aHNQYXJzZShpbnB1dCwgdG9rZW4sIGNvbmZpZy5fc3RyaWN0KTtcblxuICBpZiAobW9udGggIT0gbnVsbCkge1xuICAgIGFycmF5W01PTlRIXSA9IG1vbnRoO1xuICB9IGVsc2Uge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRNb250aCA9IGlucHV0O1xuICB9XG59KTtcbnZhciBkZWZhdWx0TG9jYWxlTW9udGhzID0gJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gICAgZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0ID0gJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICAgIE1PTlRIU19JTl9GT1JNQVQgPSAvRFtvRF0/KFxcW1teXFxbXFxdXSpcXF18XFxzKStNTU1NPy8sXG4gICAgZGVmYXVsdE1vbnRoc1Nob3J0UmVnZXggPSBtYXRjaFdvcmQsXG4gICAgZGVmYXVsdE1vbnRoc1JlZ2V4ID0gbWF0Y2hXb3JkO1xuXG5mdW5jdGlvbiBsb2NhbGVNb250aHMobSwgZm9ybWF0KSB7XG4gIGlmICghbSkge1xuICAgIHJldHVybiBpc0FycmF5KHRoaXMuX21vbnRocykgPyB0aGlzLl9tb250aHMgOiB0aGlzLl9tb250aHNbJ3N0YW5kYWxvbmUnXTtcbiAgfVxuXG4gIHJldHVybiBpc0FycmF5KHRoaXMuX21vbnRocykgPyB0aGlzLl9tb250aHNbbS5tb250aCgpXSA6IHRoaXMuX21vbnRoc1sodGhpcy5fbW9udGhzLmlzRm9ybWF0IHx8IE1PTlRIU19JTl9GT1JNQVQpLnRlc3QoZm9ybWF0KSA/ICdmb3JtYXQnIDogJ3N0YW5kYWxvbmUnXVttLm1vbnRoKCldO1xufVxuXG5mdW5jdGlvbiBsb2NhbGVNb250aHNTaG9ydChtLCBmb3JtYXQpIHtcbiAgaWYgKCFtKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzU2hvcnQpID8gdGhpcy5fbW9udGhzU2hvcnQgOiB0aGlzLl9tb250aHNTaG9ydFsnc3RhbmRhbG9uZSddO1xuICB9XG5cbiAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzU2hvcnQpID8gdGhpcy5fbW9udGhzU2hvcnRbbS5tb250aCgpXSA6IHRoaXMuX21vbnRoc1Nob3J0W01PTlRIU19JTl9GT1JNQVQudGVzdChmb3JtYXQpID8gJ2Zvcm1hdCcgOiAnc3RhbmRhbG9uZSddW20ubW9udGgoKV07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVN0cmljdFBhcnNlKG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgdmFyIGksXG4gICAgICBpaSxcbiAgICAgIG1vbSxcbiAgICAgIGxsYyA9IG1vbnRoTmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuXG4gIGlmICghdGhpcy5fbW9udGhzUGFyc2UpIHtcbiAgICB0aGlzLl9tb250aHNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2UgPSBbXTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgKytpKSB7XG4gICAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIGldKTtcbiAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0gPSB0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0gPSB0aGlzLm1vbnRocyhtb20sICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdHJpY3QpIHtcbiAgICBpZiAoZm9ybWF0ID09PSAnTU1NJykge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChmb3JtYXQgPT09ICdNTU0nKSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxvY2FsZU1vbnRoc1BhcnNlKG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgdmFyIGksIG1vbSwgcmVnZXg7XG5cbiAgaWYgKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpIHtcbiAgICByZXR1cm4gaGFuZGxlU3RyaWN0UGFyc2UuY2FsbCh0aGlzLCBtb250aE5hbWUsIGZvcm1hdCwgc3RyaWN0KTtcbiAgfVxuXG4gIGlmICghdGhpcy5fbW9udGhzUGFyc2UpIHtcbiAgICB0aGlzLl9tb250aHNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2UgPSBbXTtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCBpXSk7XG5cbiAgICBpZiAoc3RyaWN0ICYmICF0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0pIHtcbiAgICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5tb250aHMobW9tLCAnJykucmVwbGFjZSgnLicsICcnKSArICckJywgJ2knKTtcbiAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykucmVwbGFjZSgnLicsICcnKSArICckJywgJ2knKTtcbiAgICB9XG5cbiAgICBpZiAoIXN0cmljdCAmJiAhdGhpcy5fbW9udGhzUGFyc2VbaV0pIHtcbiAgICAgIHJlZ2V4ID0gJ14nICsgdGhpcy5tb250aHMobW9tLCAnJykgKyAnfF4nICsgdGhpcy5tb250aHNTaG9ydChtb20sICcnKTtcbiAgICAgIHRoaXMuX21vbnRoc1BhcnNlW2ldID0gbmV3IFJlZ0V4cChyZWdleC5yZXBsYWNlKCcuJywgJycpLCAnaScpO1xuICAgIH1cblxuICAgIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnTU1NTScgJiYgdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnTU1NJyAmJiB0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfSBlbHNlIGlmICghc3RyaWN0ICYmIHRoaXMuX21vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldE1vbnRoKG1vbSwgdmFsdWUpIHtcbiAgdmFyIGRheU9mTW9udGg7XG5cbiAgaWYgKCFtb20uaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIG1vbTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKC9eXFxkKyQvLnRlc3QodmFsdWUpKSB7XG4gICAgICB2YWx1ZSA9IHRvSW50KHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSBtb20ubG9jYWxlRGF0YSgpLm1vbnRoc1BhcnNlKHZhbHVlKTtcblxuICAgICAgaWYgKCFpc051bWJlcih2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG1vbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkYXlPZk1vbnRoID0gTWF0aC5taW4obW9tLmRhdGUoKSwgZGF5c0luTW9udGgobW9tLnllYXIoKSwgdmFsdWUpKTtcblxuICBtb20uX2RbJ3NldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgJ01vbnRoJ10odmFsdWUsIGRheU9mTW9udGgpO1xuXG4gIHJldHVybiBtb207XG59XG5cbmZ1bmN0aW9uIGdldFNldE1vbnRoKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgc2V0TW9udGgodGhpcywgdmFsdWUpO1xuICAgIGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0KHRoaXMsICdNb250aCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERheXNJbk1vbnRoKCkge1xuICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSk7XG59XG5cbmZ1bmN0aW9uIG1vbnRoc1Nob3J0UmVnZXgoaXNTdHJpY3QpIHtcbiAgaWYgKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpIHtcbiAgICBpZiAoIWhhc093blByb3AodGhpcywgJ19tb250aHNSZWdleCcpKSB7XG4gICAgICBjb21wdXRlTW9udGhzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRSZWdleDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfbW9udGhzU2hvcnRSZWdleCcpKSB7XG4gICAgICB0aGlzLl9tb250aHNTaG9ydFJlZ2V4ID0gZGVmYXVsdE1vbnRoc1Nob3J0UmVnZXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggJiYgaXNTdHJpY3QgPyB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4IDogdGhpcy5fbW9udGhzU2hvcnRSZWdleDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtb250aHNSZWdleChpc1N0cmljdCkge1xuICBpZiAodGhpcy5fbW9udGhzUGFyc2VFeGFjdCkge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1JlZ2V4JykpIHtcbiAgICAgIGNvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW9udGhzUmVnZXg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1JlZ2V4JykpIHtcbiAgICAgIHRoaXMuX21vbnRoc1JlZ2V4ID0gZGVmYXVsdE1vbnRoc1JlZ2V4O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9tb250aHNTdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/IHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4IDogdGhpcy5fbW9udGhzUmVnZXg7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcHV0ZU1vbnRoc1BhcnNlKCkge1xuICBmdW5jdGlvbiBjbXBMZW5SZXYoYSwgYikge1xuICAgIHJldHVybiBiLmxlbmd0aCAtIGEubGVuZ3RoO1xuICB9XG5cbiAgdmFyIHNob3J0UGllY2VzID0gW10sXG4gICAgICBsb25nUGllY2VzID0gW10sXG4gICAgICBtaXhlZFBpZWNlcyA9IFtdLFxuICAgICAgaSxcbiAgICAgIG1vbTtcblxuICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgaV0pO1xuICAgIHNob3J0UGllY2VzLnB1c2godGhpcy5tb250aHNTaG9ydChtb20sICcnKSk7XG4gICAgbG9uZ1BpZWNlcy5wdXNoKHRoaXMubW9udGhzKG1vbSwgJycpKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKHRoaXMubW9udGhzKG1vbSwgJycpKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykpO1xuICB9XG5cbiAgc2hvcnRQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICBsb25nUGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgbWl4ZWRQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgc2hvcnRQaWVjZXNbaV0gPSByZWdleEVzY2FwZShzaG9ydFBpZWNlc1tpXSk7XG4gICAgbG9uZ1BpZWNlc1tpXSA9IHJlZ2V4RXNjYXBlKGxvbmdQaWVjZXNbaV0pO1xuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IDI0OyBpKyspIHtcbiAgICBtaXhlZFBpZWNlc1tpXSA9IHJlZ2V4RXNjYXBlKG1peGVkUGllY2VzW2ldKTtcbiAgfVxuXG4gIHRoaXMuX21vbnRoc1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbWl4ZWRQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICB0aGlzLl9tb250aHNTaG9ydFJlZ2V4ID0gdGhpcy5fbW9udGhzUmVnZXg7XG4gIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbG9uZ1BpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBzaG9ydFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG59XG5cbmFkZEZvcm1hdFRva2VuKCdZJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICB2YXIgeSA9IHRoaXMueWVhcigpO1xuICByZXR1cm4geSA8PSA5OTk5ID8gemVyb0ZpbGwoeSwgNCkgOiAnKycgKyB5O1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1lZJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMueWVhcigpICUgMTAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1lZWVknLCA0XSwgMCwgJ3llYXInKTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWVknLCA1XSwgMCwgJ3llYXInKTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWVlZJywgNiwgdHJ1ZV0sIDAsICd5ZWFyJyk7XG5hZGRVbml0QWxpYXMoJ3llYXInLCAneScpO1xuYWRkVW5pdFByaW9yaXR5KCd5ZWFyJywgMSk7XG5hZGRSZWdleFRva2VuKCdZJywgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignWVknLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdZWVlZJywgbWF0Y2gxdG80LCBtYXRjaDQpO1xuYWRkUmVnZXhUb2tlbignWVlZWVknLCBtYXRjaDF0bzYsIG1hdGNoNik7XG5hZGRSZWdleFRva2VuKCdZWVlZWVknLCBtYXRjaDF0bzYsIG1hdGNoNik7XG5hZGRQYXJzZVRva2VuKFsnWVlZWVknLCAnWVlZWVlZJ10sIFlFQVIpO1xuYWRkUGFyc2VUb2tlbignWVlZWScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgYXJyYXlbWUVBUl0gPSBpbnB1dC5sZW5ndGggPT09IDIgPyBob29rcy5wYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCkgOiB0b0ludChpbnB1dCk7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ1lZJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICBhcnJheVtZRUFSXSA9IGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTtcbn0pO1xuYWRkUGFyc2VUb2tlbignWScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgYXJyYXlbWUVBUl0gPSBwYXJzZUludChpbnB1dCwgMTApO1xufSk7XG5cbmZ1bmN0aW9uIGRheXNJblllYXIoeWVhcikge1xuICByZXR1cm4gaXNMZWFwWWVhcih5ZWFyKSA/IDM2NiA6IDM2NTtcbn1cblxuaG9va3MucGFyc2VUd29EaWdpdFllYXIgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgcmV0dXJuIHRvSW50KGlucHV0KSArICh0b0ludChpbnB1dCkgPiA2OCA/IDE5MDAgOiAyMDAwKTtcbn07XG5cbnZhciBnZXRTZXRZZWFyID0gbWFrZUdldFNldCgnRnVsbFllYXInLCB0cnVlKTtcblxuZnVuY3Rpb24gZ2V0SXNMZWFwWWVhcigpIHtcbiAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEYXRlKHksIG0sIGQsIGgsIE0sIHMsIG1zKSB7XG4gIHZhciBkYXRlO1xuXG4gIGlmICh5IDwgMTAwICYmIHkgPj0gMCkge1xuICAgIGRhdGUgPSBuZXcgRGF0ZSh5ICsgNDAwLCBtLCBkLCBoLCBNLCBzLCBtcyk7XG5cbiAgICBpZiAoaXNGaW5pdGUoZGF0ZS5nZXRGdWxsWWVhcigpKSkge1xuICAgICAgZGF0ZS5zZXRGdWxsWWVhcih5KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKHksIG0sIGQsIGgsIE0sIHMsIG1zKTtcbiAgfVxuXG4gIHJldHVybiBkYXRlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVVENEYXRlKHkpIHtcbiAgdmFyIGRhdGUsIGFyZ3M7XG5cbiAgaWYgKHkgPCAxMDAgJiYgeSA+PSAwKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgYXJnc1swXSA9IHkgKyA0MDA7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsIGFyZ3MpKTtcblxuICAgIGlmIChpc0Zpbml0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCkpKSB7XG4gICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gIH1cblxuICByZXR1cm4gZGF0ZTtcbn1cblxuZnVuY3Rpb24gZmlyc3RXZWVrT2Zmc2V0KHllYXIsIGRvdywgZG95KSB7XG4gIHZhciBmd2QgPSA3ICsgZG93IC0gZG95LFxuICAgICAgZndkbHcgPSAoNyArIGNyZWF0ZVVUQ0RhdGUoeWVhciwgMCwgZndkKS5nZXRVVENEYXkoKSAtIGRvdykgJSA3O1xuICByZXR1cm4gLWZ3ZGx3ICsgZndkIC0gMTtcbn1cblxuZnVuY3Rpb24gZGF5T2ZZZWFyRnJvbVdlZWtzKHllYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KSB7XG4gIHZhciBsb2NhbFdlZWtkYXkgPSAoNyArIHdlZWtkYXkgLSBkb3cpICUgNyxcbiAgICAgIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpLFxuICAgICAgZGF5T2ZZZWFyID0gMSArIDcgKiAod2VlayAtIDEpICsgbG9jYWxXZWVrZGF5ICsgd2Vla09mZnNldCxcbiAgICAgIHJlc1llYXIsXG4gICAgICByZXNEYXlPZlllYXI7XG5cbiAgaWYgKGRheU9mWWVhciA8PSAwKSB7XG4gICAgcmVzWWVhciA9IHllYXIgLSAxO1xuICAgIHJlc0RheU9mWWVhciA9IGRheXNJblllYXIocmVzWWVhcikgKyBkYXlPZlllYXI7XG4gIH0gZWxzZSBpZiAoZGF5T2ZZZWFyID4gZGF5c0luWWVhcih5ZWFyKSkge1xuICAgIHJlc1llYXIgPSB5ZWFyICsgMTtcbiAgICByZXNEYXlPZlllYXIgPSBkYXlPZlllYXIgLSBkYXlzSW5ZZWFyKHllYXIpO1xuICB9IGVsc2Uge1xuICAgIHJlc1llYXIgPSB5ZWFyO1xuICAgIHJlc0RheU9mWWVhciA9IGRheU9mWWVhcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeWVhcjogcmVzWWVhcixcbiAgICBkYXlPZlllYXI6IHJlc0RheU9mWWVhclxuICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrT2ZZZWFyKG1vbSwgZG93LCBkb3kpIHtcbiAgdmFyIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQobW9tLnllYXIoKSwgZG93LCBkb3kpLFxuICAgICAgd2VlayA9IE1hdGguZmxvb3IoKG1vbS5kYXlPZlllYXIoKSAtIHdlZWtPZmZzZXQgLSAxKSAvIDcpICsgMSxcbiAgICAgIHJlc1dlZWssXG4gICAgICByZXNZZWFyO1xuXG4gIGlmICh3ZWVrIDwgMSkge1xuICAgIHJlc1llYXIgPSBtb20ueWVhcigpIC0gMTtcbiAgICByZXNXZWVrID0gd2VlayArIHdlZWtzSW5ZZWFyKHJlc1llYXIsIGRvdywgZG95KTtcbiAgfSBlbHNlIGlmICh3ZWVrID4gd2Vla3NJblllYXIobW9tLnllYXIoKSwgZG93LCBkb3kpKSB7XG4gICAgcmVzV2VlayA9IHdlZWsgLSB3ZWVrc0luWWVhcihtb20ueWVhcigpLCBkb3csIGRveSk7XG4gICAgcmVzWWVhciA9IG1vbS55ZWFyKCkgKyAxO1xuICB9IGVsc2Uge1xuICAgIHJlc1llYXIgPSBtb20ueWVhcigpO1xuICAgIHJlc1dlZWsgPSB3ZWVrO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3ZWVrOiByZXNXZWVrLFxuICAgIHllYXI6IHJlc1llYXJcbiAgfTtcbn1cblxuZnVuY3Rpb24gd2Vla3NJblllYXIoeWVhciwgZG93LCBkb3kpIHtcbiAgdmFyIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpLFxuICAgICAgd2Vla09mZnNldE5leHQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciArIDEsIGRvdywgZG95KTtcbiAgcmV0dXJuIChkYXlzSW5ZZWFyKHllYXIpIC0gd2Vla09mZnNldCArIHdlZWtPZmZzZXROZXh0KSAvIDc7XG59XG5cbmFkZEZvcm1hdFRva2VuKCd3JywgWyd3dycsIDJdLCAnd28nLCAnd2VlaycpO1xuYWRkRm9ybWF0VG9rZW4oJ1cnLCBbJ1dXJywgMl0sICdXbycsICdpc29XZWVrJyk7XG5hZGRVbml0QWxpYXMoJ3dlZWsnLCAndycpO1xuYWRkVW5pdEFsaWFzKCdpc29XZWVrJywgJ1cnKTtcbmFkZFVuaXRQcmlvcml0eSgnd2VlaycsIDUpO1xuYWRkVW5pdFByaW9yaXR5KCdpc29XZWVrJywgNSk7XG5hZGRSZWdleFRva2VuKCd3JywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ3d3JywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignVycsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdXVycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFdlZWtQYXJzZVRva2VuKFsndycsICd3dycsICdXJywgJ1dXJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICB3ZWVrW3Rva2VuLnN1YnN0cigwLCAxKV0gPSB0b0ludChpbnB1dCk7XG59KTtcblxuZnVuY3Rpb24gbG9jYWxlV2Vlayhtb20pIHtcbiAgcmV0dXJuIHdlZWtPZlllYXIobW9tLCB0aGlzLl93ZWVrLmRvdywgdGhpcy5fd2Vlay5kb3kpLndlZWs7XG59XG5cbnZhciBkZWZhdWx0TG9jYWxlV2VlayA9IHtcbiAgZG93OiAwLFxuICBkb3k6IDZcbn07XG5cbmZ1bmN0aW9uIGxvY2FsZUZpcnN0RGF5T2ZXZWVrKCkge1xuICByZXR1cm4gdGhpcy5fd2Vlay5kb3c7XG59XG5cbmZ1bmN0aW9uIGxvY2FsZUZpcnN0RGF5T2ZZZWFyKCkge1xuICByZXR1cm4gdGhpcy5fd2Vlay5kb3k7XG59XG5cbmZ1bmN0aW9uIGdldFNldFdlZWsoaW5wdXQpIHtcbiAgdmFyIHdlZWsgPSB0aGlzLmxvY2FsZURhdGEoKS53ZWVrKHRoaXMpO1xuICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IHdlZWsgOiB0aGlzLmFkZCgoaW5wdXQgLSB3ZWVrKSAqIDcsICdkJyk7XG59XG5cbmZ1bmN0aW9uIGdldFNldElTT1dlZWsoaW5wdXQpIHtcbiAgdmFyIHdlZWsgPSB3ZWVrT2ZZZWFyKHRoaXMsIDEsIDQpLndlZWs7XG4gIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2VlayA6IHRoaXMuYWRkKChpbnB1dCAtIHdlZWspICogNywgJ2QnKTtcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ2QnLCAwLCAnZG8nLCAnZGF5Jyk7XG5hZGRGb3JtYXRUb2tlbignZGQnLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLCBmb3JtYXQpO1xufSk7XG5hZGRGb3JtYXRUb2tlbignZGRkJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLCBmb3JtYXQpO1xufSk7XG5hZGRGb3JtYXRUb2tlbignZGRkZCcsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsIGZvcm1hdCk7XG59KTtcbmFkZEZvcm1hdFRva2VuKCdlJywgMCwgMCwgJ3dlZWtkYXknKTtcbmFkZEZvcm1hdFRva2VuKCdFJywgMCwgMCwgJ2lzb1dlZWtkYXknKTtcbmFkZFVuaXRBbGlhcygnZGF5JywgJ2QnKTtcbmFkZFVuaXRBbGlhcygnd2Vla2RheScsICdlJyk7XG5hZGRVbml0QWxpYXMoJ2lzb1dlZWtkYXknLCAnRScpO1xuYWRkVW5pdFByaW9yaXR5KCdkYXknLCAxMSk7XG5hZGRVbml0UHJpb3JpdHkoJ3dlZWtkYXknLCAxMSk7XG5hZGRVbml0UHJpb3JpdHkoJ2lzb1dlZWtkYXknLCAxMSk7XG5hZGRSZWdleFRva2VuKCdkJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ2UnLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignRScsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdkZCcsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUud2Vla2RheXNNaW5SZWdleChpc1N0cmljdCk7XG59KTtcbmFkZFJlZ2V4VG9rZW4oJ2RkZCcsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUud2Vla2RheXNTaG9ydFJlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUmVnZXhUb2tlbignZGRkZCcsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUud2Vla2RheXNSZWdleChpc1N0cmljdCk7XG59KTtcbmFkZFdlZWtQYXJzZVRva2VuKFsnZGQnLCAnZGRkJywgJ2RkZGQnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gIHZhciB3ZWVrZGF5ID0gY29uZmlnLl9sb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCwgdG9rZW4sIGNvbmZpZy5fc3RyaWN0KTtcblxuICBpZiAod2Vla2RheSAhPSBudWxsKSB7XG4gICAgd2Vlay5kID0gd2Vla2RheTtcbiAgfSBlbHNlIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkV2Vla2RheSA9IGlucHV0O1xuICB9XG59KTtcbmFkZFdlZWtQYXJzZVRva2VuKFsnZCcsICdlJywgJ0UnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gIHdlZWtbdG9rZW5dID0gdG9JbnQoaW5wdXQpO1xufSk7XG5cbmZ1bmN0aW9uIHBhcnNlV2Vla2RheShpbnB1dCwgbG9jYWxlKSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgaWYgKCFpc05hTihpbnB1dCkpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoaW5wdXQsIDEwKTtcbiAgfVxuXG4gIGlucHV0ID0gbG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQpO1xuXG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHBhcnNlSXNvV2Vla2RheShpbnB1dCwgbG9jYWxlKSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KSAlIDcgfHwgNztcbiAgfVxuXG4gIHJldHVybiBpc05hTihpbnB1dCkgPyBudWxsIDogaW5wdXQ7XG59XG5cbmZ1bmN0aW9uIHNoaWZ0V2Vla2RheXMod3MsIG4pIHtcbiAgcmV0dXJuIHdzLnNsaWNlKG4sIDcpLmNvbmNhdCh3cy5zbGljZSgwLCBuKSk7XG59XG5cbnZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXMgPSAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gICAgZGVmYXVsdExvY2FsZVdlZWtkYXlzU2hvcnQgPSAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICAgIGRlZmF1bHRMb2NhbGVXZWVrZGF5c01pbiA9ICdTdV9Nb19UdV9XZV9UaF9Gcl9TYScuc3BsaXQoJ18nKSxcbiAgICBkZWZhdWx0V2Vla2RheXNSZWdleCA9IG1hdGNoV29yZCxcbiAgICBkZWZhdWx0V2Vla2RheXNTaG9ydFJlZ2V4ID0gbWF0Y2hXb3JkLFxuICAgIGRlZmF1bHRXZWVrZGF5c01pblJlZ2V4ID0gbWF0Y2hXb3JkO1xuXG5mdW5jdGlvbiBsb2NhbGVXZWVrZGF5cyhtLCBmb3JtYXQpIHtcbiAgdmFyIHdlZWtkYXlzID0gaXNBcnJheSh0aGlzLl93ZWVrZGF5cykgPyB0aGlzLl93ZWVrZGF5cyA6IHRoaXMuX3dlZWtkYXlzW20gJiYgbSAhPT0gdHJ1ZSAmJiB0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KGZvcm1hdCkgPyAnZm9ybWF0JyA6ICdzdGFuZGFsb25lJ107XG4gIHJldHVybiBtID09PSB0cnVlID8gc2hpZnRXZWVrZGF5cyh3ZWVrZGF5cywgdGhpcy5fd2Vlay5kb3cpIDogbSA/IHdlZWtkYXlzW20uZGF5KCldIDogd2Vla2RheXM7XG59XG5cbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzU2hvcnQobSkge1xuICByZXR1cm4gbSA9PT0gdHJ1ZSA/IHNoaWZ0V2Vla2RheXModGhpcy5fd2Vla2RheXNTaG9ydCwgdGhpcy5fd2Vlay5kb3cpIDogbSA/IHRoaXMuX3dlZWtkYXlzU2hvcnRbbS5kYXkoKV0gOiB0aGlzLl93ZWVrZGF5c1Nob3J0O1xufVxuXG5mdW5jdGlvbiBsb2NhbGVXZWVrZGF5c01pbihtKSB7XG4gIHJldHVybiBtID09PSB0cnVlID8gc2hpZnRXZWVrZGF5cyh0aGlzLl93ZWVrZGF5c01pbiwgdGhpcy5fd2Vlay5kb3cpIDogbSA/IHRoaXMuX3dlZWtkYXlzTWluW20uZGF5KCldIDogdGhpcy5fd2Vla2RheXNNaW47XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVN0cmljdFBhcnNlJDEod2Vla2RheU5hbWUsIGZvcm1hdCwgc3RyaWN0KSB7XG4gIHZhciBpLFxuICAgICAgaWksXG4gICAgICBtb20sXG4gICAgICBsbGMgPSB3ZWVrZGF5TmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuXG4gIGlmICghdGhpcy5fd2Vla2RheXNQYXJzZSkge1xuICAgIHRoaXMuX3dlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlID0gW107XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgNzsgKytpKSB7XG4gICAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIDFdKS5kYXkoaSk7XG4gICAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldID0gdGhpcy53ZWVrZGF5c01pbihtb20sICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldID0gdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLl93ZWVrZGF5c1BhcnNlW2ldID0gdGhpcy53ZWVrZGF5cyhtb20sICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdHJpY3QpIHtcbiAgICBpZiAoZm9ybWF0ID09PSAnZGRkZCcpIHtcbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgIH0gZWxzZSBpZiAoZm9ybWF0ID09PSAnZGRkJykge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChmb3JtYXQgPT09ICdkZGRkJykge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcblxuICAgICAgaWYgKGlpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gaWk7XG4gICAgICB9XG5cbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgbGxjKTtcblxuICAgICAgaWYgKGlpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gaWk7XG4gICAgICB9XG5cbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgIH0gZWxzZSBpZiAoZm9ybWF0ID09PSAnZGRkJykge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcblxuICAgICAgaWYgKGlpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gaWk7XG4gICAgICB9XG5cbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcblxuICAgICAgaWYgKGlpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gaWk7XG4gICAgICB9XG5cbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzUGFyc2Uod2Vla2RheU5hbWUsIGZvcm1hdCwgc3RyaWN0KSB7XG4gIHZhciBpLCBtb20sIHJlZ2V4O1xuXG4gIGlmICh0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpIHtcbiAgICByZXR1cm4gaGFuZGxlU3RyaWN0UGFyc2UkMS5jYWxsKHRoaXMsIHdlZWtkYXlOYW1lLCBmb3JtYXQsIHN0cmljdCk7XG4gIH1cblxuICBpZiAoIXRoaXMuX3dlZWtkYXlzUGFyc2UpIHtcbiAgICB0aGlzLl93ZWVrZGF5c1BhcnNlID0gW107XG4gICAgdGhpcy5fbWluV2Vla2RheXNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlID0gW107XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCAxXSkuZGF5KGkpO1xuXG4gICAgaWYgKHN0cmljdCAmJiAhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0pIHtcbiAgICAgIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFxcXC4/JykgKyAnJCcsICdpJyk7XG4gICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKS5yZXBsYWNlKCcuJywgJ1xcXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgdGhpcy5fbWluV2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5c01pbihtb20sICcnKS5yZXBsYWNlKCcuJywgJ1xcXFwuPycpICsgJyQnLCAnaScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fd2Vla2RheXNQYXJzZVtpXSkge1xuICAgICAgcmVnZXggPSAnXicgKyB0aGlzLndlZWtkYXlzKG1vbSwgJycpICsgJ3xeJyArIHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKSArICd8XicgKyB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpO1xuICAgICAgdGhpcy5fd2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsICcnKSwgJ2knKTtcbiAgICB9XG5cbiAgICBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ2RkZGQnICYmIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9IGVsc2UgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdkZGQnICYmIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnZGQnICYmIHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH0gZWxzZSBpZiAoIXN0cmljdCAmJiB0aGlzLl93ZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0U2V0RGF5T2ZXZWVrKGlucHV0KSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gIH1cblxuICB2YXIgZGF5ID0gdGhpcy5faXNVVEMgPyB0aGlzLl9kLmdldFVUQ0RheSgpIDogdGhpcy5fZC5nZXREYXkoKTtcblxuICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgIGlucHV0ID0gcGFyc2VXZWVrZGF5KGlucHV0LCB0aGlzLmxvY2FsZURhdGEoKSk7XG4gICAgcmV0dXJuIHRoaXMuYWRkKGlucHV0IC0gZGF5LCAnZCcpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkYXk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrKGlucHV0KSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gIH1cblxuICB2YXIgd2Vla2RheSA9ICh0aGlzLmRheSgpICsgNyAtIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdykgJSA3O1xuICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IHdlZWtkYXkgOiB0aGlzLmFkZChpbnB1dCAtIHdlZWtkYXksICdkJyk7XG59XG5cbmZ1bmN0aW9uIGdldFNldElTT0RheU9mV2VlayhpbnB1dCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICB9XG5cbiAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICB2YXIgd2Vla2RheSA9IHBhcnNlSXNvV2Vla2RheShpbnB1dCwgdGhpcy5sb2NhbGVEYXRhKCkpO1xuICAgIHJldHVybiB0aGlzLmRheSh0aGlzLmRheSgpICUgNyA/IHdlZWtkYXkgOiB3ZWVrZGF5IC0gNyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMuZGF5KCkgfHwgNztcbiAgfVxufVxuXG5mdW5jdGlvbiB3ZWVrZGF5c1JlZ2V4KGlzU3RyaWN0KSB7XG4gIGlmICh0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpIHtcbiAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c1JlZ2V4JykpIHtcbiAgICAgIGNvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKGlzU3RyaWN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzUmVnZXg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgdGhpcy5fd2Vla2RheXNSZWdleCA9IGRlZmF1bHRXZWVrZGF5c1JlZ2V4O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID8gdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleCA6IHRoaXMuX3dlZWtkYXlzUmVnZXg7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2Vla2RheXNTaG9ydFJlZ2V4KGlzU3RyaWN0KSB7XG4gIGlmICh0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpIHtcbiAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c1JlZ2V4JykpIHtcbiAgICAgIGNvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKGlzU3RyaWN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c1Nob3J0UmVnZXgnKSkge1xuICAgICAgdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4ID0gZGVmYXVsdFdlZWtkYXlzU2hvcnRSZWdleDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID8gdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4IDogdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4O1xuICB9XG59XG5cbmZ1bmN0aW9uIHdlZWtkYXlzTWluUmVnZXgoaXNTdHJpY3QpIHtcbiAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgY29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNNaW5SZWdleDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNNaW5SZWdleCcpKSB7XG4gICAgICB0aGlzLl93ZWVrZGF5c01pblJlZ2V4ID0gZGVmYXVsdFdlZWtkYXlzTWluUmVnZXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXggJiYgaXNTdHJpY3QgPyB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4IDogdGhpcy5fd2Vla2RheXNNaW5SZWdleDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wdXRlV2Vla2RheXNQYXJzZSgpIHtcbiAgZnVuY3Rpb24gY21wTGVuUmV2KGEsIGIpIHtcbiAgICByZXR1cm4gYi5sZW5ndGggLSBhLmxlbmd0aDtcbiAgfVxuXG4gIHZhciBtaW5QaWVjZXMgPSBbXSxcbiAgICAgIHNob3J0UGllY2VzID0gW10sXG4gICAgICBsb25nUGllY2VzID0gW10sXG4gICAgICBtaXhlZFBpZWNlcyA9IFtdLFxuICAgICAgaSxcbiAgICAgIG1vbSxcbiAgICAgIG1pbnAsXG4gICAgICBzaG9ydHAsXG4gICAgICBsb25ncDtcblxuICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCAxXSkuZGF5KGkpO1xuICAgIG1pbnAgPSByZWdleEVzY2FwZSh0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpKTtcbiAgICBzaG9ydHAgPSByZWdleEVzY2FwZSh0aGlzLndlZWtkYXlzU2hvcnQobW9tLCAnJykpO1xuICAgIGxvbmdwID0gcmVnZXhFc2NhcGUodGhpcy53ZWVrZGF5cyhtb20sICcnKSk7XG4gICAgbWluUGllY2VzLnB1c2gobWlucCk7XG4gICAgc2hvcnRQaWVjZXMucHVzaChzaG9ydHApO1xuICAgIGxvbmdQaWVjZXMucHVzaChsb25ncCk7XG4gICAgbWl4ZWRQaWVjZXMucHVzaChtaW5wKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKHNob3J0cCk7XG4gICAgbWl4ZWRQaWVjZXMucHVzaChsb25ncCk7XG4gIH1cblxuICBtaW5QaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICBzaG9ydFBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gIGxvbmdQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICBtaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gIHRoaXMuX3dlZWtkYXlzUmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBtaXhlZFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gIHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCA9IHRoaXMuX3dlZWtkYXlzUmVnZXg7XG4gIHRoaXMuX3dlZWtkYXlzTWluUmVnZXggPSB0aGlzLl93ZWVrZGF5c1JlZ2V4O1xuICB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbG9uZ1BpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gIHRoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIHNob3J0UGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIG1pblBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG59XG5cbmZ1bmN0aW9uIGhGb3JtYXQoKSB7XG4gIHJldHVybiB0aGlzLmhvdXJzKCkgJSAxMiB8fCAxMjtcbn1cblxuZnVuY3Rpb24ga0Zvcm1hdCgpIHtcbiAgcmV0dXJuIHRoaXMuaG91cnMoKSB8fCAyNDtcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ0gnLCBbJ0hIJywgMl0sIDAsICdob3VyJyk7XG5hZGRGb3JtYXRUb2tlbignaCcsIFsnaGgnLCAyXSwgMCwgaEZvcm1hdCk7XG5hZGRGb3JtYXRUb2tlbignaycsIFsna2snLCAyXSwgMCwga0Zvcm1hdCk7XG5hZGRGb3JtYXRUb2tlbignaG1tJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJycgKyBoRm9ybWF0LmFwcGx5KHRoaXMpICsgemVyb0ZpbGwodGhpcy5taW51dGVzKCksIDIpO1xufSk7XG5hZGRGb3JtYXRUb2tlbignaG1tc3MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnJyArIGhGb3JtYXQuYXBwbHkodGhpcykgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMikgKyB6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwgMik7XG59KTtcbmFkZEZvcm1hdFRva2VuKCdIbW0nLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnJyArIHRoaXMuaG91cnMoKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKTtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oJ0htbXNzJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gJycgKyB0aGlzLmhvdXJzKCkgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMikgKyB6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwgMik7XG59KTtcblxuZnVuY3Rpb24gbWVyaWRpZW0odG9rZW4sIGxvd2VyY2FzZSkge1xuICBhZGRGb3JtYXRUb2tlbih0b2tlbiwgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksIHRoaXMubWludXRlcygpLCBsb3dlcmNhc2UpO1xuICB9KTtcbn1cblxubWVyaWRpZW0oJ2EnLCB0cnVlKTtcbm1lcmlkaWVtKCdBJywgZmFsc2UpO1xuYWRkVW5pdEFsaWFzKCdob3VyJywgJ2gnKTtcbmFkZFVuaXRQcmlvcml0eSgnaG91cicsIDEzKTtcblxuZnVuY3Rpb24gbWF0Y2hNZXJpZGllbShpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUuX21lcmlkaWVtUGFyc2U7XG59XG5cbmFkZFJlZ2V4VG9rZW4oJ2EnLCBtYXRjaE1lcmlkaWVtKTtcbmFkZFJlZ2V4VG9rZW4oJ0EnLCBtYXRjaE1lcmlkaWVtKTtcbmFkZFJlZ2V4VG9rZW4oJ0gnLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignaCcsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdrJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ0hIJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignaGgnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdraycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ2htbScsIG1hdGNoM3RvNCk7XG5hZGRSZWdleFRva2VuKCdobW1zcycsIG1hdGNoNXRvNik7XG5hZGRSZWdleFRva2VuKCdIbW0nLCBtYXRjaDN0bzQpO1xuYWRkUmVnZXhUb2tlbignSG1tc3MnLCBtYXRjaDV0bzYpO1xuYWRkUGFyc2VUb2tlbihbJ0gnLCAnSEgnXSwgSE9VUik7XG5hZGRQYXJzZVRva2VuKFsnaycsICdrayddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgdmFyIGtJbnB1dCA9IHRvSW50KGlucHV0KTtcbiAgYXJyYXlbSE9VUl0gPSBrSW5wdXQgPT09IDI0ID8gMCA6IGtJbnB1dDtcbn0pO1xuYWRkUGFyc2VUb2tlbihbJ2EnLCAnQSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgY29uZmlnLl9pc1BtID0gY29uZmlnLl9sb2NhbGUuaXNQTShpbnB1dCk7XG4gIGNvbmZpZy5fbWVyaWRpZW0gPSBpbnB1dDtcbn0pO1xuYWRkUGFyc2VUb2tlbihbJ2gnLCAnaGgnXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQpO1xuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdHJ1ZTtcbn0pO1xuYWRkUGFyc2VUb2tlbignaG1tJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIHZhciBwb3MgPSBpbnB1dC5sZW5ndGggLSAyO1xuICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MpKTtcbiAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MpKTtcbiAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ2htbXNzJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIHZhciBwb3MxID0gaW5wdXQubGVuZ3RoIC0gNCxcbiAgICAgIHBvczIgPSBpbnB1dC5sZW5ndGggLSAyO1xuICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MxKSk7XG4gIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMSwgMikpO1xuICBhcnJheVtTRUNPTkRdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKTtcbiAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ0htbScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICB2YXIgcG9zID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dC5zdWJzdHIoMCwgcG9zKSk7XG4gIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zKSk7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ0htbXNzJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIHZhciBwb3MxID0gaW5wdXQubGVuZ3RoIC0gNCxcbiAgICAgIHBvczIgPSBpbnB1dC5sZW5ndGggLSAyO1xuICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MxKSk7XG4gIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMSwgMikpO1xuICBhcnJheVtTRUNPTkRdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKTtcbn0pO1xuXG5mdW5jdGlvbiBsb2NhbGVJc1BNKGlucHV0KSB7XG4gIHJldHVybiAoaW5wdXQgKyAnJykudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkgPT09ICdwJztcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVNZXJpZGllbVBhcnNlID0gL1thcF1cXC4/bT9cXC4/L2ksXG4gICAgZ2V0U2V0SG91ciA9IG1ha2VHZXRTZXQoJ0hvdXJzJywgdHJ1ZSk7XG5cbmZ1bmN0aW9uIGxvY2FsZU1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gIGlmIChob3VycyA+IDExKSB7XG4gICAgcmV0dXJuIGlzTG93ZXIgPyAncG0nIDogJ1BNJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaXNMb3dlciA/ICdhbScgOiAnQU0nO1xuICB9XG59XG5cbnZhciBiYXNlQ29uZmlnID0ge1xuICBjYWxlbmRhcjogZGVmYXVsdENhbGVuZGFyLFxuICBsb25nRGF0ZUZvcm1hdDogZGVmYXVsdExvbmdEYXRlRm9ybWF0LFxuICBpbnZhbGlkRGF0ZTogZGVmYXVsdEludmFsaWREYXRlLFxuICBvcmRpbmFsOiBkZWZhdWx0T3JkaW5hbCxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogZGVmYXVsdERheU9mTW9udGhPcmRpbmFsUGFyc2UsXG4gIHJlbGF0aXZlVGltZTogZGVmYXVsdFJlbGF0aXZlVGltZSxcbiAgbW9udGhzOiBkZWZhdWx0TG9jYWxlTW9udGhzLFxuICBtb250aHNTaG9ydDogZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0LFxuICB3ZWVrOiBkZWZhdWx0TG9jYWxlV2VlayxcbiAgd2Vla2RheXM6IGRlZmF1bHRMb2NhbGVXZWVrZGF5cyxcbiAgd2Vla2RheXNNaW46IGRlZmF1bHRMb2NhbGVXZWVrZGF5c01pbixcbiAgd2Vla2RheXNTaG9ydDogZGVmYXVsdExvY2FsZVdlZWtkYXlzU2hvcnQsXG4gIG1lcmlkaWVtUGFyc2U6IGRlZmF1bHRMb2NhbGVNZXJpZGllbVBhcnNlXG59O1xudmFyIGxvY2FsZXMgPSB7fSxcbiAgICBsb2NhbGVGYW1pbGllcyA9IHt9LFxuICAgIGdsb2JhbExvY2FsZTtcblxuZnVuY3Rpb24gY29tbW9uUHJlZml4KGFycjEsIGFycjIpIHtcbiAgdmFyIGksXG4gICAgICBtaW5sID0gTWF0aC5taW4oYXJyMS5sZW5ndGgsIGFycjIubGVuZ3RoKTtcblxuICBmb3IgKGkgPSAwOyBpIDwgbWlubDsgaSArPSAxKSB7XG4gICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtaW5sO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVMb2NhbGUoa2V5KSB7XG4gIHJldHVybiBrZXkgPyBrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdfJywgJy0nKSA6IGtleTtcbn1cblxuZnVuY3Rpb24gY2hvb3NlTG9jYWxlKG5hbWVzKSB7XG4gIHZhciBpID0gMCxcbiAgICAgIGosXG4gICAgICBuZXh0LFxuICAgICAgbG9jYWxlLFxuICAgICAgc3BsaXQ7XG5cbiAgd2hpbGUgKGkgPCBuYW1lcy5sZW5ndGgpIHtcbiAgICBzcGxpdCA9IG5vcm1hbGl6ZUxvY2FsZShuYW1lc1tpXSkuc3BsaXQoJy0nKTtcbiAgICBqID0gc3BsaXQubGVuZ3RoO1xuICAgIG5leHQgPSBub3JtYWxpemVMb2NhbGUobmFtZXNbaSArIDFdKTtcbiAgICBuZXh0ID0gbmV4dCA/IG5leHQuc3BsaXQoJy0nKSA6IG51bGw7XG5cbiAgICB3aGlsZSAoaiA+IDApIHtcbiAgICAgIGxvY2FsZSA9IGxvYWRMb2NhbGUoc3BsaXQuc2xpY2UoMCwgaikuam9pbignLScpKTtcblxuICAgICAgaWYgKGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV4dCAmJiBuZXh0Lmxlbmd0aCA+PSBqICYmIGNvbW1vblByZWZpeChzcGxpdCwgbmV4dCkgPj0gaiAtIDEpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGotLTtcbiAgICB9XG5cbiAgICBpKys7XG4gIH1cblxuICByZXR1cm4gZ2xvYmFsTG9jYWxlO1xufVxuXG5mdW5jdGlvbiBsb2FkTG9jYWxlKG5hbWUpIHtcbiAgdmFyIG9sZExvY2FsZSA9IG51bGwsXG4gICAgICBhbGlhc2VkUmVxdWlyZTtcblxuICBpZiAobG9jYWxlc1tuYW1lXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIHRyeSB7XG4gICAgICBvbGRMb2NhbGUgPSBnbG9iYWxMb2NhbGUuX2FiYnI7XG4gICAgICBhbGlhc2VkUmVxdWlyZSA9IHJlcXVpcmU7XG4gICAgICBhbGlhc2VkUmVxdWlyZSgnLi9sb2NhbGUvJyArIG5hbWUpO1xuICAgICAgZ2V0U2V0R2xvYmFsTG9jYWxlKG9sZExvY2FsZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9jYWxlc1tuYW1lXSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG59XG5cbmZ1bmN0aW9uIGdldFNldEdsb2JhbExvY2FsZShrZXksIHZhbHVlcykge1xuICB2YXIgZGF0YTtcblxuICBpZiAoa2V5KSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlcykpIHtcbiAgICAgIGRhdGEgPSBnZXRMb2NhbGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IGRlZmluZUxvY2FsZShrZXksIHZhbHVlcyk7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGdsb2JhbExvY2FsZSA9IGRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTG9jYWxlICcgKyBrZXkgKyAnIG5vdCBmb3VuZC4gRGlkIHlvdSBmb3JnZXQgdG8gbG9hZCBpdD8nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2xvYmFsTG9jYWxlLl9hYmJyO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVMb2NhbGUobmFtZSwgY29uZmlnKSB7XG4gIGlmIChjb25maWcgIT09IG51bGwpIHtcbiAgICB2YXIgbG9jYWxlLFxuICAgICAgICBwYXJlbnRDb25maWcgPSBiYXNlQ29uZmlnO1xuICAgIGNvbmZpZy5hYmJyID0gbmFtZTtcblxuICAgIGlmIChsb2NhbGVzW25hbWVdICE9IG51bGwpIHtcbiAgICAgIGRlcHJlY2F0ZVNpbXBsZSgnZGVmaW5lTG9jYWxlT3ZlcnJpZGUnLCAndXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgJyArICdhbiBleGlzdGluZyBsb2NhbGUuIG1vbWVudC5kZWZpbmVMb2NhbGUobG9jYWxlTmFtZSwgJyArICdjb25maWcpIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGNyZWF0aW5nIGEgbmV3IGxvY2FsZSAnICsgJ1NlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uJyk7XG4gICAgICBwYXJlbnRDb25maWcgPSBsb2NhbGVzW25hbWVdLl9jb25maWc7XG4gICAgfSBlbHNlIGlmIChjb25maWcucGFyZW50TG9jYWxlICE9IG51bGwpIHtcbiAgICAgIGlmIChsb2NhbGVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50Q29uZmlnID0gbG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXS5fY29uZmlnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYWxlID0gbG9hZExvY2FsZShjb25maWcucGFyZW50TG9jYWxlKTtcblxuICAgICAgICBpZiAobG9jYWxlICE9IG51bGwpIHtcbiAgICAgICAgICBwYXJlbnRDb25maWcgPSBsb2NhbGUuX2NvbmZpZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIWxvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdKSB7XG4gICAgICAgICAgICBsb2NhbGVGYW1pbGllc1tjb25maWcucGFyZW50TG9jYWxlXSA9IFtdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbGVzW25hbWVdID0gbmV3IExvY2FsZShtZXJnZUNvbmZpZ3MocGFyZW50Q29uZmlnLCBjb25maWcpKTtcblxuICAgIGlmIChsb2NhbGVGYW1pbGllc1tuYW1lXSkge1xuICAgICAgbG9jYWxlRmFtaWxpZXNbbmFtZV0uZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICBkZWZpbmVMb2NhbGUoeC5uYW1lLCB4LmNvbmZpZyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTZXRHbG9iYWxMb2NhbGUobmFtZSk7XG4gICAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG4gIH0gZWxzZSB7XG4gICAgZGVsZXRlIGxvY2FsZXNbbmFtZV07XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTG9jYWxlKG5hbWUsIGNvbmZpZykge1xuICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICB2YXIgbG9jYWxlLFxuICAgICAgICB0bXBMb2NhbGUsXG4gICAgICAgIHBhcmVudENvbmZpZyA9IGJhc2VDb25maWc7XG5cbiAgICBpZiAobG9jYWxlc1tuYW1lXSAhPSBudWxsICYmIGxvY2FsZXNbbmFtZV0ucGFyZW50TG9jYWxlICE9IG51bGwpIHtcbiAgICAgIGxvY2FsZXNbbmFtZV0uc2V0KG1lcmdlQ29uZmlncyhsb2NhbGVzW25hbWVdLl9jb25maWcsIGNvbmZpZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0bXBMb2NhbGUgPSBsb2FkTG9jYWxlKG5hbWUpO1xuXG4gICAgICBpZiAodG1wTG9jYWxlICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50Q29uZmlnID0gdG1wTG9jYWxlLl9jb25maWc7XG4gICAgICB9XG5cbiAgICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsIGNvbmZpZyk7XG5cbiAgICAgIGlmICh0bXBMb2NhbGUgPT0gbnVsbCkge1xuICAgICAgICBjb25maWcuYWJiciA9IG5hbWU7XG4gICAgICB9XG5cbiAgICAgIGxvY2FsZSA9IG5ldyBMb2NhbGUoY29uZmlnKTtcbiAgICAgIGxvY2FsZS5wYXJlbnRMb2NhbGUgPSBsb2NhbGVzW25hbWVdO1xuICAgICAgbG9jYWxlc1tuYW1lXSA9IGxvY2FsZTtcbiAgICB9XG5cbiAgICBnZXRTZXRHbG9iYWxMb2NhbGUobmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgaWYgKGxvY2FsZXNbbmFtZV0ucGFyZW50TG9jYWxlICE9IG51bGwpIHtcbiAgICAgICAgbG9jYWxlc1tuYW1lXSA9IGxvY2FsZXNbbmFtZV0ucGFyZW50TG9jYWxlO1xuXG4gICAgICAgIGlmIChuYW1lID09PSBnZXRTZXRHbG9iYWxMb2NhbGUoKSkge1xuICAgICAgICAgIGdldFNldEdsb2JhbExvY2FsZShuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChsb2NhbGVzW25hbWVdICE9IG51bGwpIHtcbiAgICAgICAgZGVsZXRlIGxvY2FsZXNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG59XG5cbmZ1bmN0aW9uIGdldExvY2FsZShrZXkpIHtcbiAgdmFyIGxvY2FsZTtcblxuICBpZiAoa2V5ICYmIGtleS5fbG9jYWxlICYmIGtleS5fbG9jYWxlLl9hYmJyKSB7XG4gICAga2V5ID0ga2V5Ll9sb2NhbGUuX2FiYnI7XG4gIH1cblxuICBpZiAoIWtleSkge1xuICAgIHJldHVybiBnbG9iYWxMb2NhbGU7XG4gIH1cblxuICBpZiAoIWlzQXJyYXkoa2V5KSkge1xuICAgIGxvY2FsZSA9IGxvYWRMb2NhbGUoa2V5KTtcblxuICAgIGlmIChsb2NhbGUpIHtcbiAgICAgIHJldHVybiBsb2NhbGU7XG4gICAgfVxuXG4gICAga2V5ID0gW2tleV07XG4gIH1cblxuICByZXR1cm4gY2hvb3NlTG9jYWxlKGtleSk7XG59XG5cbmZ1bmN0aW9uIGxpc3RMb2NhbGVzKCkge1xuICByZXR1cm4ga2V5cyhsb2NhbGVzKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tPdmVyZmxvdyhtKSB7XG4gIHZhciBvdmVyZmxvdyxcbiAgICAgIGEgPSBtLl9hO1xuXG4gIGlmIChhICYmIGdldFBhcnNpbmdGbGFncyhtKS5vdmVyZmxvdyA9PT0gLTIpIHtcbiAgICBvdmVyZmxvdyA9IGFbTU9OVEhdIDwgMCB8fCBhW01PTlRIXSA+IDExID8gTU9OVEggOiBhW0RBVEVdIDwgMSB8fCBhW0RBVEVdID4gZGF5c0luTW9udGgoYVtZRUFSXSwgYVtNT05USF0pID8gREFURSA6IGFbSE9VUl0gPCAwIHx8IGFbSE9VUl0gPiAyNCB8fCBhW0hPVVJdID09PSAyNCAmJiAoYVtNSU5VVEVdICE9PSAwIHx8IGFbU0VDT05EXSAhPT0gMCB8fCBhW01JTExJU0VDT05EXSAhPT0gMCkgPyBIT1VSIDogYVtNSU5VVEVdIDwgMCB8fCBhW01JTlVURV0gPiA1OSA/IE1JTlVURSA6IGFbU0VDT05EXSA8IDAgfHwgYVtTRUNPTkRdID4gNTkgPyBTRUNPTkQgOiBhW01JTExJU0VDT05EXSA8IDAgfHwgYVtNSUxMSVNFQ09ORF0gPiA5OTkgPyBNSUxMSVNFQ09ORCA6IC0xO1xuXG4gICAgaWYgKGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dEYXlPZlllYXIgJiYgKG92ZXJmbG93IDwgWUVBUiB8fCBvdmVyZmxvdyA+IERBVEUpKSB7XG4gICAgICBvdmVyZmxvdyA9IERBVEU7XG4gICAgfVxuXG4gICAgaWYgKGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dXZWVrcyAmJiBvdmVyZmxvdyA9PT0gLTEpIHtcbiAgICAgIG92ZXJmbG93ID0gV0VFSztcbiAgICB9XG5cbiAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd1dlZWtkYXkgJiYgb3ZlcmZsb3cgPT09IC0xKSB7XG4gICAgICBvdmVyZmxvdyA9IFdFRUtEQVk7XG4gICAgfVxuXG4gICAgZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93ID0gb3ZlcmZsb3c7XG4gIH1cblxuICByZXR1cm4gbTtcbn1cblxudmFyIGV4dGVuZGVkSXNvUmVnZXggPSAvXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pLSg/OlxcZFxcZC1cXGRcXGR8V1xcZFxcZC1cXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkKSkoPzooVHwgKShcXGRcXGQoPzo6XFxkXFxkKD86OlxcZFxcZCg/OlsuLF1cXGQrKT8pPyk/KShbKy1dXFxkXFxkKD86Oj9cXGRcXGQpP3xcXHMqWik/KT8kLyxcbiAgICBiYXNpY0lzb1JlZ2V4ID0gL15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KSg/OlxcZFxcZFxcZFxcZHxXXFxkXFxkXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZHwpKSg/OihUfCApKFxcZFxcZCg/OlxcZFxcZCg/OlxcZFxcZCg/OlsuLF1cXGQrKT8pPyk/KShbKy1dXFxkXFxkKD86Oj9cXGRcXGQpP3xcXHMqWik/KT8kLyxcbiAgICB0elJlZ2V4ID0gL1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vLFxuICAgIGlzb0RhdGVzID0gW1snWVlZWVlZLU1NLUREJywgL1srLV1cXGR7Nn0tXFxkXFxkLVxcZFxcZC9dLCBbJ1lZWVktTU0tREQnLCAvXFxkezR9LVxcZFxcZC1cXGRcXGQvXSwgWydHR0dHLVtXXVdXLUUnLCAvXFxkezR9LVdcXGRcXGQtXFxkL10sIFsnR0dHRy1bV11XVycsIC9cXGR7NH0tV1xcZFxcZC8sIGZhbHNlXSwgWydZWVlZLURERCcsIC9cXGR7NH0tXFxkezN9L10sIFsnWVlZWS1NTScsIC9cXGR7NH0tXFxkXFxkLywgZmFsc2VdLCBbJ1lZWVlZWU1NREQnLCAvWystXVxcZHsxMH0vXSwgWydZWVlZTU1ERCcsIC9cXGR7OH0vXSwgWydHR0dHW1ddV1dFJywgL1xcZHs0fVdcXGR7M30vXSwgWydHR0dHW1ddV1cnLCAvXFxkezR9V1xcZHsyfS8sIGZhbHNlXSwgWydZWVlZREREJywgL1xcZHs3fS9dLCBbJ1lZWVlNTScsIC9cXGR7Nn0vLCBmYWxzZV0sIFsnWVlZWScsIC9cXGR7NH0vLCBmYWxzZV1dLFxuICAgIGlzb1RpbWVzID0gW1snSEg6bW06c3MuU1NTUycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZFxcLlxcZCsvXSwgWydISDptbTpzcyxTU1NTJywgL1xcZFxcZDpcXGRcXGQ6XFxkXFxkLFxcZCsvXSwgWydISDptbTpzcycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZC9dLCBbJ0hIOm1tJywgL1xcZFxcZDpcXGRcXGQvXSwgWydISG1tc3MuU1NTUycsIC9cXGRcXGRcXGRcXGRcXGRcXGRcXC5cXGQrL10sIFsnSEhtbXNzLFNTU1MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkLFxcZCsvXSwgWydISG1tc3MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkL10sIFsnSEhtbScsIC9cXGRcXGRcXGRcXGQvXSwgWydISCcsIC9cXGRcXGQvXV0sXG4gICAgYXNwTmV0SnNvblJlZ2V4ID0gL15cXC8/RGF0ZVxcKCgtP1xcZCspL2ksXG4gICAgcmZjMjgyMiA9IC9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksP1xccyk/KFxcZHsxLDJ9KVxccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylcXHMoXFxkezIsNH0pXFxzKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpP1xccyg/OihVVHxHTVR8W0VDTVBdW1NEXVQpfChbWnpdKXwoWystXVxcZHs0fSkpJC8sXG4gICAgb2JzT2Zmc2V0cyA9IHtcbiAgVVQ6IDAsXG4gIEdNVDogMCxcbiAgRURUOiAtNCAqIDYwLFxuICBFU1Q6IC01ICogNjAsXG4gIENEVDogLTUgKiA2MCxcbiAgQ1NUOiAtNiAqIDYwLFxuICBNRFQ6IC02ICogNjAsXG4gIE1TVDogLTcgKiA2MCxcbiAgUERUOiAtNyAqIDYwLFxuICBQU1Q6IC04ICogNjBcbn07XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21JU08oY29uZmlnKSB7XG4gIHZhciBpLFxuICAgICAgbCxcbiAgICAgIHN0cmluZyA9IGNvbmZpZy5faSxcbiAgICAgIG1hdGNoID0gZXh0ZW5kZWRJc29SZWdleC5leGVjKHN0cmluZykgfHwgYmFzaWNJc29SZWdleC5leGVjKHN0cmluZyksXG4gICAgICBhbGxvd1RpbWUsXG4gICAgICBkYXRlRm9ybWF0LFxuICAgICAgdGltZUZvcm1hdCxcbiAgICAgIHR6Rm9ybWF0O1xuXG4gIGlmIChtYXRjaCkge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmlzbyA9IHRydWU7XG5cbiAgICBmb3IgKGkgPSAwLCBsID0gaXNvRGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAoaXNvRGF0ZXNbaV1bMV0uZXhlYyhtYXRjaFsxXSkpIHtcbiAgICAgICAgZGF0ZUZvcm1hdCA9IGlzb0RhdGVzW2ldWzBdO1xuICAgICAgICBhbGxvd1RpbWUgPSBpc29EYXRlc1tpXVsyXSAhPT0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRlRm9ybWF0ID09IG51bGwpIHtcbiAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtYXRjaFszXSkge1xuICAgICAgZm9yIChpID0gMCwgbCA9IGlzb1RpbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoaXNvVGltZXNbaV1bMV0uZXhlYyhtYXRjaFszXSkpIHtcbiAgICAgICAgICB0aW1lRm9ybWF0ID0gKG1hdGNoWzJdIHx8ICcgJykgKyBpc29UaW1lc1tpXVswXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGltZUZvcm1hdCA9PSBudWxsKSB7XG4gICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFhbGxvd1RpbWUgJiYgdGltZUZvcm1hdCAhPSBudWxsKSB7XG4gICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobWF0Y2hbNF0pIHtcbiAgICAgIGlmICh0elJlZ2V4LmV4ZWMobWF0Y2hbNF0pKSB7XG4gICAgICAgIHR6Rm9ybWF0ID0gJ1onO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25maWcuX2YgPSBkYXRlRm9ybWF0ICsgKHRpbWVGb3JtYXQgfHwgJycpICsgKHR6Rm9ybWF0IHx8ICcnKTtcbiAgICBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdEZyb21SRkMyODIyU3RyaW5ncyh5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cikge1xuICB2YXIgcmVzdWx0ID0gW3VudHJ1bmNhdGVZZWFyKHllYXJTdHIpLCBkZWZhdWx0TG9jYWxlTW9udGhzU2hvcnQuaW5kZXhPZihtb250aFN0ciksIHBhcnNlSW50KGRheVN0ciwgMTApLCBwYXJzZUludChob3VyU3RyLCAxMCksIHBhcnNlSW50KG1pbnV0ZVN0ciwgMTApXTtcblxuICBpZiAoc2Vjb25kU3RyKSB7XG4gICAgcmVzdWx0LnB1c2gocGFyc2VJbnQoc2Vjb25kU3RyLCAxMCkpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gdW50cnVuY2F0ZVllYXIoeWVhclN0cikge1xuICB2YXIgeWVhciA9IHBhcnNlSW50KHllYXJTdHIsIDEwKTtcblxuICBpZiAoeWVhciA8PSA0OSkge1xuICAgIHJldHVybiAyMDAwICsgeWVhcjtcbiAgfSBlbHNlIGlmICh5ZWFyIDw9IDk5OSkge1xuICAgIHJldHVybiAxOTAwICsgeWVhcjtcbiAgfVxuXG4gIHJldHVybiB5ZWFyO1xufVxuXG5mdW5jdGlvbiBwcmVwcm9jZXNzUkZDMjgyMihzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoL1xcKFteKV0qXFwpfFtcXG5cXHRdL2csICcgJykucmVwbGFjZSgvKFxcc1xccyspL2csICcgJykucmVwbGFjZSgvXlxcc1xccyovLCAnJykucmVwbGFjZSgvXFxzXFxzKiQvLCAnJyk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrV2Vla2RheSh3ZWVrZGF5U3RyLCBwYXJzZWRJbnB1dCwgY29uZmlnKSB7XG4gIGlmICh3ZWVrZGF5U3RyKSB7XG4gICAgdmFyIHdlZWtkYXlQcm92aWRlZCA9IGRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0LmluZGV4T2Yod2Vla2RheVN0ciksXG4gICAgICAgIHdlZWtkYXlBY3R1YWwgPSBuZXcgRGF0ZShwYXJzZWRJbnB1dFswXSwgcGFyc2VkSW5wdXRbMV0sIHBhcnNlZElucHV0WzJdKS5nZXREYXkoKTtcblxuICAgIGlmICh3ZWVrZGF5UHJvdmlkZWQgIT09IHdlZWtkYXlBY3R1YWwpIHtcbiAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLndlZWtkYXlNaXNtYXRjaCA9IHRydWU7XG4gICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlT2Zmc2V0KG9ic09mZnNldCwgbWlsaXRhcnlPZmZzZXQsIG51bU9mZnNldCkge1xuICBpZiAob2JzT2Zmc2V0KSB7XG4gICAgcmV0dXJuIG9ic09mZnNldHNbb2JzT2Zmc2V0XTtcbiAgfSBlbHNlIGlmIChtaWxpdGFyeU9mZnNldCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2Uge1xuICAgIHZhciBobSA9IHBhcnNlSW50KG51bU9mZnNldCwgMTApLFxuICAgICAgICBtID0gaG0gJSAxMDAsXG4gICAgICAgIGggPSAoaG0gLSBtKSAvIDEwMDtcbiAgICByZXR1cm4gaCAqIDYwICsgbTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25maWdGcm9tUkZDMjgyMihjb25maWcpIHtcbiAgdmFyIG1hdGNoID0gcmZjMjgyMi5leGVjKHByZXByb2Nlc3NSRkMyODIyKGNvbmZpZy5faSkpLFxuICAgICAgcGFyc2VkQXJyYXk7XG5cbiAgaWYgKG1hdGNoKSB7XG4gICAgcGFyc2VkQXJyYXkgPSBleHRyYWN0RnJvbVJGQzI4MjJTdHJpbmdzKG1hdGNoWzRdLCBtYXRjaFszXSwgbWF0Y2hbMl0sIG1hdGNoWzVdLCBtYXRjaFs2XSwgbWF0Y2hbN10pO1xuXG4gICAgaWYgKCFjaGVja1dlZWtkYXkobWF0Y2hbMV0sIHBhcnNlZEFycmF5LCBjb25maWcpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uZmlnLl9hID0gcGFyc2VkQXJyYXk7XG4gICAgY29uZmlnLl90em0gPSBjYWxjdWxhdGVPZmZzZXQobWF0Y2hbOF0sIG1hdGNoWzldLCBtYXRjaFsxMF0pO1xuICAgIGNvbmZpZy5fZCA9IGNyZWF0ZVVUQ0RhdGUuYXBwbHkobnVsbCwgY29uZmlnLl9hKTtcblxuICAgIGNvbmZpZy5fZC5zZXRVVENNaW51dGVzKGNvbmZpZy5fZC5nZXRVVENNaW51dGVzKCkgLSBjb25maWcuX3R6bSk7XG5cbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5yZmMyODIyID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nKGNvbmZpZykge1xuICB2YXIgbWF0Y2hlZCA9IGFzcE5ldEpzb25SZWdleC5leGVjKGNvbmZpZy5faSk7XG5cbiAgaWYgKG1hdGNoZWQgIT09IG51bGwpIHtcbiAgICBjb25maWcuX2QgPSBuZXcgRGF0ZSgrbWF0Y2hlZFsxXSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uZmlnRnJvbUlTTyhjb25maWcpO1xuXG4gIGlmIChjb25maWcuX2lzVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgZGVsZXRlIGNvbmZpZy5faXNWYWxpZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25maWdGcm9tUkZDMjgyMihjb25maWcpO1xuXG4gIGlmIChjb25maWcuX2lzVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgZGVsZXRlIGNvbmZpZy5faXNWYWxpZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY29uZmlnLl9zdHJpY3QpIHtcbiAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO1xuICB9XG59XG5cbmhvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrID0gZGVwcmVjYXRlKCd2YWx1ZSBwcm92aWRlZCBpcyBub3QgaW4gYSByZWNvZ25pemVkIFJGQzI4MjIgb3IgSVNPIGZvcm1hdC4gbW9tZW50IGNvbnN0cnVjdGlvbiBmYWxscyBiYWNrIHRvIGpzIERhdGUoKSwgJyArICd3aGljaCBpcyBub3QgcmVsaWFibGUgYWNyb3NzIGFsbCBicm93c2VycyBhbmQgdmVyc2lvbnMuIE5vbiBSRkMyODIyL0lTTyBkYXRlIGZvcm1hdHMgYXJlICcgKyAnZGlzY291cmFnZWQuIFBsZWFzZSByZWZlciB0byBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2pzLWRhdGUvIGZvciBtb3JlIGluZm8uJywgZnVuY3Rpb24gKGNvbmZpZykge1xuICBjb25maWcuX2QgPSBuZXcgRGF0ZShjb25maWcuX2kgKyAoY29uZmlnLl91c2VVVEMgPyAnIFVUQycgOiAnJykpO1xufSk7XG5cbmZ1bmN0aW9uIGRlZmF1bHRzKGEsIGIsIGMpIHtcbiAgaWYgKGEgIT0gbnVsbCkge1xuICAgIHJldHVybiBhO1xuICB9XG5cbiAgaWYgKGIgIT0gbnVsbCkge1xuICAgIHJldHVybiBiO1xuICB9XG5cbiAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIGN1cnJlbnREYXRlQXJyYXkoY29uZmlnKSB7XG4gIHZhciBub3dWYWx1ZSA9IG5ldyBEYXRlKGhvb2tzLm5vdygpKTtcblxuICBpZiAoY29uZmlnLl91c2VVVEMpIHtcbiAgICByZXR1cm4gW25vd1ZhbHVlLmdldFVUQ0Z1bGxZZWFyKCksIG5vd1ZhbHVlLmdldFVUQ01vbnRoKCksIG5vd1ZhbHVlLmdldFVUQ0RhdGUoKV07XG4gIH1cblxuICByZXR1cm4gW25vd1ZhbHVlLmdldEZ1bGxZZWFyKCksIG5vd1ZhbHVlLmdldE1vbnRoKCksIG5vd1ZhbHVlLmdldERhdGUoKV07XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21BcnJheShjb25maWcpIHtcbiAgdmFyIGksXG4gICAgICBkYXRlLFxuICAgICAgaW5wdXQgPSBbXSxcbiAgICAgIGN1cnJlbnREYXRlLFxuICAgICAgZXhwZWN0ZWRXZWVrZGF5LFxuICAgICAgeWVhclRvVXNlO1xuXG4gIGlmIChjb25maWcuX2QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlQXJyYXkoY29uZmlnKTtcblxuICBpZiAoY29uZmlnLl93ICYmIGNvbmZpZy5fYVtEQVRFXSA9PSBudWxsICYmIGNvbmZpZy5fYVtNT05USF0gPT0gbnVsbCkge1xuICAgIGRheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5fZGF5T2ZZZWFyICE9IG51bGwpIHtcbiAgICB5ZWFyVG9Vc2UgPSBkZWZhdWx0cyhjb25maWcuX2FbWUVBUl0sIGN1cnJlbnREYXRlW1lFQVJdKTtcblxuICAgIGlmIChjb25maWcuX2RheU9mWWVhciA+IGRheXNJblllYXIoeWVhclRvVXNlKSB8fCBjb25maWcuX2RheU9mWWVhciA9PT0gMCkge1xuICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93RGF5T2ZZZWFyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBkYXRlID0gY3JlYXRlVVRDRGF0ZSh5ZWFyVG9Vc2UsIDAsIGNvbmZpZy5fZGF5T2ZZZWFyKTtcbiAgICBjb25maWcuX2FbTU9OVEhdID0gZGF0ZS5nZXRVVENNb250aCgpO1xuICAgIGNvbmZpZy5fYVtEQVRFXSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IDMgJiYgY29uZmlnLl9hW2ldID09IG51bGw7ICsraSkge1xuICAgIGNvbmZpZy5fYVtpXSA9IGlucHV0W2ldID0gY3VycmVudERhdGVbaV07XG4gIH1cblxuICBmb3IgKDsgaSA8IDc7IGkrKykge1xuICAgIGNvbmZpZy5fYVtpXSA9IGlucHV0W2ldID0gY29uZmlnLl9hW2ldID09IG51bGwgPyBpID09PSAyID8gMSA6IDAgOiBjb25maWcuX2FbaV07XG4gIH1cblxuICBpZiAoY29uZmlnLl9hW0hPVVJdID09PSAyNCAmJiBjb25maWcuX2FbTUlOVVRFXSA9PT0gMCAmJiBjb25maWcuX2FbU0VDT05EXSA9PT0gMCAmJiBjb25maWcuX2FbTUlMTElTRUNPTkRdID09PSAwKSB7XG4gICAgY29uZmlnLl9uZXh0RGF5ID0gdHJ1ZTtcbiAgICBjb25maWcuX2FbSE9VUl0gPSAwO1xuICB9XG5cbiAgY29uZmlnLl9kID0gKGNvbmZpZy5fdXNlVVRDID8gY3JlYXRlVVRDRGF0ZSA6IGNyZWF0ZURhdGUpLmFwcGx5KG51bGwsIGlucHV0KTtcbiAgZXhwZWN0ZWRXZWVrZGF5ID0gY29uZmlnLl91c2VVVEMgPyBjb25maWcuX2QuZ2V0VVRDRGF5KCkgOiBjb25maWcuX2QuZ2V0RGF5KCk7XG5cbiAgaWYgKGNvbmZpZy5fdHptICE9IG51bGwpIHtcbiAgICBjb25maWcuX2Quc2V0VVRDTWludXRlcyhjb25maWcuX2QuZ2V0VVRDTWludXRlcygpIC0gY29uZmlnLl90em0pO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5fbmV4dERheSkge1xuICAgIGNvbmZpZy5fYVtIT1VSXSA9IDI0O1xuICB9XG5cbiAgaWYgKGNvbmZpZy5fdyAmJiB0eXBlb2YgY29uZmlnLl93LmQgIT09ICd1bmRlZmluZWQnICYmIGNvbmZpZy5fdy5kICE9PSBleHBlY3RlZFdlZWtkYXkpIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS53ZWVrZGF5TWlzbWF0Y2ggPSB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpIHtcbiAgdmFyIHcsIHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSwgdGVtcCwgd2Vla2RheU92ZXJmbG93LCBjdXJXZWVrO1xuICB3ID0gY29uZmlnLl93O1xuXG4gIGlmICh3LkdHICE9IG51bGwgfHwgdy5XICE9IG51bGwgfHwgdy5FICE9IG51bGwpIHtcbiAgICBkb3cgPSAxO1xuICAgIGRveSA9IDQ7XG4gICAgd2Vla1llYXIgPSBkZWZhdWx0cyh3LkdHLCBjb25maWcuX2FbWUVBUl0sIHdlZWtPZlllYXIoY3JlYXRlTG9jYWwoKSwgMSwgNCkueWVhcik7XG4gICAgd2VlayA9IGRlZmF1bHRzKHcuVywgMSk7XG4gICAgd2Vla2RheSA9IGRlZmF1bHRzKHcuRSwgMSk7XG5cbiAgICBpZiAod2Vla2RheSA8IDEgfHwgd2Vla2RheSA+IDcpIHtcbiAgICAgIHdlZWtkYXlPdmVyZmxvdyA9IHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRvdyA9IGNvbmZpZy5fbG9jYWxlLl93ZWVrLmRvdztcbiAgICBkb3kgPSBjb25maWcuX2xvY2FsZS5fd2Vlay5kb3k7XG4gICAgY3VyV2VlayA9IHdlZWtPZlllYXIoY3JlYXRlTG9jYWwoKSwgZG93LCBkb3kpO1xuICAgIHdlZWtZZWFyID0gZGVmYXVsdHMody5nZywgY29uZmlnLl9hW1lFQVJdLCBjdXJXZWVrLnllYXIpO1xuICAgIHdlZWsgPSBkZWZhdWx0cyh3LncsIGN1cldlZWsud2Vlayk7XG5cbiAgICBpZiAody5kICE9IG51bGwpIHtcbiAgICAgIHdlZWtkYXkgPSB3LmQ7XG5cbiAgICAgIGlmICh3ZWVrZGF5IDwgMCB8fCB3ZWVrZGF5ID4gNikge1xuICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAody5lICE9IG51bGwpIHtcbiAgICAgIHdlZWtkYXkgPSB3LmUgKyBkb3c7XG5cbiAgICAgIGlmICh3LmUgPCAwIHx8IHcuZSA+IDYpIHtcbiAgICAgICAgd2Vla2RheU92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2Vla2RheSA9IGRvdztcbiAgICB9XG4gIH1cblxuICBpZiAod2VlayA8IDEgfHwgd2VlayA+IHdlZWtzSW5ZZWFyKHdlZWtZZWFyLCBkb3csIGRveSkpIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrcyA9IHRydWU7XG4gIH0gZWxzZSBpZiAod2Vla2RheU92ZXJmbG93ICE9IG51bGwpIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrZGF5ID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wID0gZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSk7XG4gICAgY29uZmlnLl9hW1lFQVJdID0gdGVtcC55ZWFyO1xuICAgIGNvbmZpZy5fZGF5T2ZZZWFyID0gdGVtcC5kYXlPZlllYXI7XG4gIH1cbn1cblxuaG9va3MuSVNPXzg2MDEgPSBmdW5jdGlvbiAoKSB7fTtcblxuaG9va3MuUkZDXzI4MjIgPSBmdW5jdGlvbiAoKSB7fTtcblxuZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5fZiA9PT0gaG9va3MuSVNPXzg2MDEpIHtcbiAgICBjb25maWdGcm9tSVNPKGNvbmZpZyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5fZiA9PT0gaG9va3MuUkZDXzI4MjIpIHtcbiAgICBjb25maWdGcm9tUkZDMjgyMihjb25maWcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbmZpZy5fYSA9IFtdO1xuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lbXB0eSA9IHRydWU7XG4gIHZhciBzdHJpbmcgPSAnJyArIGNvbmZpZy5faSxcbiAgICAgIGksXG4gICAgICBwYXJzZWRJbnB1dCxcbiAgICAgIHRva2VucyxcbiAgICAgIHRva2VuLFxuICAgICAgc2tpcHBlZCxcbiAgICAgIHN0cmluZ0xlbmd0aCA9IHN0cmluZy5sZW5ndGgsXG4gICAgICB0b3RhbFBhcnNlZElucHV0TGVuZ3RoID0gMCxcbiAgICAgIGVyYTtcbiAgdG9rZW5zID0gZXhwYW5kRm9ybWF0KGNvbmZpZy5fZiwgY29uZmlnLl9sb2NhbGUpLm1hdGNoKGZvcm1hdHRpbmdUb2tlbnMpIHx8IFtdO1xuXG4gIGZvciAoaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICBwYXJzZWRJbnB1dCA9IChzdHJpbmcubWF0Y2goZ2V0UGFyc2VSZWdleEZvclRva2VuKHRva2VuLCBjb25maWcpKSB8fCBbXSlbMF07XG5cbiAgICBpZiAocGFyc2VkSW5wdXQpIHtcbiAgICAgIHNraXBwZWQgPSBzdHJpbmcuc3Vic3RyKDAsIHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSk7XG5cbiAgICAgIGlmIChza2lwcGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChza2lwcGVkKTtcbiAgICAgIH1cblxuICAgICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSArIHBhcnNlZElucHV0Lmxlbmd0aCk7XG4gICAgICB0b3RhbFBhcnNlZElucHV0TGVuZ3RoICs9IHBhcnNlZElucHV0Lmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dKSB7XG4gICAgICBpZiAocGFyc2VkSW5wdXQpIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZW1wdHkgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgIH1cblxuICAgICAgYWRkVGltZVRvQXJyYXlGcm9tVG9rZW4odG9rZW4sIHBhcnNlZElucHV0LCBjb25maWcpO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLl9zdHJpY3QgJiYgIXBhcnNlZElucHV0KSB7XG4gICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRUb2tlbnMucHVzaCh0b2tlbik7XG4gICAgfVxuICB9XG5cbiAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuY2hhcnNMZWZ0T3ZlciA9IHN0cmluZ0xlbmd0aCAtIHRvdGFsUGFyc2VkSW5wdXRMZW5ndGg7XG5cbiAgaWYgKHN0cmluZy5sZW5ndGggPiAwKSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChzdHJpbmcpO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5fYVtIT1VSXSA8PSAxMiAmJiBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID09PSB0cnVlICYmIGNvbmZpZy5fYVtIT1VSXSA+IDApIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykucGFyc2VkRGF0ZVBhcnRzID0gY29uZmlnLl9hLnNsaWNlKDApO1xuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5tZXJpZGllbSA9IGNvbmZpZy5fbWVyaWRpZW07XG4gIGNvbmZpZy5fYVtIT1VSXSA9IG1lcmlkaWVtRml4V3JhcChjb25maWcuX2xvY2FsZSwgY29uZmlnLl9hW0hPVVJdLCBjb25maWcuX21lcmlkaWVtKTtcbiAgZXJhID0gZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZXJhO1xuXG4gIGlmIChlcmEgIT09IG51bGwpIHtcbiAgICBjb25maWcuX2FbWUVBUl0gPSBjb25maWcuX2xvY2FsZS5lcmFzQ29udmVydFllYXIoZXJhLCBjb25maWcuX2FbWUVBUl0pO1xuICB9XG5cbiAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG4gIGNoZWNrT3ZlcmZsb3coY29uZmlnKTtcbn1cblxuZnVuY3Rpb24gbWVyaWRpZW1GaXhXcmFwKGxvY2FsZSwgaG91ciwgbWVyaWRpZW0pIHtcbiAgdmFyIGlzUG07XG5cbiAgaWYgKG1lcmlkaWVtID09IG51bGwpIHtcbiAgICByZXR1cm4gaG91cjtcbiAgfVxuXG4gIGlmIChsb2NhbGUubWVyaWRpZW1Ib3VyICE9IG51bGwpIHtcbiAgICByZXR1cm4gbG9jYWxlLm1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSk7XG4gIH0gZWxzZSBpZiAobG9jYWxlLmlzUE0gIT0gbnVsbCkge1xuICAgIGlzUG0gPSBsb2NhbGUuaXNQTShtZXJpZGllbSk7XG5cbiAgICBpZiAoaXNQbSAmJiBob3VyIDwgMTIpIHtcbiAgICAgIGhvdXIgKz0gMTI7XG4gICAgfVxuXG4gICAgaWYgKCFpc1BtICYmIGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gaG91cjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaG91cjtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kQXJyYXkoY29uZmlnKSB7XG4gIHZhciB0ZW1wQ29uZmlnLFxuICAgICAgYmVzdE1vbWVudCxcbiAgICAgIHNjb3JlVG9CZWF0LFxuICAgICAgaSxcbiAgICAgIGN1cnJlbnRTY29yZSxcbiAgICAgIHZhbGlkRm9ybWF0Rm91bmQsXG4gICAgICBiZXN0Rm9ybWF0SXNWYWxpZCA9IGZhbHNlO1xuXG4gIGlmIChjb25maWcuX2YubGVuZ3RoID09PSAwKSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZEZvcm1hdCA9IHRydWU7XG4gICAgY29uZmlnLl9kID0gbmV3IERhdGUoTmFOKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgY29uZmlnLl9mLmxlbmd0aDsgaSsrKSB7XG4gICAgY3VycmVudFNjb3JlID0gMDtcbiAgICB2YWxpZEZvcm1hdEZvdW5kID0gZmFsc2U7XG4gICAgdGVtcENvbmZpZyA9IGNvcHlDb25maWcoe30sIGNvbmZpZyk7XG5cbiAgICBpZiAoY29uZmlnLl91c2VVVEMgIT0gbnVsbCkge1xuICAgICAgdGVtcENvbmZpZy5fdXNlVVRDID0gY29uZmlnLl91c2VVVEM7XG4gICAgfVxuXG4gICAgdGVtcENvbmZpZy5fZiA9IGNvbmZpZy5fZltpXTtcbiAgICBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KHRlbXBDb25maWcpO1xuXG4gICAgaWYgKGlzVmFsaWQodGVtcENvbmZpZykpIHtcbiAgICAgIHZhbGlkRm9ybWF0Rm91bmQgPSB0cnVlO1xuICAgIH1cblxuICAgIGN1cnJlbnRTY29yZSArPSBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuY2hhcnNMZWZ0T3ZlcjtcbiAgICBjdXJyZW50U2NvcmUgKz0gZ2V0UGFyc2luZ0ZsYWdzKHRlbXBDb25maWcpLnVudXNlZFRva2Vucy5sZW5ndGggKiAxMDtcbiAgICBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuc2NvcmUgPSBjdXJyZW50U2NvcmU7XG5cbiAgICBpZiAoIWJlc3RGb3JtYXRJc1ZhbGlkKSB7XG4gICAgICBpZiAoc2NvcmVUb0JlYXQgPT0gbnVsbCB8fCBjdXJyZW50U2NvcmUgPCBzY29yZVRvQmVhdCB8fCB2YWxpZEZvcm1hdEZvdW5kKSB7XG4gICAgICAgIHNjb3JlVG9CZWF0ID0gY3VycmVudFNjb3JlO1xuICAgICAgICBiZXN0TW9tZW50ID0gdGVtcENvbmZpZztcblxuICAgICAgICBpZiAodmFsaWRGb3JtYXRGb3VuZCkge1xuICAgICAgICAgIGJlc3RGb3JtYXRJc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY3VycmVudFNjb3JlIDwgc2NvcmVUb0JlYXQpIHtcbiAgICAgICAgc2NvcmVUb0JlYXQgPSBjdXJyZW50U2NvcmU7XG4gICAgICAgIGJlc3RNb21lbnQgPSB0ZW1wQ29uZmlnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGV4dGVuZChjb25maWcsIGJlc3RNb21lbnQgfHwgdGVtcENvbmZpZyk7XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21PYmplY3QoY29uZmlnKSB7XG4gIGlmIChjb25maWcuX2QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaSA9IG5vcm1hbGl6ZU9iamVjdFVuaXRzKGNvbmZpZy5faSksXG4gICAgICBkYXlPckRhdGUgPSBpLmRheSA9PT0gdW5kZWZpbmVkID8gaS5kYXRlIDogaS5kYXk7XG4gIGNvbmZpZy5fYSA9IG1hcChbaS55ZWFyLCBpLm1vbnRoLCBkYXlPckRhdGUsIGkuaG91ciwgaS5taW51dGUsIGkuc2Vjb25kLCBpLm1pbGxpc2Vjb25kXSwgZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgcGFyc2VJbnQob2JqLCAxMCk7XG4gIH0pO1xuICBjb25maWdGcm9tQXJyYXkoY29uZmlnKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJvbUNvbmZpZyhjb25maWcpIHtcbiAgdmFyIHJlcyA9IG5ldyBNb21lbnQoY2hlY2tPdmVyZmxvdyhwcmVwYXJlQ29uZmlnKGNvbmZpZykpKTtcblxuICBpZiAocmVzLl9uZXh0RGF5KSB7XG4gICAgcmVzLmFkZCgxLCAnZCcpO1xuICAgIHJlcy5fbmV4dERheSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVDb25maWcoY29uZmlnKSB7XG4gIHZhciBpbnB1dCA9IGNvbmZpZy5faSxcbiAgICAgIGZvcm1hdCA9IGNvbmZpZy5fZjtcbiAgY29uZmlnLl9sb2NhbGUgPSBjb25maWcuX2xvY2FsZSB8fCBnZXRMb2NhbGUoY29uZmlnLl9sKTtcblxuICBpZiAoaW5wdXQgPT09IG51bGwgfHwgZm9ybWF0ID09PSB1bmRlZmluZWQgJiYgaW5wdXQgPT09ICcnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUludmFsaWQoe1xuICAgICAgbnVsbElucHV0OiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZy5faSA9IGlucHV0ID0gY29uZmlnLl9sb2NhbGUucHJlcGFyc2UoaW5wdXQpO1xuICB9XG5cbiAgaWYgKGlzTW9tZW50KGlucHV0KSkge1xuICAgIHJldHVybiBuZXcgTW9tZW50KGNoZWNrT3ZlcmZsb3coaW5wdXQpKTtcbiAgfSBlbHNlIGlmIChpc0RhdGUoaW5wdXQpKSB7XG4gICAgY29uZmlnLl9kID0gaW5wdXQ7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShmb3JtYXQpKSB7XG4gICAgY29uZmlnRnJvbVN0cmluZ0FuZEFycmF5KGNvbmZpZyk7XG4gIH0gZWxzZSBpZiAoZm9ybWF0KSB7XG4gICAgY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZ0Zyb21JbnB1dChjb25maWcpO1xuICB9XG5cbiAgaWYgKCFpc1ZhbGlkKGNvbmZpZykpIHtcbiAgICBjb25maWcuX2QgPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuZnVuY3Rpb24gY29uZmlnRnJvbUlucHV0KGNvbmZpZykge1xuICB2YXIgaW5wdXQgPSBjb25maWcuX2k7XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGlucHV0KSkge1xuICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGhvb2tzLm5vdygpKTtcbiAgfSBlbHNlIGlmIChpc0RhdGUoaW5wdXQpKSB7XG4gICAgY29uZmlnLl9kID0gbmV3IERhdGUoaW5wdXQudmFsdWVPZigpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uZmlnRnJvbVN0cmluZyhjb25maWcpO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgY29uZmlnLl9hID0gbWFwKGlucHV0LnNsaWNlKDApLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQob2JqLCAxMCk7XG4gICAgfSk7XG4gICAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaW5wdXQpKSB7XG4gICAgY29uZmlnRnJvbU9iamVjdChjb25maWcpO1xuICB9IGVsc2UgaWYgKGlzTnVtYmVyKGlucHV0KSkge1xuICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGlucHV0KTtcbiAgfSBlbHNlIHtcbiAgICBob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIGlzVVRDKSB7XG4gIHZhciBjID0ge307XG5cbiAgaWYgKGZvcm1hdCA9PT0gdHJ1ZSB8fCBmb3JtYXQgPT09IGZhbHNlKSB7XG4gICAgc3RyaWN0ID0gZm9ybWF0O1xuICAgIGZvcm1hdCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChsb2NhbGUgPT09IHRydWUgfHwgbG9jYWxlID09PSBmYWxzZSkge1xuICAgIHN0cmljdCA9IGxvY2FsZTtcbiAgICBsb2NhbGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoaXNPYmplY3QoaW5wdXQpICYmIGlzT2JqZWN0RW1wdHkoaW5wdXQpIHx8IGlzQXJyYXkoaW5wdXQpICYmIGlucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgIGlucHV0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgYy5faXNBTW9tZW50T2JqZWN0ID0gdHJ1ZTtcbiAgYy5fdXNlVVRDID0gYy5faXNVVEMgPSBpc1VUQztcbiAgYy5fbCA9IGxvY2FsZTtcbiAgYy5faSA9IGlucHV0O1xuICBjLl9mID0gZm9ybWF0O1xuICBjLl9zdHJpY3QgPSBzdHJpY3Q7XG4gIHJldHVybiBjcmVhdGVGcm9tQ29uZmlnKGMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2NhbChpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCkge1xuICByZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCwgZmFsc2UpO1xufVxuXG52YXIgcHJvdG90eXBlTWluID0gZGVwcmVjYXRlKCdtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4LycsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIG90aGVyID0gY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblxuICBpZiAodGhpcy5pc1ZhbGlkKCkgJiYgb3RoZXIuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIG90aGVyIDwgdGhpcyA/IHRoaXMgOiBvdGhlcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY3JlYXRlSW52YWxpZCgpO1xuICB9XG59KSxcbiAgICBwcm90b3R5cGVNYXggPSBkZXByZWNhdGUoJ21vbWVudCgpLm1heCBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1pbiBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvJywgZnVuY3Rpb24gKCkge1xuICB2YXIgb3RoZXIgPSBjcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXG4gIGlmICh0aGlzLmlzVmFsaWQoKSAmJiBvdGhlci5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gb3RoZXIgPiB0aGlzID8gdGhpcyA6IG90aGVyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVJbnZhbGlkKCk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBwaWNrQnkoZm4sIG1vbWVudHMpIHtcbiAgdmFyIHJlcywgaTtcblxuICBpZiAobW9tZW50cy5sZW5ndGggPT09IDEgJiYgaXNBcnJheShtb21lbnRzWzBdKSkge1xuICAgIG1vbWVudHMgPSBtb21lbnRzWzBdO1xuICB9XG5cbiAgaWYgKCFtb21lbnRzLmxlbmd0aCkge1xuICAgIHJldHVybiBjcmVhdGVMb2NhbCgpO1xuICB9XG5cbiAgcmVzID0gbW9tZW50c1swXTtcblxuICBmb3IgKGkgPSAxOyBpIDwgbW9tZW50cy5sZW5ndGg7ICsraSkge1xuICAgIGlmICghbW9tZW50c1tpXS5pc1ZhbGlkKCkgfHwgbW9tZW50c1tpXVtmbl0ocmVzKSkge1xuICAgICAgcmVzID0gbW9tZW50c1tpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBtaW4oKSB7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICByZXR1cm4gcGlja0J5KCdpc0JlZm9yZScsIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBtYXgoKSB7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICByZXR1cm4gcGlja0J5KCdpc0FmdGVyJywgYXJncyk7XG59XG5cbnZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBEYXRlLm5vdyA/IERhdGUubm93KCkgOiArbmV3IERhdGUoKTtcbn07XG5cbnZhciBvcmRlcmluZyA9IFsneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsICdtaWxsaXNlY29uZCddO1xuXG5mdW5jdGlvbiBpc0R1cmF0aW9uVmFsaWQobSkge1xuICB2YXIga2V5LFxuICAgICAgdW5pdEhhc0RlY2ltYWwgPSBmYWxzZSxcbiAgICAgIGk7XG5cbiAgZm9yIChrZXkgaW4gbSkge1xuICAgIGlmIChoYXNPd25Qcm9wKG0sIGtleSkgJiYgIShpbmRleE9mLmNhbGwob3JkZXJpbmcsIGtleSkgIT09IC0xICYmIChtW2tleV0gPT0gbnVsbCB8fCAhaXNOYU4obVtrZXldKSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IG9yZGVyaW5nLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG1bb3JkZXJpbmdbaV1dKSB7XG4gICAgICBpZiAodW5pdEhhc0RlY2ltYWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VGbG9hdChtW29yZGVyaW5nW2ldXSkgIT09IHRvSW50KG1bb3JkZXJpbmdbaV1dKSkge1xuICAgICAgICB1bml0SGFzRGVjaW1hbCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWQkMSgpIHtcbiAgcmV0dXJuIHRoaXMuX2lzVmFsaWQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUludmFsaWQkMSgpIHtcbiAgcmV0dXJuIGNyZWF0ZUR1cmF0aW9uKE5hTik7XG59XG5cbmZ1bmN0aW9uIER1cmF0aW9uKGR1cmF0aW9uKSB7XG4gIHZhciBub3JtYWxpemVkSW5wdXQgPSBub3JtYWxpemVPYmplY3RVbml0cyhkdXJhdGlvbiksXG4gICAgICB5ZWFycyA9IG5vcm1hbGl6ZWRJbnB1dC55ZWFyIHx8IDAsXG4gICAgICBxdWFydGVycyA9IG5vcm1hbGl6ZWRJbnB1dC5xdWFydGVyIHx8IDAsXG4gICAgICBtb250aHMgPSBub3JtYWxpemVkSW5wdXQubW9udGggfHwgMCxcbiAgICAgIHdlZWtzID0gbm9ybWFsaXplZElucHV0LndlZWsgfHwgbm9ybWFsaXplZElucHV0Lmlzb1dlZWsgfHwgMCxcbiAgICAgIGRheXMgPSBub3JtYWxpemVkSW5wdXQuZGF5IHx8IDAsXG4gICAgICBob3VycyA9IG5vcm1hbGl6ZWRJbnB1dC5ob3VyIHx8IDAsXG4gICAgICBtaW51dGVzID0gbm9ybWFsaXplZElucHV0Lm1pbnV0ZSB8fCAwLFxuICAgICAgc2Vjb25kcyA9IG5vcm1hbGl6ZWRJbnB1dC5zZWNvbmQgfHwgMCxcbiAgICAgIG1pbGxpc2Vjb25kcyA9IG5vcm1hbGl6ZWRJbnB1dC5taWxsaXNlY29uZCB8fCAwO1xuICB0aGlzLl9pc1ZhbGlkID0gaXNEdXJhdGlvblZhbGlkKG5vcm1hbGl6ZWRJbnB1dCk7XG4gIHRoaXMuX21pbGxpc2Vjb25kcyA9ICttaWxsaXNlY29uZHMgKyBzZWNvbmRzICogMWUzICsgbWludXRlcyAqIDZlNCArIGhvdXJzICogMTAwMCAqIDYwICogNjA7XG4gIHRoaXMuX2RheXMgPSArZGF5cyArIHdlZWtzICogNztcbiAgdGhpcy5fbW9udGhzID0gK21vbnRocyArIHF1YXJ0ZXJzICogMyArIHllYXJzICogMTI7XG4gIHRoaXMuX2RhdGEgPSB7fTtcbiAgdGhpcy5fbG9jYWxlID0gZ2V0TG9jYWxlKCk7XG5cbiAgdGhpcy5fYnViYmxlKCk7XG59XG5cbmZ1bmN0aW9uIGlzRHVyYXRpb24ob2JqKSB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiBEdXJhdGlvbjtcbn1cblxuZnVuY3Rpb24gYWJzUm91bmQobnVtYmVyKSB7XG4gIGlmIChudW1iZXIgPCAwKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoLTEgKiBudW1iZXIpICogLTE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycmF5MSwgYXJyYXkyLCBkb250Q29udmVydCkge1xuICB2YXIgbGVuID0gTWF0aC5taW4oYXJyYXkxLmxlbmd0aCwgYXJyYXkyLmxlbmd0aCksXG4gICAgICBsZW5ndGhEaWZmID0gTWF0aC5hYnMoYXJyYXkxLmxlbmd0aCAtIGFycmF5Mi5sZW5ndGgpLFxuICAgICAgZGlmZnMgPSAwLFxuICAgICAgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZG9udENvbnZlcnQgJiYgYXJyYXkxW2ldICE9PSBhcnJheTJbaV0gfHwgIWRvbnRDb252ZXJ0ICYmIHRvSW50KGFycmF5MVtpXSkgIT09IHRvSW50KGFycmF5MltpXSkpIHtcbiAgICAgIGRpZmZzKys7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRpZmZzICsgbGVuZ3RoRGlmZjtcbn1cblxuZnVuY3Rpb24gb2Zmc2V0KHRva2VuLCBzZXBhcmF0b3IpIHtcbiAgYWRkRm9ybWF0VG9rZW4odG9rZW4sIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2Zmc2V0ID0gdGhpcy51dGNPZmZzZXQoKSxcbiAgICAgICAgc2lnbiA9ICcrJztcblxuICAgIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgICBvZmZzZXQgPSAtb2Zmc2V0O1xuICAgICAgc2lnbiA9ICctJztcbiAgICB9XG5cbiAgICByZXR1cm4gc2lnbiArIHplcm9GaWxsKH5+KG9mZnNldCAvIDYwKSwgMikgKyBzZXBhcmF0b3IgKyB6ZXJvRmlsbCh+fm9mZnNldCAlIDYwLCAyKTtcbiAgfSk7XG59XG5cbm9mZnNldCgnWicsICc6Jyk7XG5vZmZzZXQoJ1paJywgJycpO1xuYWRkUmVnZXhUb2tlbignWicsIG1hdGNoU2hvcnRPZmZzZXQpO1xuYWRkUmVnZXhUb2tlbignWlonLCBtYXRjaFNob3J0T2Zmc2V0KTtcbmFkZFBhcnNlVG9rZW4oWydaJywgJ1paJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICBjb25maWcuX3VzZVVUQyA9IHRydWU7XG4gIGNvbmZpZy5fdHptID0gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LCBpbnB1dCk7XG59KTtcbnZhciBjaHVua09mZnNldCA9IC8oW1xcK1xcLV18XFxkXFxkKS9naTtcblxuZnVuY3Rpb24gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaGVyLCBzdHJpbmcpIHtcbiAgdmFyIG1hdGNoZXMgPSAoc3RyaW5nIHx8ICcnKS5tYXRjaChtYXRjaGVyKSxcbiAgICAgIGNodW5rLFxuICAgICAgcGFydHMsXG4gICAgICBtaW51dGVzO1xuXG4gIGlmIChtYXRjaGVzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjaHVuayA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXSB8fCBbXTtcbiAgcGFydHMgPSAoY2h1bmsgKyAnJykubWF0Y2goY2h1bmtPZmZzZXQpIHx8IFsnLScsIDAsIDBdO1xuICBtaW51dGVzID0gKyhwYXJ0c1sxXSAqIDYwKSArIHRvSW50KHBhcnRzWzJdKTtcbiAgcmV0dXJuIG1pbnV0ZXMgPT09IDAgPyAwIDogcGFydHNbMF0gPT09ICcrJyA/IG1pbnV0ZXMgOiAtbWludXRlcztcbn1cblxuZnVuY3Rpb24gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LCBtb2RlbCkge1xuICB2YXIgcmVzLCBkaWZmO1xuXG4gIGlmIChtb2RlbC5faXNVVEMpIHtcbiAgICByZXMgPSBtb2RlbC5jbG9uZSgpO1xuICAgIGRpZmYgPSAoaXNNb21lbnQoaW5wdXQpIHx8IGlzRGF0ZShpbnB1dCkgPyBpbnB1dC52YWx1ZU9mKCkgOiBjcmVhdGVMb2NhbChpbnB1dCkudmFsdWVPZigpKSAtIHJlcy52YWx1ZU9mKCk7XG5cbiAgICByZXMuX2Quc2V0VGltZShyZXMuX2QudmFsdWVPZigpICsgZGlmZik7XG5cbiAgICBob29rcy51cGRhdGVPZmZzZXQocmVzLCBmYWxzZSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY3JlYXRlTG9jYWwoaW5wdXQpLmxvY2FsKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGF0ZU9mZnNldChtKSB7XG4gIHJldHVybiAtTWF0aC5yb3VuZChtLl9kLmdldFRpbWV6b25lT2Zmc2V0KCkpO1xufVxuXG5ob29rcy51cGRhdGVPZmZzZXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuZnVuY3Rpb24gZ2V0U2V0T2Zmc2V0KGlucHV0LCBrZWVwTG9jYWxUaW1lLCBrZWVwTWludXRlcykge1xuICB2YXIgb2Zmc2V0ID0gdGhpcy5fb2Zmc2V0IHx8IDAsXG4gICAgICBsb2NhbEFkanVzdDtcblxuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICB9XG5cbiAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgaW5wdXQgPSBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoU2hvcnRPZmZzZXQsIGlucHV0KTtcblxuICAgICAgaWYgKGlucHV0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoaW5wdXQpIDwgMTYgJiYgIWtlZXBNaW51dGVzKSB7XG4gICAgICBpbnB1dCA9IGlucHV0ICogNjA7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9pc1VUQyAmJiBrZWVwTG9jYWxUaW1lKSB7XG4gICAgICBsb2NhbEFkanVzdCA9IGdldERhdGVPZmZzZXQodGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5fb2Zmc2V0ID0gaW5wdXQ7XG4gICAgdGhpcy5faXNVVEMgPSB0cnVlO1xuXG4gICAgaWYgKGxvY2FsQWRqdXN0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuYWRkKGxvY2FsQWRqdXN0LCAnbScpO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgIT09IGlucHV0KSB7XG4gICAgICBpZiAoIWtlZXBMb2NhbFRpbWUgfHwgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcykge1xuICAgICAgICBhZGRTdWJ0cmFjdCh0aGlzLCBjcmVhdGVEdXJhdGlvbihpbnB1dCAtIG9mZnNldCwgJ20nKSwgMSwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcykge1xuICAgICAgICB0aGlzLl9jaGFuZ2VJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICAgICAgICB0aGlzLl9jaGFuZ2VJblByb2dyZXNzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5faXNVVEMgPyBvZmZzZXQgOiBnZXREYXRlT2Zmc2V0KHRoaXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFNldFpvbmUoaW5wdXQsIGtlZXBMb2NhbFRpbWUpIHtcbiAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgICAgaW5wdXQgPSAtaW5wdXQ7XG4gICAgfVxuXG4gICAgdGhpcy51dGNPZmZzZXQoaW5wdXQsIGtlZXBMb2NhbFRpbWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAtdGhpcy51dGNPZmZzZXQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRPZmZzZXRUb1VUQyhrZWVwTG9jYWxUaW1lKSB7XG4gIHJldHVybiB0aGlzLnV0Y09mZnNldCgwLCBrZWVwTG9jYWxUaW1lKTtcbn1cblxuZnVuY3Rpb24gc2V0T2Zmc2V0VG9Mb2NhbChrZWVwTG9jYWxUaW1lKSB7XG4gIGlmICh0aGlzLl9pc1VUQykge1xuICAgIHRoaXMudXRjT2Zmc2V0KDAsIGtlZXBMb2NhbFRpbWUpO1xuICAgIHRoaXMuX2lzVVRDID0gZmFsc2U7XG5cbiAgICBpZiAoa2VlcExvY2FsVGltZSkge1xuICAgICAgdGhpcy5zdWJ0cmFjdChnZXREYXRlT2Zmc2V0KHRoaXMpLCAnbScpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBzZXRPZmZzZXRUb1BhcnNlZE9mZnNldCgpIHtcbiAgaWYgKHRoaXMuX3R6bSAhPSBudWxsKSB7XG4gICAgdGhpcy51dGNPZmZzZXQodGhpcy5fdHptLCBmYWxzZSwgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuX2kgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHRab25lID0gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaE9mZnNldCwgdGhpcy5faSk7XG5cbiAgICBpZiAodFpvbmUgIT0gbnVsbCkge1xuICAgICAgdGhpcy51dGNPZmZzZXQodFpvbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnV0Y09mZnNldCgwLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gaGFzQWxpZ25lZEhvdXJPZmZzZXQoaW5wdXQpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlucHV0ID0gaW5wdXQgPyBjcmVhdGVMb2NhbChpbnB1dCkudXRjT2Zmc2V0KCkgOiAwO1xuICByZXR1cm4gKHRoaXMudXRjT2Zmc2V0KCkgLSBpbnB1dCkgJSA2MCA9PT0gMDtcbn1cblxuZnVuY3Rpb24gaXNEYXlsaWdodFNhdmluZ1RpbWUoKSB7XG4gIHJldHVybiB0aGlzLnV0Y09mZnNldCgpID4gdGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpIHx8IHRoaXMudXRjT2Zmc2V0KCkgPiB0aGlzLmNsb25lKCkubW9udGgoNSkudXRjT2Zmc2V0KCk7XG59XG5cbmZ1bmN0aW9uIGlzRGF5bGlnaHRTYXZpbmdUaW1lU2hpZnRlZCgpIHtcbiAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9pc0RTVFNoaWZ0ZWQpKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDtcbiAgfVxuXG4gIHZhciBjID0ge30sXG4gICAgICBvdGhlcjtcbiAgY29weUNvbmZpZyhjLCB0aGlzKTtcbiAgYyA9IHByZXBhcmVDb25maWcoYyk7XG5cbiAgaWYgKGMuX2EpIHtcbiAgICBvdGhlciA9IGMuX2lzVVRDID8gY3JlYXRlVVRDKGMuX2EpIDogY3JlYXRlTG9jYWwoYy5fYSk7XG4gICAgdGhpcy5faXNEU1RTaGlmdGVkID0gdGhpcy5pc1ZhbGlkKCkgJiYgY29tcGFyZUFycmF5cyhjLl9hLCBvdGhlci50b0FycmF5KCkpID4gMDtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9pc0RTVFNoaWZ0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7XG59XG5cbmZ1bmN0aW9uIGlzTG9jYWwoKSB7XG4gIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/ICF0aGlzLl9pc1VUQyA6IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1V0Y09mZnNldCgpIHtcbiAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5faXNVVEMgOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNVdGMoKSB7XG4gIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMuX2lzVVRDICYmIHRoaXMuX29mZnNldCA9PT0gMCA6IGZhbHNlO1xufVxuXG52YXIgYXNwTmV0UmVnZXggPSAvXigtfFxcKyk/KD86KFxcZCopWy4gXSk/KFxcZCspOihcXGQrKSg/OjooXFxkKykoXFwuXFxkKik/KT8kLyxcbiAgICBpc29SZWdleCA9IC9eKC18XFwrKT9QKD86KFstK10/WzAtOSwuXSopWSk/KD86KFstK10/WzAtOSwuXSopTSk/KD86KFstK10/WzAtOSwuXSopVyk/KD86KFstK10/WzAtOSwuXSopRCk/KD86VCg/OihbLStdP1swLTksLl0qKUgpPyg/OihbLStdP1swLTksLl0qKU0pPyg/OihbLStdP1swLTksLl0qKVMpPyk/JC87XG5cbmZ1bmN0aW9uIGNyZWF0ZUR1cmF0aW9uKGlucHV0LCBrZXkpIHtcbiAgdmFyIGR1cmF0aW9uID0gaW5wdXQsXG4gICAgICBtYXRjaCA9IG51bGwsXG4gICAgICBzaWduLFxuICAgICAgcmV0LFxuICAgICAgZGlmZlJlcztcblxuICBpZiAoaXNEdXJhdGlvbihpbnB1dCkpIHtcbiAgICBkdXJhdGlvbiA9IHtcbiAgICAgIG1zOiBpbnB1dC5fbWlsbGlzZWNvbmRzLFxuICAgICAgZDogaW5wdXQuX2RheXMsXG4gICAgICBNOiBpbnB1dC5fbW9udGhzXG4gICAgfTtcbiAgfSBlbHNlIGlmIChpc051bWJlcihpbnB1dCkgfHwgIWlzTmFOKCtpbnB1dCkpIHtcbiAgICBkdXJhdGlvbiA9IHt9O1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgZHVyYXRpb25ba2V5XSA9ICtpbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgZHVyYXRpb24ubWlsbGlzZWNvbmRzID0gK2lucHV0O1xuICAgIH1cbiAgfSBlbHNlIGlmIChtYXRjaCA9IGFzcE5ldFJlZ2V4LmV4ZWMoaW5wdXQpKSB7XG4gICAgc2lnbiA9IG1hdGNoWzFdID09PSAnLScgPyAtMSA6IDE7XG4gICAgZHVyYXRpb24gPSB7XG4gICAgICB5OiAwLFxuICAgICAgZDogdG9JbnQobWF0Y2hbREFURV0pICogc2lnbixcbiAgICAgIGg6IHRvSW50KG1hdGNoW0hPVVJdKSAqIHNpZ24sXG4gICAgICBtOiB0b0ludChtYXRjaFtNSU5VVEVdKSAqIHNpZ24sXG4gICAgICBzOiB0b0ludChtYXRjaFtTRUNPTkRdKSAqIHNpZ24sXG4gICAgICBtczogdG9JbnQoYWJzUm91bmQobWF0Y2hbTUlMTElTRUNPTkRdICogMTAwMCkpICogc2lnblxuICAgIH07XG4gIH0gZWxzZSBpZiAobWF0Y2ggPSBpc29SZWdleC5leGVjKGlucHV0KSkge1xuICAgIHNpZ24gPSBtYXRjaFsxXSA9PT0gJy0nID8gLTEgOiAxO1xuICAgIGR1cmF0aW9uID0ge1xuICAgICAgeTogcGFyc2VJc28obWF0Y2hbMl0sIHNpZ24pLFxuICAgICAgTTogcGFyc2VJc28obWF0Y2hbM10sIHNpZ24pLFxuICAgICAgdzogcGFyc2VJc28obWF0Y2hbNF0sIHNpZ24pLFxuICAgICAgZDogcGFyc2VJc28obWF0Y2hbNV0sIHNpZ24pLFxuICAgICAgaDogcGFyc2VJc28obWF0Y2hbNl0sIHNpZ24pLFxuICAgICAgbTogcGFyc2VJc28obWF0Y2hbN10sIHNpZ24pLFxuICAgICAgczogcGFyc2VJc28obWF0Y2hbOF0sIHNpZ24pXG4gICAgfTtcbiAgfSBlbHNlIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7XG4gICAgZHVyYXRpb24gPSB7fTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZHVyYXRpb24gPT09ICdvYmplY3QnICYmICgnZnJvbScgaW4gZHVyYXRpb24gfHwgJ3RvJyBpbiBkdXJhdGlvbikpIHtcbiAgICBkaWZmUmVzID0gbW9tZW50c0RpZmZlcmVuY2UoY3JlYXRlTG9jYWwoZHVyYXRpb24uZnJvbSksIGNyZWF0ZUxvY2FsKGR1cmF0aW9uLnRvKSk7XG4gICAgZHVyYXRpb24gPSB7fTtcbiAgICBkdXJhdGlvbi5tcyA9IGRpZmZSZXMubWlsbGlzZWNvbmRzO1xuICAgIGR1cmF0aW9uLk0gPSBkaWZmUmVzLm1vbnRocztcbiAgfVxuXG4gIHJldCA9IG5ldyBEdXJhdGlvbihkdXJhdGlvbik7XG5cbiAgaWYgKGlzRHVyYXRpb24oaW5wdXQpICYmIGhhc093blByb3AoaW5wdXQsICdfbG9jYWxlJykpIHtcbiAgICByZXQuX2xvY2FsZSA9IGlucHV0Ll9sb2NhbGU7XG4gIH1cblxuICBpZiAoaXNEdXJhdGlvbihpbnB1dCkgJiYgaGFzT3duUHJvcChpbnB1dCwgJ19pc1ZhbGlkJykpIHtcbiAgICByZXQuX2lzVmFsaWQgPSBpbnB1dC5faXNWYWxpZDtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmNyZWF0ZUR1cmF0aW9uLmZuID0gRHVyYXRpb24ucHJvdG90eXBlO1xuY3JlYXRlRHVyYXRpb24uaW52YWxpZCA9IGNyZWF0ZUludmFsaWQkMTtcblxuZnVuY3Rpb24gcGFyc2VJc28oaW5wLCBzaWduKSB7XG4gIHZhciByZXMgPSBpbnAgJiYgcGFyc2VGbG9hdChpbnAucmVwbGFjZSgnLCcsICcuJykpO1xuICByZXR1cm4gKGlzTmFOKHJlcykgPyAwIDogcmVzKSAqIHNpZ247XG59XG5cbmZ1bmN0aW9uIHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICByZXMubW9udGhzID0gb3RoZXIubW9udGgoKSAtIGJhc2UubW9udGgoKSArIChvdGhlci55ZWFyKCkgLSBiYXNlLnllYXIoKSkgKiAxMjtcblxuICBpZiAoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCAnTScpLmlzQWZ0ZXIob3RoZXIpKSB7XG4gICAgLS1yZXMubW9udGhzO1xuICB9XG5cbiAgcmVzLm1pbGxpc2Vjb25kcyA9ICtvdGhlciAtICtiYXNlLmNsb25lKCkuYWRkKHJlcy5tb250aHMsICdNJyk7XG4gIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIG1vbWVudHNEaWZmZXJlbmNlKGJhc2UsIG90aGVyKSB7XG4gIHZhciByZXM7XG5cbiAgaWYgKCEoYmFzZS5pc1ZhbGlkKCkgJiYgb3RoZXIuaXNWYWxpZCgpKSkge1xuICAgIHJldHVybiB7XG4gICAgICBtaWxsaXNlY29uZHM6IDAsXG4gICAgICBtb250aHM6IDBcbiAgICB9O1xuICB9XG5cbiAgb3RoZXIgPSBjbG9uZVdpdGhPZmZzZXQob3RoZXIsIGJhc2UpO1xuXG4gIGlmIChiYXNlLmlzQmVmb3JlKG90aGVyKSkge1xuICAgIHJlcyA9IHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpO1xuICB9IGVsc2Uge1xuICAgIHJlcyA9IHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2Uob3RoZXIsIGJhc2UpO1xuICAgIHJlcy5taWxsaXNlY29uZHMgPSAtcmVzLm1pbGxpc2Vjb25kcztcbiAgICByZXMubW9udGhzID0gLXJlcy5tb250aHM7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBZGRlcihkaXJlY3Rpb24sIG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWwsIHBlcmlvZCkge1xuICAgIHZhciBkdXIsIHRtcDtcblxuICAgIGlmIChwZXJpb2QgIT09IG51bGwgJiYgIWlzTmFOKCtwZXJpb2QpKSB7XG4gICAgICBkZXByZWNhdGVTaW1wbGUobmFtZSwgJ21vbWVudCgpLicgKyBuYW1lICsgJyhwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS4nICsgbmFtZSArICcobnVtYmVyLCBwZXJpb2QpLiAnICsgJ1NlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2FkZC1pbnZlcnRlZC1wYXJhbS8gZm9yIG1vcmUgaW5mby4nKTtcbiAgICAgIHRtcCA9IHZhbDtcbiAgICAgIHZhbCA9IHBlcmlvZDtcbiAgICAgIHBlcmlvZCA9IHRtcDtcbiAgICB9XG5cbiAgICBkdXIgPSBjcmVhdGVEdXJhdGlvbih2YWwsIHBlcmlvZCk7XG4gICAgYWRkU3VidHJhY3QodGhpcywgZHVyLCBkaXJlY3Rpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhZGRTdWJ0cmFjdChtb20sIGR1cmF0aW9uLCBpc0FkZGluZywgdXBkYXRlT2Zmc2V0KSB7XG4gIHZhciBtaWxsaXNlY29uZHMgPSBkdXJhdGlvbi5fbWlsbGlzZWNvbmRzLFxuICAgICAgZGF5cyA9IGFic1JvdW5kKGR1cmF0aW9uLl9kYXlzKSxcbiAgICAgIG1vbnRocyA9IGFic1JvdW5kKGR1cmF0aW9uLl9tb250aHMpO1xuXG4gIGlmICghbW9tLmlzVmFsaWQoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHVwZGF0ZU9mZnNldCA9IHVwZGF0ZU9mZnNldCA9PSBudWxsID8gdHJ1ZSA6IHVwZGF0ZU9mZnNldDtcblxuICBpZiAobW9udGhzKSB7XG4gICAgc2V0TW9udGgobW9tLCBnZXQobW9tLCAnTW9udGgnKSArIG1vbnRocyAqIGlzQWRkaW5nKTtcbiAgfVxuXG4gIGlmIChkYXlzKSB7XG4gICAgc2V0JDEobW9tLCAnRGF0ZScsIGdldChtb20sICdEYXRlJykgKyBkYXlzICogaXNBZGRpbmcpO1xuICB9XG5cbiAgaWYgKG1pbGxpc2Vjb25kcykge1xuICAgIG1vbS5fZC5zZXRUaW1lKG1vbS5fZC52YWx1ZU9mKCkgKyBtaWxsaXNlY29uZHMgKiBpc0FkZGluZyk7XG4gIH1cblxuICBpZiAodXBkYXRlT2Zmc2V0KSB7XG4gICAgaG9va3MudXBkYXRlT2Zmc2V0KG1vbSwgZGF5cyB8fCBtb250aHMpO1xuICB9XG59XG5cbnZhciBhZGQgPSBjcmVhdGVBZGRlcigxLCAnYWRkJyksXG4gICAgc3VidHJhY3QgPSBjcmVhdGVBZGRlcigtMSwgJ3N1YnRyYWN0Jyk7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGlucHV0KSB7XG4gIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IGlucHV0IGluc3RhbmNlb2YgU3RyaW5nO1xufVxuXG5mdW5jdGlvbiBpc01vbWVudElucHV0KGlucHV0KSB7XG4gIHJldHVybiBpc01vbWVudChpbnB1dCkgfHwgaXNEYXRlKGlucHV0KSB8fCBpc1N0cmluZyhpbnB1dCkgfHwgaXNOdW1iZXIoaW5wdXQpIHx8IGlzTnVtYmVyT3JTdHJpbmdBcnJheShpbnB1dCkgfHwgaXNNb21lbnRJbnB1dE9iamVjdChpbnB1dCkgfHwgaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNNb21lbnRJbnB1dE9iamVjdChpbnB1dCkge1xuICB2YXIgb2JqZWN0VGVzdCA9IGlzT2JqZWN0KGlucHV0KSAmJiAhaXNPYmplY3RFbXB0eShpbnB1dCksXG4gICAgICBwcm9wZXJ0eVRlc3QgPSBmYWxzZSxcbiAgICAgIHByb3BlcnRpZXMgPSBbJ3llYXJzJywgJ3llYXInLCAneScsICdtb250aHMnLCAnbW9udGgnLCAnTScsICdkYXlzJywgJ2RheScsICdkJywgJ2RhdGVzJywgJ2RhdGUnLCAnRCcsICdob3VycycsICdob3VyJywgJ2gnLCAnbWludXRlcycsICdtaW51dGUnLCAnbScsICdzZWNvbmRzJywgJ3NlY29uZCcsICdzJywgJ21pbGxpc2Vjb25kcycsICdtaWxsaXNlY29uZCcsICdtcyddLFxuICAgICAgaSxcbiAgICAgIHByb3BlcnR5O1xuXG4gIGZvciAoaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW2ldO1xuICAgIHByb3BlcnR5VGVzdCA9IHByb3BlcnR5VGVzdCB8fCBoYXNPd25Qcm9wKGlucHV0LCBwcm9wZXJ0eSk7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0VGVzdCAmJiBwcm9wZXJ0eVRlc3Q7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyT3JTdHJpbmdBcnJheShpbnB1dCkge1xuICB2YXIgYXJyYXlUZXN0ID0gaXNBcnJheShpbnB1dCksXG4gICAgICBkYXRhVHlwZVRlc3QgPSBmYWxzZTtcblxuICBpZiAoYXJyYXlUZXN0KSB7XG4gICAgZGF0YVR5cGVUZXN0ID0gaW5wdXQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gIWlzTnVtYmVyKGl0ZW0pICYmIGlzU3RyaW5nKGlucHV0KTtcbiAgICB9KS5sZW5ndGggPT09IDA7XG4gIH1cblxuICByZXR1cm4gYXJyYXlUZXN0ICYmIGRhdGFUeXBlVGVzdDtcbn1cblxuZnVuY3Rpb24gaXNDYWxlbmRhclNwZWMoaW5wdXQpIHtcbiAgdmFyIG9iamVjdFRlc3QgPSBpc09iamVjdChpbnB1dCkgJiYgIWlzT2JqZWN0RW1wdHkoaW5wdXQpLFxuICAgICAgcHJvcGVydHlUZXN0ID0gZmFsc2UsXG4gICAgICBwcm9wZXJ0aWVzID0gWydzYW1lRGF5JywgJ25leHREYXknLCAnbGFzdERheScsICduZXh0V2VlaycsICdsYXN0V2VlaycsICdzYW1lRWxzZSddLFxuICAgICAgaSxcbiAgICAgIHByb3BlcnR5O1xuXG4gIGZvciAoaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW2ldO1xuICAgIHByb3BlcnR5VGVzdCA9IHByb3BlcnR5VGVzdCB8fCBoYXNPd25Qcm9wKGlucHV0LCBwcm9wZXJ0eSk7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0VGVzdCAmJiBwcm9wZXJ0eVRlc3Q7XG59XG5cbmZ1bmN0aW9uIGdldENhbGVuZGFyRm9ybWF0KG15TW9tZW50LCBub3cpIHtcbiAgdmFyIGRpZmYgPSBteU1vbWVudC5kaWZmKG5vdywgJ2RheXMnLCB0cnVlKTtcbiAgcmV0dXJuIGRpZmYgPCAtNiA/ICdzYW1lRWxzZScgOiBkaWZmIDwgLTEgPyAnbGFzdFdlZWsnIDogZGlmZiA8IDAgPyAnbGFzdERheScgOiBkaWZmIDwgMSA/ICdzYW1lRGF5JyA6IGRpZmYgPCAyID8gJ25leHREYXknIDogZGlmZiA8IDcgPyAnbmV4dFdlZWsnIDogJ3NhbWVFbHNlJztcbn1cblxuZnVuY3Rpb24gY2FsZW5kYXIkMSh0aW1lLCBmb3JtYXRzKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgaWYgKCFhcmd1bWVudHNbMF0pIHtcbiAgICAgIHRpbWUgPSB1bmRlZmluZWQ7XG4gICAgICBmb3JtYXRzID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAoaXNNb21lbnRJbnB1dChhcmd1bWVudHNbMF0pKSB7XG4gICAgICB0aW1lID0gYXJndW1lbnRzWzBdO1xuICAgICAgZm9ybWF0cyA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKGlzQ2FsZW5kYXJTcGVjKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGZvcm1hdHMgPSBhcmd1bWVudHNbMF07XG4gICAgICB0aW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHZhciBub3cgPSB0aW1lIHx8IGNyZWF0ZUxvY2FsKCksXG4gICAgICBzb2QgPSBjbG9uZVdpdGhPZmZzZXQobm93LCB0aGlzKS5zdGFydE9mKCdkYXknKSxcbiAgICAgIGZvcm1hdCA9IGhvb2tzLmNhbGVuZGFyRm9ybWF0KHRoaXMsIHNvZCkgfHwgJ3NhbWVFbHNlJyxcbiAgICAgIG91dHB1dCA9IGZvcm1hdHMgJiYgKGlzRnVuY3Rpb24oZm9ybWF0c1tmb3JtYXRdKSA/IGZvcm1hdHNbZm9ybWF0XS5jYWxsKHRoaXMsIG5vdykgOiBmb3JtYXRzW2Zvcm1hdF0pO1xuICByZXR1cm4gdGhpcy5mb3JtYXQob3V0cHV0IHx8IHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGZvcm1hdCwgdGhpcywgY3JlYXRlTG9jYWwobm93KSkpO1xufVxuXG5mdW5jdGlvbiBjbG9uZSgpIHtcbiAgcmV0dXJuIG5ldyBNb21lbnQodGhpcyk7XG59XG5cbmZ1bmN0aW9uIGlzQWZ0ZXIoaW5wdXQsIHVuaXRzKSB7XG4gIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBjcmVhdGVMb2NhbChpbnB1dCk7XG5cbiAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cykgfHwgJ21pbGxpc2Vjb25kJztcblxuICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZU9mKCkgPiBsb2NhbElucHV0LnZhbHVlT2YoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbG9jYWxJbnB1dC52YWx1ZU9mKCkgPCB0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzQmVmb3JlKGlucHV0LCB1bml0cykge1xuICB2YXIgbG9jYWxJbnB1dCA9IGlzTW9tZW50KGlucHV0KSA/IGlucHV0IDogY3JlYXRlTG9jYWwoaW5wdXQpO1xuXG4gIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsSW5wdXQuaXNWYWxpZCgpKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpIHx8ICdtaWxsaXNlY29uZCc7XG5cbiAgaWYgKHVuaXRzID09PSAnbWlsbGlzZWNvbmQnKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVPZigpIDwgbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5lbmRPZih1bml0cykudmFsdWVPZigpIDwgbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNCZXR3ZWVuKGZyb20sIHRvLCB1bml0cywgaW5jbHVzaXZpdHkpIHtcbiAgdmFyIGxvY2FsRnJvbSA9IGlzTW9tZW50KGZyb20pID8gZnJvbSA6IGNyZWF0ZUxvY2FsKGZyb20pLFxuICAgICAgbG9jYWxUbyA9IGlzTW9tZW50KHRvKSA/IHRvIDogY3JlYXRlTG9jYWwodG8pO1xuXG4gIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsRnJvbS5pc1ZhbGlkKCkgJiYgbG9jYWxUby5pc1ZhbGlkKCkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaW5jbHVzaXZpdHkgPSBpbmNsdXNpdml0eSB8fCAnKCknO1xuICByZXR1cm4gKGluY2x1c2l2aXR5WzBdID09PSAnKCcgPyB0aGlzLmlzQWZ0ZXIobG9jYWxGcm9tLCB1bml0cykgOiAhdGhpcy5pc0JlZm9yZShsb2NhbEZyb20sIHVuaXRzKSkgJiYgKGluY2x1c2l2aXR5WzFdID09PSAnKScgPyB0aGlzLmlzQmVmb3JlKGxvY2FsVG8sIHVuaXRzKSA6ICF0aGlzLmlzQWZ0ZXIobG9jYWxUbywgdW5pdHMpKTtcbn1cblxuZnVuY3Rpb24gaXNTYW1lKGlucHV0LCB1bml0cykge1xuICB2YXIgbG9jYWxJbnB1dCA9IGlzTW9tZW50KGlucHV0KSA/IGlucHV0IDogY3JlYXRlTG9jYWwoaW5wdXQpLFxuICAgICAgaW5wdXRNcztcblxuICBpZiAoISh0aGlzLmlzVmFsaWQoKSAmJiBsb2NhbElucHV0LmlzVmFsaWQoKSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKSB8fCAnbWlsbGlzZWNvbmQnO1xuXG4gIGlmICh1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgIHJldHVybiB0aGlzLnZhbHVlT2YoKSA9PT0gbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gIH0gZWxzZSB7XG4gICAgaW5wdXRNcyA9IGxvY2FsSW5wdXQudmFsdWVPZigpO1xuICAgIHJldHVybiB0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpIDw9IGlucHV0TXMgJiYgaW5wdXRNcyA8PSB0aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpLnZhbHVlT2YoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NhbWVPckFmdGVyKGlucHV0LCB1bml0cykge1xuICByZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsIHVuaXRzKSB8fCB0aGlzLmlzQWZ0ZXIoaW5wdXQsIHVuaXRzKTtcbn1cblxuZnVuY3Rpb24gaXNTYW1lT3JCZWZvcmUoaW5wdXQsIHVuaXRzKSB7XG4gIHJldHVybiB0aGlzLmlzU2FtZShpbnB1dCwgdW5pdHMpIHx8IHRoaXMuaXNCZWZvcmUoaW5wdXQsIHVuaXRzKTtcbn1cblxuZnVuY3Rpb24gZGlmZihpbnB1dCwgdW5pdHMsIGFzRmxvYXQpIHtcbiAgdmFyIHRoYXQsIHpvbmVEZWx0YSwgb3V0cHV0O1xuXG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdGhhdCA9IGNsb25lV2l0aE9mZnNldChpbnB1dCwgdGhpcyk7XG5cbiAgaWYgKCF0aGF0LmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB6b25lRGVsdGEgPSAodGhhdC51dGNPZmZzZXQoKSAtIHRoaXMudXRjT2Zmc2V0KCkpICogNmU0O1xuICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgY2FzZSAneWVhcic6XG4gICAgICBvdXRwdXQgPSBtb250aERpZmYodGhpcywgdGhhdCkgLyAxMjtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnbW9udGgnOlxuICAgICAgb3V0cHV0ID0gbW9udGhEaWZmKHRoaXMsIHRoYXQpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgIG91dHB1dCA9IG1vbnRoRGlmZih0aGlzLCB0aGF0KSAvIDM7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgICBvdXRwdXQgPSAodGhpcyAtIHRoYXQpIC8gMWUzO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdtaW51dGUnOlxuICAgICAgb3V0cHV0ID0gKHRoaXMgLSB0aGF0KSAvIDZlNDtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaG91cic6XG4gICAgICBvdXRwdXQgPSAodGhpcyAtIHRoYXQpIC8gMzZlNTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnZGF5JzpcbiAgICAgIG91dHB1dCA9ICh0aGlzIC0gdGhhdCAtIHpvbmVEZWx0YSkgLyA4NjRlNTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnd2Vlayc6XG4gICAgICBvdXRwdXQgPSAodGhpcyAtIHRoYXQgLSB6b25lRGVsdGEpIC8gNjA0OGU1O1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgb3V0cHV0ID0gdGhpcyAtIHRoYXQ7XG4gIH1cblxuICByZXR1cm4gYXNGbG9hdCA/IG91dHB1dCA6IGFic0Zsb29yKG91dHB1dCk7XG59XG5cbmZ1bmN0aW9uIG1vbnRoRGlmZihhLCBiKSB7XG4gIGlmIChhLmRhdGUoKSA8IGIuZGF0ZSgpKSB7XG4gICAgcmV0dXJuIC1tb250aERpZmYoYiwgYSk7XG4gIH1cblxuICB2YXIgd2hvbGVNb250aERpZmYgPSAoYi55ZWFyKCkgLSBhLnllYXIoKSkgKiAxMiArIChiLm1vbnRoKCkgLSBhLm1vbnRoKCkpLFxuICAgICAgYW5jaG9yID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiwgJ21vbnRocycpLFxuICAgICAgYW5jaG9yMixcbiAgICAgIGFkanVzdDtcblxuICBpZiAoYiAtIGFuY2hvciA8IDApIHtcbiAgICBhbmNob3IyID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiAtIDEsICdtb250aHMnKTtcbiAgICBhZGp1c3QgPSAoYiAtIGFuY2hvcikgLyAoYW5jaG9yIC0gYW5jaG9yMik7XG4gIH0gZWxzZSB7XG4gICAgYW5jaG9yMiA9IGEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYgKyAxLCAnbW9udGhzJyk7XG4gICAgYWRqdXN0ID0gKGIgLSBhbmNob3IpIC8gKGFuY2hvcjIgLSBhbmNob3IpO1xuICB9XG5cbiAgcmV0dXJuIC0od2hvbGVNb250aERpZmYgKyBhZGp1c3QpIHx8IDA7XG59XG5cbmhvb2tzLmRlZmF1bHRGb3JtYXQgPSAnWVlZWS1NTS1ERFRISDptbTpzc1onO1xuaG9va3MuZGVmYXVsdEZvcm1hdFV0YyA9ICdZWVlZLU1NLUREVEhIOm1tOnNzW1pdJztcblxuZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiB0aGlzLmNsb25lKCkubG9jYWxlKCdlbicpLmZvcm1hdCgnZGRkIE1NTSBERCBZWVlZIEhIOm1tOnNzIFtHTVRdWlonKTtcbn1cblxuZnVuY3Rpb24gdG9JU09TdHJpbmcoa2VlcE9mZnNldCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgdXRjID0ga2VlcE9mZnNldCAhPT0gdHJ1ZSxcbiAgICAgIG0gPSB1dGMgPyB0aGlzLmNsb25lKCkudXRjKCkgOiB0aGlzO1xuXG4gIGlmIChtLnllYXIoKSA8IDAgfHwgbS55ZWFyKCkgPiA5OTk5KSB7XG4gICAgcmV0dXJuIGZvcm1hdE1vbWVudChtLCB1dGMgPyAnWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdJyA6ICdZWVlZWVktTU0tRERbVF1ISDptbTpzcy5TU1NaJyk7XG4gIH1cblxuICBpZiAoaXNGdW5jdGlvbihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZykpIHtcbiAgICBpZiAodXRjKSB7XG4gICAgICByZXR1cm4gdGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkgKyB0aGlzLnV0Y09mZnNldCgpICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLnJlcGxhY2UoJ1onLCBmb3JtYXRNb21lbnQobSwgJ1onKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZvcm1hdE1vbWVudChtLCB1dGMgPyAnWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXScgOiAnWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1onKTtcbn1cblxuZnVuY3Rpb24gaW5zcGVjdCgpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiAnbW9tZW50LmludmFsaWQoLyogJyArIHRoaXMuX2kgKyAnICovKSc7XG4gIH1cblxuICB2YXIgZnVuYyA9ICdtb21lbnQnLFxuICAgICAgem9uZSA9ICcnLFxuICAgICAgcHJlZml4LFxuICAgICAgeWVhcixcbiAgICAgIGRhdGV0aW1lLFxuICAgICAgc3VmZml4O1xuXG4gIGlmICghdGhpcy5pc0xvY2FsKCkpIHtcbiAgICBmdW5jID0gdGhpcy51dGNPZmZzZXQoKSA9PT0gMCA/ICdtb21lbnQudXRjJyA6ICdtb21lbnQucGFyc2Vab25lJztcbiAgICB6b25lID0gJ1onO1xuICB9XG5cbiAgcHJlZml4ID0gJ1snICsgZnVuYyArICcoXCJdJztcbiAgeWVhciA9IDAgPD0gdGhpcy55ZWFyKCkgJiYgdGhpcy55ZWFyKCkgPD0gOTk5OSA/ICdZWVlZJyA6ICdZWVlZWVknO1xuICBkYXRldGltZSA9ICctTU0tRERbVF1ISDptbTpzcy5TU1MnO1xuICBzdWZmaXggPSB6b25lICsgJ1tcIildJztcbiAgcmV0dXJuIHRoaXMuZm9ybWF0KHByZWZpeCArIHllYXIgKyBkYXRldGltZSArIHN1ZmZpeCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdChpbnB1dFN0cmluZykge1xuICBpZiAoIWlucHV0U3RyaW5nKSB7XG4gICAgaW5wdXRTdHJpbmcgPSB0aGlzLmlzVXRjKCkgPyBob29rcy5kZWZhdWx0Rm9ybWF0VXRjIDogaG9va3MuZGVmYXVsdEZvcm1hdDtcbiAgfVxuXG4gIHZhciBvdXRwdXQgPSBmb3JtYXRNb21lbnQodGhpcywgaW5wdXRTdHJpbmcpO1xuICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkucG9zdGZvcm1hdChvdXRwdXQpO1xufVxuXG5mdW5jdGlvbiBmcm9tKHRpbWUsIHdpdGhvdXRTdWZmaXgpIHtcbiAgaWYgKHRoaXMuaXNWYWxpZCgpICYmIChpc01vbWVudCh0aW1lKSAmJiB0aW1lLmlzVmFsaWQoKSB8fCBjcmVhdGVMb2NhbCh0aW1lKS5pc1ZhbGlkKCkpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHtcbiAgICAgIHRvOiB0aGlzLFxuICAgICAgZnJvbTogdGltZVxuICAgIH0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghd2l0aG91dFN1ZmZpeCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZnJvbU5vdyh3aXRob3V0U3VmZml4KSB7XG4gIHJldHVybiB0aGlzLmZyb20oY3JlYXRlTG9jYWwoKSwgd2l0aG91dFN1ZmZpeCk7XG59XG5cbmZ1bmN0aW9uIHRvKHRpbWUsIHdpdGhvdXRTdWZmaXgpIHtcbiAgaWYgKHRoaXMuaXNWYWxpZCgpICYmIChpc01vbWVudCh0aW1lKSAmJiB0aW1lLmlzVmFsaWQoKSB8fCBjcmVhdGVMb2NhbCh0aW1lKS5pc1ZhbGlkKCkpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHtcbiAgICAgIGZyb206IHRoaXMsXG4gICAgICB0bzogdGltZVxuICAgIH0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghd2l0aG91dFN1ZmZpeCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG9Ob3cod2l0aG91dFN1ZmZpeCkge1xuICByZXR1cm4gdGhpcy50byhjcmVhdGVMb2NhbCgpLCB3aXRob3V0U3VmZml4KTtcbn1cblxuZnVuY3Rpb24gbG9jYWxlKGtleSkge1xuICB2YXIgbmV3TG9jYWxlRGF0YTtcblxuICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9jYWxlLl9hYmJyO1xuICB9IGVsc2Uge1xuICAgIG5ld0xvY2FsZURhdGEgPSBnZXRMb2NhbGUoa2V5KTtcblxuICAgIGlmIChuZXdMb2NhbGVEYXRhICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2xvY2FsZSA9IG5ld0xvY2FsZURhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxudmFyIGxhbmcgPSBkZXByZWNhdGUoJ21vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCB1c2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIHRvIGdldCB0aGUgbGFuZ3VhZ2UgY29uZmlndXJhdGlvbi4gVXNlIG1vbWVudCgpLmxvY2FsZSgpIHRvIGNoYW5nZSBsYW5ndWFnZXMuJywgZnVuY3Rpb24gKGtleSkge1xuICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlKGtleSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBsb2NhbGVEYXRhKCkge1xuICByZXR1cm4gdGhpcy5fbG9jYWxlO1xufVxuXG52YXIgTVNfUEVSX1NFQ09ORCA9IDEwMDAsXG4gICAgTVNfUEVSX01JTlVURSA9IDYwICogTVNfUEVSX1NFQ09ORCxcbiAgICBNU19QRVJfSE9VUiA9IDYwICogTVNfUEVSX01JTlVURSxcbiAgICBNU19QRVJfNDAwX1lFQVJTID0gKDM2NSAqIDQwMCArIDk3KSAqIDI0ICogTVNfUEVSX0hPVVI7XG5cbmZ1bmN0aW9uIG1vZCQxKGRpdmlkZW5kLCBkaXZpc29yKSB7XG4gIHJldHVybiAoZGl2aWRlbmQgJSBkaXZpc29yICsgZGl2aXNvcikgJSBkaXZpc29yO1xufVxuXG5mdW5jdGlvbiBsb2NhbFN0YXJ0T2ZEYXRlKHksIG0sIGQpIHtcbiAgaWYgKHkgPCAxMDAgJiYgeSA+PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHkgKyA0MDAsIG0sIGQpIC0gTVNfUEVSXzQwMF9ZRUFSUztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IERhdGUoeSwgbSwgZCkudmFsdWVPZigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHV0Y1N0YXJ0T2ZEYXRlKHksIG0sIGQpIHtcbiAgaWYgKHkgPCAxMDAgJiYgeSA+PSAwKSB7XG4gICAgcmV0dXJuIERhdGUuVVRDKHkgKyA0MDAsIG0sIGQpIC0gTVNfUEVSXzQwMF9ZRUFSUztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gRGF0ZS5VVEMoeSwgbSwgZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRPZih1bml0cykge1xuICB2YXIgdGltZSwgc3RhcnRPZkRhdGU7XG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gIGlmICh1bml0cyA9PT0gdW5kZWZpbmVkIHx8IHVuaXRzID09PSAnbWlsbGlzZWNvbmQnIHx8ICF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc3RhcnRPZkRhdGUgPSB0aGlzLl9pc1VUQyA/IHV0Y1N0YXJ0T2ZEYXRlIDogbG9jYWxTdGFydE9mRGF0ZTtcblxuICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgY2FzZSAneWVhcic6XG4gICAgICB0aW1lID0gc3RhcnRPZkRhdGUodGhpcy55ZWFyKCksIDAsIDEpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpIC0gdGhpcy5tb250aCgpICUgMywgMSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCAxKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnd2Vlayc6XG4gICAgICB0aW1lID0gc3RhcnRPZkRhdGUodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSwgdGhpcy5kYXRlKCkgLSB0aGlzLndlZWtkYXkoKSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2lzb1dlZWsnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIHRoaXMuZGF0ZSgpIC0gKHRoaXMuaXNvV2Vla2RheSgpIC0gMSkpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIHRoaXMuZGF0ZSgpKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaG91cic6XG4gICAgICB0aW1lID0gdGhpcy5fZC52YWx1ZU9mKCk7XG4gICAgICB0aW1lIC09IG1vZCQxKHRpbWUgKyAodGhpcy5faXNVVEMgPyAwIDogdGhpcy51dGNPZmZzZXQoKSAqIE1TX1BFUl9NSU5VVEUpLCBNU19QRVJfSE9VUik7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgICB0aW1lID0gdGhpcy5fZC52YWx1ZU9mKCk7XG4gICAgICB0aW1lIC09IG1vZCQxKHRpbWUsIE1TX1BFUl9NSU5VVEUpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdzZWNvbmQnOlxuICAgICAgdGltZSA9IHRoaXMuX2QudmFsdWVPZigpO1xuICAgICAgdGltZSAtPSBtb2QkMSh0aW1lLCBNU19QRVJfU0VDT05EKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgdGhpcy5fZC5zZXRUaW1lKHRpbWUpO1xuXG4gIGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLCB0cnVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGVuZE9mKHVuaXRzKSB7XG4gIHZhciB0aW1lLCBzdGFydE9mRGF0ZTtcbiAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG5cbiAgaWYgKHVuaXRzID09PSB1bmRlZmluZWQgfHwgdW5pdHMgPT09ICdtaWxsaXNlY29uZCcgfHwgIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzdGFydE9mRGF0ZSA9IHRoaXMuX2lzVVRDID8gdXRjU3RhcnRPZkRhdGUgOiBsb2NhbFN0YXJ0T2ZEYXRlO1xuXG4gIHN3aXRjaCAodW5pdHMpIHtcbiAgICBjYXNlICd5ZWFyJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSArIDEsIDAsIDEpIC0gMTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncXVhcnRlcic6XG4gICAgICB0aW1lID0gc3RhcnRPZkRhdGUodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSAtIHRoaXMubW9udGgoKSAlIDMgKyAzLCAxKSAtIDE7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpICsgMSwgMSkgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICd3ZWVrJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSAtIHRoaXMud2Vla2RheSgpICsgNykgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdpc29XZWVrJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSAtICh0aGlzLmlzb1dlZWtkYXkoKSAtIDEpICsgNykgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIHRoaXMuZGF0ZSgpICsgMSkgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdob3VyJzpcbiAgICAgIHRpbWUgPSB0aGlzLl9kLnZhbHVlT2YoKTtcbiAgICAgIHRpbWUgKz0gTVNfUEVSX0hPVVIgLSBtb2QkMSh0aW1lICsgKHRoaXMuX2lzVVRDID8gMCA6IHRoaXMudXRjT2Zmc2V0KCkgKiBNU19QRVJfTUlOVVRFKSwgTVNfUEVSX0hPVVIpIC0gMTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnbWludXRlJzpcbiAgICAgIHRpbWUgPSB0aGlzLl9kLnZhbHVlT2YoKTtcbiAgICAgIHRpbWUgKz0gTVNfUEVSX01JTlVURSAtIG1vZCQxKHRpbWUsIE1TX1BFUl9NSU5VVEUpIC0gMTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgIHRpbWUgPSB0aGlzLl9kLnZhbHVlT2YoKTtcbiAgICAgIHRpbWUgKz0gTVNfUEVSX1NFQ09ORCAtIG1vZCQxKHRpbWUsIE1TX1BFUl9TRUNPTkQpIC0gMTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgdGhpcy5fZC5zZXRUaW1lKHRpbWUpO1xuXG4gIGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLCB0cnVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHZhbHVlT2YoKSB7XG4gIHJldHVybiB0aGlzLl9kLnZhbHVlT2YoKSAtICh0aGlzLl9vZmZzZXQgfHwgMCkgKiA2MDAwMDtcbn1cblxuZnVuY3Rpb24gdW5peCgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy52YWx1ZU9mKCkgLyAxMDAwKTtcbn1cblxuZnVuY3Rpb24gdG9EYXRlKCkge1xuICByZXR1cm4gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkpO1xufVxuXG5mdW5jdGlvbiB0b0FycmF5KCkge1xuICB2YXIgbSA9IHRoaXM7XG4gIHJldHVybiBbbS55ZWFyKCksIG0ubW9udGgoKSwgbS5kYXRlKCksIG0uaG91cigpLCBtLm1pbnV0ZSgpLCBtLnNlY29uZCgpLCBtLm1pbGxpc2Vjb25kKCldO1xufVxuXG5mdW5jdGlvbiB0b09iamVjdCgpIHtcbiAgdmFyIG0gPSB0aGlzO1xuICByZXR1cm4ge1xuICAgIHllYXJzOiBtLnllYXIoKSxcbiAgICBtb250aHM6IG0ubW9udGgoKSxcbiAgICBkYXRlOiBtLmRhdGUoKSxcbiAgICBob3VyczogbS5ob3VycygpLFxuICAgIG1pbnV0ZXM6IG0ubWludXRlcygpLFxuICAgIHNlY29uZHM6IG0uc2Vjb25kcygpLFxuICAgIG1pbGxpc2Vjb25kczogbS5taWxsaXNlY29uZHMoKVxuICB9O1xufVxuXG5mdW5jdGlvbiB0b0pTT04oKSB7XG4gIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMudG9JU09TdHJpbmcoKSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWQkMigpIHtcbiAgcmV0dXJuIGlzVmFsaWQodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNpbmdGbGFncygpIHtcbiAgcmV0dXJuIGV4dGVuZCh7fSwgZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpKTtcbn1cblxuZnVuY3Rpb24gaW52YWxpZEF0KCkge1xuICByZXR1cm4gZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpLm92ZXJmbG93O1xufVxuXG5mdW5jdGlvbiBjcmVhdGlvbkRhdGEoKSB7XG4gIHJldHVybiB7XG4gICAgaW5wdXQ6IHRoaXMuX2ksXG4gICAgZm9ybWF0OiB0aGlzLl9mLFxuICAgIGxvY2FsZTogdGhpcy5fbG9jYWxlLFxuICAgIGlzVVRDOiB0aGlzLl9pc1VUQyxcbiAgICBzdHJpY3Q6IHRoaXMuX3N0cmljdFxuICB9O1xufVxuXG5hZGRGb3JtYXRUb2tlbignTicsIDAsIDAsICdlcmFBYmJyJyk7XG5hZGRGb3JtYXRUb2tlbignTk4nLCAwLCAwLCAnZXJhQWJicicpO1xuYWRkRm9ybWF0VG9rZW4oJ05OTicsIDAsIDAsICdlcmFBYmJyJyk7XG5hZGRGb3JtYXRUb2tlbignTk5OTicsIDAsIDAsICdlcmFOYW1lJyk7XG5hZGRGb3JtYXRUb2tlbignTk5OTk4nLCAwLCAwLCAnZXJhTmFycm93Jyk7XG5hZGRGb3JtYXRUb2tlbigneScsIFsneScsIDFdLCAneW8nLCAnZXJhWWVhcicpO1xuYWRkRm9ybWF0VG9rZW4oJ3knLCBbJ3l5JywgMl0sIDAsICdlcmFZZWFyJyk7XG5hZGRGb3JtYXRUb2tlbigneScsIFsneXl5JywgM10sIDAsICdlcmFZZWFyJyk7XG5hZGRGb3JtYXRUb2tlbigneScsIFsneXl5eScsIDRdLCAwLCAnZXJhWWVhcicpO1xuYWRkUmVnZXhUb2tlbignTicsIG1hdGNoRXJhQWJicik7XG5hZGRSZWdleFRva2VuKCdOTicsIG1hdGNoRXJhQWJicik7XG5hZGRSZWdleFRva2VuKCdOTk4nLCBtYXRjaEVyYUFiYnIpO1xuYWRkUmVnZXhUb2tlbignTk5OTicsIG1hdGNoRXJhTmFtZSk7XG5hZGRSZWdleFRva2VuKCdOTk5OTicsIG1hdGNoRXJhTmFycm93KTtcbmFkZFBhcnNlVG9rZW4oWydOJywgJ05OJywgJ05OTicsICdOTk5OJywgJ05OTk5OJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZywgdG9rZW4pIHtcbiAgdmFyIGVyYSA9IGNvbmZpZy5fbG9jYWxlLmVyYXNQYXJzZShpbnB1dCwgdG9rZW4sIGNvbmZpZy5fc3RyaWN0KTtcblxuICBpZiAoZXJhKSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZXJhID0gZXJhO1xuICB9IGVsc2Uge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRFcmEgPSBpbnB1dDtcbiAgfVxufSk7XG5hZGRSZWdleFRva2VuKCd5JywgbWF0Y2hVbnNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCd5eScsIG1hdGNoVW5zaWduZWQpO1xuYWRkUmVnZXhUb2tlbigneXl5JywgbWF0Y2hVbnNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCd5eXl5JywgbWF0Y2hVbnNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCd5bycsIG1hdGNoRXJhWWVhck9yZGluYWwpO1xuYWRkUGFyc2VUb2tlbihbJ3knLCAneXknLCAneXl5JywgJ3l5eXknXSwgWUVBUik7XG5hZGRQYXJzZVRva2VuKFsneW8nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICB2YXIgbWF0Y2g7XG5cbiAgaWYgKGNvbmZpZy5fbG9jYWxlLl9lcmFZZWFyT3JkaW5hbFJlZ2V4KSB7XG4gICAgbWF0Y2ggPSBpbnB1dC5tYXRjaChjb25maWcuX2xvY2FsZS5fZXJhWWVhck9yZGluYWxSZWdleCk7XG4gIH1cblxuICBpZiAoY29uZmlnLl9sb2NhbGUuZXJhWWVhck9yZGluYWxQYXJzZSkge1xuICAgIGFycmF5W1lFQVJdID0gY29uZmlnLl9sb2NhbGUuZXJhWWVhck9yZGluYWxQYXJzZShpbnB1dCwgbWF0Y2gpO1xuICB9IGVsc2Uge1xuICAgIGFycmF5W1lFQVJdID0gcGFyc2VJbnQoaW5wdXQsIDEwKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGxvY2FsZUVyYXMobSwgZm9ybWF0KSB7XG4gIHZhciBpLFxuICAgICAgbCxcbiAgICAgIGRhdGUsXG4gICAgICBlcmFzID0gdGhpcy5fZXJhcyB8fCBnZXRMb2NhbGUoJ2VuJykuX2VyYXM7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgZXJhc1tpXS5zaW5jZSkge1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgZGF0ZSA9IGhvb2tzKGVyYXNbaV0uc2luY2UpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBlcmFzW2ldLnNpbmNlID0gZGF0ZS52YWx1ZU9mKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHN3aXRjaCAodHlwZW9mIGVyYXNbaV0udW50aWwpIHtcbiAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICAgIGVyYXNbaV0udW50aWwgPSArSW5maW5pdHk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBkYXRlID0gaG9va3MoZXJhc1tpXS51bnRpbCkuc3RhcnRPZignZGF5JykudmFsdWVPZigpO1xuICAgICAgICBlcmFzW2ldLnVudGlsID0gZGF0ZS52YWx1ZU9mKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlcmFzO1xufVxuXG5mdW5jdGlvbiBsb2NhbGVFcmFzUGFyc2UoZXJhTmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgdmFyIGksXG4gICAgICBsLFxuICAgICAgZXJhcyA9IHRoaXMuZXJhcygpLFxuICAgICAgbmFtZSxcbiAgICAgIGFiYnIsXG4gICAgICBuYXJyb3c7XG4gIGVyYU5hbWUgPSBlcmFOYW1lLnRvVXBwZXJDYXNlKCk7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgbmFtZSA9IGVyYXNbaV0ubmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGFiYnIgPSBlcmFzW2ldLmFiYnIudG9VcHBlckNhc2UoKTtcbiAgICBuYXJyb3cgPSBlcmFzW2ldLm5hcnJvdy50b1VwcGVyQ2FzZSgpO1xuXG4gICAgaWYgKHN0cmljdCkge1xuICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgY2FzZSAnTic6XG4gICAgICAgIGNhc2UgJ05OJzpcbiAgICAgICAgY2FzZSAnTk5OJzpcbiAgICAgICAgICBpZiAoYWJiciA9PT0gZXJhTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVyYXNbaV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnTk5OTic6XG4gICAgICAgICAgaWYgKG5hbWUgPT09IGVyYU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBlcmFzW2ldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ05OTk5OJzpcbiAgICAgICAgICBpZiAobmFycm93ID09PSBlcmFOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJhc1tpXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFtuYW1lLCBhYmJyLCBuYXJyb3ddLmluZGV4T2YoZXJhTmFtZSkgPj0gMCkge1xuICAgICAgcmV0dXJuIGVyYXNbaV07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxvY2FsZUVyYXNDb252ZXJ0WWVhcihlcmEsIHllYXIpIHtcbiAgdmFyIGRpciA9IGVyYS5zaW5jZSA8PSBlcmEudW50aWwgPyArMSA6IC0xO1xuXG4gIGlmICh5ZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gaG9va3MoZXJhLnNpbmNlKS55ZWFyKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGhvb2tzKGVyYS5zaW5jZSkueWVhcigpICsgKHllYXIgLSBlcmEub2Zmc2V0KSAqIGRpcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcmFOYW1lKCkge1xuICB2YXIgaSxcbiAgICAgIGwsXG4gICAgICB2YWwsXG4gICAgICBlcmFzID0gdGhpcy5sb2NhbGVEYXRhKCkuZXJhcygpO1xuXG4gIGZvciAoaSA9IDAsIGwgPSBlcmFzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIHZhbCA9IHRoaXMuY2xvbmUoKS5zdGFydE9mKCdkYXknKS52YWx1ZU9mKCk7XG5cbiAgICBpZiAoZXJhc1tpXS5zaW5jZSA8PSB2YWwgJiYgdmFsIDw9IGVyYXNbaV0udW50aWwpIHtcbiAgICAgIHJldHVybiBlcmFzW2ldLm5hbWU7XG4gICAgfVxuXG4gICAgaWYgKGVyYXNbaV0udW50aWwgPD0gdmFsICYmIHZhbCA8PSBlcmFzW2ldLnNpbmNlKSB7XG4gICAgICByZXR1cm4gZXJhc1tpXS5uYW1lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gZ2V0RXJhTmFycm93KCkge1xuICB2YXIgaSxcbiAgICAgIGwsXG4gICAgICB2YWwsXG4gICAgICBlcmFzID0gdGhpcy5sb2NhbGVEYXRhKCkuZXJhcygpO1xuXG4gIGZvciAoaSA9IDAsIGwgPSBlcmFzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIHZhbCA9IHRoaXMuY2xvbmUoKS5zdGFydE9mKCdkYXknKS52YWx1ZU9mKCk7XG5cbiAgICBpZiAoZXJhc1tpXS5zaW5jZSA8PSB2YWwgJiYgdmFsIDw9IGVyYXNbaV0udW50aWwpIHtcbiAgICAgIHJldHVybiBlcmFzW2ldLm5hcnJvdztcbiAgICB9XG5cbiAgICBpZiAoZXJhc1tpXS51bnRpbCA8PSB2YWwgJiYgdmFsIDw9IGVyYXNbaV0uc2luY2UpIHtcbiAgICAgIHJldHVybiBlcmFzW2ldLm5hcnJvdztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIGdldEVyYUFiYnIoKSB7XG4gIHZhciBpLFxuICAgICAgbCxcbiAgICAgIHZhbCxcbiAgICAgIGVyYXMgPSB0aGlzLmxvY2FsZURhdGEoKS5lcmFzKCk7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgdmFsID0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKTtcblxuICAgIGlmIChlcmFzW2ldLnNpbmNlIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS51bnRpbCkge1xuICAgICAgcmV0dXJuIGVyYXNbaV0uYWJicjtcbiAgICB9XG5cbiAgICBpZiAoZXJhc1tpXS51bnRpbCA8PSB2YWwgJiYgdmFsIDw9IGVyYXNbaV0uc2luY2UpIHtcbiAgICAgIHJldHVybiBlcmFzW2ldLmFiYnI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBnZXRFcmFZZWFyKCkge1xuICB2YXIgaSxcbiAgICAgIGwsXG4gICAgICBkaXIsXG4gICAgICB2YWwsXG4gICAgICBlcmFzID0gdGhpcy5sb2NhbGVEYXRhKCkuZXJhcygpO1xuXG4gIGZvciAoaSA9IDAsIGwgPSBlcmFzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGRpciA9IGVyYXNbaV0uc2luY2UgPD0gZXJhc1tpXS51bnRpbCA/ICsxIDogLTE7XG4gICAgdmFsID0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKTtcblxuICAgIGlmIChlcmFzW2ldLnNpbmNlIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS51bnRpbCB8fCBlcmFzW2ldLnVudGlsIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS5zaW5jZSkge1xuICAgICAgcmV0dXJuICh0aGlzLnllYXIoKSAtIGhvb2tzKGVyYXNbaV0uc2luY2UpLnllYXIoKSkgKiBkaXIgKyBlcmFzW2ldLm9mZnNldDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcy55ZWFyKCk7XG59XG5cbmZ1bmN0aW9uIGVyYXNOYW1lUmVnZXgoaXNTdHJpY3QpIHtcbiAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfZXJhc05hbWVSZWdleCcpKSB7XG4gICAgY29tcHV0ZUVyYXNQYXJzZS5jYWxsKHRoaXMpO1xuICB9XG5cbiAgcmV0dXJuIGlzU3RyaWN0ID8gdGhpcy5fZXJhc05hbWVSZWdleCA6IHRoaXMuX2VyYXNSZWdleDtcbn1cblxuZnVuY3Rpb24gZXJhc0FiYnJSZWdleChpc1N0cmljdCkge1xuICBpZiAoIWhhc093blByb3AodGhpcywgJ19lcmFzQWJiclJlZ2V4JykpIHtcbiAgICBjb21wdXRlRXJhc1BhcnNlLmNhbGwodGhpcyk7XG4gIH1cblxuICByZXR1cm4gaXNTdHJpY3QgPyB0aGlzLl9lcmFzQWJiclJlZ2V4IDogdGhpcy5fZXJhc1JlZ2V4O1xufVxuXG5mdW5jdGlvbiBlcmFzTmFycm93UmVnZXgoaXNTdHJpY3QpIHtcbiAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfZXJhc05hcnJvd1JlZ2V4JykpIHtcbiAgICBjb21wdXRlRXJhc1BhcnNlLmNhbGwodGhpcyk7XG4gIH1cblxuICByZXR1cm4gaXNTdHJpY3QgPyB0aGlzLl9lcmFzTmFycm93UmVnZXggOiB0aGlzLl9lcmFzUmVnZXg7XG59XG5cbmZ1bmN0aW9uIG1hdGNoRXJhQWJicihpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUuZXJhc0FiYnJSZWdleChpc1N0cmljdCk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoRXJhTmFtZShpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUuZXJhc05hbWVSZWdleChpc1N0cmljdCk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoRXJhTmFycm93KGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5lcmFzTmFycm93UmVnZXgoaXNTdHJpY3QpO1xufVxuXG5mdW5jdGlvbiBtYXRjaEVyYVllYXJPcmRpbmFsKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5fZXJhWWVhck9yZGluYWxSZWdleCB8fCBtYXRjaFVuc2lnbmVkO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlRXJhc1BhcnNlKCkge1xuICB2YXIgYWJiclBpZWNlcyA9IFtdLFxuICAgICAgbmFtZVBpZWNlcyA9IFtdLFxuICAgICAgbmFycm93UGllY2VzID0gW10sXG4gICAgICBtaXhlZFBpZWNlcyA9IFtdLFxuICAgICAgaSxcbiAgICAgIGwsXG4gICAgICBlcmFzID0gdGhpcy5lcmFzKCk7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgbmFtZVBpZWNlcy5wdXNoKHJlZ2V4RXNjYXBlKGVyYXNbaV0ubmFtZSkpO1xuICAgIGFiYnJQaWVjZXMucHVzaChyZWdleEVzY2FwZShlcmFzW2ldLmFiYnIpKTtcbiAgICBuYXJyb3dQaWVjZXMucHVzaChyZWdleEVzY2FwZShlcmFzW2ldLm5hcnJvdykpO1xuICAgIG1peGVkUGllY2VzLnB1c2gocmVnZXhFc2NhcGUoZXJhc1tpXS5uYW1lKSk7XG4gICAgbWl4ZWRQaWVjZXMucHVzaChyZWdleEVzY2FwZShlcmFzW2ldLmFiYnIpKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKHJlZ2V4RXNjYXBlKGVyYXNbaV0ubmFycm93KSk7XG4gIH1cblxuICB0aGlzLl9lcmFzUmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBtaXhlZFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gIHRoaXMuX2VyYXNOYW1lUmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBuYW1lUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgdGhpcy5fZXJhc0FiYnJSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIGFiYnJQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICB0aGlzLl9lcmFzTmFycm93UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBuYXJyb3dQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xufVxuXG5hZGRGb3JtYXRUb2tlbigwLCBbJ2dnJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMud2Vla1llYXIoKSAlIDEwMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydHRycsIDJdLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmlzb1dlZWtZZWFyKCkgJSAxMDA7XG59KTtcblxuZnVuY3Rpb24gYWRkV2Vla1llYXJGb3JtYXRUb2tlbih0b2tlbiwgZ2V0dGVyKSB7XG4gIGFkZEZvcm1hdFRva2VuKDAsIFt0b2tlbiwgdG9rZW4ubGVuZ3RoXSwgMCwgZ2V0dGVyKTtcbn1cblxuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZycsICd3ZWVrWWVhcicpO1xuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZ2cnLCAnd2Vla1llYXInKTtcbmFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ0dHR0cnLCAnaXNvV2Vla1llYXInKTtcbmFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ0dHR0dHJywgJ2lzb1dlZWtZZWFyJyk7XG5hZGRVbml0QWxpYXMoJ3dlZWtZZWFyJywgJ2dnJyk7XG5hZGRVbml0QWxpYXMoJ2lzb1dlZWtZZWFyJywgJ0dHJyk7XG5hZGRVbml0UHJpb3JpdHkoJ3dlZWtZZWFyJywgMSk7XG5hZGRVbml0UHJpb3JpdHkoJ2lzb1dlZWtZZWFyJywgMSk7XG5hZGRSZWdleFRva2VuKCdHJywgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignZycsIG1hdGNoU2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ0dHJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignZ2cnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdHR0dHJywgbWF0Y2gxdG80LCBtYXRjaDQpO1xuYWRkUmVnZXhUb2tlbignZ2dnZycsIG1hdGNoMXRvNCwgbWF0Y2g0KTtcbmFkZFJlZ2V4VG9rZW4oJ0dHR0dHJywgbWF0Y2gxdG82LCBtYXRjaDYpO1xuYWRkUmVnZXhUb2tlbignZ2dnZ2cnLCBtYXRjaDF0bzYsIG1hdGNoNik7XG5hZGRXZWVrUGFyc2VUb2tlbihbJ2dnZ2cnLCAnZ2dnZ2cnLCAnR0dHRycsICdHR0dHRyddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgd2Vla1t0b2tlbi5zdWJzdHIoMCwgMildID0gdG9JbnQoaW5wdXQpO1xufSk7XG5hZGRXZWVrUGFyc2VUb2tlbihbJ2dnJywgJ0dHJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICB3ZWVrW3Rva2VuXSA9IGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRTZXRXZWVrWWVhcihpbnB1dCkge1xuICByZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLCBpbnB1dCwgdGhpcy53ZWVrKCksIHRoaXMud2Vla2RheSgpLCB0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3csIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRveSk7XG59XG5cbmZ1bmN0aW9uIGdldFNldElTT1dlZWtZZWFyKGlucHV0KSB7XG4gIHJldHVybiBnZXRTZXRXZWVrWWVhckhlbHBlci5jYWxsKHRoaXMsIGlucHV0LCB0aGlzLmlzb1dlZWsoKSwgdGhpcy5pc29XZWVrZGF5KCksIDEsIDQpO1xufVxuXG5mdW5jdGlvbiBnZXRJU09XZWVrc0luWWVhcigpIHtcbiAgcmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLCAxLCA0KTtcbn1cblxuZnVuY3Rpb24gZ2V0SVNPV2Vla3NJbklTT1dlZWtZZWFyKCkge1xuICByZXR1cm4gd2Vla3NJblllYXIodGhpcy5pc29XZWVrWWVhcigpLCAxLCA0KTtcbn1cblxuZnVuY3Rpb24gZ2V0V2Vla3NJblllYXIoKSB7XG4gIHZhciB3ZWVrSW5mbyA9IHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrO1xuXG4gIHJldHVybiB3ZWVrc0luWWVhcih0aGlzLnllYXIoKSwgd2Vla0luZm8uZG93LCB3ZWVrSW5mby5kb3kpO1xufVxuXG5mdW5jdGlvbiBnZXRXZWVrc0luV2Vla1llYXIoKSB7XG4gIHZhciB3ZWVrSW5mbyA9IHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrO1xuXG4gIHJldHVybiB3ZWVrc0luWWVhcih0aGlzLndlZWtZZWFyKCksIHdlZWtJbmZvLmRvdywgd2Vla0luZm8uZG95KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0V2Vla1llYXJIZWxwZXIoaW5wdXQsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KSB7XG4gIHZhciB3ZWVrc1RhcmdldDtcblxuICBpZiAoaW5wdXQgPT0gbnVsbCkge1xuICAgIHJldHVybiB3ZWVrT2ZZZWFyKHRoaXMsIGRvdywgZG95KS55ZWFyO1xuICB9IGVsc2Uge1xuICAgIHdlZWtzVGFyZ2V0ID0gd2Vla3NJblllYXIoaW5wdXQsIGRvdywgZG95KTtcblxuICAgIGlmICh3ZWVrID4gd2Vla3NUYXJnZXQpIHtcbiAgICAgIHdlZWsgPSB3ZWVrc1RhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0V2Vla0FsbC5jYWxsKHRoaXMsIGlucHV0LCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0V2Vla0FsbCh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgdmFyIGRheU9mWWVhckRhdGEgPSBkYXlPZlllYXJGcm9tV2Vla3Mod2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KSxcbiAgICAgIGRhdGUgPSBjcmVhdGVVVENEYXRlKGRheU9mWWVhckRhdGEueWVhciwgMCwgZGF5T2ZZZWFyRGF0YS5kYXlPZlllYXIpO1xuICB0aGlzLnllYXIoZGF0ZS5nZXRVVENGdWxsWWVhcigpKTtcbiAgdGhpcy5tb250aChkYXRlLmdldFVUQ01vbnRoKCkpO1xuICB0aGlzLmRhdGUoZGF0ZS5nZXRVVENEYXRlKCkpO1xuICByZXR1cm4gdGhpcztcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ1EnLCAwLCAnUW8nLCAncXVhcnRlcicpO1xuYWRkVW5pdEFsaWFzKCdxdWFydGVyJywgJ1EnKTtcbmFkZFVuaXRQcmlvcml0eSgncXVhcnRlcicsIDcpO1xuYWRkUmVnZXhUb2tlbignUScsIG1hdGNoMSk7XG5hZGRQYXJzZVRva2VuKCdRJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICBhcnJheVtNT05USF0gPSAodG9JbnQoaW5wdXQpIC0gMSkgKiAzO1xufSk7XG5cbmZ1bmN0aW9uIGdldFNldFF1YXJ0ZXIoaW5wdXQpIHtcbiAgcmV0dXJuIGlucHV0ID09IG51bGwgPyBNYXRoLmNlaWwoKHRoaXMubW9udGgoKSArIDEpIC8gMykgOiB0aGlzLm1vbnRoKChpbnB1dCAtIDEpICogMyArIHRoaXMubW9udGgoKSAlIDMpO1xufVxuXG5hZGRGb3JtYXRUb2tlbignRCcsIFsnREQnLCAyXSwgJ0RvJywgJ2RhdGUnKTtcbmFkZFVuaXRBbGlhcygnZGF0ZScsICdEJyk7XG5hZGRVbml0UHJpb3JpdHkoJ2RhdGUnLCA5KTtcbmFkZFJlZ2V4VG9rZW4oJ0QnLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignREQnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdEbycsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBpc1N0cmljdCA/IGxvY2FsZS5fZGF5T2ZNb250aE9yZGluYWxQYXJzZSB8fCBsb2NhbGUuX29yZGluYWxQYXJzZSA6IGxvY2FsZS5fZGF5T2ZNb250aE9yZGluYWxQYXJzZUxlbmllbnQ7XG59KTtcbmFkZFBhcnNlVG9rZW4oWydEJywgJ0REJ10sIERBVEUpO1xuYWRkUGFyc2VUb2tlbignRG8nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gIGFycmF5W0RBVEVdID0gdG9JbnQoaW5wdXQubWF0Y2gobWF0Y2gxdG8yKVswXSk7XG59KTtcbnZhciBnZXRTZXREYXlPZk1vbnRoID0gbWFrZUdldFNldCgnRGF0ZScsIHRydWUpO1xuYWRkRm9ybWF0VG9rZW4oJ0RERCcsIFsnRERERCcsIDNdLCAnREREbycsICdkYXlPZlllYXInKTtcbmFkZFVuaXRBbGlhcygnZGF5T2ZZZWFyJywgJ0RERCcpO1xuYWRkVW5pdFByaW9yaXR5KCdkYXlPZlllYXInLCA0KTtcbmFkZFJlZ2V4VG9rZW4oJ0RERCcsIG1hdGNoMXRvMyk7XG5hZGRSZWdleFRva2VuKCdEREREJywgbWF0Y2gzKTtcbmFkZFBhcnNlVG9rZW4oWydEREQnLCAnRERERCddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgY29uZmlnLl9kYXlPZlllYXIgPSB0b0ludChpbnB1dCk7XG59KTtcblxuZnVuY3Rpb24gZ2V0U2V0RGF5T2ZZZWFyKGlucHV0KSB7XG4gIHZhciBkYXlPZlllYXIgPSBNYXRoLnJvdW5kKCh0aGlzLmNsb25lKCkuc3RhcnRPZignZGF5JykgLSB0aGlzLmNsb25lKCkuc3RhcnRPZigneWVhcicpKSAvIDg2NGU1KSArIDE7XG4gIHJldHVybiBpbnB1dCA9PSBudWxsID8gZGF5T2ZZZWFyIDogdGhpcy5hZGQoaW5wdXQgLSBkYXlPZlllYXIsICdkJyk7XG59XG5cbmFkZEZvcm1hdFRva2VuKCdtJywgWydtbScsIDJdLCAwLCAnbWludXRlJyk7XG5hZGRVbml0QWxpYXMoJ21pbnV0ZScsICdtJyk7XG5hZGRVbml0UHJpb3JpdHkoJ21pbnV0ZScsIDE0KTtcbmFkZFJlZ2V4VG9rZW4oJ20nLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignbW0nLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRQYXJzZVRva2VuKFsnbScsICdtbSddLCBNSU5VVEUpO1xudmFyIGdldFNldE1pbnV0ZSA9IG1ha2VHZXRTZXQoJ01pbnV0ZXMnLCBmYWxzZSk7XG5hZGRGb3JtYXRUb2tlbigncycsIFsnc3MnLCAyXSwgMCwgJ3NlY29uZCcpO1xuYWRkVW5pdEFsaWFzKCdzZWNvbmQnLCAncycpO1xuYWRkVW5pdFByaW9yaXR5KCdzZWNvbmQnLCAxNSk7XG5hZGRSZWdleFRva2VuKCdzJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ3NzJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUGFyc2VUb2tlbihbJ3MnLCAnc3MnXSwgU0VDT05EKTtcbnZhciBnZXRTZXRTZWNvbmQgPSBtYWtlR2V0U2V0KCdTZWNvbmRzJywgZmFsc2UpO1xuYWRkRm9ybWF0VG9rZW4oJ1MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB+fih0aGlzLm1pbGxpc2Vjb25kKCkgLyAxMDApO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIH5+KHRoaXMubWlsbGlzZWNvbmQoKSAvIDEwKTtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1MnLCAzXSwgMCwgJ21pbGxpc2Vjb25kJyk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1MnLCA0XSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1MnLCA1XSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTUycsIDZdLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1MnLCA3XSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwMDA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTU1MnLCA4XSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwMDAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1NTUycsIDldLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDAwO1xufSk7XG5hZGRVbml0QWxpYXMoJ21pbGxpc2Vjb25kJywgJ21zJyk7XG5hZGRVbml0UHJpb3JpdHkoJ21pbGxpc2Vjb25kJywgMTYpO1xuYWRkUmVnZXhUb2tlbignUycsIG1hdGNoMXRvMywgbWF0Y2gxKTtcbmFkZFJlZ2V4VG9rZW4oJ1NTJywgbWF0Y2gxdG8zLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignU1NTJywgbWF0Y2gxdG8zLCBtYXRjaDMpO1xudmFyIHRva2VuLCBnZXRTZXRNaWxsaXNlY29uZDtcblxuZm9yICh0b2tlbiA9ICdTU1NTJzsgdG9rZW4ubGVuZ3RoIDw9IDk7IHRva2VuICs9ICdTJykge1xuICBhZGRSZWdleFRva2VuKHRva2VuLCBtYXRjaFVuc2lnbmVkKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VNcyhpbnB1dCwgYXJyYXkpIHtcbiAgYXJyYXlbTUlMTElTRUNPTkRdID0gdG9JbnQoKCcwLicgKyBpbnB1dCkgKiAxMDAwKTtcbn1cblxuZm9yICh0b2tlbiA9ICdTJzsgdG9rZW4ubGVuZ3RoIDw9IDk7IHRva2VuICs9ICdTJykge1xuICBhZGRQYXJzZVRva2VuKHRva2VuLCBwYXJzZU1zKTtcbn1cblxuZ2V0U2V0TWlsbGlzZWNvbmQgPSBtYWtlR2V0U2V0KCdNaWxsaXNlY29uZHMnLCBmYWxzZSk7XG5hZGRGb3JtYXRUb2tlbigneicsIDAsIDAsICd6b25lQWJicicpO1xuYWRkRm9ybWF0VG9rZW4oJ3p6JywgMCwgMCwgJ3pvbmVOYW1lJyk7XG5cbmZ1bmN0aW9uIGdldFpvbmVBYmJyKCkge1xuICByZXR1cm4gdGhpcy5faXNVVEMgPyAnVVRDJyA6ICcnO1xufVxuXG5mdW5jdGlvbiBnZXRab25lTmFtZSgpIHtcbiAgcmV0dXJuIHRoaXMuX2lzVVRDID8gJ0Nvb3JkaW5hdGVkIFVuaXZlcnNhbCBUaW1lJyA6ICcnO1xufVxuXG52YXIgcHJvdG8gPSBNb21lbnQucHJvdG90eXBlO1xucHJvdG8uYWRkID0gYWRkO1xucHJvdG8uY2FsZW5kYXIgPSBjYWxlbmRhciQxO1xucHJvdG8uY2xvbmUgPSBjbG9uZTtcbnByb3RvLmRpZmYgPSBkaWZmO1xucHJvdG8uZW5kT2YgPSBlbmRPZjtcbnByb3RvLmZvcm1hdCA9IGZvcm1hdDtcbnByb3RvLmZyb20gPSBmcm9tO1xucHJvdG8uZnJvbU5vdyA9IGZyb21Ob3c7XG5wcm90by50byA9IHRvO1xucHJvdG8udG9Ob3cgPSB0b05vdztcbnByb3RvLmdldCA9IHN0cmluZ0dldDtcbnByb3RvLmludmFsaWRBdCA9IGludmFsaWRBdDtcbnByb3RvLmlzQWZ0ZXIgPSBpc0FmdGVyO1xucHJvdG8uaXNCZWZvcmUgPSBpc0JlZm9yZTtcbnByb3RvLmlzQmV0d2VlbiA9IGlzQmV0d2VlbjtcbnByb3RvLmlzU2FtZSA9IGlzU2FtZTtcbnByb3RvLmlzU2FtZU9yQWZ0ZXIgPSBpc1NhbWVPckFmdGVyO1xucHJvdG8uaXNTYW1lT3JCZWZvcmUgPSBpc1NhbWVPckJlZm9yZTtcbnByb3RvLmlzVmFsaWQgPSBpc1ZhbGlkJDI7XG5wcm90by5sYW5nID0gbGFuZztcbnByb3RvLmxvY2FsZSA9IGxvY2FsZTtcbnByb3RvLmxvY2FsZURhdGEgPSBsb2NhbGVEYXRhO1xucHJvdG8ubWF4ID0gcHJvdG90eXBlTWF4O1xucHJvdG8ubWluID0gcHJvdG90eXBlTWluO1xucHJvdG8ucGFyc2luZ0ZsYWdzID0gcGFyc2luZ0ZsYWdzO1xucHJvdG8uc2V0ID0gc3RyaW5nU2V0O1xucHJvdG8uc3RhcnRPZiA9IHN0YXJ0T2Y7XG5wcm90by5zdWJ0cmFjdCA9IHN1YnRyYWN0O1xucHJvdG8udG9BcnJheSA9IHRvQXJyYXk7XG5wcm90by50b09iamVjdCA9IHRvT2JqZWN0O1xucHJvdG8udG9EYXRlID0gdG9EYXRlO1xucHJvdG8udG9JU09TdHJpbmcgPSB0b0lTT1N0cmluZztcbnByb3RvLmluc3BlY3QgPSBpbnNwZWN0O1xuXG5pZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLmZvciAhPSBudWxsKSB7XG4gIHByb3RvW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnTW9tZW50PCcgKyB0aGlzLmZvcm1hdCgpICsgJz4nO1xuICB9O1xufVxuXG5wcm90by50b0pTT04gPSB0b0pTT047XG5wcm90by50b1N0cmluZyA9IHRvU3RyaW5nO1xucHJvdG8udW5peCA9IHVuaXg7XG5wcm90by52YWx1ZU9mID0gdmFsdWVPZjtcbnByb3RvLmNyZWF0aW9uRGF0YSA9IGNyZWF0aW9uRGF0YTtcbnByb3RvLmVyYU5hbWUgPSBnZXRFcmFOYW1lO1xucHJvdG8uZXJhTmFycm93ID0gZ2V0RXJhTmFycm93O1xucHJvdG8uZXJhQWJiciA9IGdldEVyYUFiYnI7XG5wcm90by5lcmFZZWFyID0gZ2V0RXJhWWVhcjtcbnByb3RvLnllYXIgPSBnZXRTZXRZZWFyO1xucHJvdG8uaXNMZWFwWWVhciA9IGdldElzTGVhcFllYXI7XG5wcm90by53ZWVrWWVhciA9IGdldFNldFdlZWtZZWFyO1xucHJvdG8uaXNvV2Vla1llYXIgPSBnZXRTZXRJU09XZWVrWWVhcjtcbnByb3RvLnF1YXJ0ZXIgPSBwcm90by5xdWFydGVycyA9IGdldFNldFF1YXJ0ZXI7XG5wcm90by5tb250aCA9IGdldFNldE1vbnRoO1xucHJvdG8uZGF5c0luTW9udGggPSBnZXREYXlzSW5Nb250aDtcbnByb3RvLndlZWsgPSBwcm90by53ZWVrcyA9IGdldFNldFdlZWs7XG5wcm90by5pc29XZWVrID0gcHJvdG8uaXNvV2Vla3MgPSBnZXRTZXRJU09XZWVrO1xucHJvdG8ud2Vla3NJblllYXIgPSBnZXRXZWVrc0luWWVhcjtcbnByb3RvLndlZWtzSW5XZWVrWWVhciA9IGdldFdlZWtzSW5XZWVrWWVhcjtcbnByb3RvLmlzb1dlZWtzSW5ZZWFyID0gZ2V0SVNPV2Vla3NJblllYXI7XG5wcm90by5pc29XZWVrc0luSVNPV2Vla1llYXIgPSBnZXRJU09XZWVrc0luSVNPV2Vla1llYXI7XG5wcm90by5kYXRlID0gZ2V0U2V0RGF5T2ZNb250aDtcbnByb3RvLmRheSA9IHByb3RvLmRheXMgPSBnZXRTZXREYXlPZldlZWs7XG5wcm90by53ZWVrZGF5ID0gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrO1xucHJvdG8uaXNvV2Vla2RheSA9IGdldFNldElTT0RheU9mV2VlaztcbnByb3RvLmRheU9mWWVhciA9IGdldFNldERheU9mWWVhcjtcbnByb3RvLmhvdXIgPSBwcm90by5ob3VycyA9IGdldFNldEhvdXI7XG5wcm90by5taW51dGUgPSBwcm90by5taW51dGVzID0gZ2V0U2V0TWludXRlO1xucHJvdG8uc2Vjb25kID0gcHJvdG8uc2Vjb25kcyA9IGdldFNldFNlY29uZDtcbnByb3RvLm1pbGxpc2Vjb25kID0gcHJvdG8ubWlsbGlzZWNvbmRzID0gZ2V0U2V0TWlsbGlzZWNvbmQ7XG5wcm90by51dGNPZmZzZXQgPSBnZXRTZXRPZmZzZXQ7XG5wcm90by51dGMgPSBzZXRPZmZzZXRUb1VUQztcbnByb3RvLmxvY2FsID0gc2V0T2Zmc2V0VG9Mb2NhbDtcbnByb3RvLnBhcnNlWm9uZSA9IHNldE9mZnNldFRvUGFyc2VkT2Zmc2V0O1xucHJvdG8uaGFzQWxpZ25lZEhvdXJPZmZzZXQgPSBoYXNBbGlnbmVkSG91ck9mZnNldDtcbnByb3RvLmlzRFNUID0gaXNEYXlsaWdodFNhdmluZ1RpbWU7XG5wcm90by5pc0xvY2FsID0gaXNMb2NhbDtcbnByb3RvLmlzVXRjT2Zmc2V0ID0gaXNVdGNPZmZzZXQ7XG5wcm90by5pc1V0YyA9IGlzVXRjO1xucHJvdG8uaXNVVEMgPSBpc1V0YztcbnByb3RvLnpvbmVBYmJyID0gZ2V0Wm9uZUFiYnI7XG5wcm90by56b25lTmFtZSA9IGdldFpvbmVOYW1lO1xucHJvdG8uZGF0ZXMgPSBkZXByZWNhdGUoJ2RhdGVzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBkYXRlIGluc3RlYWQuJywgZ2V0U2V0RGF5T2ZNb250aCk7XG5wcm90by5tb250aHMgPSBkZXByZWNhdGUoJ21vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZCcsIGdldFNldE1vbnRoKTtcbnByb3RvLnllYXJzID0gZGVwcmVjYXRlKCd5ZWFycyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgeWVhciBpbnN0ZWFkJywgZ2V0U2V0WWVhcik7XG5wcm90by56b25lID0gZGVwcmVjYXRlKCdtb21lbnQoKS56b25lIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQoKS51dGNPZmZzZXQgaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy96b25lLycsIGdldFNldFpvbmUpO1xucHJvdG8uaXNEU1RTaGlmdGVkID0gZGVwcmVjYXRlKCdpc0RTVFNoaWZ0ZWQgaXMgZGVwcmVjYXRlZC4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvZHN0LXNoaWZ0ZWQvIGZvciBtb3JlIGluZm9ybWF0aW9uJywgaXNEYXlsaWdodFNhdmluZ1RpbWVTaGlmdGVkKTtcblxuZnVuY3Rpb24gY3JlYXRlVW5peChpbnB1dCkge1xuICByZXR1cm4gY3JlYXRlTG9jYWwoaW5wdXQgKiAxMDAwKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5ab25lKCkge1xuICByZXR1cm4gY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5wYXJzZVpvbmUoKTtcbn1cblxuZnVuY3Rpb24gcHJlUGFyc2VQb3N0Rm9ybWF0KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nO1xufVxuXG52YXIgcHJvdG8kMSA9IExvY2FsZS5wcm90b3R5cGU7XG5wcm90byQxLmNhbGVuZGFyID0gY2FsZW5kYXI7XG5wcm90byQxLmxvbmdEYXRlRm9ybWF0ID0gbG9uZ0RhdGVGb3JtYXQ7XG5wcm90byQxLmludmFsaWREYXRlID0gaW52YWxpZERhdGU7XG5wcm90byQxLm9yZGluYWwgPSBvcmRpbmFsO1xucHJvdG8kMS5wcmVwYXJzZSA9IHByZVBhcnNlUG9zdEZvcm1hdDtcbnByb3RvJDEucG9zdGZvcm1hdCA9IHByZVBhcnNlUG9zdEZvcm1hdDtcbnByb3RvJDEucmVsYXRpdmVUaW1lID0gcmVsYXRpdmVUaW1lO1xucHJvdG8kMS5wYXN0RnV0dXJlID0gcGFzdEZ1dHVyZTtcbnByb3RvJDEuc2V0ID0gc2V0O1xucHJvdG8kMS5lcmFzID0gbG9jYWxlRXJhcztcbnByb3RvJDEuZXJhc1BhcnNlID0gbG9jYWxlRXJhc1BhcnNlO1xucHJvdG8kMS5lcmFzQ29udmVydFllYXIgPSBsb2NhbGVFcmFzQ29udmVydFllYXI7XG5wcm90byQxLmVyYXNBYmJyUmVnZXggPSBlcmFzQWJiclJlZ2V4O1xucHJvdG8kMS5lcmFzTmFtZVJlZ2V4ID0gZXJhc05hbWVSZWdleDtcbnByb3RvJDEuZXJhc05hcnJvd1JlZ2V4ID0gZXJhc05hcnJvd1JlZ2V4O1xucHJvdG8kMS5tb250aHMgPSBsb2NhbGVNb250aHM7XG5wcm90byQxLm1vbnRoc1Nob3J0ID0gbG9jYWxlTW9udGhzU2hvcnQ7XG5wcm90byQxLm1vbnRoc1BhcnNlID0gbG9jYWxlTW9udGhzUGFyc2U7XG5wcm90byQxLm1vbnRoc1JlZ2V4ID0gbW9udGhzUmVnZXg7XG5wcm90byQxLm1vbnRoc1Nob3J0UmVnZXggPSBtb250aHNTaG9ydFJlZ2V4O1xucHJvdG8kMS53ZWVrID0gbG9jYWxlV2VlaztcbnByb3RvJDEuZmlyc3REYXlPZlllYXIgPSBsb2NhbGVGaXJzdERheU9mWWVhcjtcbnByb3RvJDEuZmlyc3REYXlPZldlZWsgPSBsb2NhbGVGaXJzdERheU9mV2VlaztcbnByb3RvJDEud2Vla2RheXMgPSBsb2NhbGVXZWVrZGF5cztcbnByb3RvJDEud2Vla2RheXNNaW4gPSBsb2NhbGVXZWVrZGF5c01pbjtcbnByb3RvJDEud2Vla2RheXNTaG9ydCA9IGxvY2FsZVdlZWtkYXlzU2hvcnQ7XG5wcm90byQxLndlZWtkYXlzUGFyc2UgPSBsb2NhbGVXZWVrZGF5c1BhcnNlO1xucHJvdG8kMS53ZWVrZGF5c1JlZ2V4ID0gd2Vla2RheXNSZWdleDtcbnByb3RvJDEud2Vla2RheXNTaG9ydFJlZ2V4ID0gd2Vla2RheXNTaG9ydFJlZ2V4O1xucHJvdG8kMS53ZWVrZGF5c01pblJlZ2V4ID0gd2Vla2RheXNNaW5SZWdleDtcbnByb3RvJDEuaXNQTSA9IGxvY2FsZUlzUE07XG5wcm90byQxLm1lcmlkaWVtID0gbG9jYWxlTWVyaWRpZW07XG5cbmZ1bmN0aW9uIGdldCQxKGZvcm1hdCwgaW5kZXgsIGZpZWxkLCBzZXR0ZXIpIHtcbiAgdmFyIGxvY2FsZSA9IGdldExvY2FsZSgpLFxuICAgICAgdXRjID0gY3JlYXRlVVRDKCkuc2V0KHNldHRlciwgaW5kZXgpO1xuICByZXR1cm4gbG9jYWxlW2ZpZWxkXSh1dGMsIGZvcm1hdCk7XG59XG5cbmZ1bmN0aW9uIGxpc3RNb250aHNJbXBsKGZvcm1hdCwgaW5kZXgsIGZpZWxkKSB7XG4gIGlmIChpc051bWJlcihmb3JtYXQpKSB7XG4gICAgaW5kZXggPSBmb3JtYXQ7XG4gICAgZm9ybWF0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZm9ybWF0ID0gZm9ybWF0IHx8ICcnO1xuXG4gIGlmIChpbmRleCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIGdldCQxKGZvcm1hdCwgaW5kZXgsIGZpZWxkLCAnbW9udGgnKTtcbiAgfVxuXG4gIHZhciBpLFxuICAgICAgb3V0ID0gW107XG5cbiAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICBvdXRbaV0gPSBnZXQkMShmb3JtYXQsIGksIGZpZWxkLCAnbW9udGgnKTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4LCBmaWVsZCkge1xuICBpZiAodHlwZW9mIGxvY2FsZVNvcnRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgaWYgKGlzTnVtYmVyKGZvcm1hdCkpIHtcbiAgICAgIGluZGV4ID0gZm9ybWF0O1xuICAgICAgZm9ybWF0ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnJztcbiAgfSBlbHNlIHtcbiAgICBmb3JtYXQgPSBsb2NhbGVTb3J0ZWQ7XG4gICAgaW5kZXggPSBmb3JtYXQ7XG4gICAgbG9jYWxlU29ydGVkID0gZmFsc2U7XG5cbiAgICBpZiAoaXNOdW1iZXIoZm9ybWF0KSkge1xuICAgICAgaW5kZXggPSBmb3JtYXQ7XG4gICAgICBmb3JtYXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICcnO1xuICB9XG5cbiAgdmFyIGxvY2FsZSA9IGdldExvY2FsZSgpLFxuICAgICAgc2hpZnQgPSBsb2NhbGVTb3J0ZWQgPyBsb2NhbGUuX3dlZWsuZG93IDogMCxcbiAgICAgIGksXG4gICAgICBvdXQgPSBbXTtcblxuICBpZiAoaW5kZXggIT0gbnVsbCkge1xuICAgIHJldHVybiBnZXQkMShmb3JtYXQsIChpbmRleCArIHNoaWZ0KSAlIDcsIGZpZWxkLCAnZGF5Jyk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgb3V0W2ldID0gZ2V0JDEoZm9ybWF0LCAoaSArIHNoaWZ0KSAlIDcsIGZpZWxkLCAnZGF5Jyk7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBsaXN0TW9udGhzKGZvcm1hdCwgaW5kZXgpIHtcbiAgcmV0dXJuIGxpc3RNb250aHNJbXBsKGZvcm1hdCwgaW5kZXgsICdtb250aHMnKTtcbn1cblxuZnVuY3Rpb24gbGlzdE1vbnRoc1Nob3J0KGZvcm1hdCwgaW5kZXgpIHtcbiAgcmV0dXJuIGxpc3RNb250aHNJbXBsKGZvcm1hdCwgaW5kZXgsICdtb250aHNTaG9ydCcpO1xufVxuXG5mdW5jdGlvbiBsaXN0V2Vla2RheXMobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4KSB7XG4gIHJldHVybiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCwgJ3dlZWtkYXlzJyk7XG59XG5cbmZ1bmN0aW9uIGxpc3RXZWVrZGF5c1Nob3J0KGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCkge1xuICByZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgsICd3ZWVrZGF5c1Nob3J0Jyk7XG59XG5cbmZ1bmN0aW9uIGxpc3RXZWVrZGF5c01pbihsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgpIHtcbiAgcmV0dXJuIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4LCAnd2Vla2RheXNNaW4nKTtcbn1cblxuZ2V0U2V0R2xvYmFsTG9jYWxlKCdlbicsIHtcbiAgZXJhczogW3tcbiAgICBzaW5jZTogJzAwMDEtMDEtMDEnLFxuICAgIHVudGlsOiArSW5maW5pdHksXG4gICAgb2Zmc2V0OiAxLFxuICAgIG5hbWU6ICdBbm5vIERvbWluaScsXG4gICAgbmFycm93OiAnQUQnLFxuICAgIGFiYnI6ICdBRCdcbiAgfSwge1xuICAgIHNpbmNlOiAnMDAwMC0xMi0zMScsXG4gICAgdW50aWw6IC1JbmZpbml0eSxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ0JlZm9yZSBDaHJpc3QnLFxuICAgIG5hcnJvdzogJ0JDJyxcbiAgICBhYmJyOiAnQkMnXG4gIH1dLFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0odGh8c3R8bmR8cmQpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICBvdXRwdXQgPSB0b0ludChudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEgPyAndGgnIDogYiA9PT0gMSA/ICdzdCcgOiBiID09PSAyID8gJ25kJyA6IGIgPT09IDMgPyAncmQnIDogJ3RoJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9XG59KTtcbmhvb2tzLmxhbmcgPSBkZXByZWNhdGUoJ21vbWVudC5sYW5nIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlIGluc3RlYWQuJywgZ2V0U2V0R2xvYmFsTG9jYWxlKTtcbmhvb2tzLmxhbmdEYXRhID0gZGVwcmVjYXRlKCdtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuJywgZ2V0TG9jYWxlKTtcbnZhciBtYXRoQWJzID0gTWF0aC5hYnM7XG5cbmZ1bmN0aW9uIGFicygpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhO1xuICB0aGlzLl9taWxsaXNlY29uZHMgPSBtYXRoQWJzKHRoaXMuX21pbGxpc2Vjb25kcyk7XG4gIHRoaXMuX2RheXMgPSBtYXRoQWJzKHRoaXMuX2RheXMpO1xuICB0aGlzLl9tb250aHMgPSBtYXRoQWJzKHRoaXMuX21vbnRocyk7XG4gIGRhdGEubWlsbGlzZWNvbmRzID0gbWF0aEFicyhkYXRhLm1pbGxpc2Vjb25kcyk7XG4gIGRhdGEuc2Vjb25kcyA9IG1hdGhBYnMoZGF0YS5zZWNvbmRzKTtcbiAgZGF0YS5taW51dGVzID0gbWF0aEFicyhkYXRhLm1pbnV0ZXMpO1xuICBkYXRhLmhvdXJzID0gbWF0aEFicyhkYXRhLmhvdXJzKTtcbiAgZGF0YS5tb250aHMgPSBtYXRoQWJzKGRhdGEubW9udGhzKTtcbiAgZGF0YS55ZWFycyA9IG1hdGhBYnMoZGF0YS55ZWFycyk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBhZGRTdWJ0cmFjdCQxKGR1cmF0aW9uLCBpbnB1dCwgdmFsdWUsIGRpcmVjdGlvbikge1xuICB2YXIgb3RoZXIgPSBjcmVhdGVEdXJhdGlvbihpbnB1dCwgdmFsdWUpO1xuICBkdXJhdGlvbi5fbWlsbGlzZWNvbmRzICs9IGRpcmVjdGlvbiAqIG90aGVyLl9taWxsaXNlY29uZHM7XG4gIGR1cmF0aW9uLl9kYXlzICs9IGRpcmVjdGlvbiAqIG90aGVyLl9kYXlzO1xuICBkdXJhdGlvbi5fbW9udGhzICs9IGRpcmVjdGlvbiAqIG90aGVyLl9tb250aHM7XG4gIHJldHVybiBkdXJhdGlvbi5fYnViYmxlKCk7XG59XG5cbmZ1bmN0aW9uIGFkZCQxKGlucHV0LCB2YWx1ZSkge1xuICByZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLCBpbnB1dCwgdmFsdWUsIDEpO1xufVxuXG5mdW5jdGlvbiBzdWJ0cmFjdCQxKGlucHV0LCB2YWx1ZSkge1xuICByZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLCBpbnB1dCwgdmFsdWUsIC0xKTtcbn1cblxuZnVuY3Rpb24gYWJzQ2VpbChudW1iZXIpIHtcbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBNYXRoLmNlaWwobnVtYmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBidWJibGUoKSB7XG4gIHZhciBtaWxsaXNlY29uZHMgPSB0aGlzLl9taWxsaXNlY29uZHMsXG4gICAgICBkYXlzID0gdGhpcy5fZGF5cyxcbiAgICAgIG1vbnRocyA9IHRoaXMuX21vbnRocyxcbiAgICAgIGRhdGEgPSB0aGlzLl9kYXRhLFxuICAgICAgc2Vjb25kcyxcbiAgICAgIG1pbnV0ZXMsXG4gICAgICBob3VycyxcbiAgICAgIHllYXJzLFxuICAgICAgbW9udGhzRnJvbURheXM7XG5cbiAgaWYgKCEobWlsbGlzZWNvbmRzID49IDAgJiYgZGF5cyA+PSAwICYmIG1vbnRocyA+PSAwIHx8IG1pbGxpc2Vjb25kcyA8PSAwICYmIGRheXMgPD0gMCAmJiBtb250aHMgPD0gMCkpIHtcbiAgICBtaWxsaXNlY29uZHMgKz0gYWJzQ2VpbChtb250aHNUb0RheXMobW9udGhzKSArIGRheXMpICogODY0ZTU7XG4gICAgZGF5cyA9IDA7XG4gICAgbW9udGhzID0gMDtcbiAgfVxuXG4gIGRhdGEubWlsbGlzZWNvbmRzID0gbWlsbGlzZWNvbmRzICUgMTAwMDtcbiAgc2Vjb25kcyA9IGFic0Zsb29yKG1pbGxpc2Vjb25kcyAvIDEwMDApO1xuICBkYXRhLnNlY29uZHMgPSBzZWNvbmRzICUgNjA7XG4gIG1pbnV0ZXMgPSBhYnNGbG9vcihzZWNvbmRzIC8gNjApO1xuICBkYXRhLm1pbnV0ZXMgPSBtaW51dGVzICUgNjA7XG4gIGhvdXJzID0gYWJzRmxvb3IobWludXRlcyAvIDYwKTtcbiAgZGF0YS5ob3VycyA9IGhvdXJzICUgMjQ7XG4gIGRheXMgKz0gYWJzRmxvb3IoaG91cnMgLyAyNCk7XG4gIG1vbnRoc0Zyb21EYXlzID0gYWJzRmxvb3IoZGF5c1RvTW9udGhzKGRheXMpKTtcbiAgbW9udGhzICs9IG1vbnRoc0Zyb21EYXlzO1xuICBkYXlzIC09IGFic0NlaWwobW9udGhzVG9EYXlzKG1vbnRoc0Zyb21EYXlzKSk7XG4gIHllYXJzID0gYWJzRmxvb3IobW9udGhzIC8gMTIpO1xuICBtb250aHMgJT0gMTI7XG4gIGRhdGEuZGF5cyA9IGRheXM7XG4gIGRhdGEubW9udGhzID0gbW9udGhzO1xuICBkYXRhLnllYXJzID0geWVhcnM7XG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBkYXlzVG9Nb250aHMoZGF5cykge1xuICByZXR1cm4gZGF5cyAqIDQ4MDAgLyAxNDYwOTc7XG59XG5cbmZ1bmN0aW9uIG1vbnRoc1RvRGF5cyhtb250aHMpIHtcbiAgcmV0dXJuIG1vbnRocyAqIDE0NjA5NyAvIDQ4MDA7XG59XG5cbmZ1bmN0aW9uIGFzKHVuaXRzKSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIGRheXMsXG4gICAgICBtb250aHMsXG4gICAgICBtaWxsaXNlY29uZHMgPSB0aGlzLl9taWxsaXNlY29uZHM7XG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gIGlmICh1bml0cyA9PT0gJ21vbnRoJyB8fCB1bml0cyA9PT0gJ3F1YXJ0ZXInIHx8IHVuaXRzID09PSAneWVhcicpIHtcbiAgICBkYXlzID0gdGhpcy5fZGF5cyArIG1pbGxpc2Vjb25kcyAvIDg2NGU1O1xuICAgIG1vbnRocyA9IHRoaXMuX21vbnRocyArIGRheXNUb01vbnRocyhkYXlzKTtcblxuICAgIHN3aXRjaCAodW5pdHMpIHtcbiAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgcmV0dXJuIG1vbnRocztcblxuICAgICAgY2FzZSAncXVhcnRlcic6XG4gICAgICAgIHJldHVybiBtb250aHMgLyAzO1xuXG4gICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgcmV0dXJuIG1vbnRocyAvIDEyO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBkYXlzID0gdGhpcy5fZGF5cyArIE1hdGgucm91bmQobW9udGhzVG9EYXlzKHRoaXMuX21vbnRocykpO1xuXG4gICAgc3dpdGNoICh1bml0cykge1xuICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgIHJldHVybiBkYXlzIC8gNyArIG1pbGxpc2Vjb25kcyAvIDYwNDhlNTtcblxuICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgcmV0dXJuIGRheXMgKyBtaWxsaXNlY29uZHMgLyA4NjRlNTtcblxuICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgIHJldHVybiBkYXlzICogMjQgKyBtaWxsaXNlY29uZHMgLyAzNmU1O1xuXG4gICAgICBjYXNlICdtaW51dGUnOlxuICAgICAgICByZXR1cm4gZGF5cyAqIDE0NDAgKyBtaWxsaXNlY29uZHMgLyA2ZTQ7XG5cbiAgICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgICAgIHJldHVybiBkYXlzICogODY0MDAgKyBtaWxsaXNlY29uZHMgLyAxMDAwO1xuXG4gICAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKGRheXMgKiA4NjRlNSkgKyBtaWxsaXNlY29uZHM7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biB1bml0ICcgKyB1bml0cyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZhbHVlT2YkMSgpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICByZXR1cm4gdGhpcy5fbWlsbGlzZWNvbmRzICsgdGhpcy5fZGF5cyAqIDg2NGU1ICsgdGhpcy5fbW9udGhzICUgMTIgKiAyNTkyZTYgKyB0b0ludCh0aGlzLl9tb250aHMgLyAxMikgKiAzMTUzNmU2O1xufVxuXG5mdW5jdGlvbiBtYWtlQXMoYWxpYXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hcyhhbGlhcyk7XG4gIH07XG59XG5cbnZhciBhc01pbGxpc2Vjb25kcyA9IG1ha2VBcygnbXMnKSxcbiAgICBhc1NlY29uZHMgPSBtYWtlQXMoJ3MnKSxcbiAgICBhc01pbnV0ZXMgPSBtYWtlQXMoJ20nKSxcbiAgICBhc0hvdXJzID0gbWFrZUFzKCdoJyksXG4gICAgYXNEYXlzID0gbWFrZUFzKCdkJyksXG4gICAgYXNXZWVrcyA9IG1ha2VBcygndycpLFxuICAgIGFzTW9udGhzID0gbWFrZUFzKCdNJyksXG4gICAgYXNRdWFydGVycyA9IG1ha2VBcygnUScpLFxuICAgIGFzWWVhcnMgPSBtYWtlQXMoJ3knKTtcblxuZnVuY3Rpb24gY2xvbmUkMSgpIHtcbiAgcmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBnZXQkMih1bml0cykge1xuICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcbiAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpc1t1bml0cyArICdzJ10oKSA6IE5hTjtcbn1cblxuZnVuY3Rpb24gbWFrZUdldHRlcihuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5fZGF0YVtuYW1lXSA6IE5hTjtcbiAgfTtcbn1cblxudmFyIG1pbGxpc2Vjb25kcyA9IG1ha2VHZXR0ZXIoJ21pbGxpc2Vjb25kcycpLFxuICAgIHNlY29uZHMgPSBtYWtlR2V0dGVyKCdzZWNvbmRzJyksXG4gICAgbWludXRlcyA9IG1ha2VHZXR0ZXIoJ21pbnV0ZXMnKSxcbiAgICBob3VycyA9IG1ha2VHZXR0ZXIoJ2hvdXJzJyksXG4gICAgZGF5cyA9IG1ha2VHZXR0ZXIoJ2RheXMnKSxcbiAgICBtb250aHMgPSBtYWtlR2V0dGVyKCdtb250aHMnKSxcbiAgICB5ZWFycyA9IG1ha2VHZXR0ZXIoJ3llYXJzJyk7XG5cbmZ1bmN0aW9uIHdlZWtzKCkge1xuICByZXR1cm4gYWJzRmxvb3IodGhpcy5kYXlzKCkgLyA3KTtcbn1cblxudmFyIHJvdW5kID0gTWF0aC5yb3VuZCxcbiAgICB0aHJlc2hvbGRzID0ge1xuICBzczogNDQsXG4gIHM6IDQ1LFxuICBtOiA0NSxcbiAgaDogMjIsXG4gIGQ6IDI2LFxuICB3OiBudWxsLFxuICBNOiAxMVxufTtcblxuZnVuY3Rpb24gc3Vic3RpdHV0ZVRpbWVBZ28oc3RyaW5nLCBudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGlzRnV0dXJlLCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5yZWxhdGl2ZVRpbWUobnVtYmVyIHx8IDEsICEhd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSk7XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZSQxKHBvc05lZ0R1cmF0aW9uLCB3aXRob3V0U3VmZml4LCB0aHJlc2hvbGRzLCBsb2NhbGUpIHtcbiAgdmFyIGR1cmF0aW9uID0gY3JlYXRlRHVyYXRpb24ocG9zTmVnRHVyYXRpb24pLmFicygpLFxuICAgICAgc2Vjb25kcyA9IHJvdW5kKGR1cmF0aW9uLmFzKCdzJykpLFxuICAgICAgbWludXRlcyA9IHJvdW5kKGR1cmF0aW9uLmFzKCdtJykpLFxuICAgICAgaG91cnMgPSByb3VuZChkdXJhdGlvbi5hcygnaCcpKSxcbiAgICAgIGRheXMgPSByb3VuZChkdXJhdGlvbi5hcygnZCcpKSxcbiAgICAgIG1vbnRocyA9IHJvdW5kKGR1cmF0aW9uLmFzKCdNJykpLFxuICAgICAgd2Vla3MgPSByb3VuZChkdXJhdGlvbi5hcygndycpKSxcbiAgICAgIHllYXJzID0gcm91bmQoZHVyYXRpb24uYXMoJ3knKSksXG4gICAgICBhID0gc2Vjb25kcyA8PSB0aHJlc2hvbGRzLnNzICYmIFsncycsIHNlY29uZHNdIHx8IHNlY29uZHMgPCB0aHJlc2hvbGRzLnMgJiYgWydzcycsIHNlY29uZHNdIHx8IG1pbnV0ZXMgPD0gMSAmJiBbJ20nXSB8fCBtaW51dGVzIDwgdGhyZXNob2xkcy5tICYmIFsnbW0nLCBtaW51dGVzXSB8fCBob3VycyA8PSAxICYmIFsnaCddIHx8IGhvdXJzIDwgdGhyZXNob2xkcy5oICYmIFsnaGgnLCBob3Vyc10gfHwgZGF5cyA8PSAxICYmIFsnZCddIHx8IGRheXMgPCB0aHJlc2hvbGRzLmQgJiYgWydkZCcsIGRheXNdO1xuXG4gIGlmICh0aHJlc2hvbGRzLncgIT0gbnVsbCkge1xuICAgIGEgPSBhIHx8IHdlZWtzIDw9IDEgJiYgWyd3J10gfHwgd2Vla3MgPCB0aHJlc2hvbGRzLncgJiYgWyd3dycsIHdlZWtzXTtcbiAgfVxuXG4gIGEgPSBhIHx8IG1vbnRocyA8PSAxICYmIFsnTSddIHx8IG1vbnRocyA8IHRocmVzaG9sZHMuTSAmJiBbJ01NJywgbW9udGhzXSB8fCB5ZWFycyA8PSAxICYmIFsneSddIHx8IFsneXknLCB5ZWFyc107XG4gIGFbMl0gPSB3aXRob3V0U3VmZml4O1xuICBhWzNdID0gK3Bvc05lZ0R1cmF0aW9uID4gMDtcbiAgYVs0XSA9IGxvY2FsZTtcbiAgcmV0dXJuIHN1YnN0aXR1dGVUaW1lQWdvLmFwcGx5KG51bGwsIGEpO1xufVxuXG5mdW5jdGlvbiBnZXRTZXRSZWxhdGl2ZVRpbWVSb3VuZGluZyhyb3VuZGluZ0Z1bmN0aW9uKSB7XG4gIGlmIChyb3VuZGluZ0Z1bmN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gcm91bmQ7XG4gIH1cblxuICBpZiAodHlwZW9mIHJvdW5kaW5nRnVuY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICByb3VuZCA9IHJvdW5kaW5nRnVuY3Rpb247XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldFNldFJlbGF0aXZlVGltZVRocmVzaG9sZCh0aHJlc2hvbGQsIGxpbWl0KSB7XG4gIGlmICh0aHJlc2hvbGRzW3RocmVzaG9sZF0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChsaW1pdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRocmVzaG9sZHNbdGhyZXNob2xkXTtcbiAgfVxuXG4gIHRocmVzaG9sZHNbdGhyZXNob2xkXSA9IGxpbWl0O1xuXG4gIGlmICh0aHJlc2hvbGQgPT09ICdzJykge1xuICAgIHRocmVzaG9sZHMuc3MgPSBsaW1pdCAtIDE7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaHVtYW5pemUoYXJnV2l0aFN1ZmZpeCwgYXJnVGhyZXNob2xkcykge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gIH1cblxuICB2YXIgd2l0aFN1ZmZpeCA9IGZhbHNlLFxuICAgICAgdGggPSB0aHJlc2hvbGRzLFxuICAgICAgbG9jYWxlLFxuICAgICAgb3V0cHV0O1xuXG4gIGlmICh0eXBlb2YgYXJnV2l0aFN1ZmZpeCA9PT0gJ29iamVjdCcpIHtcbiAgICBhcmdUaHJlc2hvbGRzID0gYXJnV2l0aFN1ZmZpeDtcbiAgICBhcmdXaXRoU3VmZml4ID0gZmFsc2U7XG4gIH1cblxuICBpZiAodHlwZW9mIGFyZ1dpdGhTdWZmaXggPT09ICdib29sZWFuJykge1xuICAgIHdpdGhTdWZmaXggPSBhcmdXaXRoU3VmZml4O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBhcmdUaHJlc2hvbGRzID09PSAnb2JqZWN0Jykge1xuICAgIHRoID0gT2JqZWN0LmFzc2lnbih7fSwgdGhyZXNob2xkcywgYXJnVGhyZXNob2xkcyk7XG5cbiAgICBpZiAoYXJnVGhyZXNob2xkcy5zICE9IG51bGwgJiYgYXJnVGhyZXNob2xkcy5zcyA9PSBudWxsKSB7XG4gICAgICB0aC5zcyA9IGFyZ1RocmVzaG9sZHMucyAtIDE7XG4gICAgfVxuICB9XG5cbiAgbG9jYWxlID0gdGhpcy5sb2NhbGVEYXRhKCk7XG4gIG91dHB1dCA9IHJlbGF0aXZlVGltZSQxKHRoaXMsICF3aXRoU3VmZml4LCB0aCwgbG9jYWxlKTtcblxuICBpZiAod2l0aFN1ZmZpeCkge1xuICAgIG91dHB1dCA9IGxvY2FsZS5wYXN0RnV0dXJlKCt0aGlzLCBvdXRwdXQpO1xuICB9XG5cbiAgcmV0dXJuIGxvY2FsZS5wb3N0Zm9ybWF0KG91dHB1dCk7XG59XG5cbnZhciBhYnMkMSA9IE1hdGguYWJzO1xuXG5mdW5jdGlvbiBzaWduKHgpIHtcbiAgcmV0dXJuICh4ID4gMCkgLSAoeCA8IDApIHx8ICt4O1xufVxuXG5mdW5jdGlvbiB0b0lTT1N0cmluZyQxKCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gIH1cblxuICB2YXIgc2Vjb25kcyA9IGFicyQxKHRoaXMuX21pbGxpc2Vjb25kcykgLyAxMDAwLFxuICAgICAgZGF5cyA9IGFicyQxKHRoaXMuX2RheXMpLFxuICAgICAgbW9udGhzID0gYWJzJDEodGhpcy5fbW9udGhzKSxcbiAgICAgIG1pbnV0ZXMsXG4gICAgICBob3VycyxcbiAgICAgIHllYXJzLFxuICAgICAgcyxcbiAgICAgIHRvdGFsID0gdGhpcy5hc1NlY29uZHMoKSxcbiAgICAgIHRvdGFsU2lnbixcbiAgICAgIHltU2lnbixcbiAgICAgIGRheXNTaWduLFxuICAgICAgaG1zU2lnbjtcblxuICBpZiAoIXRvdGFsKSB7XG4gICAgcmV0dXJuICdQMEQnO1xuICB9XG5cbiAgbWludXRlcyA9IGFic0Zsb29yKHNlY29uZHMgLyA2MCk7XG4gIGhvdXJzID0gYWJzRmxvb3IobWludXRlcyAvIDYwKTtcbiAgc2Vjb25kcyAlPSA2MDtcbiAgbWludXRlcyAlPSA2MDtcbiAgeWVhcnMgPSBhYnNGbG9vcihtb250aHMgLyAxMik7XG4gIG1vbnRocyAlPSAxMjtcbiAgcyA9IHNlY29uZHMgPyBzZWNvbmRzLnRvRml4ZWQoMykucmVwbGFjZSgvXFwuPzArJC8sICcnKSA6ICcnO1xuICB0b3RhbFNpZ24gPSB0b3RhbCA8IDAgPyAnLScgOiAnJztcbiAgeW1TaWduID0gc2lnbih0aGlzLl9tb250aHMpICE9PSBzaWduKHRvdGFsKSA/ICctJyA6ICcnO1xuICBkYXlzU2lnbiA9IHNpZ24odGhpcy5fZGF5cykgIT09IHNpZ24odG90YWwpID8gJy0nIDogJyc7XG4gIGhtc1NpZ24gPSBzaWduKHRoaXMuX21pbGxpc2Vjb25kcykgIT09IHNpZ24odG90YWwpID8gJy0nIDogJyc7XG4gIHJldHVybiB0b3RhbFNpZ24gKyAnUCcgKyAoeWVhcnMgPyB5bVNpZ24gKyB5ZWFycyArICdZJyA6ICcnKSArIChtb250aHMgPyB5bVNpZ24gKyBtb250aHMgKyAnTScgOiAnJykgKyAoZGF5cyA/IGRheXNTaWduICsgZGF5cyArICdEJyA6ICcnKSArIChob3VycyB8fCBtaW51dGVzIHx8IHNlY29uZHMgPyAnVCcgOiAnJykgKyAoaG91cnMgPyBobXNTaWduICsgaG91cnMgKyAnSCcgOiAnJykgKyAobWludXRlcyA/IGhtc1NpZ24gKyBtaW51dGVzICsgJ00nIDogJycpICsgKHNlY29uZHMgPyBobXNTaWduICsgcyArICdTJyA6ICcnKTtcbn1cblxudmFyIHByb3RvJDIgPSBEdXJhdGlvbi5wcm90b3R5cGU7XG5wcm90byQyLmlzVmFsaWQgPSBpc1ZhbGlkJDE7XG5wcm90byQyLmFicyA9IGFicztcbnByb3RvJDIuYWRkID0gYWRkJDE7XG5wcm90byQyLnN1YnRyYWN0ID0gc3VidHJhY3QkMTtcbnByb3RvJDIuYXMgPSBhcztcbnByb3RvJDIuYXNNaWxsaXNlY29uZHMgPSBhc01pbGxpc2Vjb25kcztcbnByb3RvJDIuYXNTZWNvbmRzID0gYXNTZWNvbmRzO1xucHJvdG8kMi5hc01pbnV0ZXMgPSBhc01pbnV0ZXM7XG5wcm90byQyLmFzSG91cnMgPSBhc0hvdXJzO1xucHJvdG8kMi5hc0RheXMgPSBhc0RheXM7XG5wcm90byQyLmFzV2Vla3MgPSBhc1dlZWtzO1xucHJvdG8kMi5hc01vbnRocyA9IGFzTW9udGhzO1xucHJvdG8kMi5hc1F1YXJ0ZXJzID0gYXNRdWFydGVycztcbnByb3RvJDIuYXNZZWFycyA9IGFzWWVhcnM7XG5wcm90byQyLnZhbHVlT2YgPSB2YWx1ZU9mJDE7XG5wcm90byQyLl9idWJibGUgPSBidWJibGU7XG5wcm90byQyLmNsb25lID0gY2xvbmUkMTtcbnByb3RvJDIuZ2V0ID0gZ2V0JDI7XG5wcm90byQyLm1pbGxpc2Vjb25kcyA9IG1pbGxpc2Vjb25kcztcbnByb3RvJDIuc2Vjb25kcyA9IHNlY29uZHM7XG5wcm90byQyLm1pbnV0ZXMgPSBtaW51dGVzO1xucHJvdG8kMi5ob3VycyA9IGhvdXJzO1xucHJvdG8kMi5kYXlzID0gZGF5cztcbnByb3RvJDIud2Vla3MgPSB3ZWVrcztcbnByb3RvJDIubW9udGhzID0gbW9udGhzO1xucHJvdG8kMi55ZWFycyA9IHllYXJzO1xucHJvdG8kMi5odW1hbml6ZSA9IGh1bWFuaXplO1xucHJvdG8kMi50b0lTT1N0cmluZyA9IHRvSVNPU3RyaW5nJDE7XG5wcm90byQyLnRvU3RyaW5nID0gdG9JU09TdHJpbmckMTtcbnByb3RvJDIudG9KU09OID0gdG9JU09TdHJpbmckMTtcbnByb3RvJDIubG9jYWxlID0gbG9jYWxlO1xucHJvdG8kMi5sb2NhbGVEYXRhID0gbG9jYWxlRGF0YTtcbnByb3RvJDIudG9Jc29TdHJpbmcgPSBkZXByZWNhdGUoJ3RvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpJywgdG9JU09TdHJpbmckMSk7XG5wcm90byQyLmxhbmcgPSBsYW5nO1xuYWRkRm9ybWF0VG9rZW4oJ1gnLCAwLCAwLCAndW5peCcpO1xuYWRkRm9ybWF0VG9rZW4oJ3gnLCAwLCAwLCAndmFsdWVPZicpO1xuYWRkUmVnZXhUb2tlbigneCcsIG1hdGNoU2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ1gnLCBtYXRjaFRpbWVzdGFtcCk7XG5hZGRQYXJzZVRva2VuKCdYJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIGNvbmZpZy5fZCA9IG5ldyBEYXRlKHBhcnNlRmxvYXQoaW5wdXQpICogMTAwMCk7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ3gnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgY29uZmlnLl9kID0gbmV3IERhdGUodG9JbnQoaW5wdXQpKTtcbn0pO1xuaG9va3MudmVyc2lvbiA9ICcyLjI5LjEnO1xuc2V0SG9va0NhbGxiYWNrKGNyZWF0ZUxvY2FsKTtcbmhvb2tzLmZuID0gcHJvdG87XG5ob29rcy5taW4gPSBtaW47XG5ob29rcy5tYXggPSBtYXg7XG5ob29rcy5ub3cgPSBub3c7XG5ob29rcy51dGMgPSBjcmVhdGVVVEM7XG5ob29rcy51bml4ID0gY3JlYXRlVW5peDtcbmhvb2tzLm1vbnRocyA9IGxpc3RNb250aHM7XG5ob29rcy5pc0RhdGUgPSBpc0RhdGU7XG5ob29rcy5sb2NhbGUgPSBnZXRTZXRHbG9iYWxMb2NhbGU7XG5ob29rcy5pbnZhbGlkID0gY3JlYXRlSW52YWxpZDtcbmhvb2tzLmR1cmF0aW9uID0gY3JlYXRlRHVyYXRpb247XG5ob29rcy5pc01vbWVudCA9IGlzTW9tZW50O1xuaG9va3Mud2Vla2RheXMgPSBsaXN0V2Vla2RheXM7XG5ob29rcy5wYXJzZVpvbmUgPSBjcmVhdGVJblpvbmU7XG5ob29rcy5sb2NhbGVEYXRhID0gZ2V0TG9jYWxlO1xuaG9va3MuaXNEdXJhdGlvbiA9IGlzRHVyYXRpb247XG5ob29rcy5tb250aHNTaG9ydCA9IGxpc3RNb250aHNTaG9ydDtcbmhvb2tzLndlZWtkYXlzTWluID0gbGlzdFdlZWtkYXlzTWluO1xuaG9va3MuZGVmaW5lTG9jYWxlID0gZGVmaW5lTG9jYWxlO1xuaG9va3MudXBkYXRlTG9jYWxlID0gdXBkYXRlTG9jYWxlO1xuaG9va3MubG9jYWxlcyA9IGxpc3RMb2NhbGVzO1xuaG9va3Mud2Vla2RheXNTaG9ydCA9IGxpc3RXZWVrZGF5c1Nob3J0O1xuaG9va3Mubm9ybWFsaXplVW5pdHMgPSBub3JtYWxpemVVbml0cztcbmhvb2tzLnJlbGF0aXZlVGltZVJvdW5kaW5nID0gZ2V0U2V0UmVsYXRpdmVUaW1lUm91bmRpbmc7XG5ob29rcy5yZWxhdGl2ZVRpbWVUaHJlc2hvbGQgPSBnZXRTZXRSZWxhdGl2ZVRpbWVUaHJlc2hvbGQ7XG5ob29rcy5jYWxlbmRhckZvcm1hdCA9IGdldENhbGVuZGFyRm9ybWF0O1xuaG9va3MucHJvdG90eXBlID0gcHJvdG87XG5ob29rcy5IVE1MNV9GTVQgPSB7XG4gIERBVEVUSU1FX0xPQ0FMOiAnWVlZWS1NTS1ERFRISDptbScsXG4gIERBVEVUSU1FX0xPQ0FMX1NFQ09ORFM6ICdZWVlZLU1NLUREVEhIOm1tOnNzJyxcbiAgREFURVRJTUVfTE9DQUxfTVM6ICdZWVlZLU1NLUREVEhIOm1tOnNzLlNTUycsXG4gIERBVEU6ICdZWVlZLU1NLUREJyxcbiAgVElNRTogJ0hIOm1tJyxcbiAgVElNRV9TRUNPTkRTOiAnSEg6bW06c3MnLFxuICBUSU1FX01TOiAnSEg6bW06c3MuU1NTJyxcbiAgV0VFSzogJ0dHR0ctW1ddV1cnLFxuICBNT05USDogJ1lZWVktTU0nXG59O1xuZXhwb3J0IGRlZmF1bHQgaG9va3M7IiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBuZXh0SGFuZGxlID0gMTtcbiAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgfVxuXG4gICAgdmFyIHRhc2sgPSB7XG4gICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICBhcmdzOiBhcmdzXG4gICAgfTtcbiAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICB2YXIgYXJncyA9IHRhc2suYXJncztcblxuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDI6XG4gICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAzOlxuICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cbiAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuXG4gICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG5cbiAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24gb25HbG9iYWxNZXNzYWdlKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiYgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cbiAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICB9O1xuXG4gICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXG4gICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG4gIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG4gIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcbiAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gIH1cblxuICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZik7IiwidmFyIHNjb3BlID0gdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwgfHwgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZiB8fCB3aW5kb3c7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuXG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcblxuZXhwb3J0cy5jbGVhclRpbWVvdXQgPSBleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbiAoKSB7fTtcblxuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xufTtcblxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuXG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dCkgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlIHx8IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSB8fCB0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUgfHwgdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUgfHwgdGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlOyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgb2xFdmVudHNFdmVudCBmcm9tICdvbC9ldmVudHMvRXZlbnQuanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX29sRXZlbnRzRXZlbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9vbEV2ZW50c0V2ZW50KTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdCh0eXBlLCBkZXRhaWwpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAoZGV0YWlsID09PSB2b2lkIDApIHtcbiAgICAgIGRldGFpbCA9IHt9O1xuICAgIH1cblxuICAgIF90aGlzID0gX29sRXZlbnRzRXZlbnQuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgIF90aGlzLmRldGFpbCA9IGRldGFpbDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG9sRXZlbnRzRXZlbnQpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZXhwb3J0IGRlZmF1bHQge1xuICBDSVJDTEU6ICdDaXJjbGUnLFxuICBMSU5FX1NUUklORzogJ0xpbmVTdHJpbmcnLFxuICBNVUxUSV9MSU5FX1NUUklORzogJ011bHRpTGluZVN0cmluZycsXG4gIE1VTFRJX1BPSU5UOiAnTXVsdGlQb2ludCcsXG4gIE1VTFRJX1BPTFlHT046ICdNdWx0aVBvbHlnb24nLFxuICBQT0lOVDogJ1BvaW50JyxcbiAgUE9MWUdPTjogJ1BvbHlnb24nLFxuICBSRUNUQU5HTEU6ICdSZWN0YW5nbGUnLFxuICBURVhUOiAnVGV4dCdcbn07IiwiZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgb2xPdmVybGF5IGZyb20gJ29sL092ZXJsYXkuanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX29sT3ZlcmxheSkge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX29sT3ZlcmxheSk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgb3JpZ2luYWxFbCA9IG9wdGlvbnMuZWxlbWVudCA/IG9wdGlvbnMuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG9wdGlvbnMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIF90aGlzID0gX29sT3ZlcmxheS5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgdmFyIGNsb3NlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjbG9zZUVsLmNsYXNzTmFtZSA9ICdjbG9zZSc7XG4gICAgY2xvc2VFbC5pbm5lckhUTUwgPSAnJnRpbWVzOyc7XG4gICAgY2xvc2VFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzLmNsb3NlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcbiAgICBfdGhpcy5jb250ZW50RWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBfdGhpcy5jb250ZW50RWxfLmFwcGVuZChjbG9zZUVsLCBvcmlnaW5hbEVsKTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG5cbiAgICBpZiAobWFwKSB7XG4gICAgICBtYXAucmVtb3ZlT3ZlcmxheSh0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcChtYXApIHtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpO1xuXG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZWxlbWVudCcpO1xuICAgIH1cblxuICAgIHZhciBjdXJyZW50TWFwID0gdGhpcy5nZXRNYXAoKTtcblxuICAgIGlmIChjdXJyZW50TWFwKSB7XG4gICAgICAkKGVsZW1lbnQpLnBvcG92ZXIoJ2Rpc3Bvc2UnKTtcbiAgICB9XG5cbiAgICBfb2xPdmVybGF5LnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuXG4gICAgaWYgKG1hcCkge1xuICAgICAgdmFyIGNvbnRlbnRFbCA9IHRoaXMuY29udGVudEVsXztcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChlbGVtZW50KS5wb3BvdmVyKHtcbiAgICAgICAgICBjb250YWluZXI6IGVsZW1lbnQucGFyZW50RWxlbWVudCxcbiAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRFbCxcbiAgICAgICAgICBodG1sOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAkKGVsZW1lbnQpLnBvcG92ZXIoJ3Nob3cnKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG9sT3ZlcmxheSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG9sRm9ybWF0WE1MIGZyb20gJ29sL2Zvcm1hdC9YTUwuanMnO1xuaW1wb3J0ICogYXMgb2xYbWwgZnJvbSAnb2wveG1sLmpzJztcbnZhciBOQU1FU1BBQ0VfVVJJU18gPSBbbnVsbCwgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hJ107XG5cbmZ1bmN0aW9uIG1ha2VTdHJ1Y3R1cmVOUyhuYW1lc3BhY2VVUklzLCBzdHJ1Y3R1cmUpIHtcbiAgcmV0dXJuIG9sWG1sLm1ha2VTdHJ1Y3R1cmVOUyhuYW1lc3BhY2VVUklzLCBzdHJ1Y3R1cmUpO1xufVxuXG52YXIgUEFSU0VSU18gPSBtYWtlU3RydWN0dXJlTlMoTkFNRVNQQUNFX1VSSVNfLCB7XG4gIGVsZW1lbnQ6IG9sWG1sLm1ha2VPYmplY3RQcm9wZXJ0eVB1c2hlcihyZWFkRWxlbWVudF8pLFxuICBjb21wbGV4VHlwZTogb2xYbWwubWFrZU9iamVjdFByb3BlcnR5UHVzaGVyKHJlYWRDb21wbGV4VHlwZV8pXG59KTtcbnZhciBDT01QTEVYX1RZUEVfUEFSU0VSU18gPSBtYWtlU3RydWN0dXJlTlMoTkFNRVNQQUNFX1VSSVNfLCB7XG4gIGNvbXBsZXhDb250ZW50OiBvbFhtbC5tYWtlT2JqZWN0UHJvcGVydHlTZXR0ZXIocmVhZENvbXBsZXhDb250ZW50Xylcbn0pO1xudmFyIENPTVBMRVhfQ09OVEVOVF9QQVJTRVJTXyA9IG1ha2VTdHJ1Y3R1cmVOUyhOQU1FU1BBQ0VfVVJJU18sIHtcbiAgZXh0ZW5zaW9uOiBvbFhtbC5tYWtlT2JqZWN0UHJvcGVydHlTZXR0ZXIocmVhZEV4dGVuc2lvbl8pXG59KTtcbnZhciBFWFRFTlNJT05fUEFSU0VSU18gPSBtYWtlU3RydWN0dXJlTlMoTkFNRVNQQUNFX1VSSVNfLCB7XG4gIHNlcXVlbmNlOiBvbFhtbC5tYWtlT2JqZWN0UHJvcGVydHlTZXR0ZXIocmVhZFNlcXVlbmNlXylcbn0pO1xudmFyIFNFUVVFTkNFX1BBUlNFUlNfID0gbWFrZVN0cnVjdHVyZU5TKE5BTUVTUEFDRV9VUklTXywge1xuICBlbGVtZW50OiBvbFhtbC5tYWtlT2JqZWN0UHJvcGVydHlQdXNoZXIocmVhZEVsZW1lbnRfKVxufSk7XG5cbnZhciBXRlNEZXNjcmliZUZlYXR1cmVUeXBlID0gZnVuY3Rpb24gKF9vbEZvcm1hdFhNTCkge1xuICBfaW5oZXJpdHNMb29zZShXRlNEZXNjcmliZUZlYXR1cmVUeXBlLCBfb2xGb3JtYXRYTUwpO1xuXG4gIGZ1bmN0aW9uIFdGU0Rlc2NyaWJlRmVhdHVyZVR5cGUoKSB7XG4gICAgcmV0dXJuIF9vbEZvcm1hdFhNTC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZTtcbn0ob2xGb3JtYXRYTUwpO1xuXG5XRlNEZXNjcmliZUZlYXR1cmVUeXBlLnByb3RvdHlwZS5yZWFkO1xuXG5XRlNEZXNjcmliZUZlYXR1cmVUeXBlLnByb3RvdHlwZS5yZWFkRnJvbURvY3VtZW50ID0gZnVuY3Rpb24gKGRvYykge1xuICB2YXIgbm9kZTtcblxuICBmb3IgKG5vZGUgPSBkb2MuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWFkRnJvbU5vZGUobm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5XRlNEZXNjcmliZUZlYXR1cmVUeXBlLnByb3RvdHlwZS5yZWFkRnJvbU5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIHJlc3VsdCA9IG9sWG1sLnB1c2hQYXJzZUFuZFBvcChyZXN1bHQsIFBBUlNFUlNfLCBub2RlLCBbXSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiByZWFkRWxlbWVudF8obm9kZSwgb2JqZWN0U3RhY2spIHtcbiAgdmFyIGF0dHJpYnV0ZXMgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIGF0dHJpYnV0ZSA9IG5vZGUuYXR0cmlidXRlcy5pdGVtKGkpO1xuXG4gICAgaWYgKCFhdHRyaWJ1dGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBhdHRyaWJ1dGUnKTtcbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgfVxuXG4gIGlmIChvYmplY3RTdGFjay5sZW5ndGggPT09IDEpIHtcbiAgICB2YXIgX2F0dHJpYnV0ZSA9IGF0dHJpYnV0ZXMudHlwZS5zcGxpdCgnOicpLnBvcCgpO1xuXG4gICAgaWYgKCFfYXR0cmlidXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYXR0cmlidXRlJyk7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlcy50eXBlID0gX2F0dHJpYnV0ZTtcbiAgfVxuXG4gIHJldHVybiBhdHRyaWJ1dGVzO1xufVxuXG5mdW5jdGlvbiByZWFkQ29tcGxleFR5cGVfKG5vZGUsIG9iamVjdFN0YWNrKSB7XG4gIHZhciBuYW1lID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgdmFyIG9iamVjdCA9IG9sWG1sLnB1c2hQYXJzZUFuZFBvcCh7XG4gICAgbmFtZTogbmFtZVxuICB9LCBDT01QTEVYX1RZUEVfUEFSU0VSU18sIG5vZGUsIG9iamVjdFN0YWNrKTtcbiAgb2JqZWN0LmNvbXBsZXhDb250ZW50ID0gb2JqZWN0LmNvbXBsZXhDb250ZW50LmV4dGVuc2lvbi5zZXF1ZW5jZS5lbGVtZW50O1xuICByZXR1cm4gb2JqZWN0O1xufVxuXG5mdW5jdGlvbiByZWFkQ29tcGxleENvbnRlbnRfKG5vZGUsIG9iamVjdFN0YWNrKSB7XG4gIHJldHVybiBvbFhtbC5wdXNoUGFyc2VBbmRQb3Aoe30sIENPTVBMRVhfQ09OVEVOVF9QQVJTRVJTXywgbm9kZSwgb2JqZWN0U3RhY2spO1xufVxuXG5mdW5jdGlvbiByZWFkRXh0ZW5zaW9uXyhub2RlLCBvYmplY3RTdGFjaykge1xuICByZXR1cm4gb2xYbWwucHVzaFBhcnNlQW5kUG9wKHt9LCBFWFRFTlNJT05fUEFSU0VSU18sIG5vZGUsIG9iamVjdFN0YWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZFNlcXVlbmNlXyhub2RlLCBvYmplY3RTdGFjaykge1xuICByZXR1cm4gb2xYbWwucHVzaFBhcnNlQW5kUG9wKHt9LCBTRVFVRU5DRV9QQVJTRVJTXywgbm9kZSwgb2JqZWN0U3RhY2spO1xufVxuXG5leHBvcnQgZGVmYXVsdCBXRlNEZXNjcmliZUZlYXR1cmVUeXBlOyIsImltcG9ydCB7IGluY2x1ZGVzIGFzIG9sQXJyYXlJbmNsdWRlcyB9IGZyb20gJ29sL2FycmF5LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBwdXNoVW5sZXNzSW5jbHVkZWQoYXJyLCBvYmopIHtcbiAgdmFyIHJldCA9IGZhbHNlO1xuXG4gIGlmICghb2xBcnJheUluY2x1ZGVzKGFyciwgb2JqKSkge1xuICAgIGFyci5wdXNoKG9iaik7XG4gICAgcmV0ID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG52YXIgRGF0YVNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRGF0YVNvdXJjZShvcHRpb25zKSB7XG4gICAgdGhpcy5pblJhbmdlID0gb3B0aW9ucy5pblJhbmdlICE9PSBmYWxzZTtcbiAgICB0aGlzLnZpc2libGUgPSBvcHRpb25zLnZpc2libGUgPT09IHRydWU7XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IG51bGw7XG4gICAgdGhpcy5pZF8gPSBvcHRpb25zLmlkO1xuICAgIHRoaXMuaWRlbnRpZmllckF0dHJpYnV0ZV8gPSBvcHRpb25zLmlkZW50aWZpZXJBdHRyaWJ1dGU7XG4gICAgdGhpcy5tYXhSZXNvbHV0aW9uXyA9IG9wdGlvbnMubWF4UmVzb2x1dGlvbjtcbiAgICB0aGlzLm1pblJlc29sdXRpb25fID0gb3B0aW9ucy5taW5SZXNvbHV0aW9uO1xuICAgIHRoaXMubmFtZV8gPSBvcHRpb25zLm5hbWU7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRGF0YVNvdXJjZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmdldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBnZXRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXM7XG4gIH07XG5cbiAgX3Byb3RvLnNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhEYXRhU291cmNlLCBbe1xuICAgIGtleTogXCJpZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWRfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpZGVudGlmaWVyQXR0cmlidXRlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pZGVudGlmaWVyQXR0cmlidXRlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibWF4UmVzb2x1dGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm1pblJlc29sdXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJuYW1lXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicXVlcnlhYmxlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInN1cHBvcnRzRHluYW1pY0luUmFuZ2VcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1heFJlc29sdXRpb24gIT09IG51bGwgfHwgdGhpcy5taW5SZXNvbHV0aW9uICE9PSBudWxsO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEYXRhU291cmNlO1xufSgpO1xuXG5leHBvcnQgZGVmYXVsdCBEYXRhU291cmNlOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgb2xDb2xsZWN0aW9uIGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbFZpZXcgZnJvbSAnb2wvVmlldy5qcyc7XG5pbXBvcnQgeyBDb2xsZWN0aW9uRXZlbnQgfSBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmV4cG9ydCB2YXIgRGF0YVNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRGF0YVNvdXJjZSgpIHtcbiAgICB0aGlzLmNvbGxlY3Rpb25fID0gbmV3IG9sQ29sbGVjdGlvbigpO1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0gW107XG4gICAgbGlzdGVuKHRoaXMuY29sbGVjdGlvbl8sICdhZGQnLCB0aGlzLmhhbmRsZURhdGFTb3VyY2VzQWRkXywgdGhpcyk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRGF0YVNvdXJjZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJpbmRNYXBfID0gZnVuY3Rpb24gYmluZE1hcF8obWFwKSB7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbih2aWV3LCAnY2hhbmdlOnJlc29sdXRpb24nLCB0aGlzLmhhbmRsZVZpZXdSZXNvbHV0aW9uQ2hhbmdlXywgdGhpcykpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVzb2x1dGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuc3luY0RhdGFTb3VyY2VzVG9SZXNvbHV0aW9uXyhyZXNvbHV0aW9uKTtcbiAgfTtcblxuICBfcHJvdG8udW5iaW5kTWFwXyA9IGZ1bmN0aW9uIHVuYmluZE1hcF8obWFwKSB7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0gW107XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVZpZXdSZXNvbHV0aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVZpZXdSZXNvbHV0aW9uQ2hhbmdlXyhldnQpIHtcbiAgICB2YXIgdmlldyA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAodmlldyBpbnN0YW5jZW9mIG9sVmlldykge1xuICAgICAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcblxuICAgICAgaWYgKHJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVzb2x1dGlvbicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN5bmNEYXRhU291cmNlc1RvUmVzb2x1dGlvbl8ocmVzb2x1dGlvbik7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5zeW5jRGF0YVNvdXJjZXNUb1Jlc29sdXRpb25fID0gZnVuY3Rpb24gc3luY0RhdGFTb3VyY2VzVG9SZXNvbHV0aW9uXyhyZXNvbHV0aW9uKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMuY29sbGVjdGlvbl8uZm9yRWFjaChmdW5jdGlvbiAoZGF0YVNvdXJjZSkge1xuICAgICAgX3RoaXMuc3luY0RhdGFTb3VyY2VUb1Jlc29sdXRpb25fKGRhdGFTb3VyY2UsIHJlc29sdXRpb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5zeW5jRGF0YVNvdXJjZVRvUmVzb2x1dGlvbl8gPSBmdW5jdGlvbiBzeW5jRGF0YVNvdXJjZVRvUmVzb2x1dGlvbl8oZGF0YVNvdXJjZSwgcmVzb2x1dGlvbikge1xuICAgIGlmICghZGF0YVNvdXJjZS5zdXBwb3J0c0R5bmFtaWNJblJhbmdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1heFJlc29sdXRpb24gPSBkYXRhU291cmNlLm1heFJlc29sdXRpb247XG4gICAgdmFyIG1pblJlc29sdXRpb24gPSBkYXRhU291cmNlLm1pblJlc29sdXRpb247XG4gICAgdmFyIGluTWluUmFuZ2UgPSBtaW5SZXNvbHV0aW9uID09PSBudWxsIHx8IG1pblJlc29sdXRpb24gPT09IHVuZGVmaW5lZCB8fCByZXNvbHV0aW9uID49IG1pblJlc29sdXRpb247XG4gICAgdmFyIGluTWF4UmFuZ2UgPSBtYXhSZXNvbHV0aW9uID09PSBudWxsIHx8IG1heFJlc29sdXRpb24gPT09IHVuZGVmaW5lZCB8fCByZXNvbHV0aW9uIDw9IG1heFJlc29sdXRpb247XG4gICAgdmFyIGluUmFuZ2UgPSBpbk1pblJhbmdlICYmIGluTWF4UmFuZ2U7XG4gICAgZGF0YVNvdXJjZS5pblJhbmdlID0gaW5SYW5nZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRGF0YVNvdXJjZXNBZGRfID0gZnVuY3Rpb24gaGFuZGxlRGF0YVNvdXJjZXNBZGRfKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IGV2ZW50LmVsZW1lbnQ7XG5cbiAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLm1hcF8uZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcblxuICAgICAgICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3luY0RhdGFTb3VyY2VUb1Jlc29sdXRpb25fKGRhdGFTb3VyY2UsIHJlc29sdXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoRGF0YVNvdXJjZSwgW3tcbiAgICBrZXk6IFwibWFwXCIsXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobWFwKSB7XG4gICAgICBpZiAodGhpcy5tYXBfID09PSBtYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgIHRoaXMudW5iaW5kTWFwXyh0aGlzLm1hcF8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hcF8gPSBtYXA7XG5cbiAgICAgIGlmIChtYXApIHtcbiAgICAgICAgdGhpcy5iaW5kTWFwXyhtYXApO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb2xsZWN0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9uXztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGF0YVNvdXJjZTtcbn0oKTtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRGF0YVNvdXJjZXMnLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvRGF0YVNvdXJjZXMnLCBEYXRhU291cmNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2UgZnJvbSAnbmdlby9kYXRhc291cmNlL0RhdGFTb3VyY2UuanMnO1xuaW1wb3J0IG9sQ29sbGVjdGlvbiBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBvbExheWVyVmVjdG9yIGZyb20gJ29sL2xheWVyL1ZlY3Rvci5qcyc7XG5pbXBvcnQgb2xTb3VyY2VWZWN0b3IgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfbmdlb0RhdGFzb3VyY2VEYXRhU28pIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9uZ2VvRGF0YXNvdXJjZURhdGFTbyk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX25nZW9EYXRhc291cmNlRGF0YVNvLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fID0gb3B0aW9ucy5mZWF0dXJlcyB8fCBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gICAgX3RoaXMuc291cmNlXyA9IG5ldyBvbFNvdXJjZVZlY3Rvcih7XG4gICAgICBmZWF0dXJlczogX3RoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXyxcbiAgICAgIHdyYXBYOiBmYWxzZVxuICAgIH0pO1xuICAgIF90aGlzLmxheWVyXyA9IG5ldyBvbExheWVyVmVjdG9yKHtcbiAgICAgIHNvdXJjZTogX3RoaXMuc291cmNlX1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwiZmVhdHVyZXNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8uZ2V0QXJyYXkoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmVhdHVyZXNDb2xsZWN0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsYXllclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubGF5ZXJfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJleHRlbnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZV8uZ2V0RXh0ZW50KCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2UpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvRGF0YXNvdXJjZUZpbGUgZnJvbSAnbmdlby9kYXRhc291cmNlL0ZpbGUuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlR3JvdXAgZnJvbSAnbmdlby9kYXRhc291cmNlL0dyb3VwLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvRGF0YXNvdXJjZUdyb3VwKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0RhdGFzb3VyY2VHcm91cCk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX25nZW9EYXRhc291cmNlR3JvdXAuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIHZhciBpbmplY3RvciA9IG9wdGlvbnMuaW5qZWN0b3I7XG4gICAgX3RoaXMucm9vdFNjb3BlXyA9IGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xuICAgIF90aGlzLnVucmVnaXN0ZXJfID0ge307XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uYWRkRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGFkZERhdGFTb3VyY2UoZGF0YVNvdXJjZSkge1xuICAgIF9uZ2VvRGF0YXNvdXJjZUdyb3VwLnByb3RvdHlwZS5hZGREYXRhU291cmNlLmNhbGwodGhpcywgZGF0YVNvdXJjZSk7XG5cbiAgICBpZiAoIShkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VGaWxlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBkYXRhc291cmNlIHR5cGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZ2lzdGVyRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSk7XG4gIH07XG5cbiAgX3Byb3RvLnJlZ2lzdGVyRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiByZWdpc3RlckRhdGFTb3VyY2VfKGRhdGFTb3VyY2UpIHtcbiAgICB0aGlzLnVucmVnaXN0ZXJfW2RhdGFTb3VyY2UuaWRdID0gdGhpcy5yb290U2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZGF0YVNvdXJjZS52aXNpYmxlO1xuICAgIH0sIHRoaXMuaGFuZGxlRGF0YVNvdXJjZVZpc2libGVDaGFuZ2VfLmJpbmQodGhpcywgZGF0YVNvdXJjZSkpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEYXRhU291cmNlVmlzaWJsZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVEYXRhU291cmNlVmlzaWJsZUNoYW5nZV8oZGF0YVNvdXJjZSwgdmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRhdGFTb3VyY2UubGF5ZXIuc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5yZW1vdmVEYXRhU291cmNlID0gZnVuY3Rpb24gcmVtb3ZlRGF0YVNvdXJjZShkYXRhU291cmNlKSB7XG4gICAgX25nZW9EYXRhc291cmNlR3JvdXAucHJvdG90eXBlLnJlbW92ZURhdGFTb3VyY2UuY2FsbCh0aGlzLCBkYXRhU291cmNlKTtcblxuICAgIGlmICghdGhpcy51bnJlZ2lzdGVyXy5oYXNPd25Qcm9wZXJ0eShkYXRhU291cmNlLmlkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZUZpbGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGRhdGFzb3VyY2UgdHlwZScpO1xuICAgIH1cblxuICAgIHRoaXMudW5yZWdpc3RlckRhdGFTb3VyY2VfKGRhdGFTb3VyY2UpO1xuICB9O1xuXG4gIF9wcm90by51bnJlZ2lzdGVyRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiB1bnJlZ2lzdGVyRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSkge1xuICAgIHRoaXMudW5yZWdpc3Rlcl9bZGF0YVNvdXJjZS5pZF0oKTtcbiAgICBkZWxldGUgdGhpcy51bnJlZ2lzdGVyX1tkYXRhU291cmNlLmlkXTtcbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9EYXRhc291cmNlR3JvdXApO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCBvbENvbGxlY3Rpb24gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG52YXIgVmlzaWJpbGl0eVN0YXRlID0ge1xuICBJTkRFVEVSTUlOQVRFOiAnaW5kZXRlcm1pbmF0ZScsXG4gIE9GRjogJ29mZicsXG4gIE9OOiAnb24nXG59O1xuXG52YXIgR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdyb3VwKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGFTb3VyY2VzQ29sbGVjdGlvbl8gPSBuZXcgb2xDb2xsZWN0aW9uKG9wdGlvbnMuZGF0YVNvdXJjZXMpO1xuICAgIHRoaXMudGl0bGVfID0gb3B0aW9ucy50aXRsZTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBHcm91cC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIHRoaXMuZGF0YVNvdXJjZXNDb2xsZWN0aW9uXy5jbGVhcigpO1xuICB9O1xuXG4gIF9wcm90by5nZXREYXRhU291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXREYXRhU291cmNlU3RhdGUoZGF0YVNvdXJjZSkge1xuICAgIHJldHVybiBkYXRhU291cmNlLnZpc2libGUgPyBWaXNpYmlsaXR5U3RhdGUuT04gOiBWaXNpYmlsaXR5U3RhdGUuT0ZGO1xuICB9O1xuXG4gIF9wcm90by5hZGREYXRhU291cmNlID0gZnVuY3Rpb24gYWRkRGF0YVNvdXJjZShkYXRhU291cmNlKSB7XG4gICAgdGhpcy5kYXRhU291cmNlc0NvbGxlY3Rpb25fLnB1c2goZGF0YVNvdXJjZSk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZURhdGFTb3VyY2UgPSBmdW5jdGlvbiByZW1vdmVEYXRhU291cmNlKGRhdGFTb3VyY2UpIHtcbiAgICB0aGlzLmRhdGFTb3VyY2VzQ29sbGVjdGlvbl8ucmVtb3ZlKGRhdGFTb3VyY2UpO1xuICB9O1xuXG4gIF9wcm90by50b2dnbGVWaXNpYmlsaXR5U3RhdGUgPSBmdW5jdGlvbiB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoKSB7XG4gICAgdmFyIHZpc2libGVUb1NldCA9IHRoaXMudmlzaWJpbGl0eVN0YXRlICE9PSBWaXNpYmlsaXR5U3RhdGUuT047XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuZGF0YVNvdXJjZXMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgaWYgKGRhdGFTb3VyY2UudmlzaWJsZSAhPT0gdmlzaWJsZVRvU2V0KSB7XG4gICAgICAgIGRhdGFTb3VyY2UudmlzaWJsZSA9IHZpc2libGVUb1NldDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKEdyb3VwLCBbe1xuICAgIGtleTogXCJkYXRhU291cmNlc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVNvdXJjZXNDb2xsZWN0aW9uXy5nZXRBcnJheSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkYXRhU291cmNlc0NvbGxlY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2VzQ29sbGVjdGlvbl87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRpdGxlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy50aXRsZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInZpc2liaWxpdHlTdGF0ZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmRhdGFTb3VyY2VzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdGF0ZSA9IHRoaXMuZ2V0RGF0YVNvdXJjZVN0YXRlKGRhdGFTb3VyY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBvdGhlclN0YXRlID0gdGhpcy5nZXREYXRhU291cmNlU3RhdGUoZGF0YVNvdXJjZSk7XG5cbiAgICAgICAgICBpZiAob3RoZXJTdGF0ZSAhPT0gc3RhdGUpIHtcbiAgICAgICAgICAgIHN0YXRlID0gVmlzaWJpbGl0eVN0YXRlLklOREVURVJNSU5BVEU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlID09PSBWaXNpYmlsaXR5U3RhdGUuSU5ERVRFUk1JTkFURSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygc3RhdGUgIT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIHN0YXRlJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gR3JvdXA7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IEdyb3VwOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2UgZnJvbSAnbmdlby9kYXRhc291cmNlL0RhdGFTb3VyY2UuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMgZnJvbSAnbmdlby9kYXRhc291cmNlL0RhdGFTb3VyY2VzLmpzJztcbmltcG9ydCB7IHNldEdlb21ldHJ5VHlwZSBhcyBuZ2VvQXR0cmlidXRlU2V0R2VvbWV0cnlUeXBlIH0gZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0V0ZTQXR0cmlidXRlIGZyb20gJ25nZW8vZm9ybWF0L1dGU0F0dHJpYnV0ZS5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5UXVlcmVudCBmcm9tICduZ2VvL3F1ZXJ5L1F1ZXJlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuZXhwb3J0IHZhciBEYXRhc291cmNlSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICBEYXRhc291cmNlSGVscGVyLiRpbmplY3QgPSBbXCIkcVwiLCBcIm5nZW9EYXRhU291cmNlc1wiLCBcIm5nZW9RdWVyZW50XCJdO1xuXG4gIGZ1bmN0aW9uIERhdGFzb3VyY2VIZWxwZXIoJHEsIG5nZW9EYXRhU291cmNlcywgbmdlb1F1ZXJlbnQpIHtcbiAgICB0aGlzLnFfID0gJHE7XG4gICAgdGhpcy5jb2xsZWN0aW9uXyA9IG5nZW9EYXRhU291cmNlcy5jb2xsZWN0aW9uO1xuICAgIHRoaXMubmdlb1F1ZXJlbnRfID0gbmdlb1F1ZXJlbnQ7XG4gICAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgICBsaXN0ZW4odGhpcy5jb2xsZWN0aW9uXywgJ2FkZCcsIHRoaXMuaGFuZGxlRGF0YVNvdXJjZXNBZGRfLCB0aGlzKTtcbiAgICBsaXN0ZW4odGhpcy5jb2xsZWN0aW9uXywgJ3JlbW92ZScsIHRoaXMuaGFuZGxlRGF0YVNvdXJjZXNSZW1vdmVfLCB0aGlzKTtcbiAgICB0aGlzLmNvbGxlY3Rpb25fLmZvckVhY2godGhpcy5yZWdpc3RlckRhdGFTb3VyY2VfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERhdGFzb3VyY2VIZWxwZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXREYXRhU291cmNlID0gZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZShpZCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlX1tpZF0gfHwgbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBnZXREYXRhU291cmNlQXR0cmlidXRlcyhkYXRhU291cmNlKSB7XG4gICAgdmFyIGdldERhdGFTb3VyY2VBdHRyaWJ1dGVzRGVmZXIgPSB0aGlzLnFfLmRlZmVyKCk7XG5cbiAgICBpZiAoZGF0YVNvdXJjZS5hdHRyaWJ1dGVzKSB7XG4gICAgICBnZXREYXRhU291cmNlQXR0cmlidXRlc0RlZmVyLnJlc29sdmUoZGF0YVNvdXJjZS5hdHRyaWJ1dGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNyZWF0ZWRBdHRyaWJ1dGVzID0gdGhpcy5jcmVhdGVEYXRhU291cmNlQXR0cmlidXRlc0Zyb21PR0NBdHRyaWJ1dGVzXyhkYXRhU291cmNlKTtcblxuICAgICAgaWYgKGNyZWF0ZWRBdHRyaWJ1dGVzKSB7XG4gICAgICAgIGRhdGFTb3VyY2Uuc2V0QXR0cmlidXRlcyhjcmVhdGVkQXR0cmlidXRlcyk7XG4gICAgICAgIGdldERhdGFTb3VyY2VBdHRyaWJ1dGVzRGVmZXIucmVzb2x2ZShjcmVhdGVkQXR0cmlidXRlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm5nZW9RdWVyZW50Xy53ZnNEZXNjcmliZUZlYXR1cmVUeXBlKGRhdGFTb3VyY2UpLnRoZW4oZnVuY3Rpb24gKGZlYXR1cmVUeXBlXykge1xuICAgICAgICAgIHZhciBvZ2NMYXllck5hbWUgPSBkYXRhU291cmNlLmdldFdGU0xheWVyTmFtZXMoKVswXTtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydCh0eXBlb2Ygb2djTGF5ZXJOYW1lID09ICdzdHJpbmcnLCAnVGhlIGRhdGEgc291cmNlIHNob3VsZCBoYXZlIG9ubHkgb25lIG9nY0xheWVyLicpO1xuICAgICAgICAgIHZhciBmZWF0dXJlVHlwZSA9IGZlYXR1cmVUeXBlXztcblxuICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZmVhdHVyZVR5cGUuZWxlbWVudCksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5uYW1lID09PSBvZ2NMYXllck5hbWUpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZmVhdHVyZVR5cGUuY29tcGxleFR5cGUpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUubmFtZSA9PSBlbGVtZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBjb21wbGV4Q29udGVudCA9IHR5cGUuY29tcGxleENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IG5ldyBuZ2VvRm9ybWF0V0ZTQXR0cmlidXRlKCkucmVhZChjb21wbGV4Q29udGVudCk7XG4gICAgICAgICAgICAgICAgICBkYXRhU291cmNlLnNldEF0dHJpYnV0ZXMoYXR0cmlidXRlcyk7XG4gICAgICAgICAgICAgICAgICBnZXREYXRhU291cmNlQXR0cmlidXRlc0RlZmVyLnJlc29sdmUoYXR0cmlidXRlcyk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBnZXREYXRhU291cmNlQXR0cmlidXRlc0RlZmVyLnByb21pc2U7XG4gIH07XG5cbiAgX3Byb3RvLnJlZ2lzdGVyRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiByZWdpc3RlckRhdGFTb3VyY2VfKGRhdGFTb3VyY2UpIHtcbiAgICB0aGlzLmNhY2hlX1tkYXRhU291cmNlLmlkXSA9IGRhdGFTb3VyY2U7XG4gIH07XG5cbiAgX3Byb3RvLnVucmVnaXN0ZXJEYXRhU291cmNlXyA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKSB7XG4gICAgZGVsZXRlIHRoaXMuY2FjaGVfW2RhdGFTb3VyY2UuaWRdO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEYXRhU291cmNlc0FkZF8gPSBmdW5jdGlvbiBoYW5kbGVEYXRhU291cmNlc0FkZF8oZXZ0KSB7XG4gICAgaWYgKGV2dCBpbnN0YW5jZW9mIENvbGxlY3Rpb25FdmVudCkge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBldnQuZWxlbWVudDtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2UpO1xuICAgICAgdGhpcy5yZWdpc3RlckRhdGFTb3VyY2VfKGRhdGFTb3VyY2UpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRGF0YVNvdXJjZXNSZW1vdmVfID0gZnVuY3Rpb24gaGFuZGxlRGF0YVNvdXJjZXNSZW1vdmVfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZURhdGFTb3VyY2VBdHRyaWJ1dGVzRnJvbU9HQ0F0dHJpYnV0ZXNfID0gZnVuY3Rpb24gY3JlYXRlRGF0YVNvdXJjZUF0dHJpYnV0ZXNGcm9tT0dDQXR0cmlidXRlc18oZGF0YVNvdXJjZSkge1xuICAgIHZhciBhdHRyaWJ1dGVzID0gbnVsbDtcbiAgICB2YXIgZm9ybWF0V0ZTQXR0cmlidXRlID0gbmV3IG5nZW9Gb3JtYXRXRlNBdHRyaWJ1dGUoKTtcbiAgICB2YXIgb2djQXR0cmlidXRlcyA9IGRhdGFTb3VyY2Uub2djQXR0cmlidXRlc1dGUztcblxuICAgIGlmIChvZ2NBdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzID0gW107XG5cbiAgICAgIGZvciAodmFyIG5hbWUgaW4gb2djQXR0cmlidXRlcykge1xuICAgICAgICB2YXIgb2djQXR0cmlidXRlID0gb2djQXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgdmFyIGFsaWFzID0gb2djQXR0cmlidXRlLmFsaWFzO1xuICAgICAgICB2YXIgcmVxdWlyZWQgPSBvZ2NBdHRyaWJ1dGUubWluT2NjdXJzICE9ICcwJztcbiAgICAgICAgdmFyIHR5cGUgPSBvZ2NBdHRyaWJ1dGUudHlwZTtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICBhbGlhczogYWxpYXMsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWRcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIW5nZW9BdHRyaWJ1dGVTZXRHZW9tZXRyeVR5cGUoYXR0cmlidXRlLCBcImdtbDpcIiArIHR5cGUpKSB7XG4gICAgICAgICAgZm9ybWF0V0ZTQXR0cmlidXRlLnNldEF0dHJpYnV0ZVR5cGUoYXR0cmlidXRlLCB0eXBlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKERhdGFzb3VyY2VIZWxwZXIsIFt7XG4gICAga2V5OiBcImNvbGxlY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb25fO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEYXRhc291cmNlSGVscGVyO1xufSgpO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9EYXRhU291cmNlc0hlbHBlcicsIFtuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2VzLm5hbWUsIG5nZW9RdWVyeVF1ZXJlbnQubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb0RhdGFTb3VyY2VzSGVscGVyJywgRGF0YXNvdXJjZUhlbHBlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCB7IHB1c2hVbmxlc3NJbmNsdWRlZCB9IGZyb20gJ25nZW8vYXJyYXkuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZSBmcm9tICduZ2VvL2RhdGFzb3VyY2UvRGF0YVNvdXJjZS5qcyc7XG5pbXBvcnQgbmdlb0ZpbHRlckNvbmRpdGlvbiBmcm9tICduZ2VvL2ZpbHRlci9Db25kaXRpb24uanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRBcmNHSVNHZW9KU09OIGZyb20gJ25nZW8vZm9ybWF0L0FyY0dJU0dlb0pTT04uanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlIGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZVR5cGUuanMnO1xuaW1wb3J0IG9sRm9ybWF0R01MMiBmcm9tICdvbC9mb3JtYXQvR01MMi5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHTUwzIGZyb20gJ29sL2Zvcm1hdC9HTUwzLmpzJztcbmltcG9ydCBvbEZvcm1hdFdGUyBmcm9tICdvbC9mb3JtYXQvV0ZTLmpzJztcbmltcG9ydCBvbEZvcm1hdFdNU0dldEZlYXR1cmVJbmZvIGZyb20gJ29sL2Zvcm1hdC9XTVNHZXRGZWF0dXJlSW5mby5qcyc7XG5leHBvcnQgdmFyIFNlcnZlclR5cGUgPSB7XG4gIEFSQ0dJUzogJ2FyY2dpcycsXG4gIEdFT1NFUlZFUjogJ2dlb3NlcnZlcicsXG4gIE1BUFNFUlZFUjogJ21hcHNlcnZlcicsXG4gIFFHSVNTRVJWRVI6ICdxZ2lzc2VydmVyJ1xufTtcbmV4cG9ydCB2YXIgVHlwZSA9IHtcbiAgV01TOiAnV01TJyxcbiAgV01UUzogJ1dNVFMnXG59O1xudmFyIFdGU0ZlYXR1cmVQcmVmaXggPSB7XG4gIEZFQVRVUkU6ICdmZWF0dXJlJ1xufTtcbmV4cG9ydCB2YXIgV0ZTT3V0cHV0Rm9ybWF0ID0ge1xuICBHTUwyOiAnR01MMicsXG4gIEdNTDM6ICdHTUwzJ1xufTtcbmV4cG9ydCB2YXIgV01TSW5mb0Zvcm1hdCA9IHtcbiAgR0VPSlNPTjogJ2FwcGxpY2F0aW9uL2dlb2pzb24nLFxuICBHTUw6ICdhcHBsaWNhdGlvbi92bmQub2djLmdtbCdcbn07XG5leHBvcnQgdmFyIERFRkFVTFRfR0VPTUVUUllfTkFNRSA9ICdnZW9tJztcbmV4cG9ydCB2YXIgT0dDID0gZnVuY3Rpb24gKF9uZ2VvRGF0YXNvdXJjZURhdGFTbykge1xuICBfaW5oZXJpdHNMb29zZShPR0MsIF9uZ2VvRGF0YXNvdXJjZURhdGFTbyk7XG5cbiAgZnVuY3Rpb24gT0dDKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9uZ2VvRGF0YXNvdXJjZURhdGFTby5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMuZGltZW5zaW9uc0NvbmZpZyA9IG9wdGlvbnMuZGltZW5zaW9uc0NvbmZpZyB8fCBudWxsO1xuICAgIF90aGlzLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnID0gb3B0aW9ucy5kaW1lbnNpb25zRmlsdGVyc0NvbmZpZyB8fCBudWxsO1xuICAgIF90aGlzLmZpbHRlckNvbmRpdGlvbl8gPSBvcHRpb25zLmZpbHRlckNvbmRpdGlvbiB8fCBuZ2VvRmlsdGVyQ29uZGl0aW9uLkFORDtcbiAgICBfdGhpcy5maWx0ZXJSdWxlcyA9IG9wdGlvbnMuZmlsdGVyUnVsZXMgfHwgbnVsbDtcbiAgICBfdGhpcy5maWx0cmFibGUgPSBvcHRpb25zLmZpbHRyYWJsZSB8fCBudWxsO1xuICAgIF90aGlzLmNvcHlhYmxlXyA9IG9wdGlvbnMuY29weWFibGUgPT09IHRydWU7XG4gICAgX3RoaXMuZGltZW5zaW9uc18gPSBvcHRpb25zLmRpbWVuc2lvbnMgfHwgbnVsbDtcbiAgICBfdGhpcy5nZW9tZXRyeU5hbWVfID0gREVGQVVMVF9HRU9NRVRSWV9OQU1FO1xuICAgIF90aGlzLm9nY0ltYWdlVHlwZV8gPSBvcHRpb25zLm9nY0ltYWdlVHlwZSB8fCAnaW1hZ2UvcG5nJztcbiAgICBfdGhpcy53bXNMYXllcnNfID0gb3B0aW9ucy53bXNMYXllcnMgfHwgbnVsbDtcbiAgICBfdGhpcy53ZnNMYXllcnNfID0gb3B0aW9ucy53ZnNMYXllcnMgfHwgbnVsbDtcbiAgICBfdGhpcy5vZ2NTZXJ2ZXJUeXBlXyA9IG9wdGlvbnMub2djU2VydmVyVHlwZSB8fCBTZXJ2ZXJUeXBlLk1BUFNFUlZFUjtcbiAgICBfdGhpcy5vZ2NUeXBlXyA9IG9wdGlvbnMub2djVHlwZSB8fCBUeXBlLldNUztcbiAgICBfdGhpcy5vZ2NBdHRyaWJ1dGVzXyA9IG9wdGlvbnMub2djQXR0cmlidXRlcztcbiAgICBfdGhpcy5xdWVyeUljb25Qb3NpdGlvbl8gPSBvcHRpb25zLnF1ZXJ5SWNvblBvc2l0aW9uO1xuICAgIF90aGlzLnNuYXBwYWJsZV8gPSBvcHRpb25zLnNuYXBwYWJsZSA9PT0gdHJ1ZTtcbiAgICBfdGhpcy5zbmFwcGluZ1RvRWRnZXNfID0gb3B0aW9ucy5zbmFwcGluZ1RvRWRnZXMgIT09IGZhbHNlO1xuICAgIF90aGlzLnNuYXBwaW5nVG9WZXJ0aWNlXyA9IG9wdGlvbnMuc25hcHBpbmdUb1ZlcnRpY2UgIT09IGZhbHNlO1xuICAgIF90aGlzLnNuYXBwaW5nVG9sZXJhbmNlXyA9IG9wdGlvbnMuc25hcHBpbmdUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc25hcHBpbmdUb2xlcmFuY2UgOiAxMDtcbiAgICBfdGhpcy50aW1lQXR0cmlidXRlTmFtZV8gPSBvcHRpb25zLnRpbWVBdHRyaWJ1dGVOYW1lO1xuICAgIF90aGlzLnRpbWVMb3dlclZhbHVlID0gb3B0aW9ucy50aW1lTG93ZXJWYWx1ZTtcbiAgICBfdGhpcy50aW1lUHJvcGVydHlfID0gb3B0aW9ucy50aW1lUHJvcGVydHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGltZVByb3BlcnR5IDogbnVsbDtcbiAgICBfdGhpcy50aW1lVXBwZXJWYWx1ZSA9IG9wdGlvbnMudGltZVVwcGVyVmFsdWU7XG4gICAgX3RoaXMud2ZzRmVhdHVyZU5TXyA9IG9wdGlvbnMud2ZzRmVhdHVyZU5TO1xuICAgIF90aGlzLndmc0ZlYXR1cmVQcmVmaXhfID0gb3B0aW9ucy53ZnNGZWF0dXJlUHJlZml4IHx8IFdGU0ZlYXR1cmVQcmVmaXguRkVBVFVSRTtcbiAgICBfdGhpcy53ZnNPdXRwdXRGb3JtYXRfID0gb3B0aW9ucy53ZnNPdXRwdXRGb3JtYXQgfHwgV0ZTT3V0cHV0Rm9ybWF0LkdNTDM7XG4gICAgX3RoaXMud2ZzVXJsXyA9IG9wdGlvbnMud2ZzVXJsO1xuICAgIHZhciB3bXNJbmZvRm9ybWF0O1xuXG4gICAgaWYgKG9wdGlvbnMud21zSW5mb0Zvcm1hdCkge1xuICAgICAgd21zSW5mb0Zvcm1hdCA9IG9wdGlvbnMud21zSW5mb0Zvcm1hdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKF90aGlzLm9nY1NlcnZlclR5cGVfID09PSBTZXJ2ZXJUeXBlLkFSQ0dJUykge1xuICAgICAgICB3bXNJbmZvRm9ybWF0ID0gV01TSW5mb0Zvcm1hdC5HRU9KU09OO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd21zSW5mb0Zvcm1hdCA9IFdNU0luZm9Gb3JtYXQuR01MO1xuICAgICAgfVxuICAgIH1cblxuICAgIF90aGlzLndtc0luZm9Gb3JtYXRfID0gd21zSW5mb0Zvcm1hdDtcbiAgICBfdGhpcy53bXNJc1NpbmdsZVRpbGVfID0gb3B0aW9ucy53bXNJc1NpbmdsZVRpbGUgPT09IHRydWU7XG4gICAgX3RoaXMud21zVXJsXyA9IG9wdGlvbnMud21zVXJsO1xuICAgIF90aGlzLndtdHNMYXllcl8gPSBvcHRpb25zLndtdHNMYXllcjtcbiAgICBfdGhpcy53bXRzVXJsXyA9IG9wdGlvbnMud210c1VybDtcbiAgICB2YXIgd2ZzTGF5ZXJOYW1lcyA9IFtdO1xuICAgIHZhciB3bXNMYXllck5hbWVzID0gW107XG5cbiAgICBpZiAoX3RoaXMucXVlcnlhYmxlKSB7XG4gICAgICB2YXIgd2ZzTGF5ZXJzID0gX3RoaXMud2ZzTGF5ZXJzIHx8IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHdmc0xheWVycyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3ZnNMYXllciA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgIGlmICh3ZnNMYXllci5xdWVyeWFibGUpIHtcbiAgICAgICAgICB3ZnNMYXllck5hbWVzLnB1c2god2ZzTGF5ZXIubmFtZSk7XG4gICAgICAgICAgd21zTGF5ZXJOYW1lcy5wdXNoKHdmc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB3bXNMYXllcnMgPSBfdGhpcy53bXNMYXllcnMgfHwgW107XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHdtc0xheWVycyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3bXNMYXllciA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICBpZiAod21zTGF5ZXIucXVlcnlhYmxlKSB7XG4gICAgICAgICAgcHVzaFVubGVzc0luY2x1ZGVkKHdtc0xheWVyTmFtZXMsIHdtc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHdmc0Zvcm1hdCA9IG51bGw7XG5cbiAgICBpZiAoX3RoaXMuc3VwcG9ydHNXRlMgJiYgd2ZzTGF5ZXJOYW1lcy5sZW5ndGgpIHtcbiAgICAgIHZhciBmb3JtYXQ7XG5cbiAgICAgIGlmIChfdGhpcy53ZnNPdXRwdXRGb3JtYXRfID09PSBXRlNPdXRwdXRGb3JtYXQuR01MMykge1xuICAgICAgICBmb3JtYXQgPSBuZXcgb2xGb3JtYXRHTUwzKCk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLndmc091dHB1dEZvcm1hdF8gPT09IFdGU091dHB1dEZvcm1hdC5HTUwyKSB7XG4gICAgICAgIGZvcm1hdCA9IG5ldyBvbEZvcm1hdEdNTDIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBHTUwgb3V0cHV0IHZlcnNpb24nKTtcbiAgICAgIH1cblxuICAgICAgd2ZzRm9ybWF0ID0gbmV3IG9sRm9ybWF0V0ZTKHtcbiAgICAgICAgZmVhdHVyZU5TOiBfdGhpcy53ZnNGZWF0dXJlTlMsXG4gICAgICAgIGZlYXR1cmVUeXBlOiB3ZnNMYXllck5hbWVzLFxuICAgICAgICBnbWxGb3JtYXQ6IGZvcm1hdFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3RoaXMud2ZzRm9ybWF0XyA9IHdmc0Zvcm1hdDtcbiAgICB2YXIgd21zRm9ybWF0ID0gbnVsbDtcblxuICAgIGlmIChfdGhpcy5zdXBwb3J0c1dNUyAmJiB3bXNMYXllck5hbWVzLmxlbmd0aCkge1xuICAgICAgaWYgKF90aGlzLndtc0luZm9Gb3JtYXQgPT09IFdNU0luZm9Gb3JtYXQuR01MKSB7XG4gICAgICAgIHdtc0Zvcm1hdCA9IG5ldyBvbEZvcm1hdFdNU0dldEZlYXR1cmVJbmZvKHtcbiAgICAgICAgICBsYXllcnM6IHdtc0xheWVyTmFtZXNcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLndtc0luZm9Gb3JtYXQgPT09IFdNU0luZm9Gb3JtYXQuR0VPSlNPTikge1xuICAgICAgICBpZiAoX3RoaXMub2djU2VydmVyVHlwZV8gPT09IFNlcnZlclR5cGUuQVJDR0lTKSB7XG4gICAgICAgICAgd21zRm9ybWF0ID0gbmV3IG5nZW9Gb3JtYXRBcmNHSVNHZW9KU09OKHtcbiAgICAgICAgICAgIGxheWVyczogd21zTGF5ZXJOYW1lc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3RoaXMud21zRm9ybWF0XyA9IHdtc0Zvcm1hdDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gT0dDLnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAgIF9uZ2VvRGF0YXNvdXJjZURhdGFTby5wcm90b3R5cGUuc2V0QXR0cmlidXRlcy5jYWxsKHRoaXMsIGF0dHJpYnV0ZXMpO1xuXG4gICAgdGhpcy51cGRhdGVHZW9tZXRyeU5hbWVGcm9tQXR0cmlidXRlc18oKTtcbiAgfTtcblxuICBfcHJvdG8uZ2VvbWV0cnlOYW1lID0gZnVuY3Rpb24gZ2VvbWV0cnlOYW1lKGxheWVyKSB7XG4gICAgdmFyIGdlb21ldHJ5TmFtZSA9IG51bGw7XG5cbiAgICBpZiAobGF5ZXIgJiYgdGhpcy5vZ2NBdHRyaWJ1dGVzXykge1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLm9nY0F0dHJpYnV0ZXNfW2xheWVyXTtcblxuICAgICAgZm9yICh2YXIgYXR0cmlidXRlIGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlXS5uYW1lc3BhY2UgPT0gJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sJykge1xuICAgICAgICAgIGdlb21ldHJ5TmFtZSA9IGF0dHJpYnV0ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZ2VvbWV0cnlOYW1lKSB7XG4gICAgICBnZW9tZXRyeU5hbWUgPSB0aGlzLmdlb21ldHJ5TmFtZV87XG4gICAgfVxuXG4gICAgcmV0dXJuIGdlb21ldHJ5TmFtZTtcbiAgfTtcblxuICBfcHJvdG8uY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV0ZTID0gZnVuY3Rpb24gY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV0ZTKGRhdGFTb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5hYmxlRm9yV0ZTICYmIGRhdGFTb3VyY2UuY29tYmluYWJsZUZvcldGUyAmJiB0aGlzLnN1cHBvcnRzV0ZTICYmIGRhdGFTb3VyY2Uuc3VwcG9ydHNXRlMgJiYgdGhpcy5xdWVyeWFibGUgJiYgZGF0YVNvdXJjZS5xdWVyeWFibGUgJiYgdGhpcy53ZnNVcmwgPT09IGRhdGFTb3VyY2Uud2ZzVXJsICYmIHRoaXMuaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zKGRhdGFTb3VyY2UpICYmIHRoaXMuaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zRmlsdGVycyhkYXRhU291cmNlKTtcbiAgfTtcblxuICBfcHJvdG8uY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV01TID0gZnVuY3Rpb24gY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV01TKGRhdGFTb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5hYmxlRm9yV01TICYmIGRhdGFTb3VyY2UuY29tYmluYWJsZUZvcldNUyAmJiB0aGlzLnN1cHBvcnRzV01TICYmIGRhdGFTb3VyY2Uuc3VwcG9ydHNXTVMgJiYgdGhpcy5xdWVyeWFibGUgJiYgZGF0YVNvdXJjZS5xdWVyeWFibGUgJiYgdGhpcy53bXNVcmwgPT09IGRhdGFTb3VyY2Uud21zVXJsICYmIHRoaXMuaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zKGRhdGFTb3VyY2UpO1xuICB9O1xuXG4gIF9wcm90by5pc0FueU9HQ0xheWVySW5SYW5nZSA9IGZ1bmN0aW9uIGlzQW55T0dDTGF5ZXJJblJhbmdlKHJlcywgcXVlcnlhYmxlT25seSkge1xuICAgIGlmIChxdWVyeWFibGVPbmx5ID09PSB2b2lkIDApIHtcbiAgICAgIHF1ZXJ5YWJsZU9ubHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISF0aGlzLmdldEluUmFuZ2VXRlNMYXllck5hbWVzKHJlcywgcXVlcnlhYmxlT25seSkubGVuZ3RoO1xuICB9O1xuXG4gIF9wcm90by5nZXRXTVNMYXllck5hbWVzID0gZnVuY3Rpb24gZ2V0V01TTGF5ZXJOYW1lcyhxdWVyeWFibGVPbmx5KSB7XG4gICAgaWYgKHF1ZXJ5YWJsZU9ubHkgPT09IHZvaWQgMCkge1xuICAgICAgcXVlcnlhYmxlT25seSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBsYXllck5hbWVzID0gW107XG5cbiAgICBpZiAodGhpcy53bXNMYXllcnMpIHtcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud21zTGF5ZXJzKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIHdtc0xheWVyID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICAgIGlmICghcXVlcnlhYmxlT25seSB8fCB3bXNMYXllci5xdWVyeWFibGUgJiYgd21zTGF5ZXIuZ2V0RGF0YSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBsYXllck5hbWVzLnB1c2god21zTGF5ZXIubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGF5ZXJOYW1lcztcbiAgfTtcblxuICBfcHJvdG8uZ2V0SW5SYW5nZVdGU0xheWVyTmFtZXMgPSBmdW5jdGlvbiBnZXRJblJhbmdlV0ZTTGF5ZXJOYW1lcyhyZXMsIHF1ZXJ5YWJsZU9ubHkpIHtcbiAgICBpZiAocXVlcnlhYmxlT25seSA9PT0gdm9pZCAwKSB7XG4gICAgICBxdWVyeWFibGVPbmx5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxheWVyTmFtZXMgPSBbXTtcblxuICAgIGlmICh0aGlzLndmc0xheWVycykge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy53ZnNMYXllcnMpLCBfc3RlcDQ7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNCgpKS5kb25lOykge1xuICAgICAgICB2YXIgd2ZzTGF5ZXIgPSBfc3RlcDQudmFsdWU7XG4gICAgICAgIHZhciBtYXhSZXMgPSB3ZnNMYXllci5tYXhSZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluUmVzID0gd2ZzTGF5ZXIubWluUmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGluTWluUmFuZ2UgPSBtaW5SZXMgPT09IHVuZGVmaW5lZCB8fCByZXMgPj0gbWluUmVzO1xuICAgICAgICB2YXIgaW5NYXhSYW5nZSA9IG1heFJlcyA9PT0gdW5kZWZpbmVkIHx8IHJlcyA8PSBtYXhSZXM7XG4gICAgICAgIHZhciBpblJhbmdlID0gaW5NaW5SYW5nZSAmJiBpbk1heFJhbmdlO1xuXG4gICAgICAgIGlmIChpblJhbmdlICYmICghcXVlcnlhYmxlT25seSB8fCB3ZnNMYXllci5xdWVyeWFibGUgJiYgd2ZzTGF5ZXIuZ2V0RGF0YSAhPT0gZmFsc2UpKSB7XG4gICAgICAgICAgbGF5ZXJOYW1lcy5wdXNoKHdmc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxheWVyTmFtZXM7XG4gIH07XG5cbiAgX3Byb3RvLmdldFdGU0xheWVyTmFtZXMgPSBmdW5jdGlvbiBnZXRXRlNMYXllck5hbWVzKHF1ZXJ5YWJsZU9ubHkpIHtcbiAgICBpZiAocXVlcnlhYmxlT25seSA9PT0gdm9pZCAwKSB7XG4gICAgICBxdWVyeWFibGVPbmx5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxheWVyTmFtZXMgPSBbXTtcblxuICAgIGlmICh0aGlzLndmc0xheWVycykge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy53ZnNMYXllcnMpLCBfc3RlcDU7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNSgpKS5kb25lOykge1xuICAgICAgICB2YXIgd2ZzTGF5ZXIgPSBfc3RlcDUudmFsdWU7XG5cbiAgICAgICAgaWYgKCFxdWVyeWFibGVPbmx5IHx8IHdmc0xheWVyLnF1ZXJ5YWJsZSAmJiB3ZnNMYXllci5nZXREYXRhICE9PSBmYWxzZSkge1xuICAgICAgICAgIGxheWVyTmFtZXMucHVzaCh3ZnNMYXllci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsYXllck5hbWVzO1xuICB9O1xuXG4gIF9wcm90by5nZXRGaWx0cmFibGVXRlNMYXllck5hbWUgPSBmdW5jdGlvbiBnZXRGaWx0cmFibGVXRlNMYXllck5hbWUoKSB7XG4gICAgaWYgKCF0aGlzLmZpbHRyYWJsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZpbHRyYWJsZScpO1xuICAgIH1cblxuICAgIHZhciBsYXllck5hbWVzID0gdGhpcy5nZXRXRlNMYXllck5hbWVzKHRydWUpO1xuICAgIHJldHVybiBsYXllck5hbWVzWzBdO1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVHZW9tZXRyeU5hbWVGcm9tQXR0cmlidXRlc18gPSBmdW5jdGlvbiB1cGRhdGVHZW9tZXRyeU5hbWVGcm9tQXR0cmlidXRlc18oKSB7XG4gICAgaWYgKHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5hdHRyaWJ1dGVzKSwgX3N0ZXA2OyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9zdGVwNi52YWx1ZTtcblxuICAgICAgICBpZiAoYXR0cmlidXRlLnR5cGUgPT09IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkdFT01FVFJZKSB7XG4gICAgICAgICAgdGhpcy5nZW9tZXRyeU5hbWVfID0gYXR0cmlidXRlLm5hbWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhdmVUaGVTYW1lQWN0aXZlRGltZW5zaW9ucyA9IGZ1bmN0aW9uIGhhdmVUaGVTYW1lQWN0aXZlRGltZW5zaW9ucyhkYXRhU291cmNlKSB7XG4gICAgdmFyIHNoYXJlID0gdHJ1ZTtcbiAgICB2YXIgbXlBY3RpdmUgPSB0aGlzLmFjdGl2ZURpbWVuc2lvbnM7XG4gICAgdmFyIGl0c0FjdGl2ZSA9IGRhdGFTb3VyY2UuYWN0aXZlRGltZW5zaW9ucztcblxuICAgIGZvciAodmFyIGtleSBpbiBteUFjdGl2ZSkge1xuICAgICAgaWYgKG15QWN0aXZlW2tleV0gIT09IGl0c0FjdGl2ZVtrZXldKSB7XG4gICAgICAgIHNoYXJlID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzaGFyZSkge1xuICAgICAgZm9yICh2YXIgX2tleSBpbiBpdHNBY3RpdmUpIHtcbiAgICAgICAgaWYgKGl0c0FjdGl2ZVtfa2V5XSAhPT0gbXlBY3RpdmVbX2tleV0pIHtcbiAgICAgICAgICBzaGFyZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYXJlO1xuICB9O1xuXG4gIF9wcm90by5oYXZlVGhlU2FtZUFjdGl2ZURpbWVuc2lvbnNGaWx0ZXJzID0gZnVuY3Rpb24gaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zRmlsdGVycyhkYXRhU291cmNlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgbXlDb25maWcgPSB0aGlzLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnIHx8IHt9O1xuICAgIHZhciBpdHNDb25maWcgPSBkYXRhU291cmNlLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnIHx8IHt9O1xuXG4gICAgdmFyIGVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhrZXkpIHtcbiAgICAgIHZhciBteUtleUNvbmZpZyA9IG15Q29uZmlnW2tleV07XG4gICAgICB2YXIgaXRzS2V5Q29uZmlnID0gaXRzQ29uZmlnW2tleV07XG5cbiAgICAgIGlmIChteUtleUNvbmZpZyA9PT0gdW5kZWZpbmVkIHx8IGl0c0tleUNvbmZpZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG15S2V5Q29uZmlnLmZpZWxkICE9IGl0c0tleUNvbmZpZy5maWVsZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBteVZhbHVlID0gbXlLZXlDb25maWcudmFsdWUgIT09IG51bGwgPyBteUtleUNvbmZpZy52YWx1ZSA6IF90aGlzMi5kaW1lbnNpb25zW2tleV07XG4gICAgICB2YXIgaXRzVmFsdWUgPSBpdHNLZXlDb25maWcudmFsdWUgIT09IG51bGwgPyBpdHNLZXlDb25maWcudmFsdWUgOiBkYXRhU291cmNlLmRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgaWYgKG15VmFsdWUgIT0gaXRzVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpIHtcbiAgICAgIGlmICghZXF1YWxzKGtleSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9rZXkyIGluIGRhdGFTb3VyY2UuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpIHtcbiAgICAgIGlmICghZXF1YWxzKF9rZXkyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgX3Byb3RvLmdldENvbW1vbk9HQ0F0dHJpYnV0ZXNfID0gZnVuY3Rpb24gZ2V0Q29tbW9uT0dDQXR0cmlidXRlc18obGF5ZXJOYW1lcykge1xuICAgIHZhciBhbGxMYXllcnNBdHRyaWJ1dGVzID0gdGhpcy5vZ2NBdHRyaWJ1dGVzXztcblxuICAgIGlmICghYWxsTGF5ZXJzQXR0cmlidXRlcyB8fCAhbGF5ZXJOYW1lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsYXllcnNBdHRyaWJ1dGVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllck5hbWVzKSwgX3N0ZXA3OyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcoKSkuZG9uZTspIHtcbiAgICAgIHZhciBsYXllck5hbWUgPSBfc3RlcDcudmFsdWU7XG4gICAgICB2YXIgX2xheWVyQXR0cmlidXRlcyA9IGFsbExheWVyc0F0dHJpYnV0ZXNbbGF5ZXJOYW1lXTtcblxuICAgICAgaWYgKF9sYXllckF0dHJpYnV0ZXMpIHtcbiAgICAgICAgbGF5ZXJzQXR0cmlidXRlcy5wdXNoKF9sYXllckF0dHJpYnV0ZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghbGF5ZXJzQXR0cmlidXRlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBhdHRyaWJ1dGVzID0ge307XG4gICAgdmFyIGZpcnN0TGF5ZXJBdHRyaWJ1dGVzID0gbGF5ZXJzQXR0cmlidXRlcy5zaGlmdCgpO1xuXG4gICAgZm9yICh2YXIgZmlyc3RMYXllckF0dHJpYnV0ZU5hbWUgaW4gZmlyc3RMYXllckF0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBmaXJzdExheWVyQXR0cmlidXRlID0gZmlyc3RMYXllckF0dHJpYnV0ZXNbZmlyc3RMYXllckF0dHJpYnV0ZU5hbWVdO1xuICAgICAgdmFyIHNob3VsZFB1c2hBdHRyaWJ1dGUgPSB0cnVlO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllcnNBdHRyaWJ1dGVzKSwgX3N0ZXA4OyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGxheWVyQXR0cmlidXRlcyA9IF9zdGVwOC52YWx1ZTtcblxuICAgICAgICBpZiAoIWxheWVyQXR0cmlidXRlc1tmaXJzdExheWVyQXR0cmlidXRlTmFtZV0pIHtcbiAgICAgICAgICBzaG91bGRQdXNoQXR0cmlidXRlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNob3VsZFB1c2hBdHRyaWJ1dGUpIHtcbiAgICAgICAgYXR0cmlidXRlc1tmaXJzdExheWVyQXR0cmlidXRlTmFtZV0gPSBmaXJzdExheWVyQXR0cmlidXRlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhPR0MsIFt7XG4gICAga2V5OiBcImRpbWVuc2lvbnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbnNfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmaWx0ZXJDb25kaXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlckNvbmRpdGlvbl87XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChmaWx0ZXJDb25kaXRpb24pIHtcbiAgICAgIHRoaXMuZmlsdGVyQ29uZGl0aW9uXyA9IGZpbHRlckNvbmRpdGlvbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGltZVJhbmdlVmFsdWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciByYW5nZSA9IG51bGw7XG4gICAgICB2YXIgbG93ZXIgPSB0aGlzLnRpbWVMb3dlclZhbHVlO1xuICAgICAgdmFyIHVwcGVyID0gdGhpcy50aW1lVXBwZXJWYWx1ZTtcblxuICAgICAgaWYgKGxvd2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmFuZ2UgPSB7XG4gICAgICAgICAgc3RhcnQ6IGxvd2VyXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHVwcGVyICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJhbmdlLmVuZCA9IHVwcGVyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByYW5nZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHJhbmdlKSB7XG4gICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgdGhpcy50aW1lVXBwZXJWYWx1ZSA9IHJhbmdlLmVuZDtcbiAgICAgICAgdGhpcy50aW1lTG93ZXJWYWx1ZSA9IHJhbmdlLnN0YXJ0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aW1lVXBwZXJWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50aW1lTG93ZXJWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29weWFibGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvcHlhYmxlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib2djSW1hZ2VUeXBlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5vZ2NJbWFnZVR5cGVfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXNMYXllcnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc0xheWVyc187XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndmc0xheWVyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud2ZzTGF5ZXJzXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib2djU2VydmVyVHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub2djU2VydmVyVHlwZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9nY1R5cGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9nY1R5cGVfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJxdWVyeUljb25Qb3NpdGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucXVlcnlJY29uUG9zaXRpb25fO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzbmFwcGFibGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNuYXBwYWJsZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNuYXBwaW5nVG9FZGdlc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc25hcHBpbmdUb0VkZ2VzXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic25hcHBpbmdUb1ZlcnRpY2VcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNuYXBwaW5nVG9WZXJ0aWNlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic25hcHBpbmdUb2xlcmFuY2VcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNuYXBwaW5nVG9sZXJhbmNlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGltZUF0dHJpYnV0ZU5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbWVBdHRyaWJ1dGVOYW1lXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGltZVByb3BlcnR5XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy50aW1lUHJvcGVydHlfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3ZnNGZWF0dXJlTlNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndmc0ZlYXR1cmVOU187XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndmc0ZlYXR1cmVQcmVmaXhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndmc0ZlYXR1cmVQcmVmaXhfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3ZnNPdXRwdXRGb3JtYXRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndmc091dHB1dEZvcm1hdF87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndmc1VybFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud2ZzVXJsXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid21zSW5mb0Zvcm1hdFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud21zSW5mb0Zvcm1hdF87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndtc0lzU2luZ2xlVGlsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud21zSXNTaW5nbGVUaWxlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid21zVXJsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53bXNVcmxfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXRzTGF5ZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNMYXllcl87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndtdHNVcmxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNVcmxfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhY3RpdmVEaW1lbnNpb25zXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgYWN0aXZlID0ge307XG4gICAgICB2YXIgZGltZW5zaW9ucyA9IHRoaXMuZGltZW5zaW9uc18gfHwge307XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5kaW1lbnNpb25zQ29uZmlnIHx8IHt9O1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29uZmlnKSB7XG4gICAgICAgIHZhciBjb25maWdWYWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgIGlmIChjb25maWdWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhY3RpdmVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY3RpdmVba2V5XSA9IGNvbmZpZ1ZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY3RpdmU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbWJpbmFibGVGb3JXRlNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlclJ1bGVzID09PSBudWxsICYmIHRoaXMudGltZVJhbmdlVmFsdWUgPT09IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbWJpbmFibGVGb3JXTVNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlclJ1bGVzID09PSBudWxsICYmIHRoaXMudGltZVJhbmdlVmFsdWUgPT09IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9nY0F0dHJpYnV0ZXNXRlNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciB3ZnNMYXllck5hbWVzID0gW107XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud2ZzTGF5ZXJzXyksIF9zdGVwOTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5KCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3ZnNMYXllciA9IF9zdGVwOS52YWx1ZTtcblxuICAgICAgICBpZiAod2ZzTGF5ZXIucXVlcnlhYmxlKSB7XG4gICAgICAgICAgd2ZzTGF5ZXJOYW1lcy5wdXNoKHdmc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmdldENvbW1vbk9HQ0F0dHJpYnV0ZXNfKHdmc0xheWVyTmFtZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvZ2NBdHRyaWJ1dGVzV01TXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgd21zTGF5ZXJOYW1lcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy53bXNMYXllcnNfKSwgX3N0ZXAxMDsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIHdtc0xheWVyID0gX3N0ZXAxMC52YWx1ZTtcblxuICAgICAgICBpZiAod21zTGF5ZXIucXVlcnlhYmxlKSB7XG4gICAgICAgICAgd21zTGF5ZXJOYW1lcy5wdXNoKHdtc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmdldENvbW1vbk9HQ0F0dHJpYnV0ZXNfKHdtc0xheWVyTmFtZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJxdWVyeWFibGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBxdWVyeWFibGUgPSBmYWxzZTtcblxuICAgICAgaWYgKHRoaXMuc3VwcG9ydHNXRlMgJiYgdGhpcy53ZnNMYXllcnMpIHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud2ZzTGF5ZXJzKSwgX3N0ZXAxMTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgd2ZzTGF5ZXIgPSBfc3RlcDExLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKHdmc0xheWVyLnF1ZXJ5YWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcXVlcnlhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zdXBwb3J0c1dNUyAmJiB0aGlzLndtc0xheWVycyAmJiB0aGlzLndtc0xheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHF1ZXJ5YWJsZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBxdWVyeWFibGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInN1cHBvcnRzV0ZTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZnNVcmwgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3VwcG9ydHNBdHRyaWJ1dGVzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzICE9PSBudWxsIHx8IHRoaXMuc3VwcG9ydHNXRlMgJiYgdGhpcy53ZnNMYXllcnMgIT09IG51bGwgJiYgdGhpcy53ZnNMYXllcnMubGVuZ3RoID09PSAxICYmIHRoaXMud2ZzTGF5ZXJzWzBdLnF1ZXJ5YWJsZSA9PT0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3VwcG9ydHNXTVNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc1VybCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdXBwb3J0c1dNVFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNVcmwgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid2ZzRm9ybWF0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZnNGb3JtYXRfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXNGb3JtYXRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc0Zvcm1hdF87XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE9HQztcbn0obmdlb0RhdGFzb3VyY2VEYXRhU291cmNlKTtcbmV4cG9ydCBmdW5jdGlvbiBndWVzc1NlcnZpY2VUeXBlQnlVcmwodXJsKSB7XG4gIHZhciB0eXBlO1xuXG4gIGlmICgvKHdtdHMpL2kudGVzdCh1cmwpKSB7XG4gICAgdHlwZSA9IFR5cGUuV01UUztcbiAgfSBlbHNlIHtcbiAgICB0eXBlID0gVHlwZS5XTVM7XG4gIH1cblxuICByZXR1cm4gdHlwZTtcbn1cbmV4cG9ydCB2YXIgVGltZVByb3BlcnR5V2lkZ2V0RW51bSA9IHtcbiAgU0xJREVSOiAnc2xpZGVyJyxcbiAgREFURVBJQ0tFUjogJ2RhdGVwaWNrZXInXG59O1xuZXhwb3J0IHZhciBUaW1lUHJvcGVydHlNb2RlRW51bSA9IHtcbiAgUkFOR0U6ICdyYW5nZScsXG4gIFZBTFVFOiAndmFsdWUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJ1xufTtcbmV4cG9ydCB2YXIgVGltZVByb3BlcnR5UmVzb2x1dGlvbkVudW0gPSB7XG4gIERBWTogJ2RheScsXG4gIE1PTlRIOiAnbW9udGgnLFxuICBZRUFSOiAneWVhcicsXG4gIFNFQ09ORDogJ3NlY29uZCdcbn07XG5leHBvcnQgZGVmYXVsdCBPR0M7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9EYXRhc291cmNlR3JvdXAgZnJvbSAnbmdlby9kYXRhc291cmNlL0dyb3VwLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvRGF0YXNvdXJjZUdyb3VwKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0RhdGFzb3VyY2VHcm91cCk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX25nZW9EYXRhc291cmNlR3JvdXAuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIF90aGlzLnVybF8gPSBvcHRpb25zLnVybDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcInVybFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMudXJsXztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9EYXRhc291cmNlR3JvdXApO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VPR0NHcm91cCBmcm9tICduZ2VvL2RhdGFzb3VyY2UvT0dDR3JvdXAuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlT0dDIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuaW1wb3J0IHsgcmVtb3ZlIGFzIHJlbW92ZUZyb21BcnJheSB9IGZyb20gJ29sL2FycmF5LmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvRGF0YXNvdXJjZU9HQ0dybykge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX25nZW9EYXRhc291cmNlT0dDR3JvKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zLCBuZ2VvTGF5ZXJIZWxwZXIpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9uZ2VvRGF0YXNvdXJjZU9HQ0dyby5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgdmFyIGluamVjdG9yID0gb3B0aW9ucy5pbmplY3RvcjtcbiAgICBfdGhpcy5sYXllcl8gPSBudWxsO1xuICAgIF90aGlzLm5nZW9MYXllckhlbHBlcl8gPSBuZ2VvTGF5ZXJIZWxwZXI7XG4gICAgX3RoaXMucm9vdFNjb3BlXyA9IGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xuICAgIF90aGlzLndtc0RhdGFTb3VyY2VVbnJlZ2lzdGVyXyA9IHt9O1xuXG4gICAgX3RoaXMuaW5pdF8oKTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmluaXRfID0gZnVuY3Rpb24gaW5pdF8oKSB7XG4gICAgaWYgKCF0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFTb3VyY2VzJyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmRhdGFTb3VyY2VzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmIChkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VPR0MpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlckRhdGFTb3VyY2VfKGRhdGFTb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5kYXRhU291cmNlcyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgaWYgKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQykge1xuICAgICAgICB0aGlzLnVucmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbmdlb0RhdGFzb3VyY2VPR0NHcm8ucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uYWRkRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGFkZERhdGFTb3VyY2UoZGF0YVNvdXJjZSkge1xuICAgIF9uZ2VvRGF0YXNvdXJjZU9HQ0dyby5wcm90b3R5cGUuYWRkRGF0YVNvdXJjZS5jYWxsKHRoaXMsIGRhdGFTb3VyY2UpO1xuXG4gICAgaWYgKCEoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIG5nZW9EYXRhc291cmNlT0dDKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBkYXRhc291cmNlIHR5cGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZ2lzdGVyRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSk7XG4gIH07XG5cbiAgX3Byb3RvLnJlZ2lzdGVyRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiByZWdpc3RlckRhdGFTb3VyY2VfKGRhdGFTb3VyY2UpIHtcbiAgICB2YXIgaWQgPSBkYXRhU291cmNlLmlkO1xuICAgIHRoaXMud21zRGF0YVNvdXJjZVVucmVnaXN0ZXJfW2lkXSA9IHRoaXMucm9vdFNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRhdGFTb3VyY2UudmlzaWJsZTtcbiAgICB9LCB0aGlzLmhhbmRsZURhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXy5iaW5kKHRoaXMpKTtcblxuICAgIGlmICghdGhpcy5sYXllcl8pIHtcbiAgICAgIHRoaXMubGF5ZXJfID0gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmNyZWF0ZUJhc2ljV01TTGF5ZXJGcm9tRGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sYXllcl8uZ2V0KCdxdWVyeVNvdXJjZUlkcycpLnB1c2goaWQpO1xuICAgICAgdGhpcy51cGRhdGVMYXllcl8oKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZURhdGFTb3VyY2VWaXNpYmxlQ2hhbmdlXyh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgIHRoaXMudXBkYXRlTGF5ZXJfKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by51cGRhdGVMYXllcl8gPSBmdW5jdGlvbiB1cGRhdGVMYXllcl8oKSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5sYXllcjtcbiAgICB2YXIgbGF5ZXJOYW1lcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5kYXRhU291cmNlcyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgaWYgKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQyAmJiBkYXRhU291cmNlLnZpc2libGUpIHtcbiAgICAgICAgbGF5ZXJOYW1lcyA9IGxheWVyTmFtZXMuY29uY2F0KGRhdGFTb3VyY2UuZ2V0V01TTGF5ZXJOYW1lcygpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm5nZW9MYXllckhlbHBlcl8udXBkYXRlV01TTGF5ZXJTdGF0ZShsYXllciwgbGF5ZXJOYW1lcy5qb2luKCcsJykpO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVEYXRhU291cmNlID0gZnVuY3Rpb24gcmVtb3ZlRGF0YVNvdXJjZShkYXRhU291cmNlKSB7XG4gICAgX25nZW9EYXRhc291cmNlT0dDR3JvLnByb3RvdHlwZS5yZW1vdmVEYXRhU291cmNlLmNhbGwodGhpcywgZGF0YVNvdXJjZSk7XG5cbiAgICBpZiAoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIG5nZW9EYXRhc291cmNlT0dDKSB7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnVucmVnaXN0ZXJEYXRhU291cmNlXyA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKSB7XG4gICAgdmFyIGlkID0gZGF0YVNvdXJjZS5pZDtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLmxheWVyO1xuICAgIHZhciB1bnJlZ2lzdGVyID0gdGhpcy53bXNEYXRhU291cmNlVW5yZWdpc3Rlcl9baWRdO1xuICAgIHVucmVnaXN0ZXIoKTtcbiAgICBkZWxldGUgdGhpcy53bXNEYXRhU291cmNlVW5yZWdpc3Rlcl9baWRdO1xuICAgIHJlbW92ZUZyb21BcnJheSh0aGlzLmRhdGFTb3VyY2VzLCBkYXRhU291cmNlKTtcbiAgICB2YXIgaWRzID0gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmdldFF1ZXJ5U291cmNlSWRzKGxheWVyKTtcblxuICAgIGlmIChpZHMpIHtcbiAgICAgIHJlbW92ZUZyb21BcnJheShpZHMsIGlkKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhU291cmNlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMudXBkYXRlTGF5ZXJfKCk7XG4gICAgfVxuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwibGF5ZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICghdGhpcy5sYXllcl8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxheWVyJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmxheWVyXztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9EYXRhc291cmNlT0dDR3JvdXApO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiRG93bmxvYWRDc3ZTZXJ2aWNlLiRpbmplY3QgPSBbXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIm5nZW9Eb3dubG9hZFwiLCBcIm5nZW9Dc3ZFbmNvZGluZ1wiLCBcIm5nZW9Dc3ZFeHRlbnNpb25cIiwgXCJuZ2VvQ3N2SW5jbHVkZUhlYWRlclwiLCBcIm5nZW9Dc3ZRdW90ZVwiLCBcIm5nZW9Dc3ZTZXBhcmF0b3JcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRG93bmxvYWRTZXJ2aWNlIGZyb20gJ25nZW8vZG93bmxvYWQvc2VydmljZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gRG93bmxvYWRDc3ZTZXJ2aWNlKGdldHRleHRDYXRhbG9nLCBuZ2VvRG93bmxvYWQsIG5nZW9Dc3ZFbmNvZGluZywgbmdlb0NzdkV4dGVuc2lvbiwgbmdlb0NzdkluY2x1ZGVIZWFkZXIsIG5nZW9Dc3ZRdW90ZSwgbmdlb0NzdlNlcGFyYXRvcikge1xuICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICB0aGlzLmVuY29kaW5nXyA9IG5nZW9Dc3ZFbmNvZGluZztcbiAgdGhpcy5leHRlbnNpb25fID0gbmdlb0NzdkV4dGVuc2lvbjtcbiAgdGhpcy5pbmNsdWRlSGVhZGVyXyA9IG5nZW9Dc3ZJbmNsdWRlSGVhZGVyO1xuICB0aGlzLnF1b3RlXyA9IG5nZW9Dc3ZRdW90ZTtcbiAgdGhpcy5zZXBhcmF0b3JfID0gbmdlb0NzdlNlcGFyYXRvcjtcbiAgdGhpcy5kb3dubG9hZF8gPSBuZ2VvRG93bmxvYWQ7XG59XG5cbkRvd25sb2FkQ3N2U2VydmljZS5wcm90b3R5cGUuZ2VuZXJhdGVDc3YgPSBmdW5jdGlvbiAoZGF0YSwgY29sdW1uRGVmcykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmIChkYXRhLmxlbmd0aCA9PSAwIHx8IGNvbHVtbkRlZnMubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICB2YXIgdHJhbnNsYXRlZENvbHVtbkhlYWRlcnMgPSBjb2x1bW5EZWZzLm1hcChmdW5jdGlvbiAoY29sdW1uSGVhZGVyKSB7XG4gICAgcmV0dXJuIF90aGlzLmdldHRleHRDYXRhbG9nXy5nZXRTdHJpbmcoY29sdW1uSGVhZGVyLm5hbWUpO1xuICB9KTtcbiAgdmFyIGhlYWRlciA9IHRoaXMuZ2V0Um93Xyh0cmFuc2xhdGVkQ29sdW1uSGVhZGVycyk7XG4gIHZhciBkYXRhUm93cyA9IGRhdGEubWFwKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICB2YXIgcm93VmFsdWVzID0gY29sdW1uRGVmcy5tYXAoZnVuY3Rpb24gKGNvbHVtbkhlYWRlcikge1xuICAgICAgcmV0dXJuIHZhbHVlc1tjb2x1bW5IZWFkZXIubmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzLmdldFJvd18ocm93VmFsdWVzKTtcbiAgfSk7XG4gIHJldHVybiB0aGlzLmluY2x1ZGVIZWFkZXJfID8gaGVhZGVyICsgZGF0YVJvd3Muam9pbignJykgOiBkYXRhUm93cy5qb2luKCcnKTtcbn07XG5cbkRvd25sb2FkQ3N2U2VydmljZS5wcm90b3R5cGUuZ2V0Um93XyA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgdmFyIG1hdGNoQWxsUXVvdGVzUmVnZXggPSBuZXcgUmVnRXhwKHRoaXMucXVvdGVfLCAnZycpO1xuICB2YXIgZG91YmxlUXVvdGUgPSB0aGlzLnF1b3RlXyArIHRoaXMucXVvdGVfO1xuICB2YXIgcm93VmFsdWVzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdmFsdWUgPSBcIlwiICsgdmFsdWU7XG4gICAgICByZXR1cm4gXCJcIiArIF90aGlzMi5xdW90ZV8gKyB2YWx1ZS5yZXBsYWNlKG1hdGNoQWxsUXVvdGVzUmVnZXgsIGRvdWJsZVF1b3RlKSArIF90aGlzMi5xdW90ZV87XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcm93VmFsdWVzLmpvaW4odGhpcy5zZXBhcmF0b3JfKSArIFwiXFxuXCI7XG59O1xuXG5Eb3dubG9hZENzdlNlcnZpY2UucHJvdG90eXBlLnN0YXJ0RG93bmxvYWQgPSBmdW5jdGlvbiAoZGF0YSwgY29sdW1uRGVmcywgZmlsZU5hbWUpIHtcbiAgdmFyIGZpbGVDb250ZW50ID0gdGhpcy5nZW5lcmF0ZUNzdihkYXRhLCBjb2x1bW5EZWZzKTtcbiAgdGhpcy5kb3dubG9hZF8oZmlsZUNvbnRlbnQsIGZpbGVOYW1lLCBcInRleHQvY3N2O2NoYXJzZXQ9XCIgKyB0aGlzLmVuY29kaW5nXyk7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0NzdkRvd25sb2FkJywgW25nZW9Eb3dubG9hZFNlcnZpY2UubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb0NzdkRvd25sb2FkJywgRG93bmxvYWRDc3ZTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgaXNTYWZhcmkgfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Eb3dubG9hZCcsIFtdKTtcbmV4cG9ydCBmdW5jdGlvbiBmYWN0b3J5KCkge1xuICBmdW5jdGlvbiBkb3dubG9hZChjb250ZW50LCBmaWxlTmFtZSwgb3B0X2ZpbGVUeXBlKSB7XG4gICAgdmFyIGZpbGVUeXBlID0gb3B0X2ZpbGVUeXBlICE9PSB1bmRlZmluZWQgJiYgIWlzU2FmYXJpKCkgPyBvcHRfZmlsZVR5cGUgOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04JztcbiAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShbMHhlZiwgMHhiYiwgMHhiZl0pLCBjb250ZW50XSwge1xuICAgICAgdHlwZTogZmlsZVR5cGVcbiAgICB9KTtcbiAgICBzYXZlQXMoYmxvYiwgZmlsZU5hbWUpO1xuICB9XG5cbiAgcmV0dXJuIGRvd25sb2FkO1xufVxubXlNb2R1bGUuZmFjdG9yeSgnbmdlb0Rvd25sb2FkJywgZmFjdG9yeSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBvbENvbGxlY3Rpb24gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0ZlYXR1cmVzJywgW10pO1xubXlNb2R1bGUudmFsdWUoJ25nZW9GZWF0dXJlcycsIG5ldyBvbENvbGxlY3Rpb24oKSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCB7IHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHVubGlzdGVuQnlLZXlzKGtleXMpIHtcbiAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShrZXlzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICB2YXIga2V5ID0gX3N0ZXAudmFsdWU7XG4gICAgdW5saXN0ZW5CeUtleShrZXkpO1xuICB9XG5cbiAga2V5cy5sZW5ndGggPSAwO1xufSIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQU5EOiAnJiYnLFxuICBOT1Q6ICchJyxcbiAgT1I6ICd8fCdcbn07IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRmlsdGVyQ29uZGl0aW9uIGZyb20gJ25nZW8vZmlsdGVyL0NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgKiBhcyBuZ2VvRm9ybWF0RmlsdGVyIGZyb20gJ25nZW8vZm9ybWF0L2ZpbHRlci5qcyc7XG5pbXBvcnQgbmdlb01pc2NGZWF0dXJlSGVscGVyIGZyb20gJ25nZW8vbWlzYy9GZWF0dXJlSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY1dNU1RpbWUgZnJvbSAnbmdlby9taXNjL1dNU1RpbWUuanMnO1xuaW1wb3J0IG5nZW9SdWxlRGF0ZSBmcm9tICduZ2VvL3J1bGUvRGF0ZS5qcyc7XG5pbXBvcnQgbmdlb1J1bGVHZW9tZXRyeSBmcm9tICduZ2VvL3J1bGUvR2VvbWV0cnkuanMnO1xuaW1wb3J0IG5nZW9SdWxlUnVsZSwgeyBSdWxlT3BlcmF0b3JUeXBlLCBSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZSwgUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlIH0gZnJvbSAnbmdlby9ydWxlL1J1bGUuanMnO1xuaW1wb3J0IG5nZW9SdWxlU2VsZWN0IGZyb20gJ25nZW8vcnVsZS9TZWxlY3QuanMnO1xuaW1wb3J0IG5nZW9SdWxlVGV4dCBmcm9tICduZ2VvL3J1bGUvVGV4dC5qcyc7XG5pbXBvcnQgeyB3cml0ZUZpbHRlciB9IGZyb20gJ29sL2Zvcm1hdC9XRlMuanMnO1xuaW1wb3J0ICogYXMgb2xGb3JtYXRGaWx0ZXIgZnJvbSAnb2wvZm9ybWF0L2ZpbHRlci5qcyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5leHBvcnQgdmFyIFJ1bGVIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFJ1bGVIZWxwZXIuJGluamVjdCA9IFtcImdldHRleHRDYXRhbG9nXCIsIFwibmdlb0ZlYXR1cmVIZWxwZXJcIiwgXCJuZ2VvV01TVGltZVwiXTtcblxuICBmdW5jdGlvbiBSdWxlSGVscGVyKGdldHRleHRDYXRhbG9nLCBuZ2VvRmVhdHVyZUhlbHBlciwgbmdlb1dNU1RpbWUpIHtcbiAgICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfID0gbmdlb0ZlYXR1cmVIZWxwZXI7XG4gICAgdGhpcy5uZ2VvV01TVGltZV8gPSBuZ2VvV01TVGltZTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBSdWxlSGVscGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlUnVsZXNGcm9tQXR0cmlidXRlcyA9IGZ1bmN0aW9uIGNyZWF0ZVJ1bGVzRnJvbUF0dHJpYnV0ZXMoYXR0cmlidXRlcywgb3B0X2lzQ3VzdG9tKSB7XG4gICAgdmFyIHJ1bGVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGF0dHJpYnV0ZXMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9zdGVwLnZhbHVlO1xuICAgICAgcnVsZXMucHVzaCh0aGlzLmNyZWF0ZVJ1bGVGcm9tQXR0cmlidXRlKGF0dHJpYnV0ZSwgb3B0X2lzQ3VzdG9tKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ1bGVzO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVSdWxlRnJvbUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIGNyZWF0ZVJ1bGVGcm9tQXR0cmlidXRlKGF0dHJpYnV0ZSwgb3B0X2lzQ3VzdG9tKSB7XG4gICAgdmFyIHJ1bGU7XG4gICAgdmFyIGlzQ3VzdG9tID0gb3B0X2lzQ3VzdG9tID09PSB0cnVlO1xuICAgIHZhciBuYW1lID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ18uZ2V0U3RyaW5nKGF0dHJpYnV0ZS5uYW1lKTtcblxuICAgIHN3aXRjaCAoYXR0cmlidXRlLnR5cGUpIHtcbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuREFURTpcbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuREFURVRJTUU6XG4gICAgICAgIGlmIChpc0N1c3RvbSkge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVEYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlLkVRVUFMUyxcbiAgICAgICAgICAgIG9wZXJhdG9yczogW1J1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5FUVVBTFMsIFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5CRUdJTlMsIFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5FTkRTXSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBhdHRyaWJ1dGUudHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVEYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlLkRVUklORyxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBhdHRyaWJ1dGUudHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuR0VPTUVUUlk6XG4gICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVHZW9tZXRyeSh7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBvcGVyYXRvcjogUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUuSU5URVJTRUNUUyxcbiAgICAgICAgICBvcGVyYXRvcnM6IFtSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZS5DT05UQUlOUywgUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUuSU5URVJTRUNUUywgUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUuV0lUSElOXSxcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IGF0dHJpYnV0ZS5uYW1lLFxuICAgICAgICAgIHR5cGU6IGF0dHJpYnV0ZS50eXBlXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5OVU1CRVI6XG4gICAgICAgIGlmIChpc0N1c3RvbSkge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVSdWxlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZU9wZXJhdG9yVHlwZS5FUVVBTF9UTyxcbiAgICAgICAgICAgIG9wZXJhdG9yczogW1J1bGVPcGVyYXRvclR5cGUuRVFVQUxfVE8sIFJ1bGVPcGVyYXRvclR5cGUuR1JFQVRFUl9USEFOLCBSdWxlT3BlcmF0b3JUeXBlLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTywgUnVsZU9wZXJhdG9yVHlwZS5MRVNTRVJfVEhBTiwgUnVsZU9wZXJhdG9yVHlwZS5MRVNTRVJfVEhBTl9PUl9FUVVBTF9UTywgUnVsZU9wZXJhdG9yVHlwZS5OT1RfRVFVQUxfVE9dLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLk5VTUJFUlxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVSdWxlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZU9wZXJhdG9yVHlwZS5CRVRXRUVOLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLk5VTUJFUlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuU0VMRUNUOlxuICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlU2VsZWN0KHtcbiAgICAgICAgICBjaG9pY2VzOiBhdHRyaWJ1dGUuY2hvaWNlcyxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNDdXN0b20pIHtcbiAgICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlVGV4dCh7XG4gICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZU9wZXJhdG9yVHlwZS5MSUtFLFxuICAgICAgICAgICAgb3BlcmF0b3JzOiBbUnVsZU9wZXJhdG9yVHlwZS5MSUtFLCBSdWxlT3BlcmF0b3JUeXBlLkVRVUFMX1RPLCBSdWxlT3BlcmF0b3JUeXBlLk5PVF9FUVVBTF9UT10sXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWU6IGF0dHJpYnV0ZS5uYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcnVsZSA9IG5ldyBuZ2VvUnVsZVRleHQoe1xuICAgICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgb3BlcmF0b3I6IFJ1bGVPcGVyYXRvclR5cGUuTElLRSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBydWxlO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVSdWxlcyA9IGZ1bmN0aW9uIGNyZWF0ZVJ1bGVzKG9wdGlvbnNMaXN0KSB7XG4gICAgdmFyIHJ1bGVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvcHRpb25zTGlzdCksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IF9zdGVwMi52YWx1ZTtcbiAgICAgIHJ1bGVzLnB1c2godGhpcy5jcmVhdGVSdWxlKG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnVsZXM7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZVJ1bGUgPSBmdW5jdGlvbiBjcmVhdGVSdWxlKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5leHByZXNzaW9uKSB7XG4gICAgICBvcHRpb25zLmxpdGVyYWwgPSBvcHRpb25zLmV4cHJlc3Npb247XG4gICAgfVxuXG4gICAgdmFyIHJ1bGU7XG5cbiAgICBzd2l0Y2ggKG9wdGlvbnMudHlwZSkge1xuICAgICAgY2FzZSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5EQVRFOlxuICAgICAgY2FzZSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5EQVRFVElNRTpcbiAgICAgICAgcnVsZSA9IG5ldyBuZ2VvUnVsZURhdGUob3B0aW9ucyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkdFT01FVFJZOlxuICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlR2VvbWV0cnkob3B0aW9ucyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlNFTEVDVDpcbiAgICAgICAgaWYgKG9wdGlvbnMuZXhwcmVzc2lvbikge1xuICAgICAgICAgIHZhciBleHByZXNzaW9uID0gb3B0aW9ucy5leHByZXNzaW9uO1xuICAgICAgICAgIG9wdGlvbnMubGl0ZXJhbCA9IGV4cHJlc3Npb24uc3BsaXQoJywnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxlY3RPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgY29uc29sZS5hc3NlcnQoc2VsZWN0T3B0aW9ucy5jaG9pY2VzKTtcbiAgICAgICAgcnVsZSA9IG5ldyBuZ2VvUnVsZVNlbGVjdChzZWxlY3RPcHRpb25zKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVUZXh0KG9wdGlvbnMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gcnVsZTtcbiAgfTtcblxuICBfcHJvdG8uY2xvbmVSdWxlID0gZnVuY3Rpb24gY2xvbmVSdWxlKHJ1bGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIGlzQ3VzdG9tOiBydWxlLmlzQ3VzdG9tLFxuICAgICAgbmFtZTogcnVsZS5uYW1lLFxuICAgICAgcHJvcGVydHlOYW1lOiBydWxlLnByb3BlcnR5TmFtZSxcbiAgICAgIHR5cGU6IHJ1bGUudHlwZVxuICAgIH07XG4gICAgdmFyIGxpdGVyYWwgPSBydWxlLmxpdGVyYWw7XG5cbiAgICBpZiAobGl0ZXJhbCAhPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5saXRlcmFsID0gbGl0ZXJhbDtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5sb3dlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICBvcHRpb25zLmxvd2VyQm91bmRhcnkgPSBydWxlLmxvd2VyQm91bmRhcnk7XG4gICAgfVxuXG4gICAgaWYgKHJ1bGUub3BlcmF0b3IpIHtcbiAgICAgIG9wdGlvbnMub3BlcmF0b3IgPSBydWxlLm9wZXJhdG9yO1xuICAgIH1cblxuICAgIGlmIChydWxlLm9wZXJhdG9ycykge1xuICAgICAgb3B0aW9ucy5vcGVyYXRvcnMgPSBydWxlLm9wZXJhdG9ycy5zbGljZSgwKTtcbiAgICB9XG5cbiAgICBpZiAocnVsZS51cHBlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICBvcHRpb25zLnVwcGVyQm91bmRhcnkgPSBydWxlLnVwcGVyQm91bmRhcnk7XG4gICAgfVxuXG4gICAgdmFyIGNsb25lO1xuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZURhdGUpIHtcbiAgICAgIGNsb25lID0gbmV3IG5nZW9SdWxlRGF0ZShvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZUdlb21ldHJ5KSB7XG4gICAgICBjbG9uZSA9IG5ldyBuZ2VvUnVsZUdlb21ldHJ5KG9wdGlvbnMpO1xuICAgICAgY2xvbmUuZmVhdHVyZS5zZXRQcm9wZXJ0aWVzKHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzKHJ1bGUuZmVhdHVyZSkpO1xuICAgIH0gZWxzZSBpZiAocnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlU2VsZWN0KSB7XG4gICAgICB2YXIgb3B0ID0gb3B0aW9ucztcbiAgICAgIG9wdC5jaG9pY2VzID0gcnVsZS5jaG9pY2VzLnNsaWNlKDApO1xuICAgICAgY2xvbmUgPSBuZXcgbmdlb1J1bGVTZWxlY3Qob3B0KTtcbiAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZVRleHQpIHtcbiAgICAgIHZhciBfb3B0ID0gb3B0aW9ucztcbiAgICAgIGNsb25lID0gbmV3IG5nZW9SdWxlVGV4dChfb3B0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xvbmUgPSBuZXcgbmdlb1J1bGVSdWxlKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZTtcbiAgfTtcblxuICBfcHJvdG8uZXh0ZW5kUnVsZSA9IGZ1bmN0aW9uIGV4dGVuZFJ1bGUoc291cmNlUnVsZSwgZGVzdFJ1bGUpIHtcbiAgICBpZiAoZGVzdFJ1bGUubGl0ZXJhbCAhPT0gc291cmNlUnVsZS5saXRlcmFsKSB7XG4gICAgICBkZXN0UnVsZS5saXRlcmFsID0gc291cmNlUnVsZS5saXRlcmFsO1xuICAgIH1cblxuICAgIGlmIChkZXN0UnVsZS5sb3dlckJvdW5kYXJ5ICE9PSBzb3VyY2VSdWxlLmxvd2VyQm91bmRhcnkpIHtcbiAgICAgIGRlc3RSdWxlLmxvd2VyQm91bmRhcnkgPSBzb3VyY2VSdWxlLmxvd2VyQm91bmRhcnk7XG4gICAgfVxuXG4gICAgaWYgKGRlc3RSdWxlLm9wZXJhdG9yICE9PSBzb3VyY2VSdWxlLm9wZXJhdG9yKSB7XG4gICAgICBkZXN0UnVsZS5vcGVyYXRvciA9IHNvdXJjZVJ1bGUub3BlcmF0b3I7XG4gICAgfVxuXG4gICAgaWYgKGRlc3RSdWxlLnVwcGVyQm91bmRhcnkgIT09IHNvdXJjZVJ1bGUudXBwZXJCb3VuZGFyeSkge1xuICAgICAgZGVzdFJ1bGUudXBwZXJCb3VuZGFyeSA9IHNvdXJjZVJ1bGUudXBwZXJCb3VuZGFyeTtcbiAgICB9XG5cbiAgICBpZiAoc291cmNlUnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkgJiYgZGVzdFJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZUdlb21ldHJ5KSB7XG4gICAgICB0aGlzLm5nZW9GZWF0dXJlSGVscGVyXy5jbGVhck5vblNwYXRpYWxQcm9wZXJ0aWVzKGRlc3RSdWxlLmZlYXR1cmUpO1xuICAgICAgZGVzdFJ1bGUuZmVhdHVyZS5zZXRQcm9wZXJ0aWVzKHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzKHNvdXJjZVJ1bGUuZmVhdHVyZSkpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2VyaWFsaXplUnVsZXMgPSBmdW5jdGlvbiBzZXJpYWxpemVSdWxlcyhydWxlcykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4gcnVsZXMubWFwKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICB2YXIgc2VyaWFsaXplZFJ1bGUgPSBfdGhpcy5zZXJpYWxpemVSdWxlKHJ1bGUpO1xuXG4gICAgICByZXR1cm4gc2VyaWFsaXplZFJ1bGU7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnNlcmlhbGl6ZVJ1bGUgPSBmdW5jdGlvbiBzZXJpYWxpemVSdWxlKHJ1bGUpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgbmFtZTogcnVsZS5uYW1lLFxuICAgICAgcHJvcGVydHlOYW1lOiBydWxlLnByb3BlcnR5TmFtZSxcbiAgICAgIHR5cGU6IHJ1bGUudHlwZVxuICAgIH07XG5cbiAgICBpZiAocnVsZS5saXRlcmFsICE9PSBudWxsKSB7XG4gICAgICBvYmoubGl0ZXJhbCA9IHJ1bGUubGl0ZXJhbDtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5sb3dlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICBvYmoubG93ZXJCb3VuZGFyeSA9IHJ1bGUubG93ZXJCb3VuZGFyeTtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5vcGVyYXRvciAhPT0gbnVsbCkge1xuICAgICAgb2JqLm9wZXJhdG9yID0gcnVsZS5vcGVyYXRvcjtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5vcGVyYXRvcnMgIT09IG51bGwpIHtcbiAgICAgIG9iai5vcGVyYXRvcnMgPSBydWxlLm9wZXJhdG9ycy5zbGljZSgwKTtcbiAgICB9XG5cbiAgICBpZiAocnVsZS51cHBlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICBvYmoudXBwZXJCb3VuZGFyeSA9IHJ1bGUudXBwZXJCb3VuZGFyeTtcbiAgICB9XG5cbiAgICBpZiAocnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkpIHtcbiAgICAgIHZhciBvcHQgPSBvYmo7XG4gICAgICBvcHQuZmVhdHVyZVByb3BlcnRpZXMgPSB0aGlzLm5nZW9GZWF0dXJlSGVscGVyXy5nZXROb25TcGF0aWFsUHJvcGVydGllcyhydWxlLmZlYXR1cmUpO1xuICAgIH1cblxuICAgIGlmIChydWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVTZWxlY3QpIHtcbiAgICAgIHZhciBfb3B0MiA9IG9iajtcbiAgICAgIF9vcHQyLmNob2ljZXMgPSBydWxlLmNob2ljZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlRmlsdGVyID0gZnVuY3Rpb24gY3JlYXRlRmlsdGVyKG9wdGlvbnMpIHtcbiAgICB2YXIgZGF0YVNvdXJjZSA9IG9wdGlvbnMuZGF0YVNvdXJjZTtcbiAgICB2YXIgbWFpbkZpbHRlciA9IG51bGw7XG5cbiAgICBpZiAob3B0aW9ucy5maWx0ZXIpIHtcbiAgICAgIG1haW5GaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJ1bGVzID0gb3B0aW9ucy5maWx0ZXJSdWxlcyB8fCBkYXRhU291cmNlLmZpbHRlclJ1bGVzO1xuICAgICAgdmFyIGNvbmRpdGlvbnMgPSBbXTtcblxuICAgICAgaWYgKHJ1bGVzICYmIHJ1bGVzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShydWxlcyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIHJ1bGUgPSBfc3RlcDMudmFsdWU7XG4gICAgICAgICAgdmFyIGZpbHRlciA9IHRoaXMuY3JlYXRlRmlsdGVyRnJvbVJ1bGVfKHJ1bGUsIGRhdGFTb3VyY2UsIG9wdGlvbnMuc3JzTmFtZSk7XG5cbiAgICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgICBjb25kaXRpb25zLnB1c2goZmlsdGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNvbmRpdGlvbiA9IGRhdGFTb3VyY2UuZmlsdGVyQ29uZGl0aW9uO1xuXG4gICAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgbWFpbkZpbHRlciA9IGNvbmRpdGlvbnNbMF07XG4gICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgaWYgKGNvbmRpdGlvbiA9PT0gbmdlb0ZpbHRlckNvbmRpdGlvbi5BTkQpIHtcbiAgICAgICAgICBtYWluRmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuYW5kLmFwcGx5KG51bGwsIGNvbmRpdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbiA9PT0gbmdlb0ZpbHRlckNvbmRpdGlvbi5PUiB8fCBjb25kaXRpb24gPT09IG5nZW9GaWx0ZXJDb25kaXRpb24uTk9UKSB7XG4gICAgICAgICAgbWFpbkZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLm9yLmFwcGx5KG51bGwsIGNvbmRpdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtYWluRmlsdGVyICYmIGNvbmRpdGlvbiA9PT0gbmdlb0ZpbHRlckNvbmRpdGlvbi5OT1QpIHtcbiAgICAgICAgbWFpbkZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLm5vdChtYWluRmlsdGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5pbmNUaW1lKSB7XG4gICAgICB2YXIgdGltZUZpbHRlciA9IHRoaXMuY3JlYXRlVGltZUZpbHRlckZyb21EYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICAgIG1haW5GaWx0ZXIgPSB0aGlzLmpvaW5GaWx0ZXJzKG1haW5GaWx0ZXIsIHRpbWVGaWx0ZXIpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmluY0RpbWVuc2lvbnMpIHtcbiAgICAgIHZhciBkaW1lbnNpb25zRmlsdGVyID0gdGhpcy5jcmVhdGVEaW1lbnNpb25zRmlsdGVyRnJvbURhdGFTb3VyY2VfKGRhdGFTb3VyY2UpO1xuICAgICAgbWFpbkZpbHRlciA9IHRoaXMuam9pbkZpbHRlcnMobWFpbkZpbHRlciwgZGltZW5zaW9uc0ZpbHRlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1haW5GaWx0ZXI7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZUZpbHRlclN0cmluZyA9IGZ1bmN0aW9uIGNyZWF0ZUZpbHRlclN0cmluZyhvcHRpb25zKSB7XG4gICAgdmFyIGZpbHRlclN0cmluZyA9IG51bGw7XG4gICAgdmFyIGRlZmF1bHRXRlNWZXJzaW9uID0gJzEuMS4wJztcbiAgICB2YXIgZmlsdGVyID0gdGhpcy5jcmVhdGVGaWx0ZXIob3B0aW9ucyk7XG5cbiAgICBpZiAoZmlsdGVyKSB7XG4gICAgICB2YXIgZmlsdGVyTm9kZSA9IHdyaXRlRmlsdGVyKGZpbHRlciwgZGVmYXVsdFdGU1ZlcnNpb24pO1xuICAgICAgdmFyIHhtbFNlcmlhbGl6ZXIgPSBuZXcgWE1MU2VyaWFsaXplcigpO1xuICAgICAgZmlsdGVyU3RyaW5nID0geG1sU2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyhmaWx0ZXJOb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyU3RyaW5nO1xuICB9O1xuXG4gIF9wcm90by5qb2luRmlsdGVycyA9IGZ1bmN0aW9uIGpvaW5GaWx0ZXJzKGZpbHRlckEsIGZpbHRlckIpIHtcbiAgICB2YXIgZmlsdGVyID0gbnVsbDtcblxuICAgIGlmIChmaWx0ZXJBICYmIGZpbHRlckIpIHtcbiAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmFuZC5hcHBseShudWxsLCBbZmlsdGVyQSwgZmlsdGVyQl0pO1xuICAgIH0gZWxzZSBpZiAoZmlsdGVyQSkge1xuICAgICAgZmlsdGVyID0gZmlsdGVyQTtcbiAgICB9IGVsc2UgaWYgKGZpbHRlckIpIHtcbiAgICAgIGZpbHRlciA9IGZpbHRlckI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcjtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlRmlsdGVyRnJvbVJ1bGVfID0gZnVuY3Rpb24gY3JlYXRlRmlsdGVyRnJvbVJ1bGVfKHJ1bGUsIGRhdGFTb3VyY2UsIG9wdF9zcnNOYW1lKSB7XG4gICAgdmFyIGZpbHRlciA9IG51bGw7XG4gICAgdmFyIHZhbHVlID0gcnVsZS52YWx1ZTtcblxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaXRlcmFsID0gdmFsdWUubGl0ZXJhbDtcbiAgICB2YXIgbG93ZXJCb3VuZGFyeSA9IHZhbHVlLmxvd2VyQm91bmRhcnk7XG4gICAgdmFyIG9wZXJhdG9yID0gdmFsdWUub3BlcmF0b3I7XG4gICAgdmFyIHByb3BlcnR5TmFtZSA9IHZhbHVlLnByb3BlcnR5TmFtZTtcbiAgICB2YXIgdXBwZXJCb3VuZGFyeSA9IHZhbHVlLnVwcGVyQm91bmRhcnk7XG4gICAgdmFyIHJvdCA9IFJ1bGVPcGVyYXRvclR5cGU7XG4gICAgdmFyIHJzb3QgPSBSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZTtcbiAgICB2YXIgcnRvdCA9IFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZTtcbiAgICB2YXIgc3BhdGlhbFR5cGVzID0gW3Jzb3QuQ09OVEFJTlMsIHJzb3QuSU5URVJTRUNUUywgcnNvdC5XSVRISU5dO1xuICAgIHZhciBudW1lcmljVHlwZXMgPSBbcm90LkdSRUFURVJfVEhBTiwgcm90LkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTywgcm90LkxFU1NFUl9USEFOLCByb3QuTEVTU0VSX1RIQU5fT1JfRVFVQUxfVE9dO1xuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZURhdGUpIHtcbiAgICAgIHZhciBiZWdpblZhbHVlO1xuICAgICAgdmFyIGVuZFZhbHVlO1xuXG4gICAgICBpZiAob3BlcmF0b3IgPT09IHJ0b3QuRFVSSU5HKSB7XG4gICAgICAgIGJlZ2luVmFsdWUgPSBtb21lbnQobG93ZXJCb3VuZGFyeSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgIGVuZFZhbHVlID0gbW9tZW50KHVwcGVyQm91bmRhcnkpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcnRvdC5FUVVBTFMpIHtcbiAgICAgICAgYmVnaW5WYWx1ZSA9IG1vbWVudChsaXRlcmFsKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgZW5kVmFsdWUgPSBiZWdpblZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcnRvdC5CRUdJTlMpIHtcbiAgICAgICAgYmVnaW5WYWx1ZSA9IG1vbWVudChsaXRlcmFsKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgZW5kVmFsdWUgPSBtb21lbnQobGl0ZXJhbCkuYWRkKDMwLCAneWVhcnMnKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJ0b3QuRU5EUykge1xuICAgICAgICBiZWdpblZhbHVlID0gJzE5NzAtMDEtMDEnO1xuICAgICAgICBlbmRWYWx1ZSA9IG1vbWVudChsaXRlcmFsKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJlZ2luVmFsdWUgJiYgZW5kVmFsdWUpIHtcbiAgICAgICAgaWYgKGRhdGFTb3VyY2Uub2djU2VydmVyVHlwZSA9PSAncWdpc3NlcnZlcicpIHtcbiAgICAgICAgICBmaWx0ZXIgPSBuZ2VvRm9ybWF0RmlsdGVyLmRhdGVCZXR3ZWVuKHByb3BlcnR5TmFtZSwgYmVnaW5WYWx1ZSwgZW5kVmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmR1cmluZyhwcm9wZXJ0eU5hbWUsIGJlZ2luVmFsdWUsIGVuZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlU2VsZWN0KSB7XG4gICAgICB2YXIgc2VsZWN0ZWRDaG9pY2VzID0gcnVsZS5zZWxlY3RlZENob2ljZXM7XG5cbiAgICAgIGlmIChzZWxlY3RlZENob2ljZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmVxdWFsVG8ocHJvcGVydHlOYW1lLCBzZWxlY3RlZENob2ljZXNbMF0pO1xuICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZENob2ljZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdmFyIGNvbmRpdGlvbnMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShzZWxlY3RlZENob2ljZXMpLCBfc3RlcDQ7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNCgpKS5kb25lOykge1xuICAgICAgICAgIHZhciBzZWxlY3RlZENob2ljZSA9IF9zdGVwNC52YWx1ZTtcbiAgICAgICAgICBjb25kaXRpb25zLnB1c2gob2xGb3JtYXRGaWx0ZXIuZXF1YWxUbyhwcm9wZXJ0eU5hbWUsIHNlbGVjdGVkQ2hvaWNlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5vci5hcHBseShudWxsLCBjb25kaXRpb25zKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNwYXRpYWxUeXBlcy5pbmNsdWRlcyhvcGVyYXRvcikpIHtcbiAgICAgIHZhciBmZWF0dXJlTmFtZXMgPSBkYXRhU291cmNlLmdldEZpbHRyYWJsZVdGU0xheWVyTmFtZSgpO1xuICAgICAgdmFyIGdlb21ldHJ5TmFtZSA9IGRhdGFTb3VyY2UuZ2VvbWV0cnlOYW1lKGZlYXR1cmVOYW1lcyA/IGZlYXR1cmVOYW1lc1swXSA6IG51bGwpO1xuXG4gICAgICBpZiAocnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gcnVsZS5nZW9tZXRyeTtcblxuICAgICAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2VvbWV0cnlOYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5TmFtZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSByc290LkNPTlRBSU5TKSB7XG4gICAgICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuY29udGFpbnMoZ2VvbWV0cnlOYW1lLCBnZW9tZXRyeSwgb3B0X3Nyc05hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByc290LklOVEVSU0VDVFMpIHtcbiAgICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5pbnRlcnNlY3RzKGdlb21ldHJ5TmFtZSwgZ2VvbWV0cnksIG9wdF9zcnNOYW1lKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcnNvdC5XSVRISU4pIHtcbiAgICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci53aXRoaW4oZ2VvbWV0cnlOYW1lLCBnZW9tZXRyeSwgb3B0X3Nyc05hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChudW1lcmljVHlwZXMuaW5jbHVkZXMob3BlcmF0b3IpKSB7XG4gICAgICBpZiAodHlwZW9mIGxpdGVyYWwgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgbGl0ZXJhbCB0eXBlJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcGVyYXRvciA9PT0gcm90LkdSRUFURVJfVEhBTikge1xuICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5ncmVhdGVyVGhhbihwcm9wZXJ0eU5hbWUsIGxpdGVyYWwpO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcm90LkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTykge1xuICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5ncmVhdGVyVGhhbk9yRXF1YWxUbyhwcm9wZXJ0eU5hbWUsIGxpdGVyYWwpO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcm90LkxFU1NFUl9USEFOKSB7XG4gICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmxlc3NUaGFuKHByb3BlcnR5TmFtZSwgbGl0ZXJhbCk7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByb3QuTEVTU0VSX1RIQU5fT1JfRVFVQUxfVE8pIHtcbiAgICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIubGVzc1RoYW5PckVxdWFsVG8ocHJvcGVydHlOYW1lLCBsaXRlcmFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByb3QuQkVUV0VFTikge1xuICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuYmV0d2Vlbihwcm9wZXJ0eU5hbWUsIGxvd2VyQm91bmRhcnksIHVwcGVyQm91bmRhcnkpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJvdC5FUVVBTF9UTykge1xuICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuZXF1YWxUbyhwcm9wZXJ0eU5hbWUsIGxpdGVyYWwpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJvdC5MSUtFKSB7XG4gICAgICB2YXIgc3RyaW5nTGl0ZXJhbCA9IFN0cmluZyhsaXRlcmFsKS5yZXBsYWNlKC8hL2csICchIScpLnJlcGxhY2UoL1xcLi9nLCAnIS4nKS5yZXBsYWNlKC9cXCovZywgJyEqJyk7XG4gICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5saWtlKHByb3BlcnR5TmFtZSwgXCIqXCIgKyBzdHJpbmdMaXRlcmFsICsgXCIqXCIsICcqJywgJy4nLCAnIScsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByb3QuTk9UX0VRVUFMX1RPKSB7XG4gICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5ub3RFcXVhbFRvKHByb3BlcnR5TmFtZSwgbGl0ZXJhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcjtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlRGltZW5zaW9uc0ZpbHRlckZyb21EYXRhU291cmNlXyA9IGZ1bmN0aW9uIGNyZWF0ZURpbWVuc2lvbnNGaWx0ZXJGcm9tRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSkge1xuICAgIHZhciBjb25maWcgPSBkYXRhU291cmNlLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnIHx8IHt9O1xuICAgIHZhciBkaW1lbnNpb25zID0gZGF0YVNvdXJjZS5kaW1lbnNpb25zO1xuICAgIHZhciBjb25kaXRpb25zID0gW107XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gY29uZmlnKSB7XG4gICAgICB2YXIgdmFsdWUgPSBjb25maWdba2V5XS52YWx1ZTtcblxuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHZhciBkaW1lbnNpb25WYWx1ZSA9IGRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgICBpZiAoZGltZW5zaW9uVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBkaW1lbnNpb25WYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlID0gZGltZW5zaW9uVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChvbEZvcm1hdEZpbHRlci5lcXVhbFRvKGNvbmZpZ1trZXldLmZpZWxkLCB2YWx1ZSwgdHJ1ZSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGNvbmRpdGlvbnNbMF07XG4gICAgfSBlbHNlIGlmIChjb25kaXRpb25zLmxlbmd0aCA+PSAyKSB7XG4gICAgICByZXR1cm4gb2xGb3JtYXRGaWx0ZXIuYW5kLmFwcGx5KG51bGwsIGNvbmRpdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVUaW1lRmlsdGVyRnJvbURhdGFTb3VyY2VfID0gZnVuY3Rpb24gY3JlYXRlVGltZUZpbHRlckZyb21EYXRhU291cmNlXyhkYXRhU291cmNlKSB7XG4gICAgdmFyIGZpbHRlciA9IG51bGw7XG4gICAgdmFyIHJhbmdlID0gZGF0YVNvdXJjZS50aW1lUmFuZ2VWYWx1ZTtcbiAgICB2YXIgdGltZVByb3BlcnR5ID0gZGF0YVNvdXJjZS50aW1lUHJvcGVydHk7XG4gICAgdmFyIG5hbWUgPSBkYXRhU291cmNlLnRpbWVBdHRyaWJ1dGVOYW1lO1xuXG4gICAgaWYgKHJhbmdlICYmIHRpbWVQcm9wZXJ0eSAmJiBuYW1lKSB7XG4gICAgICBpZiAocmFuZ2UuZW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMubmdlb1dNU1RpbWVfLmZvcm1hdFdNU1RpbWVQYXJhbSh0aW1lUHJvcGVydHksIHJhbmdlKS5zcGxpdCgnLycpO1xuICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5kdXJpbmcobmFtZSwgdmFsdWVzWzBdLCB2YWx1ZXNbMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aW1lUHJvcGVydHkucmVzb2x1dGlvbiB8fCAnc2Vjb25kcyc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMubmdlb1dNU1RpbWVfLmZvcm1hdFdNU1RpbWVQYXJhbSh0aW1lUHJvcGVydHksIHJhbmdlKTtcbiAgICAgICAgdmFyIG1vbWVudEVuZDtcblxuICAgICAgICBzd2l0Y2ggKHJlc29sdXRpb24pIHtcbiAgICAgICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgICAgIG1vbWVudEVuZCA9IG1vbWVudCh2YWx1ZSkuYWRkKDEsICd5ZWFycycpLnN1YnRyYWN0KDEsICdzZWNvbmRzJyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgIG1vbWVudEVuZCA9IG1vbWVudCh2YWx1ZSkuYWRkKDEsICdtb250aHMnKS5zdWJ0cmFjdCgxLCAnc2Vjb25kcycpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgICAgbW9tZW50RW5kID0gbW9tZW50KHZhbHVlKS5hZGQoMSwgJ2RheXMnKS5zdWJ0cmFjdCgxLCAnc2Vjb25kcycpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vbWVudEVuZCkge1xuICAgICAgICAgIHZhciBzdGFydFZhbHVlID0gbW9tZW50KHZhbHVlKS51dGMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTtcbiAgICAgICAgICB2YXIgZW5kVmFsdWUgPSBtb21lbnRFbmQudXRjKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyk7XG4gICAgICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuZHVyaW5nKG5hbWUsIHN0YXJ0VmFsdWUsIGVuZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXI7XG4gIH07XG5cbiAgcmV0dXJuIFJ1bGVIZWxwZXI7XG59KCk7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1J1bGVIZWxwZXInLCBbbmdlb01pc2NGZWF0dXJlSGVscGVyLm5hbWUsIG5nZW9NaXNjV01TVGltZS5uYW1lXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvUnVsZUhlbHBlcicsIFJ1bGVIZWxwZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCB7IGluY2x1ZGVzIGFzIG9sQXJyYXlJbmNsdWRlcyB9IGZyb20gJ29sL2FycmF5LmpzJztcbmltcG9ydCBvbEZvcm1hdEdlb0pTT04gZnJvbSAnb2wvZm9ybWF0L0dlb0pTT04uanMnO1xudmFyIGxheWVySWRlbnRpZmllciA9ICdsYXllck5hbWUnO1xuXG52YXIgQXJjR0lTR2VvSlNPTiA9IGZ1bmN0aW9uIChfb2xGb3JtYXRHZW9KU09OKSB7XG4gIF9pbmhlcml0c0xvb3NlKEFyY0dJU0dlb0pTT04sIF9vbEZvcm1hdEdlb0pTT04pO1xuXG4gIGZ1bmN0aW9uIEFyY0dJU0dlb0pTT04ob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICBfdGhpcyA9IF9vbEZvcm1hdEdlb0pTT04uY2FsbCh0aGlzLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5sYXllcnNfID0gb3B0aW9ucy5sYXllcnMgPyBvcHRpb25zLmxheWVycyA6IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEFyY0dJU0dlb0pTT04ucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRMYXllcnMgPSBmdW5jdGlvbiBnZXRMYXllcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5ZXJzXztcbiAgfTtcblxuICBfcHJvdG8uc2V0TGF5ZXJzID0gZnVuY3Rpb24gc2V0TGF5ZXJzKGxheWVycykge1xuICAgIHRoaXMubGF5ZXJzXyA9IGxheWVycztcbiAgfTtcblxuICBfcHJvdG8ucmVhZEZlYXR1cmVzRnJvbU9iamVjdCA9IGZ1bmN0aW9uIHJlYWRGZWF0dXJlc0Zyb21PYmplY3Qob2JqZWN0LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBnZW9KU09OT2JqZWN0ID0gb2JqZWN0O1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIHZhciBnZW9KU09ORmVhdHVyZXMgPSBudWxsO1xuXG4gICAgaWYgKGdlb0pTT05PYmplY3QudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgdmFyIGdlb0pTT05GZWF0dXJlQ29sbGVjdGlvbiA9IG9iamVjdDtcbiAgICAgIGdlb0pTT05GZWF0dXJlcyA9IGdlb0pTT05GZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VvSlNPTkZlYXR1cmVzID0gW29iamVjdF07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZ2VvSlNPTkZlYXR1cmVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBmZWF0dXJlID0gZ2VvSlNPTkZlYXR1cmVzW2ldO1xuICAgICAgdmFyIGxheWVyTmFtZSA9IGZlYXR1cmVbbGF5ZXJJZGVudGlmaWVyXTtcblxuICAgICAgaWYgKHRoaXMubGF5ZXJzXyAmJiAhb2xBcnJheUluY2x1ZGVzKHRoaXMubGF5ZXJzXywgbGF5ZXJOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZmVhdHVyZXMucHVzaCh0aGlzLnJlYWRGZWF0dXJlRnJvbU9iamVjdChnZW9KU09ORmVhdHVyZXNbaV0sIG9wdF9vcHRpb25zKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9O1xuXG4gIHJldHVybiBBcmNHSVNHZW9KU09OO1xufShvbEZvcm1hdEdlb0pTT04pO1xuXG5leHBvcnQgZGVmYXVsdCBBcmNHSVNHZW9KU09OOyIsImltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBzZXRHZW9tZXRyeVR5cGUoYXR0cmlidXRlLCB0eXBlKSB7XG4gIHZhciBnZW9tUmVnZXggPSAvZ21sOigoTXVsdGkpPyhQb2ludHxMaW5lfFBvbHlnb258Q3VydmV8U3VyZmFjZXxHZW9tZXRyeSkpLiovO1xuXG4gIGlmIChnZW9tUmVnZXguZXhlYyh0eXBlKSkge1xuICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuR0VPTUVUUlk7XG5cbiAgICBpZiAoL15nbWw6UG9pbnQvLmV4ZWModHlwZSkpIHtcbiAgICAgIGF0dHJpYnV0ZS5nZW9tVHlwZSA9ICdQb2ludCc7XG4gICAgfSBlbHNlIGlmICgvXmdtbDpMaW5lU3RyaW5nfF5nbWw6Q3VydmUvLmV4ZWModHlwZSkpIHtcbiAgICAgIGF0dHJpYnV0ZS5nZW9tVHlwZSA9ICdMaW5lU3RyaW5nJztcbiAgICB9IGVsc2UgaWYgKC9eZ21sOlBvbHlnb258XmdtbDpTdXJmYWNlLy5leGVjKHR5cGUpKSB7XG4gICAgICBhdHRyaWJ1dGUuZ2VvbVR5cGUgPSAnUG9seWdvbic7XG4gICAgfSBlbHNlIGlmICgvXmdtbDpNdWx0aVBvaW50Ly5leGVjKHR5cGUpKSB7XG4gICAgICBhdHRyaWJ1dGUuZ2VvbVR5cGUgPSAnTXVsdGlQb2ludCc7XG4gICAgfSBlbHNlIGlmICgvXmdtbDpNdWx0aUxpbmVTdHJpbmd8XmdtbDpNdWx0aUN1cnZlLy5leGVjKHR5cGUpKSB7XG4gICAgICBhdHRyaWJ1dGUuZ2VvbVR5cGUgPSAnTXVsdGlMaW5lU3RyaW5nJztcbiAgICB9IGVsc2UgaWYgKC9eZ21sOk11bHRpUG9seWdvbnxeZ21sOk11bHRpU3VyZmFjZS8uZXhlYyh0eXBlKSkge1xuICAgICAgYXR0cmlidXRlLmdlb21UeXBlID0gJ011bHRpUG9seWdvbic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICEhYXR0cmlidXRlLnR5cGUgJiYgISFhdHRyaWJ1dGUuZ2VvbVR5cGU7XG59XG5leHBvcnQgZGVmYXVsdCBudWxsOyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQk9PTEVBTjogJ2Jvb2xlYW4nLFxuICBEQVRFOiAnZGF0ZScsXG4gIERBVEVUSU1FOiAnZGF0ZXRpbWUnLFxuICBUSU1FOiAndGltZScsXG4gIEdFT01FVFJZOiAnZ2VvbWV0cnknLFxuICBOVU1CRVI6ICdudW1iZXInLFxuICBTRUxFQ1Q6ICdzZWxlY3QnLFxuICBURVhUOiAndGV4dCdcbn07IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcyBmcm9tICduZ2VvL2Zvcm1hdC9GZWF0dXJlUHJvcGVydGllcy5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEZlYXR1cmVIYXNoU3R5bGVUeXBlIGZyb20gJ25nZW8vZm9ybWF0L0ZlYXR1cmVIYXNoU3R5bGVUeXBlLmpzJztcbmltcG9ydCB7IHJnYkFycmF5VG9IZXggfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCB7IGFzQXJyYXkgYXMgYXNDb2xvckFycmF5IH0gZnJvbSAnb2wvY29sb3IuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybUdlb21ldHJ5V2l0aE9wdGlvbnMgfSBmcm9tICdvbC9mb3JtYXQvRmVhdHVyZS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRUZXh0RmVhdHVyZSBmcm9tICdvbC9mb3JtYXQvVGV4dEZlYXR1cmUuanMnO1xuaW1wb3J0IG9sR2VvbUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21NdWx0aUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanMnO1xuaW1wb3J0IG9sR2VvbU11bHRpUG9pbnQgZnJvbSAnb2wvZ2VvbS9NdWx0aVBvaW50LmpzJztcbmltcG9ydCBvbEdlb21NdWx0aVBvbHlnb24gZnJvbSAnb2wvZ2VvbS9NdWx0aVBvbHlnb24uanMnO1xuaW1wb3J0IG9sR2VvbVBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQuanMnO1xuaW1wb3J0IG9sR2VvbVBvbHlnb24gZnJvbSAnb2wvZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCBvbFN0eWxlQ2lyY2xlIGZyb20gJ29sL3N0eWxlL0NpcmNsZS5qcyc7XG5pbXBvcnQgb2xTdHlsZUZpbGwgZnJvbSAnb2wvc3R5bGUvRmlsbC5qcyc7XG5pbXBvcnQgb2xTdHlsZVN0cm9rZSBmcm9tICdvbC9zdHlsZS9TdHJva2UuanMnO1xuaW1wb3J0IG9sU3R5bGVTdHlsZSBmcm9tICdvbC9zdHlsZS9TdHlsZS5qcyc7XG5pbXBvcnQgb2xTdHlsZVRleHQgZnJvbSAnb2wvc3R5bGUvVGV4dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnb2wvZ2VvbS9HZW9tZXRyeS5qcyc7XG52YXIgTGVnYWN5UHJvcGVydGllc18gPSB7fTtcbnZhciBERUZBVUxUX0FDQ1VSQUNZID0gMC4xO1xudmFyIFN0eWxlVHlwZXNfID0ge1xuICAnTGluZVN0cmluZyc6IG5nZW9Gb3JtYXRGZWF0dXJlSGFzaFN0eWxlVHlwZS5MSU5FX1NUUklORyxcbiAgJ1BvaW50Jzogbmdlb0Zvcm1hdEZlYXR1cmVIYXNoU3R5bGVUeXBlLlBPSU5ULFxuICAnUG9seWdvbic6IG5nZW9Gb3JtYXRGZWF0dXJlSGFzaFN0eWxlVHlwZS5QT0xZR09OLFxuICAnTXVsdGlMaW5lU3RyaW5nJzogbmdlb0Zvcm1hdEZlYXR1cmVIYXNoU3R5bGVUeXBlLkxJTkVfU1RSSU5HLFxuICAnTXVsdGlQb2ludCc6IG5nZW9Gb3JtYXRGZWF0dXJlSGFzaFN0eWxlVHlwZS5QT0lOVCxcbiAgJ011bHRpUG9seWdvbic6IG5nZW9Gb3JtYXRGZWF0dXJlSGFzaFN0eWxlVHlwZS5QT0xZR09OXG59O1xudmFyIENIQVI2NF8gPSAnLi1fISpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODlhYmNkZWZnaGprbW5wcXJzdHV2d3h5eic7XG52YXIgR0VPTUVUUllfUkVBREVSU18gPSB7XG4gICdQJzogcmVhZE11bHRpUG9pbnRHZW9tZXRyeV8sXG4gICdMJzogcmVhZE11bHRpTGluZVN0cmluZ0dlb21ldHJ5XyxcbiAgJ0EnOiByZWFkTXVsdGlQb2x5Z29uR2VvbWV0cnlfLFxuICAnbCc6IHJlYWRMaW5lU3RyaW5nR2VvbWV0cnlfLFxuICAncCc6IHJlYWRQb2ludEdlb21ldHJ5XyxcbiAgJ2EnOiByZWFkUG9seWdvbkdlb21ldHJ5X1xufTtcbnZhciBHRU9NRVRSWV9XUklURVJTXyA9IHtcbiAgJ011bHRpTGluZVN0cmluZyc6IHdyaXRlTXVsdGlMaW5lU3RyaW5nR2VvbWV0cnlfLFxuICAnTXVsdGlQb2ludCc6IHdyaXRlTXVsdGlQb2ludEdlb21ldHJ5XyxcbiAgJ011bHRpUG9seWdvbic6IHdyaXRlTXVsdGlQb2x5Z29uR2VvbWV0cnlfLFxuICAnTGluZVN0cmluZyc6IHdyaXRlTGluZVN0cmluZ0dlb21ldHJ5XyxcbiAgJ1BvaW50Jzogd3JpdGVQb2ludEdlb21ldHJ5XyxcbiAgJ1BvbHlnb24nOiB3cml0ZVBvbHlnb25HZW9tZXRyeV9cbn07XG5cbnZhciBGZWF0dXJlSGFzaCA9IGZ1bmN0aW9uIChfb2xGb3JtYXRUZXh0RmVhdHVyZSkge1xuICBfaW5oZXJpdHNMb29zZShGZWF0dXJlSGFzaCwgX29sRm9ybWF0VGV4dEZlYXR1cmUpO1xuXG4gIGZ1bmN0aW9uIEZlYXR1cmVIYXNoKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfb2xGb3JtYXRUZXh0RmVhdHVyZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICBfdGhpcy5hY2N1cmFjeV8gPSBvcHRpb25zLmFjY3VyYWN5IHx8IERFRkFVTFRfQUNDVVJBQ1k7XG4gICAgX3RoaXMuZW5jb2RlU3R5bGVzXyA9IG9wdGlvbnMuZW5jb2RlU3R5bGVzIHx8IHRydWU7XG4gICAgX3RoaXMucHJvcGVydGllc0Z1bmN0aW9uXyA9IG9wdGlvbnMucHJvcGVydGllcyB8fCBkZWZhdWx0UHJvcGVydGllc0Z1bmN0aW9uXztcbiAgICBfdGhpcy5zZXRTdHlsZV8gPSBvcHRpb25zLnNldFN0eWxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNldFN0eWxlIDogdHJ1ZTtcbiAgICBfdGhpcy5wcmV2WF8gPSAwO1xuICAgIF90aGlzLnByZXZZXyA9IDA7XG4gICAgTGVnYWN5UHJvcGVydGllc18gPSBvcHRpb25zLnByb3BlcnRpZXNUeXBlIHx8IHt9O1xuICAgIF90aGlzLmRlZmF1bHRWYWx1ZXNfID0gb3B0aW9ucy5kZWZhdWx0VmFsdWVzIHx8IHt9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBGZWF0dXJlSGFzaC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmRlY29kZUNvb3JkaW5hdGVzXyA9IGZ1bmN0aW9uIGRlY29kZUNvb3JkaW5hdGVzXyh0ZXh0LCBvcHRfZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgdmFyIGxlbiA9IHRleHQubGVuZ3RoO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG9wdF9mbGF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9mbGF0Q29vcmRpbmF0ZXMgOiBbXTtcbiAgICB2YXIgaSA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaW5kZXggPCBsZW4pIHtcbiAgICAgIHZhciBiID0gdm9pZCAwO1xuICAgICAgdmFyIHNoaWZ0ID0gMDtcbiAgICAgIHZhciByZXN1bHQgPSAwO1xuXG4gICAgICBkbyB7XG4gICAgICAgIGIgPSBDSEFSNjRfLmluZGV4T2YodGV4dC5jaGFyQXQoaW5kZXgrKykpO1xuICAgICAgICByZXN1bHQgfD0gKGIgJiAweDFmKSA8PCBzaGlmdDtcbiAgICAgICAgc2hpZnQgKz0gNTtcbiAgICAgIH0gd2hpbGUgKGIgPj0gMzIpO1xuXG4gICAgICB2YXIgZHggPSByZXN1bHQgJiAxID8gfihyZXN1bHQgPj4gMSkgOiByZXN1bHQgPj4gMTtcbiAgICAgIHRoaXMucHJldlhfICs9IGR4O1xuICAgICAgc2hpZnQgPSAwO1xuICAgICAgcmVzdWx0ID0gMDtcblxuICAgICAgZG8ge1xuICAgICAgICBiID0gQ0hBUjY0Xy5pbmRleE9mKHRleHQuY2hhckF0KGluZGV4KyspKTtcbiAgICAgICAgcmVzdWx0IHw9IChiICYgMHgxZikgPDwgc2hpZnQ7XG4gICAgICAgIHNoaWZ0ICs9IDU7XG4gICAgICB9IHdoaWxlIChiID49IDMyKTtcblxuICAgICAgdmFyIGR5ID0gcmVzdWx0ICYgMSA/IH4ocmVzdWx0ID4+IDEpIDogcmVzdWx0ID4+IDE7XG4gICAgICB0aGlzLnByZXZZXyArPSBkeTtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tpKytdID0gdGhpcy5wcmV2WF8gKiB0aGlzLmFjY3VyYWN5XztcbiAgICAgIGZsYXRDb29yZGluYXRlc1tpKytdID0gdGhpcy5wcmV2WV8gKiB0aGlzLmFjY3VyYWN5XztcbiAgICB9XG5cbiAgICByZXR1cm4gZmxhdENvb3JkaW5hdGVzO1xuICB9O1xuXG4gIF9wcm90by5lbmNvZGVDb29yZGluYXRlc18gPSBmdW5jdGlvbiBlbmNvZGVDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCBzdHJpZGUsIG9mZnNldCwgZW5kKSB7XG4gICAgdmFyIGVuY29kZWRDb29yZGluYXRlcyA9ICcnO1xuXG4gICAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IGVuZDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgdmFyIHkgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgeCA9IE1hdGguZmxvb3IoeCAvIHRoaXMuYWNjdXJhY3lfKTtcbiAgICAgIHkgPSBNYXRoLmZsb29yKHkgLyB0aGlzLmFjY3VyYWN5Xyk7XG4gICAgICB2YXIgZHggPSB4IC0gdGhpcy5wcmV2WF87XG4gICAgICB2YXIgZHkgPSB5IC0gdGhpcy5wcmV2WV87XG4gICAgICB0aGlzLnByZXZYXyA9IHg7XG4gICAgICB0aGlzLnByZXZZXyA9IHk7XG4gICAgICBlbmNvZGVkQ29vcmRpbmF0ZXMgKz0gZW5jb2RlU2lnbmVkTnVtYmVyXyhkeCkgKyBlbmNvZGVTaWduZWROdW1iZXJfKGR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jb2RlZENvb3JkaW5hdGVzO1xuICB9O1xuXG4gIF9wcm90by5yZWFkRmVhdHVyZUZyb21UZXh0ID0gZnVuY3Rpb24gcmVhZEZlYXR1cmVGcm9tVGV4dCh0ZXh0LCBvcHRfb3B0aW9ucykge1xuICAgIGNvbnNvbGUuYXNzZXJ0KHRleHQubGVuZ3RoID4gMik7XG4gICAgY29uc29sZS5hc3NlcnQodGV4dFsxXSA9PT0gJygnKTtcbiAgICBjb25zb2xlLmFzc2VydCh0ZXh0LmVuZHNXaXRoKCcpJykpO1xuICAgIHZhciBzcGxpdEluZGV4ID0gdGV4dC5pbmRleE9mKCd+Jyk7XG4gICAgdmFyIGdlb21ldHJ5VGV4dCA9IHNwbGl0SW5kZXggPj0gMCA/IHRleHQuc3Vic3RyaW5nKDAsIHNwbGl0SW5kZXgpICsgXCIpXCIgOiB0ZXh0O1xuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMucmVhZEdlb21ldHJ5RnJvbVRleHQoZ2VvbWV0cnlUZXh0LCBvcHRfb3B0aW9ucyk7XG4gICAgdmFyIGZlYXR1cmUgPSBuZXcgb2xGZWF0dXJlKGdlb21ldHJ5KTtcblxuICAgIGlmIChzcGxpdEluZGV4ID49IDApIHtcbiAgICAgIHZhciBhdHRyaWJ1dGVzQW5kU3R5bGVzVGV4dCA9IHRleHQuc3Vic3RyaW5nKHNwbGl0SW5kZXggKyAxLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgc3BsaXRJbmRleCA9IGF0dHJpYnV0ZXNBbmRTdHlsZXNUZXh0LmluZGV4T2YoJ34nKTtcbiAgICAgIHZhciBhdHRyaWJ1dGVzVGV4dCA9IHNwbGl0SW5kZXggPj0gMCA/IGF0dHJpYnV0ZXNBbmRTdHlsZXNUZXh0LnN1YnN0cmluZygwLCBzcGxpdEluZGV4KSA6IGF0dHJpYnV0ZXNBbmRTdHlsZXNUZXh0O1xuXG4gICAgICBpZiAoYXR0cmlidXRlc1RleHQgIT0gJycpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gYXR0cmlidXRlc1RleHQuc3BsaXQoXCInXCIpO1xuXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UocGFydHMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBlbmNvZGVkUGFydCA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgIHZhciBwYXJ0ID0gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRQYXJ0KTtcbiAgICAgICAgICB2YXIga2V5VmFsID0gcGFydC5zcGxpdCgnKicpO1xuICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGtleVZhbC5sZW5ndGggPT09IDIpO1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlWYWxbMF07XG4gICAgICAgICAgdmFyIHZhbHVlID0ga2V5VmFsWzFdO1xuXG4gICAgICAgICAgaWYgKCF0aGlzLnNldFN0eWxlXyAmJiBMZWdhY3lQcm9wZXJ0aWVzX1trZXldKSB7XG4gICAgICAgICAgICBrZXkgPSBMZWdhY3lQcm9wZXJ0aWVzX1trZXldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZlYXR1cmUuc2V0KGtleSwgY2FzdFZhbHVlXyhrZXksIHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNwbGl0SW5kZXggPj0gMCkge1xuICAgICAgICB2YXIgc3R5bGVzVGV4dCA9IGF0dHJpYnV0ZXNBbmRTdHlsZXNUZXh0LnN1YnN0cmluZyhzcGxpdEluZGV4ICsgMSk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0U3R5bGVfKSB7XG4gICAgICAgICAgc2V0U3R5bGVJbkZlYXR1cmVfKHN0eWxlc1RleHQsIGZlYXR1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFN0eWxlUHJvcGVydGllc18oc3R5bGVzVGV4dCwgZmVhdHVyZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZTtcbiAgfTtcblxuICBfcHJvdG8ucmVhZEZlYXR1cmVzRnJvbVRleHQgPSBmdW5jdGlvbiByZWFkRmVhdHVyZXNGcm9tVGV4dCh0ZXh0LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgY29uc29sZS5hc3NlcnQodGV4dC5zdGFydHNXaXRoKCdGJykpO1xuICAgIHRoaXMucHJldlhfID0gMDtcbiAgICB0aGlzLnByZXZZXyA9IDA7XG4gICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDEpO1xuXG4gICAgd2hpbGUgKHRleHQubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGluZGV4ID0gdGV4dC5pbmRleE9mKCcpJyk7XG4gICAgICBjb25zb2xlLmFzc2VydChpbmRleCA+PSAwKTtcbiAgICAgIHZhciBmZWF0dXJlID0gdGhpcy5yZWFkRmVhdHVyZUZyb21UZXh0KHRleHQuc3Vic3RyaW5nKDAsIGluZGV4ICsgMSksIG9wdF9vcHRpb25zKTtcbiAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoaW5kZXggKyAxKTtcbiAgICB9XG5cbiAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gX3RoaXMyLmRlZmF1bHRWYWx1ZXNfKSB7XG4gICAgICAgIHZhciBwcm9wZXJ0eSA9IExlZ2FjeVByb3BlcnRpZXNfW2tleV07XG5cbiAgICAgICAgaWYgKGZlYXR1cmUuZ2V0KHByb3BlcnR5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZmVhdHVyZS5zZXQocHJvcGVydHksIF90aGlzMi5kZWZhdWx0VmFsdWVzX1trZXldLmNhbGwobnVsbCwgZmVhdHVyZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9O1xuXG4gIF9wcm90by5yZWFkR2VvbWV0cnlGcm9tVGV4dCA9IGZ1bmN0aW9uIHJlYWRHZW9tZXRyeUZyb21UZXh0KHRleHQsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIGdlb21ldHJ5UmVhZGVyID0gR0VPTUVUUllfUkVBREVSU19bdGV4dFswXV07XG4gICAgY29uc29sZS5hc3NlcnQoZ2VvbWV0cnlSZWFkZXIgIT09IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIGdlb21ldHJ5UmVhZGVyLmNhbGwodGhpcywgdGV4dCk7XG4gIH07XG5cbiAgX3Byb3RvLndyaXRlRmVhdHVyZVRleHQgPSBmdW5jdGlvbiB3cml0ZUZlYXR1cmVUZXh0KGZlYXR1cmUsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIGVuY29kZWRQYXJ0cyA9IFtdO1xuICAgIHZhciBlbmNvZGVkR2VvbWV0cnkgPSAnJztcbiAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgIGVuY29kZWRHZW9tZXRyeSA9IHRoaXMud3JpdGVHZW9tZXRyeVRleHQoZ2VvbWV0cnksIG9wdF9vcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAoZW5jb2RlZEdlb21ldHJ5Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGVuY29kZWRHZW9tZXRyeS5lbmRzV2l0aCgnKScpKTtcbiAgICAgIGVuY29kZWRHZW9tZXRyeSA9IGVuY29kZWRHZW9tZXRyeS5zdWJzdHJpbmcoMCwgZW5jb2RlZEdlb21ldHJ5Lmxlbmd0aCAtIDEpO1xuICAgICAgZW5jb2RlZFBhcnRzLnB1c2goZW5jb2RlZEdlb21ldHJ5KTtcbiAgICB9XG5cbiAgICB2YXIgZW5jb2RlZFByb3BlcnRpZXMgPSBbXTtcbiAgICB2YXIgcHJvcEZ1bmN0aW9uID0gdGhpcy5wcm9wZXJ0aWVzRnVuY3Rpb25fKGZlYXR1cmUpO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHByb3BGdW5jdGlvbikge1xuICAgICAgdmFyIHZhbHVlID0gcHJvcEZ1bmN0aW9uW2tleV07XG5cbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIGtleSAhPT0gZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKSkge1xuICAgICAgICBpZiAoZW5jb2RlZFByb3BlcnRpZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgZW5jb2RlZFByb3BlcnRpZXMucHVzaChcIidcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW5jb2RlZCA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkucmVwbGFjZSgvWygpJypdL2csICdfJykgKyBcIipcIiArIHZhbHVlLnRvU3RyaW5nKCkucmVwbGFjZSgvWygpJypdL2csICdfJykpO1xuICAgICAgICBlbmNvZGVkUHJvcGVydGllcy5wdXNoKGVuY29kZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbmNvZGVkUHJvcGVydGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBlbmNvZGVkUGFydHMucHVzaCgnficpO1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZW5jb2RlZFBhcnRzLCBlbmNvZGVkUHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZW5jb2RlU3R5bGVzXykge1xuICAgICAgdmFyIHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKTtcblxuICAgICAgaWYgKHN0eWxlRnVuY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgc3R5bGVzID0gc3R5bGVGdW5jdGlvbihmZWF0dXJlLCAwKTtcblxuICAgICAgICBpZiAoc3R5bGVzKSB7XG4gICAgICAgICAgdmFyIGVuY29kZWRTdHlsZXMgPSBbXTtcbiAgICAgICAgICBzdHlsZXMgPSBBcnJheS5pc0FycmF5KHN0eWxlcykgPyBzdHlsZXMgOiBbc3R5bGVzXTtcblxuICAgICAgICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZW9tZXRyeScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVuY29kZVN0eWxlc18oc3R5bGVzLCBnZW9tZXRyeS5nZXRUeXBlKCksIGVuY29kZWRTdHlsZXMpO1xuXG4gICAgICAgICAgaWYgKGVuY29kZWRTdHlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZW5jb2RlZFBhcnRzLnB1c2goJ34nKTtcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGVuY29kZWRQYXJ0cywgZW5jb2RlZFN0eWxlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZW5jb2RlZFBhcnRzLnB1c2goJyknKTtcbiAgICByZXR1cm4gZW5jb2RlZFBhcnRzLmpvaW4oJycpO1xuICB9O1xuXG4gIF9wcm90by53cml0ZUZlYXR1cmVzVGV4dCA9IGZ1bmN0aW9uIHdyaXRlRmVhdHVyZXNUZXh0KGZlYXR1cmVzLCBvcHRfb3B0aW9ucykge1xuICAgIHRoaXMucHJldlhfID0gMDtcbiAgICB0aGlzLnByZXZZXyA9IDA7XG4gICAgdmFyIHRleHRBcnJheSA9IFtdO1xuXG4gICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRleHRBcnJheS5wdXNoKCdGJyk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZlYXR1cmVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGV4dEFycmF5LnB1c2godGhpcy53cml0ZUZlYXR1cmVUZXh0KGZlYXR1cmVzW2ldLCBvcHRfb3B0aW9ucykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0ZXh0QXJyYXkuam9pbignJyk7XG4gIH07XG5cbiAgX3Byb3RvLndyaXRlR2VvbWV0cnlUZXh0ID0gZnVuY3Rpb24gd3JpdGVHZW9tZXRyeVRleHQoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIGdlb21ldHJ5V3JpdGVyID0gR0VPTUVUUllfV1JJVEVSU19bZ2VvbWV0cnkuZ2V0VHlwZSgpXTtcbiAgICBjb25zb2xlLmFzc2VydChnZW9tZXRyeVdyaXRlciAhPT0gdW5kZWZpbmVkKTtcbiAgICB2YXIgdHJhbnNmb3JtZWRHZW9tZXRyeSA9IHRyYW5zZm9ybUdlb21ldHJ5V2l0aE9wdGlvbnMoZ2VvbWV0cnksIHRydWUsIG9wdF9vcHRpb25zKTtcblxuICAgIGlmICghKHRyYW5zZm9ybWVkR2VvbWV0cnkgaW5zdGFuY2VvZiBHZW9tZXRyeSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0cmFuc2Zvcm1lZEdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgdmFyIGVuY0dlb20gPSBnZW9tZXRyeVdyaXRlci5jYWxsKHRoaXMsIHRyYW5zZm9ybWVkR2VvbWV0cnkpO1xuXG4gICAgaWYgKCFlbmNHZW9tKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZW5jb2RlZEdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuY0dlb207XG4gIH07XG5cbiAgcmV0dXJuIEZlYXR1cmVIYXNoO1xufShvbEZvcm1hdFRleHRGZWF0dXJlKTtcblxuZXhwb3J0IGRlZmF1bHQgRmVhdHVyZUhhc2g7XG5cbmZ1bmN0aW9uIGRlZmF1bHRQcm9wZXJ0aWVzRnVuY3Rpb25fKGZlYXR1cmUpIHtcbiAgcmV0dXJuIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVTaWduZWROdW1iZXJfKG51bSkge1xuICB2YXIgc2lnbmVkTnVtID0gbnVtIDw8IDE7XG5cbiAgaWYgKG51bSA8IDApIHtcbiAgICBzaWduZWROdW0gPSB+c2lnbmVkTnVtO1xuICB9XG5cbiAgcmV0dXJuIGVuY29kZU51bWJlcl8oc2lnbmVkTnVtKTtcbn1cblxuZnVuY3Rpb24gZW5jb2RlTnVtYmVyXyhudW0pIHtcbiAgdmFyIGVuY29kZWROdW1iZXIgPSAnJztcblxuICB3aGlsZSAobnVtID49IDB4MjApIHtcbiAgICBlbmNvZGVkTnVtYmVyICs9IENIQVI2NF8uY2hhckF0KDB4MjAgfCBudW0gJiAweDFmKTtcbiAgICBudW0gPj49IDU7XG4gIH1cblxuICBlbmNvZGVkTnVtYmVyICs9IENIQVI2NF8uY2hhckF0KG51bSk7XG4gIHJldHVybiBlbmNvZGVkTnVtYmVyO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVTdHlsZXNfKHN0eWxlcywgZ2VvbWV0cnlUeXBlLCBlbmNvZGVkU3R5bGVzKSB7XG4gIHZhciBzdHlsZVR5cGUgPSBTdHlsZVR5cGVzX1tnZW9tZXRyeVR5cGVdO1xuICBjb25zb2xlLmFzc2VydChzdHlsZVR5cGUgIT09IHVuZGVmaW5lZCk7XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uoc3R5bGVzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICB2YXIgc3R5bGUgPSBfc3RlcDIudmFsdWU7XG4gICAgdmFyIGZpbGxTdHlsZSA9IHN0eWxlLmdldEZpbGwoKTtcbiAgICB2YXIgaW1hZ2VTdHlsZSA9IHN0eWxlLmdldEltYWdlKCk7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gICAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcblxuICAgIGlmIChzdHlsZVR5cGUgPT0gbmdlb0Zvcm1hdEZlYXR1cmVIYXNoU3R5bGVUeXBlLlBPTFlHT04pIHtcbiAgICAgIGlmIChmaWxsU3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgZW5jb2RlU3R5bGVQb2x5Z29uXyhmaWxsU3R5bGUsIHN0cm9rZVN0eWxlLCBlbmNvZGVkU3R5bGVzKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0eWxlVHlwZSA9PSBuZ2VvRm9ybWF0RmVhdHVyZUhhc2hTdHlsZVR5cGUuTElORV9TVFJJTkcpIHtcbiAgICAgIGlmIChzdHJva2VTdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICBlbmNvZGVTdHlsZUxpbmVfKHN0cm9rZVN0eWxlLCBlbmNvZGVkU3R5bGVzKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0eWxlVHlwZSA9PSBuZ2VvRm9ybWF0RmVhdHVyZUhhc2hTdHlsZVR5cGUuUE9JTlQpIHtcbiAgICAgIGlmIChpbWFnZVN0eWxlICE9PSBudWxsKSB7XG4gICAgICAgIGVuY29kZVN0eWxlUG9pbnRfKGltYWdlU3R5bGUsIGVuY29kZWRTdHlsZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0ZXh0U3R5bGUgIT09IG51bGwpIHtcbiAgICAgIGVuY29kZVN0eWxlVGV4dF8odGV4dFN0eWxlLCBlbmNvZGVkU3R5bGVzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZW5jb2RlU3R5bGVMaW5lXyhzdHJva2VTdHlsZSwgZW5jb2RlZFN0eWxlcykge1xuICBlbmNvZGVTdHlsZVN0cm9rZV8oc3Ryb2tlU3R5bGUsIGVuY29kZWRTdHlsZXMpO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVTdHlsZVBvaW50XyhpbWFnZVN0eWxlLCBlbmNvZGVkU3R5bGVzKSB7XG4gIGlmIChpbWFnZVN0eWxlIGluc3RhbmNlb2Ygb2xTdHlsZUNpcmNsZSkge1xuICAgIHZhciByYWRpdXMgPSBpbWFnZVN0eWxlLmdldFJhZGl1cygpO1xuXG4gICAgaWYgKGVuY29kZWRTdHlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgZW5jb2RlZFN0eWxlcy5wdXNoKFwiJ1wiKTtcbiAgICB9XG5cbiAgICBlbmNvZGVkU3R5bGVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFwicG9pbnRSYWRpdXMqXCIgKyByYWRpdXMpKTtcbiAgICB2YXIgZmlsbFN0eWxlID0gaW1hZ2VTdHlsZS5nZXRGaWxsKCk7XG5cbiAgICBpZiAoZmlsbFN0eWxlICE9PSBudWxsKSB7XG4gICAgICBlbmNvZGVTdHlsZUZpbGxfKGZpbGxTdHlsZSwgZW5jb2RlZFN0eWxlcyk7XG4gICAgfVxuXG4gICAgdmFyIHN0cm9rZVN0eWxlID0gaW1hZ2VTdHlsZS5nZXRTdHJva2UoKTtcblxuICAgIGlmIChzdHJva2VTdHlsZSAhPT0gbnVsbCkge1xuICAgICAgZW5jb2RlU3R5bGVTdHJva2VfKHN0cm9rZVN0eWxlLCBlbmNvZGVkU3R5bGVzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZW5jb2RlU3R5bGVQb2x5Z29uXyhmaWxsU3R5bGUsIHN0cm9rZVN0eWxlLCBlbmNvZGVkU3R5bGVzKSB7XG4gIGVuY29kZVN0eWxlRmlsbF8oZmlsbFN0eWxlLCBlbmNvZGVkU3R5bGVzKTtcblxuICBpZiAoc3Ryb2tlU3R5bGUgIT09IG51bGwpIHtcbiAgICBlbmNvZGVTdHlsZVN0cm9rZV8oc3Ryb2tlU3R5bGUsIGVuY29kZWRTdHlsZXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuY29kZVN0eWxlRmlsbF8oZmlsbFN0eWxlLCBlbmNvZGVkU3R5bGVzLCBwcm9wZXJ0eU5hbWUpIHtcbiAgaWYgKHByb3BlcnR5TmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgcHJvcGVydHlOYW1lID0gJ2ZpbGxDb2xvcic7XG4gIH1cblxuICB2YXIgZmlsbENvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG4gIHZhciBmaWxsQ29sb3JIZXg7XG5cbiAgaWYgKGZpbGxDb2xvciAhPT0gbnVsbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZpbGxDb2xvcikpIHtcbiAgICAgIGZpbGxDb2xvckhleCA9IHJnYkFycmF5VG9IZXgoZmlsbENvbG9yKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmaWxsQ29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICBmaWxsQ29sb3JIZXggPSByZ2JBcnJheVRvSGV4KGFzQ29sb3JBcnJheShmaWxsQ29sb3IpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBjb2xvcicpO1xuICAgIH1cblxuICAgIGlmIChlbmNvZGVkU3R5bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGVuY29kZWRTdHlsZXMucHVzaChcIidcIik7XG4gICAgfVxuXG4gICAgZW5jb2RlZFN0eWxlcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwcm9wZXJ0eU5hbWUgKyBcIipcIiArIGZpbGxDb2xvckhleCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuY29kZVN0eWxlU3Ryb2tlXyhzdHJva2VTdHlsZSwgZW5jb2RlZFN0eWxlcykge1xuICB2YXIgc3Ryb2tlQ29sb3IgPSBzdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuXG4gIGlmIChzdHJva2VDb2xvciAhPT0gbnVsbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0cm9rZUNvbG9yKSkge1xuICAgICAgdmFyIHN0cm9rZUNvbG9ySGV4ID0gcmdiQXJyYXlUb0hleChzdHJva2VDb2xvcik7XG5cbiAgICAgIGlmIChlbmNvZGVkU3R5bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZW5jb2RlZFN0eWxlcy5wdXNoKFwiJ1wiKTtcbiAgICAgIH1cblxuICAgICAgZW5jb2RlZFN0eWxlcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChcInN0cm9rZUNvbG9yKlwiICsgc3Ryb2tlQ29sb3JIZXgpKTtcbiAgICB9XG4gIH1cblxuICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuXG4gIGlmIChzdHJva2VXaWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGVuY29kZWRTdHlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgZW5jb2RlZFN0eWxlcy5wdXNoKFwiJ1wiKTtcbiAgICB9XG5cbiAgICBlbmNvZGVkU3R5bGVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFwic3Ryb2tlV2lkdGgqXCIgKyBzdHJva2VXaWR0aCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuY29kZVN0eWxlVGV4dF8odGV4dFN0eWxlLCBlbmNvZGVkU3R5bGVzKSB7XG4gIHZhciBmb250U3R5bGUgPSB0ZXh0U3R5bGUuZ2V0Rm9udCgpO1xuXG4gIGlmIChmb250U3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBmb250ID0gZm9udFN0eWxlLnNwbGl0KCcgJyk7XG5cbiAgICBpZiAoZm9udC5sZW5ndGggPj0gMykge1xuICAgICAgaWYgKGVuY29kZWRTdHlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBlbmNvZGVkU3R5bGVzLnB1c2goXCInXCIpO1xuICAgICAgfVxuXG4gICAgICBlbmNvZGVkU3R5bGVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFwiZm9udFNpemUqXCIgKyBmb250WzFdKSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGZpbGxTdHlsZSA9IHRleHRTdHlsZS5nZXRGaWxsKCk7XG5cbiAgaWYgKGZpbGxTdHlsZSAhPT0gbnVsbCkge1xuICAgIGVuY29kZVN0eWxlRmlsbF8oZmlsbFN0eWxlLCBlbmNvZGVkU3R5bGVzLCAnZm9udENvbG9yJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZExpbmVTdHJpbmdHZW9tZXRyeV8odGV4dCkge1xuICBjb25zb2xlLmFzc2VydCh0ZXh0LnN0YXJ0c1dpdGgoJ2woJykpO1xuICBjb25zb2xlLmFzc2VydCh0ZXh0LmVuZHNXaXRoKCcpJykpO1xuICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMiwgdGV4dC5sZW5ndGggLSAxKTtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZGVjb2RlQ29vcmRpbmF0ZXNfKHRleHQpO1xuICByZXR1cm4gbmV3IG9sR2VvbUxpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCAnWFknKTtcbn1cblxuZnVuY3Rpb24gcmVhZE11bHRpTGluZVN0cmluZ0dlb21ldHJ5Xyh0ZXh0KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KHRleHQuc3RhcnRzV2l0aCgnTCgnKSk7XG4gIGNvbnNvbGUuYXNzZXJ0KHRleHQuZW5kc1dpdGgoJyknKSk7XG4gIHRleHQgPSB0ZXh0LnN1YnN0cmluZygyLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW107XG4gIHZhciBlbmRzID0gW107XG4gIHZhciBsaW5lU3RyaW5ncyA9IHRleHQuc3BsaXQoXCInXCIpO1xuXG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpbmVTdHJpbmdzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmRlY29kZUNvb3JkaW5hdGVzXyhsaW5lU3RyaW5nc1tpXSwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICBlbmRzW2ldID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiBuZXcgb2xHZW9tTXVsdGlMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgJ1hZJywgZW5kcyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRQb2ludEdlb21ldHJ5Xyh0ZXh0KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KHRleHQuc3RhcnRzV2l0aCgncCgnKSk7XG4gIGNvbnNvbGUuYXNzZXJ0KHRleHQuZW5kc1dpdGgoJyknKSk7XG4gIHRleHQgPSB0ZXh0LnN1YnN0cmluZygyLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5kZWNvZGVDb29yZGluYXRlc18odGV4dCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGZsYXRDb29yZGluYXRlcy5sZW5ndGggPT09IDIpO1xuICByZXR1cm4gbmV3IG9sR2VvbVBvaW50KGZsYXRDb29yZGluYXRlcywgJ1hZJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNdWx0aVBvaW50R2VvbWV0cnlfKHRleHQpIHtcbiAgY29uc29sZS5hc3NlcnQodGV4dC5zdGFydHNXaXRoKCdQKCcpKTtcbiAgY29uc29sZS5hc3NlcnQodGV4dC5lbmRzV2l0aCgnKScpKTtcbiAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDIsIHRleHQubGVuZ3RoIC0gMSk7XG4gIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmRlY29kZUNvb3JkaW5hdGVzXyh0ZXh0KTtcbiAgcmV0dXJuIG5ldyBvbEdlb21NdWx0aVBvaW50KGZsYXRDb29yZGluYXRlcywgJ1hZJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRQb2x5Z29uR2VvbWV0cnlfKHRleHQpIHtcbiAgY29uc29sZS5hc3NlcnQodGV4dC5zdGFydHNXaXRoKCdhKCcpKTtcbiAgY29uc29sZS5hc3NlcnQodGV4dC5lbmRzV2l0aCgnKScpKTtcbiAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDIsIHRleHQubGVuZ3RoIC0gMSk7XG4gIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgdmFyIGVuZHMgPSBbXTtcbiAgdmFyIHJpbmdzID0gdGV4dC5zcGxpdChcIidcIik7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmluZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZGVjb2RlQ29vcmRpbmF0ZXNfKHJpbmdzW2ldLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgIHZhciBlbmQgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoO1xuXG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbMF07XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kKytdID0gZmxhdENvb3JkaW5hdGVzWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kKytdID0gZmxhdENvb3JkaW5hdGVzW2VuZHNbaSAtIDFdXTtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbZW5kc1tpIC0gMV0gKyAxXTtcbiAgICB9XG5cbiAgICBlbmRzW2ldID0gZW5kO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBvbEdlb21Qb2x5Z29uKGZsYXRDb29yZGluYXRlcywgJ1hZJywgZW5kcyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNdWx0aVBvbHlnb25HZW9tZXRyeV8odGV4dCkge1xuICBjb25zb2xlLmFzc2VydCh0ZXh0LnN0YXJ0c1dpdGgoJ0EoJykpO1xuICBjb25zb2xlLmFzc2VydCh0ZXh0LmVuZHNXaXRoKCcpJykpO1xuICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMiwgdGV4dC5sZW5ndGggLSAxKTtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IFtdO1xuICB2YXIgZW5kc3MgPSBbXTtcbiAgdmFyIHBvbHlnb25zID0gdGV4dC5zcGxpdCgnKSgnKTtcblxuICBmb3IgKHZhciBpID0gMCwgaWkgPSBwb2x5Z29ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIHJpbmdzID0gcG9seWdvbnNbaV0uc3BsaXQoXCInXCIpO1xuICAgIGVuZHNzW2ldID0gW107XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcblxuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHJpbmdzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZGVjb2RlQ29vcmRpbmF0ZXNfKHJpbmdzW2pdLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgdmFyIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG5cbiAgICAgIGlmIChqID09PSAwKSB7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbMF07XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kKytdID0gZmxhdENvb3JkaW5hdGVzW2VuZHNbaiAtIDFdXTtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW2VuZCsrXSA9IGZsYXRDb29yZGluYXRlc1tlbmRzW2ogLSAxXSArIDFdO1xuICAgICAgfVxuXG4gICAgICBlbmRzW2pdID0gZW5kO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgb2xHZW9tTXVsdGlQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgJ1hZJywgZW5kc3MpO1xufVxuXG5mdW5jdGlvbiBzZXRTdHlsZUluRmVhdHVyZV8odGV4dCwgZmVhdHVyZSkge1xuICBpZiAodGV4dCA9PSAnJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwcm9wZXJ0aWVzID0gZ2V0U3R5bGVQcm9wZXJ0aWVzXyh0ZXh0LCBmZWF0dXJlKTtcbiAgdmFyIGZpbGxDb2xvciA9IHByb3BlcnRpZXMuZmlsbENvbG9yO1xuICB2YXIgZm9udFNpemUgPSBwcm9wZXJ0aWVzLmZvbnRTaXplO1xuICB2YXIgZm9udENvbG9yID0gcHJvcGVydGllcy5mb250Q29sb3I7XG4gIHZhciBwb2ludFJhZGl1cyA9IHByb3BlcnRpZXMucG9pbnRSYWRpdXM7XG4gIHZhciBzdHJva2VDb2xvciA9IHByb3BlcnRpZXMuc3Ryb2tlQ29sb3I7XG4gIHZhciBzdHJva2VXaWR0aCA9IHByb3BlcnRpZXMuc3Ryb2tlV2lkdGg7XG4gIHZhciBmaWxsU3R5bGUgPSBudWxsO1xuXG4gIGlmIChmaWxsQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgIGZpbGxTdHlsZSA9IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICBjb2xvcjogZmlsbENvbG9yXG4gICAgfSk7XG4gIH1cblxuICB2YXIgc3Ryb2tlU3R5bGUgPSBudWxsO1xuXG4gIGlmIChzdHJva2VDb2xvciAhPT0gdW5kZWZpbmVkICYmIHN0cm9rZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIHN0cm9rZVdpZHRoICE9ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc3Ryb2tlV2lkdGgnKTtcbiAgICB9XG5cbiAgICBzdHJva2VTdHlsZSA9IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICAgIGNvbG9yOiBzdHJva2VDb2xvcixcbiAgICAgIHdpZHRoOiBzdHJva2VXaWR0aFxuICAgIH0pO1xuICB9XG5cbiAgdmFyIGltYWdlU3R5bGUgPSBudWxsO1xuXG4gIGlmIChwb2ludFJhZGl1cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBwb2ludFJhZGl1cyAhPSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHBvaW50UmFkaXVzJyk7XG4gICAgfVxuXG4gICAgdmFyIF9vcHRpb25zID0ge1xuICAgICAgcmFkaXVzOiBwb2ludFJhZGl1c1xuICAgIH07XG5cbiAgICBpZiAoZmlsbFN0eWxlKSB7XG4gICAgICBfb3B0aW9ucy5maWxsID0gZmlsbFN0eWxlO1xuICAgIH1cblxuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgX29wdGlvbnMuc3Ryb2tlID0gc3Ryb2tlU3R5bGU7XG4gICAgfVxuXG4gICAgaW1hZ2VTdHlsZSA9IG5ldyBvbFN0eWxlQ2lyY2xlKF9vcHRpb25zKTtcbiAgICBmaWxsU3R5bGUgPSBudWxsO1xuICAgIHN0cm9rZVN0eWxlID0gbnVsbDtcbiAgfVxuXG4gIHZhciB0ZXh0U3R5bGUgPSBudWxsO1xuXG4gIGlmIChmb250U2l6ZSAhPT0gdW5kZWZpbmVkICYmIGZvbnRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGV4dFN0eWxlID0gbmV3IG9sU3R5bGVUZXh0KHtcbiAgICAgIGZvbnQ6IGZvbnRTaXplICsgXCIgc2Fucy1zZXJpZlwiLFxuICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgY29sb3I6IGZvbnRDb2xvclxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBvcHRpb25zID0ge307XG5cbiAgaWYgKGZpbGxTdHlsZSkge1xuICAgIG9wdGlvbnMuZmlsbCA9IGZpbGxTdHlsZTtcbiAgfVxuXG4gIGlmIChzdHJva2VTdHlsZSkge1xuICAgIG9wdGlvbnMuc3Ryb2tlID0gc3Ryb2tlU3R5bGU7XG4gIH1cblxuICBpZiAoaW1hZ2VTdHlsZSkge1xuICAgIG9wdGlvbnMuaW1hZ2UgPSBpbWFnZVN0eWxlO1xuICB9XG5cbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIG9wdGlvbnMudGV4dCA9IHRleHRTdHlsZTtcbiAgfVxuXG4gIHZhciBzdHlsZSA9IG5ldyBvbFN0eWxlU3R5bGUob3B0aW9ucyk7XG4gIGZlYXR1cmUuc2V0U3R5bGUoc3R5bGUpO1xufVxuXG5mdW5jdGlvbiBzZXRTdHlsZVByb3BlcnRpZXNfKHRleHQsIGZlYXR1cmUpIHtcbiAgdmFyIHByb3BlcnRpZXMgPSBnZXRTdHlsZVByb3BlcnRpZXNfKHRleHQsIGZlYXR1cmUpO1xuICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpIHtcbiAgICBpZiAocHJvcGVydGllcy5pc0xhYmVsIHx8IHByb3BlcnRpZXNbbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1RFWFRdKSB7XG4gICAgICBkZWxldGUgcHJvcGVydGllcy5zdHJva2VDb2xvcjtcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmZpbGxDb2xvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXMuZm9udENvbG9yO1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXMuZm9udFNpemU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmZvbnRDb2xvcjtcblxuICAgIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpIHtcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmZpbGxDb2xvcjtcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmZpbGxPcGFjaXR5O1xuICAgIH1cbiAgfVxuXG4gIGlmIChwcm9wZXJ0aWVzLmZvbnRTaXplKSB7XG4gICAgdmFyIGZvbnRTaXplU3RyID0gcHJvcGVydGllcy5mb250U2l6ZTtcblxuICAgIGlmICh0eXBlb2YgZm9udFNpemVTdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGZvbnRTaXplU3RyIHR5cGUnKTtcbiAgICB9XG5cbiAgICB2YXIgZm9udFNpemUgPSBwYXJzZUZsb2F0KGZvbnRTaXplU3RyKTtcblxuICAgIGlmIChmb250U2l6ZVN0ci5pbmNsdWRlcygncHgnKSkge1xuICAgICAgZm9udFNpemUgPSBNYXRoLnJvdW5kKGZvbnRTaXplIC8gMS4zMzMzMzMpO1xuICAgIH1cblxuICAgIHByb3BlcnRpZXMuZm9udFNpemUgPSBmb250U2l6ZTtcbiAgfVxuXG4gIHZhciBjbG9uZSA9IHt9O1xuXG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1trZXldO1xuXG4gICAgaWYgKExlZ2FjeVByb3BlcnRpZXNfW2tleV0pIHtcbiAgICAgIGNsb25lW0xlZ2FjeVByb3BlcnRpZXNfW2tleV1dID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsb25lW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBmZWF0dXJlLnNldFByb3BlcnRpZXMoY2xvbmUpO1xufVxuXG5mdW5jdGlvbiBjYXN0VmFsdWVfKGtleSwgdmFsdWUpIHtcbiAgdmFyIG51bVByb3BlcnRpZXMgPSBbbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLkFOR0xFLCBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuT1BBQ0lUWSwgbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNJWkUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TVFJPS0UsICdwb2ludFJhZGl1cycsICdzdHJva2VXaWR0aCddO1xuICB2YXIgYm9vbFByb3BlcnRpZXMgPSBbbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX0NJUkNMRSwgbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1JFQ1RBTkdMRSwgbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1RFWFQsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TSE9XX01FQVNVUkUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TSE9XX0xBQkVMLCAnaXNDaXJjbGUnLCAnaXNSZWN0YW5nbGUnLCAnaXNMYWJlbCcsICdzaG93TWVhc3VyZScsICdzaG93TGFiZWwnXTtcblxuICBpZiAobnVtUHJvcGVydGllcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuICt2YWx1ZTtcbiAgfSBlbHNlIGlmIChib29sUHJvcGVydGllcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFN0eWxlUHJvcGVydGllc18odGV4dCwgZmVhdHVyZSkge1xuICB2YXIgcGFydHMgPSB0ZXh0LnNwbGl0KFwiJ1wiKTtcbiAgdmFyIHByb3BlcnRpZXMgPSB7fTtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShwYXJ0cyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgdmFyIGVuY29kZWRQYXJ0ID0gX3N0ZXAzLnZhbHVlO1xuICAgIHZhciBwYXJ0ID0gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRQYXJ0KTtcbiAgICB2YXIga2V5VmFsID0gcGFydC5zcGxpdCgnKicpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KGtleVZhbC5sZW5ndGggPT09IDIpO1xuICAgIHZhciBrZXkgPSBrZXlWYWxbMF07XG4gICAgdmFyIHZhbCA9IGtleVZhbFsxXTtcbiAgICBwcm9wZXJ0aWVzW2tleV0gPSBjYXN0VmFsdWVfKGtleSwgdmFsKTtcbiAgfVxuXG4gIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuXG5mdW5jdGlvbiB3cml0ZUxpbmVTdHJpbmdHZW9tZXRyeV8oZ2VvbWV0cnkpIHtcbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgcmV0dXJuIFwibChcIiArIHRoaXMuZW5jb2RlQ29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgc3RyaWRlLCAwLCBlbmQpICsgXCIpXCI7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gd3JpdGVNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeV8oZ2VvbWV0cnkpIHtcbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlMaW5lU3RyaW5nKSB7XG4gICAgdmFyIGVuZHMgPSBnZW9tZXRyeS5nZXRFbmRzKCk7XG4gICAgdmFyIGxpbmVTdHJpbmdDb3VudCA9IGVuZHMubGVuZ3RoO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIG9mZnNldCA9IDA7XG4gICAgdmFyIHRleHRBcnJheSA9IFsnTCgnXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVN0cmluZ0NvdW50OyArK2kpIHtcbiAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgdmFyIHRleHQgPSB0aGlzLmVuY29kZUNvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIHN0cmlkZSwgb2Zmc2V0LCBlbmQpO1xuXG4gICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICB0ZXh0QXJyYXkucHVzaChcIidcIik7XG4gICAgICB9XG5cbiAgICAgIHRleHRBcnJheS5wdXNoKHRleHQpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cblxuICAgIHRleHRBcnJheS5wdXNoKCcpJyk7XG4gICAgcmV0dXJuIHRleHRBcnJheS5qb2luKCcnKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB3cml0ZVBvaW50R2VvbWV0cnlfKGdlb21ldHJ5KSB7XG4gIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICB2YXIgZW5kID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICByZXR1cm4gXCJwKFwiICsgdGhpcy5lbmNvZGVDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCBzdHJpZGUsIDAsIGVuZCkgKyBcIilcIjtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB3cml0ZU11bHRpUG9pbnRHZW9tZXRyeV8oZ2VvbWV0cnkpIHtcbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlQb2ludCkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgcmV0dXJuIFwiUChcIiArIHRoaXMuZW5jb2RlQ29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgc3RyaWRlLCAwLCBlbmQpICsgXCIpXCI7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZW5jb2RlUmluZ3NfKGZsYXRDb29yZGluYXRlcywgc3RyaWRlLCBvZmZzZXQsIGVuZHMsIHRleHRBcnJheSkge1xuICB2YXIgbGluZWFyUmluZ0NvdW50ID0gZW5kcy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lYXJSaW5nQ291bnQ7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldIC0gc3RyaWRlO1xuICAgIHZhciB0ZXh0ID0gdGhpcy5lbmNvZGVDb29yZGluYXRlc18oZmxhdENvb3JkaW5hdGVzLCBzdHJpZGUsIG9mZnNldCwgZW5kKTtcblxuICAgIGlmIChpICE9PSAwKSB7XG4gICAgICB0ZXh0QXJyYXkucHVzaChcIidcIik7XG4gICAgfVxuXG4gICAgdGV4dEFycmF5LnB1c2godGV4dCk7XG4gICAgb2Zmc2V0ID0gZW5kc1tpXTtcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbmZ1bmN0aW9uIHdyaXRlUG9seWdvbkdlb21ldHJ5XyhnZW9tZXRyeSkge1xuICBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2x5Z29uKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICB2YXIgZW5kcyA9IGdlb21ldHJ5LmdldEVuZHMoKTtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICB2YXIgdGV4dEFycmF5ID0gWydhKCddO1xuICAgIGVuY29kZVJpbmdzXy5jYWxsKHRoaXMsIGZsYXRDb29yZGluYXRlcywgc3RyaWRlLCBvZmZzZXQsIGVuZHMsIHRleHRBcnJheSk7XG4gICAgdGV4dEFycmF5LnB1c2goJyknKTtcbiAgICByZXR1cm4gdGV4dEFycmF5LmpvaW4oJycpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHdyaXRlTXVsdGlQb2x5Z29uR2VvbWV0cnlfKGdlb21ldHJ5KSB7XG4gIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpUG9seWdvbikge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIGVuZHNzID0gZ2VvbWV0cnkuZ2V0RW5kc3MoKTtcbiAgICB2YXIgcG9seWdvbkNvdW50ID0gZW5kc3MubGVuZ3RoO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIHZhciB0ZXh0QXJyYXkgPSBbJ0EnXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9seWdvbkNvdW50OyArK2kpIHtcbiAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICB0ZXh0QXJyYXkucHVzaCgnKCcpO1xuICAgICAgb2Zmc2V0ID0gZW5jb2RlUmluZ3NfLmNhbGwodGhpcywgZmxhdENvb3JkaW5hdGVzLCBzdHJpZGUsIG9mZnNldCwgZW5kcywgdGV4dEFycmF5KTtcbiAgICAgIHRleHRBcnJheS5wdXNoKCcpJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHRBcnJheS5qb2luKCcnKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGdlb21ldHJ5IHR5cGUnKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IHtcbiAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgUE9JTlQ6ICdQb2ludCcsXG4gIFBPTFlHT046ICdQb2x5Z29uJ1xufTsiLCJleHBvcnQgZGVmYXVsdCB7XG4gIEFOR0xFOiAnYScsXG4gIENPTE9SOiAnYycsXG4gIElTX0NJUkNMRTogJ2wnLFxuICBJU19SRUNUQU5HTEU6ICdyJyxcbiAgSVNfVEVYVDogJ3QnLFxuICBOQU1FOiAnbicsXG4gIFNIT1dfTEFCRUw6ICdiJyxcbiAgT1BBQ0lUWTogJ28nLFxuICBBWklNVVQ6ICd6JyxcbiAgU0hPV19NRUFTVVJFOiAnbScsXG4gIFNJWkU6ICdzJyxcbiAgU1RST0tFOiAnaycsXG4gIEFSUk9XX0RJUkVDVElPTjogJ2QnLFxuICBBUlJPV19QT1NJVElPTjogJ3AnXG59OyIsImltcG9ydCB7IHNldEdlb21ldHJ5VHlwZSB9IGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZS5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgeyBGb3JtYXROdW1iZXJUeXBlIH0gZnJvbSAnbmdlby9mb3JtYXQvWFNEQXR0cmlidXRlLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8ucmVhZCA9IGZ1bmN0aW9uIHJlYWQoY29tcGxleFR5cGVFbGVtZW50cykge1xuICAgIHJldHVybiBjb21wbGV4VHlwZUVsZW1lbnRzLm1hcCh0aGlzLnJlYWRGcm9tQ29tcGxleFR5cGVFbGVtZW50Xyk7XG4gIH07XG5cbiAgX3Byb3RvLnNldEF0dHJpYnV0ZVR5cGUgPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVUeXBlKGF0dHJpYnV0ZSwgdHlwZSkge1xuICAgIGlmICh0eXBlID09PSAnZ21sOlRpbWVJbnN0YW50VHlwZScgfHwgdHlwZSA9PT0gJ2RhdGVUaW1lJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5EQVRFVElNRTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkYXRlJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5EQVRFO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3RpbWUnKSB7XG4gICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlRJTUU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnZGVjaW1hbCcgfHwgdHlwZSA9PT0gJ2RvdWJsZScpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuTlVNQkVSO1xuICAgICAgYXR0cmlidXRlLm51bVR5cGUgPSBGb3JtYXROdW1iZXJUeXBlLkZMT0FUO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2ludGVnZXInIHx8IHR5cGUgPT09ICdsb25nJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5OVU1CRVI7XG4gICAgICBhdHRyaWJ1dGUubnVtVHlwZSA9IEZvcm1hdE51bWJlclR5cGUuSU5URUdFUjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5CT09MRUFOO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlRFWFQ7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5yZWFkRnJvbUNvbXBsZXhUeXBlRWxlbWVudF8gPSBmdW5jdGlvbiByZWFkRnJvbUNvbXBsZXhUeXBlRWxlbWVudF8ob2JqZWN0KSB7XG4gICAgdmFyIG5hbWUgPSBvYmplY3QubmFtZTtcbiAgICB2YXIgYWxpYXMgPSBvYmplY3QuYWxpYXMgfHwgbnVsbDtcbiAgICB2YXIgcmVxdWlyZWQgPSBvYmplY3QubWluT2NjdXJzICE9ICcwJztcbiAgICB2YXIgYXR0cmlidXRlID0ge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGFsaWFzOiBhbGlhcyxcbiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZFxuICAgIH07XG4gICAgdmFyIHR5cGUgPSBvYmplY3QudHlwZTtcblxuICAgIGlmICghc2V0R2VvbWV0cnlUeXBlKGF0dHJpYnV0ZSwgdHlwZSkpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlVHlwZShhdHRyaWJ1dGUsIHR5cGUpO1xuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufSgpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCB7IHNldEdlb21ldHJ5VHlwZSB9IGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZS5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRYTUwgZnJvbSAnb2wvZm9ybWF0L1hNTC5qcyc7XG5leHBvcnQgdmFyIEZvcm1hdE51bWJlclR5cGUgPSB7XG4gIEZMT0FUOiAnZmxvYXQnLFxuICBJTlRFR0VSOiAnaW50ZWdlcidcbn07XG5cbnZhciBYU0RBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoX29sRm9ybWF0WE1MKSB7XG4gIF9pbmhlcml0c0xvb3NlKFhTREF0dHJpYnV0ZSwgX29sRm9ybWF0WE1MKTtcblxuICBmdW5jdGlvbiBYU0RBdHRyaWJ1dGUoKSB7XG4gICAgcmV0dXJuIF9vbEZvcm1hdFhNTC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gWFNEQXR0cmlidXRlLnByb3RvdHlwZTtcblxuICBfcHJvdG8ucmVhZCA9IGZ1bmN0aW9uIHJlYWQoc291cmNlKSB7XG4gICAgcmV0dXJuIG9sRm9ybWF0WE1MLnByb3RvdHlwZS5yZWFkLmNhbGwodGhpcywgc291cmNlKTtcbiAgfTtcblxuICBfcHJvdG8ucmVhZEZyb21Eb2N1bWVudCA9IGZ1bmN0aW9uIHJlYWRGcm9tRG9jdW1lbnQoZG9jKSB7XG4gICAgY29uc29sZS5hc3NlcnQoZG9jLm5vZGVUeXBlID09IE5vZGUuRE9DVU1FTlRfTk9ERSwgJ2RvYy5ub2RlVHlwZSBzaG91bGQgYmUgRE9DVU1FTlQnKTtcbiAgICB2YXIgbjtcblxuICAgIGZvciAobiA9IGRvYy5maXJzdENoaWxkOyBuOyBuID0gbi5uZXh0U2libGluZykge1xuICAgICAgaWYgKG4ubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgaWYgKCEobiBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyB0eXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkRnJvbU5vZGUobik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgX3Byb3RvLnJlYWRGcm9tTm9kZSA9IGZ1bmN0aW9uIHJlYWRGcm9tTm9kZShub2RlKSB7XG4gICAgY29uc29sZS5hc3NlcnQobm9kZS5sb2NhbE5hbWUgPT0gJ3NjaGVtYScsICdsb2NhbE5hbWUgc2hvdWxkIGJlIHNjaGVtYScpO1xuICAgIHZhciBlbGVtZW50cyA9IG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2VsZW1lbnQnKTtcblxuICAgIGlmICghZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICBlbGVtZW50cyA9IG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3hzZDplbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBbXTtcbiAgICB2YXIgYXR0cmlidXRlO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgYXR0cmlidXRlID0gdGhpcy5yZWFkRnJvbUVsZW1lbnROb2RlXyhlbGVtZW50c1tpXSk7XG5cbiAgICAgIGlmIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gIH07XG5cbiAgX3Byb3RvLnJlYWRGcm9tRWxlbWVudE5vZGVfID0gZnVuY3Rpb24gcmVhZEZyb21FbGVtZW50Tm9kZV8obm9kZSkge1xuICAgIGNvbnNvbGUuYXNzZXJ0KG5vZGUubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUsICdub2RlLm5vZGVUeXBlIHNob3VsZCBiZSBFTEVNRU5UJyk7XG4gICAgdmFyIGVsZW1lbnROb2RlID0gbm9kZTtcbiAgICB2YXIgbmFtZSA9IGVsZW1lbnROb2RlLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25hbWUgc2hvdWxkIGJlIGRlZmluZWQgaW4gZWxlbWVudCBub2RlJyk7XG4gICAgfVxuXG4gICAgdmFyIGFsaWFzID0gZWxlbWVudE5vZGUuZ2V0QXR0cmlidXRlKCdhbGlhcycpO1xuICAgIHZhciBuaWxsYWJsZSA9IGVsZW1lbnROb2RlLmdldEF0dHJpYnV0ZSgnbmlsbGFibGUnKTtcbiAgICB2YXIgcmVxdWlyZWQgPSBuaWxsYWJsZSAhPT0gJ3RydWUnO1xuICAgIHZhciByZWFkb25seUVscyA9IGVsZW1lbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdyZWFkb25seScpO1xuICAgIHZhciByZWFkb25seSA9IHJlYWRvbmx5RWxzWzBdID8gcmVhZG9ubHlFbHNbMF0uZ2V0QXR0cmlidXRlKCd2YWx1ZScpID09PSAndHJ1ZScgOiBmYWxzZTtcbiAgICB2YXIgYXR0cmlidXRlID0ge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHJlYWRvbmx5OiByZWFkb25seSxcbiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZFxuICAgIH07XG5cbiAgICBpZiAoYWxpYXMpIHtcbiAgICAgIGF0dHJpYnV0ZS5hbGlhcyA9IGFsaWFzO1xuICAgIH1cblxuICAgIHZhciB0eXBlID0gZWxlbWVudE5vZGUuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG5cbiAgICBpZiAodHlwZSkge1xuICAgICAgaWYgKCFzZXRHZW9tZXRyeVR5cGUoYXR0cmlidXRlLCB0eXBlKSkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZUJ5WHNkVHlwZV8oYXR0cmlidXRlLCB0eXBlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVudW1lcmF0aW9ucyA9IGVsZW1lbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdlbnVtZXJhdGlvbicpO1xuXG4gICAgICBpZiAoIWVudW1lcmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgZW51bWVyYXRpb25zID0gZWxlbWVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3hzZDplbnVtZXJhdGlvbicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW51bWVyYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlNFTEVDVDtcbiAgICAgICAgdmFyIGNob2ljZXMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbnVtZXJhdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGVudW1lcmF0aW9uc1tpXS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG5cbiAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdmFsdWUnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjaG9pY2VzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlLmNob2ljZXMgPSBjaG9pY2VzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3RyaWN0aW9ucyA9IGVsZW1lbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdyZXN0cmljdGlvbicpO1xuXG4gICAgICAgIGlmICghcmVzdHJpY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHJlc3RyaWN0aW9ucyA9IGVsZW1lbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd4c2Q6cmVzdHJpY3Rpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN0cmljdGlvbnMubGVuZ3RoICYmIHJlc3RyaWN0aW9uc1swXSkge1xuICAgICAgICAgIHZhciByZXN0cmljdGlvbk5vZGUgPSByZXN0cmljdGlvbnNbMF07XG4gICAgICAgICAgdmFyIGJhc2UgPSByZXN0cmljdGlvbk5vZGUuZ2V0QXR0cmlidXRlKCdiYXNlJyk7XG5cbiAgICAgICAgICBpZiAoIWJhc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBiYXNlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVCeVhzZFR5cGVfKGF0dHJpYnV0ZSwgYmFzZSk7XG4gICAgICAgICAgdmFyIG1heExlbmd0aHMgPSBlbGVtZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbWF4TGVuZ3RoJyk7XG5cbiAgICAgICAgICBpZiAoIW1heExlbmd0aHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYXhMZW5ndGhzID0gZWxlbWVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3hzZDptYXhMZW5ndGgnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobWF4TGVuZ3Rocy5sZW5ndGggJiYgbWF4TGVuZ3Roc1swXSkge1xuICAgICAgICAgICAgYXR0cmlidXRlLm1heExlbmd0aCA9IE51bWJlcihtYXhMZW5ndGhzWzBdLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFhdHRyaWJ1dGUudHlwZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc29sZS5hc3NlcnQoYXR0cmlidXRlLnR5cGUpO1xuICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gIH07XG5cbiAgX3Byb3RvLnNldEF0dHJpYnV0ZUJ5WHNkVHlwZV8gPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVCeVhzZFR5cGVfKGF0dHJpYnV0ZSwgdHlwZSkge1xuICAgIGlmICh0eXBlID09PSAneHNkOmJvb2xlYW4nKSB7XG4gICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkJPT0xFQU47XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAneHNkOmRhdGUnKSB7XG4gICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAneHNkOmRhdGVUaW1lJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5EQVRFVElNRTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd4c2Q6dGltZScpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuVElNRTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd4c2Q6ZGVjaW1hbCcgfHwgdHlwZSA9PT0gJ3hzZDpkb3VibGUnKSB7XG4gICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLk5VTUJFUjtcbiAgICAgIGF0dHJpYnV0ZS5udW1UeXBlID0gRm9ybWF0TnVtYmVyVHlwZS5GTE9BVDtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd4c2Q6aW50ZWdlcicpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuTlVNQkVSO1xuICAgICAgYXR0cmlidXRlLm51bVR5cGUgPSBGb3JtYXROdW1iZXJUeXBlLklOVEVHRVI7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAneHNkOnN0cmluZycpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuVEVYVDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFhTREF0dHJpYnV0ZTtcbn0ob2xGb3JtYXRYTUwpO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2VvbWV0cnlBdHRyaWJ1dGUoYXR0cmlidXRlcykge1xuICB2YXIgZ2VvbUF0dHJpYnV0ZSA9IG51bGw7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXR0cmlidXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgaWYgKGF0dHJpYnV0ZXNbaV0udHlwZSA9PT0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuR0VPTUVUUlkpIHtcbiAgICAgIGdlb21BdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdlb21BdHRyaWJ1dGU7XG59XG5leHBvcnQgZGVmYXVsdCBYU0RBdHRyaWJ1dGU7IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBvbEZvcm1hdEZpbHRlckNvbXBhcmlzb24gZnJvbSAnb2wvZm9ybWF0L2ZpbHRlci9Db21wYXJpc29uLmpzJztcbmV4cG9ydCB2YXIgRGF0ZUlzQmV0d2VlbiA9IGZ1bmN0aW9uIChfb2xGb3JtYXRGaWx0ZXJDb21wYXIpIHtcbiAgX2luaGVyaXRzTG9vc2UoRGF0ZUlzQmV0d2VlbiwgX29sRm9ybWF0RmlsdGVyQ29tcGFyKTtcblxuICBmdW5jdGlvbiBEYXRlSXNCZXR3ZWVuKHByb3BlcnR5TmFtZSwgbG93ZXJCb3VuZGFyeSwgdXBwZXJCb3VuZGFyeSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sRm9ybWF0RmlsdGVyQ29tcGFyLmNhbGwodGhpcywgJ1Byb3BlcnR5SXNCZXR3ZWVuJywgcHJvcGVydHlOYW1lKSB8fCB0aGlzO1xuICAgIF90aGlzLmxvd2VyQm91bmRhcnkgPSBsb3dlckJvdW5kYXJ5O1xuICAgIF90aGlzLnVwcGVyQm91bmRhcnkgPSB1cHBlckJvdW5kYXJ5O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBEYXRlSXNCZXR3ZWVuO1xufShvbEZvcm1hdEZpbHRlckNvbXBhcmlzb24pO1xuZXhwb3J0IGZ1bmN0aW9uIGRhdGVCZXR3ZWVuKHByb3BlcnR5TmFtZSwgbG93ZXJCb3VuZGFyeSwgdXBwZXJCb3VuZGFyeSkge1xuICByZXR1cm4gbmV3IERhdGVJc0JldHdlZW4ocHJvcGVydHlOYW1lLCBsb3dlckJvdW5kYXJ5LCB1cHBlckJvdW5kYXJ5KTtcbn0iLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZWxlbWVudFwiLCBcImdldHRleHRDYXRhbG9nXCIsIFwibmdlb0ZlYXR1cmVPdmVybGF5TWdyXCIsIFwibmdlb05vdGlmaWNhdGlvblwiLCBcIm5nZW9HZW9sb2NhdGlvbk9wdGlvbnNcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXlNZ3IgZnJvbSAnbmdlby9tYXAvRmVhdHVyZU92ZXJsYXlNZ3IuanMnO1xuaW1wb3J0IG5nZW9NZXNzYWdlTm90aWZpY2F0aW9uIGZyb20gJ25nZW8vbWVzc2FnZS9Ob3RpZmljYXRpb24uanMnO1xuaW1wb3J0ICogYXMgb2xFYXNpbmcgZnJvbSAnb2wvZWFzaW5nLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IG9sR2VvbG9jYXRpb24gZnJvbSAnb2wvR2VvbG9jYXRpb24uanMnO1xuaW1wb3J0IG9sTWFwIGZyb20gJ29sL01hcC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHsgYnVpbGRTdHlsZSB9IGZyb20gJ25nZW8vb3B0aW9ucy5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0dlb2xvY2F0aW9uJywgW25nZW9NYXBGZWF0dXJlT3ZlcmxheU1nci5uYW1lLCBuZ2VvTWVzc2FnZU5vdGlmaWNhdGlvbi5uYW1lXSk7XG52YXIgR2VvbG9jYXRpb25FdmVudFR5cGUgPSB7XG4gIEVSUk9SOiAnZ2VvbG9jYXRpb24tZXJyb3InXG59O1xuXG5mdW5jdGlvbiBnZW9sb2NhdGlvbkNvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiB7XG4gICAgICAnbWFwJzogJzxuZ2VvR2VvbG9jYXRpb25NYXAnLFxuICAgICAgJ2xvYWRpbmcnOiAnPW5nZW9HZW9sb2NhdGlvbkxvYWRpbmcnXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiAnbmdlb0dlb2xvY2F0aW9uQ29udHJvbGxlcicsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9HZW9sb2NhdGlvbicsIGdlb2xvY2F0aW9uQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQsIGdldHRleHRDYXRhbG9nLCBuZ2VvRmVhdHVyZU92ZXJsYXlNZ3IsIG5nZW9Ob3RpZmljYXRpb24sIG5nZW9HZW9sb2NhdGlvbk9wdGlvbnMpIHtcbiAgdGhpcy5vcHRpb25zID0gbmdlb0dlb2xvY2F0aW9uT3B0aW9ucztcbiAgJGVsZW1lbnQub24oJ2NsaWNrJywgdGhpcy50b2dnbGVUcmFja2luZy5iaW5kKHRoaXMpKTtcbiAgdGhpcy4kc2NvcGVfID0gJHNjb3BlO1xuICB0aGlzLm5vdGlmaWNhdGlvbl8gPSBuZ2VvTm90aWZpY2F0aW9uO1xuICB0aGlzLm5nZW9GZWF0dXJlT3ZlcmxheU1ncl8gPSBuZ2VvRmVhdHVyZU92ZXJsYXlNZ3I7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMubWFwO1xuICB0aGlzLmxvYWRpbmc7XG59XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgaWYgKCEodGhpcy5tYXAgaW5zdGFuY2VvZiBvbE1hcCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIG1hcCB0eXBlJyk7XG4gIH1cblxuICB0aGlzLmZlYXR1cmVPdmVybGF5XyA9IHRoaXMubmdlb0ZlYXR1cmVPdmVybGF5TWdyXy5nZXRGZWF0dXJlT3ZlcmxheSgpO1xuICB0aGlzLmdlb2xvY2F0aW9uXyA9IG5ldyBvbEdlb2xvY2F0aW9uKHtcbiAgICBwcm9qZWN0aW9uOiB0aGlzLm1hcC5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLFxuICAgIHRyYWNraW5nT3B0aW9uczoge1xuICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBpZiAodGhpcy5vcHRpb25zLmF1dG9Sb3RhdGUpIHtcbiAgICB0aGlzLmF1dG9Sb3RhdGVMaXN0ZW5lcigpO1xuICB9XG5cbiAgdmFyIGdldHRleHRDYXRhbG9nID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ187XG4gIHRoaXMuZ2VvbG9jYXRpb25fLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgIF90aGlzLnVudHJhY2tfKCk7XG5cbiAgICB2YXIgbXNnO1xuXG4gICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIG1zZyA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnVXNlciBkZW5pZWQgdGhlIHJlcXVlc3QgZm9yIEdlb2xvY2F0aW9uLicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAyOlxuICAgICAgICBtc2cgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0xvY2F0aW9uIGluZm9ybWF0aW9uIGlzIHVuYXZhaWxhYmxlLicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAzOlxuICAgICAgICBtc2cgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ1RoZSByZXF1ZXN0IHRvIGdldCB1c2VyIGxvY2F0aW9uIHRpbWVkIG91dC4nKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIG1zZyA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnR2VvbG9jYXRpb246IEFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIF90aGlzLm5vdGlmaWNhdGlvbl8uZXJyb3IobXNnKTtcblxuICAgIF90aGlzLiRzY29wZV8uJGVtaXQoR2VvbG9jYXRpb25FdmVudFR5cGUuRVJST1IsIGVycm9yKTtcbiAgfSk7XG4gIHRoaXMucG9zaXRpb25GZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUoKTtcbiAgdGhpcy5wb3NpdGlvbkZlYXR1cmVfLnNldFN0eWxlKGJ1aWxkU3R5bGUodGhpcy5vcHRpb25zLnBvc2l0aW9uRmVhdHVyZVN0eWxlKSk7XG4gIHRoaXMuYWNjdXJhY3lGZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUoKTtcbiAgdGhpcy5hY2N1cmFjeUZlYXR1cmVfLnNldFN0eWxlKGJ1aWxkU3R5bGUodGhpcy5vcHRpb25zLmFjY3VyYWN5RmVhdHVyZVN0eWxlKSk7XG4gIHRoaXMuZm9sbG93XyA9IGZhbHNlO1xuICB0aGlzLnZpZXdDaGFuZ2VkQnlNZV8gPSBmYWxzZTtcbiAgbGlzdGVuKHRoaXMuZ2VvbG9jYXRpb25fLCAnY2hhbmdlOmFjY3VyYWN5R2VvbWV0cnknLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gX3RoaXMuZ2VvbG9jYXRpb25fLmdldEFjY3VyYWN5R2VvbWV0cnkoKTtcblxuICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZW9tZXRyeScpO1xuICAgIH1cblxuICAgIF90aGlzLmFjY3VyYWN5RmVhdHVyZV8uc2V0R2VvbWV0cnkoZ2VvbWV0cnkpO1xuXG4gICAgX3RoaXMuc2V0UG9zaXRpb25fKCk7XG4gIH0pO1xuICBsaXN0ZW4odGhpcy5nZW9sb2NhdGlvbl8sICdjaGFuZ2U6cG9zaXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMuc2V0UG9zaXRpb25fKCk7XG4gIH0pO1xuICB2YXIgdmlldyA9IHRoaXMubWFwLmdldFZpZXcoKTtcbiAgbGlzdGVuKHZpZXcsICdjaGFuZ2U6Y2VudGVyJywgdGhpcy5oYW5kbGVWaWV3Q2hhbmdlXywgdGhpcyk7XG4gIGxpc3Rlbih2aWV3LCAnY2hhbmdlOnJlc29sdXRpb24nLCB0aGlzLmhhbmRsZVZpZXdDaGFuZ2VfLCB0aGlzKTtcblxuICBpZiAodGhpcy5vcHRpb25zLmF0TG9hZGluZ1RpbWUgJiYgdGhpcy5sb2FkaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLiRzY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5sb2FkaW5nO1xuICAgIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgIGlmIChuZXdWYWwgPT09IGZhbHNlKSB7XG4gICAgICAgIF90aGlzLnRvZ2dsZVRyYWNraW5nKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZVRyYWNraW5nID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5nZW9sb2NhdGlvbl8uZ2V0VHJhY2tpbmcoKSkge1xuICAgIHZhciBjdXJyZW50UG9zaXRpb24gPSB0aGlzLmdlb2xvY2F0aW9uXy5nZXRQb3NpdGlvbigpO1xuXG4gICAgaWYgKGN1cnJlbnRQb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVudHJhY2tfKCk7XG4gICAgICB0aGlzLiRzY29wZV8uJGVtaXQoR2VvbG9jYXRpb25FdmVudFR5cGUuRVJST1IsIG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2aWV3ID0gdGhpcy5tYXAuZ2V0VmlldygpO1xuICAgIHZhciBjZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuXG4gICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjZW50ZXInKTtcbiAgICB9XG5cbiAgICB2YXIgZGlmZiA9IE1hdGguYWJzKGN1cnJlbnRQb3NpdGlvblswXSAtIGNlbnRlclswXSkgKyBNYXRoLmFicyhjdXJyZW50UG9zaXRpb25bMV0gLSBjZW50ZXJbMV0pO1xuXG4gICAgaWYgKGRpZmYgPCAyKSB7XG4gICAgICB0aGlzLnVudHJhY2tfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcuc2V0Q2VudGVyKGN1cnJlbnRQb3NpdGlvbik7XG4gICAgICB0aGlzLnVudHJhY2tfKCk7XG4gICAgICB0aGlzLnRyYWNrXygpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLnRyYWNrXygpO1xuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS50cmFja18gPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZmVhdHVyZU92ZXJsYXlfLmFkZEZlYXR1cmUodGhpcy5wb3NpdGlvbkZlYXR1cmVfKTtcbiAgdGhpcy5mZWF0dXJlT3ZlcmxheV8uYWRkRmVhdHVyZSh0aGlzLmFjY3VyYWN5RmVhdHVyZV8pO1xuICB0aGlzLmZvbGxvd18gPSB0cnVlO1xuICB0aGlzLmdlb2xvY2F0aW9uXy5zZXRUcmFja2luZyh0cnVlKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnVudHJhY2tfID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmZlYXR1cmVPdmVybGF5Xy5jbGVhcigpO1xuICB0aGlzLmZvbGxvd18gPSBmYWxzZTtcbiAgdGhpcy5nZW9sb2NhdGlvbl8uc2V0VHJhY2tpbmcoZmFsc2UpO1xuICB0aGlzLm5vdGlmaWNhdGlvbl8uY2xlYXIoKTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLnNldFBvc2l0aW9uXyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZpZXcgPSB0aGlzLm1hcC5nZXRWaWV3KCk7XG4gIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2VvbG9jYXRpb25fLmdldFBvc2l0aW9uKCk7XG5cbiAgaWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcG9zaXRpb24nKTtcbiAgfVxuXG4gIHZhciBwb2ludCA9IG5ldyBvbEdlb21Qb2ludChwb3NpdGlvbik7XG4gIHRoaXMucG9zaXRpb25GZWF0dXJlXy5zZXRHZW9tZXRyeShwb2ludCk7XG4gIHZhciBhY2N1cmFjeSA9IHRoaXMuYWNjdXJhY3lGZWF0dXJlXy5nZXRHZW9tZXRyeSgpO1xuXG4gIGlmICh0aGlzLmZvbGxvd18pIHtcbiAgICB0aGlzLnZpZXdDaGFuZ2VkQnlNZV8gPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZXcuc2V0Q2VudGVyKHBvc2l0aW9uKTtcbiAgICAgIHZpZXcuc2V0Wm9vbSh0aGlzLm9wdGlvbnMuem9vbSk7XG4gICAgfSBlbHNlIGlmIChhY2N1cmFjeSBpbnN0YW5jZW9mIFBvbHlnb24pIHtcbiAgICAgIHZhciBzaXplID0gdGhpcy5tYXAuZ2V0U2l6ZSgpO1xuXG4gICAgICBpZiAoc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzaXplJyk7XG4gICAgICB9XG5cbiAgICAgIHZpZXcuZml0KGFjY3VyYWN5LCB7XG4gICAgICAgIHNpemU6IHNpemVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMudmlld0NoYW5nZWRCeU1lXyA9IGZhbHNlO1xuICB9XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVWaWV3Q2hhbmdlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICBpZiAodGhpcy5mb2xsb3dfICYmICF0aGlzLnZpZXdDaGFuZ2VkQnlNZV8pIHtcbiAgICB0aGlzLmZvbGxvd18gPSBmYWxzZTtcbiAgfVxufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuYXV0b1JvdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICB2YXIgY3VycmVudEFscGhhID0gMDtcblxuICBpZiAod2luZG93Lmhhc093blByb3BlcnR5KCdvbmRldmljZW9yaWVudGF0aW9uYWJzb2x1dGUnKSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbmFic29sdXRlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoIShldmVudCBpbnN0YW5jZW9mIERldmljZU9yaWVudGF0aW9uRXZlbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZXZlbnQgdHlwZScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQuYWxwaGEgIT09IG51bGwpIHtcbiAgICAgICAgY3VycmVudEFscGhhID0gX3RoaXMyLmhhbmRsZVJvdGF0ZV8oZXZlbnQuYWxwaGEsIGN1cnJlbnRBbHBoYSk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAod2luZG93Lmhhc093blByb3BlcnR5KCdvbmRldmljZW9yaWVudGF0aW9uJykpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBpZiAoZXZ0LndlYmtpdENvbXBhc3NIZWFkaW5nKSB7XG4gICAgICAgIGN1cnJlbnRBbHBoYSA9IF90aGlzMi5oYW5kbGVSb3RhdGVfKC1ldnQud2Via2l0Q29tcGFzc0hlYWRpbmcsIGN1cnJlbnRBbHBoYSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWV2dC5hbHBoYSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBldnQuYWxwaGEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRBbHBoYSA9IF90aGlzMi5oYW5kbGVSb3RhdGVfKGV2dC5hbHBoYSAtIDI3MCwgY3VycmVudEFscGhhKTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKCdPcmllbnRhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZGV2aWNlJyk7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLmhhbmRsZVJvdGF0ZV8gPSBmdW5jdGlvbiAoZXZlbnRBbHBoYSwgY3VycmVudEFscGhhKSB7XG4gIGlmICh0aGlzLmdlb2xvY2F0aW9uXy5nZXRUcmFja2luZygpICYmIE1hdGguYWJzKGV2ZW50QWxwaGEgLSBjdXJyZW50QWxwaGEpID4gMC4yKSB7XG4gICAgY3VycmVudEFscGhhID0gZXZlbnRBbHBoYTtcbiAgICB2YXIgcmFkQWxwaGEgPSBjdXJyZW50QWxwaGEgKiBNYXRoLlBJIC8gMTgwO1xuICAgIHRoaXMubWFwLmdldFZpZXcoKS5hbmltYXRlKHtcbiAgICAgIHJvdGF0aW9uOiByYWRBbHBoYSxcbiAgICAgIGR1cmF0aW9uOiAzNTAsXG4gICAgICBlYXNpbmc6IG9sRWFzaW5nLmxpbmVhclxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnRBbHBoYTtcbn07XG5cbm15TW9kdWxlLmNvbnRyb2xsZXIoJ25nZW9HZW9sb2NhdGlvbkNvbnRyb2xsZXInLCBDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcblxuZnVuY3Rpb24gR3JpZENvbmZpZyhkYXRhLCBjb2x1bW5EZWZzKSB7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG4gIHRoaXMuY29sdW1uRGVmcyA9IGNvbHVtbkRlZnM7XG4gIHRoaXMuc2VsZWN0ZWRSb3dzID0ge307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3dVaWQoYXR0cmlidXRlcykge1xuICByZXR1cm4gXCJcIiArIG9sVXRpbEdldFVpZChhdHRyaWJ1dGVzKTtcbn1cblxuR3JpZENvbmZpZy5wcm90b3R5cGUuaXNSb3dTZWxlY3RlZCA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gIHJldHVybiAhIXRoaXMuc2VsZWN0ZWRSb3dzW2dldFJvd1VpZChhdHRyaWJ1dGVzKV07XG59O1xuXG5HcmlkQ29uZmlnLnByb3RvdHlwZS5nZXRTZWxlY3RlZENvdW50ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zZWxlY3RlZFJvd3MpLmxlbmd0aDtcbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLmdldFNlbGVjdGVkUm93cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBpZiAoIXRoaXMuZGF0YSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhJyk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5kYXRhLmZpbHRlcihmdW5jdGlvbiAocm93KSB7XG4gICAgcmV0dXJuIF90aGlzLmlzUm93U2VsZWN0ZWQocm93KTtcbiAgfSk7XG59O1xuXG5HcmlkQ29uZmlnLnByb3RvdHlwZS5zZWxlY3RSb3cgPSBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICB2YXIgdWlkID0gZ2V0Um93VWlkKGF0dHJpYnV0ZXMpO1xuICB0aGlzLnNlbGVjdGVkUm93c1t1aWRdID0gYXR0cmlidXRlcztcbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLnRvZ2dsZVJvdyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gIHZhciB1aWQgPSBnZXRSb3dVaWQoYXR0cmlidXRlcyk7XG4gIHZhciBpc1NlbGVjdGVkID0gdGhpcy5pc1Jvd1NlbGVjdGVkKGF0dHJpYnV0ZXMpO1xuXG4gIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgZGVsZXRlIHRoaXMuc2VsZWN0ZWRSb3dzW3VpZF07XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zZWxlY3RlZFJvd3NbdWlkXSA9IGF0dHJpYnV0ZXM7XG4gIH1cbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLnNlbGVjdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgaWYgKCF0aGlzLmRhdGEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YScpO1xuICB9XG5cbiAgdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICBfdGhpczIuc2VsZWN0Um93KGF0dHJpYnV0ZXMpO1xuICB9KTtcbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLnVuc2VsZWN0QWxsID0gZnVuY3Rpb24gKCkge1xuICBmb3IgKHZhciByb3dJZCBpbiB0aGlzLnNlbGVjdGVkUm93cykge1xuICAgIGRlbGV0ZSB0aGlzLnNlbGVjdGVkUm93c1tyb3dJZF07XG4gIH1cbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLmludmVydFNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgaWYgKCF0aGlzLmRhdGEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YScpO1xuICB9XG5cbiAgdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICBfdGhpczMudG9nZ2xlUm93KGF0dHJpYnV0ZXMpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRDb25maWc7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdiBjbGFzcz1cIm5nZW8tZ3JpZC10YWJsZS1jb250YWluZXJcIj5cXG4gIDx0YWJsZSBmbG9hdC10aGVhZD1cIiRjdHJsLmZsb2F0VGhlYWRDb25maWdcIiBuZy1tb2RlbD1cIiRjdHJsLmNvbmZpZ3VyYXRpb24uZGF0YVwiXFxuICAgICAgICAgY2xhc3M9XCJ0YWJsZSB0YWJsZS1ib3JkZXJlZCB0YWJsZS1zdHJpcGVkIHRhYmxlLWhvdmVyXCI+XFxuICAgIDx0aGVhZCBjbGFzcz1cInRhYmxlLWhlYWRlclwiPlxcbiAgICAgIDx0cj5cXG4gICAgICAgIDx0aCBuZy1yZXBlYXQ9XCJjb2x1bW5EZWZzIGluICRjdHJsLmNvbmZpZ3VyYXRpb24uY29sdW1uRGVmc1wiXFxuICAgICAgICAgICAgbmctY2xpY2s9XCIkY3RybC5zb3J0KGNvbHVtbkRlZnMubmFtZSlcIiBuZy1iaW5kLWh0bWw9XCJjb2x1bW5EZWZzLm5hbWUgfCBuZ2VvVHJ1c3RIdG1sIHwgdHJhbnNsYXRlXCI+XFxuICAgICAgICAgIDxpIG5nLXNob3c9XCIkY3RybC5zb3J0ZWRCeSAhPT0gY29sdW1uRGVmcy5uYW1lXCIgY2xhc3M9XCJmYSBmYS1md1wiPjwvaT5cXG4gICAgICAgICAgPGkgbmctc2hvdz1cIiRjdHJsLnNvcnRlZEJ5ID09PSBjb2x1bW5EZWZzLm5hbWUgJiYgJGN0cmwuc29ydEFzY2VuZGluZyA9PT0gdHJ1ZVwiIGNsYXNzPVwiZmEgZmEtY2FyZXQtdXBcIj48L2k+XFxuICAgICAgICAgIDxpIG5nLXNob3c9XCIkY3RybC5zb3J0ZWRCeSA9PT0gY29sdW1uRGVmcy5uYW1lICYmICRjdHJsLnNvcnRBc2NlbmRpbmcgPT09IGZhbHNlXCIgY2xhc3M9XCJmYSBmYS1jYXJldC1kb3duXCI+PC9pPlxcbiAgICAgICAgPC90aD5cXG4gICAgICA8L3RyPlxcbiAgICA8L3RoZWFkPlxcbiAgICA8dGJvZHk+XFxuICAgICAgPHRyIG5nLXJlcGVhdD1cImF0dHJpYnV0ZXMgaW4gJGN0cmwuY29uZmlndXJhdGlvbi5kYXRhXCJcXG4gICAgICAgICAgbmctY2xhc3M9XCJbXFwncm93LVxcJyArICRjdHJsLmNvbmZpZ3VyYXRpb24uZ2V0Um93VWlkKGF0dHJpYnV0ZXMpLCAkY3RybC5jb25maWd1cmF0aW9uLmlzUm93U2VsZWN0ZWQoYXR0cmlidXRlcykgPyBcXCduZ2VvLWdyaWQtYWN0aXZlXFwnOiBcXCdcXCddXCJcXG4gICAgICAgICAgbmctY2xpY2s9XCIkY3RybC5jbGlja1JvdyhhdHRyaWJ1dGVzLCAkZXZlbnQpXCIgbmctbW91c2Vkb3duPVwiJGN0cmwucHJldmVudFRleHRTZWxlY3Rpb24oJGV2ZW50KVwiPlxcbiAgICAgICAgPHRkIG5nLXJlcGVhdD1cImNvbHVtbkRlZnMgaW4gJGN0cmwuY29uZmlndXJhdGlvbi5jb2x1bW5EZWZzXCIgbmctYmluZC1odG1sPVwiYXR0cmlidXRlc1tjb2x1bW5EZWZzLm5hbWVdIHwgcmVtb3ZlQ0RBVEEgfCBuZ2VvVHJ1c3RIdG1sQXV0b1wiPjwvdGQ+XFxuICAgICAgPC90cj5cXG4gICAgPC90Ym9keT5cXG4gIDwvdGFibGU+XFxuPC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsIkdyaWRDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGlzUGxhdGZvcm1Nb2RpZmllcktleU9ubHksIGlzU2hpZnRLZXlPbmx5IH0gZnJvbSAnbmdlby91dGlscy5qcyc7XG5pbXBvcnQgbmdlb01pc2NGaWx0ZXJzIGZyb20gJ25nZW8vbWlzYy9maWx0ZXJzLmpzJztcbmltcG9ydCB7IGdldFJvd1VpZCB9IGZyb20gJ25nZW8vZ3JpZC9Db25maWcuanMnO1xuaW1wb3J0ICdmbG9hdHRoZWFkJztcbmltcG9ydCAnYW5ndWxhci1mbG9hdC10aGVhZCc7XG5pbXBvcnQgJ25nZW8vc2Fzcy9mb250LnNjc3MnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9HcmlkJywgW25nZW9NaXNjRmlsdGVycy5uYW1lLCAnZmxvYXRUaGVhZCddKTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZ2VvL2dyaWQnLCByZXF1aXJlKCcuL2NvbXBvbmVudC5odG1sJykpO1xufV0pO1xubXlNb2R1bGUudmFsdWUoJ25nZW9HcmlkVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9ICRhdHRycy5uZ2VvR3JpZFRlbXBsYXRldXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ25nZW8vZ3JpZCc7XG59KTtcbm5nZW9HcmlkVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRhdHRyc1wiLCBcIm5nZW9HcmlkVGVtcGxhdGVVcmxcIl07XG5cbmZ1bmN0aW9uIG5nZW9HcmlkVGVtcGxhdGVVcmwoJGF0dHJzLCBuZ2VvR3JpZFRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBuZ2VvR3JpZFRlbXBsYXRlVXJsKCRhdHRycyk7XG59XG5cbnZhciBncmlkQ29tcG9uZW50ID0ge1xuICBjb250cm9sbGVyOiBHcmlkQ29udHJvbGxlcixcbiAgYmluZGluZ3M6IHtcbiAgICAnY29uZmlndXJhdGlvbic6ICc9bmdlb0dyaWRDb25maWd1cmF0aW9uJ1xuICB9LFxuICB0ZW1wbGF0ZVVybDogbmdlb0dyaWRUZW1wbGF0ZVVybFxufTtcbm15TW9kdWxlLmNvbXBvbmVudCgnbmdlb0dyaWQnLCBncmlkQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBHcmlkQ29udHJvbGxlcigkc2NvcGUpIHtcbiAgdGhpcy5zY29wZV8gPSAkc2NvcGU7XG4gIHRoaXMuY29uZmlndXJhdGlvbiA9IG51bGw7XG4gIHRoaXMuc2VsZWN0ZWRSb3dzID0ge307XG4gIHRoaXMuc29ydGVkQnkgPSAnJztcbiAgdGhpcy5zb3J0QXNjZW5kaW5nID0gdHJ1ZTtcbiAgdGhpcy5mbG9hdFRoZWFkQ29uZmlnID0ge1xuICAgIHNjcm9sbENvbnRhaW5lcjogZnVuY3Rpb24gc2Nyb2xsQ29udGFpbmVyKCR0YWJsZSkge1xuICAgICAgcmV0dXJuICR0YWJsZS5jbG9zZXN0KCcubmdlby1ncmlkLXRhYmxlLWNvbnRhaW5lcicpO1xuICAgIH1cbiAgfTtcbn1cblxuR3JpZENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5jb25maWd1cmF0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZ3VyYXRpb24nKTtcbiAgfVxuXG4gIHRoaXMuc2VsZWN0ZWRSb3dzID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdGVkUm93cztcbn07XG5cbkdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgaWYgKCF0aGlzLmNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29uZmlndXJhdGlvbicpO1xuICB9XG5cbiAgaWYgKCF0aGlzLmNvbmZpZ3VyYXRpb24uZGF0YSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uLmRhdGEnKTtcbiAgfVxuXG4gIHRoaXMuc29ydEFzY2VuZGluZyA9IHRoaXMuc29ydGVkQnkgPT09IGNvbHVtbk5hbWUgPyAhdGhpcy5zb3J0QXNjZW5kaW5nIDogdHJ1ZTtcbiAgdGhpcy5zb3J0ZWRCeSA9IGNvbHVtbk5hbWU7XG4gIHZhciBhc2MgPSB0aGlzLnNvcnRBc2NlbmRpbmcgPyAxIDogLTE7XG4gIHRoaXMuY29uZmlndXJhdGlvbi5kYXRhLnNvcnQoZnVuY3Rpb24gKGF0dHJpYnV0ZXMxLCBhdHRyaWJ1dGVzMikge1xuICAgIGlmICghYXR0cmlidXRlczFbY29sdW1uTmFtZV0pIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGlmICghYXR0cmlidXRlczJbY29sdW1uTmFtZV0pIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRlczFbY29sdW1uTmFtZV0gPiBhdHRyaWJ1dGVzMltjb2x1bW5OYW1lXSA/IGFzYyA6IC1hc2M7XG4gIH0pO1xufTtcblxuR3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNsaWNrUm93ID0gZnVuY3Rpb24gKGF0dHJpYnV0ZXMsIGV2ZW50KSB7XG4gIHZhciBzaGlmdEtleSA9IGlzU2hpZnRLZXlPbmx5KGV2ZW50KTtcbiAgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXkgPSBpc1BsYXRmb3JtTW9kaWZpZXJLZXlPbmx5KGV2ZW50KTtcbiAgdGhpcy5jbGlja1Jvd18oYXR0cmlidXRlcywgc2hpZnRLZXksIHBsYXRmb3JtTW9kaWZpZXJLZXkpO1xufTtcblxuR3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNsaWNrUm93XyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzLCBzaGlmdEtleSwgcGxhdGZvcm1Nb2RpZmllcktleSkge1xuICBpZiAoIXRoaXMuY29uZmlndXJhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uJyk7XG4gIH1cblxuICBpZiAoc2hpZnRLZXkgJiYgIXBsYXRmb3JtTW9kaWZpZXJLZXkpIHtcbiAgICB0aGlzLnNlbGVjdFJhbmdlXyhhdHRyaWJ1dGVzKTtcbiAgfSBlbHNlIGlmICghc2hpZnRLZXkgJiYgcGxhdGZvcm1Nb2RpZmllcktleSkge1xuICAgIHRoaXMuY29uZmlndXJhdGlvbi50b2dnbGVSb3coYXR0cmlidXRlcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGlzU2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uaXNSb3dTZWxlY3RlZChhdHRyaWJ1dGVzKTtcbiAgICB0aGlzLmNvbmZpZ3VyYXRpb24udW5zZWxlY3RBbGwoKTtcblxuICAgIGlmICghaXNTZWxlY3RlZCkge1xuICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdFJvdyhhdHRyaWJ1dGVzKTtcbiAgICB9XG4gIH1cbn07XG5cbkdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5zZWxlY3RSYW5nZV8gPSBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICBpZiAoIXRoaXMuY29uZmlndXJhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uJyk7XG4gIH1cblxuICBpZiAoIXRoaXMuY29uZmlndXJhdGlvbi5kYXRhKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZ3VyYXRpb24uZGF0YScpO1xuICB9XG5cbiAgdmFyIHRhcmdldFVpZCA9IGdldFJvd1VpZChhdHRyaWJ1dGVzKTtcbiAgdmFyIGRhdGEgPSB0aGlzLmNvbmZpZ3VyYXRpb24uZGF0YTtcblxuICBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzUm93U2VsZWN0ZWQoYXR0cmlidXRlcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcG9zQ2xpY2tlZFJvdyA9IDA7XG4gIHZhciBwb3NTZWxlY3RlZFJvd3MgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY3VycmVudFJvdyA9IGRhdGFbaV07XG4gICAgdmFyIGN1cnJlbnRVaWQgPSBnZXRSb3dVaWQoY3VycmVudFJvdyk7XG5cbiAgICBpZiAodGFyZ2V0VWlkID09PSBjdXJyZW50VWlkKSB7XG4gICAgICBwb3NDbGlja2VkUm93ID0gaTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc1Jvd1NlbGVjdGVkKGN1cnJlbnRSb3cpKSB7XG4gICAgICBwb3NTZWxlY3RlZFJvd3MucHVzaChpKTtcbiAgICB9XG4gIH1cblxuICBpZiAocG9zU2VsZWN0ZWRSb3dzLmxlbmd0aCA9PSAwKSB7XG4gICAgdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdFJvdyhhdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIHZhciBkaXN0YW5jZSA9IEluZmluaXR5O1xuICB2YXIgcG9zQ2xvc2VzdFJvdyA9IHBvc1NlbGVjdGVkUm93c1swXTtcblxuICBmb3IgKHZhciBfaSA9IDAsIF9wb3NTZWxlY3RlZFJvd3MgPSBwb3NTZWxlY3RlZFJvd3M7IF9pIDwgX3Bvc1NlbGVjdGVkUm93cy5sZW5ndGg7IF9pKyspIHtcbiAgICB2YXIgcG9zU2VsZWN0ZWRSb3cgPSBfcG9zU2VsZWN0ZWRSb3dzW19pXTtcbiAgICB2YXIgY3VycmVudFBvcyA9IHBvc1NlbGVjdGVkUm93O1xuICAgIHZhciBjdXJyZW50RGlzdGFuY2UgPSBNYXRoLmFicyhjdXJyZW50UG9zIC0gcG9zQ2xpY2tlZFJvdyk7XG5cbiAgICBpZiAoZGlzdGFuY2UgPiBjdXJyZW50RGlzdGFuY2UpIHtcbiAgICAgIGRpc3RhbmNlID0gY3VycmVudERpc3RhbmNlO1xuICAgICAgcG9zQ2xvc2VzdFJvdyA9IGN1cnJlbnRQb3M7XG4gICAgfVxuICB9XG5cbiAgdmFyIHJhbmdlU3RhcnQgPSBwb3NDbGlja2VkUm93IDwgcG9zQ2xvc2VzdFJvdyA/IHBvc0NsaWNrZWRSb3cgOiBwb3NDbG9zZXN0Um93O1xuICB2YXIgcmFuZ2VFbmQgPSBwb3NDbGlja2VkUm93ID4gcG9zQ2xvc2VzdFJvdyA/IHBvc0NsaWNrZWRSb3cgOiBwb3NDbG9zZXN0Um93O1xuXG4gIGZvciAodmFyIGwgPSByYW5nZVN0YXJ0OyBsIDw9IHJhbmdlRW5kOyBsKyspIHtcbiAgICB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0Um93KGRhdGFbbF0pO1xuICB9XG59O1xuXG5HcmlkQ29udHJvbGxlci5wcm90b3R5cGUucHJldmVudFRleHRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIHNoaWZ0S2V5ID0gaXNTaGlmdEtleU9ubHkoZXZlbnQpO1xuICB2YXIgcGxhdGZvcm1Nb2RpZmllcktleSA9IGlzUGxhdGZvcm1Nb2RpZmllcktleU9ubHkoZXZlbnQpO1xuXG4gIGlmIChzaGlmdEtleSB8fCBwbGF0Zm9ybU1vZGlmaWVyS2V5KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxufTtcblxubXlNb2R1bGUuY29udHJvbGxlcignbmdlb0dyaWRDb250cm9sbGVyJywgR3JpZENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCIgZGF0YS1wcmVmaXg9XFxcImZhc1xcXCIgZGF0YS1pY29uPVxcXCJzb3J0XFxcIiBjbGFzcz1cXFwic3ZnLWlubGluZS0tZmEgZmEtc29ydCBmYS13LTEwXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIHdpZHRoPVxcXCIxZW1cXFwiIGhlaWdodD1cXFwiMWVtXFxcIj48cGF0aCBkPVxcXCJNOS4yODYgMTIuNzgzVjMuMjE3YzAtLjg2IDEuMDQxLTEuMjkgMS42NDgtLjY4M2w0Ljc4MyA0Ljc4M2EuOTYuOTYgMCAwMTAgMS4zNjJsLTQuNzgzIDQuNzg3Yy0uNjA3LjYwNy0xLjY0OC4xNzctMS42NDgtLjY4M3pNNS4wNjYgMi41MzRMLjI4MyA3LjMxN2EuOTYuOTYgMCAwMDAgMS4zNjJsNC43ODMgNC43ODdjLjYwNy42MDcgMS42NDguMTc3IDEuNjQ4LS42ODNWMy4yMTdjMC0uODYtMS4wNDEtMS4yOS0xLjY0OC0uNjgzelxcXCIgZmlsbD1cXFwiY3VycmVudENvbG9yXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBkYXRhLXByZWZpeD1cXFwiZmFzXFxcIiBkYXRhLWljb249XFxcInNvcnRcXFwiIGNsYXNzPVxcXCJzdmctaW5saW5lLS1mYSBmYS1zb3J0IGZhLXctMTBcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCIgd2lkdGg9XFxcIjFlbVxcXCIgaGVpZ2h0PVxcXCIxZW1cXFwiPjxwYXRoIGQ9XFxcIk05LjI4NiAxMi43ODNWMy4yMTdjMC0uODYgMS4wNDEtMS4yOSAxLjY0OC0uNjgzbDQuNzgzIDQuNzgzYS45Ni45NiAwIDAxMCAxLjM2MmwtNC43ODMgNC43ODdjLS42MDcuNjA3LTEuNjQ4LjE3Ny0xLjY0OC0uNjgzek01LjA2NiAyLjUzNEwuMjgzIDcuMzE3YS45Ni45NiAwIDAwMCAxLjM2Mmw0Ljc4MyA0Ljc4N2MuNjA3LjYwNyAxLjY0OC4xNzcgMS42NDgtLjY4M1YzLjIxN2MwLS44Ni0xLjA0MS0xLjI5LTEuNjQ4LS42ODN6XFxcIiBmaWxsPVxcXCJjdXJyZW50Q29sb3JcXFwiPjwvcGF0aD48L3N2Zz5cIiIsImZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IHsgZ2V0RGVmYXVsdERyYXdTdHlsZUZ1bmN0aW9uIH0gZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9jb21tb24uanMnO1xuaW1wb3J0IG5nZW9DdXN0b21FdmVudCBmcm9tICduZ2VvL0N1c3RvbUV2ZW50LmpzJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnb2wvZnVuY3Rpb25zLmpzJztcbmltcG9ydCBvbEdlb21DaXJjbGUgZnJvbSAnb2wvZ2VvbS9DaXJjbGUuanMnO1xuaW1wb3J0IG9sR2VvbUdlb21ldHJ5Q29sbGVjdGlvbiBmcm9tICdvbC9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgb2xHZW9tTGluZVN0cmluZyBmcm9tICdvbC9nZW9tL0xpbmVTdHJpbmcuanMnO1xuaW1wb3J0IG9sR2VvbVBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQuanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25Qb2ludGVyIGZyb20gJ29sL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuaW1wb3J0IG9sTGF5ZXJWZWN0b3IgZnJvbSAnb2wvbGF5ZXIvVmVjdG9yLmpzJztcbmltcG9ydCBWZWN0b3JTb3VyY2UgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5cbnZhciBEcmF3QXppbXV0ID0gZnVuY3Rpb24gKF9vbEludGVyYWN0aW9uUG9pbnRlcikge1xuICBfaW5oZXJpdHNMb29zZShEcmF3QXppbXV0LCBfb2xJbnRlcmFjdGlvblBvaW50ZXIpO1xuXG4gIGZ1bmN0aW9uIERyYXdBemltdXQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25Qb2ludGVyLmNhbGwodGhpcywge1xuICAgICAgdHlwZTogJydcbiAgICB9KSB8fCB0aGlzO1xuICAgIF90aGlzLnNob3VsZFN0b3BFdmVudCA9IEZBTFNFO1xuICAgIF90aGlzLmRvd25QeF8gPSBbXTtcbiAgICBfdGhpcy5zb3VyY2VfID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgX3RoaXMuc3RhcnRlZF8gPSBmYWxzZTtcbiAgICBfdGhpcy5za2V0Y2hGZWF0dXJlXyA9IG5ldyBGZWF0dXJlKCk7XG4gICAgX3RoaXMuc2tldGNoUG9pbnRfID0gbmV3IEZlYXR1cmUoKTtcbiAgICBfdGhpcy5zcXVhcmVkQ2xpY2tUb2xlcmFuY2VfID0gNDtcbiAgICBfdGhpcy5za2V0Y2hMYXllcl8gPSBuZXcgb2xMYXllclZlY3Rvcih7XG4gICAgICBzb3VyY2U6IG5ldyBWZWN0b3JTb3VyY2Uoe1xuICAgICAgICB1c2VTcGF0aWFsSW5kZXg6IGZhbHNlLFxuICAgICAgICB3cmFwWDogZmFsc2VcbiAgICAgIH0pLFxuICAgICAgc3R5bGU6IG9wdGlvbnMuc3R5bGUgfHwgZ2V0RGVmYXVsdERyYXdTdHlsZUZ1bmN0aW9uKClcbiAgICB9KTtcbiAgICBsaXN0ZW4oX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICdjaGFuZ2U6YWN0aXZlJywgX3RoaXMudXBkYXRlU3RhdGVfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERyYXdBemltdXQucHJvdG90eXBlO1xuXG4gIF9wcm90by5oYW5kbGVQb2ludGVyTW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVQb2ludGVyTW92ZV8oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zdGFydGVkXykge1xuICAgICAgdGhpcy5tb2RpZnlEcmF3aW5nXyhldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3JlYXRlT3JVcGRhdGVTa2V0Y2hQb2ludF8oZXZlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVPclVwZGF0ZVNrZXRjaFBvaW50XyA9IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlU2tldGNoUG9pbnRfKGV2ZW50KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZXZlbnQuY29vcmRpbmF0ZS5zbGljZSgpO1xuICAgIHZhciBza2V0Y2hQb2ludEdlb20gPSB0aGlzLnNrZXRjaFBvaW50Xy5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCFza2V0Y2hQb2ludEdlb20pIHtcbiAgICAgIHRoaXMuc2tldGNoUG9pbnRfID0gbmV3IEZlYXR1cmUobmV3IG9sR2VvbVBvaW50KGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBza2V0Y2hQb2ludEdlb20uc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU2tldGNoRmVhdHVyZXNfID0gZnVuY3Rpb24gdXBkYXRlU2tldGNoRmVhdHVyZXNfKCkge1xuICAgIHZhciBza2V0Y2hGZWF0dXJlcyA9IFtdO1xuICAgIHNrZXRjaEZlYXR1cmVzLnB1c2godGhpcy5za2V0Y2hGZWF0dXJlXyk7XG4gICAgc2tldGNoRmVhdHVyZXMucHVzaCh0aGlzLnNrZXRjaFBvaW50Xyk7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuc2tldGNoTGF5ZXJfLmdldFNvdXJjZSgpO1xuICAgIHNvdXJjZS5jbGVhcih0cnVlKTtcbiAgICBzb3VyY2UuYWRkRmVhdHVyZXMoc2tldGNoRmVhdHVyZXMpO1xuICB9O1xuXG4gIF9wcm90by5zdGFydERyYXdpbmdfID0gZnVuY3Rpb24gc3RhcnREcmF3aW5nXyhldmVudCkge1xuICAgIHZhciBzdGFydCA9IGV2ZW50LmNvb3JkaW5hdGU7XG4gICAgdGhpcy5zdGFydGVkXyA9IHRydWU7XG4gICAgdmFyIGxpbmUgPSBuZXcgb2xHZW9tTGluZVN0cmluZyhbc3RhcnQuc2xpY2UoKSwgc3RhcnQuc2xpY2UoKV0pO1xuICAgIHZhciBjaXJjbGUgPSBuZXcgb2xHZW9tQ2lyY2xlKHN0YXJ0LCAwKTtcbiAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgb2xHZW9tR2VvbWV0cnlDb2xsZWN0aW9uKFtsaW5lLCBjaXJjbGVdKTtcbiAgICB0aGlzLnNrZXRjaEZlYXR1cmVfID0gbmV3IEZlYXR1cmUoKTtcbiAgICB0aGlzLnNrZXRjaEZlYXR1cmVfLnNldEdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuICAgIHZhciBldnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdkcmF3c3RhcnQnLCB7XG4gICAgICBmZWF0dXJlOiB0aGlzLnNrZXRjaEZlYXR1cmVfXG4gICAgfSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gIH07XG5cbiAgX3Byb3RvLm1vZGlmeURyYXdpbmdfID0gZnVuY3Rpb24gbW9kaWZ5RHJhd2luZ18oZXZlbnQpIHtcbiAgICB2YXIgY29vcmRpbmF0ZSA9IGV2ZW50LmNvb3JkaW5hdGU7XG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5za2V0Y2hGZWF0dXJlXy5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCEoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21HZW9tZXRyeUNvbGxlY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbWV0cmllcyA9IGdlb21ldHJ5LmdldEdlb21ldHJpZXNBcnJheSgpO1xuICAgIHZhciBsaW5lID0gZ2VvbWV0cmllc1swXTtcblxuICAgIGlmIChsaW5lIGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gbGluZS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIHNrZXRjaFBvaW50R2VvbSA9IHRoaXMuc2tldGNoUG9pbnRfLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgIGlmIChza2V0Y2hQb2ludEdlb20gaW5zdGFuY2VvZiBvbEdlb21Qb2ludCkge1xuICAgICAgICBza2V0Y2hQb2ludEdlb20uc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZSk7XG4gICAgICAgIHZhciBsYXN0ID0gY29vcmRpbmF0ZXNbY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGxhc3RbMF0gPSBjb29yZGluYXRlWzBdO1xuICAgICAgICBsYXN0WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgICAgICAgY29uc29sZS5hc3NlcnQobGluZSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpO1xuICAgICAgICBsaW5lLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgdmFyIGNpcmNsZSA9IGdlb21ldHJpZXNbMV07XG5cbiAgICAgICAgaWYgKGNpcmNsZSBpbnN0YW5jZW9mIG9sR2VvbUNpcmNsZSkge1xuICAgICAgICAgIGNpcmNsZS5zZXRSYWRpdXMobGluZS5nZXRMZW5ndGgoKSk7XG4gICAgICAgICAgdGhpcy51cGRhdGVTa2V0Y2hGZWF0dXJlc18oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uYWJvcnREcmF3aW5nXyA9IGZ1bmN0aW9uIGFib3J0RHJhd2luZ18oKSB7XG4gICAgdGhpcy5zdGFydGVkXyA9IGZhbHNlO1xuICAgIHZhciBza2V0Y2hGZWF0dXJlID0gdGhpcy5za2V0Y2hGZWF0dXJlXztcbiAgICB0aGlzLnNrZXRjaEZlYXR1cmVfID0gbmV3IEZlYXR1cmUoKTtcbiAgICB0aGlzLnNrZXRjaFBvaW50XyA9IG5ldyBGZWF0dXJlKCk7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuc2tldGNoTGF5ZXJfLmdldFNvdXJjZSgpO1xuXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgVmVjdG9yU291cmNlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNvdXJjZScpO1xuICAgIH1cblxuICAgIHNvdXJjZS5jbGVhcih0cnVlKTtcbiAgICByZXR1cm4gc2tldGNoRmVhdHVyZTtcbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdGVfID0gZnVuY3Rpb24gdXBkYXRlU3RhdGVfKCkge1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHZhciBhY3RpdmUgPSB0aGlzLmdldEFjdGl2ZSgpO1xuXG4gICAgaWYgKG1hcCA9PT0gbnVsbCB8fCAhYWN0aXZlKSB7XG4gICAgICB0aGlzLmFib3J0RHJhd2luZ18oKTtcbiAgICB9XG5cbiAgICB0aGlzLnNrZXRjaExheWVyXy5zZXRNYXAoYWN0aXZlID8gbWFwIDogbnVsbCk7XG4gIH07XG5cbiAgX3Byb3RvLmZpbmlzaERyYXdpbmdfID0gZnVuY3Rpb24gZmluaXNoRHJhd2luZ18oKSB7XG4gICAgdmFyIHNrZXRjaEZlYXR1cmUgPSB0aGlzLmFib3J0RHJhd2luZ18oKTtcbiAgICB0aGlzLnNvdXJjZV8uYWRkRmVhdHVyZShza2V0Y2hGZWF0dXJlKTtcbiAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdkcmF3ZW5kJywge1xuICAgICAgZmVhdHVyZTogdGhpcy5za2V0Y2hGZWF0dXJlX1xuICAgIH0pO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH07XG5cbiAgX3Byb3RvLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcChtYXApIHtcbiAgICBvbEludGVyYWN0aW9uUG9pbnRlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICB0aGlzLnVwZGF0ZVN0YXRlXygpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEb3duRXZlbnQoZXZlbnQpIHtcbiAgICB0aGlzLmRvd25QeF8gPSBldmVudC5waXhlbDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZG93blB4Xykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRvd25QeCcpO1xuICAgIH1cblxuICAgIHZhciBkb3duUHggPSB0aGlzLmRvd25QeF87XG4gICAgdmFyIGNsaWNrUHggPSBldmVudC5waXhlbDtcbiAgICB2YXIgZHggPSBkb3duUHhbMF0gLSBjbGlja1B4WzBdO1xuICAgIHZhciBkeSA9IGRvd25QeFsxXSAtIGNsaWNrUHhbMV07XG4gICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IGR4ICogZHggKyBkeSAqIGR5O1xuICAgIHZhciBwYXNzID0gdHJ1ZTtcblxuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPD0gdGhpcy5zcXVhcmVkQ2xpY2tUb2xlcmFuY2VfKSB7XG4gICAgICB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXyhldmVudCk7XG5cbiAgICAgIGlmICghdGhpcy5zdGFydGVkXykge1xuICAgICAgICB0aGlzLnN0YXJ0RHJhd2luZ18oZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5maW5pc2hEcmF3aW5nXygpO1xuICAgICAgfVxuXG4gICAgICBwYXNzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhc3M7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBhc3MgPSB0cnVlO1xuXG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09PSAncG9pbnRlcm1vdmUnKSB7XG4gICAgICBwYXNzID0gdGhpcy5oYW5kbGVQb2ludGVyTW92ZV8obWFwQnJvd3NlckV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09PSAnZGJsY2xpY2snKSB7XG4gICAgICBwYXNzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9vbEludGVyYWN0aW9uUG9pbnRlci5wcm90b3R5cGUuaGFuZGxlRXZlbnQuY2FsbCh0aGlzLCBtYXBCcm93c2VyRXZlbnQpICYmIHBhc3M7XG4gIH07XG5cbiAgcmV0dXJuIERyYXdBemltdXQ7XG59KG9sSW50ZXJhY3Rpb25Qb2ludGVyKTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhd0F6aW11dDsiLCJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvQ3VzdG9tRXZlbnQgZnJvbSAnbmdlby9DdXN0b21FdmVudC5qcyc7XG5pbXBvcnQgeyByZW1vdmVDaGlsZHJlbiB9IGZyb20gJ29sL2RvbS5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBvbE92ZXJsYXkgZnJvbSAnb2wvT3ZlcmxheS5qcyc7XG5pbXBvcnQgeyBnZXRBcmVhLCBnZXREaXN0YW5jZSB9IGZyb20gJ29sL3NwaGVyZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbiBmcm9tICdvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU291cmNlVmVjdG9yIGZyb20gJ29sL3NvdXJjZS9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU3R5bGVGaWxsIGZyb20gJ29sL3N0eWxlL0ZpbGwuanMnO1xuaW1wb3J0IG9sU3R5bGVTdHJva2UgZnJvbSAnb2wvc3R5bGUvU3Ryb2tlLmpzJztcbmltcG9ydCBvbFN0eWxlU3R5bGUgZnJvbSAnb2wvc3R5bGUvU3R5bGUuanMnO1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yLmpzJztcblxudmFyIE1lYXN1cmUgPSBmdW5jdGlvbiAoX29sSW50ZXJhY3Rpb25JbnRlcmFjKSB7XG4gIF9pbmhlcml0c0xvb3NlKE1lYXN1cmUsIF9vbEludGVyYWN0aW9uSW50ZXJhYyk7XG5cbiAgZnVuY3Rpb24gTWVhc3VyZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25JbnRlcmFjLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50X1xuICAgIH0pIHx8IHRoaXM7XG4gICAgX3RoaXMuaGVscFRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgX3RoaXMuaGVscFRvb2x0aXBPdmVybGF5XyA9IG51bGw7XG4gICAgX3RoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgX3RoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5XyA9IG51bGw7XG4gICAgX3RoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5Q29vcmRfID0gbnVsbDtcbiAgICBfdGhpcy5za2V0Y2hGZWF0dXJlID0gbnVsbDtcbiAgICBfdGhpcy5jb250aW51ZU1zZyA9IG51bGw7XG4gICAgX3RoaXMuZGVjaW1hbHMgPSBvcHRpb25zLmRlY2ltYWxzO1xuICAgIF90aGlzLnByZWNpc2lvbiA9IG9wdGlvbnMucHJlY2lzaW9uO1xuICAgIF90aGlzLmRpc3BsYXlIZWxwVG9vbHRpcF8gPSBvcHRpb25zLmRpc3BsYXlIZWxwVG9vbHRpcCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXNwbGF5SGVscFRvb2x0aXAgOiB0cnVlO1xuICAgIHZhciBzdGFydE1zZztcblxuICAgIGlmIChvcHRpb25zLnN0YXJ0TXNnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHN0YXJ0TXNnID0gb3B0aW9ucy5zdGFydE1zZztcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBzdGFydE1zZy50ZXh0Q29udGVudCA9ICdDbGljayB0byBzdGFydCBkcmF3aW5nLic7XG4gICAgfVxuXG4gICAgX3RoaXMuc3RhcnRNc2cgPSBzdGFydE1zZztcbiAgICBfdGhpcy5jaGFuZ2VFdmVudEtleV8gPSBudWxsO1xuICAgIF90aGlzLnBvc3Rjb21wb3NlRXZlbnRLZXlfID0gbnVsbDtcbiAgICB2YXIgc3R5bGUgPSBvcHRpb25zLnN0eWxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0eWxlIDogW25ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiknXG4gICAgICB9KVxuICAgIH0pLCBuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgd2lkdGg6IDVcbiAgICAgIH0pXG4gICAgfSksIG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICAgIGNvbG9yOiAnI2ZmY2MzMycsXG4gICAgICAgIHdpZHRoOiAzXG4gICAgICB9KVxuICAgIH0pXTtcbiAgICBfdGhpcy52ZWN0b3JMYXllcl8gPSBvcHRpb25zLmxheWVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxheWVyIDogbmV3IG9sTGF5ZXJWZWN0b3Ioe1xuICAgICAgc291cmNlOiBuZXcgb2xTb3VyY2VWZWN0b3IoKSxcbiAgICAgIHN0eWxlOiBzdHlsZVxuICAgIH0pO1xuXG4gICAgdmFyIHNvdXJjZSA9IF90aGlzLnZlY3RvckxheWVyXy5nZXRTb3VyY2UoKTtcblxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIFZlY3RvclNvdXJjZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzb3VyY2UnKTtcbiAgICB9XG5cbiAgICB2YXIgZHJhd0ludGVyYWN0aW9uID0gX3RoaXMuY3JlYXRlRHJhd0ludGVyYWN0aW9uKG9wdGlvbnMuc2tldGNoU3R5bGUsIHNvdXJjZSk7XG5cbiAgICBpZiAoIWRyYXdJbnRlcmFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRyYXdJbnRlcmFjdGlvbicpO1xuICAgIH1cblxuICAgIF90aGlzLmRyYXdJbnRlcmFjdGlvbl8gPSBkcmF3SW50ZXJhY3Rpb247XG4gICAgX3RoaXMuc2hvdWxkSGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXyA9IHRydWU7XG4gICAgbGlzdGVuKF90aGlzLmRyYXdJbnRlcmFjdGlvbl8sICdjaGFuZ2U6YWN0aXZlJywgX3RoaXMuaGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIGxpc3RlbihfdGhpcy5kcmF3SW50ZXJhY3Rpb25fLCAnZHJhd3N0YXJ0JywgX3RoaXMub25EcmF3U3RhcnRfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgbGlzdGVuKF90aGlzLmRyYXdJbnRlcmFjdGlvbl8sICdkcmF3ZW5kJywgX3RoaXMub25EcmF3RW5kXywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIGxpc3RlbihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgJ2NoYW5nZTphY3RpdmUnLCBfdGhpcy51cGRhdGVTdGF0ZV8sIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTWVhc3VyZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmdldERyYXdJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGdldERyYXdJbnRlcmFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kcmF3SW50ZXJhY3Rpb25fO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIF9wcm90by5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAobWFwKSB7XG4gICAgb2xJbnRlcmFjdGlvbkludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuICAgIHRoaXMudmVjdG9yTGF5ZXJfLnNldE1hcChtYXApO1xuICAgIHZhciBwcmV2TWFwID0gdGhpcy5kcmF3SW50ZXJhY3Rpb25fLmdldE1hcCgpO1xuXG4gICAgaWYgKHByZXZNYXAgIT09IG51bGwpIHtcbiAgICAgIHByZXZNYXAucmVtb3ZlSW50ZXJhY3Rpb24odGhpcy5kcmF3SW50ZXJhY3Rpb25fKTtcbiAgICB9XG5cbiAgICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgICBtYXAuYWRkSW50ZXJhY3Rpb24odGhpcy5kcmF3SW50ZXJhY3Rpb25fKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLm9uRHJhd1N0YXJ0XyA9IGZ1bmN0aW9uIG9uRHJhd1N0YXJ0XyhldnQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBldmVudCA9IGV2dC5kZXRhaWwgPyBldnQuZGV0YWlsIDogZXZ0O1xuICAgIHRoaXMuc2tldGNoRmVhdHVyZSA9IGV2ZW50LmZlYXR1cmU7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMudmVjdG9yTGF5ZXJfLmdldFNvdXJjZSgpO1xuXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgVmVjdG9yU291cmNlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNvdXJjZScpO1xuICAgIH1cblxuICAgIHNvdXJjZS5jbGVhcih0cnVlKTtcbiAgICB0aGlzLmNyZWF0ZU1lYXN1cmVUb29sdGlwXygpO1xuXG4gICAgaWYgKCF0aGlzLnNrZXRjaEZlYXR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBza2V0Y2hGZWF0dXJlJyk7XG4gICAgfVxuXG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5za2V0Y2hGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB0aGlzLmNoYW5nZUV2ZW50S2V5XyA9IGxpc3RlbihnZW9tZXRyeSwgJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIF90aGlzMi5oYW5kbGVNZWFzdXJlKGZ1bmN0aW9uIChtZWFzdXJlLCBjb29yZCkge1xuICAgICAgICBpZiAoY29vcmQgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoIV90aGlzMi5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZVRvb2x0aXBFbGVtZW50Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMyLm1lYXN1cmVUb29sdGlwRWxlbWVudF8uaW5uZXJIVE1MID0gbWVhc3VyZTtcbiAgICAgICAgICBfdGhpczIubWVhc3VyZVRvb2x0aXBPdmVybGF5Q29vcmRfID0gY29vcmQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMucG9zdGNvbXBvc2VFdmVudEtleV8gPSBsaXN0ZW4odGhpcy5nZXRNYXAoKSwgJ3Bvc3Rjb21wb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzMi5tZWFzdXJlVG9vbHRpcE92ZXJsYXlfICYmIF90aGlzMi5tZWFzdXJlVG9vbHRpcE92ZXJsYXlDb29yZF8pIHtcbiAgICAgICAgX3RoaXMyLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8uc2V0UG9zaXRpb24oX3RoaXMyLm1lYXN1cmVUb29sdGlwT3ZlcmxheUNvb3JkXyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLm9uRHJhd0VuZF8gPSBmdW5jdGlvbiBvbkRyYXdFbmRfKGV2dCkge1xuICAgIGlmICghdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZVRvb2x0aXBFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlVG9vbHRpcE92ZXJsYXknKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNrZXRjaEZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8uY2xhc3NMaXN0LmFkZCgnbmdlby10b29sdGlwLXN0YXRpYycpO1xuICAgIHRoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5Xy5zZXRPZmZzZXQoWzAsIC03XSk7XG4gICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnbWVhc3VyZWVuZCcsIHtcbiAgICAgIGZlYXR1cmU6IHRoaXMuc2tldGNoRmVhdHVyZVxuICAgIH0pO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgdGhpcy5za2V0Y2hGZWF0dXJlID0gbnVsbDtcbiAgICB0aGlzLnVubGlzdGVuZXJFdmVudF8oKTtcbiAgfTtcblxuICBfcHJvdG8udW5saXN0ZW5lckV2ZW50XyA9IGZ1bmN0aW9uIHVubGlzdGVuZXJFdmVudF8oKSB7XG4gICAgaWYgKHRoaXMuY2hhbmdlRXZlbnRLZXlfICE9PSBudWxsICYmIHRoaXMucG9zdGNvbXBvc2VFdmVudEtleV8gIT09IG51bGwpIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5jaGFuZ2VFdmVudEtleV8pO1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnBvc3Rjb21wb3NlRXZlbnRLZXlfKTtcbiAgICAgIHRoaXMuY2hhbmdlRXZlbnRLZXlfID0gbnVsbDtcbiAgICAgIHRoaXMucG9zdGNvbXBvc2VFdmVudEtleV8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlSGVscFRvb2x0aXBfID0gZnVuY3Rpb24gY3JlYXRlSGVscFRvb2x0aXBfKCkge1xuICAgIHRoaXMucmVtb3ZlSGVscFRvb2x0aXBfKCk7XG5cbiAgICBpZiAodGhpcy5kaXNwbGF5SGVscFRvb2x0aXBfKSB7XG4gICAgICB0aGlzLmhlbHBUb29sdGlwRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoaXMuaGVscFRvb2x0aXBFbGVtZW50Xy5jbGFzc0xpc3QuYWRkKCd0b29sdGlwJyk7XG4gICAgICB0aGlzLmhlbHBUb29sdGlwT3ZlcmxheV8gPSBuZXcgb2xPdmVybGF5KHtcbiAgICAgICAgc3RvcEV2ZW50OiBmYWxzZSxcbiAgICAgICAgZWxlbWVudDogdGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfLFxuICAgICAgICBvZmZzZXQ6IFsxNSwgMF0sXG4gICAgICAgIHBvc2l0aW9uaW5nOiAnY2VudGVyLWxlZnQnXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZ2V0TWFwKCkuYWRkT3ZlcmxheSh0aGlzLmhlbHBUb29sdGlwT3ZlcmxheV8pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlSGVscFRvb2x0aXBfID0gZnVuY3Rpb24gcmVtb3ZlSGVscFRvb2x0aXBfKCkge1xuICAgIGlmICh0aGlzLmRpc3BsYXlIZWxwVG9vbHRpcF8pIHtcbiAgICAgIGlmICh0aGlzLmhlbHBUb29sdGlwT3ZlcmxheV8gIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5nZXRNYXAoKS5yZW1vdmVPdmVybGF5KHRoaXMuaGVscFRvb2x0aXBPdmVybGF5Xyk7XG4gICAgICAgIHRoaXMuaGVscFRvb2x0aXBPdmVybGF5XyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhlbHBUb29sdGlwRWxlbWVudF8gIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVscFRvb2x0aXBFbGVtZW50Xy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgdGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGVscFRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5jcmVhdGVNZWFzdXJlVG9vbHRpcF8gPSBmdW5jdGlvbiBjcmVhdGVNZWFzdXJlVG9vbHRpcF8oKSB7XG4gICAgdGhpcy5yZW1vdmVNZWFzdXJlVG9vbHRpcF8oKTtcbiAgICB0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8uY2xhc3NMaXN0LmFkZCgndG9vbHRpcCcpO1xuICAgIHRoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50Xy5jbGFzc0xpc3QuYWRkKCduZ2VvLXRvb2x0aXAtbWVhc3VyZScpO1xuICAgIHRoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5XyA9IG5ldyBvbE92ZXJsYXkoe1xuICAgICAgZWxlbWVudDogdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfLFxuICAgICAgb2Zmc2V0OiBbMCwgLTE1XSxcbiAgICAgIHBvc2l0aW9uaW5nOiAnYm90dG9tLWNlbnRlcicsXG4gICAgICBzdG9wRXZlbnQ6IGZhbHNlXG4gICAgfSk7XG4gICAgdGhpcy5nZXRNYXAoKS5hZGRPdmVybGF5KHRoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5Xyk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZU1lYXN1cmVUb29sdGlwXyA9IGZ1bmN0aW9uIHJlbW92ZU1lYXN1cmVUb29sdGlwXygpIHtcbiAgICBpZiAodGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfICE9PSBudWxsKSB7XG4gICAgICBpZiAoIXRoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50Xy5wYXJlbnROb2RlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlVG9vbHRpcEVsZW1lbnRfLnBhcmVudE5vZGUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfKTtcbiAgICAgIHRoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgICB0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8gPSBudWxsO1xuICAgICAgdGhpcy5tZWFzdXJlVG9vbHRpcE92ZXJsYXlDb29yZF8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdGVfID0gZnVuY3Rpb24gdXBkYXRlU3RhdGVfKGV2dCkge1xuICAgIHZhciBhY3RpdmUgPSB0aGlzLmdldEFjdGl2ZSgpO1xuICAgIHRoaXMuc2hvdWxkSGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXyA9IGZhbHNlO1xuICAgIHRoaXMuZHJhd0ludGVyYWN0aW9uXy5zZXRBY3RpdmUoYWN0aXZlKTtcbiAgICB0aGlzLnNob3VsZEhhbmRsZURyYXdJbnRlcmFjdGlvbkFjdGl2ZUNoYW5nZV8gPSB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLmdldE1hcCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8pIHtcbiAgICAgICAgdGhpcy5jcmVhdGVNZWFzdXJlVG9vbHRpcF8oKTtcbiAgICAgICAgdGhpcy5jcmVhdGVIZWxwVG9vbHRpcF8oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1lYXN1cmVUb29sdGlwT3ZlcmxheScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlID0gdGhpcy52ZWN0b3JMYXllcl8uZ2V0U291cmNlKCk7XG5cbiAgICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIFZlY3RvclNvdXJjZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1lYXN1cmVUb29sdGlwT3ZlcmxheScpO1xuICAgICAgfVxuXG4gICAgICBzb3VyY2UuY2xlYXIodHJ1ZSk7XG4gICAgICB0aGlzLmdldE1hcCgpLnJlbW92ZU92ZXJsYXkodGhpcy5tZWFzdXJlVG9vbHRpcE92ZXJsYXlfKTtcbiAgICAgIHRoaXMucmVtb3ZlTWVhc3VyZVRvb2x0aXBfKCk7XG4gICAgICB0aGlzLnJlbW92ZUhlbHBUb29sdGlwXygpO1xuICAgICAgdGhpcy51bmxpc3RlbmVyRXZlbnRfKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNZWFzdXJlID0gZnVuY3Rpb24gaGFuZGxlTWVhc3VyZShjYWxsYmFjaykge307XG5cbiAgX3Byb3RvLmdldFRvb2x0aXBFbGVtZW50ID0gZnVuY3Rpb24gZ2V0VG9vbHRpcEVsZW1lbnQoKSB7XG4gICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlVG9vbHRpcEVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEcmF3SW50ZXJhY3Rpb25BY3RpdmVDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXyhldnQpIHtcbiAgICBpZiAodGhpcy5zaG91bGRIYW5kbGVEcmF3SW50ZXJhY3Rpb25BY3RpdmVDaGFuZ2VfKSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZSh0aGlzLmRyYXdJbnRlcmFjdGlvbl8uZ2V0QWN0aXZlKCkpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTWVhc3VyZTtcbn0ob2xJbnRlcmFjdGlvbkludGVyYWN0aW9uKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZEFyZWEocG9seWdvbiwgcHJvamVjdGlvbiwgcHJlY2lzaW9uLCBmb3JtYXQsIHNwaGVyaWNhbCkge1xuICBpZiAoc3BoZXJpY2FsID09PSB2b2lkIDApIHtcbiAgICBzcGhlcmljYWwgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBhcmVhO1xuXG4gIGlmIChzcGhlcmljYWwpIHtcbiAgICB2YXIgZ2VvbSA9IHBvbHlnb24uY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIGFyZWEgPSBNYXRoLmFicyhnZXRBcmVhKGdlb20sIHtcbiAgICAgICdwcm9qZWN0aW9uJzogJ0VQU0c6NDMyNidcbiAgICB9KSk7XG4gIH0gZWxzZSB7XG4gICAgYXJlYSA9IHBvbHlnb24uZ2V0QXJlYSgpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdChhcmVhLCAnbcKyJywgJ3NxdWFyZScsIHByZWNpc2lvbik7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkQ2lyY2xlQXJlYShjaXJjbGUsIHByZWNpc2lvbiwgZm9ybWF0KSB7XG4gIHZhciBhcmVhID0gTWF0aC5QSSAqIE1hdGgucG93KGNpcmNsZS5nZXRSYWRpdXMoKSwgMik7XG4gIHJldHVybiBmb3JtYXQoYXJlYSwgJ23CsicsICdzcXVhcmUnLCBwcmVjaXNpb24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZExlbmd0aChsaW5lU3RyaW5nLCBwcm9qZWN0aW9uLCBwcmVjaXNpb24sIGZvcm1hdCwgc3BoZXJpY2FsKSB7XG4gIGlmIChzcGhlcmljYWwgPT09IHZvaWQgMCkge1xuICAgIHNwaGVyaWNhbCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGxlbmd0aCA9IDA7XG5cbiAgaWYgKHNwaGVyaWNhbCkge1xuICAgIHZhciBjb29yZGluYXRlcyA9IGxpbmVTdHJpbmcuZ2V0Q29vcmRpbmF0ZXMoKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgYzEgPSB0cmFuc2Zvcm0oY29vcmRpbmF0ZXNbaV0sIHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICAgIHZhciBjMiA9IHRyYW5zZm9ybShjb29yZGluYXRlc1tpICsgMV0sIHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICAgIGxlbmd0aCArPSBnZXREaXN0YW5jZShjMSwgYzIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBsaW5lU3RyaW5nLmdldExlbmd0aCgpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdChsZW5ndGgsICdtJywgJ3VuaXQnLCBwcmVjaXNpb24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFBvaW50KHBvaW50LCBkZWNpbWFscywgZm9ybWF0LCBvcHRfdGVtcGxhdGUpIHtcbiAgcmV0dXJuIGZvcm1hdChwb2ludC5nZXRDb29yZGluYXRlcygpLCBkZWNpbWFscywgb3B0X3RlbXBsYXRlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFdmVudF8oZXZ0KSB7XG4gIGlmIChldnQudHlwZSAhPSAncG9pbnRlcm1vdmUnIHx8IGV2dC5kcmFnZ2luZykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgdmFyIGhlbHBNc2cgPSB0aGlzLnNrZXRjaEZlYXR1cmUgPT09IG51bGwgPyB0aGlzLnN0YXJ0TXNnIDogdGhpcy5jb250aW51ZU1zZztcblxuICBpZiAodGhpcy5kaXNwbGF5SGVscFRvb2x0aXBfICYmIGhlbHBNc2cpIHtcbiAgICBpZiAoIXRoaXMuaGVscFRvb2x0aXBFbGVtZW50Xykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGhlbHBUb29sdGlwRWxlbWVudCcpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oZWxwVG9vbHRpcE92ZXJsYXlfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgaGVscFRvb2x0aXBPdmVybGF5Jyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfKTtcbiAgICB0aGlzLmhlbHBUb29sdGlwRWxlbWVudF8uYXBwZW5kQ2hpbGQoaGVscE1zZyk7XG4gICAgdGhpcy5oZWxwVG9vbHRpcE92ZXJsYXlfLnNldFBvc2l0aW9uKGV2dC5jb29yZGluYXRlKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGRlZmF1bHQgTWVhc3VyZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUsIHsgZ2V0Rm9ybWF0dGVkQXJlYSB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZS5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvbkRyYXcgZnJvbSAnb2wvaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX25nZW9JbnRlcmFjdGlvbk1lYXN1KSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0ludGVyYWN0aW9uTWVhc3UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KGZvcm1hdCwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfbmdlb0ludGVyYWN0aW9uTWVhc3UuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIHZhciBjb250aW51ZU1zZztcblxuICAgIGlmIChvcHRpb25zLmNvbnRpbnVlTXNnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlTXNnID0gb3B0aW9ucy5jb250aW51ZU1zZztcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGludWVNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb250aW51ZU1zZy50ZXh0Q29udGVudCA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnQ2xpY2sgdG8gY29udGludWUgZHJhd2luZyB0aGUgcG9seWdvbi4nKTtcbiAgICAgIHZhciBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7XG4gICAgICBici50ZXh0Q29udGVudCA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnRG91YmxlLWNsaWNrIG9yIGNsaWNrIHN0YXJ0aW5nIHBvaW50IHRvIGZpbmlzaC4nKTtcbiAgICAgIGNvbnRpbnVlTXNnLmFwcGVuZENoaWxkKGJyKTtcbiAgICB9XG5cbiAgICBfdGhpcy5jb250aW51ZU1zZyA9IGNvbnRpbnVlTXNnO1xuICAgIF90aGlzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHJldHVybiBuZXcgb2xJbnRlcmFjdGlvbkRyYXcoe1xuICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICBzdHlsZTogc3R5bGVcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWVhc3VyZSA9IGZ1bmN0aW9uIGhhbmRsZU1lYXN1cmUoY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNrZXRjaEZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbSA9IHRoaXMuc2tldGNoRmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCEoZ2VvbSBpbnN0YW5jZW9mIFBvbHlnb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvaiA9IHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zb2xlLmFzc2VydChwcm9qKTtcbiAgICB2YXIgb3V0cHV0ID0gZ2V0Rm9ybWF0dGVkQXJlYShnZW9tLCBwcm9qLCB0aGlzLnByZWNpc2lvbiwgdGhpcy5mb3JtYXQpO1xuICAgIHZhciB2ZXJ0aWNlc0NvdW50ID0gZ2VvbS5nZXRDb29yZGluYXRlcygpWzBdLmxlbmd0aDtcbiAgICB2YXIgY29vcmQgPSBudWxsO1xuXG4gICAgaWYgKHZlcnRpY2VzQ291bnQgPiAzKSB7XG4gICAgICBjb29yZCA9IGdlb20uZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgfVxuXG4gICAgY2FsbGJhY2sob3V0cHV0LCBjb29yZCk7XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZUFyZWEgZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9NZWFzdXJlQXJlYS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTW9iaWxlRHJhdyBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01vYmlsZURyYXcuanMnO1xuXG52YXIgTWVhc3VyZUFyZWFNb2JpbGUgPSBmdW5jdGlvbiAoX25nZW9JbnRlcmFjdGlvbk1lYXN1KSB7XG4gIF9pbmhlcml0c0xvb3NlKE1lYXN1cmVBcmVhTW9iaWxlLCBfbmdlb0ludGVyYWN0aW9uTWVhc3UpO1xuXG4gIGZ1bmN0aW9uIE1lYXN1cmVBcmVhTW9iaWxlKGZvcm1hdCwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7XG4gICAgICBkaXNwbGF5SGVscFRvb2x0aXA6IGZhbHNlXG4gICAgfSk7XG4gICAgcmV0dXJuIF9uZ2VvSW50ZXJhY3Rpb25NZWFzdS5jYWxsKHRoaXMsIGZvcm1hdCwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTWVhc3VyZUFyZWFNb2JpbGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHJldHVybiBuZXcgbmdlb0ludGVyYWN0aW9uTW9iaWxlRHJhdyh7XG4gICAgICB0eXBlOiAnUG9seWdvbicsXG4gICAgICBzdHlsZTogc3R5bGVcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gTWVhc3VyZUFyZWFNb2JpbGU7XG59KG5nZW9JbnRlcmFjdGlvbk1lYXN1cmVBcmVhKTtcblxuZXhwb3J0IGRlZmF1bHQgTWVhc3VyZUFyZWFNb2JpbGU7IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25EcmF3QXppbXV0IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vRHJhd0F6aW11dC5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZSwgeyBnZXRGb3JtYXR0ZWRMZW5ndGggfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmUuanMnO1xuaW1wb3J0IExpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nLmpzJztcbmltcG9ydCBHZW9tZXRyeUNvbGxlY3Rpb24gZnJvbSAnb2wvZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX25nZW9JbnRlcmFjdGlvbk1lYXN1KSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0ludGVyYWN0aW9uTWVhc3UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KHVuaXRQcmVmaXhGb3JtYXQsIG51bWJlckZvcm1hdCwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9uZ2VvSW50ZXJhY3Rpb25NZWFzdS5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgdmFyIGNvbnRpbnVlTXNnO1xuXG4gICAgaWYgKG9wdGlvbnMuY29udGludWVNc2cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29udGludWVNc2cgPSBvcHRpb25zLmNvbnRpbnVlTXNnO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250aW51ZU1zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGNvbnRpbnVlTXNnLnRleHRDb250ZW50ID0gJ0NsaWNrIHRvIGZpbmlzaC4nO1xuICAgIH1cblxuICAgIF90aGlzLmNvbnRpbnVlTXNnID0gY29udGludWVNc2c7XG4gICAgX3RoaXMubnVtYmVyRm9ybWF0ID0gbnVtYmVyRm9ybWF0O1xuICAgIF90aGlzLnVuaXRQcmVmaXhGb3JtYXQgPSB1bml0UHJlZml4Rm9ybWF0O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZURyYXdJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZURyYXdJbnRlcmFjdGlvbihzdHlsZSwgc291cmNlKSB7XG4gICAgcmV0dXJuIG5ldyBuZ2VvSW50ZXJhY3Rpb25EcmF3QXppbXV0KHtcbiAgICAgIHNvdXJjZTogc291cmNlLFxuICAgICAgc3R5bGU6IHN0eWxlXG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZU1lYXN1cmUgPSBmdW5jdGlvbiBoYW5kbGVNZWFzdXJlKGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLnNrZXRjaEZlYXR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBza2V0Y2hGZWF0dXJlJyk7XG4gICAgfVxuXG4gICAgdmFyIGdlb20gPSB0aGlzLnNrZXRjaEZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgIGlmICghKGdlb20gaW5zdGFuY2VvZiBHZW9tZXRyeUNvbGxlY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB2YXIgbGluZSA9IGdlb20uZ2V0R2VvbWV0cmllcygpWzBdO1xuXG4gICAgaWYgKCEobGluZSBpbnN0YW5jZW9mIExpbmVTdHJpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbGluZScpO1xuICAgIH1cblxuICAgIHZhciBvdXRwdXQgPSBnZXRGb3JtYXR0ZWRBemltdXRSYWRpdXMobGluZSwgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLCB0aGlzLmRlY2ltYWxzLCB0aGlzLnByZWNpc2lvbiwgdGhpcy51bml0UHJlZml4Rm9ybWF0LCB0aGlzLm51bWJlckZvcm1hdCk7XG4gICAgY2FsbGJhY2sob3V0cHV0LCBsaW5lLmdldExhc3RDb29yZGluYXRlKCkpO1xuICB9O1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0obmdlb0ludGVyYWN0aW9uTWVhc3VyZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRBemltdXQobGluZSkge1xuICB2YXIgY29vcmRzID0gbGluZS5nZXRDb29yZGluYXRlcygpO1xuICB2YXIgZHggPSBjb29yZHNbMV1bMF0gLSBjb29yZHNbMF1bMF07XG4gIHZhciBkeSA9IGNvb3Jkc1sxXVsxXSAtIGNvb3Jkc1swXVsxXTtcbiAgdmFyIHJhZCA9IE1hdGguYWNvcyhkeSAvIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkpO1xuICB2YXIgZmFjdG9yID0gZHggPiAwID8gMSA6IC0xO1xuICByZXR1cm4gZmFjdG9yICogcmFkICogMTgwIC8gTWF0aC5QSSAlIDM2MDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRBemltdXQobGluZSwgZGVjaW1hbHMsIGZvcm1hdCkge1xuICB2YXIgYXppbXV0ID0gZ2V0QXppbXV0KGxpbmUpO1xuICByZXR1cm4gZm9ybWF0KGF6aW11dCwgZGVjaW1hbHMpICsgXCJcXHhCMFwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZEF6aW11dFJhZGl1cyhsaW5lLCBwcm9qZWN0aW9uLCBkZWNpbWFscywgcHJlY2lzaW9uLCBmb3JtYXRMZW5ndGgsIGZvcm1hdEF6aW11dCkge1xuICB2YXIgb3V0cHV0ID0gZ2V0Rm9ybWF0dGVkQXppbXV0KGxpbmUsIGRlY2ltYWxzLCBmb3JtYXRBemltdXQpO1xuICBvdXRwdXQgKz0gXCIsIFwiICsgZ2V0Rm9ybWF0dGVkTGVuZ3RoKGxpbmUsIHByb2plY3Rpb24sIHByZWNpc2lvbiwgZm9ybWF0TGVuZ3RoKTtcbiAgcmV0dXJuIG91dHB1dDtcbn0iLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUsIHsgZ2V0Rm9ybWF0dGVkTGVuZ3RoIH0gZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9NZWFzdXJlLmpzJztcbmltcG9ydCBvbEludGVyYWN0aW9uRHJhdyBmcm9tICdvbC9pbnRlcmFjdGlvbi9EcmF3LmpzJztcbmltcG9ydCBMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgeyBkaXN0YW5jZSB9IGZyb20gJ29sL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHsgY29udGFpbnNYWSB9IGZyb20gJ29sL2V4dGVudC5qcyc7XG52YXIgbW9kaWZpZXJQcmVzc2VkO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX25nZW9JbnRlcmFjdGlvbk1lYXN1KSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0ludGVyYWN0aW9uTWVhc3UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KGZvcm1hdCwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfbmdlb0ludGVyYWN0aW9uTWVhc3UuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgaWYgKG1vZGlmaWVyUHJlc3NlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBtb2RpZmllclByZXNzZWQgPSBmYWxzZTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgbW9kaWZpZXJQcmVzc2VkID0gZXZ0LmtleUNvZGUgPT09IDE3O1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBtb2RpZmllclByZXNzZWQgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmNvbnRpbnVlTXNnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIF90aGlzLmNvbnRpbnVlTXNnID0gb3B0aW9ucy5jb250aW51ZU1zZztcbiAgICB9IGVsc2Uge1xuICAgICAgX3RoaXMuY29udGludWVNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBfdGhpcy5jb250aW51ZU1zZy50ZXh0Q29udGVudCA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnQ2xpY2sgdG8gY29udGludWUgZHJhd2luZyB0aGUgbGluZS4nKTtcbiAgICAgIHZhciBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7XG4gICAgICBici50ZXh0Q29udGVudCA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnRG91YmxlLWNsaWNrIG9yIGNsaWNrIGxhc3QgcG9pbnQgdG8gZmluaXNoLicpO1xuXG4gICAgICBfdGhpcy5jb250aW51ZU1zZy5hcHBlbmRDaGlsZChicik7XG4gICAgfVxuXG4gICAgX3RoaXMuc3BoZXJpY2FsID0gZmFsc2U7XG4gICAgX3RoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgIF90aGlzLnRvbGVyYW5jZSA9IG9wdGlvbnMudG9sZXJhbmNlO1xuICAgIF90aGlzLnNvdXJjZSA9IG9wdGlvbnMuc291cmNlO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZURyYXdJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZURyYXdJbnRlcmFjdGlvbihzdHlsZSwgc291cmNlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IG9sSW50ZXJhY3Rpb25EcmF3KHtcbiAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgIGdlb21ldHJ5RnVuY3Rpb246IGZ1bmN0aW9uIGdlb21ldHJ5RnVuY3Rpb24oY29vcmRpbmF0ZXMsIG9wdF9nZW9tZXRyeSkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLmxpbmVzdHJpbmdHZW9tZXRyeUZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBvcHRfZ2VvbWV0cnkpO1xuICAgICAgfSxcbiAgICAgIGNvbmRpdGlvbjogZnVuY3Rpb24gY29uZGl0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBzdHlsZTogc3R5bGUsXG4gICAgICBzb3VyY2U6IHNvdXJjZVxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5saW5lc3RyaW5nR2VvbWV0cnlGdW5jdGlvbiA9IGZ1bmN0aW9uIGxpbmVzdHJpbmdHZW9tZXRyeUZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBvcHRfZ2VvbWV0cnkpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIGlmIChtb2RpZmllclByZXNzZWQpIHtcbiAgICAgIHZhciB2aWV3Um90YXRpb24gPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKS5nZXRSb3RhdGlvbigpO1xuICAgICAgdmFyIGFuZ2xlID0gTWF0aC5QSSAvIDQ7XG4gICAgICB2YXIgZnJvbSA9IGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVzLmxlbmd0aCAtIDJdO1xuICAgICAgdmFyIHRvID0gY29vcmRpbmF0ZXNbY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV07XG4gICAgICB2YXIgZHggPSBmcm9tWzBdIC0gdG9bMF07XG4gICAgICB2YXIgZHkgPSBmcm9tWzFdIC0gdG9bMV07XG4gICAgICB2YXIgbGVuZ3RoID0gZGlzdGFuY2UoZnJvbSwgdG8pO1xuICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1JvdGF0aW9uICsgTWF0aC5yb3VuZCgoTWF0aC5hdGFuMihkeSwgZHgpIC0gdmlld1JvdGF0aW9uKSAvIGFuZ2xlKSAqIGFuZ2xlO1xuICAgICAgdG9bMF0gPSBmcm9tWzBdIC0gbGVuZ3RoICogTWF0aC5jb3Mocm90YXRpb24pO1xuICAgICAgdG9bMV0gPSBmcm9tWzFdIC0gbGVuZ3RoICogTWF0aC5zaW4ocm90YXRpb24pO1xuXG4gICAgICBpZiAodGhpcy50b2xlcmFuY2UgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnNvdXJjZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCk7XG5cbiAgICAgICAgaWYgKCF2aWV3KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHZpZXcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICAgICAgaWYgKCFyZXNvbHV0aW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWx0YSA9IHJlc29sdXRpb24gKiB0aGlzLnRvbGVyYW5jZTtcbiAgICAgICAgdmFyIGJib3ggPSBbdG9bMF0gLSBkZWx0YSwgdG9bMV0gLSBkZWx0YSwgdG9bMF0gKyBkZWx0YSwgdG9bMV0gKyBkZWx0YV07XG4gICAgICAgIHZhciBsYXllclNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICB2YXIgZmVhdHVyZXNJbkV4dGVudCA9IGxheWVyU291cmNlLmdldEZlYXR1cmVzSW5FeHRlbnQoYmJveCk7XG4gICAgICAgIGZlYXR1cmVzSW5FeHRlbnQuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgIHZhciBsYXN0SW50ZXJzZWN0aW9uID0gW107XG4gICAgICAgICAgdmFyIGJlc3RJbnRlcnNlY3Rpb24gPSBbXTtcbiAgICAgICAgICB2YXIgYmVzdERpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgICAgdmFyIGRpc3RhbmNlRnJvbVRvID0gZGlzdGFuY2UoZnJvbSwgdG8pO1xuICAgICAgICAgIHZhciBheCA9IGZyb21bMF07XG4gICAgICAgICAgdmFyIGF5ID0gZnJvbVsxXTtcbiAgICAgICAgICB2YXIgbXggPSB0b1swXTtcbiAgICAgICAgICB2YXIgbXkgPSB0b1sxXTtcbiAgICAgICAgICB2YXIgdW5pdFZlY3RvciA9IFsobXggLSBheCkgLyBkaXN0YW5jZUZyb21UbywgKG15IC0gYXkpIC8gZGlzdGFuY2VGcm9tVG9dO1xuICAgICAgICAgIHZhciBiID0gW2F4ICsgKGRpc3RhbmNlRnJvbVRvICsgZGVsdGEpICogdW5pdFZlY3RvclswXSwgYXkgKyAoZGlzdGFuY2VGcm9tVG8gKyBkZWx0YSkgKiB1bml0VmVjdG9yWzFdXTtcbiAgICAgICAgICB2YXIgZ2VvbSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgICAgIGlmICghKGdlb20gaW5zdGFuY2VvZiBMaW5lU3RyaW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBnZW9tZXRyeSB0eXBlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZ2VvbS5mb3JFYWNoU2VnbWVudChmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIpIHtcbiAgICAgICAgICAgIGxhc3RJbnRlcnNlY3Rpb24gPSBfdGhpczMuY29tcHV0ZUxpbmVTZWdtZW50SW50ZXJzZWN0aW9uKFtmcm9tLCBiXSwgW3BvaW50MSwgcG9pbnQyXSk7XG5cbiAgICAgICAgICAgIGlmIChsYXN0SW50ZXJzZWN0aW9uICE9PSB1bmRlZmluZWQgJiYgY29udGFpbnNYWShiYm94LCBsYXN0SW50ZXJzZWN0aW9uWzBdLCBsYXN0SW50ZXJzZWN0aW9uWzFdKSkge1xuICAgICAgICAgICAgICB2YXIgbGFzdERpc3RhbmNlID0gZGlzdGFuY2UodG8sIGxhc3RJbnRlcnNlY3Rpb24pO1xuXG4gICAgICAgICAgICAgIGlmIChsYXN0RGlzdGFuY2UgPCBiZXN0RGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBiZXN0RGlzdGFuY2UgPSBsYXN0RGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgYmVzdEludGVyc2VjdGlvbiA9IGxhc3RJbnRlcnNlY3Rpb247XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChiZXN0SW50ZXJzZWN0aW9uKSB7XG4gICAgICAgICAgICB0b1swXSA9IGJlc3RJbnRlcnNlY3Rpb25bMF0gfHwgdG9bMF07XG4gICAgICAgICAgICB0b1sxXSA9IGJlc3RJbnRlcnNlY3Rpb25bMV0gfHwgdG9bMV07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ2VvbWV0cnkgPSBvcHRfZ2VvbWV0cnk7XG5cbiAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcbiAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IExpbmVTdHJpbmcoY29vcmRpbmF0ZXMpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNZWFzdXJlID0gZnVuY3Rpb24gaGFuZGxlTWVhc3VyZShjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5za2V0Y2hGZWF0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2tldGNoRmVhdHVyZScpO1xuICAgIH1cblxuICAgIHZhciBnZW9tID0gdGhpcy5za2V0Y2hGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIShnZW9tIGluc3RhbmNlb2YgTGluZVN0cmluZykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZ2VvbWV0cnkgdHlwZScpO1xuICAgIH1cblxuICAgIHZhciBwcm9qID0gdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHByb2opO1xuICAgIHZhciBvdXRwdXQgPSBnZXRGb3JtYXR0ZWRMZW5ndGgoZ2VvbSwgcHJvaiwgdGhpcy5wcmVjaXNpb24sIHRoaXMuZm9ybWF0LCB0aGlzLnNwaGVyaWNhbCk7XG4gICAgdmFyIGNvb3JkID0gZ2VvbS5nZXRMYXN0Q29vcmRpbmF0ZSgpO1xuICAgIGNhbGxiYWNrKG91dHB1dCwgY29vcmQpO1xuICB9O1xuXG4gIF9wcm90by5jb21wdXRlTGluZVNlZ21lbnRJbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiBjb21wdXRlTGluZVNlZ21lbnRJbnRlcnNlY3Rpb24obGluZTEsIGxpbmUyKSB7XG4gICAgdmFyIG51bWVyYXRvcjFBID0gKGxpbmUyWzFdWzBdIC0gbGluZTJbMF1bMF0pICogKGxpbmUxWzBdWzFdIC0gbGluZTJbMF1bMV0pIC0gKGxpbmUyWzFdWzFdIC0gbGluZTJbMF1bMV0pICogKGxpbmUxWzBdWzBdIC0gbGluZTJbMF1bMF0pO1xuICAgIHZhciBudW1lcmF0b3IxQiA9IChsaW5lMVsxXVswXSAtIGxpbmUxWzBdWzBdKSAqIChsaW5lMVswXVsxXSAtIGxpbmUyWzBdWzFdKSAtIChsaW5lMVsxXVsxXSAtIGxpbmUxWzBdWzFdKSAqIChsaW5lMVswXVswXSAtIGxpbmUyWzBdWzBdKTtcbiAgICB2YXIgZGVub21pbmF0b3IxID0gKGxpbmUyWzFdWzFdIC0gbGluZTJbMF1bMV0pICogKGxpbmUxWzFdWzBdIC0gbGluZTFbMF1bMF0pIC0gKGxpbmUyWzFdWzBdIC0gbGluZTJbMF1bMF0pICogKGxpbmUxWzFdWzFdIC0gbGluZTFbMF1bMV0pO1xuXG4gICAgaWYgKGRlbm9taW5hdG9yMSA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB1YTEgPSBudW1lcmF0b3IxQSAvIGRlbm9taW5hdG9yMTtcbiAgICB2YXIgdWIxID0gbnVtZXJhdG9yMUIgLyBkZW5vbWluYXRvcjE7XG5cbiAgICBpZiAodWExID49IDAgJiYgdWExIDw9IDEgJiYgdWIxID49IDAgJiYgdWIxIDw9IDEpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIHJlc3VsdFswXSA9IGxpbmUxWzBdWzBdICsgdWExICogKGxpbmUxWzFdWzBdIC0gbGluZTFbMF1bMF0pO1xuICAgICAgcmVzdWx0WzFdID0gbGluZTFbMF1bMV0gKyB1YTEgKiAobGluZTFbMV1bMV0gLSBsaW5lMVswXVsxXSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlTGVuZ3RoIGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZUxlbmd0aC5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTW9iaWxlRHJhdyBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01vYmlsZURyYXcuanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX25nZW9JbnRlcmFjdGlvbk1lYXN1KSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0ludGVyYWN0aW9uTWVhc3UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KGZvcm1hdCwgZ2V0dGV4dENhdGFsb2csIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtcbiAgICAgIGRpc3BsYXlIZWxwVG9vbHRpcDogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gX25nZW9JbnRlcmFjdGlvbk1lYXN1LmNhbGwodGhpcywgZm9ybWF0LCBnZXR0ZXh0Q2F0YWxvZywgb3B0aW9ucykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZURyYXdJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZURyYXdJbnRlcmFjdGlvbihzdHlsZSwgc291cmNlKSB7XG4gICAgcmV0dXJuIG5ldyBuZ2VvSW50ZXJhY3Rpb25Nb2JpbGVEcmF3KHtcbiAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgIHN0eWxlOiBzdHlsZVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0obmdlb0ludGVyYWN0aW9uTWVhc3VyZUxlbmd0aCk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUsIHsgZ2V0Rm9ybWF0dGVkUG9pbnQgfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmUuanMnO1xuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1vYmlsZURyYXcgZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9Nb2JpbGVEcmF3LmpzJztcbmltcG9ydCBQb2ludCBmcm9tICdvbC9nZW9tL1BvaW50LmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvSW50ZXJhY3Rpb25NZWFzdSkge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX25nZW9JbnRlcmFjdGlvbk1lYXN1KTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChmb3JtYXQsIGNvb3JkRm9ybWF0LCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xuICAgICAgZGlzcGxheUhlbHBUb29sdGlwOiBmYWxzZVxuICAgIH0pO1xuICAgIF90aGlzID0gX25nZW9JbnRlcmFjdGlvbk1lYXN1LmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5mb3JtYXRfID0gZm9ybWF0O1xuICAgIF90aGlzLmNvb3JkRm9ybWF0XyA9IGNvb3JkRm9ybWF0O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZURyYXdJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZURyYXdJbnRlcmFjdGlvbihzdHlsZSwgc291cmNlKSB7XG4gICAgcmV0dXJuIG5ldyBuZ2VvSW50ZXJhY3Rpb25Nb2JpbGVEcmF3KHtcbiAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICBzdHlsZTogc3R5bGVcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWVhc3VyZSA9IGZ1bmN0aW9uIGhhbmRsZU1lYXN1cmUoY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNrZXRjaEZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbSA9IHRoaXMuc2tldGNoRmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCEoZ2VvbSBpbnN0YW5jZW9mIFBvaW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgdmFyIGRlYyA9IHRoaXMuZGVjaW1hbHM7XG4gICAgdmFyIG91dHB1dCA9IGdldEZvcm1hdHRlZFBvaW50KGdlb20sIGRlYywgdGhpcy5mb3JtYXRfLCB0aGlzLmNvb3JkRm9ybWF0Xyk7XG4gICAgdmFyIGNvb3JkID0gZ2VvbS5nZXRMYXN0Q29vcmRpbmF0ZSgpO1xuICAgIGNhbGxiYWNrKG91dHB1dCwgY29vcmQpO1xuICB9O1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0obmdlb0ludGVyYWN0aW9uTWVhc3VyZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCB7IGdldERlZmF1bHREcmF3U3R5bGVGdW5jdGlvbiB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vY29tbW9uLmpzJztcbmltcG9ydCBuZ2VvQ3VzdG9tRXZlbnQgZnJvbSAnbmdlby9DdXN0b21FdmVudC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCB7IFRSVUUgfSBmcm9tICdvbC9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IG9sR2VvbUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21Qb2ludCBmcm9tICdvbC9nZW9tL1BvaW50LmpzJztcbmltcG9ydCBvbEdlb21Qb2x5Z29uIGZyb20gJ29sL2dlb20vUG9seWdvbi5qcyc7XG5pbXBvcnQgb2xHZW9tU2ltcGxlR2VvbWV0cnkgZnJvbSAnb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvbkludGVyYWN0aW9uIGZyb20gJ29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBvbExheWVyVmVjdG9yIGZyb20gJ29sL2xheWVyL1ZlY3Rvci5qcyc7XG5pbXBvcnQgb2xTb3VyY2VWZWN0b3IgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfb2xJbnRlcmFjdGlvbkludGVyYWMpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9vbEludGVyYWN0aW9uSW50ZXJhYyk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25JbnRlcmFjLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IFRSVUVcbiAgICB9KSB8fCB0aGlzO1xuICAgIF90aGlzLmNoYW5nZUV2ZW50S2V5XyA9IG51bGw7XG4gICAgX3RoaXMudHlwZV8gPSBvcHRpb25zLnR5cGU7XG4gICAgX3RoaXMubWluUG9pbnRzXyA9IG9wdGlvbnMubWluUG9pbnRzID8gb3B0aW9ucy5taW5Qb2ludHMgOiBfdGhpcy50eXBlXyA9PT0gJ1BvbHlnb24nID8gMyA6IDI7XG4gICAgX3RoaXMuc2tldGNoRmVhdHVyZV8gPSBudWxsO1xuICAgIF90aGlzLnNrZXRjaFBvaW50c18gPSBbXTtcbiAgICBfdGhpcy5za2V0Y2hQb2ludF8gPSBudWxsO1xuICAgIF90aGlzLm92ZXJsYXlfID0gbmV3IG9sTGF5ZXJWZWN0b3Ioe1xuICAgICAgc291cmNlOiBuZXcgb2xTb3VyY2VWZWN0b3Ioe1xuICAgICAgICB1c2VTcGF0aWFsSW5kZXg6IGZhbHNlLFxuICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCA/IG9wdGlvbnMud3JhcFggOiBmYWxzZVxuICAgICAgfSksXG4gICAgICBzdHlsZTogb3B0aW9ucy5zdHlsZSB8fCBnZXREZWZhdWx0RHJhd1N0eWxlRnVuY3Rpb24oKSxcbiAgICAgIHVwZGF0ZVdoaWxlQW5pbWF0aW5nOiB0cnVlLFxuICAgICAgdXBkYXRlV2hpbGVJbnRlcmFjdGluZzogdHJ1ZVxuICAgIH0pO1xuICAgIGxpc3RlbihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgJ2NoYW5nZTphY3RpdmUnLCBfdGhpcy51cGRhdGVTdGF0ZV8sIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcblxuICAgIF90aGlzLnNldCgnZGlydHknLCBmYWxzZSk7XG5cbiAgICBfdGhpcy5zZXQoJ2RyYXdpbmcnLCBmYWxzZSk7XG5cbiAgICBfdGhpcy5zZXQoJ3ZhbGlkJywgZmFsc2UpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwKG1hcCkge1xuICAgIHZhciBjdXJyZW50TWFwID0gdGhpcy5nZXRNYXAoKTtcblxuICAgIGlmIChjdXJyZW50TWFwKSB7XG4gICAgICBpZiAodGhpcy5jaGFuZ2VFdmVudEtleV8pIHtcbiAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmNoYW5nZUV2ZW50S2V5Xyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgb2xJbnRlcmFjdGlvbkludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuXG4gICAgaWYgKG1hcCkge1xuICAgICAgdGhpcy5jaGFuZ2VFdmVudEtleV8gPSBsaXN0ZW4obWFwLmdldFZpZXcoKSwgJ2NoYW5nZTpjZW50ZXInLCB0aGlzLmhhbmRsZVZpZXdDZW50ZXJDaGFuZ2VfLCB0aGlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN0YXRlXygpO1xuICB9O1xuXG4gIF9wcm90by5nZXREaXJ0eSA9IGZ1bmN0aW9uIGdldERpcnR5KCkge1xuICAgIHJldHVybiB0aGlzLmdldCgnZGlydHknKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0RHJhd2luZyA9IGZ1bmN0aW9uIGdldERyYXdpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KCdkcmF3aW5nJyk7XG4gIH07XG5cbiAgX3Byb3RvLmdldFZhbGlkID0gZnVuY3Rpb24gZ2V0VmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KCd2YWxpZCcpO1xuICB9O1xuXG4gIF9wcm90by5nZXRGZWF0dXJlID0gZnVuY3Rpb24gZ2V0RmVhdHVyZSgpIHtcbiAgICByZXR1cm4gdGhpcy5za2V0Y2hGZWF0dXJlXztcbiAgfTtcblxuICBfcHJvdG8uYWRkVG9EcmF3aW5nID0gZnVuY3Rpb24gYWRkVG9EcmF3aW5nKCkge1xuICAgIGlmICghdGhpcy5za2V0Y2hQb2ludF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBza2V0Y2hQb2ludCcpO1xuICAgIH1cblxuICAgIHZhciBhY3RpdmUgPSB0aGlzLmdldEFjdGl2ZSgpO1xuICAgIHZhciBkcmF3aW5nID0gdGhpcy5nZXREcmF3aW5nKCk7XG5cbiAgICBpZiAoIWFjdGl2ZSB8fCAhZHJhd2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBza2V0Y2hGZWF0dXJlR2VvbTtcbiAgICB2YXIgc2tldGNoUG9pbnRHZW9tID0gdGhpcy5nZXRTa2V0Y2hQb2ludEdlb21ldHJ5XygpO1xuICAgIHZhciBjb29yZGluYXRlID0gc2tldGNoUG9pbnRHZW9tLmdldENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnR5cGVfID09PSAnUG9pbnQnKSB7XG4gICAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZV8pIHtcbiAgICAgICAgdGhpcy5za2V0Y2hGZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUobmV3IG9sR2VvbVBvaW50KGNvb3JkaW5hdGUpKTtcbiAgICAgICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnZHJhd3N0YXJ0Jywge1xuICAgICAgICAgIGZlYXR1cmU6IHRoaXMuc2tldGNoRmVhdHVyZV9cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIHNrZXRjaEZlYXR1cmVHZW9tID0gdGhpcy5za2V0Y2hGZWF0dXJlXy5nZXRHZW9tZXRyeSgpO1xuXG4gICAgICBpZiAoc2tldGNoRmVhdHVyZUdlb20gaW5zdGFuY2VvZiBvbEdlb21TaW1wbGVHZW9tZXRyeSkge1xuICAgICAgICBza2V0Y2hGZWF0dXJlR2VvbS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnR5cGVfID09PSAnTGluZVN0cmluZycpIHtcbiAgICAgIHRoaXMuc2tldGNoUG9pbnRzXy5wdXNoKHRoaXMuc2tldGNoUG9pbnRfKTtcblxuICAgICAgaWYgKCF0aGlzLnNrZXRjaEZlYXR1cmVfKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gW2Nvb3JkaW5hdGUuc2xpY2UoKSwgY29vcmRpbmF0ZS5zbGljZSgpXTtcbiAgICAgICAgdGhpcy5za2V0Y2hGZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUobmV3IG9sR2VvbUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpKTtcblxuICAgICAgICB2YXIgX2V2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnZHJhd3N0YXJ0Jywge1xuICAgICAgICAgIGZlYXR1cmU6IHRoaXMuc2tldGNoRmVhdHVyZV9cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBza2V0Y2hGZWF0dXJlR2VvbSA9IHRoaXMuc2tldGNoRmVhdHVyZV8uZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgICBpZiAoc2tldGNoRmVhdHVyZUdlb20gaW5zdGFuY2VvZiBvbEdlb21TaW1wbGVHZW9tZXRyeSkge1xuICAgICAgICAgIGNvb3JkaW5hdGVzID0gc2tldGNoRmVhdHVyZUdlb20uZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGNvb3JkaW5hdGUuc2xpY2UoKSk7XG4gICAgICAgICAgc2tldGNoRmVhdHVyZUdlb20uc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudHlwZV8gPT09ICdQb2x5Z29uJykge1xuICAgICAgdGhpcy5za2V0Y2hQb2ludHNfLnB1c2godGhpcy5za2V0Y2hQb2ludF8pO1xuXG4gICAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZV8pIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBbY29vcmRpbmF0ZS5zbGljZSgpLCBjb29yZGluYXRlLnNsaWNlKCksIGNvb3JkaW5hdGUuc2xpY2UoKV07XG4gICAgICAgIHRoaXMuc2tldGNoRmVhdHVyZV8gPSBuZXcgb2xGZWF0dXJlKG5ldyBvbEdlb21Qb2x5Z29uKFtjb29yZGluYXRlc10pKTtcblxuICAgICAgICB2YXIgX2V2ZW50MiA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ2RyYXdzdGFydCcsIHtcbiAgICAgICAgICBmZWF0dXJlOiB0aGlzLnNrZXRjaEZlYXR1cmVfXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChfZXZlbnQyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNrZXRjaEZlYXR1cmVHZW9tID0gdGhpcy5za2V0Y2hGZWF0dXJlXy5nZXRHZW9tZXRyeSgpO1xuXG4gICAgICAgIGlmIChza2V0Y2hGZWF0dXJlR2VvbSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICAgICAgICB2YXIgY29vcmRpbmF0ZXNzID0gc2tldGNoRmVhdHVyZUdlb20uZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICBjb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzc1swXTtcbiAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGNvb3JkaW5hdGUuc2xpY2UoKSk7XG4gICAgICAgICAgc2tldGNoRmVhdHVyZUdlb20uc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXNzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkaXJ0eSA9IHRoaXMuZ2V0RGlydHkoKTtcblxuICAgIGlmIChkaXJ0eSkge1xuICAgICAgdGhpcy5zZXQoJ2RpcnR5JywgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmICghY29vcmRpbmF0ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb29yZGluYXRlcycpO1xuICAgIH1cblxuICAgIHZhciB2YWxpZCA9IHRoaXMuZ2V0VmFsaWQoKTtcblxuICAgIGlmICh0aGlzLnR5cGVfID09PSAnTGluZVN0cmluZycgfHwgdGhpcy50eXBlXyA9PT0gJ1BvbHlnb24nKSB7XG4gICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID49IHRoaXMubWluUG9pbnRzXykge1xuICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgdGhpcy5zZXQoJ3ZhbGlkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgIHRoaXMuc2V0KCd2YWxpZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2tldGNoUG9pbnRfID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuICB9O1xuXG4gIF9wcm90by5jbGVhckRyYXdpbmcgPSBmdW5jdGlvbiBjbGVhckRyYXdpbmcoKSB7XG4gICAgdGhpcy5zZXRBY3RpdmUoZmFsc2UpO1xuICAgIHRoaXMuc2V0QWN0aXZlKHRydWUpO1xuICB9O1xuXG4gIF9wcm90by5maW5pc2hEcmF3aW5nID0gZnVuY3Rpb24gZmluaXNoRHJhd2luZygpIHtcbiAgICB2YXIgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmUoKTtcbiAgICB2YXIgZHJhd2luZyA9IHRoaXMuZ2V0RHJhd2luZygpO1xuXG4gICAgaWYgKCFhY3RpdmUgfHwgIWRyYXdpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5za2V0Y2hQb2ludF8pIHtcbiAgICAgIHRoaXMuYWRkVG9EcmF3aW5nKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXQoJ2RyYXdpbmcnLCBmYWxzZSk7XG4gICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnZHJhd2VuZCcsIHtcbiAgICAgIGZlYXR1cmU6IHRoaXMuc2tldGNoRmVhdHVyZV9cbiAgICB9KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9O1xuXG4gIF9wcm90by5zdGFydERyYXdpbmdfID0gZnVuY3Rpb24gc3RhcnREcmF3aW5nXygpIHtcbiAgICB0aGlzLnNldCgnZHJhd2luZycsIHRydWUpO1xuICAgIHRoaXMuY3JlYXRlT3JVcGRhdGVTa2V0Y2hQb2ludF8oKTtcbiAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuXG4gICAgaWYgKHRoaXMudHlwZV8gPT09ICdQb2ludCcpIHtcbiAgICAgIHRoaXMuYWRkVG9EcmF3aW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5tb2RpZnlEcmF3aW5nXyA9IGZ1bmN0aW9uIG1vZGlmeURyYXdpbmdfKCkge1xuICAgIGlmICghdGhpcy5za2V0Y2hGZWF0dXJlXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcl8oKTtcblxuICAgIGlmICh0aGlzLnR5cGVfID09PSAnTGluZVN0cmluZycpIHtcbiAgICAgIHZhciBza2V0Y2hGZWF0dXJlR2VvbSA9IHRoaXMuc2tldGNoRmVhdHVyZV8uZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgaWYgKHNrZXRjaEZlYXR1cmVHZW9tIGluc3RhbmNlb2Ygb2xHZW9tU2ltcGxlR2VvbWV0cnkpIHtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gc2tldGNoRmVhdHVyZUdlb20uZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgY29vcmRpbmF0ZXMucG9wKCk7XG4gICAgICAgIGNvb3JkaW5hdGVzLnB1c2goY2VudGVyKTtcbiAgICAgICAgc2tldGNoRmVhdHVyZUdlb20uc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlXyA9PT0gJ1BvbHlnb24nKSB7XG4gICAgICB2YXIgX3NrZXRjaEZlYXR1cmVHZW9tID0gdGhpcy5za2V0Y2hGZWF0dXJlXy5nZXRHZW9tZXRyeSgpO1xuXG4gICAgICBpZiAoX3NrZXRjaEZlYXR1cmVHZW9tIGluc3RhbmNlb2Ygb2xHZW9tUG9seWdvbikge1xuICAgICAgICB2YXIgY29vcmRpbmF0ZXNzID0gX3NrZXRjaEZlYXR1cmVHZW9tLmdldENvb3JkaW5hdGVzKCk7XG5cbiAgICAgICAgdmFyIF9jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzc1swXTtcblxuICAgICAgICBfY29vcmRpbmF0ZXMucG9wKCk7XG5cbiAgICAgICAgX2Nvb3JkaW5hdGVzLnB1c2goY2VudGVyKTtcblxuICAgICAgICBfc2tldGNoRmVhdHVyZUdlb20uc2V0Q29vcmRpbmF0ZXMoW19jb29yZGluYXRlc10pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkaXJ0eSA9IHRoaXMuZ2V0RGlydHkoKTtcblxuICAgIGlmICghZGlydHkpIHtcbiAgICAgIHRoaXMuc2V0KCdkaXJ0eScsIHRydWUpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uYWJvcnREcmF3aW5nXyA9IGZ1bmN0aW9uIGFib3J0RHJhd2luZ18oKSB7XG4gICAgdmFyIHNrZXRjaEZlYXR1cmUgPSB0aGlzLnNrZXRjaEZlYXR1cmVfO1xuXG4gICAgaWYgKHNrZXRjaEZlYXR1cmUgfHwgdGhpcy5za2V0Y2hQb2ludHNfLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2tldGNoRmVhdHVyZV8gPSBudWxsO1xuICAgICAgdGhpcy5za2V0Y2hQb2ludF8gPSBudWxsO1xuICAgICAgdGhpcy5vdmVybGF5Xy5nZXRTb3VyY2UoKS5jbGVhcih0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLnNrZXRjaFBvaW50c18gPSBbXTtcbiAgICB0aGlzLnNldCgnZGlydHknLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoJ2RyYXdpbmcnLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoJ3ZhbGlkJywgZmFsc2UpO1xuICAgIHJldHVybiBza2V0Y2hGZWF0dXJlO1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVTdGF0ZV8gPSBmdW5jdGlvbiB1cGRhdGVTdGF0ZV8oKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlKCk7XG5cbiAgICBpZiAoIW1hcCB8fCAhYWN0aXZlKSB7XG4gICAgICB0aGlzLmFib3J0RHJhd2luZ18oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydERyYXdpbmdfKCk7XG4gICAgfVxuXG4gICAgdGhpcy5vdmVybGF5Xy5zZXRNYXAoYWN0aXZlID8gbWFwIDogbnVsbCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVZpZXdDZW50ZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVmlld0NlbnRlckNoYW5nZV8oZXZ0KSB7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlKCk7XG4gICAgdmFyIGRyYXdpbmcgPSB0aGlzLmdldERyYXdpbmcoKTtcblxuICAgIGlmICghYWN0aXZlIHx8ICFkcmF3aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVPclVwZGF0ZVNrZXRjaFBvaW50XygpO1xuXG4gICAgaWYgKHRoaXMudHlwZV8gPT09ICdQb2ludCcpIHtcbiAgICAgIHRoaXMuYWRkVG9EcmF3aW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9kaWZ5RHJhd2luZ18oKTtcbiAgICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5jcmVhdGVPclVwZGF0ZVNrZXRjaFBvaW50XyA9IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlU2tldGNoUG9pbnRfKCkge1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcl8oKTtcblxuICAgIGlmICh0aGlzLnNrZXRjaFBvaW50Xykge1xuICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRTa2V0Y2hQb2ludEdlb21ldHJ5XygpO1xuICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoY2VudGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5za2V0Y2hQb2ludF8gPSBuZXcgb2xGZWF0dXJlKG5ldyBvbEdlb21Qb2ludChjZW50ZXIpKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXyA9IGZ1bmN0aW9uIHVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpIHtcbiAgICB2YXIgc2tldGNoRmVhdHVyZXMgPSBbXTtcblxuICAgIGlmICh0aGlzLnNrZXRjaEZlYXR1cmVfKSB7XG4gICAgICBza2V0Y2hGZWF0dXJlcy5wdXNoKHRoaXMuc2tldGNoRmVhdHVyZV8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNrZXRjaFBvaW50Xykge1xuICAgICAgc2tldGNoRmVhdHVyZXMucHVzaCh0aGlzLnNrZXRjaFBvaW50Xyk7XG4gICAgfVxuXG4gICAgdmFyIG92ZXJsYXlTb3VyY2UgPSB0aGlzLm92ZXJsYXlfLmdldFNvdXJjZSgpO1xuICAgIG92ZXJsYXlTb3VyY2UuY2xlYXIodHJ1ZSk7XG4gICAgb3ZlcmxheVNvdXJjZS5hZGRGZWF0dXJlcyhza2V0Y2hGZWF0dXJlcyk7XG4gICAgb3ZlcmxheVNvdXJjZS5hZGRGZWF0dXJlcyh0aGlzLnNrZXRjaFBvaW50c18pO1xuICB9O1xuXG4gIF9wcm90by5nZXRTa2V0Y2hQb2ludEdlb21ldHJ5XyA9IGZ1bmN0aW9uIGdldFNrZXRjaFBvaW50R2VvbWV0cnlfKCkge1xuICAgIGlmICghdGhpcy5za2V0Y2hQb2ludF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBza2V0Y2hQb2ludCcpO1xuICAgIH1cblxuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuc2tldGNoUG9pbnRfLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2ludCkge1xuICAgICAgcmV0dXJuIGdlb21ldHJ5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGdlb21ldHJ5IHR5cGUnKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmdldENlbnRlcl8gPSBmdW5jdGlvbiBnZXRDZW50ZXJfKCkge1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKS5nZXRDZW50ZXIoKTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShjZW50ZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2VudGVyJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbik7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgeyBjcmVhdGVFZGl0aW5nU3R5bGUgfSBmcm9tICdvbC9zdHlsZS9TdHlsZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdERyYXdTdHlsZUZ1bmN0aW9uKCkge1xuICB2YXIgc3R5bGUgPSBjcmVhdGVFZGl0aW5nU3R5bGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChmZWF0dXJlLCByZXNvbHV0aW9uKSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICByZXR1cm4gc3R5bGVbZ2VvbWV0cnkuZ2V0VHlwZSgpXTtcbiAgICB9XG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGlmeVN0eWxlRnVuY3Rpb24oKSB7XG4gIHZhciBzdHlsZSA9IGNyZWF0ZUVkaXRpbmdTdHlsZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gc3R5bGUuUG9pbnQ7XG4gIH07XG59IiwiTGF5ZXJ0cmVlQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRhdHRyc1wiXTtcblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGxheWVyTG9hZGluZywgbGF5ZXJEZWNvcmF0aW9uIH0gZnJvbSAnbmdlby9taXNjL2RlY29yYXRlLmpzJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xMYXllckdyb3VwIGZyb20gJ29sL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCBvbExheWVyTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvTGF5ZXIuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIExheWVydHJlZUNvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkYXR0cnMpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgaXNSb290ID0gJGF0dHJzLm5nZW9MYXllcnRyZWVOb3Ryb290ID09PSB1bmRlZmluZWQ7XG4gIHRoaXMuaXNSb290ID0gaXNSb290O1xuICB2YXIgbm9kZUV4cHIgPSAkYXR0cnMubmdlb0xheWVydHJlZTtcbiAgdGhpcy5yb290U2NvcGVfID0gJHJvb3RTY29wZTtcbiAgdGhpcy5wcm9wZXJ0aWVzID0ge307XG4gIHRoaXMuc3RhdGVfID0gJ29mZic7XG4gIHZhciBub2RlO1xuXG4gIGlmIChpc1Jvb3QpIHtcbiAgICAkc2NvcGUuJHdhdGNoKG5vZGVFeHByLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgIF90aGlzLm5vZGUgPSBuZXdWYWw7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgbm9kZSA9ICRzY29wZS4kZXZhbChub2RlRXhwcik7XG4gIH1cblxuICB0aGlzLm5vZGUgPSBub2RlO1xuICB2YXIgbWFwRXhwciA9ICRhdHRycy5uZ2VvTGF5ZXJ0cmVlTWFwO1xuICB2YXIgbWFwID0gJHNjb3BlLiRldmFsKG1hcEV4cHIpO1xuICBjb25zb2xlLmFzc2VydChtYXAgIT09IHVuZGVmaW5lZCk7XG4gIHRoaXMucGFyZW50ID0gJHNjb3BlLiRwYXJlbnQubGF5ZXJ0cmVlQ3RybDtcbiAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuXG4gIGlmICh0aGlzLnBhcmVudCkge1xuICAgIHRoaXMucGFyZW50LmNoaWxkcmVuLnB1c2godGhpcyk7XG4gIH1cblxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX3RoaXMucGFyZW50KSB7XG4gICAgICB2YXIgaW5kZXggPSBfdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihfdGhpcyk7XG5cbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGluZGV4ID49IDApO1xuXG4gICAgICBfdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH0pO1xuICB0aGlzLnVpZCA9IG9sVXRpbEdldFVpZCh0aGlzKTtcbiAgdGhpcy5kZXB0aCA9IGlzUm9vdCA/IDAgOiB0aGlzLnBhcmVudC5kZXB0aCArIDE7XG4gICRzY29wZS51aWQgPSB0aGlzLnVpZDtcbiAgJHNjb3BlLmRlcHRoID0gdGhpcy5kZXB0aDtcbiAgdGhpcy5tYXAgPSBtYXA7XG4gIHZhciBub2RlbGF5ZXJFeHByID0gJGF0dHJzLm5nZW9MYXllcnRyZWVOb2RlbGF5ZXI7XG5cbiAgaWYgKG5vZGVsYXllckV4cHIgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBub2RlbGF5ZXJleHByRXhwciA9ICRhdHRycy5uZ2VvTGF5ZXJ0cmVlTm9kZWxheWVyZXhwcjtcbiAgICB2YXIgbmV3Tm9kZWxheWVyRXhwciA9ICRzY29wZS4kZXZhbChub2RlbGF5ZXJleHByRXhwcik7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIG5ld05vZGVsYXllckV4cHIgPT0gJ3N0cmluZycpO1xuICAgIG5vZGVsYXllckV4cHIgPSBuZXdOb2RlbGF5ZXJFeHByO1xuICB9XG5cbiAgY29uc29sZS5hc3NlcnQobm9kZWxheWVyRXhwciAhPT0gdW5kZWZpbmVkKTtcbiAgdGhpcy5ub2RlbGF5ZXJFeHByID0gbm9kZWxheWVyRXhwcjtcbiAgdGhpcy5sYXllciA9IG51bGw7XG5cbiAgaWYgKCFpc1Jvb3QpIHtcbiAgICB2YXIgbGF5ZXIgPSAkc2NvcGUuJGV2YWwobm9kZWxheWVyRXhwciwge1xuICAgICAgJ3RyZWVDdHJsJzogdGhpc1xuICAgIH0pIHx8IG51bGw7XG5cbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckxheWVyIHx8IGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckdyb3VwKTtcbiAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgICB9XG4gIH1cblxuICB0aGlzLmRhdGFTb3VyY2VfID0gbnVsbDtcblxuICBpZiAodGhpcy5sYXllcikge1xuICAgIGxheWVyTG9hZGluZyh0aGlzLmxheWVyLCAkc2NvcGUpO1xuICAgIGxheWVyRGVjb3JhdGlvbih0aGlzLmxheWVyKTtcbiAgICBsaXN0ZW4odGhpcy5sYXllciwgJ2NoYW5nZTpvcGFjaXR5JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgX3RoaXMucm9vdFNjb3BlXy4kYnJvYWRjYXN0KCduZ2VvLWxheWVydHJlZS1vcGFjaXR5JywgX3RoaXMpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyc0V4cHIgPSAkYXR0cnMubmdlb0xheWVydHJlZUxpc3RlbmVycztcblxuICBpZiAobGlzdGVuZXJzRXhwciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGxpc3RlbmVyc2V4cHJFeHByID0gJGF0dHJzLm5nZW9MYXllcnRyZWVMaXN0ZW5lcnNleHByO1xuICAgIGxpc3RlbmVyc0V4cHIgPSAkc2NvcGUuJGV2YWwobGlzdGVuZXJzZXhwckV4cHIpO1xuICB9XG5cbiAgaWYgKGxpc3RlbmVyc0V4cHIgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnNvbGUuYXNzZXJ0KHR5cGVvZiBsaXN0ZW5lcnNFeHByID09ICdzdHJpbmcnKTtcbiAgfVxuXG4gIHRoaXMubGlzdGVuZXJzRXhwciA9IGxpc3RlbmVyc0V4cHI7XG5cbiAgaWYgKGxpc3RlbmVyc0V4cHIpIHtcbiAgICAkc2NvcGUuJGV2YWwobGlzdGVuZXJzRXhwciwge1xuICAgICAgJ3RyZWVTY29wZSc6ICRzY29wZSxcbiAgICAgICd0cmVlQ3RybCc6IHRoaXNcbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5sYXllcnRyZWVDdHJsID0gdGhpcztcbn1cblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnN0YXRlXztcbn07XG5cbkxheWVydHJlZUNvbnRyb2xsZXIucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCBvcHRfYnJvYWRjYXN0KSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIGlmIChzdGF0ZSA9PT0gdGhpcy5zdGF0ZV8pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnNldFN0YXRlSW50ZXJuYWxfKHN0YXRlKTtcblxuICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICB0aGlzLnBhcmVudC5yZWZyZXNoU3RhdGUodGhpcywgb3B0X2Jyb2FkY2FzdCk7XG4gIH1cblxuICB2YXIgZmlyc3RQYXJlbnRzID0gdGhpcy5pc1Jvb3QgPyB0aGlzLmNoaWxkcmVuIDogW2dldEZpcnN0UGFyZW50VHJlZSh0aGlzKV07XG5cbiAgaWYgKG9wdF9icm9hZGNhc3QgPT09IHVuZGVmaW5lZCB8fCBvcHRfYnJvYWRjYXN0KSB7XG4gICAgZmlyc3RQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKGZpcnN0UGFyZW50KSB7XG4gICAgICBfdGhpczIucm9vdFNjb3BlXy4kYnJvYWRjYXN0KCduZ2VvLWxheWVydHJlZS1zdGF0ZScsIF90aGlzMiwgZmlyc3RQYXJlbnQpO1xuICAgIH0pO1xuICB9XG59O1xuXG5MYXllcnRyZWVDb250cm9sbGVyLnByb3RvdHlwZS5zZXRTdGF0ZUludGVybmFsXyA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICB2YXIgX3RoaXMzID0gdGhpcztcblxuICB0aGlzLnN0YXRlXyA9IHN0YXRlID09PSAnb24nID8gJ29uJyA6ICdvZmYnO1xuXG4gIGlmICh0aGlzLnN0YXRlXyA9PT0gJ29uJyAmJiB0aGlzLm5vZGUubWV0YWRhdGEgJiYgdGhpcy5ub2RlLm1ldGFkYXRhLmV4Y2x1c2l2ZUdyb3VwKSB7XG4gICAgdmFyIGZpcnN0Q2hpbGQ7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuY2hpbGRyZW4pLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGNoaWxkID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmICghZmlyc3RDaGlsZCkge1xuICAgICAgICBmaXJzdENoaWxkID0gY2hpbGQ7XG4gICAgICAgIGNoaWxkLnNldFN0YXRlSW50ZXJuYWxfKCdvbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGQuc2V0U3RhdGVJbnRlcm5hbF8oJ29mZicpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBjaGlsZC5zZXRTdGF0ZUludGVybmFsXyhfdGhpczMuc3RhdGVfKTtcbiAgICB9KTtcbiAgfVxufTtcblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUucmVmcmVzaFN0YXRlID0gZnVuY3Rpb24gKG9wdF9vbkNoaWxkLCBvcHRfYnJvYWRjYXN0KSB7XG4gIHZhciBncm91cCA9IHRoaXMubm9kZTtcblxuICBpZiAoZ3JvdXAuY2hpbGRyZW4gJiYgb3B0X29uQ2hpbGQgJiYgb3B0X29uQ2hpbGQuZ2V0U3RhdGUoKSAhPT0gJ29mZicgJiYgdGhpcy5ub2RlLm1ldGFkYXRhICYmIHRoaXMubm9kZS5tZXRhZGF0YS5leGNsdXNpdmVHcm91cCkge1xuICAgIHZhciBvbkNoaWxkID0gb3B0X29uQ2hpbGQ7XG4gICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgaWYgKGNoaWxkICE9PSBvbkNoaWxkKSB7XG4gICAgICAgIGNoaWxkLnNldFN0YXRlKCdvZmYnLCBvcHRfYnJvYWRjYXN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBuZXdTdGF0ZSA9IHRoaXMuZ2V0Q2FsY3VsYXRlU3RhdGUoKTtcblxuICBpZiAodGhpcy5zdGF0ZV8gPT09IG5ld1N0YXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5zdGF0ZV8gPSBuZXdTdGF0ZTtcblxuICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICB0aGlzLnBhcmVudC5yZWZyZXNoU3RhdGUodGhpcywgb3B0X2Jyb2FkY2FzdCk7XG4gIH1cbn07XG5cbkxheWVydHJlZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldENhbGN1bGF0ZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZ3JvdXAgPSB0aGlzLm5vZGU7XG5cbiAgaWYgKGdyb3VwLmNoaWxkcmVuID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZV87XG4gIH1cblxuICB2YXIgY2hpbGRTdGF0ZSA9ICcnO1xuICB2YXIgcHJldmlvdXNDaGlsZFN0YXRlO1xuICB0aGlzLmNoaWxkcmVuLnNvbWUoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgY2hpbGRTdGF0ZSA9IGNoaWxkLmdldENhbGN1bGF0ZVN0YXRlKCk7XG5cbiAgICBpZiAocHJldmlvdXNDaGlsZFN0YXRlKSB7XG4gICAgICBpZiAocHJldmlvdXNDaGlsZFN0YXRlICE9PSBjaGlsZFN0YXRlKSB7XG4gICAgICAgIGNoaWxkU3RhdGUgPSAnaW5kZXRlcm1pbmF0ZSc7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByZXZpb3VzQ2hpbGRTdGF0ZSA9IGNoaWxkU3RhdGU7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiAgcmV0dXJuIGNoaWxkU3RhdGU7XG59O1xuXG5MYXllcnRyZWVDb250cm9sbGVyLnByb3RvdHlwZS5nZXRTZXRBY3RpdmUgPSBmdW5jdGlvbiAodmFsKSB7XG4gIHZhciBsYXllciA9IHRoaXMubGF5ZXI7XG4gIHZhciBtYXAgPSB0aGlzLm1hcDtcblxuICBpZiAoIWxheWVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKCF2YWwpIHtcbiAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hcC5hZGRMYXllcihsYXllcik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBtYXAuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKS5pbmNsdWRlcyhsYXllcik7XG4gIH1cbn07XG5cbkxheWVydHJlZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldERhdGFTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmRhdGFTb3VyY2VfO1xufTtcblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUuc2V0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChkYXRhU291cmNlKSB7XG4gIHRoaXMuZGF0YVNvdXJjZV8gPSBkYXRhU291cmNlO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0UGFyZW50VHJlZSh0cmVlQ3RybCkge1xuICB2YXIgdHJlZSA9IHRyZWVDdHJsO1xuXG4gIHdoaWxlICghdHJlZS5wYXJlbnQuaXNSb290KSB7XG4gICAgdHJlZSA9IHRyZWUucGFyZW50O1xuICB9XG5cbiAgcmV0dXJuIHRyZWU7XG59XG5leHBvcnQgdmFyIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbiA9IHtcbiAgU1RPUDogJ1NUT1AnLFxuICBTS0lQOiAnU0tJUCcsXG4gIERFU0NFTkQ6ICdERVNDRU5EJ1xufTtcblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUudHJhdmVyc2VEZXB0aEZpcnN0ID0gZnVuY3Rpb24gKHZpc2l0b3IpIHtcbiAgdmFyIGRlY2lzaW9uID0gdmlzaXRvcih0aGlzKSB8fCBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24uREVTQ0VORDtcblxuICBzd2l0Y2ggKGRlY2lzaW9uKSB7XG4gICAgY2FzZSBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24uU1RPUDpcbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY2FzZSBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24uU0tJUDpcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGNhc2UgTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uLkRFU0NFTkQ6XG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmNoaWxkcmVuKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gX3N0ZXAyLnZhbHVlO1xuICAgICAgICB2YXIgc3RvcCA9IGNoaWxkLnRyYXZlcnNlRGVwdGhGaXJzdCh2aXNpdG9yKTtcblxuICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyAnVW5oYW5kbGVkIGNhc2UnO1xuICB9XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0xheWVydHJlZUNvbnRyb2xsZXInLCBbXSk7XG5teU1vZHVsZS5jb250cm9sbGVyKCduZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlcicsIExheWVydHJlZUNvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPHNwYW4gbmctaWY9XCI6OiFsYXllcnRyZWVDdHJsLmlzUm9vdFwiPnt7OjpsYXllcnRyZWVDdHJsLm5vZGUubmFtZX19PC9zcGFuPlxcbjxpbnB1dFxcbiAgdHlwZT1cImNoZWNrYm94XCJcXG4gIG5nLWlmPVwiOjpsYXllcnRyZWVDdHJsLm5vZGUgJiYgIWxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlblwiXFxuICBuZy1tb2RlbD1cImxheWVydHJlZUN0cmwuZ2V0U2V0QWN0aXZlXCJcXG4gIG5nLW1vZGVsLW9wdGlvbnM9XCJ7Z2V0dGVyU2V0dGVyOiB0cnVlfVwiLz5cXG48dWwgbmctaWY9XCI6OmxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlblwiPlxcbiAgPGxpXFxuICAgIG5nLXJlcGVhdD1cIm5vZGUgaW4gOjpsYXllcnRyZWVDdHJsLm5vZGUuY2hpbGRyZW5cIlxcbiAgICBuZ2VvLWxheWVydHJlZT1cIjo6bm9kZVwiXFxuICAgIG5nZW8tbGF5ZXJ0cmVlLW5vdHJvb3RcXG4gICAgbmdlby1sYXllcnRyZWUtbWFwPVwibGF5ZXJ0cmVlQ3RybC5tYXBcIlxcbiAgICBuZ2VvLWxheWVydHJlZS1ub2RlbGF5ZXJleHByPVwibGF5ZXJ0cmVlQ3RybC5ub2RlbGF5ZXJFeHByXCJcXG4gICAgbmdlby1sYXllcnRyZWUtbGlzdGVuZXJzZXhwcj1cImxheWVydHJlZUN0cmwubGlzdGVuZXJzRXhwclwiPlxcbiAgPC9saT5cXG48L3VsPlxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJnbWZMYXllcnRyZWVDb21wb25lbnQuJGluamVjdCA9IFtcIm5nZW9MYXllcnRyZWVUZW1wbGF0ZVVybFwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9MYXllcnRyZWVDb250cm9sbGVyLCB7IExheWVydHJlZUNvbnRyb2xsZXIgfSBmcm9tICduZ2VvL2xheWVydHJlZS9Db250cm9sbGVyLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2pzL3NyYy9jb2xsYXBzZS5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0xheWVydHJlZScsIFtuZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlci5uYW1lXSk7XG5teU1vZHVsZS52YWx1ZSgnbmdlb0xheWVydHJlZVRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9IGF0dHJzWyduZ2VvTGF5ZXJ0cmVlVGVtcGxhdGV1cmwnXTtcbiAgcmV0dXJuIHRlbXBsYXRlVXJsICE9PSB1bmRlZmluZWQgPyB0ZW1wbGF0ZVVybCA6ICduZ2VvL2xheWVydHJlZSc7XG59KTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZ2VvL2xheWVydHJlZScsIHJlcXVpcmUoJy4vY29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5cbmZ1bmN0aW9uIGdtZkxheWVydHJlZUNvbXBvbmVudChuZ2VvTGF5ZXJ0cmVlVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBuZ2VvTGF5ZXJ0cmVlVGVtcGxhdGVVcmwsXG4gICAgY29udHJvbGxlcjogTGF5ZXJ0cmVlQ29udHJvbGxlclxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9MYXllcnRyZWUnLCBnbWZMYXllcnRyZWVDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9DdXN0b21FdmVudCBmcm9tICduZ2VvL0N1c3RvbUV2ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCBvbE9ic2VydmFibGUgZnJvbSAnb2wvT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgb2xMYXllckdyb3VwIGZyb20gJ29sL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCBvbExheWVyTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2VXTVMgZnJvbSAnb2wvc291cmNlL0ltYWdlV01TLmpzJztcbmltcG9ydCBvbFNvdXJjZVRpbGVXTVMgZnJvbSAnb2wvc291cmNlL1RpbGVXTVMuanMnO1xuaW1wb3J0IG9sU291cmNlV01UUyBmcm9tICdvbC9zb3VyY2UvV01UUy5qcyc7XG5pbXBvcnQgbmdlb0xheWVySGVscGVyIGZyb20gJ25nZW8vbWFwL0xheWVySGVscGVyLmpzJztcbnZhciBCQUNLR1JPVU5ETEFZRVJHUk9VUF9OQU1FID0gJ2JhY2tncm91bmQnO1xuZXhwb3J0IHZhciBNYXBCYWNrZ3JvdW5kTGF5ZXJNYW5hZ2VyID0gZnVuY3Rpb24gKF9vbE9ic2VydmFibGUpIHtcbiAgTWFwQmFja2dyb3VuZExheWVyTWFuYWdlci4kaW5qZWN0ID0gW1wibmdlb0xheWVySGVscGVyXCJdO1xuXG4gIF9pbmhlcml0c0xvb3NlKE1hcEJhY2tncm91bmRMYXllck1hbmFnZXIsIF9vbE9ic2VydmFibGUpO1xuXG4gIGZ1bmN0aW9uIE1hcEJhY2tncm91bmRMYXllck1hbmFnZXIobmdlb0xheWVySGVscGVyKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfb2xPYnNlcnZhYmxlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy5tYXBVaWRzXyA9IHt9O1xuICAgIF90aGlzLm5nZW9MYXllckhlbHBlcl8gPSBuZ2VvTGF5ZXJIZWxwZXI7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IE1hcEJhY2tncm91bmRMYXllck1hbmFnZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXQgPSBmdW5jdGlvbiBnZXQobWFwKSB7XG4gICAgdmFyIG1hcFVpZCA9IG9sVXRpbEdldFVpZChtYXApLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIG1hcFVpZCBpbiB0aGlzLm1hcFVpZHNfID8gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmdldEdyb3VwRnJvbU1hcChtYXAsIEJBQ0tHUk9VTkRMQVlFUkdST1VQX05BTUUpLmdldExheWVycygpLml0ZW0oMCkgOiBudWxsO1xuICB9O1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQobWFwLCBsYXllcikge1xuICAgIHZhciBaSW5kZXggPSAtMjAwO1xuICAgIHZhciBtYXBVaWQgPSBvbFV0aWxHZXRVaWQobWFwKS50b1N0cmluZygpO1xuICAgIHZhciBwcmV2aW91cyA9IHRoaXMuZ2V0KG1hcCk7XG5cbiAgICBpZiAobGF5ZXIgIT09IG51bGwpIHtcbiAgICAgIGxheWVyLnNldFpJbmRleChaSW5kZXgpO1xuICAgICAgdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLnNldFpJbmRleFRvRmlyc3RMZXZlbENoaWxkcmVuKGxheWVyLCBaSW5kZXgpO1xuICAgIH1cblxuICAgIHZhciBiZ0dyb3VwID0gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmdldEdyb3VwRnJvbU1hcChtYXAsIEJBQ0tHUk9VTkRMQVlFUkdST1VQX05BTUUpO1xuXG4gICAgaWYgKHByZXZpb3VzICE9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmFzc2VydChtYXBVaWQgaW4gdGhpcy5tYXBVaWRzXyk7XG5cbiAgICAgIGlmIChsYXllciAhPT0gbnVsbCkge1xuICAgICAgICBiZ0dyb3VwLmdldExheWVycygpLnNldEF0KDAsIGxheWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJnR3JvdXAuZ2V0TGF5ZXJzKCkucmVtb3ZlQXQoMCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm1hcFVpZHNfW21hcFVpZF07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsYXllciAhPT0gbnVsbCkge1xuICAgICAgYmdHcm91cC5nZXRMYXllcnMoKS5pbnNlcnRBdCgwLCBsYXllcik7XG4gICAgICB0aGlzLm1hcFVpZHNfW21hcFVpZF0gPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBldmVudCA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ2NoYW5nZScsIHtcbiAgICAgIGN1cnJlbnQ6IGxheWVyLFxuICAgICAgcHJldmlvdXM6IHByZXZpb3VzXG4gICAgfSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICByZXR1cm4gcHJldmlvdXM7XG4gIH07XG5cbiAgX3Byb3RvLmdldE9wYWNpdHlCZ0xheWVyID0gZnVuY3Rpb24gZ2V0T3BhY2l0eUJnTGF5ZXIobWFwKSB7XG4gICAgdmFyIG1hcFVpZCA9IG9sVXRpbEdldFVpZChtYXApLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIG1hcFVpZCBpbiB0aGlzLm1hcFVpZHNfID8gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmdldEdyb3VwRnJvbU1hcChtYXAsIEJBQ0tHUk9VTkRMQVlFUkdST1VQX05BTUUpLmdldExheWVycygpLml0ZW0oMSkgOiBudWxsO1xuICB9O1xuXG4gIF9wcm90by5zZXRPcGFjaXR5QmdMYXllciA9IGZ1bmN0aW9uIHNldE9wYWNpdHlCZ0xheWVyKG1hcCwgbGF5ZXIpIHtcbiAgICB2YXIgYmdHcm91cCA9IHRoaXMubmdlb0xheWVySGVscGVyXy5nZXRHcm91cEZyb21NYXAobWFwLCBCQUNLR1JPVU5ETEFZRVJHUk9VUF9OQU1FKTtcbiAgICB2YXIgb3BhY2l0eUJhY2tncm91bmRMYXllciA9IHRoaXMuZ2V0T3BhY2l0eUJnTGF5ZXIobWFwKTtcblxuICAgIGlmIChvcGFjaXR5QmFja2dyb3VuZExheWVyKSB7XG4gICAgICB2YXIgcHJldmlvdXMgPSBiZ0dyb3VwLmdldExheWVycygpLnJlbW92ZShvcGFjaXR5QmFja2dyb3VuZExheWVyKTtcbiAgICAgIGxheWVyLnNldE9wYWNpdHkocHJldmlvdXMgPyBwcmV2aW91cy5nZXRPcGFjaXR5KCkgOiAwKTtcbiAgICAgIGxheWVyLnNldFZpc2libGUocHJldmlvdXMgPyBwcmV2aW91cy5nZXRWaXNpYmxlKCkgOiB0cnVlKTtcbiAgICB9XG5cbiAgICB2YXIgWkluZGV4ID0gLTEwMDtcbiAgICBsYXllci5zZXRaSW5kZXgoWkluZGV4KTtcbiAgICB0aGlzLm5nZW9MYXllckhlbHBlcl8uc2V0WkluZGV4VG9GaXJzdExldmVsQ2hpbGRyZW4obGF5ZXIsIFpJbmRleCk7XG4gICAgdmFyIGluZGV4ID0gYmdHcm91cC5nZXRMYXllcnMoKS5nZXRBcnJheSgpLmluZGV4T2YobGF5ZXIpO1xuXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgYmdHcm91cC5nZXRMYXllcnMoKS5wdXNoKGxheWVyKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnVwZGF0ZURpbWVuc2lvbnMgPSBmdW5jdGlvbiB1cGRhdGVEaW1lbnNpb25zKG1hcCwgZGltZW5zaW9ucykge1xuICAgIHZhciBiYXNlQmdMYXllciA9IHRoaXMuZ2V0KG1hcCk7XG5cbiAgICBpZiAoYmFzZUJnTGF5ZXIpIHtcbiAgICAgIHZhciBsYXllcnMgPSBbYmFzZUJnTGF5ZXJdO1xuXG4gICAgICBpZiAoYmFzZUJnTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICAgICAgbGF5ZXJzID0gYmFzZUJnTGF5ZXIuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKTtcbiAgICAgIH1cblxuICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJMYXllcikge1xuICAgICAgICAgIHZhciBoYXNVcGRhdGVzID0gZmFsc2U7XG4gICAgICAgICAgdmFyIHVwZGF0ZWREaW1lbnNpb25zID0ge307XG5cbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbGF5ZXIuZ2V0KCdkaW1lbnNpb25zJykpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdXBkYXRlZERpbWVuc2lvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICBoYXNVcGRhdGVzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaGFzVXBkYXRlcykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuXG4gICAgICAgICAgICBpZiAoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VXTVRTKSB7XG4gICAgICAgICAgICAgIHNvdXJjZS51cGRhdGVEaW1lbnNpb25zKHVwZGF0ZWREaW1lbnNpb25zKTtcbiAgICAgICAgICAgICAgc291cmNlLnJlZnJlc2goKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VUaWxlV01TIHx8IHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlSW1hZ2VXTVMpIHtcbiAgICAgICAgICAgICAgc291cmNlLnVwZGF0ZVBhcmFtcyh1cGRhdGVkRGltZW5zaW9ucyk7XG4gICAgICAgICAgICAgIHNvdXJjZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE1hcEJhY2tncm91bmRMYXllck1hbmFnZXI7XG59KG9sT2JzZXJ2YWJsZSk7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0JhY2tncm91bmRMYXllck1ncicsIFtuZ2VvTGF5ZXJIZWxwZXIubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb0JhY2tncm91bmRMYXllck1ncicsIE1hcEJhY2tncm91bmRMYXllck1hbmFnZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH0gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5leHBvcnQgZnVuY3Rpb24gRmVhdHVyZU92ZXJsYXkobWFuYWdlciwgaW5kZXgpIHtcbiAgdGhpcy5tYW5hZ2VyXyA9IG1hbmFnZXI7XG4gIHRoaXMuaW5kZXhfID0gaW5kZXg7XG4gIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xufVxuXG5GZWF0dXJlT3ZlcmxheS5wcm90b3R5cGUuYWRkRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHRoaXMubWFuYWdlcl8uYWRkRmVhdHVyZShmZWF0dXJlLCB0aGlzLmluZGV4Xyk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheS5wcm90b3R5cGUucmVtb3ZlRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHRoaXMubWFuYWdlcl8ucmVtb3ZlRmVhdHVyZShmZWF0dXJlLCB0aGlzLmluZGV4Xyk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubWFuYWdlcl8uaXNFbXB0eSh0aGlzLmluZGV4Xyk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubWFuYWdlcl8uY2xlYXIodGhpcy5pbmRleF8pO1xufTtcblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLnNldEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVzKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB0aGlzLmxpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcblxuICBpZiAoZmVhdHVyZXMgIT09IG51bGwpIHtcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICBfdGhpcy5hZGRGZWF0dXJlKGZlYXR1cmUpO1xuICAgIH0pO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3RlbihmZWF0dXJlcywgJ2FkZCcsIHRoaXMuaGFuZGxlRmVhdHVyZUFkZF8sIHRoaXMpKTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oZmVhdHVyZXMsICdyZW1vdmUnLCB0aGlzLmhhbmRsZUZlYXR1cmVSZW1vdmVfLCB0aGlzKSk7XG4gIH1cbn07XG5cbkZlYXR1cmVPdmVybGF5LnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChzdHlsZSkge1xuICB0aGlzLm1hbmFnZXJfLnNldFN0eWxlKHN0eWxlLCB0aGlzLmluZGV4Xyk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheS5wcm90b3R5cGUuaGFuZGxlRmVhdHVyZUFkZF8gPSBmdW5jdGlvbiAoZXZ0KSB7XG4gIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICB2YXIgZmVhdHVyZSA9IGV2dC5lbGVtZW50O1xuICAgIHRoaXMuYWRkRmVhdHVyZShmZWF0dXJlKTtcbiAgfVxufTtcblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLmhhbmRsZUZlYXR1cmVSZW1vdmVfID0gZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGZlYXR1cmUgPSBldnQuZWxlbWVudDtcbiAgICB0aGlzLnJlbW92ZUZlYXR1cmUoZmVhdHVyZSk7XG4gIH1cbn07XG5cbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRmVhdHVyZU92ZXJsYXknLCBbXSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXksIHsgRmVhdHVyZU92ZXJsYXkgfSBmcm9tICduZ2VvL21hcC9GZWF0dXJlT3ZlcmxheS5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ29sL29iai5qcyc7XG5pbXBvcnQgb2xTb3VyY2VWZWN0b3IgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uIGFzIHRvU3R5bGVGdW5jdGlvbiwgY3JlYXRlRGVmYXVsdFN0eWxlIGFzIG9sU3R5bGVEZWZhdWx0RnVuY3Rpb24gfSBmcm9tICdvbC9zdHlsZS9TdHlsZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gRmVhdHVyZU92ZXJsYXlNZ3IoKSB7XG4gIHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF8gPSB7fTtcbiAgdGhpcy5ncm91cHNfID0gW107XG4gIHRoaXMuc291cmNlXyA9IG5ldyBvbFNvdXJjZVZlY3Rvcih7XG4gICAgdXNlU3BhdGlhbEluZGV4OiBmYWxzZVxuICB9KTtcbiAgdGhpcy5sYXllcl8gPSBuZXcgb2xMYXllclZlY3Rvcih7XG4gICAgc291cmNlOiB0aGlzLnNvdXJjZV8sXG4gICAgc3R5bGU6IHRoaXMuc3R5bGVGdW5jdGlvbl8uYmluZCh0aGlzKSxcbiAgICB1cGRhdGVXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgICB1cGRhdGVXaGlsZUludGVyYWN0aW5nOiB0cnVlXG4gIH0pO1xufVxuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIChncm91cEluZGV4KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPj0gMCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPCB0aGlzLmdyb3Vwc18ubGVuZ3RoKTtcbiAgcmV0dXJuIGlzRW1wdHkodGhpcy5ncm91cHNfW2dyb3VwSW5kZXhdLmZlYXR1cmVzKTtcbn07XG5cbkZlYXR1cmVPdmVybGF5TWdyLnByb3RvdHlwZS5hZGRGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIGdyb3VwSW5kZXgpIHtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA+PSAwKTtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA8IHRoaXMuZ3JvdXBzXy5sZW5ndGgpO1xuICB2YXIgZmVhdHVyZVVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKS50b1N0cmluZygpO1xuICB0aGlzLmZlYXR1cmVVaWRUb0dyb3VwSW5kZXhfW2ZlYXR1cmVVaWRdID0gZ3JvdXBJbmRleDtcbiAgdGhpcy5ncm91cHNfW2dyb3VwSW5kZXhdLmZlYXR1cmVzW2ZlYXR1cmVVaWRdID0gZmVhdHVyZTtcbiAgdGhpcy5zb3VyY2VfLmFkZEZlYXR1cmUoZmVhdHVyZSk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUucmVtb3ZlRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBncm91cEluZGV4KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPj0gMCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPCB0aGlzLmdyb3Vwc18ubGVuZ3RoKTtcbiAgdmFyIGZlYXR1cmVVaWQgPSBvbFV0aWxHZXRVaWQoZmVhdHVyZSkudG9TdHJpbmcoKTtcbiAgZGVsZXRlIHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF9bZmVhdHVyZVVpZF07XG4gIGRlbGV0ZSB0aGlzLmdyb3Vwc19bZ3JvdXBJbmRleF0uZmVhdHVyZXNbZmVhdHVyZVVpZF07XG4gIHRoaXMuc291cmNlXy5yZW1vdmVGZWF0dXJlKGZlYXR1cmUpO1xufTtcblxuRmVhdHVyZU92ZXJsYXlNZ3IucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKGdyb3VwSW5kZXgpIHtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA+PSAwKTtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA8IHRoaXMuZ3JvdXBzXy5sZW5ndGgpO1xuICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3Vwc19bZ3JvdXBJbmRleF07XG5cbiAgZm9yICh2YXIgZmVhdHVyZVVpZCBpbiBncm91cC5mZWF0dXJlcykge1xuICAgIHRoaXMucmVtb3ZlRmVhdHVyZShncm91cC5mZWF0dXJlc1tmZWF0dXJlVWlkXSwgZ3JvdXBJbmRleCk7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydChpc0VtcHR5KGdyb3VwLmZlYXR1cmVzKSk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxheWVyXztcbn07XG5cbkZlYXR1cmVPdmVybGF5TWdyLnByb3RvdHlwZS5nZXRGZWF0dXJlT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGdyb3VwSW5kZXggPSB0aGlzLmdyb3Vwc18ubGVuZ3RoO1xuICB0aGlzLmdyb3Vwc18ucHVzaCh7XG4gICAgc3R5bGVGdW5jdGlvbjogb2xTdHlsZURlZmF1bHRGdW5jdGlvbixcbiAgICBmZWF0dXJlczoge31cbiAgfSk7XG4gIHJldHVybiBuZXcgRmVhdHVyZU92ZXJsYXkodGhpcywgZ3JvdXBJbmRleCk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgdGhpcy5sYXllcl8uc2V0TWFwKG1hcCk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUsIGdyb3VwSW5kZXgpIHtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA+PSAwKTtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA8IHRoaXMuZ3JvdXBzXy5sZW5ndGgpO1xuICB0aGlzLmdyb3Vwc19bZ3JvdXBJbmRleF0uc3R5bGVGdW5jdGlvbiA9IHN0eWxlID09PSBudWxsID8gb2xTdHlsZURlZmF1bHRGdW5jdGlvbiA6IHRvU3R5bGVGdW5jdGlvbihzdHlsZSk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuc3R5bGVGdW5jdGlvbl8gPSBmdW5jdGlvbiAoZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICB2YXIgZmVhdHVyZVVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKS50b1N0cmluZygpO1xuICBjb25zb2xlLmFzc2VydChmZWF0dXJlVWlkIGluIHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF8pO1xuICB2YXIgZ3JvdXBJbmRleCA9IHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF9bZmVhdHVyZVVpZF07XG4gIHZhciBncm91cCA9IHRoaXMuZ3JvdXBzX1tncm91cEluZGV4XTtcbiAgcmV0dXJuIGdyb3VwLnN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0ZlYXR1cmVPdmVybGF5TWdyJywgW25nZW9NYXBGZWF0dXJlT3ZlcmxheS5uYW1lXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvRmVhdHVyZU92ZXJsYXlNZ3InLCBGZWF0dXJlT3ZlcmxheU1ncik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJMYXllckhlbHBlci4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkaHR0cFwiLCBcIm5nZW9UaWxlc1ByZWxvYWRpbmdMaW1pdFwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICogYXMgb2xBcnJheSBmcm9tICdvbC9hcnJheS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRXTVRTQ2FwYWJpbGl0aWVzIGZyb20gJ29sL2Zvcm1hdC9XTVRTQ2FwYWJpbGl0aWVzLmpzJztcbmltcG9ydCBvbExheWVyR3JvdXAgZnJvbSAnb2wvbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IG9sTGF5ZXJJbWFnZSBmcm9tICdvbC9sYXllci9JbWFnZS5qcyc7XG5pbXBvcnQgb2xMYXllclRpbGUgZnJvbSAnb2wvbGF5ZXIvVGlsZS5qcyc7XG5pbXBvcnQgb2xMYXllckxheWVyIGZyb20gJ29sL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdvbC9vYmouanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2VXTVMgZnJvbSAnb2wvc291cmNlL0ltYWdlV01TLmpzJztcbmltcG9ydCBvbFNvdXJjZVRpbGVXTVMgZnJvbSAnb2wvc291cmNlL1RpbGVXTVMuanMnO1xuaW1wb3J0IG9sU291cmNlV01UUywgeyBvcHRpb25zRnJvbUNhcGFiaWxpdGllcyB9IGZyb20gJ29sL3NvdXJjZS9XTVRTLmpzJztcbmltcG9ydCB7IGFwcGVuZFBhcmFtcyBhcyBvbFVyaUFwcGVuZFBhcmFtcyB9IGZyb20gJ29sL3VyaS5qcyc7XG5pbXBvcnQgeyBTZXJ2ZXJUeXBlIH0gZnJvbSAnbmdlby9kYXRhc291cmNlL09HQy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gTGF5ZXJIZWxwZXIoJHEsICRodHRwLCBuZ2VvVGlsZXNQcmVsb2FkaW5nTGltaXQpIHtcbiAgdGhpcy4kcV8gPSAkcTtcbiAgdGhpcy4kaHR0cF8gPSAkaHR0cDtcbiAgdGhpcy50aWxlc1ByZWxvYWRpbmdMaW1pdF8gPSBuZ2VvVGlsZXNQcmVsb2FkaW5nTGltaXQgPT09IG51bGwgPyBJbmZpbml0eSA6IG5nZW9UaWxlc1ByZWxvYWRpbmdMaW1pdDtcbn1cbmV4cG9ydCB2YXIgTEFZRVJfTk9ERV9OQU1FX0tFWSA9ICdsYXllck5vZGVOYW1lJztcbmV4cG9ydCB2YXIgTk9ERV9JU19MRUFGID0gJ2xheWVySXNMZWFmJztcbmV4cG9ydCB2YXIgREFUQVNPVVJDRV9JRCA9ICdkYXRhU291cmNlSWQnO1xudmFyIEdST1VQX0tFWSA9ICdncm91cE5hbWUnO1xudmFyIFJFRlJFU0hfUEFSQU0gPSAncmFuZG9tJztcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmNvcHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGxheWVyRnJvbSwgbGF5ZXJUbywgb3B0X2V4Y2x1ZGVzKSB7XG4gIHZhciBwcm9wZXJ0aWVzID0gbGF5ZXJGcm9tLmdldFByb3BlcnRpZXMoKTtcblxuICBpZiAob3B0X2V4Y2x1ZGVzKSB7XG4gICAgdmFyIGV4Y2x1ZGVzID0gb3B0X2V4Y2x1ZGVzO1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDAsIF9rZXlzID0ga2V5czsgX2kgPCBfa2V5cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBrZXkgPSBfa2V5c1tfaV07XG5cbiAgICAgIGlmIChleGNsdWRlcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsYXllclRvLnNldChrZXksIHByb3BlcnRpZXNba2V5XSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxheWVyVG8uc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgfVxufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmNyZWF0ZUJhc2ljV01TTGF5ZXIgPSBmdW5jdGlvbiAoc291cmNlVVJMLCBzb3VyY2VMYXllcnNOYW1lLCBzb3VyY2VGb3JtYXQsIG9wdF9zZXJ2ZXJUeXBlLCBvcHRfdGltZSwgb3B0X3BhcmFtcywgb3B0X2Nyb3NzT3JpZ2luLCBvcHRfY3VzdG9tU291cmNlT3B0aW9ucywgb3B0X2N1c3RvbUxheWVyT3B0aW9ucykge1xuICB2YXIgcGFyYW1zID0ge1xuICAgIEZPUk1BVDogc291cmNlRm9ybWF0LFxuICAgIExBWUVSUzogc291cmNlTGF5ZXJzTmFtZVxuICB9O1xuICB2YXIgb2xTZXJ2ZXJUeXBlO1xuXG4gIGlmIChvcHRfdGltZSkge1xuICAgIHBhcmFtcy5USU1FID0gb3B0X3RpbWU7XG4gIH1cblxuICBpZiAob3B0X3NlcnZlclR5cGUpIHtcbiAgICBwYXJhbXMuU0VSVkVSVFlQRSA9IG9wdF9zZXJ2ZXJUeXBlO1xuICAgIG9sU2VydmVyVHlwZSA9IG9wdF9zZXJ2ZXJUeXBlLnJlcGxhY2UoU2VydmVyVHlwZS5RR0lTU0VSVkVSLCAncWdpcycpO1xuICB9XG5cbiAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRfY3VzdG9tU291cmNlT3B0aW9ucywge1xuICAgIHVybDogc291cmNlVVJMLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICAgIHNlcnZlclR5cGU6IG9sU2VydmVyVHlwZSxcbiAgICBjcm9zc09yaWdpbjogb3B0X2Nyb3NzT3JpZ2luXG4gIH0pO1xuICB2YXIgc291cmNlID0gbmV3IG9sU291cmNlSW1hZ2VXTVMob3B0aW9ucyk7XG5cbiAgaWYgKG9wdF9wYXJhbXMpIHtcbiAgICBzb3VyY2UudXBkYXRlUGFyYW1zKG9wdF9wYXJhbXMpO1xuICB9XG5cbiAgaWYgKCEob3B0X3BhcmFtcyAmJiBvcHRfcGFyYW1zLlNUWUxFUykpIHtcbiAgICBwYXJhbXMuU1RZTEVTID0gJyc7XG4gICAgdmFyIGkgPSBzb3VyY2VMYXllcnNOYW1lLnNwbGl0KCcsJykubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGkgPiAxKSB7XG4gICAgICBwYXJhbXMuU1RZTEVTLmNvbmNhdCgnLCcpO1xuICAgICAgaS0tO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsYXllck9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRfY3VzdG9tTGF5ZXJPcHRpb25zLCB7XG4gICAgc291cmNlOiBzb3VyY2VcbiAgfSk7XG4gIHJldHVybiBuZXcgb2xMYXllckltYWdlKGxheWVyT3B0aW9ucyk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuY3JlYXRlQmFzaWNXTVNMYXllckZyb21EYXRhU291cmNlID0gZnVuY3Rpb24gKGRhdGFTb3VyY2UsIG9wdF9jcm9zc09yaWdpbikge1xuICB2YXIgdXJsID0gZGF0YVNvdXJjZS53bXNVcmw7XG5cbiAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHVybCcpO1xuICB9XG5cbiAgdmFyIGxheWVyTmFtZXMgPSBkYXRhU291cmNlLmdldFdNU0xheWVyTmFtZXMoKS5qb2luKCcsJyk7XG4gIHZhciBzZXJ2ZXJUeXBlID0gZGF0YVNvdXJjZS5vZ2NTZXJ2ZXJUeXBlO1xuICB2YXIgaW1hZ2VUeXBlID0gZGF0YVNvdXJjZS5vZ2NJbWFnZVR5cGU7XG4gIHZhciBsYXllciA9IHRoaXMuY3JlYXRlQmFzaWNXTVNMYXllcih1cmwsIGxheWVyTmFtZXMsIGltYWdlVHlwZSwgc2VydmVyVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9wdF9jcm9zc09yaWdpbik7XG4gIGxheWVyLnNldFZpc2libGUoZGF0YVNvdXJjZS52aXNpYmxlKTtcbiAgbGF5ZXIuc2V0KCdxdWVyeVNvdXJjZUlkcycsIFtkYXRhU291cmNlLmlkXSk7XG4gIGxheWVyLnNldChEQVRBU09VUkNFX0lELCBkYXRhU291cmNlLmlkKTtcbiAgcmV0dXJuIGxheWVyO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmNyZWF0ZVdNVFNMYXllckZyb21DYXBhYmlsaXRpdGVzID0gZnVuY3Rpb24gKGNhcGFiaWxpdGllc1VSTCwgbGF5ZXJOYW1lLCBvcHRfbWF0cml4U2V0LCBvcHRfZGltZW5zaW9ucywgb3B0X2N1c3RvbU9wdGlvbnMsIG9wdF9taW5SZXNvbHV0aW9uLCBvcHRfbWF4UmVzb2x1dGlvbiwgb3B0X29wYWNpdHkpIHtcbiAgaWYgKG9wdF9tYXhSZXNvbHV0aW9uKSB7XG4gICAgb3B0X21heFJlc29sdXRpb24gPSBvcHRfbWF4UmVzb2x1dGlvbiAqIDEuMDAwMDAwMTtcbiAgfVxuXG4gIHZhciBwYXJzZXIgPSBuZXcgb2xGb3JtYXRXTVRTQ2FwYWJpbGl0aWVzKCk7XG4gIHZhciBsYXllciA9IG5ldyBvbExheWVyVGlsZSh7XG4gICAgcHJlbG9hZDogdGhpcy50aWxlc1ByZWxvYWRpbmdMaW1pdF8sXG4gICAgbWluUmVzb2x1dGlvbjogb3B0X21pblJlc29sdXRpb24sXG4gICAgbWF4UmVzb2x1dGlvbjogb3B0X21heFJlc29sdXRpb25cbiAgfSk7XG4gIHZhciAkcSA9IHRoaXMuJHFfO1xuICByZXR1cm4gdGhpcy4kaHR0cF8uZ2V0KGNhcGFiaWxpdGllc1VSTCwge1xuICAgIGNhY2hlOiB0cnVlXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgdmFyIHJlc3VsdDtcblxuICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICByZXN1bHQgPSBwYXJzZXIucmVhZChyZXNwb25zZS5kYXRhKTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdF9jdXN0b21PcHRpb25zLCBvcHRpb25zRnJvbUNhcGFiaWxpdGllcyhyZXN1bHQsIHtcbiAgICAgICAgbWF0cml4U2V0OiBvcHRfbWF0cml4U2V0LFxuICAgICAgICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsXG4gICAgICAgIGxheWVyOiBsYXllck5hbWVcbiAgICAgIH0pKTtcbiAgICAgIHZhciBzb3VyY2UgPSBuZXcgb2xTb3VyY2VXTVRTKG9wdGlvbnMpO1xuXG4gICAgICBpZiAob3B0X2RpbWVuc2lvbnMgJiYgIWlzRW1wdHkob3B0X2RpbWVuc2lvbnMpKSB7XG4gICAgICAgIHNvdXJjZS51cGRhdGVEaW1lbnNpb25zKG9wdF9kaW1lbnNpb25zKTtcbiAgICAgIH1cblxuICAgICAgbGF5ZXIuc2V0U291cmNlKHNvdXJjZSk7XG4gICAgICB2YXIgbGF5ZXJzID0gcmVzdWx0LkNvbnRlbnRzLkxheWVyO1xuICAgICAgdmFyIGwgPSBvbEFycmF5LmZpbmQobGF5ZXJzLCBmdW5jdGlvbiAoZWx0LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGVsdC5JZGVudGlmaWVyID09IGxheWVyTmFtZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWwpIHtcbiAgICAgICAgcmV0dXJuICRxLnJlamVjdChcIkxheWVyIFwiICsgbGF5ZXJOYW1lICsgXCIgbm90IGF2YWlsYWJsZSBpbiBXTVRTIGNhcGFiaWxpdGllcyBmcm9tIFwiICsgY2FwYWJpbGl0aWVzVVJMKTtcbiAgICAgIH1cblxuICAgICAgbGF5ZXIuc2V0KCdjYXBhYmlsaXRpZXNTdHlsZXMnLCBsLlN0eWxlKTtcblxuICAgICAgaWYgKG9wdF9vcGFjaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGF5ZXIuc2V0T3BhY2l0eShvcHRfb3BhY2l0eSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAkcS5yZXNvbHZlKGxheWVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJHEucmVqZWN0KFwiRmFpbGVkIHRvIGdldCBXTVRTIGNhcGFiaWxpdGllcyBmcm9tIFwiICsgY2FwYWJpbGl0aWVzVVJMKTtcbiAgfSk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuY3JlYXRlV01UU0xheWVyRnJvbUNhcGFiaWxpdGl0ZXNPYmogPSBmdW5jdGlvbiAoY2FwYWJpbGl0aWVzLCBsYXllckNhcCwgb3B0X2RpbWVuc2lvbnMpIHtcbiAgdmFyIG9wdGlvbnMgPSBvcHRpb25zRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXMsIHtcbiAgICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsXG4gICAgbGF5ZXI6IGxheWVyQ2FwLklkZW50aWZpZXJcbiAgfSk7XG4gIGNvbnNvbGUuYXNzZXJ0KG9wdGlvbnMpO1xuICB2YXIgc291cmNlID0gbmV3IG9sU291cmNlV01UUyhvcHRpb25zKTtcblxuICBpZiAob3B0X2RpbWVuc2lvbnMgJiYgIWlzRW1wdHkob3B0X2RpbWVuc2lvbnMpKSB7XG4gICAgc291cmNlLnVwZGF0ZURpbWVuc2lvbnMob3B0X2RpbWVuc2lvbnMpO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBvbExheWVyVGlsZSh7XG4gICAgcHJlbG9hZDogSW5maW5pdHksXG4gICAgc291cmNlOiBzb3VyY2VcbiAgfSk7XG4gIHJlc3VsdC5zZXQoJ2NhcGFiaWxpdGllc1N0eWxlcycsIGxheWVyQ2FwLlN0eWxlKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5jcmVhdGVCYXNpY0dyb3VwID0gZnVuY3Rpb24gKG9wdF9sYXllcnMpIHtcbiAgdmFyIGdyb3VwID0gbmV3IG9sTGF5ZXJHcm91cCgpO1xuXG4gIGlmIChvcHRfbGF5ZXJzKSB7XG4gICAgZ3JvdXAuc2V0TGF5ZXJzKG9wdF9sYXllcnMpO1xuICB9XG5cbiAgcmV0dXJuIGdyb3VwO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmdldEdyb3VwRnJvbU1hcCA9IGZ1bmN0aW9uIChtYXAsIGdyb3VwTmFtZSkge1xuICB2YXIgZ3JvdXBzID0gbWFwLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgdmFyIGdyb3VwO1xuICBncm91cHMuZ2V0QXJyYXkoKS5zb21lKGZ1bmN0aW9uIChleGlzdGluZ0dyb3VwKSB7XG4gICAgaWYgKGV4aXN0aW5nR3JvdXAuZ2V0KEdST1VQX0tFWSkgPT09IGdyb3VwTmFtZSkge1xuICAgICAgZ3JvdXAgPSBleGlzdGluZ0dyb3VwO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICghZ3JvdXApIHtcbiAgICBncm91cCA9IHRoaXMuY3JlYXRlQmFzaWNHcm91cCgpO1xuICAgIGdyb3VwLnNldChHUk9VUF9LRVksIGdyb3VwTmFtZSk7XG4gICAgbWFwLmFkZExheWVyKGdyb3VwKTtcbiAgfVxuXG4gIHJldHVybiBncm91cDtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5nZXRGbGF0TGF5ZXJzID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIGlmIChsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cCkge1xuICAgIHZhciBzdWJsYXllcnMgPSBsYXllci5nZXRMYXllcnMoKS5nZXRBcnJheSgpO1xuICAgIHZhciBoYXNHcm91cExheWVyID0gc3VibGF5ZXJzLnNvbWUoZnVuY3Rpb24gKHN1YmxheWVyKSB7XG4gICAgICByZXR1cm4gc3VibGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXA7XG4gICAgfSk7XG5cbiAgICBpZiAoIWhhc0dyb3VwTGF5ZXIpIHtcbiAgICAgIHJldHVybiBzdWJsYXllcnMuc2xpY2UoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcy5nZXRGbGF0TGF5ZXJzXyhsYXllciwgW10sIHVuZGVmaW5lZCk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuZ2V0RmxhdExheWVyc18gPSBmdW5jdGlvbiAobGF5ZXIsIGFycmF5LCBjb21wdXRlZE9wYWNpdHkpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgb3BhY2l0eSA9IGxheWVyLmdldE9wYWNpdHkoKTtcblxuICBpZiAoY29tcHV0ZWRPcGFjaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb21wdXRlZE9wYWNpdHkgKj0gb3BhY2l0eTtcbiAgfSBlbHNlIHtcbiAgICBjb21wdXRlZE9wYWNpdHkgPSBvcGFjaXR5O1xuICB9XG5cbiAgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckdyb3VwKSB7XG4gICAgdmFyIHN1YmxheWVycyA9IGxheWVyLmdldExheWVycygpO1xuICAgIHN1YmxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgICBfdGhpcy5nZXRGbGF0TGF5ZXJzXyhsLCBhcnJheSwgY29tcHV0ZWRPcGFjaXR5KTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJMYXllcikge1xuICAgIGlmICghYXJyYXkuaW5jbHVkZXMobGF5ZXIpKSB7XG4gICAgICBsYXllci5zZXQoJ2luaGVyaXRlZE9wYWNpdHknLCBjb21wdXRlZE9wYWNpdHksIHRydWUpO1xuICAgICAgYXJyYXkucHVzaChsYXllcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFycmF5O1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmdldExheWVyQnlOYW1lID0gZnVuY3Rpb24gKGxheWVyTmFtZSwgbGF5ZXJzKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIHZhciBmb3VuZCA9IG51bGw7XG4gIGxheWVycy5zb21lKGZ1bmN0aW9uIChsYXllcikge1xuICAgIGlmIChsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cCkge1xuICAgICAgdmFyIHN1YmxheWVycyA9IGxheWVyLmdldExheWVycygpLmdldEFycmF5KCk7XG4gICAgICBmb3VuZCA9IF90aGlzMi5nZXRMYXllckJ5TmFtZShsYXllck5hbWUsIHN1YmxheWVycyk7XG4gICAgfSBlbHNlIGlmIChsYXllci5nZXQoTEFZRVJfTk9ERV9OQU1FX0tFWSkgPT09IGxheWVyTmFtZSkge1xuICAgICAgZm91bmQgPSBsYXllcjtcbiAgICB9XG5cbiAgICByZXR1cm4gISFmb3VuZDtcbiAgfSk7XG4gIHJldHVybiBmb3VuZDtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5nZXRXTVRTTGVnZW5kVVJMID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIHZhciB1cmw7XG4gIHZhciBzdHlsZXMgPSBsYXllci5nZXQoJ2NhcGFiaWxpdGllc1N0eWxlcycpO1xuXG4gIGlmIChzdHlsZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBsZWdlbmRVUkwgPSBzdHlsZXNbMF0ubGVnZW5kVVJMO1xuXG4gICAgaWYgKGxlZ2VuZFVSTCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cmwgPSBsZWdlbmRVUkxbMF0uaHJlZjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmdldFdNU0xlZ2VuZFVSTCA9IGZ1bmN0aW9uICh1cmwsIGxheWVyTmFtZSwgb3B0X3NjYWxlLCBvcHRfbGVnZW5kUnVsZSwgb3B0X2xlZ2VuZFdpZHRoLCBvcHRfbGVnZW5kSGVpZ2h0LCBvcHRfc2VydmVydHlwZSwgb3B0X2RwaSwgb3B0X2Jib3gsIG9wdF9zcnMsIG9wdF9hZGRpdGlvbmFsUXVlcnlTdHJpbmcpIHtcbiAgaWYgKCF1cmwpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIHF1ZXJ5U3RyaW5nID0ge1xuICAgIEZPUk1BVDogJ2ltYWdlL3BuZycsXG4gICAgVFJBTlNQQVJFTlQ6IHRydWUsXG4gICAgU0VSVklDRTogJ1dNUycsXG4gICAgVkVSU0lPTjogJzEuMS4xJyxcbiAgICBSRVFVRVNUOiAnR2V0TGVnZW5kR3JhcGhpYycsXG4gICAgTEFZRVI6IGxheWVyTmFtZVxuICB9O1xuXG4gIGlmIChvcHRfc2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHF1ZXJ5U3RyaW5nLlNDQUxFID0gb3B0X3NjYWxlO1xuICB9XG5cbiAgaWYgKG9wdF9sZWdlbmRSdWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBxdWVyeVN0cmluZy5SVUxFID0gb3B0X2xlZ2VuZFJ1bGU7XG5cbiAgICBpZiAob3B0X2xlZ2VuZFdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHF1ZXJ5U3RyaW5nLldJRFRIID0gb3B0X2xlZ2VuZFdpZHRoO1xuICAgIH1cblxuICAgIGlmIChvcHRfbGVnZW5kSGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHF1ZXJ5U3RyaW5nLkhFSUdIVCA9IG9wdF9sZWdlbmRIZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdF9zZXJ2ZXJ0eXBlID09ICdxZ2lzJykge1xuICAgIGlmIChvcHRfZHBpICE9IHVuZGVmaW5lZCkge1xuICAgICAgcXVlcnlTdHJpbmcuRFBJID0gb3B0X2RwaTtcbiAgICB9XG5cbiAgICBpZiAob3B0X2Jib3ggIT0gdW5kZWZpbmVkICYmIG9wdF9zcnMgIT0gdW5kZWZpbmVkICYmIG9wdF9zY2FsZSAhPSB1bmRlZmluZWQgJiYgb3B0X2RwaSAhPSB1bmRlZmluZWQgJiYgb3B0X2xlZ2VuZFJ1bGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBxdWVyeVN0cmluZy5CQk9YID0gb3B0X2Jib3guam9pbignLCcpO1xuICAgICAgcXVlcnlTdHJpbmcuU1JTID0gb3B0X3NycztcbiAgICAgIHF1ZXJ5U3RyaW5nLldJRFRIID0gTWF0aC5yb3VuZCgob3B0X2Jib3hbMl0gLSBvcHRfYmJveFswXSkgLyBvcHRfc2NhbGUgKiAzOS4zNyAqIG9wdF9kcGkpO1xuICAgICAgcXVlcnlTdHJpbmcuSEVJR0hUID0gTWF0aC5yb3VuZCgob3B0X2Jib3hbM10gLSBvcHRfYmJveFsxXSkgLyBvcHRfc2NhbGUgKiAzOS4zNyAqIG9wdF9kcGkpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChvcHRfYWRkaXRpb25hbFF1ZXJ5U3RyaW5nKSB7XG4gICAgT2JqZWN0LmFzc2lnbihxdWVyeVN0cmluZywgb3B0X2FkZGl0aW9uYWxRdWVyeVN0cmluZyk7XG4gIH1cblxuICByZXR1cm4gb2xVcmlBcHBlbmRQYXJhbXModXJsLCBxdWVyeVN0cmluZyk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuaXNMYXllclZpc2libGUgPSBmdW5jdGlvbiAobGF5ZXIsIG1hcCkge1xuICBpZiAoIWxheWVyLmdldFZpc2libGUoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpO1xuXG4gIGlmIChjdXJyZW50UmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgfVxuXG4gIHJldHVybiBjdXJyZW50UmVzb2x1dGlvbiA+IGxheWVyLmdldE1pblJlc29sdXRpb24oKSAmJiBjdXJyZW50UmVzb2x1dGlvbiA8IGxheWVyLmdldE1heFJlc29sdXRpb24oKTtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5yZWZyZXNoV01TTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgdmFyIHNvdXJjZV8gPSBsYXllci5nZXRTb3VyY2UoKTtcbiAgY29uc29sZS5hc3NlcnQoc291cmNlXyBpbnN0YW5jZW9mIG9sU291cmNlSW1hZ2VXTVMgfHwgc291cmNlXyBpbnN0YW5jZW9mIG9sU291cmNlVGlsZVdNUyk7XG4gIHZhciBzb3VyY2UgPSBzb3VyY2VfO1xuICB2YXIgcGFyYW1zID0gc291cmNlLmdldFBhcmFtcygpO1xuICBwYXJhbXNbUkVGUkVTSF9QQVJBTV0gPSBNYXRoLnJhbmRvbSgpO1xuICBzb3VyY2UudXBkYXRlUGFyYW1zKHBhcmFtcyk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuc2V0WkluZGV4VG9GaXJzdExldmVsQ2hpbGRyZW4gPSBmdW5jdGlvbiAoZWxlbWVudCwgWkluZGV4KSB7XG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2Ygb2xMYXllckdyb3VwKSB7XG4gICAgdmFyIGlubmVyR3JvdXBMYXllcnMgPSBlbGVtZW50LmdldExheWVycygpO1xuICAgIGlubmVyR3JvdXBMYXllcnMuZm9yRWFjaChmdW5jdGlvbiAoaW5uZXJMYXllcikge1xuICAgICAgcmV0dXJuIGlubmVyTGF5ZXIuc2V0WkluZGV4KFpJbmRleCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS51cGRhdGVXTVNMYXllclN0YXRlID0gZnVuY3Rpb24gKGxheWVyLCBuYW1lcywgb3B0X3RpbWUpIHtcbiAgaWYgKG5hbWVzLmxlbmd0aCA8PSAwKSB7XG4gICAgbGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgbGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZUltYWdlV01TKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBzb3VyY2UgdHlwZScpO1xuICAgIH1cblxuICAgIGlmIChvcHRfdGltZSkge1xuICAgICAgc291cmNlLnVwZGF0ZVBhcmFtcyh7XG4gICAgICAgICdMQVlFUlMnOiBuYW1lcyxcbiAgICAgICAgJ1RJTUUnOiBvcHRfdGltZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdXJjZS51cGRhdGVQYXJhbXMoe1xuICAgICAgICAnTEFZRVJTJzogbmFtZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmdldFF1ZXJ5U291cmNlSWRzID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIHJldHVybiBsYXllci5nZXQoJ3F1ZXJ5U291cmNlSWRzJyk7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0xheWVySGVscGVyJywgW10pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb0xheWVySGVscGVyJywgTGF5ZXJIZWxwZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibWFwQ29tcG9uZW50LiRpbmplY3QgPSBbXCIkd2luZG93XCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sTWFwIGZyb20gJ29sL01hcC5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb01hcCcsIFtdKTtcblxuZnVuY3Rpb24gbWFwQ29tcG9uZW50KCR3aW5kb3cpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICB2YXIgYXR0ciA9ICduZ2VvTWFwJztcbiAgICAgIHZhciBwcm9wID0gYXR0cnNbYXR0cl07XG4gICAgICB2YXIgbWFwID0gc2NvcGUuJGV2YWwocHJvcCk7XG4gICAgICBjb25zb2xlLmFzc2VydChtYXAgaW5zdGFuY2VvZiBvbE1hcCk7XG4gICAgICBtYXAuc2V0VGFyZ2V0KGVsZW1lbnRbMF0pO1xuICAgICAgdmFyIG1hbmFnZVJlc2l6ZUF0dHIgPSAnbmdlb01hcE1hbmFnZVJlc2l6ZSc7XG4gICAgICB2YXIgbWFuYWdlUmVzaXplUHJvcCA9IGF0dHJzW21hbmFnZVJlc2l6ZUF0dHJdO1xuICAgICAgdmFyIG1hbmFnZVJlc2l6ZSA9IHNjb3BlLiRldmFsKG1hbmFnZVJlc2l6ZVByb3ApO1xuXG4gICAgICBpZiAobWFuYWdlUmVzaXplKSB7XG4gICAgICAgIHZhciByZXNpemVUcmFuc2l0aW9uQXR0ciA9ICduZ2VvTWFwUmVzaXplVHJhbnNpdGlvbic7XG4gICAgICAgIHZhciByZXNpemVUcmFuc2l0aW9uUHJvcCA9IGF0dHJzW3Jlc2l6ZVRyYW5zaXRpb25BdHRyXTtcbiAgICAgICAgdmFyIHJlc2l6ZVRyYW5zaXRpb24gPSBzY29wZS4kZXZhbChyZXNpemVUcmFuc2l0aW9uUHJvcCk7XG4gICAgICAgIGxpc3Rlbigkd2luZG93LCAncmVzaXplJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIGlmIChyZXNpemVUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdmFyIGxvb3AgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgYWRqdXN0U2l6ZSA9IGZ1bmN0aW9uIGFkanVzdFNpemUoKSB7XG4gICAgICAgICAgICAgIG1hcC51cGRhdGVTaXplKCk7XG4gICAgICAgICAgICAgIG1hcC5yZW5kZXJTeW5jKCk7XG5cbiAgICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgICAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhZGp1c3RTaXplKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPiByZXNpemVUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgbG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhZGp1c3RTaXplKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hcC51cGRhdGVTaXplKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnbmdlb01hcCcsIG1hcENvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWFwQmFja2dyb3VuZExheWVyTWdyIGZyb20gJ25nZW8vbWFwL0JhY2tncm91bmRMYXllck1nci5qcyc7XG5pbXBvcnQgbmdlb01hcENvbXBvbmVudCBmcm9tICduZ2VvL21hcC9jb21wb25lbnQuanMnO1xuaW1wb3J0IG5nZW9NYXBGZWF0dXJlT3ZlcmxheU1nciBmcm9tICduZ2VvL21hcC9GZWF0dXJlT3ZlcmxheU1nci5qcyc7XG5pbXBvcnQgbmdlb01hcFJlY2VudGVyIGZyb20gJ25nZW8vbWFwL3JlY2VudGVyLmpzJztcbmltcG9ydCBuZ2VvTWFwUmVzaXplbWFwIGZyb20gJ25nZW8vbWFwL3Jlc2l6ZW1hcC5qcyc7XG5pbXBvcnQgbmdlb01hcFNjYWxlc2VsZWN0b3IgZnJvbSAnbmdlby9tYXAvc2NhbGVzZWxlY3Rvci5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb01hcE1vZHVsZScsIFtuZ2VvTWFwQmFja2dyb3VuZExheWVyTWdyLm5hbWUsIG5nZW9NYXBDb21wb25lbnQubmFtZSwgbmdlb01hcEZlYXR1cmVPdmVybGF5TWdyLm5hbWUsIG5nZW9NYXBSZWNlbnRlci5uYW1lLCBuZ2VvTWFwUmVzaXplbWFwLm5hbWUsIG5nZW9NYXBTY2FsZXNlbGVjdG9yLm5hbWVdKTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUmVjZW50ZXInLCBbXSk7XG5cbmZ1bmN0aW9uIG1hcFJlc2VudGVyQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24gbGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcbiAgICAgIHZhciBtYXBFeHByID0gJGF0dHJzLm5nZW9SZWNlbnRlck1hcDtcbiAgICAgIHZhciBtYXAgPSAkc2NvcGUuJGV2YWwobWFwRXhwcik7XG5cbiAgICAgIGZ1bmN0aW9uIHJlY2VudGVyKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IGVsZW1lbnQuYXR0cignbmdlby1leHRlbnQnKTtcblxuICAgICAgICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG5cbiAgICAgICAgICBpZiAoc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2l6ZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hcC5nZXRWaWV3KCkuZml0KCRzY29wZS4kZXZhbChleHRlbnQpLCB7XG4gICAgICAgICAgICBzaXplOiBzaXplXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgem9vbSA9IGVsZW1lbnQuYXR0cignbmdlby16b29tJyk7XG5cbiAgICAgICAgaWYgKHpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG1hcC5nZXRWaWV3KCkuc2V0Wm9vbSgkc2NvcGUuJGV2YWwoem9vbSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRlbGVtZW50Lm9uKCdjbGljaycsICcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJlY2VudGVyKGFuZ3VsYXIuZWxlbWVudCgkKHRoaXMpKSk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGNlID0gZnVuY3Rpb24gY2UoZXZlbnQpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gZXZlbnQudGFyZ2V0Lm9wdGlvbnNbZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXhdO1xuICAgICAgICByZWNlbnRlcihhbmd1bGFyLmVsZW1lbnQoc2VsZWN0ZWQpKTtcbiAgICAgIH07XG5cbiAgICAgICRlbGVtZW50Lm9uKHtcbiAgICAgICAgY2hhbmdlOiBjZVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9SZWNlbnRlcicsIG1hcFJlc2VudGVyQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIm1hcFJlc2l6ZUNvbXBvbmVudC4kaW5qZWN0ID0gW1wiJHdpbmRvd1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG9sTWFwIGZyb20gJ29sL01hcC5qcyc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1Jlc2l6ZW1hcCcsIFtdKTtcblxuZnVuY3Rpb24gbWFwUmVzaXplQ29tcG9uZW50KCR3aW5kb3cpIHtcbiAgdmFyIGR1cmF0aW9uID0gMTAwMDtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICB2YXIgYXR0ciA9ICduZ2VvUmVzaXplbWFwJztcbiAgICAgIHZhciBwcm9wID0gYXR0cnNbYXR0cl07XG4gICAgICB2YXIgbWFwID0gc2NvcGUuJGV2YWwocHJvcCk7XG4gICAgICBjb25zb2xlLmFzc2VydChtYXAgaW5zdGFuY2VvZiBvbE1hcCk7XG4gICAgICB2YXIgc3RhdGVFeHByID0gYXR0cnMubmdlb1Jlc2l6ZW1hcFN0YXRlO1xuICAgICAgY29uc29sZS5hc3NlcnQoc3RhdGVFeHByICE9PSB1bmRlZmluZWQpO1xuICAgICAgdmFyIHN0YXJ0O1xuICAgICAgdmFyIGFuaW1hdGlvbkRlbGF5S2V5O1xuXG4gICAgICB2YXIgYW5pbWF0aW9uRGVsYXkgPSBmdW5jdGlvbiBhbmltYXRpb25EZWxheSgpIHtcbiAgICAgICAgbWFwLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgbWFwLnJlbmRlclN5bmMoKTtcblxuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0IDwgZHVyYXRpb24pIHtcbiAgICAgICAgICBhbmltYXRpb25EZWxheUtleSA9ICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZWxlbWVudC5vbigndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWFwLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgbWFwLnJlbmRlclN5bmMoKTtcbiAgICAgIH0pO1xuICAgICAgc2NvcGUuJHdhdGNoKHN0YXRlRXhwciwgZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgIGlmIChuZXdWYWwgIT0gb2xkVmFsKSB7XG4gICAgICAgICAgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRGVsYXlLZXkpO1xuICAgICAgICAgIGFuaW1hdGlvbkRlbGF5S2V5ID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRGVsYXkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnbmdlb1Jlc2l6ZW1hcCcsIG1hcFJlc2l6ZUNvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIGJ0bi1ibG9ja1wiIG5nLWNsYXNzPVwiOjp7XFwnZHJvcHVwXFwnOiBzY2FsZXNlbGVjdG9yQ3RybC5vcHRpb25zLmRyb3B1cH1cIj5cXG4gIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGRyb3Bkb3duLXRvZ2dsZVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj5cXG4gICAgPHNwYW4gbmctYmluZC1odG1sPVwic2NhbGVzZWxlY3RvckN0cmwuY3VycmVudFNjYWxlIHwgbmdlb1NjYWxpZnkgfCBuZ2VvVHJ1c3RIdG1sXCI+PC9zcGFuPlxcbiAgPC9idXR0b24+XFxuICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51IGJ0bi1ibG9ja1wiIHJvbGU9XCJtZW51XCI+XFxuICAgIDxsaSBuZy1yZXBlYXQ9XCJ6b29tTGV2ZWwgaW4gOjpzY2FsZXNlbGVjdG9yQ3RybC5nZXRab29tcygpXCI+XFxuICAgICAgPGEgaHJlZiBuZy1jbGljaz1cInNjYWxlc2VsZWN0b3JDdHJsLmNoYW5nZVpvb20oem9vbUxldmVsKVwiXFxuICAgICAgICAgbmctYmluZC1odG1sPVwic2NhbGVzZWxlY3RvckN0cmwuZ2V0U2NhbGUoem9vbUxldmVsKSB8IG5nZW9TY2FsaWZ5IHwgbmdlb1RydXN0SHRtbFwiPlxcbiAgICAgIDwvYT5cXG4gICAgPC9saT5cXG4gIDwvdWw+XFxuPC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG9sTWFwIGZyb20gJ29sL01hcC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2Ryb3Bkb3duLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvU2NhbGVzZWxlY3RvcicsIFtdKTtcbm15TW9kdWxlLnZhbHVlKCduZ2VvU2NhbGVzZWxlY3RvclRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9IGF0dHJzLm5nZW9TY2FsZXNlbGVjdG9yVGVtcGxhdGV1cmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9tYXAvc2NhbGVzZWxlY3Rvcic7XG59KTtcbm15TW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZ2VvL21hcC9zY2FsZXNlbGVjdG9yJywgcmVxdWlyZSgnLi9zY2FsZXNlbGVjdG9yLmh0bWwnKSk7XG59XSk7XG5cbnZhciBtYXBTY2FsZXNlbGVjdG9yQ29tcG9uZW50ID0gZnVuY3Rpb24gbWFwU2NhbGVzZWxlY3RvckNvbXBvbmVudChuZ2VvU2NhbGVzZWxlY3RvclRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZTogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiAnTmdlb1NjYWxlc2VsZWN0b3JDb250cm9sbGVyJyxcbiAgICB0ZW1wbGF0ZVVybDogbmdlb1NjYWxlc2VsZWN0b3JUZW1wbGF0ZVVybFxuICB9O1xufTtcblxubWFwU2NhbGVzZWxlY3RvckNvbXBvbmVudC4kaW5qZWN0ID0gW1wibmdlb1NjYWxlc2VsZWN0b3JUZW1wbGF0ZVVybFwiXTtcbm1hcFNjYWxlc2VsZWN0b3JDb21wb25lbnQuJGluamVjdCA9IFtcIm5nZW9TY2FsZXNlbGVjdG9yVGVtcGxhdGVVcmxcIl07XG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9TY2FsZXNlbGVjdG9yJywgbWFwU2NhbGVzZWxlY3RvckNvbXBvbmVudCk7XG5leHBvcnQgdmFyIFNjYWxlc2VsZWN0b3JDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBTY2FsZXNlbGVjdG9yQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGF0dHJzXCIsIFwibmdlb1NjYWxlU2VsZWN0b3JPcHRpb25zXCJdO1xuXG4gIGZ1bmN0aW9uIFNjYWxlc2VsZWN0b3JDb250cm9sbGVyKCRzY29wZSwgJGF0dHJzLCBuZ2VvU2NhbGVTZWxlY3Rvck9wdGlvbnMpIHtcbiAgICB0aGlzLnNjYWxlcyA9IG5nZW9TY2FsZVNlbGVjdG9yT3B0aW9ucy52YWx1ZXM7XG4gICAgdmFyIG1hcEV4cHIgPSAkYXR0cnMubmdlb1NjYWxlc2VsZWN0b3JNYXA7XG4gICAgdGhpcy5tYXBfID0gJHNjb3BlLiRldmFsKG1hcEV4cHIpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMubWFwXyBpbnN0YW5jZW9mIG9sTWFwKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBuZ2VvU2NhbGVTZWxlY3Rvck9wdGlvbnM7XG4gICAgdGhpcy4kc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMucmVzb2x1dGlvbkNoYW5nZUtleV8gPSBudWxsO1xuICAgIHRoaXMuY3VycmVudFNjYWxlID0gdW5kZWZpbmVkO1xuICAgIHZhciB2aWV3ID0gdGhpcy5tYXBfLmdldFZpZXcoKTtcbiAgICB2YXIgZHBpID0gOTY7XG4gICAgdmFyIGluY2hlc1Blck1ldGVyID0gMzkuMzc7XG4gICAgdmFyIHdhcm5pbmdSYXRpbyA9IDEuNTtcblxuICAgIGlmICh0aGlzLnNjYWxlcykge1xuICAgICAgZm9yICh2YXIgem9vbSA9IHZpZXcuZ2V0TWluWm9vbSgpOyB6b29tIDw9IHZpZXcuZ2V0TWF4Wm9vbSgpOyB6b29tKyspIHtcbiAgICAgICAgdmFyIGNhbGN1bGF0ZWRTY2FsZSA9IE1hdGgucm91bmQodmlldy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh6b29tKSAqIGluY2hlc1Blck1ldGVyICogZHBpKTtcbiAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZXNbem9vbV07XG5cbiAgICAgICAgaWYgKHNjYWxlID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIk1pc3Npbmcgc2NhbGUgZm9yIHpvb20gJ1wiICsgem9vbSArIFwiJywgc2V0IGl0IHRvIHJlYWwgY2FsY3VsYXRlZCBzY2FsZSAnXCIgKyBjYWxjdWxhdGVkU2NhbGUgKyBcIicuXCIpO1xuICAgICAgICAgIHRoaXMuc2NhbGVzW3pvb21dID0gY2FsY3VsYXRlZFNjYWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChNYXRoLmV4cChNYXRoLmFicyhNYXRoLmxvZyhjYWxjdWxhdGVkU2NhbGUgLyBzY2FsZSkpKSA+IHdhcm5pbmdSYXRpbykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQmlnIGRpZmZlcmVuY2UgYmV0d2VlbiBjb25maWd1cmVkIHNjYWxlICdcIiArIHNjYWxlICsgXCInIFwiICsgKFwiZm9yIHpvb20gJ1wiICsgem9vbSArIFwiJyBhbmQgcmVhbCBjYWxjdWxhdGVkIHNjYWxlICdcIiArIGNhbGN1bGF0ZWRTY2FsZSArIFwiJy5cIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNjYWxlcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBfem9vbSA9IHZpZXcuZ2V0TWluWm9vbSgpOyBfem9vbSA8PSB2aWV3LmdldE1heFpvb20oKTsgX3pvb20rKykge1xuICAgICAgICB0aGlzLnNjYWxlc1tfem9vbV0gPSBNYXRoLnJvdW5kKHZpZXcuZ2V0UmVzb2x1dGlvbkZvclpvb20oX3pvb20pICogaW5jaGVzUGVyTWV0ZXIgKiBkcGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjdXJyZW50Wm9vbSA9IHRoaXMubWFwXy5nZXRWaWV3KCkuZ2V0Wm9vbSgpO1xuXG4gICAgaWYgKGN1cnJlbnRab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuY3VycmVudFNjYWxlID0gdGhpcy5nZXRTY2FsZShjdXJyZW50Wm9vbSk7XG4gICAgfVxuXG4gICAgbGlzdGVuKHRoaXMubWFwXywgJ2NoYW5nZTp2aWV3JywgdGhpcy5oYW5kbGVWaWV3Q2hhbmdlXywgdGhpcyk7XG4gICAgdGhpcy5yZWdpc3RlclJlc29sdXRpb25DaGFuZ2VMaXN0ZW5lcl8oKTtcbiAgICAkc2NvcGUuc2NhbGVzZWxlY3RvckN0cmwgPSB0aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFNjYWxlc2VsZWN0b3JDb250cm9sbGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0Wm9vbXMgPSBmdW5jdGlvbiBnZXRab29tcygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zY2FsZXMpLm1hcChOdW1iZXIpO1xuICB9O1xuXG4gIF9wcm90by5nZXRTY2FsZSA9IGZ1bmN0aW9uIGdldFNjYWxlKHpvb20pIHtcbiAgICBpZiAoem9vbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBzY2FsZSA9IHRoaXMuc2NhbGVzW3pvb21dO1xuXG4gICAgaWYgKHNjYWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBzY2FsZTtcbiAgICB9XG5cbiAgICB2YXIgZmxvb3JlZFpvb20gPSBNYXRoLmZsb29yKHpvb20pO1xuICAgIHZhciBsb3dlclNjYWxlID0gdGhpcy5zY2FsZXNbZmxvb3JlZFpvb21dO1xuICAgIHZhciB1cHBlclNjYWxlID0gdGhpcy5zY2FsZXNbZmxvb3JlZFpvb20gKyAxXTtcbiAgICBzY2FsZSA9IGxvd2VyU2NhbGUgLSAobG93ZXJTY2FsZSAtIHVwcGVyU2NhbGUpICogKHpvb20gLSBmbG9vcmVkWm9vbSk7XG4gICAgcmV0dXJuIGlzTmFOKHNjYWxlKSA/IHVuZGVmaW5lZCA6IE1hdGgucm91bmQoc2NhbGUpO1xuICB9O1xuXG4gIF9wcm90by5jaGFuZ2Vab29tID0gZnVuY3Rpb24gY2hhbmdlWm9vbSh6b29tKSB7XG4gICAgdGhpcy5tYXBfLmdldFZpZXcoKS5zZXRab29tKHpvb20pO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVSZXNvbHV0aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVJlc29sdXRpb25DaGFuZ2VfKGUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHZpZXcgPSB0aGlzLm1hcF8uZ2V0VmlldygpO1xuICAgIHZhciBjdXJyZW50U2NhbGUgPSB0aGlzLmdldFNjYWxlKHZpZXcuZ2V0Wm9vbSgpKTtcblxuICAgIGlmIChjdXJyZW50U2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy4kc2NvcGVfLiRhcHBseUFzeW5jKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuY3VycmVudFNjYWxlID0gY3VycmVudFNjYWxlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVWaWV3Q2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVZpZXdDaGFuZ2VfKGUpIHtcbiAgICB0aGlzLnJlZ2lzdGVyUmVzb2x1dGlvbkNoYW5nZUxpc3RlbmVyXygpO1xuICAgIHRoaXMuaGFuZGxlUmVzb2x1dGlvbkNoYW5nZV8obnVsbCk7XG4gIH07XG5cbiAgX3Byb3RvLnJlZ2lzdGVyUmVzb2x1dGlvbkNoYW5nZUxpc3RlbmVyXyA9IGZ1bmN0aW9uIHJlZ2lzdGVyUmVzb2x1dGlvbkNoYW5nZUxpc3RlbmVyXygpIHtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uQ2hhbmdlS2V5XyAhPT0gbnVsbCkge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnJlc29sdXRpb25DaGFuZ2VLZXlfKTtcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IHRoaXMubWFwXy5nZXRWaWV3KCk7XG4gICAgdGhpcy5yZXNvbHV0aW9uQ2hhbmdlS2V5XyA9IGxpc3Rlbih2aWV3LCAnY2hhbmdlOnJlc29sdXRpb24nLCB0aGlzLmhhbmRsZVJlc29sdXRpb25DaGFuZ2VfLCB0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gU2NhbGVzZWxlY3RvckNvbnRyb2xsZXI7XG59KCk7XG5teU1vZHVsZS5jb250cm9sbGVyKCdOZ2VvU2NhbGVzZWxlY3RvckNvbnRyb2xsZXInLCBTY2FsZXNlbGVjdG9yQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgJ2Jvb3RzdHJhcC9qcy9zcmMvYWxlcnQuanMnO1xuaW1wb3J0IG5nZW9NZXNzYWdlUG9wdXAsIHsgTWVzc2FnZVBvcHVwIH0gZnJvbSAnbmdlby9tZXNzYWdlL1BvcHVwLmpzJztcbmltcG9ydCBuZ2VvTWVzc2FnZU1lc3NhZ2UsIHsgTWVzc2FnZVR5cGUgfSBmcm9tICduZ2VvL21lc3NhZ2UvTWVzc2FnZS5qcyc7XG5pbXBvcnQgJ25nZW8vc2Fzcy9mb250LnNjc3MnO1xuZXhwb3J0IHZhciBNZXNzYWdlRGlzY2xhaW1lclNlcnZpY2UgPSBmdW5jdGlvbiAoX25nZW9NZXNzYWdlTWVzc2FnZSkge1xuICBNZXNzYWdlRGlzY2xhaW1lclNlcnZpY2UuJGluamVjdCA9IFtcIiRzY2VcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIm5nZW9DcmVhdGVQb3B1cFwiXTtcblxuICBfaW5oZXJpdHNMb29zZShNZXNzYWdlRGlzY2xhaW1lclNlcnZpY2UsIF9uZ2VvTWVzc2FnZU1lc3NhZ2UpO1xuXG4gIGZ1bmN0aW9uIE1lc3NhZ2VEaXNjbGFpbWVyU2VydmljZSgkc2NlLCBnZXR0ZXh0Q2F0YWxvZywgbmdlb0NyZWF0ZVBvcHVwKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfbmdlb01lc3NhZ2VNZXNzYWdlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy5zY2VfID0gJHNjZTtcbiAgICBfdGhpcy5nZXR0ZXh0Q2F0YWxvZ18gPSBnZXR0ZXh0Q2F0YWxvZztcbiAgICBfdGhpcy5jcmVhdGVQb3B1cF8gPSBuZ2VvQ3JlYXRlUG9wdXA7XG4gICAgdmFyIGNvbnRhaW5lciA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cIm5nZW8tZGlzY2xhaW1lclwiPjwvZGl2PicpO1xuICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQoY29udGFpbmVyKTtcbiAgICBfdGhpcy5jb250YWluZXJfID0gY29udGFpbmVyO1xuICAgIF90aGlzLm1lc3NhZ2VzXyA9IHt9O1xuICAgIF90aGlzLm1lc3NhZ2VzQ29uc3VtZXJDb3VudF8gPSB7fTtcbiAgICBfdGhpcy51aWRzXyA9IHt9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBNZXNzYWdlRGlzY2xhaW1lclNlcnZpY2UucHJvdG90eXBlO1xuXG4gIF9wcm90by5hbGVydCA9IGZ1bmN0aW9uIGFsZXJ0KG9iamVjdCkge1xuICAgIHRoaXMuc2hvdyhvYmplY3QpO1xuICB9O1xuXG4gIF9wcm90by5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKG9iamVjdCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIG1zZ09iamVjdHMgPSB0aGlzLmdldE1lc3NhZ2VPYmplY3RzKG9iamVjdCk7XG4gICAgbXNnT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gX3RoaXMyLmNsb3NlTWVzc2FnZV8obWVzc2FnZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZSkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIGdldHRleHRDYXRhbG9nID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ187XG4gICAgdmFyIHR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIHR5cGUgPT0gJ3N0cmluZycsICdUeXBlIHNob3VsZCBiZSBzZXQuJyk7XG4gICAgdmFyIHVpZCA9IHRoaXMuZ2V0TWVzc2FnZVVpZF8obWVzc2FnZSk7XG5cbiAgICBpZiAodGhpcy51aWRzX1t1aWRdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51aWRzX1t1aWRdID0gdHJ1ZTtcblxuICAgIGlmIChtZXNzYWdlLnBvcHVwID09PSB0cnVlKSB7XG4gICAgICB2YXIgcG9wdXAgPSB0aGlzLmNyZWF0ZVBvcHVwXygpO1xuICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnNjZV8udHJ1c3RBc0h0bWwobWVzc2FnZS5tc2cpO1xuICAgICAgcG9wdXAub3Blbih7XG4gICAgICAgIGF1dG9EZXN0cm95OiB0cnVlLFxuICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICB0aXRsZTogJyZuYnNwOydcbiAgICAgIH0pO1xuICAgICAgcG9wdXAuc2NvcGUuJHdhdGNoKCdvcGVuJywgZnVuY3Rpb24gKG5ld1ZhbCkge1xuICAgICAgICBpZiAoIW5ld1ZhbCkge1xuICAgICAgICAgIF90aGlzMy5jbG9zZU1lc3NhZ2VfKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWVzc2FnZXNfW3VpZF0gPSBwb3B1cDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbXBhdGlibGVNZXNzYWdlVWlkID0gdGhpcy5nZXRDb21wYXRpYmxlTWVzc2FnZVVpZF8obWVzc2FnZSk7XG5cbiAgICAgIGlmICh0aGlzLm1lc3NhZ2VzX1tjb21wYXRpYmxlTWVzc2FnZVVpZF0pIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnN1bWVyQ291bnRfW2NvbXBhdGlibGVNZXNzYWdlVWlkXSsrO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjbGFzc05hbWVzID0gWydhbGVydCcsICdmYWRlJywgJ2FsZXJ0LWRpc21pc3NpYmxlJywgJ3Nob3cnXTtcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuRVJST1I6XG4gICAgICAgICAgY2xhc3NOYW1lcy5wdXNoKCdhbGVydC1kYW5nZXInKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLklORk9STUFUSU9OOlxuICAgICAgICAgIGNsYXNzTmFtZXMucHVzaCgnYWxlcnQtaW5mbycpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuU1VDQ0VTUzpcbiAgICAgICAgICBjbGFzc05hbWVzLnB1c2goJ2FsZXJ0LXN1Y2Nlc3MnKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLldBUk5JTkc6XG4gICAgICAgICAgY2xhc3NOYW1lcy5wdXNoKCdhbGVydC13YXJuaW5nJyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdmFyIGVsID0gYW5ndWxhci5lbGVtZW50KFwiPGRpdiByb2xlPVxcXCJhbGVydFxcXCIgY2xhc3M9XFxcIlwiICsgY2xhc3NOYW1lcy5qb2luKCcgJykgKyBcIlxcXCI+PC9kaXY+XCIpO1xuICAgICAgdmFyIGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChcIjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiY2xvc2VcXFwiIGRhdGEtZGlzbWlzcz1cXFwiYWxlcnRcXFwiIGFyaWEtbGFiZWw9XFxcIlwiICsgZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbG9zZScpICsgXCJcXFwiPjxzcGFuIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBjbGFzcz1cXFwiZmEgZmEtdGltZXNcXFwiPjwvc3Bhbj48L2J1dHRvbj5cIik7XG4gICAgICB2YXIgbXNnID0gYW5ndWxhci5lbGVtZW50KCc8c3BhbiAvPicpLmh0bWwobWVzc2FnZS5tc2cpO1xuICAgICAgZWwuYXBwZW5kKGJ1dHRvbikuYXBwZW5kKG1zZyk7XG4gICAgICB2YXIgY29udGFpbmVyO1xuXG4gICAgICBpZiAobWVzc2FnZS50YXJnZXQpIHtcbiAgICAgICAgY29udGFpbmVyID0gYW5ndWxhci5lbGVtZW50KG1lc3NhZ2UudGFyZ2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyXztcbiAgICAgIH1cblxuICAgICAgY29udGFpbmVyLmFwcGVuZChlbCk7XG4gICAgICBlbC5hZGRDbGFzcygnc2hvdycpO1xuICAgICAgZWwub24oJ2Nsb3NlZC5icy5hbGVydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLmNsb3NlTWVzc2FnZV8obWVzc2FnZSwgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWVzc2FnZXNfW2NvbXBhdGlibGVNZXNzYWdlVWlkXSA9IGVsO1xuICAgICAgdGhpcy5tZXNzYWdlc0NvbnN1bWVyQ291bnRfW2NvbXBhdGlibGVNZXNzYWdlVWlkXSA9IDE7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5nZXRNZXNzYWdlVWlkXyA9IGZ1bmN0aW9uIGdldE1lc3NhZ2VVaWRfKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbWVzc2FnZS5tc2cgKyBcIi1cIiArIG1lc3NhZ2UudHlwZSArIFwiLVwiICsgbWVzc2FnZS5sYXllclVpZDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0Q29tcGF0aWJsZU1lc3NhZ2VVaWRfID0gZnVuY3Rpb24gZ2V0Q29tcGF0aWJsZU1lc3NhZ2VVaWRfKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbWVzc2FnZS5tc2cgKyBcIi1cIiArIG1lc3NhZ2UudHlwZTtcbiAgfTtcblxuICBfcHJvdG8uY2xvc2VNZXNzYWdlXyA9IGZ1bmN0aW9uIGNsb3NlTWVzc2FnZV8obWVzc2FnZSwgZm9yY2UpIHtcbiAgICBpZiAoZm9yY2UgPT09IHZvaWQgMCkge1xuICAgICAgZm9yY2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgdWlkID0gdGhpcy5nZXRNZXNzYWdlVWlkXyhtZXNzYWdlKTtcblxuICAgIGlmICghdGhpcy51aWRzX1t1aWRdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMudWlkc19bdWlkXTtcbiAgICB2YXIgY29tcGF0aWJsZU1lc3NhZ2VVaWQgPSB0aGlzLmdldENvbXBhdGlibGVNZXNzYWdlVWlkXyhtZXNzYWdlKTtcblxuICAgIGlmIChmb3JjZSkge1xuICAgICAgdGhpcy5tZXNzYWdlc0NvbnN1bWVyQ291bnRfW2NvbXBhdGlibGVNZXNzYWdlVWlkXSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWVzc2FnZXNDb25zdW1lckNvdW50X1tjb21wYXRpYmxlTWVzc2FnZVVpZF0tLTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tZXNzYWdlc0NvbnN1bWVyQ291bnRfW2NvbXBhdGlibGVNZXNzYWdlVWlkXSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgb2JqID0gdGhpcy5tZXNzYWdlc19bY29tcGF0aWJsZU1lc3NhZ2VVaWRdO1xuXG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIE1lc3NhZ2VQb3B1cCkge1xuICAgICAgdmFyIG1wT2JqID0gb2JqO1xuXG4gICAgICBpZiAobXBPYmouZ2V0T3BlbigpKSB7XG4gICAgICAgIG1wT2JqLnNldE9wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIganF1ZXJ5T2JqID0gb2JqO1xuXG4gICAgICBpZiAoanF1ZXJ5T2JqLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgICAgICAganF1ZXJ5T2JqLmFsZXJ0KCdjbG9zZScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLm1lc3NhZ2VzX1tjb21wYXRpYmxlTWVzc2FnZVVpZF07XG4gICAgZGVsZXRlIHRoaXMubWVzc2FnZXNDb25zdW1lckNvdW50X1tjb21wYXRpYmxlTWVzc2FnZVVpZF07XG4gIH07XG5cbiAgcmV0dXJuIE1lc3NhZ2VEaXNjbGFpbWVyU2VydmljZTtcbn0obmdlb01lc3NhZ2VNZXNzYWdlKTtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRGlzY2xhaW1lcicsIFtuZ2VvTWVzc2FnZVBvcHVwLm5hbWVdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ25nZW9EaXNjbGFpbWVyJywgTWVzc2FnZURpc2NsYWltZXJTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImV4cG9ydCB2YXIgTWVzc2FnZVR5cGUgPSB7XG4gIEVSUk9SOiAnZXJyb3InLFxuICBJTkZPUk1BVElPTjogJ2luZm9ybWF0aW9uJyxcbiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLFxuICBXQVJOSU5HOiAnd2FybmluZydcbn07XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX2RlZmF1bHQoKSB7fVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZSkge307XG5cbiAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KG9iamVjdCkge1xuICAgIHZhciBtc2dPYmplY3RzID0gdGhpcy5nZXRNZXNzYWdlT2JqZWN0cyhvYmplY3QpO1xuICAgIG1zZ09iamVjdHMuZm9yRWFjaCh0aGlzLnNob3dNZXNzYWdlLCB0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihtZXNzYWdlKSB7XG4gICAgdGhpcy5zaG93KHRoaXMuZ2V0TWVzc2FnZU9iamVjdHMobWVzc2FnZSwgTWVzc2FnZVR5cGUuRVJST1IpKTtcbiAgfTtcblxuICBfcHJvdG8uaW5mbyA9IGZ1bmN0aW9uIGluZm8obWVzc2FnZSkge1xuICAgIHRoaXMuc2hvdyh0aGlzLmdldE1lc3NhZ2VPYmplY3RzKG1lc3NhZ2UsIE1lc3NhZ2VUeXBlLklORk9STUFUSU9OKSk7XG4gIH07XG5cbiAgX3Byb3RvLnN1Y2Nlc3MgPSBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnNob3codGhpcy5nZXRNZXNzYWdlT2JqZWN0cyhtZXNzYWdlLCBNZXNzYWdlVHlwZS5TVUNDRVNTKSk7XG4gIH07XG5cbiAgX3Byb3RvLndhcm4gPSBmdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnNob3codGhpcy5nZXRNZXNzYWdlT2JqZWN0cyhtZXNzYWdlLCBNZXNzYWdlVHlwZS5XQVJOSU5HKSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldE1lc3NhZ2VPYmplY3RzID0gZnVuY3Rpb24gZ2V0TWVzc2FnZU9iamVjdHMob2JqZWN0LCBvcHRfdHlwZSkge1xuICAgIHZhciBtc2dPYmplY3RzID0gW107XG4gICAgdmFyIGRlZmF1bHRUeXBlID0gTWVzc2FnZVR5cGUuSU5GT1JNQVRJT047XG5cbiAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1zZ09iamVjdHMucHVzaCh7XG4gICAgICAgIG1zZzogb2JqZWN0LFxuICAgICAgICB0eXBlOiBvcHRfdHlwZSAhPT0gdW5kZWZpbmVkID8gb3B0X3R5cGUgOiBkZWZhdWx0VHlwZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgIG9iamVjdC5mb3JFYWNoKGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgbXNnT2JqZWN0cy5wdXNoKHtcbiAgICAgICAgICAgIG1zZzogbXNnLFxuICAgICAgICAgICAgdHlwZTogb3B0X3R5cGUgIT09IHVuZGVmaW5lZCA/IG9wdF90eXBlIDogZGVmYXVsdFR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1zZyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBtc2cgdHlwZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRfdHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtc2cudHlwZSA9IG9wdF90eXBlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1zZ09iamVjdHMucHVzaChtc2cpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1zZ09iamVjdCA9IG9iamVjdDtcblxuICAgICAgaWYgKG9wdF90eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbXNnT2JqZWN0LnR5cGUgPSBvcHRfdHlwZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1zZ09iamVjdC50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbXNnT2JqZWN0LnR5cGUgPSBkZWZhdWx0VHlwZTtcbiAgICAgIH1cblxuICAgICAgbXNnT2JqZWN0cy5wdXNoKG1zZ09iamVjdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1zZ09iamVjdHM7XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufSgpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2FsZXJ0LmpzJztcbmltcG9ydCBuZ2VvTWVzc2FnZU1lc3NhZ2UsIHsgTWVzc2FnZVR5cGUgfSBmcm9tICduZ2VvL21lc3NhZ2UvTWVzc2FnZS5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG52YXIgREVGQVVMVF9ERUxBWSA9IDcwMDA7XG5leHBvcnQgdmFyIE1lc3NhZ2VOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoX25nZW9NZXNzYWdlTWVzc2FnZSkge1xuICBNZXNzYWdlTm90aWZpY2F0aW9uLiRpbmplY3QgPSBbXCIkdGltZW91dFwiXTtcblxuICBfaW5oZXJpdHNMb29zZShNZXNzYWdlTm90aWZpY2F0aW9uLCBfbmdlb01lc3NhZ2VNZXNzYWdlKTtcblxuICBmdW5jdGlvbiBNZXNzYWdlTm90aWZpY2F0aW9uKCR0aW1lb3V0KSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfbmdlb01lc3NhZ2VNZXNzYWdlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy50aW1lb3V0XyA9ICR0aW1lb3V0O1xuICAgIHZhciBjb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJuZ2VvLW5vdGlmaWNhdGlvblwiPjwvZGl2PicpO1xuICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQoY29udGFpbmVyKTtcbiAgICBfdGhpcy5jb250YWluZXJfID0gY29udGFpbmVyO1xuICAgIF90aGlzLmNhY2hlXyA9IHt9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBNZXNzYWdlTm90aWZpY2F0aW9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8ubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KG9iamVjdCkge1xuICAgIHRoaXMuc2hvdyhvYmplY3QpO1xuICB9O1xuXG4gIF9wcm90by5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGZvciAodmFyIHVpZCBpbiB0aGlzLmNhY2hlXykge1xuICAgICAgdGhpcy5jbGVhck1lc3NhZ2VCeUNhY2hlSXRlbV8odGhpcy5jYWNoZV9bcGFyc2VJbnQodWlkLCAxMCldKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIHR5cGUgPT0gJ3N0cmluZycsICdUeXBlIHNob3VsZCBiZSBzZXQuJyk7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSBbJ2FsZXJ0JywgJ2ZhZGUnLCAnc2hvdyddO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIE1lc3NhZ2VUeXBlLkVSUk9SOlxuICAgICAgICBjbGFzc05hbWVzLnB1c2goJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBNZXNzYWdlVHlwZS5JTkZPUk1BVElPTjpcbiAgICAgICAgY2xhc3NOYW1lcy5wdXNoKCdhbGVydC1pbmZvJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIE1lc3NhZ2VUeXBlLlNVQ0NFU1M6XG4gICAgICAgIGNsYXNzTmFtZXMucHVzaCgnYWxlcnQtc3VjY2VzcycpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBNZXNzYWdlVHlwZS5XQVJOSU5HOlxuICAgICAgICBjbGFzc05hbWVzLnB1c2goJ2FsZXJ0LXdhcm5pbmcnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbCA9IGFuZ3VsYXIuZWxlbWVudChcIjxkaXYgY2xhc3M9XFxcIlwiICsgY2xhc3NOYW1lcy5qb2luKCcgJykgKyBcIlxcXCI+PC9kaXY+XCIpO1xuICAgIHZhciBjb250YWluZXI7XG5cbiAgICBpZiAobWVzc2FnZS50YXJnZXQpIHtcbiAgICAgIGNvbnRhaW5lciA9IGFuZ3VsYXIuZWxlbWVudChtZXNzYWdlLnRhcmdldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyXztcbiAgICB9XG5cbiAgICBjb250YWluZXIuYXBwZW5kKGVsKTtcbiAgICBlbC5odG1sKG1lc3NhZ2UubXNnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgIHZhciBkZWxheSA9IG1lc3NhZ2UuZGVsYXkgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGVsYXkgOiBERUZBVUxUX0RFTEFZO1xuICAgIHZhciBpdGVtID0ge1xuICAgICAgZWw6IGVsXG4gICAgfTtcbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGVsKTtcbiAgICBpdGVtLnByb21pc2UgPSB0aGlzLnRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsLmFsZXJ0KCdjbG9zZScpO1xuICAgICAgZGVsZXRlIF90aGlzMi5jYWNoZV9bdWlkXTtcbiAgICB9LCBkZWxheSk7XG4gICAgdGhpcy5jYWNoZV9bdWlkXSA9IGl0ZW07XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyTWVzc2FnZUJ5Q2FjaGVJdGVtXyA9IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUJ5Q2FjaGVJdGVtXyhpdGVtKSB7XG4gICAgdmFyIGVsID0gaXRlbS5lbDtcbiAgICB2YXIgcHJvbWlzZSA9IGl0ZW0ucHJvbWlzZTtcbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGVsKTtcbiAgICBlbC5hbGVydCgnY2xvc2UnKTtcbiAgICB0aGlzLnRpbWVvdXRfLmNhbmNlbChwcm9taXNlKTtcbiAgICBkZWxldGUgdGhpcy5jYWNoZV9bdWlkXTtcbiAgfTtcblxuICByZXR1cm4gTWVzc2FnZU5vdGlmaWNhdGlvbjtcbn0obmdlb01lc3NhZ2VNZXNzYWdlKTtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTm90aWZpY2F0aW9uJywgW10pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb05vdGlmaWNhdGlvbicsIE1lc3NhZ2VOb3RpZmljYXRpb24pO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiRmFjdG9yeS4kaW5qZWN0ID0gW1wiJGNvbXBpbGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHNjZVwiLCBcIiR0aW1lb3V0XCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01lc3NhZ2VQb3B1cENvbXBvbmVudCBmcm9tICduZ2VvL21lc3NhZ2UvcG9wdXBDb21wb25lbnQuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIE1lc3NhZ2VQb3B1cCgkY29tcGlsZSwgJHJvb3RTY29wZSwgJHNjZSwgJHRpbWVvdXQpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLnNjb3BlID0gJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuICB0aGlzLnNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90aGlzLnNjb3BlLm9wZW47XG4gIH0sIGZ1bmN0aW9uIChvcGVuKSB7XG4gICAgaWYgKCFvcGVuICYmIF90aGlzLmF1dG9EZXN0cm95Xykge1xuICAgICAgX3RoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5kZXN0cm95KCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICB0aGlzLnNjZV8gPSAkc2NlO1xuICB0aGlzLnRpbWVvdXRfID0gJHRpbWVvdXQ7XG4gIHRoaXMuZWxlbWVudF8gPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgbmdlby1wb3B1cD48L2Rpdj4nKTtcbiAgdGhpcy5hdXRvRGVzdHJveV8gPSBmYWxzZTtcbiAgJGNvbXBpbGUodGhpcy5lbGVtZW50XykodGhpcy5zY29wZSk7XG4gIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQodGhpcy5lbGVtZW50Xyk7XG59XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuZ2V0T3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuc2NvcGUub3Blbjtcbn07XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuc2V0T3BlbiA9IGZ1bmN0aW9uIChvcGVuKSB7XG4gIHRoaXMuc2NvcGUub3BlbiA9IG9wZW47XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuc2NvcGUuJGRlc3Ryb3koKTtcbiAgdGhpcy5lbGVtZW50Xy5yZW1vdmUoKTtcbn07XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbiAodGl0bGUpIHtcbiAgdmFyIHRydXN0ZWRUaXRsZSA9IHRoaXMuc2NlXy50cnVzdEFzSHRtbCh0aXRsZSk7XG4gIHRoaXMuc2NvcGUudGl0bGUgPSB0cnVzdGVkVGl0bGU7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCwgb3B0X3RydXN0ZWQpIHtcbiAgdGhpcy5zY29wZS5jb250ZW50ID0gb3B0X3RydXN0ZWQgPyB0aGlzLnNjZV8udHJ1c3RBc0h0bWwoY29udGVudCkgOiBjb250ZW50O1xufTtcblxuTWVzc2FnZVBvcHVwLnByb3RvdHlwZS5zZXRVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gIHZhciBjb250ZW50ID0gdGhpcy5zY2VfLnRydXN0QXNIdG1sKFwiPGlmcmFtZSBzcmM9XFxcIlwiICsgdXJsICsgXCJcXFwiIHdpZHRoPVxcXCIxMDAlXFxcIiBoZWlnaHQ9XFxcIjEwMCVcXFwiPjwvaWZyYW1lPlwiKTtcbiAgdGhpcy5zZXRDb250ZW50KGNvbnRlbnQpO1xufTtcblxuTWVzc2FnZVBvcHVwLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCkge1xuICB0aGlzLmVsZW1lbnRfLndpZHRoKHdpZHRoKTtcbn07XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICB0aGlzLmVsZW1lbnRfLmhlaWdodChoZWlnaHQpO1xufTtcblxuTWVzc2FnZVBvcHVwLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgdGhpcy5zZXRXaWR0aCh3aWR0aCk7XG4gIHRoaXMuc2V0SGVpZ2h0KGhlaWdodCk7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLnNldEF1dG9EZXN0cm95ID0gZnVuY3Rpb24gKGF1dG9EZXN0cm95KSB7XG4gIHRoaXMuYXV0b0Rlc3Ryb3lfID0gYXV0b0Rlc3Ryb3k7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKGNscykge1xuICB0aGlzLmVsZW1lbnRfLmFkZENsYXNzKGNscyk7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy51cmwpIHtcbiAgICB0aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5jb250ZW50KSB7XG4gICAgdGhpcy5zZXRDb250ZW50KG9wdGlvbnMuY29udGVudCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5hc3NlcnQoZmFsc2UsICduZ2VvLm1lc3NhZ2UuUG9wdXAgb3B0aW9ucyByZXF1aXJlc3QgXCJ1cmxcIiBvciBcImNvbnRlbnRcIi4nKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmF1dG9EZXN0cm95ICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldEF1dG9EZXN0cm95KG9wdGlvbnMuYXV0b0Rlc3Ryb3kpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuY2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmFkZENsYXNzKG9wdGlvbnMuY2xzKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXRIZWlnaHQob3B0aW9ucy5oZWlnaHQpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMudGl0bGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0VGl0bGUob3B0aW9ucy50aXRsZSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXRXaWR0aChvcHRpb25zLndpZHRoKTtcbiAgfVxuXG4gIHRoaXMuc2V0T3Blbih0cnVlKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBGYWN0b3J5KCRjb21waWxlLCAkcm9vdFNjb3BlLCAkc2NlLCAkdGltZW91dCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgTWVzc2FnZVBvcHVwKCRjb21waWxlLCAkcm9vdFNjb3BlLCAkc2NlLCAkdGltZW91dCk7XG4gIH07XG59XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0NyZWF0ZVBvcHVwJywgW25nZW9NZXNzYWdlUG9wdXBDb21wb25lbnQubmFtZV0pO1xubXlNb2R1bGUuZmFjdG9yeSgnbmdlb0NyZWF0ZVBvcHVwJywgRmFjdG9yeSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2XFxuICBjbGFzcz1cIm5nZW8tZGlzcGxheXdpbmRvd1wiXFxuICBuZy1zaG93PVwiJGN0cmwub3BlblwiXFxuICB0aXRsZT1cIlwiXFxuPlxcblxcbiAgPGRpdiBjbGFzcz1cIndpbmRvd2NvbnRhaW5lclwiIG5nLXN0eWxlPVwiJGN0cmwuc3R5bGVcIj5cXG5cXG4gICAgPGJ1dHRvblxcbiAgICAgIHR5cGU9XCJidXR0b25cIlxcbiAgICAgIGNsYXNzPVwiYnRuIGZhLXRpbWVzIGNsb3NlXCJcXG4gICAgICBuZy1jbGljaz1cIiRjdHJsLmNsb3NlKClcIj5cXG4gICAgPC9idXR0b24+XFxuXFxuICAgIDxkaXYgY2xhc3M9XCJhbmltYXRpb24tY29udGFpbmVyXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cInNsaWRlLWFuaW1hdGlvbiBcIj5cXG4gICAgICAgIDxkaXZcXG4gICAgICAgICAgY2xhc3M9XCJoZWFkZXIgdWktZHJhZ2dhYmxlLWhhbmRsZVwiXFxuICAgICAgICAgIG5nLWlmPVwiJGN0cmwudGl0bGUgIT09IG51bGxcIj5cXG4gICAgICAgICAgPHAgY2xhc3M9XCJ0aXRsZVwiPnt7JGN0cmwudGl0bGUgfCB0cmFuc2xhdGV9fTwvcD5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdlxcbiAgICAgICAgICBjbGFzcz1cImRldGFpbHMgY29udGVudFwiXFxuICAgICAgICAgIG5nLWlmPVwiJGN0cmwuY29udGVudFwiXFxuICAgICAgICAgIG5nLWJpbmQtaHRtbD1cIiRjdHJsLmNvbnRlbnRcIj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdlxcbiAgICAgICAgICBjbGFzcz1cImRldGFpbHMgaWZyYW1lXCJcXG4gICAgICAgICAgbmctaWY9XCIkY3RybC51cmwgIT09IG51bGxcIj5cXG4gICAgICAgICAgPGlmcmFtZVxcbiAgICAgICAgICAgIGZyYW1lYm9yZGVyPVwiMFwiXFxuICAgICAgICAgICAgdHlwZT1cInRleHQvaHRtbFwiXFxuICAgICAgICAgICAgaGVpZ2h0PVwiMTAwJVwiXFxuICAgICAgICAgICAgd2lkdGg9XCIxMDAlXCJcXG4gICAgICAgICAgICBuZy1zcmM9XCJ7eyAkY3RybC51cmxUcnVzdGVkIH19XCI+PC9pZnJhbWU+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LXRlbXBsYXRlLWNvbnRhaW5lclwiPjwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG4gIDwvZGl2PlxcblxcbjwvZGl2Plxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICduZ2VvL3Nhc3MvZm9udC5zY3NzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvcmVzaXphYmxlLmpzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvZHJhZ2dhYmxlLmpzJztcbmltcG9ydCAnbmdlby9zYXNzL2pxdWVyeS11aS5zY3NzJztcbmltcG9ydCAnYW5ndWxhci1zYW5pdGl6ZSc7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93Q29tcG9uZW50JywgWyduZ1Nhbml0aXplJ10pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vbWVzc2FnZS9kaXNwbGF5d2luZG93Q29tcG9uZW50JywgcmVxdWlyZSgnLi9kaXNwbGF5d2luZG93Q29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5teU1vZHVsZS52YWx1ZSgnbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93VGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9ICRhdHRyc1snbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93VGVtcGxhdGVVcmwnXTtcbiAgcmV0dXJuIHRlbXBsYXRlVXJsICE9PSB1bmRlZmluZWQgPyB0ZW1wbGF0ZVVybCA6ICduZ2VvL21lc3NhZ2UvZGlzcGxheXdpbmRvd0NvbXBvbmVudCc7XG59KTtcbm5nZW9NZXNzYWdlRGlzcGxheXdpbmRvd1RlbXBsYXRlVXJsLiRpbmplY3QgPSBbXCIkYXR0cnNcIiwgXCJuZ2VvTWVzc2FnZURpc3BsYXl3aW5kb3dUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93VGVtcGxhdGVVcmwoJGF0dHJzLCBuZ2VvTWVzc2FnZURpc3BsYXl3aW5kb3dUZW1wbGF0ZVVybCkge1xuICByZXR1cm4gbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93VGVtcGxhdGVVcmwoJGF0dHJzKTtcbn1cblxuZXhwb3J0IHZhciBDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkZWxlbWVudFwiLCBcIiRzY2VcIiwgXCIkc2NvcGVcIiwgXCIkY29tcGlsZVwiXTtcblxuICBmdW5jdGlvbiBDb250cm9sbGVyKCRlbGVtZW50LCAkc2NlLCAkc2NvcGUsICRjb21waWxlKSB7XG4gICAgdGhpcy5jbGVhck9uQ2xvc2U7XG4gICAgdGhpcy5jb250ZW50O1xuICAgIHRoaXMuY29udGVudFRlbXBsYXRlO1xuICAgIHRoaXMuY29udGVudFNjb3BlO1xuICAgIHRoaXMuZHJhZ2dhYmxlO1xuICAgIHRoaXMuZHJhZ2dhYmxlQ29udGFpbm1lbnQ7XG4gICAgdGhpcy5kZXNrdG9wO1xuICAgIHRoaXMuaGVpZ2h0O1xuICAgIHRoaXMub3BlbjtcbiAgICB0aGlzLnJlc2l6YWJsZTtcbiAgICB0aGlzLnRpdGxlO1xuICAgIHRoaXMudXJsO1xuICAgIHRoaXMud2lkdGg7XG4gICAgdGhpcy5lbGVtZW50XyA9ICRlbGVtZW50O1xuICAgIHRoaXMuc2NlXyA9ICRzY2U7XG4gICAgdGhpcy5zY29wZV8gPSAkc2NvcGU7XG4gICAgdGhpcy5jb21waWxlXyA9ICRjb21waWxlO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IENvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by4kb25Jbml0ID0gZnVuY3Rpb24gJG9uSW5pdCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5jbGVhck9uQ2xvc2UgPSB0aGlzLmNsZWFyT25DbG9zZSAhPT0gZmFsc2U7XG4gICAgdGhpcy5jb250ZW50ID0gdGhpcy5jb250ZW50IHx8IG51bGw7XG4gICAgdGhpcy5jb250ZW50VGVtcGxhdGUgPSB0aGlzLmNvbnRlbnRUZW1wbGF0ZSB8fCBudWxsO1xuICAgIHRoaXMuY29udGVudFNjb3BlID0gdGhpcy5jb250ZW50U2NvcGUgfHwgbnVsbDtcbiAgICB0aGlzLmRlc2t0b3AgPSB0aGlzLmRlc2t0b3AgIT09IGZhbHNlO1xuICAgIHRoaXMuZHJhZ2dhYmxlQ29udGFpbm1lbnQgPSB0aGlzLmRyYWdnYWJsZUNvbnRhaW5tZW50IHx8ICdkb2N1bWVudCc7XG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuID09PSB0cnVlO1xuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgfHwgJzI0MHB4JztcbiAgICB0aGlzLndpZHRoID0gdGhpcy53aWR0aCB8fCAnMjQwcHgnO1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmdlby1kaXNwbGF5d2luZG93JylbMF07XG4gICAgdmFyIG1hcmdpbiA9IHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkubGVmdCk7XG4gICAgdGhpcy5tYXhXaWR0aCA9IE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCkgLSAyICogbWFyZ2luO1xuICAgIHRoaXMubWF4SGVpZ3RoID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApIC0gMiAqIG1hcmdpbjtcbiAgICB0aGlzLmRyYWdnYWJsZSA9IHRoaXMuZHJhZ2dhYmxlICE9PSB1bmRlZmluZWQgPyB0aGlzLmRyYWdnYWJsZSA6IHRoaXMuZGVza3RvcDtcbiAgICB0aGlzLnJlc2l6YWJsZSA9IHRoaXMucmVzaXphYmxlICE9PSB1bmRlZmluZWQgPyB0aGlzLnJlc2l6YWJsZSA6IHRoaXMuZGVza3RvcDtcblxuICAgIGlmICh0aGlzLmRyYWdnYWJsZSkge1xuICAgICAgdGhpcy5lbGVtZW50Xy5maW5kKCcubmdlby1kaXNwbGF5d2luZG93IC53aW5kb3djb250YWluZXInKS5kcmFnZ2FibGUoe1xuICAgICAgICAnY29udGFpbm1lbnQnOiB0aGlzLmRyYWdnYWJsZUNvbnRhaW5tZW50LFxuICAgICAgICAnaGFuZGxlJzogJ2Rpdi5oZWFkZXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXNpemFibGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudF8uZmluZCgnLm5nZW8tZGlzcGxheXdpbmRvdyAud2luZG93Y29udGFpbmVyJykucmVzaXphYmxlKHtcbiAgICAgICAgJ21pbkhlaWdodCc6IDI0MCxcbiAgICAgICAgJ21pbldpZHRoJzogMjQwXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb250ZW50VGVtcGxhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29udGVudFRlbXBsYXRlXygpO1xuICAgIH1cblxuICAgIHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuY29udGVudFRlbXBsYXRlO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy51cGRhdGVDb250ZW50VGVtcGxhdGVfKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnVwZGF0ZUNvbnRlbnRUZW1wbGF0ZV8gPSBmdW5jdGlvbiB1cGRhdGVDb250ZW50VGVtcGxhdGVfKCkge1xuICAgIGlmICghdGhpcy5jb250ZW50VGVtcGxhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc2NvcGUgPSB0aGlzLmNvbnRlbnRTY29wZSB8fCB0aGlzLnNjb3BlXztcbiAgICB2YXIgY29tcGlsZWQgPSB0aGlzLmNvbXBpbGVfKHRoaXMuY29udGVudFRlbXBsYXRlKShzY29wZSk7XG4gICAgdmFyIGRpc3BsYXlXaW5kb3cgPSB0aGlzLmVsZW1lbnRfLmZpbmQoJy5uZ2VvLWRpc3BsYXl3aW5kb3cgLndpbmRvd2NvbnRhaW5lciAuYW5pbWF0aW9uLWNvbnRhaW5lciAuY29udGVudC10ZW1wbGF0ZS1jb250YWluZXInKTtcbiAgICBkaXNwbGF5V2luZG93LmVtcHR5KCk7XG4gICAgZGlzcGxheVdpbmRvdy5hcHBlbmQoY29tcGlsZWQpO1xuICB9O1xuXG4gIF9wcm90by5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuY2xlYXJPbkNsb3NlKSB7XG4gICAgICB0aGlzLmNsZWFyXygpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uY2xlYXJfID0gZnVuY3Rpb24gY2xlYXJfKCkge1xuICAgIHRoaXMuY29udGVudCA9IG51bGw7XG4gICAgdGhpcy50aXRsZSA9IG51bGw7XG4gICAgdGhpcy51cmwgPSBudWxsO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhDb250cm9sbGVyLCBbe1xuICAgIGtleTogXCJzdHlsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgICdtYXgtd2lkdGgnOiB0aGlzLm1heFdpZHRoLnRvU3RyaW5nKCkgKyAncHgnLFxuICAgICAgICAnbWF4LWhlaWdodCc6IHRoaXMubWF4SGVpZ3RoLnRvU3RyaW5nKCkgKyAncHgnXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cmxUcnVzdGVkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICBpZiAodGhpcy51cmwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlXy50cnVzdEFzUmVzb3VyY2VVcmwodGhpcy51cmwpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb250cm9sbGVyO1xufSgpO1xudmFyIG5nZW9NZXNzYWdlRGlzcGxheXdpbmRvd0NvbXBvbmVudCA9IHtcbiAgYmluZGluZ3M6IHtcbiAgICAnY2xlYXJPbkNsb3NlJzogJzw/JyxcbiAgICAnY29udGVudCc6ICc9PycsXG4gICAgJ2NvbnRlbnRUZW1wbGF0ZSc6ICc9PycsXG4gICAgJ2NvbnRlbnRTY29wZSc6ICc8PycsXG4gICAgJ2Rlc2t0b3AnOiAnPD8nLFxuICAgICdkcmFnZ2FibGUnOiAnPD8nLFxuICAgICdkcmFnZ2FibGVDb250YWlubWVudCc6ICc8PycsXG4gICAgJ2hlaWdodCc6ICc9PycsXG4gICAgJ29wZW4nOiAnPT8nLFxuICAgICdyZXNpemFibGUnOiAnPD8nLFxuICAgICd0aXRsZSc6ICc9PycsXG4gICAgJ3VybCc6ICc9PycsXG4gICAgJ3dpZHRoJzogJz0/J1xuICB9LFxuICBjb250cm9sbGVyOiBDb250cm9sbGVyLFxuICB0ZW1wbGF0ZVVybDogbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93VGVtcGxhdGVVcmxcbn07XG5teU1vZHVsZS5jb21wb25lbnQoJ25nZW9EaXNwbGF5d2luZG93Jywgbmdlb01lc3NhZ2VEaXNwbGF5d2luZG93Q29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvd2lkZ2V0cy9kcmFnZ2FibGUuanMnO1xuaW1wb3J0ICduZ2VvL3Nhc3MvanF1ZXJ5LXVpLnNjc3MnO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL21vZGFsLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTW9kYWwnLCBbXSk7XG52YXIgbWVzc2FnZU1vZGFsQ29tcG9uZW50ID0ge1xuICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJtb2RhbCBmYWRlXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIHJvbGU9XFxcImRpYWxvZ1xcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm1vZGFsLWRpYWxvZ1xcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwibW9kYWwtY29udGVudFxcXCI+XFxuICAgICAgICA8bmctdHJhbnNjbHVkZT48L25nLXRyYW5zY2x1ZGU+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XCIsXG4gIHJlcXVpcmU6IHtcbiAgICAnbmdNb2RlbCc6ICduZ01vZGVsJ1xuICB9LFxuICB0cmFuc2NsdWRlOiB0cnVlLFxuICBjb250cm9sbGVyOiAnbmdlb01vZGFsQ29udHJvbGxlcicsXG4gIGJpbmRpbmdzOiB7XG4gICAgJ2RyYWdnYWJsZUhhbmRsZSc6ICc9P25nZW9kcmFnZ2FibGVIYW5kbGUnLFxuICAgICdyZXNpemFibGUnOiAnPG5nZW9Nb2RhbFJlc2l6YWJsZScsXG4gICAgJ2Nsb3NhYmxlJzogJzxuZ2VvTW9kYWxDbG9zYWJsZSdcbiAgfVxufTtcbm15TW9kdWxlLmNvbXBvbmVudCgnbmdlb01vZGFsJywgbWVzc2FnZU1vZGFsQ29tcG9uZW50KTtcbmV4cG9ydCB2YXIgQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGVsZW1lbnRcIl07XG5cbiAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgdGhpcy4kZWxlbWVudF8gPSAkZWxlbWVudDtcbiAgICB0aGlzLiRzY29wZV8gPSAkc2NvcGU7XG4gICAgdGhpcy5tb2RhbF8gPSBudWxsO1xuICAgIHRoaXMuZHJhZ2dhYmxlSGFuZGxlID0gJyc7XG4gICAgdGhpcy5jbG9zYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMucmVzaXphYmxlID0gZmFsc2U7XG4gICAgdGhpcy5uZ01vZGVsID0gbnVsbDtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBDb250cm9sbGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uJG9uSW5pdCA9IGZ1bmN0aW9uICRvbkluaXQoKSB7XG4gICAgdGhpcy5jbG9zYWJsZSA9IHRoaXMuY2xvc2FibGUgIT09IGZhbHNlO1xuICAgIHRoaXMucmVzaXphYmxlID0gISF0aGlzLnJlc2l6YWJsZTtcbiAgICB0aGlzLmRyYWdnYWJsZUhhbmRsZSA9IHRoaXMuZHJhZ2dhYmxlSGFuZGxlIHx8ICcudWktZHJhZ2dhYmxlLWhhbmRsZSc7XG4gIH07XG5cbiAgX3Byb3RvLiRwb3N0TGluayA9IGZ1bmN0aW9uICRwb3N0TGluaygpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5tb2RhbF8gPSB0aGlzLiRlbGVtZW50Xy5jaGlsZHJlbigpO1xuXG4gICAgaWYgKCF0aGlzLmNsb3NhYmxlKSB7XG4gICAgICB0aGlzLm1vZGFsXy5hdHRyKCdkYXRhLWtleWJvYXJkJywgJ2ZhbHNlJyk7XG4gICAgICB0aGlzLm1vZGFsXy5hdHRyKCdkYXRhLWJhY2tkcm9wJywgJ3N0YXRpYycpO1xuICAgIH1cblxuICAgIHZhciBkaWFsb2cgPSB0aGlzLm1vZGFsXy5maW5kKCcubW9kYWwtZGlhbG9nJyk7XG4gICAgZGlhbG9nLmRyYWdnYWJsZSh7XG4gICAgICBoYW5kbGU6IHRoaXMuZHJhZ2dhYmxlSGFuZGxlXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5yZXNpemFibGUpIHtcbiAgICAgIGRpYWxvZy5yZXNpemFibGUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubmdNb2RlbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1vZGVsJyk7XG4gICAgfVxuXG4gICAgdGhpcy5uZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIV90aGlzLm5nTW9kZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1vZGVsJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghX3RoaXMubW9kYWxfKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtb2RhbCcpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5tb2RhbF8ubW9kYWwoX3RoaXMubmdNb2RlbC4kdmlld1ZhbHVlID8gJ3Nob3cnIDogJ2hpZGUnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5tb2RhbF8ub24oJ3Nob3duLmJzLm1vZGFsIGhpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIV90aGlzLm5nTW9kZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1vZGVsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0eXBlID0gZS50eXBlO1xuICAgICAgY29uc29sZS5hc3NlcnQodHlwZSA9PSAnc2hvd24nIHx8IHR5cGUgPT0gJ2hpZGRlbicpO1xuXG4gICAgICBfdGhpcy5uZ01vZGVsLiRzZXRWaWV3VmFsdWUodHlwZSA9PSAnc2hvd24nKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uJG9uRGVzdHJveSA9IGZ1bmN0aW9uICRvbkRlc3Ryb3koKSB7XG4gICAgaWYgKCF0aGlzLm1vZGFsXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1vZGFsJyk7XG4gICAgfVxuXG4gICAgdGhpcy5tb2RhbF8ubW9kYWwoJ2hpZGUnKTtcbiAgICB2YXIgZGlhbG9nID0gdGhpcy5tb2RhbF8uZmluZCgnLm1vZGFsLWRpYWxvZycpO1xuICAgIGRpYWxvZy5kcmFnZ2FibGUoJ2Rlc3Ryb3knKTtcblxuICAgIGlmICh0aGlzLnJlc2l6YWJsZSkge1xuICAgICAgZGlhbG9nLnJlc2l6YWJsZSgnZGVzdHJveScpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ29udHJvbGxlcjtcbn0oKTtcbm15TW9kdWxlLmNvbnRyb2xsZXIoJ25nZW9Nb2RhbENvbnRyb2xsZXInLCBDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIlBvcG92ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCAnYm9vdHN0cmFwL2pzL3NyYy90b29sdGlwLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2pzL3NyYy9wb3BvdmVyLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUG9wb3ZlcicsIFtdKTtcblxuZnVuY3Rpb24gbWVzc2FnZVBvcG92ZXJDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZTogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiAnTmdlb1BvcG92ZXJDb250cm9sbGVyIGFzIHBvcG92ZXJDdHJsJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgbmdlb1BvcG92ZXJDdHJsKSB7XG4gICAgICBpZiAoIW5nZW9Qb3BvdmVyQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgbmdlb1BvcG92ZXJDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIG5nZW9Qb3BvdmVyQ3RybC5hbmNob3JFbG0ub24oJ2luc2VydGVkLmJzLnBvcG92ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5nZW9Qb3BvdmVyQ3RybC5ib2R5RWxtLnNob3coKTtcbiAgICAgICAgbmdlb1BvcG92ZXJDdHJsLnNob3duID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgbmdlb1BvcG92ZXJDdHJsLmFuY2hvckVsbS5wb3BvdmVyKHtcbiAgICAgICAgY29udGFpbmVyOiAnYm9keScsXG4gICAgICAgIGh0bWw6IHRydWUsXG4gICAgICAgIGNvbnRlbnQ6IG5nZW9Qb3BvdmVyQ3RybC5ib2R5RWxtLFxuICAgICAgICBib3VuZGFyeTogJ3ZpZXdwb3J0JyxcbiAgICAgICAgcGxhY2VtZW50OiBhdHRyc1snbmdlb1BvcG92ZXJQbGFjZW1lbnQnXSB8fCAncmlnaHQnXG4gICAgICB9KTtcblxuICAgICAgaWYgKGF0dHJzWyduZ2VvUG9wb3ZlckRpc21pc3MnXSkge1xuICAgICAgICAkKGF0dHJzWyduZ2VvUG9wb3ZlckRpc21pc3MnXSkub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBuZ2VvUG9wb3ZlckN0cmwuZGlzbWlzc1BvcG92ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5nZW9Qb3BvdmVyQ3RybC5hbmNob3JFbG0ucG9wb3ZlcignZGlzcG9zZScpO1xuICAgICAgICBuZ2VvUG9wb3ZlckN0cmwuYW5jaG9yRWxtLnVuYmluZCgnaW5zZXJ0ZWQuYnMucG9wb3ZlcicpO1xuICAgICAgICBuZ2VvUG9wb3ZlckN0cmwuYW5jaG9yRWxtLnVuYmluZCgnaGlkZGVuLmJzLnBvcG92ZXInKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gbWVzc2FnZVBvcG92ZXJBbmNob3JDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl5uZ2VvUG9wb3ZlcicsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0cnMsIG5nZW9Qb3BvdmVyQ3RybCkge1xuICAgICAgaWYgKCFuZ2VvUG9wb3ZlckN0cmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG5nZW9Qb3BvdmVyQ3RybCcpO1xuICAgICAgfVxuXG4gICAgICBuZ2VvUG9wb3ZlckN0cmwuYW5jaG9yRWxtID0gZWxlbTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1lc3NhZ2VQb3BvdmVyQ29udGVudENvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICdeXm5nZW9Qb3BvdmVyJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycywgbmdlb1BvcG92ZXJDdHJsKSB7XG4gICAgICBpZiAoIW5nZW9Qb3BvdmVyQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgbmdlb1BvcG92ZXJDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIG5nZW9Qb3BvdmVyQ3RybC5ib2R5RWxtID0gZWxlbTtcbiAgICAgIGVsZW0uaGlkZSgpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBvcG92ZXJDb250cm9sbGVyKCRzY29wZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMuc2hvd24gPSBmYWxzZTtcbiAgdGhpcy5hbmNob3JFbG0gPSBudWxsO1xuICB0aGlzLmJvZHlFbG0gPSBudWxsO1xuXG4gIHZhciBjbGlja0hhbmRsZXIgPSBmdW5jdGlvbiBjbGlja0hhbmRsZXIoY2xpY2tFdmVudCkge1xuICAgIGlmICghX3RoaXMuYW5jaG9yRWxtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYW5jaG9yRWxtJyk7XG4gICAgfVxuXG4gICAgaWYgKCFfdGhpcy5ib2R5RWxtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYm9keUVsbScpO1xuICAgIH1cblxuICAgIGlmIChfdGhpcy5hbmNob3JFbG1bMF0gIT09IGNsaWNrRXZlbnQudGFyZ2V0ICYmIF90aGlzLmJvZHlFbG0ucGFyZW50KClbMF0gIT09IGNsaWNrRXZlbnQudGFyZ2V0ICYmIF90aGlzLmJvZHlFbG0ucGFyZW50KCkuZmluZChjbGlja0V2ZW50LnRhcmdldCkubGVuZ3RoID09PSAwICYmIF90aGlzLnNob3duKSB7XG4gICAgICBfdGhpcy5kaXNtaXNzUG9wb3ZlcigpO1xuICAgIH1cbiAgfTtcblxuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyKTtcbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrSGFuZGxlcik7XG4gIH0pO1xufVxuXG5Qb3BvdmVyQ29udHJvbGxlci5wcm90b3R5cGUuZGlzbWlzc1BvcG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5hbmNob3JFbG0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYW5jaG9yRWxtJyk7XG4gIH1cblxuICB0aGlzLnNob3duID0gZmFsc2U7XG4gIHRoaXMuYW5jaG9yRWxtLnBvcG92ZXIoJ2hpZGUnKTtcbn07XG5cbm15TW9kdWxlLmNvbnRyb2xsZXIoJ05nZW9Qb3BvdmVyQ29udHJvbGxlcicsIFBvcG92ZXJDb250cm9sbGVyKTtcbm15TW9kdWxlLmRpcmVjdGl2ZSgnbmdlb1BvcG92ZXInLCBtZXNzYWdlUG9wb3ZlckNvbXBvbmVudCk7XG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9Qb3BvdmVyQW5jaG9yJywgbWVzc2FnZVBvcG92ZXJBbmNob3JDb21wb25lbnQpO1xubXlNb2R1bGUuZGlyZWN0aXZlKCduZ2VvUG9wb3ZlckNvbnRlbnQnLCBtZXNzYWdlUG9wb3ZlckNvbnRlbnRDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibWVzc2FnZVBvcG9wQ29tcG9uZW50LiRpbmplY3QgPSBbXCJuZ2VvUG9wdXBUZW1wbGF0ZVVybFwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICdhbmd1bGFyLXNhbml0aXplJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUG9wdXAnLCBbJ25nU2FuaXRpemUnXSk7XG5teU1vZHVsZS52YWx1ZSgnbmdlb1BvcHVwVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gYXR0cnNbJ25nZW9Qb3B1cFRlbXBsYXRldXJsJ107XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9tZXNzYWdlL3BvcHVwY29tcG9uZW50Jztcbn0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vbWVzc2FnZS9wb3B1cGNvbXBvbmVudCcsIHJlcXVpcmUoJy4vcG9wdXBjb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcblxuZnVuY3Rpb24gbWVzc2FnZVBvcG9wQ29tcG9uZW50KG5nZW9Qb3B1cFRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICB0ZW1wbGF0ZVVybDogbmdlb1BvcHVwVGVtcGxhdGVVcmwsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ3BvcG92ZXInKTtcblxuICAgICAgc2NvcGUuY2xvc2UgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH07XG5cbiAgICAgIHNjb3BlLiR3YXRjaCgnb3BlbicsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICBlbGVtZW50LmNzcygnZGlzcGxheScsIG5ld1ZhbCA/ICdibG9jaycgOiAnbm9uZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9Qb3B1cCcsIG1lc3NhZ2VQb3BvcENvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8aDQgY2xhc3M9XCJwb3BvdmVyLXRpdGxlIG5nZW8tcG9wdXAtdGl0bGVcIj5cXG4gIDxzcGFuIG5nLWJpbmQtaHRtbD1cInRpdGxlXCI+PC9zcGFuPlxcbiAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIG5nLWNsaWNrPVwib3BlbiA9IGZhbHNlXCI+ICZ0aW1lczs8L2J1dHRvbj5cXG48L2g0PlxcbjxkaXYgY2xhc3M9XCJwb3BvdmVyLWJvZHlcIiBuZy1iaW5kLWh0bWw9XCJjb250ZW50XCI+PC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICogYXMgb2xQcm9qIGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0ICogYXMgb2xFeHRlbnQgZnJvbSAnb2wvZXh0ZW50LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBBdXRvUHJvamVjdGlvblNlcnZpY2UoKSB7fVxuXG5BdXRvUHJvamVjdGlvblNlcnZpY2UucHJvdG90eXBlLnN0cmluZ1RvQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBjb29yZHMgPSBzdHIubWF0Y2goLyhbXFxkXFwuJ10rKVtcXHMsXSsoW1xcZFxcLiddKykvKTtcblxuICBpZiAoY29vcmRzKSB7XG4gICAgdmFyIHggPSBwYXJzZUZsb2F0KGNvb3Jkc1sxXS5yZXBsYWNlKC8nL2csICcnKSk7XG4gICAgdmFyIHkgPSBwYXJzZUZsb2F0KGNvb3Jkc1syXS5yZXBsYWNlKC8nL2csICcnKSk7XG5cbiAgICBpZiAoIWlzTmFOKHgpICYmICFpc05hTih5KSkge1xuICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbkF1dG9Qcm9qZWN0aW9uU2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbkxpc3QgPSBmdW5jdGlvbiAocHJvamVjdGlvbnNDb2Rlcykge1xuICB2YXIgY29kZSwgcHJvajtcbiAgdmFyIHByb2plY3Rpb25zID0gW107XG4gIHByb2plY3Rpb25zQ29kZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgIGNvZGUgPSBwcm9qZWN0aW9uLnRvVXBwZXJDYXNlKCk7XG5cbiAgICBpZiAoY29kZS5zdWJzdHIoMCwgNSkgIT0gJ0VQU0c6Jykge1xuICAgICAgY29kZSA9IFwiRVBTRzpcIiArIGNvZGU7XG4gICAgfVxuXG4gICAgcHJvaiA9IG9sUHJvai5nZXQoY29kZSk7XG5cbiAgICBpZiAocHJvaiAhPT0gbnVsbCkge1xuICAgICAgcHJvamVjdGlvbnMucHVzaChwcm9qKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBwcm9qZWN0aW9uIFwiICsgY29kZSArIFwiIGlzIG5vdCBkZWZpbmVkIGluIG9sLnByb2ouXCIpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwcm9qZWN0aW9ucztcbn07XG5cbkF1dG9Qcm9qZWN0aW9uU2VydmljZS5wcm90b3R5cGUudHJ5UHJvamVjdGlvbnMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIGV4dGVudCwgdmlld1Byb2plY3Rpb24sIG9wdF9wcm9qZWN0aW9ucykge1xuICB2YXIgcG9zaXRpb24gPSBudWxsO1xuXG4gIGlmIChvcHRfcHJvamVjdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdF9wcm9qZWN0aW9ucyA9IFt2aWV3UHJvamVjdGlvbl07XG4gIH1cblxuICBvcHRfcHJvamVjdGlvbnMuc29tZShmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgIHRyeSB7XG4gICAgICBwb3NpdGlvbiA9IG9sUHJvai50cmFuc2Zvcm0oY29vcmRpbmF0ZXMsIHByb2plY3Rpb24sIHZpZXdQcm9qZWN0aW9uKTtcblxuICAgICAgaWYgKG9sRXh0ZW50LmNvbnRhaW5zQ29vcmRpbmF0ZShleHRlbnQsIHBvc2l0aW9uKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgcG9zaXRpb24gPSBudWxsO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbjtcbn07XG5cbkF1dG9Qcm9qZWN0aW9uU2VydmljZS5wcm90b3R5cGUudHJ5UHJvamVjdGlvbnNXaXRoSW52ZXJzaW9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBleHRlbnQsIHZpZXdQcm9qZWN0aW9uLCBvcHRfcHJvamVjdGlvbnMpIHtcbiAgdmFyIHBvc2l0aW9uID0gdGhpcy50cnlQcm9qZWN0aW9ucyhjb29yZGluYXRlcywgZXh0ZW50LCB2aWV3UHJvamVjdGlvbiwgb3B0X3Byb2plY3Rpb25zKTtcblxuICBpZiAocG9zaXRpb24gPT09IG51bGwpIHtcbiAgICBwb3NpdGlvbiA9IHRoaXMudHJ5UHJvamVjdGlvbnMoY29vcmRpbmF0ZXMucmV2ZXJzZSgpLCBleHRlbnQsIHZpZXdQcm9qZWN0aW9uLCBvcHRfcHJvamVjdGlvbnMpO1xuICB9XG5cbiAgcmV0dXJuIHBvc2l0aW9uO1xufTtcblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9BdXRvUHJvamVjdGlvbicsIFtdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ25nZW9BdXRvUHJvamVjdGlvbicsIEF1dG9Qcm9qZWN0aW9uU2VydmljZSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEV2ZW50SGVscGVyKCkge1xuICB0aGlzLmxpc3RlbmVyS2V5c18gPSB7fTtcbn1cblxuRXZlbnRIZWxwZXIucHJvdG90eXBlLmFkZExpc3RlbmVyS2V5ID0gZnVuY3Rpb24gKHVpZCwga2V5KSB7XG4gIGlmICghdGhpcy5saXN0ZW5lcktleXNfW3VpZF0pIHtcbiAgICB0aGlzLmluaXRMaXN0ZW5lcktleV8odWlkKTtcbiAgfVxuXG4gIHRoaXMubGlzdGVuZXJLZXlzX1t1aWRdLnB1c2goa2V5KTtcbn07XG5cbkV2ZW50SGVscGVyLnByb3RvdHlwZS5jbGVhckxpc3RlbmVyS2V5ID0gZnVuY3Rpb24gKHVpZCkge1xuICB0aGlzLmluaXRMaXN0ZW5lcktleV8odWlkKTtcbn07XG5cbkV2ZW50SGVscGVyLnByb3RvdHlwZS5pbml0TGlzdGVuZXJLZXlfID0gZnVuY3Rpb24gKHVpZCkge1xuICBpZiAoIXRoaXMubGlzdGVuZXJLZXlzX1t1aWRdKSB7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfW3VpZF0gPSBbXTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhpcy5saXN0ZW5lcktleXNfW3VpZF0ubGVuZ3RoKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c19bdWlkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfW3VpZF0ubGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRXZlbnRIZWxwZXInLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvRXZlbnRIZWxwZXInLCBFdmVudEhlbHBlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJGZWF0dXJlSGVscGVyLiRpbmplY3QgPSBbXCIkZmlsdGVyXCIsIFwibmdlb01lYXN1cmVQcmVjaXNpb25cIiwgXCJuZ2VvTWVhc3VyZURlY2ltYWxzXCIsIFwibmdlb01lYXN1cmVTcGhlcmljYWxcIiwgXCJuZ2VvUG9pbnRmaWx0ZXJcIiwgXCJuZ2VvRG93bmxvYWRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWlzY0ZpbHRlcnMgZnJvbSAnbmdlby9taXNjL2ZpbHRlcnMuanMnO1xuaW1wb3J0IG5nZW9Eb3dubG9hZFNlcnZpY2UgZnJvbSAnbmdlby9kb3dubG9hZC9zZXJ2aWNlLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMgZnJvbSAnbmdlby9mb3JtYXQvRmVhdHVyZVByb3BlcnRpZXMuanMnO1xuaW1wb3J0IG5nZW9HZW9tZXRyeVR5cGUgZnJvbSAnbmdlby9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHsgZ2V0Rm9ybWF0dGVkTGVuZ3RoLCBnZXRGb3JtYXR0ZWRBcmVhLCBnZXRGb3JtYXR0ZWRQb2ludCB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZS5qcyc7XG5pbXBvcnQgeyBnZXRGb3JtYXR0ZWRBemltdXRSYWRpdXMgfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmVBemltdXQuanMnO1xuaW1wb3J0IHsgZnJvbVN0cmluZyBhcyBjb2xvckZyb21TdHJpbmcgfSBmcm9tICdvbC9jb2xvci5qcyc7XG5pbXBvcnQgKiBhcyBvbEV4dGVudCBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCBvbEdlb21MaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgb2xHZW9tTXVsdGlMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21NdWx0aVBvaW50IGZyb20gJ29sL2dlb20vTXVsdGlQb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IG9sR2VvbU11bHRpUG9seWdvbiBmcm9tICdvbC9nZW9tL011bHRpUG9seWdvbi5qcyc7XG5pbXBvcnQgb2xHZW9tU2ltcGxlR2VvbWV0cnkgZnJvbSAnb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHUFggZnJvbSAnb2wvZm9ybWF0L0dQWC5qcyc7XG5pbXBvcnQgb2xGb3JtYXRLTUwgZnJvbSAnb2wvZm9ybWF0L0tNTC5qcyc7XG5pbXBvcnQgb2xTdHlsZUNpcmNsZSBmcm9tICdvbC9zdHlsZS9DaXJjbGUuanMnO1xuaW1wb3J0IG9sU3R5bGVGaWxsIGZyb20gJ29sL3N0eWxlL0ZpbGwuanMnO1xuaW1wb3J0IG9sU3R5bGVSZWd1bGFyU2hhcGUgZnJvbSAnb2wvc3R5bGUvUmVndWxhclNoYXBlLmpzJztcbmltcG9ydCBvbFN0eWxlU3Ryb2tlIGZyb20gJ29sL3N0eWxlL1N0cm9rZS5qcyc7XG5pbXBvcnQgb2xTdHlsZVN0eWxlIGZyb20gJ29sL3N0eWxlL1N0eWxlLmpzJztcbmltcG9ydCBvbFN0eWxlVGV4dCBmcm9tICdvbC9zdHlsZS9UZXh0LmpzJztcbnZhciBWZXJ0ZXhTdHlsZVJlZ3VsYXJTaGFwZVJhZGl1cyA9IDY7XG5leHBvcnQgdmFyIEZlYXR1cmVGb3JtYXRUeXBlID0ge1xuICBHUFg6ICdHUFgnLFxuICBLTUw6ICdLTUwnXG59O1xuZXhwb3J0IHZhciBBcnJvd0RpcmVjdGlvbnMgPSB7XG4gIE5PTkU6ICdub25lJyxcbiAgRk9SV0FSRFM6ICdmb3J3YXJkcycsXG4gIEJBQ0tXQVJEUzogJ2JhY2t3YXJkcycsXG4gIEJPVEg6ICdib3RoJ1xufTtcbmV4cG9ydCB2YXIgQXJyb3dQb3NpdGlvbnMgPSB7XG4gIEZJUlNUOiAnZmlyc3QnLFxuICBMQVNUOiAnbGFzdCcsXG4gIEVWRVJZOiAnZXZlcnknXG59O1xuZXhwb3J0IGZ1bmN0aW9uIEZlYXR1cmVIZWxwZXIoJGZpbHRlciwgbmdlb01lYXN1cmVQcmVjaXNpb24sIG5nZW9NZWFzdXJlRGVjaW1hbHMsIG5nZW9NZWFzdXJlU3BoZXJpY2FsLCBuZ2VvUG9pbnRmaWx0ZXIsIG5nZW9Eb3dubG9hZCkge1xuICB0aGlzLiRmaWx0ZXJfID0gJGZpbHRlcjtcbiAgdGhpcy5kZWNpbWFsc18gPSBuZ2VvTWVhc3VyZURlY2ltYWxzO1xuICB0aGlzLnByZWNpc2lvbl8gPSBuZ2VvTWVhc3VyZVByZWNpc2lvbjtcbiAgdGhpcy5zcGhlcmljYWwgPSBuZ2VvTWVhc3VyZVNwaGVyaWNhbDtcbiAgdGhpcy5udW1iZXJGb3JtYXRfID0gJGZpbHRlcignbnVtYmVyJyk7XG4gIHRoaXMudW5pdFByZWZpeEZvcm1hdF8gPSAkZmlsdGVyKCduZ2VvVW5pdFByZWZpeCcpO1xuICB0aGlzLm5nZW9OdW1iZXJDb29yZGluYXRlc18gPSAkZmlsdGVyKCduZ2VvTnVtYmVyQ29vcmRpbmF0ZXMnKTtcbiAgdGhpcy5wb2ludEZpbHRlckZuXyA9IG51bGw7XG4gIHRoaXMucG9pbnRGaWx0ZXJBcmdzXyA9IFtdO1xuXG4gIGlmIChuZ2VvUG9pbnRmaWx0ZXIpIHtcbiAgICB2YXIgZmlsdGVyRWxlbWVudHMgPSBuZ2VvUG9pbnRmaWx0ZXIuc3BsaXQoJzonKTtcbiAgICB2YXIgZmlsdGVyTmFtZSA9IGZpbHRlckVsZW1lbnRzLnNoaWZ0KCk7XG4gICAgdmFyIGZpbHRlciA9IHRoaXMuJGZpbHRlcl8oZmlsdGVyTmFtZSk7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIGZpbHRlciA9PSAnZnVuY3Rpb24nKTtcbiAgICB0aGlzLnBvaW50RmlsdGVyRm5fID0gZmlsdGVyO1xuICAgIHRoaXMucG9pbnRGaWx0ZXJBcmdzXyA9IGZpbHRlckVsZW1lbnRzO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucG9pbnRGaWx0ZXJGbl8gPSBudWxsO1xuICB9XG5cbiAgdGhpcy5wcm9qZWN0aW9uXyA9IG51bGw7XG4gIHRoaXMuZG93bmxvYWRfID0gbmdlb0Rvd25sb2FkO1xufVxuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5zZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgdGhpcy5wcm9qZWN0aW9uXyA9IHByb2plY3Rpb247XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBvcHRfc2VsZWN0KSB7XG4gIHZhciBzdHlsZXMgPSB0aGlzLmdldFN0eWxlKGZlYXR1cmUpO1xuXG4gIGlmIChvcHRfc2VsZWN0KSB7XG4gICAgaWYgKHRoaXMuc3VwcG9ydHNWZXJ0ZXhfKGZlYXR1cmUpKSB7XG4gICAgICBzdHlsZXMucHVzaCh0aGlzLmdldFZlcnRleFN0eWxlKCkpO1xuICAgIH1cblxuICAgIHN0eWxlcy51bnNoaWZ0KHRoaXMuZ2V0SGFsb1N0eWxlXyhmZWF0dXJlKSk7XG4gIH1cblxuICBmZWF0dXJlLnNldFN0eWxlKHN0eWxlcyk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRUeXBlKGZlYXR1cmUpO1xuICB2YXIgc3R5bGU7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgc3R5bGUgPSB0aGlzLmdldExpbmVTdHJpbmdTdHlsZV8oZmVhdHVyZSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgIHN0eWxlID0gdGhpcy5nZXRQb2ludFN0eWxlXyhmZWF0dXJlKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTjpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFOlxuICAgICAgc3R5bGUgPSB0aGlzLmdldFBvbHlnb25TdHlsZV8oZmVhdHVyZSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5URVhUOlxuICAgICAgc3R5bGUgPSB0aGlzLmdldFRleHRTdHlsZV8oZmVhdHVyZSk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmICghc3R5bGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc3R5bGUnKTtcbiAgfVxuXG4gIHZhciBzdHlsZXM7XG5cbiAgaWYgKHN0eWxlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBzdHlsZXMgPSBzdHlsZTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZXMgPSBbc3R5bGVdO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldExpbmVTdHJpbmdTdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgc3Ryb2tlV2lkdGggPSB0aGlzLmdldFN0cm9rZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgc2hvd0xhYmVsID0gdGhpcy5nZXRTaG93TGFiZWxQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHNob3dNZWFzdXJlID0gdGhpcy5nZXRTaG93TWVhc3VyZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgY29sb3IgPSB0aGlzLmdldFJHQkFDb2xvclByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgYXJyb3dEaXJlY3Rpb24gPSB0aGlzLmdldEFycm93RGlyZWN0aW9uUHJvcGVydHkoZmVhdHVyZSk7XG4gIHZhciBhcnJvd1Bvc2l0aW9uID0gdGhpcy5nZXRBcnJvd1Bvc2l0aW9uUHJvcGVydHkoZmVhdHVyZSk7XG4gIHZhciBzdHlsZXMgPSBbbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICBjb2xvcjogY29sb3IsXG4gICAgICB3aWR0aDogc3Ryb2tlV2lkdGhcbiAgICB9KVxuICB9KV07XG5cbiAgaWYgKGFycm93RGlyZWN0aW9uICE9PSBBcnJvd0RpcmVjdGlvbnMuTk9ORSkge1xuICAgIHN0eWxlcy5wdXNoLmFwcGx5KHN0eWxlcywgdGhpcy5nZXRBcnJvd0xpbmVTdHlsZXNfKGZlYXR1cmUsIGFycm93RGlyZWN0aW9uLCBhcnJvd1Bvc2l0aW9uLCBjb2xvcikpO1xuICB9XG5cbiAgdmFyIHRleHRMYWJlbFZhbHVlcyA9IFtdO1xuXG4gIGlmIChzaG93TWVhc3VyZSkge1xuICAgIHRleHRMYWJlbFZhbHVlcy5wdXNoKHRoaXMuZ2V0TWVhc3VyZShmZWF0dXJlKSk7XG4gIH1cblxuICBpZiAoc2hvd0xhYmVsKSB7XG4gICAgdGV4dExhYmVsVmFsdWVzLnB1c2godGhpcy5nZXROYW1lUHJvcGVydHkoZmVhdHVyZSkpO1xuICB9XG5cbiAgaWYgKHNob3dMYWJlbCB8fCBzaG93TWVhc3VyZSkge1xuICAgIHZhciB0ZXh0TGFiZWxWYWx1ZSA9IHRleHRMYWJlbFZhbHVlcy5qb2luKCdcXG4nKTtcbiAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgIHByb3BlcnR5TmFtZTogJycsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICB0ZXh0OiB0ZXh0TGFiZWxWYWx1ZVxuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QXJyb3dMaW5lU3R5bGVzXyA9IGZ1bmN0aW9uIChmZWF0dXJlLCBhcnJvd0RpcmVjdGlvbiwgYXJyb3dQb3NpdGlvbiwgY29sb3IpIHtcbiAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICB2YXIgYXJyb3dTdHlsZXMgPSBbXTtcblxuICB2YXIgYWRkQXJyb3dUb1NlZ21lbnQgPSBmdW5jdGlvbiBhZGRBcnJvd1RvU2VnbWVudChzdGFydCwgZW5kKSB7XG4gICAgdmFyIGR4ID0gZW5kWzBdIC0gc3RhcnRbMF07XG4gICAgdmFyIGR5ID0gZW5kWzFdIC0gc3RhcnRbMV07XG4gICAgdmFyIHJvdGF0aW9uID0gTWF0aC5hdGFuMihkeSwgZHgpO1xuXG4gICAgdmFyIGdldEFycm93U3R5bGUgPSBmdW5jdGlvbiBnZXRBcnJvd1N0eWxlKGNvb3JkaW5hdGUsIGludmVydCkge1xuICAgICAgcmV0dXJuIG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICBnZW9tZXRyeTogbmV3IG9sR2VvbVBvaW50KGNvb3JkaW5hdGUpLFxuICAgICAgICB0ZXh0OiBuZXcgb2xTdHlsZVRleHQoe1xuICAgICAgICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICAgICAgICBjb2xvcjogY29sb3JcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBmb250OiAnOTAwIDIwcHggXCJGb250IEF3ZXNvbWUgNSBGcmVlXCInLFxuICAgICAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgICAgICBjb2xvcjogY29sb3JcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0ZXh0OiBcIlxcdUYwNTRcIixcbiAgICAgICAgICByb3RhdGVXaXRoVmlldzogdHJ1ZSxcbiAgICAgICAgICByb3RhdGlvbjogaW52ZXJ0ID8gTWF0aC5QSSAtIHJvdGF0aW9uIDogLXJvdGF0aW9uXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKGFycm93RGlyZWN0aW9uID09PSBBcnJvd0RpcmVjdGlvbnMuRk9SV0FSRFMgfHwgYXJyb3dEaXJlY3Rpb24gPT09IEFycm93RGlyZWN0aW9ucy5CT1RIKSB7XG4gICAgICBhcnJvd1N0eWxlcy5wdXNoKGdldEFycm93U3R5bGUoZW5kLCBmYWxzZSkpO1xuICAgIH1cblxuICAgIGlmIChhcnJvd0RpcmVjdGlvbiA9PT0gQXJyb3dEaXJlY3Rpb25zLkJBQ0tXQVJEUyB8fCBhcnJvd0RpcmVjdGlvbiA9PT0gQXJyb3dEaXJlY3Rpb25zLkJPVEgpIHtcbiAgICAgIGFycm93U3R5bGVzLnB1c2goZ2V0QXJyb3dTdHlsZShzdGFydCwgdHJ1ZSkpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZmlyc3RPckxhc3RTZWdtZW50ID0gbnVsbDtcbiAgZ2VvbWV0cnkuZm9yRWFjaFNlZ21lbnQoZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICBpZiAoYXJyb3dQb3NpdGlvbiA9PT0gQXJyb3dQb3NpdGlvbnMuRklSU1QpIHtcbiAgICAgIGlmIChmaXJzdE9yTGFzdFNlZ21lbnQgPT09IG51bGwpIHtcbiAgICAgICAgZmlyc3RPckxhc3RTZWdtZW50ID0gW1tdLmNvbmNhdChzdGFydCksIFtdLmNvbmNhdChlbmQpXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChhcnJvd1Bvc2l0aW9uID09PSBBcnJvd1Bvc2l0aW9ucy5MQVNUKSB7XG4gICAgICBmaXJzdE9yTGFzdFNlZ21lbnQgPSBbW10uY29uY2F0KHN0YXJ0KSwgW10uY29uY2F0KGVuZCldO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGFkZEFycm93VG9TZWdtZW50KHN0YXJ0LCBlbmQpO1xuICB9KTtcblxuICBpZiAoZmlyc3RPckxhc3RTZWdtZW50KSB7XG4gICAgYWRkQXJyb3dUb1NlZ21lbnQoZmlyc3RPckxhc3RTZWdtZW50WzBdLCBmaXJzdE9yTGFzdFNlZ21lbnRbMV0pO1xuICB9XG5cbiAgcmV0dXJuIGFycm93U3R5bGVzO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0UG9pbnRTdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgY29sb3IgPSB0aGlzLmdldFJHQkFDb2xvclByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgc2hvd0xhYmVsID0gdGhpcy5nZXRTaG93TGFiZWxQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHNob3dNZWFzdXJlID0gdGhpcy5nZXRTaG93TWVhc3VyZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgc3R5bGVzID0gW25ldyBvbFN0eWxlU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgb2xTdHlsZUNpcmNsZSh7XG4gICAgICByYWRpdXM6IHNpemUsXG4gICAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgICBjb2xvcjogY29sb3JcbiAgICAgIH0pXG4gICAgfSlcbiAgfSldO1xuICB2YXIgdGV4dExhYmVsVmFsdWVzID0gW107XG5cbiAgaWYgKHNob3dNZWFzdXJlKSB7XG4gICAgdGV4dExhYmVsVmFsdWVzLnB1c2godGhpcy5nZXRNZWFzdXJlKGZlYXR1cmUpKTtcbiAgfVxuXG4gIGlmIChzaG93TGFiZWwpIHtcbiAgICB0ZXh0TGFiZWxWYWx1ZXMucHVzaCh0aGlzLmdldE5hbWVQcm9wZXJ0eShmZWF0dXJlKSk7XG4gIH1cblxuICBpZiAoc2hvd0xhYmVsIHx8IHNob3dNZWFzdXJlKSB7XG4gICAgdmFyIHRleHRMYWJlbFZhbHVlID0gdGV4dExhYmVsVmFsdWVzLmpvaW4oJ1xcbicpO1xuICAgIHZhciBmb250X3NpemUgPSAxMDtcbiAgICB2YXIgcG9pbnRfdG9fcHggPSAxLjM7XG4gICAgc3R5bGVzLnB1c2gobmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICB0ZXh0OiB0aGlzLmNyZWF0ZVRleHRTdHlsZV8oe1xuICAgICAgICBwcm9wZXJ0eU5hbWU6ICcnLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgdGV4dDogdGV4dExhYmVsVmFsdWUsXG4gICAgICAgIHNpemU6IGZvbnRfc2l6ZSxcbiAgICAgICAgb2Zmc2V0WTogLShzaXplICsgZm9udF9zaXplIC8gMiAqIHRleHRMYWJlbFZhbHVlcy5sZW5ndGggKiBwb2ludF90b19weCArIDQpXG4gICAgICB9KVxuICAgIH0pKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5vcHROdW1iZXIgPSBmdW5jdGlvbiAoZmVhdHVyZSwgYXR0cmliKSB7XG4gIHZhciB2YWx1ZSA9IGZlYXR1cmUuZ2V0KGF0dHJpYik7XG5cbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gK3ZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldE51bWJlciA9IGZ1bmN0aW9uIChmZWF0dXJlLCBhdHRyaWIpIHtcbiAgdmFyIHZhbHVlID0gZmVhdHVyZS5nZXQoYXR0cmliKTtcblxuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuICt2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFBvbHlnb25TdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgc3Ryb2tlV2lkdGggPSB0aGlzLmdldFN0cm9rZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgb3BhY2l0eSA9IHRoaXMuZ2V0T3BhY2l0eVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgY29sb3IgPSB0aGlzLmdldFJHQkFDb2xvclByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgc2hvd0xhYmVsID0gdGhpcy5nZXRTaG93TGFiZWxQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHNob3dNZWFzdXJlID0gdGhpcy5nZXRTaG93TWVhc3VyZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgZmlsbENvbG9yID0gY29sb3Iuc2xpY2UoKTtcbiAgZmlsbENvbG9yWzNdID0gb3BhY2l0eTtcbiAgdmFyIGF6aW11dCA9IHRoaXMub3B0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5BWklNVVQpO1xuICB2YXIgc3R5bGVzID0gW25ldyBvbFN0eWxlU3R5bGUoe1xuICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICBjb2xvcjogZmlsbENvbG9yXG4gICAgfSksXG4gICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICBjb2xvcjogY29sb3IsXG4gICAgICB3aWR0aDogc3Ryb2tlV2lkdGhcbiAgICB9KVxuICB9KV07XG5cbiAgaWYgKHNob3dNZWFzdXJlIHx8IHNob3dMYWJlbCkge1xuICAgIGlmIChzaG93TWVhc3VyZSAmJiBhemltdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLnByb2plY3Rpb25fKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBwcm9qZWN0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRSYWRpdXNMaW5lKGZlYXR1cmUsIGF6aW11dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0Rm9ybWF0dGVkTGVuZ3RoKGxpbmUsIHRoaXMucHJvamVjdGlvbl8sIHRoaXMucHJlY2lzaW9uXywgdGhpcy51bml0UHJlZml4Rm9ybWF0Xyk7XG4gICAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgZ2VvbWV0cnk6IGxpbmUsXG4gICAgICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICAgICAgY29sb3I6IGZpbGxDb2xvclxuICAgICAgICB9KSxcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgICAgIHdpZHRoOiBzdHJva2VXaWR0aFxuICAgICAgICB9KSxcbiAgICAgICAgdGV4dDogdGhpcy5jcmVhdGVUZXh0U3R5bGVfKHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICcnLFxuICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgIHRleHQ6IGxlbmd0aCxcbiAgICAgICAgICBhbmdsZTogKGF6aW11dCAlIDE4MCArIDE4MCkgJSAxODAgLSA5MFxuICAgICAgICB9KVxuICAgICAgfSkpO1xuICAgICAgc3R5bGVzLnB1c2gobmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIGdlb21ldHJ5OiBuZXcgb2xHZW9tUG9pbnQobGluZS5nZXRMYXN0Q29vcmRpbmF0ZSgpKSxcbiAgICAgICAgdGV4dDogdGhpcy5jcmVhdGVUZXh0U3R5bGVfKHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICcnLFxuICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgIHRleHQ6IHRoaXMubnVtYmVyRm9ybWF0XyhhemltdXQsIHRoaXMuZGVjaW1hbHNfKSArIFwiXFx4QjBcIixcbiAgICAgICAgICBzaXplOiAxMCxcbiAgICAgICAgICBvZmZzZXRYOiBNYXRoLmNvcygoYXppbXV0IC0gOTApICogTWF0aC5QSSAvIDE4MCkgKiAyMCxcbiAgICAgICAgICBvZmZzZXRZOiBNYXRoLnNpbigoYXppbXV0IC0gOTApICogTWF0aC5QSSAvIDE4MCkgKiAyMFxuICAgICAgICB9KVxuICAgICAgfSkpO1xuXG4gICAgICBpZiAoc2hvd0xhYmVsKSB7XG4gICAgICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICcnLFxuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmdldE5hbWVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgICAgICAgIG9mZnNldFk6IC04LFxuICAgICAgICAgICAgZXhjZWVkTGVuZ3RoOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGV4dExhYmVsVmFsdWVzID0gW107XG5cbiAgICAgIGlmIChzaG93TWVhc3VyZSkge1xuICAgICAgICB0ZXh0TGFiZWxWYWx1ZXMucHVzaCh0aGlzLmdldE1lYXN1cmUoZmVhdHVyZSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2hvd0xhYmVsKSB7XG4gICAgICAgIHRleHRMYWJlbFZhbHVlcy5wdXNoKHRoaXMuZ2V0TmFtZVByb3BlcnR5KGZlYXR1cmUpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3dMYWJlbCB8fCBzaG93TWVhc3VyZSkge1xuICAgICAgICB2YXIgdGV4dExhYmVsVmFsdWUgPSB0ZXh0TGFiZWxWYWx1ZXMuam9pbignXFxuJyk7XG4gICAgICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICcnLFxuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0TGFiZWxWYWx1ZSxcbiAgICAgICAgICAgIGV4Y2VlZExlbmd0aDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0VGV4dFN0eWxlXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHJldHVybiBuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICB0ZXh0OiB0aGlzLmNyZWF0ZVRleHRTdHlsZV8oe1xuICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgcm90YXRlV2l0aFZpZXc6IHRydWUsXG4gICAgICB0ZXh0OiB0aGlzLmdldE5hbWVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgIHNpemU6IHRoaXMuZ2V0U2l6ZVByb3BlcnR5KGZlYXR1cmUpLFxuICAgICAgYW5nbGU6IHRoaXMuZ2V0QW5nbGVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgIGNvbG9yOiB0aGlzLmdldFJHQkFDb2xvclByb3BlcnR5KGZlYXR1cmUpLFxuICAgICAgd2lkdGg6IHRoaXMuZ2V0U3Ryb2tlUHJvcGVydHkoZmVhdHVyZSlcbiAgICB9KVxuICB9KTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmNyZWF0ZUVkaXRpbmdTdHlsZXMgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgd2hpdGUgPSBbMjU1LCAyNTUsIDI1NSwgMV07XG4gIHZhciBibHVlID0gWzAsIDE1MywgMjU1LCAxXTtcbiAgdmFyIHdpZHRoID0gMztcbiAgdmFyIHN0eWxlcyA9IFtdO1xuICB2YXIgZ2VvbSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICBpZiAoIWdlb20pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbScpO1xuICB9XG5cbiAgdmFyIHR5cGUgPSBnZW9tLmdldFR5cGUoKTtcblxuICBpZiAodHlwZSA9PT0gJ1BvaW50Jykge1xuICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgaW1hZ2U6IG5ldyBvbFN0eWxlQ2lyY2xlKHtcbiAgICAgICAgcmFkaXVzOiB3aWR0aCAqIDIsXG4gICAgICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICAgICAgY29sb3I6IGJsdWVcbiAgICAgICAgfSksXG4gICAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZSxcbiAgICAgICAgICB3aWR0aDogd2lkdGggLyAyXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICAgIHpJbmRleDogSW5maW5pdHlcbiAgICB9KSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGUgPT09ICdMaW5lU3RyaW5nJykge1xuICAgICAgc3R5bGVzLnB1c2gobmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZSxcbiAgICAgICAgICB3aWR0aDogd2lkdGggKyAyXG4gICAgICAgIH0pXG4gICAgICB9KSk7XG4gICAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICAgICAgY29sb3I6IGJsdWUsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoXG4gICAgICAgIH0pXG4gICAgICB9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICBzdHJva2U6IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICAgICAgICBjb2xvcjogYmx1ZSxcbiAgICAgICAgICB3aWR0aDogd2lkdGggLyAyXG4gICAgICAgIH0pLFxuICAgICAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMC41XVxuICAgICAgICB9KVxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHN0eWxlcy5wdXNoKHRoaXMuZ2V0VmVydGV4U3R5bGUodHJ1ZSkpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFZlcnRleEluZm9BdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoZmVhdHVyZSwgY29vcmRpbmF0ZSwgcmVzb2x1dGlvbikge1xuICB2YXIgaW5mbyA9IG51bGw7XG5cbiAgaWYgKHRoaXMuc3VwcG9ydHNWZXJ0ZXhSZW1vdmFsXyhmZWF0dXJlKSkge1xuICAgIHZhciBidWZmZXIgPSByZXNvbHV0aW9uICogVmVydGV4U3R5bGVSZWd1bGFyU2hhcGVSYWRpdXM7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gbnVsbDtcbiAgICB2YXIgY29vcmRpbmF0ZXNzID0gbnVsbDtcbiAgICB2YXIgY29vcmRpbmF0ZXNzcyA9IG51bGw7XG4gICAgdmFyIG1pbk51bUNvb3JkaW5hdGVzID0gLTE7XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgbWluTnVtQ29vcmRpbmF0ZXMgPSAyO1xuICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2x5Z29uKSB7XG4gICAgICBjb29yZGluYXRlc3MgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgbWluTnVtQ29vcmRpbmF0ZXMgPSA0O1xuICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aUxpbmVTdHJpbmcpIHtcbiAgICAgIGNvb3JkaW5hdGVzcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgICBtaW5OdW1Db29yZGluYXRlcyA9IDI7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpUG9seWdvbikge1xuICAgICAgY29vcmRpbmF0ZXNzcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgICBtaW5OdW1Db29yZGluYXRlcyA9IDQ7XG4gICAgfVxuXG4gICAgaWYgKGNvb3JkaW5hdGVzKSB7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLmdldENvb3JkaW5hdGVJbmRleFRoYXRIaXRzQXRfKGNvb3JkaW5hdGVzLCBjb29yZGluYXRlLCBtaW5OdW1Db29yZGluYXRlcywgYnVmZmVyKTtcblxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBpbmZvID0gW2luZGV4XTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvb3JkaW5hdGVzcykge1xuICAgICAgdmFyIGlpID0gY29vcmRpbmF0ZXNzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIHZhciBfaW5kZXggPSB0aGlzLmdldENvb3JkaW5hdGVJbmRleFRoYXRIaXRzQXRfKGNvb3JkaW5hdGVzc1tpXSwgY29vcmRpbmF0ZSwgbWluTnVtQ29vcmRpbmF0ZXMsIGJ1ZmZlcik7XG5cbiAgICAgICAgaWYgKF9pbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBpbmZvID0gW2ksIF9pbmRleF07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvb3JkaW5hdGVzc3MpIHtcbiAgICAgIHZhciBfaWkgPSBjb29yZGluYXRlc3NzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9paTsgX2krKykge1xuICAgICAgICB2YXIgX2Nvb3JkaW5hdGVzcyA9IGNvb3JkaW5hdGVzc3NbX2ldO1xuICAgICAgICB2YXIgamogPSBfY29vcmRpbmF0ZXNzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICB2YXIgX2luZGV4MiA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUluZGV4VGhhdEhpdHNBdF8oX2Nvb3JkaW5hdGVzc1tqXSwgY29vcmRpbmF0ZSwgbWluTnVtQ29vcmRpbmF0ZXMsIGJ1ZmZlcik7XG5cbiAgICAgICAgICBpZiAoX2luZGV4MiAhPT0gLTEpIHtcbiAgICAgICAgICAgIGluZm8gPSBbX2ksIGosIF9pbmRleDJdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbmZvO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUluZGV4VGhhdEhpdHNBdF8gPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGUsIG1pbiwgYnVmZmVyKSB7XG4gIHZhciBpbmRleCA9IC0xO1xuICB2YXIgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7XG5cbiAgaWYgKGlpID4gbWluKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpaTsgaSsrKSB7XG4gICAgICB2YXIgaGl0cyA9IG9sRXh0ZW50LmNvbnRhaW5zQ29vcmRpbmF0ZShvbEV4dGVudC5idWZmZXIob2xFeHRlbnQuY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZShjb29yZGluYXRlc1tpXSksIGJ1ZmZlciksIGNvb3JkaW5hdGUpO1xuXG4gICAgICBpZiAoaGl0cykge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbmRleDtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFZlcnRleFN0eWxlID0gZnVuY3Rpb24gKG9wdF9pbmNHZW9tRnVuYykge1xuICB2YXIgaW5jR2VvbUZ1bmMgPSBvcHRfaW5jR2VvbUZ1bmMgIT09IHVuZGVmaW5lZCA/IG9wdF9pbmNHZW9tRnVuYyA6IHRydWU7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIGltYWdlOiBuZXcgb2xTdHlsZVJlZ3VsYXJTaGFwZSh7XG4gICAgICByYWRpdXM6IFZlcnRleFN0eWxlUmVndWxhclNoYXBlUmFkaXVzLFxuICAgICAgcG9pbnRzOiA0LFxuICAgICAgYW5nbGU6IE1hdGguUEkgLyA0LFxuICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjVdXG4gICAgICB9KSxcbiAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICBjb2xvcjogWzAsIDAsIDAsIDFdXG4gICAgICB9KVxuICAgIH0pXG4gIH07XG5cbiAgaWYgKGluY0dlb21GdW5jKSB7XG4gICAgb3B0aW9ucy5nZW9tZXRyeSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICB2YXIgZ2VvbSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgaWYgKCEoZ2VvbSBpbnN0YW5jZW9mIG9sR2VvbVNpbXBsZUdlb21ldHJ5KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChnZW9tLmdldFR5cGUoKSA9PSAnUG9pbnQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGlubmVyTXVsdGlDb29yZGluYXRlcztcbiAgICAgIHZhciBtdWx0aUNvb3JkaW5hdGVzID0gW107XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBbXTtcblxuICAgICAgaWYgKGdlb20gaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tIGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlMaW5lU3RyaW5nKSB7XG4gICAgICAgIG11bHRpQ29vcmRpbmF0ZXMgPSBnZW9tLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICB9IGVsc2UgaWYgKGdlb20gaW5zdGFuY2VvZiBvbEdlb21Qb2x5Z29uKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbS5nZXRDb29yZGluYXRlcygpWzBdO1xuICAgICAgfSBlbHNlIGlmIChnZW9tIGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlQb2x5Z29uKSB7XG4gICAgICAgIGlubmVyTXVsdGlDb29yZGluYXRlcyA9IGdlb20uZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlubmVyTXVsdGlDb29yZGluYXRlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbm5lck11bHRpQ29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIG11bHRpQ29vcmRpbmF0ZXMgPSBtdWx0aUNvb3JkaW5hdGVzLmNvbmNhdChpbm5lck11bHRpQ29vcmRpbmF0ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9paTIgPSBtdWx0aUNvb3JkaW5hdGVzLmxlbmd0aDsgX2kyIDwgX2lpMjsgX2kyKyspIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlcy5jb25jYXQobXVsdGlDb29yZGluYXRlc1tfaTJdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbmV3IG9sR2VvbU11bHRpUG9pbnQoY29vcmRpbmF0ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdlb207XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBuZXcgb2xTdHlsZVN0eWxlKG9wdGlvbnMpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUucmVtb3ZlVmVydGV4ID0gZnVuY3Rpb24gKGZlYXR1cmUsIHZlcnRleEluZm8pIHtcbiAgdmFyIGRlbGV0ZWQgPSBmYWxzZTtcbiAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gIGlmICghKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tU2ltcGxlR2VvbWV0cnkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBnZW9tZXRyeSB0eXBlJyk7XG4gIH1cblxuICBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgaW5kZXggPSB2ZXJ0ZXhJbmZvWzBdO1xuXG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgIGNvb3JkaW5hdGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICB2YXIgX2Nvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcblxuICAgIHZhciBpbmRleE9uZSA9IHZlcnRleEluZm9bMF07XG4gICAgdmFyIGluZGV4VHdvID0gdmVydGV4SW5mb1sxXTtcbiAgICB2YXIgY29tcG9uZW50ID0gX2Nvb3JkaW5hdGVzW2luZGV4T25lXTtcblxuICAgIGlmIChjb21wb25lbnQubGVuZ3RoID4gNCkge1xuICAgICAgY29tcG9uZW50LnNwbGljZShpbmRleFR3bywgMSk7XG4gICAgICBkZWxldGVkID0gdHJ1ZTtcblxuICAgICAgaWYgKGluZGV4VHdvID09PSAwKSB7XG4gICAgICAgIGNvbXBvbmVudC5wb3AoKTtcbiAgICAgICAgY29tcG9uZW50LnB1c2goY29tcG9uZW50WzBdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoX2Nvb3JkaW5hdGVzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aUxpbmVTdHJpbmcpIHtcbiAgICB2YXIgX2Nvb3JkaW5hdGVzMiA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG5cbiAgICB2YXIgX2luZGV4T25lID0gdmVydGV4SW5mb1swXTtcbiAgICB2YXIgX2luZGV4VHdvID0gdmVydGV4SW5mb1sxXTtcbiAgICB2YXIgX2NvbXBvbmVudCA9IF9jb29yZGluYXRlczJbX2luZGV4T25lXTtcblxuICAgIGlmIChfY29tcG9uZW50Lmxlbmd0aCA+IDIpIHtcbiAgICAgIF9jb21wb25lbnQuc3BsaWNlKF9pbmRleFR3bywgMSk7XG5cbiAgICAgIGRlbGV0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyhfY29vcmRpbmF0ZXMyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aVBvbHlnb24pIHtcbiAgICB2YXIgX2Nvb3JkaW5hdGVzMyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG5cbiAgICB2YXIgX2luZGV4T25lMiA9IHZlcnRleEluZm9bMF07XG4gICAgdmFyIF9pbmRleFR3bzIgPSB2ZXJ0ZXhJbmZvWzFdO1xuICAgIHZhciBpbmRleFRocmVlID0gdmVydGV4SW5mb1syXTtcbiAgICB2YXIgX2NvbXBvbmVudDIgPSBfY29vcmRpbmF0ZXMzW19pbmRleE9uZTJdW19pbmRleFR3bzJdO1xuXG4gICAgaWYgKF9jb21wb25lbnQyLmxlbmd0aCA+IDQpIHtcbiAgICAgIF9jb21wb25lbnQyLnNwbGljZShpbmRleFRocmVlLCAxKTtcblxuICAgICAgZGVsZXRlZCA9IHRydWU7XG5cbiAgICAgIGlmIChpbmRleFRocmVlID09PSAwKSB7XG4gICAgICAgIF9jb21wb25lbnQyLnBvcCgpO1xuXG4gICAgICAgIF9jb21wb25lbnQyLnB1c2goX2NvbXBvbmVudDJbMF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyhfY29vcmRpbmF0ZXMzKTtcbiAgICB9XG4gIH1cbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLnN1cHBvcnRzVmVydGV4XyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBzdXBwb3J0ZWQgPSBbbmdlb0dlb21ldHJ5VHlwZS5MSU5FX1NUUklORywgbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORywgbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OLCBuZ2VvR2VvbWV0cnlUeXBlLlBPTFlHT04sIG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFXTtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldFR5cGUoZmVhdHVyZSk7XG4gIHJldHVybiBzdXBwb3J0ZWQuaW5jbHVkZXModHlwZSk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5zdXBwb3J0c1ZlcnRleFJlbW92YWxfID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHN1cHBvcnRlZCA9IFtuZ2VvR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HLCBuZ2VvR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HLCBuZ2VvR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT04sIG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTl07XG4gIHZhciB0eXBlID0gdGhpcy5nZXRUeXBlKGZlYXR1cmUpO1xuICByZXR1cm4gc3VwcG9ydGVkLmluY2x1ZGVzKHR5cGUpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0SGFsb1N0eWxlXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRUeXBlKGZlYXR1cmUpO1xuICB2YXIgc3R5bGU7XG4gIHZhciBoYWxvU2l6ZSA9IDM7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLlBPSU5UOlxuICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFNpemVQcm9wZXJ0eShmZWF0dXJlKTtcbiAgICAgIHN0eWxlID0gbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIGltYWdlOiBuZXcgb2xTdHlsZUNpcmNsZSh7XG4gICAgICAgICAgcmFkaXVzOiBzaXplICsgaGFsb1NpemUsXG4gICAgICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMV1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuQ0lSQ0xFOlxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5QT0xZR09OOlxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5SRUNUQU5HTEU6XG4gICAgICB2YXIgc3Ryb2tlV2lkdGggPSB0aGlzLmdldFN0cm9rZVByb3BlcnR5KGZlYXR1cmUpO1xuICAgICAgc3R5bGUgPSBuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAxXSxcbiAgICAgICAgICB3aWR0aDogc3Ryb2tlV2lkdGggKyBoYWxvU2l6ZSAqIDJcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuVEVYVDpcbiAgICAgIHN0eWxlID0gbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICByb3RhdGVXaXRoVmlldzogdHJ1ZSxcbiAgICAgICAgICB0ZXh0OiB0aGlzLmdldE5hbWVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgICAgICBzaXplOiB0aGlzLmdldFNpemVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgICAgICBhbmdsZTogdGhpcy5nZXRBbmdsZVByb3BlcnR5KGZlYXR1cmUpLFxuICAgICAgICAgIHdpZHRoOiBoYWxvU2l6ZSAqIDNcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoIXN0eWxlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHN0eWxlJyk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyZWRGZWF0dXJlVmFsdWVzKGZlYXR1cmUpIHtcbiAgdmFyIHByb3BlcnRpZXMgPSBmZWF0dXJlLmdldFByb3BlcnRpZXMoKTtcbiAgZGVsZXRlIHByb3BlcnRpZXMuYm91bmRlZEJ5O1xuICBkZWxldGUgcHJvcGVydGllc1tmZWF0dXJlLmdldEdlb21ldHJ5TmFtZSgpXTtcbiAgZGVsZXRlIHByb3BlcnRpZXMubmdlb19mZWF0dXJlX3R5cGVfO1xuXG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1trZXldO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHZhbHVlWyd4c2k6bmlsJ10gPT0gJ3RydWUnKSB7XG4gICAgICAgIHByb3BlcnRpZXNba2V5XSA9IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWVbJ19jb250ZW50XyddKSB7XG4gICAgICAgIHByb3BlcnRpZXNba2V5XSA9IHZhbHVlWydfY29udGVudF8nXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJvcGVydGllcztcbn1cblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QW5nbGVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBhbmdsZSA9ICtmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuQU5HTEUpO1xuICBjb25zb2xlLmFzc2VydCh0eXBlb2YgYW5nbGUgPT0gJ251bWJlcicpO1xuICByZXR1cm4gYW5nbGU7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRDb2xvclByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIGNvbG9yID0gZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLkNPTE9SKTtcbiAgcmV0dXJuIGNvbG9yO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0UkdCQUNvbG9yUHJvcGVydHkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgY29sb3IgPSB0aGlzLmdldENvbG9yUHJvcGVydHkoZmVhdHVyZSk7XG5cbiAgaWYgKHR5cGVvZiBjb2xvciAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGNvbG9yRnJvbVN0cmluZyhjb2xvcik7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXROYW1lUHJvcGVydHkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgbmFtZSA9IGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5OQU1FKTtcbiAgY29uc29sZS5hc3NlcnQodHlwZW9mIG5hbWUgPT0gJ3N0cmluZycpO1xuICByZXR1cm4gbmFtZTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldE9wYWNpdHlQcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHJldHVybiB0aGlzLmdldE51bWJlcihmZWF0dXJlLCBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuT1BBQ0lUWSk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRTaG93TWVhc3VyZVByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHNob3dNZWFzdXJlID0gZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNIT1dfTUVBU1VSRSk7XG5cbiAgaWYgKHNob3dNZWFzdXJlID09PSB1bmRlZmluZWQpIHtcbiAgICBzaG93TWVhc3VyZSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzaG93TWVhc3VyZSA9PT0gJ3N0cmluZycpIHtcbiAgICBzaG93TWVhc3VyZSA9IHNob3dNZWFzdXJlID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICByZXR1cm4gc2hvd01lYXN1cmU7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRTaG93TGFiZWxQcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBzaG93TGFiZWwgPSBmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuU0hPV19MQUJFTCk7XG5cbiAgaWYgKHNob3dMYWJlbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc2hvd0xhYmVsID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHNob3dMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICBzaG93TGFiZWwgPSBzaG93TGFiZWwgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBzaG93TGFiZWw7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRTaG93QXJyb3dzUHJvcGVydHkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgYXJyb3dEaXJlY3Rpb24gPSBmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuQVJST1dfRElSRUNUSU9OKTtcbiAgcmV0dXJuIGFycm93RGlyZWN0aW9uICE9PSB1bmRlZmluZWQgJiYgYXJyb3dEaXJlY3Rpb24gIT09IEFycm93RGlyZWN0aW9ucy5OT05FO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0U2l6ZVByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TSVpFKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFN0cm9rZVByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TVFJPS0UpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QXJyb3dEaXJlY3Rpb25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBhcnJvd0RpcmVjdGlvbiA9IGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5BUlJPV19ESVJFQ1RJT04pO1xuXG4gIGlmIChPYmplY3QudmFsdWVzKEFycm93RGlyZWN0aW9ucykuaW5jbHVkZXMoYXJyb3dEaXJlY3Rpb24pKSB7XG4gICAgcmV0dXJuIGFycm93RGlyZWN0aW9uO1xuICB9XG5cbiAgcmV0dXJuIEFycm93RGlyZWN0aW9ucy5OT05FO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QXJyb3dQb3NpdGlvblByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIGFycm93UG9zaXRpb24gPSBmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuQVJST1dfUE9TSVRJT04pO1xuXG4gIGlmIChPYmplY3QudmFsdWVzKEFycm93UG9zaXRpb25zKS5pbmNsdWRlcyhhcnJvd1Bvc2l0aW9uKSkge1xuICAgIHJldHVybiBhcnJvd1Bvc2l0aW9uO1xuICB9XG5cbiAgcmV0dXJuIEFycm93UG9zaXRpb25zLkZJUlNUO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZXhwb3J0ID0gZnVuY3Rpb24gKGZlYXR1cmVzLCBmb3JtYXRUeXBlKSB7XG4gIHN3aXRjaCAoZm9ybWF0VHlwZSkge1xuICAgIGNhc2UgRmVhdHVyZUZvcm1hdFR5cGUuR1BYOlxuICAgICAgdGhpcy5leHBvcnRHUFgoZmVhdHVyZXMpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIEZlYXR1cmVGb3JtYXRUeXBlLktNTDpcbiAgICAgIHRoaXMuZXhwb3J0S01MKGZlYXR1cmVzKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5leHBvcnRHUFggPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgdmFyIGZvcm1hdCA9IG5ldyBvbEZvcm1hdEdQWCgpO1xuICB2YXIgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vZ3B4K3htbCc7XG4gIHZhciBmaWxlTmFtZSA9ICdleHBvcnQuZ3B4JztcbiAgdGhpcy5leHBvcnRfKGZlYXR1cmVzLCBmb3JtYXQsIGZpbGVOYW1lLCBtaW1lVHlwZSk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5leHBvcnRLTUwgPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgdmFyIGZvcm1hdCA9IG5ldyBvbEZvcm1hdEtNTCgpO1xuICB2YXIgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1lYXJ0aC5rbWwreG1sJztcbiAgdmFyIGZpbGVOYW1lID0gJ2V4cG9ydC5rbWwnO1xuICB0aGlzLmV4cG9ydF8oZmVhdHVyZXMsIGZvcm1hdCwgZmlsZU5hbWUsIG1pbWVUeXBlKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmV4cG9ydF8gPSBmdW5jdGlvbiAoZmVhdHVyZXMsIGZvcm1hdCwgZmlsZU5hbWUsIG9wdF9taW1lVHlwZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBtaW1lVHlwZSA9IG9wdF9taW1lVHlwZSAhPT0gdW5kZWZpbmVkID8gb3B0X21pbWVUeXBlIDogJ3RleHQvcGxhaW4nO1xuICB2YXIgY2xvbmVzID0gW107XG4gIHZhciBjbG9uZTtcbiAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgIGNsb25lID0gbmV3IG9sRmVhdHVyZShmZWF0dXJlLmdldFByb3BlcnRpZXMoKSk7XG5cbiAgICBfdGhpcy5zZXRTdHlsZShjbG9uZSwgZmFsc2UpO1xuXG4gICAgY2xvbmVzLnB1c2goY2xvbmUpO1xuICB9KTtcbiAgdmFyIHdyaXRlT3B0aW9ucyA9IHRoaXMucHJvamVjdGlvbl8gPyB7XG4gICAgZGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnLFxuICAgIGZlYXR1cmVQcm9qZWN0aW9uOiB0aGlzLnByb2plY3Rpb25fXG4gIH0gOiB7fTtcbiAgdmFyIGRhdGEgPSBmb3JtYXQud3JpdGVGZWF0dXJlcyhjbG9uZXMsIHdyaXRlT3B0aW9ucyk7XG4gIHRoaXMuZG93bmxvYWRfKGRhdGEsIGZpbGVOYW1lLCBtaW1lVHlwZSArIFwiO2NoYXJzZXQ9dXRmLThcIik7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5jcmVhdGVUZXh0U3R5bGVfID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgdmFyIHRleHRfb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgaWYgKG9wdGlvbnMuYW5nbGUpIHtcbiAgICB2YXIgYW5nbGUgPSBvcHRpb25zLmFuZ2xlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmFuZ2xlIDogMDtcbiAgICB2YXIgcm90YXRpb24gPSBhbmdsZSAqIE1hdGguUEkgLyAxODA7XG4gICAgdGV4dF9vcHRpb25zLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgZGVsZXRlIG9wdGlvbnMuYW5nbGU7XG4gIH1cblxuICB0ZXh0X29wdGlvbnMuZm9udCA9IFsnbm9ybWFsJywgKG9wdGlvbnMuc2l6ZSB8fCAxMCkgKyBcInB0XCIsICdBcmlhbCddLmpvaW4oJyAnKTtcblxuICBpZiAob3B0aW9ucy5jb2xvcikge1xuICAgIHRleHRfb3B0aW9ucy5maWxsID0gbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgIGNvbG9yOiBvcHRpb25zLmNvbG9yIHx8IFswLCAwLCAwLCAxXVxuICAgIH0pO1xuICAgIGRlbGV0ZSBvcHRpb25zLmNvbG9yO1xuICB9XG5cbiAgdGV4dF9vcHRpb25zLnN0cm9rZSA9IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDFdLFxuICAgIHdpZHRoOiBvcHRpb25zLndpZHRoIHx8IDNcbiAgfSk7XG4gIGRlbGV0ZSBvcHRpb25zLndpZHRoO1xuICByZXR1cm4gbmV3IG9sU3R5bGVUZXh0KHRleHRfb3B0aW9ucyk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRNZWFzdXJlID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgaWYgKCF0aGlzLnByb2plY3Rpb25fKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb2plY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gIH1cblxuICB2YXIgbWVhc3VyZSA9ICcnO1xuXG4gIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICBpZiAodGhpcy5nZXRUeXBlKGZlYXR1cmUpID09PSBuZ2VvR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgdmFyIGF6aW11dCA9IHRoaXMub3B0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5BWklNVVQpO1xuXG4gICAgICBpZiAodHlwZW9mIGF6aW11dCAhPSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYXppbXV0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRSYWRpdXNMaW5lKGZlYXR1cmUsIGF6aW11dCk7XG4gICAgICBtZWFzdXJlID0gZ2V0Rm9ybWF0dGVkQXppbXV0UmFkaXVzKGxpbmUsIHRoaXMucHJvamVjdGlvbl8sIHRoaXMuZGVjaW1hbHNfLCB0aGlzLnByZWNpc2lvbl8sIHRoaXMudW5pdFByZWZpeEZvcm1hdF8sIHRoaXMubnVtYmVyRm9ybWF0Xyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lYXN1cmUgPSBnZXRGb3JtYXR0ZWRBcmVhKGdlb21ldHJ5LCB0aGlzLnByb2plY3Rpb25fLCB0aGlzLnByZWNpc2lvbl8sIHRoaXMudW5pdFByZWZpeEZvcm1hdF8sIHRoaXMuc3BoZXJpY2FsKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgbWVhc3VyZSA9IGdldEZvcm1hdHRlZExlbmd0aChnZW9tZXRyeSwgdGhpcy5wcm9qZWN0aW9uXywgdGhpcy5wcmVjaXNpb25fLCB0aGlzLnVuaXRQcmVmaXhGb3JtYXRfLCB0aGlzLnNwaGVyaWNhbCk7XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2ludCkge1xuICAgIGlmICh0aGlzLnBvaW50RmlsdGVyRm5fID09PSBudWxsKSB7XG4gICAgICBtZWFzdXJlID0gZ2V0Rm9ybWF0dGVkUG9pbnQoZ2VvbWV0cnksIHRoaXMuZGVjaW1hbHNfLCB0aGlzLm5nZW9OdW1iZXJDb29yZGluYXRlc18pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuXG4gICAgICBpZiAodGhpcy5wb2ludEZpbHRlckFyZ3NfLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbWVhc3VyZSA9IHRoaXMucG9pbnRGaWx0ZXJGbl8oY29vcmRpbmF0ZXMsIHRoaXMucG9pbnRGaWx0ZXJBcmdzX1swXSwgdGhpcy5wb2ludEZpbHRlckFyZ3NfWzFdKS5qb2luKCcsICcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVhc3VyZSA9IHRoaXMucG9pbnRGaWx0ZXJGbl8oY29vcmRpbmF0ZXMsIHRoaXMucG9pbnRGaWx0ZXJBcmdzX1swXSkuam9pbignLCAnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVhc3VyZTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGdlb21ldHJ5LCAnR2VvbWV0cnkgc2hvdWxkIGJlIHRocnV0aHknKTtcbiAgdmFyIHR5cGU7XG5cbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpIHtcbiAgICBpZiAoZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1RFWFQpKSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5URVhUO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5QT0lOVDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aVBvaW50KSB7XG4gICAgdHlwZSA9IG5nZW9HZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ7XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2x5Z29uKSB7XG4gICAgaWYgKGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5JU19DSVJDTEUpKSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5DSVJDTEU7XG4gICAgfSBlbHNlIGlmIChmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuSVNfUkVDVEFOR0xFKSkge1xuICAgICAgdHlwZSA9IG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5QT0xZR09OO1xuICAgIH1cbiAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpUG9seWdvbikge1xuICAgIHR5cGUgPSBuZ2VvR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT047XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgdHlwZSA9IG5nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkc7XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aUxpbmVTdHJpbmcpIHtcbiAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORztcbiAgfVxuXG4gIGlmICghdHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0eXBlJyk7XG4gIH1cblxuICByZXR1cm4gdHlwZTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmZpdE1hcFRvRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBtYXAsIG9wdF9kdXJhdGlvbikge1xuICB2YXIgZHVyYXRpb24gPSBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MDtcbiAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShzaXplKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzaXplJyk7XG4gIH1cblxuICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gIHZhciB2aWV3RXh0ZW50ID0gdmlldy5jYWxjdWxhdGVFeHRlbnQoc2l6ZSk7XG4gIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gIH1cblxuICB2YXIgZ2VvbUlzVmlzaWJsZSA9IGdlb21ldHJ5LmludGVyc2VjdHNFeHRlbnQodmlld0V4dGVudCk7XG4gIHZhciBtYXBDZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShtYXBDZW50ZXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcENlbnRlcicpO1xuICB9XG5cbiAgdmFyIGZlYXR1cmVFeHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcblxuICBpZiAoZ2VvbUlzVmlzaWJsZSkge1xuICAgIGlmICghKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpKSB7XG4gICAgICB2YXIgZmVhdHVyZVJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnQoZmVhdHVyZUV4dGVudCk7XG4gICAgICB2YXIgZmVhdHVyZVpvb21UbXAgPSB2aWV3LmdldFpvb21Gb3JSZXNvbHV0aW9uKGZlYXR1cmVSZXNvbHV0aW9uKTtcblxuICAgICAgaWYgKCFmZWF0dXJlWm9vbVRtcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZVpvb20nKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZlYXR1cmVab29tID0gTWF0aC5mbG9vcihmZWF0dXJlWm9vbVRtcCk7XG4gICAgICB2YXIgem9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuXG4gICAgICBpZiAoIXpvb20pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHpvb20nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZlYXR1cmVab29tIDwgem9vbSkge1xuICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgIGNlbnRlcjogbWFwQ2VudGVyLFxuICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblxuICAgICAgICB9LCB7XG4gICAgICAgICAgY2VudGVyOiBtYXBDZW50ZXIsXG4gICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgIHpvb206IGZlYXR1cmVab29tXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgZmVhdHVyZUV4dGVudEhlaWdodCA9IG9sRXh0ZW50LmdldEhlaWdodChmZWF0dXJlRXh0ZW50KTtcbiAgICB2YXIgZmVhdHVyZUV4dGVudFdpZHRoID0gb2xFeHRlbnQuZ2V0V2lkdGgoZmVhdHVyZUV4dGVudCk7XG4gICAgdmFyIHZpZXdFeHRlbnRIZWlnaHQgPSBvbEV4dGVudC5nZXRIZWlnaHQodmlld0V4dGVudCk7XG4gICAgdmFyIHZpZXdFeHRlbnRXaWR0aCA9IG9sRXh0ZW50LmdldFdpZHRoKHZpZXdFeHRlbnQpO1xuICAgIHZhciBnZW9tRml0c0luRXh0ZW50ID0gdmlld0V4dGVudEhlaWdodCA+PSBmZWF0dXJlRXh0ZW50SGVpZ2h0ICYmIHZpZXdFeHRlbnRXaWR0aCA+PSBmZWF0dXJlRXh0ZW50V2lkdGg7XG5cbiAgICBpZiAoZ2VvbUZpdHNJbkV4dGVudCkge1xuICAgICAgdmFyIGZlYXR1cmVDZW50ZXI7XG5cbiAgICAgIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpIHtcbiAgICAgICAgZmVhdHVyZUNlbnRlciA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVBdCgwLjUpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICAgICAgZmVhdHVyZUNlbnRlciA9IGdlb21ldHJ5LmdldEludGVyaW9yUG9pbnQoKS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KSB7XG4gICAgICAgIGZlYXR1cmVDZW50ZXIgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmVhdHVyZUNlbnRlciA9IG9sRXh0ZW50LmdldENlbnRlcihnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XG4gICAgICB9XG5cbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIGNlbnRlcjogbWFwQ2VudGVyLFxuICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25cbiAgICAgIH0sIHtcbiAgICAgICAgY2VudGVyOiBmZWF0dXJlQ2VudGVyLFxuICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aWV3LmZpdChmZWF0dXJlRXh0ZW50LCB7XG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgc2l6ZTogc2l6ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRSYWRpdXNMaW5lID0gZnVuY3Rpb24gKGZlYXR1cmUsIGF6aW11dCkge1xuICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgaWYgKCFnZW9tZXRyeSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZW9tZXRyeScpO1xuICB9XG5cbiAgdmFyIGV4dGVudCA9IGdlb21ldHJ5LmdldEV4dGVudCgpO1xuICB2YXIgcmFkaXVzID0gKGV4dGVudFszXSAtIGV4dGVudFsxXSkgLyAyO1xuICB2YXIgY2VudGVyID0gb2xFeHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcbiAgdmFyIHggPSBNYXRoLmNvcygoYXppbXV0IC0gOTApICogTWF0aC5QSSAvIDE4MCkgKiByYWRpdXM7XG4gIHZhciB5ID0gLU1hdGguc2luKChhemltdXQgLSA5MCkgKiBNYXRoLlBJIC8gMTgwKSAqIHJhZGl1cztcbiAgdmFyIGVuZFBvaW50ID0gW3ggKyBjZW50ZXJbMF0sIHkgKyBjZW50ZXJbMV1dO1xuICByZXR1cm4gbmV3IG9sR2VvbUxpbmVTdHJpbmcoW2NlbnRlciwgZW5kUG9pbnRdKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIGdlb21ldHJ5TmFtZSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnlOYW1lKCk7XG4gIHZhciBub25TcGF0aWFsUHJvcGVydGllcyA9IHt9O1xuICB2YXIgcHJvcGVydGllcyA9IGZlYXR1cmUuZ2V0UHJvcGVydGllcygpO1xuXG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKGtleSAhPT0gZ2VvbWV0cnlOYW1lKSB7XG4gICAgICBub25TcGF0aWFsUHJvcGVydGllc1trZXldID0gcHJvcGVydGllc1trZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub25TcGF0aWFsUHJvcGVydGllcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmNsZWFyTm9uU3BhdGlhbFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgZ2VvbWV0cnlOYW1lID0gZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKTtcbiAgdmFyIHByb3BlcnRpZXMgPSBmZWF0dXJlLmdldFByb3BlcnRpZXMoKTtcblxuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIGlmIChrZXkgIT09IGdlb21ldHJ5TmFtZSkge1xuICAgICAgZmVhdHVyZS5zZXQoa2V5LCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfVxufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZmluZEZlYXR1cmVJbmRleEJ5RmlkID0gZnVuY3Rpb24gKGZlYXR1cmVzLCBmaWQpIHtcbiAgdmFyIGluZGV4ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGlmIChmZWF0dXJlc1tpXS5nZXRJZCgpID09IGZpZCkge1xuICAgICAgaW5kZXggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluZGV4O1xufTtcblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9GZWF0dXJlSGVscGVyJywgW25nZW9Eb3dubG9hZFNlcnZpY2UubmFtZSwgbmdlb01pc2NGaWx0ZXJzLm5hbWVdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ25nZW9GZWF0dXJlSGVscGVyJywgRmVhdHVyZUhlbHBlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJGaWxlU2VydmljZS4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkaHR0cFwiLCBcImdldHRleHRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmV4cG9ydCBmdW5jdGlvbiBGaWxlU2VydmljZSgkcSwgJGh0dHAsIGdldHRleHQpIHtcbiAgdGhpcy5pc1ZhbGlkRmlsZVNpemUgPSBmdW5jdGlvbiAoZmlsZVNpemUpIHtcbiAgICByZXR1cm4gZmlsZVNpemUgPD0gMjAwMDAwMDA7XG4gIH07XG5cbiAgdGhpcy5pc1dtc0dldENhcCA9IGZ1bmN0aW9uIChmaWxlQ29udGVudCkge1xuICAgIHJldHVybiAvPChXTVRfTVNfQ2FwYWJpbGl0aWVzfFdNU19DYXBhYmlsaXRpZXMpLy50ZXN0KGZpbGVDb250ZW50KTtcbiAgfTtcblxuICB0aGlzLmlzV210c0dldENhcCA9IGZ1bmN0aW9uIChmaWxlQ29udGVudCkge1xuICAgIHJldHVybiBmaWxlQ29udGVudC5pbmNsdWRlcygnPENhcGFiaWxpdGllcycpO1xuICB9O1xuXG4gIHRoaXMuaXNLbWwgPSBmdW5jdGlvbiAoZmlsZUNvbnRlbnQpIHtcbiAgICByZXR1cm4gZmlsZUNvbnRlbnQuaW5jbHVkZXMoJzxrbWwnKSAmJiBmaWxlQ29udGVudC5pbmNsdWRlcygnPC9rbWw+Jyk7XG4gIH07XG5cbiAgdGhpcy5pc0dweCA9IGZ1bmN0aW9uIChmaWxlQ29udGVudCkge1xuICAgIHJldHVybiBmaWxlQ29udGVudC5pbmNsdWRlcygnPGdweCcpICYmIGZpbGVDb250ZW50LmluY2x1ZGVzKCc8L2dweD4nKTtcbiAgfTtcblxuICB2YXIgZmlsZVJlYWRlciA9IG51bGw7XG5cbiAgdGhpcy5yZWFkID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuXG4gICAgaWYgKGZpbGVSZWFkZXIgJiYgZmlsZVJlYWRlci5yZWFkeVN0YXRlID09PSBGaWxlUmVhZGVyLkxPQURJTkcpIHtcbiAgICAgIGZpbGVSZWFkZXIuYWJvcnQoKTtcbiAgICB9XG5cbiAgICBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEZpbGVSZWFkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgdGFyZ2V0IHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgZGVmZXIucmVzb2x2ZSh0YXJnZXQucmVzdWx0KTtcbiAgICB9O1xuXG4gICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEZpbGVSZWFkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgdGFyZ2V0IHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVyciA9IHRhcmdldC5lcnJvcjtcblxuICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGVycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlYWRpbmcgZmlsZSBmYWlsZWQ6ICcsIGVycik7XG4gICAgICBkZWZlci5yZWplY3Qoe1xuICAgICAgICAnbWVzc2FnZSc6IGVyci5jb2RlID09IDIwID8gZ2V0dGV4dCgnT3BlcmF0aW9uIGNhbmNlbGVkJykgOiBnZXR0ZXh0KCdSZWFkIGZhaWxlZCcpLFxuICAgICAgICAncmVhc29uJzogZXJyLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmaWxlUmVhZGVyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBkZWZlci5ub3RpZnkoZXZ0KTtcbiAgICB9O1xuXG4gICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHZhciBjYW5jZWxlcjtcblxuICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAodXJsLCBvcHRfY2FuY2VsUCkge1xuICAgIGlmIChjYW5jZWxlcikge1xuICAgICAgY2FuY2VsZXIucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNhbmNlbGVyID0gb3B0X2NhbmNlbFAgfHwgJHEuZGVmZXIoKTtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICRodHRwLmdldCh1cmwsIHtcbiAgICAgIHRpbWVvdXQ6IGNhbmNlbGVyLnByb21pc2VcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWRpbmcgZmlsZSBmYWlsZWQ6ICcsIHJlYXNvbik7XG4gICAgICBkZWZlci5yZWplY3Qoe1xuICAgICAgICAnbWVzc2FnZSc6IGdldHRleHQoJ1VwbG9hZCBmYWlsZWQnKSxcbiAgICAgICAgJ3JlYXNvbic6IHJlYXNvblxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gIH07XG59XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0ZpbGUnLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvRmlsZScsIEZpbGVTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuZXhwb3J0IGZ1bmN0aW9uIFRpbWUoKSB7fVxuXG5UaW1lLnByb3RvdHlwZS5jcmVhdGVEYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgZGVmYXVsdFZhbHVlID0gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPSB1bmRlZmluZWQgPyBuZXcgRGF0ZSh2YWx1ZSkgOiBkZWZhdWx0VmFsdWU7XG59O1xuXG5UaW1lLnByb3RvdHlwZS5nZXRUaW1lID0gZnVuY3Rpb24gKGRhdGUsIGRlZmF1bHRWYWx1ZSkge1xuICBpZiAoZGVmYXVsdFZhbHVlID09PSB2b2lkIDApIHtcbiAgICBkZWZhdWx0VmFsdWUgPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGRhdGUgPyBkYXRlLmdldFRpbWUoKSA6IGRlZmF1bHRWYWx1ZTtcbn07XG5cblRpbWUucHJvdG90eXBlLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAodGltZSkge1xuICB2YXIgbWluRGF0ZSA9IHRoaXMuY3JlYXRlRGF0ZSh0aW1lLm1pblZhbHVlKTtcbiAgdmFyIG1heERhdGUgPSB0aGlzLmNyZWF0ZURhdGUodGltZS5tYXhWYWx1ZSk7XG4gIHZhciBtaW5EZWZhdWx0RGF0ZSA9IHRoaXMuY3JlYXRlRGF0ZSh0aW1lLm1pbkRlZlZhbHVlLCBtaW5EYXRlKTtcbiAgdmFyIG1heERlZmF1bHREYXRlID0gdGhpcy5jcmVhdGVEYXRlKHRpbWUubWF4RGVmVmFsdWUsIG1heERhdGUpO1xuXG4gIGlmICghbWluRGVmYXVsdERhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWluRGVmYXVsdERhdGUnKTtcbiAgfVxuXG4gIGlmICghbWF4RGVmYXVsdERhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWF4RGVmYXVsdERhdGUnKTtcbiAgfVxuXG4gIHZhciBtaW5UaW1lID0gdGhpcy5nZXRUaW1lKG1pbkRhdGUpO1xuICB2YXIgbWF4VGltZSA9IHRoaXMuZ2V0VGltZShtYXhEYXRlKTtcbiAgdmFyIG1pbkRlZmF1bHRUaW1lID0gdGhpcy5nZXRUaW1lKG1pbkRlZmF1bHREYXRlKTtcbiAgdmFyIG1heERlZmF1bHRUaW1lID0gdGhpcy5nZXRUaW1lKG1heERlZmF1bHREYXRlKTtcblxuICBpZiAoIW1pbkRlZmF1bHRUaW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1pbkRlZmF1bHRUaW1lJyk7XG4gIH1cblxuICB2YXIgZGVmYXVsdFZhbHVlcyA9IG1pbkRlZmF1bHRUaW1lO1xuXG4gIGlmICh0aW1lLm1vZGUgPT09ICdyYW5nZScpIHtcbiAgICBpZiAoIW1heERlZmF1bHRUaW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWF4RGVmYXVsdFRpbWUnKTtcbiAgICB9XG5cbiAgICBkZWZhdWx0VmFsdWVzID0gW21pbkRlZmF1bHRUaW1lLCBtYXhEZWZhdWx0VGltZV07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1pbkRhdGU6IG1pblRpbWUsXG4gICAgbWF4RGF0ZTogbWF4VGltZSxcbiAgICB2YWx1ZXM6IGRlZmF1bHRWYWx1ZXNcbiAgfTtcbn07XG5cblRpbWUucHJvdG90eXBlLmdldFVUQ0RhdGUgPSBmdW5jdGlvbiAobG9jYWxEYXRlKSB7XG4gIHJldHVybiBuZXcgRGF0ZShsb2NhbERhdGUuZ2V0VVRDRnVsbFllYXIoKSwgbG9jYWxEYXRlLmdldFVUQ01vbnRoKCksIGxvY2FsRGF0ZS5nZXRVVENEYXRlKCkpO1xufTtcblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9UaW1lJywgW10pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb1RpbWUnLCBUaW1lKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh0b29sQ29udGV4dCwgYWN0aXZlUHJvcGVydHlOYW1lKSB7XG4gIHRoaXMuZ2V0QWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0b29sQ29udGV4dFthY3RpdmVQcm9wZXJ0eU5hbWVdO1xuICB9O1xuXG4gIHRoaXMuc2V0QWN0aXZlID0gZnVuY3Rpb24gKG5ld1ZhbCkge1xuICAgIHRvb2xDb250ZXh0W2FjdGl2ZVByb3BlcnR5TmFtZV0gPSBuZXdWYWw7XG4gIH07XG59IiwiVG9vbEFjdGl2YXRlTWdyLiRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCJdO1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuZXhwb3J0IGZ1bmN0aW9uIFRvb2xBY3RpdmF0ZU1ncigkcm9vdFNjb3BlKSB7XG4gIHRoaXMuZ3JvdXBzXyA9IHt9O1xuICB0aGlzLnNjb3BlXyA9ICRyb290U2NvcGU7XG59XG5cblRvb2xBY3RpdmF0ZU1nci5wcm90b3R5cGUucmVnaXN0ZXJUb29sID0gZnVuY3Rpb24gKGdyb3VwTmFtZSwgdG9vbCwgb3B0X2RlZmF1bHRBY3RpdmF0ZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmICghdGhpcy5ncm91cHNfW2dyb3VwTmFtZV0pIHtcbiAgICB0aGlzLmdyb3Vwc19bZ3JvdXBOYW1lXSA9IFtdO1xuICB9XG5cbiAgdmFyIHVubGlzdGVuID0gdGhpcy5zY29wZV8uJHdhdGNoKHRvb2wuZ2V0QWN0aXZlLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICBpZiAobmV3VmFsID09PSBvbGRWYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobmV3VmFsKSB7XG4gICAgICBfdGhpcy5kZWFjdGl2YXRlVG9vbHNfKGdyb3VwTmFtZSwgdG9vbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF90aGlzLmFjdGl2YXRlRGVmYXVsdF8oZ3JvdXBOYW1lKTtcbiAgICB9XG4gIH0pO1xuICB0aGlzLmdyb3Vwc19bZ3JvdXBOYW1lXS5wdXNoKHtcbiAgICB0b29sOiB0b29sLFxuICAgIGRlZmF1bHRUb29sOiBvcHRfZGVmYXVsdEFjdGl2YXRlIHx8IGZhbHNlLFxuICAgIHVubGlzdGVuOiB1bmxpc3RlblxuICB9KTtcbn07XG5cblRvb2xBY3RpdmF0ZU1nci5wcm90b3R5cGUudW5yZWdpc3RlclRvb2wgPSBmdW5jdGlvbiAoZ3JvdXBOYW1lLCB0b29sKSB7XG4gIHZhciBlbnRyaWVzID0gdGhpcy5ncm91cHNfW2dyb3VwTmFtZV07XG5cbiAgaWYgKGVudHJpZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChlbnRyaWVzW2ldLnRvb2wgPT0gdG9vbCkge1xuICAgICAgICBlbnRyaWVzW2ldLnVubGlzdGVuKCk7XG4gICAgICAgIGVudHJpZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblRvb2xBY3RpdmF0ZU1nci5wcm90b3R5cGUudW5yZWdpc3Rlckdyb3VwID0gZnVuY3Rpb24gKGdyb3VwTmFtZSkge1xuICB2YXIgZW50cmllcyA9IHRoaXMuZ3JvdXBzX1tncm91cE5hbWVdO1xuXG4gIGlmIChlbnRyaWVzKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShlbnRyaWVzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBlbnRyeSA9IF9zdGVwLnZhbHVlO1xuICAgICAgZW50cnkudW5saXN0ZW4oKTtcbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5ncm91cHNfW2dyb3VwTmFtZV07XG4gIH1cbn07XG5cblRvb2xBY3RpdmF0ZU1nci5wcm90b3R5cGUuYWN0aXZhdGVUb29sID0gZnVuY3Rpb24gKHRvb2wpIHtcbiAgdG9vbC5zZXRBY3RpdmUodHJ1ZSk7XG59O1xuXG5Ub29sQWN0aXZhdGVNZ3IucHJvdG90eXBlLmRlYWN0aXZhdGVUb29sID0gZnVuY3Rpb24gKHRvb2wpIHtcbiAgdG9vbC5zZXRBY3RpdmUoZmFsc2UpO1xufTtcblxuVG9vbEFjdGl2YXRlTWdyLnByb3RvdHlwZS5kZWFjdGl2YXRlVG9vbHNfID0gZnVuY3Rpb24gKGdyb3VwTmFtZSwgdG9vbCkge1xuICB2YXIgZW50cmllcyA9IHRoaXMuZ3JvdXBzX1tncm91cE5hbWVdO1xuXG4gIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGVudHJpZXMpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgIHZhciBlbnRyeSA9IF9zdGVwMi52YWx1ZTtcblxuICAgIGlmICh0b29sICE9IGVudHJ5LnRvb2wpIHtcbiAgICAgIGVudHJ5LnRvb2wuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICB9XG4gIH1cbn07XG5cblRvb2xBY3RpdmF0ZU1nci5wcm90b3R5cGUuYWN0aXZhdGVEZWZhdWx0XyA9IGZ1bmN0aW9uIChncm91cE5hbWUpIHtcbiAgdmFyIGVudHJpZXMgPSB0aGlzLmdyb3Vwc19bZ3JvdXBOYW1lXTtcbiAgdmFyIGRlZmF1bHRUb29sID0gbnVsbDtcbiAgdmFyIGhhc0FjdGl2ZVRvb2wgPSBmYWxzZTtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShlbnRyaWVzKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICB2YXIgZW50cnkgPSBfc3RlcDMudmFsdWU7XG4gICAgaGFzQWN0aXZlVG9vbCA9IGhhc0FjdGl2ZVRvb2wgfHwgZW50cnkudG9vbC5nZXRBY3RpdmUoKTtcblxuICAgIGlmIChlbnRyeS5kZWZhdWx0VG9vbCkge1xuICAgICAgZGVmYXVsdFRvb2wgPSBlbnRyeS50b29sO1xuICAgIH1cbiAgfVxuXG4gIGlmICghaGFzQWN0aXZlVG9vbCAmJiBkZWZhdWx0VG9vbCAhPT0gbnVsbCkge1xuICAgIGRlZmF1bHRUb29sLnNldEFjdGl2ZSh0cnVlKTtcbiAgfVxufTtcblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Ub29sQWN0aXZhdGVNZ3InLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvVG9vbEFjdGl2YXRlTWdyJywgVG9vbEFjdGl2YXRlTWdyKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWlzY1RpbWUsIHsgVGltZSB9IGZyb20gJ25nZW8vbWlzYy9UaW1lLmpzJztcbmV4cG9ydCB2YXIgV01TVGltZSA9IGZ1bmN0aW9uIChfVGltZSkge1xuICBXTVNUaW1lLiRpbmplY3QgPSBbXCIkZmlsdGVyXCIsIFwiZ2V0dGV4dENhdGFsb2dcIl07XG5cbiAgX2luaGVyaXRzTG9vc2UoV01TVGltZSwgX1RpbWUpO1xuXG4gIGZ1bmN0aW9uIFdNU1RpbWUoJGZpbHRlciwgZ2V0dGV4dENhdGFsb2cpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9UaW1lLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy4kZmlsdGVyXyA9ICRmaWx0ZXI7XG4gICAgX3RoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFdNU1RpbWUucHJvdG90eXBlO1xuXG4gIF9wcm90by5mb3JtYXRUaW1lVmFsdWUgPSBmdW5jdGlvbiBmb3JtYXRUaW1lVmFsdWUodGltZSwgcmVzb2x1dGlvbiwgb3B0X3VzZUlTT0Zvcm1hdCwgb3B0X3RvVVRDKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcbiAgICB2YXIgdXRjID0gb3B0X3RvVVRDID8gJ1VUQycgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHllYXJSZXNvbHV0aW9uID0gJ3l5eXknO1xuICAgIHZhciBtb250aFJlc29sdXRpb24gPSAneXl5eS1NTSc7XG4gICAgdmFyIGRheVJlc29sdXRpb24gPSAneXl5eS1NTS1kZCc7XG4gICAgdmFyIHNlY29uZFJlc29sdXRpb24gPSBudWxsO1xuXG4gICAgaWYgKCFvcHRfdXNlSVNPRm9ybWF0KSB7XG4gICAgICB2YXIgZ2V0dGV4dENhdGFsb2cgPSB0aGlzLmdldHRleHRDYXRhbG9nXztcbiAgICAgIHllYXJSZXNvbHV0aW9uID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCd5eXl5Jyk7XG4gICAgICBtb250aFJlc29sdXRpb24gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ00veXl5eScpO1xuICAgICAgZGF5UmVzb2x1dGlvbiA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnTS9kL3l5eXknKTtcbiAgICAgIHNlY29uZFJlc29sdXRpb24gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ00vZC95eXl5IEhIOk1NOnNzJyk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChyZXNvbHV0aW9uKSB7XG4gICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZpbHRlcl8oJ2RhdGUnKShkYXRlLCB5ZWFyUmVzb2x1dGlvbiwgdXRjKTtcblxuICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICByZXR1cm4gdGhpcy4kZmlsdGVyXygnZGF0ZScpKGRhdGUsIG1vbnRoUmVzb2x1dGlvbiwgdXRjKTtcblxuICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZpbHRlcl8oJ2RhdGUnKShkYXRlLCBkYXlSZXNvbHV0aW9uLCB1dGMpO1xuXG4gICAgICBjYXNlICdzZWNvbmQnOlxuICAgICAgICBpZiAoc2Vjb25kUmVzb2x1dGlvbikge1xuICAgICAgICAgIHJldHVybiB0aGlzLiRmaWx0ZXJfKCdkYXRlJykoZGF0ZSwgc2Vjb25kUmVzb2x1dGlvbiwgdXRjKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLlxcZHszfS8sICcnKTtcbiAgICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLlxcZHszfS8sICcnKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmZvcm1hdFdNU1RpbWVQYXJhbSA9IGZ1bmN0aW9uIGZvcm1hdFdNU1RpbWVQYXJhbSh3bXNUaW1lUHJvcGVydHksIHRpbWVzLCBvcHRfdG9VVEMpIHtcbiAgICBjb25zb2xlLmFzc2VydCh3bXNUaW1lUHJvcGVydHkucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKTtcblxuICAgIGlmICh3bXNUaW1lUHJvcGVydHkubW9kZSA9PT0gJ3JhbmdlJykge1xuICAgICAgY29uc29sZS5hc3NlcnQodGltZXMuZW5kICE9PSB1bmRlZmluZWQpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGltZVZhbHVlKHRpbWVzLnN0YXJ0LCB3bXNUaW1lUHJvcGVydHkucmVzb2x1dGlvbiwgdHJ1ZSwgb3B0X3RvVVRDKSArIFwiL1wiICsgdGhpcy5mb3JtYXRUaW1lVmFsdWUodGltZXMuZW5kLCB3bXNUaW1lUHJvcGVydHkucmVzb2x1dGlvbiwgdHJ1ZSwgb3B0X3RvVVRDKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGltZVZhbHVlKHRpbWVzLnN0YXJ0LCB3bXNUaW1lUHJvcGVydHkucmVzb2x1dGlvbiwgdHJ1ZSwgb3B0X3RvVVRDKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFdNU1RpbWU7XG59KFRpbWUpO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9XTVNUaW1lJywgW25nZW9NaXNjVGltZS5uYW1lXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvV01TVGltZScsIFdNU1RpbWUpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiYnV0dG9uQ29tcG9uZW50LiRpbmplY3QgPSBbXCIkcGFyc2VcIl07XG5idXR0b25Hcm91cENvbXBvbmVudC4kaW5qZWN0ID0gW1wiJHBhcnNlXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0J0bkNvbXBvbmVudCcsIFtdKTtcblxuZnVuY3Rpb24gYnV0dG9uR3JvdXBDb21wb25lbnQoJHBhcnNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBjb250cm9sbGVyOiAnbmdlb0J0bkdyb3VwQ29udHJvbGxlcicsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXIpIHtcbiAgICAgIGlmICghY29udHJvbGxlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29udHJvbGxlcicpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2V0QWN0aXZlID0gJHBhcnNlKGF0dHJzLm5nZW9CdG5Hcm91cEFjdGl2ZSkuYXNzaWduO1xuXG4gICAgICBpZiAoc2V0QWN0aXZlKSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuYnV0dG9uc18uc29tZShmdW5jdGlvbiAoYnV0dG9uTW9kZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBidXR0b25Nb2RlbChzY29wZSkgPT09IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgIHNldEFjdGl2ZShzY29wZSwgbmV3VmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbm15TW9kdWxlLmRpcmVjdGl2ZSgnbmdlb0J0bkdyb3VwJywgYnV0dG9uR3JvdXBDb21wb25lbnQpO1xuZXhwb3J0IHZhciBCdG5Hcm91cENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIEJ0bkdyb3VwQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xuXG4gIGZ1bmN0aW9uIEJ0bkdyb3VwQ29udHJvbGxlcigkc2NvcGUpIHtcbiAgICB0aGlzLmJ1dHRvbnNfID0gW107XG4gICAgdGhpcy5zY29wZV8gPSAkc2NvcGU7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQnRuR3JvdXBDb250cm9sbGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uYWN0aXZhdGUgPSBmdW5jdGlvbiBhY3RpdmF0ZShpbmRleCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLmJ1dHRvbnNfLmZvckVhY2goZnVuY3Rpb24gKGV4cHJlc3Npb25GbiwgaSkge1xuICAgICAgaWYgKGkgIT0gaW5kZXgpIHtcbiAgICAgICAgZXhwcmVzc2lvbkZuLmFzc2lnbihfdGhpcy5zY29wZV8sIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uYWRkQnV0dG9uID0gZnVuY3Rpb24gYWRkQnV0dG9uKGV4cHJlc3Npb25Gbikge1xuICAgIHRoaXMuYnV0dG9uc18ucHVzaChleHByZXNzaW9uRm4pO1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbnNfLmxlbmd0aCAtIDE7XG4gIH07XG5cbiAgcmV0dXJuIEJ0bkdyb3VwQ29udHJvbGxlcjtcbn0oKTtcbm15TW9kdWxlLmNvbnRyb2xsZXIoJ25nZW9CdG5Hcm91cENvbnRyb2xsZXInLCBCdG5Hcm91cENvbnRyb2xsZXIpO1xuXG5mdW5jdGlvbiBidXR0b25Db21wb25lbnQoJHBhcnNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogWyc/Xm5nZW9CdG5Hcm91cCcsICduZ01vZGVsJ10sXG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIGlmICghY3RybHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGN0cmxzJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBidXR0b25zQ3RybCA9IGN0cmxzWzBdO1xuICAgICAgdmFyIG5nTW9kZWxDdHJsID0gY3RybHNbMV07XG4gICAgICB2YXIgaW5kZXhJbkdyb3VwID0gLTE7XG4gICAgICB2YXIgbmdNb2RlbEdldCA9ICRwYXJzZShhdHRycy5uZ01vZGVsKTtcbiAgICAgIHZhciBuZ01vZGVsU2V0ID0gbmdNb2RlbEdldC5hc3NpZ247XG5cbiAgICAgIGlmIChuZ01vZGVsR2V0KHNjb3BlKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5nTW9kZWxTZXQoc2NvcGUsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJ1dHRvbnNDdHJsICE9PSBudWxsKSB7XG4gICAgICAgIGluZGV4SW5Hcm91cCA9IGJ1dHRvbnNDdHJsLmFkZEJ1dHRvbihuZ01vZGVsR2V0KTtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSghbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSk7XG4gICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSAmJiBidXR0b25zQ3RybCAhPT0gbnVsbCkge1xuICAgICAgICAgIGJ1dHRvbnNDdHJsLmFjdGl2YXRlKGluZGV4SW5Hcm91cCk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9CdG4nLCBidXR0b25Db21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPHRhYmxlIGNsYXNzPVwibmdlby1jb2xvcnBpY2tlci1wYWxldHRlXCI+XFxuICA8dHIgbmctcmVwZWF0PVwiY29sb3JzIGluIDo6Y3RybC5jb2xvcnNcIj5cXG4gICAgPHRkXFxuICAgICAgbmctcmVwZWF0PVwiY29sb3IgaW4gOjpjb2xvcnNcIlxcbiAgICAgIG5nLWNsaWNrPVwiY3RybC5zZXRDb2xvcihjb2xvcilcIlxcbiAgICAgIG5nLWNsYXNzPVwie1xcJ25nZW8tY29sb3JwaWNrZXItc2VsZWN0ZWRcXCc6IGNvbG9yID09IGN0cmwuY29sb3J9XCI+XFxuICAgICAgPGRpdiBuZy1zdHlsZT1cIjo6e1xcJ2JhY2tncm91bmQtY29sb3JcXCc6IGNvbG9yfVwiPjwvZGl2PlxcbiAgICA8L3RkPlxcbiAgPC90cj5cXG48L3RhYmxlPlxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJjb2xvclBpY2tlckNvbXBvbmVudC4kaW5qZWN0ID0gW1wibmdlb0NvbG9ycGlja2VyVGVtcGxhdGVVcmxcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQ29sb3JwaWNrZXInLCBbXSk7XG5teU1vZHVsZS52YWx1ZSgnbmdlb0NvbG9ycGlja2VyVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gYXR0cnNbJ25nZW9Db2xvcnBpY2tlclRlbXBsYXRldXJsJ107XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9taXNjL2NvbG9ycGlja2VyQ29tcG9uZW50Jztcbn0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vbWlzYy9jb2xvcnBpY2tlckNvbXBvbmVudCcsIHJlcXVpcmUoJy4vY29sb3JwaWNrZXJDb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcblxuZnVuY3Rpb24gY29sb3JQaWNrZXJDb21wb25lbnQobmdlb0NvbG9ycGlja2VyVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHNjb3BlOiB7XG4gICAgICBjb2xvcnM6ICc8P25nZW9Db2xvcnBpY2tlcicsXG4gICAgICBjb2xvcjogJz0/bmdlb0NvbG9ycGlja2VyQ29sb3InXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiAnTmdlb0NvbG9ycGlja2VyQ29udHJvbGxlciBhcyBjdHJsJyxcbiAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBuZ2VvQ29sb3JwaWNrZXJUZW1wbGF0ZVVybFxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9Db2xvcnBpY2tlcicsIGNvbG9yUGlja2VyQ29tcG9uZW50KTtcbnZhciBERUZBVUxUX0NPTE9SUyA9IFtbJyNGNEVCMzcnLCAnI0NEREMzOScsICcjNjJBRjQ0JywgJyMwMDlENTcnLCAnIzBCQTlDQycsICcjNDE4NkYwJywgJyMzRjVCQTknLCAnIzdDMzU5MicsICcjQTYxQjRBJywgJyNEQjQ0MzYnLCAnI0Y4OTcxQicsICcjRjRCNDAwJywgJyM3OTUwNDYnXSwgWycjRjlGN0E2JywgJyNFNkVFQTMnLCAnI0I3REJBQicsICcjN0NDRkE5JywgJyM5M0Q3RTgnLCAnIzlGQzNGRicsICcjQTdCNUQ3JywgJyNDNkE0Q0YnLCAnI0Q2OThBRCcsICcjRUU5Qzk2JywgJyNGQUQxOTknLCAnI0ZGREQ1RScsICcjQjI5MTg5J10sIFsnI2ZmZmZmZicsICcjQ0NDQ0NDJywgJyM3NzcnLCAnIzAwMDAwMCddXTtcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sbGVyKCkge1xuICB0aGlzLmNvbG9ycyA9IHRoaXMuY29sb3JzIHx8IERFRkFVTFRfQ09MT1JTO1xuICB0aGlzLmNvbG9yO1xufVxuXG5Db250cm9sbGVyLnByb3RvdHlwZS5zZXRDb2xvciA9IGZ1bmN0aW9uIChjb2xvcikge1xuICB0aGlzLmNvbG9yID0gY29sb3I7XG59O1xuXG5teU1vZHVsZS5jb250cm9sbGVyKCdOZ2VvQ29sb3JwaWNrZXJDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBvbE1hcCBmcm9tICdvbC9NYXAuanMnO1xuaW1wb3J0IG9sQ29udHJvbENvbnRyb2wgZnJvbSAnb2wvY29udHJvbC9Db250cm9sLmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQ29udHJvbCcsIFtdKTtcblxuZnVuY3Rpb24gY29udHJvbENvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICB2YXIgY29udHJvbCA9IHNjb3BlLiRldmFsKGF0dHJzWyduZ2VvQ29udHJvbCddKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGNvbnRyb2wgaW5zdGFuY2VvZiBvbENvbnRyb2xDb250cm9sKTtcbiAgICAgIHZhciBtYXAgPSBzY29wZS4kZXZhbChhdHRyc1snbmdlb0NvbnRyb2xNYXAnXSk7XG4gICAgICBjb25zb2xlLmFzc2VydChtYXAgaW5zdGFuY2VvZiBvbE1hcCk7XG4gICAgICBjb250cm9sLnNldFRhcmdldChlbGVtZW50WzBdKTtcbiAgICAgIG1hcC5hZGRDb250cm9sKGNvbnRyb2wpO1xuICAgIH1cbiAgfTtcbn1cblxubXlNb2R1bGUuZGlyZWN0aXZlKCduZ2VvQ29udHJvbCcsIGNvbnRyb2xDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdiBjbGFzcz1cIm5nZW8tZGF0ZXBpY2tlclwiPlxcbiAgPGZvcm0gbmFtZT1cImRhdGVGb3JtXCIgY2xhc3M9XCJuZ2VvLWRhdGVwaWNrZXItZm9ybVwiIG5vdmFsaWRhdGU+XFxuICAgIDxkaXYgbmctaWY9XCI6OmRhdGVwaWNrZXJDdHJsLnRpbWUud2lkZ2V0ID09PSBcXCdkYXRlcGlja2VyXFwnXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cIm5nZW8tZGF0ZXBpY2tlci1zdGFydC1kYXRlXCI+XFxuICAgICAgICA8c3BhbiBuZy1pZj1cIjo6ZGF0ZXBpY2tlckN0cmwudGltZS5tb2RlID09PSBcXCdyYW5nZVxcJ1wiIHRyYW5zbGF0ZT5Gcm9tOjwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIG5nLWlmPVwiOjpkYXRlcGlja2VyQ3RybC50aW1lLm1vZGUgIT09IFxcJ3JhbmdlXFwnXCIgdHJhbnNsYXRlPkRhdGU6PC9zcGFuPlxcbiAgICAgICAgPGlucHV0IG5hbWU9XCJzZGF0ZVwiIHVpLWRhdGU9XCJkYXRlcGlja2VyQ3RybC5zZGF0ZU9wdGlvbnNcIiBuZy1tb2RlbD1cImRhdGVwaWNrZXJDdHJsLnNkYXRlXCIgcmVxdWlyZWQ9XCJcIi8+XFxuICAgICAgPC9kaXY+XFxuICAgICAgPGRpdlxcbiAgICAgICAgY2xhc3M9XCJuZ2VvLWRhdGVwaWNrZXItZW5kLWRhdGVcIlxcbiAgICAgICAgbmctaWY9XCI6OmRhdGVwaWNrZXJDdHJsLnRpbWUubW9kZSA9PT0gXFwncmFuZ2VcXCdcIj5cXG4gICAgICAgIDxzcGFuIHRyYW5zbGF0ZT5Ubzo8L3NwYW4+XFxuICAgICAgICA8aW5wdXQgbmFtZT1cImVkYXRlXCIgdWktZGF0ZT1cImRhdGVwaWNrZXJDdHJsLmVkYXRlT3B0aW9uc1wiIG5nLW1vZGVsPVwiZGF0ZXBpY2tlckN0cmwuZWRhdGVcIiByZXF1aXJlZD1cIlwiLz5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICA8L2Zvcm0+XFxuPC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsIkNvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIm5nZW9UaW1lXCIsIFwiZ2V0dGV4dENhdGFsb2dcIl07XG5kYXRlUGlja2VyQ29tcG9uZW50LiRpbmplY3QgPSBbXCJuZ2VvRGF0ZVBpY2tlclRlbXBsYXRlVXJsXCIsIFwiJHRpbWVvdXRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWlzY1RpbWUgZnJvbSAnbmdlby9taXNjL1RpbWUuanMnO1xuaW1wb3J0ICdhbmd1bGFyLXVpLWRhdGUnO1xuaW1wb3J0ICduZ2VvL3Nhc3MvanF1ZXJ5LXVpLnNjc3MnO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvaTE4bi9kYXRlcGlja2VyLWZyLmpzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL2kxOG4vZGF0ZXBpY2tlci1lbi1HQi5qcyc7XG5pbXBvcnQgJ2pxdWVyeS11aS91aS9pMThuL2RhdGVwaWNrZXItZGUuanMnO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvaTE4bi9kYXRlcGlja2VyLWl0LmpzJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRGF0ZVBpY2tlcicsIFtuZ2VvTWlzY1RpbWUubmFtZSwgJ3VpLmRhdGUnXSk7XG5teU1vZHVsZS52YWx1ZSgnbmdlb0RhdGVQaWNrZXJUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSBhdHRycy5uZ2VvRGF0ZVBpY2tlclRlbXBsYXRlVXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ25nZW8vbWlzYy9kYXRlcGlja2VyQ29tcG9uZW50Jztcbn0pO1xubXlNb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vbWlzYy9kYXRlcGlja2VyQ29tcG9uZW50JywgcmVxdWlyZSgnLi9kYXRlcGlja2VyQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5cbmZ1bmN0aW9uIGRhdGVQaWNrZXJDb21wb25lbnQobmdlb0RhdGVQaWNrZXJUZW1wbGF0ZVVybCwgJHRpbWVvdXQpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge1xuICAgICAgb25EYXRlU2VsZWN0ZWQ6ICcmJyxcbiAgICAgIHRpbWU6ICc9J1xuICAgIH0sXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiAnbmdlb0RhdGVQaWNrZXJDb250cm9sbGVyIGFzIGRhdGVwaWNrZXJDdHJsJyxcbiAgICByZXN0cmljdDogJ0FFJyxcbiAgICB0ZW1wbGF0ZVVybDogbmdlb0RhdGVQaWNrZXJUZW1wbGF0ZVVybCxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIGN0cmwuaW5pdCgpO1xuICAgICAgdmFyIGxhbmcgPSBjdHJsLmdldHRleHRDYXRhbG9nXy5nZXRDdXJyZW50TGFuZ3VhZ2UoKTtcbiAgICAgICQuZGF0ZXBpY2tlci5zZXREZWZhdWx0cygkLmRhdGVwaWNrZXIucmVnaW9uYWxbbGFuZ10pO1xuICAgICAgY3RybC5zZGF0ZU9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgY3RybC5zZGF0ZU9wdGlvbnMsIHtcbiAgICAgICAgJ21pbkRhdGUnOiBjdHJsLmluaXRpYWxNaW5EYXRlLFxuICAgICAgICAnbWF4RGF0ZSc6IGN0cmwuaW5pdGlhbE1heERhdGUsXG4gICAgICAgICdvbkNsb3NlJzogZnVuY3Rpb24gb25DbG9zZShzZWxlY3RlZERhdGUpIHtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlKSB7XG4gICAgICAgICAgICAkKGVsZW1lbnRbMF0pLmZpbmQoJ2lucHV0W25hbWU9XCJlZGF0ZVwiXScpLmRhdGVwaWNrZXIoJ29wdGlvbicsICdtaW5EYXRlJywgc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY3RybC5lZGF0ZU9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgY3RybC5lZGF0ZU9wdGlvbnMsIHtcbiAgICAgICAgJ21pbkRhdGUnOiBjdHJsLmluaXRpYWxNaW5EYXRlLFxuICAgICAgICAnbWF4RGF0ZSc6IGN0cmwuaW5pdGlhbE1heERhdGUsXG4gICAgICAgICdvbkNsb3NlJzogZnVuY3Rpb24gb25DbG9zZShzZWxlY3RlZERhdGUpIHtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlKSB7XG4gICAgICAgICAgICAkKGVsZW1lbnRbMF0pLmZpbmQoJ2lucHV0W25hbWU9XCJzZGF0ZVwiXScpLmRhdGVwaWNrZXIoJ29wdGlvbicsICdtYXhEYXRlJywgc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5Jykub24oJ2hpZGRlbi5icy5wb3BvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZHAgPSBhbmd1bGFyLmVsZW1lbnQoJyN1aS1kYXRlcGlja2VyLWRpdicpO1xuXG4gICAgICAgIGlmIChkcCAmJiBkcC5jc3MoJ2Rpc3BsYXknKSA9PT0gJ2Jsb2NrJykge1xuICAgICAgICAgICQoZWxlbWVudFswXSkuZmluZCgnaW5wdXRbbmFtZSQ9XCJkYXRlXCJdJykuZGF0ZXBpY2tlcignaGlkZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjdWktZGF0ZXBpY2tlci1kaXYnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9EYXRlUGlja2VyJywgZGF0ZVBpY2tlckNvbXBvbmVudCk7XG5leHBvcnQgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsIG5nZW9UaW1lLCBnZXR0ZXh0Q2F0YWxvZykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMubmdlb1RpbWVfID0gbmdlb1RpbWU7XG4gIHRoaXMudGltZSA9IG51bGw7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMuaXNNb2RlUmFuZ2UgPSBmYWxzZTtcbiAgdGhpcy5vbkRhdGVTZWxlY3RlZCA9IG51bGw7XG4gIHRoaXMuaW5pdGlhbE1pbkRhdGUgPSBudWxsO1xuICB0aGlzLmluaXRpYWxNYXhEYXRlID0gbnVsbDtcbiAgdGhpcy5lZGF0ZU9wdGlvbnMgPSB7XG4gICAgJ2NoYW5nZU1vbnRoJzogdHJ1ZSxcbiAgICAnY2hhbmdlWWVhcic6IHRydWVcbiAgfTtcbiAgdGhpcy5zZGF0ZU9wdGlvbnMgPSB7XG4gICAgJ2NoYW5nZU1vbnRoJzogdHJ1ZSxcbiAgICAnY2hhbmdlWWVhcic6IHRydWVcbiAgfTtcbiAgdGhpcy5zZGF0ZSA9IG51bGw7XG4gIHRoaXMuZWRhdGUgPSBudWxsO1xuICAkc2NvcGUuJHdhdGNoR3JvdXAoWydkYXRlcGlja2VyQ3RybC5zZGF0ZScsICdkYXRlcGlja2VyQ3RybC5lZGF0ZSddLCBmdW5jdGlvbiAobmV3RGF0ZXMsIG9sZERhdGVzKSB7XG4gICAgaWYgKCFfdGhpcy5vbkRhdGVTZWxlY3RlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9uRGF0ZVNlbGVjdGVkJyk7XG4gICAgfVxuXG4gICAgdmFyIHNEYXRlID0gbmV3RGF0ZXNbMF07XG4gICAgdmFyIGVEYXRlID0gbmV3RGF0ZXNbMV07XG5cbiAgICBpZiAoYW5ndWxhci5pc0RhdGUoc0RhdGUpICYmICghX3RoaXMuaXNNb2RlUmFuZ2UgfHwgYW5ndWxhci5pc0RhdGUoZURhdGUpKSkge1xuICAgICAgdmFyIHN0YXJ0ID0gX3RoaXMubmdlb1RpbWVfLmdldFRpbWUoc0RhdGUpO1xuXG4gICAgICB2YXIgZW5kID0gX3RoaXMubmdlb1RpbWVfLmdldFRpbWUoZURhdGUpO1xuXG4gICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzdGFydCcpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5vbkRhdGVTZWxlY3RlZCh7XG4gICAgICAgIHRpbWU6IHtcbiAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgZW5kOiBlbmRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuQ29udHJvbGxlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLnRpbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdGltZScpO1xuICB9XG5cbiAgdmFyIGluaXRpYWxPcHRpb25zXyA9IHRoaXMubmdlb1RpbWVfLmdldE9wdGlvbnModGhpcy50aW1lKTtcbiAgdGhpcy5pbml0aWFsTWluRGF0ZSA9IHRoaXMubmdlb1RpbWVfLmNyZWF0ZURhdGUoaW5pdGlhbE9wdGlvbnNfLm1pbkRhdGUpO1xuICB0aGlzLmluaXRpYWxNYXhEYXRlID0gdGhpcy5uZ2VvVGltZV8uY3JlYXRlRGF0ZShpbml0aWFsT3B0aW9uc18ubWF4RGF0ZSk7XG4gIHRoaXMuaXNNb2RlUmFuZ2UgPSB0aGlzLnRpbWUubW9kZSA9PT0gJ3JhbmdlJztcblxuICBpZiAodGhpcy5pc01vZGVSYW5nZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShpbml0aWFsT3B0aW9uc18udmFsdWVzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBzaG91bGQgYmUgYW4gYXJyYXknKTtcbiAgICB9XG5cbiAgICB0aGlzLnNkYXRlID0gdGhpcy5uZ2VvVGltZV8uY3JlYXRlRGF0ZShpbml0aWFsT3B0aW9uc18udmFsdWVzWzBdKTtcbiAgICB0aGlzLmVkYXRlID0gdGhpcy5uZ2VvVGltZV8uY3JlYXRlRGF0ZShpbml0aWFsT3B0aW9uc18udmFsdWVzWzFdKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGluaXRpYWxPcHRpb25zXy52YWx1ZXMgIT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zZGF0ZSA9IHRoaXMubmdlb1RpbWVfLmNyZWF0ZURhdGUoaW5pdGlhbE9wdGlvbnNfLnZhbHVlcyk7XG4gIH1cbn07XG5cbm15TW9kdWxlLmNvbnRyb2xsZXIoJ25nZW9EYXRlUGlja2VyQ29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZmFjdG9yeS4kaW5qZWN0ID0gW1wiJHRpbWVvdXRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRGVib3VuY2UnLCBbXSk7XG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW52b2tlQXBwbHksICR0aW1lb3V0KSB7XG4gIHZhciB0aW1lb3V0ID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBmdW5jLmFwcGx5KF90aGlzLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgaWYgKHRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lb3V0KTtcbiAgICB9XG5cbiAgICB0aW1lb3V0ID0gJHRpbWVvdXQobGF0ZXIsIHdhaXQsIGludm9rZUFwcGx5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmFjdG9yeSgkdGltZW91dCkge1xuICB2YXIgZGViID0gZGVib3VuY2U7XG4gIHJldHVybiBmdW5jdGlvbiAoZnVuYywgd2FpdCwgaW52b2tlQXBwbHkpIHtcbiAgICByZXR1cm4gZGViKGZ1bmMsIHdhaXQsIGludm9rZUFwcGx5LCAkdGltZW91dCk7XG4gIH07XG59XG5cbm15TW9kdWxlLmZhY3RvcnkoJ25nZW9EZWJvdW5jZScsIGZhY3RvcnkpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbiBmcm9tICdvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgb2xMYXllckJhc2UgZnJvbSAnb2wvbGF5ZXIvQmFzZS5qcyc7XG5pbXBvcnQgb2xMYXllckdyb3VwIGZyb20gJ29sL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCBvbExheWVyTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2UgZnJvbSAnb2wvc291cmNlL0ltYWdlLmpzJztcbmltcG9ydCBvbFNvdXJjZVRpbGUgZnJvbSAnb2wvc291cmNlL1RpbGUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyYWN0aW9uRGVjb3JhdGlvbihpbnRlcmFjdGlvbikge1xuICBjb25zb2xlLmFzc2VydChpbnRlcmFjdGlvbiBpbnN0YW5jZW9mIG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbik7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnRlcmFjdGlvbiwgJ2FjdGl2ZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBpbnRlcmFjdGlvbi5nZXRBY3RpdmUoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgaW50ZXJhY3Rpb24uc2V0QWN0aXZlKHZhbCk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsYXllckRlY29yYXRpb24obGF5ZXIpIHtcbiAgY29uc29sZS5hc3NlcnQobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyQmFzZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgJ3Zpc2libGUnLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGxheWVyLmdldFZpc2libGUoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgbGF5ZXIuc2V0VmlzaWJsZSh2YWwpO1xuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgJ29wYWNpdHknLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGxheWVyLmdldE9wYWNpdHkoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgbGF5ZXIuc2V0T3BhY2l0eSh2YWwpO1xuICAgIH1cbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbGF5ZXJMb2FkaW5nKGxheWVyLCAkc2NvcGUpIHtcbiAgdmFyIHNvdXJjZTtcbiAgdmFyIGluY3JlbWVudEV2ZW50cyA9IFtdO1xuICB2YXIgZGVjcmVtZW50RXZlbnRzID0gW107XG4gIHZhciBpbmNyZW1lbnRMb2FkQ291bnRfID0gaW5jcmVtZW50XztcbiAgdmFyIGRlY3JlbWVudExvYWRDb3VudF8gPSBkZWNyZW1lbnRfO1xuICBsYXllci5zZXQoJ2xvYWRfY291bnQnLCAwLCB0cnVlKTtcblxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICBsYXllci5nZXRMYXllcnMoKS5vbignYWRkJywgZnVuY3Rpb24gKG9sRXZlbnQpIHtcbiAgICAgIHZhciBuZXdMYXllciA9IG9sRXZlbnQuZWxlbWVudDtcbiAgICAgIG5ld0xheWVyLnNldCgncGFyZW50X2dyb3VwJywgbGF5ZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckxheWVyKSB7XG4gICAgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgICBpZiAoc291cmNlID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVRpbGUpIHtcbiAgICAgIGluY3JlbWVudEV2ZW50cyA9IFsndGlsZWxvYWRzdGFydCddO1xuICAgICAgZGVjcmVtZW50RXZlbnRzID0gWyd0aWxlbG9hZGVuZCcsICd0aWxlbG9hZGVycm9yJ107XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZUltYWdlKSB7XG4gICAgICBpbmNyZW1lbnRFdmVudHMgPSBbJ2ltYWdlbG9hZHN0YXJ0J107XG4gICAgICBkZWNyZW1lbnRFdmVudHMgPSBbJ2ltYWdlbG9hZGVuZCcsICdpbWFnZWxvYWRlcnJvciddO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgJ3Vuc3VwcG9ydGVkIHNvdXJjZSB0eXBlJyk7XG4gICAgfVxuXG4gICAgc291cmNlLm9uKGluY3JlbWVudEV2ZW50cywgZnVuY3Rpb24gKCkge1xuICAgICAgaW5jcmVtZW50TG9hZENvdW50XyhsYXllcik7XG4gICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoKTtcbiAgICB9KTtcbiAgICBzb3VyY2Uub24oZGVjcmVtZW50RXZlbnRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICBkZWNyZW1lbnRMb2FkQ291bnRfKGxheWVyKTtcbiAgICAgICRzY29wZS4kYXBwbHlBc3luYygpO1xuICAgIH0pO1xuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGxheWVyLCAnbG9hZGluZycsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbGF5ZXIuZ2V0KCdsb2FkX2NvdW50JykgPiAwO1xuICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gaW5jcmVtZW50XyhsYXllcikge1xuICAgIHZhciBsb2FkX2NvdW50ID0gbGF5ZXIuZ2V0KCdsb2FkX2NvdW50Jyk7XG4gICAgdmFyIHBhcmVudCA9IGxheWVyLmdldCgncGFyZW50X2dyb3VwJyk7XG4gICAgbGF5ZXIuc2V0KCdsb2FkX2NvdW50JywgKytsb2FkX2NvdW50LCB0cnVlKTtcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIGluY3JlbWVudF8ocGFyZW50KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZWNyZW1lbnRfKGxheWVyKSB7XG4gICAgdmFyIGxvYWRfY291bnQgPSBsYXllci5nZXQoJ2xvYWRfY291bnQnKTtcbiAgICB2YXIgcGFyZW50ID0gbGF5ZXIuZ2V0KCdwYXJlbnRfZ3JvdXAnKTtcbiAgICBsYXllci5zZXQoJ2xvYWRfY291bnQnLCAtLWxvYWRfY291bnQsIHRydWUpO1xuXG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgZGVjcmVtZW50XyhwYXJlbnQpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9NaXNjQXV0b1Byb2plY3Rpb24gZnJvbSAnbmdlby9taXNjL0F1dG9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBuZ2VvTWlzY0J0bkNvbXBvbmVudCBmcm9tICduZ2VvL21pc2MvYnRuQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY0NvbnRyb2xDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL2NvbnRyb2xDb21wb25lbnQuanMnO1xuaW1wb3J0IG5nZW9NaXNjRGF0ZXBpY2tlckNvbXBvbmVudCBmcm9tICduZ2VvL21pc2MvZGF0ZXBpY2tlckNvbXBvbmVudC5qcyc7XG5pbXBvcnQgbmdlb01pc2NEZWJvdW5jZSBmcm9tICduZ2VvL21pc2MvZGVib3VuY2UuanMnO1xuaW1wb3J0IG5nZW9NaXNjRXZlbnRIZWxwZXIgZnJvbSAnbmdlby9taXNjL0V2ZW50SGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZlYXR1cmVIZWxwZXIgZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjRmlsZSBmcm9tICduZ2VvL21pc2MvRmlsZS5qcyc7XG5pbXBvcnQgbmdlb01pc2NGaWxlcmVhZGVyQ29tcG9uZW50IGZyb20gJ25nZW8vbWlzYy9maWxlcmVhZGVyQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZpbHRlcnMgZnJvbSAnbmdlby9taXNjL2ZpbHRlcnMuanMnO1xuaW1wb3J0IG5nZW9NaXNjU29ydGFibGVDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL3NvcnRhYmxlQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY1RpbWUgZnJvbSAnbmdlby9taXNjL1RpbWUuanMnO1xuaW1wb3J0IG5nZW9NaXNjVG9vbEFjdGl2YXRlTWdyIGZyb20gJ25nZW8vbWlzYy9Ub29sQWN0aXZhdGVNZ3IuanMnO1xuaW1wb3J0IG5nZW9NaXNjV01TVGltZSBmcm9tICduZ2VvL21pc2MvV01TVGltZS5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb01pc2NFeHRyYU1vZHVsZScsIFtuZ2VvTWlzY0F1dG9Qcm9qZWN0aW9uLm5hbWUsIG5nZW9NaXNjQnRuQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjQ29udHJvbENvbXBvbmVudC5uYW1lLCBuZ2VvTWlzY0RhdGVwaWNrZXJDb21wb25lbnQubmFtZSwgbmdlb01pc2NEZWJvdW5jZS5uYW1lLCBuZ2VvTWlzY0V2ZW50SGVscGVyLm5hbWUsIG5nZW9NaXNjRmVhdHVyZUhlbHBlci5uYW1lLCBuZ2VvTWlzY0ZpbGUubmFtZSwgbmdlb01pc2NGaWxlcmVhZGVyQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjRmlsdGVycy5uYW1lLCBuZ2VvTWlzY1NvcnRhYmxlQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjVGltZS5uYW1lLCBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZU1nci5uYW1lLCBuZ2VvTWlzY1dNU1RpbWUubmFtZV0pOyIsImZpbGVyZWFkZXJDb21wb25lbnQuJGluamVjdCA9IFtcIiR3aW5kb3dcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRmlsZXJlYWRlcicsIFtdKTtcblxuZnVuY3Rpb24gZmlsZXJlYWRlckNvbXBvbmVudCgkd2luZG93KSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZToge1xuICAgICAgJ2ZpbGVDb250ZW50JzogJz1uZ2VvRmlsZXJlYWRlcicsXG4gICAgICAnc3VwcG9ydGVkJzogJz0/bmdlb0ZpbGVyZWFkZXJTdXBwb3J0ZWQnXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICB2YXIgc3VwcG9ydGVkID0gKCdGaWxlUmVhZGVyJyBpbiAkd2luZG93KTtcbiAgICAgIHNjb3BlLnN1cHBvcnRlZCA9IHN1cHBvcnRlZDtcblxuICAgICAgaWYgKCFzdXBwb3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2UgPSBmdW5jdGlvbiBjZShjaGFuZ2VFdmVudCkge1xuICAgICAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyAkd2luZG93LkZpbGVSZWFkZXIoKTtcblxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2NvcGUuZmlsZUNvbnRlbnQgPSB0YXJnZXQucmVzdWx0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBmaWxlcyA9IGNoYW5nZUV2ZW50LnRhcmdldC5maWxlcztcblxuICAgICAgICBpZiAoIWZpbGVzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZpbGVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc1RleHQoZmlsZXNbMF0pO1xuICAgICAgfTtcblxuICAgICAgZWxlbWVudC5vbih7XG4gICAgICAgIGNoYW5nZTogY2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubXlNb2R1bGUuZGlyZWN0aXZlKCduZ2VvRmlsZXJlYWRlcicsIGZpbGVyZWFkZXJDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiRHVyYXRpb25GaWx0ZXIuJGluamVjdCA9IFtcImdldHRleHRDYXRhbG9nXCJdO1xudHJ1c3RIdG1sQXV0b0ZpbHRlci4kaW5qZWN0ID0gW1wiJHNjZVwiLCBcIm5nZW9TdHJpbmdUb0h0bWxSZXBsYWNlbWVudHNcIl07XG50cnVzdEh0bWxGaWx0ZXIuJGluamVjdCA9IFtcIiRzY2VcIl07XG5OdW1iZXJDb29yZGluYXRlc0ZpbHRlci4kaW5qZWN0ID0gW1wiJGZpbHRlclwiXTtcblVuaXRQcmVmaXhGaWx0ZXIuJGluamVjdCA9IFtcIiRmaWx0ZXJcIl07XG5OdW1iZXJGaWx0ZXIuJGluamVjdCA9IFtcIiRsb2NhbGVcIl07XG5TY2FsaWZ5RmlsdGVyLiRpbmplY3QgPSBbXCIkZmlsdGVyXCJdO1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnb2wvbWF0aC5qcyc7XG5pbXBvcnQgeyBwYWROdW1iZXIgfSBmcm9tICdvbC9zdHJpbmcuanMnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Bbmd1bGFyRmlsdGVycycsIFtdKTtcbmV4cG9ydCBmdW5jdGlvbiBTY2FsaWZ5RmlsdGVyKCRmaWx0ZXIpIHtcbiAgdmFyIG51bWJlckZpbHRlciA9ICRmaWx0ZXIoJ25nZW9OdW1iZXInKTtcblxuICB2YXIgZmlsdGVyRm4gPSBmdW5jdGlvbiBmaWx0ZXJGbihzY2FsZSwgb3B0X3ByZWNpc2lvbikge1xuICAgIGlmIChvcHRfcHJlY2lzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9wcmVjaXNpb24gPSAyO1xuICAgIH1cblxuICAgIHZhciB0ZXh0ID0gbnVtYmVyRmlsdGVyKHNjYWxlLCBvcHRfcHJlY2lzaW9uKTtcbiAgICByZXR1cm4gdGV4dCA/IFwiMVxceEEwOlxceEEwXCIgKyB0ZXh0IDogJyc7XG4gIH07XG5cbiAgZmlsdGVyRm4uJHN0YXRlZnVsID0gdHJ1ZTtcbiAgcmV0dXJuIGZpbHRlckZuO1xufVxubXlNb2R1bGUuZmlsdGVyKCduZ2VvU2NhbGlmeScsIFNjYWxpZnlGaWx0ZXIpO1xuZXhwb3J0IGZ1bmN0aW9uIE51bWJlckZpbHRlcigkbG9jYWxlKSB7XG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcblxuICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24gcmVzdWx0KG51bWJlciwgb3B0X3ByZWNpc2lvbikge1xuICAgIHZhciBncm91cFNlcCA9IGZvcm1hdHMuR1JPVVBfU0VQO1xuICAgIHZhciBkZWNpbWFsU2VwID0gZm9ybWF0cy5ERUNJTUFMX1NFUDtcblxuICAgIGlmIChvcHRfcHJlY2lzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9wcmVjaXNpb24gPSAzO1xuICAgIH1cblxuICAgIGlmIChudW1iZXIgPT09IEluZmluaXR5KSB7XG4gICAgICByZXR1cm4gXCJcXHUyMjFFXCI7XG4gICAgfSBlbHNlIGlmIChudW1iZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgcmV0dXJuIFwiLVxcdTIyMUVcIjtcbiAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgcmV0dXJuICcwJztcbiAgICB9XG5cbiAgICB2YXIgc2lnbiA9IG51bWJlciA8IDA7XG4gICAgbnVtYmVyID0gTWF0aC5hYnMobnVtYmVyKTtcbiAgICB2YXIgbmJfZGVjaW1hbCA9IG9wdF9wcmVjaXNpb24gLSBNYXRoLmZsb29yKE1hdGgubG9nKG51bWJlcikgLyBNYXRoLmxvZygxMCkpIC0gMTtcbiAgICB2YXIgZmFjdG9yID0gTWF0aC5wb3coMTAsIG5iX2RlY2ltYWwpO1xuICAgIG51bWJlciA9IE1hdGgucm91bmQobnVtYmVyICogZmFjdG9yKTtcbiAgICB2YXIgZGVjaW1hbCA9ICcnO1xuICAgIHZhciB1bml0ID0gTWF0aC5mbG9vcihudW1iZXIgLyBmYWN0b3IpO1xuXG4gICAgaWYgKG5iX2RlY2ltYWwgPiAwKSB7XG4gICAgICB2YXIgc3RyX251bWJlciA9IFwiXCIgKyBudW1iZXI7XG5cbiAgICAgIHdoaWxlIChzdHJfbnVtYmVyLmxlbmd0aCA8IG5iX2RlY2ltYWwpIHtcbiAgICAgICAgc3RyX251bWJlciA9IFwiMFwiICsgc3RyX251bWJlcjtcbiAgICAgIH1cblxuICAgICAgZGVjaW1hbCA9IHN0cl9udW1iZXIuc3Vic3RyaW5nKHN0cl9udW1iZXIubGVuZ3RoIC0gbmJfZGVjaW1hbCk7XG5cbiAgICAgIHdoaWxlIChkZWNpbWFsLmVuZHNXaXRoKCcwJykpIHtcbiAgICAgICAgZGVjaW1hbCA9IGRlY2ltYWwuc3Vic3RyaW5nKDAsIGRlY2ltYWwubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwcyA9IFtdO1xuICAgIHZhciBzdHJfdW5pdCA9IFwiXCIgKyB1bml0O1xuXG4gICAgd2hpbGUgKHN0cl91bml0Lmxlbmd0aCA+IDMpIHtcbiAgICAgIHZhciBpbmRleCA9IHN0cl91bml0Lmxlbmd0aCAtIDM7XG4gICAgICBncm91cHMudW5zaGlmdChzdHJfdW5pdC5zdWJzdHJpbmcoaW5kZXgpKTtcbiAgICAgIHN0cl91bml0ID0gc3RyX3VuaXQuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICB9XG5cbiAgICBncm91cHMudW5zaGlmdChzdHJfdW5pdCk7XG4gICAgcmV0dXJuIChzaWduID8gJy0nIDogJycpICsgZ3JvdXBzLmpvaW4oZ3JvdXBTZXApICsgKGRlY2ltYWwubGVuZ3RoID09PSAwID8gJycgOiBkZWNpbWFsU2VwICsgZGVjaW1hbCk7XG4gIH07XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbm15TW9kdWxlLmZpbHRlcignbmdlb051bWJlcicsIE51bWJlckZpbHRlcik7XG5leHBvcnQgZnVuY3Rpb24gVW5pdFByZWZpeEZpbHRlcigkZmlsdGVyKSB7XG4gIHZhciBudW1iZXJGaWx0ZXIgPSAkZmlsdGVyKCduZ2VvTnVtYmVyJyk7XG4gIHZhciBzdGFuZGFyZFByZWZpeCA9IFsnJywgJ2snLCAnTScsICdHJywgJ1QnLCAnUCddO1xuICB2YXIgYmluYXJ5UHJlZml4ID0gWycnLCAnS2knLCAnTWknLCAnR2knLCAnVGknLCAnUGknXTtcblxuICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24gcmVzdWx0KG51bWJlciwgb3B0X3VuaXQsIG9wdF90eXBlLCBvcHRfcHJlY2lzaW9uKSB7XG4gICAgaWYgKG9wdF91bml0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF91bml0ID0gJyc7XG4gICAgfVxuXG4gICAgdmFyIGNvbXBhcmF0b3JGYWN0b3IgPSAxIC0gTWF0aC5wb3coMC4xLCBvcHRfcHJlY2lzaW9uIHx8IDMpICogMC41O1xuICAgIHZhciBkaXZpc29yID0gMTAwMDtcbiAgICB2YXIgcHJlZml4ID0gc3RhbmRhcmRQcmVmaXg7XG5cbiAgICBpZiAob3B0X3R5cGUgPT09ICdzcXVhcmUnKSB7XG4gICAgICBkaXZpc29yID0gMTAwMDAwMDtcbiAgICB9IGVsc2UgaWYgKG9wdF90eXBlID09PSAnYmluYXJ5Jykge1xuICAgICAgZGl2aXNvciA9IDEwMjQ7XG4gICAgICBwcmVmaXggPSBiaW5hcnlQcmVmaXg7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgaW5kZXhfbWF4ID0gcHJlZml4Lmxlbmd0aCAtIDE7XG5cbiAgICB3aGlsZSAobnVtYmVyID49IGRpdmlzb3IgKiBjb21wYXJhdG9yRmFjdG9yICYmIGluZGV4IDwgaW5kZXhfbWF4KSB7XG4gICAgICBudW1iZXIgPSBudW1iZXIgLyBkaXZpc29yO1xuICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICB2YXIgcG9zdGZpeCA9IHByZWZpeFtpbmRleF0gKyBvcHRfdW5pdDtcbiAgICB2YXIgc3BhY2UgPSBwb3N0Zml4Lmxlbmd0aCA9PSAwID8gJycgOiBcIlxceEEwXCI7XG4gICAgcmV0dXJuIG51bWJlckZpbHRlcihudW1iZXIsIG9wdF9wcmVjaXNpb24pICsgc3BhY2UgKyBwb3N0Zml4O1xuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5teU1vZHVsZS5maWx0ZXIoJ25nZW9Vbml0UHJlZml4JywgVW5pdFByZWZpeEZpbHRlcik7XG5leHBvcnQgZnVuY3Rpb24gTnVtYmVyQ29vcmRpbmF0ZXNGaWx0ZXIoJGZpbHRlcikge1xuICB2YXIgZmlsdGVyRm4gPSBmdW5jdGlvbiBmaWx0ZXJGbihjb29yZGluYXRlcywgb3B0X2ZyYWN0aW9uRGlnaXRzLCBvcHRfdGVtcGxhdGUpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBvcHRfdGVtcGxhdGUgPyBvcHRfdGVtcGxhdGUgOiAne3h9IHt5fSc7XG4gICAgdmFyIHggPSBjb29yZGluYXRlc1swXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVzWzFdO1xuICAgIHZhciBmcmFjdGlvbkRpZ2l0cyA9IHBhcnNlSW50KG9wdF9mcmFjdGlvbkRpZ2l0cywgMTApIHwgMDtcbiAgICB2YXIgeF9zdHIgPSAkZmlsdGVyKCdudW1iZXInKSh4LCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgdmFyIHlfc3RyID0gJGZpbHRlcignbnVtYmVyJykoeSwgZnJhY3Rpb25EaWdpdHMpO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKCd7eH0nLCB4X3N0cikucmVwbGFjZSgne3l9JywgeV9zdHIpO1xuICB9O1xuXG4gIHJldHVybiBmaWx0ZXJGbjtcbn1cbm15TW9kdWxlLmZpbHRlcignbmdlb051bWJlckNvb3JkaW5hdGVzJywgTnVtYmVyQ29vcmRpbmF0ZXNGaWx0ZXIpO1xuZXhwb3J0IGZ1bmN0aW9uIERNU0Nvb3JkaW5hdGVzRmlsdGVyKCkge1xuICB2YXIgZGVncmVlc1RvU3RyaW5nSERNUyA9IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoZGVncmVlcywgaGVtaXNwaGVyZXMsIGZyYWN0aW9uRGlnaXRzKSB7XG4gICAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gICAgdmFyIGRtcyA9IE1hdGguYWJzKDM2MDAgKiBub3JtYWxpemVkRGVncmVlcyk7XG4gICAgdmFyIGQgPSBNYXRoLmZsb29yKGRtcyAvIDM2MDApO1xuICAgIHZhciBtID0gTWF0aC5mbG9vcihkbXMgLyA2MCAlIDYwKTtcbiAgICB2YXIgcyA9IGRtcyAlIDYwO1xuICAgIHJldHVybiBkICsgXCJcXHhCMCBcIiArIHBhZE51bWJlcihtLCAyKSArIFwiXFx1MjAzMiBcIiArIHBhZE51bWJlcihzLCAyLCBmcmFjdGlvbkRpZ2l0cykgKyBcIlxcdTIwMzMgXCIgKyBoZW1pc3BoZXJlcy5jaGFyQXQobm9ybWFsaXplZERlZ3JlZXMgPCAwID8gMSA6IDApO1xuICB9O1xuXG4gIHZhciBmaWx0ZXJGbiA9IGZ1bmN0aW9uIGZpbHRlckZuKGNvb3JkaW5hdGVzLCBvcHRfZnJhY3Rpb25EaWdpdHMsIG9wdF90ZW1wbGF0ZSkge1xuICAgIHZhciBmcmFjdGlvbkRpZ2l0cyA9IHBhcnNlSW50KG9wdF9mcmFjdGlvbkRpZ2l0cywgMTApIHwgMDtcbiAgICB2YXIgdGVtcGxhdGUgPSBvcHRfdGVtcGxhdGUgPyBvcHRfdGVtcGxhdGUgOiAne3h9IHt5fSc7XG4gICAgdmFyIHhkbXMgPSBkZWdyZWVzVG9TdHJpbmdIRE1TKGNvb3JkaW5hdGVzWzBdLCAnRVcnLCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgdmFyIHlkbXMgPSBkZWdyZWVzVG9TdHJpbmdIRE1TKGNvb3JkaW5hdGVzWzFdLCAnTlMnLCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoJ3t4fScsIHhkbXMpLnJlcGxhY2UoJ3t5fScsIHlkbXMpO1xuICB9O1xuXG4gIHJldHVybiBmaWx0ZXJGbjtcbn1cbm15TW9kdWxlLmZpbHRlcignbmdlb0RNU0Nvb3JkaW5hdGVzJywgRE1TQ29vcmRpbmF0ZXNGaWx0ZXIpO1xuZXhwb3J0IGZ1bmN0aW9uIHRydXN0SHRtbEZpbHRlcigkc2NlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgIT09IHVuZGVmaW5lZCAmJiBpbnB1dCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoXCJcIiArIGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoJyZuYnNwOycpO1xuICAgIH1cbiAgfTtcbn1cbm15TW9kdWxlLmZpbHRlcignbmdlb1RydXN0SHRtbCcsIHRydXN0SHRtbEZpbHRlcik7XG5leHBvcnQgZnVuY3Rpb24gdHJ1c3RIdG1sQXV0b0ZpbHRlcigkc2NlLCBuZ2VvU3RyaW5nVG9IdG1sUmVwbGFjZW1lbnRzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgIT09IHVuZGVmaW5lZCAmJiBpbnB1dCAhPT0gbnVsbCkge1xuICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShuZ2VvU3RyaW5nVG9IdG1sUmVwbGFjZW1lbnRzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgcmVwbGFjZW1lbnQgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgIGlmIChyZXBsYWNlbWVudC5jb21waWxlZF9leHByZXNzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlcGxhY2VtZW50LmNvbXBpbGVkX2V4cHJlc3Npb24gPSBuZXcgUmVnRXhwKHJlcGxhY2VtZW50LmV4cHJlc3Npb24sIHJlcGxhY2VtZW50LmZsYWdzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaW5wdXQubWF0Y2gocmVwbGFjZW1lbnQuY29tcGlsZWRfZXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIGlucHV0ID0gcmVwbGFjZW1lbnQudGVtcGxhdGUucmVwbGFjZSgvXFwkMS9nLCBpbnB1dCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbChcIlwiICsgaW5wdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoXCJcIiArIGlucHV0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoJyZuYnNwOycpO1xuICAgIH1cbiAgfTtcbn1cbm15TW9kdWxlLmZpbHRlcignbmdlb1RydXN0SHRtbEF1dG8nLCB0cnVzdEh0bWxBdXRvRmlsdGVyKTtcbmV4cG9ydCBmdW5jdGlvbiBEdXJhdGlvbkZpbHRlcihnZXR0ZXh0Q2F0YWxvZykge1xuICB2YXIgVGltZVVuaXRzID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgU0VDT05EUzogU3ltYm9sKCdzZWNvbmRzJyksXG4gICAgTUlOVVRFUzogU3ltYm9sKCdtaW51dGVzJyksXG4gICAgSE9VUlM6IFN5bWJvbCgnaG91cnMnKSxcbiAgICBEQVlTOiBTeW1ib2woJ2RheXMnKVxuICB9KTtcblxuICB2YXIgcGx1cmFsaXplID0gZnVuY3Rpb24gcGx1cmFsaXplKGFtb3VudCwgdW5pdCkge1xuICAgIHZhciBmb3JtYXR0ZWRVbml0ID0gJyc7XG5cbiAgICBzd2l0Y2ggKHVuaXQpIHtcbiAgICAgIGNhc2UgVGltZVVuaXRzLlNFQ09ORFM6XG4gICAgICAgIGZvcm1hdHRlZFVuaXQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRQbHVyYWwoYW1vdW50LCAnc2Vjb25kJywgJ3NlY29uZHMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVGltZVVuaXRzLk1JTlVURVM6XG4gICAgICAgIGZvcm1hdHRlZFVuaXQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRQbHVyYWwoYW1vdW50LCAnbWludXRlJywgJ21pbnV0ZXMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVGltZVVuaXRzLkhPVVJTOlxuICAgICAgICBmb3JtYXR0ZWRVbml0ID0gZ2V0dGV4dENhdGFsb2cuZ2V0UGx1cmFsKGFtb3VudCwgJ2hvdXInLCAnaG91cnMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVGltZVVuaXRzLkRBWVM6XG4gICAgICAgIGZvcm1hdHRlZFVuaXQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRQbHVyYWwoYW1vdW50LCAnZGF5JywgJ2RheXMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBhbW91bnQgKyBcIiBcIiArIGZvcm1hdHRlZFVuaXQ7XG4gIH07XG5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uIHJlc3VsdChkdXJhdGlvbikge1xuICAgIGR1cmF0aW9uID0gTWF0aC5yb3VuZChkdXJhdGlvbik7XG4gICAgdmFyIG91dHB1dDtcblxuICAgIGlmIChkdXJhdGlvbiA8IDYwKSB7XG4gICAgICByZXR1cm4gcGx1cmFsaXplKGR1cmF0aW9uLCBUaW1lVW5pdHMuU0VDT05EUyk7XG4gICAgfVxuXG4gICAgdmFyIHJlbWFpbmRlciA9IGR1cmF0aW9uICUgNjA7XG4gICAgZHVyYXRpb24gPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gNjApO1xuXG4gICAgaWYgKGR1cmF0aW9uIDwgNjApIHtcbiAgICAgIG91dHB1dCA9IHBsdXJhbGl6ZShkdXJhdGlvbiwgVGltZVVuaXRzLk1JTlVURVMpO1xuXG4gICAgICBpZiAocmVtYWluZGVyID4gMCkge1xuICAgICAgICBvdXRwdXQgKz0gXCIgXCIgKyBwbHVyYWxpemUocmVtYWluZGVyLCBUaW1lVW5pdHMuU0VDT05EUyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgcmVtYWluZGVyID0gZHVyYXRpb24gJSA2MDtcbiAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyA2MCk7XG5cbiAgICBpZiAoZHVyYXRpb24gPCAyNCkge1xuICAgICAgb3V0cHV0ID0gcGx1cmFsaXplKGR1cmF0aW9uLCBUaW1lVW5pdHMuSE9VUlMpO1xuXG4gICAgICBpZiAocmVtYWluZGVyID4gMCkge1xuICAgICAgICBvdXRwdXQgKz0gXCIgXCIgKyBwbHVyYWxpemUocmVtYWluZGVyLCBUaW1lVW5pdHMuTUlOVVRFUyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgcmVtYWluZGVyID0gZHVyYXRpb24gJSAyNDtcbiAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAyNCk7XG4gICAgb3V0cHV0ID0gcGx1cmFsaXplKGR1cmF0aW9uLCBUaW1lVW5pdHMuREFZUyk7XG5cbiAgICBpZiAocmVtYWluZGVyID4gMCkge1xuICAgICAgb3V0cHV0ICs9IFwiIFwiICsgcGx1cmFsaXplKHJlbWFpbmRlciwgVGltZVVuaXRzLkhPVVJTKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5teU1vZHVsZS5maWx0ZXIoJ25nZW9EdXJhdGlvbicsIER1cmF0aW9uRmlsdGVyKTtcbmV4cG9ydCB2YXIgcmVtb3ZlQ0RBVEEgPSBmdW5jdGlvbiByZW1vdmVDREFUQSgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCAmJiBpbnB1dC5yZXBsYWNlKSB7XG4gICAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvPCFcXFtDREFUQVxcWyguKilcXF1cXF0+LywgJyQxJyk7XG4gICAgfVxuICB9O1xufTtcbm15TW9kdWxlLmZpbHRlcigncmVtb3ZlQ0RBVEEnLCByZW1vdmVDREFUQSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJzb3J0YWJsZUNvbXBvbmVudC4kaW5qZWN0ID0gW1wiJHRpbWVvdXRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvc29ydGFibGUuanMnO1xuaW1wb3J0ICduZ2VvL3Nhc3MvanF1ZXJ5LXVpLnNjc3MnO1xuaW1wb3J0ICdqcXVlcnktdWktdG91Y2gtcHVuY2gnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Tb3J0YWJsZScsIFtdKTtcblxuZnVuY3Rpb24gc29ydGFibGVDb21wb25lbnQoJHRpbWVvdXQpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICB2YXIgc29ydGFibGUgPSBzY29wZS4kZXZhbChhdHRycy5uZ2VvU29ydGFibGUpIHx8IFtdO1xuICAgICAgY29uc29sZS5hc3NlcnQoQXJyYXkuaXNBcnJheShzb3J0YWJsZSkpO1xuICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzb3J0YWJsZTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc29ydGFibGUubGVuZ3RoICYmICR0aW1lb3V0KHJlc2V0VXBEcmFnRHJvcCwgMCk7XG4gICAgICB9KTtcbiAgICAgIHZhciBvcHRpb25zT2JqZWN0ID0gc2NvcGUuJGV2YWwoYXR0cnMubmdlb1NvcnRhYmxlT3B0aW9ucyk7XG4gICAgICB2YXIgb3B0aW9ucyA9IGdldE9wdGlvbnMob3B0aW9uc09iamVjdCk7XG4gICAgICB2YXIgY2FsbGJhY2tGbiA9IHNjb3BlLiRldmFsKGF0dHJzLm5nZW9Tb3J0YWJsZUNhbGxiYWNrKTtcbiAgICAgIHZhciBjYWxsYmFja0N0eCA9IHNjb3BlLiRldmFsKGF0dHJzLm5nZW9Tb3J0YWJsZUNhbGxiYWNrQ3R4KTtcblxuICAgICAgZnVuY3Rpb24gcmVzZXRVcERyYWdEcm9wKCkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBlbGVtZW50LmNoaWxkcmVuKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChjaGlsZHJlbltpXSkuZGF0YSgnaWR4JywgaSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc29ydGFibGVFbGVtZW50ID0gJChlbGVtZW50KTtcblxuICAgICAgICBpZiAoc29ydGFibGVFbGVtZW50LmRhdGEoJ3VpLXNvcnRhYmxlJykpIHtcbiAgICAgICAgICBzb3J0YWJsZUVsZW1lbnQub2ZmKCdzb3J0dXBkYXRlJyk7XG4gICAgICAgICAgc29ydGFibGVFbGVtZW50LnNvcnRhYmxlKCdkZXN0cm95Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc29ydGFibGVPcHRpb25zID0ge1xuICAgICAgICAgIGF4aXM6ICd5JyxcbiAgICAgICAgICBjbGFzc2VzOiB7XG4gICAgICAgICAgICAndWktc29ydGFibGUtaGVscGVyJzogb3B0aW9ucy5kcmFnZ2VyQ2xhc3NOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZUNsYXNzTmFtZSkge1xuICAgICAgICAgIHNvcnRhYmxlT3B0aW9ucy5oYW5kbGUgPSBcIi5cIiArIG9wdGlvbnMuaGFuZGxlQ2xhc3NOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXJDbGFzc05hbWUpIHtcbiAgICAgICAgICBzb3J0YWJsZU9wdGlvbnMucGxhY2Vob2xkZXIgPSBvcHRpb25zLnBsYWNlaG9sZGVyQ2xhc3NOYW1lO1xuICAgICAgICAgIHNvcnRhYmxlT3B0aW9ucy5mb3JjZVBsYWNlaG9sZGVyU2l6ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzb3J0YWJsZUVsZW1lbnQuc29ydGFibGUoc29ydGFibGVPcHRpb25zKTtcbiAgICAgICAgc29ydGFibGVFbGVtZW50Lm9uKCdzb3J0dXBkYXRlJywgZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgIHZhciBvbGRJbmRleCA9ICQodWkuaXRlbVswXSkuZGF0YSgnaWR4Jyk7XG4gICAgICAgICAgdmFyIG5ld0luZGV4ID0gdWkuaXRlbS5pbmRleCgpO1xuICAgICAgICAgICQodWkuaXRlbVswXSkuZGF0YSgnaWR4JywgbmV3SW5kZXgpO1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzb3J0YWJsZS5zcGxpY2UobmV3SW5kZXgsIDAsIHNvcnRhYmxlLnNwbGljZShvbGRJbmRleCwgMSlbMF0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrRm4gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgY2FsbGJhY2tGbi5hcHBseShjYWxsYmFja0N0eCwgW2VsZW1lbnQsIHNvcnRhYmxlXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHZhciByZXQ7XG4gICAgICAgIHZhciBkZWZhdWx0SGFuZGxlQ2xhc3NOYW1lID0gJ25nZW8tc29ydGFibGUtaGFuZGxlJztcblxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0ID0ge1xuICAgICAgICAgICAgJ2hhbmRsZUNsYXNzTmFtZSc6IGRlZmF1bHRIYW5kbGVDbGFzc05hbWVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChvcHRpb25zLmhhbmRsZUNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLmhhbmRsZUNsYXNzTmFtZSA9IGRlZmF1bHRIYW5kbGVDbGFzc05hbWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0ID0gb3B0aW9ucztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9Tb3J0YWJsZScsIHNvcnRhYmxlQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9NaXNjU3dpcGUnLCBbXSk7XG5teU1vZHVsZS5mYWN0b3J5KCckdmVydGljYWxTd2lwZScsIFtmdW5jdGlvbiAoKSB7XG4gIHZhciBNT1ZFX0JVRkZFUl9SQURJVVMgPSAxMDtcbiAgdmFyIFBPSU5URVJfRVZFTlRTID0ge1xuICAgIG1vdXNlOiB7XG4gICAgICBzdGFydDogJ21vdXNlZG93bicsXG4gICAgICBtb3ZlOiAnbW91c2Vtb3ZlJyxcbiAgICAgIGVuZDogJ21vdXNldXAnXG4gICAgfSxcbiAgICB0b3VjaDoge1xuICAgICAgc3RhcnQ6ICd0b3VjaHN0YXJ0JyxcbiAgICAgIG1vdmU6ICd0b3VjaG1vdmUnLFxuICAgICAgZW5kOiAndG91Y2hlbmQnLFxuICAgICAgY2FuY2VsOiAndG91Y2hjYW5jZWwnXG4gICAgfSxcbiAgICBwb2ludGVyOiB7XG4gICAgICBzdGFydDogJ3BvaW50ZXJkb3duJyxcbiAgICAgIG1vdmU6ICdwb2ludGVybW92ZScsXG4gICAgICBlbmQ6ICdwb2ludGVydXAnLFxuICAgICAgY2FuY2VsOiAncG9pbnRlcmNhbmNlbCdcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpIHtcbiAgICB2YXIgdWlFdmVudDtcbiAgICB2YXIgdG91Y2hFdmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG5cbiAgICBpZiAodG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlcyAmJiB0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHVpRXZlbnQgPSB0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB1aUV2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgeDogdWlFdmVudC5jbGllbnRYLFxuICAgICAgeTogdWlFdmVudC5jbGllbnRZXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEV2ZW50cyhwb2ludGVyVHlwZXMsIGV2ZW50VHlwZSkge1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBhbmd1bGFyLmZvckVhY2gocG9pbnRlclR5cGVzLCBmdW5jdGlvbiAocG9pbnRlclR5cGUpIHtcbiAgICAgIHZhciBldmVudE5hbWUgPSBQT0lOVEVSX0VWRU5UU1twb2ludGVyVHlwZV1bZXZlbnRUeXBlXTtcblxuICAgICAgaWYgKGV2ZW50TmFtZSkge1xuICAgICAgICByZXMucHVzaChldmVudE5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXMuam9pbignICcpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50SGFuZGxlcnMsIHBvaW50ZXJUeXBlcykge1xuICAgICAgdmFyIHRvdGFsWDtcbiAgICAgIHZhciB0b3RhbFk7XG4gICAgICB2YXIgc3RhcnRDb29yZHM7XG4gICAgICB2YXIgbGFzdFBvcztcbiAgICAgIHZhciBhY3RpdmUgPSBmYWxzZTtcbiAgICAgIHBvaW50ZXJUeXBlcyA9IHBvaW50ZXJUeXBlcyB8fCBbJ21vdXNlJywgJ3RvdWNoJywgJ3BvaW50ZXInXTtcbiAgICAgIGVsZW1lbnQub24oZ2V0RXZlbnRzKHBvaW50ZXJUeXBlcywgJ3N0YXJ0JyksIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBzdGFydENvb3JkcyA9IGdldENvb3JkaW5hdGVzKGV2ZW50KTtcbiAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdG90YWxYID0gMDtcbiAgICAgICAgdG90YWxZID0gMDtcbiAgICAgICAgbGFzdFBvcyA9IHN0YXJ0Q29vcmRzO1xuXG4gICAgICAgIGlmIChldmVudEhhbmRsZXJzLnN0YXJ0KSB7XG4gICAgICAgICAgZXZlbnRIYW5kbGVycy5zdGFydChzdGFydENvb3JkcywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZhciBldmVudHMgPSBnZXRFdmVudHMocG9pbnRlclR5cGVzLCAnY2FuY2VsJyk7XG5cbiAgICAgIGlmIChldmVudHMpIHtcbiAgICAgICAgZWxlbWVudC5vbihldmVudHMsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgaWYgKGV2ZW50SGFuZGxlcnMuY2FuY2VsKSB7XG4gICAgICAgICAgICBldmVudEhhbmRsZXJzLmNhbmNlbChldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5vbihnZXRFdmVudHMocG9pbnRlclR5cGVzLCAnbW92ZScpLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXN0YXJ0Q29vcmRzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvb3JkcyA9IGdldENvb3JkaW5hdGVzKGV2ZW50KTtcbiAgICAgICAgdG90YWxYICs9IE1hdGguYWJzKGNvb3Jkcy54IC0gbGFzdFBvcy54KTtcbiAgICAgICAgdG90YWxZICs9IE1hdGguYWJzKGNvb3Jkcy55IC0gbGFzdFBvcy55KTtcbiAgICAgICAgbGFzdFBvcyA9IGNvb3JkcztcblxuICAgICAgICBpZiAodG90YWxYIDwgTU9WRV9CVUZGRVJfUkFESVVTICYmIHRvdGFsWSA8IE1PVkVfQlVGRkVSX1JBRElVUykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b3RhbFggPiB0b3RhbFkpIHtcbiAgICAgICAgICBhY3RpdmUgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChldmVudEhhbmRsZXJzLmNhbmNlbCkge1xuICAgICAgICAgICAgZXZlbnRIYW5kbGVycy5jYW5jZWwoZXZlbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgaWYgKGV2ZW50SGFuZGxlcnMubW92ZSkge1xuICAgICAgICAgICAgZXZlbnRIYW5kbGVycy5tb3ZlKGNvb3JkcywgZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKGdldEV2ZW50cyhwb2ludGVyVHlwZXMsICdlbmQnKSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghYWN0aXZlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGV2ZW50SGFuZGxlcnMuZW5kKSB7XG4gICAgICAgICAgZXZlbnRIYW5kbGVycy5lbmQoZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcblxuZnVuY3Rpb24gbWFrZVN3aXBlRGlyZWN0aXZlXyhkaXJlY3RpdmVOYW1lLCBkaXJlY3Rpb24sIGV2ZW50TmFtZSkge1xuICBteU1vZHVsZS5kaXJlY3RpdmUoZGlyZWN0aXZlTmFtZSwgWyckcGFyc2UnLCAnJHZlcnRpY2FsU3dpcGUnLCBmdW5jdGlvbiAoJHBhcnNlLCAkdmVydGljYWxTd2lwZSkge1xuICAgIHZhciBNQVhfSE9SSVpPTlRBTF9ESVNUQU5DRSA9IDc1O1xuICAgIHZhciBNQVhfSE9SSVpPTlRBTF9SQVRJTyA9IDAuMztcbiAgICB2YXIgTUlOX1ZFUlRJQ0FMX0RJU1RBTkNFID0gMzA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIHN3aXBlSGFuZGxlciA9ICRwYXJzZShhdHRyW2RpcmVjdGl2ZU5hbWVdKTtcbiAgICAgIHZhciBzdGFydENvb3JkcztcbiAgICAgIHZhciB2YWxpZDtcblxuICAgICAgZnVuY3Rpb24gdmFsaWRTd2lwZShjb29yZHMpIHtcbiAgICAgICAgaWYgKCFzdGFydENvb3Jkcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWx0YVkgPSAoY29vcmRzLnkgLSBzdGFydENvb3Jkcy55KSAqIGRpcmVjdGlvbjtcbiAgICAgICAgdmFyIGRlbHRhWCA9IE1hdGguYWJzKGNvb3Jkcy54IC0gc3RhcnRDb29yZHMueCk7XG4gICAgICAgIHJldHVybiB2YWxpZCAmJiBkZWx0YVggPCBNQVhfSE9SSVpPTlRBTF9ESVNUQU5DRSAmJiBkZWx0YVkgPiAwICYmIGRlbHRhWSA+IE1JTl9WRVJUSUNBTF9ESVNUQU5DRSAmJiBkZWx0YVggLyBkZWx0YVkgPCBNQVhfSE9SSVpPTlRBTF9SQVRJTztcbiAgICAgIH1cblxuICAgICAgdmFyIHBvaW50ZXJUeXBlcyA9IFsndG91Y2gnXTtcblxuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHIubmdlb1N3aXBlRGlzYWJsZU1vdXNlKSkge1xuICAgICAgICBwb2ludGVyVHlwZXMucHVzaCgnbW91c2UnKTtcbiAgICAgIH1cblxuICAgICAgJHZlcnRpY2FsU3dpcGUuYmluZChlbGVtZW50LCB7XG4gICAgICAgICdzdGFydCc6IGZ1bmN0aW9uIHN0YXJ0KGNvb3JkcywgZXZlbnQpIHtcbiAgICAgICAgICBzdGFydENvb3JkcyA9IGNvb3JkcztcbiAgICAgICAgICB2YWxpZCA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgICdjYW5jZWwnOiBmdW5jdGlvbiBjYW5jZWwoZXZlbnQpIHtcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICAnZW5kJzogZnVuY3Rpb24gZW5kKGNvb3JkcywgZXZlbnQpIHtcbiAgICAgICAgICBpZiAodmFsaWRTd2lwZShjb29yZHMpKSB7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXJIYW5kbGVyKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICAgIHN3aXBlSGFuZGxlcihzY29wZSwge1xuICAgICAgICAgICAgICAgICRldmVudDogZXZlbnRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIHBvaW50ZXJUeXBlcyk7XG4gICAgfTtcbiAgfV0pO1xufVxuXG5tYWtlU3dpcGVEaXJlY3RpdmVfKCduZ2VvU3dpcGVEb3duJywgMSwgJ3N3aXBlZG93bicpO1xubWFrZVN3aXBlRGlyZWN0aXZlXygnbmdlb1N3aXBlVXAnLCAtMSwgJ3N3aXBldXAnKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImZ1bmN0aW9uIHN5bmNBcnJheXMoYXJyMSwgYXJyMiwgcmV2ZXJzZSwgc2NvcGUsIGZpbHRlcikge1xuICB2YXIgZGVyZWcxID0gc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFycjE7XG4gIH0sIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSwgaWksIGo7XG5cbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgZm9yIChpID0gYXJyMS5sZW5ndGggLSAxLCBqID0gMDsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgaWYgKGZpbHRlcihhcnIxW2ldKSkge1xuICAgICAgICAgIGFycjJbaisrXSA9IGFycjFbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBhcnIxLmxlbmd0aCwgaiA9IDA7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChmaWx0ZXIoYXJyMVtpXSkpIHtcbiAgICAgICAgICBhcnIyW2orK10gPSBhcnIxW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXJyMi5sZW5ndGggPSBqO1xuICB9KTtcbiAgdmFyIGRlcmVnMiA9IHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhcnIyO1xuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGksIGlpLCBqO1xuXG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gYXJyMS5sZW5ndGgsIGogPSBhcnIyLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChmaWx0ZXIoYXJyMVtpXSkpIHtcbiAgICAgICAgICBhcnIxW2ldID0gYXJyMltqLS1dO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGogPT0gLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGFycjEubGVuZ3RoLCBqID0gMDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGZpbHRlcihhcnIxW2ldKSkge1xuICAgICAgICAgIGFycjFbaV0gPSBhcnIyW2orK107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5hc3NlcnQoaiA9PSBhcnIyLmxlbmd0aCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBkZXJlZzEoKTtcbiAgICBkZXJlZzIoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3luY0FycmF5czsiLCJleHBvcnQgdmFyIFBlcm1hbGluazNkUGFyYW0gPSB7XG4gIEVOQUJMRUQ6ICczZF9lbmFibGVkJyxcbiAgTE9OOiAnM2RfbG9uJyxcbiAgTEFUOiAnM2RfbGF0JyxcbiAgRUxFVkFUSU9OOiAnM2RfZWxldmF0aW9uJyxcbiAgSEVBRElORzogJzNkX2hlYWRpbmcnLFxuICBQSVRDSDogJzNkX3BpdGNoJyxcbiAgUFJFRklYOiAnM2RfJ1xufTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBvbFN0eWxlQ2lyY2xlIGZyb20gJ29sL3N0eWxlL0NpcmNsZS5qcyc7XG5pbXBvcnQgb2xTdHlsZVJlZ3VsYXJTaGFwZSBmcm9tICdvbC9zdHlsZS9SZWd1bGFyU2hhcGUuanMnO1xuaW1wb3J0IG9sU3R5bGVGaWxsIGZyb20gJ29sL3N0eWxlL0ZpbGwuanMnO1xuaW1wb3J0IG9sU3R5bGVTdHJva2UgZnJvbSAnb2wvc3R5bGUvU3Ryb2tlLmpzJztcbmltcG9ydCBvbFN0eWxlIGZyb20gJ29sL3N0eWxlL1N0eWxlLmpzJztcbmltcG9ydCB7IGNyZWF0ZURlZmF1bHRTdHlsZSB9IGZyb20gJ29sL3N0eWxlL1N0eWxlLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFN0eWxlKHN0eWxlRGVzY3JpcHRvcikge1xuICBpZiAoc3R5bGVEZXNjcmlwdG9yIGluc3RhbmNlb2Ygb2xTdHlsZSkge1xuICAgIHJldHVybiBzdHlsZURlc2NyaXB0b3I7XG4gIH0gZWxzZSBpZiAoIXN0eWxlRGVzY3JpcHRvcikge1xuICAgIHJldHVybiBjcmVhdGVEZWZhdWx0U3R5bGU7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzdHlsZURlc2NyaXB0b3IpKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShzdHlsZURlc2NyaXB0b3IpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIHN0eWxlID0gX3N0ZXAudmFsdWU7XG4gICAgICByZXN1bHQucHVzaChidWlsZFN0eWxlKHN0eWxlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgX3N0eWxlID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihfc3R5bGUsIHN0eWxlRGVzY3JpcHRvcik7XG4gICAgdmFyIHNkID0gc3R5bGVEZXNjcmlwdG9yO1xuXG4gICAgaWYgKHNkLmZpbGwpIHtcbiAgICAgIF9zdHlsZS5maWxsID0gbmV3IG9sU3R5bGVGaWxsKHNkLmZpbGwpO1xuICAgIH1cblxuICAgIGlmIChzZC5zdHJva2UpIHtcbiAgICAgIF9zdHlsZS5zdHJva2UgPSBuZXcgb2xTdHlsZVN0cm9rZShzZC5zdHJva2UpO1xuICAgIH1cblxuICAgIGlmIChzZC5jaXJjbGUpIHtcbiAgICAgIHZhciBjaXJjbGVTdHlsZSA9IHt9O1xuICAgICAgT2JqZWN0LmFzc2lnbihjaXJjbGVTdHlsZSwgc2QuY2lyY2xlKTtcblxuICAgICAgaWYgKHNkLmNpcmNsZS5maWxsKSB7XG4gICAgICAgIGNpcmNsZVN0eWxlLmZpbGwgPSBuZXcgb2xTdHlsZUZpbGwoc2QuY2lyY2xlLmZpbGwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2QuY2lyY2xlLnN0cm9rZSkge1xuICAgICAgICBjaXJjbGVTdHlsZS5zdHJva2UgPSBuZXcgb2xTdHlsZVN0cm9rZShzZC5jaXJjbGUuc3Ryb2tlKTtcbiAgICAgIH1cblxuICAgICAgX3N0eWxlLmltYWdlID0gbmV3IG9sU3R5bGVDaXJjbGUoY2lyY2xlU3R5bGUpO1xuICAgICAgZGVsZXRlIF9zdHlsZS5jaXJjbGU7XG4gICAgfSBlbHNlIGlmIChzZC5yZWd1bGFyU2hhcGUpIHtcbiAgICAgIHZhciByZWd1bGFyU2hhcGVTdHlsZSA9IHt9O1xuICAgICAgT2JqZWN0LmFzc2lnbihyZWd1bGFyU2hhcGVTdHlsZSwgc2QucmVndWxhclNoYXBlKTtcblxuICAgICAgaWYgKHNkLnJlZ3VsYXJTaGFwZS5maWxsKSB7XG4gICAgICAgIHJlZ3VsYXJTaGFwZVN0eWxlLmZpbGwgPSBuZXcgb2xTdHlsZUZpbGwoc2QucmVndWxhclNoYXBlLmZpbGwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2QucmVndWxhclNoYXBlLnN0cm9rZSkge1xuICAgICAgICByZWd1bGFyU2hhcGVTdHlsZS5zdHJva2UgPSBuZXcgb2xTdHlsZVN0cm9rZShzZC5yZWd1bGFyU2hhcGUuc3Ryb2tlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNkLnJlZ3VsYXJTaGFwZS5hbmdsZSkge1xuICAgICAgICBzZC5yZWd1bGFyU2hhcGUuYW5nbGUgPSBzZC5yZWd1bGFyU2hhcGUuYW5nbGUgLyAxODAgKiBNYXRoLlBJO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2QucmVndWxhclNoYXBlLnJvdGF0aW9uKSB7XG4gICAgICAgIHNkLnJlZ3VsYXJTaGFwZS5yb3RhdGlvbiA9IHNkLnJlZ3VsYXJTaGFwZS5hbmdsZSAvIDE4MCAqIE1hdGguUEk7XG4gICAgICB9XG5cbiAgICAgIF9zdHlsZS5pbWFnZSA9IG5ldyBvbFN0eWxlUmVndWxhclNoYXBlKHJlZ3VsYXJTaGFwZVN0eWxlKTtcbiAgICAgIGRlbGV0ZSBfc3R5bGUucmVndWxhclNoYXBlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgb2xTdHlsZShfc3R5bGUpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBudWxsOyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQUREOiAnYWRkJyxcbiAgUkVNT1ZFOiAncmVtb3ZlJyxcbiAgUkVQTEFDRTogJ3JlcGxhY2UnXG59OyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBoYXNDb2Fyc2VQb2ludGluZ0RldmljZSB9IGZyb20gJ25nZW8vdXRpbHMuanMnO1xuaW1wb3J0IG5nZW9RdWVyeUFjdGlvbiBmcm9tICduZ2VvL3F1ZXJ5L0FjdGlvbi5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5UXVlcmVudCBmcm9tICduZ2VvL3F1ZXJ5L1F1ZXJlbnQuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMgZnJvbSAnbmdlby9kYXRhc291cmNlL0RhdGFTb3VyY2VzLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZUhlbHBlciBmcm9tICduZ2VvL2RhdGFzb3VyY2UvSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZlYXR1cmVIZWxwZXIgZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuZXhwb3J0IHZhciBNYXBRdWVyZW50ID0gZnVuY3Rpb24gKCkge1xuICBNYXBRdWVyZW50LiRpbmplY3QgPSBbXCJuZ2VvRGF0YVNvdXJjZXNcIiwgXCJuZ2VvRGF0YVNvdXJjZXNIZWxwZXJcIiwgXCJuZ2VvRmVhdHVyZUhlbHBlclwiLCBcIm5nZW9RdWVyZW50XCIsIFwibmdlb1F1ZXJ5UmVzdWx0XCIsIFwibmdlb1F1ZXJ5T3B0aW9uc1wiXTtcblxuICBmdW5jdGlvbiBNYXBRdWVyZW50KG5nZW9EYXRhU291cmNlcywgbmdlb0RhdGFTb3VyY2VzSGVscGVyLCBuZ2VvRmVhdHVyZUhlbHBlciwgbmdlb1F1ZXJlbnQsIG5nZW9RdWVyeVJlc3VsdCwgbmdlb1F1ZXJ5T3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gbmdlb1F1ZXJ5T3B0aW9ucztcbiAgICB0aGlzLmRhdGFTb3VyY2VzXyA9IG5nZW9EYXRhU291cmNlcy5jb2xsZWN0aW9uO1xuICAgIHRoaXMuZmVhdHVyZUhlbHBlcl8gPSBuZ2VvRmVhdHVyZUhlbHBlcjtcbiAgICB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8gPSBuZ2VvRGF0YVNvdXJjZXNIZWxwZXI7XG4gICAgdGhpcy5uZ2VvUXVlcmVudF8gPSBuZ2VvUXVlcmVudDtcbiAgICB0aGlzLnJlc3VsdF8gPSBuZ2VvUXVlcnlSZXN1bHQ7XG4gICAgdGhpcy5saW1pdF8gPSBvcHRpb25zLmxpbWl0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxpbWl0IDogNTA7XG4gICAgdGhpcy50b2xlcmFuY2VfO1xuXG4gICAgaWYgKGhhc0NvYXJzZVBvaW50aW5nRGV2aWNlKCkpIHtcbiAgICAgIHRoaXMudG9sZXJhbmNlXyA9IG9wdGlvbnMudG9sZXJhbmNlVG91Y2ggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudG9sZXJhbmNlVG91Y2ggOiAxMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50b2xlcmFuY2VfID0gb3B0aW9ucy50b2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudG9sZXJhbmNlIDogMztcbiAgICB9XG5cbiAgICB0aGlzLmJib3hBc0dFVFBhcmFtXyA9IG9wdGlvbnMuYmJveEFzR0VUUGFyYW0gfHwgZmFsc2U7XG4gICAgdGhpcy5kYXRhU291cmNlTmFtZXNfID0ge307XG4gICAgdGhpcy5jbGVhcmVkXyA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IE1hcFF1ZXJlbnQucHJvdG90eXBlO1xuXG4gIF9wcm90by5pc3N1ZSA9IGZ1bmN0aW9uIGlzc3VlKG9wdGlvbnMpIHtcbiAgICB2YXIgYWN0aW9uID0gb3B0aW9ucy5hY3Rpb24gPyBvcHRpb25zLmFjdGlvbiA6IG5nZW9RdWVyeUFjdGlvbi5SRVBMQUNFO1xuICAgIHRoaXMuY2xlYXIoYWN0aW9uICE9PSBuZ2VvUXVlcnlBY3Rpb24uUkVQTEFDRSk7XG4gICAgdmFyIHF1ZXJ5YWJsZURhdGFTb3VyY2VzO1xuXG4gICAgaWYgKG9wdGlvbnMuZGF0YVNvdXJjZXMgPT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnF1ZXJ5YWJsZURhdGFTb3VyY2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzID0gdGhpcy5uZ2VvUXVlcmVudF8uZ2V0UXVlcnlhYmxlRGF0YVNvdXJjZXModGhpcy5kYXRhU291cmNlc18uZ2V0QXJyYXkoKSwgb3B0aW9ucy5tYXApO1xuICAgIH1cblxuICAgIHZhciBsaW1pdCA9IG9wdGlvbnMubGltaXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGltaXQgOiB0aGlzLmxpbWl0XztcbiAgICBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtcbiAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzOiBxdWVyeWFibGVEYXRhU291cmNlcyxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIHRvbGVyYW5jZTogdGhpcy50b2xlcmFuY2VfLFxuICAgICAgYmJveEFzR0VUUGFyYW06IHRoaXMuYmJveEFzR0VUUGFyYW1fXG4gICAgfSk7XG4gICAgdGhpcy5yZXN1bHRfLnBlbmRpbmcgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzLm5nZW9RdWVyZW50Xy5pc3N1ZShvcHRpb25zKS50aGVuKHRoaXMuaGFuZGxlUmVzdWx0Xy5iaW5kKHRoaXMsIGFjdGlvbikpO1xuICB9O1xuXG4gIF9wcm90by5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKGtlZXApIHtcbiAgICBpZiAoa2VlcCA9PT0gdm9pZCAwKSB7XG4gICAgICBrZWVwID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2xlYXJlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdF8udG90YWwgPSAwO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLnJlc3VsdF8uc291cmNlcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgc291cmNlID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmICgha2VlcCkge1xuICAgICAgICBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoID0gMDtcbiAgICAgICAgZGVsZXRlIHNvdXJjZS50b3RhbEZlYXR1cmVDb3VudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVzdWx0Xy50b3RhbCArPSBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBzb3VyY2UucGVuZGluZyA9IGZhbHNlO1xuICAgICAgc291cmNlLnRvb01hbnlSZXN1bHRzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFrZWVwKSB7XG4gICAgICB0aGlzLnJlc3VsdF8uc291cmNlcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0Xy5wZW5kaW5nID0gZmFsc2U7XG4gICAgdGhpcy5jbGVhcmVkXyA9IHRydWU7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVJlc3VsdF8gPSBmdW5jdGlvbiBoYW5kbGVSZXN1bHRfKGFjdGlvbiwgcmVzcG9uc2UpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHRvdGFsID0gYWN0aW9uID09PSBuZ2VvUXVlcnlBY3Rpb24uUkVQTEFDRSA/IDAgOiB0aGlzLnJlc3VsdF8udG90YWw7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpZFN0cikge1xuICAgICAgdmFyIGlkID0gTnVtYmVyKGlkU3RyKTtcblxuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfdGhpcy5uZ2VvRGF0YVNvdXJjZXNIZWxwZXJfLmdldERhdGFTb3VyY2UoaWQpO1xuXG4gICAgICBpZiAoIWRhdGFTb3VyY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFTb3VyY2UnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxhYmVsID0gZGF0YVNvdXJjZS5uYW1lO1xuICAgICAgY29uc29sZS5hc3NlcnQoZGF0YVNvdXJjZSk7XG4gICAgICB2YXIgcXVlcmVudFJlc3VsdEl0ZW0gPSByZXNwb25zZVtpZF07XG4gICAgICB2YXIgZmVhdHVyZXMgPSBxdWVyZW50UmVzdWx0SXRlbS5mZWF0dXJlcztcbiAgICAgIHZhciBsaW1pdCA9IHF1ZXJlbnRSZXN1bHRJdGVtLmxpbWl0O1xuICAgICAgdmFyIHRvb01hbnlSZXN1bHRzID0gcXVlcmVudFJlc3VsdEl0ZW0udG9vTWFueUZlYXR1cmVzID09PSB0cnVlO1xuICAgICAgdmFyIHRvdGFsRmVhdHVyZUNvdW50ID0gcXVlcmVudFJlc3VsdEl0ZW0udG90YWxGZWF0dXJlQ291bnQ7XG4gICAgICB2YXIgcmVxdWVzdFBhcnRuZXJzID0gcXVlcmVudFJlc3VsdEl0ZW0ucmVxdWVzdFBhcnRuZXJzO1xuICAgICAgdmFyIHR5cGVTZXBhcmF0ZWRGZWF0dXJlcyA9IHt9O1xuICAgICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgdHlwZSA9IGZlYXR1cmUuZ2V0KCduZ2VvX2ZlYXR1cmVfdHlwZV8nKTtcblxuICAgICAgICBpZiAoIXR5cGVTZXBhcmF0ZWRGZWF0dXJlc1t0eXBlXSkge1xuICAgICAgICAgIHR5cGVTZXBhcmF0ZWRGZWF0dXJlc1t0eXBlXSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFTb3VyY2UuYXR0cmlidXRlcyAmJiBkYXRhU291cmNlLmF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBmZWF0dXJlLmdldFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB2YXIgZmlsdGVyZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgZGF0YVNvdXJjZS5hdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5hbGlhcykge1xuICAgICAgICAgICAgICBmaWx0ZXJlZFByb3BlcnRpZXNbYXR0cmlidXRlLmFsaWFzXSA9IHByb3BlcnRpZXNbYXR0cmlidXRlLm5hbWVdO1xuICAgICAgICAgICAgICBmZWF0dXJlLnVuc2V0KGF0dHJpYnV0ZS5uYW1lLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpbHRlcmVkUHJvcGVydGllc1thdHRyaWJ1dGUubmFtZV0gPSBwcm9wZXJ0aWVzW2F0dHJpYnV0ZS5uYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmZWF0dXJlLnNldFByb3BlcnRpZXMoZmlsdGVyZWRQcm9wZXJ0aWVzLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHR5cGVTZXBhcmF0ZWRGZWF0dXJlc1t0eXBlXS5wdXNoKGZlYXR1cmUpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvciAodmFyIHR5cGUgaW4gdHlwZVNlcGFyYXRlZEZlYXR1cmVzKSB7XG4gICAgICAgIGxhYmVsID0gdHlwZSA/IHR5cGUgOiBsYWJlbDtcbiAgICAgICAgdmFyIGZlYXR1cmVzQnlUeXBlID0gdHlwZVNlcGFyYXRlZEZlYXR1cmVzW3R5cGVdO1xuICAgICAgICB2YXIgc2hvdWxkUHVzaCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChhY3Rpb24gPT09IG5nZW9RdWVyeUFjdGlvbi5SRVBMQUNFKSB7XG4gICAgICAgICAgc2hvdWxkUHVzaCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGV4aXN0aW5nU291cmNlID0gdm9pZCAwO1xuXG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoX3RoaXMucmVzdWx0Xy5zb3VyY2VzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChzb3VyY2UuaWQgPT09IGlkICYmIHNvdXJjZS5sYWJlbCA9PT0gbGFiZWwpIHtcbiAgICAgICAgICAgICAgZXhpc3RpbmdTb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleGlzdGluZ1NvdXJjZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZmVhdHVyZXNCeVR5cGUpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgbmV3RmVhdHVyZSA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdGZWF0dXJlSW5kZXggPSBfdGhpcy5mZWF0dXJlSGVscGVyXy5maW5kRmVhdHVyZUluZGV4QnlGaWQoZXhpc3RpbmdTb3VyY2UuZmVhdHVyZXMsIFwiXCIgKyBuZXdGZWF0dXJlLmdldElkKCkpO1xuXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ0ZlYXR1cmVJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSBuZ2VvUXVlcnlBY3Rpb24uQUREKSB7XG4gICAgICAgICAgICAgICAgICBleGlzdGluZ1NvdXJjZS5mZWF0dXJlcy5wdXNoKG5ld0ZlYXR1cmUpO1xuICAgICAgICAgICAgICAgICAgdG90YWwgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gbmdlb1F1ZXJ5QWN0aW9uLlJFTU9WRSkge1xuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdTb3VyY2UuZmVhdHVyZXMuc3BsaWNlKGV4aXN0aW5nRmVhdHVyZUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgIHRvdGFsIC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09IG5nZW9RdWVyeUFjdGlvbi5BREQpIHtcbiAgICAgICAgICAgICAgc2hvdWxkUHVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNob3VsZFB1c2gpIHtcbiAgICAgICAgICBfdGhpcy5yZXN1bHRfLnNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZXNCeVR5cGUsXG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgICAgICAgICBwZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHRvb01hbnlSZXN1bHRzOiB0b29NYW55UmVzdWx0cyxcbiAgICAgICAgICAgIHRvdGFsRmVhdHVyZUNvdW50OiB0b3RhbEZlYXR1cmVDb3VudCxcbiAgICAgICAgICAgIGlkZW50aWZpZXJBdHRyaWJ1dGVGaWVsZDogZGF0YVNvdXJjZS5pZGVudGlmaWVyQXR0cmlidXRlLFxuICAgICAgICAgICAgcmVxdWVzdFBhcnRuZXJzOiByZXF1ZXN0UGFydG5lcnNcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRvdGFsICs9IGZlYXR1cmVzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpZFN0ciBpbiByZXNwb25zZSkge1xuICAgICAgX2xvb3AoaWRTdHIpO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0Xy50b3RhbCA9IHRvdGFsO1xuICAgIHRoaXMucmVzdWx0Xy5wZW5kaW5nID0gZmFsc2U7XG4gICAgdGhpcy5jbGVhcmVkXyA9IGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBNYXBRdWVyZW50O1xufSgpO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9NYXBRdWVyZW50JywgW25nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMubmFtZSwgbmdlb0RhdGFzb3VyY2VIZWxwZXIubmFtZSwgbmdlb1F1ZXJ5UXVlcmVudC5uYW1lLCBuZ2VvTWlzY0ZlYXR1cmVIZWxwZXIubmFtZV0pO1xubXlNb2R1bGUuc2VydmljZSgnbmdlb01hcFF1ZXJlbnQnLCBNYXBRdWVyZW50KTtcbm15TW9kdWxlLnZhbHVlKCduZ2VvUXVlcnlSZXN1bHQnLCB7XG4gIHNvdXJjZXM6IFtdLFxuICB0b3RhbDogMCxcbiAgcGVuZGluZzogZmFsc2Vcbn0pO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiZXhwb3J0IGRlZmF1bHQge1xuICBDTElDSzogJ2NsaWNrJyxcbiAgRFJBV19CT1g6ICdkcmF3Ym94JyxcbiAgRFJBV19QT0xZR09OOiAnZHJhd3BvbHlnb24nXG59OyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb1F1ZXJ5QWN0aW9uIGZyb20gJ25nZW8vcXVlcnkvQWN0aW9uLmpzJztcbmltcG9ydCBuZ2VvUXVlcnlNb2RlIGZyb20gJ25nZW8vcXVlcnkvTW9kZS5qcyc7XG5pbXBvcnQgeyBpc0V2ZW50VXNpbkN0cmxLZXkgfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCB7IGxpc3RlbiBhcyBvbEV2ZW50c0xpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5leHBvcnQgdmFyIFF1ZXJ5TW9kZVNlbGVjdG9yID0gZnVuY3Rpb24gKCkge1xuICBRdWVyeU1vZGVTZWxlY3Rvci4kaW5qZWN0ID0gW1wiJHJvb3RTY29wZVwiXTtcblxuICBmdW5jdGlvbiBRdWVyeU1vZGVTZWxlY3Rvcigkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5rZXlBY3Rpb25BZGRfID0gJ2EnO1xuICAgIHRoaXMua2V5QWN0aW9uUmVtb3ZlXyA9ICd4JztcbiAgICB0aGlzLmtleXNBY3Rpb25fID0gW3RoaXMua2V5QWN0aW9uQWRkXywgdGhpcy5rZXlBY3Rpb25SZW1vdmVfXTtcbiAgICB0aGlzLmFjdGlvbl8gPSBuZ2VvUXVlcnlBY3Rpb24uUkVQTEFDRTtcbiAgICB0aGlzLnBlbmRpbmdfID0gZmFsc2U7XG4gICAgdGhpcy53YXNQZW5kaW5nXyA9IGZhbHNlO1xuICAgIHRoaXMucHJldmlvdXNBY3Rpb25fID0gbnVsbDtcbiAgICB0aGlzLm1vZGVfID0gbmdlb1F1ZXJ5TW9kZS5DTElDSztcbiAgICB0aGlzLnByZXZpb3VzTW9kZV8gPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlQWN0aW9uS2V5XyA9IG51bGw7XG4gICAgdGhpcy5yb290U2NvcGVfID0gJHJvb3RTY29wZTtcbiAgICBvbEV2ZW50c0xpc3Rlbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd25fLCB0aGlzKTtcbiAgICBvbEV2ZW50c0xpc3Rlbihkb2N1bWVudCwgJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcF8sIHRoaXMpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFF1ZXJ5TW9kZVNlbGVjdG9yLnByb3RvdHlwZTtcblxuICBfcHJvdG8uaGFuZGxlS2V5RG93bl8gPSBmdW5jdGlvbiBoYW5kbGVLZXlEb3duXyhldnQpIHtcbiAgICBpZiAoIShldnQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIga2V5ID0gZXZ0LmtleTtcblxuICAgIGlmICh0aGlzLmtleXNBY3Rpb25fLmluY2x1ZGVzKGtleSkgJiYgIXRoaXMucHJldmlvdXNBY3Rpb25fKSB7XG4gICAgICB0aGlzLnByZXZpb3VzQWN0aW9uXyA9IHRoaXMuYWN0aW9uO1xuICAgICAgdmFyIG5ld0FjdGlvbjtcblxuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSB0aGlzLmtleUFjdGlvbkFkZF86XG4gICAgICAgICAgbmV3QWN0aW9uID0gbmdlb1F1ZXJ5QWN0aW9uLkFERDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIHRoaXMua2V5QWN0aW9uUmVtb3ZlXzpcbiAgICAgICAgICBuZXdBY3Rpb24gPSBuZ2VvUXVlcnlBY3Rpb24uUkVNT1ZFO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdBY3Rpb24pIHtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBuZXdBY3Rpb247XG4gICAgICAgIHRoaXMuYWN0aXZlQWN0aW9uS2V5XyA9IGtleTtcbiAgICAgICAgdGhpcy5yb290U2NvcGVfLiRhcHBseSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNFdmVudFVzaW5DdHJsS2V5KGV2dCkgJiYgIXRoaXMucHJldmlvdXNNb2RlXykge1xuICAgICAgdGhpcy5wcmV2aW91c01vZGVfID0gdGhpcy5tb2RlO1xuICAgICAgdGhpcy5tb2RlID0gbmdlb1F1ZXJ5TW9kZS5EUkFXX0JPWDtcbiAgICAgIHRoaXMucm9vdFNjb3BlXy4kYXBwbHkoKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUtleVVwXyA9IGZ1bmN0aW9uIGhhbmRsZUtleVVwXyhldnQpIHtcbiAgICBpZiAoIShldnQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGVTY29wZSA9IGZhbHNlO1xuXG4gICAgaWYgKGlzRXZlbnRVc2luQ3RybEtleShldnQpICYmIHRoaXMucHJldmlvdXNNb2RlXykge1xuICAgICAgaWYgKHRoaXMucGVuZGluZykge1xuICAgICAgICB0aGlzLndhc1BlbmRpbmdfID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW9kZSA9IHRoaXMucHJldmlvdXNNb2RlXztcbiAgICAgICAgdGhpcy5wcmV2aW91c01vZGVfID0gbnVsbDtcbiAgICAgICAgdXBkYXRlU2NvcGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBrZXkgPSBldnQua2V5O1xuXG4gICAgaWYgKHRoaXMuYWN0aXZlQWN0aW9uS2V5XyA9PT0ga2V5ICYmIHRoaXMucHJldmlvdXNBY3Rpb25fKSB7XG4gICAgICB0aGlzLmFjdGlvbiA9IHRoaXMucHJldmlvdXNBY3Rpb25fO1xuICAgICAgdGhpcy5wcmV2aW91c0FjdGlvbl8gPSBudWxsO1xuICAgICAgdGhpcy5hY3RpdmVBY3Rpb25LZXlfID0gbnVsbDtcbiAgICAgIHVwZGF0ZVNjb3BlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodXBkYXRlU2NvcGUpIHtcbiAgICAgIHRoaXMucm9vdFNjb3BlXy4kYXBwbHkoKTtcbiAgICB9XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFF1ZXJ5TW9kZVNlbGVjdG9yLCBbe1xuICAgIGtleTogXCJhY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdGlvbl87XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChhY3Rpb24pIHtcbiAgICAgIHRoaXMuYWN0aW9uXyA9IGFjdGlvbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibW9kZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubW9kZV87XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChtb2RlKSB7XG4gICAgICB0aGlzLm1vZGVfID0gbW9kZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicGVuZGluZ1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ187XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChwZW5kaW5nKSB7XG4gICAgICB0aGlzLnBlbmRpbmdfID0gcGVuZGluZztcblxuICAgICAgaWYgKCFwZW5kaW5nICYmIHRoaXMud2FzUGVuZGluZ18gJiYgdGhpcy5wcmV2aW91c01vZGVfKSB7XG4gICAgICAgIHRoaXMud2FzUGVuZGluZ18gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tb2RlID0gdGhpcy5wcmV2aW91c01vZGVfO1xuICAgICAgICB0aGlzLnByZXZpb3VzTW9kZV8gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBRdWVyeU1vZGVTZWxlY3Rvcjtcbn0oKTtcbnZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUXVlcnlNb2RlU2VsZWN0b3InLCBbXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvUXVlcnlNb2RlU2VsZWN0b3InLCBRdWVyeU1vZGVTZWxlY3Rvcik7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlT0dDIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9PR0MuanMnO1xuaW1wb3J0IG5nZW9GaWx0ZXJSdWxlSGVscGVyIGZyb20gJ25nZW8vZmlsdGVyL1J1bGVIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjV01TVGltZSBmcm9tICduZ2VvL21pc2MvV01TVGltZS5qcyc7XG5pbXBvcnQgKiBhcyBvbEZvcm1hdEZpbHRlciBmcm9tICdvbC9mb3JtYXQvZmlsdGVyLmpzJztcbmltcG9ydCBvbEZvcm1hdFdGUyBmcm9tICdvbC9mb3JtYXQvV0ZTLmpzJztcbmltcG9ydCBuZ2VvV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZSBmcm9tICduZ2VvL1dGU0Rlc2NyaWJlRmVhdHVyZVR5cGUuanMnO1xuaW1wb3J0IG9sRm9ybWF0V01TQ2FwYWJpbGl0aWVzIGZyb20gJ29sL2Zvcm1hdC9XTVNDYXBhYmlsaXRpZXMuanMnO1xuaW1wb3J0IG9sRm9ybWF0V01UU0NhcGFiaWxpdGllcyBmcm9tICdvbC9mb3JtYXQvV01UU0NhcGFiaWxpdGllcy5qcyc7XG5pbXBvcnQgeyBhcHBlbmRQYXJhbXMgYXMgb2xVcmlBcHBlbmRQYXJhbXMgfSBmcm9tICdvbC91cmkuanMnO1xuaW1wb3J0ICogYXMgb2xFeHRlbnQgZnJvbSAnb2wvZXh0ZW50LmpzJztcbmltcG9ydCBvbFNvdXJjZUltYWdlV01TIGZyb20gJ29sL3NvdXJjZS9JbWFnZVdNUy5qcyc7XG5leHBvcnQgdmFyIFF1ZXJlbnQgPSBmdW5jdGlvbiAoKSB7XG4gIFF1ZXJlbnQuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiJHFcIiwgXCJuZ2VvUnVsZUhlbHBlclwiLCBcIm5nZW9XTVNUaW1lXCJdO1xuXG4gIGZ1bmN0aW9uIFF1ZXJlbnQoJGh0dHAsICRxLCBuZ2VvUnVsZUhlbHBlciwgbmdlb1dNU1RpbWUpIHtcbiAgICB0aGlzLmh0dHBfID0gJGh0dHA7XG4gICAgdGhpcy5xXyA9ICRxO1xuICAgIHRoaXMubmdlb1J1bGVIZWxwZXJfID0gbmdlb1J1bGVIZWxwZXI7XG4gICAgdGhpcy5uZ2VvV01TVGltZV8gPSBuZ2VvV01TVGltZTtcbiAgICB0aGlzLnJlcXVlc3RDYW5jZWxlcnNfID0gW107XG4gICAgdGhpcy53bXNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc18gPSB7fTtcbiAgICB0aGlzLndtdHNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc18gPSB7fTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBRdWVyZW50LnByb3RvdHlwZTtcblxuICBfcHJvdG8uaXNzdWUgPSBmdW5jdGlvbiBpc3N1ZShvcHRpb25zKSB7XG4gICAgdmFyIHByb21pc2VzID0gW107XG4gICAgdmFyIG1hcCA9IG9wdGlvbnMubWFwO1xuICAgIHRoaXMuY2FuY2VsU3RpbGxSdW5uaW5nUmVxdWVzdHNfKCk7XG4gICAgdmFyIHF1ZXJ5YWJsZURhdGFTb3VyY2VzO1xuXG4gICAgaWYgKG9wdGlvbnMucXVlcnlhYmxlRGF0YVNvdXJjZXMpIHtcbiAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzID0gb3B0aW9ucy5xdWVyeWFibGVEYXRhU291cmNlcztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRhdGFTb3VyY2VzID0gb3B0aW9ucy5kYXRhU291cmNlcztcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGRhdGFTb3VyY2VzLCAnRGF0YVNvdXJjZXMgc2hvdWxkIGJlIHNldCcpO1xuICAgICAgcXVlcnlhYmxlRGF0YVNvdXJjZXMgPSB0aGlzLmdldFF1ZXJ5YWJsZURhdGFTb3VyY2VzKGRhdGFTb3VyY2VzLCBtYXApO1xuICAgIH1cblxuICAgIHZhciBjb21iaW5lZFdGU0RhdGFTb3VyY2VzID0gdGhpcy5nZXRDb21iaW5hYmxlV0ZTRGF0YVNvdXJjZXNfKHF1ZXJ5YWJsZURhdGFTb3VyY2VzLndmcyk7XG4gICAgcHJvbWlzZXMucHVzaCh0aGlzLmlzc3VlQ29tYmluZWRXRlNfKGNvbWJpbmVkV0ZTRGF0YVNvdXJjZXMsIG9wdGlvbnMpKTtcbiAgICB2YXIgY29vcmRpbmF0ZSA9IG9wdGlvbnMuY29vcmRpbmF0ZTtcblxuICAgIGlmIChjb29yZGluYXRlKSB7XG4gICAgICB2YXIgY29tYmluZWRXTVNEYXRhU291cmNlcyA9IHRoaXMuZ2V0Q29tYmluYWJsZVdNU0RhdGFTb3VyY2VzXyhxdWVyeWFibGVEYXRhU291cmNlcy53bXMpO1xuICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmlzc3VlQ29tYmluZWRXTVNfKGNvbWJpbmVkV01TRGF0YVNvdXJjZXMsIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5xXy5hbGwocHJvbWlzZXMpLnRoZW4oaGFuZGxlQ29tYmluZWRRdWVyeVJlc3VsdF8pO1xuICB9O1xuXG4gIF9wcm90by5nZXRRdWVyeWFibGVEYXRhU291cmNlcyA9IGZ1bmN0aW9uIGdldFF1ZXJ5YWJsZURhdGFTb3VyY2VzKGRhdGFTb3VyY2VzLCBtYXApIHtcbiAgICB2YXIgcXVlcnlhYmxlRGF0YVNvdXJjZXMgPSB7XG4gICAgICB3ZnM6IFtdLFxuICAgICAgd21zOiBbXVxuICAgIH07XG4gICAgdmFyIHJlc29sdXRpb24gPSBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcblxuICAgIGlmIChyZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXNvbHV0aW9uJyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShkYXRhU291cmNlcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICBpZiAoIXRoaXMuaXNEYXRhU291cmNlUXVlcnlhYmxlXyhkYXRhU291cmNlLCByZXNvbHV0aW9uKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQykge1xuICAgICAgICBpZiAoZGF0YVNvdXJjZS5zdXBwb3J0c1dGUykge1xuICAgICAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzLndmcy5wdXNoKGRhdGFTb3VyY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzLndtcy5wdXNoKGRhdGFTb3VyY2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5YWJsZURhdGFTb3VyY2VzO1xuICB9O1xuXG4gIF9wcm90by53ZnNEZXNjcmliZUZlYXR1cmVUeXBlID0gZnVuY3Rpb24gd2ZzRGVzY3JpYmVGZWF0dXJlVHlwZShkYXRhU291cmNlKSB7XG4gICAgaWYgKCFkYXRhU291cmNlLnN1cHBvcnRzQXR0cmlidXRlcykge1xuICAgICAgdGhyb3cgXCJUaGUgZGF0YSBzb3VyY2UgbXVzdCBzdXBwb3J0IFdGUywgaGF2ZSBhIHNpbmdsZSBPR0NMYXllciB0aGF0XFxuICAgICAgaXMgcXVlcnlhYmxlIGluIG9yZGVyIHRvIGlzc3VlIFdGUyBEZXNjcmliZUZlYXR1cmVUeXBlIHJlcXVlc3RzXCI7XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhU291cmNlLndmc1VybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFdGUyBVUkwnKTtcbiAgICB9XG5cbiAgICB2YXIgd2ZzTGF5ZXJOYW1lcyA9IGRhdGFTb3VyY2UuZ2V0V0ZTTGF5ZXJOYW1lcygpO1xuICAgIHZhciB1cmwgPSBvbFVyaUFwcGVuZFBhcmFtcyhkYXRhU291cmNlLndmc1VybCwge1xuICAgICAgJ1JFUVVFU1QnOiAnRGVzY3JpYmVGZWF0dXJlVHlwZScsXG4gICAgICAnU0VSVklDRSc6ICdXRlMnLFxuICAgICAgJ1ZFUlNJT04nOiAnMi4wLjAnLFxuICAgICAgJ1RZUEVOQU1FJzogd2ZzTGF5ZXJOYW1lc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmh0dHBfLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgZm9ybWF0ID0gbmV3IG5nZW9XRlNEZXNjcmliZUZlYXR1cmVUeXBlKCk7XG4gICAgICByZXR1cm4gZm9ybWF0LnJlYWQocmVzcG9uc2UuZGF0YSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLndtc0ZpbmRMYXllckNhcGFiaWxpdHkgPSBmdW5jdGlvbiB3bXNGaW5kTGF5ZXJDYXBhYmlsaXR5KGxheWVyQ2FwYWJpbGl0aWVzLCBsYXllck5hbWUpIHtcbiAgICB2YXIgZm91bmQgPSBudWxsO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobGF5ZXJDYXBhYmlsaXRpZXMpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgdmFyIGxheWVyQ2FwYWJpbGl0eSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgaWYgKGxheWVyQ2FwYWJpbGl0eS5OYW1lID09PSBsYXllck5hbWUpIHtcbiAgICAgICAgZm91bmQgPSBsYXllckNhcGFiaWxpdHk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChsYXllckNhcGFiaWxpdHkuTGF5ZXIpIHtcbiAgICAgICAgZm91bmQgPSB0aGlzLndtc0ZpbmRMYXllckNhcGFiaWxpdHkobGF5ZXJDYXBhYmlsaXR5LkxheWVyLCBsYXllck5hbWUpO1xuXG4gICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9O1xuXG4gIF9wcm90by53bXNHZXRDYXBhYmlsaXRpZXMgPSBmdW5jdGlvbiB3bXNHZXRDYXBhYmlsaXRpZXMoYmFzZVVybCwgb3B0X2NhY2hlKSB7XG4gICAgdmFyIGNhY2hlID0gb3B0X2NhY2hlICE9PSBmYWxzZTtcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgJ1JFUVVFU1QnOiAnR2V0Q2FwYWJpbGl0aWVzJyxcbiAgICAgICdTRVJWSUNFJzogJ1dNUycsXG4gICAgICAnVkVSU0lPTic6ICcxLjMuMCdcbiAgICB9O1xuICAgIHZhciB1cmwgPSBvbFVyaUFwcGVuZFBhcmFtcyhiYXNlVXJsLCBwYXJhbXMpO1xuICAgIHZhciBwcm9taXNlO1xuXG4gICAgaWYgKCFjYWNoZSB8fCAhdGhpcy53bXNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc19bYmFzZVVybF0pIHtcbiAgICAgIHByb21pc2UgPSB0aGlzLmh0dHBfLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSBuZXcgb2xGb3JtYXRXTVNDYXBhYmlsaXRpZXMoKTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdC5yZWFkKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYWNoZSAmJiB0aGlzLndtc0dldENhcGFiaWxpdGllc1Byb21pc2VzX1tiYXNlVXJsXSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMud21zR2V0Q2FwYWJpbGl0aWVzUHJvbWlzZXNfW2Jhc2VVcmxdO1xuICAgIH1cblxuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb21pc2UnKTtcbiAgICB9XG5cbiAgICBpZiAoY2FjaGUgJiYgIXRoaXMud21zR2V0Q2FwYWJpbGl0aWVzUHJvbWlzZXNfW2Jhc2VVcmxdKSB7XG4gICAgICB0aGlzLndtc0dldENhcGFiaWxpdGllc1Byb21pc2VzX1tiYXNlVXJsXSA9IHByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG5cbiAgX3Byb3RvLndtdHNGaW5kTGF5ZXJDYXBhYmlsaXR5ID0gZnVuY3Rpb24gd210c0ZpbmRMYXllckNhcGFiaWxpdHkobGF5ZXJDYXBhYmlsaXRpZXMsIGxheWVyTmFtZSkge1xuICAgIHZhciBmb3VuZCA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllckNhcGFiaWxpdGllcyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgbGF5ZXJDYXBhYmlsaXR5ID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICBpZiAobGF5ZXJDYXBhYmlsaXR5LklkZW50aWZpZXIgPT09IGxheWVyTmFtZSkge1xuICAgICAgICBmb3VuZCA9IGxheWVyQ2FwYWJpbGl0eTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9O1xuXG4gIF9wcm90by53bXRzR2V0Q2FwYWJpbGl0aWVzID0gZnVuY3Rpb24gd210c0dldENhcGFiaWxpdGllcyh1cmwsIG9wdF9jYWNoZSkge1xuICAgIHZhciBjYWNoZSA9IG9wdF9jYWNoZSAhPT0gZmFsc2U7XG4gICAgdmFyIHByb21pc2U7XG5cbiAgICBpZiAoIWNhY2hlIHx8ICF0aGlzLndtdHNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc19bdXJsXSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMuaHR0cF8uZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGZvcm1hdCA9IG5ldyBvbEZvcm1hdFdNVFNDYXBhYmlsaXRpZXMoKTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdC5yZWFkKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYWNoZSAmJiB0aGlzLndtdHNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc19bdXJsXSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMud210c0dldENhcGFiaWxpdGllc1Byb21pc2VzX1t1cmxdO1xuICAgIH1cblxuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb21pc2UnKTtcbiAgICB9XG5cbiAgICBpZiAoY2FjaGUgJiYgIXRoaXMud210c0dldENhcGFiaWxpdGllc1Byb21pc2VzX1t1cmxdKSB7XG4gICAgICB0aGlzLndtdHNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc19bdXJsXSA9IHByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVdGU1F1ZXJ5UmVzdWx0XyA9IGZ1bmN0aW9uIGhhbmRsZVdGU1F1ZXJ5UmVzdWx0XyhkYXRhU291cmNlcywgbWF4RmVhdHVyZXMsIHRvdGFsRmVhdHVyZUNvdW50LCB3ZnMsIHJlc3BvbnNlKSB7XG4gICAgdmFyIGhhc2ggPSB7fTtcbiAgICB2YXIgZm9ybWF0V0ZTID0gbmV3IG9sRm9ybWF0V0ZTKCk7XG4gICAgdmFyIGxpbWl0ID0gZm9ybWF0V0ZTLnJlYWRGZWF0dXJlcyhyZXNwb25zZS5kYXRhKS5sZW5ndGg7XG4gICAgdmFyIHRvb01hbnlGZWF0dXJlcyA9IHRvdGFsRmVhdHVyZUNvdW50ID4gbGltaXQ7XG4gICAgdmFyIGRhdGFzb3VyY2VOYW1lcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZGF0YVNvdXJjZXMpLCBfc3RlcDQ7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNCgpKS5kb25lOykge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcDQudmFsdWU7XG4gICAgICB2YXIgZGF0YVNvdXJjZUlkID0gZGF0YVNvdXJjZS5pZDtcbiAgICAgIGRhdGFzb3VyY2VOYW1lcy5wdXNoKGRhdGFTb3VyY2UubmFtZSk7XG4gICAgICB2YXIgZmVhdHVyZXMgPSBkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VPR0MgPyB0aGlzLnJlYWRBbmRUeXBlRmVhdHVyZXNfKGRhdGFTb3VyY2UsIHJlc3BvbnNlLmRhdGEsIHdmcykgOiBbXTtcbiAgICAgIHRoaXMuc2V0VW5pcXVlSWRzXyhmZWF0dXJlcywgZGF0YVNvdXJjZS5pZCk7XG4gICAgICBoYXNoW2RhdGFTb3VyY2VJZF0gPSB7XG4gICAgICAgIGZlYXR1cmVzOiBmZWF0dXJlcyxcbiAgICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgICB0b29NYW55RmVhdHVyZXM6IHRvb01hbnlGZWF0dXJlcyxcbiAgICAgICAgdG90YWxGZWF0dXJlQ291bnQ6IHRvdGFsRmVhdHVyZUNvdW50XG4gICAgICB9O1xuICAgIH1cblxuICAgIE9iamVjdC52YWx1ZXMoaGFzaCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICB2YWx1ZS5saW1pdCA9IGxpbWl0O1xuICAgICAgdmFsdWUudG9vTWFueUZlYXR1cmVzID0gdG9vTWFueUZlYXR1cmVzO1xuICAgICAgdmFsdWUucmVxdWVzdFBhcnRuZXJzID0gZGF0YXNvdXJjZU5hbWVzO1xuICAgIH0pO1xuICAgIHJldHVybiBoYXNoO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVRdWVyeVJlc3VsdF8gPSBmdW5jdGlvbiBoYW5kbGVRdWVyeVJlc3VsdF8oZGF0YVNvdXJjZXMsIGxpbWl0LCB3ZnMsIHJlc3BvbnNlKSB7XG4gICAgdmFyIGhhc2ggPSB7fTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRhdGFTb3VyY2VzKSwgX3N0ZXA1OyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUoKSkuZG9uZTspIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gX3N0ZXA1LnZhbHVlO1xuICAgICAgdmFyIGRhdGFTb3VyY2VJZCA9IGRhdGFTb3VyY2UuaWQ7XG5cbiAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICB2YXIgdG9vTWFueUZlYXR1cmVzID0gdHJ1ZTtcbiAgICAgICAgdmFyIHRvdGFsRmVhdHVyZUNvdW50ID0gcmVzcG9uc2U7XG4gICAgICAgIHRoaXMuc2V0VW5pcXVlSWRzXyhmZWF0dXJlcywgZGF0YVNvdXJjZS5pZCk7XG4gICAgICAgIGhhc2hbZGF0YVNvdXJjZUlkXSA9IHtcbiAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZXMsXG4gICAgICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgICAgIHRvb01hbnlGZWF0dXJlczogdG9vTWFueUZlYXR1cmVzLFxuICAgICAgICAgIHRvdGFsRmVhdHVyZUNvdW50OiB0b3RhbEZlYXR1cmVDb3VudFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9mZWF0dXJlcyA9IGRhdGFTb3VyY2UgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQyA/IHRoaXMucmVhZEFuZFR5cGVGZWF0dXJlc18oZGF0YVNvdXJjZSwgcmVzcG9uc2UuZGF0YSwgd2ZzKSA6IFtdO1xuXG4gICAgICAgIHRoaXMuc2V0VW5pcXVlSWRzXyhfZmVhdHVyZXMsIGRhdGFTb3VyY2UuaWQpO1xuICAgICAgICBoYXNoW2RhdGFTb3VyY2VJZF0gPSB7XG4gICAgICAgICAgZmVhdHVyZXM6IF9mZWF0dXJlcyxcbiAgICAgICAgICBsaW1pdDogbGltaXRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaGFzaDtcbiAgfTtcblxuICBfcHJvdG8ucmVhZEFuZFR5cGVGZWF0dXJlc18gPSBmdW5jdGlvbiByZWFkQW5kVHlwZUZlYXR1cmVzXyhkYXRhU291cmNlLCBkYXRhLCB3ZnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgdmFyIHJlYWRGZWF0dXJlcztcbiAgICB2YXIgZmVhdHVyZVR5cGVzID0gdGhpcy5nZXRTZXRPbEZvcm1hdFR5cGVzXyhkYXRhU291cmNlLCB3ZnMpLnNsaWNlKCk7XG4gICAgZmVhdHVyZVR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIF90aGlzLmdldFNldE9sRm9ybWF0VHlwZXNfKGRhdGFTb3VyY2UsIHdmcywgW3R5cGVdKTtcblxuICAgICAgaWYgKHdmcykge1xuICAgICAgICBpZiAoIWRhdGFTb3VyY2Uud2ZzRm9ybWF0KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHdmc0Zvcm1hdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVhZEZlYXR1cmVzID0gZGF0YVNvdXJjZS53ZnNGb3JtYXQucmVhZEZlYXR1cmVzKGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFkYXRhU291cmNlLndtc0Zvcm1hdCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB3bXNGb3JtYXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlYWRGZWF0dXJlcyA9IGRhdGFTb3VyY2Uud21zRm9ybWF0LnJlYWRGZWF0dXJlcyhkYXRhKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlYWRGZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlYWRGZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgZmVhdHVyZS5zZXQoJ25nZW9fZmVhdHVyZV90eXBlXycsIHR5cGUpO1xuICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZ2V0U2V0T2xGb3JtYXRUeXBlc18oZGF0YVNvdXJjZSwgd2ZzLCBmZWF0dXJlVHlwZXMpO1xuICAgIHJldHVybiBmZWF0dXJlcztcbiAgfTtcblxuICBfcHJvdG8uZ2V0U2V0T2xGb3JtYXRUeXBlc18gPSBmdW5jdGlvbiBnZXRTZXRPbEZvcm1hdFR5cGVzXyhkYXRhU291cmNlLCB3ZnMsIG9wdF90eXBlcykge1xuICAgIHZhciB0eXBlcztcblxuICAgIGlmICh3ZnMpIHtcbiAgICAgIGlmICghZGF0YVNvdXJjZS53ZnNGb3JtYXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHdmc0Zvcm1hdCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0X3R5cGVzKSB7XG4gICAgICAgIGRhdGFTb3VyY2Uud2ZzRm9ybWF0LnNldEZlYXR1cmVUeXBlKG9wdF90eXBlcyk7XG4gICAgICB9XG5cbiAgICAgIHR5cGVzID0gZGF0YVNvdXJjZS53ZnNGb3JtYXQuZ2V0RmVhdHVyZVR5cGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFkYXRhU291cmNlLndtc0Zvcm1hdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgd21zRm9ybWF0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRfdHlwZXMpIHtcbiAgICAgICAgZGF0YVNvdXJjZS53bXNGb3JtYXQuc2V0TGF5ZXJzKG9wdF90eXBlcyk7XG4gICAgICB9XG5cbiAgICAgIHR5cGVzID0gZGF0YVNvdXJjZS53bXNGb3JtYXQuZ2V0TGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0eXBlcykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHR5cGVzKSA/IHR5cGVzIDogW3R5cGVzXTtcbiAgfTtcblxuICBfcHJvdG8uaXNzdWVDb21iaW5lZFdGU18gPSBmdW5jdGlvbiBpc3N1ZUNvbWJpbmVkV0ZTXyhjb21iaW5lZERhdGFTb3VyY2VzLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB2YXIgbWF4RmVhdHVyZXMgPSBvcHRpb25zLmxpbWl0O1xuICAgIHZhciBtYXAgPSBvcHRpb25zLm1hcDtcbiAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXcuZ2V0UHJvamVjdGlvbigpO1xuICAgIHZhciBzcnNOYW1lID0gcHJvamVjdGlvbi5nZXRDb2RlKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVzb2x1dGlvbicpO1xuICAgIH1cblxuICAgIHZhciBiYm94O1xuICAgIHZhciBjb29yZGluYXRlID0gb3B0aW9ucy5jb29yZGluYXRlO1xuXG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgIHZhciB0b2xlcmFuY2UgPSBvcHRpb25zLnRvbGVyYW5jZTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KHRvbGVyYW5jZSk7XG4gICAgICBiYm94ID0gb2xFeHRlbnQuYnVmZmVyKG9sRXh0ZW50LmNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZSksIHRvbGVyYW5jZSAqIHJlc29sdXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYm94ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgfVxuXG4gICAgdmFyIHdmc0Zvcm1hdCA9IG5ldyBvbEZvcm1hdFdGUygpO1xuICAgIHZhciB4bWxTZXJpYWxpemVyID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcbiAgICB2YXIgaGFzQXRMZWFzdE9uZVF1ZXJ5SWNvblBvc2l0aW9uID0gZmFsc2U7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHtcbiAgICAgIHZhciBkYXRhU291cmNlcyA9IF9zdGVwNi52YWx1ZTtcbiAgICAgIHZhciBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucyA9IG51bGw7XG4gICAgICB2YXIgZmVhdHVyZVR5cGVzTmFtZXMgPSBbXTtcbiAgICAgIHZhciBmZWF0dXJlVHlwZXNPYmplY3RzID0gW107XG4gICAgICB2YXIgdXJsID0gbnVsbDtcbiAgICAgIHZhciBwYXJhbXMgPSB7fTtcblxuICAgICAgaWYgKG9wdGlvbnMuYmJveEFzR0VUUGFyYW0gJiYgYmJveCkge1xuICAgICAgICBwYXJhbXMuYmJveCA9IGJib3guam9pbignLCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKCkge1xuICAgICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwNy52YWx1ZTtcbiAgICAgICAgdmFyIGN1cnJlbnRGZWF0dXJlVHlwZXNOYW1lcyA9IGRhdGFTb3VyY2UuZ2V0SW5SYW5nZVdGU0xheWVyTmFtZXMocmVzb2x1dGlvbiwgdHJ1ZSk7XG4gICAgICAgIHZhciBnZW9tZXRyeU5hbWUgPSBkYXRhU291cmNlLmdlb21ldHJ5TmFtZShjdXJyZW50RmVhdHVyZVR5cGVzTmFtZXNbMF0pO1xuXG4gICAgICAgIGlmICghZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMpIHtcbiAgICAgICAgICB2YXIgZmVhdHVyZU5TID0gZGF0YVNvdXJjZS53ZnNGZWF0dXJlTlM7XG4gICAgICAgICAgdmFyIGZlYXR1cmVQcmVmaXggPSBkYXRhU291cmNlLndmc0ZlYXR1cmVQcmVmaXg7XG4gICAgICAgICAgdmFyIG91dHB1dEZvcm1hdCA9IGRhdGFTb3VyY2Uud2ZzT3V0cHV0Rm9ybWF0O1xuXG4gICAgICAgICAgaWYgKCFnZW9tZXRyeU5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZW9tZXRyeU5hbWUnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGJib3g6IGJib3gsXG4gICAgICAgICAgICBmZWF0dXJlTlM6IGZlYXR1cmVOUyxcbiAgICAgICAgICAgIGZlYXR1cmVQcmVmaXg6IGZlYXR1cmVQcmVmaXgsXG4gICAgICAgICAgICBnZW9tZXRyeU5hbWU6IGdlb21ldHJ5TmFtZSxcbiAgICAgICAgICAgIG91dHB1dEZvcm1hdDogb3V0cHV0Rm9ybWF0LFxuICAgICAgICAgICAgc3JzTmFtZTogc3JzTmFtZSxcbiAgICAgICAgICAgIGZlYXR1cmVUeXBlczogW11cbiAgICAgICAgICB9O1xuICAgICAgICAgIHVybCA9IGRhdGFTb3VyY2Uud2ZzVXJsO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLCBkYXRhU291cmNlLmFjdGl2ZURpbWVuc2lvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZmVhdHVyZVR5cGVzTmFtZXMgPSBmZWF0dXJlVHlwZXNOYW1lcy5jb25jYXQoY3VycmVudEZlYXR1cmVUeXBlc05hbWVzKTtcbiAgICAgICAgdmFyIGZpbHRlciA9IG51bGw7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZmlsdGVyKSB7XG4gICAgICAgICAgZmlsdGVyID0gX3RoaXMyLm5nZW9SdWxlSGVscGVyXy5jcmVhdGVGaWx0ZXIoe1xuICAgICAgICAgICAgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSxcbiAgICAgICAgICAgIGZpbHRlcjogb3B0aW9ucy5maWx0ZXIsXG4gICAgICAgICAgICBpbmNEaW1lbnNpb25zOiB0cnVlLFxuICAgICAgICAgICAgaW5jVGltZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGFTb3VyY2UuZmlsdGVyUnVsZXMgJiYgZGF0YVNvdXJjZS5maWx0ZXJSdWxlcy5sZW5ndGggfHwgZGF0YVNvdXJjZS50aW1lUmFuZ2VWYWx1ZSB8fCBkYXRhU291cmNlLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnICYmIE9iamVjdC5rZXlzKGRhdGFTb3VyY2UuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydChkYXRhU291cmNlcy5sZW5ndGggPT09IDEgfHwgIShkYXRhU291cmNlLnRpbWVSYW5nZVZhbHVlIHx8IGRhdGFTb3VyY2UuZmlsdGVyUnVsZXMgJiYgZGF0YVNvdXJjZS5maWx0ZXJSdWxlcy5sZW5ndGgpLCBcIkEgZGF0YSBzb3VyY2UgaGF2aW5nIGZpbHRlclJ1bGVzIG9yIHRpbWVSYW5nZVZhbHVlIHNob3VsZCBpc3N1ZVxcbiAgICAgICAgICAgIGEgc2luZ2xlIHF1ZXJ5LCBhbG9uZS5cIik7XG4gICAgICAgICAgZmlsdGVyID0gX3RoaXMyLm5nZW9SdWxlSGVscGVyXy5jcmVhdGVGaWx0ZXIoe1xuICAgICAgICAgICAgZGF0YVNvdXJjZTogZGF0YVNvdXJjZSxcbiAgICAgICAgICAgIGluY0RpbWVuc2lvbnM6IHRydWUsXG4gICAgICAgICAgICBpbmNUaW1lOiB0cnVlLFxuICAgICAgICAgICAgc3JzTmFtZTogc3JzTmFtZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuZ2VvbWV0cnkpIHtcbiAgICAgICAgICB2YXIgc3BhdGlhbEZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmludGVyc2VjdHMoZ2VvbWV0cnlOYW1lLCBvcHRpb25zLmdlb21ldHJ5LCBzcnNOYW1lKTtcbiAgICAgICAgICBmaWx0ZXIgPSBfdGhpczIubmdlb1J1bGVIZWxwZXJfLmpvaW5GaWx0ZXJzKGZpbHRlciwgc3BhdGlhbEZpbHRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMuZmlsdGVyID0gZmlsdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgICB2YXIgcXVlcnlJY29uUG9zaXRpb247XG5cbiAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5xdWVyeUljb25Qb3NpdGlvbikge1xuICAgICAgICAgICAgaGFzQXRMZWFzdE9uZVF1ZXJ5SWNvblBvc2l0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIHF1ZXJ5SWNvblBvc2l0aW9uID0gX3RoaXMyLm1ha2VCYm94V2l0aFF1ZXJ5SWNvblBvc2l0aW9uXyhkYXRhU291cmNlLnF1ZXJ5SWNvblBvc2l0aW9uLCByZXNvbHV0aW9uLCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KHF1ZXJ5SWNvblBvc2l0aW9uICE9PSBudWxsLCAnQmFkIHF1ZXJ5SWNvblBvc2l0aW9uIHZhbHVlcycpO1xuICAgICAgICAgICAgcXVlcnlJY29uUG9zaXRpb24gPSBvbEV4dGVudC5leHRlbmQocXVlcnlJY29uUG9zaXRpb24sIGJib3gpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1cnJlbnRGZWF0dXJlVHlwZXNOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBmZWF0dXJlVHlwZXNPYmplY3RzLnB1c2goe1xuICAgICAgICAgICAgICBnZW9tZXRyeU5hbWU6IGdlb21ldHJ5TmFtZSxcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgYmJveDogcXVlcnlJY29uUG9zaXRpb24gfHwgYmJveFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRhdGFTb3VyY2VzKSwgX3N0ZXA3OyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcoKSkuZG9uZTspIHtcbiAgICAgICAgX2xvb3AyKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdldEZlYXR1cmVDb21tb25PcHRpb25zJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNBdExlYXN0T25lUXVlcnlJY29uUG9zaXRpb24pIHtcbiAgICAgICAgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMuZmVhdHVyZVR5cGVzID0gZmVhdHVyZVR5cGVzT2JqZWN0cztcbiAgICAgICAgZGVsZXRlIGdldEZlYXR1cmVDb21tb25PcHRpb25zLmJib3g7XG4gICAgICAgIGRlbGV0ZSBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucy5nZW9tZXRyeU5hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucy5mZWF0dXJlVHlwZXMgPSBmZWF0dXJlVHlwZXNOYW1lcztcbiAgICAgIH1cblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHVybCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZ2V0Q291bnRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIHJlc3VsdFR5cGU6ICdoaXRzJ1xuICAgICAgfSwgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMpO1xuICAgICAgdmFyIGZlYXR1cmVDb3VudFhtbCA9IHdmc0Zvcm1hdC53cml0ZUdldEZlYXR1cmUoZ2V0Q291bnRPcHRpb25zKTtcbiAgICAgIHZhciBmZWF0dXJlQ291bnRSZXF1ZXN0ID0geG1sU2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyhmZWF0dXJlQ291bnRYbWwpO1xuXG4gICAgICB2YXIgY2FuY2VsZXIgPSBfdGhpczIucmVnaXN0ZXJDYW5jZWxlcl8oKTtcblxuICAgICAgdmFyIGNvdW50UHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgX3RoaXMyLmh0dHBfLnBvc3QodXJsLCBmZWF0dXJlQ291bnRSZXF1ZXN0LCB7XG4gICAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3htbDsgY2hhcnNldD1VVEYtOCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVvdXQ6IGNhbmNlbGVyLnByb21pc2VcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBpZiAoIWRhdGFTb3VyY2VzWzBdLndmc0Zvcm1hdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHdmc0Zvcm1hdCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBtZXRhZGF0YSA9IGRhdGFTb3VyY2VzWzBdLndmc0Zvcm1hdC5yZWFkRmVhdHVyZUNvbGxlY3Rpb25NZXRhZGF0YShyZXNwb25zZS5kYXRhKTtcblxuICAgICAgICAgIGlmICghbWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZXRhZGF0YScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBudW1iZXJPZkZlYXR1cmVzID0gbWV0YWRhdGEubnVtYmVyT2ZGZWF0dXJlcztcbiAgICAgICAgICB2YXIgZ2V0RmVhdHVyZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIG1heEZlYXR1cmVzOiBtYXhGZWF0dXJlc1xuICAgICAgICAgIH0sIGdldEZlYXR1cmVDb21tb25PcHRpb25zKTtcbiAgICAgICAgICB2YXIgZmVhdHVyZVJlcXVlc3RYbWwgPSB3ZnNGb3JtYXQud3JpdGVHZXRGZWF0dXJlKGdldEZlYXR1cmVPcHRpb25zKTtcbiAgICAgICAgICB2YXIgZmVhdHVyZVJlcXVlc3QgPSB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKGZlYXR1cmVSZXF1ZXN0WG1sKTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBVUkwgdHlwZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBjYW5jZWxlciA9IF90aGlzMi5yZWdpc3RlckNhbmNlbGVyXygpO1xuXG4gICAgICAgICAgX3RoaXMyLmh0dHBfLnBvc3QodXJsLCBmZWF0dXJlUmVxdWVzdCwge1xuICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC94bWw7IGNoYXJzZXQ9VVRGLTgnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZW91dDogY2FuY2VsZXIucHJvbWlzZVxuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IF90aGlzMi5oYW5kbGVXRlNRdWVyeVJlc3VsdF8oZGF0YVNvdXJjZXMsIG1heEZlYXR1cmVzLCBudW1iZXJPZkZlYXR1cmVzLCB0cnVlLCByZXNwb25zZSk7XG5cbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBwcm9taXNlcy5wdXNoKGNvdW50UHJvbWlzZSk7XG4gICAgfTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGNvbWJpbmVkRGF0YVNvdXJjZXMpLCBfc3RlcDY7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNigpKS5kb25lOykge1xuICAgICAgX2xvb3AoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oaGFuZGxlQ29tYmluZWRRdWVyeVJlc3VsdF8pO1xuICB9O1xuXG4gIF9wcm90by5tYWtlQmJveFdpdGhRdWVyeUljb25Qb3NpdGlvbl8gPSBmdW5jdGlvbiBtYWtlQmJveFdpdGhRdWVyeUljb25Qb3NpdGlvbl8ocXVlcnlJY29uUG9zaXRpb24sIHJlc29sdXRpb24sIGNvb3JkaW5hdGUpIHtcbiAgICB2YXIgYmJveCA9IG9sRXh0ZW50LmNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZSk7XG4gICAgdmFyIGJ1ZmZlcnMgPSBxdWVyeUljb25Qb3NpdGlvbi5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgKiByZXNvbHV0aW9uO1xuICAgIH0pO1xuICAgIHZhciBsZW5ndGggPSBidWZmZXJzLmxlbmd0aDtcblxuICAgIGlmICghbGVuZ3RoIHx8IGxlbmd0aCA+IDQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChsZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBvbEV4dGVudC5idWZmZXIoYmJveCwgYnVmZmVyc1swXSk7XG4gICAgfVxuXG4gICAgdmFyIGZvdXJWYWx1ZXNCdWZmZXJzID0gW2J1ZmZlcnNbMF0sIGJ1ZmZlcnNbMV0sIGxlbmd0aCA9PT0gMiA/IGJ1ZmZlcnNbMF0gOiBidWZmZXJzWzJdLCBsZW5ndGggPT09IDQgPyBidWZmZXJzWzNdIDogYnVmZmVyc1sxXV07XG4gICAgcmV0dXJuIFtiYm94WzBdIC0gZm91clZhbHVlc0J1ZmZlcnNbMV0sIGJib3hbMV0gLSBmb3VyVmFsdWVzQnVmZmVyc1swXSwgYmJveFsyXSArIGZvdXJWYWx1ZXNCdWZmZXJzWzNdLCBiYm94WzNdICsgZm91clZhbHVlc0J1ZmZlcnNbMl1dO1xuICB9O1xuXG4gIF9wcm90by5pc3N1ZUNvbWJpbmVkV01TXyA9IGZ1bmN0aW9uIGlzc3VlQ29tYmluZWRXTVNfKGNvbWJpbmVkRGF0YVNvdXJjZXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB2YXIgRkVBVFVSRV9DT1VOVCA9IG9wdGlvbnMubGltaXQ7XG4gICAgdmFyIG1hcCA9IG9wdGlvbnMubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuICAgIHZhciBwcm9qZWN0aW9uID0gdmlldy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgdmFyIHByb2pDb2RlID0gcHJvamVjdGlvbi5nZXRDb2RlKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVzb2x1dGlvbicpO1xuICAgIH1cblxuICAgIHZhciBjb29yZGluYXRlID0gb3B0aW9ucy5jb29yZGluYXRlO1xuXG4gICAgaWYgKCFjb29yZGluYXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29vcmRpbmF0ZScpO1xuICAgIH1cblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGNvbWJpbmVkRGF0YVNvdXJjZXMpLCBfc3RlcDg7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOCgpKS5kb25lOykge1xuICAgICAgdmFyIGRhdGFTb3VyY2VzID0gX3N0ZXA4LnZhbHVlO1xuICAgICAgdmFyIHVybCA9IHZvaWQgMDtcbiAgICAgIHZhciBMQVlFUlMgPSBbXTtcbiAgICAgIHZhciBJTkZPX0ZPUk1BVCA9IHZvaWQgMDtcbiAgICAgIHZhciBhY3RpdmVEaW1lbnNpb25zU2V0ID0gZmFsc2U7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICB2YXIgZmlsdGVyU3RyaW5nID0gbnVsbDtcbiAgICAgIHZhciBmaWx0cmFibGVMYXllck5hbWUgPSBudWxsO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3I5ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShkYXRhU291cmNlcyksIF9zdGVwOTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5KCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBkYXRhU291cmNlID0gX3N0ZXA5LnZhbHVlO1xuXG4gICAgICAgIGlmICghSU5GT19GT1JNQVQpIHtcbiAgICAgICAgICBJTkZPX0ZPUk1BVCA9IGRhdGFTb3VyY2Uud21zSW5mb0Zvcm1hdDtcbiAgICAgICAgICB1cmwgPSBkYXRhU291cmNlLndtc1VybDtcbiAgICAgICAgfVxuXG4gICAgICAgIExBWUVSUyA9IExBWUVSUy5jb25jYXQoZGF0YVNvdXJjZS5nZXRXTVNMYXllck5hbWVzKHRydWUpKTtcblxuICAgICAgICBpZiAoIWFjdGl2ZURpbWVuc2lvbnNTZXQpIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgZGF0YVNvdXJjZS5hY3RpdmVEaW1lbnNpb25zKTtcbiAgICAgICAgICBhY3RpdmVEaW1lbnNpb25zU2V0ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhU291cmNlLmZpbHRlclJ1bGVzICYmIGRhdGFTb3VyY2UuZmlsdGVyUnVsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoZGF0YVNvdXJjZXMubGVuZ3RoID09PSAxKTtcbiAgICAgICAgICBmaWx0cmFibGVMYXllck5hbWUgPSBkYXRhU291cmNlLmdldEZpbHRyYWJsZVdGU0xheWVyTmFtZSgpO1xuICAgICAgICAgIGZpbHRlclN0cmluZyA9IHRoaXMubmdlb1J1bGVIZWxwZXJfLmNyZWF0ZUZpbHRlclN0cmluZyh7XG4gICAgICAgICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlLFxuICAgICAgICAgICAgc3JzTmFtZTogcHJvakNvZGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhU291cmNlLnRpbWVSYW5nZVZhbHVlICYmIGRhdGFTb3VyY2UudGltZVByb3BlcnR5KSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoZGF0YVNvdXJjZXMubGVuZ3RoID09PSAxKTtcbiAgICAgICAgICBwYXJhbXMuVElNRSA9IHRoaXMubmdlb1dNU1RpbWVfLmZvcm1hdFdNU1RpbWVQYXJhbShkYXRhU291cmNlLnRpbWVQcm9wZXJ0eSwgZGF0YVNvdXJjZS50aW1lUmFuZ2VWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcGFyYW1zLkxBWUVSUyA9IExBWUVSUztcbiAgICAgIHBhcmFtcy5RVUVSWV9MQVlFUlMgPSBMQVlFUlM7XG5cbiAgICAgIGlmIChmaWx0ZXJTdHJpbmcgJiYgZmlsdHJhYmxlTGF5ZXJOYW1lKSB7XG4gICAgICAgIHZhciBmaWx0ZXJQYXJhbVZhbHVlID0gbnVsbDtcblxuICAgICAgICBpZiAoTEFZRVJTLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGZpbHRlclBhcmFtVmFsdWUgPSBmaWx0ZXJTdHJpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGZpbHRlclBhcmFtVmFsdWVzID0gW107XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBMQVlFUlMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKExBWUVSU1tpXSA9PT0gZmlsdHJhYmxlTGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICAgIGZpbHRlclBhcmFtVmFsdWVzLnB1c2goXCIoXCIgKyBmaWx0ZXJTdHJpbmcgKyBcIilcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmaWx0ZXJQYXJhbVZhbHVlcy5wdXNoKCcoKScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZpbHRlclBhcmFtVmFsdWUgPSBmaWx0ZXJQYXJhbVZhbHVlcy5qb2luKCcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmFtcy5GSUxURVIgPSBmaWx0ZXJQYXJhbVZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdXJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB3bXNTb3VyY2UgPSBuZXcgb2xTb3VyY2VJbWFnZVdNUyh7XG4gICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgcHJvamVjdGlvbjogbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKClcbiAgICAgIH0pO1xuICAgICAgdmFyIHdtc0dldEZlYXR1cmVJbmZvVXJsID0gd21zU291cmNlLmdldEZlYXR1cmVJbmZvVXJsKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIHByb2pDb2RlLCB7XG4gICAgICAgICdGRUFUVVJFX0NPVU5UJzogRkVBVFVSRV9DT1VOVCxcbiAgICAgICAgJ0lORk9fRk9STUFUJzogSU5GT19GT1JNQVRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXdtc0dldEZlYXR1cmVJbmZvVXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB3bXNHZXRGZWF0dXJlSW5mb1VybCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2FuY2VsZXIgPSB0aGlzLnJlZ2lzdGVyQ2FuY2VsZXJfKCk7XG4gICAgICBwcm9taXNlcy5wdXNoKHRoaXMuaHR0cF8uZ2V0KHdtc0dldEZlYXR1cmVJbmZvVXJsLCB7XG4gICAgICAgIHRpbWVvdXQ6IGNhbmNlbGVyLnByb21pc2VcbiAgICAgIH0pLnRoZW4odGhpcy5oYW5kbGVRdWVyeVJlc3VsdF8uYmluZCh0aGlzLCBkYXRhU291cmNlcywgRkVBVFVSRV9DT1VOVCwgZmFsc2UpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucV8uYWxsKHByb21pc2VzKS50aGVuKGhhbmRsZUNvbWJpbmVkUXVlcnlSZXN1bHRfKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0Q29tYmluYWJsZVdGU0RhdGFTb3VyY2VzXyA9IGZ1bmN0aW9uIGdldENvbWJpbmFibGVXRlNEYXRhU291cmNlc18oZGF0YVNvdXJjZXMpIHtcbiAgICB2YXIgY29tYmluYWJsZURhdGFTb3VyY2VzID0gW107XG4gICAgdmFyIG5vdENvbWJpbmFibGVEYXRhU291cmNlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMTAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRhdGFTb3VyY2VzKSwgX3N0ZXAxMDsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAoKSkuZG9uZTspIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gX3N0ZXAxMC52YWx1ZTtcblxuICAgICAgaWYgKGRhdGFTb3VyY2UuY29tYmluYWJsZUZvcldGUykge1xuICAgICAgICB2YXIgY29tYmluZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoY29tYmluYWJsZURhdGFTb3VyY2VzKSwgX3N0ZXAxMTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgY29tYmluYWJsZURhdGFTb3VyY2UgPSBfc3RlcDExLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKGRhdGFTb3VyY2UuY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV0ZTKGNvbWJpbmFibGVEYXRhU291cmNlWzBdKSkge1xuICAgICAgICAgICAgY29tYmluYWJsZURhdGFTb3VyY2UucHVzaChkYXRhU291cmNlKTtcbiAgICAgICAgICAgIGNvbWJpbmVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbWJpbmVkKSB7XG4gICAgICAgICAgY29tYmluYWJsZURhdGFTb3VyY2VzLnB1c2goW2RhdGFTb3VyY2VdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm90Q29tYmluYWJsZURhdGFTb3VyY2VzLnB1c2goW2RhdGFTb3VyY2VdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29tYmluYWJsZURhdGFTb3VyY2VzLmNvbmNhdChub3RDb21iaW5hYmxlRGF0YVNvdXJjZXMpO1xuICB9O1xuXG4gIF9wcm90by5nZXRDb21iaW5hYmxlV01TRGF0YVNvdXJjZXNfID0gZnVuY3Rpb24gZ2V0Q29tYmluYWJsZVdNU0RhdGFTb3VyY2VzXyhkYXRhU291cmNlcykge1xuICAgIHZhciBjb21iaW5hYmxlRGF0YVNvdXJjZXMgPSBbXTtcbiAgICB2YXIgbm90Q29tYmluYWJsZURhdGFTb3VyY2VzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IxMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZGF0YVNvdXJjZXMpLCBfc3RlcDEyOyAhKF9zdGVwMTIgPSBfaXRlcmF0b3IxMigpKS5kb25lOykge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcDEyLnZhbHVlO1xuXG4gICAgICBpZiAoZGF0YVNvdXJjZS5jb21iaW5hYmxlRm9yV01TKSB7XG4gICAgICAgIHZhciBjb21iaW5lZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjEzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShjb21iaW5hYmxlRGF0YVNvdXJjZXMpLCBfc3RlcDEzOyAhKF9zdGVwMTMgPSBfaXRlcmF0b3IxMygpKS5kb25lOykge1xuICAgICAgICAgIHZhciBjb21iaW5hYmxlRGF0YVNvdXJjZSA9IF9zdGVwMTMudmFsdWU7XG5cbiAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jb21iaW5hYmxlV2l0aERhdGFTb3VyY2VGb3JXTVMoY29tYmluYWJsZURhdGFTb3VyY2VbMF0pKSB7XG4gICAgICAgICAgICBjb21iaW5hYmxlRGF0YVNvdXJjZS5wdXNoKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29tYmluZWQpIHtcbiAgICAgICAgICBjb21iaW5hYmxlRGF0YVNvdXJjZXMucHVzaChbZGF0YVNvdXJjZV0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RDb21iaW5hYmxlRGF0YVNvdXJjZXMucHVzaChbZGF0YVNvdXJjZV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb21iaW5hYmxlRGF0YVNvdXJjZXMuY29uY2F0KG5vdENvbWJpbmFibGVEYXRhU291cmNlcyk7XG4gIH07XG5cbiAgX3Byb3RvLmlzRGF0YVNvdXJjZVF1ZXJ5YWJsZV8gPSBmdW5jdGlvbiBpc0RhdGFTb3VyY2VRdWVyeWFibGVfKGRzLCByZXMpIHtcbiAgICB2YXIgcXVlcnlhYmxlID0gZHMudmlzaWJsZSAmJiBkcy5pblJhbmdlICYmIGRzLnF1ZXJ5YWJsZTtcblxuICAgIGlmIChxdWVyeWFibGUgJiYgZHMgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQyAmJiBkcy5zdXBwb3J0c1dGUykge1xuICAgICAgdmFyIG9nY0RTID0gZHM7XG4gICAgICBxdWVyeWFibGUgPSBvZ2NEUy5pc0FueU9HQ0xheWVySW5SYW5nZShyZXMsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBxdWVyeWFibGU7XG4gIH07XG5cbiAgX3Byb3RvLnNldFVuaXF1ZUlkc18gPSBmdW5jdGlvbiBzZXRVbmlxdWVJZHNfKGZlYXR1cmVzLCBkYXRhU291cmNlSWQpIHtcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICBpZiAoZmVhdHVyZS5nZXRJZCgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGlkID0gZGF0YVNvdXJjZUlkICsgXCJfXCIgKyBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGZlYXR1cmUuc2V0SWQoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5yZWdpc3RlckNhbmNlbGVyXyA9IGZ1bmN0aW9uIHJlZ2lzdGVyQ2FuY2VsZXJfKCkge1xuICAgIHZhciBjYW5jZWxlciA9IHRoaXMucV8uZGVmZXIoKTtcbiAgICB0aGlzLnJlcXVlc3RDYW5jZWxlcnNfLnB1c2goY2FuY2VsZXIpO1xuICAgIHJldHVybiBjYW5jZWxlcjtcbiAgfTtcblxuICBfcHJvdG8uY2FuY2VsU3RpbGxSdW5uaW5nUmVxdWVzdHNfID0gZnVuY3Rpb24gY2FuY2VsU3RpbGxSdW5uaW5nUmVxdWVzdHNfKCkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjE0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLnJlcXVlc3RDYW5jZWxlcnNfKSwgX3N0ZXAxNDsgIShfc3RlcDE0ID0gX2l0ZXJhdG9yMTQoKSkuZG9uZTspIHtcbiAgICAgIHZhciBjYW5jZWxlciA9IF9zdGVwMTQudmFsdWU7XG4gICAgICBjYW5jZWxlci5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXF1ZXN0Q2FuY2VsZXJzXy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIHJldHVybiBRdWVyZW50O1xufSgpO1xuXG5mdW5jdGlvbiBoYW5kbGVDb21iaW5lZFF1ZXJ5UmVzdWx0XyhyZXNwb25zZSkge1xuICB2YXIgY29tYmluZWRIYXNoID0ge307XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMTUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHJlc3BvbnNlKSwgX3N0ZXAxNTsgIShfc3RlcDE1ID0gX2l0ZXJhdG9yMTUoKSkuZG9uZTspIHtcbiAgICB2YXIgaGFzaCA9IF9zdGVwMTUudmFsdWU7XG5cbiAgICBmb3IgKHZhciBkYXRhU291cmNlSWRTdHIgaW4gaGFzaCkge1xuICAgICAgdmFyIGRhdGFTb3VyY2VJZCA9IE51bWJlcihkYXRhU291cmNlSWRTdHIpO1xuICAgICAgY29tYmluZWRIYXNoW2RhdGFTb3VyY2VJZF0gPSBoYXNoW2RhdGFTb3VyY2VJZF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbWJpbmVkSGFzaDtcbn1cblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9RdWVyZW50JywgW25nZW9GaWx0ZXJSdWxlSGVscGVyLm5hbWUsIG5nZW9NaXNjV01TVGltZS5uYW1lXSk7XG5teU1vZHVsZS5zZXJ2aWNlKCduZ2VvUXVlcmVudCcsIFF1ZXJlbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyB1bmxpc3RlbkJ5S2V5cyBhcyBuZ2VvRXZlbnRzVW5saXN0ZW5CeUtleXMgfSBmcm9tICduZ2VvL2V2ZW50cy5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5TW9kZSBmcm9tICduZ2VvL3F1ZXJ5L01vZGUuanMnO1xuaW1wb3J0IG5nZW9RdWVyeU1vZGVTZWxlY3RvciBmcm9tICduZ2VvL3F1ZXJ5L01vZGVTZWxlY3Rvci5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5TWFwUXVlcmVudCBmcm9tICduZ2VvL3F1ZXJ5L01hcFF1ZXJlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuIGFzIG9sRXZlbnRzTGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCB7IGFsd2F5cyBhcyBvbEV2ZW50c0NvbmRpdGlvbkFsd2F5cyB9IGZyb20gJ29sL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25EcmF3LCB7IGNyZWF0ZUJveCBhcyBvbEludGVyYWN0aW9uRHJhd0NyZWF0ZUJveCB9IGZyb20gJ29sL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuaW1wb3J0IHsgVmVjdG9yIGFzIG9sTGF5ZXJWZWN0b3IgfSBmcm9tICdvbC9sYXllci5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJ29sL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgeyBWZWN0b3IgYXMgb2xTb3VyY2VWZWN0b3IgfSBmcm9tICdvbC9zb3VyY2UuanMnO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9RdWVyeScsIFtuZ2VvUXVlcnlNb2RlU2VsZWN0b3IubmFtZSwgbmdlb1F1ZXJ5TWFwUXVlcmVudC5uYW1lXSk7XG5leHBvcnQgdmFyIFF1ZXJ5Q29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgUXVlcnlDb250cm9sbGVyLiRpbmplY3QgPSBbXCJuZ2VvTWFwUXVlcmVudFwiLCBcIm5nZW9RdWVyeU1vZGVTZWxlY3RvclwiLCBcIiRzY29wZVwiLCBcIm5nZW9RdWVyeU9wdGlvbnNcIl07XG5cbiAgZnVuY3Rpb24gUXVlcnlDb250cm9sbGVyKG5nZW9NYXBRdWVyZW50LCBuZ2VvUXVlcnlNb2RlU2VsZWN0b3IsICRzY29wZSwgbmdlb1F1ZXJ5T3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLmFjdGl2ZTtcbiAgICB0aGlzLmF1dG9jbGVhcjtcbiAgICB0aGlzLm1hcDtcbiAgICB0aGlzLm5nZW9NYXBRdWVyZW50XyA9IG5nZW9NYXBRdWVyZW50O1xuICAgIHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXyA9IG5nZW9RdWVyeU1vZGVTZWxlY3RvcjtcbiAgICB0aGlzLm5nZW9RdWVyeU9wdGlvbnNfID0gbmdlb1F1ZXJ5T3B0aW9ucztcbiAgICB0aGlzLnNjb3BlXyA9ICRzY29wZTtcbiAgICB0aGlzLnZlY3RvclNvdXJjZV8gPSBuZXcgb2xTb3VyY2VWZWN0b3Ioe1xuICAgICAgd3JhcFg6IGZhbHNlXG4gICAgfSk7XG4gICAgdGhpcy52ZWN0b3JMYXllcl8gPSBuZXcgb2xMYXllclZlY3Rvcih7XG4gICAgICBzb3VyY2U6IHRoaXMudmVjdG9yU291cmNlX1xuICAgIH0pO1xuICAgIHRoaXMuZHJhd0JveEludGVyYWN0aW9uXyA9IG5ldyBvbEludGVyYWN0aW9uRHJhdyh7XG4gICAgICBjb25kaXRpb246IG9sRXZlbnRzQ29uZGl0aW9uQWx3YXlzLFxuICAgICAgZ2VvbWV0cnlGdW5jdGlvbjogb2xJbnRlcmFjdGlvbkRyYXdDcmVhdGVCb3goKSxcbiAgICAgIHNvdXJjZTogdGhpcy52ZWN0b3JTb3VyY2VfLFxuICAgICAgc3RvcENsaWNrOiB0cnVlLFxuICAgICAgdHlwZTogJ0NpcmNsZSdcbiAgICB9KTtcbiAgICB0aGlzLmRyYXdQb2x5Z29uSW50ZXJhY3Rpb25fID0gbmV3IG9sSW50ZXJhY3Rpb25EcmF3KHtcbiAgICAgIGNvbmRpdGlvbjogb2xFdmVudHNDb25kaXRpb25BbHdheXMsXG4gICAgICBzb3VyY2U6IHRoaXMudmVjdG9yU291cmNlXyxcbiAgICAgIHN0b3BDbGljazogdHJ1ZSxcbiAgICAgIHR5cGU6ICdQb2x5Z29uJ1xuICAgIH0pO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgIHRoaXMubW9kZV8gPSBudWxsO1xuICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmFjdGl2ZTtcbiAgICB9LCB0aGlzLmhhbmRsZUFjdGl2ZUNoYW5nZV8uYmluZCh0aGlzKSk7XG4gICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBudWxsO1xuXG4gICAgICBpZiAoX3RoaXMuYWN0aXZlKSB7XG4gICAgICAgIHZhbHVlID0gX3RoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5tb2RlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSwgdGhpcy5lbmFibGVNb2RlXy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBRdWVyeUNvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by4kb25Jbml0ID0gZnVuY3Rpb24gJG9uSW5pdCgpIHtcbiAgICB0aGlzLmF1dG9jbGVhciA9ICEhdGhpcy5hdXRvY2xlYXI7XG4gIH07XG5cbiAgX3Byb3RvLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbiAkb25EZXN0cm95KCkge1xuICAgIHRoaXMuZW5hYmxlTW9kZV8obnVsbCk7XG4gIH07XG5cbiAgX3Byb3RvLmVuYWJsZU1vZGVfID0gZnVuY3Rpb24gZW5hYmxlTW9kZV8obW9kZSkge1xuICAgIHRoaXMuZGlzYWJsZU1vZGVfKCk7XG5cbiAgICBpZiAoIW1vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2Ugbmdlb1F1ZXJ5TW9kZS5DTElDSzpcbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2gob2xFdmVudHNMaXN0ZW4odGhpcy5tYXAsICdzaW5nbGVjbGljaycsIHRoaXMuaGFuZGxlTWFwQ2xpY2tfLCB0aGlzKSk7XG5cbiAgICAgICAgaWYgKHRoaXMubmdlb1F1ZXJ5T3B0aW9uc18uY3Vyc29ySG92ZXIpIHtcbiAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChvbEV2ZW50c0xpc3Rlbih0aGlzLm1hcCwgJ3BvaW50ZXJtb3ZlJywgdGhpcy5oYW5kbGVNYXBQb2ludGVyTW92ZV8sIHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIG5nZW9RdWVyeU1vZGUuRFJBV19CT1g6XG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMudmVjdG9yTGF5ZXJfKTtcbiAgICAgICAgdGhpcy5tYXAuYWRkSW50ZXJhY3Rpb24odGhpcy5kcmF3Qm94SW50ZXJhY3Rpb25fKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2gob2xFdmVudHNMaXN0ZW4odGhpcy5kcmF3Qm94SW50ZXJhY3Rpb25fLCAnZHJhd2VuZCcsIHRoaXMuaGFuZGxlRHJhd0JveEludGVyYWN0aW9uRHJhd0VuZF8sIHRoaXMpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb1F1ZXJ5TW9kZS5EUkFXX1BPTFlHT046XG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMudmVjdG9yTGF5ZXJfKTtcbiAgICAgICAgdGhpcy5tYXAuYWRkSW50ZXJhY3Rpb24odGhpcy5kcmF3UG9seWdvbkludGVyYWN0aW9uXyk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKG9sRXZlbnRzTGlzdGVuKHRoaXMuZHJhd1BvbHlnb25JbnRlcmFjdGlvbl8sICdkcmF3ZW5kJywgdGhpcy5oYW5kbGVEcmF3UG9seWdvbkludGVyYWN0aW9uRHJhd0VuZF8sIHRoaXMpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMubW9kZV8gPSBtb2RlO1xuICB9O1xuXG4gIF9wcm90by5kaXNhYmxlTW9kZV8gPSBmdW5jdGlvbiBkaXNhYmxlTW9kZV8oKSB7XG4gICAgaWYgKCF0aGlzLm1vZGVfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLm1vZGVfKSB7XG4gICAgICBjYXNlIG5nZW9RdWVyeU1vZGUuQ0xJQ0s6XG4gICAgICAgIGlmICh0aGlzLm5nZW9RdWVyeU9wdGlvbnNfLmN1cnNvckhvdmVyKSB7XG4gICAgICAgICAgdGhpcy5tYXAuZ2V0VGFyZ2V0RWxlbWVudCgpLnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb1F1ZXJ5TW9kZS5EUkFXX0JPWDpcbiAgICAgICAgdGhpcy52ZWN0b3JTb3VyY2VfLmNsZWFyKCk7XG4gICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMudmVjdG9yTGF5ZXJfKTtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlSW50ZXJhY3Rpb24odGhpcy5kcmF3Qm94SW50ZXJhY3Rpb25fKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb1F1ZXJ5TW9kZS5EUkFXX1BPTFlHT046XG4gICAgICAgIHRoaXMudmVjdG9yU291cmNlXy5jbGVhcigpO1xuICAgICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLnZlY3RvckxheWVyXyk7XG4gICAgICAgIHRoaXMubWFwLnJlbW92ZUludGVyYWN0aW9uKHRoaXMuZHJhd1BvbHlnb25JbnRlcmFjdGlvbl8pO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgbmdlb0V2ZW50c1VubGlzdGVuQnlLZXlzKHRoaXMubGlzdGVuZXJLZXlzXyk7XG4gICAgdGhpcy5tb2RlXyA9IG51bGw7XG4gIH07XG5cbiAgX3Byb3RvLmdldExpbWl0T3B0aW9uXyA9IGZ1bmN0aW9uIGdldExpbWl0T3B0aW9uXygpIHtcbiAgICByZXR1cm4gdGhpcy5uZ2VvUXVlcnlPcHRpb25zXyAmJiB0aGlzLm5nZW9RdWVyeU9wdGlvbnNfLmxpbWl0ID8gdGhpcy5uZ2VvUXVlcnlPcHRpb25zXy5saW1pdCA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlQWN0aXZlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUFjdGl2ZUNoYW5nZV8oYWN0aXZlKSB7XG4gICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgIGlmICh0aGlzLmF1dG9jbGVhcikge1xuICAgICAgICB0aGlzLm5nZW9NYXBRdWVyZW50Xy5jbGVhcigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRHJhd0JveEludGVyYWN0aW9uRHJhd0VuZF8gPSBmdW5jdGlvbiBoYW5kbGVEcmF3Qm94SW50ZXJhY3Rpb25EcmF3RW5kXyhldnQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBmZWF0dXJlID0gZXZ0LmZlYXR1cmU7XG4gICAgdmFyIGFjdGlvbiA9IHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5hY3Rpb247XG4gICAgdmFyIGV4dGVudCA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLmdldExpbWl0T3B0aW9uXygpO1xuICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcbiAgICB0aGlzLm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8ucGVuZGluZyA9IHRydWU7XG4gICAgdGhpcy5uZ2VvTWFwUXVlcmVudF8uaXNzdWUoe1xuICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIG1hcDogbWFwXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7fSkuY2F0Y2goZnVuY3Rpb24gKCkge30pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnZlY3RvclNvdXJjZV8uY2xlYXIoKTtcblxuICAgICAgX3RoaXMyLm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8ucGVuZGluZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEcmF3UG9seWdvbkludGVyYWN0aW9uRHJhd0VuZF8gPSBmdW5jdGlvbiBoYW5kbGVEcmF3UG9seWdvbkludGVyYWN0aW9uRHJhd0VuZF8oZXZ0KSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgZmVhdHVyZSA9IGV2dC5mZWF0dXJlO1xuICAgIHZhciBhY3Rpb24gPSB0aGlzLm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8uYWN0aW9uO1xuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICB2YXIgbGltaXQgPSB0aGlzLmdldExpbWl0T3B0aW9uXygpO1xuICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcbiAgICB0aGlzLm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8ucGVuZGluZyA9IHRydWU7XG4gICAgdGhpcy5uZ2VvTWFwUXVlcmVudF8uaXNzdWUoe1xuICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICBsaW1pdDogbGltaXQsXG4gICAgICBtYXA6IG1hcFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMy52ZWN0b3JTb3VyY2VfLmNsZWFyKCk7XG5cbiAgICAgIF90aGlzMy5uZ2VvUXVlcnlNb2RlU2VsZWN0b3JfLnBlbmRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWFwQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2tfKGV2dCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgaWYgKCEoZXZ0IGluc3RhbmNlb2YgTWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBhY3Rpb24gPSB0aGlzLm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8uYWN0aW9uO1xuICAgIHZhciBjb29yZGluYXRlID0gZXZ0LmNvb3JkaW5hdGU7XG4gICAgdmFyIG1hcCA9IHRoaXMubWFwO1xuICAgIHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5wZW5kaW5nID0gdHJ1ZTtcbiAgICB0aGlzLm5nZW9NYXBRdWVyZW50Xy5pc3N1ZSh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGNvb3JkaW5hdGU6IGNvb3JkaW5hdGUsXG4gICAgICBtYXA6IG1hcFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzNC5uZ2VvUXVlcnlNb2RlU2VsZWN0b3JfLnBlbmRpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWFwUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gaGFuZGxlTWFwUG9pbnRlck1vdmVfKGV2dCkge1xuICAgIGlmICghKGV2dCBpbnN0YW5jZW9mIE1hcEJyb3dzZXJFdmVudCkgfHwgZXZ0LmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBpeGVsID0gdGhpcy5tYXAuZ2V0RXZlbnRQaXhlbChldnQub3JpZ2luYWxFdmVudCk7XG5cbiAgICB2YXIgcXVlcnlhYmxlID0gZnVuY3Rpb24gcXVlcnlhYmxlKGxheWVyKSB7XG4gICAgICB2YXIgdmlzaWJsZSA9IGxheWVyLmdldCgndmlzaWJsZScpO1xuICAgICAgdmFyIHNvdXJjZWlkcyA9IGxheWVyLmdldCgncXVlcnlTb3VyY2VJZHMnKTtcbiAgICAgIHJldHVybiB2aXNpYmxlICYmICEhc291cmNlaWRzO1xuICAgIH07XG5cbiAgICB2YXIgaGl0ID0gdGhpcy5tYXAuZm9yRWFjaExheWVyQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSwge1xuICAgICAgbGF5ZXJGaWx0ZXI6IHF1ZXJ5YWJsZVxuICAgIH0pO1xuICAgIHRoaXMubWFwLmdldFRhcmdldEVsZW1lbnQoKS5zdHlsZS5jdXJzb3IgPSBoaXQgPyAncG9pbnRlcicgOiAnJztcbiAgfTtcblxuICByZXR1cm4gUXVlcnlDb250cm9sbGVyO1xufSgpO1xubXlNb2R1bGUuY29tcG9uZW50KCduZ2VvUXVlcnknLCB7XG4gIGJpbmRpbmdzOiB7XG4gICAgJ2FjdGl2ZSc6ICc9JyxcbiAgICAnYXV0b2NsZWFyJzogJz0/JyxcbiAgICAnbWFwJzogJzwnXG4gIH0sXG4gIGNvbnRyb2xsZXI6IFF1ZXJ5Q29udHJvbGxlclxufSk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlIGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZVR5cGUuanMnO1xuaW1wb3J0IG5nZW9SdWxlUnVsZSBmcm9tICduZ2VvL3J1bGUvUnVsZS5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfbmdlb1J1bGVSdWxlKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb1J1bGVSdWxlKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEU7XG4gICAgcmV0dXJuIF9uZ2VvUnVsZVJ1bGUuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvUnVsZVJ1bGUpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmltcG9ydCBuZ2VvUnVsZVJ1bGUgZnJvbSAnbmdlby9ydWxlL1J1bGUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHZW9KU09OIGZyb20gJ29sL2Zvcm1hdC9HZW9KU09OLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvUnVsZVJ1bGUpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9uZ2VvUnVsZVJ1bGUpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBvcHRpb25zLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5HRU9NRVRSWTtcbiAgICBfdGhpcyA9IF9uZ2VvUnVsZVJ1bGUuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0aW9ucy5mZWF0dXJlUHJvcGVydGllcyB8fCB7fTtcbiAgICBfdGhpcy5mZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUocHJvcGVydGllcyk7XG4gICAgX3RoaXMuZm9ybWF0XyA9IG5ldyBvbEZvcm1hdEdlb0pTT04oKTtcbiAgICBfdGhpcy51cGRhdGluZ0xpdGVyYWxfID0gZmFsc2U7XG4gICAgX3RoaXMudXBkYXRpbmdHZW9tZXRyeV8gPSBmYWxzZTtcbiAgICBfdGhpcy5nZW9tZXRyeUNoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG5cbiAgICBfdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4oX3RoaXMuZmVhdHVyZV8sIFwiY2hhbmdlOlwiICsgX3RoaXMuZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKSwgX3RoaXMuaGFuZGxlRmVhdHVyZUdlb21ldHJ5Q2hhbmdlXywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcblxuICAgIF90aGlzLnNldEdlb21ldHJ5RnJvbUxpdGVyYWxfKCk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5oYW5kbGVGZWF0dXJlR2VvbWV0cnlDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlRmVhdHVyZUdlb21ldHJ5Q2hhbmdlXygpIHtcbiAgICBpZiAodGhpcy51cGRhdGluZ0xpdGVyYWxfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGluZ0dlb21ldHJ5XyA9IHRydWU7XG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5mZWF0dXJlXy5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICB0aGlzLmxpdGVyYWxfID0gdGhpcy5mb3JtYXRfLndyaXRlR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxpdGVyYWxfID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnJlZ2lzdGVyR2VvbWV0cnlDaGFuZ2VfKCk7XG4gICAgdGhpcy51cGRhdGluZ0dlb21ldHJ5XyA9IGZhbHNlO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVHZW9tZXRyeUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVHZW9tZXRyeUNoYW5nZV8oZXZ0KSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gZXZ0LnRhcmdldDtcbiAgICB0aGlzLnVwZGF0aW5nR2VvbWV0cnlfID0gdHJ1ZTtcbiAgICB0aGlzLmxpdGVyYWxfID0gdGhpcy5mb3JtYXRfLndyaXRlR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgIHRoaXMudXBkYXRpbmdHZW9tZXRyeV8gPSBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8uc2V0R2VvbWV0cnlGcm9tTGl0ZXJhbF8gPSBmdW5jdGlvbiBzZXRHZW9tZXRyeUZyb21MaXRlcmFsXygpIHtcbiAgICB2YXIgZ2VvbWV0cnkgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgICAgdmFyIGxpdGVyYWwgPSBcIlwiICsgdGhpcy5saXRlcmFsO1xuICAgICAgZ2VvbWV0cnkgPSB0aGlzLmZvcm1hdF8ucmVhZEdlb21ldHJ5KGxpdGVyYWwpO1xuICAgIH1cblxuICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgfTtcblxuICBfcHJvdG8ucmVnaXN0ZXJHZW9tZXRyeUNoYW5nZV8gPSBmdW5jdGlvbiByZWdpc3Rlckdlb21ldHJ5Q2hhbmdlXygpIHtcbiAgICBpZiAodGhpcy5nZW9tZXRyeUNoYW5nZUxpc3RlbmVyS2V5XyAhPT0gbnVsbCkge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmdlb21ldHJ5Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMuZ2VvbWV0cnlDaGFuZ2VMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZmVhdHVyZV8uZ2V0R2VvbWV0cnkoKTtcblxuICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgdGhpcy5nZW9tZXRyeUNoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3RlbihnZW9tZXRyeSwgJ2NoYW5nZScsIHRoaXMuaGFuZGxlR2VvbWV0cnlDaGFuZ2VfLCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJmZWF0dXJlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5mZWF0dXJlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGl0ZXJhbFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbF87XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChsaXRlcmFsKSB7XG4gICAgICB0aGlzLnVwZGF0aW5nTGl0ZXJhbF8gPSB0cnVlO1xuICAgICAgdGhpcy5saXRlcmFsXyA9IGxpdGVyYWw7XG5cbiAgICAgIGlmICghdGhpcy51cGRhdGluZ0dlb21ldHJ5Xykge1xuICAgICAgICB0aGlzLnNldEdlb21ldHJ5RnJvbUxpdGVyYWxfKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVnaXN0ZXJHZW9tZXRyeUNoYW5nZV8oKTtcbiAgICAgIHRoaXMudXBkYXRpbmdMaXRlcmFsXyA9IGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZW9tZXRyeVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZV8uZ2V0R2VvbWV0cnkoKSB8fCBudWxsO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQoZ2VvbWV0cnkpIHtcbiAgICAgIHRoaXMuZmVhdHVyZV8uc2V0R2VvbWV0cnkoZ2VvbWV0cnkgfHwgdW5kZWZpbmVkKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9SdWxlUnVsZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCB7IHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuZXhwb3J0IHZhciBSdWxlT3BlcmF0b3JUeXBlID0ge1xuICBCRVRXRUVOOiAnLi4nLFxuICBFUVVBTF9UTzogJz0nLFxuICBHUkVBVEVSX1RIQU46ICc+JyxcbiAgR1JFQVRFUl9USEFOX09SX0VRVUFMX1RPOiAnPj0nLFxuICBMRVNTRVJfVEhBTjogJzwnLFxuICBMRVNTRVJfVEhBTl9PUl9FUVVBTF9UTzogJzw9JyxcbiAgTElLRTogJ34nLFxuICBOT1RfRVFVQUxfVE86ICchPSdcbn07XG5leHBvcnQgdmFyIFJ1bGVTcGF0aWFsT3BlcmF0b3JUeXBlID0ge1xuICBDT05UQUlOUzogJ2NvbnRhaW5zJyxcbiAgSU5URVJTRUNUUzogJ2ludGVyc2VjdHMnLFxuICBXSVRISU46ICd3aXRoaW4nXG59O1xuZXhwb3J0IHZhciBSdWxlVGVtcG9yYWxPcGVyYXRvclR5cGUgPSB7XG4gIEJFR0lOUzogJ3RpbWVfc3RhcnQnLFxuICBEVVJJTkc6ICd0aW1lX2R1cmluZycsXG4gIEVORFM6ICd0aW1lX2VuZCcsXG4gIEVRVUFMUzogJ3RpbWVfZXF1YWwnXG59O1xuXG52YXIgUnVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUnVsZShvcHRpb25zKSB7XG4gICAgdGhpcy5hY3RpdmUgPSBvcHRpb25zLmFjdGl2ZSA9PT0gdHJ1ZTtcbiAgICB0aGlzLmxpdGVyYWxfID0gb3B0aW9ucy5saXRlcmFsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxpdGVyYWwgOiBudWxsO1xuICAgIHRoaXMubG93ZXJCb3VuZGFyeSA9IG9wdGlvbnMubG93ZXJCb3VuZGFyeSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sb3dlckJvdW5kYXJ5IDogbnVsbDtcbiAgICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvciB8fCBudWxsO1xuICAgIHRoaXMudXBwZXJCb3VuZGFyeSA9IG9wdGlvbnMudXBwZXJCb3VuZGFyeSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51cHBlckJvdW5kYXJ5IDogbnVsbDtcbiAgICB0aGlzLmlzQ3VzdG9tXyA9IG9wdGlvbnMuaXNDdXN0b20gIT09IGZhbHNlO1xuICAgIHRoaXMubmFtZV8gPSBvcHRpb25zLm5hbWU7XG4gICAgdGhpcy5vcGVyYXRvcnNfID0gb3B0aW9ucy5vcGVyYXRvcnMgfHwgbnVsbDtcbiAgICB0aGlzLnByb3BlcnR5TmFtZV8gPSBvcHRpb25zLnByb3BlcnR5TmFtZTtcbiAgICB0aGlzLnR5cGVfID0gb3B0aW9ucy50eXBlO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzID0gW107XG4gIH1cblxuICB2YXIgX3Byb3RvID0gUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMubGl0ZXJhbCAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5saXRlcmFsID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb3dlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmxvd2VyQm91bmRhcnkgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVwcGVyQm91bmRhcnkgIT09IG51bGwpIHtcbiAgICAgIHRoaXMudXBwZXJCb3VuZGFyeSA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB0aGlzLmxpc3RlbmVyS2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFJ1bGUsIFt7XG4gICAga2V5OiBcImxpdGVyYWxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpdGVyYWxfO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobGl0ZXJhbCkge1xuICAgICAgdGhpcy5saXRlcmFsXyA9IGxpdGVyYWw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzQ3VzdG9tXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0N1c3RvbV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWVfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvcGVyYXRvcnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wZXJhdG9yc187XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb3BlcnR5TmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcGVydHlOYW1lXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMudHlwZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInZhbHVlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBudWxsO1xuICAgICAgdmFyIGxpdGVyYWwgPSB0aGlzLmxpdGVyYWw7XG4gICAgICB2YXIgbG93ZXJCb3VuZGFyeSA9IHRoaXMubG93ZXJCb3VuZGFyeTtcbiAgICAgIHZhciBvcGVyYXRvciA9IHRoaXMub3BlcmF0b3I7XG4gICAgICB2YXIgcHJvcGVydHlOYW1lID0gdGhpcy5wcm9wZXJ0eU5hbWU7XG4gICAgICB2YXIgdXBwZXJCb3VuZGFyeSA9IHRoaXMudXBwZXJCb3VuZGFyeTtcblxuICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gUnVsZU9wZXJhdG9yVHlwZS5CRVRXRUVOIHx8IG9wZXJhdG9yID09PSBSdWxlVGVtcG9yYWxPcGVyYXRvclR5cGUuRFVSSU5HKSB7XG4gICAgICAgICAgaWYgKGxvd2VyQm91bmRhcnkgIT09IG51bGwgJiYgdXBwZXJCb3VuZGFyeSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICAgICAgICAgICAgbG93ZXJCb3VuZGFyeTogbG93ZXJCb3VuZGFyeSxcbiAgICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsXG4gICAgICAgICAgICAgIHVwcGVyQm91bmRhcnk6IHVwcGVyQm91bmRhcnlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChsaXRlcmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgbGl0ZXJhbDogbGl0ZXJhbCxcbiAgICAgICAgICAgICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSdWxlO1xufSgpO1xuXG5leHBvcnQgeyBSdWxlIGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgbmdlb1J1bGVSdWxlLCB7IFJ1bGVPcGVyYXRvclR5cGUgfSBmcm9tICduZ2VvL3J1bGUvUnVsZS5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfbmdlb1J1bGVSdWxlKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb1J1bGVSdWxlKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgb3B0aW9ucy5vcGVyYXRvciA9IFJ1bGVPcGVyYXRvclR5cGUuRVFVQUxfVE87XG4gICAgb3B0aW9ucy50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuU0VMRUNUO1xuICAgIF90aGlzID0gX25nZW9SdWxlUnVsZS5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMuY2hvaWNlc18gPSBvcHRpb25zLmNob2ljZXM7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJjaG9pY2VzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaG9pY2VzXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VsZWN0ZWRDaG9pY2VzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgc2VsZWN0ZWRDaG9pY2VzO1xuXG4gICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgICAgIHNlbGVjdGVkQ2hvaWNlcyA9IHRoaXMubGl0ZXJhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkQ2hvaWNlcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZWN0ZWRDaG9pY2VzO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0obmdlb1J1bGVSdWxlKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgbmdlb1J1bGVSdWxlLCB7IFJ1bGVPcGVyYXRvclR5cGUgfSBmcm9tICduZ2VvL3J1bGUvUnVsZS5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfbmdlb1J1bGVSdWxlKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb1J1bGVSdWxlKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5vcGVyYXRvciA9IG9wdGlvbnMub3BlcmF0b3IgfHwgUnVsZU9wZXJhdG9yVHlwZS5MSUtFO1xuICAgIG9wdGlvbnMudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlRFWFQ7XG4gICAgcmV0dXJuIF9uZ2VvUnVsZVJ1bGUuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvUnVsZVJ1bGUpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgb2xGb3JtYXRHZW9KU09OIGZyb20gJ29sL2Zvcm1hdC9HZW9KU09OLmpzJztcbmltcG9ydCAnY29yZWpzLXR5cGVhaGVhZCc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2VvSlNPTkJsb29kaG91bmQodXJsLCBvcHRfZmlsdGVyLCBvcHRfZmVhdHVyZVByb2plY3Rpb24sIG9wdF9kYXRhUHJvamVjdGlvbiwgb3B0X29wdGlvbnMsIG9wdF9yZW1vdGVPcHRpb25zKSB7XG4gIHZhciBnZW9qc29uRm9ybWF0ID0gbmV3IG9sRm9ybWF0R2VvSlNPTigpO1xuICB2YXIgYmxvb2Rob3VuZE9wdGlvbnMgPSB7XG4gICAgcmVtb3RlOiB7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIHByZXBhcmU6IGZ1bmN0aW9uIHByZXBhcmUocXVlcnksIHNldHRpbmdzKSB7XG4gICAgICAgIGlmIChzZXR0aW5ncy51cmwpIHtcbiAgICAgICAgICBzZXR0aW5ncy51cmwgPSBzZXR0aW5ncy51cmwucmVwbGFjZSgnJVFVRVJZJywgcXVlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgfSxcbiAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gdHJhbnNmb3JtKHBhcnNlZFJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBmZWF0dXJlQ29sbGVjdGlvbiA9IHBhcnNlZFJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChvcHRfZmlsdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBmZWF0dXJlQ29sbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZUNvbGxlY3Rpb24uZmVhdHVyZXMuZmlsdGVyKG9wdF9maWx0ZXIpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZW9qc29uRm9ybWF0LnJlYWRGZWF0dXJlcyhmZWF0dXJlQ29sbGVjdGlvbiwge1xuICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBvcHRfZmVhdHVyZVByb2plY3Rpb24sXG4gICAgICAgICAgZGF0YVByb2plY3Rpb246IG9wdF9kYXRhUHJvamVjdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdHVtVG9rZW5pemVyOiBmdW5jdGlvbiBkYXR1bVRva2VuaXplcihkYXR1bSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgcXVlcnlUb2tlbml6ZXI6IEJsb29kaG91bmQudG9rZW5pemVycy53aGl0ZXNwYWNlXG4gIH07XG4gIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0X29wdGlvbnMgfHwge1xuICAgIGRhdHVtVG9rZW5pemVyOiBmdW5jdGlvbiBkYXR1bVRva2VuaXplcihkYXR1bSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH0sXG4gICAgcXVlcnlUb2tlbml6ZXI6IEJsb29kaG91bmQudG9rZW5pemVycy53aGl0ZXNwYWNlXG4gIH0pO1xuICB2YXIgcmVtb3RlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdF9yZW1vdGVPcHRpb25zIHx8IHt9KTtcblxuICBpZiAob3B0aW9ucy5yZW1vdGUpIHtcbiAgICBPYmplY3QuYXNzaWduKHJlbW90ZU9wdGlvbnMsIG9wdGlvbnMucmVtb3RlKTtcbiAgICBkZWxldGUgb3B0aW9ucy5yZW1vdGU7XG4gIH1cblxuICBPYmplY3QuYXNzaWduKGJsb29kaG91bmRPcHRpb25zLCBvcHRpb25zKTtcbiAgT2JqZWN0LmFzc2lnbihibG9vZGhvdW5kT3B0aW9ucy5yZW1vdGUsIHJlbW90ZU9wdGlvbnMpO1xuICByZXR1cm4gbmV3IEJsb29kaG91bmQoYmxvb2Rob3VuZE9wdGlvbnMpO1xufVxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9TZWFyY2hDcmVhdGVnZW9qc29uYmxvb2Rob3VuZCcsIFtdKTtcbm15TW9kdWxlLnZhbHVlKCduZ2VvU2VhcmNoQ3JlYXRlR2VvSlNPTkJsb29kaG91bmQnLCBjcmVhdGVHZW9KU09OQmxvb2Rob3VuZCk7XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCAqIGFzIG9sUHJvaiBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBFUFNHMjE3ODEgZnJvbSAnQGdlb2Jsb2Nrcy9wcm9qL0VQU0dfMjE3ODEuanMnO1xuaW1wb3J0IG9sR2VvbVBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCAnY29yZWpzLXR5cGVhaGVhZCc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kKG9wdF9vcHRpb25zKSB7XG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gb2xQcm9qLmdldChFUFNHMjE3ODEpO1xuICB2YXIgdGFyZ2V0UHJvamVjdGlvbiA9IG9wdGlvbnMudGFyZ2V0UHJvamVjdGlvbjtcblxuICB2YXIgcGFyc2VCYm94ID0gZnVuY3Rpb24gcGFyc2VCYm94KGJib3gpIHtcbiAgICB2YXIgcmVnZXggPSAvQk9YXFwoKC4qPykgKC4qPyksKC4qPykgKC4qPylcXCkvZztcbiAgICB2YXIgbWF0Y2ggPSByZWdleC5leGVjKGJib3gpO1xuXG4gICAgaWYgKG1hdGNoICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gW3BhcnNlRmxvYXQobWF0Y2hbMV0pLCBwYXJzZUZsb2F0KG1hdGNoWzJdKSwgcGFyc2VGbG9hdChtYXRjaFszXSksIHBhcnNlRmxvYXQobWF0Y2hbNF0pXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZW1vdmVIdG1sVGFncyA9IGZ1bmN0aW9uIHJlbW92ZUh0bWxUYWdzKGxhYmVsKSB7XG4gICAgcmV0dXJuIGxhYmVsLnJlcGxhY2UoLzxcXC8/W2liXT4vZywgJycpO1xuICB9O1xuXG4gIHZhciBleHRyYWN0TmFtZSA9IGZ1bmN0aW9uIGV4dHJhY3ROYW1lKGxhYmVsKSB7XG4gICAgdmFyIHJlZ2V4ID0gLzxiPiguKj8pPFxcL2I+L2c7XG4gICAgdmFyIG1hdGNoID0gcmVnZXguZXhlYyhsYWJlbCk7XG5cbiAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxhYmVsO1xuICAgIH1cbiAgfTtcblxuICB2YXIgYmxvb2Rob3VuZE9wdGlvbnMgPSB7XG4gICAgcmVtb3RlOiB7XG4gICAgICB1cmw6ICdodHRwczovL2FwaTMuZ2VvLmFkbWluLmNoL3Jlc3Qvc2VydmljZXMvYXBpL1NlYXJjaFNlcnZlcj90eXBlPWxvY2F0aW9ucyZzZWFyY2hUZXh0PSVRVUVSWScsXG4gICAgICBwcmVwYXJlOiBmdW5jdGlvbiBwcmVwYXJlKHF1ZXJ5LCBzZXR0aW5ncykge1xuICAgICAgICBpZiAoc2V0dGluZ3MudXJsKSB7XG4gICAgICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsLnJlcGxhY2UoJyVRVUVSWScsIHF1ZXJ5KTtcblxuICAgICAgICAgIGlmIChvcHRpb25zLmxpbWl0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldHRpbmdzLnVybCArPSBcIiZsaW1pdD1cIiArIG9wdGlvbnMubGltaXQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXR0aW5ncy51cmwgKz0gXCImb3JpZ2lucz1cIiArIG9wdGlvbnMub3JpZ2lucztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucy5wcmVwYXJlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZXBhcmUocXVlcnksIHNldHRpbmdzKSA6IHNldHRpbmdzO1xuICAgICAgfSxcbiAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gdHJhbnNmb3JtKHBhcnNlZFJlc3BvbnNlXykge1xuICAgICAgICB2YXIgcGFyc2VkUmVzcG9uc2UgPSBwYXJzZWRSZXNwb25zZV87XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkUmVzcG9uc2UpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBwYXJzZWRSZXNwb25zZSB0eXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmVhdHVyZXMgPSBwYXJzZWRSZXNwb25zZS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgdmFyIGF0dHJzID0gcmVzdWx0LmF0dHJzO1xuICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBvbEdlb21Qb2ludChbYXR0cnMueSwgYXR0cnMueF0pO1xuICAgICAgICAgIHZhciBiYm94ID0gcGFyc2VCYm94KGF0dHJzLmdlb21fc3RfYm94MmQpO1xuXG4gICAgICAgICAgaWYgKHRhcmdldFByb2plY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcG9pbnQudHJhbnNmb3JtKHNvdXJjZVByb2plY3Rpb24sIHRhcmdldFByb2plY3Rpb24pO1xuXG4gICAgICAgICAgICBpZiAoYmJveCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBiYm94ID0gb2xQcm9qLnRyYW5zZm9ybUV4dGVudChiYm94LCBzb3VyY2VQcm9qZWN0aW9uLCB0YXJnZXRQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhdHRycy5nZW9tZXRyeSA9IHBvaW50O1xuICAgICAgICAgIGF0dHJzLmJib3ggPSBiYm94O1xuICAgICAgICAgIHZhciBsYWJlbCA9IGF0dHJzLmxhYmVsO1xuICAgICAgICAgIGF0dHJzLmxhYmVsX25vX2h0bWwgPSByZW1vdmVIdG1sVGFncyhsYWJlbCk7XG4gICAgICAgICAgYXR0cnMubGFiZWxfc2ltcGxlID0gZXh0cmFjdE5hbWUobGFiZWwpO1xuICAgICAgICAgIHZhciBmZWF0dXJlID0gbmV3IG9sRmVhdHVyZShhdHRycyk7XG4gICAgICAgICAgZmVhdHVyZS5zZXRJZChhdHRycy5mZWF0dXJlSWQpO1xuICAgICAgICAgIHJldHVybiBmZWF0dXJlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0dW1Ub2tlbml6ZXI6IGZ1bmN0aW9uIGRhdHVtVG9rZW5pemVyKGRhdHVtKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcbiAgfTtcbiAgdmFyIGJoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMub3B0aW9ucyB8fCB7XG4gICAgZGF0dW1Ub2tlbml6ZXI6IGZ1bmN0aW9uIGRhdHVtVG9rZW5pemVyKGRhdHVtKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcbiAgfSk7XG4gIHZhciByZW1vdGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucy5yZW1vdGVPcHRpb25zIHx8IHt9KTtcblxuICBpZiAoYmhPcHRpb25zLnJlbW90ZSkge1xuICAgIE9iamVjdC5hc3NpZ24ocmVtb3RlT3B0aW9ucywgYmhPcHRpb25zLnJlbW90ZSk7XG4gICAgZGVsZXRlIGJoT3B0aW9ucy5yZW1vdGU7XG4gIH1cblxuICBPYmplY3QuYXNzaWduKGJsb29kaG91bmRPcHRpb25zLCBiaE9wdGlvbnMpO1xuICBPYmplY3QuYXNzaWduKGJsb29kaG91bmRPcHRpb25zLnJlbW90ZSwgcmVtb3RlT3B0aW9ucyk7XG4gIHJldHVybiBuZXcgQmxvb2Rob3VuZChibG9vZGhvdW5kT3B0aW9ucyk7XG59XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0NyZWF0ZUxvY2F0aW9uU2VhcmNoQmxvb2Rob3VuZCcsIFtdKTtcbm15TW9kdWxlLnZhbHVlKCduZ2VvQ3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kJywgY3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kKTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMb2NhdGlvblNlYXJjaEJsb29kaG91bmRGdW5jdGlvbigpIHt9XG5leHBvcnQgZGVmYXVsdCBteU1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvU2VhcmNoU2VhcmNoRGlyZWN0aXZlIGZyb20gJ25nZW8vc2VhcmNoL3NlYXJjaERpcmVjdGl2ZS5qcyc7XG5pbXBvcnQgbmdlb1NlYXJjaENyZWF0ZUdlb0pTT05CbG9vZGhvdW5kIGZyb20gJ25nZW8vc2VhcmNoL2NyZWF0ZUdlb0pTT05CbG9vZGhvdW5kLmpzJztcbmltcG9ydCBuZ2VvU2VhcmNoQ3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kIGZyb20gJ25nZW8vc2VhcmNoL2NyZWF0ZUxvY2F0aW9uU2VhcmNoQmxvb2Rob3VuZC5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb1NlYXJjaE1vZHVsZScsIFtuZ2VvU2VhcmNoU2VhcmNoRGlyZWN0aXZlLm5hbWUsIG5nZW9TZWFyY2hDcmVhdGVHZW9KU09OQmxvb2Rob3VuZC5uYW1lLCBuZ2VvU2VhcmNoQ3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kLm5hbWVdKTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcblxuZnVuY3Rpb24gc2VhcmNoQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciB0eXBlYWhlYWRPcHRpb25zRXhwciA9IGF0dHJzLm5nZW9TZWFyY2g7XG4gICAgICB2YXIgdHlwZWFoZWFkT3B0aW9ucyA9IHNjb3BlLiRldmFsKHR5cGVhaGVhZE9wdGlvbnNFeHByKTtcbiAgICAgIHZhciB0eXBlYWhlYWREYXRhc2V0c0V4cHIgPSBhdHRycy5uZ2VvU2VhcmNoRGF0YXNldHM7XG4gICAgICB2YXIgdHlwZWFoZWFkRGF0YXNldHMgPSBzY29wZS4kZXZhbCh0eXBlYWhlYWREYXRhc2V0c0V4cHIpO1xuICAgICAgZWxlbWVudC50eXBlYWhlYWQodHlwZWFoZWFkT3B0aW9ucywgdHlwZWFoZWFkRGF0YXNldHMpO1xuICAgICAgdmFyIHR5cGVhaGVhZExpc3RlbmVyc0V4cHIgPSBhdHRycy5uZ2VvU2VhcmNoTGlzdGVuZXJzO1xuICAgICAgdmFyIHR5cGVhaGVhZExpc3RlbmVyc18gPSBzY29wZS4kZXZhbCh0eXBlYWhlYWRMaXN0ZW5lcnNFeHByKTtcbiAgICAgIHZhciB0eXBlYWhlYWRMaXN0ZW5lcnMgPSBhZGFwdExpc3RlbmVyc18odHlwZWFoZWFkTGlzdGVuZXJzXyk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6b3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0eXBlYWhlYWRMaXN0ZW5lcnMub3BlbigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmNsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHR5cGVhaGVhZExpc3RlbmVycy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmN1cnNvcmNoYW5nZScsIGZ1bmN0aW9uIChldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHR5cGVhaGVhZExpc3RlbmVycy5jdXJzb3JjaGFuZ2UoZXZlbnQsIHN1Z2dlc3Rpb24sIGRhdGFzZXQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOnNlbGVjdCcsIGZ1bmN0aW9uIChldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHR5cGVhaGVhZExpc3RlbmVycy5zZWxlY3QoZXZlbnQsIHN1Z2dlc3Rpb24sIGRhdGFzZXQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmF1dG9jb21wbGV0ZScsIGZ1bmN0aW9uIChldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHR5cGVhaGVhZExpc3RlbmVycy5hdXRvY29tcGxldGUoZXZlbnQsIHN1Z2dlc3Rpb24sIGRhdGFzZXQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmFzeW5jcmVjZWl2ZScsIGZ1bmN0aW9uIChldmVudCwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZW1wdHkgPSBlbGVtZW50LmRhdGEoJ3R0LXR5cGVhaGVhZCcpLm1lbnUuX2FsbERhdGFzZXRzRW1wdHkoKTtcblxuICAgICAgICAgIHR5cGVhaGVhZExpc3RlbmVycy5kYXRhc2V0c2VtcHR5KGV2ZW50LCBxdWVyeSwgZW1wdHkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmNoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBxdWVyeSA9IGVsZW1lbnQuZGF0YSgndHQtdHlwZWFoZWFkJykuaW5wdXQucXVlcnk7XG4gICAgICAgICAgdHlwZWFoZWFkTGlzdGVuZXJzLmNoYW5nZShldmVudCwgcXVlcnkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmFzeW5jcmVxdWVzdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5hZGRDbGFzcygnc2VhcmNoLWxvYWRpbmcnKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5vbigndHlwZWFoZWFkOmFzeW5jY2FuY2VsIHR5cGVhaGVhZDphc3luY3JlY2VpdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3NlYXJjaC1sb2FkaW5nJyk7XG4gICAgICAgIH0sIDUwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gYWRhcHRMaXN0ZW5lcnNfKG9iamVjdCkge1xuICB2YXIgdHlwZWFoZWFkTGlzdGVuZXJzO1xuXG4gIGlmIChvYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgIHR5cGVhaGVhZExpc3RlbmVycyA9IHtcbiAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7fSxcbiAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHt9LFxuICAgICAgY3Vyc29yY2hhbmdlOiBmdW5jdGlvbiBjdXJzb3JjaGFuZ2UoKSB7fSxcbiAgICAgIGRhdGFzZXRzZW1wdHk6IGZ1bmN0aW9uIGRhdGFzZXRzZW1wdHkoKSB7fSxcbiAgICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KCkge30sXG4gICAgICBhdXRvY29tcGxldGU6IGZ1bmN0aW9uIGF1dG9jb21wbGV0ZSgpIHt9LFxuICAgICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoKSB7fVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdHlwZWFoZWFkTGlzdGVuZXJzID0ge1xuICAgICAgb3Blbjogb2JqZWN0Lm9wZW4gIT09IHVuZGVmaW5lZCA/IG9iamVjdC5vcGVuIDogZnVuY3Rpb24gKCkge30sXG4gICAgICBjbG9zZTogb2JqZWN0LmNsb3NlICE9PSB1bmRlZmluZWQgPyBvYmplY3QuY2xvc2UgOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgIGN1cnNvcmNoYW5nZTogb2JqZWN0LmN1cnNvcmNoYW5nZSAhPT0gdW5kZWZpbmVkID8gb2JqZWN0LmN1cnNvcmNoYW5nZSA6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgZGF0YXNldHNlbXB0eTogb2JqZWN0LmRhdGFzZXRzZW1wdHkgIT09IHVuZGVmaW5lZCA/IG9iamVjdC5kYXRhc2V0c2VtcHR5IDogZnVuY3Rpb24gKCkge30sXG4gICAgICBzZWxlY3Q6IG9iamVjdC5zZWxlY3QgIT09IHVuZGVmaW5lZCA/IG9iamVjdC5zZWxlY3QgOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgIGF1dG9jb21wbGV0ZTogb2JqZWN0LmF1dG9jb21wbGV0ZSAhPT0gdW5kZWZpbmVkID8gb2JqZWN0LmF1dG9jb21wbGV0ZSA6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgY2hhbmdlOiBvYmplY3QuY2hhbmdlICE9PSB1bmRlZmluZWQgPyBvYmplY3QuY2hhbmdlIDogZnVuY3Rpb24gKCkge31cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHR5cGVhaGVhZExpc3RlbmVycztcbn1cblxudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9TZWFyY2hEaXJlY3RpdmUnLCBbXSk7XG5teU1vZHVsZS5kaXJlY3RpdmUoJ25nZW9TZWFyY2gnLCBzZWFyY2hDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbXlNb2R1bGU7IiwiTG9jYXRpb25GYWN0b3J5LiRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCIsIFwiJHdpbmRvd1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZW5jb2RlUXVlcnlTdHJpbmcsIGRlY29kZVF1ZXJ5U3RyaW5nIH0gZnJvbSAnbmdlby91dGlscy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gU3RhdGVtYW5hZ2VyTG9jYXRpb24obG9jYXRpb24sIGhpc3RvcnkpIHtcbiAgdGhpcy5oaXN0b3J5XyA9IGhpc3Rvcnk7XG4gIHRoaXMuc2NoZW1hXyA9IGxvY2F0aW9uLnByb3RvY29sLnN1YnN0cmluZygwLCBsb2NhdGlvbi5wcm90b2NvbC5sZW5ndGggLSAxKTtcbiAgdGhpcy5kb21haW5fID0gbG9jYXRpb24uaG9zdG5hbWU7XG4gIHRoaXMucG9ydF8gPSBsb2NhdGlvbi5wb3J0ID8gcGFyc2VJbnQobG9jYXRpb24ucG9ydCwgMTApIDogdW5kZWZpbmVkO1xuICB0aGlzLnBhdGhfID0gbG9jYXRpb24ucGF0aG5hbWU7XG4gIHRoaXMucXVlcnlEYXRhXyA9IGRlY29kZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XG4gIHRoaXMuZnJhZ21lbnRfID0gZGVjb2RlUXVlcnlTdHJpbmcobG9jYXRpb24uaGFzaCk7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VTdGF0ZShoaXN0b3J5LCBzdGF0ZSkge1xuICB0cnkge1xuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBzdGF0ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7fVxufVxuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucGF0aF87XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0VXJpU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3V0ID0gW107XG5cbiAgaWYgKHRoaXMuc2NoZW1hXykge1xuICAgIG91dC5wdXNoKHRoaXMuc2NoZW1hXywgJzonKTtcbiAgfVxuXG4gIGlmICh0aGlzLmRvbWFpbl8gfHwgdGhpcy5zY2hlbWFfID09PSAnZmlsZScpIHtcbiAgICBvdXQucHVzaCgnLy8nKTtcbiAgICBvdXQucHVzaCh0aGlzLmRvbWFpbl8pO1xuXG4gICAgaWYgKHRoaXMucG9ydF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgb3V0LnB1c2goJzonLCBTdHJpbmcodGhpcy5wb3J0XykpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLnBhdGhfKSB7XG4gICAgaWYgKHRoaXMuZG9tYWluXyAmJiAhdGhpcy5wYXRoXy5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIG91dC5wdXNoKCcvJyk7XG4gICAgfVxuXG4gICAgb3V0LnB1c2godGhpcy5wYXRoXyk7XG4gIH1cblxuICB2YXIgZW5jb2RlZFF1ZXJ5RGF0YSA9IGVuY29kZVF1ZXJ5U3RyaW5nKHRoaXMucXVlcnlEYXRhXyk7XG5cbiAgaWYgKGVuY29kZWRRdWVyeURhdGEubGVuZ3RoID4gMCkge1xuICAgIG91dC5wdXNoKCc/JywgZW5jb2RlZFF1ZXJ5RGF0YSk7XG4gIH1cblxuICB2YXIgZW5jb2RlZEZyYWdtZW50ID0gZW5jb2RlUXVlcnlTdHJpbmcodGhpcy5mcmFnbWVudF8pO1xuXG4gIGlmIChlbmNvZGVkRnJhZ21lbnQubGVuZ3RoID4gMCkge1xuICAgIG91dC5wdXNoKCcjJywgZW5jb2RlZEZyYWdtZW50KTtcbiAgfVxuXG4gIHJldHVybiBvdXQuam9pbignJyk7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuaGFzUGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXkgaW4gdGhpcy5xdWVyeURhdGFfO1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmhhc0ZyYWdtZW50UGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXkgaW4gdGhpcy5mcmFnbWVudF87XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiB0aGlzLnF1ZXJ5RGF0YV9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5nZXRGcmFnbWVudFBhcmFtID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4gdGhpcy5mcmFnbWVudF9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5nZXRQYXJhbUFzSW50ID0gZnVuY3Rpb24gKGtleSkge1xuICB2YXIgdmFsdWUgPSB0aGlzLmdldFBhcmFtKGtleSk7XG5cbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc29sZS5hc3NlcnQodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKTtcbiAgdmFyIHZhbHVlQXNJbnQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICByZXR1cm4gaXNOYU4odmFsdWVBc0ludCkgPyB1bmRlZmluZWQgOiB2YWx1ZUFzSW50O1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmdldFBhcmFtQXNGbG9hdCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgdmFyIHZhbHVlID0gdGhpcy5nZXRQYXJhbShrZXkpO1xuXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbnNvbGUuYXNzZXJ0KHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyk7XG4gIHZhciB2YWx1ZUFzRmxvYXQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgcmV0dXJuIGlzTmFOKHZhbHVlQXNGbG9hdCkgPyB1bmRlZmluZWQgOiB2YWx1ZUFzRmxvYXQ7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0RnJhZ21lbnRQYXJhbUFzSW50ID0gZnVuY3Rpb24gKGtleSkge1xuICB2YXIgdmFsdWUgPSB0aGlzLmdldEZyYWdtZW50UGFyYW0oa2V5KTtcblxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydCh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpO1xuICB2YXIgdmFsdWVBc0ludCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIHJldHVybiBpc05hTih2YWx1ZUFzSW50KSA/IHVuZGVmaW5lZCA6IHZhbHVlQXNJbnQ7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGFyYW1LZXlzID0gZnVuY3Rpb24gKCkge1xuICB2YXIga2V5cyA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiB0aGlzLnF1ZXJ5RGF0YV8pIHtcbiAgICBrZXlzLnB1c2goa2V5KTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmdldEZyYWdtZW50UGFyYW1LZXlzID0gZnVuY3Rpb24gKCkge1xuICB2YXIga2V5cyA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiB0aGlzLmZyYWdtZW50Xykge1xuICAgIGtleXMucHVzaChrZXkpO1xuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGFyYW1LZXlzV2l0aFByZWZpeCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5xdWVyeURhdGFfKSB7XG4gICAgaWYgKGtleS5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmdldEZyYWdtZW50UGFyYW1LZXlzV2l0aFByZWZpeCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5mcmFnbWVudF8pIHtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUudXBkYXRlUGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgdGhpcy5xdWVyeURhdGFfW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgfVxufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLnVwZGF0ZUZyYWdtZW50UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgdGhpcy5mcmFnbWVudF9ba2V5XSA9IHBhcmFtc1trZXldO1xuICB9XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZGVsZXRlUGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIGRlbGV0ZSB0aGlzLnF1ZXJ5RGF0YV9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5kZWxldGVGcmFnbWVudFBhcmFtID0gZnVuY3Rpb24gKGtleSkge1xuICBkZWxldGUgdGhpcy5mcmFnbWVudF9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICByZXBsYWNlU3RhdGUodGhpcy5oaXN0b3J5XywgdGhpcy5nZXRVcmlTdHJpbmcoKSk7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuc2V0UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIHRoaXMucGF0aF8gPSBwYXRoO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIExvY2F0aW9uRmFjdG9yeSgkcm9vdFNjb3BlLCAkd2luZG93KSB7XG4gIHZhciBoaXN0b3J5ID0gJHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgc2VydmljZSA9IG5ldyBTdGF0ZW1hbmFnZXJMb2NhdGlvbigkd2luZG93LmxvY2F0aW9uLCAkd2luZG93Lmhpc3RvcnkpO1xuICB2YXIgbGFzdFVyaSA9IHNlcnZpY2UuZ2V0VXJpU3RyaW5nKCk7XG4gICRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3VXJpID0gc2VydmljZS5nZXRVcmlTdHJpbmcoKTtcblxuICAgIGlmIChsYXN0VXJpICE9PSBuZXdVcmkpIHtcbiAgICAgICRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxhc3RVcmkgPSBuZXdVcmk7XG5cbiAgICAgICAgaWYgKGhpc3RvcnkgIT09IHVuZGVmaW5lZCAmJiBoaXN0b3J5LnJlcGxhY2VTdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmVwbGFjZVN0YXRlKGhpc3RvcnksIG5ld1VyaSk7XG4gICAgICAgIH1cblxuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nZW9Mb2NhdGlvbkNoYW5nZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHNlcnZpY2U7XG59XG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0xvY2F0aW9uJywgW10pO1xubXlNb2R1bGUuZmFjdG9yeSgnbmdlb0xvY2F0aW9uJywgTG9jYXRpb25GYWN0b3J5KTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb1N0YXRlbWFuYWdlckxvY2F0aW9uIGZyb20gJ25nZW8vc3RhdGVtYW5hZ2VyL0xvY2F0aW9uLmpzJztcbmV4cG9ydCB2YXIgU3RhdGVtYW5hZ2VyU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgU3RhdGVtYW5hZ2VyU2VydmljZS4kaW5qZWN0ID0gW1wibmdlb0xvY2F0aW9uXCIsIFwibmdlb1VzZWRLZXlSZWdleHBcIl07XG5cbiAgZnVuY3Rpb24gU3RhdGVtYW5hZ2VyU2VydmljZShuZ2VvTG9jYXRpb24sIG5nZW9Vc2VkS2V5UmVnZXhwKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMuaW5pdGlhbFN0YXRlID0ge307XG4gICAgdGhpcy5uZ2VvTG9jYXRpb24gPSBuZ2VvTG9jYXRpb247XG4gICAgdGhpcy51c2VkS2V5UmVnZXhwID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG5nZW9Vc2VkS2V5UmVnZXhwKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciByZWcgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHRoaXMudXNlZEtleVJlZ2V4cC5wdXNoKFJlZ0V4cChyZWcpKTtcbiAgICB9XG5cbiAgICB0aGlzLnVzZUxvY2FsU3RvcmFnZV8gPSBmYWxzZTtcbiAgICB0aGlzLnNldFVzZUxvY2FsU3RvcmFnZShmYWxzZSk7XG4gICAgdmFyIHBhcmFtS2V5cyA9IG5nZW9Mb2NhdGlvbi5nZXRQYXJhbUtleXMoKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPSAnZGVidWcnICYmIGtleSAhPSAnbm9fcmVkaXJlY3QnO1xuICAgIH0pO1xuXG4gICAgaWYgKHBhcmFtS2V5cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICh0aGlzLnVzZUxvY2FsU3RvcmFnZV8pIHtcbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoa2V5KSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoa2V5KTtcblxuICAgICAgICAgIF90aGlzLnVzZWRLZXlSZWdleHAuc29tZShmdW5jdGlvbiAoa2V5UmVnZXhwKSB7XG4gICAgICAgICAgICBpZiAoa2V5Lm1hdGNoKGtleVJlZ2V4cCkpIHtcbiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gd2luZG93LmxvY2FsU3RvcmFnZVtrZXldO1xuXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5pdGlhbFN0YXRlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbml0aWFsU3RhdGVba2V5XSA9ICcnO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gd2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgIF9sb29wKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGFyYW1LZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBfdGhpcy51c2VkS2V5UmVnZXhwLnNvbWUoZnVuY3Rpb24gKGtleVJlZ2V4cCkge1xuICAgICAgICAgIGlmIChrZXkubWF0Y2goa2V5UmVnZXhwKSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gX3RoaXMubmdlb0xvY2F0aW9uLmdldFBhcmFtKGtleSk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIF90aGlzLmluaXRpYWxTdGF0ZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU3RhdGVtYW5hZ2VyU2VydmljZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnNldFVzZUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIHNldFVzZUxvY2FsU3RvcmFnZSh2YWx1ZSkge1xuICAgIHRoaXMudXNlTG9jYWxTdG9yYWdlXyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMudXNlTG9jYWxTdG9yYWdlXykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCdsb2NhbFN0b3JhZ2UnIGluIHdpbmRvdykge1xuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2VbJ3Rlc3QnXSA9ICcnO1xuICAgICAgICAgIGRlbGV0ZSB3aW5kb3cubG9jYWxTdG9yYWdlWyd0ZXN0J107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51c2VMb2NhbFN0b3JhZ2VfID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudXNlTG9jYWxTdG9yYWdlXyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnVzZUxvY2FsU3RvcmFnZV87XG4gIH07XG5cbiAgX3Byb3RvLmdldEluaXRpYWxTdHJpbmdWYWx1ZSA9IGZ1bmN0aW9uIGdldEluaXRpYWxTdHJpbmdWYWx1ZShrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5pbml0aWFsU3RhdGVba2V5XTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0SW5pdGlhbE51bWJlclZhbHVlID0gZnVuY3Rpb24gZ2V0SW5pdGlhbE51bWJlclZhbHVlKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuaW5pdGlhbFN0YXRlW2tleV07XG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldEluaXRpYWxCb29sZWFuVmFsdWUgPSBmdW5jdGlvbiBnZXRJbml0aWFsQm9vbGVhblZhbHVlKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuaW5pdGlhbFN0YXRlW2tleV07XG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJztcbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdGUgPSBmdW5jdGlvbiB1cGRhdGVTdGF0ZShvYmplY3QpIHtcbiAgICB0aGlzLm5nZW9Mb2NhdGlvbi51cGRhdGVQYXJhbXMob2JqZWN0KTtcblxuICAgIGlmICh0aGlzLnVzZUxvY2FsU3RvcmFnZV8pIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgY29uc29sZS5hc3NlcnQoa2V5KTtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHZhbHVlICE9PSB1bmRlZmluZWQpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmRlbGV0ZVBhcmFtID0gZnVuY3Rpb24gZGVsZXRlUGFyYW0oa2V5KSB7XG4gICAgdGhpcy5uZ2VvTG9jYXRpb24uZGVsZXRlUGFyYW0oa2V5KTtcblxuICAgIGlmICh0aGlzLnVzZUxvY2FsU3RvcmFnZV8pIHtcbiAgICAgIGRlbGV0ZSB3aW5kb3cubG9jYWxTdG9yYWdlW2tleV07XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTdGF0ZW1hbmFnZXJTZXJ2aWNlO1xufSgpO1xudmFyIG15TW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9TdGF0ZU1hbmFnZXInLCBbbmdlb1N0YXRlbWFuYWdlckxvY2F0aW9uLm5hbWVdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ25nZW9TdGF0ZU1hbmFnZXInLCBTdGF0ZW1hbmFnZXJTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsIldmc1Blcm1hbGlua1NlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwibmdlb1Blcm1hbGlua09nY3NlcnZlclVybFwiLCBcIm5nZW9RdWVyeVJlc3VsdFwiLCBcIm5nZW9XZnNQZXJtYWxpbmtPcHRpb25zXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBleHRlbmQgYXMgZXh0ZW5kRXh0ZW50LCBjcmVhdGVFbXB0eSBhcyBjcmVhdGVFbXB0eUV4dGVudCB9IGZyb20gJ29sL2V4dGVudC5qcyc7XG5pbXBvcnQgRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCB7IGVxdWFsVG8sIGFuZCwgb3IgfSBmcm9tICdvbC9mb3JtYXQvZmlsdGVyLmpzJztcbmltcG9ydCBvbEZvcm1hdFdGUyBmcm9tICdvbC9mb3JtYXQvV0ZTLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBXZnNQZXJtYWxpbmtTZXJ2aWNlKCRodHRwLCBuZ2VvUGVybWFsaW5rT2djc2VydmVyVXJsLCBuZ2VvUXVlcnlSZXN1bHQsIG5nZW9XZnNQZXJtYWxpbmtPcHRpb25zKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIG9wdGlvbnMgPSBuZ2VvV2ZzUGVybWFsaW5rT3B0aW9ucztcbiAgdGhpcy51cmxfID0gbmdlb1Blcm1hbGlua09nY3NlcnZlclVybDtcbiAgdGhpcy5tYXhGZWF0dXJlc18gPSBvcHRpb25zLm1heEZlYXR1cmVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heEZlYXR1cmVzIDogNTA7XG4gIHRoaXMud2ZzVHlwZXNfID0ge307XG4gIGNvbnNvbGUuYXNzZXJ0KEFycmF5LmlzQXJyYXkob3B0aW9ucy53ZnNUeXBlcyksICd3ZnNUeXBlcyBpcyBub3QgY29ycmVjdGx5IHNldCcpO1xuICBvcHRpb25zLndmc1R5cGVzLmZvckVhY2goZnVuY3Rpb24gKHdmc1R5cGUpIHtcbiAgICBfdGhpcy53ZnNUeXBlc19bd2ZzVHlwZS5mZWF0dXJlVHlwZV0gPSB3ZnNUeXBlO1xuICB9KTtcbiAgdGhpcy5kZWZhdWx0RmVhdHVyZU5TXyA9IG9wdGlvbnMuZGVmYXVsdEZlYXR1cmVOUztcbiAgdGhpcy5kZWZhdWx0RmVhdHVyZVByZWZpeF8gPSBvcHRpb25zLmRlZmF1bHRGZWF0dXJlUHJlZml4O1xuICB0aGlzLnBvaW50UmVjZW50ZXJab29tXyA9IG9wdGlvbnMucG9pbnRSZWNlbnRlclpvb207XG4gIHRoaXMuJGh0dHBfID0gJGh0dHA7XG4gIHRoaXMucmVzdWx0XyA9IG5nZW9RdWVyeVJlc3VsdDtcbn1cblxuV2ZzUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuY2xlYXJSZXN1bHRfKCk7XG59O1xuXG5XZnNQZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5pc3N1ZSA9IGZ1bmN0aW9uIChxdWVyeURhdGEsIG1hcCwgem9vbUxldmVsKSB7XG4gIGlmICh6b29tTGV2ZWwgPT09IHZvaWQgMCkge1xuICAgIHpvb21MZXZlbCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbnNvbGUuYXNzZXJ0KHRoaXMudXJsXywgJ3VybCBpcyBub3Qgc2V0LiB0byB1c2UgdGhlIHdmcyBwZXJtYWxpbmsgc2VydmljZSwgJyArICdzZXQgdGhlIHZhbHVlIGBuZ2VvV2ZzUGVybWFsaW5rT3B0aW9uc2AnKTtcbiAgdGhpcy5jbGVhclJlc3VsdF8oKTtcbiAgdmFyIHR5cGVOYW1lID0gcXVlcnlEYXRhLndmc1R5cGU7XG5cbiAgaWYgKCF0aGlzLndmc1R5cGVzXy5oYXNPd25Qcm9wZXJ0eSh0eXBlTmFtZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgd2ZzVHlwZSA9IHRoaXMud2ZzVHlwZXNfW3R5cGVOYW1lXTtcbiAgdmFyIGZpbHRlcnMgPSB0aGlzLmNyZWF0ZUZpbHRlcnNfKHF1ZXJ5RGF0YS5maWx0ZXJHcm91cHMpO1xuXG4gIGlmIChmaWx0ZXJzID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5pc3N1ZVJlcXVlc3RfKHdmc1R5cGUsIGZpbHRlcnMsIG1hcCwgcXVlcnlEYXRhLnNob3dGZWF0dXJlcywgem9vbUxldmVsKTtcbn07XG5cbldmc1Blcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmlzc3VlUmVxdWVzdF8gPSBmdW5jdGlvbiAod2ZzVHlwZSwgZmlsdGVyLCBtYXAsIHNob3dGZWF0dXJlcywgem9vbUxldmVsKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIGlmICh6b29tTGV2ZWwgPT09IHZvaWQgMCkge1xuICAgIHpvb21MZXZlbCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciB3ZnNGb3JtYXQgPSBuZXcgb2xGb3JtYXRXRlMoKTtcbiAgdmFyIGZlYXR1cmVSZXF1ZXN0WG1sID0gd2ZzRm9ybWF0LndyaXRlR2V0RmVhdHVyZSh7XG4gICAgc3JzTmFtZTogbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkuZ2V0Q29kZSgpLFxuICAgIGZlYXR1cmVOUzogd2ZzVHlwZS5mZWF0dXJlTlMgIT09IHVuZGVmaW5lZCA/IHdmc1R5cGUuZmVhdHVyZU5TIDogdGhpcy5kZWZhdWx0RmVhdHVyZU5TXyxcbiAgICBmZWF0dXJlUHJlZml4OiB3ZnNUeXBlLmZlYXR1cmVQcmVmaXggIT09IHVuZGVmaW5lZCA/IHdmc1R5cGUuZmVhdHVyZVByZWZpeCA6IHRoaXMuZGVmYXVsdEZlYXR1cmVQcmVmaXhfLFxuICAgIGZlYXR1cmVUeXBlczogW3dmc1R5cGUuZmVhdHVyZVR5cGVdLFxuICAgIG91dHB1dEZvcm1hdDogJ0dNTDMnLFxuICAgIGZpbHRlcjogZmlsdGVyLFxuICAgIG1heEZlYXR1cmVzOiB0aGlzLm1heEZlYXR1cmVzX1xuICB9KTtcbiAgdmFyIGZlYXR1cmVSZXF1ZXN0ID0gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhmZWF0dXJlUmVxdWVzdFhtbCk7XG4gIHZhciBjb25maWcgPSB7XG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3htbDsgY2hhcnNldD1VVEYtOCdcbiAgICB9XG4gIH07XG4gIHRoaXMuJGh0dHBfLnBvc3QodGhpcy51cmxfLCBmZWF0dXJlUmVxdWVzdCwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHZhciBmZWF0dXJlcyA9IHdmc0Zvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UuZGF0YSk7XG5cbiAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG5cbiAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgbWF4Wm9vbSA9IHpvb21MZXZlbCA9PT0gdW5kZWZpbmVkID8gX3RoaXMyLnBvaW50UmVjZW50ZXJab29tXyA6IHpvb21MZXZlbDtcbiAgICAgIHZhciBwYWRkaW5nID0gWzEwLCAxMCwgMTAsIDEwXTtcbiAgICAgIG1hcC5nZXRWaWV3KCkuZml0KF90aGlzMi5nZXRFeHRlbnRfKGZlYXR1cmVzKSwge1xuICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICBtYXhab29tOiBtYXhab29tLFxuICAgICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoc2hvd0ZlYXR1cmVzKSB7XG4gICAgICB2YXIgcmVzdWx0U291cmNlID0ge1xuICAgICAgICAnZmVhdHVyZXMnOiBmZWF0dXJlcyxcbiAgICAgICAgJ2lkJzogd2ZzVHlwZS5mZWF0dXJlVHlwZSxcbiAgICAgICAgJ2lkZW50aWZpZXJBdHRyaWJ1dGVGaWVsZCc6IHdmc1R5cGUubGFiZWwsXG4gICAgICAgICdsYWJlbCc6IHdmc1R5cGUuZmVhdHVyZVR5cGUsXG4gICAgICAgICdwZW5kaW5nJzogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIF90aGlzMi5yZXN1bHRfLnNvdXJjZXMucHVzaChyZXN1bHRTb3VyY2UpO1xuXG4gICAgICBfdGhpczIucmVzdWx0Xy50b3RhbCA9IGZlYXR1cmVzLmxlbmd0aDtcbiAgICB9XG4gIH0pO1xufTtcblxuV2ZzUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuZ2V0RXh0ZW50XyA9IGZ1bmN0aW9uIChmZWF0dXJlcykge1xuICByZXR1cm4gZmVhdHVyZXMucmVkdWNlKGZ1bmN0aW9uIChleHRlbnQsIGZlYXR1cmUpIHtcbiAgICBpZiAoZmVhdHVyZSBpbnN0YW5jZW9mIEZlYXR1cmUpIHtcbiAgICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICAgIHJldHVybiBleHRlbmRFeHRlbnQoZXh0ZW50LCBnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfVxuICB9LCBjcmVhdGVFbXB0eUV4dGVudCgpKTtcbn07XG5cbldmc1Blcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZUZpbHRlcnNfID0gZnVuY3Rpb24gKGZpbHRlckdyb3Vwcykge1xuICBpZiAoZmlsdGVyR3JvdXBzLmxlbmd0aCA9PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgY3JlYXRlRmlsdGVyc0Zvckdyb3VwID0gZnVuY3Rpb24gY3JlYXRlRmlsdGVyc0Zvckdyb3VwKGZpbHRlckdyb3VwKSB7XG4gICAgdmFyIGZpbHRlcnMgPSBmaWx0ZXJHcm91cC5maWx0ZXJzLm1hcChmdW5jdGlvbiAoZmlsdGVyRGVmKSB7XG4gICAgICB2YXIgY29uZGl0aW9uID0gZmlsdGVyRGVmLmNvbmRpdGlvbjtcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZGl0aW9uKSkge1xuICAgICAgICByZXR1cm4gV2ZzUGVybWFsaW5rU2VydmljZS5vcl8oY29uZGl0aW9uLm1hcChmdW5jdGlvbiAoY29uZCkge1xuICAgICAgICAgIHJldHVybiBlcXVhbFRvKGZpbHRlckRlZi5wcm9wZXJ0eSwgY29uZCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlcXVhbFRvKGZpbHRlckRlZi5wcm9wZXJ0eSwgY29uZGl0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gV2ZzUGVybWFsaW5rU2VydmljZS5hbmRfKGZpbHRlcnMpO1xuICB9O1xuXG4gIHZhciBmaWx0ZXJzID0gZmlsdGVyR3JvdXBzLm1hcChjcmVhdGVGaWx0ZXJzRm9yR3JvdXApO1xuXG4gIGlmIChmaWx0ZXJzKSB7XG4gICAgcmV0dXJuIFdmc1Blcm1hbGlua1NlcnZpY2Uub3JfKGZpbHRlcnMpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5XZnNQZXJtYWxpbmtTZXJ2aWNlLmFuZF8gPSBmdW5jdGlvbiAoZmlsdGVycykge1xuICByZXR1cm4gV2ZzUGVybWFsaW5rU2VydmljZS5qb2luRmlsdGVyc18oZmlsdGVycywgYW5kKTtcbn07XG5cbldmc1Blcm1hbGlua1NlcnZpY2Uub3JfID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcbiAgcmV0dXJuIFdmc1Blcm1hbGlua1NlcnZpY2Uuam9pbkZpbHRlcnNfKGZpbHRlcnMsIG9yKTtcbn07XG5cbldmc1Blcm1hbGlua1NlcnZpY2Uuam9pbkZpbHRlcnNfID0gZnVuY3Rpb24gKGZpbHRlcnMsIGpvaW5Gbikge1xuICByZXR1cm4gZmlsdGVycy5yZWR1Y2UoZnVuY3Rpb24gKGNvbWJpbmVkRmlsdGVycywgY3VycmVudEZpbHRlcikge1xuICAgIGlmIChjb21iaW5lZEZpbHRlcnMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBjdXJyZW50RmlsdGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmFzc2VydChjdXJyZW50RmlsdGVyICE9PSBudWxsKTtcbiAgICAgIHJldHVybiBqb2luRm4oY29tYmluZWRGaWx0ZXJzLCBjdXJyZW50RmlsdGVyKTtcbiAgICB9XG4gIH0pO1xufTtcblxuV2ZzUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuY2xlYXJSZXN1bHRfID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlc3VsdF8udG90YWwgPSAwO1xuICB0aGlzLnJlc3VsdF8uc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBzb3VyY2UuZmVhdHVyZXMubGVuZ3RoID0gMDtcbiAgfSk7XG59O1xuXG52YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1dmc1Blcm1hbGluaycsIFtdKTtcbm15TW9kdWxlLnNlcnZpY2UoJ25nZW9XZnNQZXJtYWxpbmsnLCBXZnNQZXJtYWxpbmtTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG15TW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9TdGF0ZW1hbmFnZXJMb2NhdGlvbiBmcm9tICduZ2VvL3N0YXRlbWFuYWdlci9Mb2NhdGlvbi5qcyc7XG5pbXBvcnQgbmdlb1N0YXRlbWFuYWdlclNlcnZpY2UgZnJvbSAnbmdlby9zdGF0ZW1hbmFnZXIvU2VydmljZS5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb1N0YXRlbWFuYWdlck1vZHVsZScsIFtuZ2VvU3RhdGVtYW5hZ2VyTG9jYXRpb24ubmFtZSwgbmdlb1N0YXRlbWFuYWdlclNlcnZpY2UubmFtZV0pOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IHsgbm9Nb2RpZmllcktleXMsIHNpbmdsZUNsaWNrIH0gZnJvbSAnb2wvZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgb2xHZW9tTGluZVN0cmluZyBmcm9tICdvbC9nZW9tL0xpbmVTdHJpbmcuanMnO1xuaW1wb3J0IG9sR2VvbU11bHRpUG9pbnQgZnJvbSAnb2wvZ2VvbS9NdWx0aVBvaW50LmpzJztcbmltcG9ydCBvbEdlb21NdWx0aUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanMnO1xuaW1wb3J0IG9sR2VvbU11bHRpUG9seWdvbiBmcm9tICdvbC9nZW9tL011bHRpUG9seWdvbi5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHsgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIGdldEJvdHRvbUxlZnQsIGdldEJvdHRvbVJpZ2h0IH0gZnJvbSAnb2wvZXh0ZW50LmpzJztcbmltcG9ydCB7IE1BQyB9IGZyb20gJ29sL2hhcy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gaXNFdmVudFVzaW5DdHJsS2V5KGV2dCkge1xuICBpZiAoIWV2dCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAoTUFDID8gZXZ0Lm1ldGFLZXkgOiBldnQuY3RybEtleSkgfHwgZXZ0LmtleSA9PT0gJ0NvbnRyb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhdGZvcm1Nb2RpZmllcktleU9ubHkoZXZ0KSB7XG4gIHJldHVybiAhZXZ0LmFsdEtleSAmJiBpc0V2ZW50VXNpbkN0cmxLZXkoZXZ0KSAmJiAhZXZ0LnNoaWZ0S2V5O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2hpZnRLZXlPbmx5KGV2dCkge1xuICByZXR1cm4gIWV2dC5hbHRLZXkgJiYgIWlzRXZlbnRVc2luQ3RybEtleShldnQpICYmIGV2dC5zaGlmdEtleTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNDb2Fyc2VQb2ludGluZ0RldmljZSgpIHtcbiAgcmV0dXJuIG1hdGNoTWVkaWEoJyhwb2ludGVyOiBjb2Fyc2UpJykubWF0Y2hlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRCcm93c2VyTGFuZ3VhZ2UoYXZhaWxhYmxlTGFuZ3VhZ2VzKSB7XG4gIHZhciBicm93c2VyTGFuZ3VhZ2VzID0gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZXMgfHwgW3dpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2VdO1xuICBicm93c2VyTGFuZ3VhZ2VzID0gYnJvd3Nlckxhbmd1YWdlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS5zdWJzdHJpbmcoMCwgMik7XG4gIH0pO1xuICBicm93c2VyTGFuZ3VhZ2VzID0gYnJvd3Nlckxhbmd1YWdlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBhcnIpIHtcbiAgICByZXR1cm4gYXJyLmluZGV4T2YoaXRlbSkgPT0gaW5kZXg7XG4gIH0pO1xuICB2YXIgc3VwcG9ydGVkTGFuZ3VhZ2VzID0gYnJvd3Nlckxhbmd1YWdlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gYXZhaWxhYmxlTGFuZ3VhZ2VzLmluY2x1ZGVzKGl0ZW0pO1xuICB9KTtcbiAgcmV0dXJuIHN1cHBvcnRlZExhbmd1YWdlc1swXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b011bHRpKGdlb21ldHJ5KSB7XG4gIHZhciBtdWx0aUdlb207XG5cbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpIHtcbiAgICB2YXIgbXVsdGlHZW9tUG9pbnQgPSBuZXcgb2xHZW9tTXVsdGlQb2ludChbXSk7XG4gICAgbXVsdGlHZW9tUG9pbnQuYXBwZW5kUG9pbnQoZ2VvbWV0cnkpO1xuICAgIG11bHRpR2VvbSA9IG11bHRpR2VvbVBvaW50O1xuICB9IGVsc2UgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgIHZhciBtdWx0aUdlb21MaW5lID0gbmV3IG9sR2VvbU11bHRpTGluZVN0cmluZyhbXSk7XG4gICAgbXVsdGlHZW9tTGluZS5hcHBlbmRMaW5lU3RyaW5nKGdlb21ldHJ5KTtcbiAgICBtdWx0aUdlb20gPSBtdWx0aUdlb21MaW5lO1xuICB9IGVsc2UgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9seWdvbikge1xuICAgIHZhciBtdWx0aUdlb21Qb2x5Z29uID0gbmV3IG9sR2VvbU11bHRpUG9seWdvbihbXSk7XG4gICAgbXVsdGlHZW9tUG9seWdvbi5hcHBlbmRQb2x5Z29uKGdlb21ldHJ5KTtcbiAgICBtdWx0aUdlb20gPSBtdWx0aUdlb21Qb2x5Z29uO1xuICB9IGVsc2Uge1xuICAgIG11bHRpR2VvbSA9IGdlb21ldHJ5O1xuICB9XG5cbiAgcmV0dXJuIG11bHRpR2VvbTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NhZmFyaSgpIHtcbiAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb2xvclplcm9QYWRkaW5nKGhleCkge1xuICByZXR1cm4gaGV4Lmxlbmd0aCA9PSAxID8gXCIwXCIgKyBoZXggOiBoZXg7XG59XG5leHBvcnQgZnVuY3Rpb24gcmdiQXJyYXlUb0hleChyZ2IpIHtcbiAgdmFyIHIgPSByZ2JbMF07XG4gIHZhciBnID0gcmdiWzFdO1xuICB2YXIgYiA9IHJnYlsyXTtcblxuICBpZiAociAhPSAociAmIDI1NSkgfHwgZyAhPSAoZyAmIDI1NSkgfHwgYiAhPSAoYiAmIDI1NSkpIHtcbiAgICB0aHJvdyBFcnJvcihcIlxcXCIoXCIgKyByICsgXCIsXCIgKyBnICsgXCIsXCIgKyBiICsgXCIpXFxcIiBpcyBub3QgYSB2YWxpZCBSR0IgY29sb3JcIik7XG4gIH1cblxuICB2YXIgaGV4UiA9IGNvbG9yWmVyb1BhZGRpbmcoci50b1N0cmluZygxNikpO1xuICB2YXIgaGV4RyA9IGNvbG9yWmVyb1BhZGRpbmcoZy50b1N0cmluZygxNikpO1xuICB2YXIgaGV4QiA9IGNvbG9yWmVyb1BhZGRpbmcoYi50b1N0cmluZygxNikpO1xuICByZXR1cm4gXCIjXCIgKyBoZXhSICsgaGV4RyArIGhleEI7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcbiAgdmFyIHF1ZXJ5RGF0YSA9IHt9O1xuXG4gIGlmIChxdWVyeVN0cmluZykge1xuICAgIHZhciBwYWlycyA9IHF1ZXJ5U3RyaW5nLnN1YnN0cmluZygxKS5zcGxpdCgnJicpO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShwYWlycyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgcGFpciA9IF9zdGVwLnZhbHVlO1xuICAgICAgdmFyIGluZGV4T2ZFcXVhbHMgPSBwYWlyLmluZGV4T2YoJz0nKTtcblxuICAgICAgaWYgKGluZGV4T2ZFcXVhbHMgPj0gMCkge1xuICAgICAgICB2YXIgbmFtZSA9IHBhaXIuc3Vic3RyaW5nKDAsIGluZGV4T2ZFcXVhbHMpO1xuICAgICAgICB2YXIgdmFsdWUgPSBwYWlyLnN1YnN0cmluZyhpbmRleE9mRXF1YWxzICsgMSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBxdWVyeURhdGFbZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIk1hbGZvcm1lZCBwYXJhbWV0ZXI6IFwiICsgbmFtZSArIFwiPVwiICsgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWVyeURhdGFbcGFpcl0gPSAnJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcXVlcnlEYXRhO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVF1ZXJ5U3RyaW5nKHF1ZXJ5RGF0YSkge1xuICB2YXIgcXVlcnlJdGVtID0gW107XG5cbiAgZm9yICh2YXIga2V5IGluIHF1ZXJ5RGF0YSkge1xuICAgIHZhciB2YWx1ZSA9IHF1ZXJ5RGF0YVtrZXldO1xuICAgIHF1ZXJ5SXRlbS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgfVxuXG4gIHJldHVybiBxdWVyeUl0ZW0uam9pbignJicpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNvbmRpdGlvbihldmVudCkge1xuICByZXR1cm4gbm9Nb2RpZmllcktleXMoZXZlbnQpICYmIHNpbmdsZUNsaWNrKGV2ZW50KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnRUb1JlY3RhbmdsZShleHRlbnQpIHtcbiAgdmFyIHJlc3VsdCA9IFtnZXRUb3BMZWZ0KGV4dGVudCksIGdldFRvcFJpZ2h0KGV4dGVudCksIGdldEJvdHRvbVJpZ2h0KGV4dGVudCksIGdldEJvdHRvbUxlZnQoZXh0ZW50KSwgZ2V0VG9wTGVmdChleHRlbnQpXTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkcGkoKSB7XG4gIHJldHVybiA5Njtcbn0iXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbEZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdlBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDclNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOUhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbGFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbERBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDemJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcnVCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3RCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0xBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1BBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0hBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzVoQkE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0FBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOVlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3YUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDVkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1BBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDalBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdkdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ2pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzdLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3R6Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDVkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3RGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDMVZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM3bkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoYkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBLFdBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxXQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlnR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDckdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzVDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN6RkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0R0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1SkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN4RUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM5REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDekRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0RBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0RBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0RkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3RIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3SUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9EQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0SUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcEVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2RUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9HQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2RUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzVIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdkRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BOQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcEVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNyRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM5REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0hBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2S0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvSkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdExBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9DQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDMUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0dBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0ZBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNuSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN2QkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNWQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQ3pFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDVkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN2REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNqRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0R0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoc0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDOUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDcEpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3hEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDZEE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0akJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0RBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN4QkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3AyQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNKQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNmQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDckRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9QQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUN2S0E7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0FBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pYQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN4RUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNyRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzdMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3ZEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDdFhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDL1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0lBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvWUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNQQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcklBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdExBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdEdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN4R0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2hIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbEpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDZkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDblNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMzRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZMQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNOQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3J3QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2pCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDcklBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzlDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDaEhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0hBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0EiLCJzb3VyY2VSb290IjoiIn0=