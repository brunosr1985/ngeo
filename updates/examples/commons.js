(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["commons"],{

/***/ "./contribs/gmf/src/icons/circle.svg":
/*!*******************************************!*\
  !*** ./contribs/gmf/src/icons/circle.svg ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"><path d=\"M1.14 8c0-1.242.308-2.383.92-3.432a6.837 6.837 0 012.496-2.496 6.684 6.684 0 013.432-.92c1.242 0 2.383.308 3.432.92a6.837 6.837 0 012.496 2.496c.612 1.049.92 2.19.92 3.432a6.68 6.68 0 01-.577 2.746c.409.444.651 1.039.593 1.653-.06 1.064-.956 2.022-2.028 2.09a2.254 2.254 0 01-1.591-.467 6.682 6.682 0 01-3.245.826 6.684 6.684 0 01-3.432-.92 6.837 6.837 0 01-2.496-2.496A6.684 6.684 0 011.14 8zm1.138 0c0 .772.15 1.51.453 2.215a5.707 5.707 0 001.216 1.81 5.816 5.816 0 001.826 1.217 5.533 5.533 0 002.215.468c.773-.001 1.51-.166 2.215-.468.11-.048.222-.104.328-.156-.003-.007-.014-.01-.016-.016a2.211 2.211 0 01-.156-.874c-.008-1.26 1.23-2.349 2.48-2.184.145.014.285.05.422.094.004.001.01-.002.015 0 .274-.67.421-1.373.421-2.106 0-.773-.164-1.511-.468-2.215a5.801 5.801 0 00-1.216-1.825 5.711 5.711 0 00-1.81-1.217 5.553 5.553 0 00-2.215-.453 5.53 5.53 0 00-2.215.453A5.805 5.805 0 003.947 3.96a5.786 5.786 0 00-1.216 1.825A5.543 5.543 0 002.278 8zm9.438 4.243a.784.784 0 00.11.421.97.97 0 00.046.078.873.873 0 00.203.203c.017.013.03.035.047.047.01.007.021.01.031.016a.779.779 0 00.811.062c.37-.159.579-.595.515-.983v-.015a.751.751 0 00-.172-.36.792.792 0 00-.156-.155c-.02-.015-.04-.018-.062-.031a.931.931 0 00-.11-.063c-.04-.017-.081-.035-.124-.047-.026-.007-.051-.01-.078-.015a1.078 1.078 0 00-.218-.016c.004-.006.011-.01.015-.015a.8.8 0 00-.561.234.874.874 0 00-.297.64z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/line.svg":
/*!*****************************************!*\
  !*** ./contribs/gmf/src/icons/line.svg ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"><path d=\"M6.626.267C5.366.26 4.27 1.498 4.436 2.75c.109 1.153 1.216 2.129 2.384 2.017 1.064-.06 2.031-.96 2.1-2.031.1-.975-.497-1.977-1.424-2.313a2.198 2.198 0 00-.87-.155zm.046 1.364c.605-.03 1.095.7.819 1.244-.215.498-.93.71-1.353.344-.392-.3-.473-.94-.112-1.293.16-.18.4-.294.645-.295zM3.916 8.397c-1.256-.007-2.353 1.225-2.19 2.475.104 1.16 1.223 2.142 2.397 2.023 1.062-.066 2.019-.962 2.087-2.036.093-.932-.446-1.892-1.312-2.259a2.192 2.192 0 00-.983-.203zm.048 1.363c.612-.028 1.104.716.807 1.266-.228.493-.94.682-1.355.313-.377-.3-.457-.923-.106-1.276a.889.889 0 01.654-.303zm8.05 1.467c-1.25-.023-2.353 1.178-2.224 2.422.075 1.165 1.179 2.174 2.358 2.078 1.07-.043 2.05-.936 2.13-2.016.103-.936-.434-1.905-1.301-2.278-.301-.14-.631-.214-.963-.207zm.008 1.364c.615-.037 1.115.708.821 1.26-.217.478-.906.684-1.322.344-.424-.297-.5-.976-.113-1.332a.879.879 0 01.615-.272zm-6.81-2.163c-.143.417-.282.832-.434 1.245 1.92.67 3.84 1.333 5.755 2.011.153-.432.296-.863.455-1.293-1.92-.67-3.841-1.335-5.759-2.011l-.017.048zm.426-6.874C4.973 5.436 4.313 7.32 3.642 9.2c.432.15.863.302 1.292.458.668-1.899 1.336-3.798 2.012-5.694-.432-.15-.862-.301-1.29-.458l-.018.047z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/point.svg":
/*!******************************************!*\
  !*** ./contribs/gmf/src/icons/point.svg ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"><path d=\"M7.948 10.25c-1.26.009-2.349-1.23-2.184-2.48.11-1.153 1.218-2.124 2.387-2.013 1.064.06 2.022.956 2.09 2.028.1.975-.492 1.973-1.42 2.31a2.211 2.211 0 01-.873.155zm.047-1.357c.606.03 1.103-.703.827-1.248-.215-.499-.934-.709-1.357-.343-.393.3-.47.941-.11 1.295.16.18.395.295.64.296z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/polygon.svg":
/*!********************************************!*\
  !*** ./contribs/gmf/src/icons/polygon.svg ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"><path d=\"M5.045-.029c-1.26-.008-2.35 1.23-2.184 2.48.06.632.43 1.202.936 1.576-.479 1.358-.968 2.714-1.45 4.072-1.257-.008-2.363 1.23-2.2 2.48.105 1.16 1.228 2.13 2.402 2.012a2.295 2.295 0 001.45-.67c1.273.53 2.553 1.056 3.823 1.59a1.992 1.992 0 000 .438c.074 1.165 1.176 2.17 2.355 2.074 1.07-.042 2.057-.932 2.138-2.012a2.295 2.295 0 00-.453-1.607c.435-.593.873-1.186 1.31-1.778.186.04.369.047.562.031 1.067-.047 2.04-.935 2.122-2.012.11-.964-.464-1.959-1.373-2.31a2.202 2.202 0 00-.343-.108 444.27 444.27 0 01-.125-1.857c.743-.313 1.326-1.036 1.388-1.856.11-.964-.463-1.958-1.372-2.309a2.196 2.196 0 00-.92-.172c-.08 0-.158-.008-.235 0-.841.098-1.565.75-1.84 1.545-1.26-.004-2.53-.009-3.791-.016C7.045.918 6.564.361 5.919.127a2.211 2.211 0 00-.874-.156zm.047 1.357c.605-.03 1.103.704.827 1.248-.215.499-.934.71-1.358.343-.392-.299-.47-.94-.109-1.294a.874.874 0 01.64-.297zm8.08.063c.62-.026 1.099.719.796 1.263-.232.498-.967.692-1.373.297-.361-.308-.431-.939-.078-1.28a.899.899 0 01.656-.28zM7.246 2.919c1.257.005 2.517.024 3.775.032a2.333 2.333 0 001.622 1.513c.043.624.084 1.248.125 1.872-.877.376-1.511 1.322-1.388 2.293.042.482.267.94.592 1.295-.416.567-.826 1.136-1.248 1.7a2.045 2.045 0 00-.67-.109v.016c-.632-.012-1.235.287-1.654.748-1.26-.525-2.517-1.063-3.775-1.59.005-.043.013-.083.015-.126a2.274 2.274 0 00-.967-2.074c.472-1.342.944-2.685 1.42-4.025.052 0 .104.005.156 0 .898-.05 1.72-.7 1.997-1.545zm6.38 4.602c.62-.025 1.098.72.796 1.264-.233.497-.967.691-1.373.296-.362-.308-.432-.938-.078-1.279a.899.899 0 01.655-.28zM2.393 9.456c.612-.028 1.109.729.811 1.28-.228.493-.942.68-1.357.311-.377-.3-.46-.926-.11-1.28a.9.9 0 01.656-.311zm7.66 3.432c.615-.037 1.12.711.826 1.263-.217.48-.91.684-1.326.344-.423-.297-.495-.986-.109-1.342a.857.857 0 01.609-.265z\"></path></svg>"

/***/ }),

/***/ "./contribs/gmf/src/icons/rectangle.svg":
/*!**********************************************!*\
  !*** ./contribs/gmf/src/icons/rectangle.svg ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\"><path d=\"M2.317 14.491a2.203 2.203 0 01-.874-.156C.257 13.91-.343 12.38.242 11.262a2.265 2.265 0 011.28-1.139l-.016-4.258c-.02-.008-.042-.008-.063-.016C.258 5.424-.343 3.894.243 2.776.74 1.731 2.115 1.194 3.174 1.7c.572.246 1.007.747 1.217 1.326L11.6 3.01c.028-.077.055-.16.093-.234.5-1.045 1.874-1.582 2.933-1.076.979.422 1.584 1.59 1.28 2.62a2.302 2.302 0 01-1.467 1.576l.016 4.228c.057.02.115.035.171.062.979.422 1.584 1.59 1.28 2.621-.24.95-1.151 1.688-2.137 1.685a2.203 2.203 0 01-.874-.156c-.625-.224-1.083-.757-1.295-1.373l-7.207.015c-.302.864-1.151 1.516-2.075 1.513zm-.14-1.357c.508.052 1.045-.42.982-.951-.03-.542-.63-.978-1.154-.78-.472.146-.764.713-.547 1.17.089.223.27.413.5.499a.79.79 0 00.218.062zm11.45 0c.509.052 1.045-.42.982-.951-.03-.542-.63-.978-1.154-.78-.472.146-.764.713-.546 1.17.088.223.27.413.499.499a.79.79 0 00.218.062zM4.39 11.527l7.192-.015c.03-.084.067-.17.109-.25.259-.542.747-.944 1.31-1.139V5.88c-.036-.012-.073-.017-.109-.031-.628-.225-1.085-.768-1.295-1.388H4.407a2.334 2.334 0 01-1.42 1.435l.015 4.227c.056.02.118.037.172.063.576.248 1.009.757 1.217 1.342zm-2.215-6.88c.51.052 1.046-.42.983-.95-.03-.543-.63-.979-1.154-.781-.472.146-.764.714-.547 1.17.089.224.27.414.5.5a.79.79 0 00.218.062zm11.45 0c.51.052 1.046-.42.983-.95-.03-.543-.63-.979-1.154-.781-.472.146-.764.714-.546 1.17.088.224.27.414.499.5a.79.79 0 00.218.062z\"></path></svg>"

/***/ }),

/***/ "./examples/base.css":
/*!***************************!*\
  !*** ./examples/base.css ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./examples/common_dependencies.js":
/*!*****************************************!*\
  !*** ./examples/common_dependencies.js ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_dependencies_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common_dependencies.scss */ "./examples/common_dependencies.scss");
/* harmony import */ var _common_dependencies_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_common_dependencies_scss__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _base_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.css */ "./examples/base.css");
/* harmony import */ var _base_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_base_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var angular_gettext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular-gettext */ "./node_modules/angular-gettext/index.js");
/* harmony import */ var angular_gettext__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(angular_gettext__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap */ "./node_modules/bootstrap/dist/js/bootstrap.js");
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var ol_ol_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/ol.css */ "./node_modules/ol/ol.css");
/* harmony import */ var ol_ol_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(ol_ol_css__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var bootstrap_dist_css_bootstrap_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.css */ "./node_modules/bootstrap/dist/css/bootstrap.css");
/* harmony import */ var bootstrap_dist_css_bootstrap_css__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bootstrap_dist_css_bootstrap_css__WEBPACK_IMPORTED_MODULE_7__);









if (window.location.protocol === 'http:' && window.location.hostname !== 'localhost') {
  var restOfUrl = window.location.href.substr(5);
  window.location.href = "https:" + restOfUrl;
}

/***/ }),

/***/ "./examples/common_dependencies.scss":
/*!*******************************************!*\
  !*** ./examples/common_dependencies.scss ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./examples/url.js":
/*!*************************!*\
  !*** ./examples/url.js ***!
  \*************************/
/*! exports provided: GMF_DEMO, MAPSERVER_WFS_FEATURE_NS, MAPSERVER_PROXY, PRINT_PROXY, SEARCH */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GMF_DEMO", function() { return GMF_DEMO; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAPSERVER_WFS_FEATURE_NS", function() { return MAPSERVER_WFS_FEATURE_NS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAPSERVER_PROXY", function() { return MAPSERVER_PROXY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRINT_PROXY", function() { return PRINT_PROXY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH", function() { return SEARCH; });
var GMF_DEMO = 'https://geomapfish-demo-2-6.camptocamp.com/';
var MAPSERVER_WFS_FEATURE_NS = 'http://mapserver.gis.umn.edu/mapserver';
var MAPSERVER_PROXY = GMF_DEMO + "mapserv_proxy?ogcserver=Main+PNG";
var PRINT_PROXY = GMF_DEMO + "printproxy";
var SEARCH = GMF_DEMO + "search?query=%QUERY";

/***/ }),

/***/ "./node_modules/@fortawesome/fontawesome-free/css/fontawesome.min.css":
/*!****************************************************************************!*\
  !*** ./node_modules/@fortawesome/fontawesome-free/css/fontawesome.min.css ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/EPSG_2056.js":
/*!*******************************************************!*\
  !*** ./node_modules/@geoblocks/proj/src/EPSG_2056.js ***!
  \*******************************************************/
/*! exports provided: code, proj, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "code", function() { return code; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "proj", function() { return proj; });
/* harmony import */ var _somerc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./somerc.js */ "./node_modules/@geoblocks/proj/src/somerc.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@geoblocks/proj/src/utils.js");


var code = 'EPSG:2056';
var def = "\n  +proj=" + _somerc_js__WEBPACK_IMPORTED_MODULE_0__["default"] + "\n  +lat_0=46.95240555555556\n  +lon_0=7.439583333333333\n  +k_0=1\n  +x_0=2600000\n  +y_0=1200000\n  +ellps=bessel\n  +towgs84=674.374,15.056,405.346,0,0,0,0\n  +units=m\n  +no_defs\n";
var extent = [2420000, 1030000, 2900000, 1350000];
var proj = Object(_utils_js__WEBPACK_IMPORTED_MODULE_1__["create"])(code, def, extent);
/* harmony default export */ __webpack_exports__["default"] = (code);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/EPSG_21781.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/EPSG_21781.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! exports provided: code, proj, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1019);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/somerc.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/somerc.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(588);

/***/ }),

/***/ "./node_modules/@geoblocks/proj/src/utils.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/@geoblocks/proj/src/utils.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: create */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(589);

/***/ }),

/***/ "./node_modules/angular-float-thead/angular-floatThead.js":
/*!****************************************************************!*\
  !*** ./node_modules/angular-float-thead/angular-floatThead.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery) {/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function () {
  'use strict';

  angular.module('floatThead', []).directive('floatThead', ['$timeout', '$log', floatThead]);

  function floatThead($timeout, $log) {
    var directive = {
      require: '?ngModel',
      scope: {
        floatThead: '=?',
        floatTheadEnabled: '=?'
      },
      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {
        if (!$attrs.hasOwnProperty('floatTheadEnabled')) {
          $scope.floatTheadEnabled = $attrs.floatTheadEnabled = true;
        }

        if (!$attrs.hasOwnProperty('floatThead') || $attrs.floatThead === '') {
          $scope.floatThead = $attrs.floatThead = {};
        }
      }],
      link: link,
      restrict: 'A'
    };
    return directive;

    function link($scope, $element, $attrs, ngModel) {
      $scope.$watch('floatTheadEnabled', function (newVal) {
        if (newVal === true) {
          if (angular.isObject($scope.floatThead)) {
            jQuery($element).floatThead($scope.floatThead);
          }
        } else {
          jQuery($element).floatThead('destroy');
        }
      });
      $scope.$watch('floatThead', function (newVal, oldVal) {
        if (newVal === oldVal || !$scope.floatTheadEnabled) {
          return;
        }

        jQuery($element).floatThead('destroy');

        if (angular.isObject(newVal)) {
          jQuery($element).floatThead(newVal);
        }
      }, true);

      if (ngModel) {
        ngModel.$formatters.push(function () {
          if ($scope.floatTheadEnabled && angular.isObject($scope.floatThead)) {
            $timeout(function () {
              jQuery($element).floatThead('reflow');
            });
          }
        });
      } else {
        $log.info('floatThead: ngModel not provided!');
      }

      $element.bind('update', function () {
        $timeout(function () {
          jQuery($element).floatThead('reflow');
        }, 0);
      });
      $element.bind('$destroy', function () {
        jQuery($element).floatThead('destroy');
      });
    }
  }
})();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./node_modules/angular-gettext/index.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/angular-gettext/index.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1028);

/***/ }),

/***/ "./node_modules/angular-sanitize/index.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/angular-sanitize/index.js from dll-reference vendor ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1030);

/***/ }),

/***/ "./node_modules/angular-ui-date/dist/date.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/angular-ui-date/dist/date.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1034);

/***/ }),

/***/ "./node_modules/angular/index.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/angular/index.js from dll-reference vendor ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(649);

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js?!./node_modules/babel-loader/lib/index.js?!./node_modules/corejs-typeahead/dist/typeahead.bundle.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib??ref--8!./node_modules/babel-loader/lib??ref--9!./node_modules/corejs-typeahead/dist/typeahead.bundle.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(setImmediate) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {
      return root["Bloodhound"] = factory(a0);
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
})(this, function ($) {
  var _ = function () {
    "use strict";

    return {
      isMsie: function isMsie() {
        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
      },
      isBlankString: function isBlankString(str) {
        return !str || /^\s*$/.test(str);
      },
      escapeRegExChars: function escapeRegExChars(str) {
        return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
      },
      isString: function isString(obj) {
        return typeof obj === "string";
      },
      isNumber: function isNumber(obj) {
        return typeof obj === "number";
      },
      isArray: $.isArray,
      isFunction: $.isFunction,
      isObject: $.isPlainObject,
      isUndefined: function isUndefined(obj) {
        return typeof obj === "undefined";
      },
      isElement: function isElement(obj) {
        return !!(obj && obj.nodeType === 1);
      },
      isJQuery: function isJQuery(obj) {
        return obj instanceof $;
      },
      toStr: function toStr(s) {
        return _.isUndefined(s) || s === null ? "" : s + "";
      },
      bind: $.proxy,
      each: function each(collection, cb) {
        $.each(collection, reverseArgs);

        function reverseArgs(index, value) {
          return cb(value, index);
        }
      },
      map: $.map,
      filter: $.grep,
      every: function every(obj, test) {
        var result = true;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (!(result = test.call(null, val, key, obj))) {
            return false;
          }
        });
        return !!result;
      },
      some: function some(obj, test) {
        var result = false;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (result = test.call(null, val, key, obj)) {
            return false;
          }
        });
        return !!result;
      },
      mixin: $.extend,
      identity: function identity(x) {
        return x;
      },
      clone: function clone(obj) {
        return $.extend(true, {}, obj);
      },
      getIdGenerator: function getIdGenerator() {
        var counter = 0;
        return function () {
          return counter++;
        };
      },
      templatify: function templatify(obj) {
        return $.isFunction(obj) ? obj : template;

        function template() {
          return String(obj);
        }
      },
      defer: function defer(fn) {
        setTimeout(fn, 0);
      },
      debounce: function debounce(func, wait, immediate) {
        var timeout, result;
        return function () {
          var context = this,
              args = arguments,
              later,
              callNow;

          later = function later() {
            timeout = null;

            if (!immediate) {
              result = func.apply(context, args);
            }
          };

          callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);

          if (callNow) {
            result = func.apply(context, args);
          }

          return result;
        };
      },
      throttle: function throttle(func, wait) {
        var context, args, timeout, result, previous, later;
        previous = 0;

        later = function later() {
          previous = new Date();
          timeout = null;
          result = func.apply(context, args);
        };

        return function () {
          var now = new Date(),
              remaining = wait - (now - previous);
          context = this;
          args = arguments;

          if (remaining <= 0) {
            clearTimeout(timeout);
            timeout = null;
            previous = now;
            result = func.apply(context, args);
          } else if (!timeout) {
            timeout = setTimeout(later, remaining);
          }

          return result;
        };
      },
      stringify: function stringify(val) {
        return _.isString(val) ? val : JSON.stringify(val);
      },
      guid: function guid() {
        function _p8(s) {
          var p = (Math.random().toString(16) + "000000000").substr(2, 8);
          return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p;
        }

        return "tt-" + _p8() + _p8(true) + _p8(true) + _p8();
      },
      noop: function noop() {}
    };
  }();

  var VERSION = "1.3.1";

  var tokenizers = function () {
    "use strict";

    return {
      nonword: nonword,
      whitespace: whitespace,
      ngram: ngram,
      obj: {
        nonword: getObjTokenizer(nonword),
        whitespace: getObjTokenizer(whitespace),
        ngram: getObjTokenizer(ngram)
      }
    };

    function whitespace(str) {
      str = _.toStr(str);
      return str ? str.split(/\s+/) : [];
    }

    function nonword(str) {
      str = _.toStr(str);
      return str ? str.split(/\W+/) : [];
    }

    function ngram(str) {
      str = _.toStr(str);
      var tokens = [],
          word = "";

      _.each(str.split(""), function (char) {
        if (char.match(/\s+/)) {
          word = "";
        } else {
          tokens.push(word + char);
          word += char;
        }
      });

      return tokens;
    }

    function getObjTokenizer(tokenizer) {
      return function setKey(keys) {
        keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);
        return function tokenize(o) {
          var tokens = [];

          _.each(keys, function (k) {
            tokens = tokens.concat(tokenizer(_.toStr(o[k])));
          });

          return tokens;
        };
      };
    }
  }();

  var LruCache = function () {
    "use strict";

    function LruCache(maxSize) {
      this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
      this.reset();

      if (this.maxSize <= 0) {
        this.set = this.get = $.noop;
      }
    }

    _.mixin(LruCache.prototype, {
      set: function set(key, val) {
        var tailItem = this.list.tail,
            node;

        if (this.size >= this.maxSize) {
          this.list.remove(tailItem);
          delete this.hash[tailItem.key];
          this.size--;
        }

        if (node = this.hash[key]) {
          node.val = val;
          this.list.moveToFront(node);
        } else {
          node = new Node(key, val);
          this.list.add(node);
          this.hash[key] = node;
          this.size++;
        }
      },
      get: function get(key) {
        var node = this.hash[key];

        if (node) {
          this.list.moveToFront(node);
          return node.val;
        }
      },
      reset: function reset() {
        this.size = 0;
        this.hash = {};
        this.list = new List();
      }
    });

    function List() {
      this.head = this.tail = null;
    }

    _.mixin(List.prototype, {
      add: function add(node) {
        if (this.head) {
          node.next = this.head;
          this.head.prev = node;
        }

        this.head = node;
        this.tail = this.tail || node;
      },
      remove: function remove(node) {
        node.prev ? node.prev.next = node.next : this.head = node.next;
        node.next ? node.next.prev = node.prev : this.tail = node.prev;
      },
      moveToFront: function moveToFront(node) {
        this.remove(node);
        this.add(node);
      }
    });

    function Node(key, val) {
      this.key = key;
      this.val = val;
      this.prev = this.next = null;
    }

    return LruCache;
  }();

  var PersistentStorage = function () {
    "use strict";

    var LOCAL_STORAGE;

    try {
      LOCAL_STORAGE = window.localStorage;
      LOCAL_STORAGE.setItem("~~~", "!");
      LOCAL_STORAGE.removeItem("~~~");
    } catch (err) {
      LOCAL_STORAGE = null;
    }

    function PersistentStorage(namespace, override) {
      this.prefix = ["__", namespace, "__"].join("");
      this.ttlKey = "__ttl__";
      this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
      this.ls = override || LOCAL_STORAGE;
      !this.ls && this._noop();
    }

    _.mixin(PersistentStorage.prototype, {
      _prefix: function _prefix(key) {
        return this.prefix + key;
      },
      _ttlKey: function _ttlKey(key) {
        return this._prefix(key) + this.ttlKey;
      },
      _noop: function _noop() {
        this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;
      },
      _safeSet: function _safeSet(key, val) {
        try {
          this.ls.setItem(key, val);
        } catch (err) {
          if (err.name === "QuotaExceededError") {
            this.clear();

            this._noop();
          }
        }
      },
      get: function get(key) {
        if (this.isExpired(key)) {
          this.remove(key);
        }

        return decode(this.ls.getItem(this._prefix(key)));
      },
      set: function set(key, val, ttl) {
        if (_.isNumber(ttl)) {
          this._safeSet(this._ttlKey(key), encode(now() + ttl));
        } else {
          this.ls.removeItem(this._ttlKey(key));
        }

        return this._safeSet(this._prefix(key), encode(val));
      },
      remove: function remove(key) {
        this.ls.removeItem(this._ttlKey(key));
        this.ls.removeItem(this._prefix(key));
        return this;
      },
      clear: function clear() {
        var i,
            keys = gatherMatchingKeys(this.keyMatcher);

        for (i = keys.length; i--;) {
          this.remove(keys[i]);
        }

        return this;
      },
      isExpired: function isExpired(key) {
        var ttl = decode(this.ls.getItem(this._ttlKey(key)));
        return _.isNumber(ttl) && now() > ttl ? true : false;
      }
    });

    return PersistentStorage;

    function now() {
      return new Date().getTime();
    }

    function encode(val) {
      return JSON.stringify(_.isUndefined(val) ? null : val);
    }

    function decode(val) {
      return $.parseJSON(val);
    }

    function gatherMatchingKeys(keyMatcher) {
      var i,
          key,
          keys = [],
          len = LOCAL_STORAGE.length;

      for (i = 0; i < len; i++) {
        if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {
          keys.push(key.replace(keyMatcher, ""));
        }
      }

      return keys;
    }
  }();

  var Transport = function () {
    "use strict";

    var pendingRequestsCount = 0,
        pendingRequests = {},
        sharedCache = new LruCache(10);

    function Transport(o) {
      o = o || {};
      this.maxPendingRequests = o.maxPendingRequests || 6;
      this.cancelled = false;
      this.lastReq = null;
      this._send = o.transport;
      this._get = o.limiter ? o.limiter(this._get) : this._get;
      this._cache = o.cache === false ? new LruCache(0) : sharedCache;
    }

    Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
      this.maxPendingRequests = num;
    };

    Transport.resetCache = function resetCache() {
      sharedCache.reset();
    };

    _.mixin(Transport.prototype, {
      _fingerprint: function fingerprint(o) {
        o = o || {};
        return o.url + o.type + $.param(o.data || {});
      },
      _get: function _get(o, cb) {
        var that = this,
            fingerprint,
            jqXhr;
        fingerprint = this._fingerprint(o);

        if (this.cancelled || fingerprint !== this.lastReq) {
          return;
        }

        if (jqXhr = pendingRequests[fingerprint]) {
          jqXhr.done(done).fail(fail);
        } else if (pendingRequestsCount < this.maxPendingRequests) {
          pendingRequestsCount++;
          pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);
        } else {
          this.onDeckRequestArgs = [].slice.call(arguments, 0);
        }

        function done(resp) {
          cb(null, resp);

          that._cache.set(fingerprint, resp);
        }

        function fail() {
          cb(true);
        }

        function always() {
          pendingRequestsCount--;
          delete pendingRequests[fingerprint];

          if (that.onDeckRequestArgs) {
            that._get.apply(that, that.onDeckRequestArgs);

            that.onDeckRequestArgs = null;
          }
        }
      },
      get: function get(o, cb) {
        var resp, fingerprint;
        cb = cb || $.noop;
        o = _.isString(o) ? {
          url: o
        } : o || {};
        fingerprint = this._fingerprint(o);
        this.cancelled = false;
        this.lastReq = fingerprint;

        if (resp = this._cache.get(fingerprint)) {
          cb(null, resp);
        } else {
          this._get(o, cb);
        }
      },
      cancel: function cancel() {
        this.cancelled = true;
      }
    });

    return Transport;
  }();

  var SearchIndex = window.SearchIndex = function () {
    "use strict";

    var CHILDREN = "c",
        IDS = "i";

    function SearchIndex(o) {
      o = o || {};

      if (!o.datumTokenizer || !o.queryTokenizer) {
        $.error("datumTokenizer and queryTokenizer are both required");
      }

      this.identify = o.identify || _.stringify;
      this.datumTokenizer = o.datumTokenizer;
      this.queryTokenizer = o.queryTokenizer;
      this.matchAnyQueryToken = o.matchAnyQueryToken;
      this.reset();
    }

    _.mixin(SearchIndex.prototype, {
      bootstrap: function bootstrap(o) {
        this.datums = o.datums;
        this.trie = o.trie;
      },
      add: function add(data) {
        var that = this;
        data = _.isArray(data) ? data : [data];

        _.each(data, function (datum) {
          var id, tokens;
          that.datums[id = that.identify(datum)] = datum;
          tokens = normalizeTokens(that.datumTokenizer(datum));

          _.each(tokens, function (token) {
            var node, chars, ch;
            node = that.trie;
            chars = token.split("");

            while (ch = chars.shift()) {
              node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());
              node[IDS].push(id);
            }
          });
        });
      },
      get: function get(ids) {
        var that = this;
        return _.map(ids, function (id) {
          return that.datums[id];
        });
      },
      search: function search(query) {
        var that = this,
            tokens,
            matches;
        tokens = normalizeTokens(this.queryTokenizer(query));

        _.each(tokens, function (token) {
          var node, chars, ch, ids;

          if (matches && matches.length === 0 && !that.matchAnyQueryToken) {
            return false;
          }

          node = that.trie;
          chars = token.split("");

          while (node && (ch = chars.shift())) {
            node = node[CHILDREN][ch];
          }

          if (node && chars.length === 0) {
            ids = node[IDS].slice(0);
            matches = matches ? getIntersection(matches, ids) : ids;
          } else {
            if (!that.matchAnyQueryToken) {
              matches = [];
              return false;
            }
          }
        });

        return matches ? _.map(unique(matches), function (id) {
          return that.datums[id];
        }) : [];
      },
      all: function all() {
        var values = [];

        for (var key in this.datums) {
          values.push(this.datums[key]);
        }

        return values;
      },
      reset: function reset() {
        this.datums = {};
        this.trie = newNode();
      },
      serialize: function serialize() {
        return {
          datums: this.datums,
          trie: this.trie
        };
      }
    });

    return SearchIndex;

    function normalizeTokens(tokens) {
      tokens = _.filter(tokens, function (token) {
        return !!token;
      });
      tokens = _.map(tokens, function (token) {
        return token.toLowerCase();
      });
      return tokens;
    }

    function newNode() {
      var node = {};
      node[IDS] = [];
      node[CHILDREN] = {};
      return node;
    }

    function unique(array) {
      var seen = {},
          uniques = [];

      for (var i = 0, len = array.length; i < len; i++) {
        if (!seen[array[i]]) {
          seen[array[i]] = true;
          uniques.push(array[i]);
        }
      }

      return uniques;
    }

    function getIntersection(arrayA, arrayB) {
      var ai = 0,
          bi = 0,
          intersection = [];
      arrayA = arrayA.sort();
      arrayB = arrayB.sort();
      var lenArrayA = arrayA.length,
          lenArrayB = arrayB.length;

      while (ai < lenArrayA && bi < lenArrayB) {
        if (arrayA[ai] < arrayB[bi]) {
          ai++;
        } else if (arrayA[ai] > arrayB[bi]) {
          bi++;
        } else {
          intersection.push(arrayA[ai]);
          ai++;
          bi++;
        }
      }

      return intersection;
    }
  }();

  var Prefetch = function () {
    "use strict";

    var keys;
    keys = {
      data: "data",
      protocol: "protocol",
      thumbprint: "thumbprint"
    };

    function Prefetch(o) {
      this.url = o.url;
      this.ttl = o.ttl;
      this.cache = o.cache;
      this.prepare = o.prepare;
      this.transform = o.transform;
      this.transport = o.transport;
      this.thumbprint = o.thumbprint;
      this.storage = new PersistentStorage(o.cacheKey);
    }

    _.mixin(Prefetch.prototype, {
      _settings: function settings() {
        return {
          url: this.url,
          type: "GET",
          dataType: "json"
        };
      },
      store: function store(data) {
        if (!this.cache) {
          return;
        }

        this.storage.set(keys.data, data, this.ttl);
        this.storage.set(keys.protocol, location.protocol, this.ttl);
        this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);
      },
      fromCache: function fromCache() {
        var stored = {},
            isExpired;

        if (!this.cache) {
          return null;
        }

        stored.data = this.storage.get(keys.data);
        stored.protocol = this.storage.get(keys.protocol);
        stored.thumbprint = this.storage.get(keys.thumbprint);
        isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;
        return stored.data && !isExpired ? stored.data : null;
      },
      fromNetwork: function fromNetwork(cb) {
        var that = this,
            settings;

        if (!cb) {
          return;
        }

        settings = this.prepare(this._settings());
        this.transport(settings).fail(onError).done(onResponse);

        function onError() {
          cb(true);
        }

        function onResponse(resp) {
          cb(null, that.transform(resp));
        }
      },
      clear: function clear() {
        this.storage.clear();
        return this;
      }
    });

    return Prefetch;
  }();

  var Remote = function () {
    "use strict";

    function Remote(o) {
      this.url = o.url;
      this.prepare = o.prepare;
      this.transform = o.transform;
      this.indexResponse = o.indexResponse;
      this.transport = new Transport({
        cache: o.cache,
        limiter: o.limiter,
        transport: o.transport,
        maxPendingRequests: o.maxPendingRequests
      });
    }

    _.mixin(Remote.prototype, {
      _settings: function settings() {
        return {
          url: this.url,
          type: "GET",
          dataType: "json"
        };
      },
      get: function get(query, cb) {
        var that = this,
            settings;

        if (!cb) {
          return;
        }

        query = query || "";
        settings = this.prepare(query, this._settings());
        return this.transport.get(settings, onResponse);

        function onResponse(err, resp) {
          err ? cb([]) : cb(that.transform(resp));
        }
      },
      cancelLastRequest: function cancelLastRequest() {
        this.transport.cancel();
      }
    });

    return Remote;
  }();

  var oParser = function () {
    "use strict";

    return function parse(o) {
      var defaults, sorter;
      defaults = {
        initialize: true,
        identify: _.stringify,
        datumTokenizer: null,
        queryTokenizer: null,
        matchAnyQueryToken: false,
        sufficient: 5,
        indexRemote: false,
        sorter: null,
        local: [],
        prefetch: null,
        remote: null
      };
      o = _.mixin(defaults, o || {});
      !o.datumTokenizer && $.error("datumTokenizer is required");
      !o.queryTokenizer && $.error("queryTokenizer is required");
      sorter = o.sorter;
      o.sorter = sorter ? function (x) {
        return x.sort(sorter);
      } : _.identity;
      o.local = _.isFunction(o.local) ? o.local() : o.local;
      o.prefetch = parsePrefetch(o.prefetch);
      o.remote = parseRemote(o.remote);
      return o;
    };

    function parsePrefetch(o) {
      var defaults;

      if (!o) {
        return null;
      }

      defaults = {
        url: null,
        ttl: 24 * 60 * 60 * 1e3,
        cache: true,
        cacheKey: null,
        thumbprint: "",
        prepare: _.identity,
        transform: _.identity,
        transport: null
      };
      o = _.isString(o) ? {
        url: o
      } : o;
      o = _.mixin(defaults, o);
      !o.url && $.error("prefetch requires url to be set");
      o.transform = o.filter || o.transform;
      o.cacheKey = o.cacheKey || o.url;
      o.thumbprint = VERSION + o.thumbprint;
      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
      return o;
    }

    function parseRemote(o) {
      var defaults;

      if (!o) {
        return;
      }

      defaults = {
        url: null,
        cache: true,
        prepare: null,
        replace: null,
        wildcard: null,
        limiter: null,
        rateLimitBy: "debounce",
        rateLimitWait: 300,
        transform: _.identity,
        transport: null
      };
      o = _.isString(o) ? {
        url: o
      } : o;
      o = _.mixin(defaults, o);
      !o.url && $.error("remote requires url to be set");
      o.transform = o.filter || o.transform;
      o.prepare = toRemotePrepare(o);
      o.limiter = toLimiter(o);
      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
      delete o.replace;
      delete o.wildcard;
      delete o.rateLimitBy;
      delete o.rateLimitWait;
      return o;
    }

    function toRemotePrepare(o) {
      var prepare, replace, wildcard;
      prepare = o.prepare;
      replace = o.replace;
      wildcard = o.wildcard;

      if (prepare) {
        return prepare;
      }

      if (replace) {
        prepare = prepareByReplace;
      } else if (o.wildcard) {
        prepare = prepareByWildcard;
      } else {
        prepare = identityPrepare;
      }

      return prepare;

      function prepareByReplace(query, settings) {
        settings.url = replace(settings.url, query);
        return settings;
      }

      function prepareByWildcard(query, settings) {
        settings.url = settings.url.replace(wildcard, encodeURIComponent(query));
        return settings;
      }

      function identityPrepare(query, settings) {
        return settings;
      }
    }

    function toLimiter(o) {
      var limiter, method, wait;
      limiter = o.limiter;
      method = o.rateLimitBy;
      wait = o.rateLimitWait;

      if (!limiter) {
        limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);
      }

      return limiter;

      function debounce(wait) {
        return function debounce(fn) {
          return _.debounce(fn, wait);
        };
      }

      function throttle(wait) {
        return function throttle(fn) {
          return _.throttle(fn, wait);
        };
      }
    }

    function callbackToDeferred(fn) {
      return function wrapper(o) {
        var deferred = $.Deferred();
        fn(o, onSuccess, onError);
        return deferred;

        function onSuccess(resp) {
          _.defer(function () {
            deferred.resolve(resp);
          });
        }

        function onError(err) {
          _.defer(function () {
            deferred.reject(err);
          });
        }
      };
    }
  }();

  var Bloodhound = function () {
    "use strict";

    var old;
    old = window && window.Bloodhound;

    function Bloodhound(o) {
      o = oParser(o);
      this.sorter = o.sorter;
      this.identify = o.identify;
      this.sufficient = o.sufficient;
      this.indexRemote = o.indexRemote;
      this.local = o.local;
      this.remote = o.remote ? new Remote(o.remote) : null;
      this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;
      this.index = new SearchIndex({
        identify: this.identify,
        datumTokenizer: o.datumTokenizer,
        queryTokenizer: o.queryTokenizer
      });
      o.initialize !== false && this.initialize();
    }

    Bloodhound.noConflict = function noConflict() {
      window && (window.Bloodhound = old);
      return Bloodhound;
    };

    Bloodhound.tokenizers = tokenizers;

    _.mixin(Bloodhound.prototype, {
      __ttAdapter: function ttAdapter() {
        var that = this;
        return this.remote ? withAsync : withoutAsync;

        function withAsync(query, sync, async) {
          return that.search(query, sync, async);
        }

        function withoutAsync(query, sync) {
          return that.search(query, sync);
        }
      },
      _loadPrefetch: function loadPrefetch() {
        var that = this,
            deferred,
            serialized;
        deferred = $.Deferred();

        if (!this.prefetch) {
          deferred.resolve();
        } else if (serialized = this.prefetch.fromCache()) {
          this.index.bootstrap(serialized);
          deferred.resolve();
        } else {
          this.prefetch.fromNetwork(done);
        }

        return deferred.promise();

        function done(err, data) {
          if (err) {
            return deferred.reject();
          }

          that.add(data);
          that.prefetch.store(that.index.serialize());
          deferred.resolve();
        }
      },
      _initialize: function initialize() {
        var that = this,
            deferred;
        this.clear();

        (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);

        return this.initPromise;

        function addLocalToIndex() {
          that.add(that.local);
        }
      },
      initialize: function initialize(force) {
        return !this.initPromise || force ? this._initialize() : this.initPromise;
      },
      add: function add(data) {
        this.index.add(data);
        return this;
      },
      get: function get(ids) {
        ids = _.isArray(ids) ? ids : [].slice.call(arguments);
        return this.index.get(ids);
      },
      search: function search(query, sync, async) {
        var that = this,
            local;
        sync = sync || _.noop;
        async = async || _.noop;
        local = this.sorter(this.index.search(query));
        sync(this.remote ? local.slice() : local);

        if (this.remote && local.length < this.sufficient) {
          this.remote.get(query, processRemote);
        } else if (this.remote) {
          this.remote.cancelLastRequest();
        }

        return this;

        function processRemote(remote) {
          var nonDuplicates = [];

          _.each(remote, function (r) {
            !_.some(local, function (l) {
              return that.identify(r) === that.identify(l);
            }) && nonDuplicates.push(r);
          });

          that.indexRemote && that.add(nonDuplicates);
          async(nonDuplicates);
        }
      },
      all: function all() {
        return this.index.all();
      },
      clear: function clear() {
        this.index.reset();
        return this;
      },
      clearPrefetchCache: function clearPrefetchCache() {
        this.prefetch && this.prefetch.clear();
        return this;
      },
      clearRemoteCache: function clearRemoteCache() {
        Transport.resetCache();
        return this;
      },
      ttAdapter: function ttAdapter() {
        return this.__ttAdapter();
      }
    });

    return Bloodhound;
  }();

  return Bloodhound;
});

(function (root, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {
      return factory(a0);
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
})(this, function ($) {
  var _ = function () {
    "use strict";

    return {
      isMsie: function isMsie() {
        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
      },
      isBlankString: function isBlankString(str) {
        return !str || /^\s*$/.test(str);
      },
      escapeRegExChars: function escapeRegExChars(str) {
        return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
      },
      isString: function isString(obj) {
        return typeof obj === "string";
      },
      isNumber: function isNumber(obj) {
        return typeof obj === "number";
      },
      isArray: $.isArray,
      isFunction: $.isFunction,
      isObject: $.isPlainObject,
      isUndefined: function isUndefined(obj) {
        return typeof obj === "undefined";
      },
      isElement: function isElement(obj) {
        return !!(obj && obj.nodeType === 1);
      },
      isJQuery: function isJQuery(obj) {
        return obj instanceof $;
      },
      toStr: function toStr(s) {
        return _.isUndefined(s) || s === null ? "" : s + "";
      },
      bind: $.proxy,
      each: function each(collection, cb) {
        $.each(collection, reverseArgs);

        function reverseArgs(index, value) {
          return cb(value, index);
        }
      },
      map: $.map,
      filter: $.grep,
      every: function every(obj, test) {
        var result = true;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (!(result = test.call(null, val, key, obj))) {
            return false;
          }
        });
        return !!result;
      },
      some: function some(obj, test) {
        var result = false;

        if (!obj) {
          return result;
        }

        $.each(obj, function (key, val) {
          if (result = test.call(null, val, key, obj)) {
            return false;
          }
        });
        return !!result;
      },
      mixin: $.extend,
      identity: function identity(x) {
        return x;
      },
      clone: function clone(obj) {
        return $.extend(true, {}, obj);
      },
      getIdGenerator: function getIdGenerator() {
        var counter = 0;
        return function () {
          return counter++;
        };
      },
      templatify: function templatify(obj) {
        return $.isFunction(obj) ? obj : template;

        function template() {
          return String(obj);
        }
      },
      defer: function defer(fn) {
        setTimeout(fn, 0);
      },
      debounce: function debounce(func, wait, immediate) {
        var timeout, result;
        return function () {
          var context = this,
              args = arguments,
              later,
              callNow;

          later = function later() {
            timeout = null;

            if (!immediate) {
              result = func.apply(context, args);
            }
          };

          callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);

          if (callNow) {
            result = func.apply(context, args);
          }

          return result;
        };
      },
      throttle: function throttle(func, wait) {
        var context, args, timeout, result, previous, later;
        previous = 0;

        later = function later() {
          previous = new Date();
          timeout = null;
          result = func.apply(context, args);
        };

        return function () {
          var now = new Date(),
              remaining = wait - (now - previous);
          context = this;
          args = arguments;

          if (remaining <= 0) {
            clearTimeout(timeout);
            timeout = null;
            previous = now;
            result = func.apply(context, args);
          } else if (!timeout) {
            timeout = setTimeout(later, remaining);
          }

          return result;
        };
      },
      stringify: function stringify(val) {
        return _.isString(val) ? val : JSON.stringify(val);
      },
      guid: function guid() {
        function _p8(s) {
          var p = (Math.random().toString(16) + "000000000").substr(2, 8);
          return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p;
        }

        return "tt-" + _p8() + _p8(true) + _p8(true) + _p8();
      },
      noop: function noop() {}
    };
  }();

  var WWW = function () {
    "use strict";

    var defaultClassNames = {
      wrapper: "twitter-typeahead",
      input: "tt-input",
      hint: "tt-hint",
      menu: "tt-menu",
      dataset: "tt-dataset",
      suggestion: "tt-suggestion",
      selectable: "tt-selectable",
      empty: "tt-empty",
      open: "tt-open",
      cursor: "tt-cursor",
      highlight: "tt-highlight"
    };
    return build;

    function build(o) {
      var www, classes;
      classes = _.mixin({}, defaultClassNames, o);
      www = {
        css: buildCss(),
        classes: classes,
        html: buildHtml(classes),
        selectors: buildSelectors(classes)
      };
      return {
        css: www.css,
        html: www.html,
        classes: www.classes,
        selectors: www.selectors,
        mixin: function mixin(o) {
          _.mixin(o, www);
        }
      };
    }

    function buildHtml(c) {
      return {
        wrapper: '<span class="' + c.wrapper + '"></span>',
        menu: '<div role="listbox" class="' + c.menu + '"></div>'
      };
    }

    function buildSelectors(classes) {
      var selectors = {};

      _.each(classes, function (v, k) {
        selectors[k] = "." + v;
      });

      return selectors;
    }

    function buildCss() {
      var css = {
        wrapper: {
          position: "relative",
          display: "inline-block"
        },
        hint: {
          position: "absolute",
          top: "0",
          left: "0",
          borderColor: "transparent",
          boxShadow: "none",
          opacity: "1"
        },
        input: {
          position: "relative",
          verticalAlign: "top",
          backgroundColor: "transparent"
        },
        inputWithNoHint: {
          position: "relative",
          verticalAlign: "top"
        },
        menu: {
          position: "absolute",
          top: "100%",
          left: "0",
          zIndex: "100",
          display: "none"
        },
        ltr: {
          left: "0",
          right: "auto"
        },
        rtl: {
          left: "auto",
          right: " 0"
        }
      };

      if (_.isMsie()) {
        _.mixin(css.input, {
          backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
        });
      }

      return css;
    }
  }();

  var EventBus = function () {
    "use strict";

    var namespace, deprecationMap;
    namespace = "typeahead:";
    deprecationMap = {
      render: "rendered",
      cursorchange: "cursorchanged",
      select: "selected",
      autocomplete: "autocompleted"
    };

    function EventBus(o) {
      if (!o || !o.el) {
        $.error("EventBus initialized without el");
      }

      this.$el = $(o.el);
    }

    _.mixin(EventBus.prototype, {
      _trigger: function _trigger(type, args) {
        var $e = $.Event(namespace + type);
        this.$el.trigger.call(this.$el, $e, args || []);
        return $e;
      },
      before: function before(type) {
        var args, $e;
        args = [].slice.call(arguments, 1);
        $e = this._trigger("before" + type, args);
        return $e.isDefaultPrevented();
      },
      trigger: function trigger(type) {
        var deprecatedType;

        this._trigger(type, [].slice.call(arguments, 1));

        if (deprecatedType = deprecationMap[type]) {
          this._trigger(deprecatedType, [].slice.call(arguments, 1));
        }
      }
    });

    return EventBus;
  }();

  var EventEmitter = function () {
    "use strict";

    var splitter = /\s+/,
        nextTick = getNextTick();
    return {
      onSync: onSync,
      onAsync: onAsync,
      off: off,
      trigger: trigger
    };

    function on(method, types, cb, context) {
      var type;

      if (!cb) {
        return this;
      }

      types = types.split(splitter);
      cb = context ? bindContext(cb, context) : cb;
      this._callbacks = this._callbacks || {};

      while (type = types.shift()) {
        this._callbacks[type] = this._callbacks[type] || {
          sync: [],
          async: []
        };

        this._callbacks[type][method].push(cb);
      }

      return this;
    }

    function onAsync(types, cb, context) {
      return on.call(this, "async", types, cb, context);
    }

    function onSync(types, cb, context) {
      return on.call(this, "sync", types, cb, context);
    }

    function off(types) {
      var type;

      if (!this._callbacks) {
        return this;
      }

      types = types.split(splitter);

      while (type = types.shift()) {
        delete this._callbacks[type];
      }

      return this;
    }

    function trigger(types) {
      var type, callbacks, args, syncFlush, asyncFlush;

      if (!this._callbacks) {
        return this;
      }

      types = types.split(splitter);
      args = [].slice.call(arguments, 1);

      while ((type = types.shift()) && (callbacks = this._callbacks[type])) {
        syncFlush = getFlush(callbacks.sync, this, [type].concat(args));
        asyncFlush = getFlush(callbacks.async, this, [type].concat(args));
        syncFlush() && nextTick(asyncFlush);
      }

      return this;
    }

    function getFlush(callbacks, context, args) {
      return flush;

      function flush() {
        var cancelled;

        for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {
          cancelled = callbacks[i].apply(context, args) === false;
        }

        return !cancelled;
      }
    }

    function getNextTick() {
      var nextTickFn;

      if (window.setImmediate) {
        nextTickFn = function nextTickSetImmediate(fn) {
          setImmediate(function () {
            fn();
          });
        };
      } else {
        nextTickFn = function nextTickSetTimeout(fn) {
          setTimeout(function () {
            fn();
          }, 0);
        };
      }

      return nextTickFn;
    }

    function bindContext(fn, context) {
      return fn.bind ? fn.bind(context) : function () {
        fn.apply(context, [].slice.call(arguments, 0));
      };
    }
  }();

  var highlight = function (doc) {
    "use strict";

    var defaults = {
      node: null,
      pattern: null,
      tagName: "strong",
      className: null,
      wordsOnly: false,
      caseSensitive: false,
      diacriticInsensitive: false
    };
    var accented = {
      A: "[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]",
      B: "[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]",
      C: "[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]",
      D: "[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]",
      E: "[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]",
      F: "[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]",
      G: "[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]",
      H: "[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]",
      I: "[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]",
      J: "[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]",
      K: "[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]",
      L: "[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]",
      M: "[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]",
      N: "[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]",
      O: "[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]",
      P: "[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]",
      Q: "[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]",
      R: "[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]",
      S: "[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]",
      T: "[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]",
      U: "[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]",
      V: "[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]",
      W: "[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]",
      X: "[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]",
      Y: "[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]",
      Z: "[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]"
    };
    return function hightlight(o) {
      var regex;
      o = _.mixin({}, defaults, o);

      if (!o.node || !o.pattern) {
        return;
      }

      o.pattern = _.isArray(o.pattern) ? o.pattern : [o.pattern];
      regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly, o.diacriticInsensitive);
      traverse(o.node, hightlightTextNode);

      function hightlightTextNode(textNode) {
        var match, patternNode, wrapperNode;

        if (match = regex.exec(textNode.data)) {
          wrapperNode = doc.createElement(o.tagName);
          o.className && (wrapperNode.className = o.className);
          patternNode = textNode.splitText(match.index);
          patternNode.splitText(match[0].length);
          wrapperNode.appendChild(patternNode.cloneNode(true));
          textNode.parentNode.replaceChild(wrapperNode, patternNode);
        }

        return !!match;
      }

      function traverse(el, hightlightTextNode) {
        var childNode,
            TEXT_NODE_TYPE = 3;

        for (var i = 0; i < el.childNodes.length; i++) {
          childNode = el.childNodes[i];

          if (childNode.nodeType === TEXT_NODE_TYPE) {
            i += hightlightTextNode(childNode) ? 1 : 0;
          } else {
            traverse(childNode, hightlightTextNode);
          }
        }
      }
    };

    function accent_replacer(chr) {
      return accented[chr.toUpperCase()] || chr;
    }

    function getRegex(patterns, caseSensitive, wordsOnly, diacriticInsensitive) {
      var escapedPatterns = [],
          regexStr;

      for (var i = 0, len = patterns.length; i < len; i++) {
        var escapedWord = _.escapeRegExChars(patterns[i]);

        if (diacriticInsensitive) {
          escapedWord = escapedWord.replace(/\S/g, accent_replacer);
        }

        escapedPatterns.push(escapedWord);
      }

      regexStr = wordsOnly ? "\\b(" + escapedPatterns.join("|") + ")\\b" : "(" + escapedPatterns.join("|") + ")";
      return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, "i");
    }
  }(window.document);

  var Input = function () {
    "use strict";

    var specialKeyCodeMap;
    specialKeyCodeMap = {
      9: "tab",
      27: "esc",
      37: "left",
      39: "right",
      13: "enter",
      38: "up",
      40: "down"
    };

    function Input(o, www) {
      var id;
      o = o || {};

      if (!o.input) {
        $.error("input is missing");
      }

      www.mixin(this);
      this.$hint = $(o.hint);
      this.$input = $(o.input);
      this.$menu = $(o.menu);
      id = this.$input.attr("id") || _.guid();
      this.$menu.attr("id", id + "_listbox");
      this.$hint.attr({
        "aria-hidden": true
      });
      this.$input.attr({
        "aria-owns": id + "_listbox",
        role: "combobox",
        "aria-autocomplete": "list",
        "aria-expanded": false
      });
      this.query = this.$input.val();
      this.queryWhenFocused = this.hasFocus() ? this.query : null;
      this.$overflowHelper = buildOverflowHelper(this.$input);

      this._checkLanguageDirection();

      if (this.$hint.length === 0) {
        this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;
      }

      this.onSync("cursorchange", this._updateDescendent);
    }

    Input.normalizeQuery = function (str) {
      return _.toStr(str).replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
    };

    _.mixin(Input.prototype, EventEmitter, {
      _onBlur: function onBlur() {
        this.resetInputValue();
        this.trigger("blurred");
      },
      _onFocus: function onFocus() {
        this.queryWhenFocused = this.query;
        this.trigger("focused");
      },
      _onKeydown: function onKeydown($e) {
        var keyName = specialKeyCodeMap[$e.which || $e.keyCode];

        this._managePreventDefault(keyName, $e);

        if (keyName && this._shouldTrigger(keyName, $e)) {
          this.trigger(keyName + "Keyed", $e);
        }
      },
      _onInput: function onInput() {
        this._setQuery(this.getInputValue());

        this.clearHintIfInvalid();

        this._checkLanguageDirection();
      },
      _managePreventDefault: function managePreventDefault(keyName, $e) {
        var preventDefault;

        switch (keyName) {
          case "up":
          case "down":
            preventDefault = !withModifier($e);
            break;

          default:
            preventDefault = false;
        }

        preventDefault && $e.preventDefault();
      },
      _shouldTrigger: function shouldTrigger(keyName, $e) {
        var trigger;

        switch (keyName) {
          case "tab":
            trigger = !withModifier($e);
            break;

          default:
            trigger = true;
        }

        return trigger;
      },
      _checkLanguageDirection: function checkLanguageDirection() {
        var dir = (this.$input.css("direction") || "ltr").toLowerCase();

        if (this.dir !== dir) {
          this.dir = dir;
          this.$hint.attr("dir", dir);
          this.trigger("langDirChanged", dir);
        }
      },
      _setQuery: function setQuery(val, silent) {
        var areEquivalent, hasDifferentWhitespace;
        areEquivalent = areQueriesEquivalent(val, this.query);
        hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;
        this.query = val;

        if (!silent && !areEquivalent) {
          this.trigger("queryChanged", this.query);
        } else if (!silent && hasDifferentWhitespace) {
          this.trigger("whitespaceChanged", this.query);
        }
      },
      _updateDescendent: function updateDescendent(event, id) {
        this.$input.attr("aria-activedescendant", id);
      },
      bind: function bind() {
        var that = this,
            onBlur,
            onFocus,
            onKeydown,
            onInput;
        onBlur = _.bind(this._onBlur, this);
        onFocus = _.bind(this._onFocus, this);
        onKeydown = _.bind(this._onKeydown, this);
        onInput = _.bind(this._onInput, this);
        this.$input.on("blur.tt", onBlur).on("focus.tt", onFocus).on("keydown.tt", onKeydown);

        if (!_.isMsie() || _.isMsie() > 9) {
          this.$input.on("input.tt", onInput);
        } else {
          this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function ($e) {
            if (specialKeyCodeMap[$e.which || $e.keyCode]) {
              return;
            }

            _.defer(_.bind(that._onInput, that, $e));
          });
        }

        return this;
      },
      focus: function focus() {
        this.$input.focus();
      },
      blur: function blur() {
        this.$input.blur();
      },
      getLangDir: function getLangDir() {
        return this.dir;
      },
      getQuery: function getQuery() {
        return this.query || "";
      },
      setQuery: function setQuery(val, silent) {
        this.setInputValue(val);

        this._setQuery(val, silent);
      },
      hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {
        return this.query !== this.queryWhenFocused;
      },
      getInputValue: function getInputValue() {
        return this.$input.val();
      },
      setInputValue: function setInputValue(value) {
        this.$input.val(value);
        this.clearHintIfInvalid();

        this._checkLanguageDirection();
      },
      resetInputValue: function resetInputValue() {
        this.setInputValue(this.query);
      },
      getHint: function getHint() {
        return this.$hint.val();
      },
      setHint: function setHint(value) {
        this.$hint.val(value);
      },
      clearHint: function clearHint() {
        this.setHint("");
      },
      clearHintIfInvalid: function clearHintIfInvalid() {
        var val, hint, valIsPrefixOfHint, isValid;
        val = this.getInputValue();
        hint = this.getHint();
        valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;
        isValid = val !== "" && valIsPrefixOfHint && !this.hasOverflow();
        !isValid && this.clearHint();
      },
      hasFocus: function hasFocus() {
        return this.$input.is(":focus");
      },
      hasOverflow: function hasOverflow() {
        var constraint = this.$input.width() - 2;
        this.$overflowHelper.text(this.getInputValue());
        return this.$overflowHelper.width() >= constraint;
      },
      isCursorAtEnd: function isCursorAtEnd() {
        var valueLength, selectionStart, range;
        valueLength = this.$input.val().length;
        selectionStart = this.$input[0].selectionStart;

        if (_.isNumber(selectionStart)) {
          return selectionStart === valueLength;
        } else if (document.selection) {
          range = document.selection.createRange();
          range.moveStart("character", -valueLength);
          return valueLength === range.text.length;
        }

        return true;
      },
      destroy: function destroy() {
        this.$hint.off(".tt");
        this.$input.off(".tt");
        this.$overflowHelper.remove();
        this.$hint = this.$input = this.$overflowHelper = $("<div>");
      },
      setAriaExpanded: function setAriaExpanded(value) {
        this.$input.attr("aria-expanded", value);
      }
    });

    return Input;

    function buildOverflowHelper($input) {
      return $('<pre aria-hidden="true"></pre>').css({
        position: "absolute",
        visibility: "hidden",
        whiteSpace: "pre",
        fontFamily: $input.css("font-family"),
        fontSize: $input.css("font-size"),
        fontStyle: $input.css("font-style"),
        fontVariant: $input.css("font-variant"),
        fontWeight: $input.css("font-weight"),
        wordSpacing: $input.css("word-spacing"),
        letterSpacing: $input.css("letter-spacing"),
        textIndent: $input.css("text-indent"),
        textRendering: $input.css("text-rendering"),
        textTransform: $input.css("text-transform")
      }).insertAfter($input);
    }

    function areQueriesEquivalent(a, b) {
      return Input.normalizeQuery(a) === Input.normalizeQuery(b);
    }

    function withModifier($e) {
      return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;
    }
  }();

  var Dataset = function () {
    "use strict";

    var keys, nameGenerator;
    keys = {
      dataset: "tt-selectable-dataset",
      val: "tt-selectable-display",
      obj: "tt-selectable-object"
    };
    nameGenerator = _.getIdGenerator();

    function Dataset(o, www) {
      o = o || {};
      o.templates = o.templates || {};
      o.templates.notFound = o.templates.notFound || o.templates.empty;

      if (!o.source) {
        $.error("missing source");
      }

      if (!o.node) {
        $.error("missing node");
      }

      if (o.name && !isValidName(o.name)) {
        $.error("invalid dataset name: " + o.name);
      }

      www.mixin(this);
      this.highlight = !!o.highlight;
      this.name = _.toStr(o.name || nameGenerator());
      this.limit = o.limit || 5;
      this.displayFn = getDisplayFn(o.display || o.displayKey);
      this.templates = getTemplates(o.templates, this.displayFn);
      this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;
      this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;

      this._resetLastSuggestion();

      this.$el = $(o.node).attr("role", "presentation").addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name);
    }

    Dataset.extractData = function extractData(el) {
      var $el = $(el);

      if ($el.data(keys.obj)) {
        return {
          dataset: $el.data(keys.dataset) || "",
          val: $el.data(keys.val) || "",
          obj: $el.data(keys.obj) || null
        };
      }

      return null;
    };

    _.mixin(Dataset.prototype, EventEmitter, {
      _overwrite: function overwrite(query, suggestions) {
        suggestions = suggestions || [];

        if (suggestions.length) {
          this._renderSuggestions(query, suggestions);
        } else if (this.async && this.templates.pending) {
          this._renderPending(query);
        } else if (!this.async && this.templates.notFound) {
          this._renderNotFound(query);
        } else {
          this._empty();
        }

        this.trigger("rendered", suggestions, false, this.name);
      },
      _append: function append(query, suggestions) {
        suggestions = suggestions || [];

        if (suggestions.length && this.$lastSuggestion.length) {
          this._appendSuggestions(query, suggestions);
        } else if (suggestions.length) {
          this._renderSuggestions(query, suggestions);
        } else if (!this.$lastSuggestion.length && this.templates.notFound) {
          this._renderNotFound(query);
        }

        this.trigger("rendered", suggestions, true, this.name);
      },
      _renderSuggestions: function renderSuggestions(query, suggestions) {
        var $fragment;
        $fragment = this._getSuggestionsFragment(query, suggestions);
        this.$lastSuggestion = $fragment.children().last();
        this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));
      },
      _appendSuggestions: function appendSuggestions(query, suggestions) {
        var $fragment, $lastSuggestion;
        $fragment = this._getSuggestionsFragment(query, suggestions);
        $lastSuggestion = $fragment.children().last();
        this.$lastSuggestion.after($fragment);
        this.$lastSuggestion = $lastSuggestion;
      },
      _renderPending: function renderPending(query) {
        var template = this.templates.pending;

        this._resetLastSuggestion();

        template && this.$el.html(template({
          query: query,
          dataset: this.name
        }));
      },
      _renderNotFound: function renderNotFound(query) {
        var template = this.templates.notFound;

        this._resetLastSuggestion();

        template && this.$el.html(template({
          query: query,
          dataset: this.name
        }));
      },
      _empty: function empty() {
        this.$el.empty();

        this._resetLastSuggestion();
      },
      _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {
        var that = this,
            fragment;
        fragment = document.createDocumentFragment();

        _.each(suggestions, function getSuggestionNode(suggestion) {
          var $el, context;
          context = that._injectQuery(query, suggestion);
          $el = $(that.templates.suggestion(context)).data(keys.dataset, that.name).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + " " + that.classes.selectable);
          fragment.appendChild($el[0]);
        });

        this.highlight && highlight({
          className: this.classes.highlight,
          node: fragment,
          pattern: query
        });
        return $(fragment);
      },
      _getFooter: function getFooter(query, suggestions) {
        return this.templates.footer ? this.templates.footer({
          query: query,
          suggestions: suggestions,
          dataset: this.name
        }) : null;
      },
      _getHeader: function getHeader(query, suggestions) {
        return this.templates.header ? this.templates.header({
          query: query,
          suggestions: suggestions,
          dataset: this.name
        }) : null;
      },
      _resetLastSuggestion: function resetLastSuggestion() {
        this.$lastSuggestion = $();
      },
      _injectQuery: function injectQuery(query, obj) {
        return _.isObject(obj) ? _.mixin({
          _query: query
        }, obj) : obj;
      },
      update: function update(query) {
        var that = this,
            canceled = false,
            syncCalled = false,
            rendered = 0;
        this.cancel();

        this.cancel = function cancel() {
          canceled = true;
          that.cancel = $.noop;
          that.async && that.trigger("asyncCanceled", query, that.name);
        };

        this.source(query, sync, async);
        !syncCalled && sync([]);

        function sync(suggestions) {
          if (syncCalled) {
            return;
          }

          syncCalled = true;
          suggestions = (suggestions || []).slice(0, that.limit);
          rendered = suggestions.length;

          that._overwrite(query, suggestions);

          if (rendered < that.limit && that.async) {
            that.trigger("asyncRequested", query, that.name);
          }
        }

        function async(suggestions) {
          suggestions = suggestions || [];

          if (!canceled && rendered < that.limit) {
            that.cancel = $.noop;
            var idx = Math.abs(rendered - that.limit);
            rendered += idx;

            that._append(query, suggestions.slice(0, idx));

            that.async && that.trigger("asyncReceived", query, that.name);
          }
        }
      },
      cancel: $.noop,
      clear: function clear() {
        this._empty();

        this.cancel();
        this.trigger("cleared");
      },
      isEmpty: function isEmpty() {
        return this.$el.is(":empty");
      },
      destroy: function destroy() {
        this.$el = $("<div>");
      }
    });

    return Dataset;

    function getDisplayFn(display) {
      display = display || _.stringify;
      return _.isFunction(display) ? display : displayFn;

      function displayFn(obj) {
        return obj[display];
      }
    }

    function getTemplates(templates, displayFn) {
      return {
        notFound: templates.notFound && _.templatify(templates.notFound),
        pending: templates.pending && _.templatify(templates.pending),
        header: templates.header && _.templatify(templates.header),
        footer: templates.footer && _.templatify(templates.footer),
        suggestion: templates.suggestion ? userSuggestionTemplate : suggestionTemplate
      };

      function userSuggestionTemplate(context) {
        var template = templates.suggestion;
        return $(template(context)).attr("id", _.guid());
      }

      function suggestionTemplate(context) {
        return $('<div role="option">').attr("id", _.guid()).text(displayFn(context));
      }
    }

    function isValidName(str) {
      return /^[_a-zA-Z0-9-]+$/.test(str);
    }
  }();

  var Menu = function () {
    "use strict";

    function Menu(o, www) {
      var that = this;
      o = o || {};

      if (!o.node) {
        $.error("node is required");
      }

      www.mixin(this);
      this.$node = $(o.node);
      this.query = null;
      this.datasets = _.map(o.datasets, initializeDataset);

      function initializeDataset(oDataset) {
        var node = that.$node.find(oDataset.node).first();
        oDataset.node = node.length ? node : $("<div>").appendTo(that.$node);
        return new Dataset(oDataset, www);
      }
    }

    _.mixin(Menu.prototype, EventEmitter, {
      _onSelectableClick: function onSelectableClick($e) {
        this.trigger("selectableClicked", $($e.currentTarget));
      },
      _onRendered: function onRendered(type, dataset, suggestions, async) {
        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
        this.trigger("datasetRendered", dataset, suggestions, async);
      },
      _onCleared: function onCleared() {
        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
        this.trigger("datasetCleared");
      },
      _propagate: function propagate() {
        this.trigger.apply(this, arguments);
      },
      _allDatasetsEmpty: function allDatasetsEmpty() {
        return _.every(this.datasets, _.bind(function isDatasetEmpty(dataset) {
          var isEmpty = dataset.isEmpty();
          this.$node.attr("aria-expanded", !isEmpty);
          return isEmpty;
        }, this));
      },
      _getSelectables: function getSelectables() {
        return this.$node.find(this.selectors.selectable);
      },
      _removeCursor: function _removeCursor() {
        var $selectable = this.getActiveSelectable();
        $selectable && $selectable.removeClass(this.classes.cursor);
      },
      _ensureVisible: function ensureVisible($el) {
        var elTop, elBottom, nodeScrollTop, nodeHeight;
        elTop = $el.position().top;
        elBottom = elTop + $el.outerHeight(true);
        nodeScrollTop = this.$node.scrollTop();
        nodeHeight = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10);

        if (elTop < 0) {
          this.$node.scrollTop(nodeScrollTop + elTop);
        } else if (nodeHeight < elBottom) {
          this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));
        }
      },
      bind: function bind() {
        var that = this,
            onSelectableClick;
        onSelectableClick = _.bind(this._onSelectableClick, this);
        this.$node.on("click.tt", this.selectors.selectable, onSelectableClick);
        this.$node.on("mouseover", this.selectors.selectable, function () {
          that.setCursor($(this));
        });
        this.$node.on("mouseleave", function () {
          that._removeCursor();
        });

        _.each(this.datasets, function (dataset) {
          dataset.onSync("asyncRequested", that._propagate, that).onSync("asyncCanceled", that._propagate, that).onSync("asyncReceived", that._propagate, that).onSync("rendered", that._onRendered, that).onSync("cleared", that._onCleared, that);
        });

        return this;
      },
      isOpen: function isOpen() {
        return this.$node.hasClass(this.classes.open);
      },
      open: function open() {
        this.$node.scrollTop(0);
        this.$node.addClass(this.classes.open);
      },
      close: function close() {
        this.$node.attr("aria-expanded", false);
        this.$node.removeClass(this.classes.open);

        this._removeCursor();
      },
      setLanguageDirection: function setLanguageDirection(dir) {
        this.$node.attr("dir", dir);
      },
      selectableRelativeToCursor: function selectableRelativeToCursor(delta) {
        var $selectables, $oldCursor, oldIndex, newIndex;
        $oldCursor = this.getActiveSelectable();
        $selectables = this._getSelectables();
        oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;
        newIndex = oldIndex + delta;
        newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;
        newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;
        return newIndex === -1 ? null : $selectables.eq(newIndex);
      },
      setCursor: function setCursor($selectable) {
        this._removeCursor();

        if ($selectable = $selectable && $selectable.first()) {
          $selectable.addClass(this.classes.cursor);

          this._ensureVisible($selectable);
        }
      },
      getSelectableData: function getSelectableData($el) {
        return $el && $el.length ? Dataset.extractData($el) : null;
      },
      getActiveSelectable: function getActiveSelectable() {
        var $selectable = this._getSelectables().filter(this.selectors.cursor).first();

        return $selectable.length ? $selectable : null;
      },
      getTopSelectable: function getTopSelectable() {
        var $selectable = this._getSelectables().first();

        return $selectable.length ? $selectable : null;
      },
      update: function update(query) {
        var isValidUpdate = query !== this.query;

        if (isValidUpdate) {
          this.query = query;

          _.each(this.datasets, updateDataset);
        }

        return isValidUpdate;

        function updateDataset(dataset) {
          dataset.update(query);
        }
      },
      empty: function empty() {
        _.each(this.datasets, clearDataset);

        this.query = null;
        this.$node.addClass(this.classes.empty);

        function clearDataset(dataset) {
          dataset.clear();
        }
      },
      destroy: function destroy() {
        this.$node.off(".tt");
        this.$node = $("<div>");

        _.each(this.datasets, destroyDataset);

        function destroyDataset(dataset) {
          dataset.destroy();
        }
      }
    });

    return Menu;
  }();

  var Status = function () {
    "use strict";

    function Status(options) {
      this.$el = $("<span></span>", {
        role: "status",
        "aria-live": "polite"
      }).css({
        position: "absolute",
        padding: "0",
        border: "0",
        height: "1px",
        width: "1px",
        "margin-bottom": "-1px",
        "margin-right": "-1px",
        overflow: "hidden",
        clip: "rect(0 0 0 0)",
        "white-space": "nowrap"
      });
      options.$input.after(this.$el);

      _.each(options.menu.datasets, _.bind(function (dataset) {
        if (dataset.onSync) {
          dataset.onSync("rendered", _.bind(this.update, this));
          dataset.onSync("cleared", _.bind(this.cleared, this));
        }
      }, this));
    }

    _.mixin(Status.prototype, {
      update: function update(event, suggestions) {
        var length = suggestions.length;
        var words;

        if (length === 1) {
          words = {
            result: "result",
            is: "is"
          };
        } else {
          words = {
            result: "results",
            is: "are"
          };
        }

        this.$el.text(length + " " + words.result + " " + words.is + " available, use up and down arrow keys to navigate.");
      },
      cleared: function cleared() {
        this.$el.text("");
      }
    });

    return Status;
  }();

  var DefaultMenu = function () {
    "use strict";

    var s = Menu.prototype;

    function DefaultMenu() {
      Menu.apply(this, [].slice.call(arguments, 0));
    }

    _.mixin(DefaultMenu.prototype, Menu.prototype, {
      open: function open() {
        !this._allDatasetsEmpty() && this._show();
        return s.open.apply(this, [].slice.call(arguments, 0));
      },
      close: function close() {
        this._hide();

        return s.close.apply(this, [].slice.call(arguments, 0));
      },
      _onRendered: function onRendered() {
        if (this._allDatasetsEmpty()) {
          this._hide();
        } else {
          this.isOpen() && this._show();
        }

        return s._onRendered.apply(this, [].slice.call(arguments, 0));
      },
      _onCleared: function onCleared() {
        if (this._allDatasetsEmpty()) {
          this._hide();
        } else {
          this.isOpen() && this._show();
        }

        return s._onCleared.apply(this, [].slice.call(arguments, 0));
      },
      setLanguageDirection: function setLanguageDirection(dir) {
        this.$node.css(dir === "ltr" ? this.css.ltr : this.css.rtl);
        return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));
      },
      _hide: function hide() {
        this.$node.hide();
      },
      _show: function show() {
        this.$node.css("display", "block");
      }
    });

    return DefaultMenu;
  }();

  var Typeahead = function () {
    "use strict";

    function Typeahead(o, www) {
      var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;
      o = o || {};

      if (!o.input) {
        $.error("missing input");
      }

      if (!o.menu) {
        $.error("missing menu");
      }

      if (!o.eventBus) {
        $.error("missing event bus");
      }

      www.mixin(this);
      this.eventBus = o.eventBus;
      this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;
      this.input = o.input;
      this.menu = o.menu;
      this.enabled = true;
      this.autoselect = !!o.autoselect;
      this.active = false;
      this.input.hasFocus() && this.activate();
      this.dir = this.input.getLangDir();

      this._hacks();

      this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this);
      onFocused = c(this, "activate", "open", "_onFocused");
      onBlurred = c(this, "deactivate", "_onBlurred");
      onEnterKeyed = c(this, "isActive", "isOpen", "_onEnterKeyed");
      onTabKeyed = c(this, "isActive", "isOpen", "_onTabKeyed");
      onEscKeyed = c(this, "isActive", "_onEscKeyed");
      onUpKeyed = c(this, "isActive", "open", "_onUpKeyed");
      onDownKeyed = c(this, "isActive", "open", "_onDownKeyed");
      onLeftKeyed = c(this, "isActive", "isOpen", "_onLeftKeyed");
      onRightKeyed = c(this, "isActive", "isOpen", "_onRightKeyed");
      onQueryChanged = c(this, "_openIfActive", "_onQueryChanged");
      onWhitespaceChanged = c(this, "_openIfActive", "_onWhitespaceChanged");
      this.input.bind().onSync("focused", onFocused, this).onSync("blurred", onBlurred, this).onSync("enterKeyed", onEnterKeyed, this).onSync("tabKeyed", onTabKeyed, this).onSync("escKeyed", onEscKeyed, this).onSync("upKeyed", onUpKeyed, this).onSync("downKeyed", onDownKeyed, this).onSync("leftKeyed", onLeftKeyed, this).onSync("rightKeyed", onRightKeyed, this).onSync("queryChanged", onQueryChanged, this).onSync("whitespaceChanged", onWhitespaceChanged, this).onSync("langDirChanged", this._onLangDirChanged, this);
    }

    _.mixin(Typeahead.prototype, {
      _hacks: function hacks() {
        var $input, $menu;
        $input = this.input.$input || $("<div>");
        $menu = this.menu.$node || $("<div>");
        $input.on("blur.tt", function ($e) {
          var active, isActive, hasActive;
          active = document.activeElement;
          isActive = $menu.is(active);
          hasActive = $menu.has(active).length > 0;

          if (_.isMsie() && (isActive || hasActive)) {
            $e.preventDefault();
            $e.stopImmediatePropagation();

            _.defer(function () {
              $input.focus();
            });
          }
        });
        $menu.on("mousedown.tt", function ($e) {
          $e.preventDefault();
        });
      },
      _onSelectableClicked: function onSelectableClicked(type, $el) {
        this.select($el);
      },
      _onDatasetCleared: function onDatasetCleared() {
        this._updateHint();
      },
      _onDatasetRendered: function onDatasetRendered(type, suggestions, async, dataset) {
        this._updateHint();

        if (this.autoselect) {
          var cursorClass = this.selectors.cursor.substr(1);
          this.menu.$node.find(this.selectors.suggestion).first().addClass(cursorClass);
        }

        this.eventBus.trigger("render", suggestions, async, dataset);
      },
      _onAsyncRequested: function onAsyncRequested(type, dataset, query) {
        this.eventBus.trigger("asyncrequest", query, dataset);
      },
      _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {
        this.eventBus.trigger("asynccancel", query, dataset);
      },
      _onAsyncReceived: function onAsyncReceived(type, dataset, query) {
        this.eventBus.trigger("asyncreceive", query, dataset);
      },
      _onFocused: function onFocused() {
        this._minLengthMet() && this.menu.update(this.input.getQuery());
      },
      _onBlurred: function onBlurred() {
        if (this.input.hasQueryChangedSinceLastFocus()) {
          this.eventBus.trigger("change", this.input.getQuery());
        }
      },
      _onEnterKeyed: function onEnterKeyed(type, $e) {
        var $selectable;

        if ($selectable = this.menu.getActiveSelectable()) {
          if (this.select($selectable)) {
            $e.preventDefault();
            $e.stopPropagation();
          }
        } else if (this.autoselect) {
          if (this.select(this.menu.getTopSelectable())) {
            $e.preventDefault();
            $e.stopPropagation();
          }
        }
      },
      _onTabKeyed: function onTabKeyed(type, $e) {
        var $selectable;

        if ($selectable = this.menu.getActiveSelectable()) {
          this.select($selectable) && $e.preventDefault();
        } else if (this.autoselect) {
          if ($selectable = this.menu.getTopSelectable()) {
            this.autocomplete($selectable) && $e.preventDefault();
          }
        }
      },
      _onEscKeyed: function onEscKeyed() {
        this.close();
      },
      _onUpKeyed: function onUpKeyed() {
        this.moveCursor(-1);
      },
      _onDownKeyed: function onDownKeyed() {
        this.moveCursor(+1);
      },
      _onLeftKeyed: function onLeftKeyed() {
        if (this.dir === "rtl" && this.input.isCursorAtEnd()) {
          this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());
        }
      },
      _onRightKeyed: function onRightKeyed() {
        if (this.dir === "ltr" && this.input.isCursorAtEnd()) {
          this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());
        }
      },
      _onQueryChanged: function onQueryChanged(e, query) {
        this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();
      },
      _onWhitespaceChanged: function onWhitespaceChanged() {
        this._updateHint();
      },
      _onLangDirChanged: function onLangDirChanged(e, dir) {
        if (this.dir !== dir) {
          this.dir = dir;
          this.menu.setLanguageDirection(dir);
        }
      },
      _openIfActive: function openIfActive() {
        this.isActive() && this.open();
      },
      _minLengthMet: function minLengthMet(query) {
        query = _.isString(query) ? query : this.input.getQuery() || "";
        return query.length >= this.minLength;
      },
      _updateHint: function updateHint() {
        var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;
        $selectable = this.menu.getTopSelectable();
        data = this.menu.getSelectableData($selectable);
        val = this.input.getInputValue();

        if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {
          query = Input.normalizeQuery(val);
          escapedQuery = _.escapeRegExChars(query);
          frontMatchRegEx = new RegExp("^(?:" + escapedQuery + ")(.+$)", "i");
          match = frontMatchRegEx.exec(data.val);
          match && this.input.setHint(val + match[1]);
        } else {
          this.input.clearHint();
        }
      },
      isEnabled: function isEnabled() {
        return this.enabled;
      },
      enable: function enable() {
        this.enabled = true;
      },
      disable: function disable() {
        this.enabled = false;
      },
      isActive: function isActive() {
        return this.active;
      },
      activate: function activate() {
        if (this.isActive()) {
          return true;
        } else if (!this.isEnabled() || this.eventBus.before("active")) {
          return false;
        } else {
          this.active = true;
          this.eventBus.trigger("active");
          return true;
        }
      },
      deactivate: function deactivate() {
        if (!this.isActive()) {
          return true;
        } else if (this.eventBus.before("idle")) {
          return false;
        } else {
          this.active = false;
          this.close();
          this.eventBus.trigger("idle");
          return true;
        }
      },
      isOpen: function isOpen() {
        return this.menu.isOpen();
      },
      open: function open() {
        if (!this.isOpen() && !this.eventBus.before("open")) {
          this.input.setAriaExpanded(true);
          this.menu.open();

          this._updateHint();

          this.eventBus.trigger("open");
        }

        return this.isOpen();
      },
      close: function close() {
        if (this.isOpen() && !this.eventBus.before("close")) {
          this.input.setAriaExpanded(false);
          this.menu.close();
          this.input.clearHint();
          this.input.resetInputValue();
          this.eventBus.trigger("close");
        }

        return !this.isOpen();
      },
      setVal: function setVal(val) {
        this.input.setQuery(_.toStr(val));
      },
      getVal: function getVal() {
        return this.input.getQuery();
      },
      select: function select($selectable) {
        var data = this.menu.getSelectableData($selectable);

        if (data && !this.eventBus.before("select", data.obj, data.dataset)) {
          this.input.setQuery(data.val, true);
          this.eventBus.trigger("select", data.obj, data.dataset);
          this.close();
          return true;
        }

        return false;
      },
      autocomplete: function autocomplete($selectable) {
        var query, data, isValid;
        query = this.input.getQuery();
        data = this.menu.getSelectableData($selectable);
        isValid = data && query !== data.val;

        if (isValid && !this.eventBus.before("autocomplete", data.obj, data.dataset)) {
          this.input.setQuery(data.val);
          this.eventBus.trigger("autocomplete", data.obj, data.dataset);
          return true;
        }

        return false;
      },
      moveCursor: function moveCursor(delta) {
        var query, $candidate, data, suggestion, datasetName, cancelMove, id;
        query = this.input.getQuery();
        $candidate = this.menu.selectableRelativeToCursor(delta);
        data = this.menu.getSelectableData($candidate);
        suggestion = data ? data.obj : null;
        datasetName = data ? data.dataset : null;
        id = $candidate ? $candidate.attr("id") : null;
        this.input.trigger("cursorchange", id);
        cancelMove = this._minLengthMet() && this.menu.update(query);

        if (!cancelMove && !this.eventBus.before("cursorchange", suggestion, datasetName)) {
          this.menu.setCursor($candidate);

          if (data) {
            if (typeof data.val === "string") {
              this.input.setInputValue(data.val);
            }
          } else {
            this.input.resetInputValue();

            this._updateHint();
          }

          this.eventBus.trigger("cursorchange", suggestion, datasetName);
          return true;
        }

        return false;
      },
      destroy: function destroy() {
        this.input.destroy();
        this.menu.destroy();
      }
    });

    return Typeahead;

    function c(ctx) {
      var methods = [].slice.call(arguments, 1);
      return function () {
        var args = [].slice.call(arguments);

        _.each(methods, function (method) {
          return ctx[method].apply(ctx, args);
        });
      };
    }
  }();

  (function () {
    "use strict";

    var old, keys, methods;
    old = $.fn.typeahead;
    keys = {
      www: "tt-www",
      attrs: "tt-attrs",
      typeahead: "tt-typeahead"
    };
    methods = {
      initialize: function initialize(o, datasets) {
        var www;
        datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);
        o = o || {};
        www = WWW(o.classNames);
        return this.each(attach);

        function attach() {
          var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, status, typeahead, MenuConstructor;

          _.each(datasets, function (d) {
            d.highlight = !!o.highlight;
          });

          $input = $(this);
          $wrapper = $(www.html.wrapper);
          $hint = $elOrNull(o.hint);
          $menu = $elOrNull(o.menu);
          defaultHint = o.hint !== false && !$hint;
          defaultMenu = o.menu !== false && !$menu;
          defaultHint && ($hint = buildHintFromInput($input, www));
          defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));
          $hint && $hint.val("");
          $input = prepInput($input, www);

          if (defaultHint || defaultMenu) {
            $wrapper.css(www.css.wrapper);
            $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);
            $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);
          }

          MenuConstructor = defaultMenu ? DefaultMenu : Menu;
          eventBus = new EventBus({
            el: $input
          });
          input = new Input({
            hint: $hint,
            input: $input,
            menu: $menu
          }, www);
          menu = new MenuConstructor({
            node: $menu,
            datasets: datasets
          }, www);
          status = new Status({
            $input: $input,
            menu: menu
          });
          typeahead = new Typeahead({
            input: input,
            menu: menu,
            eventBus: eventBus,
            minLength: o.minLength,
            autoselect: o.autoselect
          }, www);
          $input.data(keys.www, www);
          $input.data(keys.typeahead, typeahead);
        }
      },
      isEnabled: function isEnabled() {
        var enabled;
        ttEach(this.first(), function (t) {
          enabled = t.isEnabled();
        });
        return enabled;
      },
      enable: function enable() {
        ttEach(this, function (t) {
          t.enable();
        });
        return this;
      },
      disable: function disable() {
        ttEach(this, function (t) {
          t.disable();
        });
        return this;
      },
      isActive: function isActive() {
        var active;
        ttEach(this.first(), function (t) {
          active = t.isActive();
        });
        return active;
      },
      activate: function activate() {
        ttEach(this, function (t) {
          t.activate();
        });
        return this;
      },
      deactivate: function deactivate() {
        ttEach(this, function (t) {
          t.deactivate();
        });
        return this;
      },
      isOpen: function isOpen() {
        var open;
        ttEach(this.first(), function (t) {
          open = t.isOpen();
        });
        return open;
      },
      open: function open() {
        ttEach(this, function (t) {
          t.open();
        });
        return this;
      },
      close: function close() {
        ttEach(this, function (t) {
          t.close();
        });
        return this;
      },
      select: function select(el) {
        var success = false,
            $el = $(el);
        ttEach(this.first(), function (t) {
          success = t.select($el);
        });
        return success;
      },
      autocomplete: function autocomplete(el) {
        var success = false,
            $el = $(el);
        ttEach(this.first(), function (t) {
          success = t.autocomplete($el);
        });
        return success;
      },
      moveCursor: function moveCursoe(delta) {
        var success = false;
        ttEach(this.first(), function (t) {
          success = t.moveCursor(delta);
        });
        return success;
      },
      val: function val(newVal) {
        var query;

        if (!arguments.length) {
          ttEach(this.first(), function (t) {
            query = t.getVal();
          });
          return query;
        } else {
          ttEach(this, function (t) {
            t.setVal(_.toStr(newVal));
          });
          return this;
        }
      },
      destroy: function destroy() {
        ttEach(this, function (typeahead, $input) {
          revert($input);
          typeahead.destroy();
        });
        return this;
      }
    };

    $.fn.typeahead = function (method) {
      if (methods[method]) {
        return methods[method].apply(this, [].slice.call(arguments, 1));
      } else {
        return methods.initialize.apply(this, arguments);
      }
    };

    $.fn.typeahead.noConflict = function noConflict() {
      $.fn.typeahead = old;
      return this;
    };

    function ttEach($els, fn) {
      $els.each(function () {
        var $input = $(this),
            typeahead;
        (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);
      });
    }

    function buildHintFromInput($input, www) {
      return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop({
        readonly: true,
        required: false
      }).removeAttr("id name placeholder").removeClass("required").attr({
        spellcheck: "false",
        tabindex: -1
      });
    }

    function prepInput($input, www) {
      $input.data(keys.attrs, {
        dir: $input.attr("dir"),
        autocomplete: $input.attr("autocomplete"),
        spellcheck: $input.attr("spellcheck"),
        style: $input.attr("style")
      });
      $input.addClass(www.classes.input).attr({
        spellcheck: false
      });

      try {
        !$input.attr("dir") && $input.attr("dir", "auto");
      } catch (e) {}

      return $input;
    }

    function getBackgroundStyles($el) {
      return {
        backgroundAttachment: $el.css("background-attachment"),
        backgroundClip: $el.css("background-clip"),
        backgroundColor: $el.css("background-color"),
        backgroundImage: $el.css("background-image"),
        backgroundOrigin: $el.css("background-origin"),
        backgroundPosition: $el.css("background-position"),
        backgroundRepeat: $el.css("background-repeat"),
        backgroundSize: $el.css("background-size")
      };
    }

    function revert($input) {
      var www, $wrapper;
      www = $input.data(keys.www);
      $wrapper = $input.parent().filter(www.selectors.wrapper);

      _.each($input.data(keys.attrs), function (val, key) {
        _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
      });

      $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);

      if ($wrapper.length) {
        $input.detach().insertAfter($wrapper);
        $wrapper.remove();
      }
    }

    function $elOrNull(obj) {
      var isValid, $el;
      isValid = _.isJQuery(obj) || _.isElement(obj);
      $el = isValid ? $(obj).first() : [];
      return $el.length ? $el : null;
    }
  })();
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate))

/***/ }),

/***/ "./node_modules/bootstrap/dist/css/bootstrap.css":
/*!*******************************************************!*\
  !*** ./node_modules/bootstrap/dist/css/bootstrap.css ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./node_modules/bootstrap/dist/js/bootstrap.js":
/*!*****************************************************!*\
  !*** ./node_modules/bootstrap/dist/js/bootstrap.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? factory(exports, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"), __webpack_require__(/*! popper.js */ "./node_modules/popper.js/dist/esm/popper.js")) : undefined;
})(this, function (exports, $, Popper) {
  'use strict';

  function _interopDefaultLegacy(e) {
    return e && typeof e === 'object' && 'default' in e ? e : {
      'default': e
    };
  }

  var $__default = _interopDefaultLegacy($);

  var Popper__default = _interopDefaultLegacy(Popper);

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  function _extends() {
    _extends = Object.assign || function (target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];

        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }

      return target;
    };

    return _extends.apply(this, arguments);
  }

  function _inheritsLoose(subClass, superClass) {
    subClass.prototype = Object.create(superClass.prototype);
    subClass.prototype.constructor = subClass;
    subClass.__proto__ = superClass;
  }

  var TRANSITION_END = 'transitionend';
  var MAX_UID = 1000000;
  var MILLISECONDS_MULTIPLIER = 1000;

  function toType(obj) {
    if (obj === null || typeof obj === 'undefined') {
      return "" + obj;
    }

    return {}.toString.call(obj).match(/\s([a-z]+)/i)[1].toLowerCase();
  }

  function getSpecialTransitionEndEvent() {
    return {
      bindType: TRANSITION_END,
      delegateType: TRANSITION_END,
      handle: function handle(event) {
        if ($__default['default'](event.target).is(this)) {
          return event.handleObj.handler.apply(this, arguments);
        }

        return undefined;
      }
    };
  }

  function transitionEndEmulator(duration) {
    var _this = this;

    var called = false;
    $__default['default'](this).one(Util.TRANSITION_END, function () {
      called = true;
    });
    setTimeout(function () {
      if (!called) {
        Util.triggerTransitionEnd(_this);
      }
    }, duration);
    return this;
  }

  function setTransitionEndSupport() {
    $__default['default'].fn.emulateTransitionEnd = transitionEndEmulator;
    $__default['default'].event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();
  }

  var Util = {
    TRANSITION_END: 'bsTransitionEnd',
    getUID: function getUID(prefix) {
      do {
        prefix += ~~(Math.random() * MAX_UID);
      } while (document.getElementById(prefix));

      return prefix;
    },
    getSelectorFromElement: function getSelectorFromElement(element) {
      var selector = element.getAttribute('data-target');

      if (!selector || selector === '#') {
        var hrefAttr = element.getAttribute('href');
        selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : '';
      }

      try {
        return document.querySelector(selector) ? selector : null;
      } catch (_) {
        return null;
      }
    },
    getTransitionDurationFromElement: function getTransitionDurationFromElement(element) {
      if (!element) {
        return 0;
      }

      var transitionDuration = $__default['default'](element).css('transition-duration');
      var transitionDelay = $__default['default'](element).css('transition-delay');
      var floatTransitionDuration = parseFloat(transitionDuration);
      var floatTransitionDelay = parseFloat(transitionDelay);

      if (!floatTransitionDuration && !floatTransitionDelay) {
        return 0;
      }

      transitionDuration = transitionDuration.split(',')[0];
      transitionDelay = transitionDelay.split(',')[0];
      return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;
    },
    reflow: function reflow(element) {
      return element.offsetHeight;
    },
    triggerTransitionEnd: function triggerTransitionEnd(element) {
      $__default['default'](element).trigger(TRANSITION_END);
    },
    supportsTransitionEnd: function supportsTransitionEnd() {
      return Boolean(TRANSITION_END);
    },
    isElement: function isElement(obj) {
      return (obj[0] || obj).nodeType;
    },
    typeCheckConfig: function typeCheckConfig(componentName, config, configTypes) {
      for (var property in configTypes) {
        if (Object.prototype.hasOwnProperty.call(configTypes, property)) {
          var expectedTypes = configTypes[property];
          var value = config[property];
          var valueType = value && Util.isElement(value) ? 'element' : toType(value);

          if (!new RegExp(expectedTypes).test(valueType)) {
            throw new Error(componentName.toUpperCase() + ": " + ("Option \"" + property + "\" provided type \"" + valueType + "\" ") + ("but expected type \"" + expectedTypes + "\"."));
          }
        }
      }
    },
    findShadowRoot: function findShadowRoot(element) {
      if (!document.documentElement.attachShadow) {
        return null;
      }

      if (typeof element.getRootNode === 'function') {
        var root = element.getRootNode();
        return root instanceof ShadowRoot ? root : null;
      }

      if (element instanceof ShadowRoot) {
        return element;
      }

      if (!element.parentNode) {
        return null;
      }

      return Util.findShadowRoot(element.parentNode);
    },
    jQueryDetection: function jQueryDetection() {
      if (typeof $__default['default'] === 'undefined') {
        throw new TypeError('Bootstrap\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\'s JavaScript.');
      }

      var version = $__default['default'].fn.jquery.split(' ')[0].split('.');
      var minMajor = 1;
      var ltMajor = 2;
      var minMinor = 9;
      var minPatch = 1;
      var maxMajor = 4;

      if (version[0] < ltMajor && version[1] < minMinor || version[0] === minMajor && version[1] === minMinor && version[2] < minPatch || version[0] >= maxMajor) {
        throw new Error('Bootstrap\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0');
      }
    }
  };
  Util.jQueryDetection();
  setTransitionEndSupport();
  var NAME = 'alert';
  var VERSION = '4.5.3';
  var DATA_KEY = 'bs.alert';
  var EVENT_KEY = "." + DATA_KEY;
  var DATA_API_KEY = '.data-api';
  var JQUERY_NO_CONFLICT = $__default['default'].fn[NAME];
  var SELECTOR_DISMISS = '[data-dismiss="alert"]';
  var EVENT_CLOSE = "close" + EVENT_KEY;
  var EVENT_CLOSED = "closed" + EVENT_KEY;
  var EVENT_CLICK_DATA_API = "click" + EVENT_KEY + DATA_API_KEY;
  var CLASS_NAME_ALERT = 'alert';
  var CLASS_NAME_FADE = 'fade';
  var CLASS_NAME_SHOW = 'show';

  var Alert = function () {
    function Alert(element) {
      this._element = element;
    }

    var _proto = Alert.prototype;

    _proto.close = function close(element) {
      var rootElement = this._element;

      if (element) {
        rootElement = this._getRootElement(element);
      }

      var customEvent = this._triggerCloseEvent(rootElement);

      if (customEvent.isDefaultPrevented()) {
        return;
      }

      this._removeElement(rootElement);
    };

    _proto.dispose = function dispose() {
      $__default['default'].removeData(this._element, DATA_KEY);
      this._element = null;
    };

    _proto._getRootElement = function _getRootElement(element) {
      var selector = Util.getSelectorFromElement(element);
      var parent = false;

      if (selector) {
        parent = document.querySelector(selector);
      }

      if (!parent) {
        parent = $__default['default'](element).closest("." + CLASS_NAME_ALERT)[0];
      }

      return parent;
    };

    _proto._triggerCloseEvent = function _triggerCloseEvent(element) {
      var closeEvent = $__default['default'].Event(EVENT_CLOSE);
      $__default['default'](element).trigger(closeEvent);
      return closeEvent;
    };

    _proto._removeElement = function _removeElement(element) {
      var _this = this;

      $__default['default'](element).removeClass(CLASS_NAME_SHOW);

      if (!$__default['default'](element).hasClass(CLASS_NAME_FADE)) {
        this._destroyElement(element);

        return;
      }

      var transitionDuration = Util.getTransitionDurationFromElement(element);
      $__default['default'](element).one(Util.TRANSITION_END, function (event) {
        return _this._destroyElement(element, event);
      }).emulateTransitionEnd(transitionDuration);
    };

    _proto._destroyElement = function _destroyElement(element) {
      $__default['default'](element).detach().trigger(EVENT_CLOSED).remove();
    };

    Alert._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $element = $__default['default'](this);
        var data = $element.data(DATA_KEY);

        if (!data) {
          data = new Alert(this);
          $element.data(DATA_KEY, data);
        }

        if (config === 'close') {
          data[config](this);
        }
      });
    };

    Alert._handleDismiss = function _handleDismiss(alertInstance) {
      return function (event) {
        if (event) {
          event.preventDefault();
        }

        alertInstance.close(this);
      };
    };

    _createClass(Alert, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION;
      }
    }]);

    return Alert;
  }();

  $__default['default'](document).on(EVENT_CLICK_DATA_API, SELECTOR_DISMISS, Alert._handleDismiss(new Alert()));
  $__default['default'].fn[NAME] = Alert._jQueryInterface;
  $__default['default'].fn[NAME].Constructor = Alert;

  $__default['default'].fn[NAME].noConflict = function () {
    $__default['default'].fn[NAME] = JQUERY_NO_CONFLICT;
    return Alert._jQueryInterface;
  };

  var NAME$1 = 'button';
  var VERSION$1 = '4.5.3';
  var DATA_KEY$1 = 'bs.button';
  var EVENT_KEY$1 = "." + DATA_KEY$1;
  var DATA_API_KEY$1 = '.data-api';
  var JQUERY_NO_CONFLICT$1 = $__default['default'].fn[NAME$1];
  var CLASS_NAME_ACTIVE = 'active';
  var CLASS_NAME_BUTTON = 'btn';
  var CLASS_NAME_FOCUS = 'focus';
  var SELECTOR_DATA_TOGGLE_CARROT = '[data-toggle^="button"]';
  var SELECTOR_DATA_TOGGLES = '[data-toggle="buttons"]';
  var SELECTOR_DATA_TOGGLE = '[data-toggle="button"]';
  var SELECTOR_DATA_TOGGLES_BUTTONS = '[data-toggle="buttons"] .btn';
  var SELECTOR_INPUT = 'input:not([type="hidden"])';
  var SELECTOR_ACTIVE = '.active';
  var SELECTOR_BUTTON = '.btn';
  var EVENT_CLICK_DATA_API$1 = "click" + EVENT_KEY$1 + DATA_API_KEY$1;
  var EVENT_FOCUS_BLUR_DATA_API = "focus" + EVENT_KEY$1 + DATA_API_KEY$1 + " " + ("blur" + EVENT_KEY$1 + DATA_API_KEY$1);
  var EVENT_LOAD_DATA_API = "load" + EVENT_KEY$1 + DATA_API_KEY$1;

  var Button = function () {
    function Button(element) {
      this._element = element;
      this.shouldAvoidTriggerChange = false;
    }

    var _proto = Button.prototype;

    _proto.toggle = function toggle() {
      var triggerChangeEvent = true;
      var addAriaPressed = true;
      var rootElement = $__default['default'](this._element).closest(SELECTOR_DATA_TOGGLES)[0];

      if (rootElement) {
        var input = this._element.querySelector(SELECTOR_INPUT);

        if (input) {
          if (input.type === 'radio') {
            if (input.checked && this._element.classList.contains(CLASS_NAME_ACTIVE)) {
              triggerChangeEvent = false;
            } else {
              var activeElement = rootElement.querySelector(SELECTOR_ACTIVE);

              if (activeElement) {
                $__default['default'](activeElement).removeClass(CLASS_NAME_ACTIVE);
              }
            }
          }

          if (triggerChangeEvent) {
            if (input.type === 'checkbox' || input.type === 'radio') {
              input.checked = !this._element.classList.contains(CLASS_NAME_ACTIVE);
            }

            if (!this.shouldAvoidTriggerChange) {
              $__default['default'](input).trigger('change');
            }
          }

          input.focus();
          addAriaPressed = false;
        }
      }

      if (!(this._element.hasAttribute('disabled') || this._element.classList.contains('disabled'))) {
        if (addAriaPressed) {
          this._element.setAttribute('aria-pressed', !this._element.classList.contains(CLASS_NAME_ACTIVE));
        }

        if (triggerChangeEvent) {
          $__default['default'](this._element).toggleClass(CLASS_NAME_ACTIVE);
        }
      }
    };

    _proto.dispose = function dispose() {
      $__default['default'].removeData(this._element, DATA_KEY$1);
      this._element = null;
    };

    Button._jQueryInterface = function _jQueryInterface(config, avoidTriggerChange) {
      return this.each(function () {
        var $element = $__default['default'](this);
        var data = $element.data(DATA_KEY$1);

        if (!data) {
          data = new Button(this);
          $element.data(DATA_KEY$1, data);
        }

        data.shouldAvoidTriggerChange = avoidTriggerChange;

        if (config === 'toggle') {
          data[config]();
        }
      });
    };

    _createClass(Button, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$1;
      }
    }]);

    return Button;
  }();

  $__default['default'](document).on(EVENT_CLICK_DATA_API$1, SELECTOR_DATA_TOGGLE_CARROT, function (event) {
    var button = event.target;
    var initialButton = button;

    if (!$__default['default'](button).hasClass(CLASS_NAME_BUTTON)) {
      button = $__default['default'](button).closest(SELECTOR_BUTTON)[0];
    }

    if (!button || button.hasAttribute('disabled') || button.classList.contains('disabled')) {
      event.preventDefault();
    } else {
      var inputBtn = button.querySelector(SELECTOR_INPUT);

      if (inputBtn && (inputBtn.hasAttribute('disabled') || inputBtn.classList.contains('disabled'))) {
        event.preventDefault();
        return;
      }

      if (initialButton.tagName === 'INPUT' || button.tagName !== 'LABEL') {
        Button._jQueryInterface.call($__default['default'](button), 'toggle', initialButton.tagName === 'INPUT');
      }
    }
  }).on(EVENT_FOCUS_BLUR_DATA_API, SELECTOR_DATA_TOGGLE_CARROT, function (event) {
    var button = $__default['default'](event.target).closest(SELECTOR_BUTTON)[0];
    $__default['default'](button).toggleClass(CLASS_NAME_FOCUS, /^focus(in)?$/.test(event.type));
  });
  $__default['default'](window).on(EVENT_LOAD_DATA_API, function () {
    var buttons = [].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLES_BUTTONS));

    for (var i = 0, len = buttons.length; i < len; i++) {
      var button = buttons[i];
      var input = button.querySelector(SELECTOR_INPUT);

      if (input.checked || input.hasAttribute('checked')) {
        button.classList.add(CLASS_NAME_ACTIVE);
      } else {
        button.classList.remove(CLASS_NAME_ACTIVE);
      }
    }

    buttons = [].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLE));

    for (var _i = 0, _len = buttons.length; _i < _len; _i++) {
      var _button = buttons[_i];

      if (_button.getAttribute('aria-pressed') === 'true') {
        _button.classList.add(CLASS_NAME_ACTIVE);
      } else {
        _button.classList.remove(CLASS_NAME_ACTIVE);
      }
    }
  });
  $__default['default'].fn[NAME$1] = Button._jQueryInterface;
  $__default['default'].fn[NAME$1].Constructor = Button;

  $__default['default'].fn[NAME$1].noConflict = function () {
    $__default['default'].fn[NAME$1] = JQUERY_NO_CONFLICT$1;
    return Button._jQueryInterface;
  };

  var NAME$2 = 'carousel';
  var VERSION$2 = '4.5.3';
  var DATA_KEY$2 = 'bs.carousel';
  var EVENT_KEY$2 = "." + DATA_KEY$2;
  var DATA_API_KEY$2 = '.data-api';
  var JQUERY_NO_CONFLICT$2 = $__default['default'].fn[NAME$2];
  var ARROW_LEFT_KEYCODE = 37;
  var ARROW_RIGHT_KEYCODE = 39;
  var TOUCHEVENT_COMPAT_WAIT = 500;
  var SWIPE_THRESHOLD = 40;
  var Default = {
    interval: 5000,
    keyboard: true,
    slide: false,
    pause: 'hover',
    wrap: true,
    touch: true
  };
  var DefaultType = {
    interval: '(number|boolean)',
    keyboard: 'boolean',
    slide: '(boolean|string)',
    pause: '(string|boolean)',
    wrap: 'boolean',
    touch: 'boolean'
  };
  var DIRECTION_NEXT = 'next';
  var DIRECTION_PREV = 'prev';
  var DIRECTION_LEFT = 'left';
  var DIRECTION_RIGHT = 'right';
  var EVENT_SLIDE = "slide" + EVENT_KEY$2;
  var EVENT_SLID = "slid" + EVENT_KEY$2;
  var EVENT_KEYDOWN = "keydown" + EVENT_KEY$2;
  var EVENT_MOUSEENTER = "mouseenter" + EVENT_KEY$2;
  var EVENT_MOUSELEAVE = "mouseleave" + EVENT_KEY$2;
  var EVENT_TOUCHSTART = "touchstart" + EVENT_KEY$2;
  var EVENT_TOUCHMOVE = "touchmove" + EVENT_KEY$2;
  var EVENT_TOUCHEND = "touchend" + EVENT_KEY$2;
  var EVENT_POINTERDOWN = "pointerdown" + EVENT_KEY$2;
  var EVENT_POINTERUP = "pointerup" + EVENT_KEY$2;
  var EVENT_DRAG_START = "dragstart" + EVENT_KEY$2;
  var EVENT_LOAD_DATA_API$1 = "load" + EVENT_KEY$2 + DATA_API_KEY$2;
  var EVENT_CLICK_DATA_API$2 = "click" + EVENT_KEY$2 + DATA_API_KEY$2;
  var CLASS_NAME_CAROUSEL = 'carousel';
  var CLASS_NAME_ACTIVE$1 = 'active';
  var CLASS_NAME_SLIDE = 'slide';
  var CLASS_NAME_RIGHT = 'carousel-item-right';
  var CLASS_NAME_LEFT = 'carousel-item-left';
  var CLASS_NAME_NEXT = 'carousel-item-next';
  var CLASS_NAME_PREV = 'carousel-item-prev';
  var CLASS_NAME_POINTER_EVENT = 'pointer-event';
  var SELECTOR_ACTIVE$1 = '.active';
  var SELECTOR_ACTIVE_ITEM = '.active.carousel-item';
  var SELECTOR_ITEM = '.carousel-item';
  var SELECTOR_ITEM_IMG = '.carousel-item img';
  var SELECTOR_NEXT_PREV = '.carousel-item-next, .carousel-item-prev';
  var SELECTOR_INDICATORS = '.carousel-indicators';
  var SELECTOR_DATA_SLIDE = '[data-slide], [data-slide-to]';
  var SELECTOR_DATA_RIDE = '[data-ride="carousel"]';
  var PointerType = {
    TOUCH: 'touch',
    PEN: 'pen'
  };

  var Carousel = function () {
    function Carousel(element, config) {
      this._items = null;
      this._interval = null;
      this._activeElement = null;
      this._isPaused = false;
      this._isSliding = false;
      this.touchTimeout = null;
      this.touchStartX = 0;
      this.touchDeltaX = 0;
      this._config = this._getConfig(config);
      this._element = element;
      this._indicatorsElement = this._element.querySelector(SELECTOR_INDICATORS);
      this._touchSupported = 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0;
      this._pointerEvent = Boolean(window.PointerEvent || window.MSPointerEvent);

      this._addEventListeners();
    }

    var _proto = Carousel.prototype;

    _proto.next = function next() {
      if (!this._isSliding) {
        this._slide(DIRECTION_NEXT);
      }
    };

    _proto.nextWhenVisible = function nextWhenVisible() {
      var $element = $__default['default'](this._element);

      if (!document.hidden && $element.is(':visible') && $element.css('visibility') !== 'hidden') {
        this.next();
      }
    };

    _proto.prev = function prev() {
      if (!this._isSliding) {
        this._slide(DIRECTION_PREV);
      }
    };

    _proto.pause = function pause(event) {
      if (!event) {
        this._isPaused = true;
      }

      if (this._element.querySelector(SELECTOR_NEXT_PREV)) {
        Util.triggerTransitionEnd(this._element);
        this.cycle(true);
      }

      clearInterval(this._interval);
      this._interval = null;
    };

    _proto.cycle = function cycle(event) {
      if (!event) {
        this._isPaused = false;
      }

      if (this._interval) {
        clearInterval(this._interval);
        this._interval = null;
      }

      if (this._config.interval && !this._isPaused) {
        this._interval = setInterval((document.visibilityState ? this.nextWhenVisible : this.next).bind(this), this._config.interval);
      }
    };

    _proto.to = function to(index) {
      var _this = this;

      this._activeElement = this._element.querySelector(SELECTOR_ACTIVE_ITEM);

      var activeIndex = this._getItemIndex(this._activeElement);

      if (index > this._items.length - 1 || index < 0) {
        return;
      }

      if (this._isSliding) {
        $__default['default'](this._element).one(EVENT_SLID, function () {
          return _this.to(index);
        });
        return;
      }

      if (activeIndex === index) {
        this.pause();
        this.cycle();
        return;
      }

      var direction = index > activeIndex ? DIRECTION_NEXT : DIRECTION_PREV;

      this._slide(direction, this._items[index]);
    };

    _proto.dispose = function dispose() {
      $__default['default'](this._element).off(EVENT_KEY$2);
      $__default['default'].removeData(this._element, DATA_KEY$2);
      this._items = null;
      this._config = null;
      this._element = null;
      this._interval = null;
      this._isPaused = null;
      this._isSliding = null;
      this._activeElement = null;
      this._indicatorsElement = null;
    };

    _proto._getConfig = function _getConfig(config) {
      config = _extends({}, Default, config);
      Util.typeCheckConfig(NAME$2, config, DefaultType);
      return config;
    };

    _proto._handleSwipe = function _handleSwipe() {
      var absDeltax = Math.abs(this.touchDeltaX);

      if (absDeltax <= SWIPE_THRESHOLD) {
        return;
      }

      var direction = absDeltax / this.touchDeltaX;
      this.touchDeltaX = 0;

      if (direction > 0) {
        this.prev();
      }

      if (direction < 0) {
        this.next();
      }
    };

    _proto._addEventListeners = function _addEventListeners() {
      var _this2 = this;

      if (this._config.keyboard) {
        $__default['default'](this._element).on(EVENT_KEYDOWN, function (event) {
          return _this2._keydown(event);
        });
      }

      if (this._config.pause === 'hover') {
        $__default['default'](this._element).on(EVENT_MOUSEENTER, function (event) {
          return _this2.pause(event);
        }).on(EVENT_MOUSELEAVE, function (event) {
          return _this2.cycle(event);
        });
      }

      if (this._config.touch) {
        this._addTouchEventListeners();
      }
    };

    _proto._addTouchEventListeners = function _addTouchEventListeners() {
      var _this3 = this;

      if (!this._touchSupported) {
        return;
      }

      var start = function start(event) {
        if (_this3._pointerEvent && PointerType[event.originalEvent.pointerType.toUpperCase()]) {
          _this3.touchStartX = event.originalEvent.clientX;
        } else if (!_this3._pointerEvent) {
          _this3.touchStartX = event.originalEvent.touches[0].clientX;
        }
      };

      var move = function move(event) {
        if (event.originalEvent.touches && event.originalEvent.touches.length > 1) {
          _this3.touchDeltaX = 0;
        } else {
          _this3.touchDeltaX = event.originalEvent.touches[0].clientX - _this3.touchStartX;
        }
      };

      var end = function end(event) {
        if (_this3._pointerEvent && PointerType[event.originalEvent.pointerType.toUpperCase()]) {
          _this3.touchDeltaX = event.originalEvent.clientX - _this3.touchStartX;
        }

        _this3._handleSwipe();

        if (_this3._config.pause === 'hover') {
          _this3.pause();

          if (_this3.touchTimeout) {
            clearTimeout(_this3.touchTimeout);
          }

          _this3.touchTimeout = setTimeout(function (event) {
            return _this3.cycle(event);
          }, TOUCHEVENT_COMPAT_WAIT + _this3._config.interval);
        }
      };

      $__default['default'](this._element.querySelectorAll(SELECTOR_ITEM_IMG)).on(EVENT_DRAG_START, function (e) {
        return e.preventDefault();
      });

      if (this._pointerEvent) {
        $__default['default'](this._element).on(EVENT_POINTERDOWN, function (event) {
          return start(event);
        });
        $__default['default'](this._element).on(EVENT_POINTERUP, function (event) {
          return end(event);
        });

        this._element.classList.add(CLASS_NAME_POINTER_EVENT);
      } else {
        $__default['default'](this._element).on(EVENT_TOUCHSTART, function (event) {
          return start(event);
        });
        $__default['default'](this._element).on(EVENT_TOUCHMOVE, function (event) {
          return move(event);
        });
        $__default['default'](this._element).on(EVENT_TOUCHEND, function (event) {
          return end(event);
        });
      }
    };

    _proto._keydown = function _keydown(event) {
      if (/input|textarea/i.test(event.target.tagName)) {
        return;
      }

      switch (event.which) {
        case ARROW_LEFT_KEYCODE:
          event.preventDefault();
          this.prev();
          break;

        case ARROW_RIGHT_KEYCODE:
          event.preventDefault();
          this.next();
          break;
      }
    };

    _proto._getItemIndex = function _getItemIndex(element) {
      this._items = element && element.parentNode ? [].slice.call(element.parentNode.querySelectorAll(SELECTOR_ITEM)) : [];
      return this._items.indexOf(element);
    };

    _proto._getItemByDirection = function _getItemByDirection(direction, activeElement) {
      var isNextDirection = direction === DIRECTION_NEXT;
      var isPrevDirection = direction === DIRECTION_PREV;

      var activeIndex = this._getItemIndex(activeElement);

      var lastItemIndex = this._items.length - 1;
      var isGoingToWrap = isPrevDirection && activeIndex === 0 || isNextDirection && activeIndex === lastItemIndex;

      if (isGoingToWrap && !this._config.wrap) {
        return activeElement;
      }

      var delta = direction === DIRECTION_PREV ? -1 : 1;
      var itemIndex = (activeIndex + delta) % this._items.length;
      return itemIndex === -1 ? this._items[this._items.length - 1] : this._items[itemIndex];
    };

    _proto._triggerSlideEvent = function _triggerSlideEvent(relatedTarget, eventDirectionName) {
      var targetIndex = this._getItemIndex(relatedTarget);

      var fromIndex = this._getItemIndex(this._element.querySelector(SELECTOR_ACTIVE_ITEM));

      var slideEvent = $__default['default'].Event(EVENT_SLIDE, {
        relatedTarget: relatedTarget,
        direction: eventDirectionName,
        from: fromIndex,
        to: targetIndex
      });
      $__default['default'](this._element).trigger(slideEvent);
      return slideEvent;
    };

    _proto._setActiveIndicatorElement = function _setActiveIndicatorElement(element) {
      if (this._indicatorsElement) {
        var indicators = [].slice.call(this._indicatorsElement.querySelectorAll(SELECTOR_ACTIVE$1));
        $__default['default'](indicators).removeClass(CLASS_NAME_ACTIVE$1);

        var nextIndicator = this._indicatorsElement.children[this._getItemIndex(element)];

        if (nextIndicator) {
          $__default['default'](nextIndicator).addClass(CLASS_NAME_ACTIVE$1);
        }
      }
    };

    _proto._slide = function _slide(direction, element) {
      var _this4 = this;

      var activeElement = this._element.querySelector(SELECTOR_ACTIVE_ITEM);

      var activeElementIndex = this._getItemIndex(activeElement);

      var nextElement = element || activeElement && this._getItemByDirection(direction, activeElement);

      var nextElementIndex = this._getItemIndex(nextElement);

      var isCycling = Boolean(this._interval);
      var directionalClassName;
      var orderClassName;
      var eventDirectionName;

      if (direction === DIRECTION_NEXT) {
        directionalClassName = CLASS_NAME_LEFT;
        orderClassName = CLASS_NAME_NEXT;
        eventDirectionName = DIRECTION_LEFT;
      } else {
        directionalClassName = CLASS_NAME_RIGHT;
        orderClassName = CLASS_NAME_PREV;
        eventDirectionName = DIRECTION_RIGHT;
      }

      if (nextElement && $__default['default'](nextElement).hasClass(CLASS_NAME_ACTIVE$1)) {
        this._isSliding = false;
        return;
      }

      var slideEvent = this._triggerSlideEvent(nextElement, eventDirectionName);

      if (slideEvent.isDefaultPrevented()) {
        return;
      }

      if (!activeElement || !nextElement) {
        return;
      }

      this._isSliding = true;

      if (isCycling) {
        this.pause();
      }

      this._setActiveIndicatorElement(nextElement);

      var slidEvent = $__default['default'].Event(EVENT_SLID, {
        relatedTarget: nextElement,
        direction: eventDirectionName,
        from: activeElementIndex,
        to: nextElementIndex
      });

      if ($__default['default'](this._element).hasClass(CLASS_NAME_SLIDE)) {
        $__default['default'](nextElement).addClass(orderClassName);
        Util.reflow(nextElement);
        $__default['default'](activeElement).addClass(directionalClassName);
        $__default['default'](nextElement).addClass(directionalClassName);
        var nextElementInterval = parseInt(nextElement.getAttribute('data-interval'), 10);

        if (nextElementInterval) {
          this._config.defaultInterval = this._config.defaultInterval || this._config.interval;
          this._config.interval = nextElementInterval;
        } else {
          this._config.interval = this._config.defaultInterval || this._config.interval;
        }

        var transitionDuration = Util.getTransitionDurationFromElement(activeElement);
        $__default['default'](activeElement).one(Util.TRANSITION_END, function () {
          $__default['default'](nextElement).removeClass(directionalClassName + " " + orderClassName).addClass(CLASS_NAME_ACTIVE$1);
          $__default['default'](activeElement).removeClass(CLASS_NAME_ACTIVE$1 + " " + orderClassName + " " + directionalClassName);
          _this4._isSliding = false;
          setTimeout(function () {
            return $__default['default'](_this4._element).trigger(slidEvent);
          }, 0);
        }).emulateTransitionEnd(transitionDuration);
      } else {
        $__default['default'](activeElement).removeClass(CLASS_NAME_ACTIVE$1);
        $__default['default'](nextElement).addClass(CLASS_NAME_ACTIVE$1);
        this._isSliding = false;
        $__default['default'](this._element).trigger(slidEvent);
      }

      if (isCycling) {
        this.cycle();
      }
    };

    Carousel._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $__default['default'](this).data(DATA_KEY$2);

        var _config = _extends({}, Default, $__default['default'](this).data());

        if (typeof config === 'object') {
          _config = _extends({}, _config, config);
        }

        var action = typeof config === 'string' ? config : _config.slide;

        if (!data) {
          data = new Carousel(this, _config);
          $__default['default'](this).data(DATA_KEY$2, data);
        }

        if (typeof config === 'number') {
          data.to(config);
        } else if (typeof action === 'string') {
          if (typeof data[action] === 'undefined') {
            throw new TypeError("No method named \"" + action + "\"");
          }

          data[action]();
        } else if (_config.interval && _config.ride) {
          data.pause();
          data.cycle();
        }
      });
    };

    Carousel._dataApiClickHandler = function _dataApiClickHandler(event) {
      var selector = Util.getSelectorFromElement(this);

      if (!selector) {
        return;
      }

      var target = $__default['default'](selector)[0];

      if (!target || !$__default['default'](target).hasClass(CLASS_NAME_CAROUSEL)) {
        return;
      }

      var config = _extends({}, $__default['default'](target).data(), $__default['default'](this).data());

      var slideIndex = this.getAttribute('data-slide-to');

      if (slideIndex) {
        config.interval = false;
      }

      Carousel._jQueryInterface.call($__default['default'](target), config);

      if (slideIndex) {
        $__default['default'](target).data(DATA_KEY$2).to(slideIndex);
      }

      event.preventDefault();
    };

    _createClass(Carousel, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$2;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default;
      }
    }]);

    return Carousel;
  }();

  $__default['default'](document).on(EVENT_CLICK_DATA_API$2, SELECTOR_DATA_SLIDE, Carousel._dataApiClickHandler);
  $__default['default'](window).on(EVENT_LOAD_DATA_API$1, function () {
    var carousels = [].slice.call(document.querySelectorAll(SELECTOR_DATA_RIDE));

    for (var i = 0, len = carousels.length; i < len; i++) {
      var $carousel = $__default['default'](carousels[i]);

      Carousel._jQueryInterface.call($carousel, $carousel.data());
    }
  });
  $__default['default'].fn[NAME$2] = Carousel._jQueryInterface;
  $__default['default'].fn[NAME$2].Constructor = Carousel;

  $__default['default'].fn[NAME$2].noConflict = function () {
    $__default['default'].fn[NAME$2] = JQUERY_NO_CONFLICT$2;
    return Carousel._jQueryInterface;
  };

  var NAME$3 = 'collapse';
  var VERSION$3 = '4.5.3';
  var DATA_KEY$3 = 'bs.collapse';
  var EVENT_KEY$3 = "." + DATA_KEY$3;
  var DATA_API_KEY$3 = '.data-api';
  var JQUERY_NO_CONFLICT$3 = $__default['default'].fn[NAME$3];
  var Default$1 = {
    toggle: true,
    parent: ''
  };
  var DefaultType$1 = {
    toggle: 'boolean',
    parent: '(string|element)'
  };
  var EVENT_SHOW = "show" + EVENT_KEY$3;
  var EVENT_SHOWN = "shown" + EVENT_KEY$3;
  var EVENT_HIDE = "hide" + EVENT_KEY$3;
  var EVENT_HIDDEN = "hidden" + EVENT_KEY$3;
  var EVENT_CLICK_DATA_API$3 = "click" + EVENT_KEY$3 + DATA_API_KEY$3;
  var CLASS_NAME_SHOW$1 = 'show';
  var CLASS_NAME_COLLAPSE = 'collapse';
  var CLASS_NAME_COLLAPSING = 'collapsing';
  var CLASS_NAME_COLLAPSED = 'collapsed';
  var DIMENSION_WIDTH = 'width';
  var DIMENSION_HEIGHT = 'height';
  var SELECTOR_ACTIVES = '.show, .collapsing';
  var SELECTOR_DATA_TOGGLE$1 = '[data-toggle="collapse"]';

  var Collapse = function () {
    function Collapse(element, config) {
      this._isTransitioning = false;
      this._element = element;
      this._config = this._getConfig(config);
      this._triggerArray = [].slice.call(document.querySelectorAll("[data-toggle=\"collapse\"][href=\"#" + element.id + "\"]," + ("[data-toggle=\"collapse\"][data-target=\"#" + element.id + "\"]")));
      var toggleList = [].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLE$1));

      for (var i = 0, len = toggleList.length; i < len; i++) {
        var elem = toggleList[i];
        var selector = Util.getSelectorFromElement(elem);
        var filterElement = [].slice.call(document.querySelectorAll(selector)).filter(function (foundElem) {
          return foundElem === element;
        });

        if (selector !== null && filterElement.length > 0) {
          this._selector = selector;

          this._triggerArray.push(elem);
        }
      }

      this._parent = this._config.parent ? this._getParent() : null;

      if (!this._config.parent) {
        this._addAriaAndCollapsedClass(this._element, this._triggerArray);
      }

      if (this._config.toggle) {
        this.toggle();
      }
    }

    var _proto = Collapse.prototype;

    _proto.toggle = function toggle() {
      if ($__default['default'](this._element).hasClass(CLASS_NAME_SHOW$1)) {
        this.hide();
      } else {
        this.show();
      }
    };

    _proto.show = function show() {
      var _this = this;

      if (this._isTransitioning || $__default['default'](this._element).hasClass(CLASS_NAME_SHOW$1)) {
        return;
      }

      var actives;
      var activesData;

      if (this._parent) {
        actives = [].slice.call(this._parent.querySelectorAll(SELECTOR_ACTIVES)).filter(function (elem) {
          if (typeof _this._config.parent === 'string') {
            return elem.getAttribute('data-parent') === _this._config.parent;
          }

          return elem.classList.contains(CLASS_NAME_COLLAPSE);
        });

        if (actives.length === 0) {
          actives = null;
        }
      }

      if (actives) {
        activesData = $__default['default'](actives).not(this._selector).data(DATA_KEY$3);

        if (activesData && activesData._isTransitioning) {
          return;
        }
      }

      var startEvent = $__default['default'].Event(EVENT_SHOW);
      $__default['default'](this._element).trigger(startEvent);

      if (startEvent.isDefaultPrevented()) {
        return;
      }

      if (actives) {
        Collapse._jQueryInterface.call($__default['default'](actives).not(this._selector), 'hide');

        if (!activesData) {
          $__default['default'](actives).data(DATA_KEY$3, null);
        }
      }

      var dimension = this._getDimension();

      $__default['default'](this._element).removeClass(CLASS_NAME_COLLAPSE).addClass(CLASS_NAME_COLLAPSING);
      this._element.style[dimension] = 0;

      if (this._triggerArray.length) {
        $__default['default'](this._triggerArray).removeClass(CLASS_NAME_COLLAPSED).attr('aria-expanded', true);
      }

      this.setTransitioning(true);

      var complete = function complete() {
        $__default['default'](_this._element).removeClass(CLASS_NAME_COLLAPSING).addClass(CLASS_NAME_COLLAPSE + " " + CLASS_NAME_SHOW$1);
        _this._element.style[dimension] = '';

        _this.setTransitioning(false);

        $__default['default'](_this._element).trigger(EVENT_SHOWN);
      };

      var capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);
      var scrollSize = "scroll" + capitalizedDimension;
      var transitionDuration = Util.getTransitionDurationFromElement(this._element);
      $__default['default'](this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      this._element.style[dimension] = this._element[scrollSize] + "px";
    };

    _proto.hide = function hide() {
      var _this2 = this;

      if (this._isTransitioning || !$__default['default'](this._element).hasClass(CLASS_NAME_SHOW$1)) {
        return;
      }

      var startEvent = $__default['default'].Event(EVENT_HIDE);
      $__default['default'](this._element).trigger(startEvent);

      if (startEvent.isDefaultPrevented()) {
        return;
      }

      var dimension = this._getDimension();

      this._element.style[dimension] = this._element.getBoundingClientRect()[dimension] + "px";
      Util.reflow(this._element);
      $__default['default'](this._element).addClass(CLASS_NAME_COLLAPSING).removeClass(CLASS_NAME_COLLAPSE + " " + CLASS_NAME_SHOW$1);
      var triggerArrayLength = this._triggerArray.length;

      if (triggerArrayLength > 0) {
        for (var i = 0; i < triggerArrayLength; i++) {
          var trigger = this._triggerArray[i];
          var selector = Util.getSelectorFromElement(trigger);

          if (selector !== null) {
            var $elem = $__default['default']([].slice.call(document.querySelectorAll(selector)));

            if (!$elem.hasClass(CLASS_NAME_SHOW$1)) {
              $__default['default'](trigger).addClass(CLASS_NAME_COLLAPSED).attr('aria-expanded', false);
            }
          }
        }
      }

      this.setTransitioning(true);

      var complete = function complete() {
        _this2.setTransitioning(false);

        $__default['default'](_this2._element).removeClass(CLASS_NAME_COLLAPSING).addClass(CLASS_NAME_COLLAPSE).trigger(EVENT_HIDDEN);
      };

      this._element.style[dimension] = '';
      var transitionDuration = Util.getTransitionDurationFromElement(this._element);
      $__default['default'](this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
    };

    _proto.setTransitioning = function setTransitioning(isTransitioning) {
      this._isTransitioning = isTransitioning;
    };

    _proto.dispose = function dispose() {
      $__default['default'].removeData(this._element, DATA_KEY$3);
      this._config = null;
      this._parent = null;
      this._element = null;
      this._triggerArray = null;
      this._isTransitioning = null;
    };

    _proto._getConfig = function _getConfig(config) {
      config = _extends({}, Default$1, config);
      config.toggle = Boolean(config.toggle);
      Util.typeCheckConfig(NAME$3, config, DefaultType$1);
      return config;
    };

    _proto._getDimension = function _getDimension() {
      var hasWidth = $__default['default'](this._element).hasClass(DIMENSION_WIDTH);
      return hasWidth ? DIMENSION_WIDTH : DIMENSION_HEIGHT;
    };

    _proto._getParent = function _getParent() {
      var _this3 = this;

      var parent;

      if (Util.isElement(this._config.parent)) {
        parent = this._config.parent;

        if (typeof this._config.parent.jquery !== 'undefined') {
          parent = this._config.parent[0];
        }
      } else {
        parent = document.querySelector(this._config.parent);
      }

      var selector = "[data-toggle=\"collapse\"][data-parent=\"" + this._config.parent + "\"]";
      var children = [].slice.call(parent.querySelectorAll(selector));
      $__default['default'](children).each(function (i, element) {
        _this3._addAriaAndCollapsedClass(Collapse._getTargetFromElement(element), [element]);
      });
      return parent;
    };

    _proto._addAriaAndCollapsedClass = function _addAriaAndCollapsedClass(element, triggerArray) {
      var isOpen = $__default['default'](element).hasClass(CLASS_NAME_SHOW$1);

      if (triggerArray.length) {
        $__default['default'](triggerArray).toggleClass(CLASS_NAME_COLLAPSED, !isOpen).attr('aria-expanded', isOpen);
      }
    };

    Collapse._getTargetFromElement = function _getTargetFromElement(element) {
      var selector = Util.getSelectorFromElement(element);
      return selector ? document.querySelector(selector) : null;
    };

    Collapse._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $element = $__default['default'](this);
        var data = $element.data(DATA_KEY$3);

        var _config = _extends({}, Default$1, $element.data(), typeof config === 'object' && config ? config : {});

        if (!data && _config.toggle && typeof config === 'string' && /show|hide/.test(config)) {
          _config.toggle = false;
        }

        if (!data) {
          data = new Collapse(this, _config);
          $element.data(DATA_KEY$3, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Collapse, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$3;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$1;
      }
    }]);

    return Collapse;
  }();

  $__default['default'](document).on(EVENT_CLICK_DATA_API$3, SELECTOR_DATA_TOGGLE$1, function (event) {
    if (event.currentTarget.tagName === 'A') {
      event.preventDefault();
    }

    var $trigger = $__default['default'](this);
    var selector = Util.getSelectorFromElement(this);
    var selectors = [].slice.call(document.querySelectorAll(selector));
    $__default['default'](selectors).each(function () {
      var $target = $__default['default'](this);
      var data = $target.data(DATA_KEY$3);
      var config = data ? 'toggle' : $trigger.data();

      Collapse._jQueryInterface.call($target, config);
    });
  });
  $__default['default'].fn[NAME$3] = Collapse._jQueryInterface;
  $__default['default'].fn[NAME$3].Constructor = Collapse;

  $__default['default'].fn[NAME$3].noConflict = function () {
    $__default['default'].fn[NAME$3] = JQUERY_NO_CONFLICT$3;
    return Collapse._jQueryInterface;
  };

  var NAME$4 = 'dropdown';
  var VERSION$4 = '4.5.3';
  var DATA_KEY$4 = 'bs.dropdown';
  var EVENT_KEY$4 = "." + DATA_KEY$4;
  var DATA_API_KEY$4 = '.data-api';
  var JQUERY_NO_CONFLICT$4 = $__default['default'].fn[NAME$4];
  var ESCAPE_KEYCODE = 27;
  var SPACE_KEYCODE = 32;
  var TAB_KEYCODE = 9;
  var ARROW_UP_KEYCODE = 38;
  var ARROW_DOWN_KEYCODE = 40;
  var RIGHT_MOUSE_BUTTON_WHICH = 3;
  var REGEXP_KEYDOWN = new RegExp(ARROW_UP_KEYCODE + "|" + ARROW_DOWN_KEYCODE + "|" + ESCAPE_KEYCODE);
  var EVENT_HIDE$1 = "hide" + EVENT_KEY$4;
  var EVENT_HIDDEN$1 = "hidden" + EVENT_KEY$4;
  var EVENT_SHOW$1 = "show" + EVENT_KEY$4;
  var EVENT_SHOWN$1 = "shown" + EVENT_KEY$4;
  var EVENT_CLICK = "click" + EVENT_KEY$4;
  var EVENT_CLICK_DATA_API$4 = "click" + EVENT_KEY$4 + DATA_API_KEY$4;
  var EVENT_KEYDOWN_DATA_API = "keydown" + EVENT_KEY$4 + DATA_API_KEY$4;
  var EVENT_KEYUP_DATA_API = "keyup" + EVENT_KEY$4 + DATA_API_KEY$4;
  var CLASS_NAME_DISABLED = 'disabled';
  var CLASS_NAME_SHOW$2 = 'show';
  var CLASS_NAME_DROPUP = 'dropup';
  var CLASS_NAME_DROPRIGHT = 'dropright';
  var CLASS_NAME_DROPLEFT = 'dropleft';
  var CLASS_NAME_MENURIGHT = 'dropdown-menu-right';
  var CLASS_NAME_POSITION_STATIC = 'position-static';
  var SELECTOR_DATA_TOGGLE$2 = '[data-toggle="dropdown"]';
  var SELECTOR_FORM_CHILD = '.dropdown form';
  var SELECTOR_MENU = '.dropdown-menu';
  var SELECTOR_NAVBAR_NAV = '.navbar-nav';
  var SELECTOR_VISIBLE_ITEMS = '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)';
  var PLACEMENT_TOP = 'top-start';
  var PLACEMENT_TOPEND = 'top-end';
  var PLACEMENT_BOTTOM = 'bottom-start';
  var PLACEMENT_BOTTOMEND = 'bottom-end';
  var PLACEMENT_RIGHT = 'right-start';
  var PLACEMENT_LEFT = 'left-start';
  var Default$2 = {
    offset: 0,
    flip: true,
    boundary: 'scrollParent',
    reference: 'toggle',
    display: 'dynamic',
    popperConfig: null
  };
  var DefaultType$2 = {
    offset: '(number|string|function)',
    flip: 'boolean',
    boundary: '(string|element)',
    reference: '(string|element)',
    display: 'string',
    popperConfig: '(null|object)'
  };

  var Dropdown = function () {
    function Dropdown(element, config) {
      this._element = element;
      this._popper = null;
      this._config = this._getConfig(config);
      this._menu = this._getMenuElement();
      this._inNavbar = this._detectNavbar();

      this._addEventListeners();
    }

    var _proto = Dropdown.prototype;

    _proto.toggle = function toggle() {
      if (this._element.disabled || $__default['default'](this._element).hasClass(CLASS_NAME_DISABLED)) {
        return;
      }

      var isActive = $__default['default'](this._menu).hasClass(CLASS_NAME_SHOW$2);

      Dropdown._clearMenus();

      if (isActive) {
        return;
      }

      this.show(true);
    };

    _proto.show = function show(usePopper) {
      if (usePopper === void 0) {
        usePopper = false;
      }

      if (this._element.disabled || $__default['default'](this._element).hasClass(CLASS_NAME_DISABLED) || $__default['default'](this._menu).hasClass(CLASS_NAME_SHOW$2)) {
        return;
      }

      var relatedTarget = {
        relatedTarget: this._element
      };
      var showEvent = $__default['default'].Event(EVENT_SHOW$1, relatedTarget);

      var parent = Dropdown._getParentFromElement(this._element);

      $__default['default'](parent).trigger(showEvent);

      if (showEvent.isDefaultPrevented()) {
        return;
      }

      if (!this._inNavbar && usePopper) {
        if (typeof Popper__default['default'] === 'undefined') {
          throw new TypeError('Bootstrap\'s dropdowns require Popper.js (https://popper.js.org/)');
        }

        var referenceElement = this._element;

        if (this._config.reference === 'parent') {
          referenceElement = parent;
        } else if (Util.isElement(this._config.reference)) {
          referenceElement = this._config.reference;

          if (typeof this._config.reference.jquery !== 'undefined') {
            referenceElement = this._config.reference[0];
          }
        }

        if (this._config.boundary !== 'scrollParent') {
          $__default['default'](parent).addClass(CLASS_NAME_POSITION_STATIC);
        }

        this._popper = new Popper__default['default'](referenceElement, this._menu, this._getPopperConfig());
      }

      if ('ontouchstart' in document.documentElement && $__default['default'](parent).closest(SELECTOR_NAVBAR_NAV).length === 0) {
        $__default['default'](document.body).children().on('mouseover', null, $__default['default'].noop);
      }

      this._element.focus();

      this._element.setAttribute('aria-expanded', true);

      $__default['default'](this._menu).toggleClass(CLASS_NAME_SHOW$2);
      $__default['default'](parent).toggleClass(CLASS_NAME_SHOW$2).trigger($__default['default'].Event(EVENT_SHOWN$1, relatedTarget));
    };

    _proto.hide = function hide() {
      if (this._element.disabled || $__default['default'](this._element).hasClass(CLASS_NAME_DISABLED) || !$__default['default'](this._menu).hasClass(CLASS_NAME_SHOW$2)) {
        return;
      }

      var relatedTarget = {
        relatedTarget: this._element
      };
      var hideEvent = $__default['default'].Event(EVENT_HIDE$1, relatedTarget);

      var parent = Dropdown._getParentFromElement(this._element);

      $__default['default'](parent).trigger(hideEvent);

      if (hideEvent.isDefaultPrevented()) {
        return;
      }

      if (this._popper) {
        this._popper.destroy();
      }

      $__default['default'](this._menu).toggleClass(CLASS_NAME_SHOW$2);
      $__default['default'](parent).toggleClass(CLASS_NAME_SHOW$2).trigger($__default['default'].Event(EVENT_HIDDEN$1, relatedTarget));
    };

    _proto.dispose = function dispose() {
      $__default['default'].removeData(this._element, DATA_KEY$4);
      $__default['default'](this._element).off(EVENT_KEY$4);
      this._element = null;
      this._menu = null;

      if (this._popper !== null) {
        this._popper.destroy();

        this._popper = null;
      }
    };

    _proto.update = function update() {
      this._inNavbar = this._detectNavbar();

      if (this._popper !== null) {
        this._popper.scheduleUpdate();
      }
    };

    _proto._addEventListeners = function _addEventListeners() {
      var _this = this;

      $__default['default'](this._element).on(EVENT_CLICK, function (event) {
        event.preventDefault();
        event.stopPropagation();

        _this.toggle();
      });
    };

    _proto._getConfig = function _getConfig(config) {
      config = _extends({}, this.constructor.Default, $__default['default'](this._element).data(), config);
      Util.typeCheckConfig(NAME$4, config, this.constructor.DefaultType);
      return config;
    };

    _proto._getMenuElement = function _getMenuElement() {
      if (!this._menu) {
        var parent = Dropdown._getParentFromElement(this._element);

        if (parent) {
          this._menu = parent.querySelector(SELECTOR_MENU);
        }
      }

      return this._menu;
    };

    _proto._getPlacement = function _getPlacement() {
      var $parentDropdown = $__default['default'](this._element.parentNode);
      var placement = PLACEMENT_BOTTOM;

      if ($parentDropdown.hasClass(CLASS_NAME_DROPUP)) {
        placement = $__default['default'](this._menu).hasClass(CLASS_NAME_MENURIGHT) ? PLACEMENT_TOPEND : PLACEMENT_TOP;
      } else if ($parentDropdown.hasClass(CLASS_NAME_DROPRIGHT)) {
        placement = PLACEMENT_RIGHT;
      } else if ($parentDropdown.hasClass(CLASS_NAME_DROPLEFT)) {
        placement = PLACEMENT_LEFT;
      } else if ($__default['default'](this._menu).hasClass(CLASS_NAME_MENURIGHT)) {
        placement = PLACEMENT_BOTTOMEND;
      }

      return placement;
    };

    _proto._detectNavbar = function _detectNavbar() {
      return $__default['default'](this._element).closest('.navbar').length > 0;
    };

    _proto._getOffset = function _getOffset() {
      var _this2 = this;

      var offset = {};

      if (typeof this._config.offset === 'function') {
        offset.fn = function (data) {
          data.offsets = _extends({}, data.offsets, _this2._config.offset(data.offsets, _this2._element) || {});
          return data;
        };
      } else {
        offset.offset = this._config.offset;
      }

      return offset;
    };

    _proto._getPopperConfig = function _getPopperConfig() {
      var popperConfig = {
        placement: this._getPlacement(),
        modifiers: {
          offset: this._getOffset(),
          flip: {
            enabled: this._config.flip
          },
          preventOverflow: {
            boundariesElement: this._config.boundary
          }
        }
      };

      if (this._config.display === 'static') {
        popperConfig.modifiers.applyStyle = {
          enabled: false
        };
      }

      return _extends({}, popperConfig, this._config.popperConfig);
    };

    Dropdown._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $__default['default'](this).data(DATA_KEY$4);

        var _config = typeof config === 'object' ? config : null;

        if (!data) {
          data = new Dropdown(this, _config);
          $__default['default'](this).data(DATA_KEY$4, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    Dropdown._clearMenus = function _clearMenus(event) {
      if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH || event.type === 'keyup' && event.which !== TAB_KEYCODE)) {
        return;
      }

      var toggles = [].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLE$2));

      for (var i = 0, len = toggles.length; i < len; i++) {
        var parent = Dropdown._getParentFromElement(toggles[i]);

        var context = $__default['default'](toggles[i]).data(DATA_KEY$4);
        var relatedTarget = {
          relatedTarget: toggles[i]
        };

        if (event && event.type === 'click') {
          relatedTarget.clickEvent = event;
        }

        if (!context) {
          continue;
        }

        var dropdownMenu = context._menu;

        if (!$__default['default'](parent).hasClass(CLASS_NAME_SHOW$2)) {
          continue;
        }

        if (event && (event.type === 'click' && /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) && $__default['default'].contains(parent, event.target)) {
          continue;
        }

        var hideEvent = $__default['default'].Event(EVENT_HIDE$1, relatedTarget);
        $__default['default'](parent).trigger(hideEvent);

        if (hideEvent.isDefaultPrevented()) {
          continue;
        }

        if ('ontouchstart' in document.documentElement) {
          $__default['default'](document.body).children().off('mouseover', null, $__default['default'].noop);
        }

        toggles[i].setAttribute('aria-expanded', 'false');

        if (context._popper) {
          context._popper.destroy();
        }

        $__default['default'](dropdownMenu).removeClass(CLASS_NAME_SHOW$2);
        $__default['default'](parent).removeClass(CLASS_NAME_SHOW$2).trigger($__default['default'].Event(EVENT_HIDDEN$1, relatedTarget));
      }
    };

    Dropdown._getParentFromElement = function _getParentFromElement(element) {
      var parent;
      var selector = Util.getSelectorFromElement(element);

      if (selector) {
        parent = document.querySelector(selector);
      }

      return parent || element.parentNode;
    };

    Dropdown._dataApiKeydownHandler = function _dataApiKeydownHandler(event) {
      if (/input|textarea/i.test(event.target.tagName) ? event.which === SPACE_KEYCODE || event.which !== ESCAPE_KEYCODE && (event.which !== ARROW_DOWN_KEYCODE && event.which !== ARROW_UP_KEYCODE || $__default['default'](event.target).closest(SELECTOR_MENU).length) : !REGEXP_KEYDOWN.test(event.which)) {
        return;
      }

      if (this.disabled || $__default['default'](this).hasClass(CLASS_NAME_DISABLED)) {
        return;
      }

      var parent = Dropdown._getParentFromElement(this);

      var isActive = $__default['default'](parent).hasClass(CLASS_NAME_SHOW$2);

      if (!isActive && event.which === ESCAPE_KEYCODE) {
        return;
      }

      event.preventDefault();
      event.stopPropagation();

      if (!isActive || event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE) {
        if (event.which === ESCAPE_KEYCODE) {
          $__default['default'](parent.querySelector(SELECTOR_DATA_TOGGLE$2)).trigger('focus');
        }

        $__default['default'](this).trigger('click');
        return;
      }

      var items = [].slice.call(parent.querySelectorAll(SELECTOR_VISIBLE_ITEMS)).filter(function (item) {
        return $__default['default'](item).is(':visible');
      });

      if (items.length === 0) {
        return;
      }

      var index = items.indexOf(event.target);

      if (event.which === ARROW_UP_KEYCODE && index > 0) {
        index--;
      }

      if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) {
        index++;
      }

      if (index < 0) {
        index = 0;
      }

      items[index].focus();
    };

    _createClass(Dropdown, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$4;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$2;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$2;
      }
    }]);

    return Dropdown;
  }();

  $__default['default'](document).on(EVENT_KEYDOWN_DATA_API, SELECTOR_DATA_TOGGLE$2, Dropdown._dataApiKeydownHandler).on(EVENT_KEYDOWN_DATA_API, SELECTOR_MENU, Dropdown._dataApiKeydownHandler).on(EVENT_CLICK_DATA_API$4 + " " + EVENT_KEYUP_DATA_API, Dropdown._clearMenus).on(EVENT_CLICK_DATA_API$4, SELECTOR_DATA_TOGGLE$2, function (event) {
    event.preventDefault();
    event.stopPropagation();

    Dropdown._jQueryInterface.call($__default['default'](this), 'toggle');
  }).on(EVENT_CLICK_DATA_API$4, SELECTOR_FORM_CHILD, function (e) {
    e.stopPropagation();
  });
  $__default['default'].fn[NAME$4] = Dropdown._jQueryInterface;
  $__default['default'].fn[NAME$4].Constructor = Dropdown;

  $__default['default'].fn[NAME$4].noConflict = function () {
    $__default['default'].fn[NAME$4] = JQUERY_NO_CONFLICT$4;
    return Dropdown._jQueryInterface;
  };

  var NAME$5 = 'modal';
  var VERSION$5 = '4.5.3';
  var DATA_KEY$5 = 'bs.modal';
  var EVENT_KEY$5 = "." + DATA_KEY$5;
  var DATA_API_KEY$5 = '.data-api';
  var JQUERY_NO_CONFLICT$5 = $__default['default'].fn[NAME$5];
  var ESCAPE_KEYCODE$1 = 27;
  var Default$3 = {
    backdrop: true,
    keyboard: true,
    focus: true,
    show: true
  };
  var DefaultType$3 = {
    backdrop: '(boolean|string)',
    keyboard: 'boolean',
    focus: 'boolean',
    show: 'boolean'
  };
  var EVENT_HIDE$2 = "hide" + EVENT_KEY$5;
  var EVENT_HIDE_PREVENTED = "hidePrevented" + EVENT_KEY$5;
  var EVENT_HIDDEN$2 = "hidden" + EVENT_KEY$5;
  var EVENT_SHOW$2 = "show" + EVENT_KEY$5;
  var EVENT_SHOWN$2 = "shown" + EVENT_KEY$5;
  var EVENT_FOCUSIN = "focusin" + EVENT_KEY$5;
  var EVENT_RESIZE = "resize" + EVENT_KEY$5;
  var EVENT_CLICK_DISMISS = "click.dismiss" + EVENT_KEY$5;
  var EVENT_KEYDOWN_DISMISS = "keydown.dismiss" + EVENT_KEY$5;
  var EVENT_MOUSEUP_DISMISS = "mouseup.dismiss" + EVENT_KEY$5;
  var EVENT_MOUSEDOWN_DISMISS = "mousedown.dismiss" + EVENT_KEY$5;
  var EVENT_CLICK_DATA_API$5 = "click" + EVENT_KEY$5 + DATA_API_KEY$5;
  var CLASS_NAME_SCROLLABLE = 'modal-dialog-scrollable';
  var CLASS_NAME_SCROLLBAR_MEASURER = 'modal-scrollbar-measure';
  var CLASS_NAME_BACKDROP = 'modal-backdrop';
  var CLASS_NAME_OPEN = 'modal-open';
  var CLASS_NAME_FADE$1 = 'fade';
  var CLASS_NAME_SHOW$3 = 'show';
  var CLASS_NAME_STATIC = 'modal-static';
  var SELECTOR_DIALOG = '.modal-dialog';
  var SELECTOR_MODAL_BODY = '.modal-body';
  var SELECTOR_DATA_TOGGLE$3 = '[data-toggle="modal"]';
  var SELECTOR_DATA_DISMISS = '[data-dismiss="modal"]';
  var SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top';
  var SELECTOR_STICKY_CONTENT = '.sticky-top';

  var Modal = function () {
    function Modal(element, config) {
      this._config = this._getConfig(config);
      this._element = element;
      this._dialog = element.querySelector(SELECTOR_DIALOG);
      this._backdrop = null;
      this._isShown = false;
      this._isBodyOverflowing = false;
      this._ignoreBackdropClick = false;
      this._isTransitioning = false;
      this._scrollbarWidth = 0;
    }

    var _proto = Modal.prototype;

    _proto.toggle = function toggle(relatedTarget) {
      return this._isShown ? this.hide() : this.show(relatedTarget);
    };

    _proto.show = function show(relatedTarget) {
      var _this = this;

      if (this._isShown || this._isTransitioning) {
        return;
      }

      if ($__default['default'](this._element).hasClass(CLASS_NAME_FADE$1)) {
        this._isTransitioning = true;
      }

      var showEvent = $__default['default'].Event(EVENT_SHOW$2, {
        relatedTarget: relatedTarget
      });
      $__default['default'](this._element).trigger(showEvent);

      if (this._isShown || showEvent.isDefaultPrevented()) {
        return;
      }

      this._isShown = true;

      this._checkScrollbar();

      this._setScrollbar();

      this._adjustDialog();

      this._setEscapeEvent();

      this._setResizeEvent();

      $__default['default'](this._element).on(EVENT_CLICK_DISMISS, SELECTOR_DATA_DISMISS, function (event) {
        return _this.hide(event);
      });
      $__default['default'](this._dialog).on(EVENT_MOUSEDOWN_DISMISS, function () {
        $__default['default'](_this._element).one(EVENT_MOUSEUP_DISMISS, function (event) {
          if ($__default['default'](event.target).is(_this._element)) {
            _this._ignoreBackdropClick = true;
          }
        });
      });

      this._showBackdrop(function () {
        return _this._showElement(relatedTarget);
      });
    };

    _proto.hide = function hide(event) {
      var _this2 = this;

      if (event) {
        event.preventDefault();
      }

      if (!this._isShown || this._isTransitioning) {
        return;
      }

      var hideEvent = $__default['default'].Event(EVENT_HIDE$2);
      $__default['default'](this._element).trigger(hideEvent);

      if (!this._isShown || hideEvent.isDefaultPrevented()) {
        return;
      }

      this._isShown = false;
      var transition = $__default['default'](this._element).hasClass(CLASS_NAME_FADE$1);

      if (transition) {
        this._isTransitioning = true;
      }

      this._setEscapeEvent();

      this._setResizeEvent();

      $__default['default'](document).off(EVENT_FOCUSIN);
      $__default['default'](this._element).removeClass(CLASS_NAME_SHOW$3);
      $__default['default'](this._element).off(EVENT_CLICK_DISMISS);
      $__default['default'](this._dialog).off(EVENT_MOUSEDOWN_DISMISS);

      if (transition) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._element);
        $__default['default'](this._element).one(Util.TRANSITION_END, function (event) {
          return _this2._hideModal(event);
        }).emulateTransitionEnd(transitionDuration);
      } else {
        this._hideModal();
      }
    };

    _proto.dispose = function dispose() {
      [window, this._element, this._dialog].forEach(function (htmlElement) {
        return $__default['default'](htmlElement).off(EVENT_KEY$5);
      });
      $__default['default'](document).off(EVENT_FOCUSIN);
      $__default['default'].removeData(this._element, DATA_KEY$5);
      this._config = null;
      this._element = null;
      this._dialog = null;
      this._backdrop = null;
      this._isShown = null;
      this._isBodyOverflowing = null;
      this._ignoreBackdropClick = null;
      this._isTransitioning = null;
      this._scrollbarWidth = null;
    };

    _proto.handleUpdate = function handleUpdate() {
      this._adjustDialog();
    };

    _proto._getConfig = function _getConfig(config) {
      config = _extends({}, Default$3, config);
      Util.typeCheckConfig(NAME$5, config, DefaultType$3);
      return config;
    };

    _proto._triggerBackdropTransition = function _triggerBackdropTransition() {
      var _this3 = this;

      if (this._config.backdrop === 'static') {
        var hideEventPrevented = $__default['default'].Event(EVENT_HIDE_PREVENTED);
        $__default['default'](this._element).trigger(hideEventPrevented);

        if (hideEventPrevented.isDefaultPrevented()) {
          return;
        }

        var isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;

        if (!isModalOverflowing) {
          this._element.style.overflowY = 'hidden';
        }

        this._element.classList.add(CLASS_NAME_STATIC);

        var modalTransitionDuration = Util.getTransitionDurationFromElement(this._dialog);
        $__default['default'](this._element).off(Util.TRANSITION_END);
        $__default['default'](this._element).one(Util.TRANSITION_END, function () {
          _this3._element.classList.remove(CLASS_NAME_STATIC);

          if (!isModalOverflowing) {
            $__default['default'](_this3._element).one(Util.TRANSITION_END, function () {
              _this3._element.style.overflowY = '';
            }).emulateTransitionEnd(_this3._element, modalTransitionDuration);
          }
        }).emulateTransitionEnd(modalTransitionDuration);

        this._element.focus();
      } else {
        this.hide();
      }
    };

    _proto._showElement = function _showElement(relatedTarget) {
      var _this4 = this;

      var transition = $__default['default'](this._element).hasClass(CLASS_NAME_FADE$1);
      var modalBody = this._dialog ? this._dialog.querySelector(SELECTOR_MODAL_BODY) : null;

      if (!this._element.parentNode || this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {
        document.body.appendChild(this._element);
      }

      this._element.style.display = 'block';

      this._element.removeAttribute('aria-hidden');

      this._element.setAttribute('aria-modal', true);

      this._element.setAttribute('role', 'dialog');

      if ($__default['default'](this._dialog).hasClass(CLASS_NAME_SCROLLABLE) && modalBody) {
        modalBody.scrollTop = 0;
      } else {
        this._element.scrollTop = 0;
      }

      if (transition) {
        Util.reflow(this._element);
      }

      $__default['default'](this._element).addClass(CLASS_NAME_SHOW$3);

      if (this._config.focus) {
        this._enforceFocus();
      }

      var shownEvent = $__default['default'].Event(EVENT_SHOWN$2, {
        relatedTarget: relatedTarget
      });

      var transitionComplete = function transitionComplete() {
        if (_this4._config.focus) {
          _this4._element.focus();
        }

        _this4._isTransitioning = false;
        $__default['default'](_this4._element).trigger(shownEvent);
      };

      if (transition) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._dialog);
        $__default['default'](this._dialog).one(Util.TRANSITION_END, transitionComplete).emulateTransitionEnd(transitionDuration);
      } else {
        transitionComplete();
      }
    };

    _proto._enforceFocus = function _enforceFocus() {
      var _this5 = this;

      $__default['default'](document).off(EVENT_FOCUSIN).on(EVENT_FOCUSIN, function (event) {
        if (document !== event.target && _this5._element !== event.target && $__default['default'](_this5._element).has(event.target).length === 0) {
          _this5._element.focus();
        }
      });
    };

    _proto._setEscapeEvent = function _setEscapeEvent() {
      var _this6 = this;

      if (this._isShown) {
        $__default['default'](this._element).on(EVENT_KEYDOWN_DISMISS, function (event) {
          if (_this6._config.keyboard && event.which === ESCAPE_KEYCODE$1) {
            event.preventDefault();

            _this6.hide();
          } else if (!_this6._config.keyboard && event.which === ESCAPE_KEYCODE$1) {
            _this6._triggerBackdropTransition();
          }
        });
      } else if (!this._isShown) {
        $__default['default'](this._element).off(EVENT_KEYDOWN_DISMISS);
      }
    };

    _proto._setResizeEvent = function _setResizeEvent() {
      var _this7 = this;

      if (this._isShown) {
        $__default['default'](window).on(EVENT_RESIZE, function (event) {
          return _this7.handleUpdate(event);
        });
      } else {
        $__default['default'](window).off(EVENT_RESIZE);
      }
    };

    _proto._hideModal = function _hideModal() {
      var _this8 = this;

      this._element.style.display = 'none';

      this._element.setAttribute('aria-hidden', true);

      this._element.removeAttribute('aria-modal');

      this._element.removeAttribute('role');

      this._isTransitioning = false;

      this._showBackdrop(function () {
        $__default['default'](document.body).removeClass(CLASS_NAME_OPEN);

        _this8._resetAdjustments();

        _this8._resetScrollbar();

        $__default['default'](_this8._element).trigger(EVENT_HIDDEN$2);
      });
    };

    _proto._removeBackdrop = function _removeBackdrop() {
      if (this._backdrop) {
        $__default['default'](this._backdrop).remove();
        this._backdrop = null;
      }
    };

    _proto._showBackdrop = function _showBackdrop(callback) {
      var _this9 = this;

      var animate = $__default['default'](this._element).hasClass(CLASS_NAME_FADE$1) ? CLASS_NAME_FADE$1 : '';

      if (this._isShown && this._config.backdrop) {
        this._backdrop = document.createElement('div');
        this._backdrop.className = CLASS_NAME_BACKDROP;

        if (animate) {
          this._backdrop.classList.add(animate);
        }

        $__default['default'](this._backdrop).appendTo(document.body);
        $__default['default'](this._element).on(EVENT_CLICK_DISMISS, function (event) {
          if (_this9._ignoreBackdropClick) {
            _this9._ignoreBackdropClick = false;
            return;
          }

          if (event.target !== event.currentTarget) {
            return;
          }

          _this9._triggerBackdropTransition();
        });

        if (animate) {
          Util.reflow(this._backdrop);
        }

        $__default['default'](this._backdrop).addClass(CLASS_NAME_SHOW$3);

        if (!callback) {
          return;
        }

        if (!animate) {
          callback();
          return;
        }

        var backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop);
        $__default['default'](this._backdrop).one(Util.TRANSITION_END, callback).emulateTransitionEnd(backdropTransitionDuration);
      } else if (!this._isShown && this._backdrop) {
        $__default['default'](this._backdrop).removeClass(CLASS_NAME_SHOW$3);

        var callbackRemove = function callbackRemove() {
          _this9._removeBackdrop();

          if (callback) {
            callback();
          }
        };

        if ($__default['default'](this._element).hasClass(CLASS_NAME_FADE$1)) {
          var _backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop);

          $__default['default'](this._backdrop).one(Util.TRANSITION_END, callbackRemove).emulateTransitionEnd(_backdropTransitionDuration);
        } else {
          callbackRemove();
        }
      } else if (callback) {
        callback();
      }
    };

    _proto._adjustDialog = function _adjustDialog() {
      var isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;

      if (!this._isBodyOverflowing && isModalOverflowing) {
        this._element.style.paddingLeft = this._scrollbarWidth + "px";
      }

      if (this._isBodyOverflowing && !isModalOverflowing) {
        this._element.style.paddingRight = this._scrollbarWidth + "px";
      }
    };

    _proto._resetAdjustments = function _resetAdjustments() {
      this._element.style.paddingLeft = '';
      this._element.style.paddingRight = '';
    };

    _proto._checkScrollbar = function _checkScrollbar() {
      var rect = document.body.getBoundingClientRect();
      this._isBodyOverflowing = Math.round(rect.left + rect.right) < window.innerWidth;
      this._scrollbarWidth = this._getScrollbarWidth();
    };

    _proto._setScrollbar = function _setScrollbar() {
      var _this10 = this;

      if (this._isBodyOverflowing) {
        var fixedContent = [].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT));
        var stickyContent = [].slice.call(document.querySelectorAll(SELECTOR_STICKY_CONTENT));
        $__default['default'](fixedContent).each(function (index, element) {
          var actualPadding = element.style.paddingRight;
          var calculatedPadding = $__default['default'](element).css('padding-right');
          $__default['default'](element).data('padding-right', actualPadding).css('padding-right', parseFloat(calculatedPadding) + _this10._scrollbarWidth + "px");
        });
        $__default['default'](stickyContent).each(function (index, element) {
          var actualMargin = element.style.marginRight;
          var calculatedMargin = $__default['default'](element).css('margin-right');
          $__default['default'](element).data('margin-right', actualMargin).css('margin-right', parseFloat(calculatedMargin) - _this10._scrollbarWidth + "px");
        });
        var actualPadding = document.body.style.paddingRight;
        var calculatedPadding = $__default['default'](document.body).css('padding-right');
        $__default['default'](document.body).data('padding-right', actualPadding).css('padding-right', parseFloat(calculatedPadding) + this._scrollbarWidth + "px");
      }

      $__default['default'](document.body).addClass(CLASS_NAME_OPEN);
    };

    _proto._resetScrollbar = function _resetScrollbar() {
      var fixedContent = [].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT));
      $__default['default'](fixedContent).each(function (index, element) {
        var padding = $__default['default'](element).data('padding-right');
        $__default['default'](element).removeData('padding-right');
        element.style.paddingRight = padding ? padding : '';
      });
      var elements = [].slice.call(document.querySelectorAll("" + SELECTOR_STICKY_CONTENT));
      $__default['default'](elements).each(function (index, element) {
        var margin = $__default['default'](element).data('margin-right');

        if (typeof margin !== 'undefined') {
          $__default['default'](element).css('margin-right', margin).removeData('margin-right');
        }
      });
      var padding = $__default['default'](document.body).data('padding-right');
      $__default['default'](document.body).removeData('padding-right');
      document.body.style.paddingRight = padding ? padding : '';
    };

    _proto._getScrollbarWidth = function _getScrollbarWidth() {
      var scrollDiv = document.createElement('div');
      scrollDiv.className = CLASS_NAME_SCROLLBAR_MEASURER;
      document.body.appendChild(scrollDiv);
      var scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;
      document.body.removeChild(scrollDiv);
      return scrollbarWidth;
    };

    Modal._jQueryInterface = function _jQueryInterface(config, relatedTarget) {
      return this.each(function () {
        var data = $__default['default'](this).data(DATA_KEY$5);

        var _config = _extends({}, Default$3, $__default['default'](this).data(), typeof config === 'object' && config ? config : {});

        if (!data) {
          data = new Modal(this, _config);
          $__default['default'](this).data(DATA_KEY$5, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config](relatedTarget);
        } else if (_config.show) {
          data.show(relatedTarget);
        }
      });
    };

    _createClass(Modal, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$5;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$3;
      }
    }]);

    return Modal;
  }();

  $__default['default'](document).on(EVENT_CLICK_DATA_API$5, SELECTOR_DATA_TOGGLE$3, function (event) {
    var _this11 = this;

    var target;
    var selector = Util.getSelectorFromElement(this);

    if (selector) {
      target = document.querySelector(selector);
    }

    var config = $__default['default'](target).data(DATA_KEY$5) ? 'toggle' : _extends({}, $__default['default'](target).data(), $__default['default'](this).data());

    if (this.tagName === 'A' || this.tagName === 'AREA') {
      event.preventDefault();
    }

    var $target = $__default['default'](target).one(EVENT_SHOW$2, function (showEvent) {
      if (showEvent.isDefaultPrevented()) {
        return;
      }

      $target.one(EVENT_HIDDEN$2, function () {
        if ($__default['default'](_this11).is(':visible')) {
          _this11.focus();
        }
      });
    });

    Modal._jQueryInterface.call($__default['default'](target), config, this);
  });
  $__default['default'].fn[NAME$5] = Modal._jQueryInterface;
  $__default['default'].fn[NAME$5].Constructor = Modal;

  $__default['default'].fn[NAME$5].noConflict = function () {
    $__default['default'].fn[NAME$5] = JQUERY_NO_CONFLICT$5;
    return Modal._jQueryInterface;
  };

  var uriAttrs = ['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href'];
  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\w-]*$/i;
  var DefaultWhitelist = {
    '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],
    a: ['target', 'href', 'title', 'rel'],
    area: [],
    b: [],
    br: [],
    col: [],
    code: [],
    div: [],
    em: [],
    hr: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    i: [],
    img: ['src', 'srcset', 'alt', 'title', 'width', 'height'],
    li: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    small: [],
    span: [],
    sub: [],
    sup: [],
    strong: [],
    u: [],
    ul: []
  };
  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi;
  var DATA_URL_PATTERN = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;

  function allowedAttribute(attr, allowedAttributeList) {
    var attrName = attr.nodeName.toLowerCase();

    if (allowedAttributeList.indexOf(attrName) !== -1) {
      if (uriAttrs.indexOf(attrName) !== -1) {
        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN));
      }

      return true;
    }

    var regExp = allowedAttributeList.filter(function (attrRegex) {
      return attrRegex instanceof RegExp;
    });

    for (var i = 0, len = regExp.length; i < len; i++) {
      if (attrName.match(regExp[i])) {
        return true;
      }
    }

    return false;
  }

  function sanitizeHtml(unsafeHtml, whiteList, sanitizeFn) {
    if (unsafeHtml.length === 0) {
      return unsafeHtml;
    }

    if (sanitizeFn && typeof sanitizeFn === 'function') {
      return sanitizeFn(unsafeHtml);
    }

    var domParser = new window.DOMParser();
    var createdDocument = domParser.parseFromString(unsafeHtml, 'text/html');
    var whitelistKeys = Object.keys(whiteList);
    var elements = [].slice.call(createdDocument.body.querySelectorAll('*'));

    var _loop = function _loop(i, len) {
      var el = elements[i];
      var elName = el.nodeName.toLowerCase();

      if (whitelistKeys.indexOf(el.nodeName.toLowerCase()) === -1) {
        el.parentNode.removeChild(el);
        return "continue";
      }

      var attributeList = [].slice.call(el.attributes);
      var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);
      attributeList.forEach(function (attr) {
        if (!allowedAttribute(attr, whitelistedAttributes)) {
          el.removeAttribute(attr.nodeName);
        }
      });
    };

    for (var i = 0, len = elements.length; i < len; i++) {
      var _ret = _loop(i);

      if (_ret === "continue") continue;
    }

    return createdDocument.body.innerHTML;
  }

  var NAME$6 = 'tooltip';
  var VERSION$6 = '4.5.3';
  var DATA_KEY$6 = 'bs.tooltip';
  var EVENT_KEY$6 = "." + DATA_KEY$6;
  var JQUERY_NO_CONFLICT$6 = $__default['default'].fn[NAME$6];
  var CLASS_PREFIX = 'bs-tooltip';
  var BSCLS_PREFIX_REGEX = new RegExp("(^|\\s)" + CLASS_PREFIX + "\\S+", 'g');
  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];
  var DefaultType$4 = {
    animation: 'boolean',
    template: 'string',
    title: '(string|element|function)',
    trigger: 'string',
    delay: '(number|object)',
    html: 'boolean',
    selector: '(string|boolean)',
    placement: '(string|function)',
    offset: '(number|string|function)',
    container: '(string|element|boolean)',
    fallbackPlacement: '(string|array)',
    boundary: '(string|element)',
    sanitize: 'boolean',
    sanitizeFn: '(null|function)',
    whiteList: 'object',
    popperConfig: '(null|object)'
  };
  var AttachmentMap = {
    AUTO: 'auto',
    TOP: 'top',
    RIGHT: 'right',
    BOTTOM: 'bottom',
    LEFT: 'left'
  };
  var Default$4 = {
    animation: true,
    template: '<div class="tooltip" role="tooltip">' + '<div class="arrow"></div>' + '<div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    selector: false,
    placement: 'top',
    offset: 0,
    container: false,
    fallbackPlacement: 'flip',
    boundary: 'scrollParent',
    sanitize: true,
    sanitizeFn: null,
    whiteList: DefaultWhitelist,
    popperConfig: null
  };
  var HOVER_STATE_SHOW = 'show';
  var HOVER_STATE_OUT = 'out';
  var Event = {
    HIDE: "hide" + EVENT_KEY$6,
    HIDDEN: "hidden" + EVENT_KEY$6,
    SHOW: "show" + EVENT_KEY$6,
    SHOWN: "shown" + EVENT_KEY$6,
    INSERTED: "inserted" + EVENT_KEY$6,
    CLICK: "click" + EVENT_KEY$6,
    FOCUSIN: "focusin" + EVENT_KEY$6,
    FOCUSOUT: "focusout" + EVENT_KEY$6,
    MOUSEENTER: "mouseenter" + EVENT_KEY$6,
    MOUSELEAVE: "mouseleave" + EVENT_KEY$6
  };
  var CLASS_NAME_FADE$2 = 'fade';
  var CLASS_NAME_SHOW$4 = 'show';
  var SELECTOR_TOOLTIP_INNER = '.tooltip-inner';
  var SELECTOR_ARROW = '.arrow';
  var TRIGGER_HOVER = 'hover';
  var TRIGGER_FOCUS = 'focus';
  var TRIGGER_CLICK = 'click';
  var TRIGGER_MANUAL = 'manual';

  var Tooltip = function () {
    function Tooltip(element, config) {
      if (typeof Popper__default['default'] === 'undefined') {
        throw new TypeError('Bootstrap\'s tooltips require Popper.js (https://popper.js.org/)');
      }

      this._isEnabled = true;
      this._timeout = 0;
      this._hoverState = '';
      this._activeTrigger = {};
      this._popper = null;
      this.element = element;
      this.config = this._getConfig(config);
      this.tip = null;

      this._setListeners();
    }

    var _proto = Tooltip.prototype;

    _proto.enable = function enable() {
      this._isEnabled = true;
    };

    _proto.disable = function disable() {
      this._isEnabled = false;
    };

    _proto.toggleEnabled = function toggleEnabled() {
      this._isEnabled = !this._isEnabled;
    };

    _proto.toggle = function toggle(event) {
      if (!this._isEnabled) {
        return;
      }

      if (event) {
        var dataKey = this.constructor.DATA_KEY;
        var context = $__default['default'](event.currentTarget).data(dataKey);

        if (!context) {
          context = new this.constructor(event.currentTarget, this._getDelegateConfig());
          $__default['default'](event.currentTarget).data(dataKey, context);
        }

        context._activeTrigger.click = !context._activeTrigger.click;

        if (context._isWithActiveTrigger()) {
          context._enter(null, context);
        } else {
          context._leave(null, context);
        }
      } else {
        if ($__default['default'](this.getTipElement()).hasClass(CLASS_NAME_SHOW$4)) {
          this._leave(null, this);

          return;
        }

        this._enter(null, this);
      }
    };

    _proto.dispose = function dispose() {
      clearTimeout(this._timeout);
      $__default['default'].removeData(this.element, this.constructor.DATA_KEY);
      $__default['default'](this.element).off(this.constructor.EVENT_KEY);
      $__default['default'](this.element).closest('.modal').off('hide.bs.modal', this._hideModalHandler);

      if (this.tip) {
        $__default['default'](this.tip).remove();
      }

      this._isEnabled = null;
      this._timeout = null;
      this._hoverState = null;
      this._activeTrigger = null;

      if (this._popper) {
        this._popper.destroy();
      }

      this._popper = null;
      this.element = null;
      this.config = null;
      this.tip = null;
    };

    _proto.show = function show() {
      var _this = this;

      if ($__default['default'](this.element).css('display') === 'none') {
        throw new Error('Please use show on visible elements');
      }

      var showEvent = $__default['default'].Event(this.constructor.Event.SHOW);

      if (this.isWithContent() && this._isEnabled) {
        $__default['default'](this.element).trigger(showEvent);
        var shadowRoot = Util.findShadowRoot(this.element);
        var isInTheDom = $__default['default'].contains(shadowRoot !== null ? shadowRoot : this.element.ownerDocument.documentElement, this.element);

        if (showEvent.isDefaultPrevented() || !isInTheDom) {
          return;
        }

        var tip = this.getTipElement();
        var tipId = Util.getUID(this.constructor.NAME);
        tip.setAttribute('id', tipId);
        this.element.setAttribute('aria-describedby', tipId);
        this.setContent();

        if (this.config.animation) {
          $__default['default'](tip).addClass(CLASS_NAME_FADE$2);
        }

        var placement = typeof this.config.placement === 'function' ? this.config.placement.call(this, tip, this.element) : this.config.placement;

        var attachment = this._getAttachment(placement);

        this.addAttachmentClass(attachment);

        var container = this._getContainer();

        $__default['default'](tip).data(this.constructor.DATA_KEY, this);

        if (!$__default['default'].contains(this.element.ownerDocument.documentElement, this.tip)) {
          $__default['default'](tip).appendTo(container);
        }

        $__default['default'](this.element).trigger(this.constructor.Event.INSERTED);
        this._popper = new Popper__default['default'](this.element, tip, this._getPopperConfig(attachment));
        $__default['default'](tip).addClass(CLASS_NAME_SHOW$4);

        if ('ontouchstart' in document.documentElement) {
          $__default['default'](document.body).children().on('mouseover', null, $__default['default'].noop);
        }

        var complete = function complete() {
          if (_this.config.animation) {
            _this._fixTransition();
          }

          var prevHoverState = _this._hoverState;
          _this._hoverState = null;
          $__default['default'](_this.element).trigger(_this.constructor.Event.SHOWN);

          if (prevHoverState === HOVER_STATE_OUT) {
            _this._leave(null, _this);
          }
        };

        if ($__default['default'](this.tip).hasClass(CLASS_NAME_FADE$2)) {
          var transitionDuration = Util.getTransitionDurationFromElement(this.tip);
          $__default['default'](this.tip).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
        } else {
          complete();
        }
      }
    };

    _proto.hide = function hide(callback) {
      var _this2 = this;

      var tip = this.getTipElement();
      var hideEvent = $__default['default'].Event(this.constructor.Event.HIDE);

      var complete = function complete() {
        if (_this2._hoverState !== HOVER_STATE_SHOW && tip.parentNode) {
          tip.parentNode.removeChild(tip);
        }

        _this2._cleanTipClass();

        _this2.element.removeAttribute('aria-describedby');

        $__default['default'](_this2.element).trigger(_this2.constructor.Event.HIDDEN);

        if (_this2._popper !== null) {
          _this2._popper.destroy();
        }

        if (callback) {
          callback();
        }
      };

      $__default['default'](this.element).trigger(hideEvent);

      if (hideEvent.isDefaultPrevented()) {
        return;
      }

      $__default['default'](tip).removeClass(CLASS_NAME_SHOW$4);

      if ('ontouchstart' in document.documentElement) {
        $__default['default'](document.body).children().off('mouseover', null, $__default['default'].noop);
      }

      this._activeTrigger[TRIGGER_CLICK] = false;
      this._activeTrigger[TRIGGER_FOCUS] = false;
      this._activeTrigger[TRIGGER_HOVER] = false;

      if ($__default['default'](this.tip).hasClass(CLASS_NAME_FADE$2)) {
        var transitionDuration = Util.getTransitionDurationFromElement(tip);
        $__default['default'](tip).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }

      this._hoverState = '';
    };

    _proto.update = function update() {
      if (this._popper !== null) {
        this._popper.scheduleUpdate();
      }
    };

    _proto.isWithContent = function isWithContent() {
      return Boolean(this.getTitle());
    };

    _proto.addAttachmentClass = function addAttachmentClass(attachment) {
      $__default['default'](this.getTipElement()).addClass(CLASS_PREFIX + "-" + attachment);
    };

    _proto.getTipElement = function getTipElement() {
      this.tip = this.tip || $__default['default'](this.config.template)[0];
      return this.tip;
    };

    _proto.setContent = function setContent() {
      var tip = this.getTipElement();
      this.setElementContent($__default['default'](tip.querySelectorAll(SELECTOR_TOOLTIP_INNER)), this.getTitle());
      $__default['default'](tip).removeClass(CLASS_NAME_FADE$2 + " " + CLASS_NAME_SHOW$4);
    };

    _proto.setElementContent = function setElementContent($element, content) {
      if (typeof content === 'object' && (content.nodeType || content.jquery)) {
        if (this.config.html) {
          if (!$__default['default'](content).parent().is($element)) {
            $element.empty().append(content);
          }
        } else {
          $element.text($__default['default'](content).text());
        }

        return;
      }

      if (this.config.html) {
        if (this.config.sanitize) {
          content = sanitizeHtml(content, this.config.whiteList, this.config.sanitizeFn);
        }

        $element.html(content);
      } else {
        $element.text(content);
      }
    };

    _proto.getTitle = function getTitle() {
      var title = this.element.getAttribute('data-original-title');

      if (!title) {
        title = typeof this.config.title === 'function' ? this.config.title.call(this.element) : this.config.title;
      }

      return title;
    };

    _proto._getPopperConfig = function _getPopperConfig(attachment) {
      var _this3 = this;

      var defaultBsConfig = {
        placement: attachment,
        modifiers: {
          offset: this._getOffset(),
          flip: {
            behavior: this.config.fallbackPlacement
          },
          arrow: {
            element: SELECTOR_ARROW
          },
          preventOverflow: {
            boundariesElement: this.config.boundary
          }
        },
        onCreate: function onCreate(data) {
          if (data.originalPlacement !== data.placement) {
            _this3._handlePopperPlacementChange(data);
          }
        },
        onUpdate: function onUpdate(data) {
          return _this3._handlePopperPlacementChange(data);
        }
      };
      return _extends({}, defaultBsConfig, this.config.popperConfig);
    };

    _proto._getOffset = function _getOffset() {
      var _this4 = this;

      var offset = {};

      if (typeof this.config.offset === 'function') {
        offset.fn = function (data) {
          data.offsets = _extends({}, data.offsets, _this4.config.offset(data.offsets, _this4.element) || {});
          return data;
        };
      } else {
        offset.offset = this.config.offset;
      }

      return offset;
    };

    _proto._getContainer = function _getContainer() {
      if (this.config.container === false) {
        return document.body;
      }

      if (Util.isElement(this.config.container)) {
        return $__default['default'](this.config.container);
      }

      return $__default['default'](document).find(this.config.container);
    };

    _proto._getAttachment = function _getAttachment(placement) {
      return AttachmentMap[placement.toUpperCase()];
    };

    _proto._setListeners = function _setListeners() {
      var _this5 = this;

      var triggers = this.config.trigger.split(' ');
      triggers.forEach(function (trigger) {
        if (trigger === 'click') {
          $__default['default'](_this5.element).on(_this5.constructor.Event.CLICK, _this5.config.selector, function (event) {
            return _this5.toggle(event);
          });
        } else if (trigger !== TRIGGER_MANUAL) {
          var eventIn = trigger === TRIGGER_HOVER ? _this5.constructor.Event.MOUSEENTER : _this5.constructor.Event.FOCUSIN;
          var eventOut = trigger === TRIGGER_HOVER ? _this5.constructor.Event.MOUSELEAVE : _this5.constructor.Event.FOCUSOUT;
          $__default['default'](_this5.element).on(eventIn, _this5.config.selector, function (event) {
            return _this5._enter(event);
          }).on(eventOut, _this5.config.selector, function (event) {
            return _this5._leave(event);
          });
        }
      });

      this._hideModalHandler = function () {
        if (_this5.element) {
          _this5.hide();
        }
      };

      $__default['default'](this.element).closest('.modal').on('hide.bs.modal', this._hideModalHandler);

      if (this.config.selector) {
        this.config = _extends({}, this.config, {
          trigger: 'manual',
          selector: ''
        });
      } else {
        this._fixTitle();
      }
    };

    _proto._fixTitle = function _fixTitle() {
      var titleType = typeof this.element.getAttribute('data-original-title');

      if (this.element.getAttribute('title') || titleType !== 'string') {
        this.element.setAttribute('data-original-title', this.element.getAttribute('title') || '');
        this.element.setAttribute('title', '');
      }
    };

    _proto._enter = function _enter(event, context) {
      var dataKey = this.constructor.DATA_KEY;
      context = context || $__default['default'](event.currentTarget).data(dataKey);

      if (!context) {
        context = new this.constructor(event.currentTarget, this._getDelegateConfig());
        $__default['default'](event.currentTarget).data(dataKey, context);
      }

      if (event) {
        context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true;
      }

      if ($__default['default'](context.getTipElement()).hasClass(CLASS_NAME_SHOW$4) || context._hoverState === HOVER_STATE_SHOW) {
        context._hoverState = HOVER_STATE_SHOW;
        return;
      }

      clearTimeout(context._timeout);
      context._hoverState = HOVER_STATE_SHOW;

      if (!context.config.delay || !context.config.delay.show) {
        context.show();
        return;
      }

      context._timeout = setTimeout(function () {
        if (context._hoverState === HOVER_STATE_SHOW) {
          context.show();
        }
      }, context.config.delay.show);
    };

    _proto._leave = function _leave(event, context) {
      var dataKey = this.constructor.DATA_KEY;
      context = context || $__default['default'](event.currentTarget).data(dataKey);

      if (!context) {
        context = new this.constructor(event.currentTarget, this._getDelegateConfig());
        $__default['default'](event.currentTarget).data(dataKey, context);
      }

      if (event) {
        context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] = false;
      }

      if (context._isWithActiveTrigger()) {
        return;
      }

      clearTimeout(context._timeout);
      context._hoverState = HOVER_STATE_OUT;

      if (!context.config.delay || !context.config.delay.hide) {
        context.hide();
        return;
      }

      context._timeout = setTimeout(function () {
        if (context._hoverState === HOVER_STATE_OUT) {
          context.hide();
        }
      }, context.config.delay.hide);
    };

    _proto._isWithActiveTrigger = function _isWithActiveTrigger() {
      for (var trigger in this._activeTrigger) {
        if (this._activeTrigger[trigger]) {
          return true;
        }
      }

      return false;
    };

    _proto._getConfig = function _getConfig(config) {
      var dataAttributes = $__default['default'](this.element).data();
      Object.keys(dataAttributes).forEach(function (dataAttr) {
        if (DISALLOWED_ATTRIBUTES.indexOf(dataAttr) !== -1) {
          delete dataAttributes[dataAttr];
        }
      });
      config = _extends({}, this.constructor.Default, dataAttributes, typeof config === 'object' && config ? config : {});

      if (typeof config.delay === 'number') {
        config.delay = {
          show: config.delay,
          hide: config.delay
        };
      }

      if (typeof config.title === 'number') {
        config.title = config.title.toString();
      }

      if (typeof config.content === 'number') {
        config.content = config.content.toString();
      }

      Util.typeCheckConfig(NAME$6, config, this.constructor.DefaultType);

      if (config.sanitize) {
        config.template = sanitizeHtml(config.template, config.whiteList, config.sanitizeFn);
      }

      return config;
    };

    _proto._getDelegateConfig = function _getDelegateConfig() {
      var config = {};

      if (this.config) {
        for (var key in this.config) {
          if (this.constructor.Default[key] !== this.config[key]) {
            config[key] = this.config[key];
          }
        }
      }

      return config;
    };

    _proto._cleanTipClass = function _cleanTipClass() {
      var $tip = $__default['default'](this.getTipElement());
      var tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX);

      if (tabClass !== null && tabClass.length) {
        $tip.removeClass(tabClass.join(''));
      }
    };

    _proto._handlePopperPlacementChange = function _handlePopperPlacementChange(popperData) {
      this.tip = popperData.instance.popper;

      this._cleanTipClass();

      this.addAttachmentClass(this._getAttachment(popperData.placement));
    };

    _proto._fixTransition = function _fixTransition() {
      var tip = this.getTipElement();
      var initConfigAnimation = this.config.animation;

      if (tip.getAttribute('x-placement') !== null) {
        return;
      }

      $__default['default'](tip).removeClass(CLASS_NAME_FADE$2);
      this.config.animation = false;
      this.hide();
      this.show();
      this.config.animation = initConfigAnimation;
    };

    Tooltip._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $element = $__default['default'](this);
        var data = $element.data(DATA_KEY$6);

        var _config = typeof config === 'object' && config;

        if (!data && /dispose|hide/.test(config)) {
          return;
        }

        if (!data) {
          data = new Tooltip(this, _config);
          $element.data(DATA_KEY$6, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Tooltip, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$6;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$4;
      }
    }, {
      key: "NAME",
      get: function get() {
        return NAME$6;
      }
    }, {
      key: "DATA_KEY",
      get: function get() {
        return DATA_KEY$6;
      }
    }, {
      key: "Event",
      get: function get() {
        return Event;
      }
    }, {
      key: "EVENT_KEY",
      get: function get() {
        return EVENT_KEY$6;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$4;
      }
    }]);

    return Tooltip;
  }();

  $__default['default'].fn[NAME$6] = Tooltip._jQueryInterface;
  $__default['default'].fn[NAME$6].Constructor = Tooltip;

  $__default['default'].fn[NAME$6].noConflict = function () {
    $__default['default'].fn[NAME$6] = JQUERY_NO_CONFLICT$6;
    return Tooltip._jQueryInterface;
  };

  var NAME$7 = 'popover';
  var VERSION$7 = '4.5.3';
  var DATA_KEY$7 = 'bs.popover';
  var EVENT_KEY$7 = "." + DATA_KEY$7;
  var JQUERY_NO_CONFLICT$7 = $__default['default'].fn[NAME$7];
  var CLASS_PREFIX$1 = 'bs-popover';
  var BSCLS_PREFIX_REGEX$1 = new RegExp("(^|\\s)" + CLASS_PREFIX$1 + "\\S+", 'g');

  var Default$5 = _extends({}, Tooltip.Default, {
    placement: 'right',
    trigger: 'click',
    content: '',
    template: '<div class="popover" role="tooltip">' + '<div class="arrow"></div>' + '<h3 class="popover-header"></h3>' + '<div class="popover-body"></div></div>'
  });

  var DefaultType$5 = _extends({}, Tooltip.DefaultType, {
    content: '(string|element|function)'
  });

  var CLASS_NAME_FADE$3 = 'fade';
  var CLASS_NAME_SHOW$5 = 'show';
  var SELECTOR_TITLE = '.popover-header';
  var SELECTOR_CONTENT = '.popover-body';
  var Event$1 = {
    HIDE: "hide" + EVENT_KEY$7,
    HIDDEN: "hidden" + EVENT_KEY$7,
    SHOW: "show" + EVENT_KEY$7,
    SHOWN: "shown" + EVENT_KEY$7,
    INSERTED: "inserted" + EVENT_KEY$7,
    CLICK: "click" + EVENT_KEY$7,
    FOCUSIN: "focusin" + EVENT_KEY$7,
    FOCUSOUT: "focusout" + EVENT_KEY$7,
    MOUSEENTER: "mouseenter" + EVENT_KEY$7,
    MOUSELEAVE: "mouseleave" + EVENT_KEY$7
  };

  var Popover = function (_Tooltip) {
    _inheritsLoose(Popover, _Tooltip);

    function Popover() {
      return _Tooltip.apply(this, arguments) || this;
    }

    var _proto = Popover.prototype;

    _proto.isWithContent = function isWithContent() {
      return this.getTitle() || this._getContent();
    };

    _proto.addAttachmentClass = function addAttachmentClass(attachment) {
      $__default['default'](this.getTipElement()).addClass(CLASS_PREFIX$1 + "-" + attachment);
    };

    _proto.getTipElement = function getTipElement() {
      this.tip = this.tip || $__default['default'](this.config.template)[0];
      return this.tip;
    };

    _proto.setContent = function setContent() {
      var $tip = $__default['default'](this.getTipElement());
      this.setElementContent($tip.find(SELECTOR_TITLE), this.getTitle());

      var content = this._getContent();

      if (typeof content === 'function') {
        content = content.call(this.element);
      }

      this.setElementContent($tip.find(SELECTOR_CONTENT), content);
      $tip.removeClass(CLASS_NAME_FADE$3 + " " + CLASS_NAME_SHOW$5);
    };

    _proto._getContent = function _getContent() {
      return this.element.getAttribute('data-content') || this.config.content;
    };

    _proto._cleanTipClass = function _cleanTipClass() {
      var $tip = $__default['default'](this.getTipElement());
      var tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX$1);

      if (tabClass !== null && tabClass.length > 0) {
        $tip.removeClass(tabClass.join(''));
      }
    };

    Popover._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $__default['default'](this).data(DATA_KEY$7);

        var _config = typeof config === 'object' ? config : null;

        if (!data && /dispose|hide/.test(config)) {
          return;
        }

        if (!data) {
          data = new Popover(this, _config);
          $__default['default'](this).data(DATA_KEY$7, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Popover, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$7;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$5;
      }
    }, {
      key: "NAME",
      get: function get() {
        return NAME$7;
      }
    }, {
      key: "DATA_KEY",
      get: function get() {
        return DATA_KEY$7;
      }
    }, {
      key: "Event",
      get: function get() {
        return Event$1;
      }
    }, {
      key: "EVENT_KEY",
      get: function get() {
        return EVENT_KEY$7;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$5;
      }
    }]);

    return Popover;
  }(Tooltip);

  $__default['default'].fn[NAME$7] = Popover._jQueryInterface;
  $__default['default'].fn[NAME$7].Constructor = Popover;

  $__default['default'].fn[NAME$7].noConflict = function () {
    $__default['default'].fn[NAME$7] = JQUERY_NO_CONFLICT$7;
    return Popover._jQueryInterface;
  };

  var NAME$8 = 'scrollspy';
  var VERSION$8 = '4.5.3';
  var DATA_KEY$8 = 'bs.scrollspy';
  var EVENT_KEY$8 = "." + DATA_KEY$8;
  var DATA_API_KEY$6 = '.data-api';
  var JQUERY_NO_CONFLICT$8 = $__default['default'].fn[NAME$8];
  var Default$6 = {
    offset: 10,
    method: 'auto',
    target: ''
  };
  var DefaultType$6 = {
    offset: 'number',
    method: 'string',
    target: '(string|element)'
  };
  var EVENT_ACTIVATE = "activate" + EVENT_KEY$8;
  var EVENT_SCROLL = "scroll" + EVENT_KEY$8;
  var EVENT_LOAD_DATA_API$2 = "load" + EVENT_KEY$8 + DATA_API_KEY$6;
  var CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item';
  var CLASS_NAME_ACTIVE$2 = 'active';
  var SELECTOR_DATA_SPY = '[data-spy="scroll"]';
  var SELECTOR_NAV_LIST_GROUP = '.nav, .list-group';
  var SELECTOR_NAV_LINKS = '.nav-link';
  var SELECTOR_NAV_ITEMS = '.nav-item';
  var SELECTOR_LIST_ITEMS = '.list-group-item';
  var SELECTOR_DROPDOWN = '.dropdown';
  var SELECTOR_DROPDOWN_ITEMS = '.dropdown-item';
  var SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle';
  var METHOD_OFFSET = 'offset';
  var METHOD_POSITION = 'position';

  var ScrollSpy = function () {
    function ScrollSpy(element, config) {
      var _this = this;

      this._element = element;
      this._scrollElement = element.tagName === 'BODY' ? window : element;
      this._config = this._getConfig(config);
      this._selector = this._config.target + " " + SELECTOR_NAV_LINKS + "," + (this._config.target + " " + SELECTOR_LIST_ITEMS + ",") + (this._config.target + " " + SELECTOR_DROPDOWN_ITEMS);
      this._offsets = [];
      this._targets = [];
      this._activeTarget = null;
      this._scrollHeight = 0;
      $__default['default'](this._scrollElement).on(EVENT_SCROLL, function (event) {
        return _this._process(event);
      });
      this.refresh();

      this._process();
    }

    var _proto = ScrollSpy.prototype;

    _proto.refresh = function refresh() {
      var _this2 = this;

      var autoMethod = this._scrollElement === this._scrollElement.window ? METHOD_OFFSET : METHOD_POSITION;
      var offsetMethod = this._config.method === 'auto' ? autoMethod : this._config.method;
      var offsetBase = offsetMethod === METHOD_POSITION ? this._getScrollTop() : 0;
      this._offsets = [];
      this._targets = [];
      this._scrollHeight = this._getScrollHeight();
      var targets = [].slice.call(document.querySelectorAll(this._selector));
      targets.map(function (element) {
        var target;
        var targetSelector = Util.getSelectorFromElement(element);

        if (targetSelector) {
          target = document.querySelector(targetSelector);
        }

        if (target) {
          var targetBCR = target.getBoundingClientRect();

          if (targetBCR.width || targetBCR.height) {
            return [$__default['default'](target)[offsetMethod]().top + offsetBase, targetSelector];
          }
        }

        return null;
      }).filter(function (item) {
        return item;
      }).sort(function (a, b) {
        return a[0] - b[0];
      }).forEach(function (item) {
        _this2._offsets.push(item[0]);

        _this2._targets.push(item[1]);
      });
    };

    _proto.dispose = function dispose() {
      $__default['default'].removeData(this._element, DATA_KEY$8);
      $__default['default'](this._scrollElement).off(EVENT_KEY$8);
      this._element = null;
      this._scrollElement = null;
      this._config = null;
      this._selector = null;
      this._offsets = null;
      this._targets = null;
      this._activeTarget = null;
      this._scrollHeight = null;
    };

    _proto._getConfig = function _getConfig(config) {
      config = _extends({}, Default$6, typeof config === 'object' && config ? config : {});

      if (typeof config.target !== 'string' && Util.isElement(config.target)) {
        var id = $__default['default'](config.target).attr('id');

        if (!id) {
          id = Util.getUID(NAME$8);
          $__default['default'](config.target).attr('id', id);
        }

        config.target = "#" + id;
      }

      Util.typeCheckConfig(NAME$8, config, DefaultType$6);
      return config;
    };

    _proto._getScrollTop = function _getScrollTop() {
      return this._scrollElement === window ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop;
    };

    _proto._getScrollHeight = function _getScrollHeight() {
      return this._scrollElement.scrollHeight || Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
    };

    _proto._getOffsetHeight = function _getOffsetHeight() {
      return this._scrollElement === window ? window.innerHeight : this._scrollElement.getBoundingClientRect().height;
    };

    _proto._process = function _process() {
      var scrollTop = this._getScrollTop() + this._config.offset;

      var scrollHeight = this._getScrollHeight();

      var maxScroll = this._config.offset + scrollHeight - this._getOffsetHeight();

      if (this._scrollHeight !== scrollHeight) {
        this.refresh();
      }

      if (scrollTop >= maxScroll) {
        var target = this._targets[this._targets.length - 1];

        if (this._activeTarget !== target) {
          this._activate(target);
        }

        return;
      }

      if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {
        this._activeTarget = null;

        this._clear();

        return;
      }

      for (var i = this._offsets.length; i--;) {
        var isActiveTarget = this._activeTarget !== this._targets[i] && scrollTop >= this._offsets[i] && (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1]);

        if (isActiveTarget) {
          this._activate(this._targets[i]);
        }
      }
    };

    _proto._activate = function _activate(target) {
      this._activeTarget = target;

      this._clear();

      var queries = this._selector.split(',').map(function (selector) {
        return selector + "[data-target=\"" + target + "\"]," + selector + "[href=\"" + target + "\"]";
      });

      var $link = $__default['default']([].slice.call(document.querySelectorAll(queries.join(','))));

      if ($link.hasClass(CLASS_NAME_DROPDOWN_ITEM)) {
        $link.closest(SELECTOR_DROPDOWN).find(SELECTOR_DROPDOWN_TOGGLE).addClass(CLASS_NAME_ACTIVE$2);
        $link.addClass(CLASS_NAME_ACTIVE$2);
      } else {
        $link.addClass(CLASS_NAME_ACTIVE$2);
        $link.parents(SELECTOR_NAV_LIST_GROUP).prev(SELECTOR_NAV_LINKS + ", " + SELECTOR_LIST_ITEMS).addClass(CLASS_NAME_ACTIVE$2);
        $link.parents(SELECTOR_NAV_LIST_GROUP).prev(SELECTOR_NAV_ITEMS).children(SELECTOR_NAV_LINKS).addClass(CLASS_NAME_ACTIVE$2);
      }

      $__default['default'](this._scrollElement).trigger(EVENT_ACTIVATE, {
        relatedTarget: target
      });
    };

    _proto._clear = function _clear() {
      [].slice.call(document.querySelectorAll(this._selector)).filter(function (node) {
        return node.classList.contains(CLASS_NAME_ACTIVE$2);
      }).forEach(function (node) {
        return node.classList.remove(CLASS_NAME_ACTIVE$2);
      });
    };

    ScrollSpy._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $__default['default'](this).data(DATA_KEY$8);

        var _config = typeof config === 'object' && config;

        if (!data) {
          data = new ScrollSpy(this, _config);
          $__default['default'](this).data(DATA_KEY$8, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(ScrollSpy, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$8;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$6;
      }
    }]);

    return ScrollSpy;
  }();

  $__default['default'](window).on(EVENT_LOAD_DATA_API$2, function () {
    var scrollSpys = [].slice.call(document.querySelectorAll(SELECTOR_DATA_SPY));
    var scrollSpysLength = scrollSpys.length;

    for (var i = scrollSpysLength; i--;) {
      var $spy = $__default['default'](scrollSpys[i]);

      ScrollSpy._jQueryInterface.call($spy, $spy.data());
    }
  });
  $__default['default'].fn[NAME$8] = ScrollSpy._jQueryInterface;
  $__default['default'].fn[NAME$8].Constructor = ScrollSpy;

  $__default['default'].fn[NAME$8].noConflict = function () {
    $__default['default'].fn[NAME$8] = JQUERY_NO_CONFLICT$8;
    return ScrollSpy._jQueryInterface;
  };

  var NAME$9 = 'tab';
  var VERSION$9 = '4.5.3';
  var DATA_KEY$9 = 'bs.tab';
  var EVENT_KEY$9 = "." + DATA_KEY$9;
  var DATA_API_KEY$7 = '.data-api';
  var JQUERY_NO_CONFLICT$9 = $__default['default'].fn[NAME$9];
  var EVENT_HIDE$3 = "hide" + EVENT_KEY$9;
  var EVENT_HIDDEN$3 = "hidden" + EVENT_KEY$9;
  var EVENT_SHOW$3 = "show" + EVENT_KEY$9;
  var EVENT_SHOWN$3 = "shown" + EVENT_KEY$9;
  var EVENT_CLICK_DATA_API$6 = "click" + EVENT_KEY$9 + DATA_API_KEY$7;
  var CLASS_NAME_DROPDOWN_MENU = 'dropdown-menu';
  var CLASS_NAME_ACTIVE$3 = 'active';
  var CLASS_NAME_DISABLED$1 = 'disabled';
  var CLASS_NAME_FADE$4 = 'fade';
  var CLASS_NAME_SHOW$6 = 'show';
  var SELECTOR_DROPDOWN$1 = '.dropdown';
  var SELECTOR_NAV_LIST_GROUP$1 = '.nav, .list-group';
  var SELECTOR_ACTIVE$2 = '.active';
  var SELECTOR_ACTIVE_UL = '> li > .active';
  var SELECTOR_DATA_TOGGLE$4 = '[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]';
  var SELECTOR_DROPDOWN_TOGGLE$1 = '.dropdown-toggle';
  var SELECTOR_DROPDOWN_ACTIVE_CHILD = '> .dropdown-menu .active';

  var Tab = function () {
    function Tab(element) {
      this._element = element;
    }

    var _proto = Tab.prototype;

    _proto.show = function show() {
      var _this = this;

      if (this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && $__default['default'](this._element).hasClass(CLASS_NAME_ACTIVE$3) || $__default['default'](this._element).hasClass(CLASS_NAME_DISABLED$1)) {
        return;
      }

      var target;
      var previous;
      var listElement = $__default['default'](this._element).closest(SELECTOR_NAV_LIST_GROUP$1)[0];
      var selector = Util.getSelectorFromElement(this._element);

      if (listElement) {
        var itemSelector = listElement.nodeName === 'UL' || listElement.nodeName === 'OL' ? SELECTOR_ACTIVE_UL : SELECTOR_ACTIVE$2;
        previous = $__default['default'].makeArray($__default['default'](listElement).find(itemSelector));
        previous = previous[previous.length - 1];
      }

      var hideEvent = $__default['default'].Event(EVENT_HIDE$3, {
        relatedTarget: this._element
      });
      var showEvent = $__default['default'].Event(EVENT_SHOW$3, {
        relatedTarget: previous
      });

      if (previous) {
        $__default['default'](previous).trigger(hideEvent);
      }

      $__default['default'](this._element).trigger(showEvent);

      if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) {
        return;
      }

      if (selector) {
        target = document.querySelector(selector);
      }

      this._activate(this._element, listElement);

      var complete = function complete() {
        var hiddenEvent = $__default['default'].Event(EVENT_HIDDEN$3, {
          relatedTarget: _this._element
        });
        var shownEvent = $__default['default'].Event(EVENT_SHOWN$3, {
          relatedTarget: previous
        });
        $__default['default'](previous).trigger(hiddenEvent);
        $__default['default'](_this._element).trigger(shownEvent);
      };

      if (target) {
        this._activate(target, target.parentNode, complete);
      } else {
        complete();
      }
    };

    _proto.dispose = function dispose() {
      $__default['default'].removeData(this._element, DATA_KEY$9);
      this._element = null;
    };

    _proto._activate = function _activate(element, container, callback) {
      var _this2 = this;

      var activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL') ? $__default['default'](container).find(SELECTOR_ACTIVE_UL) : $__default['default'](container).children(SELECTOR_ACTIVE$2);
      var active = activeElements[0];
      var isTransitioning = callback && active && $__default['default'](active).hasClass(CLASS_NAME_FADE$4);

      var complete = function complete() {
        return _this2._transitionComplete(element, active, callback);
      };

      if (active && isTransitioning) {
        var transitionDuration = Util.getTransitionDurationFromElement(active);
        $__default['default'](active).removeClass(CLASS_NAME_SHOW$6).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }
    };

    _proto._transitionComplete = function _transitionComplete(element, active, callback) {
      if (active) {
        $__default['default'](active).removeClass(CLASS_NAME_ACTIVE$3);
        var dropdownChild = $__default['default'](active.parentNode).find(SELECTOR_DROPDOWN_ACTIVE_CHILD)[0];

        if (dropdownChild) {
          $__default['default'](dropdownChild).removeClass(CLASS_NAME_ACTIVE$3);
        }

        if (active.getAttribute('role') === 'tab') {
          active.setAttribute('aria-selected', false);
        }
      }

      $__default['default'](element).addClass(CLASS_NAME_ACTIVE$3);

      if (element.getAttribute('role') === 'tab') {
        element.setAttribute('aria-selected', true);
      }

      Util.reflow(element);

      if (element.classList.contains(CLASS_NAME_FADE$4)) {
        element.classList.add(CLASS_NAME_SHOW$6);
      }

      if (element.parentNode && $__default['default'](element.parentNode).hasClass(CLASS_NAME_DROPDOWN_MENU)) {
        var dropdownElement = $__default['default'](element).closest(SELECTOR_DROPDOWN$1)[0];

        if (dropdownElement) {
          var dropdownToggleList = [].slice.call(dropdownElement.querySelectorAll(SELECTOR_DROPDOWN_TOGGLE$1));
          $__default['default'](dropdownToggleList).addClass(CLASS_NAME_ACTIVE$3);
        }

        element.setAttribute('aria-expanded', true);
      }

      if (callback) {
        callback();
      }
    };

    Tab._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $this = $__default['default'](this);
        var data = $this.data(DATA_KEY$9);

        if (!data) {
          data = new Tab(this);
          $this.data(DATA_KEY$9, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Tab, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$9;
      }
    }]);

    return Tab;
  }();

  $__default['default'](document).on(EVENT_CLICK_DATA_API$6, SELECTOR_DATA_TOGGLE$4, function (event) {
    event.preventDefault();

    Tab._jQueryInterface.call($__default['default'](this), 'show');
  });
  $__default['default'].fn[NAME$9] = Tab._jQueryInterface;
  $__default['default'].fn[NAME$9].Constructor = Tab;

  $__default['default'].fn[NAME$9].noConflict = function () {
    $__default['default'].fn[NAME$9] = JQUERY_NO_CONFLICT$9;
    return Tab._jQueryInterface;
  };

  var NAME$a = 'toast';
  var VERSION$a = '4.5.3';
  var DATA_KEY$a = 'bs.toast';
  var EVENT_KEY$a = "." + DATA_KEY$a;
  var JQUERY_NO_CONFLICT$a = $__default['default'].fn[NAME$a];
  var EVENT_CLICK_DISMISS$1 = "click.dismiss" + EVENT_KEY$a;
  var EVENT_HIDE$4 = "hide" + EVENT_KEY$a;
  var EVENT_HIDDEN$4 = "hidden" + EVENT_KEY$a;
  var EVENT_SHOW$4 = "show" + EVENT_KEY$a;
  var EVENT_SHOWN$4 = "shown" + EVENT_KEY$a;
  var CLASS_NAME_FADE$5 = 'fade';
  var CLASS_NAME_HIDE = 'hide';
  var CLASS_NAME_SHOW$7 = 'show';
  var CLASS_NAME_SHOWING = 'showing';
  var DefaultType$7 = {
    animation: 'boolean',
    autohide: 'boolean',
    delay: 'number'
  };
  var Default$7 = {
    animation: true,
    autohide: true,
    delay: 500
  };
  var SELECTOR_DATA_DISMISS$1 = '[data-dismiss="toast"]';

  var Toast = function () {
    function Toast(element, config) {
      this._element = element;
      this._config = this._getConfig(config);
      this._timeout = null;

      this._setListeners();
    }

    var _proto = Toast.prototype;

    _proto.show = function show() {
      var _this = this;

      var showEvent = $__default['default'].Event(EVENT_SHOW$4);
      $__default['default'](this._element).trigger(showEvent);

      if (showEvent.isDefaultPrevented()) {
        return;
      }

      this._clearTimeout();

      if (this._config.animation) {
        this._element.classList.add(CLASS_NAME_FADE$5);
      }

      var complete = function complete() {
        _this._element.classList.remove(CLASS_NAME_SHOWING);

        _this._element.classList.add(CLASS_NAME_SHOW$7);

        $__default['default'](_this._element).trigger(EVENT_SHOWN$4);

        if (_this._config.autohide) {
          _this._timeout = setTimeout(function () {
            _this.hide();
          }, _this._config.delay);
        }
      };

      this._element.classList.remove(CLASS_NAME_HIDE);

      Util.reflow(this._element);

      this._element.classList.add(CLASS_NAME_SHOWING);

      if (this._config.animation) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._element);
        $__default['default'](this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }
    };

    _proto.hide = function hide() {
      if (!this._element.classList.contains(CLASS_NAME_SHOW$7)) {
        return;
      }

      var hideEvent = $__default['default'].Event(EVENT_HIDE$4);
      $__default['default'](this._element).trigger(hideEvent);

      if (hideEvent.isDefaultPrevented()) {
        return;
      }

      this._close();
    };

    _proto.dispose = function dispose() {
      this._clearTimeout();

      if (this._element.classList.contains(CLASS_NAME_SHOW$7)) {
        this._element.classList.remove(CLASS_NAME_SHOW$7);
      }

      $__default['default'](this._element).off(EVENT_CLICK_DISMISS$1);
      $__default['default'].removeData(this._element, DATA_KEY$a);
      this._element = null;
      this._config = null;
    };

    _proto._getConfig = function _getConfig(config) {
      config = _extends({}, Default$7, $__default['default'](this._element).data(), typeof config === 'object' && config ? config : {});
      Util.typeCheckConfig(NAME$a, config, this.constructor.DefaultType);
      return config;
    };

    _proto._setListeners = function _setListeners() {
      var _this2 = this;

      $__default['default'](this._element).on(EVENT_CLICK_DISMISS$1, SELECTOR_DATA_DISMISS$1, function () {
        return _this2.hide();
      });
    };

    _proto._close = function _close() {
      var _this3 = this;

      var complete = function complete() {
        _this3._element.classList.add(CLASS_NAME_HIDE);

        $__default['default'](_this3._element).trigger(EVENT_HIDDEN$4);
      };

      this._element.classList.remove(CLASS_NAME_SHOW$7);

      if (this._config.animation) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._element);
        $__default['default'](this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }
    };

    _proto._clearTimeout = function _clearTimeout() {
      clearTimeout(this._timeout);
      this._timeout = null;
    };

    Toast._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $element = $__default['default'](this);
        var data = $element.data(DATA_KEY$a);

        var _config = typeof config === 'object' && config;

        if (!data) {
          data = new Toast(this, _config);
          $element.data(DATA_KEY$a, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config](this);
        }
      });
    };

    _createClass(Toast, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$a;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$7;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$7;
      }
    }]);

    return Toast;
  }();

  $__default['default'].fn[NAME$a] = Toast._jQueryInterface;
  $__default['default'].fn[NAME$a].Constructor = Toast;

  $__default['default'].fn[NAME$a].noConflict = function () {
    $__default['default'].fn[NAME$a] = JQUERY_NO_CONFLICT$a;
    return Toast._jQueryInterface;
  };

  exports.Alert = Alert;
  exports.Button = Button;
  exports.Carousel = Carousel;
  exports.Collapse = Collapse;
  exports.Dropdown = Dropdown;
  exports.Modal = Modal;
  exports.Popover = Popover;
  exports.Scrollspy = ScrollSpy;
  exports.Tab = Tab;
  exports.Toast = Toast;
  exports.Tooltip = Tooltip;
  exports.Util = Util;
  Object.defineProperty(exports, '__esModule', {
    value: true
  });
});

/***/ }),

/***/ "./node_modules/bootstrap/js/src/alert.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/alert.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1037);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/collapse.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/collapse.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1038);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/dropdown.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/dropdown.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1039);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/modal.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/modal.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1040);

/***/ }),

/***/ "./node_modules/bootstrap/js/src/tooltip.js":
/*!**************************************************************************************!*\
  !*** delegated ./node_modules/bootstrap/js/src/tooltip.js from dll-reference vendor ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(384);

/***/ }),

/***/ "./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js":
/*!************************************************************************!*\
  !*** ./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!../../babel-loader/lib??ref--8!../../babel-loader/lib??ref--9!./typeahead.bundle.js */ "./node_modules/babel-loader/lib/index.js?!./node_modules/babel-loader/lib/index.js?!./node_modules/corejs-typeahead/dist/typeahead.bundle.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../../expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["Bloodhound"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["Bloodhound"] = ___EXPOSE_LOADER_IMPORT___;
else throw new Error('[exposes-loader] The "Bloodhound" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./node_modules/d3/index.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/d3/index.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: version, bisect, bisectRight, bisectLeft, ascending, bisector, cross, descending, deviation, extent, histogram, thresholdFreedmanDiaconis, thresholdScott, thresholdSturges, max, mean, median, merge, min, pairs, permute, quantile, range, scan, shuffle, sum, ticks, tickIncrement, tickStep, transpose, variance, zip, axisTop, axisRight, axisBottom, axisLeft, brush, brushX, brushY, brushSelection, chord, ribbon, nest, set, map, keys, values, entries, color, rgb, hsl, lab, hcl, lch, gray, cubehelix, contours, contourDensity, dispatch, drag, dragDisable, dragEnable, dsvFormat, csvParse, csvParseRows, csvFormat, csvFormatBody, csvFormatRows, csvFormatRow, csvFormatValue, tsvParse, tsvParseRows, tsvFormat, tsvFormatBody, tsvFormatRows, tsvFormatRow, tsvFormatValue, autoType, easeLinear, easeQuad, easeQuadIn, easeQuadOut, easeQuadInOut, easeCubic, easeCubicIn, easeCubicOut, easeCubicInOut, easePoly, easePolyIn, easePolyOut, easePolyInOut, easeSin, easeSinIn, easeSinOut, easeSinInOut, easeExp, easeExpIn, easeExpOut, easeExpInOut, easeCircle, easeCircleIn, easeCircleOut, easeCircleInOut, easeBounce, easeBounceIn, easeBounceOut, easeBounceInOut, easeBack, easeBackIn, easeBackOut, easeBackInOut, easeElastic, easeElasticIn, easeElasticOut, easeElasticInOut, blob, buffer, dsv, csv, tsv, image, json, text, xml, html, svg, forceCenter, forceCollide, forceLink, forceManyBody, forceRadial, forceSimulation, forceX, forceY, formatDefaultLocale, format, formatPrefix, formatLocale, formatSpecifier, FormatSpecifier, precisionFixed, precisionPrefix, precisionRound, geoArea, geoBounds, geoCentroid, geoCircle, geoClipAntimeridian, geoClipCircle, geoClipExtent, geoClipRectangle, geoContains, geoDistance, geoGraticule, geoGraticule10, geoInterpolate, geoLength, geoPath, geoAlbers, geoAlbersUsa, geoAzimuthalEqualArea, geoAzimuthalEqualAreaRaw, geoAzimuthalEquidistant, geoAzimuthalEquidistantRaw, geoConicConformal, geoConicConformalRaw, geoConicEqualArea, geoConicEqualAreaRaw, geoConicEquidistant, geoConicEquidistantRaw, geoEqualEarth, geoEqualEarthRaw, geoEquirectangular, geoEquirectangularRaw, geoGnomonic, geoGnomonicRaw, geoIdentity, geoProjection, geoProjectionMutator, geoMercator, geoMercatorRaw, geoNaturalEarth1, geoNaturalEarth1Raw, geoOrthographic, geoOrthographicRaw, geoStereographic, geoStereographicRaw, geoTransverseMercator, geoTransverseMercatorRaw, geoRotation, geoStream, geoTransform, cluster, hierarchy, pack, packSiblings, packEnclose, partition, stratify, tree, treemap, treemapBinary, treemapDice, treemapSlice, treemapSliceDice, treemapSquarify, treemapResquarify, interpolate, interpolateArray, interpolateBasis, interpolateBasisClosed, interpolateDate, interpolateDiscrete, interpolateHue, interpolateNumber, interpolateNumberArray, interpolateObject, interpolateRound, interpolateString, interpolateTransformCss, interpolateTransformSvg, interpolateZoom, interpolateRgb, interpolateRgbBasis, interpolateRgbBasisClosed, interpolateHsl, interpolateHslLong, interpolateLab, interpolateHcl, interpolateHclLong, interpolateCubehelix, interpolateCubehelixLong, piecewise, quantize, path, polygonArea, polygonCentroid, polygonHull, polygonContains, polygonLength, quadtree, randomUniform, randomNormal, randomLogNormal, randomBates, randomIrwinHall, randomExponential, scaleBand, scalePoint, scaleIdentity, scaleLinear, scaleLog, scaleSymlog, scaleOrdinal, scaleImplicit, scalePow, scaleSqrt, scaleQuantile, scaleQuantize, scaleThreshold, scaleTime, scaleUtc, scaleSequential, scaleSequentialLog, scaleSequentialPow, scaleSequentialSqrt, scaleSequentialSymlog, scaleSequentialQuantile, scaleDiverging, scaleDivergingLog, scaleDivergingPow, scaleDivergingSqrt, scaleDivergingSymlog, tickFormat, schemeCategory10, schemeAccent, schemeDark2, schemePaired, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3, schemeTableau10, interpolateBrBG, schemeBrBG, interpolatePRGn, schemePRGn, interpolatePiYG, schemePiYG, interpolatePuOr, schemePuOr, interpolateRdBu, schemeRdBu, interpolateRdGy, schemeRdGy, interpolateRdYlBu, schemeRdYlBu, interpolateRdYlGn, schemeRdYlGn, interpolateSpectral, schemeSpectral, interpolateBuGn, schemeBuGn, interpolateBuPu, schemeBuPu, interpolateGnBu, schemeGnBu, interpolateOrRd, schemeOrRd, interpolatePuBuGn, schemePuBuGn, interpolatePuBu, schemePuBu, interpolatePuRd, schemePuRd, interpolateRdPu, schemeRdPu, interpolateYlGnBu, schemeYlGnBu, interpolateYlGn, schemeYlGn, interpolateYlOrBr, schemeYlOrBr, interpolateYlOrRd, schemeYlOrRd, interpolateBlues, schemeBlues, interpolateGreens, schemeGreens, interpolateGreys, schemeGreys, interpolatePurples, schemePurples, interpolateReds, schemeReds, interpolateOranges, schemeOranges, interpolateCividis, interpolateCubehelixDefault, interpolateRainbow, interpolateWarm, interpolateCool, interpolateSinebow, interpolateTurbo, interpolateViridis, interpolateMagma, interpolateInferno, interpolatePlasma, create, creator, local, matcher, mouse, namespace, namespaces, clientPoint, select, selectAll, selection, selector, selectorAll, style, touch, touches, window, event, customEvent, arc, area, line, pie, areaRadial, radialArea, lineRadial, radialLine, pointRadial, linkHorizontal, linkVertical, linkRadial, symbol, symbols, symbolCircle, symbolCross, symbolDiamond, symbolSquare, symbolStar, symbolTriangle, symbolWye, curveBasisClosed, curveBasisOpen, curveBasis, curveBundle, curveCardinalClosed, curveCardinalOpen, curveCardinal, curveCatmullRomClosed, curveCatmullRomOpen, curveCatmullRom, curveLinearClosed, curveLinear, curveMonotoneX, curveMonotoneY, curveNatural, curveStep, curveStepAfter, curveStepBefore, stack, stackOffsetExpand, stackOffsetDiverging, stackOffsetNone, stackOffsetSilhouette, stackOffsetWiggle, stackOrderAppearance, stackOrderAscending, stackOrderDescending, stackOrderInsideOut, stackOrderNone, stackOrderReverse, timeInterval, timeMillisecond, timeMilliseconds, utcMillisecond, utcMilliseconds, timeSecond, timeSeconds, utcSecond, utcSeconds, timeMinute, timeMinutes, timeHour, timeHours, timeDay, timeDays, timeWeek, timeWeeks, timeSunday, timeSundays, timeMonday, timeMondays, timeTuesday, timeTuesdays, timeWednesday, timeWednesdays, timeThursday, timeThursdays, timeFriday, timeFridays, timeSaturday, timeSaturdays, timeMonth, timeMonths, timeYear, timeYears, utcMinute, utcMinutes, utcHour, utcHours, utcDay, utcDays, utcWeek, utcWeeks, utcSunday, utcSundays, utcMonday, utcMondays, utcTuesday, utcTuesdays, utcWednesday, utcWednesdays, utcThursday, utcThursdays, utcFriday, utcFridays, utcSaturday, utcSaturdays, utcMonth, utcMonths, utcYear, utcYears, timeFormatDefaultLocale, timeFormat, timeParse, utcFormat, utcParse, timeFormatLocale, isoFormat, isoParse, now, timer, timerFlush, timeout, interval, transition, active, interrupt, voronoi, zoom, zoomTransform, zoomIdentity */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1042);

/***/ }),

/***/ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js":
/*!******************************************************************!*\
  !*** ./node_modules/expose-loader/dist/runtime/getGlobalThis.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

module.exports = function () {
  if (typeof globalThis === "object") {
    return globalThis;
  }

  var g;

  try {
    g = this || new Function("return this")();
  } catch (e) {
    if (typeof window === "object") {
      return window;
    }

    if (typeof self === "object") {
      return self;
    }

    if (typeof global !== "undefined") {
      return global;
    }
  }

  return g;
}();
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/file-saver/dist/FileSaver.min.js":
/*!*******************************************************************************************!*\
  !*** delegated ./node_modules/file-saver/dist/FileSaver.min.js from dll-reference vendor ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1044);

/***/ }),

/***/ "./node_modules/floatthead/dist/jquery.floatThead.min.js":
/*!***************************************************************************************************!*\
  !*** delegated ./node_modules/floatthead/dist/jquery.floatThead.min.js from dll-reference vendor ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1045);

/***/ }),

/***/ "./node_modules/jquery-datetimepicker/jquery.datetimepicker.css":
/*!**********************************************************************!*\
  !*** ./node_modules/jquery-datetimepicker/jquery.datetimepicker.css ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./node_modules/jquery-datetimepicker/jquery.datetimepicker.js":
/*!*********************************************************************************************************!*\
  !*** delegated ./node_modules/jquery-datetimepicker/jquery.datetimepicker.js from dll-reference vendor ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1046);

/***/ }),

/***/ "./node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.js":
/*!*********************************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.js from dll-reference vendor ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1048);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-de.js":
/*!*********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-de.js from dll-reference vendor ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1049);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-en-GB.js":
/*!************************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-en-GB.js from dll-reference vendor ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1050);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-fr.js":
/*!*********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-fr.js from dll-reference vendor ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1051);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/i18n/datepicker-it.js":
/*!*********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/i18n/datepicker-it.js from dll-reference vendor ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1052);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/draggable.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/widgets/draggable.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1053);

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/sortable.js":
/*!*******************************************************************************************!*\
  !*** delegated ./node_modules/jquery-ui/ui/widgets/sortable.js from dll-reference vendor ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1059);

/***/ }),

/***/ "./node_modules/jquery/dist/jquery.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/jquery/dist/jquery.js from dll-reference vendor ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(4);

/***/ }),

/***/ "./node_modules/moment/dist/locale sync recursive ^\\.\\/.*$":
/*!*******************************************************!*\
  !*** ./node_modules/moment/dist/locale sync ^\.\/.*$ ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/dist/locale/af.js",
	"./af.js": "./node_modules/moment/dist/locale/af.js",
	"./ar": "./node_modules/moment/dist/locale/ar.js",
	"./ar-dz": "./node_modules/moment/dist/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/dist/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/dist/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/dist/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/dist/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/dist/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/dist/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/dist/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/dist/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/dist/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/dist/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/dist/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/dist/locale/ar.js",
	"./az": "./node_modules/moment/dist/locale/az.js",
	"./az.js": "./node_modules/moment/dist/locale/az.js",
	"./be": "./node_modules/moment/dist/locale/be.js",
	"./be.js": "./node_modules/moment/dist/locale/be.js",
	"./bg": "./node_modules/moment/dist/locale/bg.js",
	"./bg.js": "./node_modules/moment/dist/locale/bg.js",
	"./bm": "./node_modules/moment/dist/locale/bm.js",
	"./bm.js": "./node_modules/moment/dist/locale/bm.js",
	"./bn": "./node_modules/moment/dist/locale/bn.js",
	"./bn-bd": "./node_modules/moment/dist/locale/bn-bd.js",
	"./bn-bd.js": "./node_modules/moment/dist/locale/bn-bd.js",
	"./bn.js": "./node_modules/moment/dist/locale/bn.js",
	"./bo": "./node_modules/moment/dist/locale/bo.js",
	"./bo.js": "./node_modules/moment/dist/locale/bo.js",
	"./br": "./node_modules/moment/dist/locale/br.js",
	"./br.js": "./node_modules/moment/dist/locale/br.js",
	"./bs": "./node_modules/moment/dist/locale/bs.js",
	"./bs.js": "./node_modules/moment/dist/locale/bs.js",
	"./ca": "./node_modules/moment/dist/locale/ca.js",
	"./ca.js": "./node_modules/moment/dist/locale/ca.js",
	"./cs": "./node_modules/moment/dist/locale/cs.js",
	"./cs.js": "./node_modules/moment/dist/locale/cs.js",
	"./cv": "./node_modules/moment/dist/locale/cv.js",
	"./cv.js": "./node_modules/moment/dist/locale/cv.js",
	"./cy": "./node_modules/moment/dist/locale/cy.js",
	"./cy.js": "./node_modules/moment/dist/locale/cy.js",
	"./da": "./node_modules/moment/dist/locale/da.js",
	"./da.js": "./node_modules/moment/dist/locale/da.js",
	"./de": "./node_modules/moment/dist/locale/de.js",
	"./de-at": "./node_modules/moment/dist/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/dist/locale/de-at.js",
	"./de-ch": "./node_modules/moment/dist/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/dist/locale/de-ch.js",
	"./de.js": "./node_modules/moment/dist/locale/de.js",
	"./dv": "./node_modules/moment/dist/locale/dv.js",
	"./dv.js": "./node_modules/moment/dist/locale/dv.js",
	"./el": "./node_modules/moment/dist/locale/el.js",
	"./el.js": "./node_modules/moment/dist/locale/el.js",
	"./en-au": "./node_modules/moment/dist/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/dist/locale/en-au.js",
	"./en-ca": "./node_modules/moment/dist/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/dist/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/dist/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/dist/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/dist/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/dist/locale/en-ie.js",
	"./en-il": "./node_modules/moment/dist/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/dist/locale/en-il.js",
	"./en-in": "./node_modules/moment/dist/locale/en-in.js",
	"./en-in.js": "./node_modules/moment/dist/locale/en-in.js",
	"./en-nz": "./node_modules/moment/dist/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/dist/locale/en-nz.js",
	"./en-sg": "./node_modules/moment/dist/locale/en-sg.js",
	"./en-sg.js": "./node_modules/moment/dist/locale/en-sg.js",
	"./eo": "./node_modules/moment/dist/locale/eo.js",
	"./eo.js": "./node_modules/moment/dist/locale/eo.js",
	"./es": "./node_modules/moment/dist/locale/es.js",
	"./es-do": "./node_modules/moment/dist/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/dist/locale/es-do.js",
	"./es-mx": "./node_modules/moment/dist/locale/es-mx.js",
	"./es-mx.js": "./node_modules/moment/dist/locale/es-mx.js",
	"./es-us": "./node_modules/moment/dist/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/dist/locale/es-us.js",
	"./es.js": "./node_modules/moment/dist/locale/es.js",
	"./et": "./node_modules/moment/dist/locale/et.js",
	"./et.js": "./node_modules/moment/dist/locale/et.js",
	"./eu": "./node_modules/moment/dist/locale/eu.js",
	"./eu.js": "./node_modules/moment/dist/locale/eu.js",
	"./fa": "./node_modules/moment/dist/locale/fa.js",
	"./fa.js": "./node_modules/moment/dist/locale/fa.js",
	"./fi": "./node_modules/moment/dist/locale/fi.js",
	"./fi.js": "./node_modules/moment/dist/locale/fi.js",
	"./fil": "./node_modules/moment/dist/locale/fil.js",
	"./fil.js": "./node_modules/moment/dist/locale/fil.js",
	"./fo": "./node_modules/moment/dist/locale/fo.js",
	"./fo.js": "./node_modules/moment/dist/locale/fo.js",
	"./fr": "./node_modules/moment/dist/locale/fr.js",
	"./fr-ca": "./node_modules/moment/dist/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/dist/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/dist/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/dist/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/dist/locale/fr.js",
	"./fy": "./node_modules/moment/dist/locale/fy.js",
	"./fy.js": "./node_modules/moment/dist/locale/fy.js",
	"./ga": "./node_modules/moment/dist/locale/ga.js",
	"./ga.js": "./node_modules/moment/dist/locale/ga.js",
	"./gd": "./node_modules/moment/dist/locale/gd.js",
	"./gd.js": "./node_modules/moment/dist/locale/gd.js",
	"./gl": "./node_modules/moment/dist/locale/gl.js",
	"./gl.js": "./node_modules/moment/dist/locale/gl.js",
	"./gom-deva": "./node_modules/moment/dist/locale/gom-deva.js",
	"./gom-deva.js": "./node_modules/moment/dist/locale/gom-deva.js",
	"./gom-latn": "./node_modules/moment/dist/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/dist/locale/gom-latn.js",
	"./gu": "./node_modules/moment/dist/locale/gu.js",
	"./gu.js": "./node_modules/moment/dist/locale/gu.js",
	"./he": "./node_modules/moment/dist/locale/he.js",
	"./he.js": "./node_modules/moment/dist/locale/he.js",
	"./hi": "./node_modules/moment/dist/locale/hi.js",
	"./hi.js": "./node_modules/moment/dist/locale/hi.js",
	"./hr": "./node_modules/moment/dist/locale/hr.js",
	"./hr.js": "./node_modules/moment/dist/locale/hr.js",
	"./hu": "./node_modules/moment/dist/locale/hu.js",
	"./hu.js": "./node_modules/moment/dist/locale/hu.js",
	"./hy-am": "./node_modules/moment/dist/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/dist/locale/hy-am.js",
	"./id": "./node_modules/moment/dist/locale/id.js",
	"./id.js": "./node_modules/moment/dist/locale/id.js",
	"./is": "./node_modules/moment/dist/locale/is.js",
	"./is.js": "./node_modules/moment/dist/locale/is.js",
	"./it": "./node_modules/moment/dist/locale/it.js",
	"./it-ch": "./node_modules/moment/dist/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/dist/locale/it-ch.js",
	"./it.js": "./node_modules/moment/dist/locale/it.js",
	"./ja": "./node_modules/moment/dist/locale/ja.js",
	"./ja.js": "./node_modules/moment/dist/locale/ja.js",
	"./jv": "./node_modules/moment/dist/locale/jv.js",
	"./jv.js": "./node_modules/moment/dist/locale/jv.js",
	"./ka": "./node_modules/moment/dist/locale/ka.js",
	"./ka.js": "./node_modules/moment/dist/locale/ka.js",
	"./kk": "./node_modules/moment/dist/locale/kk.js",
	"./kk.js": "./node_modules/moment/dist/locale/kk.js",
	"./km": "./node_modules/moment/dist/locale/km.js",
	"./km.js": "./node_modules/moment/dist/locale/km.js",
	"./kn": "./node_modules/moment/dist/locale/kn.js",
	"./kn.js": "./node_modules/moment/dist/locale/kn.js",
	"./ko": "./node_modules/moment/dist/locale/ko.js",
	"./ko.js": "./node_modules/moment/dist/locale/ko.js",
	"./ku": "./node_modules/moment/dist/locale/ku.js",
	"./ku.js": "./node_modules/moment/dist/locale/ku.js",
	"./ky": "./node_modules/moment/dist/locale/ky.js",
	"./ky.js": "./node_modules/moment/dist/locale/ky.js",
	"./lb": "./node_modules/moment/dist/locale/lb.js",
	"./lb.js": "./node_modules/moment/dist/locale/lb.js",
	"./lo": "./node_modules/moment/dist/locale/lo.js",
	"./lo.js": "./node_modules/moment/dist/locale/lo.js",
	"./lt": "./node_modules/moment/dist/locale/lt.js",
	"./lt.js": "./node_modules/moment/dist/locale/lt.js",
	"./lv": "./node_modules/moment/dist/locale/lv.js",
	"./lv.js": "./node_modules/moment/dist/locale/lv.js",
	"./me": "./node_modules/moment/dist/locale/me.js",
	"./me.js": "./node_modules/moment/dist/locale/me.js",
	"./mi": "./node_modules/moment/dist/locale/mi.js",
	"./mi.js": "./node_modules/moment/dist/locale/mi.js",
	"./mk": "./node_modules/moment/dist/locale/mk.js",
	"./mk.js": "./node_modules/moment/dist/locale/mk.js",
	"./ml": "./node_modules/moment/dist/locale/ml.js",
	"./ml.js": "./node_modules/moment/dist/locale/ml.js",
	"./mn": "./node_modules/moment/dist/locale/mn.js",
	"./mn.js": "./node_modules/moment/dist/locale/mn.js",
	"./mr": "./node_modules/moment/dist/locale/mr.js",
	"./mr.js": "./node_modules/moment/dist/locale/mr.js",
	"./ms": "./node_modules/moment/dist/locale/ms.js",
	"./ms-my": "./node_modules/moment/dist/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/dist/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/dist/locale/ms.js",
	"./mt": "./node_modules/moment/dist/locale/mt.js",
	"./mt.js": "./node_modules/moment/dist/locale/mt.js",
	"./my": "./node_modules/moment/dist/locale/my.js",
	"./my.js": "./node_modules/moment/dist/locale/my.js",
	"./nb": "./node_modules/moment/dist/locale/nb.js",
	"./nb.js": "./node_modules/moment/dist/locale/nb.js",
	"./ne": "./node_modules/moment/dist/locale/ne.js",
	"./ne.js": "./node_modules/moment/dist/locale/ne.js",
	"./nl": "./node_modules/moment/dist/locale/nl.js",
	"./nl-be": "./node_modules/moment/dist/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/dist/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/dist/locale/nl.js",
	"./nn": "./node_modules/moment/dist/locale/nn.js",
	"./nn.js": "./node_modules/moment/dist/locale/nn.js",
	"./oc-lnc": "./node_modules/moment/dist/locale/oc-lnc.js",
	"./oc-lnc.js": "./node_modules/moment/dist/locale/oc-lnc.js",
	"./pa-in": "./node_modules/moment/dist/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/dist/locale/pa-in.js",
	"./pl": "./node_modules/moment/dist/locale/pl.js",
	"./pl.js": "./node_modules/moment/dist/locale/pl.js",
	"./pt": "./node_modules/moment/dist/locale/pt.js",
	"./pt-br": "./node_modules/moment/dist/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/dist/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/dist/locale/pt.js",
	"./ro": "./node_modules/moment/dist/locale/ro.js",
	"./ro.js": "./node_modules/moment/dist/locale/ro.js",
	"./ru": "./node_modules/moment/dist/locale/ru.js",
	"./ru.js": "./node_modules/moment/dist/locale/ru.js",
	"./sd": "./node_modules/moment/dist/locale/sd.js",
	"./sd.js": "./node_modules/moment/dist/locale/sd.js",
	"./se": "./node_modules/moment/dist/locale/se.js",
	"./se.js": "./node_modules/moment/dist/locale/se.js",
	"./si": "./node_modules/moment/dist/locale/si.js",
	"./si.js": "./node_modules/moment/dist/locale/si.js",
	"./sk": "./node_modules/moment/dist/locale/sk.js",
	"./sk.js": "./node_modules/moment/dist/locale/sk.js",
	"./sl": "./node_modules/moment/dist/locale/sl.js",
	"./sl.js": "./node_modules/moment/dist/locale/sl.js",
	"./sq": "./node_modules/moment/dist/locale/sq.js",
	"./sq.js": "./node_modules/moment/dist/locale/sq.js",
	"./sr": "./node_modules/moment/dist/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/dist/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/dist/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/dist/locale/sr.js",
	"./ss": "./node_modules/moment/dist/locale/ss.js",
	"./ss.js": "./node_modules/moment/dist/locale/ss.js",
	"./sv": "./node_modules/moment/dist/locale/sv.js",
	"./sv.js": "./node_modules/moment/dist/locale/sv.js",
	"./sw": "./node_modules/moment/dist/locale/sw.js",
	"./sw.js": "./node_modules/moment/dist/locale/sw.js",
	"./ta": "./node_modules/moment/dist/locale/ta.js",
	"./ta.js": "./node_modules/moment/dist/locale/ta.js",
	"./te": "./node_modules/moment/dist/locale/te.js",
	"./te.js": "./node_modules/moment/dist/locale/te.js",
	"./tet": "./node_modules/moment/dist/locale/tet.js",
	"./tet.js": "./node_modules/moment/dist/locale/tet.js",
	"./tg": "./node_modules/moment/dist/locale/tg.js",
	"./tg.js": "./node_modules/moment/dist/locale/tg.js",
	"./th": "./node_modules/moment/dist/locale/th.js",
	"./th.js": "./node_modules/moment/dist/locale/th.js",
	"./tk": "./node_modules/moment/dist/locale/tk.js",
	"./tk.js": "./node_modules/moment/dist/locale/tk.js",
	"./tl-ph": "./node_modules/moment/dist/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/dist/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/dist/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/dist/locale/tlh.js",
	"./tr": "./node_modules/moment/dist/locale/tr.js",
	"./tr.js": "./node_modules/moment/dist/locale/tr.js",
	"./tzl": "./node_modules/moment/dist/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/dist/locale/tzl.js",
	"./tzm": "./node_modules/moment/dist/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/dist/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/dist/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/dist/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/dist/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/dist/locale/ug-cn.js",
	"./uk": "./node_modules/moment/dist/locale/uk.js",
	"./uk.js": "./node_modules/moment/dist/locale/uk.js",
	"./ur": "./node_modules/moment/dist/locale/ur.js",
	"./ur.js": "./node_modules/moment/dist/locale/ur.js",
	"./uz": "./node_modules/moment/dist/locale/uz.js",
	"./uz-latn": "./node_modules/moment/dist/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/dist/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/dist/locale/uz.js",
	"./vi": "./node_modules/moment/dist/locale/vi.js",
	"./vi.js": "./node_modules/moment/dist/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/dist/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/dist/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/dist/locale/yo.js",
	"./yo.js": "./node_modules/moment/dist/locale/yo.js",
	"./zh-cn": "./node_modules/moment/dist/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/dist/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/dist/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/dist/locale/zh-hk.js",
	"./zh-mo": "./node_modules/moment/dist/locale/zh-mo.js",
	"./zh-mo.js": "./node_modules/moment/dist/locale/zh-mo.js",
	"./zh-tw": "./node_modules/moment/dist/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/dist/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/dist/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./node_modules/moment/dist/locale/af.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/af.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('af', {
  months: 'Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember'.split('_'),
  monthsShort: 'Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des'.split('_'),
  weekdays: 'Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag'.split('_'),
  weekdaysShort: 'Son_Maa_Din_Woe_Don_Vry_Sat'.split('_'),
  weekdaysMin: 'So_Ma_Di_Wo_Do_Vr_Sa'.split('_'),
  meridiemParse: /vm|nm/i,
  isPM: function isPM(input) {
    return /^nm$/i.test(input);
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower ? 'vm' : 'VM';
    } else {
      return isLower ? 'nm' : 'NM';
    }
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Vandag om] LT',
    nextDay: '[Môre om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[Gister om] LT',
    lastWeek: '[Laas] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'oor %s',
    past: '%s gelede',
    s: "'n paar sekondes",
    ss: '%d sekondes',
    m: "'n minuut",
    mm: '%d minute',
    h: "'n uur",
    hh: '%d ure',
    d: "'n dag",
    dd: '%d dae',
    M: "'n maand",
    MM: '%d maande',
    y: "'n jaar",
    yy: '%d jaar'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-dz.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-dz.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var pluralForm = function pluralForm(n) {
  return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
},
    plurals = {
  s: ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
  m: ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
  h: ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
  d: ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
  M: ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
  y: ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
},
    pluralize = function pluralize(u) {
  return function (number, withoutSuffix, string, isFuture) {
    var f = pluralForm(number),
        str = plurals[u][pluralForm(number)];

    if (f === 2) {
      str = str[withoutSuffix ? 0 : 1];
    }

    return str.replace(/%d/i, number);
  };
},
    months = ['جانفي', 'فيفري', 'مارس', 'أفريل', 'ماي', 'جوان', 'جويلية', 'أوت', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-dz', {
  months: months,
  monthsShort: months,
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: "D/\u200FM/\u200FYYYY",
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم عند الساعة] LT',
    nextDay: '[غدًا عند الساعة] LT',
    nextWeek: 'dddd [عند الساعة] LT',
    lastDay: '[أمس عند الساعة] LT',
    lastWeek: 'dddd [عند الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'بعد %s',
    past: 'منذ %s',
    s: pluralize('s'),
    ss: pluralize('s'),
    m: pluralize('m'),
    mm: pluralize('m'),
    h: pluralize('h'),
    hh: pluralize('h'),
    d: pluralize('d'),
    dd: pluralize('d'),
    M: pluralize('M'),
    MM: pluralize('M'),
    y: pluralize('y'),
    yy: pluralize('y')
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 0,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-kw.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-kw.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-kw', {
  months: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  monthsShort: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  weekdays: 'الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  week: {
    dow: 0,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-ly.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-ly.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var symbolMap = {
  1: '1',
  2: '2',
  3: '3',
  4: '4',
  5: '5',
  6: '6',
  7: '7',
  8: '8',
  9: '9',
  0: '0'
},
    pluralForm = function pluralForm(n) {
  return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
},
    plurals = {
  s: ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
  m: ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
  h: ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
  d: ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
  M: ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
  y: ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
},
    pluralize = function pluralize(u) {
  return function (number, withoutSuffix, string, isFuture) {
    var f = pluralForm(number),
        str = plurals[u][pluralForm(number)];

    if (f === 2) {
      str = str[withoutSuffix ? 0 : 1];
    }

    return str.replace(/%d/i, number);
  };
},
    months = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-ly', {
  months: months,
  monthsShort: months,
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: "D/\u200FM/\u200FYYYY",
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم عند الساعة] LT',
    nextDay: '[غدًا عند الساعة] LT',
    nextWeek: 'dddd [عند الساعة] LT',
    lastDay: '[أمس عند الساعة] LT',
    lastWeek: 'dddd [عند الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'بعد %s',
    past: 'منذ %s',
    s: pluralize('s'),
    ss: pluralize('s'),
    m: pluralize('m'),
    mm: pluralize('m'),
    h: pluralize('h'),
    hh: pluralize('h'),
    d: pluralize('d'),
    dd: pluralize('d'),
    M: pluralize('M'),
    MM: pluralize('M'),
    y: pluralize('y'),
    yy: pluralize('y')
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-ma.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-ma.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-ma', {
  months: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  monthsShort: 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-sa.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-sa.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '١',
  2: '٢',
  3: '٣',
  4: '٤',
  5: '٥',
  6: '٦',
  7: '٧',
  8: '٨',
  9: '٩',
  0: '٠'
},
    numberMap = {
  '١': '1',
  '٢': '2',
  '٣': '3',
  '٤': '4',
  '٥': '5',
  '٦': '6',
  '٧': '7',
  '٨': '8',
  '٩': '9',
  '٠': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-sa', {
  months: 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  monthsShort: 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  preparse: function preparse(string) {
    return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar-tn.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ar-tn.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar-tn', {
  months: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  monthsShort: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[اليوم على الساعة] LT',
    nextDay: '[غدا على الساعة] LT',
    nextWeek: 'dddd [على الساعة] LT',
    lastDay: '[أمس على الساعة] LT',
    lastWeek: 'dddd [على الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'في %s',
    past: 'منذ %s',
    s: 'ثوان',
    ss: '%d ثانية',
    m: 'دقيقة',
    mm: '%d دقائق',
    h: 'ساعة',
    hh: '%d ساعات',
    d: 'يوم',
    dd: '%d أيام',
    M: 'شهر',
    MM: '%d أشهر',
    y: 'سنة',
    yy: '%d سنوات'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ar.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ar.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var symbolMap = {
  1: '١',
  2: '٢',
  3: '٣',
  4: '٤',
  5: '٥',
  6: '٦',
  7: '٧',
  8: '٨',
  9: '٩',
  0: '٠'
},
    numberMap = {
  '١': '1',
  '٢': '2',
  '٣': '3',
  '٤': '4',
  '٥': '5',
  '٦': '6',
  '٧': '7',
  '٨': '8',
  '٩': '9',
  '٠': '0'
},
    pluralForm = function pluralForm(n) {
  return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
},
    plurals = {
  s: ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
  m: ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
  h: ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
  d: ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
  M: ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
  y: ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
},
    pluralize = function pluralize(u) {
  return function (number, withoutSuffix, string, isFuture) {
    var f = pluralForm(number),
        str = plurals[u][pluralForm(number)];

    if (f === 2) {
      str = str[withoutSuffix ? 0 : 1];
    }

    return str.replace(/%d/i, number);
  };
},
    months = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ar', {
  months: months,
  monthsShort: months,
  weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
  weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
  weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: "D/\u200FM/\u200FYYYY",
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ص|م/,
  isPM: function isPM(input) {
    return 'م' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ص';
    } else {
      return 'م';
    }
  },
  calendar: {
    sameDay: '[اليوم عند الساعة] LT',
    nextDay: '[غدًا عند الساعة] LT',
    nextWeek: 'dddd [عند الساعة] LT',
    lastDay: '[أمس عند الساعة] LT',
    lastWeek: 'dddd [عند الساعة] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'بعد %s',
    past: 'منذ %s',
    s: pluralize('s'),
    ss: pluralize('s'),
    m: pluralize('m'),
    mm: pluralize('m'),
    h: pluralize('h'),
    hh: pluralize('h'),
    d: pluralize('d'),
    dd: pluralize('d'),
    M: pluralize('M'),
    MM: pluralize('M'),
    y: pluralize('y'),
    yy: pluralize('y')
  },
  preparse: function preparse(string) {
    return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/az.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/az.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  1: '-inci',
  5: '-inci',
  8: '-inci',
  70: '-inci',
  80: '-inci',
  2: '-nci',
  7: '-nci',
  20: '-nci',
  50: '-nci',
  3: '-üncü',
  4: '-üncü',
  100: '-üncü',
  6: '-ncı',
  9: '-uncu',
  10: '-uncu',
  30: '-uncu',
  60: '-ıncı',
  90: '-ıncı'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('az', {
  months: 'yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr'.split('_'),
  monthsShort: 'yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek'.split('_'),
  weekdays: 'Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə'.split('_'),
  weekdaysShort: 'Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən'.split('_'),
  weekdaysMin: 'Bz_BE_ÇA_Çə_CA_Cü_Şə'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[bugün saat] LT',
    nextDay: '[sabah saat] LT',
    nextWeek: '[gələn həftə] dddd [saat] LT',
    lastDay: '[dünən] LT',
    lastWeek: '[keçən həftə] dddd [saat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s sonra',
    past: '%s əvvəl',
    s: 'bir neçə saniyə',
    ss: '%d saniyə',
    m: 'bir dəqiqə',
    mm: '%d dəqiqə',
    h: 'bir saat',
    hh: '%d saat',
    d: 'bir gün',
    dd: '%d gün',
    M: 'bir ay',
    MM: '%d ay',
    y: 'bir il',
    yy: '%d il'
  },
  meridiemParse: /gecə|səhər|gündüz|axşam/,
  isPM: function isPM(input) {
    return /^(gündüz|axşam)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'gecə';
    } else if (hour < 12) {
      return 'səhər';
    } else if (hour < 17) {
      return 'gündüz';
    } else {
      return 'axşam';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,
  ordinal: function ordinal(number) {
    if (number === 0) {
      return number + '-ıncı';
    }

    var a = number % 10,
        b = number % 100 - a,
        c = number >= 100 ? 100 : null;
    return number + (suffixes[a] || suffixes[b] || suffixes[c]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/be.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/be.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(word, num) {
  var forms = word.split('_');
  return num % 10 === 1 && num % 100 !== 11 ? forms[0] : num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2];
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: withoutSuffix ? 'секунда_секунды_секунд' : 'секунду_секунды_секунд',
    mm: withoutSuffix ? 'хвіліна_хвіліны_хвілін' : 'хвіліну_хвіліны_хвілін',
    hh: withoutSuffix ? 'гадзіна_гадзіны_гадзін' : 'гадзіну_гадзіны_гадзін',
    dd: 'дзень_дні_дзён',
    MM: 'месяц_месяцы_месяцаў',
    yy: 'год_гады_гадоў'
  };

  if (key === 'm') {
    return withoutSuffix ? 'хвіліна' : 'хвіліну';
  } else if (key === 'h') {
    return withoutSuffix ? 'гадзіна' : 'гадзіну';
  } else {
    return number + ' ' + plural(format[key], +number);
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('be', {
  months: {
    format: 'студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня'.split('_'),
    standalone: 'студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань'.split('_')
  },
  monthsShort: 'студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж'.split('_'),
  weekdays: {
    format: 'нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу'.split('_'),
    standalone: 'нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота'.split('_'),
    isFormat: /\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/
  },
  weekdaysShort: 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
  weekdaysMin: 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY г.',
    LLL: 'D MMMM YYYY г., HH:mm',
    LLLL: 'dddd, D MMMM YYYY г., HH:mm'
  },
  calendar: {
    sameDay: '[Сёння ў] LT',
    nextDay: '[Заўтра ў] LT',
    lastDay: '[Учора ў] LT',
    nextWeek: function nextWeek() {
      return '[У] dddd [ў] LT';
    },
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 5:
        case 6:
          return '[У мінулую] dddd [ў] LT';

        case 1:
        case 2:
        case 4:
          return '[У мінулы] dddd [ў] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'праз %s',
    past: '%s таму',
    s: 'некалькі секунд',
    m: relativeTimeWithPlural,
    mm: relativeTimeWithPlural,
    h: relativeTimeWithPlural,
    hh: relativeTimeWithPlural,
    d: 'дзень',
    dd: relativeTimeWithPlural,
    M: 'месяц',
    MM: relativeTimeWithPlural,
    y: 'год',
    yy: relativeTimeWithPlural
  },
  meridiemParse: /ночы|раніцы|дня|вечара/,
  isPM: function isPM(input) {
    return /^(дня|вечара)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ночы';
    } else if (hour < 12) {
      return 'раніцы';
    } else if (hour < 17) {
      return 'дня';
    } else {
      return 'вечара';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(і|ы|га)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'M':
      case 'd':
      case 'DDD':
      case 'w':
      case 'W':
        return (number % 10 === 2 || number % 10 === 3) && number % 100 !== 12 && number % 100 !== 13 ? number + '-і' : number + '-ы';

      case 'D':
        return number + '-га';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bg.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bg.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bg', {
  months: 'януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември'.split('_'),
  monthsShort: 'яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек'.split('_'),
  weekdays: 'неделя_понеделник_вторник_сряда_четвъртък_петък_събота'.split('_'),
  weekdaysShort: 'нед_пон_вто_сря_чет_пет_съб'.split('_'),
  weekdaysMin: 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY H:mm',
    LLLL: 'dddd, D MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[Днес в] LT',
    nextDay: '[Утре в] LT',
    nextWeek: 'dddd [в] LT',
    lastDay: '[Вчера в] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 6:
          return '[Миналата] dddd [в] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[Миналия] dddd [в] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'след %s',
    past: 'преди %s',
    s: 'няколко секунди',
    ss: '%d секунди',
    m: 'минута',
    mm: '%d минути',
    h: 'час',
    hh: '%d часа',
    d: 'ден',
    dd: '%d дена',
    w: 'седмица',
    ww: '%d седмици',
    M: 'месец',
    MM: '%d месеца',
    y: 'година',
    yy: '%d години'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
  ordinal: function ordinal(number) {
    var lastDigit = number % 10,
        last2Digits = number % 100;

    if (number === 0) {
      return number + '-ев';
    } else if (last2Digits === 0) {
      return number + '-ен';
    } else if (last2Digits > 10 && last2Digits < 20) {
      return number + '-ти';
    } else if (lastDigit === 1) {
      return number + '-ви';
    } else if (lastDigit === 2) {
      return number + '-ри';
    } else if (lastDigit === 7 || lastDigit === 8) {
      return number + '-ми';
    } else {
      return number + '-ти';
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bm.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bm.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bm', {
  months: 'Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo'.split('_'),
  monthsShort: 'Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des'.split('_'),
  weekdays: 'Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri'.split('_'),
  weekdaysShort: 'Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib'.split('_'),
  weekdaysMin: 'Ka_Nt_Ta_Ar_Al_Ju_Si'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'MMMM [tile] D [san] YYYY',
    LLL: 'MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm',
    LLLL: 'dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm'
  },
  calendar: {
    sameDay: '[Bi lɛrɛ] LT',
    nextDay: '[Sini lɛrɛ] LT',
    nextWeek: 'dddd [don lɛrɛ] LT',
    lastDay: '[Kunu lɛrɛ] LT',
    lastWeek: 'dddd [tɛmɛnen lɛrɛ] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s kɔnɔ',
    past: 'a bɛ %s bɔ',
    s: 'sanga dama dama',
    ss: 'sekondi %d',
    m: 'miniti kelen',
    mm: 'miniti %d',
    h: 'lɛrɛ kelen',
    hh: 'lɛrɛ %d',
    d: 'tile kelen',
    dd: 'tile %d',
    M: 'kalo kelen',
    MM: 'kalo %d',
    y: 'san kelen',
    yy: 'san %d'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bn-bd.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/bn-bd.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '১',
  2: '২',
  3: '৩',
  4: '৪',
  5: '৫',
  6: '৬',
  7: '৭',
  8: '৮',
  9: '৯',
  0: '০'
},
    numberMap = {
  '১': '1',
  '২': '2',
  '৩': '3',
  '৪': '4',
  '৫': '5',
  '৬': '6',
  '৭': '7',
  '৮': '8',
  '৯': '9',
  '০': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bn-bd', {
  months: 'জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
  monthsShort: 'জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে'.split('_'),
  weekdays: 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার'.split('_'),
  weekdaysShort: 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি'.split('_'),
  weekdaysMin: 'রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি'.split('_'),
  longDateFormat: {
    LT: 'A h:mm সময়',
    LTS: 'A h:mm:ss সময়',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm সময়',
    LLLL: 'dddd, D MMMM YYYY, A h:mm সময়'
  },
  calendar: {
    sameDay: '[আজ] LT',
    nextDay: '[আগামীকাল] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[গতকাল] LT',
    lastWeek: '[গত] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s পরে',
    past: '%s আগে',
    s: 'কয়েক সেকেন্ড',
    ss: '%d সেকেন্ড',
    m: 'এক মিনিট',
    mm: '%d মিনিট',
    h: 'এক ঘন্টা',
    hh: '%d ঘন্টা',
    d: 'এক দিন',
    dd: '%d দিন',
    M: 'এক মাস',
    MM: '%d মাস',
    y: 'এক বছর',
    yy: '%d বছর'
  },
  preparse: function preparse(string) {
    return string.replace(/[১২৩৪৫৬৭৮৯০]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'রাত') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ভোর') {
      return hour;
    } else if (meridiem === 'সকাল') {
      return hour;
    } else if (meridiem === 'দুপুর') {
      return hour >= 3 ? hour : hour + 12;
    } else if (meridiem === 'বিকাল') {
      return hour + 12;
    } else if (meridiem === 'সন্ধ্যা') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'রাত';
    } else if (hour < 6) {
      return 'ভোর';
    } else if (hour < 12) {
      return 'সকাল';
    } else if (hour < 15) {
      return 'দুপুর';
    } else if (hour < 18) {
      return 'বিকাল';
    } else if (hour < 20) {
      return 'সন্ধ্যা';
    } else {
      return 'রাত';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '১',
  2: '২',
  3: '৩',
  4: '৪',
  5: '৫',
  6: '৬',
  7: '৭',
  8: '৮',
  9: '৯',
  0: '০'
},
    numberMap = {
  '১': '1',
  '২': '2',
  '৩': '3',
  '৪': '4',
  '৫': '5',
  '৬': '6',
  '৭': '7',
  '৮': '8',
  '৯': '9',
  '০': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bn', {
  months: 'জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
  monthsShort: 'জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে'.split('_'),
  weekdays: 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার'.split('_'),
  weekdaysShort: 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি'.split('_'),
  weekdaysMin: 'রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি'.split('_'),
  longDateFormat: {
    LT: 'A h:mm সময়',
    LTS: 'A h:mm:ss সময়',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm সময়',
    LLLL: 'dddd, D MMMM YYYY, A h:mm সময়'
  },
  calendar: {
    sameDay: '[আজ] LT',
    nextDay: '[আগামীকাল] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[গতকাল] LT',
    lastWeek: '[গত] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s পরে',
    past: '%s আগে',
    s: 'কয়েক সেকেন্ড',
    ss: '%d সেকেন্ড',
    m: 'এক মিনিট',
    mm: '%d মিনিট',
    h: 'এক ঘন্টা',
    hh: '%d ঘন্টা',
    d: 'এক দিন',
    dd: '%d দিন',
    M: 'এক মাস',
    MM: '%d মাস',
    y: 'এক বছর',
    yy: '%d বছর'
  },
  preparse: function preparse(string) {
    return string.replace(/[১২৩৪৫৬৭৮৯০]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /রাত|সকাল|দুপুর|বিকাল|রাত/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'রাত' && hour >= 4 || meridiem === 'দুপুর' && hour < 5 || meridiem === 'বিকাল') {
      return hour + 12;
    } else {
      return hour;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'রাত';
    } else if (hour < 10) {
      return 'সকাল';
    } else if (hour < 17) {
      return 'দুপুর';
    } else if (hour < 20) {
      return 'বিকাল';
    } else {
      return 'রাত';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '༡',
  2: '༢',
  3: '༣',
  4: '༤',
  5: '༥',
  6: '༦',
  7: '༧',
  8: '༨',
  9: '༩',
  0: '༠'
},
    numberMap = {
  '༡': '1',
  '༢': '2',
  '༣': '3',
  '༤': '4',
  '༥': '5',
  '༦': '6',
  '༧': '7',
  '༨': '8',
  '༩': '9',
  '༠': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bo', {
  months: 'ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ'.split('_'),
  monthsShort: 'ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12'.split('_'),
  monthsShortRegex: /^(ཟླ་\d{1,2})/,
  monthsParseExact: true,
  weekdays: 'གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་'.split('_'),
  weekdaysShort: 'ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་'.split('_'),
  weekdaysMin: 'ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm',
    LLLL: 'dddd, D MMMM YYYY, A h:mm'
  },
  calendar: {
    sameDay: '[དི་རིང] LT',
    nextDay: '[སང་ཉིན] LT',
    nextWeek: '[བདུན་ཕྲག་རྗེས་མ], LT',
    lastDay: '[ཁ་སང] LT',
    lastWeek: '[བདུན་ཕྲག་མཐའ་མ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ལ་',
    past: '%s སྔན་ལ',
    s: 'ལམ་སང',
    ss: '%d སྐར་ཆ།',
    m: 'སྐར་མ་གཅིག',
    mm: '%d སྐར་མ',
    h: 'ཆུ་ཚོད་གཅིག',
    hh: '%d ཆུ་ཚོད',
    d: 'ཉིན་གཅིག',
    dd: '%d ཉིན་',
    M: 'ཟླ་བ་གཅིག',
    MM: '%d ཟླ་བ',
    y: 'ལོ་གཅིག',
    yy: '%d ལོ'
  },
  preparse: function preparse(string) {
    return string.replace(/[༡༢༣༤༥༦༧༨༩༠]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'མཚན་མོ' && hour >= 4 || meridiem === 'ཉིན་གུང' && hour < 5 || meridiem === 'དགོང་དག') {
      return hour + 12;
    } else {
      return hour;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'མཚན་མོ';
    } else if (hour < 10) {
      return 'ཞོགས་ཀས';
    } else if (hour < 17) {
      return 'ཉིན་གུང';
    } else if (hour < 20) {
      return 'དགོང་དག';
    } else {
      return 'མཚན་མོ';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/br.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/br.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function relativeTimeWithMutation(number, withoutSuffix, key) {
  var format = {
    mm: 'munutenn',
    MM: 'miz',
    dd: 'devezh'
  };
  return number + ' ' + mutation(format[key], number);
}

function specialMutationForYears(number) {
  switch (lastNumber(number)) {
    case 1:
    case 3:
    case 4:
    case 5:
    case 9:
      return number + ' bloaz';

    default:
      return number + ' vloaz';
  }
}

function lastNumber(number) {
  if (number > 9) {
    return lastNumber(number % 10);
  }

  return number;
}

function mutation(text, number) {
  if (number === 2) {
    return softMutation(text);
  }

  return text;
}

function softMutation(text) {
  var mutationTable = {
    m: 'v',
    b: 'v',
    d: 'z'
  };

  if (mutationTable[text.charAt(0)] === undefined) {
    return text;
  }

  return mutationTable[text.charAt(0)] + text.substring(1);
}

var monthsParse = [/^gen/i, /^c[ʼ\']hwe/i, /^meu/i, /^ebr/i, /^mae/i, /^(mez|eve)/i, /^gou/i, /^eos/i, /^gwe/i, /^her/i, /^du/i, /^ker/i],
    monthsRegex = /^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,
    monthsStrictRegex = /^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,
    monthsShortStrictRegex = /^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,
    fullWeekdaysParse = [/^sul/i, /^lun/i, /^meurzh/i, /^merc[ʼ\']her/i, /^yaou/i, /^gwener/i, /^sadorn/i],
    shortWeekdaysParse = [/^Sul/i, /^Lun/i, /^Meu/i, /^Mer/i, /^Yao/i, /^Gwe/i, /^Sad/i],
    minWeekdaysParse = [/^Su/i, /^Lu/i, /^Me([^r]|$)/i, /^Mer/i, /^Ya/i, /^Gw/i, /^Sa/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('br', {
  months: 'Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu'.split('_'),
  monthsShort: 'Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker'.split('_'),
  weekdays: 'Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn'.split('_'),
  weekdaysShort: 'Sul_Lun_Meu_Mer_Yao_Gwe_Sad'.split('_'),
  weekdaysMin: 'Su_Lu_Me_Mer_Ya_Gw_Sa'.split('_'),
  weekdaysParse: minWeekdaysParse,
  fullWeekdaysParse: fullWeekdaysParse,
  shortWeekdaysParse: shortWeekdaysParse,
  minWeekdaysParse: minWeekdaysParse,
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: monthsStrictRegex,
  monthsShortStrictRegex: monthsShortStrictRegex,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [a viz] MMMM YYYY',
    LLL: 'D [a viz] MMMM YYYY HH:mm',
    LLLL: 'dddd, D [a viz] MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Hiziv da] LT',
    nextDay: '[Warcʼhoazh da] LT',
    nextWeek: 'dddd [da] LT',
    lastDay: '[Decʼh da] LT',
    lastWeek: 'dddd [paset da] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'a-benn %s',
    past: '%s ʼzo',
    s: 'un nebeud segondennoù',
    ss: '%d eilenn',
    m: 'ur vunutenn',
    mm: relativeTimeWithMutation,
    h: 'un eur',
    hh: '%d eur',
    d: 'un devezh',
    dd: relativeTimeWithMutation,
    M: 'ur miz',
    MM: relativeTimeWithMutation,
    y: 'ur bloaz',
    yy: specialMutationForYears
  },
  dayOfMonthOrdinalParse: /\d{1,2}(añ|vet)/,
  ordinal: function ordinal(number) {
    var output = number === 1 ? 'añ' : 'vet';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  },
  meridiemParse: /a.m.|g.m./,
  isPM: function isPM(token) {
    return token === 'g.m.';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    return hour < 12 ? 'a.m.' : 'g.m.';
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/bs.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/bs.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function translate(number, withoutSuffix, key) {
  var result = number + ' ';

  switch (key) {
    case 'ss':
      if (number === 1) {
        result += 'sekunda';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sekunde';
      } else {
        result += 'sekundi';
      }

      return result;

    case 'm':
      return withoutSuffix ? 'jedna minuta' : 'jedne minute';

    case 'mm':
      if (number === 1) {
        result += 'minuta';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'minute';
      } else {
        result += 'minuta';
      }

      return result;

    case 'h':
      return withoutSuffix ? 'jedan sat' : 'jednog sata';

    case 'hh':
      if (number === 1) {
        result += 'sat';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sata';
      } else {
        result += 'sati';
      }

      return result;

    case 'dd':
      if (number === 1) {
        result += 'dan';
      } else {
        result += 'dana';
      }

      return result;

    case 'MM':
      if (number === 1) {
        result += 'mjesec';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'mjeseca';
      } else {
        result += 'mjeseci';
      }

      return result;

    case 'yy':
      if (number === 1) {
        result += 'godina';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'godine';
      } else {
        result += 'godina';
      }

      return result;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('bs', {
  months: 'januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedjelju] [u] LT';

        case 3:
          return '[u] [srijedu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[jučer u] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
          return '[prošlu] dddd [u] LT';

        case 6:
          return '[prošle] [subote] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[prošli] dddd [u] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'prije %s',
    s: 'par sekundi',
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: 'dan',
    dd: translate,
    M: 'mjesec',
    MM: translate,
    y: 'godinu',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ca.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ca.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ca', {
  months: {
    standalone: 'gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre'.split('_'),
    format: "de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split('_'),
    isFormat: /D[oD]?(\s)+MMMM/
  },
  monthsShort: 'gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.'.split('_'),
  monthsParseExact: true,
  weekdays: 'diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte'.split('_'),
  weekdaysShort: 'dg._dl._dt._dc._dj._dv._ds.'.split('_'),
  weekdaysMin: 'dg_dl_dt_dc_dj_dv_ds'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM [de] YYYY',
    ll: 'D MMM YYYY',
    LLL: 'D MMMM [de] YYYY [a les] H:mm',
    lll: 'D MMM YYYY, H:mm',
    LLLL: 'dddd D MMMM [de] YYYY [a les] H:mm',
    llll: 'ddd D MMM YYYY, H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[avui a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    nextDay: function nextDay() {
      return '[demà a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ahir a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [passat a ' + (this.hours() !== 1 ? 'les' : 'la') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: "d'aquí %s",
    past: 'fa %s',
    s: 'uns segons',
    ss: '%d segons',
    m: 'un minut',
    mm: '%d minuts',
    h: 'una hora',
    hh: '%d hores',
    d: 'un dia',
    dd: '%d dies',
    M: 'un mes',
    MM: '%d mesos',
    y: 'un any',
    yy: '%d anys'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(r|n|t|è|a)/,
  ordinal: function ordinal(number, period) {
    var output = number === 1 ? 'r' : number === 2 ? 'n' : number === 3 ? 'r' : number === 4 ? 't' : 'è';

    if (period === 'w' || period === 'W') {
      output = 'a';
    }

    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/cs.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/cs.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = 'leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec'.split('_'),
    monthsShort = 'led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro'.split('_'),
    monthsParse = [/^led/i, /^úno/i, /^bře/i, /^dub/i, /^kvě/i, /^(čvn|červen$|června)/i, /^(čvc|červenec|července)/i, /^srp/i, /^zář/i, /^říj/i, /^lis/i, /^pro/i],
    monthsRegex = /^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;

function plural(n) {
  return n > 1 && n < 5 && ~~(n / 10) !== 1;
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'pár sekund' : 'pár sekundami';

    case 'ss':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'sekundy' : 'sekund');
      } else {
        return result + 'sekundami';
      }

    case 'm':
      return withoutSuffix ? 'minuta' : isFuture ? 'minutu' : 'minutou';

    case 'mm':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'minuty' : 'minut');
      } else {
        return result + 'minutami';
      }

    case 'h':
      return withoutSuffix ? 'hodina' : isFuture ? 'hodinu' : 'hodinou';

    case 'hh':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'hodiny' : 'hodin');
      } else {
        return result + 'hodinami';
      }

    case 'd':
      return withoutSuffix || isFuture ? 'den' : 'dnem';

    case 'dd':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'dny' : 'dní');
      } else {
        return result + 'dny';
      }

    case 'M':
      return withoutSuffix || isFuture ? 'měsíc' : 'měsícem';

    case 'MM':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'měsíce' : 'měsíců');
      } else {
        return result + 'měsíci';
      }

    case 'y':
      return withoutSuffix || isFuture ? 'rok' : 'rokem';

    case 'yy':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'roky' : 'let');
      } else {
        return result + 'lety';
      }

  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('cs', {
  months: months,
  monthsShort: monthsShort,
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,
  monthsShortStrictRegex: /^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota'.split('_'),
  weekdaysShort: 'ne_po_út_st_čt_pá_so'.split('_'),
  weekdaysMin: 'ne_po_út_st_čt_pá_so'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd D. MMMM YYYY H:mm',
    l: 'D. M. YYYY'
  },
  calendar: {
    sameDay: '[dnes v] LT',
    nextDay: '[zítra v] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[v neděli v] LT';

        case 1:
        case 2:
          return '[v] dddd [v] LT';

        case 3:
          return '[ve středu v] LT';

        case 4:
          return '[ve čtvrtek v] LT';

        case 5:
          return '[v pátek v] LT';

        case 6:
          return '[v sobotu v] LT';
      }
    },
    lastDay: '[včera v] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[minulou neděli v] LT';

        case 1:
        case 2:
          return '[minulé] dddd [v] LT';

        case 3:
          return '[minulou středu v] LT';

        case 4:
        case 5:
          return '[minulý] dddd [v] LT';

        case 6:
          return '[minulou sobotu v] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'před %s',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/cv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/cv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('cv', {
  months: 'кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав'.split('_'),
  monthsShort: 'кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш'.split('_'),
  weekdays: 'вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун'.split('_'),
  weekdaysShort: 'выр_тун_ытл_юн_кӗҫ_эрн_шӑм'.split('_'),
  weekdaysMin: 'вр_тн_ыт_юн_кҫ_эр_шм'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD-MM-YYYY',
    LL: 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]',
    LLL: 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm',
    LLLL: 'dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm'
  },
  calendar: {
    sameDay: '[Паян] LT [сехетре]',
    nextDay: '[Ыран] LT [сехетре]',
    lastDay: '[Ӗнер] LT [сехетре]',
    nextWeek: '[Ҫитес] dddd LT [сехетре]',
    lastWeek: '[Иртнӗ] dddd LT [сехетре]',
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(output) {
      var affix = /сехет$/i.exec(output) ? 'рен' : /ҫул$/i.exec(output) ? 'тан' : 'ран';
      return output + affix;
    },
    past: '%s каялла',
    s: 'пӗр-ик ҫеккунт',
    ss: '%d ҫеккунт',
    m: 'пӗр минут',
    mm: '%d минут',
    h: 'пӗр сехет',
    hh: '%d сехет',
    d: 'пӗр кун',
    dd: '%d кун',
    M: 'пӗр уйӑх',
    MM: '%d уйӑх',
    y: 'пӗр ҫул',
    yy: '%d ҫул'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-мӗш/,
  ordinal: '%d-мӗш',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/cy.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/cy.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('cy', {
  months: 'Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr'.split('_'),
  monthsShort: 'Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag'.split('_'),
  weekdays: 'Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn'.split('_'),
  weekdaysShort: 'Sul_Llun_Maw_Mer_Iau_Gwe_Sad'.split('_'),
  weekdaysMin: 'Su_Ll_Ma_Me_Ia_Gw_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Heddiw am] LT',
    nextDay: '[Yfory am] LT',
    nextWeek: 'dddd [am] LT',
    lastDay: '[Ddoe am] LT',
    lastWeek: 'dddd [diwethaf am] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'mewn %s',
    past: '%s yn ôl',
    s: 'ychydig eiliadau',
    ss: '%d eiliad',
    m: 'munud',
    mm: '%d munud',
    h: 'awr',
    hh: '%d awr',
    d: 'diwrnod',
    dd: '%d diwrnod',
    M: 'mis',
    MM: '%d mis',
    y: 'blwyddyn',
    yy: '%d flynedd'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,
  ordinal: function ordinal(number) {
    var b = number,
        output = '',
        lookup = ['', 'af', 'il', 'ydd', 'ydd', 'ed', 'ed', 'ed', 'fed', 'fed', 'fed', 'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'fed'];

    if (b > 20) {
      if (b === 40 || b === 50 || b === 60 || b === 80 || b === 100) {
        output = 'fed';
      } else {
        output = 'ain';
      }
    } else if (b > 0) {
      output = lookup[b];
    }

    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/da.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/da.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('da', {
  months: 'januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december'.split('_'),
  monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
  weekdays: 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
  weekdaysShort: 'søn_man_tir_ons_tor_fre_lør'.split('_'),
  weekdaysMin: 'sø_ma_ti_on_to_fr_lø'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd [d.] D. MMMM YYYY [kl.] HH:mm'
  },
  calendar: {
    sameDay: '[i dag kl.] LT',
    nextDay: '[i morgen kl.] LT',
    nextWeek: 'på dddd [kl.] LT',
    lastDay: '[i går kl.] LT',
    lastWeek: '[i] dddd[s kl.] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: '%s siden',
    s: 'få sekunder',
    ss: '%d sekunder',
    m: 'et minut',
    mm: '%d minutter',
    h: 'en time',
    hh: '%d timer',
    d: 'en dag',
    dd: '%d dage',
    M: 'en måned',
    MM: '%d måneder',
    y: 'et år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/de-at.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/de-at.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eine Minute', 'einer Minute'],
    h: ['eine Stunde', 'einer Stunde'],
    d: ['ein Tag', 'einem Tag'],
    dd: [number + ' Tage', number + ' Tagen'],
    w: ['eine Woche', 'einer Woche'],
    M: ['ein Monat', 'einem Monat'],
    MM: [number + ' Monate', number + ' Monaten'],
    y: ['ein Jahr', 'einem Jahr'],
    yy: [number + ' Jahre', number + ' Jahren']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('de-at', {
  months: 'Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
  weekdaysShort: 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
  weekdaysMin: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd, D. MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[heute um] LT [Uhr]',
    sameElse: 'L',
    nextDay: '[morgen um] LT [Uhr]',
    nextWeek: 'dddd [um] LT [Uhr]',
    lastDay: '[gestern um] LT [Uhr]',
    lastWeek: '[letzten] dddd [um] LT [Uhr]'
  },
  relativeTime: {
    future: 'in %s',
    past: 'vor %s',
    s: 'ein paar Sekunden',
    ss: '%d Sekunden',
    m: processRelativeTime,
    mm: '%d Minuten',
    h: processRelativeTime,
    hh: '%d Stunden',
    d: processRelativeTime,
    dd: processRelativeTime,
    w: processRelativeTime,
    ww: '%d Wochen',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/de-ch.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/de-ch.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eine Minute', 'einer Minute'],
    h: ['eine Stunde', 'einer Stunde'],
    d: ['ein Tag', 'einem Tag'],
    dd: [number + ' Tage', number + ' Tagen'],
    w: ['eine Woche', 'einer Woche'],
    M: ['ein Monat', 'einem Monat'],
    MM: [number + ' Monate', number + ' Monaten'],
    y: ['ein Jahr', 'einem Jahr'],
    yy: [number + ' Jahre', number + ' Jahren']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('de-ch', {
  months: 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
  weekdaysShort: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysMin: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd, D. MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[heute um] LT [Uhr]',
    sameElse: 'L',
    nextDay: '[morgen um] LT [Uhr]',
    nextWeek: 'dddd [um] LT [Uhr]',
    lastDay: '[gestern um] LT [Uhr]',
    lastWeek: '[letzten] dddd [um] LT [Uhr]'
  },
  relativeTime: {
    future: 'in %s',
    past: 'vor %s',
    s: 'ein paar Sekunden',
    ss: '%d Sekunden',
    m: processRelativeTime,
    mm: '%d Minuten',
    h: processRelativeTime,
    hh: '%d Stunden',
    d: processRelativeTime,
    dd: processRelativeTime,
    w: processRelativeTime,
    ww: '%d Wochen',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/de.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/de.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eine Minute', 'einer Minute'],
    h: ['eine Stunde', 'einer Stunde'],
    d: ['ein Tag', 'einem Tag'],
    dd: [number + ' Tage', number + ' Tagen'],
    w: ['eine Woche', 'einer Woche'],
    M: ['ein Monat', 'einem Monat'],
    MM: [number + ' Monate', number + ' Monaten'],
    y: ['ein Jahr', 'einem Jahr'],
    yy: [number + ' Jahre', number + ' Jahren']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('de', {
  months: 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
  weekdaysShort: 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
  weekdaysMin: 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY HH:mm',
    LLLL: 'dddd, D. MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[heute um] LT [Uhr]',
    sameElse: 'L',
    nextDay: '[morgen um] LT [Uhr]',
    nextWeek: 'dddd [um] LT [Uhr]',
    lastDay: '[gestern um] LT [Uhr]',
    lastWeek: '[letzten] dddd [um] LT [Uhr]'
  },
  relativeTime: {
    future: 'in %s',
    past: 'vor %s',
    s: 'ein paar Sekunden',
    ss: '%d Sekunden',
    m: processRelativeTime,
    mm: '%d Minuten',
    h: processRelativeTime,
    hh: '%d Stunden',
    d: processRelativeTime,
    dd: processRelativeTime,
    w: processRelativeTime,
    ww: '%d Wochen',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/dv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/dv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['ޖެނުއަރީ', 'ފެބްރުއަރީ', 'މާރިޗު', 'އޭޕްރީލު', 'މޭ', 'ޖޫން', 'ޖުލައި', 'އޯގަސްޓު', 'ސެޕްޓެމްބަރު', 'އޮކްޓޯބަރު', 'ނޮވެމްބަރު', 'ޑިސެމްބަރު'],
    weekdays = ['އާދިއްތަ', 'ހޯމަ', 'އަންގާރަ', 'ބުދަ', 'ބުރާސްފަތި', 'ހުކުރު', 'ހޮނިހިރު'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('dv', {
  months: months,
  monthsShort: months,
  weekdays: weekdays,
  weekdaysShort: weekdays,
  weekdaysMin: 'އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'D/M/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /މކ|މފ/,
  isPM: function isPM(input) {
    return 'މފ' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'މކ';
    } else {
      return 'މފ';
    }
  },
  calendar: {
    sameDay: '[މިއަދު] LT',
    nextDay: '[މާދަމާ] LT',
    nextWeek: 'dddd LT',
    lastDay: '[އިއްޔެ] LT',
    lastWeek: '[ފާއިތުވި] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ތެރޭގައި %s',
    past: 'ކުރިން %s',
    s: 'ސިކުންތުކޮޅެއް',
    ss: 'd% ސިކުންތު',
    m: 'މިނިޓެއް',
    mm: 'މިނިޓު %d',
    h: 'ގަޑިއިރެއް',
    hh: 'ގަޑިއިރު %d',
    d: 'ދުވަހެއް',
    dd: 'ދުވަސް %d',
    M: 'މަހެއް',
    MM: 'މަސް %d',
    y: 'އަހަރެއް',
    yy: 'އަހަރު %d'
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 7,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/el.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/el.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function isFunction(input) {
  return typeof Function !== 'undefined' && input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('el', {
  monthsNominativeEl: 'Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος'.split('_'),
  monthsGenitiveEl: 'Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου'.split('_'),
  months: function months(momentToFormat, format) {
    if (!momentToFormat) {
      return this._monthsNominativeEl;
    } else if (typeof format === 'string' && /D/.test(format.substring(0, format.indexOf('MMMM')))) {
      return this._monthsGenitiveEl[momentToFormat.month()];
    } else {
      return this._monthsNominativeEl[momentToFormat.month()];
    }
  },
  monthsShort: 'Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ'.split('_'),
  weekdays: 'Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο'.split('_'),
  weekdaysShort: 'Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ'.split('_'),
  weekdaysMin: 'Κυ_Δε_Τρ_Τε_Πε_Πα_Σα'.split('_'),
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? 'μμ' : 'ΜΜ';
    } else {
      return isLower ? 'πμ' : 'ΠΜ';
    }
  },
  isPM: function isPM(input) {
    return (input + '').toLowerCase()[0] === 'μ';
  },
  meridiemParse: /[ΠΜ]\.?Μ?\.?/i,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendarEl: {
    sameDay: '[Σήμερα {}] LT',
    nextDay: '[Αύριο {}] LT',
    nextWeek: 'dddd [{}] LT',
    lastDay: '[Χθες {}] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 6:
          return '[το προηγούμενο] dddd [{}] LT';

        default:
          return '[την προηγούμενη] dddd [{}] LT';
      }
    },
    sameElse: 'L'
  },
  calendar: function calendar(key, mom) {
    var output = this._calendarEl[key],
        hours = mom && mom.hours();

    if (isFunction(output)) {
      output = output.apply(mom);
    }

    return output.replace('{}', hours % 12 === 1 ? 'στη' : 'στις');
  },
  relativeTime: {
    future: 'σε %s',
    past: '%s πριν',
    s: 'λίγα δευτερόλεπτα',
    ss: '%d δευτερόλεπτα',
    m: 'ένα λεπτό',
    mm: '%d λεπτά',
    h: 'μία ώρα',
    hh: '%d ώρες',
    d: 'μία μέρα',
    dd: '%d μέρες',
    M: 'ένας μήνας',
    MM: '%d μήνες',
    y: 'ένας χρόνος',
    yy: '%d χρόνια'
  },
  dayOfMonthOrdinalParse: /\d{1,2}η/,
  ordinal: '%dη',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-au.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-au.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-au', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 0,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-ca.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-ca.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-ca', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'YYYY-MM-DD',
    LL: 'MMMM D, YYYY',
    LLL: 'MMMM D, YYYY h:mm A',
    LLLL: 'dddd, MMMM D, YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-gb.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-gb.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-gb', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-ie.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-ie.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-ie', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-il.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-il.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-il', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-in.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-in.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-in', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-nz.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-nz.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-nz', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/en-sg.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/en-sg.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('en-sg', {
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
  weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Today at] LT',
    nextDay: '[Tomorrow at] LT',
    nextWeek: 'dddd [at] LT',
    lastDay: '[Yesterday at] LT',
    lastWeek: '[Last] dddd [at] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'in %s',
    past: '%s ago',
    s: 'a few seconds',
    ss: '%d seconds',
    m: 'a minute',
    mm: '%d minutes',
    h: 'an hour',
    hh: '%d hours',
    d: 'a day',
    dd: '%d days',
    M: 'a month',
    MM: '%d months',
    y: 'a year',
    yy: '%d years'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/eo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/eo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('eo', {
  months: 'januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro'.split('_'),
  monthsShort: 'jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec'.split('_'),
  weekdays: 'dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato'.split('_'),
  weekdaysShort: 'dim_lun_mard_merk_ĵaŭ_ven_sab'.split('_'),
  weekdaysMin: 'di_lu_ma_me_ĵa_ve_sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: '[la] D[-an de] MMMM, YYYY',
    LLL: '[la] D[-an de] MMMM, YYYY HH:mm',
    LLLL: 'dddd[n], [la] D[-an de] MMMM, YYYY HH:mm',
    llll: 'ddd, [la] D[-an de] MMM, YYYY HH:mm'
  },
  meridiemParse: /[ap]\.t\.m/i,
  isPM: function isPM(input) {
    return input.charAt(0).toLowerCase() === 'p';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? 'p.t.m.' : 'P.T.M.';
    } else {
      return isLower ? 'a.t.m.' : 'A.T.M.';
    }
  },
  calendar: {
    sameDay: '[Hodiaŭ je] LT',
    nextDay: '[Morgaŭ je] LT',
    nextWeek: 'dddd[n je] LT',
    lastDay: '[Hieraŭ je] LT',
    lastWeek: '[pasintan] dddd[n je] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'post %s',
    past: 'antaŭ %s',
    s: 'kelkaj sekundoj',
    ss: '%d sekundoj',
    m: 'unu minuto',
    mm: '%d minutoj',
    h: 'unu horo',
    hh: '%d horoj',
    d: 'unu tago',
    dd: '%d tagoj',
    M: 'unu monato',
    MM: '%d monatoj',
    y: 'unu jaro',
    yy: '%d jaroj'
  },
  dayOfMonthOrdinalParse: /\d{1,2}a/,
  ordinal: '%da',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es-do.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/es-do.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es-do', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY h:mm A',
    LLLL: 'dddd, D [de] MMMM [de] YYYY h:mm A'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es-mx.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/es-mx.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es-mx', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY H:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 0,
    doy: 4
  },
  invalidDate: 'Fecha inválida'
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es-us.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/es-us.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es-us', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'MM/DD/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY h:mm A',
    LLLL: 'dddd, D [de] MMMM [de] YYYY h:mm A'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/es.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/es.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_'),
    _monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),
    monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i],
    monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('es', {
  months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortDot;
    } else if (/-MMM-/.test(format)) {
      return _monthsShort[m.month()];
    } else {
      return monthsShortDot[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
  monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY H:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastDay: function lastDay() {
      return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[el] dddd [pasado a la' + (this.hours() !== 1 ? 's' : '') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'en %s',
    past: 'hace %s',
    s: 'unos segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'una hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    w: 'una semana',
    ww: '%d semanas',
    M: 'un mes',
    MM: '%d meses',
    y: 'un año',
    yy: '%d años'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  },
  invalidDate: 'Fecha inválida'
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/et.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/et.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['mõne sekundi', 'mõni sekund', 'paar sekundit'],
    ss: [number + 'sekundi', number + 'sekundit'],
    m: ['ühe minuti', 'üks minut'],
    mm: [number + ' minuti', number + ' minutit'],
    h: ['ühe tunni', 'tund aega', 'üks tund'],
    hh: [number + ' tunni', number + ' tundi'],
    d: ['ühe päeva', 'üks päev'],
    M: ['kuu aja', 'kuu aega', 'üks kuu'],
    MM: [number + ' kuu', number + ' kuud'],
    y: ['ühe aasta', 'aasta', 'üks aasta'],
    yy: [number + ' aasta', number + ' aastat']
  };

  if (withoutSuffix) {
    return format[key][2] ? format[key][2] : format[key][1];
  }

  return isFuture ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('et', {
  months: 'jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember'.split('_'),
  monthsShort: 'jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets'.split('_'),
  weekdays: 'pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev'.split('_'),
  weekdaysShort: 'P_E_T_K_N_R_L'.split('_'),
  weekdaysMin: 'P_E_T_K_N_R_L'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[Täna,] LT',
    nextDay: '[Homme,] LT',
    nextWeek: '[Järgmine] dddd LT',
    lastDay: '[Eile,] LT',
    lastWeek: '[Eelmine] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s pärast',
    past: '%s tagasi',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: '%d päeva',
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/eu.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/eu.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('eu', {
  months: 'urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua'.split('_'),
  monthsShort: 'urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.'.split('_'),
  monthsParseExact: true,
  weekdays: 'igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata'.split('_'),
  weekdaysShort: 'ig._al._ar._az._og._ol._lr.'.split('_'),
  weekdaysMin: 'ig_al_ar_az_og_ol_lr'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY[ko] MMMM[ren] D[a]',
    LLL: 'YYYY[ko] MMMM[ren] D[a] HH:mm',
    LLLL: 'dddd, YYYY[ko] MMMM[ren] D[a] HH:mm',
    l: 'YYYY-M-D',
    ll: 'YYYY[ko] MMM D[a]',
    lll: 'YYYY[ko] MMM D[a] HH:mm',
    llll: 'ddd, YYYY[ko] MMM D[a] HH:mm'
  },
  calendar: {
    sameDay: '[gaur] LT[etan]',
    nextDay: '[bihar] LT[etan]',
    nextWeek: 'dddd LT[etan]',
    lastDay: '[atzo] LT[etan]',
    lastWeek: '[aurreko] dddd LT[etan]',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s barru',
    past: 'duela %s',
    s: 'segundo batzuk',
    ss: '%d segundo',
    m: 'minutu bat',
    mm: '%d minutu',
    h: 'ordu bat',
    hh: '%d ordu',
    d: 'egun bat',
    dd: '%d egun',
    M: 'hilabete bat',
    MM: '%d hilabete',
    y: 'urte bat',
    yy: '%d urte'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fa.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fa.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '۱',
  2: '۲',
  3: '۳',
  4: '۴',
  5: '۵',
  6: '۶',
  7: '۷',
  8: '۸',
  9: '۹',
  0: '۰'
},
    numberMap = {
  '۱': '1',
  '۲': '2',
  '۳': '3',
  '۴': '4',
  '۵': '5',
  '۶': '6',
  '۷': '7',
  '۸': '8',
  '۹': '9',
  '۰': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fa', {
  months: 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
  monthsShort: 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
  weekdays: "\u06CC\u06A9\u200C\u0634\u0646\u0628\u0647_\u062F\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200C\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067E\u0646\u062C\u200C\u0634\u0646\u0628\u0647_\u062C\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split('_'),
  weekdaysShort: "\u06CC\u06A9\u200C\u0634\u0646\u0628\u0647_\u062F\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200C\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067E\u0646\u062C\u200C\u0634\u0646\u0628\u0647_\u062C\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split('_'),
  weekdaysMin: 'ی_د_س_چ_پ_ج_ش'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  meridiemParse: /قبل از ظهر|بعد از ظهر/,
  isPM: function isPM(input) {
    return /بعد از ظهر/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'قبل از ظهر';
    } else {
      return 'بعد از ظهر';
    }
  },
  calendar: {
    sameDay: '[امروز ساعت] LT',
    nextDay: '[فردا ساعت] LT',
    nextWeek: 'dddd [ساعت] LT',
    lastDay: '[دیروز ساعت] LT',
    lastWeek: 'dddd [پیش] [ساعت] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'در %s',
    past: '%s پیش',
    s: 'چند ثانیه',
    ss: '%d ثانیه',
    m: 'یک دقیقه',
    mm: '%d دقیقه',
    h: 'یک ساعت',
    hh: '%d ساعت',
    d: 'یک روز',
    dd: '%d روز',
    M: 'یک ماه',
    MM: '%d ماه',
    y: 'یک سال',
    yy: '%d سال'
  },
  preparse: function preparse(string) {
    return string.replace(/[۰-۹]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  dayOfMonthOrdinalParse: /\d{1,2}م/,
  ordinal: '%dم',
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var numbersPast = 'nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän'.split(' '),
    numbersFuture = ['nolla', 'yhden', 'kahden', 'kolmen', 'neljän', 'viiden', 'kuuden', numbersPast[7], numbersPast[8], numbersPast[9]];

function translate(number, withoutSuffix, key, isFuture) {
  var result = '';

  switch (key) {
    case 's':
      return isFuture ? 'muutaman sekunnin' : 'muutama sekunti';

    case 'ss':
      result = isFuture ? 'sekunnin' : 'sekuntia';
      break;

    case 'm':
      return isFuture ? 'minuutin' : 'minuutti';

    case 'mm':
      result = isFuture ? 'minuutin' : 'minuuttia';
      break;

    case 'h':
      return isFuture ? 'tunnin' : 'tunti';

    case 'hh':
      result = isFuture ? 'tunnin' : 'tuntia';
      break;

    case 'd':
      return isFuture ? 'päivän' : 'päivä';

    case 'dd':
      result = isFuture ? 'päivän' : 'päivää';
      break;

    case 'M':
      return isFuture ? 'kuukauden' : 'kuukausi';

    case 'MM':
      result = isFuture ? 'kuukauden' : 'kuukautta';
      break;

    case 'y':
      return isFuture ? 'vuoden' : 'vuosi';

    case 'yy':
      result = isFuture ? 'vuoden' : 'vuotta';
      break;
  }

  result = verbalNumber(number, isFuture) + ' ' + result;
  return result;
}

function verbalNumber(number, isFuture) {
  return number < 10 ? isFuture ? numbersFuture[number] : numbersPast[number] : number;
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fi', {
  months: 'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),
  monthsShort: 'tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu'.split('_'),
  weekdays: 'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),
  weekdaysShort: 'su_ma_ti_ke_to_pe_la'.split('_'),
  weekdaysMin: 'su_ma_ti_ke_to_pe_la'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD.MM.YYYY',
    LL: 'Do MMMM[ta] YYYY',
    LLL: 'Do MMMM[ta] YYYY, [klo] HH.mm',
    LLLL: 'dddd, Do MMMM[ta] YYYY, [klo] HH.mm',
    l: 'D.M.YYYY',
    ll: 'Do MMM YYYY',
    lll: 'Do MMM YYYY, [klo] HH.mm',
    llll: 'ddd, Do MMM YYYY, [klo] HH.mm'
  },
  calendar: {
    sameDay: '[tänään] [klo] LT',
    nextDay: '[huomenna] [klo] LT',
    nextWeek: 'dddd [klo] LT',
    lastDay: '[eilen] [klo] LT',
    lastWeek: '[viime] dddd[na] [klo] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s päästä',
    past: '%s sitten',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fil.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/fil.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fil', {
  months: 'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),
  monthsShort: 'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),
  weekdays: 'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),
  weekdaysShort: 'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),
  weekdaysMin: 'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'MM/D/YYYY',
    LL: 'MMMM D, YYYY',
    LLL: 'MMMM D, YYYY HH:mm',
    LLLL: 'dddd, MMMM DD, YYYY HH:mm'
  },
  calendar: {
    sameDay: 'LT [ngayong araw]',
    nextDay: '[Bukas ng] LT',
    nextWeek: 'LT [sa susunod na] dddd',
    lastDay: 'LT [kahapon]',
    lastWeek: 'LT [noong nakaraang] dddd',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'sa loob ng %s',
    past: '%s ang nakalipas',
    s: 'ilang segundo',
    ss: '%d segundo',
    m: 'isang minuto',
    mm: '%d minuto',
    h: 'isang oras',
    hh: '%d oras',
    d: 'isang araw',
    dd: '%d araw',
    M: 'isang buwan',
    MM: '%d buwan',
    y: 'isang taon',
    yy: '%d taon'
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: function ordinal(number) {
    return number;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fo', {
  months: 'januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
  monthsShort: 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
  weekdays: 'sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur'.split('_'),
  weekdaysShort: 'sun_mán_týs_mik_hós_frí_ley'.split('_'),
  weekdaysMin: 'su_má_tý_mi_hó_fr_le'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D. MMMM, YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Í dag kl.] LT',
    nextDay: '[Í morgin kl.] LT',
    nextWeek: 'dddd [kl.] LT',
    lastDay: '[Í gjár kl.] LT',
    lastWeek: '[síðstu] dddd [kl] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'um %s',
    past: '%s síðani',
    s: 'fá sekund',
    ss: '%d sekundir',
    m: 'ein minuttur',
    mm: '%d minuttir',
    h: 'ein tími',
    hh: '%d tímar',
    d: 'ein dagur',
    dd: '%d dagar',
    M: 'ein mánaður',
    MM: '%d mánaðir',
    y: 'eitt ár',
    yy: '%d ár'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fr-ca.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/fr-ca.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fr-ca', {
  months: 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
  monthsShort: 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
  monthsParseExact: true,
  weekdays: 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
  weekdaysShort: 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
  weekdaysMin: 'di_lu_ma_me_je_ve_sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Aujourd’hui à] LT',
    nextDay: '[Demain à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[Hier à] LT',
    lastWeek: 'dddd [dernier à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dans %s',
    past: 'il y a %s',
    s: 'quelques secondes',
    ss: '%d secondes',
    m: 'une minute',
    mm: '%d minutes',
    h: 'une heure',
    hh: '%d heures',
    d: 'un jour',
    dd: '%d jours',
    M: 'un mois',
    MM: '%d mois',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      default:
      case 'M':
      case 'Q':
      case 'D':
      case 'DDD':
      case 'd':
        return number + (number === 1 ? 'er' : 'e');

      case 'w':
      case 'W':
        return number + (number === 1 ? 're' : 'e');
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fr-ch.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/fr-ch.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fr-ch', {
  months: 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
  monthsShort: 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
  monthsParseExact: true,
  weekdays: 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
  weekdaysShort: 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
  weekdaysMin: 'di_lu_ma_me_je_ve_sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Aujourd’hui à] LT',
    nextDay: '[Demain à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[Hier à] LT',
    lastWeek: 'dddd [dernier à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dans %s',
    past: 'il y a %s',
    s: 'quelques secondes',
    ss: '%d secondes',
    m: 'une minute',
    mm: '%d minutes',
    h: 'une heure',
    hh: '%d heures',
    d: 'un jour',
    dd: '%d jours',
    M: 'un mois',
    MM: '%d mois',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      default:
      case 'M':
      case 'Q':
      case 'D':
      case 'DDD':
      case 'd':
        return number + (number === 1 ? 'er' : 'e');

      case 'w':
      case 'W':
        return number + (number === 1 ? 're' : 'e');
    }
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsStrictRegex = /^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,
    monthsShortStrictRegex = /(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,
    monthsRegex = /(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,
    monthsParse = [/^janv/i, /^févr/i, /^mars/i, /^avr/i, /^mai/i, /^juin/i, /^juil/i, /^août/i, /^sept/i, /^oct/i, /^nov/i, /^déc/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fr', {
  months: 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
  monthsShort: 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: monthsStrictRegex,
  monthsShortStrictRegex: monthsShortStrictRegex,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
  weekdaysShort: 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
  weekdaysMin: 'di_lu_ma_me_je_ve_sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Aujourd’hui à] LT',
    nextDay: '[Demain à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[Hier à] LT',
    lastWeek: 'dddd [dernier à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dans %s',
    past: 'il y a %s',
    s: 'quelques secondes',
    ss: '%d secondes',
    m: 'une minute',
    mm: '%d minutes',
    h: 'une heure',
    hh: '%d heures',
    d: 'un jour',
    dd: '%d jours',
    w: 'une semaine',
    ww: '%d semaines',
    M: 'un mois',
    MM: '%d mois',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er|)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'D':
        return number + (number === 1 ? 'er' : '');

      default:
      case 'M':
      case 'Q':
      case 'DDD':
      case 'd':
        return number + (number === 1 ? 'er' : 'e');

      case 'w':
      case 'W':
        return number + (number === 1 ? 're' : 'e');
    }
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/fy.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/fy.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsShortWithDots = 'jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.'.split('_'),
    monthsShortWithoutDots = 'jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_');
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('fy', {
  months: 'jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortWithDots;
    } else if (/-MMM-/.test(format)) {
      return monthsShortWithoutDots[m.month()];
    } else {
      return monthsShortWithDots[m.month()];
    }
  },
  monthsParseExact: true,
  weekdays: 'snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon'.split('_'),
  weekdaysShort: 'si._mo._ti._wo._to._fr._so.'.split('_'),
  weekdaysMin: 'Si_Mo_Ti_Wo_To_Fr_So'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[hjoed om] LT',
    nextDay: '[moarn om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[juster om] LT',
    lastWeek: '[ôfrûne] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'oer %s',
    past: '%s lyn',
    s: 'in pear sekonden',
    ss: '%d sekonden',
    m: 'ien minút',
    mm: '%d minuten',
    h: 'ien oere',
    hh: '%d oeren',
    d: 'ien dei',
    dd: '%d dagen',
    M: 'ien moanne',
    MM: '%d moannen',
    y: 'ien jier',
    yy: '%d jierren'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ga.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ga.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['Eanáir', 'Feabhra', 'Márta', 'Aibreán', 'Bealtaine', 'Meitheamh', 'Iúil', 'Lúnasa', 'Meán Fómhair', 'Deireadh Fómhair', 'Samhain', 'Nollaig'],
    monthsShort = ['Ean', 'Feabh', 'Márt', 'Aib', 'Beal', 'Meith', 'Iúil', 'Lún', 'M.F.', 'D.F.', 'Samh', 'Noll'],
    weekdays = ['Dé Domhnaigh', 'Dé Luain', 'Dé Máirt', 'Dé Céadaoin', 'Déardaoin', 'Dé hAoine', 'Dé Sathairn'],
    weekdaysShort = ['Domh', 'Luan', 'Máirt', 'Céad', 'Déar', 'Aoine', 'Sath'],
    weekdaysMin = ['Do', 'Lu', 'Má', 'Cé', 'Dé', 'A', 'Sa'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ga', {
  months: months,
  monthsShort: monthsShort,
  monthsParseExact: true,
  weekdays: weekdays,
  weekdaysShort: weekdaysShort,
  weekdaysMin: weekdaysMin,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Inniu ag] LT',
    nextDay: '[Amárach ag] LT',
    nextWeek: 'dddd [ag] LT',
    lastDay: '[Inné ag] LT',
    lastWeek: 'dddd [seo caite] [ag] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'i %s',
    past: '%s ó shin',
    s: 'cúpla soicind',
    ss: '%d soicind',
    m: 'nóiméad',
    mm: '%d nóiméad',
    h: 'uair an chloig',
    hh: '%d uair an chloig',
    d: 'lá',
    dd: '%d lá',
    M: 'mí',
    MM: '%d míonna',
    y: 'bliain',
    yy: '%d bliain'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(d|na|mh)/,
  ordinal: function ordinal(number) {
    var output = number === 1 ? 'd' : number % 10 === 2 ? 'na' : 'mh';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gd.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/gd.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['Am Faoilleach', 'An Gearran', 'Am Màrt', 'An Giblean', 'An Cèitean', 'An t-Ògmhios', 'An t-Iuchar', 'An Lùnastal', 'An t-Sultain', 'An Dàmhair', 'An t-Samhain', 'An Dùbhlachd'],
    monthsShort = ['Faoi', 'Gear', 'Màrt', 'Gibl', 'Cèit', 'Ògmh', 'Iuch', 'Lùn', 'Sult', 'Dàmh', 'Samh', 'Dùbh'],
    weekdays = ['Didòmhnaich', 'Diluain', 'Dimàirt', 'Diciadain', 'Diardaoin', 'Dihaoine', 'Disathairne'],
    weekdaysShort = ['Did', 'Dil', 'Dim', 'Dic', 'Dia', 'Dih', 'Dis'],
    weekdaysMin = ['Dò', 'Lu', 'Mà', 'Ci', 'Ar', 'Ha', 'Sa'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gd', {
  months: months,
  monthsShort: monthsShort,
  monthsParseExact: true,
  weekdays: weekdays,
  weekdaysShort: weekdaysShort,
  weekdaysMin: weekdaysMin,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[An-diugh aig] LT',
    nextDay: '[A-màireach aig] LT',
    nextWeek: 'dddd [aig] LT',
    lastDay: '[An-dè aig] LT',
    lastWeek: 'dddd [seo chaidh] [aig] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ann an %s',
    past: 'bho chionn %s',
    s: 'beagan diogan',
    ss: '%d diogan',
    m: 'mionaid',
    mm: '%d mionaidean',
    h: 'uair',
    hh: '%d uairean',
    d: 'latha',
    dd: '%d latha',
    M: 'mìos',
    MM: '%d mìosan',
    y: 'bliadhna',
    yy: '%d bliadhna'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(d|na|mh)/,
  ordinal: function ordinal(number) {
    var output = number === 1 ? 'd' : number % 10 === 2 ? 'na' : 'mh';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/gl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gl', {
  months: 'xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro'.split('_'),
  monthsShort: 'xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'domingo_luns_martes_mércores_xoves_venres_sábado'.split('_'),
  weekdaysShort: 'dom._lun._mar._mér._xov._ven._sáb.'.split('_'),
  weekdaysMin: 'do_lu_ma_mé_xo_ve_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY H:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[hoxe ' + (this.hours() !== 1 ? 'ás' : 'á') + '] LT';
    },
    nextDay: function nextDay() {
      return '[mañá ' + (this.hours() !== 1 ? 'ás' : 'á') + '] LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [' + (this.hours() !== 1 ? 'ás' : 'a') + '] LT';
    },
    lastDay: function lastDay() {
      return '[onte ' + (this.hours() !== 1 ? 'á' : 'a') + '] LT';
    },
    lastWeek: function lastWeek() {
      return '[o] dddd [pasado ' + (this.hours() !== 1 ? 'ás' : 'a') + '] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(str) {
      if (str.indexOf('un') === 0) {
        return 'n' + str;
      }

      return 'en ' + str;
    },
    past: 'hai %s',
    s: 'uns segundos',
    ss: '%d segundos',
    m: 'un minuto',
    mm: '%d minutos',
    h: 'unha hora',
    hh: '%d horas',
    d: 'un día',
    dd: '%d días',
    M: 'un mes',
    MM: '%d meses',
    y: 'un ano',
    yy: '%d anos'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gom-deva.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/gom-deva.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['थोडया सॅकंडांनी', 'थोडे सॅकंड'],
    ss: [number + ' सॅकंडांनी', number + ' सॅकंड'],
    m: ['एका मिणटान', 'एक मिनूट'],
    mm: [number + ' मिणटांनी', number + ' मिणटां'],
    h: ['एका वरान', 'एक वर'],
    hh: [number + ' वरांनी', number + ' वरां'],
    d: ['एका दिसान', 'एक दीस'],
    dd: [number + ' दिसांनी', number + ' दीस'],
    M: ['एका म्हयन्यान', 'एक म्हयनो'],
    MM: [number + ' म्हयन्यानी', number + ' म्हयने'],
    y: ['एका वर्सान', 'एक वर्स'],
    yy: [number + ' वर्सांनी', number + ' वर्सां']
  };
  return isFuture ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gom-deva', {
  months: {
    standalone: 'जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर'.split('_'),
    format: 'जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या'.split('_'),
    isFormat: /MMMM(\s)+D[oD]?/
  },
  monthsShort: 'जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.'.split('_'),
  monthsParseExact: true,
  weekdays: 'आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार'.split('_'),
  weekdaysShort: 'आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.'.split('_'),
  weekdaysMin: 'आ_सो_मं_बु_ब्रे_सु_शे'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'A h:mm [वाजतां]',
    LTS: 'A h:mm:ss [वाजतां]',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY A h:mm [वाजतां]',
    LLLL: 'dddd, MMMM Do, YYYY, A h:mm [वाजतां]',
    llll: 'ddd, D MMM YYYY, A h:mm [वाजतां]'
  },
  calendar: {
    sameDay: '[आयज] LT',
    nextDay: '[फाल्यां] LT',
    nextWeek: '[फुडलो] dddd[,] LT',
    lastDay: '[काल] LT',
    lastWeek: '[फाटलो] dddd[,] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s',
    past: '%s आदीं',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}(वेर)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'D':
        return number + 'वेर';

      default:
      case 'M':
      case 'Q':
      case 'DDD':
      case 'd':
      case 'w':
      case 'W':
        return number;
    }
  },
  week: {
    dow: 0,
    doy: 3
  },
  meridiemParse: /राती|सकाळीं|दनपारां|सांजे/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'राती') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'सकाळीं') {
      return hour;
    } else if (meridiem === 'दनपारां') {
      return hour > 12 ? hour : hour + 12;
    } else if (meridiem === 'सांजे') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'राती';
    } else if (hour < 12) {
      return 'सकाळीं';
    } else if (hour < 16) {
      return 'दनपारां';
    } else if (hour < 20) {
      return 'सांजे';
    } else {
      return 'राती';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gom-latn.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/gom-latn.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['thoddea sekondamni', 'thodde sekond'],
    ss: [number + ' sekondamni', number + ' sekond'],
    m: ['eka mintan', 'ek minut'],
    mm: [number + ' mintamni', number + ' mintam'],
    h: ['eka voran', 'ek vor'],
    hh: [number + ' voramni', number + ' voram'],
    d: ['eka disan', 'ek dis'],
    dd: [number + ' disamni', number + ' dis'],
    M: ['eka mhoinean', 'ek mhoino'],
    MM: [number + ' mhoineamni', number + ' mhoine'],
    y: ['eka vorsan', 'ek voros'],
    yy: [number + ' vorsamni', number + ' vorsam']
  };
  return isFuture ? format[key][0] : format[key][1];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gom-latn', {
  months: {
    standalone: 'Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr'.split('_'),
    format: 'Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea'.split('_'),
    isFormat: /MMMM(\s)+D[oD]?/
  },
  monthsShort: 'Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: "Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split('_'),
  weekdaysShort: 'Ait._Som._Mon._Bud._Bre._Suk._Son.'.split('_'),
  weekdaysMin: 'Ai_Sm_Mo_Bu_Br_Su_Sn'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'A h:mm [vazta]',
    LTS: 'A h:mm:ss [vazta]',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY A h:mm [vazta]',
    LLLL: 'dddd, MMMM Do, YYYY, A h:mm [vazta]',
    llll: 'ddd, D MMM YYYY, A h:mm [vazta]'
  },
  calendar: {
    sameDay: '[Aiz] LT',
    nextDay: '[Faleam] LT',
    nextWeek: '[Fuddlo] dddd[,] LT',
    lastDay: '[Kal] LT',
    lastWeek: '[Fattlo] dddd[,] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s',
    past: '%s adim',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}(er)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'D':
        return number + 'er';

      default:
      case 'M':
      case 'Q':
      case 'DDD':
      case 'd':
      case 'w':
      case 'W':
        return number;
    }
  },
  week: {
    dow: 0,
    doy: 3
  },
  meridiemParse: /rati|sokallim|donparam|sanje/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'rati') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'sokallim') {
      return hour;
    } else if (meridiem === 'donparam') {
      return hour > 12 ? hour : hour + 12;
    } else if (meridiem === 'sanje') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'rati';
    } else if (hour < 12) {
      return 'sokallim';
    } else if (hour < 16) {
      return 'donparam';
    } else if (hour < 20) {
      return 'sanje';
    } else {
      return 'rati';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/gu.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/gu.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '૧',
  2: '૨',
  3: '૩',
  4: '૪',
  5: '૫',
  6: '૬',
  7: '૭',
  8: '૮',
  9: '૯',
  0: '૦'
},
    numberMap = {
  '૧': '1',
  '૨': '2',
  '૩': '3',
  '૪': '4',
  '૫': '5',
  '૬': '6',
  '૭': '7',
  '૮': '8',
  '૯': '9',
  '૦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('gu', {
  months: 'જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર'.split('_'),
  monthsShort: 'જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.'.split('_'),
  monthsParseExact: true,
  weekdays: 'રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર'.split('_'),
  weekdaysShort: 'રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ'.split('_'),
  weekdaysMin: 'ર_સો_મં_બુ_ગુ_શુ_શ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm વાગ્યે',
    LTS: 'A h:mm:ss વાગ્યે',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm વાગ્યે',
    LLLL: 'dddd, D MMMM YYYY, A h:mm વાગ્યે'
  },
  calendar: {
    sameDay: '[આજ] LT',
    nextDay: '[કાલે] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[ગઇકાલે] LT',
    lastWeek: '[પાછલા] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s મા',
    past: '%s પહેલા',
    s: 'અમુક પળો',
    ss: '%d સેકંડ',
    m: 'એક મિનિટ',
    mm: '%d મિનિટ',
    h: 'એક કલાક',
    hh: '%d કલાક',
    d: 'એક દિવસ',
    dd: '%d દિવસ',
    M: 'એક મહિનો',
    MM: '%d મહિનો',
    y: 'એક વર્ષ',
    yy: '%d વર્ષ'
  },
  preparse: function preparse(string) {
    return string.replace(/[૧૨૩૪૫૬૭૮૯૦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /રાત|બપોર|સવાર|સાંજ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'રાત') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'સવાર') {
      return hour;
    } else if (meridiem === 'બપોર') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'સાંજ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'રાત';
    } else if (hour < 10) {
      return 'સવાર';
    } else if (hour < 17) {
      return 'બપોર';
    } else if (hour < 20) {
      return 'સાંજ';
    } else {
      return 'રાત';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/he.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/he.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('he', {
  months: 'ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר'.split('_'),
  monthsShort: 'ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳'.split('_'),
  weekdays: 'ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת'.split('_'),
  weekdaysShort: 'א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳'.split('_'),
  weekdaysMin: 'א_ב_ג_ד_ה_ו_ש'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [ב]MMMM YYYY',
    LLL: 'D [ב]MMMM YYYY HH:mm',
    LLLL: 'dddd, D [ב]MMMM YYYY HH:mm',
    l: 'D/M/YYYY',
    ll: 'D MMM YYYY',
    lll: 'D MMM YYYY HH:mm',
    llll: 'ddd, D MMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[היום ב־]LT',
    nextDay: '[מחר ב־]LT',
    nextWeek: 'dddd [בשעה] LT',
    lastDay: '[אתמול ב־]LT',
    lastWeek: '[ביום] dddd [האחרון בשעה] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'בעוד %s',
    past: 'לפני %s',
    s: 'מספר שניות',
    ss: '%d שניות',
    m: 'דקה',
    mm: '%d דקות',
    h: 'שעה',
    hh: function hh(number) {
      if (number === 2) {
        return 'שעתיים';
      }

      return number + ' שעות';
    },
    d: 'יום',
    dd: function dd(number) {
      if (number === 2) {
        return 'יומיים';
      }

      return number + ' ימים';
    },
    M: 'חודש',
    MM: function MM(number) {
      if (number === 2) {
        return 'חודשיים';
      }

      return number + ' חודשים';
    },
    y: 'שנה',
    yy: function yy(number) {
      if (number === 2) {
        return 'שנתיים';
      } else if (number % 10 === 0 && number !== 10) {
        return number + ' שנה';
      }

      return number + ' שנים';
    }
  },
  meridiemParse: /אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,
  isPM: function isPM(input) {
    return /^(אחה"צ|אחרי הצהריים|בערב)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 5) {
      return 'לפנות בוקר';
    } else if (hour < 10) {
      return 'בבוקר';
    } else if (hour < 12) {
      return isLower ? 'לפנה"צ' : 'לפני הצהריים';
    } else if (hour < 18) {
      return isLower ? 'אחה"צ' : 'אחרי הצהריים';
    } else {
      return 'בערב';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/hi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '१',
  2: '२',
  3: '३',
  4: '४',
  5: '५',
  6: '६',
  7: '७',
  8: '८',
  9: '९',
  0: '०'
},
    numberMap = {
  '१': '1',
  '२': '2',
  '३': '3',
  '४': '4',
  '५': '5',
  '६': '6',
  '७': '7',
  '८': '8',
  '९': '9',
  '०': '0'
},
    monthsParse = [/^जन/i, /^फ़र|फर/i, /^मार्च/i, /^अप्रै/i, /^मई/i, /^जून/i, /^जुल/i, /^अग/i, /^सितं|सित/i, /^अक्टू/i, /^नव|नवं/i, /^दिसं|दिस/i],
    shortMonthsParse = [/^जन/i, /^फ़र/i, /^मार्च/i, /^अप्रै/i, /^मई/i, /^जून/i, /^जुल/i, /^अग/i, /^सित/i, /^अक्टू/i, /^नव/i, /^दिस/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hi', {
  months: {
    format: 'जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर'.split('_'),
    standalone: 'जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर'.split('_')
  },
  monthsShort: 'जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.'.split('_'),
  weekdays: 'रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
  weekdaysShort: 'रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि'.split('_'),
  weekdaysMin: 'र_सो_मं_बु_गु_शु_श'.split('_'),
  longDateFormat: {
    LT: 'A h:mm बजे',
    LTS: 'A h:mm:ss बजे',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm बजे',
    LLLL: 'dddd, D MMMM YYYY, A h:mm बजे'
  },
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: shortMonthsParse,
  monthsRegex: /^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,
  monthsShortRegex: /^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,
  monthsStrictRegex: /^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,
  monthsShortStrictRegex: /^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,
  calendar: {
    sameDay: '[आज] LT',
    nextDay: '[कल] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[कल] LT',
    lastWeek: '[पिछले] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s में',
    past: '%s पहले',
    s: 'कुछ ही क्षण',
    ss: '%d सेकंड',
    m: 'एक मिनट',
    mm: '%d मिनट',
    h: 'एक घंटा',
    hh: '%d घंटे',
    d: 'एक दिन',
    dd: '%d दिन',
    M: 'एक महीने',
    MM: '%d महीने',
    y: 'एक वर्ष',
    yy: '%d वर्ष'
  },
  preparse: function preparse(string) {
    return string.replace(/[१२३४५६७८९०]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /रात|सुबह|दोपहर|शाम/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'रात') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'सुबह') {
      return hour;
    } else if (meridiem === 'दोपहर') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'शाम') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'रात';
    } else if (hour < 10) {
      return 'सुबह';
    } else if (hour < 17) {
      return 'दोपहर';
    } else if (hour < 20) {
      return 'शाम';
    } else {
      return 'रात';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/hr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function translate(number, withoutSuffix, key) {
  var result = number + ' ';

  switch (key) {
    case 'ss':
      if (number === 1) {
        result += 'sekunda';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sekunde';
      } else {
        result += 'sekundi';
      }

      return result;

    case 'm':
      return withoutSuffix ? 'jedna minuta' : 'jedne minute';

    case 'mm':
      if (number === 1) {
        result += 'minuta';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'minute';
      } else {
        result += 'minuta';
      }

      return result;

    case 'h':
      return withoutSuffix ? 'jedan sat' : 'jednog sata';

    case 'hh':
      if (number === 1) {
        result += 'sat';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'sata';
      } else {
        result += 'sati';
      }

      return result;

    case 'dd':
      if (number === 1) {
        result += 'dan';
      } else {
        result += 'dana';
      }

      return result;

    case 'MM':
      if (number === 1) {
        result += 'mjesec';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'mjeseca';
      } else {
        result += 'mjeseci';
      }

      return result;

    case 'yy':
      if (number === 1) {
        result += 'godina';
      } else if (number === 2 || number === 3 || number === 4) {
        result += 'godine';
      } else {
        result += 'godina';
      }

      return result;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hr', {
  months: {
    format: 'siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca'.split('_'),
    standalone: 'siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac'.split('_')
  },
  monthsShort: 'sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'Do MMMM YYYY',
    LLL: 'Do MMMM YYYY H:mm',
    LLLL: 'dddd, Do MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedjelju] [u] LT';

        case 3:
          return '[u] [srijedu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[jučer u] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[prošlu] [nedjelju] [u] LT';

        case 3:
          return '[prošlu] [srijedu] [u] LT';

        case 6:
          return '[prošle] [subote] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[prošli] dddd [u] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'prije %s',
    s: 'par sekundi',
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: 'dan',
    dd: translate,
    M: 'mjesec',
    MM: translate,
    y: 'godinu',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hu.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/hu.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var weekEndings = 'vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton'.split(' ');

function translate(number, withoutSuffix, key, isFuture) {
  var num = number;

  switch (key) {
    case 's':
      return isFuture || withoutSuffix ? 'néhány másodperc' : 'néhány másodperce';

    case 'ss':
      return num + (isFuture || withoutSuffix) ? ' másodperc' : ' másodperce';

    case 'm':
      return 'egy' + (isFuture || withoutSuffix ? ' perc' : ' perce');

    case 'mm':
      return num + (isFuture || withoutSuffix ? ' perc' : ' perce');

    case 'h':
      return 'egy' + (isFuture || withoutSuffix ? ' óra' : ' órája');

    case 'hh':
      return num + (isFuture || withoutSuffix ? ' óra' : ' órája');

    case 'd':
      return 'egy' + (isFuture || withoutSuffix ? ' nap' : ' napja');

    case 'dd':
      return num + (isFuture || withoutSuffix ? ' nap' : ' napja');

    case 'M':
      return 'egy' + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');

    case 'MM':
      return num + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');

    case 'y':
      return 'egy' + (isFuture || withoutSuffix ? ' év' : ' éve');

    case 'yy':
      return num + (isFuture || withoutSuffix ? ' év' : ' éve');
  }

  return '';
}

function week(isFuture) {
  return (isFuture ? '' : '[múlt] ') + '[' + weekEndings[this.day()] + '] LT[-kor]';
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hu', {
  months: 'január_február_március_április_május_június_július_augusztus_szeptember_október_november_december'.split('_'),
  monthsShort: 'jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat'.split('_'),
  weekdaysShort: 'vas_hét_kedd_sze_csüt_pén_szo'.split('_'),
  weekdaysMin: 'v_h_k_sze_cs_p_szo'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'YYYY.MM.DD.',
    LL: 'YYYY. MMMM D.',
    LLL: 'YYYY. MMMM D. H:mm',
    LLLL: 'YYYY. MMMM D., dddd H:mm'
  },
  meridiemParse: /de|du/i,
  isPM: function isPM(input) {
    return input.charAt(1).toLowerCase() === 'u';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower === true ? 'de' : 'DE';
    } else {
      return isLower === true ? 'du' : 'DU';
    }
  },
  calendar: {
    sameDay: '[ma] LT[-kor]',
    nextDay: '[holnap] LT[-kor]',
    nextWeek: function nextWeek() {
      return week.call(this, true);
    },
    lastDay: '[tegnap] LT[-kor]',
    lastWeek: function lastWeek() {
      return week.call(this, false);
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s múlva',
    past: '%s',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/hy-am.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/hy-am.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('hy-am', {
  months: {
    format: 'հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի'.split('_'),
    standalone: 'հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր'.split('_')
  },
  monthsShort: 'հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ'.split('_'),
  weekdays: 'կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ'.split('_'),
  weekdaysShort: 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
  weekdaysMin: 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY թ.',
    LLL: 'D MMMM YYYY թ., HH:mm',
    LLLL: 'dddd, D MMMM YYYY թ., HH:mm'
  },
  calendar: {
    sameDay: '[այսօր] LT',
    nextDay: '[վաղը] LT',
    lastDay: '[երեկ] LT',
    nextWeek: function nextWeek() {
      return 'dddd [օրը ժամը] LT';
    },
    lastWeek: function lastWeek() {
      return '[անցած] dddd [օրը ժամը] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s հետո',
    past: '%s առաջ',
    s: 'մի քանի վայրկյան',
    ss: '%d վայրկյան',
    m: 'րոպե',
    mm: '%d րոպե',
    h: 'ժամ',
    hh: '%d ժամ',
    d: 'օր',
    dd: '%d օր',
    M: 'ամիս',
    MM: '%d ամիս',
    y: 'տարի',
    yy: '%d տարի'
  },
  meridiemParse: /գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,
  isPM: function isPM(input) {
    return /^(ցերեկվա|երեկոյան)$/.test(input);
  },
  meridiem: function meridiem(hour) {
    if (hour < 4) {
      return 'գիշերվա';
    } else if (hour < 12) {
      return 'առավոտվա';
    } else if (hour < 17) {
      return 'ցերեկվա';
    } else {
      return 'երեկոյան';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}|\d{1,2}-(ին|րդ)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'DDD':
      case 'w':
      case 'W':
      case 'DDDo':
        if (number === 1) {
          return number + '-ին';
        }

        return number + '-րդ';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/id.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/id.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('id', {
  months: 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des'.split('_'),
  weekdays: 'Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu'.split('_'),
  weekdaysShort: 'Min_Sen_Sel_Rab_Kam_Jum_Sab'.split('_'),
  weekdaysMin: 'Mg_Sn_Sl_Rb_Km_Jm_Sb'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /pagi|siang|sore|malam/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'pagi') {
      return hour;
    } else if (meridiem === 'siang') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'sore' || meridiem === 'malam') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'pagi';
    } else if (hours < 15) {
      return 'siang';
    } else if (hours < 19) {
      return 'sore';
    } else {
      return 'malam';
    }
  },
  calendar: {
    sameDay: '[Hari ini pukul] LT',
    nextDay: '[Besok pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kemarin pukul] LT',
    lastWeek: 'dddd [lalu pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dalam %s',
    past: '%s yang lalu',
    s: 'beberapa detik',
    ss: '%d detik',
    m: 'semenit',
    mm: '%d menit',
    h: 'sejam',
    hh: '%d jam',
    d: 'sehari',
    dd: '%d hari',
    M: 'sebulan',
    MM: '%d bulan',
    y: 'setahun',
    yy: '%d tahun'
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/is.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/is.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(n) {
  if (n % 100 === 11) {
    return true;
  } else if (n % 10 === 1) {
    return false;
  }

  return true;
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'nokkrar sekúndur' : 'nokkrum sekúndum';

    case 'ss':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'sekúndur' : 'sekúndum');
      }

      return result + 'sekúnda';

    case 'm':
      return withoutSuffix ? 'mínúta' : 'mínútu';

    case 'mm':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'mínútur' : 'mínútum');
      } else if (withoutSuffix) {
        return result + 'mínúta';
      }

      return result + 'mínútu';

    case 'hh':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'klukkustundir' : 'klukkustundum');
      }

      return result + 'klukkustund';

    case 'd':
      if (withoutSuffix) {
        return 'dagur';
      }

      return isFuture ? 'dag' : 'degi';

    case 'dd':
      if (plural(number)) {
        if (withoutSuffix) {
          return result + 'dagar';
        }

        return result + (isFuture ? 'daga' : 'dögum');
      } else if (withoutSuffix) {
        return result + 'dagur';
      }

      return result + (isFuture ? 'dag' : 'degi');

    case 'M':
      if (withoutSuffix) {
        return 'mánuður';
      }

      return isFuture ? 'mánuð' : 'mánuði';

    case 'MM':
      if (plural(number)) {
        if (withoutSuffix) {
          return result + 'mánuðir';
        }

        return result + (isFuture ? 'mánuði' : 'mánuðum');
      } else if (withoutSuffix) {
        return result + 'mánuður';
      }

      return result + (isFuture ? 'mánuð' : 'mánuði');

    case 'y':
      return withoutSuffix || isFuture ? 'ár' : 'ári';

    case 'yy':
      if (plural(number)) {
        return result + (withoutSuffix || isFuture ? 'ár' : 'árum');
      }

      return result + (withoutSuffix || isFuture ? 'ár' : 'ári');
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('is', {
  months: 'janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember'.split('_'),
  monthsShort: 'jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des'.split('_'),
  weekdays: 'sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur'.split('_'),
  weekdaysShort: 'sun_mán_þri_mið_fim_fös_lau'.split('_'),
  weekdaysMin: 'Su_Má_Þr_Mi_Fi_Fö_La'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY [kl.] H:mm',
    LLLL: 'dddd, D. MMMM YYYY [kl.] H:mm'
  },
  calendar: {
    sameDay: '[í dag kl.] LT',
    nextDay: '[á morgun kl.] LT',
    nextWeek: 'dddd [kl.] LT',
    lastDay: '[í gær kl.] LT',
    lastWeek: '[síðasta] dddd [kl.] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'eftir %s',
    past: 'fyrir %s síðan',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: 'klukkustund',
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/it-ch.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/it-ch.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('it-ch', {
  months: 'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),
  monthsShort: 'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),
  weekdays: 'domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato'.split('_'),
  weekdaysShort: 'dom_lun_mar_mer_gio_ven_sab'.split('_'),
  weekdaysMin: 'do_lu_ma_me_gi_ve_sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Oggi alle] LT',
    nextDay: '[Domani alle] LT',
    nextWeek: 'dddd [alle] LT',
    lastDay: '[Ieri alle] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[la scorsa] dddd [alle] LT';

        default:
          return '[lo scorso] dddd [alle] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(s) {
      return (/^[0-9].+$/.test(s) ? 'tra' : 'in') + ' ' + s;
    },
    past: '%s fa',
    s: 'alcuni secondi',
    ss: '%d secondi',
    m: 'un minuto',
    mm: '%d minuti',
    h: "un'ora",
    hh: '%d ore',
    d: 'un giorno',
    dd: '%d giorni',
    M: 'un mese',
    MM: '%d mesi',
    y: 'un anno',
    yy: '%d anni'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/it.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/it.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('it', {
  months: 'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),
  monthsShort: 'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),
  weekdays: 'domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato'.split('_'),
  weekdaysShort: 'dom_lun_mar_mer_gio_ven_sab'.split('_'),
  weekdaysMin: 'do_lu_ma_me_gi_ve_sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: function sameDay() {
      return '[Oggi a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    nextDay: function nextDay() {
      return '[Domani a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    nextWeek: function nextWeek() {
      return 'dddd [a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    lastDay: function lastDay() {
      return '[Ieri a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
    },
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[La scorsa] dddd [a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';

        default:
          return '[Lo scorso] dddd [a' + (this.hours() > 1 ? 'lle ' : this.hours() === 0 ? ' ' : "ll'") + ']LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'tra %s',
    past: '%s fa',
    s: 'alcuni secondi',
    ss: '%d secondi',
    m: 'un minuto',
    mm: '%d minuti',
    h: "un'ora",
    hh: '%d ore',
    d: 'un giorno',
    dd: '%d giorni',
    w: 'una settimana',
    ww: '%d settimane',
    M: 'un mese',
    MM: '%d mesi',
    y: 'un anno',
    yy: '%d anni'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ja.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ja.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ja', {
  eras: [{
    since: '2019-05-01',
    offset: 1,
    name: '令和',
    narrow: '㋿',
    abbr: 'R'
  }, {
    since: '1989-01-08',
    until: '2019-04-30',
    offset: 1,
    name: '平成',
    narrow: '㍻',
    abbr: 'H'
  }, {
    since: '1926-12-25',
    until: '1989-01-07',
    offset: 1,
    name: '昭和',
    narrow: '㍼',
    abbr: 'S'
  }, {
    since: '1912-07-30',
    until: '1926-12-24',
    offset: 1,
    name: '大正',
    narrow: '㍽',
    abbr: 'T'
  }, {
    since: '1873-01-01',
    until: '1912-07-29',
    offset: 6,
    name: '明治',
    narrow: '㍾',
    abbr: 'M'
  }, {
    since: '0001-01-01',
    until: '1873-12-31',
    offset: 1,
    name: '西暦',
    narrow: 'AD',
    abbr: 'AD'
  }, {
    since: '0000-12-31',
    until: -Infinity,
    offset: 1,
    name: '紀元前',
    narrow: 'BC',
    abbr: 'BC'
  }],
  eraYearOrdinalRegex: /(元|\d+)年/,
  eraYearOrdinalParse: function eraYearOrdinalParse(input, match) {
    return match[1] === '元' ? 1 : parseInt(match[1] || input, 10);
  },
  months: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日'.split('_'),
  weekdaysShort: '日_月_火_水_木_金_土'.split('_'),
  weekdaysMin: '日_月_火_水_木_金_土'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日 dddd HH:mm',
    l: 'YYYY/MM/DD',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日(ddd) HH:mm'
  },
  meridiemParse: /午前|午後/i,
  isPM: function isPM(input) {
    return input === '午後';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return '午前';
    } else {
      return '午後';
    }
  },
  calendar: {
    sameDay: '[今日] LT',
    nextDay: '[明日] LT',
    nextWeek: function nextWeek(now) {
      if (now.week() !== this.week()) {
        return '[来週]dddd LT';
      } else {
        return 'dddd LT';
      }
    },
    lastDay: '[昨日] LT',
    lastWeek: function lastWeek(now) {
      if (this.week() !== now.week()) {
        return '[先週]dddd LT';
      } else {
        return 'dddd LT';
      }
    },
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}日/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'y':
        return number === 1 ? '元年' : number + '年';

      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s後',
    past: '%s前',
    s: '数秒',
    ss: '%d秒',
    m: '1分',
    mm: '%d分',
    h: '1時間',
    hh: '%d時間',
    d: '1日',
    dd: '%d日',
    M: '1ヶ月',
    MM: '%dヶ月',
    y: '1年',
    yy: '%d年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/jv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/jv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('jv', {
  months: 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember'.split('_'),
  monthsShort: 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des'.split('_'),
  weekdays: 'Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu'.split('_'),
  weekdaysShort: 'Min_Sen_Sel_Reb_Kem_Jem_Sep'.split('_'),
  weekdaysMin: 'Mg_Sn_Sl_Rb_Km_Jm_Sp'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /enjing|siyang|sonten|ndalu/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'enjing') {
      return hour;
    } else if (meridiem === 'siyang') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'sonten' || meridiem === 'ndalu') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'enjing';
    } else if (hours < 15) {
      return 'siyang';
    } else if (hours < 19) {
      return 'sonten';
    } else {
      return 'ndalu';
    }
  },
  calendar: {
    sameDay: '[Dinten puniko pukul] LT',
    nextDay: '[Mbenjang pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kala wingi pukul] LT',
    lastWeek: 'dddd [kepengker pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'wonten ing %s',
    past: '%s ingkang kepengker',
    s: 'sawetawis detik',
    ss: '%d detik',
    m: 'setunggal menit',
    mm: '%d menit',
    h: 'setunggal jam',
    hh: '%d jam',
    d: 'sedinten',
    dd: '%d dinten',
    M: 'sewulan',
    MM: '%d wulan',
    y: 'setaun',
    yy: '%d taun'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ka.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ka.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ka', {
  months: 'იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი'.split('_'),
  monthsShort: 'იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ'.split('_'),
  weekdays: {
    standalone: 'კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი'.split('_'),
    format: 'კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს'.split('_'),
    isFormat: /(წინა|შემდეგ)/
  },
  weekdaysShort: 'კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ'.split('_'),
  weekdaysMin: 'კვ_ორ_სა_ოთ_ხუ_პა_შა'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[დღეს] LT[-ზე]',
    nextDay: '[ხვალ] LT[-ზე]',
    lastDay: '[გუშინ] LT[-ზე]',
    nextWeek: '[შემდეგ] dddd LT[-ზე]',
    lastWeek: '[წინა] dddd LT-ზე',
    sameElse: 'L'
  },
  relativeTime: {
    future: function future(s) {
      return s.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/, function ($0, $1, $2) {
        return $2 === 'ი' ? $1 + 'ში' : $1 + $2 + 'ში';
      });
    },
    past: function past(s) {
      if (/(წამი|წუთი|საათი|დღე|თვე)/.test(s)) {
        return s.replace(/(ი|ე)$/, 'ის წინ');
      }

      if (/წელი/.test(s)) {
        return s.replace(/წელი$/, 'წლის წინ');
      }

      return s;
    },
    s: 'რამდენიმე წამი',
    ss: '%d წამი',
    m: 'წუთი',
    mm: '%d წუთი',
    h: 'საათი',
    hh: '%d საათი',
    d: 'დღე',
    dd: '%d დღე',
    M: 'თვე',
    MM: '%d თვე',
    y: 'წელი',
    yy: '%d წელი'
  },
  dayOfMonthOrdinalParse: /0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,
  ordinal: function ordinal(number) {
    if (number === 0) {
      return number;
    }

    if (number === 1) {
      return number + '-ლი';
    }

    if (number < 20 || number <= 100 && number % 20 === 0 || number % 100 === 0) {
      return 'მე-' + number;
    }

    return number + '-ე';
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/kk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/kk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  0: '-ші',
  1: '-ші',
  2: '-ші',
  3: '-ші',
  4: '-ші',
  5: '-ші',
  6: '-шы',
  7: '-ші',
  8: '-ші',
  9: '-шы',
  10: '-шы',
  20: '-шы',
  30: '-шы',
  40: '-шы',
  50: '-ші',
  60: '-шы',
  70: '-ші',
  80: '-ші',
  90: '-шы',
  100: '-ші'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('kk', {
  months: 'қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан'.split('_'),
  monthsShort: 'қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел'.split('_'),
  weekdays: 'жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі'.split('_'),
  weekdaysShort: 'жек_дүй_сей_сәр_бей_жұм_сен'.split('_'),
  weekdaysMin: 'жк_дй_сй_ср_бй_жм_сн'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Бүгін сағат] LT',
    nextDay: '[Ертең сағат] LT',
    nextWeek: 'dddd [сағат] LT',
    lastDay: '[Кеше сағат] LT',
    lastWeek: '[Өткен аптаның] dddd [сағат] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ішінде',
    past: '%s бұрын',
    s: 'бірнеше секунд',
    ss: '%d секунд',
    m: 'бір минут',
    mm: '%d минут',
    h: 'бір сағат',
    hh: '%d сағат',
    d: 'бір күн',
    dd: '%d күн',
    M: 'бір ай',
    MM: '%d ай',
    y: 'бір жыл',
    yy: '%d жыл'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ші|шы)/,
  ordinal: function ordinal(number) {
    var a = number % 10,
        b = number >= 100 ? 100 : null;
    return number + (suffixes[number] || suffixes[a] || suffixes[b]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/km.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/km.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '១',
  2: '២',
  3: '៣',
  4: '៤',
  5: '៥',
  6: '៦',
  7: '៧',
  8: '៨',
  9: '៩',
  0: '០'
},
    numberMap = {
  '១': '1',
  '២': '2',
  '៣': '3',
  '៤': '4',
  '៥': '5',
  '៦': '6',
  '៧': '7',
  '៨': '8',
  '៩': '9',
  '០': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('km', {
  months: 'មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
  monthsShort: 'មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
  weekdays: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
  weekdaysShort: 'អា_ច_អ_ព_ព្រ_សុ_ស'.split('_'),
  weekdaysMin: 'អា_ច_អ_ព_ព្រ_សុ_ស'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  meridiemParse: /ព្រឹក|ល្ងាច/,
  isPM: function isPM(input) {
    return input === 'ល្ងាច';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ព្រឹក';
    } else {
      return 'ល្ងាច';
    }
  },
  calendar: {
    sameDay: '[ថ្ងៃនេះ ម៉ោង] LT',
    nextDay: '[ស្អែក ម៉ោង] LT',
    nextWeek: 'dddd [ម៉ោង] LT',
    lastDay: '[ម្សិលមិញ ម៉ោង] LT',
    lastWeek: 'dddd [សប្តាហ៍មុន] [ម៉ោង] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sទៀត',
    past: '%sមុន',
    s: 'ប៉ុន្មានវិនាទី',
    ss: '%d វិនាទី',
    m: 'មួយនាទី',
    mm: '%d នាទី',
    h: 'មួយម៉ោង',
    hh: '%d ម៉ោង',
    d: 'មួយថ្ងៃ',
    dd: '%d ថ្ងៃ',
    M: 'មួយខែ',
    MM: '%d ខែ',
    y: 'មួយឆ្នាំ',
    yy: '%d ឆ្នាំ'
  },
  dayOfMonthOrdinalParse: /ទី\d{1,2}/,
  ordinal: 'ទី%d',
  preparse: function preparse(string) {
    return string.replace(/[១២៣៤៥៦៧៨៩០]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/kn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/kn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '೧',
  2: '೨',
  3: '೩',
  4: '೪',
  5: '೫',
  6: '೬',
  7: '೭',
  8: '೮',
  9: '೯',
  0: '೦'
},
    numberMap = {
  '೧': '1',
  '೨': '2',
  '೩': '3',
  '೪': '4',
  '೫': '5',
  '೬': '6',
  '೭': '7',
  '೮': '8',
  '೯': '9',
  '೦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('kn', {
  months: 'ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್'.split('_'),
  monthsShort: 'ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ'.split('_'),
  monthsParseExact: true,
  weekdays: 'ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ'.split('_'),
  weekdaysShort: 'ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ'.split('_'),
  weekdaysMin: 'ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm',
    LLLL: 'dddd, D MMMM YYYY, A h:mm'
  },
  calendar: {
    sameDay: '[ಇಂದು] LT',
    nextDay: '[ನಾಳೆ] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[ನಿನ್ನೆ] LT',
    lastWeek: '[ಕೊನೆಯ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ನಂತರ',
    past: '%s ಹಿಂದೆ',
    s: 'ಕೆಲವು ಕ್ಷಣಗಳು',
    ss: '%d ಸೆಕೆಂಡುಗಳು',
    m: 'ಒಂದು ನಿಮಿಷ',
    mm: '%d ನಿಮಿಷ',
    h: 'ಒಂದು ಗಂಟೆ',
    hh: '%d ಗಂಟೆ',
    d: 'ಒಂದು ದಿನ',
    dd: '%d ದಿನ',
    M: 'ಒಂದು ತಿಂಗಳು',
    MM: '%d ತಿಂಗಳು',
    y: 'ಒಂದು ವರ್ಷ',
    yy: '%d ವರ್ಷ'
  },
  preparse: function preparse(string) {
    return string.replace(/[೧೨೩೪೫೬೭೮೯೦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'ರಾತ್ರಿ') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ಬೆಳಿಗ್ಗೆ') {
      return hour;
    } else if (meridiem === 'ಮಧ್ಯಾಹ್ನ') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'ಸಂಜೆ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ರಾತ್ರಿ';
    } else if (hour < 10) {
      return 'ಬೆಳಿಗ್ಗೆ';
    } else if (hour < 17) {
      return 'ಮಧ್ಯಾಹ್ನ';
    } else if (hour < 20) {
      return 'ಸಂಜೆ';
    } else {
      return 'ರಾತ್ರಿ';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ನೇ)/,
  ordinal: function ordinal(number) {
    return number + 'ನೇ';
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ko.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ko.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ko', {
  months: '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
  monthsShort: '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
  weekdays: '일요일_월요일_화요일_수요일_목요일_금요일_토요일'.split('_'),
  weekdaysShort: '일_월_화_수_목_금_토'.split('_'),
  weekdaysMin: '일_월_화_수_목_금_토'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'YYYY.MM.DD.',
    LL: 'YYYY년 MMMM D일',
    LLL: 'YYYY년 MMMM D일 A h:mm',
    LLLL: 'YYYY년 MMMM D일 dddd A h:mm',
    l: 'YYYY.MM.DD.',
    ll: 'YYYY년 MMMM D일',
    lll: 'YYYY년 MMMM D일 A h:mm',
    llll: 'YYYY년 MMMM D일 dddd A h:mm'
  },
  calendar: {
    sameDay: '오늘 LT',
    nextDay: '내일 LT',
    nextWeek: 'dddd LT',
    lastDay: '어제 LT',
    lastWeek: '지난주 dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s 후',
    past: '%s 전',
    s: '몇 초',
    ss: '%d초',
    m: '1분',
    mm: '%d분',
    h: '한 시간',
    hh: '%d시간',
    d: '하루',
    dd: '%d일',
    M: '한 달',
    MM: '%d달',
    y: '일 년',
    yy: '%d년'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(일|월|주)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '일';

      case 'M':
        return number + '월';

      case 'w':
      case 'W':
        return number + '주';

      default:
        return number;
    }
  },
  meridiemParse: /오전|오후/,
  isPM: function isPM(token) {
    return token === '오후';
  },
  meridiem: function meridiem(hour, minute, isUpper) {
    return hour < 12 ? '오전' : '오후';
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ku.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ku.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '١',
  2: '٢',
  3: '٣',
  4: '٤',
  5: '٥',
  6: '٦',
  7: '٧',
  8: '٨',
  9: '٩',
  0: '٠'
},
    numberMap = {
  '١': '1',
  '٢': '2',
  '٣': '3',
  '٤': '4',
  '٥': '5',
  '٦': '6',
  '٧': '7',
  '٨': '8',
  '٩': '9',
  '٠': '0'
},
    months = ['کانونی دووەم', 'شوبات', 'ئازار', 'نیسان', 'ئایار', 'حوزەیران', 'تەمموز', 'ئاب', 'ئەیلوول', 'تشرینی یەكەم', 'تشرینی دووەم', 'كانونی یەکەم'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ku', {
  months: months,
  monthsShort: months,
  weekdays: 'یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌'.split('_'),
  weekdaysShort: 'یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌'.split('_'),
  weekdaysMin: 'ی_د_س_چ_پ_ه_ش'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  meridiemParse: /ئێواره‌|به‌یانی/,
  isPM: function isPM(input) {
    return /ئێواره‌/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'به‌یانی';
    } else {
      return 'ئێواره‌';
    }
  },
  calendar: {
    sameDay: '[ئه‌مرۆ كاتژمێر] LT',
    nextDay: '[به‌یانی كاتژمێر] LT',
    nextWeek: 'dddd [كاتژمێر] LT',
    lastDay: '[دوێنێ كاتژمێر] LT',
    lastWeek: 'dddd [كاتژمێر] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'له‌ %s',
    past: '%s',
    s: 'چه‌ند چركه‌یه‌ك',
    ss: 'چركه‌ %d',
    m: 'یه‌ك خوله‌ك',
    mm: '%d خوله‌ك',
    h: 'یه‌ك كاتژمێر',
    hh: '%d كاتژمێر',
    d: 'یه‌ك ڕۆژ',
    dd: '%d ڕۆژ',
    M: 'یه‌ك مانگ',
    MM: '%d مانگ',
    y: 'یه‌ك ساڵ',
    yy: '%d ساڵ'
  },
  preparse: function preparse(string) {
    return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
      return numberMap[match];
    }).replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    }).replace(/,/g, '،');
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ky.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ky.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  0: '-чү',
  1: '-чи',
  2: '-чи',
  3: '-чү',
  4: '-чү',
  5: '-чи',
  6: '-чы',
  7: '-чи',
  8: '-чи',
  9: '-чу',
  10: '-чу',
  20: '-чы',
  30: '-чу',
  40: '-чы',
  50: '-чү',
  60: '-чы',
  70: '-чи',
  80: '-чи',
  90: '-чу',
  100: '-чү'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ky', {
  months: 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_'),
  monthsShort: 'янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек'.split('_'),
  weekdays: 'Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби'.split('_'),
  weekdaysShort: 'Жек_Дүй_Шей_Шар_Бей_Жум_Ише'.split('_'),
  weekdaysMin: 'Жк_Дй_Шй_Шр_Бй_Жм_Иш'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Бүгүн саат] LT',
    nextDay: '[Эртең саат] LT',
    nextWeek: 'dddd [саат] LT',
    lastDay: '[Кечээ саат] LT',
    lastWeek: '[Өткөн аптанын] dddd [күнү] [саат] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ичинде',
    past: '%s мурун',
    s: 'бирнече секунд',
    ss: '%d секунд',
    m: 'бир мүнөт',
    mm: '%d мүнөт',
    h: 'бир саат',
    hh: '%d саат',
    d: 'бир күн',
    dd: '%d күн',
    M: 'бир ай',
    MM: '%d ай',
    y: 'бир жыл',
    yy: '%d жыл'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(чи|чы|чү|чу)/,
  ordinal: function ordinal(number) {
    var a = number % 10,
        b = number >= 100 ? 100 : null;
    return number + (suffixes[number] || suffixes[a] || suffixes[b]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lb.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lb.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    m: ['eng Minutt', 'enger Minutt'],
    h: ['eng Stonn', 'enger Stonn'],
    d: ['een Dag', 'engem Dag'],
    M: ['ee Mount', 'engem Mount'],
    y: ['ee Joer', 'engem Joer']
  };
  return withoutSuffix ? format[key][0] : format[key][1];
}

function processFutureTime(string) {
  var number = string.substr(0, string.indexOf(' '));

  if (eifelerRegelAppliesToNumber(number)) {
    return 'a ' + string;
  }

  return 'an ' + string;
}

function processPastTime(string) {
  var number = string.substr(0, string.indexOf(' '));

  if (eifelerRegelAppliesToNumber(number)) {
    return 'viru ' + string;
  }

  return 'virun ' + string;
}

function eifelerRegelAppliesToNumber(number) {
  number = parseInt(number, 10);

  if (isNaN(number)) {
    return false;
  }

  if (number < 0) {
    return true;
  } else if (number < 10) {
    if (4 <= number && number <= 7) {
      return true;
    }

    return false;
  } else if (number < 100) {
    var lastDigit = number % 10,
        firstDigit = number / 10;

    if (lastDigit === 0) {
      return eifelerRegelAppliesToNumber(firstDigit);
    }

    return eifelerRegelAppliesToNumber(lastDigit);
  } else if (number < 10000) {
    while (number >= 10) {
      number = number / 10;
    }

    return eifelerRegelAppliesToNumber(number);
  } else {
    number = number / 1000;
    return eifelerRegelAppliesToNumber(number);
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lb', {
  months: 'Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
  monthsShort: 'Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),
  monthsParseExact: true,
  weekdays: 'Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg'.split('_'),
  weekdaysShort: 'So._Mé._Dë._Më._Do._Fr._Sa.'.split('_'),
  weekdaysMin: 'So_Mé_Dë_Më_Do_Fr_Sa'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm [Auer]',
    LTS: 'H:mm:ss [Auer]',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm [Auer]',
    LLLL: 'dddd, D. MMMM YYYY H:mm [Auer]'
  },
  calendar: {
    sameDay: '[Haut um] LT',
    sameElse: 'L',
    nextDay: '[Muer um] LT',
    nextWeek: 'dddd [um] LT',
    lastDay: '[Gëschter um] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 2:
        case 4:
          return '[Leschten] dddd [um] LT';

        default:
          return '[Leschte] dddd [um] LT';
      }
    }
  },
  relativeTime: {
    future: processFutureTime,
    past: processPastTime,
    s: 'e puer Sekonnen',
    ss: '%d Sekonnen',
    m: processRelativeTime,
    mm: '%d Minutten',
    h: processRelativeTime,
    hh: '%d Stonnen',
    d: processRelativeTime,
    dd: '%d Deeg',
    M: processRelativeTime,
    MM: '%d Méint',
    y: processRelativeTime,
    yy: '%d Joer'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lo', {
  months: 'ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ'.split('_'),
  monthsShort: 'ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ'.split('_'),
  weekdays: 'ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ'.split('_'),
  weekdaysShort: 'ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ'.split('_'),
  weekdaysMin: 'ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'ວັນdddd D MMMM YYYY HH:mm'
  },
  meridiemParse: /ຕອນເຊົ້າ|ຕອນແລງ/,
  isPM: function isPM(input) {
    return input === 'ຕອນແລງ';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ຕອນເຊົ້າ';
    } else {
      return 'ຕອນແລງ';
    }
  },
  calendar: {
    sameDay: '[ມື້ນີ້ເວລາ] LT',
    nextDay: '[ມື້ອື່ນເວລາ] LT',
    nextWeek: '[ວັນ]dddd[ໜ້າເວລາ] LT',
    lastDay: '[ມື້ວານນີ້ເວລາ] LT',
    lastWeek: '[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ອີກ %s',
    past: '%sຜ່ານມາ',
    s: 'ບໍ່ເທົ່າໃດວິນາທີ',
    ss: '%d ວິນາທີ',
    m: '1 ນາທີ',
    mm: '%d ນາທີ',
    h: '1 ຊົ່ວໂມງ',
    hh: '%d ຊົ່ວໂມງ',
    d: '1 ມື້',
    dd: '%d ມື້',
    M: '1 ເດືອນ',
    MM: '%d ເດືອນ',
    y: '1 ປີ',
    yy: '%d ປີ'
  },
  dayOfMonthOrdinalParse: /(ທີ່)\d{1,2}/,
  ordinal: function ordinal(number) {
    return 'ທີ່' + number;
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lt.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lt.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var units = {
  ss: 'sekundė_sekundžių_sekundes',
  m: 'minutė_minutės_minutę',
  mm: 'minutės_minučių_minutes',
  h: 'valanda_valandos_valandą',
  hh: 'valandos_valandų_valandas',
  d: 'diena_dienos_dieną',
  dd: 'dienos_dienų_dienas',
  M: 'mėnuo_mėnesio_mėnesį',
  MM: 'mėnesiai_mėnesių_mėnesius',
  y: 'metai_metų_metus',
  yy: 'metai_metų_metus'
};

function translateSeconds(number, withoutSuffix, key, isFuture) {
  if (withoutSuffix) {
    return 'kelios sekundės';
  } else {
    return isFuture ? 'kelių sekundžių' : 'kelias sekundes';
  }
}

function translateSingular(number, withoutSuffix, key, isFuture) {
  return withoutSuffix ? forms(key)[0] : isFuture ? forms(key)[1] : forms(key)[2];
}

function special(number) {
  return number % 10 === 0 || number > 10 && number < 20;
}

function forms(key) {
  return units[key].split('_');
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  if (number === 1) {
    return result + translateSingular(number, withoutSuffix, key[0], isFuture);
  } else if (withoutSuffix) {
    return result + (special(number) ? forms(key)[1] : forms(key)[0]);
  } else {
    if (isFuture) {
      return result + forms(key)[1];
    } else {
      return result + (special(number) ? forms(key)[1] : forms(key)[2]);
    }
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lt', {
  months: {
    format: 'sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio'.split('_'),
    standalone: 'sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis'.split('_'),
    isFormat: /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/
  },
  monthsShort: 'sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd'.split('_'),
  weekdays: {
    format: 'sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį'.split('_'),
    standalone: 'sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis'.split('_'),
    isFormat: /dddd HH:mm/
  },
  weekdaysShort: 'Sek_Pir_Ant_Tre_Ket_Pen_Šeš'.split('_'),
  weekdaysMin: 'S_P_A_T_K_Pn_Š'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY [m.] MMMM D [d.]',
    LLL: 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
    LLLL: 'YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]',
    l: 'YYYY-MM-DD',
    ll: 'YYYY [m.] MMMM D [d.]',
    lll: 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
    llll: 'YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]'
  },
  calendar: {
    sameDay: '[Šiandien] LT',
    nextDay: '[Rytoj] LT',
    nextWeek: 'dddd LT',
    lastDay: '[Vakar] LT',
    lastWeek: '[Praėjusį] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'po %s',
    past: 'prieš %s',
    s: translateSeconds,
    ss: translate,
    m: translateSingular,
    mm: translate,
    h: translateSingular,
    hh: translate,
    d: translateSingular,
    dd: translate,
    M: translateSingular,
    MM: translate,
    y: translateSingular,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}-oji/,
  ordinal: function ordinal(number) {
    return number + '-oji';
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/lv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/lv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var units = {
  ss: 'sekundes_sekundēm_sekunde_sekundes'.split('_'),
  m: 'minūtes_minūtēm_minūte_minūtes'.split('_'),
  mm: 'minūtes_minūtēm_minūte_minūtes'.split('_'),
  h: 'stundas_stundām_stunda_stundas'.split('_'),
  hh: 'stundas_stundām_stunda_stundas'.split('_'),
  d: 'dienas_dienām_diena_dienas'.split('_'),
  dd: 'dienas_dienām_diena_dienas'.split('_'),
  M: 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
  MM: 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
  y: 'gada_gadiem_gads_gadi'.split('_'),
  yy: 'gada_gadiem_gads_gadi'.split('_')
};

function format(forms, number, withoutSuffix) {
  if (withoutSuffix) {
    return number % 10 === 1 && number % 100 !== 11 ? forms[2] : forms[3];
  } else {
    return number % 10 === 1 && number % 100 !== 11 ? forms[0] : forms[1];
  }
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  return number + ' ' + format(units[key], number, withoutSuffix);
}

function relativeTimeWithSingular(number, withoutSuffix, key) {
  return format(units[key], number, withoutSuffix);
}

function relativeSeconds(number, withoutSuffix) {
  return withoutSuffix ? 'dažas sekundes' : 'dažām sekundēm';
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('lv', {
  months: 'janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris'.split('_'),
  monthsShort: 'jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec'.split('_'),
  weekdays: 'svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena'.split('_'),
  weekdaysShort: 'Sv_P_O_T_C_Pk_S'.split('_'),
  weekdaysMin: 'Sv_P_O_T_C_Pk_S'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY.',
    LL: 'YYYY. [gada] D. MMMM',
    LLL: 'YYYY. [gada] D. MMMM, HH:mm',
    LLLL: 'YYYY. [gada] D. MMMM, dddd, HH:mm'
  },
  calendar: {
    sameDay: '[Šodien pulksten] LT',
    nextDay: '[Rīt pulksten] LT',
    nextWeek: 'dddd [pulksten] LT',
    lastDay: '[Vakar pulksten] LT',
    lastWeek: '[Pagājušā] dddd [pulksten] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'pēc %s',
    past: 'pirms %s',
    s: relativeSeconds,
    ss: relativeTimeWithPlural,
    m: relativeTimeWithSingular,
    mm: relativeTimeWithPlural,
    h: relativeTimeWithSingular,
    hh: relativeTimeWithPlural,
    d: relativeTimeWithSingular,
    dd: relativeTimeWithPlural,
    M: relativeTimeWithSingular,
    MM: relativeTimeWithPlural,
    y: relativeTimeWithSingular,
    yy: relativeTimeWithPlural
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/me.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/me.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var translator = {
  words: {
    ss: ['sekund', 'sekunda', 'sekundi'],
    m: ['jedan minut', 'jednog minuta'],
    mm: ['minut', 'minuta', 'minuta'],
    h: ['jedan sat', 'jednog sata'],
    hh: ['sat', 'sata', 'sati'],
    dd: ['dan', 'dana', 'dana'],
    MM: ['mjesec', 'mjeseca', 'mjeseci'],
    yy: ['godina', 'godine', 'godina']
  },
  correctGrammaticalCase: function correctGrammaticalCase(number, wordKey) {
    return number === 1 ? wordKey[0] : number >= 2 && number <= 4 ? wordKey[1] : wordKey[2];
  },
  translate: function translate(number, withoutSuffix, key) {
    var wordKey = translator.words[key];

    if (key.length === 1) {
      return withoutSuffix ? wordKey[0] : wordKey[1];
    } else {
      return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('me', {
  months: 'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sjutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedjelju] [u] LT';

        case 3:
          return '[u] [srijedu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[juče u] LT',
    lastWeek: function lastWeek() {
      var lastWeekDays = ['[prošle] [nedjelje] [u] LT', '[prošlog] [ponedjeljka] [u] LT', '[prošlog] [utorka] [u] LT', '[prošle] [srijede] [u] LT', '[prošlog] [četvrtka] [u] LT', '[prošlog] [petka] [u] LT', '[prošle] [subote] [u] LT'];
      return lastWeekDays[this.day()];
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'prije %s',
    s: 'nekoliko sekundi',
    ss: translator.translate,
    m: translator.translate,
    mm: translator.translate,
    h: translator.translate,
    hh: translator.translate,
    d: 'dan',
    dd: translator.translate,
    M: 'mjesec',
    MM: translator.translate,
    y: 'godinu',
    yy: translator.translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mi', {
  months: 'Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea'.split('_'),
  monthsShort: 'Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki'.split('_'),
  monthsRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
  monthsStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
  monthsShortRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
  monthsShortStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,
  weekdays: 'Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei'.split('_'),
  weekdaysShort: 'Ta_Ma_Tū_We_Tāi_Pa_Hā'.split('_'),
  weekdaysMin: 'Ta_Ma_Tū_We_Tāi_Pa_Hā'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [i] HH:mm',
    LLLL: 'dddd, D MMMM YYYY [i] HH:mm'
  },
  calendar: {
    sameDay: '[i teie mahana, i] LT',
    nextDay: '[apopo i] LT',
    nextWeek: 'dddd [i] LT',
    lastDay: '[inanahi i] LT',
    lastWeek: 'dddd [whakamutunga i] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'i roto i %s',
    past: '%s i mua',
    s: 'te hēkona ruarua',
    ss: '%d hēkona',
    m: 'he meneti',
    mm: '%d meneti',
    h: 'te haora',
    hh: '%d haora',
    d: 'he ra',
    dd: '%d ra',
    M: 'he marama',
    MM: '%d marama',
    y: 'he tau',
    yy: '%d tau'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mk', {
  months: 'јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември'.split('_'),
  monthsShort: 'јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек'.split('_'),
  weekdays: 'недела_понеделник_вторник_среда_четврток_петок_сабота'.split('_'),
  weekdaysShort: 'нед_пон_вто_сре_чет_пет_саб'.split('_'),
  weekdaysMin: 'нe_пo_вт_ср_че_пе_сa'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY H:mm',
    LLLL: 'dddd, D MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[Денес во] LT',
    nextDay: '[Утре во] LT',
    nextWeek: '[Во] dddd [во] LT',
    lastDay: '[Вчера во] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 6:
          return '[Изминатата] dddd [во] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[Изминатиот] dddd [во] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'за %s',
    past: 'пред %s',
    s: 'неколку секунди',
    ss: '%d секунди',
    m: 'една минута',
    mm: '%d минути',
    h: 'еден час',
    hh: '%d часа',
    d: 'еден ден',
    dd: '%d дена',
    M: 'еден месец',
    MM: '%d месеци',
    y: 'една година',
    yy: '%d години'
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
  ordinal: function ordinal(number) {
    var lastDigit = number % 10,
        last2Digits = number % 100;

    if (number === 0) {
      return number + '-ев';
    } else if (last2Digits === 0) {
      return number + '-ен';
    } else if (last2Digits > 10 && last2Digits < 20) {
      return number + '-ти';
    } else if (lastDigit === 1) {
      return number + '-ви';
    } else if (lastDigit === 2) {
      return number + '-ри';
    } else if (lastDigit === 7 || lastDigit === 8) {
      return number + '-ми';
    } else {
      return number + '-ти';
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ml.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ml.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ml', {
  months: 'ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ'.split('_'),
  monthsShort: 'ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.'.split('_'),
  monthsParseExact: true,
  weekdays: 'ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച'.split('_'),
  weekdaysShort: 'ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി'.split('_'),
  weekdaysMin: 'ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm -നു',
    LTS: 'A h:mm:ss -നു',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm -നു',
    LLLL: 'dddd, D MMMM YYYY, A h:mm -നു'
  },
  calendar: {
    sameDay: '[ഇന്ന്] LT',
    nextDay: '[നാളെ] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[ഇന്നലെ] LT',
    lastWeek: '[കഴിഞ്ഞ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s കഴിഞ്ഞ്',
    past: '%s മുൻപ്',
    s: 'അൽപ നിമിഷങ്ങൾ',
    ss: '%d സെക്കൻഡ്',
    m: 'ഒരു മിനിറ്റ്',
    mm: '%d മിനിറ്റ്',
    h: 'ഒരു മണിക്കൂർ',
    hh: '%d മണിക്കൂർ',
    d: 'ഒരു ദിവസം',
    dd: '%d ദിവസം',
    M: 'ഒരു മാസം',
    MM: '%d മാസം',
    y: 'ഒരു വർഷം',
    yy: '%d വർഷം'
  },
  meridiemParse: /രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'രാത്രി' && hour >= 4 || meridiem === 'ഉച്ച കഴിഞ്ഞ്' || meridiem === 'വൈകുന്നേരം') {
      return hour + 12;
    } else {
      return hour;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'രാത്രി';
    } else if (hour < 12) {
      return 'രാവിലെ';
    } else if (hour < 17) {
      return 'ഉച്ച കഴിഞ്ഞ്';
    } else if (hour < 20) {
      return 'വൈകുന്നേരം';
    } else {
      return 'രാത്രി';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function translate(number, withoutSuffix, key, isFuture) {
  switch (key) {
    case 's':
      return withoutSuffix ? 'хэдхэн секунд' : 'хэдхэн секундын';

    case 'ss':
      return number + (withoutSuffix ? ' секунд' : ' секундын');

    case 'm':
    case 'mm':
      return number + (withoutSuffix ? ' минут' : ' минутын');

    case 'h':
    case 'hh':
      return number + (withoutSuffix ? ' цаг' : ' цагийн');

    case 'd':
    case 'dd':
      return number + (withoutSuffix ? ' өдөр' : ' өдрийн');

    case 'M':
    case 'MM':
      return number + (withoutSuffix ? ' сар' : ' сарын');

    case 'y':
    case 'yy':
      return number + (withoutSuffix ? ' жил' : ' жилийн');

    default:
      return number;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mn', {
  months: 'Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар'.split('_'),
  monthsShort: '1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар'.split('_'),
  monthsParseExact: true,
  weekdays: 'Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба'.split('_'),
  weekdaysShort: 'Ням_Дав_Мяг_Лха_Пүр_Баа_Бям'.split('_'),
  weekdaysMin: 'Ня_Да_Мя_Лх_Пү_Ба_Бя'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY оны MMMMын D',
    LLL: 'YYYY оны MMMMын D HH:mm',
    LLLL: 'dddd, YYYY оны MMMMын D HH:mm'
  },
  meridiemParse: /ҮӨ|ҮХ/i,
  isPM: function isPM(input) {
    return input === 'ҮХ';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ҮӨ';
    } else {
      return 'ҮХ';
    }
  },
  calendar: {
    sameDay: '[Өнөөдөр] LT',
    nextDay: '[Маргааш] LT',
    nextWeek: '[Ирэх] dddd LT',
    lastDay: '[Өчигдөр] LT',
    lastWeek: '[Өнгөрсөн] dddd LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s дараа',
    past: '%s өмнө',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2} өдөр/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + ' өдөр';

      default:
        return number;
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '१',
  2: '२',
  3: '३',
  4: '४',
  5: '५',
  6: '६',
  7: '७',
  8: '८',
  9: '९',
  0: '०'
},
    numberMap = {
  '१': '1',
  '२': '2',
  '३': '3',
  '४': '4',
  '५': '5',
  '६': '6',
  '७': '7',
  '८': '8',
  '९': '9',
  '०': '0'
};

function relativeTimeMr(number, withoutSuffix, string, isFuture) {
  var output = '';

  if (withoutSuffix) {
    switch (string) {
      case 's':
        output = 'काही सेकंद';
        break;

      case 'ss':
        output = '%d सेकंद';
        break;

      case 'm':
        output = 'एक मिनिट';
        break;

      case 'mm':
        output = '%d मिनिटे';
        break;

      case 'h':
        output = 'एक तास';
        break;

      case 'hh':
        output = '%d तास';
        break;

      case 'd':
        output = 'एक दिवस';
        break;

      case 'dd':
        output = '%d दिवस';
        break;

      case 'M':
        output = 'एक महिना';
        break;

      case 'MM':
        output = '%d महिने';
        break;

      case 'y':
        output = 'एक वर्ष';
        break;

      case 'yy':
        output = '%d वर्षे';
        break;
    }
  } else {
    switch (string) {
      case 's':
        output = 'काही सेकंदां';
        break;

      case 'ss':
        output = '%d सेकंदां';
        break;

      case 'm':
        output = 'एका मिनिटा';
        break;

      case 'mm':
        output = '%d मिनिटां';
        break;

      case 'h':
        output = 'एका तासा';
        break;

      case 'hh':
        output = '%d तासां';
        break;

      case 'd':
        output = 'एका दिवसा';
        break;

      case 'dd':
        output = '%d दिवसां';
        break;

      case 'M':
        output = 'एका महिन्या';
        break;

      case 'MM':
        output = '%d महिन्यां';
        break;

      case 'y':
        output = 'एका वर्षा';
        break;

      case 'yy':
        output = '%d वर्षां';
        break;
    }
  }

  return output.replace(/%d/i, number);
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mr', {
  months: 'जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर'.split('_'),
  monthsShort: 'जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.'.split('_'),
  monthsParseExact: true,
  weekdays: 'रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
  weekdaysShort: 'रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि'.split('_'),
  weekdaysMin: 'र_सो_मं_बु_गु_शु_श'.split('_'),
  longDateFormat: {
    LT: 'A h:mm वाजता',
    LTS: 'A h:mm:ss वाजता',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm वाजता',
    LLLL: 'dddd, D MMMM YYYY, A h:mm वाजता'
  },
  calendar: {
    sameDay: '[आज] LT',
    nextDay: '[उद्या] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[काल] LT',
    lastWeek: '[मागील] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sमध्ये',
    past: '%sपूर्वी',
    s: relativeTimeMr,
    ss: relativeTimeMr,
    m: relativeTimeMr,
    mm: relativeTimeMr,
    h: relativeTimeMr,
    hh: relativeTimeMr,
    d: relativeTimeMr,
    dd: relativeTimeMr,
    M: relativeTimeMr,
    MM: relativeTimeMr,
    y: relativeTimeMr,
    yy: relativeTimeMr
  },
  preparse: function preparse(string) {
    return string.replace(/[१२३४५६७८९०]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'पहाटे' || meridiem === 'सकाळी') {
      return hour;
    } else if (meridiem === 'दुपारी' || meridiem === 'सायंकाळी' || meridiem === 'रात्री') {
      return hour >= 12 ? hour : hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour >= 0 && hour < 6) {
      return 'पहाटे';
    } else if (hour < 12) {
      return 'सकाळी';
    } else if (hour < 17) {
      return 'दुपारी';
    } else if (hour < 20) {
      return 'सायंकाळी';
    } else {
      return 'रात्री';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ms-my.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ms-my.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ms-my', {
  months: 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
  monthsShort: 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
  weekdays: 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
  weekdaysShort: 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
  weekdaysMin: 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /pagi|tengahari|petang|malam/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'pagi') {
      return hour;
    } else if (meridiem === 'tengahari') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'petang' || meridiem === 'malam') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'pagi';
    } else if (hours < 15) {
      return 'tengahari';
    } else if (hours < 19) {
      return 'petang';
    } else {
      return 'malam';
    }
  },
  calendar: {
    sameDay: '[Hari ini pukul] LT',
    nextDay: '[Esok pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kelmarin pukul] LT',
    lastWeek: 'dddd [lepas pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dalam %s',
    past: '%s yang lepas',
    s: 'beberapa saat',
    ss: '%d saat',
    m: 'seminit',
    mm: '%d minit',
    h: 'sejam',
    hh: '%d jam',
    d: 'sehari',
    dd: '%d hari',
    M: 'sebulan',
    MM: '%d bulan',
    y: 'setahun',
    yy: '%d tahun'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ms.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ms.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ms', {
  months: 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
  monthsShort: 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
  weekdays: 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
  weekdaysShort: 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
  weekdaysMin: 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [pukul] HH.mm',
    LLLL: 'dddd, D MMMM YYYY [pukul] HH.mm'
  },
  meridiemParse: /pagi|tengahari|petang|malam/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'pagi') {
      return hour;
    } else if (meridiem === 'tengahari') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'petang' || meridiem === 'malam') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'pagi';
    } else if (hours < 15) {
      return 'tengahari';
    } else if (hours < 19) {
      return 'petang';
    } else {
      return 'malam';
    }
  },
  calendar: {
    sameDay: '[Hari ini pukul] LT',
    nextDay: '[Esok pukul] LT',
    nextWeek: 'dddd [pukul] LT',
    lastDay: '[Kelmarin pukul] LT',
    lastWeek: 'dddd [lepas pukul] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dalam %s',
    past: '%s yang lepas',
    s: 'beberapa saat',
    ss: '%d saat',
    m: 'seminit',
    mm: '%d minit',
    h: 'sejam',
    hh: '%d jam',
    d: 'sehari',
    dd: '%d hari',
    M: 'sebulan',
    MM: '%d bulan',
    y: 'setahun',
    yy: '%d tahun'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/mt.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/mt.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('mt', {
  months: 'Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru'.split('_'),
  monthsShort: 'Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ'.split('_'),
  weekdays: 'Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt'.split('_'),
  weekdaysShort: 'Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib'.split('_'),
  weekdaysMin: 'Ħa_Tn_Tl_Er_Ħa_Ġi_Si'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Illum fil-]LT',
    nextDay: '[Għada fil-]LT',
    nextWeek: 'dddd [fil-]LT',
    lastDay: '[Il-bieraħ fil-]LT',
    lastWeek: 'dddd [li għadda] [fil-]LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'f’ %s',
    past: '%s ilu',
    s: 'ftit sekondi',
    ss: '%d sekondi',
    m: 'minuta',
    mm: '%d minuti',
    h: 'siegħa',
    hh: '%d siegħat',
    d: 'ġurnata',
    dd: '%d ġranet',
    M: 'xahar',
    MM: '%d xhur',
    y: 'sena',
    yy: '%d sni'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/my.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/my.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '၁',
  2: '၂',
  3: '၃',
  4: '၄',
  5: '၅',
  6: '၆',
  7: '၇',
  8: '၈',
  9: '၉',
  0: '၀'
},
    numberMap = {
  '၁': '1',
  '၂': '2',
  '၃': '3',
  '၄': '4',
  '၅': '5',
  '၆': '6',
  '၇': '7',
  '၈': '8',
  '၉': '9',
  '၀': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('my', {
  months: 'ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ'.split('_'),
  monthsShort: 'ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ'.split('_'),
  weekdays: 'တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ'.split('_'),
  weekdaysShort: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),
  weekdaysMin: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[ယနေ.] LT [မှာ]',
    nextDay: '[မနက်ဖြန်] LT [မှာ]',
    nextWeek: 'dddd LT [မှာ]',
    lastDay: '[မနေ.က] LT [မှာ]',
    lastWeek: '[ပြီးခဲ့သော] dddd LT [မှာ]',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'လာမည့် %s မှာ',
    past: 'လွန်ခဲ့သော %s က',
    s: 'စက္ကန်.အနည်းငယ်',
    ss: '%d စက္ကန့်',
    m: 'တစ်မိနစ်',
    mm: '%d မိနစ်',
    h: 'တစ်နာရီ',
    hh: '%d နာရီ',
    d: 'တစ်ရက်',
    dd: '%d ရက်',
    M: 'တစ်လ',
    MM: '%d လ',
    y: 'တစ်နှစ်',
    yy: '%d နှစ်'
  },
  preparse: function preparse(string) {
    return string.replace(/[၁၂၃၄၅၆၇၈၉၀]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nb.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/nb.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nb', {
  months: 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
  monthsShort: 'jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),
  monthsParseExact: true,
  weekdays: 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
  weekdaysShort: 'sø._ma._ti._on._to._fr._lø.'.split('_'),
  weekdaysMin: 'sø_ma_ti_on_to_fr_lø'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY [kl.] HH:mm',
    LLLL: 'dddd D. MMMM YYYY [kl.] HH:mm'
  },
  calendar: {
    sameDay: '[i dag kl.] LT',
    nextDay: '[i morgen kl.] LT',
    nextWeek: 'dddd [kl.] LT',
    lastDay: '[i går kl.] LT',
    lastWeek: '[forrige] dddd [kl.] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: '%s siden',
    s: 'noen sekunder',
    ss: '%d sekunder',
    m: 'ett minutt',
    mm: '%d minutter',
    h: 'en time',
    hh: '%d timer',
    d: 'en dag',
    dd: '%d dager',
    w: 'en uke',
    ww: '%d uker',
    M: 'en måned',
    MM: '%d måneder',
    y: 'ett år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ne.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ne.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '१',
  2: '२',
  3: '३',
  4: '४',
  5: '५',
  6: '६',
  7: '७',
  8: '८',
  9: '९',
  0: '०'
},
    numberMap = {
  '१': '1',
  '२': '2',
  '३': '3',
  '४': '4',
  '५': '5',
  '६': '6',
  '७': '7',
  '८': '8',
  '९': '9',
  '०': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ne', {
  months: 'जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर'.split('_'),
  monthsShort: 'जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.'.split('_'),
  monthsParseExact: true,
  weekdays: 'आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार'.split('_'),
  weekdaysShort: 'आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.'.split('_'),
  weekdaysMin: 'आ._सो._मं._बु._बि._शु._श.'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'Aको h:mm बजे',
    LTS: 'Aको h:mm:ss बजे',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, Aको h:mm बजे',
    LLLL: 'dddd, D MMMM YYYY, Aको h:mm बजे'
  },
  preparse: function preparse(string) {
    return string.replace(/[१२३४५६७८९०]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /राति|बिहान|दिउँसो|साँझ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'राति') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'बिहान') {
      return hour;
    } else if (meridiem === 'दिउँसो') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'साँझ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 3) {
      return 'राति';
    } else if (hour < 12) {
      return 'बिहान';
    } else if (hour < 16) {
      return 'दिउँसो';
    } else if (hour < 20) {
      return 'साँझ';
    } else {
      return 'राति';
    }
  },
  calendar: {
    sameDay: '[आज] LT',
    nextDay: '[भोलि] LT',
    nextWeek: '[आउँदो] dddd[,] LT',
    lastDay: '[हिजो] LT',
    lastWeek: '[गएको] dddd[,] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sमा',
    past: '%s अगाडि',
    s: 'केही क्षण',
    ss: '%d सेकेण्ड',
    m: 'एक मिनेट',
    mm: '%d मिनेट',
    h: 'एक घण्टा',
    hh: '%d घण्टा',
    d: 'एक दिन',
    dd: '%d दिन',
    M: 'एक महिना',
    MM: '%d महिना',
    y: 'एक बर्ष',
    yy: '%d बर्ष'
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nl-be.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/nl-be.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),
    monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_'),
    monthsParse = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i],
    monthsRegex = /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nl-be', {
  months: 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortWithDots;
    } else if (/-MMM-/.test(format)) {
      return monthsShortWithoutDots[m.month()];
    } else {
      return monthsShortWithDots[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,
  monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
  weekdaysShort: 'zo._ma._di._wo._do._vr._za.'.split('_'),
  weekdaysMin: 'zo_ma_di_wo_do_vr_za'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[vandaag om] LT',
    nextDay: '[morgen om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[gisteren om] LT',
    lastWeek: '[afgelopen] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'over %s',
    past: '%s geleden',
    s: 'een paar seconden',
    ss: '%d seconden',
    m: 'één minuut',
    mm: '%d minuten',
    h: 'één uur',
    hh: '%d uur',
    d: 'één dag',
    dd: '%d dagen',
    M: 'één maand',
    MM: '%d maanden',
    y: 'één jaar',
    yy: '%d jaar'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/nl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),
    monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_'),
    monthsParse = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i],
    monthsRegex = /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nl', {
  months: 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
  monthsShort: function monthsShort(m, format) {
    if (!m) {
      return monthsShortWithDots;
    } else if (/-MMM-/.test(format)) {
      return monthsShortWithoutDots[m.month()];
    } else {
      return monthsShortWithDots[m.month()];
    }
  },
  monthsRegex: monthsRegex,
  monthsShortRegex: monthsRegex,
  monthsStrictRegex: /^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,
  monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
  weekdaysShort: 'zo._ma._di._wo._do._vr._za.'.split('_'),
  weekdaysMin: 'zo_ma_di_wo_do_vr_za'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD-MM-YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[vandaag om] LT',
    nextDay: '[morgen om] LT',
    nextWeek: 'dddd [om] LT',
    lastDay: '[gisteren om] LT',
    lastWeek: '[afgelopen] dddd [om] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'over %s',
    past: '%s geleden',
    s: 'een paar seconden',
    ss: '%d seconden',
    m: 'één minuut',
    mm: '%d minuten',
    h: 'één uur',
    hh: '%d uur',
    d: 'één dag',
    dd: '%d dagen',
    w: 'één week',
    ww: '%d weken',
    M: 'één maand',
    MM: '%d maanden',
    y: 'één jaar',
    yy: '%d jaar'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
  ordinal: function ordinal(number) {
    return number + (number === 1 || number === 8 || number >= 20 ? 'ste' : 'de');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/nn.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/nn.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('nn', {
  months: 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
  monthsShort: 'jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),
  monthsParseExact: true,
  weekdays: 'sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag'.split('_'),
  weekdaysShort: 'su._må._ty._on._to._fr._lau.'.split('_'),
  weekdaysMin: 'su_må_ty_on_to_fr_la'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY [kl.] H:mm',
    LLLL: 'dddd D. MMMM YYYY [kl.] HH:mm'
  },
  calendar: {
    sameDay: '[I dag klokka] LT',
    nextDay: '[I morgon klokka] LT',
    nextWeek: 'dddd [klokka] LT',
    lastDay: '[I går klokka] LT',
    lastWeek: '[Føregåande] dddd [klokka] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: '%s sidan',
    s: 'nokre sekund',
    ss: '%d sekund',
    m: 'eit minutt',
    mm: '%d minutt',
    h: 'ein time',
    hh: '%d timar',
    d: 'ein dag',
    dd: '%d dagar',
    w: 'ei veke',
    ww: '%d veker',
    M: 'ein månad',
    MM: '%d månader',
    y: 'eit år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/oc-lnc.js":
/*!***************************************************!*\
  !*** ./node_modules/moment/dist/locale/oc-lnc.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('oc-lnc', {
  months: {
    standalone: 'genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre'.split('_'),
    format: "de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split('_'),
    isFormat: /D[oD]?(\s)+MMMM/
  },
  monthsShort: 'gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte'.split('_'),
  weekdaysShort: 'dg._dl._dm._dc._dj._dv._ds.'.split('_'),
  weekdaysMin: 'dg_dl_dm_dc_dj_dv_ds'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM [de] YYYY',
    ll: 'D MMM YYYY',
    LLL: 'D MMMM [de] YYYY [a] H:mm',
    lll: 'D MMM YYYY, H:mm',
    LLLL: 'dddd D MMMM [de] YYYY [a] H:mm',
    llll: 'ddd D MMM YYYY, H:mm'
  },
  calendar: {
    sameDay: '[uèi a] LT',
    nextDay: '[deman a] LT',
    nextWeek: 'dddd [a] LT',
    lastDay: '[ièr a] LT',
    lastWeek: 'dddd [passat a] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: "d'aquí %s",
    past: 'fa %s',
    s: 'unas segondas',
    ss: '%d segondas',
    m: 'una minuta',
    mm: '%d minutas',
    h: 'una ora',
    hh: '%d oras',
    d: 'un jorn',
    dd: '%d jorns',
    M: 'un mes',
    MM: '%d meses',
    y: 'un an',
    yy: '%d ans'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(r|n|t|è|a)/,
  ordinal: function ordinal(number, period) {
    var output = number === 1 ? 'r' : number === 2 ? 'n' : number === 3 ? 'r' : number === 4 ? 't' : 'è';

    if (period === 'w' || period === 'W') {
      output = 'a';
    }

    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pa-in.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/pa-in.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '੧',
  2: '੨',
  3: '੩',
  4: '੪',
  5: '੫',
  6: '੬',
  7: '੭',
  8: '੮',
  9: '੯',
  0: '੦'
},
    numberMap = {
  '੧': '1',
  '੨': '2',
  '੩': '3',
  '੪': '4',
  '੫': '5',
  '੬': '6',
  '੭': '7',
  '੮': '8',
  '੯': '9',
  '੦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pa-in', {
  months: 'ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ'.split('_'),
  monthsShort: 'ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ'.split('_'),
  weekdays: 'ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ'.split('_'),
  weekdaysShort: 'ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ'.split('_'),
  weekdaysMin: 'ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm ਵਜੇ',
    LTS: 'A h:mm:ss ਵਜੇ',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm ਵਜੇ',
    LLLL: 'dddd, D MMMM YYYY, A h:mm ਵਜੇ'
  },
  calendar: {
    sameDay: '[ਅਜ] LT',
    nextDay: '[ਕਲ] LT',
    nextWeek: '[ਅਗਲਾ] dddd, LT',
    lastDay: '[ਕਲ] LT',
    lastWeek: '[ਪਿਛਲੇ] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s ਵਿੱਚ',
    past: '%s ਪਿਛਲੇ',
    s: 'ਕੁਝ ਸਕਿੰਟ',
    ss: '%d ਸਕਿੰਟ',
    m: 'ਇਕ ਮਿੰਟ',
    mm: '%d ਮਿੰਟ',
    h: 'ਇੱਕ ਘੰਟਾ',
    hh: '%d ਘੰਟੇ',
    d: 'ਇੱਕ ਦਿਨ',
    dd: '%d ਦਿਨ',
    M: 'ਇੱਕ ਮਹੀਨਾ',
    MM: '%d ਮਹੀਨੇ',
    y: 'ਇੱਕ ਸਾਲ',
    yy: '%d ਸਾਲ'
  },
  preparse: function preparse(string) {
    return string.replace(/[੧੨੩੪੫੬੭੮੯੦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'ਰਾਤ') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ਸਵੇਰ') {
      return hour;
    } else if (meridiem === 'ਦੁਪਹਿਰ') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'ਸ਼ਾਮ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ਰਾਤ';
    } else if (hour < 10) {
      return 'ਸਵੇਰ';
    } else if (hour < 17) {
      return 'ਦੁਪਹਿਰ';
    } else if (hour < 20) {
      return 'ਸ਼ਾਮ';
    } else {
      return 'ਰਾਤ';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/pl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var monthsNominative = 'styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień'.split('_'),
    monthsSubjective = 'stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia'.split('_'),
    monthsParse = [/^sty/i, /^lut/i, /^mar/i, /^kwi/i, /^maj/i, /^cze/i, /^lip/i, /^sie/i, /^wrz/i, /^paź/i, /^lis/i, /^gru/i];

function plural(n) {
  return n % 10 < 5 && n % 10 > 1 && ~~(n / 10) % 10 !== 1;
}

function translate(number, withoutSuffix, key) {
  var result = number + ' ';

  switch (key) {
    case 'ss':
      return result + (plural(number) ? 'sekundy' : 'sekund');

    case 'm':
      return withoutSuffix ? 'minuta' : 'minutę';

    case 'mm':
      return result + (plural(number) ? 'minuty' : 'minut');

    case 'h':
      return withoutSuffix ? 'godzina' : 'godzinę';

    case 'hh':
      return result + (plural(number) ? 'godziny' : 'godzin');

    case 'ww':
      return result + (plural(number) ? 'tygodnie' : 'tygodni');

    case 'MM':
      return result + (plural(number) ? 'miesiące' : 'miesięcy');

    case 'yy':
      return result + (plural(number) ? 'lata' : 'lat');
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pl', {
  months: function months(momentToFormat, format) {
    if (!momentToFormat) {
      return monthsNominative;
    } else if (/D MMMM/.test(format)) {
      return monthsSubjective[momentToFormat.month()];
    } else {
      return monthsNominative[momentToFormat.month()];
    }
  },
  monthsShort: 'sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru'.split('_'),
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  weekdays: 'niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota'.split('_'),
  weekdaysShort: 'ndz_pon_wt_śr_czw_pt_sob'.split('_'),
  weekdaysMin: 'Nd_Pn_Wt_Śr_Cz_Pt_So'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Dziś o] LT',
    nextDay: '[Jutro o] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[W niedzielę o] LT';

        case 2:
          return '[We wtorek o] LT';

        case 3:
          return '[W środę o] LT';

        case 6:
          return '[W sobotę o] LT';

        default:
          return '[W] dddd [o] LT';
      }
    },
    lastDay: '[Wczoraj o] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[W zeszłą niedzielę o] LT';

        case 3:
          return '[W zeszłą środę o] LT';

        case 6:
          return '[W zeszłą sobotę o] LT';

        default:
          return '[W zeszły] dddd [o] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: '%s temu',
    s: 'kilka sekund',
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: '1 dzień',
    dd: '%d dni',
    w: 'tydzień',
    ww: translate,
    M: 'miesiąc',
    MM: translate,
    y: 'rok',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pt-br.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/pt-br.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pt-br', {
  months: 'janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),
  monthsShort: 'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),
  weekdays: 'domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado'.split('_'),
  weekdaysShort: 'dom_seg_ter_qua_qui_sex_sáb'.split('_'),
  weekdaysMin: 'do_2ª_3ª_4ª_5ª_6ª_sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY [às] HH:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'
  },
  calendar: {
    sameDay: '[Hoje às] LT',
    nextDay: '[Amanhã às] LT',
    nextWeek: 'dddd [às] LT',
    lastDay: '[Ontem às] LT',
    lastWeek: function lastWeek() {
      return this.day() === 0 || this.day() === 6 ? '[Último] dddd [às] LT' : '[Última] dddd [às] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'em %s',
    past: 'há %s',
    s: 'poucos segundos',
    ss: '%d segundos',
    m: 'um minuto',
    mm: '%d minutos',
    h: 'uma hora',
    hh: '%d horas',
    d: 'um dia',
    dd: '%d dias',
    M: 'um mês',
    MM: '%d meses',
    y: 'um ano',
    yy: '%d anos'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  invalidDate: 'Data inválida'
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/pt.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/pt.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('pt', {
  months: 'janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),
  monthsShort: 'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),
  weekdays: 'Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado'.split('_'),
  weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),
  weekdaysMin: 'Do_2ª_3ª_4ª_5ª_6ª_Sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D [de] MMMM [de] YYYY',
    LLL: 'D [de] MMMM [de] YYYY HH:mm',
    LLLL: 'dddd, D [de] MMMM [de] YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Hoje às] LT',
    nextDay: '[Amanhã às] LT',
    nextWeek: 'dddd [às] LT',
    lastDay: '[Ontem às] LT',
    lastWeek: function lastWeek() {
      return this.day() === 0 || this.day() === 6 ? '[Último] dddd [às] LT' : '[Última] dddd [às] LT';
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'em %s',
    past: 'há %s',
    s: 'segundos',
    ss: '%d segundos',
    m: 'um minuto',
    mm: '%d minutos',
    h: 'uma hora',
    hh: '%d horas',
    d: 'um dia',
    dd: '%d dias',
    w: 'uma semana',
    ww: '%d semanas',
    M: 'um mês',
    MM: '%d meses',
    y: 'um ano',
    yy: '%d anos'
  },
  dayOfMonthOrdinalParse: /\d{1,2}º/,
  ordinal: '%dº',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ro.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ro.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: 'secunde',
    mm: 'minute',
    hh: 'ore',
    dd: 'zile',
    ww: 'săptămâni',
    MM: 'luni',
    yy: 'ani'
  },
      separator = ' ';

  if (number % 100 >= 20 || number >= 100 && number % 100 === 0) {
    separator = ' de ';
  }

  return number + separator + format[key];
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ro', {
  months: 'ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie'.split('_'),
  monthsShort: 'ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'duminică_luni_marți_miercuri_joi_vineri_sâmbătă'.split('_'),
  weekdaysShort: 'Dum_Lun_Mar_Mie_Joi_Vin_Sâm'.split('_'),
  weekdaysMin: 'Du_Lu_Ma_Mi_Jo_Vi_Sâ'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY H:mm',
    LLLL: 'dddd, D MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[azi la] LT',
    nextDay: '[mâine la] LT',
    nextWeek: 'dddd [la] LT',
    lastDay: '[ieri la] LT',
    lastWeek: '[fosta] dddd [la] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'peste %s',
    past: '%s în urmă',
    s: 'câteva secunde',
    ss: relativeTimeWithPlural,
    m: 'un minut',
    mm: relativeTimeWithPlural,
    h: 'o oră',
    hh: relativeTimeWithPlural,
    d: 'o zi',
    dd: relativeTimeWithPlural,
    w: 'o săptămână',
    ww: relativeTimeWithPlural,
    M: 'o lună',
    MM: relativeTimeWithPlural,
    y: 'un an',
    yy: relativeTimeWithPlural
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ru.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ru.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(word, num) {
  var forms = word.split('_');
  return num % 10 === 1 && num % 100 !== 11 ? forms[0] : num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2];
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: withoutSuffix ? 'секунда_секунды_секунд' : 'секунду_секунды_секунд',
    mm: withoutSuffix ? 'минута_минуты_минут' : 'минуту_минуты_минут',
    hh: 'час_часа_часов',
    dd: 'день_дня_дней',
    ww: 'неделя_недели_недель',
    MM: 'месяц_месяца_месяцев',
    yy: 'год_года_лет'
  };

  if (key === 'm') {
    return withoutSuffix ? 'минута' : 'минуту';
  } else {
    return number + ' ' + plural(format[key], +number);
  }
}

var monthsParse = [/^янв/i, /^фев/i, /^мар/i, /^апр/i, /^ма[йя]/i, /^июн/i, /^июл/i, /^авг/i, /^сен/i, /^окт/i, /^ноя/i, /^дек/i];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ru', {
  months: {
    format: 'января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря'.split('_'),
    standalone: 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_')
  },
  monthsShort: {
    format: 'янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.'.split('_'),
    standalone: 'янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.'.split('_')
  },
  weekdays: {
    standalone: 'воскресенье_понедельник_вторник_среда_четверг_пятница_суббота'.split('_'),
    format: 'воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу'.split('_'),
    isFormat: /\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/
  },
  weekdaysShort: 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
  weekdaysMin: 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
  monthsParse: monthsParse,
  longMonthsParse: monthsParse,
  shortMonthsParse: monthsParse,
  monthsRegex: /^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,
  monthsShortRegex: /^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,
  monthsStrictRegex: /^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,
  monthsShortStrictRegex: /^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY г.',
    LLL: 'D MMMM YYYY г., H:mm',
    LLLL: 'dddd, D MMMM YYYY г., H:mm'
  },
  calendar: {
    sameDay: '[Сегодня, в] LT',
    nextDay: '[Завтра, в] LT',
    lastDay: '[Вчера, в] LT',
    nextWeek: function nextWeek(now) {
      if (now.week() !== this.week()) {
        switch (this.day()) {
          case 0:
            return '[В следующее] dddd, [в] LT';

          case 1:
          case 2:
          case 4:
            return '[В следующий] dddd, [в] LT';

          case 3:
          case 5:
          case 6:
            return '[В следующую] dddd, [в] LT';
        }
      } else {
        if (this.day() === 2) {
          return '[Во] dddd, [в] LT';
        } else {
          return '[В] dddd, [в] LT';
        }
      }
    },
    lastWeek: function lastWeek(now) {
      if (now.week() !== this.week()) {
        switch (this.day()) {
          case 0:
            return '[В прошлое] dddd, [в] LT';

          case 1:
          case 2:
          case 4:
            return '[В прошлый] dddd, [в] LT';

          case 3:
          case 5:
          case 6:
            return '[В прошлую] dddd, [в] LT';
        }
      } else {
        if (this.day() === 2) {
          return '[Во] dddd, [в] LT';
        } else {
          return '[В] dddd, [в] LT';
        }
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'через %s',
    past: '%s назад',
    s: 'несколько секунд',
    ss: relativeTimeWithPlural,
    m: relativeTimeWithPlural,
    mm: relativeTimeWithPlural,
    h: 'час',
    hh: relativeTimeWithPlural,
    d: 'день',
    dd: relativeTimeWithPlural,
    w: 'неделя',
    ww: relativeTimeWithPlural,
    M: 'месяц',
    MM: relativeTimeWithPlural,
    y: 'год',
    yy: relativeTimeWithPlural
  },
  meridiemParse: /ночи|утра|дня|вечера/i,
  isPM: function isPM(input) {
    return /^(дня|вечера)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ночи';
    } else if (hour < 12) {
      return 'утра';
    } else if (hour < 17) {
      return 'дня';
    } else {
      return 'вечера';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(й|го|я)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'M':
      case 'd':
      case 'DDD':
        return number + '-й';

      case 'D':
        return number + '-го';

      case 'w':
      case 'W':
        return number + '-я';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sd.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sd.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['جنوري', 'فيبروري', 'مارچ', 'اپريل', 'مئي', 'جون', 'جولاءِ', 'آگسٽ', 'سيپٽمبر', 'آڪٽوبر', 'نومبر', 'ڊسمبر'],
    days = ['آچر', 'سومر', 'اڱارو', 'اربع', 'خميس', 'جمع', 'ڇنڇر'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sd', {
  months: months,
  monthsShort: months,
  weekdays: days,
  weekdaysShort: days,
  weekdaysMin: days,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd، D MMMM YYYY HH:mm'
  },
  meridiemParse: /صبح|شام/,
  isPM: function isPM(input) {
    return 'شام' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'صبح';
    }

    return 'شام';
  },
  calendar: {
    sameDay: '[اڄ] LT',
    nextDay: '[سڀاڻي] LT',
    nextWeek: 'dddd [اڳين هفتي تي] LT',
    lastDay: '[ڪالهه] LT',
    lastWeek: '[گزريل هفتي] dddd [تي] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s پوء',
    past: '%s اڳ',
    s: 'چند سيڪنڊ',
    ss: '%d سيڪنڊ',
    m: 'هڪ منٽ',
    mm: '%d منٽ',
    h: 'هڪ ڪلاڪ',
    hh: '%d ڪلاڪ',
    d: 'هڪ ڏينهن',
    dd: '%d ڏينهن',
    M: 'هڪ مهينو',
    MM: '%d مهينا',
    y: 'هڪ سال',
    yy: '%d سال'
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/se.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/se.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('se', {
  months: 'ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu'.split('_'),
  monthsShort: 'ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov'.split('_'),
  weekdays: 'sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat'.split('_'),
  weekdaysShort: 'sotn_vuos_maŋ_gask_duor_bear_láv'.split('_'),
  weekdaysMin: 's_v_m_g_d_b_L'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'MMMM D. [b.] YYYY',
    LLL: 'MMMM D. [b.] YYYY [ti.] HH:mm',
    LLLL: 'dddd, MMMM D. [b.] YYYY [ti.] HH:mm'
  },
  calendar: {
    sameDay: '[otne ti] LT',
    nextDay: '[ihttin ti] LT',
    nextWeek: 'dddd [ti] LT',
    lastDay: '[ikte ti] LT',
    lastWeek: '[ovddit] dddd [ti] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s geažes',
    past: 'maŋit %s',
    s: 'moadde sekunddat',
    ss: '%d sekunddat',
    m: 'okta minuhta',
    mm: '%d minuhtat',
    h: 'okta diimmu',
    hh: '%d diimmut',
    d: 'okta beaivi',
    dd: '%d beaivvit',
    M: 'okta mánnu',
    MM: '%d mánut',
    y: 'okta jahki',
    yy: '%d jagit'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/si.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/si.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('si', {
  months: 'ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්'.split('_'),
  monthsShort: 'ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ'.split('_'),
  weekdays: 'ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා'.split('_'),
  weekdaysShort: 'ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන'.split('_'),
  weekdaysMin: 'ඉ_ස_අ_බ_බ්‍ර_සි_සෙ'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'a h:mm',
    LTS: 'a h:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY MMMM D',
    LLL: 'YYYY MMMM D, a h:mm',
    LLLL: 'YYYY MMMM D [වැනි] dddd, a h:mm:ss'
  },
  calendar: {
    sameDay: '[අද] LT[ට]',
    nextDay: '[හෙට] LT[ට]',
    nextWeek: 'dddd LT[ට]',
    lastDay: '[ඊයේ] LT[ට]',
    lastWeek: '[පසුගිය] dddd LT[ට]',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%sකින්',
    past: '%sකට පෙර',
    s: 'තත්පර කිහිපය',
    ss: 'තත්පර %d',
    m: 'මිනිත්තුව',
    mm: 'මිනිත්තු %d',
    h: 'පැය',
    hh: 'පැය %d',
    d: 'දිනය',
    dd: 'දින %d',
    M: 'මාසය',
    MM: 'මාස %d',
    y: 'වසර',
    yy: 'වසර %d'
  },
  dayOfMonthOrdinalParse: /\d{1,2} වැනි/,
  ordinal: function ordinal(number) {
    return number + ' වැනි';
  },
  meridiemParse: /පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,
  isPM: function isPM(input) {
    return input === 'ප.ව.' || input === 'පස් වරු';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? 'ප.ව.' : 'පස් වරු';
    } else {
      return isLower ? 'පෙ.ව.' : 'පෙර වරු';
    }
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = 'január_február_marec_apríl_máj_jún_júl_august_september_október_november_december'.split('_'),
    monthsShort = 'jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec'.split('_');

function plural(n) {
  return n > 1 && n < 5;
}

function translate(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'pár sekúnd' : 'pár sekundami';

    case 'ss':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'sekundy' : 'sekúnd');
      } else {
        return result + 'sekundami';
      }

    case 'm':
      return withoutSuffix ? 'minúta' : isFuture ? 'minútu' : 'minútou';

    case 'mm':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'minúty' : 'minút');
      } else {
        return result + 'minútami';
      }

    case 'h':
      return withoutSuffix ? 'hodina' : isFuture ? 'hodinu' : 'hodinou';

    case 'hh':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'hodiny' : 'hodín');
      } else {
        return result + 'hodinami';
      }

    case 'd':
      return withoutSuffix || isFuture ? 'deň' : 'dňom';

    case 'dd':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'dni' : 'dní');
      } else {
        return result + 'dňami';
      }

    case 'M':
      return withoutSuffix || isFuture ? 'mesiac' : 'mesiacom';

    case 'MM':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'mesiace' : 'mesiacov');
      } else {
        return result + 'mesiacmi';
      }

    case 'y':
      return withoutSuffix || isFuture ? 'rok' : 'rokom';

    case 'yy':
      if (withoutSuffix || isFuture) {
        return result + (plural(number) ? 'roky' : 'rokov');
      } else {
        return result + 'rokmi';
      }

  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sk', {
  months: months,
  monthsShort: monthsShort,
  weekdays: 'nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota'.split('_'),
  weekdaysShort: 'ne_po_ut_st_št_pi_so'.split('_'),
  weekdaysMin: 'ne_po_ut_st_št_pi_so'.split('_'),
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[dnes o] LT',
    nextDay: '[zajtra o] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[v nedeľu o] LT';

        case 1:
        case 2:
          return '[v] dddd [o] LT';

        case 3:
          return '[v stredu o] LT';

        case 4:
          return '[vo štvrtok o] LT';

        case 5:
          return '[v piatok o] LT';

        case 6:
          return '[v sobotu o] LT';
      }
    },
    lastDay: '[včera o] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[minulú nedeľu o] LT';

        case 1:
        case 2:
          return '[minulý] dddd [o] LT';

        case 3:
          return '[minulú stredu o] LT';

        case 4:
        case 5:
          return '[minulý] dddd [o] LT';

        case 6:
          return '[minulú sobotu o] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'pred %s',
    s: translate,
    ss: translate,
    m: translate,
    mm: translate,
    h: translate,
    hh: translate,
    d: translate,
    dd: translate,
    M: translate,
    MM: translate,
    y: translate,
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sl.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sl.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var result = number + ' ';

  switch (key) {
    case 's':
      return withoutSuffix || isFuture ? 'nekaj sekund' : 'nekaj sekundami';

    case 'ss':
      if (number === 1) {
        result += withoutSuffix ? 'sekundo' : 'sekundi';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'sekundi' : 'sekundah';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'sekunde' : 'sekundah';
      } else {
        result += 'sekund';
      }

      return result;

    case 'm':
      return withoutSuffix ? 'ena minuta' : 'eno minuto';

    case 'mm':
      if (number === 1) {
        result += withoutSuffix ? 'minuta' : 'minuto';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'minuti' : 'minutama';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'minute' : 'minutami';
      } else {
        result += withoutSuffix || isFuture ? 'minut' : 'minutami';
      }

      return result;

    case 'h':
      return withoutSuffix ? 'ena ura' : 'eno uro';

    case 'hh':
      if (number === 1) {
        result += withoutSuffix ? 'ura' : 'uro';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'uri' : 'urama';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'ure' : 'urami';
      } else {
        result += withoutSuffix || isFuture ? 'ur' : 'urami';
      }

      return result;

    case 'd':
      return withoutSuffix || isFuture ? 'en dan' : 'enim dnem';

    case 'dd':
      if (number === 1) {
        result += withoutSuffix || isFuture ? 'dan' : 'dnem';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'dni' : 'dnevoma';
      } else {
        result += withoutSuffix || isFuture ? 'dni' : 'dnevi';
      }

      return result;

    case 'M':
      return withoutSuffix || isFuture ? 'en mesec' : 'enim mesecem';

    case 'MM':
      if (number === 1) {
        result += withoutSuffix || isFuture ? 'mesec' : 'mesecem';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'meseca' : 'mesecema';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'mesece' : 'meseci';
      } else {
        result += withoutSuffix || isFuture ? 'mesecev' : 'meseci';
      }

      return result;

    case 'y':
      return withoutSuffix || isFuture ? 'eno leto' : 'enim letom';

    case 'yy':
      if (number === 1) {
        result += withoutSuffix || isFuture ? 'leto' : 'letom';
      } else if (number === 2) {
        result += withoutSuffix || isFuture ? 'leti' : 'letoma';
      } else if (number < 5) {
        result += withoutSuffix || isFuture ? 'leta' : 'leti';
      } else {
        result += withoutSuffix || isFuture ? 'let' : 'leti';
      }

      return result;
  }
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sl', {
  months: 'januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota'.split('_'),
  weekdaysShort: 'ned._pon._tor._sre._čet._pet._sob.'.split('_'),
  weekdaysMin: 'ne_po_to_sr_če_pe_so'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD. MM. YYYY',
    LL: 'D. MMMM YYYY',
    LLL: 'D. MMMM YYYY H:mm',
    LLLL: 'dddd, D. MMMM YYYY H:mm'
  },
  calendar: {
    sameDay: '[danes ob] LT',
    nextDay: '[jutri ob] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[v] [nedeljo] [ob] LT';

        case 3:
          return '[v] [sredo] [ob] LT';

        case 6:
          return '[v] [soboto] [ob] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[v] dddd [ob] LT';
      }
    },
    lastDay: '[včeraj ob] LT',
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
          return '[prejšnjo] [nedeljo] [ob] LT';

        case 3:
          return '[prejšnjo] [sredo] [ob] LT';

        case 6:
          return '[prejšnjo] [soboto] [ob] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[prejšnji] dddd [ob] LT';
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'čez %s',
    past: 'pred %s',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sq.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sq.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sq', {
  months: 'Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor'.split('_'),
  monthsShort: 'Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj'.split('_'),
  weekdays: 'E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë'.split('_'),
  weekdaysShort: 'Die_Hën_Mar_Mër_Enj_Pre_Sht'.split('_'),
  weekdaysMin: 'D_H_Ma_Më_E_P_Sh'.split('_'),
  weekdaysParseExact: true,
  meridiemParse: /PD|MD/,
  isPM: function isPM(input) {
    return input.charAt(0) === 'M';
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    return hours < 12 ? 'PD' : 'MD';
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Sot në] LT',
    nextDay: '[Nesër në] LT',
    nextWeek: 'dddd [në] LT',
    lastDay: '[Dje në] LT',
    lastWeek: 'dddd [e kaluar në] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'në %s',
    past: '%s më parë',
    s: 'disa sekonda',
    ss: '%d sekonda',
    m: 'një minutë',
    mm: '%d minuta',
    h: 'një orë',
    hh: '%d orë',
    d: 'një ditë',
    dd: '%d ditë',
    M: 'një muaj',
    MM: '%d muaj',
    y: 'një vit',
    yy: '%d vite'
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sr-cyrl.js":
/*!****************************************************!*\
  !*** ./node_modules/moment/dist/locale/sr-cyrl.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var translator = {
  words: {
    ss: ['секунда', 'секунде', 'секунди'],
    m: ['један минут', 'једне минуте'],
    mm: ['минут', 'минуте', 'минута'],
    h: ['један сат', 'једног сата'],
    hh: ['сат', 'сата', 'сати'],
    dd: ['дан', 'дана', 'дана'],
    MM: ['месец', 'месеца', 'месеци'],
    yy: ['година', 'године', 'година']
  },
  correctGrammaticalCase: function correctGrammaticalCase(number, wordKey) {
    return number === 1 ? wordKey[0] : number >= 2 && number <= 4 ? wordKey[1] : wordKey[2];
  },
  translate: function translate(number, withoutSuffix, key) {
    var wordKey = translator.words[key];

    if (key.length === 1) {
      return withoutSuffix ? wordKey[0] : wordKey[1];
    } else {
      return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sr-cyrl', {
  months: 'јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар'.split('_'),
  monthsShort: 'јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.'.split('_'),
  monthsParseExact: true,
  weekdays: 'недеља_понедељак_уторак_среда_четвртак_петак_субота'.split('_'),
  weekdaysShort: 'нед._пон._уто._сре._чет._пет._суб.'.split('_'),
  weekdaysMin: 'не_по_ут_ср_че_пе_су'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D. M. YYYY.',
    LL: 'D. MMMM YYYY.',
    LLL: 'D. MMMM YYYY. H:mm',
    LLLL: 'dddd, D. MMMM YYYY. H:mm'
  },
  calendar: {
    sameDay: '[данас у] LT',
    nextDay: '[сутра у] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[у] [недељу] [у] LT';

        case 3:
          return '[у] [среду] [у] LT';

        case 6:
          return '[у] [суботу] [у] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[у] dddd [у] LT';
      }
    },
    lastDay: '[јуче у] LT',
    lastWeek: function lastWeek() {
      var lastWeekDays = ['[прошле] [недеље] [у] LT', '[прошлог] [понедељка] [у] LT', '[прошлог] [уторка] [у] LT', '[прошле] [среде] [у] LT', '[прошлог] [четвртка] [у] LT', '[прошлог] [петка] [у] LT', '[прошле] [суботе] [у] LT'];
      return lastWeekDays[this.day()];
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'за %s',
    past: 'пре %s',
    s: 'неколико секунди',
    ss: translator.translate,
    m: translator.translate,
    mm: translator.translate,
    h: translator.translate,
    hh: translator.translate,
    d: 'дан',
    dd: translator.translate,
    M: 'месец',
    MM: translator.translate,
    y: 'годину',
    yy: translator.translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var translator = {
  words: {
    ss: ['sekunda', 'sekunde', 'sekundi'],
    m: ['jedan minut', 'jedne minute'],
    mm: ['minut', 'minute', 'minuta'],
    h: ['jedan sat', 'jednog sata'],
    hh: ['sat', 'sata', 'sati'],
    dd: ['dan', 'dana', 'dana'],
    MM: ['mesec', 'meseca', 'meseci'],
    yy: ['godina', 'godine', 'godina']
  },
  correctGrammaticalCase: function correctGrammaticalCase(number, wordKey) {
    return number === 1 ? wordKey[0] : number >= 2 && number <= 4 ? wordKey[1] : wordKey[2];
  },
  translate: function translate(number, withoutSuffix, key) {
    var wordKey = translator.words[key];

    if (key.length === 1) {
      return withoutSuffix ? wordKey[0] : wordKey[1];
    } else {
      return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sr', {
  months: 'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),
  monthsShort: 'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),
  monthsParseExact: true,
  weekdays: 'nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota'.split('_'),
  weekdaysShort: 'ned._pon._uto._sre._čet._pet._sub.'.split('_'),
  weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'D. M. YYYY.',
    LL: 'D. MMMM YYYY.',
    LLL: 'D. MMMM YYYY. H:mm',
    LLLL: 'dddd, D. MMMM YYYY. H:mm'
  },
  calendar: {
    sameDay: '[danas u] LT',
    nextDay: '[sutra u] LT',
    nextWeek: function nextWeek() {
      switch (this.day()) {
        case 0:
          return '[u] [nedelju] [u] LT';

        case 3:
          return '[u] [sredu] [u] LT';

        case 6:
          return '[u] [subotu] [u] LT';

        case 1:
        case 2:
        case 4:
        case 5:
          return '[u] dddd [u] LT';
      }
    },
    lastDay: '[juče u] LT',
    lastWeek: function lastWeek() {
      var lastWeekDays = ['[prošle] [nedelje] [u] LT', '[prošlog] [ponedeljka] [u] LT', '[prošlog] [utorka] [u] LT', '[prošle] [srede] [u] LT', '[prošlog] [četvrtka] [u] LT', '[prošlog] [petka] [u] LT', '[prošle] [subote] [u] LT'];
      return lastWeekDays[this.day()];
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'za %s',
    past: 'pre %s',
    s: 'nekoliko sekundi',
    ss: translator.translate,
    m: translator.translate,
    mm: translator.translate,
    h: translator.translate,
    hh: translator.translate,
    d: 'dan',
    dd: translator.translate,
    M: 'mesec',
    MM: translator.translate,
    y: 'godinu',
    yy: translator.translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ss.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ss.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ss', {
  months: "Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split('_'),
  monthsShort: 'Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo'.split('_'),
  weekdays: 'Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo'.split('_'),
  weekdaysShort: 'Lis_Umb_Lsb_Les_Lsi_Lsh_Umg'.split('_'),
  weekdaysMin: 'Li_Us_Lb_Lt_Ls_Lh_Ug'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Namuhla nga] LT',
    nextDay: '[Kusasa nga] LT',
    nextWeek: 'dddd [nga] LT',
    lastDay: '[Itolo nga] LT',
    lastWeek: 'dddd [leliphelile] [nga] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'nga %s',
    past: 'wenteka nga %s',
    s: 'emizuzwana lomcane',
    ss: '%d mzuzwana',
    m: 'umzuzu',
    mm: '%d emizuzu',
    h: 'lihora',
    hh: '%d emahora',
    d: 'lilanga',
    dd: '%d emalanga',
    M: 'inyanga',
    MM: '%d tinyanga',
    y: 'umnyaka',
    yy: '%d iminyaka'
  },
  meridiemParse: /ekuseni|emini|entsambama|ebusuku/,
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 11) {
      return 'ekuseni';
    } else if (hours < 15) {
      return 'emini';
    } else if (hours < 19) {
      return 'entsambama';
    } else {
      return 'ebusuku';
    }
  },
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'ekuseni') {
      return hour;
    } else if (meridiem === 'emini') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'entsambama' || meridiem === 'ebusuku') {
      if (hour === 0) {
        return 0;
      }

      return hour + 12;
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: '%d',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sv.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sv.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sv', {
  months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
  monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
  weekdays: 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),
  weekdaysShort: 'sön_mån_tis_ons_tor_fre_lör'.split('_'),
  weekdaysMin: 'sö_må_ti_on_to_fr_lö'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY [kl.] HH:mm',
    LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
    lll: 'D MMM YYYY HH:mm',
    llll: 'ddd D MMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Idag] LT',
    nextDay: '[Imorgon] LT',
    lastDay: '[Igår] LT',
    nextWeek: '[På] dddd LT',
    lastWeek: '[I] dddd[s] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'om %s',
    past: 'för %s sedan',
    s: 'några sekunder',
    ss: '%d sekunder',
    m: 'en minut',
    mm: '%d minuter',
    h: 'en timme',
    hh: '%d timmar',
    d: 'en dag',
    dd: '%d dagar',
    M: 'en månad',
    MM: '%d månader',
    y: 'ett år',
    yy: '%d år'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(\:e|\:a)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? ':e' : b === 1 ? ':a' : b === 2 ? ':a' : b === 3 ? ':e' : ':e';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/sw.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/sw.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('sw', {
  months: 'Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba'.split('_'),
  monthsShort: 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des'.split('_'),
  weekdays: 'Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi'.split('_'),
  weekdaysShort: 'Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos'.split('_'),
  weekdaysMin: 'J2_J3_J4_J5_Al_Ij_J1'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'hh:mm A',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[leo saa] LT',
    nextDay: '[kesho saa] LT',
    nextWeek: '[wiki ijayo] dddd [saat] LT',
    lastDay: '[jana] LT',
    lastWeek: '[wiki iliyopita] dddd [saat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s baadaye',
    past: 'tokea %s',
    s: 'hivi punde',
    ss: 'sekunde %d',
    m: 'dakika moja',
    mm: 'dakika %d',
    h: 'saa limoja',
    hh: 'masaa %d',
    d: 'siku moja',
    dd: 'siku %d',
    M: 'mwezi mmoja',
    MM: 'miezi %d',
    y: 'mwaka mmoja',
    yy: 'miaka %d'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ta.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ta.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var symbolMap = {
  1: '௧',
  2: '௨',
  3: '௩',
  4: '௪',
  5: '௫',
  6: '௬',
  7: '௭',
  8: '௮',
  9: '௯',
  0: '௦'
},
    numberMap = {
  '௧': '1',
  '௨': '2',
  '௩': '3',
  '௪': '4',
  '௫': '5',
  '௬': '6',
  '௭': '7',
  '௮': '8',
  '௯': '9',
  '௦': '0'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ta', {
  months: 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
  monthsShort: 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
  weekdays: 'ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை'.split('_'),
  weekdaysShort: 'ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி'.split('_'),
  weekdaysMin: 'ஞா_தி_செ_பு_வி_வெ_ச'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, HH:mm',
    LLLL: 'dddd, D MMMM YYYY, HH:mm'
  },
  calendar: {
    sameDay: '[இன்று] LT',
    nextDay: '[நாளை] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[நேற்று] LT',
    lastWeek: '[கடந்த வாரம்] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s இல்',
    past: '%s முன்',
    s: 'ஒரு சில விநாடிகள்',
    ss: '%d விநாடிகள்',
    m: 'ஒரு நிமிடம்',
    mm: '%d நிமிடங்கள்',
    h: 'ஒரு மணி நேரம்',
    hh: '%d மணி நேரம்',
    d: 'ஒரு நாள்',
    dd: '%d நாட்கள்',
    M: 'ஒரு மாதம்',
    MM: '%d மாதங்கள்',
    y: 'ஒரு வருடம்',
    yy: '%d ஆண்டுகள்'
  },
  dayOfMonthOrdinalParse: /\d{1,2}வது/,
  ordinal: function ordinal(number) {
    return number + 'வது';
  },
  preparse: function preparse(string) {
    return string.replace(/[௧௨௩௪௫௬௭௮௯௦]/g, function (match) {
      return numberMap[match];
    });
  },
  postformat: function postformat(string) {
    return string.replace(/\d/g, function (match) {
      return symbolMap[match];
    });
  },
  meridiemParse: /யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 2) {
      return ' யாமம்';
    } else if (hour < 6) {
      return ' வைகறை';
    } else if (hour < 10) {
      return ' காலை';
    } else if (hour < 14) {
      return ' நண்பகல்';
    } else if (hour < 18) {
      return ' எற்பாடு';
    } else if (hour < 22) {
      return ' மாலை';
    } else {
      return ' யாமம்';
    }
  },
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'யாமம்') {
      return hour < 2 ? hour : hour + 12;
    } else if (meridiem === 'வைகறை' || meridiem === 'காலை') {
      return hour;
    } else if (meridiem === 'நண்பகல்') {
      return hour >= 10 ? hour : hour + 12;
    } else {
      return hour + 12;
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/te.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/te.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('te', {
  months: 'జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్'.split('_'),
  monthsShort: 'జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.'.split('_'),
  monthsParseExact: true,
  weekdays: 'ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం'.split('_'),
  weekdaysShort: 'ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని'.split('_'),
  weekdaysMin: 'ఆ_సో_మం_బు_గు_శు_శ'.split('_'),
  longDateFormat: {
    LT: 'A h:mm',
    LTS: 'A h:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY, A h:mm',
    LLLL: 'dddd, D MMMM YYYY, A h:mm'
  },
  calendar: {
    sameDay: '[నేడు] LT',
    nextDay: '[రేపు] LT',
    nextWeek: 'dddd, LT',
    lastDay: '[నిన్న] LT',
    lastWeek: '[గత] dddd, LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s లో',
    past: '%s క్రితం',
    s: 'కొన్ని క్షణాలు',
    ss: '%d సెకన్లు',
    m: 'ఒక నిమిషం',
    mm: '%d నిమిషాలు',
    h: 'ఒక గంట',
    hh: '%d గంటలు',
    d: 'ఒక రోజు',
    dd: '%d రోజులు',
    M: 'ఒక నెల',
    MM: '%d నెలలు',
    y: 'ఒక సంవత్సరం',
    yy: '%d సంవత్సరాలు'
  },
  dayOfMonthOrdinalParse: /\d{1,2}వ/,
  ordinal: '%dవ',
  meridiemParse: /రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'రాత్రి') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'ఉదయం') {
      return hour;
    } else if (meridiem === 'మధ్యాహ్నం') {
      return hour >= 10 ? hour : hour + 12;
    } else if (meridiem === 'సాయంత్రం') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'రాత్రి';
    } else if (hour < 10) {
      return 'ఉదయం';
    } else if (hour < 17) {
      return 'మధ్యాహ్నం';
    } else if (hour < 20) {
      return 'సాయంత్రం';
    } else {
      return 'రాత్రి';
    }
  },
  week: {
    dow: 0,
    doy: 6
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tet.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tet.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tet', {
  months: 'Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru'.split('_'),
  monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),
  weekdays: 'Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu'.split('_'),
  weekdaysShort: 'Dom_Seg_Ters_Kua_Kint_Sest_Sab'.split('_'),
  weekdaysMin: 'Do_Seg_Te_Ku_Ki_Ses_Sa'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Ohin iha] LT',
    nextDay: '[Aban iha] LT',
    nextWeek: 'dddd [iha] LT',
    lastDay: '[Horiseik iha] LT',
    lastWeek: 'dddd [semana kotuk] [iha] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'iha %s',
    past: '%s liuba',
    s: 'segundu balun',
    ss: 'segundu %d',
    m: 'minutu ida',
    mm: 'minutu %d',
    h: 'oras ida',
    hh: 'oras %d',
    d: 'loron ida',
    dd: 'loron %d',
    M: 'fulan ida',
    MM: 'fulan %d',
    y: 'tinan ida',
    yy: 'tinan %d'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tg.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/tg.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  0: '-ум',
  1: '-ум',
  2: '-юм',
  3: '-юм',
  4: '-ум',
  5: '-ум',
  6: '-ум',
  7: '-ум',
  8: '-ум',
  9: '-ум',
  10: '-ум',
  12: '-ум',
  13: '-ум',
  20: '-ум',
  30: '-юм',
  40: '-ум',
  50: '-ум',
  60: '-ум',
  70: '-ум',
  80: '-ум',
  90: '-ум',
  100: '-ум'
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tg', {
  months: {
    format: 'январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри'.split('_'),
    standalone: 'январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр'.split('_')
  },
  monthsShort: 'янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек'.split('_'),
  weekdays: 'якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе'.split('_'),
  weekdaysShort: 'яшб_дшб_сшб_чшб_пшб_ҷум_шнб'.split('_'),
  weekdaysMin: 'яш_дш_сш_чш_пш_ҷм_шб'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Имрӯз соати] LT',
    nextDay: '[Фардо соати] LT',
    lastDay: '[Дирӯз соати] LT',
    nextWeek: 'dddd[и] [ҳафтаи оянда соати] LT',
    lastWeek: 'dddd[и] [ҳафтаи гузашта соати] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'баъди %s',
    past: '%s пеш',
    s: 'якчанд сония',
    m: 'як дақиқа',
    mm: '%d дақиқа',
    h: 'як соат',
    hh: '%d соат',
    d: 'як рӯз',
    dd: '%d рӯз',
    M: 'як моҳ',
    MM: '%d моҳ',
    y: 'як сол',
    yy: '%d сол'
  },
  meridiemParse: /шаб|субҳ|рӯз|бегоҳ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'шаб') {
      return hour < 4 ? hour : hour + 12;
    } else if (meridiem === 'субҳ') {
      return hour;
    } else if (meridiem === 'рӯз') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === 'бегоҳ') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'шаб';
    } else if (hour < 11) {
      return 'субҳ';
    } else if (hour < 16) {
      return 'рӯз';
    } else if (hour < 19) {
      return 'бегоҳ';
    } else {
      return 'шаб';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(ум|юм)/,
  ordinal: function ordinal(number) {
    var a = number % 10,
        b = number >= 100 ? 100 : null;
    return number + (suffixes[number] || suffixes[a] || suffixes[b]);
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/th.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/th.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('th', {
  months: 'มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม'.split('_'),
  monthsShort: 'ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.'.split('_'),
  monthsParseExact: true,
  weekdays: 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์'.split('_'),
  weekdaysShort: 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์'.split('_'),
  weekdaysMin: 'อา._จ._อ._พ._พฤ._ศ._ส.'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'H:mm',
    LTS: 'H:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY เวลา H:mm',
    LLLL: 'วันddddที่ D MMMM YYYY เวลา H:mm'
  },
  meridiemParse: /ก่อนเที่ยง|หลังเที่ยง/,
  isPM: function isPM(input) {
    return input === 'หลังเที่ยง';
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'ก่อนเที่ยง';
    } else {
      return 'หลังเที่ยง';
    }
  },
  calendar: {
    sameDay: '[วันนี้ เวลา] LT',
    nextDay: '[พรุ่งนี้ เวลา] LT',
    nextWeek: 'dddd[หน้า เวลา] LT',
    lastDay: '[เมื่อวานนี้ เวลา] LT',
    lastWeek: '[วัน]dddd[ที่แล้ว เวลา] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'อีก %s',
    past: '%sที่แล้ว',
    s: 'ไม่กี่วินาที',
    ss: '%d วินาที',
    m: '1 นาที',
    mm: '%d นาที',
    h: '1 ชั่วโมง',
    hh: '%d ชั่วโมง',
    d: '1 วัน',
    dd: '%d วัน',
    w: '1 สัปดาห์',
    ww: '%d สัปดาห์',
    M: '1 เดือน',
    MM: '%d เดือน',
    y: '1 ปี',
    yy: '%d ปี'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/tk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  1: "'inji",
  5: "'inji",
  8: "'inji",
  70: "'inji",
  80: "'inji",
  2: "'nji",
  7: "'nji",
  20: "'nji",
  50: "'nji",
  3: "'ünji",
  4: "'ünji",
  100: "'ünji",
  6: "'njy",
  9: "'unjy",
  10: "'unjy",
  30: "'unjy",
  60: "'ynjy",
  90: "'ynjy"
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tk', {
  months: 'Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr'.split('_'),
  monthsShort: 'Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek'.split('_'),
  weekdays: 'Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe'.split('_'),
  weekdaysShort: 'Ýek_Duş_Siş_Çar_Pen_Ann_Şen'.split('_'),
  weekdaysMin: 'Ýk_Dş_Sş_Çr_Pn_An_Şn'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[bugün sagat] LT',
    nextDay: '[ertir sagat] LT',
    nextWeek: '[indiki] dddd [sagat] LT',
    lastDay: '[düýn] LT',
    lastWeek: '[geçen] dddd [sagat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s soň',
    past: '%s öň',
    s: 'birnäçe sekunt',
    m: 'bir minut',
    mm: '%d minut',
    h: 'bir sagat',
    hh: '%d sagat',
    d: 'bir gün',
    dd: '%d gün',
    M: 'bir aý',
    MM: '%d aý',
    y: 'bir ýyl',
    yy: '%d ýyl'
  },
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'Do':
      case 'DD':
        return number;

      default:
        if (number === 0) {
          return number + "'unjy";
        }

        var a = number % 10,
            b = number % 100 - a,
            c = number >= 100 ? 100 : null;
        return number + (suffixes[a] || suffixes[b] || suffixes[c]);
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tl-ph.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/tl-ph.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tl-ph', {
  months: 'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),
  monthsShort: 'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),
  weekdays: 'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),
  weekdaysShort: 'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),
  weekdaysMin: 'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'MM/D/YYYY',
    LL: 'MMMM D, YYYY',
    LLL: 'MMMM D, YYYY HH:mm',
    LLLL: 'dddd, MMMM DD, YYYY HH:mm'
  },
  calendar: {
    sameDay: 'LT [ngayong araw]',
    nextDay: '[Bukas ng] LT',
    nextWeek: 'LT [sa susunod na] dddd',
    lastDay: 'LT [kahapon]',
    lastWeek: 'LT [noong nakaraang] dddd',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'sa loob ng %s',
    past: '%s ang nakalipas',
    s: 'ilang segundo',
    ss: '%d segundo',
    m: 'isang minuto',
    mm: '%d minuto',
    h: 'isang oras',
    hh: '%d oras',
    d: 'isang araw',
    dd: '%d araw',
    M: 'isang buwan',
    MM: '%d buwan',
    y: 'isang taon',
    yy: '%d taon'
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: function ordinal(number) {
    return number;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tlh.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tlh.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var numbersNouns = 'pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut'.split('_');

function translateFuture(output) {
  var time = output;
  time = output.indexOf('jaj') !== -1 ? time.slice(0, -3) + 'leS' : output.indexOf('jar') !== -1 ? time.slice(0, -3) + 'waQ' : output.indexOf('DIS') !== -1 ? time.slice(0, -3) + 'nem' : time + ' pIq';
  return time;
}

function translatePast(output) {
  var time = output;
  time = output.indexOf('jaj') !== -1 ? time.slice(0, -3) + 'Hu’' : output.indexOf('jar') !== -1 ? time.slice(0, -3) + 'wen' : output.indexOf('DIS') !== -1 ? time.slice(0, -3) + 'ben' : time + ' ret';
  return time;
}

function translate(number, withoutSuffix, string, isFuture) {
  var numberNoun = numberAsNoun(number);

  switch (string) {
    case 'ss':
      return numberNoun + ' lup';

    case 'mm':
      return numberNoun + ' tup';

    case 'hh':
      return numberNoun + ' rep';

    case 'dd':
      return numberNoun + ' jaj';

    case 'MM':
      return numberNoun + ' jar';

    case 'yy':
      return numberNoun + ' DIS';
  }
}

function numberAsNoun(number) {
  var hundred = Math.floor(number % 1000 / 100),
      ten = Math.floor(number % 100 / 10),
      one = number % 10,
      word = '';

  if (hundred > 0) {
    word += numbersNouns[hundred] + 'vatlh';
  }

  if (ten > 0) {
    word += (word !== '' ? ' ' : '') + numbersNouns[ten] + 'maH';
  }

  if (one > 0) {
    word += (word !== '' ? ' ' : '') + numbersNouns[one];
  }

  return word === '' ? 'pagh' : word;
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tlh', {
  months: 'tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’'.split('_'),
  monthsShort: 'jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’'.split('_'),
  monthsParseExact: true,
  weekdays: 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
  weekdaysShort: 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
  weekdaysMin: 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[DaHjaj] LT',
    nextDay: '[wa’leS] LT',
    nextWeek: 'LLL',
    lastDay: '[wa’Hu’] LT',
    lastWeek: 'LLL',
    sameElse: 'L'
  },
  relativeTime: {
    future: translateFuture,
    past: translatePast,
    s: 'puS lup',
    ss: translate,
    m: 'wa’ tup',
    mm: translate,
    h: 'wa’ rep',
    hh: translate,
    d: 'wa’ jaj',
    dd: translate,
    M: 'wa’ jar',
    MM: translate,
    y: 'wa’ DIS',
    yy: translate
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tr.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/tr.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var suffixes = {
  1: "'inci",
  5: "'inci",
  8: "'inci",
  70: "'inci",
  80: "'inci",
  2: "'nci",
  7: "'nci",
  20: "'nci",
  50: "'nci",
  3: "'üncü",
  4: "'üncü",
  100: "'üncü",
  6: "'ncı",
  9: "'uncu",
  10: "'uncu",
  30: "'uncu",
  60: "'ıncı",
  90: "'ıncı"
};
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tr', {
  months: 'Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık'.split('_'),
  monthsShort: 'Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara'.split('_'),
  weekdays: 'Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi'.split('_'),
  weekdaysShort: 'Paz_Pts_Sal_Çar_Per_Cum_Cts'.split('_'),
  weekdaysMin: 'Pz_Pt_Sa_Ça_Pe_Cu_Ct'.split('_'),
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower ? 'öö' : 'ÖÖ';
    } else {
      return isLower ? 'ös' : 'ÖS';
    }
  },
  meridiemParse: /öö|ÖÖ|ös|ÖS/,
  isPM: function isPM(input) {
    return input === 'ös' || input === 'ÖS';
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[bugün saat] LT',
    nextDay: '[yarın saat] LT',
    nextWeek: '[gelecek] dddd [saat] LT',
    lastDay: '[dün] LT',
    lastWeek: '[geçen] dddd [saat] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s sonra',
    past: '%s önce',
    s: 'birkaç saniye',
    ss: '%d saniye',
    m: 'bir dakika',
    mm: '%d dakika',
    h: 'bir saat',
    hh: '%d saat',
    d: 'bir gün',
    dd: '%d gün',
    w: 'bir hafta',
    ww: '%d hafta',
    M: 'bir ay',
    MM: '%d ay',
    y: 'bir yıl',
    yy: '%d yıl'
  },
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'Do':
      case 'DD':
        return number;

      default:
        if (number === 0) {
          return number + "'ıncı";
        }

        var a = number % 10,
            b = number % 100 - a,
            c = number >= 100 ? 100 : null;
        return number + (suffixes[a] || suffixes[b] || suffixes[c]);
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tzl.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tzl.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tzl', {
  months: 'Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar'.split('_'),
  monthsShort: 'Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec'.split('_'),
  weekdays: 'Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi'.split('_'),
  weekdaysShort: 'Súl_Lún_Mai_Már_Xhú_Vié_Sát'.split('_'),
  weekdaysMin: 'Sú_Lú_Ma_Má_Xh_Vi_Sá'.split('_'),
  longDateFormat: {
    LT: 'HH.mm',
    LTS: 'HH.mm.ss',
    L: 'DD.MM.YYYY',
    LL: 'D. MMMM [dallas] YYYY',
    LLL: 'D. MMMM [dallas] YYYY HH.mm',
    LLLL: 'dddd, [li] D. MMMM [dallas] YYYY HH.mm'
  },
  meridiemParse: /d\'o|d\'a/i,
  isPM: function isPM(input) {
    return "d'o" === input.toLowerCase();
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours > 11) {
      return isLower ? "d'o" : "D'O";
    } else {
      return isLower ? "d'a" : "D'A";
    }
  },
  calendar: {
    sameDay: '[oxhi à] LT',
    nextDay: '[demà à] LT',
    nextWeek: 'dddd [à] LT',
    lastDay: '[ieiri à] LT',
    lastWeek: '[sür el] dddd [lasteu à] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'osprei %s',
    past: 'ja%s',
    s: processRelativeTime,
    ss: processRelativeTime,
    m: processRelativeTime,
    mm: processRelativeTime,
    h: processRelativeTime,
    hh: processRelativeTime,
    d: processRelativeTime,
    dd: processRelativeTime,
    M: processRelativeTime,
    MM: processRelativeTime,
    y: processRelativeTime,
    yy: processRelativeTime
  },
  dayOfMonthOrdinalParse: /\d{1,2}\./,
  ordinal: '%d.',
  week: {
    dow: 1,
    doy: 4
  }
}));

function processRelativeTime(number, withoutSuffix, key, isFuture) {
  var format = {
    s: ['viensas secunds', "'iensas secunds"],
    ss: [number + ' secunds', '' + number + ' secunds'],
    m: ["'n míut", "'iens míut"],
    mm: [number + ' míuts', '' + number + ' míuts'],
    h: ["'n þora", "'iensa þora"],
    hh: [number + ' þoras', '' + number + ' þoras'],
    d: ["'n ziua", "'iensa ziua"],
    dd: [number + ' ziuas', '' + number + ' ziuas'],
    M: ["'n mes", "'iens mes"],
    MM: [number + ' mesen', '' + number + ' mesen'],
    y: ["'n ar", "'iens ar"],
    yy: [number + ' ars', '' + number + ' ars']
  };
  return isFuture ? format[key][0] : withoutSuffix ? format[key][0] : format[key][1];
}

/***/ }),

/***/ "./node_modules/moment/dist/locale/tzm-latn.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/tzm-latn.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tzm-latn', {
  months: 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
  monthsShort: 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
  weekdays: 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
  weekdaysShort: 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
  weekdaysMin: 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[asdkh g] LT',
    nextDay: '[aska g] LT',
    nextWeek: 'dddd [g] LT',
    lastDay: '[assant g] LT',
    lastWeek: 'dddd [g] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'dadkh s yan %s',
    past: 'yan %s',
    s: 'imik',
    ss: '%d imik',
    m: 'minuḍ',
    mm: '%d minuḍ',
    h: 'saɛa',
    hh: '%d tassaɛin',
    d: 'ass',
    dd: '%d ossan',
    M: 'ayowr',
    MM: '%d iyyirn',
    y: 'asgas',
    yy: '%d isgasn'
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/tzm.js":
/*!************************************************!*\
  !*** ./node_modules/moment/dist/locale/tzm.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('tzm', {
  months: 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
  monthsShort: 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
  weekdays: 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
  weekdaysShort: 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
  weekdaysMin: 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[ⴰⵙⴷⵅ ⴴ] LT',
    nextDay: '[ⴰⵙⴽⴰ ⴴ] LT',
    nextWeek: 'dddd [ⴴ] LT',
    lastDay: '[ⴰⵚⴰⵏⵜ ⴴ] LT',
    lastWeek: 'dddd [ⴴ] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s',
    past: 'ⵢⴰⵏ %s',
    s: 'ⵉⵎⵉⴽ',
    ss: '%d ⵉⵎⵉⴽ',
    m: 'ⵎⵉⵏⵓⴺ',
    mm: '%d ⵎⵉⵏⵓⴺ',
    h: 'ⵙⴰⵄⴰ',
    hh: '%d ⵜⴰⵙⵙⴰⵄⵉⵏ',
    d: 'ⴰⵙⵙ',
    dd: '%d oⵙⵙⴰⵏ',
    M: 'ⴰⵢoⵓⵔ',
    MM: '%d ⵉⵢⵢⵉⵔⵏ',
    y: 'ⴰⵙⴳⴰⵙ',
    yy: '%d ⵉⵙⴳⴰⵙⵏ'
  },
  week: {
    dow: 6,
    doy: 12
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ug-cn.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/ug-cn.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ug-cn', {
  months: 'يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر'.split('_'),
  monthsShort: 'يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر'.split('_'),
  weekdays: 'يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە'.split('_'),
  weekdaysShort: 'يە_دۈ_سە_چا_پە_جۈ_شە'.split('_'),
  weekdaysMin: 'يە_دۈ_سە_چا_پە_جۈ_شە'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY-MM-DD',
    LL: 'YYYY-يىلىM-ئاينىڭD-كۈنى',
    LLL: 'YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm',
    LLLL: 'dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm'
  },
  meridiemParse: /يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === 'يېرىم كېچە' || meridiem === 'سەھەر' || meridiem === 'چۈشتىن بۇرۇن') {
      return hour;
    } else if (meridiem === 'چۈشتىن كېيىن' || meridiem === 'كەچ') {
      return hour + 12;
    } else {
      return hour >= 11 ? hour : hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return 'يېرىم كېچە';
    } else if (hm < 900) {
      return 'سەھەر';
    } else if (hm < 1130) {
      return 'چۈشتىن بۇرۇن';
    } else if (hm < 1230) {
      return 'چۈش';
    } else if (hm < 1800) {
      return 'چۈشتىن كېيىن';
    } else {
      return 'كەچ';
    }
  },
  calendar: {
    sameDay: '[بۈگۈن سائەت] LT',
    nextDay: '[ئەتە سائەت] LT',
    nextWeek: '[كېلەركى] dddd [سائەت] LT',
    lastDay: '[تۆنۈگۈن] LT',
    lastWeek: '[ئالدىنقى] dddd [سائەت] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s كېيىن',
    past: '%s بۇرۇن',
    s: 'نەچچە سېكونت',
    ss: '%d سېكونت',
    m: 'بىر مىنۇت',
    mm: '%d مىنۇت',
    h: 'بىر سائەت',
    hh: '%d سائەت',
    d: 'بىر كۈن',
    dd: '%d كۈن',
    M: 'بىر ئاي',
    MM: '%d ئاي',
    y: 'بىر يىل',
    yy: '%d يىل'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '-كۈنى';

      case 'w':
      case 'W':
        return number + '-ھەپتە';

      default:
        return number;
    }
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/uk.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/uk.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");


function plural(word, num) {
  var forms = word.split('_');
  return num % 10 === 1 && num % 100 !== 11 ? forms[0] : num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2];
}

function relativeTimeWithPlural(number, withoutSuffix, key) {
  var format = {
    ss: withoutSuffix ? 'секунда_секунди_секунд' : 'секунду_секунди_секунд',
    mm: withoutSuffix ? 'хвилина_хвилини_хвилин' : 'хвилину_хвилини_хвилин',
    hh: withoutSuffix ? 'година_години_годин' : 'годину_години_годин',
    dd: 'день_дні_днів',
    MM: 'місяць_місяці_місяців',
    yy: 'рік_роки_років'
  };

  if (key === 'm') {
    return withoutSuffix ? 'хвилина' : 'хвилину';
  } else if (key === 'h') {
    return withoutSuffix ? 'година' : 'годину';
  } else {
    return number + ' ' + plural(format[key], +number);
  }
}

function weekdaysCaseReplace(m, format) {
  var weekdays = {
    nominative: 'неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота'.split('_'),
    accusative: 'неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу'.split('_'),
    genitive: 'неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи'.split('_')
  },
      nounCase;

  if (m === true) {
    return weekdays['nominative'].slice(1, 7).concat(weekdays['nominative'].slice(0, 1));
  }

  if (!m) {
    return weekdays['nominative'];
  }

  nounCase = /(\[[ВвУу]\]) ?dddd/.test(format) ? 'accusative' : /\[?(?:минулої|наступної)? ?\] ?dddd/.test(format) ? 'genitive' : 'nominative';
  return weekdays[nounCase][m.day()];
}

function processHoursFunction(str) {
  return function () {
    return str + 'о' + (this.hours() === 11 ? 'б' : '') + '] LT';
  };
}

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('uk', {
  months: {
    format: 'січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня'.split('_'),
    standalone: 'січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень'.split('_')
  },
  monthsShort: 'січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд'.split('_'),
  weekdays: weekdaysCaseReplace,
  weekdaysShort: 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
  weekdaysMin: 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD.MM.YYYY',
    LL: 'D MMMM YYYY р.',
    LLL: 'D MMMM YYYY р., HH:mm',
    LLLL: 'dddd, D MMMM YYYY р., HH:mm'
  },
  calendar: {
    sameDay: processHoursFunction('[Сьогодні '),
    nextDay: processHoursFunction('[Завтра '),
    lastDay: processHoursFunction('[Вчора '),
    nextWeek: processHoursFunction('[У] dddd ['),
    lastWeek: function lastWeek() {
      switch (this.day()) {
        case 0:
        case 3:
        case 5:
        case 6:
          return processHoursFunction('[Минулої] dddd [').call(this);

        case 1:
        case 2:
        case 4:
          return processHoursFunction('[Минулого] dddd [').call(this);
      }
    },
    sameElse: 'L'
  },
  relativeTime: {
    future: 'за %s',
    past: '%s тому',
    s: 'декілька секунд',
    ss: relativeTimeWithPlural,
    m: relativeTimeWithPlural,
    mm: relativeTimeWithPlural,
    h: 'годину',
    hh: relativeTimeWithPlural,
    d: 'день',
    dd: relativeTimeWithPlural,
    M: 'місяць',
    MM: relativeTimeWithPlural,
    y: 'рік',
    yy: relativeTimeWithPlural
  },
  meridiemParse: /ночі|ранку|дня|вечора/,
  isPM: function isPM(input) {
    return /^(дня|вечора)$/.test(input);
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 4) {
      return 'ночі';
    } else if (hour < 12) {
      return 'ранку';
    } else if (hour < 17) {
      return 'дня';
    } else {
      return 'вечора';
    }
  },
  dayOfMonthOrdinalParse: /\d{1,2}-(й|го)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'M':
      case 'd':
      case 'DDD':
      case 'w':
      case 'W':
        return number + '-й';

      case 'D':
        return number + '-го';

      default:
        return number;
    }
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/ur.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/ur.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

var months = ['جنوری', 'فروری', 'مارچ', 'اپریل', 'مئی', 'جون', 'جولائی', 'اگست', 'ستمبر', 'اکتوبر', 'نومبر', 'دسمبر'],
    days = ['اتوار', 'پیر', 'منگل', 'بدھ', 'جمعرات', 'جمعہ', 'ہفتہ'];
/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('ur', {
  months: months,
  monthsShort: months,
  weekdays: days,
  weekdaysShort: days,
  weekdaysMin: days,
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd، D MMMM YYYY HH:mm'
  },
  meridiemParse: /صبح|شام/,
  isPM: function isPM(input) {
    return 'شام' === input;
  },
  meridiem: function meridiem(hour, minute, isLower) {
    if (hour < 12) {
      return 'صبح';
    }

    return 'شام';
  },
  calendar: {
    sameDay: '[آج بوقت] LT',
    nextDay: '[کل بوقت] LT',
    nextWeek: 'dddd [بوقت] LT',
    lastDay: '[گذشتہ روز بوقت] LT',
    lastWeek: '[گذشتہ] dddd [بوقت] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s بعد',
    past: '%s قبل',
    s: 'چند سیکنڈ',
    ss: '%d سیکنڈ',
    m: 'ایک منٹ',
    mm: '%d منٹ',
    h: 'ایک گھنٹہ',
    hh: '%d گھنٹے',
    d: 'ایک دن',
    dd: '%d دن',
    M: 'ایک ماہ',
    MM: '%d ماہ',
    y: 'ایک سال',
    yy: '%d سال'
  },
  preparse: function preparse(string) {
    return string.replace(/،/g, ',');
  },
  postformat: function postformat(string) {
    return string.replace(/,/g, '،');
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/uz-latn.js":
/*!****************************************************!*\
  !*** ./node_modules/moment/dist/locale/uz-latn.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('uz-latn', {
  months: 'Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr'.split('_'),
  monthsShort: 'Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek'.split('_'),
  weekdays: 'Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba'.split('_'),
  weekdaysShort: 'Yak_Dush_Sesh_Chor_Pay_Jum_Shan'.split('_'),
  weekdaysMin: 'Ya_Du_Se_Cho_Pa_Ju_Sha'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'D MMMM YYYY, dddd HH:mm'
  },
  calendar: {
    sameDay: '[Bugun soat] LT [da]',
    nextDay: '[Ertaga] LT [da]',
    nextWeek: 'dddd [kuni soat] LT [da]',
    lastDay: '[Kecha soat] LT [da]',
    lastWeek: "[O'tgan] dddd [kuni soat] LT [da]",
    sameElse: 'L'
  },
  relativeTime: {
    future: 'Yaqin %s ichida',
    past: 'Bir necha %s oldin',
    s: 'soniya',
    ss: '%d soniya',
    m: 'bir daqiqa',
    mm: '%d daqiqa',
    h: 'bir soat',
    hh: '%d soat',
    d: 'bir kun',
    dd: '%d kun',
    M: 'bir oy',
    MM: '%d oy',
    y: 'bir yil',
    yy: '%d yil'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/uz.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/uz.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('uz', {
  months: 'январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр'.split('_'),
  monthsShort: 'янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек'.split('_'),
  weekdays: 'Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба'.split('_'),
  weekdaysShort: 'Якш_Душ_Сеш_Чор_Пай_Жум_Шан'.split('_'),
  weekdaysMin: 'Як_Ду_Се_Чо_Па_Жу_Ша'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'D MMMM YYYY, dddd HH:mm'
  },
  calendar: {
    sameDay: '[Бугун соат] LT [да]',
    nextDay: '[Эртага] LT [да]',
    nextWeek: 'dddd [куни соат] LT [да]',
    lastDay: '[Кеча соат] LT [да]',
    lastWeek: '[Утган] dddd [куни соат] LT [да]',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'Якин %s ичида',
    past: 'Бир неча %s олдин',
    s: 'фурсат',
    ss: '%d фурсат',
    m: 'бир дакика',
    mm: '%d дакика',
    h: 'бир соат',
    hh: '%d соат',
    d: 'бир кун',
    dd: '%d кун',
    M: 'бир ой',
    MM: '%d ой',
    y: 'бир йил',
    yy: '%d йил'
  },
  week: {
    dow: 1,
    doy: 7
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/vi.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/vi.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('vi', {
  months: 'tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12'.split('_'),
  monthsShort: 'Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12'.split('_'),
  monthsParseExact: true,
  weekdays: 'chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy'.split('_'),
  weekdaysShort: 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
  weekdaysMin: 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
  weekdaysParseExact: true,
  meridiemParse: /sa|ch/i,
  isPM: function isPM(input) {
    return /^ch$/i.test(input);
  },
  meridiem: function meridiem(hours, minutes, isLower) {
    if (hours < 12) {
      return isLower ? 'sa' : 'SA';
    } else {
      return isLower ? 'ch' : 'CH';
    }
  },
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM [năm] YYYY',
    LLL: 'D MMMM [năm] YYYY HH:mm',
    LLLL: 'dddd, D MMMM [năm] YYYY HH:mm',
    l: 'DD/M/YYYY',
    ll: 'D MMM YYYY',
    lll: 'D MMM YYYY HH:mm',
    llll: 'ddd, D MMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[Hôm nay lúc] LT',
    nextDay: '[Ngày mai lúc] LT',
    nextWeek: 'dddd [tuần tới lúc] LT',
    lastDay: '[Hôm qua lúc] LT',
    lastWeek: 'dddd [tuần trước lúc] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: '%s tới',
    past: '%s trước',
    s: 'vài giây',
    ss: '%d giây',
    m: 'một phút',
    mm: '%d phút',
    h: 'một giờ',
    hh: '%d giờ',
    d: 'một ngày',
    dd: '%d ngày',
    w: 'một tuần',
    ww: '%d tuần',
    M: 'một tháng',
    MM: '%d tháng',
    y: 'một năm',
    yy: '%d năm'
  },
  dayOfMonthOrdinalParse: /\d{1,2}/,
  ordinal: function ordinal(number) {
    return number;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/x-pseudo.js":
/*!*****************************************************!*\
  !*** ./node_modules/moment/dist/locale/x-pseudo.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('x-pseudo', {
  months: 'J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér'.split('_'),
  monthsShort: 'J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc'.split('_'),
  monthsParseExact: true,
  weekdays: 'S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý'.split('_'),
  weekdaysShort: 'S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát'.split('_'),
  weekdaysMin: 'S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá'.split('_'),
  weekdaysParseExact: true,
  longDateFormat: {
    LT: 'HH:mm',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY HH:mm',
    LLLL: 'dddd, D MMMM YYYY HH:mm'
  },
  calendar: {
    sameDay: '[T~ódá~ý át] LT',
    nextDay: '[T~ómó~rró~w át] LT',
    nextWeek: 'dddd [át] LT',
    lastDay: '[Ý~ést~érdá~ý át] LT',
    lastWeek: '[L~ást] dddd [át] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'í~ñ %s',
    past: '%s á~gó',
    s: 'á ~féw ~sécó~ñds',
    ss: '%d s~écóñ~ds',
    m: 'á ~míñ~úté',
    mm: '%d m~íñú~tés',
    h: 'á~ñ hó~úr',
    hh: '%d h~óúrs',
    d: 'á ~dáý',
    dd: '%d d~áýs',
    M: 'á ~móñ~th',
    MM: '%d m~óñt~hs',
    y: 'á ~ýéár',
    yy: '%d ý~éárs'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = ~~(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/yo.js":
/*!***********************************************!*\
  !*** ./node_modules/moment/dist/locale/yo.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('yo', {
  months: 'Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀'.split('_'),
  monthsShort: 'Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀'.split('_'),
  weekdays: 'Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta'.split('_'),
  weekdaysShort: 'Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá'.split('_'),
  weekdaysMin: 'Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb'.split('_'),
  longDateFormat: {
    LT: 'h:mm A',
    LTS: 'h:mm:ss A',
    L: 'DD/MM/YYYY',
    LL: 'D MMMM YYYY',
    LLL: 'D MMMM YYYY h:mm A',
    LLLL: 'dddd, D MMMM YYYY h:mm A'
  },
  calendar: {
    sameDay: '[Ònì ni] LT',
    nextDay: '[Ọ̀la ni] LT',
    nextWeek: "dddd [Ọsẹ̀ tón'bọ] [ni] LT",
    lastDay: '[Àna ni] LT',
    lastWeek: 'dddd [Ọsẹ̀ tólọ́] [ni] LT',
    sameElse: 'L'
  },
  relativeTime: {
    future: 'ní %s',
    past: '%s kọjá',
    s: 'ìsẹjú aayá die',
    ss: 'aayá %d',
    m: 'ìsẹjú kan',
    mm: 'ìsẹjú %d',
    h: 'wákati kan',
    hh: 'wákati %d',
    d: 'ọjọ́ kan',
    dd: 'ọjọ́ %d',
    M: 'osù kan',
    MM: 'osù %d',
    y: 'ọdún kan',
    yy: 'ọdún %d'
  },
  dayOfMonthOrdinalParse: /ọjọ́\s\d{1,2}/,
  ordinal: 'ọjọ́ %d',
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-cn.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-cn.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-cn', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '周日_周一_周二_周三_周四_周五_周六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日Ah点mm分',
    LLLL: 'YYYY年M月D日ddddAh点mm分',
    l: 'YYYY/M/D',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    } else {
      return hour >= 11 ? hour : hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1130) {
      return '上午';
    } else if (hm < 1230) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天]LT',
    nextDay: '[明天]LT',
    nextWeek: function nextWeek(now) {
      if (now.week() !== this.week()) {
        return '[下]dddLT';
      } else {
        return '[本]dddLT';
      }
    },
    lastDay: '[昨天]LT',
    lastWeek: function lastWeek(now) {
      if (this.week() !== now.week()) {
        return '[上]dddLT';
      } else {
        return '[本]dddLT';
      }
    },
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|周)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '周';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s后',
    past: '%s前',
    s: '几秒',
    ss: '%d 秒',
    m: '1 分钟',
    mm: '%d 分钟',
    h: '1 小时',
    hh: '%d 小时',
    d: '1 天',
    dd: '%d 天',
    w: '1 周',
    ww: '%d 周',
    M: '1 个月',
    MM: '%d 个月',
    y: '1 年',
    yy: '%d 年'
  },
  week: {
    dow: 1,
    doy: 4
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-hk.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-hk.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-hk', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日dddd HH:mm',
    l: 'YYYY/M/D',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '中午') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1200) {
      return '上午';
    } else if (hm === 1200) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天]LT',
    nextDay: '[明天]LT',
    nextWeek: '[下]ddddLT',
    lastDay: '[昨天]LT',
    lastWeek: '[上]ddddLT',
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '週';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s後',
    past: '%s前',
    s: '幾秒',
    ss: '%d 秒',
    m: '1 分鐘',
    mm: '%d 分鐘',
    h: '1 小時',
    hh: '%d 小時',
    d: '1 天',
    dd: '%d 天',
    M: '1 個月',
    MM: '%d 個月',
    y: '1 年',
    yy: '%d 年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-mo.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-mo.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-mo', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'DD/MM/YYYY',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日dddd HH:mm',
    l: 'D/M/YYYY',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '中午') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1130) {
      return '上午';
    } else if (hm < 1230) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天] LT',
    nextDay: '[明天] LT',
    nextWeek: '[下]dddd LT',
    lastDay: '[昨天] LT',
    lastWeek: '[上]dddd LT',
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '週';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s內',
    past: '%s前',
    s: '幾秒',
    ss: '%d 秒',
    m: '1 分鐘',
    mm: '%d 分鐘',
    h: '1 小時',
    hh: '%d 小時',
    d: '1 天',
    dd: '%d 天',
    M: '1 個月',
    MM: '%d 個月',
    y: '1 年',
    yy: '%d 年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/locale/zh-tw.js":
/*!**************************************************!*\
  !*** ./node_modules/moment/dist/locale/zh-tw.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../moment */ "./node_modules/moment/dist/moment.js");

/* harmony default export */ __webpack_exports__["default"] = (_moment__WEBPACK_IMPORTED_MODULE_0__["default"].defineLocale('zh-tw', {
  months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
  monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
  weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
  weekdaysShort: '週日_週一_週二_週三_週四_週五_週六'.split('_'),
  weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
  longDateFormat: {
    LT: 'HH:mm',
    LTS: 'HH:mm:ss',
    L: 'YYYY/MM/DD',
    LL: 'YYYY年M月D日',
    LLL: 'YYYY年M月D日 HH:mm',
    LLLL: 'YYYY年M月D日dddd HH:mm',
    l: 'YYYY/M/D',
    ll: 'YYYY年M月D日',
    lll: 'YYYY年M月D日 HH:mm',
    llll: 'YYYY年M月D日dddd HH:mm'
  },
  meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
  meridiemHour: function meridiemHour(hour, meridiem) {
    if (hour === 12) {
      hour = 0;
    }

    if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
      return hour;
    } else if (meridiem === '中午') {
      return hour >= 11 ? hour : hour + 12;
    } else if (meridiem === '下午' || meridiem === '晚上') {
      return hour + 12;
    }
  },
  meridiem: function meridiem(hour, minute, isLower) {
    var hm = hour * 100 + minute;

    if (hm < 600) {
      return '凌晨';
    } else if (hm < 900) {
      return '早上';
    } else if (hm < 1130) {
      return '上午';
    } else if (hm < 1230) {
      return '中午';
    } else if (hm < 1800) {
      return '下午';
    } else {
      return '晚上';
    }
  },
  calendar: {
    sameDay: '[今天] LT',
    nextDay: '[明天] LT',
    nextWeek: '[下]dddd LT',
    lastDay: '[昨天] LT',
    lastWeek: '[上]dddd LT',
    sameElse: 'L'
  },
  dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
  ordinal: function ordinal(number, period) {
    switch (period) {
      case 'd':
      case 'D':
      case 'DDD':
        return number + '日';

      case 'M':
        return number + '月';

      case 'w':
      case 'W':
        return number + '週';

      default:
        return number;
    }
  },
  relativeTime: {
    future: '%s後',
    past: '%s前',
    s: '幾秒',
    ss: '%d 秒',
    m: '1 分鐘',
    mm: '%d 分鐘',
    h: '1 小時',
    hh: '%d 小時',
    d: '1 天',
    dd: '%d 天',
    M: '1 個月',
    MM: '%d 個月',
    y: '1 年',
    yy: '%d 年'
  }
}));

/***/ }),

/***/ "./node_modules/moment/dist/moment.js":
/*!********************************************!*\
  !*** ./node_modules/moment/dist/moment.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {var require;var hookCallback;

function hooks() {
  return hookCallback.apply(null, arguments);
}

function setHookCallback(callback) {
  hookCallback = callback;
}

function isArray(input) {
  return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';
}

function isObject(input) {
  return input != null && Object.prototype.toString.call(input) === '[object Object]';
}

function hasOwnProp(a, b) {
  return Object.prototype.hasOwnProperty.call(a, b);
}

function isObjectEmpty(obj) {
  if (Object.getOwnPropertyNames) {
    return Object.getOwnPropertyNames(obj).length === 0;
  } else {
    var k;

    for (k in obj) {
      if (hasOwnProp(obj, k)) {
        return false;
      }
    }

    return true;
  }
}

function isUndefined(input) {
  return input === void 0;
}

function isNumber(input) {
  return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';
}

function isDate(input) {
  return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
}

function map(arr, fn) {
  var res = [],
      i;

  for (i = 0; i < arr.length; ++i) {
    res.push(fn(arr[i], i));
  }

  return res;
}

function extend(a, b) {
  for (var i in b) {
    if (hasOwnProp(b, i)) {
      a[i] = b[i];
    }
  }

  if (hasOwnProp(b, 'toString')) {
    a.toString = b.toString;
  }

  if (hasOwnProp(b, 'valueOf')) {
    a.valueOf = b.valueOf;
  }

  return a;
}

function createUTC(input, format, locale, strict) {
  return createLocalOrUTC(input, format, locale, strict, true).utc();
}

function defaultParsingFlags() {
  return {
    empty: false,
    unusedTokens: [],
    unusedInput: [],
    overflow: -2,
    charsLeftOver: 0,
    nullInput: false,
    invalidEra: null,
    invalidMonth: null,
    invalidFormat: false,
    userInvalidated: false,
    iso: false,
    parsedDateParts: [],
    era: null,
    meridiem: null,
    rfc2822: false,
    weekdayMismatch: false
  };
}

function getParsingFlags(m) {
  if (m._pf == null) {
    m._pf = defaultParsingFlags();
  }

  return m._pf;
}

var some;

if (Array.prototype.some) {
  some = Array.prototype.some;
} else {
  some = function some(fun) {
    var t = Object(this),
        len = t.length >>> 0,
        i;

    for (i = 0; i < len; i++) {
      if (i in t && fun.call(this, t[i], i, t)) {
        return true;
      }
    }

    return false;
  };
}

function isValid(m) {
  if (m._isValid == null) {
    var flags = getParsingFlags(m),
        parsedParts = some.call(flags.parsedDateParts, function (i) {
      return i != null;
    }),
        isNowValid = !isNaN(m._d.getTime()) && flags.overflow < 0 && !flags.empty && !flags.invalidEra && !flags.invalidMonth && !flags.invalidWeekday && !flags.weekdayMismatch && !flags.nullInput && !flags.invalidFormat && !flags.userInvalidated && (!flags.meridiem || flags.meridiem && parsedParts);

    if (m._strict) {
      isNowValid = isNowValid && flags.charsLeftOver === 0 && flags.unusedTokens.length === 0 && flags.bigHour === undefined;
    }

    if (Object.isFrozen == null || !Object.isFrozen(m)) {
      m._isValid = isNowValid;
    } else {
      return isNowValid;
    }
  }

  return m._isValid;
}

function createInvalid(flags) {
  var m = createUTC(NaN);

  if (flags != null) {
    extend(getParsingFlags(m), flags);
  } else {
    getParsingFlags(m).userInvalidated = true;
  }

  return m;
}

var momentProperties = hooks.momentProperties = [],
    updateInProgress = false;

function copyConfig(to, from) {
  var i, prop, val;

  if (!isUndefined(from._isAMomentObject)) {
    to._isAMomentObject = from._isAMomentObject;
  }

  if (!isUndefined(from._i)) {
    to._i = from._i;
  }

  if (!isUndefined(from._f)) {
    to._f = from._f;
  }

  if (!isUndefined(from._l)) {
    to._l = from._l;
  }

  if (!isUndefined(from._strict)) {
    to._strict = from._strict;
  }

  if (!isUndefined(from._tzm)) {
    to._tzm = from._tzm;
  }

  if (!isUndefined(from._isUTC)) {
    to._isUTC = from._isUTC;
  }

  if (!isUndefined(from._offset)) {
    to._offset = from._offset;
  }

  if (!isUndefined(from._pf)) {
    to._pf = getParsingFlags(from);
  }

  if (!isUndefined(from._locale)) {
    to._locale = from._locale;
  }

  if (momentProperties.length > 0) {
    for (i = 0; i < momentProperties.length; i++) {
      prop = momentProperties[i];
      val = from[prop];

      if (!isUndefined(val)) {
        to[prop] = val;
      }
    }
  }

  return to;
}

function Moment(config) {
  copyConfig(this, config);
  this._d = new Date(config._d != null ? config._d.getTime() : NaN);

  if (!this.isValid()) {
    this._d = new Date(NaN);
  }

  if (updateInProgress === false) {
    updateInProgress = true;
    hooks.updateOffset(this);
    updateInProgress = false;
  }
}

function isMoment(obj) {
  return obj instanceof Moment || obj != null && obj._isAMomentObject != null;
}

function warn(msg) {
  if (hooks.suppressDeprecationWarnings === false && typeof console !== 'undefined' && console.warn) {
    console.warn('Deprecation warning: ' + msg);
  }
}

function deprecate(msg, fn) {
  var firstTime = true;
  return extend(function () {
    if (hooks.deprecationHandler != null) {
      hooks.deprecationHandler(null, msg);
    }

    if (firstTime) {
      var args = [],
          arg,
          i,
          key;

      for (i = 0; i < arguments.length; i++) {
        arg = '';

        if (typeof arguments[i] === 'object') {
          arg += '\n[' + i + '] ';

          for (key in arguments[0]) {
            if (hasOwnProp(arguments[0], key)) {
              arg += key + ': ' + arguments[0][key] + ', ';
            }
          }

          arg = arg.slice(0, -2);
        } else {
          arg = arguments[i];
        }

        args.push(arg);
      }

      warn(msg + '\nArguments: ' + Array.prototype.slice.call(args).join('') + '\n' + new Error().stack);
      firstTime = false;
    }

    return fn.apply(this, arguments);
  }, fn);
}

var deprecations = {};

function deprecateSimple(name, msg) {
  if (hooks.deprecationHandler != null) {
    hooks.deprecationHandler(name, msg);
  }

  if (!deprecations[name]) {
    warn(msg);
    deprecations[name] = true;
  }
}

hooks.suppressDeprecationWarnings = false;
hooks.deprecationHandler = null;

function isFunction(input) {
  return typeof Function !== 'undefined' && input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
}

function set(config) {
  var prop, i;

  for (i in config) {
    if (hasOwnProp(config, i)) {
      prop = config[i];

      if (isFunction(prop)) {
        this[i] = prop;
      } else {
        this['_' + i] = prop;
      }
    }
  }

  this._config = config;
  this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + '|' + /\d{1,2}/.source);
}

function mergeConfigs(parentConfig, childConfig) {
  var res = extend({}, parentConfig),
      prop;

  for (prop in childConfig) {
    if (hasOwnProp(childConfig, prop)) {
      if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {
        res[prop] = {};
        extend(res[prop], parentConfig[prop]);
        extend(res[prop], childConfig[prop]);
      } else if (childConfig[prop] != null) {
        res[prop] = childConfig[prop];
      } else {
        delete res[prop];
      }
    }
  }

  for (prop in parentConfig) {
    if (hasOwnProp(parentConfig, prop) && !hasOwnProp(childConfig, prop) && isObject(parentConfig[prop])) {
      res[prop] = extend({}, res[prop]);
    }
  }

  return res;
}

function Locale(config) {
  if (config != null) {
    this.set(config);
  }
}

var keys;

if (Object.keys) {
  keys = Object.keys;
} else {
  keys = function keys(obj) {
    var i,
        res = [];

    for (i in obj) {
      if (hasOwnProp(obj, i)) {
        res.push(i);
      }
    }

    return res;
  };
}

var defaultCalendar = {
  sameDay: '[Today at] LT',
  nextDay: '[Tomorrow at] LT',
  nextWeek: 'dddd [at] LT',
  lastDay: '[Yesterday at] LT',
  lastWeek: '[Last] dddd [at] LT',
  sameElse: 'L'
};

function calendar(key, mom, now) {
  var output = this._calendar[key] || this._calendar['sameElse'];
  return isFunction(output) ? output.call(mom, now) : output;
}

function zeroFill(number, targetLength, forceSign) {
  var absNumber = '' + Math.abs(number),
      zerosToFill = targetLength - absNumber.length,
      sign = number >= 0;
  return (sign ? forceSign ? '+' : '' : '-') + Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
}

var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
    localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
    formatFunctions = {},
    formatTokenFunctions = {};

function addFormatToken(token, padded, ordinal, callback) {
  var func = callback;

  if (typeof callback === 'string') {
    func = function func() {
      return this[callback]();
    };
  }

  if (token) {
    formatTokenFunctions[token] = func;
  }

  if (padded) {
    formatTokenFunctions[padded[0]] = function () {
      return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
    };
  }

  if (ordinal) {
    formatTokenFunctions[ordinal] = function () {
      return this.localeData().ordinal(func.apply(this, arguments), token);
    };
  }
}

function removeFormattingTokens(input) {
  if (input.match(/\[[\s\S]/)) {
    return input.replace(/^\[|\]$/g, '');
  }

  return input.replace(/\\/g, '');
}

function makeFormatFunction(format) {
  var array = format.match(formattingTokens),
      i,
      length;

  for (i = 0, length = array.length; i < length; i++) {
    if (formatTokenFunctions[array[i]]) {
      array[i] = formatTokenFunctions[array[i]];
    } else {
      array[i] = removeFormattingTokens(array[i]);
    }
  }

  return function (mom) {
    var output = '',
        i;

    for (i = 0; i < length; i++) {
      output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];
    }

    return output;
  };
}

function formatMoment(m, format) {
  if (!m.isValid()) {
    return m.localeData().invalidDate();
  }

  format = expandFormat(format, m.localeData());
  formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);
  return formatFunctions[format](m);
}

function expandFormat(format, locale) {
  var i = 5;

  function replaceLongDateFormatTokens(input) {
    return locale.longDateFormat(input) || input;
  }

  localFormattingTokens.lastIndex = 0;

  while (i >= 0 && localFormattingTokens.test(format)) {
    format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
    localFormattingTokens.lastIndex = 0;
    i -= 1;
  }

  return format;
}

var defaultLongDateFormat = {
  LTS: 'h:mm:ss A',
  LT: 'h:mm A',
  L: 'MM/DD/YYYY',
  LL: 'MMMM D, YYYY',
  LLL: 'MMMM D, YYYY h:mm A',
  LLLL: 'dddd, MMMM D, YYYY h:mm A'
};

function longDateFormat(key) {
  var format = this._longDateFormat[key],
      formatUpper = this._longDateFormat[key.toUpperCase()];

  if (format || !formatUpper) {
    return format;
  }

  this._longDateFormat[key] = formatUpper.match(formattingTokens).map(function (tok) {
    if (tok === 'MMMM' || tok === 'MM' || tok === 'DD' || tok === 'dddd') {
      return tok.slice(1);
    }

    return tok;
  }).join('');
  return this._longDateFormat[key];
}

var defaultInvalidDate = 'Invalid date';

function invalidDate() {
  return this._invalidDate;
}

var defaultOrdinal = '%d',
    defaultDayOfMonthOrdinalParse = /\d{1,2}/;

function ordinal(number) {
  return this._ordinal.replace('%d', number);
}

var defaultRelativeTime = {
  future: 'in %s',
  past: '%s ago',
  s: 'a few seconds',
  ss: '%d seconds',
  m: 'a minute',
  mm: '%d minutes',
  h: 'an hour',
  hh: '%d hours',
  d: 'a day',
  dd: '%d days',
  w: 'a week',
  ww: '%d weeks',
  M: 'a month',
  MM: '%d months',
  y: 'a year',
  yy: '%d years'
};

function relativeTime(number, withoutSuffix, string, isFuture) {
  var output = this._relativeTime[string];
  return isFunction(output) ? output(number, withoutSuffix, string, isFuture) : output.replace(/%d/i, number);
}

function pastFuture(diff, output) {
  var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
  return isFunction(format) ? format(output) : format.replace(/%s/i, output);
}

var aliases = {};

function addUnitAlias(unit, shorthand) {
  var lowerCase = unit.toLowerCase();
  aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
}

function normalizeUnits(units) {
  return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
}

function normalizeObjectUnits(inputObject) {
  var normalizedInput = {},
      normalizedProp,
      prop;

  for (prop in inputObject) {
    if (hasOwnProp(inputObject, prop)) {
      normalizedProp = normalizeUnits(prop);

      if (normalizedProp) {
        normalizedInput[normalizedProp] = inputObject[prop];
      }
    }
  }

  return normalizedInput;
}

var priorities = {};

function addUnitPriority(unit, priority) {
  priorities[unit] = priority;
}

function getPrioritizedUnits(unitsObj) {
  var units = [],
      u;

  for (u in unitsObj) {
    if (hasOwnProp(unitsObj, u)) {
      units.push({
        unit: u,
        priority: priorities[u]
      });
    }
  }

  units.sort(function (a, b) {
    return a.priority - b.priority;
  });
  return units;
}

function isLeapYear(year) {
  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
}

function absFloor(number) {
  if (number < 0) {
    return Math.ceil(number) || 0;
  } else {
    return Math.floor(number);
  }
}

function toInt(argumentForCoercion) {
  var coercedNumber = +argumentForCoercion,
      value = 0;

  if (coercedNumber !== 0 && isFinite(coercedNumber)) {
    value = absFloor(coercedNumber);
  }

  return value;
}

function makeGetSet(unit, keepTime) {
  return function (value) {
    if (value != null) {
      set$1(this, unit, value);
      hooks.updateOffset(this, keepTime);
      return this;
    } else {
      return get(this, unit);
    }
  };
}

function get(mom, unit) {
  return mom.isValid() ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
}

function set$1(mom, unit, value) {
  if (mom.isValid() && !isNaN(value)) {
    if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {
      value = toInt(value);

      mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));
    } else {
      mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
    }
  }
}

function stringGet(units) {
  units = normalizeUnits(units);

  if (isFunction(this[units])) {
    return this[units]();
  }

  return this;
}

function stringSet(units, value) {
  if (typeof units === 'object') {
    units = normalizeObjectUnits(units);
    var prioritized = getPrioritizedUnits(units),
        i;

    for (i = 0; i < prioritized.length; i++) {
      this[prioritized[i].unit](units[prioritized[i].unit]);
    }
  } else {
    units = normalizeUnits(units);

    if (isFunction(this[units])) {
      return this[units](value);
    }
  }

  return this;
}

var match1 = /\d/,
    match2 = /\d\d/,
    match3 = /\d{3}/,
    match4 = /\d{4}/,
    match6 = /[+-]?\d{6}/,
    match1to2 = /\d\d?/,
    match3to4 = /\d\d\d\d?/,
    match5to6 = /\d\d\d\d\d\d?/,
    match1to3 = /\d{1,3}/,
    match1to4 = /\d{1,4}/,
    match1to6 = /[+-]?\d{1,6}/,
    matchUnsigned = /\d+/,
    matchSigned = /[+-]?\d+/,
    matchOffset = /Z|[+-]\d\d:?\d\d/gi,
    matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi,
    matchTimestamp = /[+-]?\d+(\.\d{1,3})?/,
    matchWord = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
    regexes;
regexes = {};

function addRegexToken(token, regex, strictRegex) {
  regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {
    return isStrict && strictRegex ? strictRegex : regex;
  };
}

function getParseRegexForToken(token, config) {
  if (!hasOwnProp(regexes, token)) {
    return new RegExp(unescapeFormat(token));
  }

  return regexes[token](config._strict, config._locale);
}

function unescapeFormat(s) {
  return regexEscape(s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
    return p1 || p2 || p3 || p4;
  }));
}

function regexEscape(s) {
  return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
}

var tokens = {};

function addParseToken(token, callback) {
  var i,
      func = callback;

  if (typeof token === 'string') {
    token = [token];
  }

  if (isNumber(callback)) {
    func = function func(input, array) {
      array[callback] = toInt(input);
    };
  }

  for (i = 0; i < token.length; i++) {
    tokens[token[i]] = func;
  }
}

function addWeekParseToken(token, callback) {
  addParseToken(token, function (input, array, config, token) {
    config._w = config._w || {};
    callback(input, config._w, config, token);
  });
}

function addTimeToArrayFromToken(token, input, config) {
  if (input != null && hasOwnProp(tokens, token)) {
    tokens[token](input, config._a, config, token);
  }
}

var YEAR = 0,
    MONTH = 1,
    DATE = 2,
    HOUR = 3,
    MINUTE = 4,
    SECOND = 5,
    MILLISECOND = 6,
    WEEK = 7,
    WEEKDAY = 8;

function mod(n, x) {
  return (n % x + x) % x;
}

var indexOf;

if (Array.prototype.indexOf) {
  indexOf = Array.prototype.indexOf;
} else {
  indexOf = function indexOf(o) {
    var i;

    for (i = 0; i < this.length; ++i) {
      if (this[i] === o) {
        return i;
      }
    }

    return -1;
  };
}

function daysInMonth(year, month) {
  if (isNaN(year) || isNaN(month)) {
    return NaN;
  }

  var modMonth = mod(month, 12);
  year += (month - modMonth) / 12;
  return modMonth === 1 ? isLeapYear(year) ? 29 : 28 : 31 - modMonth % 7 % 2;
}

addFormatToken('M', ['MM', 2], 'Mo', function () {
  return this.month() + 1;
});
addFormatToken('MMM', 0, 0, function (format) {
  return this.localeData().monthsShort(this, format);
});
addFormatToken('MMMM', 0, 0, function (format) {
  return this.localeData().months(this, format);
});
addUnitAlias('month', 'M');
addUnitPriority('month', 8);
addRegexToken('M', match1to2);
addRegexToken('MM', match1to2, match2);
addRegexToken('MMM', function (isStrict, locale) {
  return locale.monthsShortRegex(isStrict);
});
addRegexToken('MMMM', function (isStrict, locale) {
  return locale.monthsRegex(isStrict);
});
addParseToken(['M', 'MM'], function (input, array) {
  array[MONTH] = toInt(input) - 1;
});
addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
  var month = config._locale.monthsParse(input, token, config._strict);

  if (month != null) {
    array[MONTH] = month;
  } else {
    getParsingFlags(config).invalidMonth = input;
  }
});
var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
    defaultMonthsShortRegex = matchWord,
    defaultMonthsRegex = matchWord;

function localeMonths(m, format) {
  if (!m) {
    return isArray(this._months) ? this._months : this._months['standalone'];
  }

  return isArray(this._months) ? this._months[m.month()] : this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];
}

function localeMonthsShort(m, format) {
  if (!m) {
    return isArray(this._monthsShort) ? this._monthsShort : this._monthsShort['standalone'];
  }

  return isArray(this._monthsShort) ? this._monthsShort[m.month()] : this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
}

function handleStrictParse(monthName, format, strict) {
  var i,
      ii,
      mom,
      llc = monthName.toLocaleLowerCase();

  if (!this._monthsParse) {
    this._monthsParse = [];
    this._longMonthsParse = [];
    this._shortMonthsParse = [];

    for (i = 0; i < 12; ++i) {
      mom = createUTC([2000, i]);
      this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();
      this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();
    }
  }

  if (strict) {
    if (format === 'MMM') {
      ii = indexOf.call(this._shortMonthsParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._longMonthsParse, llc);
      return ii !== -1 ? ii : null;
    }
  } else {
    if (format === 'MMM') {
      ii = indexOf.call(this._shortMonthsParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._longMonthsParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._longMonthsParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._shortMonthsParse, llc);
      return ii !== -1 ? ii : null;
    }
  }
}

function localeMonthsParse(monthName, format, strict) {
  var i, mom, regex;

  if (this._monthsParseExact) {
    return handleStrictParse.call(this, monthName, format, strict);
  }

  if (!this._monthsParse) {
    this._monthsParse = [];
    this._longMonthsParse = [];
    this._shortMonthsParse = [];
  }

  for (i = 0; i < 12; i++) {
    mom = createUTC([2000, i]);

    if (strict && !this._longMonthsParse[i]) {
      this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
      this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
    }

    if (!strict && !this._monthsParse[i]) {
      regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
      this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
    }

    if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
      return i;
    } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
      return i;
    } else if (!strict && this._monthsParse[i].test(monthName)) {
      return i;
    }
  }
}

function setMonth(mom, value) {
  var dayOfMonth;

  if (!mom.isValid()) {
    return mom;
  }

  if (typeof value === 'string') {
    if (/^\d+$/.test(value)) {
      value = toInt(value);
    } else {
      value = mom.localeData().monthsParse(value);

      if (!isNumber(value)) {
        return mom;
      }
    }
  }

  dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));

  mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);

  return mom;
}

function getSetMonth(value) {
  if (value != null) {
    setMonth(this, value);
    hooks.updateOffset(this, true);
    return this;
  } else {
    return get(this, 'Month');
  }
}

function getDaysInMonth() {
  return daysInMonth(this.year(), this.month());
}

function monthsShortRegex(isStrict) {
  if (this._monthsParseExact) {
    if (!hasOwnProp(this, '_monthsRegex')) {
      computeMonthsParse.call(this);
    }

    if (isStrict) {
      return this._monthsShortStrictRegex;
    } else {
      return this._monthsShortRegex;
    }
  } else {
    if (!hasOwnProp(this, '_monthsShortRegex')) {
      this._monthsShortRegex = defaultMonthsShortRegex;
    }

    return this._monthsShortStrictRegex && isStrict ? this._monthsShortStrictRegex : this._monthsShortRegex;
  }
}

function monthsRegex(isStrict) {
  if (this._monthsParseExact) {
    if (!hasOwnProp(this, '_monthsRegex')) {
      computeMonthsParse.call(this);
    }

    if (isStrict) {
      return this._monthsStrictRegex;
    } else {
      return this._monthsRegex;
    }
  } else {
    if (!hasOwnProp(this, '_monthsRegex')) {
      this._monthsRegex = defaultMonthsRegex;
    }

    return this._monthsStrictRegex && isStrict ? this._monthsStrictRegex : this._monthsRegex;
  }
}

function computeMonthsParse() {
  function cmpLenRev(a, b) {
    return b.length - a.length;
  }

  var shortPieces = [],
      longPieces = [],
      mixedPieces = [],
      i,
      mom;

  for (i = 0; i < 12; i++) {
    mom = createUTC([2000, i]);
    shortPieces.push(this.monthsShort(mom, ''));
    longPieces.push(this.months(mom, ''));
    mixedPieces.push(this.months(mom, ''));
    mixedPieces.push(this.monthsShort(mom, ''));
  }

  shortPieces.sort(cmpLenRev);
  longPieces.sort(cmpLenRev);
  mixedPieces.sort(cmpLenRev);

  for (i = 0; i < 12; i++) {
    shortPieces[i] = regexEscape(shortPieces[i]);
    longPieces[i] = regexEscape(longPieces[i]);
  }

  for (i = 0; i < 24; i++) {
    mixedPieces[i] = regexEscape(mixedPieces[i]);
  }

  this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
  this._monthsShortRegex = this._monthsRegex;
  this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
  this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
}

addFormatToken('Y', 0, 0, function () {
  var y = this.year();
  return y <= 9999 ? zeroFill(y, 4) : '+' + y;
});
addFormatToken(0, ['YY', 2], 0, function () {
  return this.year() % 100;
});
addFormatToken(0, ['YYYY', 4], 0, 'year');
addFormatToken(0, ['YYYYY', 5], 0, 'year');
addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');
addUnitAlias('year', 'y');
addUnitPriority('year', 1);
addRegexToken('Y', matchSigned);
addRegexToken('YY', match1to2, match2);
addRegexToken('YYYY', match1to4, match4);
addRegexToken('YYYYY', match1to6, match6);
addRegexToken('YYYYYY', match1to6, match6);
addParseToken(['YYYYY', 'YYYYYY'], YEAR);
addParseToken('YYYY', function (input, array) {
  array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);
});
addParseToken('YY', function (input, array) {
  array[YEAR] = hooks.parseTwoDigitYear(input);
});
addParseToken('Y', function (input, array) {
  array[YEAR] = parseInt(input, 10);
});

function daysInYear(year) {
  return isLeapYear(year) ? 366 : 365;
}

hooks.parseTwoDigitYear = function (input) {
  return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
};

var getSetYear = makeGetSet('FullYear', true);

function getIsLeapYear() {
  return isLeapYear(this.year());
}

function createDate(y, m, d, h, M, s, ms) {
  var date;

  if (y < 100 && y >= 0) {
    date = new Date(y + 400, m, d, h, M, s, ms);

    if (isFinite(date.getFullYear())) {
      date.setFullYear(y);
    }
  } else {
    date = new Date(y, m, d, h, M, s, ms);
  }

  return date;
}

function createUTCDate(y) {
  var date, args;

  if (y < 100 && y >= 0) {
    args = Array.prototype.slice.call(arguments);
    args[0] = y + 400;
    date = new Date(Date.UTC.apply(null, args));

    if (isFinite(date.getUTCFullYear())) {
      date.setUTCFullYear(y);
    }
  } else {
    date = new Date(Date.UTC.apply(null, arguments));
  }

  return date;
}

function firstWeekOffset(year, dow, doy) {
  var fwd = 7 + dow - doy,
      fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;
  return -fwdlw + fwd - 1;
}

function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
  var localWeekday = (7 + weekday - dow) % 7,
      weekOffset = firstWeekOffset(year, dow, doy),
      dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
      resYear,
      resDayOfYear;

  if (dayOfYear <= 0) {
    resYear = year - 1;
    resDayOfYear = daysInYear(resYear) + dayOfYear;
  } else if (dayOfYear > daysInYear(year)) {
    resYear = year + 1;
    resDayOfYear = dayOfYear - daysInYear(year);
  } else {
    resYear = year;
    resDayOfYear = dayOfYear;
  }

  return {
    year: resYear,
    dayOfYear: resDayOfYear
  };
}

function weekOfYear(mom, dow, doy) {
  var weekOffset = firstWeekOffset(mom.year(), dow, doy),
      week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
      resWeek,
      resYear;

  if (week < 1) {
    resYear = mom.year() - 1;
    resWeek = week + weeksInYear(resYear, dow, doy);
  } else if (week > weeksInYear(mom.year(), dow, doy)) {
    resWeek = week - weeksInYear(mom.year(), dow, doy);
    resYear = mom.year() + 1;
  } else {
    resYear = mom.year();
    resWeek = week;
  }

  return {
    week: resWeek,
    year: resYear
  };
}

function weeksInYear(year, dow, doy) {
  var weekOffset = firstWeekOffset(year, dow, doy),
      weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
  return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
}

addFormatToken('w', ['ww', 2], 'wo', 'week');
addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');
addUnitAlias('week', 'w');
addUnitAlias('isoWeek', 'W');
addUnitPriority('week', 5);
addUnitPriority('isoWeek', 5);
addRegexToken('w', match1to2);
addRegexToken('ww', match1to2, match2);
addRegexToken('W', match1to2);
addRegexToken('WW', match1to2, match2);
addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
  week[token.substr(0, 1)] = toInt(input);
});

function localeWeek(mom) {
  return weekOfYear(mom, this._week.dow, this._week.doy).week;
}

var defaultLocaleWeek = {
  dow: 0,
  doy: 6
};

function localeFirstDayOfWeek() {
  return this._week.dow;
}

function localeFirstDayOfYear() {
  return this._week.doy;
}

function getSetWeek(input) {
  var week = this.localeData().week(this);
  return input == null ? week : this.add((input - week) * 7, 'd');
}

function getSetISOWeek(input) {
  var week = weekOfYear(this, 1, 4).week;
  return input == null ? week : this.add((input - week) * 7, 'd');
}

addFormatToken('d', 0, 'do', 'day');
addFormatToken('dd', 0, 0, function (format) {
  return this.localeData().weekdaysMin(this, format);
});
addFormatToken('ddd', 0, 0, function (format) {
  return this.localeData().weekdaysShort(this, format);
});
addFormatToken('dddd', 0, 0, function (format) {
  return this.localeData().weekdays(this, format);
});
addFormatToken('e', 0, 0, 'weekday');
addFormatToken('E', 0, 0, 'isoWeekday');
addUnitAlias('day', 'd');
addUnitAlias('weekday', 'e');
addUnitAlias('isoWeekday', 'E');
addUnitPriority('day', 11);
addUnitPriority('weekday', 11);
addUnitPriority('isoWeekday', 11);
addRegexToken('d', match1to2);
addRegexToken('e', match1to2);
addRegexToken('E', match1to2);
addRegexToken('dd', function (isStrict, locale) {
  return locale.weekdaysMinRegex(isStrict);
});
addRegexToken('ddd', function (isStrict, locale) {
  return locale.weekdaysShortRegex(isStrict);
});
addRegexToken('dddd', function (isStrict, locale) {
  return locale.weekdaysRegex(isStrict);
});
addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {
  var weekday = config._locale.weekdaysParse(input, token, config._strict);

  if (weekday != null) {
    week.d = weekday;
  } else {
    getParsingFlags(config).invalidWeekday = input;
  }
});
addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
  week[token] = toInt(input);
});

function parseWeekday(input, locale) {
  if (typeof input !== 'string') {
    return input;
  }

  if (!isNaN(input)) {
    return parseInt(input, 10);
  }

  input = locale.weekdaysParse(input);

  if (typeof input === 'number') {
    return input;
  }

  return null;
}

function parseIsoWeekday(input, locale) {
  if (typeof input === 'string') {
    return locale.weekdaysParse(input) % 7 || 7;
  }

  return isNaN(input) ? null : input;
}

function shiftWeekdays(ws, n) {
  return ws.slice(n, 7).concat(ws.slice(0, n));
}

var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    defaultWeekdaysRegex = matchWord,
    defaultWeekdaysShortRegex = matchWord,
    defaultWeekdaysMinRegex = matchWord;

function localeWeekdays(m, format) {
  var weekdays = isArray(this._weekdays) ? this._weekdays : this._weekdays[m && m !== true && this._weekdays.isFormat.test(format) ? 'format' : 'standalone'];
  return m === true ? shiftWeekdays(weekdays, this._week.dow) : m ? weekdays[m.day()] : weekdays;
}

function localeWeekdaysShort(m) {
  return m === true ? shiftWeekdays(this._weekdaysShort, this._week.dow) : m ? this._weekdaysShort[m.day()] : this._weekdaysShort;
}

function localeWeekdaysMin(m) {
  return m === true ? shiftWeekdays(this._weekdaysMin, this._week.dow) : m ? this._weekdaysMin[m.day()] : this._weekdaysMin;
}

function handleStrictParse$1(weekdayName, format, strict) {
  var i,
      ii,
      mom,
      llc = weekdayName.toLocaleLowerCase();

  if (!this._weekdaysParse) {
    this._weekdaysParse = [];
    this._shortWeekdaysParse = [];
    this._minWeekdaysParse = [];

    for (i = 0; i < 7; ++i) {
      mom = createUTC([2000, 1]).day(i);
      this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();
      this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();
      this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();
    }
  }

  if (strict) {
    if (format === 'dddd') {
      ii = indexOf.call(this._weekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else if (format === 'ddd') {
      ii = indexOf.call(this._shortWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._minWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    }
  } else {
    if (format === 'dddd') {
      ii = indexOf.call(this._weekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._shortWeekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._minWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else if (format === 'ddd') {
      ii = indexOf.call(this._shortWeekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._weekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._minWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    } else {
      ii = indexOf.call(this._minWeekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._weekdaysParse, llc);

      if (ii !== -1) {
        return ii;
      }

      ii = indexOf.call(this._shortWeekdaysParse, llc);
      return ii !== -1 ? ii : null;
    }
  }
}

function localeWeekdaysParse(weekdayName, format, strict) {
  var i, mom, regex;

  if (this._weekdaysParseExact) {
    return handleStrictParse$1.call(this, weekdayName, format, strict);
  }

  if (!this._weekdaysParse) {
    this._weekdaysParse = [];
    this._minWeekdaysParse = [];
    this._shortWeekdaysParse = [];
    this._fullWeekdaysParse = [];
  }

  for (i = 0; i < 7; i++) {
    mom = createUTC([2000, 1]).day(i);

    if (strict && !this._fullWeekdaysParse[i]) {
      this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\.?') + '$', 'i');
      this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$', 'i');
      this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$', 'i');
    }

    if (!this._weekdaysParse[i]) {
      regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
      this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
    }

    if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
      return i;
    } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
      return i;
    } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
      return i;
    } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
      return i;
    }
  }
}

function getSetDayOfWeek(input) {
  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();

  if (input != null) {
    input = parseWeekday(input, this.localeData());
    return this.add(input - day, 'd');
  } else {
    return day;
  }
}

function getSetLocaleDayOfWeek(input) {
  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
  return input == null ? weekday : this.add(input - weekday, 'd');
}

function getSetISODayOfWeek(input) {
  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  if (input != null) {
    var weekday = parseIsoWeekday(input, this.localeData());
    return this.day(this.day() % 7 ? weekday : weekday - 7);
  } else {
    return this.day() || 7;
  }
}

function weekdaysRegex(isStrict) {
  if (this._weekdaysParseExact) {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      computeWeekdaysParse.call(this);
    }

    if (isStrict) {
      return this._weekdaysStrictRegex;
    } else {
      return this._weekdaysRegex;
    }
  } else {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      this._weekdaysRegex = defaultWeekdaysRegex;
    }

    return this._weekdaysStrictRegex && isStrict ? this._weekdaysStrictRegex : this._weekdaysRegex;
  }
}

function weekdaysShortRegex(isStrict) {
  if (this._weekdaysParseExact) {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      computeWeekdaysParse.call(this);
    }

    if (isStrict) {
      return this._weekdaysShortStrictRegex;
    } else {
      return this._weekdaysShortRegex;
    }
  } else {
    if (!hasOwnProp(this, '_weekdaysShortRegex')) {
      this._weekdaysShortRegex = defaultWeekdaysShortRegex;
    }

    return this._weekdaysShortStrictRegex && isStrict ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
  }
}

function weekdaysMinRegex(isStrict) {
  if (this._weekdaysParseExact) {
    if (!hasOwnProp(this, '_weekdaysRegex')) {
      computeWeekdaysParse.call(this);
    }

    if (isStrict) {
      return this._weekdaysMinStrictRegex;
    } else {
      return this._weekdaysMinRegex;
    }
  } else {
    if (!hasOwnProp(this, '_weekdaysMinRegex')) {
      this._weekdaysMinRegex = defaultWeekdaysMinRegex;
    }

    return this._weekdaysMinStrictRegex && isStrict ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
  }
}

function computeWeekdaysParse() {
  function cmpLenRev(a, b) {
    return b.length - a.length;
  }

  var minPieces = [],
      shortPieces = [],
      longPieces = [],
      mixedPieces = [],
      i,
      mom,
      minp,
      shortp,
      longp;

  for (i = 0; i < 7; i++) {
    mom = createUTC([2000, 1]).day(i);
    minp = regexEscape(this.weekdaysMin(mom, ''));
    shortp = regexEscape(this.weekdaysShort(mom, ''));
    longp = regexEscape(this.weekdays(mom, ''));
    minPieces.push(minp);
    shortPieces.push(shortp);
    longPieces.push(longp);
    mixedPieces.push(minp);
    mixedPieces.push(shortp);
    mixedPieces.push(longp);
  }

  minPieces.sort(cmpLenRev);
  shortPieces.sort(cmpLenRev);
  longPieces.sort(cmpLenRev);
  mixedPieces.sort(cmpLenRev);
  this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
  this._weekdaysShortRegex = this._weekdaysRegex;
  this._weekdaysMinRegex = this._weekdaysRegex;
  this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
  this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
  this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');
}

function hFormat() {
  return this.hours() % 12 || 12;
}

function kFormat() {
  return this.hours() || 24;
}

addFormatToken('H', ['HH', 2], 0, 'hour');
addFormatToken('h', ['hh', 2], 0, hFormat);
addFormatToken('k', ['kk', 2], 0, kFormat);
addFormatToken('hmm', 0, 0, function () {
  return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
});
addFormatToken('hmmss', 0, 0, function () {
  return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) + zeroFill(this.seconds(), 2);
});
addFormatToken('Hmm', 0, 0, function () {
  return '' + this.hours() + zeroFill(this.minutes(), 2);
});
addFormatToken('Hmmss', 0, 0, function () {
  return '' + this.hours() + zeroFill(this.minutes(), 2) + zeroFill(this.seconds(), 2);
});

function meridiem(token, lowercase) {
  addFormatToken(token, 0, 0, function () {
    return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
  });
}

meridiem('a', true);
meridiem('A', false);
addUnitAlias('hour', 'h');
addUnitPriority('hour', 13);

function matchMeridiem(isStrict, locale) {
  return locale._meridiemParse;
}

addRegexToken('a', matchMeridiem);
addRegexToken('A', matchMeridiem);
addRegexToken('H', match1to2);
addRegexToken('h', match1to2);
addRegexToken('k', match1to2);
addRegexToken('HH', match1to2, match2);
addRegexToken('hh', match1to2, match2);
addRegexToken('kk', match1to2, match2);
addRegexToken('hmm', match3to4);
addRegexToken('hmmss', match5to6);
addRegexToken('Hmm', match3to4);
addRegexToken('Hmmss', match5to6);
addParseToken(['H', 'HH'], HOUR);
addParseToken(['k', 'kk'], function (input, array, config) {
  var kInput = toInt(input);
  array[HOUR] = kInput === 24 ? 0 : kInput;
});
addParseToken(['a', 'A'], function (input, array, config) {
  config._isPm = config._locale.isPM(input);
  config._meridiem = input;
});
addParseToken(['h', 'hh'], function (input, array, config) {
  array[HOUR] = toInt(input);
  getParsingFlags(config).bigHour = true;
});
addParseToken('hmm', function (input, array, config) {
  var pos = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos));
  array[MINUTE] = toInt(input.substr(pos));
  getParsingFlags(config).bigHour = true;
});
addParseToken('hmmss', function (input, array, config) {
  var pos1 = input.length - 4,
      pos2 = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos1));
  array[MINUTE] = toInt(input.substr(pos1, 2));
  array[SECOND] = toInt(input.substr(pos2));
  getParsingFlags(config).bigHour = true;
});
addParseToken('Hmm', function (input, array, config) {
  var pos = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos));
  array[MINUTE] = toInt(input.substr(pos));
});
addParseToken('Hmmss', function (input, array, config) {
  var pos1 = input.length - 4,
      pos2 = input.length - 2;
  array[HOUR] = toInt(input.substr(0, pos1));
  array[MINUTE] = toInt(input.substr(pos1, 2));
  array[SECOND] = toInt(input.substr(pos2));
});

function localeIsPM(input) {
  return (input + '').toLowerCase().charAt(0) === 'p';
}

var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i,
    getSetHour = makeGetSet('Hours', true);

function localeMeridiem(hours, minutes, isLower) {
  if (hours > 11) {
    return isLower ? 'pm' : 'PM';
  } else {
    return isLower ? 'am' : 'AM';
  }
}

var baseConfig = {
  calendar: defaultCalendar,
  longDateFormat: defaultLongDateFormat,
  invalidDate: defaultInvalidDate,
  ordinal: defaultOrdinal,
  dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,
  relativeTime: defaultRelativeTime,
  months: defaultLocaleMonths,
  monthsShort: defaultLocaleMonthsShort,
  week: defaultLocaleWeek,
  weekdays: defaultLocaleWeekdays,
  weekdaysMin: defaultLocaleWeekdaysMin,
  weekdaysShort: defaultLocaleWeekdaysShort,
  meridiemParse: defaultLocaleMeridiemParse
};
var locales = {},
    localeFamilies = {},
    globalLocale;

function commonPrefix(arr1, arr2) {
  var i,
      minl = Math.min(arr1.length, arr2.length);

  for (i = 0; i < minl; i += 1) {
    if (arr1[i] !== arr2[i]) {
      return i;
    }
  }

  return minl;
}

function normalizeLocale(key) {
  return key ? key.toLowerCase().replace('_', '-') : key;
}

function chooseLocale(names) {
  var i = 0,
      j,
      next,
      locale,
      split;

  while (i < names.length) {
    split = normalizeLocale(names[i]).split('-');
    j = split.length;
    next = normalizeLocale(names[i + 1]);
    next = next ? next.split('-') : null;

    while (j > 0) {
      locale = loadLocale(split.slice(0, j).join('-'));

      if (locale) {
        return locale;
      }

      if (next && next.length >= j && commonPrefix(split, next) >= j - 1) {
        break;
      }

      j--;
    }

    i++;
  }

  return globalLocale;
}

function loadLocale(name) {
  var oldLocale = null,
      aliasedRequire;

  if (locales[name] === undefined && typeof module !== 'undefined' && module && module.exports) {
    try {
      oldLocale = globalLocale._abbr;
      aliasedRequire = require;
      __webpack_require__("./node_modules/moment/dist/locale sync recursive ^\\.\\/.*$")("./" + name);
      getSetGlobalLocale(oldLocale);
    } catch (e) {
      locales[name] = null;
    }
  }

  return locales[name];
}

function getSetGlobalLocale(key, values) {
  var data;

  if (key) {
    if (isUndefined(values)) {
      data = getLocale(key);
    } else {
      data = defineLocale(key, values);
    }

    if (data) {
      globalLocale = data;
    } else {
      if (typeof console !== 'undefined' && console.warn) {
        console.warn('Locale ' + key + ' not found. Did you forget to load it?');
      }
    }
  }

  return globalLocale._abbr;
}

function defineLocale(name, config) {
  if (config !== null) {
    var locale,
        parentConfig = baseConfig;
    config.abbr = name;

    if (locales[name] != null) {
      deprecateSimple('defineLocaleOverride', 'use moment.updateLocale(localeName, config) to change ' + 'an existing locale. moment.defineLocale(localeName, ' + 'config) should only be used for creating a new locale ' + 'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');
      parentConfig = locales[name]._config;
    } else if (config.parentLocale != null) {
      if (locales[config.parentLocale] != null) {
        parentConfig = locales[config.parentLocale]._config;
      } else {
        locale = loadLocale(config.parentLocale);

        if (locale != null) {
          parentConfig = locale._config;
        } else {
          if (!localeFamilies[config.parentLocale]) {
            localeFamilies[config.parentLocale] = [];
          }

          localeFamilies[config.parentLocale].push({
            name: name,
            config: config
          });
          return null;
        }
      }
    }

    locales[name] = new Locale(mergeConfigs(parentConfig, config));

    if (localeFamilies[name]) {
      localeFamilies[name].forEach(function (x) {
        defineLocale(x.name, x.config);
      });
    }

    getSetGlobalLocale(name);
    return locales[name];
  } else {
    delete locales[name];
    return null;
  }
}

function updateLocale(name, config) {
  if (config != null) {
    var locale,
        tmpLocale,
        parentConfig = baseConfig;

    if (locales[name] != null && locales[name].parentLocale != null) {
      locales[name].set(mergeConfigs(locales[name]._config, config));
    } else {
      tmpLocale = loadLocale(name);

      if (tmpLocale != null) {
        parentConfig = tmpLocale._config;
      }

      config = mergeConfigs(parentConfig, config);

      if (tmpLocale == null) {
        config.abbr = name;
      }

      locale = new Locale(config);
      locale.parentLocale = locales[name];
      locales[name] = locale;
    }

    getSetGlobalLocale(name);
  } else {
    if (locales[name] != null) {
      if (locales[name].parentLocale != null) {
        locales[name] = locales[name].parentLocale;

        if (name === getSetGlobalLocale()) {
          getSetGlobalLocale(name);
        }
      } else if (locales[name] != null) {
        delete locales[name];
      }
    }
  }

  return locales[name];
}

function getLocale(key) {
  var locale;

  if (key && key._locale && key._locale._abbr) {
    key = key._locale._abbr;
  }

  if (!key) {
    return globalLocale;
  }

  if (!isArray(key)) {
    locale = loadLocale(key);

    if (locale) {
      return locale;
    }

    key = [key];
  }

  return chooseLocale(key);
}

function listLocales() {
  return keys(locales);
}

function checkOverflow(m) {
  var overflow,
      a = m._a;

  if (a && getParsingFlags(m).overflow === -2) {
    overflow = a[MONTH] < 0 || a[MONTH] > 11 ? MONTH : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH]) ? DATE : a[HOUR] < 0 || a[HOUR] > 24 || a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0) ? HOUR : a[MINUTE] < 0 || a[MINUTE] > 59 ? MINUTE : a[SECOND] < 0 || a[SECOND] > 59 ? SECOND : a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND : -1;

    if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
      overflow = DATE;
    }

    if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
      overflow = WEEK;
    }

    if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
      overflow = WEEKDAY;
    }

    getParsingFlags(m).overflow = overflow;
  }

  return m;
}

var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
    basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
    tzRegex = /Z|[+-]\d\d(?::?\d\d)?/,
    isoDates = [['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/], ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/], ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/], ['GGGG-[W]WW', /\d{4}-W\d\d/, false], ['YYYY-DDD', /\d{4}-\d{3}/], ['YYYY-MM', /\d{4}-\d\d/, false], ['YYYYYYMMDD', /[+-]\d{10}/], ['YYYYMMDD', /\d{8}/], ['GGGG[W]WWE', /\d{4}W\d{3}/], ['GGGG[W]WW', /\d{4}W\d{2}/, false], ['YYYYDDD', /\d{7}/], ['YYYYMM', /\d{6}/, false], ['YYYY', /\d{4}/, false]],
    isoTimes = [['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/], ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/], ['HH:mm:ss', /\d\d:\d\d:\d\d/], ['HH:mm', /\d\d:\d\d/], ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/], ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/], ['HHmmss', /\d\d\d\d\d\d/], ['HHmm', /\d\d\d\d/], ['HH', /\d\d/]],
    aspNetJsonRegex = /^\/?Date\((-?\d+)/i,
    rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
    obsOffsets = {
  UT: 0,
  GMT: 0,
  EDT: -4 * 60,
  EST: -5 * 60,
  CDT: -5 * 60,
  CST: -6 * 60,
  MDT: -6 * 60,
  MST: -7 * 60,
  PDT: -7 * 60,
  PST: -8 * 60
};

function configFromISO(config) {
  var i,
      l,
      string = config._i,
      match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
      allowTime,
      dateFormat,
      timeFormat,
      tzFormat;

  if (match) {
    getParsingFlags(config).iso = true;

    for (i = 0, l = isoDates.length; i < l; i++) {
      if (isoDates[i][1].exec(match[1])) {
        dateFormat = isoDates[i][0];
        allowTime = isoDates[i][2] !== false;
        break;
      }
    }

    if (dateFormat == null) {
      config._isValid = false;
      return;
    }

    if (match[3]) {
      for (i = 0, l = isoTimes.length; i < l; i++) {
        if (isoTimes[i][1].exec(match[3])) {
          timeFormat = (match[2] || ' ') + isoTimes[i][0];
          break;
        }
      }

      if (timeFormat == null) {
        config._isValid = false;
        return;
      }
    }

    if (!allowTime && timeFormat != null) {
      config._isValid = false;
      return;
    }

    if (match[4]) {
      if (tzRegex.exec(match[4])) {
        tzFormat = 'Z';
      } else {
        config._isValid = false;
        return;
      }
    }

    config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
    configFromStringAndFormat(config);
  } else {
    config._isValid = false;
  }
}

function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  var result = [untruncateYear(yearStr), defaultLocaleMonthsShort.indexOf(monthStr), parseInt(dayStr, 10), parseInt(hourStr, 10), parseInt(minuteStr, 10)];

  if (secondStr) {
    result.push(parseInt(secondStr, 10));
  }

  return result;
}

function untruncateYear(yearStr) {
  var year = parseInt(yearStr, 10);

  if (year <= 49) {
    return 2000 + year;
  } else if (year <= 999) {
    return 1900 + year;
  }

  return year;
}

function preprocessRFC2822(s) {
  return s.replace(/\([^)]*\)|[\n\t]/g, ' ').replace(/(\s\s+)/g, ' ').replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}

function checkWeekday(weekdayStr, parsedInput, config) {
  if (weekdayStr) {
    var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),
        weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();

    if (weekdayProvided !== weekdayActual) {
      getParsingFlags(config).weekdayMismatch = true;
      config._isValid = false;
      return false;
    }
  }

  return true;
}

function calculateOffset(obsOffset, militaryOffset, numOffset) {
  if (obsOffset) {
    return obsOffsets[obsOffset];
  } else if (militaryOffset) {
    return 0;
  } else {
    var hm = parseInt(numOffset, 10),
        m = hm % 100,
        h = (hm - m) / 100;
    return h * 60 + m;
  }
}

function configFromRFC2822(config) {
  var match = rfc2822.exec(preprocessRFC2822(config._i)),
      parsedArray;

  if (match) {
    parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);

    if (!checkWeekday(match[1], parsedArray, config)) {
      return;
    }

    config._a = parsedArray;
    config._tzm = calculateOffset(match[8], match[9], match[10]);
    config._d = createUTCDate.apply(null, config._a);

    config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);

    getParsingFlags(config).rfc2822 = true;
  } else {
    config._isValid = false;
  }
}

function configFromString(config) {
  var matched = aspNetJsonRegex.exec(config._i);

  if (matched !== null) {
    config._d = new Date(+matched[1]);
    return;
  }

  configFromISO(config);

  if (config._isValid === false) {
    delete config._isValid;
  } else {
    return;
  }

  configFromRFC2822(config);

  if (config._isValid === false) {
    delete config._isValid;
  } else {
    return;
  }

  if (config._strict) {
    config._isValid = false;
  } else {
    hooks.createFromInputFallback(config);
  }
}

hooks.createFromInputFallback = deprecate('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' + 'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' + 'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.', function (config) {
  config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
});

function defaults(a, b, c) {
  if (a != null) {
    return a;
  }

  if (b != null) {
    return b;
  }

  return c;
}

function currentDateArray(config) {
  var nowValue = new Date(hooks.now());

  if (config._useUTC) {
    return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
  }

  return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
}

function configFromArray(config) {
  var i,
      date,
      input = [],
      currentDate,
      expectedWeekday,
      yearToUse;

  if (config._d) {
    return;
  }

  currentDate = currentDateArray(config);

  if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
    dayOfYearFromWeekInfo(config);
  }

  if (config._dayOfYear != null) {
    yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

    if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {
      getParsingFlags(config)._overflowDayOfYear = true;
    }

    date = createUTCDate(yearToUse, 0, config._dayOfYear);
    config._a[MONTH] = date.getUTCMonth();
    config._a[DATE] = date.getUTCDate();
  }

  for (i = 0; i < 3 && config._a[i] == null; ++i) {
    config._a[i] = input[i] = currentDate[i];
  }

  for (; i < 7; i++) {
    config._a[i] = input[i] = config._a[i] == null ? i === 2 ? 1 : 0 : config._a[i];
  }

  if (config._a[HOUR] === 24 && config._a[MINUTE] === 0 && config._a[SECOND] === 0 && config._a[MILLISECOND] === 0) {
    config._nextDay = true;
    config._a[HOUR] = 0;
  }

  config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
  expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();

  if (config._tzm != null) {
    config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
  }

  if (config._nextDay) {
    config._a[HOUR] = 24;
  }

  if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {
    getParsingFlags(config).weekdayMismatch = true;
  }
}

function dayOfYearFromWeekInfo(config) {
  var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;
  w = config._w;

  if (w.GG != null || w.W != null || w.E != null) {
    dow = 1;
    doy = 4;
    weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);
    week = defaults(w.W, 1);
    weekday = defaults(w.E, 1);

    if (weekday < 1 || weekday > 7) {
      weekdayOverflow = true;
    }
  } else {
    dow = config._locale._week.dow;
    doy = config._locale._week.doy;
    curWeek = weekOfYear(createLocal(), dow, doy);
    weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);
    week = defaults(w.w, curWeek.week);

    if (w.d != null) {
      weekday = w.d;

      if (weekday < 0 || weekday > 6) {
        weekdayOverflow = true;
      }
    } else if (w.e != null) {
      weekday = w.e + dow;

      if (w.e < 0 || w.e > 6) {
        weekdayOverflow = true;
      }
    } else {
      weekday = dow;
    }
  }

  if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
    getParsingFlags(config)._overflowWeeks = true;
  } else if (weekdayOverflow != null) {
    getParsingFlags(config)._overflowWeekday = true;
  } else {
    temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
    config._a[YEAR] = temp.year;
    config._dayOfYear = temp.dayOfYear;
  }
}

hooks.ISO_8601 = function () {};

hooks.RFC_2822 = function () {};

function configFromStringAndFormat(config) {
  if (config._f === hooks.ISO_8601) {
    configFromISO(config);
    return;
  }

  if (config._f === hooks.RFC_2822) {
    configFromRFC2822(config);
    return;
  }

  config._a = [];
  getParsingFlags(config).empty = true;
  var string = '' + config._i,
      i,
      parsedInput,
      tokens,
      token,
      skipped,
      stringLength = string.length,
      totalParsedInputLength = 0,
      era;
  tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

  for (i = 0; i < tokens.length; i++) {
    token = tokens[i];
    parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];

    if (parsedInput) {
      skipped = string.substr(0, string.indexOf(parsedInput));

      if (skipped.length > 0) {
        getParsingFlags(config).unusedInput.push(skipped);
      }

      string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
      totalParsedInputLength += parsedInput.length;
    }

    if (formatTokenFunctions[token]) {
      if (parsedInput) {
        getParsingFlags(config).empty = false;
      } else {
        getParsingFlags(config).unusedTokens.push(token);
      }

      addTimeToArrayFromToken(token, parsedInput, config);
    } else if (config._strict && !parsedInput) {
      getParsingFlags(config).unusedTokens.push(token);
    }
  }

  getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;

  if (string.length > 0) {
    getParsingFlags(config).unusedInput.push(string);
  }

  if (config._a[HOUR] <= 12 && getParsingFlags(config).bigHour === true && config._a[HOUR] > 0) {
    getParsingFlags(config).bigHour = undefined;
  }

  getParsingFlags(config).parsedDateParts = config._a.slice(0);
  getParsingFlags(config).meridiem = config._meridiem;
  config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);
  era = getParsingFlags(config).era;

  if (era !== null) {
    config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);
  }

  configFromArray(config);
  checkOverflow(config);
}

function meridiemFixWrap(locale, hour, meridiem) {
  var isPm;

  if (meridiem == null) {
    return hour;
  }

  if (locale.meridiemHour != null) {
    return locale.meridiemHour(hour, meridiem);
  } else if (locale.isPM != null) {
    isPm = locale.isPM(meridiem);

    if (isPm && hour < 12) {
      hour += 12;
    }

    if (!isPm && hour === 12) {
      hour = 0;
    }

    return hour;
  } else {
    return hour;
  }
}

function configFromStringAndArray(config) {
  var tempConfig,
      bestMoment,
      scoreToBeat,
      i,
      currentScore,
      validFormatFound,
      bestFormatIsValid = false;

  if (config._f.length === 0) {
    getParsingFlags(config).invalidFormat = true;
    config._d = new Date(NaN);
    return;
  }

  for (i = 0; i < config._f.length; i++) {
    currentScore = 0;
    validFormatFound = false;
    tempConfig = copyConfig({}, config);

    if (config._useUTC != null) {
      tempConfig._useUTC = config._useUTC;
    }

    tempConfig._f = config._f[i];
    configFromStringAndFormat(tempConfig);

    if (isValid(tempConfig)) {
      validFormatFound = true;
    }

    currentScore += getParsingFlags(tempConfig).charsLeftOver;
    currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;
    getParsingFlags(tempConfig).score = currentScore;

    if (!bestFormatIsValid) {
      if (scoreToBeat == null || currentScore < scoreToBeat || validFormatFound) {
        scoreToBeat = currentScore;
        bestMoment = tempConfig;

        if (validFormatFound) {
          bestFormatIsValid = true;
        }
      }
    } else {
      if (currentScore < scoreToBeat) {
        scoreToBeat = currentScore;
        bestMoment = tempConfig;
      }
    }
  }

  extend(config, bestMoment || tempConfig);
}

function configFromObject(config) {
  if (config._d) {
    return;
  }

  var i = normalizeObjectUnits(config._i),
      dayOrDate = i.day === undefined ? i.date : i.day;
  config._a = map([i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond], function (obj) {
    return obj && parseInt(obj, 10);
  });
  configFromArray(config);
}

function createFromConfig(config) {
  var res = new Moment(checkOverflow(prepareConfig(config)));

  if (res._nextDay) {
    res.add(1, 'd');
    res._nextDay = undefined;
  }

  return res;
}

function prepareConfig(config) {
  var input = config._i,
      format = config._f;
  config._locale = config._locale || getLocale(config._l);

  if (input === null || format === undefined && input === '') {
    return createInvalid({
      nullInput: true
    });
  }

  if (typeof input === 'string') {
    config._i = input = config._locale.preparse(input);
  }

  if (isMoment(input)) {
    return new Moment(checkOverflow(input));
  } else if (isDate(input)) {
    config._d = input;
  } else if (isArray(format)) {
    configFromStringAndArray(config);
  } else if (format) {
    configFromStringAndFormat(config);
  } else {
    configFromInput(config);
  }

  if (!isValid(config)) {
    config._d = null;
  }

  return config;
}

function configFromInput(config) {
  var input = config._i;

  if (isUndefined(input)) {
    config._d = new Date(hooks.now());
  } else if (isDate(input)) {
    config._d = new Date(input.valueOf());
  } else if (typeof input === 'string') {
    configFromString(config);
  } else if (isArray(input)) {
    config._a = map(input.slice(0), function (obj) {
      return parseInt(obj, 10);
    });
    configFromArray(config);
  } else if (isObject(input)) {
    configFromObject(config);
  } else if (isNumber(input)) {
    config._d = new Date(input);
  } else {
    hooks.createFromInputFallback(config);
  }
}

function createLocalOrUTC(input, format, locale, strict, isUTC) {
  var c = {};

  if (format === true || format === false) {
    strict = format;
    format = undefined;
  }

  if (locale === true || locale === false) {
    strict = locale;
    locale = undefined;
  }

  if (isObject(input) && isObjectEmpty(input) || isArray(input) && input.length === 0) {
    input = undefined;
  }

  c._isAMomentObject = true;
  c._useUTC = c._isUTC = isUTC;
  c._l = locale;
  c._i = input;
  c._f = format;
  c._strict = strict;
  return createFromConfig(c);
}

function createLocal(input, format, locale, strict) {
  return createLocalOrUTC(input, format, locale, strict, false);
}

var prototypeMin = deprecate('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/', function () {
  var other = createLocal.apply(null, arguments);

  if (this.isValid() && other.isValid()) {
    return other < this ? this : other;
  } else {
    return createInvalid();
  }
}),
    prototypeMax = deprecate('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/', function () {
  var other = createLocal.apply(null, arguments);

  if (this.isValid() && other.isValid()) {
    return other > this ? this : other;
  } else {
    return createInvalid();
  }
});

function pickBy(fn, moments) {
  var res, i;

  if (moments.length === 1 && isArray(moments[0])) {
    moments = moments[0];
  }

  if (!moments.length) {
    return createLocal();
  }

  res = moments[0];

  for (i = 1; i < moments.length; ++i) {
    if (!moments[i].isValid() || moments[i][fn](res)) {
      res = moments[i];
    }
  }

  return res;
}

function min() {
  var args = [].slice.call(arguments, 0);
  return pickBy('isBefore', args);
}

function max() {
  var args = [].slice.call(arguments, 0);
  return pickBy('isAfter', args);
}

var now = function now() {
  return Date.now ? Date.now() : +new Date();
};

var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];

function isDurationValid(m) {
  var key,
      unitHasDecimal = false,
      i;

  for (key in m) {
    if (hasOwnProp(m, key) && !(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {
      return false;
    }
  }

  for (i = 0; i < ordering.length; ++i) {
    if (m[ordering[i]]) {
      if (unitHasDecimal) {
        return false;
      }

      if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {
        unitHasDecimal = true;
      }
    }
  }

  return true;
}

function isValid$1() {
  return this._isValid;
}

function createInvalid$1() {
  return createDuration(NaN);
}

function Duration(duration) {
  var normalizedInput = normalizeObjectUnits(duration),
      years = normalizedInput.year || 0,
      quarters = normalizedInput.quarter || 0,
      months = normalizedInput.month || 0,
      weeks = normalizedInput.week || normalizedInput.isoWeek || 0,
      days = normalizedInput.day || 0,
      hours = normalizedInput.hour || 0,
      minutes = normalizedInput.minute || 0,
      seconds = normalizedInput.second || 0,
      milliseconds = normalizedInput.millisecond || 0;
  this._isValid = isDurationValid(normalizedInput);
  this._milliseconds = +milliseconds + seconds * 1e3 + minutes * 6e4 + hours * 1000 * 60 * 60;
  this._days = +days + weeks * 7;
  this._months = +months + quarters * 3 + years * 12;
  this._data = {};
  this._locale = getLocale();

  this._bubble();
}

function isDuration(obj) {
  return obj instanceof Duration;
}

function absRound(number) {
  if (number < 0) {
    return Math.round(-1 * number) * -1;
  } else {
    return Math.round(number);
  }
}

function compareArrays(array1, array2, dontConvert) {
  var len = Math.min(array1.length, array2.length),
      lengthDiff = Math.abs(array1.length - array2.length),
      diffs = 0,
      i;

  for (i = 0; i < len; i++) {
    if (dontConvert && array1[i] !== array2[i] || !dontConvert && toInt(array1[i]) !== toInt(array2[i])) {
      diffs++;
    }
  }

  return diffs + lengthDiff;
}

function offset(token, separator) {
  addFormatToken(token, 0, 0, function () {
    var offset = this.utcOffset(),
        sign = '+';

    if (offset < 0) {
      offset = -offset;
      sign = '-';
    }

    return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~offset % 60, 2);
  });
}

offset('Z', ':');
offset('ZZ', '');
addRegexToken('Z', matchShortOffset);
addRegexToken('ZZ', matchShortOffset);
addParseToken(['Z', 'ZZ'], function (input, array, config) {
  config._useUTC = true;
  config._tzm = offsetFromString(matchShortOffset, input);
});
var chunkOffset = /([\+\-]|\d\d)/gi;

function offsetFromString(matcher, string) {
  var matches = (string || '').match(matcher),
      chunk,
      parts,
      minutes;

  if (matches === null) {
    return null;
  }

  chunk = matches[matches.length - 1] || [];
  parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];
  minutes = +(parts[1] * 60) + toInt(parts[2]);
  return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;
}

function cloneWithOffset(input, model) {
  var res, diff;

  if (model._isUTC) {
    res = model.clone();
    diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();

    res._d.setTime(res._d.valueOf() + diff);

    hooks.updateOffset(res, false);
    return res;
  } else {
    return createLocal(input).local();
  }
}

function getDateOffset(m) {
  return -Math.round(m._d.getTimezoneOffset());
}

hooks.updateOffset = function () {};

function getSetOffset(input, keepLocalTime, keepMinutes) {
  var offset = this._offset || 0,
      localAdjust;

  if (!this.isValid()) {
    return input != null ? this : NaN;
  }

  if (input != null) {
    if (typeof input === 'string') {
      input = offsetFromString(matchShortOffset, input);

      if (input === null) {
        return this;
      }
    } else if (Math.abs(input) < 16 && !keepMinutes) {
      input = input * 60;
    }

    if (!this._isUTC && keepLocalTime) {
      localAdjust = getDateOffset(this);
    }

    this._offset = input;
    this._isUTC = true;

    if (localAdjust != null) {
      this.add(localAdjust, 'm');
    }

    if (offset !== input) {
      if (!keepLocalTime || this._changeInProgress) {
        addSubtract(this, createDuration(input - offset, 'm'), 1, false);
      } else if (!this._changeInProgress) {
        this._changeInProgress = true;
        hooks.updateOffset(this, true);
        this._changeInProgress = null;
      }
    }

    return this;
  } else {
    return this._isUTC ? offset : getDateOffset(this);
  }
}

function getSetZone(input, keepLocalTime) {
  if (input != null) {
    if (typeof input !== 'string') {
      input = -input;
    }

    this.utcOffset(input, keepLocalTime);
    return this;
  } else {
    return -this.utcOffset();
  }
}

function setOffsetToUTC(keepLocalTime) {
  return this.utcOffset(0, keepLocalTime);
}

function setOffsetToLocal(keepLocalTime) {
  if (this._isUTC) {
    this.utcOffset(0, keepLocalTime);
    this._isUTC = false;

    if (keepLocalTime) {
      this.subtract(getDateOffset(this), 'm');
    }
  }

  return this;
}

function setOffsetToParsedOffset() {
  if (this._tzm != null) {
    this.utcOffset(this._tzm, false, true);
  } else if (typeof this._i === 'string') {
    var tZone = offsetFromString(matchOffset, this._i);

    if (tZone != null) {
      this.utcOffset(tZone);
    } else {
      this.utcOffset(0, true);
    }
  }

  return this;
}

function hasAlignedHourOffset(input) {
  if (!this.isValid()) {
    return false;
  }

  input = input ? createLocal(input).utcOffset() : 0;
  return (this.utcOffset() - input) % 60 === 0;
}

function isDaylightSavingTime() {
  return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
}

function isDaylightSavingTimeShifted() {
  if (!isUndefined(this._isDSTShifted)) {
    return this._isDSTShifted;
  }

  var c = {},
      other;
  copyConfig(c, this);
  c = prepareConfig(c);

  if (c._a) {
    other = c._isUTC ? createUTC(c._a) : createLocal(c._a);
    this._isDSTShifted = this.isValid() && compareArrays(c._a, other.toArray()) > 0;
  } else {
    this._isDSTShifted = false;
  }

  return this._isDSTShifted;
}

function isLocal() {
  return this.isValid() ? !this._isUTC : false;
}

function isUtcOffset() {
  return this.isValid() ? this._isUTC : false;
}

function isUtc() {
  return this.isValid() ? this._isUTC && this._offset === 0 : false;
}

var aspNetRegex = /^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,
    isoRegex = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;

function createDuration(input, key) {
  var duration = input,
      match = null,
      sign,
      ret,
      diffRes;

  if (isDuration(input)) {
    duration = {
      ms: input._milliseconds,
      d: input._days,
      M: input._months
    };
  } else if (isNumber(input) || !isNaN(+input)) {
    duration = {};

    if (key) {
      duration[key] = +input;
    } else {
      duration.milliseconds = +input;
    }
  } else if (match = aspNetRegex.exec(input)) {
    sign = match[1] === '-' ? -1 : 1;
    duration = {
      y: 0,
      d: toInt(match[DATE]) * sign,
      h: toInt(match[HOUR]) * sign,
      m: toInt(match[MINUTE]) * sign,
      s: toInt(match[SECOND]) * sign,
      ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign
    };
  } else if (match = isoRegex.exec(input)) {
    sign = match[1] === '-' ? -1 : 1;
    duration = {
      y: parseIso(match[2], sign),
      M: parseIso(match[3], sign),
      w: parseIso(match[4], sign),
      d: parseIso(match[5], sign),
      h: parseIso(match[6], sign),
      m: parseIso(match[7], sign),
      s: parseIso(match[8], sign)
    };
  } else if (duration == null) {
    duration = {};
  } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
    diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));
    duration = {};
    duration.ms = diffRes.milliseconds;
    duration.M = diffRes.months;
  }

  ret = new Duration(duration);

  if (isDuration(input) && hasOwnProp(input, '_locale')) {
    ret._locale = input._locale;
  }

  if (isDuration(input) && hasOwnProp(input, '_isValid')) {
    ret._isValid = input._isValid;
  }

  return ret;
}

createDuration.fn = Duration.prototype;
createDuration.invalid = createInvalid$1;

function parseIso(inp, sign) {
  var res = inp && parseFloat(inp.replace(',', '.'));
  return (isNaN(res) ? 0 : res) * sign;
}

function positiveMomentsDifference(base, other) {
  var res = {};
  res.months = other.month() - base.month() + (other.year() - base.year()) * 12;

  if (base.clone().add(res.months, 'M').isAfter(other)) {
    --res.months;
  }

  res.milliseconds = +other - +base.clone().add(res.months, 'M');
  return res;
}

function momentsDifference(base, other) {
  var res;

  if (!(base.isValid() && other.isValid())) {
    return {
      milliseconds: 0,
      months: 0
    };
  }

  other = cloneWithOffset(other, base);

  if (base.isBefore(other)) {
    res = positiveMomentsDifference(base, other);
  } else {
    res = positiveMomentsDifference(other, base);
    res.milliseconds = -res.milliseconds;
    res.months = -res.months;
  }

  return res;
}

function createAdder(direction, name) {
  return function (val, period) {
    var dur, tmp;

    if (period !== null && !isNaN(+period)) {
      deprecateSimple(name, 'moment().' + name + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' + 'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');
      tmp = val;
      val = period;
      period = tmp;
    }

    dur = createDuration(val, period);
    addSubtract(this, dur, direction);
    return this;
  };
}

function addSubtract(mom, duration, isAdding, updateOffset) {
  var milliseconds = duration._milliseconds,
      days = absRound(duration._days),
      months = absRound(duration._months);

  if (!mom.isValid()) {
    return;
  }

  updateOffset = updateOffset == null ? true : updateOffset;

  if (months) {
    setMonth(mom, get(mom, 'Month') + months * isAdding);
  }

  if (days) {
    set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);
  }

  if (milliseconds) {
    mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
  }

  if (updateOffset) {
    hooks.updateOffset(mom, days || months);
  }
}

var add = createAdder(1, 'add'),
    subtract = createAdder(-1, 'subtract');

function isString(input) {
  return typeof input === 'string' || input instanceof String;
}

function isMomentInput(input) {
  return isMoment(input) || isDate(input) || isString(input) || isNumber(input) || isNumberOrStringArray(input) || isMomentInputObject(input) || input === null || input === undefined;
}

function isMomentInputObject(input) {
  var objectTest = isObject(input) && !isObjectEmpty(input),
      propertyTest = false,
      properties = ['years', 'year', 'y', 'months', 'month', 'M', 'days', 'day', 'd', 'dates', 'date', 'D', 'hours', 'hour', 'h', 'minutes', 'minute', 'm', 'seconds', 'second', 's', 'milliseconds', 'millisecond', 'ms'],
      i,
      property;

  for (i = 0; i < properties.length; i += 1) {
    property = properties[i];
    propertyTest = propertyTest || hasOwnProp(input, property);
  }

  return objectTest && propertyTest;
}

function isNumberOrStringArray(input) {
  var arrayTest = isArray(input),
      dataTypeTest = false;

  if (arrayTest) {
    dataTypeTest = input.filter(function (item) {
      return !isNumber(item) && isString(input);
    }).length === 0;
  }

  return arrayTest && dataTypeTest;
}

function isCalendarSpec(input) {
  var objectTest = isObject(input) && !isObjectEmpty(input),
      propertyTest = false,
      properties = ['sameDay', 'nextDay', 'lastDay', 'nextWeek', 'lastWeek', 'sameElse'],
      i,
      property;

  for (i = 0; i < properties.length; i += 1) {
    property = properties[i];
    propertyTest = propertyTest || hasOwnProp(input, property);
  }

  return objectTest && propertyTest;
}

function getCalendarFormat(myMoment, now) {
  var diff = myMoment.diff(now, 'days', true);
  return diff < -6 ? 'sameElse' : diff < -1 ? 'lastWeek' : diff < 0 ? 'lastDay' : diff < 1 ? 'sameDay' : diff < 2 ? 'nextDay' : diff < 7 ? 'nextWeek' : 'sameElse';
}

function calendar$1(time, formats) {
  if (arguments.length === 1) {
    if (!arguments[0]) {
      time = undefined;
      formats = undefined;
    } else if (isMomentInput(arguments[0])) {
      time = arguments[0];
      formats = undefined;
    } else if (isCalendarSpec(arguments[0])) {
      formats = arguments[0];
      time = undefined;
    }
  }

  var now = time || createLocal(),
      sod = cloneWithOffset(now, this).startOf('day'),
      format = hooks.calendarFormat(this, sod) || 'sameElse',
      output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);
  return this.format(output || this.localeData().calendar(format, this, createLocal(now)));
}

function clone() {
  return new Moment(this);
}

function isAfter(input, units) {
  var localInput = isMoment(input) ? input : createLocal(input);

  if (!(this.isValid() && localInput.isValid())) {
    return false;
  }

  units = normalizeUnits(units) || 'millisecond';

  if (units === 'millisecond') {
    return this.valueOf() > localInput.valueOf();
  } else {
    return localInput.valueOf() < this.clone().startOf(units).valueOf();
  }
}

function isBefore(input, units) {
  var localInput = isMoment(input) ? input : createLocal(input);

  if (!(this.isValid() && localInput.isValid())) {
    return false;
  }

  units = normalizeUnits(units) || 'millisecond';

  if (units === 'millisecond') {
    return this.valueOf() < localInput.valueOf();
  } else {
    return this.clone().endOf(units).valueOf() < localInput.valueOf();
  }
}

function isBetween(from, to, units, inclusivity) {
  var localFrom = isMoment(from) ? from : createLocal(from),
      localTo = isMoment(to) ? to : createLocal(to);

  if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {
    return false;
  }

  inclusivity = inclusivity || '()';
  return (inclusivity[0] === '(' ? this.isAfter(localFrom, units) : !this.isBefore(localFrom, units)) && (inclusivity[1] === ')' ? this.isBefore(localTo, units) : !this.isAfter(localTo, units));
}

function isSame(input, units) {
  var localInput = isMoment(input) ? input : createLocal(input),
      inputMs;

  if (!(this.isValid() && localInput.isValid())) {
    return false;
  }

  units = normalizeUnits(units) || 'millisecond';

  if (units === 'millisecond') {
    return this.valueOf() === localInput.valueOf();
  } else {
    inputMs = localInput.valueOf();
    return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();
  }
}

function isSameOrAfter(input, units) {
  return this.isSame(input, units) || this.isAfter(input, units);
}

function isSameOrBefore(input, units) {
  return this.isSame(input, units) || this.isBefore(input, units);
}

function diff(input, units, asFloat) {
  var that, zoneDelta, output;

  if (!this.isValid()) {
    return NaN;
  }

  that = cloneWithOffset(input, this);

  if (!that.isValid()) {
    return NaN;
  }

  zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;
  units = normalizeUnits(units);

  switch (units) {
    case 'year':
      output = monthDiff(this, that) / 12;
      break;

    case 'month':
      output = monthDiff(this, that);
      break;

    case 'quarter':
      output = monthDiff(this, that) / 3;
      break;

    case 'second':
      output = (this - that) / 1e3;
      break;

    case 'minute':
      output = (this - that) / 6e4;
      break;

    case 'hour':
      output = (this - that) / 36e5;
      break;

    case 'day':
      output = (this - that - zoneDelta) / 864e5;
      break;

    case 'week':
      output = (this - that - zoneDelta) / 6048e5;
      break;

    default:
      output = this - that;
  }

  return asFloat ? output : absFloor(output);
}

function monthDiff(a, b) {
  if (a.date() < b.date()) {
    return -monthDiff(b, a);
  }

  var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),
      anchor = a.clone().add(wholeMonthDiff, 'months'),
      anchor2,
      adjust;

  if (b - anchor < 0) {
    anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
    adjust = (b - anchor) / (anchor - anchor2);
  } else {
    anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
    adjust = (b - anchor) / (anchor2 - anchor);
  }

  return -(wholeMonthDiff + adjust) || 0;
}

hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';
hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';

function toString() {
  return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
}

function toISOString(keepOffset) {
  if (!this.isValid()) {
    return null;
  }

  var utc = keepOffset !== true,
      m = utc ? this.clone().utc() : this;

  if (m.year() < 0 || m.year() > 9999) {
    return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');
  }

  if (isFunction(Date.prototype.toISOString)) {
    if (utc) {
      return this.toDate().toISOString();
    } else {
      return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));
    }
  }

  return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');
}

function inspect() {
  if (!this.isValid()) {
    return 'moment.invalid(/* ' + this._i + ' */)';
  }

  var func = 'moment',
      zone = '',
      prefix,
      year,
      datetime,
      suffix;

  if (!this.isLocal()) {
    func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';
    zone = 'Z';
  }

  prefix = '[' + func + '("]';
  year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';
  datetime = '-MM-DD[T]HH:mm:ss.SSS';
  suffix = zone + '[")]';
  return this.format(prefix + year + datetime + suffix);
}

function format(inputString) {
  if (!inputString) {
    inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;
  }

  var output = formatMoment(this, inputString);
  return this.localeData().postformat(output);
}

function from(time, withoutSuffix) {
  if (this.isValid() && (isMoment(time) && time.isValid() || createLocal(time).isValid())) {
    return createDuration({
      to: this,
      from: time
    }).locale(this.locale()).humanize(!withoutSuffix);
  } else {
    return this.localeData().invalidDate();
  }
}

function fromNow(withoutSuffix) {
  return this.from(createLocal(), withoutSuffix);
}

function to(time, withoutSuffix) {
  if (this.isValid() && (isMoment(time) && time.isValid() || createLocal(time).isValid())) {
    return createDuration({
      from: this,
      to: time
    }).locale(this.locale()).humanize(!withoutSuffix);
  } else {
    return this.localeData().invalidDate();
  }
}

function toNow(withoutSuffix) {
  return this.to(createLocal(), withoutSuffix);
}

function locale(key) {
  var newLocaleData;

  if (key === undefined) {
    return this._locale._abbr;
  } else {
    newLocaleData = getLocale(key);

    if (newLocaleData != null) {
      this._locale = newLocaleData;
    }

    return this;
  }
}

var lang = deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.', function (key) {
  if (key === undefined) {
    return this.localeData();
  } else {
    return this.locale(key);
  }
});

function localeData() {
  return this._locale;
}

var MS_PER_SECOND = 1000,
    MS_PER_MINUTE = 60 * MS_PER_SECOND,
    MS_PER_HOUR = 60 * MS_PER_MINUTE,
    MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;

function mod$1(dividend, divisor) {
  return (dividend % divisor + divisor) % divisor;
}

function localStartOfDate(y, m, d) {
  if (y < 100 && y >= 0) {
    return new Date(y + 400, m, d) - MS_PER_400_YEARS;
  } else {
    return new Date(y, m, d).valueOf();
  }
}

function utcStartOfDate(y, m, d) {
  if (y < 100 && y >= 0) {
    return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;
  } else {
    return Date.UTC(y, m, d);
  }
}

function startOf(units) {
  var time, startOfDate;
  units = normalizeUnits(units);

  if (units === undefined || units === 'millisecond' || !this.isValid()) {
    return this;
  }

  startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

  switch (units) {
    case 'year':
      time = startOfDate(this.year(), 0, 1);
      break;

    case 'quarter':
      time = startOfDate(this.year(), this.month() - this.month() % 3, 1);
      break;

    case 'month':
      time = startOfDate(this.year(), this.month(), 1);
      break;

    case 'week':
      time = startOfDate(this.year(), this.month(), this.date() - this.weekday());
      break;

    case 'isoWeek':
      time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
      break;

    case 'day':
    case 'date':
      time = startOfDate(this.year(), this.month(), this.date());
      break;

    case 'hour':
      time = this._d.valueOf();
      time -= mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR);
      break;

    case 'minute':
      time = this._d.valueOf();
      time -= mod$1(time, MS_PER_MINUTE);
      break;

    case 'second':
      time = this._d.valueOf();
      time -= mod$1(time, MS_PER_SECOND);
      break;
  }

  this._d.setTime(time);

  hooks.updateOffset(this, true);
  return this;
}

function endOf(units) {
  var time, startOfDate;
  units = normalizeUnits(units);

  if (units === undefined || units === 'millisecond' || !this.isValid()) {
    return this;
  }

  startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

  switch (units) {
    case 'year':
      time = startOfDate(this.year() + 1, 0, 1) - 1;
      break;

    case 'quarter':
      time = startOfDate(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
      break;

    case 'month':
      time = startOfDate(this.year(), this.month() + 1, 1) - 1;
      break;

    case 'week':
      time = startOfDate(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
      break;

    case 'isoWeek':
      time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
      break;

    case 'day':
    case 'date':
      time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;
      break;

    case 'hour':
      time = this._d.valueOf();
      time += MS_PER_HOUR - mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR) - 1;
      break;

    case 'minute':
      time = this._d.valueOf();
      time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;
      break;

    case 'second':
      time = this._d.valueOf();
      time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;
      break;
  }

  this._d.setTime(time);

  hooks.updateOffset(this, true);
  return this;
}

function valueOf() {
  return this._d.valueOf() - (this._offset || 0) * 60000;
}

function unix() {
  return Math.floor(this.valueOf() / 1000);
}

function toDate() {
  return new Date(this.valueOf());
}

function toArray() {
  var m = this;
  return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
}

function toObject() {
  var m = this;
  return {
    years: m.year(),
    months: m.month(),
    date: m.date(),
    hours: m.hours(),
    minutes: m.minutes(),
    seconds: m.seconds(),
    milliseconds: m.milliseconds()
  };
}

function toJSON() {
  return this.isValid() ? this.toISOString() : null;
}

function isValid$2() {
  return isValid(this);
}

function parsingFlags() {
  return extend({}, getParsingFlags(this));
}

function invalidAt() {
  return getParsingFlags(this).overflow;
}

function creationData() {
  return {
    input: this._i,
    format: this._f,
    locale: this._locale,
    isUTC: this._isUTC,
    strict: this._strict
  };
}

addFormatToken('N', 0, 0, 'eraAbbr');
addFormatToken('NN', 0, 0, 'eraAbbr');
addFormatToken('NNN', 0, 0, 'eraAbbr');
addFormatToken('NNNN', 0, 0, 'eraName');
addFormatToken('NNNNN', 0, 0, 'eraNarrow');
addFormatToken('y', ['y', 1], 'yo', 'eraYear');
addFormatToken('y', ['yy', 2], 0, 'eraYear');
addFormatToken('y', ['yyy', 3], 0, 'eraYear');
addFormatToken('y', ['yyyy', 4], 0, 'eraYear');
addRegexToken('N', matchEraAbbr);
addRegexToken('NN', matchEraAbbr);
addRegexToken('NNN', matchEraAbbr);
addRegexToken('NNNN', matchEraName);
addRegexToken('NNNNN', matchEraNarrow);
addParseToken(['N', 'NN', 'NNN', 'NNNN', 'NNNNN'], function (input, array, config, token) {
  var era = config._locale.erasParse(input, token, config._strict);

  if (era) {
    getParsingFlags(config).era = era;
  } else {
    getParsingFlags(config).invalidEra = input;
  }
});
addRegexToken('y', matchUnsigned);
addRegexToken('yy', matchUnsigned);
addRegexToken('yyy', matchUnsigned);
addRegexToken('yyyy', matchUnsigned);
addRegexToken('yo', matchEraYearOrdinal);
addParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);
addParseToken(['yo'], function (input, array, config, token) {
  var match;

  if (config._locale._eraYearOrdinalRegex) {
    match = input.match(config._locale._eraYearOrdinalRegex);
  }

  if (config._locale.eraYearOrdinalParse) {
    array[YEAR] = config._locale.eraYearOrdinalParse(input, match);
  } else {
    array[YEAR] = parseInt(input, 10);
  }
});

function localeEras(m, format) {
  var i,
      l,
      date,
      eras = this._eras || getLocale('en')._eras;

  for (i = 0, l = eras.length; i < l; ++i) {
    switch (typeof eras[i].since) {
      case 'string':
        date = hooks(eras[i].since).startOf('day');
        eras[i].since = date.valueOf();
        break;
    }

    switch (typeof eras[i].until) {
      case 'undefined':
        eras[i].until = +Infinity;
        break;

      case 'string':
        date = hooks(eras[i].until).startOf('day').valueOf();
        eras[i].until = date.valueOf();
        break;
    }
  }

  return eras;
}

function localeErasParse(eraName, format, strict) {
  var i,
      l,
      eras = this.eras(),
      name,
      abbr,
      narrow;
  eraName = eraName.toUpperCase();

  for (i = 0, l = eras.length; i < l; ++i) {
    name = eras[i].name.toUpperCase();
    abbr = eras[i].abbr.toUpperCase();
    narrow = eras[i].narrow.toUpperCase();

    if (strict) {
      switch (format) {
        case 'N':
        case 'NN':
        case 'NNN':
          if (abbr === eraName) {
            return eras[i];
          }

          break;

        case 'NNNN':
          if (name === eraName) {
            return eras[i];
          }

          break;

        case 'NNNNN':
          if (narrow === eraName) {
            return eras[i];
          }

          break;
      }
    } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {
      return eras[i];
    }
  }
}

function localeErasConvertYear(era, year) {
  var dir = era.since <= era.until ? +1 : -1;

  if (year === undefined) {
    return hooks(era.since).year();
  } else {
    return hooks(era.since).year() + (year - era.offset) * dir;
  }
}

function getEraName() {
  var i,
      l,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until) {
      return eras[i].name;
    }

    if (eras[i].until <= val && val <= eras[i].since) {
      return eras[i].name;
    }
  }

  return '';
}

function getEraNarrow() {
  var i,
      l,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until) {
      return eras[i].narrow;
    }

    if (eras[i].until <= val && val <= eras[i].since) {
      return eras[i].narrow;
    }
  }

  return '';
}

function getEraAbbr() {
  var i,
      l,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until) {
      return eras[i].abbr;
    }

    if (eras[i].until <= val && val <= eras[i].since) {
      return eras[i].abbr;
    }
  }

  return '';
}

function getEraYear() {
  var i,
      l,
      dir,
      val,
      eras = this.localeData().eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    dir = eras[i].since <= eras[i].until ? +1 : -1;
    val = this.clone().startOf('day').valueOf();

    if (eras[i].since <= val && val <= eras[i].until || eras[i].until <= val && val <= eras[i].since) {
      return (this.year() - hooks(eras[i].since).year()) * dir + eras[i].offset;
    }
  }

  return this.year();
}

function erasNameRegex(isStrict) {
  if (!hasOwnProp(this, '_erasNameRegex')) {
    computeErasParse.call(this);
  }

  return isStrict ? this._erasNameRegex : this._erasRegex;
}

function erasAbbrRegex(isStrict) {
  if (!hasOwnProp(this, '_erasAbbrRegex')) {
    computeErasParse.call(this);
  }

  return isStrict ? this._erasAbbrRegex : this._erasRegex;
}

function erasNarrowRegex(isStrict) {
  if (!hasOwnProp(this, '_erasNarrowRegex')) {
    computeErasParse.call(this);
  }

  return isStrict ? this._erasNarrowRegex : this._erasRegex;
}

function matchEraAbbr(isStrict, locale) {
  return locale.erasAbbrRegex(isStrict);
}

function matchEraName(isStrict, locale) {
  return locale.erasNameRegex(isStrict);
}

function matchEraNarrow(isStrict, locale) {
  return locale.erasNarrowRegex(isStrict);
}

function matchEraYearOrdinal(isStrict, locale) {
  return locale._eraYearOrdinalRegex || matchUnsigned;
}

function computeErasParse() {
  var abbrPieces = [],
      namePieces = [],
      narrowPieces = [],
      mixedPieces = [],
      i,
      l,
      eras = this.eras();

  for (i = 0, l = eras.length; i < l; ++i) {
    namePieces.push(regexEscape(eras[i].name));
    abbrPieces.push(regexEscape(eras[i].abbr));
    narrowPieces.push(regexEscape(eras[i].narrow));
    mixedPieces.push(regexEscape(eras[i].name));
    mixedPieces.push(regexEscape(eras[i].abbr));
    mixedPieces.push(regexEscape(eras[i].narrow));
  }

  this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
  this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');
  this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');
  this._erasNarrowRegex = new RegExp('^(' + narrowPieces.join('|') + ')', 'i');
}

addFormatToken(0, ['gg', 2], 0, function () {
  return this.weekYear() % 100;
});
addFormatToken(0, ['GG', 2], 0, function () {
  return this.isoWeekYear() % 100;
});

function addWeekYearFormatToken(token, getter) {
  addFormatToken(0, [token, token.length], 0, getter);
}

addWeekYearFormatToken('gggg', 'weekYear');
addWeekYearFormatToken('ggggg', 'weekYear');
addWeekYearFormatToken('GGGG', 'isoWeekYear');
addWeekYearFormatToken('GGGGG', 'isoWeekYear');
addUnitAlias('weekYear', 'gg');
addUnitAlias('isoWeekYear', 'GG');
addUnitPriority('weekYear', 1);
addUnitPriority('isoWeekYear', 1);
addRegexToken('G', matchSigned);
addRegexToken('g', matchSigned);
addRegexToken('GG', match1to2, match2);
addRegexToken('gg', match1to2, match2);
addRegexToken('GGGG', match1to4, match4);
addRegexToken('gggg', match1to4, match4);
addRegexToken('GGGGG', match1to6, match6);
addRegexToken('ggggg', match1to6, match6);
addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {
  week[token.substr(0, 2)] = toInt(input);
});
addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
  week[token] = hooks.parseTwoDigitYear(input);
});

function getSetWeekYear(input) {
  return getSetWeekYearHelper.call(this, input, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy);
}

function getSetISOWeekYear(input) {
  return getSetWeekYearHelper.call(this, input, this.isoWeek(), this.isoWeekday(), 1, 4);
}

function getISOWeeksInYear() {
  return weeksInYear(this.year(), 1, 4);
}

function getISOWeeksInISOWeekYear() {
  return weeksInYear(this.isoWeekYear(), 1, 4);
}

function getWeeksInYear() {
  var weekInfo = this.localeData()._week;

  return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
}

function getWeeksInWeekYear() {
  var weekInfo = this.localeData()._week;

  return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);
}

function getSetWeekYearHelper(input, week, weekday, dow, doy) {
  var weeksTarget;

  if (input == null) {
    return weekOfYear(this, dow, doy).year;
  } else {
    weeksTarget = weeksInYear(input, dow, doy);

    if (week > weeksTarget) {
      week = weeksTarget;
    }

    return setWeekAll.call(this, input, week, weekday, dow, doy);
  }
}

function setWeekAll(weekYear, week, weekday, dow, doy) {
  var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
      date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);
  this.year(date.getUTCFullYear());
  this.month(date.getUTCMonth());
  this.date(date.getUTCDate());
  return this;
}

addFormatToken('Q', 0, 'Qo', 'quarter');
addUnitAlias('quarter', 'Q');
addUnitPriority('quarter', 7);
addRegexToken('Q', match1);
addParseToken('Q', function (input, array) {
  array[MONTH] = (toInt(input) - 1) * 3;
});

function getSetQuarter(input) {
  return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
}

addFormatToken('D', ['DD', 2], 'Do', 'date');
addUnitAlias('date', 'D');
addUnitPriority('date', 9);
addRegexToken('D', match1to2);
addRegexToken('DD', match1to2, match2);
addRegexToken('Do', function (isStrict, locale) {
  return isStrict ? locale._dayOfMonthOrdinalParse || locale._ordinalParse : locale._dayOfMonthOrdinalParseLenient;
});
addParseToken(['D', 'DD'], DATE);
addParseToken('Do', function (input, array) {
  array[DATE] = toInt(input.match(match1to2)[0]);
});
var getSetDayOfMonth = makeGetSet('Date', true);
addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');
addUnitAlias('dayOfYear', 'DDD');
addUnitPriority('dayOfYear', 4);
addRegexToken('DDD', match1to3);
addRegexToken('DDDD', match3);
addParseToken(['DDD', 'DDDD'], function (input, array, config) {
  config._dayOfYear = toInt(input);
});

function getSetDayOfYear(input) {
  var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
  return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');
}

addFormatToken('m', ['mm', 2], 0, 'minute');
addUnitAlias('minute', 'm');
addUnitPriority('minute', 14);
addRegexToken('m', match1to2);
addRegexToken('mm', match1to2, match2);
addParseToken(['m', 'mm'], MINUTE);
var getSetMinute = makeGetSet('Minutes', false);
addFormatToken('s', ['ss', 2], 0, 'second');
addUnitAlias('second', 's');
addUnitPriority('second', 15);
addRegexToken('s', match1to2);
addRegexToken('ss', match1to2, match2);
addParseToken(['s', 'ss'], SECOND);
var getSetSecond = makeGetSet('Seconds', false);
addFormatToken('S', 0, 0, function () {
  return ~~(this.millisecond() / 100);
});
addFormatToken(0, ['SS', 2], 0, function () {
  return ~~(this.millisecond() / 10);
});
addFormatToken(0, ['SSS', 3], 0, 'millisecond');
addFormatToken(0, ['SSSS', 4], 0, function () {
  return this.millisecond() * 10;
});
addFormatToken(0, ['SSSSS', 5], 0, function () {
  return this.millisecond() * 100;
});
addFormatToken(0, ['SSSSSS', 6], 0, function () {
  return this.millisecond() * 1000;
});
addFormatToken(0, ['SSSSSSS', 7], 0, function () {
  return this.millisecond() * 10000;
});
addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
  return this.millisecond() * 100000;
});
addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
  return this.millisecond() * 1000000;
});
addUnitAlias('millisecond', 'ms');
addUnitPriority('millisecond', 16);
addRegexToken('S', match1to3, match1);
addRegexToken('SS', match1to3, match2);
addRegexToken('SSS', match1to3, match3);
var token, getSetMillisecond;

for (token = 'SSSS'; token.length <= 9; token += 'S') {
  addRegexToken(token, matchUnsigned);
}

function parseMs(input, array) {
  array[MILLISECOND] = toInt(('0.' + input) * 1000);
}

for (token = 'S'; token.length <= 9; token += 'S') {
  addParseToken(token, parseMs);
}

getSetMillisecond = makeGetSet('Milliseconds', false);
addFormatToken('z', 0, 0, 'zoneAbbr');
addFormatToken('zz', 0, 0, 'zoneName');

function getZoneAbbr() {
  return this._isUTC ? 'UTC' : '';
}

function getZoneName() {
  return this._isUTC ? 'Coordinated Universal Time' : '';
}

var proto = Moment.prototype;
proto.add = add;
proto.calendar = calendar$1;
proto.clone = clone;
proto.diff = diff;
proto.endOf = endOf;
proto.format = format;
proto.from = from;
proto.fromNow = fromNow;
proto.to = to;
proto.toNow = toNow;
proto.get = stringGet;
proto.invalidAt = invalidAt;
proto.isAfter = isAfter;
proto.isBefore = isBefore;
proto.isBetween = isBetween;
proto.isSame = isSame;
proto.isSameOrAfter = isSameOrAfter;
proto.isSameOrBefore = isSameOrBefore;
proto.isValid = isValid$2;
proto.lang = lang;
proto.locale = locale;
proto.localeData = localeData;
proto.max = prototypeMax;
proto.min = prototypeMin;
proto.parsingFlags = parsingFlags;
proto.set = stringSet;
proto.startOf = startOf;
proto.subtract = subtract;
proto.toArray = toArray;
proto.toObject = toObject;
proto.toDate = toDate;
proto.toISOString = toISOString;
proto.inspect = inspect;

if (typeof Symbol !== 'undefined' && Symbol.for != null) {
  proto[Symbol.for('nodejs.util.inspect.custom')] = function () {
    return 'Moment<' + this.format() + '>';
  };
}

proto.toJSON = toJSON;
proto.toString = toString;
proto.unix = unix;
proto.valueOf = valueOf;
proto.creationData = creationData;
proto.eraName = getEraName;
proto.eraNarrow = getEraNarrow;
proto.eraAbbr = getEraAbbr;
proto.eraYear = getEraYear;
proto.year = getSetYear;
proto.isLeapYear = getIsLeapYear;
proto.weekYear = getSetWeekYear;
proto.isoWeekYear = getSetISOWeekYear;
proto.quarter = proto.quarters = getSetQuarter;
proto.month = getSetMonth;
proto.daysInMonth = getDaysInMonth;
proto.week = proto.weeks = getSetWeek;
proto.isoWeek = proto.isoWeeks = getSetISOWeek;
proto.weeksInYear = getWeeksInYear;
proto.weeksInWeekYear = getWeeksInWeekYear;
proto.isoWeeksInYear = getISOWeeksInYear;
proto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;
proto.date = getSetDayOfMonth;
proto.day = proto.days = getSetDayOfWeek;
proto.weekday = getSetLocaleDayOfWeek;
proto.isoWeekday = getSetISODayOfWeek;
proto.dayOfYear = getSetDayOfYear;
proto.hour = proto.hours = getSetHour;
proto.minute = proto.minutes = getSetMinute;
proto.second = proto.seconds = getSetSecond;
proto.millisecond = proto.milliseconds = getSetMillisecond;
proto.utcOffset = getSetOffset;
proto.utc = setOffsetToUTC;
proto.local = setOffsetToLocal;
proto.parseZone = setOffsetToParsedOffset;
proto.hasAlignedHourOffset = hasAlignedHourOffset;
proto.isDST = isDaylightSavingTime;
proto.isLocal = isLocal;
proto.isUtcOffset = isUtcOffset;
proto.isUtc = isUtc;
proto.isUTC = isUtc;
proto.zoneAbbr = getZoneAbbr;
proto.zoneName = getZoneName;
proto.dates = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
proto.years = deprecate('years accessor is deprecated. Use year instead', getSetYear);
proto.zone = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);
proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);

function createUnix(input) {
  return createLocal(input * 1000);
}

function createInZone() {
  return createLocal.apply(null, arguments).parseZone();
}

function preParsePostFormat(string) {
  return string;
}

var proto$1 = Locale.prototype;
proto$1.calendar = calendar;
proto$1.longDateFormat = longDateFormat;
proto$1.invalidDate = invalidDate;
proto$1.ordinal = ordinal;
proto$1.preparse = preParsePostFormat;
proto$1.postformat = preParsePostFormat;
proto$1.relativeTime = relativeTime;
proto$1.pastFuture = pastFuture;
proto$1.set = set;
proto$1.eras = localeEras;
proto$1.erasParse = localeErasParse;
proto$1.erasConvertYear = localeErasConvertYear;
proto$1.erasAbbrRegex = erasAbbrRegex;
proto$1.erasNameRegex = erasNameRegex;
proto$1.erasNarrowRegex = erasNarrowRegex;
proto$1.months = localeMonths;
proto$1.monthsShort = localeMonthsShort;
proto$1.monthsParse = localeMonthsParse;
proto$1.monthsRegex = monthsRegex;
proto$1.monthsShortRegex = monthsShortRegex;
proto$1.week = localeWeek;
proto$1.firstDayOfYear = localeFirstDayOfYear;
proto$1.firstDayOfWeek = localeFirstDayOfWeek;
proto$1.weekdays = localeWeekdays;
proto$1.weekdaysMin = localeWeekdaysMin;
proto$1.weekdaysShort = localeWeekdaysShort;
proto$1.weekdaysParse = localeWeekdaysParse;
proto$1.weekdaysRegex = weekdaysRegex;
proto$1.weekdaysShortRegex = weekdaysShortRegex;
proto$1.weekdaysMinRegex = weekdaysMinRegex;
proto$1.isPM = localeIsPM;
proto$1.meridiem = localeMeridiem;

function get$1(format, index, field, setter) {
  var locale = getLocale(),
      utc = createUTC().set(setter, index);
  return locale[field](utc, format);
}

function listMonthsImpl(format, index, field) {
  if (isNumber(format)) {
    index = format;
    format = undefined;
  }

  format = format || '';

  if (index != null) {
    return get$1(format, index, field, 'month');
  }

  var i,
      out = [];

  for (i = 0; i < 12; i++) {
    out[i] = get$1(format, i, field, 'month');
  }

  return out;
}

function listWeekdaysImpl(localeSorted, format, index, field) {
  if (typeof localeSorted === 'boolean') {
    if (isNumber(format)) {
      index = format;
      format = undefined;
    }

    format = format || '';
  } else {
    format = localeSorted;
    index = format;
    localeSorted = false;

    if (isNumber(format)) {
      index = format;
      format = undefined;
    }

    format = format || '';
  }

  var locale = getLocale(),
      shift = localeSorted ? locale._week.dow : 0,
      i,
      out = [];

  if (index != null) {
    return get$1(format, (index + shift) % 7, field, 'day');
  }

  for (i = 0; i < 7; i++) {
    out[i] = get$1(format, (i + shift) % 7, field, 'day');
  }

  return out;
}

function listMonths(format, index) {
  return listMonthsImpl(format, index, 'months');
}

function listMonthsShort(format, index) {
  return listMonthsImpl(format, index, 'monthsShort');
}

function listWeekdays(localeSorted, format, index) {
  return listWeekdaysImpl(localeSorted, format, index, 'weekdays');
}

function listWeekdaysShort(localeSorted, format, index) {
  return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');
}

function listWeekdaysMin(localeSorted, format, index) {
  return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');
}

getSetGlobalLocale('en', {
  eras: [{
    since: '0001-01-01',
    until: +Infinity,
    offset: 1,
    name: 'Anno Domini',
    narrow: 'AD',
    abbr: 'AD'
  }, {
    since: '0000-12-31',
    until: -Infinity,
    offset: 1,
    name: 'Before Christ',
    narrow: 'BC',
    abbr: 'BC'
  }],
  dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
  ordinal: function ordinal(number) {
    var b = number % 10,
        output = toInt(number % 100 / 10) === 1 ? 'th' : b === 1 ? 'st' : b === 2 ? 'nd' : b === 3 ? 'rd' : 'th';
    return number + output;
  }
});
hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);
hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);
var mathAbs = Math.abs;

function abs() {
  var data = this._data;
  this._milliseconds = mathAbs(this._milliseconds);
  this._days = mathAbs(this._days);
  this._months = mathAbs(this._months);
  data.milliseconds = mathAbs(data.milliseconds);
  data.seconds = mathAbs(data.seconds);
  data.minutes = mathAbs(data.minutes);
  data.hours = mathAbs(data.hours);
  data.months = mathAbs(data.months);
  data.years = mathAbs(data.years);
  return this;
}

function addSubtract$1(duration, input, value, direction) {
  var other = createDuration(input, value);
  duration._milliseconds += direction * other._milliseconds;
  duration._days += direction * other._days;
  duration._months += direction * other._months;
  return duration._bubble();
}

function add$1(input, value) {
  return addSubtract$1(this, input, value, 1);
}

function subtract$1(input, value) {
  return addSubtract$1(this, input, value, -1);
}

function absCeil(number) {
  if (number < 0) {
    return Math.floor(number);
  } else {
    return Math.ceil(number);
  }
}

function bubble() {
  var milliseconds = this._milliseconds,
      days = this._days,
      months = this._months,
      data = this._data,
      seconds,
      minutes,
      hours,
      years,
      monthsFromDays;

  if (!(milliseconds >= 0 && days >= 0 && months >= 0 || milliseconds <= 0 && days <= 0 && months <= 0)) {
    milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
    days = 0;
    months = 0;
  }

  data.milliseconds = milliseconds % 1000;
  seconds = absFloor(milliseconds / 1000);
  data.seconds = seconds % 60;
  minutes = absFloor(seconds / 60);
  data.minutes = minutes % 60;
  hours = absFloor(minutes / 60);
  data.hours = hours % 24;
  days += absFloor(hours / 24);
  monthsFromDays = absFloor(daysToMonths(days));
  months += monthsFromDays;
  days -= absCeil(monthsToDays(monthsFromDays));
  years = absFloor(months / 12);
  months %= 12;
  data.days = days;
  data.months = months;
  data.years = years;
  return this;
}

function daysToMonths(days) {
  return days * 4800 / 146097;
}

function monthsToDays(months) {
  return months * 146097 / 4800;
}

function as(units) {
  if (!this.isValid()) {
    return NaN;
  }

  var days,
      months,
      milliseconds = this._milliseconds;
  units = normalizeUnits(units);

  if (units === 'month' || units === 'quarter' || units === 'year') {
    days = this._days + milliseconds / 864e5;
    months = this._months + daysToMonths(days);

    switch (units) {
      case 'month':
        return months;

      case 'quarter':
        return months / 3;

      case 'year':
        return months / 12;
    }
  } else {
    days = this._days + Math.round(monthsToDays(this._months));

    switch (units) {
      case 'week':
        return days / 7 + milliseconds / 6048e5;

      case 'day':
        return days + milliseconds / 864e5;

      case 'hour':
        return days * 24 + milliseconds / 36e5;

      case 'minute':
        return days * 1440 + milliseconds / 6e4;

      case 'second':
        return days * 86400 + milliseconds / 1000;

      case 'millisecond':
        return Math.floor(days * 864e5) + milliseconds;

      default:
        throw new Error('Unknown unit ' + units);
    }
  }
}

function valueOf$1() {
  if (!this.isValid()) {
    return NaN;
  }

  return this._milliseconds + this._days * 864e5 + this._months % 12 * 2592e6 + toInt(this._months / 12) * 31536e6;
}

function makeAs(alias) {
  return function () {
    return this.as(alias);
  };
}

var asMilliseconds = makeAs('ms'),
    asSeconds = makeAs('s'),
    asMinutes = makeAs('m'),
    asHours = makeAs('h'),
    asDays = makeAs('d'),
    asWeeks = makeAs('w'),
    asMonths = makeAs('M'),
    asQuarters = makeAs('Q'),
    asYears = makeAs('y');

function clone$1() {
  return createDuration(this);
}

function get$2(units) {
  units = normalizeUnits(units);
  return this.isValid() ? this[units + 's']() : NaN;
}

function makeGetter(name) {
  return function () {
    return this.isValid() ? this._data[name] : NaN;
  };
}

var milliseconds = makeGetter('milliseconds'),
    seconds = makeGetter('seconds'),
    minutes = makeGetter('minutes'),
    hours = makeGetter('hours'),
    days = makeGetter('days'),
    months = makeGetter('months'),
    years = makeGetter('years');

function weeks() {
  return absFloor(this.days() / 7);
}

var round = Math.round,
    thresholds = {
  ss: 44,
  s: 45,
  m: 45,
  h: 22,
  d: 26,
  w: null,
  M: 11
};

function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
  return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
}

function relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {
  var duration = createDuration(posNegDuration).abs(),
      seconds = round(duration.as('s')),
      minutes = round(duration.as('m')),
      hours = round(duration.as('h')),
      days = round(duration.as('d')),
      months = round(duration.as('M')),
      weeks = round(duration.as('w')),
      years = round(duration.as('y')),
      a = seconds <= thresholds.ss && ['s', seconds] || seconds < thresholds.s && ['ss', seconds] || minutes <= 1 && ['m'] || minutes < thresholds.m && ['mm', minutes] || hours <= 1 && ['h'] || hours < thresholds.h && ['hh', hours] || days <= 1 && ['d'] || days < thresholds.d && ['dd', days];

  if (thresholds.w != null) {
    a = a || weeks <= 1 && ['w'] || weeks < thresholds.w && ['ww', weeks];
  }

  a = a || months <= 1 && ['M'] || months < thresholds.M && ['MM', months] || years <= 1 && ['y'] || ['yy', years];
  a[2] = withoutSuffix;
  a[3] = +posNegDuration > 0;
  a[4] = locale;
  return substituteTimeAgo.apply(null, a);
}

function getSetRelativeTimeRounding(roundingFunction) {
  if (roundingFunction === undefined) {
    return round;
  }

  if (typeof roundingFunction === 'function') {
    round = roundingFunction;
    return true;
  }

  return false;
}

function getSetRelativeTimeThreshold(threshold, limit) {
  if (thresholds[threshold] === undefined) {
    return false;
  }

  if (limit === undefined) {
    return thresholds[threshold];
  }

  thresholds[threshold] = limit;

  if (threshold === 's') {
    thresholds.ss = limit - 1;
  }

  return true;
}

function humanize(argWithSuffix, argThresholds) {
  if (!this.isValid()) {
    return this.localeData().invalidDate();
  }

  var withSuffix = false,
      th = thresholds,
      locale,
      output;

  if (typeof argWithSuffix === 'object') {
    argThresholds = argWithSuffix;
    argWithSuffix = false;
  }

  if (typeof argWithSuffix === 'boolean') {
    withSuffix = argWithSuffix;
  }

  if (typeof argThresholds === 'object') {
    th = Object.assign({}, thresholds, argThresholds);

    if (argThresholds.s != null && argThresholds.ss == null) {
      th.ss = argThresholds.s - 1;
    }
  }

  locale = this.localeData();
  output = relativeTime$1(this, !withSuffix, th, locale);

  if (withSuffix) {
    output = locale.pastFuture(+this, output);
  }

  return locale.postformat(output);
}

var abs$1 = Math.abs;

function sign(x) {
  return (x > 0) - (x < 0) || +x;
}

function toISOString$1() {
  if (!this.isValid()) {
    return this.localeData().invalidDate();
  }

  var seconds = abs$1(this._milliseconds) / 1000,
      days = abs$1(this._days),
      months = abs$1(this._months),
      minutes,
      hours,
      years,
      s,
      total = this.asSeconds(),
      totalSign,
      ymSign,
      daysSign,
      hmsSign;

  if (!total) {
    return 'P0D';
  }

  minutes = absFloor(seconds / 60);
  hours = absFloor(minutes / 60);
  seconds %= 60;
  minutes %= 60;
  years = absFloor(months / 12);
  months %= 12;
  s = seconds ? seconds.toFixed(3).replace(/\.?0+$/, '') : '';
  totalSign = total < 0 ? '-' : '';
  ymSign = sign(this._months) !== sign(total) ? '-' : '';
  daysSign = sign(this._days) !== sign(total) ? '-' : '';
  hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';
  return totalSign + 'P' + (years ? ymSign + years + 'Y' : '') + (months ? ymSign + months + 'M' : '') + (days ? daysSign + days + 'D' : '') + (hours || minutes || seconds ? 'T' : '') + (hours ? hmsSign + hours + 'H' : '') + (minutes ? hmsSign + minutes + 'M' : '') + (seconds ? hmsSign + s + 'S' : '');
}

var proto$2 = Duration.prototype;
proto$2.isValid = isValid$1;
proto$2.abs = abs;
proto$2.add = add$1;
proto$2.subtract = subtract$1;
proto$2.as = as;
proto$2.asMilliseconds = asMilliseconds;
proto$2.asSeconds = asSeconds;
proto$2.asMinutes = asMinutes;
proto$2.asHours = asHours;
proto$2.asDays = asDays;
proto$2.asWeeks = asWeeks;
proto$2.asMonths = asMonths;
proto$2.asQuarters = asQuarters;
proto$2.asYears = asYears;
proto$2.valueOf = valueOf$1;
proto$2._bubble = bubble;
proto$2.clone = clone$1;
proto$2.get = get$2;
proto$2.milliseconds = milliseconds;
proto$2.seconds = seconds;
proto$2.minutes = minutes;
proto$2.hours = hours;
proto$2.days = days;
proto$2.weeks = weeks;
proto$2.months = months;
proto$2.years = years;
proto$2.humanize = humanize;
proto$2.toISOString = toISOString$1;
proto$2.toString = toISOString$1;
proto$2.toJSON = toISOString$1;
proto$2.locale = locale;
proto$2.localeData = localeData;
proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);
proto$2.lang = lang;
addFormatToken('X', 0, 0, 'unix');
addFormatToken('x', 0, 0, 'valueOf');
addRegexToken('x', matchSigned);
addRegexToken('X', matchTimestamp);
addParseToken('X', function (input, array, config) {
  config._d = new Date(parseFloat(input) * 1000);
});
addParseToken('x', function (input, array, config) {
  config._d = new Date(toInt(input));
});
hooks.version = '2.29.1';
setHookCallback(createLocal);
hooks.fn = proto;
hooks.min = min;
hooks.max = max;
hooks.now = now;
hooks.utc = createUTC;
hooks.unix = createUnix;
hooks.months = listMonths;
hooks.isDate = isDate;
hooks.locale = getSetGlobalLocale;
hooks.invalid = createInvalid;
hooks.duration = createDuration;
hooks.isMoment = isMoment;
hooks.weekdays = listWeekdays;
hooks.parseZone = createInZone;
hooks.localeData = getLocale;
hooks.isDuration = isDuration;
hooks.monthsShort = listMonthsShort;
hooks.weekdaysMin = listWeekdaysMin;
hooks.defineLocale = defineLocale;
hooks.updateLocale = updateLocale;
hooks.locales = listLocales;
hooks.weekdaysShort = listWeekdaysShort;
hooks.normalizeUnits = normalizeUnits;
hooks.relativeTimeRounding = getSetRelativeTimeRounding;
hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;
hooks.calendarFormat = getCalendarFormat;
hooks.prototype = proto;
hooks.HTML5_FMT = {
  DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm',
  DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss',
  DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS',
  DATE: 'YYYY-MM-DD',
  TIME: 'HH:mm',
  TIME_SECONDS: 'HH:mm:ss',
  TIME_MS: 'HH:mm:ss.SSS',
  WEEK: 'GGGG-[W]WW',
  MONTH: 'YYYY-MM'
};
/* harmony default export */ __webpack_exports__["default"] = (hooks);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/harmony-module.js */ "./node_modules/webpack/buildin/harmony-module.js")(module)))

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/AbstractSynchronizer.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/AbstractSynchronizer.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}





var AbstractSynchronizer = function () {
  function AbstractSynchronizer(map, scene) {
    this.map = map;
    this.view = map.getView();
    this.scene = scene;
    this.olLayers = map.getLayerGroup().getLayers();
    this.mapLayerGroup = map.getLayerGroup();
    this.layerMap = {};
    this.olLayerListenKeys = {};
    this.olGroupListenKeys_ = {};
  }

  var _proto = AbstractSynchronizer.prototype;

  _proto.synchronize = function synchronize() {
    this.destroyAll();
    this.addLayers_(this.mapLayerGroup);
  };

  _proto.orderLayers = function orderLayers() {};

  _proto.addLayers_ = function addLayers_(root) {
    var _this = this;

    var fifo = [{
      layer: root,
      parents: []
    }];

    var _loop = function _loop() {
      var olLayerWithParents = fifo.splice(0, 1)[0];
      var olLayer = olLayerWithParents.layer;
      var olLayerId = Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(olLayer).toString();
      _this.olLayerListenKeys[olLayerId] = [];
      console.assert(!_this.layerMap[olLayerId]);
      var cesiumObjects = null;

      if (olLayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
        _this.listenForGroupChanges_(olLayer);

        if (olLayer !== _this.mapLayerGroup) {
          cesiumObjects = _this.createSingleLayerCounterparts(olLayerWithParents);
        }

        if (!cesiumObjects) {
          olLayer.getLayers().forEach(function (l) {
            if (l) {
              var newOlLayerWithParents = {
                layer: l,
                parents: olLayer === _this.mapLayerGroup ? [] : [olLayerWithParents.layer].concat(olLayerWithParents.parents)
              };
              fifo.push(newOlLayerWithParents);
            }
          });
        }
      } else {
        cesiumObjects = _this.createSingleLayerCounterparts(olLayerWithParents);

        if (!cesiumObjects) {
          var layerId = olLayerId;
          var layerWithParents = olLayerWithParents;

          var onLayerChange = function onLayerChange(e) {
            var cesiumObjs = _this.createSingleLayerCounterparts(layerWithParents);

            if (cesiumObjs) {
              layerWithParents.layer.un('change', onLayerChange);

              _this.addCesiumObjects_(cesiumObjs, layerId, layerWithParents.layer);

              _this.orderLayers();
            }
          };

          _this.olLayerListenKeys[olLayerId].push(Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["olcsListen"])(layerWithParents.layer, 'change', onLayerChange));
        }
      }

      if (cesiumObjects) {
        _this.addCesiumObjects_(cesiumObjects, olLayerId, olLayer);
      }
    };

    while (fifo.length > 0) {
      _loop();
    }

    this.orderLayers();
  };

  _proto.addCesiumObjects_ = function addCesiumObjects_(cesiumObjects, layerId, layer) {
    var _this2 = this;

    this.layerMap[layerId] = cesiumObjects;
    this.olLayerListenKeys[layerId].push(Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["olcsListen"])(layer, 'change:zIndex', function () {
      return _this2.orderLayers();
    }));
    cesiumObjects.forEach(function (cesiumObject) {
      _this2.addCesiumObject(cesiumObject);
    });
  };

  _proto.removeAndDestroySingleLayer_ = function removeAndDestroySingleLayer_(layer) {
    var _this3 = this;

    var uid = Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(layer).toString();
    var counterparts = this.layerMap[uid];

    if (!!counterparts) {
      counterparts.forEach(function (counterpart) {
        _this3.removeSingleCesiumObject(counterpart, false);

        _this3.destroyCesiumObject(counterpart);
      });
      this.olLayerListenKeys[uid].forEach(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"]);
      delete this.olLayerListenKeys[uid];
    }

    delete this.layerMap[uid];
    return !!counterparts;
  };

  _proto.unlistenSingleGroup_ = function unlistenSingleGroup_(group) {
    if (group === this.mapLayerGroup) {
      return;
    }

    var uid = Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(group).toString();
    var keys = this.olGroupListenKeys_[uid];
    keys.forEach(function (key) {
      Object(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"])(key);
    });
    delete this.olGroupListenKeys_[uid];
    delete this.layerMap[uid];
  };

  _proto.removeLayer_ = function removeLayer_(root) {
    var _this4 = this;

    if (!!root) {
      (function () {
        var fifo = [root];

        while (fifo.length > 0) {
          var olLayer = fifo.splice(0, 1)[0];

          var done = _this4.removeAndDestroySingleLayer_(olLayer);

          if (olLayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
            _this4.unlistenSingleGroup_(olLayer);

            if (!done) {
              olLayer.getLayers().forEach(function (l) {
                fifo.push(l);
              });
            }
          }
        }
      })();
    }
  };

  _proto.listenForGroupChanges_ = function listenForGroupChanges_(group) {
    var uuid = Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(group).toString();
    console.assert(this.olGroupListenKeys_[uuid] === undefined);
    var listenKeyArray = [];
    this.olGroupListenKeys_[uuid] = listenKeyArray;
    var contentKeys = [];

    var listenAddRemove = function () {
      var _this5 = this;

      var collection = group.getLayers();

      if (collection) {
        contentKeys = [collection.on('add', function (event) {
          _this5.addLayers_(event.element);
        }), collection.on('remove', function (event) {
          _this5.removeLayer_(event.element);
        })];
        listenKeyArray.push.apply(listenKeyArray, _toConsumableArray(contentKeys));
      }
    }.bind(this);

    listenAddRemove();
    listenKeyArray.push(group.on('change:layers', function (e) {
      contentKeys.forEach(function (el) {
        var i = listenKeyArray.indexOf(el);

        if (i >= 0) {
          listenKeyArray.splice(i, 1);
        }

        Object(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"])(el);
      });
      listenAddRemove();
    }));
  };

  _proto.destroyAll = function destroyAll() {
    this.removeAllCesiumObjects(true);
    var objKey;

    for (objKey in this.olGroupListenKeys_) {
      var keys = this.olGroupListenKeys_[objKey];
      keys.forEach(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"]);
    }

    for (objKey in this.olLayerListenKeys) {
      this.olLayerListenKeys[objKey].forEach(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"]);
    }

    this.olGroupListenKeys_ = {};
    this.olLayerListenKeys = {};
    this.layerMap = {};
  };

  _proto.addCesiumObject = function addCesiumObject(object) {};

  _proto.destroyCesiumObject = function destroyCesiumObject(object) {};

  _proto.removeSingleCesiumObject = function removeSingleCesiumObject(object, destroy) {};

  _proto.removeAllCesiumObjects = function removeAllCesiumObjects(destroy) {};

  _proto.createSingleLayerCounterparts = function createSingleLayerCounterparts(olLayerWithParents) {};

  return AbstractSynchronizer;
}();

/* harmony default export */ __webpack_exports__["default"] = (AbstractSynchronizer);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/AutoRenderLoop.js":
/*!***********************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/AutoRenderLoop.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _createForOfIteratorHelperLoose(o, allowArrayLike) {
  var it;

  if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;
      return function () {
        if (i >= o.length) return {
          done: true
        };
        return {
          done: false,
          value: o[i++]
        };
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  it = o[Symbol.iterator]();
  return it.next.bind(it);
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

var AutoRenderLoop = function () {
  function AutoRenderLoop(ol3d) {
    this.ol3d = ol3d;
    this.scene_ = ol3d.getCesiumScene();
    this.canvas_ = this.scene_.canvas;
    this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);
    this.repaintEventNames_ = ['mousemove', 'mousedown', 'mouseup', 'touchstart', 'touchend', 'touchmove', 'pointerdown', 'pointerup', 'pointermove', 'wheel'];
    this.enable();
  }

  var _proto = AutoRenderLoop.prototype;

  _proto.enable = function enable() {
    this.scene_.requestRenderMode = true;
    this.scene_.maximumRenderTimeChange = 1000;

    for (var _iterator = _createForOfIteratorHelperLoose(this.repaintEventNames_), _step; !(_step = _iterator()).done;) {
      var repaintKey = _step.value;
      this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);
    }

    window.addEventListener('resize', this._boundNotifyRepaintRequired, false);
    this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);
  };

  _proto.disable = function disable() {
    for (var _iterator2 = _createForOfIteratorHelperLoose(this.repaintEventNames_), _step2; !(_step2 = _iterator2()).done;) {
      var repaintKey = _step2.value;
      this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);
    }

    window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);
    this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);
    this.scene_.requestRenderMode = false;
  };

  _proto.restartRenderLoop = function restartRenderLoop() {
    this.notifyRepaintRequired();
  };

  _proto.notifyRepaintRequired = function notifyRepaintRequired() {
    this.scene_.requestRender();
  };

  return AutoRenderLoop;
}();

/* harmony default export */ __webpack_exports__["default"] = (AutoRenderLoop);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/Camera.js":
/*!***************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/Camera.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");
/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./math.js */ "./node_modules/ol-cesium/src/olcs/math.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core.js */ "./node_modules/ol-cesium/src/olcs/core.js");





var Camera = function () {
  function Camera(scene, map) {
    var _this = this;

    this.scene_ = scene;
    this.cam_ = scene.camera;
    this.map_ = map;
    this.view_ = null;
    this.viewListenKey_ = null;
    this.toLonLat_ = Camera.identityProjection;
    this.fromLonLat_ = Camera.identityProjection;
    this.tilt_ = 0;
    this.distance_ = 0;
    this.lastCameraViewMatrix_ = null;
    this.viewUpdateInProgress_ = false;
    this.map_.on('change:view', function (e) {
      _this.setView_(_this.map_.getView());
    });
    this.setView_(this.map_.getView());
  }

  Camera.identityProjection = function identityProjection(input, opt_output, opt_dimension) {
    var dim = opt_dimension || input.length;

    if (opt_output) {
      for (var i = 0; i < dim; ++i) {
        opt_output[i] = input[i];
      }
    }

    return input;
  };

  var _proto = Camera.prototype;

  _proto.setView_ = function setView_(view) {
    var _this2 = this;

    if (this.view_) {
      Object(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"])(this.viewListenKey_);
      this.viewListenKey_ = null;
    }

    this.view_ = view;

    if (view) {
      var toLonLat = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_2__["getTransform"])(view.getProjection(), 'EPSG:4326');
      var fromLonLat = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_2__["getTransform"])('EPSG:4326', view.getProjection());
      console.assert(toLonLat && fromLonLat);
      this.toLonLat_ = toLonLat;
      this.fromLonLat_ = fromLonLat;
      this.viewListenKey_ = view.on('propertychange', function (e) {
        return _this2.handleViewEvent_(e);
      });
      this.readFromView();
    } else {
      this.toLonLat_ = Camera.identityProjection;
      this.fromLonLat_ = Camera.identityProjection;
    }
  };

  _proto.handleViewEvent_ = function handleViewEvent_(e) {
    if (!this.viewUpdateInProgress_) {
      this.readFromView();
    }
  };

  _proto.setHeading = function setHeading(heading) {
    if (!this.view_) {
      return;
    }

    this.view_.setRotation(heading);
  };

  _proto.getHeading = function getHeading() {
    if (!this.view_) {
      return undefined;
    }

    var rotation = this.view_.getRotation();
    return rotation || 0;
  };

  _proto.setTilt = function setTilt(tilt) {
    this.tilt_ = tilt;
    this.updateCamera_();
  };

  _proto.getTilt = function getTilt() {
    return this.tilt_;
  };

  _proto.setDistance = function setDistance(distance) {
    this.distance_ = distance;
    this.updateCamera_();
    this.updateView();
  };

  _proto.getDistance = function getDistance() {
    return this.distance_;
  };

  _proto.setCenter = function setCenter(center) {
    if (!this.view_) {
      return;
    }

    this.view_.setCenter(center);
  };

  _proto.getCenter = function getCenter() {
    if (!this.view_) {
      return undefined;
    }

    return this.view_.getCenter();
  };

  _proto.setPosition = function setPosition(position) {
    if (!this.toLonLat_) {
      return;
    }

    var ll = this.toLonLat_(position);
    console.assert(ll);
    var carto = new Cesium.Cartographic(Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toRadians"])(ll[0]), Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toRadians"])(ll[1]), this.getAltitude());
    this.cam_.setView({
      destination: Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto)
    });
    this.updateView();
  };

  _proto.getPosition = function getPosition() {
    if (!this.fromLonLat_) {
      return undefined;
    }

    var carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);
    var pos = this.fromLonLat_([Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toDegrees"])(carto.longitude), Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toDegrees"])(carto.latitude)]);
    console.assert(pos);
    return pos;
  };

  _proto.setAltitude = function setAltitude(altitude) {
    var carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);
    carto.height = altitude;
    this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);
    this.updateView();
  };

  _proto.getAltitude = function getAltitude() {
    var carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);
    return carto.height;
  };

  _proto.updateCamera_ = function updateCamera_() {
    if (!this.view_ || !this.toLonLat_) {
      return;
    }

    var center = this.view_.getCenter();

    if (!center) {
      return;
    }

    var ll = this.toLonLat_(center);
    console.assert(ll);
    var carto = new Cesium.Cartographic(Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toRadians"])(ll[0]), Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toRadians"])(ll[1]));

    if (this.scene_.globe) {
      var height = this.scene_.globe.getHeight(carto);
      carto.height = height || 0;
    }

    var destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);
    var orientation = {
      pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,
      heading: -this.view_.getRotation(),
      roll: undefined
    };
    this.cam_.setView({
      destination: destination,
      orientation: orientation
    });
    this.cam_.moveBackward(this.distance_);
    this.checkCameraChange(true);
  };

  _proto.readFromView = function readFromView() {
    if (!this.view_ || !this.toLonLat_) {
      return;
    }

    var center = this.view_.getCenter();

    if (center === undefined || center === null) {
      return;
    }

    var ll = this.toLonLat_(center);
    console.assert(ll);
    var resolution = this.view_.getResolution();
    this.distance_ = this.calcDistanceForResolution(resolution || 0, Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toRadians"])(ll[1]));
    this.updateCamera_();
  };

  _proto.updateView = function updateView() {
    if (!this.view_ || !this.fromLonLat_) {
      return;
    }

    this.viewUpdateInProgress_ = true;
    var ellipsoid = Cesium.Ellipsoid.WGS84;
    var scene = this.scene_;
    var target = _core_js__WEBPACK_IMPORTED_MODULE_3__["default"].pickCenterPoint(scene);
    var bestTarget = target;

    if (!bestTarget) {
      var globe = scene.globe;
      var carto = this.cam_.positionCartographic.clone();
      var height = globe.getHeight(carto);
      carto.height = height || 0;
      bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);
    }

    this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);
    var bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);
    this.view_.setCenter(this.fromLonLat_([Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toDegrees"])(bestTargetCartographic.longitude), Object(_math_js__WEBPACK_IMPORTED_MODULE_1__["toDegrees"])(bestTargetCartographic.latitude)]));
    this.view_.setResolution(this.calcResolutionForDistance(this.distance_, bestTargetCartographic ? bestTargetCartographic.latitude : 0));

    if (target) {
      var pos = this.cam_.position;
      var targetNormal = new Cesium.Cartesian3();
      ellipsoid.geocentricSurfaceNormal(target, targetNormal);
      var targetToCamera = new Cesium.Cartesian3();
      Cesium.Cartesian3.subtract(pos, target, targetToCamera);
      Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);
      var up = this.cam_.up;
      var right = this.cam_.right;
      var normal = new Cesium.Cartesian3(-target.y, target.x, 0);
      var heading = Cesium.Cartesian3.angleBetween(right, normal);
      var cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());
      var orientation = cross.z;
      this.view_.setRotation(orientation < 0 ? heading : -heading);
      var tiltAngle = Math.acos(Cesium.Cartesian3.dot(targetNormal, targetToCamera));
      this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;
    } else {
      this.view_.setRotation(this.cam_.heading);
      this.tilt_ = -this.cam_.pitch + Math.PI / 2;
    }

    this.viewUpdateInProgress_ = false;
  };

  _proto.checkCameraChange = function checkCameraChange(opt_dontSync) {
    var old = this.lastCameraViewMatrix_;
    var current = this.cam_.viewMatrix;

    if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {
      this.lastCameraViewMatrix_ = current.clone();

      if (opt_dontSync !== true) {
        this.updateView();
      }
    }
  };

  _proto.calcDistanceForResolution = function calcDistanceForResolution(resolution, latitude) {
    var canvas = this.scene_.canvas;
    var fovy = this.cam_.frustum.fovy;
    console.assert(!isNaN(fovy));
    var metersPerUnit = this.view_.getProjection().getMetersPerUnit();
    var visibleMapUnits = resolution * canvas.clientHeight;
    var relativeCircumference = Math.cos(Math.abs(latitude));
    var visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;
    var requiredDistance = visibleMeters / 2 / Math.tan(fovy / 2);
    return requiredDistance;
  };

  _proto.calcResolutionForDistance = function calcResolutionForDistance(distance, latitude) {
    var canvas = this.scene_.canvas;
    var fovy = this.cam_.frustum.fovy;
    var metersPerUnit = this.view_.getProjection().getMetersPerUnit();
    var visibleMeters = 2 * distance * Math.tan(fovy / 2);
    var relativeCircumference = Math.cos(Math.abs(latitude));
    var visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;
    var resolution = visibleMapUnits / canvas.clientHeight;
    return resolution;
  };

  return Camera;
}();

/* harmony default export */ __webpack_exports__["default"] = (Camera);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/FeatureConverter.js":
/*!*************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/FeatureConverter.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/geom/Geometry.js */ "./node_modules/ol/geom/Geometry.js");
/* harmony import */ var ol_style_Icon_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/style/Icon.js */ "./node_modules/ol/style/Icon.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_source_Cluster_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/source/Cluster.js */ "./node_modules/ol/source/Cluster.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/SimpleGeometry.js */ "./node_modules/ol/geom/SimpleGeometry.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./core.js */ "./node_modules/ol-cesium/src/olcs/core.js");
/* harmony import */ var _core_VectorLayerCounterpart_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./core/VectorLayerCounterpart.js */ "./node_modules/ol-cesium/src/olcs/core/VectorLayerCounterpart.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) {
  var it;

  if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;
      return function () {
        if (i >= o.length) return {
          done: true
        };
        return {
          done: false,
          value: o[i++]
        };
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  it = o[Symbol.iterator]();
  return it.next.bind(it);
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}












var FeatureConverter = function () {
  function FeatureConverter(scene) {
    this.scene = scene;
    this.boundOnRemoveOrClearFeatureListener_ = this.onRemoveOrClearFeature_.bind(this);
    this.defaultBillboardEyeOffset_ = new Cesium.Cartesian3(0, 0, 10);
  }

  var _proto = FeatureConverter.prototype;

  _proto.onRemoveOrClearFeature_ = function onRemoveOrClearFeature_(evt) {
    var source = evt.target;
    console.assert(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
    var cancellers = _util_js__WEBPACK_IMPORTED_MODULE_9__["default"].obj(source)['olcs_cancellers'];

    if (cancellers) {
      var feature = evt.feature;

      if (feature) {
        var id = Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["getUid"])(feature);
        var canceller = cancellers[id];

        if (canceller) {
          canceller();
          delete cancellers[id];
        }
      } else {
        for (var key in cancellers) {
          if (cancellers.hasOwnProperty(key)) {
            cancellers[key]();
          }
        }

        _util_js__WEBPACK_IMPORTED_MODULE_9__["default"].obj(source)['olcs_cancellers'] = {};
      }
    }
  };

  _proto.setReferenceForPicking = function setReferenceForPicking(layer, feature, primitive) {
    primitive.olLayer = layer;
    primitive.olFeature = feature;
  };

  _proto.createColoredPrimitive = function createColoredPrimitive(layer, feature, olGeometry, geometry, color, opt_lineWidth) {
    var createInstance = function createInstance(geometry, color) {
      var instance = new Cesium.GeometryInstance({
        geometry: geometry
      });

      if (color && !(color instanceof Cesium.ImageMaterialProperty)) {
        instance.attributes = {
          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)
        };
      }

      return instance;
    };

    var options = {
      flat: true,
      renderState: {
        depthTest: {
          enabled: true
        }
      }
    };

    if (opt_lineWidth !== undefined) {
      if (!options.renderState) {
        options.renderState = {};
      }

      options.renderState.lineWidth = opt_lineWidth;
    }

    var instances = createInstance(geometry, color);
    var heightReference = this.getHeightReference(layer, feature, olGeometry);
    var primitive;

    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {
      var ctor = instances.geometry.constructor;

      if (ctor && !ctor['createShadowVolume']) {
        return null;
      }

      primitive = new Cesium.GroundPrimitive({
        geometryInstances: instances
      });
    } else {
      primitive = new Cesium.Primitive({
        geometryInstances: instances
      });
    }

    if (color instanceof Cesium.ImageMaterialProperty) {
      var dataUri = color.image.getValue().toDataURL();
      primitive.appearance = new Cesium.MaterialAppearance({
        flat: true,
        renderState: {
          depthTest: {
            enabled: true
          }
        },
        material: new Cesium.Material({
          fabric: {
            type: 'Image',
            uniforms: {
              image: dataUri
            }
          }
        })
      });
    } else {
      primitive.appearance = new Cesium.PerInstanceColorAppearance(options);
    }

    this.setReferenceForPicking(layer, feature, primitive);
    return primitive;
  };

  _proto.extractColorFromOlStyle = function extractColorFromOlStyle(style, outline) {
    var fillColor = style.getFill() ? style.getFill().getColor() : null;
    var strokeColor = style.getStroke() ? style.getStroke().getColor() : null;
    var olColor = 'black';

    if (strokeColor && outline) {
      olColor = strokeColor;
    } else if (fillColor) {
      olColor = fillColor;
    }

    return _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].convertColorToCesium(olColor);
  };

  _proto.extractLineWidthFromOlStyle = function extractLineWidthFromOlStyle(style) {
    var width = style.getStroke() ? style.getStroke().getWidth() : undefined;
    return width !== undefined ? width : 1;
  };

  _proto.wrapFillAndOutlineGeometries = function wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {
    var fillColor = this.extractColorFromOlStyle(olStyle, false);
    var outlineColor = this.extractColorFromOlStyle(olStyle, true);
    var primitives = new Cesium.PrimitiveCollection();

    if (olStyle.getFill()) {
      var p1 = this.createColoredPrimitive(layer, feature, olGeometry, fillGeometry, fillColor);
      console.assert(!!p1);
      primitives.add(p1);
    }

    if (olStyle.getStroke() && outlineGeometry) {
      var width = this.extractLineWidthFromOlStyle(olStyle);
      var p2 = this.createColoredPrimitive(layer, feature, olGeometry, outlineGeometry, outlineColor, width);

      if (p2) {
        primitives.add(p2);
      }
    }

    return primitives;
  };

  _proto.addTextStyle = function addTextStyle(layer, feature, geometry, style, primitive) {
    var primitives;

    if (!(primitive instanceof Cesium.PrimitiveCollection)) {
      primitives = new Cesium.PrimitiveCollection();
      primitives.add(primitive);
    } else {
      primitives = primitive;
    }

    if (!style.getText()) {
      return primitives;
    }

    var text = style.getText();
    var label = this.olGeometry4326TextPartToCesium(layer, feature, geometry, text);

    if (label) {
      primitives.add(label);
    }

    return primitives;
  };

  _proto.csAddBillboard = function csAddBillboard(billboards, bbOptions, layer, feature, geometry, style) {
    if (!bbOptions.eyeOffset) {
      bbOptions.eyeOffset = this.defaultBillboardEyeOffset_;
    }

    var bb = billboards.add(bbOptions);
    this.setReferenceForPicking(layer, feature, bb);
    return bb;
  };

  _proto.olCircleGeometryToCesium = function olCircleGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {
    var _this = this;

    olGeometry = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].olGeometryCloneTo4326(olGeometry, projection);
    console.assert(olGeometry.getType() == 'Circle');
    var center = olGeometry.getCenter();
    var height = center.length == 3 ? center[2] : 0.0;
    var point = center.slice();
    point[0] += olGeometry.getRadius();
    center = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateToCesiumCartesian(center);
    point = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateToCesiumCartesian(point);
    var radius = Cesium.Cartesian3.distance(center, point);
    var fillGeometry = new Cesium.CircleGeometry({
      center: center,
      radius: radius,
      height: height
    });
    var outlinePrimitive, outlineGeometry;

    if (this.getHeightReference(layer, feature, olGeometry) === Cesium.HeightReference.CLAMP_TO_GROUND) {
      var width = this.extractLineWidthFromOlStyle(olStyle);

      if (width) {
        var circlePolygon = Object(ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_4__["circular"])(olGeometry.getCenter(), radius);
        var positions = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateArrayToCsCartesians(circlePolygon.getLinearRing(0).getCoordinates());

        if (!Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["isGroundPolylinePrimitiveSupported"])(this.scene)) {
          var color = this.extractColorFromOlStyle(olStyle, true);
          outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);
        } else {
          outlinePrimitive = new Cesium.GroundPolylinePrimitive({
            geometryInstances: new Cesium.GeometryInstance({
              geometry: new Cesium.GroundPolylineGeometry({
                positions: positions,
                width: width
              })
            }),
            appearance: new Cesium.PolylineMaterialAppearance({
              material: this.olStyleToCesium(feature, olStyle, true)
            }),
            classificationType: Cesium.ClassificationType.TERRAIN
          });
          outlinePrimitive.readyPromise.then(function () {
            _this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);
          });
        }
      }
    } else {
      outlineGeometry = new Cesium.CircleOutlineGeometry({
        center: center,
        radius: radius,
        extrudedHeight: height,
        height: height
      });
    }

    var primitives = this.wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);

    if (outlinePrimitive) {
      primitives.add(outlinePrimitive);
    }

    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);
  };

  _proto.createStackedGroundCorridors = function createStackedGroundCorridors(layer, feature, width, color, positions) {
    if (!Array.isArray(positions[0])) {
      positions = [positions];
    }

    width = Math.max(3, width);
    var geometryInstances = [];
    var previousDistance = 0;

    for (var _i = 0, _arr = [1000, 4000, 16000, 64000, 254000, 1000000, 10000000]; _i < _arr.length; _i++) {
      var distance = _arr[_i];
      width *= 2.14;
      var geometryOptions = {
        width: width,
        vertexFormat: Cesium.VertexFormat.POSITION_ONLY
      };

      for (var _iterator = _createForOfIteratorHelperLoose(positions), _step; !(_step = _iterator()).done;) {
        var linePositions = _step.value;
        geometryOptions.positions = linePositions;
        geometryInstances.push(new Cesium.GeometryInstance({
          geometry: new Cesium.CorridorGeometry(geometryOptions),
          attributes: {
            color: Cesium.ColorGeometryInstanceAttribute.fromColor(color),
            distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(previousDistance, distance - 1)
          }
        }));
      }

      previousDistance = distance;
    }

    return new Cesium.GroundPrimitive({
      geometryInstances: geometryInstances
    });
  };

  _proto.olLineStringGeometryToCesium = function olLineStringGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {
    var _this2 = this;

    olGeometry = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].olGeometryCloneTo4326(olGeometry, projection);
    console.assert(olGeometry.getType() == 'LineString');
    var positions = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateArrayToCsCartesians(olGeometry.getCoordinates());
    var width = this.extractLineWidthFromOlStyle(olStyle);
    var outlinePrimitive;
    var heightReference = this.getHeightReference(layer, feature, olGeometry);

    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND && !Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["isGroundPolylinePrimitiveSupported"])(this.scene)) {
      var color = this.extractColorFromOlStyle(olStyle, true);
      outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);
    } else {
      var appearance = new Cesium.PolylineMaterialAppearance({
        material: this.olStyleToCesium(feature, olStyle, true)
      });
      var geometryOptions = {
        positions: positions,
        width: width
      };
      var primitiveOptions = {
        appearance: appearance
      };

      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {
        var geometry = new Cesium.GroundPolylineGeometry(geometryOptions);
        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({
          geometry: geometry
        }), outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);
        outlinePrimitive.readyPromise.then(function () {
          _this2.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);
        });
      } else {
        geometryOptions.vertexFormat = appearance.vertexFormat;

        var _geometry = new Cesium.PolylineGeometry(geometryOptions);

        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({
          geometry: _geometry
        }), outlinePrimitive = new Cesium.Primitive(primitiveOptions);
      }
    }

    this.setReferenceForPicking(layer, feature, outlinePrimitive);
    return this.addTextStyle(layer, feature, olGeometry, olStyle, outlinePrimitive);
  };

  _proto.olPolygonGeometryToCesium = function olPolygonGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {
    var _this3 = this;

    olGeometry = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].olGeometryCloneTo4326(olGeometry, projection);
    console.assert(olGeometry.getType() == 'Polygon');
    var heightReference = this.getHeightReference(layer, feature, olGeometry);
    var fillGeometry, outlineGeometry, outlinePrimitive;

    if (olGeometry.getCoordinates()[0].length == 5 && feature.getGeometry().get('olcs.polygon_kind') === 'rectangle') {
      var coordinates = olGeometry.getCoordinates()[0];
      var extent = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_5__["boundingExtent"])(coordinates);
      var rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1], extent[2], extent[3]);
      var maxHeight = 0.0;

      if (coordinates[0].length == 3) {
        for (var c = 0; c < coordinates.length; c++) {
          maxHeight = Math.max(maxHeight, coordinates[c][2]);
        }
      }

      fillGeometry = new Cesium.RectangleGeometry({
        ellipsoid: Cesium.Ellipsoid.WGS84,
        rectangle: rectangle,
        height: maxHeight
      });
      outlineGeometry = new Cesium.RectangleOutlineGeometry({
        ellipsoid: Cesium.Ellipsoid.WGS84,
        rectangle: rectangle,
        height: maxHeight
      });
    } else {
      var rings = olGeometry.getLinearRings();
      var hierarchy = {};
      var polygonHierarchy = hierarchy;
      console.assert(rings.length > 0);

      for (var i = 0; i < rings.length; ++i) {
        var olPos = rings[i].getCoordinates();
        var positions = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateArrayToCsCartesians(olPos);
        console.assert(positions && positions.length > 0);

        if (i == 0) {
          hierarchy.positions = positions;
        } else {
          if (!hierarchy.holes) {
            hierarchy.holes = [];
          }

          hierarchy.holes.push({
            positions: positions
          });
        }
      }

      fillGeometry = new Cesium.PolygonGeometry({
        polygonHierarchy: polygonHierarchy,
        perPositionHeight: true
      });

      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {
        var width = this.extractLineWidthFromOlStyle(olStyle);

        if (width > 0) {
          var _positions = [hierarchy.positions];

          if (hierarchy.holes) {
            for (var _i2 = 0; _i2 < hierarchy.holes.length; ++_i2) {
              _positions.push(hierarchy.holes[_i2].positions);
            }
          }

          if (!Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["isGroundPolylinePrimitiveSupported"])(this.scene)) {
            var color = this.extractColorFromOlStyle(olStyle, true);
            outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, _positions);
          } else {
            var appearance = new Cesium.PolylineMaterialAppearance({
              material: this.olStyleToCesium(feature, olStyle, true)
            });
            var geometryInstances = [];

            for (var _iterator2 = _createForOfIteratorHelperLoose(_positions), _step2; !(_step2 = _iterator2()).done;) {
              var linePositions = _step2.value;
              var polylineGeometry = new Cesium.GroundPolylineGeometry({
                positions: linePositions,
                width: width
              });
              geometryInstances.push(new Cesium.GeometryInstance({
                geometry: polylineGeometry
              }));
            }

            var primitiveOptions = {
              appearance: appearance,
              geometryInstances: geometryInstances
            };
            outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);
            outlinePrimitive.readyPromise.then(function () {
              _this3.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);
            });
          }
        }
      } else {
        outlineGeometry = new Cesium.PolygonOutlineGeometry({
          polygonHierarchy: hierarchy,
          perPositionHeight: true
        });
      }
    }

    var primitives = this.wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);

    if (outlinePrimitive) {
      primitives.add(outlinePrimitive);
    }

    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);
  };

  _proto.getHeightReference = function getHeightReference(layer, feature, geometry) {
    var altitudeMode = geometry.get('altitudeMode');

    if (altitudeMode === undefined) {
      altitudeMode = feature.get('altitudeMode');
    }

    if (altitudeMode === undefined) {
      altitudeMode = layer.get('altitudeMode');
    }

    var heightReference = Cesium.HeightReference.NONE;

    if (altitudeMode === 'clampToGround') {
      heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;
    } else if (altitudeMode === 'relativeToGround') {
      heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;
    }

    return heightReference;
  };

  _proto.createBillboardFromImage = function createBillboardFromImage(layer, feature, olGeometry, projection, style, imageStyle, billboards, opt_newBillboardCallback) {
    if (imageStyle instanceof ol_style_Icon_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
      imageStyle.load();
    }

    var image = imageStyle.getImage(1);

    var isImageLoaded = function isImageLoaded(image) {
      return image.src != '' && image.naturalHeight != 0 && image.naturalWidth != 0 && image.complete;
    };

    var reallyCreateBillboard = function () {
      if (!image) {
        return;
      }

      if (!(image instanceof HTMLCanvasElement || image instanceof Image || image instanceof HTMLImageElement)) {
        return;
      }

      var center = olGeometry.getCoordinates();
      var position = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateToCesiumCartesian(center);
      var color;
      var opacity = imageStyle.getOpacity();

      if (opacity !== undefined) {
        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);
      }

      var scale = imageStyle.getScale();
      var heightReference = this.getHeightReference(layer, feature, olGeometry);
      var bbOptions = {
        image: image,
        color: color,
        scale: scale,
        heightReference: heightReference,
        position: position
      };
      Object.assign(bbOptions, feature.get('cesiumOptions'));

      if (imageStyle instanceof ol_style_Icon_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
        var anchor = imageStyle.getAnchor();

        if (anchor) {
          bbOptions.pixelOffset = new Cesium.Cartesian2((image.width / 2 - anchor[0]) * scale, (image.height / 2 - anchor[1]) * scale);
        }
      }

      var bb = this.csAddBillboard(billboards, bbOptions, layer, feature, olGeometry, style);

      if (opt_newBillboardCallback) {
        opt_newBillboardCallback(bb);
      }
    }.bind(this);

    if (image instanceof Image && !isImageLoaded(image)) {
      var cancelled = false;
      var source = layer.getSource();

      var canceller = function canceller() {
        cancelled = true;
      };

      source.on(['removefeature', 'clear'], this.boundOnRemoveOrClearFeatureListener_);
      var cancellers = _util_js__WEBPACK_IMPORTED_MODULE_9__["default"].obj(source)['olcs_cancellers'];

      if (!cancellers) {
        cancellers = _util_js__WEBPACK_IMPORTED_MODULE_9__["default"].obj(source)['olcs_cancellers'] = {};
      }

      var fuid = Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["getUid"])(feature);

      if (cancellers[fuid]) {
        cancellers[fuid]();
      }

      cancellers[fuid] = canceller;

      var listener = function listener() {
        image.removeEventListener('load', listener);

        if (!billboards.isDestroyed() && !cancelled) {
          reallyCreateBillboard();
        }
      };

      image.addEventListener('load', listener);
    } else {
      reallyCreateBillboard();
    }
  };

  _proto.olPointGeometryToCesium = function olPointGeometryToCesium(layer, feature, olGeometry, projection, style, billboards, opt_newBillboardCallback) {
    console.assert(olGeometry.getType() == 'Point');
    olGeometry = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].olGeometryCloneTo4326(olGeometry, projection);
    var modelPrimitive = null;
    var imageStyle = style.getImage();

    if (imageStyle) {
      var olcsModelFunction = olGeometry.get('olcs_model') || feature.get('olcs_model');

      if (olcsModelFunction) {
        var olcsModel = olcsModelFunction();
        var options = Object.assign({}, {
          scene: this.scene
        }, olcsModel.cesiumOptions);
        var model = Cesium.Model.fromGltf(options);
        modelPrimitive = new Cesium.PrimitiveCollection();
        modelPrimitive.add(model);

        if (olcsModel.debugModelMatrix) {
          modelPrimitive.add(new Cesium.DebugModelMatrixPrimitive({
            modelMatrix: olcsModel.debugModelMatrix
          }));
        }
      } else {
        this.createBillboardFromImage(layer, feature, olGeometry, projection, style, imageStyle, billboards, opt_newBillboardCallback);
      }
    }

    if (style.getText()) {
      return this.addTextStyle(layer, feature, olGeometry, style, modelPrimitive || new Cesium.Primitive());
    } else {
      return modelPrimitive;
    }
  };

  _proto.olMultiGeometryToCesium = function olMultiGeometryToCesium(layer, feature, geometry, projection, olStyle, billboards, opt_newBillboardCallback) {
    var _this4 = this;

    var accumulate = function accumulate(geometries, functor) {
      var primitives = new Cesium.PrimitiveCollection();
      geometries.forEach(function (geometry) {
        primitives.add(functor(layer, feature, geometry, projection, olStyle));
      });
      return primitives;
    };

    var subgeos;

    switch (geometry.getType()) {
      case 'MultiPoint':
        geometry = geometry;
        subgeos = geometry.getPoints();

        if (olStyle.getText()) {
          var primitives = new Cesium.PrimitiveCollection();
          subgeos.forEach(function (geometry) {
            console.assert(geometry);

            var result = _this4.olPointGeometryToCesium(layer, feature, geometry, projection, olStyle, billboards, opt_newBillboardCallback);

            if (result) {
              primitives.add(result);
            }
          });
          return primitives;
        } else {
          subgeos.forEach(function (geometry) {
            console.assert(geometry);

            _this4.olPointGeometryToCesium(layer, feature, geometry, projection, olStyle, billboards, opt_newBillboardCallback);
          });
          return null;
        }

      case 'MultiLineString':
        geometry = geometry;
        subgeos = geometry.getLineStrings();
        return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));

      case 'MultiPolygon':
        geometry = geometry;
        subgeos = geometry.getPolygons();
        return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));

      default:
        console.assert(false, "Unhandled multi geometry type" + geometry.getType());
    }
  };

  _proto.olGeometry4326TextPartToCesium = function olGeometry4326TextPartToCesium(layer, feature, geometry, style) {
    var text = style.getText();

    if (!text) {
      return null;
    }

    var labels = new Cesium.LabelCollection({
      scene: this.scene
    });
    var extentCenter = Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_5__["getCenter"])(geometry.getExtent());

    if (geometry instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      var first = geometry.getFirstCoordinate();
      extentCenter[2] = first.length == 3 ? first[2] : 0.0;
    }

    var options = {};
    options.position = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].ol4326CoordinateToCesiumCartesian(extentCenter);
    options.text = text;
    options.heightReference = this.getHeightReference(layer, feature, geometry);
    var offsetX = style.getOffsetX();
    var offsetY = style.getOffsetY();

    if (offsetX != 0 && offsetY != 0) {
      var offset = new Cesium.Cartesian2(offsetX, offsetY);
      options.pixelOffset = offset;
    }

    options.font = style.getFont() || '10px sans-serif';
    var labelStyle = undefined;

    if (style.getFill()) {
      options.fillColor = this.extractColorFromOlStyle(style, false);
      labelStyle = Cesium.LabelStyle.FILL;
    }

    if (style.getStroke()) {
      options.outlineWidth = this.extractLineWidthFromOlStyle(style);
      options.outlineColor = this.extractColorFromOlStyle(style, true);
      labelStyle = Cesium.LabelStyle.OUTLINE;
    }

    if (style.getFill() && style.getStroke()) {
      labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;
    }

    options.style = labelStyle;
    var horizontalOrigin;

    switch (style.getTextAlign()) {
      case 'left':
        horizontalOrigin = Cesium.HorizontalOrigin.LEFT;
        break;

      case 'right':
        horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;
        break;

      case 'center':
      default:
        horizontalOrigin = Cesium.HorizontalOrigin.CENTER;
    }

    options.horizontalOrigin = horizontalOrigin;

    if (style.getTextBaseline()) {
      var verticalOrigin;

      switch (style.getTextBaseline()) {
        case 'top':
          verticalOrigin = Cesium.VerticalOrigin.TOP;
          break;

        case 'middle':
          verticalOrigin = Cesium.VerticalOrigin.CENTER;
          break;

        case 'bottom':
          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;
          break;

        case 'alphabetic':
          verticalOrigin = Cesium.VerticalOrigin.TOP;
          break;

        case 'hanging':
          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;
          break;

        default:
          console.assert(false, "unhandled baseline " + style.getTextBaseline());
      }

      options.verticalOrigin = verticalOrigin;
    }

    var l = labels.add(options);
    this.setReferenceForPicking(layer, feature, l);
    return labels;
  };

  _proto.olStyleToCesium = function olStyleToCesium(feature, style, outline) {
    var fill = style.getFill();
    var stroke = style.getStroke();

    if (outline && !stroke || !outline && !fill) {
      return null;
    }

    var color = outline ? stroke.getColor() : fill.getColor();
    color = _core_js__WEBPACK_IMPORTED_MODULE_7__["default"].convertColorToCesium(color);

    if (outline && stroke.getLineDash()) {
      return Cesium.Material.fromType('Stripe', {
        horizontal: false,
        repeat: 500,
        evenColor: color,
        oddColor: new Cesium.Color(0, 0, 0, 0)
      });
    } else {
      return Cesium.Material.fromType('Color', {
        color: color
      });
    }
  };

  _proto.computePlainStyle = function computePlainStyle(layer, feature, fallbackStyleFunction, resolution) {
    var featureStyleFunction = feature.getStyleFunction();
    var style = null;

    if (featureStyleFunction) {
      style = featureStyleFunction(feature, resolution);
    }

    if (!style && fallbackStyleFunction) {
      style = fallbackStyleFunction(feature, resolution);
    }

    if (!style) {
      return null;
    }

    return Array.isArray(style) ? style : [style];
  };

  _proto.getGeometryFromFeature = function getGeometryFromFeature(feature, style, opt_geom) {
    if (opt_geom) {
      return opt_geom;
    }

    var geom3d = feature.get('olcs.3d_geometry');

    if (geom3d && geom3d instanceof ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_0__["default"]) {
      return geom3d;
    }

    if (style) {
      var geomFuncRes = style.getGeometryFunction()(feature);

      if (geomFuncRes instanceof ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_0__["default"]) {
        return geomFuncRes;
      }
    }

    return feature.getGeometry();
  };

  _proto.olFeatureToCesium = function olFeatureToCesium(layer, feature, style, context, opt_geom) {
    var _this5 = this;

    var geom = this.getGeometryFromFeature(feature, style, opt_geom);

    if (!geom) {
      return null;
    }

    var proj = context.projection;

    var newBillboardAddedCallback = function newBillboardAddedCallback(bb) {
      var featureBb = context.featureToCesiumMap[Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["getUid"])(feature)];

      if (featureBb instanceof Array) {
        featureBb.push(bb);
      } else {
        context.featureToCesiumMap[Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["getUid"])(feature)] = [bb];
      }
    };

    switch (geom.getType()) {
      case 'GeometryCollection':
        var primitives = new Cesium.PrimitiveCollection();
        var collection = geom;
        collection.getGeometries().forEach(function (geom) {
          if (geom) {
            var prims = _this5.olFeatureToCesium(layer, feature, style, context, geom);

            if (prims) {
              primitives.add(prims);
            }
          }
        });
        return primitives;

      case 'Point':
        geom = geom;
        var bbs = context.billboards;
        var result = this.olPointGeometryToCesium(layer, feature, geom, proj, style, bbs, newBillboardAddedCallback);

        if (!result) {
          return null;
        } else {
          return result;
        }

      case 'Circle':
        geom = geom;
        return this.olCircleGeometryToCesium(layer, feature, geom, proj, style);

      case 'LineString':
        geom = geom;
        return this.olLineStringGeometryToCesium(layer, feature, geom, proj, style);

      case 'Polygon':
        geom = geom;
        return this.olPolygonGeometryToCesium(layer, feature, geom, proj, style);

      case 'MultiPoint':
      case 'MultiLineString':
      case 'MultiPolygon':
        var result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj, style, context.billboards, newBillboardAddedCallback);

        if (!result2) {
          return null;
        } else {
          return result2;
        }

      case 'LinearRing':
        throw new Error('LinearRing should only be part of polygon.');

      default:
        throw new Error("Ol geom type not handled : " + geom.getType());
    }
  };

  _proto.olVectorLayerToCesium = function olVectorLayerToCesium(olLayer, olView, featurePrimitiveMap) {
    var proj = olView.getProjection();
    var resolution = olView.getResolution();

    if (resolution === undefined || !proj) {
      console.assert(false, 'View not ready');
      throw new Error('View not ready');
    }

    var source = olLayer.getSource();

    if (source instanceof ol_source_Cluster_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
      source = source.getSource();
    }

    console.assert(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
    var features = source.getFeatures();
    var counterpart = new _core_VectorLayerCounterpart_js__WEBPACK_IMPORTED_MODULE_8__["default"](proj, this.scene);
    var context = counterpart.context;

    for (var i = 0; i < features.length; ++i) {
      var feature = features[i];

      if (!feature) {
        continue;
      }

      var layerStyle = olLayer.getStyleFunction();
      var styles = this.computePlainStyle(olLayer, feature, layerStyle, resolution);

      if (!styles || !styles.length) {
        continue;
      }

      var primitives = null;

      for (var _i3 = 0; _i3 < styles.length; _i3++) {
        var prims = this.olFeatureToCesium(olLayer, feature, styles[_i3], context);

        if (prims) {
          if (!primitives) {
            primitives = prims;
          } else if (prims) {
            var _i4 = 0,
                prim = void 0;

            while (prim = prims.get(_i4)) {
              primitives.add(prim);
              _i4++;
            }
          }
        }
      }

      if (!primitives) {
        continue;
      }

      featurePrimitiveMap[Object(_util_js__WEBPACK_IMPORTED_MODULE_9__["getUid"])(feature)] = primitives;
      counterpart.getRootPrimitive().add(primitives);
    }

    return counterpart;
  };

  _proto.convert = function convert(layer, view, feature, context) {
    var proj = view.getProjection();
    var resolution = view.getResolution();

    if (resolution == undefined || !proj) {
      return null;
    }

    var layerStyle = layer.getStyleFunction();
    var styles = this.computePlainStyle(layer, feature, layerStyle, resolution);

    if (!styles || !styles.length) {
      return null;
    }

    context.projection = proj;
    var primitives = null;

    for (var i = 0; i < styles.length; i++) {
      var prims = this.olFeatureToCesium(layer, feature, styles[i], context);

      if (!primitives) {
        primitives = prims;
      } else if (prims) {
        var _i5 = 0,
            prim = void 0;

        while (prim = prims.get(_i5)) {
          primitives.add(prim);
          _i5++;
        }
      }
    }

    return primitives;
  };

  return FeatureConverter;
}();

/* harmony default export */ __webpack_exports__["default"] = (FeatureConverter);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/OLCesium.js":
/*!*****************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/OLCesium.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core.js */ "./node_modules/ol-cesium/src/olcs/core.js");
/* harmony import */ var _AutoRenderLoop_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AutoRenderLoop.js */ "./node_modules/ol-cesium/src/olcs/AutoRenderLoop.js");
/* harmony import */ var _Camera_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Camera.js */ "./node_modules/ol-cesium/src/olcs/Camera.js");
/* harmony import */ var _RasterSynchronizer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RasterSynchronizer.js */ "./node_modules/ol-cesium/src/olcs/RasterSynchronizer.js");
/* harmony import */ var _VectorSynchronizer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./VectorSynchronizer.js */ "./node_modules/ol-cesium/src/olcs/VectorSynchronizer.js");
/* harmony import */ var _OverlaySynchronizer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./OverlaySynchronizer.js */ "./node_modules/ol-cesium/src/olcs/OverlaySynchronizer.js");
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}











var OLCesium = function () {
  function OLCesium(options) {
    this.autoRenderLoop_ = null;
    this.map_ = options.map;

    this.time_ = options.time || function () {
      return Cesium.JulianDate.now();
    };

    this.to4326Transform_ = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["getTransform"])(this.map_.getView().getProjection(), 'EPSG:4326');
    this.resolutionScale_ = 1.0;
    this.canvasClientWidth_ = 0.0;
    this.canvasClientHeight_ = 0.0;
    this.resolutionScaleChanged_ = true;
    var fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';
    this.container_ = document.createElement('DIV');
    var containerAttribute = document.createAttribute('style');
    containerAttribute.value = fillArea + "visibility:hidden;";
    this.container_.setAttributeNode(containerAttribute);
    var targetElement = options.target || this.map_.getViewport();

    if (typeof targetElement === 'string') {
      targetElement = document.getElementById(targetElement);
    }

    targetElement.appendChild(this.container_);
    this.isOverMap_ = !targetElement;

    if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {
      var overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];

      for (var i = 0, ii = overlayEvents.length; i < ii; ++i) {
        this.container_.addEventListener(overlayEvents[i], function (evt) {
          return evt.stopPropagation();
        });
      }
    }

    this.canvas_ = document.createElement('CANVAS');
    var canvasAttribute = document.createAttribute('style');
    canvasAttribute.value = fillArea;
    this.canvas_.setAttributeNode(canvasAttribute);

    if (_util_js__WEBPACK_IMPORTED_MODULE_2__["default"].supportsImageRenderingPixelated()) {
      this.canvas_.style['imageRendering'] = _util_js__WEBPACK_IMPORTED_MODULE_2__["default"].imageRenderingValue();
    }

    this.canvas_.oncontextmenu = function () {
      return false;
    };

    this.canvas_.onselectstart = function () {
      return false;
    };

    this.container_.appendChild(this.canvas_);
    this.enabled_ = false;
    this.pausedInteractions_ = [];
    this.hiddenRootGroup_ = null;
    var sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions : {};
    sceneOptions.canvas = this.canvas_;
    sceneOptions.scene3DOnly = true;
    this.scene_ = new Cesium.Scene(sceneOptions);
    var sscc = this.scene_.screenSpaceCameraController;
    sscc.tiltEventTypes.push({
      'eventType': Cesium.CameraEventType.LEFT_DRAG,
      'modifier': Cesium.KeyboardEventModifier.SHIFT
    });
    sscc.tiltEventTypes.push({
      'eventType': Cesium.CameraEventType.LEFT_DRAG,
      'modifier': Cesium.KeyboardEventModifier.ALT
    });
    sscc.enableLook = false;
    this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;
    this.camera_ = new _Camera_js__WEBPACK_IMPORTED_MODULE_5__["default"](this.scene_, this.map_);
    this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);
    this.globe_.baseColor = Cesium.Color.WHITE;
    this.scene_.globe = this.globe_;
    this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();
    var firstImageryProvider = new Cesium.SingleTileImageryProvider({
      url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',
      rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1)
    });
    this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);
    this.dataSourceCollection_ = new Cesium.DataSourceCollection();
    this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({
      scene: this.scene_,
      dataSourceCollection: this.dataSourceCollection_
    });
    var synchronizers = options.createSynchronizers ? options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [new _RasterSynchronizer_js__WEBPACK_IMPORTED_MODULE_6__["default"](this.map_, this.scene_), new _VectorSynchronizer_js__WEBPACK_IMPORTED_MODULE_7__["default"](this.map_, this.scene_), new _OverlaySynchronizer_js__WEBPACK_IMPORTED_MODULE_8__["default"](this.map_, this.scene_)];
    this.handleResize_();

    for (var _i = synchronizers.length - 1; _i >= 0; --_i) {
      synchronizers[_i].synchronize();
    }

    this.lastFrameTime_ = 0;
    this.renderId_ = undefined;
    this.targetFrameRate_ = Number.POSITIVE_INFINITY;
    this.blockCesiumRendering_ = false;
    this.warmingUp_ = false;
    this.trackedFeature_ = null;
    this.trackedEntity_ = null;
    this.entityView_ = null;
    this.needTrackedEntityUpdate_ = false;
    this.boundingSphereScratch_ = new Cesium.BoundingSphere();
    var eventHelper = new Cesium.EventHelper();
    eventHelper.add(this.scene_.postRender, OLCesium.prototype.updateTrackedEntity_, this);
    Cesium.Camera.enableSuspendTerrainAdjustment = false;
  }

  var _proto = OLCesium.prototype;

  _proto.render_ = function render_() {
    if (this.renderId_ !== undefined) {
      cancelAnimationFrame(this.renderId_);
      this.renderId_ = undefined;
    }

    if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {
      this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));
    }
  };

  _proto.onAnimationFrame_ = function onAnimationFrame_(frameTime) {
    this.renderId_ = undefined;
    var interval = 1000.0 / this.targetFrameRate_;
    var delta = frameTime - this.lastFrameTime_;

    if (delta < interval) {
      this.render_();
      return;
    }

    this.lastFrameTime_ = frameTime;
    var julianDate = this.time_();
    this.scene_.initializeFrame();
    this.handleResize_();
    this.dataSourceDisplay_.update(julianDate);

    if (this.entityView_) {
      var trackedEntity = this.trackedEntity_;
      var trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);

      if (trackedState === Cesium.BoundingSphereState.DONE) {
        this.boundingSphereScratch_.radius = 1;
        this.entityView_.update(julianDate, this.boundingSphereScratch_);
      }
    }

    this.scene_.render(julianDate);
    this.camera_.checkCameraChange();
    this.render_();
  };

  _proto.updateTrackedEntity_ = function updateTrackedEntity_() {
    if (!this.needTrackedEntityUpdate_) {
      return;
    }

    var trackedEntity = this.trackedEntity_;
    var scene = this.scene_;
    var state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);

    if (state === Cesium.BoundingSphereState.PENDING) {
      return;
    }

    scene.screenSpaceCameraController.enableTilt = false;
    var bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;

    if (bs) {
      bs.radius = 1;
    }

    this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);
    this.entityView_.update(this.time_(), bs);
    this.needTrackedEntityUpdate_ = false;
  };

  _proto.handleResize_ = function handleResize_() {
    var width = this.canvas_.clientWidth;
    var height = this.canvas_.clientHeight;

    if (width === 0 | height === 0) {
      return;
    }

    if (width === this.canvasClientWidth_ && height === this.canvasClientHeight_ && !this.resolutionScaleChanged_) {
      return;
    }

    var resolutionScale = this.resolutionScale_;

    if (!_util_js__WEBPACK_IMPORTED_MODULE_2__["default"].supportsImageRenderingPixelated()) {
      resolutionScale *= window.devicePixelRatio || 1.0;
    }

    this.resolutionScaleChanged_ = false;
    this.canvasClientWidth_ = width;
    this.canvasClientHeight_ = height;
    width *= resolutionScale;
    height *= resolutionScale;
    this.canvas_.width = width;
    this.canvas_.height = height;
    this.scene_.camera.frustum.aspectRatio = width / height;
  };

  _proto.getCamera = function getCamera() {
    return this.camera_;
  };

  _proto.getOlMap = function getOlMap() {
    return this.map_;
  };

  _proto.getOlView = function getOlView() {
    var view = this.map_.getView();
    console.assert(view);
    return view;
  };

  _proto.getCesiumScene = function getCesiumScene() {
    return this.scene_;
  };

  _proto.getDataSources = function getDataSources() {
    return this.dataSourceCollection_;
  };

  _proto.getDataSourceDisplay = function getDataSourceDisplay() {
    return this.dataSourceDisplay_;
  };

  _proto.getEnabled = function getEnabled() {
    return this.enabled_;
  };

  _proto.setEnabled = function setEnabled(enable) {
    var _this = this;

    if (this.enabled_ === enable) {
      return;
    }

    this.enabled_ = enable;
    this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';
    var interactions;

    if (this.enabled_) {
      this.throwOnUnitializedMap_();

      if (this.isOverMap_) {
        interactions = this.map_.getInteractions();
        interactions.forEach(function (el, i, arr) {
          _this.pausedInteractions_.push(el);
        });
        interactions.clear();

        this.map_.addInteraction = function (interaction) {
          return _this.pausedInteractions_.push(interaction);
        };

        this.map_.removeInteraction = function (interaction) {
          return _this.pausedInteractions_ = _this.pausedInteractions_.filter(function (i) {
            return i !== interaction;
          });
        };

        var rootGroup = this.map_.getLayerGroup();

        if (rootGroup.getVisible()) {
          this.hiddenRootGroup_ = rootGroup;
          this.hiddenRootGroup_.setVisible(false);
        }

        this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');
      }

      this.camera_.readFromView();
      this.render_();
    } else {
      if (this.isOverMap_) {
        interactions = this.map_.getInteractions();
        this.pausedInteractions_.forEach(function (interaction) {
          interactions.push(interaction);
        });
        this.pausedInteractions_.length = 0;

        this.map_.addInteraction = function (interaction) {
          return _this.map_.getInteractions().push(interaction);
        };

        this.map_.removeInteraction = function (interaction) {
          return _this.map_.getInteractions().remove(interaction);
        };

        this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');

        if (this.hiddenRootGroup_) {
          this.hiddenRootGroup_.setVisible(true);
          this.hiddenRootGroup_ = null;
        }
      }

      this.camera_.updateView();
    }
  };

  _proto.warmUp = function warmUp(height, timeout) {
    var _this2 = this;

    if (this.enabled_) {
      return;
    }

    this.throwOnUnitializedMap_();
    this.camera_.readFromView();
    var ellipsoid = this.globe_.ellipsoid;
    var csCamera = this.scene_.camera;
    var position = ellipsoid.cartesianToCartographic(csCamera.position);

    if (position.height < height) {
      position.height = height;
      csCamera.position = ellipsoid.cartographicToCartesian(position);
    }

    this.warmingUp_ = true;
    this.render_();
    setTimeout(function () {
      _this2.warmingUp_ = false;
    }, timeout);
  };

  _proto.setBlockCesiumRendering = function setBlockCesiumRendering(block) {
    if (this.blockCesiumRendering_ !== block) {
      this.blockCesiumRendering_ = block;
      this.render_();
    }
  };

  _proto.enableAutoRenderLoop = function enableAutoRenderLoop() {
    if (!this.autoRenderLoop_) {
      this.autoRenderLoop_ = new _AutoRenderLoop_js__WEBPACK_IMPORTED_MODULE_4__["default"](this);
    }
  };

  _proto.getAutoRenderLoop = function getAutoRenderLoop() {
    return this.autoRenderLoop_;
  };

  _proto.setResolutionScale = function setResolutionScale(value) {
    value = Math.max(0, value);

    if (value !== this.resolutionScale_) {
      this.resolutionScale_ = Math.max(0, value);
      this.resolutionScaleChanged_ = true;

      if (this.autoRenderLoop_) {
        this.autoRenderLoop_.restartRenderLoop();
      }
    }
  };

  _proto.setTargetFrameRate = function setTargetFrameRate(value) {
    if (this.targetFrameRate_ !== value) {
      this.targetFrameRate_ = value;
      this.render_();
    }
  };

  _proto.throwOnUnitializedMap_ = function throwOnUnitializedMap_() {
    var map = this.map_;
    var view = map.getView();
    var center = view.getCenter();

    if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {
      throw new Error("The OpenLayers map is not properly initialized: " + center + " / " + view.getResolution());
    }
  };

  _createClass(OLCesium, [{
    key: "trackedFeature",
    get: function get() {
      return this.trackedFeature_;
    },
    set: function set(feature) {
      if (this.trackedFeature_ !== feature) {
        var scene = this.scene_;

        if (!feature || !feature.getGeometry()) {
          this.needTrackedEntityUpdate_ = false;
          scene.screenSpaceCameraController.enableTilt = true;

          if (this.trackedEntity_) {
            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);
          }

          this.trackedEntity_ = null;
          this.trackedFeature_ = null;
          this.entityView_ = null;
          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);
          return;
        }

        this.trackedFeature_ = feature;
        this.needTrackedEntityUpdate_ = true;
        var to4326Transform = this.to4326Transform_;

        var toCesiumPosition = function toCesiumPosition() {
          var geometry = feature.getGeometry();
          console.assert(geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
          var coo = geometry.getCoordinates();
          var coo4326 = to4326Transform(coo, undefined, coo.length);
          return _core_js__WEBPACK_IMPORTED_MODULE_3__["default"].ol4326CoordinateToCesiumCartesian(coo4326);
        };

        var options = {
          'position': new Cesium.CallbackProperty(function (time, result) {
            return toCesiumPosition();
          }, false),
          'point': {
            'pixelSize': 1,
            'color': Cesium.Color.TRANSPARENT
          }
        };
        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);
      }
    }
  }]);

  return OLCesium;
}();

/* harmony default export */ __webpack_exports__["default"] = (OLCesium);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/OverlaySynchronizer.js":
/*!****************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/OverlaySynchronizer.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _SynchronizedOverlay_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SynchronizedOverlay.js */ "./node_modules/ol-cesium/src/olcs/SynchronizedOverlay.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");



var OverlaySynchronizer = function () {
  function OverlaySynchronizer(map, scene) {
    var _this = this;

    this.map = map;
    this.overlays_ = this.map.getOverlays();
    this.scene = scene;
    this.overlayContainerStopEvent_ = document.createElement('DIV');
    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';
    var overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];
    overlayEvents.forEach(function (event) {
      _this.overlayContainerStopEvent_.addEventListener(event, function (evt) {
        return evt.stopPropagation();
      });
    });
    this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);
    this.overlayContainer_ = document.createElement('DIV');
    this.overlayContainer_.className = 'ol-overlaycontainer';
    this.scene.canvas.parentElement.appendChild(this.overlayContainer_);
    this.overlayMap_ = {};
  }

  var _proto = OverlaySynchronizer.prototype;

  _proto.getOverlayContainerStopEvent = function getOverlayContainerStopEvent() {
    return this.overlayContainerStopEvent_;
  };

  _proto.getOverlayContainer = function getOverlayContainer() {
    return this.overlayContainer_;
  };

  _proto.synchronize = function synchronize() {
    this.destroyAll();
    this.addOverlays();
    this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));
    this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));
  };

  _proto.addOverlayFromEvent_ = function addOverlayFromEvent_(event) {
    var overlay = event.element;
    this.addOverlay(overlay);
  };

  _proto.addOverlays = function addOverlays() {
    var _this2 = this;

    this.overlays_.forEach(function (overlay) {
      _this2.addOverlay(overlay);
    });
  };

  _proto.addOverlay = function addOverlay(overlay) {
    if (!overlay) {
      return;
    }

    var cesiumOverlay = new _SynchronizedOverlay_js__WEBPACK_IMPORTED_MODULE_0__["default"]({
      scene: this.scene,
      synchronizer: this,
      parent: overlay
    });
    var overlayId = Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(overlay).toString();
    this.overlayMap_[overlayId] = cesiumOverlay;
  };

  _proto.removeOverlayFromEvent_ = function removeOverlayFromEvent_(event) {
    var removedOverlay = event.element;
    this.removeOverlay(removedOverlay);
  };

  _proto.removeOverlay = function removeOverlay(overlay) {
    var overlayId = Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(overlay).toString();
    var csOverlay = this.overlayMap_[overlayId];

    if (csOverlay) {
      csOverlay.destroy();
      delete this.overlayMap_[overlayId];
    }
  };

  _proto.destroyAll = function destroyAll() {
    var _this3 = this;

    Object.keys(this.overlayMap_).forEach(function (key) {
      var overlay = _this3.overlayMap_[key];
      overlay.destroy();
      delete _this3.overlayMap_[key];
    });
  };

  return OverlaySynchronizer;
}();

/* harmony default export */ __webpack_exports__["default"] = (OverlaySynchronizer);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/RasterSynchronizer.js":
/*!***************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/RasterSynchronizer.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
/* harmony import */ var _AbstractSynchronizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractSynchronizer.js */ "./node_modules/ol-cesium/src/olcs/AbstractSynchronizer.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core.js */ "./node_modules/ol-cesium/src/olcs/core.js");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}






var RasterSynchronizer = function (_olcsAbstractSynchron) {
  _inheritsLoose(RasterSynchronizer, _olcsAbstractSynchron);

  function RasterSynchronizer(map, scene) {
    var _this;

    _this = _olcsAbstractSynchron.call(this, map, scene) || this;
    _this.cesiumLayers_ = scene.imageryLayers;
    _this.ourLayers_ = new Cesium.ImageryLayerCollection();
    return _this;
  }

  var _proto = RasterSynchronizer.prototype;

  _proto.addCesiumObject = function addCesiumObject(object) {
    this.cesiumLayers_.add(object);
    this.ourLayers_.add(object);
  };

  _proto.destroyCesiumObject = function destroyCesiumObject(object) {
    object.destroy();
  };

  _proto.removeSingleCesiumObject = function removeSingleCesiumObject(object, destroy) {
    this.cesiumLayers_.remove(object, destroy);
    this.ourLayers_.remove(object, false);
  };

  _proto.removeAllCesiumObjects = function removeAllCesiumObjects(destroy) {
    for (var i = 0; i < this.ourLayers_.length; ++i) {
      this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);
    }

    this.ourLayers_.removeAll(false);
  };

  _proto.convertLayerToCesiumImageries = function convertLayerToCesiumImageries(olLayer, viewProj) {
    var result = _core_js__WEBPACK_IMPORTED_MODULE_3__["default"].tileLayerToImageryLayer(this.map, olLayer, viewProj);
    return result ? [result] : null;
  };

  _proto.createSingleLayerCounterparts = function createSingleLayerCounterparts(olLayerWithParents) {
    var _this2 = this;

    var olLayer = olLayerWithParents.layer;
    var uid = Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(olLayer).toString();
    var viewProj = this.view.getProjection();
    console.assert(viewProj);
    var cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);

    if (cesiumObjects) {
      var _this$olLayerListenKe;

      var listenKeyArray = [];
      [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach(function (olLayerItem) {
        listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], function () {
          console.assert(cesiumObjects);

          for (var i = 0; i < cesiumObjects.length; ++i) {
            _core_js__WEBPACK_IMPORTED_MODULE_3__["default"].updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);
          }
        }));
      });

      for (var i = 0; i < cesiumObjects.length; ++i) {
        _core_js__WEBPACK_IMPORTED_MODULE_3__["default"].updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);
      }

      listenKeyArray.push(olLayer.on('change:extent', function (e) {
        for (var _i = 0; _i < cesiumObjects.length; ++_i) {
          _this2.cesiumLayers_.remove(cesiumObjects[_i], true);

          _this2.ourLayers_.remove(cesiumObjects[_i], false);
        }

        delete _this2.layerMap[Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(olLayer)];

        _this2.synchronize();
      }));
      listenKeyArray.push(olLayer.on('change', function (e) {
        for (var _i2 = 0; _i2 < cesiumObjects.length; ++_i2) {
          var position = _this2.cesiumLayers_.indexOf(cesiumObjects[_i2]);

          if (position >= 0) {
            _this2.cesiumLayers_.remove(cesiumObjects[_i2], false);

            _this2.cesiumLayers_.add(cesiumObjects[_i2], position);
          }
        }
      }));

      (_this$olLayerListenKe = this.olLayerListenKeys[uid]).push.apply(_this$olLayerListenKe, listenKeyArray);
    }

    return Array.isArray(cesiumObjects) ? cesiumObjects : null;
  };

  _proto.orderLayers = function orderLayers() {
    var _this3 = this;

    var layers = [];
    var zIndices = {};
    var queue = [this.mapLayerGroup];

    while (queue.length > 0) {
      var olLayer = queue.splice(0, 1)[0];
      layers.push(olLayer);
      zIndices[Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(olLayer)] = olLayer.getZIndex() || 0;

      if (olLayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_0__["default"]) {
        var sublayers = olLayer.getLayers();

        if (sublayers) {
          queue.unshift.apply(queue, _toConsumableArray(sublayers.getArray()));
        }
      }
    }

    Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["stableSort"])(layers, function (layer1, layer2) {
      return zIndices[Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer1)] - zIndices[Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(layer2)];
    });
    layers.forEach(function (olLayer) {
      var olLayerId = Object(_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(olLayer).toString();
      var cesiumObjects = _this3.layerMap[olLayerId];

      if (cesiumObjects) {
        cesiumObjects.forEach(function (cesiumObject) {
          _this3.raiseToTop(cesiumObject);
        });
      }
    });
  };

  _proto.raiseToTop = function raiseToTop(counterpart) {
    this.cesiumLayers_.raiseToTop(counterpart);
  };

  return RasterSynchronizer;
}(_AbstractSynchronizer_js__WEBPACK_IMPORTED_MODULE_2__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (RasterSynchronizer);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/SynchronizedOverlay.js":
/*!****************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/SynchronizedOverlay.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_Overlay_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/Overlay.js */ "./node_modules/ol/Overlay.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) {
  var it;

  if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;
      return function () {
        if (i >= o.length) return {
          done: true
        };
        return {
          done: false,
          value: o[i++]
        };
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  it = o[Symbol.iterator]();
  return it.next.bind(it);
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}






var SynchronizedOverlay = function (_olOverlay) {
  _inheritsLoose(SynchronizedOverlay, _olOverlay);

  function SynchronizedOverlay(options) {
    var _this;

    var parent = options.parent;
    _this = _olOverlay.call(this, parent.getOptions()) || this;
    _this.scenePostRenderListenerRemover_ = null;
    _this.scene_ = options.scene;
    _this.synchronizer_ = options.synchronizer;
    _this.parent_ = parent;
    _this.positionWGS84_ = undefined;
    _this.observer_ = new MutationObserver(_this.handleElementChanged.bind(_assertThisInitialized(_this)));
    _this.attributeObserver_ = [];
    _this.listenerKeys_ = [];

    var setPropertyFromEvent = function setPropertyFromEvent(event) {
      return _this.setPropertyFromEvent_(event);
    };

    _this.listenerKeys_.push(_this.parent_.on('change:position', setPropertyFromEvent));

    _this.listenerKeys_.push(_this.parent_.on('change:element', setPropertyFromEvent));

    _this.listenerKeys_.push(_this.parent_.on('change:offset', setPropertyFromEvent));

    _this.listenerKeys_.push(_this.parent_.on('change:position', setPropertyFromEvent));

    _this.listenerKeys_.push(_this.parent_.on('change:positioning', setPropertyFromEvent));

    _this.setProperties(_this.parent_.getProperties());

    _this.handleMapChanged();

    _this.handleElementChanged();

    return _this;
  }

  var _proto = SynchronizedOverlay.prototype;

  _proto.observeTarget_ = function observeTarget_(target) {
    if (!this.observer_) {
      return;
    }

    this.observer_.disconnect();
    this.observer_.observe(target, {
      attributes: false,
      childList: true,
      characterData: true,
      subtree: true
    });
    this.attributeObserver_.forEach(function (observer) {
      observer.disconnect();
    });
    this.attributeObserver_.length = 0;

    for (var i = 0; i < target.childNodes.length; i++) {
      var node = target.childNodes[i];

      if (node.nodeType === 1) {
        var observer = new MutationObserver(this.handleElementChanged.bind(this));
        observer.observe(node, {
          attributes: true,
          subtree: true
        });
        this.attributeObserver_.push(observer);
      }
    }
  };

  _proto.setPropertyFromEvent_ = function setPropertyFromEvent_(event) {
    if (event.target && event.key) {
      this.set(event.key, event.target.get(event.key));
    }
  };

  _proto.getScene = function getScene() {
    return this.scene_;
  };

  _proto.handleMapChanged = function handleMapChanged() {
    if (this.scenePostRenderListenerRemover_) {
      this.scenePostRenderListenerRemover_();
      Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["removeNode"])(this.element);
    }

    this.scenePostRenderListenerRemover_ = null;
    var scene = this.getScene();

    if (scene) {
      this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));
      this.updatePixelPosition();
      var container = this.stopEvent ? this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();

      if (this.insertFirst) {
        container.insertBefore(this.element, container.childNodes[0] || null);
      } else {
        container.appendChild(this.element);
      }
    }
  };

  _proto.handlePositionChanged = function handlePositionChanged() {
    var position = this.getPosition();

    if (position) {
      var sourceProjection = this.parent_.getMap().getView().getProjection();
      this.positionWGS84_ = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["transform"])(position, sourceProjection, 'EPSG:4326');
    } else {
      this.positionWGS84_ = undefined;
    }

    this.updatePixelPosition();
  };

  _proto.handleElementChanged = function handleElementChanged() {
    function cloneNode(node, parent) {
      var clone = node.cloneNode();

      if (parent) {
        parent.appendChild(clone);
      }

      if (node.nodeType != Node.TEXT_NODE) {
        clone.addEventListener('click', function (event) {
          node.dispatchEvent(new MouseEvent('click', event));
          event.stopPropagation();
        });
      }

      var nodes = node.childNodes;

      for (var i = 0; i < nodes.length; i++) {
        if (!nodes[i]) {
          continue;
        }

        cloneNode(nodes[i], clone);
      }

      return clone;
    }

    Object(_util_js__WEBPACK_IMPORTED_MODULE_2__["removeChildren"])(this.element);
    var element = this.getElement();

    if (element) {
      if (element.parentNode && element.parentNode.childNodes) {
        for (var _iterator = _createForOfIteratorHelperLoose(element.parentNode.childNodes), _step; !(_step = _iterator()).done;) {
          var node = _step.value;
          var clonedNode = cloneNode(node, null);
          this.element.appendChild(clonedNode);
        }
      }
    }

    if (element.parentNode) {
      this.observeTarget_(element.parentNode);
    }
  };

  _proto.updatePixelPosition = function updatePixelPosition() {
    var position = this.positionWGS84_;

    if (!this.scene_ || !position) {
      this.setVisible(false);
      return;
    }

    var height = 0;

    if (position.length === 2) {
      var globeHeight = this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(position[0], position[1]));

      if (globeHeight && this.scene_.globe.tilesLoaded) {
        position[2] = globeHeight;
      }

      if (globeHeight) {
        height = globeHeight;
      }
    } else {
      height = position[2];
    }

    var cartesian = Cesium.Cartesian3.fromDegrees(position[0], position[1], height);
    var camera = this.scene_.camera;
    var ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);
    var occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);

    if (!occluder.isPointVisible(cartesian)) {
      this.setVisible(false);
      return;
    }

    var cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);

    if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {
      this.setVisible(false);
      return;
    }

    this.setVisible(true);
    var pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);
    var pixel = [pixelCartesian.x, pixelCartesian.y];
    var mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];
    this.updateRenderedPosition(pixel, mapSize);
  };

  _proto.destroy = function destroy() {
    if (this.scenePostRenderListenerRemover_) {
      this.scenePostRenderListenerRemover_();
    }

    if (this.observer_) {
      this.observer_.disconnect();
    }

    Object(ol_Observable_js__WEBPACK_IMPORTED_MODULE_3__["unByKey"])(this.listenerKeys_);
    this.listenerKeys_.splice(0);

    if (this.element.removeNode) {
      this.element.removeNode(true);
    } else {
      this.element.remove();
    }

    this.element = null;
  };

  return SynchronizedOverlay;
}(ol_Overlay_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (SynchronizedOverlay);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/VectorSynchronizer.js":
/*!***************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/VectorSynchronizer.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_source_Cluster_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/source/Cluster.js */ "./node_modules/ol/source/Cluster.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_layer_VectorTile_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/layer/VectorTile.js */ "./node_modules/ol/layer/VectorTile.js");
/* harmony import */ var _AbstractSynchronizer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AbstractSynchronizer.js */ "./node_modules/ol-cesium/src/olcs/AbstractSynchronizer.js");
/* harmony import */ var _FeatureConverter_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./FeatureConverter.js */ "./node_modules/ol-cesium/src/olcs/FeatureConverter.js");
function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}











var VectorSynchronizer = function (_olcsAbstractSynchron) {
  _inheritsLoose(VectorSynchronizer, _olcsAbstractSynchron);

  function VectorSynchronizer(map, scene, opt_converter) {
    var _this;

    _this = _olcsAbstractSynchron.call(this, map, scene) || this;
    _this.converter = opt_converter || new _FeatureConverter_js__WEBPACK_IMPORTED_MODULE_8__["default"](scene);
    _this.csAllPrimitives_ = new Cesium.PrimitiveCollection();
    scene.primitives.add(_this.csAllPrimitives_);
    _this.csAllPrimitives_.destroyPrimitives = false;
    return _this;
  }

  var _proto = VectorSynchronizer.prototype;

  _proto.addCesiumObject = function addCesiumObject(counterpart) {
    console.assert(counterpart);
    counterpart.getRootPrimitive()['counterpart'] = counterpart;
    this.csAllPrimitives_.add(counterpart.getRootPrimitive());
  };

  _proto.destroyCesiumObject = function destroyCesiumObject(object) {
    object.getRootPrimitive().destroy();
  };

  _proto.removeSingleCesiumObject = function removeSingleCesiumObject(object, destroy) {
    object.destroy();
    this.csAllPrimitives_.destroyPrimitives = destroy;
    this.csAllPrimitives_.remove(object.getRootPrimitive());
    this.csAllPrimitives_.destroyPrimitives = false;
  };

  _proto.removeAllCesiumObjects = function removeAllCesiumObjects(destroy) {
    this.csAllPrimitives_.destroyPrimitives = destroy;

    if (destroy) {
      for (var i = 0; i < this.csAllPrimitives_.length; ++i) {
        this.csAllPrimitives_.get(i)['counterpart'].destroy();
      }
    }

    this.csAllPrimitives_.removeAll();
    this.csAllPrimitives_.destroyPrimitives = false;
  };

  _proto.updateLayerVisibility = function updateLayerVisibility(olLayerWithParents, csPrimitive) {
    var visible = true;
    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach(function (olLayer) {
      var layerVisible = olLayer.getVisible();

      if (layerVisible !== undefined) {
        visible &= layerVisible;
      } else {
        visible = false;
      }
    });
    csPrimitive.show = visible;
  };

  _proto.createSingleLayerCounterparts = function createSingleLayerCounterparts(olLayerWithParents) {
    var _this2 = this;

    var olLayer = olLayerWithParents.layer;

    if (!(olLayer instanceof ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_5__["default"]) || olLayer instanceof ol_layer_VectorTile_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      return null;
    }

    console.assert(olLayer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
    var source = olLayer.getSource();

    if (source instanceof ol_source_Cluster_js__WEBPACK_IMPORTED_MODULE_2__["default"]) {
      source = source.getSource();
    }

    if (!source) {
      return null;
    }

    console.assert(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
    console.assert(this.view);
    var view = this.view;
    var featurePrimitiveMap = {};
    var counterpart = this.converter.olVectorLayerToCesium(olLayer, view, featurePrimitiveMap);
    var csPrimitives = counterpart.getRootPrimitive();
    var olListenKeys = counterpart.olListenKeys;
    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach(function (olLayerItem) {
      olListenKeys.push(Object(_util_js__WEBPACK_IMPORTED_MODULE_4__["olcsListen"])(olLayerItem, 'change:visible', function () {
        _this2.updateLayerVisibility(olLayerWithParents, csPrimitives);
      }));
    });
    this.updateLayerVisibility(olLayerWithParents, csPrimitives);

    var onAddFeature = function (feature) {
      console.assert(olLayer instanceof ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_5__["default"] || olLayer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
      var context = counterpart.context;
      var prim = this.converter.convert(olLayer, view, feature, context);

      if (prim) {
        featurePrimitiveMap[Object(_util_js__WEBPACK_IMPORTED_MODULE_4__["getUid"])(feature)] = prim;
        csPrimitives.add(prim);
      }
    }.bind(this);

    var onRemoveFeature = function (feature) {
      var id = Object(_util_js__WEBPACK_IMPORTED_MODULE_4__["getUid"])(feature);
      var context = counterpart.context;
      var bbs = context.featureToCesiumMap[id];

      if (bbs) {
        delete context.featureToCesiumMap[id];
        bbs.forEach(function (bb) {
          if (bb instanceof Cesium.Billboard) {
            context.billboards.remove(bb);
          }
        });
      }

      var csPrimitive = featurePrimitiveMap[id];
      delete featurePrimitiveMap[id];

      if (csPrimitive) {
        csPrimitives.remove(csPrimitive);
      }
    }.bind(this);

    olListenKeys.push(Object(_util_js__WEBPACK_IMPORTED_MODULE_4__["olcsListen"])(source, 'addfeature', function (e) {
      console.assert(e.feature);
      onAddFeature(e.feature);
    }, this));
    olListenKeys.push(Object(_util_js__WEBPACK_IMPORTED_MODULE_4__["olcsListen"])(source, 'removefeature', function (e) {
      console.assert(e.feature);
      onRemoveFeature(e.feature);
    }, this));
    olListenKeys.push(Object(_util_js__WEBPACK_IMPORTED_MODULE_4__["olcsListen"])(source, 'changefeature', function (e) {
      var feature = e.feature;
      console.assert(feature);
      onRemoveFeature(feature);
      onAddFeature(feature);
    }, this));
    return counterpart ? [counterpart] : null;
  };

  return VectorSynchronizer;
}(_AbstractSynchronizer_js__WEBPACK_IMPORTED_MODULE_7__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (VectorSynchronizer);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/contrib/LazyLoader.js":
/*!***************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/contrib/LazyLoader.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LazyLoader; });
var LazyLoader = function () {
  function LazyLoader(url) {
    this.promise;
    this.url_ = url;
  }

  var _proto = LazyLoader.prototype;

  _proto.load = function load() {
    var _this = this;

    if (!this.promise) {
      this.promise = new Promise(function (resolve, reject) {
        var script = document.createElement('script');

        script.onload = function () {
          return resolve();
        };

        script.onerror = function () {
          return reject();
        };

        document.head.appendChild(script);
        script.src = _this.url_;
      });
    }

    return this.promise;
  };

  return LazyLoader;
}();



/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/contrib/Manager.js":
/*!************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/contrib/Manager.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _contrib_LazyLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../contrib/LazyLoader.js */ "./node_modules/ol-cesium/src/olcs/contrib/LazyLoader.js");
/* harmony import */ var _OLCesium_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../OLCesium.js */ "./node_modules/ol-cesium/src/olcs/OLCesium.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core.js */ "./node_modules/ol-cesium/src/olcs/core.js");
/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math.js */ "./node_modules/ol-cesium/src/olcs/math.js");
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");
function _construct(Parent, args, Class) {
  if (_isNativeReflectConstruct()) {
    _construct = Reflect.construct;
  } else {
    _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) _setPrototypeOf(instance, Class.prototype);
      return instance;
    };
  }

  return _construct.apply(null, arguments);
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}







var Manager = function (_olObservable) {
  _inheritsLoose(Manager, _olObservable);

  function Manager(cesiumUrl, _temp) {
    var _this;

    var _ref = _temp === void 0 ? {} : _temp,
        map = _ref.map,
        cameraExtentInRadians = _ref.cameraExtentInRadians;

    _this = _olObservable.call(this) || this;
    _this.cesiumUrl_ = cesiumUrl;
    _this.map = map;
    _this.cameraExtentInRadians = cameraExtentInRadians || null;
    _this.boundingSphere_;
    _this.blockLimiter_ = false;
    _this.promise_;
    _this.ol3d;
    _this.cesiumInitialTilt_ = Object(_math_js__WEBPACK_IMPORTED_MODULE_3__["toRadians"])(50);
    _this.fogDensity = 0.0001;
    _this.fogSSEFactor = 25;
    _this.minimumZoomDistance = 2;
    _this.maximumZoomDistance = 10000000;

    _this.limitCameraToBoundingSphereRatio = function (height) {
      return height > 3000 ? 9 : 3;
    };

    return _this;
  }

  var _proto = Manager.prototype;

  _proto.load = function load() {
    var _this2 = this;

    if (!this.promise_) {
      var cesiumLazyLoader = new _contrib_LazyLoader_js__WEBPACK_IMPORTED_MODULE_0__["default"](this.cesiumUrl_);
      this.promise_ = cesiumLazyLoader.load().then(function () {
        return _this2.onCesiumLoaded();
      });
    }

    return this.promise_;
  };

  _proto.onCesiumLoaded = function onCesiumLoaded() {
    if (this.cameraExtentInRadians) {
      var rect = _construct(Cesium.Rectangle, _toConsumableArray(this.cameraExtentInRadians));

      Cesium.Camera.DEFAULT_VIEW_RECTANGLE = rect;
      this.boundingSphere_ = Cesium.BoundingSphere.fromRectangle3D(rect, Cesium.Ellipsoid.WGS84, 300);
    }

    this.ol3d = this.instantiateOLCesium();
    var scene = this.ol3d.getCesiumScene();
    this.configureForUsability(scene);
    this.configureForPerformance(scene);
    this.dispatchEvent('load');
    return this.ol3d;
  };

  _proto.instantiateOLCesium = function instantiateOLCesium() {
    console.assert(this.map);
    var ol3d = new _OLCesium_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      map: this.map
    });
    var scene = ol3d.getCesiumScene();
    var terrainProvider = Cesium.createWorldTerrain();
    scene.terrainProvider = terrainProvider;
    return ol3d;
  };

  _proto.configureForPerformance = function configureForPerformance(scene) {
    var fog = scene.fog;
    fog.enabled = true;
    fog.density = this.fogDensity;
    fog.screenSpaceErrorFactor = this.fogSSEFactor;
  };

  _proto.configureForUsability = function configureForUsability(scene) {
    var sscController = scene.screenSpaceCameraController;
    sscController.minimumZoomDistance = this.minimumZoomDistance;
    sscController.maximumZoomDistance = this.maximumZoomDistance;
    scene.globe.depthTestAgainstTerrain = true;
    scene.globe.baseColor = Cesium.Color.WHITE;
    scene.backgroundColor = Cesium.Color.WHITE;

    if (this.boundingSphere_) {
      scene.postRender.addEventListener(this.limitCameraToBoundingSphere.bind(this), scene);
    }

    this.ol3d.enableAutoRenderLoop();
  };

  _proto.limitCameraToBoundingSphere = function limitCameraToBoundingSphere() {
    var _this3 = this;

    if (this.boundingSphere_ && !this.blockLimiter_) {
      var scene = this.ol3d.getCesiumScene();
      var camera = scene.camera;
      var position = camera.position;
      var carto = Cesium.Cartographic.fromCartesian(position);
      var ratio = this.limitCameraToBoundingSphereRatio(carto.height);

      if (Cesium.Cartesian3.distance(this.boundingSphere_.center, position) > this.boundingSphere_.radius * ratio) {
        var currentlyFlying = camera.flying;

        if (currentlyFlying === true) {
          return;
        } else {
          this.blockLimiter_ = true;

          var unblockLimiter = function unblockLimiter() {
            return _this3.blockLimiter_ = false;
          };

          camera.flyToBoundingSphere(this.boundingSphere_, {
            complete: unblockLimiter,
            cancel: unblockLimiter
          });
        }
      }
    }
  };

  _proto.toggle3d = function toggle3d() {
    var _this4 = this;

    return this.load().then(function (ol3d) {
      var is3DCurrentlyEnabled = ol3d.getEnabled();
      var scene = ol3d.getCesiumScene();

      if (is3DCurrentlyEnabled) {
        console.assert(_this4.map);
        return _core_js__WEBPACK_IMPORTED_MODULE_2__["default"].resetToNorthZenith(_this4.map, scene).then(function () {
          ol3d.setEnabled(false);

          _this4.dispatchEvent('toggle');
        });
      } else {
        ol3d.setEnabled(true);

        _this4.dispatchEvent('toggle');

        return _core_js__WEBPACK_IMPORTED_MODULE_2__["default"].rotateAroundBottomCenter(scene, _this4.cesiumInitialTilt_);
      }
    });
  };

  _proto.set3dWithView = function set3dWithView(lon, lat, elevation, headingDeg, pitchDeg) {
    var _this5 = this;

    return this.load().then(function (ol3d) {
      var is3DCurrentlyEnabled = ol3d.getEnabled();
      var scene = ol3d.getCesiumScene();
      var camera = scene.camera;
      var destination = Cesium.Cartesian3.fromDegrees(lon, lat, elevation);
      var heading = Cesium.Math.toRadians(headingDeg);
      var pitch = Cesium.Math.toRadians(pitchDeg);
      var roll = 0;
      var orientation = {
        heading: heading,
        pitch: pitch,
        roll: roll
      };

      if (!is3DCurrentlyEnabled) {
        ol3d.setEnabled(true);

        _this5.dispatchEvent('toggle');
      }

      camera.setView({
        destination: destination,
        orientation: orientation
      });
    });
  };

  _proto.is3dEnabled = function is3dEnabled() {
    return !!this.ol3d && this.ol3d.getEnabled();
  };

  _proto.getHeading = function getHeading() {
    return this.map ? this.map.getView().getRotation() || 0 : 0;
  };

  _proto.getTiltOnGlobe = function getTiltOnGlobe() {
    var scene = this.ol3d.getCesiumScene();
    var tiltOnGlobe = _core_js__WEBPACK_IMPORTED_MODULE_2__["default"].computeSignedTiltAngleOnGlobe(scene);
    return -tiltOnGlobe;
  };

  _proto.setHeading = function setHeading(angle) {
    var scene = this.ol3d.getCesiumScene();
    var bottom = _core_js__WEBPACK_IMPORTED_MODULE_2__["default"].pickBottomPoint(scene);

    if (bottom) {
      _core_js__WEBPACK_IMPORTED_MODULE_2__["default"].setHeadingUsingBottomCenter(scene, angle, bottom);
    }
  };

  _proto.getOl3d = function getOl3d() {
    return this.ol3d;
  };

  _proto.getOlView = function getOlView() {
    var view = this.map.getView();
    console.assert(view);
    return view;
  };

  _proto.getCesiumViewMatrix = function getCesiumViewMatrix() {
    return this.ol3d.getCesiumScene().camera.viewMatrix;
  };

  _proto.getCesiumScene = function getCesiumScene() {
    return this.ol3d.getCesiumScene();
  };

  _proto.flyToRectangle = function flyToRectangle(rectangle, offset) {
    var _this6 = this;

    if (offset === void 0) {
      offset = 0;
    }

    var camera = this.getCesiumScene().camera;
    var destination = camera.getRectangleCameraCoordinates(rectangle);
    var mag = Cesium.Cartesian3.magnitude(destination) + offset;
    Cesium.Cartesian3.normalize(destination, destination);
    Cesium.Cartesian3.multiplyByScalar(destination, mag, destination);
    return new Promise(function (resolve, reject) {
      if (!_this6.cameraExtentInRadians) {
        reject();
        return;
      }

      camera.flyTo({
        destination: destination,
        complete: function complete() {
          return resolve();
        },
        cancel: function cancel() {
          return reject();
        },
        endTransform: Cesium.Matrix4.IDENTITY
      });
    });
  };

  _proto.getCameraExtentRectangle = function getCameraExtentRectangle() {
    if (this.cameraExtentInRadians) {
      return _construct(Cesium.Rectangle, _toConsumableArray(this.cameraExtentInRadians));
    }
  };

  return Manager;
}(ol_Observable_js__WEBPACK_IMPORTED_MODULE_4__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (Manager);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/core.js":
/*!*************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/core.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_easing_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/easing.js */ "./node_modules/ol/easing.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_source_ImageStatic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/source/ImageStatic.js */ "./node_modules/ol/source/ImageStatic.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileImage_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/source/TileImage.js */ "./node_modules/ol/source/TileImage.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_Image_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/Image.js */ "./node_modules/ol/source/Image.js");
/* harmony import */ var _core_OLImageryProvider_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./core/OLImageryProvider.js */ "./node_modules/ol-cesium/src/olcs/core/OLImageryProvider.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./util.js */ "./node_modules/ol-cesium/src/olcs/util.js");











var exports = {};

exports.computePixelSizeAtCoordinate = function (scene, target) {
  var camera = scene.camera;
  var canvas = scene.canvas;
  var frustum = camera.frustum;
  var distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(camera.position, target, new Cesium.Cartesian3()));
  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight, distance, scene.pixelRatio, new Cesium.Cartesian2());
};

exports.computeBoundingBoxAtTarget = function (scene, target, amount) {
  var pixelSize = exports.computePixelSizeAtCoordinate(scene, target);
  var transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);
  var bottomLeft = Cesium.Matrix4.multiplyByPoint(transform, new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0), new Cesium.Cartesian3());
  var topRight = Cesium.Matrix4.multiplyByPoint(transform, new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0), new Cesium.Cartesian3());
  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray([bottomLeft, topRight]);
};

exports.applyHeightOffsetToGeometry = function (geometry, height) {
  geometry.applyTransform(function (input, output, stride) {
    console.assert(input === output);

    if (stride !== undefined && stride >= 3) {
      for (var i = 0; i < output.length; i += stride) {
        output[i + 2] = output[i + 2] + height;
      }
    }

    return output;
  });
};

exports.createMatrixAtCoordinates = function (coordinates, rotation, translation, scale) {
  if (rotation === void 0) {
    rotation = 0;
  }

  if (translation === void 0) {
    translation = Cesium.Cartesian3.ZERO;
  }

  if (scale === void 0) {
    scale = new Cesium.Cartesian3(1, 1, 1);
  }

  var position = exports.ol4326CoordinateToCesiumCartesian(coordinates);
  var rawMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);
  var quaternion = Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z, -rotation);
  var rotationMatrix = Cesium.Matrix4.fromTranslationQuaternionRotationScale(translation, quaternion, scale);
  return Cesium.Matrix4.multiply(rawMatrix, rotationMatrix, new Cesium.Matrix4());
};

exports.rotateAroundAxis = function (camera, angle, axis, transform, opt_options) {
  var clamp = Cesium.Math.clamp;
  var defaultValue = Cesium.defaultValue;
  var options = opt_options || {};
  var duration = defaultValue(options.duration, 500);
  var easing = defaultValue(options.easing, ol_easing_js__WEBPACK_IMPORTED_MODULE_0__["linear"]);
  var callback = options.callback;
  var lastProgress = 0;
  var oldTransform = new Cesium.Matrix4();
  var start = Date.now();

  var step = function step() {
    var timestamp = Date.now();
    var timeDifference = timestamp - start;
    var progress = easing(clamp(timeDifference / duration, 0, 1));
    console.assert(progress >= lastProgress);
    camera.transform.clone(oldTransform);
    var stepAngle = (progress - lastProgress) * angle;
    lastProgress = progress;
    camera.lookAtTransform(transform);
    camera.rotate(axis, stepAngle);
    camera.lookAtTransform(oldTransform);

    if (progress < 1) {
      window.requestAnimationFrame(step);
    } else {
      if (callback) {
        callback();
      }
    }
  };

  window.requestAnimationFrame(step);
};

exports.setHeadingUsingBottomCenter = function (scene, heading, bottomCenter, opt_options) {
  var camera = scene.camera;
  var angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);
  var axis = camera.right;
  var quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);
  var rotation = Cesium.Matrix3.fromQuaternion(quaternion);
  var vector = new Cesium.Cartesian3();
  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);
  var zenith = new Cesium.Cartesian3();
  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);
  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);
  var transform = Cesium.Matrix4.fromTranslation(zenith);
  var rotateAroundAxis = exports.rotateAroundAxis;
  rotateAroundAxis(camera, heading, zenith, transform, opt_options);
};

exports.pickOnTerrainOrEllipsoid = function (scene, pixel) {
  var ray = scene.camera.getPickRay(pixel);
  var target = scene.globe.pick(ray, scene);
  return target || scene.camera.pickEllipsoid(pixel);
};

exports.pickBottomPoint = function (scene) {
  var canvas = scene.canvas;
  var bottom = new Cesium.Cartesian2(canvas.clientWidth / 2, canvas.clientHeight);
  return exports.pickOnTerrainOrEllipsoid(scene, bottom);
};

exports.pickCenterPoint = function (scene) {
  var canvas = scene.canvas;
  var center = new Cesium.Cartesian2(canvas.clientWidth / 2, canvas.clientHeight / 2);
  return exports.pickOnTerrainOrEllipsoid(scene, center);
};

exports.computeSignedTiltAngleOnGlobe = function (scene) {
  var camera = scene.camera;
  var ray = new Cesium.Ray(camera.position, camera.direction);
  var target = scene.globe.pick(ray, scene);

  if (!target) {
    var ellipsoid = Cesium.Ellipsoid.WGS84;
    var obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);

    if (obj) {
      target = Cesium.Ray.getPoint(ray, obj.start);
    }
  }

  if (!target) {
    return undefined;
  }

  var normal = new Cesium.Cartesian3();
  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);
  var angleBetween = exports.signedAngleBetween;
  var angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;
  return Cesium.Math.convertLongitudeRange(angle);
};

exports.bottomFovRay = function (scene) {
  var camera = scene.camera;
  var fovy2 = camera.frustum.fovy / 2;
  var direction = camera.direction;
  var rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);
  var matrix = Cesium.Matrix3.fromQuaternion(rotation);
  var vector = new Cesium.Cartesian3();
  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);
  return new Cesium.Ray(camera.position, vector);
};

exports.signedAngleBetween = function (first, second, normal) {
  var a = new Cesium.Cartesian3();
  var b = new Cesium.Cartesian3();
  var c = new Cesium.Cartesian3();
  Cesium.Cartesian3.normalize(first, a);
  Cesium.Cartesian3.normalize(second, b);
  Cesium.Cartesian3.cross(a, b, c);
  var cosine = Cesium.Cartesian3.dot(a, b);
  var sine = Cesium.Cartesian3.magnitude(c);
  var sign = Cesium.Cartesian3.dot(normal, c);
  var angle = Math.atan2(sine, cosine);
  return sign >= 0 ? angle : -angle;
};

exports.computeAngleToZenith = function (scene, pivot) {
  var camera = scene.camera;
  var fy = camera.frustum.fovy / 2;
  var ray = exports.bottomFovRay(scene);
  var direction = Cesium.Cartesian3.clone(ray.direction);
  Cesium.Cartesian3.negate(direction, direction);
  var normal = new Cesium.Cartesian3();
  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);
  var left = new Cesium.Cartesian3();
  Cesium.Cartesian3.negate(camera.right, left);
  var a = exports.signedAngleBetween(normal, direction, left);
  return a + fy;
};

exports.extentToRectangle = function (extent, projection) {
  if (extent && projection) {
    var ext = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_3__["transformExtent"])(extent, projection, 'EPSG:4326');
    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);
  } else {
    return null;
  }
};

exports.tileLayerToImageryLayer = function (olMap, olLayer, viewProj) {
  if (!(olLayer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_1__["default"]) && !(olLayer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
    return null;
  }

  var provider = null;
  var source = olLayer.getSource();

  if (source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_5__["default"] && source.getUrl() && source.getImageLoadFunction() === ol_source_Image_js__WEBPACK_IMPORTED_MODULE_8__["defaultImageLoadFunction"]) {
    var sourceProps = {
      'olcs.proxy': source.get('olcs.proxy'),
      'olcs.extent': source.get('olcs.extent'),
      'olcs.projection': source.get('olcs.projection'),
      'olcs.imagesource': source
    };
    source = new ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      url: source.getUrl(),
      attributions: source.getAttributions(),
      projection: source.getProjection(),
      params: source.getParams()
    });
    source.setProperties(sourceProps);
  }

  if (source instanceof ol_source_TileImage_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
    var projection = _util_js__WEBPACK_IMPORTED_MODULE_10__["default"].getSourceProjection(source);

    if (!projection) {
      projection = viewProj;
    }

    if (exports.isCesiumProjection(projection)) {
      provider = new _core_OLImageryProvider_js__WEBPACK_IMPORTED_MODULE_9__["default"](olMap, source, viewProj);
    } else {
      return null;
    }
  } else if (source instanceof ol_source_ImageStatic_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
    var _projection = _util_js__WEBPACK_IMPORTED_MODULE_10__["default"].getSourceProjection(source);

    if (!_projection) {
      _projection = viewProj;
    }

    if (exports.isCesiumProjection(_projection)) {
      provider = new Cesium.SingleTileImageryProvider({
        url: source.getUrl(),
        rectangle: new Cesium.Rectangle.fromDegrees(source.getImageExtent()[0], source.getImageExtent()[1], source.getImageExtent()[2], source.getImageExtent()[3])
      });
    } else {
      return null;
    }
  } else {
    return null;
  }

  var layerOptions = {};
  var forcedExtent = olLayer.get('olcs.extent');
  var ext = forcedExtent || olLayer.getExtent();

  if (ext) {
    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);
  }

  var cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);
  return cesiumLayer;
};

exports.updateCesiumLayerProperties = function (olLayerWithParents, csLayer) {
  var opacity = 1;
  var visible = true;
  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach(function (olLayer) {
    var layerOpacity = olLayer.getOpacity();

    if (layerOpacity !== undefined) {
      opacity *= layerOpacity;
    }

    var layerVisible = olLayer.getVisible();

    if (layerVisible !== undefined) {
      visible &= layerVisible;
    }
  });
  csLayer.alpha = opacity;
  csLayer.show = visible;
};

exports.ol4326CoordinateToCesiumCartesian = function (coordinate) {
  var coo = coordinate;
  return coo.length > 2 ? Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) : Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);
};

exports.ol4326CoordinateArrayToCsCartesians = function (coordinates) {
  console.assert(coordinates !== null);
  var toCartesian = exports.ol4326CoordinateToCesiumCartesian;
  var cartesians = [];

  for (var i = 0; i < coordinates.length; ++i) {
    cartesians.push(toCartesian(coordinates[i]));
  }

  return cartesians;
};

exports.olGeometryCloneTo4326 = function (geometry, projection) {
  console.assert(projection);
  var proj4326 = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_3__["get"])('EPSG:4326');
  var proj = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_3__["get"])(projection);

  if (proj !== proj4326) {
    var properties = geometry.getProperties();
    geometry = geometry.clone();
    geometry.transform(proj, proj4326);
    geometry.setProperties(properties);
  }

  return geometry;
};

exports.convertColorToCesium = function (olColor) {
  olColor = olColor || 'black';

  if (Array.isArray(olColor)) {
    return new Cesium.Color(Cesium.Color.byteToFloat(olColor[0]), Cesium.Color.byteToFloat(olColor[1]), Cesium.Color.byteToFloat(olColor[2]), olColor[3]);
  } else if (typeof olColor == 'string') {
    return Cesium.Color.fromCssColorString(olColor);
  } else if (olColor instanceof CanvasPattern || olColor instanceof CanvasGradient) {
    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');
    canvas.width = canvas.height = 256;
    ctx.fillStyle = olColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    return new Cesium.ImageMaterialProperty({
      image: canvas
    });
  }

  console.assert(false, 'impossible');
};

exports.convertUrlToCesium = function (url) {
  var subdomains = '';
  var re = /\{(\d|[a-z])-(\d|[a-z])\}/;
  var match = re.exec(url);

  if (match) {
    url = url.replace(re, '{s}');
    var startCharCode = match[1].charCodeAt(0);
    var stopCharCode = match[2].charCodeAt(0);
    var charCode;

    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {
      subdomains += String.fromCharCode(charCode);
    }
  }

  return {
    url: url,
    subdomains: subdomains
  };
};

exports.resetToNorthZenith = function (map, scene) {
  return new Promise(function (resolve, reject) {
    var camera = scene.camera;
    var pivot = exports.pickBottomPoint(scene);

    if (!pivot) {
      reject('Could not get bottom pivot');
      return;
    }

    var currentHeading = map.getView().getRotation();

    if (currentHeading === undefined) {
      reject('The view is not initialized');
      return;
    }

    var angle = exports.computeAngleToZenith(scene, pivot);
    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);
    var transform = Cesium.Matrix4.fromTranslation(pivot);
    var axis = camera.right;
    var options = {
      callback: function callback() {
        var view = map.getView();
        exports.normalizeView(view);
        resolve();
      }
    };
    exports.rotateAroundAxis(camera, -angle, axis, transform, options);
  });
};

exports.rotateAroundBottomCenter = function (scene, angle) {
  return new Promise(function (resolve, reject) {
    var camera = scene.camera;
    var pivot = exports.pickBottomPoint(scene);

    if (!pivot) {
      reject('could not get bottom pivot');
      return;
    }

    var options = {
      callback: resolve
    };
    var transform = Cesium.Matrix4.fromTranslation(pivot);
    var axis = camera.right;
    var rotateAroundAxis = exports.rotateAroundAxis;
    rotateAroundAxis(camera, -angle, axis, transform, options);
  });
};

exports.normalizeView = function (view, angle) {
  if (angle === void 0) {
    angle = 0;
  }

  var resolution = view.getResolution();
  view.setRotation(angle);

  if (view.constrainResolution) {
    view.setResolution(view.constrainResolution(resolution));
  } else {
    view.setResolution(view.getConstrainedResolution(resolution));
  }
};

exports.isCesiumProjection = function (projection) {
  var is3857 = projection === Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_3__["get"])('EPSG:3857');
  var is4326 = projection === Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_3__["get"])('EPSG:4326');
  return is3857 || is4326;
};

/* harmony default export */ __webpack_exports__["default"] = (exports);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/core/OLImageryProvider.js":
/*!*******************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/core/OLImageryProvider.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util.js */ "./node_modules/ol-cesium/src/olcs/util.js");
/* harmony import */ var ol_source_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/source.js */ "./node_modules/ol/source.js");




var olUseNewCoordinates = function () {
  var tileSource = new ol_source_js__WEBPACK_IMPORTED_MODULE_2__["Tile"]({
    projection: 'EPSG:3857',
    wrapX: true
  });
  var tileCoord = tileSource.getTileCoordForTileUrlFunction([6, -31, 22]);
  return tileCoord && tileCoord[1] === 33 && tileCoord[2] === 22;
}();

var OLImageryProvider = function () {
  function OLImageryProvider(olMap, source, opt_fallbackProj) {
    var _this = this;

    this.source_ = source;
    this.projection_ = null;
    this.fallbackProj_ = opt_fallbackProj || null;
    this.ready_ = false;
    this.tilingScheme_ = null;
    this.rectangle_ = null;
    this.map_ = olMap;
    this.shouldRequestNextLevel = false;
    var proxy = this.source_.get('olcs.proxy');

    if (proxy) {
      if (typeof proxy === 'function') {
        this.proxy_ = {
          'getURL': proxy
        };
      } else if (typeof proxy === 'string') {
        this.proxy_ = new Cesium.DefaultProxy(proxy);
      }
    }

    this.errorEvent_ = new Cesium.Event();
    this.emptyCanvas_ = document.createElement('canvas');
    this.emptyCanvas_.width = 1;
    this.emptyCanvas_.height = 1;
    this.source_.on('change', function (e) {
      _this.handleSourceChanged_();
    });
    this.handleSourceChanged_();
  }

  var _proto = OLImageryProvider.prototype;

  _proto.handleSourceChanged_ = function handleSourceChanged_(frameState) {
    if (!this.ready_ && this.source_.getState() == 'ready') {
      this.projection_ = _util_js__WEBPACK_IMPORTED_MODULE_1__["default"].getSourceProjection(this.source_) || this.fallbackProj_;
      var options = {
        numberOfLevelZeroTilesX: 1,
        numberOfLevelZeroTilesY: 1
      };

      if (this.source_.tileGrid !== null) {
        this.source_.tileGrid.forEachTileCoord(this.projection_.getExtent(), 0, function (_ref) {
          var zoom = _ref[0],
              xIndex = _ref[1],
              yIndex = _ref[2];
          options.numberOfLevelZeroTilesX = xIndex + 1;
          options.numberOfLevelZeroTilesY = yIndex + 1;
        });
      }

      if (this.projection_ == Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_0__["get"])('EPSG:4326')) {
        this.shouldRequestNextLevel = options.numberOfLevelZeroTilesX === 1 && options.numberOfLevelZeroTilesY === 1;
        this.tilingScheme_ = new Cesium.GeographicTilingScheme(options);
      } else if (this.projection_ == Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_0__["get"])('EPSG:3857')) {
        this.shouldRequestNextLevel = false;
        this.tilingScheme_ = new Cesium.WebMercatorTilingScheme(options);
      } else {
        return;
      }

      this.rectangle_ = this.tilingScheme_.rectangle;
      this.ready_ = true;
    }
  };

  _proto.getTileCredits = function getTileCredits(x, y, level) {
    var extent = this.map_.getView().calculateExtent(this.map_.getSize());
    var center = this.map_.getView().getCenter();
    var zoom = this.shouldRequestNextLevel ? level + 1 : level;
    var frameState = {
      viewState: {
        zoom: zoom,
        center: center
      },
      extent: extent
    };
    var attributionsFunction = this.source_.getAttributions();

    if (!attributionsFunction) {
      return [];
    }

    var attributions = attributionsFunction(frameState);

    if (!Array.isArray(attributions)) {
      attributions = [attributions];
    }

    return attributions.map(function (html) {
      return new Cesium.Credit(html, true);
    });
  };

  _proto.requestImage = function requestImage(x, y, level) {
    var tileUrlFunction = this.source_.getTileUrlFunction();

    if (tileUrlFunction && this.projection_) {
      var z_ = this.shouldRequestNextLevel ? level + 1 : level;
      var y_ = y;

      if (!olUseNewCoordinates) {
        y_ = -y - 1;
      }

      var url = tileUrlFunction.call(this.source_, [z_, x, y_], 1, this.projection_);

      if (this.proxy_) {
        url = this.proxy_.getURL(url);
      }

      return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;
    } else {
      return this.emptyCanvas_;
    }
  };

  return OLImageryProvider;
}();

Object.defineProperties(OLImageryProvider.prototype, {
  'ready': {
    'get': function get() {
      return this.ready_;
    }
  },
  'rectangle': {
    'get': function get() {
      return this.rectangle_;
    }
  },
  'tileWidth': {
    'get': function get() {
      var tg = this.source_.getTileGrid();
      return tg ? Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[0] : tg.getTileSize(0) : 256;
    }
  },
  'tileHeight': {
    'get': function get() {
      var tg = this.source_.getTileGrid();
      return tg ? Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[1] : tg.getTileSize(0) : 256;
    }
  },
  'maximumLevel': {
    'get': function get() {
      var tg = this.source_.getTileGrid();
      return tg ? tg.getMaxZoom() : 18;
    }
  },
  'minimumLevel': {
    'get': function get() {
      return 0;
    }
  },
  'tilingScheme': {
    'get': function get() {
      return this.tilingScheme_;
    }
  },
  'tileDiscardPolicy': {
    'get': function get() {
      return undefined;
    }
  },
  'errorEvent': {
    'get': function get() {
      return this.errorEvent_;
    }
  },
  'proxy': {
    'get': function get() {
      return this.proxy_;
    }
  },
  'hasAlphaChannel': {
    'get': function get() {
      return true;
    }
  },
  'pickFeatures': {
    'get': function get() {
      return undefined;
    }
  }
});
/* harmony default export */ __webpack_exports__["default"] = (OLImageryProvider);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/core/VectorLayerCounterpart.js":
/*!************************************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/core/VectorLayerCounterpart.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");


var VectorLayerCounterpart = function () {
  function VectorLayerCounterpart(layerProjection, scene) {
    var billboards = new Cesium.BillboardCollection({
      scene: scene
    });
    var primitives = new Cesium.PrimitiveCollection();
    this.olListenKeys = [];
    this.rootCollection_ = new Cesium.PrimitiveCollection();
    this.context = {
      projection: layerProjection,
      billboards: billboards,
      featureToCesiumMap: {},
      primitives: primitives
    };
    this.rootCollection_.add(billboards);
    this.rootCollection_.add(primitives);
  }

  var _proto = VectorLayerCounterpart.prototype;

  _proto.destroy = function destroy() {
    this.olListenKeys.forEach(ol_Observable_js__WEBPACK_IMPORTED_MODULE_0__["unByKey"]);
    this.olListenKeys.length = 0;
  };

  _proto.getRootPrimitive = function getRootPrimitive() {
    return this.rootCollection_;
  };

  return VectorLayerCounterpart;
}();

/* harmony default export */ __webpack_exports__["default"] = (VectorLayerCounterpart);

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/math.js":
/*!*************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/math.js ***!
  \*************************************************/
/*! exports provided: toDegrees, toRadians */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toDegrees", function() { return toDegrees; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toRadians", function() { return toRadians; });
function toDegrees(angleInRadians) {
  return angleInRadians * 180 / Math.PI;
}
function toRadians(angleInDegrees) {
  return angleInDegrees * Math.PI / 180;
}

/***/ }),

/***/ "./node_modules/ol-cesium/src/olcs/util.js":
/*!*************************************************!*\
  !*** ./node_modules/ol-cesium/src/olcs/util.js ***!
  \*************************************************/
/*! exports provided: olcsListen, getUid, stableSort, removeNode, removeChildren, isGroundPolylinePrimitiveSupported, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "olcsListen", function() { return olcsListen; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUid", function() { return getUid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stableSort", function() { return stableSort; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeNode", function() { return removeNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeChildren", function() { return removeChildren; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isGroundPolylinePrimitiveSupported", function() { return isGroundPolylinePrimitiveSupported; });
var exports = {};

exports.obj = function (param) {
  return param;
};

exports.supportsImageRenderingPixelatedResult_ = undefined;
exports.imageRenderingValueResult_ = undefined;

exports.supportsImageRenderingPixelated = function () {
  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {
    var canvas = document.createElement('canvas');
    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');
    var tmp = canvas.style['imageRendering'];
    exports.supportsImageRenderingPixelatedResult_ = !!tmp;

    if (exports.supportsImageRenderingPixelatedResult_) {
      exports.imageRenderingValueResult_ = tmp;
    }
  }

  return exports.supportsImageRenderingPixelatedResult_;
};

exports.imageRenderingValue = function () {
  exports.supportsImageRenderingPixelated();
  return exports.imageRenderingValueResult_ || '';
};

exports.getSourceProjection = function (source) {
  return source.get('olcs.projection') || source.getProjection();
};

function olcsListen(observable, type, listener) {
  return observable.on(type, listener);
}
var uidCounter_ = 0;
function getUid(obj) {
  return obj.olcs_uid || (obj.olcs_uid = ++uidCounter_);
}
function stableSort(arr, compareFnc) {
  var length = arr.length;
  var tmp = Array(arr.length);

  for (var i = 0; i < length; i++) {
    tmp[i] = {
      index: i,
      value: arr[i]
    };
  }

  tmp.sort(function (a, b) {
    return compareFnc(a.value, b.value) || a.index - b.index;
  });

  for (var _i = 0; _i < arr.length; _i++) {
    arr[_i] = tmp[_i].value;
  }
}
function removeNode(node) {
  return node && node.parentNode ? node.parentNode.removeChild(node) : null;
}
function removeChildren(node) {
  while (node.lastChild) {
    node.removeChild(node.lastChild);
  }
}
function isGroundPolylinePrimitiveSupported(scene) {
  var obj = Cesium.GroundPolylinePrimitive;
  return obj && obj.isSupported(scene);
}
/* harmony default export */ __webpack_exports__["default"] = (exports);

/***/ }),

/***/ "./node_modules/ol/Collection.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/Collection.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: CollectionEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(66);

/***/ }),

/***/ "./node_modules/ol/Feature.js":
/*!************************************************************************!*\
  !*** delegated ./node_modules/ol/Feature.js from dll-reference vendor ***!
  \************************************************************************/
/*! exports provided: createStyleFunction, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(69);

/***/ }),

/***/ "./node_modules/ol/Map.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/Map.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(490);

/***/ }),

/***/ "./node_modules/ol/MapBrowserEvent.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/MapBrowserEvent.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(149);

/***/ }),

/***/ "./node_modules/ol/Object.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/Object.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: ObjectEvent, getChangeEventType, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(31);

/***/ }),

/***/ "./node_modules/ol/Observable.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/Observable.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: unByKey, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(194);

/***/ }),

/***/ "./node_modules/ol/Overlay.js":
/*!************************************************************************!*\
  !*** delegated ./node_modules/ol/Overlay.js from dll-reference vendor ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(590);

/***/ }),

/***/ "./node_modules/ol/OverlayPositioning.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/ol/OverlayPositioning.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(113);

/***/ }),

/***/ "./node_modules/ol/View.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/View.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: createCenterConstraint, createResolutionConstraint, createRotationConstraint, isNoopAnimation, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(272);

/***/ }),

/***/ "./node_modules/ol/array.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/array.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: binarySearch, numberSafeCompareFunction, includes, linearFindNearest, reverseSubArray, extend, remove, find, equals, stableSort, findIndex, isSorted */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(16);

/***/ }),

/***/ "./node_modules/ol/color.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/color.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: asString, fromString, asArray, normalize, toString, isStringColor */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(116);

/***/ }),

/***/ "./node_modules/ol/control/Control.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/control/Control.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(82);

/***/ }),

/***/ "./node_modules/ol/coordinate.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/coordinate.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: add, closestOnCircle, closestOnSegment, createStringXY, degreesToStringHDMS, format, equals, rotate, scale, squaredDistance, distance, squaredDistanceToSegment, toStringHDMS, toStringXY, wrapX, getWorldsAway */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(28);

/***/ }),

/***/ "./node_modules/ol/dom.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/dom.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: createCanvasContext2D, outerWidth, outerHeight, replaceNode, removeNode, removeChildren, replaceChildren */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(29);

/***/ }),

/***/ "./node_modules/ol/easing.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/easing.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: easeIn, easeOut, inAndOut, linear, upAndDown */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(88);

/***/ }),

/***/ "./node_modules/ol/events.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/events.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: listen, listenOnce, unlistenByKey */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(15);

/***/ }),

/***/ "./node_modules/ol/events/Event.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/events/Event.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: stopPropagation, preventDefault, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(48);

/***/ }),

/***/ "./node_modules/ol/events/condition.js":
/*!*********************************************************************************!*\
  !*** delegated ./node_modules/ol/events/condition.js from dll-reference vendor ***!
  \*********************************************************************************/
/*! exports provided: all, altKeyOnly, altShiftKeysOnly, focus, focusWithTabindex, always, click, mouseActionButton, never, pointerMove, singleClick, doubleClick, noModifierKeys, platformModifierKeyOnly, shiftKeyOnly, targetNotEditable, mouseOnly, touchOnly, penOnly, primaryAction */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(39);

/***/ }),

/***/ "./node_modules/ol/extent.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/extent.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: boundingExtent, buffer, clone, closestSquaredDistanceXY, containsCoordinate, containsExtent, containsXY, coordinateRelationship, createEmpty, createOrUpdate, createOrUpdateEmpty, createOrUpdateFromCoordinate, createOrUpdateFromCoordinates, createOrUpdateFromFlatCoordinates, createOrUpdateFromRings, equals, approximatelyEquals, extend, extendCoordinate, extendCoordinates, extendFlatCoordinates, extendRings, extendXY, forEachCorner, getArea, getBottomLeft, getBottomRight, getCenter, getCorner, getEnlargedArea, getForViewAndSize, getHeight, getIntersectionArea, getIntersection, getMargin, getSize, getTopLeft, getTopRight, getWidth, intersects, isEmpty, returnOrUpdate, scaleFromCenter, intersectsSegment, applyTransform, wrapX */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(2);

/***/ }),

/***/ "./node_modules/ol/format/GML2.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GML2.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(174);

/***/ }),

/***/ "./node_modules/ol/format/GML3.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GML3.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(43);

/***/ }),

/***/ "./node_modules/ol/format/GPX.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GPX.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1065);

/***/ }),

/***/ "./node_modules/ol/format/GeoJSON.js":
/*!*******************************************************************************!*\
  !*** delegated ./node_modules/ol/format/GeoJSON.js from dll-reference vendor ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(593);

/***/ }),

/***/ "./node_modules/ol/format/KML.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/KML.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: getDefaultFillStyle, getDefaultImageStyle, getDefaultStrokeStyle, getDefaultTextStyle, getDefaultStyle, getDefaultStyleArray, readFlatCoordinates, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1066);

/***/ }),

/***/ "./node_modules/ol/format/WFS.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WFS.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: writeFilter, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1068);

/***/ }),

/***/ "./node_modules/ol/format/WMSCapabilities.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WMSCapabilities.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1069);

/***/ }),

/***/ "./node_modules/ol/format/WMSGetFeatureInfo.js":
/*!*****************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WMSGetFeatureInfo.js from dll-reference vendor ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1070);

/***/ }),

/***/ "./node_modules/ol/format/WMTSCapabilities.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/WMTSCapabilities.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1071);

/***/ }),

/***/ "./node_modules/ol/format/XML.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/format/XML.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(273);

/***/ }),

/***/ "./node_modules/ol/format/filter.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/format/filter.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: and, or, not, bbox, contains, intersects, disjoint, within, dwithin, equalTo, notEqualTo, lessThan, lessThanOrEqualTo, greaterThan, greaterThanOrEqualTo, isNull, between, like, during, resourceId */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(500);

/***/ }),

/***/ "./node_modules/ol/format/filter/Comparison.js":
/*!*****************************************************************************************!*\
  !*** delegated ./node_modules/ol/format/filter/Comparison.js from dll-reference vendor ***!
  \*****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(171);

/***/ }),

/***/ "./node_modules/ol/functions.js":
/*!**************************************************************************!*\
  !*** delegated ./node_modules/ol/functions.js from dll-reference vendor ***!
  \**************************************************************************/
/*! exports provided: TRUE, FALSE, VOID, memoizeOne */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(38);

/***/ }),

/***/ "./node_modules/ol/geom/Circle.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Circle.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(493);

/***/ }),

/***/ "./node_modules/ol/geom/Geometry.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Geometry.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(377);

/***/ }),

/***/ "./node_modules/ol/geom/GeometryCollection.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/GeometryCollection.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(200);

/***/ }),

/***/ "./node_modules/ol/geom/LineString.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/LineString.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(76);

/***/ }),

/***/ "./node_modules/ol/geom/MultiLineString.js":
/*!*************************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/MultiLineString.js from dll-reference vendor ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(117);

/***/ }),

/***/ "./node_modules/ol/geom/MultiPoint.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/MultiPoint.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(145);

/***/ }),

/***/ "./node_modules/ol/geom/MultiPolygon.js":
/*!**********************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/MultiPolygon.js from dll-reference vendor ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(146);

/***/ }),

/***/ "./node_modules/ol/geom/Point.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Point.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(58);

/***/ }),

/***/ "./node_modules/ol/geom/Polygon.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/Polygon.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default, circular, fromExtent, fromCircle, makeRegular */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(45);

/***/ }),

/***/ "./node_modules/ol/geom/SimpleGeometry.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/ol/geom/SimpleGeometry.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: getStrideForLayout, transformGeom2D, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(93);

/***/ }),

/***/ "./node_modules/ol/has.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/has.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: FIREFOX, SAFARI, WEBKIT, MAC, DEVICE_PIXEL_RATIO, WORKER_OFFSCREEN_CANVAS, IMAGE_DECODE, PASSIVE_EVENT_LISTENERS */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(70);

/***/ }),

/***/ "./node_modules/ol/interaction/Draw.js":
/*!*********************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Draw.js from dll-reference vendor ***!
  \*********************************************************************************/
/*! exports provided: DrawEvent, createRegularPolygon, createBox, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(581);

/***/ }),

/***/ "./node_modules/ol/interaction/Interaction.js":
/*!****************************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Interaction.js from dll-reference vendor ***!
  \****************************************************************************************/
/*! exports provided: pan, zoomByDelta, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(83);

/***/ }),

/***/ "./node_modules/ol/interaction/Modify.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Modify.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! exports provided: ModifyEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(582);

/***/ }),

/***/ "./node_modules/ol/interaction/Pointer.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Pointer.js from dll-reference vendor ***!
  \************************************************************************************/
/*! exports provided: centroid, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(65);

/***/ }),

/***/ "./node_modules/ol/interaction/Translate.js":
/*!**************************************************************************************!*\
  !*** delegated ./node_modules/ol/interaction/Translate.js from dll-reference vendor ***!
  \**************************************************************************************/
/*! exports provided: TranslateEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(584);

/***/ }),

/***/ "./node_modules/ol/layer.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/layer.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: Graticule, Group, Heatmap, Image, Layer, MapboxVector, Tile, Vector, VectorImage, VectorTile, WebGLPoints */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1072);

/***/ }),

/***/ "./node_modules/ol/layer/Base.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Base.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(378);

/***/ }),

/***/ "./node_modules/ol/layer/Group.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Group.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(365);

/***/ }),

/***/ "./node_modules/ol/layer/Image.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Image.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(370);

/***/ }),

/***/ "./node_modules/ol/layer/Layer.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Layer.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: inView, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(97);

/***/ }),

/***/ "./node_modules/ol/layer/Tile.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Tile.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(262);

/***/ }),

/***/ "./node_modules/ol/layer/Vector.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/layer/Vector.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(106);

/***/ }),

/***/ "./node_modules/ol/math.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/math.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: clamp, cosh, log2, squaredSegmentDistance, squaredDistance, solveLinearSystem, toDegrees, toRadians, modulo, lerp */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(12);

/***/ }),

/***/ "./node_modules/ol/obj.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/obj.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: assign, clear, getValues, isEmpty */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(11);

/***/ }),

/***/ "./node_modules/ol/ol.css":
/*!********************************!*\
  !*** ./node_modules/ol/ol.css ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./node_modules/ol/proj.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/proj.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: METERS_PER_UNIT, Projection, cloneTransform, identityTransform, addProjection, addProjections, get, getPointResolution, addEquivalentProjections, addEquivalentTransforms, clearAllProjections, createProjection, createTransformFromCoordinateTransform, addCoordinateTransforms, fromLonLat, toLonLat, equivalent, getTransformFromProjections, getTransform, transform, transformExtent, transformWithProjections, setUserProjection, clearUserProjection, getUserProjection, useGeographic, toUserCoordinate, fromUserCoordinate, toUserExtent, fromUserExtent, createSafeCoordinateTransform, addCommon */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(7);

/***/ }),

/***/ "./node_modules/ol/size.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/size.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: buffer, hasArea, scale, toSize */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(46);

/***/ }),

/***/ "./node_modules/ol/source.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/source.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: BingMaps, CartoDB, Cluster, IIIF, Image, ImageArcGISRest, ImageCanvas, ImageMapGuide, ImageStatic, ImageWMS, OSM, Raster, Source, Stamen, Tile, TileArcGISRest, TileDebug, TileImage, TileJSON, TileWMS, UrlTile, UTFGrid, Vector, VectorTile, WMTS, XYZ, Zoomify */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1076);

/***/ }),

/***/ "./node_modules/ol/source/Image.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/source/Image.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: ImageSourceEventType, ImageSourceEvent, defaultImageLoadFunction, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(89);

/***/ }),

/***/ "./node_modules/ol/source/ImageWMS.js":
/*!********************************************************************************!*\
  !*** delegated ./node_modules/ol/source/ImageWMS.js from dll-reference vendor ***!
  \********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(585);

/***/ }),

/***/ "./node_modules/ol/source/OSM.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/source/OSM.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: ATTRIBUTION, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(468);

/***/ }),

/***/ "./node_modules/ol/source/Tile.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/source/Tile.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: TileSourceEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(185);

/***/ }),

/***/ "./node_modules/ol/source/TileWMS.js":
/*!*******************************************************************************!*\
  !*** delegated ./node_modules/ol/source/TileWMS.js from dll-reference vendor ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(586);

/***/ }),

/***/ "./node_modules/ol/source/Vector.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/source/Vector.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: VectorSourceEvent, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(107);

/***/ }),

/***/ "./node_modules/ol/source/WMTS.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/source/WMTS.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: default, optionsFromCapabilities */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(587);

/***/ }),

/***/ "./node_modules/ol/sphere.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/sphere.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: DEFAULT_RADIUS, getDistance, getLength, getArea, offset */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(312);

/***/ }),

/***/ "./node_modules/ol/string.js":
/*!***********************************************************************!*\
  !*** delegated ./node_modules/ol/string.js from dll-reference vendor ***!
  \***********************************************************************/
/*! exports provided: padNumber, compareVersions */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(137);

/***/ }),

/***/ "./node_modules/ol/structs/RBush.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/structs/RBush.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(251);

/***/ }),

/***/ "./node_modules/ol/style.js":
/*!**********************************************************************!*\
  !*** delegated ./node_modules/ol/style.js from dll-reference vendor ***!
  \**********************************************************************/
/*! exports provided: Circle, Fill, Icon, IconImage, Image, RegularShape, Stroke, Style, Text */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(592);

/***/ }),

/***/ "./node_modules/ol/style/Circle.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Circle.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(242);

/***/ }),

/***/ "./node_modules/ol/style/Fill.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Fill.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(84);

/***/ }),

/***/ "./node_modules/ol/style/Icon.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Icon.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(212);

/***/ }),

/***/ "./node_modules/ol/style/RegularShape.js":
/*!***********************************************************************************!*\
  !*** delegated ./node_modules/ol/style/RegularShape.js from dll-reference vendor ***!
  \***********************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(369);

/***/ }),

/***/ "./node_modules/ol/style/Stroke.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Stroke.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(85);

/***/ }),

/***/ "./node_modules/ol/style/Style.js":
/*!****************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Style.js from dll-reference vendor ***!
  \****************************************************************************/
/*! exports provided: toFunction, createDefaultStyle, createEditingStyle, default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(55);

/***/ }),

/***/ "./node_modules/ol/style/Text.js":
/*!***************************************************************************!*\
  !*** delegated ./node_modules/ol/style/Text.js from dll-reference vendor ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(169);

/***/ }),

/***/ "./node_modules/ol/tilegrid/WMTS.js":
/*!******************************************************************************!*\
  !*** delegated ./node_modules/ol/tilegrid/WMTS.js from dll-reference vendor ***!
  \******************************************************************************/
/*! exports provided: default, createFromCapabilitiesMatrixSet */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(594);

/***/ }),

/***/ "./node_modules/ol/uri.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/uri.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: appendParams */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(118);

/***/ }),

/***/ "./node_modules/ol/util.js":
/*!*********************************************************************!*\
  !*** delegated ./node_modules/ol/util.js from dll-reference vendor ***!
  \*********************************************************************/
/*! exports provided: abstract, getUid, VERSION */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(9);

/***/ }),

/***/ "./node_modules/ol/xml.js":
/*!********************************************************************!*\
  !*** delegated ./node_modules/ol/xml.js from dll-reference vendor ***!
  \********************************************************************/
/*! exports provided: XML_SCHEMA_INSTANCE_URI, createElementNS, getAllTextContent, getAllTextContent_, isDocument, getAttributeNS, parse, makeArrayExtender, makeArrayPusher, makeReplacer, makeObjectPropertyPusher, makeObjectPropertySetter, makeChildAppender, makeArraySerializer, makeSimpleNodeFactory, OBJECT_PROPERTY_NODE_FACTORY, makeSequence, makeStructureNS, parseNode, pushParseAndPop, serialize, pushSerializeAndPop, registerXMLSerializer, getXMLSerializer, registerDocument, getDocument */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(0);

/***/ }),

/***/ "./node_modules/popper.js/dist/esm/popper.js":
/*!***************************************************************************************!*\
  !*** delegated ./node_modules/popper.js/dist/esm/popper.js from dll-reference vendor ***!
  \***************************************************************************************/
/*! exports provided: default */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(329);

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************************************************!*\
  !*** delegated ./node_modules/process/browser.js from dll-reference vendor ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(1023);

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
  "use strict";

  if (global.setImmediate) {
    return;
  }

  var nextHandle = 1;
  var tasksByHandle = {};
  var currentlyRunningATask = false;
  var doc = global.document;
  var registerImmediate;

  function setImmediate(callback) {
    if (typeof callback !== "function") {
      callback = new Function("" + callback);
    }

    var args = new Array(arguments.length - 1);

    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i + 1];
    }

    var task = {
      callback: callback,
      args: args
    };
    tasksByHandle[nextHandle] = task;
    registerImmediate(nextHandle);
    return nextHandle++;
  }

  function clearImmediate(handle) {
    delete tasksByHandle[handle];
  }

  function run(task) {
    var callback = task.callback;
    var args = task.args;

    switch (args.length) {
      case 0:
        callback();
        break;

      case 1:
        callback(args[0]);
        break;

      case 2:
        callback(args[0], args[1]);
        break;

      case 3:
        callback(args[0], args[1], args[2]);
        break;

      default:
        callback.apply(undefined, args);
        break;
    }
  }

  function runIfPresent(handle) {
    if (currentlyRunningATask) {
      setTimeout(runIfPresent, 0, handle);
    } else {
      var task = tasksByHandle[handle];

      if (task) {
        currentlyRunningATask = true;

        try {
          run(task);
        } finally {
          clearImmediate(handle);
          currentlyRunningATask = false;
        }
      }
    }
  }

  function installNextTickImplementation() {
    registerImmediate = function registerImmediate(handle) {
      process.nextTick(function () {
        runIfPresent(handle);
      });
    };
  }

  function canUsePostMessage() {
    if (global.postMessage && !global.importScripts) {
      var postMessageIsAsynchronous = true;
      var oldOnMessage = global.onmessage;

      global.onmessage = function () {
        postMessageIsAsynchronous = false;
      };

      global.postMessage("", "*");
      global.onmessage = oldOnMessage;
      return postMessageIsAsynchronous;
    }
  }

  function installPostMessageImplementation() {
    var messagePrefix = "setImmediate$" + Math.random() + "$";

    var onGlobalMessage = function onGlobalMessage(event) {
      if (event.source === global && typeof event.data === "string" && event.data.indexOf(messagePrefix) === 0) {
        runIfPresent(+event.data.slice(messagePrefix.length));
      }
    };

    if (global.addEventListener) {
      global.addEventListener("message", onGlobalMessage, false);
    } else {
      global.attachEvent("onmessage", onGlobalMessage);
    }

    registerImmediate = function registerImmediate(handle) {
      global.postMessage(messagePrefix + handle, "*");
    };
  }

  function installMessageChannelImplementation() {
    var channel = new MessageChannel();

    channel.port1.onmessage = function (event) {
      var handle = event.data;
      runIfPresent(handle);
    };

    registerImmediate = function registerImmediate(handle) {
      channel.port2.postMessage(handle);
    };
  }

  function installReadyStateChangeImplementation() {
    var html = doc.documentElement;

    registerImmediate = function registerImmediate(handle) {
      var script = doc.createElement("script");

      script.onreadystatechange = function () {
        runIfPresent(handle);
        script.onreadystatechange = null;
        html.removeChild(script);
        script = null;
      };

      html.appendChild(script);
    };
  }

  function installSetTimeoutImplementation() {
    registerImmediate = function registerImmediate(handle) {
      setTimeout(runIfPresent, 0, handle);
    };
  }

  var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
  attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

  if ({}.toString.call(global.process) === "[object process]") {
    installNextTickImplementation();
  } else if (canUsePostMessage()) {
    installPostMessageImplementation();
  } else if (global.MessageChannel) {
    installMessageChannelImplementation();
  } else if (doc && "onreadystatechange" in doc.createElement("script")) {
    installReadyStateChangeImplementation();
  } else {
    installSetTimeoutImplementation();
  }

  attachTo.setImmediate = setImmediate;
  attachTo.clearImmediate = clearImmediate;
})(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = typeof global !== "undefined" && global || typeof self !== "undefined" && self || window;
var apply = Function.prototype.apply;

exports.setTimeout = function () {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};

exports.setInterval = function () {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};

exports.clearTimeout = exports.clearInterval = function (timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}

Timeout.prototype.unref = Timeout.prototype.ref = function () {};

Timeout.prototype.close = function () {
  this._clearFn.call(scope, this._id);
};

exports.enroll = function (item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function (item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function (item) {
  clearTimeout(item._idleTimeoutId);
  var msecs = item._idleTimeout;

  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout) item._onTimeout();
    }, msecs);
  }
};

__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");

exports.setImmediate = typeof self !== "undefined" && self.setImmediate || typeof global !== "undefined" && global.setImmediate || this && this.setImmediate;
exports.clearImmediate = typeof self !== "undefined" && self.clearImmediate || typeof global !== "undefined" && global.clearImmediate || this && this.clearImmediate;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!************************************************************************************!*\
  !*** delegated ./node_modules/webpack/buildin/global.js from dll-reference vendor ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(206);

/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!********************************************************************************************!*\
  !*** delegated ./node_modules/webpack/buildin/harmony-module.js from dll-reference vendor ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(/*! dll-reference vendor */ "dll-reference vendor"))(631);

/***/ }),

/***/ "./src/CustomEvent.js":
/*!****************************!*\
  !*** ./src/CustomEvent.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ol_events_Event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events/Event.js */ "./node_modules/ol/events/Event.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }



var _default = function (_olEventsEvent) {
  _inheritsLoose(_default, _olEventsEvent);

  function _default(type, detail) {
    var _this;

    if (detail === void 0) {
      detail = {};
    }

    _this = _olEventsEvent.call(this, type) || this;
    _this.detail = detail;
    return _this;
  }

  return _default;
}(ol_events_Event_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/GeometryType.js":
/*!*****************************!*\
  !*** ./src/GeometryType.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  CIRCLE: 'Circle',
  LINE_STRING: 'LineString',
  MULTI_LINE_STRING: 'MultiLineString',
  MULTI_POINT: 'MultiPoint',
  MULTI_POLYGON: 'MultiPolygon',
  POINT: 'Point',
  POLYGON: 'Polygon',
  RECTANGLE: 'Rectangle',
  TEXT: 'Text'
});

/***/ }),

/***/ "./src/Menu.js":
/*!*********************!*\
  !*** ./src/Menu.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Overlay_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Overlay.js */ "./node_modules/ol/Overlay.js");
/* harmony import */ var ol_OverlayPositioning_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/OverlayPositioning.js */ "./node_modules/ol/OverlayPositioning.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }






var _default = function (_olOverlay) {
  _inheritsLoose(_default, _olOverlay);

  function _default(menuOptions, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    options.positioning = ol_OverlayPositioning_js__WEBPACK_IMPORTED_MODULE_3__["default"].TOP_LEFT;

    if (!menuOptions) {
      throw new Error('Missing menuOptions');
    }

    _this = _olOverlay.call(this, options) || this;
    _this.listenerKeys_ = [];
    _this.clickOutListenerKey_ = null;
    var contentEl = $('<div/>', {
      'class': 'panel panel-default'
    });
    _this.autoClose_ = menuOptions.autoClose !== undefined ? menuOptions.autoClose : true;

    if (menuOptions.title) {
      var headerEl = $('<div>', {
        'class': 'panel-heading'
      }).appendTo(contentEl);
      $('<span>', {
        text: menuOptions.title
      }).appendTo(headerEl);
    }

    var actionsEl = $('<div>', {
      'class': 'list-group'
    }).appendTo(contentEl);
    _this.actions_ = [];
    menuOptions.actions.forEach(function (action) {
      _this.actions_.push($('<button>', {
        'class': 'list-group-item btn',
        'data-name': action.name,
        'text': [' ', action.label !== undefined ? action.label : action.name].join('')
      }).appendTo(actionsEl).prepend($('<span>', {
        'class': action.cls !== undefined ? action.cls : ''
      })));
    });

    _this.setElement(contentEl[0]);

    return _this;
  }

  var _proto = _default.prototype;

  _proto.setMap = function setMap(map) {
    var _this2 = this;

    var currentMap = this.getMap();

    if (currentMap) {
      this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"]);
      this.listenerKeys_.length = 0;
    }

    ol_Overlay_js__WEBPACK_IMPORTED_MODULE_2__["default"].prototype.setMap.call(this, map);

    if (map) {
      this.actions_.forEach(function (action) {
        var data = action.data();

        _this2.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(action[0], 'click', _this2.handleActionClick_.bind(_this2, data.name)));
      });
      this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(map, 'pointermove', this.handleMapPointerMove_, this));
    }
  };

  _proto.open = function open(coordinate) {
    this.setPosition(coordinate);

    if (!(document.documentElement instanceof EventTarget)) {
      throw new Error('Wrong document element type');
    }

    if (this.autoClose_) {
      this.clickOutListenerKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(document.documentElement, 'mousedown', this.handleClickOut_, this);
    }
  };

  _proto.close = function close() {
    this.setPosition(undefined);

    if (this.clickOutListenerKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"])(this.clickOutListenerKey_);
    }
  };

  _proto.handleActionClick_ = function handleActionClick_(action, evt) {
    this.dispatchEvent(new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__["default"]('actionclick', {
      action: action
    }));

    if (this.autoClose_) {
      this.close();
    }

    evt.stopPropagation();
  };

  _proto.handleClickOut_ = function handleClickOut_(evt) {
    var element = this.getElement();

    if (element && $(evt.target).closest(element).length === 0) {
      this.close();
    }
  };

  _proto.handleMapPointerMove_ = function handleMapPointerMove_(myEvent) {
    var target = myEvent.originalEvent.target;
    var element = this.getElement();

    if (target instanceof Element && element instanceof Element && element.contains(target)) {
      myEvent.coordinate = [Infinity, Infinity];
      myEvent.pixel = [Infinity, Infinity];
    }
  };

  return _default;
}(ol_Overlay_js__WEBPACK_IMPORTED_MODULE_2__["default"]);


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/WFSDescribeFeatureType.js":
/*!***************************************!*\
  !*** ./src/WFSDescribeFeatureType.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_format_XML_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/format/XML.js */ "./node_modules/ol/format/XML.js");
/* harmony import */ var ol_xml_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/xml.js */ "./node_modules/ol/xml.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }



var NAMESPACE_URIS_ = [null, 'http://www.w3.org/2001/XMLSchema'];

function makeStructureNS(namespaceURIs, structure) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeStructureNS"](namespaceURIs, structure);
}

var PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  element: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertyPusher"](readElement_),
  complexType: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertyPusher"](readComplexType_)
});
var COMPLEX_TYPE_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  complexContent: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertySetter"](readComplexContent_)
});
var COMPLEX_CONTENT_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  extension: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertySetter"](readExtension_)
});
var EXTENSION_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  sequence: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertySetter"](readSequence_)
});
var SEQUENCE_PARSERS_ = makeStructureNS(NAMESPACE_URIS_, {
  element: ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["makeObjectPropertyPusher"](readElement_)
});

var WFSDescribeFeatureType = function (_olFormatXML) {
  _inheritsLoose(WFSDescribeFeatureType, _olFormatXML);

  function WFSDescribeFeatureType() {
    return _olFormatXML.apply(this, arguments) || this;
  }

  return WFSDescribeFeatureType;
}(ol_format_XML_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

WFSDescribeFeatureType.prototype.read;

WFSDescribeFeatureType.prototype.readFromDocument = function (doc) {
  var node;

  for (node = doc.firstChild; node; node = node.nextSibling) {
    if (node && node.nodeType == Node.ELEMENT_NODE) {
      return this.readFromNode(node);
    }
  }

  return null;
};

WFSDescribeFeatureType.prototype.readFromNode = function (node) {
  var result = {};
  result = ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"](result, PARSERS_, node, []);
  return result;
};

function readElement_(node, objectStack) {
  var attributes = {};

  for (var i = 0, len = node.attributes.length; i < len; i++) {
    var attribute = node.attributes.item(i);

    if (!attribute) {
      throw new Error('Missing attribute');
    }

    attributes[attribute.name] = attribute.value;
  }

  if (objectStack.length === 1) {
    var _attribute = attributes.type.split(':').pop();

    if (!_attribute) {
      throw new Error('Missing attribute');
    }

    attributes.type = _attribute;
  }

  return attributes;
}

function readComplexType_(node, objectStack) {
  var name = node.getAttribute('name');
  var object = ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({
    name: name
  }, COMPLEX_TYPE_PARSERS_, node, objectStack);
  object.complexContent = object.complexContent.extension.sequence.element;
  return object;
}

function readComplexContent_(node, objectStack) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({}, COMPLEX_CONTENT_PARSERS_, node, objectStack);
}

function readExtension_(node, objectStack) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({}, EXTENSION_PARSERS_, node, objectStack);
}

function readSequence_(node, objectStack) {
  return ol_xml_js__WEBPACK_IMPORTED_MODULE_1__["pushParseAndPop"]({}, SEQUENCE_PARSERS_, node, objectStack);
}

/* harmony default export */ __webpack_exports__["default"] = (WFSDescribeFeatureType);

/***/ }),

/***/ "./src/array.js":
/*!**********************!*\
  !*** ./src/array.js ***!
  \**********************/
/*! exports provided: pushUnlessIncluded */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pushUnlessIncluded", function() { return pushUnlessIncluded; });
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");

function pushUnlessIncluded(arr, obj) {
  var ret = false;

  if (!Object(ol_array_js__WEBPACK_IMPORTED_MODULE_0__["includes"])(arr, obj)) {
    arr.push(obj);
    ret = true;
  }

  return ret;
}

/***/ }),

/***/ "./src/datasource/DataSource.js":
/*!**************************************!*\
  !*** ./src/datasource/DataSource.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var DataSource = function () {
  function DataSource(options) {
    this.inRange = options.inRange !== false;
    this.visible = options.visible === true;
    this.attributes = options.attributes || null;
    this.id_ = options.id;
    this.identifierAttribute_ = options.identifierAttribute;
    this.maxResolution_ = options.maxResolution;
    this.minResolution_ = options.minResolution;
    this.name_ = options.name;
  }

  var _proto = DataSource.prototype;

  _proto.getAttributes = function getAttributes() {
    return this.attributes;
  };

  _proto.setAttributes = function setAttributes(attributes) {
    this.attributes = attributes;
  };

  _createClass(DataSource, [{
    key: "id",
    get: function get() {
      return this.id_;
    }
  }, {
    key: "identifierAttribute",
    get: function get() {
      return this.identifierAttribute_;
    }
  }, {
    key: "maxResolution",
    get: function get() {
      return this.maxResolution_;
    }
  }, {
    key: "minResolution",
    get: function get() {
      return this.minResolution_;
    }
  }, {
    key: "name",
    get: function get() {
      return this.name_;
    }
  }, {
    key: "queryable",
    get: function get() {
      return false;
    }
  }, {
    key: "supportsDynamicInRange",
    get: function get() {
      return this.maxResolution !== null || this.minResolution !== null;
    }
  }]);

  return DataSource;
}();

/* harmony default export */ __webpack_exports__["default"] = (DataSource);

/***/ }),

/***/ "./src/datasource/DataSources.js":
/*!***************************************!*\
  !*** ./src/datasource/DataSources.js ***!
  \***************************************/
/*! exports provided: DataSource, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSource", function() { return DataSource; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_View_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/View.js */ "./node_modules/ol/View.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }






var DataSource = function () {
  function DataSource() {
    this.collection_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
    this.map_ = null;
    this.listenerKeys_ = [];
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(this.collection_, 'add', this.handleDataSourcesAdd_, this);
  }

  var _proto = DataSource.prototype;

  _proto.bindMap_ = function bindMap_(map) {
    var view = map.getView();
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(view, 'change:resolution', this.handleViewResolutionChange_, this));
    var resolution = view.getResolution();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    this.syncDataSourcesToResolution_(resolution);
  };

  _proto.unbindMap_ = function unbindMap_(map) {
    this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"]);
    this.listenerKeys_ = [];
  };

  _proto.handleViewResolutionChange_ = function handleViewResolutionChange_(evt) {
    var view = evt.target;

    if (view instanceof ol_View_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
      var resolution = view.getResolution();

      if (resolution === undefined) {
        throw new Error('Missing resolution');
      }

      this.syncDataSourcesToResolution_(resolution);
    }
  };

  _proto.syncDataSourcesToResolution_ = function syncDataSourcesToResolution_(resolution) {
    var _this = this;

    this.collection_.forEach(function (dataSource) {
      _this.syncDataSourceToResolution_(dataSource, resolution);
    });
  };

  _proto.syncDataSourceToResolution_ = function syncDataSourceToResolution_(dataSource, resolution) {
    if (!dataSource.supportsDynamicInRange) {
      return;
    }

    var maxResolution = dataSource.maxResolution;
    var minResolution = dataSource.minResolution;
    var inMinRange = minResolution === null || minResolution === undefined || resolution >= minResolution;
    var inMaxRange = maxResolution === null || maxResolution === undefined || resolution <= maxResolution;
    var inRange = inMinRange && inMaxRange;
    dataSource.inRange = inRange;
  };

  _proto.handleDataSourcesAdd_ = function handleDataSourcesAdd_(event) {
    if (event instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["CollectionEvent"]) {
      var dataSource = event.element;

      if (this.map_) {
        var resolution = this.map_.getView().getResolution();

        if (resolution === undefined) {
          throw new Error('Missing resolution');
        }

        this.syncDataSourceToResolution_(dataSource, resolution);
      }
    }
  };

  _createClass(DataSource, [{
    key: "map",
    set: function set(map) {
      if (this.map_ === map) {
        return;
      }

      if (this.map_) {
        this.unbindMap_(this.map_);
      }

      this.map_ = map;

      if (map) {
        this.bindMap_(map);
      }
    }
  }, {
    key: "collection",
    get: function get() {
      return this.collection_;
    }
  }]);

  return DataSource;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDataSources', []);
module.service('ngeoDataSources', DataSource);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/datasource/Helper.js":
/*!**********************************!*\
  !*** ./src/datasource/Helper.js ***!
  \**********************************/
/*! exports provided: DatasourceHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasourceHelper", function() { return DatasourceHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/DataSource.js */ "./src/datasource/DataSource.js");
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/Attribute.js */ "./src/format/Attribute.js");
/* harmony import */ var ngeo_format_WFSAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/format/WFSAttribute.js */ "./src/format/WFSAttribute.js");
/* harmony import */ var ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/query/Querent.js */ "./src/query/Querent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }









var DatasourceHelper = function () {
  DatasourceHelper.$inject = ["$q", "ngeoDataSources", "ngeoQuerent"];

  function DatasourceHelper($q, ngeoDataSources, ngeoQuerent) {
    this.q_ = $q;
    this.collection_ = ngeoDataSources.collection;
    this.ngeoQuerent_ = ngeoQuerent;
    this.cache_ = {};
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(this.collection_, 'add', this.handleDataSourcesAdd_, this);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_6__["listen"])(this.collection_, 'remove', this.handleDataSourcesRemove_, this);
    this.collection_.forEach(this.registerDataSource_.bind(this));
  }

  var _proto = DatasourceHelper.prototype;

  _proto.getDataSource = function getDataSource(id) {
    return this.cache_[id] || null;
  };

  _proto.getDataSourceAttributes = function getDataSourceAttributes(dataSource) {
    var getDataSourceAttributesDefer = this.q_.defer();

    if (dataSource.attributes) {
      getDataSourceAttributesDefer.resolve(dataSource.attributes);
    } else {
      var createdAttributes = this.createDataSourceAttributesFromOGCAttributes_(dataSource);

      if (createdAttributes) {
        dataSource.setAttributes(createdAttributes);
        getDataSourceAttributesDefer.resolve(createdAttributes);
      } else {
        this.ngeoQuerent_.wfsDescribeFeatureType(dataSource).then(function (featureType_) {
          var ogcLayerName = dataSource.getWFSLayerNames()[0];
          console.assert(typeof ogcLayerName == 'string', 'The data source should have only one ogcLayer.');
          var featureType = featureType_;

          for (var _iterator = _createForOfIteratorHelperLoose(featureType.element), _step; !(_step = _iterator()).done;) {
            var element = _step.value;

            if (element.name === ogcLayerName) {
              for (var _iterator2 = _createForOfIteratorHelperLoose(featureType.complexType), _step2; !(_step2 = _iterator2()).done;) {
                var type = _step2.value;

                if (type.name == element.type) {
                  var complexContent = type.complexContent;
                  var attributes = new ngeo_format_WFSAttribute_js__WEBPACK_IMPORTED_MODULE_4__["default"]().read(complexContent);
                  dataSource.setAttributes(attributes);
                  getDataSourceAttributesDefer.resolve(attributes);
                  break;
                }
              }
            }
          }
        });
      }
    }

    return getDataSourceAttributesDefer.promise;
  };

  _proto.registerDataSource_ = function registerDataSource_(dataSource) {
    this.cache_[dataSource.id] = dataSource;
  };

  _proto.unregisterDataSource_ = function unregisterDataSource_(dataSource) {
    delete this.cache_[dataSource.id];
  };

  _proto.handleDataSourcesAdd_ = function handleDataSourcesAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["CollectionEvent"]) {
      var dataSource = evt.element;
      console.assert(dataSource instanceof ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
      this.registerDataSource_(dataSource);
    }
  };

  _proto.handleDataSourcesRemove_ = function handleDataSourcesRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["CollectionEvent"]) {
      var dataSource = evt.element;
      this.unregisterDataSource_(dataSource);
    }
  };

  _proto.createDataSourceAttributesFromOGCAttributes_ = function createDataSourceAttributesFromOGCAttributes_(dataSource) {
    var attributes = null;
    var ogcAttributes = dataSource.ogcAttributesWFS;

    if (ogcAttributes) {
      attributes = [];

      for (var name in ogcAttributes) {
        var ogcAttribute = ogcAttributes[name];
        var alias = ogcAttribute.alias;
        var required = ogcAttribute.minOccurs != '0';
        var type = ogcAttribute.type;
        var attribute = {
          alias: alias,
          name: name,
          required: required
        };

        if (!Object(ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_3__["setGeometryType"])(attribute, "gml:" + type)) {
          attribute.type = type.toLowerCase();
        }

        attributes.push(attribute);
      }
    }

    return attributes;
  };

  _createClass(DatasourceHelper, [{
    key: "collection",
    get: function get() {
      return this.collection_;
    }
  }]);

  return DatasourceHelper;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDataSourcesHelper', [ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]);
module.service('ngeoDataSourcesHelper', DatasourceHelper);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/datasource/OGC.js":
/*!*******************************!*\
  !*** ./src/datasource/OGC.js ***!
  \*******************************/
/*! exports provided: ServerType, Type, WFSOutputFormat, WMSInfoFormat, DEFAULT_GEOMETRY_NAME, OGC, guessServiceTypeByUrl, TimePropertyWidgetEnum, TimePropertyModeEnum, TimePropertyResolutionEnum, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServerType", function() { return ServerType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Type", function() { return Type; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WFSOutputFormat", function() { return WFSOutputFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WMSInfoFormat", function() { return WMSInfoFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_GEOMETRY_NAME", function() { return DEFAULT_GEOMETRY_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OGC", function() { return OGC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "guessServiceTypeByUrl", function() { return guessServiceTypeByUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimePropertyWidgetEnum", function() { return TimePropertyWidgetEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimePropertyModeEnum", function() { return TimePropertyModeEnum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimePropertyResolutionEnum", function() { return TimePropertyResolutionEnum; });
/* harmony import */ var ngeo_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/array.js */ "./src/array.js");
/* harmony import */ var ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/DataSource.js */ "./src/datasource/DataSource.js");
/* harmony import */ var ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/filter/Condition.js */ "./src/filter/Condition.js");
/* harmony import */ var ngeo_format_ArcGISGeoJSON_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/ArcGISGeoJSON.js */ "./src/format/ArcGISGeoJSON.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ol_format_GML2_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/format/GML2.js */ "./node_modules/ol/format/GML2.js");
/* harmony import */ var ol_format_GML3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/format/GML3.js */ "./node_modules/ol/format/GML3.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ol_format_WMSGetFeatureInfo_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/format/WMSGetFeatureInfo.js */ "./node_modules/ol/format/WMSGetFeatureInfo.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }










var ServerType = {
  ARCGIS: 'arcgis',
  GEOSERVER: 'geoserver',
  MAPSERVER: 'mapserver',
  QGISSERVER: 'qgisserver'
};
var Type = {
  WMS: 'WMS',
  WMTS: 'WMTS'
};
var WFSFeaturePrefix = {
  FEATURE: 'feature'
};
var WFSOutputFormat = {
  GML2: 'GML2',
  GML3: 'GML3'
};
var WMSInfoFormat = {
  GEOJSON: 'application/geojson',
  GML: 'application/vnd.ogc.gml'
};
var DEFAULT_GEOMETRY_NAME = 'geom';
var OGC = function (_ngeoDatasourceDataSo) {
  _inheritsLoose(OGC, _ngeoDatasourceDataSo);

  function OGC(options) {
    var _this;

    _this = _ngeoDatasourceDataSo.call(this, options) || this;
    _this.dimensionsConfig = options.dimensionsConfig || null;
    _this.dimensionsFiltersConfig = options.dimensionsFiltersConfig || null;
    _this.filterCondition_ = options.filterCondition || ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__["default"].AND;
    _this.filterRules = options.filterRules || null;
    _this.filtrable = options.filtrable || null;
    _this.copyable_ = options.copyable === true;
    _this.dimensions_ = options.dimensions || null;
    _this.geometryName_ = DEFAULT_GEOMETRY_NAME;
    _this.ogcImageType_ = options.ogcImageType || 'image/png';
    _this.wmsLayers_ = options.wmsLayers || null;
    _this.wfsLayers_ = options.wfsLayers || null;
    _this.ogcServerType_ = options.ogcServerType || ServerType.MAPSERVER;
    _this.ogcType_ = options.ogcType || Type.WMS;
    _this.ogcAttributes_ = options.ogcAttributes;
    _this.queryIconPosition_ = options.queryIconPosition;
    _this.snappable_ = options.snappable === true;
    _this.snappingToEdges_ = options.snappingToEdges !== false;
    _this.snappingToVertice_ = options.snappingToVertice !== false;
    _this.snappingTolerance_ = options.snappingTolerance !== undefined ? options.snappingTolerance : 10;
    _this.timeAttributeName_ = options.timeAttributeName;
    _this.timeLowerValue = options.timeLowerValue;
    _this.timeProperty_ = options.timeProperty !== undefined ? options.timeProperty : null;
    _this.timeUpperValue = options.timeUpperValue;
    _this.wfsFeatureNS_ = options.wfsFeatureNS;
    _this.wfsFeaturePrefix_ = options.wfsFeaturePrefix || WFSFeaturePrefix.FEATURE;
    _this.wfsOutputFormat_ = options.wfsOutputFormat || WFSOutputFormat.GML3;
    _this.wfsUrl_ = options.wfsUrl;
    var wmsInfoFormat;

    if (options.wmsInfoFormat) {
      wmsInfoFormat = options.wmsInfoFormat;
    } else {
      if (_this.ogcServerType_ === ServerType.ARCGIS) {
        wmsInfoFormat = WMSInfoFormat.GEOJSON;
      } else {
        wmsInfoFormat = WMSInfoFormat.GML;
      }
    }

    _this.wmsInfoFormat_ = wmsInfoFormat;
    _this.wmsIsSingleTile_ = options.wmsIsSingleTile === true;
    _this.wmsUrl_ = options.wmsUrl;
    _this.wmtsLayer_ = options.wmtsLayer;
    _this.wmtsUrl_ = options.wmtsUrl;
    var wfsLayerNames = [];
    var wmsLayerNames = [];

    if (_this.queryable) {
      var wfsLayers = _this.wfsLayers || [];

      for (var _iterator = _createForOfIteratorHelperLoose(wfsLayers), _step; !(_step = _iterator()).done;) {
        var wfsLayer = _step.value;

        if (wfsLayer.queryable) {
          wfsLayerNames.push(wfsLayer.name);
          wmsLayerNames.push(wfsLayer.name);
        }
      }

      var wmsLayers = _this.wmsLayers || [];

      for (var _iterator2 = _createForOfIteratorHelperLoose(wmsLayers), _step2; !(_step2 = _iterator2()).done;) {
        var wmsLayer = _step2.value;

        if (wmsLayer.queryable) {
          Object(ngeo_array_js__WEBPACK_IMPORTED_MODULE_0__["pushUnlessIncluded"])(wmsLayerNames, wmsLayer.name);
        }
      }
    }

    var wfsFormat = null;

    if (_this.supportsWFS && wfsLayerNames.length) {
      var format;

      if (_this.wfsOutputFormat_ === WFSOutputFormat.GML3) {
        format = new ol_format_GML3_js__WEBPACK_IMPORTED_MODULE_6__["default"]();
      } else if (_this.wfsOutputFormat_ === WFSOutputFormat.GML2) {
        format = new ol_format_GML2_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
      } else {
        throw new Error('Unknown GML output version');
      }

      wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
        featureNS: _this.wfsFeatureNS,
        featureType: wfsLayerNames,
        gmlFormat: format
      });
    }

    _this.wfsFormat_ = wfsFormat;
    var wmsFormat = null;

    if (_this.supportsWMS && wmsLayerNames.length) {
      if (_this.wmsInfoFormat === WMSInfoFormat.GML) {
        wmsFormat = new ol_format_WMSGetFeatureInfo_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
          layers: wmsLayerNames
        });
      } else if (_this.wmsInfoFormat === WMSInfoFormat.GEOJSON) {
        if (_this.ogcServerType_ === ServerType.ARCGIS) {
          wmsFormat = new ngeo_format_ArcGISGeoJSON_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
            layers: wmsLayerNames
          });
        }
      }
    }

    _this.wmsFormat_ = wmsFormat;
    return _this;
  }

  var _proto = OGC.prototype;

  _proto.setAttributes = function setAttributes(attributes) {
    _ngeoDatasourceDataSo.prototype.setAttributes.call(this, attributes);

    this.updateGeometryNameFromAttributes_();
  };

  _proto.geometryName = function geometryName(layer) {
    var geometryName = null;

    if (layer && this.ogcAttributes_) {
      var attributes = this.ogcAttributes_[layer];

      for (var attribute in attributes) {
        if (attributes[attribute].namespace == 'http://www.opengis.net/gml') {
          geometryName = attribute;
          break;
        }
      }
    }

    if (!geometryName) {
      geometryName = this.geometryName_;
    }

    return geometryName;
  };

  _proto.combinableWithDataSourceForWFS = function combinableWithDataSourceForWFS(dataSource) {
    return this.combinableForWFS && dataSource.combinableForWFS && this.supportsWFS && dataSource.supportsWFS && this.queryable && dataSource.queryable && this.wfsUrl === dataSource.wfsUrl && this.haveTheSameActiveDimensions(dataSource) && this.haveTheSameActiveDimensionsFilters(dataSource);
  };

  _proto.combinableWithDataSourceForWMS = function combinableWithDataSourceForWMS(dataSource) {
    return this.combinableForWMS && dataSource.combinableForWMS && this.supportsWMS && dataSource.supportsWMS && this.queryable && dataSource.queryable && this.wmsUrl === dataSource.wmsUrl && this.haveTheSameActiveDimensions(dataSource);
  };

  _proto.isAnyOGCLayerInRange = function isAnyOGCLayerInRange(res, queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    return !!this.getInRangeWFSLayerNames(res, queryableOnly).length;
  };

  _proto.getWMSLayerNames = function getWMSLayerNames(queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    var layerNames = [];

    if (this.wmsLayers) {
      for (var _iterator3 = _createForOfIteratorHelperLoose(this.wmsLayers), _step3; !(_step3 = _iterator3()).done;) {
        var wmsLayer = _step3.value;

        if (!queryableOnly || wmsLayer.queryable && wmsLayer.getData !== false) {
          layerNames.push(wmsLayer.name);
        }
      }
    }

    return layerNames;
  };

  _proto.getInRangeWFSLayerNames = function getInRangeWFSLayerNames(res, queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    var layerNames = [];

    if (this.wfsLayers) {
      for (var _iterator4 = _createForOfIteratorHelperLoose(this.wfsLayers), _step4; !(_step4 = _iterator4()).done;) {
        var wfsLayer = _step4.value;
        var maxRes = wfsLayer.maxResolution;
        var minRes = wfsLayer.minResolution;
        var inMinRange = minRes === undefined || res >= minRes;
        var inMaxRange = maxRes === undefined || res <= maxRes;
        var inRange = inMinRange && inMaxRange;

        if (inRange && (!queryableOnly || wfsLayer.queryable && wfsLayer.getData !== false)) {
          layerNames.push(wfsLayer.name);
        }
      }
    }

    return layerNames;
  };

  _proto.getWFSLayerNames = function getWFSLayerNames(queryableOnly) {
    if (queryableOnly === void 0) {
      queryableOnly = false;
    }

    var layerNames = [];

    if (this.wfsLayers) {
      for (var _iterator5 = _createForOfIteratorHelperLoose(this.wfsLayers), _step5; !(_step5 = _iterator5()).done;) {
        var wfsLayer = _step5.value;

        if (!queryableOnly || wfsLayer.queryable && wfsLayer.getData !== false) {
          layerNames.push(wfsLayer.name);
        }
      }
    }

    return layerNames;
  };

  _proto.getFiltrableWFSLayerName = function getFiltrableWFSLayerName() {
    if (!this.filtrable) {
      throw new Error('Missing filtrable');
    }

    var layerNames = this.getWFSLayerNames(true);
    return layerNames[0];
  };

  _proto.updateGeometryNameFromAttributes_ = function updateGeometryNameFromAttributes_() {
    if (this.attributes) {
      for (var _iterator6 = _createForOfIteratorHelperLoose(this.attributes), _step6; !(_step6 = _iterator6()).done;) {
        var attribute = _step6.value;

        if (attribute.type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__["default"].GEOMETRY) {
          this.geometryName_ = attribute.name;
          break;
        }
      }
    }
  };

  _proto.haveTheSameActiveDimensions = function haveTheSameActiveDimensions(dataSource) {
    var share = true;
    var myActive = this.activeDimensions;
    var itsActive = dataSource.activeDimensions;

    for (var key in myActive) {
      if (myActive[key] !== itsActive[key]) {
        share = false;
        break;
      }
    }

    if (share) {
      for (var _key in itsActive) {
        if (itsActive[_key] !== myActive[_key]) {
          share = false;
          break;
        }
      }
    }

    return share;
  };

  _proto.haveTheSameActiveDimensionsFilters = function haveTheSameActiveDimensionsFilters(dataSource) {
    var _this2 = this;

    var myConfig = this.dimensionsFiltersConfig || {};
    var itsConfig = dataSource.dimensionsFiltersConfig || {};

    var equals = function equals(key) {
      var myKeyConfig = myConfig[key];
      var itsKeyConfig = itsConfig[key];

      if (myKeyConfig === undefined || itsKeyConfig === undefined) {
        return false;
      }

      if (myKeyConfig.field != itsKeyConfig.field) {
        return false;
      }

      var myValue = myKeyConfig.value !== null ? myKeyConfig.value : _this2.dimensions[key];
      var itsValue = itsKeyConfig.value !== null ? itsKeyConfig.value : dataSource.dimensions[key];

      if (myValue != itsValue) {
        return false;
      }

      return true;
    };

    for (var key in this.dimensionsFiltersConfig) {
      if (!equals(key)) {
        return false;
      }
    }

    for (var _key2 in dataSource.dimensionsFiltersConfig) {
      if (!equals(_key2)) {
        return false;
      }
    }

    return true;
  };

  _proto.getCommonOGCAttributes_ = function getCommonOGCAttributes_(layerNames) {
    var allLayersAttributes = this.ogcAttributes_;

    if (!allLayersAttributes || !layerNames.length) {
      return null;
    }

    var layersAttributes = [];

    for (var _iterator7 = _createForOfIteratorHelperLoose(layerNames), _step7; !(_step7 = _iterator7()).done;) {
      var layerName = _step7.value;
      var _layerAttributes = allLayersAttributes[layerName];

      if (_layerAttributes) {
        layersAttributes.push(_layerAttributes);
      }
    }

    if (!layersAttributes.length) {
      return null;
    }

    var attributes = {};
    var firstLayerAttributes = layersAttributes.shift();

    for (var firstLayerAttributeName in firstLayerAttributes) {
      var firstLayerAttribute = firstLayerAttributes[firstLayerAttributeName];
      var shouldPushAttribute = true;

      for (var _iterator8 = _createForOfIteratorHelperLoose(layersAttributes), _step8; !(_step8 = _iterator8()).done;) {
        var layerAttributes = _step8.value;

        if (!layerAttributes[firstLayerAttributeName]) {
          shouldPushAttribute = false;
          break;
        }
      }

      if (shouldPushAttribute) {
        attributes[firstLayerAttributeName] = firstLayerAttribute;
      }
    }

    return attributes;
  };

  _createClass(OGC, [{
    key: "dimensions",
    get: function get() {
      return this.dimensions_;
    }
  }, {
    key: "filterCondition",
    get: function get() {
      return this.filterCondition_;
    },
    set: function set(filterCondition) {
      this.filterCondition_ = filterCondition;
    }
  }, {
    key: "timeRangeValue",
    get: function get() {
      var range = null;
      var lower = this.timeLowerValue;
      var upper = this.timeUpperValue;

      if (lower !== undefined) {
        range = {
          start: lower
        };

        if (upper != undefined) {
          range.end = upper;
        }
      }

      return range;
    },
    set: function set(range) {
      if (range) {
        this.timeUpperValue = range.end;
        this.timeLowerValue = range.start;
      } else {
        this.timeUpperValue = undefined;
        this.timeLowerValue = undefined;
      }
    }
  }, {
    key: "copyable",
    get: function get() {
      return this.copyable_;
    }
  }, {
    key: "ogcImageType",
    get: function get() {
      return this.ogcImageType_;
    }
  }, {
    key: "wmsLayers",
    get: function get() {
      return this.wmsLayers_;
    }
  }, {
    key: "wfsLayers",
    get: function get() {
      return this.wfsLayers_;
    }
  }, {
    key: "ogcServerType",
    get: function get() {
      return this.ogcServerType_;
    }
  }, {
    key: "ogcType",
    get: function get() {
      return this.ogcType_;
    }
  }, {
    key: "queryIconPosition",
    get: function get() {
      return this.queryIconPosition_;
    }
  }, {
    key: "snappable",
    get: function get() {
      return this.snappable_;
    }
  }, {
    key: "snappingToEdges",
    get: function get() {
      return this.snappingToEdges_;
    }
  }, {
    key: "snappingToVertice",
    get: function get() {
      return this.snappingToVertice_;
    }
  }, {
    key: "snappingTolerance",
    get: function get() {
      return this.snappingTolerance_;
    }
  }, {
    key: "timeAttributeName",
    get: function get() {
      return this.timeAttributeName_;
    }
  }, {
    key: "timeProperty",
    get: function get() {
      return this.timeProperty_;
    }
  }, {
    key: "wfsFeatureNS",
    get: function get() {
      return this.wfsFeatureNS_;
    }
  }, {
    key: "wfsFeaturePrefix",
    get: function get() {
      return this.wfsFeaturePrefix_;
    }
  }, {
    key: "wfsOutputFormat",
    get: function get() {
      return this.wfsOutputFormat_;
    }
  }, {
    key: "wfsUrl",
    get: function get() {
      return this.wfsUrl_;
    }
  }, {
    key: "wmsInfoFormat",
    get: function get() {
      return this.wmsInfoFormat_;
    }
  }, {
    key: "wmsIsSingleTile",
    get: function get() {
      return this.wmsIsSingleTile_;
    }
  }, {
    key: "wmsUrl",
    get: function get() {
      return this.wmsUrl_;
    }
  }, {
    key: "wmtsLayer",
    get: function get() {
      return this.wmtsLayer_;
    }
  }, {
    key: "wmtsUrl",
    get: function get() {
      return this.wmtsUrl_;
    }
  }, {
    key: "activeDimensions",
    get: function get() {
      var active = {};
      var dimensions = this.dimensions_ || {};
      var config = this.dimensionsConfig || {};

      for (var key in config) {
        var configValue = config[key];

        if (configValue === null) {
          var value = dimensions[key];

          if (value !== undefined && value !== null) {
            active[key] = value;
          }
        } else {
          active[key] = configValue;
        }
      }

      return active;
    }
  }, {
    key: "combinableForWFS",
    get: function get() {
      return this.filterRules === null && this.timeRangeValue === null;
    }
  }, {
    key: "combinableForWMS",
    get: function get() {
      return this.filterRules === null && this.timeRangeValue === null;
    }
  }, {
    key: "ogcAttributesWFS",
    get: function get() {
      var wfsLayerNames = [];

      for (var _iterator9 = _createForOfIteratorHelperLoose(this.wfsLayers_), _step9; !(_step9 = _iterator9()).done;) {
        var wfsLayer = _step9.value;

        if (wfsLayer.queryable) {
          wfsLayerNames.push(wfsLayer.name);
        }
      }

      return this.getCommonOGCAttributes_(wfsLayerNames);
    }
  }, {
    key: "ogcAttributesWMS",
    get: function get() {
      var wmsLayerNames = [];

      for (var _iterator10 = _createForOfIteratorHelperLoose(this.wmsLayers_), _step10; !(_step10 = _iterator10()).done;) {
        var wmsLayer = _step10.value;

        if (wmsLayer.queryable) {
          wmsLayerNames.push(wmsLayer.name);
        }
      }

      return this.getCommonOGCAttributes_(wmsLayerNames);
    }
  }, {
    key: "queryable",
    get: function get() {
      var queryable = false;

      if (this.supportsWFS && this.wfsLayers) {
        for (var _iterator11 = _createForOfIteratorHelperLoose(this.wfsLayers), _step11; !(_step11 = _iterator11()).done;) {
          var wfsLayer = _step11.value;

          if (wfsLayer.queryable === true) {
            queryable = true;
            break;
          }
        }
      }

      if (this.supportsWMS && this.wmsLayers && this.wmsLayers.length > 0) {
        queryable = true;
      }

      return queryable;
    }
  }, {
    key: "supportsWFS",
    get: function get() {
      return this.wfsUrl !== undefined;
    }
  }, {
    key: "supportsAttributes",
    get: function get() {
      return this.attributes !== null || this.supportsWFS && this.wfsLayers !== null && this.wfsLayers.length === 1 && this.wfsLayers[0].queryable === true;
    }
  }, {
    key: "supportsWMS",
    get: function get() {
      return this.wmsUrl !== undefined;
    }
  }, {
    key: "supportsWMTS",
    get: function get() {
      return this.wmtsUrl !== undefined;
    }
  }, {
    key: "wfsFormat",
    get: function get() {
      return this.wfsFormat_;
    }
  }, {
    key: "wmsFormat",
    get: function get() {
      return this.wmsFormat_;
    }
  }]);

  return OGC;
}(ngeo_datasource_DataSource_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
function guessServiceTypeByUrl(url) {
  var type;

  if (/(wmts)/i.test(url)) {
    type = Type.WMTS;
  } else {
    type = Type.WMS;
  }

  return type;
}
var TimePropertyWidgetEnum = {
  SLIDER: 'slider',
  DATEPICKER: 'datepicker'
};
var TimePropertyModeEnum = {
  RANGE: 'range',
  VALUE: 'value',
  DISABLED: 'disabled'
};
var TimePropertyResolutionEnum = {
  DAY: 'day',
  MONTH: 'month',
  YEAR: 'year',
  SECOND: 'second'
};
/* harmony default export */ __webpack_exports__["default"] = (OGC);

/***/ }),

/***/ "./src/datasource/module.js":
/*!**********************************!*\
  !*** ./src/datasource/module.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/datasource/Helper.js */ "./src/datasource/Helper.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDatasourceModule', [ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./src/download/Csv.js":
/*!*****************************!*\
  !*** ./src/download/Csv.js ***!
  \*****************************/
/*! exports provided: DownloadCsvService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DownloadCsvService", function() { return DownloadCsvService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");
DownloadCsvService.$inject = ["gettextCatalog", "ngeoDownload", "ngeoCsvEncoding", "ngeoCsvExtension", "ngeoCsvIncludeHeader", "ngeoCsvQuote", "ngeoCsvSeparator"];


function DownloadCsvService(gettextCatalog, ngeoDownload, ngeoCsvEncoding, ngeoCsvExtension, ngeoCsvIncludeHeader, ngeoCsvQuote, ngeoCsvSeparator) {
  this.gettextCatalog_ = gettextCatalog;
  this.encoding_ = ngeoCsvEncoding;
  this.extension_ = ngeoCsvExtension;
  this.includeHeader_ = ngeoCsvIncludeHeader;
  this.quote_ = ngeoCsvQuote;
  this.separator_ = ngeoCsvSeparator;
  this.download_ = ngeoDownload;
}

DownloadCsvService.prototype.generateCsv = function (data, columnDefs) {
  var _this = this;

  if (data.length == 0 || columnDefs.length == 0) {
    return '';
  }

  var translatedColumnHeaders = columnDefs.map(function (columnHeader) {
    return _this.gettextCatalog_.getString(columnHeader.name);
  });
  var header = this.getRow_(translatedColumnHeaders);
  var dataRows = data.map(function (values) {
    var rowValues = columnDefs.map(function (columnHeader) {
      return values[columnHeader.name];
    });
    return _this.getRow_(rowValues);
  });
  return this.includeHeader_ ? header + dataRows.join('') : dataRows.join('');
};

DownloadCsvService.prototype.getRow_ = function (values) {
  var _this2 = this;

  var matchAllQuotesRegex = new RegExp(this.quote_, 'g');
  var doubleQuote = this.quote_ + this.quote_;
  var rowValues = values.map(function (value) {
    if (value !== undefined && value !== null) {
      value = "" + value;
      return "" + _this2.quote_ + value.replace(matchAllQuotesRegex, doubleQuote) + _this2.quote_;
    } else {
      return '';
    }
  });
  return rowValues.join(this.separator_) + "\n";
};

DownloadCsvService.prototype.startDownload = function (data, columnDefs, fileName) {
  var fileContent = this.generateCsv(data, columnDefs);
  this.download_(fileContent, fileName, "text/csv;charset=" + this.encoding_);
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCsvDownload', [ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.service('ngeoCsvDownload', DownloadCsvService);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/download/module.js":
/*!********************************!*\
  !*** ./src/download/module.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_download_Csv_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/download/Csv.js */ "./src/download/Csv.js");
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDownloadModule', [ngeo_download_Csv_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./src/download/service.js":
/*!*********************************!*\
  !*** ./src/download/service.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! file-saver */ "./node_modules/file-saver/dist/FileSaver.min.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_2__);



var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDownload', []);

function factory() {
  function download(content, fileName, opt_fileType) {
    var fileType = opt_fileType !== undefined && !Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isSafari"])() ? opt_fileType : 'text/plain;charset=utf-8';
    var blob = new Blob([content], {
      type: fileType
    });
    Object(file_saver__WEBPACK_IMPORTED_MODULE_2__["saveAs"])(blob, fileName);
  }

  return download;
}

module.factory('ngeoDownload', factory);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/draw/Controller.js":
/*!********************************!*\
  !*** ./src/draw/Controller.js ***!
  \********************************/
/*! exports provided: DrawController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DrawController", function() { return DrawController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_draw_features_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/draw/features.js */ "./src/draw/features.js");
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_misc_btnComponent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/btnComponent.js */ "./src/misc/btnComponent.js");
/* harmony import */ var ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/decorate.js */ "./src/misc/decorate.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");








var DrawController = function () {
  DrawController.$inject = ["$scope", "gettextCatalog", "ngeoFeatureHelper", "ngeoFeatures"];

  function DrawController($scope, gettextCatalog, ngeoFeatureHelper, ngeoFeatures) {
    var _this = this;

    this.active = false;
    this.features = null;
    this.map = null;
    this.showMeasure = false;
    this.uid = null;
    this.gettextCatalog_ = gettextCatalog;
    gettextCatalog.getString('Point');
    gettextCatalog.getString('LineString');
    gettextCatalog.getString('Polygon');
    gettextCatalog.getString('Circle');
    gettextCatalog.getString('Rectangle');
    gettextCatalog.getString('Text');
    this.featureHelper_ = ngeoFeatureHelper;
    this.ngeoFeatures_ = ngeoFeatures;
    this.interactions_ = [];
    this.drawPoint = null;
    this.measureLength = null;
    this.measureArea = null;
    this.measureAzimut = null;
    this.drawRectangle = null;
    this.drawText = null;
    $scope.$watch(function () {
      return _this.active;
    }, function (newVal) {
      if (newVal === false) {
        _this.interactions_.forEach(function (interaction) {
          interaction.setActive(false);
        });
      }
    });
  }

  var _proto = DrawController.prototype;

  _proto.registerInteraction = function registerInteraction(interaction) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    this.interactions_.push(interaction);
    interaction.setActive(false);
    Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_5__["interactionDecoration"])(interaction);
    this.map.addInteraction(interaction);
  };

  _proto.handleActiveChange = function handleActiveChange(event) {
    this.active = this.interactions_.some(function (interaction) {
      return interaction.getActive();
    }, this);
  };

  _proto.handleDrawEnd = function handleDrawEnd(type, evt) {
    var event = evt.detail ? evt.detail : evt;
    var sketch = event.feature;
    console.assert(sketch);
    var azimut = sketch.get('azimut');
    var features = this.features || this.ngeoFeatures_;
    var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_7__["default"](sketch.getGeometry());
    var prop = ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_2__["default"];

    switch (type) {
      case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].CIRCLE:
        feature.set(prop.IS_CIRCLE, true);

        if (azimut !== undefined) {
          feature.set(prop.AZIMUT, azimut);
        }

        break;

      case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].TEXT:
        feature.set(prop.IS_TEXT, true);
        break;

      case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].LINE_STRING:
        feature.set(prop.ARROW_DIRECTION, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__["ArrowDirections"].NONE);
        feature.set(prop.ARROW_POSITION, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__["ArrowPositions"].FIRST);
        break;

      case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].RECTANGLE:
        feature.set(prop.IS_RECTANGLE, true);
        break;

      default:
        break;
    }

    var name = this.gettextCatalog_.getString(type);
    feature.set(prop.NAME, name + " " + (features.getLength() + 1));
    var color = type !== ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].TEXT ? '#DB4436' : '#000000';
    feature.set(prop.COLOR, color);
    feature.set(prop.ANGLE, 0);
    feature.set(prop.OPACITY, 0.2);
    feature.set(prop.SHOW_MEASURE, this.showMeasure ? true : false);
    feature.set(prop.SHOW_LABEL, false);
    feature.set(prop.SIZE, 10);
    feature.set(prop.STROKE, 2);
    this.featureHelper_.setStyle(feature);
    features.push(feature);
  };

  return DrawController;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDrawfeatureController', [ngeo_draw_features_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_btnComponent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]);
module.controller('ngeoDrawfeatureController', DrawController);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/draw/component.js":
/*!*******************************!*\
  !*** ./src/draw/component.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/draw/Controller.js */ "./src/draw/Controller.js");
/* harmony import */ var ngeo_draw_point_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/draw/point.js */ "./src/draw/point.js");
/* harmony import */ var ngeo_draw_rectangle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/draw/rectangle.js */ "./src/draw/rectangle.js");
/* harmony import */ var ngeo_draw_text_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/draw/text.js */ "./src/draw/text.js");
/* harmony import */ var ngeo_measure_area_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/measure/area.js */ "./src/measure/area.js");
/* harmony import */ var ngeo_measure_azimut_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/measure/azimut.js */ "./src/measure/azimut.js");
/* harmony import */ var ngeo_measure_length_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/measure/length.js */ "./src/measure/length.js");








var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDrawfeature', [ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_draw_point_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_draw_rectangle_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_draw_text_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_measure_area_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_measure_azimut_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, ngeo_measure_length_js__WEBPACK_IMPORTED_MODULE_7__["default"].name]);

function drawComponent() {
  return {
    controller: 'ngeoDrawfeatureController as dfCtrl',
    scope: true,
    bindToController: {
      'active': '=ngeoDrawfeatureActive',
      'features': '=?ngeoDrawfeatureFeatures',
      'map': '=ngeoDrawfeatureMap',
      'showMeasure': '=?ngeoDrawfeatureShowmeasure',
      'uid': '<?ngeoDrawfeatureUid'
    }
  };
}

module.directive('ngeoDrawfeature', drawComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/draw/features.js":
/*!******************************!*\
  !*** ./src/draw/features.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");


var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatures', []);
module.value('ngeoFeatures', new ol_Collection_js__WEBPACK_IMPORTED_MODULE_1__["default"]());
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/draw/module.js":
/*!****************************!*\
  !*** ./src/draw/module.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_draw_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/draw/component.js */ "./src/draw/component.js");
/* harmony import */ var ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/draw/Controller.js */ "./src/draw/Controller.js");
/* harmony import */ var ngeo_draw_features_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/draw/features.js */ "./src/draw/features.js");
/* harmony import */ var ngeo_draw_point_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/draw/point.js */ "./src/draw/point.js");
/* harmony import */ var ngeo_draw_rectangle_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/draw/rectangle.js */ "./src/draw/rectangle.js");
/* harmony import */ var ngeo_draw_text_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/draw/text.js */ "./src/draw/text.js");







/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDrawModule', [ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_draw_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_draw_features_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_draw_point_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_draw_rectangle_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_draw_text_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]));

/***/ }),

/***/ "./src/draw/point.js":
/*!***************************!*\
  !*** ./src/draw/point.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDrawpoint', []);

function drawPointComponent() {
  return {
    restrict: 'A',
    require: '^^ngeoDrawfeature',
    link: function link($scope, element, attrs, drawFeatureCtrl) {
      if (!drawFeatureCtrl) {
        throw new Error('Missing drawFeatureCtrl');
      }

      var drawPoint = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
        type: 'Point'
      });

      if (drawFeatureCtrl.uid) {
        drawPoint.set('ngeo-interaction-draw-uid', drawFeatureCtrl.uid + "-point");
      }

      drawFeatureCtrl.registerInteraction(drawPoint);
      drawFeatureCtrl.drawPoint = drawPoint;
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(drawPoint, 'drawend', drawFeatureCtrl.handleDrawEnd.bind(drawFeatureCtrl, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__["default"].POINT), drawFeatureCtrl);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(drawPoint, 'change:active', drawFeatureCtrl.handleActiveChange, drawFeatureCtrl);
    }
  };
}

module.directive('ngeoDrawpoint', drawPointComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/draw/rectangle.js":
/*!*******************************!*\
  !*** ./src/draw/rectangle.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");





var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDrawrectangle', []);

function drawRectangleComponent() {
  return {
    restrict: 'A',
    require: '^^ngeoDrawfeature',
    link: function link($scope, element, attrs, drawFeatureCtrl) {
      if (!drawFeatureCtrl) {
        throw new Error('Missing drawFeatureCtrl');
      }

      var drawRectangle = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
        type: 'LineString',
        geometryFunction: function geometryFunction(coordinates, geometry) {
          if (!geometry) {
            geometry = new ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_4__["default"]([]);
          }

          var start = coordinates[0];

          if (!Array.isArray(start)) {
            throw new Error('Wrong coordinates type');
          }

          var end = coordinates[1];

          if (!Array.isArray(end)) {
            throw new Error('Wrong coordinates type');
          }

          geometry.setCoordinates([[start, [start[0], end[1]], end, [end[0], start[1]], start]]);
          return geometry;
        },
        maxPoints: 2
      });

      if (drawFeatureCtrl.uid) {
        drawRectangle.set('ngeo-interaction-draw-uid', drawFeatureCtrl.uid + "-rectangle");
      }

      drawFeatureCtrl.registerInteraction(drawRectangle);
      drawFeatureCtrl.drawRectangle = drawRectangle;
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(drawRectangle, 'drawend', drawFeatureCtrl.handleDrawEnd.bind(drawFeatureCtrl, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__["default"].RECTANGLE), drawFeatureCtrl);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(drawRectangle, 'change:active', drawFeatureCtrl.handleActiveChange, drawFeatureCtrl);
    }
  };
}

module.directive('ngeoDrawrectangle', drawRectangleComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/draw/text.js":
/*!**************************!*\
  !*** ./src/draw/text.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDrawtext', []);

function drawTextComponent() {
  return {
    restrict: 'A',
    require: '^^ngeoDrawfeature',
    link: function link($scope, element, attrs, drawFeatureCtrl) {
      if (!drawFeatureCtrl) {
        throw new Error('Missing drawFeatureCtrl');
      }

      var drawText = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
        type: 'Point'
      });

      if (drawFeatureCtrl.uid) {
        drawText.set('ngeo-interaction-draw-uid', drawFeatureCtrl.uid + "-text");
      }

      drawFeatureCtrl.registerInteraction(drawText);
      drawFeatureCtrl.drawText = drawText;
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(drawText, 'drawend', drawFeatureCtrl.handleDrawEnd.bind(drawFeatureCtrl, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TEXT), drawFeatureCtrl);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(drawText, 'change:active', drawFeatureCtrl.handleActiveChange, drawFeatureCtrl);
    }
  };
}

module.directive('ngeoDrawtext', drawTextComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/editing/attributesComponent.js":
/*!********************************************!*\
  !*** ./src/editing/attributesComponent.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/EventHelper.js */ "./src/misc/EventHelper.js");
/* harmony import */ var ngeo_misc_datetimepickerComponent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/datetimepickerComponent.js */ "./src/misc/datetimepickerComponent.js");
/* harmony import */ var ol_Object_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/Object.js */ "./node_modules/ol/Object.js");
/* harmony import */ var _editing_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./editing.css */ "./src/editing/editing.css");
/* harmony import */ var _editing_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_editing_css__WEBPACK_IMPORTED_MODULE_6__);
Controller.$inject = ["$scope", "ngeoEventHelper"];







var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoAttributes', [ngeo_misc_datetimepickerComponent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/editing/attributescomponent', __webpack_require__(/*! ./attributescomponent.html */ "./src/editing/attributescomponent.html"));
}]);
module.value('ngeoAttributesTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.ngeoAttributesTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/editing/attributescomponent';
});
ngeoAttributesTemplateUrl.$inject = ["$attrs", "ngeoAttributesTemplateUrl"];

function ngeoAttributesTemplateUrl($attrs, ngeoAttributesTemplateUrl) {
  return ngeoAttributesTemplateUrl($attrs);
}

var editingAttributeComponent = {
  controller: 'ngeoAttributesController as attrCtrl',
  bindings: {
    'attributes': '=ngeoAttributesAttributes',
    'disabled': '<ngeoAttributesDisabled',
    'feature': '=ngeoAttributesFeature'
  },
  require: {
    'form': '^'
  },
  templateUrl: ngeoAttributesTemplateUrl
};
module.component('ngeoAttributes', editingAttributeComponent);

function Controller($scope, ngeoEventHelper) {
  this.attributes = [];
  this.disabled = false;
  this.feature = null;
  this.properties = {};
  this.scope_ = $scope;
  this.ngeoEventHelper_ = ngeoEventHelper;
  this.updating_ = false;
}

Controller.prototype.$onInit = function () {
  if (!this.feature) {
    throw new Error('Missing feature');
  }

  this.properties = this.feature.getProperties();
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(this);
  this.ngeoEventHelper_.addListenerKey(uid, Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(this.feature, 'propertychange', this.handleFeaturePropertyChange_, this));
};

Controller.prototype.handleInputChange = function (name) {
  if (!this.properties) {
    throw new Error('Missing properties');
  }

  if (!this.feature) {
    throw new Error('Missing feature');
  }

  this.updating_ = true;
  var value = this.properties[name];
  this.feature.set(name, value);
  this.updating_ = false;
};

Controller.prototype.$onDestroy = function () {
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(this);
  this.ngeoEventHelper_.clearListenerKey(uid);
};

Controller.prototype.handleFeaturePropertyChange_ = function (evt) {
  if (evt instanceof ol_Object_js__WEBPACK_IMPORTED_MODULE_5__["ObjectEvent"]) {
    if (this.updating_) {
      return;
    }

    this.properties[evt.key] = evt.target.get(evt.key);
    this.scope_.$apply();
  }
};

module.controller('ngeoAttributesController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/editing/attributescomponent.html":
/*!**********************************************!*\
  !*** ./src/editing/attributescomponent.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<fieldset ng-disabled="attrCtrl.disabled">\n  <div\n      class="form-group"\n      ng-repeat="attribute in ::attrCtrl.attributes">\n    <div ng-if="attribute.type !== \'geometry\'">\n      <label\n          ng-if="::attribute.type !== \'boolean\'"\n          class="col-form-label">{{ ::attribute.name | translate }} <span class="text-muted">{{::attribute.required ? "*" : ""}}</span>\n      </label>\n\n      <div\n          class="form-control"\n          ng-if="::attribute.readonly"\n          readonly>\n        {{::attrCtrl.properties[attribute.name]}}\n      </div>\n\n      <div\n          ng-if="::!attribute.readonly"\n          ng-switch="::attribute.type">\n\n        <div\n            ng-switch-when="boolean"\n            class="form-check">\n          <label class="form-check-label">\n            <input\n                name="{{::attribute.name}}"\n                class="form-check-input"\n                ng-model="attrCtrl.properties[attribute.name]"\n                ng-change="attrCtrl.handleInputChange(attribute.name);"\n                type="checkbox">\n            </input>\n            <span> {{ ::attribute.name | translate }} <span class="text-muted">{{::attribute.required ? "*" : ""}}</span></span>\n          </label>\n        </div>\n\n        <select\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-when="select"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            class="form-control ngeo-highlight-invalid"\n            type="text">\n          <option\n              ng-repeat="attribute in ::attribute.choices"\n              value="{{ ::attribute }}">\n            {{ ::attribute | translate }}\n          </option>\n        </select>\n\n        <input\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-when="date"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ngeo-datetimepicker\n            ngeo-datetimepicker-options="\'{&quot;timepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;}\'"\n            class="form-control ngeo-highlight-invalid"\n            type="text">\n        </input>\n\n        <input\n            name="{{::attribute.name}}"\n            id="time"\n            ng-required="attribute.required"\n            ng-switch-when="time"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ngeo-datetimepicker\n            ngeo-datetimepicker-options="\'{&quot;datepicker&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'"\n            class="form-control ngeo-highlight-invalid"\n            type="text">\n        </input>\n\n        <input\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-when="datetime"\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ngeo-datetimepicker\n            ngeo-datetimepicker-options="\'{&quot;scrollTime&quot;: false, &quot;format&quot;: &quot;\' + attribute.format + \'&quot;, &quot;allowBlank&quot;: true, &quot;todayButton&quot;: false, &quot;mask&quot;: &quot;\' + attribute.mask + \'&quot;, &quot;defaultTime&quot;: &quot;00:00&quot;}\'"\n            class="form-control ngeo-highlight-invalid"\n            type="text">\n        </input>\n\n        <div\n            ng-switch-when="number"\n            ng-switch="::attribute.numType">\n          <input\n              name="{{::attribute.name}}"\n              ng-required="attribute.required"\n              ng-switch-when="integer"\n              ng-model="attrCtrl.properties[attribute.name]"\n              ng-change="attrCtrl.handleInputChange(attribute.name);"\n              class="form-control ngeo-highlight-invalid"\n              step="1"\n              type="number">\n          </input>\n          <input\n              name="{{::attribute.name}}"\n              ng-required="attribute.required"\n              ng-switch-default\n              ng-model="attrCtrl.properties[attribute.name]"\n              ng-change="attrCtrl.handleInputChange(attribute.name);"\n              class="form-control ngeo-highlight-invalid"\n              type="number">\n          </input>\n        </div>\n\n        <input\n            name="{{::attribute.name}}"\n            ng-required="attribute.required"\n            ng-switch-default\n            ng-model="attrCtrl.properties[attribute.name]"\n            ng-change="attrCtrl.handleInputChange(attribute.name);"\n            ng-maxlength="attribute.maxLength"\n            class="form-control ngeo-highlight-invalid"\n            type="text">\n        </input>\n\n        <div ng-show="attrCtrl.form.$submitted || attrCtrl.form[attribute.name].$touched">\n          <p class="text-danger"\n             ng-show="attrCtrl.form[attribute.name].$error.required">\n            {{\'This field is required\' | translate}}\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</fieldset>\n';

}
return __p
}

/***/ }),

/***/ "./src/editing/createfeatureComponent.js":
/*!***********************************************!*\
  !*** ./src/editing/createfeatureComponent.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/interaction/MeasureArea.js */ "./src/interaction/MeasureArea.js");
/* harmony import */ var ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/interaction/MeasureLength.js */ "./src/interaction/MeasureLength.js");
/* harmony import */ var ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/EventHelper.js */ "./src/misc/EventHelper.js");
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
Controller.$inject = ["gettextCatalog", "$compile", "$filter", "$injector", "$scope", "$timeout", "ngeoEventHelper", "ngeoSnappingTolerance"];













var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCreatefeature', [ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);

function editingCreateFeatureComponent() {
  return {
    controller: 'ngeoCreatefeatureController',
    bindToController: true,
    scope: {
      'active': '=ngeoCreatefeatureActive',
      'features': '=ngeoCreatefeatureFeatures',
      'geomType': '=ngeoCreatefeatureGeomType',
      'map': '=ngeoCreatefeatureMap'
    }
  };
}

module.directive('ngeoCreatefeature', editingCreateFeatureComponent);

function Controller(gettextCatalog, $compile, $filter, $injector, $scope, $timeout, ngeoEventHelper, ngeoSnappingTolerance) {
  var _this = this;

  this.active = false;
  this.features = null;
  this.geomType = '';
  this.map = null;
  this.gettextCatalog_ = gettextCatalog;
  this.compile_ = $compile;
  this.filter_ = $filter;
  this.scope_ = $scope;
  this.timeout_ = $timeout;
  this.ngeoEventHelper_ = ngeoEventHelper;
  this.injector_ = $injector;
  this.ngeoSnappingTolerance_ = ngeoSnappingTolerance;
  this.interaction_ = null;
  $scope.$watch(function () {
    return _this.active;
  }, function (newVal) {
    if (!_this.interaction_) {
      throw new Error('Missing interaction');
    }

    _this.interaction_.setActive(newVal);
  });
}

Controller.prototype.$onInit = function () {
  this.active = this.active === true;
  var gettextCatalog = this.gettextCatalog_;
  var interaction;

  if (this.geomType === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].POINT || this.geomType === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].MULTI_POINT) {
    interaction = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      type: 'Point'
    });
  } else if (this.geomType === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].LINE_STRING || this.geomType === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].MULTI_LINE_STRING) {
    var helpMsg = gettextCatalog.getString('Click to start drawing length');
    var contMsg = gettextCatalog.getString('Click to continue drawing<br/>' + 'Double-click or click last point to finish');
    var options = {
      style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_12__["default"](),
      startMsg: this.compile_("<div translate>" + helpMsg + "</div>")(this.scope_)[0],
      continueMsg: this.compile_("<div translate>" + contMsg + "</div>")(this.scope_)[0]
    };
    options.tolerance = this.ngeoSnappingTolerance_;

    if (this.injector_.has('ngeoSnappingSource')) {
      options.source = this.injector_.get('ngeoSnappingSource');
    }

    interaction = new ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_4__["default"](this.filter_('ngeoUnitPrefix'), gettextCatalog, options);
  } else if (this.geomType === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].POLYGON || this.geomType === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].MULTI_POLYGON) {
    var _helpMsg = gettextCatalog.getString('Click to start drawing area');

    var _contMsg = gettextCatalog.getString('Click to continue drawing<br/>' + 'Double-click or click starting point to finish');

    interaction = new ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_3__["default"](this.filter_('ngeoUnitPrefix'), gettextCatalog, {
      style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_12__["default"](),
      startMsg: this.compile_("<div translate>" + _helpMsg + "</div>")(this.scope_)[0],
      continueMsg: this.compile_("<div translate>" + _contMsg + "</div>")(this.scope_)[0]
    });
  }

  if (!interaction) {
    throw new Error('Missing interaction');
  }

  if (!this.map) {
    throw new Error('Missing map');
  }

  interaction.setActive(this.active);
  this.interaction_ = interaction;
  this.map.addInteraction(interaction);
  var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(this);

  if (interaction instanceof ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    this.ngeoEventHelper_.addListenerKey(uid, Object(ol_events_js__WEBPACK_IMPORTED_MODULE_9__["listen"])(interaction, 'drawend', this.handleDrawEnd_, this));
  } else if (interaction instanceof ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_4__["default"] || interaction instanceof ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    this.ngeoEventHelper_.addListenerKey(uid, Object(ol_events_js__WEBPACK_IMPORTED_MODULE_9__["listen"])(interaction, 'measureend', this.handleDrawEnd_, this));
  }
};

Controller.prototype.handleDrawEnd_ = function (evt) {
  var event = evt.detail ? evt.detail : evt;
  var sketch = event.feature;
  console.assert(sketch);
  var geometry = sketch.getGeometry();
  var type = geometry.getType();

  if (this.geomType.indexOf('Multi') != type.indexOf('Multi')) {
    geometry = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_6__["toMulti"])(geometry);
  }

  var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_10__["default"](geometry);

  if (this.features instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
    this.features.push(feature);
  } else {
    if (!this.features) {
      throw new Error('Missing features');
    }

    this.features.addFeature(feature);
  }
};

Controller.prototype.$onDestroy = function () {
  var _this2 = this;

  this.timeout_(function () {
    if (!_this2.map) {
      throw new Error('Missing map');
    }

    if (!_this2.interaction_) {
      throw new Error('Missing interaction');
    }

    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_7__["getUid"])(_this2);

    _this2.ngeoEventHelper_.clearListenerKey(uid);

    _this2.interaction_.setActive(false);

    _this2.map.removeInteraction(_this2.interaction_);
  }, 0);
};

module.controller('ngeoCreatefeatureController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/editing/createregularpolygonfromclickComponent.js":
/*!***************************************************************!*\
  !*** ./src/editing/createregularpolygonfromclickComponent.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_interaction_DrawRegularPolygonFromClick_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/interaction/DrawRegularPolygonFromClick.js */ "./src/interaction/DrawRegularPolygonFromClick.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
Controller.$inject = ["$scope"];




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCreateregularpolygonfromclick', []);

function editingCreateRegularPolygonFromClickComponent() {
  return {
    controller: 'ngeoCreateregularpolygonfromclickController',
    bindToController: true,
    scope: {
      'active': '=ngeoCreateregularpolygonfromclickActive',
      'angle': '<?ngeoCreateregularpolygonfromclickAngle',
      'features': '=ngeoCreateregularpolygonfromclickFeatures',
      'map': '=ngeoCreateregularpolygonfromclickMap',
      'radius': '<ngeoCreateregularpolygonfromclickRadius',
      'sides': '<?ngeoCreateregularpolygonfromclickSides'
    }
  };
}

module.directive('ngeoCreateregularpolygonfromclick', editingCreateRegularPolygonFromClickComponent);

function Controller($scope) {
  var _this = this;

  this.active = false;
  $scope.$watch(function () {
    return _this.active;
  }, function (newVal) {
    if (!_this.interaction_) {
      throw new Error('Missing interaction');
    }

    _this.interaction_.setActive(newVal);
  });
  this.angle = null;
  this.features = null;
  this.map = null;
  this.radius = -1;
  this.sides = null;
  this.interaction_ = null;
  this.interactionListenerKey_ = null;
  $scope.$on('$destroy', this.handleDestroy_.bind(this));
}

Controller.prototype.$onInit = function () {
  var options = {
    radius: this.radius
  };

  if (this.angle !== null) {
    options.angle = this.angle;
  }

  if (this.sides !== null) {
    options.sides = this.sides;
  }

  this.interaction_ = new ngeo_interaction_DrawRegularPolygonFromClick_js__WEBPACK_IMPORTED_MODULE_1__["default"](options);
  this.interaction_.setActive(this.active);
  this.interactionListenerKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(this.interaction_, 'drawend', this.handleDrawEnd_, this);
  this.map.addInteraction(this.interaction_);
};

Controller.prototype.handleDrawEnd_ = function (evt) {
  if (!this.features) {
    throw new Error('Missing features');
  }

  var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](evt.detail.feature.getGeometry());
  this.features.push(feature);
};

Controller.prototype.handleDestroy_ = function () {
  if (!this.map) {
    throw new Error('Missing map');
  }

  if (!this.interactionListenerKey_) {
    throw new Error('Missing interactionListenerKey');
  }

  if (!this.interaction_) {
    throw new Error('Missing interaction');
  }

  Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"])(this.interactionListenerKey_);
  this.interaction_.setActive(false);
  this.map.removeInteraction(this.interaction_);
};

module.controller('ngeoCreateregularpolygonfromclickController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/editing/editing.css":
/*!*********************************!*\
  !*** ./src/editing/editing.css ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./src/editing/module.js":
/*!*******************************!*\
  !*** ./src/editing/module.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_editing_attributesComponent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/editing/attributesComponent.js */ "./src/editing/attributesComponent.js");
/* harmony import */ var ngeo_editing_createfeatureComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/editing/createfeatureComponent.js */ "./src/editing/createfeatureComponent.js");
/* harmony import */ var ngeo_editing_createregularpolygonfromclickComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/editing/createregularpolygonfromclickComponent.js */ "./src/editing/createregularpolygonfromclickComponent.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoEditingModule', [ngeo_editing_attributesComponent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_editing_createfeatureComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_editing_createregularpolygonfromclickComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: unlistenByKeys */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unlistenByKeys", function() { return unlistenByKeys; });
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


function unlistenByKeys(keys) {
  for (var _iterator = _createForOfIteratorHelperLoose(keys), _step; !(_step = _iterator()).done;) {
    var key = _step.value;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_0__["unlistenByKey"])(key);
  }

  keys.length = 0;
}

/***/ }),

/***/ "./src/filter/Condition.js":
/*!*********************************!*\
  !*** ./src/filter/Condition.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  AND: '&&',
  NOT: '!',
  OR: '||'
});

/***/ }),

/***/ "./src/filter/RuleHelper.js":
/*!**********************************!*\
  !*** ./src/filter/RuleHelper.js ***!
  \**********************************/
/*! exports provided: RuleHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleHelper", function() { return RuleHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/filter/Condition.js */ "./src/filter/Condition.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_format_filter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/filter.js */ "./src/format/filter.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/rule/Date.js */ "./src/rule/Date.js");
/* harmony import */ var ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/rule/Geometry.js */ "./src/rule/Geometry.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
/* harmony import */ var ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/rule/Select.js */ "./src/rule/Select.js");
/* harmony import */ var ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/rule/Text.js */ "./src/rule/Text.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/format/filter.js */ "./node_modules/ol/format/filter.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! moment */ "./node_modules/moment/dist/moment.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }















var RuleHelper = function () {
  RuleHelper.$inject = ["gettextCatalog", "ngeoFeatureHelper", "ngeoWMSTime"];

  function RuleHelper(gettextCatalog, ngeoFeatureHelper, ngeoWMSTime) {
    this.gettextCatalog_ = gettextCatalog;
    this.ngeoFeatureHelper_ = ngeoFeatureHelper;
    this.ngeoWMSTime_ = ngeoWMSTime;
  }

  var _proto = RuleHelper.prototype;

  _proto.createRulesFromAttributes = function createRulesFromAttributes(attributes, opt_isCustom) {
    var rules = [];

    for (var _iterator = _createForOfIteratorHelperLoose(attributes), _step; !(_step = _iterator()).done;) {
      var attribute = _step.value;
      rules.push(this.createRuleFromAttribute(attribute, opt_isCustom));
    }

    return rules;
  };

  _proto.createRuleFromAttribute = function createRuleFromAttribute(attribute, opt_isCustom) {
    var rule;
    var isCustom = opt_isCustom === true;
    var name = this.gettextCatalog_.getString(attribute.name);

    switch (attribute.type) {
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATE:
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATETIME:
        if (isCustom) {
          rule = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].EQUALS,
            operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].EQUALS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].BEGINS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].ENDS],
            propertyName: attribute.name,
            type: attribute.type
          });
        } else {
          rule = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"].DURING,
            propertyName: attribute.name,
            type: attribute.type
          });
        }

        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].GEOMETRY:
        rule = new ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
          name: name,
          operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].INTERSECTS,
          operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].CONTAINS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].INTERSECTS, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"].WITHIN],
          propertyName: attribute.name,
          type: attribute.type
        });
        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].NUMBER:
        if (isCustom) {
          rule = new ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].EQUAL_TO,
            operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].GREATER_THAN, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].GREATER_THAN_OR_EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LESSER_THAN, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LESSER_THAN_OR_EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].NOT_EQUAL_TO],
            propertyName: attribute.name,
            type: ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].NUMBER
          });
        } else {
          rule = new ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].BETWEEN,
            propertyName: attribute.name,
            type: ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].NUMBER
          });
        }

        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].SELECT:
        rule = new ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
          choices: attribute.choices,
          name: name,
          propertyName: attribute.name
        });
        break;

      default:
        if (isCustom) {
          rule = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
            text: '',
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LIKE,
            operators: [ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LIKE, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].EQUAL_TO, ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].NOT_EQUAL_TO],
            propertyName: attribute.name
          });
        } else {
          rule = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
            text: '',
            name: name,
            operator: ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"].LIKE,
            propertyName: attribute.name
          });
        }

        break;
    }

    return rule;
  };

  _proto.createRules = function createRules(optionsList) {
    var rules = [];

    for (var _iterator2 = _createForOfIteratorHelperLoose(optionsList), _step2; !(_step2 = _iterator2()).done;) {
      var options = _step2.value;
      rules.push(this.createRule(options));
    }

    return rules;
  };

  _proto.createRule = function createRule(options) {
    var rule;

    switch (options.type) {
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATE:
      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].DATETIME:
        rule = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"](options);
        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].GEOMETRY:
        rule = new ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"](options);
        break;

      case ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_2__["default"].SELECT:
        var selectOptions = options;
        console.assert(selectOptions.choices);
        rule = new ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"](selectOptions);
        break;

      default:
        rule = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"](options);
        break;
    }

    return rule;
  };

  _proto.cloneRule = function cloneRule(rule) {
    var options = {
      isCustom: rule.isCustom,
      name: rule.name,
      propertyName: rule.propertyName,
      type: rule.type
    };
    var expression = rule.getExpression();

    if (expression !== null) {
      options.expression = expression;
    }

    if (rule.lowerBoundary !== null) {
      options.lowerBoundary = rule.lowerBoundary;
    }

    if (rule.operator) {
      options.operator = rule.operator;
    }

    if (rule.operators) {
      options.operators = rule.operators.slice(0);
    }

    if (rule.upperBoundary !== null) {
      options.upperBoundary = rule.upperBoundary;
    }

    var clone;

    if (rule instanceof ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      clone = new ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"](options);
    } else if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      clone = new ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"](options);
      clone.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(rule.feature));
    } else if (rule instanceof ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var opt = options;
      opt.choices = rule.choices.slice(0);
      clone = new ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"](opt);
    } else if (rule instanceof ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
      var _opt = options;
      clone = new ngeo_rule_Text_js__WEBPACK_IMPORTED_MODULE_10__["default"](_opt);
    } else {
      clone = new ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["default"](options);
    }

    return clone;
  };

  _proto.extendRule = function extendRule(sourceRule, destRule) {
    if (destRule.getExpression() !== sourceRule.getExpression()) {
      destRule.setExpression(sourceRule.getExpression());
    }

    if (destRule.lowerBoundary !== sourceRule.lowerBoundary) {
      destRule.lowerBoundary = sourceRule.lowerBoundary;
    }

    if (destRule.operator !== sourceRule.operator) {
      destRule.operator = sourceRule.operator;
    }

    if (destRule.upperBoundary !== sourceRule.upperBoundary) {
      destRule.upperBoundary = sourceRule.upperBoundary;
    }

    if (sourceRule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"] && destRule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      this.ngeoFeatureHelper_.clearNonSpatialProperties(destRule.feature);
      destRule.feature.setProperties(this.ngeoFeatureHelper_.getNonSpatialProperties(sourceRule.feature));
    }
  };

  _proto.serializeRules = function serializeRules(rules) {
    var _this = this;

    return rules.map(function (rule) {
      var serializedRule = _this.serializeRule(rule);

      return serializedRule;
    });
  };

  _proto.serializeRule = function serializeRule(rule) {
    var obj = {
      name: rule.name,
      propertyName: rule.propertyName,
      type: rule.type
    };

    if (rule.expression !== null) {
      obj.expression = rule.expression;
    }

    if (rule.lowerBoundary !== null) {
      obj.lowerBoundary = rule.lowerBoundary;
    }

    if (rule.operator !== null) {
      obj.operator = rule.operator;
    }

    if (rule.operators !== null) {
      obj.operators = rule.operators.slice(0);
    }

    if (rule.upperBoundary !== null) {
      obj.upperBoundary = rule.upperBoundary;
    }

    if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      var opt = obj;
      opt.featureProperties = this.ngeoFeatureHelper_.getNonSpatialProperties(rule.feature);
    }

    if (rule instanceof ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var _opt2 = obj;
      _opt2.choices = rule.choices;
    }

    return obj;
  };

  _proto.createFilter = function createFilter(options) {
    var dataSource = options.dataSource;
    var mainFilter = null;

    if (options.filter) {
      mainFilter = options.filter;
    } else {
      var rules = options.filterRules || dataSource.filterRules;
      var conditions = [];

      if (rules && rules.length) {
        for (var _iterator3 = _createForOfIteratorHelperLoose(rules), _step3; !(_step3 = _iterator3()).done;) {
          var rule = _step3.value;
          var filter = this.createFilterFromRule_(rule, dataSource, options.srsName);

          if (filter) {
            conditions.push(filter);
          }
        }
      }

      var condition = dataSource.filterCondition;

      if (conditions.length === 1) {
        mainFilter = conditions[0];
      } else if (conditions.length >= 2) {
        if (condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].AND) {
          mainFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["and"].apply(null, conditions);
        } else if (condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].OR || condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].NOT) {
          mainFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["or"].apply(null, conditions);
        }
      }

      if (mainFilter && condition === ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_1__["default"].NOT) {
        mainFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["not"](mainFilter);
      }
    }

    if (options.incTime) {
      var timeFilter = this.createTimeFilterFromDataSource_(dataSource);
      mainFilter = this.joinFilters(mainFilter, timeFilter);
    }

    if (options.incDimensions) {
      var dimensionsFilter = this.createDimensionsFilterFromDataSource_(dataSource);
      mainFilter = this.joinFilters(mainFilter, dimensionsFilter);
    }

    return mainFilter;
  };

  _proto.createFilterString = function createFilterString(options) {
    var filterString = null;
    var defaultWFSVersion = '1.1.0';
    var filter = this.createFilter(options);

    if (filter) {
      var filterNode = Object(ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_11__["writeFilter"])(filter, defaultWFSVersion);
      var xmlSerializer = new XMLSerializer();
      filterString = xmlSerializer.serializeToString(filterNode);
    }

    return filterString;
  };

  _proto.joinFilters = function joinFilters(filterA, filterB) {
    var filter = null;

    if (filterA && filterB) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["and"].apply(null, [filterA, filterB]);
    } else if (filterA) {
      filter = filterA;
    } else if (filterB) {
      filter = filterB;
    }

    return filter;
  };

  _proto.createFilterFromRule_ = function createFilterFromRule_(rule, dataSource, opt_srsName) {
    var filter = null;
    var value = rule.value;

    if (!value) {
      return null;
    }

    var expression = value.expression;
    var lowerBoundary = value.lowerBoundary;
    var operator = value.operator;
    var propertyName = value.propertyName;
    var upperBoundary = value.upperBoundary;
    var rot = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleOperatorType"];
    var rsot = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleSpatialOperatorType"];
    var rtot = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_8__["RuleTemporalOperatorType"];
    var spatialTypes = [rsot.CONTAINS, rsot.INTERSECTS, rsot.WITHIN];
    var numericTypes = [rot.GREATER_THAN, rot.GREATER_THAN_OR_EQUAL_TO, rot.LESSER_THAN, rot.LESSER_THAN_OR_EQUAL_TO];

    if (rule instanceof ngeo_rule_Date_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      var beginValue;
      var endValue;

      if (operator === rtot.DURING) {
        beginValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(lowerBoundary).format('YYYY-MM-DD');
        endValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(upperBoundary).format('YYYY-MM-DD');
      } else if (operator === rtot.EQUALS) {
        beginValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(expression).format('YYYY-MM-DD');
        endValue = beginValue;
      } else if (operator === rtot.BEGINS) {
        beginValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(expression).format('YYYY-MM-DD');
        endValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(expression).add(30, 'years').format('YYYY-MM-DD');
      } else if (operator === rtot.ENDS) {
        beginValue = '1970-01-01';
        endValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(expression).format('YYYY-MM-DD');
      }

      if (beginValue && endValue) {
        if (dataSource.ogcServerType == 'qgisserver') {
          filter = ngeo_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["dateBetween"](propertyName, beginValue, endValue);
        } else {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["during"](propertyName, beginValue, endValue);
        }
      }
    } else if (rule instanceof ngeo_rule_Select_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      var selectedChoices = rule.selectedChoices;

      if (selectedChoices.length === 1) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](propertyName, selectedChoices[0]);
      } else if (selectedChoices.length >= 2) {
        var conditions = [];

        for (var _iterator4 = _createForOfIteratorHelperLoose(selectedChoices), _step4; !(_step4 = _iterator4()).done;) {
          var selectedChoice = _step4.value;
          conditions.push(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](propertyName, selectedChoice));
        }

        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["or"].apply(null, conditions);
      }
    } else if (spatialTypes.includes(operator)) {
      var featureNames = dataSource.getFiltrableWFSLayerName();
      var geometryName = dataSource.geometryName(featureNames ? featureNames[0] : null);

      if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
        var geometry = rule.geometry;

        if (!geometry) {
          throw new Error('Missing geometry');
        }

        if (geometryName === null) {
          throw new Error('Missing geometryName');
        }

        if (operator === rsot.CONTAINS) {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["contains"](geometryName, geometry, opt_srsName);
        } else if (operator === rsot.INTERSECTS) {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["intersects"](geometryName, geometry, opt_srsName);
        } else if (operator === rsot.WITHIN) {
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["within"](geometryName, geometry, opt_srsName);
        }
      }
    } else if (numericTypes.includes(operator)) {
      if (typeof expression !== 'number') {
        throw new Error('Wrong expression type');
      }

      if (operator === rot.GREATER_THAN) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["greaterThan"](propertyName, expression);
      } else if (operator === rot.GREATER_THAN_OR_EQUAL_TO) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["greaterThanOrEqualTo"](propertyName, expression);
      } else if (operator === rot.LESSER_THAN) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["lessThan"](propertyName, expression);
      } else if (operator === rot.LESSER_THAN_OR_EQUAL_TO) {
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["lessThanOrEqualTo"](propertyName, expression);
      }
    } else if (operator === rot.BETWEEN) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["between"](propertyName, lowerBoundary, upperBoundary);
    } else if (operator === rot.EQUAL_TO) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](propertyName, expression);
    } else if (operator === rot.LIKE) {
      var stringExpression = String(expression).replace(/!/g, '!!').replace(/\./g, '!.').replace(/\*/g, '!*');
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["like"](propertyName, "*" + stringExpression + "*", '*', '.', '!', false);
    } else if (operator === rot.NOT_EQUAL_TO) {
      filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["notEqualTo"](propertyName, expression);
    }

    return filter;
  };

  _proto.createDimensionsFilterFromDataSource_ = function createDimensionsFilterFromDataSource_(dataSource) {
    var config = dataSource.dimensionsFiltersConfig || {};
    var dimensions = dataSource.dimensions;
    var conditions = [];

    for (var key in config) {
      var value = config[key].value;

      if (value === null) {
        var dimensionValue = dimensions[key];

        if (dimensionValue !== undefined && dimensionValue !== null) {
          value = dimensionValue;
        }
      }

      if (value !== null) {
        conditions.push(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["equalTo"](config[key].field, value, true));
      }
    }

    if (conditions.length === 1) {
      return conditions[0];
    } else if (conditions.length >= 2) {
      return ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["and"].apply(null, conditions);
    }

    return null;
  };

  _proto.createTimeFilterFromDataSource_ = function createTimeFilterFromDataSource_(dataSource) {
    var filter = null;
    var range = dataSource.timeRangeValue;
    var timeProperty = dataSource.timeProperty;
    var name = dataSource.timeAttributeName;

    if (range && timeProperty && name) {
      if (range.end !== undefined) {
        var values = this.ngeoWMSTime_.formatWMSTimeParam(timeProperty, range).split('/');
        filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["during"](name, values[0], values[1]);
      } else {
        var resolution = timeProperty.resolution || 'seconds';
        var value = this.ngeoWMSTime_.formatWMSTimeParam(timeProperty, range);
        var momentEnd;

        switch (resolution) {
          case 'year':
            momentEnd = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).add(1, 'years').subtract(1, 'seconds');
            break;

          case 'month':
            momentEnd = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).add(1, 'months').subtract(1, 'seconds');
            break;

          case 'day':
            momentEnd = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).add(1, 'days').subtract(1, 'seconds');
            break;

          default:
        }

        if (momentEnd) {
          var startValue = Object(moment__WEBPACK_IMPORTED_MODULE_13__["default"])(value).utc().format('YYYY-MM-DD HH:mm:ss');
          var endValue = momentEnd.utc().format('YYYY-MM-DD HH:mm:ss');
          filter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_12__["during"](name, startValue, endValue);
        }
      }
    }

    return filter;
  };

  return RuleHelper;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoRuleHelper', [ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]);
module.service('ngeoRuleHelper', RuleHelper);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/filter/component.html":
/*!***********************************!*\
  !*** ./src/filter/component.html ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="dropdown">\n  <button\n      class="btn btn-link dropdown-toggle ngeo-filter-condition-button"\n      ng-class="{disabled: $ctrl.aRuleIsActive}"\n      type="button"\n      data-toggle="dropdown"\n      ng-disabled="$ctrl.aRuleIsActive">\n    <span class="fa fa-cog"></span>\n  </button>\n  <ul class="dropdown-menu">\n    <li ng-repeat="condition in ::$ctrl.conditions">\n      <a\n          href\n          ng-click="$ctrl.setCondition(condition)">\n          <span\n              ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == $ctrl.datasource.filterCondition}"\n              class="fa fa-check ngeo-filter-condition-criteria">\n          </span>\n          <span>{{::condition.text | translate}}</span>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<ngeo-rule\n    ng-repeat="rule in $ctrl.directedRules"\n    feature-overlay="::$ctrl.featureOverlay"\n    class="ngeo-filter-rule-directed"\n    map="$ctrl.map"\n    rule="rule"\n    tool-group="$ctrl.toolGroup">\n</ngeo-rule>\n\n<hr class="ngeo-filter-separator-rules" />\n\n<div ng-repeat="rule in $ctrl.customRules">\n  <a\n      class="btn btn-sm btn-link ngeo-filter-rule-custom-rm-btn"\n      ng-click="!$ctrl.aRuleIsActive && $ctrl.removeCustomRule(rule)"\n      ng-disabled="$ctrl.aRuleIsActive"\n      href>\n    <span class="fa fa-times"></span>\n  </a>\n  <ngeo-rule\n      feature-overlay="::$ctrl.featureOverlay"\n      class="ngeo-filter-rule-custom"\n      map="$ctrl.map"\n      rule="rule"\n      tool-group="$ctrl.toolGroup">\n  </ngeo-rule>\n</div>\n\n<div class="dropdown">\n  <button\n      class="btn btn-link dropdown-toggle"\n      ng-class="{disabled: $ctrl.aRuleIsActive}"\n      type="button"\n      data-toggle="dropdown"\n      ng-disabled="$ctrl.aRuleIsActive">\n    <span translate>+ Add a new criteria</span>\n  </button>\n  <ul class="dropdown-menu">\n    <li ng-repeat="attribute in ::$ctrl.geometryAttributes">\n      <a\n          href\n          ng-click="$ctrl.createAndAddCustomRule(attribute)">\n          <span translate>Spatial filter</span>\n      </a>\n    </li>\n    <li role="presentation" class="divider"></li>\n    <li ng-repeat="attribute in ::$ctrl.otherAttributes">\n      <a\n          href\n          ng-click="$ctrl.createAndAddCustomRule(attribute)">\n          <span>{{::attribute.name | translate}}</span>\n      </a>\n    </li>\n  </ul>\n</div>\n\n<hr class="ngeo-filter-separator-criteria" />\n\n<button\n    class="btn btn-link"\n    type="button"\n    ng-click="$ctrl.apply()"\n    ng-disabled="$ctrl.datasource.visible === false">\n  <span class="fa fa-check"></span>\n  <span translate>Apply filter</span>\n</button>\n\n<button\n    class="btn btn-link"\n    type="button"\n    ng-click="$ctrl.getData()"\n    ng-disabled="$ctrl.datasource.visible === false">\n  <span class="fa fa-chevron-right"></span>\n  <span translate>Get data</span>\n</button>\n';

}
return __p
}

/***/ }),

/***/ "./src/filter/component.js":
/*!*********************************!*\
  !*** ./src/filter/component.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/filter/Condition.js */ "./src/filter/Condition.js");
/* harmony import */ var ngeo_filter_ruleComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/filter/ruleComponent.js */ "./src/filter/ruleComponent.js");
/* harmony import */ var ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/filter/RuleHelper.js */ "./src/filter/RuleHelper.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/rule/Geometry.js */ "./src/rule/Geometry.js");
/* harmony import */ var ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/map/FeatureOverlay.js */ "./src/map/FeatureOverlay.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/sass/font.scss */ "./src/sass/font.scss");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_10__);
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }












var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFilter', [ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_filter_ruleComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/filter', __webpack_require__(/*! ./component.html */ "./src/filter/component.html"));
}]);
module.value('ngeoFilterTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.ngeoFilterTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/filter';
});
ngeoFilterTemplateUrl.$inject = ["$attrs", "ngeoFilterTemplateUrl"];

function ngeoFilterTemplateUrl($attrs, ngeoFilterTemplateUrl) {
  return ngeoFilterTemplateUrl($attrs);
}

module.component('ngeoFilter', {
  bindings: {
    'aRuleIsActive': '=',
    'customRules': '<',
    'datasource': '<',
    'directedRules': '<',
    'featureOverlay': '<',
    'filterIsApplied': '=',
    'map': '<',
    'toolGroup': '<'
  },
  controller: 'ngeoFilterController',
  templateUrl: ngeoFilterTemplateUrl
});

var FilterController = function () {
  FilterController.$inject = ["gettextCatalog", "$scope", "$timeout", "ngeoMapQuerent", "ngeoRuleHelper"];

  function FilterController(gettextCatalog, $scope, $timeout, ngeoMapQuerent, ngeoRuleHelper) {
    this.aRuleIsActive = false;
    this.customRules = [];
    this.datasource = null;
    this.directedRules = [];
    this.featureOverlay = null;
    this.map = null;
    this.toolGroup = '';
    this.filterIsApplied = false;
    this.gettextCatalog_ = gettextCatalog;
    this.scope_ = $scope;
    this.timeout_ = $timeout;
    this.ngeoMapQuerent_ = ngeoMapQuerent;
    this.ngeoRuleHelper_ = ngeoRuleHelper;
    this.conditions = [{
      text: gettextCatalog.getString('Match all criteria'),
      value: ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__["default"].AND
    }, {
      text: gettextCatalog.getString('Match at least one criterion'),
      value: ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__["default"].OR
    }, {
      text: gettextCatalog.getString('Does not match any criterion'),
      value: ngeo_filter_Condition_js__WEBPACK_IMPORTED_MODULE_2__["default"].NOT
    }];
    this.geometryAttributes = [];
    this.otherAttributes = [];
    this.ruleUnlisteners_ = {};
  }

  var _proto = FilterController.prototype;

  _proto.$onInit = function $onInit() {
    var _this = this;

    if (!this.datasource) {
      throw new Error('Missing datasource');
    }

    this.scope_.$watch(function () {
      return _this.aRuleIsActive;
    }, this.handleARuleIsActiveChange_.bind(this));
    this.scope_.$watch(function () {
      return _this.datasource.filterRules;
    }, function () {
      _this.filterIsApplied = _this.hasARuleActive();
    });
    var attributes = this.datasource.attributes;

    for (var _iterator = _createForOfIteratorHelperLoose(attributes), _step; !(_step = _iterator()).done;) {
      var attribute = _step.value;

      if (attribute.type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_5__["default"].GEOMETRY) {
        this.geometryAttributes.push(attribute);
      } else {
        this.otherAttributes.push(attribute);
      }
    }

    for (var _iterator2 = _createForOfIteratorHelperLoose(this.customRules), _step2; !(_step2 = _iterator2()).done;) {
      var rule = _step2.value;
      this.registerRule_(rule);
    }

    for (var _iterator3 = _createForOfIteratorHelperLoose(this.directedRules), _step3; !(_step3 = _iterator3()).done;) {
      var _rule = _step3.value;
      this.registerRule_(_rule);
    }

    this.apply();
  };

  _proto.$onDestroy = function $onDestroy() {
    if (!this.datasource) {
      throw new Error('Missing datasource');
    }

    if (!this.featureOverlay) {
      throw new Error('Missing featureOverlay');
    }

    if (this.datasource.filterRules !== null) {
      this.datasource.filterRules = null;
    }

    this.featureOverlay.clear();
  };

  _proto.hasARuleActive = function hasARuleActive() {
    var customRuleActive = false;
    var directedRuleActive = false;

    for (var _iterator4 = _createForOfIteratorHelperLoose(this.customRules), _step4; !(_step4 = _iterator4()).done;) {
      var rule = _step4.value;

      if (rule.expression) {
        customRuleActive = true;
      }
    }

    for (var _iterator5 = _createForOfIteratorHelperLoose(this.directedRules), _step5; !(_step5 = _iterator5()).done;) {
      var _rule2 = _step5.value;

      if (_rule2.expression) {
        directedRuleActive = true;
      }
    }

    return customRuleActive || directedRuleActive;
  };

  _proto.apply = function apply() {
    var _this2 = this;

    if (!this.datasource) {
      throw new Error('Missing datasource');
    }

    this.datasource.filterRules = null;
    this.timeout_(function () {
      var filterRules = _this2.getRulesWithValue_();

      if (filterRules.length) {
        if (!_this2.datasource) {
          throw new Error('Missing datasource');
        }

        _this2.datasource.filterRules = filterRules;

        _this2.ngeoMapQuerent_.clear();
      }
    });
  };

  _proto.getData = function getData() {
    if (!this.datasource) {
      throw new Error('Missing datasource');
    }

    if (!this.map) {
      throw new Error('Missing map');
    }

    var filterRules = this.getRulesWithValue_();

    if (!filterRules.length) {
      return;
    }

    var dataSource = this.datasource;
    var limit = 1000;
    var map = this.map;
    var projCode = map.getView().getProjection().getCode();
    var filter = this.ngeoRuleHelper_.createFilter({
      dataSource: dataSource,
      filterRules: filterRules,
      srsName: projCode
    });

    if (!filter) {
      throw new Error('Missing filter');
    }

    this.ngeoMapQuerent_.issue({
      dataSources: [dataSource],
      filter: filter,
      limit: limit,
      map: map
    });
  };

  _proto.getRulesWithValue_ = function getRulesWithValue_() {
    var filterRules = [];

    for (var _iterator6 = _createForOfIteratorHelperLoose(this.customRules), _step6; !(_step6 = _iterator6()).done;) {
      var rule = _step6.value;

      if (rule.value) {
        filterRules.push(rule);
      }
    }

    for (var _iterator7 = _createForOfIteratorHelperLoose(this.directedRules), _step7; !(_step7 = _iterator7()).done;) {
      var _rule3 = _step7.value;

      if (_rule3.value) {
        filterRules.push(_rule3);
      }
    }

    return filterRules;
  };

  _proto.createAndAddCustomRule = function createAndAddCustomRule(attribute) {
    var rule = this.ngeoRuleHelper_.createRuleFromAttribute(attribute, true);
    this.registerRule_(rule);
    this.customRules.push(rule);
    this.timeout_(function () {
      rule.active = true;
    }, 1);
  };

  _proto.setCondition = function setCondition(condition) {
    if (!this.datasource) {
      throw new Error('Missing datasource');
    }

    if (this.datasource.filterCondition !== condition.value) {
      this.datasource.filterCondition = condition.value;
    }
  };

  _proto.removeCustomRule = function removeCustomRule(rule) {
    var _this3 = this;

    rule.active = false;
    this.timeout_(function () {
      Object(ol_array_js__WEBPACK_IMPORTED_MODULE_9__["remove"])(_this3.customRules, rule);

      _this3.unregisterRule_(rule);

      rule.destroy();
    });
  };

  _proto.registerRule_ = function registerRule_(rule) {
    if (!this.featureOverlay) {
      throw new Error('Missing featureOverlay');
    }

    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_8__["getUid"])(rule);
    this.ruleUnlisteners_[uid] = this.scope_.$watch(function () {
      return rule.active;
    }, this.handleRuleActiveChange_.bind(this));

    if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      this.featureOverlay.addFeature(rule.feature);
    }
  };

  _proto.unregisterRule_ = function unregisterRule_(rule) {
    if (!this.featureOverlay) {
      throw new Error('Missing featureOverlay');
    }

    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_8__["getUid"])(rule);
    var unlistener = this.ruleUnlisteners_[uid];
    console.assert(unlistener);
    unlistener();
    delete this.ruleUnlisteners_[uid];

    if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      this.featureOverlay.removeFeature(rule.feature);
    }
  };

  _proto.handleRuleActiveChange_ = function handleRuleActiveChange_() {
    var aRuleIsActive = false;

    for (var _iterator8 = _createForOfIteratorHelperLoose(this.customRules), _step8; !(_step8 = _iterator8()).done;) {
      var rule = _step8.value;

      if (rule.active) {
        aRuleIsActive = true;
        break;
      }
    }

    for (var _iterator9 = _createForOfIteratorHelperLoose(this.directedRules), _step9; !(_step9 = _iterator9()).done;) {
      var _rule4 = _step9.value;

      if (_rule4.active) {
        aRuleIsActive = true;
        break;
      }
    }

    this.aRuleIsActive = aRuleIsActive;
  };

  _proto.handleARuleIsActiveChange_ = function handleARuleIsActiveChange_() {
    if (this.aRuleIsActive) {
      return;
    }

    for (var _iterator10 = _createForOfIteratorHelperLoose(this.customRules), _step10; !(_step10 = _iterator10()).done;) {
      var rule = _step10.value;

      if (rule.active) {
        rule.active = false;
        break;
      }
    }

    for (var _iterator11 = _createForOfIteratorHelperLoose(this.directedRules), _step11; !(_step11 = _iterator11()).done;) {
      var _rule5 = _step11.value;

      if (_rule5.active) {
        _rule5.active = false;
        break;
      }
    }
  };

  return FilterController;
}();

module.controller('ngeoFilterController', FilterController);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/filter/module.js":
/*!******************************!*\
  !*** ./src/filter/module.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_filter_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/filter/component.js */ "./src/filter/component.js");
/* harmony import */ var ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/filter/RuleHelper.js */ "./src/filter/RuleHelper.js");
/* harmony import */ var ngeo_filter_ruleComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/filter/ruleComponent.js */ "./src/filter/ruleComponent.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFilterModule', [ngeo_filter_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_filter_ruleComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./src/filter/ruleComponent.js":
/*!*************************************!*\
  !*** ./src/filter/ruleComponent.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_Menu_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/Menu.js */ "./src/Menu.js");
/* harmony import */ var ngeo_draw_component_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/draw/component.js */ "./src/draw/component.js");
/* harmony import */ var ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/filter/RuleHelper.js */ "./src/filter/RuleHelper.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_Modify_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/interaction/Modify.js */ "./src/interaction/Modify.js");
/* harmony import */ var ngeo_interaction_Rotate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/interaction/Rotate.js */ "./src/interaction/Rotate.js");
/* harmony import */ var ngeo_interaction_Translate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/interaction/Translate.js */ "./src/interaction/Translate.js");
/* harmony import */ var ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/map/FeatureOverlay.js */ "./src/map/FeatureOverlay.js");
/* harmony import */ var ngeo_misc_datepickerComponent_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/misc/datepickerComponent.js */ "./src/misc/datepickerComponent.js");
/* harmony import */ var ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/misc/decorate.js */ "./src/misc/decorate.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngeo/misc/ToolActivate.js */ "./src/misc/ToolActivate.js");
/* harmony import */ var ngeo_misc_ToolActivateMgr_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngeo/misc/ToolActivateMgr.js */ "./src/misc/ToolActivateMgr.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
/* harmony import */ var ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ngeo/rule/Geometry.js */ "./src/rule/Geometry.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
/* harmony import */ var ol_style_Text_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ol/style/Text.js */ "./node_modules/ol/style/Text.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ngeo/sass/font.scss */ "./src/sass/font.scss");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_24__);


























var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoRule', [ngeo_draw_component_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, ngeo_misc_datepickerComponent_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_12__["default"].name, ngeo_misc_ToolActivateMgr_js__WEBPACK_IMPORTED_MODULE_14__["default"].name]);
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/filter/rulecomponent', __webpack_require__(/*! ./rulecomponent.html */ "./src/filter/rulecomponent.html"));
}]);
module.value('ngeoRuleTemplateUrl', function ($attrs) {
  var templateUrl = $attrs['ngeoRuleTemplateUrl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/filter/rulecomponent';
});
ngeoRuleTemplateUrl.$inject = ["$attrs", "ngeoRuleTemplateUrl"];

function ngeoRuleTemplateUrl($attrs, ngeoRuleTemplateUrl) {
  return ngeoRuleTemplateUrl($attrs);
}

var RuleController = function () {
  RuleController.$inject = ["gettextCatalog", "$scope", "$timeout", "ngeoFeatureHelper", "ngeoRuleHelper", "ngeoToolActivateMgr"];

  function RuleController(gettextCatalog, $scope, $timeout, ngeoFeatureHelper, ngeoRuleHelper, ngeoToolActivateMgr) {
    var _this$operators, _this$operatorsShortF;

    this.featureOverlay = null;
    this.map = null;
    this.rule = null;
    this.toolGroup = '';
    this.gettextCatalog_ = gettextCatalog;
    this.scope_ = $scope;
    this.timeout_ = $timeout;
    this.ngeoFeatureHelper_ = ngeoFeatureHelper;
    this.ngeoRuleHelper_ = ngeoRuleHelper;
    this.ngeoToolActivateMgr_ = ngeoToolActivateMgr;
    this.clone = null;
    var operatorType = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_15__["RuleOperatorType"];
    var spatialOperatorType = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_15__["RuleSpatialOperatorType"];
    var temporalOperatorType = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_15__["RuleTemporalOperatorType"];
    this.operators = (_this$operators = {}, _this$operators[operatorType.EQUAL_TO] = gettextCatalog.getString('Is equal to'), _this$operators[operatorType.GREATER_THAN] = gettextCatalog.getString('Is greater than'), _this$operators[operatorType.GREATER_THAN_OR_EQUAL_TO] = gettextCatalog.getString('Is greater than or equal to'), _this$operators[operatorType.LESSER_THAN] = gettextCatalog.getString('Is lesser than'), _this$operators[operatorType.LESSER_THAN_OR_EQUAL_TO] = gettextCatalog.getString('Is lesser than or equal to'), _this$operators[operatorType.NOT_EQUAL_TO] = gettextCatalog.getString('Is not equal to'), _this$operators[operatorType.LIKE] = gettextCatalog.getString('Contains'), _this$operators[spatialOperatorType.CONTAINS] = gettextCatalog.getString('Contains'), _this$operators[spatialOperatorType.INTERSECTS] = gettextCatalog.getString('Intersects'), _this$operators[spatialOperatorType.WITHIN] = gettextCatalog.getString('Is inside of'), _this$operators[temporalOperatorType.BEGINS] = gettextCatalog.getString('Begins at'), _this$operators[temporalOperatorType.DURING] = gettextCatalog.getString('During'), _this$operators[temporalOperatorType.ENDS] = gettextCatalog.getString('Ends at'), _this$operators[temporalOperatorType.EQUALS] = gettextCatalog.getString('Is equal to'), _this$operators);
    this.operatorsShortFormat = (_this$operatorsShortF = {}, _this$operatorsShortF[operatorType.EQUAL_TO] = '=', _this$operatorsShortF[operatorType.GREATER_THAN] = '>', _this$operatorsShortF[operatorType.GREATER_THAN_OR_EQUAL_TO] = '>=', _this$operatorsShortF[operatorType.LESSER_THAN] = '<', _this$operatorsShortF[operatorType.LESSER_THAN_OR_EQUAL_TO] = '<=', _this$operatorsShortF[operatorType.NOT_EQUAL_TO] = '!=', _this$operatorsShortF[operatorType.LIKE] = '~', _this$operatorsShortF[temporalOperatorType.BEGINS] = '>=', _this$operatorsShortF[temporalOperatorType.ENDS] = '<=', _this$operatorsShortF[temporalOperatorType.EQUALS] = '=', _this$operatorsShortF);
    this.timeRangeMode = {
      widget: 'datepicker',
      maxValue: null,
      minValue: null,
      maxDefValue: this.createDate_(),
      minDefValue: this.createWeekAgoDate_(),
      mode: 'range',
      interval: [0, 1, 0, 0]
    };
    this.timeValueMode = {
      widget: 'datepicker',
      maxValue: null,
      minValue: null,
      maxDefValue: this.createDate_(),
      minDefValue: this.createDate_(),
      mode: 'value',
      interval: [0, 1, 0, 0]
    };
    this.toolActivate_ = null;
    this.unlisteners_ = [];
    this.drawActive = false;
    this.drawToolActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_13__["default"](this, 'drawActive');
    this.drawnFeatures = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__["default"]();
    this.menu_ = null;
    this.selectedFeatures = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__["default"]();
    this.interactions_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__["default"]();
    this.modify_ = new ngeo_interaction_Modify_js__WEBPACK_IMPORTED_MODULE_6__["default"]({
      features: this.selectedFeatures,
      style: ngeoFeatureHelper.getVertexStyle(false),
      nbPoints: 32
    });
    this.interactions_.push(this.modify_);
    this.rotate_ = new ngeo_interaction_Rotate_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      features: this.selectedFeatures,
      style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
        text: new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_21__["default"]({
          text: "\uF01E",
          font: '900 18px "Font Awesome 5 Free"',
          fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
            color: '#7a7a7a'
          })
        })
      })
    });
    this.interactions_.push(this.rotate_);
    this.translate_ = new ngeo_interaction_Translate_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
      features: this.selectedFeatures,
      style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
        text: new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_21__["default"]({
          text: "\uF0B2",
          font: '900 18px "Font Awesome 5 Free"',
          fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
            color: '#7a7a7a'
          })
        })
      })
    });
    this.interactions_.push(this.translate_);
    this.listenerKeys_ = [];
    this.initializeInteractions_();
    this.modifyToolActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.modify_, 'active');
    this.rotateToolActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.rotate_, 'active');
    this.translateToolActivate = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.translate_, 'active');
    this.geomType = null;
    this.listenerKeys_ = [];
  }

  var _proto = RuleController.prototype;

  _proto.$onInit = function $onInit() {
    var _this = this;

    if (!this.rule) {
      throw new Error('Missing rule');
    }

    this.clone = this.ngeoRuleHelper_.cloneRule(this.rule);
    this.toolActivate_ = new ngeo_misc_ToolActivate_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.rule, 'active');
    this.ngeoToolActivateMgr_.registerTool(this.toolGroup, this.toolActivate_);
    this.scope_.$watch(function () {
      if (!_this.rule) {
        throw new Error('Missing rule');
      }

      return _this.rule.active;
    }, this.handleActiveChange_.bind(this));

    if (this.clone.type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__["default"].DATE || this.clone.type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__["default"].DATETIME) {
      this.unlisteners_.push(this.scope_.$watch(function () {
        if (!_this.clone) {
          throw new Error('Missing clone');
        }

        return _this.clone.getExpression();
      }, function (newVal) {
        if (typeof newVal == 'string') {
          _this.timeValueMode.minDefValue = newVal || _this.createDate_();
        }
      }));
      this.unlisteners_.push(this.scope_.$watch(function () {
        if (!_this.clone) {
          throw new Error('Missing clone');
        }

        return _this.clone.lowerBoundary;
      }, function (newVal) {
        if (typeof newVal == 'string') {
          _this.timeRangeMode.minDefValue = newVal || _this.createWeekAgoDate_();
        }
      }));
      this.unlisteners_.push(this.scope_.$watch(function () {
        if (!_this.clone) {
          throw new Error('Missing clone');
        }

        return _this.clone.upperBoundary;
      }, function (newVal) {
        if (typeof newVal == 'string') {
          _this.timeRangeMode.maxDefValue = newVal || _this.createDate_();
        }
      }));
    } else if (this.clone.type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_4__["default"].GEOMETRY) {
      this.unlisteners_.push(this.scope_.$watch(function () {
        if (!_this.clone) {
          throw new Error('Missing clone');
        }

        return _this.clone.operator;
      }, function (newVal) {
        _this.drawActive = false;

        if (newVal && newVal === ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_15__["RuleSpatialOperatorType"].CONTAINS) {
          var clone = _this.clone;

          if (clone instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) {
            var geometry = clone.feature.getGeometry();

            if (geometry) {
              var geomType = _this.ngeoFeatureHelper_.getType(clone.feature);

              var supportedTypes = [ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].CIRCLE, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].RECTANGLE];

              if (!supportedTypes.includes(geomType)) {
                if (!_this.clone) {
                  throw new Error('Missing clone');
                }

                _this.clone.setExpression(null);
              }
            }
          }
        }
      }));
      this.unlisteners_.push(this.scope_.$watch(function () {
        if (!_this.clone) {
          throw new Error('Missing clone');
        }

        return _this.clone.expression;
      }, function (newVal) {
        if (newVal) {
          var clone = _this.clone;

          if (clone instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) {
            _this.geomType = _this.ngeoFeatureHelper_.getType(clone.feature);
          }
        } else {
          _this.geomType = null;
        }
      }));
      this.unlisteners_.push(this.scope_.$watch(function () {
        if (!_this.clone) {
          throw new Error('Missing clone');
        }

        if (!_this.rule) {
          throw new Error('Missing rule');
        }

        var hasExpression = _this.clone.getExpression() !== null;
        var isActive = _this.rule.active === true;

        var editToolIsActive = _this.modify_.getActive() || _this.rotate_.getActive() || _this.translate_.getActive();

        return hasExpression && isActive && editToolIsActive;
      }, function (newVal) {
        if (newVal) {
          var clone = _this.clone;

          if (clone instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) {
            _this.selectedFeatures.push(clone.feature);
          }
        } else {
          _this.selectedFeatures.clear();
        }
      }));
    }
  };

  _proto.$onDestroy = function $onDestroy() {
    if (!this.clone) {
      throw new Error('Missing clone');
    }

    if (!this.rule) {
      throw new Error('Missing rule');
    }

    if (!this.toolActivate_) {
      throw new Error('Missing toolActivate');
    }

    if (this.rule.active) {
      this.rule.active = false;
      this.handleActiveChange_(false, true);
    }

    this.ngeoToolActivateMgr_.unregisterTool(this.toolGroup, this.toolActivate_);

    for (var i = 0, ii = this.unlisteners_.length; i < ii; i++) {
      this.unlisteners_[i]();
    }

    this.unlisteners_.length = 0;
    this.clone.destroy();
  };

  _proto.toggle = function toggle() {
    if (!this.rule) {
      throw new Error('Missing rule');
    }

    if (this.rule.active) {
      this.cancel();
    } else {
      this.rule.active = true;
    }
  };

  _proto.apply = function apply() {
    if (!this.clone) {
      throw new Error('Missing clone');
    }

    if (!this.rule) {
      throw new Error('Missing rule');
    }

    this.ngeoRuleHelper_.extendRule(this.clone, this.rule);
    this.rule.active = false;
  };

  _proto.cancel = function cancel() {
    if (!this.rule) {
      throw new Error('Missing rule');
    }

    if (!this.clone) {
      throw new Error('Missing clone');
    }

    this.ngeoRuleHelper_.extendRule(this.rule, this.clone);
    this.rule.active = false;
  };

  _proto.reset = function reset() {
    if (!this.rule) {
      throw new Error('Missing rule');
    }

    if (!this.clone) {
      throw new Error('Missing clone');
    }

    this.clone.reset();
    this.rule.reset();
  };

  _proto.toggleChoiceSelection = function toggleChoiceSelection(choice) {
    if (!this.clone) {
      throw new Error('Missing clone');
    }

    var rule = this.clone;
    var choices = rule.getExpression() ? rule.getExpression().split(',') : [];
    var idx = choices.indexOf(choice);

    if (idx > -1) {
      choices.splice(idx, 1);
    } else {
      choices.push(choice);
    }

    rule.setExpression(choices.length ? choices.join(',') : null);
  };

  _proto.onDateSelected = function onDateSelected(date) {
    if (!this.clone) {
      throw new Error('Missing clone');
    }

    this.clone.setExpression(date.start);
  };

  _proto.onDateRangeSelected = function onDateRangeSelected(date) {
    if (!this.clone) {
      throw new Error('Missing clone');
    }

    this.clone.lowerBoundary = date.start;
    this.clone.upperBoundary = date.end;
  };

  _proto.createDate_ = function createDate_(opt_timeDelta) {
    var date = new Date();

    if (opt_timeDelta !== undefined) {
      var time = date.getTime() - opt_timeDelta;
      date.setTime(time);
    }

    return date.toISOString();
  };

  _proto.createWeekAgoDate_ = function createWeekAgoDate_() {
    return this.createDate_(1000 * 60 * 60 * 24 * 7);
  };

  _proto.timeToDate = function timeToDate(time) {
    var date = new Date(time);
    return date.toLocaleDateString();
  };

  _proto.handleActiveChange_ = function handleActiveChange_(active, oldActive) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    if (!this.featureOverlay) {
      throw new Error('Missing featureOverlay');
    }

    if (!(this.rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) || !(this.clone instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) || active === oldActive) {
      return;
    }

    var keys = this.listenerKeys_;
    var uid = ['ngeo-rule-', Object(ol_util_js__WEBPACK_IMPORTED_MODULE_17__["getUid"])(this)].join('-');
    var toolMgr = this.ngeoToolActivateMgr_;
    var ruleFeature = this.rule.feature;
    var cloneFeature = this.clone.feature;
    var mapDiv = this.map.getViewport();
    console.assert(mapDiv);

    if (active) {
      keys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["listen"])(this.drawnFeatures, 'add', this.handleFeaturesAdd_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["listen"])(mapDiv, 'contextmenu', this.handleMapContextMenu_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["listen"])(this.translate_, 'translateend', this.handleTranslateEnd_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["listen"])(this.rotate_, 'rotateend', this.handleRotateEnd_, this));
      this.featureOverlay.removeFeature(ruleFeature);
      this.featureOverlay.addFeature(cloneFeature);
      this.registerInteractions_();
      toolMgr.registerTool(uid, this.drawToolActivate, false);
      toolMgr.registerTool(uid, this.modifyToolActivate, true);
      toolMgr.registerTool(uid, this.rotateToolActivate, false);
      toolMgr.registerTool(uid, this.translateToolActivate, false);
      this.modify_.setActive(true);

      if (cloneFeature.getGeometry()) {
        this.ngeoFeatureHelper_.setStyle(cloneFeature, true);
      }
    } else {
      cloneFeature.setStyle(null);
      keys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["unlistenByKey"]);
      keys.length = 0;
      this.drawActive = false;
      toolMgr.unregisterTool(uid, this.drawToolActivate);
      toolMgr.unregisterTool(uid, this.modifyToolActivate);
      toolMgr.unregisterTool(uid, this.rotateToolActivate);
      toolMgr.unregisterTool(uid, this.translateToolActivate);
      this.modify_.setActive(false);
      this.unregisterInteractions_();

      if (this.selectedFeatures.getLength()) {
        this.featureOverlay.removeFeature(cloneFeature);
      }

      this.featureOverlay.addFeature(ruleFeature);
      this.selectedFeatures.clear();
    }
  };

  _proto.initializeInteractions_ = function initializeInteractions_() {
    this.interactions_.forEach(function (interaction) {
      interaction.setActive(false);
      Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_11__["interactionDecoration"])(interaction);
    });
  };

  _proto.registerInteractions_ = function registerInteractions_() {
    var _this2 = this;

    this.interactions_.forEach(function (interaction) {
      if (!_this2.map) {
        throw new Error('Missing map');
      }

      _this2.map.addInteraction(interaction);
    });
  };

  _proto.unregisterInteractions_ = function unregisterInteractions_() {
    var _this3 = this;

    this.interactions_.forEach(function (interaction) {
      if (!_this3.map) {
        throw new Error('Missing map');
      }

      _this3.map.removeInteraction(interaction);
    });
  };

  _proto.handleFeaturesAdd_ = function handleFeaturesAdd_(evt) {
    var _this4 = this;

    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__["CollectionEvent"]) {
      this.timeout_(function () {
        var clone = _this4.clone;

        if (clone instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) {
          var feature = clone.feature;
          var drawnFeature = evt.element;
          var geometry = drawnFeature.getGeometry();
          clone.geometry = geometry;
          _this4.drawActive = false;

          var properties = _this4.ngeoFeatureHelper_.getNonSpatialProperties(drawnFeature);

          _this4.ngeoFeatureHelper_.clearNonSpatialProperties(feature);

          feature.setProperties(properties);

          _this4.ngeoFeatureHelper_.setStyle(feature, true);

          _this4.scope_.$apply();
        }
      });
    }
  };

  _proto.getRuleGeometryType = function getRuleGeometryType() {
    var rule = this.rule;

    if (rule instanceof ngeo_rule_Geometry_js__WEBPACK_IMPORTED_MODULE_16__["default"]) {
      return this.ngeoFeatureHelper_.getType(rule.feature);
    }

    return null;
  };

  _proto.handleMapContextMenu_ = function handleMapContextMenu_(evt) {
    var _this5 = this;

    if (evt instanceof UIEvent) {
      if (!this.map) {
        throw new Error('Missing map');
      }

      this.removeMenu_();
      var pixel = this.map.getEventPixel(evt);
      var coordinate = this.map.getCoordinateFromPixel(pixel);
      var feature = this.map.forEachFeatureAtPixel(pixel, function (feature) {
        var ret = null;

        if (!(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_23__["default"])) {
          throw new Error('Wrong feature type');
        }

        if (_this5.selectedFeatures.getArray().includes(feature)) {
          ret = feature;
        }

        if (!ret) {
          throw new Error('Missing feature');
        }

        return ret;
      });
      var actions = [];

      if (feature) {
        var type = this.ngeoFeatureHelper_.getType(feature);
        var gettextCatalog = this.gettextCatalog_;

        if (type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].CIRCLE || type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].LINE_STRING || type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].POLYGON || type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].RECTANGLE) {
          actions.push({
            cls: 'fas fa-arrows-alt',
            label: gettextCatalog.getString('Move'),
            name: 'move'
          });
        }

        if (type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].LINE_STRING || type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].POLYGON || type == ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_5__["default"].RECTANGLE) {
          actions.push({
            cls: 'fas fa-undo fa-flip-horizontal',
            label: gettextCatalog.getString('Rotate'),
            name: 'rotate'
          });
        }
      }

      if (actions.length) {
        this.menu_ = new ngeo_Menu_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
          actions: actions
        });
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["listen"])(this.menu_, 'actionclick', this.handleMenuActionClick_, this));
        this.map.addOverlay(this.menu_);
        this.menu_.open(coordinate);
        evt.preventDefault();
        evt.stopPropagation();
        this.scope_.$apply();
      }
    }
  };

  _proto.removeMenu_ = function removeMenu_() {
    if (this.menu_) {
      if (!this.map) {
        throw new Error('Missing map');
      }

      this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_19__["unlistenByKey"]);
      this.map.removeOverlay(this.menu_);
      this.menu_ = null;
    }
  };

  _proto.handleMenuActionClick_ = function handleMenuActionClick_(evt) {
    var action = evt.detail.action;

    switch (action) {
      case 'move':
        this.translate_.setActive(true);
        this.scope_.$apply();
        break;

      case 'rotate':
        this.rotate_.setActive(true);
        this.scope_.$apply();
        break;

      default:
        console.log("FIXME - support: " + action);
        break;
    }
  };

  _proto.handleRotateEnd_ = function handleRotateEnd_(evt) {
    this.rotate_.setActive(false);
    this.scope_.$apply();
  };

  _proto.handleTranslateEnd_ = function handleTranslateEnd_(evt) {
    this.translate_.setActive(false);
    this.scope_.$apply();
  };

  return RuleController;
}();

module.component('ngeoRule', {
  bindings: {
    'featureOverlay': '<',
    'map': '<',
    'rule': '<',
    'toolGroup': '<'
  },
  controller: RuleController,
  templateUrl: ngeoRuleTemplateUrl
});
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/filter/rulecomponent.html":
/*!***************************************!*\
  !*** ./src/filter/rulecomponent.html ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="dropdown">\n  <button\n      class="btn btn-default btn-sm btn-block dropdown-toggle"\n      type="button"\n      data-toggle="dropdown"\n      ng-click="$ctrl.toggle()">\n    <span>{{ ::$ctrl.clone.name | translate }}</span>\n  </button>\n  <div\n    class="dropdown-menu form-group"\n    ng-class="{show: $ctrl.rule.active}">\n\n    <select\n        class="form-control ngeo-rule-operators-list"\n        ng-if="::$ctrl.clone.operators"\n        ng-model="$ctrl.clone.operator"\n        ng-options="$ctrl.operators[operator] | translate for operator in ::$ctrl.clone.operators track by operator">\n    </select>\n\n    <div ng-switch="::$ctrl.clone.type">\n\n      <div\n          class="ngeo-rule-type-date form-group"\n          ng-if="$ctrl.rule.active"\n          ng-switch-when="date|datetime"\n          ng-switch-when-separator="|">\n        <div ng-switch="$ctrl.clone.operator">\n          <div ng-switch-when="..|time_during" ng-switch-when-separator="|">\n            <ngeo-date-picker\n                time="$ctrl.timeRangeMode"\n                on-date-selected="$ctrl.onDateRangeSelected(time)">\n            </ngeo-date-picker>\n          </div>\n          <div ng-switch-default>\n            <ngeo-date-picker\n                time="$ctrl.timeValueMode"\n                on-date-selected="$ctrl.onDateSelected(time)">\n            </ngeo-date-picker>\n          </div>\n        </div>\n      </div>\n\n      <div\n          class="ngeo-rule-type-geometry form-group"\n          ng-switch-when="geometry">\n        <div ng-switch="$ctrl.geomType">\n          <span\n              ng-switch-when="Point">\n          ' +
((__t = (__webpack_require__(/*! gmf/icons/point.svg */ "./contribs/gmf/src/icons/point.svg"))) == null ? '' : __t) +
'\n          </span>\n          <span\n              ng-switch-when="LineString">\n          ' +
((__t = (__webpack_require__(/*! gmf/icons/line.svg */ "./contribs/gmf/src/icons/line.svg"))) == null ? '' : __t) +
'\n          </span>\n          <span\n              ng-switch-when="Polygon">\n          ' +
((__t = (__webpack_require__(/*! gmf/icons/polygon.svg */ "./contribs/gmf/src/icons/polygon.svg"))) == null ? '' : __t) +
'\n          </span>\n          <span\n              ng-switch-when="Circle">\n          ' +
((__t = (__webpack_require__(/*! gmf/icons/circle.svg */ "./contribs/gmf/src/icons/circle.svg"))) == null ? '' : __t) +
'\n          </span>\n          <span\n              ng-switch-when="Rectangle">\n          ' +
((__t = (__webpack_require__(/*! gmf/icons/rectangle.svg */ "./contribs/gmf/src/icons/rectangle.svg"))) == null ? '' : __t) +
'\n          </span>\n        </div>\n        <ngeo-drawfeature\n            ngeo-drawfeature-active="$ctrl.drawActive"\n            ngeo-drawfeature-features="$ctrl.drawnFeatures"\n            ngeo-drawfeature-map="$ctrl.map">\n          <div\n              ngeo-btn-group\n              class="btn-group">\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a point on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-drawpoint\n                class="btn btn-sm btn-default ngeo-drawfeature-point"\n                ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1"\n                ng-class="{active: dfCtrl.drawPoint.active}"\n                ng-model="dfCtrl.drawPoint.active">\n                ' +
((__t = (__webpack_require__(/*! gmf/icons/point.svg */ "./contribs/gmf/src/icons/point.svg"))) == null ? '' : __t) +
'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a line on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-measurelength\n                class="btn btn-sm btn-default ngeo-drawfeature-linestring"\n                ng-show="[\'intersects\', \'within\'].indexOf($ctrl.clone.operator) !== -1"\n                ng-class="{active: dfCtrl.measureLength.active}"\n                ng-model="dfCtrl.measureLength.active">\n                ' +
((__t = (__webpack_require__(/*! gmf/icons/line.svg */ "./contribs/gmf/src/icons/line.svg"))) == null ? '' : __t) +
'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a polygon on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-measurearea\n                class="btn btn-sm btn-default ngeo-drawfeature-polygon"\n                ng-class="{active: dfCtrl.measureArea.active}"\n                ng-model="dfCtrl.measureArea.active">\n                ' +
((__t = (__webpack_require__(/*! gmf/icons/polygon.svg */ "./contribs/gmf/src/icons/polygon.svg"))) == null ? '' : __t) +
'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a circle on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-measureazimut\n                ngeo-measureazimut-nbpoints="32"\n                class="btn btn-sm btn-default ngeo-drawfeature-circle"\n                ng-class="{active: dfCtrl.measureAzimut.active}"\n                ng-model="dfCtrl.measureAzimut.active">\n                ' +
((__t = (__webpack_require__(/*! gmf/icons/circle.svg */ "./contribs/gmf/src/icons/circle.svg"))) == null ? '' : __t) +
'\n              </a>\n              <a\n                data-toggle="tooltip"\n                title="{{\'Draw a rectangle on the map\' | translate}}"\n                href\n                ngeo-btn\n                ngeo-drawrectangle\n                class="btn btn-sm btn-default ngeo-drawfeature-rectangle"\n                ng-class="{active: dfCtrl.drawRectangle.active}"\n                ng-model="dfCtrl.drawRectangle.active">\n                ' +
((__t = (__webpack_require__(/*! gmf/icons/rectangle.svg */ "./contribs/gmf/src/icons/rectangle.svg"))) == null ? '' : __t) +
'\n              </a>\n          </div>\n\n          <div\n              class="ngeo-rule-type-geometry-instructions"\n              ng-if="$ctrl.drawActive">\n            <span ng-if="dfCtrl.drawPoint.active">\n              {{ \'Draw a point on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.measureLength.active">\n              {{ \'Draw a line string on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.measureArea.active">\n              {{ \'Draw a polygon on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.measureAzimut.active">\n              {{ \'Draw a circle on the map.\' | translate }}\n            </span>\n            <span ng-if="dfCtrl.drawRectangle.active">\n              {{ \'Draw a rectangle on the map.\' | translate }}\n            </span>\n          </div>\n        </ngeo-drawfeature>\n      </div>\n\n      <div\n          class="checkbox ngeo-rule-type-select"\n          ng-switch-when="select">\n        <a\n            ng-click="$ctrl.selectAllChoices()"\n            href>{{ All | translate}}\n        </a>\n        <label\n            class="form-group ol-unselectable"\n            ng-repeat="choice in ::$ctrl.clone.choices">\n          <input\n              ng-checked="$ctrl.clone.getExpression() && $ctrl.clone.getExpression().split(\',\').indexOf(choice) > -1"\n              ng-click="$ctrl.toggleChoiceSelection(choice)"\n              type="checkbox"\n              value="choice" />\n          <span>{{ choice | translate }}</span>\n        </label>\n\n      </div>\n\n      <div\n          class="form-group ngeo-rule-type-text"\n          ng-switch-default>\n        <div ng-switch="$ctrl.clone.operator">\n          <div ng-switch-when="..">\n            <input\n                type="number"\n                class="form-control"\n                ng-model="$ctrl.clone.lowerBoundary"/>\n            <input\n                type="number"\n                class="form-control"\n                ng-model="$ctrl.clone.upperBoundary"/>\n          </div>\n          <div ng-switch-default>\n            <input\n                type="number"\n                class="form-control"\n                ng-if="$ctrl.clone.type === \'number\'"\n                ng-model="$ctrl.clone.expression"/>\n            <input\n                type="text"\n                class="form-control"\n                ng-if="$ctrl.clone.type !== \'number\'"\n                ng-model="$ctrl.clone.expression"/>\n          </div>\n        </div>\n      </div>\n\n      <div class="ngeo-rule-btns">\n        <button\n            class="btn btn-sm btn-default"\n            ng-click="$ctrl.apply()"\n            type="button">{{\'Apply\' | translate}}</button>\n        <button\n            class="btn btn-sm btn-default"\n            ng-click="$ctrl.cancel()"\n            type="button">{{\'Cancel\' | translate}}</button>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n\n<div\n    class="ngeo-rule-value"\n    ng-if="$ctrl.rule.value !== null">\n\n  <a\n      class="btn btn-sm btn-link"\n      ng-click="!$ctrl.rule.active && $ctrl.reset()"\n      ng-disabled="$ctrl.rule.active"\n      href>\n    <span class="fa fa-times"></span>\n  </a>\n\n  <div ng-switch="::$ctrl.rule.type">\n\n    <div\n        ng-switch-when="date|datetime"\n        ng-switch-when-separator="|">\n      <div ng-switch="$ctrl.rule.operator">\n        <div ng-switch-when="..|time_during" ng-switch-when-separator="|">\n          <span translate>From </span>\n          <span>{{ $ctrl.timeToDate($ctrl.rule.lowerBoundary) }}</span>\n          <span translate> to </span>\n          <span>{{ $ctrl.timeToDate($ctrl.rule.upperBoundary) }}</span>\n        </div>\n        <div ng-switch-default>\n          <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span>\n          <span>{{ $ctrl.timeToDate($ctrl.rule.getExpression()) }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div ng-switch-when="geometry">\n      <span>{{ $ctrl.operators[$ctrl.rule.operator] }}</span>\n      <span ng-switch="$ctrl.getRuleGeometryType()">\n        <span\n            class="gmf-icon gmf-icon-point"\n            ng-switch-when="Point">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-line"\n            ng-switch-when="LineString">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-polygon"\n            ng-switch-when="Polygon">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-circle"\n            ng-switch-when="Circle">\n        </span>\n        <span\n            class="gmf-icon gmf-icon-rectangle"\n            ng-switch-when="Rectangle">\n        </span>\n      </span>\n    </div>\n\n    <div ng-switch-when="select">\n      <span ng-repeat="choice in $ctrl.rule.getExpression().split(\',\')">\n        {{ choice | translate }}{{ $last ? \'\' : \', \' }}\n      </span>\n    </div>\n\n    <div ng-switch-default>\n      <div ng-switch="$ctrl.rule.operator">\n        <div ng-switch-when="..|time_during" ng-switch-when-separator="|">\n          <span translate>Between </span>\n          <span>{{ $ctrl.rule.lowerBoundary }}</span>\n          <span translate> and </span>\n          <span>{{ $ctrl.rule.upperBoundary }}</span>\n        </div>\n        <div ng-switch-default>\n          <span>{{ $ctrl.operatorsShortFormat[$ctrl.rule.operator] }}</span>\n          <span>{{ $ctrl.rule.getExpression() }}</span>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/format/ArcGISGeoJSON.js":
/*!*************************************!*\
  !*** ./src/format/ArcGISGeoJSON.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }



var layerIdentifier = 'layerName';

var ArcGISGeoJSON = function (_olFormatGeoJSON) {
  _inheritsLoose(ArcGISGeoJSON, _olFormatGeoJSON);

  function ArcGISGeoJSON(opt_options) {
    var _this;

    var options = opt_options ? opt_options : {};
    _this = _olFormatGeoJSON.call(this, opt_options) || this;
    _this.layers_ = options.layers ? options.layers : null;
    return _this;
  }

  var _proto = ArcGISGeoJSON.prototype;

  _proto.getLayers = function getLayers() {
    return this.layers_;
  };

  _proto.setLayers = function setLayers(layers) {
    this.layers_ = layers;
  };

  _proto.readFeaturesFromObject = function readFeaturesFromObject(object, opt_options) {
    var geoJSONObject = object;
    var features = [];
    var geoJSONFeatures = null;

    if (geoJSONObject.type === 'FeatureCollection') {
      var geoJSONFeatureCollection = object;
      geoJSONFeatures = geoJSONFeatureCollection.features;
    } else {
      geoJSONFeatures = [object];
    }

    for (var i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {
      var feature = geoJSONFeatures[i];
      var layerName = feature[layerIdentifier];

      if (this.layers_ && !Object(ol_array_js__WEBPACK_IMPORTED_MODULE_0__["includes"])(this.layers_, layerName)) {
        continue;
      }

      features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));
    }

    return features;
  };

  return ArcGISGeoJSON;
}(ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (ArcGISGeoJSON);

/***/ }),

/***/ "./src/format/Attribute.js":
/*!*********************************!*\
  !*** ./src/format/Attribute.js ***!
  \*********************************/
/*! exports provided: setGeometryType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setGeometryType", function() { return setGeometryType; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");

function setGeometryType(attribute, type) {
  var geomRegex = /gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/;

  if (geomRegex.exec(type)) {
    attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].GEOMETRY;

    if (/^gml:Point/.exec(type)) {
      attribute.geomType = 'Point';
    } else if (/^gml:LineString|^gml:Curve/.exec(type)) {
      attribute.geomType = 'LineString';
    } else if (/^gml:Polygon|^gml:Surface/.exec(type)) {
      attribute.geomType = 'Polygon';
    } else if (/^gml:MultiPoint/.exec(type)) {
      attribute.geomType = 'MultiPoint';
    } else if (/^gml:MultiLineString|^gml:MultiCurve/.exec(type)) {
      attribute.geomType = 'MultiLineString';
    } else if (/^gml:MultiPolygon|^gml:MultiSurface/.exec(type)) {
      attribute.geomType = 'MultiPolygon';
    }
  }

  return !!attribute.type && !!attribute.geomType;
}
/* harmony default export */ __webpack_exports__["default"] = (null);

/***/ }),

/***/ "./src/format/AttributeType.js":
/*!*************************************!*\
  !*** ./src/format/AttributeType.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  BOOLEAN: 'boolean',
  DATE: 'date',
  DATETIME: 'datetime',
  TIME: 'time',
  GEOMETRY: 'geometry',
  NUMBER: 'number',
  SELECT: 'select',
  TEXT: 'text'
});

/***/ }),

/***/ "./src/format/FeatureProperties.js":
/*!*****************************************!*\
  !*** ./src/format/FeatureProperties.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  ANGLE: 'a',
  COLOR: 'c',
  IS_CIRCLE: 'l',
  IS_RECTANGLE: 'r',
  IS_TEXT: 't',
  NAME: 'n',
  SHOW_LABEL: 'b',
  OPACITY: 'o',
  AZIMUT: 'z',
  SHOW_MEASURE: 'm',
  SIZE: 's',
  STROKE: 'k',
  ARROW_DIRECTION: 'd',
  ARROW_POSITION: 'p'
});

/***/ }),

/***/ "./src/format/WFSAttribute.js":
/*!************************************!*\
  !*** ./src/format/WFSAttribute.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/Attribute.js */ "./src/format/Attribute.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_format_XSDAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/format/XSDAttribute.js */ "./src/format/XSDAttribute.js");




var _default = function () {
  function _default() {}

  var _proto = _default.prototype;

  _proto.read = function read(complexTypeElements) {
    return complexTypeElements.map(this.readFromComplexTypeElement_);
  };

  _proto.readFromComplexTypeElement_ = function readFromComplexTypeElement_(object) {
    var name = object.name;
    var alias = object.alias || null;
    var required = object.minOccurs != '0';
    var attribute = {
      name: name,
      alias: alias,
      required: required
    };
    var type = object.type;

    if (!Object(ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__["setGeometryType"])(attribute, type)) {
      if (type === 'gml:TimeInstantType' || type === 'dateTime') {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATETIME;
      } else if (type === 'date') {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATE;
      } else if (type === 'time') {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TIME;
      } else if (type === 'decimal' || type === 'double') {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
        attribute.numType = ngeo_format_XSDAttribute_js__WEBPACK_IMPORTED_MODULE_2__["FormatNumberType"].FLOAT;
      } else if (type === 'integer' || type === 'long') {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
        attribute.numType = ngeo_format_XSDAttribute_js__WEBPACK_IMPORTED_MODULE_2__["FormatNumberType"].INTEGER;
      } else if (type === 'boolean') {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].BOOLEAN;
      } else {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TEXT;
      }
    }

    return attribute;
  };

  return _default;
}();



/***/ }),

/***/ "./src/format/XSDAttribute.js":
/*!************************************!*\
  !*** ./src/format/XSDAttribute.js ***!
  \************************************/
/*! exports provided: FormatNumberType, getGeometryAttribute, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormatNumberType", function() { return FormatNumberType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGeometryAttribute", function() { return getGeometryAttribute; });
/* harmony import */ var ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/Attribute.js */ "./src/format/Attribute.js");
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ol_format_XML_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/XML.js */ "./node_modules/ol/format/XML.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }




var FormatNumberType = {
  FLOAT: 'float',
  INTEGER: 'integer'
};

var XSDAttribute = function (_olFormatXML) {
  _inheritsLoose(XSDAttribute, _olFormatXML);

  function XSDAttribute() {
    return _olFormatXML.apply(this, arguments) || this;
  }

  var _proto = XSDAttribute.prototype;

  _proto.read = function read(source) {
    return ol_format_XML_js__WEBPACK_IMPORTED_MODULE_2__["default"].prototype.read.call(this, source);
  };

  _proto.readFromDocument = function readFromDocument(doc) {
    console.assert(doc.nodeType == Node.DOCUMENT_NODE, 'doc.nodeType should be DOCUMENT');
    var n;

    for (n = doc.firstChild; n; n = n.nextSibling) {
      if (n.nodeType == Node.ELEMENT_NODE) {
        if (!(n instanceof Element)) {
          throw new Error('Wrong type');
        }

        return this.readFromNode(n);
      }
    }

    return null;
  };

  _proto.readFromNode = function readFromNode(node) {
    console.assert(node.localName == 'schema', 'localName should be schema');
    var elements = node.getElementsByTagName('element');

    if (!elements.length) {
      elements = node.getElementsByTagName('xsd:element');
    }

    var attributes = [];
    var attribute;

    for (var i = 0, ii = elements.length; i < ii; i++) {
      attribute = this.readFromElementNode_(elements[i]);

      if (attribute) {
        attributes.push(attribute);
      }
    }

    return attributes;
  };

  _proto.readFromElementNode_ = function readFromElementNode_(node) {
    console.assert(node.nodeType == Node.ELEMENT_NODE, 'node.nodeType should be ELEMENT');
    var elementNode = node;
    var name = elementNode.getAttribute('name');

    if (!name) {
      throw new Error('name should be defined in element node');
    }

    var alias = elementNode.getAttribute('alias');
    var nillable = elementNode.getAttribute('nillable');
    var required = nillable !== 'true';
    var readonlyEls = elementNode.getElementsByTagName('readonly');
    var readonly = readonlyEls[0] ? readonlyEls[0].getAttribute('value') === 'true' : false;
    var attribute = {
      name: name,
      readonly: readonly,
      required: required
    };

    if (alias) {
      attribute.alias = alias;
    }

    var type = elementNode.getAttribute('type');

    if (type) {
      if (!Object(ngeo_format_Attribute_js__WEBPACK_IMPORTED_MODULE_0__["setGeometryType"])(attribute, type)) {
        this.setAttributeByXsdType_(attribute, type);
      }
    } else {
      var enumerations = elementNode.getElementsByTagName('enumeration');

      if (!enumerations.length) {
        enumerations = elementNode.getElementsByTagName('xsd:enumeration');
      }

      if (enumerations.length) {
        attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].SELECT;
        var choices = [];

        for (var i = 0, ii = enumerations.length; i < ii; i++) {
          var value = enumerations[i].getAttribute('value');

          if (!value) {
            throw new Error('Missing value');
          }

          choices.push(value);
        }

        attribute.choices = choices;
      } else {
        var restrictions = elementNode.getElementsByTagName('restriction');

        if (!restrictions.length) {
          restrictions = elementNode.getElementsByTagName('xsd:restriction');
        }

        if (restrictions.length && restrictions[0]) {
          var restrictionNode = restrictions[0];
          var base = restrictionNode.getAttribute('base');

          if (!base) {
            throw new Error('Missing base');
          }

          this.setAttributeByXsdType_(attribute, base);
          var maxLengths = elementNode.getElementsByTagName('maxLength');

          if (!maxLengths.length) {
            maxLengths = elementNode.getElementsByTagName('xsd:maxLength');
          }

          if (maxLengths.length && maxLengths[0]) {
            attribute.maxLength = Number(maxLengths[0].getAttribute('value'));
          }
        }
      }
    }

    if (!attribute.type) {
      return null;
    }

    console.assert(attribute.type);
    return attribute;
  };

  _proto.setAttributeByXsdType_ = function setAttributeByXsdType_(attribute, type) {
    if (type === 'xsd:boolean') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].BOOLEAN;
    } else if (type === 'xsd:date') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATE;
    } else if (type === 'xsd:dateTime') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].DATETIME;
    } else if (type === 'xsd:time') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TIME;
    } else if (type === 'xsd:decimal' || type === 'xsd:double') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
      attribute.numType = FormatNumberType.FLOAT;
    } else if (type === 'xsd:integer') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].NUMBER;
      attribute.numType = FormatNumberType.INTEGER;
    } else if (type === 'xsd:string') {
      attribute.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].TEXT;
    }
  };

  return XSDAttribute;
}(ol_format_XML_js__WEBPACK_IMPORTED_MODULE_2__["default"]);

function getGeometryAttribute(attributes) {
  var geomAttribute = null;

  for (var i = 0, ii = attributes.length; i < ii; i++) {
    if (attributes[i].type === ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_1__["default"].GEOMETRY) {
      geomAttribute = attributes[i];
      break;
    }
  }

  return geomAttribute;
}
/* harmony default export */ __webpack_exports__["default"] = (XSDAttribute);

/***/ }),

/***/ "./src/format/filter.js":
/*!******************************!*\
  !*** ./src/format/filter.js ***!
  \******************************/
/*! exports provided: dateBetween */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateBetween", function() { return dateBetween; });
/* harmony import */ var ol_format_filter_Comparison_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/format/filter/Comparison.js */ "./node_modules/ol/format/filter/Comparison.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }



var DateIsBetween = function (_olFormatFilterCompar) {
  _inheritsLoose(DateIsBetween, _olFormatFilterCompar);

  function DateIsBetween(propertyName, lowerBoundary, upperBoundary) {
    var _this;

    _this = _olFormatFilterCompar.call(this, 'PropertyIsBetween', propertyName) || this;
    _this.lowerBoundary = lowerBoundary;
    _this.upperBoundary = upperBoundary;
    return _this;
  }

  return DateIsBetween;
}(ol_format_filter_Comparison_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

function dateBetween(propertyName, lowerBoundary, upperBoundary) {
  return new DateIsBetween(propertyName, lowerBoundary, upperBoundary);
}

/***/ }),

/***/ "./src/googlestreetview/component.html":
/*!*********************************************!*\
  !*** ./src/googlestreetview/component.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div\n  class="ngeo-googlestreetview-instructions"\n  ng-if="$ctrl.location === null"\n  translate>\n  Click on a road on the map to start StreetView.\n</div>\n<div\n  class="ngeo-googlestreetview-nodata"\n  ng-if="$ctrl.noDataAtLocation"\n  translate>\n  Street View data not found for this location.\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/googlestreetview/component.js":
/*!*******************************************!*\
  !*** ./src/googlestreetview/component.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/MapBrowserEvent.js */ "./node_modules/ol/MapBrowserEvent.js");








var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoGooglestreetview', [ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.value('ngeoGooglestreetviewTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.ngeoGooglestreetviewTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/googlestreetview';
});
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/googlestreetview', __webpack_require__(/*! ./component.html */ "./src/googlestreetview/component.html"));
}]);
ngeoGooglestreetviewTemplateUrl.$inject = ["$attrs", "ngeoGooglestreetviewTemplateUrl"];

function ngeoGooglestreetviewTemplateUrl($attrs, ngeoGooglestreetviewTemplateUrl) {
  return ngeoGooglestreetviewTemplateUrl($attrs);
}

var GoogleStreetviewController = function () {
  GoogleStreetviewController.$inject = ["$element", "$scope", "ngeoFeatureOverlayMgr"];

  function GoogleStreetviewController($element, $scope, ngeoFeatureOverlayMgr) {
    var _this = this;

    this.active = false;
    $scope.$watch(function () {
      return _this.active;
    }, this.handleActiveChange_.bind(this));
    this.featureStyle = null;
    this.map = null;
    this.radius;
    this.scope_ = $scope;
    this.feature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
    this.featureOverlay_ = ngeoFeatureOverlayMgr.getFeatureOverlay();
    this.listenerKeys_ = [];
    this.location = null;
    this.noDataAtLocation = false;
    this.panorama_ = new google.maps.StreetViewPanorama($element[0], {
      pov: {
        heading: 0,
        pitch: 0
      },
      visible: false,
      zoom: 1
    });
    this.panoramaListener_ = null;
    this.point_ = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__["default"]([0, 0]);
    this.feature_.setGeometry(this.point_);
    this.streetViewService_ = new google.maps.StreetViewService();
    this.panoramaPositionChanging_ = false;
  }

  var _proto = GoogleStreetviewController.prototype;

  _proto.$onInit = function $onInit() {
    var _this2 = this;

    this.scope_.$watch(function () {
      return _this2.location;
    }, this.handleLocationChange_.bind(this));
    this.scope_.$watch(function () {
      var isActive = _this2.active;
      var hasLocation = _this2.location !== null;
      return isActive && hasLocation;
    }, this.handleReadyChange_.bind(this));
    this.scope_.$watch(function () {
      var isActive = _this2.active;
      var hasLocation = _this2.location !== null;
      var hasData = _this2.noDataAtLocation === false;
      return isActive && hasLocation && hasData;
    }, function (show, oldShow) {
      if (show === oldShow) {
        return;
      }

      _this2.panorama_.setVisible(show);

      if (show) {
        _this2.panoramaListener_ = google.maps.event.addListener(_this2.panorama_, 'position_changed', _this2.handlePanoramaPositionChange_.bind(_this2));
      } else if (_this2.panoramaListener_) {
        google.maps.event.removeListener(_this2.panoramaListener_);
        _this2.panoramaListener_ = null;
      }
    });

    if (this.featureStyle) {
      this.feature_.setStyle(this.featureStyle);
    }
  };

  _proto.handleActiveChange_ = function handleActiveChange_(active) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    var keys = this.listenerKeys_;

    if (active) {
      keys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(this.map, 'click', this.handleMapClick_, this));
    } else {
      keys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["unlistenByKey"]);
      keys.length = 0;
    }
  };

  _proto.handleLocationChange_ = function handleLocationChange_(location, oldLocation) {
    if (location === oldLocation || Array.isArray(location) && Array.isArray(oldLocation) && ol_array_js__WEBPACK_IMPORTED_MODULE_2__["equals"](location, oldLocation)) {
      return;
    }

    this.point_.setCoordinates(location);

    if (location && !this.panoramaPositionChanging_) {
      var lonLat = this.toLonLat_(location);
      this.streetViewService_.getPanorama({
        location: {
          lat: lonLat[1],
          lng: lonLat[0]
        },
        radius: this.radius
      }, this.handleStreetViewServiceGetPanorama_.bind(this));
    }
  };

  _proto.handleMapClick_ = function handleMapClick_(evt) {
    if (evt instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      this.location = evt.coordinate;
      this.scope_.$apply();
    }
  };

  _proto.handleReadyChange_ = function handleReadyChange_(ready, oldReady) {
    if (ready === oldReady) {
      return;
    }

    if (ready) {
      this.featureOverlay_.addFeature(this.feature_);
    } else {
      this.featureOverlay_.removeFeature(this.feature_);
    }
  };

  _proto.handleStreetViewServiceGetPanorama_ = function handleStreetViewServiceGetPanorama_(data, status) {
    if (!data) {
      return;
    }

    if (!data.location) {
      throw new Error('Missing data.location');
    }

    if (!data.location.latLng) {
      throw new Error('Missing data.location.latLng');
    }

    var panorama = this.panorama_;

    if (status === google.maps.StreetViewStatus.OK) {
      this.noDataAtLocation = false;
      panorama.setPosition(data.location.latLng);
    } else {
      this.noDataAtLocation = true;
    }

    this.scope_.$apply();
  };

  _proto.handlePanoramaPositionChange_ = function handlePanoramaPositionChange_() {
    this.panoramaPositionChanging_ = true;
    var position = this.panorama_.getPosition();
    var lonLat = [position.lng(), position.lat()];
    var location = this.fromLonLat_(lonLat);
    this.location = location;
    this.scope_.$apply();
    this.panoramaPositionChanging_ = false;
  };

  _proto.fromLonLat_ = function fromLonLat_(lonLat) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    return ol_proj_js__WEBPACK_IMPORTED_MODULE_4__["fromLonLat"](lonLat, this.map.getView().getProjection());
  };

  _proto.toLonLat_ = function toLonLat_(coordinate) {
    if (!this.map) {
      throw new Error('Missing map');
    }

    return ol_proj_js__WEBPACK_IMPORTED_MODULE_4__["toLonLat"](coordinate, this.map.getView().getProjection());
  };

  return GoogleStreetviewController;
}();

module.component('ngeoGooglestreetview', {
  bindings: {
    'active': '<',
    'featureStyle': '<?',
    'map': '<',
    'radius': '<?'
  },
  controller: GoogleStreetviewController,
  templateUrl: ngeoGooglestreetviewTemplateUrl
});
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/googlestreetview/module.js":
/*!****************************************!*\
  !*** ./src/googlestreetview/module.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_googlestreetview_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/googlestreetview/component.js */ "./src/googlestreetview/component.js");


/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoGooglestreetviewModule', [ngeo_googlestreetview_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]));

/***/ }),

/***/ "./src/grid/Config.js":
/*!****************************!*\
  !*** ./src/grid/Config.js ***!
  \****************************/
/*! exports provided: getRowUid, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRowUid", function() { return getRowUid; });
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");


function GridConfig(data, columnDefs) {
  this.data = data;
  this.columnDefs = columnDefs;
  this.selectedRows = {};
}

function getRowUid(attributes) {
  return "" + Object(ol_util_js__WEBPACK_IMPORTED_MODULE_0__["getUid"])(attributes);
}

GridConfig.prototype.isRowSelected = function (attributes) {
  return !!this.selectedRows[getRowUid(attributes)];
};

GridConfig.prototype.getSelectedCount = function () {
  return Object.keys(this.selectedRows).length;
};

GridConfig.prototype.getSelectedRows = function () {
  var _this = this;

  if (!this.data) {
    throw new Error('Missing data');
  }

  return this.data.filter(function (row) {
    return _this.isRowSelected(row);
  });
};

GridConfig.prototype.selectRow = function (attributes) {
  var uid = getRowUid(attributes);
  this.selectedRows[uid] = attributes;
};

GridConfig.prototype.toggleRow = function (attributes) {
  var uid = getRowUid(attributes);
  var isSelected = this.isRowSelected(attributes);

  if (isSelected) {
    delete this.selectedRows[uid];
  } else {
    this.selectedRows[uid] = attributes;
  }
};

GridConfig.prototype.selectAll = function () {
  var _this2 = this;

  if (!this.data) {
    throw new Error('Missing data');
  }

  this.data.forEach(function (attributes) {
    _this2.selectRow(attributes);
  });
};

GridConfig.prototype.unselectAll = function () {
  for (var rowId in this.selectedRows) {
    delete this.selectedRows[rowId];
  }
};

GridConfig.prototype.invertSelection = function () {
  var _this3 = this;

  if (!this.data) {
    throw new Error('Missing data');
  }

  this.data.forEach(function (attributes) {
    _this3.toggleRow(attributes);
  });
};

/* harmony default export */ __webpack_exports__["default"] = (GridConfig);

/***/ }),

/***/ "./src/grid/component.html":
/*!*********************************!*\
  !*** ./src/grid/component.html ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="ngeo-grid-table-container">\n  <table float-thead="$ctrl.floatTheadConfig" ng-model="$ctrl.configuration.data"\n         class="table table-bordered table-striped table-hover">\n    <thead class="table-header">\n      <tr>\n        <th ng-repeat="columnDefs in $ctrl.configuration.columnDefs"\n            ng-click="$ctrl.sort(columnDefs.name)" ng-bind-html="columnDefs.name | ngeoTrustHtml | translate">\n          <i ng-show="$ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i>\n          <i ng-show="$ctrl.sortedBy === columnDefs.name && $ctrl.sortAscending === true" class="fa fa-caret-up"></i>\n          <i ng-show="$ctrl.sortedBy === columnDefs.name && $ctrl.sortAscending === false" class="fa fa-caret-down"></i>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="attributes in $ctrl.configuration.data"\n          ng-class="[\'row-\' + $ctrl.configuration.getRowUid(attributes), $ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']"\n          ng-click="$ctrl.clickRow(attributes, $event)" ng-mousedown="$ctrl.preventTextSelection($event)">\n        <td ng-repeat="columnDefs in $ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | removeCDATA | ngeoTrustHtmlAuto"></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/grid/component.js":
/*!*******************************!*\
  !*** ./src/grid/component.js ***!
  \*******************************/
/*! exports provided: GridController, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridController", function() { return GridController; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/grid/Config.js */ "./src/grid/Config.js");
/* harmony import */ var floatthead__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! floatthead */ "./node_modules/floatthead/dist/jquery.floatThead.min.js");
/* harmony import */ var floatthead__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(floatthead__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var angular_float_thead__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular-float-thead */ "./node_modules/angular-float-thead/angular-floatThead.js");
/* harmony import */ var angular_float_thead__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(angular_float_thead__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/sass/font.scss */ "./src/sass/font.scss");
/* harmony import */ var ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_font_scss__WEBPACK_IMPORTED_MODULE_6__);
GridController.$inject = ["$scope"];







var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoGrid', [ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, 'floatThead']);
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/grid', __webpack_require__(/*! ./component.html */ "./src/grid/component.html"));
}]);
module.value('ngeoGridTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.ngeoGridTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/grid';
});
ngeoGridTemplateUrl.$inject = ["$attrs", "ngeoGridTemplateUrl"];

function ngeoGridTemplateUrl($attrs, ngeoGridTemplateUrl) {
  return ngeoGridTemplateUrl($attrs);
}

var gridComponent = {
  controller: GridController,
  bindings: {
    'configuration': '=ngeoGridConfiguration'
  },
  templateUrl: ngeoGridTemplateUrl
};
module.component('ngeoGrid', gridComponent);
function GridController($scope) {
  this.scope_ = $scope;
  this.configuration = null;
  this.selectedRows = {};
  this.sortedBy = '';
  this.sortAscending = true;
  this.floatTheadConfig = {
    scrollContainer: function scrollContainer($table) {
      return $table.closest('.ngeo-grid-table-container');
    }
  };
}

GridController.prototype.$onInit = function () {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  this.selectedRows = this.configuration.selectedRows;
};

GridController.prototype.sort = function (columnName) {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  if (!this.configuration.data) {
    throw new Error('Missing configuration.data');
  }

  this.sortAscending = this.sortedBy === columnName ? !this.sortAscending : true;
  this.sortedBy = columnName;
  var asc = this.sortAscending ? 1 : -1;
  this.configuration.data.sort(function (attributes1, attributes2) {
    if (!attributes1[columnName]) {
      return 1;
    }

    if (!attributes2[columnName]) {
      return -1;
    }

    return attributes1[columnName] > attributes2[columnName] ? asc : -asc;
  });
};

GridController.prototype.clickRow = function (attributes, event) {
  var shiftKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isShiftKeyOnly"])(event);
  var platformModifierKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isPlatformModifierKeyOnly"])(event);
  this.clickRow_(attributes, shiftKey, platformModifierKey);
};

GridController.prototype.clickRow_ = function (attributes, shiftKey, platformModifierKey) {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  if (shiftKey && !platformModifierKey) {
    this.selectRange_(attributes);
  } else if (!shiftKey && platformModifierKey) {
    this.configuration.toggleRow(attributes);
  } else {
    var isSelected = this.configuration.isRowSelected(attributes);
    this.configuration.unselectAll();

    if (!isSelected) {
      this.configuration.selectRow(attributes);
    }
  }
};

GridController.prototype.selectRange_ = function (attributes) {
  if (!this.configuration) {
    throw new Error('Missing configuration');
  }

  if (!this.configuration.data) {
    throw new Error('Missing configuration.data');
  }

  var targetUid = Object(ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_3__["getRowUid"])(attributes);
  var data = this.configuration.data;

  if (this.configuration.isRowSelected(attributes)) {
    return;
  }

  var posClickedRow = 0;
  var posSelectedRows = [];

  for (var i = 0; i < data.length; i++) {
    var currentRow = data[i];
    var currentUid = Object(ngeo_grid_Config_js__WEBPACK_IMPORTED_MODULE_3__["getRowUid"])(currentRow);

    if (targetUid === currentUid) {
      posClickedRow = i;
    } else if (this.configuration.isRowSelected(currentRow)) {
      posSelectedRows.push(i);
    }
  }

  if (posSelectedRows.length == 0) {
    this.configuration.selectRow(attributes);
  }

  var distance = Infinity;
  var posClosestRow = posSelectedRows[0];

  for (var _i = 0, _posSelectedRows = posSelectedRows; _i < _posSelectedRows.length; _i++) {
    var posSelectedRow = _posSelectedRows[_i];
    var currentPos = posSelectedRow;
    var currentDistance = Math.abs(currentPos - posClickedRow);

    if (distance > currentDistance) {
      distance = currentDistance;
      posClosestRow = currentPos;
    }
  }

  var rangeStart = posClickedRow < posClosestRow ? posClickedRow : posClosestRow;
  var rangeEnd = posClickedRow > posClosestRow ? posClickedRow : posClosestRow;

  for (var l = rangeStart; l <= rangeEnd; l++) {
    this.configuration.selectRow(data[l]);
  }
};

GridController.prototype.preventTextSelection = function (event) {
  var shiftKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isShiftKeyOnly"])(event);
  var platformModifierKey = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["isPlatformModifierKeyOnly"])(event);

  if (shiftKey || platformModifierKey) {
    event.preventDefault();
  }
};

module.controller('ngeoGridController', GridController);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/grid/module.js":
/*!****************************!*\
  !*** ./src/grid/module.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_grid_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/grid/component.js */ "./src/grid/component.js");


/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoGridModule', [ngeo_grid_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]));

/***/ }),

/***/ "./src/icons/point.svg?viewbox&height=1em":
/*!************************************************!*\
  !*** ./src/icons/point.svg?viewbox&height=1em ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"1em\" height=\"1em\"><path d=\"M7.948 10.25c-1.26.009-2.349-1.23-2.184-2.48.11-1.153 1.218-2.124 2.387-2.013 1.064.06 2.022.956 2.09 2.028.1.975-.492 1.973-1.42 2.31a2.211 2.211 0 01-.873.155zm.047-1.357c.606.03 1.103-.703.827-1.248-.215-.499-.934-.709-1.357-.343-.393.3-.47.941-.11 1.295.16.18.395.295.64.296z\"></path></svg>"

/***/ }),

/***/ "./src/icons/polygon.svg?viewbox&height=1em":
/*!**************************************************!*\
  !*** ./src/icons/polygon.svg?viewbox&height=1em ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"1em\" height=\"1em\"><path d=\"M5.045-.029c-1.26-.008-2.35 1.23-2.184 2.48.06.632.43 1.202.936 1.576-.479 1.358-.968 2.714-1.45 4.072-1.257-.008-2.363 1.23-2.2 2.48.105 1.16 1.228 2.13 2.402 2.012a2.295 2.295 0 001.45-.67c1.273.53 2.553 1.056 3.823 1.59a1.992 1.992 0 000 .438c.074 1.165 1.176 2.17 2.355 2.074 1.07-.042 2.057-.932 2.138-2.012a2.295 2.295 0 00-.453-1.607c.435-.593.873-1.186 1.31-1.778.186.04.369.047.562.031 1.067-.047 2.04-.935 2.122-2.012.11-.964-.464-1.959-1.373-2.31a2.202 2.202 0 00-.343-.108 444.27 444.27 0 01-.125-1.857c.743-.313 1.326-1.036 1.388-1.856.11-.964-.463-1.958-1.372-2.309a2.196 2.196 0 00-.92-.172c-.08 0-.158-.008-.235 0-.841.098-1.565.75-1.84 1.545-1.26-.004-2.53-.009-3.791-.016C7.045.918 6.564.361 5.919.127a2.211 2.211 0 00-.874-.156zm.047 1.357c.605-.03 1.103.704.827 1.248-.215.499-.934.71-1.358.343-.392-.299-.47-.94-.109-1.294a.874.874 0 01.64-.297zm8.08.063c.62-.026 1.099.719.796 1.263-.232.498-.967.692-1.373.297-.361-.308-.431-.939-.078-1.28a.899.899 0 01.656-.28zM7.246 2.919c1.257.005 2.517.024 3.775.032a2.333 2.333 0 001.622 1.513c.043.624.084 1.248.125 1.872-.877.376-1.511 1.322-1.388 2.293.042.482.267.94.592 1.295-.416.567-.826 1.136-1.248 1.7a2.045 2.045 0 00-.67-.109v.016c-.632-.012-1.235.287-1.654.748-1.26-.525-2.517-1.063-3.775-1.59.005-.043.013-.083.015-.126a2.274 2.274 0 00-.967-2.074c.472-1.342.944-2.685 1.42-4.025.052 0 .104.005.156 0 .898-.05 1.72-.7 1.997-1.545zm6.38 4.602c.62-.025 1.098.72.796 1.264-.233.497-.967.691-1.373.296-.362-.308-.432-.938-.078-1.279a.899.899 0 01.655-.28zM2.393 9.456c.612-.028 1.109.729.811 1.28-.228.493-.942.68-1.357.311-.377-.3-.46-.926-.11-1.28a.9.9 0 01.656-.311zm7.66 3.432c.615-.037 1.12.711.826 1.263-.217.48-.91.684-1.326.344-.423-.297-.495-.986-.109-1.342a.857.857 0 01.609-.265z\"></path></svg>"

/***/ }),

/***/ "./src/icons/rectangle.svg?viewbox&height=1em":
/*!****************************************************!*\
  !*** ./src/icons/rectangle.svg?viewbox&height=1em ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"1em\" height=\"1em\"><path d=\"M2.317 14.491a2.203 2.203 0 01-.874-.156C.257 13.91-.343 12.38.242 11.262a2.265 2.265 0 011.28-1.139l-.016-4.258c-.02-.008-.042-.008-.063-.016C.258 5.424-.343 3.894.243 2.776.74 1.731 2.115 1.194 3.174 1.7c.572.246 1.007.747 1.217 1.326L11.6 3.01c.028-.077.055-.16.093-.234.5-1.045 1.874-1.582 2.933-1.076.979.422 1.584 1.59 1.28 2.62a2.302 2.302 0 01-1.467 1.576l.016 4.228c.057.02.115.035.171.062.979.422 1.584 1.59 1.28 2.621-.24.95-1.151 1.688-2.137 1.685a2.203 2.203 0 01-.874-.156c-.625-.224-1.083-.757-1.295-1.373l-7.207.015c-.302.864-1.151 1.516-2.075 1.513zm-.14-1.357c.508.052 1.045-.42.982-.951-.03-.542-.63-.978-1.154-.78-.472.146-.764.713-.547 1.17.089.223.27.413.5.499a.79.79 0 00.218.062zm11.45 0c.509.052 1.045-.42.982-.951-.03-.542-.63-.978-1.154-.78-.472.146-.764.713-.546 1.17.088.223.27.413.499.499a.79.79 0 00.218.062zM4.39 11.527l7.192-.015c.03-.084.067-.17.109-.25.259-.542.747-.944 1.31-1.139V5.88c-.036-.012-.073-.017-.109-.031-.628-.225-1.085-.768-1.295-1.388H4.407a2.334 2.334 0 01-1.42 1.435l.015 4.227c.056.02.118.037.172.063.576.248 1.009.757 1.217 1.342zm-2.215-6.88c.51.052 1.046-.42.983-.95-.03-.543-.63-.979-1.154-.781-.472.146-.764.714-.547 1.17.089.224.27.414.5.5a.79.79 0 00.218.062zm11.45 0c.51.052 1.046-.42.983-.95-.03-.543-.63-.979-1.154-.781-.472.146-.764.714-.546 1.17.088.224.27.414.499.5a.79.79 0 00.218.062z\"></path></svg>"

/***/ }),

/***/ "./src/interaction/DrawAzimut.js":
/*!***************************************!*\
  !*** ./src/interaction/DrawAzimut.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/common.js */ "./src/interaction/common.js");
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_functions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/functions.js */ "./node_modules/ol/functions.js");
/* harmony import */ var ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/Circle.js */ "./node_modules/ol/geom/Circle.js");
/* harmony import */ var ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/GeometryCollection.js */ "./node_modules/ol/geom/GeometryCollection.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }














var DrawAzimut = function (_olInteractionPointer) {
  _inheritsLoose(DrawAzimut, _olInteractionPointer);

  function DrawAzimut(options) {
    var _this;

    _this = _olInteractionPointer.call(this, {
      type: ''
    }) || this;
    _this.shouldStopEvent = ol_functions_js__WEBPACK_IMPORTED_MODULE_4__["FALSE"];
    _this.downPx_ = [];
    _this.source_ = options.source;
    _this.started_ = false;
    _this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    _this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    _this.squaredClickTolerance_ = 4;
    _this.sketchLayer_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        useSpatialIndex: false,
        wrapX: false
      }),
      style: options.style || Object(ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__["getDefaultDrawStyleFunction"])()
    });
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(_assertThisInitialized(_this), 'change:active', _this.updateState_, _assertThisInitialized(_this));
    return _this;
  }

  var _proto = DrawAzimut.prototype;

  _proto.handlePointerMove_ = function handlePointerMove_(event) {
    if (this.started_) {
      this.modifyDrawing_(event);
    } else {
      this.createOrUpdateSketchPoint_(event);
    }

    return true;
  };

  _proto.createOrUpdateSketchPoint_ = function createOrUpdateSketchPoint_(event) {
    var coordinates = event.coordinate.slice();
    var sketchPointGeom = this.sketchPoint_.getGeometry();

    if (!sketchPointGeom) {
      this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"](new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__["default"](coordinates));
      this.updateSketchFeatures_();
    } else {
      sketchPointGeom.setCoordinates(coordinates);
    }
  };

  _proto.updateSketchFeatures_ = function updateSketchFeatures_() {
    var sketchFeatures = [];
    sketchFeatures.push(this.sketchFeature_);
    sketchFeatures.push(this.sketchPoint_);
    var source = this.sketchLayer_.getSource();
    source.clear(true);
    source.addFeatures(sketchFeatures);
  };

  _proto.startDrawing_ = function startDrawing_(event) {
    var start = event.coordinate;
    this.started_ = true;
    var line = new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]([start.slice(), start.slice()]);
    var circle = new ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_5__["default"](start, 0);
    var geometry = new ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_6__["default"]([line, circle]);
    this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    this.sketchFeature_.setGeometry(geometry);
    this.updateSketchFeatures_();
    var evt = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawstart', {
      feature: this.sketchFeature_
    });
    this.dispatchEvent(evt);
  };

  _proto.modifyDrawing_ = function modifyDrawing_(event) {
    var coordinate = event.coordinate;
    var geometry = this.sketchFeature_.getGeometry();

    if (!(geometry instanceof ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
      throw new Error('Missing geometry');
    }

    var geometries = geometry.getGeometriesArray();
    var line = geometries[0];

    if (line instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      var coordinates = line.getCoordinates();
      var sketchPointGeom = this.sketchPoint_.getGeometry();

      if (sketchPointGeom instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
        sketchPointGeom.setCoordinates(coordinate);
        var last = coordinates[coordinates.length - 1];
        last[0] = coordinate[0];
        last[1] = coordinate[1];
        console.assert(line instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__["default"]);
        line.setCoordinates(coordinates);
        var circle = geometries[1];

        if (circle instanceof ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
          circle.setRadius(line.getLength());
          this.updateSketchFeatures_();
        }
      }
    }
  };

  _proto.abortDrawing_ = function abortDrawing_() {
    this.started_ = false;
    var sketchFeature = this.sketchFeature_;
    this.sketchFeature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    this.sketchPoint_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
    var source = this.sketchLayer_.getSource();

    if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"])) {
      throw new Error('Missing source');
    }

    source.clear(true);
    return sketchFeature;
  };

  _proto.updateState_ = function updateState_() {
    var map = this.getMap();
    var active = this.getActive();

    if (map === null || !active) {
      this.abortDrawing_();
    }

    this.sketchLayer_.setMap(active ? map : null);
  };

  _proto.finishDrawing_ = function finishDrawing_() {
    var sketchFeature = this.abortDrawing_();
    this.source_.addFeature(sketchFeature);
    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('drawend', {
      feature: this.sketchFeature_
    });
    this.dispatchEvent(event);
  };

  _proto.setMap = function setMap(map) {
    ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_9__["default"].prototype.setMap.call(this, map);
    this.updateState_();
  };

  _proto.handleDownEvent = function handleDownEvent(event) {
    this.downPx_ = event.pixel;
    return true;
  };

  _proto.handleUpEvent = function handleUpEvent(event) {
    if (!this.downPx_) {
      throw new Error('Missing downPx');
    }

    var downPx = this.downPx_;
    var clickPx = event.pixel;
    var dx = downPx[0] - clickPx[0];
    var dy = downPx[1] - clickPx[1];
    var squaredDistance = dx * dx + dy * dy;
    var pass = true;

    if (squaredDistance <= this.squaredClickTolerance_) {
      this.handlePointerMove_(event);

      if (!this.started_) {
        this.startDrawing_(event);
      } else {
        this.finishDrawing_();
      }

      pass = false;
    }

    return pass;
  };

  _proto.handleEvent = function handleEvent(mapBrowserEvent) {
    var pass = true;

    if (mapBrowserEvent.type === 'pointermove') {
      pass = this.handlePointerMove_(mapBrowserEvent);
    } else if (mapBrowserEvent.type === 'dblclick') {
      pass = false;
    }

    return _olInteractionPointer.prototype.handleEvent.call(this, mapBrowserEvent) && pass;
  };

  return DrawAzimut;
}(ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_9__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (DrawAzimut);

/***/ }),

/***/ "./src/interaction/DrawRegularPolygonFromClick.js":
/*!********************************************************!*\
  !*** ./src/interaction/DrawRegularPolygonFromClick.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_functions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/functions.js */ "./node_modules/ol/functions.js");
/* harmony import */ var ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/geom/Circle.js */ "./node_modules/ol/geom/Circle.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/MapBrowserEvent.js */ "./node_modules/ol/MapBrowserEvent.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }










var _default = function (_olInteractionInterac) {
  _inheritsLoose(_default, _olInteractionInterac);

  function _default(options) {
    var _this;

    _this = _olInteractionInterac.call(this, {
      handleEvent: ol_functions_js__WEBPACK_IMPORTED_MODULE_3__["TRUE"]
    }) || this;
    _this.angle_ = options.angle !== undefined ? options.angle : 0;
    _this.radius_ = options.radius;
    _this.sides_ = options.sides !== undefined ? options.sides : 3;
    _this.listenerKeys_ = [];
    return _this;
  }

  var _proto = _default.prototype;

  _proto.setActive = function setActive(active) {
    _olInteractionInterac.prototype.setActive.call(this, active);

    if (this.getMap()) {
      if (active) {
        this.enable_();
      } else {
        this.disable_();
      }
    }
  };

  _proto.setMap = function setMap(map) {
    var active = this.getActive();
    var currentMap = this.getMap();

    if (currentMap && active) {
      this.disable_();
    }

    _olInteractionInterac.prototype.setMap.call(this, map);

    if (map && active) {
      this.enable_();
    }
  };

  _proto.enable_ = function enable_() {
    var map = this.getMap();
    console.assert(map, 'Map should be set.');
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(map, 'click', this.handleMapClick_, this));
  };

  _proto.disable_ = function disable_() {
    var map = this.getMap();
    console.assert(map, 'Map should be set.');
    this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"]);
    this.listenerKeys_.length = 0;
  };

  _proto.handleMapClick_ = function handleMapClick_(evt) {
    if (evt instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      var center = evt.coordinate;
      var geometry = Object(ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_5__["fromCircle"])(new ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_4__["default"](center), this.sides_);
      Object(ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_5__["makeRegular"])(geometry, center, this.radius_, this.angle_);
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__["default"]('drawend', {
        feature: new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"](geometry)
      });
      this.dispatchEvent(event);
    }
  };

  return _default;
}(ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__["default"]);



/***/ }),

/***/ "./src/interaction/Measure.js":
/*!************************************!*\
  !*** ./src/interaction/Measure.js ***!
  \************************************/
/*! exports provided: getFormattedArea, getFormattedCircleArea, getFormattedLength, getFormattedPoint, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedArea", function() { return getFormattedArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedCircleArea", function() { return getFormattedCircleArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedLength", function() { return getFormattedLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedPoint", function() { return getFormattedPoint; });
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_dom_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/dom.js */ "./node_modules/ol/dom.js");
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_Overlay_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Overlay.js */ "./node_modules/ol/Overlay.js");
/* harmony import */ var ol_sphere_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/sphere.js */ "./node_modules/ol/sphere.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/style/Stroke.js */ "./node_modules/ol/style/Stroke.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }















var Measure = function (_olInteractionInterac) {
  _inheritsLoose(Measure, _olInteractionInterac);

  function Measure(options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _olInteractionInterac.call(this, {
      handleEvent: handleEvent_
    }) || this;
    _this.helpTooltipElement_ = null;
    _this.helpTooltipOverlay_ = null;
    _this.measureTooltipElement_ = null;
    _this.measureTooltipOverlay_ = null;
    _this.measureTooltipOverlayCoord_ = null;
    _this.sketchFeature = null;
    _this.continueMsg = null;
    _this.decimals = options.decimals;
    _this.precision = options.precision;
    _this.displayHelpTooltip_ = options.displayHelpTooltip !== undefined ? options.displayHelpTooltip : true;
    var startMsg;

    if (options.startMsg !== undefined) {
      startMsg = options.startMsg;
    } else {
      startMsg = document.createElement('span');
      startMsg.textContent = 'Click to start drawing.';
    }

    _this.startMsg = startMsg;
    _this.changeEventKey_ = null;
    _this.postcomposeEventKey_ = null;
    var style = options.style !== undefined ? options.style : [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
        color: 'rgba(255, 255, 255, 0.2)'
      })
    }), new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
        color: 'white',
        width: 5
      })
    }), new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
        color: '#ffcc33',
        width: 3
      })
    })];
    _this.vectorLayer_ = options.layer !== undefined ? options.layer : new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"](),
      style: style
    });

    var source = _this.vectorLayer_.getSource();

    if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
      throw new Error('Missing source');
    }

    var drawInteraction = _this.createDrawInteraction(options.sketchStyle, source);

    if (!drawInteraction) {
      throw new Error('Missing drawInteraction');
    }

    _this.drawInteraction_ = drawInteraction;
    _this.shouldHandleDrawInteractionActiveChange_ = true;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_this.drawInteraction_, 'change:active', _this.handleDrawInteractionActiveChange_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_this.drawInteraction_, 'drawstart', _this.onDrawStart_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_this.drawInteraction_, 'drawend', _this.onDrawEnd_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(_assertThisInitialized(_this), 'change:active', _this.updateState_, _assertThisInitialized(_this));
    return _this;
  }

  var _proto = Measure.prototype;

  _proto.getDrawInteraction = function getDrawInteraction() {
    return this.drawInteraction_;
  };

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return null;
  };

  _proto.setMap = function setMap(map) {
    ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__["default"].prototype.setMap.call(this, map);
    this.vectorLayer_.setMap(map);
    var prevMap = this.drawInteraction_.getMap();

    if (prevMap !== null) {
      prevMap.removeInteraction(this.drawInteraction_);
    }

    if (map !== null) {
      map.addInteraction(this.drawInteraction_);
    }
  };

  _proto.onDrawStart_ = function onDrawStart_(evt) {
    var _this2 = this;

    var event = evt.detail ? evt.detail : evt;
    this.sketchFeature = event.feature;
    var source = this.vectorLayer_.getSource();

    if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
      throw new Error('Missing source');
    }

    source.clear(true);
    this.createMeasureTooltip_();

    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geometry = this.sketchFeature.getGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    this.changeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(geometry, 'change', function (evt) {
      _this2.handleMeasure(function (measure, coord) {
        if (coord !== null) {
          if (!_this2.measureTooltipElement_) {
            throw new Error('Missing measureTooltipElement');
          }

          _this2.measureTooltipElement_.innerHTML = measure;
          _this2.measureTooltipOverlayCoord_ = coord;
        }
      });
    });
    this.postcomposeEventKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.getMap(), 'postcompose', function () {
      if (_this2.measureTooltipOverlay_ && _this2.measureTooltipOverlayCoord_) {
        _this2.measureTooltipOverlay_.setPosition(_this2.measureTooltipOverlayCoord_);
      }
    });
  };

  _proto.onDrawEnd_ = function onDrawEnd_(evt) {
    if (!this.measureTooltipElement_) {
      throw new Error('Missing measureTooltipElement');
    }

    if (!this.measureTooltipOverlay_) {
      throw new Error('Missing measureTooltipOverlay');
    }

    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    this.measureTooltipElement_.classList.add('ngeo-tooltip-static');
    this.measureTooltipOverlay_.setOffset([0, -7]);
    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__["default"]('measureend', {
      feature: this.sketchFeature
    });
    this.dispatchEvent(event);
    this.sketchFeature = null;
    this.unlistenerEvent_();
  };

  _proto.unlistenerEvent_ = function unlistenerEvent_() {
    if (this.changeEventKey_ !== null && this.postcomposeEventKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"])(this.changeEventKey_);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"])(this.postcomposeEventKey_);
      this.changeEventKey_ = null;
      this.postcomposeEventKey_ = null;
    }
  };

  _proto.createHelpTooltip_ = function createHelpTooltip_() {
    this.removeHelpTooltip_();

    if (this.displayHelpTooltip_) {
      this.helpTooltipElement_ = document.createElement('div');
      this.helpTooltipElement_.classList.add('tooltip');
      this.helpTooltipOverlay_ = new ol_Overlay_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
        stopEvent: false,
        element: this.helpTooltipElement_,
        offset: [15, 0],
        positioning: 'center-left'
      });
      this.getMap().addOverlay(this.helpTooltipOverlay_);
    }
  };

  _proto.removeHelpTooltip_ = function removeHelpTooltip_() {
    if (this.displayHelpTooltip_) {
      if (this.helpTooltipOverlay_ !== null) {
        this.getMap().removeOverlay(this.helpTooltipOverlay_);
        this.helpTooltipOverlay_ = null;
      }

      if (this.helpTooltipElement_ !== null) {
        if (this.helpTooltipElement_.parentNode) {
          this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_);
        }

        this.helpTooltipElement_ = null;
      }
    }
  };

  _proto.createMeasureTooltip_ = function createMeasureTooltip_() {
    this.removeMeasureTooltip_();
    this.measureTooltipElement_ = document.createElement('div');
    this.measureTooltipElement_.classList.add('tooltip');
    this.measureTooltipElement_.classList.add('ngeo-tooltip-measure');
    this.measureTooltipOverlay_ = new ol_Overlay_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
      element: this.measureTooltipElement_,
      offset: [0, -15],
      positioning: 'bottom-center',
      stopEvent: false
    });
    this.getMap().addOverlay(this.measureTooltipOverlay_);
  };

  _proto.removeMeasureTooltip_ = function removeMeasureTooltip_() {
    if (this.measureTooltipElement_ !== null) {
      if (!this.measureTooltipElement_.parentNode) {
        throw new Error('Missing measureTooltipElement_.parentNode');
      }

      this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_);
      this.measureTooltipElement_ = null;
      this.measureTooltipOverlay_ = null;
      this.measureTooltipOverlayCoord_ = null;
    }
  };

  _proto.updateState_ = function updateState_(evt) {
    var active = this.getActive();
    this.shouldHandleDrawInteractionActiveChange_ = false;
    this.drawInteraction_.setActive(active);
    this.shouldHandleDrawInteractionActiveChange_ = true;

    if (!this.getMap()) {
      return;
    }

    if (active) {
      if (!this.measureTooltipOverlay_) {
        this.createMeasureTooltip_();
        this.createHelpTooltip_();
      }
    } else {
      if (!this.measureTooltipOverlay_) {
        throw new Error('Missing measureTooltipOverlay');
      }

      var source = this.vectorLayer_.getSource();

      if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
        throw new Error('Missing measureTooltipOverlay');
      }

      source.clear(true);
      this.getMap().removeOverlay(this.measureTooltipOverlay_);
      this.removeMeasureTooltip_();
      this.removeHelpTooltip_();
      this.unlistenerEvent_();
    }
  };

  _proto.handleMeasure = function handleMeasure(callback) {};

  _proto.getTooltipElement = function getTooltipElement() {
    if (!this.measureTooltipElement_) {
      throw new Error('Missing measureTooltipElement');
    }

    return this.measureTooltipElement_;
  };

  _proto.handleDrawInteractionActiveChange_ = function handleDrawInteractionActiveChange_(evt) {
    if (this.shouldHandleDrawInteractionActiveChange_) {
      this.setActive(this.drawInteraction_.getActive());
    }
  };

  return Measure;
}(ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__["default"]);

function getFormattedArea(polygon, projection, precision, format, spherical) {
  if (spherical === void 0) {
    spherical = false;
  }

  var area;

  if (spherical) {
    var geom = polygon.clone().transform(projection, 'EPSG:4326');
    area = Math.abs(Object(ol_sphere_js__WEBPACK_IMPORTED_MODULE_4__["getArea"])(geom, {
      'projection': 'EPSG:4326'
    }));
  } else {
    area = polygon.getArea();
  }

  return format(area, 'm²', 'square', precision);
}
function getFormattedCircleArea(circle, precision, format) {
  var area = Math.PI * Math.pow(circle.getRadius(), 2);
  return format(area, 'm²', 'square', precision);
}
function getFormattedLength(lineString, projection, precision, format, spherical) {
  if (spherical === void 0) {
    spherical = false;
  }

  var length = 0;

  if (spherical) {
    var coordinates = lineString.getCoordinates();

    for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {
      var c1 = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_2__["transform"])(coordinates[i], projection, 'EPSG:4326');
      var c2 = Object(ol_proj_js__WEBPACK_IMPORTED_MODULE_2__["transform"])(coordinates[i + 1], projection, 'EPSG:4326');
      length += Object(ol_sphere_js__WEBPACK_IMPORTED_MODULE_4__["getDistance"])(c1, c2);
    }
  } else {
    length = lineString.getLength();
  }

  return format(length, 'm', 'unit', precision);
}
function getFormattedPoint(point, decimals, format, opt_template) {
  return format(point.getCoordinates(), decimals, opt_template);
}

function handleEvent_(evt) {
  if (evt.type != 'pointermove' || evt.dragging) {
    return true;
  }

  var helpMsg = this.sketchFeature === null ? this.startMsg : this.continueMsg;

  if (this.displayHelpTooltip_ && helpMsg) {
    if (!this.helpTooltipElement_) {
      throw new Error('Missing helpTooltipElement');
    }

    if (!this.helpTooltipOverlay_) {
      throw new Error('Missing helpTooltipOverlay');
    }

    Object(ol_dom_js__WEBPACK_IMPORTED_MODULE_1__["removeChildren"])(this.helpTooltipElement_);
    this.helpTooltipElement_.appendChild(helpMsg);
    this.helpTooltipOverlay_.setPosition(evt.coordinate);
  }

  return true;
}

/* harmony default export */ __webpack_exports__["default"] = (Measure);

/***/ }),

/***/ "./src/interaction/MeasureArea.js":
/*!****************************************!*\
  !*** ./src/interaction/MeasureArea.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }





var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(format, gettextCatalog, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _ngeoInteractionMeasu.call(this, options) || this;
    var continueMsg;

    if (options.continueMsg !== undefined) {
      continueMsg = options.continueMsg;
    } else {
      continueMsg = document.createElement('span');
      continueMsg.textContent = gettextCatalog.getString('Click to continue drawing the polygon.');
      var br = document.createElement('br');
      br.textContent = gettextCatalog.getString('Double-click or click starting point to finish.');
      continueMsg.appendChild(br);
    }

    _this.continueMsg = continueMsg;
    _this.format = format;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'Polygon',
      source: source,
      style: style
    });
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Missing geometry');
    }

    var proj = this.getMap().getView().getProjection();
    console.assert(proj);
    var output = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["getFormattedArea"])(geom, proj, this.precision, this.format);
    var verticesCount = geom.getCoordinates()[0].length;
    var coord = null;

    if (verticesCount > 3) {
      coord = geom.getInteriorPoint().getCoordinates();
    }

    callback(output, coord);
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/interaction/MeasureAzimut.js":
/*!******************************************!*\
  !*** ./src/interaction/MeasureAzimut.js ***!
  \******************************************/
/*! exports provided: default, getAzimut, getFormattedAzimutRadius */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAzimut", function() { return getAzimut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedAzimutRadius", function() { return getFormattedAzimutRadius; });
/* harmony import */ var ngeo_interaction_DrawAzimut_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/DrawAzimut.js */ "./src/interaction/DrawAzimut.js");
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/GeometryCollection.js */ "./node_modules/ol/geom/GeometryCollection.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }






var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(unitPrefixFormat, numberFormat, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _ngeoInteractionMeasu.call(this, options) || this;
    var continueMsg;

    if (options.continueMsg !== undefined) {
      continueMsg = options.continueMsg;
    } else {
      continueMsg = document.createElement('span');
      continueMsg.textContent = 'Click to finish.';
    }

    _this.continueMsg = continueMsg;
    _this.numberFormat = numberFormat;
    _this.unitPrefixFormat = unitPrefixFormat;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    return new ngeo_interaction_DrawAzimut_js__WEBPACK_IMPORTED_MODULE_0__["default"]({
      source: source,
      style: style
    });
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_3__["default"])) {
      throw new Error('Missing geometry');
    }

    var line = geom.getGeometries()[0];

    if (!(line instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Missing line');
    }

    var output = getFormattedAzimutRadius(line, this.getMap().getView().getProjection(), this.decimals, this.precision, this.unitPrefixFormat, this.numberFormat);
    callback(output, line.getLastCoordinate());
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_1__["default"]);


function getAzimut(line) {
  var coords = line.getCoordinates();
  var dx = coords[1][0] - coords[0][0];
  var dy = coords[1][1] - coords[0][1];
  var rad = Math.acos(dy / Math.sqrt(dx * dx + dy * dy));
  var factor = dx > 0 ? 1 : -1;
  return factor * rad * 180 / Math.PI % 360;
}

function getFormattedAzimut(line, decimals, format) {
  var azimut = getAzimut(line);
  return format(azimut, decimals) + "\xB0";
}

function getFormattedAzimutRadius(line, projection, decimals, precision, formatLength, formatAzimut) {
  var output = getFormattedAzimut(line, decimals, formatAzimut);
  output += ", " + Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_1__["getFormattedLength"])(line, projection, precision, formatLength);
  return output;
}

/***/ }),

/***/ "./src/interaction/MeasureLength.js":
/*!******************************************!*\
  !*** ./src/interaction/MeasureLength.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/coordinate.js */ "./node_modules/ol/coordinate.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }






var modifierPressed;

var _default = function (_ngeoInteractionMeasu) {
  _inheritsLoose(_default, _ngeoInteractionMeasu);

  function _default(format, gettextCatalog, options) {
    var _this;

    if (options === void 0) {
      options = {};
    }

    _this = _ngeoInteractionMeasu.call(this, options) || this;

    if (modifierPressed === undefined) {
      modifierPressed = false;
      document.body.addEventListener('keydown', function (evt) {
        modifierPressed = evt.keyCode === 17;
      });
      document.body.addEventListener('keyup', function () {
        modifierPressed = false;
      });
    }

    if (options.continueMsg !== undefined) {
      _this.continueMsg = options.continueMsg;
    } else {
      _this.continueMsg = document.createElement('span');
      _this.continueMsg.textContent = gettextCatalog.getString('Click to continue drawing the line.');
      var br = document.createElement('br');
      br.textContent = gettextCatalog.getString('Double-click or click last point to finish.');

      _this.continueMsg.appendChild(br);
    }

    _this.spherical = false;
    _this.format = format;
    _this.tolerance = options.tolerance;
    _this.source = options.source;
    return _this;
  }

  var _proto = _default.prototype;

  _proto.createDrawInteraction = function createDrawInteraction(style, source) {
    var _this2 = this;

    return new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      type: 'LineString',
      geometryFunction: function geometryFunction(coordinates, opt_geometry) {
        return _this2.linestringGeometryFunction(coordinates, opt_geometry);
      },
      condition: function condition() {
        return true;
      },
      style: style,
      source: source
    });
  };

  _proto.linestringGeometryFunction = function linestringGeometryFunction(coordinates, opt_geometry) {
    var _this3 = this;

    if (modifierPressed) {
      var viewRotation = this.getMap().getView().getRotation();
      var angle = Math.PI / 4;
      var from = coordinates[coordinates.length - 2];
      var to = coordinates[coordinates.length - 1];
      var dx = from[0] - to[0];
      var dy = from[1] - to[1];
      var length = Object(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__["distance"])(from, to);
      var rotation = viewRotation + Math.round((Math.atan2(dy, dx) - viewRotation) / angle) * angle;
      to[0] = from[0] - length * Math.cos(rotation);
      to[1] = from[1] - length * Math.sin(rotation);

      if (this.tolerance !== undefined && this.source !== undefined) {
        var view = this.getMap().getView();

        if (!view) {
          throw new Error('Missing view');
        }

        var resolution = view.getResolution();

        if (!resolution) {
          throw new Error('Missing resolution');
        }

        var delta = resolution * this.tolerance;
        var bbox = [to[0] - delta, to[1] - delta, to[0] + delta, to[1] + delta];
        var layerSource = this.source;
        var featuresInExtent = layerSource.getFeaturesInExtent(bbox);
        featuresInExtent.forEach(function (feature) {
          var lastIntersection = [];
          var bestIntersection = [];
          var bestDistance = Infinity;
          var distanceFromTo = Object(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__["distance"])(from, to);
          var ax = from[0];
          var ay = from[1];
          var mx = to[0];
          var my = to[1];
          var unitVector = [(mx - ax) / distanceFromTo, (my - ay) / distanceFromTo];
          var b = [ax + (distanceFromTo + delta) * unitVector[0], ay + (distanceFromTo + delta) * unitVector[1]];
          var geom = feature.getGeometry();

          if (!(geom instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
            throw new Error('Wrong geometry type');
          }

          geom.forEachSegment(function (point1, point2) {
            lastIntersection = _this3.computeLineSegmentIntersection([from, b], [point1, point2]);

            if (lastIntersection !== undefined && Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_4__["containsXY"])(bbox, lastIntersection[0], lastIntersection[1])) {
              var lastDistance = Object(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_3__["distance"])(to, lastIntersection);

              if (lastDistance < bestDistance) {
                bestDistance = lastDistance;
                bestIntersection = lastIntersection;
              }
            }
          });

          if (bestIntersection) {
            to[0] = bestIntersection[0] || to[0];
            to[1] = bestIntersection[1] || to[1];
          }
        });
      }
    }

    var geometry = opt_geometry;

    if (geometry) {
      geometry.setCoordinates(coordinates);
      return geometry;
    }

    return new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"](coordinates);
  };

  _proto.handleMeasure = function handleMeasure(callback) {
    if (!this.sketchFeature) {
      throw new Error('Missing sketchFeature');
    }

    var geom = this.sketchFeature.getGeometry();

    if (!(geom instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_2__["default"])) {
      throw new Error('Wrong geometry type');
    }

    var proj = this.getMap().getView().getProjection();
    console.assert(proj);
    var output = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["getFormattedLength"])(geom, proj, this.precision, this.format, this.spherical);
    var coord = geom.getLastCoordinate();
    callback(output, coord);
  };

  _proto.computeLineSegmentIntersection = function computeLineSegmentIntersection(line1, line2) {
    var numerator1A = (line2[1][0] - line2[0][0]) * (line1[0][1] - line2[0][1]) - (line2[1][1] - line2[0][1]) * (line1[0][0] - line2[0][0]);
    var numerator1B = (line1[1][0] - line1[0][0]) * (line1[0][1] - line2[0][1]) - (line1[1][1] - line1[0][1]) * (line1[0][0] - line2[0][0]);
    var denominator1 = (line2[1][1] - line2[0][1]) * (line1[1][0] - line1[0][0]) - (line2[1][0] - line2[0][0]) * (line1[1][1] - line1[0][1]);

    if (denominator1 === 0) {
      return;
    }

    var ua1 = numerator1A / denominator1;
    var ub1 = numerator1B / denominator1;

    if (ua1 >= 0 && ua1 <= 1 && ub1 >= 0 && ub1 <= 1) {
      var result = [];
      result[0] = line1[0][0] + ua1 * (line1[1][0] - line1[0][0]);
      result[1] = line1[0][1] + ua1 * (line1[1][1] - line1[0][1]);
      return result;
    }
  };

  return _default;
}(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/interaction/Modify.js":
/*!***********************************!*\
  !*** ./src/interaction/Modify.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_interaction_ModifyCircle_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/interaction/ModifyCircle.js */ "./src/interaction/ModifyCircle.js");
/* harmony import */ var ngeo_interaction_ModifyRectangle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/interaction/ModifyRectangle.js */ "./src/interaction/ModifyRectangle.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_functions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/functions.js */ "./node_modules/ol/functions.js");
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
/* harmony import */ var ol_interaction_Modify_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/interaction/Modify.js */ "./node_modules/ol/interaction/Modify.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }













var _default = function (_olInteractionInterac) {
  _inheritsLoose(_default, _olInteractionInterac);

  function _default(options) {
    var _this;

    _this = _olInteractionInterac.call(this, {
      handleEvent: ol_functions_js__WEBPACK_IMPORTED_MODULE_5__["TRUE"]
    }) || this;
    console.assert(options.features);
    _this.features_ = options.features;
    _this.listenerKeys_ = [];
    _this.interactions_ = [];
    _this.otherFeatures_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();

    _this.interactions_.push(new ol_interaction_Modify_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
      deleteCondition: ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__["deleteCondition"],
      features: _this.otherFeatures_,
      pixelTolerance: options.pixelTolerance,
      style: options.style,
      wrapX: options.wrapX
    }));

    _this.circleFeatures_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();

    _this.interactions_.push(new ngeo_interaction_ModifyCircle_js__WEBPACK_IMPORTED_MODULE_2__["default"]({
      features: _this.circleFeatures_,
      pixelTolerance: options.pixelTolerance,
      style: options.style,
      wrapX: options.wrapX
    }, options.nbPoints));

    _this.rectangleFeatures_ = new ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["default"]();

    _this.interactions_.push(new ngeo_interaction_ModifyRectangle_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
      features: _this.rectangleFeatures_,
      pixelTolerance: options.pixelTolerance,
      style: options.style,
      wrapX: options.wrapX
    }));

    return _this;
  }

  var _proto = _default.prototype;

  _proto.setActive = function setActive(active) {
    _olInteractionInterac.prototype.setActive.call(this, active);

    this.setState_();
  };

  _proto.setMap = function setMap(map) {
    var interactions = this.interactions_;
    var currentMap = this.getMap();

    if (currentMap) {
      interactions.forEach(function (interaction) {
        currentMap.removeInteraction(interaction);
      });
    }

    _olInteractionInterac.prototype.setMap.call(this, map);

    if (map) {
      interactions.forEach(function (interaction) {
        map.addInteraction(interaction);
      });
    }

    this.setState_();
  };

  _proto.setState_ = function setState_() {
    var _this2 = this;

    var map = this.getMap();
    var active = this.getActive();
    var interactions = this.interactions_;
    var keys = this.listenerKeys_;

    if (!interactions || !keys) {
      return;
    }

    interactions.forEach(function (interaction) {
      interaction.setActive(active && !!map);
    });

    if (active && map) {
      this.features_.forEach(function (feature) {
        return _this2.addFeature_(feature);
      });
      keys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(this.features_, 'add', this.handleFeaturesAdd_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(this.features_, 'remove', this.handleFeaturesRemove_, this));
    } else {
      keys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["unlistenByKey"]);
      keys.length = 0;
      this.features_.forEach(function (feature) {
        return _this2.removeFeature_(feature);
      });
    }
  };

  _proto.handleFeaturesAdd_ = function handleFeaturesAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["CollectionEvent"]) {
      var feature = evt.element;
      console.assert(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_9__["default"], 'feature should be an ol.Feature');
      this.addFeature_(feature);
    }
  };

  _proto.handleFeaturesRemove_ = function handleFeaturesRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_7__["CollectionEvent"]) {
      var feature = evt.element;
      this.removeFeature_(feature);
    }
  };

  _proto.addFeature_ = function addFeature_(feature) {
    var collection = this.getFeatureCollection_(feature);
    collection.push(feature);
  };

  _proto.removeFeature_ = function removeFeature_(feature) {
    var collection = this.getFeatureCollection_(feature);
    collection.remove(feature);
  };

  _proto.getFeatureCollection_ = function getFeatureCollection_(feature) {
    var features;
    var isCircle = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_1__["default"].IS_CIRCLE);
    var isRectangle = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_1__["default"].IS_RECTANGLE);

    if (isCircle === true || isCircle === 'true') {
      features = this.circleFeatures_;
    } else if (isRectangle === true || isRectangle === 'true') {
      features = this.rectangleFeatures_;
    } else {
      features = this.otherFeatures_;
    }

    return features;
  };

  return _default;
}(ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_6__["default"]);



/***/ }),

/***/ "./src/interaction/ModifyCircle.js":
/*!*****************************************!*\
  !*** ./src/interaction/ModifyCircle.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/interaction/common.js */ "./src/interaction/common.js");
/* harmony import */ var ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/interaction/MeasureAzimut.js */ "./src/interaction/MeasureAzimut.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/MapBrowserEvent.js */ "./node_modules/ol/MapBrowserEvent.js");
/* harmony import */ var ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/coordinate.js */ "./node_modules/ol/coordinate.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/geom/Circle.js */ "./node_modules/ol/geom/Circle.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/interaction/Pointer.js */ "./node_modules/ol/interaction/Pointer.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_structs_RBush_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/structs/RBush.js */ "./node_modules/ol/structs/RBush.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }





















var _default = function (_olInteractionPointer) {
  _inheritsLoose(_default, _olInteractionPointer);

  function _default(options, nbPoints) {
    var _this;

    _this = _olInteractionPointer.call(this) || this;
    _this.handleDownEvent = _this.handleDownEvent_;
    _this.handleDragEvent = _this.handleDragEvent_;
    _this.handleUpEvent = _this.handleUpEvent_;
    console.assert(options.features);
    _this.vertexFeature_ = null;
    _this.lastPixel_ = [0, 0];
    _this.modified_ = false;
    _this.rBush_ = new ol_structs_RBush_js__WEBPACK_IMPORTED_MODULE_17__["default"]();
    _this.pixelTolerance_ = options.pixelTolerance !== undefined ? options.pixelTolerance : 10;
    _this.nbPoints = nbPoints || 64;
    _this.snappedToVertex_ = false;
    _this.changingFeature_ = false;
    _this.dragSegments_ = [];
    _this.overlay_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_15__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_16__["default"]({
        useSpatialIndex: false,
        wrapX: !!options.wrapX
      }),
      style: options.style || Object(ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_2__["getDefaultModifyStyleFunction"])(),
      updateWhileAnimating: true,
      updateWhileInteracting: true
    });
    _this.features_ = options.features;

    _this.features_.forEach(function (feature) {
      return _this.addFeature_(feature);
    });

    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["listen"])(_this.features_, 'add', _this.handleFeatureAdd_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_8__["listen"])(_this.features_, 'remove', _this.handleFeatureRemove_, _assertThisInitialized(_this));
    return _this;
  }

  var _proto = _default.prototype;

  _proto.addFeature_ = function addFeature_(feature) {
    var geometry = feature.getGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    if (geometry.getType() === 'Polygon' && !!feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_1__["default"].IS_CIRCLE)) {
      var _geometry = feature.getGeometry();

      this.writeCircleGeometry_(feature, _geometry);
      var map = this.getMap();

      if (map) {
        this.handlePointerAtPixel_(this.lastPixel_, map);
      }
    }
  };

  _proto.willModifyFeatures_ = function willModifyFeatures_(evt) {
    if (!this.modified_) {
      this.modified_ = true;
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__["default"]('modifystart', {
        features: this.features_
      });
      this.dispatchEvent(event);
    }
  };

  _proto.removeFeature_ = function removeFeature_(feature) {
    this.removeFeatureSegmentData_(feature);

    if (this.vertexFeature_ && this.features_.getLength() === 0) {
      this.overlay_.getSource().removeFeature(this.vertexFeature_);
      this.vertexFeature_ = null;
    }
  };

  _proto.removeFeatureSegmentData_ = function removeFeatureSegmentData_(feature) {
    var rBush = this.rBush_;
    var nodesToRemove = [];
    rBush.forEach(function (node) {
      if (feature === node.feature) {
        nodesToRemove.push(node);
      }
    });

    for (var i = nodesToRemove.length - 1; i >= 0; --i) {
      rBush.remove(nodesToRemove[i]);
    }
  };

  _proto.setMap = function setMap(map) {
    this.overlay_.setMap(map);

    _olInteractionPointer.prototype.setMap.call(this, map);
  };

  _proto.handleFeatureAdd_ = function handleFeatureAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__["CollectionEvent"]) {
      var feature = evt.element;
      console.assert(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__["default"], 'feature should be an ol.Feature');
      this.addFeature_(feature);
    }
  };

  _proto.handleFeatureRemove_ = function handleFeatureRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_18__["CollectionEvent"]) {
      var feature = evt.element;
      this.removeFeature_(feature);
    }
  };

  _proto.writeCircleGeometry_ = function writeCircleGeometry_(feature, geometry) {
    var rings = geometry.getCoordinates();

    for (var j = 0, jj = rings.length; j < jj; ++j) {
      var coordinates = rings[j];

      for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {
        var segment = coordinates.slice(i, i + 2);
        var segmentData = {
          feature: feature,
          geometry: geometry,
          depth: [j],
          index: i,
          segment: segment
        };
        this.rBush_.insert(ol_extent_js__WEBPACK_IMPORTED_MODULE_9__["boundingExtent"](segment), segmentData);
      }
    }
  };

  _proto.createOrUpdateVertexFeature_ = function createOrUpdateVertexFeature_(coordinates) {
    var vertexFeature = this.vertexFeature_;

    if (!vertexFeature) {
      vertexFeature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__["default"](new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_12__["default"](coordinates));
      this.vertexFeature_ = vertexFeature;
      this.overlay_.getSource().addFeature(vertexFeature);
    } else {
      var geometry = vertexFeature.getGeometry();

      if (!(geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_12__["default"])) {
        throw new Error('Wrong geometry type');
      }

      geometry.setCoordinates(coordinates);
    }

    return vertexFeature;
  };

  _proto.handlePointerMove_ = function handlePointerMove_(evt) {
    this.lastPixel_ = evt.pixel;
    this.handlePointerAtPixel_(evt.pixel, evt.map);
  };

  _proto.handlePointerAtPixel_ = function handlePointerAtPixel_(pixel, map) {
    var pixelCoordinate = map.getCoordinateFromPixel(pixel);

    var sortByDistance = function sortByDistance(a, b) {
      return ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["squaredDistanceToSegment"](pixelCoordinate, a.segment) - ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["squaredDistanceToSegment"](pixelCoordinate, b.segment);
    };

    var lowerLeft = map.getCoordinateFromPixel([pixel[0] - this.pixelTolerance_, pixel[1] + this.pixelTolerance_]);
    var upperRight = map.getCoordinateFromPixel([pixel[0] + this.pixelTolerance_, pixel[1] - this.pixelTolerance_]);
    var box = ol_extent_js__WEBPACK_IMPORTED_MODULE_9__["boundingExtent"]([lowerLeft, upperRight]);
    var nodes = this.rBush_.getInExtent(box);

    if (nodes.length > 0) {
      nodes.sort(sortByDistance);
      var node = nodes[0];
      var closestSegment = node.segment;
      var vertex = ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["closestOnSegment"](pixelCoordinate, closestSegment);
      var vertexPixel = map.getPixelFromCoordinate(vertex);

      if (Math.sqrt(ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["squaredDistance"](pixel, vertexPixel)) <= this.pixelTolerance_) {
        var pixel1 = map.getPixelFromCoordinate(closestSegment[0]);
        var pixel2 = map.getPixelFromCoordinate(closestSegment[1]);
        var squaredDist1 = ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["squaredDistance"](vertexPixel, pixel1);
        var squaredDist2 = ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["squaredDistance"](vertexPixel, pixel2);
        var dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));
        this.snappedToVertex_ = dist <= this.pixelTolerance_;

        if (this.snappedToVertex_) {
          vertex = squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];
          this.createOrUpdateVertexFeature_(vertex);
          var vertexSegments = {};
          vertexSegments[Object(ol_util_js__WEBPACK_IMPORTED_MODULE_4__["getUid"])(closestSegment)] = true;
          var segment;

          for (var i = 1, ii = nodes.length; i < ii; ++i) {
            segment = nodes[i].segment;

            if (ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["equals"](closestSegment[0], segment[0]) && ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["equals"](closestSegment[1], segment[1]) || ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["equals"](closestSegment[0], segment[1]) && ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["equals"](closestSegment[1], segment[0])) {
              vertexSegments[Object(ol_util_js__WEBPACK_IMPORTED_MODULE_4__["getUid"])(segment)] = true;
            } else {
              break;
            }
          }

          return;
        }
      }
    }

    if (this.vertexFeature_) {
      this.overlay_.getSource().removeFeature(this.vertexFeature_);
      this.vertexFeature_ = null;
    }
  };

  _proto.setGeometryCoordinates_ = function setGeometryCoordinates_(geometry, coordinates) {
    this.changingFeature_ = true;
    geometry.setCoordinates(coordinates);
    this.changingFeature_ = false;
  };

  _proto.handleDownEvent_ = function handleDownEvent_(evt) {
    this.handlePointerAtPixel_(evt.pixel, evt.map);
    this.dragSegments_ = [];
    this.modified_ = false;
    var vertexFeature = this.vertexFeature_;

    if (vertexFeature) {
      var geometry = vertexFeature.getGeometry();

      if (!(geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_12__["default"])) {
        throw new Error('Wrong geometry type');
      }

      var vertex = geometry.getCoordinates();
      var vertexExtent = ol_extent_js__WEBPACK_IMPORTED_MODULE_9__["boundingExtent"]([vertex]);
      var segmentDataMatches = this.rBush_.getInExtent(vertexExtent);
      var componentSegments = {};
      segmentDataMatches.sort(compareIndexes);

      for (var i = 0, ii = segmentDataMatches.length; i < ii; ++i) {
        var segmentDataMatch = segmentDataMatches[i];
        var segment = segmentDataMatch.segment;
        var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_4__["getUid"])(segmentDataMatch.feature);
        var depth = segmentDataMatch.depth;

        if (depth) {
          uid += "-" + depth.join('-');
        }

        if (!componentSegments[uid]) {
          componentSegments[uid] = new Array(2);
        }

        if (ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["equals"](segment[0], vertex) && !componentSegments[uid][0]) {
          this.dragSegments_.push([segmentDataMatch, 0]);
          componentSegments[uid][0] = segmentDataMatch;
        } else if (ol_coordinate_js__WEBPACK_IMPORTED_MODULE_7__["equals"](segment[1], vertex) && !componentSegments[uid][1]) {
          this.dragSegments_.push([segmentDataMatch, 1]);
          componentSegments[uid][1] = segmentDataMatch;
        }
      }
    }

    return !!this.vertexFeature_;
  };

  _proto.handleDragEvent_ = function handleDragEvent_(evt) {
    this.willModifyFeatures_(evt);
    var vertex = evt.coordinate;
    var geometry = this.dragSegments_[0][0].geometry;
    var center = ol_extent_js__WEBPACK_IMPORTED_MODULE_9__["getCenter"](geometry.getExtent());
    var line = new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]([center, vertex]);
    var circle = new ol_geom_Circle_js__WEBPACK_IMPORTED_MODULE_10__["default"](center, line.getLength());
    var coordinates = Object(ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_13__["fromCircle"])(circle, this.nbPoints).getCoordinates();
    this.setGeometryCoordinates_(geometry, coordinates);
    var azimut = Object(ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_3__["getAzimut"])(line);
    this.features_.getArray()[0].set(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_1__["default"].AZIMUT, azimut);
    this.createOrUpdateVertexFeature_(vertex);
  };

  _proto.handleUpEvent_ = function handleUpEvent_(evt) {
    this.rBush_.clear();
    this.writeCircleGeometry_(this.dragSegments_[0][0].feature, this.dragSegments_[0][0].geometry);

    if (this.modified_) {
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_0__["default"]('modifyend', {
        features: this.features_
      });
      this.dispatchEvent(event);
      this.modified_ = false;
    }

    return false;
  };

  _proto.handleEvent = function handleEvent(mapBrowserEvent) {
    if (!(mapBrowserEvent instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_6__["default"])) {
      return true;
    }

    var handled;

    if (!mapBrowserEvent.map.getView().getInteracting() && mapBrowserEvent.type == 'pointermove' && !this.handlingDownUpSequence) {
      this.handlePointerMove_(mapBrowserEvent);
    }

    return _olInteractionPointer.prototype.handleEvent.call(this, mapBrowserEvent) && !handled;
  };

  return _default;
}(ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_14__["default"]);



function compareIndexes(a, b) {
  return a.index - b.index;
}

/***/ }),

/***/ "./src/interaction/ModifyRectangle.js":
/*!********************************************!*\
  !*** ./src/interaction/ModifyRectangle.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/common.js */ "./src/interaction/common.js");
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/interaction/Pointer.js */ "./node_modules/ol/interaction/Pointer.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }













var ModifyRectangle = function (_olInteractionPointer) {
  _inheritsLoose(ModifyRectangle, _olInteractionPointer);

  function ModifyRectangle(options) {
    var _this;

    _this = _olInteractionPointer.call(this) || this;
    console.assert(options.features);
    _this.handleDownEvent = _this.handleDown_;
    _this.handleDragEvent = _this.handleDrag_;
    _this.handleUpEvent = _this.handleUp_;
    _this.modified_ = false;
    _this.vectorPoints_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
        wrapX: !!options.wrapX
      }),
      visible: _this.getActive(),
      style: options.style || Object(ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__["getDefaultModifyStyleFunction"])(),
      updateWhileAnimating: true,
      updateWhileInteracting: true
    });
    _this.features_ = options.features;
    _this.feature_ = null;
    _this.cache_ = {};
    _this.params_ = null;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(_this.features_, 'add', _this.handleFeatureAdd_, _assertThisInitialized(_this));
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(_this.features_, 'remove', _this.handleFeatureRemove_, _assertThisInitialized(_this));

    _this.features_.forEach(function (feature) {
      _this.addFeature_(feature);
    });

    return _this;
  }

  var _proto = ModifyRectangle.prototype;

  _proto.setActive = function setActive(active) {
    ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_7__["default"].prototype.setActive.call(this, active);

    if (this.vectorPoints_) {
      this.vectorPoints_.setVisible(active);
    }
  };

  _proto.addFeature_ = function addFeature_(feature) {
    var featureGeom = feature.getGeometry();

    if (featureGeom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
      var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature);
      var item = this.cache_[uid];

      if (item) {
        return;
      }

      var pointSource = this.vectorPoints_.getSource();
      var corners = featureGeom.getCoordinates()[0];

      while (corners.length > 4) {
        if (corners[0][0] < corners[1][0] && corners[0][1] <= corners[1][1]) {
          corners.pop();
        } else {
          corners.shift();
        }
      }

      var pointFeatures = [];
      var cornerPoint;
      var cornerFeature;
      corners.forEach(function (corner) {
        cornerPoint = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"](corner);
        cornerFeature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
          'corner': true,
          'geometry': cornerPoint,
          'siblingX': null,
          'siblingY': null,
          'boxFeature': feature
        });
        pointFeatures.push(cornerFeature);
      }, this);
      item = {
        corners: pointFeatures
      };
      this.cache_[uid] = item;
      var previousFeature;
      var nextFeature;
      pointFeatures.forEach(function (cornerFeature, index) {
        previousFeature = pointFeatures[index - 1];

        if (!previousFeature) {
          previousFeature = pointFeatures[pointFeatures.length - 1];
        }

        nextFeature = pointFeatures[index + 1];

        if (!nextFeature) {
          nextFeature = pointFeatures[0];
        }

        if (index % 2 === 0) {
          cornerFeature.set('siblingX', nextFeature);
          cornerFeature.set('siblingY', previousFeature);
        } else {
          cornerFeature.set('siblingX', previousFeature);
          cornerFeature.set('siblingY', nextFeature);
        }
      }, this);
      pointSource.addFeatures(pointFeatures);
    }
  };

  _proto.willModifyFeatures_ = function willModifyFeatures_(evt) {
    if (!this.modified_) {
      this.modified_ = true;
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('modifystart', {
        features: this.features_
      });
      this.dispatchEvent(event);
      this.params_ = this.initializeParams_();
    }
  };

  _proto.initializeParams_ = function initializeParams_() {
    if (!this.feature_) {
      throw new Error('Missing feature');
    }

    var feature = this.feature_;
    var siblingY = feature.get('siblingX');
    console.assert(siblingY instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
    var origin = siblingY.get('siblingY');
    console.assert(origin instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
    var originPoint = origin.getGeometry();
    console.assert(originPoint instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"]);
    var originCoordinate = originPoint.getCoordinates();
    var originPixel = this.getMap().getPixelFromCoordinate(originCoordinate);
    var siblingX = origin.get('siblingX');
    console.assert(siblingX instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
    var siblingXPoint = siblingX.getGeometry();
    console.assert(siblingXPoint instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"]);
    var siblingXCoordinate = siblingXPoint.getCoordinates();
    var siblingXPixel = this.getMap().getPixelFromCoordinate(siblingXCoordinate);
    var vectorX = [siblingXPixel[0] - originPixel[0], siblingXPixel[1] - originPixel[1]];
    var vectorXMagnitude = Math.sqrt(vectorX[0] * vectorX[0] + vectorX[1] * vectorX[1]);
    vectorX[0] /= vectorXMagnitude;
    vectorX[1] /= vectorXMagnitude;
    var siblingYPoint = siblingY.getGeometry();
    console.assert(siblingYPoint instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"]);
    var siblingYCoordinate = siblingYPoint.getCoordinates();
    var siblingYPixel = this.getMap().getPixelFromCoordinate(siblingYCoordinate);
    var vectorY = [siblingYPixel[0] - originPixel[0], siblingYPixel[1] - originPixel[1]];
    var vectorYMagnitude = Math.sqrt(vectorY[0] * vectorY[0] + vectorY[1] * vectorY[1]);
    vectorY[0] /= vectorYMagnitude;
    vectorY[1] /= vectorYMagnitude;

    if (isNaN(vectorX[0]) && isNaN(vectorY[0])) {
      vectorX = [0, 1];
      vectorY = [1, 0];
    } else if (isNaN(vectorX[0])) {
      vectorX = [vectorY[1], -vectorY[0]];
    } else if (isNaN(vectorY[0])) {
      vectorY = [vectorX[1], -vectorX[0]];
    }

    return {
      originCoordinate: originCoordinate,
      originPixel: originPixel,
      siblingXPoint: siblingXPoint,
      siblingYPoint: siblingYPoint,
      vectorX: vectorX,
      vectorY: vectorY
    };
  };

  _proto.removeFeature_ = function removeFeature_(feature) {
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature);
    var item = this.cache_[uid];
    var corners = item.corners;

    for (var _iterator = _createForOfIteratorHelperLoose(corners), _step; !(_step = _iterator()).done;) {
      var corner = _step.value;
      this.vectorPoints_.getSource().removeFeature(corner);
    }

    this.feature_ = null;
    corners.length = 0;
    delete this.cache_[uid];
  };

  _proto.setMap = function setMap(map) {
    this.vectorPoints_.setMap(map);
    ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_7__["default"].prototype.setMap.call(this, map);
  };

  _proto.handleFeatureAdd_ = function handleFeatureAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_10__["CollectionEvent"]) {
      var feature = evt.element;
      console.assert(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"], 'feature should be an ol.Feature');
      this.addFeature_(feature);
    }
  };

  _proto.handleFeatureRemove_ = function handleFeatureRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_10__["CollectionEvent"]) {
      var feature = evt.element;
      this.removeFeature_(feature);
    }
  };

  _proto.handleDown_ = function handleDown_(evt) {
    var map = evt.map;
    var feature = map.forEachFeatureAtPixel(evt.pixel, function (feature) {
      return feature.get('siblingX') && feature.get('siblingY') ? feature : undefined;
    });

    if (feature) {
      this.feature_ = feature;
      return true;
    }

    return false;
  };

  _proto.handleDrag_ = function handleDrag_(evt) {
    this.willModifyFeatures_(evt);

    if (!this.feature_) {
      throw new Error('Missing feature');
    }

    var feature = this.feature_;
    var geometry = feature.getGeometry();

    if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
      geometry.setCoordinates(evt.coordinate);

      if (!this.params_) {
        throw new Error('Missing params');
      }

      var destinationPixel = evt.pixel;
      var originPixel = this.params_.originPixel;
      var siblingXPoint = this.params_.siblingXPoint;
      var siblingYPoint = this.params_.siblingYPoint;
      var vectorX = this.params_.vectorX;
      var vectorY = this.params_.vectorY;
      var originCoordinate = this.params_.originCoordinate;
      var b2Pixel = this.calculateNewPixel_(originPixel, destinationPixel, vectorX);
      var b2Coordinate = this.getMap().getCoordinateFromPixel(b2Pixel);
      siblingXPoint.setCoordinates(b2Coordinate);
      var c2Pixel = this.calculateNewPixel_(originPixel, destinationPixel, vectorY);
      var c2Coordinate = this.getMap().getCoordinateFromPixel(c2Pixel);
      siblingYPoint.setCoordinates(c2Coordinate);
      var boxFeature = feature.get('boxFeature');
      var geom = boxFeature.getGeometry();
      console.assert(geom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__["default"]);
      geom.setCoordinates([[evt.coordinate, b2Coordinate, originCoordinate, c2Coordinate, evt.coordinate]]);
    }
  };

  _proto.calculateNewPixel_ = function calculateNewPixel_(origin, destination, vector) {
    var aVector = [destination[0] - origin[0], destination[1] - origin[1]];
    var abScalarProduct = aVector[0] * vector[0] + aVector[1] * vector[1];
    var deltaVector = [vector[0] * abScalarProduct, vector[1] * abScalarProduct];
    return [deltaVector[0] + origin[0], deltaVector[1] + origin[1]];
  };

  _proto.handleUp_ = function handleUp_(evt) {
    if (this.modified_) {
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('modifyend', {
        features: this.features_
      });
      this.dispatchEvent(event);
      this.params_ = null;
      this.modified_ = false;
    }

    return false;
  };

  return ModifyRectangle;
}(ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_7__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (ModifyRectangle);

/***/ }),

/***/ "./src/interaction/Rotate.js":
/*!***********************************!*\
  !*** ./src/interaction/Rotate.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/interaction/common.js */ "./src/interaction/common.js");
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/interaction/Pointer.js */ "./node_modules/ol/interaction/Pointer.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }















var _default = function (_olInteractionPointer) {
  _inheritsLoose(_default, _olInteractionPointer);

  function _default(options) {
    var _this;

    _this = _olInteractionPointer.call(this) || this;
    console.assert(options.features);
    _this.handleDownEvent = _this.handleDown_;
    _this.handleDragEvent = _this.handleDrag_;
    _this.handleUpEvent = _this.handleUp_;
    _this.listenerKeys_ = [];
    _this.modified_ = false;
    _this.keyPressListenerKey_ = null;
    _this.changingFeature_ = false;
    _this.pixelTolerance_ = options.pixelTolerance !== undefined ? options.pixelTolerance : 10;
    _this.features_ = options.features;
    _this.feature_ = null;
    _this.coordinate_ = null;
    _this.centerCoordinate_ = null;
    _this.overlay_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
      source: new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        useSpatialIndex: false,
        wrapX: !!options.wrapX
      }),
      style: options.style || Object(ngeo_interaction_common_js__WEBPACK_IMPORTED_MODULE_0__["getDefaultModifyStyleFunction"])(),
      updateWhileAnimating: true,
      updateWhileInteracting: true
    });
    _this.centerFeatures_ = {};
    return _this;
  }

  var _proto = _default.prototype;

  _proto.setActive = function setActive(active) {
    var _this2 = this;

    if (!this.features_) {
      return;
    }

    if (this.keyPressListenerKey_) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"])(this.keyPressListenerKey_);
      this.keyPressListenerKey_ = null;
    }

    ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_6__["default"].prototype.setActive.call(this, active);

    if (active) {
      this.keyPressListenerKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(document, 'keyup', this.handleKeyUp_, this);
      this.features_.forEach(function (feature) {
        return _this2.addFeature_(feature);
      });
      this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.features_, 'add', this.handleFeatureAdd_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.features_, 'remove', this.handleFeatureRemove_, this));
    } else {
      this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["unlistenByKey"]);
      this.listenerKeys_.length = 0;
      this.features_.forEach(function (feature) {
        return _this2.removeFeature_(feature);
      });
    }
  };

  _proto.addFeature_ = function addFeature_(feature) {
    var geometry = feature.getGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    feature.set('angle', 0);
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature);
    var point = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_7__["default"](this.getCenterCoordinate_(geometry));
    var centerFeature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__["default"](point);
    this.centerFeatures_[uid] = centerFeature;
    this.overlay_.getSource().addFeature(centerFeature);
  };

  _proto.willModifyFeatures_ = function willModifyFeatures_(evt) {
    if (!this.modified_) {
      this.modified_ = true;
      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('modifystart', {
        features: this.features_
      });
      this.dispatchEvent(event);
    }
  };

  _proto.removeFeature_ = function removeFeature_(feature) {
    this.feature_ = null;

    if (feature) {
      var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature);

      if (this.centerFeatures_[uid]) {
        var source = this.overlay_.getSource();

        if (!(source instanceof ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_11__["default"])) {
          throw new Error('Wrong source type');
        }

        source.removeFeature(this.centerFeatures_[uid]);
        delete this.centerFeatures_[uid];
      }
    }
  };

  _proto.setMap = function setMap(map) {
    this.overlay_.setMap(map);
    ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_6__["default"].prototype.setMap.call(this, map);
  };

  _proto.handleFeatureAdd_ = function handleFeatureAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_12__["CollectionEvent"]) {
      var feature = evt.element;
      console.assert(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__["default"], 'feature should be an ol.Feature');
      this.addFeature_(feature);
    }
  };

  _proto.handleFeatureRemove_ = function handleFeatureRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_12__["CollectionEvent"]) {
      var feature = evt.element;
      this.removeFeature_(feature);
    }
  };

  _proto.handleDown_ = function handleDown_(evt) {
    var map = evt.map;
    var feature = map.forEachFeatureAtPixel(evt.pixel, function (feature, layer) {
      return feature;
    }, undefined);

    if (feature) {
      var found = false;
      this.features_.forEach(function (f) {
        if (Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(f) == Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature)) {
          found = true;
        }
      });

      if (!found) {
        feature = undefined;
      }
    }

    if (feature) {
      this.coordinate_ = evt.coordinate;
      this.feature_ = feature;
      var geometry = this.feature_.getGeometry();

      if (geometry !== undefined) {
        this.centerCoordinate_ = this.getCenterCoordinate_(geometry);
      }

      return true;
    }

    return false;
  };

  _proto.getCenterCoordinate_ = function getCenterCoordinate_(geometry) {
    var center;

    if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
      center = geometry.getFlatMidpoint();
    } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
      center = geometry.getFlatInteriorPoint();
    } else {
      var extent = geometry.getExtent();
      center = ol_extent_js__WEBPACK_IMPORTED_MODULE_3__["getCenter"](extent);
    }

    return center;
  };

  _proto.handleDrag_ = function handleDrag_(evt) {
    this.willModifyFeatures_(evt);

    if (!this.feature_) {
      throw new Error('Missing feature');
    }

    if (!this.coordinate_) {
      throw new Error('Missing coordinate');
    }

    if (!this.centerCoordinate_) {
      throw new Error('Missing centerCoordinate');
    }

    var geometry = this.feature_.getGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    var oldX = this.coordinate_[0];
    var oldY = this.coordinate_[1];
    var centerX = this.centerCoordinate_[0];
    var centerY = this.centerCoordinate_[1];
    var dx1 = oldX - centerX;
    var dy1 = oldY - centerY;
    var dx0 = evt.coordinate[0] - centerX;
    var dy0 = evt.coordinate[1] - centerY;
    this.coordinate_[0] = evt.coordinate[0];
    this.coordinate_[1] = evt.coordinate[1];
    var a0 = Math.atan2(dy0, dx0);
    var a1 = Math.atan2(dy1, dx1);
    var angle = a1 - a0;
    geometry.rotate(-angle, [centerX, centerY]);
  };

  _proto.handleUp_ = function handleUp_(evt) {
    if (this.modified_) {
      if (!this.feature_) {
        throw new Error('Missing feature');
      }

      var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('rotateend', {
        feature: this.feature_
      });
      this.dispatchEvent(event);
      this.modified_ = false;
      this.setActive(false);
    }

    return false;
  };

  _proto.handleKeyUp_ = function handleKeyUp_(evt) {
    if (evt instanceof KeyboardEvent && evt.keyCode === 27) {
      this.setActive(false);
    }
  };

  return _default;
}(ol_interaction_Pointer_js__WEBPACK_IMPORTED_MODULE_6__["default"]);



/***/ }),

/***/ "./src/interaction/Translate.js":
/*!**************************************!*\
  !*** ./src/interaction/Translate.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/geom/Geometry.js */ "./node_modules/ol/geom/Geometry.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_interaction_Translate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/interaction/Translate.js */ "./node_modules/ol/interaction/Translate.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }














var _default = function (_olInteractionTransla) {
  _inheritsLoose(_default, _olInteractionTransla);

  function _default(options) {
    var _this;

    _this = _olInteractionTransla.call(this, options) || this;
    _this.listenerKeys_ = [];
    _this.featureListenerKeys_ = {};
    _this.keyPressListenerKey_ = null;
    _this.myFeatures_ = options.features !== undefined ? options.features : null;
    _this.vectorSource_ = new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
      useSpatialIndex: false
    });
    _this.vectorLayer_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
      source: _this.vectorSource_,
      style: options.style,
      updateWhileAnimating: true,
      updateWhileInteracting: true
    });
    _this.centerFeatures_ = {};
    return _this;
  }

  var _proto = _default.prototype;

  _proto.setActive = function setActive(active) {
    if (this.keyPressListenerKey_) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["unlistenByKey"])(this.keyPressListenerKey_);
      this.keyPressListenerKey_ = null;
    }

    ol_interaction_Translate_js__WEBPACK_IMPORTED_MODULE_8__["default"].prototype.setActive.call(this, active);

    if (active) {
      this.keyPressListenerKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(document, 'keyup', this.handleKeyUp_, this);
    }

    this.setState_();
  };

  _proto.setMap = function setMap(map) {
    var currentMap = this.getMap();

    if (currentMap) {
      this.vectorLayer_.setMap(null);
    }

    ol_interaction_Translate_js__WEBPACK_IMPORTED_MODULE_8__["default"].prototype.setMap.call(this, map);

    if (map) {
      this.vectorLayer_.setMap(map);
    }

    this.setState_();
  };

  _proto.setState_ = function setState_() {
    var _this2 = this;

    var map = this.getMap();
    var active = this.getActive();
    var features = this.myFeatures_;
    var keys = this.listenerKeys_;

    if (!features || !keys) {
      return;
    }

    if (map && active && features) {
      features.forEach(function (feature) {
        return _this2.addFeature_(feature);
      });
      keys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(features, 'add', this.handleFeaturesAdd_, this), Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(features, 'remove', this.handleFeaturesRemove_, this));
    } else {
      if (map) {
        var elem = map.getTargetElement();
        elem.style.cursor = 'default';
      }

      keys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["unlistenByKey"]);
      keys.length = 0;
      features.forEach(function (feature) {
        return _this2.removeFeature_(feature);
      });
    }
  };

  _proto.handleFeaturesAdd_ = function handleFeaturesAdd_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_11__["CollectionEvent"]) {
      var feature = evt.element;
      console.assert(feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"], 'feature should be an ol.Feature');
      this.addFeature_(feature);
    }
  };

  _proto.handleFeaturesRemove_ = function handleFeaturesRemove_(evt) {
    if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_11__["CollectionEvent"]) {
      var feature = evt.element;
      this.removeFeature_(feature);
    }
  };

  _proto.addFeature_ = function addFeature_(feature) {
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_0__["getUid"])(feature);
    var geometry = feature.getGeometry();

    if (!geometry) {
      throw new Error('Missing geometry');
    }

    this.featureListenerKeys_[uid] = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(geometry, 'change', this.handleGeometryChange_.bind(this, feature), this);
    var point = this.getGeometryCenterPoint_(geometry);
    var centerFeature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"](point);
    this.centerFeatures_[uid] = centerFeature;
    this.vectorSource_.addFeature(centerFeature);
  };

  _proto.removeFeature_ = function removeFeature_(feature) {
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_0__["getUid"])(feature);

    if (this.featureListenerKeys_[uid]) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["unlistenByKey"])(this.featureListenerKeys_[uid]);
      delete this.featureListenerKeys_[uid];
      this.vectorSource_.removeFeature(this.centerFeatures_[uid]);
      delete this.centerFeatures_[uid];
    }
  };

  _proto.handleGeometryChange_ = function handleGeometryChange_(feature, evt) {
    var geometry = evt.target;
    console.assert(geometry instanceof ol_geom_Geometry_js__WEBPACK_IMPORTED_MODULE_4__["default"]);
    var point = this.getGeometryCenterPoint_(geometry);
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_0__["getUid"])(feature);
    this.centerFeatures_[uid].setGeometry(point);
  };

  _proto.getGeometryCenterPoint_ = function getGeometryCenterPoint_(geometry) {
    var center;
    var point;

    if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
      point = geometry.getInteriorPoint();
    } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
      center = geometry.getCoordinateAt(0.5);
    } else {
      var extent = geometry.getExtent();
      center = ol_extent_js__WEBPACK_IMPORTED_MODULE_1__["getCenter"](extent);
    }

    if (!point && center) {
      point = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_6__["default"](center);
    }

    if (!point) {
      throw new Error('Missing point');
    }

    return point;
  };

  _proto.handleKeyUp_ = function handleKeyUp_(evt) {
    if (evt instanceof KeyboardEvent && evt.keyCode === 27) {
      this.setActive(false);
    }
  };

  return _default;
}(ol_interaction_Translate_js__WEBPACK_IMPORTED_MODULE_8__["default"]);



/***/ }),

/***/ "./src/interaction/common.js":
/*!***********************************!*\
  !*** ./src/interaction/common.js ***!
  \***********************************/
/*! exports provided: getDefaultDrawStyleFunction, getDefaultModifyStyleFunction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultDrawStyleFunction", function() { return getDefaultDrawStyleFunction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultModifyStyleFunction", function() { return getDefaultModifyStyleFunction; });
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");

function getDefaultDrawStyleFunction() {
  var style = Object(ol_style_Style_js__WEBPACK_IMPORTED_MODULE_0__["createEditingStyle"])();
  return function (feature, resolution) {
    var geometry = feature.getGeometry();

    if (geometry) {
      return style[geometry.getType()];
    }
  };
}
function getDefaultModifyStyleFunction() {
  var style = Object(ol_style_Style_js__WEBPACK_IMPORTED_MODULE_0__["createEditingStyle"])();
  return function (feature, resolution) {
    return style.Point;
  };
}

/***/ }),

/***/ "./src/layertree/Controller.js":
/*!*************************************!*\
  !*** ./src/layertree/Controller.js ***!
  \*************************************/
/*! exports provided: LayertreeController, getFirstParentTree, LayertreeVisitorDecision, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayertreeController", function() { return LayertreeController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstParentTree", function() { return getFirstParentTree; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayertreeVisitorDecision", function() { return LayertreeVisitorDecision; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/decorate.js */ "./src/misc/decorate.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
LayertreeController.$inject = ["$scope", "$rootScope", "$attrs"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }







function LayertreeController($scope, $rootScope, $attrs) {
  var _this = this;

  var isRoot = $attrs.ngeoLayertreeNotroot === undefined;
  this.isRoot = isRoot;
  var nodeExpr = $attrs.ngeoLayertree;
  this.rootScope_ = $rootScope;
  this.properties = {};
  this.state_ = 'off';
  var node;

  if (isRoot) {
    $scope.$watch(nodeExpr, function (newVal, oldVal) {
      _this.node = newVal;
    });
  } else {
    node = $scope.$eval(nodeExpr);
  }

  this.node = node;
  var mapExpr = $attrs.ngeoLayertreeMap;
  var map = $scope.$eval(mapExpr);
  console.assert(map !== undefined);
  this.parent = $scope.$parent.layertreeCtrl;
  this.children = [];

  if (this.parent) {
    this.parent.children.push(this);
  }

  $scope.$on('$destroy', function () {
    if (_this.parent) {
      var index = _this.parent.children.indexOf(_this);

      console.assert(index >= 0);

      _this.parent.children.splice(index, 1);
    }
  });
  this.uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(this);
  this.depth = isRoot ? 0 : this.parent.depth + 1;
  $scope.uid = this.uid;
  $scope.depth = this.depth;
  this.map = map;
  var nodelayerExpr = $attrs.ngeoLayertreeNodelayer;

  if (nodelayerExpr === undefined) {
    var nodelayerexprExpr = $attrs.ngeoLayertreeNodelayerexpr;
    var newNodelayerExpr = $scope.$eval(nodelayerexprExpr);
    console.assert(typeof newNodelayerExpr == 'string');
    nodelayerExpr = newNodelayerExpr;
  }

  console.assert(nodelayerExpr !== undefined);
  this.nodelayerExpr = nodelayerExpr;
  this.layer = null;

  if (!isRoot) {
    var layer = $scope.$eval(nodelayerExpr, {
      'treeCtrl': this
    }) || null;

    if (layer) {
      console.assert(layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__["default"] || layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__["default"]);
      this.layer = layer;
    }
  }

  this.dataSource_ = null;

  if (this.layer) {
    Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__["layerLoading"])(this.layer, $scope);
    Object(ngeo_misc_decorate_js__WEBPACK_IMPORTED_MODULE_1__["layerDecoration"])(this.layer);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_3__["listen"])(this.layer, 'change:opacity', function (evt) {
      _this.rootScope_.$broadcast('ngeo-layertree-opacity', _this);
    });
  }

  var listenersExpr = $attrs.ngeoLayertreeListeners;

  if (listenersExpr === undefined) {
    var listenersexprExpr = $attrs.ngeoLayertreeListenersexpr;
    listenersExpr = $scope.$eval(listenersexprExpr);
  }

  if (listenersExpr !== undefined) {
    console.assert(typeof listenersExpr == 'string');
  }

  this.listenersExpr = listenersExpr;

  if (listenersExpr) {
    $scope.$eval(listenersExpr, {
      'treeScope': $scope,
      'treeCtrl': this
    });
  }

  $scope.layertreeCtrl = this;
}

LayertreeController.prototype.getState = function () {
  return this.state_;
};

LayertreeController.prototype.setState = function (state, opt_broadcast) {
  var _this2 = this;

  if (state === this.state_) {
    return;
  }

  this.setStateInternal_(state);

  if (this.parent) {
    this.parent.refreshState(this, opt_broadcast);
  }

  var firstParents = this.isRoot ? this.children : [getFirstParentTree(this)];

  if (opt_broadcast === undefined || opt_broadcast) {
    firstParents.forEach(function (firstParent) {
      _this2.rootScope_.$broadcast('ngeo-layertree-state', _this2, firstParent);
    });
  }
};

LayertreeController.prototype.setStateInternal_ = function (state) {
  var _this3 = this;

  this.state_ = state === 'on' ? 'on' : 'off';

  if (this.state_ === 'on' && this.node.metadata && this.node.metadata.exclusiveGroup) {
    var firstChild;

    for (var _iterator = _createForOfIteratorHelperLoose(this.children), _step; !(_step = _iterator()).done;) {
      var child = _step.value;

      if (!firstChild) {
        firstChild = child;
        child.setStateInternal_('on');
      } else {
        child.setStateInternal_('off');
      }
    }
  } else {
    this.children.forEach(function (child) {
      child.setStateInternal_(_this3.state_);
    });
  }
};

LayertreeController.prototype.refreshState = function (opt_onChild, opt_broadcast) {
  var group = this.node;

  if (group.children && opt_onChild && opt_onChild.getState() !== 'off' && this.node.metadata && this.node.metadata.exclusiveGroup) {
    var onChild = opt_onChild;
    this.children.forEach(function (child) {
      if (child !== onChild) {
        child.setState('off', opt_broadcast);
      }
    });
  }

  var newState = this.getCalculateState();

  if (this.state_ === newState) {
    return;
  }

  this.state_ = newState;

  if (this.parent) {
    this.parent.refreshState(this, opt_broadcast);
  }
};

LayertreeController.prototype.getCalculateState = function () {
  var group = this.node;

  if (group.children === undefined) {
    return this.state_;
  }

  var childState = '';
  var previousChildState;
  this.children.some(function (child) {
    childState = child.getCalculateState();

    if (previousChildState) {
      if (previousChildState !== childState) {
        childState = 'indeterminate';
        return true;
      }
    }

    previousChildState = childState;
    return false;
  });
  return childState;
};

LayertreeController.prototype.getSetActive = function (val) {
  var layer = this.layer;
  var map = this.map;

  if (!layer) {
    return;
  }

  if (val !== undefined) {
    if (!val) {
      map.removeLayer(layer);
    } else {
      map.addLayer(layer);
    }
  } else {
    return map.getLayers().getArray().includes(layer);
  }
};

LayertreeController.prototype.getDataSource = function () {
  return this.dataSource_;
};

LayertreeController.prototype.setDataSource = function (dataSource) {
  this.dataSource_ = dataSource;
};

function getFirstParentTree(treeCtrl) {
  var tree = treeCtrl;

  while (!tree.parent.isRoot) {
    tree = tree.parent;
  }

  return tree;
}
var LayertreeVisitorDecision = {
  STOP: 'STOP',
  SKIP: 'SKIP',
  DESCEND: 'DESCEND'
};

LayertreeController.prototype.traverseDepthFirst = function (visitor) {
  var decision = visitor(this) || LayertreeVisitorDecision.DESCEND;

  switch (decision) {
    case LayertreeVisitorDecision.STOP:
      return true;

    case LayertreeVisitorDecision.SKIP:
      return false;

    case LayertreeVisitorDecision.DESCEND:
      for (var _iterator2 = _createForOfIteratorHelperLoose(this.children), _step2; !(_step2 = _iterator2()).done;) {
        var child = _step2.value;
        var stop = child.traverseDepthFirst(visitor);

        if (stop) {
          return true;
        }
      }

      return false;

    default:
      throw 'Unhandled case';
  }
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayertreeController', []);
module.controller('ngeoLayertreeController', LayertreeController);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/layertree/component.html":
/*!**************************************!*\
  !*** ./src/layertree/component.html ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<span ng-if="::!layertreeCtrl.isRoot">{{::layertreeCtrl.node.name}}</span>\n<input\n  type="checkbox"\n  ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children"\n  ng-model="layertreeCtrl.getSetActive"\n  ng-model-options="{getterSetter: true}"/>\n<ul ng-if="::layertreeCtrl.node.children">\n  <li\n    ng-repeat="node in ::layertreeCtrl.node.children"\n    ngeo-layertree="::node"\n    ngeo-layertree-notroot\n    ngeo-layertree-map="layertreeCtrl.map"\n    ngeo-layertree-nodelayerexpr="layertreeCtrl.nodelayerExpr"\n    ngeo-layertree-listenersexpr="layertreeCtrl.listenersExpr">\n  </li>\n</ul>\n';

}
return __p
}

/***/ }),

/***/ "./src/layertree/component.js":
/*!************************************!*\
  !*** ./src/layertree/component.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/layertree/Controller.js */ "./src/layertree/Controller.js");
/* harmony import */ var bootstrap_js_src_collapse_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bootstrap/js/src/collapse.js */ "./node_modules/bootstrap/js/src/collapse.js");
gmfLayertreeComponent.$inject = ["ngeoLayertreeTemplateUrl"];



var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayertree', [ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.value('ngeoLayertreeTemplateUrl', function (element, attrs) {
  var templateUrl = attrs['ngeoLayertreeTemplateurl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/layertree';
});
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/layertree', __webpack_require__(/*! ./component.html */ "./src/layertree/component.html"));
}]);

function gmfLayertreeComponent(ngeoLayertreeTemplateUrl) {
  return {
    restrict: 'A',
    scope: true,
    templateUrl: ngeoLayertreeTemplateUrl,
    controller: ngeo_layertree_Controller_js__WEBPACK_IMPORTED_MODULE_1__["LayertreeController"]
  };
}

module.directive('ngeoLayertree', gmfLayertreeComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/layertree/module.js":
/*!*********************************!*\
  !*** ./src/layertree/module.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_layertree_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/layertree/component.js */ "./src/layertree/component.js");


/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayertreeModule', [ngeo_layertree_component_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]));

/***/ }),

/***/ "./src/mainmodule.js":
/*!***************************!*\
  !*** ./src/mainmodule.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_module_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/module.js */ "./src/datasource/module.js");
/* harmony import */ var ngeo_download_module_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/download/module.js */ "./src/download/module.js");
/* harmony import */ var ngeo_draw_module_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/draw/module.js */ "./src/draw/module.js");
/* harmony import */ var ngeo_editing_module_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/editing/module.js */ "./src/editing/module.js");
/* harmony import */ var ngeo_filter_module_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/filter/module.js */ "./src/filter/module.js");
/* harmony import */ var ngeo_googlestreetview_module_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/googlestreetview/module.js */ "./src/googlestreetview/module.js");
/* harmony import */ var ngeo_grid_module_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/grid/module.js */ "./src/grid/module.js");
/* harmony import */ var ngeo_layertree_module_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/layertree/module.js */ "./src/layertree/module.js");
/* harmony import */ var ngeo_map_module_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/map/module.js */ "./src/map/module.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ngeo_measure_module_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/measure/module.js */ "./src/measure/module.js");
/* harmony import */ var ngeo_print_module_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/print/module.js */ "./src/print/module.js");
/* harmony import */ var ngeo_profile_module_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngeo/profile/module.js */ "./src/profile/module.js");
/* harmony import */ var ngeo_query_module_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngeo/query/module.js */ "./src/query/module.js");
/* harmony import */ var ngeo_search_module_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ngeo/search/module.js */ "./src/search/module.js");
/* harmony import */ var ngeo_statemanager_module_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ngeo/statemanager/module.js */ "./src/statemanager/module.js");
/* harmony import */ var ngeo_statemanager_WfsPermalink_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ngeo/statemanager/WfsPermalink.js */ "./src/statemanager/WfsPermalink.js");
/* harmony import */ var ngeo_misc_extraModule_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ngeo/misc/extraModule.js */ "./src/misc/extraModule.js");



















/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeo', [ngeo_datasource_module_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_download_module_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_draw_module_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_editing_module_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_filter_module_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_googlestreetview_module_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, ngeo_grid_module_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, ngeo_layertree_module_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_map_module_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, ngeo_measure_module_js__WEBPACK_IMPORTED_MODULE_11__["default"].name, ngeo_print_module_js__WEBPACK_IMPORTED_MODULE_12__["default"].name, ngeo_profile_module_js__WEBPACK_IMPORTED_MODULE_13__["default"].name, ngeo_query_module_js__WEBPACK_IMPORTED_MODULE_14__["default"].name, ngeo_search_module_js__WEBPACK_IMPORTED_MODULE_15__["default"].name, ngeo_statemanager_module_js__WEBPACK_IMPORTED_MODULE_16__["default"].name, ngeo_statemanager_WfsPermalink_js__WEBPACK_IMPORTED_MODULE_17__["default"].name, ngeo_misc_extraModule_js__WEBPACK_IMPORTED_MODULE_18__["default"].name]));

/***/ }),

/***/ "./src/map/BackgroundLayerMgr.js":
/*!***************************************!*\
  !*** ./src/map/BackgroundLayerMgr.js ***!
  \***************************************/
/*! exports provided: MapBackgroundLayerManager, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapBackgroundLayerManager", function() { return MapBackgroundLayerManager; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/CustomEvent.js */ "./src/CustomEvent.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_Observable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Observable.js */ "./node_modules/ol/Observable.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }











var BACKGROUNDLAYERGROUP_NAME = 'background';
var MapBackgroundLayerManager = function (_olObservable) {
  MapBackgroundLayerManager.$inject = ["ngeoLayerHelper"];

  _inheritsLoose(MapBackgroundLayerManager, _olObservable);

  function MapBackgroundLayerManager(ngeoLayerHelper) {
    var _this;

    _this = _olObservable.call(this) || this;
    _this.mapUids_ = {};
    _this.ngeoLayerHelper_ = ngeoLayerHelper;
    return _this;
  }

  var _proto = MapBackgroundLayerManager.prototype;

  _proto.get = function get(map) {
    var mapUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(map).toString();
    return mapUid in this.mapUids_ ? this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME).getLayers().item(0) : null;
  };

  _proto.set = function set(map, layer) {
    var ZIndex = -200;
    var mapUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(map).toString();
    var previous = this.get(map);

    if (layer !== null) {
      layer.setZIndex(ZIndex);
      this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(layer, ZIndex);
    }

    var bgGroup = this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME);

    if (previous !== null) {
      console.assert(mapUid in this.mapUids_);

      if (layer !== null) {
        bgGroup.getLayers().setAt(0, layer);
      } else {
        bgGroup.getLayers().removeAt(0);
        delete this.mapUids_[mapUid];
      }
    } else if (layer !== null) {
      bgGroup.getLayers().insertAt(0, layer);
      this.mapUids_[mapUid] = true;
    }

    var event = new ngeo_CustomEvent_js__WEBPACK_IMPORTED_MODULE_1__["default"]('change', {
      current: layer,
      previous: previous
    });
    this.dispatchEvent(event);
    return previous;
  };

  _proto.getOpacityBgLayer = function getOpacityBgLayer(map) {
    var mapUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(map).toString();
    return mapUid in this.mapUids_ ? this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME).getLayers().item(1) : null;
  };

  _proto.setOpacityBgLayer = function setOpacityBgLayer(map, layer) {
    var bgGroup = this.ngeoLayerHelper_.getGroupFromMap(map, BACKGROUNDLAYERGROUP_NAME);
    var opacityBackgroundLayer = this.getOpacityBgLayer(map);

    if (opacityBackgroundLayer) {
      var previous = bgGroup.getLayers().remove(opacityBackgroundLayer);
      layer.setOpacity(previous ? previous.getOpacity() : 0);
      layer.setVisible(previous ? previous.getVisible() : true);
    }

    var ZIndex = -100;
    layer.setZIndex(ZIndex);
    this.ngeoLayerHelper_.setZIndexToFirstLevelChildren(layer, ZIndex);
    var index = bgGroup.getLayers().getArray().indexOf(layer);

    if (index === -1) {
      bgGroup.getLayers().push(layer);
    }
  };

  _proto.updateDimensions = function updateDimensions(map, dimensions) {
    var baseBgLayer = this.get(map);

    if (baseBgLayer) {
      var layers = [baseBgLayer];

      if (baseBgLayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
        layers = baseBgLayer.getLayers().getArray();
      }

      layers.forEach(function (layer) {
        if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
          var hasUpdates = false;
          var updatedDimensions = {};

          for (var key in layer.get('dimensions')) {
            var value = dimensions[key];

            if (value !== undefined) {
              updatedDimensions[key] = value;
              hasUpdates = true;
            }
          }

          if (hasUpdates) {
            var source = layer.getSource();

            if (source instanceof ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
              source.updateDimensions(updatedDimensions);
              source.refresh();
            } else if (source instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_7__["default"] || source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
              source.updateParams(updatedDimensions);
              source.refresh();
            }
          }
        }
      });
    }
  };

  return MapBackgroundLayerManager;
}(ol_Observable_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoBackgroundLayerMgr', [ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_9__["default"].name]);
module.service('ngeoBackgroundLayerMgr', MapBackgroundLayerManager);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/map/FeatureOverlay.js":
/*!***********************************!*\
  !*** ./src/map/FeatureOverlay.js ***!
  \***********************************/
/*! exports provided: FeatureOverlay, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureOverlay", function() { return FeatureOverlay; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Collection.js */ "./node_modules/ol/Collection.js");



function FeatureOverlay(manager, index) {
  this.manager_ = manager;
  this.index_ = index;
  this.listenerKeys_ = [];
}

FeatureOverlay.prototype.addFeature = function (feature) {
  this.manager_.addFeature(feature, this.index_);
};

FeatureOverlay.prototype.removeFeature = function (feature) {
  this.manager_.removeFeature(feature, this.index_);
};

FeatureOverlay.prototype.isEmpty = function () {
  return this.manager_.isEmpty(this.index_);
};

FeatureOverlay.prototype.clear = function () {
  this.manager_.clear(this.index_);
};

FeatureOverlay.prototype.setFeatures = function (features) {
  var _this = this;

  this.clear();
  this.listenerKeys_.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"]);

  if (features !== null) {
    features.forEach(function (feature) {
      _this.addFeature(feature);
    });
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(features, 'add', this.handleFeatureAdd_, this));
    this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(features, 'remove', this.handleFeatureRemove_, this));
  }
};

FeatureOverlay.prototype.setStyle = function (style) {
  this.manager_.setStyle(style, this.index_);
};

FeatureOverlay.prototype.handleFeatureAdd_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_2__["CollectionEvent"]) {
    var feature = evt.element;
    this.addFeature(feature);
  }
};

FeatureOverlay.prototype.handleFeatureRemove_ = function (evt) {
  if (evt instanceof ol_Collection_js__WEBPACK_IMPORTED_MODULE_2__["CollectionEvent"]) {
    var feature = evt.element;
    this.removeFeature(feature);
  }
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatureOverlay', []);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/map/FeatureOverlayMgr.js":
/*!**************************************!*\
  !*** ./src/map/FeatureOverlayMgr.js ***!
  \**************************************/
/*! exports provided: FeatureOverlayMgr, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureOverlayMgr", function() { return FeatureOverlayMgr; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/FeatureOverlay.js */ "./src/map/FeatureOverlay.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source/Vector.js */ "./node_modules/ol/source/Vector.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");







function FeatureOverlayMgr() {
  this.featureUidToGroupIndex_ = {};
  this.groups_ = [];
  this.source_ = new ol_source_Vector_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    useSpatialIndex: false
  });
  this.layer_ = new ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_3__["default"]({
    source: this.source_,
    style: this.styleFunction_.bind(this),
    updateWhileAnimating: true,
    updateWhileInteracting: true
  });
}

FeatureOverlayMgr.prototype.isEmpty = function (groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  return Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_4__["isEmpty"])(this.groups_[groupIndex].features);
};

FeatureOverlayMgr.prototype.addFeature = function (feature, groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  var featureUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature).toString();
  this.featureUidToGroupIndex_[featureUid] = groupIndex;
  this.groups_[groupIndex].features[featureUid] = feature;
  this.source_.addFeature(feature);
};

FeatureOverlayMgr.prototype.removeFeature = function (feature, groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  var featureUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature).toString();
  delete this.featureUidToGroupIndex_[featureUid];
  delete this.groups_[groupIndex].features[featureUid];
  this.source_.removeFeature(feature);
};

FeatureOverlayMgr.prototype.clear = function (groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  var group = this.groups_[groupIndex];

  for (var featureUid in group.features) {
    this.removeFeature(group.features[featureUid], groupIndex);
  }

  console.assert(Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_4__["isEmpty"])(group.features));
};

FeatureOverlayMgr.prototype.getLayer = function () {
  return this.layer_;
};

FeatureOverlayMgr.prototype.getFeatureOverlay = function () {
  var groupIndex = this.groups_.length;
  this.groups_.push({
    styleFunction: ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["createDefaultStyle"],
    features: {}
  });
  return new ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_1__["FeatureOverlay"](this, groupIndex);
};

FeatureOverlayMgr.prototype.init = function (map) {
  this.layer_.setMap(map);
};

FeatureOverlayMgr.prototype.setStyle = function (style, groupIndex) {
  console.assert(groupIndex >= 0);
  console.assert(groupIndex < this.groups_.length);
  this.groups_[groupIndex].styleFunction = style === null ? ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["createDefaultStyle"] : Object(ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["toFunction"])(style);
};

FeatureOverlayMgr.prototype.styleFunction_ = function (feature, resolution) {
  var featureUid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_2__["getUid"])(feature).toString();
  console.assert(featureUid in this.featureUidToGroupIndex_);
  var groupIndex = this.featureUidToGroupIndex_[featureUid];
  var group = this.groups_[groupIndex];
  return group.styleFunction(feature, resolution);
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatureOverlayMgr', [ngeo_map_FeatureOverlay_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.service('ngeoFeatureOverlayMgr', FeatureOverlayMgr);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/map/LayerHelper.js":
/*!********************************!*\
  !*** ./src/map/LayerHelper.js ***!
  \********************************/
/*! exports provided: LayerHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerHelper", function() { return LayerHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/WMTSCapabilities.js */ "./node_modules/ol/format/WMTSCapabilities.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_obj_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/obj.js */ "./node_modules/ol/obj.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ol_uri_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/uri.js */ "./node_modules/ol/uri.js");
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
LayerHelper.$inject = ["$q", "$http", "ngeoTilesPreloadingLimit"];













function LayerHelper($q, $http, ngeoTilesPreloadingLimit) {
  this.$q_ = $q;
  this.$http_ = $http;
  this.tilesPreloadingLimit_ = ngeoTilesPreloadingLimit === null ? Infinity : ngeoTilesPreloadingLimit;
}
var GROUP_KEY = 'groupName';
var REFRESH_PARAM = 'random';

LayerHelper.prototype.copyProperties = function (layerFrom, layerTo, opt_excludes) {
  var properties = layerFrom.getProperties();

  if (opt_excludes) {
    var excludes = opt_excludes;
    var keys = Object.keys(properties);

    for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {
      var key = _keys[_i];

      if (excludes.includes(key)) {
        continue;
      }

      layerTo.set(key, properties[key]);
    }
  } else {
    layerTo.setProperties(properties);
  }
};

LayerHelper.prototype.createBasicWMSLayer = function (sourceURL, sourceLayersName, sourceFormat, opt_serverType, opt_time, opt_params, opt_crossOrigin, opt_customSourceOptions, opt_customLayerOptions) {
  var params = {
    FORMAT: sourceFormat,
    LAYERS: sourceLayersName
  };
  var olServerType;

  if (opt_time) {
    params.TIME = opt_time;
  }

  if (opt_serverType) {
    params.SERVERTYPE = opt_serverType;
    olServerType = opt_serverType.replace(ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_12__["ServerType"].QGISSERVER, 'qgis');
  }

  var options = Object.assign({}, opt_customSourceOptions, {
    url: sourceURL,
    params: params,
    serverType: olServerType,
    crossOrigin: opt_crossOrigin
  });
  var source = new ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"](options);

  if (opt_params) {
    source.updateParams(opt_params);
  }

  if (!(opt_params && opt_params.STYLES)) {
    params.STYLES = '';
    var i = sourceLayersName.split(',').length;

    while (i > 1) {
      params.STYLES.concat(',');
      i--;
    }
  }

  var layerOptions = Object.assign({}, opt_customLayerOptions, {
    source: source
  });
  return new ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"](layerOptions);
};

LayerHelper.prototype.createBasicWMSLayerFromDataSource = function (dataSource, opt_crossOrigin) {
  var url = dataSource.wmsUrl;

  if (url === undefined) {
    throw new Error('Missing url');
  }

  var layerNames = dataSource.getWMSLayerNames().join(',');
  var serverType = dataSource.ogcServerType;
  var imageType = dataSource.ogcImageType;
  var layer = this.createBasicWMSLayer(url, layerNames, imageType, serverType, undefined, undefined, opt_crossOrigin);
  layer.setVisible(dataSource.visible);
  layer.set('querySourceIds', [dataSource.id]);
  layer.set('dataSourceId', dataSource.id);
  return layer;
};

LayerHelper.prototype.createWMTSLayerFromCapabilitites = function (capabilitiesURL, layerName, opt_matrixSet, opt_dimensions, opt_customOptions, opt_minResolution, opt_maxResolution, opt_opacity) {
  if (opt_maxResolution) {
    opt_maxResolution = opt_maxResolution * 1.0000001;
  }

  var parser = new ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
  var layer = new ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    preload: this.tilesPreloadingLimit_,
    minResolution: opt_minResolution,
    maxResolution: opt_maxResolution
  });
  var $q = this.$q_;
  return this.$http_.get(capabilitiesURL, {
    cache: true
  }).then(function (response) {
    var result;

    if (response.data) {
      result = parser.read(response.data);
    }

    if (result) {
      var options = Object.assign({}, opt_customOptions, Object(ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["optionsFromCapabilities"])(result, {
        matrixSet: opt_matrixSet,
        crossOrigin: 'anonymous',
        layer: layerName
      }));
      var source = new ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["default"](options);

      if (opt_dimensions && !Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_7__["isEmpty"])(opt_dimensions)) {
        source.updateDimensions(opt_dimensions);
      }

      layer.setSource(source);
      var layers = result.Contents.Layer;
      var l = ol_array_js__WEBPACK_IMPORTED_MODULE_1__["find"](layers, function (elt, index, array) {
        return elt.Identifier == layerName;
      });

      if (!l) {
        return $q.reject("Layer " + layerName + " not available in WMTS capabilities from " + capabilitiesURL);
      }

      layer.set('capabilitiesStyles', l.Style);

      if (opt_opacity !== undefined) {
        layer.setOpacity(opt_opacity);
      }

      return $q.resolve(layer);
    }

    return $q.reject("Failed to get WMTS capabilities from " + capabilitiesURL);
  });
};

LayerHelper.prototype.createWMTSLayerFromCapabilititesObj = function (capabilities, layerCap, opt_dimensions) {
  var options = Object(ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["optionsFromCapabilities"])(capabilities, {
    crossOrigin: 'anonymous',
    layer: layerCap.Identifier
  });
  console.assert(options);
  var source = new ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["default"](options);

  if (opt_dimensions && !Object(ol_obj_js__WEBPACK_IMPORTED_MODULE_7__["isEmpty"])(opt_dimensions)) {
    source.updateDimensions(opt_dimensions);
  }

  var result = new ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    preload: Infinity,
    source: source
  });
  result.set('capabilitiesStyles', layerCap.Style);
  return result;
};

LayerHelper.prototype.createBasicGroup = function (opt_layers) {
  var group = new ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]();

  if (opt_layers) {
    group.setLayers(opt_layers);
  }

  return group;
};

LayerHelper.prototype.getGroupFromMap = function (map, groupName) {
  var groups = map.getLayerGroup().getLayers();
  var group;
  groups.getArray().some(function (existingGroup) {
    if (existingGroup.get(GROUP_KEY) === groupName) {
      group = existingGroup;
      return true;
    } else {
      return false;
    }
  });

  if (!group) {
    group = this.createBasicGroup();
    group.set(GROUP_KEY, groupName);
    map.addLayer(group);
  }

  return group;
};

LayerHelper.prototype.getFlatLayers = function (layer) {
  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    var sublayers = layer.getLayers().getArray();
    var hasGroupLayer = sublayers.some(function (sublayer) {
      return sublayer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"];
    });

    if (!hasGroupLayer) {
      return sublayers.slice();
    }
  }

  return this.getFlatLayers_(layer, [], undefined);
};

LayerHelper.prototype.getFlatLayers_ = function (layer, array, computedOpacity) {
  var _this = this;

  var opacity = layer.getOpacity();

  if (computedOpacity !== undefined) {
    computedOpacity *= opacity;
  } else {
    computedOpacity = opacity;
  }

  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    var sublayers = layer.getLayers();
    sublayers.forEach(function (l) {
      _this.getFlatLayers_(l, array, computedOpacity);
    });
  } else if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
    if (!array.includes(layer)) {
      layer.set('inheritedOpacity', computedOpacity, true);
      array.push(layer);
    }
  }

  return array;
};

LayerHelper.prototype.getLayerByName = function (layerName, layers) {
  var _this2 = this;

  var found = null;
  layers.some(function (layer) {
    if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
      var sublayers = layer.getLayers().getArray();
      found = _this2.getLayerByName(layerName, sublayers);
    } else if (layer.get('layerNodeName') === layerName) {
      found = layer;
    }

    return !!found;
  });
  return found;
};

LayerHelper.prototype.getWMTSLegendURL = function (layer) {
  var url;
  var styles = layer.get('capabilitiesStyles');

  if (styles !== undefined) {
    var legendURL = styles[0].legendURL;

    if (legendURL !== undefined) {
      url = legendURL[0].href;
    }
  }

  return url;
};

LayerHelper.prototype.getWMSLegendURL = function (url, layerName, opt_scale, opt_legendRule, opt_legendWidth, opt_legendHeight, opt_servertype, opt_dpi, opt_bbox, opt_srs, opt_additionalQueryString) {
  if (!url) {
    return undefined;
  }

  var queryString = {
    FORMAT: 'image/png',
    TRANSPARENT: true,
    SERVICE: 'WMS',
    VERSION: '1.1.1',
    REQUEST: 'GetLegendGraphic',
    LAYER: layerName
  };

  if (opt_scale !== undefined) {
    queryString.SCALE = opt_scale;
  }

  if (opt_legendRule !== undefined) {
    queryString.RULE = opt_legendRule;

    if (opt_legendWidth !== undefined) {
      queryString.WIDTH = opt_legendWidth;
    }

    if (opt_legendHeight !== undefined) {
      queryString.HEIGHT = opt_legendHeight;
    }
  }

  if (opt_servertype == 'qgis') {
    if (opt_dpi != undefined) {
      queryString.DPI = opt_dpi;
    }

    if (opt_bbox != undefined && opt_srs != undefined && opt_scale != undefined && opt_dpi != undefined && opt_legendRule == undefined) {
      queryString.BBOX = opt_bbox.join(',');
      queryString.SRS = opt_srs;
      queryString.WIDTH = Math.round((opt_bbox[2] - opt_bbox[0]) / opt_scale * 39.37 * opt_dpi);
      queryString.HEIGHT = Math.round((opt_bbox[3] - opt_bbox[1]) / opt_scale * 39.37 * opt_dpi);
    }
  }

  if (opt_additionalQueryString) {
    Object.assign(queryString, opt_additionalQueryString);
  }

  return Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_11__["appendParams"])(url, queryString);
};

LayerHelper.prototype.isLayerVisible = function (layer, map) {
  if (!layer.getVisible()) {
    return false;
  }

  var currentResolution = map.getView().getResolution();

  if (currentResolution === undefined) {
    throw new Error('Missing resolution');
  }

  return currentResolution > layer.getMinResolution() && currentResolution < layer.getMaxResolution();
};

LayerHelper.prototype.refreshWMSLayer = function (layer) {
  var source_ = layer.getSource();
  console.assert(source_ instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"] || source_ instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__["default"]);
  var source = source_;
  var params = source.getParams();
  params[REFRESH_PARAM] = Math.random();
  source.updateParams(params);
};

LayerHelper.prototype.setZIndexToFirstLevelChildren = function (element, ZIndex) {
  if (element instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    var innerGroupLayers = element.getLayers();
    innerGroupLayers.forEach(function (innerLayer) {
      return innerLayer.setZIndex(ZIndex);
    });
  }
};

LayerHelper.prototype.updateWMSLayerState = function (layer, names, opt_time) {
  if (names.length <= 0) {
    layer.setVisible(false);
  } else {
    layer.setVisible(true);
    var source = layer.getSource();

    if (!(source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
      throw new Error('Wrong source type');
    }

    if (opt_time) {
      source.updateParams({
        'LAYERS': names,
        'TIME': opt_time
      });
    } else {
      source.updateParams({
        'LAYERS': names
      });
    }
  }
};

LayerHelper.prototype.getQuerySourceIds = function (layer) {
  return layer.get('querySourceIds');
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLayerHelper', []);
module.service('ngeoLayerHelper', LayerHelper);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/map/component.js":
/*!******************************!*\
  !*** ./src/map/component.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
mapComponent.$inject = ["$window"];



var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMap', []);

function mapComponent($window) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var attr = 'ngeoMap';
      var prop = attrs[attr];
      var map = scope.$eval(prop);
      console.assert(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
      map.setTarget(element[0]);
      var manageResizeAttr = 'ngeoMapManageResize';
      var manageResizeProp = attrs[manageResizeAttr];
      var manageResize = scope.$eval(manageResizeProp);

      if (manageResize) {
        var resizeTransitionAttr = 'ngeoMapResizeTransition';
        var resizeTransitionProp = attrs[resizeTransitionAttr];
        var resizeTransition = scope.$eval(resizeTransitionProp);
        Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])($window, 'resize', function (evt) {
          if (resizeTransition) {
            var start = Date.now();
            var loop = true;

            var adjustSize = function adjustSize() {
              map.updateSize();
              map.renderSync();

              if (loop) {
                $window.requestAnimationFrame(adjustSize);
              }

              if (Date.now() - start > resizeTransition) {
                loop = false;
              }
            };

            adjustSize();
          } else {
            map.updateSize();
          }
        });
      }
    }
  };
}

module.directive('ngeoMap', mapComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/map/module.js":
/*!***************************!*\
  !*** ./src/map/module.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/map/BackgroundLayerMgr.js */ "./src/map/BackgroundLayerMgr.js");
/* harmony import */ var ngeo_map_component_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/map/component.js */ "./src/map/component.js");
/* harmony import */ var ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/map/FeatureOverlayMgr.js */ "./src/map/FeatureOverlayMgr.js");
/* harmony import */ var ngeo_map_recenter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/map/recenter.js */ "./src/map/recenter.js");
/* harmony import */ var ngeo_map_resizemap_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/map/resizemap.js */ "./src/map/resizemap.js");
/* harmony import */ var ngeo_map_scaleselector_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/map/scaleselector.js */ "./src/map/scaleselector.js");







/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMapModule', [ngeo_map_BackgroundLayerMgr_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_map_component_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_map_FeatureOverlayMgr_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_map_recenter_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_map_resizemap_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_map_scaleselector_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]));

/***/ }),

/***/ "./src/map/recenter.js":
/*!*****************************!*\
  !*** ./src/map/recenter.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoRecenter', []);

function mapResenterComponent() {
  return {
    restrict: 'A',
    link: function link($scope, $element, $attrs) {
      var mapExpr = $attrs.ngeoRecenterMap;
      var map = $scope.$eval(mapExpr);

      function recenter(element) {
        var extent = element.attr('ngeo-extent');

        if (extent !== undefined) {
          var size = map.getSize();

          if (size === undefined) {
            throw new Error('Missing size');
          }

          map.getView().fit($scope.$eval(extent), {
            size: size
          });
        }

        var zoom = element.attr('ngeo-zoom');

        if (zoom !== undefined) {
          map.getView().setZoom($scope.$eval(zoom));
        }
      }

      $element.on('click', '*', function (event) {
        recenter(angular__WEBPACK_IMPORTED_MODULE_0___default.a.element($(this)));
      });

      var ce = function ce(event) {
        var selected = event.target.options[event.target.selectedIndex];
        recenter(angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(selected));
      };

      $element.on({
        change: ce
      });
    }
  };
}

module.directive('ngeoRecenter', mapResenterComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/map/resizemap.js":
/*!******************************!*\
  !*** ./src/map/resizemap.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
mapResizeComponent.$inject = ["$window"];


var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoResizemap', []);

function mapResizeComponent($window) {
  var duration = 1000;
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var attr = 'ngeoResizemap';
      var prop = attrs[attr];
      var map = scope.$eval(prop);
      console.assert(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
      var stateExpr = attrs.ngeoResizemapState;
      console.assert(stateExpr !== undefined);
      var start;
      var animationDelayKey;

      var animationDelay = function animationDelay() {
        map.updateSize();
        map.renderSync();

        if (Date.now() - start < duration) {
          animationDelayKey = $window.requestAnimationFrame(animationDelay);
        }
      };

      element.on('transitionend', function () {
        map.updateSize();
        map.renderSync();
      });
      scope.$watch(stateExpr, function (newVal, oldVal) {
        if (newVal != oldVal) {
          start = Date.now();
          $window.cancelAnimationFrame(animationDelayKey);
          animationDelayKey = $window.requestAnimationFrame(animationDelay);
        }
      });
    }
  };
}

module.directive('ngeoResizemap', mapResizeComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/map/scaleselector.html":
/*!************************************!*\
  !*** ./src/map/scaleselector.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}">\n  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\n    <span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>\n  </button>\n  <ul class="dropdown-menu btn-block" role="menu">\n    <li ng-repeat="zoomLevel in ::scaleselectorCtrl.getZooms()">\n      <a href ng-click="scaleselectorCtrl.changeZoom(zoomLevel)"\n         ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml">\n      </a>\n    </li>\n  </ul>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/map/scaleselector.js":
/*!**********************************!*\
  !*** ./src/map/scaleselector.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var bootstrap_js_src_dropdown_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap/js/src/dropdown.js */ "./node_modules/bootstrap/js/src/dropdown.js");




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoScaleselector', []);
module.value('ngeoScaleselectorTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.ngeoScaleselectorTemplateurl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/map/scaleselector';
});
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/map/scaleselector', __webpack_require__(/*! ./scaleselector.html */ "./src/map/scaleselector.html"));
}]);

var mapScaleselectorComponent = function mapScaleselectorComponent(ngeoScaleselectorTemplateUrl) {
  return {
    restrict: 'A',
    scope: true,
    controller: 'NgeoScaleselectorController',
    templateUrl: ngeoScaleselectorTemplateUrl
  };
};

mapScaleselectorComponent.$inject = ["ngeoScaleselectorTemplateUrl"];
mapScaleselectorComponent.$inject = ["ngeoScaleselectorTemplateUrl"];
module.directive('ngeoScaleselector', mapScaleselectorComponent);

var ScaleselectorController = function () {
  ScaleselectorController.$inject = ["$scope", "$attrs", "ngeoScaleSelectorOptions"];

  function ScaleselectorController($scope, $attrs, ngeoScaleSelectorOptions) {
    this.scales = ngeoScaleSelectorOptions.values;
    var mapExpr = $attrs.ngeoScaleselectorMap;
    this.map_ = $scope.$eval(mapExpr);
    console.assert(this.map_ instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
    this.options = ngeoScaleSelectorOptions;
    this.$scope_ = $scope;
    this.resolutionChangeKey_ = null;
    this.currentScale = undefined;
    var view = this.map_.getView();
    var dpi = 96;
    var inchesPerMeter = 39.37;
    var warningRatio = 1.5;

    if (this.scales) {
      for (var zoom = view.getMinZoom(); zoom <= view.getMaxZoom(); zoom++) {
        var calculatedScale = Math.round(view.getResolutionForZoom(zoom) * inchesPerMeter * dpi);
        var scale = this.scales[zoom];

        if (scale == undefined) {
          console.warn("Missing scale for zoom '" + zoom + "', set it to real calculated scale '" + calculatedScale + "'.");
          this.scales[zoom] = calculatedScale;
        } else {
          if (Math.exp(Math.abs(Math.log(calculatedScale / scale))) > warningRatio) {
            console.warn("Big deferance between configured scale '" + scale + "' " + ("for zoom '" + zoom + "' and real calculated scale '" + calculatedScale + "'."));
          }
        }
      }
    } else {
      this.scales = [];

      for (var _zoom = view.getMinZoom(); _zoom <= view.getMaxZoom(); _zoom++) {
        this.scales[_zoom] = Math.round(view.getResolutionForZoom(_zoom) * inchesPerMeter * dpi);
      }
    }

    var currentZoom = this.map_.getView().getZoom();

    if (currentZoom !== undefined) {
      this.currentScale = this.getScale(currentZoom);
    }

    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(this.map_, 'change:view', this.handleViewChange_, this);
    this.registerResolutionChangeListener_();
    $scope.scaleselectorCtrl = this;
  }

  var _proto = ScaleselectorController.prototype;

  _proto.getZooms = function getZooms() {
    return Object.keys(this.scales).map(Number);
  };

  _proto.getScale = function getScale(zoom) {
    if (zoom === undefined) {
      return undefined;
    }

    var scale = this.scales[zoom];

    if (scale !== undefined) {
      return scale;
    }

    var flooredZoom = Math.floor(zoom);
    var lowerScale = this.scales[flooredZoom];
    var upperScale = this.scales[flooredZoom + 1];
    scale = lowerScale - (lowerScale - upperScale) * (zoom - flooredZoom);
    return isNaN(scale) ? undefined : Math.round(scale);
  };

  _proto.changeZoom = function changeZoom(zoom) {
    this.map_.getView().setZoom(zoom);
  };

  _proto.handleResolutionChange_ = function handleResolutionChange_(e) {
    var _this = this;

    var view = this.map_.getView();
    var currentScale = this.getScale(view.getZoom());

    if (currentScale !== undefined) {
      this.$scope_.$applyAsync(function () {
        _this.currentScale = currentScale;
      });
    }
  };

  _proto.handleViewChange_ = function handleViewChange_(e) {
    this.registerResolutionChangeListener_();
    this.handleResolutionChange_(null);
  };

  _proto.registerResolutionChangeListener_ = function registerResolutionChangeListener_() {
    if (this.resolutionChangeKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"])(this.resolutionChangeKey_);
    }

    var view = this.map_.getView();
    this.resolutionChangeKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(view, 'change:resolution', this.handleResolutionChange_, this);
  };

  return ScaleselectorController;
}();

module.controller('NgeoScaleselectorController', ScaleselectorController);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/measure/area.js":
/*!*****************************!*\
  !*** ./src/measure/area.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/draw/Controller.js */ "./src/draw/Controller.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/interaction/MeasureArea.js */ "./src/interaction/MeasureArea.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
measureAreaComponent.$inject = ["$compile", "gettextCatalog", "$filter", "ngeoMeasurePrecision"];






var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMeasurearea', [ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);

function measureAreaComponent($compile, gettextCatalog, $filter, ngeoMeasurePrecision) {
  return {
    restrict: 'A',
    require: '^^ngeoDrawfeature',
    link: function link($scope, element, attrs, drawFeatureCtrl) {
      if (!drawFeatureCtrl) {
        throw new Error('Missing drawFeatureCtrl');
      }

      var helpMsg = gettextCatalog.getString('Click to start drawing polygon');
      var contMsg = gettextCatalog.getString('Click to continue drawing<br>' + 'Double-click or click starting point to finish');
      var options = {
        style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_5__["default"](),
        startMsg: $compile("<div translate>" + helpMsg + "</div>")($scope)[0],
        continueMsg: $compile("<div translate>" + contMsg + "</div>")($scope)[0]
      };
      options.precision = ngeoMeasurePrecision;
      var measureArea = new ngeo_interaction_MeasureArea_js__WEBPACK_IMPORTED_MODULE_3__["default"]($filter('ngeoUnitPrefix'), gettextCatalog, options);

      if (drawFeatureCtrl.uid) {
        measureArea.set('ngeo-interaction-draw-uid', drawFeatureCtrl.uid + "-area");
      }

      drawFeatureCtrl.registerInteraction(measureArea);
      drawFeatureCtrl.measureArea = measureArea;
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(measureArea, 'measureend', drawFeatureCtrl.handleDrawEnd.bind(drawFeatureCtrl, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__["default"].POLYGON), drawFeatureCtrl);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(measureArea, 'change:active', drawFeatureCtrl.handleActiveChange, drawFeatureCtrl);
    }
  };
}

module.directive('ngeoMeasurearea', measureAreaComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/measure/azimut.js":
/*!*******************************!*\
  !*** ./src/measure/azimut.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/draw/Controller.js */ "./src/draw/Controller.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/interaction/MeasureAzimut.js */ "./src/interaction/MeasureAzimut.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
measureAzimutComponent.$inject = ["$compile", "gettextCatalog", "$filter", "ngeoMeasurePrecision", "ngeoMeasureDecimals"];









var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMeasureazimut', [ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);

function measureAzimutComponent($compile, gettextCatalog, $filter, ngeoMeasurePrecision, ngeoMeasureDecimals) {
  return {
    restrict: 'A',
    require: '^^ngeoDrawfeature',
    link: function link($scope, element, attrs, drawFeatureCtrl) {
      if (!drawFeatureCtrl) {
        throw new Error('Missing drawFeatureCtrl');
      }

      var helpMsg = gettextCatalog.getString('Click to start drawing circle');
      var contMsg = gettextCatalog.getString('Click to finish');
      var options = {
        style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_8__["default"](),
        startMsg: $compile("<div translate>" + helpMsg + "</div>")($scope)[0],
        continueMsg: $compile("<div translate>" + contMsg + "</div>")($scope)[0]
      };
      options.precision = ngeoMeasurePrecision;
      options.decimals = ngeoMeasureDecimals;
      var measureAzimut = new ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_4__["default"]($filter('ngeoUnitPrefix'), $filter('number'), options);

      if (drawFeatureCtrl.uid) {
        measureAzimut.set('ngeo-interaction-draw-uid', drawFeatureCtrl.uid + "-azimut");
      }

      drawFeatureCtrl.registerInteraction(measureAzimut);
      drawFeatureCtrl.measureAzimut = measureAzimut;
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(measureAzimut, 'measureend', function (event) {
        var myEvent = event;
        var geometry = myEvent.detail.feature.getGeometry();
        var circle = geometry.getGeometries()[1];
        var polygon = Object(ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_7__["fromCircle"])(circle, Number.parseInt(attrs.$$element.attr('ngeo-measureazimut-nbpoints') || 64));
        myEvent.detail.feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_6__["default"](polygon);
        var azimut = Object(ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_4__["getAzimut"])(geometry.getGeometries()[0]);
        myEvent.detail.feature.set('azimut', azimut);
        drawFeatureCtrl.handleDrawEnd(ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].CIRCLE, event);
      }, drawFeatureCtrl);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(measureAzimut, 'change:active', drawFeatureCtrl.handleActiveChange, drawFeatureCtrl);
    }
  };
}

module.directive('ngeoMeasureazimut', measureAzimutComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/measure/length.js":
/*!*******************************!*\
  !*** ./src/measure/length.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/draw/Controller.js */ "./src/draw/Controller.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/interaction/MeasureLength.js */ "./src/interaction/MeasureLength.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
measureLengthComponent.$inject = ["$compile", "gettextCatalog", "$filter", "$injector", "ngeoMeasurePrecision", "ngeoSnappingTolerance"];







var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMeasurelength', [ngeo_draw_Controller_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);

function measureLengthComponent($compile, gettextCatalog, $filter, $injector, ngeoMeasurePrecision, ngeoSnappingTolerance) {
  return {
    restrict: 'A',
    require: '^^ngeoDrawfeature',
    link: function link($scope, element, attrs, drawFeatureCtrl) {
      if (!drawFeatureCtrl) {
        throw new Error('Missing drawFeatureCtrl');
      }

      var helpMsg = gettextCatalog.getString('Click to start drawing line');
      var contMsg = gettextCatalog.getString('Click to continue drawing<br>' + 'Double-click or click last point to finish');
      var options = {
        style: new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_6__["default"](),
        startMsg: $compile("<div translate>" + helpMsg + "</div>")($scope)[0],
        continueMsg: $compile("<div translate>" + contMsg + "</div>")($scope)[0]
      };
      options.precision = ngeoMeasurePrecision;
      options.tolerance = ngeoSnappingTolerance;

      if ($injector.has('ngeoSnappingSource')) {
        options.source = $injector.get('ngeoSnappingSource');
      }

      var measureLength = new ngeo_interaction_MeasureLength_js__WEBPACK_IMPORTED_MODULE_4__["default"]($filter('ngeoUnitPrefix'), gettextCatalog, options);

      if (drawFeatureCtrl.uid) {
        measureLength.set('ngeo-interaction-draw-uid', drawFeatureCtrl.uid + "-length");
      }

      drawFeatureCtrl.registerInteraction(measureLength);
      drawFeatureCtrl.measureLength = measureLength;
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(measureLength, 'measureend', drawFeatureCtrl.handleDrawEnd.bind(drawFeatureCtrl, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__["default"].LINE_STRING), drawFeatureCtrl);
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(measureLength, 'change:active', drawFeatureCtrl.handleActiveChange, drawFeatureCtrl);
    }
  };
}

module.directive('ngeoMeasurelength', measureLengthComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/measure/module.js":
/*!*******************************!*\
  !*** ./src/measure/module.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_measure_area_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/measure/area.js */ "./src/measure/area.js");
/* harmony import */ var ngeo_measure_azimut_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/measure/azimut.js */ "./src/measure/azimut.js");
/* harmony import */ var ngeo_measure_length_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/measure/length.js */ "./src/measure/length.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMeasureModule', [ngeo_measure_area_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_measure_azimut_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_measure_length_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./src/message/Message.js":
/*!********************************!*\
  !*** ./src/message/Message.js ***!
  \********************************/
/*! exports provided: MessageType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageType", function() { return MessageType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
var MessageType = {
  ERROR: 'error',
  INFORMATION: 'information',
  SUCCESS: 'success',
  WARNING: 'warning'
};

var _default = function () {
  function _default() {}

  var _proto = _default.prototype;

  _proto.showMessage = function showMessage(message) {};

  _proto.show = function show(object) {
    var msgObjects = this.getMessageObjects(object);
    msgObjects.forEach(this.showMessage, this);
  };

  _proto.error = function error(message) {
    this.show(this.getMessageObjects(message, MessageType.ERROR));
  };

  _proto.info = function info(message) {
    this.show(this.getMessageObjects(message, MessageType.INFORMATION));
  };

  _proto.success = function success(message) {
    this.show(this.getMessageObjects(message, MessageType.SUCCESS));
  };

  _proto.warn = function warn(message) {
    this.show(this.getMessageObjects(message, MessageType.WARNING));
  };

  _proto.getMessageObjects = function getMessageObjects(object, opt_type) {
    var msgObjects = [];
    var defaultType = MessageType.INFORMATION;

    if (typeof object === 'string') {
      msgObjects.push({
        msg: object,
        type: opt_type !== undefined ? opt_type : defaultType
      });
    } else if (Array.isArray(object)) {
      object.forEach(function (msg) {
        if (typeof object === 'string') {
          msgObjects.push({
            msg: msg,
            type: opt_type !== undefined ? opt_type : defaultType
          });
        } else {
          if (typeof msg == 'string') {
            throw new Error('Wrong msg type');
          }

          if (opt_type !== undefined) {
            msg.type = opt_type;
          }

          msgObjects.push(msg);
        }
      });
    } else {
      var msgObject = object;

      if (opt_type !== undefined) {
        msgObject.type = opt_type;
      }

      if (msgObject.type === undefined) {
        msgObject.type = defaultType;
      }

      msgObjects.push(msgObject);
    }

    return msgObjects;
  };

  return _default;
}();



/***/ }),

/***/ "./src/message/Notification.js":
/*!*************************************!*\
  !*** ./src/message/Notification.js ***!
  \*************************************/
/*! exports provided: MessageNotification, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageNotification", function() { return MessageNotification; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var bootstrap_js_src_alert_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap/js/src/alert.js */ "./node_modules/bootstrap/js/src/alert.js");
/* harmony import */ var ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/message/Message.js */ "./src/message/Message.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }





var DEFAULT_DELAY = 7000;
var MessageNotification = function (_ngeoMessageMessage) {
  MessageNotification.$inject = ["$timeout"];

  _inheritsLoose(MessageNotification, _ngeoMessageMessage);

  function MessageNotification($timeout) {
    var _this;

    _this = _ngeoMessageMessage.call(this) || this;
    _this.timeout_ = $timeout;
    var container = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('<div class="ngeo-notification"></div>');
    angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(document.body).append(container);
    _this.container_ = container;
    _this.cache_ = {};
    return _this;
  }

  var _proto = MessageNotification.prototype;

  _proto.notify = function notify(object) {
    this.show(object);
  };

  _proto.clear = function clear() {
    for (var uid in this.cache_) {
      this.clearMessageByCacheItem_(this.cache_[parseInt(uid, 10)]);
    }
  };

  _proto.showMessage = function showMessage(message) {
    var _this2 = this;

    var type = message.type;
    console.assert(typeof type == 'string', 'Type should be set.');
    var classNames = ['alert', 'fade', 'show'];

    switch (type) {
      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].ERROR:
        classNames.push('alert-danger');
        break;

      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].INFORMATION:
        classNames.push('alert-info');
        break;

      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].SUCCESS:
        classNames.push('alert-success');
        break;

      case ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["MessageType"].WARNING:
        classNames.push('alert-warning');
        break;

      default:
        break;
    }

    var el = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element("<div class=\"" + classNames.join(' ') + "\"></div>");
    var container;

    if (message.target) {
      container = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(message.target);
    } else {
      container = this.container_;
    }

    container.append(el);
    el.html(message.msg).addClass('show');
    var delay = message.delay !== undefined ? message.delay : DEFAULT_DELAY;
    var item = {
      el: el
    };
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_3__["getUid"])(el);
    item.promise = this.timeout_(function () {
      el.alert('close');
      delete _this2.cache_[uid];
    }, delay);
    this.cache_[uid] = item;
  };

  _proto.clearMessageByCacheItem_ = function clearMessageByCacheItem_(item) {
    var el = item.el;
    var promise = item.promise;
    var uid = Object(ol_util_js__WEBPACK_IMPORTED_MODULE_3__["getUid"])(el);
    el.alert('close');
    this.timeout_.cancel(promise);
    delete this.cache_[uid];
  };

  return MessageNotification;
}(ngeo_message_Message_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoNotification', []);
module.service('ngeoNotification', MessageNotification);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/message/Popup.js":
/*!******************************!*\
  !*** ./src/message/Popup.js ***!
  \******************************/
/*! exports provided: MessagePopup, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagePopup", function() { return MessagePopup; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_message_popupComponent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/message/popupComponent.js */ "./src/message/popupComponent.js");
Factory.$inject = ["$compile", "$rootScope", "$sce", "$timeout"];


function MessagePopup($compile, $rootScope, $sce, $timeout) {
  var _this = this;

  this.scope = $rootScope.$new(true);
  this.scope.$watch(function () {
    return _this.scope.open;
  }, function (open) {
    if (!open && _this.autoDestroy_) {
      _this.timeout_(function () {
        _this.destroy();
      });
    }
  });
  this.sce_ = $sce;
  this.timeout_ = $timeout;
  this.element_ = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('<div ngeo-popup></div>');
  this.autoDestroy_ = false;
  $compile(this.element_)(this.scope);
  angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(document.body).append(this.element_);
}

MessagePopup.prototype.getOpen = function () {
  return this.scope.open;
};

MessagePopup.prototype.setOpen = function (open) {
  this.scope.open = open;
};

MessagePopup.prototype.destroy = function () {
  this.scope.$destroy();
  this.element_.remove();
};

MessagePopup.prototype.setTitle = function (title) {
  var trustedTitle = this.sce_.trustAsHtml(title);
  this.scope.title = trustedTitle;
};

MessagePopup.prototype.setContent = function (content, opt_trusted) {
  this.scope.content = opt_trusted ? this.sce_.trustAsHtml(content) : content;
};

MessagePopup.prototype.setUrl = function (url) {
  var content = this.sce_.trustAsHtml("<iframe src=\"" + url + "\" width=\"100%\" height=\"100%\"></iframe>");
  this.setContent(content);
};

MessagePopup.prototype.setWidth = function (width) {
  this.element_.width(width);
};

MessagePopup.prototype.setHeight = function (height) {
  this.element_.height(height);
};

MessagePopup.prototype.setSize = function (width, height) {
  this.setWidth(width);
  this.setHeight(height);
};

MessagePopup.prototype.setAutoDestroy = function (autoDestroy) {
  this.autoDestroy_ = autoDestroy;
};

MessagePopup.prototype.addClass = function (cls) {
  this.element_.addClass(cls);
};

MessagePopup.prototype.open = function (options) {
  if (options.url) {
    this.setUrl(options.url);
  } else if (options.content) {
    this.setContent(options.content);
  } else {
    console.assert(false, 'ngeo.message.Popup options requirest "url" or "content".');
  }

  if (options.autoDestroy !== undefined) {
    this.setAutoDestroy(options.autoDestroy);
  }

  if (options.cls !== undefined) {
    this.addClass(options.cls);
  }

  if (options.height !== undefined) {
    this.setHeight(options.height);
  }

  if (options.title !== undefined) {
    this.setTitle(options.title);
  }

  if (options.width !== undefined) {
    this.setWidth(options.width);
  }

  this.setOpen(true);
};

function Factory($compile, $rootScope, $sce, $timeout) {
  return function () {
    return new MessagePopup($compile, $rootScope, $sce, $timeout);
  };
}

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCreatePopup', [ngeo_message_popupComponent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.factory('ngeoCreatePopup', Factory);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/message/modalComponent.js":
/*!***************************************!*\
  !*** ./src/message/modalComponent.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/ui/widgets/draggable.js */ "./node_modules/jquery-ui/ui/widgets/draggable.js");
/* harmony import */ var jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_draggable_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bootstrap_js_src_modal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap/js/src/modal.js */ "./node_modules/bootstrap/js/src/modal.js");




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoModal', []);
var messageModalComponent = {
  template: "<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <ng-transclude></ng-transclude>\n      </div>\n    </div>\n  </div>",
  require: {
    'ngModel': 'ngModel'
  },
  transclude: true,
  controller: 'ngeoModalController',
  bindings: {
    'draggableHandle': '=?ngeodraggableHandle',
    'resizable': '<ngeoModalResizable',
    'closable': '<ngeoModalClosable'
  }
};
module.component('ngeoModal', messageModalComponent);

var Controller = function () {
  Controller.$inject = ["$scope", "$element"];

  function Controller($scope, $element) {
    this.$element_ = $element;
    this.$scope_ = $scope;
    this.modal_ = null;
    this.draggableHandle = '';
    this.closable = false;
    this.resizable = false;
    this.ngModel = null;
  }

  var _proto = Controller.prototype;

  _proto.$onInit = function $onInit() {
    this.closable = this.closable !== false;
    this.resizable = !!this.resizable;
    this.draggableHandle = this.draggableHandle || '.ui-draggable-handle';
  };

  _proto.$postLink = function $postLink() {
    var _this = this;

    this.modal_ = this.$element_.children();

    if (!this.closable) {
      this.modal_.attr('data-keyboard', 'false');
      this.modal_.attr('data-backdrop', 'static');
    }

    var dialog = this.modal_.find('.modal-dialog');
    dialog.draggable({
      handle: this.draggableHandle
    });

    if (this.resizable) {
      dialog.resizable();
    }

    if (!this.ngModel) {
      throw new Error('Missing model');
    }

    this.ngModel.$render = function () {
      if (!_this.ngModel) {
        throw new Error('Missing model');
      }

      if (!_this.modal_) {
        throw new Error('Missing modal');
      }

      _this.modal_.modal(_this.ngModel.$viewValue ? 'show' : 'hide');
    };

    this.modal_.on('shown.bs.modal hidden.bs.modal', function (e) {
      if (!_this.ngModel) {
        throw new Error('Missing model');
      }

      var type = e.type;
      console.assert(type == 'shown' || type == 'hidden');

      _this.ngModel.$setViewValue(type == 'shown');
    });
  };

  _proto.$onDestroy = function $onDestroy() {
    if (!this.modal_) {
      throw new Error('Missing modal');
    }

    this.modal_.modal('hide');
    var dialog = this.modal_.find('.modal-dialog');
    dialog.draggable('destroy');

    if (this.resizable) {
      dialog.resizable('destroy');
    }
  };

  return Controller;
}();

module.controller('ngeoModalController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/message/popupComponent.js":
/*!***************************************!*\
  !*** ./src/message/popupComponent.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular-sanitize */ "./node_modules/angular-sanitize/index.js");
/* harmony import */ var angular_sanitize__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(angular_sanitize__WEBPACK_IMPORTED_MODULE_1__);
messagePopopComponent.$inject = ["ngeoPopupTemplateUrl"];


var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoPopup', ['ngSanitize']);
module.value('ngeoPopupTemplateUrl', function (element, attrs) {
  var templateUrl = attrs['ngeoPopupTemplateurl'];
  return templateUrl !== undefined ? templateUrl : 'ngeo/message/popupcomponent';
});
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/message/popupcomponent', __webpack_require__(/*! ./popupcomponent.html */ "./src/message/popupcomponent.html"));
}]);

function messagePopopComponent(ngeoPopupTemplateUrl) {
  return {
    restrict: 'A',
    templateUrl: ngeoPopupTemplateUrl,
    link: function link(scope, element, attrs) {
      element.addClass('popover');

      scope.close = function (evt) {
        if (evt) {
          evt.stopPropagation();
          evt.preventDefault();
        }

        element.addClass('hidden');
      };

      scope.$watch('open', function (newVal, oldVal) {
        element.css('display', newVal ? 'block' : 'none');
      });
    }
  };
}

module.directive('ngeoPopup', messagePopopComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/message/popupcomponent.html":
/*!*****************************************!*\
  !*** ./src/message/popupcomponent.html ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<h4 class="popover-title ngeo-popup-title">\n  <span ng-bind-html="title"></span>\n  <button type="button" class="close" ng-click="open = false"> &times;</button>\n</h4>\n<div class="popover-body" ng-bind-html="content"></div>\n';

}
return __p
}

/***/ }),

/***/ "./src/misc/AutoProjection.js":
/*!************************************!*\
  !*** ./src/misc/AutoProjection.js ***!
  \************************************/
/*! exports provided: AutoProjectionService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AutoProjectionService", function() { return AutoProjectionService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");



function AutoProjectionService() {}

AutoProjectionService.prototype.stringToCoordinates = function (str) {
  var coords = str.match(/([\d\.']+)[\s,]+([\d\.']+)/);

  if (coords) {
    var x = parseFloat(coords[1].replace(/'/g, ''));
    var y = parseFloat(coords[2].replace(/'/g, ''));

    if (!isNaN(x) && !isNaN(y)) {
      return [x, y];
    }
  }

  return null;
};

AutoProjectionService.prototype.getProjectionList = function (projectionsCodes) {
  var code, proj;
  var projections = [];
  projectionsCodes.forEach(function (projection) {
    code = projection.toUpperCase();

    if (code.substr(0, 5) != 'EPSG:') {
      code = "EPSG:" + code;
    }

    proj = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["get"](code);

    if (proj !== null) {
      projections.push(proj);
    } else {
      console.error("The projection " + code + " is not defined in ol.proj.");
    }
  });
  return projections;
};

AutoProjectionService.prototype.tryProjections = function (coordinates, extent, viewProjection, opt_projections) {
  var position = null;

  if (opt_projections === undefined) {
    opt_projections = [viewProjection];
  }

  opt_projections.some(function (projection) {
    try {
      position = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["transform"](coordinates, projection, viewProjection);

      if (ol_extent_js__WEBPACK_IMPORTED_MODULE_2__["containsCoordinate"](extent, position)) {
        return true;
      }
    } catch (e) {}

    position = null;
    return false;
  });
  return position;
};

AutoProjectionService.prototype.tryProjectionsWithInversion = function (coordinates, extent, viewProjection, opt_projections) {
  var position = this.tryProjections(coordinates, extent, viewProjection, opt_projections);

  if (position === null) {
    position = this.tryProjections(coordinates.reverse(), extent, viewProjection, opt_projections);
  }

  return position;
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoAutoProjection', []);
module.service('ngeoAutoProjection', AutoProjectionService);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/EventHelper.js":
/*!*********************************!*\
  !*** ./src/misc/EventHelper.js ***!
  \*********************************/
/*! exports provided: EventHelper, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventHelper", function() { return EventHelper; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");


function EventHelper() {
  this.listenerKeys_ = {};
}

EventHelper.prototype.addListenerKey = function (uid, key) {
  if (!this.listenerKeys_[uid]) {
    this.initListenerKey_(uid);
  }

  this.listenerKeys_[uid].push(key);
};

EventHelper.prototype.clearListenerKey = function (uid) {
  this.initListenerKey_(uid);
};

EventHelper.prototype.initListenerKey_ = function (uid) {
  if (!this.listenerKeys_[uid]) {
    this.listenerKeys_[uid] = [];
  } else {
    if (this.listenerKeys_[uid].length) {
      this.listenerKeys_[uid].forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKey"]);
      this.listenerKeys_[uid].length = 0;
    }
  }
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoEventHelper', []);
module.service('ngeoEventHelper', EventHelper);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/FeatureHelper.js":
/*!***********************************!*\
  !*** ./src/misc/FeatureHelper.js ***!
  \***********************************/
/*! exports provided: FeatureFormatType, ArrowDirections, ArrowPositions, FeatureHelper, getFilteredFeatureValues, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureFormatType", function() { return FeatureFormatType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrowDirections", function() { return ArrowDirections; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrowPositions", function() { return ArrowPositions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeatureHelper", function() { return FeatureHelper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFilteredFeatureValues", function() { return getFilteredFeatureValues; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/download/service.js */ "./src/download/service.js");
/* harmony import */ var ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/format/FeatureProperties.js */ "./src/format/FeatureProperties.js");
/* harmony import */ var ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/GeometryType.js */ "./src/GeometryType.js");
/* harmony import */ var ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/interaction/Measure.js */ "./src/interaction/Measure.js");
/* harmony import */ var ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/interaction/MeasureAzimut.js */ "./src/interaction/MeasureAzimut.js");
/* harmony import */ var ol_color_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/color.js */ "./node_modules/ol/color.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/geom/MultiLineString.js */ "./node_modules/ol/geom/MultiLineString.js");
/* harmony import */ var ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/geom/MultiPoint.js */ "./node_modules/ol/geom/MultiPoint.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/geom/MultiPolygon.js */ "./node_modules/ol/geom/MultiPolygon.js");
/* harmony import */ var ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/geom/SimpleGeometry.js */ "./node_modules/ol/geom/SimpleGeometry.js");
/* harmony import */ var ol_format_GPX_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/format/GPX.js */ "./node_modules/ol/format/GPX.js");
/* harmony import */ var ol_format_KML_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/format/KML.js */ "./node_modules/ol/format/KML.js");
/* harmony import */ var ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ol/style/Circle.js */ "./node_modules/ol/style/Circle.js");
/* harmony import */ var ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ol/style/Fill.js */ "./node_modules/ol/style/Fill.js");
/* harmony import */ var ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ol/style/RegularShape.js */ "./node_modules/ol/style/RegularShape.js");
/* harmony import */ var ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ol/style/Stroke.js */ "./node_modules/ol/style/Stroke.js");
/* harmony import */ var ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ol/style/Style.js */ "./node_modules/ol/style/Style.js");
/* harmony import */ var ol_style_Text_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ol/style/Text.js */ "./node_modules/ol/style/Text.js");
FeatureHelper.$inject = ["$filter", "ngeoMeasurePrecision", "ngeoMeasureDecimals", "ngeoMeasureSpherical", "ngeoPointfilter", "ngeoDownload"];

























var VertexStyleRegularShapeRadius = 6;
var FeatureFormatType = {
  GPX: 'GPX',
  KML: 'KML'
};
var ArrowDirections = {
  NONE: 'none',
  FORWARDS: 'forwards',
  BACKWARDS: 'backwards',
  BOTH: 'both'
};
var ArrowPositions = {
  FIRST: 'first',
  LAST: 'last',
  EVERY: 'every'
};
function FeatureHelper($filter, ngeoMeasurePrecision, ngeoMeasureDecimals, ngeoMeasureSpherical, ngeoPointfilter, ngeoDownload) {
  this.$filter_ = $filter;
  this.decimals_ = ngeoMeasureDecimals;
  this.precision_ = ngeoMeasurePrecision;
  this.spherical = ngeoMeasureSpherical;
  this.numberFormat_ = $filter('number');
  this.unitPrefixFormat_ = $filter('ngeoUnitPrefix');
  this.ngeoNumberCoordinates_ = $filter('ngeoNumberCoordinates');
  this.pointFilterFn_ = null;
  this.pointFilterArgs_ = [];

  if (ngeoPointfilter) {
    var filterElements = ngeoPointfilter.split(':');
    var filterName = filterElements.shift();
    var filter = this.$filter_(filterName);
    console.assert(typeof filter == 'function');
    this.pointFilterFn_ = filter;
    this.pointFilterArgs_ = filterElements;
  } else {
    this.pointFilterFn_ = null;
  }

  this.projection_ = null;
  this.download_ = ngeoDownload;
}

FeatureHelper.prototype.setProjection = function (projection) {
  this.projection_ = projection;
};

FeatureHelper.prototype.setStyle = function (feature, opt_select) {
  var styles = this.getStyle(feature);

  if (opt_select) {
    if (this.supportsVertex_(feature)) {
      styles.push(this.getVertexStyle());
    }

    styles.unshift(this.getHaloStyle_(feature));
  }

  feature.setStyle(styles);
};

FeatureHelper.prototype.getStyle = function (feature) {
  var type = this.getType(feature);
  var style;

  switch (type) {
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING:
      style = this.getLineStringStyle_(feature);
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POINT:
      style = this.getPointStyle_(feature);
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE:
      style = this.getPolygonStyle_(feature);
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].TEXT:
      style = this.getTextStyle_(feature);
      break;

    default:
      break;
  }

  if (!style) {
    throw new Error('Missing style');
  }

  var styles;

  if (style instanceof Array) {
    styles = style;
  } else {
    styles = [style];
  }

  return styles;
};

FeatureHelper.prototype.getLineStringStyle_ = function (feature) {
  var strokeWidth = this.getStrokeProperty(feature);
  var showLabel = this.getShowLabelProperty(feature);
  var showMeasure = this.getShowMeasureProperty(feature);
  var color = this.getRGBAColorProperty(feature);
  var arrowDirection = this.getArrowDirectionProperty(feature);
  var arrowPosition = this.getArrowPositionProperty(feature);
  var styles = [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
      color: color,
      width: strokeWidth
    })
  })];

  if (arrowDirection !== ArrowDirections.NONE) {
    styles.push.apply(styles, this.getArrowLineStyles_(feature, arrowDirection, arrowPosition, color));
  }

  var textLabelValues = [];

  if (showMeasure) {
    textLabelValues.push(this.getMeasure(feature));
  }

  if (showLabel) {
    textLabelValues.push(this.getNameProperty(feature));
  }

  if (showLabel || showMeasure) {
    var textLabelValue = textLabelValues.join('\n');
    styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
      text: this.createTextStyle_({
        propertyName: '',
        name: '',
        text: textLabelValue
      })
    }));
  }

  return styles;
};

FeatureHelper.prototype.getArrowLineStyles_ = function (feature, arrowDirection, arrowPosition, color) {
  var geometry = feature.getGeometry();
  var arrowStyles = [];

  var addArrowToSegment = function addArrowToSegment(start, end) {
    var dx = end[0] - start[0];
    var dy = end[1] - start[1];
    var rotation = Math.atan2(dy, dx);

    var getArrowStyle = function getArrowStyle(coordinate, invert) {
      var symRotation = Math.PI / 2 + rotation;
      return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        geometry: new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"](coordinate),
        text: new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_24__["default"]({
          fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
            color: color
          }),
          font: '900 16px "Sans serif"',
          stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
            width: 1,
            color: color
          }),
          offsetY: -6,
          text: "\u22C1",
          rotateWithView: true,
          rotation: invert ? Math.PI - symRotation : -symRotation
        })
      });
    };

    if (arrowDirection === ArrowDirections.FORWARDS || arrowDirection === ArrowDirections.BOTH) {
      arrowStyles.push(getArrowStyle(end, false));
    }

    if (arrowDirection === ArrowDirections.BACKWARDS || arrowDirection === ArrowDirections.BOTH) {
      arrowStyles.push(getArrowStyle(start, true));
    }
  };

  var firstOrLastSegment = null;
  geometry.forEachSegment(function (start, end) {
    if (arrowPosition === ArrowPositions.FIRST) {
      if (firstOrLastSegment === null) {
        firstOrLastSegment = [[].concat(start), [].concat(end)];
      }

      return;
    }

    if (arrowPosition === ArrowPositions.LAST) {
      firstOrLastSegment = [[].concat(start), [].concat(end)];
      return;
    }

    addArrowToSegment(start, end);
  });

  if (firstOrLastSegment) {
    addArrowToSegment(firstOrLastSegment[0], firstOrLastSegment[1]);
  }

  return arrowStyles;
};

FeatureHelper.prototype.getPointStyle_ = function (feature) {
  var size = this.getSizeProperty(feature);
  var color = this.getRGBAColorProperty(feature);
  var showLabel = this.getShowLabelProperty(feature);
  var showMeasure = this.getShowMeasureProperty(feature);
  var styles = [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    image: new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
      radius: size,
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
        color: color
      })
    })
  })];
  var textLabelValues = [];

  if (showMeasure) {
    textLabelValues.push(this.getMeasure(feature));
  }

  if (showLabel) {
    textLabelValues.push(this.getNameProperty(feature));
  }

  if (showLabel || showMeasure) {
    var textLabelValue = textLabelValues.join('\n');
    var font_size = 10;
    var point_to_px = 1.3;
    styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
      text: this.createTextStyle_({
        propertyName: '',
        name: '',
        text: textLabelValue,
        size: font_size,
        offsetY: -(size + font_size / 2 * textLabelValues.length * point_to_px + 4)
      })
    }));
  }

  return styles;
};

FeatureHelper.prototype.optNumber = function (feature, attrib) {
  var value = feature.get(attrib);

  if (value !== undefined) {
    if (typeof value == 'string') {
      return +value;
    } else {
      return value;
    }
  } else {
    return undefined;
  }
};

FeatureHelper.prototype.getNumber = function (feature, attrib) {
  var value = feature.get(attrib);

  if (typeof value == 'string') {
    return +value;
  } else {
    return value;
  }
};

FeatureHelper.prototype.getPolygonStyle_ = function (feature) {
  var strokeWidth = this.getStrokeProperty(feature);
  var opacity = this.getOpacityProperty(feature);
  var color = this.getRGBAColorProperty(feature);
  var showLabel = this.getShowLabelProperty(feature);
  var showMeasure = this.getShowMeasureProperty(feature);
  var fillColor = color.slice();
  fillColor[3] = opacity;
  var azimut = this.optNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].AZIMUT);
  var styles = [new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
      color: fillColor
    }),
    stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
      color: color,
      width: strokeWidth
    })
  })];

  if (showMeasure || showLabel) {
    if (showMeasure && azimut !== undefined) {
      if (!this.projection_) {
        throw new Error('Missing projection');
      }

      var line = this.getRadiusLine(feature, azimut);
      var length = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedLength"])(line, this.projection_, this.precision_, this.unitPrefixFormat_);
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        geometry: line,
        fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
          color: fillColor
        }),
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: color,
          width: strokeWidth
        }),
        text: this.createTextStyle_({
          propertyName: '',
          name: '',
          text: length,
          angle: (azimut % 180 + 180) % 180 - 90
        })
      }));
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        geometry: new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"](line.getLastCoordinate()),
        text: this.createTextStyle_({
          propertyName: '',
          name: '',
          text: this.numberFormat_(azimut, this.decimals_) + "\xB0",
          size: 10,
          offsetX: Math.cos((azimut - 90) * Math.PI / 180) * 20,
          offsetY: Math.sin((azimut - 90) * Math.PI / 180) * 20
        })
      }));

      if (showLabel) {
        styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
          text: this.createTextStyle_({
            propertyName: '',
            name: '',
            text: this.getNameProperty(feature),
            offsetY: -8,
            exceedLength: true
          })
        }));
      }
    } else {
      var textLabelValues = [];

      if (showMeasure) {
        textLabelValues.push(this.getMeasure(feature));
      }

      if (showLabel) {
        textLabelValues.push(this.getNameProperty(feature));
      }

      if (showLabel || showMeasure) {
        var textLabelValue = textLabelValues.join('\n');
        styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
          text: this.createTextStyle_({
            propertyName: '',
            name: '',
            text: textLabelValue,
            exceedLength: true
          })
        }));
      }
    }
  }

  return styles;
};

FeatureHelper.prototype.getTextStyle_ = function (feature) {
  return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
    text: this.createTextStyle_({
      propertyName: '',
      name: '',
      rotateWithView: true,
      text: this.getNameProperty(feature),
      size: this.getSizeProperty(feature),
      angle: this.getAngleProperty(feature),
      color: this.getRGBAColorProperty(feature),
      width: this.getStrokeProperty(feature)
    })
  });
};

FeatureHelper.prototype.createEditingStyles = function (feature) {
  var white = [255, 255, 255, 1];
  var blue = [0, 153, 255, 1];
  var width = 3;
  var styles = [];
  var geom = feature.getGeometry();

  if (!geom) {
    throw new Error('Missing geom');
  }

  var type = geom.getType();

  if (type === 'Point') {
    styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
      image: new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
        radius: width * 2,
        fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
          color: blue
        }),
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: white,
          width: width / 2
        })
      }),
      zIndex: Infinity
    }));
  } else {
    if (type === 'LineString') {
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: white,
          width: width + 2
        })
      }));
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: blue,
          width: width
        })
      }));
    } else {
      styles.push(new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: blue,
          width: width / 2
        }),
        fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
          color: [255, 255, 255, 0.5]
        })
      }));
    }

    styles.push(this.getVertexStyle(true));
  }

  return styles;
};

FeatureHelper.prototype.getVertexInfoAtCoordinate = function (feature, coordinate, resolution) {
  var info = null;

  if (this.supportsVertexRemoval_(feature)) {
    var buffer = resolution * VertexStyleRegularShapeRadius;
    var coordinates = null;
    var coordinatess = null;
    var coordinatesss = null;
    var minNumCoordinates = -1;
    var geometry = feature.getGeometry();

    if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
      coordinates = geometry.getCoordinates();
      minNumCoordinates = 2;
    } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
      coordinatess = geometry.getCoordinates();
      minNumCoordinates = 4;
    } else if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
      coordinatess = geometry.getCoordinates();
      minNumCoordinates = 2;
    } else if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
      coordinatesss = geometry.getCoordinates();
      minNumCoordinates = 4;
    }

    if (coordinates) {
      var index = this.getCoordinateIndexThatHitsAt_(coordinates, coordinate, minNumCoordinates, buffer);

      if (index !== -1) {
        info = [index];
      }
    } else if (coordinatess) {
      var ii = coordinatess.length;

      for (var i = 0; i < ii; i++) {
        var _index = this.getCoordinateIndexThatHitsAt_(coordinatess[i], coordinate, minNumCoordinates, buffer);

        if (_index !== -1) {
          info = [i, _index];
          break;
        }
      }
    } else if (coordinatesss) {
      var _ii = coordinatesss.length;

      for (var _i = 0; _i < _ii; _i++) {
        var _coordinatess = coordinatesss[_i];
        var jj = _coordinatess.length;

        for (var j = 0; j < jj; j++) {
          var _index2 = this.getCoordinateIndexThatHitsAt_(_coordinatess[j], coordinate, minNumCoordinates, buffer);

          if (_index2 !== -1) {
            info = [_i, j, _index2];
            break;
          }
        }

        if (info) {
          break;
        }
      }
    }
  }

  return info;
};

FeatureHelper.prototype.getCoordinateIndexThatHitsAt_ = function (coordinates, coordinate, min, buffer) {
  var index = -1;
  var ii = coordinates.length;

  if (ii > min) {
    for (var i = 0; i < ii; i++) {
      var hits = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["containsCoordinate"](ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["buffer"](ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["createOrUpdateFromCoordinate"](coordinates[i]), buffer), coordinate);

      if (hits) {
        index = i;
        break;
      }
    }
  }

  return index;
};

FeatureHelper.prototype.getVertexStyle = function (opt_incGeomFunc) {
  var incGeomFunc = opt_incGeomFunc !== undefined ? opt_incGeomFunc : true;
  var options = {
    image: new ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_21__["default"]({
      radius: VertexStyleRegularShapeRadius,
      points: 4,
      angle: Math.PI / 4,
      fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
        color: [255, 255, 255, 0.5]
      }),
      stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
        color: [0, 0, 0, 1]
      })
    })
  };

  if (incGeomFunc) {
    options.geometry = function (feature) {
      var geom = feature.getGeometry();

      if (!(geom instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_16__["default"])) {
        return;
      }

      if (geom.getType() == 'Point') {
        return;
      }

      var innerMultiCoordinates;
      var multiCoordinates = [];
      var coordinates = [];

      if (geom instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
        coordinates = geom.getCoordinates();
      } else if (geom instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
        multiCoordinates = geom.getCoordinates();
      } else if (geom instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
        coordinates = geom.getCoordinates()[0];
      } else if (geom instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
        innerMultiCoordinates = geom.getCoordinates();
      }

      if (innerMultiCoordinates) {
        for (var i = 0, ii = innerMultiCoordinates.length; i < ii; i++) {
          multiCoordinates = multiCoordinates.concat(innerMultiCoordinates[i]);
        }
      }

      for (var _i2 = 0, _ii2 = multiCoordinates.length; _i2 < _ii2; _i2++) {
        coordinates = coordinates.concat(multiCoordinates[_i2]);
      }

      if (coordinates.length) {
        return new ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__["default"](coordinates);
      } else {
        return geom;
      }
    };
  }

  return new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"](options);
};

FeatureHelper.prototype.removeVertex = function (feature, vertexInfo) {
  var deleted = false;
  var geometry = feature.getGeometry();

  if (!(geometry instanceof ol_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_16__["default"])) {
    throw new Error('Wrong geometry type');
  }

  if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    var coordinates = geometry.getCoordinates();
    var index = vertexInfo[0];

    if (coordinates.length > 2) {
      coordinates.splice(index, 1);
      deleted = true;
    }

    if (deleted) {
      geometry.setCoordinates(coordinates);
    }
  } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
    var _coordinates = geometry.getCoordinates();

    var indexOne = vertexInfo[0];
    var indexTwo = vertexInfo[1];
    var component = _coordinates[indexOne];

    if (component.length > 4) {
      component.splice(indexTwo, 1);
      deleted = true;

      if (indexTwo === 0) {
        component.pop();
        component.push(component[0]);
      }
    }

    if (deleted) {
      geometry.setCoordinates(_coordinates);
    }
  } else if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    var _coordinates2 = geometry.getCoordinates();

    var _indexOne = vertexInfo[0];
    var _indexTwo = vertexInfo[1];
    var _component = _coordinates2[_indexOne];

    if (_component.length > 2) {
      _component.splice(_indexTwo, 1);

      deleted = true;
    }

    if (deleted) {
      geometry.setCoordinates(_coordinates2);
    }
  } else if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
    var _coordinates3 = geometry.getCoordinates();

    var _indexOne2 = vertexInfo[0];
    var _indexTwo2 = vertexInfo[1];
    var indexThree = vertexInfo[2];
    var _component2 = _coordinates3[_indexOne2][_indexTwo2];

    if (_component2.length > 4) {
      _component2.splice(indexThree, 1);

      deleted = true;

      if (indexThree === 0) {
        _component2.pop();

        _component2.push(_component2[0]);
      }
    }

    if (deleted) {
      geometry.setCoordinates(_coordinates3);
    }
  }
};

FeatureHelper.prototype.supportsVertex_ = function (feature) {
  var supported = [ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE];
  var type = this.getType(feature);
  return supported.includes(type);
};

FeatureHelper.prototype.supportsVertexRemoval_ = function (feature) {
  var supported = [ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_LINE_STRING, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POLYGON, ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON];
  var type = this.getType(feature);
  return supported.includes(type);
};

FeatureHelper.prototype.getHaloStyle_ = function (feature) {
  var type = this.getType(feature);
  var style;
  var haloSize = 3;

  switch (type) {
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POINT:
      var size = this.getSizeProperty(feature);
      style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        image: new ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
          radius: size + haloSize,
          fill: new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
            color: [255, 255, 255, 1]
          })
        })
      });
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON:
    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE:
      var strokeWidth = this.getStrokeProperty(feature);
      style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        stroke: new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
          color: [255, 255, 255, 1],
          width: strokeWidth + haloSize * 2
        })
      });
      break;

    case ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].TEXT:
      style = new ol_style_Style_js__WEBPACK_IMPORTED_MODULE_23__["default"]({
        text: this.createTextStyle_({
          propertyName: '',
          name: '',
          rotateWithView: true,
          text: this.getNameProperty(feature),
          size: this.getSizeProperty(feature),
          angle: this.getAngleProperty(feature),
          width: haloSize * 3
        })
      });
      break;

    default:
      break;
  }

  if (!style) {
    throw new Error('Missing style');
  }

  return style;
};

function getFilteredFeatureValues(feature) {
  var properties = feature.getProperties();
  delete properties.boundedBy;
  delete properties[feature.getGeometryName()];
  delete properties.ngeo_feature_type_;
  return properties;
}

FeatureHelper.prototype.getAngleProperty = function (feature) {
  var angle = +feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ANGLE);
  console.assert(typeof angle == 'number');
  return angle;
};

FeatureHelper.prototype.getColorProperty = function (feature) {
  var color = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].COLOR);
  return color;
};

FeatureHelper.prototype.getRGBAColorProperty = function (feature) {
  var color = this.getColorProperty(feature);

  if (typeof color != 'string') {
    return null;
  }

  return Object(ol_color_js__WEBPACK_IMPORTED_MODULE_7__["fromString"])(color);
};

FeatureHelper.prototype.getNameProperty = function (feature) {
  var name = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].NAME);
  console.assert(typeof name == 'string');
  return name;
};

FeatureHelper.prototype.getOpacityProperty = function (feature) {
  return this.getNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].OPACITY);
};

FeatureHelper.prototype.getShowMeasureProperty = function (feature) {
  var showMeasure = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].SHOW_MEASURE);

  if (showMeasure === undefined) {
    showMeasure = false;
  } else if (typeof showMeasure === 'string') {
    showMeasure = showMeasure === 'true' ? true : false;
  }

  return showMeasure;
};

FeatureHelper.prototype.getShowLabelProperty = function (feature) {
  var showLabel = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].SHOW_LABEL);

  if (showLabel === undefined) {
    showLabel = false;
  } else if (typeof showLabel === 'string') {
    showLabel = showLabel === 'true' ? true : false;
  }

  return showLabel;
};

FeatureHelper.prototype.getSizeProperty = function (feature) {
  return this.getNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].SIZE);
};

FeatureHelper.prototype.getStrokeProperty = function (feature) {
  return this.getNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].STROKE);
};

FeatureHelper.prototype.getArrowDirectionProperty = function (feature) {
  var arrowDirection = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ARROW_DIRECTION);

  if (Object.values(ArrowDirections).includes(arrowDirection)) {
    return arrowDirection;
  }

  return ArrowDirections.NONE;
};

FeatureHelper.prototype.getArrowPositionProperty = function (feature) {
  var arrowPosition = feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].ARROW_POSITION);

  if (Object.values(ArrowPositions).includes(arrowPosition)) {
    return arrowPosition;
  }

  return ArrowPositions.FIRST;
};

FeatureHelper.prototype.export = function (features, formatType) {
  switch (formatType) {
    case FeatureFormatType.GPX:
      this.exportGPX(features);
      break;

    case FeatureFormatType.KML:
      this.exportKML(features);
      break;

    default:
      break;
  }
};

FeatureHelper.prototype.exportGPX = function (features) {
  var format = new ol_format_GPX_js__WEBPACK_IMPORTED_MODULE_17__["default"]();
  var mimeType = 'application/gpx+xml';
  var fileName = 'export.gpx';
  this.export_(features, format, fileName, mimeType);
};

FeatureHelper.prototype.exportKML = function (features) {
  var format = new ol_format_KML_js__WEBPACK_IMPORTED_MODULE_18__["default"]();
  var mimeType = 'application/vnd.google-earth.kml+xml';
  var fileName = 'export.kml';
  this.export_(features, format, fileName, mimeType);
};

FeatureHelper.prototype.export_ = function (features, format, fileName, opt_mimeType) {
  var _this = this;

  var mimeType = opt_mimeType !== undefined ? opt_mimeType : 'text/plain';
  var clones = [];
  var clone;
  features.forEach(function (feature) {
    clone = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_9__["default"](feature.getProperties());

    _this.setStyle(clone, false);

    clones.push(clone);
  });
  var writeOptions = this.projection_ ? {
    dataProjection: 'EPSG:4326',
    featureProjection: this.projection_
  } : {};
  var data = format.writeFeatures(clones, writeOptions);
  this.download_(data, fileName, mimeType + ";charset=utf-8");
};

FeatureHelper.prototype.createTextStyle_ = function (options) {
  var text_options = options;

  if (options.angle) {
    var angle = options.angle !== undefined ? options.angle : 0;
    var rotation = angle * Math.PI / 180;
    text_options.rotation = rotation;
    delete options.angle;
  }

  text_options.font = ['normal', (options.size || 10) + "pt", 'Arial'].join(' ');

  if (options.color) {
    text_options.fill = new ol_style_Fill_js__WEBPACK_IMPORTED_MODULE_20__["default"]({
      color: options.color || [0, 0, 0, 1]
    });
    delete options.color;
  }

  text_options.stroke = new ol_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__["default"]({
    color: [255, 255, 255, 1],
    width: options.width || 3
  });
  delete options.width;
  return new ol_style_Text_js__WEBPACK_IMPORTED_MODULE_24__["default"](text_options);
};

FeatureHelper.prototype.getMeasure = function (feature) {
  if (!this.projection_) {
    throw new Error('Missing projection');
  }

  var geometry = feature.getGeometry();

  if (!geometry) {
    throw new Error('Missing geometry');
  }

  var measure = '';

  if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
    if (this.getType(feature) === ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE) {
      var azimut = this.optNumber(feature, ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].AZIMUT);

      if (typeof azimut != 'number') {
        throw new Error('Missing azimut');
      }

      var line = this.getRadiusLine(feature, azimut);
      measure = Object(ngeo_interaction_MeasureAzimut_js__WEBPACK_IMPORTED_MODULE_6__["getFormattedAzimutRadius"])(line, this.projection_, this.decimals_, this.precision_, this.unitPrefixFormat_, this.numberFormat_);
    } else {
      measure = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedArea"])(geometry, this.projection_, this.precision_, this.unitPrefixFormat_, this.spherical);
    }
  } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    measure = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedLength"])(geometry, this.projection_, this.precision_, this.unitPrefixFormat_, this.spherical);
  } else if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
    if (this.pointFilterFn_ === null) {
      measure = Object(ngeo_interaction_Measure_js__WEBPACK_IMPORTED_MODULE_5__["getFormattedPoint"])(geometry, this.decimals_, this.ngeoNumberCoordinates_);
    } else {
      var coordinates = geometry.getCoordinates();

      if (this.pointFilterArgs_.length > 1) {
        measure = this.pointFilterFn_(coordinates, this.pointFilterArgs_[0], this.pointFilterArgs_[1]).join(', ');
      } else {
        measure = this.pointFilterFn_(coordinates, this.pointFilterArgs_[0]).join(', ');
      }
    }
  }

  return measure;
};

FeatureHelper.prototype.getType = function (feature) {
  var geometry = feature.getGeometry();
  console.assert(geometry, 'Geometry should be thruthy');
  var type;

  if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
    if (feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].IS_TEXT)) {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].TEXT;
    } else {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POINT;
    }
  } else if (geometry instanceof ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POINT;
  } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
    if (feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].IS_CIRCLE)) {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].CIRCLE;
    } else if (feature.get(ngeo_format_FeatureProperties_js__WEBPACK_IMPORTED_MODULE_3__["default"].IS_RECTANGLE)) {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].RECTANGLE;
    } else {
      type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].POLYGON;
    }
  } else if (geometry instanceof ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_15__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_POLYGON;
  } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].LINE_STRING;
  } else if (geometry instanceof ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
    type = ngeo_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__["default"].MULTI_LINE_STRING;
  }

  if (!type) {
    throw new Error('Missing type');
  }

  return type;
};

FeatureHelper.prototype.fitMapToFeature = function (feature, map, opt_duration) {
  var duration = opt_duration !== undefined ? opt_duration : 250;
  var size = map.getSize();

  if (!Array.isArray(size)) {
    throw new Error('Missing size');
  }

  var view = map.getView();
  var viewExtent = view.calculateExtent(size);
  var geometry = feature.getGeometry();

  if (!geometry) {
    throw new Error('Missing geometry');
  }

  var geomIsVisible = geometry.intersectsExtent(viewExtent);
  var mapCenter = view.getCenter();

  if (!Array.isArray(mapCenter)) {
    throw new Error('Missing mapCenter');
  }

  var featureExtent = geometry.getExtent();

  if (geomIsVisible) {
    if (!(geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"])) {
      var featureResolution = view.getResolutionForExtent(featureExtent);
      var featureZoomTmp = view.getZoomForResolution(featureResolution);

      if (!featureZoomTmp) {
        throw new Error('Missing featureZoom');
      }

      var featureZoom = Math.floor(featureZoomTmp);
      var zoom = view.getZoom();

      if (!zoom) {
        throw new Error('Missing zoom');
      }

      if (featureZoom < zoom) {
        view.animate({
          center: mapCenter,
          duration: duration
        }, {
          center: mapCenter,
          duration: duration,
          zoom: featureZoom
        });
      }
    }
  } else {
    var featureExtentHeight = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getHeight"](featureExtent);
    var featureExtentWidth = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getWidth"](featureExtent);
    var viewExtentHeight = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getHeight"](viewExtent);
    var viewExtentWidth = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getWidth"](viewExtent);
    var geomFitsInExtent = viewExtentHeight >= featureExtentHeight && viewExtentWidth >= featureExtentWidth;

    if (geomFitsInExtent) {
      var featureCenter;

      if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
        featureCenter = geometry.getCoordinateAt(0.5);
      } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_14__["default"]) {
        featureCenter = geometry.getInteriorPoint().getCoordinates();
      } else if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_13__["default"]) {
        featureCenter = geometry.getCoordinates();
      } else {
        featureCenter = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getCenter"](geometry.getExtent());
      }

      view.animate({
        center: mapCenter,
        duration: duration
      }, {
        center: featureCenter,
        duration: duration
      });
    } else {
      view.fit(featureExtent, {
        duration: duration,
        size: size
      });
    }
  }
};

FeatureHelper.prototype.getRadiusLine = function (feature, azimut) {
  var geometry = feature.getGeometry();

  if (!geometry) {
    throw new Error('Missing geometry');
  }

  var extent = geometry.getExtent();
  var radius = (extent[3] - extent[1]) / 2;
  var center = ol_extent_js__WEBPACK_IMPORTED_MODULE_8__["getCenter"](geometry.getExtent());
  var x = Math.cos((azimut - 90) * Math.PI / 180) * radius;
  var y = -Math.sin((azimut - 90) * Math.PI / 180) * radius;
  var endPoint = [x + center[0], y + center[1]];
  return new ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__["default"]([center, endPoint]);
};

FeatureHelper.prototype.getNonSpatialProperties = function (feature) {
  var geometryName = feature.getGeometryName();
  var nonSpatialProperties = {};
  var properties = feature.getProperties();

  for (var key in properties) {
    if (key !== geometryName) {
      nonSpatialProperties[key] = properties[key];
    }
  }

  return nonSpatialProperties;
};

FeatureHelper.prototype.clearNonSpatialProperties = function (feature) {
  var geometryName = feature.getGeometryName();
  var properties = feature.getProperties();

  for (var key in properties) {
    if (key !== geometryName) {
      feature.set(key, undefined);
    }
  }
};

FeatureHelper.prototype.findFeatureIndexByFid = function (features, fid) {
  var index = -1;

  for (var i = 0, ii = features.length; i < ii; i++) {
    if (features[i].getId() == fid) {
      index = i;
      break;
    }
  }

  return index;
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFeatureHelper', [ngeo_download_service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.service('ngeoFeatureHelper', FeatureHelper);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/File.js":
/*!**************************!*\
  !*** ./src/misc/File.js ***!
  \**************************/
/*! exports provided: FileService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileService", function() { return FileService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
FileService.$inject = ["$q", "$http", "gettext"];

function FileService($q, $http, gettext) {
  this.isValidFileSize = function (fileSize) {
    return fileSize <= 20000000;
  };

  this.isWmsGetCap = function (fileContent) {
    return /<(WMT_MS_Capabilities|WMS_Capabilities)/.test(fileContent);
  };

  this.isWmtsGetCap = function (fileContent) {
    return fileContent.includes('<Capabilities');
  };

  this.isKml = function (fileContent) {
    return fileContent.includes('<kml') && fileContent.includes('</kml>');
  };

  this.isGpx = function (fileContent) {
    return fileContent.includes('<gpx') && fileContent.includes('</gpx>');
  };

  var fileReader = null;

  this.read = function (file) {
    var defer = $q.defer();

    if (fileReader && fileReader.readyState === FileReader.LOADING) {
      fileReader.abort();
    }

    fileReader = new FileReader();

    fileReader.onload = function (evt) {
      var target = evt.target;

      if (!(target instanceof FileReader)) {
        throw new Error('Wrong target type');
      }

      defer.resolve(target.result);
    };

    fileReader.onerror = function (evt) {
      var target = evt.target;

      if (!(target instanceof FileReader)) {
        throw new Error('Wrong target type');
      }

      var err = target.error;

      if (!err) {
        throw new Error('Missing error');
      }

      console.error('Reading file failed: ', err);
      defer.reject({
        'message': err.code == 20 ? gettext('Operation canceled') : gettext('Read failed'),
        'reason': err.message
      });
    };

    fileReader.onprogress = function (evt) {
      defer.notify(evt);
    };

    fileReader.readAsText(file);
    return defer.promise;
  };

  var canceler;

  this.load = function (url, opt_cancelP) {
    if (canceler) {
      canceler.resolve();
    }

    canceler = opt_cancelP || $q.defer();
    var defer = $q.defer();
    $http.get(url, {
      timeout: canceler.promise
    }).then(function (response) {
      defer.resolve(response.data);
    }, function (reason) {
      console.error('Uploading file failed: ', reason);
      defer.reject({
        'message': gettext('Upload failed'),
        'reason': reason
      });
    });
    return defer.promise;
  };
}
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFile', []);
module.service('ngeoFile', FileService);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/Time.js":
/*!**************************!*\
  !*** ./src/misc/Time.js ***!
  \**************************/
/*! exports provided: Time, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Time", function() { return Time; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

function Time() {}

Time.prototype.createDate = function (value, defaultValue) {
  if (defaultValue === void 0) {
    defaultValue = null;
  }

  return value !== null && value != undefined ? new Date(value) : defaultValue;
};

Time.prototype.getTime = function (date, defaultValue) {
  if (defaultValue === void 0) {
    defaultValue = null;
  }

  return date ? date.getTime() : defaultValue;
};

Time.prototype.getOptions = function (time) {
  var minDate = this.createDate(time.minValue);
  var maxDate = this.createDate(time.maxValue);
  var minDefaultDate = this.createDate(time.minDefValue, minDate);
  var maxDefaultDate = this.createDate(time.maxDefValue, maxDate);

  if (!minDefaultDate) {
    throw new Error('Missing minDefaultDate');
  }

  if (!maxDefaultDate) {
    throw new Error('Missing maxDefaultDate');
  }

  var minTime = this.getTime(minDate);
  var maxTime = this.getTime(maxDate);

  if (!minTime) {
    throw new Error('Missing minTime');
  }

  if (!maxTime) {
    throw new Error('Missing maxTime');
  }

  var minDefaultTime = this.getTime(minDefaultDate);
  var maxDefaultTime = this.getTime(maxDefaultDate);

  if (!minDefaultTime) {
    throw new Error('Missing minDefaultTime');
  }

  var defaultValues = minDefaultTime;

  if (time.mode === 'range') {
    if (!maxDefaultTime) {
      throw new Error('Missing maxDefaultTime');
    }

    defaultValues = [minDefaultTime, maxDefaultTime];
  }

  return {
    minDate: minTime,
    maxDate: maxTime,
    values: defaultValues
  };
};

Time.prototype.getUTCDate = function (localDate) {
  return new Date(localDate.getUTCFullYear(), localDate.getUTCMonth(), localDate.getUTCDate());
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoTime', []);
module.service('ngeoTime', Time);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/ToolActivate.js":
/*!**********************************!*\
  !*** ./src/misc/ToolActivate.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (toolContext, activePropertyName) {
  this.getActive = function () {
    return toolContext[activePropertyName];
  };

  this.setActive = function (newVal) {
    toolContext[activePropertyName] = newVal;
  };
});

/***/ }),

/***/ "./src/misc/ToolActivateMgr.js":
/*!*************************************!*\
  !*** ./src/misc/ToolActivateMgr.js ***!
  \*************************************/
/*! exports provided: ToolActivateMgr, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToolActivateMgr", function() { return ToolActivateMgr; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
ToolActivateMgr.$inject = ["$rootScope"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }


function ToolActivateMgr($rootScope) {
  this.groups_ = {};
  this.scope_ = $rootScope;
}

ToolActivateMgr.prototype.registerTool = function (groupName, tool, opt_defaultActivate) {
  var _this = this;

  if (!this.groups_[groupName]) {
    this.groups_[groupName] = [];
  }

  var unlisten = this.scope_.$watch(tool.getActive, function (newVal, oldVal) {
    if (newVal === oldVal) {
      return;
    }

    if (newVal) {
      _this.deactivateTools_(groupName, tool);
    } else {
      _this.activateDefault_(groupName);
    }
  });
  this.groups_[groupName].push({
    tool: tool,
    defaultTool: opt_defaultActivate || false,
    unlisten: unlisten
  });
};

ToolActivateMgr.prototype.unregisterTool = function (groupName, tool) {
  var entries = this.groups_[groupName];

  if (entries) {
    for (var i = 0; i < entries.length; i++) {
      if (entries[i].tool == tool) {
        entries[i].unlisten();
        entries.splice(i, 1);
        break;
      }
    }
  }
};

ToolActivateMgr.prototype.unregisterGroup = function (groupName) {
  var entries = this.groups_[groupName];

  if (entries) {
    for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {
      var entry = _step.value;
      entry.unlisten();
    }

    delete this.groups_[groupName];
  }
};

ToolActivateMgr.prototype.activateTool = function (tool) {
  tool.setActive(true);
};

ToolActivateMgr.prototype.deactivateTool = function (tool) {
  tool.setActive(false);
};

ToolActivateMgr.prototype.deactivateTools_ = function (groupName, tool) {
  var entries = this.groups_[groupName];

  for (var _iterator2 = _createForOfIteratorHelperLoose(entries), _step2; !(_step2 = _iterator2()).done;) {
    var entry = _step2.value;

    if (tool != entry.tool) {
      entry.tool.setActive(false);
    }
  }
};

ToolActivateMgr.prototype.activateDefault_ = function (groupName) {
  var entries = this.groups_[groupName];
  var defaultTool = null;
  var hasActiveTool = false;

  for (var _iterator3 = _createForOfIteratorHelperLoose(entries), _step3; !(_step3 = _iterator3()).done;) {
    var entry = _step3.value;
    hasActiveTool = hasActiveTool || entry.tool.getActive();

    if (entry.defaultTool) {
      defaultTool = entry.tool;
    }
  }

  if (!hasActiveTool && defaultTool !== null) {
    defaultTool.setActive(true);
  }
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoToolActivateMgr', []);
module.service('ngeoToolActivateMgr', ToolActivateMgr);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/WMSTime.js":
/*!*****************************!*\
  !*** ./src/misc/WMSTime.js ***!
  \*****************************/
/*! exports provided: WMSTime, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WMSTime", function() { return WMSTime; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/Time.js */ "./src/misc/Time.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }



var WMSTime = function (_Time) {
  WMSTime.$inject = ["$filter", "gettextCatalog"];

  _inheritsLoose(WMSTime, _Time);

  function WMSTime($filter, gettextCatalog) {
    var _this;

    _this = _Time.call(this) || this;
    _this.$filter_ = $filter;
    _this.gettextCatalog_ = gettextCatalog;
    return _this;
  }

  var _proto = WMSTime.prototype;

  _proto.formatTimeValue = function formatTimeValue(time, resolution, opt_useISOFormat, opt_toUTC) {
    var date = new Date(time);
    var utc = opt_toUTC ? 'UTC' : undefined;
    var yearResolution = 'yyyy';
    var monthResolution = 'yyyy-MM';
    var dayResolution = 'yyyy-MM-dd';
    var secondResolution = null;

    if (!opt_useISOFormat) {
      var gettextCatalog = this.gettextCatalog_;
      yearResolution = gettextCatalog.getString('yyyy');
      monthResolution = gettextCatalog.getString('M/yyyy');
      dayResolution = gettextCatalog.getString('M/d/yyyy');
      secondResolution = gettextCatalog.getString('M/d/yyyy HH:MM:ss');
    }

    switch (resolution) {
      case 'year':
        return this.$filter_('date')(date, yearResolution, utc);

      case 'month':
        return this.$filter_('date')(date, monthResolution, utc);

      case 'day':
        return this.$filter_('date')(date, dayResolution, utc);

      case 'second':
        if (secondResolution) {
          return this.$filter_('date')(date, secondResolution, utc);
        } else {
          return date.toISOString().replace(/\.\d{3}/, '');
        }

      default:
        return date.toISOString().replace(/\.\d{3}/, '');
    }
  };

  _proto.formatWMSTimeParam = function formatWMSTimeParam(wmsTimeProperty, times, opt_toUTC) {
    console.assert(wmsTimeProperty.resolution !== undefined);

    if (wmsTimeProperty.mode === 'range') {
      console.assert(times.end !== undefined);
      return this.formatTimeValue(times.start, wmsTimeProperty.resolution, true, opt_toUTC) + "/" + this.formatTimeValue(times.end, wmsTimeProperty.resolution, true, opt_toUTC);
    } else {
      return this.formatTimeValue(times.start, wmsTimeProperty.resolution, true, opt_toUTC);
    }
  };

  return WMSTime;
}(ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__["Time"]);
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoWMSTime', [ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.service('ngeoWMSTime', WMSTime);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/btnComponent.js":
/*!**********************************!*\
  !*** ./src/misc/btnComponent.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
buttonComponent.$inject = ["$parse"];
buttonGroupComponent.$inject = ["$parse"];

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoBtnComponent', []);

function buttonGroupComponent($parse) {
  return {
    restrict: 'A',
    controller: 'ngeoBtnGroupController',
    link: function link(scope, element, attrs, controller) {
      if (!controller) {
        throw new Error('Missing controller');
      }

      var setActive = $parse(attrs.ngeoBtnGroupActive).assign;

      if (setActive) {
        scope.$watch(function () {
          return controller.buttons_.some(function (buttonModel) {
            return buttonModel(scope) === true;
          });
        }, function (newValue) {
          setActive(scope, newValue);
        });
      }
    }
  };
}

module.directive('ngeoBtnGroup', buttonGroupComponent);

var BtnGroupController = function () {
  BtnGroupController.$inject = ["$scope"];

  function BtnGroupController($scope) {
    this.buttons_ = [];
    this.scope_ = $scope;
  }

  var _proto = BtnGroupController.prototype;

  _proto.activate = function activate(index) {
    var _this = this;

    this.buttons_.forEach(function (expressionFn, i) {
      if (i != index) {
        expressionFn.assign(_this.scope_, false);
      }
    });
  };

  _proto.addButton = function addButton(expressionFn) {
    this.buttons_.push(expressionFn);
    return this.buttons_.length - 1;
  };

  return BtnGroupController;
}();

module.controller('ngeoBtnGroupController', BtnGroupController);

function buttonComponent($parse) {
  return {
    require: ['?^ngeoBtnGroup', 'ngModel'],
    restrict: 'A',
    link: function link(scope, element, attrs, ctrls) {
      if (!ctrls) {
        throw new Error('Missing ctrls');
      }

      var buttonsCtrl = ctrls[0];
      var ngModelCtrl = ctrls[1];
      var indexInGroup = -1;
      var ngModelGet = $parse(attrs.ngModel);
      var ngModelSet = ngModelGet.assign;

      if (ngModelGet(scope) === undefined) {
        ngModelSet(scope, false);
      }

      if (buttonsCtrl !== null) {
        indexInGroup = buttonsCtrl.addButton(ngModelGet);
      }

      element.on('click', function () {
        scope.$apply(function () {
          ngModelCtrl.$setViewValue(!ngModelCtrl.$viewValue);
          ngModelCtrl.$render();
        });
      });

      ngModelCtrl.$render = function () {
        if (ngModelCtrl.$viewValue && buttonsCtrl !== null) {
          buttonsCtrl.activate(indexInGroup);
        }

        element.toggleClass('active', ngModelCtrl.$viewValue);
      };
    }
  };
}

module.directive('ngeoBtn', buttonComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/controlComponent.js":
/*!**************************************!*\
  !*** ./src/misc/controlComponent.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_Map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/Map.js */ "./node_modules/ol/Map.js");
/* harmony import */ var ol_control_Control_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/control/Control.js */ "./node_modules/ol/control/Control.js");



var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoControl', []);

function controlComponent() {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var control = scope.$eval(attrs['ngeoControl']);
      console.assert(control instanceof ol_control_Control_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
      var map = scope.$eval(attrs['ngeoControlMap']);
      console.assert(map instanceof ol_Map_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
      control.setTarget(element[0]);
      map.addControl(control);
    }
  };
}

module.directive('ngeoControl', controlComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/datepickerComponent.html":
/*!*******************************************!*\
  !*** ./src/misc/datepickerComponent.html ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="ngeo-datepicker">\n  <form name="dateForm" class="ngeo-datepicker-form" novalidate>\n    <div ng-if="::datepickerCtrl.time.widget === \'datepicker\'">\n      <div class="ngeo-datepicker-start-date">\n        <span ng-if="::datepickerCtrl.time.mode === \'range\'" translate>From:</span>\n        <span ng-if="::datepickerCtrl.time.mode !== \'range\'" translate>Date:</span>\n        <input name="sdate" ui-date="datepickerCtrl.sdateOptions" ng-model="datepickerCtrl.sdate" required=""/>\n      </div>\n      <div\n        class="ngeo-datepicker-end-date"\n        ng-if="::datepickerCtrl.time.mode === \'range\'">\n        <span translate>To:</span>\n        <input name="edate" ui-date="datepickerCtrl.edateOptions" ng-model="datepickerCtrl.edate" required=""/>\n      </div>\n    </div>\n  </form>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/misc/datepickerComponent.js":
/*!*****************************************!*\
  !*** ./src/misc/datepickerComponent.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/Time.js */ "./src/misc/Time.js");
/* harmony import */ var angular_ui_date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular-ui-date */ "./node_modules/angular-ui-date/dist/date.js");
/* harmony import */ var angular_ui_date__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(angular_ui_date__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_fr_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-fr.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-fr.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_fr_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_fr_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_en_GB_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-en-GB.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-en-GB.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_en_GB_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_en_GB_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_de_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-de.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-de.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_de_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_de_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jquery_ui_ui_i18n_datepicker_it_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jquery-ui/ui/i18n/datepicker-it.js */ "./node_modules/jquery-ui/ui/i18n/datepicker-it.js");
/* harmony import */ var jquery_ui_ui_i18n_datepicker_it_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_i18n_datepicker_it_js__WEBPACK_IMPORTED_MODULE_7__);
Controller.$inject = ["$scope", "ngeoTime", "gettextCatalog"];
datePickerComponent.$inject = ["ngeoDatePickerTemplateUrl", "$timeout"];








var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDatePicker', [ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, 'ui.date']);
module.value('ngeoDatePickerTemplateUrl', function (element, attrs) {
  var templateUrl = attrs.ngeoDatePickerTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/misc/datepickerComponent';
});
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/misc/datepickerComponent', __webpack_require__(/*! ./datepickerComponent.html */ "./src/misc/datepickerComponent.html"));
}]);

function datePickerComponent(ngeoDatePickerTemplateUrl, $timeout) {
  return {
    scope: {
      onDateSelected: '&',
      time: '='
    },
    bindToController: true,
    controller: 'ngeoDatePickerController as datepickerCtrl',
    restrict: 'AE',
    templateUrl: ngeoDatePickerTemplateUrl,
    link: function link(scope, element, attrs, ctrl) {
      if (!ctrl) {
        throw new Error('Missing ctrl');
      }

      ctrl.init();
      var lang = ctrl.gettextCatalog_.getCurrentLanguage();
      $.datepicker.setDefaults($.datepicker.regional[lang]);
      ctrl.sdateOptions = angular__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, ctrl.sdateOptions, {
        'minDate': ctrl.initialMinDate,
        'maxDate': ctrl.initialMaxDate,
        'onClose': function onClose(selectedDate) {
          if (selectedDate) {
            $(element[0]).find('input[name="edate"]').datepicker('option', 'minDate', selectedDate);
          }
        }
      });
      ctrl.edateOptions = angular__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, ctrl.edateOptions, {
        'minDate': ctrl.initialMinDate,
        'maxDate': ctrl.initialMaxDate,
        'onClose': function onClose(selectedDate) {
          if (selectedDate) {
            $(element[0]).find('input[name="sdate"]').datepicker('option', 'maxDate', selectedDate);
          }
        }
      });
      angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('body').on('hidden.bs.popover', function () {
        var dp = angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('#ui-datepicker-div');

        if (dp && dp.css('display') === 'block') {
          $(element[0]).find('input[name$="date"]').datepicker('hide');
        }
      });
      $timeout(function () {
        angular__WEBPACK_IMPORTED_MODULE_0___default.a.element('#ui-datepicker-div').on('click', function (e) {
          e.stopPropagation();
        });
      });
    }
  };
}

module.directive('ngeoDatePicker', datePickerComponent);

function Controller($scope, ngeoTime, gettextCatalog) {
  var _this = this;

  this.ngeoTime_ = ngeoTime;
  this.time = null;
  this.gettextCatalog_ = gettextCatalog;
  this.isModeRange = false;
  this.onDateSelected = null;
  this.initialMinDate = null;
  this.initialMaxDate = null;
  this.edateOptions = {
    'changeMonth': true,
    'changeYear': true
  };
  this.sdateOptions = {
    'changeMonth': true,
    'changeYear': true
  };
  this.sdate = null;
  this.edate = null;
  $scope.$watchGroup(['datepickerCtrl.sdate', 'datepickerCtrl.edate'], function (newDates, oldDates) {
    if (!_this.onDateSelected) {
      throw new Error('Missing onDateSelected');
    }

    var sDate = newDates[0];
    var eDate = newDates[1];

    if (angular__WEBPACK_IMPORTED_MODULE_0___default.a.isDate(sDate) && (!_this.isModeRange || angular__WEBPACK_IMPORTED_MODULE_0___default.a.isDate(eDate))) {
      var start = _this.ngeoTime_.getTime(sDate);

      var end = _this.ngeoTime_.getTime(eDate);

      if (!start) {
        throw new Error('Missing start');
      }

      _this.onDateSelected({
        time: {
          start: start,
          end: end
        }
      });
    }
  });
}

Controller.prototype.init = function () {
  if (!this.time) {
    throw new Error('Missing time');
  }

  var initialOptions_ = this.ngeoTime_.getOptions(this.time);
  this.initialMinDate = this.ngeoTime_.createDate(initialOptions_.minDate);
  this.initialMaxDate = this.ngeoTime_.createDate(initialOptions_.maxDate);
  this.isModeRange = this.time.mode === 'range';

  if (this.isModeRange) {
    if (!Array.isArray(initialOptions_.values)) {
      throw new Error('Value should be an array');
    }

    this.sdate = this.ngeoTime_.createDate(initialOptions_.values[0]);
    this.edate = this.ngeoTime_.createDate(initialOptions_.values[1]);
  } else {
    if (typeof initialOptions_.values != 'number') {
      throw new Error('Value should be a number');
    }

    this.sdate = this.ngeoTime_.createDate(initialOptions_.values);
  }
};

module.controller('ngeoDatePickerController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (module);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/misc/datetimepickerComponent.js":
/*!*********************************************!*\
  !*** ./src/misc/datetimepickerComponent.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_php_date_formatter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/php-date-formatter.js */ "./src/misc/php-date-formatter.js");
/* harmony import */ var jquery_datetimepicker_jquery_datetimepicker_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery-datetimepicker/jquery.datetimepicker.js */ "./node_modules/jquery-datetimepicker/jquery.datetimepicker.js");
/* harmony import */ var jquery_datetimepicker_jquery_datetimepicker_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery_datetimepicker_jquery_datetimepicker_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_datetimepicker_jquery_datetimepicker_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-datetimepicker/jquery.datetimepicker.css */ "./node_modules/jquery-datetimepicker/jquery.datetimepicker.css");
/* harmony import */ var jquery_datetimepicker_jquery_datetimepicker_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_datetimepicker_jquery_datetimepicker_css__WEBPACK_IMPORTED_MODULE_3__);
Controller.$inject = ["$element", "gettextCatalog"];




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDateTimePicker', ['gettext']);

function dateTimeComponent() {
  return {
    restrict: 'A',
    controller: Controller,
    bindToController: true,
    scope: {
      'options': '<ngeoDatetimepickerOptions'
    }
  };
}

module.directive('ngeoDatetimepicker', dateTimeComponent);

function Controller($element, gettextCatalog) {
  this.element_ = $element;
  this.gettextCatalog_ = gettextCatalog;
  this.options;
}

Controller.prototype.$onInit = function () {
  var lang = this.gettextCatalog_.getCurrentLanguage();
  $.datetimepicker.setLocale(lang);
  $.datetimepicker.setDateFormatter(new ngeo_misc_php_date_formatter_js__WEBPACK_IMPORTED_MODULE_1__["default"]());

  if (typeof this.options === 'string') {
    this.options = angular__WEBPACK_IMPORTED_MODULE_0___default.a.fromJson(this.options);
  }

  this.element_.datetimepicker(this.options);
};

module.controller('ngeoDateTimePickerController', Controller);
/* harmony default export */ __webpack_exports__["default"] = (module);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/misc/debounce.js":
/*!******************************!*\
  !*** ./src/misc/debounce.js ***!
  \******************************/
/*! exports provided: debounce, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
factory.$inject = ["$timeout"];

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoDebounce', []);
function debounce(func, wait, invokeApply, $timeout) {
  var timeout = null;
  return function () {
    var _this = this;

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var later = function later() {
      timeout = null;
      func.apply(_this, args);
    };

    if (timeout !== null) {
      $timeout.cancel(timeout);
    }

    timeout = $timeout(later, wait, invokeApply);
  };
}

function factory($timeout) {
  var deb = debounce;
  return function (func, wait, invokeApply) {
    return deb(func, wait, invokeApply, $timeout);
  };
}

module.factory('ngeoDebounce', factory);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/decorate.js":
/*!******************************!*\
  !*** ./src/misc/decorate.js ***!
  \******************************/
/*! exports provided: interactionDecoration, layerDecoration, layerLoading */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interactionDecoration", function() { return interactionDecoration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "layerDecoration", function() { return layerDecoration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "layerLoading", function() { return layerLoading; });
/* harmony import */ var ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/interaction/Interaction.js */ "./node_modules/ol/interaction/Interaction.js");
/* harmony import */ var ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/layer/Base.js */ "./node_modules/ol/layer/Base.js");
/* harmony import */ var ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/layer/Group.js */ "./node_modules/ol/layer/Group.js");
/* harmony import */ var ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/layer/Layer.js */ "./node_modules/ol/layer/Layer.js");
/* harmony import */ var ol_source_Image_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/source/Image.js */ "./node_modules/ol/source/Image.js");
/* harmony import */ var ol_source_Tile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/source/Tile.js */ "./node_modules/ol/source/Tile.js");






function interactionDecoration(interaction) {
  console.assert(interaction instanceof ol_interaction_Interaction_js__WEBPACK_IMPORTED_MODULE_0__["default"]);
  Object.defineProperty(interaction, 'active', {
    get: function get() {
      return interaction.getActive();
    },
    set: function set(val) {
      interaction.setActive(val);
    }
  });
}
function layerDecoration(layer) {
  console.assert(layer instanceof ol_layer_Base_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
  Object.defineProperty(layer, 'visible', {
    configurable: true,
    get: function get() {
      return layer.getVisible();
    },
    set: function set(val) {
      layer.setVisible(val);
    }
  });
  Object.defineProperty(layer, 'opacity', {
    configurable: true,
    get: function get() {
      return layer.getOpacity();
    },
    set: function set(val) {
      layer.setOpacity(val);
    }
  });
}
function layerLoading(layer, $scope) {
  var source;
  var incrementEvents = [];
  var decrementEvents = [];
  var incrementLoadCount_ = increment_;
  var decrementLoadCount_ = decrement_;
  layer.set('load_count', 0, true);

  if (layer instanceof ol_layer_Group_js__WEBPACK_IMPORTED_MODULE_2__["default"]) {
    layer.getLayers().on('add', function (olEvent) {
      var newLayer = olEvent.element;
      newLayer.set('parent_group', layer);
    });
  }

  if (layer instanceof ol_layer_Layer_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    source = layer.getSource();

    if (source === null) {
      return;
    } else if (source instanceof ol_source_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
      incrementEvents = ['tileloadstart'];
      decrementEvents = ['tileloadend', 'tileloaderror'];
    } else if (source instanceof ol_source_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
      incrementEvents = ['imageloadstart'];
      decrementEvents = ['imageloadend', 'imageloaderror'];
    } else {
      console.assert(false, 'unsupported source type');
    }

    source.on(incrementEvents, function () {
      incrementLoadCount_(layer);
      $scope.$applyAsync();
    });
    source.on(decrementEvents, function () {
      decrementLoadCount_(layer);
      $scope.$applyAsync();
    });
  }

  Object.defineProperty(layer, 'loading', {
    configurable: true,
    get: function get() {
      return layer.get('load_count') > 0;
    }
  });

  function increment_(layer) {
    var load_count = layer.get('load_count');
    var parent = layer.get('parent_group');
    layer.set('load_count', ++load_count, true);

    if (parent) {
      increment_(parent);
    }
  }

  function decrement_(layer) {
    var load_count = layer.get('load_count');
    var parent = layer.get('parent_group');
    layer.set('load_count', --load_count, true);

    if (parent) {
      decrement_(parent);
    }
  }
}

/***/ }),

/***/ "./src/misc/extraModule.js":
/*!*********************************!*\
  !*** ./src/misc/extraModule.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_misc_AutoProjection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/misc/AutoProjection.js */ "./src/misc/AutoProjection.js");
/* harmony import */ var ngeo_misc_btnComponent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/btnComponent.js */ "./src/misc/btnComponent.js");
/* harmony import */ var ngeo_misc_controlComponent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/controlComponent.js */ "./src/misc/controlComponent.js");
/* harmony import */ var ngeo_misc_datepickerComponent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/misc/datepickerComponent.js */ "./src/misc/datepickerComponent.js");
/* harmony import */ var ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/misc/debounce.js */ "./src/misc/debounce.js");
/* harmony import */ var ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/misc/EventHelper.js */ "./src/misc/EventHelper.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
/* harmony import */ var ngeo_misc_File_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngeo/misc/File.js */ "./src/misc/File.js");
/* harmony import */ var ngeo_misc_filereaderComponent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngeo/misc/filereaderComponent.js */ "./src/misc/filereaderComponent.js");
/* harmony import */ var ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngeo/misc/filters.js */ "./src/misc/filters.js");
/* harmony import */ var ngeo_misc_sortableComponent_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngeo/misc/sortableComponent.js */ "./src/misc/sortableComponent.js");
/* harmony import */ var ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngeo/misc/Time.js */ "./src/misc/Time.js");
/* harmony import */ var ngeo_misc_ToolActivateMgr_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngeo/misc/ToolActivateMgr.js */ "./src/misc/ToolActivateMgr.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");















/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMiscExtraModule', [ngeo_misc_AutoProjection_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_misc_btnComponent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_controlComponent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_misc_datepickerComponent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_misc_EventHelper_js__WEBPACK_IMPORTED_MODULE_6__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_7__["default"].name, ngeo_misc_File_js__WEBPACK_IMPORTED_MODULE_8__["default"].name, ngeo_misc_filereaderComponent_js__WEBPACK_IMPORTED_MODULE_9__["default"].name, ngeo_misc_filters_js__WEBPACK_IMPORTED_MODULE_10__["default"].name, ngeo_misc_sortableComponent_js__WEBPACK_IMPORTED_MODULE_11__["default"].name, ngeo_misc_Time_js__WEBPACK_IMPORTED_MODULE_12__["default"].name, ngeo_misc_ToolActivateMgr_js__WEBPACK_IMPORTED_MODULE_13__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_14__["default"].name]));

/***/ }),

/***/ "./src/misc/filereaderComponent.js":
/*!*****************************************!*\
  !*** ./src/misc/filereaderComponent.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
filereaderComponent.$inject = ["$window"];

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoFilereader', []);

function filereaderComponent($window) {
  return {
    restrict: 'A',
    scope: {
      'fileContent': '=ngeoFilereader',
      'supported': '=?ngeoFilereaderSupported'
    },
    link: function link(scope, element) {
      var supported = ('FileReader' in $window);
      scope.supported = supported;

      if (!supported) {
        return;
      }

      var ce = function ce(changeEvent) {
        var fileReader = new $window.FileReader();

        fileReader.onload = function (evt) {
          var target = evt.target;
          scope.$apply(function () {
            scope.fileContent = target.result;
          });
        };

        var files = changeEvent.target.files;

        if (!files) {
          throw new Error('Missing files');
        }

        fileReader.readAsText(files[0]);
      };

      element.on({
        change: ce
      });
    }
  };
}

module.directive('ngeoFilereader', filereaderComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/filters.js":
/*!*****************************!*\
  !*** ./src/misc/filters.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_math_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/math.js */ "./node_modules/ol/math.js");
/* harmony import */ var ol_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/string.js */ "./node_modules/ol/string.js");
DurationFilter.$inject = ["gettextCatalog"];
trustHtmlAutoFilter.$inject = ["$sce", "ngeoStringToHtmlReplacements"];
trustHtmlFilter.$inject = ["$sce"];
NumberCoordinatesFilter.$inject = ["$filter"];
UnitPrefixFilter.$inject = ["$filter"];
NumberFilter.$inject = ["$locale"];
ScalifyFilter.$inject = ["$filter"];

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoAngularFilters', []);

function ScalifyFilter($filter) {
  var numberFilter = $filter('ngeoNumber');

  var filterFn = function filterFn(scale, opt_precision) {
    if (opt_precision === undefined) {
      opt_precision = 2;
    }

    var text = numberFilter(scale, opt_precision);
    return text ? "1\xA0:\xA0" + text : '';
  };

  filterFn.$stateful = true;
  return filterFn;
}

module.filter('ngeoScalify', ScalifyFilter);

function NumberFilter($locale) {
  var formats = $locale.NUMBER_FORMATS;

  var result = function result(number, opt_precision) {
    var groupSep = formats.GROUP_SEP;
    var decimalSep = formats.DECIMAL_SEP;

    if (opt_precision === undefined) {
      opt_precision = 3;
    }

    if (number === Infinity) {
      return "\u221E";
    } else if (number === -Infinity) {
      return "-\u221E";
    } else if (number === 0) {
      return '0';
    }

    var sign = number < 0;
    number = Math.abs(number);
    var nb_decimal = opt_precision - Math.floor(Math.log(number) / Math.log(10)) - 1;
    var factor = Math.pow(10, nb_decimal);
    number = Math.round(number * factor);
    var decimal = '';
    var unit = Math.floor(number / factor);

    if (nb_decimal > 0) {
      var str_number = "" + number;

      while (str_number.length < nb_decimal) {
        str_number = "0" + str_number;
      }

      decimal = str_number.substring(str_number.length - nb_decimal);

      while (decimal.endsWith('0')) {
        decimal = decimal.substring(0, decimal.length - 1);
      }
    }

    var groups = [];
    var str_unit = "" + unit;

    while (str_unit.length > 3) {
      var index = str_unit.length - 3;
      groups.unshift(str_unit.substring(index));
      str_unit = str_unit.substring(0, index);
    }

    groups.unshift(str_unit);
    return (sign ? '-' : '') + groups.join(groupSep) + (decimal.length === 0 ? '' : decimalSep + decimal);
  };

  return result;
}

module.filter('ngeoNumber', NumberFilter);

function UnitPrefixFilter($filter) {
  var numberFilter = $filter('ngeoNumber');
  var standardPrefix = ['', 'k', 'M', 'G', 'T', 'P'];
  var binaryPrefix = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi'];

  var result = function result(number, opt_unit, opt_type, opt_precision) {
    if (opt_unit === undefined) {
      opt_unit = '';
    }

    var comparatorFactor = 1 - Math.pow(0.1, opt_precision || 3) * 0.5;
    var divisor = 1000;
    var prefix = standardPrefix;

    if (opt_type === 'square') {
      divisor = 1000000;
    } else if (opt_type === 'binary') {
      divisor = 1024;
      prefix = binaryPrefix;
    }

    var index = 0;
    var index_max = prefix.length - 1;

    while (number >= divisor * comparatorFactor && index < index_max) {
      number = number / divisor;
      index++;
    }

    var postfix = prefix[index] + opt_unit;
    var space = postfix.length == 0 ? '' : "\xA0";
    return numberFilter(number, opt_precision) + space + postfix;
  };

  return result;
}

module.filter('ngeoUnitPrefix', UnitPrefixFilter);

function NumberCoordinatesFilter($filter) {
  var filterFn = function filterFn(coordinates, opt_fractionDigits, opt_template) {
    var template = opt_template ? opt_template : '{x} {y}';
    var x = coordinates[0];
    var y = coordinates[1];
    var fractionDigits = parseInt(opt_fractionDigits, 10) | 0;
    var x_str = $filter('number')(x, fractionDigits);
    var y_str = $filter('number')(y, fractionDigits);
    return template.replace('{x}', x_str).replace('{y}', y_str);
  };

  return filterFn;
}

module.filter('ngeoNumberCoordinates', NumberCoordinatesFilter);

function DMSCoordinatesFilter() {
  var degreesToStringHDMS = function degreesToStringHDMS(degrees, hemispheres, fractionDigits) {
    var normalizedDegrees = Object(ol_math_js__WEBPACK_IMPORTED_MODULE_1__["modulo"])(degrees + 180, 360) - 180;
    var dms = Math.abs(3600 * normalizedDegrees);
    var d = Math.floor(dms / 3600);
    var m = Math.floor(dms / 60 % 60);
    var s = dms % 60;
    return d + "\xB0 " + Object(ol_string_js__WEBPACK_IMPORTED_MODULE_2__["padNumber"])(m, 2) + "\u2032 " + Object(ol_string_js__WEBPACK_IMPORTED_MODULE_2__["padNumber"])(s, 2, fractionDigits) + "\u2033 " + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0);
  };

  var filterFn = function filterFn(coordinates, opt_fractionDigits, opt_template) {
    var fractionDigits = parseInt(opt_fractionDigits, 10) | 0;
    var template = opt_template ? opt_template : '{x} {y}';
    var xdms = degreesToStringHDMS(coordinates[0], 'EW', fractionDigits);
    var ydms = degreesToStringHDMS(coordinates[1], 'NS', fractionDigits);
    return template.replace('{x}', xdms).replace('{y}', ydms);
  };

  return filterFn;
}

module.filter('ngeoDMSCoordinates', DMSCoordinatesFilter);

function trustHtmlFilter($sce) {
  return function (input) {
    if (input !== undefined && input !== null) {
      return $sce.trustAsHtml("" + input);
    } else {
      return $sce.trustAsHtml('&nbsp;');
    }
  };
}

module.filter('ngeoTrustHtml', trustHtmlFilter);

function trustHtmlAutoFilter($sce, ngeoStringToHtmlReplacements) {
  return function (input) {
    if (input !== undefined && input !== null) {
      if (typeof input === 'string') {
        for (var _iterator = _createForOfIteratorHelperLoose(ngeoStringToHtmlReplacements), _step; !(_step = _iterator()).done;) {
          var replacement = _step.value;

          if (replacement.compiled_expression === undefined) {
            replacement.compiled_expression = new RegExp(replacement.expression, replacement.flags);
          }

          if (input.match(replacement.compiled_expression)) {
            input = replacement.template.replace(/\$1/g, input);
            break;
          }
        }

        return $sce.trustAsHtml("" + input);
      } else {
        return $sce.trustAsHtml("" + input);
      }
    } else {
      return $sce.trustAsHtml('&nbsp;');
    }
  };
}

module.filter('ngeoTrustHtmlAuto', trustHtmlAutoFilter);

function DurationFilter(gettextCatalog) {
  var TimeUnits = Object.freeze({
    SECONDS: Symbol('seconds'),
    MINUTES: Symbol('minutes'),
    HOURS: Symbol('hours'),
    DAYS: Symbol('days')
  });

  var pluralize = function pluralize(amount, unit) {
    var formattedUnit = '';

    switch (unit) {
      case TimeUnits.SECONDS:
        formattedUnit = gettextCatalog.getPlural(amount, 'second', 'seconds');
        break;

      case TimeUnits.MINUTES:
        formattedUnit = gettextCatalog.getPlural(amount, 'minute', 'minutes');
        break;

      case TimeUnits.HOURS:
        formattedUnit = gettextCatalog.getPlural(amount, 'hour', 'hours');
        break;

      case TimeUnits.DAYS:
        formattedUnit = gettextCatalog.getPlural(amount, 'day', 'days');
        break;

      default:
        break;
    }

    return amount + " " + formattedUnit;
  };

  var result = function result(duration) {
    duration = Math.round(duration);
    var output;

    if (duration < 60) {
      return pluralize(duration, TimeUnits.SECONDS);
    }

    var remainder = duration % 60;
    duration = Math.floor(duration / 60);

    if (duration < 60) {
      output = pluralize(duration, TimeUnits.MINUTES);

      if (remainder > 0) {
        output += " " + pluralize(remainder, TimeUnits.SECONDS);
      }

      return output;
    }

    remainder = duration % 60;
    duration = Math.floor(duration / 60);

    if (duration < 24) {
      output = pluralize(duration, TimeUnits.HOURS);

      if (remainder > 0) {
        output += " " + pluralize(remainder, TimeUnits.MINUTES);
      }

      return output;
    }

    remainder = duration % 24;
    duration = Math.floor(duration / 24);
    output = pluralize(duration, TimeUnits.DAYS);

    if (remainder > 0) {
      output += " " + pluralize(remainder, TimeUnits.HOURS);
    }

    return output;
  };

  return result;
}

module.filter('ngeoDuration', DurationFilter);

var removeCDATA = function removeCDATA() {
  return function (input) {
    if (input && input.replace) {
      return input.replace(/<!\[CDATA\[(.*)\]\]>/, '$1');
    }
  };
};

module.filter('removeCDATA', removeCDATA);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/misc/php-date-formatter.js":
/*!****************************************!*\
  !*** ./src/misc/php-date-formatter.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DateFormatter; });


var DAY = 1000 * 60 * 60 * 24;
var HOUR = 3600;

function _compare(str1, str2) {
  return typeof str1 === 'string' && typeof str2 === 'string' && str1.toLowerCase() === str2.toLowerCase();
}

function _lpad(value, length, chr) {
  var val = value.toString();
  chr = chr || '0';
  return val.length < length ? _lpad(chr + val, length) : val;
}

function _extend(out) {
  out = out || {};

  for (var i = 1; i < arguments.length; i++) {
    var obj = arguments[i];

    if (!obj) {
      continue;
    }

    for (var key in obj) {
      if (obj.hasOwnProperty(key)) {
        if (typeof obj[key] === 'object') {
          _extend(out[key], obj[key]);
        } else {
          out[key] = obj[key];
        }
      }
    }
  }

  return out;
}

function _indexOf(val, arr) {
  for (var i = 0; i < arr.length; i++) {
    if (arr[i].toLowerCase() === val.toLowerCase()) {
      return i;
    }
  }

  return -1;
}

var defaultSettings = {
  dateSettings: {
    days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    daysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
    meridiem: ['AM', 'PM'],
    ordinal: function ordinal(number) {
      var n = number % 10,
          suffixes = {
        1: 'st',
        2: 'nd',
        3: 'rd'
      };
      return Math.floor(number % 100 / 10) === 1 || !suffixes[n] ? 'th' : suffixes[n];
    }
  },
  separators: /[ \-+/.T:@]/g,
  validParts: /[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,
  intParts: /[djwNzmnyYhHgGis]/g,
  tzParts: /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
  tzClip: /[^-+\dA-Z]/g
};

var DateFormatter = function () {
  function DateFormatter(options) {
    var self = this,
        config = _extend(defaultSettings, options);

    self.dateSettings = config.dateSettings;
    self.separators = config.separators;
    self.validParts = config.validParts;
    self.intParts = config.intParts;
    self.tzParts = config.tzParts;
    self.tzClip = config.tzClip;
  }

  var _proto = DateFormatter.prototype;

  _proto.getMonth = function getMonth(val) {
    var self = this;
    var i = _indexOf(val, self.dateSettings.monthsShort) + 1;

    if (i === 0) {
      i = _indexOf(val, self.dateSettings.months) + 1;
    }

    return i;
  };

  _proto.parseDate = function parseDate(vDate, vFormat) {
    var self = this,
        vSettings = self.dateSettings,
        out = {
      date: null,
      year: null,
      month: null,
      day: null,
      hour: 0,
      min: 0,
      sec: 0
    };
    var vDateFlag = false,
        vTimeFlag = false,
        i;

    if (!vDate) {
      return null;
    }

    if (vDate instanceof Date) {
      return vDate;
    }

    if (vFormat === 'U') {
      i = parseInt(vDate);
      return i ? new Date(i * 1000) : vDate;
    }

    switch (typeof vDate) {
      case 'number':
        return new Date(vDate);

      case 'string':
        break;

      default:
        return null;
    }

    var vFormatParts = vFormat.match(self.validParts);

    if (!vFormatParts || vFormatParts.length === 0) {
      throw new Error('Invalid date format definition.');
    }

    var vDateParts = vDate.replace(self.separators, '\0').split('\0');

    for (i = 0; i < vDateParts.length; i++) {
      var vDatePart = vDateParts[i];
      var iDatePart = parseInt(vDatePart);

      switch (vFormatParts[i]) {
        case 'y':
        case 'Y':
          if (iDatePart) {
            var len = vDatePart.length;
            out.year = len === 2 ? parseInt((iDatePart < 70 ? '20' : '19') + vDatePart) : iDatePart;
          } else {
            return null;
          }

          vDateFlag = true;
          break;

        case 'm':
        case 'n':
        case 'M':
        case 'F':
          if (isNaN(iDatePart)) {
            var vMonth = self.getMonth(vDatePart);

            if (vMonth > 0) {
              out.month = vMonth;
            } else {
              return null;
            }
          } else {
            if (iDatePart >= 1 && iDatePart <= 12) {
              out.month = iDatePart;
            } else {
              return null;
            }
          }

          vDateFlag = true;
          break;

        case 'd':
        case 'j':
          if (iDatePart >= 1 && iDatePart <= 31) {
            out.day = iDatePart;
          } else {
            return null;
          }

          vDateFlag = true;
          break;

        case 'g':
        case 'h':
          var vMeriIndex = vFormatParts.includes('a') ? vFormatParts.indexOf('a') : vFormatParts.includes('A') ? vFormatParts.indexOf('A') : -1;
          var mer = vDateParts[vMeriIndex];

          if (vMeriIndex !== -1) {
            var vMeriOffset = _compare(mer, vSettings.meridiem[0]) ? 0 : _compare(mer, vSettings.meridiem[1]) ? 12 : -1;

            if (iDatePart >= 1 && iDatePart <= 12 && vMeriOffset !== -1) {
              out.hour = iDatePart % 12 === 0 ? vMeriOffset : iDatePart + vMeriOffset;
            } else {
              if (iDatePart >= 0 && iDatePart <= 23) {
                out.hour = iDatePart;
              }
            }
          } else {
            if (iDatePart >= 0 && iDatePart <= 23) {
              out.hour = iDatePart;
            } else {
              return null;
            }
          }

          vTimeFlag = true;
          break;

        case 'G':
        case 'H':
          if (iDatePart >= 0 && iDatePart <= 23) {
            out.hour = iDatePart;
          } else {
            return null;
          }

          vTimeFlag = true;
          break;

        case 'i':
          if (iDatePart >= 0 && iDatePart <= 59) {
            out.min = iDatePart;
          } else {
            return null;
          }

          vTimeFlag = true;
          break;

        case 's':
          if (iDatePart >= 0 && iDatePart <= 59) {
            out.sec = iDatePart;
          } else {
            return null;
          }

          vTimeFlag = true;
          break;
      }
    }

    if (vDateFlag === true && out.year && out.month && out.day) {
      out.date = new Date(out.year, out.month - 1, out.day, out.hour, out.min, out.sec, 0);
    } else {
      if (vTimeFlag !== true) {
        return null;
      }

      out.date = new Date(0, 0, 0, out.hour, out.min, out.sec, 0);
    }

    return out.date;
  };

  _proto.guessDate = function guessDate(vDateStr, vFormat) {
    if (typeof vDateStr !== 'string') {
      return vDateStr;
    }

    var self = this;
    var vParts = vDateStr.replace(self.separators, '\0').split('\0'),
        vPattern = /^[djmn]/g;
    var vFormatParts = vFormat.match(self.validParts);
    var vDate = new Date();

    if (!vPattern.test(vFormatParts[0])) {
      return vDateStr;
    }

    for (var i = 0; i < vParts.length; i++) {
      var vDigit = 2;
      var iPart = vParts[i];
      var iSec = parseInt(iPart.substr(0, 2));

      if (isNaN(iSec)) {
        return null;
      }

      switch (i) {
        case 0:
          if (vFormatParts[0] === 'm' || vFormatParts[0] === 'n') {
            vDate.setMonth(iSec - 1);
          } else {
            vDate.setDate(iSec);
          }

          break;

        case 1:
          if (vFormatParts[0] === 'm' || vFormatParts[0] === 'n') {
            vDate.setDate(iSec);
          } else {
            vDate.setMonth(iSec - 1);
          }

          break;

        case 2:
          var vYear = vDate.getFullYear();
          var len = iPart.length;
          vDigit = len < 4 ? len : 4;
          vYear = parseInt(len < 4 ? vYear.toString().substr(0, 4 - len) + iPart : iPart.substr(0, 4));

          if (!vYear) {
            return null;
          }

          vDate.setFullYear(vYear);
          break;

        case 3:
          vDate.setHours(iSec);
          break;

        case 4:
          vDate.setMinutes(iSec);
          break;

        case 5:
          vDate.setSeconds(iSec);
          break;
      }

      var n = iPart.substr(vDigit);

      if (n.length > 0) {
        vParts.splice(i + 1, 0, n);
      }
    }

    return vDate;
  };

  _proto.parseFormat = function parseFormat(vChar, vDate) {
    var fmt = null;

    var self = this,
        vSettings = self.dateSettings,
        backslash = /\\?(.?)/gi,
        doFormat = function doFormat(t, s) {
      return fmt[t] ? fmt[t]() : s;
    };

    fmt = {
      d: function d() {
        return _lpad(fmt.j(), 2);
      },
      D: function D() {
        return vSettings.daysShort[fmt.w()];
      },
      j: function j() {
        return vDate.getDate();
      },
      l: function l() {
        return vSettings.days[fmt.w()];
      },
      N: function N() {
        return fmt.w() || 7;
      },
      w: function w() {
        return vDate.getDay();
      },
      z: function z() {
        var a = new Date(fmt.Y(), fmt.n() - 1, fmt.j()),
            b = new Date(fmt.Y(), 0, 1);
        return Math.round((a - b) / DAY);
      },
      W: function W() {
        var a = new Date(fmt.Y(), fmt.n() - 1, fmt.j() - fmt.N() + 3);
        var b = new Date(a.getFullYear(), 0, 4);
        return _lpad(1 + Math.round((a - b) / DAY / 7), 2);
      },
      F: function F() {
        return vSettings.months[vDate.getMonth()];
      },
      m: function m() {
        return _lpad(fmt.n(), 2);
      },
      M: function M() {
        return vSettings.monthsShort[vDate.getMonth()];
      },
      n: function n() {
        return vDate.getMonth() + 1;
      },
      t: function t() {
        return new Date(fmt.Y(), fmt.n(), 0).getDate();
      },
      L: function L() {
        var Y = fmt.Y();
        return Y % 4 === 0 && Y % 100 !== 0 || Y % 400 === 0 ? 1 : 0;
      },
      o: function o() {
        var n = fmt.n(),
            W = fmt.W(),
            Y = fmt.Y();
        return Y + (n === 12 && W < 9 ? 1 : n === 1 && W > 9 ? -1 : 0);
      },
      Y: function Y() {
        return vDate.getFullYear();
      },
      y: function y() {
        return fmt.Y().toString().slice(-2);
      },
      a: function a() {
        return fmt.A().toLowerCase();
      },
      A: function A() {
        var n = fmt.G() < 12 ? 0 : 1;
        return vSettings.meridiem[n];
      },
      B: function B() {
        var H = vDate.getUTCHours() * HOUR;
        var i = vDate.getUTCMinutes() * 60;
        var s = vDate.getUTCSeconds();
        return _lpad(Math.floor((H + i + s + HOUR) / 86.4) % 1000, 3);
      },
      g: function g() {
        return fmt.G() % 12 || 12;
      },
      G: function G() {
        return vDate.getHours();
      },
      h: function h() {
        return _lpad(fmt.g(), 2);
      },
      H: function H() {
        return _lpad(fmt.G(), 2);
      },
      i: function i() {
        return _lpad(vDate.getMinutes(), 2);
      },
      s: function s() {
        return _lpad(vDate.getSeconds(), 2);
      },
      u: function u() {
        return _lpad(vDate.getMilliseconds() * 1000, 6);
      },
      e: function e() {
        var str = /\((.*)\)/.exec(String(vDate))[1];
        return str || 'Coordinated Universal Time';
      },
      I: function I() {
        var a = new Date(fmt.Y(), 0),
            c = Date.UTC(fmt.Y(), 0),
            b = new Date(fmt.Y(), 6),
            d = Date.UTC(fmt.Y(), 6);
        return a - c !== b - d ? 1 : 0;
      },
      O: function O() {
        var tzo = vDate.getTimezoneOffset(),
            a = Math.abs(tzo);
        return (tzo > 0 ? '-' : '+') + _lpad(Math.floor(a / 60) * 100 + a % 60, 4);
      },
      P: function P() {
        var O = fmt.O();
        return O.substr(0, 3) + ':' + O.substr(3, 2);
      },
      T: function T() {
        var str = (String(vDate).match(self.tzParts) || ['']).pop().replace(self.tzClip, '');
        return str || 'UTC';
      },
      Z: function Z() {
        return -vDate.getTimezoneOffset() * 60;
      },
      c: function c() {
        return 'Y-m-d\\TH:i:sP'.replace(backslash, doFormat);
      },
      r: function r() {
        return 'D, d M Y H:i:s O'.replace(backslash, doFormat);
      },
      U: function U() {
        return vDate.getTime() / 1000 || 0;
      }
    };
    return doFormat(vChar, vChar);
  };

  _proto.formatDate = function formatDate(vDate, vFormat) {
    var self = this,
        BACKSLASH = '\\';

    if (typeof vDate === 'string') {
      vDate = self.parseDate(vDate, vFormat);

      if (!vDate) {
        return null;
      }
    }

    if (vDate instanceof Date) {
      var vDateStr = '';
      var len = vFormat.length;

      for (var i = 0; i < len; i++) {
        var vChar = vFormat.charAt(i);

        if (vChar === 'S' || vChar === BACKSLASH) {
          continue;
        }

        if (i > 0 && vFormat.charAt(i - 1) === BACKSLASH) {
          vDateStr += vChar;
          continue;
        }

        var str = self.parseFormat(vChar, vDate);

        if (i !== len - 1 && self.intParts.test(vChar) && vFormat.charAt(i + 1) === 'S') {
          var n = parseInt(str) || 0;
          str += self.dateSettings.ordinal(n);
        }

        vDateStr += str;
      }

      return vDateStr;
    }

    return '';
  };

  return DateFormatter;
}();



/***/ }),

/***/ "./src/misc/sortableComponent.js":
/*!***************************************!*\
  !*** ./src/misc/sortableComponent.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_ui_widgets_sortable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/ui/widgets/sortable.js */ "./node_modules/jquery-ui/ui/widgets/sortable.js");
/* harmony import */ var jquery_ui_ui_widgets_sortable_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_sortable_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/sass/jquery-ui.scss */ "./src/sass/jquery-ui.scss");
/* harmony import */ var ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ngeo_sass_jquery_ui_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_ui_touch_punch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-ui-touch-punch */ "./node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.js");
/* harmony import */ var jquery_ui_touch_punch__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_touch_punch__WEBPACK_IMPORTED_MODULE_3__);
sortableComponent.$inject = ["$timeout"];




var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSortable', []);

function sortableComponent($timeout) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var sortable = scope.$eval(attrs.ngeoSortable) || [];
      console.assert(Array.isArray(sortable));
      scope.$watchCollection(function () {
        return sortable;
      }, function () {
        sortable.length && $timeout(resetUpDragDrop, 0);
      });
      var optionsObject = scope.$eval(attrs.ngeoSortableOptions);
      var options = getOptions(optionsObject);
      var callbackFn = scope.$eval(attrs.ngeoSortableCallback);
      var callbackCtx = scope.$eval(attrs.ngeoSortableCallbackCtx);

      function resetUpDragDrop() {
        var children = element.children();

        for (var i = 0; i < children.length; ++i) {
          angular__WEBPACK_IMPORTED_MODULE_0___default.a.element(children[i]).data('idx', i);
        }

        var sortableElement = $(element);

        if (sortableElement.data('ui-sortable')) {
          sortableElement.off('sortupdate');
          sortableElement.sortable('destroy');
        }

        var sortableOptions = {
          axis: 'y',
          classes: {
            'ui-sortable-helper': options.draggerClassName
          }
        };

        if (options.handleClassName) {
          sortableOptions.handle = "." + options.handleClassName;
        }

        if (options.placeholderClassName) {
          sortableOptions.placeholder = options.placeholderClassName;
          sortableOptions.forcePlaceholderSize = true;
        }

        sortableElement.sortable(sortableOptions);
        sortableElement.on('sortupdate', function (event, ui) {
          var oldIndex = $(ui.item[0]).data('idx');
          var newIndex = ui.item.index();
          $(ui.item[0]).data('idx', newIndex);
          scope.$apply(function () {
            sortable.splice(newIndex, 0, sortable.splice(oldIndex, 1)[0]);
          });

          if (callbackFn instanceof Function) {
            callbackFn.apply(callbackCtx, [element, sortable]);
          }
        });
      }

      function getOptions(options) {
        var ret;
        var defaultHandleClassName = 'ngeo-sortable-handle';

        if (options === undefined) {
          ret = {
            'handleClassName': defaultHandleClassName
          };
        } else {
          if (options.handleClassName === undefined) {
            options.handleClassName = defaultHandleClassName;
          }

          ret = options;
        }

        return ret;
      }
    }
  };
}

module.directive('ngeoSortable', sortableComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")))

/***/ }),

/***/ "./src/print/Service.js":
/*!******************************!*\
  !*** ./src/print/Service.js ***!
  \******************************/
/*! exports provided: PrintService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintService", function() { return PrintService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_print_VectorEncoder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/print/VectorEncoder.js */ "./src/print/VectorEncoder.js");
/* harmony import */ var ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/map/LayerHelper.js */ "./src/map/LayerHelper.js");
/* harmony import */ var ol_array_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/array.js */ "./node_modules/ol/array.js");
/* harmony import */ var ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/layer/Image.js */ "./node_modules/ol/layer/Image.js");
/* harmony import */ var ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/layer/Tile.js */ "./node_modules/ol/layer/Tile.js");
/* harmony import */ var ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/layer/Vector.js */ "./node_modules/ol/layer/Vector.js");
/* harmony import */ var ol_size_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/size.js */ "./node_modules/ol/size.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
/* harmony import */ var ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/source/TileWMS.js */ "./node_modules/ol/source/TileWMS.js");
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ol_tilegrid_WMTS_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/tilegrid/WMTS.js */ "./node_modules/ol/tilegrid/WMTS.js");
PrintService.$inject = ["url", "$http", "gettextCatalog", "ngeoLayerHelper"];
createPrintServiceFactory.$inject = ["$http", "gettextCatalog", "ngeoLayerHelper"];












function PrintService(url, $http, gettextCatalog, ngeoLayerHelper) {
  this.url_ = url;
  this.$http_ = $http;
  this.gettextCatalog_ = gettextCatalog;
  this.ngeoLayerHelper_ = ngeoLayerHelper;
  this.vectorEncoder = new ngeo_print_VectorEncoder_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
  this.printNativeAngle_ = true;
  this.goodnessOfFit_;
}

PrintService.prototype.cancel = function (ref, opt_httpConfig) {
  var httpConfig = opt_httpConfig !== undefined ? opt_httpConfig : {};
  var url = this.url_ + "/cancel/" + ref;
  return this.$http_['delete'](url, httpConfig);
};

PrintService.prototype.createSpec = function (map, scale, rotation, dpi, layout, format, customAttributes, email, goodnessOfFit) {
  var specMap = {
    dpi: dpi,
    rotation: rotation
  };

  if (goodnessOfFit) {
    this.goodnessOfFit_ = goodnessOfFit;
  }

  this.encodeMap_(map, scale, specMap, dpi);
  var attributes = {
    map: specMap
  };
  Object.assign(attributes, customAttributes);
  var lang = this.gettextCatalog_.getCurrentLanguage();
  var spec = {
    attributes: attributes,
    format: format,
    lang: lang,
    layout: layout
  };

  if (email) {
    spec.smtp = {
      to: email
    };
  }

  return spec;
};

PrintService.prototype.encodeMap_ = function (map, scale, object, destinationPrintDpi) {
  var _this = this;

  var view = map.getView();
  var viewCenter = view.getCenter();
  var viewProjection = view.getProjection();
  var viewResolution = view.getResolution();

  if (!viewCenter) {
    throw new Error('Missing viewCenter');
  }

  if (!viewProjection) {
    throw new Error('Missing viewProjection');
  }

  if (!viewResolution) {
    throw new Error('Missing viewResolution');
  }

  object.center = viewCenter;
  object.projection = viewProjection.getCode();
  object.scale = scale;
  object.useNearestScale = false;
  object.layers = [];
  var mapLayerGroup = map.getLayerGroup();

  if (!mapLayerGroup) {
    throw new Error('Missing mapLayerGroup');
  }

  this.printNativeAngle_ = mapLayerGroup.get('printNativeAngle') !== false;
  var layers = this.ngeoLayerHelper_.getFlatLayers(mapLayerGroup);
  Object(ol_array_js__WEBPACK_IMPORTED_MODULE_3__["stableSort"])(layers, function (layer_a, layer_b) {
    return (layer_a.getZIndex() || 0) - (layer_b.getZIndex() || 0);
  });
  layers = layers.slice().reverse();
  layers.forEach(function (layer) {
    if (layer.getVisible()) {
      _this.encodeLayer(object.layers, layer, viewResolution, destinationPrintDpi);
    }
  });
};

PrintService.prototype.encodeLayer = function (arr, layer, resolution, destinationPrintDpi) {
  if (layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"]) {
    this.encodeImageLayer_(arr, layer);
  } else if (layer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
    this.encodeTileLayer_(arr, layer);
  } else if (layer instanceof ol_layer_Vector_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
    this.encodeVectorLayer(arr, layer, resolution, destinationPrintDpi);
  }
};

PrintService.prototype.encodeVectorLayer = function (arr, layer, resolution, destinationPrintDpi) {
  this.vectorEncoder.encodeVectorLayer(arr, layer, resolution, destinationPrintDpi, this.goodnessOfFit_);
};

PrintService.prototype.encodeImageLayer_ = function (arr, layer) {
  if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"])) {
    throw new Error('layer not instance of olLayerImage');
  }

  var source = layer.getSource();

  if (source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
    this.encodeImageWmsLayer_(arr, layer);
  }
};

PrintService.prototype.encodeImageWmsLayer_ = function (arr, layer) {
  if (!(layer instanceof ol_layer_Image_js__WEBPACK_IMPORTED_MODULE_4__["default"])) {
    throw new Error('layer not instance of olLayerImage');
  }

  var source = layer.getSource();

  if (!(source instanceof ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_8__["default"])) {
    throw new Error('source not instance of olSourceImageWMS');
  }

  var url = source.getUrl();

  if (url !== undefined) {
    this.encodeWmsLayer_(arr, layer, url, source.getParams());
  }
};

PrintService.prototype.encodeWmsLayer_ = function (arr, layer, url, params) {
  if (url.startsWith('//')) {
    url = window.location.protocol + url;
  }

  var url_url = new URL(url);
  var customParams = {
    'TRANSPARENT': 'true'
  };

  if (url_url.searchParams) {
    url_url.searchParams.forEach(function (value, key) {
      customParams[key] = value;
    });
  }

  for (var key in params) {
    var value = params[key];

    if (value !== null && value !== undefined) {
      customParams[key] = value;
    }
  }

  delete customParams.LAYERS;
  delete customParams.FORMAT;
  delete customParams.SERVERTYPE;
  delete customParams.VERSION;
  delete customParams.STYLES;
  var serverType = undefined;

  if (params.SERVERTYPE !== 'arcgis') {
    serverType = params.SERVERTYPE;
  }

  var object = {
    baseURL: getAbsoluteUrl_(url_url.origin + url_url.pathname),
    imageFormat: 'FORMAT' in params ? params.FORMAT : 'image/png',
    layers: params.LAYERS.split(','),
    customParams: customParams,
    serverType: serverType,
    type: 'wms',
    opacity: this.getOpacityOrInherited_(layer),
    version: params.VERSION,
    useNativeAngle: this.printNativeAngle_,
    styles: params.STYLES ? params.STYLES.split(',') : ['']
  };
  arr.push(object);
};

function getAbsoluteUrl_(url) {
  var a = document.createElement('a');
  a.href = encodeURI(url);
  return decodeURI(a.href);
}

PrintService.prototype.encodeTileLayer_ = function (arr, layer) {
  if (!(layer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"])) {
    throw new Error('layer not instance of olLayerTile');
  }

  var source = layer.getSource();

  if (source instanceof ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["default"]) {
    this.encodeTileWmtsLayer_(arr, layer);
  } else if (source instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__["default"]) {
    this.encodeTileWmsLayer_(arr, layer);
  }
};

PrintService.prototype.encodeTileWmtsLayer_ = function (arr, layer) {
  if (!(layer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"])) {
    throw new Error('layer not instance of olLayerTile');
  }

  var source = layer.getSource();

  if (!(source instanceof ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_10__["default"])) {
    throw new Error('source not instance of olSourceWMTS');
  }

  var projection = source.getProjection();

  if (!projection) {
    throw new Error('Missing projection');
  }

  var metersPerUnit = projection.getMetersPerUnit();

  if (!metersPerUnit) {
    throw new Error('Missing metersPerUnit');
  }

  var tileGrid = source.getTileGrid();

  if (!(tileGrid instanceof ol_tilegrid_WMTS_js__WEBPACK_IMPORTED_MODULE_11__["default"])) {
    throw new Error('tileGrid not instance of olTilegridWMTS');
  }

  var matrixIds = tileGrid.getMatrixIds();
  var matrices = [];

  for (var i = 0, ii = matrixIds.length; i < ii; ++i) {
    var tileRange = tileGrid.getFullTileRange(i);
    matrices.push({
      identifier: matrixIds[i],
      scaleDenominator: tileGrid.getResolution(i) * metersPerUnit / 0.28e-3,
      tileSize: ol_size_js__WEBPACK_IMPORTED_MODULE_7__["toSize"](tileGrid.getTileSize(i)),
      topLeftCorner: tileGrid.getOrigin(i),
      matrixSize: [tileRange.maxX - tileRange.minX, tileRange.maxY - tileRange.minY]
    });
  }

  var dimensions = source.getDimensions();
  var dimensionKeys = Object.keys(dimensions);
  var object = {
    baseURL: this.getWmtsUrl_(source),
    dimensions: dimensionKeys,
    dimensionParams: dimensions,
    imageFormat: source.getFormat(),
    layer: source.getLayer(),
    matrices: matrices,
    matrixSet: source.getMatrixSet(),
    opacity: this.getOpacityOrInherited_(layer),
    requestEncoding: source.getRequestEncoding(),
    style: source.getStyle(),
    type: 'WMTS',
    version: source.getVersion()
  };
  arr.push(object);
};

PrintService.prototype.encodeTileWmsLayer_ = function (arr, layer) {
  if (!(layer instanceof ol_layer_Tile_js__WEBPACK_IMPORTED_MODULE_5__["default"])) {
    throw new Error('layer not instance of olLayerTile');
  }

  var source = layer.getSource();

  if (!(source instanceof ol_source_TileWMS_js__WEBPACK_IMPORTED_MODULE_9__["default"])) {
    throw new Error('source not instance of olSourceTileWMS');
  }

  var urls = source.getUrls();

  if (!urls) {
    throw new Error('Missing urls');
  }

  this.encodeWmsLayer_(arr, layer, urls[0], source.getParams());
};

PrintService.prototype.getWmtsUrl_ = function (source) {
  var urls = source.getUrls();

  if (!urls) {
    throw new Error('Missing urls');
  }

  return getAbsoluteUrl_(urls[0]);
};

PrintService.prototype.getOpacityOrInherited_ = function (layer) {
  if (layer.get('inheritedOpacity') !== undefined) {
    return layer.get('inheritedOpacity');
  }

  return layer.getOpacity();
};

PrintService.prototype.createReport = function (printSpec, opt_httpConfig) {
  var format = printSpec.format || 'pdf';
  var url = this.url_ + "/report." + format;
  var httpConfig = {
    headers: {
      'Content-Type': 'application/json; charset=UTF-8'
    }
  };
  Object.assign(httpConfig, opt_httpConfig !== undefined ? opt_httpConfig : {});
  return this.$http_.post(url, printSpec, httpConfig);
};

PrintService.prototype.getStatus = function (ref, opt_httpConfig) {
  var httpConfig = opt_httpConfig !== undefined ? opt_httpConfig : {};
  var url = this.url_ + "/status/" + ref + ".json";
  return this.$http_.get(url, httpConfig);
};

PrintService.prototype.getReportUrl = function (ref) {
  return this.url_ + "/report/" + ref;
};

PrintService.prototype.getCapabilities = function (opt_httpConfig) {
  var httpConfig = opt_httpConfig !== undefined ? opt_httpConfig : {
    withCredentials: true
  };
  var url = this.url_ + "/capabilities.json";
  return this.$http_.get(url, httpConfig);
};

function createPrintServiceFactory($http, gettextCatalog, ngeoLayerHelper) {
  return function (url) {
    return new PrintService(url, $http, gettextCatalog, ngeoLayerHelper);
  };
}

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoPrint', [ngeo_map_LayerHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);
module.service('ngeoPrintService', PrintService);
module.factory('ngeoCreatePrint', createPrintServiceFactory);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/print/Utils.js":
/*!****************************!*\
  !*** ./src/print/Utils.js ***!
  \****************************/
/*! exports provided: PrintUtils, INCHES_PER_METER, DOTS_PER_INCH, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintUtils", function() { return PrintUtils; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INCHES_PER_METER", function() { return INCHES_PER_METER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOTS_PER_INCH", function() { return DOTS_PER_INCH; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);

function PrintUtils() {
  this.extentHalfHorizontalDistance_ = -1;
  this.extentHalfVerticalDistance_ = -1;
}
var INCHES_PER_METER = 39.37;
var DOTS_PER_INCH = 72;

PrintUtils.prototype.getOptimalScale = function (mapSize, mapResolution, printMapSize, printMapScales) {
  var mapWidth = mapSize[0] * mapResolution;
  var mapHeight = mapSize[1] * mapResolution;
  var scaleWidth = mapWidth * INCHES_PER_METER * DOTS_PER_INCH / printMapSize[0];
  var scaleHeight = mapHeight * INCHES_PER_METER * DOTS_PER_INCH / printMapSize[1];
  var scale = Math.min(scaleWidth, scaleHeight);
  var optimal = -1;

  for (var i = 0, ii = printMapScales.length; i < ii; ++i) {
    if (scale > printMapScales[i]) {
      optimal = printMapScales[i];
    }
  }

  return optimal;
};

PrintUtils.prototype.getOptimalResolution = function (mapSize, printMapSize, printMapScale) {
  var dotsPerMeter = DOTS_PER_INCH * INCHES_PER_METER;
  var resolutionX = printMapSize[0] * printMapScale / (dotsPerMeter * mapSize[0]);
  var resolutionY = printMapSize[1] * printMapScale / (dotsPerMeter * mapSize[1]);
  var optimalResolution = Math.max(resolutionX, resolutionY);
  return optimalResolution;
};

PrintUtils.prototype.getBottomLeftCorner = function (mapCenter) {
  return [mapCenter[0] - this.extentHalfHorizontalDistance_, mapCenter[1] - this.extentHalfVerticalDistance_];
};

PrintUtils.prototype.getBottomRightCorner = function (mapCenter) {
  return [mapCenter[0] + this.extentHalfHorizontalDistance_, mapCenter[1] - this.extentHalfVerticalDistance_];
};

PrintUtils.prototype.getUpLeftCorner = function (mapCenter) {
  return [mapCenter[0] - this.extentHalfHorizontalDistance_, mapCenter[1] + this.extentHalfVerticalDistance_];
};

PrintUtils.prototype.getUpRightCorner = function (mapCenter) {
  return [mapCenter[0] + this.extentHalfHorizontalDistance_, mapCenter[1] + this.extentHalfVerticalDistance_];
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoPrintUtils', []);
module.service('ngeoPrintUtils', PrintUtils);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/print/VectorEncoder.js":
/*!************************************!*\
  !*** ./src/print/VectorEncoder.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ol_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/util.js */ "./node_modules/ol/util.js");
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/style/RegularShape.js */ "./node_modules/ol/style/RegularShape.js");
/* harmony import */ var ol_math_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/math.js */ "./node_modules/ol/math.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/style */ "./node_modules/ol/style.js");
/* harmony import */ var ol_style_Icon_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/style/Icon.js */ "./node_modules/ol/style/Icon.js");
/* harmony import */ var ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/style/Circle.js */ "./node_modules/ol/style/Circle.js");
/* harmony import */ var ol_color_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/color.js */ "./node_modules/ol/color.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }













function VectorEncoder() {
  this.geojsonFormat = new ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_2__["default"]();
}

var PrintStyleType = {
  LINE_STRING: 'LineString',
  POINT: 'Point',
  POLYGON: 'Polygon'
};
var PRINT_STYLE_TYPES = {
  'LineString': PrintStyleType.LINE_STRING,
  'Point': PrintStyleType.POINT,
  'Polygon': PrintStyleType.POLYGON,
  'MultiLineString': PrintStyleType.LINE_STRING,
  'MultiPoint': PrintStyleType.POINT,
  'MultiPolygon': PrintStyleType.POLYGON
};
var FEATURE_STYLE_PROP = '_ngeo_style';

VectorEncoder.prototype.encodeVectorLayer = function (mapFishPrintLayer, layer, resolution, destinationPrintDpi, goodnessOfFit) {
  var _this = this;

  var source = layer.getSource();
  var features = source.getFeatures();
  var featuresFromStyle = [];
  var geojsonFeatures = [];
  var mapfishStyleObject = {
    version: 2
  };

  var parseFeature = function parseFeature(originalFeature) {
    var styleData = null;
    var styleFunction = originalFeature.getStyleFunction() || layer.getStyleFunction();

    if (styleFunction !== undefined) {
      styleData = styleFunction.call(layer, originalFeature, resolution);
    }

    if (!styleData) {
      return;
    }

    var styles = Array.isArray(styleData) ? styleData : [styleData];
    styles = styles.filter(function (style) {
      if (style.getGeometry()) {
        featuresFromStyle.push(_this.newFeatureFromStyle_(style));
        return false;
      }

      return true;
    });

    if (styles.length === 0) {
      return;
    }

    var geometry = originalFeature.getGeometry();

    if (!geometry) {
      return;
    }

    var geometryType = geometry.getType();
    var stylesValue = [];

    for (var _iterator = _createForOfIteratorHelperLoose(styles), _step; !(_step = _iterator()).done;) {
      var style = _step.value;
      stylesValue.push(Object(ol_util_js__WEBPACK_IMPORTED_MODULE_1__["getUid"])(style).toString());
    }

    var styleValue = stylesValue.join(',') + "-" + geometryType;
    var styleKey = "[" + FEATURE_STYLE_PROP + " = '" + styleValue + "']";

    var geojsonFeature = _this.geojsonFormat.writeFeatureObject(originalFeature);

    if (geojsonFeature.properties === null) {
      geojsonFeature.properties = {};
    }

    geojsonFeature.properties[FEATURE_STYLE_PROP] = styleValue;
    geojsonFeatures.push(geojsonFeature);

    if (mapfishStyleObject[styleKey]) {
      return;
    }

    var styleObject = {
      symbolizers: []
    };
    mapfishStyleObject[styleKey] = styleObject;

    for (var _iterator2 = _createForOfIteratorHelperLoose(styles), _step2; !(_step2 = _iterator2()).done;) {
      var _style = _step2.value;

      var mapfishPrintStyle = _this.encodeVectorStyle_(geometryType, resolution, _style, destinationPrintDpi, goodnessOfFit);

      if (mapfishPrintStyle) {
        styleObject.symbolizers.push(mapfishPrintStyle);
      }
    }
  };

  features.forEach(function (feature) {
    return parseFeature(feature);
  });
  featuresFromStyle.forEach(function (feature) {
    return parseFeature(feature);
  });

  if (geojsonFeatures.length > 0) {
    var geojsonFeatureCollection = {
      type: 'FeatureCollection',
      features: geojsonFeatures
    };
    var object = {
      geoJson: geojsonFeatureCollection,
      opacity: layer.getOpacity(),
      style: mapfishStyleObject,
      type: 'geojson'
    };
    mapFishPrintLayer.push(object);
  }
};

VectorEncoder.prototype.newFeatureFromStyle_ = function (style) {
  var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
    geometry: style.getGeometry()
  });
  feature.setStyle(new ol_style__WEBPACK_IMPORTED_MODULE_6__["Style"]({
    fill: style.getFill(),
    image: style.getImage(),
    stroke: style.getStroke(),
    text: style.getText()
  }));
  return feature;
};

VectorEncoder.prototype.encodeVectorStyle_ = function (geometryType, resolution, style, destiontionPrintDpi, goodnessOfFit) {
  if (!(geometryType in PRINT_STYLE_TYPES)) {
    return;
  }

  var test = '';
  console.log(test.length);
  var test2 = '';
  console.log(test2.length);
  var styleType = PRINT_STYLE_TYPES[geometryType];
  var fillStyle = style.getFill();
  var imageStyle = style.getImage();
  var strokeStyle = style.getStroke();
  var textStyle = style.getText();

  if (styleType === PrintStyleType.POLYGON) {
    if (fillStyle !== null) {
      return this.encodeVectorStyle_Polygon_(fillStyle, strokeStyle);
    }
  } else if (styleType === PrintStyleType.LINE_STRING) {
    if (strokeStyle !== null) {
      return this.encodeVectorStyle_Line_(strokeStyle);
    }
  } else if (styleType === PrintStyleType.POINT) {
    if (imageStyle !== null) {
      return this.encodeVectorStyle_Point_(resolution, imageStyle, destiontionPrintDpi);
    }
  }

  if (textStyle !== null) {
    return this.encodeTextStyle_(textStyle, goodnessOfFit);
  }
};

VectorEncoder.prototype.encodeVectorStyle_Fill_ = function (symbolizer, fillStyle) {
  var fillColor = fillStyle.getColor();

  if (fillColor !== null) {
    console.assert(typeof fillColor === 'string' || Array.isArray(fillColor));
    fillColor = Object(ol_color_js__WEBPACK_IMPORTED_MODULE_9__["asArray"])(fillColor);
    console.assert(Array.isArray(fillColor), 'only supporting fill colors');
    symbolizer.fillColor = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__["rgbArrayToHex"])(fillColor);
    symbolizer.fillOpacity = fillColor[3];
  }
};

VectorEncoder.prototype.encodeVectorStyle_Line_ = function (strokeStyle) {
  var symbolizer = {
    type: 'line'
  };
  this.encodeVectorStyle_Stroke_(symbolizer, strokeStyle);
  return symbolizer;
};

VectorEncoder.prototype.encodeVectorStyle_Point_ = function (resolution, imageStyle, destiontionPrintDpi) {
  var symbolizer;

  if (imageStyle instanceof ol_style_Circle_js__WEBPACK_IMPORTED_MODULE_8__["default"]) {
    symbolizer = {
      type: 'point'
    };
    symbolizer.pointRadius = imageStyle.getRadius();
    var fillStyle = imageStyle.getFill();

    if (fillStyle !== null) {
      this.encodeVectorStyle_Fill_(symbolizer, fillStyle);
    }

    var strokeStyle = imageStyle.getStroke();

    if (strokeStyle !== null) {
      this.encodeVectorStyle_Stroke_(symbolizer, strokeStyle);
    }
  } else if (imageStyle instanceof ol_style_Icon_js__WEBPACK_IMPORTED_MODULE_7__["default"]) {
    var imgSrc = imageStyle.getSrc();

    if (!imgSrc) {
      throw new Error('Missing imgSrc');
    }

    var src = new URL(imgSrc, window.location.href).href;

    if (src !== undefined) {
      symbolizer = {
        type: 'point',
        externalGraphic: src
      };
      var opacity = imageStyle.getOpacity();

      if (opacity !== null) {
        symbolizer.graphicOpacity = opacity;
      }

      var size = imageStyle.getSize();

      if (size !== null) {
        var scale = imageStyle.getScale();

        if (isNaN(scale)) {
          scale = 1;
        }

        symbolizer.graphicWidth = size[0] * scale;
        symbolizer.graphicHeight = size[1] * scale;
      }

      var rotation = imageStyle.getRotation();

      if (isNaN(rotation)) {
        rotation = 0;
      }

      symbolizer.rotation = Object(ol_math_js__WEBPACK_IMPORTED_MODULE_4__["toDegrees"])(rotation);
    }
  } else if (imageStyle instanceof ol_style_RegularShape_js__WEBPACK_IMPORTED_MODULE_3__["default"]) {
    symbolizer = {
      type: 'point',
      externalGraphic: imageStyle.getImage(destiontionPrintDpi / Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__["dpi"])()).toDataURL()
    };

    var _imageStyle$getSize = imageStyle.getSize(),
        height = _imageStyle$getSize[0],
        width = _imageStyle$getSize[1];

    var _scale = imageStyle.getScale();

    symbolizer.graphicHeight = height * _scale;
    symbolizer.graphicWidth = width * _scale;
  }

  return symbolizer;
};

VectorEncoder.prototype.encodeVectorStyle_Polygon_ = function (fillStyle, strokeStyle) {
  var symbolizer = {
    type: 'polygon'
  };
  this.encodeVectorStyle_Fill_(symbolizer, fillStyle);

  if (strokeStyle !== null) {
    this.encodeVectorStyle_Stroke_(symbolizer, strokeStyle);
  }

  return symbolizer;
};

VectorEncoder.prototype.encodeVectorStyle_Stroke_ = function (symbolizer, strokeStyle) {
  var strokeColor = strokeStyle.getColor();

  if (strokeColor !== null) {
    if (!(typeof strokeColor === 'string' || Array.isArray(strokeColor))) {
      throw new Error('Wrong strokeColor type');
    }

    var strokeColorRgba = Object(ol_color_js__WEBPACK_IMPORTED_MODULE_9__["asArray"])(strokeColor);

    if (!Array.isArray(strokeColorRgba)) {
      throw new Error('Parsed StrokeColorRgba is not an array');
    }

    symbolizer.strokeColor = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__["rgbArrayToHex"])(strokeColorRgba);
    symbolizer.strokeOpacity = strokeColorRgba[3];
  }

  var strokeDashstyle = strokeStyle.getLineDash();

  if (strokeDashstyle !== null) {
    symbolizer.strokeDashstyle = strokeDashstyle.join(' ');
  }

  var strokeWidth = strokeStyle.getWidth();

  if (strokeWidth !== undefined) {
    symbolizer.strokeWidth = strokeWidth;
  }

  var strokeLineCap = strokeStyle.getLineCap();

  if (strokeLineCap) {
    symbolizer.strokeLinecap = strokeLineCap;
  }
};

VectorEncoder.prototype.encodeTextStyle_ = function (textStyle, goodnessOfFit) {
  var symbolizer = {
    type: 'Text'
  };
  var label = textStyle.getText();

  if (label !== undefined) {
    symbolizer.label = label;
    var xAlign = 'c';
    var yAlign = 'm';
    var olTextAlign = textStyle.getTextAlign();

    if (olTextAlign === 'left' || olTextAlign === 'start') {
      xAlign = 'l';
    } else if (olTextAlign === 'right' || olTextAlign === 'end') {
      xAlign = 'r';
    }

    var olTextBaseline = textStyle.getTextBaseline();

    if (olTextBaseline === 'bottom') {
      yAlign = 'l';
    } else if (olTextBaseline === 'top') {
      yAlign = 't';
    }

    symbolizer.labelAlign = "" + xAlign + yAlign;
    var labelRotation = textStyle.getRotation();

    if (labelRotation !== undefined) {
      symbolizer.labelRotation = (labelRotation * 180 / Math.PI).toString();
      symbolizer.labelAlign = 'cm';
    }

    var fontStyle = textStyle.getFont();

    if (fontStyle !== undefined) {
      var font = fontStyle.split(' ');

      if (font.length >= 3) {
        symbolizer.fontWeight = font[0];
        symbolizer.fontSize = font[1];
        symbolizer.fontFamily = font.splice(2).join(' ');
      }
    }

    var strokeStyle = textStyle.getStroke();

    if (strokeStyle !== null) {
      var strokeColor = strokeStyle.getColor();

      if (!(typeof strokeColor === 'string' || Array.isArray(strokeColor))) {
        throw new Error('Wrong strokeColor type');
      }

      var strokeColorRgba = Object(ol_color_js__WEBPACK_IMPORTED_MODULE_9__["asArray"])(strokeColor);

      if (!Array.isArray(strokeColorRgba)) {
        throw new Error('Parsed strokeColorRgba is not an array');
      }

      symbolizer.haloColor = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__["rgbArrayToHex"])(strokeColorRgba);
      symbolizer.haloOpacity = strokeColorRgba[3];
      var width = strokeStyle.getWidth();

      if (width !== undefined) {
        symbolizer.haloRadius = width / 2;
      }
    }

    var fillStyle = textStyle.getFill();

    if (fillStyle !== null) {
      var fillColor = fillStyle.getColor();

      if (!(typeof fillColor === 'string' || Array.isArray(fillColor))) {
        throw new Error('Wrong fillColor type');
      }

      var fillColorRgba = Object(ol_color_js__WEBPACK_IMPORTED_MODULE_9__["asArray"])(fillColor);

      if (!Array.isArray(fillColorRgba)) {
        throw new Error('Parsed fillColorRgba is not an array');
      }

      symbolizer.fontColor = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_0__["rgbArrayToHex"])(fillColorRgba);
    }

    if (symbolizer.labelAlign !== undefined) {
      symbolizer.labelXOffset = textStyle.getOffsetX();
      symbolizer.labelYOffset = -textStyle.getOffsetY();
    }

    if (goodnessOfFit !== undefined) {
      symbolizer.goodnessOfFit = goodnessOfFit;
    }

    return symbolizer;
  }
};

/* harmony default export */ __webpack_exports__["default"] = (VectorEncoder);

/***/ }),

/***/ "./src/print/module.js":
/*!*****************************!*\
  !*** ./src/print/module.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_print_Service_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/print/Service.js */ "./src/print/Service.js");
/* harmony import */ var ngeo_print_Utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/print/Utils.js */ "./src/print/Utils.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoPrintModule', [ngeo_print_Service_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_print_Utils_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./src/profile/d3Elevation.js":
/*!************************************!*\
  !*** ./src/profile/d3Elevation.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ "./node_modules/d3/index.js");


function d3Elevation(options, functions) {
  var light = options.light !== undefined ? options.light : false;
  var margin = light ? {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  } : {
    top: 10,
    right: 20,
    bottom: 30,
    left: 40
  };
  var hoverCallback = functions.hoverCallback !== undefined ? functions.hoverCallback : function () {};
  var outCallback = functions.outCallback !== undefined ? functions.outCallback : function () {};
  var distanceExtractor = functions.distanceExtractor;
  var linesConfiguration = options.linesConfiguration;
  var numberOfLines = Object.keys(linesConfiguration).length;
  var bisectDistance = Object(d3__WEBPACK_IMPORTED_MODULE_0__["bisector"])(function (d) {
    return distanceExtractor(d);
  }).left;
  var poiExtractor = functions.poiExtractor;
  var styleDefs = options.styleDefs;
  var poiLabelAngle = options.poiLabelAngle !== undefined ? options.poiLabelAngle : -60;
  var i18n = functions.i18n || {};
  var xAxisLabel = i18n.xAxis || 'Distance';
  var yAxisLabel = i18n.yAxis || 'Elevation';
  var formatter = {
    xhover: function xhover(dist, units) {
      return parseFloat(dist.toPrecision(3)) + " " + units;
    },
    yhover: function yhover(ele, units) {
      return ele !== null ? Math.round(ele) + " m" : '';
    },
    xtick: function xtick(dist, units) {
      return dist;
    },
    ytick: function ytick(ele, units) {
      return ele;
    }
  };

  if (functions.formatter !== undefined) {
    Object.assign(formatter, functions.formatter);
  }

  var lightXAxis = options.lightXAxis !== undefined ? options.lightXAxis : false;
  var svg;
  var x;
  var y;
  var scaleModifier = functions.scaleModifier;
  var g;
  var height;
  var width;
  var xFactor;
  var xUnits;
  var xDomain;

  var profile = function profile(selection) {
    var func = function func(data, index, groups) {
      Object(d3__WEBPACK_IMPORTED_MODULE_0__["select"])(this).selectAll('svg').remove();

      if (data === undefined) {
        return;
      }

      width = Math.max(this.clientWidth - margin.right - margin.left, 0);
      x = Object(d3__WEBPACK_IMPORTED_MODULE_0__["scaleLinear"])().range([0, width]);
      height = Math.max(this.clientHeight - margin.top - margin.bottom, 0);
      y = Object(d3__WEBPACK_IMPORTED_MODULE_0__["scaleLinear"])().range([height, 0]);
      var xAxis = Object(d3__WEBPACK_IMPORTED_MODULE_0__["axisBottom"])(x);
      var yAxis = Object(d3__WEBPACK_IMPORTED_MODULE_0__["axisLeft"])(y);
      var area = null;

      if (numberOfLines === 1) {
        area = Object(d3__WEBPACK_IMPORTED_MODULE_0__["area"])().x(function (d) {
          return x(distanceExtractor(d));
        }).y0(height).y1(function (d) {
          var firstLineName = Object.keys(linesConfiguration)[0];
          return y(linesConfiguration[firstLineName].zExtractor(d));
        });
      }

      svg = Object(d3__WEBPACK_IMPORTED_MODULE_0__["select"])(this).selectAll('svg').data([data]);
      var svgEnter = svg.enter().append('svg');
      svg = Object(d3__WEBPACK_IMPORTED_MODULE_0__["select"])(this).selectAll('svg').data([data]);

      if (styleDefs !== undefined) {
        svgEnter.append('defs').append('style').attr('type', 'text/css').text(styleDefs);
      }

      var gEnter = svgEnter.append('g');
      clearPois();
      gEnter.style('font', '11px Arial');

      if (numberOfLines === 1) {
        gEnter.append('path').attr('class', 'area').style('fill', 'rgba(222, 222, 222, 0.5)');
      }

      gEnter.insert('g', ':first-child').attr('class', 'grid-y');

      if (!light) {
        gEnter.append('g').attr('class', 'x axis').attr('transform', "translate(0," + height + ")");
        gEnter.append('text').attr('class', 'x label').attr('text-anchor', 'end').attr('x', width - 4).attr('y', height - 4);
        gEnter.append('g').attr('class', 'y axis');
        gEnter.append('text').attr('class', 'y label').attr('text-anchor', 'end').attr('y', 6).attr('dy', '.75em').attr('transform', 'rotate(-90)').style('fill', 'grey').text(yAxisLabel + " [m]");
        gEnter.append('g').attr('class', 'metas').attr('transform', "translate(" + (width + 3) + ", 0)");
      }

      gEnter.append('g').attr('class', 'pois');
      var xHover = gEnter.append('g').attr('class', 'x grid-hover');
      xHover.append('svg:line').attr('stroke-dasharray', '5,5');
      xHover.append('text');
      gEnter.append('rect').attr('class', 'overlay').attr('width', width).attr('height', height).style('fill', 'none').style('pointer-events', 'all');
      svg.attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);
      g = svg.select('g').attr('transform', "translate(" + margin.left + "," + margin.top + ")");
      xDomain = Object(d3__WEBPACK_IMPORTED_MODULE_0__["extent"])(data, function (d) {
        return distanceExtractor(d);
      });
      x.domain(xDomain);

      var yDomain = function () {
        var elevationsValues = [];

        var _loop = function _loop(name) {
          var extent = Object(d3__WEBPACK_IMPORTED_MODULE_0__["extent"])(data, function (d) {
            return linesConfiguration[name].zExtractor(d);
          });

          if (extent.every(Number.isFinite)) {
            elevationsValues = elevationsValues.concat(extent);
          }
        };

        for (var name in linesConfiguration) {
          _loop(name);
        }

        return [Math.min.apply(Math, elevationsValues), Math.max.apply(Math, elevationsValues)];
      }();

      y.domain(yDomain);

      if (scaleModifier !== undefined) {
        scaleModifier(x, y, width, height);
      } else {
        var padding = (yDomain[1] - yDomain[0]) * 0.1;
        y.domain([yDomain[0] - padding, yDomain[1] + padding]);
      }

      if (numberOfLines === 1) {
        if (!area) {
          throw new Error('Missing area');
        }

        g.select('.area').transition().attr('d', area);
      }

      var line, yHover;

      var _loop2 = function _loop2(name) {
        gEnter.append('path').attr('class', "line " + name).style('stroke', linesConfiguration[name].color || '#F00').style('fill', 'none');
        yHover = gEnter.append('g').attr('class', "y grid-hover " + name);
        yHover.append('svg:line').attr('stroke-dasharray', '5,5');
        yHover.append('text');
        line = Object(d3__WEBPACK_IMPORTED_MODULE_0__["line"])().x(function (d) {
          return x(distanceExtractor(d));
        }).y(function (d) {
          return y(linesConfiguration[name].zExtractor(d));
        }).defined(function (d) {
          return linesConfiguration[name].zExtractor(d) !== null;
        });
        g.select(".line." + name).transition().attr('d', line);
      };

      for (var name in linesConfiguration) {
        _loop2(name);
      }

      xFactor = xDomain[1] > 2000 ? 1000 : 1;
      xUnits = xDomain[1] > 2000 ? 'km' : 'm';

      if (!light) {
        xAxis.tickFormat(function (domainValue) {
          return formatter.xtick(domainValue / xFactor, xUnits);
        });

        if (lightXAxis) {
          xAxis.tickValues([0, x.domain()[1]]);
        }

        yAxis.tickFormat(function (dommainValue) {
          return formatter.ytick(dommainValue, 'm');
        });
        g.select('.x.axis').transition().call(xAxis);
        g.select('.x.label').text(xAxisLabel + " [" + xUnits + "]").style('fill', 'grey').style('shape-rendering', 'crispEdges');

        if (height / 15 < 10) {
          yAxis.ticks(height / 15);
        }

        g.select('.y.axis').transition().call(yAxis);
      }

      g.select('.grid-y').transition().call(yAxis.tickSize(-width).tickFormat(null)).selectAll('.tick line').style('stroke', '#ccc').style('opacity', 0.7);
      g.select('.grid-y').selectAll('.tick text').remove();
      g.selectAll('.axis').selectAll('path, line').style('fill', 'none').style('stroke', '#000').style('shape-rendering', 'crispEdges');
      g.select('.grid-y').select('path').style('stroke', 'none');
      g.selectAll('.grid-hover line').style('stroke', '#222').style('opacity', 0.8);
      g.select('.overlay').on('mouseout', mouseout).on('mousemove', mousemove);

      function mousemove() {
        var mouseX = Object(d3__WEBPACK_IMPORTED_MODULE_0__["mouse"])(this)[0];
        var x0 = x.invert(mouseX);
        profile.highlight(x0);
      }

      function mouseout() {
        profile.clearHighlight();
      }
    };

    selection.each(func);
  };

  profile.clearHighlight = function () {
    g.selectAll('.grid-hover').style('display', 'none');
    outCallback.call(null);
  };

  profile.highlight = function (distance) {
    var data = svg.datum();
    var i = bisectDistance(data, distance);

    if (i >= data.length) {
      return;
    }

    var point = data[i];
    var dist = distanceExtractor(point);
    var elevation;
    var elevations = [];
    var elevationsRef = {};
    var lineName;

    for (lineName in linesConfiguration) {
      elevation = linesConfiguration[lineName].zExtractor(point);

      if (Number.isFinite(elevation)) {
        elevations.push(elevation);
        elevationsRef[lineName] = elevation;
        g.select(".y.grid-hover." + lineName).style('display', 'inline').select('line').attr('x1', x(0)).attr('y1', y(elevation)).attr('x2', width).attr('y2', y(elevation));
      } else {
        g.select(".y.grid-hover." + lineName).style('display', 'none');
      }
    }

    var y2 = y(Math.max.apply(null, elevations));
    g.select('.x.grid-hover').style('display', 'inline').select('line').attr('x1', x(dist)).attr('y1', height).attr('x2', x(dist)).attr('y2', Number.isFinite(y2) ? y2 : 0);
    var right = dist > xDomain[1] / 2;
    var xtranslate = x(dist);
    xtranslate += right ? -10 : 10;
    g.select('.x.grid-hover text').text(formatter.xhover(dist / xFactor, xUnits)).style('text-anchor', right ? 'end' : 'start').attr('transform', "translate(" + xtranslate + "," + (height - 10) + ")");

    if (numberOfLines === 1) {
      var hasValue = Number.isFinite(elevations[0]);
      g.select('.y.grid-hover text').text(hasValue ? formatter.yhover(elevations[0], 'm') : 'no value').style('text-anchor', right ? 'end' : 'start').attr('transform', "translate(" + xtranslate + "," + (hasValue ? y(elevations[0]) - 10 : 0) + ")");
    }

    hoverCallback.call(null, point, dist / xFactor, xUnits, elevationsRef, 'm');
  };

  profile.showPois = function (pois) {
    if (!svg) {
      return;
    }

    pois = pois !== undefined ? pois : [];
    console.assert(pois.length === 0 || poiExtractor !== undefined);
    var pe = poiExtractor;
    var g = svg.select('g');
    var profileData = svg.datum();
    var ps = g.select('.pois');
    var p = ps.selectAll('.poi').data(pois, function (d) {
      var i = bisectDistance(profileData, Math.round(pe.dist(d) * 10) / 10, 1);
      var point = profileData[i];

      if (point) {
        var lineName;
        var elevations = [];

        for (lineName in linesConfiguration) {
          elevations.push(linesConfiguration[lineName].zExtractor(point));
        }

        var z = Math.max.apply(null, elevations);
        pe.z(d, z);
      }

      return pe.id(d);
    });
    var poiEnterG = p.enter().append('g').attr('class', 'poi');
    poiEnterG.append('text').attr('x', light ? 0 : 9).attr('dy', '.35em').attr('text-anchor', light ? 'middle' : 'start');
    poiEnterG.append('line').style('shape-rendering', 'crispEdges');
    poiEnterG.style('opacity', 0).transition().duration(1000).delay(100).style('opacity', 1);
    poiEnterG.selectAll('text').attr('transform', function (d) {
      if (light) {
        return "translate(" + x(pe.dist(d)) + "," + (y(pe.z(d)) - 10) + ")";
      } else {
        return "translate(" + x(pe.dist(d)) + "," + (y(pe.z(d)) - 20) + ") rotate(" + poiLabelAngle + ")";
      }
    }).text(function (d) {
      return "" + pe.sort(d) + (light ? '' : " - " + pe.title(d));
    });
    poiEnterG.selectAll('line').style('stroke', 'grey').attr('x1', function (d) {
      return x(pe.dist(d));
    }).attr('y1', function (d) {
      return y(y.domain()[0]);
    }).attr('x2', function (d) {
      return x(pe.dist(d));
    }).attr('y2', function (d) {
      return y(pe.z(d));
    });
    poiEnterG.exit().remove();
  };

  function clearPois() {
    profile.showPois([]);
  }

  return profile;
}

/* harmony default export */ __webpack_exports__["default"] = (d3Elevation);

/***/ }),

/***/ "./src/profile/elevationComponent.js":
/*!*******************************************!*\
  !*** ./src/profile/elevationComponent.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/misc/debounce.js */ "./src/misc/debounce.js");
/* harmony import */ var ngeo_profile_d3Elevation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/profile/d3Elevation.js */ "./src/profile/d3Elevation.js");
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! d3 */ "./node_modules/d3/index.js");
profileElevationComponent.$inject = ["ngeoDebounce", "ngeoProfileOptions"];





var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoProfile', [ngeo_misc_debounce_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]);

function profileElevationComponent(ngeoDebounce, ngeoProfileOptions) {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var optionsAttr = attrs.ngeoProfileOptions;
      console.assert(optionsAttr !== undefined);
      var selection = Object(d3__WEBPACK_IMPORTED_MODULE_4__["select"])(element[0]);
      var profile = undefined;
      scope.$watchCollection(optionsAttr, function (newVal) {
        var options = Object.assign({}, newVal);

        if (options !== undefined) {
          if (options.hoverCallback !== undefined) {
            var origHoverCallback = options.hoverCallback;

            options.hoverCallback = function () {
              origHoverCallback.apply(void 0, arguments);
              scope.$applyAsync();
            };
          }

          if (options.outCallback !== undefined) {
            var origOutCallback = options.outCallback;

            options.outCallback = function () {
              origOutCallback();
              scope.$applyAsync();
            };
          }

          profile = Object(ngeo_profile_d3Elevation_js__WEBPACK_IMPORTED_MODULE_3__["default"])(ngeoProfileOptions, options);
          refreshData();
        }
      });
      var elevationData = undefined;
      scope.$watch(attrs.ngeoProfile, function (newVal, oldVal) {
        elevationData = newVal;
        refreshData();
      });
      var poiData = undefined;
      scope.$watch(attrs.ngeoProfilePois, function (newVal, oldVal) {
        poiData = newVal;
        refreshData();
      });
      scope.$watch(attrs.ngeoProfileHighlight, function (newVal, oldVal) {
        if (newVal === undefined) {
          return;
        }

        if (newVal > 0) {
          profile.highlight(newVal);
        } else {
          profile.clearHighlight();
        }
      });
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_1__["listen"])(window, 'resize', ngeoDebounce(refreshData, 50, true));

      function refreshData() {
        if (profile !== undefined) {
          selection.datum(elevationData).call(profile);

          if (elevationData !== undefined) {
            profile.showPois(poiData);
          }
        }
      }
    }
  };
}

module.directive('ngeoProfile', profileElevationComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/profile/module.js":
/*!*******************************!*\
  !*** ./src/profile/module.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_profile_elevationComponent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/profile/elevationComponent.js */ "./src/profile/elevationComponent.js");


/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoProfileModule', [ngeo_profile_elevationComponent_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]));

/***/ }),

/***/ "./src/query/Action.js":
/*!*****************************!*\
  !*** ./src/query/Action.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  ADD: 'add',
  REMOVE: 'remove',
  REPLACE: 'replace'
});

/***/ }),

/***/ "./src/query/MapQuerent.js":
/*!*********************************!*\
  !*** ./src/query/MapQuerent.js ***!
  \*********************************/
/*! exports provided: MapQuerent, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapQuerent", function() { return MapQuerent; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Action.js */ "./src/query/Action.js");
/* harmony import */ var ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/query/Querent.js */ "./src/query/Querent.js");
/* harmony import */ var ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/datasource/DataSources.js */ "./src/datasource/DataSources.js");
/* harmony import */ var ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/datasource/Helper.js */ "./src/datasource/Helper.js");
/* harmony import */ var ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/misc/FeatureHelper.js */ "./src/misc/FeatureHelper.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }








var MapQuerent = function () {
  MapQuerent.$inject = ["ngeoDataSources", "ngeoDataSourcesHelper", "ngeoFeatureHelper", "ngeoQuerent", "ngeoQueryResult", "ngeoQueryOptions"];

  function MapQuerent(ngeoDataSources, ngeoDataSourcesHelper, ngeoFeatureHelper, ngeoQuerent, ngeoQueryResult, ngeoQueryOptions) {
    var options = ngeoQueryOptions;
    this.dataSources_ = ngeoDataSources.collection;
    this.featureHelper_ = ngeoFeatureHelper;
    this.ngeoDataSourcesHelper_ = ngeoDataSourcesHelper;
    this.ngeoQuerent_ = ngeoQuerent;
    this.result_ = ngeoQueryResult;
    this.limit_ = options.limit !== undefined ? options.limit : 50;
    this.queryCountFirst_ = options.queryCountFirst !== undefined ? options.queryCountFirst : false;
    this.tolerance_;

    if (Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["hasCoarsePointingDevice"])()) {
      this.tolerance_ = options.toleranceTouch !== undefined ? options.toleranceTouch : 10;
    } else {
      this.tolerance_ = options.tolerance !== undefined ? options.tolerance : 3;
    }

    this.bboxAsGETParam_ = options.bboxAsGETParam || false;
    this.dataSourceNames_ = {};
    this.cleared_ = false;
  }

  var _proto = MapQuerent.prototype;

  _proto.issue = function issue(options) {
    var action = options.action ? options.action : ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE;
    this.clear(action !== ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE);
    var queryableDataSources;

    if (options.dataSources === undefined && options.queryableDataSources === undefined) {
      queryableDataSources = this.ngeoQuerent_.getQueryableDataSources(this.dataSources_.getArray(), options.map);
    }

    var limit = options.limit !== undefined ? options.limit : this.limit_;
    Object.assign(options, {
      queryableDataSources: queryableDataSources,
      limit: limit,
      tolerance: this.tolerance_,
      wfsCount: this.queryCountFirst_,
      bboxAsGETParam: this.bboxAsGETParam_
    });
    this.result_.pending = true;
    return this.ngeoQuerent_.issue(options).then(this.handleResult_.bind(this, action));
  };

  _proto.clear = function clear(keep) {
    if (keep === void 0) {
      keep = false;
    }

    if (this.cleared_) {
      return;
    }

    this.result_.total = 0;

    for (var _iterator = _createForOfIteratorHelperLoose(this.result_.sources), _step; !(_step = _iterator()).done;) {
      var source = _step.value;

      if (!keep) {
        source.features.length = 0;
        delete source.totalFeatureCount;
      } else {
        this.result_.total += source.features.length;
      }

      source.pending = false;
      source.tooManyResults = false;
    }

    if (!keep) {
      this.result_.sources.length = 0;
    }

    this.result_.pending = false;
    this.cleared_ = true;
  };

  _proto.handleResult_ = function handleResult_(action, response) {
    var _this = this;

    var total = action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE ? 0 : this.result_.total;

    var _loop = function _loop(idStr) {
      var id = Number(idStr);

      var dataSource = _this.ngeoDataSourcesHelper_.getDataSource(id);

      if (!dataSource) {
        throw new Error('Missing dataSource');
      }

      var label = dataSource.name;
      console.assert(dataSource);
      var querentResultItem = response[id];
      var features = querentResultItem.features;
      var limit = querentResultItem.limit;
      var tooManyResults = querentResultItem.tooManyFeatures === true;
      var totalFeatureCount = querentResultItem.totalFeatureCount;
      var typeSeparatedFeatures = {};
      features.forEach(function (feature) {
        var type = feature.get('ngeo_feature_type_');

        if (!typeSeparatedFeatures[type]) {
          typeSeparatedFeatures[type] = [];
        }

        if (dataSource.attributes && dataSource.attributes.length) {
          var properties = feature.getProperties();
          var filteredProperties = {};
          dataSource.attributes.forEach(function (attribute) {
            if (attribute.alias) {
              filteredProperties[attribute.alias] = properties[attribute.name];
              feature.unset(attribute.name, true);
            } else {
              filteredProperties[attribute.name] = properties[attribute.name];
            }
          });
          feature.setProperties(filteredProperties, true);
        }

        typeSeparatedFeatures[type].push(feature);
      });

      for (var type in typeSeparatedFeatures) {
        label = type ? type : label;
        var featuresByType = typeSeparatedFeatures[type];
        var shouldPush = false;

        if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REPLACE) {
          shouldPush = true;
        } else {
          var existingSource = void 0;

          for (var _iterator2 = _createForOfIteratorHelperLoose(_this.result_.sources), _step2; !(_step2 = _iterator2()).done;) {
            var source = _step2.value;

            if (source.id === id && source.label === label) {
              existingSource = source;
              break;
            }
          }

          if (existingSource) {
            for (var _iterator3 = _createForOfIteratorHelperLoose(featuresByType), _step3; !(_step3 = _iterator3()).done;) {
              var newFeature = _step3.value;

              var existingFeatureIndex = _this.featureHelper_.findFeatureIndexByFid(existingSource.features, "" + newFeature.getId());

              if (existingFeatureIndex === -1) {
                if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].ADD) {
                  existingSource.features.push(newFeature);
                  total += 1;
                }
              } else {
                if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].REMOVE) {
                  existingSource.features.splice(existingFeatureIndex, 1);
                  total -= 1;
                }
              }
            }
          } else {
            if (action === ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_2__["default"].ADD) {
              shouldPush = true;
            }
          }
        }

        if (shouldPush) {
          _this.result_.sources.push({
            features: featuresByType,
            id: id,
            label: label,
            limit: limit,
            pending: false,
            tooManyResults: tooManyResults,
            totalFeatureCount: totalFeatureCount,
            identifierAttributeField: dataSource.identifierAttribute
          });

          total += features.length;
        }
      }
    };

    for (var idStr in response) {
      _loop(idStr);
    }

    this.result_.total = total;
    this.result_.pending = false;
    this.cleared_ = false;
  };

  return MapQuerent;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoMapQuerent', [ngeo_datasource_DataSources_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_datasource_Helper_js__WEBPACK_IMPORTED_MODULE_5__["default"].name, ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_misc_FeatureHelper_js__WEBPACK_IMPORTED_MODULE_6__["default"].name]);
module.service('ngeoMapQuerent', MapQuerent);
module.value('ngeoQueryResult', {
  sources: [],
  total: 0,
  pending: false
});
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/query/Mode.js":
/*!***************************!*\
  !*** ./src/query/Mode.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ({
  CLICK: 'click',
  DRAW_BOX: 'drawbox',
  DRAW_POLYGON: 'drawpolygon'
});

/***/ }),

/***/ "./src/query/ModeSelector.js":
/*!***********************************!*\
  !*** ./src/query/ModeSelector.js ***!
  \***********************************/
/*! exports provided: QueryModeSelector, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryModeSelector", function() { return QueryModeSelector; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/query/Action.js */ "./src/query/Action.js");
/* harmony import */ var ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Mode.js */ "./src/query/Mode.js");
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }






var QueryModeSelector = function () {
  QueryModeSelector.$inject = ["$rootScope"];

  function QueryModeSelector($rootScope) {
    this.keyActionAdd_ = 'a';
    this.keyActionRemove_ = 'x';
    this.keysAction_ = [this.keyActionAdd_, this.keyActionRemove_];
    this.action_ = ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__["default"].REPLACE;
    this.pending_ = false;
    this.wasPending_ = false;
    this.previousAction_ = null;
    this.mode_ = ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].CLICK;
    this.previousMode_ = null;
    this.activeActionKey_ = null;
    this.rootScope_ = $rootScope;
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(document, 'keydown', this.handleKeyDown_, this);
    Object(ol_events_js__WEBPACK_IMPORTED_MODULE_4__["listen"])(document, 'keyup', this.handleKeyUp_, this);
  }

  var _proto = QueryModeSelector.prototype;

  _proto.handleKeyDown_ = function handleKeyDown_(evt) {
    if (!(evt instanceof KeyboardEvent)) {
      return;
    }

    if (this.pending) {
      return;
    }

    var key = evt.key;

    if (this.keysAction_.includes(key) && !this.previousAction_) {
      this.previousAction_ = this.action;
      var newAction;

      switch (key) {
        case this.keyActionAdd_:
          newAction = ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__["default"].ADD;
          break;

        case this.keyActionRemove_:
          newAction = ngeo_query_Action_js__WEBPACK_IMPORTED_MODULE_1__["default"].REMOVE;
          break;

        default:
          break;
      }

      if (newAction) {
        this.action = newAction;
        this.activeActionKey_ = key;
        this.rootScope_.$apply();
      }
    } else if (Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_3__["isEventUsinCtrlKey"])(evt) && !this.previousMode_) {
      this.previousMode_ = this.mode;
      this.mode = ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_BOX;
      this.rootScope_.$apply();
    }
  };

  _proto.handleKeyUp_ = function handleKeyUp_(evt) {
    if (!(evt instanceof KeyboardEvent)) {
      return;
    }

    var updateScope = false;

    if (Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_3__["isEventUsinCtrlKey"])(evt) && this.previousMode_) {
      if (this.pending) {
        this.wasPending_ = true;
      } else {
        this.mode = this.previousMode_;
        this.previousMode_ = null;
        updateScope = true;
      }
    }

    var key = evt.key;

    if (this.activeActionKey_ === key && this.previousAction_) {
      this.action = this.previousAction_;
      this.previousAction_ = null;
      this.activeActionKey_ = null;
      updateScope = true;
    }

    if (updateScope) {
      this.rootScope_.$apply();
    }
  };

  _createClass(QueryModeSelector, [{
    key: "action",
    get: function get() {
      return this.action_;
    },
    set: function set(action) {
      this.action_ = action;
    }
  }, {
    key: "mode",
    get: function get() {
      return this.mode_;
    },
    set: function set(mode) {
      this.mode_ = mode;
    }
  }, {
    key: "pending",
    get: function get() {
      return this.pending_;
    },
    set: function set(pending) {
      this.pending_ = pending;

      if (!pending && this.wasPending_ && this.previousMode_) {
        this.wasPending_ = false;
        this.mode = this.previousMode_;
        this.previousMode_ = null;
      }
    }
  }]);

  return QueryModeSelector;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQueryModeSelector', []);
module.service('ngeoQueryModeSelector', QueryModeSelector);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/query/Querent.js":
/*!******************************!*\
  !*** ./src/query/Querent.js ***!
  \******************************/
/*! exports provided: Querent, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Querent", function() { return Querent; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/datasource/OGC.js */ "./src/datasource/OGC.js");
/* harmony import */ var ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/filter/RuleHelper.js */ "./src/filter/RuleHelper.js");
/* harmony import */ var ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/misc/WMSTime.js */ "./src/misc/WMSTime.js");
/* harmony import */ var ol_format_filter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/format/filter.js */ "./node_modules/ol/format/filter.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
/* harmony import */ var ngeo_WFSDescribeFeatureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngeo/WFSDescribeFeatureType.js */ "./src/WFSDescribeFeatureType.js");
/* harmony import */ var ol_format_WMSCapabilities_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/format/WMSCapabilities.js */ "./node_modules/ol/format/WMSCapabilities.js");
/* harmony import */ var ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/format/WMTSCapabilities.js */ "./node_modules/ol/format/WMTSCapabilities.js");
/* harmony import */ var ol_uri_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/uri.js */ "./node_modules/ol/uri.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/source/ImageWMS.js */ "./node_modules/ol/source/ImageWMS.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }













var Querent = function () {
  Querent.$inject = ["$http", "$q", "ngeoRuleHelper", "ngeoWMSTime"];

  function Querent($http, $q, ngeoRuleHelper, ngeoWMSTime) {
    this.http_ = $http;
    this.q_ = $q;
    this.ngeoRuleHelper_ = ngeoRuleHelper;
    this.ngeoWMSTime_ = ngeoWMSTime;
    this.requestCancelers_ = [];
    this.wmsGetCapabilitiesPromises_ = {};
    this.wmtsGetCapabilitiesPromises_ = {};
  }

  var _proto = Querent.prototype;

  _proto.issue = function issue(options) {
    var promises = [];
    var map = options.map;
    this.cancelStillRunningRequests_();
    var queryableDataSources;

    if (options.queryableDataSources) {
      queryableDataSources = options.queryableDataSources;
    } else {
      var dataSources = options.dataSources;
      console.assert(dataSources, 'DataSources should be set');
      queryableDataSources = this.getQueryableDataSources(dataSources, map);
    }

    var combinedWFSDataSources = this.getCombinableWFSDataSources_(queryableDataSources.wfs);
    promises.push(this.issueCombinedWFS_(combinedWFSDataSources, options));
    var coordinate = options.coordinate;

    if (coordinate) {
      var combinedWMSDataSources = this.getCombinableWMSDataSources_(queryableDataSources.wms);
      promises.push(this.issueCombinedWMS_(combinedWMSDataSources, options));
    }

    return this.q_.all(promises).then(handleCombinedQueryResult_);
  };

  _proto.getQueryableDataSources = function getQueryableDataSources(dataSources, map) {
    var queryableDataSources = {
      wfs: [],
      wms: []
    };
    var resolution = map.getView().getResolution();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    for (var _iterator = _createForOfIteratorHelperLoose(dataSources), _step; !(_step = _iterator()).done;) {
      var dataSource = _step.value;

      if (!this.isDataSourceQueryable_(dataSource, resolution)) {
        continue;
      }

      if (dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
        if (dataSource.supportsWFS) {
          queryableDataSources.wfs.push(dataSource);
        } else {
          queryableDataSources.wms.push(dataSource);
        }
      }
    }

    return queryableDataSources;
  };

  _proto.wfsDescribeFeatureType = function wfsDescribeFeatureType(dataSource) {
    if (!dataSource.supportsAttributes) {
      throw "The data source must support WFS, have a single OGCLayer that\n      is queryable in order to issue WFS DescribeFeatureType requests";
    }

    if (!dataSource.wfsUrl) {
      throw new Error('Missing WFS URL');
    }

    var wfsLayerNames = dataSource.getWFSLayerNames();
    var url = Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_9__["appendParams"])(dataSource.wfsUrl, {
      'REQUEST': 'DescribeFeatureType',
      'SERVICE': 'WFS',
      'VERSION': '2.0.0',
      'TYPENAME': wfsLayerNames
    });
    return this.http_.get(url).then(function (response) {
      var format = new ngeo_WFSDescribeFeatureType_js__WEBPACK_IMPORTED_MODULE_6__["default"]();
      return format.read(response.data);
    });
  };

  _proto.wmsFindLayerCapability = function wmsFindLayerCapability(layerCapabilities, layerName) {
    var found = null;

    for (var _iterator2 = _createForOfIteratorHelperLoose(layerCapabilities), _step2; !(_step2 = _iterator2()).done;) {
      var layerCapability = _step2.value;

      if (layerCapability.Name === layerName) {
        found = layerCapability;
        break;
      } else if (layerCapability.Layer) {
        found = this.wmsFindLayerCapability(layerCapability.Layer, layerName);

        if (found) {
          break;
        }
      }
    }

    return found;
  };

  _proto.wmsGetCapabilities = function wmsGetCapabilities(baseUrl, opt_cache) {
    var cache = opt_cache !== false;
    var params = {
      'REQUEST': 'GetCapabilities',
      'SERVICE': 'WMS',
      'VERSION': '1.3.0'
    };
    var url = Object(ol_uri_js__WEBPACK_IMPORTED_MODULE_9__["appendParams"])(baseUrl, params);
    var promise;

    if (!cache || !this.wmsGetCapabilitiesPromises_[baseUrl]) {
      promise = this.http_.get(url).then(function (response) {
        var format = new ol_format_WMSCapabilities_js__WEBPACK_IMPORTED_MODULE_7__["default"]();
        return format.read(response.data);
      });
    } else if (cache && this.wmsGetCapabilitiesPromises_[baseUrl]) {
      promise = this.wmsGetCapabilitiesPromises_[baseUrl];
    }

    if (!promise) {
      throw new Error('Missing promise');
    }

    if (cache && !this.wmsGetCapabilitiesPromises_[baseUrl]) {
      this.wmsGetCapabilitiesPromises_[baseUrl] = promise;
    }

    return promise;
  };

  _proto.wmtsFindLayerCapability = function wmtsFindLayerCapability(layerCapabilities, layerName) {
    var found = null;

    for (var _iterator3 = _createForOfIteratorHelperLoose(layerCapabilities), _step3; !(_step3 = _iterator3()).done;) {
      var layerCapability = _step3.value;

      if (layerCapability.Identifier === layerName) {
        found = layerCapability;
        break;
      }
    }

    return found;
  };

  _proto.wmtsGetCapabilities = function wmtsGetCapabilities(url, opt_cache) {
    var cache = opt_cache !== false;
    var promise;

    if (!cache || !this.wmtsGetCapabilitiesPromises_[url]) {
      promise = this.http_.get(url).then(function (response) {
        var format = new ol_format_WMTSCapabilities_js__WEBPACK_IMPORTED_MODULE_8__["default"]();
        return format.read(response.data);
      });
    } else if (cache && this.wmtsGetCapabilitiesPromises_[url]) {
      promise = this.wmtsGetCapabilitiesPromises_[url];
    }

    if (!promise) {
      throw new Error('Missing promise');
    }

    if (cache && !this.wmtsGetCapabilitiesPromises_[url]) {
      this.wmtsGetCapabilitiesPromises_[url] = promise;
    }

    return promise;
  };

  _proto.handleQueryResult_ = function handleQueryResult_(dataSources, limit, wfs, response) {
    var hash = {};

    for (var _iterator4 = _createForOfIteratorHelperLoose(dataSources), _step4; !(_step4 = _iterator4()).done;) {
      var dataSource = _step4.value;
      var dataSourceId = dataSource.id;

      if (typeof response === 'number') {
        var features = [];
        var tooManyFeatures = true;
        var totalFeatureCount = response;
        this.setUniqueIds_(features, dataSource.id);
        hash[dataSourceId] = {
          features: features,
          limit: limit,
          tooManyFeatures: tooManyFeatures,
          totalFeatureCount: totalFeatureCount
        };
      } else {
        var _features = dataSource instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] ? this.readAndTypeFeatures_(dataSource, response.data, wfs) : [];

        this.setUniqueIds_(_features, dataSource.id);
        hash[dataSourceId] = {
          features: _features,
          limit: limit
        };
      }
    }

    return hash;
  };

  _proto.readAndTypeFeatures_ = function readAndTypeFeatures_(dataSource, data, wfs) {
    var _this = this;

    var features = [];
    var readFeatures;
    var featureTypes = this.getSetOlFormatTypes_(dataSource, wfs).slice();
    featureTypes.forEach(function (type) {
      _this.getSetOlFormatTypes_(dataSource, wfs, [type]);

      if (wfs) {
        if (!dataSource.wfsFormat) {
          throw new Error('Missing wfsFormat');
        }

        readFeatures = dataSource.wfsFormat.readFeatures(data);
      } else {
        if (!dataSource.wmsFormat) {
          throw new Error('Missing wmsFormat');
        }

        readFeatures = dataSource.wmsFormat.readFeatures(data);
      }

      if (readFeatures.length > 0) {
        readFeatures.forEach(function (feature) {
          feature.set('ngeo_feature_type_', type);
          features.push(feature);
        });
      }
    });
    this.getSetOlFormatTypes_(dataSource, wfs, featureTypes);
    return features;
  };

  _proto.getSetOlFormatTypes_ = function getSetOlFormatTypes_(dataSource, wfs, opt_types) {
    var types;

    if (wfs) {
      if (!dataSource.wfsFormat) {
        throw new Error('Missing wfsFormat');
      }

      if (opt_types) {
        dataSource.wfsFormat.setFeatureType(opt_types);
      }

      types = dataSource.wfsFormat.getFeatureType();
    } else {
      if (!dataSource.wmsFormat) {
        throw new Error('Missing wmsFormat');
      }

      if (opt_types) {
        dataSource.wmsFormat.setLayers(opt_types);
      }

      types = dataSource.wmsFormat.getLayers();
    }

    if (!types) {
      return [];
    }

    return Array.isArray(types) ? types : [types];
  };

  _proto.issueCombinedWFS_ = function issueCombinedWFS_(combinedDataSources, options) {
    var _this2 = this;

    var promises = [];
    var maxFeatures = options.limit;
    var map = options.map;
    var view = map.getView();
    var resolution = view.getResolution();
    var projection = view.getProjection();
    var srsName = projection.getCode();
    var wfsCount = false;

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    var bbox;
    var coordinate = options.coordinate;

    if (coordinate) {
      var tolerance = options.tolerance;
      console.assert(tolerance);
      bbox = ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["buffer"](ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["createOrUpdateFromCoordinate"](coordinate), tolerance * resolution);
    } else {
      bbox = options.extent;
    }

    var wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_5__["default"]();
    var xmlSerializer = new XMLSerializer();
    var hasAtLeastOneQueryIconPosition = false;

    var _loop = function _loop() {
      var dataSources = _step5.value;
      var getFeatureCommonOptions = null;
      var featureTypesNames = [];
      var featureTypesObjects = [];
      var url = null;
      var params = {};

      if (options.bboxAsGETParam && bbox) {
        params.bbox = bbox.join(',');
      }

      var _loop2 = function _loop2() {
        var dataSource = _step6.value;
        var currentFeatureTypesNames = dataSource.getInRangeWFSLayerNames(resolution, true);
        var geometryName = dataSource.geometryName(currentFeatureTypesNames[0]);

        if (!getFeatureCommonOptions) {
          var featureNS = dataSource.wfsFeatureNS;
          var featurePrefix = dataSource.wfsFeaturePrefix;
          var outputFormat = dataSource.wfsOutputFormat;

          if (!geometryName) {
            throw new Error('Missing geometryName');
          }

          getFeatureCommonOptions = {
            bbox: bbox,
            featureNS: featureNS,
            featurePrefix: featurePrefix,
            geometryName: geometryName,
            outputFormat: outputFormat,
            srsName: srsName,
            featureTypes: []
          };
          url = dataSource.wfsUrl;
          Object.assign(params, dataSource.activeDimensions);
        }

        featureTypesNames = featureTypesNames.concat(currentFeatureTypesNames);
        var filter = null;

        if (options.filter) {
          filter = _this2.ngeoRuleHelper_.createFilter({
            dataSource: dataSource,
            filter: options.filter,
            incDimensions: true,
            incTime: true
          });
        } else if (dataSource.filterRules && dataSource.filterRules.length || dataSource.timeRangeValue || dataSource.dimensionsFiltersConfig && Object.keys(dataSource.dimensionsFiltersConfig).length > 0) {
          console.assert(dataSources.length === 1 || !(dataSource.timeRangeValue || dataSource.filterRules && dataSource.filterRules.length), "A data source having filterRules or timeRangeValue should issue\n            a single query, alone.");
          filter = _this2.ngeoRuleHelper_.createFilter({
            dataSource: dataSource,
            incDimensions: true,
            incTime: true,
            srsName: srsName
          });
        }

        if (options.geometry) {
          var spatialFilter = ol_format_filter_js__WEBPACK_IMPORTED_MODULE_4__["intersects"](geometryName, options.geometry, srsName);
          filter = _this2.ngeoRuleHelper_.joinFilters(filter, spatialFilter);
        }

        if (filter) {
          getFeatureCommonOptions.filter = filter;
        }

        if (coordinate) {
          var queryIconPosition;

          if (dataSource.queryIconPosition) {
            hasAtLeastOneQueryIconPosition = true;
            queryIconPosition = _this2.makeBboxWithQueryIconPosition_(dataSource.queryIconPosition, resolution, coordinate);
            console.assert(queryIconPosition !== null, 'Bad queryIconPosition values');
            queryIconPosition = ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["extend"](queryIconPosition, bbox);
          }

          currentFeatureTypesNames.forEach(function (name) {
            featureTypesObjects.push({
              geometryName: geometryName,
              name: name,
              bbox: queryIconPosition || bbox
            });
          });
        }
      };

      for (var _iterator6 = _createForOfIteratorHelperLoose(dataSources), _step6; !(_step6 = _iterator6()).done;) {
        _loop2();
      }

      if (!getFeatureCommonOptions) {
        throw new Error('Missing getFeatureCommonOptions');
      }

      if (hasAtLeastOneQueryIconPosition) {
        getFeatureCommonOptions.featureTypes = featureTypesObjects;
        delete getFeatureCommonOptions.bbox;
        delete getFeatureCommonOptions.geometryName;
      } else {
        getFeatureCommonOptions.featureTypes = featureTypesNames;
      }

      if (!url) {
        throw new Error('Missing url');
      }

      var getFeatureDefer = _this2.q_.defer();

      promises.push(getFeatureDefer.promise.then(_this2.handleQueryResult_.bind(_this2, dataSources, maxFeatures, true)));
      var countPromise = void 0;

      if (wfsCount) {
        var getCountOptions = Object.assign({
          resultType: 'hits'
        }, getFeatureCommonOptions);
        var featureCountXml = wfsFormat.writeGetFeature(getCountOptions);
        var featureCountRequest = xmlSerializer.serializeToString(featureCountXml);

        var canceler = _this2.registerCanceler_();

        countPromise = _this2.http_.post(url, featureCountRequest, {
          params: params,
          headers: {
            'Content-Type': 'text/xml; charset=UTF-8'
          },
          timeout: canceler.promise
        }).then(function (response) {
          if (!dataSources[0].wfsFormat) {
            throw new Error('Missing wfsFormat');
          }

          var meta = dataSources[0].wfsFormat.readFeatureCollectionMetadata(response.data);

          if (!meta) {
            throw new Error('Missing meta');
          }

          return meta.numberOfFeatures;
        });
      } else {
        countPromise = _this2.q_.resolve();
      }

      var afterCount_ = function afterCount_(numberOfFeatures) {
        if (numberOfFeatures === undefined || numberOfFeatures < maxFeatures) {
          var getFeatureOptions = Object.assign({
            maxFeatures: maxFeatures
          }, getFeatureCommonOptions);
          var featureRequestXml = wfsFormat.writeGetFeature(getFeatureOptions);
          var featureRequest = xmlSerializer.serializeToString(featureRequestXml);

          if (typeof url !== 'string') {
            throw new Error('Wrong URL type');
          }

          var _canceler = _this2.registerCanceler_();

          _this2.http_.post(url, featureRequest, {
            params: params,
            headers: {
              'Content-Type': 'text/xml; charset=UTF-8'
            },
            timeout: _canceler.promise
          }).then(function (response) {
            getFeatureDefer.resolve(response);
          });
        } else {
          getFeatureDefer.resolve(numberOfFeatures);
        }

        return null;
      };

      countPromise.then(afterCount_);
    };

    for (var _iterator5 = _createForOfIteratorHelperLoose(combinedDataSources), _step5; !(_step5 = _iterator5()).done;) {
      _loop();
    }

    return this.q_.all(promises).then(handleCombinedQueryResult_);
  };

  _proto.makeBboxWithQueryIconPosition_ = function makeBboxWithQueryIconPosition_(queryIconPosition, resolution, coordinate) {
    var bbox = ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["createOrUpdateFromCoordinate"](coordinate);
    var buffers = queryIconPosition.map(function (value) {
      return value * resolution;
    });
    var length = buffers.length;

    if (!length || length > 4) {
      return null;
    }

    if (length === 1) {
      return ol_extent_js__WEBPACK_IMPORTED_MODULE_10__["buffer"](bbox, buffers[0]);
    }

    var fourValuesBuffers = [buffers[0], buffers[1], length === 2 ? buffers[0] : buffers[2], length === 4 ? buffers[3] : buffers[1]];
    return [bbox[0] - fourValuesBuffers[1], bbox[1] - fourValuesBuffers[0], bbox[2] + fourValuesBuffers[3], bbox[3] + fourValuesBuffers[2]];
  };

  _proto.issueCombinedWMS_ = function issueCombinedWMS_(combinedDataSources, options) {
    var promises = [];
    var FEATURE_COUNT = options.limit;
    var map = options.map;
    var view = map.getView();
    var resolution = view.getResolution();
    var projection = view.getProjection();
    var projCode = projection.getCode();

    if (resolution === undefined) {
      throw new Error('Missing resolution');
    }

    var coordinate = options.coordinate;

    if (!coordinate) {
      throw new Error('Missing coordinate');
    }

    for (var _iterator7 = _createForOfIteratorHelperLoose(combinedDataSources), _step7; !(_step7 = _iterator7()).done;) {
      var dataSources = _step7.value;
      var url = void 0;
      var LAYERS = [];
      var INFO_FORMAT = void 0;
      var activeDimensionsSet = false;
      var params = {};
      var filterString = null;
      var filtrableLayerName = null;

      for (var _iterator8 = _createForOfIteratorHelperLoose(dataSources), _step8; !(_step8 = _iterator8()).done;) {
        var dataSource = _step8.value;

        if (!INFO_FORMAT) {
          INFO_FORMAT = dataSource.wmsInfoFormat;
          url = dataSource.wmsUrl;
        }

        LAYERS = LAYERS.concat(dataSource.getWMSLayerNames(true));

        if (!activeDimensionsSet) {
          Object.assign(params, dataSource.activeDimensions);
          activeDimensionsSet = true;
        }

        if (dataSource.filterRules && dataSource.filterRules.length) {
          console.assert(dataSources.length === 1);
          filtrableLayerName = dataSource.getFiltrableWFSLayerName();
          filterString = this.ngeoRuleHelper_.createFilterString({
            dataSource: dataSource,
            srsName: projCode
          });
        }

        if (dataSource.timeRangeValue && dataSource.timeProperty) {
          console.assert(dataSources.length === 1);
          params.TIME = this.ngeoWMSTime_.formatWMSTimeParam(dataSource.timeProperty, dataSource.timeRangeValue);
        }
      }

      params.LAYERS = LAYERS;
      params.QUERY_LAYERS = LAYERS;

      if (filterString && filtrableLayerName) {
        var filterParamValue = null;

        if (LAYERS.length === 1) {
          filterParamValue = filterString;
        } else {
          var filterParamValues = [];

          for (var i = 0, ii = LAYERS.length; i < ii; i++) {
            if (LAYERS[i] === filtrableLayerName) {
              filterParamValues.push("(" + filterString + ")");
            } else {
              filterParamValues.push('()');
            }
          }

          filterParamValue = filterParamValues.join('');
        }

        params.FILTER = filterParamValue;
      }

      if (!url) {
        throw new Error('Missing url');
      }

      var wmsSource = new ol_source_ImageWMS_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
        params: params,
        url: url,
        projection: map.getView().getProjection()
      });
      var wmsGetFeatureInfoUrl = wmsSource.getFeatureInfoUrl(coordinate, resolution, projCode, {
        'FEATURE_COUNT': FEATURE_COUNT,
        'INFO_FORMAT': INFO_FORMAT
      });

      if (!wmsGetFeatureInfoUrl) {
        throw new Error('Missing wmsGetFeatureInfoUrl');
      }

      var canceler = this.registerCanceler_();
      promises.push(this.http_.get(wmsGetFeatureInfoUrl, {
        timeout: canceler.promise
      }).then(this.handleQueryResult_.bind(this, dataSources, FEATURE_COUNT, false)));
    }

    return this.q_.all(promises).then(handleCombinedQueryResult_);
  };

  _proto.getCombinableWFSDataSources_ = function getCombinableWFSDataSources_(dataSources) {
    var combinableDataSources = [];
    var notCombinableDataSources = [];

    for (var _iterator9 = _createForOfIteratorHelperLoose(dataSources), _step9; !(_step9 = _iterator9()).done;) {
      var dataSource = _step9.value;

      if (dataSource.combinableForWFS) {
        var combined = false;

        for (var _iterator10 = _createForOfIteratorHelperLoose(combinableDataSources), _step10; !(_step10 = _iterator10()).done;) {
          var combinableDataSource = _step10.value;

          if (dataSource.combinableWithDataSourceForWFS(combinableDataSource[0])) {
            combinableDataSource.push(dataSource);
            combined = true;
          }
        }

        if (!combined) {
          combinableDataSources.push([dataSource]);
        }
      } else {
        notCombinableDataSources.push([dataSource]);
      }
    }

    return combinableDataSources.concat(notCombinableDataSources);
  };

  _proto.getCombinableWMSDataSources_ = function getCombinableWMSDataSources_(dataSources) {
    var combinableDataSources = [];
    var notCombinableDataSources = [];

    for (var _iterator11 = _createForOfIteratorHelperLoose(dataSources), _step11; !(_step11 = _iterator11()).done;) {
      var dataSource = _step11.value;

      if (dataSource.combinableForWMS) {
        var combined = false;

        for (var _iterator12 = _createForOfIteratorHelperLoose(combinableDataSources), _step12; !(_step12 = _iterator12()).done;) {
          var combinableDataSource = _step12.value;

          if (dataSource.combinableWithDataSourceForWMS(combinableDataSource[0])) {
            combinableDataSource.push(dataSource);
            combined = true;
          }
        }

        if (!combined) {
          combinableDataSources.push([dataSource]);
        }
      } else {
        notCombinableDataSources.push([dataSource]);
      }
    }

    return combinableDataSources.concat(notCombinableDataSources);
  };

  _proto.isDataSourceQueryable_ = function isDataSourceQueryable_(ds, res) {
    var queryable = ds.visible && ds.inRange && ds.queryable;

    if (queryable && ds instanceof ngeo_datasource_OGC_js__WEBPACK_IMPORTED_MODULE_1__["default"] && ds.supportsWFS) {
      var ogcDS = ds;
      queryable = ogcDS.isAnyOGCLayerInRange(res, true);
    }

    return queryable;
  };

  _proto.setUniqueIds_ = function setUniqueIds_(features, dataSourceId) {
    features.forEach(function (feature) {
      if (feature.getId() !== undefined) {
        var id = dataSourceId + "_" + feature.getId();
        feature.setId(id);
      }
    });
  };

  _proto.registerCanceler_ = function registerCanceler_() {
    var canceler = this.q_.defer();
    this.requestCancelers_.push(canceler);
    return canceler;
  };

  _proto.cancelStillRunningRequests_ = function cancelStillRunningRequests_() {
    for (var _iterator13 = _createForOfIteratorHelperLoose(this.requestCancelers_), _step13; !(_step13 = _iterator13()).done;) {
      var canceler = _step13.value;
      canceler.resolve();
    }

    this.requestCancelers_.length = 0;
  };

  return Querent;
}();

function handleCombinedQueryResult_(response) {
  var combinedHash = {};

  for (var _iterator14 = _createForOfIteratorHelperLoose(response), _step14; !(_step14 = _iterator14()).done;) {
    var hash = _step14.value;

    for (var dataSourceIdStr in hash) {
      var dataSourceId = Number(dataSourceIdStr);
      combinedHash[dataSourceId] = hash[dataSourceId];
    }
  }

  return combinedHash;
}

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQuerent', [ngeo_filter_RuleHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_misc_WMSTime_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]);
module.service('ngeoQuerent', Querent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/query/component.js":
/*!********************************!*\
  !*** ./src/query/component.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/events.js */ "./src/events.js");
/* harmony import */ var ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Mode.js */ "./src/query/Mode.js");
/* harmony import */ var ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/query/ModeSelector.js */ "./src/query/ModeSelector.js");
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_events_condition_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/events/condition.js */ "./node_modules/ol/events/condition.js");
/* harmony import */ var ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/interaction/Draw.js */ "./node_modules/ol/interaction/Draw.js");
/* harmony import */ var ol_layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/layer.js */ "./node_modules/ol/layer.js");
/* harmony import */ var ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/MapBrowserEvent.js */ "./node_modules/ol/MapBrowserEvent.js");
/* harmony import */ var ol_source_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/source.js */ "./node_modules/ol/source.js");











var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQuery', [ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_4__["default"].name]);

var QueryController = function () {
  QueryController.$inject = ["ngeoMapQuerent", "ngeoQueryModeSelector", "$scope", "ngeoQueryOptions"];

  function QueryController(ngeoMapQuerent, ngeoQueryModeSelector, $scope, ngeoQueryOptions) {
    var _this = this;

    this.active;
    this.autoclear;
    this.map;
    this.ngeoMapQuerent_ = ngeoMapQuerent;
    this.ngeoQueryModeSelector_ = ngeoQueryModeSelector;
    this.ngeoQueryOptions_ = ngeoQueryOptions;
    this.scope_ = $scope;
    this.vectorSource_ = new ol_source_js__WEBPACK_IMPORTED_MODULE_10__["Vector"]({
      wrapX: false
    });
    this.vectorLayer_ = new ol_layer_js__WEBPACK_IMPORTED_MODULE_8__["Vector"]({
      source: this.vectorSource_
    });
    this.drawBoxInteraction_ = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      condition: ol_events_condition_js__WEBPACK_IMPORTED_MODULE_6__["always"],
      geometryFunction: Object(ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__["createBox"])(),
      source: this.vectorSource_,
      stopClick: true,
      type: 'Circle'
    });
    this.drawPolygonInteraction_ = new ol_interaction_Draw_js__WEBPACK_IMPORTED_MODULE_7__["default"]({
      condition: ol_events_condition_js__WEBPACK_IMPORTED_MODULE_6__["always"],
      source: this.vectorSource_,
      stopClick: true,
      type: 'Polygon'
    });
    this.listenerKeys_ = [];
    this.mode_ = null;
    $scope.$watch(function () {
      return _this.active;
    }, this.handleActiveChange_.bind(this));
    $scope.$watch(function () {
      var value = null;

      if (_this.active) {
        value = _this.ngeoQueryModeSelector_.mode;
      }

      return value;
    }, this.enableMode_.bind(this));
  }

  var _proto = QueryController.prototype;

  _proto.$onInit = function $onInit() {
    this.autoclear = !!this.autoclear;
  };

  _proto.$onDestroy = function $onDestroy() {
    this.enableMode_(null);
  };

  _proto.enableMode_ = function enableMode_(mode) {
    this.disableMode_();

    if (!mode) {
      return;
    }

    switch (mode) {
      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].CLICK:
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.map, 'singleclick', this.handleMapClick_, this));

        if (this.ngeoQueryOptions_.cursorHover) {
          this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.map, 'pointermove', this.handleMapPointerMove_, this));
        }

        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_BOX:
        this.map.addLayer(this.vectorLayer_);
        this.map.addInteraction(this.drawBoxInteraction_);
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.drawBoxInteraction_, 'drawend', this.handleDrawBoxInteractionDrawEnd_, this));
        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_POLYGON:
        this.map.addLayer(this.vectorLayer_);
        this.map.addInteraction(this.drawPolygonInteraction_);
        this.listenerKeys_.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_5__["listen"])(this.drawPolygonInteraction_, 'drawend', this.handleDrawPolygonInteractionDrawEnd_, this));
        break;

      default:
        break;
    }

    this.mode_ = mode;
  };

  _proto.disableMode_ = function disableMode_() {
    if (!this.mode_) {
      return;
    }

    switch (this.mode_) {
      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].CLICK:
        if (this.ngeoQueryOptions_.cursorHover) {
          this.map.getTargetElement().style.cursor = '';
        }

        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_BOX:
        this.vectorSource_.clear();
        this.map.removeLayer(this.vectorLayer_);
        this.map.removeInteraction(this.drawBoxInteraction_);
        break;

      case ngeo_query_Mode_js__WEBPACK_IMPORTED_MODULE_2__["default"].DRAW_POLYGON:
        this.vectorSource_.clear();
        this.map.removeLayer(this.vectorLayer_);
        this.map.removeInteraction(this.drawPolygonInteraction_);
        break;

      default:
        break;
    }

    Object(ngeo_events_js__WEBPACK_IMPORTED_MODULE_1__["unlistenByKeys"])(this.listenerKeys_);
    this.mode_ = null;
  };

  _proto.getLimitOption_ = function getLimitOption_() {
    return this.ngeoQueryOptions_ && this.ngeoQueryOptions_.limit ? this.ngeoQueryOptions_.limit : undefined;
  };

  _proto.handleActiveChange_ = function handleActiveChange_(active) {
    if (!active) {
      if (this.autoclear) {
        this.ngeoMapQuerent_.clear();
      }
    }
  };

  _proto.handleDrawBoxInteractionDrawEnd_ = function handleDrawBoxInteractionDrawEnd_(evt) {
    var _this2 = this;

    var feature = evt.feature;
    var action = this.ngeoQueryModeSelector_.action;
    var extent = feature.getGeometry().getExtent();
    var limit = this.getLimitOption_();
    var map = this.map;
    this.ngeoQueryModeSelector_.pending = true;
    this.ngeoMapQuerent_.issue({
      action: action,
      extent: extent,
      limit: limit,
      map: map
    }).then(function () {}).catch(function () {}).then(function () {
      _this2.vectorSource_.clear();

      _this2.ngeoQueryModeSelector_.pending = false;
    });
  };

  _proto.handleDrawPolygonInteractionDrawEnd_ = function handleDrawPolygonInteractionDrawEnd_(evt) {
    var _this3 = this;

    var feature = evt.feature;
    var action = this.ngeoQueryModeSelector_.action;
    var geometry = feature.getGeometry();
    var limit = this.getLimitOption_();
    var map = this.map;
    this.ngeoQueryModeSelector_.pending = true;
    this.ngeoMapQuerent_.issue({
      action: action,
      geometry: geometry,
      limit: limit,
      map: map
    }).then(function () {}).catch(function () {}).then(function () {
      _this3.vectorSource_.clear();

      _this3.ngeoQueryModeSelector_.pending = false;
    });
  };

  _proto.handleMapClick_ = function handleMapClick_(evt) {
    var _this4 = this;

    if (!(evt instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_9__["default"])) {
      return;
    }

    var action = this.ngeoQueryModeSelector_.action;
    var coordinate = evt.coordinate;
    var map = this.map;
    this.ngeoQueryModeSelector_.pending = true;
    this.ngeoMapQuerent_.issue({
      action: action,
      coordinate: coordinate,
      map: map
    }).then(function () {}).catch(function () {}).then(function () {
      _this4.ngeoQueryModeSelector_.pending = false;
    });
  };

  _proto.handleMapPointerMove_ = function handleMapPointerMove_(evt) {
    if (!(evt instanceof ol_MapBrowserEvent_js__WEBPACK_IMPORTED_MODULE_9__["default"]) || evt.dragging) {
      return;
    }

    var pixel = this.map.getEventPixel(evt.originalEvent);

    var queryable = function queryable(layer) {
      var visible = layer.get('visible');
      var sourceids = layer.get('querySourceIds');
      return visible && !!sourceids;
    };

    var hit = this.map.forEachLayerAtPixel(pixel, function () {
      return true;
    }, {
      layerFilter: queryable
    });
    this.map.getTargetElement().style.cursor = hit ? 'pointer' : '';
  };

  return QueryController;
}();

module.component('ngeoQuery', {
  bindings: {
    'active': '=',
    'autoclear': '=?',
    'map': '<'
  },
  controller: QueryController
});
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/query/module.js":
/*!*****************************!*\
  !*** ./src/query/module.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/query/ModeSelector.js */ "./src/query/ModeSelector.js");
/* harmony import */ var ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/query/Querent.js */ "./src/query/Querent.js");
/* harmony import */ var ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/query/MapQuerent.js */ "./src/query/MapQuerent.js");
/* harmony import */ var ngeo_query_component_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngeo/query/component.js */ "./src/query/component.js");
/* harmony import */ var ngeo_query_panelComponent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngeo/query/panelComponent.js */ "./src/query/panelComponent.js");






/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQueryModule', [ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_query_Querent_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_query_MapQuerent_js__WEBPACK_IMPORTED_MODULE_3__["default"].name, ngeo_query_component_js__WEBPACK_IMPORTED_MODULE_4__["default"].name, ngeo_query_panelComponent_js__WEBPACK_IMPORTED_MODULE_5__["default"].name]));

/***/ }),

/***/ "./src/query/panelComponent.html":
/*!***************************************!*\
  !*** ./src/query/panelComponent.html ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function(obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div\n  class="btn-group"\n>\n  <button\n    data-toggle="tooltip"\n    title="{{\'While active, click on the map to issue a query\' | translate}}"\n    class="btn btn-default"\n    ng-class="{active: $ctrl.ngeoQueryModeSelector.mode === \'click\'}"\n    ng-click="$ctrl.ngeoQueryModeSelector.mode = \'click\'"\n  >\n    ' +
((__t = (__webpack_require__(/*! ngeo/icons/point.svg?viewbox&height=1em */ "./src/icons/point.svg?viewbox&height=1em"))) == null ? '' : __t) +
'\n  </button>\n  <button\n    data-toggle="tooltip"\n    title="{{\'While active, click twice the map to issue a query using a box\' | translate}}"\n    class="btn btn-default"\n    ng-class="{active: $ctrl.ngeoQueryModeSelector.mode === \'drawbox\'}"\n    ng-click="$ctrl.ngeoQueryModeSelector.mode = \'drawbox\'"\n  >\n    ' +
((__t = (__webpack_require__(/*! ngeo/icons/rectangle.svg?viewbox&height=1em */ "./src/icons/rectangle.svg?viewbox&height=1em"))) == null ? '' : __t) +
'\n  </button>\n  <button\n    data-toggle="tooltip"\n    title="{{\'While active, click on the map multiple times to draw a polygon, which will issue a query using it\' | translate}}"\n    class="btn btn-default"\n    ng-class="{active: $ctrl.ngeoQueryModeSelector.mode === \'drawpolygon\'}"\n    ng-click="$ctrl.ngeoQueryModeSelector.mode = \'drawpolygon\'"\n  >\n    ' +
((__t = (__webpack_require__(/*! ngeo/icons/polygon.svg?viewbox&height=1em */ "./src/icons/polygon.svg?viewbox&height=1em"))) == null ? '' : __t) +
'\n  </button>\n</div>\n\n<div class="ngeo-query-panel-actions">\n  <div class="form-check">\n    <label class="form-check-label">\n      <input\n        type="radio"\n        class="form-check-input"\n        ng-model="$ctrl.ngeoQueryModeSelector.action"\n        value="add"\n      >\n        <span>{{\'Add\' | translate }}</span>\n      </input>\n    </label>\n  </div>\n  <div class="form-check">\n    <label class="form-check-label">\n      <input\n        type="radio"\n        class="form-check-input"\n        ng-model="$ctrl.ngeoQueryModeSelector.action"\n        value="remove"\n      >\n        <span>{{\'Remove\' | translate }}</span>\n      </input>\n    </label>\n  </div>\n  <div class="form-check">\n    <label class="form-check-label">\n      <input\n        type="radio"\n        class="form-check-input"\n        ng-model="$ctrl.ngeoQueryModeSelector.action"\n        value="replace"\n      >\n        <span>{{\'Replace\' | translate }}</span>\n      </input>\n    </label>\n  </div>\n</div>\n\n<div class="ngeo-query-panel-help">\n  <span\n    ng-show="$ctrl.ngeoQueryModeSelector.mode === \'click\'"\n  >{{\'Query by "click" on the map is currently active. All queryable layers, including WMS and WFS, will return results.\' | translate }}</span>\n  <span\n    ng-show="$ctrl.ngeoQueryModeSelector.mode === \'drawbox\'"\n  >{{\'Query by "box" on the map is currently active. Not all queryable layers will return results. Only those that support WFS will do so.\' | translate }}</span>\n  <span\n    ng-show="$ctrl.ngeoQueryModeSelector.mode === \'drawpolygon\'"\n  >{{\'Query by "polygon" on the map is currently active. Not all queryable layers will return results. Only those that support WFS will do so.\' | translate }}</span>\n</div>\n';

}
return __p
}

/***/ }),

/***/ "./src/query/panelComponent.js":
/*!*************************************!*\
  !*** ./src/query/panelComponent.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/query/ModeSelector.js */ "./src/query/ModeSelector.js");


var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoQueryPanel', [ngeo_query_ModeSelector_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.run(["$templateCache", function ($templateCache) {
  $templateCache.put('ngeo/src/query/panelComponent', __webpack_require__(/*! ./panelComponent.html */ "./src/query/panelComponent.html"));
}]);
module.value('ngeoQueryPanelTemplateUrl', function ($attrs) {
  var templateUrl = $attrs.ngeoQueryPanelTemplateUrl;
  return templateUrl !== undefined ? templateUrl : 'ngeo/src/query/panelComponent';
});
ngeoQueryPanelTemplateUrl.$inject = ["$attrs", "ngeoQueryPanelTemplateUrl"];

function ngeoQueryPanelTemplateUrl($attrs, ngeoQueryPanelTemplateUrl) {
  return ngeoQueryPanelTemplateUrl($attrs);
}

var QueryPanelController = function QueryPanelController(ngeoQueryModeSelector) {
  this.ngeoQueryModeSelector = ngeoQueryModeSelector;
};

QueryPanelController.$inject = ["ngeoQueryModeSelector"];
QueryPanelController.$inject = ["ngeoQueryModeSelector"];
module.component('ngeoQueryPanel', {
  controller: QueryPanelController,
  templateUrl: ngeoQueryPanelTemplateUrl
});
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/rule/Date.js":
/*!**************************!*\
  !*** ./src/rule/Date.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }




var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    options.type = options.type || ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].DATE;
    return _ngeoRuleRule.call(this, options) || this;
  }

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/rule/Geometry.js":
/*!******************************!*\
  !*** ./src/rule/Geometry.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }







var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    var _this;

    options.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].GEOMETRY;
    _this = _ngeoRuleRule.call(this, options) || this;
    var properties = options.featureProperties || {};
    _this.feature_ = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_3__["default"](properties);
    _this.format_ = new ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_4__["default"]();
    _this.updatingExpression_ = false;
    _this.updatingGeometry_ = false;
    _this.geometryChangeListenerKey_ = null;

    _this.listenerKeys.push(Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(_this.feature_, "change:" + _this.feature.getGeometryName(), _this.handleFeatureGeometryChange_, _assertThisInitialized(_this)));

    _this.setGeometryFromExpression_();

    return _this;
  }

  var _proto = _default.prototype;

  _proto.setExpression = function setExpression(expression) {
    this.updatingExpression_ = true;

    _ngeoRuleRule.prototype.setExpression.call(this, expression);

    if (!this.updatingGeometry_) {
      this.setGeometryFromExpression_();
    }

    this.registerGeometryChange_();
    this.updatingExpression_ = false;
  };

  _proto.handleFeatureGeometryChange_ = function handleFeatureGeometryChange_() {
    if (this.updatingExpression_) {
      return;
    }

    this.updatingGeometry_ = true;
    var geometry = this.feature_.getGeometry();

    if (geometry) {
      this.expression = this.format_.writeGeometry(geometry);
    } else {
      this.expression = null;
    }

    this.registerGeometryChange_();
    this.updatingGeometry_ = false;
  };

  _proto.handleGeometryChange_ = function handleGeometryChange_(evt) {
    var geometry = evt.target;
    this.updatingGeometry_ = true;
    this.expression = this.format_.writeGeometry(geometry);
    this.updatingGeometry_ = false;
  };

  _proto.setGeometryFromExpression_ = function setGeometryFromExpression_() {
    var geometry = null;

    if (this.expression) {
      var expression = "" + this.expression;
      geometry = this.format_.readGeometry(expression);
    }

    this.geometry = geometry;
  };

  _proto.registerGeometryChange_ = function registerGeometryChange_() {
    if (this.geometryChangeListenerKey_ !== null) {
      Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["unlistenByKey"])(this.geometryChangeListenerKey_);
      this.geometryChangeListenerKey_ = null;
    }

    var geometry = this.feature_.getGeometry();

    if (geometry) {
      this.geometryChangeListenerKey_ = Object(ol_events_js__WEBPACK_IMPORTED_MODULE_2__["listen"])(geometry, 'change', this.handleGeometryChange_, this);
    }
  };

  _createClass(_default, [{
    key: "feature",
    get: function get() {
      return this.feature_;
    }
  }, {
    key: "geometry",
    get: function get() {
      return this.feature_.getGeometry() || null;
    },
    set: function set(geometry) {
      this.feature_.setGeometry(geometry || undefined);
    }
  }]);

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/rule/Rule.js":
/*!**************************!*\
  !*** ./src/rule/Rule.js ***!
  \**************************/
/*! exports provided: RuleOperatorType, RuleSpatialOperatorType, RuleTemporalOperatorType, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleOperatorType", function() { return RuleOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleSpatialOperatorType", function() { return RuleSpatialOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuleTemporalOperatorType", function() { return RuleTemporalOperatorType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Rule; });
/* harmony import */ var ol_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events.js */ "./node_modules/ol/events.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }


var RuleOperatorType = {
  BETWEEN: '..',
  EQUAL_TO: '=',
  GREATER_THAN: '>',
  GREATER_THAN_OR_EQUAL_TO: '>=',
  LESSER_THAN: '<',
  LESSER_THAN_OR_EQUAL_TO: '<=',
  LIKE: '~',
  NOT_EQUAL_TO: '!='
};
var RuleSpatialOperatorType = {
  CONTAINS: 'contains',
  INTERSECTS: 'intersects',
  WITHIN: 'within'
};
var RuleTemporalOperatorType = {
  BEGINS: 'time_start',
  DURING: 'time_during',
  ENDS: 'time_end',
  EQUALS: 'time_equal'
};

var Rule = function () {
  function Rule(options) {
    this.active = options.active === true;
    this.expression = options.expression !== undefined ? options.expression : null;
    this.lowerBoundary = options.lowerBoundary !== undefined ? options.lowerBoundary : null;
    this.operator = options.operator || null;
    this.upperBoundary = options.upperBoundary !== undefined ? options.upperBoundary : null;
    this.isCustom_ = options.isCustom !== false;
    this.name_ = options.name;
    this.operators_ = options.operators || null;
    this.propertyName_ = options.propertyName;
    this.type_ = options.type;
    this.listenerKeys = [];
  }

  var _proto = Rule.prototype;

  _proto.getExpression = function getExpression() {
    return this.expression;
  };

  _proto.setExpression = function setExpression(expression) {
    this.expression = expression;
  };

  _proto.reset = function reset() {
    if (this.getExpression() !== null) {
      this.setExpression(null);
    }

    if (this.lowerBoundary !== null) {
      this.lowerBoundary = null;
    }

    if (this.upperBoundary !== null) {
      this.upperBoundary = null;
    }
  };

  _proto.destroy = function destroy() {
    this.listenerKeys.forEach(ol_events_js__WEBPACK_IMPORTED_MODULE_0__["unlistenByKey"]);
    this.listenerKeys.length = 0;
  };

  _createClass(Rule, [{
    key: "isCustom",
    get: function get() {
      return this.isCustom_;
    }
  }, {
    key: "name",
    get: function get() {
      return this.name_;
    }
  }, {
    key: "operators",
    get: function get() {
      return this.operators_;
    }
  }, {
    key: "propertyName",
    get: function get() {
      return this.propertyName_;
    }
  }, {
    key: "type",
    get: function get() {
      return this.type_;
    }
  }, {
    key: "value",
    get: function get() {
      var value = null;
      var expression = this.getExpression();
      var lowerBoundary = this.lowerBoundary;
      var operator = this.operator;
      var propertyName = this.propertyName;
      var upperBoundary = this.upperBoundary;

      if (operator) {
        if (operator === RuleOperatorType.BETWEEN || operator === RuleTemporalOperatorType.DURING) {
          if (lowerBoundary !== null && upperBoundary !== null) {
            value = {
              operator: operator,
              lowerBoundary: lowerBoundary,
              propertyName: propertyName,
              upperBoundary: upperBoundary
            };
          }
        } else {
          if (expression !== null) {
            value = {
              expression: expression,
              operator: operator,
              propertyName: propertyName
            };
          }
        }
      }

      return value;
    }
  }]);

  return Rule;
}();



/***/ }),

/***/ "./src/rule/Select.js":
/*!****************************!*\
  !*** ./src/rule/Select.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }




var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    var _this;

    options.operator = ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["RuleOperatorType"].EQUAL_TO;
    options.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].SELECT;
    _this = _ngeoRuleRule.call(this, options) || this;
    _this.choices_ = options.choices;
    return _this;
  }

  _createClass(_default, [{
    key: "choices",
    get: function get() {
      return this.choices_;
    }
  }, {
    key: "selectedChoices",
    get: function get() {
      var selectedChoices;

      if (this.expression) {
        var stringExpression = String(this.expression);
        selectedChoices = stringExpression.split(',');
      } else {
        selectedChoices = [];
      }

      return selectedChoices;
    }
  }]);

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/rule/Text.js":
/*!**************************!*\
  !*** ./src/rule/Text.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ngeo/format/AttributeType.js */ "./src/format/AttributeType.js");
/* harmony import */ var ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/rule/Rule.js */ "./src/rule/Rule.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }




var _default = function (_ngeoRuleRule) {
  _inheritsLoose(_default, _ngeoRuleRule);

  function _default(options) {
    options.operator = options.operator || ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["RuleOperatorType"].LIKE;
    options.type = ngeo_format_AttributeType_js__WEBPACK_IMPORTED_MODULE_0__["default"].TEXT;
    return _ngeoRuleRule.call(this, options) || this;
  }

  return _default;
}(ngeo_rule_Rule_js__WEBPACK_IMPORTED_MODULE_1__["default"]);



/***/ }),

/***/ "./src/sass/font.scss":
/*!****************************!*\
  !*** ./src/sass/font.scss ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./src/sass/jquery-ui.scss":
/*!*********************************!*\
  !*** ./src/sass/jquery-ui.scss ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./src/search/createGeoJSONBloodhound.js":
/*!***********************************************!*\
  !*** ./src/search/createGeoJSONBloodhound.js ***!
  \***********************************************/
/*! exports provided: createGeoJSONBloodhound, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGeoJSONBloodhound", function() { return createGeoJSONBloodhound; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/format/GeoJSON.js */ "./node_modules/ol/format/GeoJSON.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! corejs-typeahead */ "./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(corejs_typeahead__WEBPACK_IMPORTED_MODULE_2__);



function createGeoJSONBloodhound(url, opt_filter, opt_featureProjection, opt_dataProjection, opt_options, opt_remoteOptions) {
  var geojsonFormat = new ol_format_GeoJSON_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
  var bloodhoundOptions = {
    remote: {
      url: url,
      prepare: function prepare(query, settings) {
        if (settings.url) {
          settings.url = settings.url.replace('%QUERY', query);
        }

        return settings;
      },
      transform: function transform(parsedResponse) {
        var featureCollection = parsedResponse;

        if (opt_filter !== undefined) {
          featureCollection = {
            type: 'FeatureCollection',
            features: featureCollection.features.filter(opt_filter)
          };
        }

        return geojsonFormat.readFeatures(featureCollection, {
          featureProjection: opt_featureProjection,
          dataProjection: opt_dataProjection
        });
      }
    },
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  };
  var options = Object.assign({}, opt_options || {
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  });
  var remoteOptions = Object.assign({}, opt_remoteOptions || {});

  if (options.remote) {
    Object.assign(remoteOptions, options.remote);
    delete options.remote;
  }

  Object.assign(bloodhoundOptions, options);
  Object.assign(bloodhoundOptions.remote, remoteOptions);
  return new Bloodhound(bloodhoundOptions);
}
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSearchCreategeojsonbloodhound', []);
module.value('ngeoSearchCreateGeoJSONBloodhound', createGeoJSONBloodhound);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/search/createLocationSearchBloodhound.js":
/*!******************************************************!*\
  !*** ./src/search/createLocationSearchBloodhound.js ***!
  \******************************************************/
/*! exports provided: createLocationSearchBloodhoundFunction, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createLocationSearchBloodhoundFunction", function() { return createLocationSearchBloodhoundFunction; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_proj_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj.js */ "./node_modules/ol/proj.js");
/* harmony import */ var _geoblocks_proj_EPSG_21781_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @geoblocks/proj/EPSG_21781.js */ "./node_modules/@geoblocks/proj/src/EPSG_21781.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! corejs-typeahead */ "./node_modules/corejs-typeahead/dist/typeahead.bundle-exposed.js");
/* harmony import */ var corejs_typeahead__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(corejs_typeahead__WEBPACK_IMPORTED_MODULE_5__);







function createLocationSearchBloodhound(opt_options) {
  var options = opt_options || {};
  var sourceProjection = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["get"](_geoblocks_proj_EPSG_21781_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
  var targetProjection = options.targetProjection;

  var parseBbox = function parseBbox(bbox) {
    var regex = /BOX\((.*?) (.*?),(.*?) (.*?)\)/g;
    var match = regex.exec(bbox);

    if (match !== null) {
      return [parseFloat(match[1]), parseFloat(match[2]), parseFloat(match[3]), parseFloat(match[4])];
    } else {
      return null;
    }
  };

  var removeHtmlTags = function removeHtmlTags(label) {
    return label.replace(/<\/?[ib]>/g, '');
  };

  var extractName = function extractName(label) {
    var regex = /<b>(.*?)<\/b>/g;
    var match = regex.exec(label);

    if (match !== null) {
      return match[1];
    } else {
      return label;
    }
  };

  var bloodhoundOptions = {
    remote: {
      url: 'https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY',
      prepare: function prepare(query, settings) {
        if (settings.url) {
          settings.url = settings.url.replace('%QUERY', query);

          if (options.limit !== undefined) {
            settings.url += "&limit=" + options.limit;
          }

          if (options.origins !== undefined) {
            settings.url += "&origins=" + options.origins;
          }
        }

        return options.prepare !== undefined ? options.prepare(query, settings) : settings;
      },
      transform: function transform(parsedResponse_) {
        var parsedResponse = parsedResponse_;

        if (Array.isArray(parsedResponse)) {
          throw new Error('Wrong parsedResponse type');
        }

        var features = parsedResponse.results.map(function (result) {
          var attrs = result.attrs;
          var point = new ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_3__["default"]([attrs.y, attrs.x]);
          var bbox = parseBbox(attrs.geom_st_box2d);

          if (targetProjection !== undefined) {
            point.transform(sourceProjection, targetProjection);

            if (bbox !== null) {
              bbox = ol_proj_js__WEBPACK_IMPORTED_MODULE_1__["transformExtent"](bbox, sourceProjection, targetProjection);
            }
          }

          attrs.geometry = point;
          attrs.bbox = bbox;
          var label = attrs.label;
          attrs.label_no_html = removeHtmlTags(label);
          attrs.label_simple = extractName(label);
          var feature = new ol_Feature_js__WEBPACK_IMPORTED_MODULE_4__["default"](attrs);
          feature.setId(attrs.featureId);
          return feature;
        });
        return features;
      }
    },
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  };
  var bhOptions = Object.assign({}, options.options || {
    datumTokenizer: function datumTokenizer(datum) {
      return [];
    },
    queryTokenizer: Bloodhound.tokenizers.whitespace
  });
  var remoteOptions = Object.assign({}, options.remoteOptions || {});

  if (bhOptions.remote) {
    Object.assign(remoteOptions, bhOptions.remote);
    delete bhOptions.remote;
  }

  Object.assign(bloodhoundOptions, bhOptions);
  Object.assign(bloodhoundOptions.remote, remoteOptions);
  return new Bloodhound(bloodhoundOptions);
}

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoCreateLocationSearchBloodhound', []);
module.value('ngeoCreateLocationSearchBloodhound', createLocationSearchBloodhound);
function createLocationSearchBloodhoundFunction() {}
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/search/module.js":
/*!******************************!*\
  !*** ./src/search/module.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_search_searchDirective_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/search/searchDirective.js */ "./src/search/searchDirective.js");
/* harmony import */ var ngeo_search_createGeoJSONBloodhound_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/search/createGeoJSONBloodhound.js */ "./src/search/createGeoJSONBloodhound.js");
/* harmony import */ var ngeo_search_createLocationSearchBloodhound_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngeo/search/createLocationSearchBloodhound.js */ "./src/search/createLocationSearchBloodhound.js");




/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSearchModule', [ngeo_search_searchDirective_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_search_createGeoJSONBloodhound_js__WEBPACK_IMPORTED_MODULE_2__["default"].name, ngeo_search_createLocationSearchBloodhound_js__WEBPACK_IMPORTED_MODULE_3__["default"].name]));

/***/ }),

/***/ "./src/search/searchDirective.js":
/*!***************************************!*\
  !*** ./src/search/searchDirective.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);


function searchComponent() {
  return {
    restrict: 'A',
    link: function link(scope, element, attrs) {
      var typeaheadOptionsExpr = attrs.ngeoSearch;
      var typeaheadOptions = scope.$eval(typeaheadOptionsExpr);
      var typeaheadDatasetsExpr = attrs.ngeoSearchDatasets;
      var typeaheadDatasets = scope.$eval(typeaheadDatasetsExpr);
      element.typeahead(typeaheadOptions, typeaheadDatasets);
      var typeaheadListenersExpr = attrs.ngeoSearchListeners;
      var typeaheadListeners_ = scope.$eval(typeaheadListenersExpr);
      var typeaheadListeners = adaptListeners_(typeaheadListeners_);
      element.on('typeahead:open', function () {
        scope.$apply(function () {
          typeaheadListeners.open();
        });
      });
      element.on('typeahead:close', function () {
        scope.$apply(function () {
          typeaheadListeners.close();
        });
      });
      element.on('typeahead:cursorchange', function (event, suggestion, dataset) {
        scope.$apply(function () {
          typeaheadListeners.cursorchange(event, suggestion, dataset);
        });
      });
      element.on('typeahead:select', function (event, suggestion, dataset) {
        scope.$apply(function () {
          typeaheadListeners.select(event, suggestion, dataset);
        });
      });
      element.on('typeahead:autocomplete', function (event, suggestion, dataset) {
        scope.$apply(function () {
          typeaheadListeners.autocomplete(event, suggestion, dataset);
        });
      });
      element.on('typeahead:asyncreceive', function (event, dataset, query) {
        scope.$apply(function () {
          var empty = element.data('tt-typeahead').menu._allDatasetsEmpty();

          typeaheadListeners.datasetsempty(event, query, empty);
        });
      });
      element.on('typeahead:change', function (event) {
        scope.$apply(function () {
          var query = element.data('tt-typeahead').input.query;
          typeaheadListeners.change(event, query);
        });
      });
      element.on('typeahead:asyncrequest', function () {
        element.parent().addClass('search-loading');
      });
      element.on('typeahead:asynccancel typeahead:asyncreceive', function () {
        setTimeout(function () {
          element.parent().removeClass('search-loading');
        }, 50);
      });
    }
  };
}

function adaptListeners_(object) {
  var typeaheadListeners;

  if (object === undefined) {
    typeaheadListeners = {
      open: function open() {},
      close: function close() {},
      cursorchange: function cursorchange() {},
      datasetsempty: function datasetsempty() {},
      select: function select() {},
      autocomplete: function autocomplete() {},
      change: function change() {}
    };
  } else {
    typeaheadListeners = {
      open: object.open !== undefined ? object.open : function () {},
      close: object.close !== undefined ? object.close : function () {},
      cursorchange: object.cursorchange !== undefined ? object.cursorchange : function () {},
      datasetsempty: object.datasetsempty !== undefined ? object.datasetsempty : function () {},
      select: object.select !== undefined ? object.select : function () {},
      autocomplete: object.autocomplete !== undefined ? object.autocomplete : function () {},
      change: object.change !== undefined ? object.change : function () {}
    };
  }

  return typeaheadListeners;
}

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoSearchDirective', []);
module.directive('ngeoSearch', searchComponent);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/source/AsitVD.js":
/*!******************************!*\
  !*** ./src/source/AsitVD.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _default; });
/* harmony import */ var ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/source/WMTS.js */ "./node_modules/ol/source/WMTS.js");
/* harmony import */ var ol_tilegrid_WMTS_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/tilegrid/WMTS.js */ "./node_modules/ol/tilegrid/WMTS.js");
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }



var asitVDResolutions = [4000, 3750, 3500, 3250, 3000, 2750, 2500, 2250, 2000, 1750, 1500, 1250, 1000, 750, 650, 500, 250, 100, 50, 20, 10, 5, 2.5, 2, 1.5, 1, 0.5];
var asitVDTileGrid = new ol_tilegrid_WMTS_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
  extent: [2420000, 130000, 2900000, 1350000],
  resolutions: asitVDResolutions,
  matrixIds: asitVDResolutions.map(function (value, index) {
    return "" + index;
  })
});

var _default = function (_olSourceWMTS) {
  _inheritsLoose(_default, _olSourceWMTS);

  function _default(options) {
    return _olSourceWMTS.call(this, {
      attributions: 'géodonnées &copy; Etat de Vaud & &copy; contributeurs OpenStreetMap',
      url: 'https://ows{1-4}.asitvd.ch/wmts/1.0.0/{Layer}/default/default/0/' + '2056/{TileMatrix}/{TileRow}/{TileCol}.png',
      projection: 'EPSG:2056',
      requestEncoding: 'REST',
      layer: options.layer,
      style: 'default',
      matrixSet: '2056',
      format: 'image/png',
      tileGrid: asitVDTileGrid
    }) || this;
  }

  return _default;
}(ol_source_WMTS_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./src/statemanager/Location.js":
/*!**************************************!*\
  !*** ./src/statemanager/Location.js ***!
  \**************************************/
/*! exports provided: StatemanagerLocation, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StatemanagerLocation", function() { return StatemanagerLocation; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/utils.js */ "./src/utils.js");
LocationFactory.$inject = ["$rootScope", "$window"];


function StatemanagerLocation(location, history) {
  this.history_ = history;
  this.schema_ = location.protocol.substring(0, location.protocol.length - 1);
  this.domain_ = location.hostname;
  this.port_ = location.port ? parseInt(location.port, 10) : undefined;
  this.path_ = location.pathname;
  this.queryData_ = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["decodeQueryString"])(location.search);
  this.fragment_ = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["decodeQueryString"])(location.hash);
}

function replaceState(history, state) {
  try {
    history.replaceState(null, '', state);
  } catch (error) {}
}

StatemanagerLocation.prototype.getPath = function () {
  return this.path_;
};

StatemanagerLocation.prototype.getUriString = function () {
  var out = [];

  if (this.schema_) {
    out.push(this.schema_, ':');
  }

  if (this.domain_ || this.schema_ === 'file') {
    out.push('//');
    out.push(this.domain_);

    if (this.port_ !== undefined) {
      out.push(':', String(this.port_));
    }
  }

  if (this.path_) {
    if (this.domain_ && !this.path_.startsWith('/')) {
      out.push('/');
    }

    out.push(this.path_);
  }

  var encodedQueryData = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["encodeQueryString"])(this.queryData_);

  if (encodedQueryData.length > 0) {
    out.push('?', encodedQueryData);
  }

  var encodedFragment = Object(ngeo_utils_js__WEBPACK_IMPORTED_MODULE_1__["encodeQueryString"])(this.fragment_);

  if (encodedFragment.length > 0) {
    out.push('#', encodedFragment);
  }

  return out.join('');
};

StatemanagerLocation.prototype.hasParam = function (key) {
  return key in this.queryData_;
};

StatemanagerLocation.prototype.hasFragmentParam = function (key) {
  return key in this.fragment_;
};

StatemanagerLocation.prototype.getParam = function (key) {
  return this.queryData_[key];
};

StatemanagerLocation.prototype.getFragmentParam = function (key) {
  return this.fragment_[key];
};

StatemanagerLocation.prototype.getParamAsInt = function (key) {
  var value = this.getParam(key);

  if (value === undefined) {
    return undefined;
  }

  console.assert(typeof value == 'string');
  var valueAsInt = parseInt(value, 10);
  return isNaN(valueAsInt) ? undefined : valueAsInt;
};

StatemanagerLocation.prototype.getParamAsFloat = function (key) {
  var value = this.getParam(key);

  if (value === undefined) {
    return undefined;
  }

  console.assert(typeof value == 'string');
  var valueAsFloat = parseFloat(value);
  return isNaN(valueAsFloat) ? undefined : valueAsFloat;
};

StatemanagerLocation.prototype.getFragmentParamAsInt = function (key) {
  var value = this.getFragmentParam(key);

  if (value === undefined) {
    return undefined;
  }

  console.assert(typeof value == 'string');
  var valueAsInt = parseInt(value, 10);
  return isNaN(valueAsInt) ? undefined : valueAsInt;
};

StatemanagerLocation.prototype.getParamKeys = function () {
  var keys = [];

  for (var key in this.queryData_) {
    keys.push(key);
  }

  return keys;
};

StatemanagerLocation.prototype.getFragmentParamKeys = function () {
  var keys = [];

  for (var key in this.fragment_) {
    keys.push(key);
  }

  return keys;
};

StatemanagerLocation.prototype.getParamKeysWithPrefix = function (prefix) {
  var keys = [];

  for (var key in this.queryData_) {
    if (key.startsWith(prefix)) {
      keys.push(key);
    }
  }

  return keys;
};

StatemanagerLocation.prototype.getFragmentParamKeysWithPrefix = function (prefix) {
  var keys = [];

  for (var key in this.fragment_) {
    if (key.startsWith(prefix)) {
      keys.push(key);
    }
  }

  return keys;
};

StatemanagerLocation.prototype.updateParams = function (params) {
  for (var key in params) {
    this.queryData_[key] = params[key];
  }
};

StatemanagerLocation.prototype.updateFragmentParams = function (params) {
  for (var key in params) {
    this.fragment_[key] = params[key];
  }
};

StatemanagerLocation.prototype.deleteParam = function (key) {
  delete this.queryData_[key];
};

StatemanagerLocation.prototype.deleteFragmentParam = function (key) {
  delete this.fragment_[key];
};

StatemanagerLocation.prototype.refresh = function () {
  replaceState(this.history_, this.getUriString());
};

StatemanagerLocation.prototype.setPath = function (path) {
  this.path_ = path;
};

function LocationFactory($rootScope, $window) {
  var history = $window.history;
  var service = new StatemanagerLocation($window.location, $window.history);
  var lastUri = service.getUriString();
  $rootScope.$watch(function () {
    var newUri = service.getUriString();

    if (lastUri !== newUri) {
      $rootScope.$evalAsync(function () {
        lastUri = newUri;

        if (history !== undefined && history.replaceState !== undefined) {
          replaceState(history, newUri);
        }

        $rootScope.$broadcast('ngeoLocationChange');
      });
    }
  });
  return service;
}

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoLocation', []);
module.factory('ngeoLocation', LocationFactory);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/statemanager/Service.js":
/*!*************************************!*\
  !*** ./src/statemanager/Service.js ***!
  \*************************************/
/*! exports provided: StatemanagerService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StatemanagerService", function() { return StatemanagerService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/statemanager/Location.js */ "./src/statemanager/Location.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }



var StatemanagerService = function () {
  StatemanagerService.$inject = ["ngeoLocation", "ngeoUsedKeyRegexp"];

  function StatemanagerService(ngeoLocation, ngeoUsedKeyRegexp) {
    var _this = this;

    this.initialState = {};
    this.ngeoLocation = ngeoLocation;
    this.usedKeyRegexp = [];

    for (var _iterator = _createForOfIteratorHelperLoose(ngeoUsedKeyRegexp), _step; !(_step = _iterator()).done;) {
      var reg = _step.value;
      this.usedKeyRegexp.push(RegExp(reg));
    }

    this.useLocalStorage_ = false;
    this.setUseLocalStorage(false);
    var paramKeys = ngeoLocation.getParamKeys().filter(function (key) {
      return key != 'debug' && key != 'no_redirect';
    });

    if (paramKeys.length === 0) {
      if (this.useLocalStorage_) {
        var _loop = function _loop(key) {
          console.assert(key);

          _this.usedKeyRegexp.some(function (keyRegexp) {
            if (key.match(keyRegexp)) {
              var value = window.localStorage[key];

              if (value !== undefined || value !== null) {
                _this.initialState[key] = value;
              } else {
                _this.initialState[key] = '';
              }

              return true;
            }

            return false;
          });
        };

        for (var key in window.localStorage) {
          _loop(key);
        }
      }
    } else {
      paramKeys.forEach(function (key) {
        _this.usedKeyRegexp.some(function (keyRegexp) {
          if (key.match(keyRegexp)) {
            var value = _this.ngeoLocation.getParam(key);

            if (value !== undefined) {
              _this.initialState[key] = value;
              return true;
            }
          }

          return false;
        });
      });
    }
  }

  var _proto = StatemanagerService.prototype;

  _proto.setUseLocalStorage = function setUseLocalStorage(value) {
    this.useLocalStorage_ = value;

    if (this.useLocalStorage_) {
      try {
        if ('localStorage' in window) {
          window.localStorage['test'] = '';
          delete window.localStorage['test'];
        } else {
          this.useLocalStorage_ = false;
        }
      } catch (err) {
        console.error(err);
        this.useLocalStorage_ = false;
      }
    }

    return this.useLocalStorage_;
  };

  _proto.getInitialStringValue = function getInitialStringValue(key) {
    return this.initialState[key];
  };

  _proto.getInitialNumberValue = function getInitialNumberValue(key) {
    var value = this.initialState[key];

    if (value === undefined) {
      return undefined;
    }

    return parseFloat(value);
  };

  _proto.getInitialBooleanValue = function getInitialBooleanValue(key) {
    var value = this.initialState[key];

    if (value === undefined) {
      return undefined;
    }

    return value === 'true';
  };

  _proto.updateState = function updateState(object) {
    this.ngeoLocation.updateParams(object);

    if (this.useLocalStorage_) {
      for (var key in object) {
        console.assert(key);
        var value = object[key];
        console.assert(value !== undefined);
        window.localStorage[key] = value;
      }
    }
  };

  _proto.deleteParam = function deleteParam(key) {
    this.ngeoLocation.deleteParam(key);

    if (this.useLocalStorage_) {
      delete window.localStorage[key];
    }
  };

  return StatemanagerService;
}();
var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoStateManager', [ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__["default"].name]);
module.service('ngeoStateManager', StatemanagerService);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/statemanager/WfsPermalink.js":
/*!******************************************!*\
  !*** ./src/statemanager/WfsPermalink.js ***!
  \******************************************/
/*! exports provided: WfsPermalinkService, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WfsPermalinkService", function() { return WfsPermalinkService; });
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/Feature.js */ "./node_modules/ol/Feature.js");
/* harmony import */ var ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/format/filter.js */ "./node_modules/ol/format/filter.js");
/* harmony import */ var ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/format/WFS.js */ "./node_modules/ol/format/WFS.js");
WfsPermalinkService.$inject = ["$http", "ngeoPermalinkOgcserverUrl", "ngeoQueryResult", "ngeoWfsPermalinkOptions"];





function WfsPermalinkService($http, ngeoPermalinkOgcserverUrl, ngeoQueryResult, ngeoWfsPermalinkOptions) {
  var _this = this;

  var options = ngeoWfsPermalinkOptions;
  this.url_ = ngeoPermalinkOgcserverUrl;
  this.maxFeatures_ = options.maxFeatures !== undefined ? options.maxFeatures : 50;
  this.wfsTypes_ = {};
  console.assert(Array.isArray(options.wfsTypes), 'wfsTypes is not correctly set');
  options.wfsTypes.forEach(function (wfsType) {
    _this.wfsTypes_[wfsType.featureType] = wfsType;
  });
  this.defaultFeatureNS_ = options.defaultFeatureNS;
  this.defaultFeaturePrefix_ = options.defaultFeaturePrefix;
  this.pointRecenterZoom_ = options.pointRecenterZoom;
  this.$http_ = $http;
  this.result_ = ngeoQueryResult;
}

WfsPermalinkService.prototype.clear = function () {
  this.clearResult_();
};

WfsPermalinkService.prototype.issue = function (queryData, map, zoomLevel) {
  if (zoomLevel === void 0) {
    zoomLevel = undefined;
  }

  console.assert(this.url_, 'url is not set. to use the wfs permalink service, ' + 'set the value `ngeoWfsPermalinkOptions`');
  this.clearResult_();
  var typeName = queryData.wfsType;

  if (!this.wfsTypes_.hasOwnProperty(typeName)) {
    return;
  }

  var wfsType = this.wfsTypes_[typeName];
  var filters = this.createFilters_(queryData.filterGroups);

  if (filters === null) {
    return;
  }

  this.issueRequest_(wfsType, filters, map, queryData.showFeatures, zoomLevel);
};

WfsPermalinkService.prototype.issueRequest_ = function (wfsType, filter, map, showFeatures, zoomLevel) {
  var _this2 = this;

  if (zoomLevel === void 0) {
    zoomLevel = undefined;
  }

  var wfsFormat = new ol_format_WFS_js__WEBPACK_IMPORTED_MODULE_4__["default"]();
  var featureRequestXml = wfsFormat.writeGetFeature({
    srsName: map.getView().getProjection().getCode(),
    featureNS: wfsType.featureNS !== undefined ? wfsType.featureNS : this.defaultFeatureNS_,
    featurePrefix: wfsType.featurePrefix !== undefined ? wfsType.featurePrefix : this.defaultFeaturePrefix_,
    featureTypes: [wfsType.featureType],
    outputFormat: 'GML3',
    filter: filter,
    maxFeatures: this.maxFeatures_
  });
  var featureRequest = new XMLSerializer().serializeToString(featureRequestXml);
  var config = {
    headers: {
      'Content-Type': 'text/xml; charset=UTF-8'
    }
  };
  this.$http_.post(this.url_, featureRequest, config).then(function (response) {
    var features = wfsFormat.readFeatures(response.data);

    if (features.length == 0) {
      return;
    }

    var size = map.getSize();

    if (size !== undefined) {
      var maxZoom = zoomLevel === undefined ? _this2.pointRecenterZoom_ : zoomLevel;
      var padding = [10, 10, 10, 10];
      map.getView().fit(_this2.getExtent_(features), {
        size: size,
        maxZoom: maxZoom,
        padding: padding
      });
    }

    if (showFeatures) {
      var resultSource = {
        'features': features,
        'id': wfsType.featureType,
        'identifierAttributeField': wfsType.label,
        'label': wfsType.featureType,
        'pending': false
      };

      _this2.result_.sources.push(resultSource);

      _this2.result_.total = features.length;
    }
  });
};

WfsPermalinkService.prototype.getExtent_ = function (features) {
  return features.reduce(function (extent, feature) {
    if (feature instanceof ol_Feature_js__WEBPACK_IMPORTED_MODULE_2__["default"]) {
      var geometry = feature.getGeometry();

      if (geometry) {
        return Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_1__["extend"])(extent, geometry.getExtent());
      }

      return extent;
    }
  }, Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_1__["createEmpty"])());
};

WfsPermalinkService.prototype.createFilters_ = function (filterGroups) {
  if (filterGroups.length == 0) {
    return null;
  }

  var createFiltersForGroup = function createFiltersForGroup(filterGroup) {
    var filters = filterGroup.filters.map(function (filterDef) {
      var condition = filterDef.condition;

      if (Array.isArray(condition)) {
        return WfsPermalinkService.or_(condition.map(function (cond) {
          return Object(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["equalTo"])(filterDef.property, cond);
        }));
      } else {
        return Object(ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["equalTo"])(filterDef.property, condition);
      }
    });
    return WfsPermalinkService.and_(filters);
  };

  var filters = filterGroups.map(createFiltersForGroup);

  if (filters) {
    return WfsPermalinkService.or_(filters);
  }

  return null;
};

WfsPermalinkService.and_ = function (filters) {
  return WfsPermalinkService.joinFilters_(filters, ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["and"]);
};

WfsPermalinkService.or_ = function (filters) {
  return WfsPermalinkService.joinFilters_(filters, ol_format_filter_js__WEBPACK_IMPORTED_MODULE_3__["or"]);
};

WfsPermalinkService.joinFilters_ = function (filters, joinFn) {
  return filters.reduce(function (combinedFilters, currentFilter) {
    if (combinedFilters === null) {
      return currentFilter;
    } else {
      console.assert(currentFilter !== null);
      return joinFn(combinedFilters, currentFilter);
    }
  });
};

WfsPermalinkService.prototype.clearResult_ = function () {
  this.result_.total = 0;
  this.result_.sources.forEach(function (source) {
    source.features.length = 0;
  });
};

var module = angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoWfsPermalink', []);
module.service('ngeoWfsPermalink', WfsPermalinkService);
/* harmony default export */ __webpack_exports__["default"] = (module);

/***/ }),

/***/ "./src/statemanager/module.js":
/*!************************************!*\
  !*** ./src/statemanager/module.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular */ "./node_modules/angular/index.js");
/* harmony import */ var angular__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngeo/statemanager/Location.js */ "./src/statemanager/Location.js");
/* harmony import */ var ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngeo/statemanager/Service.js */ "./src/statemanager/Service.js");



/* harmony default export */ __webpack_exports__["default"] = (angular__WEBPACK_IMPORTED_MODULE_0___default.a.module('ngeoStatemanagerModule', [ngeo_statemanager_Location_js__WEBPACK_IMPORTED_MODULE_1__["default"].name, ngeo_statemanager_Service_js__WEBPACK_IMPORTED_MODULE_2__["default"].name]));

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: isEventUsinCtrlKey, isPlatformModifierKeyOnly, isShiftKeyOnly, hasCoarsePointingDevice, getBrowserLanguage, toMulti, isSafari, colorZeroPadding, rgbArrayToHex, decodeQueryString, encodeQueryString, deleteCondition, extentToRectangle, dpi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEventUsinCtrlKey", function() { return isEventUsinCtrlKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPlatformModifierKeyOnly", function() { return isPlatformModifierKeyOnly; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isShiftKeyOnly", function() { return isShiftKeyOnly; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasCoarsePointingDevice", function() { return hasCoarsePointingDevice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBrowserLanguage", function() { return getBrowserLanguage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toMulti", function() { return toMulti; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSafari", function() { return isSafari; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "colorZeroPadding", function() { return colorZeroPadding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbArrayToHex", function() { return rgbArrayToHex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeQueryString", function() { return decodeQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "encodeQueryString", function() { return encodeQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteCondition", function() { return deleteCondition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extentToRectangle", function() { return extentToRectangle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dpi", function() { return dpi; });
/* harmony import */ var ol_events_condition_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ol/events/condition.js */ "./node_modules/ol/events/condition.js");
/* harmony import */ var ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/geom/LineString.js */ "./node_modules/ol/geom/LineString.js");
/* harmony import */ var ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol/geom/MultiPoint.js */ "./node_modules/ol/geom/MultiPoint.js");
/* harmony import */ var ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ol/geom/MultiLineString.js */ "./node_modules/ol/geom/MultiLineString.js");
/* harmony import */ var ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ol/geom/MultiPolygon.js */ "./node_modules/ol/geom/MultiPolygon.js");
/* harmony import */ var ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ol/geom/Point.js */ "./node_modules/ol/geom/Point.js");
/* harmony import */ var ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/geom/Polygon.js */ "./node_modules/ol/geom/Polygon.js");
/* harmony import */ var ol_extent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/extent.js */ "./node_modules/ol/extent.js");
/* harmony import */ var ol_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/has.js */ "./node_modules/ol/has.js");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } it = o[Symbol.iterator](); return it.next.bind(it); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }










function isEventUsinCtrlKey(evt) {
  if (!evt) {
    return false;
  }

  return (ol_has_js__WEBPACK_IMPORTED_MODULE_8__["MAC"] ? evt.metaKey : evt.ctrlKey) || evt.key === 'Control';
}
function isPlatformModifierKeyOnly(evt) {
  return !evt.altKey && isEventUsinCtrlKey(evt) && !evt.shiftKey;
}
function isShiftKeyOnly(evt) {
  return !evt.altKey && !isEventUsinCtrlKey(evt) && evt.shiftKey;
}
function hasCoarsePointingDevice() {
  return matchMedia('(pointer: coarse)').matches;
}
function getBrowserLanguage(availableLanguages) {
  var browserLanguages = window.navigator.languages || [window.navigator.language];
  browserLanguages = browserLanguages.map(function (item) {
    return item.substring(0, 2);
  });
  browserLanguages = browserLanguages.filter(function (item, index, arr) {
    return arr.indexOf(item) == index;
  });
  var supportedLanguages = browserLanguages.filter(function (item) {
    return availableLanguages.includes(item);
  });
  return supportedLanguages[0];
}
function toMulti(geometry) {
  var multiGeom;

  if (geometry instanceof ol_geom_Point_js__WEBPACK_IMPORTED_MODULE_5__["default"]) {
    var multiGeomPoint = new ol_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_2__["default"]([]);
    multiGeomPoint.appendPoint(geometry);
    multiGeom = multiGeomPoint;
  } else if (geometry instanceof ol_geom_LineString_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
    var multiGeomLine = new ol_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_3__["default"]([]);
    multiGeomLine.appendLineString(geometry);
    multiGeom = multiGeomLine;
  } else if (geometry instanceof ol_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_6__["default"]) {
    var multiGeomPolygon = new ol_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_4__["default"]([]);
    multiGeomPolygon.appendPolygon(geometry);
    multiGeom = multiGeomPolygon;
  } else {
    multiGeom = geometry;
  }

  return multiGeom;
}
function isSafari() {
  return navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');
}
function colorZeroPadding(hex) {
  return hex.length == 1 ? "0" + hex : hex;
}
function rgbArrayToHex(rgb) {
  var r = rgb[0];
  var g = rgb[1];
  var b = rgb[2];

  if (r != (r & 255) || g != (g & 255) || b != (b & 255)) {
    throw Error("\"(" + r + "," + g + "," + b + ")\" is not a valid RGB color");
  }

  var hexR = colorZeroPadding(r.toString(16));
  var hexG = colorZeroPadding(g.toString(16));
  var hexB = colorZeroPadding(b.toString(16));
  return "#" + hexR + hexG + hexB;
}
function decodeQueryString(queryString) {
  var queryData = {};

  if (queryString) {
    var pairs = queryString.substring(1).split('&');

    for (var _iterator = _createForOfIteratorHelperLoose(pairs), _step; !(_step = _iterator()).done;) {
      var pair = _step.value;
      var indexOfEquals = pair.indexOf('=');

      if (indexOfEquals >= 0) {
        var name = pair.substring(0, indexOfEquals);
        var value = pair.substring(indexOfEquals + 1);

        try {
          queryData[decodeURIComponent(name)] = decodeURIComponent(value);
        } catch (error) {
          console.error("Malformed parameter: " + name + "=" + value);
        }
      } else {
        queryData[pair] = '';
      }
    }
  }

  return queryData;
}
function encodeQueryString(queryData) {
  var queryItem = [];

  for (var key in queryData) {
    var value = queryData[key];
    queryItem.push(encodeURIComponent(key) + "=" + encodeURIComponent(value));
  }

  return queryItem.join('&');
}
function deleteCondition(event) {
  return Object(ol_events_condition_js__WEBPACK_IMPORTED_MODULE_0__["noModifierKeys"])(event) && Object(ol_events_condition_js__WEBPACK_IMPORTED_MODULE_0__["singleClick"])(event);
}
function extentToRectangle(extent) {
  var result = [Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopLeft"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopRight"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getBottomRight"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getBottomLeft"])(extent), Object(ol_extent_js__WEBPACK_IMPORTED_MODULE_7__["getTopLeft"])(extent)];
  return result;
}
function dpi() {
  return 96;
}

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9ucy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvaWNvbnMvY2lyY2xlLnN2ZyIsIndlYnBhY2s6Ly8vLi9jb250cmlicy9nbWYvc3JjL2ljb25zL2xpbmUuc3ZnIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvaWNvbnMvcG9pbnQuc3ZnIiwid2VicGFjazovLy8uL2NvbnRyaWJzL2dtZi9zcmMvaWNvbnMvcG9seWdvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vY29udHJpYnMvZ21mL3NyYy9pY29ucy9yZWN0YW5nbGUuc3ZnIiwid2VicGFjazovLy8uL2V4YW1wbGVzL2NvbW1vbl9kZXBlbmRlbmNpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZXhhbXBsZXMvdXJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZ2VvYmxvY2tzL3Byb2ovc3JjL0VQU0dfMjA1Ni5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYW5ndWxhci1mbG9hdC10aGVhZC9hbmd1bGFyLWZsb2F0VGhlYWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmVqcy10eXBlYWhlYWQvZGlzdC90eXBlYWhlYWQuYnVuZGxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAvZGlzdC9qcy9ib290c3RyYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NvcmVqcy10eXBlYWhlYWQvZGlzdC90eXBlYWhlYWQuYnVuZGxlLWV4cG9zZWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V4cG9zZS1sb2FkZXIvZGlzdC9ydW50aW1lL2dldEdsb2JhbFRoaXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9hZi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2FyLWR6LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYXIta3cuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9hci1seS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2FyLW1hLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYXItc2EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9hci10bi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2FyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYXouanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9iZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2JnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYm0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ibi1iZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2JuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvYm8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ici5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2JzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvY2EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9jcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2N2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvY3kuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9kYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2RlLWF0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZGUtY2guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2R2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lbi1hdS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VuLWNhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZW4tZ2IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lbi1pZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VuLWlsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZW4taW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lbi1uei5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VuLXNnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZW8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lcy1kby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2VzLW14LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZXMtdXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9lcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2V0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZXUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9mYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2ZpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZmlsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZm8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9mci1jYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2ZyLWNoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZnIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9meS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2dhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZ2QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9nbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2dvbS1kZXZhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvZ29tLWxhdG4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ndS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2hlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvaGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9oci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2h1LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvaHktYW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9pZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2lzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvaXQtY2guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9pdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2phLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvanYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9rYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2trLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUva20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9rbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2tvLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUva3UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9reS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2xiLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbG8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9sdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL2x2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9taS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL21rLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9tbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL21yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbXMtbXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9tcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL210LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9uYi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL25lLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvbmwtYmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9ubC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL25uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvb2MtbG5jLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvcGEtaW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9wbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3B0LWJyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvcHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9yby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3J1LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc2QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3NpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3NxLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc3ItY3lybC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3NyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvc3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS9zdi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3N3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdGEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3RldC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3RnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90ay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3RsLXBoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdGxoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdHIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90emwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS90em0tbGF0bi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3R6bS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3VnLWNuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvdWsuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS91ci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3V6LWxhdG4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS91ei5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3ZpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUveC1wc2V1ZG8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS95by5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3poLWNuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9sb2NhbGUvemgtaGsuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbWVudC9kaXN0L2xvY2FsZS96aC1tby5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9tZW50L2Rpc3QvbG9jYWxlL3poLXR3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb21lbnQvZGlzdC9tb21lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sLWNlc2l1bS9zcmMvb2xjcy9BYnN0cmFjdFN5bmNocm9uaXplci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wtY2VzaXVtL3NyYy9vbGNzL0F1dG9SZW5kZXJMb29wLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC1jZXNpdW0vc3JjL29sY3MvQ2FtZXJhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC1jZXNpdW0vc3JjL29sY3MvRmVhdHVyZUNvbnZlcnRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wtY2VzaXVtL3NyYy9vbGNzL09MQ2VzaXVtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC1jZXNpdW0vc3JjL29sY3MvT3ZlcmxheVN5bmNocm9uaXplci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wtY2VzaXVtL3NyYy9vbGNzL1Jhc3RlclN5bmNocm9uaXplci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wtY2VzaXVtL3NyYy9vbGNzL1N5bmNocm9uaXplZE92ZXJsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sLWNlc2l1bS9zcmMvb2xjcy9WZWN0b3JTeW5jaHJvbml6ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sLWNlc2l1bS9zcmMvb2xjcy9jb250cmliL0xhenlMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sLWNlc2l1bS9zcmMvb2xjcy9jb250cmliL01hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sLWNlc2l1bS9zcmMvb2xjcy9jb3JlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC1jZXNpdW0vc3JjL29sY3MvY29yZS9PTEltYWdlcnlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wtY2VzaXVtL3NyYy9vbGNzL2NvcmUvVmVjdG9yTGF5ZXJDb3VudGVycGFydC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wtY2VzaXVtL3NyYy9vbGNzL21hdGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sLWNlc2l1bS9zcmMvb2xjcy91dGlsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9DdXN0b21FdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvR2VvbWV0cnlUeXBlLmpzIiwid2VicGFjazovLy8uL3NyYy9NZW51LmpzIiwid2VicGFjazovLy8uL3NyYy9XRlNEZXNjcmliZUZlYXR1cmVUeXBlLmpzIiwid2VicGFjazovLy8uL3NyYy9hcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXNvdXJjZS9EYXRhU291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhc291cmNlL0RhdGFTb3VyY2VzLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhc291cmNlL0hlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXNvdXJjZS9PR0MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFzb3VyY2UvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9kb3dubG9hZC9Dc3YuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rvd25sb2FkL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWQvc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZHJhdy9Db250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9kcmF3L2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZHJhdy9mZWF0dXJlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZHJhdy9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYXcvcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYXcvcmVjdGFuZ2xlLmpzIiwid2VicGFjazovLy8uL3NyYy9kcmF3L3RleHQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VkaXRpbmcvYXR0cmlidXRlc0NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZWRpdGluZy9hdHRyaWJ1dGVzY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VkaXRpbmcvY3JlYXRlZmVhdHVyZUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZWRpdGluZy9jcmVhdGVyZWd1bGFycG9seWdvbmZyb21jbGlja0NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZWRpdGluZy9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL0NvbmRpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL1J1bGVIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9jb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL3J1bGVDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9ydWxlY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm1hdC9BcmNHSVNHZW9KU09OLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybWF0L0ZlYXR1cmVQcm9wZXJ0aWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvV0ZTQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvWFNEQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9mb3JtYXQvZmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9nb29nbGVzdHJlZXR2aWV3L2NvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL3NyYy9nb29nbGVzdHJlZXR2aWV3L2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ29vZ2xlc3RyZWV0dmlldy9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQvQ29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2NvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL3NyYy9ncmlkL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ3JpZC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ljb25zL3BvaW50LnN2ZyIsIndlYnBhY2s6Ly8vLi9zcmMvaWNvbnMvcG9seWdvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ljb25zL3JlY3RhbmdsZS5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL0RyYXdBemltdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL0RyYXdSZWd1bGFyUG9seWdvbkZyb21DbGljay5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTWVhc3VyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTWVhc3VyZUFyZWEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL01lYXN1cmVBemltdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL01lYXN1cmVMZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL01vZGlmeS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vTW9kaWZ5Q2lyY2xlLmpzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcmFjdGlvbi9Nb2RpZnlSZWN0YW5nbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ludGVyYWN0aW9uL1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50ZXJhY3Rpb24vVHJhbnNsYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9pbnRlcmFjdGlvbi9jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVydHJlZS9Db250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9sYXllcnRyZWUvY29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVydHJlZS9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVydHJlZS9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9CYWNrZ3JvdW5kTGF5ZXJNZ3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9GZWF0dXJlT3ZlcmxheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL0ZlYXR1cmVPdmVybGF5TWdyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXAvTGF5ZXJIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC9yZWNlbnRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL3Jlc2l6ZW1hcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL3NjYWxlc2VsZWN0b3IuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL3NjYWxlc2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21lYXN1cmUvYXJlYS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVhc3VyZS9hemltdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21lYXN1cmUvbGVuZ3RoLmpzIiwid2VicGFjazovLy8uL3NyYy9tZWFzdXJlL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9NZXNzYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdlL05vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9Qb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9tb2RhbENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9wb3B1cENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWVzc2FnZS9wb3B1cGNvbXBvbmVudC5odG1sIiwid2VicGFjazovLy8uL3NyYy9taXNjL0F1dG9Qcm9qZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL0V2ZW50SGVscGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL0ZlYXR1cmVIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9UaW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL1Rvb2xBY3RpdmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9Ub29sQWN0aXZhdGVNZ3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvV01TVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9idG5Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvY29udHJvbENvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9kYXRlcGlja2VyQ29tcG9uZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvZGF0ZXBpY2tlckNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9kYXRldGltZXBpY2tlckNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9kZWNvcmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9leHRyYU1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWlzYy9maWxlcmVhZGVyQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL2ZpbHRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21pc2MvcGhwLWRhdGUtZm9ybWF0dGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9taXNjL3NvcnRhYmxlQ29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9wcmludC9TZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wcmludC9VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJpbnQvVmVjdG9yRW5jb2Rlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJpbnQvbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9wcm9maWxlL2QzRWxldmF0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9wcm9maWxlL2VsZXZhdGlvbkNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZmlsZS9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1ZXJ5L0FjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvTWFwUXVlcmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvTW9kZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvTW9kZVNlbGVjdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9xdWVyeS9RdWVyZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9xdWVyeS9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1ZXJ5L21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvcGFuZWxDb21wb25lbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvcXVlcnkvcGFuZWxDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J1bGUvRGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcnVsZS9HZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcnVsZS9SdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9ydWxlL1NlbGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcnVsZS9UZXh0LmpzIiwid2VicGFjazovLy8uL3NyYy9zZWFyY2gvY3JlYXRlR2VvSlNPTkJsb29kaG91bmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlYXJjaC9jcmVhdGVMb2NhdGlvblNlYXJjaEJsb29kaG91bmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlYXJjaC9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlYXJjaC9zZWFyY2hEaXJlY3RpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NvdXJjZS9Bc2l0VkQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlbWFuYWdlci9Mb2NhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGVtYW5hZ2VyL1NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlbWFuYWdlci9XZnNQZXJtYWxpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlbWFuYWdlci9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgd2lkdGg9XFxcIjE2XFxcIiBoZWlnaHQ9XFxcIjE2XFxcIj48cGF0aCBkPVxcXCJNMS4xNCA4YzAtMS4yNDIuMzA4LTIuMzgzLjkyLTMuNDMyYTYuODM3IDYuODM3IDAgMDEyLjQ5Ni0yLjQ5NiA2LjY4NCA2LjY4NCAwIDAxMy40MzItLjkyYzEuMjQyIDAgMi4zODMuMzA4IDMuNDMyLjkyYTYuODM3IDYuODM3IDAgMDEyLjQ5NiAyLjQ5NmMuNjEyIDEuMDQ5LjkyIDIuMTkuOTIgMy40MzJhNi42OCA2LjY4IDAgMDEtLjU3NyAyLjc0NmMuNDA5LjQ0NC42NTEgMS4wMzkuNTkzIDEuNjUzLS4wNiAxLjA2NC0uOTU2IDIuMDIyLTIuMDI4IDIuMDlhMi4yNTQgMi4yNTQgMCAwMS0xLjU5MS0uNDY3IDYuNjgyIDYuNjgyIDAgMDEtMy4yNDUuODI2IDYuNjg0IDYuNjg0IDAgMDEtMy40MzItLjkyIDYuODM3IDYuODM3IDAgMDEtMi40OTYtMi40OTZBNi42ODQgNi42ODQgMCAwMTEuMTQgOHptMS4xMzggMGMwIC43NzIuMTUgMS41MS40NTMgMi4yMTVhNS43MDcgNS43MDcgMCAwMDEuMjE2IDEuODEgNS44MTYgNS44MTYgMCAwMDEuODI2IDEuMjE3IDUuNTMzIDUuNTMzIDAgMDAyLjIxNS40NjhjLjc3My0uMDAxIDEuNTEtLjE2NiAyLjIxNS0uNDY4LjExLS4wNDguMjIyLS4xMDQuMzI4LS4xNTYtLjAwMy0uMDA3LS4wMTQtLjAxLS4wMTYtLjAxNmEyLjIxMSAyLjIxMSAwIDAxLS4xNTYtLjg3NGMtLjAwOC0xLjI2IDEuMjMtMi4zNDkgMi40OC0yLjE4NC4xNDUuMDE0LjI4NS4wNS40MjIuMDk0LjAwNC4wMDEuMDEtLjAwMi4wMTUgMCAuMjc0LS42Ny40MjEtMS4zNzMuNDIxLTIuMTA2IDAtLjc3My0uMTY0LTEuNTExLS40NjgtMi4yMTVhNS44MDEgNS44MDEgMCAwMC0xLjIxNi0xLjgyNSA1LjcxMSA1LjcxMSAwIDAwLTEuODEtMS4yMTcgNS41NTMgNS41NTMgMCAwMC0yLjIxNS0uNDUzIDUuNTMgNS41MyAwIDAwLTIuMjE1LjQ1M0E1LjgwNSA1LjgwNSAwIDAwMy45NDcgMy45NmE1Ljc4NiA1Ljc4NiAwIDAwLTEuMjE2IDEuODI1QTUuNTQzIDUuNTQzIDAgMDAyLjI3OCA4em05LjQzOCA0LjI0M2EuNzg0Ljc4NCAwIDAwLjExLjQyMS45Ny45NyAwIDAwLjA0Ni4wNzguODczLjg3MyAwIDAwLjIwMy4yMDNjLjAxNy4wMTMuMDMuMDM1LjA0Ny4wNDcuMDEuMDA3LjAyMS4wMS4wMzEuMDE2YS43NzkuNzc5IDAgMDAuODExLjA2MmMuMzctLjE1OS41NzktLjU5NS41MTUtLjk4M3YtLjAxNWEuNzUxLjc1MSAwIDAwLS4xNzItLjM2Ljc5Mi43OTIgMCAwMC0uMTU2LS4xNTVjLS4wMi0uMDE1LS4wNC0uMDE4LS4wNjItLjAzMWEuOTMxLjkzMSAwIDAwLS4xMS0uMDYzYy0uMDQtLjAxNy0uMDgxLS4wMzUtLjEyNC0uMDQ3LS4wMjYtLjAwNy0uMDUxLS4wMS0uMDc4LS4wMTVhMS4wNzggMS4wNzggMCAwMC0uMjE4LS4wMTZjLjAwNC0uMDA2LjAxMS0uMDEuMDE1LS4wMTVhLjguOCAwIDAwLS41NjEuMjM0Ljg3NC44NzQgMCAwMC0uMjk3LjY0elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB3aWR0aD1cXFwiMTZcXFwiIGhlaWdodD1cXFwiMTZcXFwiPjxwYXRoIGQ9XFxcIk02LjYyNi4yNjdDNS4zNjYuMjYgNC4yNyAxLjQ5OCA0LjQzNiAyLjc1Yy4xMDkgMS4xNTMgMS4yMTYgMi4xMjkgMi4zODQgMi4wMTcgMS4wNjQtLjA2IDIuMDMxLS45NiAyLjEtMi4wMzEuMS0uOTc1LS40OTctMS45NzctMS40MjQtMi4zMTNhMi4xOTggMi4xOTggMCAwMC0uODctLjE1NXptLjA0NiAxLjM2NGMuNjA1LS4wMyAxLjA5NS43LjgxOSAxLjI0NC0uMjE1LjQ5OC0uOTMuNzEtMS4zNTMuMzQ0LS4zOTItLjMtLjQ3My0uOTQtLjExMi0xLjI5My4xNi0uMTguNC0uMjk0LjY0NS0uMjk1ek0zLjkxNiA4LjM5N2MtMS4yNTYtLjAwNy0yLjM1MyAxLjIyNS0yLjE5IDIuNDc1LjEwNCAxLjE2IDEuMjIzIDIuMTQyIDIuMzk3IDIuMDIzIDEuMDYyLS4wNjYgMi4wMTktLjk2MiAyLjA4Ny0yLjAzNi4wOTMtLjkzMi0uNDQ2LTEuODkyLTEuMzEyLTIuMjU5YTIuMTkyIDIuMTkyIDAgMDAtLjk4My0uMjAzem0uMDQ4IDEuMzYzYy42MTItLjAyOCAxLjEwNC43MTYuODA3IDEuMjY2LS4yMjguNDkzLS45NC42ODItMS4zNTUuMzEzLS4zNzctLjMtLjQ1Ny0uOTIzLS4xMDYtMS4yNzZhLjg4OS44ODkgMCAwMS42NTQtLjMwM3ptOC4wNSAxLjQ2N2MtMS4yNS0uMDIzLTIuMzUzIDEuMTc4LTIuMjI0IDIuNDIyLjA3NSAxLjE2NSAxLjE3OSAyLjE3NCAyLjM1OCAyLjA3OCAxLjA3LS4wNDMgMi4wNS0uOTM2IDIuMTMtMi4wMTYuMTAzLS45MzYtLjQzNC0xLjkwNS0xLjMwMS0yLjI3OC0uMzAxLS4xNC0uNjMxLS4yMTQtLjk2My0uMjA3em0uMDA4IDEuMzY0Yy42MTUtLjAzNyAxLjExNS43MDguODIxIDEuMjYtLjIxNy40NzgtLjkwNi42ODQtMS4zMjIuMzQ0LS40MjQtLjI5Ny0uNS0uOTc2LS4xMTMtMS4zMzJhLjg3OS44NzkgMCAwMS42MTUtLjI3MnptLTYuODEtMi4xNjNjLS4xNDMuNDE3LS4yODIuODMyLS40MzQgMS4yNDUgMS45Mi42NyAzLjg0IDEuMzMzIDUuNzU1IDIuMDExLjE1My0uNDMyLjI5Ni0uODYzLjQ1NS0xLjI5My0xLjkyLS42Ny0zLjg0MS0xLjMzNS01Ljc1OS0yLjAxMWwtLjAxNy4wNDh6bS40MjYtNi44NzRDNC45NzMgNS40MzYgNC4zMTMgNy4zMiAzLjY0MiA5LjJjLjQzMi4xNS44NjMuMzAyIDEuMjkyLjQ1OC42NjgtMS44OTkgMS4zMzYtMy43OTggMi4wMTItNS42OTQtLjQzMi0uMTUtLjg2Mi0uMzAxLTEuMjktLjQ1OGwtLjAxOC4wNDd6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHdpZHRoPVxcXCIxNlxcXCIgaGVpZ2h0PVxcXCIxNlxcXCI+PHBhdGggZD1cXFwiTTcuOTQ4IDEwLjI1Yy0xLjI2LjAwOS0yLjM0OS0xLjIzLTIuMTg0LTIuNDguMTEtMS4xNTMgMS4yMTgtMi4xMjQgMi4zODctMi4wMTMgMS4wNjQuMDYgMi4wMjIuOTU2IDIuMDkgMi4wMjguMS45NzUtLjQ5MiAxLjk3My0xLjQyIDIuMzFhMi4yMTEgMi4yMTEgMCAwMS0uODczLjE1NXptLjA0Ny0xLjM1N2MuNjA2LjAzIDEuMTAzLS43MDMuODI3LTEuMjQ4LS4yMTUtLjQ5OS0uOTM0LS43MDktMS4zNTctLjM0My0uMzkzLjMtLjQ3Ljk0MS0uMTEgMS4yOTUuMTYuMTguMzk1LjI5NS42NC4yOTZ6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHdpZHRoPVxcXCIxNlxcXCIgaGVpZ2h0PVxcXCIxNlxcXCI+PHBhdGggZD1cXFwiTTUuMDQ1LS4wMjljLTEuMjYtLjAwOC0yLjM1IDEuMjMtMi4xODQgMi40OC4wNi42MzIuNDMgMS4yMDIuOTM2IDEuNTc2LS40NzkgMS4zNTgtLjk2OCAyLjcxNC0xLjQ1IDQuMDcyLTEuMjU3LS4wMDgtMi4zNjMgMS4yMy0yLjIgMi40OC4xMDUgMS4xNiAxLjIyOCAyLjEzIDIuNDAyIDIuMDEyYTIuMjk1IDIuMjk1IDAgMDAxLjQ1LS42N2MxLjI3My41MyAyLjU1MyAxLjA1NiAzLjgyMyAxLjU5YTEuOTkyIDEuOTkyIDAgMDAwIC40MzhjLjA3NCAxLjE2NSAxLjE3NiAyLjE3IDIuMzU1IDIuMDc0IDEuMDctLjA0MiAyLjA1Ny0uOTMyIDIuMTM4LTIuMDEyYTIuMjk1IDIuMjk1IDAgMDAtLjQ1My0xLjYwN2MuNDM1LS41OTMuODczLTEuMTg2IDEuMzEtMS43NzguMTg2LjA0LjM2OS4wNDcuNTYyLjAzMSAxLjA2Ny0uMDQ3IDIuMDQtLjkzNSAyLjEyMi0yLjAxMi4xMS0uOTY0LS40NjQtMS45NTktMS4zNzMtMi4zMWEyLjIwMiAyLjIwMiAwIDAwLS4zNDMtLjEwOCA0NDQuMjcgNDQ0LjI3IDAgMDEtLjEyNS0xLjg1N2MuNzQzLS4zMTMgMS4zMjYtMS4wMzYgMS4zODgtMS44NTYuMTEtLjk2NC0uNDYzLTEuOTU4LTEuMzcyLTIuMzA5YTIuMTk2IDIuMTk2IDAgMDAtLjkyLS4xNzJjLS4wOCAwLS4xNTgtLjAwOC0uMjM1IDAtLjg0MS4wOTgtMS41NjUuNzUtMS44NCAxLjU0NS0xLjI2LS4wMDQtMi41My0uMDA5LTMuNzkxLS4wMTZDNy4wNDUuOTE4IDYuNTY0LjM2MSA1LjkxOS4xMjdhMi4yMTEgMi4yMTEgMCAwMC0uODc0LS4xNTZ6bS4wNDcgMS4zNTdjLjYwNS0uMDMgMS4xMDMuNzA0LjgyNyAxLjI0OC0uMjE1LjQ5OS0uOTM0LjcxLTEuMzU4LjM0My0uMzkyLS4yOTktLjQ3LS45NC0uMTA5LTEuMjk0YS44NzQuODc0IDAgMDEuNjQtLjI5N3ptOC4wOC4wNjNjLjYyLS4wMjYgMS4wOTkuNzE5Ljc5NiAxLjI2My0uMjMyLjQ5OC0uOTY3LjY5Mi0xLjM3My4yOTctLjM2MS0uMzA4LS40MzEtLjkzOS0uMDc4LTEuMjhhLjg5OS44OTkgMCAwMS42NTYtLjI4ek03LjI0NiAyLjkxOWMxLjI1Ny4wMDUgMi41MTcuMDI0IDMuNzc1LjAzMmEyLjMzMyAyLjMzMyAwIDAwMS42MjIgMS41MTNjLjA0My42MjQuMDg0IDEuMjQ4LjEyNSAxLjg3Mi0uODc3LjM3Ni0xLjUxMSAxLjMyMi0xLjM4OCAyLjI5My4wNDIuNDgyLjI2Ny45NC41OTIgMS4yOTUtLjQxNi41NjctLjgyNiAxLjEzNi0xLjI0OCAxLjdhMi4wNDUgMi4wNDUgMCAwMC0uNjctLjEwOXYuMDE2Yy0uNjMyLS4wMTItMS4yMzUuMjg3LTEuNjU0Ljc0OC0xLjI2LS41MjUtMi41MTctMS4wNjMtMy43NzUtMS41OS4wMDUtLjA0My4wMTMtLjA4My4wMTUtLjEyNmEyLjI3NCAyLjI3NCAwIDAwLS45NjctMi4wNzRjLjQ3Mi0xLjM0Mi45NDQtMi42ODUgMS40Mi00LjAyNS4wNTIgMCAuMTA0LjAwNS4xNTYgMCAuODk4LS4wNSAxLjcyLS43IDEuOTk3LTEuNTQ1em02LjM4IDQuNjAyYy42Mi0uMDI1IDEuMDk4LjcyLjc5NiAxLjI2NC0uMjMzLjQ5Ny0uOTY3LjY5MS0xLjM3My4yOTYtLjM2Mi0uMzA4LS40MzItLjkzOC0uMDc4LTEuMjc5YS44OTkuODk5IDAgMDEuNjU1LS4yOHpNMi4zOTMgOS40NTZjLjYxMi0uMDI4IDEuMTA5LjcyOS44MTEgMS4yOC0uMjI4LjQ5My0uOTQyLjY4LTEuMzU3LjMxMS0uMzc3LS4zLS40Ni0uOTI2LS4xMS0xLjI4YS45LjkgMCAwMS42NTYtLjMxMXptNy42NiAzLjQzMmMuNjE1LS4wMzcgMS4xMi43MTEuODI2IDEuMjYzLS4yMTcuNDgtLjkxLjY4NC0xLjMyNi4zNDQtLjQyMy0uMjk3LS40OTUtLjk4Ni0uMTA5LTEuMzQyYS44NTcuODU3IDAgMDEuNjA5LS4yNjV6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHdpZHRoPVxcXCIxNlxcXCIgaGVpZ2h0PVxcXCIxNlxcXCI+PHBhdGggZD1cXFwiTTIuMzE3IDE0LjQ5MWEyLjIwMyAyLjIwMyAwIDAxLS44NzQtLjE1NkMuMjU3IDEzLjkxLS4zNDMgMTIuMzguMjQyIDExLjI2MmEyLjI2NSAyLjI2NSAwIDAxMS4yOC0xLjEzOWwtLjAxNi00LjI1OGMtLjAyLS4wMDgtLjA0Mi0uMDA4LS4wNjMtLjAxNkMuMjU4IDUuNDI0LS4zNDMgMy44OTQuMjQzIDIuNzc2Ljc0IDEuNzMxIDIuMTE1IDEuMTk0IDMuMTc0IDEuN2MuNTcyLjI0NiAxLjAwNy43NDcgMS4yMTcgMS4zMjZMMTEuNiAzLjAxYy4wMjgtLjA3Ny4wNTUtLjE2LjA5My0uMjM0LjUtMS4wNDUgMS44NzQtMS41ODIgMi45MzMtMS4wNzYuOTc5LjQyMiAxLjU4NCAxLjU5IDEuMjggMi42MmEyLjMwMiAyLjMwMiAwIDAxLTEuNDY3IDEuNTc2bC4wMTYgNC4yMjhjLjA1Ny4wMi4xMTUuMDM1LjE3MS4wNjIuOTc5LjQyMiAxLjU4NCAxLjU5IDEuMjggMi42MjEtLjI0Ljk1LTEuMTUxIDEuNjg4LTIuMTM3IDEuNjg1YTIuMjAzIDIuMjAzIDAgMDEtLjg3NC0uMTU2Yy0uNjI1LS4yMjQtMS4wODMtLjc1Ny0xLjI5NS0xLjM3M2wtNy4yMDcuMDE1Yy0uMzAyLjg2NC0xLjE1MSAxLjUxNi0yLjA3NSAxLjUxM3ptLS4xNC0xLjM1N2MuNTA4LjA1MiAxLjA0NS0uNDIuOTgyLS45NTEtLjAzLS41NDItLjYzLS45NzgtMS4xNTQtLjc4LS40NzIuMTQ2LS43NjQuNzEzLS41NDcgMS4xNy4wODkuMjIzLjI3LjQxMy41LjQ5OWEuNzkuNzkgMCAwMC4yMTguMDYyem0xMS40NSAwYy41MDkuMDUyIDEuMDQ1LS40Mi45ODItLjk1MS0uMDMtLjU0Mi0uNjMtLjk3OC0xLjE1NC0uNzgtLjQ3Mi4xNDYtLjc2NC43MTMtLjU0NiAxLjE3LjA4OC4yMjMuMjcuNDEzLjQ5OS40OTlhLjc5Ljc5IDAgMDAuMjE4LjA2MnpNNC4zOSAxMS41MjdsNy4xOTItLjAxNWMuMDMtLjA4NC4wNjctLjE3LjEwOS0uMjUuMjU5LS41NDIuNzQ3LS45NDQgMS4zMS0xLjEzOVY1Ljg4Yy0uMDM2LS4wMTItLjA3My0uMDE3LS4xMDktLjAzMS0uNjI4LS4yMjUtMS4wODUtLjc2OC0xLjI5NS0xLjM4OEg0LjQwN2EyLjMzNCAyLjMzNCAwIDAxLTEuNDIgMS40MzVsLjAxNSA0LjIyN2MuMDU2LjAyLjExOC4wMzcuMTcyLjA2My41NzYuMjQ4IDEuMDA5Ljc1NyAxLjIxNyAxLjM0MnptLTIuMjE1LTYuODhjLjUxLjA1MiAxLjA0Ni0uNDIuOTgzLS45NS0uMDMtLjU0My0uNjMtLjk3OS0xLjE1NC0uNzgxLS40NzIuMTQ2LS43NjQuNzE0LS41NDcgMS4xNy4wODkuMjI0LjI3LjQxNC41LjVhLjc5Ljc5IDAgMDAuMjE4LjA2MnptMTEuNDUgMGMuNTEuMDUyIDEuMDQ2LS40Mi45ODMtLjk1LS4wMy0uNTQzLS42My0uOTc5LTEuMTU0LS43ODEtLjQ3Mi4xNDYtLjc2NC43MTQtLjU0NiAxLjE3LjA4OC4yMjQuMjcuNDE0LjQ5OS41YS43OS43OSAwIDAwLjIxOC4wNjJ6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJpbXBvcnQgJy4vY29tbW9uX2RlcGVuZGVuY2llcy5zY3NzJztcbmltcG9ydCAnLi9iYXNlLmNzcyc7XG5pbXBvcnQgJ2pxdWVyeSc7XG5pbXBvcnQgJ2FuZ3VsYXInO1xuaW1wb3J0ICdhbmd1bGFyLWdldHRleHQnO1xuaW1wb3J0ICdib290c3RyYXAnO1xuaW1wb3J0ICdvbC9vbC5jc3MnO1xuaW1wb3J0ICdib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLmNzcyc7XG5cbmlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwOicgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICE9PSAnbG9jYWxob3N0Jykge1xuICB2YXIgcmVzdE9mVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3Vic3RyKDUpO1xuICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiaHR0cHM6XCIgKyByZXN0T2ZVcmw7XG59IiwiZXhwb3J0IHZhciBHTUZfREVNTyA9ICdodHRwczovL2dlb21hcGZpc2gtZGVtby0yLTYuY2FtcHRvY2FtcC5jb20vJztcbmV4cG9ydCB2YXIgTUFQU0VSVkVSX1dGU19GRUFUVVJFX05TID0gJ2h0dHA6Ly9tYXBzZXJ2ZXIuZ2lzLnVtbi5lZHUvbWFwc2VydmVyJztcbmV4cG9ydCB2YXIgTUFQU0VSVkVSX1BST1hZID0gR01GX0RFTU8gKyBcIm1hcHNlcnZfcHJveHk/b2djc2VydmVyPU1haW4rUE5HXCI7XG5leHBvcnQgdmFyIFBSSU5UX1BST1hZID0gR01GX0RFTU8gKyBcInByaW50cHJveHlcIjtcbmV4cG9ydCB2YXIgU0VBUkNIID0gR01GX0RFTU8gKyBcInNlYXJjaD9xdWVyeT0lUVVFUllcIjsiLCJpbXBvcnQgc29tZXJjIGZyb20gJy4vc29tZXJjLmpzJztcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJy4vdXRpbHMuanMnO1xuZXhwb3J0IHZhciBjb2RlID0gJ0VQU0c6MjA1Nic7XG52YXIgZGVmID0gXCJcXG4gICtwcm9qPVwiICsgc29tZXJjICsgXCJcXG4gICtsYXRfMD00Ni45NTI0MDU1NTU1NTU1NlxcbiAgK2xvbl8wPTcuNDM5NTgzMzMzMzMzMzMzXFxuICAra18wPTFcXG4gICt4XzA9MjYwMDAwMFxcbiAgK3lfMD0xMjAwMDAwXFxuICArZWxscHM9YmVzc2VsXFxuICArdG93Z3M4ND02NzQuMzc0LDE1LjA1Niw0MDUuMzQ2LDAsMCwwLDBcXG4gICt1bml0cz1tXFxuICArbm9fZGVmc1xcblwiO1xudmFyIGV4dGVudCA9IFsyNDIwMDAwLCAxMDMwMDAwLCAyOTAwMDAwLCAxMzUwMDAwXTtcbmV4cG9ydCB2YXIgcHJvaiA9IGNyZWF0ZShjb2RlLCBkZWYsIGV4dGVudCk7XG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8qKlxuICogZmxvYXRUaGVhZCB3cmFwcGVyIGZvciBBbmd1bGFySlNcbiAqIEB2ZXJzaW9uIHYwLjEuMCAtIDIwMTUtMTAtMjVcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9icmFuZG9uLWJhcmtlci9hbmd1bGFyLWZsb2F0VGhlYWRcbiAqIEBhdXRob3IgQnJhbmRvbiBCYXJrZXJcbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2Zsb2F0VGhlYWQnLCBbXSkuZGlyZWN0aXZlKCdmbG9hdFRoZWFkJywgWyckdGltZW91dCcsICckbG9nJywgZmxvYXRUaGVhZF0pO1xuXG4gIGZ1bmN0aW9uIGZsb2F0VGhlYWQoJHRpbWVvdXQsICRsb2cpIHtcbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGZsb2F0VGhlYWQ6ICc9PycsXG4gICAgICAgIGZsb2F0VGhlYWRFbmFibGVkOiAnPT8nXG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgICAgICBpZiAoISRhdHRycy5oYXNPd25Qcm9wZXJ0eSgnZmxvYXRUaGVhZEVuYWJsZWQnKSkge1xuICAgICAgICAgICRzY29wZS5mbG9hdFRoZWFkRW5hYmxlZCA9ICRhdHRycy5mbG9hdFRoZWFkRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISRhdHRycy5oYXNPd25Qcm9wZXJ0eSgnZmxvYXRUaGVhZCcpIHx8ICRhdHRycy5mbG9hdFRoZWFkID09PSAnJykge1xuICAgICAgICAgICRzY29wZS5mbG9hdFRoZWFkID0gJGF0dHJzLmZsb2F0VGhlYWQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgfV0sXG4gICAgICBsaW5rOiBsaW5rLFxuICAgICAgcmVzdHJpY3Q6ICdBJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAkc2NvcGUuJHdhdGNoKCdmbG9hdFRoZWFkRW5hYmxlZCcsIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KCRzY29wZS5mbG9hdFRoZWFkKSkge1xuICAgICAgICAgICAgalF1ZXJ5KCRlbGVtZW50KS5mbG9hdFRoZWFkKCRzY29wZS5mbG9hdFRoZWFkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgalF1ZXJ5KCRlbGVtZW50KS5mbG9hdFRoZWFkKCdkZXN0cm95Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLiR3YXRjaCgnZmxvYXRUaGVhZCcsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwgfHwgISRzY29wZS5mbG9hdFRoZWFkRW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGpRdWVyeSgkZWxlbWVudCkuZmxvYXRUaGVhZCgnZGVzdHJveScpO1xuXG4gICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KG5ld1ZhbCkpIHtcbiAgICAgICAgICBqUXVlcnkoJGVsZW1lbnQpLmZsb2F0VGhlYWQobmV3VmFsKTtcbiAgICAgICAgfVxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChuZ01vZGVsKSB7XG4gICAgICAgIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCRzY29wZS5mbG9hdFRoZWFkRW5hYmxlZCAmJiBhbmd1bGFyLmlzT2JqZWN0KCRzY29wZS5mbG9hdFRoZWFkKSkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBqUXVlcnkoJGVsZW1lbnQpLmZsb2F0VGhlYWQoJ3JlZmxvdycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsb2cuaW5mbygnZmxvYXRUaGVhZDogbmdNb2RlbCBub3QgcHJvdmlkZWQhJyk7XG4gICAgICB9XG5cbiAgICAgICRlbGVtZW50LmJpbmQoJ3VwZGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGpRdWVyeSgkZWxlbWVudCkuZmxvYXRUaGVhZCgncmVmbG93Jyk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfSk7XG4gICAgICAkZWxlbWVudC5iaW5kKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgalF1ZXJ5KCRlbGVtZW50KS5mbG9hdFRoZWFkKCdkZXN0cm95Jyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uIChhMCkge1xuICAgICAgcmV0dXJuIHJvb3RbXCJCbG9vZGhvdW5kXCJdID0gZmFjdG9yeShhMCk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbiAgfSBlbHNlIHtcbiAgICByb290W1wiQmxvb2Rob3VuZFwiXSA9IGZhY3Rvcnkocm9vdFtcImpRdWVyeVwiXSk7XG4gIH1cbn0pKHRoaXMsIGZ1bmN0aW9uICgkKSB7XG4gIHZhciBfID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTXNpZTogZnVuY3Rpb24gaXNNc2llKCkge1xuICAgICAgICByZXR1cm4gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhtc2llIHxydjopKFxcZCsoLlxcZCspPykvaSlbMl0gOiBmYWxzZTtcbiAgICAgIH0sXG4gICAgICBpc0JsYW5rU3RyaW5nOiBmdW5jdGlvbiBpc0JsYW5rU3RyaW5nKHN0cikge1xuICAgICAgICByZXR1cm4gIXN0ciB8fCAvXlxccyokLy50ZXN0KHN0cik7XG4gICAgICB9LFxuICAgICAgZXNjYXBlUmVnRXhDaGFyczogZnVuY3Rpb24gZXNjYXBlUmVnRXhDaGFycyhzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG4gICAgICB9LFxuICAgICAgaXNTdHJpbmc6IGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIjtcbiAgICAgIH0sXG4gICAgICBpc051bWJlcjogZnVuY3Rpb24gaXNOdW1iZXIob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm51bWJlclwiO1xuICAgICAgfSxcbiAgICAgIGlzQXJyYXk6ICQuaXNBcnJheSxcbiAgICAgIGlzRnVuY3Rpb246ICQuaXNGdW5jdGlvbixcbiAgICAgIGlzT2JqZWN0OiAkLmlzUGxhaW5PYmplY3QsXG4gICAgICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiO1xuICAgICAgfSxcbiAgICAgIGlzRWxlbWVudDogZnVuY3Rpb24gaXNFbGVtZW50KG9iaikge1xuICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gICAgICB9LFxuICAgICAgaXNKUXVlcnk6IGZ1bmN0aW9uIGlzSlF1ZXJ5KG9iaikge1xuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgJDtcbiAgICAgIH0sXG4gICAgICB0b1N0cjogZnVuY3Rpb24gdG9TdHIocykge1xuICAgICAgICByZXR1cm4gXy5pc1VuZGVmaW5lZChzKSB8fCBzID09PSBudWxsID8gXCJcIiA6IHMgKyBcIlwiO1xuICAgICAgfSxcbiAgICAgIGJpbmQ6ICQucHJveHksXG4gICAgICBlYWNoOiBmdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGNiKSB7XG4gICAgICAgICQuZWFjaChjb2xsZWN0aW9uLCByZXZlcnNlQXJncyk7XG5cbiAgICAgICAgZnVuY3Rpb24gcmV2ZXJzZUFyZ3MoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtYXA6ICQubWFwLFxuICAgICAgZmlsdGVyOiAkLmdyZXAsXG4gICAgICBldmVyeTogZnVuY3Rpb24gZXZlcnkob2JqLCB0ZXN0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuXG4gICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICAgICAgICAgIGlmICghKHJlc3VsdCA9IHRlc3QuY2FsbChudWxsLCB2YWwsIGtleSwgb2JqKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICB9LFxuICAgICAgc29tZTogZnVuY3Rpb24gc29tZShvYmosIHRlc3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICAgICAgICAgIGlmIChyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICB9LFxuICAgICAgbWl4aW46ICQuZXh0ZW5kLFxuICAgICAgaWRlbnRpdHk6IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9LFxuICAgICAgY2xvbmU6IGZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwge30sIG9iaik7XG4gICAgICB9LFxuICAgICAgZ2V0SWRHZW5lcmF0b3I6IGZ1bmN0aW9uIGdldElkR2VuZXJhdG9yKCkge1xuICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGNvdW50ZXIrKztcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0aWZ5OiBmdW5jdGlvbiB0ZW1wbGF0aWZ5KG9iaikge1xuICAgICAgICByZXR1cm4gJC5pc0Z1bmN0aW9uKG9iaikgPyBvYmogOiB0ZW1wbGF0ZTtcblxuICAgICAgICBmdW5jdGlvbiB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZlcjogZnVuY3Rpb24gZGVmZXIoZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgICB9LFxuICAgICAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgbGF0ZXIsXG4gICAgICAgICAgICAgIGNhbGxOb3c7XG5cbiAgICAgICAgICBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblxuICAgICAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgdGhyb3R0bGU6IGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQpIHtcbiAgICAgICAgdmFyIGNvbnRleHQsIGFyZ3MsIHRpbWVvdXQsIHJlc3VsdCwgcHJldmlvdXMsIGxhdGVyO1xuICAgICAgICBwcmV2aW91cyA9IDA7XG5cbiAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICAgICAgICBwcmV2aW91cyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuXG4gICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KHZhbCkge1xuICAgICAgICByZXR1cm4gXy5pc1N0cmluZyh2YWwpID8gdmFsIDogSlNPTi5zdHJpbmdpZnkodmFsKTtcbiAgICAgIH0sXG4gICAgICBndWlkOiBmdW5jdGlvbiBndWlkKCkge1xuICAgICAgICBmdW5jdGlvbiBfcDgocykge1xuICAgICAgICAgIHZhciBwID0gKE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDIsIDgpO1xuICAgICAgICAgIHJldHVybiBzID8gXCItXCIgKyBwLnN1YnN0cigwLCA0KSArIFwiLVwiICsgcC5zdWJzdHIoNCwgNCkgOiBwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFwidHQtXCIgKyBfcDgoKSArIF9wOCh0cnVlKSArIF9wOCh0cnVlKSArIF9wOCgpO1xuICAgICAgfSxcbiAgICAgIG5vb3A6IGZ1bmN0aW9uIG5vb3AoKSB7fVxuICAgIH07XG4gIH0oKTtcblxuICB2YXIgVkVSU0lPTiA9IFwiMS4zLjFcIjtcblxuICB2YXIgdG9rZW5pemVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHJldHVybiB7XG4gICAgICBub253b3JkOiBub253b3JkLFxuICAgICAgd2hpdGVzcGFjZTogd2hpdGVzcGFjZSxcbiAgICAgIG5ncmFtOiBuZ3JhbSxcbiAgICAgIG9iajoge1xuICAgICAgICBub253b3JkOiBnZXRPYmpUb2tlbml6ZXIobm9ud29yZCksXG4gICAgICAgIHdoaXRlc3BhY2U6IGdldE9ialRva2VuaXplcih3aGl0ZXNwYWNlKSxcbiAgICAgICAgbmdyYW06IGdldE9ialRva2VuaXplcihuZ3JhbSlcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gd2hpdGVzcGFjZShzdHIpIHtcbiAgICAgIHN0ciA9IF8udG9TdHIoc3RyKTtcbiAgICAgIHJldHVybiBzdHIgPyBzdHIuc3BsaXQoL1xccysvKSA6IFtdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vbndvcmQoc3RyKSB7XG4gICAgICBzdHIgPSBfLnRvU3RyKHN0cik7XG4gICAgICByZXR1cm4gc3RyID8gc3RyLnNwbGl0KC9cXFcrLykgOiBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZ3JhbShzdHIpIHtcbiAgICAgIHN0ciA9IF8udG9TdHIoc3RyKTtcbiAgICAgIHZhciB0b2tlbnMgPSBbXSxcbiAgICAgICAgICB3b3JkID0gXCJcIjtcblxuICAgICAgXy5lYWNoKHN0ci5zcGxpdChcIlwiKSwgZnVuY3Rpb24gKGNoYXIpIHtcbiAgICAgICAgaWYgKGNoYXIubWF0Y2goL1xccysvKSkge1xuICAgICAgICAgIHdvcmQgPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHdvcmQgKyBjaGFyKTtcbiAgICAgICAgICB3b3JkICs9IGNoYXI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE9ialRva2VuaXplcih0b2tlbml6ZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRLZXkoa2V5cykge1xuICAgICAgICBrZXlzID0gXy5pc0FycmF5KGtleXMpID8ga2V5cyA6IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRva2VuaXplKG8pIHtcbiAgICAgICAgICB2YXIgdG9rZW5zID0gW107XG5cbiAgICAgICAgICBfLmVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHRva2VucyA9IHRva2Vucy5jb25jYXQodG9rZW5pemVyKF8udG9TdHIob1trXSkpKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH1cbiAgfSgpO1xuXG4gIHZhciBMcnVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIExydUNhY2hlKG1heFNpemUpIHtcbiAgICAgIHRoaXMubWF4U2l6ZSA9IF8uaXNOdW1iZXIobWF4U2l6ZSkgPyBtYXhTaXplIDogMTAwO1xuICAgICAgdGhpcy5yZXNldCgpO1xuXG4gICAgICBpZiAodGhpcy5tYXhTaXplIDw9IDApIHtcbiAgICAgICAgdGhpcy5zZXQgPSB0aGlzLmdldCA9ICQubm9vcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfLm1peGluKExydUNhY2hlLnByb3RvdHlwZSwge1xuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWwpIHtcbiAgICAgICAgdmFyIHRhaWxJdGVtID0gdGhpcy5saXN0LnRhaWwsXG4gICAgICAgICAgICBub2RlO1xuXG4gICAgICAgIGlmICh0aGlzLnNpemUgPj0gdGhpcy5tYXhTaXplKSB7XG4gICAgICAgICAgdGhpcy5saXN0LnJlbW92ZSh0YWlsSXRlbSk7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuaGFzaFt0YWlsSXRlbS5rZXldO1xuICAgICAgICAgIHRoaXMuc2l6ZS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUgPSB0aGlzLmhhc2hba2V5XSkge1xuICAgICAgICAgIG5vZGUudmFsID0gdmFsO1xuICAgICAgICAgIHRoaXMubGlzdC5tb3ZlVG9Gcm9udChub2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gbmV3IE5vZGUoa2V5LCB2YWwpO1xuICAgICAgICAgIHRoaXMubGlzdC5hZGQobm9kZSk7XG4gICAgICAgICAgdGhpcy5oYXNoW2tleV0gPSBub2RlO1xuICAgICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5oYXNoW2tleV07XG5cbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICB0aGlzLmxpc3QubW92ZVRvRnJvbnQobm9kZSk7XG4gICAgICAgICAgcmV0dXJuIG5vZGUudmFsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLmhhc2ggPSB7fTtcbiAgICAgICAgdGhpcy5saXN0ID0gbmV3IExpc3QoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIExpc3QoKSB7XG4gICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO1xuICAgIH1cblxuICAgIF8ubWl4aW4oTGlzdC5wcm90b3R5cGUsIHtcbiAgICAgIGFkZDogZnVuY3Rpb24gYWRkKG5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgICAgIG5vZGUubmV4dCA9IHRoaXMuaGVhZDtcbiAgICAgICAgICB0aGlzLmhlYWQucHJldiA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhlYWQgPSBub2RlO1xuICAgICAgICB0aGlzLnRhaWwgPSB0aGlzLnRhaWwgfHwgbm9kZTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShub2RlKSB7XG4gICAgICAgIG5vZGUucHJldiA/IG5vZGUucHJldi5uZXh0ID0gbm9kZS5uZXh0IDogdGhpcy5oZWFkID0gbm9kZS5uZXh0O1xuICAgICAgICBub2RlLm5leHQgPyBub2RlLm5leHQucHJldiA9IG5vZGUucHJldiA6IHRoaXMudGFpbCA9IG5vZGUucHJldjtcbiAgICAgIH0sXG4gICAgICBtb3ZlVG9Gcm9udDogZnVuY3Rpb24gbW92ZVRvRnJvbnQobm9kZSkge1xuICAgICAgICB0aGlzLnJlbW92ZShub2RlKTtcbiAgICAgICAgdGhpcy5hZGQobm9kZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBOb2RlKGtleSwgdmFsKSB7XG4gICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgIHRoaXMudmFsID0gdmFsO1xuICAgICAgdGhpcy5wcmV2ID0gdGhpcy5uZXh0ID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gTHJ1Q2FjaGU7XG4gIH0oKTtcblxuICB2YXIgUGVyc2lzdGVudFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgTE9DQUxfU1RPUkFHRTtcblxuICAgIHRyeSB7XG4gICAgICBMT0NBTF9TVE9SQUdFID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgIExPQ0FMX1NUT1JBR0Uuc2V0SXRlbShcIn5+flwiLCBcIiFcIik7XG4gICAgICBMT0NBTF9TVE9SQUdFLnJlbW92ZUl0ZW0oXCJ+fn5cIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBMT0NBTF9TVE9SQUdFID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBQZXJzaXN0ZW50U3RvcmFnZShuYW1lc3BhY2UsIG92ZXJyaWRlKSB7XG4gICAgICB0aGlzLnByZWZpeCA9IFtcIl9fXCIsIG5hbWVzcGFjZSwgXCJfX1wiXS5qb2luKFwiXCIpO1xuICAgICAgdGhpcy50dGxLZXkgPSBcIl9fdHRsX19cIjtcbiAgICAgIHRoaXMua2V5TWF0Y2hlciA9IG5ldyBSZWdFeHAoXCJeXCIgKyBfLmVzY2FwZVJlZ0V4Q2hhcnModGhpcy5wcmVmaXgpKTtcbiAgICAgIHRoaXMubHMgPSBvdmVycmlkZSB8fCBMT0NBTF9TVE9SQUdFO1xuICAgICAgIXRoaXMubHMgJiYgdGhpcy5fbm9vcCgpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oUGVyc2lzdGVudFN0b3JhZ2UucHJvdG90eXBlLCB7XG4gICAgICBfcHJlZml4OiBmdW5jdGlvbiBfcHJlZml4KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXggKyBrZXk7XG4gICAgICB9LFxuICAgICAgX3R0bEtleTogZnVuY3Rpb24gX3R0bEtleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZWZpeChrZXkpICsgdGhpcy50dGxLZXk7XG4gICAgICB9LFxuICAgICAgX25vb3A6IGZ1bmN0aW9uIF9ub29wKCkge1xuICAgICAgICB0aGlzLmdldCA9IHRoaXMuc2V0ID0gdGhpcy5yZW1vdmUgPSB0aGlzLmNsZWFyID0gdGhpcy5pc0V4cGlyZWQgPSBfLm5vb3A7XG4gICAgICB9LFxuICAgICAgX3NhZmVTZXQ6IGZ1bmN0aW9uIF9zYWZlU2V0KGtleSwgdmFsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5scy5zZXRJdGVtKGtleSwgdmFsKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGVyci5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX25vb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBpcmVkKGtleSkpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZShrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlY29kZSh0aGlzLmxzLmdldEl0ZW0odGhpcy5fcHJlZml4KGtleSkpKTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbCwgdHRsKSB7XG4gICAgICAgIGlmIChfLmlzTnVtYmVyKHR0bCkpIHtcbiAgICAgICAgICB0aGlzLl9zYWZlU2V0KHRoaXMuX3R0bEtleShrZXkpLCBlbmNvZGUobm93KCkgKyB0dGwpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxzLnJlbW92ZUl0ZW0odGhpcy5fdHRsS2V5KGtleSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhZmVTZXQodGhpcy5fcHJlZml4KGtleSksIGVuY29kZSh2YWwpKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcbiAgICAgICAgdGhpcy5scy5yZW1vdmVJdGVtKHRoaXMuX3R0bEtleShrZXkpKTtcbiAgICAgICAgdGhpcy5scy5yZW1vdmVJdGVtKHRoaXMuX3ByZWZpeChrZXkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICB2YXIgaSxcbiAgICAgICAgICAgIGtleXMgPSBnYXRoZXJNYXRjaGluZ0tleXModGhpcy5rZXlNYXRjaGVyKTtcblxuICAgICAgICBmb3IgKGkgPSBrZXlzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgIHRoaXMucmVtb3ZlKGtleXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgaXNFeHBpcmVkOiBmdW5jdGlvbiBpc0V4cGlyZWQoa2V5KSB7XG4gICAgICAgIHZhciB0dGwgPSBkZWNvZGUodGhpcy5scy5nZXRJdGVtKHRoaXMuX3R0bEtleShrZXkpKSk7XG4gICAgICAgIHJldHVybiBfLmlzTnVtYmVyKHR0bCkgJiYgbm93KCkgPiB0dGwgPyB0cnVlIDogZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUGVyc2lzdGVudFN0b3JhZ2U7XG5cbiAgICBmdW5jdGlvbiBub3coKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF8uaXNVbmRlZmluZWQodmFsKSA/IG51bGwgOiB2YWwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZSh2YWwpIHtcbiAgICAgIHJldHVybiAkLnBhcnNlSlNPTih2YWwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdhdGhlck1hdGNoaW5nS2V5cyhrZXlNYXRjaGVyKSB7XG4gICAgICB2YXIgaSxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAga2V5cyA9IFtdLFxuICAgICAgICAgIGxlbiA9IExPQ0FMX1NUT1JBR0UubGVuZ3RoO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKChrZXkgPSBMT0NBTF9TVE9SQUdFLmtleShpKSkubWF0Y2goa2V5TWF0Y2hlcikpIHtcbiAgICAgICAgICBrZXlzLnB1c2goa2V5LnJlcGxhY2Uoa2V5TWF0Y2hlciwgXCJcIikpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgfSgpO1xuXG4gIHZhciBUcmFuc3BvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgcGVuZGluZ1JlcXVlc3RzQ291bnQgPSAwLFxuICAgICAgICBwZW5kaW5nUmVxdWVzdHMgPSB7fSxcbiAgICAgICAgc2hhcmVkQ2FjaGUgPSBuZXcgTHJ1Q2FjaGUoMTApO1xuXG4gICAgZnVuY3Rpb24gVHJhbnNwb3J0KG8pIHtcbiAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgdGhpcy5tYXhQZW5kaW5nUmVxdWVzdHMgPSBvLm1heFBlbmRpbmdSZXF1ZXN0cyB8fCA2O1xuICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdFJlcSA9IG51bGw7XG4gICAgICB0aGlzLl9zZW5kID0gby50cmFuc3BvcnQ7XG4gICAgICB0aGlzLl9nZXQgPSBvLmxpbWl0ZXIgPyBvLmxpbWl0ZXIodGhpcy5fZ2V0KSA6IHRoaXMuX2dldDtcbiAgICAgIHRoaXMuX2NhY2hlID0gby5jYWNoZSA9PT0gZmFsc2UgPyBuZXcgTHJ1Q2FjaGUoMCkgOiBzaGFyZWRDYWNoZTtcbiAgICB9XG5cbiAgICBUcmFuc3BvcnQuc2V0TWF4UGVuZGluZ1JlcXVlc3RzID0gZnVuY3Rpb24gc2V0TWF4UGVuZGluZ1JlcXVlc3RzKG51bSkge1xuICAgICAgdGhpcy5tYXhQZW5kaW5nUmVxdWVzdHMgPSBudW07XG4gICAgfTtcblxuICAgIFRyYW5zcG9ydC5yZXNldENhY2hlID0gZnVuY3Rpb24gcmVzZXRDYWNoZSgpIHtcbiAgICAgIHNoYXJlZENhY2hlLnJlc2V0KCk7XG4gICAgfTtcblxuICAgIF8ubWl4aW4oVHJhbnNwb3J0LnByb3RvdHlwZSwge1xuICAgICAgX2ZpbmdlcnByaW50OiBmdW5jdGlvbiBmaW5nZXJwcmludChvKSB7XG4gICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICByZXR1cm4gby51cmwgKyBvLnR5cGUgKyAkLnBhcmFtKG8uZGF0YSB8fCB7fSk7XG4gICAgICB9LFxuICAgICAgX2dldDogZnVuY3Rpb24gX2dldChvLCBjYikge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBmaW5nZXJwcmludCxcbiAgICAgICAgICAgIGpxWGhyO1xuICAgICAgICBmaW5nZXJwcmludCA9IHRoaXMuX2ZpbmdlcnByaW50KG8pO1xuXG4gICAgICAgIGlmICh0aGlzLmNhbmNlbGxlZCB8fCBmaW5nZXJwcmludCAhPT0gdGhpcy5sYXN0UmVxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGpxWGhyID0gcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XSkge1xuICAgICAgICAgIGpxWGhyLmRvbmUoZG9uZSkuZmFpbChmYWlsKTtcbiAgICAgICAgfSBlbHNlIGlmIChwZW5kaW5nUmVxdWVzdHNDb3VudCA8IHRoaXMubWF4UGVuZGluZ1JlcXVlc3RzKSB7XG4gICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQrKztcbiAgICAgICAgICBwZW5kaW5nUmVxdWVzdHNbZmluZ2VycHJpbnRdID0gdGhpcy5fc2VuZChvKS5kb25lKGRvbmUpLmZhaWwoZmFpbCkuYWx3YXlzKGFsd2F5cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbkRlY2tSZXF1ZXN0QXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRvbmUocmVzcCkge1xuICAgICAgICAgIGNiKG51bGwsIHJlc3ApO1xuXG4gICAgICAgICAgdGhhdC5fY2FjaGUuc2V0KGZpbmdlcnByaW50LCByZXNwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZhaWwoKSB7XG4gICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhbHdheXMoKSB7XG4gICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQtLTtcbiAgICAgICAgICBkZWxldGUgcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XTtcblxuICAgICAgICAgIGlmICh0aGF0Lm9uRGVja1JlcXVlc3RBcmdzKSB7XG4gICAgICAgICAgICB0aGF0Ll9nZXQuYXBwbHkodGhhdCwgdGhhdC5vbkRlY2tSZXF1ZXN0QXJncyk7XG5cbiAgICAgICAgICAgIHRoYXQub25EZWNrUmVxdWVzdEFyZ3MgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KG8sIGNiKSB7XG4gICAgICAgIHZhciByZXNwLCBmaW5nZXJwcmludDtcbiAgICAgICAgY2IgPSBjYiB8fCAkLm5vb3A7XG4gICAgICAgIG8gPSBfLmlzU3RyaW5nKG8pID8ge1xuICAgICAgICAgIHVybDogb1xuICAgICAgICB9IDogbyB8fCB7fTtcbiAgICAgICAgZmluZ2VycHJpbnQgPSB0aGlzLl9maW5nZXJwcmludChvKTtcbiAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXN0UmVxID0gZmluZ2VycHJpbnQ7XG5cbiAgICAgICAgaWYgKHJlc3AgPSB0aGlzLl9jYWNoZS5nZXQoZmluZ2VycHJpbnQpKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZ2V0KG8sIGNiKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gVHJhbnNwb3J0O1xuICB9KCk7XG5cbiAgdmFyIFNlYXJjaEluZGV4ID0gd2luZG93LlNlYXJjaEluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIENISUxEUkVOID0gXCJjXCIsXG4gICAgICAgIElEUyA9IFwiaVwiO1xuXG4gICAgZnVuY3Rpb24gU2VhcmNoSW5kZXgobykge1xuICAgICAgbyA9IG8gfHwge307XG5cbiAgICAgIGlmICghby5kYXR1bVRva2VuaXplciB8fCAhby5xdWVyeVRva2VuaXplcikge1xuICAgICAgICAkLmVycm9yKFwiZGF0dW1Ub2tlbml6ZXIgYW5kIHF1ZXJ5VG9rZW5pemVyIGFyZSBib3RoIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlkZW50aWZ5ID0gby5pZGVudGlmeSB8fCBfLnN0cmluZ2lmeTtcbiAgICAgIHRoaXMuZGF0dW1Ub2tlbml6ZXIgPSBvLmRhdHVtVG9rZW5pemVyO1xuICAgICAgdGhpcy5xdWVyeVRva2VuaXplciA9IG8ucXVlcnlUb2tlbml6ZXI7XG4gICAgICB0aGlzLm1hdGNoQW55UXVlcnlUb2tlbiA9IG8ubWF0Y2hBbnlRdWVyeVRva2VuO1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oU2VhcmNoSW5kZXgucHJvdG90eXBlLCB7XG4gICAgICBib290c3RyYXA6IGZ1bmN0aW9uIGJvb3RzdHJhcChvKSB7XG4gICAgICAgIHRoaXMuZGF0dW1zID0gby5kYXR1bXM7XG4gICAgICAgIHRoaXMudHJpZSA9IG8udHJpZTtcbiAgICAgIH0sXG4gICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChkYXRhKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgZGF0YSA9IF8uaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV07XG5cbiAgICAgICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uIChkYXR1bSkge1xuICAgICAgICAgIHZhciBpZCwgdG9rZW5zO1xuICAgICAgICAgIHRoYXQuZGF0dW1zW2lkID0gdGhhdC5pZGVudGlmeShkYXR1bSldID0gZGF0dW07XG4gICAgICAgICAgdG9rZW5zID0gbm9ybWFsaXplVG9rZW5zKHRoYXQuZGF0dW1Ub2tlbml6ZXIoZGF0dW0pKTtcblxuICAgICAgICAgIF8uZWFjaCh0b2tlbnMsIGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIG5vZGUsIGNoYXJzLCBjaDtcbiAgICAgICAgICAgIG5vZGUgPSB0aGF0LnRyaWU7XG4gICAgICAgICAgICBjaGFycyA9IHRva2VuLnNwbGl0KFwiXCIpO1xuXG4gICAgICAgICAgICB3aGlsZSAoY2ggPSBjaGFycy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSBub2RlW0NISUxEUkVOXVtjaF0gfHwgKG5vZGVbQ0hJTERSRU5dW2NoXSA9IG5ld05vZGUoKSk7XG4gICAgICAgICAgICAgIG5vZGVbSURTXS5wdXNoKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWRzKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIF8ubWFwKGlkcywgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuZGF0dW1zW2lkXTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2gocXVlcnkpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgdG9rZW5zLFxuICAgICAgICAgICAgbWF0Y2hlcztcbiAgICAgICAgdG9rZW5zID0gbm9ybWFsaXplVG9rZW5zKHRoaXMucXVlcnlUb2tlbml6ZXIocXVlcnkpKTtcblxuICAgICAgICBfLmVhY2godG9rZW5zLCBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICB2YXIgbm9kZSwgY2hhcnMsIGNoLCBpZHM7XG5cbiAgICAgICAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA9PT0gMCAmJiAhdGhhdC5tYXRjaEFueVF1ZXJ5VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlID0gdGhhdC50cmllO1xuICAgICAgICAgIGNoYXJzID0gdG9rZW4uc3BsaXQoXCJcIik7XG5cbiAgICAgICAgICB3aGlsZSAobm9kZSAmJiAoY2ggPSBjaGFycy5zaGlmdCgpKSkge1xuICAgICAgICAgICAgbm9kZSA9IG5vZGVbQ0hJTERSRU5dW2NoXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobm9kZSAmJiBjaGFycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlkcyA9IG5vZGVbSURTXS5zbGljZSgwKTtcbiAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzID8gZ2V0SW50ZXJzZWN0aW9uKG1hdGNoZXMsIGlkcykgOiBpZHM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhhdC5tYXRjaEFueVF1ZXJ5VG9rZW4pIHtcbiAgICAgICAgICAgICAgbWF0Y2hlcyA9IFtdO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbWF0Y2hlcyA/IF8ubWFwKHVuaXF1ZShtYXRjaGVzKSwgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuZGF0dW1zW2lkXTtcbiAgICAgICAgfSkgOiBbXTtcbiAgICAgIH0sXG4gICAgICBhbGw6IGZ1bmN0aW9uIGFsbCgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRhdHVtcykge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKHRoaXMuZGF0dW1zW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgIH0sXG4gICAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuZGF0dW1zID0ge307XG4gICAgICAgIHRoaXMudHJpZSA9IG5ld05vZGUoKTtcbiAgICAgIH0sXG4gICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXR1bXM6IHRoaXMuZGF0dW1zLFxuICAgICAgICAgIHRyaWU6IHRoaXMudHJpZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFNlYXJjaEluZGV4O1xuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplVG9rZW5zKHRva2Vucykge1xuICAgICAgdG9rZW5zID0gXy5maWx0ZXIodG9rZW5zLCBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICEhdG9rZW47XG4gICAgICB9KTtcbiAgICAgIHRva2VucyA9IF8ubWFwKHRva2VucywgZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0b2tlbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld05vZGUoKSB7XG4gICAgICB2YXIgbm9kZSA9IHt9O1xuICAgICAgbm9kZVtJRFNdID0gW107XG4gICAgICBub2RlW0NISUxEUkVOXSA9IHt9O1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5pcXVlKGFycmF5KSB7XG4gICAgICB2YXIgc2VlbiA9IHt9LFxuICAgICAgICAgIHVuaXF1ZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICghc2VlblthcnJheVtpXV0pIHtcbiAgICAgICAgICBzZWVuW2FycmF5W2ldXSA9IHRydWU7XG4gICAgICAgICAgdW5pcXVlcy5wdXNoKGFycmF5W2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5pcXVlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oYXJyYXlBLCBhcnJheUIpIHtcbiAgICAgIHZhciBhaSA9IDAsXG4gICAgICAgICAgYmkgPSAwLFxuICAgICAgICAgIGludGVyc2VjdGlvbiA9IFtdO1xuICAgICAgYXJyYXlBID0gYXJyYXlBLnNvcnQoKTtcbiAgICAgIGFycmF5QiA9IGFycmF5Qi5zb3J0KCk7XG4gICAgICB2YXIgbGVuQXJyYXlBID0gYXJyYXlBLmxlbmd0aCxcbiAgICAgICAgICBsZW5BcnJheUIgPSBhcnJheUIubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoYWkgPCBsZW5BcnJheUEgJiYgYmkgPCBsZW5BcnJheUIpIHtcbiAgICAgICAgaWYgKGFycmF5QVthaV0gPCBhcnJheUJbYmldKSB7XG4gICAgICAgICAgYWkrKztcbiAgICAgICAgfSBlbHNlIGlmIChhcnJheUFbYWldID4gYXJyYXlCW2JpXSkge1xuICAgICAgICAgIGJpKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW9uLnB1c2goYXJyYXlBW2FpXSk7XG4gICAgICAgICAgYWkrKztcbiAgICAgICAgICBiaSsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gICAgfVxuICB9KCk7XG5cbiAgdmFyIFByZWZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGtleXM7XG4gICAga2V5cyA9IHtcbiAgICAgIGRhdGE6IFwiZGF0YVwiLFxuICAgICAgcHJvdG9jb2w6IFwicHJvdG9jb2xcIixcbiAgICAgIHRodW1icHJpbnQ6IFwidGh1bWJwcmludFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFByZWZldGNoKG8pIHtcbiAgICAgIHRoaXMudXJsID0gby51cmw7XG4gICAgICB0aGlzLnR0bCA9IG8udHRsO1xuICAgICAgdGhpcy5jYWNoZSA9IG8uY2FjaGU7XG4gICAgICB0aGlzLnByZXBhcmUgPSBvLnByZXBhcmU7XG4gICAgICB0aGlzLnRyYW5zZm9ybSA9IG8udHJhbnNmb3JtO1xuICAgICAgdGhpcy50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydDtcbiAgICAgIHRoaXMudGh1bWJwcmludCA9IG8udGh1bWJwcmludDtcbiAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBQZXJzaXN0ZW50U3RvcmFnZShvLmNhY2hlS2V5KTtcbiAgICB9XG5cbiAgICBfLm1peGluKFByZWZldGNoLnByb3RvdHlwZSwge1xuICAgICAgX3NldHRpbmdzOiBmdW5jdGlvbiBzZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgc3RvcmU6IGZ1bmN0aW9uIHN0b3JlKGRhdGEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLmRhdGEsIGRhdGEsIHRoaXMudHRsKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCwgdGhpcy50dGwpO1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KGtleXMudGh1bWJwcmludCwgdGhpcy50aHVtYnByaW50LCB0aGlzLnR0bCk7XG4gICAgICB9LFxuICAgICAgZnJvbUNhY2hlOiBmdW5jdGlvbiBmcm9tQ2FjaGUoKSB7XG4gICAgICAgIHZhciBzdG9yZWQgPSB7fSxcbiAgICAgICAgICAgIGlzRXhwaXJlZDtcblxuICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0b3JlZC5kYXRhID0gdGhpcy5zdG9yYWdlLmdldChrZXlzLmRhdGEpO1xuICAgICAgICBzdG9yZWQucHJvdG9jb2wgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMucHJvdG9jb2wpO1xuICAgICAgICBzdG9yZWQudGh1bWJwcmludCA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy50aHVtYnByaW50KTtcbiAgICAgICAgaXNFeHBpcmVkID0gc3RvcmVkLnRodW1icHJpbnQgIT09IHRoaXMudGh1bWJwcmludCB8fCBzdG9yZWQucHJvdG9jb2wgIT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICByZXR1cm4gc3RvcmVkLmRhdGEgJiYgIWlzRXhwaXJlZCA/IHN0b3JlZC5kYXRhIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBmcm9tTmV0d29yazogZnVuY3Rpb24gZnJvbU5ldHdvcmsoY2IpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgc2V0dGluZ3M7XG5cbiAgICAgICAgaWYgKCFjYikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldHRpbmdzID0gdGhpcy5wcmVwYXJlKHRoaXMuX3NldHRpbmdzKCkpO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydChzZXR0aW5ncykuZmFpbChvbkVycm9yKS5kb25lKG9uUmVzcG9uc2UpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoKSB7XG4gICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvblJlc3BvbnNlKHJlc3ApIHtcbiAgICAgICAgICBjYihudWxsLCB0aGF0LnRyYW5zZm9ybShyZXNwKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBQcmVmZXRjaDtcbiAgfSgpO1xuXG4gIHZhciBSZW1vdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBSZW1vdGUobykge1xuICAgICAgdGhpcy51cmwgPSBvLnVybDtcbiAgICAgIHRoaXMucHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgIHRoaXMudHJhbnNmb3JtID0gby50cmFuc2Zvcm07XG4gICAgICB0aGlzLmluZGV4UmVzcG9uc2UgPSBvLmluZGV4UmVzcG9uc2U7XG4gICAgICB0aGlzLnRyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQoe1xuICAgICAgICBjYWNoZTogby5jYWNoZSxcbiAgICAgICAgbGltaXRlcjogby5saW1pdGVyLFxuICAgICAgICB0cmFuc3BvcnQ6IG8udHJhbnNwb3J0LFxuICAgICAgICBtYXhQZW5kaW5nUmVxdWVzdHM6IG8ubWF4UGVuZGluZ1JlcXVlc3RzXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfLm1peGluKFJlbW90ZS5wcm90b3R5cGUsIHtcbiAgICAgIF9zZXR0aW5nczogZnVuY3Rpb24gc2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KHF1ZXJ5LCBjYikge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBzZXR0aW5ncztcblxuICAgICAgICBpZiAoIWNiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcXVlcnkgPSBxdWVyeSB8fCBcIlwiO1xuICAgICAgICBzZXR0aW5ncyA9IHRoaXMucHJlcGFyZShxdWVyeSwgdGhpcy5fc2V0dGluZ3MoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXQoc2V0dGluZ3MsIG9uUmVzcG9uc2UpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uUmVzcG9uc2UoZXJyLCByZXNwKSB7XG4gICAgICAgICAgZXJyID8gY2IoW10pIDogY2IodGhhdC50cmFuc2Zvcm0ocmVzcCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2FuY2VsTGFzdFJlcXVlc3Q6IGZ1bmN0aW9uIGNhbmNlbExhc3RSZXF1ZXN0KCkge1xuICAgICAgICB0aGlzLnRyYW5zcG9ydC5jYW5jZWwoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBSZW1vdGU7XG4gIH0oKTtcblxuICB2YXIgb1BhcnNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHJldHVybiBmdW5jdGlvbiBwYXJzZShvKSB7XG4gICAgICB2YXIgZGVmYXVsdHMsIHNvcnRlcjtcbiAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICBpbml0aWFsaXplOiB0cnVlLFxuICAgICAgICBpZGVudGlmeTogXy5zdHJpbmdpZnksXG4gICAgICAgIGRhdHVtVG9rZW5pemVyOiBudWxsLFxuICAgICAgICBxdWVyeVRva2VuaXplcjogbnVsbCxcbiAgICAgICAgbWF0Y2hBbnlRdWVyeVRva2VuOiBmYWxzZSxcbiAgICAgICAgc3VmZmljaWVudDogNSxcbiAgICAgICAgaW5kZXhSZW1vdGU6IGZhbHNlLFxuICAgICAgICBzb3J0ZXI6IG51bGwsXG4gICAgICAgIGxvY2FsOiBbXSxcbiAgICAgICAgcHJlZmV0Y2g6IG51bGwsXG4gICAgICAgIHJlbW90ZTogbnVsbFxuICAgICAgfTtcbiAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvIHx8IHt9KTtcbiAgICAgICFvLmRhdHVtVG9rZW5pemVyICYmICQuZXJyb3IoXCJkYXR1bVRva2VuaXplciBpcyByZXF1aXJlZFwiKTtcbiAgICAgICFvLnF1ZXJ5VG9rZW5pemVyICYmICQuZXJyb3IoXCJxdWVyeVRva2VuaXplciBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHNvcnRlciA9IG8uc29ydGVyO1xuICAgICAgby5zb3J0ZXIgPSBzb3J0ZXIgPyBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4geC5zb3J0KHNvcnRlcik7XG4gICAgICB9IDogXy5pZGVudGl0eTtcbiAgICAgIG8ubG9jYWwgPSBfLmlzRnVuY3Rpb24oby5sb2NhbCkgPyBvLmxvY2FsKCkgOiBvLmxvY2FsO1xuICAgICAgby5wcmVmZXRjaCA9IHBhcnNlUHJlZmV0Y2goby5wcmVmZXRjaCk7XG4gICAgICBvLnJlbW90ZSA9IHBhcnNlUmVtb3RlKG8ucmVtb3RlKTtcbiAgICAgIHJldHVybiBvO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwYXJzZVByZWZldGNoKG8pIHtcbiAgICAgIHZhciBkZWZhdWx0cztcblxuICAgICAgaWYgKCFvKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICB0dGw6IDI0ICogNjAgKiA2MCAqIDFlMyxcbiAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgIGNhY2hlS2V5OiBudWxsLFxuICAgICAgICB0aHVtYnByaW50OiBcIlwiLFxuICAgICAgICBwcmVwYXJlOiBfLmlkZW50aXR5LFxuICAgICAgICB0cmFuc2Zvcm06IF8uaWRlbnRpdHksXG4gICAgICAgIHRyYW5zcG9ydDogbnVsbFxuICAgICAgfTtcbiAgICAgIG8gPSBfLmlzU3RyaW5nKG8pID8ge1xuICAgICAgICB1cmw6IG9cbiAgICAgIH0gOiBvO1xuICAgICAgbyA9IF8ubWl4aW4oZGVmYXVsdHMsIG8pO1xuICAgICAgIW8udXJsICYmICQuZXJyb3IoXCJwcmVmZXRjaCByZXF1aXJlcyB1cmwgdG8gYmUgc2V0XCIpO1xuICAgICAgby50cmFuc2Zvcm0gPSBvLmZpbHRlciB8fCBvLnRyYW5zZm9ybTtcbiAgICAgIG8uY2FjaGVLZXkgPSBvLmNhY2hlS2V5IHx8IG8udXJsO1xuICAgICAgby50aHVtYnByaW50ID0gVkVSU0lPTiArIG8udGh1bWJwcmludDtcbiAgICAgIG8udHJhbnNwb3J0ID0gby50cmFuc3BvcnQgPyBjYWxsYmFja1RvRGVmZXJyZWQoby50cmFuc3BvcnQpIDogJC5hamF4O1xuICAgICAgcmV0dXJuIG87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VSZW1vdGUobykge1xuICAgICAgdmFyIGRlZmF1bHRzO1xuXG4gICAgICBpZiAoIW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgcHJlcGFyZTogbnVsbCxcbiAgICAgICAgcmVwbGFjZTogbnVsbCxcbiAgICAgICAgd2lsZGNhcmQ6IG51bGwsXG4gICAgICAgIGxpbWl0ZXI6IG51bGwsXG4gICAgICAgIHJhdGVMaW1pdEJ5OiBcImRlYm91bmNlXCIsXG4gICAgICAgIHJhdGVMaW1pdFdhaXQ6IDMwMCxcbiAgICAgICAgdHJhbnNmb3JtOiBfLmlkZW50aXR5LFxuICAgICAgICB0cmFuc3BvcnQ6IG51bGxcbiAgICAgIH07XG4gICAgICBvID0gXy5pc1N0cmluZyhvKSA/IHtcbiAgICAgICAgdXJsOiBvXG4gICAgICB9IDogbztcbiAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvKTtcbiAgICAgICFvLnVybCAmJiAkLmVycm9yKFwicmVtb3RlIHJlcXVpcmVzIHVybCB0byBiZSBzZXRcIik7XG4gICAgICBvLnRyYW5zZm9ybSA9IG8uZmlsdGVyIHx8IG8udHJhbnNmb3JtO1xuICAgICAgby5wcmVwYXJlID0gdG9SZW1vdGVQcmVwYXJlKG8pO1xuICAgICAgby5saW1pdGVyID0gdG9MaW1pdGVyKG8pO1xuICAgICAgby50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydCA/IGNhbGxiYWNrVG9EZWZlcnJlZChvLnRyYW5zcG9ydCkgOiAkLmFqYXg7XG4gICAgICBkZWxldGUgby5yZXBsYWNlO1xuICAgICAgZGVsZXRlIG8ud2lsZGNhcmQ7XG4gICAgICBkZWxldGUgby5yYXRlTGltaXRCeTtcbiAgICAgIGRlbGV0ZSBvLnJhdGVMaW1pdFdhaXQ7XG4gICAgICByZXR1cm4gbztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b1JlbW90ZVByZXBhcmUobykge1xuICAgICAgdmFyIHByZXBhcmUsIHJlcGxhY2UsIHdpbGRjYXJkO1xuICAgICAgcHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgIHJlcGxhY2UgPSBvLnJlcGxhY2U7XG4gICAgICB3aWxkY2FyZCA9IG8ud2lsZGNhcmQ7XG5cbiAgICAgIGlmIChwcmVwYXJlKSB7XG4gICAgICAgIHJldHVybiBwcmVwYXJlO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICBwcmVwYXJlID0gcHJlcGFyZUJ5UmVwbGFjZTtcbiAgICAgIH0gZWxzZSBpZiAoby53aWxkY2FyZCkge1xuICAgICAgICBwcmVwYXJlID0gcHJlcGFyZUJ5V2lsZGNhcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmVwYXJlID0gaWRlbnRpdHlQcmVwYXJlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJlcGFyZTtcblxuICAgICAgZnVuY3Rpb24gcHJlcGFyZUJ5UmVwbGFjZShxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgc2V0dGluZ3MudXJsID0gcmVwbGFjZShzZXR0aW5ncy51cmwsIHF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwcmVwYXJlQnlXaWxkY2FyZChxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsLnJlcGxhY2Uod2lsZGNhcmQsIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkpO1xuICAgICAgICByZXR1cm4gc2V0dGluZ3M7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlkZW50aXR5UHJlcGFyZShxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvTGltaXRlcihvKSB7XG4gICAgICB2YXIgbGltaXRlciwgbWV0aG9kLCB3YWl0O1xuICAgICAgbGltaXRlciA9IG8ubGltaXRlcjtcbiAgICAgIG1ldGhvZCA9IG8ucmF0ZUxpbWl0Qnk7XG4gICAgICB3YWl0ID0gby5yYXRlTGltaXRXYWl0O1xuXG4gICAgICBpZiAoIWxpbWl0ZXIpIHtcbiAgICAgICAgbGltaXRlciA9IC9edGhyb3R0bGUkL2kudGVzdChtZXRob2QpID8gdGhyb3R0bGUod2FpdCkgOiBkZWJvdW5jZSh3YWl0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxpbWl0ZXI7XG5cbiAgICAgIGZ1bmN0aW9uIGRlYm91bmNlKHdhaXQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlKGZuKSB7XG4gICAgICAgICAgcmV0dXJuIF8uZGVib3VuY2UoZm4sIHdhaXQpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aHJvdHRsZSh3YWl0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiB0aHJvdHRsZShmbikge1xuICAgICAgICAgIHJldHVybiBfLnRocm90dGxlKGZuLCB3YWl0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxsYmFja1RvRGVmZXJyZWQoZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyKG8pIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICBmbihvLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG5cbiAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHJlc3ApIHtcbiAgICAgICAgICBfLmRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9KCk7XG5cbiAgdmFyIEJsb29kaG91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgb2xkO1xuICAgIG9sZCA9IHdpbmRvdyAmJiB3aW5kb3cuQmxvb2Rob3VuZDtcblxuICAgIGZ1bmN0aW9uIEJsb29kaG91bmQobykge1xuICAgICAgbyA9IG9QYXJzZXIobyk7XG4gICAgICB0aGlzLnNvcnRlciA9IG8uc29ydGVyO1xuICAgICAgdGhpcy5pZGVudGlmeSA9IG8uaWRlbnRpZnk7XG4gICAgICB0aGlzLnN1ZmZpY2llbnQgPSBvLnN1ZmZpY2llbnQ7XG4gICAgICB0aGlzLmluZGV4UmVtb3RlID0gby5pbmRleFJlbW90ZTtcbiAgICAgIHRoaXMubG9jYWwgPSBvLmxvY2FsO1xuICAgICAgdGhpcy5yZW1vdGUgPSBvLnJlbW90ZSA/IG5ldyBSZW1vdGUoby5yZW1vdGUpIDogbnVsbDtcbiAgICAgIHRoaXMucHJlZmV0Y2ggPSBvLnByZWZldGNoID8gbmV3IFByZWZldGNoKG8ucHJlZmV0Y2gpIDogbnVsbDtcbiAgICAgIHRoaXMuaW5kZXggPSBuZXcgU2VhcmNoSW5kZXgoe1xuICAgICAgICBpZGVudGlmeTogdGhpcy5pZGVudGlmeSxcbiAgICAgICAgZGF0dW1Ub2tlbml6ZXI6IG8uZGF0dW1Ub2tlbml6ZXIsXG4gICAgICAgIHF1ZXJ5VG9rZW5pemVyOiBvLnF1ZXJ5VG9rZW5pemVyXG4gICAgICB9KTtcbiAgICAgIG8uaW5pdGlhbGl6ZSAhPT0gZmFsc2UgJiYgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgQmxvb2Rob3VuZC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgIHdpbmRvdyAmJiAod2luZG93LkJsb29kaG91bmQgPSBvbGQpO1xuICAgICAgcmV0dXJuIEJsb29kaG91bmQ7XG4gICAgfTtcblxuICAgIEJsb29kaG91bmQudG9rZW5pemVycyA9IHRva2VuaXplcnM7XG5cbiAgICBfLm1peGluKEJsb29kaG91bmQucHJvdG90eXBlLCB7XG4gICAgICBfX3R0QWRhcHRlcjogZnVuY3Rpb24gdHRBZGFwdGVyKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZSA/IHdpdGhBc3luYyA6IHdpdGhvdXRBc3luYztcblxuICAgICAgICBmdW5jdGlvbiB3aXRoQXN5bmMocXVlcnksIHN5bmMsIGFzeW5jKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQuc2VhcmNoKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB3aXRob3V0QXN5bmMocXVlcnksIHN5bmMpIHtcbiAgICAgICAgICByZXR1cm4gdGhhdC5zZWFyY2gocXVlcnksIHN5bmMpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX2xvYWRQcmVmZXRjaDogZnVuY3Rpb24gbG9hZFByZWZldGNoKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBkZWZlcnJlZCxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ7XG4gICAgICAgIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgIGlmICghdGhpcy5wcmVmZXRjaCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZXJpYWxpemVkID0gdGhpcy5wcmVmZXRjaC5mcm9tQ2FjaGUoKSkge1xuICAgICAgICAgIHRoaXMuaW5kZXguYm9vdHN0cmFwKHNlcmlhbGl6ZWQpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByZWZldGNoLmZyb21OZXR3b3JrKGRvbmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblxuICAgICAgICBmdW5jdGlvbiBkb25lKGVyciwgZGF0YSkge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGF0LmFkZChkYXRhKTtcbiAgICAgICAgICB0aGF0LnByZWZldGNoLnN0b3JlKHRoYXQuaW5kZXguc2VyaWFsaXplKCkpO1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9pbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBkZWZlcnJlZDtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgICh0aGlzLmluaXRQcm9taXNlID0gdGhpcy5fbG9hZFByZWZldGNoKCkpLmRvbmUoYWRkTG9jYWxUb0luZGV4KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5pbml0UHJvbWlzZTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRMb2NhbFRvSW5kZXgoKSB7XG4gICAgICAgICAgdGhhdC5hZGQodGhhdC5sb2NhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKGZvcmNlKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pbml0UHJvbWlzZSB8fCBmb3JjZSA/IHRoaXMuX2luaXRpYWxpemUoKSA6IHRoaXMuaW5pdFByb21pc2U7XG4gICAgICB9LFxuICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoZGF0YSkge1xuICAgICAgICB0aGlzLmluZGV4LmFkZChkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWRzKSB7XG4gICAgICAgIGlkcyA9IF8uaXNBcnJheShpZHMpID8gaWRzIDogW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5nZXQoaWRzKTtcbiAgICAgIH0sXG4gICAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChxdWVyeSwgc3luYywgYXN5bmMpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgbG9jYWw7XG4gICAgICAgIHN5bmMgPSBzeW5jIHx8IF8ubm9vcDtcbiAgICAgICAgYXN5bmMgPSBhc3luYyB8fCBfLm5vb3A7XG4gICAgICAgIGxvY2FsID0gdGhpcy5zb3J0ZXIodGhpcy5pbmRleC5zZWFyY2gocXVlcnkpKTtcbiAgICAgICAgc3luYyh0aGlzLnJlbW90ZSA/IGxvY2FsLnNsaWNlKCkgOiBsb2NhbCk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVtb3RlICYmIGxvY2FsLmxlbmd0aCA8IHRoaXMuc3VmZmljaWVudCkge1xuICAgICAgICAgIHRoaXMucmVtb3RlLmdldChxdWVyeSwgcHJvY2Vzc1JlbW90ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW1vdGUpIHtcbiAgICAgICAgICB0aGlzLnJlbW90ZS5jYW5jZWxMYXN0UmVxdWVzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1JlbW90ZShyZW1vdGUpIHtcbiAgICAgICAgICB2YXIgbm9uRHVwbGljYXRlcyA9IFtdO1xuXG4gICAgICAgICAgXy5lYWNoKHJlbW90ZSwgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICFfLnNvbWUobG9jYWwsIGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGF0LmlkZW50aWZ5KHIpID09PSB0aGF0LmlkZW50aWZ5KGwpO1xuICAgICAgICAgICAgfSkgJiYgbm9uRHVwbGljYXRlcy5wdXNoKHIpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhhdC5pbmRleFJlbW90ZSAmJiB0aGF0LmFkZChub25EdXBsaWNhdGVzKTtcbiAgICAgICAgICBhc3luYyhub25EdXBsaWNhdGVzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFsbDogZnVuY3Rpb24gYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5hbGwoKTtcbiAgICAgIH0sXG4gICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuaW5kZXgucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgY2xlYXJQcmVmZXRjaENhY2hlOiBmdW5jdGlvbiBjbGVhclByZWZldGNoQ2FjaGUoKSB7XG4gICAgICAgIHRoaXMucHJlZmV0Y2ggJiYgdGhpcy5wcmVmZXRjaC5jbGVhcigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBjbGVhclJlbW90ZUNhY2hlOiBmdW5jdGlvbiBjbGVhclJlbW90ZUNhY2hlKCkge1xuICAgICAgICBUcmFuc3BvcnQucmVzZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICB0dEFkYXB0ZXI6IGZ1bmN0aW9uIHR0QWRhcHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX190dEFkYXB0ZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBCbG9vZGhvdW5kO1xuICB9KCk7XG5cbiAgcmV0dXJuIEJsb29kaG91bmQ7XG59KTtcblxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uIChhMCkge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoYTApO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShyb290W1wialF1ZXJ5XCJdKTtcbiAgfVxufSkodGhpcywgZnVuY3Rpb24gKCQpIHtcbiAgdmFyIF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNc2llOiBmdW5jdGlvbiBpc01zaWUoKSB7XG4gICAgICAgIHJldHVybiAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpID8gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKG1zaWUgfHJ2OikoXFxkKyguXFxkKyk/KS9pKVsyXSA6IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGlzQmxhbmtTdHJpbmc6IGZ1bmN0aW9uIGlzQmxhbmtTdHJpbmcoc3RyKSB7XG4gICAgICAgIHJldHVybiAhc3RyIHx8IC9eXFxzKiQvLnRlc3Qoc3RyKTtcbiAgICAgIH0sXG4gICAgICBlc2NhcGVSZWdFeENoYXJzOiBmdW5jdGlvbiBlc2NhcGVSZWdFeENoYXJzKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgIH0sXG4gICAgICBpc1N0cmluZzogZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiO1xuICAgICAgfSxcbiAgICAgIGlzTnVtYmVyOiBmdW5jdGlvbiBpc051bWJlcihvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwibnVtYmVyXCI7XG4gICAgICB9LFxuICAgICAgaXNBcnJheTogJC5pc0FycmF5LFxuICAgICAgaXNGdW5jdGlvbjogJC5pc0Z1bmN0aW9uLFxuICAgICAgaXNPYmplY3Q6ICQuaXNQbGFpbk9iamVjdCxcbiAgICAgIGlzVW5kZWZpbmVkOiBmdW5jdGlvbiBpc1VuZGVmaW5lZChvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCI7XG4gICAgICB9LFxuICAgICAgaXNFbGVtZW50OiBmdW5jdGlvbiBpc0VsZW1lbnQob2JqKSB7XG4gICAgICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgICAgIH0sXG4gICAgICBpc0pRdWVyeTogZnVuY3Rpb24gaXNKUXVlcnkob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiAkO1xuICAgICAgfSxcbiAgICAgIHRvU3RyOiBmdW5jdGlvbiB0b1N0cihzKSB7XG4gICAgICAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHMpIHx8IHMgPT09IG51bGwgPyBcIlwiIDogcyArIFwiXCI7XG4gICAgICB9LFxuICAgICAgYmluZDogJC5wcm94eSxcbiAgICAgIGVhY2g6IGZ1bmN0aW9uIGVhY2goY29sbGVjdGlvbiwgY2IpIHtcbiAgICAgICAgJC5lYWNoKGNvbGxlY3Rpb24sIHJldmVyc2VBcmdzKTtcblxuICAgICAgICBmdW5jdGlvbiByZXZlcnNlQXJncyhpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY2IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1hcDogJC5tYXAsXG4gICAgICBmaWx0ZXI6ICQuZ3JlcCxcbiAgICAgIGV2ZXJ5OiBmdW5jdGlvbiBldmVyeShvYmosIHRlc3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgICAgaWYgKCEocmVzdWx0ID0gdGVzdC5jYWxsKG51bGwsIHZhbCwga2V5LCBvYmopKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBzb21lOiBmdW5jdGlvbiBzb21lKG9iaiwgdGVzdCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9IHRlc3QuY2FsbChudWxsLCB2YWwsIGtleSwgb2JqKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBtaXhpbjogJC5leHRlbmQsXG4gICAgICBpZGVudGl0eTogZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICAgIH0sXG4gICAgICBjbG9uZTogZnVuY3Rpb24gY2xvbmUob2JqKSB7XG4gICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgb2JqKTtcbiAgICAgIH0sXG4gICAgICBnZXRJZEdlbmVyYXRvcjogZnVuY3Rpb24gZ2V0SWRHZW5lcmF0b3IoKSB7XG4gICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY291bnRlcisrO1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRpZnk6IGZ1bmN0aW9uIHRlbXBsYXRpZnkob2JqKSB7XG4gICAgICAgIHJldHVybiAkLmlzRnVuY3Rpb24ob2JqKSA/IG9iaiA6IHRlbXBsYXRlO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRlbXBsYXRlKCkge1xuICAgICAgICAgIHJldHVybiBTdHJpbmcob2JqKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmVyOiBmdW5jdGlvbiBkZWZlcihmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICAgIH0sXG4gICAgICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgICAgIHZhciB0aW1lb3V0LCByZXN1bHQ7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgICBsYXRlcixcbiAgICAgICAgICAgICAgY2FsbE5vdztcblxuICAgICAgICAgIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXG4gICAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0aHJvdHRsZTogZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCkge1xuICAgICAgICB2YXIgY29udGV4dCwgYXJncywgdGltZW91dCwgcmVzdWx0LCBwcmV2aW91cywgbGF0ZXI7XG4gICAgICAgIHByZXZpb3VzID0gMDtcblxuICAgICAgICBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgICAgIHByZXZpb3VzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkodmFsKSB7XG4gICAgICAgIHJldHVybiBfLmlzU3RyaW5nKHZhbCkgPyB2YWwgOiBKU09OLnN0cmluZ2lmeSh2YWwpO1xuICAgICAgfSxcbiAgICAgIGd1aWQ6IGZ1bmN0aW9uIGd1aWQoKSB7XG4gICAgICAgIGZ1bmN0aW9uIF9wOChzKSB7XG4gICAgICAgICAgdmFyIHAgPSAoTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMiwgOCk7XG4gICAgICAgICAgcmV0dXJuIHMgPyBcIi1cIiArIHAuc3Vic3RyKDAsIDQpICsgXCItXCIgKyBwLnN1YnN0cig0LCA0KSA6IHA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gXCJ0dC1cIiArIF9wOCgpICsgX3A4KHRydWUpICsgX3A4KHRydWUpICsgX3A4KCk7XG4gICAgICB9LFxuICAgICAgbm9vcDogZnVuY3Rpb24gbm9vcCgpIHt9XG4gICAgfTtcbiAgfSgpO1xuXG4gIHZhciBXV1cgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgZGVmYXVsdENsYXNzTmFtZXMgPSB7XG4gICAgICB3cmFwcGVyOiBcInR3aXR0ZXItdHlwZWFoZWFkXCIsXG4gICAgICBpbnB1dDogXCJ0dC1pbnB1dFwiLFxuICAgICAgaGludDogXCJ0dC1oaW50XCIsXG4gICAgICBtZW51OiBcInR0LW1lbnVcIixcbiAgICAgIGRhdGFzZXQ6IFwidHQtZGF0YXNldFwiLFxuICAgICAgc3VnZ2VzdGlvbjogXCJ0dC1zdWdnZXN0aW9uXCIsXG4gICAgICBzZWxlY3RhYmxlOiBcInR0LXNlbGVjdGFibGVcIixcbiAgICAgIGVtcHR5OiBcInR0LWVtcHR5XCIsXG4gICAgICBvcGVuOiBcInR0LW9wZW5cIixcbiAgICAgIGN1cnNvcjogXCJ0dC1jdXJzb3JcIixcbiAgICAgIGhpZ2hsaWdodDogXCJ0dC1oaWdobGlnaHRcIlxuICAgIH07XG4gICAgcmV0dXJuIGJ1aWxkO1xuXG4gICAgZnVuY3Rpb24gYnVpbGQobykge1xuICAgICAgdmFyIHd3dywgY2xhc3NlcztcbiAgICAgIGNsYXNzZXMgPSBfLm1peGluKHt9LCBkZWZhdWx0Q2xhc3NOYW1lcywgbyk7XG4gICAgICB3d3cgPSB7XG4gICAgICAgIGNzczogYnVpbGRDc3MoKSxcbiAgICAgICAgY2xhc3NlczogY2xhc3NlcyxcbiAgICAgICAgaHRtbDogYnVpbGRIdG1sKGNsYXNzZXMpLFxuICAgICAgICBzZWxlY3RvcnM6IGJ1aWxkU2VsZWN0b3JzKGNsYXNzZXMpXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3NzOiB3d3cuY3NzLFxuICAgICAgICBodG1sOiB3d3cuaHRtbCxcbiAgICAgICAgY2xhc3Nlczogd3d3LmNsYXNzZXMsXG4gICAgICAgIHNlbGVjdG9yczogd3d3LnNlbGVjdG9ycyxcbiAgICAgICAgbWl4aW46IGZ1bmN0aW9uIG1peGluKG8pIHtcbiAgICAgICAgICBfLm1peGluKG8sIHd3dyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRIdG1sKGMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyYXBwZXI6ICc8c3BhbiBjbGFzcz1cIicgKyBjLndyYXBwZXIgKyAnXCI+PC9zcGFuPicsXG4gICAgICAgIG1lbnU6ICc8ZGl2IHJvbGU9XCJsaXN0Ym94XCIgY2xhc3M9XCInICsgYy5tZW51ICsgJ1wiPjwvZGl2PidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRTZWxlY3RvcnMoY2xhc3Nlcykge1xuICAgICAgdmFyIHNlbGVjdG9ycyA9IHt9O1xuXG4gICAgICBfLmVhY2goY2xhc3NlcywgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgc2VsZWN0b3JzW2tdID0gXCIuXCIgKyB2O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxlY3RvcnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDc3MoKSB7XG4gICAgICB2YXIgY3NzID0ge1xuICAgICAgICB3cmFwcGVyOiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiXG4gICAgICAgIH0sXG4gICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgbGVmdDogXCIwXCIsXG4gICAgICAgICAgYm9yZGVyQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICBib3hTaGFkb3c6IFwibm9uZVwiLFxuICAgICAgICAgIG9wYWNpdHk6IFwiMVwiXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0V2l0aE5vSGludDoge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIlxuICAgICAgICB9LFxuICAgICAgICBtZW51OiB7XG4gICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICB0b3A6IFwiMTAwJVwiLFxuICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgIHpJbmRleDogXCIxMDBcIixcbiAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICB9LFxuICAgICAgICBsdHI6IHtcbiAgICAgICAgICBsZWZ0OiBcIjBcIixcbiAgICAgICAgICByaWdodDogXCJhdXRvXCJcbiAgICAgICAgfSxcbiAgICAgICAgcnRsOiB7XG4gICAgICAgICAgbGVmdDogXCJhdXRvXCIsXG4gICAgICAgICAgcmlnaHQ6IFwiIDBcIlxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZiAoXy5pc01zaWUoKSkge1xuICAgICAgICBfLm1peGluKGNzcy5pbnB1dCwge1xuICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJ1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3KVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3NzO1xuICAgIH1cbiAgfSgpO1xuXG4gIHZhciBFdmVudEJ1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBuYW1lc3BhY2UsIGRlcHJlY2F0aW9uTWFwO1xuICAgIG5hbWVzcGFjZSA9IFwidHlwZWFoZWFkOlwiO1xuICAgIGRlcHJlY2F0aW9uTWFwID0ge1xuICAgICAgcmVuZGVyOiBcInJlbmRlcmVkXCIsXG4gICAgICBjdXJzb3JjaGFuZ2U6IFwiY3Vyc29yY2hhbmdlZFwiLFxuICAgICAgc2VsZWN0OiBcInNlbGVjdGVkXCIsXG4gICAgICBhdXRvY29tcGxldGU6IFwiYXV0b2NvbXBsZXRlZFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEV2ZW50QnVzKG8pIHtcbiAgICAgIGlmICghbyB8fCAhby5lbCkge1xuICAgICAgICAkLmVycm9yKFwiRXZlbnRCdXMgaW5pdGlhbGl6ZWQgd2l0aG91dCBlbFwiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kZWwgPSAkKG8uZWwpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oRXZlbnRCdXMucHJvdG90eXBlLCB7XG4gICAgICBfdHJpZ2dlcjogZnVuY3Rpb24gX3RyaWdnZXIodHlwZSwgYXJncykge1xuICAgICAgICB2YXIgJGUgPSAkLkV2ZW50KG5hbWVzcGFjZSArIHR5cGUpO1xuICAgICAgICB0aGlzLiRlbC50cmlnZ2VyLmNhbGwodGhpcy4kZWwsICRlLCBhcmdzIHx8IFtdKTtcbiAgICAgICAgcmV0dXJuICRlO1xuICAgICAgfSxcbiAgICAgIGJlZm9yZTogZnVuY3Rpb24gYmVmb3JlKHR5cGUpIHtcbiAgICAgICAgdmFyIGFyZ3MsICRlO1xuICAgICAgICBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAkZSA9IHRoaXMuX3RyaWdnZXIoXCJiZWZvcmVcIiArIHR5cGUsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gJGUuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgICB9LFxuICAgICAgdHJpZ2dlcjogZnVuY3Rpb24gdHJpZ2dlcih0eXBlKSB7XG4gICAgICAgIHZhciBkZXByZWNhdGVkVHlwZTtcblxuICAgICAgICB0aGlzLl90cmlnZ2VyKHR5cGUsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG5cbiAgICAgICAgaWYgKGRlcHJlY2F0ZWRUeXBlID0gZGVwcmVjYXRpb25NYXBbdHlwZV0pIHtcbiAgICAgICAgICB0aGlzLl90cmlnZ2VyKGRlcHJlY2F0ZWRUeXBlLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gRXZlbnRCdXM7XG4gIH0oKTtcblxuICB2YXIgRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHNwbGl0dGVyID0gL1xccysvLFxuICAgICAgICBuZXh0VGljayA9IGdldE5leHRUaWNrKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3luYzogb25TeW5jLFxuICAgICAgb25Bc3luYzogb25Bc3luYyxcbiAgICAgIG9mZjogb2ZmLFxuICAgICAgdHJpZ2dlcjogdHJpZ2dlclxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBvbihtZXRob2QsIHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgdmFyIHR5cGU7XG5cbiAgICAgIGlmICghY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHR5cGVzID0gdHlwZXMuc3BsaXQoc3BsaXR0ZXIpO1xuICAgICAgY2IgPSBjb250ZXh0ID8gYmluZENvbnRleHQoY2IsIGNvbnRleHQpIDogY2I7XG4gICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG5cbiAgICAgIHdoaWxlICh0eXBlID0gdHlwZXMuc2hpZnQoKSkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3NbdHlwZV0gPSB0aGlzLl9jYWxsYmFja3NbdHlwZV0gfHwge1xuICAgICAgICAgIHN5bmM6IFtdLFxuICAgICAgICAgIGFzeW5jOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrc1t0eXBlXVttZXRob2RdLnB1c2goY2IpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkFzeW5jKHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIG9uLmNhbGwodGhpcywgXCJhc3luY1wiLCB0eXBlcywgY2IsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uU3luYyh0eXBlcywgY2IsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBvbi5jYWxsKHRoaXMsIFwic3luY1wiLCB0eXBlcywgY2IsIGNvbnRleHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9mZih0eXBlcykge1xuICAgICAgdmFyIHR5cGU7XG5cbiAgICAgIGlmICghdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICB0eXBlcyA9IHR5cGVzLnNwbGl0KHNwbGl0dGVyKTtcblxuICAgICAgd2hpbGUgKHR5cGUgPSB0eXBlcy5zaGlmdCgpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdHlwZV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyaWdnZXIodHlwZXMpIHtcbiAgICAgIHZhciB0eXBlLCBjYWxsYmFja3MsIGFyZ3MsIHN5bmNGbHVzaCwgYXN5bmNGbHVzaDtcblxuICAgICAgaWYgKCF0aGlzLl9jYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHR5cGVzID0gdHlwZXMuc3BsaXQoc3BsaXR0ZXIpO1xuICAgICAgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgd2hpbGUgKCh0eXBlID0gdHlwZXMuc2hpZnQoKSkgJiYgKGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1t0eXBlXSkpIHtcbiAgICAgICAgc3luY0ZsdXNoID0gZ2V0Rmx1c2goY2FsbGJhY2tzLnN5bmMsIHRoaXMsIFt0eXBlXS5jb25jYXQoYXJncykpO1xuICAgICAgICBhc3luY0ZsdXNoID0gZ2V0Rmx1c2goY2FsbGJhY2tzLmFzeW5jLCB0aGlzLCBbdHlwZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgc3luY0ZsdXNoKCkgJiYgbmV4dFRpY2soYXN5bmNGbHVzaCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEZsdXNoKGNhbGxiYWNrcywgY29udGV4dCwgYXJncykge1xuICAgICAgcmV0dXJuIGZsdXNoO1xuXG4gICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgdmFyIGNhbmNlbGxlZDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FsbGJhY2tzLmxlbmd0aDsgIWNhbmNlbGxlZCAmJiBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICBjYW5jZWxsZWQgPSBjYWxsYmFja3NbaV0uYXBwbHkoY29udGV4dCwgYXJncykgPT09IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFjYW5jZWxsZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV4dFRpY2soKSB7XG4gICAgICB2YXIgbmV4dFRpY2tGbjtcblxuICAgICAgaWYgKHdpbmRvdy5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgbmV4dFRpY2tGbiA9IGZ1bmN0aW9uIG5leHRUaWNrU2V0SW1tZWRpYXRlKGZuKSB7XG4gICAgICAgICAgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0VGlja0ZuID0gZnVuY3Rpb24gbmV4dFRpY2tTZXRUaW1lb3V0KGZuKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV4dFRpY2tGbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiaW5kQ29udGV4dChmbiwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIGZuLmJpbmQgPyBmbi5iaW5kKGNvbnRleHQpIDogZnVuY3Rpb24gKCkge1xuICAgICAgICBmbi5hcHBseShjb250ZXh0LCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgfTtcbiAgICB9XG4gIH0oKTtcblxuICB2YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKGRvYykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgbm9kZTogbnVsbCxcbiAgICAgIHBhdHRlcm46IG51bGwsXG4gICAgICB0YWdOYW1lOiBcInN0cm9uZ1wiLFxuICAgICAgY2xhc3NOYW1lOiBudWxsLFxuICAgICAgd29yZHNPbmx5OiBmYWxzZSxcbiAgICAgIGNhc2VTZW5zaXRpdmU6IGZhbHNlLFxuICAgICAgZGlhY3JpdGljSW5zZW5zaXRpdmU6IGZhbHNlXG4gICAgfTtcbiAgICB2YXIgYWNjZW50ZWQgPSB7XG4gICAgICBBOiBcIltBYcKqw4Atw4XDoC3DpcSALcSFx43HjsiALciDyKbIp+G0rOG1g+G4gOG4geG6muG6oC3huqPigpDihIDihIHihLvikpzikrbik5DjjbEt4420446ALeOOhOOOiOOOieOOqS3jjq/jj4Ljj4rjj5/jj7/vvKHvvYFdXCIsXG4gICAgICBCOiBcIltCYuG0ruG1h+G4gi3huIfihKzikp3ikrfik5HjjbTjjoUt446H44+D44+I44+U44+d77yi772CXVwiLFxuICAgICAgQzogXCJbQ2PDh8OnxIYtxI3htpzihIDihILihIPihIXihIbihK3iha3ihb3ikp7ikrjik5Ljjbbjjojjjonjjp3jjqDjjqTjj4Qt44+H77yj772DXVwiLFxuICAgICAgRDogXCJbRGTEjsSPx4Qtx4bHsS3Hs+G0sOG1iOG4ii3huJPihYXihYbiha7ihb7ikp/ikrnik5Pji4/jjbLjjbct4425446X446tLeOOr+OPheOPiO+8pO+9hF1cIixcbiAgICAgIEU6IFwiW0Vlw4gtw4vDqC3Dq8SSLcSbyIQtyIfIqMip4bSx4bWJ4biYLeG4m+G6uC3hur3igpHihKHihK/ihLDihYfikqDikrrik5TjiZDji43ji47vvKXvvYVdXCIsXG4gICAgICBGOiBcIltGZuG2oOG4nuG4n+KEieKEseKEu+KSoeKSu+KTleOOii3jjozjjpnvrIAt76yE77ym772GXVwiLFxuICAgICAgRzogXCJbR2fEnC3Eo8emx6fHtMe14bSz4bWN4big4bih4oSK4pKi4pK84pOW44uM44uN446H446NLeOOj+OOk+OOrOOPhuOPieOPkuOPv++8p++9h11cIixcbiAgICAgIEg6IFwiW0hoxKTEpcieyJ/KsOG0tOG4oi3huKvhupbihIst4oSO4pKj4pK94pOX44uM442x446QLeOOlOOPiuOPi+OPl++8qO+9iF1cIixcbiAgICAgIEk6IFwiW0lpw4wtw4/DrC3Dr8SoLcSwxLLEs8ePx5DIiC3Ii+G0teG1ouG4rOG4reG7iC3hu4vigbHihJDihJHihLnihYjihaAt4oWj4oWlLeKFqOKFquKFq+KFsC3ihbPihbUt4oW44oW64oW74pKk4pK+4pOY442644+M44+V76yB76yD77yp772JXVwiLFxuICAgICAgSjogXCJbSmrEsi3EtceHLceMx7DKsuG0tuKFieKSpeKSv+KTmeKxvO+8qu+9il1cIixcbiAgICAgIEs6IFwiW0trxLbEt8eox6nhtLfhtY/huLAt4bi14oSq4pKm4pOA4pOa446E446F446J446P446R446Y446e446i446m446q4464446+44+A44+G44+NLeOPj++8q++9i11cIixcbiAgICAgIEw6IFwiW0xsxLktxYDHhy3Hicuh4bS44bi24bi34bi6LeG4veKEkuKEk+KEoeKFrOKFvOKSp+KTgeKTm+OLj+OOiOOOieOPkC3jj5Pjj5Xjj5bjj7/vrILvrITvvKzvvYxdXCIsXG4gICAgICBNOiBcIltNbeG0ueG1kOG4vi3huYPihKDihKLihLPiha/ihb/ikqjik4Lik5zjjbct4425446D446G446O446S446W446ZLeOOqOOOq+OOs+OOt+OOueOOveOOv+OPgeOPguOPjuOPkOOPlC3jj5bjj5jjj5njj57jj5/vvK3vvY1dXCIsXG4gICAgICBOOiBcIltObsORw7HFgy3FiceKLceMx7jHueG0uuG5hC3huYvigb/ihJXihJbikqnik4Pik53jjoHjjovjjprjjrHjjrXjjrvjj4zjj5HvvK7vvY5dXCIsXG4gICAgICBPOiBcIltPb8K6w5Itw5bDsi3DtsWMLcWRxqDGoceRx5LHqseryIwtyI/Irsiv4bS84bWS4buMLeG7j+KCkuKEheKEluKEtOKSquKThOKTnuONteOPh+OPkuOPlu+8r++9j11cIixcbiAgICAgIFA6IFwiW1Bw4bS+4bWW4bmULeG5l+KEmeKSq+KTheKTn+OJkOONseONtuOOgOOOiuOOqS3jjqzjjrDjjrTjjrrjj4vjj5ct44+a77yw772QXVwiLFxuICAgICAgUTogXCJbUXHihJrikqzik4bik6Djj4PvvLHvvZFdXCIsXG4gICAgICBSOiBcIltScsWULcWZyJAtyJPKs+G0v+G1o+G5mC3huZvhuZ7huZ/igqjihJst4oSd4pKt4pOH4pOh44uN4420446tLeOOr+OPmuOPm++8su+9kl1cIixcbiAgICAgIFM6IFwiW1NzxZotxaHFv8iYyJnLouG5oC3huaPigqjihIHihKDikq7ik4jik6Ljjqfjjqjjjq4t446z44+b44+c76yG77yz772TXVwiLFxuICAgICAgVDogXCJbVHTFoi3FpciayJvhtYDhtZfhuaot4bmx4bqX4oSh4oSi4pKv4pOJ4pOj44mQ44uP446U44+P76yF76yG77y0772UXVwiLFxuICAgICAgVTogXCJbVXXDmS3DnMO5LcO8xagtxbPGr8awx5PHlMiULciX4bWB4bWY4bWk4bmyLeG5t+G7pC3hu6fihIbikrDik4rik6TjjbPjjbrvvLXvvZVdXCIsXG4gICAgICBWOiBcIltWduG1m+G1peG5vC3hub/ihaMt4oWn4oWzLeKFt+KSseKTi+KTpeKxveOLjuONteOOtC3jjrnjj5zjj57vvLbvvZZdXCIsXG4gICAgICBXOiBcIltXd8W0xbXKt+G1guG6gC3huonhupjikrLik4zik6bjjrot446/44+d77y3772XXVwiLFxuICAgICAgWDogXCJbWHjLo+G6ii3huo3igpPihLvihagt4oWr4oW4LeKFu+KSs+KTjeKTp+OPk++8uO+9mF1cIixcbiAgICAgIFk6IFwiW1l5w53DvcO/xbYtxbjIssizyrjhuo7huo/hupnhu7It4bu54pK04pOO4pOo44+J77y5772ZXVwiLFxuICAgICAgWjogXCJbWnrFuS3FvsexLcez4ba74bqQLeG6leKEpOKEqOKSteKTj+KTqeOOkC3jjpTvvLrvvZpdXCJcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiBoaWdodGxpZ2h0KG8pIHtcbiAgICAgIHZhciByZWdleDtcbiAgICAgIG8gPSBfLm1peGluKHt9LCBkZWZhdWx0cywgbyk7XG5cbiAgICAgIGlmICghby5ub2RlIHx8ICFvLnBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvLnBhdHRlcm4gPSBfLmlzQXJyYXkoby5wYXR0ZXJuKSA/IG8ucGF0dGVybiA6IFtvLnBhdHRlcm5dO1xuICAgICAgcmVnZXggPSBnZXRSZWdleChvLnBhdHRlcm4sIG8uY2FzZVNlbnNpdGl2ZSwgby53b3Jkc09ubHksIG8uZGlhY3JpdGljSW5zZW5zaXRpdmUpO1xuICAgICAgdHJhdmVyc2Uoby5ub2RlLCBoaWdodGxpZ2h0VGV4dE5vZGUpO1xuXG4gICAgICBmdW5jdGlvbiBoaWdodGxpZ2h0VGV4dE5vZGUodGV4dE5vZGUpIHtcbiAgICAgICAgdmFyIG1hdGNoLCBwYXR0ZXJuTm9kZSwgd3JhcHBlck5vZGU7XG5cbiAgICAgICAgaWYgKG1hdGNoID0gcmVnZXguZXhlYyh0ZXh0Tm9kZS5kYXRhKSkge1xuICAgICAgICAgIHdyYXBwZXJOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoby50YWdOYW1lKTtcbiAgICAgICAgICBvLmNsYXNzTmFtZSAmJiAod3JhcHBlck5vZGUuY2xhc3NOYW1lID0gby5jbGFzc05hbWUpO1xuICAgICAgICAgIHBhdHRlcm5Ob2RlID0gdGV4dE5vZGUuc3BsaXRUZXh0KG1hdGNoLmluZGV4KTtcbiAgICAgICAgICBwYXR0ZXJuTm9kZS5zcGxpdFRleHQobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICB3cmFwcGVyTm9kZS5hcHBlbmRDaGlsZChwYXR0ZXJuTm9kZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgIHRleHROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHdyYXBwZXJOb2RlLCBwYXR0ZXJuTm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISFtYXRjaDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdHJhdmVyc2UoZWwsIGhpZ2h0bGlnaHRUZXh0Tm9kZSkge1xuICAgICAgICB2YXIgY2hpbGROb2RlLFxuICAgICAgICAgICAgVEVYVF9OT0RFX1RZUEUgPSAzO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNoaWxkTm9kZSA9IGVsLmNoaWxkTm9kZXNbaV07XG5cbiAgICAgICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlID09PSBURVhUX05PREVfVFlQRSkge1xuICAgICAgICAgICAgaSArPSBoaWdodGxpZ2h0VGV4dE5vZGUoY2hpbGROb2RlKSA/IDEgOiAwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmF2ZXJzZShjaGlsZE5vZGUsIGhpZ2h0bGlnaHRUZXh0Tm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFjY2VudF9yZXBsYWNlcihjaHIpIHtcbiAgICAgIHJldHVybiBhY2NlbnRlZFtjaHIudG9VcHBlckNhc2UoKV0gfHwgY2hyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFJlZ2V4KHBhdHRlcm5zLCBjYXNlU2Vuc2l0aXZlLCB3b3Jkc09ubHksIGRpYWNyaXRpY0luc2Vuc2l0aXZlKSB7XG4gICAgICB2YXIgZXNjYXBlZFBhdHRlcm5zID0gW10sXG4gICAgICAgICAgcmVnZXhTdHI7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwYXR0ZXJucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgZXNjYXBlZFdvcmQgPSBfLmVzY2FwZVJlZ0V4Q2hhcnMocGF0dGVybnNbaV0pO1xuXG4gICAgICAgIGlmIChkaWFjcml0aWNJbnNlbnNpdGl2ZSkge1xuICAgICAgICAgIGVzY2FwZWRXb3JkID0gZXNjYXBlZFdvcmQucmVwbGFjZSgvXFxTL2csIGFjY2VudF9yZXBsYWNlcik7XG4gICAgICAgIH1cblxuICAgICAgICBlc2NhcGVkUGF0dGVybnMucHVzaChlc2NhcGVkV29yZCk7XG4gICAgICB9XG5cbiAgICAgIHJlZ2V4U3RyID0gd29yZHNPbmx5ID8gXCJcXFxcYihcIiArIGVzY2FwZWRQYXR0ZXJucy5qb2luKFwifFwiKSArIFwiKVxcXFxiXCIgOiBcIihcIiArIGVzY2FwZWRQYXR0ZXJucy5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgcmV0dXJuIGNhc2VTZW5zaXRpdmUgPyBuZXcgUmVnRXhwKHJlZ2V4U3RyKSA6IG5ldyBSZWdFeHAocmVnZXhTdHIsIFwiaVwiKTtcbiAgICB9XG4gIH0od2luZG93LmRvY3VtZW50KTtcblxuICB2YXIgSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgc3BlY2lhbEtleUNvZGVNYXA7XG4gICAgc3BlY2lhbEtleUNvZGVNYXAgPSB7XG4gICAgICA5OiBcInRhYlwiLFxuICAgICAgMjc6IFwiZXNjXCIsXG4gICAgICAzNzogXCJsZWZ0XCIsXG4gICAgICAzOTogXCJyaWdodFwiLFxuICAgICAgMTM6IFwiZW50ZXJcIixcbiAgICAgIDM4OiBcInVwXCIsXG4gICAgICA0MDogXCJkb3duXCJcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5wdXQobywgd3d3KSB7XG4gICAgICB2YXIgaWQ7XG4gICAgICBvID0gbyB8fCB7fTtcblxuICAgICAgaWYgKCFvLmlucHV0KSB7XG4gICAgICAgICQuZXJyb3IoXCJpbnB1dCBpcyBtaXNzaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICB3d3cubWl4aW4odGhpcyk7XG4gICAgICB0aGlzLiRoaW50ID0gJChvLmhpbnQpO1xuICAgICAgdGhpcy4kaW5wdXQgPSAkKG8uaW5wdXQpO1xuICAgICAgdGhpcy4kbWVudSA9ICQoby5tZW51KTtcbiAgICAgIGlkID0gdGhpcy4kaW5wdXQuYXR0cihcImlkXCIpIHx8IF8uZ3VpZCgpO1xuICAgICAgdGhpcy4kbWVudS5hdHRyKFwiaWRcIiwgaWQgKyBcIl9saXN0Ym94XCIpO1xuICAgICAgdGhpcy4kaGludC5hdHRyKHtcbiAgICAgICAgXCJhcmlhLWhpZGRlblwiOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuJGlucHV0LmF0dHIoe1xuICAgICAgICBcImFyaWEtb3duc1wiOiBpZCArIFwiX2xpc3Rib3hcIixcbiAgICAgICAgcm9sZTogXCJjb21ib2JveFwiLFxuICAgICAgICBcImFyaWEtYXV0b2NvbXBsZXRlXCI6IFwibGlzdFwiLFxuICAgICAgICBcImFyaWEtZXhwYW5kZWRcIjogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMuJGlucHV0LnZhbCgpO1xuICAgICAgdGhpcy5xdWVyeVdoZW5Gb2N1c2VkID0gdGhpcy5oYXNGb2N1cygpID8gdGhpcy5xdWVyeSA6IG51bGw7XG4gICAgICB0aGlzLiRvdmVyZmxvd0hlbHBlciA9IGJ1aWxkT3ZlcmZsb3dIZWxwZXIodGhpcy4kaW5wdXQpO1xuXG4gICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG5cbiAgICAgIGlmICh0aGlzLiRoaW50Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnNldEhpbnQgPSB0aGlzLmdldEhpbnQgPSB0aGlzLmNsZWFySGludCA9IHRoaXMuY2xlYXJIaW50SWZJbnZhbGlkID0gXy5ub29wO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uU3luYyhcImN1cnNvcmNoYW5nZVwiLCB0aGlzLl91cGRhdGVEZXNjZW5kZW50KTtcbiAgICB9XG5cbiAgICBJbnB1dC5ub3JtYWxpemVRdWVyeSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBfLnRvU3RyKHN0cikucmVwbGFjZSgvXlxccyovZywgXCJcIikucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgfTtcblxuICAgIF8ubWl4aW4oSW5wdXQucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIsIHtcbiAgICAgIF9vbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICAgdGhpcy5yZXNldElucHV0VmFsdWUoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiYmx1cnJlZFwiKTtcbiAgICAgIH0sXG4gICAgICBfb25Gb2N1czogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgICAgdGhpcy5xdWVyeVdoZW5Gb2N1c2VkID0gdGhpcy5xdWVyeTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwiZm9jdXNlZFwiKTtcbiAgICAgIH0sXG4gICAgICBfb25LZXlkb3duOiBmdW5jdGlvbiBvbktleWRvd24oJGUpIHtcbiAgICAgICAgdmFyIGtleU5hbWUgPSBzcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXTtcblxuICAgICAgICB0aGlzLl9tYW5hZ2VQcmV2ZW50RGVmYXVsdChrZXlOYW1lLCAkZSk7XG5cbiAgICAgICAgaWYgKGtleU5hbWUgJiYgdGhpcy5fc2hvdWxkVHJpZ2dlcihrZXlOYW1lLCAkZSkpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoa2V5TmFtZSArIFwiS2V5ZWRcIiwgJGUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX29uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG4gICAgICAgIHRoaXMuX3NldFF1ZXJ5KHRoaXMuZ2V0SW5wdXRWYWx1ZSgpKTtcblxuICAgICAgICB0aGlzLmNsZWFySGludElmSW52YWxpZCgpO1xuXG4gICAgICAgIHRoaXMuX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKTtcbiAgICAgIH0sXG4gICAgICBfbWFuYWdlUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uIG1hbmFnZVByZXZlbnREZWZhdWx0KGtleU5hbWUsICRlKSB7XG4gICAgICAgIHZhciBwcmV2ZW50RGVmYXVsdDtcblxuICAgICAgICBzd2l0Y2ggKGtleU5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwidXBcIjpcbiAgICAgICAgICBjYXNlIFwiZG93blwiOlxuICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSAhd2l0aE1vZGlmaWVyKCRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2ZW50RGVmYXVsdCAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSxcbiAgICAgIF9zaG91bGRUcmlnZ2VyOiBmdW5jdGlvbiBzaG91bGRUcmlnZ2VyKGtleU5hbWUsICRlKSB7XG4gICAgICAgIHZhciB0cmlnZ2VyO1xuXG4gICAgICAgIHN3aXRjaCAoa2V5TmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJ0YWJcIjpcbiAgICAgICAgICAgIHRyaWdnZXIgPSAhd2l0aE1vZGlmaWVyKCRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRyaWdnZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyaWdnZXI7XG4gICAgICB9LFxuICAgICAgX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIGNoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXIgPSAodGhpcy4kaW5wdXQuY3NzKFwiZGlyZWN0aW9uXCIpIHx8IFwibHRyXCIpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZGlyICE9PSBkaXIpIHtcbiAgICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgICB0aGlzLiRoaW50LmF0dHIoXCJkaXJcIiwgZGlyKTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJsYW5nRGlyQ2hhbmdlZFwiLCBkaXIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3NldFF1ZXJ5OiBmdW5jdGlvbiBzZXRRdWVyeSh2YWwsIHNpbGVudCkge1xuICAgICAgICB2YXIgYXJlRXF1aXZhbGVudCwgaGFzRGlmZmVyZW50V2hpdGVzcGFjZTtcbiAgICAgICAgYXJlRXF1aXZhbGVudCA9IGFyZVF1ZXJpZXNFcXVpdmFsZW50KHZhbCwgdGhpcy5xdWVyeSk7XG4gICAgICAgIGhhc0RpZmZlcmVudFdoaXRlc3BhY2UgPSBhcmVFcXVpdmFsZW50ID8gdGhpcy5xdWVyeS5sZW5ndGggIT09IHZhbC5sZW5ndGggOiBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHZhbDtcblxuICAgICAgICBpZiAoIXNpbGVudCAmJiAhYXJlRXF1aXZhbGVudCkge1xuICAgICAgICAgIHRoaXMudHJpZ2dlcihcInF1ZXJ5Q2hhbmdlZFwiLCB0aGlzLnF1ZXJ5KTtcbiAgICAgICAgfSBlbHNlIGlmICghc2lsZW50ICYmIGhhc0RpZmZlcmVudFdoaXRlc3BhY2UpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJ3aGl0ZXNwYWNlQ2hhbmdlZFwiLCB0aGlzLnF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF91cGRhdGVEZXNjZW5kZW50OiBmdW5jdGlvbiB1cGRhdGVEZXNjZW5kZW50KGV2ZW50LCBpZCkge1xuICAgICAgICB0aGlzLiRpbnB1dC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsIGlkKTtcbiAgICAgIH0sXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBvbkJsdXIsXG4gICAgICAgICAgICBvbkZvY3VzLFxuICAgICAgICAgICAgb25LZXlkb3duLFxuICAgICAgICAgICAgb25JbnB1dDtcbiAgICAgICAgb25CbHVyID0gXy5iaW5kKHRoaXMuX29uQmx1ciwgdGhpcyk7XG4gICAgICAgIG9uRm9jdXMgPSBfLmJpbmQodGhpcy5fb25Gb2N1cywgdGhpcyk7XG4gICAgICAgIG9uS2V5ZG93biA9IF8uYmluZCh0aGlzLl9vbktleWRvd24sIHRoaXMpO1xuICAgICAgICBvbklucHV0ID0gXy5iaW5kKHRoaXMuX29uSW5wdXQsIHRoaXMpO1xuICAgICAgICB0aGlzLiRpbnB1dC5vbihcImJsdXIudHRcIiwgb25CbHVyKS5vbihcImZvY3VzLnR0XCIsIG9uRm9jdXMpLm9uKFwia2V5ZG93bi50dFwiLCBvbktleWRvd24pO1xuXG4gICAgICAgIGlmICghXy5pc01zaWUoKSB8fCBfLmlzTXNpZSgpID4gOSkge1xuICAgICAgICAgIHRoaXMuJGlucHV0Lm9uKFwiaW5wdXQudHRcIiwgb25JbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kaW5wdXQub24oXCJrZXlkb3duLnR0IGtleXByZXNzLnR0IGN1dC50dCBwYXN0ZS50dFwiLCBmdW5jdGlvbiAoJGUpIHtcbiAgICAgICAgICAgIGlmIChzcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF8uZGVmZXIoXy5iaW5kKHRoYXQuX29uSW5wdXQsIHRoYXQsICRlKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgIHRoaXMuJGlucHV0LmZvY3VzKCk7XG4gICAgICB9LFxuICAgICAgYmx1cjogZnVuY3Rpb24gYmx1cigpIHtcbiAgICAgICAgdGhpcy4kaW5wdXQuYmx1cigpO1xuICAgICAgfSxcbiAgICAgIGdldExhbmdEaXI6IGZ1bmN0aW9uIGdldExhbmdEaXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcjtcbiAgICAgIH0sXG4gICAgICBnZXRRdWVyeTogZnVuY3Rpb24gZ2V0UXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5IHx8IFwiXCI7XG4gICAgICB9LFxuICAgICAgc2V0UXVlcnk6IGZ1bmN0aW9uIHNldFF1ZXJ5KHZhbCwgc2lsZW50KSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh2YWwpO1xuXG4gICAgICAgIHRoaXMuX3NldFF1ZXJ5KHZhbCwgc2lsZW50KTtcbiAgICAgIH0sXG4gICAgICBoYXNRdWVyeUNoYW5nZWRTaW5jZUxhc3RGb2N1czogZnVuY3Rpb24gaGFzUXVlcnlDaGFuZ2VkU2luY2VMYXN0Rm9jdXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5ICE9PSB0aGlzLnF1ZXJ5V2hlbkZvY3VzZWQ7XG4gICAgICB9LFxuICAgICAgZ2V0SW5wdXRWYWx1ZTogZnVuY3Rpb24gZ2V0SW5wdXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGlucHV0LnZhbCgpO1xuICAgICAgfSxcbiAgICAgIHNldElucHV0VmFsdWU6IGZ1bmN0aW9uIHNldElucHV0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy4kaW5wdXQudmFsKHZhbHVlKTtcbiAgICAgICAgdGhpcy5jbGVhckhpbnRJZkludmFsaWQoKTtcblxuICAgICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG4gICAgICB9LFxuICAgICAgcmVzZXRJbnB1dFZhbHVlOiBmdW5jdGlvbiByZXNldElucHV0VmFsdWUoKSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh0aGlzLnF1ZXJ5KTtcbiAgICAgIH0sXG4gICAgICBnZXRIaW50OiBmdW5jdGlvbiBnZXRIaW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kaGludC52YWwoKTtcbiAgICAgIH0sXG4gICAgICBzZXRIaW50OiBmdW5jdGlvbiBzZXRIaW50KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuJGhpbnQudmFsKHZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBjbGVhckhpbnQ6IGZ1bmN0aW9uIGNsZWFySGludCgpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFwiXCIpO1xuICAgICAgfSxcbiAgICAgIGNsZWFySGludElmSW52YWxpZDogZnVuY3Rpb24gY2xlYXJIaW50SWZJbnZhbGlkKCkge1xuICAgICAgICB2YXIgdmFsLCBoaW50LCB2YWxJc1ByZWZpeE9mSGludCwgaXNWYWxpZDtcbiAgICAgICAgdmFsID0gdGhpcy5nZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgIGhpbnQgPSB0aGlzLmdldEhpbnQoKTtcbiAgICAgICAgdmFsSXNQcmVmaXhPZkhpbnQgPSB2YWwgIT09IGhpbnQgJiYgaGludC5pbmRleE9mKHZhbCkgPT09IDA7XG4gICAgICAgIGlzVmFsaWQgPSB2YWwgIT09IFwiXCIgJiYgdmFsSXNQcmVmaXhPZkhpbnQgJiYgIXRoaXMuaGFzT3ZlcmZsb3coKTtcbiAgICAgICAgIWlzVmFsaWQgJiYgdGhpcy5jbGVhckhpbnQoKTtcbiAgICAgIH0sXG4gICAgICBoYXNGb2N1czogZnVuY3Rpb24gaGFzRm9jdXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRpbnB1dC5pcyhcIjpmb2N1c1wiKTtcbiAgICAgIH0sXG4gICAgICBoYXNPdmVyZmxvdzogZnVuY3Rpb24gaGFzT3ZlcmZsb3coKSB7XG4gICAgICAgIHZhciBjb25zdHJhaW50ID0gdGhpcy4kaW5wdXQud2lkdGgoKSAtIDI7XG4gICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyLnRleHQodGhpcy5nZXRJbnB1dFZhbHVlKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy4kb3ZlcmZsb3dIZWxwZXIud2lkdGgoKSA+PSBjb25zdHJhaW50O1xuICAgICAgfSxcbiAgICAgIGlzQ3Vyc29yQXRFbmQ6IGZ1bmN0aW9uIGlzQ3Vyc29yQXRFbmQoKSB7XG4gICAgICAgIHZhciB2YWx1ZUxlbmd0aCwgc2VsZWN0aW9uU3RhcnQsIHJhbmdlO1xuICAgICAgICB2YWx1ZUxlbmd0aCA9IHRoaXMuJGlucHV0LnZhbCgpLmxlbmd0aDtcbiAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSB0aGlzLiRpbnB1dFswXS5zZWxlY3Rpb25TdGFydDtcblxuICAgICAgICBpZiAoXy5pc051bWJlcihzZWxlY3Rpb25TdGFydCkpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uU3RhcnQgPT09IHZhbHVlTGVuZ3RoO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICAgIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIC12YWx1ZUxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlTGVuZ3RoID09PSByYW5nZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuJGhpbnQub2ZmKFwiLnR0XCIpO1xuICAgICAgICB0aGlzLiRpbnB1dC5vZmYoXCIudHRcIik7XG4gICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLiRoaW50ID0gdGhpcy4kaW5wdXQgPSB0aGlzLiRvdmVyZmxvd0hlbHBlciA9ICQoXCI8ZGl2PlwiKTtcbiAgICAgIH0sXG4gICAgICBzZXRBcmlhRXhwYW5kZWQ6IGZ1bmN0aW9uIHNldEFyaWFFeHBhbmRlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLiRpbnB1dC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gSW5wdXQ7XG5cbiAgICBmdW5jdGlvbiBidWlsZE92ZXJmbG93SGVscGVyKCRpbnB1dCkge1xuICAgICAgcmV0dXJuICQoJzxwcmUgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9wcmU+JykuY3NzKHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgdmlzaWJpbGl0eTogXCJoaWRkZW5cIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJwcmVcIixcbiAgICAgICAgZm9udEZhbWlseTogJGlucHV0LmNzcyhcImZvbnQtZmFtaWx5XCIpLFxuICAgICAgICBmb250U2l6ZTogJGlucHV0LmNzcyhcImZvbnQtc2l6ZVwiKSxcbiAgICAgICAgZm9udFN0eWxlOiAkaW5wdXQuY3NzKFwiZm9udC1zdHlsZVwiKSxcbiAgICAgICAgZm9udFZhcmlhbnQ6ICRpbnB1dC5jc3MoXCJmb250LXZhcmlhbnRcIiksXG4gICAgICAgIGZvbnRXZWlnaHQ6ICRpbnB1dC5jc3MoXCJmb250LXdlaWdodFwiKSxcbiAgICAgICAgd29yZFNwYWNpbmc6ICRpbnB1dC5jc3MoXCJ3b3JkLXNwYWNpbmdcIiksXG4gICAgICAgIGxldHRlclNwYWNpbmc6ICRpbnB1dC5jc3MoXCJsZXR0ZXItc3BhY2luZ1wiKSxcbiAgICAgICAgdGV4dEluZGVudDogJGlucHV0LmNzcyhcInRleHQtaW5kZW50XCIpLFxuICAgICAgICB0ZXh0UmVuZGVyaW5nOiAkaW5wdXQuY3NzKFwidGV4dC1yZW5kZXJpbmdcIiksXG4gICAgICAgIHRleHRUcmFuc2Zvcm06ICRpbnB1dC5jc3MoXCJ0ZXh0LXRyYW5zZm9ybVwiKVxuICAgICAgfSkuaW5zZXJ0QWZ0ZXIoJGlucHV0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcmVRdWVyaWVzRXF1aXZhbGVudChhLCBiKSB7XG4gICAgICByZXR1cm4gSW5wdXQubm9ybWFsaXplUXVlcnkoYSkgPT09IElucHV0Lm5vcm1hbGl6ZVF1ZXJ5KGIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdpdGhNb2RpZmllcigkZSkge1xuICAgICAgcmV0dXJuICRlLmFsdEtleSB8fCAkZS5jdHJsS2V5IHx8ICRlLm1ldGFLZXkgfHwgJGUuc2hpZnRLZXk7XG4gICAgfVxuICB9KCk7XG5cbiAgdmFyIERhdGFzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIga2V5cywgbmFtZUdlbmVyYXRvcjtcbiAgICBrZXlzID0ge1xuICAgICAgZGF0YXNldDogXCJ0dC1zZWxlY3RhYmxlLWRhdGFzZXRcIixcbiAgICAgIHZhbDogXCJ0dC1zZWxlY3RhYmxlLWRpc3BsYXlcIixcbiAgICAgIG9iajogXCJ0dC1zZWxlY3RhYmxlLW9iamVjdFwiXG4gICAgfTtcbiAgICBuYW1lR2VuZXJhdG9yID0gXy5nZXRJZEdlbmVyYXRvcigpO1xuXG4gICAgZnVuY3Rpb24gRGF0YXNldChvLCB3d3cpIHtcbiAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgby50ZW1wbGF0ZXMgPSBvLnRlbXBsYXRlcyB8fCB7fTtcbiAgICAgIG8udGVtcGxhdGVzLm5vdEZvdW5kID0gby50ZW1wbGF0ZXMubm90Rm91bmQgfHwgby50ZW1wbGF0ZXMuZW1wdHk7XG5cbiAgICAgIGlmICghby5zb3VyY2UpIHtcbiAgICAgICAgJC5lcnJvcihcIm1pc3Npbmcgc291cmNlXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW8ubm9kZSkge1xuICAgICAgICAkLmVycm9yKFwibWlzc2luZyBub2RlXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoby5uYW1lICYmICFpc1ZhbGlkTmFtZShvLm5hbWUpKSB7XG4gICAgICAgICQuZXJyb3IoXCJpbnZhbGlkIGRhdGFzZXQgbmFtZTogXCIgKyBvLm5hbWUpO1xuICAgICAgfVxuXG4gICAgICB3d3cubWl4aW4odGhpcyk7XG4gICAgICB0aGlzLmhpZ2hsaWdodCA9ICEhby5oaWdobGlnaHQ7XG4gICAgICB0aGlzLm5hbWUgPSBfLnRvU3RyKG8ubmFtZSB8fCBuYW1lR2VuZXJhdG9yKCkpO1xuICAgICAgdGhpcy5saW1pdCA9IG8ubGltaXQgfHwgNTtcbiAgICAgIHRoaXMuZGlzcGxheUZuID0gZ2V0RGlzcGxheUZuKG8uZGlzcGxheSB8fCBvLmRpc3BsYXlLZXkpO1xuICAgICAgdGhpcy50ZW1wbGF0ZXMgPSBnZXRUZW1wbGF0ZXMoby50ZW1wbGF0ZXMsIHRoaXMuZGlzcGxheUZuKTtcbiAgICAgIHRoaXMuc291cmNlID0gby5zb3VyY2UuX190dEFkYXB0ZXIgPyBvLnNvdXJjZS5fX3R0QWRhcHRlcigpIDogby5zb3VyY2U7XG4gICAgICB0aGlzLmFzeW5jID0gXy5pc1VuZGVmaW5lZChvLmFzeW5jKSA/IHRoaXMuc291cmNlLmxlbmd0aCA+IDIgOiAhIW8uYXN5bmM7XG5cbiAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcblxuICAgICAgdGhpcy4kZWwgPSAkKG8ubm9kZSkuYXR0cihcInJvbGVcIiwgXCJwcmVzZW50YXRpb25cIikuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRhdGFzZXQpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5kYXRhc2V0ICsgXCItXCIgKyB0aGlzLm5hbWUpO1xuICAgIH1cblxuICAgIERhdGFzZXQuZXh0cmFjdERhdGEgPSBmdW5jdGlvbiBleHRyYWN0RGF0YShlbCkge1xuICAgICAgdmFyICRlbCA9ICQoZWwpO1xuXG4gICAgICBpZiAoJGVsLmRhdGEoa2V5cy5vYmopKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YXNldDogJGVsLmRhdGEoa2V5cy5kYXRhc2V0KSB8fCBcIlwiLFxuICAgICAgICAgIHZhbDogJGVsLmRhdGEoa2V5cy52YWwpIHx8IFwiXCIsXG4gICAgICAgICAgb2JqOiAkZWwuZGF0YShrZXlzLm9iaikgfHwgbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgXy5taXhpbihEYXRhc2V0LnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyLCB7XG4gICAgICBfb3ZlcndyaXRlOiBmdW5jdGlvbiBvdmVyd3JpdGUocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlclN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3luYyAmJiB0aGlzLnRlbXBsYXRlcy5wZW5kaW5nKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyUGVuZGluZyhxdWVyeSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYXN5bmMgJiYgdGhpcy50ZW1wbGF0ZXMubm90Rm91bmQpIHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXJOb3RGb3VuZChxdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZW1wdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlcmVkXCIsIHN1Z2dlc3Rpb25zLCBmYWxzZSwgdGhpcy5uYW1lKTtcbiAgICAgIH0sXG4gICAgICBfYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCAmJiB0aGlzLiRsYXN0U3VnZ2VzdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9hcHBlbmRTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlclN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuJGxhc3RTdWdnZXN0aW9uLmxlbmd0aCAmJiB0aGlzLnRlbXBsYXRlcy5ub3RGb3VuZCkge1xuICAgICAgICAgIHRoaXMuX3JlbmRlck5vdEZvdW5kKHF1ZXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlcmVkXCIsIHN1Z2dlc3Rpb25zLCB0cnVlLCB0aGlzLm5hbWUpO1xuICAgICAgfSxcbiAgICAgIF9yZW5kZXJTdWdnZXN0aW9uczogZnVuY3Rpb24gcmVuZGVyU3VnZ2VzdGlvbnMocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHZhciAkZnJhZ21lbnQ7XG4gICAgICAgICRmcmFnbWVudCA9IHRoaXMuX2dldFN1Z2dlc3Rpb25zRnJhZ21lbnQocXVlcnksIHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkZnJhZ21lbnQuY2hpbGRyZW4oKS5sYXN0KCk7XG4gICAgICAgIHRoaXMuJGVsLmh0bWwoJGZyYWdtZW50KS5wcmVwZW5kKHRoaXMuX2dldEhlYWRlcihxdWVyeSwgc3VnZ2VzdGlvbnMpKS5hcHBlbmQodGhpcy5fZ2V0Rm9vdGVyKHF1ZXJ5LCBzdWdnZXN0aW9ucykpO1xuICAgICAgfSxcbiAgICAgIF9hcHBlbmRTdWdnZXN0aW9uczogZnVuY3Rpb24gYXBwZW5kU3VnZ2VzdGlvbnMocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHZhciAkZnJhZ21lbnQsICRsYXN0U3VnZ2VzdGlvbjtcbiAgICAgICAgJGZyYWdtZW50ID0gdGhpcy5fZ2V0U3VnZ2VzdGlvbnNGcmFnbWVudChxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAkbGFzdFN1Z2dlc3Rpb24gPSAkZnJhZ21lbnQuY2hpbGRyZW4oKS5sYXN0KCk7XG4gICAgICAgIHRoaXMuJGxhc3RTdWdnZXN0aW9uLmFmdGVyKCRmcmFnbWVudCk7XG4gICAgICAgIHRoaXMuJGxhc3RTdWdnZXN0aW9uID0gJGxhc3RTdWdnZXN0aW9uO1xuICAgICAgfSxcbiAgICAgIF9yZW5kZXJQZW5kaW5nOiBmdW5jdGlvbiByZW5kZXJQZW5kaW5nKHF1ZXJ5KSB7XG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVzLnBlbmRpbmc7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuXG4gICAgICAgIHRlbXBsYXRlICYmIHRoaXMuJGVsLmh0bWwodGVtcGxhdGUoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgfSkpO1xuICAgICAgfSxcbiAgICAgIF9yZW5kZXJOb3RGb3VuZDogZnVuY3Rpb24gcmVuZGVyTm90Rm91bmQocXVlcnkpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZXMubm90Rm91bmQ7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuXG4gICAgICAgIHRlbXBsYXRlICYmIHRoaXMuJGVsLmh0bWwodGVtcGxhdGUoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgfSkpO1xuICAgICAgfSxcbiAgICAgIF9lbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgICAgIHRoaXMuJGVsLmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuICAgICAgfSxcbiAgICAgIF9nZXRTdWdnZXN0aW9uc0ZyYWdtZW50OiBmdW5jdGlvbiBnZXRTdWdnZXN0aW9uc0ZyYWdtZW50KHF1ZXJ5LCBzdWdnZXN0aW9ucykge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICBmcmFnbWVudDtcbiAgICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgXy5lYWNoKHN1Z2dlc3Rpb25zLCBmdW5jdGlvbiBnZXRTdWdnZXN0aW9uTm9kZShzdWdnZXN0aW9uKSB7XG4gICAgICAgICAgdmFyICRlbCwgY29udGV4dDtcbiAgICAgICAgICBjb250ZXh0ID0gdGhhdC5faW5qZWN0UXVlcnkocXVlcnksIHN1Z2dlc3Rpb24pO1xuICAgICAgICAgICRlbCA9ICQodGhhdC50ZW1wbGF0ZXMuc3VnZ2VzdGlvbihjb250ZXh0KSkuZGF0YShrZXlzLmRhdGFzZXQsIHRoYXQubmFtZSkuZGF0YShrZXlzLm9iaiwgc3VnZ2VzdGlvbikuZGF0YShrZXlzLnZhbCwgdGhhdC5kaXNwbGF5Rm4oc3VnZ2VzdGlvbikpLmFkZENsYXNzKHRoYXQuY2xhc3Nlcy5zdWdnZXN0aW9uICsgXCIgXCIgKyB0aGF0LmNsYXNzZXMuc2VsZWN0YWJsZSk7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoJGVsWzBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oaWdobGlnaHQgJiYgaGlnaGxpZ2h0KHtcbiAgICAgICAgICBjbGFzc05hbWU6IHRoaXMuY2xhc3Nlcy5oaWdobGlnaHQsXG4gICAgICAgICAgbm9kZTogZnJhZ21lbnQsXG4gICAgICAgICAgcGF0dGVybjogcXVlcnlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAkKGZyYWdtZW50KTtcbiAgICAgIH0sXG4gICAgICBfZ2V0Rm9vdGVyOiBmdW5jdGlvbiBnZXRGb290ZXIocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlcy5mb290ZXIgPyB0aGlzLnRlbXBsYXRlcy5mb290ZXIoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgZGF0YXNldDogdGhpcy5uYW1lXG4gICAgICAgIH0pIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBfZ2V0SGVhZGVyOiBmdW5jdGlvbiBnZXRIZWFkZXIocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlcy5oZWFkZXIgPyB0aGlzLnRlbXBsYXRlcy5oZWFkZXIoe1xuICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgZGF0YXNldDogdGhpcy5uYW1lXG4gICAgICAgIH0pIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBfcmVzZXRMYXN0U3VnZ2VzdGlvbjogZnVuY3Rpb24gcmVzZXRMYXN0U3VnZ2VzdGlvbigpIHtcbiAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkKCk7XG4gICAgICB9LFxuICAgICAgX2luamVjdFF1ZXJ5OiBmdW5jdGlvbiBpbmplY3RRdWVyeShxdWVyeSwgb2JqKSB7XG4gICAgICAgIHJldHVybiBfLmlzT2JqZWN0KG9iaikgPyBfLm1peGluKHtcbiAgICAgICAgICBfcXVlcnk6IHF1ZXJ5XG4gICAgICAgIH0sIG9iaikgOiBvYmo7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUocXVlcnkpIHtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgY2FuY2VsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgIHN5bmNDYWxsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgIHJlbmRlcmVkID0gMDtcbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcblxuICAgICAgICB0aGlzLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgICBjYW5jZWxlZCA9IHRydWU7XG4gICAgICAgICAgdGhhdC5jYW5jZWwgPSAkLm5vb3A7XG4gICAgICAgICAgdGhhdC5hc3luYyAmJiB0aGF0LnRyaWdnZXIoXCJhc3luY0NhbmNlbGVkXCIsIHF1ZXJ5LCB0aGF0Lm5hbWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc291cmNlKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgICFzeW5jQ2FsbGVkICYmIHN5bmMoW10pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHN5bmMoc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICBpZiAoc3luY0NhbGxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN5bmNDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgIHN1Z2dlc3Rpb25zID0gKHN1Z2dlc3Rpb25zIHx8IFtdKS5zbGljZSgwLCB0aGF0LmxpbWl0KTtcbiAgICAgICAgICByZW5kZXJlZCA9IHN1Z2dlc3Rpb25zLmxlbmd0aDtcblxuICAgICAgICAgIHRoYXQuX292ZXJ3cml0ZShxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuXG4gICAgICAgICAgaWYgKHJlbmRlcmVkIDwgdGhhdC5saW1pdCAmJiB0aGF0LmFzeW5jKSB7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoXCJhc3luY1JlcXVlc3RlZFwiLCBxdWVyeSwgdGhhdC5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhc3luYyhzdWdnZXN0aW9ucykge1xuICAgICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG5cbiAgICAgICAgICBpZiAoIWNhbmNlbGVkICYmIHJlbmRlcmVkIDwgdGhhdC5saW1pdCkge1xuICAgICAgICAgICAgdGhhdC5jYW5jZWwgPSAkLm5vb3A7XG4gICAgICAgICAgICB2YXIgaWR4ID0gTWF0aC5hYnMocmVuZGVyZWQgLSB0aGF0LmxpbWl0KTtcbiAgICAgICAgICAgIHJlbmRlcmVkICs9IGlkeDtcblxuICAgICAgICAgICAgdGhhdC5fYXBwZW5kKHF1ZXJ5LCBzdWdnZXN0aW9ucy5zbGljZSgwLCBpZHgpKTtcblxuICAgICAgICAgICAgdGhhdC5hc3luYyAmJiB0aGF0LnRyaWdnZXIoXCJhc3luY1JlY2VpdmVkXCIsIHF1ZXJ5LCB0aGF0Lm5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbmNlbDogJC5ub29wLFxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9lbXB0eSgpO1xuXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcImNsZWFyZWRcIik7XG4gICAgICB9LFxuICAgICAgaXNFbXB0eTogZnVuY3Rpb24gaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGVsLmlzKFwiOmVtcHR5XCIpO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuJGVsID0gJChcIjxkaXY+XCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIERhdGFzZXQ7XG5cbiAgICBmdW5jdGlvbiBnZXREaXNwbGF5Rm4oZGlzcGxheSkge1xuICAgICAgZGlzcGxheSA9IGRpc3BsYXkgfHwgXy5zdHJpbmdpZnk7XG4gICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGRpc3BsYXkpID8gZGlzcGxheSA6IGRpc3BsYXlGbjtcblxuICAgICAgZnVuY3Rpb24gZGlzcGxheUZuKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqW2Rpc3BsYXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlcyh0ZW1wbGF0ZXMsIGRpc3BsYXlGbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm90Rm91bmQ6IHRlbXBsYXRlcy5ub3RGb3VuZCAmJiBfLnRlbXBsYXRpZnkodGVtcGxhdGVzLm5vdEZvdW5kKSxcbiAgICAgICAgcGVuZGluZzogdGVtcGxhdGVzLnBlbmRpbmcgJiYgXy50ZW1wbGF0aWZ5KHRlbXBsYXRlcy5wZW5kaW5nKSxcbiAgICAgICAgaGVhZGVyOiB0ZW1wbGF0ZXMuaGVhZGVyICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMuaGVhZGVyKSxcbiAgICAgICAgZm9vdGVyOiB0ZW1wbGF0ZXMuZm9vdGVyICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMuZm9vdGVyKSxcbiAgICAgICAgc3VnZ2VzdGlvbjogdGVtcGxhdGVzLnN1Z2dlc3Rpb24gPyB1c2VyU3VnZ2VzdGlvblRlbXBsYXRlIDogc3VnZ2VzdGlvblRlbXBsYXRlXG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiB1c2VyU3VnZ2VzdGlvblRlbXBsYXRlKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGVtcGxhdGVzLnN1Z2dlc3Rpb247XG4gICAgICAgIHJldHVybiAkKHRlbXBsYXRlKGNvbnRleHQpKS5hdHRyKFwiaWRcIiwgXy5ndWlkKCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzdWdnZXN0aW9uVGVtcGxhdGUoY29udGV4dCkge1xuICAgICAgICByZXR1cm4gJCgnPGRpdiByb2xlPVwib3B0aW9uXCI+JykuYXR0cihcImlkXCIsIF8uZ3VpZCgpKS50ZXh0KGRpc3BsYXlGbihjb250ZXh0KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNWYWxpZE5hbWUoc3RyKSB7XG4gICAgICByZXR1cm4gL15bX2EtekEtWjAtOS1dKyQvLnRlc3Qoc3RyKTtcbiAgICB9XG4gIH0oKTtcblxuICB2YXIgTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIE1lbnUobywgd3d3KSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBvID0gbyB8fCB7fTtcblxuICAgICAgaWYgKCFvLm5vZGUpIHtcbiAgICAgICAgJC5lcnJvcihcIm5vZGUgaXMgcmVxdWlyZWRcIik7XG4gICAgICB9XG5cbiAgICAgIHd3dy5taXhpbih0aGlzKTtcbiAgICAgIHRoaXMuJG5vZGUgPSAkKG8ubm9kZSk7XG4gICAgICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgIHRoaXMuZGF0YXNldHMgPSBfLm1hcChvLmRhdGFzZXRzLCBpbml0aWFsaXplRGF0YXNldCk7XG5cbiAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhc2V0KG9EYXRhc2V0KSB7XG4gICAgICAgIHZhciBub2RlID0gdGhhdC4kbm9kZS5maW5kKG9EYXRhc2V0Lm5vZGUpLmZpcnN0KCk7XG4gICAgICAgIG9EYXRhc2V0Lm5vZGUgPSBub2RlLmxlbmd0aCA/IG5vZGUgOiAkKFwiPGRpdj5cIikuYXBwZW5kVG8odGhhdC4kbm9kZSk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YXNldChvRGF0YXNldCwgd3d3KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfLm1peGluKE1lbnUucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIsIHtcbiAgICAgIF9vblNlbGVjdGFibGVDbGljazogZnVuY3Rpb24gb25TZWxlY3RhYmxlQ2xpY2soJGUpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKFwic2VsZWN0YWJsZUNsaWNrZWRcIiwgJCgkZS5jdXJyZW50VGFyZ2V0KSk7XG4gICAgICB9LFxuICAgICAgX29uUmVuZGVyZWQ6IGZ1bmN0aW9uIG9uUmVuZGVyZWQodHlwZSwgZGF0YXNldCwgc3VnZ2VzdGlvbnMsIGFzeW5jKSB7XG4gICAgICAgIHRoaXMuJG5vZGUudG9nZ2xlQ2xhc3ModGhpcy5jbGFzc2VzLmVtcHR5LCB0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJkYXRhc2V0UmVuZGVyZWRcIiwgZGF0YXNldCwgc3VnZ2VzdGlvbnMsIGFzeW5jKTtcbiAgICAgIH0sXG4gICAgICBfb25DbGVhcmVkOiBmdW5jdGlvbiBvbkNsZWFyZWQoKSB7XG4gICAgICAgIHRoaXMuJG5vZGUudG9nZ2xlQ2xhc3ModGhpcy5jbGFzc2VzLmVtcHR5LCB0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJkYXRhc2V0Q2xlYXJlZFwiKTtcbiAgICAgIH0sXG4gICAgICBfcHJvcGFnYXRlOiBmdW5jdGlvbiBwcm9wYWdhdGUoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSxcbiAgICAgIF9hbGxEYXRhc2V0c0VtcHR5OiBmdW5jdGlvbiBhbGxEYXRhc2V0c0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gXy5ldmVyeSh0aGlzLmRhdGFzZXRzLCBfLmJpbmQoZnVuY3Rpb24gaXNEYXRhc2V0RW1wdHkoZGF0YXNldCkge1xuICAgICAgICAgIHZhciBpc0VtcHR5ID0gZGF0YXNldC5pc0VtcHR5KCk7XG4gICAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCAhaXNFbXB0eSk7XG4gICAgICAgICAgcmV0dXJuIGlzRW1wdHk7XG4gICAgICAgIH0sIHRoaXMpKTtcbiAgICAgIH0sXG4gICAgICBfZ2V0U2VsZWN0YWJsZXM6IGZ1bmN0aW9uIGdldFNlbGVjdGFibGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbm9kZS5maW5kKHRoaXMuc2VsZWN0b3JzLnNlbGVjdGFibGUpO1xuICAgICAgfSxcbiAgICAgIF9yZW1vdmVDdXJzb3I6IGZ1bmN0aW9uIF9yZW1vdmVDdXJzb3IoKSB7XG4gICAgICAgIHZhciAkc2VsZWN0YWJsZSA9IHRoaXMuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpO1xuICAgICAgICAkc2VsZWN0YWJsZSAmJiAkc2VsZWN0YWJsZS5yZW1vdmVDbGFzcyh0aGlzLmNsYXNzZXMuY3Vyc29yKTtcbiAgICAgIH0sXG4gICAgICBfZW5zdXJlVmlzaWJsZTogZnVuY3Rpb24gZW5zdXJlVmlzaWJsZSgkZWwpIHtcbiAgICAgICAgdmFyIGVsVG9wLCBlbEJvdHRvbSwgbm9kZVNjcm9sbFRvcCwgbm9kZUhlaWdodDtcbiAgICAgICAgZWxUb3AgPSAkZWwucG9zaXRpb24oKS50b3A7XG4gICAgICAgIGVsQm90dG9tID0gZWxUb3AgKyAkZWwub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgIG5vZGVTY3JvbGxUb3AgPSB0aGlzLiRub2RlLnNjcm9sbFRvcCgpO1xuICAgICAgICBub2RlSGVpZ2h0ID0gdGhpcy4kbm9kZS5oZWlnaHQoKSArIHBhcnNlSW50KHRoaXMuJG5vZGUuY3NzKFwicGFkZGluZ1RvcFwiKSwgMTApICsgcGFyc2VJbnQodGhpcy4kbm9kZS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpLCAxMCk7XG5cbiAgICAgICAgaWYgKGVsVG9wIDwgMCkge1xuICAgICAgICAgIHRoaXMuJG5vZGUuc2Nyb2xsVG9wKG5vZGVTY3JvbGxUb3AgKyBlbFRvcCk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZUhlaWdodCA8IGVsQm90dG9tKSB7XG4gICAgICAgICAgdGhpcy4kbm9kZS5zY3JvbGxUb3Aobm9kZVNjcm9sbFRvcCArIChlbEJvdHRvbSAtIG5vZGVIZWlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICAgIG9uU2VsZWN0YWJsZUNsaWNrO1xuICAgICAgICBvblNlbGVjdGFibGVDbGljayA9IF8uYmluZCh0aGlzLl9vblNlbGVjdGFibGVDbGljaywgdGhpcyk7XG4gICAgICAgIHRoaXMuJG5vZGUub24oXCJjbGljay50dFwiLCB0aGlzLnNlbGVjdG9ycy5zZWxlY3RhYmxlLCBvblNlbGVjdGFibGVDbGljayk7XG4gICAgICAgIHRoaXMuJG5vZGUub24oXCJtb3VzZW92ZXJcIiwgdGhpcy5zZWxlY3RvcnMuc2VsZWN0YWJsZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuc2V0Q3Vyc29yKCQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kbm9kZS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX3JlbW92ZUN1cnNvcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgZnVuY3Rpb24gKGRhdGFzZXQpIHtcbiAgICAgICAgICBkYXRhc2V0Lm9uU3luYyhcImFzeW5jUmVxdWVzdGVkXCIsIHRoYXQuX3Byb3BhZ2F0ZSwgdGhhdCkub25TeW5jKFwiYXN5bmNDYW5jZWxlZFwiLCB0aGF0Ll9wcm9wYWdhdGUsIHRoYXQpLm9uU3luYyhcImFzeW5jUmVjZWl2ZWRcIiwgdGhhdC5fcHJvcGFnYXRlLCB0aGF0KS5vblN5bmMoXCJyZW5kZXJlZFwiLCB0aGF0Ll9vblJlbmRlcmVkLCB0aGF0KS5vblN5bmMoXCJjbGVhcmVkXCIsIHRoYXQuX29uQ2xlYXJlZCwgdGhhdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGlzT3BlbjogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbm9kZS5oYXNDbGFzcyh0aGlzLmNsYXNzZXMub3Blbik7XG4gICAgICB9LFxuICAgICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5zY3JvbGxUb3AoMCk7XG4gICAgICAgIHRoaXMuJG5vZGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuICAgICAgfSxcbiAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuJG5vZGUucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuXG4gICAgICAgIHRoaXMuX3JlbW92ZUN1cnNvcigpO1xuICAgICAgfSxcbiAgICAgIHNldExhbmd1YWdlRGlyZWN0aW9uOiBmdW5jdGlvbiBzZXRMYW5ndWFnZURpcmVjdGlvbihkaXIpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiZGlyXCIsIGRpcik7XG4gICAgICB9LFxuICAgICAgc2VsZWN0YWJsZVJlbGF0aXZlVG9DdXJzb3I6IGZ1bmN0aW9uIHNlbGVjdGFibGVSZWxhdGl2ZVRvQ3Vyc29yKGRlbHRhKSB7XG4gICAgICAgIHZhciAkc2VsZWN0YWJsZXMsICRvbGRDdXJzb3IsIG9sZEluZGV4LCBuZXdJbmRleDtcbiAgICAgICAgJG9sZEN1cnNvciA9IHRoaXMuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpO1xuICAgICAgICAkc2VsZWN0YWJsZXMgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpO1xuICAgICAgICBvbGRJbmRleCA9ICRvbGRDdXJzb3IgPyAkc2VsZWN0YWJsZXMuaW5kZXgoJG9sZEN1cnNvcikgOiAtMTtcbiAgICAgICAgbmV3SW5kZXggPSBvbGRJbmRleCArIGRlbHRhO1xuICAgICAgICBuZXdJbmRleCA9IChuZXdJbmRleCArIDEpICUgKCRzZWxlY3RhYmxlcy5sZW5ndGggKyAxKSAtIDE7XG4gICAgICAgIG5ld0luZGV4ID0gbmV3SW5kZXggPCAtMSA/ICRzZWxlY3RhYmxlcy5sZW5ndGggLSAxIDogbmV3SW5kZXg7XG4gICAgICAgIHJldHVybiBuZXdJbmRleCA9PT0gLTEgPyBudWxsIDogJHNlbGVjdGFibGVzLmVxKG5ld0luZGV4KTtcbiAgICAgIH0sXG4gICAgICBzZXRDdXJzb3I6IGZ1bmN0aW9uIHNldEN1cnNvcigkc2VsZWN0YWJsZSkge1xuICAgICAgICB0aGlzLl9yZW1vdmVDdXJzb3IoKTtcblxuICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSAkc2VsZWN0YWJsZSAmJiAkc2VsZWN0YWJsZS5maXJzdCgpKSB7XG4gICAgICAgICAgJHNlbGVjdGFibGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmN1cnNvcik7XG5cbiAgICAgICAgICB0aGlzLl9lbnN1cmVWaXNpYmxlKCRzZWxlY3RhYmxlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGdldFNlbGVjdGFibGVEYXRhOiBmdW5jdGlvbiBnZXRTZWxlY3RhYmxlRGF0YSgkZWwpIHtcbiAgICAgICAgcmV0dXJuICRlbCAmJiAkZWwubGVuZ3RoID8gRGF0YXNldC5leHRyYWN0RGF0YSgkZWwpIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRBY3RpdmVTZWxlY3RhYmxlOiBmdW5jdGlvbiBnZXRBY3RpdmVTZWxlY3RhYmxlKCkge1xuICAgICAgICB2YXIgJHNlbGVjdGFibGUgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpLmZpbHRlcih0aGlzLnNlbGVjdG9ycy5jdXJzb3IpLmZpcnN0KCk7XG5cbiAgICAgICAgcmV0dXJuICRzZWxlY3RhYmxlLmxlbmd0aCA/ICRzZWxlY3RhYmxlIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRUb3BTZWxlY3RhYmxlOiBmdW5jdGlvbiBnZXRUb3BTZWxlY3RhYmxlKCkge1xuICAgICAgICB2YXIgJHNlbGVjdGFibGUgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpLmZpcnN0KCk7XG5cbiAgICAgICAgcmV0dXJuICRzZWxlY3RhYmxlLmxlbmd0aCA/ICRzZWxlY3RhYmxlIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShxdWVyeSkge1xuICAgICAgICB2YXIgaXNWYWxpZFVwZGF0ZSA9IHF1ZXJ5ICE9PSB0aGlzLnF1ZXJ5O1xuXG4gICAgICAgIGlmIChpc1ZhbGlkVXBkYXRlKSB7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuXG4gICAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIHVwZGF0ZURhdGFzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzVmFsaWRVcGRhdGU7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgZGF0YXNldC51cGRhdGUocXVlcnkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZW1wdHk6IGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgY2xlYXJEYXRhc2V0KTtcblxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgdGhpcy4kbm9kZS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZW1wdHkpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyRGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgZGF0YXNldC5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5vZmYoXCIudHRcIik7XG4gICAgICAgIHRoaXMuJG5vZGUgPSAkKFwiPGRpdj5cIik7XG5cbiAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIGRlc3Ryb3lEYXRhc2V0KTtcblxuICAgICAgICBmdW5jdGlvbiBkZXN0cm95RGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgZGF0YXNldC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBNZW51O1xuICB9KCk7XG5cbiAgdmFyIFN0YXR1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFN0YXR1cyhvcHRpb25zKSB7XG4gICAgICB0aGlzLiRlbCA9ICQoXCI8c3Bhbj48L3NwYW4+XCIsIHtcbiAgICAgICAgcm9sZTogXCJzdGF0dXNcIixcbiAgICAgICAgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIlxuICAgICAgfSkuY3NzKHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgcGFkZGluZzogXCIwXCIsXG4gICAgICAgIGJvcmRlcjogXCIwXCIsXG4gICAgICAgIGhlaWdodDogXCIxcHhcIixcbiAgICAgICAgd2lkdGg6IFwiMXB4XCIsXG4gICAgICAgIFwibWFyZ2luLWJvdHRvbVwiOiBcIi0xcHhcIixcbiAgICAgICAgXCJtYXJnaW4tcmlnaHRcIjogXCItMXB4XCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICBjbGlwOiBcInJlY3QoMCAwIDAgMClcIixcbiAgICAgICAgXCJ3aGl0ZS1zcGFjZVwiOiBcIm5vd3JhcFwiXG4gICAgICB9KTtcbiAgICAgIG9wdGlvbnMuJGlucHV0LmFmdGVyKHRoaXMuJGVsKTtcblxuICAgICAgXy5lYWNoKG9wdGlvbnMubWVudS5kYXRhc2V0cywgXy5iaW5kKGZ1bmN0aW9uIChkYXRhc2V0KSB7XG4gICAgICAgIGlmIChkYXRhc2V0Lm9uU3luYykge1xuICAgICAgICAgIGRhdGFzZXQub25TeW5jKFwicmVuZGVyZWRcIiwgXy5iaW5kKHRoaXMudXBkYXRlLCB0aGlzKSk7XG4gICAgICAgICAgZGF0YXNldC5vblN5bmMoXCJjbGVhcmVkXCIsIF8uYmluZCh0aGlzLmNsZWFyZWQsIHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcykpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oU3RhdHVzLnByb3RvdHlwZSwge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZXZlbnQsIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBzdWdnZXN0aW9ucy5sZW5ndGg7XG4gICAgICAgIHZhciB3b3JkcztcblxuICAgICAgICBpZiAobGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgd29yZHMgPSB7XG4gICAgICAgICAgICByZXN1bHQ6IFwicmVzdWx0XCIsXG4gICAgICAgICAgICBpczogXCJpc1wiXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3b3JkcyA9IHtcbiAgICAgICAgICAgIHJlc3VsdDogXCJyZXN1bHRzXCIsXG4gICAgICAgICAgICBpczogXCJhcmVcIlxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRlbC50ZXh0KGxlbmd0aCArIFwiIFwiICsgd29yZHMucmVzdWx0ICsgXCIgXCIgKyB3b3Jkcy5pcyArIFwiIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuXCIpO1xuICAgICAgfSxcbiAgICAgIGNsZWFyZWQ6IGZ1bmN0aW9uIGNsZWFyZWQoKSB7XG4gICAgICAgIHRoaXMuJGVsLnRleHQoXCJcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gU3RhdHVzO1xuICB9KCk7XG5cbiAgdmFyIERlZmF1bHRNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHMgPSBNZW51LnByb3RvdHlwZTtcblxuICAgIGZ1bmN0aW9uIERlZmF1bHRNZW51KCkge1xuICAgICAgTWVudS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oRGVmYXVsdE1lbnUucHJvdG90eXBlLCBNZW51LnByb3RvdHlwZSwge1xuICAgICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgIXRoaXMuX2FsbERhdGFzZXRzRW1wdHkoKSAmJiB0aGlzLl9zaG93KCk7XG4gICAgICAgIHJldHVybiBzLm9wZW4uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgIH0sXG4gICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX2hpZGUoKTtcblxuICAgICAgICByZXR1cm4gcy5jbG9zZS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgfSxcbiAgICAgIF9vblJlbmRlcmVkOiBmdW5jdGlvbiBvblJlbmRlcmVkKCkge1xuICAgICAgICBpZiAodGhpcy5fYWxsRGF0YXNldHNFbXB0eSgpKSB7XG4gICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaXNPcGVuKCkgJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHMuX29uUmVuZGVyZWQuYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgIH0sXG4gICAgICBfb25DbGVhcmVkOiBmdW5jdGlvbiBvbkNsZWFyZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpIHtcbiAgICAgICAgICB0aGlzLl9oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5pc09wZW4oKSAmJiB0aGlzLl9zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcy5fb25DbGVhcmVkLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICB9LFxuICAgICAgc2V0TGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIHNldExhbmd1YWdlRGlyZWN0aW9uKGRpcikge1xuICAgICAgICB0aGlzLiRub2RlLmNzcyhkaXIgPT09IFwibHRyXCIgPyB0aGlzLmNzcy5sdHIgOiB0aGlzLmNzcy5ydGwpO1xuICAgICAgICByZXR1cm4gcy5zZXRMYW5ndWFnZURpcmVjdGlvbi5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgfSxcbiAgICAgIF9oaWRlOiBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICB0aGlzLiRub2RlLmhpZGUoKTtcbiAgICAgIH0sXG4gICAgICBfc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgdGhpcy4kbm9kZS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gRGVmYXVsdE1lbnU7XG4gIH0oKTtcblxuICB2YXIgVHlwZWFoZWFkID0gZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gVHlwZWFoZWFkKG8sIHd3dykge1xuICAgICAgdmFyIG9uRm9jdXNlZCwgb25CbHVycmVkLCBvbkVudGVyS2V5ZWQsIG9uVGFiS2V5ZWQsIG9uRXNjS2V5ZWQsIG9uVXBLZXllZCwgb25Eb3duS2V5ZWQsIG9uTGVmdEtleWVkLCBvblJpZ2h0S2V5ZWQsIG9uUXVlcnlDaGFuZ2VkLCBvbldoaXRlc3BhY2VDaGFuZ2VkO1xuICAgICAgbyA9IG8gfHwge307XG5cbiAgICAgIGlmICghby5pbnB1dCkge1xuICAgICAgICAkLmVycm9yKFwibWlzc2luZyBpbnB1dFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvLm1lbnUpIHtcbiAgICAgICAgJC5lcnJvcihcIm1pc3NpbmcgbWVudVwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvLmV2ZW50QnVzKSB7XG4gICAgICAgICQuZXJyb3IoXCJtaXNzaW5nIGV2ZW50IGJ1c1wiKTtcbiAgICAgIH1cblxuICAgICAgd3d3Lm1peGluKHRoaXMpO1xuICAgICAgdGhpcy5ldmVudEJ1cyA9IG8uZXZlbnRCdXM7XG4gICAgICB0aGlzLm1pbkxlbmd0aCA9IF8uaXNOdW1iZXIoby5taW5MZW5ndGgpID8gby5taW5MZW5ndGggOiAxO1xuICAgICAgdGhpcy5pbnB1dCA9IG8uaW5wdXQ7XG4gICAgICB0aGlzLm1lbnUgPSBvLm1lbnU7XG4gICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5hdXRvc2VsZWN0ID0gISFvLmF1dG9zZWxlY3Q7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5pbnB1dC5oYXNGb2N1cygpICYmIHRoaXMuYWN0aXZhdGUoKTtcbiAgICAgIHRoaXMuZGlyID0gdGhpcy5pbnB1dC5nZXRMYW5nRGlyKCk7XG5cbiAgICAgIHRoaXMuX2hhY2tzKCk7XG5cbiAgICAgIHRoaXMubWVudS5iaW5kKCkub25TeW5jKFwic2VsZWN0YWJsZUNsaWNrZWRcIiwgdGhpcy5fb25TZWxlY3RhYmxlQ2xpY2tlZCwgdGhpcykub25TeW5jKFwiYXN5bmNSZXF1ZXN0ZWRcIiwgdGhpcy5fb25Bc3luY1JlcXVlc3RlZCwgdGhpcykub25TeW5jKFwiYXN5bmNDYW5jZWxlZFwiLCB0aGlzLl9vbkFzeW5jQ2FuY2VsZWQsIHRoaXMpLm9uU3luYyhcImFzeW5jUmVjZWl2ZWRcIiwgdGhpcy5fb25Bc3luY1JlY2VpdmVkLCB0aGlzKS5vblN5bmMoXCJkYXRhc2V0UmVuZGVyZWRcIiwgdGhpcy5fb25EYXRhc2V0UmVuZGVyZWQsIHRoaXMpLm9uU3luYyhcImRhdGFzZXRDbGVhcmVkXCIsIHRoaXMuX29uRGF0YXNldENsZWFyZWQsIHRoaXMpO1xuICAgICAgb25Gb2N1c2VkID0gYyh0aGlzLCBcImFjdGl2YXRlXCIsIFwib3BlblwiLCBcIl9vbkZvY3VzZWRcIik7XG4gICAgICBvbkJsdXJyZWQgPSBjKHRoaXMsIFwiZGVhY3RpdmF0ZVwiLCBcIl9vbkJsdXJyZWRcIik7XG4gICAgICBvbkVudGVyS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25FbnRlcktleWVkXCIpO1xuICAgICAgb25UYWJLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcImlzT3BlblwiLCBcIl9vblRhYktleWVkXCIpO1xuICAgICAgb25Fc2NLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcIl9vbkVzY0tleWVkXCIpO1xuICAgICAgb25VcEtleWVkID0gYyh0aGlzLCBcImlzQWN0aXZlXCIsIFwib3BlblwiLCBcIl9vblVwS2V5ZWRcIik7XG4gICAgICBvbkRvd25LZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcIm9wZW5cIiwgXCJfb25Eb3duS2V5ZWRcIik7XG4gICAgICBvbkxlZnRLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcImlzT3BlblwiLCBcIl9vbkxlZnRLZXllZFwiKTtcbiAgICAgIG9uUmlnaHRLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcImlzT3BlblwiLCBcIl9vblJpZ2h0S2V5ZWRcIik7XG4gICAgICBvblF1ZXJ5Q2hhbmdlZCA9IGModGhpcywgXCJfb3BlbklmQWN0aXZlXCIsIFwiX29uUXVlcnlDaGFuZ2VkXCIpO1xuICAgICAgb25XaGl0ZXNwYWNlQ2hhbmdlZCA9IGModGhpcywgXCJfb3BlbklmQWN0aXZlXCIsIFwiX29uV2hpdGVzcGFjZUNoYW5nZWRcIik7XG4gICAgICB0aGlzLmlucHV0LmJpbmQoKS5vblN5bmMoXCJmb2N1c2VkXCIsIG9uRm9jdXNlZCwgdGhpcykub25TeW5jKFwiYmx1cnJlZFwiLCBvbkJsdXJyZWQsIHRoaXMpLm9uU3luYyhcImVudGVyS2V5ZWRcIiwgb25FbnRlcktleWVkLCB0aGlzKS5vblN5bmMoXCJ0YWJLZXllZFwiLCBvblRhYktleWVkLCB0aGlzKS5vblN5bmMoXCJlc2NLZXllZFwiLCBvbkVzY0tleWVkLCB0aGlzKS5vblN5bmMoXCJ1cEtleWVkXCIsIG9uVXBLZXllZCwgdGhpcykub25TeW5jKFwiZG93bktleWVkXCIsIG9uRG93bktleWVkLCB0aGlzKS5vblN5bmMoXCJsZWZ0S2V5ZWRcIiwgb25MZWZ0S2V5ZWQsIHRoaXMpLm9uU3luYyhcInJpZ2h0S2V5ZWRcIiwgb25SaWdodEtleWVkLCB0aGlzKS5vblN5bmMoXCJxdWVyeUNoYW5nZWRcIiwgb25RdWVyeUNoYW5nZWQsIHRoaXMpLm9uU3luYyhcIndoaXRlc3BhY2VDaGFuZ2VkXCIsIG9uV2hpdGVzcGFjZUNoYW5nZWQsIHRoaXMpLm9uU3luYyhcImxhbmdEaXJDaGFuZ2VkXCIsIHRoaXMuX29uTGFuZ0RpckNoYW5nZWQsIHRoaXMpO1xuICAgIH1cblxuICAgIF8ubWl4aW4oVHlwZWFoZWFkLnByb3RvdHlwZSwge1xuICAgICAgX2hhY2tzOiBmdW5jdGlvbiBoYWNrcygpIHtcbiAgICAgICAgdmFyICRpbnB1dCwgJG1lbnU7XG4gICAgICAgICRpbnB1dCA9IHRoaXMuaW5wdXQuJGlucHV0IHx8ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgJG1lbnUgPSB0aGlzLm1lbnUuJG5vZGUgfHwgJChcIjxkaXY+XCIpO1xuICAgICAgICAkaW5wdXQub24oXCJibHVyLnR0XCIsIGZ1bmN0aW9uICgkZSkge1xuICAgICAgICAgIHZhciBhY3RpdmUsIGlzQWN0aXZlLCBoYXNBY3RpdmU7XG4gICAgICAgICAgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICBpc0FjdGl2ZSA9ICRtZW51LmlzKGFjdGl2ZSk7XG4gICAgICAgICAgaGFzQWN0aXZlID0gJG1lbnUuaGFzKGFjdGl2ZSkubGVuZ3RoID4gMDtcblxuICAgICAgICAgIGlmIChfLmlzTXNpZSgpICYmIChpc0FjdGl2ZSB8fCBoYXNBY3RpdmUpKSB7XG4gICAgICAgICAgICAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICRtZW51Lm9uKFwibW91c2Vkb3duLnR0XCIsIGZ1bmN0aW9uICgkZSkge1xuICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIF9vblNlbGVjdGFibGVDbGlja2VkOiBmdW5jdGlvbiBvblNlbGVjdGFibGVDbGlja2VkKHR5cGUsICRlbCkge1xuICAgICAgICB0aGlzLnNlbGVjdCgkZWwpO1xuICAgICAgfSxcbiAgICAgIF9vbkRhdGFzZXRDbGVhcmVkOiBmdW5jdGlvbiBvbkRhdGFzZXRDbGVhcmVkKCkge1xuICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICB9LFxuICAgICAgX29uRGF0YXNldFJlbmRlcmVkOiBmdW5jdGlvbiBvbkRhdGFzZXRSZW5kZXJlZCh0eXBlLCBzdWdnZXN0aW9ucywgYXN5bmMsIGRhdGFzZXQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlSGludCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmF1dG9zZWxlY3QpIHtcbiAgICAgICAgICB2YXIgY3Vyc29yQ2xhc3MgPSB0aGlzLnNlbGVjdG9ycy5jdXJzb3Iuc3Vic3RyKDEpO1xuICAgICAgICAgIHRoaXMubWVudS4kbm9kZS5maW5kKHRoaXMuc2VsZWN0b3JzLnN1Z2dlc3Rpb24pLmZpcnN0KCkuYWRkQ2xhc3MoY3Vyc29yQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwicmVuZGVyXCIsIHN1Z2dlc3Rpb25zLCBhc3luYywgZGF0YXNldCk7XG4gICAgICB9LFxuICAgICAgX29uQXN5bmNSZXF1ZXN0ZWQ6IGZ1bmN0aW9uIG9uQXN5bmNSZXF1ZXN0ZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYXN5bmNyZXF1ZXN0XCIsIHF1ZXJ5LCBkYXRhc2V0KTtcbiAgICAgIH0sXG4gICAgICBfb25Bc3luY0NhbmNlbGVkOiBmdW5jdGlvbiBvbkFzeW5jQ2FuY2VsZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYXN5bmNjYW5jZWxcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgfSxcbiAgICAgIF9vbkFzeW5jUmVjZWl2ZWQ6IGZ1bmN0aW9uIG9uQXN5bmNSZWNlaXZlZCh0eXBlLCBkYXRhc2V0LCBxdWVyeSkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhc3luY3JlY2VpdmVcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgfSxcbiAgICAgIF9vbkZvY3VzZWQ6IGZ1bmN0aW9uIG9uRm9jdXNlZCgpIHtcbiAgICAgICAgdGhpcy5fbWluTGVuZ3RoTWV0KCkgJiYgdGhpcy5tZW51LnVwZGF0ZSh0aGlzLmlucHV0LmdldFF1ZXJ5KCkpO1xuICAgICAgfSxcbiAgICAgIF9vbkJsdXJyZWQ6IGZ1bmN0aW9uIG9uQmx1cnJlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXQuaGFzUXVlcnlDaGFuZ2VkU2luY2VMYXN0Rm9jdXMoKSkge1xuICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImNoYW5nZVwiLCB0aGlzLmlucHV0LmdldFF1ZXJ5KCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX29uRW50ZXJLZXllZDogZnVuY3Rpb24gb25FbnRlcktleWVkKHR5cGUsICRlKSB7XG4gICAgICAgIHZhciAkc2VsZWN0YWJsZTtcblxuICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSkge1xuICAgICAgICAgICAgJGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmF1dG9zZWxlY3QpIHtcbiAgICAgICAgICBpZiAodGhpcy5zZWxlY3QodGhpcy5tZW51LmdldFRvcFNlbGVjdGFibGUoKSkpIHtcbiAgICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBfb25UYWJLZXllZDogZnVuY3Rpb24gb25UYWJLZXllZCh0eXBlLCAkZSkge1xuICAgICAgICB2YXIgJHNlbGVjdGFibGU7XG5cbiAgICAgICAgaWYgKCRzZWxlY3RhYmxlID0gdGhpcy5tZW51LmdldEFjdGl2ZVNlbGVjdGFibGUoKSkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXV0b3NlbGVjdCkge1xuICAgICAgICAgIGlmICgkc2VsZWN0YWJsZSA9IHRoaXMubWVudS5nZXRUb3BTZWxlY3RhYmxlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vbkVzY0tleWVkOiBmdW5jdGlvbiBvbkVzY0tleWVkKCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9LFxuICAgICAgX29uVXBLZXllZDogZnVuY3Rpb24gb25VcEtleWVkKCkge1xuICAgICAgICB0aGlzLm1vdmVDdXJzb3IoLTEpO1xuICAgICAgfSxcbiAgICAgIF9vbkRvd25LZXllZDogZnVuY3Rpb24gb25Eb3duS2V5ZWQoKSB7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvcigrMSk7XG4gICAgICB9LFxuICAgICAgX29uTGVmdEtleWVkOiBmdW5jdGlvbiBvbkxlZnRLZXllZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcInJ0bFwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgdGhpcy5hdXRvY29tcGxldGUodGhpcy5tZW51LmdldEFjdGl2ZVNlbGVjdGFibGUoKSB8fCB0aGlzLm1lbnUuZ2V0VG9wU2VsZWN0YWJsZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vblJpZ2h0S2V5ZWQ6IGZ1bmN0aW9uIG9uUmlnaHRLZXllZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcImx0clwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgdGhpcy5hdXRvY29tcGxldGUodGhpcy5tZW51LmdldEFjdGl2ZVNlbGVjdGFibGUoKSB8fCB0aGlzLm1lbnUuZ2V0VG9wU2VsZWN0YWJsZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vblF1ZXJ5Q2hhbmdlZDogZnVuY3Rpb24gb25RdWVyeUNoYW5nZWQoZSwgcXVlcnkpIHtcbiAgICAgICAgdGhpcy5fbWluTGVuZ3RoTWV0KHF1ZXJ5KSA/IHRoaXMubWVudS51cGRhdGUocXVlcnkpIDogdGhpcy5tZW51LmVtcHR5KCk7XG4gICAgICB9LFxuICAgICAgX29uV2hpdGVzcGFjZUNoYW5nZWQ6IGZ1bmN0aW9uIG9uV2hpdGVzcGFjZUNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhpbnQoKTtcbiAgICAgIH0sXG4gICAgICBfb25MYW5nRGlyQ2hhbmdlZDogZnVuY3Rpb24gb25MYW5nRGlyQ2hhbmdlZChlLCBkaXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyICE9PSBkaXIpIHtcbiAgICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgICB0aGlzLm1lbnUuc2V0TGFuZ3VhZ2VEaXJlY3Rpb24oZGlyKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vcGVuSWZBY3RpdmU6IGZ1bmN0aW9uIG9wZW5JZkFjdGl2ZSgpIHtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSgpICYmIHRoaXMub3BlbigpO1xuICAgICAgfSxcbiAgICAgIF9taW5MZW5ndGhNZXQ6IGZ1bmN0aW9uIG1pbkxlbmd0aE1ldChxdWVyeSkge1xuICAgICAgICBxdWVyeSA9IF8uaXNTdHJpbmcocXVlcnkpID8gcXVlcnkgOiB0aGlzLmlucHV0LmdldFF1ZXJ5KCkgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5Lmxlbmd0aCA+PSB0aGlzLm1pbkxlbmd0aDtcbiAgICAgIH0sXG4gICAgICBfdXBkYXRlSGludDogZnVuY3Rpb24gdXBkYXRlSGludCgpIHtcbiAgICAgICAgdmFyICRzZWxlY3RhYmxlLCBkYXRhLCB2YWwsIHF1ZXJ5LCBlc2NhcGVkUXVlcnksIGZyb250TWF0Y2hSZWdFeCwgbWF0Y2g7XG4gICAgICAgICRzZWxlY3RhYmxlID0gdGhpcy5tZW51LmdldFRvcFNlbGVjdGFibGUoKTtcbiAgICAgICAgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkc2VsZWN0YWJsZSk7XG4gICAgICAgIHZhbCA9IHRoaXMuaW5wdXQuZ2V0SW5wdXRWYWx1ZSgpO1xuXG4gICAgICAgIGlmIChkYXRhICYmICFfLmlzQmxhbmtTdHJpbmcodmFsKSAmJiAhdGhpcy5pbnB1dC5oYXNPdmVyZmxvdygpKSB7XG4gICAgICAgICAgcXVlcnkgPSBJbnB1dC5ub3JtYWxpemVRdWVyeSh2YWwpO1xuICAgICAgICAgIGVzY2FwZWRRdWVyeSA9IF8uZXNjYXBlUmVnRXhDaGFycyhxdWVyeSk7XG4gICAgICAgICAgZnJvbnRNYXRjaFJlZ0V4ID0gbmV3IFJlZ0V4cChcIl4oPzpcIiArIGVzY2FwZWRRdWVyeSArIFwiKSguKyQpXCIsIFwiaVwiKTtcbiAgICAgICAgICBtYXRjaCA9IGZyb250TWF0Y2hSZWdFeC5leGVjKGRhdGEudmFsKTtcbiAgICAgICAgICBtYXRjaCAmJiB0aGlzLmlucHV0LnNldEhpbnQodmFsICsgbWF0Y2hbMV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpc0VuYWJsZWQ6IGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlZDtcbiAgICAgIH0sXG4gICAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIH0sXG4gICAgICBpc0FjdGl2ZTogZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZTtcbiAgICAgIH0sXG4gICAgICBhY3RpdmF0ZTogZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0VuYWJsZWQoKSB8fCB0aGlzLmV2ZW50QnVzLmJlZm9yZShcImFjdGl2ZVwiKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYWN0aXZlXCIpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50QnVzLmJlZm9yZShcImlkbGVcIikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiaWRsZVwiKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGlzT3BlbjogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZW51LmlzT3BlbigpO1xuICAgICAgfSxcbiAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4oKSAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dC5zZXRBcmlhRXhwYW5kZWQodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tZW51Lm9wZW4oKTtcblxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUhpbnQoKTtcblxuICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcIm9wZW5cIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4oKTtcbiAgICAgIH0sXG4gICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3BlbigpICYmICF0aGlzLmV2ZW50QnVzLmJlZm9yZShcImNsb3NlXCIpKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dC5zZXRBcmlhRXhwYW5kZWQoZmFsc2UpO1xuICAgICAgICAgIHRoaXMubWVudS5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgICAgdGhpcy5pbnB1dC5yZXNldElucHV0VmFsdWUoKTtcbiAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJjbG9zZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhdGhpcy5pc09wZW4oKTtcbiAgICAgIH0sXG4gICAgICBzZXRWYWw6IGZ1bmN0aW9uIHNldFZhbCh2YWwpIHtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXRRdWVyeShfLnRvU3RyKHZhbCkpO1xuICAgICAgfSxcbiAgICAgIGdldFZhbDogZnVuY3Rpb24gZ2V0VmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC5nZXRRdWVyeSgpO1xuICAgICAgfSxcbiAgICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KCRzZWxlY3RhYmxlKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5tZW51LmdldFNlbGVjdGFibGVEYXRhKCRzZWxlY3RhYmxlKTtcblxuICAgICAgICBpZiAoZGF0YSAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJzZWxlY3RcIiwgZGF0YS5vYmosIGRhdGEuZGF0YXNldCkpIHtcbiAgICAgICAgICB0aGlzLmlucHV0LnNldFF1ZXJ5KGRhdGEudmFsLCB0cnVlKTtcbiAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJzZWxlY3RcIiwgZGF0YS5vYmosIGRhdGEuZGF0YXNldCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGF1dG9jb21wbGV0ZTogZnVuY3Rpb24gYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSB7XG4gICAgICAgIHZhciBxdWVyeSwgZGF0YSwgaXNWYWxpZDtcbiAgICAgICAgcXVlcnkgPSB0aGlzLmlucHV0LmdldFF1ZXJ5KCk7XG4gICAgICAgIGRhdGEgPSB0aGlzLm1lbnUuZ2V0U2VsZWN0YWJsZURhdGEoJHNlbGVjdGFibGUpO1xuICAgICAgICBpc1ZhbGlkID0gZGF0YSAmJiBxdWVyeSAhPT0gZGF0YS52YWw7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgIXRoaXMuZXZlbnRCdXMuYmVmb3JlKFwiYXV0b2NvbXBsZXRlXCIsIGRhdGEub2JqLCBkYXRhLmRhdGFzZXQpKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dC5zZXRRdWVyeShkYXRhLnZhbCk7XG4gICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiYXV0b2NvbXBsZXRlXCIsIGRhdGEub2JqLCBkYXRhLmRhdGFzZXQpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICAgIG1vdmVDdXJzb3I6IGZ1bmN0aW9uIG1vdmVDdXJzb3IoZGVsdGEpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCAkY2FuZGlkYXRlLCBkYXRhLCBzdWdnZXN0aW9uLCBkYXRhc2V0TmFtZSwgY2FuY2VsTW92ZSwgaWQ7XG4gICAgICAgIHF1ZXJ5ID0gdGhpcy5pbnB1dC5nZXRRdWVyeSgpO1xuICAgICAgICAkY2FuZGlkYXRlID0gdGhpcy5tZW51LnNlbGVjdGFibGVSZWxhdGl2ZVRvQ3Vyc29yKGRlbHRhKTtcbiAgICAgICAgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkY2FuZGlkYXRlKTtcbiAgICAgICAgc3VnZ2VzdGlvbiA9IGRhdGEgPyBkYXRhLm9iaiA6IG51bGw7XG4gICAgICAgIGRhdGFzZXROYW1lID0gZGF0YSA/IGRhdGEuZGF0YXNldCA6IG51bGw7XG4gICAgICAgIGlkID0gJGNhbmRpZGF0ZSA/ICRjYW5kaWRhdGUuYXR0cihcImlkXCIpIDogbnVsbDtcbiAgICAgICAgdGhpcy5pbnB1dC50cmlnZ2VyKFwiY3Vyc29yY2hhbmdlXCIsIGlkKTtcbiAgICAgICAgY2FuY2VsTW92ZSA9IHRoaXMuX21pbkxlbmd0aE1ldCgpICYmIHRoaXMubWVudS51cGRhdGUocXVlcnkpO1xuXG4gICAgICAgIGlmICghY2FuY2VsTW92ZSAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJjdXJzb3JjaGFuZ2VcIiwgc3VnZ2VzdGlvbiwgZGF0YXNldE5hbWUpKSB7XG4gICAgICAgICAgdGhpcy5tZW51LnNldEN1cnNvcigkY2FuZGlkYXRlKTtcblxuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEudmFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0SW5wdXRWYWx1ZShkYXRhLnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQucmVzZXRJbnB1dFZhbHVlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUhpbnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJjdXJzb3JjaGFuZ2VcIiwgc3VnZ2VzdGlvbiwgZGF0YXNldE5hbWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1lbnUuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFR5cGVhaGVhZDtcblxuICAgIGZ1bmN0aW9uIGMoY3R4KSB7XG4gICAgICB2YXIgbWV0aG9kcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgICAgIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgICAgcmV0dXJuIGN0eFttZXRob2RdLmFwcGx5KGN0eCwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH0oKTtcblxuICAoZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG9sZCwga2V5cywgbWV0aG9kcztcbiAgICBvbGQgPSAkLmZuLnR5cGVhaGVhZDtcbiAgICBrZXlzID0ge1xuICAgICAgd3d3OiBcInR0LXd3d1wiLFxuICAgICAgYXR0cnM6IFwidHQtYXR0cnNcIixcbiAgICAgIHR5cGVhaGVhZDogXCJ0dC10eXBlYWhlYWRcIlxuICAgIH07XG4gICAgbWV0aG9kcyA9IHtcbiAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobywgZGF0YXNldHMpIHtcbiAgICAgICAgdmFyIHd3dztcbiAgICAgICAgZGF0YXNldHMgPSBfLmlzQXJyYXkoZGF0YXNldHMpID8gZGF0YXNldHMgOiBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICB3d3cgPSBXV1coby5jbGFzc05hbWVzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChhdHRhY2gpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGF0dGFjaCgpIHtcbiAgICAgICAgICB2YXIgJGlucHV0LCAkd3JhcHBlciwgJGhpbnQsICRtZW51LCBkZWZhdWx0SGludCwgZGVmYXVsdE1lbnUsIGV2ZW50QnVzLCBpbnB1dCwgbWVudSwgc3RhdHVzLCB0eXBlYWhlYWQsIE1lbnVDb25zdHJ1Y3RvcjtcblxuICAgICAgICAgIF8uZWFjaChkYXRhc2V0cywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIGQuaGlnaGxpZ2h0ID0gISFvLmhpZ2hsaWdodDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgICAgJHdyYXBwZXIgPSAkKHd3dy5odG1sLndyYXBwZXIpO1xuICAgICAgICAgICRoaW50ID0gJGVsT3JOdWxsKG8uaGludCk7XG4gICAgICAgICAgJG1lbnUgPSAkZWxPck51bGwoby5tZW51KTtcbiAgICAgICAgICBkZWZhdWx0SGludCA9IG8uaGludCAhPT0gZmFsc2UgJiYgISRoaW50O1xuICAgICAgICAgIGRlZmF1bHRNZW51ID0gby5tZW51ICE9PSBmYWxzZSAmJiAhJG1lbnU7XG4gICAgICAgICAgZGVmYXVsdEhpbnQgJiYgKCRoaW50ID0gYnVpbGRIaW50RnJvbUlucHV0KCRpbnB1dCwgd3d3KSk7XG4gICAgICAgICAgZGVmYXVsdE1lbnUgJiYgKCRtZW51ID0gJCh3d3cuaHRtbC5tZW51KS5jc3Mod3d3LmNzcy5tZW51KSk7XG4gICAgICAgICAgJGhpbnQgJiYgJGhpbnQudmFsKFwiXCIpO1xuICAgICAgICAgICRpbnB1dCA9IHByZXBJbnB1dCgkaW5wdXQsIHd3dyk7XG5cbiAgICAgICAgICBpZiAoZGVmYXVsdEhpbnQgfHwgZGVmYXVsdE1lbnUpIHtcbiAgICAgICAgICAgICR3cmFwcGVyLmNzcyh3d3cuY3NzLndyYXBwZXIpO1xuICAgICAgICAgICAgJGlucHV0LmNzcyhkZWZhdWx0SGludCA/IHd3dy5jc3MuaW5wdXQgOiB3d3cuY3NzLmlucHV0V2l0aE5vSGludCk7XG4gICAgICAgICAgICAkaW5wdXQud3JhcCgkd3JhcHBlcikucGFyZW50KCkucHJlcGVuZChkZWZhdWx0SGludCA/ICRoaW50IDogbnVsbCkuYXBwZW5kKGRlZmF1bHRNZW51ID8gJG1lbnUgOiBudWxsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBNZW51Q29uc3RydWN0b3IgPSBkZWZhdWx0TWVudSA/IERlZmF1bHRNZW51IDogTWVudTtcbiAgICAgICAgICBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cyh7XG4gICAgICAgICAgICBlbDogJGlucHV0XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaW5wdXQgPSBuZXcgSW5wdXQoe1xuICAgICAgICAgICAgaGludDogJGhpbnQsXG4gICAgICAgICAgICBpbnB1dDogJGlucHV0LFxuICAgICAgICAgICAgbWVudTogJG1lbnVcbiAgICAgICAgICB9LCB3d3cpO1xuICAgICAgICAgIG1lbnUgPSBuZXcgTWVudUNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIG5vZGU6ICRtZW51LFxuICAgICAgICAgICAgZGF0YXNldHM6IGRhdGFzZXRzXG4gICAgICAgICAgfSwgd3d3KTtcbiAgICAgICAgICBzdGF0dXMgPSBuZXcgU3RhdHVzKHtcbiAgICAgICAgICAgICRpbnB1dDogJGlucHV0LFxuICAgICAgICAgICAgbWVudTogbWVudVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHR5cGVhaGVhZCA9IG5ldyBUeXBlYWhlYWQoe1xuICAgICAgICAgICAgaW5wdXQ6IGlucHV0LFxuICAgICAgICAgICAgbWVudTogbWVudSxcbiAgICAgICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcbiAgICAgICAgICAgIG1pbkxlbmd0aDogby5taW5MZW5ndGgsXG4gICAgICAgICAgICBhdXRvc2VsZWN0OiBvLmF1dG9zZWxlY3RcbiAgICAgICAgICB9LCB3d3cpO1xuICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMud3d3LCB3d3cpO1xuICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMudHlwZWFoZWFkLCB0eXBlYWhlYWQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaXNFbmFibGVkOiBmdW5jdGlvbiBpc0VuYWJsZWQoKSB7XG4gICAgICAgIHZhciBlbmFibGVkO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIGVuYWJsZWQgPSB0LmlzRW5hYmxlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgICB9LFxuICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHR0RWFjaCh0aGlzLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHQuZW5hYmxlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0LmRpc2FibGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZTtcbiAgICAgICAgdHRFYWNoKHRoaXMuZmlyc3QoKSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBhY3RpdmUgPSB0LmlzQWN0aXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWN0aXZlO1xuICAgICAgfSxcbiAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5hY3RpdmF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5kZWFjdGl2YXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBpc09wZW46IGZ1bmN0aW9uIGlzT3BlbigpIHtcbiAgICAgICAgdmFyIG9wZW47XG4gICAgICAgIHR0RWFjaCh0aGlzLmZpcnN0KCksIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgb3BlbiA9IHQuaXNPcGVuKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3BlbjtcbiAgICAgIH0sXG4gICAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB0Lm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgdC5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoZWwpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmYWxzZSxcbiAgICAgICAgICAgICRlbCA9ICQoZWwpO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0LnNlbGVjdCgkZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9LFxuICAgICAgYXV0b2NvbXBsZXRlOiBmdW5jdGlvbiBhdXRvY29tcGxldGUoZWwpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmYWxzZSxcbiAgICAgICAgICAgICRlbCA9ICQoZWwpO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0LmF1dG9jb21wbGV0ZSgkZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9LFxuICAgICAgbW92ZUN1cnNvcjogZnVuY3Rpb24gbW92ZUN1cnNvZShkZWx0YSkge1xuICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0Lm1vdmVDdXJzb3IoZGVsdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9LFxuICAgICAgdmFsOiBmdW5jdGlvbiB2YWwobmV3VmFsKSB7XG4gICAgICAgIHZhciBxdWVyeTtcblxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcXVlcnkgPSB0LmdldFZhbCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBxdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQuc2V0VmFsKF8udG9TdHIobmV3VmFsKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24gKHR5cGVhaGVhZCwgJGlucHV0KSB7XG4gICAgICAgICAgcmV2ZXJ0KCRpbnB1dCk7XG4gICAgICAgICAgdHlwZWFoZWFkLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkLmZuLnR5cGVhaGVhZCA9IGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkLmZuLnR5cGVhaGVhZC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgICQuZm4udHlwZWFoZWFkID0gb2xkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHR0RWFjaCgkZWxzLCBmbikge1xuICAgICAgJGVscy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyksXG4gICAgICAgICAgICB0eXBlYWhlYWQ7XG4gICAgICAgICh0eXBlYWhlYWQgPSAkaW5wdXQuZGF0YShrZXlzLnR5cGVhaGVhZCkpICYmIGZuKHR5cGVhaGVhZCwgJGlucHV0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkSGludEZyb21JbnB1dCgkaW5wdXQsIHd3dykge1xuICAgICAgcmV0dXJuICRpbnB1dC5jbG9uZSgpLmFkZENsYXNzKHd3dy5jbGFzc2VzLmhpbnQpLnJlbW92ZURhdGEoKS5jc3Mod3d3LmNzcy5oaW50KS5jc3MoZ2V0QmFja2dyb3VuZFN0eWxlcygkaW5wdXQpKS5wcm9wKHtcbiAgICAgICAgcmVhZG9ubHk6IHRydWUsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgfSkucmVtb3ZlQXR0cihcImlkIG5hbWUgcGxhY2Vob2xkZXJcIikucmVtb3ZlQ2xhc3MoXCJyZXF1aXJlZFwiKS5hdHRyKHtcbiAgICAgICAgc3BlbGxjaGVjazogXCJmYWxzZVwiLFxuICAgICAgICB0YWJpbmRleDogLTFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXBJbnB1dCgkaW5wdXQsIHd3dykge1xuICAgICAgJGlucHV0LmRhdGEoa2V5cy5hdHRycywge1xuICAgICAgICBkaXI6ICRpbnB1dC5hdHRyKFwiZGlyXCIpLFxuICAgICAgICBhdXRvY29tcGxldGU6ICRpbnB1dC5hdHRyKFwiYXV0b2NvbXBsZXRlXCIpLFxuICAgICAgICBzcGVsbGNoZWNrOiAkaW5wdXQuYXR0cihcInNwZWxsY2hlY2tcIiksXG4gICAgICAgIHN0eWxlOiAkaW5wdXQuYXR0cihcInN0eWxlXCIpXG4gICAgICB9KTtcbiAgICAgICRpbnB1dC5hZGRDbGFzcyh3d3cuY2xhc3Nlcy5pbnB1dCkuYXR0cih7XG4gICAgICAgIHNwZWxsY2hlY2s6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgISRpbnB1dC5hdHRyKFwiZGlyXCIpICYmICRpbnB1dC5hdHRyKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIHJldHVybiAkaW5wdXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QmFja2dyb3VuZFN0eWxlcygkZWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJhY2tncm91bmRBdHRhY2htZW50OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1hdHRhY2htZW50XCIpLFxuICAgICAgICBiYWNrZ3JvdW5kQ2xpcDogJGVsLmNzcyhcImJhY2tncm91bmQtY2xpcFwiKSxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiKSxcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiKSxcbiAgICAgICAgYmFja2dyb3VuZE9yaWdpbjogJGVsLmNzcyhcImJhY2tncm91bmQtb3JpZ2luXCIpLFxuICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246ICRlbC5jc3MoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiksXG4gICAgICAgIGJhY2tncm91bmRTaXplOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1zaXplXCIpXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJldmVydCgkaW5wdXQpIHtcbiAgICAgIHZhciB3d3csICR3cmFwcGVyO1xuICAgICAgd3d3ID0gJGlucHV0LmRhdGEoa2V5cy53d3cpO1xuICAgICAgJHdyYXBwZXIgPSAkaW5wdXQucGFyZW50KCkuZmlsdGVyKHd3dy5zZWxlY3RvcnMud3JhcHBlcik7XG5cbiAgICAgIF8uZWFjaCgkaW5wdXQuZGF0YShrZXlzLmF0dHJzKSwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgIF8uaXNVbmRlZmluZWQodmFsKSA/ICRpbnB1dC5yZW1vdmVBdHRyKGtleSkgOiAkaW5wdXQuYXR0cihrZXksIHZhbCk7XG4gICAgICB9KTtcblxuICAgICAgJGlucHV0LnJlbW92ZURhdGEoa2V5cy50eXBlYWhlYWQpLnJlbW92ZURhdGEoa2V5cy53d3cpLnJlbW92ZURhdGEoa2V5cy5hdHRyKS5yZW1vdmVDbGFzcyh3d3cuY2xhc3Nlcy5pbnB1dCk7XG5cbiAgICAgIGlmICgkd3JhcHBlci5sZW5ndGgpIHtcbiAgICAgICAgJGlucHV0LmRldGFjaCgpLmluc2VydEFmdGVyKCR3cmFwcGVyKTtcbiAgICAgICAgJHdyYXBwZXIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gJGVsT3JOdWxsKG9iaikge1xuICAgICAgdmFyIGlzVmFsaWQsICRlbDtcbiAgICAgIGlzVmFsaWQgPSBfLmlzSlF1ZXJ5KG9iaikgfHwgXy5pc0VsZW1lbnQob2JqKTtcbiAgICAgICRlbCA9IGlzVmFsaWQgPyAkKG9iaikuZmlyc3QoKSA6IFtdO1xuICAgICAgcmV0dXJuICRlbC5sZW5ndGggPyAkZWwgOiBudWxsO1xuICAgIH1cbiAgfSkoKTtcbn0pOyIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnanF1ZXJ5JyksIHJlcXVpcmUoJ3BvcHBlci5qcycpKSA6IHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnLCAnanF1ZXJ5JywgJ3BvcHBlci5qcyddLCBmYWN0b3J5KSA6IChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoZ2xvYmFsLmJvb3RzdHJhcCA9IHt9LCBnbG9iYWwualF1ZXJ5LCBnbG9iYWwuUG9wcGVyKSk7XG59KSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cywgJCwgUG9wcGVyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiBfaW50ZXJvcERlZmF1bHRMZWdhY3koZSkge1xuICAgIHJldHVybiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7XG4gICAgICAnZGVmYXVsdCc6IGVcbiAgICB9O1xuICB9XG5cbiAgdmFyICRfX2RlZmF1bHQgPSBfaW50ZXJvcERlZmF1bHRMZWdhY3koJCk7XG5cbiAgdmFyIFBvcHBlcl9fZGVmYXVsdCA9IF9pbnRlcm9wRGVmYXVsdExlZ2FjeShQb3BwZXIpO1xuXG4gIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICAgIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICAgIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICAgIHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG4gIH1cblxuICB2YXIgVFJBTlNJVElPTl9FTkQgPSAndHJhbnNpdGlvbmVuZCc7XG4gIHZhciBNQVhfVUlEID0gMTAwMDAwMDtcbiAgdmFyIE1JTExJU0VDT05EU19NVUxUSVBMSUVSID0gMTAwMDtcblxuICBmdW5jdGlvbiB0b1R5cGUob2JqKSB7XG4gICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIFwiXCIgKyBvYmo7XG4gICAgfVxuXG4gICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwob2JqKS5tYXRjaCgvXFxzKFthLXpdKykvaSlbMV0udG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJpbmRUeXBlOiBUUkFOU0lUSU9OX0VORCxcbiAgICAgIGRlbGVnYXRlVHlwZTogVFJBTlNJVElPTl9FTkQsXG4gICAgICBoYW5kbGU6IGZ1bmN0aW9uIGhhbmRsZShldmVudCkge1xuICAgICAgICBpZiAoJF9fZGVmYXVsdFsnZGVmYXVsdCddKGV2ZW50LnRhcmdldCkuaXModGhpcykpIHtcbiAgICAgICAgICByZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRFbXVsYXRvcihkdXJhdGlvbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgVXRpbC50cmlnZ2VyVHJhbnNpdGlvbkVuZChfdGhpcyk7XG4gICAgICB9XG4gICAgfSwgZHVyYXRpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkVuZFN1cHBvcnQoKSB7XG4gICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gdHJhbnNpdGlvbkVuZEVtdWxhdG9yO1xuICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5ldmVudC5zcGVjaWFsW1V0aWwuVFJBTlNJVElPTl9FTkRdID0gZ2V0U3BlY2lhbFRyYW5zaXRpb25FbmRFdmVudCgpO1xuICB9XG5cbiAgdmFyIFV0aWwgPSB7XG4gICAgVFJBTlNJVElPTl9FTkQ6ICdic1RyYW5zaXRpb25FbmQnLFxuICAgIGdldFVJRDogZnVuY3Rpb24gZ2V0VUlEKHByZWZpeCkge1xuICAgICAgZG8ge1xuICAgICAgICBwcmVmaXggKz0gfn4oTWF0aC5yYW5kb20oKSAqIE1BWF9VSUQpO1xuICAgICAgfSB3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4KSk7XG5cbiAgICAgIHJldHVybiBwcmVmaXg7XG4gICAgfSxcbiAgICBnZXRTZWxlY3RvckZyb21FbGVtZW50OiBmdW5jdGlvbiBnZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuXG4gICAgICBpZiAoIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSAnIycpIHtcbiAgICAgICAgdmFyIGhyZWZBdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgc2VsZWN0b3IgPSBocmVmQXR0ciAmJiBocmVmQXR0ciAhPT0gJyMnID8gaHJlZkF0dHIudHJpbSgpIDogJyc7XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogbnVsbDtcbiAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudDogZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKGVsZW1lbnQpLmNzcygndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xuICAgICAgdmFyIHRyYW5zaXRpb25EZWxheSA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5jc3MoJ3RyYW5zaXRpb24tZGVsYXknKTtcbiAgICAgIHZhciBmbG9hdFRyYW5zaXRpb25EdXJhdGlvbiA9IHBhcnNlRmxvYXQodHJhbnNpdGlvbkR1cmF0aW9uKTtcbiAgICAgIHZhciBmbG9hdFRyYW5zaXRpb25EZWxheSA9IHBhcnNlRmxvYXQodHJhbnNpdGlvbkRlbGF5KTtcblxuICAgICAgaWYgKCFmbG9hdFRyYW5zaXRpb25EdXJhdGlvbiAmJiAhZmxvYXRUcmFuc2l0aW9uRGVsYXkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbi5zcGxpdCgnLCcpWzBdO1xuICAgICAgdHJhbnNpdGlvbkRlbGF5ID0gdHJhbnNpdGlvbkRlbGF5LnNwbGl0KCcsJylbMF07XG4gICAgICByZXR1cm4gKHBhcnNlRmxvYXQodHJhbnNpdGlvbkR1cmF0aW9uKSArIHBhcnNlRmxvYXQodHJhbnNpdGlvbkRlbGF5KSkgKiBNSUxMSVNFQ09ORFNfTVVMVElQTElFUjtcbiAgICB9LFxuICAgIHJlZmxvdzogZnVuY3Rpb24gcmVmbG93KGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9LFxuICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkudHJpZ2dlcihUUkFOU0lUSU9OX0VORCk7XG4gICAgfSxcbiAgICBzdXBwb3J0c1RyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIHN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKFRSQU5TSVRJT05fRU5EKTtcbiAgICB9LFxuICAgIGlzRWxlbWVudDogZnVuY3Rpb24gaXNFbGVtZW50KG9iaikge1xuICAgICAgcmV0dXJuIChvYmpbMF0gfHwgb2JqKS5ub2RlVHlwZTtcbiAgICB9LFxuICAgIHR5cGVDaGVja0NvbmZpZzogZnVuY3Rpb24gdHlwZUNoZWNrQ29uZmlnKGNvbXBvbmVudE5hbWUsIGNvbmZpZywgY29uZmlnVHlwZXMpIHtcbiAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGNvbmZpZ1R5cGVzKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY29uZmlnVHlwZXMsIHByb3BlcnR5KSkge1xuICAgICAgICAgIHZhciBleHBlY3RlZFR5cGVzID0gY29uZmlnVHlwZXNbcHJvcGVydHldO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbmZpZ1twcm9wZXJ0eV07XG4gICAgICAgICAgdmFyIHZhbHVlVHlwZSA9IHZhbHVlICYmIFV0aWwuaXNFbGVtZW50KHZhbHVlKSA/ICdlbGVtZW50JyA6IHRvVHlwZSh2YWx1ZSk7XG5cbiAgICAgICAgICBpZiAoIW5ldyBSZWdFeHAoZXhwZWN0ZWRUeXBlcykudGVzdCh2YWx1ZVR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY29tcG9uZW50TmFtZS50b1VwcGVyQ2FzZSgpICsgXCI6IFwiICsgKFwiT3B0aW9uIFxcXCJcIiArIHByb3BlcnR5ICsgXCJcXFwiIHByb3ZpZGVkIHR5cGUgXFxcIlwiICsgdmFsdWVUeXBlICsgXCJcXFwiIFwiKSArIChcImJ1dCBleHBlY3RlZCB0eXBlIFxcXCJcIiArIGV4cGVjdGVkVHlwZXMgKyBcIlxcXCIuXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbmRTaGFkb3dSb290OiBmdW5jdGlvbiBmaW5kU2hhZG93Um9vdChlbGVtZW50KSB7XG4gICAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hdHRhY2hTaGFkb3cpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5nZXRSb290Tm9kZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgcm9vdCA9IGVsZW1lbnQuZ2V0Um9vdE5vZGUoKTtcbiAgICAgICAgcmV0dXJuIHJvb3QgaW5zdGFuY2VvZiBTaGFkb3dSb290ID8gcm9vdCA6IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBVdGlsLmZpbmRTaGFkb3dSb290KGVsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgfSxcbiAgICBqUXVlcnlEZXRlY3Rpb246IGZ1bmN0aW9uIGpRdWVyeURldGVjdGlvbigpIHtcbiAgICAgIGlmICh0eXBlb2YgJF9fZGVmYXVsdFsnZGVmYXVsdCddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb290c3RyYXBcXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5LiBqUXVlcnkgbXVzdCBiZSBpbmNsdWRlZCBiZWZvcmUgQm9vdHN0cmFwXFwncyBKYXZhU2NyaXB0LicpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmVyc2lvbiA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbi5qcXVlcnkuc3BsaXQoJyAnKVswXS5zcGxpdCgnLicpO1xuICAgICAgdmFyIG1pbk1ham9yID0gMTtcbiAgICAgIHZhciBsdE1ham9yID0gMjtcbiAgICAgIHZhciBtaW5NaW5vciA9IDk7XG4gICAgICB2YXIgbWluUGF0Y2ggPSAxO1xuICAgICAgdmFyIG1heE1ham9yID0gNDtcblxuICAgICAgaWYgKHZlcnNpb25bMF0gPCBsdE1ham9yICYmIHZlcnNpb25bMV0gPCBtaW5NaW5vciB8fCB2ZXJzaW9uWzBdID09PSBtaW5NYWpvciAmJiB2ZXJzaW9uWzFdID09PSBtaW5NaW5vciAmJiB2ZXJzaW9uWzJdIDwgbWluUGF0Y2ggfHwgdmVyc2lvblswXSA+PSBtYXhNYWpvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBhdCBsZWFzdCBqUXVlcnkgdjEuOS4xIGJ1dCBsZXNzIHRoYW4gdjQuMC4wJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBVdGlsLmpRdWVyeURldGVjdGlvbigpO1xuICBzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpO1xuICB2YXIgTkFNRSA9ICdhbGVydCc7XG4gIHZhciBWRVJTSU9OID0gJzQuNS4zJztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLmFsZXJ0JztcbiAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FXTtcbiAgdmFyIFNFTEVDVE9SX0RJU01JU1MgPSAnW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJztcbiAgdmFyIEVWRU5UX0NMT1NFID0gXCJjbG9zZVwiICsgRVZFTlRfS0VZO1xuICB2YXIgRVZFTlRfQ0xPU0VEID0gXCJjbG9zZWRcIiArIEVWRU5UX0tFWTtcbiAgdmFyIEVWRU5UX0NMSUNLX0RBVEFfQVBJID0gXCJjbGlja1wiICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZO1xuICB2YXIgQ0xBU1NfTkFNRV9BTEVSVCA9ICdhbGVydCc7XG4gIHZhciBDTEFTU19OQU1FX0ZBREUgPSAnZmFkZSc7XG4gIHZhciBDTEFTU19OQU1FX1NIT1cgPSAnc2hvdyc7XG5cbiAgdmFyIEFsZXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFsZXJ0KGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBBbGVydC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY2xvc2UgPSBmdW5jdGlvbiBjbG9zZShlbGVtZW50KSB7XG4gICAgICB2YXIgcm9vdEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50O1xuXG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICByb290RWxlbWVudCA9IHRoaXMuX2dldFJvb3RFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VzdG9tRXZlbnQgPSB0aGlzLl90cmlnZ2VyQ2xvc2VFdmVudChyb290RWxlbWVudCk7XG5cbiAgICAgIGlmIChjdXN0b21FdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQocm9vdEVsZW1lbnQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRSb290RWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRSb290RWxlbWVudChlbGVtZW50KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICB2YXIgcGFyZW50ID0gZmFsc2U7XG5cbiAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKGVsZW1lbnQpLmNsb3Nlc3QoXCIuXCIgKyBDTEFTU19OQU1FX0FMRVJUKVswXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl90cmlnZ2VyQ2xvc2VFdmVudCA9IGZ1bmN0aW9uIF90cmlnZ2VyQ2xvc2VFdmVudChlbGVtZW50KSB7XG4gICAgICB2YXIgY2xvc2VFdmVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9DTE9TRSk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkudHJpZ2dlcihjbG9zZUV2ZW50KTtcbiAgICAgIHJldHVybiBjbG9zZUV2ZW50O1xuICAgIH07XG5cbiAgICBfcHJvdG8uX3JlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiBfcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XKTtcblxuICAgICAgaWYgKCEkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9GQURFKSkge1xuICAgICAgICB0aGlzLl9kZXN0cm95RWxlbWVudChlbGVtZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLl9kZXN0cm95RWxlbWVudChlbGVtZW50LCBldmVudCk7XG4gICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2Rlc3Ryb3lFbGVtZW50ID0gZnVuY3Rpb24gX2Rlc3Ryb3lFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5kZXRhY2goKS50cmlnZ2VyKEVWRU5UX0NMT1NFRCkucmVtb3ZlKCk7XG4gICAgfTtcblxuICAgIEFsZXJ0Ll9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKTtcbiAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IEFsZXJ0KHRoaXMpO1xuICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ2Nsb3NlJykge1xuICAgICAgICAgIGRhdGFbY29uZmlnXSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIEFsZXJ0Ll9oYW5kbGVEaXNtaXNzID0gZnVuY3Rpb24gX2hhbmRsZURpc21pc3MoYWxlcnRJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxlcnRJbnN0YW5jZS5jbG9zZSh0aGlzKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhBbGVydCwgbnVsbCwgW3tcbiAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEFsZXJ0O1xuICB9KCk7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGRvY3VtZW50KS5vbihFVkVOVF9DTElDS19EQVRBX0FQSSwgU0VMRUNUT1JfRElTTUlTUywgQWxlcnQuX2hhbmRsZURpc21pc3MobmV3IEFsZXJ0KCkpKTtcbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUVdID0gQWxlcnQuX2pRdWVyeUludGVyZmFjZTtcbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQWxlcnQ7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgIHJldHVybiBBbGVydC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHZhciBOQU1FJDEgPSAnYnV0dG9uJztcbiAgdmFyIFZFUlNJT04kMSA9ICc0LjUuMyc7XG4gIHZhciBEQVRBX0tFWSQxID0gJ2JzLmJ1dHRvbic7XG4gIHZhciBFVkVOVF9LRVkkMSA9IFwiLlwiICsgREFUQV9LRVkkMTtcbiAgdmFyIERBVEFfQVBJX0tFWSQxID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QkMSA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDFdO1xuICB2YXIgQ0xBU1NfTkFNRV9BQ1RJVkUgPSAnYWN0aXZlJztcbiAgdmFyIENMQVNTX05BTUVfQlVUVE9OID0gJ2J0bic7XG4gIHZhciBDTEFTU19OQU1FX0ZPQ1VTID0gJ2ZvY3VzJztcbiAgdmFyIFNFTEVDVE9SX0RBVEFfVE9HR0xFX0NBUlJPVCA9ICdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJztcbiAgdmFyIFNFTEVDVE9SX0RBVEFfVE9HR0xFUyA9ICdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdJztcbiAgdmFyIFNFTEVDVE9SX0RBVEFfVE9HR0xFID0gJ1tkYXRhLXRvZ2dsZT1cImJ1dHRvblwiXSc7XG4gIHZhciBTRUxFQ1RPUl9EQVRBX1RPR0dMRVNfQlVUVE9OUyA9ICdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdIC5idG4nO1xuICB2YXIgU0VMRUNUT1JfSU5QVVQgPSAnaW5wdXQ6bm90KFt0eXBlPVwiaGlkZGVuXCJdKSc7XG4gIHZhciBTRUxFQ1RPUl9BQ1RJVkUgPSAnLmFjdGl2ZSc7XG4gIHZhciBTRUxFQ1RPUl9CVVRUT04gPSAnLmJ0bic7XG4gIHZhciBFVkVOVF9DTElDS19EQVRBX0FQSSQxID0gXCJjbGlja1wiICsgRVZFTlRfS0VZJDEgKyBEQVRBX0FQSV9LRVkkMTtcbiAgdmFyIEVWRU5UX0ZPQ1VTX0JMVVJfREFUQV9BUEkgPSBcImZvY3VzXCIgKyBFVkVOVF9LRVkkMSArIERBVEFfQVBJX0tFWSQxICsgXCIgXCIgKyAoXCJibHVyXCIgKyBFVkVOVF9LRVkkMSArIERBVEFfQVBJX0tFWSQxKTtcbiAgdmFyIEVWRU5UX0xPQURfREFUQV9BUEkgPSBcImxvYWRcIiArIEVWRU5UX0tFWSQxICsgREFUQV9BUElfS0VZJDE7XG5cbiAgdmFyIEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdXR0b24oZWxlbWVudCkge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLnNob3VsZEF2b2lkVHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBCdXR0b24ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgIHZhciB0cmlnZ2VyQ2hhbmdlRXZlbnQgPSB0cnVlO1xuICAgICAgdmFyIGFkZEFyaWFQcmVzc2VkID0gdHJ1ZTtcbiAgICAgIHZhciByb290RWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNFTEVDVE9SX0RBVEFfVE9HR0xFUylbMF07XG5cbiAgICAgIGlmIChyb290RWxlbWVudCkge1xuICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JfSU5QVVQpO1xuXG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCAmJiB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0FDVElWRSkpIHtcbiAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IHJvb3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JfQUNUSVZFKTtcblxuICAgICAgICAgICAgICBpZiAoYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX0FDVElWRSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBpbnB1dC50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSAhdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXZvaWRUcmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShpbnB1dCkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICBhZGRBcmlhUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghKHRoaXMuX2VsZW1lbnQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpIHx8IHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSkge1xuICAgICAgICBpZiAoYWRkQXJpYVByZXNzZWQpIHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgIXRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfQUNUSVZFKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLnRvZ2dsZUNsYXNzKENMQVNTX05BTUVfQUNUSVZFKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSQxKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH07XG5cbiAgICBCdXR0b24uX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnLCBhdm9pZFRyaWdnZXJDaGFuZ2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcyk7XG4gICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSQxKTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IEJ1dHRvbih0aGlzKTtcbiAgICAgICAgICAkZWxlbWVudC5kYXRhKERBVEFfS0VZJDEsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS5zaG91bGRBdm9pZFRyaWdnZXJDaGFuZ2UgPSBhdm9pZFRyaWdnZXJDaGFuZ2U7XG5cbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ3RvZ2dsZScpIHtcbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhCdXR0b24sIG51bGwsIFt7XG4gICAgICBrZXk6IFwiVkVSU0lPTlwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OJDE7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJ1dHRvbjtcbiAgfSgpO1xuXG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudCkub24oRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMSwgU0VMRUNUT1JfREFUQV9UT0dHTEVfQ0FSUk9ULCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgYnV0dG9uID0gZXZlbnQudGFyZ2V0O1xuICAgIHZhciBpbml0aWFsQnV0dG9uID0gYnV0dG9uO1xuXG4gICAgaWYgKCEkX19kZWZhdWx0WydkZWZhdWx0J10oYnV0dG9uKS5oYXNDbGFzcyhDTEFTU19OQU1FX0JVVFRPTikpIHtcbiAgICAgIGJ1dHRvbiA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShidXR0b24pLmNsb3Nlc3QoU0VMRUNUT1JfQlVUVE9OKVswXTtcbiAgICB9XG5cbiAgICBpZiAoIWJ1dHRvbiB8fCBidXR0b24uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpIHx8IGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpbnB1dEJ0biA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SX0lOUFVUKTtcblxuICAgICAgaWYgKGlucHV0QnRuICYmIChpbnB1dEJ0bi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgfHwgaW5wdXRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpbml0aWFsQnV0dG9uLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgYnV0dG9uLnRhZ05hbWUgIT09ICdMQUJFTCcpIHtcbiAgICAgICAgQnV0dG9uLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkX19kZWZhdWx0WydkZWZhdWx0J10oYnV0dG9uKSwgJ3RvZ2dsZScsIGluaXRpYWxCdXR0b24udGFnTmFtZSA9PT0gJ0lOUFVUJyk7XG4gICAgICB9XG4gICAgfVxuICB9KS5vbihFVkVOVF9GT0NVU19CTFVSX0RBVEFfQVBJLCBTRUxFQ1RPUl9EQVRBX1RPR0dMRV9DQVJST1QsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBidXR0b24gPSAkX19kZWZhdWx0WydkZWZhdWx0J10oZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFNFTEVDVE9SX0JVVFRPTilbMF07XG4gICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGJ1dHRvbikudG9nZ2xlQ2xhc3MoQ0xBU1NfTkFNRV9GT0NVUywgL15mb2N1cyhpbik/JC8udGVzdChldmVudC50eXBlKSk7XG4gIH0pO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10od2luZG93KS5vbihFVkVOVF9MT0FEX0RBVEFfQVBJLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJ1dHRvbnMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfREFUQV9UT0dHTEVTX0JVVFRPTlMpKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidXR0b25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgYnV0dG9uID0gYnV0dG9uc1tpXTtcbiAgICAgIHZhciBpbnB1dCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SX0lOUFVUKTtcblxuICAgICAgaWYgKGlucHV0LmNoZWNrZWQgfHwgaW5wdXQuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGJ1dHRvbnMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfREFUQV9UT0dHTEUpKTtcblxuICAgIGZvciAodmFyIF9pID0gMCwgX2xlbiA9IGJ1dHRvbnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIHZhciBfYnV0dG9uID0gYnV0dG9uc1tfaV07XG5cbiAgICAgIGlmIChfYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJykgPT09ICd0cnVlJykge1xuICAgICAgICBfYnV0dG9uLmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9BQ1RJVkUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfQUNUSVZFKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQxXSA9IEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQxXS5Db25zdHJ1Y3RvciA9IEJ1dHRvbjtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQxXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDFdID0gSlFVRVJZX05PX0NPTkZMSUNUJDE7XG4gICAgcmV0dXJuIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHZhciBOQU1FJDIgPSAnY2Fyb3VzZWwnO1xuICB2YXIgVkVSU0lPTiQyID0gJzQuNS4zJztcbiAgdmFyIERBVEFfS0VZJDIgPSAnYnMuY2Fyb3VzZWwnO1xuICB2YXIgRVZFTlRfS0VZJDIgPSBcIi5cIiArIERBVEFfS0VZJDI7XG4gIHZhciBEQVRBX0FQSV9LRVkkMiA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDIgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQyXTtcbiAgdmFyIEFSUk9XX0xFRlRfS0VZQ09ERSA9IDM3O1xuICB2YXIgQVJST1dfUklHSFRfS0VZQ09ERSA9IDM5O1xuICB2YXIgVE9VQ0hFVkVOVF9DT01QQVRfV0FJVCA9IDUwMDtcbiAgdmFyIFNXSVBFX1RIUkVTSE9MRCA9IDQwO1xuICB2YXIgRGVmYXVsdCA9IHtcbiAgICBpbnRlcnZhbDogNTAwMCxcbiAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICBzbGlkZTogZmFsc2UsXG4gICAgcGF1c2U6ICdob3ZlcicsXG4gICAgd3JhcDogdHJ1ZSxcbiAgICB0b3VjaDogdHJ1ZVxuICB9O1xuICB2YXIgRGVmYXVsdFR5cGUgPSB7XG4gICAgaW50ZXJ2YWw6ICcobnVtYmVyfGJvb2xlYW4pJyxcbiAgICBrZXlib2FyZDogJ2Jvb2xlYW4nLFxuICAgIHNsaWRlOiAnKGJvb2xlYW58c3RyaW5nKScsXG4gICAgcGF1c2U6ICcoc3RyaW5nfGJvb2xlYW4pJyxcbiAgICB3cmFwOiAnYm9vbGVhbicsXG4gICAgdG91Y2g6ICdib29sZWFuJ1xuICB9O1xuICB2YXIgRElSRUNUSU9OX05FWFQgPSAnbmV4dCc7XG4gIHZhciBESVJFQ1RJT05fUFJFViA9ICdwcmV2JztcbiAgdmFyIERJUkVDVElPTl9MRUZUID0gJ2xlZnQnO1xuICB2YXIgRElSRUNUSU9OX1JJR0hUID0gJ3JpZ2h0JztcbiAgdmFyIEVWRU5UX1NMSURFID0gXCJzbGlkZVwiICsgRVZFTlRfS0VZJDI7XG4gIHZhciBFVkVOVF9TTElEID0gXCJzbGlkXCIgKyBFVkVOVF9LRVkkMjtcbiAgdmFyIEVWRU5UX0tFWURPV04gPSBcImtleWRvd25cIiArIEVWRU5UX0tFWSQyO1xuICB2YXIgRVZFTlRfTU9VU0VFTlRFUiA9IFwibW91c2VlbnRlclwiICsgRVZFTlRfS0VZJDI7XG4gIHZhciBFVkVOVF9NT1VTRUxFQVZFID0gXCJtb3VzZWxlYXZlXCIgKyBFVkVOVF9LRVkkMjtcbiAgdmFyIEVWRU5UX1RPVUNIU1RBUlQgPSBcInRvdWNoc3RhcnRcIiArIEVWRU5UX0tFWSQyO1xuICB2YXIgRVZFTlRfVE9VQ0hNT1ZFID0gXCJ0b3VjaG1vdmVcIiArIEVWRU5UX0tFWSQyO1xuICB2YXIgRVZFTlRfVE9VQ0hFTkQgPSBcInRvdWNoZW5kXCIgKyBFVkVOVF9LRVkkMjtcbiAgdmFyIEVWRU5UX1BPSU5URVJET1dOID0gXCJwb2ludGVyZG93blwiICsgRVZFTlRfS0VZJDI7XG4gIHZhciBFVkVOVF9QT0lOVEVSVVAgPSBcInBvaW50ZXJ1cFwiICsgRVZFTlRfS0VZJDI7XG4gIHZhciBFVkVOVF9EUkFHX1NUQVJUID0gXCJkcmFnc3RhcnRcIiArIEVWRU5UX0tFWSQyO1xuICB2YXIgRVZFTlRfTE9BRF9EQVRBX0FQSSQxID0gXCJsb2FkXCIgKyBFVkVOVF9LRVkkMiArIERBVEFfQVBJX0tFWSQyO1xuICB2YXIgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMiA9IFwiY2xpY2tcIiArIEVWRU5UX0tFWSQyICsgREFUQV9BUElfS0VZJDI7XG4gIHZhciBDTEFTU19OQU1FX0NBUk9VU0VMID0gJ2Nhcm91c2VsJztcbiAgdmFyIENMQVNTX05BTUVfQUNUSVZFJDEgPSAnYWN0aXZlJztcbiAgdmFyIENMQVNTX05BTUVfU0xJREUgPSAnc2xpZGUnO1xuICB2YXIgQ0xBU1NfTkFNRV9SSUdIVCA9ICdjYXJvdXNlbC1pdGVtLXJpZ2h0JztcbiAgdmFyIENMQVNTX05BTUVfTEVGVCA9ICdjYXJvdXNlbC1pdGVtLWxlZnQnO1xuICB2YXIgQ0xBU1NfTkFNRV9ORVhUID0gJ2Nhcm91c2VsLWl0ZW0tbmV4dCc7XG4gIHZhciBDTEFTU19OQU1FX1BSRVYgPSAnY2Fyb3VzZWwtaXRlbS1wcmV2JztcbiAgdmFyIENMQVNTX05BTUVfUE9JTlRFUl9FVkVOVCA9ICdwb2ludGVyLWV2ZW50JztcbiAgdmFyIFNFTEVDVE9SX0FDVElWRSQxID0gJy5hY3RpdmUnO1xuICB2YXIgU0VMRUNUT1JfQUNUSVZFX0lURU0gPSAnLmFjdGl2ZS5jYXJvdXNlbC1pdGVtJztcbiAgdmFyIFNFTEVDVE9SX0lURU0gPSAnLmNhcm91c2VsLWl0ZW0nO1xuICB2YXIgU0VMRUNUT1JfSVRFTV9JTUcgPSAnLmNhcm91c2VsLWl0ZW0gaW1nJztcbiAgdmFyIFNFTEVDVE9SX05FWFRfUFJFViA9ICcuY2Fyb3VzZWwtaXRlbS1uZXh0LCAuY2Fyb3VzZWwtaXRlbS1wcmV2JztcbiAgdmFyIFNFTEVDVE9SX0lORElDQVRPUlMgPSAnLmNhcm91c2VsLWluZGljYXRvcnMnO1xuICB2YXIgU0VMRUNUT1JfREFUQV9TTElERSA9ICdbZGF0YS1zbGlkZV0sIFtkYXRhLXNsaWRlLXRvXSc7XG4gIHZhciBTRUxFQ1RPUl9EQVRBX1JJREUgPSAnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJztcbiAgdmFyIFBvaW50ZXJUeXBlID0ge1xuICAgIFRPVUNIOiAndG91Y2gnLFxuICAgIFBFTjogJ3BlbidcbiAgfTtcblxuICB2YXIgQ2Fyb3VzZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2Fyb3VzZWwoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICB0aGlzLl9pdGVtcyA9IG51bGw7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMudG91Y2hUaW1lb3V0ID0gbnVsbDtcbiAgICAgIHRoaXMudG91Y2hTdGFydFggPSAwO1xuICAgICAgdGhpcy50b3VjaERlbHRhWCA9IDA7XG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JfSU5ESUNBVE9SUyk7XG4gICAgICB0aGlzLl90b3VjaFN1cHBvcnRlZCA9ICdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuICAgICAgdGhpcy5fcG9pbnRlckV2ZW50ID0gQm9vbGVhbih3aW5kb3cuUG9pbnRlckV2ZW50IHx8IHdpbmRvdy5NU1BvaW50ZXJFdmVudCk7XG5cbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IENhcm91c2VsLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5uZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7XG4gICAgICAgIHRoaXMuX3NsaWRlKERJUkVDVElPTl9ORVhUKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLm5leHRXaGVuVmlzaWJsZSA9IGZ1bmN0aW9uIG5leHRXaGVuVmlzaWJsZSgpIHtcbiAgICAgIHZhciAkZWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KTtcblxuICAgICAgaWYgKCFkb2N1bWVudC5oaWRkZW4gJiYgJGVsZW1lbnQuaXMoJzp2aXNpYmxlJykgJiYgJGVsZW1lbnQuY3NzKCd2aXNpYmlsaXR5JykgIT09ICdoaWRkZW4nKSB7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8ucHJldiA9IGZ1bmN0aW9uIHByZXYoKSB7XG4gICAgICBpZiAoIXRoaXMuX2lzU2xpZGluZykge1xuICAgICAgICB0aGlzLl9zbGlkZShESVJFQ1RJT05fUFJFVik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5wYXVzZSA9IGZ1bmN0aW9uIHBhdXNlKGV2ZW50KSB7XG4gICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2lzUGF1c2VkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihTRUxFQ1RPUl9ORVhUX1BSRVYpKSB7XG4gICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQodGhpcy5fZWxlbWVudCk7XG4gICAgICAgIHRoaXMuY3ljbGUodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY3ljbGUgPSBmdW5jdGlvbiBjeWNsZShldmVudCkge1xuICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5pbnRlcnZhbCAmJiAhdGhpcy5faXNQYXVzZWQpIHtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID8gdGhpcy5uZXh0V2hlblZpc2libGUgOiB0aGlzLm5leHQpLmJpbmQodGhpcyksIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by50byA9IGZ1bmN0aW9uIHRvKGluZGV4KSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SX0FDVElWRV9JVEVNKTtcblxuICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2FjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICBpZiAoaW5kZXggPiB0aGlzLl9pdGVtcy5sZW5ndGggLSAxIHx8IGluZGV4IDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLm9uZShFVkVOVF9TTElELCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnRvKGluZGV4KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGFjdGl2ZUluZGV4ID09PSBpbmRleCkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuY3ljbGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlyZWN0aW9uID0gaW5kZXggPiBhY3RpdmVJbmRleCA/IERJUkVDVElPTl9ORVhUIDogRElSRUNUSU9OX1BSRVY7XG5cbiAgICAgIHRoaXMuX3NsaWRlKGRpcmVjdGlvbiwgdGhpcy5faXRlbXNbaW5kZXhdKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLm9mZihFVkVOVF9LRVkkMik7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSQyKTtcbiAgICAgIHRoaXMuX2l0ZW1zID0gbnVsbDtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2ludGVydmFsID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzUGF1c2VkID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2xpZGluZyA9IG51bGw7XG4gICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2luZGljYXRvcnNFbGVtZW50ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgY29uZmlnID0gX2V4dGVuZHMoe30sIERlZmF1bHQsIGNvbmZpZyk7XG4gICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FJDIsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9oYW5kbGVTd2lwZSA9IGZ1bmN0aW9uIF9oYW5kbGVTd2lwZSgpIHtcbiAgICAgIHZhciBhYnNEZWx0YXggPSBNYXRoLmFicyh0aGlzLnRvdWNoRGVsdGFYKTtcblxuICAgICAgaWYgKGFic0RlbHRheCA8PSBTV0lQRV9USFJFU0hPTEQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGlyZWN0aW9uID0gYWJzRGVsdGF4IC8gdGhpcy50b3VjaERlbHRhWDtcbiAgICAgIHRoaXMudG91Y2hEZWx0YVggPSAwO1xuXG4gICAgICBpZiAoZGlyZWN0aW9uID4gMCkge1xuICAgICAgICB0aGlzLnByZXYoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpcmVjdGlvbiA8IDApIHtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5rZXlib2FyZCkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub24oRVZFTlRfS0VZRE9XTiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5fa2V5ZG93bihldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLnBhdXNlID09PSAnaG92ZXInKSB7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbihFVkVOVF9NT1VTRUVOVEVSLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLnBhdXNlKGV2ZW50KTtcbiAgICAgICAgfSkub24oRVZFTlRfTU9VU0VMRUFWRSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5jeWNsZShldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLnRvdWNoKSB7XG4gICAgICAgIHRoaXMuX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9hZGRUb3VjaEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLl90b3VjaFN1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGV2ZW50KSB7XG4gICAgICAgIGlmIChfdGhpczMuX3BvaW50ZXJFdmVudCAmJiBQb2ludGVyVHlwZVtldmVudC5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlLnRvVXBwZXJDYXNlKCldKSB7XG4gICAgICAgICAgX3RoaXMzLnRvdWNoU3RhcnRYID0gZXZlbnQub3JpZ2luYWxFdmVudC5jbGllbnRYO1xuICAgICAgICB9IGVsc2UgaWYgKCFfdGhpczMuX3BvaW50ZXJFdmVudCkge1xuICAgICAgICAgIF90aGlzMy50b3VjaFN0YXJ0WCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uIG1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAmJiBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIF90aGlzMy50b3VjaERlbHRhWCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXMzLnRvdWNoRGVsdGFYID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFggLSBfdGhpczMudG91Y2hTdGFydFg7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBlbmQgPSBmdW5jdGlvbiBlbmQoZXZlbnQpIHtcbiAgICAgICAgaWYgKF90aGlzMy5fcG9pbnRlckV2ZW50ICYmIFBvaW50ZXJUeXBlW2V2ZW50Lm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUudG9VcHBlckNhc2UoKV0pIHtcbiAgICAgICAgICBfdGhpczMudG91Y2hEZWx0YVggPSBldmVudC5vcmlnaW5hbEV2ZW50LmNsaWVudFggLSBfdGhpczMudG91Y2hTdGFydFg7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczMuX2hhbmRsZVN3aXBlKCk7XG5cbiAgICAgICAgaWYgKF90aGlzMy5fY29uZmlnLnBhdXNlID09PSAnaG92ZXInKSB7XG4gICAgICAgICAgX3RoaXMzLnBhdXNlKCk7XG5cbiAgICAgICAgICBpZiAoX3RoaXMzLnRvdWNoVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzMy50b3VjaFRpbWVvdXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzMy50b3VjaFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5jeWNsZShldmVudCk7XG4gICAgICAgICAgfSwgVE9VQ0hFVkVOVF9DT01QQVRfV0FJVCArIF90aGlzMy5fY29uZmlnLmludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9JVEVNX0lNRykpLm9uKEVWRU5UX0RSQUdfU1RBUlQsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuX3BvaW50ZXJFdmVudCkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub24oRVZFTlRfUE9JTlRFUkRPV04sIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHJldHVybiBzdGFydChldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub24oRVZFTlRfUE9JTlRFUlVQLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gZW5kKGV2ZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfUE9JTlRFUl9FVkVOVCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub24oRVZFTlRfVE9VQ0hTVEFSVCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXJ0KGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbihFVkVOVF9UT1VDSE1PVkUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHJldHVybiBtb3ZlKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbihFVkVOVF9UT1VDSEVORCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGVuZChldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX2tleWRvd24gPSBmdW5jdGlvbiBfa2V5ZG93bihldmVudCkge1xuICAgICAgaWYgKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChldmVudC53aGljaCkge1xuICAgICAgICBjYXNlIEFSUk9XX0xFRlRfS0VZQ09ERTpcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMucHJldigpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQVJST1dfUklHSFRfS0VZQ09ERTpcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIF9nZXRJdGVtSW5kZXgoZWxlbWVudCkge1xuICAgICAgdGhpcy5faXRlbXMgPSBlbGVtZW50ICYmIGVsZW1lbnQucGFyZW50Tm9kZSA/IFtdLnNsaWNlLmNhbGwoZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfSVRFTSkpIDogW107XG4gICAgICByZXR1cm4gdGhpcy5faXRlbXMuaW5kZXhPZihlbGVtZW50KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRJdGVtQnlEaXJlY3Rpb24gPSBmdW5jdGlvbiBfZ2V0SXRlbUJ5RGlyZWN0aW9uKGRpcmVjdGlvbiwgYWN0aXZlRWxlbWVudCkge1xuICAgICAgdmFyIGlzTmV4dERpcmVjdGlvbiA9IGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OX05FWFQ7XG4gICAgICB2YXIgaXNQcmV2RGlyZWN0aW9uID0gZGlyZWN0aW9uID09PSBESVJFQ1RJT05fUFJFVjtcblxuICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICB2YXIgbGFzdEl0ZW1JbmRleCA9IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICB2YXIgaXNHb2luZ1RvV3JhcCA9IGlzUHJldkRpcmVjdGlvbiAmJiBhY3RpdmVJbmRleCA9PT0gMCB8fCBpc05leHREaXJlY3Rpb24gJiYgYWN0aXZlSW5kZXggPT09IGxhc3RJdGVtSW5kZXg7XG5cbiAgICAgIGlmIChpc0dvaW5nVG9XcmFwICYmICF0aGlzLl9jb25maWcud3JhcCkge1xuICAgICAgICByZXR1cm4gYWN0aXZlRWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgdmFyIGRlbHRhID0gZGlyZWN0aW9uID09PSBESVJFQ1RJT05fUFJFViA/IC0xIDogMTtcbiAgICAgIHZhciBpdGVtSW5kZXggPSAoYWN0aXZlSW5kZXggKyBkZWx0YSkgJSB0aGlzLl9pdGVtcy5sZW5ndGg7XG4gICAgICByZXR1cm4gaXRlbUluZGV4ID09PSAtMSA/IHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aCAtIDFdIDogdGhpcy5faXRlbXNbaXRlbUluZGV4XTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl90cmlnZ2VyU2xpZGVFdmVudCA9IGZ1bmN0aW9uIF90cmlnZ2VyU2xpZGVFdmVudChyZWxhdGVkVGFyZ2V0LCBldmVudERpcmVjdGlvbk5hbWUpIHtcbiAgICAgIHZhciB0YXJnZXRJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChyZWxhdGVkVGFyZ2V0KTtcblxuICAgICAgdmFyIGZyb21JbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleCh0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JfQUNUSVZFX0lURU0pKTtcblxuICAgICAgdmFyIHNsaWRlRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfU0xJREUsIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCxcbiAgICAgICAgZGlyZWN0aW9uOiBldmVudERpcmVjdGlvbk5hbWUsXG4gICAgICAgIGZyb206IGZyb21JbmRleCxcbiAgICAgICAgdG86IHRhcmdldEluZGV4XG4gICAgICB9KTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRlRXZlbnQpO1xuICAgICAgcmV0dXJuIHNsaWRlRXZlbnQ7XG4gICAgfTtcblxuICAgIF9wcm90by5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudCA9IGZ1bmN0aW9uIF9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgIGlmICh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkge1xuICAgICAgICB2YXIgaW5kaWNhdG9ycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9BQ1RJVkUkMSkpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oaW5kaWNhdG9ycykucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRV9BQ1RJVkUkMSk7XG5cbiAgICAgICAgdmFyIG5leHRJbmRpY2F0b3IgPSB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudC5jaGlsZHJlblt0aGlzLl9nZXRJdGVtSW5kZXgoZWxlbWVudCldO1xuXG4gICAgICAgIGlmIChuZXh0SW5kaWNhdG9yKSB7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKG5leHRJbmRpY2F0b3IpLmFkZENsYXNzKENMQVNTX05BTUVfQUNUSVZFJDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fc2xpZGUgPSBmdW5jdGlvbiBfc2xpZGUoZGlyZWN0aW9uLCBlbGVtZW50KSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1JfQUNUSVZFX0lURU0pO1xuXG4gICAgICB2YXIgYWN0aXZlRWxlbWVudEluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KGFjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICB2YXIgbmV4dEVsZW1lbnQgPSBlbGVtZW50IHx8IGFjdGl2ZUVsZW1lbnQgJiYgdGhpcy5fZ2V0SXRlbUJ5RGlyZWN0aW9uKGRpcmVjdGlvbiwgYWN0aXZlRWxlbWVudCk7XG5cbiAgICAgIHZhciBuZXh0RWxlbWVudEluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KG5leHRFbGVtZW50KTtcblxuICAgICAgdmFyIGlzQ3ljbGluZyA9IEJvb2xlYW4odGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdmFyIGRpcmVjdGlvbmFsQ2xhc3NOYW1lO1xuICAgICAgdmFyIG9yZGVyQ2xhc3NOYW1lO1xuICAgICAgdmFyIGV2ZW50RGlyZWN0aW9uTmFtZTtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OX05FWFQpIHtcbiAgICAgICAgZGlyZWN0aW9uYWxDbGFzc05hbWUgPSBDTEFTU19OQU1FX0xFRlQ7XG4gICAgICAgIG9yZGVyQ2xhc3NOYW1lID0gQ0xBU1NfTkFNRV9ORVhUO1xuICAgICAgICBldmVudERpcmVjdGlvbk5hbWUgPSBESVJFQ1RJT05fTEVGVDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpcmVjdGlvbmFsQ2xhc3NOYW1lID0gQ0xBU1NfTkFNRV9SSUdIVDtcbiAgICAgICAgb3JkZXJDbGFzc05hbWUgPSBDTEFTU19OQU1FX1BSRVY7XG4gICAgICAgIGV2ZW50RGlyZWN0aW9uTmFtZSA9IERJUkVDVElPTl9SSUdIVDtcbiAgICAgIH1cblxuICAgICAgaWYgKG5leHRFbGVtZW50ICYmICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShuZXh0RWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9BQ1RJVkUkMSkpIHtcbiAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHNsaWRlRXZlbnQgPSB0aGlzLl90cmlnZ2VyU2xpZGVFdmVudChuZXh0RWxlbWVudCwgZXZlbnREaXJlY3Rpb25OYW1lKTtcblxuICAgICAgaWYgKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWFjdGl2ZUVsZW1lbnQgfHwgIW5leHRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNTbGlkaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKGlzQ3ljbGluZykge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQobmV4dEVsZW1lbnQpO1xuXG4gICAgICB2YXIgc2xpZEV2ZW50ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLkV2ZW50KEVWRU5UX1NMSUQsIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogbmV4dEVsZW1lbnQsXG4gICAgICAgIGRpcmVjdGlvbjogZXZlbnREaXJlY3Rpb25OYW1lLFxuICAgICAgICBmcm9tOiBhY3RpdmVFbGVtZW50SW5kZXgsXG4gICAgICAgIHRvOiBuZXh0RWxlbWVudEluZGV4XG4gICAgICB9KTtcblxuICAgICAgaWYgKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDTEFTU19OQU1FX1NMSURFKSkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10obmV4dEVsZW1lbnQpLmFkZENsYXNzKG9yZGVyQ2xhc3NOYW1lKTtcbiAgICAgICAgVXRpbC5yZWZsb3cobmV4dEVsZW1lbnQpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oYWN0aXZlRWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10obmV4dEVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTtcbiAgICAgICAgdmFyIG5leHRFbGVtZW50SW50ZXJ2YWwgPSBwYXJzZUludChuZXh0RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW50ZXJ2YWwnKSwgMTApO1xuXG4gICAgICAgIGlmIChuZXh0RWxlbWVudEludGVydmFsKSB7XG4gICAgICAgICAgdGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbCA9IHRoaXMuX2NvbmZpZy5kZWZhdWx0SW50ZXJ2YWwgfHwgdGhpcy5fY29uZmlnLmludGVydmFsO1xuICAgICAgICAgIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCA9IG5leHRFbGVtZW50SW50ZXJ2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fY29uZmlnLmludGVydmFsID0gdGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbCB8fCB0aGlzLl9jb25maWcuaW50ZXJ2YWw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChhY3RpdmVFbGVtZW50KTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGFjdGl2ZUVsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKG5leHRFbGVtZW50KS5yZW1vdmVDbGFzcyhkaXJlY3Rpb25hbENsYXNzTmFtZSArIFwiIFwiICsgb3JkZXJDbGFzc05hbWUpLmFkZENsYXNzKENMQVNTX05BTUVfQUNUSVZFJDEpO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX0FDVElWRSQxICsgXCIgXCIgKyBvcmRlckNsYXNzTmFtZSArIFwiIFwiICsgZGlyZWN0aW9uYWxDbGFzc05hbWUpO1xuICAgICAgICAgIF90aGlzNC5faXNTbGlkaW5nID0gZmFsc2U7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJF9fZGVmYXVsdFsnZGVmYXVsdCddKF90aGlzNC5fZWxlbWVudCkudHJpZ2dlcihzbGlkRXZlbnQpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfQUNUSVZFJDEpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10obmV4dEVsZW1lbnQpLmFkZENsYXNzKENMQVNTX05BTUVfQUNUSVZFJDEpO1xuICAgICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQ3ljbGluZykge1xuICAgICAgICB0aGlzLmN5Y2xlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXRhID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLmRhdGEoREFUQV9LRVkkMik7XG5cbiAgICAgICAgdmFyIF9jb25maWcgPSBfZXh0ZW5kcyh7fSwgRGVmYXVsdCwgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLmRhdGEoKSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgX2NvbmZpZyA9IF9leHRlbmRzKHt9LCBfY29uZmlnLCBjb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGlvbiA9IHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnID8gY29uZmlnIDogX2NvbmZpZy5zbGlkZTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IENhcm91c2VsKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKS5kYXRhKERBVEFfS0VZJDIsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgZGF0YS50byhjb25maWcpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2FjdGlvbl0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGFjdGlvbiArIFwiXFxcIlwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2FjdGlvbl0oKTtcbiAgICAgICAgfSBlbHNlIGlmIChfY29uZmlnLmludGVydmFsICYmIF9jb25maWcucmlkZSkge1xuICAgICAgICAgIGRhdGEucGF1c2UoKTtcbiAgICAgICAgICBkYXRhLmN5Y2xlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDYXJvdXNlbC5fZGF0YUFwaUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIF9kYXRhQXBpQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG5cbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGFyZ2V0ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHNlbGVjdG9yKVswXTtcblxuICAgICAgaWYgKCF0YXJnZXQgfHwgISRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0YXJnZXQpLmhhc0NsYXNzKENMQVNTX05BTUVfQ0FST1VTRUwpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbmZpZyA9IF9leHRlbmRzKHt9LCAkX19kZWZhdWx0WydkZWZhdWx0J10odGFyZ2V0KS5kYXRhKCksICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKS5kYXRhKCkpO1xuXG4gICAgICB2YXIgc2xpZGVJbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNsaWRlLXRvJyk7XG5cbiAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgIGNvbmZpZy5pbnRlcnZhbCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRhcmdldCksIGNvbmZpZyk7XG5cbiAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0YXJnZXQpLmRhdGEoREFUQV9LRVkkMikudG8oc2xpZGVJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhDYXJvdXNlbCwgbnVsbCwgW3tcbiAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT04kMjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDYXJvdXNlbDtcbiAgfSgpO1xuXG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudCkub24oRVZFTlRfQ0xJQ0tfREFUQV9BUEkkMiwgU0VMRUNUT1JfREFUQV9TTElERSwgQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIpO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10od2luZG93KS5vbihFVkVOVF9MT0FEX0RBVEFfQVBJJDEsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2Fyb3VzZWxzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX0RBVEFfUklERSkpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhcm91c2Vscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyICRjYXJvdXNlbCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShjYXJvdXNlbHNbaV0pO1xuXG4gICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKTtcbiAgICB9XG4gIH0pO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQyXSA9IENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2U7XG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDJdLkNvbnN0cnVjdG9yID0gQ2Fyb3VzZWw7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkMl0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQyXSA9IEpRVUVSWV9OT19DT05GTElDVCQyO1xuICAgIHJldHVybiBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHZhciBOQU1FJDMgPSAnY29sbGFwc2UnO1xuICB2YXIgVkVSU0lPTiQzID0gJzQuNS4zJztcbiAgdmFyIERBVEFfS0VZJDMgPSAnYnMuY29sbGFwc2UnO1xuICB2YXIgRVZFTlRfS0VZJDMgPSBcIi5cIiArIERBVEFfS0VZJDM7XG4gIHZhciBEQVRBX0FQSV9LRVkkMyA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDMgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQzXTtcbiAgdmFyIERlZmF1bHQkMSA9IHtcbiAgICB0b2dnbGU6IHRydWUsXG4gICAgcGFyZW50OiAnJ1xuICB9O1xuICB2YXIgRGVmYXVsdFR5cGUkMSA9IHtcbiAgICB0b2dnbGU6ICdib29sZWFuJyxcbiAgICBwYXJlbnQ6ICcoc3RyaW5nfGVsZW1lbnQpJ1xuICB9O1xuICB2YXIgRVZFTlRfU0hPVyA9IFwic2hvd1wiICsgRVZFTlRfS0VZJDM7XG4gIHZhciBFVkVOVF9TSE9XTiA9IFwic2hvd25cIiArIEVWRU5UX0tFWSQzO1xuICB2YXIgRVZFTlRfSElERSA9IFwiaGlkZVwiICsgRVZFTlRfS0VZJDM7XG4gIHZhciBFVkVOVF9ISURERU4gPSBcImhpZGRlblwiICsgRVZFTlRfS0VZJDM7XG4gIHZhciBFVkVOVF9DTElDS19EQVRBX0FQSSQzID0gXCJjbGlja1wiICsgRVZFTlRfS0VZJDMgKyBEQVRBX0FQSV9LRVkkMztcbiAgdmFyIENMQVNTX05BTUVfU0hPVyQxID0gJ3Nob3cnO1xuICB2YXIgQ0xBU1NfTkFNRV9DT0xMQVBTRSA9ICdjb2xsYXBzZSc7XG4gIHZhciBDTEFTU19OQU1FX0NPTExBUFNJTkcgPSAnY29sbGFwc2luZyc7XG4gIHZhciBDTEFTU19OQU1FX0NPTExBUFNFRCA9ICdjb2xsYXBzZWQnO1xuICB2YXIgRElNRU5TSU9OX1dJRFRIID0gJ3dpZHRoJztcbiAgdmFyIERJTUVOU0lPTl9IRUlHSFQgPSAnaGVpZ2h0JztcbiAgdmFyIFNFTEVDVE9SX0FDVElWRVMgPSAnLnNob3csIC5jb2xsYXBzaW5nJztcbiAgdmFyIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDEgPSAnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nO1xuXG4gIHZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xsYXBzZShlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRvZ2dsZT1cXFwiY29sbGFwc2VcXFwiXVtocmVmPVxcXCIjXCIgKyBlbGVtZW50LmlkICsgXCJcXFwiXSxcIiArIChcIltkYXRhLXRvZ2dsZT1cXFwiY29sbGFwc2VcXFwiXVtkYXRhLXRhcmdldD1cXFwiI1wiICsgZWxlbWVudC5pZCArIFwiXFxcIl1cIikpKTtcbiAgICAgIHZhciB0b2dnbGVMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX0RBVEFfVE9HR0xFJDEpKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRvZ2dsZUxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGVsZW0gPSB0b2dnbGVMaXN0W2ldO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbSk7XG4gICAgICAgIHZhciBmaWx0ZXJFbGVtZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuZmlsdGVyKGZ1bmN0aW9uIChmb3VuZEVsZW0pIHtcbiAgICAgICAgICByZXR1cm4gZm91bmRFbGVtID09PSBlbGVtZW50O1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZWN0b3IgIT09IG51bGwgJiYgZmlsdGVyRWxlbWVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcblxuICAgICAgICAgIHRoaXMuX3RyaWdnZXJBcnJheS5wdXNoKGVsZW0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQgPyB0aGlzLl9nZXRQYXJlbnQoKSA6IG51bGw7XG5cbiAgICAgIGlmICghdGhpcy5fY29uZmlnLnBhcmVudCkge1xuICAgICAgICB0aGlzLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy5fZWxlbWVudCwgdGhpcy5fdHJpZ2dlckFycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b2dnbGUpIHtcbiAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gQ29sbGFwc2UucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgIGlmICgkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDEpKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENMQVNTX05BTUVfU0hPVyQxKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBhY3RpdmVzO1xuICAgICAgdmFyIGFjdGl2ZXNEYXRhO1xuXG4gICAgICBpZiAodGhpcy5fcGFyZW50KSB7XG4gICAgICAgIGFjdGl2ZXMgPSBbXS5zbGljZS5jYWxsKHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX0FDVElWRVMpKS5maWx0ZXIoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLl9jb25maWcucGFyZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudCcpID09PSBfdGhpcy5fY29uZmlnLnBhcmVudDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfTkFNRV9DT0xMQVBTRSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChhY3RpdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGFjdGl2ZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhY3RpdmVzKSB7XG4gICAgICAgIGFjdGl2ZXNEYXRhID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKGFjdGl2ZXMpLm5vdCh0aGlzLl9zZWxlY3RvcikuZGF0YShEQVRBX0tFWSQzKTtcblxuICAgICAgICBpZiAoYWN0aXZlc0RhdGEgJiYgYWN0aXZlc0RhdGEuX2lzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnRFdmVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9TSE9XKTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpO1xuXG4gICAgICBpZiAoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChhY3RpdmVzKSB7XG4gICAgICAgIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkX19kZWZhdWx0WydkZWZhdWx0J10oYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKSwgJ2hpZGUnKTtcblxuICAgICAgICBpZiAoIWFjdGl2ZXNEYXRhKSB7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGFjdGl2ZXMpLmRhdGEoREFUQV9LRVkkMywgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuX2dldERpbWVuc2lvbigpO1xuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRV9DT0xMQVBTRSkuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IDA7XG5cbiAgICAgIGlmICh0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl90cmlnZ2VyQXJyYXkpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfQ09MTEFQU0VEKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbmluZyh0cnVlKTtcblxuICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRV9DT0xMQVBTSU5HKS5hZGRDbGFzcyhDTEFTU19OQU1FX0NPTExBUFNFICsgXCIgXCIgKyBDTEFTU19OQU1FX1NIT1ckMSk7XG4gICAgICAgIF90aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcblxuICAgICAgICBfdGhpcy5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTtcblxuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRVZFTlRfU0hPV04pO1xuICAgICAgfTtcblxuICAgICAgdmFyIGNhcGl0YWxpemVkRGltZW5zaW9uID0gZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoMSk7XG4gICAgICB2YXIgc2Nyb2xsU2l6ZSA9IFwic2Nyb2xsXCIgKyBjYXBpdGFsaXplZERpbWVuc2lvbjtcbiAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV0gKyBcInB4XCI7XG4gICAgfTtcblxuICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICEkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0RXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElERSk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkudHJpZ2dlcihzdGFydEV2ZW50KTtcblxuICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbZGltZW5zaW9uXSArIFwicHhcIjtcbiAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmFkZENsYXNzKENMQVNTX05BTUVfQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ0xBU1NfTkFNRV9DT0xMQVBTRSArIFwiIFwiICsgQ0xBU1NfTkFNRV9TSE9XJDEpO1xuICAgICAgdmFyIHRyaWdnZXJBcnJheUxlbmd0aCA9IHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGg7XG5cbiAgICAgIGlmICh0cmlnZ2VyQXJyYXlMZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJpZ2dlckFycmF5TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgdHJpZ2dlciA9IHRoaXMuX3RyaWdnZXJBcnJheVtpXTtcbiAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodHJpZ2dlcik7XG5cbiAgICAgICAgICBpZiAoc2VsZWN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciAkZWxlbSA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG5cbiAgICAgICAgICAgIGlmICghJGVsZW0uaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDEpKSB7XG4gICAgICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0cmlnZ2VyKS5hZGRDbGFzcyhDTEFTU19OQU1FX0NPTExBUFNFRCkuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXG4gICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgX3RoaXMyLnNldFRyYW5zaXRpb25pbmcoZmFsc2UpO1xuXG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpczIuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfQ09MTEFQU0lORykuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9DT0xMQVBTRSkudHJpZ2dlcihFVkVOVF9ISURERU4pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gJyc7XG4gICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgfTtcblxuICAgIF9wcm90by5zZXRUcmFuc2l0aW9uaW5nID0gZnVuY3Rpb24gc2V0VHJhbnNpdGlvbmluZyhpc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGlzVHJhbnNpdGlvbmluZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkkMyk7XG4gICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fdHJpZ2dlckFycmF5ID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IG51bGw7XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IF9leHRlbmRzKHt9LCBEZWZhdWx0JDEsIGNvbmZpZyk7XG4gICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTtcbiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUkMywgY29uZmlnLCBEZWZhdWx0VHlwZSQxKTtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0RGltZW5zaW9uID0gZnVuY3Rpb24gX2dldERpbWVuc2lvbigpIHtcbiAgICAgIHZhciBoYXNXaWR0aCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhESU1FTlNJT05fV0lEVEgpO1xuICAgICAgcmV0dXJuIGhhc1dpZHRoID8gRElNRU5TSU9OX1dJRFRIIDogRElNRU5TSU9OX0hFSUdIVDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRQYXJlbnQgPSBmdW5jdGlvbiBfZ2V0UGFyZW50KCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBwYXJlbnQ7XG5cbiAgICAgIGlmIChVdGlsLmlzRWxlbWVudCh0aGlzLl9jb25maWcucGFyZW50KSkge1xuICAgICAgICBwYXJlbnQgPSB0aGlzLl9jb25maWcucGFyZW50O1xuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLnBhcmVudC5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcGFyZW50ID0gdGhpcy5fY29uZmlnLnBhcmVudFswXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucGFyZW50KTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGVjdG9yID0gXCJbZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIl1bZGF0YS1wYXJlbnQ9XFxcIlwiICsgdGhpcy5fY29uZmlnLnBhcmVudCArIFwiXFxcIl1cIjtcbiAgICAgIHZhciBjaGlsZHJlbiA9IFtdLnNsaWNlLmNhbGwocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShjaGlsZHJlbikuZWFjaChmdW5jdGlvbiAoaSwgZWxlbWVudCkge1xuICAgICAgICBfdGhpczMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCksIFtlbGVtZW50XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfTtcblxuICAgIF9wcm90by5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzID0gZnVuY3Rpb24gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlbGVtZW50LCB0cmlnZ2VyQXJyYXkpIHtcbiAgICAgIHZhciBpc09wZW4gPSAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDEpO1xuXG4gICAgICBpZiAodHJpZ2dlckFycmF5Lmxlbmd0aCkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odHJpZ2dlckFycmF5KS50b2dnbGVDbGFzcyhDTEFTU19OQU1FX0NPTExBUFNFRCwgIWlzT3BlbikuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3Blbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRUYXJnZXRGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCk7XG4gICAgICByZXR1cm4gc2VsZWN0b3IgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSA6IG51bGw7XG4gICAgfTtcblxuICAgIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKTtcbiAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZJDMpO1xuXG4gICAgICAgIHZhciBfY29uZmlnID0gX2V4dGVuZHMoe30sIERlZmF1bHQkMSwgJGVsZW1lbnQuZGF0YSgpLCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcgPyBjb25maWcgOiB7fSk7XG5cbiAgICAgICAgaWYgKCFkYXRhICYmIF9jb25maWcudG9nZ2xlICYmIHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnICYmIC9zaG93fGhpZGUvLnRlc3QoY29uZmlnKSkge1xuICAgICAgICAgIF9jb25maWcudG9nZ2xlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IENvbGxhcHNlKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVkkMywgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyBtZXRob2QgbmFtZWQgXFxcIlwiICsgY29uZmlnICsgXCJcXFwiXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNlLCBudWxsLCBbe1xuICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTiQzO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEZWZhdWx0XCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHQkMTtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29sbGFwc2U7XG4gIH0oKTtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10oZG9jdW1lbnQpLm9uKEVWRU5UX0NMSUNLX0RBVEFfQVBJJDMsIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDEsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnRhZ05hbWUgPT09ICdBJykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICB2YXIgJHRyaWdnZXIgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcyk7XG4gICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpO1xuICAgIHZhciBzZWxlY3RvcnMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oc2VsZWN0b3JzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGFyZ2V0ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpO1xuICAgICAgdmFyIGRhdGEgPSAkdGFyZ2V0LmRhdGEoREFUQV9LRVkkMyk7XG4gICAgICB2YXIgY29uZmlnID0gZGF0YSA/ICd0b2dnbGUnIDogJHRyaWdnZXIuZGF0YSgpO1xuXG4gICAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHRhcmdldCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDNdID0gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTtcbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkM10uQ29uc3RydWN0b3IgPSBDb2xsYXBzZTtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQzXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDNdID0gSlFVRVJZX05PX0NPTkZMSUNUJDM7XG4gICAgcmV0dXJuIENvbGxhcHNlLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgdmFyIE5BTUUkNCA9ICdkcm9wZG93bic7XG4gIHZhciBWRVJTSU9OJDQgPSAnNC41LjMnO1xuICB2YXIgREFUQV9LRVkkNCA9ICdicy5kcm9wZG93bic7XG4gIHZhciBFVkVOVF9LRVkkNCA9IFwiLlwiICsgREFUQV9LRVkkNDtcbiAgdmFyIERBVEFfQVBJX0tFWSQ0ID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QkNCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDRdO1xuICB2YXIgRVNDQVBFX0tFWUNPREUgPSAyNztcbiAgdmFyIFNQQUNFX0tFWUNPREUgPSAzMjtcbiAgdmFyIFRBQl9LRVlDT0RFID0gOTtcbiAgdmFyIEFSUk9XX1VQX0tFWUNPREUgPSAzODtcbiAgdmFyIEFSUk9XX0RPV05fS0VZQ09ERSA9IDQwO1xuICB2YXIgUklHSFRfTU9VU0VfQlVUVE9OX1dISUNIID0gMztcbiAgdmFyIFJFR0VYUF9LRVlET1dOID0gbmV3IFJlZ0V4cChBUlJPV19VUF9LRVlDT0RFICsgXCJ8XCIgKyBBUlJPV19ET1dOX0tFWUNPREUgKyBcInxcIiArIEVTQ0FQRV9LRVlDT0RFKTtcbiAgdmFyIEVWRU5UX0hJREUkMSA9IFwiaGlkZVwiICsgRVZFTlRfS0VZJDQ7XG4gIHZhciBFVkVOVF9ISURERU4kMSA9IFwiaGlkZGVuXCIgKyBFVkVOVF9LRVkkNDtcbiAgdmFyIEVWRU5UX1NIT1ckMSA9IFwic2hvd1wiICsgRVZFTlRfS0VZJDQ7XG4gIHZhciBFVkVOVF9TSE9XTiQxID0gXCJzaG93blwiICsgRVZFTlRfS0VZJDQ7XG4gIHZhciBFVkVOVF9DTElDSyA9IFwiY2xpY2tcIiArIEVWRU5UX0tFWSQ0O1xuICB2YXIgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNCA9IFwiY2xpY2tcIiArIEVWRU5UX0tFWSQ0ICsgREFUQV9BUElfS0VZJDQ7XG4gIHZhciBFVkVOVF9LRVlET1dOX0RBVEFfQVBJID0gXCJrZXlkb3duXCIgKyBFVkVOVF9LRVkkNCArIERBVEFfQVBJX0tFWSQ0O1xuICB2YXIgRVZFTlRfS0VZVVBfREFUQV9BUEkgPSBcImtleXVwXCIgKyBFVkVOVF9LRVkkNCArIERBVEFfQVBJX0tFWSQ0O1xuICB2YXIgQ0xBU1NfTkFNRV9ESVNBQkxFRCA9ICdkaXNhYmxlZCc7XG4gIHZhciBDTEFTU19OQU1FX1NIT1ckMiA9ICdzaG93JztcbiAgdmFyIENMQVNTX05BTUVfRFJPUFVQID0gJ2Ryb3B1cCc7XG4gIHZhciBDTEFTU19OQU1FX0RST1BSSUdIVCA9ICdkcm9wcmlnaHQnO1xuICB2YXIgQ0xBU1NfTkFNRV9EUk9QTEVGVCA9ICdkcm9wbGVmdCc7XG4gIHZhciBDTEFTU19OQU1FX01FTlVSSUdIVCA9ICdkcm9wZG93bi1tZW51LXJpZ2h0JztcbiAgdmFyIENMQVNTX05BTUVfUE9TSVRJT05fU1RBVElDID0gJ3Bvc2l0aW9uLXN0YXRpYyc7XG4gIHZhciBTRUxFQ1RPUl9EQVRBX1RPR0dMRSQyID0gJ1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJztcbiAgdmFyIFNFTEVDVE9SX0ZPUk1fQ0hJTEQgPSAnLmRyb3Bkb3duIGZvcm0nO1xuICB2YXIgU0VMRUNUT1JfTUVOVSA9ICcuZHJvcGRvd24tbWVudSc7XG4gIHZhciBTRUxFQ1RPUl9OQVZCQVJfTkFWID0gJy5uYXZiYXItbmF2JztcbiAgdmFyIFNFTEVDVE9SX1ZJU0lCTEVfSVRFTVMgPSAnLmRyb3Bkb3duLW1lbnUgLmRyb3Bkb3duLWl0ZW06bm90KC5kaXNhYmxlZCk6bm90KDpkaXNhYmxlZCknO1xuICB2YXIgUExBQ0VNRU5UX1RPUCA9ICd0b3Atc3RhcnQnO1xuICB2YXIgUExBQ0VNRU5UX1RPUEVORCA9ICd0b3AtZW5kJztcbiAgdmFyIFBMQUNFTUVOVF9CT1RUT00gPSAnYm90dG9tLXN0YXJ0JztcbiAgdmFyIFBMQUNFTUVOVF9CT1RUT01FTkQgPSAnYm90dG9tLWVuZCc7XG4gIHZhciBQTEFDRU1FTlRfUklHSFQgPSAncmlnaHQtc3RhcnQnO1xuICB2YXIgUExBQ0VNRU5UX0xFRlQgPSAnbGVmdC1zdGFydCc7XG4gIHZhciBEZWZhdWx0JDIgPSB7XG4gICAgb2Zmc2V0OiAwLFxuICAgIGZsaXA6IHRydWUsXG4gICAgYm91bmRhcnk6ICdzY3JvbGxQYXJlbnQnLFxuICAgIHJlZmVyZW5jZTogJ3RvZ2dsZScsXG4gICAgZGlzcGxheTogJ2R5bmFtaWMnLFxuICAgIHBvcHBlckNvbmZpZzogbnVsbFxuICB9O1xuICB2YXIgRGVmYXVsdFR5cGUkMiA9IHtcbiAgICBvZmZzZXQ6ICcobnVtYmVyfHN0cmluZ3xmdW5jdGlvbiknLFxuICAgIGZsaXA6ICdib29sZWFuJyxcbiAgICBib3VuZGFyeTogJyhzdHJpbmd8ZWxlbWVudCknLFxuICAgIHJlZmVyZW5jZTogJyhzdHJpbmd8ZWxlbWVudCknLFxuICAgIGRpc3BsYXk6ICdzdHJpbmcnLFxuICAgIHBvcHBlckNvbmZpZzogJyhudWxsfG9iamVjdCknXG4gIH07XG5cbiAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERyb3Bkb3duKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9wb3BwZXIgPSBudWxsO1xuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLl9tZW51ID0gdGhpcy5fZ2V0TWVudUVsZW1lbnQoKTtcbiAgICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKCk7XG5cbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IERyb3Bkb3duLnByb3RvdHlwZTtcblxuICAgIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICBpZiAodGhpcy5fZWxlbWVudC5kaXNhYmxlZCB8fCAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9ESVNBQkxFRCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXNBY3RpdmUgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fbWVudSkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDIpO1xuXG4gICAgICBEcm9wZG93bi5fY2xlYXJNZW51cygpO1xuXG4gICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNob3codHJ1ZSk7XG4gICAgfTtcblxuICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdyh1c2VQb3BwZXIpIHtcbiAgICAgIGlmICh1c2VQb3BwZXIgPT09IHZvaWQgMCkge1xuICAgICAgICB1c2VQb3BwZXIgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2VsZW1lbnQuZGlzYWJsZWQgfHwgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENMQVNTX05BTUVfRElTQUJMRUQpIHx8ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9tZW51KS5oYXNDbGFzcyhDTEFTU19OQU1FX1NIT1ckMikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogdGhpcy5fZWxlbWVudFxuICAgICAgfTtcbiAgICAgIHZhciBzaG93RXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfU0hPVyQxLCByZWxhdGVkVGFyZ2V0KTtcblxuICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtcblxuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHBhcmVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXG4gICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9pbk5hdmJhciAmJiB1c2VQb3BwZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBQb3BwZXJfX2RlZmF1bHRbJ2RlZmF1bHQnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb290c3RyYXBcXCdzIGRyb3Bkb3ducyByZXF1aXJlIFBvcHBlci5qcyAoaHR0cHM6Ly9wb3BwZXIuanMub3JnLyknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWZlcmVuY2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudDtcblxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLnJlZmVyZW5jZSA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgICByZWZlcmVuY2VFbGVtZW50ID0gcGFyZW50O1xuICAgICAgICB9IGVsc2UgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpKSB7XG4gICAgICAgICAgcmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuX2NvbmZpZy5yZWZlcmVuY2U7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UuanF1ZXJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuX2NvbmZpZy5yZWZlcmVuY2VbMF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5ib3VuZGFyeSAhPT0gJ3Njcm9sbFBhcmVudCcpIHtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ocGFyZW50KS5hZGRDbGFzcyhDTEFTU19OQU1FX1BPU0lUSU9OX1NUQVRJQyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wb3BwZXIgPSBuZXcgUG9wcGVyX19kZWZhdWx0WydkZWZhdWx0J10ocmVmZXJlbmNlRWxlbWVudCwgdGhpcy5fbWVudSwgdGhpcy5fZ2V0UG9wcGVyQ29uZmlnKCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShwYXJlbnQpLmNsb3Nlc3QoU0VMRUNUT1JfTkFWQkFSX05BVikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudC5ib2R5KS5jaGlsZHJlbigpLm9uKCdtb3VzZW92ZXInLCBudWxsLCAkX19kZWZhdWx0WydkZWZhdWx0J10ubm9vcCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcblxuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKENMQVNTX05BTUVfU0hPVyQyKTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShwYXJlbnQpLnRvZ2dsZUNsYXNzKENMQVNTX05BTUVfU0hPVyQyKS50cmlnZ2VyKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9TSE9XTiQxLCByZWxhdGVkVGFyZ2V0KSk7XG4gICAgfTtcblxuICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgIGlmICh0aGlzLl9lbGVtZW50LmRpc2FibGVkIHx8ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDTEFTU19OQU1FX0RJU0FCTEVEKSB8fCAhJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX21lbnUpLmhhc0NsYXNzKENMQVNTX05BTUVfU0hPVyQyKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0ge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50XG4gICAgICB9O1xuICAgICAgdmFyIGhpZGVFdmVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9ISURFJDEsIHJlbGF0ZWRUYXJnZXQpO1xuXG4gICAgICB2YXIgcGFyZW50ID0gRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ocGFyZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcG9wcGVyKSB7XG4gICAgICAgIHRoaXMuX3BvcHBlci5kZXN0cm95KCk7XG4gICAgICB9XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9tZW51KS50b2dnbGVDbGFzcyhDTEFTU19OQU1FX1NIT1ckMik7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ocGFyZW50KS50b2dnbGVDbGFzcyhDTEFTU19OQU1FX1NIT1ckMikudHJpZ2dlcigkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElEREVOJDEsIHJlbGF0ZWRUYXJnZXQpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkkNCk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWSQ0KTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fbWVudSA9IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLl9wb3BwZXIgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB0aGlzLl9wb3BwZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdGhpcy5faW5OYXZiYXIgPSB0aGlzLl9kZXRlY3ROYXZiYXIoKTtcblxuICAgICAgaWYgKHRoaXMuX3BvcHBlciAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbihFVkVOVF9DTElDSywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIF90aGlzLnRvZ2dsZSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IF9leHRlbmRzKHt9LCB0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHQsICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5kYXRhKCksIGNvbmZpZyk7XG4gICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FJDQsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldE1lbnVFbGVtZW50ID0gZnVuY3Rpb24gX2dldE1lbnVFbGVtZW50KCkge1xuICAgICAgaWYgKCF0aGlzLl9tZW51KSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgIHRoaXMuX21lbnUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihTRUxFQ1RPUl9NRU5VKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fbWVudTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRQbGFjZW1lbnQgPSBmdW5jdGlvbiBfZ2V0UGxhY2VtZW50KCkge1xuICAgICAgdmFyICRwYXJlbnREcm9wZG93biA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUpO1xuICAgICAgdmFyIHBsYWNlbWVudCA9IFBMQUNFTUVOVF9CT1RUT007XG5cbiAgICAgIGlmICgkcGFyZW50RHJvcGRvd24uaGFzQ2xhc3MoQ0xBU1NfTkFNRV9EUk9QVVApKSB7XG4gICAgICAgIHBsYWNlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9tZW51KS5oYXNDbGFzcyhDTEFTU19OQU1FX01FTlVSSUdIVCkgPyBQTEFDRU1FTlRfVE9QRU5EIDogUExBQ0VNRU5UX1RPUDtcbiAgICAgIH0gZWxzZSBpZiAoJHBhcmVudERyb3Bkb3duLmhhc0NsYXNzKENMQVNTX05BTUVfRFJPUFJJR0hUKSkge1xuICAgICAgICBwbGFjZW1lbnQgPSBQTEFDRU1FTlRfUklHSFQ7XG4gICAgICB9IGVsc2UgaWYgKCRwYXJlbnREcm9wZG93bi5oYXNDbGFzcyhDTEFTU19OQU1FX0RST1BMRUZUKSkge1xuICAgICAgICBwbGFjZW1lbnQgPSBQTEFDRU1FTlRfTEVGVDtcbiAgICAgIH0gZWxzZSBpZiAoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX21lbnUpLmhhc0NsYXNzKENMQVNTX05BTUVfTUVOVVJJR0hUKSkge1xuICAgICAgICBwbGFjZW1lbnQgPSBQTEFDRU1FTlRfQk9UVE9NRU5EO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGxhY2VtZW50O1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2RldGVjdE5hdmJhciA9IGZ1bmN0aW9uIF9kZXRlY3ROYXZiYXIoKSB7XG4gICAgICByZXR1cm4gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoJy5uYXZiYXInKS5sZW5ndGggPiAwO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldE9mZnNldCA9IGZ1bmN0aW9uIF9nZXRPZmZzZXQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIG9mZnNldCA9IHt9O1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2NvbmZpZy5vZmZzZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb2Zmc2V0LmZuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBkYXRhLm9mZnNldHMgPSBfZXh0ZW5kcyh7fSwgZGF0YS5vZmZzZXRzLCBfdGhpczIuX2NvbmZpZy5vZmZzZXQoZGF0YS5vZmZzZXRzLCBfdGhpczIuX2VsZW1lbnQpIHx8IHt9KTtcbiAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9mZnNldC5vZmZzZXQgPSB0aGlzLl9jb25maWcub2Zmc2V0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldFBvcHBlckNvbmZpZyA9IGZ1bmN0aW9uIF9nZXRQb3BwZXJDb25maWcoKSB7XG4gICAgICB2YXIgcG9wcGVyQ29uZmlnID0ge1xuICAgICAgICBwbGFjZW1lbnQ6IHRoaXMuX2dldFBsYWNlbWVudCgpLFxuICAgICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgICBvZmZzZXQ6IHRoaXMuX2dldE9mZnNldCgpLFxuICAgICAgICAgIGZsaXA6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRoaXMuX2NvbmZpZy5mbGlwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcmV2ZW50T3ZlcmZsb3c6IHtcbiAgICAgICAgICAgIGJvdW5kYXJpZXNFbGVtZW50OiB0aGlzLl9jb25maWcuYm91bmRhcnlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcuZGlzcGxheSA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgcG9wcGVyQ29uZmlnLm1vZGlmaWVycy5hcHBseVN0eWxlID0ge1xuICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcG9wcGVyQ29uZmlnLCB0aGlzLl9jb25maWcucG9wcGVyQ29uZmlnKTtcbiAgICB9O1xuXG4gICAgRHJvcGRvd24uX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcykuZGF0YShEQVRBX0tFWSQ0KTtcblxuICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnID8gY29uZmlnIDogbnVsbDtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IERyb3Bkb3duKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKS5kYXRhKERBVEFfS0VZJDQsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIERyb3Bkb3duLl9jbGVhck1lbnVzID0gZnVuY3Rpb24gX2NsZWFyTWVudXMoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudCAmJiAoZXZlbnQud2hpY2ggPT09IFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIGV2ZW50LndoaWNoICE9PSBUQUJfS0VZQ09ERSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG9nZ2xlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9EQVRBX1RPR0dMRSQyKSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b2dnbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodG9nZ2xlc1tpXSk7XG5cbiAgICAgICAgdmFyIGNvbnRleHQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odG9nZ2xlc1tpXSkuZGF0YShEQVRBX0tFWSQ0KTtcbiAgICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7XG4gICAgICAgICAgcmVsYXRlZFRhcmdldDogdG9nZ2xlc1tpXVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChldmVudCAmJiBldmVudC50eXBlID09PSAnY2xpY2snKSB7XG4gICAgICAgICAgcmVsYXRlZFRhcmdldC5jbGlja0V2ZW50ID0gZXZlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkcm9wZG93bk1lbnUgPSBjb250ZXh0Ll9tZW51O1xuXG4gICAgICAgIGlmICghJF9fZGVmYXVsdFsnZGVmYXVsdCddKHBhcmVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDIpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdjbGljaycgJiYgL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJyAmJiBldmVudC53aGljaCA9PT0gVEFCX0tFWUNPREUpICYmICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5jb250YWlucyhwYXJlbnQsIGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoaWRlRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElERSQxLCByZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHBhcmVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXG4gICAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vZmYoJ21vdXNlb3ZlcicsIG51bGwsICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5ub29wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZXNbaV0uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG5cbiAgICAgICAgaWYgKGNvbnRleHQuX3BvcHBlcikge1xuICAgICAgICAgIGNvbnRleHQuX3BvcHBlci5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZHJvcGRvd25NZW51KS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX1NIT1ckMik7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShwYXJlbnQpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfU0hPVyQyKS50cmlnZ2VyKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9ISURERU4kMSwgcmVsYXRlZFRhcmdldCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0UGFyZW50RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgdmFyIHBhcmVudDtcbiAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcblxuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyZW50IHx8IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICB9O1xuXG4gICAgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlciA9IGZ1bmN0aW9uIF9kYXRhQXBpS2V5ZG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICAgIGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSA/IGV2ZW50LndoaWNoID09PSBTUEFDRV9LRVlDT0RFIHx8IGV2ZW50LndoaWNoICE9PSBFU0NBUEVfS0VZQ09ERSAmJiAoZXZlbnQud2hpY2ggIT09IEFSUk9XX0RPV05fS0VZQ09ERSAmJiBldmVudC53aGljaCAhPT0gQVJST1dfVVBfS0VZQ09ERSB8fCAkX19kZWZhdWx0WydkZWZhdWx0J10oZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFNFTEVDVE9SX01FTlUpLmxlbmd0aCkgOiAhUkVHRVhQX0tFWURPV04udGVzdChldmVudC53aGljaCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcykuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9ESVNBQkxFRCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyZW50ID0gRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMpO1xuXG4gICAgICB2YXIgaXNBY3RpdmUgPSAkX19kZWZhdWx0WydkZWZhdWx0J10ocGFyZW50KS5oYXNDbGFzcyhDTEFTU19OQU1FX1NIT1ckMik7XG5cbiAgICAgIGlmICghaXNBY3RpdmUgJiYgZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICBpZiAoIWlzQWN0aXZlIHx8IGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSB8fCBldmVudC53aGljaCA9PT0gU1BBQ0VfS0VZQ09ERSkge1xuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHBhcmVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SX0RBVEFfVE9HR0xFJDIpKS50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICB9XG5cbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGl0ZW1zID0gW10uc2xpY2UuY2FsbChwYXJlbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9WSVNJQkxFX0lURU1TKSkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiAkX19kZWZhdWx0WydkZWZhdWx0J10oaXRlbSkuaXMoJzp2aXNpYmxlJyk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmluZGV4T2YoZXZlbnQudGFyZ2V0KTtcblxuICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBBUlJPV19VUF9LRVlDT0RFICYmIGluZGV4ID4gMCkge1xuICAgICAgICBpbmRleC0tO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQud2hpY2ggPT09IEFSUk9XX0RPV05fS0VZQ09ERSAmJiBpbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cblxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGl0ZW1zW2luZGV4XS5mb2N1cygpO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJvcGRvd24sIG51bGwsIFt7XG4gICAgICBrZXk6IFwiVkVSU0lPTlwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OJDQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdCQyO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEZWZhdWx0VHlwZVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0VHlwZSQyO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEcm9wZG93bjtcbiAgfSgpO1xuXG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudCkub24oRVZFTlRfS0VZRE9XTl9EQVRBX0FQSSwgU0VMRUNUT1JfREFUQV9UT0dHTEUkMiwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRVZFTlRfS0VZRE9XTl9EQVRBX0FQSSwgU0VMRUNUT1JfTUVOVSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNCArIFwiIFwiICsgRVZFTlRfS0VZVVBfREFUQV9BUEksIERyb3Bkb3duLl9jbGVhck1lbnVzKS5vbihFVkVOVF9DTElDS19EQVRBX0FQSSQ0LCBTRUxFQ1RPUl9EQVRBX1RPR0dMRSQyLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgRHJvcGRvd24uX2pRdWVyeUludGVyZmFjZS5jYWxsKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKSwgJ3RvZ2dsZScpO1xuICB9KS5vbihFVkVOVF9DTElDS19EQVRBX0FQSSQ0LCBTRUxFQ1RPUl9GT1JNX0NISUxELCBmdW5jdGlvbiAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ0XSA9IERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7XG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDRdLkNvbnN0cnVjdG9yID0gRHJvcGRvd247XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkNF0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ0XSA9IEpRVUVSWV9OT19DT05GTElDVCQ0O1xuICAgIHJldHVybiBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHZhciBOQU1FJDUgPSAnbW9kYWwnO1xuICB2YXIgVkVSU0lPTiQ1ID0gJzQuNS4zJztcbiAgdmFyIERBVEFfS0VZJDUgPSAnYnMubW9kYWwnO1xuICB2YXIgRVZFTlRfS0VZJDUgPSBcIi5cIiArIERBVEFfS0VZJDU7XG4gIHZhciBEQVRBX0FQSV9LRVkkNSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDUgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ1XTtcbiAgdmFyIEVTQ0FQRV9LRVlDT0RFJDEgPSAyNztcbiAgdmFyIERlZmF1bHQkMyA9IHtcbiAgICBiYWNrZHJvcDogdHJ1ZSxcbiAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICBmb2N1czogdHJ1ZSxcbiAgICBzaG93OiB0cnVlXG4gIH07XG4gIHZhciBEZWZhdWx0VHlwZSQzID0ge1xuICAgIGJhY2tkcm9wOiAnKGJvb2xlYW58c3RyaW5nKScsXG4gICAga2V5Ym9hcmQ6ICdib29sZWFuJyxcbiAgICBmb2N1czogJ2Jvb2xlYW4nLFxuICAgIHNob3c6ICdib29sZWFuJ1xuICB9O1xuICB2YXIgRVZFTlRfSElERSQyID0gXCJoaWRlXCIgKyBFVkVOVF9LRVkkNTtcbiAgdmFyIEVWRU5UX0hJREVfUFJFVkVOVEVEID0gXCJoaWRlUHJldmVudGVkXCIgKyBFVkVOVF9LRVkkNTtcbiAgdmFyIEVWRU5UX0hJRERFTiQyID0gXCJoaWRkZW5cIiArIEVWRU5UX0tFWSQ1O1xuICB2YXIgRVZFTlRfU0hPVyQyID0gXCJzaG93XCIgKyBFVkVOVF9LRVkkNTtcbiAgdmFyIEVWRU5UX1NIT1dOJDIgPSBcInNob3duXCIgKyBFVkVOVF9LRVkkNTtcbiAgdmFyIEVWRU5UX0ZPQ1VTSU4gPSBcImZvY3VzaW5cIiArIEVWRU5UX0tFWSQ1O1xuICB2YXIgRVZFTlRfUkVTSVpFID0gXCJyZXNpemVcIiArIEVWRU5UX0tFWSQ1O1xuICB2YXIgRVZFTlRfQ0xJQ0tfRElTTUlTUyA9IFwiY2xpY2suZGlzbWlzc1wiICsgRVZFTlRfS0VZJDU7XG4gIHZhciBFVkVOVF9LRVlET1dOX0RJU01JU1MgPSBcImtleWRvd24uZGlzbWlzc1wiICsgRVZFTlRfS0VZJDU7XG4gIHZhciBFVkVOVF9NT1VTRVVQX0RJU01JU1MgPSBcIm1vdXNldXAuZGlzbWlzc1wiICsgRVZFTlRfS0VZJDU7XG4gIHZhciBFVkVOVF9NT1VTRURPV05fRElTTUlTUyA9IFwibW91c2Vkb3duLmRpc21pc3NcIiArIEVWRU5UX0tFWSQ1O1xuICB2YXIgRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNSA9IFwiY2xpY2tcIiArIEVWRU5UX0tFWSQ1ICsgREFUQV9BUElfS0VZJDU7XG4gIHZhciBDTEFTU19OQU1FX1NDUk9MTEFCTEUgPSAnbW9kYWwtZGlhbG9nLXNjcm9sbGFibGUnO1xuICB2YXIgQ0xBU1NfTkFNRV9TQ1JPTExCQVJfTUVBU1VSRVIgPSAnbW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUnO1xuICB2YXIgQ0xBU1NfTkFNRV9CQUNLRFJPUCA9ICdtb2RhbC1iYWNrZHJvcCc7XG4gIHZhciBDTEFTU19OQU1FX09QRU4gPSAnbW9kYWwtb3Blbic7XG4gIHZhciBDTEFTU19OQU1FX0ZBREUkMSA9ICdmYWRlJztcbiAgdmFyIENMQVNTX05BTUVfU0hPVyQzID0gJ3Nob3cnO1xuICB2YXIgQ0xBU1NfTkFNRV9TVEFUSUMgPSAnbW9kYWwtc3RhdGljJztcbiAgdmFyIFNFTEVDVE9SX0RJQUxPRyA9ICcubW9kYWwtZGlhbG9nJztcbiAgdmFyIFNFTEVDVE9SX01PREFMX0JPRFkgPSAnLm1vZGFsLWJvZHknO1xuICB2YXIgU0VMRUNUT1JfREFUQV9UT0dHTEUkMyA9ICdbZGF0YS10b2dnbGU9XCJtb2RhbFwiXSc7XG4gIHZhciBTRUxFQ1RPUl9EQVRBX0RJU01JU1MgPSAnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJztcbiAgdmFyIFNFTEVDVE9SX0ZJWEVEX0NPTlRFTlQgPSAnLmZpeGVkLXRvcCwgLmZpeGVkLWJvdHRvbSwgLmlzLWZpeGVkLCAuc3RpY2t5LXRvcCc7XG4gIHZhciBTRUxFQ1RPUl9TVElDS1lfQ09OVEVOVCA9ICcuc3RpY2t5LXRvcCc7XG5cbiAgdmFyIE1vZGFsID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1vZGFsKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMuX2RpYWxvZyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihTRUxFQ1RPUl9ESUFMT0cpO1xuICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuICAgICAgdGhpcy5faXNTaG93biA9IGZhbHNlO1xuICAgICAgdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSAwO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBNb2RhbC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pc1Nob3duID8gdGhpcy5oaWRlKCkgOiB0aGlzLnNob3cocmVsYXRlZFRhcmdldCk7XG4gICAgfTtcblxuICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdyhyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNTaG93biB8fCB0aGlzLl9pc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENMQVNTX05BTUVfRkFERSQxKSkge1xuICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2hvd0V2ZW50ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLkV2ZW50KEVWRU5UX1NIT1ckMiwge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0XG4gICAgICB9KTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cbiAgICAgIGlmICh0aGlzLl9pc1Nob3duIHx8IHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzU2hvd24gPSB0cnVlO1xuXG4gICAgICB0aGlzLl9jaGVja1Njcm9sbGJhcigpO1xuXG4gICAgICB0aGlzLl9zZXRTY3JvbGxiYXIoKTtcblxuICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG5cbiAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG5cbiAgICAgIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCk7XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbihFVkVOVF9DTElDS19ESVNNSVNTLCBTRUxFQ1RPUl9EQVRBX0RJU01JU1MsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuaGlkZShldmVudCk7XG4gICAgICB9KTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9kaWFsb2cpLm9uKEVWRU5UX01PVVNFRE9XTl9ESVNNSVNTLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpcy5fZWxlbWVudCkub25lKEVWRU5UX01PVVNFVVBfRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXShldmVudC50YXJnZXQpLmlzKF90aGlzLl9lbGVtZW50KSkge1xuICAgICAgICAgICAgX3RoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fc2hvd0JhY2tkcm9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLl9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uaGlkZSA9IGZ1bmN0aW9uIGhpZGUoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9pc1Nob3duIHx8IHRoaXMuX2lzVHJhbnNpdGlvbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBoaWRlRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElERSQyKTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cbiAgICAgIGlmICghdGhpcy5faXNTaG93biB8fCBoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDTEFTU19OQU1FX0ZBREUkMSk7XG5cbiAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG5cbiAgICAgIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCk7XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudCkub2ZmKEVWRU5UX0ZPQ1VTSU4pO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfU0hPVyQzKTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vZmYoRVZFTlRfQ0xJQ0tfRElTTUlTUyk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZGlhbG9nKS5vZmYoRVZFTlRfTU9VU0VET1dOX0RJU01JU1MpO1xuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLl9oaWRlTW9kYWwoZXZlbnQpO1xuICAgICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCh0cmFuc2l0aW9uRHVyYXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGlkZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIFt3aW5kb3csIHRoaXMuX2VsZW1lbnQsIHRoaXMuX2RpYWxvZ10uZm9yRWFjaChmdW5jdGlvbiAoaHRtbEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShodG1sRWxlbWVudCkub2ZmKEVWRU5UX0tFWSQ1KTtcbiAgICAgIH0pO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGRvY3VtZW50KS5vZmYoRVZFTlRfRk9DVVNJTik7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSQ1KTtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2RpYWxvZyA9IG51bGw7XG4gICAgICB0aGlzLl9iYWNrZHJvcCA9IG51bGw7XG4gICAgICB0aGlzLl9pc1Nob3duID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gbnVsbDtcbiAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBudWxsO1xuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gbnVsbDtcbiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gbnVsbDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmhhbmRsZVVwZGF0ZSA9IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuX2FkanVzdERpYWxvZygpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSBfZXh0ZW5kcyh7fSwgRGVmYXVsdCQzLCBjb25maWcpO1xuICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSQ1LCBjb25maWcsIERlZmF1bHRUeXBlJDMpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl90cmlnZ2VyQmFja2Ryb3BUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3RyaWdnZXJCYWNrZHJvcFRyYW5zaXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5iYWNrZHJvcCA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgdmFyIGhpZGVFdmVudFByZXZlbnRlZCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9ISURFX1BSRVZFTlRFRCk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudFByZXZlbnRlZCk7XG5cbiAgICAgICAgaWYgKGhpZGVFdmVudFByZXZlbnRlZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc01vZGFsT3ZlcmZsb3dpbmcgPSB0aGlzLl9lbGVtZW50LnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG5cbiAgICAgICAgaWYgKCFpc01vZGFsT3ZlcmZsb3dpbmcpIHtcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfU1RBVElDKTtcblxuICAgICAgICB2YXIgbW9kYWxUcmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2RpYWxvZyk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vZmYoVXRpbC5UUkFOU0lUSU9OX0VORCk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU1RBVElDKTtcblxuICAgICAgICAgIGlmICghaXNNb2RhbE92ZXJmbG93aW5nKSB7XG4gICAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oX3RoaXMzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczMuX2VsZW1lbnQuc3R5bGUub3ZlcmZsb3dZID0gJyc7XG4gICAgICAgICAgICB9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChfdGhpczMuX2VsZW1lbnQsIG1vZGFsVHJhbnNpdGlvbkR1cmF0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKG1vZGFsVHJhbnNpdGlvbkR1cmF0aW9uKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LmZvY3VzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zaG93RWxlbWVudCA9IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdmFyIHRyYW5zaXRpb24gPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9GQURFJDEpO1xuICAgICAgdmFyIG1vZGFsQm9keSA9IHRoaXMuX2RpYWxvZyA/IHRoaXMuX2RpYWxvZy5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SX01PREFMX0JPRFkpIDogbnVsbDtcblxuICAgICAgaWYgKCF0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgfHwgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCB0cnVlKTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZGlhbG9nJyk7XG5cbiAgICAgIGlmICgkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZGlhbG9nKS5oYXNDbGFzcyhDTEFTU19OQU1FX1NDUk9MTEFCTEUpICYmIG1vZGFsQm9keSkge1xuICAgICAgICBtb2RhbEJvZHkuc2Nyb2xsVG9wID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDTEFTU19OQU1FX1NIT1ckMyk7XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcuZm9jdXMpIHtcbiAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93bkV2ZW50ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLkV2ZW50KEVWRU5UX1NIT1dOJDIsIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldFxuICAgICAgfSk7XG5cbiAgICAgIHZhciB0cmFuc2l0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKSB7XG4gICAgICAgIGlmIChfdGhpczQuX2NvbmZpZy5mb2N1cykge1xuICAgICAgICAgIF90aGlzNC5fZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXM0Ll9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKF90aGlzNC5fZWxlbWVudCkudHJpZ2dlcihzaG93bkV2ZW50KTtcbiAgICAgIH07XG5cbiAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2RpYWxvZyk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9kaWFsb2cpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCB0cmFuc2l0aW9uQ29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9lbmZvcmNlRm9jdXMgPSBmdW5jdGlvbiBfZW5mb3JjZUZvY3VzKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudCkub2ZmKEVWRU5UX0ZPQ1VTSU4pLm9uKEVWRU5UX0ZPQ1VTSU4sIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZG9jdW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiBfdGhpczUuX2VsZW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiAkX19kZWZhdWx0WydkZWZhdWx0J10oX3RoaXM1Ll9lbGVtZW50KS5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBfdGhpczUuX2VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fc2V0RXNjYXBlRXZlbnQgPSBmdW5jdGlvbiBfc2V0RXNjYXBlRXZlbnQoKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLm9uKEVWRU5UX0tFWURPV05fRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKF90aGlzNi5fY29uZmlnLmtleWJvYXJkICYmIGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSQxKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBfdGhpczYuaGlkZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIV90aGlzNi5fY29uZmlnLmtleWJvYXJkICYmIGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSQxKSB7XG4gICAgICAgICAgICBfdGhpczYuX3RyaWdnZXJCYWNrZHJvcFRyYW5zaXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93bikge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0tFWURPV05fRElTTUlTUyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fc2V0UmVzaXplRXZlbnQgPSBmdW5jdGlvbiBfc2V0UmVzaXplRXZlbnQoKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHdpbmRvdykub24oRVZFTlRfUkVTSVpFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM3LmhhbmRsZVVwZGF0ZShldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHdpbmRvdykub2ZmKEVWRU5UX1JFU0laRSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5faGlkZU1vZGFsID0gZnVuY3Rpb24gX2hpZGVNb2RhbCgpIHtcbiAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuXG4gICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcblxuICAgICAgdGhpcy5fc2hvd0JhY2tkcm9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfT1BFTik7XG5cbiAgICAgICAgX3RoaXM4Ll9yZXNldEFkanVzdG1lbnRzKCk7XG5cbiAgICAgICAgX3RoaXM4Ll9yZXNldFNjcm9sbGJhcigpO1xuXG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpczguX2VsZW1lbnQpLnRyaWdnZXIoRVZFTlRfSElEREVOJDIpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fcmVtb3ZlQmFja2Ryb3AgPSBmdW5jdGlvbiBfcmVtb3ZlQmFja2Ryb3AoKSB7XG4gICAgICBpZiAodGhpcy5fYmFja2Ryb3ApIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX3Nob3dCYWNrZHJvcCA9IGZ1bmN0aW9uIF9zaG93QmFja2Ryb3AoY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICB2YXIgYW5pbWF0ZSA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDTEFTU19OQU1FX0ZBREUkMSkgPyBDTEFTU19OQU1FX0ZBREUkMSA6ICcnO1xuXG4gICAgICBpZiAodGhpcy5faXNTaG93biAmJiB0aGlzLl9jb25maWcuYmFja2Ryb3ApIHtcbiAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5fYmFja2Ryb3AuY2xhc3NOYW1lID0gQ0xBU1NfTkFNRV9CQUNLRFJPUDtcblxuICAgICAgICBpZiAoYW5pbWF0ZSkge1xuICAgICAgICAgIHRoaXMuX2JhY2tkcm9wLmNsYXNzTGlzdC5hZGQoYW5pbWF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub24oRVZFTlRfQ0xJQ0tfRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKF90aGlzOS5faWdub3JlQmFja2Ryb3BDbGljaykge1xuICAgICAgICAgICAgX3RoaXM5Ll9pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzOS5fdHJpZ2dlckJhY2tkcm9wVHJhbnNpdGlvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYW5pbWF0ZSkge1xuICAgICAgICAgIFV0aWwucmVmbG93KHRoaXMuX2JhY2tkcm9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDMpO1xuXG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFuaW1hdGUpIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBiYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fYmFja2Ryb3ApO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFjaykuZW11bGF0ZVRyYW5zaXRpb25FbmQoYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24pO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93biAmJiB0aGlzLl9iYWNrZHJvcCkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fYmFja2Ryb3ApLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfU0hPVyQzKTtcblxuICAgICAgICB2YXIgY2FsbGJhY2tSZW1vdmUgPSBmdW5jdGlvbiBjYWxsYmFja1JlbW92ZSgpIHtcbiAgICAgICAgICBfdGhpczkuX3JlbW92ZUJhY2tkcm9wKCk7XG5cbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICgkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9GQURFJDEpKSB7XG4gICAgICAgICAgdmFyIF9iYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fYmFja2Ryb3ApO1xuXG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2JhY2tkcm9wKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY2FsbGJhY2tSZW1vdmUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKF9iYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2tSZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX2FkanVzdERpYWxvZyA9IGZ1bmN0aW9uIF9hZGp1c3REaWFsb2coKSB7XG4gICAgICB2YXIgaXNNb2RhbE92ZXJmbG93aW5nID0gdGhpcy5fZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXG4gICAgICBpZiAoIXRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmIGlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyAmJiAhaXNNb2RhbE92ZXJmbG93aW5nKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fcmVzZXRBZGp1c3RtZW50cyA9IGZ1bmN0aW9uIF9yZXNldEFkanVzdG1lbnRzKCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcnO1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSAnJztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9jaGVja1Njcm9sbGJhciA9IGZ1bmN0aW9uIF9jaGVja1Njcm9sbGJhcigpIHtcbiAgICAgIHZhciByZWN0ID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gTWF0aC5yb3VuZChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSA8IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSB0aGlzLl9nZXRTY3JvbGxiYXJXaWR0aCgpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX3NldFNjcm9sbGJhciA9IGZ1bmN0aW9uIF9zZXRTY3JvbGxiYXIoKSB7XG4gICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9pc0JvZHlPdmVyZmxvd2luZykge1xuICAgICAgICB2YXIgZml4ZWRDb250ZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX0ZJWEVEX0NPTlRFTlQpKTtcbiAgICAgICAgdmFyIHN0aWNreUNvbnRlbnQgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfU1RJQ0tZX0NPTlRFTlQpKTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGZpeGVkQ29udGVudCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgYWN0dWFsUGFkZGluZyA9IGVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0O1xuICAgICAgICAgIHZhciBjYWxjdWxhdGVkUGFkZGluZyA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5jc3MoJ3BhZGRpbmctcmlnaHQnKTtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkuZGF0YSgncGFkZGluZy1yaWdodCcsIGFjdHVhbFBhZGRpbmcpLmNzcygncGFkZGluZy1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZFBhZGRpbmcpICsgX3RoaXMxMC5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHN0aWNreUNvbnRlbnQpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIGFjdHVhbE1hcmdpbiA9IGVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQ7XG4gICAgICAgICAgdmFyIGNhbGN1bGF0ZWRNYXJnaW4gPSAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkuY3NzKCdtYXJnaW4tcmlnaHQnKTtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkuZGF0YSgnbWFyZ2luLXJpZ2h0JywgYWN0dWFsTWFyZ2luKS5jc3MoJ21hcmdpbi1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZE1hcmdpbikgLSBfdGhpczEwLl9zY3JvbGxiYXJXaWR0aCArIFwicHhcIik7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYWN0dWFsUGFkZGluZyA9IGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0O1xuICAgICAgICB2YXIgY2FsY3VsYXRlZFBhZGRpbmcgPSAkX19kZWZhdWx0WydkZWZhdWx0J10oZG9jdW1lbnQuYm9keSkuY3NzKCdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudC5ib2R5KS5kYXRhKCdwYWRkaW5nLXJpZ2h0JywgYWN0dWFsUGFkZGluZykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFyc2VGbG9hdChjYWxjdWxhdGVkUGFkZGluZykgKyB0aGlzLl9zY3JvbGxiYXJXaWR0aCArIFwicHhcIik7XG4gICAgICB9XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDTEFTU19OQU1FX09QRU4pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX3Jlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gX3Jlc2V0U2Nyb2xsYmFyKCkge1xuICAgICAgdmFyIGZpeGVkQ29udGVudCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9GSVhFRF9DT05URU5UKSk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZml4ZWRDb250ZW50KS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICB2YXIgcGFkZGluZyA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5kYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5yZW1vdmVEYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZyA/IHBhZGRpbmcgOiAnJztcbiAgICAgIH0pO1xuICAgICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiXCIgKyBTRUxFQ1RPUl9TVElDS1lfQ09OVEVOVCkpO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGVsZW1lbnRzKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICB2YXIgbWFyZ2luID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKGVsZW1lbnQpLmRhdGEoJ21hcmdpbi1yaWdodCcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgbWFyZ2luICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5jc3MoJ21hcmdpbi1yaWdodCcsIG1hcmdpbikucmVtb3ZlRGF0YSgnbWFyZ2luLXJpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIHBhZGRpbmcgPSAkX19kZWZhdWx0WydkZWZhdWx0J10oZG9jdW1lbnQuYm9keSkuZGF0YSgncGFkZGluZy1yaWdodCcpO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGRvY3VtZW50LmJvZHkpLnJlbW92ZURhdGEoJ3BhZGRpbmctcmlnaHQnKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZyA/IHBhZGRpbmcgOiAnJztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRTY3JvbGxiYXJXaWR0aCA9IGZ1bmN0aW9uIF9nZXRTY3JvbGxiYXJXaWR0aCgpIHtcbiAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSBDTEFTU19OQU1FX1NDUk9MTEJBUl9NRUFTVVJFUjtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcbiAgICAgIHZhciBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcbiAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcbiAgICB9O1xuXG4gICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnLCByZWxhdGVkVGFyZ2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcykuZGF0YShEQVRBX0tFWSQ1KTtcblxuICAgICAgICB2YXIgX2NvbmZpZyA9IF9leHRlbmRzKHt9LCBEZWZhdWx0JDMsICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKS5kYXRhKCksIHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyA/IGNvbmZpZyA6IHt9KTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IE1vZGFsKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKS5kYXRhKERBVEFfS0VZJDUsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10ocmVsYXRlZFRhcmdldCk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5zaG93KSB7XG4gICAgICAgICAgZGF0YS5zaG93KHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKE1vZGFsLCBudWxsLCBbe1xuICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTiQ1O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEZWZhdWx0XCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHQkMztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTW9kYWw7XG4gIH0oKTtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10oZG9jdW1lbnQpLm9uKEVWRU5UX0NMSUNLX0RBVEFfQVBJJDUsIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDMsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgIHZhciB0YXJnZXQ7XG4gICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpO1xuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICB2YXIgY29uZmlnID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRhcmdldCkuZGF0YShEQVRBX0tFWSQ1KSA/ICd0b2dnbGUnIDogX2V4dGVuZHMoe30sICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0YXJnZXQpLmRhdGEoKSwgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLmRhdGEoKSk7XG5cbiAgICBpZiAodGhpcy50YWdOYW1lID09PSAnQScgfHwgdGhpcy50YWdOYW1lID09PSAnQVJFQScpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgdmFyICR0YXJnZXQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGFyZ2V0KS5vbmUoRVZFTlRfU0hPVyQyLCBmdW5jdGlvbiAoc2hvd0V2ZW50KSB7XG4gICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgJHRhcmdldC5vbmUoRVZFTlRfSElEREVOJDIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpczExKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgIF90aGlzMTEuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRhcmdldCksIGNvbmZpZywgdGhpcyk7XG4gIH0pO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ1XSA9IE1vZGFsLl9qUXVlcnlJbnRlcmZhY2U7XG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDVdLkNvbnN0cnVjdG9yID0gTW9kYWw7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkNV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ1XSA9IEpRVUVSWV9OT19DT05GTElDVCQ1O1xuICAgIHJldHVybiBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHZhciB1cmlBdHRycyA9IFsnYmFja2dyb3VuZCcsICdjaXRlJywgJ2hyZWYnLCAnaXRlbXR5cGUnLCAnbG9uZ2Rlc2MnLCAncG9zdGVyJywgJ3NyYycsICd4bGluazpocmVmJ107XG4gIHZhciBBUklBX0FUVFJJQlVURV9QQVRURVJOID0gL15hcmlhLVtcXHctXSokL2k7XG4gIHZhciBEZWZhdWx0V2hpdGVsaXN0ID0ge1xuICAgICcqJzogWydjbGFzcycsICdkaXInLCAnaWQnLCAnbGFuZycsICdyb2xlJywgQVJJQV9BVFRSSUJVVEVfUEFUVEVSTl0sXG4gICAgYTogWyd0YXJnZXQnLCAnaHJlZicsICd0aXRsZScsICdyZWwnXSxcbiAgICBhcmVhOiBbXSxcbiAgICBiOiBbXSxcbiAgICBicjogW10sXG4gICAgY29sOiBbXSxcbiAgICBjb2RlOiBbXSxcbiAgICBkaXY6IFtdLFxuICAgIGVtOiBbXSxcbiAgICBocjogW10sXG4gICAgaDE6IFtdLFxuICAgIGgyOiBbXSxcbiAgICBoMzogW10sXG4gICAgaDQ6IFtdLFxuICAgIGg1OiBbXSxcbiAgICBoNjogW10sXG4gICAgaTogW10sXG4gICAgaW1nOiBbJ3NyYycsICdzcmNzZXQnLCAnYWx0JywgJ3RpdGxlJywgJ3dpZHRoJywgJ2hlaWdodCddLFxuICAgIGxpOiBbXSxcbiAgICBvbDogW10sXG4gICAgcDogW10sXG4gICAgcHJlOiBbXSxcbiAgICBzOiBbXSxcbiAgICBzbWFsbDogW10sXG4gICAgc3BhbjogW10sXG4gICAgc3ViOiBbXSxcbiAgICBzdXA6IFtdLFxuICAgIHN0cm9uZzogW10sXG4gICAgdTogW10sXG4gICAgdWw6IFtdXG4gIH07XG4gIHZhciBTQUZFX1VSTF9QQVRURVJOID0gL14oPzooPzpodHRwcz98bWFpbHRvfGZ0cHx0ZWx8ZmlsZSk6fFteIyYvOj9dKig/OlsjLz9dfCQpKS9naTtcbiAgdmFyIERBVEFfVVJMX1BBVFRFUk4gPSAvXmRhdGE6KD86aW1hZ2VcXC8oPzpibXB8Z2lmfGpwZWd8anBnfHBuZ3x0aWZmfHdlYnApfHZpZGVvXFwvKD86bXBlZ3xtcDR8b2dnfHdlYm0pfGF1ZGlvXFwvKD86bXAzfG9nYXxvZ2d8b3B1cykpO2Jhc2U2NCxbXFxkKy9hLXpdKz0qJC9pO1xuXG4gIGZ1bmN0aW9uIGFsbG93ZWRBdHRyaWJ1dGUoYXR0ciwgYWxsb3dlZEF0dHJpYnV0ZUxpc3QpIHtcbiAgICB2YXIgYXR0ck5hbWUgPSBhdHRyLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoYWxsb3dlZEF0dHJpYnV0ZUxpc3QuaW5kZXhPZihhdHRyTmFtZSkgIT09IC0xKSB7XG4gICAgICBpZiAodXJpQXR0cnMuaW5kZXhPZihhdHRyTmFtZSkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKGF0dHIubm9kZVZhbHVlLm1hdGNoKFNBRkVfVVJMX1BBVFRFUk4pIHx8IGF0dHIubm9kZVZhbHVlLm1hdGNoKERBVEFfVVJMX1BBVFRFUk4pKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHJlZ0V4cCA9IGFsbG93ZWRBdHRyaWJ1dGVMaXN0LmZpbHRlcihmdW5jdGlvbiAoYXR0clJlZ2V4KSB7XG4gICAgICByZXR1cm4gYXR0clJlZ2V4IGluc3RhbmNlb2YgUmVnRXhwO1xuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlZ0V4cC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGF0dHJOYW1lLm1hdGNoKHJlZ0V4cFtpXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2FuaXRpemVIdG1sKHVuc2FmZUh0bWwsIHdoaXRlTGlzdCwgc2FuaXRpemVGbikge1xuICAgIGlmICh1bnNhZmVIdG1sLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHVuc2FmZUh0bWw7XG4gICAgfVxuXG4gICAgaWYgKHNhbml0aXplRm4gJiYgdHlwZW9mIHNhbml0aXplRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBzYW5pdGl6ZUZuKHVuc2FmZUh0bWwpO1xuICAgIH1cblxuICAgIHZhciBkb21QYXJzZXIgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpO1xuICAgIHZhciBjcmVhdGVkRG9jdW1lbnQgPSBkb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHVuc2FmZUh0bWwsICd0ZXh0L2h0bWwnKTtcbiAgICB2YXIgd2hpdGVsaXN0S2V5cyA9IE9iamVjdC5rZXlzKHdoaXRlTGlzdCk7XG4gICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChjcmVhdGVkRG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSwgbGVuKSB7XG4gICAgICB2YXIgZWwgPSBlbGVtZW50c1tpXTtcbiAgICAgIHZhciBlbE5hbWUgPSBlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBpZiAod2hpdGVsaXN0S2V5cy5pbmRleE9mKGVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpID09PSAtMSkge1xuICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICAgIH1cblxuICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSBbXS5zbGljZS5jYWxsKGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgdmFyIHdoaXRlbGlzdGVkQXR0cmlidXRlcyA9IFtdLmNvbmNhdCh3aGl0ZUxpc3RbJyonXSB8fCBbXSwgd2hpdGVMaXN0W2VsTmFtZV0gfHwgW10pO1xuICAgICAgYXR0cmlidXRlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgIGlmICghYWxsb3dlZEF0dHJpYnV0ZShhdHRyLCB3aGl0ZWxpc3RlZEF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIubm9kZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgX3JldCA9IF9sb29wKGkpO1xuXG4gICAgICBpZiAoX3JldCA9PT0gXCJjb250aW51ZVwiKSBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlZERvY3VtZW50LmJvZHkuaW5uZXJIVE1MO1xuICB9XG5cbiAgdmFyIE5BTUUkNiA9ICd0b29sdGlwJztcbiAgdmFyIFZFUlNJT04kNiA9ICc0LjUuMyc7XG4gIHZhciBEQVRBX0tFWSQ2ID0gJ2JzLnRvb2x0aXAnO1xuICB2YXIgRVZFTlRfS0VZJDYgPSBcIi5cIiArIERBVEFfS0VZJDY7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QkNiA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDZdO1xuICB2YXIgQ0xBU1NfUFJFRklYID0gJ2JzLXRvb2x0aXAnO1xuICB2YXIgQlNDTFNfUFJFRklYX1JFR0VYID0gbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgQ0xBU1NfUFJFRklYICsgXCJcXFxcUytcIiwgJ2cnKTtcbiAgdmFyIERJU0FMTE9XRURfQVRUUklCVVRFUyA9IFsnc2FuaXRpemUnLCAnd2hpdGVMaXN0JywgJ3Nhbml0aXplRm4nXTtcbiAgdmFyIERlZmF1bHRUeXBlJDQgPSB7XG4gICAgYW5pbWF0aW9uOiAnYm9vbGVhbicsXG4gICAgdGVtcGxhdGU6ICdzdHJpbmcnLFxuICAgIHRpdGxlOiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKScsXG4gICAgdHJpZ2dlcjogJ3N0cmluZycsXG4gICAgZGVsYXk6ICcobnVtYmVyfG9iamVjdCknLFxuICAgIGh0bWw6ICdib29sZWFuJyxcbiAgICBzZWxlY3RvcjogJyhzdHJpbmd8Ym9vbGVhbiknLFxuICAgIHBsYWNlbWVudDogJyhzdHJpbmd8ZnVuY3Rpb24pJyxcbiAgICBvZmZzZXQ6ICcobnVtYmVyfHN0cmluZ3xmdW5jdGlvbiknLFxuICAgIGNvbnRhaW5lcjogJyhzdHJpbmd8ZWxlbWVudHxib29sZWFuKScsXG4gICAgZmFsbGJhY2tQbGFjZW1lbnQ6ICcoc3RyaW5nfGFycmF5KScsXG4gICAgYm91bmRhcnk6ICcoc3RyaW5nfGVsZW1lbnQpJyxcbiAgICBzYW5pdGl6ZTogJ2Jvb2xlYW4nLFxuICAgIHNhbml0aXplRm46ICcobnVsbHxmdW5jdGlvbiknLFxuICAgIHdoaXRlTGlzdDogJ29iamVjdCcsXG4gICAgcG9wcGVyQ29uZmlnOiAnKG51bGx8b2JqZWN0KSdcbiAgfTtcbiAgdmFyIEF0dGFjaG1lbnRNYXAgPSB7XG4gICAgQVVUTzogJ2F1dG8nLFxuICAgIFRPUDogJ3RvcCcsXG4gICAgUklHSFQ6ICdyaWdodCcsXG4gICAgQk9UVE9NOiAnYm90dG9tJyxcbiAgICBMRUZUOiAnbGVmdCdcbiAgfTtcbiAgdmFyIERlZmF1bHQkNCA9IHtcbiAgICBhbmltYXRpb246IHRydWUsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+JyArICc8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj4nICsgJzxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+JyxcbiAgICB0cmlnZ2VyOiAnaG92ZXIgZm9jdXMnLFxuICAgIHRpdGxlOiAnJyxcbiAgICBkZWxheTogMCxcbiAgICBodG1sOiBmYWxzZSxcbiAgICBzZWxlY3RvcjogZmFsc2UsXG4gICAgcGxhY2VtZW50OiAndG9wJyxcbiAgICBvZmZzZXQ6IDAsXG4gICAgY29udGFpbmVyOiBmYWxzZSxcbiAgICBmYWxsYmFja1BsYWNlbWVudDogJ2ZsaXAnLFxuICAgIGJvdW5kYXJ5OiAnc2Nyb2xsUGFyZW50JyxcbiAgICBzYW5pdGl6ZTogdHJ1ZSxcbiAgICBzYW5pdGl6ZUZuOiBudWxsLFxuICAgIHdoaXRlTGlzdDogRGVmYXVsdFdoaXRlbGlzdCxcbiAgICBwb3BwZXJDb25maWc6IG51bGxcbiAgfTtcbiAgdmFyIEhPVkVSX1NUQVRFX1NIT1cgPSAnc2hvdyc7XG4gIHZhciBIT1ZFUl9TVEFURV9PVVQgPSAnb3V0JztcbiAgdmFyIEV2ZW50ID0ge1xuICAgIEhJREU6IFwiaGlkZVwiICsgRVZFTlRfS0VZJDYsXG4gICAgSElEREVOOiBcImhpZGRlblwiICsgRVZFTlRfS0VZJDYsXG4gICAgU0hPVzogXCJzaG93XCIgKyBFVkVOVF9LRVkkNixcbiAgICBTSE9XTjogXCJzaG93blwiICsgRVZFTlRfS0VZJDYsXG4gICAgSU5TRVJURUQ6IFwiaW5zZXJ0ZWRcIiArIEVWRU5UX0tFWSQ2LFxuICAgIENMSUNLOiBcImNsaWNrXCIgKyBFVkVOVF9LRVkkNixcbiAgICBGT0NVU0lOOiBcImZvY3VzaW5cIiArIEVWRU5UX0tFWSQ2LFxuICAgIEZPQ1VTT1VUOiBcImZvY3Vzb3V0XCIgKyBFVkVOVF9LRVkkNixcbiAgICBNT1VTRUVOVEVSOiBcIm1vdXNlZW50ZXJcIiArIEVWRU5UX0tFWSQ2LFxuICAgIE1PVVNFTEVBVkU6IFwibW91c2VsZWF2ZVwiICsgRVZFTlRfS0VZJDZcbiAgfTtcbiAgdmFyIENMQVNTX05BTUVfRkFERSQyID0gJ2ZhZGUnO1xuICB2YXIgQ0xBU1NfTkFNRV9TSE9XJDQgPSAnc2hvdyc7XG4gIHZhciBTRUxFQ1RPUl9UT09MVElQX0lOTkVSID0gJy50b29sdGlwLWlubmVyJztcbiAgdmFyIFNFTEVDVE9SX0FSUk9XID0gJy5hcnJvdyc7XG4gIHZhciBUUklHR0VSX0hPVkVSID0gJ2hvdmVyJztcbiAgdmFyIFRSSUdHRVJfRk9DVVMgPSAnZm9jdXMnO1xuICB2YXIgVFJJR0dFUl9DTElDSyA9ICdjbGljayc7XG4gIHZhciBUUklHR0VSX01BTlVBTCA9ICdtYW51YWwnO1xuXG4gIHZhciBUb29sdGlwID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRvb2x0aXAoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICBpZiAodHlwZW9mIFBvcHBlcl9fZGVmYXVsdFsnZGVmYXVsdCddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb290c3RyYXBcXCdzIHRvb2x0aXBzIHJlcXVpcmUgUG9wcGVyLmpzIChodHRwczovL3BvcHBlci5qcy5vcmcvKScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fdGltZW91dCA9IDA7XG4gICAgICB0aGlzLl9ob3ZlclN0YXRlID0gJyc7XG4gICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyID0ge307XG4gICAgICB0aGlzLl9wb3BwZXIgPSBudWxsO1xuICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLnRpcCA9IG51bGw7XG5cbiAgICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBUb29sdGlwLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnRvZ2dsZUVuYWJsZWQgPSBmdW5jdGlvbiB0b2dnbGVFbmFibGVkKCkge1xuICAgICAgdGhpcy5faXNFbmFibGVkID0gIXRoaXMuX2lzRW5hYmxlZDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZShldmVudCkge1xuICAgICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZO1xuICAgICAgICB2YXIgY29udGV4dCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXkpO1xuXG4gICAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXIuY2xpY2sgPSAhY29udGV4dC5fYWN0aXZlVHJpZ2dlci5jbGljaztcblxuICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7XG4gICAgICAgICAgY29udGV4dC5fZW50ZXIobnVsbCwgY29udGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGV4dC5fbGVhdmUobnVsbCwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENMQVNTX05BTUVfU0hPVyQ0KSkge1xuICAgICAgICAgIHRoaXMuX2xlYXZlKG51bGwsIHRoaXMpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZW50ZXIobnVsbCwgdGhpcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWSk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5lbGVtZW50KS5vZmYodGhpcy5jb25zdHJ1Y3Rvci5FVkVOVF9LRVkpO1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub2ZmKCdoaWRlLmJzLm1vZGFsJywgdGhpcy5faGlkZU1vZGFsSGFuZGxlcik7XG5cbiAgICAgIGlmICh0aGlzLnRpcCkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy50aXApLnJlbW92ZSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pc0VuYWJsZWQgPSBudWxsO1xuICAgICAgdGhpcy5fdGltZW91dCA9IG51bGw7XG4gICAgICB0aGlzLl9ob3ZlclN0YXRlID0gbnVsbDtcbiAgICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXIgPSBudWxsO1xuXG4gICAgICBpZiAodGhpcy5fcG9wcGVyKSB7XG4gICAgICAgIHRoaXMuX3BvcHBlci5kZXN0cm95KCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3BvcHBlciA9IG51bGw7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5jb25maWcgPSBudWxsO1xuICAgICAgdGhpcy50aXAgPSBudWxsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuZWxlbWVudCkuY3NzKCdkaXNwbGF5JykgPT09ICdub25lJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSB1c2Ugc2hvdyBvbiB2aXNpYmxlIGVsZW1lbnRzJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93RXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTtcblxuICAgICAgaWYgKHRoaXMuaXNXaXRoQ29udGVudCgpICYmIHRoaXMuX2lzRW5hYmxlZCkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG4gICAgICAgIHZhciBzaGFkb3dSb290ID0gVXRpbC5maW5kU2hhZG93Um9vdCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB2YXIgaXNJblRoZURvbSA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5jb250YWlucyhzaGFkb3dSb290ICE9PSBudWxsID8gc2hhZG93Um9vdCA6IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy5lbGVtZW50KTtcblxuICAgICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8ICFpc0luVGhlRG9tKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpO1xuICAgICAgICB2YXIgdGlwSWQgPSBVdGlsLmdldFVJRCh0aGlzLmNvbnN0cnVjdG9yLk5BTUUpO1xuICAgICAgICB0aXAuc2V0QXR0cmlidXRlKCdpZCcsIHRpcElkKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRpcElkKTtcbiAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFuaW1hdGlvbikge1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aXApLmFkZENsYXNzKENMQVNTX05BTUVfRkFERSQyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwbGFjZW1lbnQgPSB0eXBlb2YgdGhpcy5jb25maWcucGxhY2VtZW50ID09PSAnZnVuY3Rpb24nID8gdGhpcy5jb25maWcucGxhY2VtZW50LmNhbGwodGhpcywgdGlwLCB0aGlzLmVsZW1lbnQpIDogdGhpcy5jb25maWcucGxhY2VtZW50O1xuXG4gICAgICAgIHZhciBhdHRhY2htZW50ID0gdGhpcy5fZ2V0QXR0YWNobWVudChwbGFjZW1lbnQpO1xuXG4gICAgICAgIHRoaXMuYWRkQXR0YWNobWVudENsYXNzKGF0dGFjaG1lbnQpO1xuXG4gICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9nZXRDb250YWluZXIoKTtcblxuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGlwKS5kYXRhKHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVksIHRoaXMpO1xuXG4gICAgICAgIGlmICghJF9fZGVmYXVsdFsnZGVmYXVsdCddLmNvbnRhaW5zKHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy50aXApKSB7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRpcCkuYXBwZW5kVG8oY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLmVsZW1lbnQpLnRyaWdnZXIodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5JTlNFUlRFRCk7XG4gICAgICAgIHRoaXMuX3BvcHBlciA9IG5ldyBQb3BwZXJfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLmVsZW1lbnQsIHRpcCwgdGhpcy5fZ2V0UG9wcGVyQ29uZmlnKGF0dGFjaG1lbnQpKTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRpcCkuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDQpO1xuXG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJywgbnVsbCwgJF9fZGVmYXVsdFsnZGVmYXVsdCddLm5vb3ApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgIF90aGlzLl9maXhUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHByZXZIb3ZlclN0YXRlID0gX3RoaXMuX2hvdmVyU3RhdGU7XG4gICAgICAgICAgX3RoaXMuX2hvdmVyU3RhdGUgPSBudWxsO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpcy5lbGVtZW50KS50cmlnZ2VyKF90aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1dOKTtcblxuICAgICAgICAgIGlmIChwcmV2SG92ZXJTdGF0ZSA9PT0gSE9WRVJfU1RBVEVfT1VUKSB7XG4gICAgICAgICAgICBfdGhpcy5fbGVhdmUobnVsbCwgX3RoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMudGlwKS5oYXNDbGFzcyhDTEFTU19OQU1FX0ZBREUkMikpIHtcbiAgICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLnRpcCk7XG4gICAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMudGlwKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uaGlkZSA9IGZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgdGlwID0gdGhpcy5nZXRUaXBFbGVtZW50KCk7XG4gICAgICB2YXIgaGlkZUV2ZW50ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLkV2ZW50KHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSElERSk7XG5cbiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICBpZiAoX3RoaXMyLl9ob3ZlclN0YXRlICE9PSBIT1ZFUl9TVEFURV9TSE9XICYmIHRpcC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgdGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGlwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi5fY2xlYW5UaXBDbGFzcygpO1xuXG4gICAgICAgIF90aGlzMi5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuXG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpczIuZWxlbWVudCkudHJpZ2dlcihfdGhpczIuY29uc3RydWN0b3IuRXZlbnQuSElEREVOKTtcblxuICAgICAgICBpZiAoX3RoaXMyLl9wb3BwZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBfdGhpczIuX3BvcHBlci5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGlwKS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX1NIT1ckNCk7XG5cbiAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGRvY3VtZW50LmJvZHkpLmNoaWxkcmVuKCkub2ZmKCdtb3VzZW92ZXInLCBudWxsLCAkX19kZWZhdWx0WydkZWZhdWx0J10ubm9vcCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXJbVFJJR0dFUl9DTElDS10gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXJbVFJJR0dFUl9GT0NVU10gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXJbVFJJR0dFUl9IT1ZFUl0gPSBmYWxzZTtcblxuICAgICAgaWYgKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLnRpcCkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9GQURFJDIpKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRpcCk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSAnJztcbiAgICB9O1xuXG4gICAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIGlmICh0aGlzLl9wb3BwZXIgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5pc1dpdGhDb250ZW50ID0gZnVuY3Rpb24gaXNXaXRoQ29udGVudCgpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuZ2V0VGl0bGUoKSk7XG4gICAgfTtcblxuICAgIF9wcm90by5hZGRBdHRhY2htZW50Q2xhc3MgPSBmdW5jdGlvbiBhZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudCkge1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhDTEFTU19QUkVGSVggKyBcIi1cIiArIGF0dGFjaG1lbnQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZ2V0VGlwRWxlbWVudCA9IGZ1bmN0aW9uIGdldFRpcEVsZW1lbnQoKSB7XG4gICAgICB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSlbMF07XG4gICAgICByZXR1cm4gdGhpcy50aXA7XG4gICAgfTtcblxuICAgIF9wcm90by5zZXRDb250ZW50ID0gZnVuY3Rpb24gc2V0Q29udGVudCgpIHtcbiAgICAgIHZhciB0aXAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKTtcbiAgICAgIHRoaXMuc2V0RWxlbWVudENvbnRlbnQoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRpcC5xdWVyeVNlbGVjdG9yQWxsKFNFTEVDVE9SX1RPT0xUSVBfSU5ORVIpKSwgdGhpcy5nZXRUaXRsZSgpKTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aXApLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfRkFERSQyICsgXCIgXCIgKyBDTEFTU19OQU1FX1NIT1ckNCk7XG4gICAgfTtcblxuICAgIF9wcm90by5zZXRFbGVtZW50Q29udGVudCA9IGZ1bmN0aW9uIHNldEVsZW1lbnRDb250ZW50KCRlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdvYmplY3QnICYmIChjb250ZW50Lm5vZGVUeXBlIHx8IGNvbnRlbnQuanF1ZXJ5KSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcuaHRtbCkge1xuICAgICAgICAgIGlmICghJF9fZGVmYXVsdFsnZGVmYXVsdCddKGNvbnRlbnQpLnBhcmVudCgpLmlzKCRlbGVtZW50KSkge1xuICAgICAgICAgICAgJGVsZW1lbnQuZW1wdHkoKS5hcHBlbmQoY29udGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRlbGVtZW50LnRleHQoJF9fZGVmYXVsdFsnZGVmYXVsdCddKGNvbnRlbnQpLnRleHQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5odG1sKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zYW5pdGl6ZSkge1xuICAgICAgICAgIGNvbnRlbnQgPSBzYW5pdGl6ZUh0bWwoY29udGVudCwgdGhpcy5jb25maWcud2hpdGVMaXN0LCB0aGlzLmNvbmZpZy5zYW5pdGl6ZUZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRlbGVtZW50Lmh0bWwoY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkZWxlbWVudC50ZXh0KGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uZ2V0VGl0bGUgPSBmdW5jdGlvbiBnZXRUaXRsZSgpIHtcbiAgICAgIHZhciB0aXRsZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKTtcblxuICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICB0aXRsZSA9IHR5cGVvZiB0aGlzLmNvbmZpZy50aXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuY29uZmlnLnRpdGxlLmNhbGwodGhpcy5lbGVtZW50KSA6IHRoaXMuY29uZmlnLnRpdGxlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGl0bGU7XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0UG9wcGVyQ29uZmlnID0gZnVuY3Rpb24gX2dldFBvcHBlckNvbmZpZyhhdHRhY2htZW50KSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGRlZmF1bHRCc0NvbmZpZyA9IHtcbiAgICAgICAgcGxhY2VtZW50OiBhdHRhY2htZW50LFxuICAgICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgICBvZmZzZXQ6IHRoaXMuX2dldE9mZnNldCgpLFxuICAgICAgICAgIGZsaXA6IHtcbiAgICAgICAgICAgIGJlaGF2aW9yOiB0aGlzLmNvbmZpZy5mYWxsYmFja1BsYWNlbWVudFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJyb3c6IHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IFNFTEVDVE9SX0FSUk9XXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcmV2ZW50T3ZlcmZsb3c6IHtcbiAgICAgICAgICAgIGJvdW5kYXJpZXNFbGVtZW50OiB0aGlzLmNvbmZpZy5ib3VuZGFyeVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25DcmVhdGU6IGZ1bmN0aW9uIG9uQ3JlYXRlKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5vcmlnaW5hbFBsYWNlbWVudCAhPT0gZGF0YS5wbGFjZW1lbnQpIHtcbiAgICAgICAgICAgIF90aGlzMy5faGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlKGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKGRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMzLl9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIGRlZmF1bHRCc0NvbmZpZywgdGhpcy5jb25maWcucG9wcGVyQ29uZmlnKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRPZmZzZXQgPSBmdW5jdGlvbiBfZ2V0T2Zmc2V0KCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBvZmZzZXQgPSB7fTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5vZmZzZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb2Zmc2V0LmZuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBkYXRhLm9mZnNldHMgPSBfZXh0ZW5kcyh7fSwgZGF0YS5vZmZzZXRzLCBfdGhpczQuY29uZmlnLm9mZnNldChkYXRhLm9mZnNldHMsIF90aGlzNC5lbGVtZW50KSB8fCB7fSk7XG4gICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvZmZzZXQub2Zmc2V0ID0gdGhpcy5jb25maWcub2Zmc2V0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldENvbnRhaW5lciA9IGZ1bmN0aW9uIF9nZXRDb250YWluZXIoKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuY29udGFpbmVyID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keTtcbiAgICAgIH1cblxuICAgICAgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuY29uZmlnLmNvbnRhaW5lcikpIHtcbiAgICAgICAgcmV0dXJuICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLmNvbmZpZy5jb250YWluZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJF9fZGVmYXVsdFsnZGVmYXVsdCddKGRvY3VtZW50KS5maW5kKHRoaXMuY29uZmlnLmNvbnRhaW5lcik7XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0QXR0YWNobWVudCA9IGZ1bmN0aW9uIF9nZXRBdHRhY2htZW50KHBsYWNlbWVudCkge1xuICAgICAgcmV0dXJuIEF0dGFjaG1lbnRNYXBbcGxhY2VtZW50LnRvVXBwZXJDYXNlKCldO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX3NldExpc3RlbmVycyA9IGZ1bmN0aW9uIF9zZXRMaXN0ZW5lcnMoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdmFyIHRyaWdnZXJzID0gdGhpcy5jb25maWcudHJpZ2dlci5zcGxpdCgnICcpO1xuICAgICAgdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICBpZiAodHJpZ2dlciA9PT0gJ2NsaWNrJykge1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpczUuZWxlbWVudCkub24oX3RoaXM1LmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLCBfdGhpczUuY29uZmlnLnNlbGVjdG9yLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczUudG9nZ2xlKGV2ZW50KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyICE9PSBUUklHR0VSX01BTlVBTCkge1xuICAgICAgICAgIHZhciBldmVudEluID0gdHJpZ2dlciA9PT0gVFJJR0dFUl9IT1ZFUiA/IF90aGlzNS5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUVOVEVSIDogX3RoaXM1LmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTSU47XG4gICAgICAgICAgdmFyIGV2ZW50T3V0ID0gdHJpZ2dlciA9PT0gVFJJR0dFUl9IT1ZFUiA/IF90aGlzNS5jb25zdHJ1Y3Rvci5FdmVudC5NT1VTRUxFQVZFIDogX3RoaXM1LmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTT1VUO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShfdGhpczUuZWxlbWVudCkub24oZXZlbnRJbiwgX3RoaXM1LmNvbmZpZy5zZWxlY3RvciwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM1Ll9lbnRlcihldmVudCk7XG4gICAgICAgICAgfSkub24oZXZlbnRPdXQsIF90aGlzNS5jb25maWcuc2VsZWN0b3IsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5fbGVhdmUoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5faGlkZU1vZGFsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzNS5lbGVtZW50KSB7XG4gICAgICAgICAgX3RoaXM1LmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub24oJ2hpZGUuYnMubW9kYWwnLCB0aGlzLl9oaWRlTW9kYWxIYW5kbGVyKTtcblxuICAgICAgaWYgKHRoaXMuY29uZmlnLnNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gX2V4dGVuZHMoe30sIHRoaXMuY29uZmlnLCB7XG4gICAgICAgICAgdHJpZ2dlcjogJ21hbnVhbCcsXG4gICAgICAgICAgc2VsZWN0b3I6ICcnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZml4VGl0bGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9maXhUaXRsZSA9IGZ1bmN0aW9uIF9maXhUaXRsZSgpIHtcbiAgICAgIHZhciB0aXRsZVR5cGUgPSB0eXBlb2YgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScpO1xuXG4gICAgICBpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCB0aXRsZVR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnLCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8ICcnKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fZW50ZXIgPSBmdW5jdGlvbiBfZW50ZXIoZXZlbnQsIGNvbnRleHQpIHtcbiAgICAgIHZhciBkYXRhS2V5ID0gdGhpcy5jb25zdHJ1Y3Rvci5EQVRBX0tFWTtcbiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXkpO1xuXG4gICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5LCBjb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZSA9PT0gJ2ZvY3VzaW4nID8gVFJJR0dFUl9GT0NVUyA6IFRSSUdHRVJfSE9WRVJdID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCRfX2RlZmF1bHRbJ2RlZmF1bHQnXShjb250ZXh0LmdldFRpcEVsZW1lbnQoKSkuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9TSE9XJDQpIHx8IGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhPVkVSX1NUQVRFX1NIT1cpIHtcbiAgICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhPVkVSX1NUQVRFX1NIT1c7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY2xlYXJUaW1lb3V0KGNvbnRleHQuX3RpbWVvdXQpO1xuICAgICAgY29udGV4dC5faG92ZXJTdGF0ZSA9IEhPVkVSX1NUQVRFX1NIT1c7XG5cbiAgICAgIGlmICghY29udGV4dC5jb25maWcuZGVsYXkgfHwgIWNvbnRleHQuY29uZmlnLmRlbGF5LnNob3cpIHtcbiAgICAgICAgY29udGV4dC5zaG93KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29udGV4dC5faG92ZXJTdGF0ZSA9PT0gSE9WRVJfU1RBVEVfU0hPVykge1xuICAgICAgICAgIGNvbnRleHQuc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9sZWF2ZSA9IGZ1bmN0aW9uIF9sZWF2ZShldmVudCwgY29udGV4dCkge1xuICAgICAgdmFyIGRhdGFLZXkgPSB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZO1xuICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgJF9fZGVmYXVsdFsnZGVmYXVsdCddKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7XG5cbiAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICBjb250ZXh0ID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZXZlbnQuY3VycmVudFRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlcltldmVudC50eXBlID09PSAnZm9jdXNvdXQnID8gVFJJR0dFUl9GT0NVUyA6IFRSSUdHRVJfSE9WRVJdID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250ZXh0Ll9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjbGVhclRpbWVvdXQoY29udGV4dC5fdGltZW91dCk7XG4gICAgICBjb250ZXh0Ll9ob3ZlclN0YXRlID0gSE9WRVJfU1RBVEVfT1VUO1xuXG4gICAgICBpZiAoIWNvbnRleHQuY29uZmlnLmRlbGF5IHx8ICFjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKSB7XG4gICAgICAgIGNvbnRleHQuaGlkZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhPVkVSX1NUQVRFX09VVCkge1xuICAgICAgICAgIGNvbnRleHQuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5oaWRlKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9pc1dpdGhBY3RpdmVUcmlnZ2VyID0gZnVuY3Rpb24gX2lzV2l0aEFjdGl2ZVRyaWdnZXIoKSB7XG4gICAgICBmb3IgKHZhciB0cmlnZ2VyIGluIHRoaXMuX2FjdGl2ZVRyaWdnZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRyaWdnZXJbdHJpZ2dlcl0pIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIHZhciBkYXRhQXR0cmlidXRlcyA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLmVsZW1lbnQpLmRhdGEoKTtcbiAgICAgIE9iamVjdC5rZXlzKGRhdGFBdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhQXR0cikge1xuICAgICAgICBpZiAoRElTQUxMT1dFRF9BVFRSSUJVVEVTLmluZGV4T2YoZGF0YUF0dHIpICE9PSAtMSkge1xuICAgICAgICAgIGRlbGV0ZSBkYXRhQXR0cmlidXRlc1tkYXRhQXR0cl07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uZmlnID0gX2V4dGVuZHMoe30sIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCwgZGF0YUF0dHJpYnV0ZXMsIHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyA/IGNvbmZpZyA6IHt9KTtcblxuICAgICAgaWYgKHR5cGVvZiBjb25maWcuZGVsYXkgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmZpZy5kZWxheSA9IHtcbiAgICAgICAgICBzaG93OiBjb25maWcuZGVsYXksXG4gICAgICAgICAgaGlkZTogY29uZmlnLmRlbGF5XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnLnRpdGxlID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25maWcudGl0bGUgPSBjb25maWcudGl0bGUudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBjb25maWcuY29udGVudCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uZmlnLmNvbnRlbnQgPSBjb25maWcuY29udGVudC50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FJDYsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7XG5cbiAgICAgIGlmIChjb25maWcuc2FuaXRpemUpIHtcbiAgICAgICAgY29uZmlnLnRlbXBsYXRlID0gc2FuaXRpemVIdG1sKGNvbmZpZy50ZW1wbGF0ZSwgY29uZmlnLndoaXRlTGlzdCwgY29uZmlnLnNhbml0aXplRm4pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldERlbGVnYXRlQ29uZmlnID0gZnVuY3Rpb24gX2dldERlbGVnYXRlQ29uZmlnKCkge1xuICAgICAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gICAgICBpZiAodGhpcy5jb25maWcpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY29uZmlnKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtrZXldICE9PSB0aGlzLmNvbmZpZ1trZXldKSB7XG4gICAgICAgICAgICBjb25maWdba2V5XSA9IHRoaXMuY29uZmlnW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfTtcblxuICAgIF9wcm90by5fY2xlYW5UaXBDbGFzcyA9IGZ1bmN0aW9uIF9jbGVhblRpcENsYXNzKCkge1xuICAgICAgdmFyICR0aXAgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5nZXRUaXBFbGVtZW50KCkpO1xuICAgICAgdmFyIHRhYkNsYXNzID0gJHRpcC5hdHRyKCdjbGFzcycpLm1hdGNoKEJTQ0xTX1BSRUZJWF9SRUdFWCk7XG5cbiAgICAgIGlmICh0YWJDbGFzcyAhPT0gbnVsbCAmJiB0YWJDbGFzcy5sZW5ndGgpIHtcbiAgICAgICAgJHRpcC5yZW1vdmVDbGFzcyh0YWJDbGFzcy5qb2luKCcnKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5faGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlID0gZnVuY3Rpb24gX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShwb3BwZXJEYXRhKSB7XG4gICAgICB0aGlzLnRpcCA9IHBvcHBlckRhdGEuaW5zdGFuY2UucG9wcGVyO1xuXG4gICAgICB0aGlzLl9jbGVhblRpcENsYXNzKCk7XG5cbiAgICAgIHRoaXMuYWRkQXR0YWNobWVudENsYXNzKHRoaXMuX2dldEF0dGFjaG1lbnQocG9wcGVyRGF0YS5wbGFjZW1lbnQpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9maXhUcmFuc2l0aW9uID0gZnVuY3Rpb24gX2ZpeFRyYW5zaXRpb24oKSB7XG4gICAgICB2YXIgdGlwID0gdGhpcy5nZXRUaXBFbGVtZW50KCk7XG4gICAgICB2YXIgaW5pdENvbmZpZ0FuaW1hdGlvbiA9IHRoaXMuY29uZmlnLmFuaW1hdGlvbjtcblxuICAgICAgaWYgKHRpcC5nZXRBdHRyaWJ1dGUoJ3gtcGxhY2VtZW50JykgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGlwKS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX0ZBREUkMik7XG4gICAgICB0aGlzLmNvbmZpZy5hbmltYXRpb24gPSBmYWxzZTtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB0aGlzLmNvbmZpZy5hbmltYXRpb24gPSBpbml0Q29uZmlnQW5pbWF0aW9uO1xuICAgIH07XG5cbiAgICBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzKTtcbiAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZJDYpO1xuXG4gICAgICAgIHZhciBfY29uZmlnID0gdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgJiYgY29uZmlnO1xuXG4gICAgICAgIGlmICghZGF0YSAmJiAvZGlzcG9zZXxoaWRlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgX2NvbmZpZyk7XG4gICAgICAgICAgJGVsZW1lbnQuZGF0YShEQVRBX0tFWSQ2LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIG1ldGhvZCBuYW1lZCBcXFwiXCIgKyBjb25maWcgKyBcIlxcXCJcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoVG9vbHRpcCwgbnVsbCwgW3tcbiAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT04kNjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0JDQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIk5BTUVcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTkFNRSQ2O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEQVRBX0tFWVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEQVRBX0tFWSQ2O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJFdmVudFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBFdmVudDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRVZFTlRfS0VZXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIEVWRU5UX0tFWSQ2O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEZWZhdWx0VHlwZVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0VHlwZSQ0O1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUb29sdGlwO1xuICB9KCk7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkNl0gPSBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2U7XG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDZdLkNvbnN0cnVjdG9yID0gVG9vbHRpcDtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ2XS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDZdID0gSlFVRVJZX05PX0NPTkZMSUNUJDY7XG4gICAgcmV0dXJuIFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZTtcbiAgfTtcblxuICB2YXIgTkFNRSQ3ID0gJ3BvcG92ZXInO1xuICB2YXIgVkVSU0lPTiQ3ID0gJzQuNS4zJztcbiAgdmFyIERBVEFfS0VZJDcgPSAnYnMucG9wb3Zlcic7XG4gIHZhciBFVkVOVF9LRVkkNyA9IFwiLlwiICsgREFUQV9LRVkkNztcbiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCQ3ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkN107XG4gIHZhciBDTEFTU19QUkVGSVgkMSA9ICdicy1wb3BvdmVyJztcbiAgdmFyIEJTQ0xTX1BSRUZJWF9SRUdFWCQxID0gbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgQ0xBU1NfUFJFRklYJDEgKyBcIlxcXFxTK1wiLCAnZycpO1xuXG4gIHZhciBEZWZhdWx0JDUgPSBfZXh0ZW5kcyh7fSwgVG9vbHRpcC5EZWZhdWx0LCB7XG4gICAgcGxhY2VtZW50OiAncmlnaHQnLFxuICAgIHRyaWdnZXI6ICdjbGljaycsXG4gICAgY29udGVudDogJycsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+JyArICc8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj4nICsgJzxoMyBjbGFzcz1cInBvcG92ZXItaGVhZGVyXCI+PC9oMz4nICsgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWJvZHlcIj48L2Rpdj48L2Rpdj4nXG4gIH0pO1xuXG4gIHZhciBEZWZhdWx0VHlwZSQ1ID0gX2V4dGVuZHMoe30sIFRvb2x0aXAuRGVmYXVsdFR5cGUsIHtcbiAgICBjb250ZW50OiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKSdcbiAgfSk7XG5cbiAgdmFyIENMQVNTX05BTUVfRkFERSQzID0gJ2ZhZGUnO1xuICB2YXIgQ0xBU1NfTkFNRV9TSE9XJDUgPSAnc2hvdyc7XG4gIHZhciBTRUxFQ1RPUl9USVRMRSA9ICcucG9wb3Zlci1oZWFkZXInO1xuICB2YXIgU0VMRUNUT1JfQ09OVEVOVCA9ICcucG9wb3Zlci1ib2R5JztcbiAgdmFyIEV2ZW50JDEgPSB7XG4gICAgSElERTogXCJoaWRlXCIgKyBFVkVOVF9LRVkkNyxcbiAgICBISURERU46IFwiaGlkZGVuXCIgKyBFVkVOVF9LRVkkNyxcbiAgICBTSE9XOiBcInNob3dcIiArIEVWRU5UX0tFWSQ3LFxuICAgIFNIT1dOOiBcInNob3duXCIgKyBFVkVOVF9LRVkkNyxcbiAgICBJTlNFUlRFRDogXCJpbnNlcnRlZFwiICsgRVZFTlRfS0VZJDcsXG4gICAgQ0xJQ0s6IFwiY2xpY2tcIiArIEVWRU5UX0tFWSQ3LFxuICAgIEZPQ1VTSU46IFwiZm9jdXNpblwiICsgRVZFTlRfS0VZJDcsXG4gICAgRk9DVVNPVVQ6IFwiZm9jdXNvdXRcIiArIEVWRU5UX0tFWSQ3LFxuICAgIE1PVVNFRU5URVI6IFwibW91c2VlbnRlclwiICsgRVZFTlRfS0VZJDcsXG4gICAgTU9VU0VMRUFWRTogXCJtb3VzZWxlYXZlXCIgKyBFVkVOVF9LRVkkN1xuICB9O1xuXG4gIHZhciBQb3BvdmVyID0gZnVuY3Rpb24gKF9Ub29sdGlwKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUG9wb3ZlciwgX1Rvb2x0aXApO1xuXG4gICAgZnVuY3Rpb24gUG9wb3ZlcigpIHtcbiAgICAgIHJldHVybiBfVG9vbHRpcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IFBvcG92ZXIucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmlzV2l0aENvbnRlbnQgPSBmdW5jdGlvbiBpc1dpdGhDb250ZW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VGl0bGUoKSB8fCB0aGlzLl9nZXRDb250ZW50KCk7XG4gICAgfTtcblxuICAgIF9wcm90by5hZGRBdHRhY2htZW50Q2xhc3MgPSBmdW5jdGlvbiBhZGRBdHRhY2htZW50Q2xhc3MoYXR0YWNobWVudCkge1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5hZGRDbGFzcyhDTEFTU19QUkVGSVgkMSArIFwiLVwiICsgYXR0YWNobWVudCk7XG4gICAgfTtcblxuICAgIF9wcm90by5nZXRUaXBFbGVtZW50ID0gZnVuY3Rpb24gZ2V0VGlwRWxlbWVudCgpIHtcbiAgICAgIHRoaXMudGlwID0gdGhpcy50aXAgfHwgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuY29uZmlnLnRlbXBsYXRlKVswXTtcbiAgICAgIHJldHVybiB0aGlzLnRpcDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnNldENvbnRlbnQgPSBmdW5jdGlvbiBzZXRDb250ZW50KCkge1xuICAgICAgdmFyICR0aXAgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5nZXRUaXBFbGVtZW50KCkpO1xuICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU0VMRUNUT1JfVElUTEUpLCB0aGlzLmdldFRpdGxlKCkpO1xuXG4gICAgICB2YXIgY29udGVudCA9IHRoaXMuX2dldENvbnRlbnQoKTtcblxuICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmNhbGwodGhpcy5lbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU0VMRUNUT1JfQ09OVEVOVCksIGNvbnRlbnQpO1xuICAgICAgJHRpcC5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX0ZBREUkMyArIFwiIFwiICsgQ0xBU1NfTkFNRV9TSE9XJDUpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldENvbnRlbnQgPSBmdW5jdGlvbiBfZ2V0Q29udGVudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKSB8fCB0aGlzLmNvbmZpZy5jb250ZW50O1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2NsZWFuVGlwQ2xhc3MgPSBmdW5jdGlvbiBfY2xlYW5UaXBDbGFzcygpIHtcbiAgICAgIHZhciAkdGlwID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTtcbiAgICAgIHZhciB0YWJDbGFzcyA9ICR0aXAuYXR0cignY2xhc3MnKS5tYXRjaChCU0NMU19QUkVGSVhfUkVHRVgkMSk7XG5cbiAgICAgIGlmICh0YWJDbGFzcyAhPT0gbnVsbCAmJiB0YWJDbGFzcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICR0aXAucmVtb3ZlQ2xhc3ModGFiQ2xhc3Muam9pbignJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYXRhID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLmRhdGEoREFUQV9LRVkkNyk7XG5cbiAgICAgICAgdmFyIF9jb25maWcgPSB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGw7XG5cbiAgICAgICAgaWYgKCFkYXRhICYmIC9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSBuZXcgUG9wb3Zlcih0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcykuZGF0YShEQVRBX0tFWSQ3LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIG1ldGhvZCBuYW1lZCBcXFwiXCIgKyBjb25maWcgKyBcIlxcXCJcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoUG9wb3ZlciwgbnVsbCwgW3tcbiAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT04kNztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0JDU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIk5BTUVcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gTkFNRSQ3O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEQVRBX0tFWVwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEQVRBX0tFWSQ3O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJFdmVudFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBFdmVudCQxO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJFVkVOVF9LRVlcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRVZFTlRfS0VZJDc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIkRlZmF1bHRUeXBlXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHRUeXBlJDU7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFBvcG92ZXI7XG4gIH0oVG9vbHRpcCk7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkN10gPSBQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2U7XG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDddLkNvbnN0cnVjdG9yID0gUG9wb3ZlcjtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ3XS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDddID0gSlFVRVJZX05PX0NPTkZMSUNUJDc7XG4gICAgcmV0dXJuIFBvcG92ZXIuX2pRdWVyeUludGVyZmFjZTtcbiAgfTtcblxuICB2YXIgTkFNRSQ4ID0gJ3Njcm9sbHNweSc7XG4gIHZhciBWRVJTSU9OJDggPSAnNC41LjMnO1xuICB2YXIgREFUQV9LRVkkOCA9ICdicy5zY3JvbGxzcHknO1xuICB2YXIgRVZFTlRfS0VZJDggPSBcIi5cIiArIERBVEFfS0VZJDg7XG4gIHZhciBEQVRBX0FQSV9LRVkkNiA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDggPSAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ4XTtcbiAgdmFyIERlZmF1bHQkNiA9IHtcbiAgICBvZmZzZXQ6IDEwLFxuICAgIG1ldGhvZDogJ2F1dG8nLFxuICAgIHRhcmdldDogJydcbiAgfTtcbiAgdmFyIERlZmF1bHRUeXBlJDYgPSB7XG4gICAgb2Zmc2V0OiAnbnVtYmVyJyxcbiAgICBtZXRob2Q6ICdzdHJpbmcnLFxuICAgIHRhcmdldDogJyhzdHJpbmd8ZWxlbWVudCknXG4gIH07XG4gIHZhciBFVkVOVF9BQ1RJVkFURSA9IFwiYWN0aXZhdGVcIiArIEVWRU5UX0tFWSQ4O1xuICB2YXIgRVZFTlRfU0NST0xMID0gXCJzY3JvbGxcIiArIEVWRU5UX0tFWSQ4O1xuICB2YXIgRVZFTlRfTE9BRF9EQVRBX0FQSSQyID0gXCJsb2FkXCIgKyBFVkVOVF9LRVkkOCArIERBVEFfQVBJX0tFWSQ2O1xuICB2YXIgQ0xBU1NfTkFNRV9EUk9QRE9XTl9JVEVNID0gJ2Ryb3Bkb3duLWl0ZW0nO1xuICB2YXIgQ0xBU1NfTkFNRV9BQ1RJVkUkMiA9ICdhY3RpdmUnO1xuICB2YXIgU0VMRUNUT1JfREFUQV9TUFkgPSAnW2RhdGEtc3B5PVwic2Nyb2xsXCJdJztcbiAgdmFyIFNFTEVDVE9SX05BVl9MSVNUX0dST1VQID0gJy5uYXYsIC5saXN0LWdyb3VwJztcbiAgdmFyIFNFTEVDVE9SX05BVl9MSU5LUyA9ICcubmF2LWxpbmsnO1xuICB2YXIgU0VMRUNUT1JfTkFWX0lURU1TID0gJy5uYXYtaXRlbSc7XG4gIHZhciBTRUxFQ1RPUl9MSVNUX0lURU1TID0gJy5saXN0LWdyb3VwLWl0ZW0nO1xuICB2YXIgU0VMRUNUT1JfRFJPUERPV04gPSAnLmRyb3Bkb3duJztcbiAgdmFyIFNFTEVDVE9SX0RST1BET1dOX0lURU1TID0gJy5kcm9wZG93bi1pdGVtJztcbiAgdmFyIFNFTEVDVE9SX0RST1BET1dOX1RPR0dMRSA9ICcuZHJvcGRvd24tdG9nZ2xlJztcbiAgdmFyIE1FVEhPRF9PRkZTRVQgPSAnb2Zmc2V0JztcbiAgdmFyIE1FVEhPRF9QT1NJVElPTiA9ICdwb3NpdGlvbic7XG5cbiAgdmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMuX3Njcm9sbEVsZW1lbnQgPSBlbGVtZW50LnRhZ05hbWUgPT09ICdCT0RZJyA/IHdpbmRvdyA6IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgIHRoaXMuX3NlbGVjdG9yID0gdGhpcy5fY29uZmlnLnRhcmdldCArIFwiIFwiICsgU0VMRUNUT1JfTkFWX0xJTktTICsgXCIsXCIgKyAodGhpcy5fY29uZmlnLnRhcmdldCArIFwiIFwiICsgU0VMRUNUT1JfTElTVF9JVEVNUyArIFwiLFwiKSArICh0aGlzLl9jb25maWcudGFyZ2V0ICsgXCIgXCIgKyBTRUxFQ1RPUl9EUk9QRE9XTl9JVEVNUyk7XG4gICAgICB0aGlzLl9vZmZzZXRzID0gW107XG4gICAgICB0aGlzLl90YXJnZXRzID0gW107XG4gICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gMDtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9zY3JvbGxFbGVtZW50KS5vbihFVkVOVF9TQ1JPTEwsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuX3Byb2Nlc3MoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcblxuICAgICAgdGhpcy5fcHJvY2VzcygpO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBTY3JvbGxTcHkucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnJlZnJlc2ggPSBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBhdXRvTWV0aG9kID0gdGhpcy5fc2Nyb2xsRWxlbWVudCA9PT0gdGhpcy5fc2Nyb2xsRWxlbWVudC53aW5kb3cgPyBNRVRIT0RfT0ZGU0VUIDogTUVUSE9EX1BPU0lUSU9OO1xuICAgICAgdmFyIG9mZnNldE1ldGhvZCA9IHRoaXMuX2NvbmZpZy5tZXRob2QgPT09ICdhdXRvJyA/IGF1dG9NZXRob2QgOiB0aGlzLl9jb25maWcubWV0aG9kO1xuICAgICAgdmFyIG9mZnNldEJhc2UgPSBvZmZzZXRNZXRob2QgPT09IE1FVEhPRF9QT1NJVElPTiA/IHRoaXMuX2dldFNjcm9sbFRvcCgpIDogMDtcbiAgICAgIHRoaXMuX29mZnNldHMgPSBbXTtcbiAgICAgIHRoaXMuX3RhcmdldHMgPSBbXTtcbiAgICAgIHRoaXMuX3Njcm9sbEhlaWdodCA9IHRoaXMuX2dldFNjcm9sbEhlaWdodCgpO1xuICAgICAgdmFyIHRhcmdldHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3IpKTtcbiAgICAgIHRhcmdldHMubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgIHZhciB0YXJnZXRTZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTtcblxuICAgICAgICBpZiAodGFyZ2V0U2VsZWN0b3IpIHtcbiAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICB2YXIgdGFyZ2V0QkNSID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgaWYgKHRhcmdldEJDUi53aWR0aCB8fCB0YXJnZXRCQ1IuaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gWyRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0YXJnZXQpW29mZnNldE1ldGhvZF0oKS50b3AgKyBvZmZzZXRCYXNlLCB0YXJnZXRTZWxlY3Rvcl07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhWzBdIC0gYlswXTtcbiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgX3RoaXMyLl9vZmZzZXRzLnB1c2goaXRlbVswXSk7XG5cbiAgICAgICAgX3RoaXMyLl90YXJnZXRzLnB1c2goaXRlbVsxXSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkkOCk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fc2Nyb2xsRWxlbWVudCkub2ZmKEVWRU5UX0tFWSQ4KTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLl9jb25maWcgPSBudWxsO1xuICAgICAgdGhpcy5fc2VsZWN0b3IgPSBudWxsO1xuICAgICAgdGhpcy5fb2Zmc2V0cyA9IG51bGw7XG4gICAgICB0aGlzLl90YXJnZXRzID0gbnVsbDtcbiAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7XG4gICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSBudWxsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSBfZXh0ZW5kcyh7fSwgRGVmYXVsdCQ2LCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcgPyBjb25maWcgOiB7fSk7XG5cbiAgICAgIGlmICh0eXBlb2YgY29uZmlnLnRhcmdldCAhPT0gJ3N0cmluZycgJiYgVXRpbC5pc0VsZW1lbnQoY29uZmlnLnRhcmdldCkpIHtcbiAgICAgICAgdmFyIGlkID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKGNvbmZpZy50YXJnZXQpLmF0dHIoJ2lkJyk7XG5cbiAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgIGlkID0gVXRpbC5nZXRVSUQoTkFNRSQ4KTtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oY29uZmlnLnRhcmdldCkuYXR0cignaWQnLCBpZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25maWcudGFyZ2V0ID0gXCIjXCIgKyBpZDtcbiAgICAgIH1cblxuICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSQ4LCBjb25maWcsIERlZmF1bHRUeXBlJDYpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRTY3JvbGxUb3AgPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsVG9wKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHdpbmRvdyA/IHRoaXMuX3Njcm9sbEVsZW1lbnQucGFnZVlPZmZzZXQgOiB0aGlzLl9zY3JvbGxFbGVtZW50LnNjcm9sbFRvcDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiBfZ2V0U2Nyb2xsSGVpZ2h0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IHx8IE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRPZmZzZXRIZWlnaHQgPSBmdW5jdGlvbiBfZ2V0T2Zmc2V0SGVpZ2h0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHdpbmRvdyA/IHdpbmRvdy5pbm5lckhlaWdodCA6IHRoaXMuX3Njcm9sbEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIH07XG5cbiAgICBfcHJvdG8uX3Byb2Nlc3MgPSBmdW5jdGlvbiBfcHJvY2VzcygpIHtcbiAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLl9nZXRTY3JvbGxUb3AoKSArIHRoaXMuX2NvbmZpZy5vZmZzZXQ7XG5cbiAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSB0aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTtcblxuICAgICAgdmFyIG1heFNjcm9sbCA9IHRoaXMuX2NvbmZpZy5vZmZzZXQgKyBzY3JvbGxIZWlnaHQgLSB0aGlzLl9nZXRPZmZzZXRIZWlnaHQoKTtcblxuICAgICAgaWYgKHRoaXMuX3Njcm9sbEhlaWdodCAhPT0gc2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2Nyb2xsVG9wID49IG1heFNjcm9sbCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0c1t0aGlzLl90YXJnZXRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgIT09IHRhcmdldCkge1xuICAgICAgICAgIHRoaXMuX2FjdGl2YXRlKHRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgdGhpcy5fb2Zmc2V0c1swXSAmJiB0aGlzLl9vZmZzZXRzWzBdID4gMCkge1xuICAgICAgICB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2NsZWFyKCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy5fb2Zmc2V0cy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgdmFyIGlzQWN0aXZlVGFyZ2V0ID0gdGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0aGlzLl90YXJnZXRzW2ldICYmIHNjcm9sbFRvcCA+PSB0aGlzLl9vZmZzZXRzW2ldICYmICh0eXBlb2YgdGhpcy5fb2Zmc2V0c1tpICsgMV0gPT09ICd1bmRlZmluZWQnIHx8IHNjcm9sbFRvcCA8IHRoaXMuX29mZnNldHNbaSArIDFdKTtcblxuICAgICAgICBpZiAoaXNBY3RpdmVUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0aGlzLl90YXJnZXRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX2FjdGl2YXRlID0gZnVuY3Rpb24gX2FjdGl2YXRlKHRhcmdldCkge1xuICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgICB0aGlzLl9jbGVhcigpO1xuXG4gICAgICB2YXIgcXVlcmllcyA9IHRoaXMuX3NlbGVjdG9yLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gc2VsZWN0b3IgKyBcIltkYXRhLXRhcmdldD1cXFwiXCIgKyB0YXJnZXQgKyBcIlxcXCJdLFwiICsgc2VsZWN0b3IgKyBcIltocmVmPVxcXCJcIiArIHRhcmdldCArIFwiXFxcIl1cIjtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgJGxpbmsgPSAkX19kZWZhdWx0WydkZWZhdWx0J10oW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJpZXMuam9pbignLCcpKSkpO1xuXG4gICAgICBpZiAoJGxpbmsuaGFzQ2xhc3MoQ0xBU1NfTkFNRV9EUk9QRE9XTl9JVEVNKSkge1xuICAgICAgICAkbGluay5jbG9zZXN0KFNFTEVDVE9SX0RST1BET1dOKS5maW5kKFNFTEVDVE9SX0RST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9BQ1RJVkUkMik7XG4gICAgICAgICRsaW5rLmFkZENsYXNzKENMQVNTX05BTUVfQUNUSVZFJDIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGxpbmsuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9BQ1RJVkUkMik7XG4gICAgICAgICRsaW5rLnBhcmVudHMoU0VMRUNUT1JfTkFWX0xJU1RfR1JPVVApLnByZXYoU0VMRUNUT1JfTkFWX0xJTktTICsgXCIsIFwiICsgU0VMRUNUT1JfTElTVF9JVEVNUykuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9BQ1RJVkUkMik7XG4gICAgICAgICRsaW5rLnBhcmVudHMoU0VMRUNUT1JfTkFWX0xJU1RfR1JPVVApLnByZXYoU0VMRUNUT1JfTkFWX0lURU1TKS5jaGlsZHJlbihTRUxFQ1RPUl9OQVZfTElOS1MpLmFkZENsYXNzKENMQVNTX05BTUVfQUNUSVZFJDIpO1xuICAgICAgfVxuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fc2Nyb2xsRWxlbWVudCkudHJpZ2dlcihFVkVOVF9BQ1RJVkFURSwge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiB0YXJnZXRcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2NsZWFyID0gZnVuY3Rpb24gX2NsZWFyKCkge1xuICAgICAgW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NlbGVjdG9yKSkuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19OQU1FX0FDVElWRSQyKTtcbiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19OQU1FX0FDVElWRSQyKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcykuZGF0YShEQVRBX0tFWSQ4KTtcblxuICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZztcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcykuZGF0YShEQVRBX0tFWSQ4LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIG1ldGhvZCBuYW1lZCBcXFwiXCIgKyBjb25maWcgKyBcIlxcXCJcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2Nyb2xsU3B5LCBudWxsLCBbe1xuICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTiQ4O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJEZWZhdWx0XCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIERlZmF1bHQkNjtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2Nyb2xsU3B5O1xuICB9KCk7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHdpbmRvdykub24oRVZFTlRfTE9BRF9EQVRBX0FQSSQyLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjcm9sbFNweXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfREFUQV9TUFkpKTtcbiAgICB2YXIgc2Nyb2xsU3B5c0xlbmd0aCA9IHNjcm9sbFNweXMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgaSA9IHNjcm9sbFNweXNMZW5ndGg7IGktLTspIHtcbiAgICAgIHZhciAkc3B5ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddKHNjcm9sbFNweXNbaV0pO1xuXG4gICAgICBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZS5jYWxsKCRzcHksICRzcHkuZGF0YSgpKTtcbiAgICB9XG4gIH0pO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ4XSA9IFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ4XS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweTtcblxuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ4XS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDhdID0gSlFVRVJZX05PX0NPTkZMSUNUJDg7XG4gICAgcmV0dXJuIFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHZhciBOQU1FJDkgPSAndGFiJztcbiAgdmFyIFZFUlNJT04kOSA9ICc0LjUuMyc7XG4gIHZhciBEQVRBX0tFWSQ5ID0gJ2JzLnRhYic7XG4gIHZhciBFVkVOVF9LRVkkOSA9IFwiLlwiICsgREFUQV9LRVkkOTtcbiAgdmFyIERBVEFfQVBJX0tFWSQ3ID0gJy5kYXRhLWFwaSc7XG4gIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QkOSA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJDldO1xuICB2YXIgRVZFTlRfSElERSQzID0gXCJoaWRlXCIgKyBFVkVOVF9LRVkkOTtcbiAgdmFyIEVWRU5UX0hJRERFTiQzID0gXCJoaWRkZW5cIiArIEVWRU5UX0tFWSQ5O1xuICB2YXIgRVZFTlRfU0hPVyQzID0gXCJzaG93XCIgKyBFVkVOVF9LRVkkOTtcbiAgdmFyIEVWRU5UX1NIT1dOJDMgPSBcInNob3duXCIgKyBFVkVOVF9LRVkkOTtcbiAgdmFyIEVWRU5UX0NMSUNLX0RBVEFfQVBJJDYgPSBcImNsaWNrXCIgKyBFVkVOVF9LRVkkOSArIERBVEFfQVBJX0tFWSQ3O1xuICB2YXIgQ0xBU1NfTkFNRV9EUk9QRE9XTl9NRU5VID0gJ2Ryb3Bkb3duLW1lbnUnO1xuICB2YXIgQ0xBU1NfTkFNRV9BQ1RJVkUkMyA9ICdhY3RpdmUnO1xuICB2YXIgQ0xBU1NfTkFNRV9ESVNBQkxFRCQxID0gJ2Rpc2FibGVkJztcbiAgdmFyIENMQVNTX05BTUVfRkFERSQ0ID0gJ2ZhZGUnO1xuICB2YXIgQ0xBU1NfTkFNRV9TSE9XJDYgPSAnc2hvdyc7XG4gIHZhciBTRUxFQ1RPUl9EUk9QRE9XTiQxID0gJy5kcm9wZG93bic7XG4gIHZhciBTRUxFQ1RPUl9OQVZfTElTVF9HUk9VUCQxID0gJy5uYXYsIC5saXN0LWdyb3VwJztcbiAgdmFyIFNFTEVDVE9SX0FDVElWRSQyID0gJy5hY3RpdmUnO1xuICB2YXIgU0VMRUNUT1JfQUNUSVZFX1VMID0gJz4gbGkgPiAuYWN0aXZlJztcbiAgdmFyIFNFTEVDVE9SX0RBVEFfVE9HR0xFJDQgPSAnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdLCBbZGF0YS10b2dnbGU9XCJsaXN0XCJdJztcbiAgdmFyIFNFTEVDVE9SX0RST1BET1dOX1RPR0dMRSQxID0gJy5kcm9wZG93bi10b2dnbGUnO1xuICB2YXIgU0VMRUNUT1JfRFJPUERPV05fQUNUSVZFX0NISUxEID0gJz4gLmRyb3Bkb3duLW1lbnUgLmFjdGl2ZSc7XG5cbiAgdmFyIFRhYiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUYWIoZWxlbWVudCkge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IFRhYi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlICYmIHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENMQVNTX05BTUVfQUNUSVZFJDMpIHx8ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDTEFTU19OQU1FX0RJU0FCTEVEJDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldDtcbiAgICAgIHZhciBwcmV2aW91cztcbiAgICAgIHZhciBsaXN0RWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5jbG9zZXN0KFNFTEVDVE9SX05BVl9MSVNUX0dST1VQJDEpWzBdO1xuICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICBpZiAobGlzdEVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGl0ZW1TZWxlY3RvciA9IGxpc3RFbGVtZW50Lm5vZGVOYW1lID09PSAnVUwnIHx8IGxpc3RFbGVtZW50Lm5vZGVOYW1lID09PSAnT0wnID8gU0VMRUNUT1JfQUNUSVZFX1VMIDogU0VMRUNUT1JfQUNUSVZFJDI7XG4gICAgICAgIHByZXZpb3VzID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLm1ha2VBcnJheSgkX19kZWZhdWx0WydkZWZhdWx0J10obGlzdEVsZW1lbnQpLmZpbmQoaXRlbVNlbGVjdG9yKSk7XG4gICAgICAgIHByZXZpb3VzID0gcHJldmlvdXNbcHJldmlvdXMubGVuZ3RoIC0gMV07XG4gICAgICB9XG5cbiAgICAgIHZhciBoaWRlRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElERSQzLCB7XG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnRcbiAgICAgIH0pO1xuICAgICAgdmFyIHNob3dFdmVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5FdmVudChFVkVOVF9TSE9XJDMsIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXNcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHByZXZpb3VzKS50cmlnZ2VyKGhpZGVFdmVudCk7XG4gICAgICB9XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7XG5cbiAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hY3RpdmF0ZSh0aGlzLl9lbGVtZW50LCBsaXN0RWxlbWVudCk7XG5cbiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICB2YXIgaGlkZGVuRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElEREVOJDMsIHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBfdGhpcy5fZWxlbWVudFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHNob3duRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfU0hPV04kMywge1xuICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzXG4gICAgICAgIH0pO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ocHJldmlvdXMpLnRyaWdnZXIoaGlkZGVuRXZlbnQpO1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuX2FjdGl2YXRlKHRhcmdldCwgdGFyZ2V0LnBhcmVudE5vZGUsIGNvbXBsZXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZJDkpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfTtcblxuICAgIF9wcm90by5fYWN0aXZhdGUgPSBmdW5jdGlvbiBfYWN0aXZhdGUoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBhY3RpdmVFbGVtZW50cyA9IGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVOYW1lID09PSAnVUwnIHx8IGNvbnRhaW5lci5ub2RlTmFtZSA9PT0gJ09MJykgPyAkX19kZWZhdWx0WydkZWZhdWx0J10oY29udGFpbmVyKS5maW5kKFNFTEVDVE9SX0FDVElWRV9VTCkgOiAkX19kZWZhdWx0WydkZWZhdWx0J10oY29udGFpbmVyKS5jaGlsZHJlbihTRUxFQ1RPUl9BQ1RJVkUkMik7XG4gICAgICB2YXIgYWN0aXZlID0gYWN0aXZlRWxlbWVudHNbMF07XG4gICAgICB2YXIgaXNUcmFuc2l0aW9uaW5nID0gY2FsbGJhY2sgJiYgYWN0aXZlICYmICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShhY3RpdmUpLmhhc0NsYXNzKENMQVNTX05BTUVfRkFERSQ0KTtcblxuICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuX3RyYW5zaXRpb25Db21wbGV0ZShlbGVtZW50LCBhY3RpdmUsIGNhbGxiYWNrKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChhY3RpdmUgJiYgaXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KGFjdGl2ZSk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShhY3RpdmUpLnJlbW92ZUNsYXNzKENMQVNTX05BTUVfU0hPVyQ2KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX3RyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIF90cmFuc2l0aW9uQ29tcGxldGUoZWxlbWVudCwgYWN0aXZlLCBjYWxsYmFjaykge1xuICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oYWN0aXZlKS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX0FDVElWRSQzKTtcbiAgICAgICAgdmFyIGRyb3Bkb3duQ2hpbGQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10oYWN0aXZlLnBhcmVudE5vZGUpLmZpbmQoU0VMRUNUT1JfRFJPUERPV05fQUNUSVZFX0NISUxEKVswXTtcblxuICAgICAgICBpZiAoZHJvcGRvd25DaGlsZCkge1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkcm9wZG93bkNoaWxkKS5yZW1vdmVDbGFzcyhDTEFTU19OQU1FX0FDVElWRSQzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3RpdmUuZ2V0QXR0cmlidXRlKCdyb2xlJykgPT09ICd0YWInKSB7XG4gICAgICAgICAgYWN0aXZlLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10oZWxlbWVudCkuYWRkQ2xhc3MoQ0xBU1NfTkFNRV9BQ1RJVkUkMyk7XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgncm9sZScpID09PSAndGFiJykge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBVdGlsLnJlZmxvdyhlbGVtZW50KTtcblxuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfRkFERSQ0KSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9TSE9XJDYpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlICYmICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50LnBhcmVudE5vZGUpLmhhc0NsYXNzKENMQVNTX05BTUVfRFJPUERPV05fTUVOVSkpIHtcbiAgICAgICAgdmFyIGRyb3Bkb3duRWxlbWVudCA9ICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShlbGVtZW50KS5jbG9zZXN0KFNFTEVDVE9SX0RST1BET1dOJDEpWzBdO1xuXG4gICAgICAgIGlmIChkcm9wZG93bkVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgZHJvcGRvd25Ub2dnbGVMaXN0ID0gW10uc2xpY2UuY2FsbChkcm9wZG93bkVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9EUk9QRE9XTl9UT0dHTEUkMSkpO1xuICAgICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkcm9wZG93blRvZ2dsZUxpc3QpLmFkZENsYXNzKENMQVNTX05BTUVfQUNUSVZFJDMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFRhYi5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcyk7XG4gICAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YShEQVRBX0tFWSQ5KTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFRhYih0aGlzKTtcbiAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZJDksIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhUYWIsIG51bGwsIFt7XG4gICAgICBrZXk6IFwiVkVSU0lPTlwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBWRVJTSU9OJDk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRhYjtcbiAgfSgpO1xuXG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXShkb2N1bWVudCkub24oRVZFTlRfQ0xJQ0tfREFUQV9BUEkkNiwgU0VMRUNUT1JfREFUQV9UT0dHTEUkNCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIFRhYi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMpLCAnc2hvdycpO1xuICB9KTtcbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkOV0gPSBUYWIuX2pRdWVyeUludGVyZmFjZTtcbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkOV0uQ29uc3RydWN0b3IgPSBUYWI7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkOV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSQ5XSA9IEpRVUVSWV9OT19DT05GTElDVCQ5O1xuICAgIHJldHVybiBUYWIuX2pRdWVyeUludGVyZmFjZTtcbiAgfTtcblxuICB2YXIgTkFNRSRhID0gJ3RvYXN0JztcbiAgdmFyIFZFUlNJT04kYSA9ICc0LjUuMyc7XG4gIHZhciBEQVRBX0tFWSRhID0gJ2JzLnRvYXN0JztcbiAgdmFyIEVWRU5UX0tFWSRhID0gXCIuXCIgKyBEQVRBX0tFWSRhO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJGEgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSRhXTtcbiAgdmFyIEVWRU5UX0NMSUNLX0RJU01JU1MkMSA9IFwiY2xpY2suZGlzbWlzc1wiICsgRVZFTlRfS0VZJGE7XG4gIHZhciBFVkVOVF9ISURFJDQgPSBcImhpZGVcIiArIEVWRU5UX0tFWSRhO1xuICB2YXIgRVZFTlRfSElEREVOJDQgPSBcImhpZGRlblwiICsgRVZFTlRfS0VZJGE7XG4gIHZhciBFVkVOVF9TSE9XJDQgPSBcInNob3dcIiArIEVWRU5UX0tFWSRhO1xuICB2YXIgRVZFTlRfU0hPV04kNCA9IFwic2hvd25cIiArIEVWRU5UX0tFWSRhO1xuICB2YXIgQ0xBU1NfTkFNRV9GQURFJDUgPSAnZmFkZSc7XG4gIHZhciBDTEFTU19OQU1FX0hJREUgPSAnaGlkZSc7XG4gIHZhciBDTEFTU19OQU1FX1NIT1ckNyA9ICdzaG93JztcbiAgdmFyIENMQVNTX05BTUVfU0hPV0lORyA9ICdzaG93aW5nJztcbiAgdmFyIERlZmF1bHRUeXBlJDcgPSB7XG4gICAgYW5pbWF0aW9uOiAnYm9vbGVhbicsXG4gICAgYXV0b2hpZGU6ICdib29sZWFuJyxcbiAgICBkZWxheTogJ251bWJlcidcbiAgfTtcbiAgdmFyIERlZmF1bHQkNyA9IHtcbiAgICBhbmltYXRpb246IHRydWUsXG4gICAgYXV0b2hpZGU6IHRydWUsXG4gICAgZGVsYXk6IDUwMFxuICB9O1xuICB2YXIgU0VMRUNUT1JfREFUQV9ESVNNSVNTJDEgPSAnW2RhdGEtZGlzbWlzcz1cInRvYXN0XCJdJztcblxuICB2YXIgVG9hc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVG9hc3QoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5fdGltZW91dCA9IG51bGw7XG5cbiAgICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBUb2FzdC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3coKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgc2hvd0V2ZW50ID0gJF9fZGVmYXVsdFsnZGVmYXVsdCddLkV2ZW50KEVWRU5UX1NIT1ckNCk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpO1xuXG4gICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2xlYXJUaW1lb3V0KCk7XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcuYW5pbWF0aW9uKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX0ZBREUkNSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgICBfdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfU0hPV0lORyk7XG5cbiAgICAgICAgX3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19OQU1FX1NIT1ckNyk7XG5cbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKF90aGlzLl9lbGVtZW50KS50cmlnZ2VyKEVWRU5UX1NIT1dOJDQpO1xuXG4gICAgICAgIGlmIChfdGhpcy5fY29uZmlnLmF1dG9oaWRlKSB7XG4gICAgICAgICAgX3RoaXMuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcbiAgICAgICAgICB9LCBfdGhpcy5fY29uZmlnLmRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX05BTUVfSElERSk7XG5cbiAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfTkFNRV9TSE9XSU5HKTtcblxuICAgICAgaWYgKHRoaXMuX2NvbmZpZy5hbmltYXRpb24pIHtcbiAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7XG4gICAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uaGlkZSA9IGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgICBpZiAoIXRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfU0hPVyQ3KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBoaWRlRXZlbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10uRXZlbnQoRVZFTlRfSElERSQ0KTtcbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7XG5cbiAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jbG9zZSgpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB0aGlzLl9jbGVhclRpbWVvdXQoKTtcblxuICAgICAgaWYgKHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX05BTUVfU0hPVyQ3KSkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9TSE9XJDcpO1xuICAgICAgfVxuXG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcy5fZWxlbWVudCkub2ZmKEVWRU5UX0NMSUNLX0RJU01JU1MkMSk7XG4gICAgICAkX19kZWZhdWx0WydkZWZhdWx0J10ucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSRhKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgICAgdGhpcy5fY29uZmlnID0gbnVsbDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgY29uZmlnID0gX2V4dGVuZHMoe30sIERlZmF1bHQkNywgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLmRhdGEoKSwgdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcgJiYgY29uZmlnID8gY29uZmlnIDoge30pO1xuICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSRhLCBjb25maWcsIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfc2V0TGlzdGVuZXJzKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICRfX2RlZmF1bHRbJ2RlZmF1bHQnXSh0aGlzLl9lbGVtZW50KS5vbihFVkVOVF9DTElDS19ESVNNSVNTJDEsIFNFTEVDVE9SX0RBVEFfRElTTUlTUyQxLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuaGlkZSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fY2xvc2UgPSBmdW5jdGlvbiBfY2xvc2UoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgIF90aGlzMy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX05BTUVfSElERSk7XG5cbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKF90aGlzMy5fZWxlbWVudCkudHJpZ2dlcihFVkVOVF9ISURERU4kNCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfTkFNRV9TSE9XJDcpO1xuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLmFuaW1hdGlvbikge1xuICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTtcbiAgICAgICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5fY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gX2NsZWFyVGltZW91dCgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsO1xuICAgIH07XG5cbiAgICBUb2FzdC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkX19kZWZhdWx0WydkZWZhdWx0J10odGhpcyk7XG4gICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YShEQVRBX0tFWSRhKTtcblxuICAgICAgICB2YXIgX2NvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZztcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFRvYXN0KHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVkkYSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyBtZXRob2QgbmFtZWQgXFxcIlwiICsgY29uZmlnICsgXCJcXFwiXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGFbY29uZmlnXSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhUb2FzdCwgbnVsbCwgW3tcbiAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT04kYTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRGVmYXVsdFR5cGVcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGUkNztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0JDc7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRvYXN0O1xuICB9KCk7XG5cbiAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkYV0gPSBUb2FzdC5falF1ZXJ5SW50ZXJmYWNlO1xuICAkX19kZWZhdWx0WydkZWZhdWx0J10uZm5bTkFNRSRhXS5Db25zdHJ1Y3RvciA9IFRvYXN0O1xuXG4gICRfX2RlZmF1bHRbJ2RlZmF1bHQnXS5mbltOQU1FJGFdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJF9fZGVmYXVsdFsnZGVmYXVsdCddLmZuW05BTUUkYV0gPSBKUVVFUllfTk9fQ09ORkxJQ1QkYTtcbiAgICByZXR1cm4gVG9hc3QuX2pRdWVyeUludGVyZmFjZTtcbiAgfTtcblxuICBleHBvcnRzLkFsZXJ0ID0gQWxlcnQ7XG4gIGV4cG9ydHMuQnV0dG9uID0gQnV0dG9uO1xuICBleHBvcnRzLkNhcm91c2VsID0gQ2Fyb3VzZWw7XG4gIGV4cG9ydHMuQ29sbGFwc2UgPSBDb2xsYXBzZTtcbiAgZXhwb3J0cy5Ecm9wZG93biA9IERyb3Bkb3duO1xuICBleHBvcnRzLk1vZGFsID0gTW9kYWw7XG4gIGV4cG9ydHMuUG9wb3ZlciA9IFBvcG92ZXI7XG4gIGV4cG9ydHMuU2Nyb2xsc3B5ID0gU2Nyb2xsU3B5O1xuICBleHBvcnRzLlRhYiA9IFRhYjtcbiAgZXhwb3J0cy5Ub2FzdCA9IFRvYXN0O1xuICBleHBvcnRzLlRvb2x0aXAgPSBUb29sdGlwO1xuICBleHBvcnRzLlV0aWwgPSBVdGlsO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgdmFsdWU6IHRydWVcbiAgfSk7XG59KTsiLCJ2YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzPz9yZWYtLTghLi4vLi4vYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcz8/cmVmLS05IS4vdHlwZWFoZWFkLmJ1bmRsZS5qc1wiKTtcbnZhciBfX19FWFBPU0VfTE9BREVSX0dFVF9HTE9CQUxfVEhJU19fXyA9IHJlcXVpcmUoXCIuLi8uLi9leHBvc2UtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRHbG9iYWxUaGlzLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX18gPSBfX19FWFBPU0VfTE9BREVSX0dFVF9HTE9CQUxfVEhJU19fXztcbmlmICh0eXBlb2YgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcIkJsb29kaG91bmRcIl0gPT09ICd1bmRlZmluZWQnKSBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wiQmxvb2Rob3VuZFwiXSA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fO1xuZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tleHBvc2VzLWxvYWRlcl0gVGhlIFwiQmxvb2Rob3VuZFwiIHZhbHVlIGV4aXN0cyBpbiB0aGUgZ2xvYmFsIHNjb3BlLCBpdCBtYXkgbm90IGJlIHNhZmUgdG8gb3ZlcndyaXRlIGl0LCB1c2UgdGhlIFwib3ZlcnJpZGVcIiBvcHRpb24nKVxubW9kdWxlLmV4cG9ydHMgPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gIH1cblxuICB2YXIgZztcblxuICB0cnkge1xuICAgIGcgPSB0aGlzIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNlbGYgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnO1xufSgpOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FmJywge1xuICBtb250aHM6ICdKYW51YXJpZV9GZWJydWFyaWVfTWFhcnRfQXByaWxfTWVpX0p1bmllX0p1bGllX0F1Z3VzdHVzX1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0Rlc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTXJ0X0Fwcl9NZWlfSnVuX0p1bF9BdWdfU2VwX09rdF9Ob3ZfRGVzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1NvbmRhZ19NYWFuZGFnX0RpbnNkYWdfV29lbnNkYWdfRG9uZGVyZGFnX1ZyeWRhZ19TYXRlcmRhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1Nvbl9NYWFfRGluX1dvZV9Eb25fVnJ5X1NhdCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTb19NYV9EaV9Xb19Eb19Wcl9TYScuc3BsaXQoJ18nKSxcbiAgbWVyaWRpZW1QYXJzZTogL3ZtfG5tL2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL15ubSQvaS50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzIDwgMTIpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ3ZtJyA6ICdWTSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ25tJyA6ICdOTSc7XG4gICAgfVxuICB9LFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW1ZhbmRhZyBvbV0gTFQnLFxuICAgIG5leHREYXk6ICdbTcO0cmUgb21dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW29tXSBMVCcsXG4gICAgbGFzdERheTogJ1tHaXN0ZXIgb21dIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYWFzXSBkZGRkIFtvbV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb29yICVzJyxcbiAgICBwYXN0OiAnJXMgZ2VsZWRlJyxcbiAgICBzOiBcIiduIHBhYXIgc2Vrb25kZXNcIixcbiAgICBzczogJyVkIHNla29uZGVzJyxcbiAgICBtOiBcIiduIG1pbnV1dFwiLFxuICAgIG1tOiAnJWQgbWludXRlJyxcbiAgICBoOiBcIiduIHV1clwiLFxuICAgIGhoOiAnJWQgdXJlJyxcbiAgICBkOiBcIiduIGRhZ1wiLFxuICAgIGRkOiAnJWQgZGFlJyxcbiAgICBNOiBcIiduIG1hYW5kXCIsXG4gICAgTU06ICclZCBtYWFuZGUnLFxuICAgIHk6IFwiJ24gamFhclwiLFxuICAgIHl5OiAnJWQgamFhcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0ZXxkZSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxIHx8IG51bWJlciA9PT0gOCB8fCBudW1iZXIgPj0gMjAgPyAnc3RlJyA6ICdkZScpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbnZhciBwbHVyYWxGb3JtID0gZnVuY3Rpb24gcGx1cmFsRm9ybShuKSB7XG4gIHJldHVybiBuID09PSAwID8gMCA6IG4gPT09IDEgPyAxIDogbiA9PT0gMiA/IDIgOiBuICUgMTAwID49IDMgJiYgbiAlIDEwMCA8PSAxMCA/IDMgOiBuICUgMTAwID49IDExID8gNCA6IDU7XG59LFxuICAgIHBsdXJhbHMgPSB7XG4gIHM6IFsn2KPZgtmEINmF2YYg2KvYp9mG2YrYqScsICfYq9in2YbZitipINmI2KfYrdiv2KknLCBbJ9ir2KfZhtmK2KrYp9mGJywgJ9ir2KfZhtmK2KrZitmGJ10sICclZCDYq9mI2KfZhicsICclZCDYq9in2YbZitipJywgJyVkINir2KfZhtmK2KknXSxcbiAgbTogWyfYo9mC2YQg2YXZhiDYr9mC2YrZgtipJywgJ9iv2YLZitmC2Kkg2YjYp9it2K/YqScsIFsn2K/ZgtmK2YLYqtin2YYnLCAn2K/ZgtmK2YLYqtmK2YYnXSwgJyVkINiv2YLYp9im2YInLCAnJWQg2K/ZgtmK2YLYqScsICclZCDYr9mC2YrZgtipJ10sXG4gIGg6IFsn2KPZgtmEINmF2YYg2LPYp9i52KknLCAn2LPYp9i52Kkg2YjYp9it2K/YqScsIFsn2LPYp9i52KrYp9mGJywgJ9iz2KfYudiq2YrZhiddLCAnJWQg2LPYp9i52KfYqicsICclZCDYs9in2LnYqScsICclZCDYs9in2LnYqSddLFxuICBkOiBbJ9ij2YLZhCDZhdmGINmK2YjZhScsICfZitmI2YUg2YjYp9it2K8nLCBbJ9mK2YjZhdin2YYnLCAn2YrZiNmF2YrZhiddLCAnJWQg2KPZitin2YUnLCAnJWQg2YrZiNmF2YvYpycsICclZCDZitmI2YUnXSxcbiAgTTogWyfYo9mC2YQg2YXZhiDYtNmH2LEnLCAn2LTZh9ixINmI2KfYrdivJywgWyfYtNmH2LHYp9mGJywgJ9i02YfYsdmK2YYnXSwgJyVkINij2LTZh9ixJywgJyVkINi02YfYsdinJywgJyVkINi02YfYsSddLFxuICB5OiBbJ9ij2YLZhCDZhdmGINi52KfZhScsICfYudin2YUg2YjYp9it2K8nLCBbJ9i52KfZhdin2YYnLCAn2LnYp9mF2YrZhiddLCAnJWQg2KPYudmI2KfZhScsICclZCDYudin2YXZi9inJywgJyVkINi52KfZhSddXG59LFxuICAgIHBsdXJhbGl6ZSA9IGZ1bmN0aW9uIHBsdXJhbGl6ZSh1KSB7XG4gIHJldHVybiBmdW5jdGlvbiAobnVtYmVyLCB3aXRob3V0U3VmZml4LCBzdHJpbmcsIGlzRnV0dXJlKSB7XG4gICAgdmFyIGYgPSBwbHVyYWxGb3JtKG51bWJlciksXG4gICAgICAgIHN0ciA9IHBsdXJhbHNbdV1bcGx1cmFsRm9ybShudW1iZXIpXTtcblxuICAgIGlmIChmID09PSAyKSB7XG4gICAgICBzdHIgPSBzdHJbd2l0aG91dFN1ZmZpeCA/IDAgOiAxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyVkL2ksIG51bWJlcik7XG4gIH07XG59LFxuICAgIG1vbnRocyA9IFsn2KzYp9mG2YHZiicsICfZgdmK2YHYsdmKJywgJ9mF2KfYsdizJywgJ9ij2YHYsdmK2YQnLCAn2YXYp9mKJywgJ9is2YjYp9mGJywgJ9is2YjZitmE2YrYqScsICfYo9mI2KonLCAn2LPYqNiq2YXYqNixJywgJ9ij2YPYqtmI2KjYsScsICfZhtmI2YHZhdio2LEnLCAn2K/Zitiz2YXYqNixJ107XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FyLWR6Jywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRocyxcbiAgd2Vla2RheXM6ICfYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfYrV/Zhl/Yq1/YsV/Yrl/YrF/Ysycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiBcIkQvXFx1MjAwRk0vXFx1MjAwRllZWVlcIixcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/YtXzZhS8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gJ9mFJyA9PT0gaW5wdXQ7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9i1JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfZhSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfZhNmK2YjZhSDYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dERheTogJ1vYutiv2YvYpyDYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdERheTogJ1vYo9mF2LMg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2KjYudivICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiBwbHVyYWxpemUoJ3MnKSxcbiAgICBzczogcGx1cmFsaXplKCdzJyksXG4gICAgbTogcGx1cmFsaXplKCdtJyksXG4gICAgbW06IHBsdXJhbGl6ZSgnbScpLFxuICAgIGg6IHBsdXJhbGl6ZSgnaCcpLFxuICAgIGhoOiBwbHVyYWxpemUoJ2gnKSxcbiAgICBkOiBwbHVyYWxpemUoJ2QnKSxcbiAgICBkZDogcGx1cmFsaXplKCdkJyksXG4gICAgTTogcGx1cmFsaXplKCdNJyksXG4gICAgTU06IHBsdXJhbGl6ZSgnTScpLFxuICAgIHk6IHBsdXJhbGl6ZSgneScpLFxuICAgIHl5OiBwbHVyYWxpemUoJ3knKVxuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLC9nLCAn2IwnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYXIta3cnLCB7XG4gIG1vbnRoczogJ9mK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mKX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiNiyX9i62LTYql/YtNiq2YbYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YbYqNixX9iv2KzZhtio2LEnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2Ypf2YrZiNmG2YrZiF/ZitmI2YTZitmI2LJf2LrYtNiqX9i02KrZhtio2LFf2KPZg9iq2YjYqNixX9mG2YjZhtio2LFf2K/YrNmG2KjYsScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfYp9mE2KPYrdivX9in2YTYpdiq2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfYp9it2K9f2KfYqtmG2YrZhl/Yq9mE2KfYq9in2KFf2KfYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfYrV/Zhl/Yq1/YsV/Yrl/YrF/Ysycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dERheTogJ1vYutiv2Kcg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3REYXk6ICdb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9mB2YogJXMnLFxuICAgIHBhc3Q6ICfZhdmG2LAgJXMnLFxuICAgIHM6ICfYq9mI2KfZhicsXG4gICAgc3M6ICclZCDYq9in2YbZitipJyxcbiAgICBtOiAn2K/ZgtmK2YLYqScsXG4gICAgbW06ICclZCDYr9mC2KfYptmCJyxcbiAgICBoOiAn2LPYp9i52KknLFxuICAgIGhoOiAnJWQg2LPYp9i52KfYqicsXG4gICAgZDogJ9mK2YjZhScsXG4gICAgZGQ6ICclZCDYo9mK2KfZhScsXG4gICAgTTogJ9i02YfYsScsXG4gICAgTU06ICclZCDYo9i02YfYsScsXG4gICAgeTogJ9iz2YbYqScsXG4gICAgeXk6ICclZCDYs9mG2YjYp9iqJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogMTJcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAnMScsXG4gIDI6ICcyJyxcbiAgMzogJzMnLFxuICA0OiAnNCcsXG4gIDU6ICc1JyxcbiAgNjogJzYnLFxuICA3OiAnNycsXG4gIDg6ICc4JyxcbiAgOTogJzknLFxuICAwOiAnMCdcbn0sXG4gICAgcGx1cmFsRm9ybSA9IGZ1bmN0aW9uIHBsdXJhbEZvcm0obikge1xuICByZXR1cm4gbiA9PT0gMCA/IDAgOiBuID09PSAxID8gMSA6IG4gPT09IDIgPyAyIDogbiAlIDEwMCA+PSAzICYmIG4gJSAxMDAgPD0gMTAgPyAzIDogbiAlIDEwMCA+PSAxMSA/IDQgOiA1O1xufSxcbiAgICBwbHVyYWxzID0ge1xuICBzOiBbJ9ij2YLZhCDZhdmGINir2KfZhtmK2KknLCAn2KvYp9mG2YrYqSDZiNin2K3Yr9ipJywgWyfYq9in2YbZitiq2KfZhicsICfYq9in2YbZitiq2YrZhiddLCAnJWQg2KvZiNin2YYnLCAnJWQg2KvYp9mG2YrYqScsICclZCDYq9in2YbZitipJ10sXG4gIG06IFsn2KPZgtmEINmF2YYg2K/ZgtmK2YLYqScsICfYr9mC2YrZgtipINmI2KfYrdiv2KknLCBbJ9iv2YLZitmC2KrYp9mGJywgJ9iv2YLZitmC2KrZitmGJ10sICclZCDYr9mC2KfYptmCJywgJyVkINiv2YLZitmC2KknLCAnJWQg2K/ZgtmK2YLYqSddLFxuICBoOiBbJ9ij2YLZhCDZhdmGINiz2KfYudipJywgJ9iz2KfYudipINmI2KfYrdiv2KknLCBbJ9iz2KfYudiq2KfZhicsICfYs9in2LnYqtmK2YYnXSwgJyVkINiz2KfYudin2KonLCAnJWQg2LPYp9i52KknLCAnJWQg2LPYp9i52KknXSxcbiAgZDogWyfYo9mC2YQg2YXZhiDZitmI2YUnLCAn2YrZiNmFINmI2KfYrdivJywgWyfZitmI2YXYp9mGJywgJ9mK2YjZhdmK2YYnXSwgJyVkINij2YrYp9mFJywgJyVkINmK2YjZhdmL2KcnLCAnJWQg2YrZiNmFJ10sXG4gIE06IFsn2KPZgtmEINmF2YYg2LTZh9ixJywgJ9i02YfYsSDZiNin2K3YrycsIFsn2LTZh9ix2KfZhicsICfYtNmH2LHZitmGJ10sICclZCDYo9i02YfYsScsICclZCDYtNmH2LHYpycsICclZCDYtNmH2LEnXSxcbiAgeTogWyfYo9mC2YQg2YXZhiDYudin2YUnLCAn2LnYp9mFINmI2KfYrdivJywgWyfYudin2YXYp9mGJywgJ9i52KfZhdmK2YYnXSwgJyVkINij2LnZiNin2YUnLCAnJWQg2LnYp9mF2YvYpycsICclZCDYudin2YUnXVxufSxcbiAgICBwbHVyYWxpemUgPSBmdW5jdGlvbiBwbHVyYWxpemUodSkge1xuICByZXR1cm4gZnVuY3Rpb24gKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICAgIHZhciBmID0gcGx1cmFsRm9ybShudW1iZXIpLFxuICAgICAgICBzdHIgPSBwbHVyYWxzW3VdW3BsdXJhbEZvcm0obnVtYmVyKV07XG5cbiAgICBpZiAoZiA9PT0gMikge1xuICAgICAgc3RyID0gc3RyW3dpdGhvdXRTdWZmaXggPyAwIDogMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xuICB9O1xufSxcbiAgICBtb250aHMgPSBbJ9mK2YbYp9mK2LEnLCAn2YHYqNix2KfZitixJywgJ9mF2KfYsdizJywgJ9ij2KjYsdmK2YQnLCAn2YXYp9mK2YgnLCAn2YrZiNmG2YrZiCcsICfZitmI2YTZitmIJywgJ9ij2LrYs9i32LMnLCAn2LPYqNiq2YXYqNixJywgJ9ij2YPYqtmI2KjYsScsICfZhtmI2YHZhdio2LEnLCAn2K/Zitiz2YXYqNixJ107XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FyLWx5Jywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRocyxcbiAgd2Vla2RheXM6ICfYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfYrV/Zhl/Yq1/YsV/Yrl/YrF/Ysycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiBcIkQvXFx1MjAwRk0vXFx1MjAwRllZWVlcIixcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/YtXzZhS8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gJ9mFJyA9PT0gaW5wdXQ7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9i1JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfZhSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfZhNmK2YjZhSDYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dERheTogJ1vYutiv2YvYpyDYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdERheTogJ1vYo9mF2LMg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2KjYudivICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiBwbHVyYWxpemUoJ3MnKSxcbiAgICBzczogcGx1cmFsaXplKCdzJyksXG4gICAgbTogcGx1cmFsaXplKCdtJyksXG4gICAgbW06IHBsdXJhbGl6ZSgnbScpLFxuICAgIGg6IHBsdXJhbGl6ZSgnaCcpLFxuICAgIGhoOiBwbHVyYWxpemUoJ2gnKSxcbiAgICBkOiBwbHVyYWxpemUoJ2QnKSxcbiAgICBkZDogcGx1cmFsaXplKCdkJyksXG4gICAgTTogcGx1cmFsaXplKCdNJyksXG4gICAgTU06IHBsdXJhbGl6ZSgnTScpLFxuICAgIHk6IHBsdXJhbGl6ZSgneScpLFxuICAgIHl5OiBwbHVyYWxpemUoJ3knKVxuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC/YjC9nLCAnLCcpO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSkucmVwbGFjZSgvLC9nLCAn2IwnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogNixcbiAgICBkb3k6IDEyXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FyLW1hJywge1xuICBtb250aHM6ICfZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZil/ZitmI2YbZitmIX9mK2YjZhNmK2YjYsl/Yuti02Kpf2LTYqtmG2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmG2KjYsV/Yr9is2YbYqNixJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9mK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mKX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiNiyX9i62LTYql/YtNiq2YbYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YbYqNixX9iv2KzZhtio2LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn2KfYrdivX9in2KvZhtmK2YZf2KvZhNin2KvYp9ihX9in2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2K1f2YZf2Ktf2LFf2K5f2Kxf2LMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9inINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0RGF5OiAnW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfZgdmKICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiAn2KvZiNin2YYnLFxuICAgIHNzOiAnJWQg2KvYp9mG2YrYqScsXG4gICAgbTogJ9iv2YLZitmC2KknLFxuICAgIG1tOiAnJWQg2K/Zgtin2KbZgicsXG4gICAgaDogJ9iz2KfYudipJyxcbiAgICBoaDogJyVkINiz2KfYudin2KonLFxuICAgIGQ6ICfZitmI2YUnLFxuICAgIGRkOiAnJWQg2KPZitin2YUnLFxuICAgIE06ICfYtNmH2LEnLFxuICAgIE1NOiAnJWQg2KPYtNmH2LEnLFxuICAgIHk6ICfYs9mG2KknLFxuICAgIHl5OiAnJWQg2LPZhtmI2KfYqidcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ9mhJyxcbiAgMjogJ9miJyxcbiAgMzogJ9mjJyxcbiAgNDogJ9mkJyxcbiAgNTogJ9mlJyxcbiAgNjogJ9mmJyxcbiAgNzogJ9mnJyxcbiAgODogJ9moJyxcbiAgOTogJ9mpJyxcbiAgMDogJ9mgJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfZoSc6ICcxJyxcbiAgJ9miJzogJzInLFxuICAn2aMnOiAnMycsXG4gICfZpCc6ICc0JyxcbiAgJ9mlJzogJzUnLFxuICAn2aYnOiAnNicsXG4gICfZpyc6ICc3JyxcbiAgJ9moJzogJzgnLFxuICAn2aknOiAnOScsXG4gICfZoCc6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FyLXNhJywge1xuICBtb250aHM6ICfZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZitmIX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiF/Yo9i62LPYt9izX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZitmIX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiF/Yo9i62LPYt9izX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfYrV/Zhl/Yq1/YsV/Yrl/YrF/Ysycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2LV82YUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuICfZhScgPT09IGlucHV0O1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfYtSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2YUnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHREYXk6ICdb2LrYr9inINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0RGF5OiAnW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfZgdmKICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiAn2KvZiNin2YYnLFxuICAgIHNzOiAnJWQg2KvYp9mG2YrYqScsXG4gICAgbTogJ9iv2YLZitmC2KknLFxuICAgIG1tOiAnJWQg2K/Zgtin2KbZgicsXG4gICAgaDogJ9iz2KfYudipJyxcbiAgICBoaDogJyVkINiz2KfYudin2KonLFxuICAgIGQ6ICfZitmI2YUnLFxuICAgIGRkOiAnJWQg2KPZitin2YUnLFxuICAgIE06ICfYtNmH2LEnLFxuICAgIE1NOiAnJWQg2KPYtNmH2LEnLFxuICAgIHk6ICfYs9mG2KknLFxuICAgIHl5OiAnJWQg2LPZhtmI2KfYqidcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KS5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdhci10bicsIHtcbiAgbW9udGhzOiAn2KzYp9mG2YHZil/ZgdmK2YHYsdmKX9mF2KfYsdizX9ij2YHYsdmK2YRf2YXYp9mKX9is2YjYp9mGX9is2YjZitmE2YrYqV/Yo9mI2Kpf2LPYqNiq2YXYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YHZhdio2LFf2K/Zitiz2YXYqNixJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9is2KfZhtmB2Ypf2YHZitmB2LHZil/Zhdin2LHYs1/Yo9mB2LHZitmEX9mF2KfZil/YrNmI2KfZhl/YrNmI2YrZhNmK2Klf2KPZiNiqX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfYrV/Zhl/Yq1/YsV/Yrl/YrF/Ysycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dERheTogJ1vYutiv2Kcg2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3REYXk6ICdb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ9mB2YogJXMnLFxuICAgIHBhc3Q6ICfZhdmG2LAgJXMnLFxuICAgIHM6ICfYq9mI2KfZhicsXG4gICAgc3M6ICclZCDYq9in2YbZitipJyxcbiAgICBtOiAn2K/ZgtmK2YLYqScsXG4gICAgbW06ICclZCDYr9mC2KfYptmCJyxcbiAgICBoOiAn2LPYp9i52KknLFxuICAgIGhoOiAnJWQg2LPYp9i52KfYqicsXG4gICAgZDogJ9mK2YjZhScsXG4gICAgZGQ6ICclZCDYo9mK2KfZhScsXG4gICAgTTogJ9i02YfYsScsXG4gICAgTU06ICclZCDYo9i02YfYsScsXG4gICAgeTogJ9iz2YbYqScsXG4gICAgeXk6ICclZCDYs9mG2YjYp9iqJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfZoScsXG4gIDI6ICfZoicsXG4gIDM6ICfZoycsXG4gIDQ6ICfZpCcsXG4gIDU6ICfZpScsXG4gIDY6ICfZpicsXG4gIDc6ICfZpycsXG4gIDg6ICfZqCcsXG4gIDk6ICfZqScsXG4gIDA6ICfZoCdcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn2aEnOiAnMScsXG4gICfZoic6ICcyJyxcbiAgJ9mjJzogJzMnLFxuICAn2aQnOiAnNCcsXG4gICfZpSc6ICc1JyxcbiAgJ9mmJzogJzYnLFxuICAn2acnOiAnNycsXG4gICfZqCc6ICc4JyxcbiAgJ9mpJzogJzknLFxuICAn2aAnOiAnMCdcbn0sXG4gICAgcGx1cmFsRm9ybSA9IGZ1bmN0aW9uIHBsdXJhbEZvcm0obikge1xuICByZXR1cm4gbiA9PT0gMCA/IDAgOiBuID09PSAxID8gMSA6IG4gPT09IDIgPyAyIDogbiAlIDEwMCA+PSAzICYmIG4gJSAxMDAgPD0gMTAgPyAzIDogbiAlIDEwMCA+PSAxMSA/IDQgOiA1O1xufSxcbiAgICBwbHVyYWxzID0ge1xuICBzOiBbJ9ij2YLZhCDZhdmGINir2KfZhtmK2KknLCAn2KvYp9mG2YrYqSDZiNin2K3Yr9ipJywgWyfYq9in2YbZitiq2KfZhicsICfYq9in2YbZitiq2YrZhiddLCAnJWQg2KvZiNin2YYnLCAnJWQg2KvYp9mG2YrYqScsICclZCDYq9in2YbZitipJ10sXG4gIG06IFsn2KPZgtmEINmF2YYg2K/ZgtmK2YLYqScsICfYr9mC2YrZgtipINmI2KfYrdiv2KknLCBbJ9iv2YLZitmC2KrYp9mGJywgJ9iv2YLZitmC2KrZitmGJ10sICclZCDYr9mC2KfYptmCJywgJyVkINiv2YLZitmC2KknLCAnJWQg2K/ZgtmK2YLYqSddLFxuICBoOiBbJ9ij2YLZhCDZhdmGINiz2KfYudipJywgJ9iz2KfYudipINmI2KfYrdiv2KknLCBbJ9iz2KfYudiq2KfZhicsICfYs9in2LnYqtmK2YYnXSwgJyVkINiz2KfYudin2KonLCAnJWQg2LPYp9i52KknLCAnJWQg2LPYp9i52KknXSxcbiAgZDogWyfYo9mC2YQg2YXZhiDZitmI2YUnLCAn2YrZiNmFINmI2KfYrdivJywgWyfZitmI2YXYp9mGJywgJ9mK2YjZhdmK2YYnXSwgJyVkINij2YrYp9mFJywgJyVkINmK2YjZhdmL2KcnLCAnJWQg2YrZiNmFJ10sXG4gIE06IFsn2KPZgtmEINmF2YYg2LTZh9ixJywgJ9i02YfYsSDZiNin2K3YrycsIFsn2LTZh9ix2KfZhicsICfYtNmH2LHZitmGJ10sICclZCDYo9i02YfYsScsICclZCDYtNmH2LHYpycsICclZCDYtNmH2LEnXSxcbiAgeTogWyfYo9mC2YQg2YXZhiDYudin2YUnLCAn2LnYp9mFINmI2KfYrdivJywgWyfYudin2YXYp9mGJywgJ9i52KfZhdmK2YYnXSwgJyVkINij2LnZiNin2YUnLCAnJWQg2LnYp9mF2YvYpycsICclZCDYudin2YUnXVxufSxcbiAgICBwbHVyYWxpemUgPSBmdW5jdGlvbiBwbHVyYWxpemUodSkge1xuICByZXR1cm4gZnVuY3Rpb24gKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICAgIHZhciBmID0gcGx1cmFsRm9ybShudW1iZXIpLFxuICAgICAgICBzdHIgPSBwbHVyYWxzW3VdW3BsdXJhbEZvcm0obnVtYmVyKV07XG5cbiAgICBpZiAoZiA9PT0gMikge1xuICAgICAgc3RyID0gc3RyW3dpdGhvdXRTdWZmaXggPyAwIDogMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xuICB9O1xufSxcbiAgICBtb250aHMgPSBbJ9mK2YbYp9mK2LEnLCAn2YHYqNix2KfZitixJywgJ9mF2KfYsdizJywgJ9ij2KjYsdmK2YQnLCAn2YXYp9mK2YgnLCAn2YrZiNmG2YrZiCcsICfZitmI2YTZitmIJywgJ9ij2LrYs9i32LMnLCAn2LPYqNiq2YXYqNixJywgJ9ij2YPYqtmI2KjYsScsICfZhtmI2YHZhdio2LEnLCAn2K/Zitiz2YXYqNixJ107XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2FyJywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRocyxcbiAgd2Vla2RheXM6ICfYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfYrV/Zhl/Yq1/YsV/Yrl/YrF/Ysycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiBcIkQvXFx1MjAwRk0vXFx1MjAwRllZWVlcIixcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/YtXzZhS8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gJ9mFJyA9PT0gaW5wdXQ7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9i1JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfZhSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb2KfZhNmK2YjZhSDYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dERheTogJ1vYutiv2YvYpyDYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYudmG2K8g2KfZhNiz2KfYudipXSBMVCcsXG4gICAgbGFzdERheTogJ1vYo9mF2LMg2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn2KjYudivICVzJyxcbiAgICBwYXN0OiAn2YXZhtiwICVzJyxcbiAgICBzOiBwbHVyYWxpemUoJ3MnKSxcbiAgICBzczogcGx1cmFsaXplKCdzJyksXG4gICAgbTogcGx1cmFsaXplKCdtJyksXG4gICAgbW06IHBsdXJhbGl6ZSgnbScpLFxuICAgIGg6IHBsdXJhbGl6ZSgnaCcpLFxuICAgIGhoOiBwbHVyYWxpemUoJ2gnKSxcbiAgICBkOiBwbHVyYWxpemUoJ2QnKSxcbiAgICBkZDogcGx1cmFsaXplKCdkJyksXG4gICAgTTogcGx1cmFsaXplKCdNJyksXG4gICAgTU06IHBsdXJhbGl6ZSgnTScpLFxuICAgIHk6IHBsdXJhbGl6ZSgneScpLFxuICAgIHl5OiBwbHVyYWxpemUoJ3knKVxuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b2aHZotmj2aTZpdmm2afZqNmp2aBdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSkucmVwbGFjZSgv2IwvZywgJywnKTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDYsXG4gICAgZG95OiAxMlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3VmZml4ZXMgPSB7XG4gIDE6ICctaW5jaScsXG4gIDU6ICctaW5jaScsXG4gIDg6ICctaW5jaScsXG4gIDcwOiAnLWluY2knLFxuICA4MDogJy1pbmNpJyxcbiAgMjogJy1uY2knLFxuICA3OiAnLW5jaScsXG4gIDIwOiAnLW5jaScsXG4gIDUwOiAnLW5jaScsXG4gIDM6ICctw7xuY8O8JyxcbiAgNDogJy3DvG5jw7wnLFxuICAxMDA6ICctw7xuY8O8JyxcbiAgNjogJy1uY8SxJyxcbiAgOTogJy11bmN1JyxcbiAgMTA6ICctdW5jdScsXG4gIDMwOiAnLXVuY3UnLFxuICA2MDogJy3EsW5jxLEnLFxuICA5MDogJy3EsW5jxLEnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYXonLCB7XG4gIG1vbnRoczogJ3lhbnZhcl9mZXZyYWxfbWFydF9hcHJlbF9tYXlfaXl1bl9peXVsX2F2cXVzdF9zZW50eWFicl9va3R5YWJyX25veWFicl9kZWthYnInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAneWFuX2Zldl9tYXJfYXByX21heV9peW5faXlsX2F2cV9zZW5fb2t0X25veV9kZWsnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnQmF6YXJfQmF6YXIgZXJ0yZlzaV/Dh8mZcsWfyZluYsmZIGF4xZ9hbcSxX8OHyZlyxZ/JmW5iyZlfQ8O8bcmZIGF4xZ9hbcSxX0PDvG3JmV/FnsmZbmLJmScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0Jhel9CekVfw4dBeF/Dh8mZcl9DQXhfQ8O8bV/FnsmZbicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdCel9CRV/Dh0Ffw4fJmV9DQV9Dw7xfxZ7JmScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2J1Z8O8biBzYWF0XSBMVCcsXG4gICAgbmV4dERheTogJ1tzYWJhaCBzYWF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbZ8mZbMmZbiBoyZlmdMmZXSBkZGRkIFtzYWF0XSBMVCcsXG4gICAgbGFzdERheTogJ1tkw7xuyZluXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdba2XDp8mZbiBoyZlmdMmZXSBkZGRkIFtzYWF0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBzb25yYScsXG4gICAgcGFzdDogJyVzIMmZdnbJmWwnLFxuICAgIHM6ICdiaXIgbmXDp8mZIHNhbml5yZknLFxuICAgIHNzOiAnJWQgc2FuaXnJmScsXG4gICAgbTogJ2JpciBkyZlxaXHJmScsXG4gICAgbW06ICclZCBkyZlxaXHJmScsXG4gICAgaDogJ2JpciBzYWF0JyxcbiAgICBoaDogJyVkIHNhYXQnLFxuICAgIGQ6ICdiaXIgZ8O8bicsXG4gICAgZGQ6ICclZCBnw7xuJyxcbiAgICBNOiAnYmlyIGF5JyxcbiAgICBNTTogJyVkIGF5JyxcbiAgICB5OiAnYmlyIGlsJyxcbiAgICB5eTogJyVkIGlsJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvZ2VjyZl8c8mZaMmZcnxnw7xuZMO8enxheMWfYW0vLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIC9eKGfDvG5kw7x6fGF4xZ9hbSkkLy50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICdnZWPJmSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAnc8mZaMmZcic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAnZ8O8bmTDvHonO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2F4xZ9hbSc7XG4gICAgfVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0tKMSxbmPEsXxpbmNpfG5jaXzDvG5jw7x8bmPEsXx1bmN1KS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bWJlciArICctxLFuY8SxJztcbiAgICB9XG5cbiAgICB2YXIgYSA9IG51bWJlciAlIDEwLFxuICAgICAgICBiID0gbnVtYmVyICUgMTAwIC0gYSxcbiAgICAgICAgYyA9IG51bWJlciA+PSAxMDAgPyAxMDAgOiBudWxsO1xuICAgIHJldHVybiBudW1iZXIgKyAoc3VmZml4ZXNbYV0gfHwgc3VmZml4ZXNbYl0gfHwgc3VmZml4ZXNbY10pO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHBsdXJhbCh3b3JkLCBudW0pIHtcbiAgdmFyIGZvcm1zID0gd29yZC5zcGxpdCgnXycpO1xuICByZXR1cm4gbnVtICUgMTAgPT09IDEgJiYgbnVtICUgMTAwICE9PSAxMSA/IGZvcm1zWzBdIDogbnVtICUgMTAgPj0gMiAmJiBudW0gJSAxMCA8PSA0ICYmIChudW0gJSAxMDAgPCAxMCB8fCBudW0gJSAxMDAgPj0gMjApID8gZm9ybXNbMV0gOiBmb3Jtc1syXTtcbn1cblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lV2l0aFBsdXJhbChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIHNzOiB3aXRob3V0U3VmZml4ID8gJ9GB0LXQutGD0L3QtNCwX9GB0LXQutGD0L3QtNGLX9GB0LXQutGD0L3QtCcgOiAn0YHQtdC60YPQvdC00YNf0YHQtdC60YPQvdC00Ytf0YHQtdC60YPQvdC0JyxcbiAgICBtbTogd2l0aG91dFN1ZmZpeCA/ICfRhdCy0ZbQu9GW0L3QsF/RhdCy0ZbQu9GW0L3Ri1/RhdCy0ZbQu9GW0L0nIDogJ9GF0LLRltC70ZbQvdGDX9GF0LLRltC70ZbQvdGLX9GF0LLRltC70ZbQvScsXG4gICAgaGg6IHdpdGhvdXRTdWZmaXggPyAn0LPQsNC00LfRltC90LBf0LPQsNC00LfRltC90Ytf0LPQsNC00LfRltC9JyA6ICfQs9Cw0LTQt9GW0L3Rg1/Qs9Cw0LTQt9GW0L3Ri1/Qs9Cw0LTQt9GW0L0nLFxuICAgIGRkOiAn0LTQt9C10L3RjF/QtNC90ZZf0LTQt9GR0L0nLFxuICAgIE1NOiAn0LzQtdGB0Y/Rhl/QvNC10YHRj9GG0Ytf0LzQtdGB0Y/RhtCw0Z4nLFxuICAgIHl5OiAn0LPQvtC0X9Cz0LDQtNGLX9Cz0LDQtNC+0Z4nXG4gIH07XG5cbiAgaWYgKGtleSA9PT0gJ20nKSB7XG4gICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAn0YXQstGW0LvRltC90LAnIDogJ9GF0LLRltC70ZbQvdGDJztcbiAgfSBlbHNlIGlmIChrZXkgPT09ICdoJykge1xuICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ9Cz0LDQtNC30ZbQvdCwJyA6ICfQs9Cw0LTQt9GW0L3Rgyc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bWJlciArICcgJyArIHBsdXJhbChmb3JtYXRba2V5XSwgK251bWJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYmUnLCB7XG4gIG1vbnRoczoge1xuICAgIGZvcm1hdDogJ9GB0YLRg9C00LfQtdC90Y9f0LvRjtGC0LDQs9CwX9GB0LDQutCw0LLRltC60LBf0LrRgNCw0YHQsNCy0ZbQutCwX9GC0YDQsNGe0L3Rj1/Rh9GN0YDQstC10L3Rj1/Qu9GW0L/QtdC90Y9f0LbQvdGW0Z7QvdGPX9Cy0LXRgNCw0YHQvdGPX9C60LDRgdGC0YDRi9GH0L3RltC60LBf0LvRltGB0YLQsNC/0LDQtNCwX9GB0L3QtdC20L3Rjycuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAn0YHRgtGD0LTQt9C10L3RjF/Qu9GO0YLRi1/RgdCw0LrQsNCy0ZbQul/QutGA0LDRgdCw0LLRltC6X9GC0YDQsNCy0LXQvdGMX9GH0Y3RgNCy0LXQvdGMX9C70ZbQv9C10L3RjF/QttC90ZbQstC10L3RjF/QstC10YDQsNGB0LXQvdGMX9C60LDRgdGC0YDRi9GH0L3RltC6X9C70ZbRgdGC0LDQv9Cw0LRf0YHQvdC10LbQsNC90YwnLnNwbGl0KCdfJylcbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICfRgdGC0YPQtF/Qu9GO0YJf0YHQsNC6X9C60YDQsNGBX9GC0YDQsNCyX9GH0Y3RgNCyX9C70ZbQv1/QttC90ZbQsl/QstC10YBf0LrQsNGB0YJf0LvRltGB0YJf0YHQvdC10LYnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiB7XG4gICAgZm9ybWF0OiAn0L3Rj9C00LfQtdC70Y5f0L/QsNC90Y/QtNC30LXQu9Cw0Lpf0LDRntGC0L7RgNCw0Lpf0YHQtdGA0LDQtNGDX9GH0LDRhtCy0LXRgF/Qv9GP0YLQvdGW0YbRg1/RgdGD0LHQvtGC0YMnLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ9C90Y/QtNC30LXQu9GPX9C/0LDQvdGP0LTQt9C10LvQsNC6X9Cw0Z7RgtC+0YDQsNC6X9GB0LXRgNCw0LTQsF/Rh9Cw0YbQstC10YBf0L/Rj9GC0L3RltGG0LBf0YHRg9Cx0L7RgtCwJy5zcGxpdCgnXycpLFxuICAgIGlzRm9ybWF0OiAvXFxbID9b0KPRg9GeXSA/KD860LzRltC90YPQu9GD0Y580L3QsNGB0YLRg9C/0L3Rg9GOKT8gP1xcXSA/ZGRkZC9cbiAgfSxcbiAgd2Vla2RheXNTaG9ydDogJ9C90LRf0L/QvV/QsNGCX9GB0YBf0YfRhl/Qv9GCX9GB0LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0L3QtF/Qv9C9X9Cw0YJf0YHRgF/Rh9GGX9C/0YJf0YHQsScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVkg0LMuJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSDQsy4sIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkg0LMuLCBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9Ch0ZHQvdC90Y8g0Z5dIExUJyxcbiAgICBuZXh0RGF5OiAnW9CX0LDRntGC0YDQsCDRnl0gTFQnLFxuICAgIGxhc3REYXk6ICdb0KPRh9C+0YDQsCDRnl0gTFQnLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnW9CjXSBkZGRkIFvRnl0gTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIDU6XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1vQoyDQvNGW0L3Rg9C70YPRjl0gZGRkZCBb0Z5dIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiAnW9CjINC80ZbQvdGD0LvRi10gZGRkZCBb0Z5dIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0L/RgNCw0LcgJXMnLFxuICAgIHBhc3Q6ICclcyDRgtCw0LzRgycsXG4gICAgczogJ9C90LXQutCw0LvRjNC60ZYg0YHQtdC60YPQvdC0JyxcbiAgICBtOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIG1tOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIGg6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgaGg6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgZDogJ9C00LfQtdC90YwnLFxuICAgIGRkOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIE06ICfQvNC10YHRj9GGJyxcbiAgICBNTTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICB5OiAn0LPQvtC0JyxcbiAgICB5eTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbFxuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv0L3QvtGH0Yt80YDQsNC90ZbRhtGLfNC00L3Rj3zQstC10YfQsNGA0LAvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIC9eKNC00L3Rj3zQstC10YfQsNGA0LApJC8udGVzdChpbnB1dCk7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn0L3QvtGH0YsnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9GA0LDQvdGW0YbRiyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn0LTQvdGPJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfQstC10YfQsNGA0LAnO1xuICAgIH1cbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LSjRlnzRi3zQs9CwKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnTSc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gKG51bWJlciAlIDEwID09PSAyIHx8IG51bWJlciAlIDEwID09PSAzKSAmJiBudW1iZXIgJSAxMDAgIT09IDEyICYmIG51bWJlciAlIDEwMCAhPT0gMTMgPyBudW1iZXIgKyAnLdGWJyA6IG51bWJlciArICct0YsnO1xuXG4gICAgICBjYXNlICdEJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICct0LPQsCc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdiZycsIHtcbiAgbW9udGhzOiAn0Y/QvdGD0LDRgNC4X9GE0LXQstGA0YPQsNGA0Lhf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Llf0Y7QvdC4X9GO0LvQuF/QsNCy0LPRg9GB0YJf0YHQtdC/0YLQtdC80LLRgNC4X9C+0LrRgtC+0LzQstGA0Lhf0L3QvtC10LzQstGA0Lhf0LTQtdC60LXQvNCy0YDQuCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfRj9C90YNf0YTQtdCyX9C80LDRgF/QsNC/0YBf0LzQsNC5X9GO0L3QuF/RjtC70Lhf0LDQstCzX9GB0LXQv1/QvtC60YJf0L3QvtC1X9C00LXQuicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfQvdC10LTQtdC70Y9f0L/QvtC90LXQtNC10LvQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNGP0LTQsF/Rh9C10YLQstGK0YDRgtGK0Lpf0L/QtdGC0YrQul/RgdGK0LHQvtGC0LAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQvdC10LRf0L/QvtC9X9Cy0YLQvl/RgdGA0Y9f0YfQtdGCX9C/0LXRgl/RgdGK0LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0L3QtF/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb0JTQvdC10YEg0LJdIExUJyxcbiAgICBuZXh0RGF5OiAnW9Cj0YLRgNC1INCyXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvQsl0gTFQnLFxuICAgIGxhc3REYXk6ICdb0JLRh9C10YDQsCDQsl0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW9Cc0LjQvdCw0LvQsNGC0LBdIGRkZGQgW9CyXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW9Cc0LjQvdCw0LvQuNGPXSBkZGRkIFvQsl0gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfRgdC70LXQtCAlcycsXG4gICAgcGFzdDogJ9C/0YDQtdC00LggJXMnLFxuICAgIHM6ICfQvdGP0LrQvtC70LrQviDRgdC10LrRg9C90LTQuCcsXG4gICAgc3M6ICclZCDRgdC10LrRg9C90LTQuCcsXG4gICAgbTogJ9C80LjQvdGD0YLQsCcsXG4gICAgbW06ICclZCDQvNC40L3Rg9GC0LgnLFxuICAgIGg6ICfRh9Cw0YEnLFxuICAgIGhoOiAnJWQg0YfQsNGB0LAnLFxuICAgIGQ6ICfQtNC10L0nLFxuICAgIGRkOiAnJWQg0LTQtdC90LAnLFxuICAgIHc6ICfRgdC10LTQvNC40YbQsCcsXG4gICAgd3c6ICclZCDRgdC10LTQvNC40YbQuCcsXG4gICAgTTogJ9C80LXRgdC10YYnLFxuICAgIE1NOiAnJWQg0LzQtdGB0LXRhtCwJyxcbiAgICB5OiAn0LPQvtC00LjQvdCwJyxcbiAgICB5eTogJyVkINCz0L7QtNC40L3QuCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LSjQtdCyfNC10L180YLQuHzQstC4fNGA0Lh80LzQuCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBsYXN0RGlnaXQgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgbGFzdDJEaWdpdHMgPSBudW1iZXIgJSAxMDA7XG5cbiAgICBpZiAobnVtYmVyID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3QtdCyJztcbiAgICB9IGVsc2UgaWYgKGxhc3QyRGlnaXRzID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3QtdC9JztcbiAgICB9IGVsc2UgaWYgKGxhc3QyRGlnaXRzID4gMTAgJiYgbGFzdDJEaWdpdHMgPCAyMCkge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0YLQuCc7XG4gICAgfSBlbHNlIGlmIChsYXN0RGlnaXQgPT09IDEpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdCy0LgnO1xuICAgIH0gZWxzZSBpZiAobGFzdERpZ2l0ID09PSAyKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3RgNC4JztcbiAgICB9IGVsc2UgaWYgKGxhc3REaWdpdCA9PT0gNyB8fCBsYXN0RGlnaXQgPT09IDgpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdC80LgnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3RgtC4JztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JtJywge1xuICBtb250aHM6ICdaYW53dXlla2Fsb19GZXd1cnV5ZWthbG9fTWFyaXNpa2Fsb19Bd2lyaWxpa2Fsb19NyZtrYWxvX1p1d8mbbmthbG9fWnVsdXlla2Fsb19VdGlrYWxvX1PJm3RhbmJ1cnVrYWxvX8mUa3V0yZRidXJ1a2Fsb19Ob3dhbmJ1cnVrYWxvX0Rlc2FuYnVydWthbG8nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnWmFuX0Zld19NYXJfQXdpX03Jm19adXdfWnVsX1V0aV9TyZt0X8mUa3VfTm93X0Rlcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdLYXJpX050yZtuyZtuX1RhcmF0YV9BcmFiYV9BbGFtaXNhX0p1bWFfU2liaXJpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnS2FyX050yZtfVGFyX0FyYV9BbGFfSnVtX1NpYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdLYV9OdF9UYV9Bcl9BbF9KdV9TaScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnTU1NTSBbdGlsZV0gRCBbc2FuXSBZWVlZJyxcbiAgICBMTEw6ICdNTU1NIFt0aWxlXSBEIFtzYW5dIFlZWVkgW2zJm3LJm10gSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIE1NTU0gW3RpbGVdIEQgW3Nhbl0gWVlZWSBbbMmbcsmbXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0JpIGzJm3LJm10gTFQnLFxuICAgIG5leHREYXk6ICdbU2luaSBsyZtyyZtdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2RvbiBsyZtyyZtdIExUJyxcbiAgICBsYXN0RGF5OiAnW0t1bnUgbMmbcsmbXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFt0yZttyZtuZW4gbMmbcsmbXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBryZRuyZQnLFxuICAgIHBhc3Q6ICdhIGLJmyAlcyBiyZQnLFxuICAgIHM6ICdzYW5nYSBkYW1hIGRhbWEnLFxuICAgIHNzOiAnc2Vrb25kaSAlZCcsXG4gICAgbTogJ21pbml0aSBrZWxlbicsXG4gICAgbW06ICdtaW5pdGkgJWQnLFxuICAgIGg6ICdsyZtyyZsga2VsZW4nLFxuICAgIGhoOiAnbMmbcsmbICVkJyxcbiAgICBkOiAndGlsZSBrZWxlbicsXG4gICAgZGQ6ICd0aWxlICVkJyxcbiAgICBNOiAna2FsbyBrZWxlbicsXG4gICAgTU06ICdrYWxvICVkJyxcbiAgICB5OiAnc2FuIGtlbGVuJyxcbiAgICB5eTogJ3NhbiAlZCdcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+CnpycsXG4gIDI6ICfgp6gnLFxuICAzOiAn4KepJyxcbiAgNDogJ+CnqicsXG4gIDU6ICfgp6snLFxuICA2OiAn4KesJyxcbiAgNzogJ+CnrScsXG4gIDg6ICfgp64nLFxuICA5OiAn4KevJyxcbiAgMDogJ+Cnpidcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4KenJzogJzEnLFxuICAn4KeoJzogJzInLFxuICAn4KepJzogJzMnLFxuICAn4KeqJzogJzQnLFxuICAn4KerJzogJzUnLFxuICAn4KesJzogJzYnLFxuICAn4KetJzogJzcnLFxuICAn4KeuJzogJzgnLFxuICAn4KevJzogJzknLFxuICAn4KemJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYm4tYmQnLCB7XG4gIG1vbnRoczogJ+CmnOCmvuCmqOCngeCnn+CmvuCmsOCmv1/gpqvgp4fgpqzgp43gprDgp4Hgp5/gpr7gprDgpr9f4Kau4Ka+4Kaw4KeN4KaaX+Cmj+CmquCnjeCmsOCmv+Cmsl/gpq7gp4df4Kac4KeB4KaoX+CmnOCngeCmsuCmvuCmh1/gpobgppfgprjgp43gpp9f4Ka44KeH4Kaq4KeN4Kaf4KeH4Kau4KeN4Kas4KawX+CmheCmleCnjeCmn+Cni+CmrOCmsF/gpqjgpq3gp4fgpq7gp43gpqzgprBf4Kah4Ka/4Ka44KeH4Kau4KeN4Kas4KawJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+CmnOCmvuCmqOCngV/gpqvgp4fgpqzgp43gprDgp4Ff4Kau4Ka+4Kaw4KeN4KaaX+Cmj+CmquCnjeCmsOCmv+Cmsl/gpq7gp4df4Kac4KeB4KaoX+CmnOCngeCmsuCmvuCmh1/gpobgppfgprjgp43gpp9f4Ka44KeH4Kaq4KeN4KafX+CmheCmleCnjeCmn+Cni1/gpqjgpq3gp4df4Kah4Ka/4Ka44KeHJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+CmsOCmrOCmv+CmrOCmvuCmsF/gprjgp4vgpq7gpqzgpr7gprBf4Kau4KaZ4KeN4KaX4Kay4Kas4Ka+4KawX+CmrOCngeCmp+CmrOCmvuCmsF/gpqzgp4Pgprngprjgp43gpqrgpqTgpr/gpqzgpr7gprBf4Ka24KeB4KaV4KeN4Kaw4Kas4Ka+4KawX+CmtuCmqOCmv+CmrOCmvuCmsCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CmsOCmrOCmv1/gprjgp4vgpq5f4Kau4KaZ4KeN4KaX4KayX+CmrOCngeCmp1/gpqzgp4Pgprngprjgp43gpqrgpqTgpr9f4Ka24KeB4KaV4KeN4KawX+CmtuCmqOCmvycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgprDgpqzgpr9f4Ka44KeL4KauX+CmruCmmeCnjeCml+Cmsl/gpqzgp4Hgpqdf4Kas4KeD4Ka5X+CmtuCngeCmleCnjeCmsF/gprbgpqjgpr8nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0g4Ka44Kau4KefJyxcbiAgICBMVFM6ICdBIGg6bW06c3Mg4Ka44Kau4KefJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbSDgprjgpq7gp58nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCmuOCmruCnnydcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CmhuCmnF0gTFQnLFxuICAgIG5leHREYXk6ICdb4KaG4KaX4Ka+4Kau4KeA4KaV4Ka+4KayXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgppfgpqTgppXgpr7gprJdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgppfgpqRdIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOCmquCmsOCnhycsXG4gICAgcGFzdDogJyVzIOCmhuCml+CnhycsXG4gICAgczogJ+CmleCnn+Cnh+CmlSDgprjgp4fgppXgp4fgpqjgp43gpqEnLFxuICAgIHNzOiAnJWQg4Ka44KeH4KaV4KeH4Kao4KeN4KahJyxcbiAgICBtOiAn4KaP4KaVIOCmruCmv+CmqOCmv+CmnycsXG4gICAgbW06ICclZCDgpq7gpr/gpqjgpr/gpp8nLFxuICAgIGg6ICfgpo/gppUg4KaY4Kao4KeN4Kaf4Ka+JyxcbiAgICBoaDogJyVkIOCmmOCmqOCnjeCmn+CmvicsXG4gICAgZDogJ+Cmj+CmlSDgpqbgpr/gpqgnLFxuICAgIGRkOiAnJWQg4Kam4Ka/4KaoJyxcbiAgICBNOiAn4KaP4KaVIOCmruCmvuCmuCcsXG4gICAgTU06ICclZCDgpq7gpr7gprgnLFxuICAgIHk6ICfgpo/gppUg4Kas4Kab4KawJyxcbiAgICB5eTogJyVkIOCmrOCmm+CmsCdcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+Cnp+CnqOCnqeCnquCnq+CnrOCnreCnruCnr+Cnpl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4Kaw4Ka+4KakfOCmreCni+CmsHzgprjgppXgpr7gprJ84Kam4KeB4Kaq4KeB4KawfOCmrOCmv+CmleCmvuCmsnzgprjgpqjgp43gpqfgp43gpq/gpr584Kaw4Ka+4KakLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CmsOCmvuCmpCcpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CmreCni+CmsCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgprjgppXgpr7gprInKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4Kam4KeB4Kaq4KeB4KawJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMyA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CmrOCmv+CmleCmvuCmsicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CmuOCmqOCnjeCmp+CnjeCmr+CmvicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CmsOCmvuCmpCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgNikge1xuICAgICAgcmV0dXJuICfgpq3gp4vgprAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ+CmuOCmleCmvuCmsic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTUpIHtcbiAgICAgIHJldHVybiAn4Kam4KeB4Kaq4KeB4KawJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxOCkge1xuICAgICAgcmV0dXJuICfgpqzgpr/gppXgpr7gprInO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CmuOCmqOCnjeCmp+CnjeCmr+Cmvic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4Kaw4Ka+4KakJztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfgp6cnLFxuICAyOiAn4KeoJyxcbiAgMzogJ+CnqScsXG4gIDQ6ICfgp6onLFxuICA1OiAn4KerJyxcbiAgNjogJ+CnrCcsXG4gIDc6ICfgp60nLFxuICA4OiAn4KeuJyxcbiAgOTogJ+CnrycsXG4gIDA6ICfgp6YnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+Cnpyc6ICcxJyxcbiAgJ+CnqCc6ICcyJyxcbiAgJ+CnqSc6ICczJyxcbiAgJ+Cnqic6ICc0JyxcbiAgJ+Cnqyc6ICc1JyxcbiAgJ+CnrCc6ICc2JyxcbiAgJ+CnrSc6ICc3JyxcbiAgJ+Cnric6ICc4JyxcbiAgJ+Cnryc6ICc5JyxcbiAgJ+Cnpic6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JuJywge1xuICBtb250aHM6ICfgppzgpr7gpqjgp4Hgp5/gpr7gprDgpr9f4Kar4KeH4Kas4KeN4Kaw4KeB4Kef4Ka+4Kaw4Ka/X+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprDgpr/gprJf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprLgpr7gpodf4KaG4KaX4Ka44KeN4KafX+CmuOCnh+CmquCnjeCmn+Cnh+CmruCnjeCmrOCmsF/gpoXgppXgp43gpp/gp4vgpqzgprBf4Kao4Kat4KeH4Kau4KeN4Kas4KawX+CmoeCmv+CmuOCnh+CmruCnjeCmrOCmsCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgppzgpr7gpqjgp4Ff4Kar4KeH4Kas4KeN4Kaw4KeBX+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprDgpr/gprJf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprLgpr7gpodf4KaG4KaX4Ka44KeN4KafX+CmuOCnh+CmquCnjeCmn1/gpoXgppXgp43gpp/gp4tf4Kao4Kat4KeHX+CmoeCmv+CmuOCnhycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfgprDgpqzgpr/gpqzgpr7gprBf4Ka44KeL4Kau4Kas4Ka+4KawX+CmruCmmeCnjeCml+CmsuCmrOCmvuCmsF/gpqzgp4Hgpqfgpqzgpr7gprBf4Kas4KeD4Ka54Ka44KeN4Kaq4Kak4Ka/4Kas4Ka+4KawX+CmtuCngeCmleCnjeCmsOCmrOCmvuCmsF/gprbgpqjgpr/gpqzgpr7gprAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgprDgpqzgpr9f4Ka44KeL4KauX+CmruCmmeCnjeCml+Cmsl/gpqzgp4Hgpqdf4Kas4KeD4Ka54Ka44KeN4Kaq4Kak4Ka/X+CmtuCngeCmleCnjeCmsF/gprbgpqjgpr8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4Kaw4Kas4Ka/X+CmuOCni+Cmrl/gpq7gppngp43gppfgprJf4Kas4KeB4KanX+CmrOCng+CmuV/gprbgp4HgppXgp43gprBf4Ka24Kao4Ka/Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tIOCmuOCmruCnnycsXG4gICAgTFRTOiAnQSBoOm1tOnNzIOCmuOCmruCnnycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBBIGg6bW0g4Ka44Kau4KefJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSDgprjgpq7gp58nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgpobgppxdIExUJyxcbiAgICBuZXh0RGF5OiAnW+CmhuCml+CmvuCmruCngOCmleCmvuCmsl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCwgTFQnLFxuICAgIGxhc3REYXk6ICdb4KaX4Kak4KaV4Ka+4KayXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4KaX4KakXSBkZGRkLCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDgpqrgprDgp4cnLFxuICAgIHBhc3Q6ICclcyDgpobgppfgp4cnLFxuICAgIHM6ICfgppXgp5/gp4fgppUg4Ka44KeH4KaV4KeH4Kao4KeN4KahJyxcbiAgICBzczogJyVkIOCmuOCnh+CmleCnh+CmqOCnjeCmoScsXG4gICAgbTogJ+Cmj+CmlSDgpq7gpr/gpqjgpr/gpp8nLFxuICAgIG1tOiAnJWQg4Kau4Ka/4Kao4Ka/4KafJyxcbiAgICBoOiAn4KaP4KaVIOCmmOCmqOCnjeCmn+CmvicsXG4gICAgaGg6ICclZCDgppjgpqjgp43gpp/gpr4nLFxuICAgIGQ6ICfgpo/gppUg4Kam4Ka/4KaoJyxcbiAgICBkZDogJyVkIOCmpuCmv+CmqCcsXG4gICAgTTogJ+Cmj+CmlSDgpq7gpr7gprgnLFxuICAgIE1NOiAnJWQg4Kau4Ka+4Ka4JyxcbiAgICB5OiAn4KaP4KaVIOCmrOCmm+CmsCcsXG4gICAgeXk6ICclZCDgpqzgppvgprAnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgp6fgp6jgp6ngp6rgp6vgp6zgp63gp67gp6/gp6ZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CmsOCmvuCmpHzgprjgppXgpr7gprJ84Kam4KeB4Kaq4KeB4KawfOCmrOCmv+CmleCmvuCmsnzgprDgpr7gpqQvLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4Kaw4Ka+4KakJyAmJiBob3VyID49IDQgfHwgbWVyaWRpZW0gPT09ICfgpqbgp4Hgpqrgp4HgprAnICYmIGhvdXIgPCA1IHx8IG1lcmlkaWVtID09PSAn4Kas4Ka/4KaV4Ka+4KayJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CmsOCmvuCmpCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAn4Ka44KaV4Ka+4KayJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgpqbgp4Hgpqrgp4HgprAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CmrOCmv+CmleCmvuCmsic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4Kaw4Ka+4KakJztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfgvKEnLFxuICAyOiAn4LyiJyxcbiAgMzogJ+C8oycsXG4gIDQ6ICfgvKQnLFxuICA1OiAn4LylJyxcbiAgNjogJ+C8picsXG4gIDc6ICfgvKcnLFxuICA4OiAn4LyoJyxcbiAgOTogJ+C8qScsXG4gIDA6ICfgvKAnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+C8oSc6ICcxJyxcbiAgJ+C8oic6ICcyJyxcbiAgJ+C8oyc6ICczJyxcbiAgJ+C8pCc6ICc0JyxcbiAgJ+C8pSc6ICc1JyxcbiAgJ+C8pic6ICc2JyxcbiAgJ+C8pyc6ICc3JyxcbiAgJ+C8qCc6ICc4JyxcbiAgJ+C8qSc6ICc5JyxcbiAgJ+C8oCc6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JvJywge1xuICBtb250aHM6ICfgvZ/gvrPgvIvgvZbgvIvgvZHgvYTgvIvgvZTgvbxf4L2f4L6z4LyL4L2W4LyL4L2C4L2J4L2y4L2m4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9guC9puC9tOC9mOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZ7gvbLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2j4L6U4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC+suC9tOC9guC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZHgvbTgvZPgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2i4L6S4L6x4L2R4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC9guC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2F4L2y4L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9guC9ieC9suC9puC8i+C9lCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgvZ/gvrPgvIsxX+C9n+C+s+C8izJf4L2f4L6z4LyLM1/gvZ/gvrPgvIs0X+C9n+C+s+C8izVf4L2f4L6z4LyLNl/gvZ/gvrPgvIs3X+C9n+C+s+C8izhf4L2f4L6z4LyLOV/gvZ/gvrPgvIsxMF/gvZ/gvrPgvIsxMV/gvZ/gvrPgvIsxMicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnRSZWdleDogL14o4L2f4L6z4LyLXFxkezEsMn0pLyxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfgvYLgvZ/gvaDgvIvgvYngvbLgvIvgvZjgvItf4L2C4L2f4L2g4LyL4L2f4L6z4LyL4L2W4LyLX+C9guC9n+C9oOC8i+C9mOC9suC9guC8i+C9keC9mOC9ouC8i1/gvYLgvZ/gvaDgvIvgvaPgvrfgvYLgvIvgvZTgvItf4L2C4L2f4L2g4LyL4L2V4L204L2i4LyL4L2W4L20X+C9guC9n+C9oOC8i+C9lOC8i+C9puC9hOC9puC8i1/gvYLgvZ/gvaDgvIvgvabgvqTgvbrgvZPgvIvgvZTgvIsnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgvYngvbLgvIvgvZjgvItf4L2f4L6z4LyL4L2W4LyLX+C9mOC9suC9guC8i+C9keC9mOC9ouC8i1/gvaPgvrfgvYLgvIvgvZTgvItf4L2V4L204L2i4LyL4L2W4L20X+C9lOC8i+C9puC9hOC9puC8i1/gvabgvqTgvbrgvZPgvIvgvZTgvIsnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4L2J4L2yX+C9n+C+s1/gvZjgvbLgvYJf4L2j4L634L2CX+C9leC9tOC9ol/gvabgvYTgvaZf4L2m4L6k4L264L2TJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tJyxcbiAgICBMVFM6ICdBIGg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+C9keC9suC8i+C9ouC9suC9hF0gTFQnLFxuICAgIG5leHREYXk6ICdb4L2m4L2E4LyL4L2J4L2y4L2TXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb4L2W4L2R4L204L2T4LyL4L2V4L6y4L2C4LyL4L2i4L6X4L264L2m4LyL4L2YXSwgTFQnLFxuICAgIGxhc3REYXk6ICdb4L2B4LyL4L2m4L2EXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4L2W4L2R4L204L2T4LyL4L2V4L6y4L2C4LyL4L2Y4L2Q4L2g4LyL4L2YXSBkZGRkLCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDgvaPgvIsnLFxuICAgIHBhc3Q6ICclcyDgvabgvpTgvZPgvIvgvaMnLFxuICAgIHM6ICfgvaPgvZjgvIvgvabgvYQnLFxuICAgIHNzOiAnJWQg4L2m4L6Q4L2i4LyL4L2G4LyNJyxcbiAgICBtOiAn4L2m4L6Q4L2i4LyL4L2Y4LyL4L2C4L2F4L2y4L2CJyxcbiAgICBtbTogJyVkIOC9puC+kOC9ouC8i+C9mCcsXG4gICAgaDogJ+C9huC9tOC8i+C9muC9vOC9keC8i+C9guC9heC9suC9gicsXG4gICAgaGg6ICclZCDgvYbgvbTgvIvgvZrgvbzgvZEnLFxuICAgIGQ6ICfgvYngvbLgvZPgvIvgvYLgvYXgvbLgvYInLFxuICAgIGRkOiAnJWQg4L2J4L2y4L2T4LyLJyxcbiAgICBNOiAn4L2f4L6z4LyL4L2W4LyL4L2C4L2F4L2y4L2CJyxcbiAgICBNTTogJyVkIOC9n+C+s+C8i+C9licsXG4gICAgeTogJ+C9o+C9vOC8i+C9guC9heC9suC9gicsXG4gICAgeXk6ICclZCDgvaPgvbwnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgvKHgvKLgvKPgvKTgvKXgvKbgvKfgvKjgvKngvKBdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+C9mOC9muC9k+C8i+C9mOC9vHzgvZ7gvbzgvYLgvabgvIvgvYDgvaZ84L2J4L2y4L2T4LyL4L2C4L204L2EfOC9keC9guC9vOC9hOC8i+C9keC9gnzgvZjgvZrgvZPgvIvgvZjgvbwvLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4L2Y4L2a4L2T4LyL4L2Y4L28JyAmJiBob3VyID49IDQgfHwgbWVyaWRpZW0gPT09ICfgvYngvbLgvZPgvIvgvYLgvbTgvYQnICYmIGhvdXIgPCA1IHx8IG1lcmlkaWVtID09PSAn4L2R4L2C4L284L2E4LyL4L2R4L2CJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+C9mOC9muC9k+C8i+C9mOC9vCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAn4L2e4L284L2C4L2m4LyL4L2A4L2mJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgvYngvbLgvZPgvIvgvYLgvbTgvYQnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+C9keC9guC9vOC9hOC8i+C9keC9gic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4L2Y4L2a4L2T4LyL4L2Y4L28JztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lV2l0aE11dGF0aW9uKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgbW06ICdtdW51dGVubicsXG4gICAgTU06ICdtaXonLFxuICAgIGRkOiAnZGV2ZXpoJ1xuICB9O1xuICByZXR1cm4gbnVtYmVyICsgJyAnICsgbXV0YXRpb24oZm9ybWF0W2tleV0sIG51bWJlcik7XG59XG5cbmZ1bmN0aW9uIHNwZWNpYWxNdXRhdGlvbkZvclllYXJzKG51bWJlcikge1xuICBzd2l0Y2ggKGxhc3ROdW1iZXIobnVtYmVyKSkge1xuICAgIGNhc2UgMTpcbiAgICBjYXNlIDM6XG4gICAgY2FzZSA0OlxuICAgIGNhc2UgNTpcbiAgICBjYXNlIDk6XG4gICAgICByZXR1cm4gbnVtYmVyICsgJyBibG9heic7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bWJlciArICcgdmxvYXonO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxhc3ROdW1iZXIobnVtYmVyKSB7XG4gIGlmIChudW1iZXIgPiA5KSB7XG4gICAgcmV0dXJuIGxhc3ROdW1iZXIobnVtYmVyICUgMTApO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlcjtcbn1cblxuZnVuY3Rpb24gbXV0YXRpb24odGV4dCwgbnVtYmVyKSB7XG4gIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICByZXR1cm4gc29mdE11dGF0aW9uKHRleHQpO1xuICB9XG5cbiAgcmV0dXJuIHRleHQ7XG59XG5cbmZ1bmN0aW9uIHNvZnRNdXRhdGlvbih0ZXh0KSB7XG4gIHZhciBtdXRhdGlvblRhYmxlID0ge1xuICAgIG06ICd2JyxcbiAgICBiOiAndicsXG4gICAgZDogJ3onXG4gIH07XG5cbiAgaWYgKG11dGF0aW9uVGFibGVbdGV4dC5jaGFyQXQoMCldID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIHJldHVybiBtdXRhdGlvblRhYmxlW3RleHQuY2hhckF0KDApXSArIHRleHQuc3Vic3RyaW5nKDEpO1xufVxuXG52YXIgbW9udGhzUGFyc2UgPSBbL15nZW4vaSwgL15jW8q8XFwnXWh3ZS9pLCAvXm1ldS9pLCAvXmVici9pLCAvXm1hZS9pLCAvXihtZXp8ZXZlKS9pLCAvXmdvdS9pLCAvXmVvcy9pLCAvXmd3ZS9pLCAvXmhlci9pLCAvXmR1L2ksIC9ea2VyL2ldLFxuICAgIG1vbnRoc1JlZ2V4ID0gL14oZ2VudmVyfGNbyrxcXCddaHdldnJlcnxtZXVyemh8ZWJyZWx8bWFlfG1lemhldmVufGdvdWVyZXxlb3N0fGd3ZW5nb2xvfGhlcmV8ZHV8a2VyenV8Z2VufGNbyrxcXCddaHdlfG1ldXxlYnJ8bWFlfGV2ZXxnb3V8ZW9zfGd3ZXxoZXJ8ZHV8a2VyKS9pLFxuICAgIG1vbnRoc1N0cmljdFJlZ2V4ID0gL14oZ2VudmVyfGNbyrxcXCddaHdldnJlcnxtZXVyemh8ZWJyZWx8bWFlfG1lemhldmVufGdvdWVyZXxlb3N0fGd3ZW5nb2xvfGhlcmV8ZHV8a2VyenUpL2ksXG4gICAgbW9udGhzU2hvcnRTdHJpY3RSZWdleCA9IC9eKGdlbnxjW8q8XFwnXWh3ZXxtZXV8ZWJyfG1hZXxldmV8Z291fGVvc3xnd2V8aGVyfGR1fGtlcikvaSxcbiAgICBmdWxsV2Vla2RheXNQYXJzZSA9IFsvXnN1bC9pLCAvXmx1bi9pLCAvXm1ldXJ6aC9pLCAvXm1lcmNbyrxcXCddaGVyL2ksIC9eeWFvdS9pLCAvXmd3ZW5lci9pLCAvXnNhZG9ybi9pXSxcbiAgICBzaG9ydFdlZWtkYXlzUGFyc2UgPSBbL15TdWwvaSwgL15MdW4vaSwgL15NZXUvaSwgL15NZXIvaSwgL15ZYW8vaSwgL15Hd2UvaSwgL15TYWQvaV0sXG4gICAgbWluV2Vla2RheXNQYXJzZSA9IFsvXlN1L2ksIC9eTHUvaSwgL15NZShbXnJdfCQpL2ksIC9eTWVyL2ksIC9eWWEvaSwgL15Hdy9pLCAvXlNhL2ldO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnYnInLCB7XG4gIG1vbnRoczogJ0dlbnZlcl9Dyrxod2V2cmVyX01ldXJ6aF9FYnJlbF9NYWVfTWV6aGV2ZW5fR291ZXJlX0Vvc3RfR3dlbmdvbG9fSGVyZV9EdV9LZXJ6dScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdHZW5fQ8q8aHdlX01ldV9FYnJfTWFlX0V2ZV9Hb3VfRW9zX0d3ZV9IZXJfRHVfS2VyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bF9MdW5fTWV1cnpoX01lcmPKvGhlcl9ZYW91X0d3ZW5lcl9TYWRvcm4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdWxfTHVuX01ldV9NZXJfWWFvX0d3ZV9TYWQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTHVfTWVfTWVyX1lhX0d3X1NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlOiBtaW5XZWVrZGF5c1BhcnNlLFxuICBmdWxsV2Vla2RheXNQYXJzZTogZnVsbFdlZWtkYXlzUGFyc2UsXG4gIHNob3J0V2Vla2RheXNQYXJzZTogc2hvcnRXZWVrZGF5c1BhcnNlLFxuICBtaW5XZWVrZGF5c1BhcnNlOiBtaW5XZWVrZGF5c1BhcnNlLFxuICBtb250aHNSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1Nob3J0UmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTdHJpY3RSZWdleDogbW9udGhzU3RyaWN0UmVnZXgsXG4gIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6IG1vbnRoc1Nob3J0U3RyaWN0UmVnZXgsXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgW2Egdml6XSBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgW2Egdml6XSBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIFthIHZpel0gTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSGl6aXYgZGFdIExUJyxcbiAgICBuZXh0RGF5OiAnW1dhcmPKvGhvYXpoIGRhXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtkYV0gTFQnLFxuICAgIGxhc3REYXk6ICdbRGVjyrxoIGRhXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtwYXNldCBkYV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnYS1iZW5uICVzJyxcbiAgICBwYXN0OiAnJXMgyrx6bycsXG4gICAgczogJ3VuIG5lYmV1ZCBzZWdvbmRlbm5vw7knLFxuICAgIHNzOiAnJWQgZWlsZW5uJyxcbiAgICBtOiAndXIgdnVudXRlbm4nLFxuICAgIG1tOiByZWxhdGl2ZVRpbWVXaXRoTXV0YXRpb24sXG4gICAgaDogJ3VuIGV1cicsXG4gICAgaGg6ICclZCBldXInLFxuICAgIGQ6ICd1biBkZXZlemgnLFxuICAgIGRkOiByZWxhdGl2ZVRpbWVXaXRoTXV0YXRpb24sXG4gICAgTTogJ3VyIG1peicsXG4gICAgTU06IHJlbGF0aXZlVGltZVdpdGhNdXRhdGlvbixcbiAgICB5OiAndXIgYmxvYXonLFxuICAgIHl5OiBzcGVjaWFsTXV0YXRpb25Gb3JZZWFyc1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oYcOxfHZldCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgPT09IDEgPyAnYcOxJyA6ICd2ZXQnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9hLm0ufGcubS4vLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuID09PSAnZy5tLic7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICByZXR1cm4gaG91ciA8IDEyID8gJ2EubS4nIDogJ2cubS4nO1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICB2YXIgcmVzdWx0ID0gbnVtYmVyICsgJyAnO1xuXG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAnc3MnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ3Nla3VuZGEnO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIgfHwgbnVtYmVyID09PSAzIHx8IG51bWJlciA9PT0gNCkge1xuICAgICAgICByZXN1bHQgKz0gJ3Nla3VuZGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmRpJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnamVkbmEgbWludXRhJyA6ICdqZWRuZSBtaW51dGUnO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ21pbnV0YSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWludXRlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWludXRhJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnamVkYW4gc2F0JyA6ICdqZWRub2cgc2F0YSc7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2F0JztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzYXRhJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2F0aSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnZGFuJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnZGFuYSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWplc2VjJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdtamVzZWNhJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWplc2VjaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnZ29kaW5hJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdnb2RpbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9ICdnb2RpbmEnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2JzJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJ0X2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJhcl9va3RvYmFyX25vdmVtYmFyX2RlY2VtYmFyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbi5fZmViLl9tYXIuX2Fwci5fbWFqLl9qdW4uX2p1bC5fYXVnLl9zZXAuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ25lZGplbGphX3BvbmVkamVsamFrX3V0b3Jha19zcmlqZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZWQuX3Bvbi5fdXRvLl9zcmkuX8SNZXQuX3BldC5fc3ViLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb191dF9zcl/EjWVfcGVfc3UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2RhbmFzIHVdIExUJyxcbiAgICBuZXh0RGF5OiAnW3N1dHJhIHVdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtuZWRqZWxqdV0gW3VdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbdV0gW3NyaWplZHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzdWJvdHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3VdIGRkZGQgW3VdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdbanXEjWVyIHVdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbcHJvxaFsdV0gZGRkZCBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1twcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1twcm/FoWxpXSBkZGRkIFt1XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3phICVzJyxcbiAgICBwYXN0OiAncHJpamUgJXMnLFxuICAgIHM6ICdwYXIgc2VrdW5kaScsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiAnZGFuJyxcbiAgICBkZDogdHJhbnNsYXRlLFxuICAgIE06ICdtamVzZWMnLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogJ2dvZGludScsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnY2EnLCB7XG4gIG1vbnRoczoge1xuICAgIHN0YW5kYWxvbmU6ICdnZW5lcl9mZWJyZXJfbWFyw6dfYWJyaWxfbWFpZ19qdW55X2p1bGlvbF9hZ29zdF9zZXRlbWJyZV9vY3R1YnJlX25vdmVtYnJlX2Rlc2VtYnJlJy5zcGxpdCgnXycpLFxuICAgIGZvcm1hdDogXCJkZSBnZW5lcl9kZSBmZWJyZXJfZGUgbWFyw6dfZCdhYnJpbF9kZSBtYWlnX2RlIGp1bnlfZGUganVsaW9sX2QnYWdvc3RfZGUgc2V0ZW1icmVfZCdvY3R1YnJlX2RlIG5vdmVtYnJlX2RlIGRlc2VtYnJlXCIuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL0Rbb0RdPyhcXHMpK01NTU0vXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAnZ2VuLl9mZWJyLl9tYXLDp19hYnIuX21haWdfanVueV9qdWwuX2FnLl9zZXQuX29jdC5fbm92Ll9kZXMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ2RpdW1lbmdlX2RpbGx1bnNfZGltYXJ0c19kaW1lY3Jlc19kaWpvdXNfZGl2ZW5kcmVzX2Rpc3NhYnRlJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZGcuX2RsLl9kdC5fZGMuX2RqLl9kdi5fZHMuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RnX2RsX2R0X2RjX2RqX2R2X2RzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBsbDogJ0QgTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBbZGVdIFlZWVkgW2EgbGVzXSBIOm1tJyxcbiAgICBsbGw6ICdEIE1NTSBZWVlZLCBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gW2RlXSBZWVlZIFthIGxlc10gSDptbScsXG4gICAgbGxsbDogJ2RkZCBEIE1NTSBZWVlZLCBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6IGZ1bmN0aW9uIHNhbWVEYXkoKSB7XG4gICAgICByZXR1cm4gJ1thdnVpIGEgJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAnbGVzJyA6ICdsYScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dERheTogZnVuY3Rpb24gbmV4dERheSgpIHtcbiAgICAgIHJldHVybiAnW2RlbcOgIGEgJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAnbGVzJyA6ICdsYScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuICdkZGRkIFthICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ2xlcycgOiAnbGEnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3REYXk6IGZ1bmN0aW9uIGxhc3REYXkoKSB7XG4gICAgICByZXR1cm4gJ1thaGlyIGEgJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAnbGVzJyA6ICdsYScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuICdbZWxdIGRkZGQgW3Bhc3NhdCBhICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ2xlcycgOiAnbGEnKSArICddIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiBcImQnYXF1w60gJXNcIixcbiAgICBwYXN0OiAnZmEgJXMnLFxuICAgIHM6ICd1bnMgc2Vnb25zJyxcbiAgICBzczogJyVkIHNlZ29ucycsXG4gICAgbTogJ3VuIG1pbnV0JyxcbiAgICBtbTogJyVkIG1pbnV0cycsXG4gICAgaDogJ3VuYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmVzJyxcbiAgICBkOiAndW4gZGlhJyxcbiAgICBkZDogJyVkIGRpZXMnLFxuICAgIE06ICd1biBtZXMnLFxuICAgIE1NOiAnJWQgbWVzb3MnLFxuICAgIHk6ICd1biBhbnknLFxuICAgIHl5OiAnJWQgYW55cydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHJ8bnx0fMOofGEpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgPT09IDEgPyAncicgOiBudW1iZXIgPT09IDIgPyAnbicgOiBudW1iZXIgPT09IDMgPyAncicgOiBudW1iZXIgPT09IDQgPyAndCcgOiAnw6gnO1xuXG4gICAgaWYgKHBlcmlvZCA9PT0gJ3cnIHx8IHBlcmlvZCA9PT0gJ1cnKSB7XG4gICAgICBvdXRwdXQgPSAnYSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRocyA9ICdsZWRlbl/Dum5vcl9ixZllemVuX2R1YmVuX2t2xJt0ZW5fxI1lcnZlbl/EjWVydmVuZWNfc3JwZW5fesOhxZnDrV/FmcOtamVuX2xpc3RvcGFkX3Byb3NpbmVjJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1Nob3J0ID0gJ2xlZF/Dum5vX2LFmWVfZHViX2t2xJtfxI12bl/EjXZjX3NycF96w6HFmV/FmcOtal9saXNfcHJvJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1BhcnNlID0gWy9ebGVkL2ksIC9ew7puby9pLCAvXmLFmWUvaSwgL15kdWIvaSwgL15rdsSbL2ksIC9eKMSNdm58xI1lcnZlbiR8xI1lcnZuYSkvaSwgL14oxI12Y3zEjWVydmVuZWN8xI1lcnZlbmNlKS9pLCAvXnNycC9pLCAvXnrDocWZL2ksIC9exZnDrWovaSwgL15saXMvaSwgL15wcm8vaV0sXG4gICAgbW9udGhzUmVnZXggPSAvXihsZWRlbnzDum5vcnxixZllemVufGR1YmVufGt2xJt0ZW58xI1lcnZlbmVjfMSNZXJ2ZW5jZXzEjWVydmVufMSNZXJ2bmF8c3JwZW58esOhxZnDrXzFmcOtamVufGxpc3RvcGFkfHByb3NpbmVjfGxlZHzDum5vfGLFmWV8ZHVifGt2xJt8xI12bnzEjXZjfHNycHx6w6HFmXzFmcOtanxsaXN8cHJvKS9pO1xuXG5mdW5jdGlvbiBwbHVyYWwobikge1xuICByZXR1cm4gbiA+IDEgJiYgbiA8IDUgJiYgfn4obiAvIDEwKSAhPT0gMTtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgcmVzdWx0ID0gbnVtYmVyICsgJyAnO1xuXG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdww6FyIHNla3VuZCcgOiAncMOhciBzZWt1bmRhbWknO1xuXG4gICAgY2FzZSAnc3MnOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdzZWt1bmR5JyA6ICdzZWt1bmQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnc2VrdW5kYW1pJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnbWludXRhJyA6IGlzRnV0dXJlID8gJ21pbnV0dScgOiAnbWludXRvdSc7XG5cbiAgICBjYXNlICdtbSc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ21pbnV0eScgOiAnbWludXQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnbWludXRhbWknO1xuICAgICAgfVxuXG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICdob2RpbmEnIDogaXNGdXR1cmUgPyAnaG9kaW51JyA6ICdob2Rpbm91JztcblxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnaG9kaW55JyA6ICdob2RpbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdob2RpbmFtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2RlbicgOiAnZG5lbSc7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ2RueScgOiAnZG7DrScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdkbnknO1xuICAgICAgfVxuXG4gICAgY2FzZSAnTSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtxJtzw61jJyA6ICdtxJtzw61jZW0nO1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdtxJtzw61jZScgOiAnbcSbc8OtY8WvJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ23Em3PDrWNpJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAncm9rJyA6ICdyb2tlbSc7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ3Jva3knIDogJ2xldCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdsZXR5JztcbiAgICAgIH1cblxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2NzJywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRoc1Nob3J0LFxuICBtb250aHNSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1Nob3J0UmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTdHJpY3RSZWdleDogL14obGVkZW58bGVkbmF8w7pub3JhfMO6bm9yfGLFmWV6ZW58YsWZZXpuYXxkdWJlbnxkdWJuYXxrdsSbdGVufGt2xJt0bmF8xI1lcnZlbmVjfMSNZXJ2ZW5jZXzEjWVydmVufMSNZXJ2bmF8c3JwZW58c3JwbmF8esOhxZnDrXzFmcOtamVufMWZw61qbmF8bGlzdG9wYWR1fGxpc3RvcGFkfHByb3NpbmVjfHByb3NpbmNlKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXihsZWR8w7pub3xixZllfGR1YnxrdsSbfMSNdm58xI12Y3xzcnB8esOhxZl8xZnDrWp8bGlzfHBybykvaSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICduZWTEm2xlX3BvbmTEm2zDrV/DunRlcsO9X3N0xZllZGFfxI10dnJ0ZWtfcMOhdGVrX3NvYm90YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ25lX3BvX8O6dF9zdF/EjXRfcMOhX3NvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ25lX3BvX8O6dF9zdF/EjXRfcMOhX3NvJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgSDptbScsXG4gICAgTExMTDogJ2RkZGQgRC4gTU1NTSBZWVlZIEg6bW0nLFxuICAgIGw6ICdELiBNLiBZWVlZJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbZG5lcyB2XSBMVCcsXG4gICAgbmV4dERheTogJ1t6w610cmEgdl0gTFQnLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICdbdiBuZWTEm2xpIHZdIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gJ1t2XSBkZGRkIFt2XSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3ZlIHN0xZllZHUgdl0gTFQnO1xuXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gJ1t2ZSDEjXR2cnRlayB2XSBMVCc7XG5cbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3YgcMOhdGVrIHZdIExUJztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbdiBzb2JvdHUgdl0gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGFzdERheTogJ1t2xI1lcmEgdl0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICdbbWludWxvdSBuZWTEm2xpIHZdIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gJ1ttaW51bMOpXSBkZGRkIFt2XSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW21pbnVsb3Ugc3TFmWVkdSB2XSBMVCc7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuICdbbWludWzDvV0gZGRkZCBbdl0gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1ttaW51bG91IHNvYm90dSB2XSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3phICVzJyxcbiAgICBwYXN0OiAncMWZZWQgJXMnLFxuICAgIHM6IHRyYW5zbGF0ZSxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0ZSxcbiAgICBoaDogdHJhbnNsYXRlLFxuICAgIGQ6IHRyYW5zbGF0ZSxcbiAgICBkZDogdHJhbnNsYXRlLFxuICAgIE06IHRyYW5zbGF0ZSxcbiAgICBNTTogdHJhbnNsYXRlLFxuICAgIHk6IHRyYW5zbGF0ZSxcbiAgICB5eTogdHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdjdicsIHtcbiAgbW9udGhzOiAn0LrTkdGA0LvQsNGHX9C90LDRgNOR0YFf0L/Rg9GIX9Cw0LrQsF/QvNCw0Llf0qvTl9GA0YLQvNC1X9GD0YLTkV/Sq9GD0YDQu9CwX9Cw0LLTkdC9X9GO0L/QsF/Rh9Oz0Lpf0YDQsNGI0YLQsNCyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9C605HRgF/QvdCw0YBf0L/Rg9GIX9Cw0LrQsF/QvNCw0Llf0qvTl9GAX9GD0YLTkV/Sq9GD0YBf0LDQstC9X9GO0L/QsF/Rh9Oz0Lpf0YDQsNGIJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ9Cy0YvRgNGB0LDRgNC90LjQutGD0L1f0YLRg9C90YLQuNC60YPQvV/Ri9GC0LvQsNGA0LjQutGD0L1f0Y7QvdC60YPQvV/QutOX0qvQvdC10YDQvdC40LrRg9C9X9GN0YDQvdC10LrRg9C9X9GI05HQvNCw0YLQutGD0L0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQstGL0YBf0YLRg9C9X9GL0YLQu1/RjtC9X9C605fSq1/RjdGA0L1f0YjTkdC8Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9Cy0YBf0YLQvV/Ri9GCX9GO0L1f0LrSq1/RjdGAX9GI0LwnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC1NTS1ZWVlZJyxcbiAgICBMTDogJ1lZWVkgW9Kr0YPQu9GF0LhdIE1NTU0gW9GD0LnTkdGF05fQvV0gRFst0LzTl9GI05ddJyxcbiAgICBMTEw6ICdZWVlZIFvSq9GD0LvRhdC4XSBNTU1NIFvRg9C505HRhdOX0L1dIERbLdC805fRiNOXXSwgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBZWVlZIFvSq9GD0LvRhdC4XSBNTU1NIFvRg9C505HRhdOX0L1dIERbLdC805fRiNOXXSwgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQn9Cw0Y/QvV0gTFQgW9GB0LXRhdC10YLRgNC1XScsXG4gICAgbmV4dERheTogJ1vQq9GA0LDQvV0gTFQgW9GB0LXRhdC10YLRgNC1XScsXG4gICAgbGFzdERheTogJ1vTltC90LXRgF0gTFQgW9GB0LXRhdC10YLRgNC1XScsXG4gICAgbmV4dFdlZWs6ICdb0qrQuNGC0LXRgV0gZGRkZCBMVCBb0YHQtdGF0LXRgtGA0LVdJyxcbiAgICBsYXN0V2VlazogJ1vQmNGA0YLQvdOXXSBkZGRkIExUIFvRgdC10YXQtdGC0YDQtV0nLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiBmdW5jdGlvbiBmdXR1cmUob3V0cHV0KSB7XG4gICAgICB2YXIgYWZmaXggPSAv0YHQtdGF0LXRgiQvaS5leGVjKG91dHB1dCkgPyAn0YDQtdC9JyA6IC/Sq9GD0LskL2kuZXhlYyhvdXRwdXQpID8gJ9GC0LDQvScgOiAn0YDQsNC9JztcbiAgICAgIHJldHVybiBvdXRwdXQgKyBhZmZpeDtcbiAgICB9LFxuICAgIHBhc3Q6ICclcyDQutCw0Y/Qu9C70LAnLFxuICAgIHM6ICfQv9OX0YAt0LjQuiDSq9C10LrQutGD0L3RgicsXG4gICAgc3M6ICclZCDSq9C10LrQutGD0L3RgicsXG4gICAgbTogJ9C/05fRgCDQvNC40L3Rg9GCJyxcbiAgICBtbTogJyVkINC80LjQvdGD0YInLFxuICAgIGg6ICfQv9OX0YAg0YHQtdGF0LXRgicsXG4gICAgaGg6ICclZCDRgdC10YXQtdGCJyxcbiAgICBkOiAn0L/Tl9GAINC60YPQvScsXG4gICAgZGQ6ICclZCDQutGD0L0nLFxuICAgIE06ICfQv9OX0YAg0YPQudOR0YUnLFxuICAgIE1NOiAnJWQg0YPQudOR0YUnLFxuICAgIHk6ICfQv9OX0YAg0qvRg9C7JyxcbiAgICB5eTogJyVkINKr0YPQuydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LdC805fRiC8sXG4gIG9yZGluYWw6ICclZC3QvNOX0YgnLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdjeScsIHtcbiAgbW9udGhzOiAnSW9uYXdyX0Nod2Vmcm9yX01hd3J0aF9FYnJpbGxfTWFpX01laGVmaW5fR29yZmZlbm5hZl9Bd3N0X01lZGlfSHlkcmVmX1RhY2h3ZWRkX1JoYWdmeXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSW9uX0Nod2VfTWF3X0Vicl9NYWlfTWVoX0dvcl9Bd3NfTWVkX0h5ZF9UYWNoX1JoYWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnRHlkZCBTdWxfRHlkZCBMbHVuX0R5ZGQgTWF3cnRoX0R5ZGQgTWVyY2hlcl9EeWRkIElhdV9EeWRkIEd3ZW5lcl9EeWRkIFNhZHdybicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N1bF9MbHVuX01hd19NZXJfSWF1X0d3ZV9TYWQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTGxfTWFfTWVfSWFfR3dfU2EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tIZWRkaXcgYW1dIExUJyxcbiAgICBuZXh0RGF5OiAnW1lmb3J5IGFtXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthbV0gTFQnLFxuICAgIGxhc3REYXk6ICdbRGRvZSBhbV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbZGl3ZXRoYWYgYW1dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ21ld24gJXMnLFxuICAgIHBhc3Q6ICclcyB5biDDtGwnLFxuICAgIHM6ICd5Y2h5ZGlnIGVpbGlhZGF1JyxcbiAgICBzczogJyVkIGVpbGlhZCcsXG4gICAgbTogJ211bnVkJyxcbiAgICBtbTogJyVkIG11bnVkJyxcbiAgICBoOiAnYXdyJyxcbiAgICBoaDogJyVkIGF3cicsXG4gICAgZDogJ2Rpd3Jub2QnLFxuICAgIGRkOiAnJWQgZGl3cm5vZCcsXG4gICAgTTogJ21pcycsXG4gICAgTU06ICclZCBtaXMnLFxuICAgIHk6ICdibHd5ZGR5bicsXG4gICAgeXk6ICclZCBmbHluZWRkJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZmVkfGFpbnxhZnxpbHx5ZGR8ZWR8ZWcpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlcixcbiAgICAgICAgb3V0cHV0ID0gJycsXG4gICAgICAgIGxvb2t1cCA9IFsnJywgJ2FmJywgJ2lsJywgJ3lkZCcsICd5ZGQnLCAnZWQnLCAnZWQnLCAnZWQnLCAnZmVkJywgJ2ZlZCcsICdmZWQnLCAnZWcnLCAnZmVkJywgJ2VnJywgJ2VnJywgJ2ZlZCcsICdlZycsICdlZycsICdmZWQnLCAnZWcnLCAnZmVkJ107XG5cbiAgICBpZiAoYiA+IDIwKSB7XG4gICAgICBpZiAoYiA9PT0gNDAgfHwgYiA9PT0gNTAgfHwgYiA9PT0gNjAgfHwgYiA9PT0gODAgfHwgYiA9PT0gMTAwKSB7XG4gICAgICAgIG91dHB1dCA9ICdmZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0ID0gJ2Fpbic7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChiID4gMCkge1xuICAgICAgb3V0cHV0ID0gbG9va3VwW2JdO1xuICAgIH1cblxuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2RhJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJ0c19hcHJpbF9tYWpfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW5fZmViX21hcl9hcHJfbWFqX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlYycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdzw7huZGFnX21hbmRhZ190aXJzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7hyZGFnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnc8O4bl9tYW5fdGlyX29uc190b3JfZnJlX2zDuHInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnc8O4X21hX3RpX29uX3RvX2ZyX2zDuCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIFtkLl0gRC4gTU1NTSBZWVlZIFtrbC5dIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbaSBkYWcga2wuXSBMVCcsXG4gICAgbmV4dERheTogJ1tpIG1vcmdlbiBrbC5dIExUJyxcbiAgICBuZXh0V2VlazogJ3DDpSBkZGRkIFtrbC5dIExUJyxcbiAgICBsYXN0RGF5OiAnW2kgZ8OlciBrbC5dIExUJyxcbiAgICBsYXN0V2VlazogJ1tpXSBkZGRkW3Mga2wuXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdvbSAlcycsXG4gICAgcGFzdDogJyVzIHNpZGVuJyxcbiAgICBzOiAnZsOlIHNla3VuZGVyJyxcbiAgICBzczogJyVkIHNla3VuZGVyJyxcbiAgICBtOiAnZXQgbWludXQnLFxuICAgIG1tOiAnJWQgbWludXR0ZXInLFxuICAgIGg6ICdlbiB0aW1lJyxcbiAgICBoaDogJyVkIHRpbWVyJyxcbiAgICBkOiAnZW4gZGFnJyxcbiAgICBkZDogJyVkIGRhZ2UnLFxuICAgIE06ICdlbiBtw6VuZWQnLFxuICAgIE1NOiAnJWQgbcOlbmVkZXInLFxuICAgIHk6ICdldCDDpXInLFxuICAgIHl5OiAnJWQgw6VyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIG06IFsnZWluZSBNaW51dGUnLCAnZWluZXIgTWludXRlJ10sXG4gICAgaDogWydlaW5lIFN0dW5kZScsICdlaW5lciBTdHVuZGUnXSxcbiAgICBkOiBbJ2VpbiBUYWcnLCAnZWluZW0gVGFnJ10sXG4gICAgZGQ6IFtudW1iZXIgKyAnIFRhZ2UnLCBudW1iZXIgKyAnIFRhZ2VuJ10sXG4gICAgdzogWydlaW5lIFdvY2hlJywgJ2VpbmVyIFdvY2hlJ10sXG4gICAgTTogWydlaW4gTW9uYXQnLCAnZWluZW0gTW9uYXQnXSxcbiAgICBNTTogW251bWJlciArICcgTW9uYXRlJywgbnVtYmVyICsgJyBNb25hdGVuJ10sXG4gICAgeTogWydlaW4gSmFocicsICdlaW5lbSBKYWhyJ10sXG4gICAgeXk6IFtudW1iZXIgKyAnIEphaHJlJywgbnVtYmVyICsgJyBKYWhyZW4nXVxuICB9O1xuICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2RlLWF0Jywge1xuICBtb250aHM6ICdKw6RubmVyX0ZlYnJ1YXJfTcOkcnpfQXByaWxfTWFpX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSsOkbi5fRmViLl9Nw6Ryel9BcHIuX01haV9KdW5pX0p1bGlfQXVnLl9TZXAuX09rdC5fTm92Ll9EZXouJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ1Nvbm50YWdfTW9udGFnX0RpZW5zdGFnX01pdHR3b2NoX0Rvbm5lcnN0YWdfRnJlaXRhZ19TYW1zdGFnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU28uX01vLl9EaS5fTWkuX0RvLl9Gci5fU2EuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1NvX01vX0RpX01pX0RvX0ZyX1NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRC4gTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbaGV1dGUgdW1dIExUIFtVaHJdJyxcbiAgICBzYW1lRWxzZTogJ0wnLFxuICAgIG5leHREYXk6ICdbbW9yZ2VuIHVtXSBMVCBbVWhyXScsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFt1bV0gTFQgW1Vocl0nLFxuICAgIGxhc3REYXk6ICdbZ2VzdGVybiB1bV0gTFQgW1Vocl0nLFxuICAgIGxhc3RXZWVrOiAnW2xldHp0ZW5dIGRkZGQgW3VtXSBMVCBbVWhyXSdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICd2b3IgJXMnLFxuICAgIHM6ICdlaW4gcGFhciBTZWt1bmRlbicsXG4gICAgc3M6ICclZCBTZWt1bmRlbicsXG4gICAgbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtbTogJyVkIE1pbnV0ZW4nLFxuICAgIGg6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaGg6ICclZCBTdHVuZGVuJyxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHc6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgd3c6ICclZCBXb2NoZW4nLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIG06IFsnZWluZSBNaW51dGUnLCAnZWluZXIgTWludXRlJ10sXG4gICAgaDogWydlaW5lIFN0dW5kZScsICdlaW5lciBTdHVuZGUnXSxcbiAgICBkOiBbJ2VpbiBUYWcnLCAnZWluZW0gVGFnJ10sXG4gICAgZGQ6IFtudW1iZXIgKyAnIFRhZ2UnLCBudW1iZXIgKyAnIFRhZ2VuJ10sXG4gICAgdzogWydlaW5lIFdvY2hlJywgJ2VpbmVyIFdvY2hlJ10sXG4gICAgTTogWydlaW4gTW9uYXQnLCAnZWluZW0gTW9uYXQnXSxcbiAgICBNTTogW251bWJlciArICcgTW9uYXRlJywgbnVtYmVyICsgJyBNb25hdGVuJ10sXG4gICAgeTogWydlaW4gSmFocicsICdlaW5lbSBKYWhyJ10sXG4gICAgeXk6IFtudW1iZXIgKyAnIEphaHJlJywgbnVtYmVyICsgJyBKYWhyZW4nXVxuICB9O1xuICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2RlLWNoJywge1xuICBtb250aHM6ICdKYW51YXJfRmVicnVhcl9Nw6Ryel9BcHJpbF9NYWlfSnVuaV9KdWxpX0F1Z3VzdF9TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXplbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW4uX0ZlYi5fTcOkcnpfQXByLl9NYWlfSnVuaV9KdWxpX0F1Zy5fU2VwLl9Pa3QuX05vdi5fRGV6Licuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdTb25udGFnX01vbnRhZ19EaWVuc3RhZ19NaXR0d29jaF9Eb25uZXJzdGFnX0ZyZWl0YWdfU2Ftc3RhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1NvX01vX0RpX01pX0RvX0ZyX1NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1NvX01vX0RpX01pX0RvX0ZyX1NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRC4gTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbaGV1dGUgdW1dIExUIFtVaHJdJyxcbiAgICBzYW1lRWxzZTogJ0wnLFxuICAgIG5leHREYXk6ICdbbW9yZ2VuIHVtXSBMVCBbVWhyXScsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFt1bV0gTFQgW1Vocl0nLFxuICAgIGxhc3REYXk6ICdbZ2VzdGVybiB1bV0gTFQgW1Vocl0nLFxuICAgIGxhc3RXZWVrOiAnW2xldHp0ZW5dIGRkZGQgW3VtXSBMVCBbVWhyXSdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICd2b3IgJXMnLFxuICAgIHM6ICdlaW4gcGFhciBTZWt1bmRlbicsXG4gICAgc3M6ICclZCBTZWt1bmRlbicsXG4gICAgbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtbTogJyVkIE1pbnV0ZW4nLFxuICAgIGg6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaGg6ICclZCBTdHVuZGVuJyxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHc6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgd3c6ICclZCBXb2NoZW4nLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIG06IFsnZWluZSBNaW51dGUnLCAnZWluZXIgTWludXRlJ10sXG4gICAgaDogWydlaW5lIFN0dW5kZScsICdlaW5lciBTdHVuZGUnXSxcbiAgICBkOiBbJ2VpbiBUYWcnLCAnZWluZW0gVGFnJ10sXG4gICAgZGQ6IFtudW1iZXIgKyAnIFRhZ2UnLCBudW1iZXIgKyAnIFRhZ2VuJ10sXG4gICAgdzogWydlaW5lIFdvY2hlJywgJ2VpbmVyIFdvY2hlJ10sXG4gICAgTTogWydlaW4gTW9uYXQnLCAnZWluZW0gTW9uYXQnXSxcbiAgICBNTTogW251bWJlciArICcgTW9uYXRlJywgbnVtYmVyICsgJyBNb25hdGVuJ10sXG4gICAgeTogWydlaW4gSmFocicsICdlaW5lbSBKYWhyJ10sXG4gICAgeXk6IFtudW1iZXIgKyAnIEphaHJlJywgbnVtYmVyICsgJyBKYWhyZW4nXVxuICB9O1xuICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IGZvcm1hdFtrZXldWzBdIDogZm9ybWF0W2tleV1bMV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2RlJywge1xuICBtb250aHM6ICdKYW51YXJfRmVicnVhcl9Nw6Ryel9BcHJpbF9NYWlfSnVuaV9KdWxpX0F1Z3VzdF9TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXplbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW4uX0ZlYi5fTcOkcnpfQXByLl9NYWlfSnVuaV9KdWxpX0F1Zy5fU2VwLl9Pa3QuX05vdi5fRGV6Licuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdTb25udGFnX01vbnRhZ19EaWVuc3RhZ19NaXR0d29jaF9Eb25uZXJzdGFnX0ZyZWl0YWdfU2Ftc3RhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1NvLl9Nby5fRGkuX01pLl9Eby5fRnIuX1NhLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTb19Nb19EaV9NaV9Eb19Gcl9TYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2hldXRlIHVtXSBMVCBbVWhyXScsXG4gICAgc2FtZUVsc2U6ICdMJyxcbiAgICBuZXh0RGF5OiAnW21vcmdlbiB1bV0gTFQgW1Vocl0nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbdW1dIExUIFtVaHJdJyxcbiAgICBsYXN0RGF5OiAnW2dlc3Rlcm4gdW1dIExUIFtVaHJdJyxcbiAgICBsYXN0V2VlazogJ1tsZXR6dGVuXSBkZGRkIFt1bV0gTFQgW1Vocl0nXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAndm9yICVzJyxcbiAgICBzOiAnZWluIHBhYXIgU2VrdW5kZW4nLFxuICAgIHNzOiAnJWQgU2VrdW5kZW4nLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06ICclZCBNaW51dGVuJyxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiAnJWQgU3R1bmRlbicsXG4gICAgZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkZDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB3OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHd3OiAnJWQgV29jaGVuJyxcbiAgICBNOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE1NOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHk6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeXk6IHByb2Nlc3NSZWxhdGl2ZVRpbWVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHMgPSBbJ96W3qzegt6q3ofept6D3qknLCAn3orerN6E3rDeg96q3ofept6D3qknLCAn3onep96D3qjel96qJywgJ96H3q3eld6w3oPeqd6N3qonLCAn3onerScsICfelt6r3oLesCcsICfelt6q3o3ept6H3qgnLCAn3ofer96O3qbekN6w3pPeqicsICfekN6s3pXesN6T3qzeid6w3oTept6D3qonLCAn3ofert6G3rDek96v3oTept6D3qonLCAn3oLert6I3qzeid6w3oTept6D3qonLCAn3pHeqN6Q3qzeid6w3oTept6D3qonXSxcbiAgICB3ZWVrZGF5cyA9IFsn3ofep96L3qjeh96w3ozepicsICfegN6v3onepicsICfeh96m3oLesN6O3qfeg96mJywgJ96E3qrei96mJywgJ96E3qreg96n3pDesN6K3qbejN6oJywgJ96A3qreht6q3oPeqicsICfegN6u3oLeqN6A3qjeg96qJ107XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdkdicsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHMsXG4gIHdlZWtkYXlzOiB3ZWVrZGF5cyxcbiAgd2Vla2RheXNTaG9ydDogd2Vla2RheXMsXG4gIHdlZWtkYXlzTWluOiAn3ofep96L3qhf3oDer96J3qZf3ofept6C3rBf3oTeqt6L3qZf3oTeqt6D3qdf3oDeqt6G3qpf3oDert6C3qgnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdEL00vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv3onehnzeid6KLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAn3oneiicgPT09IGlucHV0O1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfeid6GJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfeid6KJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1veid6o3ofept6L3qpdIExUJyxcbiAgICBuZXh0RGF5OiAnW96J3qfei96m3onep10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBMVCcsXG4gICAgbGFzdERheTogJ1veh96o3ofesN6U3qxdIExUJyxcbiAgICBsYXN0V2VlazogJ1veit6n3ofeqN6M3qreiN6oXSBkZGRkIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ96M3qzeg96t3o7ept6H3qggJXMnLFxuICAgIHBhc3Q6ICfeht6q3oPeqN6C3rAgJXMnLFxuICAgIHM6ICfekN6o3obeqt6C3rDejN6q3obert6F3qzeh96wJyxcbiAgICBzczogJ2QlIN6Q3qjeht6q3oLesN6M3qonLFxuICAgIG06ICfeid6o3oLeqN6T3qzeh96wJyxcbiAgICBtbTogJ96J3qjegt6o3pPeqiAlZCcsXG4gICAgaDogJ96O3qbekd6o3ofeqN6D3qzeh96wJyxcbiAgICBoaDogJ96O3qbekd6o3ofeqN6D3qogJWQnLFxuICAgIGQ6ICfei96q3ojept6A3qzeh96wJyxcbiAgICBkZDogJ96L3qreiN6m3pDesCAlZCcsXG4gICAgTTogJ96J3qbegN6s3ofesCcsXG4gICAgTU06ICfeid6m3pDesCAlZCcsXG4gICAgeTogJ96H3qbegN6m3oPerN6H3rAnLFxuICAgIHl5OiAn3ofept6A3qbeg96qICVkJ1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC/YjC9nLCAnLCcpO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLC9nLCAn2IwnKTtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogNyxcbiAgICBkb3k6IDEyXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIEZ1bmN0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBpbnB1dCBpbnN0YW5jZW9mIEZ1bmN0aW9uIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VsJywge1xuICBtb250aHNOb21pbmF0aXZlRWw6ICfOmc6xzr3Ov8+FzqzPgc65zr/Pgl/Ops61zrLPgc6/z4XOrM+BzrnOv8+CX86czqzPgc+EzrnOv8+CX86Rz4DPgc6vzrvOuc6/z4JfzpzOrM65zr/Pgl/Omc6/z43Ovc65zr/Pgl/Omc6/z43Ou865zr/Pgl/Okc+NzrPOv8+Fz4PPhM6/z4JfzqPOtc+Az4TOrc68zrLPgc65zr/Pgl/On866z4TPjs6yz4HOuc6/z4Jfzp3Ov86tzrzOss+BzrnOv8+CX86UzrXOus6tzrzOss+BzrnOv8+CJy5zcGxpdCgnXycpLFxuICBtb250aHNHZW5pdGl2ZUVsOiAnzpnOsc69zr/Phc6xz4HOr86/z4VfzqbOtc6yz4HOv8+FzrHPgc6vzr/PhV/OnM6xz4HPhM6vzr/PhV/Okc+Az4HOuc67zq/Ov8+FX86czrHOkM6/z4VfzpnOv8+Fzr3Or86/z4VfzpnOv8+FzrvOr86/z4VfzpHPhc6zzr/Pjc+Dz4TOv8+FX86jzrXPgM+EzrXOvM6yz4HOr86/z4Vfzp/Ous+Ez4nOss+Bzq/Ov8+FX86dzr/Otc68zrLPgc6vzr/PhV/OlM61zrrOtc68zrLPgc6vzr/PhScuc3BsaXQoJ18nKSxcbiAgbW9udGhzOiBmdW5jdGlvbiBtb250aHMobW9tZW50VG9Gb3JtYXQsIGZvcm1hdCkge1xuICAgIGlmICghbW9tZW50VG9Gb3JtYXQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb250aHNOb21pbmF0aXZlRWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnc3RyaW5nJyAmJiAvRC8udGVzdChmb3JtYXQuc3Vic3RyaW5nKDAsIGZvcm1hdC5pbmRleE9mKCdNTU1NJykpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc0dlbml0aXZlRWxbbW9tZW50VG9Gb3JtYXQubW9udGgoKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb250aHNOb21pbmF0aXZlRWxbbW9tZW50VG9Gb3JtYXQubW9udGgoKV07XG4gICAgfVxuICB9LFxuICBtb250aHNTaG9ydDogJ86ZzrHOvV/Ops61zrJfzpzOsc+BX86Rz4DPgV/OnM6xz4pfzpnOv8+Fzr1fzpnOv8+FzrtfzpHPhc6zX86jzrXPgF/On866z4Rfzp3Ov861X86UzrXOuicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfOms+Fz4HOuc6xzrrOrl/OlM61z4XPhM6tz4HOsV/OpM+Bzq/PhM63X86kzrXPhM6sz4HPhM63X86gzq3OvM+Az4TOt1/OoM6xz4HOsc+DzrrOtc+Fzq5fzqPOrM6yzrLOsc+Ezr8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfOms+Fz4FfzpTOtc+FX86kz4HOuV/OpM61z4RfzqDOtc68X86gzrHPgV/Oo86xzrInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnzprPhV/OlM61X86kz4FfzqTOtV/OoM61X86gzrFfzqPOsScuc3BsaXQoJ18nKSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzID4gMTEpIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ868zrwnIDogJ86czpwnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICfPgM68JyA6ICfOoM6cJztcbiAgICB9XG4gIH0sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gKGlucHV0ICsgJycpLnRvTG93ZXJDYXNlKClbMF0gPT09ICfOvCc7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9bzqDOnF1cXC4/zpw/XFwuPy9pLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyRWw6IHtcbiAgICBzYW1lRGF5OiAnW86jzq7OvM61z4HOsSB7fV0gTFQnLFxuICAgIG5leHREYXk6ICdbzpHPjc+BzrnOvyB7fV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbe31dIExUJyxcbiAgICBsYXN0RGF5OiAnW86nzrjOtc+CIHt9XSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1vPhM6/IM+Az4HOv863zrPOv8+NzrzOtc69zr9dIGRkZGQgW3t9XSBMVCc7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJ1vPhM63zr0gz4DPgc6/zrfOs86/z43OvM61zr3Ot10gZGRkZCBbe31dIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgY2FsZW5kYXI6IGZ1bmN0aW9uIGNhbGVuZGFyKGtleSwgbW9tKSB7XG4gICAgdmFyIG91dHB1dCA9IHRoaXMuX2NhbGVuZGFyRWxba2V5XSxcbiAgICAgICAgaG91cnMgPSBtb20gJiYgbW9tLmhvdXJzKCk7XG5cbiAgICBpZiAoaXNGdW5jdGlvbihvdXRwdXQpKSB7XG4gICAgICBvdXRwdXQgPSBvdXRwdXQuYXBwbHkobW9tKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0LnJlcGxhY2UoJ3t9JywgaG91cnMgJSAxMiA9PT0gMSA/ICfPg8+EzrcnIDogJ8+Dz4TOuc+CJyk7XG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ8+DzrUgJXMnLFxuICAgIHBhc3Q6ICclcyDPgM+BzrnOvScsXG4gICAgczogJ867zq/Os86xIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsScsXG4gICAgc3M6ICclZCDOtM61z4XPhM61z4HPjM67zrXPgM+EzrEnLFxuICAgIG06ICfOrc69zrEgzrvOtc+Az4TPjCcsXG4gICAgbW06ICclZCDOu861z4DPhM6sJyxcbiAgICBoOiAnzrzOr86xIM+Oz4HOsScsXG4gICAgaGg6ICclZCDPjs+BzrXPgicsXG4gICAgZDogJ868zq/OsSDOvM6tz4HOsScsXG4gICAgZGQ6ICclZCDOvM6tz4HOtc+CJyxcbiAgICBNOiAnzq3Ovc6xz4IgzrzOrs69zrHPgicsXG4gICAgTU06ICclZCDOvM6uzr3Otc+CJyxcbiAgICB5OiAnzq3Ovc6xz4Igz4fPgc+Mzr3Ov8+CJyxcbiAgICB5eTogJyVkIM+Hz4HPjM69zrnOsSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9zrcvLFxuICBvcmRpbmFsOiAnJWTOtycsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VuLWF1Jywge1xuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW4tY2EnLCB7XG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdoOm1tIEEnLFxuICAgIExUUzogJ2g6bW06c3MgQScsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnTU1NTSBELCBZWVlZJyxcbiAgICBMTEw6ICdNTU1NIEQsIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW1RvZGF5IGF0XSBMVCcsXG4gICAgbmV4dERheTogJ1tUb21vcnJvdyBhdF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYXRdIExUJyxcbiAgICBsYXN0RGF5OiAnW1llc3RlcmRheSBhdF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQgW2F0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdpbiAlcycsXG4gICAgcGFzdDogJyVzIGFnbycsXG4gICAgczogJ2EgZmV3IHNlY29uZHMnLFxuICAgIHNzOiAnJWQgc2Vjb25kcycsXG4gICAgbTogJ2EgbWludXRlJyxcbiAgICBtbTogJyVkIG1pbnV0ZXMnLFxuICAgIGg6ICdhbiBob3VyJyxcbiAgICBoaDogJyVkIGhvdXJzJyxcbiAgICBkOiAnYSBkYXknLFxuICAgIGRkOiAnJWQgZGF5cycsXG4gICAgTTogJ2EgbW9udGgnLFxuICAgIE1NOiAnJWQgbW9udGhzJyxcbiAgICB5OiAnYSB5ZWFyJyxcbiAgICB5eTogJyVkIHllYXJzJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oc3R8bmR8cmR8dGgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICBvdXRwdXQgPSB+fihudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEgPyAndGgnIDogYiA9PT0gMSA/ICdzdCcgOiBiID09PSAyID8gJ25kJyA6IGIgPT09IDMgPyAncmQnIDogJ3RoJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlbi1nYicsIHtcbiAgbW9udGhzOiAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTdV9Nb19UdV9XZV9UaF9Gcl9TYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW4taWUnLCB7XG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW4taWwnLCB7XG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2luICVzJyxcbiAgICBwYXN0OiAnJXMgYWdvJyxcbiAgICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3M6ICclZCBzZWNvbmRzJyxcbiAgICBtOiAnYSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ2FuIGhvdXInLFxuICAgIGhoOiAnJWQgaG91cnMnLFxuICAgIGQ6ICdhIGRheScsXG4gICAgZGQ6ICclZCBkYXlzJyxcbiAgICBNOiAnYSBtb250aCcsXG4gICAgTU06ICclZCBtb250aHMnLFxuICAgIHk6ICdhIHllYXInLFxuICAgIHl5OiAnJWQgeWVhcnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VuLWluJywge1xuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW4tbnonLCB7XG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdoOm1tIEEnLFxuICAgIExUUzogJ2g6bW06c3MgQScsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIGg6bW0gQScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIGg6bW0gQSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW1RvZGF5IGF0XSBMVCcsXG4gICAgbmV4dERheTogJ1tUb21vcnJvdyBhdF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYXRdIExUJyxcbiAgICBsYXN0RGF5OiAnW1llc3RlcmRheSBhdF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQgW2F0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdpbiAlcycsXG4gICAgcGFzdDogJyVzIGFnbycsXG4gICAgczogJ2EgZmV3IHNlY29uZHMnLFxuICAgIHNzOiAnJWQgc2Vjb25kcycsXG4gICAgbTogJ2EgbWludXRlJyxcbiAgICBtbTogJyVkIG1pbnV0ZXMnLFxuICAgIGg6ICdhbiBob3VyJyxcbiAgICBoaDogJyVkIGhvdXJzJyxcbiAgICBkOiAnYSBkYXknLFxuICAgIGRkOiAnJWQgZGF5cycsXG4gICAgTTogJ2EgbW9udGgnLFxuICAgIE1NOiAnJWQgbW9udGhzJyxcbiAgICB5OiAnYSB5ZWFyJyxcbiAgICB5eTogJyVkIHllYXJzJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oc3R8bmR8cmR8dGgpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICBvdXRwdXQgPSB+fihudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEgPyAndGgnIDogYiA9PT0gMSA/ICdzdCcgOiBiID09PSAyID8gJ25kJyA6IGIgPT09IDMgPyAncmQnIDogJ3RoJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlbi1zZycsIHtcbiAgbW9udGhzOiAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTdV9Nb19UdV9XZV9UaF9Gcl9TYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gICAgbGFzdERheTogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlazogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaW4gJXMnLFxuICAgIHBhc3Q6ICclcyBhZ28nLFxuICAgIHM6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzczogJyVkIHNlY29uZHMnLFxuICAgIG06ICdhIG1pbnV0ZScsXG4gICAgbW06ICclZCBtaW51dGVzJyxcbiAgICBoOiAnYW4gaG91cicsXG4gICAgaGg6ICclZCBob3VycycsXG4gICAgZDogJ2EgZGF5JyxcbiAgICBkZDogJyVkIGRheXMnLFxuICAgIE06ICdhIG1vbnRoJyxcbiAgICBNTTogJyVkIG1vbnRocycsXG4gICAgeTogJ2EgeWVhcicsXG4gICAgeXk6ICclZCB5ZWFycydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0fG5kfHJkfHRoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJ3RoJyA6IGIgPT09IDEgPyAnc3QnIDogYiA9PT0gMiA/ICduZCcgOiBiID09PSAzID8gJ3JkJyA6ICd0aCc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZW8nLCB7XG4gIG1vbnRoczogJ2phbnVhcm9fZmVicnVhcm9fbWFydG9fYXByaWxvX21ham9fanVuaW9fanVsaW9fYcWtZ3VzdG9fc2VwdGVtYnJvX29rdG9icm9fbm92ZW1icm9fZGVjZW1icm8nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuX2ZlYl9tYXJ0X2Fwcl9tYWpfanVuX2p1bF9hxa1nX3NlcHRfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnZGltYW7EiW9fbHVuZG9fbWFyZG9fbWVya3JlZG9fxLVhxa1kb192ZW5kcmVkb19zYWJhdG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkaW1fbHVuX21hcmRfbWVya1/EtWHFrV92ZW5fc2FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RpX2x1X21hX21lX8S1YV92ZV9zYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnW2xhXSBEWy1hbiBkZV0gTU1NTSwgWVlZWScsXG4gICAgTExMOiAnW2xhXSBEWy1hbiBkZV0gTU1NTSwgWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGRbbl0sIFtsYV0gRFstYW4gZGVdIE1NTU0sIFlZWVkgSEg6bW0nLFxuICAgIGxsbGw6ICdkZGQsIFtsYV0gRFstYW4gZGVdIE1NTSwgWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL1thcF1cXC50XFwubS9pLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpID09PSAncCc7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA+IDExKSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICdwLnQubS4nIDogJ1AuVC5NLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ2EudC5tLicgOiAnQS5ULk0uJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tIb2RpYcWtIGplXSBMVCcsXG4gICAgbmV4dERheTogJ1tNb3JnYcWtIGplXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkW24gamVdIExUJyxcbiAgICBsYXN0RGF5OiAnW0hpZXJhxa0gamVdIExUJyxcbiAgICBsYXN0V2VlazogJ1twYXNpbnRhbl0gZGRkZFtuIGplXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdwb3N0ICVzJyxcbiAgICBwYXN0OiAnYW50YcWtICVzJyxcbiAgICBzOiAna2Vsa2FqIHNla3VuZG9qJyxcbiAgICBzczogJyVkIHNla3VuZG9qJyxcbiAgICBtOiAndW51IG1pbnV0bycsXG4gICAgbW06ICclZCBtaW51dG9qJyxcbiAgICBoOiAndW51IGhvcm8nLFxuICAgIGhoOiAnJWQgaG9yb2onLFxuICAgIGQ6ICd1bnUgdGFnbycsXG4gICAgZGQ6ICclZCB0YWdvaicsXG4gICAgTTogJ3VudSBtb25hdG8nLFxuICAgIE1NOiAnJWQgbW9uYXRvaicsXG4gICAgeTogJ3VudSBqYXJvJyxcbiAgICB5eTogJyVkIGphcm9qJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1hLyxcbiAgb3JkaW5hbDogJyVkYScsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxudmFyIG1vbnRoc1Nob3J0RG90ID0gJ2VuZS5fZmViLl9tYXIuX2Fici5fbWF5Ll9qdW4uX2p1bC5fYWdvLl9zZXAuX29jdC5fbm92Ll9kaWMuJy5zcGxpdCgnXycpLFxuICAgIF9tb250aHNTaG9ydCA9ICdlbmVfZmViX21hcl9hYnJfbWF5X2p1bl9qdWxfYWdvX3NlcF9vY3Rfbm92X2RpYycuc3BsaXQoJ18nKSxcbiAgICBtb250aHNQYXJzZSA9IFsvXmVuZS9pLCAvXmZlYi9pLCAvXm1hci9pLCAvXmFici9pLCAvXm1heS9pLCAvXmp1bi9pLCAvXmp1bC9pLCAvXmFnby9pLCAvXnNlcC9pLCAvXm9jdC9pLCAvXm5vdi9pLCAvXmRpYy9pXSxcbiAgICBtb250aHNSZWdleCA9IC9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmV8ZW5lXFwuP3xmZWJcXC4/fG1hclxcLj98YWJyXFwuP3xtYXlcXC4/fGp1blxcLj98anVsXFwuP3xhZ29cXC4/fHNlcFxcLj98b2N0XFwuP3xub3ZcXC4/fGRpY1xcLj8pL2k7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VzLWRvJywge1xuICBtb250aHM6ICdlbmVyb19mZWJyZXJvX21hcnpvX2FicmlsX21heW9fanVuaW9fanVsaW9fYWdvc3RvX3NlcHRpZW1icmVfb2N0dWJyZV9ub3ZpZW1icmVfZGljaWVtYnJlJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnREb3Q7XG4gICAgfSBlbHNlIGlmICgvLU1NTS0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIF9tb250aHNTaG9ydFttLm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnREb3RbbS5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1JlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU2hvcnRSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXihlbmVcXC4/fGZlYlxcLj98bWFyXFwuP3xhYnJcXC4/fG1heVxcLj98anVuXFwuP3xqdWxcXC4/fGFnb1xcLj98c2VwXFwuP3xvY3RcXC4/fG5vdlxcLj98ZGljXFwuPykvaSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICdkb21pbmdvX2x1bmVzX21hcnRlc19tacOpcmNvbGVzX2p1ZXZlc192aWVybmVzX3PDoWJhZG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkb20uX2x1bi5fbWFyLl9tacOpLl9qdWUuX3ZpZS5fc8OhYi4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnZG9fbHVfbWFfbWlfanVfdmlfc8OhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdoOm1tIEEnLFxuICAgIExUUzogJ2g6bW06c3MgQScsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBMTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVkgaDptbSBBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBmdW5jdGlvbiBzYW1lRGF5KCkge1xuICAgICAgcmV0dXJuICdbaG95IGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHREYXk6IGZ1bmN0aW9uIG5leHREYXkoKSB7XG4gICAgICByZXR1cm4gJ1ttYcOxYW5hIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnZGRkZCBbYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdERheTogZnVuY3Rpb24gbGFzdERheSgpIHtcbiAgICAgIHJldHVybiAnW2F5ZXIgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuICdbZWxdIGRkZGQgW3Bhc2FkbyBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2VuICVzJyxcbiAgICBwYXN0OiAnaGFjZSAlcycsXG4gICAgczogJ3Vub3Mgc2VndW5kb3MnLFxuICAgIHNzOiAnJWQgc2VndW5kb3MnLFxuICAgIG06ICd1biBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvcycsXG4gICAgaDogJ3VuYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmFzJyxcbiAgICBkOiAndW4gZMOtYScsXG4gICAgZGQ6ICclZCBkw61hcycsXG4gICAgdzogJ3VuYSBzZW1hbmEnLFxuICAgIHd3OiAnJWQgc2VtYW5hcycsXG4gICAgTTogJ3VuIG1lcycsXG4gICAgTU06ICclZCBtZXNlcycsXG4gICAgeTogJ3VuIGHDsW8nLFxuICAgIHl5OiAnJWQgYcOxb3MnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbnZhciBtb250aHNTaG9ydERvdCA9ICdlbmUuX2ZlYi5fbWFyLl9hYnIuX21heS5fanVuLl9qdWwuX2Fnby5fc2VwLl9vY3QuX25vdi5fZGljLicuc3BsaXQoJ18nKSxcbiAgICBfbW9udGhzU2hvcnQgPSAnZW5lX2ZlYl9tYXJfYWJyX21heV9qdW5fanVsX2Fnb19zZXBfb2N0X25vdl9kaWMnLnNwbGl0KCdfJyksXG4gICAgbW9udGhzUGFyc2UgPSBbL15lbmUvaSwgL15mZWIvaSwgL15tYXIvaSwgL15hYnIvaSwgL15tYXkvaSwgL15qdW4vaSwgL15qdWwvaSwgL15hZ28vaSwgL15zZXAvaSwgL15vY3QvaSwgL15ub3YvaSwgL15kaWMvaV0sXG4gICAgbW9udGhzUmVnZXggPSAvXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlfGVuZVxcLj98ZmViXFwuP3xtYXJcXC4/fGFiclxcLj98bWF5XFwuP3xqdW5cXC4/fGp1bFxcLj98YWdvXFwuP3xzZXBcXC4/fG9jdFxcLj98bm92XFwuP3xkaWNcXC4/KS9pO1xuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdlcy1teCcsIHtcbiAgbW9udGhzOiAnZW5lcm9fZmVicmVyb19tYXJ6b19hYnJpbF9tYXlvX2p1bmlvX2p1bGlvX2Fnb3N0b19zZXB0aWVtYnJlX29jdHVicmVfbm92aWVtYnJlX2RpY2llbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0RG90O1xuICAgIH0gZWxzZSBpZiAoLy1NTU0tLy50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHJldHVybiBfbW9udGhzU2hvcnRbbS5tb250aCgpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0RG90W20ubW9udGgoKV07XG4gICAgfVxuICB9LFxuICBtb250aHNSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1Nob3J0UmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTdHJpY3RSZWdleDogL14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZSkvaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogL14oZW5lXFwuP3xmZWJcXC4/fG1hclxcLj98YWJyXFwuP3xtYXlcXC4/fGp1blxcLj98anVsXFwuP3xhZ29cXC4/fHNlcFxcLj98b2N0XFwuP3xub3ZcXC4/fGRpY1xcLj8pL2ksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHdlZWtkYXlzOiAnZG9taW5nb19sdW5lc19tYXJ0ZXNfbWnDqXJjb2xlc19qdWV2ZXNfdmllcm5lc19zw6FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZG9tLl9sdW4uX21hci5fbWnDqS5fanVlLl92aWUuX3PDoWIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RvX2x1X21hX21pX2p1X3ZpX3PDoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZJyxcbiAgICBMTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6IGZ1bmN0aW9uIHNhbWVEYXkoKSB7XG4gICAgICByZXR1cm4gJ1tob3kgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dERheTogZnVuY3Rpb24gbmV4dERheSgpIHtcbiAgICAgIHJldHVybiAnW21hw7FhbmEgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuICdkZGRkIFthIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0RGF5OiBmdW5jdGlvbiBsYXN0RGF5KCkge1xuICAgICAgcmV0dXJuICdbYXllciBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ1tlbF0gZGRkZCBbcGFzYWRvIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZW4gJXMnLFxuICAgIHBhc3Q6ICdoYWNlICVzJyxcbiAgICBzOiAndW5vcyBzZWd1bmRvcycsXG4gICAgc3M6ICclZCBzZWd1bmRvcycsXG4gICAgbTogJ3VuIG1pbnV0bycsXG4gICAgbW06ICclZCBtaW51dG9zJyxcbiAgICBoOiAndW5hIGhvcmEnLFxuICAgIGhoOiAnJWQgaG9yYXMnLFxuICAgIGQ6ICd1biBkw61hJyxcbiAgICBkZDogJyVkIGTDrWFzJyxcbiAgICB3OiAndW5hIHNlbWFuYScsXG4gICAgd3c6ICclZCBzZW1hbmFzJyxcbiAgICBNOiAndW4gbWVzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW4gYcOxbycsXG4gICAgeXk6ICclZCBhw7FvcydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA0XG4gIH0sXG4gIGludmFsaWREYXRlOiAnRmVjaGEgaW52w6FsaWRhJ1xufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG52YXIgbW9udGhzU2hvcnREb3QgPSAnZW5lLl9mZWIuX21hci5fYWJyLl9tYXkuX2p1bi5fanVsLl9hZ28uX3NlcC5fb2N0Ll9ub3YuX2RpYy4nLnNwbGl0KCdfJyksXG4gICAgX21vbnRoc1Nob3J0ID0gJ2VuZV9mZWJfbWFyX2Ficl9tYXlfanVuX2p1bF9hZ29fc2VwX29jdF9ub3ZfZGljJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1BhcnNlID0gWy9eZW5lL2ksIC9eZmViL2ksIC9ebWFyL2ksIC9eYWJyL2ksIC9ebWF5L2ksIC9eanVuL2ksIC9eanVsL2ksIC9eYWdvL2ksIC9ec2VwL2ksIC9eb2N0L2ksIC9ebm92L2ksIC9eZGljL2ldLFxuICAgIG1vbnRoc1JlZ2V4ID0gL14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZXxlbmVcXC4/fGZlYlxcLj98bWFyXFwuP3xhYnJcXC4/fG1heVxcLj98anVuXFwuP3xqdWxcXC4/fGFnb1xcLj98c2VwXFwuP3xvY3RcXC4/fG5vdlxcLj98ZGljXFwuPykvaTtcblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZXMtdXMnLCB7XG4gIG1vbnRoczogJ2VuZXJvX2ZlYnJlcm9fbWFyem9fYWJyaWxfbWF5b19qdW5pb19qdWxpb19hZ29zdG9fc2VwdGllbWJyZV9vY3R1YnJlX25vdmllbWJyZV9kaWNpZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiBmdW5jdGlvbiBtb250aHNTaG9ydChtLCBmb3JtYXQpIHtcbiAgICBpZiAoIW0pIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydERvdDtcbiAgICB9IGVsc2UgaWYgKC8tTU1NLS8udGVzdChmb3JtYXQpKSB7XG4gICAgICByZXR1cm4gX21vbnRoc1Nob3J0W20ubW9udGgoKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtb250aHNTaG9ydERvdFttLm1vbnRoKCldO1xuICAgIH1cbiAgfSxcbiAgbW9udGhzUmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTaG9ydFJlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmUpL2ksXG4gIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6IC9eKGVuZVxcLj98ZmViXFwuP3xtYXJcXC4/fGFiclxcLj98bWF5XFwuP3xqdW5cXC4/fGp1bFxcLj98YWdvXFwuP3xzZXBcXC4/fG9jdFxcLj98bm92XFwuP3xkaWNcXC4/KS9pLFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICB3ZWVrZGF5czogJ2RvbWluZ29fbHVuZXNfbWFydGVzX21pw6lyY29sZXNfanVldmVzX3ZpZXJuZXNfc8OhYmFkbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RvbS5fbHVuLl9tYXIuX21pw6kuX2p1ZS5fdmllLl9zw6FiLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkb19sdV9tYV9taV9qdV92aV9zw6EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2g6bW0gQScsXG4gICAgTFRTOiAnaDptbTpzcyBBJyxcbiAgICBMOiAnTU0vREQvWVlZWScsXG4gICAgTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVknLFxuICAgIExMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgaDptbSBBJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6IGZ1bmN0aW9uIHNhbWVEYXkoKSB7XG4gICAgICByZXR1cm4gJ1tob3kgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dERheTogZnVuY3Rpb24gbmV4dERheSgpIHtcbiAgICAgIHJldHVybiAnW21hw7FhbmEgYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuICdkZGRkIFthIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0RGF5OiBmdW5jdGlvbiBsYXN0RGF5KCkge1xuICAgICAgcmV0dXJuICdbYXllciBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ1tlbF0gZGRkZCBbcGFzYWRvIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZW4gJXMnLFxuICAgIHBhc3Q6ICdoYWNlICVzJyxcbiAgICBzOiAndW5vcyBzZWd1bmRvcycsXG4gICAgc3M6ICclZCBzZWd1bmRvcycsXG4gICAgbTogJ3VuIG1pbnV0bycsXG4gICAgbW06ICclZCBtaW51dG9zJyxcbiAgICBoOiAndW5hIGhvcmEnLFxuICAgIGhoOiAnJWQgaG9yYXMnLFxuICAgIGQ6ICd1biBkw61hJyxcbiAgICBkZDogJyVkIGTDrWFzJyxcbiAgICB3OiAndW5hIHNlbWFuYScsXG4gICAgd3c6ICclZCBzZW1hbmFzJyxcbiAgICBNOiAndW4gbWVzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW4gYcOxbycsXG4gICAgeXk6ICclZCBhw7FvcydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxudmFyIG1vbnRoc1Nob3J0RG90ID0gJ2VuZS5fZmViLl9tYXIuX2Fici5fbWF5Ll9qdW4uX2p1bC5fYWdvLl9zZXAuX29jdC5fbm92Ll9kaWMuJy5zcGxpdCgnXycpLFxuICAgIF9tb250aHNTaG9ydCA9ICdlbmVfZmViX21hcl9hYnJfbWF5X2p1bl9qdWxfYWdvX3NlcF9vY3Rfbm92X2RpYycuc3BsaXQoJ18nKSxcbiAgICBtb250aHNQYXJzZSA9IFsvXmVuZS9pLCAvXmZlYi9pLCAvXm1hci9pLCAvXmFici9pLCAvXm1heS9pLCAvXmp1bi9pLCAvXmp1bC9pLCAvXmFnby9pLCAvXnNlcC9pLCAvXm9jdC9pLCAvXm5vdi9pLCAvXmRpYy9pXSxcbiAgICBtb250aHNSZWdleCA9IC9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmV8ZW5lXFwuP3xmZWJcXC4/fG1hclxcLj98YWJyXFwuP3xtYXlcXC4/fGp1blxcLj98anVsXFwuP3xhZ29cXC4/fHNlcFxcLj98b2N0XFwuP3xub3ZcXC4/fGRpY1xcLj8pL2k7XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2VzJywge1xuICBtb250aHM6ICdlbmVyb19mZWJyZXJvX21hcnpvX2FicmlsX21heW9fanVuaW9fanVsaW9fYWdvc3RvX3NlcHRpZW1icmVfb2N0dWJyZV9ub3ZpZW1icmVfZGljaWVtYnJlJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnREb3Q7XG4gICAgfSBlbHNlIGlmICgvLU1NTS0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIF9tb250aHNTaG9ydFttLm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnREb3RbbS5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1JlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU2hvcnRSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXihlbmVcXC4/fGZlYlxcLj98bWFyXFwuP3xhYnJcXC4/fG1heVxcLj98anVuXFwuP3xqdWxcXC4/fGFnb1xcLj98c2VwXFwuP3xvY3RcXC4/fG5vdlxcLj98ZGljXFwuPykvaSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICdkb21pbmdvX2x1bmVzX21hcnRlc19tacOpcmNvbGVzX2p1ZXZlc192aWVybmVzX3PDoWJhZG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkb20uX2x1bi5fbWFyLl9tacOpLl9qdWUuX3ZpZS5fc8OhYi4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnZG9fbHVfbWFfbWlfanVfdmlfc8OhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVknLFxuICAgIExMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogZnVuY3Rpb24gc2FtZURheSgpIHtcbiAgICAgIHJldHVybiAnW2hveSBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBuZXh0RGF5OiBmdW5jdGlvbiBuZXh0RGF5KCkge1xuICAgICAgcmV0dXJuICdbbWHDsWFuYSBhIGxhJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAncycgOiAnJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ2RkZGQgW2EgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3REYXk6IGZ1bmN0aW9uIGxhc3REYXkoKSB7XG4gICAgICByZXR1cm4gJ1theWVyIGEgbGEnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICdzJyA6ICcnKSArICddIExUJztcbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiAnW2VsXSBkZGRkIFtwYXNhZG8gYSBsYScgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ3MnIDogJycpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdlbiAlcycsXG4gICAgcGFzdDogJ2hhY2UgJXMnLFxuICAgIHM6ICd1bm9zIHNlZ3VuZG9zJyxcbiAgICBzczogJyVkIHNlZ3VuZG9zJyxcbiAgICBtOiAndW4gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0b3MnLFxuICAgIGg6ICd1bmEgaG9yYScsXG4gICAgaGg6ICclZCBob3JhcycsXG4gICAgZDogJ3VuIGTDrWEnLFxuICAgIGRkOiAnJWQgZMOtYXMnLFxuICAgIHc6ICd1bmEgc2VtYW5hJyxcbiAgICB3dzogJyVkIHNlbWFuYXMnLFxuICAgIE06ICd1biBtZXMnLFxuICAgIE1NOiAnJWQgbWVzZXMnLFxuICAgIHk6ICd1biBhw7FvJyxcbiAgICB5eTogJyVkIGHDsW9zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3Cui8sXG4gIG9yZGluYWw6ICclZMK6JyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfSxcbiAgaW52YWxpZERhdGU6ICdGZWNoYSBpbnbDoWxpZGEnXG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgczogWydtw7VuZSBzZWt1bmRpJywgJ23DtW5pIHNla3VuZCcsICdwYWFyIHNla3VuZGl0J10sXG4gICAgc3M6IFtudW1iZXIgKyAnc2VrdW5kaScsIG51bWJlciArICdzZWt1bmRpdCddLFxuICAgIG06IFsnw7xoZSBtaW51dGknLCAnw7xrcyBtaW51dCddLFxuICAgIG1tOiBbbnVtYmVyICsgJyBtaW51dGknLCBudW1iZXIgKyAnIG1pbnV0aXQnXSxcbiAgICBoOiBbJ8O8aGUgdHVubmknLCAndHVuZCBhZWdhJywgJ8O8a3MgdHVuZCddLFxuICAgIGhoOiBbbnVtYmVyICsgJyB0dW5uaScsIG51bWJlciArICcgdHVuZGknXSxcbiAgICBkOiBbJ8O8aGUgcMOkZXZhJywgJ8O8a3MgcMOkZXYnXSxcbiAgICBNOiBbJ2t1dSBhamEnLCAna3V1IGFlZ2EnLCAnw7xrcyBrdXUnXSxcbiAgICBNTTogW251bWJlciArICcga3V1JywgbnVtYmVyICsgJyBrdXVkJ10sXG4gICAgeTogWyfDvGhlIGFhc3RhJywgJ2Fhc3RhJywgJ8O8a3MgYWFzdGEnXSxcbiAgICB5eTogW251bWJlciArICcgYWFzdGEnLCBudW1iZXIgKyAnIGFhc3RhdCddXG4gIH07XG5cbiAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICByZXR1cm4gZm9ybWF0W2tleV1bMl0gPyBmb3JtYXRba2V5XVsyXSA6IGZvcm1hdFtrZXldWzFdO1xuICB9XG5cbiAgcmV0dXJuIGlzRnV0dXJlID8gZm9ybWF0W2tleV1bMF0gOiBmb3JtYXRba2V5XVsxXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZXQnLCB7XG4gIG1vbnRoczogJ2phYW51YXJfdmVlYnJ1YXJfbcOkcnRzX2FwcmlsbF9tYWlfanV1bmlfanV1bGlfYXVndXN0X3NlcHRlbWJlcl9va3Rvb2Jlcl9ub3ZlbWJlcl9kZXRzZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFhbl92ZWVicl9tw6RydHNfYXByX21haV9qdXVuaV9qdXVsaV9hdWdfc2VwdF9va3Rfbm92X2RldHMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAncMO8aGFww6Rldl9lc21hc3DDpGV2X3RlaXNpcMOkZXZfa29sbWFww6Rldl9uZWxqYXDDpGV2X3JlZWRlX2xhdXDDpGV2Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnUF9FX1RfS19OX1JfTCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdQX0VfVF9LX05fUl9MJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbVMOkbmEsXSBMVCcsXG4gICAgbmV4dERheTogJ1tIb21tZSxdIExUJyxcbiAgICBuZXh0V2VlazogJ1tKw6RyZ21pbmVdIGRkZGQgTFQnLFxuICAgIGxhc3REYXk6ICdbRWlsZSxdIExUJyxcbiAgICBsYXN0V2VlazogJ1tFZWxtaW5lXSBkZGRkIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIHDDpHJhc3QnLFxuICAgIHBhc3Q6ICclcyB0YWdhc2knLFxuICAgIHM6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgc3M6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZGQ6ICclZCBww6RldmEnLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZXUnLCB7XG4gIG1vbnRoczogJ3VydGFycmlsYV9vdHNhaWxhX21hcnR4b2FfYXBpcmlsYV9tYWlhdHphX2VrYWluYV91enRhaWxhX2FidXp0dWFfaXJhaWxhX3VycmlhX2F6YXJvYV9hYmVuZHVhJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ3VydC5fb3RzLl9tYXIuX2FwaS5fbWFpLl9la2EuX3V6dC5fYWJ1Ll9pcmEuX3Vyci5fYXphLl9hYmUuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ2lnYW5kZWFfYXN0ZWxlaGVuYV9hc3RlYXJ0ZWFfYXN0ZWF6a2VuYV9vc3RlZ3VuYV9vc3RpcmFsYV9sYXJ1bmJhdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdpZy5fYWwuX2FyLl9hei5fb2cuX29sLl9sci4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnaWdfYWxfYXJfYXpfb2dfb2xfbHInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnWVlZWVtrb10gTU1NTVtyZW5dIERbYV0nLFxuICAgIExMTDogJ1lZWVlba29dIE1NTU1bcmVuXSBEW2FdIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgWVlZWVtrb10gTU1NTVtyZW5dIERbYV0gSEg6bW0nLFxuICAgIGw6ICdZWVlZLU0tRCcsXG4gICAgbGw6ICdZWVlZW2tvXSBNTU0gRFthXScsXG4gICAgbGxsOiAnWVlZWVtrb10gTU1NIERbYV0gSEg6bW0nLFxuICAgIGxsbGw6ICdkZGQsIFlZWVlba29dIE1NTSBEW2FdIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbZ2F1cl0gTFRbZXRhbl0nLFxuICAgIG5leHREYXk6ICdbYmloYXJdIExUW2V0YW5dJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgTFRbZXRhbl0nLFxuICAgIGxhc3REYXk6ICdbYXR6b10gTFRbZXRhbl0nLFxuICAgIGxhc3RXZWVrOiAnW2F1cnJla29dIGRkZGQgTFRbZXRhbl0nLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgYmFycnUnLFxuICAgIHBhc3Q6ICdkdWVsYSAlcycsXG4gICAgczogJ3NlZ3VuZG8gYmF0enVrJyxcbiAgICBzczogJyVkIHNlZ3VuZG8nLFxuICAgIG06ICdtaW51dHUgYmF0JyxcbiAgICBtbTogJyVkIG1pbnV0dScsXG4gICAgaDogJ29yZHUgYmF0JyxcbiAgICBoaDogJyVkIG9yZHUnLFxuICAgIGQ6ICdlZ3VuIGJhdCcsXG4gICAgZGQ6ICclZCBlZ3VuJyxcbiAgICBNOiAnaGlsYWJldGUgYmF0JyxcbiAgICBNTTogJyVkIGhpbGFiZXRlJyxcbiAgICB5OiAndXJ0ZSBiYXQnLFxuICAgIHl5OiAnJWQgdXJ0ZSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfbsScsXG4gIDI6ICfbsicsXG4gIDM6ICfbsycsXG4gIDQ6ICfbtCcsXG4gIDU6ICfbtScsXG4gIDY6ICfbticsXG4gIDc6ICfbtycsXG4gIDg6ICfbuCcsXG4gIDk6ICfbuScsXG4gIDA6ICfbsCdcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn27EnOiAnMScsXG4gICfbsic6ICcyJyxcbiAgJ9uzJzogJzMnLFxuICAn27QnOiAnNCcsXG4gICfbtSc6ICc1JyxcbiAgJ9u2JzogJzYnLFxuICAn27cnOiAnNycsXG4gICfbuCc6ICc4JyxcbiAgJ9u5JzogJzknLFxuICAn27AnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdmYScsIHtcbiAgbW9udGhzOiAn2pjYp9mG2YjbjNmHX9mB2YjYsduM2Ydf2YXYp9ix2LNf2KLZiNix24zZhF/ZhdmHX9qY2YjYptmGX9qY2YjYptuM2Ydf2KfZiNiqX9iz2b7Yqtin2YXYqNixX9in2qnYqtio2LFf2YbZiNin2YXYqNixX9iv2LPYp9mF2KjYsScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfamNin2YbZiNuM2Ydf2YHZiNix24zZh1/Zhdin2LHYs1/YotmI2LHbjNmEX9mF2Ydf2pjZiNim2YZf2pjZiNim24zZh1/Yp9mI2Kpf2LPZvtiq2KfZhdio2LFf2Kfaqdiq2KjYsV/ZhtmI2KfZhdio2LFf2K/Ys9in2YXYqNixJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogXCJcXHUwNkNDXFx1MDZBOVxcdTIwMENcXHUwNjM0XFx1MDY0NlxcdTA2MjhcXHUwNjQ3X1xcdTA2MkZcXHUwNjQ4XFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjMzXFx1MDY0N1xcdTIwMENcXHUwNjM0XFx1MDY0NlxcdTA2MjhcXHUwNjQ3X1xcdTA2ODZcXHUwNjQ3XFx1MDYyN1xcdTA2MzFcXHUwNjM0XFx1MDY0NlxcdTA2MjhcXHUwNjQ3X1xcdTA2N0VcXHUwNjQ2XFx1MDYyQ1xcdTIwMENcXHUwNjM0XFx1MDY0NlxcdTA2MjhcXHUwNjQ3X1xcdTA2MkNcXHUwNjQ1XFx1MDYzOVxcdTA2NDdfXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N1wiLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6IFwiXFx1MDZDQ1xcdTA2QTlcXHUyMDBDXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjJGXFx1MDY0OFxcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdfXFx1MDYzM1xcdTA2NDdcXHUyMDBDXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjg2XFx1MDY0N1xcdTA2MjdcXHUwNjMxXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjdFXFx1MDY0NlxcdTA2MkNcXHUyMDBDXFx1MDYzNFxcdTA2NDZcXHUwNjI4XFx1MDY0N19cXHUwNjJDXFx1MDY0NVxcdTA2MzlcXHUwNjQ3X1xcdTA2MzRcXHUwNjQ2XFx1MDYyOFxcdTA2NDdcIi5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9uMX9ivX9izX9qGX9m+X9isX9i0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2YLYqNmEINin2LIg2LjZh9ixfNio2LnYryDYp9iyINi42YfYsS8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gL9io2LnYryDYp9iyINi42YfYsS8udGVzdChpbnB1dCk7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9mC2KjZhCDYp9iyINi42YfYsSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn2KjYudivINin2LIg2LjZh9ixJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYp9mF2LHZiNiyINiz2KfYudiqXSBMVCcsXG4gICAgbmV4dERheTogJ1vZgdix2K/YpyDYs9in2LnYql0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2LPYp9i52KpdIExUJyxcbiAgICBsYXN0RGF5OiAnW9iv24zYsdmI2LIg2LPYp9i52KpdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9m+24zYtF0gW9iz2KfYudiqXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfYr9ixICVzJyxcbiAgICBwYXN0OiAnJXMg2b7bjNi0JyxcbiAgICBzOiAn2obZhtivINir2KfZhtuM2YcnLFxuICAgIHNzOiAnJWQg2KvYp9mG24zZhycsXG4gICAgbTogJ9uM2qkg2K/ZgtuM2YLZhycsXG4gICAgbW06ICclZCDYr9mC24zZgtmHJyxcbiAgICBoOiAn24zaqSDYs9in2LnYqicsXG4gICAgaGg6ICclZCDYs9in2LnYqicsXG4gICAgZDogJ9uM2qkg2LHZiNiyJyxcbiAgICBkZDogJyVkINix2YjYsicsXG4gICAgTTogJ9uM2qkg2YXYp9mHJyxcbiAgICBNTTogJyVkINmF2KfZhycsXG4gICAgeTogJ9uM2qkg2LPYp9mEJyxcbiAgICB5eTogJyVkINiz2KfZhCdcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW9uwLdu5XS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KS5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3ZhS8sXG4gIG9yZGluYWw6ICclZNmFJyxcbiAgd2Vlazoge1xuICAgIGRvdzogNixcbiAgICBkb3k6IDEyXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBudW1iZXJzUGFzdCA9ICdub2xsYSB5a3NpIGtha3NpIGtvbG1lIG5lbGrDpCB2aWlzaSBrdXVzaSBzZWl0c2Vtw6RuIGthaGRla3NhbiB5aGRla3PDpG4nLnNwbGl0KCcgJyksXG4gICAgbnVtYmVyc0Z1dHVyZSA9IFsnbm9sbGEnLCAneWhkZW4nLCAna2FoZGVuJywgJ2tvbG1lbicsICduZWxqw6RuJywgJ3ZpaWRlbicsICdrdXVkZW4nLCBudW1iZXJzUGFzdFs3XSwgbnVtYmVyc1Bhc3RbOF0sIG51bWJlcnNQYXN0WzldXTtcblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBpc0Z1dHVyZSA/ICdtdXV0YW1hbiBzZWt1bm5pbicgOiAnbXV1dGFtYSBzZWt1bnRpJztcblxuICAgIGNhc2UgJ3NzJzpcbiAgICAgIHJlc3VsdCA9IGlzRnV0dXJlID8gJ3Nla3VubmluJyA6ICdzZWt1bnRpYSc7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIGlzRnV0dXJlID8gJ21pbnV1dGluJyA6ICdtaW51dXR0aSc7XG5cbiAgICBjYXNlICdtbSc6XG4gICAgICByZXN1bHQgPSBpc0Z1dHVyZSA/ICdtaW51dXRpbicgOiAnbWludXV0dGlhJztcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gaXNGdXR1cmUgPyAndHVubmluJyA6ICd0dW50aSc7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICByZXN1bHQgPSBpc0Z1dHVyZSA/ICd0dW5uaW4nIDogJ3R1bnRpYSc7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIGlzRnV0dXJlID8gJ3DDpGl2w6RuJyA6ICdww6RpdsOkJztcblxuICAgIGNhc2UgJ2RkJzpcbiAgICAgIHJlc3VsdCA9IGlzRnV0dXJlID8gJ3DDpGl2w6RuJyA6ICdww6RpdsOkw6QnO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdNJzpcbiAgICAgIHJldHVybiBpc0Z1dHVyZSA/ICdrdXVrYXVkZW4nIDogJ2t1dWthdXNpJztcblxuICAgIGNhc2UgJ01NJzpcbiAgICAgIHJlc3VsdCA9IGlzRnV0dXJlID8gJ2t1dWthdWRlbicgOiAna3V1a2F1dHRhJztcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gaXNGdXR1cmUgPyAndnVvZGVuJyA6ICd2dW9zaSc7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICByZXN1bHQgPSBpc0Z1dHVyZSA/ICd2dW9kZW4nIDogJ3Z1b3R0YSc7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJlc3VsdCA9IHZlcmJhbE51bWJlcihudW1iZXIsIGlzRnV0dXJlKSArICcgJyArIHJlc3VsdDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gdmVyYmFsTnVtYmVyKG51bWJlciwgaXNGdXR1cmUpIHtcbiAgcmV0dXJuIG51bWJlciA8IDEwID8gaXNGdXR1cmUgPyBudW1iZXJzRnV0dXJlW251bWJlcl0gOiBudW1iZXJzUGFzdFtudW1iZXJdIDogbnVtYmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdmaScsIHtcbiAgbW9udGhzOiAndGFtbWlrdXVfaGVsbWlrdXVfbWFhbGlza3V1X2h1aHRpa3V1X3RvdWtva3V1X2tlc8Oka3V1X2hlaW7DpGt1dV9lbG9rdXVfc3l5c2t1dV9sb2tha3V1X21hcnJhc2t1dV9qb3VsdWt1dScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICd0YW1taV9oZWxtaV9tYWFsaXNfaHVodGlfdG91a29fa2Vzw6RfaGVpbsOkX2Vsb19zeXlzX2xva2FfbWFycmFzX2pvdWx1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ3N1bm51bnRhaV9tYWFuYW50YWlfdGlpc3RhaV9rZXNraXZpaWtrb190b3JzdGFpX3BlcmphbnRhaV9sYXVhbnRhaScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3N1X21hX3RpX2tlX3RvX3BlX2xhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ3N1X21hX3RpX2tlX3RvX3BlX2xhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEgubW0nLFxuICAgIExUUzogJ0hILm1tLnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEbyBNTU1NW3RhXSBZWVlZJyxcbiAgICBMTEw6ICdEbyBNTU1NW3RhXSBZWVlZLCBba2xvXSBISC5tbScsXG4gICAgTExMTDogJ2RkZGQsIERvIE1NTU1bdGFdIFlZWVksIFtrbG9dIEhILm1tJyxcbiAgICBsOiAnRC5NLllZWVknLFxuICAgIGxsOiAnRG8gTU1NIFlZWVknLFxuICAgIGxsbDogJ0RvIE1NTSBZWVlZLCBba2xvXSBISC5tbScsXG4gICAgbGxsbDogJ2RkZCwgRG8gTU1NIFlZWVksIFtrbG9dIEhILm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbdMOkbsOkw6RuXSBba2xvXSBMVCcsXG4gICAgbmV4dERheTogJ1todW9tZW5uYV0gW2tsb10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBba2xvXSBMVCcsXG4gICAgbGFzdERheTogJ1tlaWxlbl0gW2tsb10gTFQnLFxuICAgIGxhc3RXZWVrOiAnW3ZpaW1lXSBkZGRkW25hXSBba2xvXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBww6TDpHN0w6QnLFxuICAgIHBhc3Q6ICclcyBzaXR0ZW4nLFxuICAgIHM6IHRyYW5zbGF0ZSxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0ZSxcbiAgICBoaDogdHJhbnNsYXRlLFxuICAgIGQ6IHRyYW5zbGF0ZSxcbiAgICBkZDogdHJhbnNsYXRlLFxuICAgIE06IHRyYW5zbGF0ZSxcbiAgICBNTTogdHJhbnNsYXRlLFxuICAgIHk6IHRyYW5zbGF0ZSxcbiAgICB5eTogdHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdmaWwnLCB7XG4gIG1vbnRoczogJ0VuZXJvX1BlYnJlcm9fTWFyc29fQWJyaWxfTWF5b19IdW55b19IdWx5b19BZ29zdG9fU2V0eWVtYnJlX09rdHVicmVfTm9ieWVtYnJlX0Rpc3llbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdFbmVfUGViX01hcl9BYnJfTWF5X0h1bl9IdWxfQWdvX1NldF9Pa3RfTm9iX0Rpcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdMaW5nZ29fTHVuZXNfTWFydGVzX01peWVya3VsZXNfSHV3ZWJlc19CaXllcm5lc19TYWJhZG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdMaW5fTHVuX01hcl9NaXlfSHV3X0JpeV9TYWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnTGlfTHVfTWFfTWlfSHVfQmlfU2FiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnTU0vRC9ZWVlZJyxcbiAgICBMTDogJ01NTU0gRCwgWVlZWScsXG4gICAgTExMOiAnTU1NTSBELCBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgTU1NTSBERCwgWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnTFQgW25nYXlvbmcgYXJhd10nLFxuICAgIG5leHREYXk6ICdbQnVrYXMgbmddIExUJyxcbiAgICBuZXh0V2VlazogJ0xUIFtzYSBzdXN1bm9kIG5hXSBkZGRkJyxcbiAgICBsYXN0RGF5OiAnTFQgW2thaGFwb25dJyxcbiAgICBsYXN0V2VlazogJ0xUIFtub29uZyBuYWthcmFhbmddIGRkZGQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnc2EgbG9vYiBuZyAlcycsXG4gICAgcGFzdDogJyVzIGFuZyBuYWthbGlwYXMnLFxuICAgIHM6ICdpbGFuZyBzZWd1bmRvJyxcbiAgICBzczogJyVkIHNlZ3VuZG8nLFxuICAgIG06ICdpc2FuZyBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvJyxcbiAgICBoOiAnaXNhbmcgb3JhcycsXG4gICAgaGg6ICclZCBvcmFzJyxcbiAgICBkOiAnaXNhbmcgYXJhdycsXG4gICAgZGQ6ICclZCBhcmF3JyxcbiAgICBNOiAnaXNhbmcgYnV3YW4nLFxuICAgIE1NOiAnJWQgYnV3YW4nLFxuICAgIHk6ICdpc2FuZyB0YW9uJyxcbiAgICB5eTogJyVkIHRhb24nXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZm8nLCB7XG4gIG1vbnRoczogJ2phbnVhcl9mZWJydWFyX21hcnNfYXByw61sX21haV9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2Rlc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFyX2Fwcl9tYWlfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ3N1bm51ZGFndXJfbcOhbmFkYWd1cl90w71zZGFndXJfbWlrdWRhZ3VyX2jDs3NkYWd1cl9mcsOtZ2dqYWRhZ3VyX2xleWdhcmRhZ3VyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnc3VuX23DoW5fdMO9c19taWtfaMOzc19mcsOtX2xleScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdzdV9tw6FfdMO9X21pX2jDs19mcl9sZScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBELiBNTU1NLCBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbw40gZGFnIGtsLl0gTFQnLFxuICAgIG5leHREYXk6ICdbw40gbW9yZ2luIGtsLl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBba2wuXSBMVCcsXG4gICAgbGFzdERheTogJ1vDjSBnasOhciBrbC5dIExUJyxcbiAgICBsYXN0V2VlazogJ1tzw63DsHN0dV0gZGRkZCBba2xdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3VtICVzJyxcbiAgICBwYXN0OiAnJXMgc8Otw7BhbmknLFxuICAgIHM6ICdmw6Egc2VrdW5kJyxcbiAgICBzczogJyVkIHNla3VuZGlyJyxcbiAgICBtOiAnZWluIG1pbnV0dHVyJyxcbiAgICBtbTogJyVkIG1pbnV0dGlyJyxcbiAgICBoOiAnZWluIHTDrW1pJyxcbiAgICBoaDogJyVkIHTDrW1hcicsXG4gICAgZDogJ2VpbiBkYWd1cicsXG4gICAgZGQ6ICclZCBkYWdhcicsXG4gICAgTTogJ2VpbiBtw6FuYcOwdXInLFxuICAgIE1NOiAnJWQgbcOhbmHDsGlyJyxcbiAgICB5OiAnZWl0dCDDoXInLFxuICAgIHl5OiAnJWQgw6FyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZnItY2EnLCB7XG4gIG1vbnRoczogJ2phbnZpZXJfZsOpdnJpZXJfbWFyc19hdnJpbF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW52Ll9mw6l2ci5fbWFyc19hdnIuX21haV9qdWluX2p1aWwuX2Fvw7t0X3NlcHQuX29jdC5fbm92Ll9kw6ljLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdkaW1hbmNoZV9sdW5kaV9tYXJkaV9tZXJjcmVkaV9qZXVkaV92ZW5kcmVkaV9zYW1lZGknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RpX2x1X21hX21lX2plX3ZlX3NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tBdWpvdXJk4oCZaHVpIMOgXSBMVCcsXG4gICAgbmV4dERheTogJ1tEZW1haW4gw6BdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW8OgXSBMVCcsXG4gICAgbGFzdERheTogJ1tIaWVyIMOgXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtkZXJuaWVyIMOgXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdkYW5zICVzJyxcbiAgICBwYXN0OiAnaWwgeSBhICVzJyxcbiAgICBzOiAncXVlbHF1ZXMgc2Vjb25kZXMnLFxuICAgIHNzOiAnJWQgc2Vjb25kZXMnLFxuICAgIG06ICd1bmUgbWludXRlJyxcbiAgICBtbTogJyVkIG1pbnV0ZXMnLFxuICAgIGg6ICd1bmUgaGV1cmUnLFxuICAgIGhoOiAnJWQgaGV1cmVzJyxcbiAgICBkOiAndW4gam91cicsXG4gICAgZGQ6ICclZCBqb3VycycsXG4gICAgTTogJ3VuIG1vaXMnLFxuICAgIE1NOiAnJWQgbW9pcycsXG4gICAgeTogJ3VuIGFuJyxcbiAgICB5eTogJyVkIGFucydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGVyfGUpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSAnTSc6XG4gICAgICBjYXNlICdRJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgKG51bWJlciA9PT0gMSA/ICdlcicgOiAnZScpO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgKG51bWJlciA9PT0gMSA/ICdyZScgOiAnZScpO1xuICAgIH1cbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZnItY2gnLCB7XG4gIG1vbnRoczogJ2phbnZpZXJfZsOpdnJpZXJfbWFyc19hdnJpbF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW52Ll9mw6l2ci5fbWFyc19hdnIuX21haV9qdWluX2p1aWwuX2Fvw7t0X3NlcHQuX29jdC5fbm92Ll9kw6ljLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdkaW1hbmNoZV9sdW5kaV9tYXJkaV9tZXJjcmVkaV9qZXVkaV92ZW5kcmVkaV9zYW1lZGknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RpX2x1X21hX21lX2plX3ZlX3NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tBdWpvdXJk4oCZaHVpIMOgXSBMVCcsXG4gICAgbmV4dERheTogJ1tEZW1haW4gw6BdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW8OgXSBMVCcsXG4gICAgbGFzdERheTogJ1tIaWVyIMOgXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtkZXJuaWVyIMOgXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdkYW5zICVzJyxcbiAgICBwYXN0OiAnaWwgeSBhICVzJyxcbiAgICBzOiAncXVlbHF1ZXMgc2Vjb25kZXMnLFxuICAgIHNzOiAnJWQgc2Vjb25kZXMnLFxuICAgIG06ICd1bmUgbWludXRlJyxcbiAgICBtbTogJyVkIG1pbnV0ZXMnLFxuICAgIGg6ICd1bmUgaGV1cmUnLFxuICAgIGhoOiAnJWQgaGV1cmVzJyxcbiAgICBkOiAndW4gam91cicsXG4gICAgZGQ6ICclZCBqb3VycycsXG4gICAgTTogJ3VuIG1vaXMnLFxuICAgIE1NOiAnJWQgbW9pcycsXG4gICAgeTogJ3VuIGFuJyxcbiAgICB5eTogJyVkIGFucydcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGVyfGUpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSAnTSc6XG4gICAgICBjYXNlICdRJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgKG51bWJlciA9PT0gMSA/ICdlcicgOiAnZScpO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgKG51bWJlciA9PT0gMSA/ICdyZScgOiAnZScpO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRoc1N0cmljdFJlZ2V4ID0gL14oamFudmllcnxmw6l2cmllcnxtYXJzfGF2cmlsfG1haXxqdWlufGp1aWxsZXR8YW/Du3R8c2VwdGVtYnJlfG9jdG9icmV8bm92ZW1icmV8ZMOpY2VtYnJlKS9pLFxuICAgIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXggPSAvKGphbnZcXC4/fGbDqXZyXFwuP3xtYXJzfGF2clxcLj98bWFpfGp1aW58anVpbFxcLj98YW/Du3R8c2VwdFxcLj98b2N0XFwuP3xub3ZcXC4/fGTDqWNcXC4/KS9pLFxuICAgIG1vbnRoc1JlZ2V4ID0gLyhqYW52XFwuP3xmw6l2clxcLj98bWFyc3xhdnJcXC4/fG1haXxqdWlufGp1aWxcXC4/fGFvw7t0fHNlcHRcXC4/fG9jdFxcLj98bm92XFwuP3xkw6ljXFwuP3xqYW52aWVyfGbDqXZyaWVyfG1hcnN8YXZyaWx8bWFpfGp1aW58anVpbGxldHxhb8O7dHxzZXB0ZW1icmV8b2N0b2JyZXxub3ZlbWJyZXxkw6ljZW1icmUpL2ksXG4gICAgbW9udGhzUGFyc2UgPSBbL15qYW52L2ksIC9eZsOpdnIvaSwgL15tYXJzL2ksIC9eYXZyL2ksIC9ebWFpL2ksIC9eanVpbi9pLCAvXmp1aWwvaSwgL15hb8O7dC9pLCAvXnNlcHQvaSwgL15vY3QvaSwgL15ub3YvaSwgL15kw6ljL2ldO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZnInLCB7XG4gIG1vbnRoczogJ2phbnZpZXJfZsOpdnJpZXJfbWFyc19hdnJpbF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW52Ll9mw6l2ci5fbWFyc19hdnIuX21haV9qdWluX2p1aWwuX2Fvw7t0X3NlcHQuX29jdC5fbm92Ll9kw6ljLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTaG9ydFJlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IG1vbnRoc1N0cmljdFJlZ2V4LFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiBtb250aHNTaG9ydFN0cmljdFJlZ2V4LFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICB3ZWVrZGF5czogJ2RpbWFuY2hlX2x1bmRpX21hcmRpX21lcmNyZWRpX2pldWRpX3ZlbmRyZWRpX3NhbWVkaScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RpbS5fbHVuLl9tYXIuX21lci5famV1Ll92ZW4uX3NhbS4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnZGlfbHVfbWFfbWVfamVfdmVfc2EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0F1am91cmTigJlodWkgw6BdIExUJyxcbiAgICBuZXh0RGF5OiAnW0RlbWFpbiDDoF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbw6BdIExUJyxcbiAgICBsYXN0RGF5OiAnW0hpZXIgw6BdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2Rlcm5pZXIgw6BdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2RhbnMgJXMnLFxuICAgIHBhc3Q6ICdpbCB5IGEgJXMnLFxuICAgIHM6ICdxdWVscXVlcyBzZWNvbmRlcycsXG4gICAgc3M6ICclZCBzZWNvbmRlcycsXG4gICAgbTogJ3VuZSBtaW51dGUnLFxuICAgIG1tOiAnJWQgbWludXRlcycsXG4gICAgaDogJ3VuZSBoZXVyZScsXG4gICAgaGg6ICclZCBoZXVyZXMnLFxuICAgIGQ6ICd1biBqb3VyJyxcbiAgICBkZDogJyVkIGpvdXJzJyxcbiAgICB3OiAndW5lIHNlbWFpbmUnLFxuICAgIHd3OiAnJWQgc2VtYWluZXMnLFxuICAgIE06ICd1biBtb2lzJyxcbiAgICBNTTogJyVkIG1vaXMnLFxuICAgIHk6ICd1biBhbicsXG4gICAgeXk6ICclZCBhbnMnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShlcnwpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdEJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAnZXInIDogJycpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSAnTSc6XG4gICAgICBjYXNlICdRJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAnZXInIDogJ2UnKTtcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgPyAncmUnIDogJ2UnKTtcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHNTaG9ydFdpdGhEb3RzID0gJ2phbi5fZmViLl9tcnQuX2Fwci5fbWFpX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2Rlcy4nLnNwbGl0KCdfJyksXG4gICAgbW9udGhzU2hvcnRXaXRob3V0RG90cyA9ICdqYW5fZmViX21ydF9hcHJfbWFpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2Rlcycuc3BsaXQoJ18nKTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2Z5Jywge1xuICBtb250aHM6ICdqYW5uZXdhcmlzX2ZlYnJld2FyaXNfbWFhcnRfYXByaWxfbWFhaWVfanVueV9qdWx5X2F1Z3VzdHVzX3NlcHRpbWJlcl9va3RvYmVyX25vdmltYmVyX2Rlc2ltYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnRXaXRoRG90cztcbiAgICB9IGVsc2UgaWYgKC8tTU1NLS8udGVzdChmb3JtYXQpKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnRXaXRob3V0RG90c1ttLm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnRXaXRoRG90c1ttLm1vbnRoKCldO1xuICAgIH1cbiAgfSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdzbmVpbl9tb2FuZGVpX3RpaXNkZWlfd29hbnNkZWlfdG9uZ2Vyc2RlaV9mcmVlZF9zbmVvbicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3NpLl9tby5fdGkuX3dvLl90by5fZnIuX3NvLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTaV9Nb19UaV9Xb19Ub19Gcl9Tbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQtTU0tWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbaGpvZWQgb21dIExUJyxcbiAgICBuZXh0RGF5OiAnW21vYXJuIG9tXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtvbV0gTFQnLFxuICAgIGxhc3REYXk6ICdbanVzdGVyIG9tXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbw7RmcsO7bmVdIGRkZGQgW29tXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdvZXIgJXMnLFxuICAgIHBhc3Q6ICclcyBseW4nLFxuICAgIHM6ICdpbiBwZWFyIHNla29uZGVuJyxcbiAgICBzczogJyVkIHNla29uZGVuJyxcbiAgICBtOiAnaWVuIG1pbsO6dCcsXG4gICAgbW06ICclZCBtaW51dGVuJyxcbiAgICBoOiAnaWVuIG9lcmUnLFxuICAgIGhoOiAnJWQgb2VyZW4nLFxuICAgIGQ6ICdpZW4gZGVpJyxcbiAgICBkZDogJyVkIGRhZ2VuJyxcbiAgICBNOiAnaWVuIG1vYW5uZScsXG4gICAgTU06ICclZCBtb2FubmVuJyxcbiAgICB5OiAnaWVuIGppZXInLFxuICAgIHl5OiAnJWQgamllcnJlbidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHN0ZXxkZSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXIgKyAobnVtYmVyID09PSAxIHx8IG51bWJlciA9PT0gOCB8fCBudW1iZXIgPj0gMjAgPyAnc3RlJyA6ICdkZScpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzID0gWydFYW7DoWlyJywgJ0ZlYWJocmEnLCAnTcOhcnRhJywgJ0FpYnJlw6FuJywgJ0JlYWx0YWluZScsICdNZWl0aGVhbWgnLCAnScO6aWwnLCAnTMO6bmFzYScsICdNZcOhbiBGw7NtaGFpcicsICdEZWlyZWFkaCBGw7NtaGFpcicsICdTYW1oYWluJywgJ05vbGxhaWcnXSxcbiAgICBtb250aHNTaG9ydCA9IFsnRWFuJywgJ0ZlYWJoJywgJ03DoXJ0JywgJ0FpYicsICdCZWFsJywgJ01laXRoJywgJ0nDumlsJywgJ0zDum4nLCAnTS5GLicsICdELkYuJywgJ1NhbWgnLCAnTm9sbCddLFxuICAgIHdlZWtkYXlzID0gWydEw6kgRG9taG5haWdoJywgJ0TDqSBMdWFpbicsICdEw6kgTcOhaXJ0JywgJ0TDqSBDw6lhZGFvaW4nLCAnRMOpYXJkYW9pbicsICdEw6kgaEFvaW5lJywgJ0TDqSBTYXRoYWlybiddLFxuICAgIHdlZWtkYXlzU2hvcnQgPSBbJ0RvbWgnLCAnTHVhbicsICdNw6FpcnQnLCAnQ8OpYWQnLCAnRMOpYXInLCAnQW9pbmUnLCAnU2F0aCddLFxuICAgIHdlZWtkYXlzTWluID0gWydEbycsICdMdScsICdNw6EnLCAnQ8OpJywgJ0TDqScsICdBJywgJ1NhJ107XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdnYScsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHNTaG9ydCxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6IHdlZWtkYXlzLFxuICB3ZWVrZGF5c1Nob3J0OiB3ZWVrZGF5c1Nob3J0LFxuICB3ZWVrZGF5c01pbjogd2Vla2RheXNNaW4sXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSW5uaXUgYWddIExUJyxcbiAgICBuZXh0RGF5OiAnW0Ftw6FyYWNoIGFnXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthZ10gTFQnLFxuICAgIGxhc3REYXk6ICdbSW5uw6kgYWddIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW3NlbyBjYWl0ZV0gW2FnXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdpICVzJyxcbiAgICBwYXN0OiAnJXMgw7Mgc2hpbicsXG4gICAgczogJ2PDunBsYSBzb2ljaW5kJyxcbiAgICBzczogJyVkIHNvaWNpbmQnLFxuICAgIG06ICduw7NpbcOpYWQnLFxuICAgIG1tOiAnJWQgbsOzaW3DqWFkJyxcbiAgICBoOiAndWFpciBhbiBjaGxvaWcnLFxuICAgIGhoOiAnJWQgdWFpciBhbiBjaGxvaWcnLFxuICAgIGQ6ICdsw6EnLFxuICAgIGRkOiAnJWQgbMOhJyxcbiAgICBNOiAnbcOtJyxcbiAgICBNTTogJyVkIG3DrW9ubmEnLFxuICAgIHk6ICdibGlhaW4nLFxuICAgIHl5OiAnJWQgYmxpYWluJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZHxuYXxtaCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgPT09IDEgPyAnZCcgOiBudW1iZXIgJSAxMCA9PT0gMiA/ICduYScgOiAnbWgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHMgPSBbJ0FtIEZhb2lsbGVhY2gnLCAnQW4gR2VhcnJhbicsICdBbSBNw6BydCcsICdBbiBHaWJsZWFuJywgJ0FuIEPDqGl0ZWFuJywgJ0FuIHQtw5JnbWhpb3MnLCAnQW4gdC1JdWNoYXInLCAnQW4gTMO5bmFzdGFsJywgJ0FuIHQtU3VsdGFpbicsICdBbiBEw6BtaGFpcicsICdBbiB0LVNhbWhhaW4nLCAnQW4gRMO5YmhsYWNoZCddLFxuICAgIG1vbnRoc1Nob3J0ID0gWydGYW9pJywgJ0dlYXInLCAnTcOgcnQnLCAnR2libCcsICdDw6hpdCcsICfDkmdtaCcsICdJdWNoJywgJ0zDuW4nLCAnU3VsdCcsICdEw6BtaCcsICdTYW1oJywgJ0TDuWJoJ10sXG4gICAgd2Vla2RheXMgPSBbJ0RpZMOybWhuYWljaCcsICdEaWx1YWluJywgJ0RpbcOgaXJ0JywgJ0RpY2lhZGFpbicsICdEaWFyZGFvaW4nLCAnRGloYW9pbmUnLCAnRGlzYXRoYWlybmUnXSxcbiAgICB3ZWVrZGF5c1Nob3J0ID0gWydEaWQnLCAnRGlsJywgJ0RpbScsICdEaWMnLCAnRGlhJywgJ0RpaCcsICdEaXMnXSxcbiAgICB3ZWVrZGF5c01pbiA9IFsnRMOyJywgJ0x1JywgJ03DoCcsICdDaScsICdBcicsICdIYScsICdTYSddO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZ2QnLCB7XG4gIG1vbnRoczogbW9udGhzLFxuICBtb250aHNTaG9ydDogbW9udGhzU2hvcnQsXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiB3ZWVrZGF5cyxcbiAgd2Vla2RheXNTaG9ydDogd2Vla2RheXNTaG9ydCxcbiAgd2Vla2RheXNNaW46IHdlZWtkYXlzTWluLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0FuLWRpdWdoIGFpZ10gTFQnLFxuICAgIG5leHREYXk6ICdbQS1tw6BpcmVhY2ggYWlnXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthaWddIExUJyxcbiAgICBsYXN0RGF5OiAnW0FuLWTDqCBhaWddIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW3NlbyBjaGFpZGhdIFthaWddIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2FubiBhbiAlcycsXG4gICAgcGFzdDogJ2JobyBjaGlvbm4gJXMnLFxuICAgIHM6ICdiZWFnYW4gZGlvZ2FuJyxcbiAgICBzczogJyVkIGRpb2dhbicsXG4gICAgbTogJ21pb25haWQnLFxuICAgIG1tOiAnJWQgbWlvbmFpZGVhbicsXG4gICAgaDogJ3VhaXInLFxuICAgIGhoOiAnJWQgdWFpcmVhbicsXG4gICAgZDogJ2xhdGhhJyxcbiAgICBkZDogJyVkIGxhdGhhJyxcbiAgICBNOiAnbcOsb3MnLFxuICAgIE1NOiAnJWQgbcOsb3NhbicsXG4gICAgeTogJ2JsaWFkaG5hJyxcbiAgICB5eTogJyVkIGJsaWFkaG5hJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZHxuYXxtaCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgPT09IDEgPyAnZCcgOiBudW1iZXIgJSAxMCA9PT0gMiA/ICduYScgOiAnbWgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2dsJywge1xuICBtb250aHM6ICd4YW5laXJvX2ZlYnJlaXJvX21hcnpvX2FicmlsX21haW9feHXDsW9feHVsbG9fYWdvc3RvX3NldGVtYnJvX291dHVicm9fbm92ZW1icm9fZGVjZW1icm8nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAneGFuLl9mZWIuX21hci5fYWJyLl9tYWkuX3h1w7EuX3h1bC5fYWdvLl9zZXQuX291dC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ2RvbWluZ29fbHVuc19tYXJ0ZXNfbcOpcmNvcmVzX3hvdmVzX3ZlbnJlc19zw6FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZG9tLl9sdW4uX21hci5fbcOpci5feG92Ll92ZW4uX3PDoWIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RvX2x1X21hX23DqV94b192ZV9zw6EnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWScsXG4gICAgTExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBmdW5jdGlvbiBzYW1lRGF5KCkge1xuICAgICAgcmV0dXJuICdbaG94ZSAnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICfDoXMnIDogJ8OhJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBuZXh0RGF5OiBmdW5jdGlvbiBuZXh0RGF5KCkge1xuICAgICAgcmV0dXJuICdbbWHDscOhICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ8OhcycgOiAnw6EnKSArICddIExUJztcbiAgICB9LFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHJldHVybiAnZGRkZCBbJyArICh0aGlzLmhvdXJzKCkgIT09IDEgPyAnw6FzJyA6ICdhJykgKyAnXSBMVCc7XG4gICAgfSxcbiAgICBsYXN0RGF5OiBmdW5jdGlvbiBsYXN0RGF5KCkge1xuICAgICAgcmV0dXJuICdbb250ZSAnICsgKHRoaXMuaG91cnMoKSAhPT0gMSA/ICfDoScgOiAnYScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuICdbb10gZGRkZCBbcGFzYWRvICcgKyAodGhpcy5ob3VycygpICE9PSAxID8gJ8OhcycgOiAnYScpICsgJ10gTFQnO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6IGZ1bmN0aW9uIGZ1dHVyZShzdHIpIHtcbiAgICAgIGlmIChzdHIuaW5kZXhPZigndW4nKSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJ24nICsgc3RyO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJ2VuICcgKyBzdHI7XG4gICAgfSxcbiAgICBwYXN0OiAnaGFpICVzJyxcbiAgICBzOiAndW5zIHNlZ3VuZG9zJyxcbiAgICBzczogJyVkIHNlZ3VuZG9zJyxcbiAgICBtOiAndW4gbWludXRvJyxcbiAgICBtbTogJyVkIG1pbnV0b3MnLFxuICAgIGg6ICd1bmhhIGhvcmEnLFxuICAgIGhoOiAnJWQgaG9yYXMnLFxuICAgIGQ6ICd1biBkw61hJyxcbiAgICBkZDogJyVkIGTDrWFzJyxcbiAgICBNOiAndW4gbWVzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW4gYW5vJyxcbiAgICB5eTogJyVkIGFub3MnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgczogWyfgpKXgpYvgpKHgpK/gpL4g4KS44KWF4KSV4KSC4KSh4KS+4KSC4KSo4KWAJywgJ+CkpeCli+CkoeClhyDgpLjgpYXgpJXgpILgpKEnXSxcbiAgICBzczogW251bWJlciArICcg4KS44KWF4KSV4KSC4KSh4KS+4KSC4KSo4KWAJywgbnVtYmVyICsgJyDgpLjgpYXgpJXgpILgpKEnXSxcbiAgICBtOiBbJ+Ckj+CkleCkviDgpK7gpL/gpKPgpJ/gpL7gpKgnLCAn4KSP4KSVIOCkruCkv+CkqOClguCknyddLFxuICAgIG1tOiBbbnVtYmVyICsgJyDgpK7gpL/gpKPgpJ/gpL7gpILgpKjgpYAnLCBudW1iZXIgKyAnIOCkruCkv+Cko+Ckn+CkvuCkgiddLFxuICAgIGg6IFsn4KSP4KSV4KS+IOCkteCksOCkvuCkqCcsICfgpI/gpJUg4KS14KSwJ10sXG4gICAgaGg6IFtudW1iZXIgKyAnIOCkteCksOCkvuCkguCkqOClgCcsIG51bWJlciArICcg4KS14KSw4KS+4KSCJ10sXG4gICAgZDogWyfgpI/gpJXgpL4g4KSm4KS/4KS44KS+4KSoJywgJ+Ckj+CklSDgpKbgpYDgpLgnXSxcbiAgICBkZDogW251bWJlciArICcg4KSm4KS/4KS44KS+4KSC4KSo4KWAJywgbnVtYmVyICsgJyDgpKbgpYDgpLgnXSxcbiAgICBNOiBbJ+Ckj+CkleCkviDgpK7gpY3gpLngpK/gpKjgpY3gpK/gpL7gpKgnLCAn4KSP4KSVIOCkruCljeCkueCkr+CkqOCliyddLFxuICAgIE1NOiBbbnVtYmVyICsgJyDgpK7gpY3gpLngpK/gpKjgpY3gpK/gpL7gpKjgpYAnLCBudW1iZXIgKyAnIOCkruCljeCkueCkr+CkqOClhyddLFxuICAgIHk6IFsn4KSP4KSV4KS+IOCkteCksOCljeCkuOCkvuCkqCcsICfgpI/gpJUg4KS14KSw4KWN4KS4J10sXG4gICAgeXk6IFtudW1iZXIgKyAnIOCkteCksOCljeCkuOCkvuCkguCkqOClgCcsIG51bWJlciArICcg4KS14KSw4KWN4KS44KS+4KSCJ11cbiAgfTtcbiAgcmV0dXJuIGlzRnV0dXJlID8gZm9ybWF0W2tleV1bMF0gOiBmb3JtYXRba2V5XVsxXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZ29tLWRldmEnLCB7XG4gIG1vbnRoczoge1xuICAgIHN0YW5kYWxvbmU6ICfgpJzgpL7gpKjgpYfgpLXgpL7gpLDgpYBf4KSr4KWH4KSs4KWN4KSw4KWB4KS14KS+4KSw4KWAX+CkruCkvuCksOCljeCkml/gpI/gpKrgpY3gpLDgpYDgpLJf4KSu4KWHX+CknOClguCkqF/gpJzgpYHgpLLgpK9f4KSR4KSX4KS44KWN4KSfX+CkuOCkquCljeCkn+Clh+CkguCkrOCksF/gpJHgpJXgpY3gpJ/gpYvgpKzgpLBf4KSo4KWL4KS14KWN4KS54KWH4KSC4KSs4KSwX+CkoeCkv+CkuOClh+CkguCkrOCksCcuc3BsaXQoJ18nKSxcbiAgICBmb3JtYXQ6ICfgpJzgpL7gpKjgpYfgpLXgpL7gpLDgpYDgpJrgpY3gpK/gpL5f4KSr4KWH4KSs4KWN4KSw4KWB4KS14KS+4KSw4KWA4KSa4KWN4KSv4KS+X+CkruCkvuCksOCljeCkmuCkvuCkmuCljeCkr+Ckvl/gpI/gpKrgpY3gpLDgpYDgpLLgpL7gpJrgpY3gpK/gpL5f4KSu4KWH4KSv4KS+4KSa4KWN4KSv4KS+X+CknOClguCkqOCkvuCkmuCljeCkr+Ckvl/gpJzgpYHgpLLgpK/gpL7gpJrgpY3gpK/gpL5f4KSR4KSX4KS44KWN4KSf4KS+4KSa4KWN4KSv4KS+X+CkuOCkquCljeCkn+Clh+CkguCkrOCksOCkvuCkmuCljeCkr+Ckvl/gpJHgpJXgpY3gpJ/gpYvgpKzgpLDgpL7gpJrgpY3gpK/gpL5f4KSo4KWL4KS14KWN4KS54KWH4KSC4KSs4KSw4KS+4KSa4KWN4KSv4KS+X+CkoeCkv+CkuOClh+CkguCkrOCksOCkvuCkmuCljeCkr+Ckvicuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL01NTU0oXFxzKStEW29EXT8vXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiAn4KSc4KS+4KSo4KWHLl/gpKvgpYfgpKzgpY3gpLDgpYEuX+CkruCkvuCksOCljeCkml/gpI/gpKrgpY3gpLDgpYAuX+CkruClh1/gpJzgpYLgpKhf4KSc4KWB4KSyLl/gpJHgpJcuX+CkuOCkquCljeCkn+Clh+Ckgi5f4KSR4KSV4KWN4KSf4KWLLl/gpKjgpYvgpLXgpY3gpLngpYfgpIIuX+CkoeCkv+CkuOClh+Ckgi4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4KSG4KSv4KSk4KS+4KSwX+CkuOCli+CkruCkvuCksF/gpK7gpILgpJfgpLPgpL7gpLBf4KSs4KWB4KSn4KS14KS+4KSwX+CkrOCkv+CksOClh+CkuOCljeCkpOCkvuCksF/gpLjgpYHgpJXgpY3gpLDgpL7gpLBf4KS24KWH4KSo4KS14KS+4KSwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4KSG4KSv4KSkLl/gpLjgpYvgpK4uX+CkruCkguCkl+Cksy5f4KSs4KWB4KSnLl/gpKzgpY3gpLDgpYfgpLjgpY3gpKQuX+CkuOClgeCkleCljeCksC5f4KS24KWH4KSoLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgpIZf4KS44KWLX+CkruCkgl/gpKzgpYFf4KSs4KWN4KSw4KWHX+CkuOClgV/gpLbgpYcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSBb4KS14KS+4KSc4KSk4KS+4KSCXScsXG4gICAgTFRTOiAnQSBoOm1tOnNzIFvgpLXgpL7gpJzgpKTgpL7gpIJdJyxcbiAgICBMOiAnREQtTU0tWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgQSBoOm1tIFvgpLXgpL7gpJzgpKTgpL7gpIJdJyxcbiAgICBMTExMOiAnZGRkZCwgTU1NTSBEbywgWVlZWSwgQSBoOm1tIFvgpLXgpL7gpJzgpKTgpL7gpIJdJyxcbiAgICBsbGxsOiAnZGRkLCBEIE1NTSBZWVlZLCBBIGg6bW0gW+CkteCkvuCknOCkpOCkvuCkgl0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vgpIbgpK/gpJxdIExUJyxcbiAgICBuZXh0RGF5OiAnW+Ckq+CkvuCksuCljeCkr+CkvuCkgl0gTFQnLFxuICAgIG5leHRXZWVrOiAnW+Ckq+ClgeCkoeCksuCli10gZGRkZFssXSBMVCcsXG4gICAgbGFzdERheTogJ1vgpJXgpL7gpLJdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgpKvgpL7gpJ/gpLLgpYtdIGRkZGRbLF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMnLFxuICAgIHBhc3Q6ICclcyDgpIbgpKbgpYDgpIInLFxuICAgIHM6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgc3M6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBNTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHl5OiBwcm9jZXNzUmVsYXRpdmVUaW1lXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSjgpLXgpYfgpLApLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdEJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfgpLXgpYfgpLAnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSAnTSc6XG4gICAgICBjYXNlICdRJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogM1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4KSw4KS+4KSk4KWAfOCkuOCkleCkvuCks+ClgOCkgnzgpKbgpKjgpKrgpL7gpLDgpL7gpIJ84KS44KS+4KSC4KSc4KWHLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CksOCkvuCkpOClgCcpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CkuOCkleCkvuCks+ClgOCkgicpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpKbgpKjgpKrgpL7gpLDgpL7gpIInKSB7XG4gICAgICByZXR1cm4gaG91ciA+IDEyID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KS44KS+4KSC4KSc4KWHJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn4KSw4KS+4KSk4KWAJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfgpLjgpJXgpL7gpLPgpYDgpIInO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE2KSB7XG4gICAgICByZXR1cm4gJ+CkpuCkqOCkquCkvuCksOCkvuCkgic7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAn4KS44KS+4KSC4KSc4KWHJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfgpLDgpL7gpKTgpYAnO1xuICAgIH1cbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgZm9ybWF0ID0ge1xuICAgIHM6IFsndGhvZGRlYSBzZWtvbmRhbW5pJywgJ3Rob2RkZSBzZWtvbmQnXSxcbiAgICBzczogW251bWJlciArICcgc2Vrb25kYW1uaScsIG51bWJlciArICcgc2Vrb25kJ10sXG4gICAgbTogWydla2EgbWludGFuJywgJ2VrIG1pbnV0J10sXG4gICAgbW06IFtudW1iZXIgKyAnIG1pbnRhbW5pJywgbnVtYmVyICsgJyBtaW50YW0nXSxcbiAgICBoOiBbJ2VrYSB2b3JhbicsICdlayB2b3InXSxcbiAgICBoaDogW251bWJlciArICcgdm9yYW1uaScsIG51bWJlciArICcgdm9yYW0nXSxcbiAgICBkOiBbJ2VrYSBkaXNhbicsICdlayBkaXMnXSxcbiAgICBkZDogW251bWJlciArICcgZGlzYW1uaScsIG51bWJlciArICcgZGlzJ10sXG4gICAgTTogWydla2EgbWhvaW5lYW4nLCAnZWsgbWhvaW5vJ10sXG4gICAgTU06IFtudW1iZXIgKyAnIG1ob2luZWFtbmknLCBudW1iZXIgKyAnIG1ob2luZSddLFxuICAgIHk6IFsnZWthIHZvcnNhbicsICdlayB2b3JvcyddLFxuICAgIHl5OiBbbnVtYmVyICsgJyB2b3JzYW1uaScsIG51bWJlciArICcgdm9yc2FtJ11cbiAgfTtcbiAgcmV0dXJuIGlzRnV0dXJlID8gZm9ybWF0W2tleV1bMF0gOiBmb3JtYXRba2V5XVsxXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnZ29tLWxhdG4nLCB7XG4gIG1vbnRoczoge1xuICAgIHN0YW5kYWxvbmU6ICdKYW5lcl9GZWJyZXJfTWFyc19BYnJpbF9NYWlfSnVuX0p1bGFpX0Fnb3N0X1NldGVtYnJfT3R1YnJfTm92ZW1icl9EZXplbWJyJy5zcGxpdCgnXycpLFxuICAgIGZvcm1hdDogJ0phbmVyYWNoZWFfRmVicmVyYWNoZWFfTWFyc2FjaGVhX0FicmlsYWNoZWFfTWFpYWNoZWFfSnVuYWNoZWFfSnVsYWlhY2hlYV9BZ29zdGFjaGVhX1NldGVtYnJhY2hlYV9PdHVicmFjaGVhX05vdmVtYnJhY2hlYV9EZXplbWJyYWNoZWEnLnNwbGl0KCdfJyksXG4gICAgaXNGb3JtYXQ6IC9NTU1NKFxccykrRFtvRF0/L1xuICB9LFxuICBtb250aHNTaG9ydDogJ0phbi5fRmViLl9NYXJzX0Fici5fTWFpX0p1bl9KdWwuX0Fnby5fU2V0Ll9PdHUuX05vdi5fRGV6Licuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6IFwiQWl0YXJfU29tYXJfTW9uZ2xsYXJfQnVkaHZhcl9CaXJlc3Rhcl9TdWtyYXJfU29uJ3ZhclwiLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdBaXQuX1NvbS5fTW9uLl9CdWQuX0JyZS5fU3VrLl9Tb24uJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ0FpX1NtX01vX0J1X0JyX1N1X1NuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0gW3ZhenRhXScsXG4gICAgTFRTOiAnQSBoOm1tOnNzIFt2YXp0YV0nLFxuICAgIEw6ICdERC1NTS1ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBBIGg6bW0gW3ZhenRhXScsXG4gICAgTExMTDogJ2RkZGQsIE1NTU0gRG8sIFlZWVksIEEgaDptbSBbdmF6dGFdJyxcbiAgICBsbGxsOiAnZGRkLCBEIE1NTSBZWVlZLCBBIGg6bW0gW3ZhenRhXSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0Fpel0gTFQnLFxuICAgIG5leHREYXk6ICdbRmFsZWFtXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbRnVkZGxvXSBkZGRkWyxdIExUJyxcbiAgICBsYXN0RGF5OiAnW0thbF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW0ZhdHRsb10gZGRkZFssXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcycsXG4gICAgcGFzdDogJyVzIGFkaW0nLFxuICAgIHM6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgc3M6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBNTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHl5OiBwcm9jZXNzUmVsYXRpdmVUaW1lXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShlcikvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ2VyJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnUSc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDNcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL3JhdGl8c29rYWxsaW18ZG9ucGFyYW18c2FuamUvLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAncmF0aScpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3Nva2FsbGltJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ2RvbnBhcmFtJykge1xuICAgICAgcmV0dXJuIGhvdXIgPiAxMiA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3NhbmplJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAncmF0aSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAnc29rYWxsaW0nO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE2KSB7XG4gICAgICByZXR1cm4gJ2RvbnBhcmFtJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICdzYW5qZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAncmF0aSc7XG4gICAgfVxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4KunJyxcbiAgMjogJ+CrqCcsXG4gIDM6ICfgq6knLFxuICA0OiAn4KuqJyxcbiAgNTogJ+CrqycsXG4gIDY6ICfgq6wnLFxuICA3OiAn4KutJyxcbiAgODogJ+CrricsXG4gIDk6ICfgq68nLFxuICAwOiAn4KumJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgq6cnOiAnMScsXG4gICfgq6gnOiAnMicsXG4gICfgq6knOiAnMycsXG4gICfgq6onOiAnNCcsXG4gICfgq6snOiAnNScsXG4gICfgq6wnOiAnNicsXG4gICfgq60nOiAnNycsXG4gICfgq64nOiAnOCcsXG4gICfgq68nOiAnOScsXG4gICfgq6YnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdndScsIHtcbiAgbW9udGhzOiAn4Kqc4Kq+4Kqo4KuN4Kqv4KuB4KqG4Kqw4KuAX+Cqq+Crh+CqrOCrjeCqsOCrgeCqhuCqsOCrgF/gqq7gqr7gqrDgq43gqppf4KqP4Kqq4KuN4Kqw4Kq/4KqyX+CqruCrh1/gqpzgq4Lgqqhf4Kqc4KuB4Kqy4Kq+4KqIX+CqkeCql+CquOCrjeCqn1/gqrjgqqrgq43gqp/gq4fgqq7gq43gqqzgqrBf4KqR4KqV4KuN4Kqf4KuN4Kqs4KqwX+CqqOCqteCrh+CqruCrjeCqrOCqsF/gqqHgqr/gqrjgq4fgqq7gq43gqqzgqrAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4Kqc4Kq+4Kqo4KuN4Kqv4KuBLl/gqqvgq4fgqqzgq43gqrDgq4EuX+CqruCqvuCqsOCrjeCqml/gqo/gqqrgq43gqrDgqr8uX+CqruCrh1/gqpzgq4Lgqqhf4Kqc4KuB4Kqy4Kq+Ll/gqpHgqpcuX+CquOCqquCrjeCqn+Crhy5f4KqR4KqV4KuN4Kqf4KuNLl/gqqjgqrXgq4cuX+CqoeCqv+CquOCrhy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4Kqw4Kq14Kq/4Kq14Kq+4KqwX+CquOCri+CqruCqteCqvuCqsF/gqq7gqoLgqpfgqrPgqrXgqr7gqrBf4Kqs4KuB4Kqn4KuN4Kq14Kq+4KqwX+Cql+CrgeCqsOCrgeCqteCqvuCqsF/gqrbgq4HgqpXgq43gqrDgqrXgqr7gqrBf4Kq24Kqo4Kq/4Kq14Kq+4KqwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4Kqw4Kq14Kq/X+CquOCri+Cqrl/gqq7gqoLgqpfgqrNf4Kqs4KuB4Kqn4KuNX+Cql+CrgeCqsOCrgV/gqrbgq4HgqpXgq43gqrBf4Kq24Kqo4Kq/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CqsF/gqrjgq4tf4Kqu4KqCX+CqrOCrgV/gqpfgq4Ff4Kq24KuBX+Cqticuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSDgqrXgqr7gqpfgq43gqq/gq4cnLFxuICAgIExUUzogJ0EgaDptbTpzcyDgqrXgqr7gqpfgq43gqq/gq4cnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tIOCqteCqvuCql+CrjeCqr+CrhycsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4Kq14Kq+4KqX4KuN4Kqv4KuHJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4KqG4KqcXSBMVCcsXG4gICAgbmV4dERheTogJ1vgqpXgqr7gqrLgq4ddIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQsIExUJyxcbiAgICBsYXN0RGF5OiAnW+Cql+Cqh+CqleCqvuCqsuCrh10gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+CqquCqvuCqm+CqsuCqvl0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4Kqu4Kq+JyxcbiAgICBwYXN0OiAnJXMg4Kqq4Kq54KuH4Kqy4Kq+JyxcbiAgICBzOiAn4KqF4Kqu4KuB4KqVIOCqquCqs+CriycsXG4gICAgc3M6ICclZCDgqrjgq4fgqpXgqoLgqqEnLFxuICAgIG06ICfgqo/gqpUg4Kqu4Kq/4Kqo4Kq/4KqfJyxcbiAgICBtbTogJyVkIOCqruCqv+CqqOCqv+CqnycsXG4gICAgaDogJ+Cqj+CqlSDgqpXgqrLgqr7gqpUnLFxuICAgIGhoOiAnJWQg4KqV4Kqy4Kq+4KqVJyxcbiAgICBkOiAn4KqP4KqVIOCqpuCqv+CqteCquCcsXG4gICAgZGQ6ICclZCDgqqbgqr/gqrXgqrgnLFxuICAgIE06ICfgqo/gqpUg4Kqu4Kq54Kq/4Kqo4KuLJyxcbiAgICBNTTogJyVkIOCqruCqueCqv+CqqOCriycsXG4gICAgeTogJ+Cqj+CqlSDgqrXgqrDgq43gqrcnLFxuICAgIHl5OiAnJWQg4Kq14Kqw4KuN4Kq3J1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Kun4Kuo4Kup4Kuq4Kur4Kus4Kut4Kuu4Kuv4KumXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gqrDgqr7gqqR84Kqs4Kqq4KuL4KqwfOCquOCqteCqvuCqsHzgqrjgqr7gqoLgqpwvLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4Kqw4Kq+4KqkJykge1xuICAgICAgcmV0dXJuIGhvdXIgPCA0ID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4Kq44Kq14Kq+4KqwJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CqrOCqquCri+CqsCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDEwID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4Kq44Kq+4KqC4KqcJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn4Kqw4Kq+4KqkJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMCkge1xuICAgICAgcmV0dXJuICfgqrjgqrXgqr7gqrAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ+CqrOCqquCri+CqsCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAn4Kq44Kq+4KqC4KqcJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfgqrDgqr7gqqQnO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnaGUnLCB7XG4gIG1vbnRoczogJ9eZ16DXldeQ16hf16TXkdeo15XXkNeoX9ee16jXpV/XkNek16jXmdecX9ee15DXmV/XmdeV16DXmV/XmdeV15zXmV/XkNeV15LXldeh15hf16HXpNeY157XkdeoX9eQ15XXp9eY15XXkdeoX9eg15XXkdee15HXqF/Xk9em157XkdeoJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9eZ16DXldezX9ek15HXqNezX9ee16jXpV/XkNek16jXs1/XnteQ15lf15nXldeg15lf15nXldec15lf15DXldeS17Nf16HXpNeY17Nf15DXlden17Nf16DXldeR17Nf15PXptee17MnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn16jXkNep15XXn1/Xqdeg15lf16nXnNeZ16nXmV/XqNeR15nXoteZX9eX157Xmdep15lf16nXmdep15lf16nXkdeqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn15DXs1/XkdezX9eS17Nf15PXs1/XlNezX9eV17Nf16nXsycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfXkF/XkV/Xkl/Xk1/XlF/XlV/XqScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBb15FdTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIFvXkV1NTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIFvXkV1NTU1NIFlZWVkgSEg6bW0nLFxuICAgIGw6ICdEL00vWVlZWScsXG4gICAgbGw6ICdEIE1NTSBZWVlZJyxcbiAgICBsbGw6ICdEIE1NTSBZWVlZIEhIOm1tJyxcbiAgICBsbGxsOiAnZGRkLCBEIE1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb15TXmdeV150g15HWvl1MVCcsXG4gICAgbmV4dERheTogJ1vXnteX16gg15HWvl1MVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvXkdep16LXlF0gTFQnLFxuICAgIGxhc3REYXk6ICdb15DXqtee15XXnCDXkda+XUxUJyxcbiAgICBsYXN0V2VlazogJ1vXkdeZ15XXnV0gZGRkZCBb15TXkNeX16jXldefINeR16nXoteUXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfXkdei15XXkyAlcycsXG4gICAgcGFzdDogJ9ec16TXoNeZICVzJyxcbiAgICBzOiAn157Xodek16gg16nXoNeZ15XXqicsXG4gICAgc3M6ICclZCDXqdeg15nXldeqJyxcbiAgICBtOiAn15PXp9eUJyxcbiAgICBtbTogJyVkINeT16fXldeqJyxcbiAgICBoOiAn16nXoteUJyxcbiAgICBoaDogZnVuY3Rpb24gaGgobnVtYmVyKSB7XG4gICAgICBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgICAgIHJldHVybiAn16nXoteq15nXmdedJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bWJlciArICcg16nXoteV16onO1xuICAgIH0sXG4gICAgZDogJ9eZ15XXnScsXG4gICAgZGQ6IGZ1bmN0aW9uIGRkKG51bWJlcikge1xuICAgICAgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXR1cm4gJ9eZ15XXnteZ15nXnSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudW1iZXIgKyAnINeZ157XmdedJztcbiAgICB9LFxuICAgIE06ICfXl9eV15PXqScsXG4gICAgTU06IGZ1bmN0aW9uIE1NKG51bWJlcikge1xuICAgICAgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXR1cm4gJ9eX15XXk9ep15nXmdedJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bWJlciArICcg15fXldeT16nXmdedJztcbiAgICB9LFxuICAgIHk6ICfXqdeg15QnLFxuICAgIHl5OiBmdW5jdGlvbiB5eShudW1iZXIpIHtcbiAgICAgIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICAgICAgcmV0dXJuICfXqdeg16rXmdeZ150nO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgJSAxMCA9PT0gMCAmJiBudW1iZXIgIT09IDEwKSB7XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnINep16DXlCc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudW1iZXIgKyAnINep16DXmdedJztcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/XkNeX15RcItemfNec16TXoNeUXCLXpnzXkNeX16jXmSDXlNem15TXqNeZ15nXnXzXnNek16DXmSDXlNem15TXqNeZ15nXnXzXnNek16DXldeqINeR15XXp9eofNeR15HXlden16h815HXoteo15EvaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXijXkNeX15RcItemfNeQ15fXqNeZINeU16bXlNeo15nXmdedfNeR16LXqNeRKSQvLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA1KSB7XG4gICAgICByZXR1cm4gJ9ec16TXoNeV16og15HXlden16gnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEwKSB7XG4gICAgICByZXR1cm4gJ9eR15HXlden16gnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICfXnNek16DXlFwi16YnIDogJ9ec16TXoNeZINeU16bXlNeo15nXmdedJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxOCkge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAn15DXl9eUXCLXpicgOiAn15DXl9eo15kg15TXpteU16jXmdeZ150nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ9eR16LXqNeRJztcbiAgICB9XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfgpacnLFxuICAyOiAn4KWoJyxcbiAgMzogJ+ClqScsXG4gIDQ6ICfgpaonLFxuICA1OiAn4KWrJyxcbiAgNjogJ+ClrCcsXG4gIDc6ICfgpa0nLFxuICA4OiAn4KWuJyxcbiAgOTogJ+ClrycsXG4gIDA6ICfgpaYnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+Clpyc6ICcxJyxcbiAgJ+ClqCc6ICcyJyxcbiAgJ+ClqSc6ICczJyxcbiAgJ+Clqic6ICc0JyxcbiAgJ+Clqyc6ICc1JyxcbiAgJ+ClrCc6ICc2JyxcbiAgJ+ClrSc6ICc3JyxcbiAgJ+Clric6ICc4JyxcbiAgJ+Clryc6ICc5JyxcbiAgJ+Clpic6ICcwJ1xufSxcbiAgICBtb250aHNQYXJzZSA9IFsvXuCknOCkqC9pLCAvXuCkq+CkvOCksHzgpKvgpLAvaSwgL17gpK7gpL7gpLDgpY3gpJovaSwgL17gpIXgpKrgpY3gpLDgpYgvaSwgL17gpK7gpIgvaSwgL17gpJzgpYLgpKgvaSwgL17gpJzgpYHgpLIvaSwgL17gpIXgpJcvaSwgL17gpLjgpL/gpKTgpIJ84KS44KS/4KSkL2ksIC9e4KSF4KSV4KWN4KSf4KWCL2ksIC9e4KSo4KS1fOCkqOCkteCkgi9pLCAvXuCkpuCkv+CkuOCkgnzgpKbgpL/gpLgvaV0sXG4gICAgc2hvcnRNb250aHNQYXJzZSA9IFsvXuCknOCkqC9pLCAvXuCkq+CkvOCksC9pLCAvXuCkruCkvuCksOCljeCkmi9pLCAvXuCkheCkquCljeCksOCliC9pLCAvXuCkruCkiC9pLCAvXuCknOClguCkqC9pLCAvXuCknOClgeCksi9pLCAvXuCkheCkly9pLCAvXuCkuOCkv+CkpC9pLCAvXuCkheCkleCljeCkn+Clgi9pLCAvXuCkqOCktS9pLCAvXuCkpuCkv+CkuC9pXTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2hpJywge1xuICBtb250aHM6IHtcbiAgICBmb3JtYXQ6ICfgpJzgpKjgpLXgpLDgpYBf4KSr4KS84KSw4KS14KSw4KWAX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpYjgpLJf4KSu4KSIX+CknOClguCkqF/gpJzgpYHgpLLgpL7gpIhf4KSF4KSX4KS44KWN4KSkX+CkuOCkv+CkpOCkruCljeCkrOCksF/gpIXgpJXgpY3gpJ/gpYLgpKzgpLBf4KSo4KS14KSu4KWN4KSs4KSwX+CkpuCkv+CkuOCkruCljeCkrOCksCcuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAn4KSc4KSo4KS14KSw4KWAX+Ckq+CksOCkteCksOClgF/gpK7gpL7gpLDgpY3gpJpf4KSF4KSq4KWN4KSw4KWI4KSyX+CkruCkiF/gpJzgpYLgpKhf4KSc4KWB4KSy4KS+4KSIX+CkheCkl+CkuOCljeCkpF/gpLjgpL/gpKTgpILgpKzgpLBf4KSF4KSV4KWN4KSf4KWC4KSs4KSwX+CkqOCkteCkguCkrOCksF/gpKbgpL/gpLjgpILgpKzgpLAnLnNwbGl0KCdfJylcbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICfgpJzgpKguX+Ckq+CkvOCksC5f4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCliC5f4KSu4KSIX+CknOClguCkqF/gpJzgpYHgpLIuX+CkheCkly5f4KS44KS/4KSkLl/gpIXgpJXgpY3gpJ/gpYIuX+CkqOCktS5f4KSm4KS/4KS4Licuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfgpLDgpLXgpL/gpLXgpL7gpLBf4KS44KWL4KSu4KS14KS+4KSwX+CkruCkguCkl+CksuCkteCkvuCksF/gpKzgpYHgpKfgpLXgpL7gpLBf4KSX4KWB4KSw4KWC4KS14KS+4KSwX+CktuClgeCkleCljeCksOCkteCkvuCksF/gpLbgpKjgpL/gpLXgpL7gpLAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgpLDgpLXgpL9f4KS44KWL4KSuX+CkruCkguCkl+Cksl/gpKzgpYHgpKdf4KSX4KWB4KSw4KWCX+CktuClgeCkleCljeCksF/gpLbgpKjgpL8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4KSwX+CkuOCli1/gpK7gpIJf4KSs4KWBX+Ckl+ClgV/gpLbgpYFf4KS2Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tIOCkrOCknOClhycsXG4gICAgTFRTOiAnQSBoOm1tOnNzIOCkrOCknOClhycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBBIGg6bW0g4KSs4KSc4KWHJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSDgpKzgpJzgpYcnXG4gIH0sXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogc2hvcnRNb250aHNQYXJzZSxcbiAgbW9udGhzUmVnZXg6IC9eKOCknOCkqOCkteCksOClgHzgpJzgpKhcXC4/fOCkq+CkvOCksOCkteCksOClgHzgpKvgpLDgpLXgpLDgpYB84KSr4KS84KSwXFwuP3zgpK7gpL7gpLDgpY3gpJo/fOCkheCkquCljeCksOCliOCksnzgpIXgpKrgpY3gpLDgpYhcXC4/fOCkruCkiD984KSc4KWC4KSoP3zgpJzgpYHgpLLgpL7gpIh84KSc4KWB4KSyXFwuP3zgpIXgpJfgpLjgpY3gpKR84KSF4KSXXFwuP3zgpLjgpL/gpKTgpK7gpY3gpKzgpLB84KS44KS/4KSk4KSC4KSs4KSwfOCkuOCkv+CkpFxcLj984KSF4KSV4KWN4KSf4KWC4KSs4KSwfOCkheCkleCljeCkn+ClglxcLj984KSo4KS14KSu4KWN4KSs4KSwfOCkqOCkteCkguCkrOCksHzgpKjgpLVcXC4/fOCkpuCkv+CkuOCkruCljeCkrOCksHzgpKbgpL/gpLjgpILgpKzgpLB84KSm4KS/4KS4XFwuPykvaSxcbiAgbW9udGhzU2hvcnRSZWdleDogL14o4KSc4KSo4KS14KSw4KWAfOCknOCkqFxcLj984KSr4KS84KSw4KS14KSw4KWAfOCkq+CksOCkteCksOClgHzgpKvgpLzgpLBcXC4/fOCkruCkvuCksOCljeCkmj984KSF4KSq4KWN4KSw4KWI4KSyfOCkheCkquCljeCksOCliFxcLj984KSu4KSIP3zgpJzgpYLgpKg/fOCknOClgeCksuCkvuCkiHzgpJzgpYHgpLJcXC4/fOCkheCkl+CkuOCljeCkpHzgpIXgpJdcXC4/fOCkuOCkv+CkpOCkruCljeCkrOCksHzgpLjgpL/gpKTgpILgpKzgpLB84KS44KS/4KSkXFwuP3zgpIXgpJXgpY3gpJ/gpYLgpKzgpLB84KSF4KSV4KWN4KSf4KWCXFwuP3zgpKjgpLXgpK7gpY3gpKzgpLB84KSo4KS14KSC4KSs4KSwfOCkqOCktVxcLj984KSm4KS/4KS44KSu4KWN4KSs4KSwfOCkpuCkv+CkuOCkguCkrOCksHzgpKbgpL/gpLhcXC4/KS9pLFxuICBtb250aHNTdHJpY3RSZWdleDogL14o4KSc4KSo4KS14KSw4KWAP3zgpKvgpLzgpLDgpLXgpLDgpYB84KSr4KSw4KS14KSw4KWAP3zgpK7gpL7gpLDgpY3gpJo/fOCkheCkquCljeCksOCliOCksj984KSu4KSIP3zgpJzgpYLgpKg/fOCknOClgeCksuCkvuCkiD984KSF4KSX4KS44KWN4KSkP3zgpLjgpL/gpKTgpK7gpY3gpKzgpLB84KS44KS/4KSk4KSC4KSs4KSwfOCkuOCkv+CkpD9cXC4/fOCkheCkleCljeCkn+ClguCkrOCksHzgpIXgpJXgpY3gpJ/gpYJcXC4/fOCkqOCkteCkruCljeCkrOCksHzgpKjgpLXgpILgpKzgpLA/fOCkpuCkv+CkuOCkruCljeCkrOCksHzgpKbgpL/gpLjgpILgpKzgpLA/KS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXijgpJzgpKhcXC4/fOCkq+CkvOCksFxcLj984KSu4KS+4KSw4KWN4KSaP3zgpIXgpKrgpY3gpLDgpYhcXC4/fOCkruCkiD984KSc4KWC4KSoP3zgpJzgpYHgpLJcXC4/fOCkheCkl1xcLj984KS44KS/4KSkXFwuP3zgpIXgpJXgpY3gpJ/gpYJcXC4/fOCkqOCktVxcLj984KSm4KS/4KS4XFwuPykvaSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+CkhuCknF0gTFQnLFxuICAgIG5leHREYXk6ICdb4KSV4KSyXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgpJXgpLJdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgpKrgpL/gpJvgpLLgpYddIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOCkruClh+CkgicsXG4gICAgcGFzdDogJyVzIOCkquCkueCksuClhycsXG4gICAgczogJ+CkleClgeCkmyDgpLngpYAg4KSV4KWN4KS34KSjJyxcbiAgICBzczogJyVkIOCkuOClh+CkleCkguCkoScsXG4gICAgbTogJ+Ckj+CklSDgpK7gpL/gpKjgpJ8nLFxuICAgIG1tOiAnJWQg4KSu4KS/4KSo4KSfJyxcbiAgICBoOiAn4KSP4KSVIOCkmOCkguCkn+CkvicsXG4gICAgaGg6ICclZCDgpJjgpILgpJ/gpYcnLFxuICAgIGQ6ICfgpI/gpJUg4KSm4KS/4KSoJyxcbiAgICBkZDogJyVkIOCkpuCkv+CkqCcsXG4gICAgTTogJ+Ckj+CklSDgpK7gpLngpYDgpKjgpYcnLFxuICAgIE1NOiAnJWQg4KSu4KS54KWA4KSo4KWHJyxcbiAgICB5OiAn4KSP4KSVIOCkteCksOCljeCktycsXG4gICAgeXk6ICclZCDgpLXgpLDgpY3gpLcnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgpafgpajgpangpargpavgpazgpa3gpa7gpa/gpaZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CksOCkvuCkpHzgpLjgpYHgpKzgpLl84KSm4KWL4KSq4KS54KSwfOCktuCkvuCkri8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgpLDgpL7gpKQnKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpLjgpYHgpKzgpLknKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KSm4KWL4KSq4KS54KSwJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTAgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpLbgpL7gpK4nKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfgpLDgpL7gpKQnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEwKSB7XG4gICAgICByZXR1cm4gJ+CkuOClgeCkrOCkuSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn4KSm4KWL4KSq4KS54KSwJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgpLbgpL7gpK4nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+CksOCkvuCkpCc7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICB2YXIgcmVzdWx0ID0gbnVtYmVyICsgJyAnO1xuXG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAnc3MnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ3Nla3VuZGEnO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIgfHwgbnVtYmVyID09PSAzIHx8IG51bWJlciA9PT0gNCkge1xuICAgICAgICByZXN1bHQgKz0gJ3Nla3VuZGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzZWt1bmRpJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnamVkbmEgbWludXRhJyA6ICdqZWRuZSBtaW51dGUnO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gJ21pbnV0YSc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMiB8fCBudW1iZXIgPT09IDMgfHwgbnVtYmVyID09PSA0KSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWludXRlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWludXRhJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnamVkYW4gc2F0JyA6ICdqZWRub2cgc2F0YSc7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2F0JztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdzYXRhJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnc2F0aSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnZGFuJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnZGFuYSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWplc2VjJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdtamVzZWNhJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSAnbWplc2VjaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnZ29kaW5hJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyIHx8IG51bWJlciA9PT0gMyB8fCBudW1iZXIgPT09IDQpIHtcbiAgICAgICAgcmVzdWx0ICs9ICdnb2RpbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9ICdnb2RpbmEnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2hyJywge1xuICBtb250aHM6IHtcbiAgICBmb3JtYXQ6ICdzaWplxI1uamFfdmVsamHEjWVfb8W+dWprYV90cmF2bmphX3N2aWJuamFfbGlwbmphX3NycG5qYV9rb2xvdm96YV9ydWpuYV9saXN0b3BhZGFfc3R1ZGVub2dhX3Byb3NpbmNhJy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICdzaWplxI1hbmpfdmVsamHEjWFfb8W+dWpha190cmF2YW5qX3N2aWJhbmpfbGlwYW5qX3NycGFual9rb2xvdm96X3J1amFuX2xpc3RvcGFkX3N0dWRlbmlfcHJvc2luYWMnLnNwbGl0KCdfJylcbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICdzaWouX3ZlbGouX2/FvnUuX3RyYS5fc3ZpLl9saXAuX3NycC5fa29sLl9ydWouX2xpcy5fc3R1Ll9wcm8uJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ25lZGplbGphX3BvbmVkamVsamFrX3V0b3Jha19zcmlqZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICduZWQuX3Bvbi5fdXRvLl9zcmkuX8SNZXQuX3BldC5fc3ViLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICduZV9wb191dF9zcl/EjWVfcGVfc3UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0RvIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRG8gTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEbyBNTU1NIFlZWVkgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2RhbmFzIHVdIExUJyxcbiAgICBuZXh0RGF5OiAnW3N1dHJhIHVdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtuZWRqZWxqdV0gW3VdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbdV0gW3NyaWplZHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzdWJvdHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3VdIGRkZGQgW3VdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdbanXEjWVyIHVdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3Byb8WhbHVdIFtuZWRqZWxqdV0gW3VdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbcHJvxaFsdV0gW3NyaWplZHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3Byb8WhbGVdIFtzdWJvdGVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3Byb8WhbGldIGRkZGQgW3VdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnemEgJXMnLFxuICAgIHBhc3Q6ICdwcmlqZSAlcycsXG4gICAgczogJ3BhciBzZWt1bmRpJyxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0ZSxcbiAgICBoaDogdHJhbnNsYXRlLFxuICAgIGQ6ICdkYW4nLFxuICAgIGRkOiB0cmFuc2xhdGUsXG4gICAgTTogJ21qZXNlYycsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiAnZ29kaW51JyxcbiAgICB5eTogdHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgd2Vla0VuZGluZ3MgPSAndmFzw6FybmFwIGjDqXRmxZFuIGtlZGRlbiBzemVyZMOhbiBjc8O8dMO2cnTDtmvDtm4gcMOpbnRla2VuIHN6b21iYXRvbicuc3BsaXQoJyAnKTtcblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICB2YXIgbnVtID0gbnVtYmVyO1xuXG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICduw6low6FueSBtw6Fzb2RwZXJjJyA6ICduw6low6FueSBtw6Fzb2RwZXJjZSc7XG5cbiAgICBjYXNlICdzcyc6XG4gICAgICByZXR1cm4gbnVtICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXgpID8gJyBtw6Fzb2RwZXJjJyA6ICcgbcOhc29kcGVyY2UnO1xuXG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gJ2VneScgKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgcGVyYycgOiAnIHBlcmNlJyk7XG5cbiAgICBjYXNlICdtbSc6XG4gICAgICByZXR1cm4gbnVtICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIHBlcmMnIDogJyBwZXJjZScpO1xuXG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gJ2VneScgKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgw7NyYScgOiAnIMOzcsOhamEnKTtcblxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIHJldHVybiBudW0gKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgw7NyYScgOiAnIMOzcsOhamEnKTtcblxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuICdlZ3knICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIG5hcCcgOiAnIG5hcGphJyk7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICByZXR1cm4gbnVtICsgKGlzRnV0dXJlIHx8IHdpdGhvdXRTdWZmaXggPyAnIG5hcCcgOiAnIG5hcGphJyk7XG5cbiAgICBjYXNlICdNJzpcbiAgICAgIHJldHVybiAnZWd5JyArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4ID8gJyBow7NuYXAnIDogJyBow7NuYXBqYScpO1xuXG4gICAgY2FzZSAnTU0nOlxuICAgICAgcmV0dXJuIG51bSArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4ID8gJyBow7NuYXAnIDogJyBow7NuYXBqYScpO1xuXG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gJ2VneScgKyAoaXNGdXR1cmUgfHwgd2l0aG91dFN1ZmZpeCA/ICcgw6l2JyA6ICcgw6l2ZScpO1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgcmV0dXJuIG51bSArIChpc0Z1dHVyZSB8fCB3aXRob3V0U3VmZml4ID8gJyDDqXYnIDogJyDDqXZlJyk7XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIHdlZWsoaXNGdXR1cmUpIHtcbiAgcmV0dXJuIChpc0Z1dHVyZSA/ICcnIDogJ1ttw7psdF0gJykgKyAnWycgKyB3ZWVrRW5kaW5nc1t0aGlzLmRheSgpXSArICddIExUWy1rb3JdJztcbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnaHUnLCB7XG4gIG1vbnRoczogJ2phbnXDoXJfZmVicnXDoXJfbcOhcmNpdXNfw6FwcmlsaXNfbcOhanVzX2rDum5pdXNfasO6bGl1c19hdWd1c3p0dXNfc3plcHRlbWJlcl9va3TDs2Jlcl9ub3ZlbWJlcl9kZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYW4uX2ZlYi5fbcOhcmMuX8OhcHIuX23DoWouX2rDum4uX2rDumwuX2F1Zy5fc3plcHQuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ3Zhc8Ohcm5hcF9ow6l0ZsWRX2tlZGRfc3plcmRhX2Nzw7x0w7ZydMO2a19ww6ludGVrX3N6b21iYXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICd2YXNfaMOpdF9rZWRkX3N6ZV9jc8O8dF9ww6luX3N6bycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICd2X2hfa19zemVfY3NfcF9zem8nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS5NTS5ERC4nLFxuICAgIExMOiAnWVlZWS4gTU1NTSBELicsXG4gICAgTExMOiAnWVlZWS4gTU1NTSBELiBIOm1tJyxcbiAgICBMTExMOiAnWVlZWS4gTU1NTSBELiwgZGRkZCBIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvZGV8ZHUvaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC5jaGFyQXQoMSkudG9Mb3dlckNhc2UoKSA9PT0gJ3UnO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMikge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPT09IHRydWUgPyAnZGUnIDogJ0RFJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPT09IHRydWUgPyAnZHUnIDogJ0RVJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1ttYV0gTFRbLWtvcl0nLFxuICAgIG5leHREYXk6ICdbaG9sbmFwXSBMVFsta29yXScsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuIHdlZWsuY2FsbCh0aGlzLCB0cnVlKTtcbiAgICB9LFxuICAgIGxhc3REYXk6ICdbdGVnbmFwXSBMVFsta29yXScsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgcmV0dXJuIHdlZWsuY2FsbCh0aGlzLCBmYWxzZSk7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIG3Dumx2YScsXG4gICAgcGFzdDogJyVzJyxcbiAgICBzOiB0cmFuc2xhdGUsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiB0cmFuc2xhdGUsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiB0cmFuc2xhdGUsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiB0cmFuc2xhdGUsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnaHktYW0nLCB7XG4gIG1vbnRoczoge1xuICAgIGZvcm1hdDogJ9Ww1bjWgtW21b7VodaA1atf1oPVpdW/1oDVvtWh1oDVq1/VtNWh1oDVv9WrX9Wh1brWgNWr1azVq1/VtNWh1bXVq9W91atf1bDVuNaC1bbVq9W91atf1bDVuNaC1azVq9W91atf1oXVo9W41b3Vv9W41b3Vq1/VvdWl1brVv9Wl1bTVotWl1oDVq1/VsNW41a/Vv9Wl1bTVotWl1oDVq1/VttW41bXVpdW01aLVpdaA1atf1aTVpdWv1b/VpdW01aLVpdaA1asnLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ9Ww1bjWgtW21b7VodaAX9aD1aXVv9aA1b7VodaAX9W01aHWgNW/X9Wh1brWgNWr1axf1bTVodW11avVvV/VsNW41oLVttWr1b1f1bDVuNaC1azVq9W9X9aF1aPVuNW91b/VuNW9X9W91aXVutW/1aXVtNWi1aXWgF/VsNW41a/Vv9Wl1bTVotWl1oBf1bbVuNW11aXVtNWi1aXWgF/VpNWl1a/Vv9Wl1bTVotWl1oAnLnNwbGl0KCdfJylcbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICfVsNW21b5f1oPVv9aAX9W01oDVv1/VodW61oBf1bTVtdW9X9Ww1bbVvV/VsNWs1b1f1oXVo9W9X9W91brVv1/VsNWv1b9f1bbVtNWiX9Wk1a/Vvycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfVr9Wr1oDVodWv1atf1aXWgNWv1bjWgtW31aHVotWp1atf1aXWgNWl1oTVt9Wh1aLVqdWrX9W51bjWgNWl1oTVt9Wh1aLVqdWrX9Ww1avVttWj1bfVodWi1anVq1/VuNaC1oDVotWh1alf1bfVodWi1aHVqScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9Wv1oDVr1/VpdaA1a9f1aXWgNaEX9W51oDWhF/VsNW21aNf1bjWgtaA1aJf1bfVotWpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9Wv1oDVr1/VpdaA1a9f1aXWgNaEX9W51oDWhF/VsNW21aNf1bjWgtaA1aJf1bfVotWpJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWSDVqS4nLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZINWpLiwgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSDVqS4sIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb1aHVtdW91oXWgF0gTFQnLFxuICAgIG5leHREYXk6ICdb1b7VodWy1ahdIExUJyxcbiAgICBsYXN0RGF5OiAnW9Wl1oDVpdWvXSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgcmV0dXJuICdkZGRkIFvWhdaA1agg1arVodW01ahdIExUJztcbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiAnW9Wh1bbWgdWh1a5dIGRkZGQgW9aF1oDVqCDVqtWh1bTVqF0gTFQnO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDVsNWl1b/VuCcsXG4gICAgcGFzdDogJyVzINWh1bzVodW7JyxcbiAgICBzOiAn1bTVqyDWhNWh1bbVqyDVvtWh1bXWgNWv1bXVodW2JyxcbiAgICBzczogJyVkINW+1aHVtdaA1a/VtdWh1bYnLFxuICAgIG06ICfWgNW41brVpScsXG4gICAgbW06ICclZCDWgNW41brVpScsXG4gICAgaDogJ9Wq1aHVtCcsXG4gICAgaGg6ICclZCDVqtWh1bQnLFxuICAgIGQ6ICfWhdaAJyxcbiAgICBkZDogJyVkINaF1oAnLFxuICAgIE06ICfVodW01avVvScsXG4gICAgTU06ICclZCDVodW01avVvScsXG4gICAgeTogJ9W/1aHWgNWrJyxcbiAgICB5eTogJyVkINW/1aHWgNWrJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv1aPVq9W31aXWgNW+1aF81aHVvNWh1b7VuNW/1b7VoXzWgdWl1oDVpdWv1b7VoXzVpdaA1aXVr9W41bXVodW2LyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXijWgdWl1oDVpdWv1b7VoXzVpdaA1aXVr9W41bXVodW2KSQvLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cikge1xuICAgIGlmIChob3VyIDwgNCkge1xuICAgICAgcmV0dXJuICfVo9Wr1bfVpdaA1b7VoSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn1aHVvNWh1b7VuNW/1b7VoSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn1oHVpdaA1aXVr9W+1aEnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ9Wl1oDVpdWv1bjVtdWh1bYnO1xuICAgIH1cbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9fFxcZHsxLDJ9LSjVq9W2fNaA1aQpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgIGNhc2UgJ0RERG8nOlxuICAgICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIG51bWJlciArICct1avVtic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJy3WgNWkJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2lkJywge1xuICBtb250aHM6ICdKYW51YXJpX0ZlYnJ1YXJpX01hcmV0X0FwcmlsX01laV9KdW5pX0p1bGlfQWd1c3R1c19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hcl9BcHJfTWVpX0p1bl9KdWxfQWd0X1NlcF9Pa3RfTm92X0Rlcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdNaW5nZ3VfU2VuaW5fU2VsYXNhX1JhYnVfS2FtaXNfSnVtYXRfU2FidHUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdNaW5fU2VuX1NlbF9SYWJfS2FtX0p1bV9TYWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnTWdfU25fU2xfUmJfS21fSm1fU2InLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISC5tbScsXG4gICAgTFRTOiAnSEgubW0uc3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL3BhZ2l8c2lhbmd8c29yZXxtYWxhbS8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICdwYWdpJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3NpYW5nJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdzb3JlJyB8fCBtZXJpZGllbSA9PT0gJ21hbGFtJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA8IDExKSB7XG4gICAgICByZXR1cm4gJ3BhZ2knO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxNSkge1xuICAgICAgcmV0dXJuICdzaWFuZyc7XG4gICAgfSBlbHNlIGlmIChob3VycyA8IDE5KSB7XG4gICAgICByZXR1cm4gJ3NvcmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ21hbGFtJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tIYXJpIGluaSBwdWt1bF0gTFQnLFxuICAgIG5leHREYXk6ICdbQmVzb2sgcHVrdWxdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3B1a3VsXSBMVCcsXG4gICAgbGFzdERheTogJ1tLZW1hcmluIHB1a3VsXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtsYWx1IHB1a3VsXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdkYWxhbSAlcycsXG4gICAgcGFzdDogJyVzIHlhbmcgbGFsdScsXG4gICAgczogJ2JlYmVyYXBhIGRldGlrJyxcbiAgICBzczogJyVkIGRldGlrJyxcbiAgICBtOiAnc2VtZW5pdCcsXG4gICAgbW06ICclZCBtZW5pdCcsXG4gICAgaDogJ3NlamFtJyxcbiAgICBoaDogJyVkIGphbScsXG4gICAgZDogJ3NlaGFyaScsXG4gICAgZGQ6ICclZCBoYXJpJyxcbiAgICBNOiAnc2VidWxhbicsXG4gICAgTU06ICclZCBidWxhbicsXG4gICAgeTogJ3NldGFodW4nLFxuICAgIHl5OiAnJWQgdGFodW4nXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcGx1cmFsKG4pIHtcbiAgaWYgKG4gJSAxMDAgPT09IDExKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAobiAlIDEwID09PSAxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbm9ra3JhciBzZWvDum5kdXInIDogJ25va2tydW0gc2Vrw7puZHVtJztcblxuICAgIGNhc2UgJ3NzJzpcbiAgICAgIGlmIChwbHVyYWwobnVtYmVyKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnc2Vrw7puZHVyJyA6ICdzZWvDum5kdW0nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdCArICdzZWvDum5kYSc7XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ23DrW7DunRhJyA6ICdtw61uw7p0dSc7XG5cbiAgICBjYXNlICdtbSc6XG4gICAgICBpZiAocGx1cmFsKG51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICh3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ23DrW7DunR1cicgOiAnbcOtbsO6dHVtJyk7XG4gICAgICB9IGVsc2UgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdtw61uw7p0YSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgKyAnbcOtbsO6dHUnO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgaWYgKHBsdXJhbChudW1iZXIpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdrbHVra3VzdHVuZGlyJyA6ICdrbHVra3VzdHVuZHVtJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgKyAna2x1a2t1c3R1bmQnO1xuXG4gICAgY2FzZSAnZCc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gJ2RhZ3VyJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzRnV0dXJlID8gJ2RhZycgOiAnZGVnaSc7XG5cbiAgICBjYXNlICdkZCc6XG4gICAgICBpZiAocGx1cmFsKG51bWJlcikpIHtcbiAgICAgICAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ2RhZ2FyJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQgKyAoaXNGdXR1cmUgPyAnZGFnYScgOiAnZMO2Z3VtJyk7XG4gICAgICB9IGVsc2UgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArICdkYWd1cic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgKyAoaXNGdXR1cmUgPyAnZGFnJyA6ICdkZWdpJyk7XG5cbiAgICBjYXNlICdNJzpcbiAgICAgIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIHJldHVybiAnbcOhbnXDsHVyJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzRnV0dXJlID8gJ23DoW51w7AnIDogJ23DoW51w7BpJztcblxuICAgIGNhc2UgJ01NJzpcbiAgICAgIGlmIChwbHVyYWwobnVtYmVyKSkge1xuICAgICAgICBpZiAod2l0aG91dFN1ZmZpeCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQgKyAnbcOhbnXDsGlyJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQgKyAoaXNGdXR1cmUgPyAnbcOhbnXDsGknIDogJ23DoW51w7B1bScpO1xuICAgICAgfSBlbHNlIGlmICh3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnbcOhbnXDsHVyJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdCArIChpc0Z1dHVyZSA/ICdtw6FudcOwJyA6ICdtw6FudcOwaScpO1xuXG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICfDoXInIDogJ8OhcmknO1xuXG4gICAgY2FzZSAneXknOlxuICAgICAgaWYgKHBsdXJhbChudW1iZXIpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICfDoXInIDogJ8OhcnVtJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgKyAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICfDoXInIDogJ8OhcmknKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdpcycsIHtcbiAgbW9udGhzOiAnamFuw7phcl9mZWJyw7phcl9tYXJzX2FwcsOtbF9tYcOtX2rDum7DrV9qw7psw61fw6Fnw7pzdF9zZXB0ZW1iZXJfb2t0w7NiZXJfbsOzdmVtYmVyX2Rlc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFyX2Fwcl9tYcOtX2rDum5fasO6bF/DoWfDul9zZXBfb2t0X27Ds3ZfZGVzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ3N1bm51ZGFndXJfbcOhbnVkYWd1cl/DvnJpw7BqdWRhZ3VyX21pw7B2aWt1ZGFndXJfZmltbXR1ZGFndXJfZsO2c3R1ZGFndXJfbGF1Z2FyZGFndXInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdzdW5fbcOhbl/DvnJpX21pw7BfZmltX2bDtnNfbGF1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1N1X03DoV/DnnJfTWlfRmlfRsO2X0xhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgW2tsLl0gSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBba2wuXSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbw60gZGFnIGtsLl0gTFQnLFxuICAgIG5leHREYXk6ICdbw6EgbW9yZ3VuIGtsLl0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBba2wuXSBMVCcsXG4gICAgbGFzdERheTogJ1vDrSBnw6ZyIGtsLl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW3PDrcOwYXN0YV0gZGRkZCBba2wuXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdlZnRpciAlcycsXG4gICAgcGFzdDogJ2Z5cmlyICVzIHPDrcOwYW4nLFxuICAgIHM6IHRyYW5zbGF0ZSxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6ICdrbHVra3VzdHVuZCcsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiB0cmFuc2xhdGUsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiB0cmFuc2xhdGUsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiB0cmFuc2xhdGUsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnaXQtY2gnLCB7XG4gIG1vbnRoczogJ2dlbm5haW9fZmViYnJhaW9fbWFyem9fYXByaWxlX21hZ2dpb19naXVnbm9fbHVnbGlvX2Fnb3N0b19zZXR0ZW1icmVfb3R0b2JyZV9ub3ZlbWJyZV9kaWNlbWJyZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdnZW5fZmViX21hcl9hcHJfbWFnX2dpdV9sdWdfYWdvX3NldF9vdHRfbm92X2RpYycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdkb21lbmljYV9sdW5lZMOsX21hcnRlZMOsX21lcmNvbGVkw6xfZ2lvdmVkw6xfdmVuZXJkw6xfc2FiYXRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnZG9tX2x1bl9tYXJfbWVyX2dpb192ZW5fc2FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RvX2x1X21hX21lX2dpX3ZlX3NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbT2dnaSBhbGxlXSBMVCcsXG4gICAgbmV4dERheTogJ1tEb21hbmkgYWxsZV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbYWxsZV0gTFQnLFxuICAgIGxhc3REYXk6ICdbSWVyaSBhbGxlXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1tsYSBzY29yc2FdIGRkZGQgW2FsbGVdIExUJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiAnW2xvIHNjb3Jzb10gZGRkZCBbYWxsZV0gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6IGZ1bmN0aW9uIGZ1dHVyZShzKSB7XG4gICAgICByZXR1cm4gKC9eWzAtOV0uKyQvLnRlc3QocykgPyAndHJhJyA6ICdpbicpICsgJyAnICsgcztcbiAgICB9LFxuICAgIHBhc3Q6ICclcyBmYScsXG4gICAgczogJ2FsY3VuaSBzZWNvbmRpJyxcbiAgICBzczogJyVkIHNlY29uZGknLFxuICAgIG06ICd1biBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRpJyxcbiAgICBoOiBcInVuJ29yYVwiLFxuICAgIGhoOiAnJWQgb3JlJyxcbiAgICBkOiAndW4gZ2lvcm5vJyxcbiAgICBkZDogJyVkIGdpb3JuaScsXG4gICAgTTogJ3VuIG1lc2UnLFxuICAgIE1NOiAnJWQgbWVzaScsXG4gICAgeTogJ3VuIGFubm8nLFxuICAgIHl5OiAnJWQgYW5uaSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2l0Jywge1xuICBtb250aHM6ICdnZW5uYWlvX2ZlYmJyYWlvX21hcnpvX2FwcmlsZV9tYWdnaW9fZ2l1Z25vX2x1Z2xpb19hZ29zdG9fc2V0dGVtYnJlX290dG9icmVfbm92ZW1icmVfZGljZW1icmUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnZ2VuX2ZlYl9tYXJfYXByX21hZ19naXVfbHVnX2Fnb19zZXRfb3R0X25vdl9kaWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnZG9tZW5pY2FfbHVuZWTDrF9tYXJ0ZWTDrF9tZXJjb2xlZMOsX2dpb3ZlZMOsX3ZlbmVyZMOsX3NhYmF0bycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ2RvbV9sdW5fbWFyX21lcl9naW9fdmVuX3NhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdkb19sdV9tYV9tZV9naV92ZV9zYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiBmdW5jdGlvbiBzYW1lRGF5KCkge1xuICAgICAgcmV0dXJuICdbT2dnaSBhJyArICh0aGlzLmhvdXJzKCkgPiAxID8gJ2xsZSAnIDogdGhpcy5ob3VycygpID09PSAwID8gJyAnIDogXCJsbCdcIikgKyAnXUxUJztcbiAgICB9LFxuICAgIG5leHREYXk6IGZ1bmN0aW9uIG5leHREYXkoKSB7XG4gICAgICByZXR1cm4gJ1tEb21hbmkgYScgKyAodGhpcy5ob3VycygpID4gMSA/ICdsbGUgJyA6IHRoaXMuaG91cnMoKSA9PT0gMCA/ICcgJyA6IFwibGwnXCIpICsgJ11MVCc7XG4gICAgfSxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICByZXR1cm4gJ2RkZGQgW2EnICsgKHRoaXMuaG91cnMoKSA+IDEgPyAnbGxlICcgOiB0aGlzLmhvdXJzKCkgPT09IDAgPyAnICcgOiBcImxsJ1wiKSArICddTFQnO1xuICAgIH0sXG4gICAgbGFzdERheTogZnVuY3Rpb24gbGFzdERheSgpIHtcbiAgICAgIHJldHVybiAnW0llcmkgYScgKyAodGhpcy5ob3VycygpID4gMSA/ICdsbGUgJyA6IHRoaXMuaG91cnMoKSA9PT0gMCA/ICcgJyA6IFwibGwnXCIpICsgJ11MVCc7XG4gICAgfSxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW0xhIHNjb3JzYV0gZGRkZCBbYScgKyAodGhpcy5ob3VycygpID4gMSA/ICdsbGUgJyA6IHRoaXMuaG91cnMoKSA9PT0gMCA/ICcgJyA6IFwibGwnXCIpICsgJ11MVCc7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJ1tMbyBzY29yc29dIGRkZGQgW2EnICsgKHRoaXMuaG91cnMoKSA+IDEgPyAnbGxlICcgOiB0aGlzLmhvdXJzKCkgPT09IDAgPyAnICcgOiBcImxsJ1wiKSArICddTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd0cmEgJXMnLFxuICAgIHBhc3Q6ICclcyBmYScsXG4gICAgczogJ2FsY3VuaSBzZWNvbmRpJyxcbiAgICBzczogJyVkIHNlY29uZGknLFxuICAgIG06ICd1biBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRpJyxcbiAgICBoOiBcInVuJ29yYVwiLFxuICAgIGhoOiAnJWQgb3JlJyxcbiAgICBkOiAndW4gZ2lvcm5vJyxcbiAgICBkZDogJyVkIGdpb3JuaScsXG4gICAgdzogJ3VuYSBzZXR0aW1hbmEnLFxuICAgIHd3OiAnJWQgc2V0dGltYW5lJyxcbiAgICBNOiAndW4gbWVzZScsXG4gICAgTU06ICclZCBtZXNpJyxcbiAgICB5OiAndW4gYW5ubycsXG4gICAgeXk6ICclZCBhbm5pJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3Cui8sXG4gIG9yZGluYWw6ICclZMK6JyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnamEnLCB7XG4gIGVyYXM6IFt7XG4gICAgc2luY2U6ICcyMDE5LTA1LTAxJyxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ+S7pOWSjCcsXG4gICAgbmFycm93OiAn44u/JyxcbiAgICBhYmJyOiAnUidcbiAgfSwge1xuICAgIHNpbmNlOiAnMTk4OS0wMS0wOCcsXG4gICAgdW50aWw6ICcyMDE5LTA0LTMwJyxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ+W5s+aIkCcsXG4gICAgbmFycm93OiAn4427JyxcbiAgICBhYmJyOiAnSCdcbiAgfSwge1xuICAgIHNpbmNlOiAnMTkyNi0xMi0yNScsXG4gICAgdW50aWw6ICcxOTg5LTAxLTA3JyxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ+aYreWSjCcsXG4gICAgbmFycm93OiAn4428JyxcbiAgICBhYmJyOiAnUydcbiAgfSwge1xuICAgIHNpbmNlOiAnMTkxMi0wNy0zMCcsXG4gICAgdW50aWw6ICcxOTI2LTEyLTI0JyxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ+Wkp+atoycsXG4gICAgbmFycm93OiAn4429JyxcbiAgICBhYmJyOiAnVCdcbiAgfSwge1xuICAgIHNpbmNlOiAnMTg3My0wMS0wMScsXG4gICAgdW50aWw6ICcxOTEyLTA3LTI5JyxcbiAgICBvZmZzZXQ6IDYsXG4gICAgbmFtZTogJ+aYjuayuycsXG4gICAgbmFycm93OiAn442+JyxcbiAgICBhYmJyOiAnTSdcbiAgfSwge1xuICAgIHNpbmNlOiAnMDAwMS0wMS0wMScsXG4gICAgdW50aWw6ICcxODczLTEyLTMxJyxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ+ilv+aapicsXG4gICAgbmFycm93OiAnQUQnLFxuICAgIGFiYnI6ICdBRCdcbiAgfSwge1xuICAgIHNpbmNlOiAnMDAwMC0xMi0zMScsXG4gICAgdW50aWw6IC1JbmZpbml0eSxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ+e0gOWFg+WJjScsXG4gICAgbmFycm93OiAnQkMnLFxuICAgIGFiYnI6ICdCQydcbiAgfV0sXG4gIGVyYVllYXJPcmRpbmFsUmVnZXg6IC8o5YWDfFxcZCsp5bm0LyxcbiAgZXJhWWVhck9yZGluYWxQYXJzZTogZnVuY3Rpb24gZXJhWWVhck9yZGluYWxQYXJzZShpbnB1dCwgbWF0Y2gpIHtcbiAgICByZXR1cm4gbWF0Y2hbMV0gPT09ICflhYMnID8gMSA6IHBhcnNlSW50KG1hdGNoWzFdIHx8IGlucHV0LCAxMCk7XG4gIH0sXG4gIG1vbnRoczogJzHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJzHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+aXpeabnOaXpV/mnIjmm5zml6Vf54Gr5puc5pelX+awtOabnOaXpV/mnKjmm5zml6Vf6YeR5puc5pelX+Wcn+abnOaXpScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+aXpV/mnIhf54GrX+awtF/mnKhf6YeRX+Wcnycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfml6Vf5pyIX+eBq1/msLRf5pyoX+mHkV/lnJ8nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZL01NL0REJyxcbiAgICBMTDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgTExMOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBMTExMOiAnWVlZWeW5tE3mnIhE5pelIGRkZGQgSEg6bW0nLFxuICAgIGw6ICdZWVlZL01NL0REJyxcbiAgICBsbDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgbGxsOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBsbGxsOiAnWVlZWeW5tE3mnIhE5pelKGRkZCkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/ljYjliY185Y2I5b6ML2ksXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09ICfljYjlvownO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfljYjliY0nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+WNiOW+jCc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb5LuK5pelXSBMVCcsXG4gICAgbmV4dERheTogJ1vmmI7ml6VdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsobm93KSB7XG4gICAgICBpZiAobm93LndlZWsoKSAhPT0gdGhpcy53ZWVrKCkpIHtcbiAgICAgICAgcmV0dXJuICdb5p2l6YCxXWRkZGQgTFQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdkZGRkIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdb5pio5pelXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKG5vdykge1xuICAgICAgaWYgKHRoaXMud2VlaygpICE9PSBub3cud2VlaygpKSB7XG4gICAgICAgIHJldHVybiAnW+WFiOmAsV1kZGRkIExUJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnZGRkZCBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfeaXpS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAneSc6XG4gICAgICAgIHJldHVybiBudW1iZXIgPT09IDEgPyAn5YWD5bm0JyA6IG51bWJlciArICflubQnO1xuXG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfml6UnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPlvownLFxuICAgIHBhc3Q6ICclc+WJjScsXG4gICAgczogJ+aVsOenkicsXG4gICAgc3M6ICclZOenkicsXG4gICAgbTogJzHliIYnLFxuICAgIG1tOiAnJWTliIYnLFxuICAgIGg6ICcx5pmC6ZaTJyxcbiAgICBoaDogJyVk5pmC6ZaTJyxcbiAgICBkOiAnMeaXpScsXG4gICAgZGQ6ICclZOaXpScsXG4gICAgTTogJzHjg7bmnIgnLFxuICAgIE1NOiAnJWTjg7bmnIgnLFxuICAgIHk6ICcx5bm0JyxcbiAgICB5eTogJyVk5bm0J1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdqdicsIHtcbiAgbW9udGhzOiAnSmFudWFyaV9GZWJydWFyaV9NYXJldF9BcHJpbF9NZWlfSnVuaV9KdWxpX0FndXN0dXNfU2VwdGVtYmVyX09rdG9iZXJfTm9wZW1iZXJfRGVzZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01laV9KdW5fSnVsX0Fnc19TZXBfT2t0X05vcF9EZXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnTWluZ2d1X1NlbmVuX1NlbG9zb19SZWJ1X0tlbWlzX0plbXV3YWhfU2VwdHUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdNaW5fU2VuX1NlbF9SZWJfS2VtX0plbV9TZXAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnTWdfU25fU2xfUmJfS21fSm1fU3AnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISC5tbScsXG4gICAgTFRTOiAnSEgubW0uc3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL2VuamluZ3xzaXlhbmd8c29udGVufG5kYWx1LyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ2VuamluZycpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICdzaXlhbmcnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3NvbnRlbicgfHwgbWVyaWRpZW0gPT09ICduZGFsdScpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMSkge1xuICAgICAgcmV0dXJuICdlbmppbmcnO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxNSkge1xuICAgICAgcmV0dXJuICdzaXlhbmcnO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxOSkge1xuICAgICAgcmV0dXJuICdzb250ZW4nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ25kYWx1JztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tEaW50ZW4gcHVuaWtvIHB1a3VsXSBMVCcsXG4gICAgbmV4dERheTogJ1tNYmVuamFuZyBwdWt1bF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbcHVrdWxdIExUJyxcbiAgICBsYXN0RGF5OiAnW0thbGEgd2luZ2kgcHVrdWxdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2tlcGVuZ2tlciBwdWt1bF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnd29udGVuIGluZyAlcycsXG4gICAgcGFzdDogJyVzIGluZ2thbmcga2VwZW5na2VyJyxcbiAgICBzOiAnc2F3ZXRhd2lzIGRldGlrJyxcbiAgICBzczogJyVkIGRldGlrJyxcbiAgICBtOiAnc2V0dW5nZ2FsIG1lbml0JyxcbiAgICBtbTogJyVkIG1lbml0JyxcbiAgICBoOiAnc2V0dW5nZ2FsIGphbScsXG4gICAgaGg6ICclZCBqYW0nLFxuICAgIGQ6ICdzZWRpbnRlbicsXG4gICAgZGQ6ICclZCBkaW50ZW4nLFxuICAgIE06ICdzZXd1bGFuJyxcbiAgICBNTTogJyVkIHd1bGFuJyxcbiAgICB5OiAnc2V0YXVuJyxcbiAgICB5eTogJyVkIHRhdW4nXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2thJywge1xuICBtb250aHM6ICfhg5jhg5Dhg5zhg5Xhg5Dhg6Dhg5hf4YOX4YOU4YOR4YOU4YOg4YOV4YOQ4YOa4YOYX+GDm+GDkOGDoOGDouGDmF/hg5Dhg57hg6Dhg5jhg5rhg5hf4YOb4YOQ4YOY4YOh4YOYX+GDmOGDleGDnOGDmOGDoeGDmF/hg5jhg5Xhg5rhg5jhg6Hhg5hf4YOQ4YOS4YOV4YOY4YOh4YOi4YOdX+GDoeGDlOGDpeGDouGDlOGDm+GDkeGDlOGDoOGDmF/hg53hg6Xhg6Lhg53hg5vhg5Hhg5Thg6Dhg5hf4YOc4YOd4YOU4YOb4YOR4YOU4YOg4YOYX+GDk+GDlOGDmeGDlOGDm+GDkeGDlOGDoOGDmCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfhg5jhg5Dhg5xf4YOX4YOU4YORX+GDm+GDkOGDoF/hg5Dhg57hg6Bf4YOb4YOQ4YOYX+GDmOGDleGDnF/hg5jhg5Xhg5pf4YOQ4YOS4YOVX+GDoeGDlOGDpV/hg53hg6Xhg6Jf4YOc4YOd4YOUX+GDk+GDlOGDmScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6IHtcbiAgICBzdGFuZGFsb25lOiAn4YOZ4YOV4YOY4YOg4YOQX+GDneGDoOGDqOGDkOGDkeGDkOGDl+GDmF/hg6Hhg5Dhg5vhg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOd4YOX4YOu4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDruGDo+GDl+GDqOGDkOGDkeGDkOGDl+GDmF/hg57hg5Dhg6Dhg5Dhg6Hhg5nhg5Thg5Xhg5hf4YOo4YOQ4YOR4YOQ4YOX4YOYJy5zcGxpdCgnXycpLFxuICAgIGZvcm1hdDogJ+GDmeGDleGDmOGDoOGDkOGDoV/hg53hg6Dhg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOh4YOQ4YOb4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDneGDl+GDruGDqOGDkOGDkeGDkOGDl+GDoV/hg67hg6Phg5fhg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOe4YOQ4YOg4YOQ4YOh4YOZ4YOU4YOV4YOhX+GDqOGDkOGDkeGDkOGDl+GDoScuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogLyjhg6zhg5jhg5zhg5B84YOo4YOU4YOb4YOT4YOU4YOSKS9cbiAgfSxcbiAgd2Vla2RheXNTaG9ydDogJ+GDmeGDleGDmF/hg53hg6Dhg6hf4YOh4YOQ4YObX+GDneGDl+GDrl/hg67hg6Phg5df4YOe4YOQ4YOgX+GDqOGDkOGDkScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfhg5nhg5Vf4YOd4YOgX+GDoeGDkF/hg53hg5df4YOu4YOjX+GDnuGDkF/hg6jhg5AnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4YOT4YOm4YOU4YOhXSBMVFst4YOW4YOUXScsXG4gICAgbmV4dERheTogJ1vhg67hg5Xhg5Dhg5pdIExUWy3hg5bhg5RdJyxcbiAgICBsYXN0RGF5OiAnW+GDkuGDo+GDqOGDmOGDnF0gTFRbLeGDluGDlF0nLFxuICAgIG5leHRXZWVrOiAnW+GDqOGDlOGDm+GDk+GDlOGDkl0gZGRkZCBMVFst4YOW4YOUXScsXG4gICAgbGFzdFdlZWs6ICdb4YOs4YOY4YOc4YOQXSBkZGRkIExULeGDluGDlCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6IGZ1bmN0aW9uIGZ1dHVyZShzKSB7XG4gICAgICByZXR1cm4gcy5yZXBsYWNlKC8o4YOs4YOQ4YObfOGDrOGDo+GDl3zhg6Hhg5Dhg5Dhg5d84YOs4YOU4YOafOGDk+GDpnzhg5fhg5UpKOGDmHzhg5QpLywgZnVuY3Rpb24gKCQwLCAkMSwgJDIpIHtcbiAgICAgICAgcmV0dXJuICQyID09PSAn4YOYJyA/ICQxICsgJ+GDqOGDmCcgOiAkMSArICQyICsgJ+GDqOGDmCc7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhc3Q6IGZ1bmN0aW9uIHBhc3Qocykge1xuICAgICAgaWYgKC8o4YOs4YOQ4YOb4YOYfOGDrOGDo+GDl+GDmHzhg6Hhg5Dhg5Dhg5fhg5h84YOT4YOm4YOUfOGDl+GDleGDlCkvLnRlc3QocykpIHtcbiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgvKOGDmHzhg5QpJC8sICfhg5jhg6Eg4YOs4YOY4YOcJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICgv4YOs4YOU4YOa4YOYLy50ZXN0KHMpKSB7XG4gICAgICAgIHJldHVybiBzLnJlcGxhY2UoL+GDrOGDlOGDmuGDmCQvLCAn4YOs4YOa4YOY4YOhIOGDrOGDmOGDnCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcztcbiAgICB9LFxuICAgIHM6ICfhg6Dhg5Dhg5vhg5Phg5Thg5zhg5jhg5vhg5Qg4YOs4YOQ4YOb4YOYJyxcbiAgICBzczogJyVkIOGDrOGDkOGDm+GDmCcsXG4gICAgbTogJ+GDrOGDo+GDl+GDmCcsXG4gICAgbW06ICclZCDhg6zhg6Phg5fhg5gnLFxuICAgIGg6ICfhg6Hhg5Dhg5Dhg5fhg5gnLFxuICAgIGhoOiAnJWQg4YOh4YOQ4YOQ4YOX4YOYJyxcbiAgICBkOiAn4YOT4YOm4YOUJyxcbiAgICBkZDogJyVkIOGDk+GDpuGDlCcsXG4gICAgTTogJ+GDl+GDleGDlCcsXG4gICAgTU06ICclZCDhg5fhg5Xhg5QnLFxuICAgIHk6ICfhg6zhg5Thg5rhg5gnLFxuICAgIHl5OiAnJWQg4YOs4YOU4YOa4YOYJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvMHwxLeGDmuGDmHzhg5vhg5QtXFxkezEsMn18XFxkezEsMn0t4YOULyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICBpZiAobnVtYmVyID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cblxuICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLeGDmuGDmCc7XG4gICAgfVxuXG4gICAgaWYgKG51bWJlciA8IDIwIHx8IG51bWJlciA8PSAxMDAgJiYgbnVtYmVyICUgMjAgPT09IDAgfHwgbnVtYmVyICUgMTAwID09PSAwKSB7XG4gICAgICByZXR1cm4gJ+GDm+GDlC0nICsgbnVtYmVyO1xuICAgIH1cblxuICAgIHJldHVybiBudW1iZXIgKyAnLeGDlCc7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzdWZmaXhlcyA9IHtcbiAgMDogJy3RiNGWJyxcbiAgMTogJy3RiNGWJyxcbiAgMjogJy3RiNGWJyxcbiAgMzogJy3RiNGWJyxcbiAgNDogJy3RiNGWJyxcbiAgNTogJy3RiNGWJyxcbiAgNjogJy3RiNGLJyxcbiAgNzogJy3RiNGWJyxcbiAgODogJy3RiNGWJyxcbiAgOTogJy3RiNGLJyxcbiAgMTA6ICct0YjRiycsXG4gIDIwOiAnLdGI0YsnLFxuICAzMDogJy3RiNGLJyxcbiAgNDA6ICct0YjRiycsXG4gIDUwOiAnLdGI0ZYnLFxuICA2MDogJy3RiNGLJyxcbiAgNzA6ICct0YjRlicsXG4gIDgwOiAnLdGI0ZYnLFxuICA5MDogJy3RiNGLJyxcbiAgMTAwOiAnLdGI0ZYnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgna2snLCB7XG4gIG1vbnRoczogJ9Kb0LDSo9GC0LDRgF/QsNKb0L/QsNC9X9C90LDRg9GA0YvQt1/RgdOZ0YPRltGAX9C80LDQvNGL0YBf0LzQsNGD0YHRi9C8X9GI0ZbQu9C00LVf0YLQsNC80YvQt1/Sm9GL0YDQutKv0LnQtdC6X9Kb0LDQt9Cw0L1f0pvQsNGA0LDRiNCwX9C20LXQu9GC0L7Sm9GB0LDQvScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfSm9Cw0qNf0LDSm9C/X9C90LDRg1/RgdOZ0YNf0LzQsNC8X9C80LDRg1/RiNGW0Ltf0YLQsNC8X9Kb0YvRgF/Sm9Cw0Ldf0pvQsNGAX9C20LXQuycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfQttC10LrRgdC10L3QsdGWX9C00q/QudGB0LXQvdCx0ZZf0YHQtdC50YHQtdC90LHRll/RgdOZ0YDRgdC10L3QsdGWX9Cx0LXQudGB0LXQvdCx0ZZf0LbSsdC80LBf0YHQtdC90LHRlicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9C20LXQul/QtNKv0Llf0YHQtdC5X9GB05nRgF/QsdC10Llf0LbSsdC8X9GB0LXQvScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQttC6X9C00Llf0YHQuV/RgdGAX9Cx0Llf0LbQvF/RgdC9Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9CR0q/Qs9GW0L0g0YHQsNKT0LDRgl0gTFQnLFxuICAgIG5leHREYXk6ICdb0JXRgNGC0LXSoyDRgdCw0pPQsNGCXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvRgdCw0pPQsNGCXSBMVCcsXG4gICAgbGFzdERheTogJ1vQmtC10YjQtSDRgdCw0pPQsNGCXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb06jRgtC60LXQvSDQsNC/0YLQsNC90YvSo10gZGRkZCBb0YHQsNKT0LDRgl0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg0ZbRiNGW0L3QtNC1JyxcbiAgICBwYXN0OiAnJXMg0LHSsdGA0YvQvScsXG4gICAgczogJ9Cx0ZbRgNC90LXRiNC1INGB0LXQutGD0L3QtCcsXG4gICAgc3M6ICclZCDRgdC10LrRg9C90LQnLFxuICAgIG06ICfQsdGW0YAg0LzQuNC90YPRgicsXG4gICAgbW06ICclZCDQvNC40L3Rg9GCJyxcbiAgICBoOiAn0LHRltGAINGB0LDSk9Cw0YInLFxuICAgIGhoOiAnJWQg0YHQsNKT0LDRgicsXG4gICAgZDogJ9Cx0ZbRgCDQutKv0L0nLFxuICAgIGRkOiAnJWQg0LrSr9C9JyxcbiAgICBNOiAn0LHRltGAINCw0LknLFxuICAgIE1NOiAnJWQg0LDQuScsXG4gICAgeTogJ9Cx0ZbRgCDQttGL0LsnLFxuICAgIHl5OiAnJWQg0LbRi9C7J1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0tKNGI0ZZ80YjRiykvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBhID0gbnVtYmVyICUgMTAsXG4gICAgICAgIGIgPSBudW1iZXIgPj0gMTAwID8gMTAwIDogbnVsbDtcbiAgICByZXR1cm4gbnVtYmVyICsgKHN1ZmZpeGVzW251bWJlcl0gfHwgc3VmZml4ZXNbYV0gfHwgc3VmZml4ZXNbYl0pO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4Z+hJyxcbiAgMjogJ+GfoicsXG4gIDM6ICfhn6MnLFxuICA0OiAn4Z+kJyxcbiAgNTogJ+GfpScsXG4gIDY6ICfhn6YnLFxuICA3OiAn4Z+nJyxcbiAgODogJ+GfqCcsXG4gIDk6ICfhn6knLFxuICAwOiAn4Z+gJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfhn6EnOiAnMScsXG4gICfhn6InOiAnMicsXG4gICfhn6MnOiAnMycsXG4gICfhn6QnOiAnNCcsXG4gICfhn6UnOiAnNScsXG4gICfhn6YnOiAnNicsXG4gICfhn6cnOiAnNycsXG4gICfhn6gnOiAnOCcsXG4gICfhn6knOiAnOScsXG4gICfhn6AnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdrbScsIHtcbiAgbW9udGhzOiAn4Z6Y4Z6A4Z6a4Z62X+GegOGeu+GemOGfkuGel+GfiF/hnpjhnrjhnpPhnrZf4Z6Y4Z+B4Z6f4Z62X+Gep+Gen+Gel+Getl/hnpjhnrfhnpDhnrvhnpPhnrZf4Z6A4Z6A4Z+S4Z6A4Z6K4Z62X+Gen+GeuOGeoOGetl/hnoDhnonhn5LhnonhnrZf4Z6P4Z674Z6b4Z62X+GenOGet+GeheGfkuGehuGet+GegOGetl/hnpLhn5LhnpPhnrwnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4Z6Y4Z6A4Z6a4Z62X+GegOGeu+GemOGfkuGel+GfiF/hnpjhnrjhnpPhnrZf4Z6Y4Z+B4Z6f4Z62X+Gep+Gen+Gel+Getl/hnpjhnrfhnpDhnrvhnpPhnrZf4Z6A4Z6A4Z+S4Z6A4Z6K4Z62X+Gen+GeuOGeoOGetl/hnoDhnonhn5LhnonhnrZf4Z6P4Z674Z6b4Z62X+GenOGet+GeheGfkuGehuGet+GegOGetl/hnpLhn5LhnpPhnrwnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4Z6i4Z624Z6R4Z634Z6P4Z+S4Z6ZX+GeheGfkOGek+GfkuGekV/hnqLhnoThn5LhnoLhnrbhnppf4Z6W4Z674Z6SX+GeluGfkuGemuGeoOGen+GfkuGelOGej+Get+GfjV/hnp/hnrvhnoDhn5Lhnppf4Z6f4Z+F4Z6a4Z+NJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4Z6i4Z62X+GehV/hnqJf4Z6WX+GeluGfkuGeml/hnp/hnrtf4Z6fJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+GeouGetl/hnoVf4Z6iX+Gell/hnpbhn5Lhnppf4Z6f4Z67X+Genycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+GeluGfkuGemuGeueGegHzhnpvhn5LhnoThnrbhnoUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSAn4Z6b4Z+S4Z6E4Z624Z6FJztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn4Z6W4Z+S4Z6a4Z654Z6AJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfhnpvhn5LhnoThnrbhnoUnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+GekOGfkuGehOGfg+Gek+GfgeGfhyDhnpjhn4nhn4ThnoRdIExUJyxcbiAgICBuZXh0RGF5OiAnW+Gen+GfkuGeouGfguGegCDhnpjhn4nhn4ThnoRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW+GemOGfieGfhOGehF0gTFQnLFxuICAgIGxhc3REYXk6ICdb4Z6Y4Z+S4Z6f4Z634Z6b4Z6Y4Z634Z6JIOGemOGfieGfhOGehF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb4Z6f4Z6U4Z+S4Z6P4Z624Z6g4Z+N4Z6Y4Z674Z6TXSBb4Z6Y4Z+J4Z+E4Z6EXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclc+GekeGfgOGejycsXG4gICAgcGFzdDogJyVz4Z6Y4Z674Z6TJyxcbiAgICBzOiAn4Z6U4Z+J4Z674Z6T4Z+S4Z6Y4Z624Z6T4Z6c4Z634Z6T4Z624Z6R4Z64JyxcbiAgICBzczogJyVkIOGenOGet+Gek+GetuGekeGeuCcsXG4gICAgbTogJ+GemOGeveGemeGek+GetuGekeGeuCcsXG4gICAgbW06ICclZCDhnpPhnrbhnpHhnrgnLFxuICAgIGg6ICfhnpjhnr3hnpnhnpjhn4nhn4ThnoQnLFxuICAgIGhoOiAnJWQg4Z6Y4Z+J4Z+E4Z6EJyxcbiAgICBkOiAn4Z6Y4Z694Z6Z4Z6Q4Z+S4Z6E4Z+DJyxcbiAgICBkZDogJyVkIOGekOGfkuGehOGfgycsXG4gICAgTTogJ+GemOGeveGemeGegeGfgicsXG4gICAgTU06ICclZCDhnoHhn4InLFxuICAgIHk6ICfhnpjhnr3hnpnhnobhn5LhnpPhnrbhn4YnLFxuICAgIHl5OiAnJWQg4Z6G4Z+S4Z6T4Z624Z+GJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAv4Z6R4Z64XFxkezEsMn0vLFxuICBvcmRpbmFsOiAn4Z6R4Z64JWQnLFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Z+h4Z+i4Z+j4Z+k4Z+l4Z+m4Z+n4Z+o4Z+p4Z+gXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfgs6cnLFxuICAyOiAn4LOoJyxcbiAgMzogJ+CzqScsXG4gIDQ6ICfgs6onLFxuICA1OiAn4LOrJyxcbiAgNjogJ+CzrCcsXG4gIDc6ICfgs60nLFxuICA4OiAn4LOuJyxcbiAgOTogJ+CzrycsXG4gIDA6ICfgs6YnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+Czpyc6ICcxJyxcbiAgJ+CzqCc6ICcyJyxcbiAgJ+CzqSc6ICczJyxcbiAgJ+Czqic6ICc0JyxcbiAgJ+Czqyc6ICc1JyxcbiAgJ+CzrCc6ICc2JyxcbiAgJ+CzrSc6ICc3JyxcbiAgJ+Czric6ICc4JyxcbiAgJ+Czryc6ICc5JyxcbiAgJ+Czpic6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2tuJywge1xuICBtb250aHM6ICfgspzgsqjgsrXgsrDgsr9f4LKr4LOG4LKs4LON4LKw4LK14LKw4LK/X+CyruCyvuCysOCzjeCymuCzjV/gso/gsqrgs43gsrDgsr/gsrLgs41f4LKu4LOG4LOVX+CynOCzguCyqOCzjV/gspzgs4HgsrLgs4bgs5Zf4LKG4LKX4LK44LON4LKf4LONX+CyuOCzhuCyquCzjeCyn+CzhuCyguCyrOCysOCzjV/gsoXgspXgs43gsp/gs4bgs4Lgs5XgsqzgsrDgs41f4LKo4LK14LOG4LKC4LKs4LKw4LONX+CyoeCyv+CyuOCzhuCyguCyrOCysOCzjScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgspzgsqhf4LKr4LOG4LKs4LON4LKwX+CyruCyvuCysOCzjeCymuCzjV/gso/gsqrgs43gsrDgsr/gsrLgs41f4LKu4LOG4LOVX+CynOCzguCyqOCzjV/gspzgs4HgsrLgs4bgs5Zf4LKG4LKX4LK44LON4LKf4LONX+CyuOCzhuCyquCzjeCyn+CzhuCygl/gsoXgspXgs43gsp/gs4bgs4Lgs5Vf4LKo4LK14LOG4LKCX+CyoeCyv+CyuOCzhuCygicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfgsq3gsr7gsqjgs4HgsrXgsr7gsrBf4LK44LOG4LOC4LOV4LKu4LK14LK+4LKwX+CyruCyguCyl+Cys+CyteCyvuCysF/gsqzgs4HgsqfgsrXgsr7gsrBf4LKX4LOB4LKw4LOB4LK14LK+4LKwX+CytuCzgeCyleCzjeCysOCyteCyvuCysF/gsrbgsqjgsr/gsrXgsr7gsrAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgsq3gsr7gsqjgs4Ff4LK44LOG4LOC4LOV4LKuX+CyruCyguCyl+Cys1/gsqzgs4Hgsqdf4LKX4LOB4LKw4LOBX+CytuCzgeCyleCzjeCysF/gsrbgsqjgsr8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4LKt4LK+X+CyuOCzhuCzguCzlV/gsq7gsoJf4LKs4LOBX+Cyl+CzgV/gsrbgs4Ff4LK2Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tJyxcbiAgICBMVFM6ICdBIGg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+Cyh+CyguCypuCzgV0gTFQnLFxuICAgIG5leHREYXk6ICdb4LKo4LK+4LKz4LOGXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgsqjgsr/gsqjgs43gsqjgs4ZdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgspXgs4bgs4Lgsqjgs4bgsq9dIGRkZGQsIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIOCyqOCyguCypOCysCcsXG4gICAgcGFzdDogJyVzIOCyueCyv+CyguCypuCzhicsXG4gICAgczogJ+CyleCzhuCysuCyteCzgSDgspXgs43gsrfgsqPgspfgsrPgs4EnLFxuICAgIHNzOiAnJWQg4LK44LOG4LKV4LOG4LKC4LKh4LOB4LKX4LKz4LOBJyxcbiAgICBtOiAn4LKS4LKC4LKm4LOBIOCyqOCyv+CyruCyv+CytycsXG4gICAgbW06ICclZCDgsqjgsr/gsq7gsr/gsrcnLFxuICAgIGg6ICfgspLgsoLgsqbgs4Eg4LKX4LKC4LKf4LOGJyxcbiAgICBoaDogJyVkIOCyl+CyguCyn+CzhicsXG4gICAgZDogJ+CykuCyguCypuCzgSDgsqbgsr/gsqgnLFxuICAgIGRkOiAnJWQg4LKm4LK/4LKoJyxcbiAgICBNOiAn4LKS4LKC4LKm4LOBIOCypOCyv+CyguCyl+Cys+CzgScsXG4gICAgTU06ICclZCDgsqTgsr/gsoLgspfgsrPgs4EnLFxuICAgIHk6ICfgspLgsoLgsqbgs4Eg4LK14LKw4LON4LK3JyxcbiAgICB5eTogJyVkIOCyteCysOCzjeCytydcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+Czp+CzqOCzqeCzquCzq+CzrOCzreCzruCzr+Czpl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4LKw4LK+4LKk4LON4LKw4LK/fOCyrOCzhuCys+Cyv+Cyl+CzjeCyl+Czhnzgsq7gsqfgs43gsq/gsr7gsrngs43gsqh84LK44LKC4LKc4LOGLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CysOCyvuCypOCzjeCysOCyvycpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CyrOCzhuCys+Cyv+Cyl+CzjeCyl+CzhicpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgsq7gsqfgs43gsq/gsr7gsrngs43gsqgnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CyuOCyguCynOCzhicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CysOCyvuCypOCzjeCysOCyvyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAn4LKs4LOG4LKz4LK/4LKX4LON4LKX4LOGJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgsq7gsqfgs43gsq/gsr7gsrngs43gsqgnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CyuOCyguCynOCzhic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4LKw4LK+4LKk4LON4LKw4LK/JztcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSjgsqjgs4bgs5UpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVyICsgJ+CyqOCzhuCzlSc7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2tvJywge1xuICBtb250aHM6ICcx7JuUXzLsm5RfM+yblF807JuUXzXsm5RfNuyblF837JuUXzjsm5RfOeyblF8xMOyblF8xMeyblF8xMuyblCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICcx7JuUXzLsm5RfM+yblF807JuUXzXsm5RfNuyblF837JuUXzjsm5RfOeyblF8xMOyblF8xMeyblF8xMuyblCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfsnbzsmpTsnbxf7JuU7JqU7J28X+2ZlOyalOydvF/siJjsmpTsnbxf66qp7JqU7J28X+q4iOyalOydvF/thqDsmpTsnbwnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfsnbxf7JuUX+2ZlF/siJhf66qpX+q4iF/thqAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn7J28X+yblF/tmZRf7IiYX+uqqV/quIhf7YagJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tJyxcbiAgICBMVFM6ICdBIGg6bW06c3MnLFxuICAgIEw6ICdZWVlZLk1NLkRELicsXG4gICAgTEw6ICdZWVlZ64WEIE1NTU0gROydvCcsXG4gICAgTExMOiAnWVlZWeuFhCBNTU1NIETsnbwgQSBoOm1tJyxcbiAgICBMTExMOiAnWVlZWeuFhCBNTU1NIETsnbwgZGRkZCBBIGg6bW0nLFxuICAgIGw6ICdZWVlZLk1NLkRELicsXG4gICAgbGw6ICdZWVlZ64WEIE1NTU0gROydvCcsXG4gICAgbGxsOiAnWVlZWeuFhCBNTU1NIETsnbwgQSBoOm1tJyxcbiAgICBsbGxsOiAnWVlZWeuFhCBNTU1NIETsnbwgZGRkZCBBIGg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ+yYpOuKmCBMVCcsXG4gICAgbmV4dERheTogJ+uCtOydvCBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIExUJyxcbiAgICBsYXN0RGF5OiAn7Ja07KCcIExUJyxcbiAgICBsYXN0V2VlazogJ+yngOuCnOyjvCBkZGRkIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzIO2bhCcsXG4gICAgcGFzdDogJyVzIOyghCcsXG4gICAgczogJ+uqhyDstIgnLFxuICAgIHNzOiAnJWTstIgnLFxuICAgIG06ICcx67aEJyxcbiAgICBtbTogJyVk67aEJyxcbiAgICBoOiAn7ZWcIOyLnOqwhCcsXG4gICAgaGg6ICclZOyLnOqwhCcsXG4gICAgZDogJ+2VmOujqCcsXG4gICAgZGQ6ICclZOydvCcsXG4gICAgTTogJ+2VnCDri6wnLFxuICAgIE1NOiAnJWTri6wnLFxuICAgIHk6ICfsnbwg64WEJyxcbiAgICB5eTogJyVk64WEJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0o7J28fOyblHzso7wpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfsnbwnO1xuXG4gICAgICBjYXNlICdNJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfsm5QnO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+yjvCc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv7Jik7KCEfOyYpO2bhC8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0odG9rZW4pIHtcbiAgICByZXR1cm4gdG9rZW4gPT09ICfsmKTtm4QnO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc1VwcGVyKSB7XG4gICAgcmV0dXJuIGhvdXIgPCAxMiA/ICfsmKTsoIQnIDogJ+yYpO2bhCc7XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfZoScsXG4gIDI6ICfZoicsXG4gIDM6ICfZoycsXG4gIDQ6ICfZpCcsXG4gIDU6ICfZpScsXG4gIDY6ICfZpicsXG4gIDc6ICfZpycsXG4gIDg6ICfZqCcsXG4gIDk6ICfZqScsXG4gIDA6ICfZoCdcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn2aEnOiAnMScsXG4gICfZoic6ICcyJyxcbiAgJ9mjJzogJzMnLFxuICAn2aQnOiAnNCcsXG4gICfZpSc6ICc1JyxcbiAgJ9mmJzogJzYnLFxuICAn2acnOiAnNycsXG4gICfZqCc6ICc4JyxcbiAgJ9mpJzogJzknLFxuICAn2aAnOiAnMCdcbn0sXG4gICAgbW9udGhzID0gWyfaqdin2YbZiNmG24wg2K/ZiNmI25XZhScsICfYtNmI2KjYp9iqJywgJ9im2KfYstin2LEnLCAn2YbbjNiz2KfZhicsICfYptin24zYp9ixJywgJ9it2YjYstuV24zYsdin2YYnLCAn2KrbldmF2YXZiNiyJywgJ9im2KfYqCcsICfYptuV24zZhNmI2YjZhCcsICfYqti02LHbjNmG24wg24zbldmD25XZhScsICfYqti02LHbjNmG24wg2K/ZiNmI25XZhScsICfZg9in2YbZiNmG24wg24zbldqp25XZhSddO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgna3UnLCB7XG4gIG1vbnRoczogbW9udGhzLFxuICBtb250aHNTaG9ydDogbW9udGhzLFxuICB3ZWVrZGF5czogJ9uM2YfigIzZg9i02YfigIzZhdmF2YfigIxf2K/ZiNmI2LTZh+KAjNmF2YXZh+KAjF/Ys9uO2LTZh+KAjNmF2YXZh+KAjF/ahtmI2KfYsdi02YfigIzZhdmF2YfigIxf2b7bjtmG2KzYtNmH4oCM2YXZhdmH4oCMX9mH2YfigIzbjNmG24xf2LTZh+KAjNmF2YXZh+KAjCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9uM2YfigIzZg9i02YfigIzZhV/Yr9mI2YjYtNmH4oCM2YVf2LPbjti02YfigIzZhV/ahtmI2KfYsdi02YfigIzZhV/ZvtuO2YbYrNi02YfigIzZhV/Zh9mH4oCM24zZhtuMX9i02YfigIzZhdmF2YfigIwnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn24xf2K9f2LNf2oZf2b5f2Ydf2LQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/YptuO2YjYp9ix2YfigIx82KjZh+KAjNuM2KfZhtuMLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAv2KbbjtmI2KfYsdmH4oCMLy50ZXN0KGlucHV0KTtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn2KjZh+KAjNuM2KfZhtuMJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfYptuO2YjYp9ix2YfigIwnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9im2YfigIzZhdix24Yg2YPYp9iq2pjZhduO2LFdIExUJyxcbiAgICBuZXh0RGF5OiAnW9io2YfigIzbjNin2YbbjCDZg9in2KramNmF247YsV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBb2YPYp9iq2pjZhduO2LFdIExUJyxcbiAgICBsYXN0RGF5OiAnW9iv2YjbjtmG244g2YPYp9iq2pjZhduO2LFdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW9mD2KfYqtqY2YXbjtixXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfZhNmH4oCMICVzJyxcbiAgICBwYXN0OiAnJXMnLFxuICAgIHM6ICfahtmH4oCM2YbYryDahtix2YPZh+KAjNuM2YfigIzZgycsXG4gICAgc3M6ICfahtix2YPZh+KAjCAlZCcsXG4gICAgbTogJ9uM2YfigIzZgyDYrtmI2YTZh+KAjNmDJyxcbiAgICBtbTogJyVkINiu2YjZhNmH4oCM2YMnLFxuICAgIGg6ICfbjNmH4oCM2YMg2YPYp9iq2pjZhduO2LEnLFxuICAgIGhoOiAnJWQg2YPYp9iq2pjZhduO2LEnLFxuICAgIGQ6ICfbjNmH4oCM2YMg2pXbhtqYJyxcbiAgICBkZDogJyVkINqV24bamCcsXG4gICAgTTogJ9uM2YfigIzZgyDZhdin2YbarycsXG4gICAgTU06ICclZCDZhdin2YbarycsXG4gICAgeTogJ9uM2YfigIzZgyDYs9in2rUnLFxuICAgIHl5OiAnJWQg2LPYp9q1J1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b2aHZotmj2aTZpdmm2afZqNmp2aBdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSkucmVwbGFjZSgv2IwvZywgJywnKTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDYsXG4gICAgZG95OiAxMlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3VmZml4ZXMgPSB7XG4gIDA6ICct0YfSrycsXG4gIDE6ICct0YfQuCcsXG4gIDI6ICct0YfQuCcsXG4gIDM6ICct0YfSrycsXG4gIDQ6ICct0YfSrycsXG4gIDU6ICct0YfQuCcsXG4gIDY6ICct0YfRiycsXG4gIDc6ICct0YfQuCcsXG4gIDg6ICct0YfQuCcsXG4gIDk6ICct0YfRgycsXG4gIDEwOiAnLdGH0YMnLFxuICAyMDogJy3Rh9GLJyxcbiAgMzA6ICct0YfRgycsXG4gIDQwOiAnLdGH0YsnLFxuICA1MDogJy3Rh9KvJyxcbiAgNjA6ICct0YfRiycsXG4gIDcwOiAnLdGH0LgnLFxuICA4MDogJy3Rh9C4JyxcbiAgOTA6ICct0YfRgycsXG4gIDEwMDogJy3Rh9KvJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2t5Jywge1xuICBtb250aHM6ICfRj9C90LLQsNGA0Yxf0YTQtdCy0YDQsNC70Yxf0LzQsNGA0YJf0LDQv9GA0LXQu9GMX9C80LDQuV/QuNGO0L3RjF/QuNGO0LvRjF/QsNCy0LPRg9GB0YJf0YHQtdC90YLRj9Cx0YDRjF/QvtC60YLRj9Cx0YDRjF/QvdC+0Y/QsdGA0Yxf0LTQtdC60LDQsdGA0YwnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn0Y/QvdCyX9GE0LXQsl/QvNCw0YDRgl/QsNC/0YBf0LzQsNC5X9C40Y7QvdGMX9C40Y7Qu9GMX9Cw0LLQs1/RgdC10L1f0L7QutGCX9C90L7Rj1/QtNC10LonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn0JbQtdC60YjQtdC80LHQuF/QlNKv0LnRiNOp0LzQsdKvX9Co0LXQudGI0LXQvNCx0Lhf0KjQsNGA0YjQtdC80LHQuF/QkdC10LnRiNC10LzQsdC4X9CW0YPQvNCwX9CY0YjQtdC80LHQuCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9CW0LXQul/QlNKv0Llf0KjQtdC5X9Co0LDRgF/QkdC10Llf0JbRg9C8X9CY0YjQtScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQltC6X9CU0Llf0KjQuV/QqNGAX9CR0Llf0JbQvF/QmNGIJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9CR0q/Qs9Kv0L0g0YHQsNCw0YJdIExUJyxcbiAgICBuZXh0RGF5OiAnW9Ct0YDRgtC10qMg0YHQsNCw0YJdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9GB0LDQsNGCXSBMVCcsXG4gICAgbGFzdERheTogJ1vQmtC10YfRjdGNINGB0LDQsNGCXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb06jRgtC606nQvSDQsNC/0YLQsNC90YvQvV0gZGRkZCBb0LrSr9C90q9dIFvRgdCw0LDRgl0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg0LjRh9C40L3QtNC1JyxcbiAgICBwYXN0OiAnJXMg0LzRg9GA0YPQvScsXG4gICAgczogJ9Cx0LjRgNC90LXRh9C1INGB0LXQutGD0L3QtCcsXG4gICAgc3M6ICclZCDRgdC10LrRg9C90LQnLFxuICAgIG06ICfQsdC40YAg0LzSr9C906nRgicsXG4gICAgbW06ICclZCDQvNKv0L3TqdGCJyxcbiAgICBoOiAn0LHQuNGAINGB0LDQsNGCJyxcbiAgICBoaDogJyVkINGB0LDQsNGCJyxcbiAgICBkOiAn0LHQuNGAINC60q/QvScsXG4gICAgZGQ6ICclZCDQutKv0L0nLFxuICAgIE06ICfQsdC40YAg0LDQuScsXG4gICAgTU06ICclZCDQsNC5JyxcbiAgICB5OiAn0LHQuNGAINC20YvQuycsXG4gICAgeXk6ICclZCDQttGL0LsnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS0o0YfQuHzRh9GLfNGH0q980YfRgykvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBhID0gbnVtYmVyICUgMTAsXG4gICAgICAgIGIgPSBudW1iZXIgPj0gMTAwID8gMTAwIDogbnVsbDtcbiAgICByZXR1cm4gbnVtYmVyICsgKHN1ZmZpeGVzW251bWJlcl0gfHwgc3VmZml4ZXNbYV0gfHwgc3VmZml4ZXNbYl0pO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgbTogWydlbmcgTWludXR0JywgJ2VuZ2VyIE1pbnV0dCddLFxuICAgIGg6IFsnZW5nIFN0b25uJywgJ2VuZ2VyIFN0b25uJ10sXG4gICAgZDogWydlZW4gRGFnJywgJ2VuZ2VtIERhZyddLFxuICAgIE06IFsnZWUgTW91bnQnLCAnZW5nZW0gTW91bnQnXSxcbiAgICB5OiBbJ2VlIEpvZXInLCAnZW5nZW0gSm9lciddXG4gIH07XG4gIHJldHVybiB3aXRob3V0U3VmZml4ID8gZm9ybWF0W2tleV1bMF0gOiBmb3JtYXRba2V5XVsxXTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0Z1dHVyZVRpbWUoc3RyaW5nKSB7XG4gIHZhciBudW1iZXIgPSBzdHJpbmcuc3Vic3RyKDAsIHN0cmluZy5pbmRleE9mKCcgJykpO1xuXG4gIGlmIChlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIobnVtYmVyKSkge1xuICAgIHJldHVybiAnYSAnICsgc3RyaW5nO1xuICB9XG5cbiAgcmV0dXJuICdhbiAnICsgc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzUGFzdFRpbWUoc3RyaW5nKSB7XG4gIHZhciBudW1iZXIgPSBzdHJpbmcuc3Vic3RyKDAsIHN0cmluZy5pbmRleE9mKCcgJykpO1xuXG4gIGlmIChlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIobnVtYmVyKSkge1xuICAgIHJldHVybiAndmlydSAnICsgc3RyaW5nO1xuICB9XG5cbiAgcmV0dXJuICd2aXJ1biAnICsgc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIobnVtYmVyKSB7XG4gIG51bWJlciA9IHBhcnNlSW50KG51bWJlciwgMTApO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChudW1iZXIgPCAxMCkge1xuICAgIGlmICg0IDw9IG51bWJlciAmJiBudW1iZXIgPD0gNykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKG51bWJlciA8IDEwMCkge1xuICAgIHZhciBsYXN0RGlnaXQgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgZmlyc3REaWdpdCA9IG51bWJlciAvIDEwO1xuXG4gICAgaWYgKGxhc3REaWdpdCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGVpZmVsZXJSZWdlbEFwcGxpZXNUb051bWJlcihmaXJzdERpZ2l0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKGxhc3REaWdpdCk7XG4gIH0gZWxzZSBpZiAobnVtYmVyIDwgMTAwMDApIHtcbiAgICB3aGlsZSAobnVtYmVyID49IDEwKSB7XG4gICAgICBudW1iZXIgPSBudW1iZXIgLyAxMDtcbiAgICB9XG5cbiAgICByZXR1cm4gZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlcik7XG4gIH0gZWxzZSB7XG4gICAgbnVtYmVyID0gbnVtYmVyIC8gMTAwMDtcbiAgICByZXR1cm4gZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbGInLCB7XG4gIG1vbnRoczogJ0phbnVhcl9GZWJydWFyX03DpGVyel9BYnLDq2xsX01lZV9KdW5pX0p1bGlfQXVndXN0X1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0RlemVtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbi5fRmVici5fTXJ6Ll9BYnIuX01lZV9KdW4uX0p1bC5fQXVnLl9TZXB0Ll9Pa3QuX05vdi5fRGV6Licuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdTb25uZGVnX03DqWluZGVnX0TDq25zY2hkZWdfTcOrdHR3b2NoX0Rvbm5lc2NoZGVnX0ZyZWlkZWdfU2Ftc2NoZGVnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU28uX03DqS5fRMOrLl9Nw6suX0RvLl9Gci5fU2EuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1NvX03DqV9Ew6tfTcOrX0RvX0ZyX1NhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tIFtBdWVyXScsXG4gICAgTFRTOiAnSDptbTpzcyBbQXVlcl0nLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEg6bW0gW0F1ZXJdJyxcbiAgICBMTExMOiAnZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0gW0F1ZXJdJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSGF1dCB1bV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCcsXG4gICAgbmV4dERheTogJ1tNdWVyIHVtXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFt1bV0gTFQnLFxuICAgIGxhc3REYXk6ICdbR8Orc2NodGVyIHVtXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiAnW0xlc2NodGVuXSBkZGRkIFt1bV0gTFQnO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICdbTGVzY2h0ZV0gZGRkZCBbdW1dIExUJztcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogcHJvY2Vzc0Z1dHVyZVRpbWUsXG4gICAgcGFzdDogcHJvY2Vzc1Bhc3RUaW1lLFxuICAgIHM6ICdlIHB1ZXIgU2Vrb25uZW4nLFxuICAgIHNzOiAnJWQgU2Vrb25uZW4nLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06ICclZCBNaW51dHRlbicsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogJyVkIFN0b25uZW4nLFxuICAgIGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZGQ6ICclZCBEZWVnJyxcbiAgICBNOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE1NOiAnJWQgTcOpaW50JyxcbiAgICB5OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHl5OiAnJWQgSm9lcidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ2xvJywge1xuICBtb250aHM6ICfguqHgurHguofguoHguq3guplf4LqB4Lq44Lqh4Lqe4LqyX+C6oeC6teC6meC6sl/gu4DguqHguqrgurJf4Lqe4Lq24LqU4Lqq4Lqw4Lqe4LqyX+C6oeC6tOC6luC6uOC6meC6sl/guoHgu43guqXgurDguoHgurvgupRf4Lqq4Lq04LqH4Lqr4LqyX+C6geC6seC6meC6jeC6sl/gupXgurjguqXgurJf4Lqe4Lqw4LqI4Lq04LqBX+C6l+C6seC6meC6p+C6sicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfguqHgurHguofguoHguq3guplf4LqB4Lq44Lqh4Lqe4LqyX+C6oeC6teC6meC6sl/gu4DguqHguqrgurJf4Lqe4Lq24LqU4Lqq4Lqw4Lqe4LqyX+C6oeC6tOC6luC6uOC6meC6sl/guoHgu43guqXgurDguoHgurvgupRf4Lqq4Lq04LqH4Lqr4LqyX+C6geC6seC6meC6jeC6sl/gupXgurjguqXgurJf4Lqe4Lqw4LqI4Lq04LqBX+C6l+C6seC6meC6p+C6sicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfguq3gurLgupfgurTgupRf4LqI4Lqx4LqZX+C6reC6seC6h+C6hOC6suC6mV/gup7gurjgupRf4Lqe4Lqw4Lqr4Lqx4LqUX+C6quC6uOC6gV/gu4DguqrgurvgurInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgupfgurTgupRf4LqI4Lqx4LqZX+C6reC6seC6h+C6hOC6suC6mV/gup7gurjgupRf4Lqe4Lqw4Lqr4Lqx4LqUX+C6quC6uOC6gV/gu4DguqrgurvgurInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4LqXX+C6iF/guq3guoRf4LqeX+C6nuC6q1/guqrguoFf4LqqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ+C6p+C6seC6mWRkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gupXguq3gupngu4Dguorgurvgu4ngurJ84LqV4Lqt4LqZ4LuB4Lql4LqHLyxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gJ+C6leC6reC6meC7geC6peC6hyc7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ+C6leC6reC6meC7gOC6iuC6u+C7ieC6sic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4LqV4Lqt4LqZ4LuB4Lql4LqHJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vguqHgurfgu4ngupngurXgu4ngu4DguqfguqXgurJdIExUJyxcbiAgICBuZXh0RGF5OiAnW+C6oeC6t+C7ieC6reC6t+C7iOC6meC7gOC6p+C6peC6sl0gTFQnLFxuICAgIG5leHRXZWVrOiAnW+C6p+C6seC6mV1kZGRkW+C7nOC7ieC6suC7gOC6p+C6peC6sl0gTFQnLFxuICAgIGxhc3REYXk6ICdb4Lqh4Lq34LuJ4Lqn4Lqy4LqZ4LqZ4Lq14LuJ4LuA4Lqn4Lql4LqyXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4Lqn4Lqx4LqZXWRkZGRb4LuB4Lql4LuJ4Lqn4LqZ4Lq14LuJ4LuA4Lqn4Lql4LqyXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfguq3gurXguoEgJXMnLFxuICAgIHBhc3Q6ICclc+C6nOC7iOC6suC6meC6oeC6sicsXG4gICAgczogJ+C6muC7jeC7iOC7gOC6l+C6u+C7iOC6suC7g+C6lOC6p+C6tOC6meC6suC6l+C6tScsXG4gICAgc3M6ICclZCDguqfgurTgupngurLgupfgurUnLFxuICAgIG06ICcxIOC6meC6suC6l+C6tScsXG4gICAgbW06ICclZCDgupngurLgupfgurUnLFxuICAgIGg6ICcxIOC6iuC6u+C7iOC6p+C7guC6oeC6hycsXG4gICAgaGg6ICclZCDguorgurvgu4jguqfgu4LguqHguocnLFxuICAgIGQ6ICcxIOC6oeC6t+C7iScsXG4gICAgZGQ6ICclZCDguqHgurfgu4knLFxuICAgIE06ICcxIOC7gOC6lOC6t+C6reC6mScsXG4gICAgTU06ICclZCDgu4DgupTgurfguq3gupknLFxuICAgIHk6ICcxIOC6m+C6tScsXG4gICAgeXk6ICclZCDgupvgurUnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC8o4LqX4Lq14LuIKVxcZHsxLDJ9LyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gJ+C6l+C6teC7iCcgKyBudW1iZXI7XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciB1bml0cyA9IHtcbiAgc3M6ICdzZWt1bmTEl19zZWt1bmTFvmnFs19zZWt1bmRlcycsXG4gIG06ICdtaW51dMSXX21pbnV0xJdzX21pbnV0xJknLFxuICBtbTogJ21pbnV0xJdzX21pbnXEjWnFs19taW51dGVzJyxcbiAgaDogJ3ZhbGFuZGFfdmFsYW5kb3NfdmFsYW5kxIUnLFxuICBoaDogJ3ZhbGFuZG9zX3ZhbGFuZMWzX3ZhbGFuZGFzJyxcbiAgZDogJ2RpZW5hX2RpZW5vc19kaWVuxIUnLFxuICBkZDogJ2RpZW5vc19kaWVuxbNfZGllbmFzJyxcbiAgTTogJ23El251b19txJduZXNpb19txJduZXPErycsXG4gIE1NOiAnbcSXbmVzaWFpX23El25lc2nFs19txJduZXNpdXMnLFxuICB5OiAnbWV0YWlfbWV0xbNfbWV0dXMnLFxuICB5eTogJ21ldGFpX21ldMWzX21ldHVzJ1xufTtcblxuZnVuY3Rpb24gdHJhbnNsYXRlU2Vjb25kcyhudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICByZXR1cm4gJ2tlbGlvcyBzZWt1bmTEl3MnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBpc0Z1dHVyZSA/ICdrZWxpxbMgc2VrdW5kxb5pxbMnIDogJ2tlbGlhcyBzZWt1bmRlcyc7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlU2luZ3VsYXIobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHJldHVybiB3aXRob3V0U3VmZml4ID8gZm9ybXMoa2V5KVswXSA6IGlzRnV0dXJlID8gZm9ybXMoa2V5KVsxXSA6IGZvcm1zKGtleSlbMl07XG59XG5cbmZ1bmN0aW9uIHNwZWNpYWwobnVtYmVyKSB7XG4gIHJldHVybiBudW1iZXIgJSAxMCA9PT0gMCB8fCBudW1iZXIgPiAxMCAmJiBudW1iZXIgPCAyMDtcbn1cblxuZnVuY3Rpb24gZm9ybXMoa2V5KSB7XG4gIHJldHVybiB1bml0c1trZXldLnNwbGl0KCdfJyk7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgcmV0dXJuIHJlc3VsdCArIHRyYW5zbGF0ZVNpbmd1bGFyKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5WzBdLCBpc0Z1dHVyZSk7XG4gIH0gZWxzZSBpZiAod2l0aG91dFN1ZmZpeCkge1xuICAgIHJldHVybiByZXN1bHQgKyAoc3BlY2lhbChudW1iZXIpID8gZm9ybXMoa2V5KVsxXSA6IGZvcm1zKGtleSlbMF0pO1xuICB9IGVsc2Uge1xuICAgIGlmIChpc0Z1dHVyZSkge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIGZvcm1zKGtleSlbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyAoc3BlY2lhbChudW1iZXIpID8gZm9ybXMoa2V5KVsxXSA6IGZvcm1zKGtleSlbMl0pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdsdCcsIHtcbiAgbW9udGhzOiB7XG4gICAgZm9ybWF0OiAnc2F1c2lvX3Zhc2FyaW9fa292b19iYWxhbmTFvmlvX2dlZ3XFvsSXc19iaXLFvmVsaW9fbGllcG9zX3J1Z3BqxavEjWlvX3J1Z3PEl2pvX3NwYWxpb19sYXBrcmnEjWlvX2dydW9kxb5pbycuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAnc2F1c2lzX3Zhc2FyaXNfa292YXNfYmFsYW5kaXNfZ2VndcW+xJdfYmlyxb5lbGlzX2xpZXBhX3J1Z3Bqxat0aXNfcnVnc8SXamlzX3NwYWxpc19sYXBrcml0aXNfZ3J1b2Rpcycuc3BsaXQoJ18nKSxcbiAgICBpc0Zvcm1hdDogL0Rbb0RdPyhcXFtbXlxcW1xcXV0qXFxdfFxccykrTU1NTT98TU1NTT8oXFxbW15cXFtcXF1dKlxcXXxcXHMpK0Rbb0RdPy9cbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICdzYXVfdmFzX2tvdl9iYWxfZ2VnX2Jpcl9saWVfcmdwX3Jnc19zcGFfbGFwX2dyZCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6IHtcbiAgICBmb3JtYXQ6ICdzZWttYWRpZW7Er19waXJtYWRpZW7Er19hbnRyYWRpZW7Er190cmXEjWlhZGllbsSvX2tldHZpcnRhZGllbsSvX3Blbmt0YWRpZW7Er1/FoWXFoXRhZGllbsSvJy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICdzZWttYWRpZW5pc19waXJtYWRpZW5pc19hbnRyYWRpZW5pc190cmXEjWlhZGllbmlzX2tldHZpcnRhZGllbmlzX3Blbmt0YWRpZW5pc1/FoWXFoXRhZGllbmlzJy5zcGxpdCgnXycpLFxuICAgIGlzRm9ybWF0OiAvZGRkZCBISDptbS9cbiAgfSxcbiAgd2Vla2RheXNTaG9ydDogJ1Nla19QaXJfQW50X1RyZV9LZXRfUGVuX8WgZcWhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1NfUF9BX1RfS19Qbl/FoCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS1NTS1ERCcsXG4gICAgTEw6ICdZWVlZIFttLl0gTU1NTSBEIFtkLl0nLFxuICAgIExMTDogJ1lZWVkgW20uXSBNTU1NIEQgW2QuXSwgSEg6bW0gW3ZhbC5dJyxcbiAgICBMTExMOiAnWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBkZGRkLCBISDptbSBbdmFsLl0nLFxuICAgIGw6ICdZWVlZLU1NLUREJyxcbiAgICBsbDogJ1lZWVkgW20uXSBNTU1NIEQgW2QuXScsXG4gICAgbGxsOiAnWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBISDptbSBbdmFsLl0nLFxuICAgIGxsbGw6ICdZWVlZIFttLl0gTU1NTSBEIFtkLl0sIGRkZCwgSEg6bW0gW3ZhbC5dJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbxaBpYW5kaWVuXSBMVCcsXG4gICAgbmV4dERheTogJ1tSeXRval0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBMVCcsXG4gICAgbGFzdERheTogJ1tWYWthcl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW1ByYcSXanVzxK9dIGRkZGQgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAncG8gJXMnLFxuICAgIHBhc3Q6ICdwcmllxaEgJXMnLFxuICAgIHM6IHRyYW5zbGF0ZVNlY29uZHMsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGVTaW5ndWxhcixcbiAgICBtbTogdHJhbnNsYXRlLFxuICAgIGg6IHRyYW5zbGF0ZVNpbmd1bGFyLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogdHJhbnNsYXRlU2luZ3VsYXIsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiB0cmFuc2xhdGVTaW5ndWxhcixcbiAgICBNTTogdHJhbnNsYXRlLFxuICAgIHk6IHRyYW5zbGF0ZVNpbmd1bGFyLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LW9qaS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlciArICctb2ppJztcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHVuaXRzID0ge1xuICBzczogJ3Nla3VuZGVzX3Nla3VuZMSTbV9zZWt1bmRlX3Nla3VuZGVzJy5zcGxpdCgnXycpLFxuICBtOiAnbWluxat0ZXNfbWluxat0xJNtX21pbsWrdGVfbWluxat0ZXMnLnNwbGl0KCdfJyksXG4gIG1tOiAnbWluxat0ZXNfbWluxat0xJNtX21pbsWrdGVfbWluxat0ZXMnLnNwbGl0KCdfJyksXG4gIGg6ICdzdHVuZGFzX3N0dW5kxIFtX3N0dW5kYV9zdHVuZGFzJy5zcGxpdCgnXycpLFxuICBoaDogJ3N0dW5kYXNfc3R1bmTEgW1fc3R1bmRhX3N0dW5kYXMnLnNwbGl0KCdfJyksXG4gIGQ6ICdkaWVuYXNfZGllbsSBbV9kaWVuYV9kaWVuYXMnLnNwbGl0KCdfJyksXG4gIGRkOiAnZGllbmFzX2RpZW7EgW1fZGllbmFfZGllbmFzJy5zcGxpdCgnXycpLFxuICBNOiAnbcSTbmXFoWFfbcSTbmXFoWllbV9txJNuZXNpc19txJNuZcWhaScuc3BsaXQoJ18nKSxcbiAgTU06ICdtxJNuZcWhYV9txJNuZcWhaWVtX23Ek25lc2lzX23Ek25lxaFpJy5zcGxpdCgnXycpLFxuICB5OiAnZ2FkYV9nYWRpZW1fZ2Fkc19nYWRpJy5zcGxpdCgnXycpLFxuICB5eTogJ2dhZGFfZ2FkaWVtX2dhZHNfZ2FkaScuc3BsaXQoJ18nKVxufTtcblxuZnVuY3Rpb24gZm9ybWF0KGZvcm1zLCBudW1iZXIsIHdpdGhvdXRTdWZmaXgpIHtcbiAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICByZXR1cm4gbnVtYmVyICUgMTAgPT09IDEgJiYgbnVtYmVyICUgMTAwICE9PSAxMSA/IGZvcm1zWzJdIDogZm9ybXNbM107XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bWJlciAlIDEwID09PSAxICYmIG51bWJlciAlIDEwMCAhPT0gMTEgPyBmb3Jtc1swXSA6IGZvcm1zWzFdO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgcmV0dXJuIG51bWJlciArICcgJyArIGZvcm1hdCh1bml0c1trZXldLCBudW1iZXIsIHdpdGhvdXRTdWZmaXgpO1xufVxuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgcmV0dXJuIGZvcm1hdCh1bml0c1trZXldLCBudW1iZXIsIHdpdGhvdXRTdWZmaXgpO1xufVxuXG5mdW5jdGlvbiByZWxhdGl2ZVNlY29uZHMobnVtYmVyLCB3aXRob3V0U3VmZml4KSB7XG4gIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2Rhxb5hcyBzZWt1bmRlcycgOiAnZGHFvsSBbSBzZWt1bmTEk20nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdsdicsIHtcbiAgbW9udGhzOiAnamFudsSBcmlzX2ZlYnJ1xIFyaXNfbWFydHNfYXByxKtsaXNfbWFpanNfasWrbmlqc19qxatsaWpzX2F1Z3VzdHNfc2VwdGVtYnJpc19va3RvYnJpc19ub3ZlbWJyaXNfZGVjZW1icmlzJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFyX2Fwcl9tYWlfasWrbl9qxatsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnc3bEk3RkaWVuYV9waXJtZGllbmFfb3RyZGllbmFfdHJlxaFkaWVuYV9jZXR1cnRkaWVuYV9waWVrdGRpZW5hX3Nlc3RkaWVuYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1N2X1BfT19UX0NfUGtfUycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdTdl9QX09fVF9DX1BrX1MnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVkuJyxcbiAgICBMTDogJ1lZWVkuIFtnYWRhXSBELiBNTU1NJyxcbiAgICBMTEw6ICdZWVlZLiBbZ2FkYV0gRC4gTU1NTSwgSEg6bW0nLFxuICAgIExMTEw6ICdZWVlZLiBbZ2FkYV0gRC4gTU1NTSwgZGRkZCwgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vFoG9kaWVuIHB1bGtzdGVuXSBMVCcsXG4gICAgbmV4dERheTogJ1tSxKt0IHB1bGtzdGVuXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtwdWxrc3Rlbl0gTFQnLFxuICAgIGxhc3REYXk6ICdbVmFrYXIgcHVsa3N0ZW5dIExUJyxcbiAgICBsYXN0V2VlazogJ1tQYWfEgWp1xaHEgV0gZGRkZCBbcHVsa3N0ZW5dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3DEk2MgJXMnLFxuICAgIHBhc3Q6ICdwaXJtcyAlcycsXG4gICAgczogcmVsYXRpdmVTZWNvbmRzLFxuICAgIHNzOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIG06IHJlbGF0aXZlVGltZVdpdGhTaW5ndWxhcixcbiAgICBtbTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBoOiByZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIsXG4gICAgaGg6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgZDogcmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyLFxuICAgIGRkOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIE06IHJlbGF0aXZlVGltZVdpdGhTaW5ndWxhcixcbiAgICBNTTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICB5OiByZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIsXG4gICAgeXk6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWxcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciB0cmFuc2xhdG9yID0ge1xuICB3b3Jkczoge1xuICAgIHNzOiBbJ3Nla3VuZCcsICdzZWt1bmRhJywgJ3Nla3VuZGknXSxcbiAgICBtOiBbJ2plZGFuIG1pbnV0JywgJ2plZG5vZyBtaW51dGEnXSxcbiAgICBtbTogWydtaW51dCcsICdtaW51dGEnLCAnbWludXRhJ10sXG4gICAgaDogWydqZWRhbiBzYXQnLCAnamVkbm9nIHNhdGEnXSxcbiAgICBoaDogWydzYXQnLCAnc2F0YScsICdzYXRpJ10sXG4gICAgZGQ6IFsnZGFuJywgJ2RhbmEnLCAnZGFuYSddLFxuICAgIE1NOiBbJ21qZXNlYycsICdtamVzZWNhJywgJ21qZXNlY2knXSxcbiAgICB5eTogWydnb2RpbmEnLCAnZ29kaW5lJywgJ2dvZGluYSddXG4gIH0sXG4gIGNvcnJlY3RHcmFtbWF0aWNhbENhc2U6IGZ1bmN0aW9uIGNvcnJlY3RHcmFtbWF0aWNhbENhc2UobnVtYmVyLCB3b3JkS2V5KSB7XG4gICAgcmV0dXJuIG51bWJlciA9PT0gMSA/IHdvcmRLZXlbMF0gOiBudW1iZXIgPj0gMiAmJiBudW1iZXIgPD0gNCA/IHdvcmRLZXlbMV0gOiB3b3JkS2V5WzJdO1xuICB9LFxuICB0cmFuc2xhdGU6IGZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICAgIHZhciB3b3JkS2V5ID0gdHJhbnNsYXRvci53b3Jkc1trZXldO1xuXG4gICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gd29yZEtleVswXSA6IHdvcmRLZXlbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnICcgKyB0cmFuc2xhdG9yLmNvcnJlY3RHcmFtbWF0aWNhbENhc2UobnVtYmVyLCB3b3JkS2V5KTtcbiAgICB9XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtZScsIHtcbiAgbW9udGhzOiAnamFudWFyX2ZlYnJ1YXJfbWFydF9hcHJpbF9tYWpfanVuX2p1bF9hdmd1c3Rfc2VwdGVtYmFyX29rdG9iYXJfbm92ZW1iYXJfZGVjZW1iYXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuLl9mZWIuX21hci5fYXByLl9tYWpfanVuX2p1bF9hdmcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnbmVkamVsamFfcG9uZWRqZWxqYWtfdXRvcmFrX3NyaWplZGFfxI1ldHZydGFrX3BldGFrX3N1Ym90YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ25lZC5fcG9uLl91dG8uX3NyaS5fxI1ldC5fcGV0Ll9zdWIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ25lX3BvX3V0X3NyX8SNZV9wZV9zdScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbZGFuYXMgdV0gTFQnLFxuICAgIG5leHREYXk6ICdbc2p1dHJhIHVdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtuZWRqZWxqdV0gW3VdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbdV0gW3NyaWplZHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzdWJvdHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3VdIGRkZGQgW3VdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdbanXEjWUgdV0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHZhciBsYXN0V2Vla0RheXMgPSBbJ1twcm/FoWxlXSBbbmVkamVsamVdIFt1XSBMVCcsICdbcHJvxaFsb2ddIFtwb25lZGplbGprYV0gW3VdIExUJywgJ1twcm/FoWxvZ10gW3V0b3JrYV0gW3VdIExUJywgJ1twcm/FoWxlXSBbc3JpamVkZV0gW3VdIExUJywgJ1twcm/FoWxvZ10gW8SNZXR2cnRrYV0gW3VdIExUJywgJ1twcm/FoWxvZ10gW3BldGthXSBbdV0gTFQnLCAnW3Byb8WhbGVdIFtzdWJvdGVdIFt1XSBMVCddO1xuICAgICAgcmV0dXJuIGxhc3RXZWVrRGF5c1t0aGlzLmRheSgpXTtcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnemEgJXMnLFxuICAgIHBhc3Q6ICdwcmlqZSAlcycsXG4gICAgczogJ25la29saWtvIHNla3VuZGknLFxuICAgIHNzOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGQ6ICdkYW4nLFxuICAgIGRkOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBNOiAnbWplc2VjJyxcbiAgICBNTTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgeTogJ2dvZGludScsXG4gICAgeXk6IHRyYW5zbGF0b3IudHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtaScsIHtcbiAgbW9udGhzOiAnS29oaS10xIF0ZV9IdWktdGFuZ3VydV9Qb3V0xastdGUtcmFuZ2lfUGFlbmdhLXdoxIF3aMSBX0hhcmF0dWFfUGlwaXJpX0jFjW5nb2luZ29pX0hlcmUtdHVyaS1rxY1rxIFfTWFodXJ1X1doaXJpbmdhLcSBLW51a3VfV2hpcmluZ2EtxIEtcmFuZ2lfSGFraWhlYScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdLb2hpX0h1aV9Qb3VfUGFlX0hhcmFfUGlwaV9IxY1uZ29pX0hlcmVfTWFodV9XaGktbnVfV2hpLXJhX0hha2knLnNwbGl0KCdfJyksXG4gIG1vbnRoc1JlZ2V4OiAvKD86WydhLXpcXHUwMTAxXFx1MDE0RFxcdTAxNkJdK1xcLT8pezEsM30vaSxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC8oPzpbJ2EtelxcdTAxMDFcXHUwMTREXFx1MDE2Ql0rXFwtPyl7MSwzfS9pLFxuICBtb250aHNTaG9ydFJlZ2V4OiAvKD86WydhLXpcXHUwMTAxXFx1MDE0RFxcdTAxNkJdK1xcLT8pezEsM30vaSxcbiAgbW9udGhzU2hvcnRTdHJpY3RSZWdleDogLyg/OlsnYS16XFx1MDEwMVxcdTAxNERcXHUwMTZCXStcXC0/KXsxLDJ9L2ksXG4gIHdlZWtkYXlzOiAnUsSBdGFwdV9NYW5lX1TFq3JlaV9XZW5lcmVpX1TEgWl0ZV9QYXJhaXJlX0jEgXRhcmVpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnVGFfTWFfVMWrX1dlX1TEgWlfUGFfSMSBJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ1RhX01hX1TFq19XZV9UxIFpX1BhX0jEgScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIFtpXSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIFtpXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2kgdGVpZSBtYWhhbmEsIGldIExUJyxcbiAgICBuZXh0RGF5OiAnW2Fwb3BvIGldIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2ldIExUJyxcbiAgICBsYXN0RGF5OiAnW2luYW5haGkgaV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbd2hha2FtdXR1bmdhIGldIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2kgcm90byBpICVzJyxcbiAgICBwYXN0OiAnJXMgaSBtdWEnLFxuICAgIHM6ICd0ZSBoxJNrb25hIHJ1YXJ1YScsXG4gICAgc3M6ICclZCBoxJNrb25hJyxcbiAgICBtOiAnaGUgbWVuZXRpJyxcbiAgICBtbTogJyVkIG1lbmV0aScsXG4gICAgaDogJ3RlIGhhb3JhJyxcbiAgICBoaDogJyVkIGhhb3JhJyxcbiAgICBkOiAnaGUgcmEnLFxuICAgIGRkOiAnJWQgcmEnLFxuICAgIE06ICdoZSBtYXJhbWEnLFxuICAgIE1NOiAnJWQgbWFyYW1hJyxcbiAgICB5OiAnaGUgdGF1JyxcbiAgICB5eTogJyVkIHRhdSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ21rJywge1xuICBtb250aHM6ICfRmNCw0L3Rg9Cw0YDQuF/RhNC10LLRgNGD0LDRgNC4X9C80LDRgNGCX9Cw0L/RgNC40Ltf0LzQsNGYX9GY0YPQvdC4X9GY0YPQu9C4X9Cw0LLQs9GD0YHRgl/RgdC10L/RgtC10LzQstGA0Lhf0L7QutGC0L7QvNCy0YDQuF/QvdC+0LXQvNCy0YDQuF/QtNC10LrQtdC80LLRgNC4Jy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9GY0LDQvV/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LNf0YHQtdC/X9C+0LrRgl/QvdC+0LVf0LTQtdC6Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ9C90LXQtNC10LvQsF/Qv9C+0L3QtdC00LXQu9C90LjQul/QstGC0L7RgNC90LjQul/RgdGA0LXQtNCwX9GH0LXRgtCy0YDRgtC+0Lpf0L/QtdGC0L7Qul/RgdCw0LHQvtGC0LAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQvdC10LRf0L/QvtC9X9Cy0YLQvl/RgdGA0LVf0YfQtdGCX9C/0LXRgl/RgdCw0LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0L1lX9C/b1/QstGCX9GB0YBf0YfQtV/Qv9C1X9GBYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb0JTQtdC90LXRgSDQstC+XSBMVCcsXG4gICAgbmV4dERheTogJ1vQo9GC0YDQtSDQstC+XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb0JLQvl0gZGRkZCBb0LLQvl0gTFQnLFxuICAgIGxhc3REYXk6ICdb0JLRh9C10YDQsCDQstC+XSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdb0JjQt9C80LjQvdCw0YLQsNGC0LBdIGRkZGQgW9Cy0L5dIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuICdb0JjQt9C80LjQvdCw0YLQuNC+0YJdIGRkZGQgW9Cy0L5dIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0LfQsCAlcycsXG4gICAgcGFzdDogJ9C/0YDQtdC0ICVzJyxcbiAgICBzOiAn0L3QtdC60L7Qu9C60YMg0YHQtdC60YPQvdC00LgnLFxuICAgIHNzOiAnJWQg0YHQtdC60YPQvdC00LgnLFxuICAgIG06ICfQtdC00L3QsCDQvNC40L3Rg9GC0LAnLFxuICAgIG1tOiAnJWQg0LzQuNC90YPRgtC4JyxcbiAgICBoOiAn0LXQtNC10L0g0YfQsNGBJyxcbiAgICBoaDogJyVkINGH0LDRgdCwJyxcbiAgICBkOiAn0LXQtNC10L0g0LTQtdC9JyxcbiAgICBkZDogJyVkINC00LXQvdCwJyxcbiAgICBNOiAn0LXQtNC10L0g0LzQtdGB0LXRhicsXG4gICAgTU06ICclZCDQvNC10YHQtdGG0LgnLFxuICAgIHk6ICfQtdC00L3QsCDQs9C+0LTQuNC90LAnLFxuICAgIHl5OiAnJWQg0LPQvtC00LjQvdC4J1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0tKNC10LJ80LXQvXzRgtC4fNCy0Lh80YDQuHzQvNC4KS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGxhc3REaWdpdCA9IG51bWJlciAlIDEwLFxuICAgICAgICBsYXN0MkRpZ2l0cyA9IG51bWJlciAlIDEwMDtcblxuICAgIGlmIChudW1iZXIgPT09IDApIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdC10LInO1xuICAgIH0gZWxzZSBpZiAobGFzdDJEaWdpdHMgPT09IDApIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdC10L0nO1xuICAgIH0gZWxzZSBpZiAobGFzdDJEaWdpdHMgPiAxMCAmJiBsYXN0MkRpZ2l0cyA8IDIwKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJy3RgtC4JztcbiAgICB9IGVsc2UgaWYgKGxhc3REaWdpdCA9PT0gMSkge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0LLQuCc7XG4gICAgfSBlbHNlIGlmIChsYXN0RGlnaXQgPT09IDIpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdGA0LgnO1xuICAgIH0gZWxzZSBpZiAobGFzdERpZ2l0ID09PSA3IHx8IGxhc3REaWdpdCA9PT0gOCkge1xuICAgICAgcmV0dXJuIG51bWJlciArICct0LzQuCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnLdGC0LgnO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbWwnLCB7XG4gIG1vbnRoczogJ+C0nOC0qOC1geC0teC0sOC0v1/gtKvgtYbgtKzgtY3gtLDgtYHgtLXgtLDgtL9f4LSu4LS+4LW84LSa4LWN4LSa4LWNX+C0j+C0quC1jeC0sOC0v+C1vV/gtK7gtYfgtK/gtY1f4LSc4LWC4LW6X+C0nOC1guC0suC1iF/gtJPgtJfgtLjgtY3gtLHgtY3gtLHgtY1f4LS44LWG4LSq4LWN4LSx4LWN4LSx4LSC4LSs4LW8X+C0kuC0leC1jeC0n+C1i+C0rOC1vF/gtKjgtLXgtILgtKzgtbxf4LSh4LS/4LS44LSC4LSs4LW8Jy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+C0nOC0qOC1gS5f4LSr4LWG4LSs4LWN4LSw4LWBLl/gtK7gtL7gtbwuX+C0j+C0quC1jeC0sOC0vy5f4LSu4LWH4LSv4LWNX+C0nOC1guC1ul/gtJzgtYLgtLLgtYguX+C0k+C0ly5f4LS44LWG4LSq4LWN4LSx4LWN4LSxLl/gtJLgtJXgtY3gtJ/gtYsuX+C0qOC0teC0gi5f4LSh4LS/4LS44LSCLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfgtJ7gtL7gtK/gtLHgtL7gtLTgtY3gtJpf4LSk4LS/4LSZ4LWN4LSV4LSz4LS+4LS04LWN4LSaX+C0muC1iuC0teC1jeC0teC0vuC0tOC1jeC0ml/gtKzgtYHgtKfgtKjgtL7gtLTgtY3gtJpf4LS14LWN4LSv4LS+4LS04LS+4LS04LWN4LSaX+C0teC1huC0s+C1jeC0s+C0v+C0r+C0vuC0tOC1jeC0ml/gtLbgtKjgtL/gtK/gtL7gtLTgtY3gtJonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfgtJ7gtL7gtK/gtbxf4LSk4LS/4LSZ4LWN4LSV4LW+X+C0muC1iuC0teC1jeC0tV/gtKzgtYHgtKfgtbtf4LS14LWN4LSv4LS+4LS04LSCX+C0teC1huC0s+C1jeC0s+C0v1/gtLbgtKjgtL8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4LSe4LS+X+C0pOC0v1/gtJrgtYpf4LSs4LWBX+C0teC1jeC0r+C0vl/gtLXgtYZf4LS2Jy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQSBoOm1tIC3gtKjgtYEnLFxuICAgIExUUzogJ0EgaDptbTpzcyAt4LSo4LWBJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVksIEEgaDptbSAt4LSo4LWBJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSAt4LSo4LWBJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4LSH4LSo4LWN4LSo4LWNXSBMVCcsXG4gICAgbmV4dERheTogJ1vgtKjgtL7gtLPgtYZdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQsIExUJyxcbiAgICBsYXN0RGF5OiAnW+C0h+C0qOC1jeC0qOC0suC1hl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+C0leC0tOC0v+C0nuC1jeC0nl0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4LSV4LS04LS/4LSe4LWN4LSe4LWNJyxcbiAgICBwYXN0OiAnJXMg4LSu4LWB4LW74LSq4LWNJyxcbiAgICBzOiAn4LSF4LW94LSqIOC0qOC0v+C0ruC0v+C0t+C0meC1jeC0meC1vicsXG4gICAgc3M6ICclZCDgtLjgtYbgtJXgtY3gtJXgtbvgtKHgtY0nLFxuICAgIG06ICfgtJLgtLDgtYEg4LSu4LS/4LSo4LS/4LSx4LWN4LSx4LWNJyxcbiAgICBtbTogJyVkIOC0ruC0v+C0qOC0v+C0seC1jeC0seC1jScsXG4gICAgaDogJ+C0kuC0sOC1gSDgtK7gtKPgtL/gtJXgtY3gtJXgtYLgtbwnLFxuICAgIGhoOiAnJWQg4LSu4LSj4LS/4LSV4LWN4LSV4LWC4LW8JyxcbiAgICBkOiAn4LSS4LSw4LWBIOC0puC0v+C0teC0uOC0gicsXG4gICAgZGQ6ICclZCDgtKbgtL/gtLXgtLjgtIInLFxuICAgIE06ICfgtJLgtLDgtYEg4LSu4LS+4LS44LSCJyxcbiAgICBNTTogJyVkIOC0ruC0vuC0uOC0gicsXG4gICAgeTogJ+C0kuC0sOC1gSDgtLXgtbzgtLfgtIInLFxuICAgIHl5OiAnJWQg4LS14LW84LS34LSCJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4LSw4LS+4LSk4LWN4LSw4LS/fOC0sOC0vuC0teC0v+C0suC1hnzgtIngtJrgtY3gtJog4LSV4LS04LS/4LSe4LWN4LSe4LWNfOC0teC1iOC0leC1geC0qOC1jeC0qOC1h+C0sOC0gnzgtLDgtL7gtKTgtY3gtLDgtL8vaSxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+C0sOC0vuC0pOC1jeC0sOC0vycgJiYgaG91ciA+PSA0IHx8IG1lcmlkaWVtID09PSAn4LSJ4LSa4LWN4LSaIOC0leC0tOC0v+C0nuC1jeC0nuC1jScgfHwgbWVyaWRpZW0gPT09ICfgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIInKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn4LSw4LS+4LSk4LWN4LSw4LS/JztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfgtLDgtL7gtLXgtL/gtLLgtYYnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ+C0ieC0muC1jeC0miDgtJXgtLTgtL/gtJ7gtY3gtJ7gtY0nO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+C0teC1iOC0leC1geC0qOC1jeC0qOC1h+C0sOC0gic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4LSw4LS+4LSk4LWN4LSw4LS/JztcbiAgICB9XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5LCBpc0Z1dHVyZSkge1xuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAn0YXRjdC00YXRjdC9INGB0LXQutGD0L3QtCcgOiAn0YXRjdC00YXRjdC9INGB0LXQutGD0L3QtNGL0L0nO1xuXG4gICAgY2FzZSAnc3MnOlxuICAgICAgcmV0dXJuIG51bWJlciArICh3aXRob3V0U3VmZml4ID8gJyDRgdC10LrRg9C90LQnIDogJyDRgdC10LrRg9C90LTRi9C9Jyk7XG5cbiAgICBjYXNlICdtJzpcbiAgICBjYXNlICdtbSc6XG4gICAgICByZXR1cm4gbnVtYmVyICsgKHdpdGhvdXRTdWZmaXggPyAnINC80LjQvdGD0YInIDogJyDQvNC40L3Rg9GC0YvQvScpO1xuXG4gICAgY2FzZSAnaCc6XG4gICAgY2FzZSAnaGgnOlxuICAgICAgcmV0dXJuIG51bWJlciArICh3aXRob3V0U3VmZml4ID8gJyDRhtCw0LMnIDogJyDRhtCw0LPQuNC50L0nKTtcblxuICAgIGNhc2UgJ2QnOlxuICAgIGNhc2UgJ2RkJzpcbiAgICAgIHJldHVybiBudW1iZXIgKyAod2l0aG91dFN1ZmZpeCA/ICcg06nQtNOp0YAnIDogJyDTqdC00YDQuNC50L0nKTtcblxuICAgIGNhc2UgJ00nOlxuICAgIGNhc2UgJ01NJzpcbiAgICAgIHJldHVybiBudW1iZXIgKyAod2l0aG91dFN1ZmZpeCA/ICcg0YHQsNGAJyA6ICcg0YHQsNGA0YvQvScpO1xuXG4gICAgY2FzZSAneSc6XG4gICAgY2FzZSAneXknOlxuICAgICAgcmV0dXJuIG51bWJlciArICh3aXRob3V0U3VmZml4ID8gJyDQttC40LsnIDogJyDQttC40LvQuNC50L0nKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVtYmVyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ21uJywge1xuICBtb250aHM6ICfQndGN0LPQtNKv0LPRjdGN0YAg0YHQsNGAX9Cl0L7RkdGA0LTRg9Cz0LDQsNGAINGB0LDRgF/Qk9GD0YDQsNCy0LTRg9Cz0LDQsNGAINGB0LDRgF/QlNOp0YDTqdCy0LTSr9Cz0Y3RjdGAINGB0LDRgF/QotCw0LLQtNGD0LPQsNCw0YAg0YHQsNGAX9CX0YPRgNCz0LDQtNGD0LPQsNCw0YAg0YHQsNGAX9CU0L7Qu9C00YPQs9Cw0LDRgCDRgdCw0YBf0J3QsNC50LzQtNGD0LPQsNCw0YAg0YHQsNGAX9CV0YHQtNKv0LPRjdGN0YAg0YHQsNGAX9CQ0YDQsNCy0LTRg9Cz0LDQsNGAINGB0LDRgF/QkNGA0LLQsNC9INC90Y3Qs9C00q/Qs9GN0Y3RgCDRgdCw0YBf0JDRgNCy0LDQvSDRhdC+0ZHRgNC00YPQs9Cw0LDRgCDRgdCw0YAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnMSDRgdCw0YBfMiDRgdCw0YBfMyDRgdCw0YBfNCDRgdCw0YBfNSDRgdCw0YBfNiDRgdCw0YBfNyDRgdCw0YBfOCDRgdCw0YBfOSDRgdCw0YBfMTAg0YHQsNGAXzExINGB0LDRgF8xMiDRgdCw0YAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn0J3Rj9C8X9CU0LDQstCw0LBf0JzRj9Cz0LzQsNGAX9Cb0YXQsNCz0LLQsF/Qn9Kv0YDRjdCyX9CR0LDQsNGB0LDQvV/QkdGP0LzQsdCwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn0J3Rj9C8X9CU0LDQsl/QnNGP0LNf0JvRhdCwX9Cf0q/RgF/QkdCw0LBf0JHRj9C8Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9Cd0Y9f0JTQsF/QnNGPX9Cb0YVf0J/Sr1/QkdCwX9CR0Y8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnWVlZWSDQvtC90YsgTU1NTdGL0L0gRCcsXG4gICAgTExMOiAnWVlZWSDQvtC90YsgTU1NTdGL0L0gRCBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIFlZWVkg0L7QvdGLIE1NTU3Ri9C9IEQgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/SrtOofNKu0KUvaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gJ9Ku0KUnO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfSrtOoJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfSrtClJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vTqNC906nTqdC006nRgF0gTFQnLFxuICAgIG5leHREYXk6ICdb0JzQsNGA0LPQsNCw0YhdIExUJyxcbiAgICBuZXh0V2VlazogJ1vQmNGA0Y3RhV0gZGRkZCBMVCcsXG4gICAgbGFzdERheTogJ1vTqNGH0LjQs9C006nRgF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW9Oo0L3Qs9Op0YDRgdOp0L1dIGRkZGQgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg0LTQsNGA0LDQsCcsXG4gICAgcGFzdDogJyVzINOp0LzQvdOpJyxcbiAgICBzOiB0cmFuc2xhdGUsXG4gICAgc3M6IHRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdGUsXG4gICAgbW06IHRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiB0cmFuc2xhdGUsXG4gICAgZGQ6IHRyYW5zbGF0ZSxcbiAgICBNOiB0cmFuc2xhdGUsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiB0cmFuc2xhdGUsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0g06nQtNOp0YAvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnRCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJyDTqdC006nRgCc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4KWnJyxcbiAgMjogJ+ClqCcsXG4gIDM6ICfgpaknLFxuICA0OiAn4KWqJyxcbiAgNTogJ+ClqycsXG4gIDY6ICfgpawnLFxuICA3OiAn4KWtJyxcbiAgODogJ+ClricsXG4gIDk6ICfgpa8nLFxuICAwOiAn4KWmJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgpacnOiAnMScsXG4gICfgpagnOiAnMicsXG4gICfgpaknOiAnMycsXG4gICfgpaonOiAnNCcsXG4gICfgpasnOiAnNScsXG4gICfgpawnOiAnNicsXG4gICfgpa0nOiAnNycsXG4gICfgpa4nOiAnOCcsXG4gICfgpa8nOiAnOScsXG4gICfgpaYnOiAnMCdcbn07XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZU1yKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICB2YXIgb3V0cHV0ID0gJyc7XG5cbiAgaWYgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICBzd2l0Y2ggKHN0cmluZykge1xuICAgICAgY2FzZSAncyc6XG4gICAgICAgIG91dHB1dCA9ICfgpJXgpL7gpLngpYAg4KS44KWH4KSV4KSC4KSmJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3NzJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkuOClh+CkleCkguCkpic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdtJzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CklSDgpK7gpL/gpKjgpL/gpJ8nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnbW0nOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KSu4KS/4KSo4KS/4KSf4KWHJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2gnOlxuICAgICAgICBvdXRwdXQgPSAn4KSP4KSVIOCkpOCkvuCkuCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdoaCc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpKTgpL7gpLgnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZCc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJUg4KSm4KS/4KS14KS4JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2RkJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkpuCkv+CkteCkuCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdNJzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CklSDgpK7gpLngpL/gpKjgpL4nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnTU0nOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KSu4KS54KS/4KSo4KWHJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3knOlxuICAgICAgICBvdXRwdXQgPSAn4KSP4KSVIOCkteCksOCljeCktyc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd5eSc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpLXgpLDgpY3gpLfgpYcnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3dpdGNoIChzdHJpbmcpIHtcbiAgICAgIGNhc2UgJ3MnOlxuICAgICAgICBvdXRwdXQgPSAn4KSV4KS+4KS54KWAIOCkuOClh+CkleCkguCkpuCkvuCkgic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzcyc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpLjgpYfgpJXgpILgpKbgpL7gpIInO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJXgpL4g4KSu4KS/4KSo4KS/4KSf4KS+JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ21tJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkruCkv+CkqOCkv+Ckn+CkvuCkgic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdoJzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CkleCkviDgpKTgpL7gpLjgpL4nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnaGgnOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KSk4KS+4KS44KS+4KSCJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgICBvdXRwdXQgPSAn4KSP4KSV4KS+IOCkpuCkv+CkteCkuOCkvic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdkZCc6XG4gICAgICAgIG91dHB1dCA9ICclZCDgpKbgpL/gpLXgpLjgpL7gpIInO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnTSc6XG4gICAgICAgIG91dHB1dCA9ICfgpI/gpJXgpL4g4KSu4KS54KS/4KSo4KWN4KSv4KS+JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ01NJzpcbiAgICAgICAgb3V0cHV0ID0gJyVkIOCkruCkueCkv+CkqOCljeCkr+CkvuCkgic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd5JzpcbiAgICAgICAgb3V0cHV0ID0gJ+Ckj+CkleCkviDgpLXgpLDgpY3gpLfgpL4nO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAneXknOlxuICAgICAgICBvdXRwdXQgPSAnJWQg4KS14KSw4KWN4KS34KS+4KSCJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dC5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtcicsIHtcbiAgbW9udGhzOiAn4KSc4KS+4KSo4KWH4KS14KS+4KSw4KWAX+Ckq+Clh+CkrOCljeCksOClgeCkteCkvuCksOClgF/gpK7gpL7gpLDgpY3gpJpf4KSP4KSq4KWN4KSw4KS/4KSyX+CkruClh1/gpJzgpYLgpKhf4KSc4KWB4KSy4KWIX+CkkeCkl+CkuOCljeCkn1/gpLjgpKrgpY3gpJ/gpYfgpILgpKzgpLBf4KSR4KSV4KWN4KSf4KWL4KSs4KSwX+CkqOCli+CkteCljeCkueClh+CkguCkrOCksF/gpKHgpL/gpLjgpYfgpILgpKzgpLAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4KSc4KS+4KSo4KWHLl/gpKvgpYfgpKzgpY3gpLDgpYEuX+CkruCkvuCksOCljeCkmi5f4KSP4KSq4KWN4KSw4KS/Ll/gpK7gpYcuX+CknOClguCkqC5f4KSc4KWB4KSy4KWILl/gpJHgpJcuX+CkuOCkquCljeCkn+Clh+Ckgi5f4KSR4KSV4KWN4KSf4KWLLl/gpKjgpYvgpLXgpY3gpLngpYfgpIIuX+CkoeCkv+CkuOClh+Ckgi4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAn4KSw4KS14KS/4KS14KS+4KSwX+CkuOCli+CkruCkteCkvuCksF/gpK7gpILgpJfgpLPgpLXgpL7gpLBf4KSs4KWB4KSn4KS14KS+4KSwX+Ckl+ClgeCksOClguCkteCkvuCksF/gpLbgpYHgpJXgpY3gpLDgpLXgpL7gpLBf4KS24KSo4KS/4KS14KS+4KSwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4KSw4KS14KS/X+CkuOCli+Ckrl/gpK7gpILgpJfgpLNf4KSs4KWB4KSnX+Ckl+ClgeCksOClgl/gpLbgpYHgpJXgpY3gpLBf4KS24KSo4KS/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CksF/gpLjgpYtf4KSu4KSCX+CkrOClgV/gpJfgpYFf4KS24KWBX+Ckticuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSDgpLXgpL7gpJzgpKTgpL4nLFxuICAgIExUUzogJ0EgaDptbTpzcyDgpLXgpL7gpJzgpKTgpL4nLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tIOCkteCkvuCknOCkpOCkvicsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4KS14KS+4KSc4KSk4KS+J1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4KSG4KScXSBMVCcsXG4gICAgbmV4dERheTogJ1vgpIngpKbgpY3gpK/gpL5dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQsIExUJyxcbiAgICBsYXN0RGF5OiAnW+CkleCkvuCksl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+CkruCkvuCkl+ClgOCksl0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPgpK7gpKfgpY3gpK/gpYcnLFxuICAgIHBhc3Q6ICclc+CkquClguCksOCljeCkteClgCcsXG4gICAgczogcmVsYXRpdmVUaW1lTXIsXG4gICAgc3M6IHJlbGF0aXZlVGltZU1yLFxuICAgIG06IHJlbGF0aXZlVGltZU1yLFxuICAgIG1tOiByZWxhdGl2ZVRpbWVNcixcbiAgICBoOiByZWxhdGl2ZVRpbWVNcixcbiAgICBoaDogcmVsYXRpdmVUaW1lTXIsXG4gICAgZDogcmVsYXRpdmVUaW1lTXIsXG4gICAgZGQ6IHJlbGF0aXZlVGltZU1yLFxuICAgIE06IHJlbGF0aXZlVGltZU1yLFxuICAgIE1NOiByZWxhdGl2ZVRpbWVNcixcbiAgICB5OiByZWxhdGl2ZVRpbWVNcixcbiAgICB5eTogcmVsYXRpdmVUaW1lTXJcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVtYmVyTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcZC9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBzeW1ib2xNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4KSq4KS54KS+4KSf4KWHfOCkuOCkleCkvuCks+ClgHzgpKbgpYHgpKrgpL7gpLDgpYB84KS44KS+4KSv4KSC4KSV4KS+4KSz4KWAfOCksOCkvuCkpOCljeCksOClgC8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgpKrgpLngpL7gpJ/gpYcnIHx8IG1lcmlkaWVtID09PSAn4KS44KSV4KS+4KSz4KWAJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CkpuClgeCkquCkvuCksOClgCcgfHwgbWVyaWRpZW0gPT09ICfgpLjgpL7gpK/gpILgpJXgpL7gpLPgpYAnIHx8IG1lcmlkaWVtID09PSAn4KSw4KS+4KSk4KWN4KSw4KWAJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTIgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyID49IDAgJiYgaG91ciA8IDYpIHtcbiAgICAgIHJldHVybiAn4KSq4KS54KS+4KSf4KWHJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfgpLjgpJXgpL7gpLPgpYAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ+CkpuClgeCkquCkvuCksOClgCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAn4KS44KS+4KSv4KSC4KSV4KS+4KSz4KWAJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfgpLDgpL7gpKTgpY3gpLDgpYAnO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbXMtbXknLCB7XG4gIG1vbnRoczogJ0phbnVhcmlfRmVicnVhcmlfTWFjX0FwcmlsX01laV9KdW5fSnVsYWlfT2dvc19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EaXNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hY19BcHJfTWVpX0p1bl9KdWxfT2dzX1NlcF9Pa3RfTm92X0Rpcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdBaGFkX0lzbmluX1NlbGFzYV9SYWJ1X0toYW1pc19KdW1hYXRfU2FidHUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdBaGRfSXNuX1NlbF9SYWJfS2hhX0p1bV9TYWInLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnQWhfSXNfU2xfUmJfS21fSm1fU2InLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISC5tbScsXG4gICAgTFRTOiAnSEgubW0uc3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL3BhZ2l8dGVuZ2FoYXJpfHBldGFuZ3xtYWxhbS8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICdwYWdpJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3RlbmdhaGFyaScpIHtcbiAgICAgIHJldHVybiBob3VyID49IDExID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAncGV0YW5nJyB8fCBtZXJpZGllbSA9PT0gJ21hbGFtJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA8IDExKSB7XG4gICAgICByZXR1cm4gJ3BhZ2knO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxNSkge1xuICAgICAgcmV0dXJuICd0ZW5nYWhhcmknO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxOSkge1xuICAgICAgcmV0dXJuICdwZXRhbmcnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ21hbGFtJztcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tIYXJpIGluaSBwdWt1bF0gTFQnLFxuICAgIG5leHREYXk6ICdbRXNvayBwdWt1bF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbcHVrdWxdIExUJyxcbiAgICBsYXN0RGF5OiAnW0tlbG1hcmluIHB1a3VsXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtsZXBhcyBwdWt1bF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZGFsYW0gJXMnLFxuICAgIHBhc3Q6ICclcyB5YW5nIGxlcGFzJyxcbiAgICBzOiAnYmViZXJhcGEgc2FhdCcsXG4gICAgc3M6ICclZCBzYWF0JyxcbiAgICBtOiAnc2VtaW5pdCcsXG4gICAgbW06ICclZCBtaW5pdCcsXG4gICAgaDogJ3NlamFtJyxcbiAgICBoaDogJyVkIGphbScsXG4gICAgZDogJ3NlaGFyaScsXG4gICAgZGQ6ICclZCBoYXJpJyxcbiAgICBNOiAnc2VidWxhbicsXG4gICAgTU06ICclZCBidWxhbicsXG4gICAgeTogJ3NldGFodW4nLFxuICAgIHl5OiAnJWQgdGFodW4nXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ21zJywge1xuICBtb250aHM6ICdKYW51YXJpX0ZlYnJ1YXJpX01hY19BcHJpbF9NZWlfSnVuX0p1bGFpX09nb3NfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGlzZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYWNfQXByX01laV9KdW5fSnVsX09nc19TZXBfT2t0X05vdl9EaXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnQWhhZF9Jc25pbl9TZWxhc2FfUmFidV9LaGFtaXNfSnVtYWF0X1NhYnR1Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnQWhkX0lzbl9TZWxfUmFiX0toYV9KdW1fU2FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ0FoX0lzX1NsX1JiX0ttX0ptX1NiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEgubW0nLFxuICAgIExUUzogJ0hILm1tLnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9wYWdpfHRlbmdhaGFyaXxwZXRhbmd8bWFsYW0vLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAncGFnaScpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICd0ZW5nYWhhcmknKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ3BldGFuZycgfHwgbWVyaWRpZW0gPT09ICdtYWxhbScpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMSkge1xuICAgICAgcmV0dXJuICdwYWdpJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTUpIHtcbiAgICAgIHJldHVybiAndGVuZ2FoYXJpJztcbiAgICB9IGVsc2UgaWYgKGhvdXJzIDwgMTkpIHtcbiAgICAgIHJldHVybiAncGV0YW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdtYWxhbSc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSGFyaSBpbmkgcHVrdWxdIExUJyxcbiAgICBuZXh0RGF5OiAnW0Vzb2sgcHVrdWxdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW3B1a3VsXSBMVCcsXG4gICAgbGFzdERheTogJ1tLZWxtYXJpbiBwdWt1bF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbbGVwYXMgcHVrdWxdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2RhbGFtICVzJyxcbiAgICBwYXN0OiAnJXMgeWFuZyBsZXBhcycsXG4gICAgczogJ2JlYmVyYXBhIHNhYXQnLFxuICAgIHNzOiAnJWQgc2FhdCcsXG4gICAgbTogJ3NlbWluaXQnLFxuICAgIG1tOiAnJWQgbWluaXQnLFxuICAgIGg6ICdzZWphbScsXG4gICAgaGg6ICclZCBqYW0nLFxuICAgIGQ6ICdzZWhhcmknLFxuICAgIGRkOiAnJWQgaGFyaScsXG4gICAgTTogJ3NlYnVsYW4nLFxuICAgIE1NOiAnJWQgYnVsYW4nLFxuICAgIHk6ICdzZXRhaHVuJyxcbiAgICB5eTogJyVkIHRhaHVuJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdtdCcsIHtcbiAgbW9udGhzOiAnSmFubmFyX0ZyYXJfTWFyenVfQXByaWxfTWVqanVfxKB1bmp1X0x1bGp1X0F3d2lzc3VfU2V0dGVtYnJ1X090dHVicnVfTm92ZW1icnVfRGnEi2VtYnJ1Jy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GcmFfTWFyX0Fwcl9NZWpfxKB1bl9MdWxfQXd3X1NldF9PdHRfTm92X0RpxIsnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnSWwtxKZhZGRfSXQtVG5lam5fSXQtVGxpZXRhX0wtRXJiZ8SnYV9JbC3EpmFtaXNfSWwtxKBpbWfEp2FfSXMtU2lidCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ8SmYWRfVG5lX1RsaV9FcmJfxKZhbV/EoGltX1NpYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfEpmFfVG5fVGxfRXJfxKZhX8SgaV9TaScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tJbGx1bSBmaWwtXUxUJyxcbiAgICBuZXh0RGF5OiAnW0fEp2FkYSBmaWwtXUxUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2ZpbC1dTFQnLFxuICAgIGxhc3REYXk6ICdbSWwtYmllcmHEpyBmaWwtXUxUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2xpIGfEp2FkZGFdIFtmaWwtXUxUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2bigJkgJXMnLFxuICAgIHBhc3Q6ICclcyBpbHUnLFxuICAgIHM6ICdmdGl0IHNla29uZGknLFxuICAgIHNzOiAnJWQgc2Vrb25kaScsXG4gICAgbTogJ21pbnV0YScsXG4gICAgbW06ICclZCBtaW51dGknLFxuICAgIGg6ICdzaWVnxKdhJyxcbiAgICBoaDogJyVkIHNpZWfEp2F0JyxcbiAgICBkOiAnxKF1cm5hdGEnLFxuICAgIGRkOiAnJWQgxKFyYW5ldCcsXG4gICAgTTogJ3hhaGFyJyxcbiAgICBNTTogJyVkIHhodXInLFxuICAgIHk6ICdzZW5hJyxcbiAgICB5eTogJyVkIHNuaSdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9wrovLFxuICBvcmRpbmFsOiAnJWTCuicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzeW1ib2xNYXAgPSB7XG4gIDE6ICfhgYEnLFxuICAyOiAn4YGCJyxcbiAgMzogJ+GBgycsXG4gIDQ6ICfhgYQnLFxuICA1OiAn4YGFJyxcbiAgNjogJ+GBhicsXG4gIDc6ICfhgYcnLFxuICA4OiAn4YGIJyxcbiAgOTogJ+GBiScsXG4gIDA6ICfhgYAnXG59LFxuICAgIG51bWJlck1hcCA9IHtcbiAgJ+GBgSc6ICcxJyxcbiAgJ+GBgic6ICcyJyxcbiAgJ+GBgyc6ICczJyxcbiAgJ+GBhCc6ICc0JyxcbiAgJ+GBhSc6ICc1JyxcbiAgJ+GBhic6ICc2JyxcbiAgJ+GBhyc6ICc3JyxcbiAgJ+GBiCc6ICc4JyxcbiAgJ+GBiSc6ICc5JyxcbiAgJ+GBgCc6ICcwJ1xufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ215Jywge1xuICBtb250aHM6ICfhgIfhgJThgLrhgJThgJ3hgKvhgJvhgK5f4YCW4YCx4YCW4YCx4YCs4YC64YCd4YCr4YCb4YCuX+GAmeGAkOGAul/hgKfhgJXhgLzhgK5f4YCZ4YCxX+GAh+GAveGAlOGAul/hgIfhgLDhgJzhgK3hgK/hgIThgLpf4YCe4YC84YCC4YCv4YCQ4YC6X+GAheGAgOGAuuGAkOGAhOGAuuGAmOGArF/hgKHhgLHhgKzhgIDhgLrhgJDhgK3hgK/hgJjhgKxf4YCU4YCt4YCv4YCd4YCE4YC64YCY4YCsX+GAkuGAruGAh+GAhOGAuuGAmOGArCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfhgIfhgJThgLpf4YCW4YCxX+GAmeGAkOGAul/hgJXhgLzhgK5f4YCZ4YCxX+GAh+GAveGAlOGAul/hgJzhgK3hgK/hgIThgLpf4YCe4YC8X+GAheGAgOGAul/hgKHhgLHhgKzhgIDhgLpf4YCU4YCt4YCvX+GAkuGAricuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfhgJDhgJThgIThgLrhgLnhgILhgJThgL3hgLFf4YCQ4YCU4YCE4YC64YC54YCc4YCsX+GAoeGAhOGAuuGAueGAguGAq1/hgJfhgK/hgJLhgLnhgJPhgJ/hgLDhgLhf4YCA4YC84YCs4YCe4YCV4YCQ4YCx4YC4X+GAnuGAseGArOGAgOGAvOGArF/hgIXhgJThgLEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfhgJThgL3hgLFf4YCc4YCsX+GAguGAq1/hgJ/hgLDhgLhf4YCA4YC84YCsX+GAnuGAseGArF/hgJThgLEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4YCU4YC94YCxX+GAnOGArF/hgILhgKtf4YCf4YCw4YC4X+GAgOGAvOGArF/hgJ7hgLHhgKxf4YCU4YCxJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4YCa4YCU4YCxLl0gTFQgW+GAmeGAvuGArF0nLFxuICAgIG5leHREYXk6ICdb4YCZ4YCU4YCA4YC64YCW4YC84YCU4YC6XSBMVCBb4YCZ4YC+4YCsXScsXG4gICAgbmV4dFdlZWs6ICdkZGRkIExUIFvhgJnhgL7hgKxdJyxcbiAgICBsYXN0RGF5OiAnW+GAmeGAlOGAsS7hgIBdIExUIFvhgJnhgL7hgKxdJyxcbiAgICBsYXN0V2VlazogJ1vhgJXhgLzhgK7hgLjhgIHhgLLhgLfhgJ7hgLHhgKxdIGRkZGQgTFQgW+GAmeGAvuGArF0nLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn4YCc4YCs4YCZ4YCK4YC64YC3ICVzIOGAmeGAvuGArCcsXG4gICAgcGFzdDogJ+GAnOGAveGAlOGAuuGAgeGAsuGAt+GAnuGAseGArCAlcyDhgIAnLFxuICAgIHM6ICfhgIXhgIDhgLnhgIDhgJThgLou4YCh4YCU4YCK4YC64YC44YCE4YCa4YC6JyxcbiAgICBzczogJyVkIOGAheGAgOGAueGAgOGAlOGAt+GAuicsXG4gICAgbTogJ+GAkOGAheGAuuGAmeGAreGAlOGAheGAuicsXG4gICAgbW06ICclZCDhgJnhgK3hgJThgIXhgLonLFxuICAgIGg6ICfhgJDhgIXhgLrhgJThgKzhgJvhgK4nLFxuICAgIGhoOiAnJWQg4YCU4YCs4YCb4YCuJyxcbiAgICBkOiAn4YCQ4YCF4YC64YCb4YCA4YC6JyxcbiAgICBkZDogJyVkIOGAm+GAgOGAuicsXG4gICAgTTogJ+GAkOGAheGAuuGAnCcsXG4gICAgTU06ICclZCDhgJwnLFxuICAgIHk6ICfhgJDhgIXhgLrhgJThgL7hgIXhgLonLFxuICAgIHl5OiAnJWQg4YCU4YC+4YCF4YC6J1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4YGB4YGC4YGD4YGE4YGF4YGG4YGH4YGI4YGJ4YGAXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ25iJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJzX2FwcmlsX21haV9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2Rlc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbi5fZmViLl9tYXJzX2Fwci5fbWFpX2p1bmlfanVsaV9hdWcuX3NlcC5fb2t0Ll9ub3YuX2Rlcy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnc8O4bmRhZ19tYW5kYWdfdGlyc2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbMO4cmRhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3PDuC5fbWEuX3RpLl9vbi5fdG8uX2ZyLl9sw7guJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ3PDuF9tYV90aV9vbl90b19mcl9sw7gnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRC4gTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQuIE1NTU0gWVlZWSBba2wuXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2kgZGFnIGtsLl0gTFQnLFxuICAgIG5leHREYXk6ICdbaSBtb3JnZW4ga2wuXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtrbC5dIExUJyxcbiAgICBsYXN0RGF5OiAnW2kgZ8OlciBrbC5dIExUJyxcbiAgICBsYXN0V2VlazogJ1tmb3JyaWdlXSBkZGRkIFtrbC5dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ29tICVzJyxcbiAgICBwYXN0OiAnJXMgc2lkZW4nLFxuICAgIHM6ICdub2VuIHNla3VuZGVyJyxcbiAgICBzczogJyVkIHNla3VuZGVyJyxcbiAgICBtOiAnZXR0IG1pbnV0dCcsXG4gICAgbW06ICclZCBtaW51dHRlcicsXG4gICAgaDogJ2VuIHRpbWUnLFxuICAgIGhoOiAnJWQgdGltZXInLFxuICAgIGQ6ICdlbiBkYWcnLFxuICAgIGRkOiAnJWQgZGFnZXInLFxuICAgIHc6ICdlbiB1a2UnLFxuICAgIHd3OiAnJWQgdWtlcicsXG4gICAgTTogJ2VuIG3DpW5lZCcsXG4gICAgTU06ICclZCBtw6VuZWRlcicsXG4gICAgeTogJ2V0dCDDpXInLFxuICAgIHl5OiAnJWQgw6VyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN5bWJvbE1hcCA9IHtcbiAgMTogJ+ClpycsXG4gIDI6ICfgpagnLFxuICAzOiAn4KWpJyxcbiAgNDogJ+ClqicsXG4gIDU6ICfgpasnLFxuICA2OiAn4KWsJyxcbiAgNzogJ+ClrScsXG4gIDg6ICfgpa4nLFxuICA5OiAn4KWvJyxcbiAgMDogJ+Clpidcbn0sXG4gICAgbnVtYmVyTWFwID0ge1xuICAn4KWnJzogJzEnLFxuICAn4KWoJzogJzInLFxuICAn4KWpJzogJzMnLFxuICAn4KWqJzogJzQnLFxuICAn4KWrJzogJzUnLFxuICAn4KWsJzogJzYnLFxuICAn4KWtJzogJzcnLFxuICAn4KWuJzogJzgnLFxuICAn4KWvJzogJzknLFxuICAn4KWmJzogJzAnXG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbmUnLCB7XG4gIG1vbnRoczogJ+CknOCkqOCkteCksOClgF/gpKvgpYfgpKzgpY3gpLDgpYHgpLXgpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCkv+Cksl/gpK7gpIhf4KSc4KWB4KSoX+CknOClgeCksuCkvuCkiF/gpIXgpJfgpLfgpY3gpJ9f4KS44KWH4KSq4KWN4KSf4KWH4KSu4KWN4KSs4KSwX+CkheCkleCljeCkn+Cli+CkrOCksF/gpKjgpYvgpK3gpYfgpK7gpY3gpKzgpLBf4KSh4KS/4KS44KWH4KSu4KWN4KSs4KSwJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+CknOCkqC5f4KSr4KWH4KSs4KWN4KSw4KWBLl/gpK7gpL7gpLDgpY3gpJpf4KSF4KSq4KWN4KSw4KS/Ll/gpK7gpIhf4KSc4KWB4KSoX+CknOClgeCksuCkvuCkiC5f4KSF4KSXLl/gpLjgpYfgpKrgpY3gpJ8uX+CkheCkleCljeCkn+Cliy5f4KSo4KWL4KSt4KWHLl/gpKHgpL/gpLjgpYcuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ+CkhuCkh+CkpOCkrOCkvuCksF/gpLjgpYvgpK7gpKzgpL7gpLBf4KSu4KSZ4KWN4KSX4KSy4KSs4KS+4KSwX+CkrOClgeCkp+CkrOCkvuCksF/gpKzgpL/gpLngpL/gpKzgpL7gpLBf4KS24KWB4KSV4KWN4KSw4KSs4KS+4KSwX+CktuCkqOCkv+CkrOCkvuCksCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CkhuCkh+CkpC5f4KS44KWL4KSuLl/gpK7gpJngpY3gpJfgpLIuX+CkrOClgeCkpy5f4KSs4KS/4KS54KS/Ll/gpLbgpYHgpJXgpY3gpLAuX+CktuCkqOCkvy4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4KSGLl/gpLjgpYsuX+CkruCkgi5f4KSs4KWBLl/gpKzgpL8uX+CktuClgS5f4KS2Licuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnQeCkleCliyBoOm1tIOCkrOCknOClhycsXG4gICAgTFRTOiAnQeCkleCliyBoOm1tOnNzIOCkrOCknOClhycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBB4KSV4KWLIGg6bW0g4KSs4KSc4KWHJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVksIEHgpJXgpYsgaDptbSDgpKzgpJzgpYcnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgpafgpajgpangpargpavgpazgpa3gpa7gpa/gpaZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bWJlck1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cXGQvZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICByZXR1cm4gc3ltYm9sTWFwW21hdGNoXTtcbiAgICB9KTtcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+CksOCkvuCkpOCkv3zgpKzgpL/gpLngpL7gpKh84KSm4KS/4KSJ4KSB4KS44KWLfOCkuOCkvuCkgeCknS8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgpLDgpL7gpKTgpL8nKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDQgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpKzgpL/gpLngpL7gpKgnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4KSm4KS/4KSJ4KSB4KS44KWLJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTAgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgpLjgpL7gpIHgpJ0nKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMykge1xuICAgICAgcmV0dXJuICfgpLDgpL7gpKTgpL8nO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ+CkrOCkv+CkueCkvuCkqCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTYpIHtcbiAgICAgIHJldHVybiAn4KSm4KS/4KSJ4KSB4KS44KWLJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMCkge1xuICAgICAgcmV0dXJuICfgpLjgpL7gpIHgpJ0nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+CksOCkvuCkpOCkvyc7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4KSG4KScXSBMVCcsXG4gICAgbmV4dERheTogJ1vgpK3gpYvgpLLgpL9dIExUJyxcbiAgICBuZXh0V2VlazogJ1vgpIbgpIngpIHgpKbgpYtdIGRkZGRbLF0gTFQnLFxuICAgIGxhc3REYXk6ICdb4KS54KS/4KSc4KWLXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb4KSX4KSP4KSV4KWLXSBkZGRkWyxdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz4KSu4KS+JyxcbiAgICBwYXN0OiAnJXMg4KSF4KSX4KS+4KSh4KS/JyxcbiAgICBzOiAn4KSV4KWH4KS54KWAIOCkleCljeCkt+CkoycsXG4gICAgc3M6ICclZCDgpLjgpYfgpJXgpYfgpKPgpY3gpKEnLFxuICAgIG06ICfgpI/gpJUg4KSu4KS/4KSo4KWH4KSfJyxcbiAgICBtbTogJyVkIOCkruCkv+CkqOClh+CknycsXG4gICAgaDogJ+Ckj+CklSDgpJjgpKPgpY3gpJ/gpL4nLFxuICAgIGhoOiAnJWQg4KSY4KSj4KWN4KSf4KS+JyxcbiAgICBkOiAn4KSP4KSVIOCkpuCkv+CkqCcsXG4gICAgZGQ6ICclZCDgpKbgpL/gpKgnLFxuICAgIE06ICfgpI/gpJUg4KSu4KS54KS/4KSo4KS+JyxcbiAgICBNTTogJyVkIOCkruCkueCkv+CkqOCkvicsXG4gICAgeTogJ+Ckj+CklSDgpKzgpLDgpY3gpLcnLFxuICAgIHl5OiAnJWQg4KSs4KSw4KWN4KS3J1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAwLFxuICAgIGRveTogNlxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzU2hvcnRXaXRoRG90cyA9ICdqYW4uX2ZlYi5fbXJ0Ll9hcHIuX21laV9qdW4uX2p1bC5fYXVnLl9zZXAuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1Nob3J0V2l0aG91dERvdHMgPSAnamFuX2ZlYl9tcnRfYXByX21laV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXG4gICAgbW9udGhzUGFyc2UgPSBbL15qYW4vaSwgL15mZWIvaSwgL15tYWFydHxtcnQuPyQvaSwgL15hcHIvaSwgL15tZWkkL2ksIC9eanVuW2kuXT8kL2ksIC9eanVsW2kuXT8kL2ksIC9eYXVnL2ksIC9ec2VwL2ksIC9eb2t0L2ksIC9ebm92L2ksIC9eZGVjL2ldLFxuICAgIG1vbnRoc1JlZ2V4ID0gL14oamFudWFyaXxmZWJydWFyaXxtYWFydHxhcHJpbHxtZWl8anVbbmxdaXxhdWd1c3R1c3xzZXB0ZW1iZXJ8b2t0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcnxqYW5cXC4/fGZlYlxcLj98bXJ0XFwuP3xhcHJcXC4/fGp1W25sXVxcLj98YXVnXFwuP3xzZXBcXC4/fG9rdFxcLj98bm92XFwuP3xkZWNcXC4/KS9pO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnbmwtYmUnLCB7XG4gIG1vbnRoczogJ2phbnVhcmlfZmVicnVhcmlfbWFhcnRfYXByaWxfbWVpX2p1bmlfanVsaV9hdWd1c3R1c19zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aERvdHM7XG4gICAgfSBlbHNlIGlmICgvLU1NTS0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aG91dERvdHNbbS5tb250aCgpXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vbnRoc1Nob3J0V2l0aERvdHNbbS5tb250aCgpXTtcbiAgICB9XG4gIH0sXG4gIG1vbnRoc1JlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU2hvcnRSZWdleDogbW9udGhzUmVnZXgsXG4gIG1vbnRoc1N0cmljdFJlZ2V4OiAvXihqYW51YXJpfGZlYnJ1YXJpfG1hYXJ0fGFwcmlsfG1laXxqdVtubF1pfGF1Z3VzdHVzfHNlcHRlbWJlcnxva3RvYmVyfG5vdmVtYmVyfGRlY2VtYmVyKS9pLFxuICBtb250aHNTaG9ydFN0cmljdFJlZ2V4OiAvXihqYW5cXC4/fGZlYlxcLj98bXJ0XFwuP3xhcHJcXC4/fG1laXxqdVtubF1cXC4/fGF1Z1xcLj98c2VwXFwuP3xva3RcXC4/fG5vdlxcLj98ZGVjXFwuPykvaSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgd2Vla2RheXM6ICd6b25kYWdfbWFhbmRhZ19kaW5zZGFnX3dvZW5zZGFnX2RvbmRlcmRhZ192cmlqZGFnX3phdGVyZGFnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnem8uX21hLl9kaS5fd28uX2RvLl92ci5femEuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ3pvX21hX2RpX3dvX2RvX3ZyX3phJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1t2YW5kYWFnIG9tXSBMVCcsXG4gICAgbmV4dERheTogJ1ttb3JnZW4gb21dIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW29tXSBMVCcsXG4gICAgbGFzdERheTogJ1tnaXN0ZXJlbiBvbV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW2FmZ2Vsb3Blbl0gZGRkZCBbb21dIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ292ZXIgJXMnLFxuICAgIHBhc3Q6ICclcyBnZWxlZGVuJyxcbiAgICBzOiAnZWVuIHBhYXIgc2Vjb25kZW4nLFxuICAgIHNzOiAnJWQgc2Vjb25kZW4nLFxuICAgIG06ICfDqcOpbiBtaW51dXQnLFxuICAgIG1tOiAnJWQgbWludXRlbicsXG4gICAgaDogJ8Opw6luIHV1cicsXG4gICAgaGg6ICclZCB1dXInLFxuICAgIGQ6ICfDqcOpbiBkYWcnLFxuICAgIGRkOiAnJWQgZGFnZW4nLFxuICAgIE06ICfDqcOpbiBtYWFuZCcsXG4gICAgTU06ICclZCBtYWFuZGVuJyxcbiAgICB5OiAnw6nDqW4gamFhcicsXG4gICAgeXk6ICclZCBqYWFyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oc3RlfGRlKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgfHwgbnVtYmVyID09PSA4IHx8IG51bWJlciA+PSAyMCA/ICdzdGUnIDogJ2RlJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHNTaG9ydFdpdGhEb3RzID0gJ2phbi5fZmViLl9tcnQuX2Fwci5fbWVpX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4nLnNwbGl0KCdfJyksXG4gICAgbW9udGhzU2hvcnRXaXRob3V0RG90cyA9ICdqYW5fZmViX21ydF9hcHJfbWVpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlYycuc3BsaXQoJ18nKSxcbiAgICBtb250aHNQYXJzZSA9IFsvXmphbi9pLCAvXmZlYi9pLCAvXm1hYXJ0fG1ydC4/JC9pLCAvXmFwci9pLCAvXm1laSQvaSwgL15qdW5baS5dPyQvaSwgL15qdWxbaS5dPyQvaSwgL15hdWcvaSwgL15zZXAvaSwgL15va3QvaSwgL15ub3YvaSwgL15kZWMvaV0sXG4gICAgbW9udGhzUmVnZXggPSAvXihqYW51YXJpfGZlYnJ1YXJpfG1hYXJ0fGFwcmlsfG1laXxqdVtubF1pfGF1Z3VzdHVzfHNlcHRlbWJlcnxva3RvYmVyfG5vdmVtYmVyfGRlY2VtYmVyfGphblxcLj98ZmViXFwuP3xtcnRcXC4/fGFwclxcLj98anVbbmxdXFwuP3xhdWdcXC4/fHNlcFxcLj98b2t0XFwuP3xub3ZcXC4/fGRlY1xcLj8pL2k7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdubCcsIHtcbiAgbW9udGhzOiAnamFudWFyaV9mZWJydWFyaV9tYWFydF9hcHJpbF9tZWlfanVuaV9qdWxpX2F1Z3VzdHVzX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnRXaXRoRG90cztcbiAgICB9IGVsc2UgaWYgKC8tTU1NLS8udGVzdChmb3JtYXQpKSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnRXaXRob3V0RG90c1ttLm1vbnRoKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbW9udGhzU2hvcnRXaXRoRG90c1ttLm1vbnRoKCldO1xuICAgIH1cbiAgfSxcbiAgbW9udGhzUmVnZXg6IG1vbnRoc1JlZ2V4LFxuICBtb250aHNTaG9ydFJlZ2V4OiBtb250aHNSZWdleCxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC9eKGphbnVhcml8ZmVicnVhcml8bWFhcnR8YXByaWx8bWVpfGp1W25sXWl8YXVndXN0dXN8c2VwdGVtYmVyfG9rdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXIpL2ksXG4gIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6IC9eKGphblxcLj98ZmViXFwuP3xtcnRcXC4/fGFwclxcLj98bWVpfGp1W25sXVxcLj98YXVnXFwuP3xzZXBcXC4/fG9rdFxcLj98bm92XFwuP3xkZWNcXC4/KS9pLFxuICBtb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIGxvbmdNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHNob3J0TW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICB3ZWVrZGF5czogJ3pvbmRhZ19tYWFuZGFnX2RpbnNkYWdfd29lbnNkYWdfZG9uZGVyZGFnX3ZyaWpkYWdfemF0ZXJkYWcnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICd6by5fbWEuX2RpLl93by5fZG8uX3ZyLl96YS4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnem9fbWFfZGlfd29fZG9fdnJfemEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELU1NLVlZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW3ZhbmRhYWcgb21dIExUJyxcbiAgICBuZXh0RGF5OiAnW21vcmdlbiBvbV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbb21dIExUJyxcbiAgICBsYXN0RGF5OiAnW2dpc3RlcmVuIG9tXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbYWZnZWxvcGVuXSBkZGRkIFtvbV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb3ZlciAlcycsXG4gICAgcGFzdDogJyVzIGdlbGVkZW4nLFxuICAgIHM6ICdlZW4gcGFhciBzZWNvbmRlbicsXG4gICAgc3M6ICclZCBzZWNvbmRlbicsXG4gICAgbTogJ8Opw6luIG1pbnV1dCcsXG4gICAgbW06ICclZCBtaW51dGVuJyxcbiAgICBoOiAnw6nDqW4gdXVyJyxcbiAgICBoaDogJyVkIHV1cicsXG4gICAgZDogJ8Opw6luIGRhZycsXG4gICAgZGQ6ICclZCBkYWdlbicsXG4gICAgdzogJ8Opw6luIHdlZWsnLFxuICAgIHd3OiAnJWQgd2VrZW4nLFxuICAgIE06ICfDqcOpbiBtYWFuZCcsXG4gICAgTU06ICclZCBtYWFuZGVuJyxcbiAgICB5OiAnw6nDqW4gamFhcicsXG4gICAgeXk6ICclZCBqYWFyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oc3RlfGRlKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlciArIChudW1iZXIgPT09IDEgfHwgbnVtYmVyID09PSA4IHx8IG51bWJlciA+PSAyMCA/ICdzdGUnIDogJ2RlJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ25uJywge1xuICBtb250aHM6ICdqYW51YXJfZmVicnVhcl9tYXJzX2FwcmlsX21haV9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2Rlc2VtYmVyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbi5fZmViLl9tYXJzX2Fwci5fbWFpX2p1bmlfanVsaV9hdWcuX3NlcC5fb2t0Ll9ub3YuX2Rlcy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnc3VuZGFnX23DpW5kYWdfdHlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sYXVyZGFnJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnc3UuX23DpS5fdHkuX29uLl90by5fZnIuX2xhdS4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnc3VfbcOlX3R5X29uX3RvX2ZyX2xhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQuIE1NTU0gWVlZWSBba2wuXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0kgZGFnIGtsb2trYV0gTFQnLFxuICAgIG5leHREYXk6ICdbSSBtb3Jnb24ga2xva2thXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtrbG9ra2FdIExUJyxcbiAgICBsYXN0RGF5OiAnW0kgZ8OlciBrbG9ra2FdIExUJyxcbiAgICBsYXN0V2VlazogJ1tGw7hyZWfDpWFuZGVdIGRkZGQgW2tsb2trYV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb20gJXMnLFxuICAgIHBhc3Q6ICclcyBzaWRhbicsXG4gICAgczogJ25va3JlIHNla3VuZCcsXG4gICAgc3M6ICclZCBzZWt1bmQnLFxuICAgIG06ICdlaXQgbWludXR0JyxcbiAgICBtbTogJyVkIG1pbnV0dCcsXG4gICAgaDogJ2VpbiB0aW1lJyxcbiAgICBoaDogJyVkIHRpbWFyJyxcbiAgICBkOiAnZWluIGRhZycsXG4gICAgZGQ6ICclZCBkYWdhcicsXG4gICAgdzogJ2VpIHZla2UnLFxuICAgIHd3OiAnJWQgdmVrZXInLFxuICAgIE06ICdlaW4gbcOlbmFkJyxcbiAgICBNTTogJyVkIG3DpW5hZGVyJyxcbiAgICB5OiAnZWl0IMOlcicsXG4gICAgeXk6ICclZCDDpXInXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdvYy1sbmMnLCB7XG4gIG1vbnRoczoge1xuICAgIHN0YW5kYWxvbmU6ICdnZW5pw6hyX2ZlYnJpw6hyX21hcsOnX2FicmlsX21haV9qdW5oX2p1bGhldF9hZ29zdF9zZXRlbWJyZV9vY3TDsmJyZV9ub3ZlbWJyZV9kZWNlbWJyZScuc3BsaXQoJ18nKSxcbiAgICBmb3JtYXQ6IFwiZGUgZ2VuacOocl9kZSBmZWJyacOocl9kZSBtYXLDp19kJ2FicmlsX2RlIG1haV9kZSBqdW5oX2RlIGp1bGhldF9kJ2Fnb3N0X2RlIHNldGVtYnJlX2Qnb2N0w7JicmVfZGUgbm92ZW1icmVfZGUgZGVjZW1icmVcIi5zcGxpdCgnXycpLFxuICAgIGlzRm9ybWF0OiAvRFtvRF0/KFxccykrTU1NTS9cbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICdnZW4uX2ZlYnIuX21hcsOnX2Fici5fbWFpX2p1bmhfanVsaC5fYWdvLl9zZXQuX29jdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ2RpbWVuZ2VfZGlsdW5zX2RpbWFyc19kaW3DqGNyZXNfZGlqw7J1c19kaXZlbmRyZXNfZGlzc2FidGUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkZy5fZGwuX2RtLl9kYy5fZGouX2R2Ll9kcy4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnZGdfZGxfZG1fZGNfZGpfZHZfZHMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBbZGVdIFlZWVknLFxuICAgIGxsOiAnRCBNTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFtkZV0gWVlZWSBbYV0gSDptbScsXG4gICAgbGxsOiAnRCBNTU0gWVlZWSwgSDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFtkZV0gWVlZWSBbYV0gSDptbScsXG4gICAgbGxsbDogJ2RkZCBEIE1NTSBZWVlZLCBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbdcOoaSBhXSBMVCcsXG4gICAgbmV4dERheTogJ1tkZW1hbiBhXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFthXSBMVCcsXG4gICAgbGFzdERheTogJ1tpw6hyIGFdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW3Bhc3NhdCBhXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6IFwiZCdhcXXDrSAlc1wiLFxuICAgIHBhc3Q6ICdmYSAlcycsXG4gICAgczogJ3VuYXMgc2Vnb25kYXMnLFxuICAgIHNzOiAnJWQgc2Vnb25kYXMnLFxuICAgIG06ICd1bmEgbWludXRhJyxcbiAgICBtbTogJyVkIG1pbnV0YXMnLFxuICAgIGg6ICd1bmEgb3JhJyxcbiAgICBoaDogJyVkIG9yYXMnLFxuICAgIGQ6ICd1biBqb3JuJyxcbiAgICBkZDogJyVkIGpvcm5zJyxcbiAgICBNOiAndW4gbWVzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW4gYW4nLFxuICAgIHl5OiAnJWQgYW5zJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0ocnxufHR8w6h8YSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgdmFyIG91dHB1dCA9IG51bWJlciA9PT0gMSA/ICdyJyA6IG51bWJlciA9PT0gMiA/ICduJyA6IG51bWJlciA9PT0gMyA/ICdyJyA6IG51bWJlciA9PT0gNCA/ICd0JyA6ICfDqCc7XG5cbiAgICBpZiAocGVyaW9kID09PSAndycgfHwgcGVyaW9kID09PSAnVycpIHtcbiAgICAgIG91dHB1dCA9ICdhJztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4KmnJyxcbiAgMjogJ+CpqCcsXG4gIDM6ICfgqaknLFxuICA0OiAn4KmqJyxcbiAgNTogJ+CpqycsXG4gIDY6ICfgqawnLFxuICA3OiAn4KmtJyxcbiAgODogJ+CpricsXG4gIDk6ICfgqa8nLFxuICAwOiAn4KmmJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgqacnOiAnMScsXG4gICfgqagnOiAnMicsXG4gICfgqaknOiAnMycsXG4gICfgqaonOiAnNCcsXG4gICfgqasnOiAnNScsXG4gICfgqawnOiAnNicsXG4gICfgqa0nOiAnNycsXG4gICfgqa4nOiAnOCcsXG4gICfgqa8nOiAnOScsXG4gICfgqaYnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdwYS1pbicsIHtcbiAgbW9udGhzOiAn4Kic4Kio4Ki14Kiw4KmAX+Coq+CovOCosOCoteCosOCpgF/gqK7gqL7gqLDgqJpf4KiF4Kiq4KmN4Kiw4KmI4KiyX+CoruCoiF/gqJzgqYLgqKhf4Kic4KmB4Kiy4Ki+4KiIX+CoheCol+CouOCopF/gqLjgqKTgqbDgqKzgqLBf4KiF4KiV4Kik4KmC4Kis4KiwX+CoqOCoteCpsOCorOCosF/gqKbgqLjgqbDgqKzgqLAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4Kic4Kio4Ki14Kiw4KmAX+Coq+CovOCosOCoteCosOCpgF/gqK7gqL7gqLDgqJpf4KiF4Kiq4KmN4Kiw4KmI4KiyX+CoruCoiF/gqJzgqYLgqKhf4Kic4KmB4Kiy4Ki+4KiIX+CoheCol+CouOCopF/gqLjgqKTgqbDgqKzgqLBf4KiF4KiV4Kik4KmC4Kis4KiwX+CoqOCoteCpsOCorOCosF/gqKbgqLjgqbDgqKzgqLAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4KiQ4Kik4Ki14Ki+4KiwX+CouOCpi+CoruCoteCovuCosF/gqK7gqbDgqJfgqLLgqLXgqL7gqLBf4Kis4KmB4Kin4Ki14Ki+4KiwX+CoteCpgOCosOCoteCovuCosF/gqLjgqLzgqYHgqbHgqJXgqLDgqLXgqL7gqLBf4Ki44Ki84Kio4KmA4Kia4Kiw4Ki14Ki+4KiwJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4KiQ4KikX+CouOCpi+Corl/gqK7gqbDgqJfgqLJf4Kis4KmB4KinX+CoteCpgOCosF/gqLjgqLzgqYHgqJXgqLBf4Ki44Ki84Kio4KmAJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CokOCopF/gqLjgqYvgqK5f4Kiu4Kmw4KiX4KiyX+CorOCpgeCop1/gqLXgqYDgqLBf4Ki44Ki84KmB4KiV4KiwX+CouOCovOCoqOCpgCcuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0EgaDptbSDgqLXgqJzgqYcnLFxuICAgIExUUzogJ0EgaDptbTpzcyDgqLXgqJzgqYcnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSwgQSBoOm1tIOCoteConOCphycsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4Ki14Kic4KmHJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4KiF4KicXSBMVCcsXG4gICAgbmV4dERheTogJ1vgqJXgqLJdIExUJyxcbiAgICBuZXh0V2VlazogJ1vgqIXgqJfgqLLgqL5dIGRkZGQsIExUJyxcbiAgICBsYXN0RGF5OiAnW+ColeCosl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+CoquCov+Com+CosuCph10gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4Ki14Ki/4Kmx4KiaJyxcbiAgICBwYXN0OiAnJXMg4Kiq4Ki/4Kib4Kiy4KmHJyxcbiAgICBzOiAn4KiV4KmB4KidIOCouOColeCov+CpsOConycsXG4gICAgc3M6ICclZCDgqLjgqJXgqL/gqbDgqJ8nLFxuICAgIG06ICfgqIfgqJUg4Kiu4Ki/4Kmw4KifJyxcbiAgICBtbTogJyVkIOCoruCov+CpsOConycsXG4gICAgaDogJ+Coh+CpseColSDgqJjgqbDgqJ/gqL4nLFxuICAgIGhoOiAnJWQg4KiY4Kmw4Kif4KmHJyxcbiAgICBkOiAn4KiH4Kmx4KiVIOCopuCov+CoqCcsXG4gICAgZGQ6ICclZCDgqKbgqL/gqKgnLFxuICAgIE06ICfgqIfgqbHgqJUg4Kiu4Ki54KmA4Kio4Ki+JyxcbiAgICBNTTogJyVkIOCoruCoueCpgOCoqOCphycsXG4gICAgeTogJ+Coh+CpseColSDgqLjgqL7gqLInLFxuICAgIHl5OiAnJWQg4Ki44Ki+4KiyJ1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Kmn4Kmo4Kmp4Kmq4Kmr4Kms4Kmt4Kmu4Kmv4KmmXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/gqLDgqL7gqKR84Ki44Ki14KmH4KiwfOCopuCpgeCoquCoueCov+CosHzgqLjgqLzgqL7gqK4vLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn4Kiw4Ki+4KikJykge1xuICAgICAgcmV0dXJuIGhvdXIgPCA0ID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4Ki44Ki14KmH4KiwJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CopuCpgeCoquCoueCov+CosCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDEwID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn4Ki44Ki84Ki+4KiuJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn4Kiw4Ki+4KikJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMCkge1xuICAgICAgcmV0dXJuICfgqLjgqLXgqYfgqLAnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ+CopuCpgeCoquCoueCov+CosCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMjApIHtcbiAgICAgIHJldHVybiAn4Ki44Ki84Ki+4KiuJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfgqLDgqL7gqKQnO1xuICAgIH1cbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMCxcbiAgICBkb3k6IDZcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIG1vbnRoc05vbWluYXRpdmUgPSAnc3R5Y3plxYRfbHV0eV9tYXJ6ZWNfa3dpZWNpZcWEX21hal9jemVyd2llY19saXBpZWNfc2llcnBpZcWEX3dyemVzaWXFhF9wYcW6ZHppZXJuaWtfbGlzdG9wYWRfZ3J1ZHppZcWEJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1N1YmplY3RpdmUgPSAnc3R5Y3puaWFfbHV0ZWdvX21hcmNhX2t3aWV0bmlhX21hamFfY3plcndjYV9saXBjYV9zaWVycG5pYV93cnplxZtuaWFfcGHFumR6aWVybmlrYV9saXN0b3BhZGFfZ3J1ZG5pYScuc3BsaXQoJ18nKSxcbiAgICBtb250aHNQYXJzZSA9IFsvXnN0eS9pLCAvXmx1dC9pLCAvXm1hci9pLCAvXmt3aS9pLCAvXm1hai9pLCAvXmN6ZS9pLCAvXmxpcC9pLCAvXnNpZS9pLCAvXndyei9pLCAvXnBhxbovaSwgL15saXMvaSwgL15ncnUvaV07XG5cbmZ1bmN0aW9uIHBsdXJhbChuKSB7XG4gIHJldHVybiBuICUgMTAgPCA1ICYmIG4gJSAxMCA+IDEgJiYgfn4obiAvIDEwKSAlIDEwICE9PSAxO1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3NzJzpcbiAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnc2VrdW5keScgOiAnc2VrdW5kJyk7XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ21pbnV0YScgOiAnbWludXTEmSc7XG5cbiAgICBjYXNlICdtbSc6XG4gICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ21pbnV0eScgOiAnbWludXQnKTtcblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnZ29kemluYScgOiAnZ29kemluxJknO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdnb2R6aW55JyA6ICdnb2R6aW4nKTtcblxuICAgIGNhc2UgJ3d3JzpcbiAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAndHlnb2RuaWUnIDogJ3R5Z29kbmknKTtcblxuICAgIGNhc2UgJ01NJzpcbiAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnbWllc2nEhWNlJyA6ICdtaWVzacSZY3knKTtcblxuICAgIGNhc2UgJ3l5JzpcbiAgICAgIHJldHVybiByZXN1bHQgKyAocGx1cmFsKG51bWJlcikgPyAnbGF0YScgOiAnbGF0Jyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgncGwnLCB7XG4gIG1vbnRoczogZnVuY3Rpb24gbW9udGhzKG1vbWVudFRvRm9ybWF0LCBmb3JtYXQpIHtcbiAgICBpZiAoIW1vbWVudFRvRm9ybWF0KSB7XG4gICAgICByZXR1cm4gbW9udGhzTm9taW5hdGl2ZTtcbiAgICB9IGVsc2UgaWYgKC9EIE1NTU0vLnRlc3QoZm9ybWF0KSkge1xuICAgICAgcmV0dXJuIG1vbnRoc1N1YmplY3RpdmVbbW9tZW50VG9Gb3JtYXQubW9udGgoKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtb250aHNOb21pbmF0aXZlW21vbWVudFRvRm9ybWF0Lm1vbnRoKCldO1xuICAgIH1cbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICdzdHlfbHV0X21hcl9rd2lfbWFqX2N6ZV9saXBfc2llX3dyel9wYcW6X2xpc19ncnUnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbG9uZ01vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgc2hvcnRNb250aHNQYXJzZTogbW9udGhzUGFyc2UsXG4gIHdlZWtkYXlzOiAnbmllZHppZWxhX3BvbmllZHppYcWCZWtfd3RvcmVrX8Wbcm9kYV9jendhcnRla19wacSFdGVrX3NvYm90YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ25kel9wb25fd3RfxZtyX2N6d19wdF9zb2InLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnTmRfUG5fV3RfxZpyX0N6X1B0X1NvJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0R6acWbIG9dIExUJyxcbiAgICBuZXh0RGF5OiAnW0p1dHJvIG9dIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW1cgbmllZHppZWzEmSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiAnW1dlIHd0b3JlayBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW1cgxZtyb2TEmSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW1cgc29ib3TEmSBvXSBMVCc7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJ1tXXSBkZGRkIFtvXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW1djem9yYWogb10gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICdbVyB6ZXN6xYLEhSBuaWVkemllbMSZIG9dIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbVyB6ZXN6xYLEhSDFm3JvZMSZIG9dIExUJztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbVyB6ZXN6xYLEhSBzb2JvdMSZIG9dIExUJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiAnW1cgemVzesWCeV0gZGRkZCBbb10gTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd6YSAlcycsXG4gICAgcGFzdDogJyVzIHRlbXUnLFxuICAgIHM6ICdraWxrYSBzZWt1bmQnLFxuICAgIHNzOiB0cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRlLFxuICAgIG1tOiB0cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogJzEgZHppZcWEJyxcbiAgICBkZDogJyVkIGRuaScsXG4gICAgdzogJ3R5ZHppZcWEJyxcbiAgICB3dzogdHJhbnNsYXRlLFxuICAgIE06ICdtaWVzacSFYycsXG4gICAgTU06IHRyYW5zbGF0ZSxcbiAgICB5OiAncm9rJyxcbiAgICB5eTogdHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdwdC1icicsIHtcbiAgbW9udGhzOiAnamFuZWlyb19mZXZlcmVpcm9fbWFyw6dvX2FicmlsX21haW9fanVuaG9fanVsaG9fYWdvc3RvX3NldGVtYnJvX291dHVicm9fbm92ZW1icm9fZGV6ZW1icm8nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuX2Zldl9tYXJfYWJyX21haV9qdW5fanVsX2Fnb19zZXRfb3V0X25vdl9kZXonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnZG9taW5nb19zZWd1bmRhLWZlaXJhX3RlcsOnYS1mZWlyYV9xdWFydGEtZmVpcmFfcXVpbnRhLWZlaXJhX3NleHRhLWZlaXJhX3PDoWJhZG8nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdkb21fc2VnX3Rlcl9xdWFfcXVpX3NleF9zw6FiJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2RvXzLCql8zwqpfNMKqXzXCql82wqpfc8OhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWScsXG4gICAgTExMOiAnRCBbZGVdIE1NTU0gW2RlXSBZWVlZIFvDoHNdIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIFvDoHNdIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSG9qZSDDoHNdIExUJyxcbiAgICBuZXh0RGF5OiAnW0FtYW5ow6Mgw6BzXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvDoHNdIExUJyxcbiAgICBsYXN0RGF5OiAnW09udGVtIMOgc10gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHJldHVybiB0aGlzLmRheSgpID09PSAwIHx8IHRoaXMuZGF5KCkgPT09IDYgPyAnW8OabHRpbW9dIGRkZGQgW8Ogc10gTFQnIDogJ1vDmmx0aW1hXSBkZGRkIFvDoHNdIExUJztcbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnZW0gJXMnLFxuICAgIHBhc3Q6ICdow6EgJXMnLFxuICAgIHM6ICdwb3Vjb3Mgc2VndW5kb3MnLFxuICAgIHNzOiAnJWQgc2VndW5kb3MnLFxuICAgIG06ICd1bSBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvcycsXG4gICAgaDogJ3VtYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmFzJyxcbiAgICBkOiAndW0gZGlhJyxcbiAgICBkZDogJyVkIGRpYXMnLFxuICAgIE06ICd1bSBtw6pzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW0gYW5vJyxcbiAgICB5eTogJyVkIGFub3MnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICBpbnZhbGlkRGF0ZTogJ0RhdGEgaW52w6FsaWRhJ1xufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgncHQnLCB7XG4gIG1vbnRoczogJ2phbmVpcm9fZmV2ZXJlaXJvX21hcsOnb19hYnJpbF9tYWlvX2p1bmhvX2p1bGhvX2Fnb3N0b19zZXRlbWJyb19vdXR1YnJvX25vdmVtYnJvX2RlemVtYnJvJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbl9mZXZfbWFyX2Ficl9tYWlfanVuX2p1bF9hZ29fc2V0X291dF9ub3ZfZGV6Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0RvbWluZ29fU2VndW5kYS1mZWlyYV9UZXLDp2EtZmVpcmFfUXVhcnRhLWZlaXJhX1F1aW50YS1mZWlyYV9TZXh0YS1mZWlyYV9Tw6FiYWRvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnRG9tX1NlZ19UZXJfUXVhX1F1aV9TZXhfU8OhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdEb18ywqpfM8KqXzTCql81wqpfNsKqX1PDoScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIFtkZV0gTU1NTSBbZGVdIFlZWVknLFxuICAgIExMTDogJ0QgW2RlXSBNTU1NIFtkZV0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW0hvamUgw6BzXSBMVCcsXG4gICAgbmV4dERheTogJ1tBbWFuaMOjIMOgc10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbw6BzXSBMVCcsXG4gICAgbGFzdERheTogJ1tPbnRlbSDDoHNdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXkoKSA9PT0gMCB8fCB0aGlzLmRheSgpID09PSA2ID8gJ1vDmmx0aW1vXSBkZGRkIFvDoHNdIExUJyA6ICdbw5psdGltYV0gZGRkZCBbw6BzXSBMVCc7XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ2VtICVzJyxcbiAgICBwYXN0OiAnaMOhICVzJyxcbiAgICBzOiAnc2VndW5kb3MnLFxuICAgIHNzOiAnJWQgc2VndW5kb3MnLFxuICAgIG06ICd1bSBtaW51dG8nLFxuICAgIG1tOiAnJWQgbWludXRvcycsXG4gICAgaDogJ3VtYSBob3JhJyxcbiAgICBoaDogJyVkIGhvcmFzJyxcbiAgICBkOiAndW0gZGlhJyxcbiAgICBkZDogJyVkIGRpYXMnLFxuICAgIHc6ICd1bWEgc2VtYW5hJyxcbiAgICB3dzogJyVkIHNlbWFuYXMnLFxuICAgIE06ICd1bSBtw6pzJyxcbiAgICBNTTogJyVkIG1lc2VzJyxcbiAgICB5OiAndW0gYW5vJyxcbiAgICB5eTogJyVkIGFub3MnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfcK6LyxcbiAgb3JkaW5hbDogJyVkwronLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBzczogJ3NlY3VuZGUnLFxuICAgIG1tOiAnbWludXRlJyxcbiAgICBoaDogJ29yZScsXG4gICAgZGQ6ICd6aWxlJyxcbiAgICB3dzogJ3PEg3B0xINtw6JuaScsXG4gICAgTU06ICdsdW5pJyxcbiAgICB5eTogJ2FuaSdcbiAgfSxcbiAgICAgIHNlcGFyYXRvciA9ICcgJztcblxuICBpZiAobnVtYmVyICUgMTAwID49IDIwIHx8IG51bWJlciA+PSAxMDAgJiYgbnVtYmVyICUgMTAwID09PSAwKSB7XG4gICAgc2VwYXJhdG9yID0gJyBkZSAnO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciArIHNlcGFyYXRvciArIGZvcm1hdFtrZXldO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdybycsIHtcbiAgbW9udGhzOiAnaWFudWFyaWVfZmVicnVhcmllX21hcnRpZV9hcHJpbGllX21haV9pdW5pZV9pdWxpZV9hdWd1c3Rfc2VwdGVtYnJpZV9vY3RvbWJyaWVfbm9pZW1icmllX2RlY2VtYnJpZScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdpYW4uX2ZlYi5fbWFydC5fYXByLl9tYWlfaXVuLl9pdWwuX2F1Zy5fc2VwdC5fb2N0Ll9ub3YuX2RlYy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnZHVtaW5pY8SDX2x1bmlfbWFyyJtpX21pZXJjdXJpX2pvaV92aW5lcmlfc8OibWLEg3TEgycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0R1bV9MdW5fTWFyX01pZV9Kb2lfVmluX1PDom0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnRHVfTHVfTWFfTWlfSm9fVmlfU8OiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbYXppIGxhXSBMVCcsXG4gICAgbmV4dERheTogJ1ttw6JpbmUgbGFdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2xhXSBMVCcsXG4gICAgbGFzdERheTogJ1tpZXJpIGxhXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbZm9zdGFdIGRkZGQgW2xhXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdwZXN0ZSAlcycsXG4gICAgcGFzdDogJyVzIMOubiB1cm3EgycsXG4gICAgczogJ2PDonRldmEgc2VjdW5kZScsXG4gICAgc3M6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgbTogJ3VuIG1pbnV0JyxcbiAgICBtbTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBoOiAnbyBvcsSDJyxcbiAgICBoaDogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBkOiAnbyB6aScsXG4gICAgZGQ6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgdzogJ28gc8SDcHTEg23Dom7EgycsXG4gICAgd3c6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgTTogJ28gbHVuxIMnLFxuICAgIE1NOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIHk6ICd1biBhbicsXG4gICAgeXk6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWxcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuXG5mdW5jdGlvbiBwbHVyYWwod29yZCwgbnVtKSB7XG4gIHZhciBmb3JtcyA9IHdvcmQuc3BsaXQoJ18nKTtcbiAgcmV0dXJuIG51bSAlIDEwID09PSAxICYmIG51bSAlIDEwMCAhPT0gMTEgPyBmb3Jtc1swXSA6IG51bSAlIDEwID49IDIgJiYgbnVtICUgMTAgPD0gNCAmJiAobnVtICUgMTAwIDwgMTAgfHwgbnVtICUgMTAwID49IDIwKSA/IGZvcm1zWzFdIDogZm9ybXNbMl07XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgdmFyIGZvcm1hdCA9IHtcbiAgICBzczogd2l0aG91dFN1ZmZpeCA/ICfRgdC10LrRg9C90LTQsF/RgdC10LrRg9C90LTRi1/RgdC10LrRg9C90LQnIDogJ9GB0LXQutGD0L3QtNGDX9GB0LXQutGD0L3QtNGLX9GB0LXQutGD0L3QtCcsXG4gICAgbW06IHdpdGhvdXRTdWZmaXggPyAn0LzQuNC90YPRgtCwX9C80LjQvdGD0YLRi1/QvNC40L3Rg9GCJyA6ICfQvNC40L3Rg9GC0YNf0LzQuNC90YPRgtGLX9C80LjQvdGD0YInLFxuICAgIGhoOiAn0YfQsNGBX9GH0LDRgdCwX9GH0LDRgdC+0LInLFxuICAgIGRkOiAn0LTQtdC90Yxf0LTQvdGPX9C00L3QtdC5JyxcbiAgICB3dzogJ9C90LXQtNC10LvRj1/QvdC10LTQtdC70Lhf0L3QtdC00LXQu9GMJyxcbiAgICBNTTogJ9C80LXRgdGP0YZf0LzQtdGB0Y/RhtCwX9C80LXRgdGP0YbQtdCyJyxcbiAgICB5eTogJ9Cz0L7QtF/Qs9C+0LTQsF/Qu9C10YInXG4gIH07XG5cbiAgaWYgKGtleSA9PT0gJ20nKSB7XG4gICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAn0LzQuNC90YPRgtCwJyA6ICfQvNC40L3Rg9GC0YMnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudW1iZXIgKyAnICcgKyBwbHVyYWwoZm9ybWF0W2tleV0sICtudW1iZXIpO1xuICB9XG59XG5cbnZhciBtb250aHNQYXJzZSA9IFsvXtGP0L3Qsi9pLCAvXtGE0LXQsi9pLCAvXtC80LDRgC9pLCAvXtCw0L/RgC9pLCAvXtC80LBb0LnRj10vaSwgL17QuNGO0L0vaSwgL17QuNGO0LsvaSwgL17QsNCy0LMvaSwgL17RgdC10L0vaSwgL17QvtC60YIvaSwgL17QvdC+0Y8vaSwgL17QtNC10LovaV07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdydScsIHtcbiAgbW9udGhzOiB7XG4gICAgZm9ybWF0OiAn0Y/QvdCy0LDRgNGPX9GE0LXQstGA0LDQu9GPX9C80LDRgNGC0LBf0LDQv9GA0LXQu9GPX9C80LDRj1/QuNGO0L3Rj1/QuNGO0LvRj1/QsNCy0LPRg9GB0YLQsF/RgdC10L3RgtGP0LHRgNGPX9C+0LrRgtGP0LHRgNGPX9C90L7Rj9Cx0YDRj1/QtNC10LrQsNCx0YDRjycuc3BsaXQoJ18nKSxcbiAgICBzdGFuZGFsb25lOiAn0Y/QvdCy0LDRgNGMX9GE0LXQstGA0LDQu9GMX9C80LDRgNGCX9Cw0L/RgNC10LvRjF/QvNCw0Llf0LjRjtC90Yxf0LjRjtC70Yxf0LDQstCz0YPRgdGCX9GB0LXQvdGC0Y/QsdGA0Yxf0L7QutGC0Y/QsdGA0Yxf0L3QvtGP0LHRgNGMX9C00LXQutCw0LHRgNGMJy5zcGxpdCgnXycpXG4gIH0sXG4gIG1vbnRoc1Nob3J0OiB7XG4gICAgZm9ybWF0OiAn0Y/QvdCyLl/RhNC10LLRgC5f0LzQsNGALl/QsNC/0YAuX9C80LDRj1/QuNGO0L3Rj1/QuNGO0LvRj1/QsNCy0LMuX9GB0LXQvdGCLl/QvtC60YIuX9C90L7Rj9CxLl/QtNC10LouJy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICfRj9C90LIuX9GE0LXQstGALl/QvNCw0YDRgl/QsNC/0YAuX9C80LDQuV/QuNGO0L3RjF/QuNGO0LvRjF/QsNCy0LMuX9GB0LXQvdGCLl/QvtC60YIuX9C90L7Rj9CxLl/QtNC10LouJy5zcGxpdCgnXycpXG4gIH0sXG4gIHdlZWtkYXlzOiB7XG4gICAgc3RhbmRhbG9uZTogJ9Cy0L7RgdC60YDQtdGB0LXQvdGM0LVf0L/QvtC90LXQtNC10LvRjNC90LjQul/QstGC0L7RgNC90LjQul/RgdGA0LXQtNCwX9GH0LXRgtCy0LXRgNCzX9C/0Y/RgtC90LjRhtCwX9GB0YPQsdCx0L7RgtCwJy5zcGxpdCgnXycpLFxuICAgIGZvcm1hdDogJ9Cy0L7RgdC60YDQtdGB0LXQvdGM0LVf0L/QvtC90LXQtNC10LvRjNC90LjQul/QstGC0L7RgNC90LjQul/RgdGA0LXQtNGDX9GH0LXRgtCy0LXRgNCzX9C/0Y/RgtC90LjRhtGDX9GB0YPQsdCx0L7RgtGDJy5zcGxpdCgnXycpLFxuICAgIGlzRm9ybWF0OiAvXFxbID9b0JLQsl0gPyg/OtC/0YDQvtGI0LvRg9GOfNGB0LvQtdC00YPRjtGJ0YPRjnzRjdGC0YMpPyA/XSA/ZGRkZC9cbiAgfSxcbiAgd2Vla2RheXNTaG9ydDogJ9Cy0YFf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0LLRgV/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsScuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBsb25nTW9udGhzUGFyc2U6IG1vbnRoc1BhcnNlLFxuICBzaG9ydE1vbnRoc1BhcnNlOiBtb250aHNQYXJzZSxcbiAgbW9udGhzUmVnZXg6IC9eKNGP0L3QstCw0YBb0YzRj1180Y/QvdCyXFwuP3zRhNC10LLRgNCw0Ltb0YzRj1180YTQtdCy0YA/XFwuP3zQvNCw0YDRgtCwP3zQvNCw0YBcXC4/fNCw0L/RgNC10Ltb0YzRj1180LDQv9GAXFwuP3zQvNCwW9C50Y9dfNC40Y7QvVvRjNGPXXzQuNGO0L1cXC4/fNC40Y7Qu1vRjNGPXXzQuNGO0LtcXC4/fNCw0LLQs9GD0YHRgtCwP3zQsNCy0LNcXC4/fNGB0LXQvdGC0Y/QsdGAW9GM0Y9dfNGB0LXQvdGCP1xcLj980L7QutGC0Y/QsdGAW9GM0Y9dfNC+0LrRglxcLj980L3QvtGP0LHRgFvRjNGPXXzQvdC+0Y/QsT9cXC4/fNC00LXQutCw0LHRgFvRjNGPXXzQtNC10LpcXC4/KS9pLFxuICBtb250aHNTaG9ydFJlZ2V4OiAvXijRj9C90LLQsNGAW9GM0Y9dfNGP0L3QslxcLj980YTQtdCy0YDQsNC7W9GM0Y9dfNGE0LXQstGAP1xcLj980LzQsNGA0YLQsD980LzQsNGAXFwuP3zQsNC/0YDQtdC7W9GM0Y9dfNCw0L/RgFxcLj980LzQsFvQudGPXXzQuNGO0L1b0YzRj1180LjRjtC9XFwuP3zQuNGO0Ltb0YzRj1180LjRjtC7XFwuP3zQsNCy0LPRg9GB0YLQsD980LDQstCzXFwuP3zRgdC10L3RgtGP0LHRgFvRjNGPXXzRgdC10L3Rgj9cXC4/fNC+0LrRgtGP0LHRgFvRjNGPXXzQvtC60YJcXC4/fNC90L7Rj9Cx0YBb0YzRj1180L3QvtGP0LE/XFwuP3zQtNC10LrQsNCx0YBb0YzRj1180LTQtdC6XFwuPykvaSxcbiAgbW9udGhzU3RyaWN0UmVnZXg6IC9eKNGP0L3QstCw0YBb0Y/RjF180YTQtdCy0YDQsNC7W9GP0YxdfNC80LDRgNGC0LA/fNCw0L/RgNC10Ltb0Y/RjF180LzQsFvRj9C5XXzQuNGO0L1b0Y/RjF180LjRjtC7W9GP0YxdfNCw0LLQs9GD0YHRgtCwP3zRgdC10L3RgtGP0LHRgFvRj9GMXXzQvtC60YLRj9Cx0YBb0Y/RjF180L3QvtGP0LHRgFvRj9GMXXzQtNC10LrQsNCx0YBb0Y/RjF0pL2ksXG4gIG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6IC9eKNGP0L3QslxcLnzRhNC10LLRgD9cXC580LzQsNGAW9GCLl180LDQv9GAXFwufNC80LBb0Y/QuV180LjRjtC9W9GM0Y8uXXzQuNGO0Ltb0YzRjy5dfNCw0LLQs1xcLnzRgdC10L3Rgj9cXC580L7QutGCXFwufNC90L7Rj9CxP1xcLnzQtNC10LpcXC4pL2ksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdIOm1tJyxcbiAgICBMVFM6ICdIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWSDQsy4nLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZINCzLiwgSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZINCzLiwgSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9Ch0LXQs9C+0LTQvdGPLCDQsl0gTFQnLFxuICAgIG5leHREYXk6ICdb0JfQsNCy0YLRgNCwLCDQsl0gTFQnLFxuICAgIGxhc3REYXk6ICdb0JLRh9C10YDQsCwg0LJdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsobm93KSB7XG4gICAgICBpZiAobm93LndlZWsoKSAhPT0gdGhpcy53ZWVrKCkpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuICdb0JIg0YHQu9C10LTRg9GO0YnQtdC1XSBkZGRkLCBb0LJdIExUJztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuICdb0JIg0YHQu9C10LTRg9GO0YnQuNC5XSBkZGRkLCBb0LJdIExUJztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuICdb0JIg0YHQu9C10LTRg9GO0YnRg9GOXSBkZGRkLCBb0LJdIExUJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuZGF5KCkgPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gJ1vQktC+XSBkZGRkLCBb0LJdIExUJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gJ1vQkl0gZGRkZCwgW9CyXSBMVCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2Vlayhub3cpIHtcbiAgICAgIGlmIChub3cud2VlaygpICE9PSB0aGlzLndlZWsoKSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gJ1vQkiDQv9GA0L7RiNC70L7QtV0gZGRkZCwgW9CyXSBMVCc7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiAnW9CSINC/0YDQvtGI0LvRi9C5XSBkZGRkLCBb0LJdIExUJztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuICdb0JIg0L/RgNC+0YjQu9GD0Y5dIGRkZGQsIFvQsl0gTFQnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5kYXkoKSA9PT0gMikge1xuICAgICAgICAgIHJldHVybiAnW9CS0L5dIGRkZGQsIFvQsl0gTFQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAnW9CSXSBkZGRkLCBb0LJdIExUJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfRh9C10YDQtdC3ICVzJyxcbiAgICBwYXN0OiAnJXMg0L3QsNC30LDQtCcsXG4gICAgczogJ9C90LXRgdC60L7Qu9GM0LrQviDRgdC10LrRg9C90LQnLFxuICAgIHNzOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIG06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgbW06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgaDogJ9GH0LDRgScsXG4gICAgaGg6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgZDogJ9C00LXQvdGMJyxcbiAgICBkZDogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICB3OiAn0L3QtdC00LXQu9GPJyxcbiAgICB3dzogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBNOiAn0LzQtdGB0Y/RhicsXG4gICAgTU06IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgeTogJ9Cz0L7QtCcsXG4gICAgeXk6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWxcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9C90L7Rh9C4fNGD0YLRgNCwfNC00L3Rj3zQstC10YfQtdGA0LAvaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXijQtNC90Y980LLQtdGH0LXRgNCwKSQvLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ9C90L7Rh9C4JztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfRg9GC0YDQsCc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTcpIHtcbiAgICAgIHJldHVybiAn0LTQvdGPJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfQstC10YfQtdGA0LAnO1xuICAgIH1cbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LSjQuXzQs9C+fNGPKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnTSc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnLdC5JztcblxuICAgICAgY2FzZSAnRCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnLdCz0L4nO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJy3Rjyc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzID0gWyfYrNmG2YjYsdmKJywgJ9mB2YrYqNix2YjYsdmKJywgJ9mF2KfYsdqGJywgJ9in2b7YsdmK2YQnLCAn2YXYptmKJywgJ9is2YjZhicsICfYrNmI2YTYp9ih2ZAnLCAn2KLar9iz2b0nLCAn2LPZitm+2b3Zhdio2LEnLCAn2KLaqtm92YjYqNixJywgJ9mG2YjZhdio2LEnLCAn2orYs9mF2KjYsSddLFxuICAgIGRheXMgPSBbJ9ii2obYsScsICfYs9mI2YXYsScsICfYp9qx2KfYsdmIJywgJ9in2LHYqNi5JywgJ9iu2YXZitizJywgJ9is2YXYuScsICfah9mG2ofYsSddO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc2QnLCB7XG4gIG1vbnRoczogbW9udGhzLFxuICBtb250aHNTaG9ydDogbW9udGhzLFxuICB3ZWVrZGF5czogZGF5cyxcbiAgd2Vla2RheXNTaG9ydDogZGF5cyxcbiAgd2Vla2RheXNNaW46IGRheXMsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGTYjCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9i12KjYrXzYtNin2YUvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuICfYtNin2YUnID09PSBpbnB1dDtcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn2LXYqNitJztcbiAgICB9XG5cbiAgICByZXR1cm4gJ9i02KfZhSc7XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vYp9qEXSBMVCcsXG4gICAgbmV4dERheTogJ1vYs9qA2Kfau9mKXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvYp9qz2YrZhiDZh9mB2KrZiiDYqtmKXSBMVCcsXG4gICAgbGFzdERheTogJ1vaqtin2YTZh9mHXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb2q/Ystix2YrZhCDZh9mB2KrZil0gZGRkZCBb2KrZil0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg2b7ZiNihJyxcbiAgICBwYXN0OiAnJXMg2KfasycsXG4gICAgczogJ9qG2YbYryDYs9mK2qrZhtqKJyxcbiAgICBzczogJyVkINiz2YraqtmG2oonLFxuICAgIG06ICfZh9qqINmF2YbZvScsXG4gICAgbW06ICclZCDZhdmG2b0nLFxuICAgIGg6ICfZh9qqINqq2YTYp9qqJyxcbiAgICBoaDogJyVkINqq2YTYp9qqJyxcbiAgICBkOiAn2YfaqiDaj9mK2YbZh9mGJyxcbiAgICBkZDogJyVkINqP2YrZhtmH2YYnLFxuICAgIE06ICfZh9qqINmF2YfZitmG2YgnLFxuICAgIE1NOiAnJWQg2YXZh9mK2YbYpycsXG4gICAgeTogJ9mH2qog2LPYp9mEJyxcbiAgICB5eTogJyVkINiz2KfZhCdcbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgv2IwvZywgJywnKTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NlJywge1xuICBtb250aHM6ICdvxJHEkWFqYWdlbcOhbm51X2d1b3Z2YW3DoW5udV9uanVrxI1hbcOhbm51X2N1b8WLb23DoW5udV9taWVzc2Vtw6FubnVfZ2Vhc3NlbcOhbm51X3N1b2lkbmVtw6FubnVfYm9yZ2Vtw6FubnVfxI1ha8SNYW3DoW5udV9nb2xnZ290bcOhbm51X3Nrw6FibWFtw6FubnVfanVvdmxhbcOhbm51Jy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2/EkcSRal9ndW92X25qdWtfY3VvX21pZXNfZ2Vhc19zdW9pX2JvcmdfxI1ha8SNX2dvbGdfc2vDoWJfanVvdicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdzb3RuYWJlYWl2aV92dW9zc8OhcmdhX21hxYvFi2Viw6FyZ2FfZ2Fza2F2YWhra3VfZHVvcmFzdGF0X2JlYXJqYWRhdF9sw6F2dmFyZGF0Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnc290bl92dW9zX21hxYtfZ2Fza19kdW9yX2JlYXJfbMOhdicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdzX3ZfbV9nX2RfYl9MJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdNTU1NIEQuIFtiLl0gWVlZWScsXG4gICAgTExMOiAnTU1NTSBELiBbYi5dIFlZWVkgW3RpLl0gSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBNTU1NIEQuIFtiLl0gWVlZWSBbdGkuXSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW290bmUgdGldIExUJyxcbiAgICBuZXh0RGF5OiAnW2lodHRpbiB0aV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbdGldIExUJyxcbiAgICBsYXN0RGF5OiAnW2lrdGUgdGldIExUJyxcbiAgICBsYXN0V2VlazogJ1tvdmRkaXRdIGRkZGQgW3RpXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBnZWHFvmVzJyxcbiAgICBwYXN0OiAnbWHFi2l0ICVzJyxcbiAgICBzOiAnbW9hZGRlIHNla3VuZGRhdCcsXG4gICAgc3M6ICclZCBzZWt1bmRkYXQnLFxuICAgIG06ICdva3RhIG1pbnVodGEnLFxuICAgIG1tOiAnJWQgbWludWh0YXQnLFxuICAgIGg6ICdva3RhIGRpaW1tdScsXG4gICAgaGg6ICclZCBkaWltbXV0JyxcbiAgICBkOiAnb2t0YSBiZWFpdmknLFxuICAgIGRkOiAnJWQgYmVhaXZ2aXQnLFxuICAgIE06ICdva3RhIG3DoW5udScsXG4gICAgTU06ICclZCBtw6FudXQnLFxuICAgIHk6ICdva3RhIGphaGtpJyxcbiAgICB5eTogJyVkIGphZ2l0J1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc2knLCB7XG4gIG1vbnRoczogJ+C2ouC2seC3gOC3j+C2u+C3kl/gtrTgt5ngtrbgtrvgt4Dgt4/gtrvgt5Jf4La44LeP4La74LeK4Lat4LeUX+C2heC2tOC3iuKAjeC2u+C3muC2veC3il/gtrjgt5Dgtrrgt5Jf4Lai4LeW4Lax4LeSX+C2ouC3luC2veC3kl/gtoXgtpzgt53gt4Pgt4rgtq3gt5Rf4LeD4LeQ4La04LeK4Lat4LeQ4La44LeK4La24La74LeKX+C2lOC2muC3iuC2reC3neC2tuC2u+C3il/gtrHgt5zgt4Dgt5Dgtrjgt4rgtrbgtrvgt4pf4Lav4LeZ4LeD4LeQ4La44LeK4La24La74LeKJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ+C2ouC2sV/gtrTgt5ngtrZf4La44LeP4La74LeKX+C2heC2tOC3il/gtrjgt5Dgtrrgt5Jf4Lai4LeW4Lax4LeSX+C2ouC3luC2veC3kl/gtoXgtpzgt51f4LeD4LeQ4La04LeKX+C2lOC2muC3il/gtrHgt5zgt4Dgt5Bf4Lav4LeZ4LeD4LeQJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+C2ieC2u+C3kuC2r+C3j1/gt4PgtrPgt5Tgtq/gt49f4LaF4Laf4LeE4La74LeU4LeA4LeP4Lav4LePX+C2tuC2r+C3j+C2r+C3j1/gtrbgt4rigI3gtrvgt4Tgt4Pgt4rgtrTgtq3gt5LgtrHgt4rgtq/gt49f4LeD4LeS4Laa4LeU4La74LeP4Lav4LePX+C3g+C3meC2seC3g+C3lOC2u+C3j+C2r+C3jycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+C2ieC2u+C3kl/gt4PgtrPgt5Rf4LaF4LafX+C2tuC2r+C3j1/gtrbgt4rigI3gtrvgt4Rf4LeD4LeS4Laa4LeUX+C3g+C3meC2sScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgtolf4LeDX+C2hV/gtrZf4La24LeK4oCN4La7X+C3g+C3kl/gt4Pgt5knLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ2EgaDptbScsXG4gICAgTFRTOiAnYSBoOm1tOnNzJyxcbiAgICBMOiAnWVlZWS9NTS9ERCcsXG4gICAgTEw6ICdZWVlZIE1NTU0gRCcsXG4gICAgTExMOiAnWVlZWSBNTU1NIEQsIGEgaDptbScsXG4gICAgTExMTDogJ1lZWVkgTU1NTSBEIFvgt4Dgt5DgtrHgt5JdIGRkZGQsIGEgaDptbTpzcydcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+C2heC2r10gTFRb4LanXScsXG4gICAgbmV4dERheTogJ1vgt4Tgt5ngtqddIExUW+C2p10nLFxuICAgIG5leHRXZWVrOiAnZGRkZCBMVFvgtqddJyxcbiAgICBsYXN0RGF5OiAnW+C2iuC2uuC3ml0gTFRb4LanXScsXG4gICAgbGFzdFdlZWs6ICdb4La04LeD4LeU4Lac4LeS4La6XSBkZGRkIExUW+C2p10nLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPgtprgt5LgtrHgt4onLFxuICAgIHBhc3Q6ICclc+C2muC2pyDgtrTgt5ngtrsnLFxuICAgIHM6ICfgtq3gtq3gt4rgtrTgtrsg4Laa4LeS4LeE4LeS4La04La6JyxcbiAgICBzczogJ+C2reC2reC3iuC2tOC2uyAlZCcsXG4gICAgbTogJ+C2uOC3kuC2seC3kuC2reC3iuC2reC3lOC3gCcsXG4gICAgbW06ICfgtrjgt5LgtrHgt5Lgtq3gt4rgtq3gt5QgJWQnLFxuICAgIGg6ICfgtrTgt5DgtronLFxuICAgIGhoOiAn4La04LeQ4La6ICVkJyxcbiAgICBkOiAn4Lav4LeS4Lax4La6JyxcbiAgICBkZDogJ+C2r+C3kuC2sSAlZCcsXG4gICAgTTogJ+C2uOC3j+C3g+C2uicsXG4gICAgTU06ICfgtrjgt4/gt4MgJWQnLFxuICAgIHk6ICfgt4Dgt4PgtrsnLFxuICAgIHl5OiAn4LeA4LeD4La7ICVkJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0g4LeA4LeQ4Lax4LeSLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVyICsgJyDgt4Dgt5DgtrHgt5InO1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv4La04LeZ4La7IOC3gOC2u+C3lHzgtrTgt4Pgt4og4LeA4La74LeUfOC2tOC3mS7gt4B84La0LuC3gC4vLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSAn4La0LuC3gC4nIHx8IGlucHV0ID09PSAn4La04LeD4LeKIOC3gOC2u+C3lCc7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA+IDExKSB7XG4gICAgICByZXR1cm4gaXNMb3dlciA/ICfgtrQu4LeALicgOiAn4La04LeD4LeKIOC3gOC2u+C3lCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ+C2tOC3mS7gt4AuJyA6ICfgtrTgt5ngtrsg4LeA4La74LeUJztcbiAgICB9XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBtb250aHMgPSAnamFudcOhcl9mZWJydcOhcl9tYXJlY19hcHLDrWxfbcOhal9qw7puX2rDumxfYXVndXN0X3NlcHRlbWJlcl9va3TDs2Jlcl9ub3ZlbWJlcl9kZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgICBtb250aHNTaG9ydCA9ICdqYW5fZmViX21hcl9hcHJfbcOhal9qw7puX2rDumxfYXVnX3NlcF9va3Rfbm92X2RlYycuc3BsaXQoJ18nKTtcblxuZnVuY3Rpb24gcGx1cmFsKG4pIHtcbiAgcmV0dXJuIG4gPiAxICYmIG4gPCA1O1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciByZXN1bHQgPSBudW1iZXIgKyAnICc7XG5cbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ3DDoXIgc2Vrw7puZCcgOiAncMOhciBzZWt1bmRhbWknO1xuXG4gICAgY2FzZSAnc3MnOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdzZWt1bmR5JyA6ICdzZWvDum5kJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ3Nla3VuZGFtaSc7XG4gICAgICB9XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ21pbsO6dGEnIDogaXNGdXR1cmUgPyAnbWluw7p0dScgOiAnbWluw7p0b3UnO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdtaW7DunR5JyA6ICdtaW7DunQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnbWluw7p0YW1pJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAnaG9kaW5hJyA6IGlzRnV0dXJlID8gJ2hvZGludScgOiAnaG9kaW5vdSc7XG5cbiAgICBjYXNlICdoaCc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ2hvZGlueScgOiAnaG9kw61uJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ2hvZGluYW1pJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnZGXFiCcgOiAnZMWIb20nO1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgaWYgKHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIChwbHVyYWwobnVtYmVyKSA/ICdkbmknIDogJ2Ruw60nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyAnZMWIYW1pJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ00nOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbWVzaWFjJyA6ICdtZXNpYWNvbSc7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ21lc2lhY2UnIDogJ21lc2lhY292Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ21lc2lhY21pJztcbiAgICAgIH1cblxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAncm9rJyA6ICdyb2tvbSc7XG5cbiAgICBjYXNlICd5eSc6XG4gICAgICBpZiAod2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHBsdXJhbChudW1iZXIpID8gJ3Jva3knIDogJ3Jva292Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ3Jva21pJztcbiAgICAgIH1cblxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NrJywge1xuICBtb250aHM6IG1vbnRocyxcbiAgbW9udGhzU2hvcnQ6IG1vbnRoc1Nob3J0LFxuICB3ZWVrZGF5czogJ25lZGXEvmFfcG9uZGVsb2tfdXRvcm9rX3N0cmVkYV/FoXR2cnRva19waWF0b2tfc29ib3RhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnbmVfcG9fdXRfc3RfxaF0X3BpX3NvJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ25lX3BvX3V0X3N0X8WhdF9waV9zbycuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRC4gTU1NTSBZWVlZIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkIEQuIE1NTU0gWVlZWSBIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbZG5lcyBvXSBMVCcsXG4gICAgbmV4dERheTogJ1t6YWp0cmEgb10gTFQnLFxuICAgIG5leHRXZWVrOiBmdW5jdGlvbiBuZXh0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICdbdiBuZWRlxL51IG9dIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gJ1t2XSBkZGRkIFtvXSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW3Ygc3RyZWR1IG9dIExUJztcblxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuICdbdm8gxaF0dnJ0b2sgb10gTFQnO1xuXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gJ1t2IHBpYXRvayBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3Ygc29ib3R1IG9dIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdbdsSNZXJhIG9dIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW21pbnVsw7ogbmVkZcS+dSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgcmV0dXJuICdbbWludWzDvV0gZGRkZCBbb10gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1ttaW51bMO6IHN0cmVkdSBvXSBMVCc7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuICdbbWludWzDvV0gZGRkZCBbb10gTFQnO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gJ1ttaW51bMO6IHNvYm90dSBvXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ3phICVzJyxcbiAgICBwYXN0OiAncHJlZCAlcycsXG4gICAgczogdHJhbnNsYXRlLFxuICAgIHNzOiB0cmFuc2xhdGUsXG4gICAgbTogdHJhbnNsYXRlLFxuICAgIG1tOiB0cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRlLFxuICAgIGhoOiB0cmFuc2xhdGUsXG4gICAgZDogdHJhbnNsYXRlLFxuICAgIGRkOiB0cmFuc2xhdGUsXG4gICAgTTogdHJhbnNsYXRlLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogdHJhbnNsYXRlLFxuICAgIHl5OiB0cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSwgaXNGdXR1cmUpIHtcbiAgdmFyIHJlc3VsdCA9IG51bWJlciArICcgJztcblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbmVrYWogc2VrdW5kJyA6ICduZWthaiBzZWt1bmRhbWknO1xuXG4gICAgY2FzZSAnc3MnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCA/ICdzZWt1bmRvJyA6ICdzZWt1bmRpJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ3Nla3VuZGknIDogJ3Nla3VuZGFoJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgNSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdzZWt1bmRlJyA6ICdzZWt1bmRhaCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gJ3Nla3VuZCc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2VuYSBtaW51dGEnIDogJ2VubyBtaW51dG8nO1xuXG4gICAgY2FzZSAnbW0nOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCA/ICdtaW51dGEnIDogJ21pbnV0byc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtaW51dGknIDogJ21pbnV0YW1hJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgNSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdtaW51dGUnIDogJ21pbnV0YW1pJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ21pbnV0JyA6ICdtaW51dGFtaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gJ2VuYSB1cmEnIDogJ2VubyB1cm8nO1xuXG4gICAgY2FzZSAnaGgnOlxuICAgICAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCA/ICd1cmEnIDogJ3Vybyc7XG4gICAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMikge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICd1cmknIDogJ3VyYW1hJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgNSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICd1cmUnIDogJ3VyYW1pJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ3VyJyA6ICd1cmFtaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2VuIGRhbicgOiAnZW5pbSBkbmVtJztcblxuICAgIGNhc2UgJ2RkJzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnZGFuJyA6ICdkbmVtJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2RuaScgOiAnZG5ldm9tYSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdkbmknIDogJ2RuZXZpJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIGNhc2UgJ00nOlxuICAgICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnZW4gbWVzZWMnIDogJ2VuaW0gbWVzZWNlbSc7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ21lc2VjJyA6ICdtZXNlY2VtJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID09PSAyKSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ21lc2VjYScgOiAnbWVzZWNlbWEnO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPCA1KSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ21lc2VjZScgOiAnbWVzZWNpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ21lc2VjZXYnIDogJ21lc2VjaSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2VubyBsZXRvJyA6ICdlbmltIGxldG9tJztcblxuICAgIGNhc2UgJ3l5JzpcbiAgICAgIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbGV0bycgOiAnbGV0b20nO1xuICAgICAgfSBlbHNlIGlmIChudW1iZXIgPT09IDIpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpdGhvdXRTdWZmaXggfHwgaXNGdXR1cmUgPyAnbGV0aScgOiAnbGV0b21hJztcbiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgNSkge1xuICAgICAgICByZXN1bHQgKz0gd2l0aG91dFN1ZmZpeCB8fCBpc0Z1dHVyZSA/ICdsZXRhJyA6ICdsZXRpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSB3aXRob3V0U3VmZml4IHx8IGlzRnV0dXJlID8gJ2xldCcgOiAnbGV0aSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc2wnLCB7XG4gIG1vbnRoczogJ2phbnVhcl9mZWJydWFyX21hcmVjX2FwcmlsX21hal9qdW5pal9qdWxpal9hdmd1c3Rfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuLl9mZWIuX21hci5fYXByLl9tYWouX2p1bi5fanVsLl9hdmcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1BhcnNlRXhhY3Q6IHRydWUsXG4gIHdlZWtkYXlzOiAnbmVkZWxqYV9wb25lZGVsamVrX3RvcmVrX3NyZWRhX8SNZXRydGVrX3BldGVrX3NvYm90YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ25lZC5fcG9uLl90b3IuX3NyZS5fxI1ldC5fcGV0Ll9zb2IuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ25lX3BvX3RvX3NyX8SNZV9wZV9zbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0RELiBNTS4gWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWSBIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tkYW5lcyBvYl0gTFQnLFxuICAgIG5leHREYXk6ICdbanV0cmkgb2JdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3ZdIFtuZWRlbGpvXSBbb2JdIExUJztcblxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuICdbdl0gW3NyZWRvXSBbb2JdIExUJztcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuICdbdl0gW3NvYm90b10gW29iXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3ZdIGRkZGQgW29iXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW3bEjWVyYWogb2JdIExUJyxcbiAgICBsYXN0V2VlazogZnVuY3Rpb24gbGFzdFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3ByZWrFoW5qb10gW25lZGVsam9dIFtvYl0gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1twcmVqxaFuam9dIFtzcmVkb10gW29iXSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3ByZWrFoW5qb10gW3NvYm90b10gW29iXSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3ByZWrFoW5qaV0gZGRkZCBbb2JdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnxI1leiAlcycsXG4gICAgcGFzdDogJ3ByZWQgJXMnLFxuICAgIHM6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgc3M6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBtbTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGhoOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgZGQ6IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBNTTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5OiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHl5OiBwcm9jZXNzUmVsYXRpdmVUaW1lXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdzcScsIHtcbiAgbW9udGhzOiAnSmFuYXJfU2hrdXJ0X01hcnNfUHJpbGxfTWFqX1FlcnNob3JfS29ycmlrX0d1c2h0X1NodGF0b3JfVGV0b3JfTsOrbnRvcl9EaGpldG9yJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9TaGtfTWFyX1ByaV9NYWpfUWVyX0tvcl9HdXNfU2h0X1RldF9Ow6tuX0Roaicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdFIERpZWxfRSBIw6tuw6tfRSBNYXJ0w6tfRSBNw6tya3Vyw6tfRSBFbmp0ZV9FIFByZW10ZV9FIFNodHVuw6snLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdEaWVfSMOrbl9NYXJfTcOrcl9FbmpfUHJlX1NodCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdEX0hfTWFfTcOrX0VfUF9TaCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBtZXJpZGllbVBhcnNlOiAvUER8TUQvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LmNoYXJBdCgwKSA9PT0gJ00nO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICByZXR1cm4gaG91cnMgPCAxMiA/ICdQRCcgOiAnTUQnO1xuICB9LFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW1NvdCBuw6tdIExUJyxcbiAgICBuZXh0RGF5OiAnW05lc8OrciBuw6tdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW27Dq10gTFQnLFxuICAgIGxhc3REYXk6ICdbRGplIG7Dq10gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBbZSBrYWx1YXIgbsOrXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICduw6sgJXMnLFxuICAgIHBhc3Q6ICclcyBtw6sgcGFyw6snLFxuICAgIHM6ICdkaXNhIHNla29uZGEnLFxuICAgIHNzOiAnJWQgc2Vrb25kYScsXG4gICAgbTogJ25qw6sgbWludXTDqycsXG4gICAgbW06ICclZCBtaW51dGEnLFxuICAgIGg6ICduasOrIG9yw6snLFxuICAgIGhoOiAnJWQgb3LDqycsXG4gICAgZDogJ25qw6sgZGl0w6snLFxuICAgIGRkOiAnJWQgZGl0w6snLFxuICAgIE06ICduasOrIG11YWonLFxuICAgIE1NOiAnJWQgbXVhaicsXG4gICAgeTogJ25qw6sgdml0JyxcbiAgICB5eTogJyVkIHZpdGUnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgdHJhbnNsYXRvciA9IHtcbiAgd29yZHM6IHtcbiAgICBzczogWyfRgdC10LrRg9C90LTQsCcsICfRgdC10LrRg9C90LTQtScsICfRgdC10LrRg9C90LTQuCddLFxuICAgIG06IFsn0ZjQtdC00LDQvSDQvNC40L3Rg9GCJywgJ9GY0LXQtNC90LUg0LzQuNC90YPRgtC1J10sXG4gICAgbW06IFsn0LzQuNC90YPRgicsICfQvNC40L3Rg9GC0LUnLCAn0LzQuNC90YPRgtCwJ10sXG4gICAgaDogWyfRmNC10LTQsNC9INGB0LDRgicsICfRmNC10LTQvdC+0LMg0YHQsNGC0LAnXSxcbiAgICBoaDogWyfRgdCw0YInLCAn0YHQsNGC0LAnLCAn0YHQsNGC0LgnXSxcbiAgICBkZDogWyfQtNCw0L0nLCAn0LTQsNC90LAnLCAn0LTQsNC90LAnXSxcbiAgICBNTTogWyfQvNC10YHQtdGGJywgJ9C80LXRgdC10YbQsCcsICfQvNC10YHQtdGG0LgnXSxcbiAgICB5eTogWyfQs9C+0LTQuNC90LAnLCAn0LPQvtC00LjQvdC1JywgJ9Cz0L7QtNC40L3QsCddXG4gIH0sXG4gIGNvcnJlY3RHcmFtbWF0aWNhbENhc2U6IGZ1bmN0aW9uIGNvcnJlY3RHcmFtbWF0aWNhbENhc2UobnVtYmVyLCB3b3JkS2V5KSB7XG4gICAgcmV0dXJuIG51bWJlciA9PT0gMSA/IHdvcmRLZXlbMF0gOiBudW1iZXIgPj0gMiAmJiBudW1iZXIgPD0gNCA/IHdvcmRLZXlbMV0gOiB3b3JkS2V5WzJdO1xuICB9LFxuICB0cmFuc2xhdGU6IGZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsIHdpdGhvdXRTdWZmaXgsIGtleSkge1xuICAgIHZhciB3b3JkS2V5ID0gdHJhbnNsYXRvci53b3Jkc1trZXldO1xuXG4gICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB3aXRob3V0U3VmZml4ID8gd29yZEtleVswXSA6IHdvcmRLZXlbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAnICcgKyB0cmFuc2xhdG9yLmNvcnJlY3RHcmFtbWF0aWNhbENhc2UobnVtYmVyLCB3b3JkS2V5KTtcbiAgICB9XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCdzci1jeXJsJywge1xuICBtb250aHM6ICfRmNCw0L3Rg9Cw0YBf0YTQtdCx0YDRg9Cw0YBf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LPRg9GB0YJf0YHQtdC/0YLQtdC80LHQsNGAX9C+0LrRgtC+0LHQsNGAX9C90L7QstC10LzQsdCw0YBf0LTQtdGG0LXQvNCx0LDRgCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfRmNCw0L0uX9GE0LXQsS5f0LzQsNGALl/QsNC/0YAuX9C80LDRmF/RmNGD0L1f0ZjRg9C7X9Cw0LLQsy5f0YHQtdC/Ll/QvtC60YIuX9C90L7Qsi5f0LTQtdGGLicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfQvdC10LTQtdGZ0LBf0L/QvtC90LXQtNC10ZnQsNC6X9GD0YLQvtGA0LDQul/RgdGA0LXQtNCwX9GH0LXRgtCy0YDRgtCw0Lpf0L/QtdGC0LDQul/RgdGD0LHQvtGC0LAnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfQvdC10LQuX9C/0L7QvS5f0YPRgtC+Ll/RgdGA0LUuX9GH0LXRgi5f0L/QtdGCLl/RgdGD0LEuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ9C90LVf0L/Qvl/Rg9GCX9GB0YBf0YfQtV/Qv9C1X9GB0YMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0g6bW0nLFxuICAgIExUUzogJ0g6bW06c3MnLFxuICAgIEw6ICdELiBNLiBZWVlZLicsXG4gICAgTEw6ICdELiBNTU1NIFlZWVkuJyxcbiAgICBMTEw6ICdELiBNTU1NIFlZWVkuIEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBELiBNTU1NIFlZWVkuIEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQtNCw0L3QsNGBINGDXSBMVCcsXG4gICAgbmV4dERheTogJ1vRgdGD0YLRgNCwINGDXSBMVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmRheSgpKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJ1vRg10gW9C90LXQtNC10ZnRg10gW9GDXSBMVCc7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiAnW9GDXSBb0YHRgNC10LTRg10gW9GDXSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW9GDXSBb0YHRg9Cx0L7RgtGDXSBb0YNdIExUJztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuICdb0YNdIGRkZGQgW9GDXSBMVCc7XG4gICAgICB9XG4gICAgfSxcbiAgICBsYXN0RGF5OiAnW9GY0YPRh9C1INGDXSBMVCcsXG4gICAgbGFzdFdlZWs6IGZ1bmN0aW9uIGxhc3RXZWVrKCkge1xuICAgICAgdmFyIGxhc3RXZWVrRGF5cyA9IFsnW9C/0YDQvtGI0LvQtV0gW9C90LXQtNC10ZnQtV0gW9GDXSBMVCcsICdb0L/RgNC+0YjQu9C+0LNdIFvQv9C+0L3QtdC00LXRmdC60LBdIFvRg10gTFQnLCAnW9C/0YDQvtGI0LvQvtCzXSBb0YPRgtC+0YDQutCwXSBb0YNdIExUJywgJ1vQv9GA0L7RiNC70LVdIFvRgdGA0LXQtNC1XSBb0YNdIExUJywgJ1vQv9GA0L7RiNC70L7Qs10gW9GH0LXRgtCy0YDRgtC60LBdIFvRg10gTFQnLCAnW9C/0YDQvtGI0LvQvtCzXSBb0L/QtdGC0LrQsF0gW9GDXSBMVCcsICdb0L/RgNC+0YjQu9C1XSBb0YHRg9Cx0L7RgtC1XSBb0YNdIExUJ107XG4gICAgICByZXR1cm4gbGFzdFdlZWtEYXlzW3RoaXMuZGF5KCldO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfQt9CwICVzJyxcbiAgICBwYXN0OiAn0L/RgNC1ICVzJyxcbiAgICBzOiAn0L3QtdC60L7Qu9C40LrQviDRgdC10LrRg9C90LTQuCcsXG4gICAgc3M6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIG06IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIG1tOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBoOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBoaDogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgZDogJ9C00LDQvScsXG4gICAgZGQ6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIE06ICfQvNC10YHQtdGGJyxcbiAgICBNTTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgeTogJ9Cz0L7QtNC40L3RgycsXG4gICAgeXk6IHRyYW5zbGF0b3IudHJhbnNsYXRlXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfVxcLi8sXG4gIG9yZGluYWw6ICclZC4nLFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgdHJhbnNsYXRvciA9IHtcbiAgd29yZHM6IHtcbiAgICBzczogWydzZWt1bmRhJywgJ3Nla3VuZGUnLCAnc2VrdW5kaSddLFxuICAgIG06IFsnamVkYW4gbWludXQnLCAnamVkbmUgbWludXRlJ10sXG4gICAgbW06IFsnbWludXQnLCAnbWludXRlJywgJ21pbnV0YSddLFxuICAgIGg6IFsnamVkYW4gc2F0JywgJ2plZG5vZyBzYXRhJ10sXG4gICAgaGg6IFsnc2F0JywgJ3NhdGEnLCAnc2F0aSddLFxuICAgIGRkOiBbJ2RhbicsICdkYW5hJywgJ2RhbmEnXSxcbiAgICBNTTogWydtZXNlYycsICdtZXNlY2EnLCAnbWVzZWNpJ10sXG4gICAgeXk6IFsnZ29kaW5hJywgJ2dvZGluZScsICdnb2RpbmEnXVxuICB9LFxuICBjb3JyZWN0R3JhbW1hdGljYWxDYXNlOiBmdW5jdGlvbiBjb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlciwgd29yZEtleSkge1xuICAgIHJldHVybiBudW1iZXIgPT09IDEgPyB3b3JkS2V5WzBdIDogbnVtYmVyID49IDIgJiYgbnVtYmVyIDw9IDQgPyB3b3JkS2V5WzFdIDogd29yZEtleVsyXTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXkpIHtcbiAgICB2YXIgd29yZEtleSA9IHRyYW5zbGF0b3Iud29yZHNba2V5XTtcblxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/IHdvcmRLZXlbMF0gOiB3b3JkS2V5WzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJyAnICsgdHJhbnNsYXRvci5jb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlciwgd29yZEtleSk7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc3InLCB7XG4gIG1vbnRoczogJ2phbnVhcl9mZWJydWFyX21hcnRfYXByaWxfbWFqX2p1bl9qdWxfYXZndXN0X3NlcHRlbWJhcl9va3RvYmFyX25vdmVtYmFyX2RlY2VtYmFyJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ2phbi5fZmViLl9tYXIuX2Fwci5fbWFqX2p1bl9qdWxfYXZnLl9zZXAuX29rdC5fbm92Ll9kZWMuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ25lZGVsamFfcG9uZWRlbGpha191dG9yYWtfc3JlZGFfxI1ldHZydGFrX3BldGFrX3N1Ym90YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ25lZC5fcG9uLl91dG8uX3NyZS5fxI1ldC5fcGV0Ll9zdWIuJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ25lX3BvX3V0X3NyX8SNZV9wZV9zdScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0QuIE0uIFlZWVkuJyxcbiAgICBMTDogJ0QuIE1NTU0gWVlZWS4nLFxuICAgIExMTDogJ0QuIE1NTU0gWVlZWS4gSDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQuIE1NTU0gWVlZWS4gSDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW2RhbmFzIHVdIExUJyxcbiAgICBuZXh0RGF5OiAnW3N1dHJhIHVdIExUJyxcbiAgICBuZXh0V2VlazogZnVuY3Rpb24gbmV4dFdlZWsoKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGF5KCkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnW3VdIFtuZWRlbGp1XSBbdV0gTFQnO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gJ1t1XSBbc3JlZHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiAnW3VdIFtzdWJvdHVdIFt1XSBMVCc7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiAnW3VdIGRkZGQgW3VdIExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhc3REYXk6ICdbanXEjWUgdV0gTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHZhciBsYXN0V2Vla0RheXMgPSBbJ1twcm/FoWxlXSBbbmVkZWxqZV0gW3VdIExUJywgJ1twcm/FoWxvZ10gW3BvbmVkZWxqa2FdIFt1XSBMVCcsICdbcHJvxaFsb2ddIFt1dG9ya2FdIFt1XSBMVCcsICdbcHJvxaFsZV0gW3NyZWRlXSBbdV0gTFQnLCAnW3Byb8WhbG9nXSBbxI1ldHZydGthXSBbdV0gTFQnLCAnW3Byb8WhbG9nXSBbcGV0a2FdIFt1XSBMVCcsICdbcHJvxaFsZV0gW3N1Ym90ZV0gW3VdIExUJ107XG4gICAgICByZXR1cm4gbGFzdFdlZWtEYXlzW3RoaXMuZGF5KCldO1xuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICd6YSAlcycsXG4gICAgcGFzdDogJ3ByZSAlcycsXG4gICAgczogJ25la29saWtvIHNla3VuZGknLFxuICAgIHNzOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBtOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBtbTogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgaDogdHJhbnNsYXRvci50cmFuc2xhdGUsXG4gICAgaGg6IHRyYW5zbGF0b3IudHJhbnNsYXRlLFxuICAgIGQ6ICdkYW4nLFxuICAgIGRkOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICBNOiAnbWVzZWMnLFxuICAgIE1NOiB0cmFuc2xhdG9yLnRyYW5zbGF0ZSxcbiAgICB5OiAnZ29kaW51JyxcbiAgICB5eTogdHJhbnNsYXRvci50cmFuc2xhdGVcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9XFwuLyxcbiAgb3JkaW5hbDogJyVkLicsXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3NzJywge1xuICBtb250aHM6IFwiQmhpbWJpZHZ3YW5lX0luZGxvdmFuYV9JbmRsb3YnbGVua2h1bHVfTWFiYXNhX0lua2h3ZWtod2V0aV9JbmhsYWJhX0tob2x3YW5lX0luZ2NpX0lueW9uaV9JbXBoYWxhX0x3ZXRpX0luZ29uZ29uaVwiLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnQmhpX0luYV9JbnVfTWFiX0lua19JbmhfS2hvX0lnY19JbnlfSW1wX0x3ZV9JZ28nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnTGlzb250Zm9fVW1zb21idWx1a29fTGVzaWJpbGlfTGVzaXRzYXRmdV9MZXNpbmVfTGVzaWhsYW51X1VtZ2NpYmVsbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0xpc19VbWJfTHNiX0xlc19Mc2lfTHNoX1VtZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdMaV9Vc19MYl9MdF9Mc19MaF9VZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tOYW11aGxhIG5nYV0gTFQnLFxuICAgIG5leHREYXk6ICdbS3VzYXNhIG5nYV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbbmdhXSBMVCcsXG4gICAgbGFzdERheTogJ1tJdG9sbyBuZ2FdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW2xlbGlwaGVsaWxlXSBbbmdhXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICduZ2EgJXMnLFxuICAgIHBhc3Q6ICd3ZW50ZWthIG5nYSAlcycsXG4gICAgczogJ2VtaXp1endhbmEgbG9tY2FuZScsXG4gICAgc3M6ICclZCBtenV6d2FuYScsXG4gICAgbTogJ3VtenV6dScsXG4gICAgbW06ICclZCBlbWl6dXp1JyxcbiAgICBoOiAnbGlob3JhJyxcbiAgICBoaDogJyVkIGVtYWhvcmEnLFxuICAgIGQ6ICdsaWxhbmdhJyxcbiAgICBkZDogJyVkIGVtYWxhbmdhJyxcbiAgICBNOiAnaW55YW5nYScsXG4gICAgTU06ICclZCB0aW55YW5nYScsXG4gICAgeTogJ3Vtbnlha2EnLFxuICAgIHl5OiAnJWQgaW1pbnlha2EnXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC9la3VzZW5pfGVtaW5pfGVudHNhbWJhbWF8ZWJ1c3VrdS8sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgIGlmIChob3VycyA8IDExKSB7XG4gICAgICByZXR1cm4gJ2VrdXNlbmknO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPCAxNSkge1xuICAgICAgcmV0dXJuICdlbWluaSc7XG4gICAgfSBlbHNlIGlmIChob3VycyA8IDE5KSB7XG4gICAgICByZXR1cm4gJ2VudHNhbWJhbWEnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2VidXN1a3UnO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ2VrdXNlbmknKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAnZW1pbmknKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ2VudHNhbWJhbWEnIHx8IG1lcmlkaWVtID09PSAnZWJ1c3VrdScpIHtcbiAgICAgIGlmIChob3VyID09PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LyxcbiAgb3JkaW5hbDogJyVkJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc3YnLCB7XG4gIG1vbnRoczogJ2phbnVhcmlfZmVicnVhcmlfbWFyc19hcHJpbF9tYWpfanVuaV9qdWxpX2F1Z3VzdGlfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnc8O2bmRhZ19tw6VuZGFnX3Rpc2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbMO2cmRhZycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ3PDtm5fbcOlbl90aXNfb25zX3Rvcl9mcmVfbMO2cicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdzw7ZfbcOlX3RpX29uX3RvX2ZyX2zDticuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIFtrbC5dIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBba2wuXSBISDptbScsXG4gICAgbGxsOiAnRCBNTU0gWVlZWSBISDptbScsXG4gICAgbGxsbDogJ2RkZCBEIE1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbSWRhZ10gTFQnLFxuICAgIG5leHREYXk6ICdbSW1vcmdvbl0gTFQnLFxuICAgIGxhc3REYXk6ICdbSWfDpXJdIExUJyxcbiAgICBuZXh0V2VlazogJ1tQw6VdIGRkZGQgTFQnLFxuICAgIGxhc3RXZWVrOiAnW0ldIGRkZGRbc10gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnb20gJXMnLFxuICAgIHBhc3Q6ICdmw7ZyICVzIHNlZGFuJyxcbiAgICBzOiAnbsOlZ3JhIHNla3VuZGVyJyxcbiAgICBzczogJyVkIHNla3VuZGVyJyxcbiAgICBtOiAnZW4gbWludXQnLFxuICAgIG1tOiAnJWQgbWludXRlcicsXG4gICAgaDogJ2VuIHRpbW1lJyxcbiAgICBoaDogJyVkIHRpbW1hcicsXG4gICAgZDogJ2VuIGRhZycsXG4gICAgZGQ6ICclZCBkYWdhcicsXG4gICAgTTogJ2VuIG3DpW5hZCcsXG4gICAgTU06ICclZCBtw6VuYWRlcicsXG4gICAgeTogJ2V0dCDDpXInLFxuICAgIHl5OiAnJWQgw6VyJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oXFw6ZXxcXDphKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgb3V0cHV0ID0gfn4obnVtYmVyICUgMTAwIC8gMTApID09PSAxID8gJzplJyA6IGIgPT09IDEgPyAnOmEnIDogYiA9PT0gMiA/ICc6YScgOiBiID09PSAzID8gJzplJyA6ICc6ZSc7XG4gICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnc3cnLCB7XG4gIG1vbnRoczogJ0phbnVhcmlfRmVicnVhcmlfTWFjaGlfQXByaWxpX01laV9KdW5pX0p1bGFpX0Fnb3N0aV9TZXB0ZW1iYV9Pa3RvYmFfTm92ZW1iYV9EZXNlbWJhJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0phbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9BZ29fU2VwX09rdF9Ob3ZfRGVzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0p1bWFwaWxpX0p1bWF0YXR1X0p1bWFubmVfSnVtYXRhbm9fQWxoYW1pc2lfSWp1bWFhX0p1bWFtb3NpJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnSnBsX0p0YXRfSm5uZV9KdGFuX0FsaF9Jam1fSm1vcycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdKMl9KM19KNF9KNV9BbF9Jal9KMScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaGg6bW0gQScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbbGVvIHNhYV0gTFQnLFxuICAgIG5leHREYXk6ICdba2VzaG8gc2FhXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbd2lraSBpamF5b10gZGRkZCBbc2FhdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbamFuYV0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW3dpa2kgaWxpeW9waXRhXSBkZGRkIFtzYWF0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBiYWFkYXllJyxcbiAgICBwYXN0OiAndG9rZWEgJXMnLFxuICAgIHM6ICdoaXZpIHB1bmRlJyxcbiAgICBzczogJ3Nla3VuZGUgJWQnLFxuICAgIG06ICdkYWtpa2EgbW9qYScsXG4gICAgbW06ICdkYWtpa2EgJWQnLFxuICAgIGg6ICdzYWEgbGltb2phJyxcbiAgICBoaDogJ21hc2FhICVkJyxcbiAgICBkOiAnc2lrdSBtb2phJyxcbiAgICBkZDogJ3Npa3UgJWQnLFxuICAgIE06ICdtd2V6aSBtbW9qYScsXG4gICAgTU06ICdtaWV6aSAlZCcsXG4gICAgeTogJ213YWthIG1tb2phJyxcbiAgICB5eTogJ21pYWthICVkJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgc3ltYm9sTWFwID0ge1xuICAxOiAn4K+nJyxcbiAgMjogJ+CvqCcsXG4gIDM6ICfgr6knLFxuICA0OiAn4K+qJyxcbiAgNTogJ+CvqycsXG4gIDY6ICfgr6wnLFxuICA3OiAn4K+tJyxcbiAgODogJ+CvricsXG4gIDk6ICfgr68nLFxuICAwOiAn4K+mJ1xufSxcbiAgICBudW1iZXJNYXAgPSB7XG4gICfgr6cnOiAnMScsXG4gICfgr6gnOiAnMicsXG4gICfgr6knOiAnMycsXG4gICfgr6onOiAnNCcsXG4gICfgr6snOiAnNScsXG4gICfgr6wnOiAnNicsXG4gICfgr60nOiAnNycsXG4gICfgr64nOiAnOCcsXG4gICfgr68nOiAnOScsXG4gICfgr6YnOiAnMCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0YScsIHtcbiAgbW9udGhzOiAn4K6c4K6p4K614K6w4K6/X+CuquCuv+CuquCvjeCusOCuteCusOCuv1/grq7grr7grrDgr43grprgr41f4K6P4K6q4K+N4K6w4K6y4K+NX+CuruCvh1/grpzgr4Lgrqngr41f4K6c4K+C4K6y4K+IX+CuhuCuleCuuOCvjeCun+CvjV/grprgr4bgrqrgr43grp/gr4bgrq7gr43grqrgrrDgr41f4K6F4K6V4K+N4K6f4K+H4K6+4K6q4K6w4K+NX+CuqOCuteCuruCvjeCuquCusOCvjV/grp/grr/grprgrq7gr43grqrgrrDgr40nLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4K6c4K6p4K614K6w4K6/X+CuquCuv+CuquCvjeCusOCuteCusOCuv1/grq7grr7grrDgr43grprgr41f4K6P4K6q4K+N4K6w4K6y4K+NX+CuruCvh1/grpzgr4Lgrqngr41f4K6c4K+C4K6y4K+IX+CuhuCuleCuuOCvjeCun+CvjV/grprgr4bgrqrgr43grp/gr4bgrq7gr43grqrgrrDgr41f4K6F4K6V4K+N4K6f4K+H4K6+4K6q4K6w4K+NX+CuqOCuteCuruCvjeCuquCusOCvjV/grp/grr/grprgrq7gr43grqrgrrDgr40nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4K6e4K6+4K6v4K6/4K6x4K+N4K6x4K+B4K6V4K+N4K6V4K6/4K604K6u4K+IX+CupOCuv+CumeCvjeCuleCun+CvjeCuleCuv+CutOCuruCviF/grprgr4bgrrXgr43grrXgrr7grq/gr43grpXgrr/grrTgrq7gr4hf4K6q4K+B4K6k4K6p4K+N4K6V4K6/4K604K6u4K+IX+CuteCuv+Cur+CuvuCutOCuleCvjeCuleCuv+CutOCuruCviF/grrXgr4bgrrPgr43grrPgrr/grpXgr43grpXgrr/grrTgrq7gr4hf4K6a4K6p4K6/4K6V4K+N4K6V4K6/4K604K6u4K+IJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4K6e4K6+4K6v4K6/4K6x4K+BX+CupOCuv+CumeCvjeCuleCus+CvjV/grprgr4bgrrXgr43grrXgrr7grq/gr41f4K6q4K+B4K6k4K6p4K+NX+CuteCuv+Cur+CuvuCutOCuqeCvjV/grrXgr4bgrrPgr43grrPgrr9f4K6a4K6p4K6/Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+CunuCuvl/grqTgrr9f4K6a4K+GX+CuquCvgV/grrXgrr9f4K614K+GX+Cumicuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZLCBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+Cuh+CuqeCvjeCuseCvgV0gTFQnLFxuICAgIG5leHREYXk6ICdb4K6o4K6+4K6z4K+IXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkLCBMVCcsXG4gICAgbGFzdERheTogJ1vgrqjgr4fgrrHgr43grrHgr4FdIExUJyxcbiAgICBsYXN0V2VlazogJ1vgrpXgrp/grqjgr43grqQg4K614K6+4K6w4K6u4K+NXSBkZGRkLCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDgrofgrrLgr40nLFxuICAgIHBhc3Q6ICclcyDgrq7gr4Hgrqngr40nLFxuICAgIHM6ICfgrpLgrrDgr4Eg4K6a4K6/4K6yIOCuteCuv+CuqOCuvuCun+Cuv+CuleCus+CvjScsXG4gICAgc3M6ICclZCDgrrXgrr/grqjgrr7grp/grr/grpXgrrPgr40nLFxuICAgIG06ICfgrpLgrrDgr4Eg4K6o4K6/4K6u4K6/4K6f4K6u4K+NJyxcbiAgICBtbTogJyVkIOCuqOCuv+CuruCuv+Cun+CumeCvjeCuleCus+CvjScsXG4gICAgaDogJ+CukuCusOCvgSDgrq7grqPgrr8g4K6o4K+H4K6w4K6u4K+NJyxcbiAgICBoaDogJyVkIOCuruCuo+CuvyDgrqjgr4fgrrDgrq7gr40nLFxuICAgIGQ6ICfgrpLgrrDgr4Eg4K6o4K6+4K6z4K+NJyxcbiAgICBkZDogJyVkIOCuqOCuvuCun+CvjeCuleCus+CvjScsXG4gICAgTTogJ+CukuCusOCvgSDgrq7grr7grqTgrq7gr40nLFxuICAgIE1NOiAnJWQg4K6u4K6+4K6k4K6Z4K+N4K6V4K6z4K+NJyxcbiAgICB5OiAn4K6S4K6w4K+BIOCuteCusOCvgeCun+CuruCvjScsXG4gICAgeXk6ICclZCDgrobgrqPgr43grp/gr4HgrpXgrrPgr40nXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfeCuteCupOCvgS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bWJlciArICfgrrXgrqTgr4EnO1xuICB9LFxuICBwcmVwYXJzZTogZnVuY3Rpb24gcHJlcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4K+n4K+o4K+p4K+q4K+r4K+s4K+t4K+u4K+v4K+mXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBudW1iZXJNYXBbbWF0Y2hdO1xuICAgIH0pO1xuICB9LFxuICBwb3N0Zm9ybWF0OiBmdW5jdGlvbiBwb3N0Zm9ybWF0KHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxkL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHN5bWJvbE1hcFttYXRjaF07XG4gICAgfSk7XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/grq/grr7grq7grq7gr4184K614K+I4K6V4K6x4K+IfOCuleCuvuCusuCviHzgrqjgrqPgr43grqrgrpXgrrLgr4184K6O4K6x4K+N4K6q4K6+4K6f4K+BfOCuruCuvuCusuCviC8sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDIpIHtcbiAgICAgIHJldHVybiAnIOCur+CuvuCuruCuruCvjSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgNikge1xuICAgICAgcmV0dXJuICcg4K614K+I4K6V4K6x4K+IJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxMCkge1xuICAgICAgcmV0dXJuICcg4K6V4K6+4K6y4K+IJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNCkge1xuICAgICAgcmV0dXJuICcg4K6o4K6j4K+N4K6q4K6V4K6y4K+NJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxOCkge1xuICAgICAgcmV0dXJuICcg4K6O4K6x4K+N4K6q4K6+4K6f4K+BJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAyMikge1xuICAgICAgcmV0dXJuICcg4K6u4K6+4K6y4K+IJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcg4K6v4K6+4K6u4K6u4K+NJztcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICfgrq/grr7grq7grq7gr40nKSB7XG4gICAgICByZXR1cm4gaG91ciA8IDIgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgrrXgr4jgrpXgrrHgr4gnIHx8IG1lcmlkaWVtID09PSAn4K6V4K6+4K6y4K+IJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CuqOCuo+CvjeCuquCuleCusuCvjScpIHtcbiAgICAgIHJldHVybiBob3VyID49IDEwID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3RlJywge1xuICBtb250aHM6ICfgsJzgsKjgsLXgsLDgsL9f4LCr4LC/4LCs4LGN4LCw4LC14LCw4LC/X+CwruCwvuCwsOCxjeCwmuCwv1/gsI/gsKrgsY3gsLDgsL/gsLLgsY1f4LCu4LGHX+CwnOCxguCwqOCxjV/gsJzgsYHgsLLgsYhf4LCG4LCX4LC44LGN4LCf4LGBX+CwuOCxhuCwquCxjeCwn+CxhuCwguCwrOCwsOCxjV/gsIXgsJXgsY3gsJ/gsYvgsKzgsLDgsY1f4LCo4LC14LCC4LCs4LCw4LGNX+CwoeCwv+CwuOCxhuCwguCwrOCwsOCxjScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfgsJzgsKguX+Cwq+Cwv+CwrOCxjeCwsC5f4LCu4LC+4LCw4LGN4LCa4LC/X+Cwj+CwquCxjeCwsOCwvy5f4LCu4LGHX+CwnOCxguCwqOCxjV/gsJzgsYHgsLLgsYhf4LCG4LCXLl/gsLjgsYbgsKrgsY0uX+CwheCwleCxjeCwn+Cxiy5f4LCo4LC1Ll/gsKHgsL/gsLjgsYYuJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ+CwhuCwpuCwv+CwteCwvuCwsOCwgl/gsLjgsYvgsK7gsLXgsL7gsLDgsIJf4LCu4LCC4LCX4LCz4LC14LC+4LCw4LCCX+CwrOCxgeCwp+CwteCwvuCwsOCwgl/gsJfgsYHgsLDgsYHgsLXgsL7gsLDgsIJf4LC24LGB4LCV4LGN4LCw4LC14LC+4LCw4LCCX+CwtuCwqOCwv+CwteCwvuCwsOCwgicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+CwhuCwpuCwv1/gsLjgsYvgsK5f4LCu4LCC4LCX4LCzX+CwrOCxgeCwp1/gsJfgsYHgsLDgsYFf4LC24LGB4LCV4LGN4LCwX+CwtuCwqOCwvycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfgsIZf4LC44LGLX+CwruCwgl/gsKzgsYFf4LCX4LGBX+CwtuCxgV/gsLYnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdBIGg6bW0nLFxuICAgIExUUzogJ0EgaDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZLCBBIGg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb4LCo4LGH4LCh4LGBXSBMVCcsXG4gICAgbmV4dERheTogJ1vgsLDgsYfgsKrgsYFdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQsIExUJyxcbiAgICBsYXN0RGF5OiAnW+CwqOCwv+CwqOCxjeCwqF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+Cwl+CwpF0gZGRkZCwgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMg4LCy4LGLJyxcbiAgICBwYXN0OiAnJXMg4LCV4LGN4LCw4LC/4LCk4LCCJyxcbiAgICBzOiAn4LCV4LGK4LCo4LGN4LCo4LC/IOCwleCxjeCwt+Cwo+CwvuCwsuCxgScsXG4gICAgc3M6ICclZCDgsLjgsYbgsJXgsKjgsY3gsLLgsYEnLFxuICAgIG06ICfgsJLgsJUg4LCo4LC/4LCu4LC/4LC34LCCJyxcbiAgICBtbTogJyVkIOCwqOCwv+CwruCwv+Cwt+CwvuCwsuCxgScsXG4gICAgaDogJ+CwkuCwlSDgsJfgsILgsJ8nLFxuICAgIGhoOiAnJWQg4LCX4LCC4LCf4LCy4LGBJyxcbiAgICBkOiAn4LCS4LCVIOCwsOCxi+CwnOCxgScsXG4gICAgZGQ6ICclZCDgsLDgsYvgsJzgsYHgsLLgsYEnLFxuICAgIE06ICfgsJLgsJUg4LCo4LGG4LCyJyxcbiAgICBNTTogJyVkIOCwqOCxhuCwsuCwsuCxgScsXG4gICAgeTogJ+CwkuCwlSDgsLjgsILgsLXgsKTgsY3gsLjgsLDgsIInLFxuICAgIHl5OiAnJWQg4LC44LCC4LC14LCk4LGN4LC44LCw4LC+4LCy4LGBJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn3gsLUvLFxuICBvcmRpbmFsOiAnJWTgsLUnLFxuICBtZXJpZGllbVBhcnNlOiAv4LCw4LC+4LCk4LGN4LCw4LC/fOCwieCwpuCwr+CwgnzgsK7gsKfgsY3gsK/gsL7gsLngsY3gsKjgsIJ84LC44LC+4LCv4LCC4LCk4LGN4LCw4LCCLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+CwsOCwvuCwpOCxjeCwsOCwvycpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CwieCwpuCwr+CwgicpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfgsK7gsKfgsY3gsK/gsL7gsLngsY3gsKjgsIInKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+CwuOCwvuCwr+CwguCwpOCxjeCwsOCwgicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ+CwsOCwvuCwpOCxjeCwsOCwvyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTApIHtcbiAgICAgIHJldHVybiAn4LCJ4LCm4LCv4LCCJztcbiAgICB9IGVsc2UgaWYgKGhvdXIgPCAxNykge1xuICAgICAgcmV0dXJuICfgsK7gsKfgsY3gsK/gsL7gsLngsY3gsKjgsIInO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDIwKSB7XG4gICAgICByZXR1cm4gJ+CwuOCwvuCwr+CwguCwpOCxjeCwsOCwgic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn4LCw4LC+4LCk4LGN4LCw4LC/JztcbiAgICB9XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDAsXG4gICAgZG95OiA2XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3RldCcsIHtcbiAgbW9udGhzOiAnSmFuZWlydV9GZXZlcmVpcnVfTWFyc3VfQWJyaWxfTWFpdV9KdcOxdV9KdWxsdV9BZ3VzdHVfU2V0ZW1icnVfT3V0dWJydV9Ob3ZlbWJydV9EZXplbWJydScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmV2X01hcl9BYnJfTWFpX0p1bl9KdWxfQWdvX1NldF9PdXRfTm92X0Rleicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICdEb21pbmd1X1NlZ3VuZGFfVGVyc2FfS3VhcnRhX0tpbnRhX1Nlc3RhX1NhYmFkdScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0RvbV9TZWdfVGVyc19LdWFfS2ludF9TZXN0X1NhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdEb19TZWdfVGVfS3VfS2lfU2VzX1NhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW09oaW4gaWhhXSBMVCcsXG4gICAgbmV4dERheTogJ1tBYmFuIGloYV0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbaWhhXSBMVCcsXG4gICAgbGFzdERheTogJ1tIb3Jpc2VpayBpaGFdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW3NlbWFuYSBrb3R1a10gW2loYV0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnaWhhICVzJyxcbiAgICBwYXN0OiAnJXMgbGl1YmEnLFxuICAgIHM6ICdzZWd1bmR1IGJhbHVuJyxcbiAgICBzczogJ3NlZ3VuZHUgJWQnLFxuICAgIG06ICdtaW51dHUgaWRhJyxcbiAgICBtbTogJ21pbnV0dSAlZCcsXG4gICAgaDogJ29yYXMgaWRhJyxcbiAgICBoaDogJ29yYXMgJWQnLFxuICAgIGQ6ICdsb3JvbiBpZGEnLFxuICAgIGRkOiAnbG9yb24gJWQnLFxuICAgIE06ICdmdWxhbiBpZGEnLFxuICAgIE1NOiAnZnVsYW4gJWQnLFxuICAgIHk6ICd0aW5hbiBpZGEnLFxuICAgIHl5OiAndGluYW4gJWQnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfShzdHxuZHxyZHx0aCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbnZhciBzdWZmaXhlcyA9IHtcbiAgMDogJy3Rg9C8JyxcbiAgMTogJy3Rg9C8JyxcbiAgMjogJy3RjtC8JyxcbiAgMzogJy3RjtC8JyxcbiAgNDogJy3Rg9C8JyxcbiAgNTogJy3Rg9C8JyxcbiAgNjogJy3Rg9C8JyxcbiAgNzogJy3Rg9C8JyxcbiAgODogJy3Rg9C8JyxcbiAgOTogJy3Rg9C8JyxcbiAgMTA6ICct0YPQvCcsXG4gIDEyOiAnLdGD0LwnLFxuICAxMzogJy3Rg9C8JyxcbiAgMjA6ICct0YPQvCcsXG4gIDMwOiAnLdGO0LwnLFxuICA0MDogJy3Rg9C8JyxcbiAgNTA6ICct0YPQvCcsXG4gIDYwOiAnLdGD0LwnLFxuICA3MDogJy3Rg9C8JyxcbiAgODA6ICct0YPQvCcsXG4gIDkwOiAnLdGD0LwnLFxuICAxMDA6ICct0YPQvCdcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0ZycsIHtcbiAgbW9udGhzOiB7XG4gICAgZm9ybWF0OiAn0Y/QvdCy0LDRgNC4X9GE0LXQstGA0LDQu9C4X9C80LDRgNGC0Lhf0LDQv9GA0LXQu9C4X9C80LDQudC4X9C40Y7QvdC4X9C40Y7Qu9C4X9Cw0LLQs9GD0YHRgtC4X9GB0LXQvdGC0Y/QsdGA0Lhf0L7QutGC0Y/QsdGA0Lhf0L3QvtGP0LHRgNC4X9C00LXQutCw0LHRgNC4Jy5zcGxpdCgnXycpLFxuICAgIHN0YW5kYWxvbmU6ICfRj9C90LLQsNGAX9GE0LXQstGA0LDQu1/QvNCw0YDRgl/QsNC/0YDQtdC7X9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgF/QvtC60YLRj9Cx0YBf0L3QvtGP0LHRgF/QtNC10LrQsNCx0YAnLnNwbGl0KCdfJylcbiAgfSxcbiAgbW9udGhzU2hvcnQ6ICfRj9C90LJf0YTQtdCyX9C80LDRgF/QsNC/0YBf0LzQsNC5X9C40Y7QvV/QuNGO0Ltf0LDQstCzX9GB0LXQvV/QvtC60YJf0L3QvtGPX9C00LXQuicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfRj9C60YjQsNC90LHQtV/QtNGD0YjQsNC90LHQtV/RgdC10YjQsNC90LHQtV/Rh9C+0YDRiNCw0L3QsdC1X9C/0LDQvdK30YjQsNC90LHQtV/St9GD0LzRitCwX9GI0LDQvdCx0LUnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfRj9GI0LFf0LTRiNCxX9GB0YjQsV/Rh9GI0LFf0L/RiNCxX9K30YPQvF/RiNC90LEnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn0Y/RiF/QtNGIX9GB0Yhf0YfRiF/Qv9GIX9K30Lxf0YjQsScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1vQmNC80YDTr9C3INGB0L7QsNGC0LhdIExUJyxcbiAgICBuZXh0RGF5OiAnW9Ck0LDRgNC00L4g0YHQvtCw0YLQuF0gTFQnLFxuICAgIGxhc3REYXk6ICdb0JTQuNGA06/QtyDRgdC+0LDRgtC4XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkW9C4XSBb0rPQsNGE0YLQsNC4INC+0Y/QvdC00LAg0YHQvtCw0YLQuF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZFvQuF0gW9Kz0LDRhNGC0LDQuCDQs9GD0LfQsNGI0YLQsCDRgdC+0LDRgtC4XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfQsdCw0YrQtNC4ICVzJyxcbiAgICBwYXN0OiAnJXMg0L/QtdGIJyxcbiAgICBzOiAn0Y/QutGH0LDQvdC0INGB0L7QvdC40Y8nLFxuICAgIG06ICfRj9C6INC00LDSm9C40pvQsCcsXG4gICAgbW06ICclZCDQtNCw0pvQuNKb0LAnLFxuICAgIGg6ICfRj9C6INGB0L7QsNGCJyxcbiAgICBoaDogJyVkINGB0L7QsNGCJyxcbiAgICBkOiAn0Y/QuiDRgNOv0LcnLFxuICAgIGRkOiAnJWQg0YDTr9C3JyxcbiAgICBNOiAn0Y/QuiDQvNC+0rMnLFxuICAgIE1NOiAnJWQg0LzQvtKzJyxcbiAgICB5OiAn0Y/QuiDRgdC+0LsnLFxuICAgIHl5OiAnJWQg0YHQvtC7J1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv0YjQsNCxfNGB0YPQsdKzfNGA06/Qt3zQsdC10LPQvtKzLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ9GI0LDQsScpIHtcbiAgICAgIHJldHVybiBob3VyIDwgNCA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ9GB0YPQsdKzJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ9GA06/QtycpIHtcbiAgICAgIHJldHVybiBob3VyID49IDExID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn0LHQtdCz0L7SsycpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCA0KSB7XG4gICAgICByZXR1cm4gJ9GI0LDQsSc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTEpIHtcbiAgICAgIHJldHVybiAn0YHRg9Cx0rMnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE2KSB7XG4gICAgICByZXR1cm4gJ9GA06/Qtyc7XG4gICAgfSBlbHNlIGlmIChob3VyIDwgMTkpIHtcbiAgICAgIHJldHVybiAn0LHQtdCz0L7Ssyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0YjQsNCxJztcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS0o0YPQvHzRjtC8KS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyKSB7XG4gICAgdmFyIGEgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgYiA9IG51bWJlciA+PSAxMDAgPyAxMDAgOiBudWxsO1xuICAgIHJldHVybiBudW1iZXIgKyAoc3VmZml4ZXNbbnVtYmVyXSB8fCBzdWZmaXhlc1thXSB8fCBzdWZmaXhlc1tiXSk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3RoJywge1xuICBtb250aHM6ICfguKHguIHguKPguLLguITguKFf4LiB4Li44Lih4Lig4Liy4Lie4Lix4LiZ4LiY4LmMX+C4oeC4teC4meC4suC4hOC4oV/guYDguKHguKnguLLguKLguJlf4Lie4Lik4Lip4Lig4Liy4LiE4LihX+C4oeC4tOC4luC4uOC4meC4suC4ouC4mV/guIHguKPguIHguI7guLLguITguKFf4Liq4Li04LiH4Lir4Liy4LiE4LihX+C4geC4seC4meC4ouC4suC4ouC4mV/guJXguLjguKXguLLguITguKFf4Lie4Lik4Lio4LiI4Li04LiB4Liy4Lii4LiZX+C4mOC4seC4meC4p+C4suC4hOC4oScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfguKEu4LiELl/guIEu4LieLl/guKHguLUu4LiELl/guYDguKEu4LiiLl/guJ4u4LiELl/guKHguLQu4LiiLl/guIEu4LiELl/guKou4LiELl/guIEu4LiiLl/guJUu4LiELl/guJ4u4LiiLl/guJgu4LiELicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICfguK3guLLguJfguLTguJXguKLguYxf4LiI4Lix4LiZ4LiX4Lij4LmMX+C4reC4seC4h+C4hOC4suC4o1/guJ7guLjguJhf4Lie4Lik4Lir4Lix4Liq4Lia4LiU4Li1X+C4qOC4uOC4geC4o+C5jF/guYDguKrguLLguKPguYwnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfguK3guLLguJfguLTguJXguKLguYxf4LiI4Lix4LiZ4LiX4Lij4LmMX+C4reC4seC4h+C4hOC4suC4o1/guJ7guLjguJhf4Lie4Lik4Lir4Lix4LiqX+C4qOC4uOC4geC4o+C5jF/guYDguKrguLLguKPguYwnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn4Lit4LiyLl/guIguX+C4rS5f4LieLl/guJ7guKQuX+C4qC5f4LiqLicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSDptbScsXG4gICAgTFRTOiAnSDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIOC5gOC4p+C4peC4siBIOm1tJyxcbiAgICBMTExMOiAn4Lin4Lix4LiZZGRkZOC4l+C4teC5iCBEIE1NTU0gWVlZWSDguYDguKfguKXguLIgSDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+C4geC5iOC4reC4meC5gOC4l+C4teC5iOC4ouC4h3zguKvguKXguLHguIfguYDguJfguLXguYjguKLguIcvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSAn4Lir4Lil4Lix4LiH4LmA4LiX4Li14LmI4Lii4LiHJztcbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIGlmIChob3VyIDwgMTIpIHtcbiAgICAgIHJldHVybiAn4LiB4LmI4Lit4LiZ4LmA4LiX4Li14LmI4Lii4LiHJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfguKvguKXguLHguIfguYDguJfguLXguYjguKLguIcnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+C4p+C4seC4meC4meC4teC5iSDguYDguKfguKXguLJdIExUJyxcbiAgICBuZXh0RGF5OiAnW+C4nuC4o+C4uOC5iOC4h+C4meC4teC5iSDguYDguKfguKXguLJdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGRb4Lir4LiZ4LmJ4LiyIOC5gOC4p+C4peC4sl0gTFQnLFxuICAgIGxhc3REYXk6ICdb4LmA4Lih4Li34LmI4Lit4Lin4Liy4LiZ4LiZ4Li14LmJIOC5gOC4p+C4peC4sl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW+C4p+C4seC4mV1kZGRkW+C4l+C4teC5iOC5geC4peC5ieC4pyDguYDguKfguKXguLJdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJ+C4reC4teC4gSAlcycsXG4gICAgcGFzdDogJyVz4LiX4Li14LmI4LmB4Lil4LmJ4LinJyxcbiAgICBzOiAn4LmE4Lih4LmI4LiB4Li14LmI4Lin4Li04LiZ4Liy4LiX4Li1JyxcbiAgICBzczogJyVkIOC4p+C4tOC4meC4suC4l+C4tScsXG4gICAgbTogJzEg4LiZ4Liy4LiX4Li1JyxcbiAgICBtbTogJyVkIOC4meC4suC4l+C4tScsXG4gICAgaDogJzEg4LiK4Lix4LmI4Lin4LmC4Lih4LiHJyxcbiAgICBoaDogJyVkIOC4iuC4seC5iOC4p+C5guC4oeC4hycsXG4gICAgZDogJzEg4Lin4Lix4LiZJyxcbiAgICBkZDogJyVkIOC4p+C4seC4mScsXG4gICAgdzogJzEg4Liq4Lix4Lib4LiU4Liy4Lir4LmMJyxcbiAgICB3dzogJyVkIOC4quC4seC4m+C4lOC4suC4q+C5jCcsXG4gICAgTTogJzEg4LmA4LiU4Li34Lit4LiZJyxcbiAgICBNTTogJyVkIOC5gOC4lOC4t+C4reC4mScsXG4gICAgeTogJzEg4Lib4Li1JyxcbiAgICB5eTogJyVkIOC4m+C4tSdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN1ZmZpeGVzID0ge1xuICAxOiBcIidpbmppXCIsXG4gIDU6IFwiJ2luamlcIixcbiAgODogXCInaW5qaVwiLFxuICA3MDogXCInaW5qaVwiLFxuICA4MDogXCInaW5qaVwiLFxuICAyOiBcIiduamlcIixcbiAgNzogXCInbmppXCIsXG4gIDIwOiBcIiduamlcIixcbiAgNTA6IFwiJ25qaVwiLFxuICAzOiBcIifDvG5qaVwiLFxuICA0OiBcIifDvG5qaVwiLFxuICAxMDA6IFwiJ8O8bmppXCIsXG4gIDY6IFwiJ25qeVwiLFxuICA5OiBcIid1bmp5XCIsXG4gIDEwOiBcIid1bmp5XCIsXG4gIDMwOiBcIid1bmp5XCIsXG4gIDYwOiBcIid5bmp5XCIsXG4gIDkwOiBcIid5bmp5XCJcbn07XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0aycsIHtcbiAgbW9udGhzOiAnw51hbndhcl9GZXdyYWxfTWFydF9BcHJlbF9NYcO9X0nDvXVuX0nDvXVsX0F3Z3VzdF9TZW50w71hYnJfT2t0w71hYnJfTm/DvWFicl9EZWthYnInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnw51hbl9GZXdfTWFyX0Fwcl9NYcO9X0nDvW5fScO9bF9Bd2dfU2VuX09rdF9Ob8O9X0Rlaycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfDnWVrxZ9lbmJlX0R1xZ9lbmJlX1NpxZ9lbmJlX8OHYXLFn2VuYmVfUGVuxZ9lbmJlX0FubmFfxZ5lbmJlJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnw51la19EdcWfX1NpxZ9fw4dhcl9QZW5fQW5uX8WeZW4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnw51rX0TFn19TxZ9fw4dyX1BuX0FuX8Webicuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tidWfDvG4gc2FnYXRdIExUJyxcbiAgICBuZXh0RGF5OiAnW2VydGlyIHNhZ2F0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdbaW5kaWtpXSBkZGRkIFtzYWdhdF0gTFQnLFxuICAgIGxhc3REYXk6ICdbZMO8w71uXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbZ2XDp2VuXSBkZGRkIFtzYWdhdF0gTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXMgc2/FiCcsXG4gICAgcGFzdDogJyVzIMO2xYgnLFxuICAgIHM6ICdiaXJuw6TDp2Ugc2VrdW50JyxcbiAgICBtOiAnYmlyIG1pbnV0JyxcbiAgICBtbTogJyVkIG1pbnV0JyxcbiAgICBoOiAnYmlyIHNhZ2F0JyxcbiAgICBoaDogJyVkIHNhZ2F0JyxcbiAgICBkOiAnYmlyIGfDvG4nLFxuICAgIGRkOiAnJWQgZ8O8bicsXG4gICAgTTogJ2JpciBhw70nLFxuICAgIE1NOiAnJWQgYcO9JyxcbiAgICB5OiAnYmlyIMO9eWwnLFxuICAgIHl5OiAnJWQgw715bCdcbiAgfSxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnRG8nOlxuICAgICAgY2FzZSAnREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobnVtYmVyID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG51bWJlciArIFwiJ3VuanlcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhID0gbnVtYmVyICUgMTAsXG4gICAgICAgICAgICBiID0gbnVtYmVyICUgMTAwIC0gYSxcbiAgICAgICAgICAgIGMgPSBudW1iZXIgPj0gMTAwID8gMTAwIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChzdWZmaXhlc1thXSB8fCBzdWZmaXhlc1tiXSB8fCBzdWZmaXhlc1tjXSk7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0bC1waCcsIHtcbiAgbW9udGhzOiAnRW5lcm9fUGVicmVyb19NYXJzb19BYnJpbF9NYXlvX0h1bnlvX0h1bHlvX0Fnb3N0b19TZXR5ZW1icmVfT2t0dWJyZV9Ob2J5ZW1icmVfRGlzeWVtYnJlJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ0VuZV9QZWJfTWFyX0Ficl9NYXlfSHVuX0h1bF9BZ29fU2V0X09rdF9Ob2JfRGlzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0xpbmdnb19MdW5lc19NYXJ0ZXNfTWl5ZXJrdWxlc19IdXdlYmVzX0JpeWVybmVzX1NhYmFkbycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0xpbl9MdW5fTWFyX01peV9IdXdfQml5X1NhYicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdMaV9MdV9NYV9NaV9IdV9CaV9TYWInLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdNTS9EL1lZWVknLFxuICAgIExMOiAnTU1NTSBELCBZWVlZJyxcbiAgICBMTEw6ICdNTU1NIEQsIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBNTU1NIERELCBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdMVCBbbmdheW9uZyBhcmF3XScsXG4gICAgbmV4dERheTogJ1tCdWthcyBuZ10gTFQnLFxuICAgIG5leHRXZWVrOiAnTFQgW3NhIHN1c3Vub2QgbmFdIGRkZGQnLFxuICAgIGxhc3REYXk6ICdMVCBba2FoYXBvbl0nLFxuICAgIGxhc3RXZWVrOiAnTFQgW25vb25nIG5ha2FyYWFuZ10gZGRkZCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdzYSBsb29iIG5nICVzJyxcbiAgICBwYXN0OiAnJXMgYW5nIG5ha2FsaXBhcycsXG4gICAgczogJ2lsYW5nIHNlZ3VuZG8nLFxuICAgIHNzOiAnJWQgc2VndW5kbycsXG4gICAgbTogJ2lzYW5nIG1pbnV0bycsXG4gICAgbW06ICclZCBtaW51dG8nLFxuICAgIGg6ICdpc2FuZyBvcmFzJyxcbiAgICBoaDogJyVkIG9yYXMnLFxuICAgIGQ6ICdpc2FuZyBhcmF3JyxcbiAgICBkZDogJyVkIGFyYXcnLFxuICAgIE06ICdpc2FuZyBidXdhbicsXG4gICAgTU06ICclZCBidXdhbicsXG4gICAgeTogJ2lzYW5nIHRhb24nLFxuICAgIHl5OiAnJWQgdGFvbidcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9LyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbnVtYmVyc05vdW5zID0gJ3BhZ2hfd2HigJlfY2hh4oCZX3dlal9sb1NfdmFnaF9qYXZfU29jaF9jaG9yZ2hfSHV0Jy5zcGxpdCgnXycpO1xuXG5mdW5jdGlvbiB0cmFuc2xhdGVGdXR1cmUob3V0cHV0KSB7XG4gIHZhciB0aW1lID0gb3V0cHV0O1xuICB0aW1lID0gb3V0cHV0LmluZGV4T2YoJ2phaicpICE9PSAtMSA/IHRpbWUuc2xpY2UoMCwgLTMpICsgJ2xlUycgOiBvdXRwdXQuaW5kZXhPZignamFyJykgIT09IC0xID8gdGltZS5zbGljZSgwLCAtMykgKyAnd2FRJyA6IG91dHB1dC5pbmRleE9mKCdESVMnKSAhPT0gLTEgPyB0aW1lLnNsaWNlKDAsIC0zKSArICduZW0nIDogdGltZSArICcgcElxJztcbiAgcmV0dXJuIHRpbWU7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZVBhc3Qob3V0cHV0KSB7XG4gIHZhciB0aW1lID0gb3V0cHV0O1xuICB0aW1lID0gb3V0cHV0LmluZGV4T2YoJ2phaicpICE9PSAtMSA/IHRpbWUuc2xpY2UoMCwgLTMpICsgJ0h14oCZJyA6IG91dHB1dC5pbmRleE9mKCdqYXInKSAhPT0gLTEgPyB0aW1lLnNsaWNlKDAsIC0zKSArICd3ZW4nIDogb3V0cHV0LmluZGV4T2YoJ0RJUycpICE9PSAtMSA/IHRpbWUuc2xpY2UoMCwgLTMpICsgJ2JlbicgOiB0aW1lICsgJyByZXQnO1xuICByZXR1cm4gdGltZTtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICB2YXIgbnVtYmVyTm91biA9IG51bWJlckFzTm91bihudW1iZXIpO1xuXG4gIHN3aXRjaCAoc3RyaW5nKSB7XG4gICAgY2FzZSAnc3MnOlxuICAgICAgcmV0dXJuIG51bWJlck5vdW4gKyAnIGx1cCc7XG5cbiAgICBjYXNlICdtbSc6XG4gICAgICByZXR1cm4gbnVtYmVyTm91biArICcgdHVwJztcblxuICAgIGNhc2UgJ2hoJzpcbiAgICAgIHJldHVybiBudW1iZXJOb3VuICsgJyByZXAnO1xuXG4gICAgY2FzZSAnZGQnOlxuICAgICAgcmV0dXJuIG51bWJlck5vdW4gKyAnIGphaic7XG5cbiAgICBjYXNlICdNTSc6XG4gICAgICByZXR1cm4gbnVtYmVyTm91biArICcgamFyJztcblxuICAgIGNhc2UgJ3l5JzpcbiAgICAgIHJldHVybiBudW1iZXJOb3VuICsgJyBESVMnO1xuICB9XG59XG5cbmZ1bmN0aW9uIG51bWJlckFzTm91bihudW1iZXIpIHtcbiAgdmFyIGh1bmRyZWQgPSBNYXRoLmZsb29yKG51bWJlciAlIDEwMDAgLyAxMDApLFxuICAgICAgdGVuID0gTWF0aC5mbG9vcihudW1iZXIgJSAxMDAgLyAxMCksXG4gICAgICBvbmUgPSBudW1iZXIgJSAxMCxcbiAgICAgIHdvcmQgPSAnJztcblxuICBpZiAoaHVuZHJlZCA+IDApIHtcbiAgICB3b3JkICs9IG51bWJlcnNOb3Vuc1todW5kcmVkXSArICd2YXRsaCc7XG4gIH1cblxuICBpZiAodGVuID4gMCkge1xuICAgIHdvcmQgKz0gKHdvcmQgIT09ICcnID8gJyAnIDogJycpICsgbnVtYmVyc05vdW5zW3Rlbl0gKyAnbWFIJztcbiAgfVxuXG4gIGlmIChvbmUgPiAwKSB7XG4gICAgd29yZCArPSAod29yZCAhPT0gJycgPyAnICcgOiAnJykgKyBudW1iZXJzTm91bnNbb25lXTtcbiAgfVxuXG4gIHJldHVybiB3b3JkID09PSAnJyA/ICdwYWdoJyA6IHdvcmQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3RsaCcsIHtcbiAgbW9udGhzOiAndGVyYeKAmSBqYXIgd2HigJlfdGVyYeKAmSBqYXIgY2hh4oCZX3RlcmHigJkgamFyIHdlal90ZXJh4oCZIGphciBsb1NfdGVyYeKAmSBqYXIgdmFnaF90ZXJh4oCZIGphciBqYXZfdGVyYeKAmSBqYXIgU29jaF90ZXJh4oCZIGphciBjaG9yZ2hfdGVyYeKAmSBqYXIgSHV0X3RlcmHigJkgamFyIHdh4oCZbWFIX3RlcmHigJkgamFyIHdh4oCZbWFIIHdh4oCZX3RlcmHigJkgamFyIHdh4oCZbWFIIGNoYeKAmScuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdqYXIgd2HigJlfamFyIGNoYeKAmV9qYXIgd2VqX2phciBsb1NfamFyIHZhZ2hfamFyIGphdl9qYXIgU29jaF9qYXIgY2hvcmdoX2phciBIdXRfamFyIHdh4oCZbWFIX2phciB3YeKAmW1hSCB3YeKAmV9qYXIgd2HigJltYUggY2hh4oCZJy5zcGxpdCgnXycpLFxuICBtb250aHNQYXJzZUV4YWN0OiB0cnVlLFxuICB3ZWVrZGF5czogJ2xvam1JdGphal9EYVNqYWpfcG92amFqX2doSXRsaGphal9sb2doamFqX2J1cWphal9naEluamFqJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnbG9qbUl0amFqX0RhU2phal9wb3ZqYWpfZ2hJdGxoamFqX2xvZ2hqYWpfYnVxamFqX2doSW5qYWonLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnbG9qbUl0amFqX0RhU2phal9wb3ZqYWpfZ2hJdGxoamFqX2xvZ2hqYWpfYnVxamFqX2doSW5qYWonLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC5NTS5ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQsIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdbRGFIamFqXSBMVCcsXG4gICAgbmV4dERheTogJ1t3YeKAmWxlU10gTFQnLFxuICAgIG5leHRXZWVrOiAnTExMJyxcbiAgICBsYXN0RGF5OiAnW3dh4oCZSHXigJldIExUJyxcbiAgICBsYXN0V2VlazogJ0xMTCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6IHRyYW5zbGF0ZUZ1dHVyZSxcbiAgICBwYXN0OiB0cmFuc2xhdGVQYXN0LFxuICAgIHM6ICdwdVMgbHVwJyxcbiAgICBzczogdHJhbnNsYXRlLFxuICAgIG06ICd3YeKAmSB0dXAnLFxuICAgIG1tOiB0cmFuc2xhdGUsXG4gICAgaDogJ3dh4oCZIHJlcCcsXG4gICAgaGg6IHRyYW5zbGF0ZSxcbiAgICBkOiAnd2HigJkgamFqJyxcbiAgICBkZDogdHJhbnNsYXRlLFxuICAgIE06ICd3YeKAmSBqYXInLFxuICAgIE1NOiB0cmFuc2xhdGUsXG4gICAgeTogJ3dh4oCZIERJUycsXG4gICAgeXk6IHRyYW5zbGF0ZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xudmFyIHN1ZmZpeGVzID0ge1xuICAxOiBcIidpbmNpXCIsXG4gIDU6IFwiJ2luY2lcIixcbiAgODogXCInaW5jaVwiLFxuICA3MDogXCInaW5jaVwiLFxuICA4MDogXCInaW5jaVwiLFxuICAyOiBcIiduY2lcIixcbiAgNzogXCInbmNpXCIsXG4gIDIwOiBcIiduY2lcIixcbiAgNTA6IFwiJ25jaVwiLFxuICAzOiBcIifDvG5jw7xcIixcbiAgNDogXCInw7xuY8O8XCIsXG4gIDEwMDogXCInw7xuY8O8XCIsXG4gIDY6IFwiJ25jxLFcIixcbiAgOTogXCIndW5jdVwiLFxuICAxMDogXCIndW5jdVwiLFxuICAzMDogXCIndW5jdVwiLFxuICA2MDogXCInxLFuY8SxXCIsXG4gIDkwOiBcIifEsW5jxLFcIlxufTtcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3RyJywge1xuICBtb250aHM6ICdPY2FrX8WedWJhdF9NYXJ0X05pc2FuX01hecSxc19IYXppcmFuX1RlbW11el9BxJ91c3Rvc19FeWzDvGxfRWtpbV9LYXPEsW1fQXJhbMSxaycuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdPY2FfxZ51Yl9NYXJfTmlzX01heV9IYXpfVGVtX0HEn3VfRXlsX0VraV9LYXNfQXJhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1BhemFyX1BhemFydGVzaV9TYWzEsV/Dh2FyxZ9hbWJhX1BlcsWfZW1iZV9DdW1hX0N1bWFydGVzaScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1Bhel9QdHNfU2FsX8OHYXJfUGVyX0N1bV9DdHMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnUHpfUHRfU2Ffw4dhX1BlX0N1X0N0Jy5zcGxpdCgnXycpLFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMikge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAnw7bDticgOiAnw5bDlic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpc0xvd2VyID8gJ8O2cycgOiAnw5ZTJztcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/DtsO2fMOWw5Z8w7ZzfMOWUy8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09ICfDtnMnIHx8IGlucHV0ID09PSAnw5ZTJztcbiAgfSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0RELk1NLllZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tidWfDvG4gc2FhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbeWFyxLFuIHNhYXRdIExUJyxcbiAgICBuZXh0V2VlazogJ1tnZWxlY2VrXSBkZGRkIFtzYWF0XSBMVCcsXG4gICAgbGFzdERheTogJ1tkw7xuXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbZ2XDp2VuXSBkZGRkIFtzYWF0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyBzb25yYScsXG4gICAgcGFzdDogJyVzIMO2bmNlJyxcbiAgICBzOiAnYmlya2HDpyBzYW5peWUnLFxuICAgIHNzOiAnJWQgc2FuaXllJyxcbiAgICBtOiAnYmlyIGRha2lrYScsXG4gICAgbW06ICclZCBkYWtpa2EnLFxuICAgIGg6ICdiaXIgc2FhdCcsXG4gICAgaGg6ICclZCBzYWF0JyxcbiAgICBkOiAnYmlyIGfDvG4nLFxuICAgIGRkOiAnJWQgZ8O8bicsXG4gICAgdzogJ2JpciBoYWZ0YScsXG4gICAgd3c6ICclZCBoYWZ0YScsXG4gICAgTTogJ2JpciBheScsXG4gICAgTU06ICclZCBheScsXG4gICAgeTogJ2JpciB5xLFsJyxcbiAgICB5eTogJyVkIHnEsWwnXG4gIH0sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RvJzpcbiAgICAgIGNhc2UgJ0REJzpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBudW1iZXIgKyBcIifEsW5jxLFcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhID0gbnVtYmVyICUgMTAsXG4gICAgICAgICAgICBiID0gbnVtYmVyICUgMTAwIC0gYSxcbiAgICAgICAgICAgIGMgPSBudW1iZXIgPj0gMTAwID8gMTAwIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIG51bWJlciArIChzdWZmaXhlc1thXSB8fCBzdWZmaXhlc1tiXSB8fCBzdWZmaXhlc1tjXSk7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0emwnLCB7XG4gIG1vbnRoczogJ0phbnVhcl9GZXZyYWdsaF9NYXLDp19BdnLDr3VfTWFpX0fDvG5fSnVsaWFfR3VzY2h0X1NldGVtdmFyX0xpc3RvcMOkdHNfTm9lbXZhcl9aZWNlbXZhcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdKYW5fRmV2X01hcl9BdnJfTWFpX0fDvG5fSnVsX0d1c19TZXRfTGlzX05vZV9aZWMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAnU8O6bGFkaV9Mw7puZcOnaV9NYWl0emlfTcOhcmN1cmlfWGjDumFkaV9WacOpbmVyw6dpX1PDoXR1cmknLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdTw7psX0zDum5fTWFpX03DoXJfWGjDul9WacOpX1PDoXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU8O6X0zDul9NYV9Nw6FfWGhfVmlfU8OhJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEgubW0nLFxuICAgIExUUzogJ0hILm1tLnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdELiBNTU1NIFtkYWxsYXNdIFlZWVknLFxuICAgIExMTDogJ0QuIE1NTU0gW2RhbGxhc10gWVlZWSBISC5tbScsXG4gICAgTExMTDogJ2RkZGQsIFtsaV0gRC4gTU1NTSBbZGFsbGFzXSBZWVlZIEhILm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAvZFxcJ298ZFxcJ2EvaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiBcImQnb1wiID09PSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPiAxMSkge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyBcImQnb1wiIDogXCJEJ09cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyBcImQnYVwiIDogXCJEJ0FcIjtcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tveGhpIMOgXSBMVCcsXG4gICAgbmV4dERheTogJ1tkZW3DoCDDoF0gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbw6BdIExUJyxcbiAgICBsYXN0RGF5OiAnW2llaXJpIMOgXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdbc8O8ciBlbF0gZGRkZCBbbGFzdGV1IMOgXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdvc3ByZWkgJXMnLFxuICAgIHBhc3Q6ICdqYSVzJyxcbiAgICBzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIHNzOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIG06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgbW06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBoaDogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICBkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIGRkOiBwcm9jZXNzUmVsYXRpdmVUaW1lLFxuICAgIE06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgTU06IHByb2Nlc3NSZWxhdGl2ZVRpbWUsXG4gICAgeTogcHJvY2Vzc1JlbGF0aXZlVGltZSxcbiAgICB5eTogcHJvY2Vzc1JlbGF0aXZlVGltZVxuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn1cXC4vLFxuICBvcmRpbmFsOiAnJWQuJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLCB3aXRob3V0U3VmZml4LCBrZXksIGlzRnV0dXJlKSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgczogWyd2aWVuc2FzIHNlY3VuZHMnLCBcIidpZW5zYXMgc2VjdW5kc1wiXSxcbiAgICBzczogW251bWJlciArICcgc2VjdW5kcycsICcnICsgbnVtYmVyICsgJyBzZWN1bmRzJ10sXG4gICAgbTogW1wiJ24gbcOtdXRcIiwgXCInaWVucyBtw611dFwiXSxcbiAgICBtbTogW251bWJlciArICcgbcOtdXRzJywgJycgKyBudW1iZXIgKyAnIG3DrXV0cyddLFxuICAgIGg6IFtcIiduIMO+b3JhXCIsIFwiJ2llbnNhIMO+b3JhXCJdLFxuICAgIGhoOiBbbnVtYmVyICsgJyDDvm9yYXMnLCAnJyArIG51bWJlciArICcgw75vcmFzJ10sXG4gICAgZDogW1wiJ24geml1YVwiLCBcIidpZW5zYSB6aXVhXCJdLFxuICAgIGRkOiBbbnVtYmVyICsgJyB6aXVhcycsICcnICsgbnVtYmVyICsgJyB6aXVhcyddLFxuICAgIE06IFtcIiduIG1lc1wiLCBcIidpZW5zIG1lc1wiXSxcbiAgICBNTTogW251bWJlciArICcgbWVzZW4nLCAnJyArIG51bWJlciArICcgbWVzZW4nXSxcbiAgICB5OiBbXCInbiBhclwiLCBcIidpZW5zIGFyXCJdLFxuICAgIHl5OiBbbnVtYmVyICsgJyBhcnMnLCAnJyArIG51bWJlciArICcgYXJzJ11cbiAgfTtcbiAgcmV0dXJuIGlzRnV0dXJlID8gZm9ybWF0W2tleV1bMF0gOiB3aXRob3V0U3VmZml4ID8gZm9ybWF0W2tleV1bMF0gOiBmb3JtYXRba2V5XVsxXTtcbn0iLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd0em0tbGF0bicsIHtcbiAgbW9udGhzOiAnaW5uYXlyX2Jyy6RheXLLpF9tYXLLpHPLpF9pYnJpcl9tYXl5d195d255d195d2x5d3pfyaN3xaF0X8Whd3RhbmJpcl9rdMukd2Jyy6Rfbnd3YW5iaXJfZHdqbmJpcicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdpbm5heXJfYnLLpGF5csukX21hcsukc8ukX2licmlyX21heXl3X3l3bnl3X3l3bHl3el/Jo3fFoXRfxaF3dGFuYmlyX2t0y6R3YnLLpF9ud3dhbmJpcl9kd2puYmlyJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ2FzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdhc2FtYXNfYXluYXNfYXNpbmFzX2FrcmFzX2Frd2FzX2FzaW13YXNfYXNp4biNeWFzJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ2FzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMnLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBISDptbScsXG4gICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1thc2RraCBnXSBMVCcsXG4gICAgbmV4dERheTogJ1thc2thIGddIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW2ddIExUJyxcbiAgICBsYXN0RGF5OiAnW2Fzc2FudCBnXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFtnXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdkYWRraCBzIHlhbiAlcycsXG4gICAgcGFzdDogJ3lhbiAlcycsXG4gICAgczogJ2ltaWsnLFxuICAgIHNzOiAnJWQgaW1paycsXG4gICAgbTogJ21pbnXhuI0nLFxuICAgIG1tOiAnJWQgbWludeG4jScsXG4gICAgaDogJ3NhyZthJyxcbiAgICBoaDogJyVkIHRhc3NhyZtpbicsXG4gICAgZDogJ2FzcycsXG4gICAgZGQ6ICclZCBvc3NhbicsXG4gICAgTTogJ2F5b3dyJyxcbiAgICBNTTogJyVkIGl5eWlybicsXG4gICAgeTogJ2FzZ2FzJyxcbiAgICB5eTogJyVkIGlzZ2FzbidcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogNixcbiAgICBkb3k6IDEyXG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3R6bScsIHtcbiAgbW9udGhzOiAn4rWJ4rWP4rWP4rSw4rWi4rWUX+K0seK1leK0sOK1ouK1lV/itY7itLDitZXitZpf4rWJ4rSx4rWU4rWJ4rWUX+K1juK0sOK1ouK1ouK1k1/itaLitZPitY/itaLitZNf4rWi4rWT4rWN4rWi4rWT4rWjX+K1luK1k+K1m+K1nF/itZvitZPitZzitLDitY/itLHitYnitZRf4rS94rWf4rWT4rSx4rWVX+K1j+K1k+K1oeK0sOK1j+K0seK1ieK1lF/itLfitZPitYritY/itLHitYnitZQnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAn4rWJ4rWP4rWP4rSw4rWi4rWUX+K0seK1leK0sOK1ouK1lV/itY7itLDitZXitZpf4rWJ4rSx4rWU4rWJ4rWUX+K1juK0sOK1ouK1ouK1k1/itaLitZPitY/itaLitZNf4rWi4rWT4rWN4rWi4rWT4rWjX+K1luK1k+K1m+K1nF/itZvitZPitZzitLDitY/itLHitYnitZRf4rS94rWf4rWT4rSx4rWVX+K1j+K1k+K1oeK0sOK1j+K0seK1ieK1lF/itLfitZPitYritY/itLHitYnitZQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn4rSw4rWZ4rSw4rWO4rSw4rWZX+K0sOK1ouK1j+K0sOK1mV/itLDitZnitYnitY/itLDitZlf4rSw4rS94rWU4rSw4rWZX+K0sOK0veK1oeK0sOK1mV/itLDitZnitYnitY7itaHitLDitZlf4rSw4rWZ4rWJ4rS54rWi4rSw4rWZJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn4rSw4rWZ4rSw4rWO4rSw4rWZX+K0sOK1ouK1j+K0sOK1mV/itLDitZnitYnitY/itLDitZlf4rSw4rS94rWU4rSw4rWZX+K0sOK0veK1oeK0sOK1mV/itLDitZnitYnitY7itaHitLDitZlf4rSw4rWZ4rWJ4rS54rWi4rSw4rWZJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+K0sOK1meK0sOK1juK0sOK1mV/itLDitaLitY/itLDitZlf4rSw4rWZ4rWJ4rWP4rSw4rWZX+K0sOK0veK1lOK0sOK1mV/itLDitL3itaHitLDitZlf4rSw4rWZ4rWJ4rWO4rWh4rSw4rWZX+K0sOK1meK1ieK0ueK1ouK0sOK1mScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+K0sOK1meK0t+K1hSDitLRdIExUJyxcbiAgICBuZXh0RGF5OiAnW+K0sOK1meK0veK0sCDitLRdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW+K0tF0gTFQnLFxuICAgIGxhc3REYXk6ICdb4rSw4rWa4rSw4rWP4rWcIOK0tF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnZGRkZCBb4rS0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfitLfitLDitLfitYUg4rWZIOK1ouK0sOK1jyAlcycsXG4gICAgcGFzdDogJ+K1ouK0sOK1jyAlcycsXG4gICAgczogJ+K1ieK1juK1ieK0vScsXG4gICAgc3M6ICclZCDitYnitY7itYnitL0nLFxuICAgIG06ICfitY7itYnitY/itZPitLonLFxuICAgIG1tOiAnJWQg4rWO4rWJ4rWP4rWT4rS6JyxcbiAgICBoOiAn4rWZ4rSw4rWE4rSwJyxcbiAgICBoaDogJyVkIOK1nOK0sOK1meK1meK0sOK1hOK1ieK1jycsXG4gICAgZDogJ+K0sOK1meK1mScsXG4gICAgZGQ6ICclZCBv4rWZ4rWZ4rSw4rWPJyxcbiAgICBNOiAn4rSw4rWib+K1k+K1lCcsXG4gICAgTU06ICclZCDitYnitaLitaLitYnitZTitY8nLFxuICAgIHk6ICfitLDitZnitLPitLDitZknLFxuICAgIHl5OiAnJWQg4rWJ4rWZ4rSz4rSw4rWZ4rWPJ1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiA2LFxuICAgIGRveTogMTJcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndWctY24nLCB7XG4gIG1vbnRoczogJ9mK2KfZhtuL2KfYsV/ZgduQ24vYsdin2YRf2YXYp9ix2Kpf2KbYp9m+2LHbkNmEX9mF2KfZil/YptmJ2Yrbh9mGX9im2YnZituH2YRf2KbYp9uL2Lrbh9iz2Kpf2LPbkNmG2Krbldio2YnYsV/YptuG2YPYqtuV2KjZidixX9mG2YjZitin2KjZidixX9iv25DZg9in2KjZidixJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJ9mK2KfZhtuL2KfYsV/ZgduQ24vYsdin2YRf2YXYp9ix2Kpf2KbYp9m+2LHbkNmEX9mF2KfZil/YptmJ2Yrbh9mGX9im2YnZituH2YRf2KbYp9uL2Lrbh9iz2Kpf2LPbkNmG2Krbldio2YnYsV/YptuG2YPYqtuV2KjZidixX9mG2YjZitin2KjZidixX9iv25DZg9in2KjZidixJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ9mK25XZg9i025XZhtio25Vf2K/biNi025XZhtio25Vf2LPbldmK2LTbldmG2KjblV/ahtin2LHYtNuV2YbYqNuVX9m+25XZiti025XZhtio25Vf2KzbiNmF25Vf2LTbldmG2KjblScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9mK25Vf2K/biF/Ys9uVX9qG2Kdf2b7blV/YrNuIX9i025UnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn2YrblV/Yr9uIX9iz25Vf2obYp1/ZvtuVX9is24hf2LTblScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ1lZWVktTU0tREQnLFxuICAgIExMOiAnWVlZWS3ZitmJ2YTZiU0t2KbYp9mK2YbZidqtRC3Zg9uI2YbZiScsXG4gICAgTExMOiAnWVlZWS3ZitmJ2YTZiU0t2KbYp9mK2YbZidqtRC3Zg9uI2YbZidiMIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZNiMIFlZWVkt2YrZidmE2YlNLdim2KfZitmG2YnarUQt2YPbiNmG2YnYjCBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL9mK25DYsdmJ2YUg2YPbkNqG25V82LPbldq+25XYsXzahtuI2LTYqtmJ2YYg2Kjbh9ix24fZhnzahtuI2LR82obbiNi02KrZidmGINmD25DZitmJ2YZ82YPbldqGLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ9mK25DYsdmJ2YUg2YPbkNqG25UnIHx8IG1lcmlkaWVtID09PSAn2LPbldq+25XYsScgfHwgbWVyaWRpZW0gPT09ICfahtuI2LTYqtmJ2YYg2Kjbh9ix24fZhicpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfahtuI2LTYqtmJ2YYg2YPbkNmK2YnZhicgfHwgbWVyaWRpZW0gPT09ICfZg9uV2oYnKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgdmFyIGhtID0gaG91ciAqIDEwMCArIG1pbnV0ZTtcblxuICAgIGlmIChobSA8IDYwMCkge1xuICAgICAgcmV0dXJuICfZituQ2LHZidmFINmD25DahtuVJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgOTAwKSB7XG4gICAgICByZXR1cm4gJ9iz25XavtuV2LEnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMTMwKSB7XG4gICAgICByZXR1cm4gJ9qG24jYtNiq2YnZhiDYqNuH2LHbh9mGJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTIzMCkge1xuICAgICAgcmV0dXJuICfahtuI2LQnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxODAwKSB7XG4gICAgICByZXR1cm4gJ9qG24jYtNiq2YnZhiDZg9uQ2YrZidmGJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfZg9uV2oYnO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9io24jar9uI2YYg2LPYp9im25XYql0gTFQnLFxuICAgIG5leHREYXk6ICdb2Kbbldiq25Ug2LPYp9im25XYql0gTFQnLFxuICAgIG5leHRXZWVrOiAnW9mD25DZhNuV2LHZg9mJXSBkZGRkIFvYs9in2KbbldiqXSBMVCcsXG4gICAgbGFzdERheTogJ1vYqtuG2YbbiNqv24jZhl0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW9im2KfZhNiv2YnZhtmC2YldIGRkZGQgW9iz2KfYptuV2KpdIExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVzINmD25DZitmJ2YYnLFxuICAgIHBhc3Q6ICclcyDYqNuH2LHbh9mGJyxcbiAgICBzOiAn2YbbldqG2obblSDYs9uQ2YPZiNmG2KonLFxuICAgIHNzOiAnJWQg2LPbkNmD2YjZhtiqJyxcbiAgICBtOiAn2KjZidixINmF2YnZhtuH2KonLFxuICAgIG1tOiAnJWQg2YXZidmG24fYqicsXG4gICAgaDogJ9io2YnYsSDYs9in2KbbldiqJyxcbiAgICBoaDogJyVkINiz2KfYptuV2KonLFxuICAgIGQ6ICfYqNmJ2LEg2YPbiNmGJyxcbiAgICBkZDogJyVkINmD24jZhicsXG4gICAgTTogJ9io2YnYsSDYptin2YonLFxuICAgIE1NOiAnJWQg2KbYp9mKJyxcbiAgICB5OiAn2KjZidixINmK2YnZhCcsXG4gICAgeXk6ICclZCDZitmJ2YQnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSgt2YPbiNmG2Yl8Ldim2KfZinwt2r7bldm+2KrblSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnRCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJy3Zg9uI2YbZiSc7XG5cbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAnLdq+25XZvtiq25UnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgcHJlcGFyc2U6IGZ1bmN0aW9uIHByZXBhcnNlKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgv2IwvZywgJywnKTtcbiAgfSxcbiAgcG9zdGZvcm1hdDogZnVuY3Rpb24gcG9zdGZvcm1hdChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLywvZywgJ9iMJyk7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcblxuZnVuY3Rpb24gcGx1cmFsKHdvcmQsIG51bSkge1xuICB2YXIgZm9ybXMgPSB3b3JkLnNwbGl0KCdfJyk7XG4gIHJldHVybiBudW0gJSAxMCA9PT0gMSAmJiBudW0gJSAxMDAgIT09IDExID8gZm9ybXNbMF0gOiBudW0gJSAxMCA+PSAyICYmIG51bSAlIDEwIDw9IDQgJiYgKG51bSAlIDEwMCA8IDEwIHx8IG51bSAlIDEwMCA+PSAyMCkgPyBmb3Jtc1sxXSA6IGZvcm1zWzJdO1xufVxuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsKG51bWJlciwgd2l0aG91dFN1ZmZpeCwga2V5KSB7XG4gIHZhciBmb3JtYXQgPSB7XG4gICAgc3M6IHdpdGhvdXRTdWZmaXggPyAn0YHQtdC60YPQvdC00LBf0YHQtdC60YPQvdC00Lhf0YHQtdC60YPQvdC0JyA6ICfRgdC10LrRg9C90LTRg1/RgdC10LrRg9C90LTQuF/RgdC10LrRg9C90LQnLFxuICAgIG1tOiB3aXRob3V0U3VmZml4ID8gJ9GF0LLQuNC70LjQvdCwX9GF0LLQuNC70LjQvdC4X9GF0LLQuNC70LjQvScgOiAn0YXQstC40LvQuNC90YNf0YXQstC40LvQuNC90Lhf0YXQstC40LvQuNC9JyxcbiAgICBoaDogd2l0aG91dFN1ZmZpeCA/ICfQs9C+0LTQuNC90LBf0LPQvtC00LjQvdC4X9Cz0L7QtNC40L0nIDogJ9Cz0L7QtNC40L3Rg1/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvScsXG4gICAgZGQ6ICfQtNC10L3RjF/QtNC90ZZf0LTQvdGW0LInLFxuICAgIE1NOiAn0LzRltGB0Y/RhtGMX9C80ZbRgdGP0YbRll/QvNGW0YHRj9GG0ZbQsicsXG4gICAgeXk6ICfRgNGW0Lpf0YDQvtC60Lhf0YDQvtC60ZbQsidcbiAgfTtcblxuICBpZiAoa2V5ID09PSAnbScpIHtcbiAgICByZXR1cm4gd2l0aG91dFN1ZmZpeCA/ICfRhdCy0LjQu9C40L3QsCcgOiAn0YXQstC40LvQuNC90YMnO1xuICB9IGVsc2UgaWYgKGtleSA9PT0gJ2gnKSB7XG4gICAgcmV0dXJuIHdpdGhvdXRTdWZmaXggPyAn0LPQvtC00LjQvdCwJyA6ICfQs9C+0LTQuNC90YMnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudW1iZXIgKyAnICcgKyBwbHVyYWwoZm9ybWF0W2tleV0sICtudW1iZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdlZWtkYXlzQ2FzZVJlcGxhY2UobSwgZm9ybWF0KSB7XG4gIHZhciB3ZWVrZGF5cyA9IHtcbiAgICBub21pbmF0aXZlOiAn0L3QtdC00ZbQu9GPX9C/0L7QvdC10LTRltC70L7Qul/QstGW0LLRgtC+0YDQvtC6X9GB0LXRgNC10LTQsF/Rh9C10YLQstC10YBf0L/igJnRj9GC0L3QuNGG0Y9f0YHRg9Cx0L7RgtCwJy5zcGxpdCgnXycpLFxuICAgIGFjY3VzYXRpdmU6ICfQvdC10LTRltC70Y5f0L/QvtC90LXQtNGW0LvQvtC6X9Cy0ZbQstGC0L7RgNC+0Lpf0YHQtdGA0LXQtNGDX9GH0LXRgtCy0LXRgF/Qv+KAmdGP0YLQvdC40YbRjl/RgdGD0LHQvtGC0YMnLnNwbGl0KCdfJyksXG4gICAgZ2VuaXRpdmU6ICfQvdC10LTRltC70ZZf0L/QvtC90LXQtNGW0LvQutCwX9Cy0ZbQstGC0L7RgNC60LBf0YHQtdGA0LXQtNC4X9GH0LXRgtCy0LXRgNCz0LBf0L/igJnRj9GC0L3QuNGG0ZZf0YHRg9Cx0L7RgtC4Jy5zcGxpdCgnXycpXG4gIH0sXG4gICAgICBub3VuQ2FzZTtcblxuICBpZiAobSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiB3ZWVrZGF5c1snbm9taW5hdGl2ZSddLnNsaWNlKDEsIDcpLmNvbmNhdCh3ZWVrZGF5c1snbm9taW5hdGl2ZSddLnNsaWNlKDAsIDEpKTtcbiAgfVxuXG4gIGlmICghbSkge1xuICAgIHJldHVybiB3ZWVrZGF5c1snbm9taW5hdGl2ZSddO1xuICB9XG5cbiAgbm91bkNhc2UgPSAvKFxcW1vQktCy0KPRg11cXF0pID9kZGRkLy50ZXN0KGZvcm1hdCkgPyAnYWNjdXNhdGl2ZScgOiAvXFxbPyg/OtC80LjQvdGD0LvQvtGXfNC90LDRgdGC0YPQv9C90L7Rlyk/ID9cXF0gP2RkZGQvLnRlc3QoZm9ybWF0KSA/ICdnZW5pdGl2ZScgOiAnbm9taW5hdGl2ZSc7XG4gIHJldHVybiB3ZWVrZGF5c1tub3VuQ2FzZV1bbS5kYXkoKV07XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NIb3Vyc0Z1bmN0aW9uKHN0cikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzdHIgKyAn0L4nICsgKHRoaXMuaG91cnMoKSA9PT0gMTEgPyAn0LEnIDogJycpICsgJ10gTFQnO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd1aycsIHtcbiAgbW9udGhzOiB7XG4gICAgZm9ybWF0OiAn0YHRltGH0L3Rj1/Qu9GO0YLQvtCz0L5f0LHQtdGA0LXQt9C90Y9f0LrQstGW0YLQvdGPX9GC0YDQsNCy0L3Rj1/Rh9C10YDQstC90Y9f0LvQuNC/0L3Rj1/RgdC10YDQv9C90Y9f0LLQtdGA0LXRgdC90Y9f0LbQvtCy0YLQvdGPX9C70LjRgdGC0L7Qv9Cw0LTQsF/Qs9GA0YPQtNC90Y8nLnNwbGl0KCdfJyksXG4gICAgc3RhbmRhbG9uZTogJ9GB0ZbRh9C10L3RjF/Qu9GO0YLQuNC5X9Cx0LXRgNC10LfQtdC90Yxf0LrQstGW0YLQtdC90Yxf0YLRgNCw0LLQtdC90Yxf0YfQtdGA0LLQtdC90Yxf0LvQuNC/0LXQvdGMX9GB0LXRgNC/0LXQvdGMX9Cy0LXRgNC10YHQtdC90Yxf0LbQvtCy0YLQtdC90Yxf0LvQuNGB0YLQvtC/0LDQtF/Qs9GA0YPQtNC10L3RjCcuc3BsaXQoJ18nKVxuICB9LFxuICBtb250aHNTaG9ydDogJ9GB0ZbRh1/Qu9GO0YJf0LHQtdGAX9C60LLRltGCX9GC0YDQsNCyX9GH0LXRgNCyX9C70LjQv1/RgdC10YDQv1/QstC10YBf0LbQvtCy0YJf0LvQuNGB0YJf0LPRgNGD0LQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiB3ZWVrZGF5c0Nhc2VSZXBsYWNlLFxuICB3ZWVrZGF5c1Nob3J0OiAn0L3QtF/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQvdC0X9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQuTU0uWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWSDRgC4nLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZINGALiwgSEg6bW0nLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSDRgC4sIEhIOm1tJ1xuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6IHByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCdb0KHRjNC+0LPQvtC00L3RliAnKSxcbiAgICBuZXh0RGF5OiBwcm9jZXNzSG91cnNGdW5jdGlvbignW9CX0LDQstGC0YDQsCAnKSxcbiAgICBsYXN0RGF5OiBwcm9jZXNzSG91cnNGdW5jdGlvbignW9CS0YfQvtGA0LAgJyksXG4gICAgbmV4dFdlZWs6IHByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCdb0KNdIGRkZGQgWycpLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2VlaygpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kYXkoKSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgcmV0dXJuIHByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCdb0JzQuNC90YPQu9C+0ZddIGRkZGQgWycpLmNhbGwodGhpcyk7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gcHJvY2Vzc0hvdXJzRnVuY3Rpb24oJ1vQnNC40L3Rg9C70L7Qs9C+XSBkZGRkIFsnKS5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfQt9CwICVzJyxcbiAgICBwYXN0OiAnJXMg0YLQvtC80YMnLFxuICAgIHM6ICfQtNC10LrRltC70YzQutCwINGB0LXQutGD0L3QtCcsXG4gICAgc3M6IHJlbGF0aXZlVGltZVdpdGhQbHVyYWwsXG4gICAgbTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBtbTogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBoOiAn0LPQvtC00LjQvdGDJyxcbiAgICBoaDogcmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxcbiAgICBkOiAn0LTQtdC90YwnLFxuICAgIGRkOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIE06ICfQvNGW0YHRj9GG0YwnLFxuICAgIE1NOiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLFxuICAgIHk6ICfRgNGW0LonLFxuICAgIHl5OiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/QvdC+0YfRlnzRgNCw0L3QutGDfNC00L3Rj3zQstC10YfQvtGA0LAvLFxuICBpc1BNOiBmdW5jdGlvbiBpc1BNKGlucHV0KSB7XG4gICAgcmV0dXJuIC9eKNC00L3Rj3zQstC10YfQvtGA0LApJC8udGVzdChpbnB1dCk7XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91ciA8IDQpIHtcbiAgICAgIHJldHVybiAn0L3QvtGH0ZYnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDEyKSB7XG4gICAgICByZXR1cm4gJ9GA0LDQvdC60YMnO1xuICAgIH0gZWxzZSBpZiAoaG91ciA8IDE3KSB7XG4gICAgICByZXR1cm4gJ9C00L3Rjyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0LLQtdGH0L7RgNCwJztcbiAgICB9XG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfS0o0Ll80LPQvikvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ00nOlxuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICct0LknO1xuXG4gICAgICBjYXNlICdEJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICct0LPQvic7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogN1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG52YXIgbW9udGhzID0gWyfYrNmG2YjYsduMJywgJ9mB2LHZiNix24wnLCAn2YXYp9ix2oYnLCAn2KfZvtix24zZhCcsICfZhdim24wnLCAn2KzZiNmGJywgJ9is2YjZhNin2KbbjCcsICfYp9qv2LPYqicsICfYs9iq2YXYqNixJywgJ9in2qnYqtmI2KjYsScsICfZhtmI2YXYqNixJywgJ9iv2LPZhdio2LEnXSxcbiAgICBkYXlzID0gWyfYp9iq2YjYp9ixJywgJ9m+24zYsScsICfZhdmG2q/ZhCcsICfYqNiv2r4nLCAn2KzZhdi52LHYp9iqJywgJ9is2YXYuduBJywgJ9uB2YHYqtuBJ107XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd1cicsIHtcbiAgbW9udGhzOiBtb250aHMsXG4gIG1vbnRoc1Nob3J0OiBtb250aHMsXG4gIHdlZWtkYXlzOiBkYXlzLFxuICB3ZWVrZGF5c1Nob3J0OiBkYXlzLFxuICB3ZWVrZGF5c01pbjogZGF5cyxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZNiMIEQgTU1NTSBZWVlZIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv2LXYqNitfNi02KfZhS8sXG4gIGlzUE06IGZ1bmN0aW9uIGlzUE0oaW5wdXQpIHtcbiAgICByZXR1cm4gJ9i02KfZhScgPT09IGlucHV0O1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXIgPCAxMikge1xuICAgICAgcmV0dXJuICfYtdio2K0nO1xuICAgIH1cblxuICAgIHJldHVybiAn2LTYp9mFJztcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9ii2Kwg2KjZiNmC2KpdIExUJyxcbiAgICBuZXh0RGF5OiAnW9qp2YQg2KjZiNmC2KpdIExUJyxcbiAgICBuZXh0V2VlazogJ2RkZGQgW9io2YjZgtiqXSBMVCcsXG4gICAgbGFzdERheTogJ1var9iw2LTYqtuBINix2YjYsiDYqNmI2YLYql0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW9qv2LDYtNiq24FdIGRkZGQgW9io2YjZgtiqXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyDYqNi52K8nLFxuICAgIHBhc3Q6ICclcyDZgtio2YQnLFxuICAgIHM6ICfahtmG2K8g2LPbjNqp2YbaiCcsXG4gICAgc3M6ICclZCDYs9uM2qnZhtqIJyxcbiAgICBtOiAn2KfbjNqpINmF2YbZuScsXG4gICAgbW06ICclZCDZhdmG2bknLFxuICAgIGg6ICfYp9uM2qkg2q/avtmG2bnbgScsXG4gICAgaGg6ICclZCDar9q+2YbZuduSJyxcbiAgICBkOiAn2KfbjNqpINiv2YYnLFxuICAgIGRkOiAnJWQg2K/ZhicsXG4gICAgTTogJ9in24zaqSDZhdin24EnLFxuICAgIE1NOiAnJWQg2YXYp9uBJyxcbiAgICB5OiAn2KfbjNqpINiz2KfZhCcsXG4gICAgeXk6ICclZCDYs9in2YQnXG4gIH0sXG4gIHByZXBhcnNlOiBmdW5jdGlvbiBwcmVwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csICcsJyk7XG4gIH0sXG4gIHBvc3Rmb3JtYXQ6IGZ1bmN0aW9uIHBvc3Rmb3JtYXQoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8sL2csICfYjCcpO1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd1ei1sYXRuJywge1xuICBtb250aHM6ICdZYW52YXJfRmV2cmFsX01hcnRfQXByZWxfTWF5X0l5dW5fSXl1bF9Bdmd1c3RfU2VudGFicl9Pa3RhYnJfTm95YWJyX0Rla2Ficicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdZYW5fRmV2X01hcl9BcHJfTWF5X0l5dW5fSXl1bF9BdmdfU2VuX09rdF9Ob3lfRGVrJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ1lha3NoYW5iYV9EdXNoYW5iYV9TZXNoYW5iYV9DaG9yc2hhbmJhX1BheXNoYW5iYV9KdW1hX1NoYW5iYScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ1lha19EdXNoX1Nlc2hfQ2hvcl9QYXlfSnVtX1NoYW4nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnWWFfRHVfU2VfQ2hvX1BhX0p1X1NoYScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnRCBNTU1NIFlZWVksIGRkZGQgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tCdWd1biBzb2F0XSBMVCBbZGFdJyxcbiAgICBuZXh0RGF5OiAnW0VydGFnYV0gTFQgW2RhXScsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFtrdW5pIHNvYXRdIExUIFtkYV0nLFxuICAgIGxhc3REYXk6ICdbS2VjaGEgc29hdF0gTFQgW2RhXScsXG4gICAgbGFzdFdlZWs6IFwiW08ndGdhbl0gZGRkZCBba3VuaSBzb2F0XSBMVCBbZGFdXCIsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICdZYXFpbiAlcyBpY2hpZGEnLFxuICAgIHBhc3Q6ICdCaXIgbmVjaGEgJXMgb2xkaW4nLFxuICAgIHM6ICdzb25peWEnLFxuICAgIHNzOiAnJWQgc29uaXlhJyxcbiAgICBtOiAnYmlyIGRhcWlxYScsXG4gICAgbW06ICclZCBkYXFpcWEnLFxuICAgIGg6ICdiaXIgc29hdCcsXG4gICAgaGg6ICclZCBzb2F0JyxcbiAgICBkOiAnYmlyIGt1bicsXG4gICAgZGQ6ICclZCBrdW4nLFxuICAgIE06ICdiaXIgb3knLFxuICAgIE1NOiAnJWQgb3knLFxuICAgIHk6ICdiaXIgeWlsJyxcbiAgICB5eTogJyVkIHlpbCdcbiAgfSxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgndXonLCB7XG4gIG1vbnRoczogJ9GP0L3QstCw0YBf0YTQtdCy0YDQsNC7X9C80LDRgNGCX9Cw0L/RgNC10Ltf0LzQsNC5X9C40Y7QvV/QuNGO0Ltf0LDQstCz0YPRgdGCX9GB0LXQvdGC0Y/QsdGAX9C+0LrRgtGP0LHRgF/QvdC+0Y/QsdGAX9C00LXQutCw0LHRgCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICfRj9C90LJf0YTQtdCyX9C80LDRgF/QsNC/0YBf0LzQsNC5X9C40Y7QvV/QuNGO0Ltf0LDQstCzX9GB0LXQvV/QvtC60YJf0L3QvtGPX9C00LXQuicuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfQr9C60YjQsNC90LHQsF/QlNGD0YjQsNC90LHQsF/QodC10YjQsNC90LHQsF/Qp9C+0YDRiNCw0L3QsdCwX9Cf0LDQudGI0LDQvdCx0LBf0JbRg9C80LBf0KjQsNC90LHQsCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ9Cv0LrRiF/QlNGD0Yhf0KHQtdGIX9Cn0L7RgF/Qn9Cw0Llf0JbRg9C8X9Co0LDQvScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfQr9C6X9CU0YNf0KHQtV/Qp9C+X9Cf0LBf0JbRg1/QqNCwJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnREQvTU0vWVlZWScsXG4gICAgTEw6ICdEIE1NTU0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFlZWVkgSEg6bW0nLFxuICAgIExMTEw6ICdEIE1NTU0gWVlZWSwgZGRkZCBISDptbSdcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW9CR0YPQs9GD0L0g0YHQvtCw0YJdIExUIFvQtNCwXScsXG4gICAgbmV4dERheTogJ1vQrdGA0YLQsNCz0LBdIExUIFvQtNCwXScsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvQutGD0L3QuCDRgdC+0LDRgl0gTFQgW9C00LBdJyxcbiAgICBsYXN0RGF5OiAnW9Ca0LXRh9CwINGB0L7QsNGCXSBMVCBb0LTQsF0nLFxuICAgIGxhc3RXZWVrOiAnW9Cj0YLQs9Cw0L1dIGRkZGQgW9C60YPQvdC4INGB0L7QsNGCXSBMVCBb0LTQsF0nLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAn0K/QutC40L0gJXMg0LjRh9C40LTQsCcsXG4gICAgcGFzdDogJ9CR0LjRgCDQvdC10YfQsCAlcyDQvtC70LTQuNC9JyxcbiAgICBzOiAn0YTRg9GA0YHQsNGCJyxcbiAgICBzczogJyVkINGE0YPRgNGB0LDRgicsXG4gICAgbTogJ9Cx0LjRgCDQtNCw0LrQuNC60LAnLFxuICAgIG1tOiAnJWQg0LTQsNC60LjQutCwJyxcbiAgICBoOiAn0LHQuNGAINGB0L7QsNGCJyxcbiAgICBoaDogJyVkINGB0L7QsNGCJyxcbiAgICBkOiAn0LHQuNGAINC60YPQvScsXG4gICAgZGQ6ICclZCDQutGD0L0nLFxuICAgIE06ICfQsdC40YAg0L7QuScsXG4gICAgTU06ICclZCDQvtC5JyxcbiAgICB5OiAn0LHQuNGAINC50LjQuycsXG4gICAgeXk6ICclZCDQudC40LsnXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA3XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3ZpJywge1xuICBtb250aHM6ICd0aMOhbmcgMV90aMOhbmcgMl90aMOhbmcgM190aMOhbmcgNF90aMOhbmcgNV90aMOhbmcgNl90aMOhbmcgN190aMOhbmcgOF90aMOhbmcgOV90aMOhbmcgMTBfdGjDoW5nIDExX3Row6FuZyAxMicuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICdUaGcgMDFfVGhnIDAyX1RoZyAwM19UaGcgMDRfVGhnIDA1X1RoZyAwNl9UaGcgMDdfVGhnIDA4X1RoZyAwOV9UaGcgMTBfVGhnIDExX1RoZyAxMicuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdjaOG7pyBuaOG6rXRfdGjhu6kgaGFpX3Ro4bupIGJhX3Ro4bupIHTGsF90aOG7qSBuxINtX3Ro4bupIHPDoXVfdGjhu6kgYuG6o3knLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICdDTl9UMl9UM19UNF9UNV9UNl9UNycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdDTl9UMl9UM19UNF9UNV9UNl9UNycuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNQYXJzZUV4YWN0OiB0cnVlLFxuICBtZXJpZGllbVBhcnNlOiAvc2F8Y2gvaSxcbiAgaXNQTTogZnVuY3Rpb24gaXNQTShpbnB1dCkge1xuICAgIHJldHVybiAvXmNoJC9pLnRlc3QoaW5wdXQpO1xuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPCAxMikge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAnc2EnIDogJ1NBJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlzTG93ZXIgPyAnY2gnIDogJ0NIJztcbiAgICB9XG4gIH0sXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBbbsSDbV0gWVlZWScsXG4gICAgTExMOiAnRCBNTU1NIFtuxINtXSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFtuxINtXSBZWVlZIEhIOm1tJyxcbiAgICBsOiAnREQvTS9ZWVlZJyxcbiAgICBsbDogJ0QgTU1NIFlZWVknLFxuICAgIGxsbDogJ0QgTU1NIFlZWVkgSEg6bW0nLFxuICAgIGxsbGw6ICdkZGQsIEQgTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tIw7RtIG5heSBsw7pjXSBMVCcsXG4gICAgbmV4dERheTogJ1tOZ8OgeSBtYWkgbMO6Y10gTFQnLFxuICAgIG5leHRXZWVrOiAnZGRkZCBbdHXhuqduIHThu5tpIGzDumNdIExUJyxcbiAgICBsYXN0RGF5OiAnW0jDtG0gcXVhIGzDumNdIExUJyxcbiAgICBsYXN0V2VlazogJ2RkZGQgW3R14bqnbiB0csaw4bubYyBsw7pjXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclcyB04bubaScsXG4gICAgcGFzdDogJyVzIHRyxrDhu5tjJyxcbiAgICBzOiAndsOgaSBnacOieScsXG4gICAgc3M6ICclZCBnacOieScsXG4gICAgbTogJ23hu5l0IHBow7p0JyxcbiAgICBtbTogJyVkIHBow7p0JyxcbiAgICBoOiAnbeG7mXQgZ2nhu50nLFxuICAgIGhoOiAnJWQgZ2nhu50nLFxuICAgIGQ6ICdt4buZdCBuZ8OgeScsXG4gICAgZGQ6ICclZCBuZ8OgeScsXG4gICAgdzogJ23hu5l0IHR14bqnbicsXG4gICAgd3c6ICclZCB0deG6p24nLFxuICAgIE06ICdt4buZdCB0aMOhbmcnLFxuICAgIE1NOiAnJWQgdGjDoW5nJyxcbiAgICB5OiAnbeG7mXQgbsSDbScsXG4gICAgeXk6ICclZCBuxINtJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0vLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3gtcHNldWRvJywge1xuICBtb250aHM6ICdKfsOhw7HDusOhfnLDvV9GfsOpYnLDun7DoXLDvV9+TcOhcmN+aF/DgXB+csOtbF9+TcOhw71ffkrDusOxw6l+X0rDumx+w71fw4HDun5nw7pzdH5fU8OpcH50w6ltYn7DqXJfw5N+Y3TDs2J+w6lyX8ORfsOzdsOpbX5iw6lyX35Ew6ljw6l+bWLDqXInLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnSn7DocOxX35Gw6liX35Nw6FyX37DgXByX35Nw6HDvV9+SsO6w7FffkrDumxffsOBw7pnX35Tw6lwX37Dk2N0X37DkcOzdl9+RMOpYycuc3BsaXQoJ18nKSxcbiAgbW9udGhzUGFyc2VFeGFjdDogdHJ1ZSxcbiAgd2Vla2RheXM6ICdTfsO6w7Fkw6F+w71fTcOzfsOxZMOhw71+X1TDusOpfnNkw6HDvX5fV8OpZH7DscOpc2R+w6HDvV9UfmjDunJzfmTDocO9X35GcsOtZH7DocO9X1N+w6F0w7pyfmTDocO9Jy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAnU37DusOxX35Nw7PDsV9+VMO6w6lfflfDqWRfflRow7pffkZyw61fflPDoXQnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAnU37Dul9Nw7N+X1TDul9+V8OpX1R+aF9Gcn5fU8OhJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1BhcnNlRXhhY3Q6IHRydWUsXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgIExMTDogJ0QgTU1NTSBZWVlZIEhIOm1tJyxcbiAgICBMTExMOiAnZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0nXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tUfsOzZMOhfsO9IMOhdF0gTFQnLFxuICAgIG5leHREYXk6ICdbVH7Ds23Ds35ycsOzfncgw6F0XSBMVCcsXG4gICAgbmV4dFdlZWs6ICdkZGRkIFvDoXRdIExUJyxcbiAgICBsYXN0RGF5OiAnW8OdfsOpc3R+w6lyZMOhfsO9IMOhdF0gTFQnLFxuICAgIGxhc3RXZWVrOiAnW0x+w6FzdF0gZGRkZCBbw6F0XSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICfDrX7DsSAlcycsXG4gICAgcGFzdDogJyVzIMOhfmfDsycsXG4gICAgczogJ8OhIH5mw6l3IH5zw6ljw7N+w7FkcycsXG4gICAgc3M6ICclZCBzfsOpY8Ozw7F+ZHMnLFxuICAgIG06ICfDoSB+bcOtw7F+w7p0w6knLFxuICAgIG1tOiAnJWQgbX7DrcOxw7p+dMOpcycsXG4gICAgaDogJ8OhfsOxIGjDs37DunInLFxuICAgIGhoOiAnJWQgaH7Ds8O6cnMnLFxuICAgIGQ6ICfDoSB+ZMOhw70nLFxuICAgIGRkOiAnJWQgZH7DocO9cycsXG4gICAgTTogJ8OhIH5tw7PDsX50aCcsXG4gICAgTU06ICclZCBtfsOzw7F0fmhzJyxcbiAgICB5OiAnw6EgfsO9w6nDoXInLFxuICAgIHl5OiAnJWQgw71+w6nDoXJzJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0odGh8c3R8bmR8cmQpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIpIHtcbiAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICBvdXRwdXQgPSB+fihudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEgPyAndGgnIDogYiA9PT0gMSA/ICdzdCcgOiBiID09PSAyID8gJ25kJyA6IGIgPT09IDMgPyAncmQnIDogJ3RoJztcbiAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICB9LFxuICB3ZWVrOiB7XG4gICAgZG93OiAxLFxuICAgIGRveTogNFxuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd5bycsIHtcbiAgbW9udGhzOiAnU+G6ucyBcuG6ucyBX0XMgHJlzIBsZcyAX+G6uHLhurnMgG5hzIBfScyAZ2JlzIFfRcyAYmliaV9PzIBrdcyAZHVfQWfhurltb19PzIBndcyBbl9Pd2V3ZV/hu4zMgHdhzIByYcyAX0JlzIFsdcyBX+G7jMyAcOG6ucyAzIAnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnU+G6ucyBcl9FzIBybF/hurhybl9JzIBnYl9FzIBiaV9PzIBrdcyAX0Fn4bq5X0/MgGd1zIFfT3dlX+G7jMyAd2HMgF9CZcyBbF/hu4zMgHDhurnMgMyAJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ0HMgGnMgGt1zIFfQWplzIFfScyAc+G6ucyBZ3VuX+G7jGrhu43MgXJ1zIFf4buMauG7jcyBYuG7jV/hurh0acyAX0HMgGJhzIFt4bq5zIF0YScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ0HMgGnMgGtfQWplzIFfScyAc+G6ucyBX+G7jGpyX+G7jGpiX+G6uHRpzIBfQcyAYmHMgScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICdBzIBpzIBfQWpfScyAc1/hu4xyX+G7jGJf4bq4dF9BzIBiJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnaDptbSBBJyxcbiAgICBMVFM6ICdoOm1tOnNzIEEnLFxuICAgIEw6ICdERC9NTS9ZWVlZJyxcbiAgICBMTDogJ0QgTU1NTSBZWVlZJyxcbiAgICBMTEw6ICdEIE1NTU0gWVlZWSBoOm1tIEEnLFxuICAgIExMTEw6ICdkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEnXG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgc2FtZURheTogJ1tPzIBuacyAIG5pXSBMVCcsXG4gICAgbmV4dERheTogJ1vhu4zMgGxhIG5pXSBMVCcsXG4gICAgbmV4dFdlZWs6IFwiZGRkZCBb4buMc+G6ucyAIHRvzIFuJ2Lhu41dIFtuaV0gTFRcIixcbiAgICBsYXN0RGF5OiAnW0HMgG5hIG5pXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdkZGRkIFvhu4xz4bq5zIAgdG/MgWzhu43MgV0gW25pXSBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICduacyBICVzJyxcbiAgICBwYXN0OiAnJXMga+G7jWphzIEnLFxuICAgIHM6ICdpzIBz4bq5anXMgSBhYXlhzIEgZGllJyxcbiAgICBzczogJ2FheWHMgSAlZCcsXG4gICAgbTogJ2nMgHPhurlqdcyBIGthbicsXG4gICAgbW06ICdpzIBz4bq5anXMgSAlZCcsXG4gICAgaDogJ3dhzIFrYXRpIGthbicsXG4gICAgaGg6ICd3YcyBa2F0aSAlZCcsXG4gICAgZDogJ+G7jWrhu43MgSBrYW4nLFxuICAgIGRkOiAn4buNauG7jcyBICVkJyxcbiAgICBNOiAnb3N1zIAga2FuJyxcbiAgICBNTTogJ29zdcyAICVkJyxcbiAgICB5OiAn4buNZHXMgW4ga2FuJyxcbiAgICB5eTogJ+G7jWR1zIFuICVkJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAv4buNauG7jcyBXFxzXFxkezEsMn0vLFxuICBvcmRpbmFsOiAn4buNauG7jcyBICVkJyxcbiAgd2Vlazoge1xuICAgIGRvdzogMSxcbiAgICBkb3k6IDRcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnemgtY24nLCB7XG4gIG1vbnRoczogJ+S4gOaciF/kuozmnIhf5LiJ5pyIX+Wbm+aciF/kupTmnIhf5YWt5pyIX+S4g+aciF/lhavmnIhf5Lmd5pyIX+WNgeaciF/ljYHkuIDmnIhf5Y2B5LqM5pyIJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJzHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+aYn+acn+aXpV/mmJ/mnJ/kuIBf5pif5pyf5LqMX+aYn+acn+S4iV/mmJ/mnJ/lm5tf5pif5pyf5LqUX+aYn+acn+WFrScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+WRqOaXpV/lkajkuIBf5ZGo5LqMX+WRqOS4iV/lkajlm5tf5ZGo5LqUX+WRqOWFrScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZL01NL0REJyxcbiAgICBMTDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgTExMOiAnWVlZWeW5tE3mnIhE5pelQWjngrltbeWIhicsXG4gICAgTExMTDogJ1lZWVnlubRN5pyIROaXpWRkZGRBaOeCuW1t5YiGJyxcbiAgICBsOiAnWVlZWS9NL0QnLFxuICAgIGxsOiAnWVlZWeW5tE3mnIhE5pelJyxcbiAgICBsbGw6ICdZWVlZ5bm0TeaciETml6UgSEg6bW0nLFxuICAgIGxsbGw6ICdZWVlZ5bm0TeaciETml6VkZGRkIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv5YeM5pmofOaXqeS4inzkuIrljYh85Lit5Y2IfOS4i+WNiHzmmZrkuIovLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn5YeM5pmoJyB8fCBtZXJpZGllbSA9PT0gJ+aXqeS4iicgfHwgbWVyaWRpZW0gPT09ICfkuIrljYgnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn5LiL5Y2IJyB8fCBtZXJpZGllbSA9PT0gJ+aZmuS4iicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBob3VyID49IDExID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICB2YXIgaG0gPSBob3VyICogMTAwICsgbWludXRlO1xuXG4gICAgaWYgKGhtIDwgNjAwKSB7XG4gICAgICByZXR1cm4gJ+WHjOaZqCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDkwMCkge1xuICAgICAgcmV0dXJuICfml6nkuIonO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMTMwKSB7XG4gICAgICByZXR1cm4gJ+S4iuWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDEyMzApIHtcbiAgICAgIHJldHVybiAn5Lit5Y2IJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTgwMCkge1xuICAgICAgcmV0dXJuICfkuIvljYgnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+aZmuS4iic7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb5LuK5aSpXUxUJyxcbiAgICBuZXh0RGF5OiAnW+aYjuWkqV1MVCcsXG4gICAgbmV4dFdlZWs6IGZ1bmN0aW9uIG5leHRXZWVrKG5vdykge1xuICAgICAgaWYgKG5vdy53ZWVrKCkgIT09IHRoaXMud2VlaygpKSB7XG4gICAgICAgIHJldHVybiAnW+S4i11kZGRMVCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ1vmnKxdZGRkTFQnO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGFzdERheTogJ1vmmKjlpKldTFQnLFxuICAgIGxhc3RXZWVrOiBmdW5jdGlvbiBsYXN0V2Vlayhub3cpIHtcbiAgICAgIGlmICh0aGlzLndlZWsoKSAhPT0gbm93LndlZWsoKSkge1xuICAgICAgICByZXR1cm4gJ1vkuIpdZGRkTFQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdb5pysXWRkZExUJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KOaXpXzmnIh85ZGoKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pelJztcblxuICAgICAgY2FzZSAnTSc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pyIJztcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICflkagnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPlkI4nLFxuICAgIHBhc3Q6ICclc+WJjScsXG4gICAgczogJ+WHoOenkicsXG4gICAgc3M6ICclZCDnp5InLFxuICAgIG06ICcxIOWIhumSnycsXG4gICAgbW06ICclZCDliIbpkp8nLFxuICAgIGg6ICcxIOWwj+aXticsXG4gICAgaGg6ICclZCDlsI/ml7YnLFxuICAgIGQ6ICcxIOWkqScsXG4gICAgZGQ6ICclZCDlpKknLFxuICAgIHc6ICcxIOWRqCcsXG4gICAgd3c6ICclZCDlkagnLFxuICAgIE06ICcxIOS4quaciCcsXG4gICAgTU06ICclZCDkuKrmnIgnLFxuICAgIHk6ICcxIOW5tCcsXG4gICAgeXk6ICclZCDlubQnXG4gIH0sXG4gIHdlZWs6IHtcbiAgICBkb3c6IDEsXG4gICAgZG95OiA0XG4gIH1cbn0pOyIsImltcG9ydCBtb21lbnQgZnJvbSAnLi4vbW9tZW50JztcbmV4cG9ydCBkZWZhdWx0IG1vbWVudC5kZWZpbmVMb2NhbGUoJ3poLWhrJywge1xuICBtb250aHM6ICfkuIDmnIhf5LqM5pyIX+S4ieaciF/lm5vmnIhf5LqU5pyIX+WFreaciF/kuIPmnIhf5YWr5pyIX+S5neaciF/ljYHmnIhf5Y2B5LiA5pyIX+WNgeS6jOaciCcuc3BsaXQoJ18nKSxcbiAgbW9udGhzU2hvcnQ6ICcx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCcuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXM6ICfmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzU2hvcnQ6ICfpgLHml6Vf6YCx5LiAX+mAseS6jF/pgLHkuIlf6YCx5ZubX+mAseS6lF/pgLHlha0nLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzTWluOiAn5pelX+S4gF/kuoxf5LiJX+Wbm1/kupRf5YWtJy5zcGxpdCgnXycpLFxuICBsb25nRGF0ZUZvcm1hdDoge1xuICAgIExUOiAnSEg6bW0nLFxuICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICBMOiAnWVlZWS9NTS9ERCcsXG4gICAgTEw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIExMTDogJ1lZWVnlubRN5pyIROaXpSBISDptbScsXG4gICAgTExMTDogJ1lZWVnlubRN5pyIROaXpWRkZGQgSEg6bW0nLFxuICAgIGw6ICdZWVlZL00vRCcsXG4gICAgbGw6ICdZWVlZ5bm0TeaciETml6UnLFxuICAgIGxsbDogJ1lZWVnlubRN5pyIROaXpSBISDptbScsXG4gICAgbGxsbDogJ1lZWVnlubRN5pyIROaXpWRkZGQgSEg6bW0nXG4gIH0sXG4gIG1lcmlkaWVtUGFyc2U6IC/lh4zmmah85pep5LiKfOS4iuWNiHzkuK3ljYh85LiL5Y2IfOaZmuS4ii8sXG4gIG1lcmlkaWVtSG91cjogZnVuY3Rpb24gbWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgaWYgKGhvdXIgPT09IDEyKSB7XG4gICAgICBob3VyID0gMDtcbiAgICB9XG5cbiAgICBpZiAobWVyaWRpZW0gPT09ICflh4zmmagnIHx8IG1lcmlkaWVtID09PSAn5pep5LiKJyB8fCBtZXJpZGllbSA9PT0gJ+S4iuWNiCcpIHtcbiAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfkuK3ljYgnKSB7XG4gICAgICByZXR1cm4gaG91ciA+PSAxMSA/IGhvdXIgOiBob3VyICsgMTI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+S4i+WNiCcgfHwgbWVyaWRpZW0gPT09ICfmmZrkuIonKSB7XG4gICAgICByZXR1cm4gaG91ciArIDEyO1xuICAgIH1cbiAgfSxcbiAgbWVyaWRpZW06IGZ1bmN0aW9uIG1lcmlkaWVtKGhvdXIsIG1pbnV0ZSwgaXNMb3dlcikge1xuICAgIHZhciBobSA9IGhvdXIgKiAxMDAgKyBtaW51dGU7XG5cbiAgICBpZiAoaG0gPCA2MDApIHtcbiAgICAgIHJldHVybiAn5YeM5pmoJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgOTAwKSB7XG4gICAgICByZXR1cm4gJ+aXqeS4iic7XG4gICAgfSBlbHNlIGlmIChobSA8IDEyMDApIHtcbiAgICAgIHJldHVybiAn5LiK5Y2IJztcbiAgICB9IGVsc2UgaWYgKGhtID09PSAxMjAwKSB7XG4gICAgICByZXR1cm4gJ+S4reWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDE4MDApIHtcbiAgICAgIHJldHVybiAn5LiL5Y2IJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfmmZrkuIonO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+S7iuWkqV1MVCcsXG4gICAgbmV4dERheTogJ1vmmI7lpKldTFQnLFxuICAgIG5leHRXZWVrOiAnW+S4i11kZGRkTFQnLFxuICAgIGxhc3REYXk6ICdb5pio5aSpXUxUJyxcbiAgICBsYXN0V2VlazogJ1vkuIpdZGRkZExUJyxcbiAgICBzYW1lRWxzZTogJ0wnXG4gIH0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSjml6V85pyIfOmAsSkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlciwgcGVyaW9kKSB7XG4gICAgc3dpdGNoIChwZXJpb2QpIHtcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnRCc6XG4gICAgICBjYXNlICdEREQnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+aXpSc7XG5cbiAgICAgIGNhc2UgJ00nOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+aciCc7XG5cbiAgICAgIGNhc2UgJ3cnOlxuICAgICAgY2FzZSAnVyc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn6YCxJztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9XG4gIH0sXG4gIHJlbGF0aXZlVGltZToge1xuICAgIGZ1dHVyZTogJyVz5b6MJyxcbiAgICBwYXN0OiAnJXPliY0nLFxuICAgIHM6ICflub7np5InLFxuICAgIHNzOiAnJWQg56eSJyxcbiAgICBtOiAnMSDliIbpkJgnLFxuICAgIG1tOiAnJWQg5YiG6ZCYJyxcbiAgICBoOiAnMSDlsI/mmYInLFxuICAgIGhoOiAnJWQg5bCP5pmCJyxcbiAgICBkOiAnMSDlpKknLFxuICAgIGRkOiAnJWQg5aSpJyxcbiAgICBNOiAnMSDlgIvmnIgnLFxuICAgIE1NOiAnJWQg5YCL5pyIJyxcbiAgICB5OiAnMSDlubQnLFxuICAgIHl5OiAnJWQg5bm0J1xuICB9XG59KTsiLCJpbXBvcnQgbW9tZW50IGZyb20gJy4uL21vbWVudCc7XG5leHBvcnQgZGVmYXVsdCBtb21lbnQuZGVmaW5lTG9jYWxlKCd6aC1tbycsIHtcbiAgbW9udGhzOiAn5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgnLnNwbGl0KCdfJyksXG4gIG1vbnRoc1Nob3J0OiAnMeaciF8y5pyIXzPmnIhfNOaciF815pyIXzbmnIhfN+aciF845pyIXznmnIhfMTDmnIhfMTHmnIhfMTLmnIgnLnNwbGl0KCdfJyksXG4gIHdlZWtkYXlzOiAn5pif5pyf5pelX+aYn+acn+S4gF/mmJ/mnJ/kuoxf5pif5pyf5LiJX+aYn+acn+Wbm1/mmJ/mnJ/kupRf5pif5pyf5YWtJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c1Nob3J0OiAn6YCx5pelX+mAseS4gF/pgLHkuoxf6YCx5LiJX+mAseWbm1/pgLHkupRf6YCx5YWtJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5c01pbjogJ+aXpV/kuIBf5LqMX+S4iV/lm5tf5LqUX+WFrScuc3BsaXQoJ18nKSxcbiAgbG9uZ0RhdGVGb3JtYXQ6IHtcbiAgICBMVDogJ0hIOm1tJyxcbiAgICBMVFM6ICdISDptbTpzcycsXG4gICAgTDogJ0REL01NL1lZWVknLFxuICAgIExMOiAnWVlZWeW5tE3mnIhE5pelJyxcbiAgICBMTEw6ICdZWVlZ5bm0TeaciETml6UgSEg6bW0nLFxuICAgIExMTEw6ICdZWVlZ5bm0TeaciETml6VkZGRkIEhIOm1tJyxcbiAgICBsOiAnRC9NL1lZWVknLFxuICAgIGxsOiAnWVlZWeW5tE3mnIhE5pelJyxcbiAgICBsbGw6ICdZWVlZ5bm0TeaciETml6UgSEg6bW0nLFxuICAgIGxsbGw6ICdZWVlZ5bm0TeaciETml6VkZGRkIEhIOm1tJ1xuICB9LFxuICBtZXJpZGllbVBhcnNlOiAv5YeM5pmofOaXqeS4inzkuIrljYh85Lit5Y2IfOS4i+WNiHzmmZrkuIovLFxuICBtZXJpZGllbUhvdXI6IGZ1bmN0aW9uIG1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSkge1xuICAgIGlmIChob3VyID09PSAxMikge1xuICAgICAgaG91ciA9IDA7XG4gICAgfVxuXG4gICAgaWYgKG1lcmlkaWVtID09PSAn5YeM5pmoJyB8fCBtZXJpZGllbSA9PT0gJ+aXqeS4iicgfHwgbWVyaWRpZW0gPT09ICfkuIrljYgnKSB7XG4gICAgICByZXR1cm4gaG91cjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn5Lit5Y2IJykge1xuICAgICAgcmV0dXJuIGhvdXIgPj0gMTEgPyBob3VyIDogaG91ciArIDEyO1xuICAgIH0gZWxzZSBpZiAobWVyaWRpZW0gPT09ICfkuIvljYgnIHx8IG1lcmlkaWVtID09PSAn5pma5LiKJykge1xuICAgICAgcmV0dXJuIGhvdXIgKyAxMjtcbiAgICB9XG4gIH0sXG4gIG1lcmlkaWVtOiBmdW5jdGlvbiBtZXJpZGllbShob3VyLCBtaW51dGUsIGlzTG93ZXIpIHtcbiAgICB2YXIgaG0gPSBob3VyICogMTAwICsgbWludXRlO1xuXG4gICAgaWYgKGhtIDwgNjAwKSB7XG4gICAgICByZXR1cm4gJ+WHjOaZqCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDkwMCkge1xuICAgICAgcmV0dXJuICfml6nkuIonO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMTMwKSB7XG4gICAgICByZXR1cm4gJ+S4iuWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDEyMzApIHtcbiAgICAgIHJldHVybiAn5Lit5Y2IJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTgwMCkge1xuICAgICAgcmV0dXJuICfkuIvljYgnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ+aZmuS4iic7XG4gICAgfVxuICB9LFxuICBjYWxlbmRhcjoge1xuICAgIHNhbWVEYXk6ICdb5LuK5aSpXSBMVCcsXG4gICAgbmV4dERheTogJ1vmmI7lpKldIExUJyxcbiAgICBuZXh0V2VlazogJ1vkuItdZGRkZCBMVCcsXG4gICAgbGFzdERheTogJ1vmmKjlpKldIExUJyxcbiAgICBsYXN0V2VlazogJ1vkuIpdZGRkZCBMVCcsXG4gICAgc2FtZUVsc2U6ICdMJ1xuICB9LFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0o5pelfOaciHzpgLEpLyxcbiAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudW1iZXIsIHBlcmlvZCkge1xuICAgIHN3aXRjaCAocGVyaW9kKSB7XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgY2FzZSAnREREJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfml6UnO1xuXG4gICAgICBjYXNlICdNJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfmnIgnO1xuXG4gICAgICBjYXNlICd3JzpcbiAgICAgIGNhc2UgJ1cnOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ+mAsSc7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICB9LFxuICByZWxhdGl2ZVRpbWU6IHtcbiAgICBmdXR1cmU6ICclc+WFpycsXG4gICAgcGFzdDogJyVz5YmNJyxcbiAgICBzOiAn5bm+56eSJyxcbiAgICBzczogJyVkIOenkicsXG4gICAgbTogJzEg5YiG6ZCYJyxcbiAgICBtbTogJyVkIOWIhumQmCcsXG4gICAgaDogJzEg5bCP5pmCJyxcbiAgICBoaDogJyVkIOWwj+aZgicsXG4gICAgZDogJzEg5aSpJyxcbiAgICBkZDogJyVkIOWkqScsXG4gICAgTTogJzEg5YCL5pyIJyxcbiAgICBNTTogJyVkIOWAi+aciCcsXG4gICAgeTogJzEg5bm0JyxcbiAgICB5eTogJyVkIOW5tCdcbiAgfVxufSk7IiwiaW1wb3J0IG1vbWVudCBmcm9tICcuLi9tb21lbnQnO1xuZXhwb3J0IGRlZmF1bHQgbW9tZW50LmRlZmluZUxvY2FsZSgnemgtdHcnLCB7XG4gIG1vbnRoczogJ+S4gOaciF/kuozmnIhf5LiJ5pyIX+Wbm+aciF/kupTmnIhf5YWt5pyIX+S4g+aciF/lhavmnIhf5Lmd5pyIX+WNgeaciF/ljYHkuIDmnIhf5Y2B5LqM5pyIJy5zcGxpdCgnXycpLFxuICBtb250aHNTaG9ydDogJzHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIJy5zcGxpdCgnXycpLFxuICB3ZWVrZGF5czogJ+aYn+acn+aXpV/mmJ/mnJ/kuIBf5pif5pyf5LqMX+aYn+acn+S4iV/mmJ/mnJ/lm5tf5pif5pyf5LqUX+aYn+acn+WFrScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNTaG9ydDogJ+mAseaXpV/pgLHkuIBf6YCx5LqMX+mAseS4iV/pgLHlm5tf6YCx5LqUX+mAseWFrScuc3BsaXQoJ18nKSxcbiAgd2Vla2RheXNNaW46ICfml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0nLnNwbGl0KCdfJyksXG4gIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgTFQ6ICdISDptbScsXG4gICAgTFRTOiAnSEg6bW06c3MnLFxuICAgIEw6ICdZWVlZL01NL0REJyxcbiAgICBMTDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgTExMOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBMTExMOiAnWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbScsXG4gICAgbDogJ1lZWVkvTS9EJyxcbiAgICBsbDogJ1lZWVnlubRN5pyIROaXpScsXG4gICAgbGxsOiAnWVlZWeW5tE3mnIhE5pelIEhIOm1tJyxcbiAgICBsbGxsOiAnWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbSdcbiAgfSxcbiAgbWVyaWRpZW1QYXJzZTogL+WHjOaZqHzml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxcbiAgbWVyaWRpZW1Ib3VyOiBmdW5jdGlvbiBtZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pIHtcbiAgICBpZiAoaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIGlmIChtZXJpZGllbSA9PT0gJ+WHjOaZqCcgfHwgbWVyaWRpZW0gPT09ICfml6nkuIonIHx8IG1lcmlkaWVtID09PSAn5LiK5Y2IJykge1xuICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIGlmIChtZXJpZGllbSA9PT0gJ+S4reWNiCcpIHtcbiAgICAgIHJldHVybiBob3VyID49IDExID8gaG91ciA6IGhvdXIgKyAxMjtcbiAgICB9IGVsc2UgaWYgKG1lcmlkaWVtID09PSAn5LiL5Y2IJyB8fCBtZXJpZGllbSA9PT0gJ+aZmuS4iicpIHtcbiAgICAgIHJldHVybiBob3VyICsgMTI7XG4gICAgfVxuICB9LFxuICBtZXJpZGllbTogZnVuY3Rpb24gbWVyaWRpZW0oaG91ciwgbWludXRlLCBpc0xvd2VyKSB7XG4gICAgdmFyIGhtID0gaG91ciAqIDEwMCArIG1pbnV0ZTtcblxuICAgIGlmIChobSA8IDYwMCkge1xuICAgICAgcmV0dXJuICflh4zmmagnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCA5MDApIHtcbiAgICAgIHJldHVybiAn5pep5LiKJztcbiAgICB9IGVsc2UgaWYgKGhtIDwgMTEzMCkge1xuICAgICAgcmV0dXJuICfkuIrljYgnO1xuICAgIH0gZWxzZSBpZiAoaG0gPCAxMjMwKSB7XG4gICAgICByZXR1cm4gJ+S4reWNiCc7XG4gICAgfSBlbHNlIGlmIChobSA8IDE4MDApIHtcbiAgICAgIHJldHVybiAn5LiL5Y2IJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfmmZrkuIonO1xuICAgIH1cbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICBzYW1lRGF5OiAnW+S7iuWkqV0gTFQnLFxuICAgIG5leHREYXk6ICdb5piO5aSpXSBMVCcsXG4gICAgbmV4dFdlZWs6ICdb5LiLXWRkZGQgTFQnLFxuICAgIGxhc3REYXk6ICdb5pio5aSpXSBMVCcsXG4gICAgbGFzdFdlZWs6ICdb5LiKXWRkZGQgTFQnLFxuICAgIHNhbWVFbHNlOiAnTCdcbiAgfSxcbiAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KOaXpXzmnIh86YCxKS8sXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnVtYmVyLCBwZXJpb2QpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAnZCc6XG4gICAgICBjYXNlICdEJzpcbiAgICAgIGNhc2UgJ0RERCc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pelJztcblxuICAgICAgY2FzZSAnTSc6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyAn5pyIJztcblxuICAgICAgY2FzZSAndyc6XG4gICAgICBjYXNlICdXJzpcbiAgICAgICAgcmV0dXJuIG51bWJlciArICfpgLEnO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgIH1cbiAgfSxcbiAgcmVsYXRpdmVUaW1lOiB7XG4gICAgZnV0dXJlOiAnJXPlvownLFxuICAgIHBhc3Q6ICclc+WJjScsXG4gICAgczogJ+W5vuenkicsXG4gICAgc3M6ICclZCDnp5InLFxuICAgIG06ICcxIOWIhumQmCcsXG4gICAgbW06ICclZCDliIbpkJgnLFxuICAgIGg6ICcxIOWwj+aZgicsXG4gICAgaGg6ICclZCDlsI/mmYInLFxuICAgIGQ6ICcxIOWkqScsXG4gICAgZGQ6ICclZCDlpKknLFxuICAgIE06ICcxIOWAi+aciCcsXG4gICAgTU06ICclZCDlgIvmnIgnLFxuICAgIHk6ICcxIOW5tCcsXG4gICAgeXk6ICclZCDlubQnXG4gIH1cbn0pOyIsInZhciBob29rQ2FsbGJhY2s7XG5cbmZ1bmN0aW9uIGhvb2tzKCkge1xuICByZXR1cm4gaG9va0NhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIHNldEhvb2tDYWxsYmFjayhjYWxsYmFjaykge1xuICBob29rQ2FsbGJhY2sgPSBjYWxsYmFjaztcbn1cblxuZnVuY3Rpb24gaXNBcnJheShpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBBcnJheSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgIT0gbnVsbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuZnVuY3Rpb24gaGFzT3duUHJvcChhLCBiKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSwgYik7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0RW1wdHkob2JqKSB7XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcykge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLmxlbmd0aCA9PT0gMDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaztcblxuICAgIGZvciAoayBpbiBvYmopIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wKG9iaiwgaykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGlucHV0KSB7XG4gIHJldHVybiBpbnB1dCA9PT0gdm9pZCAwO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBOdW1iZXJdJztcbn1cblxuZnVuY3Rpb24gaXNEYXRlKGlucHV0KSB7XG4gIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIERhdGUgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG5mdW5jdGlvbiBtYXAoYXJyLCBmbikge1xuICB2YXIgcmVzID0gW10sXG4gICAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICByZXMucHVzaChmbihhcnJbaV0sIGkpKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZChhLCBiKSB7XG4gIGZvciAodmFyIGkgaW4gYikge1xuICAgIGlmIChoYXNPd25Qcm9wKGIsIGkpKSB7XG4gICAgICBhW2ldID0gYltpXTtcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzT3duUHJvcChiLCAndG9TdHJpbmcnKSkge1xuICAgIGEudG9TdHJpbmcgPSBiLnRvU3RyaW5nO1xuICB9XG5cbiAgaWYgKGhhc093blByb3AoYiwgJ3ZhbHVlT2YnKSkge1xuICAgIGEudmFsdWVPZiA9IGIudmFsdWVPZjtcbiAgfVxuXG4gIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVVEMoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QpIHtcbiAgcmV0dXJuIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIHRydWUpLnV0YygpO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0UGFyc2luZ0ZsYWdzKCkge1xuICByZXR1cm4ge1xuICAgIGVtcHR5OiBmYWxzZSxcbiAgICB1bnVzZWRUb2tlbnM6IFtdLFxuICAgIHVudXNlZElucHV0OiBbXSxcbiAgICBvdmVyZmxvdzogLTIsXG4gICAgY2hhcnNMZWZ0T3ZlcjogMCxcbiAgICBudWxsSW5wdXQ6IGZhbHNlLFxuICAgIGludmFsaWRFcmE6IG51bGwsXG4gICAgaW52YWxpZE1vbnRoOiBudWxsLFxuICAgIGludmFsaWRGb3JtYXQ6IGZhbHNlLFxuICAgIHVzZXJJbnZhbGlkYXRlZDogZmFsc2UsXG4gICAgaXNvOiBmYWxzZSxcbiAgICBwYXJzZWREYXRlUGFydHM6IFtdLFxuICAgIGVyYTogbnVsbCxcbiAgICBtZXJpZGllbTogbnVsbCxcbiAgICByZmMyODIyOiBmYWxzZSxcbiAgICB3ZWVrZGF5TWlzbWF0Y2g6IGZhbHNlXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFBhcnNpbmdGbGFncyhtKSB7XG4gIGlmIChtLl9wZiA9PSBudWxsKSB7XG4gICAgbS5fcGYgPSBkZWZhdWx0UGFyc2luZ0ZsYWdzKCk7XG4gIH1cblxuICByZXR1cm4gbS5fcGY7XG59XG5cbnZhciBzb21lO1xuXG5pZiAoQXJyYXkucHJvdG90eXBlLnNvbWUpIHtcbiAgc29tZSA9IEFycmF5LnByb3RvdHlwZS5zb21lO1xufSBlbHNlIHtcbiAgc29tZSA9IGZ1bmN0aW9uIHNvbWUoZnVuKSB7XG4gICAgdmFyIHQgPSBPYmplY3QodGhpcyksXG4gICAgICAgIGxlbiA9IHQubGVuZ3RoID4+PiAwLFxuICAgICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoaSBpbiB0ICYmIGZ1bi5jYWxsKHRoaXMsIHRbaV0sIGksIHQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZChtKSB7XG4gIGlmIChtLl9pc1ZhbGlkID09IG51bGwpIHtcbiAgICB2YXIgZmxhZ3MgPSBnZXRQYXJzaW5nRmxhZ3MobSksXG4gICAgICAgIHBhcnNlZFBhcnRzID0gc29tZS5jYWxsKGZsYWdzLnBhcnNlZERhdGVQYXJ0cywgZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBpICE9IG51bGw7XG4gICAgfSksXG4gICAgICAgIGlzTm93VmFsaWQgPSAhaXNOYU4obS5fZC5nZXRUaW1lKCkpICYmIGZsYWdzLm92ZXJmbG93IDwgMCAmJiAhZmxhZ3MuZW1wdHkgJiYgIWZsYWdzLmludmFsaWRFcmEgJiYgIWZsYWdzLmludmFsaWRNb250aCAmJiAhZmxhZ3MuaW52YWxpZFdlZWtkYXkgJiYgIWZsYWdzLndlZWtkYXlNaXNtYXRjaCAmJiAhZmxhZ3MubnVsbElucHV0ICYmICFmbGFncy5pbnZhbGlkRm9ybWF0ICYmICFmbGFncy51c2VySW52YWxpZGF0ZWQgJiYgKCFmbGFncy5tZXJpZGllbSB8fCBmbGFncy5tZXJpZGllbSAmJiBwYXJzZWRQYXJ0cyk7XG5cbiAgICBpZiAobS5fc3RyaWN0KSB7XG4gICAgICBpc05vd1ZhbGlkID0gaXNOb3dWYWxpZCAmJiBmbGFncy5jaGFyc0xlZnRPdmVyID09PSAwICYmIGZsYWdzLnVudXNlZFRva2Vucy5sZW5ndGggPT09IDAgJiYgZmxhZ3MuYmlnSG91ciA9PT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChPYmplY3QuaXNGcm96ZW4gPT0gbnVsbCB8fCAhT2JqZWN0LmlzRnJvemVuKG0pKSB7XG4gICAgICBtLl9pc1ZhbGlkID0gaXNOb3dWYWxpZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGlzTm93VmFsaWQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG0uX2lzVmFsaWQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUludmFsaWQoZmxhZ3MpIHtcbiAgdmFyIG0gPSBjcmVhdGVVVEMoTmFOKTtcblxuICBpZiAoZmxhZ3MgIT0gbnVsbCkge1xuICAgIGV4dGVuZChnZXRQYXJzaW5nRmxhZ3MobSksIGZsYWdzKTtcbiAgfSBlbHNlIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MobSkudXNlckludmFsaWRhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBtO1xufVxuXG52YXIgbW9tZW50UHJvcGVydGllcyA9IGhvb2tzLm1vbWVudFByb3BlcnRpZXMgPSBbXSxcbiAgICB1cGRhdGVJblByb2dyZXNzID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGNvcHlDb25maWcodG8sIGZyb20pIHtcbiAgdmFyIGksIHByb3AsIHZhbDtcblxuICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2lzQU1vbWVudE9iamVjdCkpIHtcbiAgICB0by5faXNBTW9tZW50T2JqZWN0ID0gZnJvbS5faXNBTW9tZW50T2JqZWN0O1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pKSkge1xuICAgIHRvLl9pID0gZnJvbS5faTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5fZikpIHtcbiAgICB0by5fZiA9IGZyb20uX2Y7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2wpKSB7XG4gICAgdG8uX2wgPSBmcm9tLl9sO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9zdHJpY3QpKSB7XG4gICAgdG8uX3N0cmljdCA9IGZyb20uX3N0cmljdDtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5fdHptKSkge1xuICAgIHRvLl90em0gPSBmcm9tLl90em07XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2lzVVRDKSkge1xuICAgIHRvLl9pc1VUQyA9IGZyb20uX2lzVVRDO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9vZmZzZXQpKSB7XG4gICAgdG8uX29mZnNldCA9IGZyb20uX29mZnNldDtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQoZnJvbS5fcGYpKSB7XG4gICAgdG8uX3BmID0gZ2V0UGFyc2luZ0ZsYWdzKGZyb20pO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9sb2NhbGUpKSB7XG4gICAgdG8uX2xvY2FsZSA9IGZyb20uX2xvY2FsZTtcbiAgfVxuXG4gIGlmIChtb21lbnRQcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbW9tZW50UHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvcCA9IG1vbWVudFByb3BlcnRpZXNbaV07XG4gICAgICB2YWwgPSBmcm9tW3Byb3BdO1xuXG4gICAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbCkpIHtcbiAgICAgICAgdG9bcHJvcF0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG5mdW5jdGlvbiBNb21lbnQoY29uZmlnKSB7XG4gIGNvcHlDb25maWcodGhpcywgY29uZmlnKTtcbiAgdGhpcy5fZCA9IG5ldyBEYXRlKGNvbmZpZy5fZCAhPSBudWxsID8gY29uZmlnLl9kLmdldFRpbWUoKSA6IE5hTik7XG5cbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHRoaXMuX2QgPSBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgaWYgKHVwZGF0ZUluUHJvZ3Jlc3MgPT09IGZhbHNlKSB7XG4gICAgdXBkYXRlSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMpO1xuICAgIHVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc01vbWVudChvYmopIHtcbiAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIE1vbWVudCB8fCBvYmogIT0gbnVsbCAmJiBvYmouX2lzQU1vbWVudE9iamVjdCAhPSBudWxsO1xufVxuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xuICBpZiAoaG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzID09PSBmYWxzZSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS53YXJuKSB7XG4gICAgY29uc29sZS53YXJuKCdEZXByZWNhdGlvbiB3YXJuaW5nOiAnICsgbXNnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZXByZWNhdGUobXNnLCBmbikge1xuICB2YXIgZmlyc3RUaW1lID0gdHJ1ZTtcbiAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlciAhPSBudWxsKSB7XG4gICAgICBob29rcy5kZXByZWNhdGlvbkhhbmRsZXIobnVsbCwgbXNnKTtcbiAgICB9XG5cbiAgICBpZiAoZmlyc3RUaW1lKSB7XG4gICAgICB2YXIgYXJncyA9IFtdLFxuICAgICAgICAgIGFyZyxcbiAgICAgICAgICBpLFxuICAgICAgICAgIGtleTtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcmcgPSAnJztcblxuICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBhcmcgKz0gJ1xcblsnICsgaSArICddICc7XG5cbiAgICAgICAgICBmb3IgKGtleSBpbiBhcmd1bWVudHNbMF0pIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wKGFyZ3VtZW50c1swXSwga2V5KSkge1xuICAgICAgICAgICAgICBhcmcgKz0ga2V5ICsgJzogJyArIGFyZ3VtZW50c1swXVtrZXldICsgJywgJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhcmcgPSBhcmcuc2xpY2UoMCwgLTIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFyZyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFyZ3MucHVzaChhcmcpO1xuICAgICAgfVxuXG4gICAgICB3YXJuKG1zZyArICdcXG5Bcmd1bWVudHM6ICcgKyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzKS5qb2luKCcnKSArICdcXG4nICsgbmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgZmlyc3RUaW1lID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sIGZuKTtcbn1cblxudmFyIGRlcHJlY2F0aW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBkZXByZWNhdGVTaW1wbGUobmFtZSwgbXNnKSB7XG4gIGlmIChob29rcy5kZXByZWNhdGlvbkhhbmRsZXIgIT0gbnVsbCkge1xuICAgIGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlcihuYW1lLCBtc2cpO1xuICB9XG5cbiAgaWYgKCFkZXByZWNhdGlvbnNbbmFtZV0pIHtcbiAgICB3YXJuKG1zZyk7XG4gICAgZGVwcmVjYXRpb25zW25hbWVdID0gdHJ1ZTtcbiAgfVxufVxuXG5ob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3MgPSBmYWxzZTtcbmhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlciA9IG51bGw7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oaW5wdXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBGdW5jdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5wdXQgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG5mdW5jdGlvbiBzZXQoY29uZmlnKSB7XG4gIHZhciBwcm9wLCBpO1xuXG4gIGZvciAoaSBpbiBjb25maWcpIHtcbiAgICBpZiAoaGFzT3duUHJvcChjb25maWcsIGkpKSB7XG4gICAgICBwcm9wID0gY29uZmlnW2ldO1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbihwcm9wKSkge1xuICAgICAgICB0aGlzW2ldID0gcHJvcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNbJ18nICsgaV0gPSBwcm9wO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgdGhpcy5fZGF5T2ZNb250aE9yZGluYWxQYXJzZUxlbmllbnQgPSBuZXcgUmVnRXhwKCh0aGlzLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlLnNvdXJjZSB8fCB0aGlzLl9vcmRpbmFsUGFyc2Uuc291cmNlKSArICd8JyArIC9cXGR7MSwyfS8uc291cmNlKTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VDb25maWdzKHBhcmVudENvbmZpZywgY2hpbGRDb25maWcpIHtcbiAgdmFyIHJlcyA9IGV4dGVuZCh7fSwgcGFyZW50Q29uZmlnKSxcbiAgICAgIHByb3A7XG5cbiAgZm9yIChwcm9wIGluIGNoaWxkQ29uZmlnKSB7XG4gICAgaWYgKGhhc093blByb3AoY2hpbGRDb25maWcsIHByb3ApKSB7XG4gICAgICBpZiAoaXNPYmplY3QocGFyZW50Q29uZmlnW3Byb3BdKSAmJiBpc09iamVjdChjaGlsZENvbmZpZ1twcm9wXSkpIHtcbiAgICAgICAgcmVzW3Byb3BdID0ge307XG4gICAgICAgIGV4dGVuZChyZXNbcHJvcF0sIHBhcmVudENvbmZpZ1twcm9wXSk7XG4gICAgICAgIGV4dGVuZChyZXNbcHJvcF0sIGNoaWxkQ29uZmlnW3Byb3BdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRDb25maWdbcHJvcF0gIT0gbnVsbCkge1xuICAgICAgICByZXNbcHJvcF0gPSBjaGlsZENvbmZpZ1twcm9wXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSByZXNbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yIChwcm9wIGluIHBhcmVudENvbmZpZykge1xuICAgIGlmIChoYXNPd25Qcm9wKHBhcmVudENvbmZpZywgcHJvcCkgJiYgIWhhc093blByb3AoY2hpbGRDb25maWcsIHByb3ApICYmIGlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkpIHtcbiAgICAgIHJlc1twcm9wXSA9IGV4dGVuZCh7fSwgcmVzW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBMb2NhbGUoY29uZmlnKSB7XG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIHRoaXMuc2V0KGNvbmZpZyk7XG4gIH1cbn1cblxudmFyIGtleXM7XG5cbmlmIChPYmplY3Qua2V5cykge1xuICBrZXlzID0gT2JqZWN0LmtleXM7XG59IGVsc2Uge1xuICBrZXlzID0gZnVuY3Rpb24ga2V5cyhvYmopIHtcbiAgICB2YXIgaSxcbiAgICAgICAgcmVzID0gW107XG5cbiAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcChvYmosIGkpKSB7XG4gICAgICAgIHJlcy5wdXNoKGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH07XG59XG5cbnZhciBkZWZhdWx0Q2FsZW5kYXIgPSB7XG4gIHNhbWVEYXk6ICdbVG9kYXkgYXRdIExUJyxcbiAgbmV4dERheTogJ1tUb21vcnJvdyBhdF0gTFQnLFxuICBuZXh0V2VlazogJ2RkZGQgW2F0XSBMVCcsXG4gIGxhc3REYXk6ICdbWWVzdGVyZGF5IGF0XSBMVCcsXG4gIGxhc3RXZWVrOiAnW0xhc3RdIGRkZGQgW2F0XSBMVCcsXG4gIHNhbWVFbHNlOiAnTCdcbn07XG5cbmZ1bmN0aW9uIGNhbGVuZGFyKGtleSwgbW9tLCBub3cpIHtcbiAgdmFyIG91dHB1dCA9IHRoaXMuX2NhbGVuZGFyW2tleV0gfHwgdGhpcy5fY2FsZW5kYXJbJ3NhbWVFbHNlJ107XG4gIHJldHVybiBpc0Z1bmN0aW9uKG91dHB1dCkgPyBvdXRwdXQuY2FsbChtb20sIG5vdykgOiBvdXRwdXQ7XG59XG5cbmZ1bmN0aW9uIHplcm9GaWxsKG51bWJlciwgdGFyZ2V0TGVuZ3RoLCBmb3JjZVNpZ24pIHtcbiAgdmFyIGFic051bWJlciA9ICcnICsgTWF0aC5hYnMobnVtYmVyKSxcbiAgICAgIHplcm9zVG9GaWxsID0gdGFyZ2V0TGVuZ3RoIC0gYWJzTnVtYmVyLmxlbmd0aCxcbiAgICAgIHNpZ24gPSBudW1iZXIgPj0gMDtcbiAgcmV0dXJuIChzaWduID8gZm9yY2VTaWduID8gJysnIDogJycgOiAnLScpICsgTWF0aC5wb3coMTAsIE1hdGgubWF4KDAsIHplcm9zVG9GaWxsKSkudG9TdHJpbmcoKS5zdWJzdHIoMSkgKyBhYnNOdW1iZXI7XG59XG5cbnZhciBmb3JtYXR0aW5nVG9rZW5zID0gLyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xOezEsNX18WVlZWVlZfFlZWVlZfFlZWVl8WVl8eXsyLDR9fHlvP3xnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xraz98bW0/fHNzP3xTezEsOX18eHxYfHp6P3xaWj98LikvZyxcbiAgICBsb2NhbEZvcm1hdHRpbmdUb2tlbnMgPSAvKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nLFxuICAgIGZvcm1hdEZ1bmN0aW9ucyA9IHt9LFxuICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zID0ge307XG5cbmZ1bmN0aW9uIGFkZEZvcm1hdFRva2VuKHRva2VuLCBwYWRkZWQsIG9yZGluYWwsIGNhbGxiYWNrKSB7XG4gIHZhciBmdW5jID0gY2FsbGJhY2s7XG5cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ3N0cmluZycpIHtcbiAgICBmdW5jID0gZnVuY3Rpb24gZnVuYygpIHtcbiAgICAgIHJldHVybiB0aGlzW2NhbGxiYWNrXSgpO1xuICAgIH07XG4gIH1cblxuICBpZiAodG9rZW4pIHtcbiAgICBmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0gPSBmdW5jO1xuICB9XG5cbiAgaWYgKHBhZGRlZCkge1xuICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW3BhZGRlZFswXV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gemVyb0ZpbGwoZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBwYWRkZWRbMV0sIHBhZGRlZFsyXSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChvcmRpbmFsKSB7XG4gICAgZm9ybWF0VG9rZW5GdW5jdGlvbnNbb3JkaW5hbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkub3JkaW5hbChmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRva2VuKTtcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoaW5wdXQpIHtcbiAgaWYgKGlucHV0Lm1hdGNoKC9cXFtbXFxzXFxTXS8pKSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL15cXFt8XFxdJC9nLCAnJyk7XG4gIH1cblxuICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXFxcXC9nLCAnJyk7XG59XG5cbmZ1bmN0aW9uIG1ha2VGb3JtYXRGdW5jdGlvbihmb3JtYXQpIHtcbiAgdmFyIGFycmF5ID0gZm9ybWF0Lm1hdGNoKGZvcm1hdHRpbmdUb2tlbnMpLFxuICAgICAgaSxcbiAgICAgIGxlbmd0aDtcblxuICBmb3IgKGkgPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChmb3JtYXRUb2tlbkZ1bmN0aW9uc1thcnJheVtpXV0pIHtcbiAgICAgIGFycmF5W2ldID0gZm9ybWF0VG9rZW5GdW5jdGlvbnNbYXJyYXlbaV1dO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcnJheVtpXSA9IHJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoYXJyYXlbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAobW9tKSB7XG4gICAgdmFyIG91dHB1dCA9ICcnLFxuICAgICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBvdXRwdXQgKz0gaXNGdW5jdGlvbihhcnJheVtpXSkgPyBhcnJheVtpXS5jYWxsKG1vbSwgZm9ybWF0KSA6IGFycmF5W2ldO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1vbWVudChtLCBmb3JtYXQpIHtcbiAgaWYgKCFtLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBtLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICB9XG5cbiAgZm9ybWF0ID0gZXhwYW5kRm9ybWF0KGZvcm1hdCwgbS5sb2NhbGVEYXRhKCkpO1xuICBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XSA9IGZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdIHx8IG1ha2VGb3JtYXRGdW5jdGlvbihmb3JtYXQpO1xuICByZXR1cm4gZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF0obSk7XG59XG5cbmZ1bmN0aW9uIGV4cGFuZEZvcm1hdChmb3JtYXQsIGxvY2FsZSkge1xuICB2YXIgaSA9IDU7XG5cbiAgZnVuY3Rpb24gcmVwbGFjZUxvbmdEYXRlRm9ybWF0VG9rZW5zKGlucHV0KSB7XG4gICAgcmV0dXJuIGxvY2FsZS5sb25nRGF0ZUZvcm1hdChpbnB1dCkgfHwgaW5wdXQ7XG4gIH1cblxuICBsb2NhbEZvcm1hdHRpbmdUb2tlbnMubGFzdEluZGV4ID0gMDtcblxuICB3aGlsZSAoaSA+PSAwICYmIGxvY2FsRm9ybWF0dGluZ1Rva2Vucy50ZXN0KGZvcm1hdCkpIHtcbiAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShsb2NhbEZvcm1hdHRpbmdUb2tlbnMsIHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2Vucyk7XG4gICAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleCA9IDA7XG4gICAgaSAtPSAxO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdDtcbn1cblxudmFyIGRlZmF1bHRMb25nRGF0ZUZvcm1hdCA9IHtcbiAgTFRTOiAnaDptbTpzcyBBJyxcbiAgTFQ6ICdoOm1tIEEnLFxuICBMOiAnTU0vREQvWVlZWScsXG4gIExMOiAnTU1NTSBELCBZWVlZJyxcbiAgTExMOiAnTU1NTSBELCBZWVlZIGg6bW0gQScsXG4gIExMTEw6ICdkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBJ1xufTtcblxuZnVuY3Rpb24gbG9uZ0RhdGVGb3JtYXQoa2V5KSB7XG4gIHZhciBmb3JtYXQgPSB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldLFxuICAgICAgZm9ybWF0VXBwZXIgPSB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXkudG9VcHBlckNhc2UoKV07XG5cbiAgaWYgKGZvcm1hdCB8fCAhZm9ybWF0VXBwZXIpIHtcbiAgICByZXR1cm4gZm9ybWF0O1xuICB9XG5cbiAgdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XSA9IGZvcm1hdFVwcGVyLm1hdGNoKGZvcm1hdHRpbmdUb2tlbnMpLm1hcChmdW5jdGlvbiAodG9rKSB7XG4gICAgaWYgKHRvayA9PT0gJ01NTU0nIHx8IHRvayA9PT0gJ01NJyB8fCB0b2sgPT09ICdERCcgfHwgdG9rID09PSAnZGRkZCcpIHtcbiAgICAgIHJldHVybiB0b2suc2xpY2UoMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvaztcbiAgfSkuam9pbignJyk7XG4gIHJldHVybiB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldO1xufVxuXG52YXIgZGVmYXVsdEludmFsaWREYXRlID0gJ0ludmFsaWQgZGF0ZSc7XG5cbmZ1bmN0aW9uIGludmFsaWREYXRlKCkge1xuICByZXR1cm4gdGhpcy5faW52YWxpZERhdGU7XG59XG5cbnZhciBkZWZhdWx0T3JkaW5hbCA9ICclZCcsXG4gICAgZGVmYXVsdERheU9mTW9udGhPcmRpbmFsUGFyc2UgPSAvXFxkezEsMn0vO1xuXG5mdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICByZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKCclZCcsIG51bWJlcik7XG59XG5cbnZhciBkZWZhdWx0UmVsYXRpdmVUaW1lID0ge1xuICBmdXR1cmU6ICdpbiAlcycsXG4gIHBhc3Q6ICclcyBhZ28nLFxuICBzOiAnYSBmZXcgc2Vjb25kcycsXG4gIHNzOiAnJWQgc2Vjb25kcycsXG4gIG06ICdhIG1pbnV0ZScsXG4gIG1tOiAnJWQgbWludXRlcycsXG4gIGg6ICdhbiBob3VyJyxcbiAgaGg6ICclZCBob3VycycsXG4gIGQ6ICdhIGRheScsXG4gIGRkOiAnJWQgZGF5cycsXG4gIHc6ICdhIHdlZWsnLFxuICB3dzogJyVkIHdlZWtzJyxcbiAgTTogJ2EgbW9udGgnLFxuICBNTTogJyVkIG1vbnRocycsXG4gIHk6ICdhIHllYXInLFxuICB5eTogJyVkIHllYXJzJ1xufTtcblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICB2YXIgb3V0cHV0ID0gdGhpcy5fcmVsYXRpdmVUaW1lW3N0cmluZ107XG4gIHJldHVybiBpc0Z1bmN0aW9uKG91dHB1dCkgPyBvdXRwdXQobnVtYmVyLCB3aXRob3V0U3VmZml4LCBzdHJpbmcsIGlzRnV0dXJlKSA6IG91dHB1dC5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xufVxuXG5mdW5jdGlvbiBwYXN0RnV0dXJlKGRpZmYsIG91dHB1dCkge1xuICB2YXIgZm9ybWF0ID0gdGhpcy5fcmVsYXRpdmVUaW1lW2RpZmYgPiAwID8gJ2Z1dHVyZScgOiAncGFzdCddO1xuICByZXR1cm4gaXNGdW5jdGlvbihmb3JtYXQpID8gZm9ybWF0KG91dHB1dCkgOiBmb3JtYXQucmVwbGFjZSgvJXMvaSwgb3V0cHV0KTtcbn1cblxudmFyIGFsaWFzZXMgPSB7fTtcblxuZnVuY3Rpb24gYWRkVW5pdEFsaWFzKHVuaXQsIHNob3J0aGFuZCkge1xuICB2YXIgbG93ZXJDYXNlID0gdW5pdC50b0xvd2VyQ2FzZSgpO1xuICBhbGlhc2VzW2xvd2VyQ2FzZV0gPSBhbGlhc2VzW2xvd2VyQ2FzZSArICdzJ10gPSBhbGlhc2VzW3Nob3J0aGFuZF0gPSB1bml0O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVVbml0cyh1bml0cykge1xuICByZXR1cm4gdHlwZW9mIHVuaXRzID09PSAnc3RyaW5nJyA/IGFsaWFzZXNbdW5pdHNdIHx8IGFsaWFzZXNbdW5pdHMudG9Mb3dlckNhc2UoKV0gOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9iamVjdFVuaXRzKGlucHV0T2JqZWN0KSB7XG4gIHZhciBub3JtYWxpemVkSW5wdXQgPSB7fSxcbiAgICAgIG5vcm1hbGl6ZWRQcm9wLFxuICAgICAgcHJvcDtcblxuICBmb3IgKHByb3AgaW4gaW5wdXRPYmplY3QpIHtcbiAgICBpZiAoaGFzT3duUHJvcChpbnB1dE9iamVjdCwgcHJvcCkpIHtcbiAgICAgIG5vcm1hbGl6ZWRQcm9wID0gbm9ybWFsaXplVW5pdHMocHJvcCk7XG5cbiAgICAgIGlmIChub3JtYWxpemVkUHJvcCkge1xuICAgICAgICBub3JtYWxpemVkSW5wdXRbbm9ybWFsaXplZFByb3BdID0gaW5wdXRPYmplY3RbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWRJbnB1dDtcbn1cblxudmFyIHByaW9yaXRpZXMgPSB7fTtcblxuZnVuY3Rpb24gYWRkVW5pdFByaW9yaXR5KHVuaXQsIHByaW9yaXR5KSB7XG4gIHByaW9yaXRpZXNbdW5pdF0gPSBwcmlvcml0eTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJpb3JpdGl6ZWRVbml0cyh1bml0c09iaikge1xuICB2YXIgdW5pdHMgPSBbXSxcbiAgICAgIHU7XG5cbiAgZm9yICh1IGluIHVuaXRzT2JqKSB7XG4gICAgaWYgKGhhc093blByb3AodW5pdHNPYmosIHUpKSB7XG4gICAgICB1bml0cy5wdXNoKHtcbiAgICAgICAgdW5pdDogdSxcbiAgICAgICAgcHJpb3JpdHk6IHByaW9yaXRpZXNbdV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVuaXRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHk7XG4gIH0pO1xuICByZXR1cm4gdW5pdHM7XG59XG5cbmZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcikge1xuICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwO1xufVxuXG5mdW5jdGlvbiBhYnNGbG9vcihudW1iZXIpIHtcbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcikgfHwgMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvSW50KGFyZ3VtZW50Rm9yQ29lcmNpb24pIHtcbiAgdmFyIGNvZXJjZWROdW1iZXIgPSArYXJndW1lbnRGb3JDb2VyY2lvbixcbiAgICAgIHZhbHVlID0gMDtcblxuICBpZiAoY29lcmNlZE51bWJlciAhPT0gMCAmJiBpc0Zpbml0ZShjb2VyY2VkTnVtYmVyKSkge1xuICAgIHZhbHVlID0gYWJzRmxvb3IoY29lcmNlZE51bWJlcik7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIG1ha2VHZXRTZXQodW5pdCwga2VlcFRpbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBzZXQkMSh0aGlzLCB1bml0LCB2YWx1ZSk7XG4gICAgICBob29rcy51cGRhdGVPZmZzZXQodGhpcywga2VlcFRpbWUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXQodGhpcywgdW5pdCk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXQobW9tLCB1bml0KSB7XG4gIHJldHVybiBtb20uaXNWYWxpZCgpID8gbW9tLl9kWydnZXQnICsgKG1vbS5faXNVVEMgPyAnVVRDJyA6ICcnKSArIHVuaXRdKCkgOiBOYU47XG59XG5cbmZ1bmN0aW9uIHNldCQxKG1vbSwgdW5pdCwgdmFsdWUpIHtcbiAgaWYgKG1vbS5pc1ZhbGlkKCkgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgIGlmICh1bml0ID09PSAnRnVsbFllYXInICYmIGlzTGVhcFllYXIobW9tLnllYXIoKSkgJiYgbW9tLm1vbnRoKCkgPT09IDEgJiYgbW9tLmRhdGUoKSA9PT0gMjkpIHtcbiAgICAgIHZhbHVlID0gdG9JbnQodmFsdWUpO1xuXG4gICAgICBtb20uX2RbJ3NldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgdW5pdF0odmFsdWUsIG1vbS5tb250aCgpLCBkYXlzSW5Nb250aCh2YWx1ZSwgbW9tLm1vbnRoKCkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW9tLl9kWydzZXQnICsgKG1vbS5faXNVVEMgPyAnVVRDJyA6ICcnKSArIHVuaXRdKHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RyaW5nR2V0KHVuaXRzKSB7XG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gIGlmIChpc0Z1bmN0aW9uKHRoaXNbdW5pdHNdKSkge1xuICAgIHJldHVybiB0aGlzW3VuaXRzXSgpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ1NldCh1bml0cywgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB1bml0cyA9PT0gJ29iamVjdCcpIHtcbiAgICB1bml0cyA9IG5vcm1hbGl6ZU9iamVjdFVuaXRzKHVuaXRzKTtcbiAgICB2YXIgcHJpb3JpdGl6ZWQgPSBnZXRQcmlvcml0aXplZFVuaXRzKHVuaXRzKSxcbiAgICAgICAgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBwcmlvcml0aXplZC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpc1twcmlvcml0aXplZFtpXS51bml0XSh1bml0c1twcmlvcml0aXplZFtpXS51bml0XSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24odGhpc1t1bml0c10pKSB7XG4gICAgICByZXR1cm4gdGhpc1t1bml0c10odmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG52YXIgbWF0Y2gxID0gL1xcZC8sXG4gICAgbWF0Y2gyID0gL1xcZFxcZC8sXG4gICAgbWF0Y2gzID0gL1xcZHszfS8sXG4gICAgbWF0Y2g0ID0gL1xcZHs0fS8sXG4gICAgbWF0Y2g2ID0gL1srLV0/XFxkezZ9LyxcbiAgICBtYXRjaDF0bzIgPSAvXFxkXFxkPy8sXG4gICAgbWF0Y2gzdG80ID0gL1xcZFxcZFxcZFxcZD8vLFxuICAgIG1hdGNoNXRvNiA9IC9cXGRcXGRcXGRcXGRcXGRcXGQ/LyxcbiAgICBtYXRjaDF0bzMgPSAvXFxkezEsM30vLFxuICAgIG1hdGNoMXRvNCA9IC9cXGR7MSw0fS8sXG4gICAgbWF0Y2gxdG82ID0gL1srLV0/XFxkezEsNn0vLFxuICAgIG1hdGNoVW5zaWduZWQgPSAvXFxkKy8sXG4gICAgbWF0Y2hTaWduZWQgPSAvWystXT9cXGQrLyxcbiAgICBtYXRjaE9mZnNldCA9IC9afFsrLV1cXGRcXGQ6P1xcZFxcZC9naSxcbiAgICBtYXRjaFNob3J0T2Zmc2V0ID0gL1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vZ2ksXG4gICAgbWF0Y2hUaW1lc3RhbXAgPSAvWystXT9cXGQrKFxcLlxcZHsxLDN9KT8vLFxuICAgIG1hdGNoV29yZCA9IC9bMC05XXswLDI1Nn1bJ2EtelxcdTAwQTAtXFx1MDVGRlxcdTA3MDAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkYwN1xcdUZGMTAtXFx1RkZFRl17MSwyNTZ9fFtcXHUwNjAwLVxcdTA2RkZcXC9dezEsMjU2fShcXHMqP1tcXHUwNjAwLVxcdTA2RkZdezEsMjU2fSl7MSwyfS9pLFxuICAgIHJlZ2V4ZXM7XG5yZWdleGVzID0ge307XG5cbmZ1bmN0aW9uIGFkZFJlZ2V4VG9rZW4odG9rZW4sIHJlZ2V4LCBzdHJpY3RSZWdleCkge1xuICByZWdleGVzW3Rva2VuXSA9IGlzRnVuY3Rpb24ocmVnZXgpID8gcmVnZXggOiBmdW5jdGlvbiAoaXNTdHJpY3QsIGxvY2FsZURhdGEpIHtcbiAgICByZXR1cm4gaXNTdHJpY3QgJiYgc3RyaWN0UmVnZXggPyBzdHJpY3RSZWdleCA6IHJlZ2V4O1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sIGNvbmZpZykge1xuICBpZiAoIWhhc093blByb3AocmVnZXhlcywgdG9rZW4pKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAodW5lc2NhcGVGb3JtYXQodG9rZW4pKTtcbiAgfVxuXG4gIHJldHVybiByZWdleGVzW3Rva2VuXShjb25maWcuX3N0cmljdCwgY29uZmlnLl9sb2NhbGUpO1xufVxuXG5mdW5jdGlvbiB1bmVzY2FwZUZvcm1hdChzKSB7XG4gIHJldHVybiByZWdleEVzY2FwZShzLnJlcGxhY2UoJ1xcXFwnLCAnJykucmVwbGFjZSgvXFxcXChcXFspfFxcXFwoXFxdKXxcXFsoW15cXF1cXFtdKilcXF18XFxcXCguKS9nLCBmdW5jdGlvbiAobWF0Y2hlZCwgcDEsIHAyLCBwMywgcDQpIHtcbiAgICByZXR1cm4gcDEgfHwgcDIgfHwgcDMgfHwgcDQ7XG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gcmVnZXhFc2NhcGUocykge1xuICByZXR1cm4gcy5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcbn1cblxudmFyIHRva2VucyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRQYXJzZVRva2VuKHRva2VuLCBjYWxsYmFjaykge1xuICB2YXIgaSxcbiAgICAgIGZ1bmMgPSBjYWxsYmFjaztcblxuICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgIHRva2VuID0gW3Rva2VuXTtcbiAgfVxuXG4gIGlmIChpc051bWJlcihjYWxsYmFjaykpIHtcbiAgICBmdW5jID0gZnVuY3Rpb24gZnVuYyhpbnB1dCwgYXJyYXkpIHtcbiAgICAgIGFycmF5W2NhbGxiYWNrXSA9IHRvSW50KGlucHV0KTtcbiAgICB9O1xuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IHRva2VuLmxlbmd0aDsgaSsrKSB7XG4gICAgdG9rZW5zW3Rva2VuW2ldXSA9IGZ1bmM7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkV2Vla1BhcnNlVG9rZW4odG9rZW4sIGNhbGxiYWNrKSB7XG4gIGFkZFBhcnNlVG9rZW4odG9rZW4sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZywgdG9rZW4pIHtcbiAgICBjb25maWcuX3cgPSBjb25maWcuX3cgfHwge307XG4gICAgY2FsbGJhY2soaW5wdXQsIGNvbmZpZy5fdywgY29uZmlnLCB0b2tlbik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbiwgaW5wdXQsIGNvbmZpZykge1xuICBpZiAoaW5wdXQgIT0gbnVsbCAmJiBoYXNPd25Qcm9wKHRva2VucywgdG9rZW4pKSB7XG4gICAgdG9rZW5zW3Rva2VuXShpbnB1dCwgY29uZmlnLl9hLCBjb25maWcsIHRva2VuKTtcbiAgfVxufVxuXG52YXIgWUVBUiA9IDAsXG4gICAgTU9OVEggPSAxLFxuICAgIERBVEUgPSAyLFxuICAgIEhPVVIgPSAzLFxuICAgIE1JTlVURSA9IDQsXG4gICAgU0VDT05EID0gNSxcbiAgICBNSUxMSVNFQ09ORCA9IDYsXG4gICAgV0VFSyA9IDcsXG4gICAgV0VFS0RBWSA9IDg7XG5cbmZ1bmN0aW9uIG1vZChuLCB4KSB7XG4gIHJldHVybiAobiAlIHggKyB4KSAlIHg7XG59XG5cbnZhciBpbmRleE9mO1xuXG5pZiAoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpIHtcbiAgaW5kZXhPZiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mO1xufSBlbHNlIHtcbiAgaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2Yobykge1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmICh0aGlzW2ldID09PSBvKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHtcbiAgaWYgKGlzTmFOKHllYXIpIHx8IGlzTmFOKG1vbnRoKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgbW9kTW9udGggPSBtb2QobW9udGgsIDEyKTtcbiAgeWVhciArPSAobW9udGggLSBtb2RNb250aCkgLyAxMjtcbiAgcmV0dXJuIG1vZE1vbnRoID09PSAxID8gaXNMZWFwWWVhcih5ZWFyKSA/IDI5IDogMjggOiAzMSAtIG1vZE1vbnRoICUgNyAlIDI7XG59XG5cbmFkZEZvcm1hdFRva2VuKCdNJywgWydNTScsIDJdLCAnTW8nLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1vbnRoKCkgKyAxO1xufSk7XG5hZGRGb3JtYXRUb2tlbignTU1NJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQodGhpcywgZm9ybWF0KTtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oJ01NTU0nLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHModGhpcywgZm9ybWF0KTtcbn0pO1xuYWRkVW5pdEFsaWFzKCdtb250aCcsICdNJyk7XG5hZGRVbml0UHJpb3JpdHkoJ21vbnRoJywgOCk7XG5hZGRSZWdleFRva2VuKCdNJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ01NJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignTU1NJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5tb250aHNTaG9ydFJlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUmVnZXhUb2tlbignTU1NTScsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gIHJldHVybiBsb2NhbGUubW9udGhzUmVnZXgoaXNTdHJpY3QpO1xufSk7XG5hZGRQYXJzZVRva2VuKFsnTScsICdNTSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gIGFycmF5W01PTlRIXSA9IHRvSW50KGlucHV0KSAtIDE7XG59KTtcbmFkZFBhcnNlVG9rZW4oWydNTU0nLCAnTU1NTSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcsIHRva2VuKSB7XG4gIHZhciBtb250aCA9IGNvbmZpZy5fbG9jYWxlLm1vbnRoc1BhcnNlKGlucHV0LCB0b2tlbiwgY29uZmlnLl9zdHJpY3QpO1xuXG4gIGlmIChtb250aCAhPSBudWxsKSB7XG4gICAgYXJyYXlbTU9OVEhdID0gbW9udGg7XG4gIH0gZWxzZSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZE1vbnRoID0gaW5wdXQ7XG4gIH1cbn0pO1xudmFyIGRlZmF1bHRMb2NhbGVNb250aHMgPSAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKSxcbiAgICBkZWZhdWx0TG9jYWxlTW9udGhzU2hvcnQgPSAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gICAgTU9OVEhTX0lOX0ZPUk1BVCA9IC9EW29EXT8oXFxbW15cXFtcXF1dKlxcXXxcXHMpK01NTU0/LyxcbiAgICBkZWZhdWx0TW9udGhzU2hvcnRSZWdleCA9IG1hdGNoV29yZCxcbiAgICBkZWZhdWx0TW9udGhzUmVnZXggPSBtYXRjaFdvcmQ7XG5cbmZ1bmN0aW9uIGxvY2FsZU1vbnRocyhtLCBmb3JtYXQpIHtcbiAgaWYgKCFtKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzKSA/IHRoaXMuX21vbnRocyA6IHRoaXMuX21vbnRoc1snc3RhbmRhbG9uZSddO1xuICB9XG5cbiAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzKSA/IHRoaXMuX21vbnRoc1ttLm1vbnRoKCldIDogdGhpcy5fbW9udGhzWyh0aGlzLl9tb250aHMuaXNGb3JtYXQgfHwgTU9OVEhTX0lOX0ZPUk1BVCkudGVzdChmb3JtYXQpID8gJ2Zvcm1hdCcgOiAnc3RhbmRhbG9uZSddW20ubW9udGgoKV07XG59XG5cbmZ1bmN0aW9uIGxvY2FsZU1vbnRoc1Nob3J0KG0sIGZvcm1hdCkge1xuICBpZiAoIW0pIHtcbiAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydCA6IHRoaXMuX21vbnRoc1Nob3J0WydzdGFuZGFsb25lJ107XG4gIH1cblxuICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydFttLm1vbnRoKCldIDogdGhpcy5fbW9udGhzU2hvcnRbTU9OVEhTX0lOX0ZPUk1BVC50ZXN0KGZvcm1hdCkgPyAnZm9ybWF0JyA6ICdzdGFuZGFsb25lJ11bbS5tb250aCgpXTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU3RyaWN0UGFyc2UobW9udGhOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICB2YXIgaSxcbiAgICAgIGlpLFxuICAgICAgbW9tLFxuICAgICAgbGxjID0gbW9udGhOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG5cbiAgaWYgKCF0aGlzLl9tb250aHNQYXJzZSkge1xuICAgIHRoaXMuX21vbnRoc1BhcnNlID0gW107XG4gICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlID0gW107XG4gICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZSA9IFtdO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IDEyOyArK2kpIHtcbiAgICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgaV0pO1xuICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXSA9IHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZVtpXSA9IHRoaXMubW9udGhzKG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0cmljdCkge1xuICAgIGlmIChmb3JtYXQgPT09ICdNTU0nKSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gJ01NTScpIHtcbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX3Nob3J0TW9udGhzUGFyc2UsIGxsYyk7XG5cbiAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgfVxuXG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsIGxsYyk7XG5cbiAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgfVxuXG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbG9jYWxlTW9udGhzUGFyc2UobW9udGhOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICB2YXIgaSwgbW9tLCByZWdleDtcblxuICBpZiAodGhpcy5fbW9udGhzUGFyc2VFeGFjdCkge1xuICAgIHJldHVybiBoYW5kbGVTdHJpY3RQYXJzZS5jYWxsKHRoaXMsIG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpO1xuICB9XG5cbiAgaWYgKCF0aGlzLl9tb250aHNQYXJzZSkge1xuICAgIHRoaXMuX21vbnRoc1BhcnNlID0gW107XG4gICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlID0gW107XG4gICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZSA9IFtdO1xuICB9XG5cbiAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIGldKTtcblxuICAgIGlmIChzdHJpY3QgJiYgIXRoaXMuX2xvbmdNb250aHNQYXJzZVtpXSkge1xuICAgICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLm1vbnRocyhtb20sICcnKS5yZXBsYWNlKCcuJywgJycpICsgJyQnLCAnaScpO1xuICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5tb250aHNTaG9ydChtb20sICcnKS5yZXBsYWNlKCcuJywgJycpICsgJyQnLCAnaScpO1xuICAgIH1cblxuICAgIGlmICghc3RyaWN0ICYmICF0aGlzLl9tb250aHNQYXJzZVtpXSkge1xuICAgICAgcmVnZXggPSAnXicgKyB0aGlzLm1vbnRocyhtb20sICcnKSArICd8XicgKyB0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpO1xuICAgICAgdGhpcy5fbW9udGhzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKHJlZ2V4LnJlcGxhY2UoJy4nLCAnJyksICdpJyk7XG4gICAgfVxuXG4gICAgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdNTU1NJyAmJiB0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9IGVsc2UgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdNTU0nICYmIHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9IGVsc2UgaWYgKCFzdHJpY3QgJiYgdGhpcy5fbW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0TW9udGgobW9tLCB2YWx1ZSkge1xuICB2YXIgZGF5T2ZNb250aDtcblxuICBpZiAoIW1vbS5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gbW9tO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAoL15cXGQrJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdG9JbnQodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IG1vbS5sb2NhbGVEYXRhKCkubW9udGhzUGFyc2UodmFsdWUpO1xuXG4gICAgICBpZiAoIWlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbW9tO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRheU9mTW9udGggPSBNYXRoLm1pbihtb20uZGF0ZSgpLCBkYXlzSW5Nb250aChtb20ueWVhcigpLCB2YWx1ZSkpO1xuXG4gIG1vbS5fZFsnc2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyAnTW9udGgnXSh2YWx1ZSwgZGF5T2ZNb250aCk7XG5cbiAgcmV0dXJuIG1vbTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0TW9udGgodmFsdWUpIHtcbiAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICBzZXRNb250aCh0aGlzLCB2YWx1ZSk7XG4gICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXQodGhpcywgJ01vbnRoJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgoKSB7XG4gIHJldHVybiBkYXlzSW5Nb250aCh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpKTtcbn1cblxuZnVuY3Rpb24gbW9udGhzU2hvcnRSZWdleChpc1N0cmljdCkge1xuICBpZiAodGhpcy5fbW9udGhzUGFyc2VFeGFjdCkge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1JlZ2V4JykpIHtcbiAgICAgIGNvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb250aHNTaG9ydFJlZ2V4O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoIWhhc093blByb3AodGhpcywgJ19tb250aHNTaG9ydFJlZ2V4JykpIHtcbiAgICAgIHRoaXMuX21vbnRoc1Nob3J0UmVnZXggPSBkZWZhdWx0TW9udGhzU2hvcnRSZWdleDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/IHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggOiB0aGlzLl9tb250aHNTaG9ydFJlZ2V4O1xuICB9XG59XG5cbmZ1bmN0aW9uIG1vbnRoc1JlZ2V4KGlzU3RyaWN0KSB7XG4gIGlmICh0aGlzLl9tb250aHNQYXJzZUV4YWN0KSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfbW9udGhzUmVnZXgnKSkge1xuICAgICAgY29tcHV0ZU1vbnRoc1BhcnNlLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKGlzU3RyaWN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5fbW9udGhzU3RyaWN0UmVnZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9tb250aHNSZWdleDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfbW9udGhzUmVnZXgnKSkge1xuICAgICAgdGhpcy5fbW9udGhzUmVnZXggPSBkZWZhdWx0TW9udGhzUmVnZXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID8gdGhpcy5fbW9udGhzU3RyaWN0UmVnZXggOiB0aGlzLl9tb250aHNSZWdleDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wdXRlTW9udGhzUGFyc2UoKSB7XG4gIGZ1bmN0aW9uIGNtcExlblJldihhLCBiKSB7XG4gICAgcmV0dXJuIGIubGVuZ3RoIC0gYS5sZW5ndGg7XG4gIH1cblxuICB2YXIgc2hvcnRQaWVjZXMgPSBbXSxcbiAgICAgIGxvbmdQaWVjZXMgPSBbXSxcbiAgICAgIG1peGVkUGllY2VzID0gW10sXG4gICAgICBpLFxuICAgICAgbW9tO1xuXG4gIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCBpXSk7XG4gICAgc2hvcnRQaWVjZXMucHVzaCh0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpKTtcbiAgICBsb25nUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCAnJykpO1xuICAgIG1peGVkUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCAnJykpO1xuICAgIG1peGVkUGllY2VzLnB1c2godGhpcy5tb250aHNTaG9ydChtb20sICcnKSk7XG4gIH1cblxuICBzaG9ydFBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gIGxvbmdQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICBtaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldik7XG5cbiAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICBzaG9ydFBpZWNlc1tpXSA9IHJlZ2V4RXNjYXBlKHNob3J0UGllY2VzW2ldKTtcbiAgICBsb25nUGllY2VzW2ldID0gcmVnZXhFc2NhcGUobG9uZ1BpZWNlc1tpXSk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgMjQ7IGkrKykge1xuICAgIG1peGVkUGllY2VzW2ldID0gcmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO1xuICB9XG5cbiAgdGhpcy5fbW9udGhzUmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBtaXhlZFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gIHRoaXMuX21vbnRoc1Nob3J0UmVnZXggPSB0aGlzLl9tb250aHNSZWdleDtcbiAgdGhpcy5fbW9udGhzU3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBsb25nUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIHNob3J0UGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ1knLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHZhciB5ID0gdGhpcy55ZWFyKCk7XG4gIHJldHVybiB5IDw9IDk5OTkgPyB6ZXJvRmlsbCh5LCA0KSA6ICcrJyArIHk7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnWVknLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy55ZWFyKCkgJSAxMDA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWScsIDRdLCAwLCAneWVhcicpO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydZWVlZWScsIDVdLCAwLCAneWVhcicpO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydZWVlZWVknLCA2LCB0cnVlXSwgMCwgJ3llYXInKTtcbmFkZFVuaXRBbGlhcygneWVhcicsICd5Jyk7XG5hZGRVbml0UHJpb3JpdHkoJ3llYXInLCAxKTtcbmFkZFJlZ2V4VG9rZW4oJ1knLCBtYXRjaFNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCdZWScsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ1lZWVknLCBtYXRjaDF0bzQsIG1hdGNoNCk7XG5hZGRSZWdleFRva2VuKCdZWVlZWScsIG1hdGNoMXRvNiwgbWF0Y2g2KTtcbmFkZFJlZ2V4VG9rZW4oJ1lZWVlZWScsIG1hdGNoMXRvNiwgbWF0Y2g2KTtcbmFkZFBhcnNlVG9rZW4oWydZWVlZWScsICdZWVlZWVknXSwgWUVBUik7XG5hZGRQYXJzZVRva2VuKCdZWVlZJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICBhcnJheVtZRUFSXSA9IGlucHV0Lmxlbmd0aCA9PT0gMiA/IGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KSA6IHRvSW50KGlucHV0KTtcbn0pO1xuYWRkUGFyc2VUb2tlbignWVknLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gIGFycmF5W1lFQVJdID0gaG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpO1xufSk7XG5hZGRQYXJzZVRva2VuKCdZJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICBhcnJheVtZRUFSXSA9IHBhcnNlSW50KGlucHV0LCAxMCk7XG59KTtcblxuZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKSB7XG4gIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1O1xufVxuXG5ob29rcy5wYXJzZVR3b0RpZ2l0WWVhciA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICByZXR1cm4gdG9JbnQoaW5wdXQpICsgKHRvSW50KGlucHV0KSA+IDY4ID8gMTkwMCA6IDIwMDApO1xufTtcblxudmFyIGdldFNldFllYXIgPSBtYWtlR2V0U2V0KCdGdWxsWWVhcicsIHRydWUpO1xuXG5mdW5jdGlvbiBnZXRJc0xlYXBZZWFyKCkge1xuICByZXR1cm4gaXNMZWFwWWVhcih0aGlzLnllYXIoKSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURhdGUoeSwgbSwgZCwgaCwgTSwgcywgbXMpIHtcbiAgdmFyIGRhdGU7XG5cbiAgaWYgKHkgPCAxMDAgJiYgeSA+PSAwKSB7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKHkgKyA0MDAsIG0sIGQsIGgsIE0sIHMsIG1zKTtcblxuICAgIGlmIChpc0Zpbml0ZShkYXRlLmdldEZ1bGxZZWFyKCkpKSB7XG4gICAgICBkYXRlLnNldEZ1bGxZZWFyKHkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBkYXRlID0gbmV3IERhdGUoeSwgbSwgZCwgaCwgTSwgcywgbXMpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVUQ0RhdGUoeSkge1xuICB2YXIgZGF0ZSwgYXJncztcblxuICBpZiAoeSA8IDEwMCAmJiB5ID49IDApIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICBhcmdzWzBdID0geSArIDQwMDtcbiAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCwgYXJncykpO1xuXG4gICAgaWYgKGlzRmluaXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSkpIHtcbiAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQy5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIHJldHVybiBkYXRlO1xufVxuXG5mdW5jdGlvbiBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpIHtcbiAgdmFyIGZ3ZCA9IDcgKyBkb3cgLSBkb3ksXG4gICAgICBmd2RsdyA9ICg3ICsgY3JlYXRlVVRDRGF0ZSh5ZWFyLCAwLCBmd2QpLmdldFVUQ0RheSgpIC0gZG93KSAlIDc7XG4gIHJldHVybiAtZndkbHcgKyBmd2QgLSAxO1xufVxuXG5mdW5jdGlvbiBkYXlPZlllYXJGcm9tV2Vla3MoeWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgdmFyIGxvY2FsV2Vla2RheSA9ICg3ICsgd2Vla2RheSAtIGRvdykgJSA3LFxuICAgICAgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh5ZWFyLCBkb3csIGRveSksXG4gICAgICBkYXlPZlllYXIgPSAxICsgNyAqICh3ZWVrIC0gMSkgKyBsb2NhbFdlZWtkYXkgKyB3ZWVrT2Zmc2V0LFxuICAgICAgcmVzWWVhcixcbiAgICAgIHJlc0RheU9mWWVhcjtcblxuICBpZiAoZGF5T2ZZZWFyIDw9IDApIHtcbiAgICByZXNZZWFyID0geWVhciAtIDE7XG4gICAgcmVzRGF5T2ZZZWFyID0gZGF5c0luWWVhcihyZXNZZWFyKSArIGRheU9mWWVhcjtcbiAgfSBlbHNlIGlmIChkYXlPZlllYXIgPiBkYXlzSW5ZZWFyKHllYXIpKSB7XG4gICAgcmVzWWVhciA9IHllYXIgKyAxO1xuICAgIHJlc0RheU9mWWVhciA9IGRheU9mWWVhciAtIGRheXNJblllYXIoeWVhcik7XG4gIH0gZWxzZSB7XG4gICAgcmVzWWVhciA9IHllYXI7XG4gICAgcmVzRGF5T2ZZZWFyID0gZGF5T2ZZZWFyO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB5ZWFyOiByZXNZZWFyLFxuICAgIGRheU9mWWVhcjogcmVzRGF5T2ZZZWFyXG4gIH07XG59XG5cbmZ1bmN0aW9uIHdlZWtPZlllYXIobW9tLCBkb3csIGRveSkge1xuICB2YXIgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldChtb20ueWVhcigpLCBkb3csIGRveSksXG4gICAgICB3ZWVrID0gTWF0aC5mbG9vcigobW9tLmRheU9mWWVhcigpIC0gd2Vla09mZnNldCAtIDEpIC8gNykgKyAxLFxuICAgICAgcmVzV2VlayxcbiAgICAgIHJlc1llYXI7XG5cbiAgaWYgKHdlZWsgPCAxKSB7XG4gICAgcmVzWWVhciA9IG1vbS55ZWFyKCkgLSAxO1xuICAgIHJlc1dlZWsgPSB3ZWVrICsgd2Vla3NJblllYXIocmVzWWVhciwgZG93LCBkb3kpO1xuICB9IGVsc2UgaWYgKHdlZWsgPiB3ZWVrc0luWWVhcihtb20ueWVhcigpLCBkb3csIGRveSkpIHtcbiAgICByZXNXZWVrID0gd2VlayAtIHdlZWtzSW5ZZWFyKG1vbS55ZWFyKCksIGRvdywgZG95KTtcbiAgICByZXNZZWFyID0gbW9tLnllYXIoKSArIDE7XG4gIH0gZWxzZSB7XG4gICAgcmVzWWVhciA9IG1vbS55ZWFyKCk7XG4gICAgcmVzV2VlayA9IHdlZWs7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdlZWs6IHJlc1dlZWssXG4gICAgeWVhcjogcmVzWWVhclxuICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrc0luWWVhcih5ZWFyLCBkb3csIGRveSkge1xuICB2YXIgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh5ZWFyLCBkb3csIGRveSksXG4gICAgICB3ZWVrT2Zmc2V0TmV4dCA9IGZpcnN0V2Vla09mZnNldCh5ZWFyICsgMSwgZG93LCBkb3kpO1xuICByZXR1cm4gKGRheXNJblllYXIoeWVhcikgLSB3ZWVrT2Zmc2V0ICsgd2Vla09mZnNldE5leHQpIC8gNztcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ3cnLCBbJ3d3JywgMl0sICd3bycsICd3ZWVrJyk7XG5hZGRGb3JtYXRUb2tlbignVycsIFsnV1cnLCAyXSwgJ1dvJywgJ2lzb1dlZWsnKTtcbmFkZFVuaXRBbGlhcygnd2VlaycsICd3Jyk7XG5hZGRVbml0QWxpYXMoJ2lzb1dlZWsnLCAnVycpO1xuYWRkVW5pdFByaW9yaXR5KCd3ZWVrJywgNSk7XG5hZGRVbml0UHJpb3JpdHkoJ2lzb1dlZWsnLCA1KTtcbmFkZFJlZ2V4VG9rZW4oJ3cnLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignd3cnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdXJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ1dXJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkV2Vla1BhcnNlVG9rZW4oWyd3JywgJ3d3JywgJ1cnLCAnV1cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gIHdlZWtbdG9rZW4uc3Vic3RyKDAsIDEpXSA9IHRvSW50KGlucHV0KTtcbn0pO1xuXG5mdW5jdGlvbiBsb2NhbGVXZWVrKG1vbSkge1xuICByZXR1cm4gd2Vla09mWWVhcihtb20sIHRoaXMuX3dlZWsuZG93LCB0aGlzLl93ZWVrLmRveSkud2Vlaztcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVXZWVrID0ge1xuICBkb3c6IDAsXG4gIGRveTogNlxufTtcblxuZnVuY3Rpb24gbG9jYWxlRmlyc3REYXlPZldlZWsoKSB7XG4gIHJldHVybiB0aGlzLl93ZWVrLmRvdztcbn1cblxuZnVuY3Rpb24gbG9jYWxlRmlyc3REYXlPZlllYXIoKSB7XG4gIHJldHVybiB0aGlzLl93ZWVrLmRveTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0V2VlayhpbnB1dCkge1xuICB2YXIgd2VlayA9IHRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7XG4gIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2VlayA6IHRoaXMuYWRkKChpbnB1dCAtIHdlZWspICogNywgJ2QnKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0SVNPV2VlayhpbnB1dCkge1xuICB2YXIgd2VlayA9IHdlZWtPZlllYXIodGhpcywgMSwgNCkud2VlaztcbiAgcmV0dXJuIGlucHV0ID09IG51bGwgPyB3ZWVrIDogdGhpcy5hZGQoKGlucHV0IC0gd2VlaykgKiA3LCAnZCcpO1xufVxuXG5hZGRGb3JtYXRUb2tlbignZCcsIDAsICdkbycsICdkYXknKTtcbmFkZEZvcm1hdFRva2VuKCdkZCcsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKHRoaXMsIGZvcm1hdCk7XG59KTtcbmFkZEZvcm1hdFRva2VuKCdkZGQnLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c1Nob3J0KHRoaXMsIGZvcm1hdCk7XG59KTtcbmFkZEZvcm1hdFRva2VuKCdkZGRkJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcywgZm9ybWF0KTtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oJ2UnLCAwLCAwLCAnd2Vla2RheScpO1xuYWRkRm9ybWF0VG9rZW4oJ0UnLCAwLCAwLCAnaXNvV2Vla2RheScpO1xuYWRkVW5pdEFsaWFzKCdkYXknLCAnZCcpO1xuYWRkVW5pdEFsaWFzKCd3ZWVrZGF5JywgJ2UnKTtcbmFkZFVuaXRBbGlhcygnaXNvV2Vla2RheScsICdFJyk7XG5hZGRVbml0UHJpb3JpdHkoJ2RheScsIDExKTtcbmFkZFVuaXRQcmlvcml0eSgnd2Vla2RheScsIDExKTtcbmFkZFVuaXRQcmlvcml0eSgnaXNvV2Vla2RheScsIDExKTtcbmFkZFJlZ2V4VG9rZW4oJ2QnLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignZScsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdFJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ2RkJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c01pblJlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUmVnZXhUb2tlbignZGRkJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c1Nob3J0UmVnZXgoaXNTdHJpY3QpO1xufSk7XG5hZGRSZWdleFRva2VuKCdkZGRkJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c1JlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkV2Vla1BhcnNlVG9rZW4oWydkZCcsICdkZGQnLCAnZGRkZCddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgdmFyIHdlZWtkYXkgPSBjb25maWcuX2xvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0LCB0b2tlbiwgY29uZmlnLl9zdHJpY3QpO1xuXG4gIGlmICh3ZWVrZGF5ICE9IG51bGwpIHtcbiAgICB3ZWVrLmQgPSB3ZWVrZGF5O1xuICB9IGVsc2Uge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRXZWVrZGF5ID0gaW5wdXQ7XG4gIH1cbn0pO1xuYWRkV2Vla1BhcnNlVG9rZW4oWydkJywgJ2UnLCAnRSddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgd2Vla1t0b2tlbl0gPSB0b0ludChpbnB1dCk7XG59KTtcblxuZnVuY3Rpb24gcGFyc2VXZWVrZGF5KGlucHV0LCBsb2NhbGUpIHtcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBpZiAoIWlzTmFOKGlucHV0KSkge1xuICAgIHJldHVybiBwYXJzZUludChpbnB1dCwgMTApO1xuICB9XG5cbiAgaW5wdXQgPSBsb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCk7XG5cbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gcGFyc2VJc29XZWVrZGF5KGlucHV0LCBsb2NhbGUpIHtcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQpICUgNyB8fCA3O1xuICB9XG5cbiAgcmV0dXJuIGlzTmFOKGlucHV0KSA/IG51bGwgOiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gc2hpZnRXZWVrZGF5cyh3cywgbikge1xuICByZXR1cm4gd3Muc2xpY2UobiwgNykuY29uY2F0KHdzLnNsaWNlKDAsIG4pKTtcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVXZWVrZGF5cyA9ICdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKSxcbiAgICBkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydCA9ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyksXG4gICAgZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluID0gJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpLFxuICAgIGRlZmF1bHRXZWVrZGF5c1JlZ2V4ID0gbWF0Y2hXb3JkLFxuICAgIGRlZmF1bHRXZWVrZGF5c1Nob3J0UmVnZXggPSBtYXRjaFdvcmQsXG4gICAgZGVmYXVsdFdlZWtkYXlzTWluUmVnZXggPSBtYXRjaFdvcmQ7XG5cbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzKG0sIGZvcm1hdCkge1xuICB2YXIgd2Vla2RheXMgPSBpc0FycmF5KHRoaXMuX3dlZWtkYXlzKSA/IHRoaXMuX3dlZWtkYXlzIDogdGhpcy5fd2Vla2RheXNbbSAmJiBtICE9PSB0cnVlICYmIHRoaXMuX3dlZWtkYXlzLmlzRm9ybWF0LnRlc3QoZm9ybWF0KSA/ICdmb3JtYXQnIDogJ3N0YW5kYWxvbmUnXTtcbiAgcmV0dXJuIG0gPT09IHRydWUgPyBzaGlmdFdlZWtkYXlzKHdlZWtkYXlzLCB0aGlzLl93ZWVrLmRvdykgOiBtID8gd2Vla2RheXNbbS5kYXkoKV0gOiB3ZWVrZGF5cztcbn1cblxuZnVuY3Rpb24gbG9jYWxlV2Vla2RheXNTaG9ydChtKSB7XG4gIHJldHVybiBtID09PSB0cnVlID8gc2hpZnRXZWVrZGF5cyh0aGlzLl93ZWVrZGF5c1Nob3J0LCB0aGlzLl93ZWVrLmRvdykgOiBtID8gdGhpcy5fd2Vla2RheXNTaG9ydFttLmRheSgpXSA6IHRoaXMuX3dlZWtkYXlzU2hvcnQ7XG59XG5cbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzTWluKG0pIHtcbiAgcmV0dXJuIG0gPT09IHRydWUgPyBzaGlmdFdlZWtkYXlzKHRoaXMuX3dlZWtkYXlzTWluLCB0aGlzLl93ZWVrLmRvdykgOiBtID8gdGhpcy5fd2Vla2RheXNNaW5bbS5kYXkoKV0gOiB0aGlzLl93ZWVrZGF5c01pbjtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU3RyaWN0UGFyc2UkMSh3ZWVrZGF5TmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgdmFyIGksXG4gICAgICBpaSxcbiAgICAgIG1vbSxcbiAgICAgIGxsYyA9IHdlZWtkYXlOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG5cbiAgaWYgKCF0aGlzLl93ZWVrZGF5c1BhcnNlKSB7XG4gICAgdGhpcy5fd2Vla2RheXNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSA9IFtdO1xuICAgIHRoaXMuX21pbldlZWtkYXlzUGFyc2UgPSBbXTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCA3OyArK2kpIHtcbiAgICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgMV0pLmRheShpKTtcbiAgICAgIHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0gPSB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV0gPSB0aGlzLndlZWtkYXlzU2hvcnQobW9tLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgIHRoaXMuX3dlZWtkYXlzUGFyc2VbaV0gPSB0aGlzLndlZWtkYXlzKG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0cmljdCkge1xuICAgIGlmIChmb3JtYXQgPT09ICdkZGRkJykge1xuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfSBlbHNlIGlmIChmb3JtYXQgPT09ICdkZGQnKSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gJ2RkZGQnKSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfSBlbHNlIGlmIChmb3JtYXQgPT09ICdkZGQnKSB7XG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsIGxsYyk7XG5cbiAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgfVxuXG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlpID0gaW5kZXhPZi5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsIGxsYyk7XG5cbiAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgfVxuXG4gICAgICBpaSA9IGluZGV4T2YuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLCBsbGMpO1xuXG4gICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBpaTtcbiAgICAgIH1cblxuICAgICAgaWkgPSBpbmRleE9mLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbG9jYWxlV2Vla2RheXNQYXJzZSh3ZWVrZGF5TmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgdmFyIGksIG1vbSwgcmVnZXg7XG5cbiAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgIHJldHVybiBoYW5kbGVTdHJpY3RQYXJzZSQxLmNhbGwodGhpcywgd2Vla2RheU5hbWUsIGZvcm1hdCwgc3RyaWN0KTtcbiAgfVxuXG4gIGlmICghdGhpcy5fd2Vla2RheXNQYXJzZSkge1xuICAgIHRoaXMuX3dlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlID0gW107XG4gICAgdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlID0gW107XG4gICAgdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIDFdKS5kYXkoaSk7XG5cbiAgICBpZiAoc3RyaWN0ICYmICF0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXSkge1xuICAgICAgdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMud2Vla2RheXMobW9tLCAnJykucmVwbGFjZSgnLicsICdcXFxcLj8nKSArICckJywgJ2knKTtcbiAgICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFxcXC4/JykgKyAnJCcsICdpJyk7XG4gICAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFxcXC4/JykgKyAnJCcsICdpJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl93ZWVrZGF5c1BhcnNlW2ldKSB7XG4gICAgICByZWdleCA9ICdeJyArIHRoaXMud2Vla2RheXMobW9tLCAnJykgKyAnfF4nICsgdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpICsgJ3xeJyArIHRoaXMud2Vla2RheXNNaW4obW9tLCAnJyk7XG4gICAgICB0aGlzLl93ZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cChyZWdleC5yZXBsYWNlKCcuJywgJycpLCAnaScpO1xuICAgIH1cblxuICAgIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnZGRkZCcgJiYgdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH0gZWxzZSBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ2RkZCcgJiYgdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9IGVsc2UgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdkZCcgJiYgdGhpcy5fbWluV2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfSBlbHNlIGlmICghc3RyaWN0ICYmIHRoaXMuX3dlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRTZXREYXlPZldlZWsoaW5wdXQpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgfVxuXG4gIHZhciBkYXkgPSB0aGlzLl9pc1VUQyA/IHRoaXMuX2QuZ2V0VVRDRGF5KCkgOiB0aGlzLl9kLmdldERheSgpO1xuXG4gIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgaW5wdXQgPSBwYXJzZVdlZWtkYXkoaW5wdXQsIHRoaXMubG9jYWxlRGF0YSgpKTtcbiAgICByZXR1cm4gdGhpcy5hZGQoaW5wdXQgLSBkYXksICdkJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRheTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRTZXRMb2NhbGVEYXlPZldlZWsoaW5wdXQpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgfVxuXG4gIHZhciB3ZWVrZGF5ID0gKHRoaXMuZGF5KCkgKyA3IC0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93KSAlIDc7XG4gIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2Vla2RheSA6IHRoaXMuYWRkKGlucHV0IC0gd2Vla2RheSwgJ2QnKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0SVNPRGF5T2ZXZWVrKGlucHV0KSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gIH1cblxuICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgIHZhciB3ZWVrZGF5ID0gcGFyc2VJc29XZWVrZGF5KGlucHV0LCB0aGlzLmxvY2FsZURhdGEoKSk7XG4gICAgcmV0dXJuIHRoaXMuZGF5KHRoaXMuZGF5KCkgJSA3ID8gd2Vla2RheSA6IHdlZWtkYXkgLSA3KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5kYXkoKSB8fCA3O1xuICB9XG59XG5cbmZ1bmN0aW9uIHdlZWtkYXlzUmVnZXgoaXNTdHJpY3QpIHtcbiAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgY29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNSZWdleDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNSZWdleCcpKSB7XG4gICAgICB0aGlzLl93ZWVrZGF5c1JlZ2V4ID0gZGVmYXVsdFdlZWtkYXlzUmVnZXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXggJiYgaXNTdHJpY3QgPyB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4IDogdGhpcy5fd2Vla2RheXNSZWdleDtcbiAgfVxufVxuXG5mdW5jdGlvbiB3ZWVrZGF5c1Nob3J0UmVnZXgoaXNTdHJpY3QpIHtcbiAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgY29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzU2hvcnRSZWdleCcpKSB7XG4gICAgICB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXggPSBkZWZhdWx0V2Vla2RheXNTaG9ydFJlZ2V4O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggJiYgaXNTdHJpY3QgPyB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2Vla2RheXNNaW5SZWdleChpc1N0cmljdCkge1xuICBpZiAodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNSZWdleCcpKSB7XG4gICAgICBjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c01pblJlZ2V4O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c01pblJlZ2V4JykpIHtcbiAgICAgIHRoaXMuX3dlZWtkYXlzTWluUmVnZXggPSBkZWZhdWx0V2Vla2RheXNNaW5SZWdleDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/IHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c01pblJlZ2V4O1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVXZWVrZGF5c1BhcnNlKCkge1xuICBmdW5jdGlvbiBjbXBMZW5SZXYoYSwgYikge1xuICAgIHJldHVybiBiLmxlbmd0aCAtIGEubGVuZ3RoO1xuICB9XG5cbiAgdmFyIG1pblBpZWNlcyA9IFtdLFxuICAgICAgc2hvcnRQaWVjZXMgPSBbXSxcbiAgICAgIGxvbmdQaWVjZXMgPSBbXSxcbiAgICAgIG1peGVkUGllY2VzID0gW10sXG4gICAgICBpLFxuICAgICAgbW9tLFxuICAgICAgbWlucCxcbiAgICAgIHNob3J0cCxcbiAgICAgIGxvbmdwO1xuXG4gIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIDFdKS5kYXkoaSk7XG4gICAgbWlucCA9IHJlZ2V4RXNjYXBlKHRoaXMud2Vla2RheXNNaW4obW9tLCAnJykpO1xuICAgIHNob3J0cCA9IHJlZ2V4RXNjYXBlKHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKSk7XG4gICAgbG9uZ3AgPSByZWdleEVzY2FwZSh0aGlzLndlZWtkYXlzKG1vbSwgJycpKTtcbiAgICBtaW5QaWVjZXMucHVzaChtaW5wKTtcbiAgICBzaG9ydFBpZWNlcy5wdXNoKHNob3J0cCk7XG4gICAgbG9uZ1BpZWNlcy5wdXNoKGxvbmdwKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKG1pbnApO1xuICAgIG1peGVkUGllY2VzLnB1c2goc2hvcnRwKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKGxvbmdwKTtcbiAgfVxuXG4gIG1pblBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gIHNob3J0UGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgbG9uZ1BpZWNlcy5zb3J0KGNtcExlblJldik7XG4gIG1peGVkUGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgdGhpcy5fd2Vla2RheXNSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIG1peGVkUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4ID0gdGhpcy5fd2Vla2RheXNSZWdleDtcbiAgdGhpcy5fd2Vla2RheXNNaW5SZWdleCA9IHRoaXMuX3dlZWtkYXlzUmVnZXg7XG4gIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBsb25nUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgc2hvcnRQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbWluUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbn1cblxuZnVuY3Rpb24gaEZvcm1hdCgpIHtcbiAgcmV0dXJuIHRoaXMuaG91cnMoKSAlIDEyIHx8IDEyO1xufVxuXG5mdW5jdGlvbiBrRm9ybWF0KCkge1xuICByZXR1cm4gdGhpcy5ob3VycygpIHx8IDI0O1xufVxuXG5hZGRGb3JtYXRUb2tlbignSCcsIFsnSEgnLCAyXSwgMCwgJ2hvdXInKTtcbmFkZEZvcm1hdFRva2VuKCdoJywgWydoaCcsIDJdLCAwLCBoRm9ybWF0KTtcbmFkZEZvcm1hdFRva2VuKCdrJywgWydraycsIDJdLCAwLCBrRm9ybWF0KTtcbmFkZEZvcm1hdFRva2VuKCdobW0nLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnJyArIGhGb3JtYXQuYXBwbHkodGhpcykgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMik7XG59KTtcbmFkZEZvcm1hdFRva2VuKCdobW1zcycsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICcnICsgaEZvcm1hdC5hcHBseSh0aGlzKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKSArIHplcm9GaWxsKHRoaXMuc2Vjb25kcygpLCAyKTtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oJ0htbScsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICcnICsgdGhpcy5ob3VycygpICsgemVyb0ZpbGwodGhpcy5taW51dGVzKCksIDIpO1xufSk7XG5hZGRGb3JtYXRUb2tlbignSG1tc3MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnJyArIHRoaXMuaG91cnMoKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKSArIHplcm9GaWxsKHRoaXMuc2Vjb25kcygpLCAyKTtcbn0pO1xuXG5mdW5jdGlvbiBtZXJpZGllbSh0b2tlbiwgbG93ZXJjYXNlKSB7XG4gIGFkZEZvcm1hdFRva2VuKHRva2VuLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSwgdGhpcy5taW51dGVzKCksIGxvd2VyY2FzZSk7XG4gIH0pO1xufVxuXG5tZXJpZGllbSgnYScsIHRydWUpO1xubWVyaWRpZW0oJ0EnLCBmYWxzZSk7XG5hZGRVbml0QWxpYXMoJ2hvdXInLCAnaCcpO1xuYWRkVW5pdFByaW9yaXR5KCdob3VyJywgMTMpO1xuXG5mdW5jdGlvbiBtYXRjaE1lcmlkaWVtKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5fbWVyaWRpZW1QYXJzZTtcbn1cblxuYWRkUmVnZXhUb2tlbignYScsIG1hdGNoTWVyaWRpZW0pO1xuYWRkUmVnZXhUb2tlbignQScsIG1hdGNoTWVyaWRpZW0pO1xuYWRkUmVnZXhUb2tlbignSCcsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdoJywgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ2snLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignSEgnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdoaCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ2trJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignaG1tJywgbWF0Y2gzdG80KTtcbmFkZFJlZ2V4VG9rZW4oJ2htbXNzJywgbWF0Y2g1dG82KTtcbmFkZFJlZ2V4VG9rZW4oJ0htbScsIG1hdGNoM3RvNCk7XG5hZGRSZWdleFRva2VuKCdIbW1zcycsIG1hdGNoNXRvNik7XG5hZGRQYXJzZVRva2VuKFsnSCcsICdISCddLCBIT1VSKTtcbmFkZFBhcnNlVG9rZW4oWydrJywgJ2trJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICB2YXIga0lucHV0ID0gdG9JbnQoaW5wdXQpO1xuICBhcnJheVtIT1VSXSA9IGtJbnB1dCA9PT0gMjQgPyAwIDoga0lucHV0O1xufSk7XG5hZGRQYXJzZVRva2VuKFsnYScsICdBJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICBjb25maWcuX2lzUG0gPSBjb25maWcuX2xvY2FsZS5pc1BNKGlucHV0KTtcbiAgY29uZmlnLl9tZXJpZGllbSA9IGlucHV0O1xufSk7XG5hZGRQYXJzZVRva2VuKFsnaCcsICdoaCddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dCk7XG4gIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB0cnVlO1xufSk7XG5hZGRQYXJzZVRva2VuKCdobW0nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgdmFyIHBvcyA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvcykpO1xuICBhcnJheVtNSU5VVEVdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvcykpO1xuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdHJ1ZTtcbn0pO1xuYWRkUGFyc2VUb2tlbignaG1tc3MnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgdmFyIHBvczEgPSBpbnB1dC5sZW5ndGggLSA0LFxuICAgICAgcG9zMiA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvczEpKTtcbiAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MxLCAyKSk7XG4gIGFycmF5W1NFQ09ORF0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMikpO1xuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdHJ1ZTtcbn0pO1xuYWRkUGFyc2VUb2tlbignSG1tJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIHZhciBwb3MgPSBpbnB1dC5sZW5ndGggLSAyO1xuICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MpKTtcbiAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MpKTtcbn0pO1xuYWRkUGFyc2VUb2tlbignSG1tc3MnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgdmFyIHBvczEgPSBpbnB1dC5sZW5ndGggLSA0LFxuICAgICAgcG9zMiA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvczEpKTtcbiAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MxLCAyKSk7XG4gIGFycmF5W1NFQ09ORF0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMikpO1xufSk7XG5cbmZ1bmN0aW9uIGxvY2FsZUlzUE0oaW5wdXQpIHtcbiAgcmV0dXJuIChpbnB1dCArICcnKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKSA9PT0gJ3AnO1xufVxuXG52YXIgZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2UgPSAvW2FwXVxcLj9tP1xcLj8vaSxcbiAgICBnZXRTZXRIb3VyID0gbWFrZUdldFNldCgnSG91cnMnLCB0cnVlKTtcblxuZnVuY3Rpb24gbG9jYWxlTWVyaWRpZW0oaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgaWYgKGhvdXJzID4gMTEpIHtcbiAgICByZXR1cm4gaXNMb3dlciA/ICdwbScgOiAnUE0nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBpc0xvd2VyID8gJ2FtJyA6ICdBTSc7XG4gIH1cbn1cblxudmFyIGJhc2VDb25maWcgPSB7XG4gIGNhbGVuZGFyOiBkZWZhdWx0Q2FsZW5kYXIsXG4gIGxvbmdEYXRlRm9ybWF0OiBkZWZhdWx0TG9uZ0RhdGVGb3JtYXQsXG4gIGludmFsaWREYXRlOiBkZWZhdWx0SW52YWxpZERhdGUsXG4gIG9yZGluYWw6IGRlZmF1bHRPcmRpbmFsLFxuICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiBkZWZhdWx0RGF5T2ZNb250aE9yZGluYWxQYXJzZSxcbiAgcmVsYXRpdmVUaW1lOiBkZWZhdWx0UmVsYXRpdmVUaW1lLFxuICBtb250aHM6IGRlZmF1bHRMb2NhbGVNb250aHMsXG4gIG1vbnRoc1Nob3J0OiBkZWZhdWx0TG9jYWxlTW9udGhzU2hvcnQsXG4gIHdlZWs6IGRlZmF1bHRMb2NhbGVXZWVrLFxuICB3ZWVrZGF5czogZGVmYXVsdExvY2FsZVdlZWtkYXlzLFxuICB3ZWVrZGF5c01pbjogZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluLFxuICB3ZWVrZGF5c1Nob3J0OiBkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydCxcbiAgbWVyaWRpZW1QYXJzZTogZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2Vcbn07XG52YXIgbG9jYWxlcyA9IHt9LFxuICAgIGxvY2FsZUZhbWlsaWVzID0ge30sXG4gICAgZ2xvYmFsTG9jYWxlO1xuXG5mdW5jdGlvbiBjb21tb25QcmVmaXgoYXJyMSwgYXJyMikge1xuICB2YXIgaSxcbiAgICAgIG1pbmwgPSBNYXRoLm1pbihhcnIxLmxlbmd0aCwgYXJyMi5sZW5ndGgpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBtaW5sOyBpICs9IDEpIHtcbiAgICBpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1pbmw7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxvY2FsZShrZXkpIHtcbiAgcmV0dXJuIGtleSA/IGtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ18nLCAnLScpIDoga2V5O1xufVxuXG5mdW5jdGlvbiBjaG9vc2VMb2NhbGUobmFtZXMpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgaixcbiAgICAgIG5leHQsXG4gICAgICBsb2NhbGUsXG4gICAgICBzcGxpdDtcblxuICB3aGlsZSAoaSA8IG5hbWVzLmxlbmd0aCkge1xuICAgIHNwbGl0ID0gbm9ybWFsaXplTG9jYWxlKG5hbWVzW2ldKS5zcGxpdCgnLScpO1xuICAgIGogPSBzcGxpdC5sZW5ndGg7XG4gICAgbmV4dCA9IG5vcm1hbGl6ZUxvY2FsZShuYW1lc1tpICsgMV0pO1xuICAgIG5leHQgPSBuZXh0ID8gbmV4dC5zcGxpdCgnLScpIDogbnVsbDtcblxuICAgIHdoaWxlIChqID4gMCkge1xuICAgICAgbG9jYWxlID0gbG9hZExvY2FsZShzcGxpdC5zbGljZSgwLCBqKS5qb2luKCctJykpO1xuXG4gICAgICBpZiAobG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXh0ICYmIG5leHQubGVuZ3RoID49IGogJiYgY29tbW9uUHJlZml4KHNwbGl0LCBuZXh0KSA+PSBqIC0gMSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgai0tO1xuICAgIH1cblxuICAgIGkrKztcbiAgfVxuXG4gIHJldHVybiBnbG9iYWxMb2NhbGU7XG59XG5cbmZ1bmN0aW9uIGxvYWRMb2NhbGUobmFtZSkge1xuICB2YXIgb2xkTG9jYWxlID0gbnVsbCxcbiAgICAgIGFsaWFzZWRSZXF1aXJlO1xuXG4gIGlmIChsb2NhbGVzW25hbWVdID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgdHJ5IHtcbiAgICAgIG9sZExvY2FsZSA9IGdsb2JhbExvY2FsZS5fYWJicjtcbiAgICAgIGFsaWFzZWRSZXF1aXJlID0gcmVxdWlyZTtcbiAgICAgIGFsaWFzZWRSZXF1aXJlKCcuL2xvY2FsZS8nICsgbmFtZSk7XG4gICAgICBnZXRTZXRHbG9iYWxMb2NhbGUob2xkTG9jYWxlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2NhbGVzW25hbWVdID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbG9jYWxlc1tuYW1lXTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0R2xvYmFsTG9jYWxlKGtleSwgdmFsdWVzKSB7XG4gIHZhciBkYXRhO1xuXG4gIGlmIChrZXkpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWVzKSkge1xuICAgICAgZGF0YSA9IGdldExvY2FsZShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gZGVmaW5lTG9jYWxlKGtleSwgdmFsdWVzKTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgZ2xvYmFsTG9jYWxlID0gZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdMb2NhbGUgJyArIGtleSArICcgbm90IGZvdW5kLiBEaWQgeW91IGZvcmdldCB0byBsb2FkIGl0PycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnbG9iYWxMb2NhbGUuX2FiYnI7XG59XG5cbmZ1bmN0aW9uIGRlZmluZUxvY2FsZShuYW1lLCBjb25maWcpIHtcbiAgaWYgKGNvbmZpZyAhPT0gbnVsbCkge1xuICAgIHZhciBsb2NhbGUsXG4gICAgICAgIHBhcmVudENvbmZpZyA9IGJhc2VDb25maWc7XG4gICAgY29uZmlnLmFiYnIgPSBuYW1lO1xuXG4gICAgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgZGVwcmVjYXRlU2ltcGxlKCdkZWZpbmVMb2NhbGVPdmVycmlkZScsICd1c2UgbW9tZW50LnVwZGF0ZUxvY2FsZShsb2NhbGVOYW1lLCBjb25maWcpIHRvIGNoYW5nZSAnICsgJ2FuIGV4aXN0aW5nIGxvY2FsZS4gbW9tZW50LmRlZmluZUxvY2FsZShsb2NhbGVOYW1lLCAnICsgJ2NvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlICcgKyAnU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvZGVmaW5lLWxvY2FsZS8gZm9yIG1vcmUgaW5mby4nKTtcbiAgICAgIHBhcmVudENvbmZpZyA9IGxvY2FsZXNbbmFtZV0uX2NvbmZpZztcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5wYXJlbnRMb2NhbGUgIT0gbnVsbCkge1xuICAgICAgaWYgKGxvY2FsZXNbY29uZmlnLnBhcmVudExvY2FsZV0gIT0gbnVsbCkge1xuICAgICAgICBwYXJlbnRDb25maWcgPSBsb2NhbGVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdLl9jb25maWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhbGUgPSBsb2FkTG9jYWxlKGNvbmZpZy5wYXJlbnRMb2NhbGUpO1xuXG4gICAgICAgIGlmIChsb2NhbGUgIT0gbnVsbCkge1xuICAgICAgICAgIHBhcmVudENvbmZpZyA9IGxvY2FsZS5fY29uZmlnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0pIHtcbiAgICAgICAgICAgIGxvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdID0gW107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0ucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgY29uZmlnOiBjb25maWdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsZXNbbmFtZV0gPSBuZXcgTG9jYWxlKG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsIGNvbmZpZykpO1xuXG4gICAgaWYgKGxvY2FsZUZhbWlsaWVzW25hbWVdKSB7XG4gICAgICBsb2NhbGVGYW1pbGllc1tuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGRlZmluZUxvY2FsZSh4Lm5hbWUsIHguY29uZmlnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFNldEdsb2JhbExvY2FsZShuYW1lKTtcbiAgICByZXR1cm4gbG9jYWxlc1tuYW1lXTtcbiAgfSBlbHNlIHtcbiAgICBkZWxldGUgbG9jYWxlc1tuYW1lXTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMb2NhbGUobmFtZSwgY29uZmlnKSB7XG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIHZhciBsb2NhbGUsXG4gICAgICAgIHRtcExvY2FsZSxcbiAgICAgICAgcGFyZW50Q29uZmlnID0gYmFzZUNvbmZpZztcblxuICAgIGlmIChsb2NhbGVzW25hbWVdICE9IG51bGwgJiYgbG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGUgIT0gbnVsbCkge1xuICAgICAgbG9jYWxlc1tuYW1lXS5zZXQobWVyZ2VDb25maWdzKGxvY2FsZXNbbmFtZV0uX2NvbmZpZywgY29uZmlnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRtcExvY2FsZSA9IGxvYWRMb2NhbGUobmFtZSk7XG5cbiAgICAgIGlmICh0bXBMb2NhbGUgIT0gbnVsbCkge1xuICAgICAgICBwYXJlbnRDb25maWcgPSB0bXBMb2NhbGUuX2NvbmZpZztcbiAgICAgIH1cblxuICAgICAgY29uZmlnID0gbWVyZ2VDb25maWdzKHBhcmVudENvbmZpZywgY29uZmlnKTtcblxuICAgICAgaWYgKHRtcExvY2FsZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbmZpZy5hYmJyID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxlID0gbmV3IExvY2FsZShjb25maWcpO1xuICAgICAgbG9jYWxlLnBhcmVudExvY2FsZSA9IGxvY2FsZXNbbmFtZV07XG4gICAgICBsb2NhbGVzW25hbWVdID0gbG9jYWxlO1xuICAgIH1cblxuICAgIGdldFNldEdsb2JhbExvY2FsZShuYW1lKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAobG9jYWxlc1tuYW1lXSAhPSBudWxsKSB7XG4gICAgICBpZiAobG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGUgIT0gbnVsbCkge1xuICAgICAgICBsb2NhbGVzW25hbWVdID0gbG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGU7XG5cbiAgICAgICAgaWYgKG5hbWUgPT09IGdldFNldEdsb2JhbExvY2FsZSgpKSB7XG4gICAgICAgICAgZ2V0U2V0R2xvYmFsTG9jYWxlKG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICBkZWxldGUgbG9jYWxlc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbG9jYWxlc1tuYW1lXTtcbn1cblxuZnVuY3Rpb24gZ2V0TG9jYWxlKGtleSkge1xuICB2YXIgbG9jYWxlO1xuXG4gIGlmIChrZXkgJiYga2V5Ll9sb2NhbGUgJiYga2V5Ll9sb2NhbGUuX2FiYnIpIHtcbiAgICBrZXkgPSBrZXkuX2xvY2FsZS5fYWJicjtcbiAgfVxuXG4gIGlmICgha2V5KSB7XG4gICAgcmV0dXJuIGdsb2JhbExvY2FsZTtcbiAgfVxuXG4gIGlmICghaXNBcnJheShrZXkpKSB7XG4gICAgbG9jYWxlID0gbG9hZExvY2FsZShrZXkpO1xuXG4gICAgaWYgKGxvY2FsZSkge1xuICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICB9XG5cbiAgICBrZXkgPSBba2V5XTtcbiAgfVxuXG4gIHJldHVybiBjaG9vc2VMb2NhbGUoa2V5KTtcbn1cblxuZnVuY3Rpb24gbGlzdExvY2FsZXMoKSB7XG4gIHJldHVybiBrZXlzKGxvY2FsZXMpO1xufVxuXG5mdW5jdGlvbiBjaGVja092ZXJmbG93KG0pIHtcbiAgdmFyIG92ZXJmbG93LFxuICAgICAgYSA9IG0uX2E7XG5cbiAgaWYgKGEgJiYgZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93ID09PSAtMikge1xuICAgIG92ZXJmbG93ID0gYVtNT05USF0gPCAwIHx8IGFbTU9OVEhdID4gMTEgPyBNT05USCA6IGFbREFURV0gPCAxIHx8IGFbREFURV0gPiBkYXlzSW5Nb250aChhW1lFQVJdLCBhW01PTlRIXSkgPyBEQVRFIDogYVtIT1VSXSA8IDAgfHwgYVtIT1VSXSA+IDI0IHx8IGFbSE9VUl0gPT09IDI0ICYmIChhW01JTlVURV0gIT09IDAgfHwgYVtTRUNPTkRdICE9PSAwIHx8IGFbTUlMTElTRUNPTkRdICE9PSAwKSA/IEhPVVIgOiBhW01JTlVURV0gPCAwIHx8IGFbTUlOVVRFXSA+IDU5ID8gTUlOVVRFIDogYVtTRUNPTkRdIDwgMCB8fCBhW1NFQ09ORF0gPiA1OSA/IFNFQ09ORCA6IGFbTUlMTElTRUNPTkRdIDwgMCB8fCBhW01JTExJU0VDT05EXSA+IDk5OSA/IE1JTExJU0VDT05EIDogLTE7XG5cbiAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd0RheU9mWWVhciAmJiAob3ZlcmZsb3cgPCBZRUFSIHx8IG92ZXJmbG93ID4gREFURSkpIHtcbiAgICAgIG92ZXJmbG93ID0gREFURTtcbiAgICB9XG5cbiAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd1dlZWtzICYmIG92ZXJmbG93ID09PSAtMSkge1xuICAgICAgb3ZlcmZsb3cgPSBXRUVLO1xuICAgIH1cblxuICAgIGlmIChnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93V2Vla2RheSAmJiBvdmVyZmxvdyA9PT0gLTEpIHtcbiAgICAgIG92ZXJmbG93ID0gV0VFS0RBWTtcbiAgICB9XG5cbiAgICBnZXRQYXJzaW5nRmxhZ3MobSkub3ZlcmZsb3cgPSBvdmVyZmxvdztcbiAgfVxuXG4gIHJldHVybiBtO1xufVxuXG52YXIgZXh0ZW5kZWRJc29SZWdleCA9IC9eXFxzKigoPzpbKy1dXFxkezZ9fFxcZHs0fSktKD86XFxkXFxkLVxcZFxcZHxXXFxkXFxkLVxcZHxXXFxkXFxkfFxcZFxcZFxcZHxcXGRcXGQpKSg/OihUfCApKFxcZFxcZCg/OjpcXGRcXGQoPzo6XFxkXFxkKD86Wy4sXVxcZCspPyk/KT8pKFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPyQvLFxuICAgIGJhc2ljSXNvUmVnZXggPSAvXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pKD86XFxkXFxkXFxkXFxkfFdcXGRcXGRcXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkfCkpKD86KFR8ICkoXFxkXFxkKD86XFxkXFxkKD86XFxkXFxkKD86Wy4sXVxcZCspPyk/KT8pKFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPyQvLFxuICAgIHR6UmVnZXggPSAvWnxbKy1dXFxkXFxkKD86Oj9cXGRcXGQpPy8sXG4gICAgaXNvRGF0ZXMgPSBbWydZWVlZWVktTU0tREQnLCAvWystXVxcZHs2fS1cXGRcXGQtXFxkXFxkL10sIFsnWVlZWS1NTS1ERCcsIC9cXGR7NH0tXFxkXFxkLVxcZFxcZC9dLCBbJ0dHR0ctW1ddV1ctRScsIC9cXGR7NH0tV1xcZFxcZC1cXGQvXSwgWydHR0dHLVtXXVdXJywgL1xcZHs0fS1XXFxkXFxkLywgZmFsc2VdLCBbJ1lZWVktREREJywgL1xcZHs0fS1cXGR7M30vXSwgWydZWVlZLU1NJywgL1xcZHs0fS1cXGRcXGQvLCBmYWxzZV0sIFsnWVlZWVlZTU1ERCcsIC9bKy1dXFxkezEwfS9dLCBbJ1lZWVlNTUREJywgL1xcZHs4fS9dLCBbJ0dHR0dbV11XV0UnLCAvXFxkezR9V1xcZHszfS9dLCBbJ0dHR0dbV11XVycsIC9cXGR7NH1XXFxkezJ9LywgZmFsc2VdLCBbJ1lZWVlEREQnLCAvXFxkezd9L10sIFsnWVlZWU1NJywgL1xcZHs2fS8sIGZhbHNlXSwgWydZWVlZJywgL1xcZHs0fS8sIGZhbHNlXV0sXG4gICAgaXNvVGltZXMgPSBbWydISDptbTpzcy5TU1NTJywgL1xcZFxcZDpcXGRcXGQ6XFxkXFxkXFwuXFxkKy9dLCBbJ0hIOm1tOnNzLFNTU1MnLCAvXFxkXFxkOlxcZFxcZDpcXGRcXGQsXFxkKy9dLCBbJ0hIOm1tOnNzJywgL1xcZFxcZDpcXGRcXGQ6XFxkXFxkL10sIFsnSEg6bW0nLCAvXFxkXFxkOlxcZFxcZC9dLCBbJ0hIbW1zcy5TU1NTJywgL1xcZFxcZFxcZFxcZFxcZFxcZFxcLlxcZCsvXSwgWydISG1tc3MsU1NTUycsIC9cXGRcXGRcXGRcXGRcXGRcXGQsXFxkKy9dLCBbJ0hIbW1zcycsIC9cXGRcXGRcXGRcXGRcXGRcXGQvXSwgWydISG1tJywgL1xcZFxcZFxcZFxcZC9dLCBbJ0hIJywgL1xcZFxcZC9dXSxcbiAgICBhc3BOZXRKc29uUmVnZXggPSAvXlxcLz9EYXRlXFwoKC0/XFxkKykvaSxcbiAgICByZmMyODIyID0gL14oPzooTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSw/XFxzKT8oXFxkezEsMn0pXFxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxccyhcXGR7Miw0fSlcXHMoXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKSk/XFxzKD86KFVUfEdNVHxbRUNNUF1bU0RdVCl8KFtael0pfChbKy1dXFxkezR9KSkkLyxcbiAgICBvYnNPZmZzZXRzID0ge1xuICBVVDogMCxcbiAgR01UOiAwLFxuICBFRFQ6IC00ICogNjAsXG4gIEVTVDogLTUgKiA2MCxcbiAgQ0RUOiAtNSAqIDYwLFxuICBDU1Q6IC02ICogNjAsXG4gIE1EVDogLTYgKiA2MCxcbiAgTVNUOiAtNyAqIDYwLFxuICBQRFQ6IC03ICogNjAsXG4gIFBTVDogLTggKiA2MFxufTtcblxuZnVuY3Rpb24gY29uZmlnRnJvbUlTTyhjb25maWcpIHtcbiAgdmFyIGksXG4gICAgICBsLFxuICAgICAgc3RyaW5nID0gY29uZmlnLl9pLFxuICAgICAgbWF0Y2ggPSBleHRlbmRlZElzb1JlZ2V4LmV4ZWMoc3RyaW5nKSB8fCBiYXNpY0lzb1JlZ2V4LmV4ZWMoc3RyaW5nKSxcbiAgICAgIGFsbG93VGltZSxcbiAgICAgIGRhdGVGb3JtYXQsXG4gICAgICB0aW1lRm9ybWF0LFxuICAgICAgdHpGb3JtYXQ7XG5cbiAgaWYgKG1hdGNoKSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaXNvID0gdHJ1ZTtcblxuICAgIGZvciAoaSA9IDAsIGwgPSBpc29EYXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChpc29EYXRlc1tpXVsxXS5leGVjKG1hdGNoWzFdKSkge1xuICAgICAgICBkYXRlRm9ybWF0ID0gaXNvRGF0ZXNbaV1bMF07XG4gICAgICAgIGFsbG93VGltZSA9IGlzb0RhdGVzW2ldWzJdICE9PSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGVGb3JtYXQgPT0gbnVsbCkge1xuICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG1hdGNoWzNdKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gaXNvVGltZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChpc29UaW1lc1tpXVsxXS5leGVjKG1hdGNoWzNdKSkge1xuICAgICAgICAgIHRpbWVGb3JtYXQgPSAobWF0Y2hbMl0gfHwgJyAnKSArIGlzb1RpbWVzW2ldWzBdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aW1lRm9ybWF0ID09IG51bGwpIHtcbiAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWFsbG93VGltZSAmJiB0aW1lRm9ybWF0ICE9IG51bGwpIHtcbiAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtYXRjaFs0XSkge1xuICAgICAgaWYgKHR6UmVnZXguZXhlYyhtYXRjaFs0XSkpIHtcbiAgICAgICAgdHpGb3JtYXQgPSAnWic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbmZpZy5fZiA9IGRhdGVGb3JtYXQgKyAodGltZUZvcm1hdCB8fCAnJykgKyAodHpGb3JtYXQgfHwgJycpO1xuICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RnJvbVJGQzI4MjJTdHJpbmdzKHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKSB7XG4gIHZhciByZXN1bHQgPSBbdW50cnVuY2F0ZVllYXIoeWVhclN0ciksIGRlZmF1bHRMb2NhbGVNb250aHNTaG9ydC5pbmRleE9mKG1vbnRoU3RyKSwgcGFyc2VJbnQoZGF5U3RyLCAxMCksIHBhcnNlSW50KGhvdXJTdHIsIDEwKSwgcGFyc2VJbnQobWludXRlU3RyLCAxMCldO1xuXG4gIGlmIChzZWNvbmRTdHIpIHtcbiAgICByZXN1bHQucHVzaChwYXJzZUludChzZWNvbmRTdHIsIDEwKSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiB1bnRydW5jYXRlWWVhcih5ZWFyU3RyKSB7XG4gIHZhciB5ZWFyID0gcGFyc2VJbnQoeWVhclN0ciwgMTApO1xuXG4gIGlmICh5ZWFyIDw9IDQ5KSB7XG4gICAgcmV0dXJuIDIwMDAgKyB5ZWFyO1xuICB9IGVsc2UgaWYgKHllYXIgPD0gOTk5KSB7XG4gICAgcmV0dXJuIDE5MDAgKyB5ZWFyO1xuICB9XG5cbiAgcmV0dXJuIHllYXI7XG59XG5cbmZ1bmN0aW9uIHByZXByb2Nlc3NSRkMyODIyKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwoW14pXSpcXCl8W1xcblxcdF0vZywgJyAnKS5yZXBsYWNlKC8oXFxzXFxzKykvZywgJyAnKS5yZXBsYWNlKC9eXFxzXFxzKi8sICcnKS5yZXBsYWNlKC9cXHNcXHMqJC8sICcnKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tXZWVrZGF5KHdlZWtkYXlTdHIsIHBhcnNlZElucHV0LCBjb25maWcpIHtcbiAgaWYgKHdlZWtkYXlTdHIpIHtcbiAgICB2YXIgd2Vla2RheVByb3ZpZGVkID0gZGVmYXVsdExvY2FsZVdlZWtkYXlzU2hvcnQuaW5kZXhPZih3ZWVrZGF5U3RyKSxcbiAgICAgICAgd2Vla2RheUFjdHVhbCA9IG5ldyBEYXRlKHBhcnNlZElucHV0WzBdLCBwYXJzZWRJbnB1dFsxXSwgcGFyc2VkSW5wdXRbMl0pLmdldERheSgpO1xuXG4gICAgaWYgKHdlZWtkYXlQcm92aWRlZCAhPT0gd2Vla2RheUFjdHVhbCkge1xuICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykud2Vla2RheU1pc21hdGNoID0gdHJ1ZTtcbiAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVPZmZzZXQob2JzT2Zmc2V0LCBtaWxpdGFyeU9mZnNldCwgbnVtT2Zmc2V0KSB7XG4gIGlmIChvYnNPZmZzZXQpIHtcbiAgICByZXR1cm4gb2JzT2Zmc2V0c1tvYnNPZmZzZXRdO1xuICB9IGVsc2UgaWYgKG1pbGl0YXJ5T2Zmc2V0KSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGhtID0gcGFyc2VJbnQobnVtT2Zmc2V0LCAxMCksXG4gICAgICAgIG0gPSBobSAlIDEwMCxcbiAgICAgICAgaCA9IChobSAtIG0pIC8gMTAwO1xuICAgIHJldHVybiBoICogNjAgKyBtO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21SRkMyODIyKGNvbmZpZykge1xuICB2YXIgbWF0Y2ggPSByZmMyODIyLmV4ZWMocHJlcHJvY2Vzc1JGQzI4MjIoY29uZmlnLl9pKSksXG4gICAgICBwYXJzZWRBcnJheTtcblxuICBpZiAobWF0Y2gpIHtcbiAgICBwYXJzZWRBcnJheSA9IGV4dHJhY3RGcm9tUkZDMjgyMlN0cmluZ3MobWF0Y2hbNF0sIG1hdGNoWzNdLCBtYXRjaFsyXSwgbWF0Y2hbNV0sIG1hdGNoWzZdLCBtYXRjaFs3XSk7XG5cbiAgICBpZiAoIWNoZWNrV2Vla2RheShtYXRjaFsxXSwgcGFyc2VkQXJyYXksIGNvbmZpZykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25maWcuX2EgPSBwYXJzZWRBcnJheTtcbiAgICBjb25maWcuX3R6bSA9IGNhbGN1bGF0ZU9mZnNldChtYXRjaFs4XSwgbWF0Y2hbOV0sIG1hdGNoWzEwXSk7XG4gICAgY29uZmlnLl9kID0gY3JlYXRlVVRDRGF0ZS5hcHBseShudWxsLCBjb25maWcuX2EpO1xuXG4gICAgY29uZmlnLl9kLnNldFVUQ01pbnV0ZXMoY29uZmlnLl9kLmdldFVUQ01pbnV0ZXMoKSAtIGNvbmZpZy5fdHptKTtcblxuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnJmYzI4MjIgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmcoY29uZmlnKSB7XG4gIHZhciBtYXRjaGVkID0gYXNwTmV0SnNvblJlZ2V4LmV4ZWMoY29uZmlnLl9pKTtcblxuICBpZiAobWF0Y2hlZCAhPT0gbnVsbCkge1xuICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKCttYXRjaGVkWzFdKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25maWdGcm9tSVNPKGNvbmZpZyk7XG5cbiAgaWYgKGNvbmZpZy5faXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICBkZWxldGUgY29uZmlnLl9pc1ZhbGlkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbmZpZ0Zyb21SRkMyODIyKGNvbmZpZyk7XG5cbiAgaWYgKGNvbmZpZy5faXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICBkZWxldGUgY29uZmlnLl9pc1ZhbGlkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChjb25maWcuX3N0cmljdCkge1xuICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGhvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGNvbmZpZyk7XG4gIH1cbn1cblxuaG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2sgPSBkZXByZWNhdGUoJ3ZhbHVlIHByb3ZpZGVkIGlzIG5vdCBpbiBhIHJlY29nbml6ZWQgUkZDMjgyMiBvciBJU08gZm9ybWF0LiBtb21lbnQgY29uc3RydWN0aW9uIGZhbGxzIGJhY2sgdG8ganMgRGF0ZSgpLCAnICsgJ3doaWNoIGlzIG5vdCByZWxpYWJsZSBhY3Jvc3MgYWxsIGJyb3dzZXJzIGFuZCB2ZXJzaW9ucy4gTm9uIFJGQzI4MjIvSVNPIGRhdGUgZm9ybWF0cyBhcmUgJyArICdkaXNjb3VyYWdlZC4gUGxlYXNlIHJlZmVyIHRvIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvanMtZGF0ZS8gZm9yIG1vcmUgaW5mby4nLCBmdW5jdGlvbiAoY29uZmlnKSB7XG4gIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGNvbmZpZy5faSArIChjb25maWcuX3VzZVVUQyA/ICcgVVRDJyA6ICcnKSk7XG59KTtcblxuZnVuY3Rpb24gZGVmYXVsdHMoYSwgYiwgYykge1xuICBpZiAoYSAhPSBudWxsKSB7XG4gICAgcmV0dXJuIGE7XG4gIH1cblxuICBpZiAoYiAhPSBudWxsKSB7XG4gICAgcmV0dXJuIGI7XG4gIH1cblxuICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gY3VycmVudERhdGVBcnJheShjb25maWcpIHtcbiAgdmFyIG5vd1ZhbHVlID0gbmV3IERhdGUoaG9va3Mubm93KCkpO1xuXG4gIGlmIChjb25maWcuX3VzZVVUQykge1xuICAgIHJldHVybiBbbm93VmFsdWUuZ2V0VVRDRnVsbFllYXIoKSwgbm93VmFsdWUuZ2V0VVRDTW9udGgoKSwgbm93VmFsdWUuZ2V0VVRDRGF0ZSgpXTtcbiAgfVxuXG4gIHJldHVybiBbbm93VmFsdWUuZ2V0RnVsbFllYXIoKSwgbm93VmFsdWUuZ2V0TW9udGgoKSwgbm93VmFsdWUuZ2V0RGF0ZSgpXTtcbn1cblxuZnVuY3Rpb24gY29uZmlnRnJvbUFycmF5KGNvbmZpZykge1xuICB2YXIgaSxcbiAgICAgIGRhdGUsXG4gICAgICBpbnB1dCA9IFtdLFxuICAgICAgY3VycmVudERhdGUsXG4gICAgICBleHBlY3RlZFdlZWtkYXksXG4gICAgICB5ZWFyVG9Vc2U7XG5cbiAgaWYgKGNvbmZpZy5fZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGN1cnJlbnREYXRlID0gY3VycmVudERhdGVBcnJheShjb25maWcpO1xuXG4gIGlmIChjb25maWcuX3cgJiYgY29uZmlnLl9hW0RBVEVdID09IG51bGwgJiYgY29uZmlnLl9hW01PTlRIXSA9PSBudWxsKSB7XG4gICAgZGF5T2ZZZWFyRnJvbVdlZWtJbmZvKGNvbmZpZyk7XG4gIH1cblxuICBpZiAoY29uZmlnLl9kYXlPZlllYXIgIT0gbnVsbCkge1xuICAgIHllYXJUb1VzZSA9IGRlZmF1bHRzKGNvbmZpZy5fYVtZRUFSXSwgY3VycmVudERhdGVbWUVBUl0pO1xuXG4gICAgaWYgKGNvbmZpZy5fZGF5T2ZZZWFyID4gZGF5c0luWWVhcih5ZWFyVG9Vc2UpIHx8IGNvbmZpZy5fZGF5T2ZZZWFyID09PSAwKSB7XG4gICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dEYXlPZlllYXIgPSB0cnVlO1xuICAgIH1cblxuICAgIGRhdGUgPSBjcmVhdGVVVENEYXRlKHllYXJUb1VzZSwgMCwgY29uZmlnLl9kYXlPZlllYXIpO1xuICAgIGNvbmZpZy5fYVtNT05USF0gPSBkYXRlLmdldFVUQ01vbnRoKCk7XG4gICAgY29uZmlnLl9hW0RBVEVdID0gZGF0ZS5nZXRVVENEYXRlKCk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgMyAmJiBjb25maWcuX2FbaV0gPT0gbnVsbDsgKytpKSB7XG4gICAgY29uZmlnLl9hW2ldID0gaW5wdXRbaV0gPSBjdXJyZW50RGF0ZVtpXTtcbiAgfVxuXG4gIGZvciAoOyBpIDwgNzsgaSsrKSB7XG4gICAgY29uZmlnLl9hW2ldID0gaW5wdXRbaV0gPSBjb25maWcuX2FbaV0gPT0gbnVsbCA/IGkgPT09IDIgPyAxIDogMCA6IGNvbmZpZy5fYVtpXTtcbiAgfVxuXG4gIGlmIChjb25maWcuX2FbSE9VUl0gPT09IDI0ICYmIGNvbmZpZy5fYVtNSU5VVEVdID09PSAwICYmIGNvbmZpZy5fYVtTRUNPTkRdID09PSAwICYmIGNvbmZpZy5fYVtNSUxMSVNFQ09ORF0gPT09IDApIHtcbiAgICBjb25maWcuX25leHREYXkgPSB0cnVlO1xuICAgIGNvbmZpZy5fYVtIT1VSXSA9IDA7XG4gIH1cblxuICBjb25maWcuX2QgPSAoY29uZmlnLl91c2VVVEMgPyBjcmVhdGVVVENEYXRlIDogY3JlYXRlRGF0ZSkuYXBwbHkobnVsbCwgaW5wdXQpO1xuICBleHBlY3RlZFdlZWtkYXkgPSBjb25maWcuX3VzZVVUQyA/IGNvbmZpZy5fZC5nZXRVVENEYXkoKSA6IGNvbmZpZy5fZC5nZXREYXkoKTtcblxuICBpZiAoY29uZmlnLl90em0gIT0gbnVsbCkge1xuICAgIGNvbmZpZy5fZC5zZXRVVENNaW51dGVzKGNvbmZpZy5fZC5nZXRVVENNaW51dGVzKCkgLSBjb25maWcuX3R6bSk7XG4gIH1cblxuICBpZiAoY29uZmlnLl9uZXh0RGF5KSB7XG4gICAgY29uZmlnLl9hW0hPVVJdID0gMjQ7XG4gIH1cblxuICBpZiAoY29uZmlnLl93ICYmIHR5cGVvZiBjb25maWcuX3cuZCAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uZmlnLl93LmQgIT09IGV4cGVjdGVkV2Vla2RheSkge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLndlZWtkYXlNaXNtYXRjaCA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF5T2ZZZWFyRnJvbVdlZWtJbmZvKGNvbmZpZykge1xuICB2YXIgdywgd2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95LCB0ZW1wLCB3ZWVrZGF5T3ZlcmZsb3csIGN1cldlZWs7XG4gIHcgPSBjb25maWcuX3c7XG5cbiAgaWYgKHcuR0cgIT0gbnVsbCB8fCB3LlcgIT0gbnVsbCB8fCB3LkUgIT0gbnVsbCkge1xuICAgIGRvdyA9IDE7XG4gICAgZG95ID0gNDtcbiAgICB3ZWVrWWVhciA9IGRlZmF1bHRzKHcuR0csIGNvbmZpZy5fYVtZRUFSXSwgd2Vla09mWWVhcihjcmVhdGVMb2NhbCgpLCAxLCA0KS55ZWFyKTtcbiAgICB3ZWVrID0gZGVmYXVsdHMody5XLCAxKTtcbiAgICB3ZWVrZGF5ID0gZGVmYXVsdHMody5FLCAxKTtcblxuICAgIGlmICh3ZWVrZGF5IDwgMSB8fCB3ZWVrZGF5ID4gNykge1xuICAgICAgd2Vla2RheU92ZXJmbG93ID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZG93ID0gY29uZmlnLl9sb2NhbGUuX3dlZWsuZG93O1xuICAgIGRveSA9IGNvbmZpZy5fbG9jYWxlLl93ZWVrLmRveTtcbiAgICBjdXJXZWVrID0gd2Vla09mWWVhcihjcmVhdGVMb2NhbCgpLCBkb3csIGRveSk7XG4gICAgd2Vla1llYXIgPSBkZWZhdWx0cyh3LmdnLCBjb25maWcuX2FbWUVBUl0sIGN1cldlZWsueWVhcik7XG4gICAgd2VlayA9IGRlZmF1bHRzKHcudywgY3VyV2Vlay53ZWVrKTtcblxuICAgIGlmICh3LmQgIT0gbnVsbCkge1xuICAgICAgd2Vla2RheSA9IHcuZDtcblxuICAgICAgaWYgKHdlZWtkYXkgPCAwIHx8IHdlZWtkYXkgPiA2KSB7XG4gICAgICAgIHdlZWtkYXlPdmVyZmxvdyA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh3LmUgIT0gbnVsbCkge1xuICAgICAgd2Vla2RheSA9IHcuZSArIGRvdztcblxuICAgICAgaWYgKHcuZSA8IDAgfHwgdy5lID4gNikge1xuICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3ZWVrZGF5ID0gZG93O1xuICAgIH1cbiAgfVxuXG4gIGlmICh3ZWVrIDwgMSB8fCB3ZWVrID4gd2Vla3NJblllYXIod2Vla1llYXIsIGRvdywgZG95KSkge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd1dlZWtzID0gdHJ1ZTtcbiAgfSBlbHNlIGlmICh3ZWVrZGF5T3ZlcmZsb3cgIT0gbnVsbCkge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd1dlZWtkYXkgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHRlbXAgPSBkYXlPZlllYXJGcm9tV2Vla3Mod2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KTtcbiAgICBjb25maWcuX2FbWUVBUl0gPSB0ZW1wLnllYXI7XG4gICAgY29uZmlnLl9kYXlPZlllYXIgPSB0ZW1wLmRheU9mWWVhcjtcbiAgfVxufVxuXG5ob29rcy5JU09fODYwMSA9IGZ1bmN0aW9uICgpIHt9O1xuXG5ob29rcy5SRkNfMjgyMiA9IGZ1bmN0aW9uICgpIHt9O1xuXG5mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZykge1xuICBpZiAoY29uZmlnLl9mID09PSBob29rcy5JU09fODYwMSkge1xuICAgIGNvbmZpZ0Zyb21JU08oY29uZmlnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY29uZmlnLl9mID09PSBob29rcy5SRkNfMjgyMikge1xuICAgIGNvbmZpZ0Zyb21SRkMyODIyKGNvbmZpZyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uZmlnLl9hID0gW107XG4gIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmVtcHR5ID0gdHJ1ZTtcbiAgdmFyIHN0cmluZyA9ICcnICsgY29uZmlnLl9pLFxuICAgICAgaSxcbiAgICAgIHBhcnNlZElucHV0LFxuICAgICAgdG9rZW5zLFxuICAgICAgdG9rZW4sXG4gICAgICBza2lwcGVkLFxuICAgICAgc3RyaW5nTGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcbiAgICAgIHRvdGFsUGFyc2VkSW5wdXRMZW5ndGggPSAwLFxuICAgICAgZXJhO1xuICB0b2tlbnMgPSBleHBhbmRGb3JtYXQoY29uZmlnLl9mLCBjb25maWcuX2xvY2FsZSkubWF0Y2goZm9ybWF0dGluZ1Rva2VucykgfHwgW107XG5cbiAgZm9yIChpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgIHBhcnNlZElucHV0ID0gKHN0cmluZy5tYXRjaChnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sIGNvbmZpZykpIHx8IFtdKVswXTtcblxuICAgIGlmIChwYXJzZWRJbnB1dCkge1xuICAgICAgc2tpcHBlZCA9IHN0cmluZy5zdWJzdHIoMCwgc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpKTtcblxuICAgICAgaWYgKHNraXBwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHNraXBwZWQpO1xuICAgICAgfVxuXG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2Uoc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpICsgcGFyc2VkSW5wdXQubGVuZ3RoKTtcbiAgICAgIHRvdGFsUGFyc2VkSW5wdXRMZW5ndGggKz0gcGFyc2VkSW5wdXQubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0pIHtcbiAgICAgIGlmIChwYXJzZWRJbnB1dCkge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lbXB0eSA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkVG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgfVxuXG4gICAgICBhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbiwgcGFyc2VkSW5wdXQsIGNvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChjb25maWcuX3N0cmljdCAmJiAhcGFyc2VkSW5wdXQpIHtcbiAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKTtcbiAgICB9XG4gIH1cblxuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5jaGFyc0xlZnRPdmVyID0gc3RyaW5nTGVuZ3RoIC0gdG90YWxQYXJzZWRJbnB1dExlbmd0aDtcblxuICBpZiAoc3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHN0cmluZyk7XG4gIH1cblxuICBpZiAoY29uZmlnLl9hW0hPVVJdIDw9IDEyICYmIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPT09IHRydWUgJiYgY29uZmlnLl9hW0hPVVJdID4gMCkge1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5wYXJzZWREYXRlUGFydHMgPSBjb25maWcuX2Euc2xpY2UoMCk7XG4gIGdldFBhcnNpbmdGbGFncyhjb25maWcpLm1lcmlkaWVtID0gY29uZmlnLl9tZXJpZGllbTtcbiAgY29uZmlnLl9hW0hPVVJdID0gbWVyaWRpZW1GaXhXcmFwKGNvbmZpZy5fbG9jYWxlLCBjb25maWcuX2FbSE9VUl0sIGNvbmZpZy5fbWVyaWRpZW0pO1xuICBlcmEgPSBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lcmE7XG5cbiAgaWYgKGVyYSAhPT0gbnVsbCkge1xuICAgIGNvbmZpZy5fYVtZRUFSXSA9IGNvbmZpZy5fbG9jYWxlLmVyYXNDb252ZXJ0WWVhcihlcmEsIGNvbmZpZy5fYVtZRUFSXSk7XG4gIH1cblxuICBjb25maWdGcm9tQXJyYXkoY29uZmlnKTtcbiAgY2hlY2tPdmVyZmxvdyhjb25maWcpO1xufVxuXG5mdW5jdGlvbiBtZXJpZGllbUZpeFdyYXAobG9jYWxlLCBob3VyLCBtZXJpZGllbSkge1xuICB2YXIgaXNQbTtcblxuICBpZiAobWVyaWRpZW0gPT0gbnVsbCkge1xuICAgIHJldHVybiBob3VyO1xuICB9XG5cbiAgaWYgKGxvY2FsZS5tZXJpZGllbUhvdXIgIT0gbnVsbCkge1xuICAgIHJldHVybiBsb2NhbGUubWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKTtcbiAgfSBlbHNlIGlmIChsb2NhbGUuaXNQTSAhPSBudWxsKSB7XG4gICAgaXNQbSA9IGxvY2FsZS5pc1BNKG1lcmlkaWVtKTtcblxuICAgIGlmIChpc1BtICYmIGhvdXIgPCAxMikge1xuICAgICAgaG91ciArPSAxMjtcbiAgICB9XG5cbiAgICBpZiAoIWlzUG0gJiYgaG91ciA9PT0gMTIpIHtcbiAgICAgIGhvdXIgPSAwO1xuICAgIH1cblxuICAgIHJldHVybiBob3VyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBob3VyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmdBbmRBcnJheShjb25maWcpIHtcbiAgdmFyIHRlbXBDb25maWcsXG4gICAgICBiZXN0TW9tZW50LFxuICAgICAgc2NvcmVUb0JlYXQsXG4gICAgICBpLFxuICAgICAgY3VycmVudFNjb3JlLFxuICAgICAgdmFsaWRGb3JtYXRGb3VuZCxcbiAgICAgIGJlc3RGb3JtYXRJc1ZhbGlkID0gZmFsc2U7XG5cbiAgaWYgKGNvbmZpZy5fZi5sZW5ndGggPT09IDApIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkRm9ybWF0ID0gdHJ1ZTtcbiAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShOYU4pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCBjb25maWcuX2YubGVuZ3RoOyBpKyspIHtcbiAgICBjdXJyZW50U2NvcmUgPSAwO1xuICAgIHZhbGlkRm9ybWF0Rm91bmQgPSBmYWxzZTtcbiAgICB0ZW1wQ29uZmlnID0gY29weUNvbmZpZyh7fSwgY29uZmlnKTtcblxuICAgIGlmIChjb25maWcuX3VzZVVUQyAhPSBudWxsKSB7XG4gICAgICB0ZW1wQ29uZmlnLl91c2VVVEMgPSBjb25maWcuX3VzZVVUQztcbiAgICB9XG5cbiAgICB0ZW1wQ29uZmlnLl9mID0gY29uZmlnLl9mW2ldO1xuICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQodGVtcENvbmZpZyk7XG5cbiAgICBpZiAoaXNWYWxpZCh0ZW1wQ29uZmlnKSkge1xuICAgICAgdmFsaWRGb3JtYXRGb3VuZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY3VycmVudFNjb3JlICs9IGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5jaGFyc0xlZnRPdmVyO1xuICAgIGN1cnJlbnRTY29yZSArPSBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykudW51c2VkVG9rZW5zLmxlbmd0aCAqIDEwO1xuICAgIGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5zY29yZSA9IGN1cnJlbnRTY29yZTtcblxuICAgIGlmICghYmVzdEZvcm1hdElzVmFsaWQpIHtcbiAgICAgIGlmIChzY29yZVRvQmVhdCA9PSBudWxsIHx8IGN1cnJlbnRTY29yZSA8IHNjb3JlVG9CZWF0IHx8IHZhbGlkRm9ybWF0Rm91bmQpIHtcbiAgICAgICAgc2NvcmVUb0JlYXQgPSBjdXJyZW50U2NvcmU7XG4gICAgICAgIGJlc3RNb21lbnQgPSB0ZW1wQ29uZmlnO1xuXG4gICAgICAgIGlmICh2YWxpZEZvcm1hdEZvdW5kKSB7XG4gICAgICAgICAgYmVzdEZvcm1hdElzVmFsaWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjdXJyZW50U2NvcmUgPCBzY29yZVRvQmVhdCkge1xuICAgICAgICBzY29yZVRvQmVhdCA9IGN1cnJlbnRTY29yZTtcbiAgICAgICAgYmVzdE1vbWVudCA9IHRlbXBDb25maWc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZXh0ZW5kKGNvbmZpZywgYmVzdE1vbWVudCB8fCB0ZW1wQ29uZmlnKTtcbn1cblxuZnVuY3Rpb24gY29uZmlnRnJvbU9iamVjdChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5fZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBpID0gbm9ybWFsaXplT2JqZWN0VW5pdHMoY29uZmlnLl9pKSxcbiAgICAgIGRheU9yRGF0ZSA9IGkuZGF5ID09PSB1bmRlZmluZWQgPyBpLmRhdGUgOiBpLmRheTtcbiAgY29uZmlnLl9hID0gbWFwKFtpLnllYXIsIGkubW9udGgsIGRheU9yRGF0ZSwgaS5ob3VyLCBpLm1pbnV0ZSwgaS5zZWNvbmQsIGkubWlsbGlzZWNvbmRdLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBwYXJzZUludChvYmosIDEwKTtcbiAgfSk7XG4gIGNvbmZpZ0Zyb21BcnJheShjb25maWcpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGcm9tQ29uZmlnKGNvbmZpZykge1xuICB2YXIgcmVzID0gbmV3IE1vbWVudChjaGVja092ZXJmbG93KHByZXBhcmVDb25maWcoY29uZmlnKSkpO1xuXG4gIGlmIChyZXMuX25leHREYXkpIHtcbiAgICByZXMuYWRkKDEsICdkJyk7XG4gICAgcmVzLl9uZXh0RGF5ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gcHJlcGFyZUNvbmZpZyhjb25maWcpIHtcbiAgdmFyIGlucHV0ID0gY29uZmlnLl9pLFxuICAgICAgZm9ybWF0ID0gY29uZmlnLl9mO1xuICBjb25maWcuX2xvY2FsZSA9IGNvbmZpZy5fbG9jYWxlIHx8IGdldExvY2FsZShjb25maWcuX2wpO1xuXG4gIGlmIChpbnB1dCA9PT0gbnVsbCB8fCBmb3JtYXQgPT09IHVuZGVmaW5lZCAmJiBpbnB1dCA9PT0gJycpIHtcbiAgICByZXR1cm4gY3JlYXRlSW52YWxpZCh7XG4gICAgICBudWxsSW5wdXQ6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uZmlnLl9pID0gaW5wdXQgPSBjb25maWcuX2xvY2FsZS5wcmVwYXJzZShpbnB1dCk7XG4gIH1cblxuICBpZiAoaXNNb21lbnQoaW5wdXQpKSB7XG4gICAgcmV0dXJuIG5ldyBNb21lbnQoY2hlY2tPdmVyZmxvdyhpbnB1dCkpO1xuICB9IGVsc2UgaWYgKGlzRGF0ZShpbnB1dCkpIHtcbiAgICBjb25maWcuX2QgPSBpbnB1dDtcbiAgfSBlbHNlIGlmIChpc0FycmF5KGZvcm1hdCkpIHtcbiAgICBjb25maWdGcm9tU3RyaW5nQW5kQXJyYXkoY29uZmlnKTtcbiAgfSBlbHNlIGlmIChmb3JtYXQpIHtcbiAgICBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnRnJvbUlucHV0KGNvbmZpZyk7XG4gIH1cblxuICBpZiAoIWlzVmFsaWQoY29uZmlnKSkge1xuICAgIGNvbmZpZy5fZCA9IG51bGw7XG4gIH1cblxuICByZXR1cm4gY29uZmlnO1xufVxuXG5mdW5jdGlvbiBjb25maWdGcm9tSW5wdXQoY29uZmlnKSB7XG4gIHZhciBpbnB1dCA9IGNvbmZpZy5faTtcblxuICBpZiAoaXNVbmRlZmluZWQoaW5wdXQpKSB7XG4gICAgY29uZmlnLl9kID0gbmV3IERhdGUoaG9va3Mubm93KCkpO1xuICB9IGVsc2UgaWYgKGlzRGF0ZShpbnB1dCkpIHtcbiAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShpbnB1dC52YWx1ZU9mKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWdGcm9tU3RyaW5nKGNvbmZpZyk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICBjb25maWcuX2EgPSBtYXAoaW5wdXQuc2xpY2UoMCksIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiBwYXJzZUludChvYmosIDEwKTtcbiAgICB9KTtcbiAgICBjb25maWdGcm9tQXJyYXkoY29uZmlnKTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChpbnB1dCkpIHtcbiAgICBjb25maWdGcm9tT2JqZWN0KGNvbmZpZyk7XG4gIH0gZWxzZSBpZiAoaXNOdW1iZXIoaW5wdXQpKSB7XG4gICAgY29uZmlnLl9kID0gbmV3IERhdGUoaW5wdXQpO1xuICB9IGVsc2Uge1xuICAgIGhvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGNvbmZpZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCwgaXNVVEMpIHtcbiAgdmFyIGMgPSB7fTtcblxuICBpZiAoZm9ybWF0ID09PSB0cnVlIHx8IGZvcm1hdCA9PT0gZmFsc2UpIHtcbiAgICBzdHJpY3QgPSBmb3JtYXQ7XG4gICAgZm9ybWF0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKGxvY2FsZSA9PT0gdHJ1ZSB8fCBsb2NhbGUgPT09IGZhbHNlKSB7XG4gICAgc3RyaWN0ID0gbG9jYWxlO1xuICAgIGxvY2FsZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChpc09iamVjdChpbnB1dCkgJiYgaXNPYmplY3RFbXB0eShpbnB1dCkgfHwgaXNBcnJheShpbnB1dCkgJiYgaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgaW5wdXQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBjLl9pc0FNb21lbnRPYmplY3QgPSB0cnVlO1xuICBjLl91c2VVVEMgPSBjLl9pc1VUQyA9IGlzVVRDO1xuICBjLl9sID0gbG9jYWxlO1xuICBjLl9pID0gaW5wdXQ7XG4gIGMuX2YgPSBmb3JtYXQ7XG4gIGMuX3N0cmljdCA9IHN0cmljdDtcbiAgcmV0dXJuIGNyZWF0ZUZyb21Db25maWcoYyk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvY2FsKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0KSB7XG4gIHJldHVybiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0LCBmYWxzZSk7XG59XG5cbnZhciBwcm90b3R5cGVNaW4gPSBkZXByZWNhdGUoJ21vbWVudCgpLm1pbiBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1heCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvJywgZnVuY3Rpb24gKCkge1xuICB2YXIgb3RoZXIgPSBjcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXG4gIGlmICh0aGlzLmlzVmFsaWQoKSAmJiBvdGhlci5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gb3RoZXIgPCB0aGlzID8gdGhpcyA6IG90aGVyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVJbnZhbGlkKCk7XG4gIH1cbn0pLFxuICAgIHByb3RvdHlwZU1heCA9IGRlcHJlY2F0ZSgnbW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC8nLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBvdGhlciA9IGNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cbiAgaWYgKHRoaXMuaXNWYWxpZCgpICYmIG90aGVyLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBvdGhlciA+IHRoaXMgPyB0aGlzIDogb3RoZXI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNyZWF0ZUludmFsaWQoKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIHBpY2tCeShmbiwgbW9tZW50cykge1xuICB2YXIgcmVzLCBpO1xuXG4gIGlmIChtb21lbnRzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5KG1vbWVudHNbMF0pKSB7XG4gICAgbW9tZW50cyA9IG1vbWVudHNbMF07XG4gIH1cblxuICBpZiAoIW1vbWVudHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2FsKCk7XG4gIH1cblxuICByZXMgPSBtb21lbnRzWzBdO1xuXG4gIGZvciAoaSA9IDE7IGkgPCBtb21lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCFtb21lbnRzW2ldLmlzVmFsaWQoKSB8fCBtb21lbnRzW2ldW2ZuXShyZXMpKSB7XG4gICAgICByZXMgPSBtb21lbnRzW2ldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIG1pbigpIHtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gIHJldHVybiBwaWNrQnkoJ2lzQmVmb3JlJywgYXJncyk7XG59XG5cbmZ1bmN0aW9uIG1heCgpIHtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gIHJldHVybiBwaWNrQnkoJ2lzQWZ0ZXInLCBhcmdzKTtcbn1cblxudmFyIG5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcbiAgcmV0dXJuIERhdGUubm93ID8gRGF0ZS5ub3coKSA6ICtuZXcgRGF0ZSgpO1xufTtcblxudmFyIG9yZGVyaW5nID0gWyd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgJ21pbGxpc2Vjb25kJ107XG5cbmZ1bmN0aW9uIGlzRHVyYXRpb25WYWxpZChtKSB7XG4gIHZhciBrZXksXG4gICAgICB1bml0SGFzRGVjaW1hbCA9IGZhbHNlLFxuICAgICAgaTtcblxuICBmb3IgKGtleSBpbiBtKSB7XG4gICAgaWYgKGhhc093blByb3AobSwga2V5KSAmJiAhKGluZGV4T2YuY2FsbChvcmRlcmluZywga2V5KSAhPT0gLTEgJiYgKG1ba2V5XSA9PSBudWxsIHx8ICFpc05hTihtW2tleV0pKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgb3JkZXJpbmcubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobVtvcmRlcmluZ1tpXV0pIHtcbiAgICAgIGlmICh1bml0SGFzRGVjaW1hbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZUZsb2F0KG1bb3JkZXJpbmdbaV1dKSAhPT0gdG9JbnQobVtvcmRlcmluZ1tpXV0pKSB7XG4gICAgICAgIHVuaXRIYXNEZWNpbWFsID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZCQxKCkge1xuICByZXR1cm4gdGhpcy5faXNWYWxpZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW52YWxpZCQxKCkge1xuICByZXR1cm4gY3JlYXRlRHVyYXRpb24oTmFOKTtcbn1cblxuZnVuY3Rpb24gRHVyYXRpb24oZHVyYXRpb24pIHtcbiAgdmFyIG5vcm1hbGl6ZWRJbnB1dCA9IG5vcm1hbGl6ZU9iamVjdFVuaXRzKGR1cmF0aW9uKSxcbiAgICAgIHllYXJzID0gbm9ybWFsaXplZElucHV0LnllYXIgfHwgMCxcbiAgICAgIHF1YXJ0ZXJzID0gbm9ybWFsaXplZElucHV0LnF1YXJ0ZXIgfHwgMCxcbiAgICAgIG1vbnRocyA9IG5vcm1hbGl6ZWRJbnB1dC5tb250aCB8fCAwLFxuICAgICAgd2Vla3MgPSBub3JtYWxpemVkSW5wdXQud2VlayB8fCBub3JtYWxpemVkSW5wdXQuaXNvV2VlayB8fCAwLFxuICAgICAgZGF5cyA9IG5vcm1hbGl6ZWRJbnB1dC5kYXkgfHwgMCxcbiAgICAgIGhvdXJzID0gbm9ybWFsaXplZElucHV0LmhvdXIgfHwgMCxcbiAgICAgIG1pbnV0ZXMgPSBub3JtYWxpemVkSW5wdXQubWludXRlIHx8IDAsXG4gICAgICBzZWNvbmRzID0gbm9ybWFsaXplZElucHV0LnNlY29uZCB8fCAwLFxuICAgICAgbWlsbGlzZWNvbmRzID0gbm9ybWFsaXplZElucHV0Lm1pbGxpc2Vjb25kIHx8IDA7XG4gIHRoaXMuX2lzVmFsaWQgPSBpc0R1cmF0aW9uVmFsaWQobm9ybWFsaXplZElucHV0KTtcbiAgdGhpcy5fbWlsbGlzZWNvbmRzID0gK21pbGxpc2Vjb25kcyArIHNlY29uZHMgKiAxZTMgKyBtaW51dGVzICogNmU0ICsgaG91cnMgKiAxMDAwICogNjAgKiA2MDtcbiAgdGhpcy5fZGF5cyA9ICtkYXlzICsgd2Vla3MgKiA3O1xuICB0aGlzLl9tb250aHMgPSArbW9udGhzICsgcXVhcnRlcnMgKiAzICsgeWVhcnMgKiAxMjtcbiAgdGhpcy5fZGF0YSA9IHt9O1xuICB0aGlzLl9sb2NhbGUgPSBnZXRMb2NhbGUoKTtcblxuICB0aGlzLl9idWJibGUoKTtcbn1cblxuZnVuY3Rpb24gaXNEdXJhdGlvbihvYmopIHtcbiAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIER1cmF0aW9uO1xufVxuXG5mdW5jdGlvbiBhYnNSb3VuZChudW1iZXIpIHtcbiAgaWYgKG51bWJlciA8IDApIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgtMSAqIG51bWJlcikgKiAtMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoYXJyYXkxLCBhcnJheTIsIGRvbnRDb252ZXJ0KSB7XG4gIHZhciBsZW4gPSBNYXRoLm1pbihhcnJheTEubGVuZ3RoLCBhcnJheTIubGVuZ3RoKSxcbiAgICAgIGxlbmd0aERpZmYgPSBNYXRoLmFicyhhcnJheTEubGVuZ3RoIC0gYXJyYXkyLmxlbmd0aCksXG4gICAgICBkaWZmcyA9IDAsXG4gICAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChkb250Q29udmVydCAmJiBhcnJheTFbaV0gIT09IGFycmF5MltpXSB8fCAhZG9udENvbnZlcnQgJiYgdG9JbnQoYXJyYXkxW2ldKSAhPT0gdG9JbnQoYXJyYXkyW2ldKSkge1xuICAgICAgZGlmZnMrKztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGlmZnMgKyBsZW5ndGhEaWZmO1xufVxuXG5mdW5jdGlvbiBvZmZzZXQodG9rZW4sIHNlcGFyYXRvcikge1xuICBhZGRGb3JtYXRUb2tlbih0b2tlbiwgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBvZmZzZXQgPSB0aGlzLnV0Y09mZnNldCgpLFxuICAgICAgICBzaWduID0gJysnO1xuXG4gICAgaWYgKG9mZnNldCA8IDApIHtcbiAgICAgIG9mZnNldCA9IC1vZmZzZXQ7XG4gICAgICBzaWduID0gJy0nO1xuICAgIH1cblxuICAgIHJldHVybiBzaWduICsgemVyb0ZpbGwofn4ob2Zmc2V0IC8gNjApLCAyKSArIHNlcGFyYXRvciArIHplcm9GaWxsKH5+b2Zmc2V0ICUgNjAsIDIpO1xuICB9KTtcbn1cblxub2Zmc2V0KCdaJywgJzonKTtcbm9mZnNldCgnWlonLCAnJyk7XG5hZGRSZWdleFRva2VuKCdaJywgbWF0Y2hTaG9ydE9mZnNldCk7XG5hZGRSZWdleFRva2VuKCdaWicsIG1hdGNoU2hvcnRPZmZzZXQpO1xuYWRkUGFyc2VUb2tlbihbJ1onLCAnWlonXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gIGNvbmZpZy5fdXNlVVRDID0gdHJ1ZTtcbiAgY29uZmlnLl90em0gPSBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoU2hvcnRPZmZzZXQsIGlucHV0KTtcbn0pO1xudmFyIGNodW5rT2Zmc2V0ID0gLyhbXFwrXFwtXXxcXGRcXGQpL2dpO1xuXG5mdW5jdGlvbiBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoZXIsIHN0cmluZykge1xuICB2YXIgbWF0Y2hlcyA9IChzdHJpbmcgfHwgJycpLm1hdGNoKG1hdGNoZXIpLFxuICAgICAgY2h1bmssXG4gICAgICBwYXJ0cyxcbiAgICAgIG1pbnV0ZXM7XG5cbiAgaWYgKG1hdGNoZXMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNodW5rID0gbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdIHx8IFtdO1xuICBwYXJ0cyA9IChjaHVuayArICcnKS5tYXRjaChjaHVua09mZnNldCkgfHwgWyctJywgMCwgMF07XG4gIG1pbnV0ZXMgPSArKHBhcnRzWzFdICogNjApICsgdG9JbnQocGFydHNbMl0pO1xuICByZXR1cm4gbWludXRlcyA9PT0gMCA/IDAgOiBwYXJ0c1swXSA9PT0gJysnID8gbWludXRlcyA6IC1taW51dGVzO1xufVxuXG5mdW5jdGlvbiBjbG9uZVdpdGhPZmZzZXQoaW5wdXQsIG1vZGVsKSB7XG4gIHZhciByZXMsIGRpZmY7XG5cbiAgaWYgKG1vZGVsLl9pc1VUQykge1xuICAgIHJlcyA9IG1vZGVsLmNsb25lKCk7XG4gICAgZGlmZiA9IChpc01vbWVudChpbnB1dCkgfHwgaXNEYXRlKGlucHV0KSA/IGlucHV0LnZhbHVlT2YoKSA6IGNyZWF0ZUxvY2FsKGlucHV0KS52YWx1ZU9mKCkpIC0gcmVzLnZhbHVlT2YoKTtcblxuICAgIHJlcy5fZC5zZXRUaW1lKHJlcy5fZC52YWx1ZU9mKCkgKyBkaWZmKTtcblxuICAgIGhvb2tzLnVwZGF0ZU9mZnNldChyZXMsIGZhbHNlKTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVMb2NhbChpbnB1dCkubG9jYWwoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREYXRlT2Zmc2V0KG0pIHtcbiAgcmV0dXJuIC1NYXRoLnJvdW5kKG0uX2QuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XG59XG5cbmhvb2tzLnVwZGF0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5mdW5jdGlvbiBnZXRTZXRPZmZzZXQoaW5wdXQsIGtlZXBMb2NhbFRpbWUsIGtlZXBNaW51dGVzKSB7XG4gIHZhciBvZmZzZXQgPSB0aGlzLl9vZmZzZXQgfHwgMCxcbiAgICAgIGxvY2FsQWRqdXN0O1xuXG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gIH1cblxuICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpbnB1dCA9IG9mZnNldEZyb21TdHJpbmcobWF0Y2hTaG9ydE9mZnNldCwgaW5wdXQpO1xuXG4gICAgICBpZiAoaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChNYXRoLmFicyhpbnB1dCkgPCAxNiAmJiAha2VlcE1pbnV0ZXMpIHtcbiAgICAgIGlucHV0ID0gaW5wdXQgKiA2MDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2lzVVRDICYmIGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgIGxvY2FsQWRqdXN0ID0gZ2V0RGF0ZU9mZnNldCh0aGlzKTtcbiAgICB9XG5cbiAgICB0aGlzLl9vZmZzZXQgPSBpbnB1dDtcbiAgICB0aGlzLl9pc1VUQyA9IHRydWU7XG5cbiAgICBpZiAobG9jYWxBZGp1c3QgIT0gbnVsbCkge1xuICAgICAgdGhpcy5hZGQobG9jYWxBZGp1c3QsICdtJyk7XG4gICAgfVxuXG4gICAgaWYgKG9mZnNldCAhPT0gaW5wdXQpIHtcbiAgICAgIGlmICgha2VlcExvY2FsVGltZSB8fCB0aGlzLl9jaGFuZ2VJblByb2dyZXNzKSB7XG4gICAgICAgIGFkZFN1YnRyYWN0KHRoaXMsIGNyZWF0ZUR1cmF0aW9uKGlucHV0IC0gb2Zmc2V0LCAnbScpLCAxLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9jaGFuZ2VJblByb2dyZXNzKSB7XG4gICAgICAgIHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICBob29rcy51cGRhdGVPZmZzZXQodGhpcywgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLl9pc1VUQyA/IG9mZnNldCA6IGdldERhdGVPZmZzZXQodGhpcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0U2V0Wm9uZShpbnB1dCwga2VlcExvY2FsVGltZSkge1xuICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICBpbnB1dCA9IC1pbnB1dDtcbiAgICB9XG5cbiAgICB0aGlzLnV0Y09mZnNldChpbnB1dCwga2VlcExvY2FsVGltZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIC10aGlzLnV0Y09mZnNldCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldE9mZnNldFRvVVRDKGtlZXBMb2NhbFRpbWUpIHtcbiAgcmV0dXJuIHRoaXMudXRjT2Zmc2V0KDAsIGtlZXBMb2NhbFRpbWUpO1xufVxuXG5mdW5jdGlvbiBzZXRPZmZzZXRUb0xvY2FsKGtlZXBMb2NhbFRpbWUpIHtcbiAgaWYgKHRoaXMuX2lzVVRDKSB7XG4gICAgdGhpcy51dGNPZmZzZXQoMCwga2VlcExvY2FsVGltZSk7XG4gICAgdGhpcy5faXNVVEMgPSBmYWxzZTtcblxuICAgIGlmIChrZWVwTG9jYWxUaW1lKSB7XG4gICAgICB0aGlzLnN1YnRyYWN0KGdldERhdGVPZmZzZXQodGhpcyksICdtJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHNldE9mZnNldFRvUGFyc2VkT2Zmc2V0KCkge1xuICBpZiAodGhpcy5fdHptICE9IG51bGwpIHtcbiAgICB0aGlzLnV0Y09mZnNldCh0aGlzLl90em0sIGZhbHNlLCB0cnVlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5faSA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgdFpvbmUgPSBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoT2Zmc2V0LCB0aGlzLl9pKTtcblxuICAgIGlmICh0Wm9uZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLnV0Y09mZnNldCh0Wm9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXRjT2Zmc2V0KDAsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBoYXNBbGlnbmVkSG91ck9mZnNldChpbnB1dCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaW5wdXQgPSBpbnB1dCA/IGNyZWF0ZUxvY2FsKGlucHV0KS51dGNPZmZzZXQoKSA6IDA7XG4gIHJldHVybiAodGhpcy51dGNPZmZzZXQoKSAtIGlucHV0KSAlIDYwID09PSAwO1xufVxuXG5mdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZSgpIHtcbiAgcmV0dXJuIHRoaXMudXRjT2Zmc2V0KCkgPiB0aGlzLmNsb25lKCkubW9udGgoMCkudXRjT2Zmc2V0KCkgfHwgdGhpcy51dGNPZmZzZXQoKSA+IHRoaXMuY2xvbmUoKS5tb250aCg1KS51dGNPZmZzZXQoKTtcbn1cblxuZnVuY3Rpb24gaXNEYXlsaWdodFNhdmluZ1RpbWVTaGlmdGVkKCkge1xuICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX2lzRFNUU2hpZnRlZCkpIHtcbiAgICByZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkO1xuICB9XG5cbiAgdmFyIGMgPSB7fSxcbiAgICAgIG90aGVyO1xuICBjb3B5Q29uZmlnKGMsIHRoaXMpO1xuICBjID0gcHJlcGFyZUNvbmZpZyhjKTtcblxuICBpZiAoYy5fYSkge1xuICAgIG90aGVyID0gYy5faXNVVEMgPyBjcmVhdGVVVEMoYy5fYSkgOiBjcmVhdGVMb2NhbChjLl9hKTtcbiAgICB0aGlzLl9pc0RTVFNoaWZ0ZWQgPSB0aGlzLmlzVmFsaWQoKSAmJiBjb21wYXJlQXJyYXlzKGMuX2EsIG90aGVyLnRvQXJyYXkoKSkgPiAwO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2lzRFNUU2hpZnRlZCA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDtcbn1cblxuZnVuY3Rpb24gaXNMb2NhbCgpIHtcbiAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gIXRoaXMuX2lzVVRDIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzVXRjT2Zmc2V0KCkge1xuICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLl9pc1VUQyA6IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1V0YygpIHtcbiAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5faXNVVEMgJiYgdGhpcy5fb2Zmc2V0ID09PSAwIDogZmFsc2U7XG59XG5cbnZhciBhc3BOZXRSZWdleCA9IC9eKC18XFwrKT8oPzooXFxkKilbLiBdKT8oXFxkKyk6KFxcZCspKD86OihcXGQrKShcXC5cXGQqKT8pPyQvLFxuICAgIGlzb1JlZ2V4ID0gL14oLXxcXCspP1AoPzooWy0rXT9bMC05LC5dKilZKT8oPzooWy0rXT9bMC05LC5dKilNKT8oPzooWy0rXT9bMC05LC5dKilXKT8oPzooWy0rXT9bMC05LC5dKilEKT8oPzpUKD86KFstK10/WzAtOSwuXSopSCk/KD86KFstK10/WzAtOSwuXSopTSk/KD86KFstK10/WzAtOSwuXSopUyk/KT8kLztcblxuZnVuY3Rpb24gY3JlYXRlRHVyYXRpb24oaW5wdXQsIGtleSkge1xuICB2YXIgZHVyYXRpb24gPSBpbnB1dCxcbiAgICAgIG1hdGNoID0gbnVsbCxcbiAgICAgIHNpZ24sXG4gICAgICByZXQsXG4gICAgICBkaWZmUmVzO1xuXG4gIGlmIChpc0R1cmF0aW9uKGlucHV0KSkge1xuICAgIGR1cmF0aW9uID0ge1xuICAgICAgbXM6IGlucHV0Ll9taWxsaXNlY29uZHMsXG4gICAgICBkOiBpbnB1dC5fZGF5cyxcbiAgICAgIE06IGlucHV0Ll9tb250aHNcbiAgICB9O1xuICB9IGVsc2UgaWYgKGlzTnVtYmVyKGlucHV0KSB8fCAhaXNOYU4oK2lucHV0KSkge1xuICAgIGR1cmF0aW9uID0ge307XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICBkdXJhdGlvbltrZXldID0gK2lucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkdXJhdGlvbi5taWxsaXNlY29uZHMgPSAraW5wdXQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKG1hdGNoID0gYXNwTmV0UmVnZXguZXhlYyhpbnB1dCkpIHtcbiAgICBzaWduID0gbWF0Y2hbMV0gPT09ICctJyA/IC0xIDogMTtcbiAgICBkdXJhdGlvbiA9IHtcbiAgICAgIHk6IDAsXG4gICAgICBkOiB0b0ludChtYXRjaFtEQVRFXSkgKiBzaWduLFxuICAgICAgaDogdG9JbnQobWF0Y2hbSE9VUl0pICogc2lnbixcbiAgICAgIG06IHRvSW50KG1hdGNoW01JTlVURV0pICogc2lnbixcbiAgICAgIHM6IHRvSW50KG1hdGNoW1NFQ09ORF0pICogc2lnbixcbiAgICAgIG1zOiB0b0ludChhYnNSb3VuZChtYXRjaFtNSUxMSVNFQ09ORF0gKiAxMDAwKSkgKiBzaWduXG4gICAgfTtcbiAgfSBlbHNlIGlmIChtYXRjaCA9IGlzb1JlZ2V4LmV4ZWMoaW5wdXQpKSB7XG4gICAgc2lnbiA9IG1hdGNoWzFdID09PSAnLScgPyAtMSA6IDE7XG4gICAgZHVyYXRpb24gPSB7XG4gICAgICB5OiBwYXJzZUlzbyhtYXRjaFsyXSwgc2lnbiksXG4gICAgICBNOiBwYXJzZUlzbyhtYXRjaFszXSwgc2lnbiksXG4gICAgICB3OiBwYXJzZUlzbyhtYXRjaFs0XSwgc2lnbiksXG4gICAgICBkOiBwYXJzZUlzbyhtYXRjaFs1XSwgc2lnbiksXG4gICAgICBoOiBwYXJzZUlzbyhtYXRjaFs2XSwgc2lnbiksXG4gICAgICBtOiBwYXJzZUlzbyhtYXRjaFs3XSwgc2lnbiksXG4gICAgICBzOiBwYXJzZUlzbyhtYXRjaFs4XSwgc2lnbilcbiAgICB9O1xuICB9IGVsc2UgaWYgKGR1cmF0aW9uID09IG51bGwpIHtcbiAgICBkdXJhdGlvbiA9IHt9O1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkdXJhdGlvbiA9PT0gJ29iamVjdCcgJiYgKCdmcm9tJyBpbiBkdXJhdGlvbiB8fCAndG8nIGluIGR1cmF0aW9uKSkge1xuICAgIGRpZmZSZXMgPSBtb21lbnRzRGlmZmVyZW5jZShjcmVhdGVMb2NhbChkdXJhdGlvbi5mcm9tKSwgY3JlYXRlTG9jYWwoZHVyYXRpb24udG8pKTtcbiAgICBkdXJhdGlvbiA9IHt9O1xuICAgIGR1cmF0aW9uLm1zID0gZGlmZlJlcy5taWxsaXNlY29uZHM7XG4gICAgZHVyYXRpb24uTSA9IGRpZmZSZXMubW9udGhzO1xuICB9XG5cbiAgcmV0ID0gbmV3IER1cmF0aW9uKGR1cmF0aW9uKTtcblxuICBpZiAoaXNEdXJhdGlvbihpbnB1dCkgJiYgaGFzT3duUHJvcChpbnB1dCwgJ19sb2NhbGUnKSkge1xuICAgIHJldC5fbG9jYWxlID0gaW5wdXQuX2xvY2FsZTtcbiAgfVxuXG4gIGlmIChpc0R1cmF0aW9uKGlucHV0KSAmJiBoYXNPd25Qcm9wKGlucHV0LCAnX2lzVmFsaWQnKSkge1xuICAgIHJldC5faXNWYWxpZCA9IGlucHV0Ll9pc1ZhbGlkO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuY3JlYXRlRHVyYXRpb24uZm4gPSBEdXJhdGlvbi5wcm90b3R5cGU7XG5jcmVhdGVEdXJhdGlvbi5pbnZhbGlkID0gY3JlYXRlSW52YWxpZCQxO1xuXG5mdW5jdGlvbiBwYXJzZUlzbyhpbnAsIHNpZ24pIHtcbiAgdmFyIHJlcyA9IGlucCAmJiBwYXJzZUZsb2F0KGlucC5yZXBsYWNlKCcsJywgJy4nKSk7XG4gIHJldHVybiAoaXNOYU4ocmVzKSA/IDAgOiByZXMpICogc2lnbjtcbn1cblxuZnVuY3Rpb24gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLCBvdGhlcikge1xuICB2YXIgcmVzID0ge307XG4gIHJlcy5tb250aHMgPSBvdGhlci5tb250aCgpIC0gYmFzZS5tb250aCgpICsgKG90aGVyLnllYXIoKSAtIGJhc2UueWVhcigpKSAqIDEyO1xuXG4gIGlmIChiYXNlLmNsb25lKCkuYWRkKHJlcy5tb250aHMsICdNJykuaXNBZnRlcihvdGhlcikpIHtcbiAgICAtLXJlcy5tb250aHM7XG4gIH1cblxuICByZXMubWlsbGlzZWNvbmRzID0gK290aGVyIC0gK2Jhc2UuY2xvbmUoKS5hZGQocmVzLm1vbnRocywgJ00nKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gbW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpIHtcbiAgdmFyIHJlcztcblxuICBpZiAoIShiYXNlLmlzVmFsaWQoKSAmJiBvdGhlci5pc1ZhbGlkKCkpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1pbGxpc2Vjb25kczogMCxcbiAgICAgIG1vbnRoczogMFxuICAgIH07XG4gIH1cblxuICBvdGhlciA9IGNsb25lV2l0aE9mZnNldChvdGhlciwgYmFzZSk7XG5cbiAgaWYgKGJhc2UuaXNCZWZvcmUob3RoZXIpKSB7XG4gICAgcmVzID0gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLCBvdGhlcik7XG4gIH0gZWxzZSB7XG4gICAgcmVzID0gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShvdGhlciwgYmFzZSk7XG4gICAgcmVzLm1pbGxpc2Vjb25kcyA9IC1yZXMubWlsbGlzZWNvbmRzO1xuICAgIHJlcy5tb250aHMgPSAtcmVzLm1vbnRocztcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFkZGVyKGRpcmVjdGlvbiwgbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgcGVyaW9kKSB7XG4gICAgdmFyIGR1ciwgdG1wO1xuXG4gICAgaWYgKHBlcmlvZCAhPT0gbnVsbCAmJiAhaXNOYU4oK3BlcmlvZCkpIHtcbiAgICAgIGRlcHJlY2F0ZVNpbXBsZShuYW1lLCAnbW9tZW50KCkuJyArIG5hbWUgKyAnKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLicgKyBuYW1lICsgJyhudW1iZXIsIHBlcmlvZCkuICcgKyAnU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvYWRkLWludmVydGVkLXBhcmFtLyBmb3IgbW9yZSBpbmZvLicpO1xuICAgICAgdG1wID0gdmFsO1xuICAgICAgdmFsID0gcGVyaW9kO1xuICAgICAgcGVyaW9kID0gdG1wO1xuICAgIH1cblxuICAgIGR1ciA9IGNyZWF0ZUR1cmF0aW9uKHZhbCwgcGVyaW9kKTtcbiAgICBhZGRTdWJ0cmFjdCh0aGlzLCBkdXIsIGRpcmVjdGlvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGFkZFN1YnRyYWN0KG1vbSwgZHVyYXRpb24sIGlzQWRkaW5nLCB1cGRhdGVPZmZzZXQpIHtcbiAgdmFyIG1pbGxpc2Vjb25kcyA9IGR1cmF0aW9uLl9taWxsaXNlY29uZHMsXG4gICAgICBkYXlzID0gYWJzUm91bmQoZHVyYXRpb24uX2RheXMpLFxuICAgICAgbW9udGhzID0gYWJzUm91bmQoZHVyYXRpb24uX21vbnRocyk7XG5cbiAgaWYgKCFtb20uaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdXBkYXRlT2Zmc2V0ID0gdXBkYXRlT2Zmc2V0ID09IG51bGwgPyB0cnVlIDogdXBkYXRlT2Zmc2V0O1xuXG4gIGlmIChtb250aHMpIHtcbiAgICBzZXRNb250aChtb20sIGdldChtb20sICdNb250aCcpICsgbW9udGhzICogaXNBZGRpbmcpO1xuICB9XG5cbiAgaWYgKGRheXMpIHtcbiAgICBzZXQkMShtb20sICdEYXRlJywgZ2V0KG1vbSwgJ0RhdGUnKSArIGRheXMgKiBpc0FkZGluZyk7XG4gIH1cblxuICBpZiAobWlsbGlzZWNvbmRzKSB7XG4gICAgbW9tLl9kLnNldFRpbWUobW9tLl9kLnZhbHVlT2YoKSArIG1pbGxpc2Vjb25kcyAqIGlzQWRkaW5nKTtcbiAgfVxuXG4gIGlmICh1cGRhdGVPZmZzZXQpIHtcbiAgICBob29rcy51cGRhdGVPZmZzZXQobW9tLCBkYXlzIHx8IG1vbnRocyk7XG4gIH1cbn1cblxudmFyIGFkZCA9IGNyZWF0ZUFkZGVyKDEsICdhZGQnKSxcbiAgICBzdWJ0cmFjdCA9IGNyZWF0ZUFkZGVyKC0xLCAnc3VidHJhY3QnKTtcblxuZnVuY3Rpb24gaXNTdHJpbmcoaW5wdXQpIHtcbiAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgaW5wdXQgaW5zdGFuY2VvZiBTdHJpbmc7XG59XG5cbmZ1bmN0aW9uIGlzTW9tZW50SW5wdXQoaW5wdXQpIHtcbiAgcmV0dXJuIGlzTW9tZW50KGlucHV0KSB8fCBpc0RhdGUoaW5wdXQpIHx8IGlzU3RyaW5nKGlucHV0KSB8fCBpc051bWJlcihpbnB1dCkgfHwgaXNOdW1iZXJPclN0cmluZ0FycmF5KGlucHV0KSB8fCBpc01vbWVudElucHV0T2JqZWN0KGlucHV0KSB8fCBpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc01vbWVudElucHV0T2JqZWN0KGlucHV0KSB7XG4gIHZhciBvYmplY3RUZXN0ID0gaXNPYmplY3QoaW5wdXQpICYmICFpc09iamVjdEVtcHR5KGlucHV0KSxcbiAgICAgIHByb3BlcnR5VGVzdCA9IGZhbHNlLFxuICAgICAgcHJvcGVydGllcyA9IFsneWVhcnMnLCAneWVhcicsICd5JywgJ21vbnRocycsICdtb250aCcsICdNJywgJ2RheXMnLCAnZGF5JywgJ2QnLCAnZGF0ZXMnLCAnZGF0ZScsICdEJywgJ2hvdXJzJywgJ2hvdXInLCAnaCcsICdtaW51dGVzJywgJ21pbnV0ZScsICdtJywgJ3NlY29uZHMnLCAnc2Vjb25kJywgJ3MnLCAnbWlsbGlzZWNvbmRzJywgJ21pbGxpc2Vjb25kJywgJ21zJ10sXG4gICAgICBpLFxuICAgICAgcHJvcGVydHk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbaV07XG4gICAgcHJvcGVydHlUZXN0ID0gcHJvcGVydHlUZXN0IHx8IGhhc093blByb3AoaW5wdXQsIHByb3BlcnR5KTtcbiAgfVxuXG4gIHJldHVybiBvYmplY3RUZXN0ICYmIHByb3BlcnR5VGVzdDtcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXJPclN0cmluZ0FycmF5KGlucHV0KSB7XG4gIHZhciBhcnJheVRlc3QgPSBpc0FycmF5KGlucHV0KSxcbiAgICAgIGRhdGFUeXBlVGVzdCA9IGZhbHNlO1xuXG4gIGlmIChhcnJheVRlc3QpIHtcbiAgICBkYXRhVHlwZVRlc3QgPSBpbnB1dC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiAhaXNOdW1iZXIoaXRlbSkgJiYgaXNTdHJpbmcoaW5wdXQpO1xuICAgIH0pLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIHJldHVybiBhcnJheVRlc3QgJiYgZGF0YVR5cGVUZXN0O1xufVxuXG5mdW5jdGlvbiBpc0NhbGVuZGFyU3BlYyhpbnB1dCkge1xuICB2YXIgb2JqZWN0VGVzdCA9IGlzT2JqZWN0KGlucHV0KSAmJiAhaXNPYmplY3RFbXB0eShpbnB1dCksXG4gICAgICBwcm9wZXJ0eVRlc3QgPSBmYWxzZSxcbiAgICAgIHByb3BlcnRpZXMgPSBbJ3NhbWVEYXknLCAnbmV4dERheScsICdsYXN0RGF5JywgJ25leHRXZWVrJywgJ2xhc3RXZWVrJywgJ3NhbWVFbHNlJ10sXG4gICAgICBpLFxuICAgICAgcHJvcGVydHk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbaV07XG4gICAgcHJvcGVydHlUZXN0ID0gcHJvcGVydHlUZXN0IHx8IGhhc093blByb3AoaW5wdXQsIHByb3BlcnR5KTtcbiAgfVxuXG4gIHJldHVybiBvYmplY3RUZXN0ICYmIHByb3BlcnR5VGVzdDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FsZW5kYXJGb3JtYXQobXlNb21lbnQsIG5vdykge1xuICB2YXIgZGlmZiA9IG15TW9tZW50LmRpZmYobm93LCAnZGF5cycsIHRydWUpO1xuICByZXR1cm4gZGlmZiA8IC02ID8gJ3NhbWVFbHNlJyA6IGRpZmYgPCAtMSA/ICdsYXN0V2VlaycgOiBkaWZmIDwgMCA/ICdsYXN0RGF5JyA6IGRpZmYgPCAxID8gJ3NhbWVEYXknIDogZGlmZiA8IDIgPyAnbmV4dERheScgOiBkaWZmIDwgNyA/ICduZXh0V2VlaycgOiAnc2FtZUVsc2UnO1xufVxuXG5mdW5jdGlvbiBjYWxlbmRhciQxKHRpbWUsIGZvcm1hdHMpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgdGltZSA9IHVuZGVmaW5lZDtcbiAgICAgIGZvcm1hdHMgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChpc01vbWVudElucHV0KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHRpbWUgPSBhcmd1bWVudHNbMF07XG4gICAgICBmb3JtYXRzID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAoaXNDYWxlbmRhclNwZWMoYXJndW1lbnRzWzBdKSkge1xuICAgICAgZm9ybWF0cyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIHRpbWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIG5vdyA9IHRpbWUgfHwgY3JlYXRlTG9jYWwoKSxcbiAgICAgIHNvZCA9IGNsb25lV2l0aE9mZnNldChub3csIHRoaXMpLnN0YXJ0T2YoJ2RheScpLFxuICAgICAgZm9ybWF0ID0gaG9va3MuY2FsZW5kYXJGb3JtYXQodGhpcywgc29kKSB8fCAnc2FtZUVsc2UnLFxuICAgICAgb3V0cHV0ID0gZm9ybWF0cyAmJiAoaXNGdW5jdGlvbihmb3JtYXRzW2Zvcm1hdF0pID8gZm9ybWF0c1tmb3JtYXRdLmNhbGwodGhpcywgbm93KSA6IGZvcm1hdHNbZm9ybWF0XSk7XG4gIHJldHVybiB0aGlzLmZvcm1hdChvdXRwdXQgfHwgdGhpcy5sb2NhbGVEYXRhKCkuY2FsZW5kYXIoZm9ybWF0LCB0aGlzLCBjcmVhdGVMb2NhbChub3cpKSk7XG59XG5cbmZ1bmN0aW9uIGNsb25lKCkge1xuICByZXR1cm4gbmV3IE1vbWVudCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gaXNBZnRlcihpbnB1dCwgdW5pdHMpIHtcbiAgdmFyIGxvY2FsSW5wdXQgPSBpc01vbWVudChpbnB1dCkgPyBpbnB1dCA6IGNyZWF0ZUxvY2FsKGlucHV0KTtcblxuICBpZiAoISh0aGlzLmlzVmFsaWQoKSAmJiBsb2NhbElucHV0LmlzVmFsaWQoKSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKSB8fCAnbWlsbGlzZWNvbmQnO1xuXG4gIGlmICh1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgIHJldHVybiB0aGlzLnZhbHVlT2YoKSA+IGxvY2FsSW5wdXQudmFsdWVPZigpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2NhbElucHV0LnZhbHVlT2YoKSA8IHRoaXMuY2xvbmUoKS5zdGFydE9mKHVuaXRzKS52YWx1ZU9mKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNCZWZvcmUoaW5wdXQsIHVuaXRzKSB7XG4gIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBjcmVhdGVMb2NhbChpbnB1dCk7XG5cbiAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cykgfHwgJ21pbGxpc2Vjb25kJztcblxuICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZU9mKCkgPCBsb2NhbElucHV0LnZhbHVlT2YoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmVuZE9mKHVuaXRzKS52YWx1ZU9mKCkgPCBsb2NhbElucHV0LnZhbHVlT2YoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0JldHdlZW4oZnJvbSwgdG8sIHVuaXRzLCBpbmNsdXNpdml0eSkge1xuICB2YXIgbG9jYWxGcm9tID0gaXNNb21lbnQoZnJvbSkgPyBmcm9tIDogY3JlYXRlTG9jYWwoZnJvbSksXG4gICAgICBsb2NhbFRvID0gaXNNb21lbnQodG8pID8gdG8gOiBjcmVhdGVMb2NhbCh0byk7XG5cbiAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxGcm9tLmlzVmFsaWQoKSAmJiBsb2NhbFRvLmlzVmFsaWQoKSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpbmNsdXNpdml0eSA9IGluY2x1c2l2aXR5IHx8ICcoKSc7XG4gIHJldHVybiAoaW5jbHVzaXZpdHlbMF0gPT09ICcoJyA/IHRoaXMuaXNBZnRlcihsb2NhbEZyb20sIHVuaXRzKSA6ICF0aGlzLmlzQmVmb3JlKGxvY2FsRnJvbSwgdW5pdHMpKSAmJiAoaW5jbHVzaXZpdHlbMV0gPT09ICcpJyA/IHRoaXMuaXNCZWZvcmUobG9jYWxUbywgdW5pdHMpIDogIXRoaXMuaXNBZnRlcihsb2NhbFRvLCB1bml0cykpO1xufVxuXG5mdW5jdGlvbiBpc1NhbWUoaW5wdXQsIHVuaXRzKSB7XG4gIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBjcmVhdGVMb2NhbChpbnB1dCksXG4gICAgICBpbnB1dE1zO1xuXG4gIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsSW5wdXQuaXNWYWxpZCgpKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpIHx8ICdtaWxsaXNlY29uZCc7XG5cbiAgaWYgKHVuaXRzID09PSAnbWlsbGlzZWNvbmQnKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVPZigpID09PSBsb2NhbElucHV0LnZhbHVlT2YoKTtcbiAgfSBlbHNlIHtcbiAgICBpbnB1dE1zID0gbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5zdGFydE9mKHVuaXRzKS52YWx1ZU9mKCkgPD0gaW5wdXRNcyAmJiBpbnB1dE1zIDw9IHRoaXMuY2xvbmUoKS5lbmRPZih1bml0cykudmFsdWVPZigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2FtZU9yQWZ0ZXIoaW5wdXQsIHVuaXRzKSB7XG4gIHJldHVybiB0aGlzLmlzU2FtZShpbnB1dCwgdW5pdHMpIHx8IHRoaXMuaXNBZnRlcihpbnB1dCwgdW5pdHMpO1xufVxuXG5mdW5jdGlvbiBpc1NhbWVPckJlZm9yZShpbnB1dCwgdW5pdHMpIHtcbiAgcmV0dXJuIHRoaXMuaXNTYW1lKGlucHV0LCB1bml0cykgfHwgdGhpcy5pc0JlZm9yZShpbnB1dCwgdW5pdHMpO1xufVxuXG5mdW5jdGlvbiBkaWZmKGlucHV0LCB1bml0cywgYXNGbG9hdCkge1xuICB2YXIgdGhhdCwgem9uZURlbHRhLCBvdXRwdXQ7XG5cbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB0aGF0ID0gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LCB0aGlzKTtcblxuICBpZiAoIXRoYXQuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHpvbmVEZWx0YSA9ICh0aGF0LnV0Y09mZnNldCgpIC0gdGhpcy51dGNPZmZzZXQoKSkgKiA2ZTQ7XG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gIHN3aXRjaCAodW5pdHMpIHtcbiAgICBjYXNlICd5ZWFyJzpcbiAgICAgIG91dHB1dCA9IG1vbnRoRGlmZih0aGlzLCB0aGF0KSAvIDEyO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdtb250aCc6XG4gICAgICBvdXRwdXQgPSBtb250aERpZmYodGhpcywgdGhhdCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3F1YXJ0ZXInOlxuICAgICAgb3V0cHV0ID0gbW9udGhEaWZmKHRoaXMsIHRoYXQpIC8gMztcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgIG91dHB1dCA9ICh0aGlzIC0gdGhhdCkgLyAxZTM7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgICBvdXRwdXQgPSAodGhpcyAtIHRoYXQpIC8gNmU0O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdob3VyJzpcbiAgICAgIG91dHB1dCA9ICh0aGlzIC0gdGhhdCkgLyAzNmU1O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdkYXknOlxuICAgICAgb3V0cHV0ID0gKHRoaXMgLSB0aGF0IC0gem9uZURlbHRhKSAvIDg2NGU1O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICd3ZWVrJzpcbiAgICAgIG91dHB1dCA9ICh0aGlzIC0gdGhhdCAtIHpvbmVEZWx0YSkgLyA2MDQ4ZTU7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBvdXRwdXQgPSB0aGlzIC0gdGhhdDtcbiAgfVxuXG4gIHJldHVybiBhc0Zsb2F0ID8gb3V0cHV0IDogYWJzRmxvb3Iob3V0cHV0KTtcbn1cblxuZnVuY3Rpb24gbW9udGhEaWZmKGEsIGIpIHtcbiAgaWYgKGEuZGF0ZSgpIDwgYi5kYXRlKCkpIHtcbiAgICByZXR1cm4gLW1vbnRoRGlmZihiLCBhKTtcbiAgfVxuXG4gIHZhciB3aG9sZU1vbnRoRGlmZiA9IChiLnllYXIoKSAtIGEueWVhcigpKSAqIDEyICsgKGIubW9udGgoKSAtIGEubW9udGgoKSksXG4gICAgICBhbmNob3IgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmLCAnbW9udGhzJyksXG4gICAgICBhbmNob3IyLFxuICAgICAgYWRqdXN0O1xuXG4gIGlmIChiIC0gYW5jaG9yIDwgMCkge1xuICAgIGFuY2hvcjIgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmIC0gMSwgJ21vbnRocycpO1xuICAgIGFkanVzdCA9IChiIC0gYW5jaG9yKSAvIChhbmNob3IgLSBhbmNob3IyKTtcbiAgfSBlbHNlIHtcbiAgICBhbmNob3IyID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiArIDEsICdtb250aHMnKTtcbiAgICBhZGp1c3QgPSAoYiAtIGFuY2hvcikgLyAoYW5jaG9yMiAtIGFuY2hvcik7XG4gIH1cblxuICByZXR1cm4gLSh3aG9sZU1vbnRoRGlmZiArIGFkanVzdCkgfHwgMDtcbn1cblxuaG9va3MuZGVmYXVsdEZvcm1hdCA9ICdZWVlZLU1NLUREVEhIOm1tOnNzWic7XG5ob29rcy5kZWZhdWx0Rm9ybWF0VXRjID0gJ1lZWVktTU0tRERUSEg6bW06c3NbWl0nO1xuXG5mdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuIHRoaXMuY2xvbmUoKS5sb2NhbGUoJ2VuJykuZm9ybWF0KCdkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgW0dNVF1aWicpO1xufVxuXG5mdW5jdGlvbiB0b0lTT1N0cmluZyhrZWVwT2Zmc2V0KSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciB1dGMgPSBrZWVwT2Zmc2V0ICE9PSB0cnVlLFxuICAgICAgbSA9IHV0YyA/IHRoaXMuY2xvbmUoKS51dGMoKSA6IHRoaXM7XG5cbiAgaWYgKG0ueWVhcigpIDwgMCB8fCBtLnllYXIoKSA+IDk5OTkpIHtcbiAgICByZXR1cm4gZm9ybWF0TW9tZW50KG0sIHV0YyA/ICdZWVlZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl0nIDogJ1lZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1onKTtcbiAgfVxuXG4gIGlmIChpc0Z1bmN0aW9uKERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKSkge1xuICAgIGlmICh1dGMpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSArIHRoaXMudXRjT2Zmc2V0KCkgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgnWicsIGZvcm1hdE1vbWVudChtLCAnWicpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZm9ybWF0TW9tZW50KG0sIHV0YyA/ICdZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdJyA6ICdZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTWicpO1xufVxuXG5mdW5jdGlvbiBpbnNwZWN0KCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuICdtb21lbnQuaW52YWxpZCgvKiAnICsgdGhpcy5faSArICcgKi8pJztcbiAgfVxuXG4gIHZhciBmdW5jID0gJ21vbWVudCcsXG4gICAgICB6b25lID0gJycsXG4gICAgICBwcmVmaXgsXG4gICAgICB5ZWFyLFxuICAgICAgZGF0ZXRpbWUsXG4gICAgICBzdWZmaXg7XG5cbiAgaWYgKCF0aGlzLmlzTG9jYWwoKSkge1xuICAgIGZ1bmMgPSB0aGlzLnV0Y09mZnNldCgpID09PSAwID8gJ21vbWVudC51dGMnIDogJ21vbWVudC5wYXJzZVpvbmUnO1xuICAgIHpvbmUgPSAnWic7XG4gIH1cblxuICBwcmVmaXggPSAnWycgKyBmdW5jICsgJyhcIl0nO1xuICB5ZWFyID0gMCA8PSB0aGlzLnllYXIoKSAmJiB0aGlzLnllYXIoKSA8PSA5OTk5ID8gJ1lZWVknIDogJ1lZWVlZWSc7XG4gIGRhdGV0aW1lID0gJy1NTS1ERFtUXUhIOm1tOnNzLlNTUyc7XG4gIHN1ZmZpeCA9IHpvbmUgKyAnW1wiKV0nO1xuICByZXR1cm4gdGhpcy5mb3JtYXQocHJlZml4ICsgeWVhciArIGRhdGV0aW1lICsgc3VmZml4KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0KGlucHV0U3RyaW5nKSB7XG4gIGlmICghaW5wdXRTdHJpbmcpIHtcbiAgICBpbnB1dFN0cmluZyA9IHRoaXMuaXNVdGMoKSA/IGhvb2tzLmRlZmF1bHRGb3JtYXRVdGMgOiBob29rcy5kZWZhdWx0Rm9ybWF0O1xuICB9XG5cbiAgdmFyIG91dHB1dCA9IGZvcm1hdE1vbWVudCh0aGlzLCBpbnB1dFN0cmluZyk7XG4gIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KG91dHB1dCk7XG59XG5cbmZ1bmN0aW9uIGZyb20odGltZSwgd2l0aG91dFN1ZmZpeCkge1xuICBpZiAodGhpcy5pc1ZhbGlkKCkgJiYgKGlzTW9tZW50KHRpbWUpICYmIHRpbWUuaXNWYWxpZCgpIHx8IGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSkpIHtcbiAgICByZXR1cm4gY3JlYXRlRHVyYXRpb24oe1xuICAgICAgdG86IHRoaXMsXG4gICAgICBmcm9tOiB0aW1lXG4gICAgfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmcm9tTm93KHdpdGhvdXRTdWZmaXgpIHtcbiAgcmV0dXJuIHRoaXMuZnJvbShjcmVhdGVMb2NhbCgpLCB3aXRob3V0U3VmZml4KTtcbn1cblxuZnVuY3Rpb24gdG8odGltZSwgd2l0aG91dFN1ZmZpeCkge1xuICBpZiAodGhpcy5pc1ZhbGlkKCkgJiYgKGlzTW9tZW50KHRpbWUpICYmIHRpbWUuaXNWYWxpZCgpIHx8IGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSkpIHtcbiAgICByZXR1cm4gY3JlYXRlRHVyYXRpb24oe1xuICAgICAgZnJvbTogdGhpcyxcbiAgICAgIHRvOiB0aW1lXG4gICAgfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b05vdyh3aXRob3V0U3VmZml4KSB7XG4gIHJldHVybiB0aGlzLnRvKGNyZWF0ZUxvY2FsKCksIHdpdGhvdXRTdWZmaXgpO1xufVxuXG5mdW5jdGlvbiBsb2NhbGUoa2V5KSB7XG4gIHZhciBuZXdMb2NhbGVEYXRhO1xuXG4gIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLl9sb2NhbGUuX2FiYnI7XG4gIH0gZWxzZSB7XG4gICAgbmV3TG9jYWxlRGF0YSA9IGdldExvY2FsZShrZXkpO1xuXG4gICAgaWYgKG5ld0xvY2FsZURhdGEgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fbG9jYWxlID0gbmV3TG9jYWxlRGF0YTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG52YXIgbGFuZyA9IGRlcHJlY2F0ZSgnbW9tZW50KCkubGFuZygpIGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHVzZSBtb21lbnQoKS5sb2NhbGVEYXRhKCkgdG8gZ2V0IHRoZSBsYW5ndWFnZSBjb25maWd1cmF0aW9uLiBVc2UgbW9tZW50KCkubG9jYWxlKCkgdG8gY2hhbmdlIGxhbmd1YWdlcy4nLCBmdW5jdGlvbiAoa2V5KSB7XG4gIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGUoa2V5KTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGxvY2FsZURhdGEoKSB7XG4gIHJldHVybiB0aGlzLl9sb2NhbGU7XG59XG5cbnZhciBNU19QRVJfU0VDT05EID0gMTAwMCxcbiAgICBNU19QRVJfTUlOVVRFID0gNjAgKiBNU19QRVJfU0VDT05ELFxuICAgIE1TX1BFUl9IT1VSID0gNjAgKiBNU19QRVJfTUlOVVRFLFxuICAgIE1TX1BFUl80MDBfWUVBUlMgPSAoMzY1ICogNDAwICsgOTcpICogMjQgKiBNU19QRVJfSE9VUjtcblxuZnVuY3Rpb24gbW9kJDEoZGl2aWRlbmQsIGRpdmlzb3IpIHtcbiAgcmV0dXJuIChkaXZpZGVuZCAlIGRpdmlzb3IgKyBkaXZpc29yKSAlIGRpdmlzb3I7XG59XG5cbmZ1bmN0aW9uIGxvY2FsU3RhcnRPZkRhdGUoeSwgbSwgZCkge1xuICBpZiAoeSA8IDEwMCAmJiB5ID49IDApIHtcbiAgICByZXR1cm4gbmV3IERhdGUoeSArIDQwMCwgbSwgZCkgLSBNU19QRVJfNDAwX1lFQVJTO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgRGF0ZSh5LCBtLCBkKS52YWx1ZU9mKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXRjU3RhcnRPZkRhdGUoeSwgbSwgZCkge1xuICBpZiAoeSA8IDEwMCAmJiB5ID49IDApIHtcbiAgICByZXR1cm4gRGF0ZS5VVEMoeSArIDQwMCwgbSwgZCkgLSBNU19QRVJfNDAwX1lFQVJTO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBEYXRlLlVUQyh5LCBtLCBkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGFydE9mKHVuaXRzKSB7XG4gIHZhciB0aW1lLCBzdGFydE9mRGF0ZTtcbiAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG5cbiAgaWYgKHVuaXRzID09PSB1bmRlZmluZWQgfHwgdW5pdHMgPT09ICdtaWxsaXNlY29uZCcgfHwgIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzdGFydE9mRGF0ZSA9IHRoaXMuX2lzVVRDID8gdXRjU3RhcnRPZkRhdGUgOiBsb2NhbFN0YXJ0T2ZEYXRlO1xuXG4gIHN3aXRjaCAodW5pdHMpIHtcbiAgICBjYXNlICd5ZWFyJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgMCwgMSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3F1YXJ0ZXInOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCkgLSB0aGlzLm1vbnRoKCkgJSAzLCAxKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnbW9udGgnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIDEpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICd3ZWVrJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpLCB0aGlzLmRhdGUoKSAtIHRoaXMud2Vla2RheSgpKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaXNvV2Vlayc6XG4gICAgICB0aW1lID0gc3RhcnRPZkRhdGUodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSwgdGhpcy5kYXRlKCkgLSAodGhpcy5pc29XZWVrZGF5KCkgLSAxKSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZGF0ZSc6XG4gICAgICB0aW1lID0gc3RhcnRPZkRhdGUodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSwgdGhpcy5kYXRlKCkpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdob3VyJzpcbiAgICAgIHRpbWUgPSB0aGlzLl9kLnZhbHVlT2YoKTtcbiAgICAgIHRpbWUgLT0gbW9kJDEodGltZSArICh0aGlzLl9pc1VUQyA/IDAgOiB0aGlzLnV0Y09mZnNldCgpICogTVNfUEVSX01JTlVURSksIE1TX1BFUl9IT1VSKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnbWludXRlJzpcbiAgICAgIHRpbWUgPSB0aGlzLl9kLnZhbHVlT2YoKTtcbiAgICAgIHRpbWUgLT0gbW9kJDEodGltZSwgTVNfUEVSX01JTlVURSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgICB0aW1lID0gdGhpcy5fZC52YWx1ZU9mKCk7XG4gICAgICB0aW1lIC09IG1vZCQxKHRpbWUsIE1TX1BFUl9TRUNPTkQpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICB0aGlzLl9kLnNldFRpbWUodGltZSk7XG5cbiAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gZW5kT2YodW5pdHMpIHtcbiAgdmFyIHRpbWUsIHN0YXJ0T2ZEYXRlO1xuICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICBpZiAodW5pdHMgPT09IHVuZGVmaW5lZCB8fCB1bml0cyA9PT0gJ21pbGxpc2Vjb25kJyB8fCAhdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHN0YXJ0T2ZEYXRlID0gdGhpcy5faXNVVEMgPyB1dGNTdGFydE9mRGF0ZSA6IGxvY2FsU3RhcnRPZkRhdGU7XG5cbiAgc3dpdGNoICh1bml0cykge1xuICAgIGNhc2UgJ3llYXInOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpICsgMSwgMCwgMSkgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgIHRpbWUgPSBzdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpIC0gdGhpcy5tb250aCgpICUgMyArIDMsIDEpIC0gMTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnbW9udGgnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCkgKyAxLCAxKSAtIDE7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIHRoaXMuZGF0ZSgpIC0gdGhpcy53ZWVrZGF5KCkgKyA3KSAtIDE7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2lzb1dlZWsnOlxuICAgICAgdGltZSA9IHN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCksIHRoaXMuZGF0ZSgpIC0gKHRoaXMuaXNvV2Vla2RheSgpIC0gMSkgKyA3KSAtIDE7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZGF0ZSc6XG4gICAgICB0aW1lID0gc3RhcnRPZkRhdGUodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSwgdGhpcy5kYXRlKCkgKyAxKSAtIDE7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2hvdXInOlxuICAgICAgdGltZSA9IHRoaXMuX2QudmFsdWVPZigpO1xuICAgICAgdGltZSArPSBNU19QRVJfSE9VUiAtIG1vZCQxKHRpbWUgKyAodGhpcy5faXNVVEMgPyAwIDogdGhpcy51dGNPZmZzZXQoKSAqIE1TX1BFUl9NSU5VVEUpLCBNU19QRVJfSE9VUikgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdtaW51dGUnOlxuICAgICAgdGltZSA9IHRoaXMuX2QudmFsdWVPZigpO1xuICAgICAgdGltZSArPSBNU19QRVJfTUlOVVRFIC0gbW9kJDEodGltZSwgTVNfUEVSX01JTlVURSkgLSAxO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdzZWNvbmQnOlxuICAgICAgdGltZSA9IHRoaXMuX2QudmFsdWVPZigpO1xuICAgICAgdGltZSArPSBNU19QRVJfU0VDT05EIC0gbW9kJDEodGltZSwgTVNfUEVSX1NFQ09ORCkgLSAxO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICB0aGlzLl9kLnNldFRpbWUodGltZSk7XG5cbiAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gdmFsdWVPZigpIHtcbiAgcmV0dXJuIHRoaXMuX2QudmFsdWVPZigpIC0gKHRoaXMuX29mZnNldCB8fCAwKSAqIDYwMDAwO1xufVxuXG5mdW5jdGlvbiB1bml4KCkge1xuICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKSAvIDEwMDApO1xufVxuXG5mdW5jdGlvbiB0b0RhdGUoKSB7XG4gIHJldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSk7XG59XG5cbmZ1bmN0aW9uIHRvQXJyYXkoKSB7XG4gIHZhciBtID0gdGhpcztcbiAgcmV0dXJuIFttLnllYXIoKSwgbS5tb250aCgpLCBtLmRhdGUoKSwgbS5ob3VyKCksIG0ubWludXRlKCksIG0uc2Vjb25kKCksIG0ubWlsbGlzZWNvbmQoKV07XG59XG5cbmZ1bmN0aW9uIHRvT2JqZWN0KCkge1xuICB2YXIgbSA9IHRoaXM7XG4gIHJldHVybiB7XG4gICAgeWVhcnM6IG0ueWVhcigpLFxuICAgIG1vbnRoczogbS5tb250aCgpLFxuICAgIGRhdGU6IG0uZGF0ZSgpLFxuICAgIGhvdXJzOiBtLmhvdXJzKCksXG4gICAgbWludXRlczogbS5taW51dGVzKCksXG4gICAgc2Vjb25kczogbS5zZWNvbmRzKCksXG4gICAgbWlsbGlzZWNvbmRzOiBtLm1pbGxpc2Vjb25kcygpXG4gIH07XG59XG5cbmZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy50b0lTT1N0cmluZygpIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZCQyKCkge1xuICByZXR1cm4gaXNWYWxpZCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gcGFyc2luZ0ZsYWdzKCkge1xuICByZXR1cm4gZXh0ZW5kKHt9LCBnZXRQYXJzaW5nRmxhZ3ModGhpcykpO1xufVxuXG5mdW5jdGlvbiBpbnZhbGlkQXQoKSB7XG4gIHJldHVybiBnZXRQYXJzaW5nRmxhZ3ModGhpcykub3ZlcmZsb3c7XG59XG5cbmZ1bmN0aW9uIGNyZWF0aW9uRGF0YSgpIHtcbiAgcmV0dXJuIHtcbiAgICBpbnB1dDogdGhpcy5faSxcbiAgICBmb3JtYXQ6IHRoaXMuX2YsXG4gICAgbG9jYWxlOiB0aGlzLl9sb2NhbGUsXG4gICAgaXNVVEM6IHRoaXMuX2lzVVRDLFxuICAgIHN0cmljdDogdGhpcy5fc3RyaWN0XG4gIH07XG59XG5cbmFkZEZvcm1hdFRva2VuKCdOJywgMCwgMCwgJ2VyYUFiYnInKTtcbmFkZEZvcm1hdFRva2VuKCdOTicsIDAsIDAsICdlcmFBYmJyJyk7XG5hZGRGb3JtYXRUb2tlbignTk5OJywgMCwgMCwgJ2VyYUFiYnInKTtcbmFkZEZvcm1hdFRva2VuKCdOTk5OJywgMCwgMCwgJ2VyYU5hbWUnKTtcbmFkZEZvcm1hdFRva2VuKCdOTk5OTicsIDAsIDAsICdlcmFOYXJyb3cnKTtcbmFkZEZvcm1hdFRva2VuKCd5JywgWyd5JywgMV0sICd5bycsICdlcmFZZWFyJyk7XG5hZGRGb3JtYXRUb2tlbigneScsIFsneXknLCAyXSwgMCwgJ2VyYVllYXInKTtcbmFkZEZvcm1hdFRva2VuKCd5JywgWyd5eXknLCAzXSwgMCwgJ2VyYVllYXInKTtcbmFkZEZvcm1hdFRva2VuKCd5JywgWyd5eXl5JywgNF0sIDAsICdlcmFZZWFyJyk7XG5hZGRSZWdleFRva2VuKCdOJywgbWF0Y2hFcmFBYmJyKTtcbmFkZFJlZ2V4VG9rZW4oJ05OJywgbWF0Y2hFcmFBYmJyKTtcbmFkZFJlZ2V4VG9rZW4oJ05OTicsIG1hdGNoRXJhQWJicik7XG5hZGRSZWdleFRva2VuKCdOTk5OJywgbWF0Y2hFcmFOYW1lKTtcbmFkZFJlZ2V4VG9rZW4oJ05OTk5OJywgbWF0Y2hFcmFOYXJyb3cpO1xuYWRkUGFyc2VUb2tlbihbJ04nLCAnTk4nLCAnTk5OJywgJ05OTk4nLCAnTk5OTk4nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICB2YXIgZXJhID0gY29uZmlnLl9sb2NhbGUuZXJhc1BhcnNlKGlucHV0LCB0b2tlbiwgY29uZmlnLl9zdHJpY3QpO1xuXG4gIGlmIChlcmEpIHtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lcmEgPSBlcmE7XG4gIH0gZWxzZSB7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZEVyYSA9IGlucHV0O1xuICB9XG59KTtcbmFkZFJlZ2V4VG9rZW4oJ3knLCBtYXRjaFVuc2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ3l5JywgbWF0Y2hVbnNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCd5eXknLCBtYXRjaFVuc2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ3l5eXknLCBtYXRjaFVuc2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ3lvJywgbWF0Y2hFcmFZZWFyT3JkaW5hbCk7XG5hZGRQYXJzZVRva2VuKFsneScsICd5eScsICd5eXknLCAneXl5eSddLCBZRUFSKTtcbmFkZFBhcnNlVG9rZW4oWyd5byddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcsIHRva2VuKSB7XG4gIHZhciBtYXRjaDtcblxuICBpZiAoY29uZmlnLl9sb2NhbGUuX2VyYVllYXJPcmRpbmFsUmVnZXgpIHtcbiAgICBtYXRjaCA9IGlucHV0Lm1hdGNoKGNvbmZpZy5fbG9jYWxlLl9lcmFZZWFyT3JkaW5hbFJlZ2V4KTtcbiAgfVxuXG4gIGlmIChjb25maWcuX2xvY2FsZS5lcmFZZWFyT3JkaW5hbFBhcnNlKSB7XG4gICAgYXJyYXlbWUVBUl0gPSBjb25maWcuX2xvY2FsZS5lcmFZZWFyT3JkaW5hbFBhcnNlKGlucHV0LCBtYXRjaCk7XG4gIH0gZWxzZSB7XG4gICAgYXJyYXlbWUVBUl0gPSBwYXJzZUludChpbnB1dCwgMTApO1xuICB9XG59KTtcblxuZnVuY3Rpb24gbG9jYWxlRXJhcyhtLCBmb3JtYXQpIHtcbiAgdmFyIGksXG4gICAgICBsLFxuICAgICAgZGF0ZSxcbiAgICAgIGVyYXMgPSB0aGlzLl9lcmFzIHx8IGdldExvY2FsZSgnZW4nKS5fZXJhcztcblxuICBmb3IgKGkgPSAwLCBsID0gZXJhcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBlcmFzW2ldLnNpbmNlKSB7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBkYXRlID0gaG9va3MoZXJhc1tpXS5zaW5jZSkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgIGVyYXNbaV0uc2luY2UgPSBkYXRlLnZhbHVlT2YoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlb2YgZXJhc1tpXS51bnRpbCkge1xuICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgZXJhc1tpXS51bnRpbCA9ICtJbmZpbml0eTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGRhdGUgPSBob29rcyhlcmFzW2ldLnVudGlsKS5zdGFydE9mKCdkYXknKS52YWx1ZU9mKCk7XG4gICAgICAgIGVyYXNbaV0udW50aWwgPSBkYXRlLnZhbHVlT2YoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVyYXM7XG59XG5cbmZ1bmN0aW9uIGxvY2FsZUVyYXNQYXJzZShlcmFOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICB2YXIgaSxcbiAgICAgIGwsXG4gICAgICBlcmFzID0gdGhpcy5lcmFzKCksXG4gICAgICBuYW1lLFxuICAgICAgYWJicixcbiAgICAgIG5hcnJvdztcbiAgZXJhTmFtZSA9IGVyYU5hbWUudG9VcHBlckNhc2UoKTtcblxuICBmb3IgKGkgPSAwLCBsID0gZXJhcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBuYW1lID0gZXJhc1tpXS5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgYWJiciA9IGVyYXNbaV0uYWJici50b1VwcGVyQ2FzZSgpO1xuICAgIG5hcnJvdyA9IGVyYXNbaV0ubmFycm93LnRvVXBwZXJDYXNlKCk7XG5cbiAgICBpZiAoc3RyaWN0KSB7XG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgY2FzZSAnTk4nOlxuICAgICAgICBjYXNlICdOTk4nOlxuICAgICAgICAgIGlmIChhYmJyID09PSBlcmFOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJhc1tpXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdOTk5OJzpcbiAgICAgICAgICBpZiAobmFtZSA9PT0gZXJhTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVyYXNbaV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnTk5OTk4nOlxuICAgICAgICAgIGlmIChuYXJyb3cgPT09IGVyYU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBlcmFzW2ldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoW25hbWUsIGFiYnIsIG5hcnJvd10uaW5kZXhPZihlcmFOYW1lKSA+PSAwKSB7XG4gICAgICByZXR1cm4gZXJhc1tpXTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbG9jYWxlRXJhc0NvbnZlcnRZZWFyKGVyYSwgeWVhcikge1xuICB2YXIgZGlyID0gZXJhLnNpbmNlIDw9IGVyYS51bnRpbCA/ICsxIDogLTE7XG5cbiAgaWYgKHllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBob29rcyhlcmEuc2luY2UpLnllYXIoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaG9va3MoZXJhLnNpbmNlKS55ZWFyKCkgKyAoeWVhciAtIGVyYS5vZmZzZXQpICogZGlyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEVyYU5hbWUoKSB7XG4gIHZhciBpLFxuICAgICAgbCxcbiAgICAgIHZhbCxcbiAgICAgIGVyYXMgPSB0aGlzLmxvY2FsZURhdGEoKS5lcmFzKCk7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgdmFsID0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKTtcblxuICAgIGlmIChlcmFzW2ldLnNpbmNlIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS51bnRpbCkge1xuICAgICAgcmV0dXJuIGVyYXNbaV0ubmFtZTtcbiAgICB9XG5cbiAgICBpZiAoZXJhc1tpXS51bnRpbCA8PSB2YWwgJiYgdmFsIDw9IGVyYXNbaV0uc2luY2UpIHtcbiAgICAgIHJldHVybiBlcmFzW2ldLm5hbWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG5mdW5jdGlvbiBnZXRFcmFOYXJyb3coKSB7XG4gIHZhciBpLFxuICAgICAgbCxcbiAgICAgIHZhbCxcbiAgICAgIGVyYXMgPSB0aGlzLmxvY2FsZURhdGEoKS5lcmFzKCk7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgdmFsID0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKTtcblxuICAgIGlmIChlcmFzW2ldLnNpbmNlIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS51bnRpbCkge1xuICAgICAgcmV0dXJuIGVyYXNbaV0ubmFycm93O1xuICAgIH1cblxuICAgIGlmIChlcmFzW2ldLnVudGlsIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS5zaW5jZSkge1xuICAgICAgcmV0dXJuIGVyYXNbaV0ubmFycm93O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gZ2V0RXJhQWJicigpIHtcbiAgdmFyIGksXG4gICAgICBsLFxuICAgICAgdmFsLFxuICAgICAgZXJhcyA9IHRoaXMubG9jYWxlRGF0YSgpLmVyYXMoKTtcblxuICBmb3IgKGkgPSAwLCBsID0gZXJhcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICB2YWwgPSB0aGlzLmNsb25lKCkuc3RhcnRPZignZGF5JykudmFsdWVPZigpO1xuXG4gICAgaWYgKGVyYXNbaV0uc2luY2UgPD0gdmFsICYmIHZhbCA8PSBlcmFzW2ldLnVudGlsKSB7XG4gICAgICByZXR1cm4gZXJhc1tpXS5hYmJyO1xuICAgIH1cblxuICAgIGlmIChlcmFzW2ldLnVudGlsIDw9IHZhbCAmJiB2YWwgPD0gZXJhc1tpXS5zaW5jZSkge1xuICAgICAgcmV0dXJuIGVyYXNbaV0uYWJicjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIGdldEVyYVllYXIoKSB7XG4gIHZhciBpLFxuICAgICAgbCxcbiAgICAgIGRpcixcbiAgICAgIHZhbCxcbiAgICAgIGVyYXMgPSB0aGlzLmxvY2FsZURhdGEoKS5lcmFzKCk7XG5cbiAgZm9yIChpID0gMCwgbCA9IGVyYXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgZGlyID0gZXJhc1tpXS5zaW5jZSA8PSBlcmFzW2ldLnVudGlsID8gKzEgOiAtMTtcbiAgICB2YWwgPSB0aGlzLmNsb25lKCkuc3RhcnRPZignZGF5JykudmFsdWVPZigpO1xuXG4gICAgaWYgKGVyYXNbaV0uc2luY2UgPD0gdmFsICYmIHZhbCA8PSBlcmFzW2ldLnVudGlsIHx8IGVyYXNbaV0udW50aWwgPD0gdmFsICYmIHZhbCA8PSBlcmFzW2ldLnNpbmNlKSB7XG4gICAgICByZXR1cm4gKHRoaXMueWVhcigpIC0gaG9va3MoZXJhc1tpXS5zaW5jZSkueWVhcigpKSAqIGRpciArIGVyYXNbaV0ub2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzLnllYXIoKTtcbn1cblxuZnVuY3Rpb24gZXJhc05hbWVSZWdleChpc1N0cmljdCkge1xuICBpZiAoIWhhc093blByb3AodGhpcywgJ19lcmFzTmFtZVJlZ2V4JykpIHtcbiAgICBjb21wdXRlRXJhc1BhcnNlLmNhbGwodGhpcyk7XG4gIH1cblxuICByZXR1cm4gaXNTdHJpY3QgPyB0aGlzLl9lcmFzTmFtZVJlZ2V4IDogdGhpcy5fZXJhc1JlZ2V4O1xufVxuXG5mdW5jdGlvbiBlcmFzQWJiclJlZ2V4KGlzU3RyaWN0KSB7XG4gIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX2VyYXNBYmJyUmVnZXgnKSkge1xuICAgIGNvbXB1dGVFcmFzUGFyc2UuY2FsbCh0aGlzKTtcbiAgfVxuXG4gIHJldHVybiBpc1N0cmljdCA/IHRoaXMuX2VyYXNBYmJyUmVnZXggOiB0aGlzLl9lcmFzUmVnZXg7XG59XG5cbmZ1bmN0aW9uIGVyYXNOYXJyb3dSZWdleChpc1N0cmljdCkge1xuICBpZiAoIWhhc093blByb3AodGhpcywgJ19lcmFzTmFycm93UmVnZXgnKSkge1xuICAgIGNvbXB1dGVFcmFzUGFyc2UuY2FsbCh0aGlzKTtcbiAgfVxuXG4gIHJldHVybiBpc1N0cmljdCA/IHRoaXMuX2VyYXNOYXJyb3dSZWdleCA6IHRoaXMuX2VyYXNSZWdleDtcbn1cblxuZnVuY3Rpb24gbWF0Y2hFcmFBYmJyKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5lcmFzQWJiclJlZ2V4KGlzU3RyaWN0KTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hFcmFOYW1lKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGxvY2FsZS5lcmFzTmFtZVJlZ2V4KGlzU3RyaWN0KTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hFcmFOYXJyb3coaXNTdHJpY3QsIGxvY2FsZSkge1xuICByZXR1cm4gbG9jYWxlLmVyYXNOYXJyb3dSZWdleChpc1N0cmljdCk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoRXJhWWVhck9yZGluYWwoaXNTdHJpY3QsIGxvY2FsZSkge1xuICByZXR1cm4gbG9jYWxlLl9lcmFZZWFyT3JkaW5hbFJlZ2V4IHx8IG1hdGNoVW5zaWduZWQ7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVFcmFzUGFyc2UoKSB7XG4gIHZhciBhYmJyUGllY2VzID0gW10sXG4gICAgICBuYW1lUGllY2VzID0gW10sXG4gICAgICBuYXJyb3dQaWVjZXMgPSBbXSxcbiAgICAgIG1peGVkUGllY2VzID0gW10sXG4gICAgICBpLFxuICAgICAgbCxcbiAgICAgIGVyYXMgPSB0aGlzLmVyYXMoKTtcblxuICBmb3IgKGkgPSAwLCBsID0gZXJhcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBuYW1lUGllY2VzLnB1c2gocmVnZXhFc2NhcGUoZXJhc1tpXS5uYW1lKSk7XG4gICAgYWJiclBpZWNlcy5wdXNoKHJlZ2V4RXNjYXBlKGVyYXNbaV0uYWJicikpO1xuICAgIG5hcnJvd1BpZWNlcy5wdXNoKHJlZ2V4RXNjYXBlKGVyYXNbaV0ubmFycm93KSk7XG4gICAgbWl4ZWRQaWVjZXMucHVzaChyZWdleEVzY2FwZShlcmFzW2ldLm5hbWUpKTtcbiAgICBtaXhlZFBpZWNlcy5wdXNoKHJlZ2V4RXNjYXBlKGVyYXNbaV0uYWJicikpO1xuICAgIG1peGVkUGllY2VzLnB1c2gocmVnZXhFc2NhcGUoZXJhc1tpXS5uYXJyb3cpKTtcbiAgfVxuXG4gIHRoaXMuX2VyYXNSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIG1peGVkUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgdGhpcy5fZXJhc05hbWVSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIG5hbWVQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICB0aGlzLl9lcmFzQWJiclJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgYWJiclBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gIHRoaXMuX2VyYXNOYXJyb3dSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIG5hcnJvd1BpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG59XG5cbmFkZEZvcm1hdFRva2VuKDAsIFsnZ2cnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy53ZWVrWWVhcigpICUgMTAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ0dHJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuaXNvV2Vla1llYXIoKSAlIDEwMDtcbn0pO1xuXG5mdW5jdGlvbiBhZGRXZWVrWWVhckZvcm1hdFRva2VuKHRva2VuLCBnZXR0ZXIpIHtcbiAgYWRkRm9ybWF0VG9rZW4oMCwgW3Rva2VuLCB0b2tlbi5sZW5ndGhdLCAwLCBnZXR0ZXIpO1xufVxuXG5hZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnJywgJ3dlZWtZZWFyJyk7XG5hZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnZycsICd3ZWVrWWVhcicpO1xuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHRycsICdpc29XZWVrWWVhcicpO1xuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHR0cnLCAnaXNvV2Vla1llYXInKTtcbmFkZFVuaXRBbGlhcygnd2Vla1llYXInLCAnZ2cnKTtcbmFkZFVuaXRBbGlhcygnaXNvV2Vla1llYXInLCAnR0cnKTtcbmFkZFVuaXRQcmlvcml0eSgnd2Vla1llYXInLCAxKTtcbmFkZFVuaXRQcmlvcml0eSgnaXNvV2Vla1llYXInLCAxKTtcbmFkZFJlZ2V4VG9rZW4oJ0cnLCBtYXRjaFNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCdnJywgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignR0cnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdnZycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ0dHR0cnLCBtYXRjaDF0bzQsIG1hdGNoNCk7XG5hZGRSZWdleFRva2VuKCdnZ2dnJywgbWF0Y2gxdG80LCBtYXRjaDQpO1xuYWRkUmVnZXhUb2tlbignR0dHR0cnLCBtYXRjaDF0bzYsIG1hdGNoNik7XG5hZGRSZWdleFRva2VuKCdnZ2dnZycsIG1hdGNoMXRvNiwgbWF0Y2g2KTtcbmFkZFdlZWtQYXJzZVRva2VuKFsnZ2dnZycsICdnZ2dnZycsICdHR0dHJywgJ0dHR0dHJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICB3ZWVrW3Rva2VuLnN1YnN0cigwLCAyKV0gPSB0b0ludChpbnB1dCk7XG59KTtcbmFkZFdlZWtQYXJzZVRva2VuKFsnZ2cnLCAnR0cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gIHdlZWtbdG9rZW5dID0gaG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpO1xufSk7XG5cbmZ1bmN0aW9uIGdldFNldFdlZWtZZWFyKGlucHV0KSB7XG4gIHJldHVybiBnZXRTZXRXZWVrWWVhckhlbHBlci5jYWxsKHRoaXMsIGlucHV0LCB0aGlzLndlZWsoKSwgdGhpcy53ZWVrZGF5KCksIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdywgdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG95KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0SVNPV2Vla1llYXIoaW5wdXQpIHtcbiAgcmV0dXJuIGdldFNldFdlZWtZZWFySGVscGVyLmNhbGwodGhpcywgaW5wdXQsIHRoaXMuaXNvV2VlaygpLCB0aGlzLmlzb1dlZWtkYXkoKSwgMSwgNCk7XG59XG5cbmZ1bmN0aW9uIGdldElTT1dlZWtzSW5ZZWFyKCkge1xuICByZXR1cm4gd2Vla3NJblllYXIodGhpcy55ZWFyKCksIDEsIDQpO1xufVxuXG5mdW5jdGlvbiBnZXRJU09XZWVrc0luSVNPV2Vla1llYXIoKSB7XG4gIHJldHVybiB3ZWVrc0luWWVhcih0aGlzLmlzb1dlZWtZZWFyKCksIDEsIDQpO1xufVxuXG5mdW5jdGlvbiBnZXRXZWVrc0luWWVhcigpIHtcbiAgdmFyIHdlZWtJbmZvID0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7XG5cbiAgcmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLCB3ZWVrSW5mby5kb3csIHdlZWtJbmZvLmRveSk7XG59XG5cbmZ1bmN0aW9uIGdldFdlZWtzSW5XZWVrWWVhcigpIHtcbiAgdmFyIHdlZWtJbmZvID0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7XG5cbiAgcmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMud2Vla1llYXIoKSwgd2Vla0luZm8uZG93LCB3ZWVrSW5mby5kb3kpO1xufVxuXG5mdW5jdGlvbiBnZXRTZXRXZWVrWWVhckhlbHBlcihpbnB1dCwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgdmFyIHdlZWtzVGFyZ2V0O1xuXG4gIGlmIChpbnB1dCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHdlZWtPZlllYXIodGhpcywgZG93LCBkb3kpLnllYXI7XG4gIH0gZWxzZSB7XG4gICAgd2Vla3NUYXJnZXQgPSB3ZWVrc0luWWVhcihpbnB1dCwgZG93LCBkb3kpO1xuXG4gICAgaWYgKHdlZWsgPiB3ZWVrc1RhcmdldCkge1xuICAgICAgd2VlayA9IHdlZWtzVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBzZXRXZWVrQWxsLmNhbGwodGhpcywgaW5wdXQsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRXZWVrQWxsKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSkge1xuICB2YXIgZGF5T2ZZZWFyRGF0YSA9IGRheU9mWWVhckZyb21XZWVrcyh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpLFxuICAgICAgZGF0ZSA9IGNyZWF0ZVVUQ0RhdGUoZGF5T2ZZZWFyRGF0YS55ZWFyLCAwLCBkYXlPZlllYXJEYXRhLmRheU9mWWVhcik7XG4gIHRoaXMueWVhcihkYXRlLmdldFVUQ0Z1bGxZZWFyKCkpO1xuICB0aGlzLm1vbnRoKGRhdGUuZ2V0VVRDTW9udGgoKSk7XG4gIHRoaXMuZGF0ZShkYXRlLmdldFVUQ0RhdGUoKSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5hZGRGb3JtYXRUb2tlbignUScsIDAsICdRbycsICdxdWFydGVyJyk7XG5hZGRVbml0QWxpYXMoJ3F1YXJ0ZXInLCAnUScpO1xuYWRkVW5pdFByaW9yaXR5KCdxdWFydGVyJywgNyk7XG5hZGRSZWdleFRva2VuKCdRJywgbWF0Y2gxKTtcbmFkZFBhcnNlVG9rZW4oJ1EnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gIGFycmF5W01PTlRIXSA9ICh0b0ludChpbnB1dCkgLSAxKSAqIDM7XG59KTtcblxuZnVuY3Rpb24gZ2V0U2V0UXVhcnRlcihpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IE1hdGguY2VpbCgodGhpcy5tb250aCgpICsgMSkgLyAzKSA6IHRoaXMubW9udGgoKGlucHV0IC0gMSkgKiAzICsgdGhpcy5tb250aCgpICUgMyk7XG59XG5cbmFkZEZvcm1hdFRva2VuKCdEJywgWydERCcsIDJdLCAnRG8nLCAnZGF0ZScpO1xuYWRkVW5pdEFsaWFzKCdkYXRlJywgJ0QnKTtcbmFkZFVuaXRQcmlvcml0eSgnZGF0ZScsIDkpO1xuYWRkUmVnZXhUb2tlbignRCcsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdERCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ0RvJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgcmV0dXJuIGlzU3RyaWN0ID8gbG9jYWxlLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlIHx8IGxvY2FsZS5fb3JkaW5hbFBhcnNlIDogbG9jYWxlLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlTGVuaWVudDtcbn0pO1xuYWRkUGFyc2VUb2tlbihbJ0QnLCAnREQnXSwgREFURSk7XG5hZGRQYXJzZVRva2VuKCdEbycsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgYXJyYXlbREFURV0gPSB0b0ludChpbnB1dC5tYXRjaChtYXRjaDF0bzIpWzBdKTtcbn0pO1xudmFyIGdldFNldERheU9mTW9udGggPSBtYWtlR2V0U2V0KCdEYXRlJywgdHJ1ZSk7XG5hZGRGb3JtYXRUb2tlbignREREJywgWydEREREJywgM10sICdERERvJywgJ2RheU9mWWVhcicpO1xuYWRkVW5pdEFsaWFzKCdkYXlPZlllYXInLCAnREREJyk7XG5hZGRVbml0UHJpb3JpdHkoJ2RheU9mWWVhcicsIDQpO1xuYWRkUmVnZXhUb2tlbignREREJywgbWF0Y2gxdG8zKTtcbmFkZFJlZ2V4VG9rZW4oJ0REREQnLCBtYXRjaDMpO1xuYWRkUGFyc2VUb2tlbihbJ0RERCcsICdEREREJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICBjb25maWcuX2RheU9mWWVhciA9IHRvSW50KGlucHV0KTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRTZXREYXlPZlllYXIoaW5wdXQpIHtcbiAgdmFyIGRheU9mWWVhciA9IE1hdGgucm91bmQoKHRoaXMuY2xvbmUoKS5zdGFydE9mKCdkYXknKSAtIHRoaXMuY2xvbmUoKS5zdGFydE9mKCd5ZWFyJykpIC8gODY0ZTUpICsgMTtcbiAgcmV0dXJuIGlucHV0ID09IG51bGwgPyBkYXlPZlllYXIgOiB0aGlzLmFkZChpbnB1dCAtIGRheU9mWWVhciwgJ2QnKTtcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ20nLCBbJ21tJywgMl0sIDAsICdtaW51dGUnKTtcbmFkZFVuaXRBbGlhcygnbWludXRlJywgJ20nKTtcbmFkZFVuaXRQcmlvcml0eSgnbWludXRlJywgMTQpO1xuYWRkUmVnZXhUb2tlbignbScsIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdtbScsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFBhcnNlVG9rZW4oWydtJywgJ21tJ10sIE1JTlVURSk7XG52YXIgZ2V0U2V0TWludXRlID0gbWFrZUdldFNldCgnTWludXRlcycsIGZhbHNlKTtcbmFkZEZvcm1hdFRva2VuKCdzJywgWydzcycsIDJdLCAwLCAnc2Vjb25kJyk7XG5hZGRVbml0QWxpYXMoJ3NlY29uZCcsICdzJyk7XG5hZGRVbml0UHJpb3JpdHkoJ3NlY29uZCcsIDE1KTtcbmFkZFJlZ2V4VG9rZW4oJ3MnLCBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignc3MnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRQYXJzZVRva2VuKFsncycsICdzcyddLCBTRUNPTkQpO1xudmFyIGdldFNldFNlY29uZCA9IG1ha2VHZXRTZXQoJ1NlY29uZHMnLCBmYWxzZSk7XG5hZGRGb3JtYXRUb2tlbignUycsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIH5+KHRoaXMubWlsbGlzZWNvbmQoKSAvIDEwMCk7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1MnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gfn4odGhpcy5taWxsaXNlY29uZCgpIC8gMTApO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTUycsIDNdLCAwLCAnbWlsbGlzZWNvbmQnKTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTUycsIDRdLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTUycsIDVdLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTJywgNl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTUycsIDddLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTU1NTUycsIDhdLCAwLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTU1NTJywgOV0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwMDA7XG59KTtcbmFkZFVuaXRBbGlhcygnbWlsbGlzZWNvbmQnLCAnbXMnKTtcbmFkZFVuaXRQcmlvcml0eSgnbWlsbGlzZWNvbmQnLCAxNik7XG5hZGRSZWdleFRva2VuKCdTJywgbWF0Y2gxdG8zLCBtYXRjaDEpO1xuYWRkUmVnZXhUb2tlbignU1MnLCBtYXRjaDF0bzMsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdTU1MnLCBtYXRjaDF0bzMsIG1hdGNoMyk7XG52YXIgdG9rZW4sIGdldFNldE1pbGxpc2Vjb25kO1xuXG5mb3IgKHRva2VuID0gJ1NTU1MnOyB0b2tlbi5sZW5ndGggPD0gOTsgdG9rZW4gKz0gJ1MnKSB7XG4gIGFkZFJlZ2V4VG9rZW4odG9rZW4sIG1hdGNoVW5zaWduZWQpO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1zKGlucHV0LCBhcnJheSkge1xuICBhcnJheVtNSUxMSVNFQ09ORF0gPSB0b0ludCgoJzAuJyArIGlucHV0KSAqIDEwMDApO1xufVxuXG5mb3IgKHRva2VuID0gJ1MnOyB0b2tlbi5sZW5ndGggPD0gOTsgdG9rZW4gKz0gJ1MnKSB7XG4gIGFkZFBhcnNlVG9rZW4odG9rZW4sIHBhcnNlTXMpO1xufVxuXG5nZXRTZXRNaWxsaXNlY29uZCA9IG1ha2VHZXRTZXQoJ01pbGxpc2Vjb25kcycsIGZhbHNlKTtcbmFkZEZvcm1hdFRva2VuKCd6JywgMCwgMCwgJ3pvbmVBYmJyJyk7XG5hZGRGb3JtYXRUb2tlbignenonLCAwLCAwLCAnem9uZU5hbWUnKTtcblxuZnVuY3Rpb24gZ2V0Wm9uZUFiYnIoKSB7XG4gIHJldHVybiB0aGlzLl9pc1VUQyA/ICdVVEMnIDogJyc7XG59XG5cbmZ1bmN0aW9uIGdldFpvbmVOYW1lKCkge1xuICByZXR1cm4gdGhpcy5faXNVVEMgPyAnQ29vcmRpbmF0ZWQgVW5pdmVyc2FsIFRpbWUnIDogJyc7XG59XG5cbnZhciBwcm90byA9IE1vbWVudC5wcm90b3R5cGU7XG5wcm90by5hZGQgPSBhZGQ7XG5wcm90by5jYWxlbmRhciA9IGNhbGVuZGFyJDE7XG5wcm90by5jbG9uZSA9IGNsb25lO1xucHJvdG8uZGlmZiA9IGRpZmY7XG5wcm90by5lbmRPZiA9IGVuZE9mO1xucHJvdG8uZm9ybWF0ID0gZm9ybWF0O1xucHJvdG8uZnJvbSA9IGZyb207XG5wcm90by5mcm9tTm93ID0gZnJvbU5vdztcbnByb3RvLnRvID0gdG87XG5wcm90by50b05vdyA9IHRvTm93O1xucHJvdG8uZ2V0ID0gc3RyaW5nR2V0O1xucHJvdG8uaW52YWxpZEF0ID0gaW52YWxpZEF0O1xucHJvdG8uaXNBZnRlciA9IGlzQWZ0ZXI7XG5wcm90by5pc0JlZm9yZSA9IGlzQmVmb3JlO1xucHJvdG8uaXNCZXR3ZWVuID0gaXNCZXR3ZWVuO1xucHJvdG8uaXNTYW1lID0gaXNTYW1lO1xucHJvdG8uaXNTYW1lT3JBZnRlciA9IGlzU2FtZU9yQWZ0ZXI7XG5wcm90by5pc1NhbWVPckJlZm9yZSA9IGlzU2FtZU9yQmVmb3JlO1xucHJvdG8uaXNWYWxpZCA9IGlzVmFsaWQkMjtcbnByb3RvLmxhbmcgPSBsYW5nO1xucHJvdG8ubG9jYWxlID0gbG9jYWxlO1xucHJvdG8ubG9jYWxlRGF0YSA9IGxvY2FsZURhdGE7XG5wcm90by5tYXggPSBwcm90b3R5cGVNYXg7XG5wcm90by5taW4gPSBwcm90b3R5cGVNaW47XG5wcm90by5wYXJzaW5nRmxhZ3MgPSBwYXJzaW5nRmxhZ3M7XG5wcm90by5zZXQgPSBzdHJpbmdTZXQ7XG5wcm90by5zdGFydE9mID0gc3RhcnRPZjtcbnByb3RvLnN1YnRyYWN0ID0gc3VidHJhY3Q7XG5wcm90by50b0FycmF5ID0gdG9BcnJheTtcbnByb3RvLnRvT2JqZWN0ID0gdG9PYmplY3Q7XG5wcm90by50b0RhdGUgPSB0b0RhdGU7XG5wcm90by50b0lTT1N0cmluZyA9IHRvSVNPU3RyaW5nO1xucHJvdG8uaW5zcGVjdCA9IGluc3BlY3Q7XG5cbmlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuZm9yICE9IG51bGwpIHtcbiAgcHJvdG9bU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICdNb21lbnQ8JyArIHRoaXMuZm9ybWF0KCkgKyAnPic7XG4gIH07XG59XG5cbnByb3RvLnRvSlNPTiA9IHRvSlNPTjtcbnByb3RvLnRvU3RyaW5nID0gdG9TdHJpbmc7XG5wcm90by51bml4ID0gdW5peDtcbnByb3RvLnZhbHVlT2YgPSB2YWx1ZU9mO1xucHJvdG8uY3JlYXRpb25EYXRhID0gY3JlYXRpb25EYXRhO1xucHJvdG8uZXJhTmFtZSA9IGdldEVyYU5hbWU7XG5wcm90by5lcmFOYXJyb3cgPSBnZXRFcmFOYXJyb3c7XG5wcm90by5lcmFBYmJyID0gZ2V0RXJhQWJicjtcbnByb3RvLmVyYVllYXIgPSBnZXRFcmFZZWFyO1xucHJvdG8ueWVhciA9IGdldFNldFllYXI7XG5wcm90by5pc0xlYXBZZWFyID0gZ2V0SXNMZWFwWWVhcjtcbnByb3RvLndlZWtZZWFyID0gZ2V0U2V0V2Vla1llYXI7XG5wcm90by5pc29XZWVrWWVhciA9IGdldFNldElTT1dlZWtZZWFyO1xucHJvdG8ucXVhcnRlciA9IHByb3RvLnF1YXJ0ZXJzID0gZ2V0U2V0UXVhcnRlcjtcbnByb3RvLm1vbnRoID0gZ2V0U2V0TW9udGg7XG5wcm90by5kYXlzSW5Nb250aCA9IGdldERheXNJbk1vbnRoO1xucHJvdG8ud2VlayA9IHByb3RvLndlZWtzID0gZ2V0U2V0V2VlaztcbnByb3RvLmlzb1dlZWsgPSBwcm90by5pc29XZWVrcyA9IGdldFNldElTT1dlZWs7XG5wcm90by53ZWVrc0luWWVhciA9IGdldFdlZWtzSW5ZZWFyO1xucHJvdG8ud2Vla3NJbldlZWtZZWFyID0gZ2V0V2Vla3NJbldlZWtZZWFyO1xucHJvdG8uaXNvV2Vla3NJblllYXIgPSBnZXRJU09XZWVrc0luWWVhcjtcbnByb3RvLmlzb1dlZWtzSW5JU09XZWVrWWVhciA9IGdldElTT1dlZWtzSW5JU09XZWVrWWVhcjtcbnByb3RvLmRhdGUgPSBnZXRTZXREYXlPZk1vbnRoO1xucHJvdG8uZGF5ID0gcHJvdG8uZGF5cyA9IGdldFNldERheU9mV2VlaztcbnByb3RvLndlZWtkYXkgPSBnZXRTZXRMb2NhbGVEYXlPZldlZWs7XG5wcm90by5pc29XZWVrZGF5ID0gZ2V0U2V0SVNPRGF5T2ZXZWVrO1xucHJvdG8uZGF5T2ZZZWFyID0gZ2V0U2V0RGF5T2ZZZWFyO1xucHJvdG8uaG91ciA9IHByb3RvLmhvdXJzID0gZ2V0U2V0SG91cjtcbnByb3RvLm1pbnV0ZSA9IHByb3RvLm1pbnV0ZXMgPSBnZXRTZXRNaW51dGU7XG5wcm90by5zZWNvbmQgPSBwcm90by5zZWNvbmRzID0gZ2V0U2V0U2Vjb25kO1xucHJvdG8ubWlsbGlzZWNvbmQgPSBwcm90by5taWxsaXNlY29uZHMgPSBnZXRTZXRNaWxsaXNlY29uZDtcbnByb3RvLnV0Y09mZnNldCA9IGdldFNldE9mZnNldDtcbnByb3RvLnV0YyA9IHNldE9mZnNldFRvVVRDO1xucHJvdG8ubG9jYWwgPSBzZXRPZmZzZXRUb0xvY2FsO1xucHJvdG8ucGFyc2Vab25lID0gc2V0T2Zmc2V0VG9QYXJzZWRPZmZzZXQ7XG5wcm90by5oYXNBbGlnbmVkSG91ck9mZnNldCA9IGhhc0FsaWduZWRIb3VyT2Zmc2V0O1xucHJvdG8uaXNEU1QgPSBpc0RheWxpZ2h0U2F2aW5nVGltZTtcbnByb3RvLmlzTG9jYWwgPSBpc0xvY2FsO1xucHJvdG8uaXNVdGNPZmZzZXQgPSBpc1V0Y09mZnNldDtcbnByb3RvLmlzVXRjID0gaXNVdGM7XG5wcm90by5pc1VUQyA9IGlzVXRjO1xucHJvdG8uem9uZUFiYnIgPSBnZXRab25lQWJicjtcbnByb3RvLnpvbmVOYW1lID0gZ2V0Wm9uZU5hbWU7XG5wcm90by5kYXRlcyA9IGRlcHJlY2F0ZSgnZGF0ZXMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIGRhdGUgaW5zdGVhZC4nLCBnZXRTZXREYXlPZk1vbnRoKTtcbnByb3RvLm1vbnRocyA9IGRlcHJlY2F0ZSgnbW9udGhzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb250aCBpbnN0ZWFkJywgZ2V0U2V0TW9udGgpO1xucHJvdG8ueWVhcnMgPSBkZXByZWNhdGUoJ3llYXJzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSB5ZWFyIGluc3RlYWQnLCBnZXRTZXRZZWFyKTtcbnByb3RvLnpvbmUgPSBkZXByZWNhdGUoJ21vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL3pvbmUvJywgZ2V0U2V0Wm9uZSk7XG5wcm90by5pc0RTVFNoaWZ0ZWQgPSBkZXByZWNhdGUoJ2lzRFNUU2hpZnRlZCBpcyBkZXByZWNhdGVkLiBTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9kc3Qtc2hpZnRlZC8gZm9yIG1vcmUgaW5mb3JtYXRpb24nLCBpc0RheWxpZ2h0U2F2aW5nVGltZVNoaWZ0ZWQpO1xuXG5mdW5jdGlvbiBjcmVhdGVVbml4KGlucHV0KSB7XG4gIHJldHVybiBjcmVhdGVMb2NhbChpbnB1dCAqIDEwMDApO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJblpvbmUoKSB7XG4gIHJldHVybiBjcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpLnBhcnNlWm9uZSgpO1xufVxuXG5mdW5jdGlvbiBwcmVQYXJzZVBvc3RGb3JtYXQoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmc7XG59XG5cbnZhciBwcm90byQxID0gTG9jYWxlLnByb3RvdHlwZTtcbnByb3RvJDEuY2FsZW5kYXIgPSBjYWxlbmRhcjtcbnByb3RvJDEubG9uZ0RhdGVGb3JtYXQgPSBsb25nRGF0ZUZvcm1hdDtcbnByb3RvJDEuaW52YWxpZERhdGUgPSBpbnZhbGlkRGF0ZTtcbnByb3RvJDEub3JkaW5hbCA9IG9yZGluYWw7XG5wcm90byQxLnByZXBhcnNlID0gcHJlUGFyc2VQb3N0Rm9ybWF0O1xucHJvdG8kMS5wb3N0Zm9ybWF0ID0gcHJlUGFyc2VQb3N0Rm9ybWF0O1xucHJvdG8kMS5yZWxhdGl2ZVRpbWUgPSByZWxhdGl2ZVRpbWU7XG5wcm90byQxLnBhc3RGdXR1cmUgPSBwYXN0RnV0dXJlO1xucHJvdG8kMS5zZXQgPSBzZXQ7XG5wcm90byQxLmVyYXMgPSBsb2NhbGVFcmFzO1xucHJvdG8kMS5lcmFzUGFyc2UgPSBsb2NhbGVFcmFzUGFyc2U7XG5wcm90byQxLmVyYXNDb252ZXJ0WWVhciA9IGxvY2FsZUVyYXNDb252ZXJ0WWVhcjtcbnByb3RvJDEuZXJhc0FiYnJSZWdleCA9IGVyYXNBYmJyUmVnZXg7XG5wcm90byQxLmVyYXNOYW1lUmVnZXggPSBlcmFzTmFtZVJlZ2V4O1xucHJvdG8kMS5lcmFzTmFycm93UmVnZXggPSBlcmFzTmFycm93UmVnZXg7XG5wcm90byQxLm1vbnRocyA9IGxvY2FsZU1vbnRocztcbnByb3RvJDEubW9udGhzU2hvcnQgPSBsb2NhbGVNb250aHNTaG9ydDtcbnByb3RvJDEubW9udGhzUGFyc2UgPSBsb2NhbGVNb250aHNQYXJzZTtcbnByb3RvJDEubW9udGhzUmVnZXggPSBtb250aHNSZWdleDtcbnByb3RvJDEubW9udGhzU2hvcnRSZWdleCA9IG1vbnRoc1Nob3J0UmVnZXg7XG5wcm90byQxLndlZWsgPSBsb2NhbGVXZWVrO1xucHJvdG8kMS5maXJzdERheU9mWWVhciA9IGxvY2FsZUZpcnN0RGF5T2ZZZWFyO1xucHJvdG8kMS5maXJzdERheU9mV2VlayA9IGxvY2FsZUZpcnN0RGF5T2ZXZWVrO1xucHJvdG8kMS53ZWVrZGF5cyA9IGxvY2FsZVdlZWtkYXlzO1xucHJvdG8kMS53ZWVrZGF5c01pbiA9IGxvY2FsZVdlZWtkYXlzTWluO1xucHJvdG8kMS53ZWVrZGF5c1Nob3J0ID0gbG9jYWxlV2Vla2RheXNTaG9ydDtcbnByb3RvJDEud2Vla2RheXNQYXJzZSA9IGxvY2FsZVdlZWtkYXlzUGFyc2U7XG5wcm90byQxLndlZWtkYXlzUmVnZXggPSB3ZWVrZGF5c1JlZ2V4O1xucHJvdG8kMS53ZWVrZGF5c1Nob3J0UmVnZXggPSB3ZWVrZGF5c1Nob3J0UmVnZXg7XG5wcm90byQxLndlZWtkYXlzTWluUmVnZXggPSB3ZWVrZGF5c01pblJlZ2V4O1xucHJvdG8kMS5pc1BNID0gbG9jYWxlSXNQTTtcbnByb3RvJDEubWVyaWRpZW0gPSBsb2NhbGVNZXJpZGllbTtcblxuZnVuY3Rpb24gZ2V0JDEoZm9ybWF0LCBpbmRleCwgZmllbGQsIHNldHRlcikge1xuICB2YXIgbG9jYWxlID0gZ2V0TG9jYWxlKCksXG4gICAgICB1dGMgPSBjcmVhdGVVVEMoKS5zZXQoc2V0dGVyLCBpbmRleCk7XG4gIHJldHVybiBsb2NhbGVbZmllbGRdKHV0YywgZm9ybWF0KTtcbn1cblxuZnVuY3Rpb24gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LCBpbmRleCwgZmllbGQpIHtcbiAgaWYgKGlzTnVtYmVyKGZvcm1hdCkpIHtcbiAgICBpbmRleCA9IGZvcm1hdDtcbiAgICBmb3JtYXQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmb3JtYXQgPSBmb3JtYXQgfHwgJyc7XG5cbiAgaWYgKGluZGV4ICE9IG51bGwpIHtcbiAgICByZXR1cm4gZ2V0JDEoZm9ybWF0LCBpbmRleCwgZmllbGQsICdtb250aCcpO1xuICB9XG5cbiAgdmFyIGksXG4gICAgICBvdXQgPSBbXTtcblxuICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgIG91dFtpXSA9IGdldCQxKGZvcm1hdCwgaSwgZmllbGQsICdtb250aCcpO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgsIGZpZWxkKSB7XG4gIGlmICh0eXBlb2YgbG9jYWxlU29ydGVkID09PSAnYm9vbGVhbicpIHtcbiAgICBpZiAoaXNOdW1iZXIoZm9ybWF0KSkge1xuICAgICAgaW5kZXggPSBmb3JtYXQ7XG4gICAgICBmb3JtYXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICcnO1xuICB9IGVsc2Uge1xuICAgIGZvcm1hdCA9IGxvY2FsZVNvcnRlZDtcbiAgICBpbmRleCA9IGZvcm1hdDtcbiAgICBsb2NhbGVTb3J0ZWQgPSBmYWxzZTtcblxuICAgIGlmIChpc051bWJlcihmb3JtYXQpKSB7XG4gICAgICBpbmRleCA9IGZvcm1hdDtcbiAgICAgIGZvcm1hdCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmb3JtYXQgPSBmb3JtYXQgfHwgJyc7XG4gIH1cblxuICB2YXIgbG9jYWxlID0gZ2V0TG9jYWxlKCksXG4gICAgICBzaGlmdCA9IGxvY2FsZVNvcnRlZCA/IGxvY2FsZS5fd2Vlay5kb3cgOiAwLFxuICAgICAgaSxcbiAgICAgIG91dCA9IFtdO1xuXG4gIGlmIChpbmRleCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIGdldCQxKGZvcm1hdCwgKGluZGV4ICsgc2hpZnQpICUgNywgZmllbGQsICdkYXknKTtcbiAgfVxuXG4gIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICBvdXRbaV0gPSBnZXQkMShmb3JtYXQsIChpICsgc2hpZnQpICUgNywgZmllbGQsICdkYXknKTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGxpc3RNb250aHMoZm9ybWF0LCBpbmRleCkge1xuICByZXR1cm4gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LCBpbmRleCwgJ21vbnRocycpO1xufVxuXG5mdW5jdGlvbiBsaXN0TW9udGhzU2hvcnQoZm9ybWF0LCBpbmRleCkge1xuICByZXR1cm4gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LCBpbmRleCwgJ21vbnRoc1Nob3J0Jyk7XG59XG5cbmZ1bmN0aW9uIGxpc3RXZWVrZGF5cyhsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgpIHtcbiAgcmV0dXJuIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4LCAnd2Vla2RheXMnKTtcbn1cblxuZnVuY3Rpb24gbGlzdFdlZWtkYXlzU2hvcnQobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4KSB7XG4gIHJldHVybiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCwgJ3dlZWtkYXlzU2hvcnQnKTtcbn1cblxuZnVuY3Rpb24gbGlzdFdlZWtkYXlzTWluKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCkge1xuICByZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgsICd3ZWVrZGF5c01pbicpO1xufVxuXG5nZXRTZXRHbG9iYWxMb2NhbGUoJ2VuJywge1xuICBlcmFzOiBbe1xuICAgIHNpbmNlOiAnMDAwMS0wMS0wMScsXG4gICAgdW50aWw6ICtJbmZpbml0eSxcbiAgICBvZmZzZXQ6IDEsXG4gICAgbmFtZTogJ0Fubm8gRG9taW5pJyxcbiAgICBuYXJyb3c6ICdBRCcsXG4gICAgYWJicjogJ0FEJ1xuICB9LCB7XG4gICAgc2luY2U6ICcwMDAwLTEyLTMxJyxcbiAgICB1bnRpbDogLUluZmluaXR5LFxuICAgIG9mZnNldDogMSxcbiAgICBuYW1lOiAnQmVmb3JlIENocmlzdCcsXG4gICAgbmFycm93OiAnQkMnLFxuICAgIGFiYnI6ICdCQydcbiAgfV0sXG4gIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IC9cXGR7MSwyfSh0aHxzdHxuZHxyZCkvLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgIG91dHB1dCA9IHRvSW50KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSA/ICd0aCcgOiBiID09PSAxID8gJ3N0JyA6IGIgPT09IDIgPyAnbmQnIDogYiA9PT0gMyA/ICdyZCcgOiAndGgnO1xuICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gIH1cbn0pO1xuaG9va3MubGFuZyA9IGRlcHJlY2F0ZSgnbW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC4nLCBnZXRTZXRHbG9iYWxMb2NhbGUpO1xuaG9va3MubGFuZ0RhdGEgPSBkZXByZWNhdGUoJ21vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4nLCBnZXRMb2NhbGUpO1xudmFyIG1hdGhBYnMgPSBNYXRoLmFicztcblxuZnVuY3Rpb24gYWJzKCkge1xuICB2YXIgZGF0YSA9IHRoaXMuX2RhdGE7XG4gIHRoaXMuX21pbGxpc2Vjb25kcyA9IG1hdGhBYnModGhpcy5fbWlsbGlzZWNvbmRzKTtcbiAgdGhpcy5fZGF5cyA9IG1hdGhBYnModGhpcy5fZGF5cyk7XG4gIHRoaXMuX21vbnRocyA9IG1hdGhBYnModGhpcy5fbW9udGhzKTtcbiAgZGF0YS5taWxsaXNlY29uZHMgPSBtYXRoQWJzKGRhdGEubWlsbGlzZWNvbmRzKTtcbiAgZGF0YS5zZWNvbmRzID0gbWF0aEFicyhkYXRhLnNlY29uZHMpO1xuICBkYXRhLm1pbnV0ZXMgPSBtYXRoQWJzKGRhdGEubWludXRlcyk7XG4gIGRhdGEuaG91cnMgPSBtYXRoQWJzKGRhdGEuaG91cnMpO1xuICBkYXRhLm1vbnRocyA9IG1hdGhBYnMoZGF0YS5tb250aHMpO1xuICBkYXRhLnllYXJzID0gbWF0aEFicyhkYXRhLnllYXJzKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGFkZFN1YnRyYWN0JDEoZHVyYXRpb24sIGlucHV0LCB2YWx1ZSwgZGlyZWN0aW9uKSB7XG4gIHZhciBvdGhlciA9IGNyZWF0ZUR1cmF0aW9uKGlucHV0LCB2YWx1ZSk7XG4gIGR1cmF0aW9uLl9taWxsaXNlY29uZHMgKz0gZGlyZWN0aW9uICogb3RoZXIuX21pbGxpc2Vjb25kcztcbiAgZHVyYXRpb24uX2RheXMgKz0gZGlyZWN0aW9uICogb3RoZXIuX2RheXM7XG4gIGR1cmF0aW9uLl9tb250aHMgKz0gZGlyZWN0aW9uICogb3RoZXIuX21vbnRocztcbiAgcmV0dXJuIGR1cmF0aW9uLl9idWJibGUoKTtcbn1cblxuZnVuY3Rpb24gYWRkJDEoaW5wdXQsIHZhbHVlKSB7XG4gIHJldHVybiBhZGRTdWJ0cmFjdCQxKHRoaXMsIGlucHV0LCB2YWx1ZSwgMSk7XG59XG5cbmZ1bmN0aW9uIHN1YnRyYWN0JDEoaW5wdXQsIHZhbHVlKSB7XG4gIHJldHVybiBhZGRTdWJ0cmFjdCQxKHRoaXMsIGlucHV0LCB2YWx1ZSwgLTEpO1xufVxuXG5mdW5jdGlvbiBhYnNDZWlsKG51bWJlcikge1xuICBpZiAobnVtYmVyIDwgMCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJ1YmJsZSgpIHtcbiAgdmFyIG1pbGxpc2Vjb25kcyA9IHRoaXMuX21pbGxpc2Vjb25kcyxcbiAgICAgIGRheXMgPSB0aGlzLl9kYXlzLFxuICAgICAgbW9udGhzID0gdGhpcy5fbW9udGhzLFxuICAgICAgZGF0YSA9IHRoaXMuX2RhdGEsXG4gICAgICBzZWNvbmRzLFxuICAgICAgbWludXRlcyxcbiAgICAgIGhvdXJzLFxuICAgICAgeWVhcnMsXG4gICAgICBtb250aHNGcm9tRGF5cztcblxuICBpZiAoIShtaWxsaXNlY29uZHMgPj0gMCAmJiBkYXlzID49IDAgJiYgbW9udGhzID49IDAgfHwgbWlsbGlzZWNvbmRzIDw9IDAgJiYgZGF5cyA8PSAwICYmIG1vbnRocyA8PSAwKSkge1xuICAgIG1pbGxpc2Vjb25kcyArPSBhYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHMpICsgZGF5cykgKiA4NjRlNTtcbiAgICBkYXlzID0gMDtcbiAgICBtb250aHMgPSAwO1xuICB9XG5cbiAgZGF0YS5taWxsaXNlY29uZHMgPSBtaWxsaXNlY29uZHMgJSAxMDAwO1xuICBzZWNvbmRzID0gYWJzRmxvb3IobWlsbGlzZWNvbmRzIC8gMTAwMCk7XG4gIGRhdGEuc2Vjb25kcyA9IHNlY29uZHMgJSA2MDtcbiAgbWludXRlcyA9IGFic0Zsb29yKHNlY29uZHMgLyA2MCk7XG4gIGRhdGEubWludXRlcyA9IG1pbnV0ZXMgJSA2MDtcbiAgaG91cnMgPSBhYnNGbG9vcihtaW51dGVzIC8gNjApO1xuICBkYXRhLmhvdXJzID0gaG91cnMgJSAyNDtcbiAgZGF5cyArPSBhYnNGbG9vcihob3VycyAvIDI0KTtcbiAgbW9udGhzRnJvbURheXMgPSBhYnNGbG9vcihkYXlzVG9Nb250aHMoZGF5cykpO1xuICBtb250aHMgKz0gbW9udGhzRnJvbURheXM7XG4gIGRheXMgLT0gYWJzQ2VpbChtb250aHNUb0RheXMobW9udGhzRnJvbURheXMpKTtcbiAgeWVhcnMgPSBhYnNGbG9vcihtb250aHMgLyAxMik7XG4gIG1vbnRocyAlPSAxMjtcbiAgZGF0YS5kYXlzID0gZGF5cztcbiAgZGF0YS5tb250aHMgPSBtb250aHM7XG4gIGRhdGEueWVhcnMgPSB5ZWFycztcbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGRheXNUb01vbnRocyhkYXlzKSB7XG4gIHJldHVybiBkYXlzICogNDgwMCAvIDE0NjA5Nztcbn1cblxuZnVuY3Rpb24gbW9udGhzVG9EYXlzKG1vbnRocykge1xuICByZXR1cm4gbW9udGhzICogMTQ2MDk3IC8gNDgwMDtcbn1cblxuZnVuY3Rpb24gYXModW5pdHMpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgZGF5cyxcbiAgICAgIG1vbnRocyxcbiAgICAgIG1pbGxpc2Vjb25kcyA9IHRoaXMuX21pbGxpc2Vjb25kcztcbiAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG5cbiAgaWYgKHVuaXRzID09PSAnbW9udGgnIHx8IHVuaXRzID09PSAncXVhcnRlcicgfHwgdW5pdHMgPT09ICd5ZWFyJykge1xuICAgIGRheXMgPSB0aGlzLl9kYXlzICsgbWlsbGlzZWNvbmRzIC8gODY0ZTU7XG4gICAgbW9udGhzID0gdGhpcy5fbW9udGhzICsgZGF5c1RvTW9udGhzKGRheXMpO1xuXG4gICAgc3dpdGNoICh1bml0cykge1xuICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICByZXR1cm4gbW9udGhzO1xuXG4gICAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgICAgcmV0dXJuIG1vbnRocyAvIDM7XG5cbiAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICByZXR1cm4gbW9udGhzIC8gMTI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRheXMgPSB0aGlzLl9kYXlzICsgTWF0aC5yb3VuZChtb250aHNUb0RheXModGhpcy5fbW9udGhzKSk7XG5cbiAgICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgcmV0dXJuIGRheXMgLyA3ICsgbWlsbGlzZWNvbmRzIC8gNjA0OGU1O1xuXG4gICAgICBjYXNlICdkYXknOlxuICAgICAgICByZXR1cm4gZGF5cyArIG1pbGxpc2Vjb25kcyAvIDg2NGU1O1xuXG4gICAgICBjYXNlICdob3VyJzpcbiAgICAgICAgcmV0dXJuIGRheXMgKiAyNCArIG1pbGxpc2Vjb25kcyAvIDM2ZTU7XG5cbiAgICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgICAgIHJldHVybiBkYXlzICogMTQ0MCArIG1pbGxpc2Vjb25kcyAvIDZlNDtcblxuICAgICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgICAgcmV0dXJuIGRheXMgKiA4NjQwMCArIG1pbGxpc2Vjb25kcyAvIDEwMDA7XG5cbiAgICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZGF5cyAqIDg2NGU1KSArIG1pbGxpc2Vjb25kcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHVuaXQgJyArIHVuaXRzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsdWVPZiQxKCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9taWxsaXNlY29uZHMgKyB0aGlzLl9kYXlzICogODY0ZTUgKyB0aGlzLl9tb250aHMgJSAxMiAqIDI1OTJlNiArIHRvSW50KHRoaXMuX21vbnRocyAvIDEyKSAqIDMxNTM2ZTY7XG59XG5cbmZ1bmN0aW9uIG1ha2VBcyhhbGlhcykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFzKGFsaWFzKTtcbiAgfTtcbn1cblxudmFyIGFzTWlsbGlzZWNvbmRzID0gbWFrZUFzKCdtcycpLFxuICAgIGFzU2Vjb25kcyA9IG1ha2VBcygncycpLFxuICAgIGFzTWludXRlcyA9IG1ha2VBcygnbScpLFxuICAgIGFzSG91cnMgPSBtYWtlQXMoJ2gnKSxcbiAgICBhc0RheXMgPSBtYWtlQXMoJ2QnKSxcbiAgICBhc1dlZWtzID0gbWFrZUFzKCd3JyksXG4gICAgYXNNb250aHMgPSBtYWtlQXMoJ00nKSxcbiAgICBhc1F1YXJ0ZXJzID0gbWFrZUFzKCdRJyksXG4gICAgYXNZZWFycyA9IG1ha2VBcygneScpO1xuXG5mdW5jdGlvbiBjbG9uZSQxKCkge1xuICByZXR1cm4gY3JlYXRlRHVyYXRpb24odGhpcyk7XG59XG5cbmZ1bmN0aW9uIGdldCQyKHVuaXRzKSB7XG4gIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzW3VuaXRzICsgJ3MnXSgpIDogTmFOO1xufVxuXG5mdW5jdGlvbiBtYWtlR2V0dGVyKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLl9kYXRhW25hbWVdIDogTmFOO1xuICB9O1xufVxuXG52YXIgbWlsbGlzZWNvbmRzID0gbWFrZUdldHRlcignbWlsbGlzZWNvbmRzJyksXG4gICAgc2Vjb25kcyA9IG1ha2VHZXR0ZXIoJ3NlY29uZHMnKSxcbiAgICBtaW51dGVzID0gbWFrZUdldHRlcignbWludXRlcycpLFxuICAgIGhvdXJzID0gbWFrZUdldHRlcignaG91cnMnKSxcbiAgICBkYXlzID0gbWFrZUdldHRlcignZGF5cycpLFxuICAgIG1vbnRocyA9IG1ha2VHZXR0ZXIoJ21vbnRocycpLFxuICAgIHllYXJzID0gbWFrZUdldHRlcigneWVhcnMnKTtcblxuZnVuY3Rpb24gd2Vla3MoKSB7XG4gIHJldHVybiBhYnNGbG9vcih0aGlzLmRheXMoKSAvIDcpO1xufVxuXG52YXIgcm91bmQgPSBNYXRoLnJvdW5kLFxuICAgIHRocmVzaG9sZHMgPSB7XG4gIHNzOiA0NCxcbiAgczogNDUsXG4gIG06IDQ1LFxuICBoOiAyMixcbiAgZDogMjYsXG4gIHc6IG51bGwsXG4gIE06IDExXG59O1xuXG5mdW5jdGlvbiBzdWJzdGl0dXRlVGltZUFnbyhzdHJpbmcsIG51bWJlciwgd2l0aG91dFN1ZmZpeCwgaXNGdXR1cmUsIGxvY2FsZSkge1xuICByZXR1cm4gbG9jYWxlLnJlbGF0aXZlVGltZShudW1iZXIgfHwgMSwgISF3aXRob3V0U3VmZml4LCBzdHJpbmcsIGlzRnV0dXJlKTtcbn1cblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lJDEocG9zTmVnRHVyYXRpb24sIHdpdGhvdXRTdWZmaXgsIHRocmVzaG9sZHMsIGxvY2FsZSkge1xuICB2YXIgZHVyYXRpb24gPSBjcmVhdGVEdXJhdGlvbihwb3NOZWdEdXJhdGlvbikuYWJzKCksXG4gICAgICBzZWNvbmRzID0gcm91bmQoZHVyYXRpb24uYXMoJ3MnKSksXG4gICAgICBtaW51dGVzID0gcm91bmQoZHVyYXRpb24uYXMoJ20nKSksXG4gICAgICBob3VycyA9IHJvdW5kKGR1cmF0aW9uLmFzKCdoJykpLFxuICAgICAgZGF5cyA9IHJvdW5kKGR1cmF0aW9uLmFzKCdkJykpLFxuICAgICAgbW9udGhzID0gcm91bmQoZHVyYXRpb24uYXMoJ00nKSksXG4gICAgICB3ZWVrcyA9IHJvdW5kKGR1cmF0aW9uLmFzKCd3JykpLFxuICAgICAgeWVhcnMgPSByb3VuZChkdXJhdGlvbi5hcygneScpKSxcbiAgICAgIGEgPSBzZWNvbmRzIDw9IHRocmVzaG9sZHMuc3MgJiYgWydzJywgc2Vjb25kc10gfHwgc2Vjb25kcyA8IHRocmVzaG9sZHMucyAmJiBbJ3NzJywgc2Vjb25kc10gfHwgbWludXRlcyA8PSAxICYmIFsnbSddIHx8IG1pbnV0ZXMgPCB0aHJlc2hvbGRzLm0gJiYgWydtbScsIG1pbnV0ZXNdIHx8IGhvdXJzIDw9IDEgJiYgWydoJ10gfHwgaG91cnMgPCB0aHJlc2hvbGRzLmggJiYgWydoaCcsIGhvdXJzXSB8fCBkYXlzIDw9IDEgJiYgWydkJ10gfHwgZGF5cyA8IHRocmVzaG9sZHMuZCAmJiBbJ2RkJywgZGF5c107XG5cbiAgaWYgKHRocmVzaG9sZHMudyAhPSBudWxsKSB7XG4gICAgYSA9IGEgfHwgd2Vla3MgPD0gMSAmJiBbJ3cnXSB8fCB3ZWVrcyA8IHRocmVzaG9sZHMudyAmJiBbJ3d3Jywgd2Vla3NdO1xuICB9XG5cbiAgYSA9IGEgfHwgbW9udGhzIDw9IDEgJiYgWydNJ10gfHwgbW9udGhzIDwgdGhyZXNob2xkcy5NICYmIFsnTU0nLCBtb250aHNdIHx8IHllYXJzIDw9IDEgJiYgWyd5J10gfHwgWyd5eScsIHllYXJzXTtcbiAgYVsyXSA9IHdpdGhvdXRTdWZmaXg7XG4gIGFbM10gPSArcG9zTmVnRHVyYXRpb24gPiAwO1xuICBhWzRdID0gbG9jYWxlO1xuICByZXR1cm4gc3Vic3RpdHV0ZVRpbWVBZ28uYXBwbHkobnVsbCwgYSk7XG59XG5cbmZ1bmN0aW9uIGdldFNldFJlbGF0aXZlVGltZVJvdW5kaW5nKHJvdW5kaW5nRnVuY3Rpb24pIHtcbiAgaWYgKHJvdW5kaW5nRnVuY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiByb3VuZDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygcm91bmRpbmdGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJvdW5kID0gcm91bmRpbmdGdW5jdGlvbjtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkKHRocmVzaG9sZCwgbGltaXQpIHtcbiAgaWYgKHRocmVzaG9sZHNbdGhyZXNob2xkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGxpbWl0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhyZXNob2xkc1t0aHJlc2hvbGRdO1xuICB9XG5cbiAgdGhyZXNob2xkc1t0aHJlc2hvbGRdID0gbGltaXQ7XG5cbiAgaWYgKHRocmVzaG9sZCA9PT0gJ3MnKSB7XG4gICAgdGhyZXNob2xkcy5zcyA9IGxpbWl0IC0gMTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBodW1hbml6ZShhcmdXaXRoU3VmZml4LCBhcmdUaHJlc2hvbGRzKSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgfVxuXG4gIHZhciB3aXRoU3VmZml4ID0gZmFsc2UsXG4gICAgICB0aCA9IHRocmVzaG9sZHMsXG4gICAgICBsb2NhbGUsXG4gICAgICBvdXRwdXQ7XG5cbiAgaWYgKHR5cGVvZiBhcmdXaXRoU3VmZml4ID09PSAnb2JqZWN0Jykge1xuICAgIGFyZ1RocmVzaG9sZHMgPSBhcmdXaXRoU3VmZml4O1xuICAgIGFyZ1dpdGhTdWZmaXggPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYXJnV2l0aFN1ZmZpeCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgd2l0aFN1ZmZpeCA9IGFyZ1dpdGhTdWZmaXg7XG4gIH1cblxuICBpZiAodHlwZW9mIGFyZ1RocmVzaG9sZHMgPT09ICdvYmplY3QnKSB7XG4gICAgdGggPSBPYmplY3QuYXNzaWduKHt9LCB0aHJlc2hvbGRzLCBhcmdUaHJlc2hvbGRzKTtcblxuICAgIGlmIChhcmdUaHJlc2hvbGRzLnMgIT0gbnVsbCAmJiBhcmdUaHJlc2hvbGRzLnNzID09IG51bGwpIHtcbiAgICAgIHRoLnNzID0gYXJnVGhyZXNob2xkcy5zIC0gMTtcbiAgICB9XG4gIH1cblxuICBsb2NhbGUgPSB0aGlzLmxvY2FsZURhdGEoKTtcbiAgb3V0cHV0ID0gcmVsYXRpdmVUaW1lJDEodGhpcywgIXdpdGhTdWZmaXgsIHRoLCBsb2NhbGUpO1xuXG4gIGlmICh3aXRoU3VmZml4KSB7XG4gICAgb3V0cHV0ID0gbG9jYWxlLnBhc3RGdXR1cmUoK3RoaXMsIG91dHB1dCk7XG4gIH1cblxuICByZXR1cm4gbG9jYWxlLnBvc3Rmb3JtYXQob3V0cHV0KTtcbn1cblxudmFyIGFicyQxID0gTWF0aC5hYnM7XG5cbmZ1bmN0aW9uIHNpZ24oeCkge1xuICByZXR1cm4gKHggPiAwKSAtICh4IDwgMCkgfHwgK3g7XG59XG5cbmZ1bmN0aW9uIHRvSVNPU3RyaW5nJDEoKSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgfVxuXG4gIHZhciBzZWNvbmRzID0gYWJzJDEodGhpcy5fbWlsbGlzZWNvbmRzKSAvIDEwMDAsXG4gICAgICBkYXlzID0gYWJzJDEodGhpcy5fZGF5cyksXG4gICAgICBtb250aHMgPSBhYnMkMSh0aGlzLl9tb250aHMpLFxuICAgICAgbWludXRlcyxcbiAgICAgIGhvdXJzLFxuICAgICAgeWVhcnMsXG4gICAgICBzLFxuICAgICAgdG90YWwgPSB0aGlzLmFzU2Vjb25kcygpLFxuICAgICAgdG90YWxTaWduLFxuICAgICAgeW1TaWduLFxuICAgICAgZGF5c1NpZ24sXG4gICAgICBobXNTaWduO1xuXG4gIGlmICghdG90YWwpIHtcbiAgICByZXR1cm4gJ1AwRCc7XG4gIH1cblxuICBtaW51dGVzID0gYWJzRmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgaG91cnMgPSBhYnNGbG9vcihtaW51dGVzIC8gNjApO1xuICBzZWNvbmRzICU9IDYwO1xuICBtaW51dGVzICU9IDYwO1xuICB5ZWFycyA9IGFic0Zsb29yKG1vbnRocyAvIDEyKTtcbiAgbW9udGhzICU9IDEyO1xuICBzID0gc2Vjb25kcyA/IHNlY29uZHMudG9GaXhlZCgzKS5yZXBsYWNlKC9cXC4/MCskLywgJycpIDogJyc7XG4gIHRvdGFsU2lnbiA9IHRvdGFsIDwgMCA/ICctJyA6ICcnO1xuICB5bVNpZ24gPSBzaWduKHRoaXMuX21vbnRocykgIT09IHNpZ24odG90YWwpID8gJy0nIDogJyc7XG4gIGRheXNTaWduID0gc2lnbih0aGlzLl9kYXlzKSAhPT0gc2lnbih0b3RhbCkgPyAnLScgOiAnJztcbiAgaG1zU2lnbiA9IHNpZ24odGhpcy5fbWlsbGlzZWNvbmRzKSAhPT0gc2lnbih0b3RhbCkgPyAnLScgOiAnJztcbiAgcmV0dXJuIHRvdGFsU2lnbiArICdQJyArICh5ZWFycyA/IHltU2lnbiArIHllYXJzICsgJ1knIDogJycpICsgKG1vbnRocyA/IHltU2lnbiArIG1vbnRocyArICdNJyA6ICcnKSArIChkYXlzID8gZGF5c1NpZ24gKyBkYXlzICsgJ0QnIDogJycpICsgKGhvdXJzIHx8IG1pbnV0ZXMgfHwgc2Vjb25kcyA/ICdUJyA6ICcnKSArIChob3VycyA/IGhtc1NpZ24gKyBob3VycyArICdIJyA6ICcnKSArIChtaW51dGVzID8gaG1zU2lnbiArIG1pbnV0ZXMgKyAnTScgOiAnJykgKyAoc2Vjb25kcyA/IGhtc1NpZ24gKyBzICsgJ1MnIDogJycpO1xufVxuXG52YXIgcHJvdG8kMiA9IER1cmF0aW9uLnByb3RvdHlwZTtcbnByb3RvJDIuaXNWYWxpZCA9IGlzVmFsaWQkMTtcbnByb3RvJDIuYWJzID0gYWJzO1xucHJvdG8kMi5hZGQgPSBhZGQkMTtcbnByb3RvJDIuc3VidHJhY3QgPSBzdWJ0cmFjdCQxO1xucHJvdG8kMi5hcyA9IGFzO1xucHJvdG8kMi5hc01pbGxpc2Vjb25kcyA9IGFzTWlsbGlzZWNvbmRzO1xucHJvdG8kMi5hc1NlY29uZHMgPSBhc1NlY29uZHM7XG5wcm90byQyLmFzTWludXRlcyA9IGFzTWludXRlcztcbnByb3RvJDIuYXNIb3VycyA9IGFzSG91cnM7XG5wcm90byQyLmFzRGF5cyA9IGFzRGF5cztcbnByb3RvJDIuYXNXZWVrcyA9IGFzV2Vla3M7XG5wcm90byQyLmFzTW9udGhzID0gYXNNb250aHM7XG5wcm90byQyLmFzUXVhcnRlcnMgPSBhc1F1YXJ0ZXJzO1xucHJvdG8kMi5hc1llYXJzID0gYXNZZWFycztcbnByb3RvJDIudmFsdWVPZiA9IHZhbHVlT2YkMTtcbnByb3RvJDIuX2J1YmJsZSA9IGJ1YmJsZTtcbnByb3RvJDIuY2xvbmUgPSBjbG9uZSQxO1xucHJvdG8kMi5nZXQgPSBnZXQkMjtcbnByb3RvJDIubWlsbGlzZWNvbmRzID0gbWlsbGlzZWNvbmRzO1xucHJvdG8kMi5zZWNvbmRzID0gc2Vjb25kcztcbnByb3RvJDIubWludXRlcyA9IG1pbnV0ZXM7XG5wcm90byQyLmhvdXJzID0gaG91cnM7XG5wcm90byQyLmRheXMgPSBkYXlzO1xucHJvdG8kMi53ZWVrcyA9IHdlZWtzO1xucHJvdG8kMi5tb250aHMgPSBtb250aHM7XG5wcm90byQyLnllYXJzID0geWVhcnM7XG5wcm90byQyLmh1bWFuaXplID0gaHVtYW5pemU7XG5wcm90byQyLnRvSVNPU3RyaW5nID0gdG9JU09TdHJpbmckMTtcbnByb3RvJDIudG9TdHJpbmcgPSB0b0lTT1N0cmluZyQxO1xucHJvdG8kMi50b0pTT04gPSB0b0lTT1N0cmluZyQxO1xucHJvdG8kMi5sb2NhbGUgPSBsb2NhbGU7XG5wcm90byQyLmxvY2FsZURhdGEgPSBsb2NhbGVEYXRhO1xucHJvdG8kMi50b0lzb1N0cmluZyA9IGRlcHJlY2F0ZSgndG9Jc29TdHJpbmcoKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRvSVNPU3RyaW5nKCkgaW5zdGVhZCAobm90aWNlIHRoZSBjYXBpdGFscyknLCB0b0lTT1N0cmluZyQxKTtcbnByb3RvJDIubGFuZyA9IGxhbmc7XG5hZGRGb3JtYXRUb2tlbignWCcsIDAsIDAsICd1bml4Jyk7XG5hZGRGb3JtYXRUb2tlbigneCcsIDAsIDAsICd2YWx1ZU9mJyk7XG5hZGRSZWdleFRva2VuKCd4JywgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignWCcsIG1hdGNoVGltZXN0YW1wKTtcbmFkZFBhcnNlVG9rZW4oJ1gnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgY29uZmlnLl9kID0gbmV3IERhdGUocGFyc2VGbG9hdChpbnB1dCkgKiAxMDAwKTtcbn0pO1xuYWRkUGFyc2VUb2tlbigneCcsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICBjb25maWcuX2QgPSBuZXcgRGF0ZSh0b0ludChpbnB1dCkpO1xufSk7XG5ob29rcy52ZXJzaW9uID0gJzIuMjkuMSc7XG5zZXRIb29rQ2FsbGJhY2soY3JlYXRlTG9jYWwpO1xuaG9va3MuZm4gPSBwcm90bztcbmhvb2tzLm1pbiA9IG1pbjtcbmhvb2tzLm1heCA9IG1heDtcbmhvb2tzLm5vdyA9IG5vdztcbmhvb2tzLnV0YyA9IGNyZWF0ZVVUQztcbmhvb2tzLnVuaXggPSBjcmVhdGVVbml4O1xuaG9va3MubW9udGhzID0gbGlzdE1vbnRocztcbmhvb2tzLmlzRGF0ZSA9IGlzRGF0ZTtcbmhvb2tzLmxvY2FsZSA9IGdldFNldEdsb2JhbExvY2FsZTtcbmhvb2tzLmludmFsaWQgPSBjcmVhdGVJbnZhbGlkO1xuaG9va3MuZHVyYXRpb24gPSBjcmVhdGVEdXJhdGlvbjtcbmhvb2tzLmlzTW9tZW50ID0gaXNNb21lbnQ7XG5ob29rcy53ZWVrZGF5cyA9IGxpc3RXZWVrZGF5cztcbmhvb2tzLnBhcnNlWm9uZSA9IGNyZWF0ZUluWm9uZTtcbmhvb2tzLmxvY2FsZURhdGEgPSBnZXRMb2NhbGU7XG5ob29rcy5pc0R1cmF0aW9uID0gaXNEdXJhdGlvbjtcbmhvb2tzLm1vbnRoc1Nob3J0ID0gbGlzdE1vbnRoc1Nob3J0O1xuaG9va3Mud2Vla2RheXNNaW4gPSBsaXN0V2Vla2RheXNNaW47XG5ob29rcy5kZWZpbmVMb2NhbGUgPSBkZWZpbmVMb2NhbGU7XG5ob29rcy51cGRhdGVMb2NhbGUgPSB1cGRhdGVMb2NhbGU7XG5ob29rcy5sb2NhbGVzID0gbGlzdExvY2FsZXM7XG5ob29rcy53ZWVrZGF5c1Nob3J0ID0gbGlzdFdlZWtkYXlzU2hvcnQ7XG5ob29rcy5ub3JtYWxpemVVbml0cyA9IG5vcm1hbGl6ZVVuaXRzO1xuaG9va3MucmVsYXRpdmVUaW1lUm91bmRpbmcgPSBnZXRTZXRSZWxhdGl2ZVRpbWVSb3VuZGluZztcbmhvb2tzLnJlbGF0aXZlVGltZVRocmVzaG9sZCA9IGdldFNldFJlbGF0aXZlVGltZVRocmVzaG9sZDtcbmhvb2tzLmNhbGVuZGFyRm9ybWF0ID0gZ2V0Q2FsZW5kYXJGb3JtYXQ7XG5ob29rcy5wcm90b3R5cGUgPSBwcm90bztcbmhvb2tzLkhUTUw1X0ZNVCA9IHtcbiAgREFURVRJTUVfTE9DQUw6ICdZWVlZLU1NLUREVEhIOm1tJyxcbiAgREFURVRJTUVfTE9DQUxfU0VDT05EUzogJ1lZWVktTU0tRERUSEg6bW06c3MnLFxuICBEQVRFVElNRV9MT0NBTF9NUzogJ1lZWVktTU0tRERUSEg6bW06c3MuU1NTJyxcbiAgREFURTogJ1lZWVktTU0tREQnLFxuICBUSU1FOiAnSEg6bW0nLFxuICBUSU1FX1NFQ09ORFM6ICdISDptbTpzcycsXG4gIFRJTUVfTVM6ICdISDptbTpzcy5TU1MnLFxuICBXRUVLOiAnR0dHRy1bV11XVycsXG4gIE1PTlRIOiAnWVlZWS1NTSdcbn07XG5leHBvcnQgZGVmYXVsdCBob29rczsiLCJmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbmltcG9ydCB7IHVuQnlLZXkgYXMgb2xPYnNlcnZhYmxlVW5CeUtleSB9IGZyb20gJ29sL09ic2VydmFibGUuanMnO1xuaW1wb3J0IG9sTGF5ZXJHcm91cCBmcm9tICdvbC9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQgeyBvbGNzTGlzdGVuLCBnZXRVaWQgfSBmcm9tICcuL3V0aWwuanMnO1xuXG52YXIgQWJzdHJhY3RTeW5jaHJvbml6ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFic3RyYWN0U3luY2hyb25pemVyKG1hcCwgc2NlbmUpIHtcbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICB0aGlzLnZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLm9sTGF5ZXJzID0gbWFwLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICB0aGlzLm1hcExheWVyR3JvdXAgPSBtYXAuZ2V0TGF5ZXJHcm91cCgpO1xuICAgIHRoaXMubGF5ZXJNYXAgPSB7fTtcbiAgICB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzID0ge307XG4gICAgdGhpcy5vbEdyb3VwTGlzdGVuS2V5c18gPSB7fTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBBYnN0cmFjdFN5bmNocm9uaXplci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnN5bmNocm9uaXplID0gZnVuY3Rpb24gc3luY2hyb25pemUoKSB7XG4gICAgdGhpcy5kZXN0cm95QWxsKCk7XG4gICAgdGhpcy5hZGRMYXllcnNfKHRoaXMubWFwTGF5ZXJHcm91cCk7XG4gIH07XG5cbiAgX3Byb3RvLm9yZGVyTGF5ZXJzID0gZnVuY3Rpb24gb3JkZXJMYXllcnMoKSB7fTtcblxuICBfcHJvdG8uYWRkTGF5ZXJzXyA9IGZ1bmN0aW9uIGFkZExheWVyc18ocm9vdCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgZmlmbyA9IFt7XG4gICAgICBsYXllcjogcm9vdCxcbiAgICAgIHBhcmVudHM6IFtdXG4gICAgfV07XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHtcbiAgICAgIHZhciBvbExheWVyV2l0aFBhcmVudHMgPSBmaWZvLnNwbGljZSgwLCAxKVswXTtcbiAgICAgIHZhciBvbExheWVyID0gb2xMYXllcldpdGhQYXJlbnRzLmxheWVyO1xuICAgICAgdmFyIG9sTGF5ZXJJZCA9IGdldFVpZChvbExheWVyKS50b1N0cmluZygpO1xuICAgICAgX3RoaXMub2xMYXllckxpc3RlbktleXNbb2xMYXllcklkXSA9IFtdO1xuICAgICAgY29uc29sZS5hc3NlcnQoIV90aGlzLmxheWVyTWFwW29sTGF5ZXJJZF0pO1xuICAgICAgdmFyIGNlc2l1bU9iamVjdHMgPSBudWxsO1xuXG4gICAgICBpZiAob2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cCkge1xuICAgICAgICBfdGhpcy5saXN0ZW5Gb3JHcm91cENoYW5nZXNfKG9sTGF5ZXIpO1xuXG4gICAgICAgIGlmIChvbExheWVyICE9PSBfdGhpcy5tYXBMYXllckdyb3VwKSB7XG4gICAgICAgICAgY2VzaXVtT2JqZWN0cyA9IF90aGlzLmNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzKG9sTGF5ZXJXaXRoUGFyZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNlc2l1bU9iamVjdHMpIHtcbiAgICAgICAgICBvbExheWVyLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICAgIHZhciBuZXdPbExheWVyV2l0aFBhcmVudHMgPSB7XG4gICAgICAgICAgICAgICAgbGF5ZXI6IGwsXG4gICAgICAgICAgICAgICAgcGFyZW50czogb2xMYXllciA9PT0gX3RoaXMubWFwTGF5ZXJHcm91cCA/IFtdIDogW29sTGF5ZXJXaXRoUGFyZW50cy5sYXllcl0uY29uY2F0KG9sTGF5ZXJXaXRoUGFyZW50cy5wYXJlbnRzKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBmaWZvLnB1c2gobmV3T2xMYXllcldpdGhQYXJlbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2VzaXVtT2JqZWN0cyA9IF90aGlzLmNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzKG9sTGF5ZXJXaXRoUGFyZW50cyk7XG5cbiAgICAgICAgaWYgKCFjZXNpdW1PYmplY3RzKSB7XG4gICAgICAgICAgdmFyIGxheWVySWQgPSBvbExheWVySWQ7XG4gICAgICAgICAgdmFyIGxheWVyV2l0aFBhcmVudHMgPSBvbExheWVyV2l0aFBhcmVudHM7XG5cbiAgICAgICAgICB2YXIgb25MYXllckNoYW5nZSA9IGZ1bmN0aW9uIG9uTGF5ZXJDaGFuZ2UoZSkge1xuICAgICAgICAgICAgdmFyIGNlc2l1bU9ianMgPSBfdGhpcy5jcmVhdGVTaW5nbGVMYXllckNvdW50ZXJwYXJ0cyhsYXllcldpdGhQYXJlbnRzKTtcblxuICAgICAgICAgICAgaWYgKGNlc2l1bU9ianMpIHtcbiAgICAgICAgICAgICAgbGF5ZXJXaXRoUGFyZW50cy5sYXllci51bignY2hhbmdlJywgb25MYXllckNoYW5nZSk7XG5cbiAgICAgICAgICAgICAgX3RoaXMuYWRkQ2VzaXVtT2JqZWN0c18oY2VzaXVtT2JqcywgbGF5ZXJJZCwgbGF5ZXJXaXRoUGFyZW50cy5sYXllcik7XG5cbiAgICAgICAgICAgICAgX3RoaXMub3JkZXJMYXllcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgX3RoaXMub2xMYXllckxpc3RlbktleXNbb2xMYXllcklkXS5wdXNoKG9sY3NMaXN0ZW4obGF5ZXJXaXRoUGFyZW50cy5sYXllciwgJ2NoYW5nZScsIG9uTGF5ZXJDaGFuZ2UpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2VzaXVtT2JqZWN0cykge1xuICAgICAgICBfdGhpcy5hZGRDZXNpdW1PYmplY3RzXyhjZXNpdW1PYmplY3RzLCBvbExheWVySWQsIG9sTGF5ZXIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aGlsZSAoZmlmby5sZW5ndGggPiAwKSB7XG4gICAgICBfbG9vcCgpO1xuICAgIH1cblxuICAgIHRoaXMub3JkZXJMYXllcnMoKTtcbiAgfTtcblxuICBfcHJvdG8uYWRkQ2VzaXVtT2JqZWN0c18gPSBmdW5jdGlvbiBhZGRDZXNpdW1PYmplY3RzXyhjZXNpdW1PYmplY3RzLCBsYXllcklkLCBsYXllcikge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdGhpcy5sYXllck1hcFtsYXllcklkXSA9IGNlc2l1bU9iamVjdHM7XG4gICAgdGhpcy5vbExheWVyTGlzdGVuS2V5c1tsYXllcklkXS5wdXNoKG9sY3NMaXN0ZW4obGF5ZXIsICdjaGFuZ2U6ekluZGV4JywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzMi5vcmRlckxheWVycygpO1xuICAgIH0pKTtcbiAgICBjZXNpdW1PYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKGNlc2l1bU9iamVjdCkge1xuICAgICAgX3RoaXMyLmFkZENlc2l1bU9iamVjdChjZXNpdW1PYmplY3QpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVBbmREZXN0cm95U2luZ2xlTGF5ZXJfID0gZnVuY3Rpb24gcmVtb3ZlQW5kRGVzdHJveVNpbmdsZUxheWVyXyhsYXllcikge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIHVpZCA9IGdldFVpZChsYXllcikudG9TdHJpbmcoKTtcbiAgICB2YXIgY291bnRlcnBhcnRzID0gdGhpcy5sYXllck1hcFt1aWRdO1xuXG4gICAgaWYgKCEhY291bnRlcnBhcnRzKSB7XG4gICAgICBjb3VudGVycGFydHMuZm9yRWFjaChmdW5jdGlvbiAoY291bnRlcnBhcnQpIHtcbiAgICAgICAgX3RoaXMzLnJlbW92ZVNpbmdsZUNlc2l1bU9iamVjdChjb3VudGVycGFydCwgZmFsc2UpO1xuXG4gICAgICAgIF90aGlzMy5kZXN0cm95Q2VzaXVtT2JqZWN0KGNvdW50ZXJwYXJ0KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbExheWVyTGlzdGVuS2V5c1t1aWRdLmZvckVhY2gob2xPYnNlcnZhYmxlVW5CeUtleSk7XG4gICAgICBkZWxldGUgdGhpcy5vbExheWVyTGlzdGVuS2V5c1t1aWRdO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLmxheWVyTWFwW3VpZF07XG4gICAgcmV0dXJuICEhY291bnRlcnBhcnRzO1xuICB9O1xuXG4gIF9wcm90by51bmxpc3RlblNpbmdsZUdyb3VwXyA9IGZ1bmN0aW9uIHVubGlzdGVuU2luZ2xlR3JvdXBfKGdyb3VwKSB7XG4gICAgaWYgKGdyb3VwID09PSB0aGlzLm1hcExheWVyR3JvdXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdWlkID0gZ2V0VWlkKGdyb3VwKS50b1N0cmluZygpO1xuICAgIHZhciBrZXlzID0gdGhpcy5vbEdyb3VwTGlzdGVuS2V5c19bdWlkXTtcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgb2xPYnNlcnZhYmxlVW5CeUtleShrZXkpO1xuICAgIH0pO1xuICAgIGRlbGV0ZSB0aGlzLm9sR3JvdXBMaXN0ZW5LZXlzX1t1aWRdO1xuICAgIGRlbGV0ZSB0aGlzLmxheWVyTWFwW3VpZF07XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZUxheWVyXyA9IGZ1bmN0aW9uIHJlbW92ZUxheWVyXyhyb290KSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBpZiAoISFyb290KSB7XG4gICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlmbyA9IFtyb290XTtcblxuICAgICAgICB3aGlsZSAoZmlmby5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIG9sTGF5ZXIgPSBmaWZvLnNwbGljZSgwLCAxKVswXTtcblxuICAgICAgICAgIHZhciBkb25lID0gX3RoaXM0LnJlbW92ZUFuZERlc3Ryb3lTaW5nbGVMYXllcl8ob2xMYXllcik7XG5cbiAgICAgICAgICBpZiAob2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgX3RoaXM0LnVubGlzdGVuU2luZ2xlR3JvdXBfKG9sTGF5ZXIpO1xuXG4gICAgICAgICAgICBpZiAoIWRvbmUpIHtcbiAgICAgICAgICAgICAgb2xMYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgZmlmby5wdXNoKGwpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5saXN0ZW5Gb3JHcm91cENoYW5nZXNfID0gZnVuY3Rpb24gbGlzdGVuRm9yR3JvdXBDaGFuZ2VzXyhncm91cCkge1xuICAgIHZhciB1dWlkID0gZ2V0VWlkKGdyb3VwKS50b1N0cmluZygpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMub2xHcm91cExpc3RlbktleXNfW3V1aWRdID09PSB1bmRlZmluZWQpO1xuICAgIHZhciBsaXN0ZW5LZXlBcnJheSA9IFtdO1xuICAgIHRoaXMub2xHcm91cExpc3RlbktleXNfW3V1aWRdID0gbGlzdGVuS2V5QXJyYXk7XG4gICAgdmFyIGNvbnRlbnRLZXlzID0gW107XG5cbiAgICB2YXIgbGlzdGVuQWRkUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHZhciBjb2xsZWN0aW9uID0gZ3JvdXAuZ2V0TGF5ZXJzKCk7XG5cbiAgICAgIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgICAgIGNvbnRlbnRLZXlzID0gW2NvbGxlY3Rpb24ub24oJ2FkZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIF90aGlzNS5hZGRMYXllcnNfKGV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB9KSwgY29sbGVjdGlvbi5vbigncmVtb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgX3RoaXM1LnJlbW92ZUxheWVyXyhldmVudC5lbGVtZW50KTtcbiAgICAgICAgfSldO1xuICAgICAgICBsaXN0ZW5LZXlBcnJheS5wdXNoLmFwcGx5KGxpc3RlbktleUFycmF5LCBfdG9Db25zdW1hYmxlQXJyYXkoY29udGVudEtleXMpKTtcbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBsaXN0ZW5BZGRSZW1vdmUoKTtcbiAgICBsaXN0ZW5LZXlBcnJheS5wdXNoKGdyb3VwLm9uKCdjaGFuZ2U6bGF5ZXJzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnRlbnRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHZhciBpID0gbGlzdGVuS2V5QXJyYXkuaW5kZXhPZihlbCk7XG5cbiAgICAgICAgaWYgKGkgPj0gMCkge1xuICAgICAgICAgIGxpc3RlbktleUFycmF5LnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9sT2JzZXJ2YWJsZVVuQnlLZXkoZWwpO1xuICAgICAgfSk7XG4gICAgICBsaXN0ZW5BZGRSZW1vdmUoKTtcbiAgICB9KSk7XG4gIH07XG5cbiAgX3Byb3RvLmRlc3Ryb3lBbGwgPSBmdW5jdGlvbiBkZXN0cm95QWxsKCkge1xuICAgIHRoaXMucmVtb3ZlQWxsQ2VzaXVtT2JqZWN0cyh0cnVlKTtcbiAgICB2YXIgb2JqS2V5O1xuXG4gICAgZm9yIChvYmpLZXkgaW4gdGhpcy5vbEdyb3VwTGlzdGVuS2V5c18pIHtcbiAgICAgIHZhciBrZXlzID0gdGhpcy5vbEdyb3VwTGlzdGVuS2V5c19bb2JqS2V5XTtcbiAgICAgIGtleXMuZm9yRWFjaChvbE9ic2VydmFibGVVbkJ5S2V5KTtcbiAgICB9XG5cbiAgICBmb3IgKG9iaktleSBpbiB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzKSB7XG4gICAgICB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzW29iaktleV0uZm9yRWFjaChvbE9ic2VydmFibGVVbkJ5S2V5KTtcbiAgICB9XG5cbiAgICB0aGlzLm9sR3JvdXBMaXN0ZW5LZXlzXyA9IHt9O1xuICAgIHRoaXMub2xMYXllckxpc3RlbktleXMgPSB7fTtcbiAgICB0aGlzLmxheWVyTWFwID0ge307XG4gIH07XG5cbiAgX3Byb3RvLmFkZENlc2l1bU9iamVjdCA9IGZ1bmN0aW9uIGFkZENlc2l1bU9iamVjdChvYmplY3QpIHt9O1xuXG4gIF9wcm90by5kZXN0cm95Q2VzaXVtT2JqZWN0ID0gZnVuY3Rpb24gZGVzdHJveUNlc2l1bU9iamVjdChvYmplY3QpIHt9O1xuXG4gIF9wcm90by5yZW1vdmVTaW5nbGVDZXNpdW1PYmplY3QgPSBmdW5jdGlvbiByZW1vdmVTaW5nbGVDZXNpdW1PYmplY3Qob2JqZWN0LCBkZXN0cm95KSB7fTtcblxuICBfcHJvdG8ucmVtb3ZlQWxsQ2VzaXVtT2JqZWN0cyA9IGZ1bmN0aW9uIHJlbW92ZUFsbENlc2l1bU9iamVjdHMoZGVzdHJveSkge307XG5cbiAgX3Byb3RvLmNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzID0gZnVuY3Rpb24gY3JlYXRlU2luZ2xlTGF5ZXJDb3VudGVycGFydHMob2xMYXllcldpdGhQYXJlbnRzKSB7fTtcblxuICByZXR1cm4gQWJzdHJhY3RTeW5jaHJvbml6ZXI7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IEFic3RyYWN0U3luY2hyb25pemVyOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0O1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgaWYgKGl0KSBvID0gaXQ7XG4gICAgICB2YXIgaSA9IDA7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHtcbiAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IG9baSsrXVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG4gIH1cblxuICBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpO1xuICByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTtcbn1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbnZhciBBdXRvUmVuZGVyTG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQXV0b1JlbmRlckxvb3Aob2wzZCkge1xuICAgIHRoaXMub2wzZCA9IG9sM2Q7XG4gICAgdGhpcy5zY2VuZV8gPSBvbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgdGhpcy5jYW52YXNfID0gdGhpcy5zY2VuZV8uY2FudmFzO1xuICAgIHRoaXMuX2JvdW5kTm90aWZ5UmVwYWludFJlcXVpcmVkID0gdGhpcy5ub3RpZnlSZXBhaW50UmVxdWlyZWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlcGFpbnRFdmVudE5hbWVzXyA9IFsnbW91c2Vtb3ZlJywgJ21vdXNlZG93bicsICdtb3VzZXVwJywgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnLCAndG91Y2htb3ZlJywgJ3BvaW50ZXJkb3duJywgJ3BvaW50ZXJ1cCcsICdwb2ludGVybW92ZScsICd3aGVlbCddO1xuICAgIHRoaXMuZW5hYmxlKCk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQXV0b1JlbmRlckxvb3AucHJvdG90eXBlO1xuXG4gIF9wcm90by5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgdGhpcy5zY2VuZV8ucmVxdWVzdFJlbmRlck1vZGUgPSB0cnVlO1xuICAgIHRoaXMuc2NlbmVfLm1heGltdW1SZW5kZXJUaW1lQ2hhbmdlID0gMTAwMDtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5yZXBhaW50RXZlbnROYW1lc18pLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIHJlcGFpbnRLZXkgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHRoaXMuY2FudmFzXy5hZGRFdmVudExpc3RlbmVyKHJlcGFpbnRLZXksIHRoaXMuX2JvdW5kTm90aWZ5UmVwYWludFJlcXVpcmVkLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2JvdW5kTm90aWZ5UmVwYWludFJlcXVpcmVkLCBmYWxzZSk7XG4gICAgdGhpcy5vbDNkLmdldE9sTWFwKCkuZ2V0TGF5ZXJHcm91cCgpLm9uKCdjaGFuZ2UnLCB0aGlzLl9ib3VuZE5vdGlmeVJlcGFpbnRSZXF1aXJlZCk7XG4gIH07XG5cbiAgX3Byb3RvLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMucmVwYWludEV2ZW50TmFtZXNfKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgIHZhciByZXBhaW50S2V5ID0gX3N0ZXAyLnZhbHVlO1xuICAgICAgdGhpcy5jYW52YXNfLnJlbW92ZUV2ZW50TGlzdGVuZXIocmVwYWludEtleSwgdGhpcy5fYm91bmROb3RpZnlSZXBhaW50UmVxdWlyZWQsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fYm91bmROb3RpZnlSZXBhaW50UmVxdWlyZWQsIGZhbHNlKTtcbiAgICB0aGlzLm9sM2QuZ2V0T2xNYXAoKS5nZXRMYXllckdyb3VwKCkudW4oJ2NoYW5nZScsIHRoaXMuX2JvdW5kTm90aWZ5UmVwYWludFJlcXVpcmVkKTtcbiAgICB0aGlzLnNjZW5lXy5yZXF1ZXN0UmVuZGVyTW9kZSA9IGZhbHNlO1xuICB9O1xuXG4gIF9wcm90by5yZXN0YXJ0UmVuZGVyTG9vcCA9IGZ1bmN0aW9uIHJlc3RhcnRSZW5kZXJMb29wKCkge1xuICAgIHRoaXMubm90aWZ5UmVwYWludFJlcXVpcmVkKCk7XG4gIH07XG5cbiAgX3Byb3RvLm5vdGlmeVJlcGFpbnRSZXF1aXJlZCA9IGZ1bmN0aW9uIG5vdGlmeVJlcGFpbnRSZXF1aXJlZCgpIHtcbiAgICB0aGlzLnNjZW5lXy5yZXF1ZXN0UmVuZGVyKCk7XG4gIH07XG5cbiAgcmV0dXJuIEF1dG9SZW5kZXJMb29wO1xufSgpO1xuXG5leHBvcnQgZGVmYXVsdCBBdXRvUmVuZGVyTG9vcDsiLCJpbXBvcnQgeyB1bkJ5S2V5IGFzIG9sT2JzZXJ2YWJsZVVuQnlLZXkgfSBmcm9tICdvbC9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCB7IHRvUmFkaWFucywgdG9EZWdyZWVzIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGdldFRyYW5zZm9ybSB9IGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0IG9sY3NDb3JlIGZyb20gJy4vY29yZS5qcyc7XG5cbnZhciBDYW1lcmEgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENhbWVyYShzY2VuZSwgbWFwKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMuc2NlbmVfID0gc2NlbmU7XG4gICAgdGhpcy5jYW1fID0gc2NlbmUuY2FtZXJhO1xuICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICB0aGlzLnZpZXdfID0gbnVsbDtcbiAgICB0aGlzLnZpZXdMaXN0ZW5LZXlfID0gbnVsbDtcbiAgICB0aGlzLnRvTG9uTGF0XyA9IENhbWVyYS5pZGVudGl0eVByb2plY3Rpb247XG4gICAgdGhpcy5mcm9tTG9uTGF0XyA9IENhbWVyYS5pZGVudGl0eVByb2plY3Rpb247XG4gICAgdGhpcy50aWx0XyA9IDA7XG4gICAgdGhpcy5kaXN0YW5jZV8gPSAwO1xuICAgIHRoaXMubGFzdENhbWVyYVZpZXdNYXRyaXhfID0gbnVsbDtcbiAgICB0aGlzLnZpZXdVcGRhdGVJblByb2dyZXNzXyA9IGZhbHNlO1xuICAgIHRoaXMubWFwXy5vbignY2hhbmdlOnZpZXcnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMuc2V0Vmlld18oX3RoaXMubWFwXy5nZXRWaWV3KCkpO1xuICAgIH0pO1xuICAgIHRoaXMuc2V0Vmlld18odGhpcy5tYXBfLmdldFZpZXcoKSk7XG4gIH1cblxuICBDYW1lcmEuaWRlbnRpdHlQcm9qZWN0aW9uID0gZnVuY3Rpb24gaWRlbnRpdHlQcm9qZWN0aW9uKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIGRpbSA9IG9wdF9kaW1lbnNpb24gfHwgaW5wdXQubGVuZ3RoO1xuXG4gICAgaWYgKG9wdF9vdXRwdXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltOyArK2kpIHtcbiAgICAgICAgb3B0X291dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbnB1dDtcbiAgfTtcblxuICB2YXIgX3Byb3RvID0gQ2FtZXJhLnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0Vmlld18gPSBmdW5jdGlvbiBzZXRWaWV3Xyh2aWV3KSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy52aWV3Xykge1xuICAgICAgb2xPYnNlcnZhYmxlVW5CeUtleSh0aGlzLnZpZXdMaXN0ZW5LZXlfKTtcbiAgICAgIHRoaXMudmlld0xpc3RlbktleV8gPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMudmlld18gPSB2aWV3O1xuXG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIHZhciB0b0xvbkxhdCA9IGdldFRyYW5zZm9ybSh2aWV3LmdldFByb2plY3Rpb24oKSwgJ0VQU0c6NDMyNicpO1xuICAgICAgdmFyIGZyb21Mb25MYXQgPSBnZXRUcmFuc2Zvcm0oJ0VQU0c6NDMyNicsIHZpZXcuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KHRvTG9uTGF0ICYmIGZyb21Mb25MYXQpO1xuICAgICAgdGhpcy50b0xvbkxhdF8gPSB0b0xvbkxhdDtcbiAgICAgIHRoaXMuZnJvbUxvbkxhdF8gPSBmcm9tTG9uTGF0O1xuICAgICAgdGhpcy52aWV3TGlzdGVuS2V5XyA9IHZpZXcub24oJ3Byb3BlcnR5Y2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5oYW5kbGVWaWV3RXZlbnRfKGUpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnJlYWRGcm9tVmlldygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRvTG9uTGF0XyA9IENhbWVyYS5pZGVudGl0eVByb2plY3Rpb247XG4gICAgICB0aGlzLmZyb21Mb25MYXRfID0gQ2FtZXJhLmlkZW50aXR5UHJvamVjdGlvbjtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVZpZXdFdmVudF8gPSBmdW5jdGlvbiBoYW5kbGVWaWV3RXZlbnRfKGUpIHtcbiAgICBpZiAoIXRoaXMudmlld1VwZGF0ZUluUHJvZ3Jlc3NfKSB7XG4gICAgICB0aGlzLnJlYWRGcm9tVmlldygpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2V0SGVhZGluZyA9IGZ1bmN0aW9uIHNldEhlYWRpbmcoaGVhZGluZykge1xuICAgIGlmICghdGhpcy52aWV3Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudmlld18uc2V0Um90YXRpb24oaGVhZGluZyk7XG4gIH07XG5cbiAgX3Byb3RvLmdldEhlYWRpbmcgPSBmdW5jdGlvbiBnZXRIZWFkaW5nKCkge1xuICAgIGlmICghdGhpcy52aWV3Xykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLnZpZXdfLmdldFJvdGF0aW9uKCk7XG4gICAgcmV0dXJuIHJvdGF0aW9uIHx8IDA7XG4gIH07XG5cbiAgX3Byb3RvLnNldFRpbHQgPSBmdW5jdGlvbiBzZXRUaWx0KHRpbHQpIHtcbiAgICB0aGlzLnRpbHRfID0gdGlsdDtcbiAgICB0aGlzLnVwZGF0ZUNhbWVyYV8oKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0VGlsdCA9IGZ1bmN0aW9uIGdldFRpbHQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsdF87XG4gIH07XG5cbiAgX3Byb3RvLnNldERpc3RhbmNlID0gZnVuY3Rpb24gc2V0RGlzdGFuY2UoZGlzdGFuY2UpIHtcbiAgICB0aGlzLmRpc3RhbmNlXyA9IGRpc3RhbmNlO1xuICAgIHRoaXMudXBkYXRlQ2FtZXJhXygpO1xuICAgIHRoaXMudXBkYXRlVmlldygpO1xuICB9O1xuXG4gIF9wcm90by5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uIGdldERpc3RhbmNlKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3RhbmNlXztcbiAgfTtcblxuICBfcHJvdG8uc2V0Q2VudGVyID0gZnVuY3Rpb24gc2V0Q2VudGVyKGNlbnRlcikge1xuICAgIGlmICghdGhpcy52aWV3Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudmlld18uc2V0Q2VudGVyKGNlbnRlcik7XG4gIH07XG5cbiAgX3Byb3RvLmdldENlbnRlciA9IGZ1bmN0aW9uIGdldENlbnRlcigpIHtcbiAgICBpZiAoIXRoaXMudmlld18pIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudmlld18uZ2V0Q2VudGVyKCk7XG4gIH07XG5cbiAgX3Byb3RvLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gc2V0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICBpZiAoIXRoaXMudG9Mb25MYXRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxsID0gdGhpcy50b0xvbkxhdF8ocG9zaXRpb24pO1xuICAgIGNvbnNvbGUuYXNzZXJ0KGxsKTtcbiAgICB2YXIgY2FydG8gPSBuZXcgQ2VzaXVtLkNhcnRvZ3JhcGhpYyh0b1JhZGlhbnMobGxbMF0pLCB0b1JhZGlhbnMobGxbMV0pLCB0aGlzLmdldEFsdGl0dWRlKCkpO1xuICAgIHRoaXMuY2FtXy5zZXRWaWV3KHtcbiAgICAgIGRlc3RpbmF0aW9uOiBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKGNhcnRvKVxuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlVmlldygpO1xuICB9O1xuXG4gIF9wcm90by5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuICAgIGlmICghdGhpcy5mcm9tTG9uTGF0Xykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgY2FydG8gPSBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKHRoaXMuY2FtXy5wb3NpdGlvbik7XG4gICAgdmFyIHBvcyA9IHRoaXMuZnJvbUxvbkxhdF8oW3RvRGVncmVlcyhjYXJ0by5sb25naXR1ZGUpLCB0b0RlZ3JlZXMoY2FydG8ubGF0aXR1ZGUpXSk7XG4gICAgY29uc29sZS5hc3NlcnQocG9zKTtcbiAgICByZXR1cm4gcG9zO1xuICB9O1xuXG4gIF9wcm90by5zZXRBbHRpdHVkZSA9IGZ1bmN0aW9uIHNldEFsdGl0dWRlKGFsdGl0dWRlKSB7XG4gICAgdmFyIGNhcnRvID0gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyh0aGlzLmNhbV8ucG9zaXRpb24pO1xuICAgIGNhcnRvLmhlaWdodCA9IGFsdGl0dWRlO1xuICAgIHRoaXMuY2FtXy5wb3NpdGlvbiA9IENlc2l1bS5FbGxpcHNvaWQuV0dTODQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2FydG8pO1xuICAgIHRoaXMudXBkYXRlVmlldygpO1xuICB9O1xuXG4gIF9wcm90by5nZXRBbHRpdHVkZSA9IGZ1bmN0aW9uIGdldEFsdGl0dWRlKCkge1xuICAgIHZhciBjYXJ0byA9IENlc2l1bS5FbGxpcHNvaWQuV0dTODQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWModGhpcy5jYW1fLnBvc2l0aW9uKTtcbiAgICByZXR1cm4gY2FydG8uaGVpZ2h0O1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVDYW1lcmFfID0gZnVuY3Rpb24gdXBkYXRlQ2FtZXJhXygpIHtcbiAgICBpZiAoIXRoaXMudmlld18gfHwgIXRoaXMudG9Mb25MYXRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNlbnRlciA9IHRoaXMudmlld18uZ2V0Q2VudGVyKCk7XG5cbiAgICBpZiAoIWNlbnRlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsbCA9IHRoaXMudG9Mb25MYXRfKGNlbnRlcik7XG4gICAgY29uc29sZS5hc3NlcnQobGwpO1xuICAgIHZhciBjYXJ0byA9IG5ldyBDZXNpdW0uQ2FydG9ncmFwaGljKHRvUmFkaWFucyhsbFswXSksIHRvUmFkaWFucyhsbFsxXSkpO1xuXG4gICAgaWYgKHRoaXMuc2NlbmVfLmdsb2JlKSB7XG4gICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5zY2VuZV8uZ2xvYmUuZ2V0SGVpZ2h0KGNhcnRvKTtcbiAgICAgIGNhcnRvLmhlaWdodCA9IGhlaWdodCB8fCAwO1xuICAgIH1cblxuICAgIHZhciBkZXN0aW5hdGlvbiA9IENlc2l1bS5FbGxpcHNvaWQuV0dTODQuY2FydG9ncmFwaGljVG9DYXJ0ZXNpYW4oY2FydG8pO1xuICAgIHZhciBvcmllbnRhdGlvbiA9IHtcbiAgICAgIHBpdGNoOiB0aGlzLnRpbHRfIC0gQ2VzaXVtLk1hdGguUElfT1ZFUl9UV08sXG4gICAgICBoZWFkaW5nOiAtdGhpcy52aWV3Xy5nZXRSb3RhdGlvbigpLFxuICAgICAgcm9sbDogdW5kZWZpbmVkXG4gICAgfTtcbiAgICB0aGlzLmNhbV8uc2V0Vmlldyh7XG4gICAgICBkZXN0aW5hdGlvbjogZGVzdGluYXRpb24sXG4gICAgICBvcmllbnRhdGlvbjogb3JpZW50YXRpb25cbiAgICB9KTtcbiAgICB0aGlzLmNhbV8ubW92ZUJhY2t3YXJkKHRoaXMuZGlzdGFuY2VfKTtcbiAgICB0aGlzLmNoZWNrQ2FtZXJhQ2hhbmdlKHRydWUpO1xuICB9O1xuXG4gIF9wcm90by5yZWFkRnJvbVZpZXcgPSBmdW5jdGlvbiByZWFkRnJvbVZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpZXdfIHx8ICF0aGlzLnRvTG9uTGF0Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjZW50ZXIgPSB0aGlzLnZpZXdfLmdldENlbnRlcigpO1xuXG4gICAgaWYgKGNlbnRlciA9PT0gdW5kZWZpbmVkIHx8IGNlbnRlciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsbCA9IHRoaXMudG9Mb25MYXRfKGNlbnRlcik7XG4gICAgY29uc29sZS5hc3NlcnQobGwpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy52aWV3Xy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgdGhpcy5kaXN0YW5jZV8gPSB0aGlzLmNhbGNEaXN0YW5jZUZvclJlc29sdXRpb24ocmVzb2x1dGlvbiB8fCAwLCB0b1JhZGlhbnMobGxbMV0pKTtcbiAgICB0aGlzLnVwZGF0ZUNhbWVyYV8oKTtcbiAgfTtcblxuICBfcHJvdG8udXBkYXRlVmlldyA9IGZ1bmN0aW9uIHVwZGF0ZVZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpZXdfIHx8ICF0aGlzLmZyb21Mb25MYXRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy52aWV3VXBkYXRlSW5Qcm9ncmVzc18gPSB0cnVlO1xuICAgIHZhciBlbGxpcHNvaWQgPSBDZXNpdW0uRWxsaXBzb2lkLldHUzg0O1xuICAgIHZhciBzY2VuZSA9IHRoaXMuc2NlbmVfO1xuICAgIHZhciB0YXJnZXQgPSBvbGNzQ29yZS5waWNrQ2VudGVyUG9pbnQoc2NlbmUpO1xuICAgIHZhciBiZXN0VGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgaWYgKCFiZXN0VGFyZ2V0KSB7XG4gICAgICB2YXIgZ2xvYmUgPSBzY2VuZS5nbG9iZTtcbiAgICAgIHZhciBjYXJ0byA9IHRoaXMuY2FtXy5wb3NpdGlvbkNhcnRvZ3JhcGhpYy5jbG9uZSgpO1xuICAgICAgdmFyIGhlaWdodCA9IGdsb2JlLmdldEhlaWdodChjYXJ0byk7XG4gICAgICBjYXJ0by5oZWlnaHQgPSBoZWlnaHQgfHwgMDtcbiAgICAgIGJlc3RUYXJnZXQgPSBDZXNpdW0uRWxsaXBzb2lkLldHUzg0LmNhcnRvZ3JhcGhpY1RvQ2FydGVzaWFuKGNhcnRvKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpc3RhbmNlXyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmRpc3RhbmNlKGJlc3RUYXJnZXQsIHRoaXMuY2FtXy5wb3NpdGlvbik7XG4gICAgdmFyIGJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMgPSBlbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoYmVzdFRhcmdldCk7XG4gICAgdGhpcy52aWV3Xy5zZXRDZW50ZXIodGhpcy5mcm9tTG9uTGF0XyhbdG9EZWdyZWVzKGJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMubG9uZ2l0dWRlKSwgdG9EZWdyZWVzKGJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMubGF0aXR1ZGUpXSkpO1xuICAgIHRoaXMudmlld18uc2V0UmVzb2x1dGlvbih0aGlzLmNhbGNSZXNvbHV0aW9uRm9yRGlzdGFuY2UodGhpcy5kaXN0YW5jZV8sIGJlc3RUYXJnZXRDYXJ0b2dyYXBoaWMgPyBiZXN0VGFyZ2V0Q2FydG9ncmFwaGljLmxhdGl0dWRlIDogMCkpO1xuXG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgdmFyIHBvcyA9IHRoaXMuY2FtXy5wb3NpdGlvbjtcbiAgICAgIHZhciB0YXJnZXROb3JtYWwgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgICAgIGVsbGlwc29pZC5nZW9jZW50cmljU3VyZmFjZU5vcm1hbCh0YXJnZXQsIHRhcmdldE5vcm1hbCk7XG4gICAgICB2YXIgdGFyZ2V0VG9DYW1lcmEgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgICAgIENlc2l1bS5DYXJ0ZXNpYW4zLnN1YnRyYWN0KHBvcywgdGFyZ2V0LCB0YXJnZXRUb0NhbWVyYSk7XG4gICAgICBDZXNpdW0uQ2FydGVzaWFuMy5ub3JtYWxpemUodGFyZ2V0VG9DYW1lcmEsIHRhcmdldFRvQ2FtZXJhKTtcbiAgICAgIHZhciB1cCA9IHRoaXMuY2FtXy51cDtcbiAgICAgIHZhciByaWdodCA9IHRoaXMuY2FtXy5yaWdodDtcbiAgICAgIHZhciBub3JtYWwgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoLXRhcmdldC55LCB0YXJnZXQueCwgMCk7XG4gICAgICB2YXIgaGVhZGluZyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmFuZ2xlQmV0d2VlbihyaWdodCwgbm9ybWFsKTtcbiAgICAgIHZhciBjcm9zcyA9IENlc2l1bS5DYXJ0ZXNpYW4zLmNyb3NzKHRhcmdldCwgdXAsIG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpKTtcbiAgICAgIHZhciBvcmllbnRhdGlvbiA9IGNyb3NzLno7XG4gICAgICB0aGlzLnZpZXdfLnNldFJvdGF0aW9uKG9yaWVudGF0aW9uIDwgMCA/IGhlYWRpbmcgOiAtaGVhZGluZyk7XG4gICAgICB2YXIgdGlsdEFuZ2xlID0gTWF0aC5hY29zKENlc2l1bS5DYXJ0ZXNpYW4zLmRvdCh0YXJnZXROb3JtYWwsIHRhcmdldFRvQ2FtZXJhKSk7XG4gICAgICB0aGlzLnRpbHRfID0gaXNOYU4odGlsdEFuZ2xlKSA/IDAgOiB0aWx0QW5nbGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmlld18uc2V0Um90YXRpb24odGhpcy5jYW1fLmhlYWRpbmcpO1xuICAgICAgdGhpcy50aWx0XyA9IC10aGlzLmNhbV8ucGl0Y2ggKyBNYXRoLlBJIC8gMjtcbiAgICB9XG5cbiAgICB0aGlzLnZpZXdVcGRhdGVJblByb2dyZXNzXyA9IGZhbHNlO1xuICB9O1xuXG4gIF9wcm90by5jaGVja0NhbWVyYUNoYW5nZSA9IGZ1bmN0aW9uIGNoZWNrQ2FtZXJhQ2hhbmdlKG9wdF9kb250U3luYykge1xuICAgIHZhciBvbGQgPSB0aGlzLmxhc3RDYW1lcmFWaWV3TWF0cml4XztcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuY2FtXy52aWV3TWF0cml4O1xuXG4gICAgaWYgKCFvbGQgfHwgIUNlc2l1bS5NYXRyaXg0LmVxdWFsc0Vwc2lsb24ob2xkLCBjdXJyZW50LCAxZS01KSkge1xuICAgICAgdGhpcy5sYXN0Q2FtZXJhVmlld01hdHJpeF8gPSBjdXJyZW50LmNsb25lKCk7XG5cbiAgICAgIGlmIChvcHRfZG9udFN5bmMgIT09IHRydWUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5jYWxjRGlzdGFuY2VGb3JSZXNvbHV0aW9uID0gZnVuY3Rpb24gY2FsY0Rpc3RhbmNlRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBsYXRpdHVkZSkge1xuICAgIHZhciBjYW52YXMgPSB0aGlzLnNjZW5lXy5jYW52YXM7XG4gICAgdmFyIGZvdnkgPSB0aGlzLmNhbV8uZnJ1c3R1bS5mb3Z5O1xuICAgIGNvbnNvbGUuYXNzZXJ0KCFpc05hTihmb3Z5KSk7XG4gICAgdmFyIG1ldGVyc1BlclVuaXQgPSB0aGlzLnZpZXdfLmdldFByb2plY3Rpb24oKS5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgdmFyIHZpc2libGVNYXBVbml0cyA9IHJlc29sdXRpb24gKiBjYW52YXMuY2xpZW50SGVpZ2h0O1xuICAgIHZhciByZWxhdGl2ZUNpcmN1bWZlcmVuY2UgPSBNYXRoLmNvcyhNYXRoLmFicyhsYXRpdHVkZSkpO1xuICAgIHZhciB2aXNpYmxlTWV0ZXJzID0gdmlzaWJsZU1hcFVuaXRzICogbWV0ZXJzUGVyVW5pdCAqIHJlbGF0aXZlQ2lyY3VtZmVyZW5jZTtcbiAgICB2YXIgcmVxdWlyZWREaXN0YW5jZSA9IHZpc2libGVNZXRlcnMgLyAyIC8gTWF0aC50YW4oZm92eSAvIDIpO1xuICAgIHJldHVybiByZXF1aXJlZERpc3RhbmNlO1xuICB9O1xuXG4gIF9wcm90by5jYWxjUmVzb2x1dGlvbkZvckRpc3RhbmNlID0gZnVuY3Rpb24gY2FsY1Jlc29sdXRpb25Gb3JEaXN0YW5jZShkaXN0YW5jZSwgbGF0aXR1ZGUpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5zY2VuZV8uY2FudmFzO1xuICAgIHZhciBmb3Z5ID0gdGhpcy5jYW1fLmZydXN0dW0uZm92eTtcbiAgICB2YXIgbWV0ZXJzUGVyVW5pdCA9IHRoaXMudmlld18uZ2V0UHJvamVjdGlvbigpLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICB2YXIgdmlzaWJsZU1ldGVycyA9IDIgKiBkaXN0YW5jZSAqIE1hdGgudGFuKGZvdnkgLyAyKTtcbiAgICB2YXIgcmVsYXRpdmVDaXJjdW1mZXJlbmNlID0gTWF0aC5jb3MoTWF0aC5hYnMobGF0aXR1ZGUpKTtcbiAgICB2YXIgdmlzaWJsZU1hcFVuaXRzID0gdmlzaWJsZU1ldGVycyAvIG1ldGVyc1BlclVuaXQgLyByZWxhdGl2ZUNpcmN1bWZlcmVuY2U7XG4gICAgdmFyIHJlc29sdXRpb24gPSB2aXNpYmxlTWFwVW5pdHMgLyBjYW52YXMuY2xpZW50SGVpZ2h0O1xuICAgIHJldHVybiByZXNvbHV0aW9uO1xuICB9O1xuXG4gIHJldHVybiBDYW1lcmE7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IENhbWVyYTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7XG4gIHZhciBpdDtcblxuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGlmIChpdCkgbyA9IGl0O1xuICAgICAgdmFyIGkgPSAwO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgIHZhbHVlOiBvW2krK11cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xuICB9XG5cbiAgaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYXJyMltpXSA9IGFycltpXTtcbiAgfVxuXG4gIHJldHVybiBhcnIyO1xufVxuXG5pbXBvcnQgb2xHZW9tR2VvbWV0cnkgZnJvbSAnb2wvZ2VvbS9HZW9tZXRyeS5qcyc7XG5pbXBvcnQgb2xTdHlsZUljb24gZnJvbSAnb2wvc3R5bGUvSWNvbi5qcyc7XG5pbXBvcnQgb2xTb3VyY2VWZWN0b3IgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5pbXBvcnQgb2xTb3VyY2VDbHVzdGVyIGZyb20gJ29sL3NvdXJjZS9DbHVzdGVyLmpzJztcbmltcG9ydCB7IGNpcmN1bGFyIGFzIG9sQ3JlYXRlQ2lyY3VsYXJQb2x5Z29uIH0gZnJvbSAnb2wvZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCB7IGJvdW5kaW5nRXh0ZW50LCBnZXRDZW50ZXIgfSBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IG9sR2VvbVNpbXBsZUdlb21ldHJ5IGZyb20gJ29sL2dlb20vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IG9sY3NDb3JlIGZyb20gJy4vY29yZS5qcyc7XG5pbXBvcnQgb2xjc0NvcmVWZWN0b3JMYXllckNvdW50ZXJwYXJ0IGZyb20gJy4vY29yZS9WZWN0b3JMYXllckNvdW50ZXJwYXJ0LmpzJztcbmltcG9ydCBvbGNzVXRpbCwgeyBnZXRVaWQsIGlzR3JvdW5kUG9seWxpbmVQcmltaXRpdmVTdXBwb3J0ZWQgfSBmcm9tICcuL3V0aWwuanMnO1xuXG52YXIgRmVhdHVyZUNvbnZlcnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRmVhdHVyZUNvbnZlcnRlcihzY2VuZSkge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLmJvdW5kT25SZW1vdmVPckNsZWFyRmVhdHVyZUxpc3RlbmVyXyA9IHRoaXMub25SZW1vdmVPckNsZWFyRmVhdHVyZV8uYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlZmF1bHRCaWxsYm9hcmRFeWVPZmZzZXRfID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDAsIDAsIDEwKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBGZWF0dXJlQ29udmVydGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8ub25SZW1vdmVPckNsZWFyRmVhdHVyZV8gPSBmdW5jdGlvbiBvblJlbW92ZU9yQ2xlYXJGZWF0dXJlXyhldnQpIHtcbiAgICB2YXIgc291cmNlID0gZXZ0LnRhcmdldDtcbiAgICBjb25zb2xlLmFzc2VydChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVZlY3Rvcik7XG4gICAgdmFyIGNhbmNlbGxlcnMgPSBvbGNzVXRpbC5vYmooc291cmNlKVsnb2xjc19jYW5jZWxsZXJzJ107XG5cbiAgICBpZiAoY2FuY2VsbGVycykge1xuICAgICAgdmFyIGZlYXR1cmUgPSBldnQuZmVhdHVyZTtcblxuICAgICAgaWYgKGZlYXR1cmUpIHtcbiAgICAgICAgdmFyIGlkID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICB2YXIgY2FuY2VsbGVyID0gY2FuY2VsbGVyc1tpZF07XG5cbiAgICAgICAgaWYgKGNhbmNlbGxlcikge1xuICAgICAgICAgIGNhbmNlbGxlcigpO1xuICAgICAgICAgIGRlbGV0ZSBjYW5jZWxsZXJzW2lkXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGNhbmNlbGxlcnMpIHtcbiAgICAgICAgICBpZiAoY2FuY2VsbGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBjYW5jZWxsZXJzW2tleV0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvbGNzVXRpbC5vYmooc291cmNlKVsnb2xjc19jYW5jZWxsZXJzJ10gPSB7fTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNldFJlZmVyZW5jZUZvclBpY2tpbmcgPSBmdW5jdGlvbiBzZXRSZWZlcmVuY2VGb3JQaWNraW5nKGxheWVyLCBmZWF0dXJlLCBwcmltaXRpdmUpIHtcbiAgICBwcmltaXRpdmUub2xMYXllciA9IGxheWVyO1xuICAgIHByaW1pdGl2ZS5vbEZlYXR1cmUgPSBmZWF0dXJlO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVDb2xvcmVkUHJpbWl0aXZlID0gZnVuY3Rpb24gY3JlYXRlQ29sb3JlZFByaW1pdGl2ZShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgZ2VvbWV0cnksIGNvbG9yLCBvcHRfbGluZVdpZHRoKSB7XG4gICAgdmFyIGNyZWF0ZUluc3RhbmNlID0gZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZ2VvbWV0cnksIGNvbG9yKSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoY29sb3IgJiYgIShjb2xvciBpbnN0YW5jZW9mIENlc2l1bS5JbWFnZU1hdGVyaWFsUHJvcGVydHkpKSB7XG4gICAgICAgIGluc3RhbmNlLmF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgY29sb3I6IENlc2l1bS5Db2xvckdlb21ldHJ5SW5zdGFuY2VBdHRyaWJ1dGUuZnJvbUNvbG9yKGNvbG9yKVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcblxuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgZmxhdDogdHJ1ZSxcbiAgICAgIHJlbmRlclN0YXRlOiB7XG4gICAgICAgIGRlcHRoVGVzdDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAob3B0X2xpbmVXaWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIW9wdGlvbnMucmVuZGVyU3RhdGUpIHtcbiAgICAgICAgb3B0aW9ucy5yZW5kZXJTdGF0ZSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zLnJlbmRlclN0YXRlLmxpbmVXaWR0aCA9IG9wdF9saW5lV2lkdGg7XG4gICAgfVxuXG4gICAgdmFyIGluc3RhbmNlcyA9IGNyZWF0ZUluc3RhbmNlKGdlb21ldHJ5LCBjb2xvcik7XG4gICAgdmFyIGhlaWdodFJlZmVyZW5jZSA9IHRoaXMuZ2V0SGVpZ2h0UmVmZXJlbmNlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5KTtcbiAgICB2YXIgcHJpbWl0aXZlO1xuXG4gICAgaWYgKGhlaWdodFJlZmVyZW5jZSA9PT0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQpIHtcbiAgICAgIHZhciBjdG9yID0gaW5zdGFuY2VzLmdlb21ldHJ5LmNvbnN0cnVjdG9yO1xuXG4gICAgICBpZiAoY3RvciAmJiAhY3RvclsnY3JlYXRlU2hhZG93Vm9sdW1lJ10pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uR3JvdW5kUHJpbWl0aXZlKHtcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGluc3RhbmNlc1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByaW1pdGl2ZSA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlKHtcbiAgICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGluc3RhbmNlc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbG9yIGluc3RhbmNlb2YgQ2VzaXVtLkltYWdlTWF0ZXJpYWxQcm9wZXJ0eSkge1xuICAgICAgdmFyIGRhdGFVcmkgPSBjb2xvci5pbWFnZS5nZXRWYWx1ZSgpLnRvRGF0YVVSTCgpO1xuICAgICAgcHJpbWl0aXZlLmFwcGVhcmFuY2UgPSBuZXcgQ2VzaXVtLk1hdGVyaWFsQXBwZWFyYW5jZSh7XG4gICAgICAgIGZsYXQ6IHRydWUsXG4gICAgICAgIHJlbmRlclN0YXRlOiB7XG4gICAgICAgICAgZGVwdGhUZXN0OiB7XG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtYXRlcmlhbDogbmV3IENlc2l1bS5NYXRlcmlhbCh7XG4gICAgICAgICAgZmFicmljOiB7XG4gICAgICAgICAgICB0eXBlOiAnSW1hZ2UnLFxuICAgICAgICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgICAgICAgaW1hZ2U6IGRhdGFVcmlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJpbWl0aXZlLmFwcGVhcmFuY2UgPSBuZXcgQ2VzaXVtLlBlckluc3RhbmNlQ29sb3JBcHBlYXJhbmNlKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgcHJpbWl0aXZlKTtcbiAgICByZXR1cm4gcHJpbWl0aXZlO1xuICB9O1xuXG4gIF9wcm90by5leHRyYWN0Q29sb3JGcm9tT2xTdHlsZSA9IGZ1bmN0aW9uIGV4dHJhY3RDb2xvckZyb21PbFN0eWxlKHN0eWxlLCBvdXRsaW5lKSB7XG4gICAgdmFyIGZpbGxDb2xvciA9IHN0eWxlLmdldEZpbGwoKSA/IHN0eWxlLmdldEZpbGwoKS5nZXRDb2xvcigpIDogbnVsbDtcbiAgICB2YXIgc3Ryb2tlQ29sb3IgPSBzdHlsZS5nZXRTdHJva2UoKSA/IHN0eWxlLmdldFN0cm9rZSgpLmdldENvbG9yKCkgOiBudWxsO1xuICAgIHZhciBvbENvbG9yID0gJ2JsYWNrJztcblxuICAgIGlmIChzdHJva2VDb2xvciAmJiBvdXRsaW5lKSB7XG4gICAgICBvbENvbG9yID0gc3Ryb2tlQ29sb3I7XG4gICAgfSBlbHNlIGlmIChmaWxsQ29sb3IpIHtcbiAgICAgIG9sQ29sb3IgPSBmaWxsQ29sb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9sY3NDb3JlLmNvbnZlcnRDb2xvclRvQ2VzaXVtKG9sQ29sb3IpO1xuICB9O1xuXG4gIF9wcm90by5leHRyYWN0TGluZVdpZHRoRnJvbU9sU3R5bGUgPSBmdW5jdGlvbiBleHRyYWN0TGluZVdpZHRoRnJvbU9sU3R5bGUoc3R5bGUpIHtcbiAgICB2YXIgd2lkdGggPSBzdHlsZS5nZXRTdHJva2UoKSA/IHN0eWxlLmdldFN0cm9rZSgpLmdldFdpZHRoKCkgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHdpZHRoICE9PSB1bmRlZmluZWQgPyB3aWR0aCA6IDE7XG4gIH07XG5cbiAgX3Byb3RvLndyYXBGaWxsQW5kT3V0bGluZUdlb21ldHJpZXMgPSBmdW5jdGlvbiB3cmFwRmlsbEFuZE91dGxpbmVHZW9tZXRyaWVzKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBmaWxsR2VvbWV0cnksIG91dGxpbmVHZW9tZXRyeSwgb2xTdHlsZSkge1xuICAgIHZhciBmaWxsQ29sb3IgPSB0aGlzLmV4dHJhY3RDb2xvckZyb21PbFN0eWxlKG9sU3R5bGUsIGZhbHNlKTtcbiAgICB2YXIgb3V0bGluZUNvbG9yID0gdGhpcy5leHRyYWN0Q29sb3JGcm9tT2xTdHlsZShvbFN0eWxlLCB0cnVlKTtcbiAgICB2YXIgcHJpbWl0aXZlcyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuXG4gICAgaWYgKG9sU3R5bGUuZ2V0RmlsbCgpKSB7XG4gICAgICB2YXIgcDEgPSB0aGlzLmNyZWF0ZUNvbG9yZWRQcmltaXRpdmUobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIGZpbGxHZW9tZXRyeSwgZmlsbENvbG9yKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KCEhcDEpO1xuICAgICAgcHJpbWl0aXZlcy5hZGQocDEpO1xuICAgIH1cblxuICAgIGlmIChvbFN0eWxlLmdldFN0cm9rZSgpICYmIG91dGxpbmVHZW9tZXRyeSkge1xuICAgICAgdmFyIHdpZHRoID0gdGhpcy5leHRyYWN0TGluZVdpZHRoRnJvbU9sU3R5bGUob2xTdHlsZSk7XG4gICAgICB2YXIgcDIgPSB0aGlzLmNyZWF0ZUNvbG9yZWRQcmltaXRpdmUobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIG91dGxpbmVHZW9tZXRyeSwgb3V0bGluZUNvbG9yLCB3aWR0aCk7XG5cbiAgICAgIGlmIChwMikge1xuICAgICAgICBwcmltaXRpdmVzLmFkZChwMik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByaW1pdGl2ZXM7XG4gIH07XG5cbiAgX3Byb3RvLmFkZFRleHRTdHlsZSA9IGZ1bmN0aW9uIGFkZFRleHRTdHlsZShsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnksIHN0eWxlLCBwcmltaXRpdmUpIHtcbiAgICB2YXIgcHJpbWl0aXZlcztcblxuICAgIGlmICghKHByaW1pdGl2ZSBpbnN0YW5jZW9mIENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKSkge1xuICAgICAgcHJpbWl0aXZlcyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbWl0aXZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJpbWl0aXZlcyA9IHByaW1pdGl2ZTtcbiAgICB9XG5cbiAgICBpZiAoIXN0eWxlLmdldFRleHQoKSkge1xuICAgICAgcmV0dXJuIHByaW1pdGl2ZXM7XG4gICAgfVxuXG4gICAgdmFyIHRleHQgPSBzdHlsZS5nZXRUZXh0KCk7XG4gICAgdmFyIGxhYmVsID0gdGhpcy5vbEdlb21ldHJ5NDMyNlRleHRQYXJ0VG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5LCB0ZXh0KTtcblxuICAgIGlmIChsYWJlbCkge1xuICAgICAgcHJpbWl0aXZlcy5hZGQobGFiZWwpO1xuICAgIH1cblxuICAgIHJldHVybiBwcmltaXRpdmVzO1xuICB9O1xuXG4gIF9wcm90by5jc0FkZEJpbGxib2FyZCA9IGZ1bmN0aW9uIGNzQWRkQmlsbGJvYXJkKGJpbGxib2FyZHMsIGJiT3B0aW9ucywgbGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5LCBzdHlsZSkge1xuICAgIGlmICghYmJPcHRpb25zLmV5ZU9mZnNldCkge1xuICAgICAgYmJPcHRpb25zLmV5ZU9mZnNldCA9IHRoaXMuZGVmYXVsdEJpbGxib2FyZEV5ZU9mZnNldF87XG4gICAgfVxuXG4gICAgdmFyIGJiID0gYmlsbGJvYXJkcy5hZGQoYmJPcHRpb25zKTtcbiAgICB0aGlzLnNldFJlZmVyZW5jZUZvclBpY2tpbmcobGF5ZXIsIGZlYXR1cmUsIGJiKTtcbiAgICByZXR1cm4gYmI7XG4gIH07XG5cbiAgX3Byb3RvLm9sQ2lyY2xlR2VvbWV0cnlUb0Nlc2l1bSA9IGZ1bmN0aW9uIG9sQ2lyY2xlR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBvbEdlb21ldHJ5ID0gb2xjc0NvcmUub2xHZW9tZXRyeUNsb25lVG80MzI2KG9sR2VvbWV0cnksIHByb2plY3Rpb24pO1xuICAgIGNvbnNvbGUuYXNzZXJ0KG9sR2VvbWV0cnkuZ2V0VHlwZSgpID09ICdDaXJjbGUnKTtcbiAgICB2YXIgY2VudGVyID0gb2xHZW9tZXRyeS5nZXRDZW50ZXIoKTtcbiAgICB2YXIgaGVpZ2h0ID0gY2VudGVyLmxlbmd0aCA9PSAzID8gY2VudGVyWzJdIDogMC4wO1xuICAgIHZhciBwb2ludCA9IGNlbnRlci5zbGljZSgpO1xuICAgIHBvaW50WzBdICs9IG9sR2VvbWV0cnkuZ2V0UmFkaXVzKCk7XG4gICAgY2VudGVyID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZVRvQ2VzaXVtQ2FydGVzaWFuKGNlbnRlcik7XG4gICAgcG9pbnQgPSBvbGNzQ29yZS5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4ocG9pbnQpO1xuICAgIHZhciByYWRpdXMgPSBDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShjZW50ZXIsIHBvaW50KTtcbiAgICB2YXIgZmlsbEdlb21ldHJ5ID0gbmV3IENlc2l1bS5DaXJjbGVHZW9tZXRyeSh7XG4gICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgIHJhZGl1czogcmFkaXVzLFxuICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICB9KTtcbiAgICB2YXIgb3V0bGluZVByaW1pdGl2ZSwgb3V0bGluZUdlb21ldHJ5O1xuXG4gICAgaWYgKHRoaXMuZ2V0SGVpZ2h0UmVmZXJlbmNlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5KSA9PT0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQpIHtcbiAgICAgIHZhciB3aWR0aCA9IHRoaXMuZXh0cmFjdExpbmVXaWR0aEZyb21PbFN0eWxlKG9sU3R5bGUpO1xuXG4gICAgICBpZiAod2lkdGgpIHtcbiAgICAgICAgdmFyIGNpcmNsZVBvbHlnb24gPSBvbENyZWF0ZUNpcmN1bGFyUG9seWdvbihvbEdlb21ldHJ5LmdldENlbnRlcigpLCByYWRpdXMpO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZUFycmF5VG9Dc0NhcnRlc2lhbnMoY2lyY2xlUG9seWdvbi5nZXRMaW5lYXJSaW5nKDApLmdldENvb3JkaW5hdGVzKCkpO1xuXG4gICAgICAgIGlmICghaXNHcm91bmRQb2x5bGluZVByaW1pdGl2ZVN1cHBvcnRlZCh0aGlzLnNjZW5lKSkge1xuICAgICAgICAgIHZhciBjb2xvciA9IHRoaXMuZXh0cmFjdENvbG9yRnJvbU9sU3R5bGUob2xTdHlsZSwgdHJ1ZSk7XG4gICAgICAgICAgb3V0bGluZVByaW1pdGl2ZSA9IHRoaXMuY3JlYXRlU3RhY2tlZEdyb3VuZENvcnJpZG9ycyhsYXllciwgZmVhdHVyZSwgd2lkdGgsIGNvbG9yLCBwb3NpdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dGxpbmVQcmltaXRpdmUgPSBuZXcgQ2VzaXVtLkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlKHtcbiAgICAgICAgICAgIGdlb21ldHJ5SW5zdGFuY2VzOiBuZXcgQ2VzaXVtLkdlb21ldHJ5SW5zdGFuY2Uoe1xuICAgICAgICAgICAgICBnZW9tZXRyeTogbmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZUdlb21ldHJ5KHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnM6IHBvc2l0aW9ucyxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYXBwZWFyYW5jZTogbmV3IENlc2l1bS5Qb2x5bGluZU1hdGVyaWFsQXBwZWFyYW5jZSh7XG4gICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLm9sU3R5bGVUb0Nlc2l1bShmZWF0dXJlLCBvbFN0eWxlLCB0cnVlKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjbGFzc2lmaWNhdGlvblR5cGU6IENlc2l1bS5DbGFzc2lmaWNhdGlvblR5cGUuVEVSUkFJTlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG91dGxpbmVQcmltaXRpdmUucmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgb3V0bGluZVByaW1pdGl2ZS5fcHJpbWl0aXZlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXRsaW5lR2VvbWV0cnkgPSBuZXcgQ2VzaXVtLkNpcmNsZU91dGxpbmVHZW9tZXRyeSh7XG4gICAgICAgIGNlbnRlcjogY2VudGVyLFxuICAgICAgICByYWRpdXM6IHJhZGl1cyxcbiAgICAgICAgZXh0cnVkZWRIZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBwcmltaXRpdmVzID0gdGhpcy53cmFwRmlsbEFuZE91dGxpbmVHZW9tZXRyaWVzKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBmaWxsR2VvbWV0cnksIG91dGxpbmVHZW9tZXRyeSwgb2xTdHlsZSk7XG5cbiAgICBpZiAob3V0bGluZVByaW1pdGl2ZSkge1xuICAgICAgcHJpbWl0aXZlcy5hZGQob3V0bGluZVByaW1pdGl2ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYWRkVGV4dFN0eWxlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBvbFN0eWxlLCBwcmltaXRpdmVzKTtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlU3RhY2tlZEdyb3VuZENvcnJpZG9ycyA9IGZ1bmN0aW9uIGNyZWF0ZVN0YWNrZWRHcm91bmRDb3JyaWRvcnMobGF5ZXIsIGZlYXR1cmUsIHdpZHRoLCBjb2xvciwgcG9zaXRpb25zKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBvc2l0aW9uc1swXSkpIHtcbiAgICAgIHBvc2l0aW9ucyA9IFtwb3NpdGlvbnNdO1xuICAgIH1cblxuICAgIHdpZHRoID0gTWF0aC5tYXgoMywgd2lkdGgpO1xuICAgIHZhciBnZW9tZXRyeUluc3RhbmNlcyA9IFtdO1xuICAgIHZhciBwcmV2aW91c0Rpc3RhbmNlID0gMDtcblxuICAgIGZvciAodmFyIF9pID0gMCwgX2FyciA9IFsxMDAwLCA0MDAwLCAxNjAwMCwgNjQwMDAsIDI1NDAwMCwgMTAwMDAwMCwgMTAwMDAwMDBdOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgZGlzdGFuY2UgPSBfYXJyW19pXTtcbiAgICAgIHdpZHRoICo9IDIuMTQ7XG4gICAgICB2YXIgZ2VvbWV0cnlPcHRpb25zID0ge1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIHZlcnRleEZvcm1hdDogQ2VzaXVtLlZlcnRleEZvcm1hdC5QT1NJVElPTl9PTkxZXG4gICAgICB9O1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHBvc2l0aW9ucyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBsaW5lUG9zaXRpb25zID0gX3N0ZXAudmFsdWU7XG4gICAgICAgIGdlb21ldHJ5T3B0aW9ucy5wb3NpdGlvbnMgPSBsaW5lUG9zaXRpb25zO1xuICAgICAgICBnZW9tZXRyeUluc3RhbmNlcy5wdXNoKG5ldyBDZXNpdW0uR2VvbWV0cnlJbnN0YW5jZSh7XG4gICAgICAgICAgZ2VvbWV0cnk6IG5ldyBDZXNpdW0uQ29ycmlkb3JHZW9tZXRyeShnZW9tZXRyeU9wdGlvbnMpLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgIGNvbG9yOiBDZXNpdW0uQ29sb3JHZW9tZXRyeUluc3RhbmNlQXR0cmlidXRlLmZyb21Db2xvcihjb2xvciksXG4gICAgICAgICAgICBkaXN0YW5jZURpc3BsYXlDb25kaXRpb246IG5ldyBDZXNpdW0uRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uR2VvbWV0cnlJbnN0YW5jZUF0dHJpYnV0ZShwcmV2aW91c0Rpc3RhbmNlLCBkaXN0YW5jZSAtIDEpXG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIHByZXZpb3VzRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IENlc2l1bS5Hcm91bmRQcmltaXRpdmUoe1xuICAgICAgZ2VvbWV0cnlJbnN0YW5jZXM6IGdlb21ldHJ5SW5zdGFuY2VzXG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLm9sTGluZVN0cmluZ0dlb21ldHJ5VG9DZXNpdW0gPSBmdW5jdGlvbiBvbExpbmVTdHJpbmdHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBwcm9qZWN0aW9uLCBvbFN0eWxlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBvbEdlb21ldHJ5ID0gb2xjc0NvcmUub2xHZW9tZXRyeUNsb25lVG80MzI2KG9sR2VvbWV0cnksIHByb2plY3Rpb24pO1xuICAgIGNvbnNvbGUuYXNzZXJ0KG9sR2VvbWV0cnkuZ2V0VHlwZSgpID09ICdMaW5lU3RyaW5nJyk7XG4gICAgdmFyIHBvc2l0aW9ucyA9IG9sY3NDb3JlLm9sNDMyNkNvb3JkaW5hdGVBcnJheVRvQ3NDYXJ0ZXNpYW5zKG9sR2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKSk7XG4gICAgdmFyIHdpZHRoID0gdGhpcy5leHRyYWN0TGluZVdpZHRoRnJvbU9sU3R5bGUob2xTdHlsZSk7XG4gICAgdmFyIG91dGxpbmVQcmltaXRpdmU7XG4gICAgdmFyIGhlaWdodFJlZmVyZW5jZSA9IHRoaXMuZ2V0SGVpZ2h0UmVmZXJlbmNlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5KTtcblxuICAgIGlmIChoZWlnaHRSZWZlcmVuY2UgPT09IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EICYmICFpc0dyb3VuZFBvbHlsaW5lUHJpbWl0aXZlU3VwcG9ydGVkKHRoaXMuc2NlbmUpKSB7XG4gICAgICB2YXIgY29sb3IgPSB0aGlzLmV4dHJhY3RDb2xvckZyb21PbFN0eWxlKG9sU3R5bGUsIHRydWUpO1xuICAgICAgb3V0bGluZVByaW1pdGl2ZSA9IHRoaXMuY3JlYXRlU3RhY2tlZEdyb3VuZENvcnJpZG9ycyhsYXllciwgZmVhdHVyZSwgd2lkdGgsIGNvbG9yLCBwb3NpdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXBwZWFyYW5jZSA9IG5ldyBDZXNpdW0uUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uoe1xuICAgICAgICBtYXRlcmlhbDogdGhpcy5vbFN0eWxlVG9DZXNpdW0oZmVhdHVyZSwgb2xTdHlsZSwgdHJ1ZSlcbiAgICAgIH0pO1xuICAgICAgdmFyIGdlb21ldHJ5T3B0aW9ucyA9IHtcbiAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbnMsXG4gICAgICAgIHdpZHRoOiB3aWR0aFxuICAgICAgfTtcbiAgICAgIHZhciBwcmltaXRpdmVPcHRpb25zID0ge1xuICAgICAgICBhcHBlYXJhbmNlOiBhcHBlYXJhbmNlXG4gICAgICB9O1xuXG4gICAgICBpZiAoaGVpZ2h0UmVmZXJlbmNlID09PSBDZXNpdW0uSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgQ2VzaXVtLkdyb3VuZFBvbHlsaW5lR2VvbWV0cnkoZ2VvbWV0cnlPcHRpb25zKTtcbiAgICAgICAgcHJpbWl0aXZlT3B0aW9ucy5nZW9tZXRyeUluc3RhbmNlcyA9IG5ldyBDZXNpdW0uR2VvbWV0cnlJbnN0YW5jZSh7XG4gICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5XG4gICAgICAgIH0pLCBvdXRsaW5lUHJpbWl0aXZlID0gbmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZVByaW1pdGl2ZShwcmltaXRpdmVPcHRpb25zKTtcbiAgICAgICAgb3V0bGluZVByaW1pdGl2ZS5yZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLnNldFJlZmVyZW5jZUZvclBpY2tpbmcobGF5ZXIsIGZlYXR1cmUsIG91dGxpbmVQcmltaXRpdmUuX3ByaW1pdGl2ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VvbWV0cnlPcHRpb25zLnZlcnRleEZvcm1hdCA9IGFwcGVhcmFuY2UudmVydGV4Rm9ybWF0O1xuXG4gICAgICAgIHZhciBfZ2VvbWV0cnkgPSBuZXcgQ2VzaXVtLlBvbHlsaW5lR2VvbWV0cnkoZ2VvbWV0cnlPcHRpb25zKTtcblxuICAgICAgICBwcmltaXRpdmVPcHRpb25zLmdlb21ldHJ5SW5zdGFuY2VzID0gbmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgICBnZW9tZXRyeTogX2dlb21ldHJ5XG4gICAgICAgIH0pLCBvdXRsaW5lUHJpbWl0aXZlID0gbmV3IENlc2l1bS5QcmltaXRpdmUocHJpbWl0aXZlT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRSZWZlcmVuY2VGb3JQaWNraW5nKGxheWVyLCBmZWF0dXJlLCBvdXRsaW5lUHJpbWl0aXZlKTtcbiAgICByZXR1cm4gdGhpcy5hZGRUZXh0U3R5bGUobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIG9sU3R5bGUsIG91dGxpbmVQcmltaXRpdmUpO1xuICB9O1xuXG4gIF9wcm90by5vbFBvbHlnb25HZW9tZXRyeVRvQ2VzaXVtID0gZnVuY3Rpb24gb2xQb2x5Z29uR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgb2xHZW9tZXRyeSA9IG9sY3NDb3JlLm9sR2VvbWV0cnlDbG9uZVRvNDMyNihvbEdlb21ldHJ5LCBwcm9qZWN0aW9uKTtcbiAgICBjb25zb2xlLmFzc2VydChvbEdlb21ldHJ5LmdldFR5cGUoKSA9PSAnUG9seWdvbicpO1xuICAgIHZhciBoZWlnaHRSZWZlcmVuY2UgPSB0aGlzLmdldEhlaWdodFJlZmVyZW5jZShsYXllciwgZmVhdHVyZSwgb2xHZW9tZXRyeSk7XG4gICAgdmFyIGZpbGxHZW9tZXRyeSwgb3V0bGluZUdlb21ldHJ5LCBvdXRsaW5lUHJpbWl0aXZlO1xuXG4gICAgaWYgKG9sR2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKVswXS5sZW5ndGggPT0gNSAmJiBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0KCdvbGNzLnBvbHlnb25fa2luZCcpID09PSAncmVjdGFuZ2xlJykge1xuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gb2xHZW9tZXRyeS5nZXRDb29yZGluYXRlcygpWzBdO1xuICAgICAgdmFyIGV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KGNvb3JkaW5hdGVzKTtcbiAgICAgIHZhciByZWN0YW5nbGUgPSBDZXNpdW0uUmVjdGFuZ2xlLmZyb21EZWdyZWVzKGV4dGVudFswXSwgZXh0ZW50WzFdLCBleHRlbnRbMl0sIGV4dGVudFszXSk7XG4gICAgICB2YXIgbWF4SGVpZ2h0ID0gMC4wO1xuXG4gICAgICBpZiAoY29vcmRpbmF0ZXNbMF0ubGVuZ3RoID09IDMpIHtcbiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBjb29yZGluYXRlcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgIG1heEhlaWdodCA9IE1hdGgubWF4KG1heEhlaWdodCwgY29vcmRpbmF0ZXNbY11bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpbGxHZW9tZXRyeSA9IG5ldyBDZXNpdW0uUmVjdGFuZ2xlR2VvbWV0cnkoe1xuICAgICAgICBlbGxpcHNvaWQ6IENlc2l1bS5FbGxpcHNvaWQuV0dTODQsXG4gICAgICAgIHJlY3RhbmdsZTogcmVjdGFuZ2xlLFxuICAgICAgICBoZWlnaHQ6IG1heEhlaWdodFxuICAgICAgfSk7XG4gICAgICBvdXRsaW5lR2VvbWV0cnkgPSBuZXcgQ2VzaXVtLlJlY3RhbmdsZU91dGxpbmVHZW9tZXRyeSh7XG4gICAgICAgIGVsbGlwc29pZDogQ2VzaXVtLkVsbGlwc29pZC5XR1M4NCxcbiAgICAgICAgcmVjdGFuZ2xlOiByZWN0YW5nbGUsXG4gICAgICAgIGhlaWdodDogbWF4SGVpZ2h0XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJpbmdzID0gb2xHZW9tZXRyeS5nZXRMaW5lYXJSaW5ncygpO1xuICAgICAgdmFyIGhpZXJhcmNoeSA9IHt9O1xuICAgICAgdmFyIHBvbHlnb25IaWVyYXJjaHkgPSBoaWVyYXJjaHk7XG4gICAgICBjb25zb2xlLmFzc2VydChyaW5ncy5sZW5ndGggPiAwKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByaW5ncy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgb2xQb3MgPSByaW5nc1tpXS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZUFycmF5VG9Dc0NhcnRlc2lhbnMob2xQb3MpO1xuICAgICAgICBjb25zb2xlLmFzc2VydChwb3NpdGlvbnMgJiYgcG9zaXRpb25zLmxlbmd0aCA+IDApO1xuXG4gICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICBoaWVyYXJjaHkucG9zaXRpb25zID0gcG9zaXRpb25zO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaGllcmFyY2h5LmhvbGVzKSB7XG4gICAgICAgICAgICBoaWVyYXJjaHkuaG9sZXMgPSBbXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBoaWVyYXJjaHkuaG9sZXMucHVzaCh7XG4gICAgICAgICAgICBwb3NpdGlvbnM6IHBvc2l0aW9uc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpbGxHZW9tZXRyeSA9IG5ldyBDZXNpdW0uUG9seWdvbkdlb21ldHJ5KHtcbiAgICAgICAgcG9seWdvbkhpZXJhcmNoeTogcG9seWdvbkhpZXJhcmNoeSxcbiAgICAgICAgcGVyUG9zaXRpb25IZWlnaHQ6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGVpZ2h0UmVmZXJlbmNlID09PSBDZXNpdW0uSGVpZ2h0UmVmZXJlbmNlLkNMQU1QX1RPX0dST1VORCkge1xuICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmV4dHJhY3RMaW5lV2lkdGhGcm9tT2xTdHlsZShvbFN0eWxlKTtcblxuICAgICAgICBpZiAod2lkdGggPiAwKSB7XG4gICAgICAgICAgdmFyIF9wb3NpdGlvbnMgPSBbaGllcmFyY2h5LnBvc2l0aW9uc107XG5cbiAgICAgICAgICBpZiAoaGllcmFyY2h5LmhvbGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBoaWVyYXJjaHkuaG9sZXMubGVuZ3RoOyArK19pMikge1xuICAgICAgICAgICAgICBfcG9zaXRpb25zLnB1c2goaGllcmFyY2h5LmhvbGVzW19pMl0ucG9zaXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWlzR3JvdW5kUG9seWxpbmVQcmltaXRpdmVTdXBwb3J0ZWQodGhpcy5zY2VuZSkpIHtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IHRoaXMuZXh0cmFjdENvbG9yRnJvbU9sU3R5bGUob2xTdHlsZSwgdHJ1ZSk7XG4gICAgICAgICAgICBvdXRsaW5lUHJpbWl0aXZlID0gdGhpcy5jcmVhdGVTdGFja2VkR3JvdW5kQ29ycmlkb3JzKGxheWVyLCBmZWF0dXJlLCB3aWR0aCwgY29sb3IsIF9wb3NpdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXBwZWFyYW5jZSA9IG5ldyBDZXNpdW0uUG9seWxpbmVNYXRlcmlhbEFwcGVhcmFuY2Uoe1xuICAgICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5vbFN0eWxlVG9DZXNpdW0oZmVhdHVyZSwgb2xTdHlsZSwgdHJ1ZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5SW5zdGFuY2VzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKF9wb3NpdGlvbnMpLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgbGluZVBvc2l0aW9ucyA9IF9zdGVwMi52YWx1ZTtcbiAgICAgICAgICAgICAgdmFyIHBvbHlsaW5lR2VvbWV0cnkgPSBuZXcgQ2VzaXVtLkdyb3VuZFBvbHlsaW5lR2VvbWV0cnkoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uczogbGluZVBvc2l0aW9ucyxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGhcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGdlb21ldHJ5SW5zdGFuY2VzLnB1c2gobmV3IENlc2l1bS5HZW9tZXRyeUluc3RhbmNlKHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogcG9seWxpbmVHZW9tZXRyeVxuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcmltaXRpdmVPcHRpb25zID0ge1xuICAgICAgICAgICAgICBhcHBlYXJhbmNlOiBhcHBlYXJhbmNlLFxuICAgICAgICAgICAgICBnZW9tZXRyeUluc3RhbmNlczogZ2VvbWV0cnlJbnN0YW5jZXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvdXRsaW5lUHJpbWl0aXZlID0gbmV3IENlc2l1bS5Hcm91bmRQb2x5bGluZVByaW1pdGl2ZShwcmltaXRpdmVPcHRpb25zKTtcbiAgICAgICAgICAgIG91dGxpbmVQcmltaXRpdmUucmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgb3V0bGluZVByaW1pdGl2ZS5fcHJpbWl0aXZlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0bGluZUdlb21ldHJ5ID0gbmV3IENlc2l1bS5Qb2x5Z29uT3V0bGluZUdlb21ldHJ5KHtcbiAgICAgICAgICBwb2x5Z29uSGllcmFyY2h5OiBoaWVyYXJjaHksXG4gICAgICAgICAgcGVyUG9zaXRpb25IZWlnaHQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByaW1pdGl2ZXMgPSB0aGlzLndyYXBGaWxsQW5kT3V0bGluZUdlb21ldHJpZXMobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIGZpbGxHZW9tZXRyeSwgb3V0bGluZUdlb21ldHJ5LCBvbFN0eWxlKTtcblxuICAgIGlmIChvdXRsaW5lUHJpbWl0aXZlKSB7XG4gICAgICBwcmltaXRpdmVzLmFkZChvdXRsaW5lUHJpbWl0aXZlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hZGRUZXh0U3R5bGUobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIG9sU3R5bGUsIHByaW1pdGl2ZXMpO1xuICB9O1xuXG4gIF9wcm90by5nZXRIZWlnaHRSZWZlcmVuY2UgPSBmdW5jdGlvbiBnZXRIZWlnaHRSZWZlcmVuY2UobGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIGFsdGl0dWRlTW9kZSA9IGdlb21ldHJ5LmdldCgnYWx0aXR1ZGVNb2RlJyk7XG5cbiAgICBpZiAoYWx0aXR1ZGVNb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFsdGl0dWRlTW9kZSA9IGZlYXR1cmUuZ2V0KCdhbHRpdHVkZU1vZGUnKTtcbiAgICB9XG5cbiAgICBpZiAoYWx0aXR1ZGVNb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFsdGl0dWRlTW9kZSA9IGxheWVyLmdldCgnYWx0aXR1ZGVNb2RlJyk7XG4gICAgfVxuXG4gICAgdmFyIGhlaWdodFJlZmVyZW5jZSA9IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuTk9ORTtcblxuICAgIGlmIChhbHRpdHVkZU1vZGUgPT09ICdjbGFtcFRvR3JvdW5kJykge1xuICAgICAgaGVpZ2h0UmVmZXJlbmNlID0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQ7XG4gICAgfSBlbHNlIGlmIChhbHRpdHVkZU1vZGUgPT09ICdyZWxhdGl2ZVRvR3JvdW5kJykge1xuICAgICAgaGVpZ2h0UmVmZXJlbmNlID0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZS5SRUxBVElWRV9UT19HUk9VTkQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlaWdodFJlZmVyZW5jZTtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlQmlsbGJvYXJkRnJvbUltYWdlID0gZnVuY3Rpb24gY3JlYXRlQmlsbGJvYXJkRnJvbUltYWdlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBwcm9qZWN0aW9uLCBzdHlsZSwgaW1hZ2VTdHlsZSwgYmlsbGJvYXJkcywgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKSB7XG4gICAgaWYgKGltYWdlU3R5bGUgaW5zdGFuY2VvZiBvbFN0eWxlSWNvbikge1xuICAgICAgaW1hZ2VTdHlsZS5sb2FkKCk7XG4gICAgfVxuXG4gICAgdmFyIGltYWdlID0gaW1hZ2VTdHlsZS5nZXRJbWFnZSgxKTtcblxuICAgIHZhciBpc0ltYWdlTG9hZGVkID0gZnVuY3Rpb24gaXNJbWFnZUxvYWRlZChpbWFnZSkge1xuICAgICAgcmV0dXJuIGltYWdlLnNyYyAhPSAnJyAmJiBpbWFnZS5uYXR1cmFsSGVpZ2h0ICE9IDAgJiYgaW1hZ2UubmF0dXJhbFdpZHRoICE9IDAgJiYgaW1hZ2UuY29tcGxldGU7XG4gICAgfTtcblxuICAgIHZhciByZWFsbHlDcmVhdGVCaWxsYm9hcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCEoaW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCB8fCBpbWFnZSBpbnN0YW5jZW9mIEltYWdlIHx8IGltYWdlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2VudGVyID0gb2xHZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIHBvc2l0aW9uID0gb2xjc0NvcmUub2w0MzI2Q29vcmRpbmF0ZVRvQ2VzaXVtQ2FydGVzaWFuKGNlbnRlcik7XG4gICAgICB2YXIgY29sb3I7XG4gICAgICB2YXIgb3BhY2l0eSA9IGltYWdlU3R5bGUuZ2V0T3BhY2l0eSgpO1xuXG4gICAgICBpZiAob3BhY2l0eSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbG9yID0gbmV3IENlc2l1bS5Db2xvcigxLjAsIDEuMCwgMS4wLCBvcGFjaXR5KTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNjYWxlID0gaW1hZ2VTdHlsZS5nZXRTY2FsZSgpO1xuICAgICAgdmFyIGhlaWdodFJlZmVyZW5jZSA9IHRoaXMuZ2V0SGVpZ2h0UmVmZXJlbmNlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5KTtcbiAgICAgIHZhciBiYk9wdGlvbnMgPSB7XG4gICAgICAgIGltYWdlOiBpbWFnZSxcbiAgICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgICBzY2FsZTogc2NhbGUsXG4gICAgICAgIGhlaWdodFJlZmVyZW5jZTogaGVpZ2h0UmVmZXJlbmNlLFxuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb25cbiAgICAgIH07XG4gICAgICBPYmplY3QuYXNzaWduKGJiT3B0aW9ucywgZmVhdHVyZS5nZXQoJ2Nlc2l1bU9wdGlvbnMnKSk7XG5cbiAgICAgIGlmIChpbWFnZVN0eWxlIGluc3RhbmNlb2Ygb2xTdHlsZUljb24pIHtcbiAgICAgICAgdmFyIGFuY2hvciA9IGltYWdlU3R5bGUuZ2V0QW5jaG9yKCk7XG5cbiAgICAgICAgaWYgKGFuY2hvcikge1xuICAgICAgICAgIGJiT3B0aW9ucy5waXhlbE9mZnNldCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMigoaW1hZ2Uud2lkdGggLyAyIC0gYW5jaG9yWzBdKSAqIHNjYWxlLCAoaW1hZ2UuaGVpZ2h0IC8gMiAtIGFuY2hvclsxXSkgKiBzY2FsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGJiID0gdGhpcy5jc0FkZEJpbGxib2FyZChiaWxsYm9hcmRzLCBiYk9wdGlvbnMsIGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBzdHlsZSk7XG5cbiAgICAgIGlmIChvcHRfbmV3QmlsbGJvYXJkQ2FsbGJhY2spIHtcbiAgICAgICAgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKGJiKTtcbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBpZiAoaW1hZ2UgaW5zdGFuY2VvZiBJbWFnZSAmJiAhaXNJbWFnZUxvYWRlZChpbWFnZSkpIHtcbiAgICAgIHZhciBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcblxuICAgICAgdmFyIGNhbmNlbGxlciA9IGZ1bmN0aW9uIGNhbmNlbGxlcigpIHtcbiAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgIH07XG5cbiAgICAgIHNvdXJjZS5vbihbJ3JlbW92ZWZlYXR1cmUnLCAnY2xlYXInXSwgdGhpcy5ib3VuZE9uUmVtb3ZlT3JDbGVhckZlYXR1cmVMaXN0ZW5lcl8pO1xuICAgICAgdmFyIGNhbmNlbGxlcnMgPSBvbGNzVXRpbC5vYmooc291cmNlKVsnb2xjc19jYW5jZWxsZXJzJ107XG5cbiAgICAgIGlmICghY2FuY2VsbGVycykge1xuICAgICAgICBjYW5jZWxsZXJzID0gb2xjc1V0aWwub2JqKHNvdXJjZSlbJ29sY3NfY2FuY2VsbGVycyddID0ge307XG4gICAgICB9XG5cbiAgICAgIHZhciBmdWlkID0gZ2V0VWlkKGZlYXR1cmUpO1xuXG4gICAgICBpZiAoY2FuY2VsbGVyc1tmdWlkXSkge1xuICAgICAgICBjYW5jZWxsZXJzW2Z1aWRdKCk7XG4gICAgICB9XG5cbiAgICAgIGNhbmNlbGxlcnNbZnVpZF0gPSBjYW5jZWxsZXI7XG5cbiAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKCkge1xuICAgICAgICBpbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgbGlzdGVuZXIpO1xuXG4gICAgICAgIGlmICghYmlsbGJvYXJkcy5pc0Rlc3Ryb3llZCgpICYmICFjYW5jZWxsZWQpIHtcbiAgICAgICAgICByZWFsbHlDcmVhdGVCaWxsYm9hcmQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVhbGx5Q3JlYXRlQmlsbGJvYXJkKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5vbFBvaW50R2VvbWV0cnlUb0Nlc2l1bSA9IGZ1bmN0aW9uIG9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBwcm9qZWN0aW9uLCBzdHlsZSwgYmlsbGJvYXJkcywgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKSB7XG4gICAgY29uc29sZS5hc3NlcnQob2xHZW9tZXRyeS5nZXRUeXBlKCkgPT0gJ1BvaW50Jyk7XG4gICAgb2xHZW9tZXRyeSA9IG9sY3NDb3JlLm9sR2VvbWV0cnlDbG9uZVRvNDMyNihvbEdlb21ldHJ5LCBwcm9qZWN0aW9uKTtcbiAgICB2YXIgbW9kZWxQcmltaXRpdmUgPSBudWxsO1xuICAgIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcblxuICAgIGlmIChpbWFnZVN0eWxlKSB7XG4gICAgICB2YXIgb2xjc01vZGVsRnVuY3Rpb24gPSBvbEdlb21ldHJ5LmdldCgnb2xjc19tb2RlbCcpIHx8IGZlYXR1cmUuZ2V0KCdvbGNzX21vZGVsJyk7XG5cbiAgICAgIGlmIChvbGNzTW9kZWxGdW5jdGlvbikge1xuICAgICAgICB2YXIgb2xjc01vZGVsID0gb2xjc01vZGVsRnVuY3Rpb24oKTtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmVcbiAgICAgICAgfSwgb2xjc01vZGVsLmNlc2l1bU9wdGlvbnMpO1xuICAgICAgICB2YXIgbW9kZWwgPSBDZXNpdW0uTW9kZWwuZnJvbUdsdGYob3B0aW9ucyk7XG4gICAgICAgIG1vZGVsUHJpbWl0aXZlID0gbmV3IENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKCk7XG4gICAgICAgIG1vZGVsUHJpbWl0aXZlLmFkZChtb2RlbCk7XG5cbiAgICAgICAgaWYgKG9sY3NNb2RlbC5kZWJ1Z01vZGVsTWF0cml4KSB7XG4gICAgICAgICAgbW9kZWxQcmltaXRpdmUuYWRkKG5ldyBDZXNpdW0uRGVidWdNb2RlbE1hdHJpeFByaW1pdGl2ZSh7XG4gICAgICAgICAgICBtb2RlbE1hdHJpeDogb2xjc01vZGVsLmRlYnVnTW9kZWxNYXRyaXhcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3JlYXRlQmlsbGJvYXJkRnJvbUltYWdlKGxheWVyLCBmZWF0dXJlLCBvbEdlb21ldHJ5LCBwcm9qZWN0aW9uLCBzdHlsZSwgaW1hZ2VTdHlsZSwgYmlsbGJvYXJkcywgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3R5bGUuZ2V0VGV4dCgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGRUZXh0U3R5bGUobGF5ZXIsIGZlYXR1cmUsIG9sR2VvbWV0cnksIHN0eWxlLCBtb2RlbFByaW1pdGl2ZSB8fCBuZXcgQ2VzaXVtLlByaW1pdGl2ZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1vZGVsUHJpbWl0aXZlO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ub2xNdWx0aUdlb21ldHJ5VG9DZXNpdW0gPSBmdW5jdGlvbiBvbE11bHRpR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnksIHByb2plY3Rpb24sIG9sU3R5bGUsIGJpbGxib2FyZHMsIG9wdF9uZXdCaWxsYm9hcmRDYWxsYmFjaykge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgdmFyIGFjY3VtdWxhdGUgPSBmdW5jdGlvbiBhY2N1bXVsYXRlKGdlb21ldHJpZXMsIGZ1bmN0b3IpIHtcbiAgICAgIHZhciBwcmltaXRpdmVzID0gbmV3IENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKCk7XG4gICAgICBnZW9tZXRyaWVzLmZvckVhY2goZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIHByaW1pdGl2ZXMuYWRkKGZ1bmN0b3IobGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5LCBwcm9qZWN0aW9uLCBvbFN0eWxlKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcmltaXRpdmVzO1xuICAgIH07XG5cbiAgICB2YXIgc3ViZ2VvcztcblxuICAgIHN3aXRjaCAoZ2VvbWV0cnkuZ2V0VHlwZSgpKSB7XG4gICAgICBjYXNlICdNdWx0aVBvaW50JzpcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICAgICAgc3ViZ2VvcyA9IGdlb21ldHJ5LmdldFBvaW50cygpO1xuXG4gICAgICAgIGlmIChvbFN0eWxlLmdldFRleHQoKSkge1xuICAgICAgICAgIHZhciBwcmltaXRpdmVzID0gbmV3IENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgc3ViZ2Vvcy5mb3JFYWNoKGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoZ2VvbWV0cnkpO1xuXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXM0Lm9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSwgYmlsbGJvYXJkcywgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICBwcmltaXRpdmVzLmFkZChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBwcmltaXRpdmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1Ymdlb3MuZm9yRWFjaChmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGdlb21ldHJ5KTtcblxuICAgICAgICAgICAgX3RoaXM0Lm9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tZXRyeSwgcHJvamVjdGlvbiwgb2xTdHlsZSwgYmlsbGJvYXJkcywgb3B0X25ld0JpbGxib2FyZENhbGxiYWNrKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOlxuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgICAgICBzdWJnZW9zID0gZ2VvbWV0cnkuZ2V0TGluZVN0cmluZ3MoKTtcbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdGUoc3ViZ2VvcywgdGhpcy5vbExpbmVTdHJpbmdHZW9tZXRyeVRvQ2VzaXVtLmJpbmQodGhpcykpO1xuXG4gICAgICBjYXNlICdNdWx0aVBvbHlnb24nOlxuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgICAgICBzdWJnZW9zID0gZ2VvbWV0cnkuZ2V0UG9seWdvbnMoKTtcbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdGUoc3ViZ2VvcywgdGhpcy5vbFBvbHlnb25HZW9tZXRyeVRvQ2VzaXVtLmJpbmQodGhpcykpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgXCJVbmhhbmRsZWQgbXVsdGkgZ2VvbWV0cnkgdHlwZVwiICsgZ2VvbWV0cnkuZ2V0VHlwZSgpKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLm9sR2VvbWV0cnk0MzI2VGV4dFBhcnRUb0Nlc2l1bSA9IGZ1bmN0aW9uIG9sR2VvbWV0cnk0MzI2VGV4dFBhcnRUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbWV0cnksIHN0eWxlKSB7XG4gICAgdmFyIHRleHQgPSBzdHlsZS5nZXRUZXh0KCk7XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsYWJlbHMgPSBuZXcgQ2VzaXVtLkxhYmVsQ29sbGVjdGlvbih7XG4gICAgICBzY2VuZTogdGhpcy5zY2VuZVxuICAgIH0pO1xuICAgIHZhciBleHRlbnRDZW50ZXIgPSBnZXRDZW50ZXIoZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpO1xuXG4gICAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tU2ltcGxlR2VvbWV0cnkpIHtcbiAgICAgIHZhciBmaXJzdCA9IGdlb21ldHJ5LmdldEZpcnN0Q29vcmRpbmF0ZSgpO1xuICAgICAgZXh0ZW50Q2VudGVyWzJdID0gZmlyc3QubGVuZ3RoID09IDMgPyBmaXJzdFsyXSA6IDAuMDtcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgIG9wdGlvbnMucG9zaXRpb24gPSBvbGNzQ29yZS5vbDQzMjZDb29yZGluYXRlVG9DZXNpdW1DYXJ0ZXNpYW4oZXh0ZW50Q2VudGVyKTtcbiAgICBvcHRpb25zLnRleHQgPSB0ZXh0O1xuICAgIG9wdGlvbnMuaGVpZ2h0UmVmZXJlbmNlID0gdGhpcy5nZXRIZWlnaHRSZWZlcmVuY2UobGF5ZXIsIGZlYXR1cmUsIGdlb21ldHJ5KTtcbiAgICB2YXIgb2Zmc2V0WCA9IHN0eWxlLmdldE9mZnNldFgoKTtcbiAgICB2YXIgb2Zmc2V0WSA9IHN0eWxlLmdldE9mZnNldFkoKTtcblxuICAgIGlmIChvZmZzZXRYICE9IDAgJiYgb2Zmc2V0WSAhPSAwKSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgb3B0aW9ucy5waXhlbE9mZnNldCA9IG9mZnNldDtcbiAgICB9XG5cbiAgICBvcHRpb25zLmZvbnQgPSBzdHlsZS5nZXRGb250KCkgfHwgJzEwcHggc2Fucy1zZXJpZic7XG4gICAgdmFyIGxhYmVsU3R5bGUgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoc3R5bGUuZ2V0RmlsbCgpKSB7XG4gICAgICBvcHRpb25zLmZpbGxDb2xvciA9IHRoaXMuZXh0cmFjdENvbG9yRnJvbU9sU3R5bGUoc3R5bGUsIGZhbHNlKTtcbiAgICAgIGxhYmVsU3R5bGUgPSBDZXNpdW0uTGFiZWxTdHlsZS5GSUxMO1xuICAgIH1cblxuICAgIGlmIChzdHlsZS5nZXRTdHJva2UoKSkge1xuICAgICAgb3B0aW9ucy5vdXRsaW5lV2lkdGggPSB0aGlzLmV4dHJhY3RMaW5lV2lkdGhGcm9tT2xTdHlsZShzdHlsZSk7XG4gICAgICBvcHRpb25zLm91dGxpbmVDb2xvciA9IHRoaXMuZXh0cmFjdENvbG9yRnJvbU9sU3R5bGUoc3R5bGUsIHRydWUpO1xuICAgICAgbGFiZWxTdHlsZSA9IENlc2l1bS5MYWJlbFN0eWxlLk9VVExJTkU7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlLmdldEZpbGwoKSAmJiBzdHlsZS5nZXRTdHJva2UoKSkge1xuICAgICAgbGFiZWxTdHlsZSA9IENlc2l1bS5MYWJlbFN0eWxlLkZJTExfQU5EX09VVExJTkU7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5zdHlsZSA9IGxhYmVsU3R5bGU7XG4gICAgdmFyIGhvcml6b250YWxPcmlnaW47XG5cbiAgICBzd2l0Y2ggKHN0eWxlLmdldFRleHRBbGlnbigpKSB7XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgaG9yaXpvbnRhbE9yaWdpbiA9IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luLkxFRlQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgIGhvcml6b250YWxPcmlnaW4gPSBDZXNpdW0uSG9yaXpvbnRhbE9yaWdpbi5SSUdIVDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBob3Jpem9udGFsT3JpZ2luID0gQ2VzaXVtLkhvcml6b250YWxPcmlnaW4uQ0VOVEVSO1xuICAgIH1cblxuICAgIG9wdGlvbnMuaG9yaXpvbnRhbE9yaWdpbiA9IGhvcml6b250YWxPcmlnaW47XG5cbiAgICBpZiAoc3R5bGUuZ2V0VGV4dEJhc2VsaW5lKCkpIHtcbiAgICAgIHZhciB2ZXJ0aWNhbE9yaWdpbjtcblxuICAgICAgc3dpdGNoIChzdHlsZS5nZXRUZXh0QmFzZWxpbmUoKSkge1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIHZlcnRpY2FsT3JpZ2luID0gQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLlRPUDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdtaWRkbGUnOlxuICAgICAgICAgIHZlcnRpY2FsT3JpZ2luID0gQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLkNFTlRFUjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgIHZlcnRpY2FsT3JpZ2luID0gQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLkJPVFRPTTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdhbHBoYWJldGljJzpcbiAgICAgICAgICB2ZXJ0aWNhbE9yaWdpbiA9IENlc2l1bS5WZXJ0aWNhbE9yaWdpbi5UT1A7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnaGFuZ2luZyc6XG4gICAgICAgICAgdmVydGljYWxPcmlnaW4gPSBDZXNpdW0uVmVydGljYWxPcmlnaW4uQk9UVE9NO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoZmFsc2UsIFwidW5oYW5kbGVkIGJhc2VsaW5lIFwiICsgc3R5bGUuZ2V0VGV4dEJhc2VsaW5lKCkpO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zLnZlcnRpY2FsT3JpZ2luID0gdmVydGljYWxPcmlnaW47XG4gICAgfVxuXG4gICAgdmFyIGwgPSBsYWJlbHMuYWRkKG9wdGlvbnMpO1xuICAgIHRoaXMuc2V0UmVmZXJlbmNlRm9yUGlja2luZyhsYXllciwgZmVhdHVyZSwgbCk7XG4gICAgcmV0dXJuIGxhYmVscztcbiAgfTtcblxuICBfcHJvdG8ub2xTdHlsZVRvQ2VzaXVtID0gZnVuY3Rpb24gb2xTdHlsZVRvQ2VzaXVtKGZlYXR1cmUsIHN0eWxlLCBvdXRsaW5lKSB7XG4gICAgdmFyIGZpbGwgPSBzdHlsZS5nZXRGaWxsKCk7XG4gICAgdmFyIHN0cm9rZSA9IHN0eWxlLmdldFN0cm9rZSgpO1xuXG4gICAgaWYgKG91dGxpbmUgJiYgIXN0cm9rZSB8fCAhb3V0bGluZSAmJiAhZmlsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGNvbG9yID0gb3V0bGluZSA/IHN0cm9rZS5nZXRDb2xvcigpIDogZmlsbC5nZXRDb2xvcigpO1xuICAgIGNvbG9yID0gb2xjc0NvcmUuY29udmVydENvbG9yVG9DZXNpdW0oY29sb3IpO1xuXG4gICAgaWYgKG91dGxpbmUgJiYgc3Ryb2tlLmdldExpbmVEYXNoKCkpIHtcbiAgICAgIHJldHVybiBDZXNpdW0uTWF0ZXJpYWwuZnJvbVR5cGUoJ1N0cmlwZScsIHtcbiAgICAgICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgICAgIHJlcGVhdDogNTAwLFxuICAgICAgICBldmVuQ29sb3I6IGNvbG9yLFxuICAgICAgICBvZGRDb2xvcjogbmV3IENlc2l1bS5Db2xvcigwLCAwLCAwLCAwKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBDZXNpdW0uTWF0ZXJpYWwuZnJvbVR5cGUoJ0NvbG9yJywge1xuICAgICAgICBjb2xvcjogY29sb3JcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uY29tcHV0ZVBsYWluU3R5bGUgPSBmdW5jdGlvbiBjb21wdXRlUGxhaW5TdHlsZShsYXllciwgZmVhdHVyZSwgZmFsbGJhY2tTdHlsZUZ1bmN0aW9uLCByZXNvbHV0aW9uKSB7XG4gICAgdmFyIGZlYXR1cmVTdHlsZUZ1bmN0aW9uID0gZmVhdHVyZS5nZXRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgdmFyIHN0eWxlID0gbnVsbDtcblxuICAgIGlmIChmZWF0dXJlU3R5bGVGdW5jdGlvbikge1xuICAgICAgc3R5bGUgPSBmZWF0dXJlU3R5bGVGdW5jdGlvbihmZWF0dXJlLCByZXNvbHV0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoIXN0eWxlICYmIGZhbGxiYWNrU3R5bGVGdW5jdGlvbikge1xuICAgICAgc3R5bGUgPSBmYWxsYmFja1N0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCFzdHlsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc3R5bGUpID8gc3R5bGUgOiBbc3R5bGVdO1xuICB9O1xuXG4gIF9wcm90by5nZXRHZW9tZXRyeUZyb21GZWF0dXJlID0gZnVuY3Rpb24gZ2V0R2VvbWV0cnlGcm9tRmVhdHVyZShmZWF0dXJlLCBzdHlsZSwgb3B0X2dlb20pIHtcbiAgICBpZiAob3B0X2dlb20pIHtcbiAgICAgIHJldHVybiBvcHRfZ2VvbTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbTNkID0gZmVhdHVyZS5nZXQoJ29sY3MuM2RfZ2VvbWV0cnknKTtcblxuICAgIGlmIChnZW9tM2QgJiYgZ2VvbTNkIGluc3RhbmNlb2Ygb2xHZW9tR2VvbWV0cnkpIHtcbiAgICAgIHJldHVybiBnZW9tM2Q7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICB2YXIgZ2VvbUZ1bmNSZXMgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG5cbiAgICAgIGlmIChnZW9tRnVuY1JlcyBpbnN0YW5jZW9mIG9sR2VvbUdlb21ldHJ5KSB7XG4gICAgICAgIHJldHVybiBnZW9tRnVuY1JlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICB9O1xuXG4gIF9wcm90by5vbEZlYXR1cmVUb0Nlc2l1bSA9IGZ1bmN0aW9uIG9sRmVhdHVyZVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBzdHlsZSwgY29udGV4dCwgb3B0X2dlb20pIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHZhciBnZW9tID0gdGhpcy5nZXRHZW9tZXRyeUZyb21GZWF0dXJlKGZlYXR1cmUsIHN0eWxlLCBvcHRfZ2VvbSk7XG5cbiAgICBpZiAoIWdlb20pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBwcm9qID0gY29udGV4dC5wcm9qZWN0aW9uO1xuXG4gICAgdmFyIG5ld0JpbGxib2FyZEFkZGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiBuZXdCaWxsYm9hcmRBZGRlZENhbGxiYWNrKGJiKSB7XG4gICAgICB2YXIgZmVhdHVyZUJiID0gY29udGV4dC5mZWF0dXJlVG9DZXNpdW1NYXBbZ2V0VWlkKGZlYXR1cmUpXTtcblxuICAgICAgaWYgKGZlYXR1cmVCYiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZlYXR1cmVCYi5wdXNoKGJiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRleHQuZmVhdHVyZVRvQ2VzaXVtTWFwW2dldFVpZChmZWF0dXJlKV0gPSBbYmJdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzd2l0Y2ggKGdlb20uZ2V0VHlwZSgpKSB7XG4gICAgICBjYXNlICdHZW9tZXRyeUNvbGxlY3Rpb24nOlxuICAgICAgICB2YXIgcHJpbWl0aXZlcyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGdlb207XG4gICAgICAgIGNvbGxlY3Rpb24uZ2V0R2VvbWV0cmllcygpLmZvckVhY2goZnVuY3Rpb24gKGdlb20pIHtcbiAgICAgICAgICBpZiAoZ2VvbSkge1xuICAgICAgICAgICAgdmFyIHByaW1zID0gX3RoaXM1Lm9sRmVhdHVyZVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBzdHlsZSwgY29udGV4dCwgZ2VvbSk7XG5cbiAgICAgICAgICAgIGlmIChwcmltcykge1xuICAgICAgICAgICAgICBwcmltaXRpdmVzLmFkZChwcmltcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByaW1pdGl2ZXM7XG5cbiAgICAgIGNhc2UgJ1BvaW50JzpcbiAgICAgICAgZ2VvbSA9IGdlb207XG4gICAgICAgIHZhciBiYnMgPSBjb250ZXh0LmJpbGxib2FyZHM7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm9sUG9pbnRHZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tLCBwcm9qLCBzdHlsZSwgYmJzLCBuZXdCaWxsYm9hcmRBZGRlZENhbGxiYWNrKTtcblxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSAnQ2lyY2xlJzpcbiAgICAgICAgZ2VvbSA9IGdlb207XG4gICAgICAgIHJldHVybiB0aGlzLm9sQ2lyY2xlR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbSwgcHJvaiwgc3R5bGUpO1xuXG4gICAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICAgICAgZ2VvbSA9IGdlb207XG4gICAgICAgIHJldHVybiB0aGlzLm9sTGluZVN0cmluZ0dlb21ldHJ5VG9DZXNpdW0obGF5ZXIsIGZlYXR1cmUsIGdlb20sIHByb2osIHN0eWxlKTtcblxuICAgICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgIGdlb20gPSBnZW9tO1xuICAgICAgICByZXR1cm4gdGhpcy5vbFBvbHlnb25HZW9tZXRyeVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBnZW9tLCBwcm9qLCBzdHlsZSk7XG5cbiAgICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgIHZhciByZXN1bHQyID0gdGhpcy5vbE11bHRpR2VvbWV0cnlUb0Nlc2l1bShsYXllciwgZmVhdHVyZSwgZ2VvbSwgcHJvaiwgc3R5bGUsIGNvbnRleHQuYmlsbGJvYXJkcywgbmV3QmlsbGJvYXJkQWRkZWRDYWxsYmFjayk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQyKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDI7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSAnTGluZWFyUmluZyc6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTGluZWFyUmluZyBzaG91bGQgb25seSBiZSBwYXJ0IG9mIHBvbHlnb24uJyk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9sIGdlb20gdHlwZSBub3QgaGFuZGxlZCA6IFwiICsgZ2VvbS5nZXRUeXBlKCkpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ub2xWZWN0b3JMYXllclRvQ2VzaXVtID0gZnVuY3Rpb24gb2xWZWN0b3JMYXllclRvQ2VzaXVtKG9sTGF5ZXIsIG9sVmlldywgZmVhdHVyZVByaW1pdGl2ZU1hcCkge1xuICAgIHZhciBwcm9qID0gb2xWaWV3LmdldFByb2plY3Rpb24oKTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IG9sVmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkIHx8ICFwcm9qKSB7XG4gICAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgJ1ZpZXcgbm90IHJlYWR5Jyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZpZXcgbm90IHJlYWR5Jyk7XG4gICAgfVxuXG4gICAgdmFyIHNvdXJjZSA9IG9sTGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgICBpZiAoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VDbHVzdGVyKSB7XG4gICAgICBzb3VyY2UgPSBzb3VyY2UuZ2V0U291cmNlKCk7XG4gICAgfVxuXG4gICAgY29uc29sZS5hc3NlcnQoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VWZWN0b3IpO1xuICAgIHZhciBmZWF0dXJlcyA9IHNvdXJjZS5nZXRGZWF0dXJlcygpO1xuICAgIHZhciBjb3VudGVycGFydCA9IG5ldyBvbGNzQ29yZVZlY3RvckxheWVyQ291bnRlcnBhcnQocHJvaiwgdGhpcy5zY2VuZSk7XG4gICAgdmFyIGNvbnRleHQgPSBjb3VudGVycGFydC5jb250ZXh0O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcblxuICAgICAgaWYgKCFmZWF0dXJlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGF5ZXJTdHlsZSA9IG9sTGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuICAgICAgdmFyIHN0eWxlcyA9IHRoaXMuY29tcHV0ZVBsYWluU3R5bGUob2xMYXllciwgZmVhdHVyZSwgbGF5ZXJTdHlsZSwgcmVzb2x1dGlvbik7XG5cbiAgICAgIGlmICghc3R5bGVzIHx8ICFzdHlsZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJpbWl0aXZlcyA9IG51bGw7XG5cbiAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHN0eWxlcy5sZW5ndGg7IF9pMysrKSB7XG4gICAgICAgIHZhciBwcmltcyA9IHRoaXMub2xGZWF0dXJlVG9DZXNpdW0ob2xMYXllciwgZmVhdHVyZSwgc3R5bGVzW19pM10sIGNvbnRleHQpO1xuXG4gICAgICAgIGlmIChwcmltcykge1xuICAgICAgICAgIGlmICghcHJpbWl0aXZlcykge1xuICAgICAgICAgICAgcHJpbWl0aXZlcyA9IHByaW1zO1xuICAgICAgICAgIH0gZWxzZSBpZiAocHJpbXMpIHtcbiAgICAgICAgICAgIHZhciBfaTQgPSAwLFxuICAgICAgICAgICAgICAgIHByaW0gPSB2b2lkIDA7XG5cbiAgICAgICAgICAgIHdoaWxlIChwcmltID0gcHJpbXMuZ2V0KF9pNCkpIHtcbiAgICAgICAgICAgICAgcHJpbWl0aXZlcy5hZGQocHJpbSk7XG4gICAgICAgICAgICAgIF9pNCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXByaW1pdGl2ZXMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZlYXR1cmVQcmltaXRpdmVNYXBbZ2V0VWlkKGZlYXR1cmUpXSA9IHByaW1pdGl2ZXM7XG4gICAgICBjb3VudGVycGFydC5nZXRSb290UHJpbWl0aXZlKCkuYWRkKHByaW1pdGl2ZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBjb3VudGVycGFydDtcbiAgfTtcblxuICBfcHJvdG8uY29udmVydCA9IGZ1bmN0aW9uIGNvbnZlcnQobGF5ZXIsIHZpZXcsIGZlYXR1cmUsIGNvbnRleHQpIHtcbiAgICB2YXIgcHJvaiA9IHZpZXcuZ2V0UHJvamVjdGlvbigpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICBpZiAocmVzb2x1dGlvbiA9PSB1bmRlZmluZWQgfHwgIXByb2opIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsYXllclN0eWxlID0gbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuICAgIHZhciBzdHlsZXMgPSB0aGlzLmNvbXB1dGVQbGFpblN0eWxlKGxheWVyLCBmZWF0dXJlLCBsYXllclN0eWxlLCByZXNvbHV0aW9uKTtcblxuICAgIGlmICghc3R5bGVzIHx8ICFzdHlsZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb250ZXh0LnByb2plY3Rpb24gPSBwcm9qO1xuICAgIHZhciBwcmltaXRpdmVzID0gbnVsbDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJpbXMgPSB0aGlzLm9sRmVhdHVyZVRvQ2VzaXVtKGxheWVyLCBmZWF0dXJlLCBzdHlsZXNbaV0sIGNvbnRleHQpO1xuXG4gICAgICBpZiAoIXByaW1pdGl2ZXMpIHtcbiAgICAgICAgcHJpbWl0aXZlcyA9IHByaW1zO1xuICAgICAgfSBlbHNlIGlmIChwcmltcykge1xuICAgICAgICB2YXIgX2k1ID0gMCxcbiAgICAgICAgICAgIHByaW0gPSB2b2lkIDA7XG5cbiAgICAgICAgd2hpbGUgKHByaW0gPSBwcmltcy5nZXQoX2k1KSkge1xuICAgICAgICAgIHByaW1pdGl2ZXMuYWRkKHByaW0pO1xuICAgICAgICAgIF9pNSsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByaW1pdGl2ZXM7XG4gIH07XG5cbiAgcmV0dXJuIEZlYXR1cmVDb252ZXJ0ZXI7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IEZlYXR1cmVDb252ZXJ0ZXI7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgeyBnZXRUcmFuc2Zvcm0gfSBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBvbGNzVXRpbCBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IG9sY3NDb3JlIGZyb20gJy4vY29yZS5qcyc7XG5pbXBvcnQgb2xjc0F1dG9SZW5kZXJMb29wIGZyb20gJy4vQXV0b1JlbmRlckxvb3AuanMnO1xuaW1wb3J0IG9sY3NDYW1lcmEgZnJvbSAnLi9DYW1lcmEuanMnO1xuaW1wb3J0IG9sY3NSYXN0ZXJTeW5jaHJvbml6ZXIgZnJvbSAnLi9SYXN0ZXJTeW5jaHJvbml6ZXIuanMnO1xuaW1wb3J0IG9sY3NWZWN0b3JTeW5jaHJvbml6ZXIgZnJvbSAnLi9WZWN0b3JTeW5jaHJvbml6ZXIuanMnO1xuaW1wb3J0IG9sY3NPdmVybGF5U3luY2hyb25pemVyIGZyb20gJy4vT3ZlcmxheVN5bmNocm9uaXplci5qcyc7XG5cbnZhciBPTENlc2l1bSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gT0xDZXNpdW0ob3B0aW9ucykge1xuICAgIHRoaXMuYXV0b1JlbmRlckxvb3BfID0gbnVsbDtcbiAgICB0aGlzLm1hcF8gPSBvcHRpb25zLm1hcDtcblxuICAgIHRoaXMudGltZV8gPSBvcHRpb25zLnRpbWUgfHwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIENlc2l1bS5KdWxpYW5EYXRlLm5vdygpO1xuICAgIH07XG5cbiAgICB0aGlzLnRvNDMyNlRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm0odGhpcy5tYXBfLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCksICdFUFNHOjQzMjYnKTtcbiAgICB0aGlzLnJlc29sdXRpb25TY2FsZV8gPSAxLjA7XG4gICAgdGhpcy5jYW52YXNDbGllbnRXaWR0aF8gPSAwLjA7XG4gICAgdGhpcy5jYW52YXNDbGllbnRIZWlnaHRfID0gMC4wO1xuICAgIHRoaXMucmVzb2x1dGlvblNjYWxlQ2hhbmdlZF8gPSB0cnVlO1xuICAgIHZhciBmaWxsQXJlYSA9ICdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTsnO1xuICAgIHRoaXMuY29udGFpbmVyXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgIHZhciBjb250YWluZXJBdHRyaWJ1dGUgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgY29udGFpbmVyQXR0cmlidXRlLnZhbHVlID0gZmlsbEFyZWEgKyBcInZpc2liaWxpdHk6aGlkZGVuO1wiO1xuICAgIHRoaXMuY29udGFpbmVyXy5zZXRBdHRyaWJ1dGVOb2RlKGNvbnRhaW5lckF0dHJpYnV0ZSk7XG4gICAgdmFyIHRhcmdldEVsZW1lbnQgPSBvcHRpb25zLnRhcmdldCB8fCB0aGlzLm1hcF8uZ2V0Vmlld3BvcnQoKTtcblxuICAgIGlmICh0eXBlb2YgdGFyZ2V0RWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyXyk7XG4gICAgdGhpcy5pc092ZXJNYXBfID0gIXRhcmdldEVsZW1lbnQ7XG5cbiAgICBpZiAodGhpcy5pc092ZXJNYXBfICYmIG9wdGlvbnMuc3RvcE9wZW5MYXllcnNFdmVudHNQcm9wYWdhdGlvbikge1xuICAgICAgdmFyIG92ZXJsYXlFdmVudHMgPSBbJ2NsaWNrJywgJ2RibGNsaWNrJywgJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0JywgJ01TUG9pbnRlckRvd24nLCAncG9pbnRlcmRvd24nLCAnbW91c2V3aGVlbCcsICd3aGVlbCddO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBvdmVybGF5RXZlbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJfLmFkZEV2ZW50TGlzdGVuZXIob3ZlcmxheUV2ZW50c1tpXSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIHJldHVybiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY2FudmFzXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0NBTlZBUycpO1xuICAgIHZhciBjYW52YXNBdHRyaWJ1dGUgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgY2FudmFzQXR0cmlidXRlLnZhbHVlID0gZmlsbEFyZWE7XG4gICAgdGhpcy5jYW52YXNfLnNldEF0dHJpYnV0ZU5vZGUoY2FudmFzQXR0cmlidXRlKTtcblxuICAgIGlmIChvbGNzVXRpbC5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkKCkpIHtcbiAgICAgIHRoaXMuY2FudmFzXy5zdHlsZVsnaW1hZ2VSZW5kZXJpbmcnXSA9IG9sY3NVdGlsLmltYWdlUmVuZGVyaW5nVmFsdWUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhbnZhc18ub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5jYW52YXNfLm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMuY29udGFpbmVyXy5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhc18pO1xuICAgIHRoaXMuZW5hYmxlZF8gPSBmYWxzZTtcbiAgICB0aGlzLnBhdXNlZEludGVyYWN0aW9uc18gPSBbXTtcbiAgICB0aGlzLmhpZGRlblJvb3RHcm91cF8gPSBudWxsO1xuICAgIHZhciBzY2VuZU9wdGlvbnMgPSBvcHRpb25zLnNjZW5lT3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zY2VuZU9wdGlvbnMgOiB7fTtcbiAgICBzY2VuZU9wdGlvbnMuY2FudmFzID0gdGhpcy5jYW52YXNfO1xuICAgIHNjZW5lT3B0aW9ucy5zY2VuZTNET25seSA9IHRydWU7XG4gICAgdGhpcy5zY2VuZV8gPSBuZXcgQ2VzaXVtLlNjZW5lKHNjZW5lT3B0aW9ucyk7XG4gICAgdmFyIHNzY2MgPSB0aGlzLnNjZW5lXy5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXI7XG4gICAgc3NjYy50aWx0RXZlbnRUeXBlcy5wdXNoKHtcbiAgICAgICdldmVudFR5cGUnOiBDZXNpdW0uQ2FtZXJhRXZlbnRUeXBlLkxFRlRfRFJBRyxcbiAgICAgICdtb2RpZmllcic6IENlc2l1bS5LZXlib2FyZEV2ZW50TW9kaWZpZXIuU0hJRlRcbiAgICB9KTtcbiAgICBzc2NjLnRpbHRFdmVudFR5cGVzLnB1c2goe1xuICAgICAgJ2V2ZW50VHlwZSc6IENlc2l1bS5DYW1lcmFFdmVudFR5cGUuTEVGVF9EUkFHLFxuICAgICAgJ21vZGlmaWVyJzogQ2VzaXVtLktleWJvYXJkRXZlbnRNb2RpZmllci5BTFRcbiAgICB9KTtcbiAgICBzc2NjLmVuYWJsZUxvb2sgPSBmYWxzZTtcbiAgICB0aGlzLnNjZW5lXy5jYW1lcmEuY29uc3RyYWluZWRBeGlzID0gQ2VzaXVtLkNhcnRlc2lhbjMuVU5JVF9aO1xuICAgIHRoaXMuY2FtZXJhXyA9IG5ldyBvbGNzQ2FtZXJhKHRoaXMuc2NlbmVfLCB0aGlzLm1hcF8pO1xuICAgIHRoaXMuZ2xvYmVfID0gbmV3IENlc2l1bS5HbG9iZShDZXNpdW0uRWxsaXBzb2lkLldHUzg0KTtcbiAgICB0aGlzLmdsb2JlXy5iYXNlQ29sb3IgPSBDZXNpdW0uQ29sb3IuV0hJVEU7XG4gICAgdGhpcy5zY2VuZV8uZ2xvYmUgPSB0aGlzLmdsb2JlXztcbiAgICB0aGlzLnNjZW5lXy5za3lBdG1vc3BoZXJlID0gbmV3IENlc2l1bS5Ta3lBdG1vc3BoZXJlKCk7XG4gICAgdmFyIGZpcnN0SW1hZ2VyeVByb3ZpZGVyID0gbmV3IENlc2l1bS5TaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyKHtcbiAgICAgIHVybDogJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBUUFBQUMxSEF3Q0FBQUFDMGxFUVZSNDJtTmtZQUFBQUFZQUFqQ0IwQzhBQUFBQVNVVk9SSzVDWUlJPScsXG4gICAgICByZWN0YW5nbGU6IENlc2l1bS5SZWN0YW5nbGUuZnJvbURlZ3JlZXMoMCwgMCwgMSwgMSlcbiAgICB9KTtcbiAgICB0aGlzLmdsb2JlXy5pbWFnZXJ5TGF5ZXJzLmFkZEltYWdlcnlQcm92aWRlcihmaXJzdEltYWdlcnlQcm92aWRlciwgMCk7XG4gICAgdGhpcy5kYXRhU291cmNlQ29sbGVjdGlvbl8gPSBuZXcgQ2VzaXVtLkRhdGFTb3VyY2VDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy5kYXRhU291cmNlRGlzcGxheV8gPSBuZXcgQ2VzaXVtLkRhdGFTb3VyY2VEaXNwbGF5KHtcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lXyxcbiAgICAgIGRhdGFTb3VyY2VDb2xsZWN0aW9uOiB0aGlzLmRhdGFTb3VyY2VDb2xsZWN0aW9uX1xuICAgIH0pO1xuICAgIHZhciBzeW5jaHJvbml6ZXJzID0gb3B0aW9ucy5jcmVhdGVTeW5jaHJvbml6ZXJzID8gb3B0aW9ucy5jcmVhdGVTeW5jaHJvbml6ZXJzKHRoaXMubWFwXywgdGhpcy5zY2VuZV8sIHRoaXMuZGF0YVNvdXJjZUNvbGxlY3Rpb25fKSA6IFtuZXcgb2xjc1Jhc3RlclN5bmNocm9uaXplcih0aGlzLm1hcF8sIHRoaXMuc2NlbmVfKSwgbmV3IG9sY3NWZWN0b3JTeW5jaHJvbml6ZXIodGhpcy5tYXBfLCB0aGlzLnNjZW5lXyksIG5ldyBvbGNzT3ZlcmxheVN5bmNocm9uaXplcih0aGlzLm1hcF8sIHRoaXMuc2NlbmVfKV07XG4gICAgdGhpcy5oYW5kbGVSZXNpemVfKCk7XG5cbiAgICBmb3IgKHZhciBfaSA9IHN5bmNocm9uaXplcnMubGVuZ3RoIC0gMTsgX2kgPj0gMDsgLS1faSkge1xuICAgICAgc3luY2hyb25pemVyc1tfaV0uc3luY2hyb25pemUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RGcmFtZVRpbWVfID0gMDtcbiAgICB0aGlzLnJlbmRlcklkXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRhcmdldEZyYW1lUmF0ZV8gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdGhpcy5ibG9ja0Nlc2l1bVJlbmRlcmluZ18gPSBmYWxzZTtcbiAgICB0aGlzLndhcm1pbmdVcF8gPSBmYWxzZTtcbiAgICB0aGlzLnRyYWNrZWRGZWF0dXJlXyA9IG51bGw7XG4gICAgdGhpcy50cmFja2VkRW50aXR5XyA9IG51bGw7XG4gICAgdGhpcy5lbnRpdHlWaWV3XyA9IG51bGw7XG4gICAgdGhpcy5uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZV8gPSBmYWxzZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlU2NyYXRjaF8gPSBuZXcgQ2VzaXVtLkJvdW5kaW5nU3BoZXJlKCk7XG4gICAgdmFyIGV2ZW50SGVscGVyID0gbmV3IENlc2l1bS5FdmVudEhlbHBlcigpO1xuICAgIGV2ZW50SGVscGVyLmFkZCh0aGlzLnNjZW5lXy5wb3N0UmVuZGVyLCBPTENlc2l1bS5wcm90b3R5cGUudXBkYXRlVHJhY2tlZEVudGl0eV8sIHRoaXMpO1xuICAgIENlc2l1bS5DYW1lcmEuZW5hYmxlU3VzcGVuZFRlcnJhaW5BZGp1c3RtZW50ID0gZmFsc2U7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gT0xDZXNpdW0ucHJvdG90eXBlO1xuXG4gIF9wcm90by5yZW5kZXJfID0gZnVuY3Rpb24gcmVuZGVyXygpIHtcbiAgICBpZiAodGhpcy5yZW5kZXJJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXJJZF8pO1xuICAgICAgdGhpcy5yZW5kZXJJZF8gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKCh0aGlzLmVuYWJsZWRfIHx8IHRoaXMud2FybWluZ1VwXykgJiYgIXRoaXMuYmxvY2tDZXNpdW1SZW5kZXJpbmdfKSB7XG4gICAgICB0aGlzLnJlbmRlcklkXyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLm9uQW5pbWF0aW9uRnJhbWVfLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ub25BbmltYXRpb25GcmFtZV8gPSBmdW5jdGlvbiBvbkFuaW1hdGlvbkZyYW1lXyhmcmFtZVRpbWUpIHtcbiAgICB0aGlzLnJlbmRlcklkXyA9IHVuZGVmaW5lZDtcbiAgICB2YXIgaW50ZXJ2YWwgPSAxMDAwLjAgLyB0aGlzLnRhcmdldEZyYW1lUmF0ZV87XG4gICAgdmFyIGRlbHRhID0gZnJhbWVUaW1lIC0gdGhpcy5sYXN0RnJhbWVUaW1lXztcblxuICAgIGlmIChkZWx0YSA8IGludGVydmFsKSB7XG4gICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RGcmFtZVRpbWVfID0gZnJhbWVUaW1lO1xuICAgIHZhciBqdWxpYW5EYXRlID0gdGhpcy50aW1lXygpO1xuICAgIHRoaXMuc2NlbmVfLmluaXRpYWxpemVGcmFtZSgpO1xuICAgIHRoaXMuaGFuZGxlUmVzaXplXygpO1xuICAgIHRoaXMuZGF0YVNvdXJjZURpc3BsYXlfLnVwZGF0ZShqdWxpYW5EYXRlKTtcblxuICAgIGlmICh0aGlzLmVudGl0eVZpZXdfKSB7XG4gICAgICB2YXIgdHJhY2tlZEVudGl0eSA9IHRoaXMudHJhY2tlZEVudGl0eV87XG4gICAgICB2YXIgdHJhY2tlZFN0YXRlID0gdGhpcy5kYXRhU291cmNlRGlzcGxheV8uZ2V0Qm91bmRpbmdTcGhlcmUodHJhY2tlZEVudGl0eSwgZmFsc2UsIHRoaXMuYm91bmRpbmdTcGhlcmVTY3JhdGNoXyk7XG5cbiAgICAgIGlmICh0cmFja2VkU3RhdGUgPT09IENlc2l1bS5Cb3VuZGluZ1NwaGVyZVN0YXRlLkRPTkUpIHtcbiAgICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVNjcmF0Y2hfLnJhZGl1cyA9IDE7XG4gICAgICAgIHRoaXMuZW50aXR5Vmlld18udXBkYXRlKGp1bGlhbkRhdGUsIHRoaXMuYm91bmRpbmdTcGhlcmVTY3JhdGNoXyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zY2VuZV8ucmVuZGVyKGp1bGlhbkRhdGUpO1xuICAgIHRoaXMuY2FtZXJhXy5jaGVja0NhbWVyYUNoYW5nZSgpO1xuICAgIHRoaXMucmVuZGVyXygpO1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVUcmFja2VkRW50aXR5XyA9IGZ1bmN0aW9uIHVwZGF0ZVRyYWNrZWRFbnRpdHlfKCkge1xuICAgIGlmICghdGhpcy5uZWVkVHJhY2tlZEVudGl0eVVwZGF0ZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdHJhY2tlZEVudGl0eSA9IHRoaXMudHJhY2tlZEVudGl0eV87XG4gICAgdmFyIHNjZW5lID0gdGhpcy5zY2VuZV87XG4gICAgdmFyIHN0YXRlID0gdGhpcy5kYXRhU291cmNlRGlzcGxheV8uZ2V0Qm91bmRpbmdTcGhlcmUodHJhY2tlZEVudGl0eSwgZmFsc2UsIHRoaXMuYm91bmRpbmdTcGhlcmVTY3JhdGNoXyk7XG5cbiAgICBpZiAoc3RhdGUgPT09IENlc2l1bS5Cb3VuZGluZ1NwaGVyZVN0YXRlLlBFTkRJTkcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzY2VuZS5zY3JlZW5TcGFjZUNhbWVyYUNvbnRyb2xsZXIuZW5hYmxlVGlsdCA9IGZhbHNlO1xuICAgIHZhciBicyA9IHN0YXRlICE9PSBDZXNpdW0uQm91bmRpbmdTcGhlcmVTdGF0ZS5GQUlMRUQgPyB0aGlzLmJvdW5kaW5nU3BoZXJlU2NyYXRjaF8gOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoYnMpIHtcbiAgICAgIGJzLnJhZGl1cyA9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdHlWaWV3XyA9IG5ldyBDZXNpdW0uRW50aXR5Vmlldyh0cmFja2VkRW50aXR5LCBzY2VuZSwgc2NlbmUubWFwUHJvamVjdGlvbi5lbGxpcHNvaWQpO1xuICAgIHRoaXMuZW50aXR5Vmlld18udXBkYXRlKHRoaXMudGltZV8oKSwgYnMpO1xuICAgIHRoaXMubmVlZFRyYWNrZWRFbnRpdHlVcGRhdGVfID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVJlc2l6ZV8gPSBmdW5jdGlvbiBoYW5kbGVSZXNpemVfKCkge1xuICAgIHZhciB3aWR0aCA9IHRoaXMuY2FudmFzXy5jbGllbnRXaWR0aDtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5jYW52YXNfLmNsaWVudEhlaWdodDtcblxuICAgIGlmICh3aWR0aCA9PT0gMCB8IGhlaWdodCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh3aWR0aCA9PT0gdGhpcy5jYW52YXNDbGllbnRXaWR0aF8gJiYgaGVpZ2h0ID09PSB0aGlzLmNhbnZhc0NsaWVudEhlaWdodF8gJiYgIXRoaXMucmVzb2x1dGlvblNjYWxlQ2hhbmdlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVzb2x1dGlvblNjYWxlID0gdGhpcy5yZXNvbHV0aW9uU2NhbGVfO1xuXG4gICAgaWYgKCFvbGNzVXRpbC5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkKCkpIHtcbiAgICAgIHJlc29sdXRpb25TY2FsZSAqPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxLjA7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uU2NhbGVDaGFuZ2VkXyA9IGZhbHNlO1xuICAgIHRoaXMuY2FudmFzQ2xpZW50V2lkdGhfID0gd2lkdGg7XG4gICAgdGhpcy5jYW52YXNDbGllbnRIZWlnaHRfID0gaGVpZ2h0O1xuICAgIHdpZHRoICo9IHJlc29sdXRpb25TY2FsZTtcbiAgICBoZWlnaHQgKj0gcmVzb2x1dGlvblNjYWxlO1xuICAgIHRoaXMuY2FudmFzXy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuY2FudmFzXy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5zY2VuZV8uY2FtZXJhLmZydXN0dW0uYXNwZWN0UmF0aW8gPSB3aWR0aCAvIGhlaWdodDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0Q2FtZXJhID0gZnVuY3Rpb24gZ2V0Q2FtZXJhKCkge1xuICAgIHJldHVybiB0aGlzLmNhbWVyYV87XG4gIH07XG5cbiAgX3Byb3RvLmdldE9sTWFwID0gZnVuY3Rpb24gZ2V0T2xNYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfTtcblxuICBfcHJvdG8uZ2V0T2xWaWV3ID0gZnVuY3Rpb24gZ2V0T2xWaWV3KCkge1xuICAgIHZhciB2aWV3ID0gdGhpcy5tYXBfLmdldFZpZXcoKTtcbiAgICBjb25zb2xlLmFzc2VydCh2aWV3KTtcbiAgICByZXR1cm4gdmlldztcbiAgfTtcblxuICBfcHJvdG8uZ2V0Q2VzaXVtU2NlbmUgPSBmdW5jdGlvbiBnZXRDZXNpdW1TY2VuZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zY2VuZV87XG4gIH07XG5cbiAgX3Byb3RvLmdldERhdGFTb3VyY2VzID0gZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVNvdXJjZUNvbGxlY3Rpb25fO1xuICB9O1xuXG4gIF9wcm90by5nZXREYXRhU291cmNlRGlzcGxheSA9IGZ1bmN0aW9uIGdldERhdGFTb3VyY2VEaXNwbGF5KCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2VEaXNwbGF5XztcbiAgfTtcblxuICBfcHJvdG8uZ2V0RW5hYmxlZCA9IGZ1bmN0aW9uIGdldEVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlZF87XG4gIH07XG5cbiAgX3Byb3RvLnNldEVuYWJsZWQgPSBmdW5jdGlvbiBzZXRFbmFibGVkKGVuYWJsZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5lbmFibGVkXyA9PT0gZW5hYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5lbmFibGVkXyA9IGVuYWJsZTtcbiAgICB0aGlzLmNvbnRhaW5lcl8uc3R5bGUudmlzaWJpbGl0eSA9IHRoaXMuZW5hYmxlZF8gPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbiAgICB2YXIgaW50ZXJhY3Rpb25zO1xuXG4gICAgaWYgKHRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIHRoaXMudGhyb3dPblVuaXRpYWxpemVkTWFwXygpO1xuXG4gICAgICBpZiAodGhpcy5pc092ZXJNYXBfKSB7XG4gICAgICAgIGludGVyYWN0aW9ucyA9IHRoaXMubWFwXy5nZXRJbnRlcmFjdGlvbnMoKTtcbiAgICAgICAgaW50ZXJhY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpLCBhcnIpIHtcbiAgICAgICAgICBfdGhpcy5wYXVzZWRJbnRlcmFjdGlvbnNfLnB1c2goZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW50ZXJhY3Rpb25zLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5tYXBfLmFkZEludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnBhdXNlZEludGVyYWN0aW9uc18ucHVzaChpbnRlcmFjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tYXBfLnJlbW92ZUludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnBhdXNlZEludGVyYWN0aW9uc18gPSBfdGhpcy5wYXVzZWRJbnRlcmFjdGlvbnNfLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgcmV0dXJuIGkgIT09IGludGVyYWN0aW9uO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByb290R3JvdXAgPSB0aGlzLm1hcF8uZ2V0TGF5ZXJHcm91cCgpO1xuXG4gICAgICAgIGlmIChyb290R3JvdXAuZ2V0VmlzaWJsZSgpKSB7XG4gICAgICAgICAgdGhpcy5oaWRkZW5Sb290R3JvdXBfID0gcm9vdEdyb3VwO1xuICAgICAgICAgIHRoaXMuaGlkZGVuUm9vdEdyb3VwXy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuY2xhc3NMaXN0LmFkZCgnb2xjcy1oaWRlb3ZlcmxheScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNhbWVyYV8ucmVhZEZyb21WaWV3KCk7XG4gICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuaXNPdmVyTWFwXykge1xuICAgICAgICBpbnRlcmFjdGlvbnMgPSB0aGlzLm1hcF8uZ2V0SW50ZXJhY3Rpb25zKCk7XG4gICAgICAgIHRoaXMucGF1c2VkSW50ZXJhY3Rpb25zXy5mb3JFYWNoKGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgICAgIGludGVyYWN0aW9ucy5wdXNoKGludGVyYWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGF1c2VkSW50ZXJhY3Rpb25zXy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHRoaXMubWFwXy5hZGRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5tYXBfLmdldEludGVyYWN0aW9ucygpLnB1c2goaW50ZXJhY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubWFwXy5yZW1vdmVJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5tYXBfLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5jbGFzc0xpc3QucmVtb3ZlKCdvbGNzLWhpZGVvdmVybGF5Jyk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGlkZGVuUm9vdEdyb3VwXykge1xuICAgICAgICAgIHRoaXMuaGlkZGVuUm9vdEdyb3VwXy5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICAgIHRoaXMuaGlkZGVuUm9vdEdyb3VwXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jYW1lcmFfLnVwZGF0ZVZpZXcoKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLndhcm1VcCA9IGZ1bmN0aW9uIHdhcm1VcChoZWlnaHQsIHRpbWVvdXQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmICh0aGlzLmVuYWJsZWRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy50aHJvd09uVW5pdGlhbGl6ZWRNYXBfKCk7XG4gICAgdGhpcy5jYW1lcmFfLnJlYWRGcm9tVmlldygpO1xuICAgIHZhciBlbGxpcHNvaWQgPSB0aGlzLmdsb2JlXy5lbGxpcHNvaWQ7XG4gICAgdmFyIGNzQ2FtZXJhID0gdGhpcy5zY2VuZV8uY2FtZXJhO1xuICAgIHZhciBwb3NpdGlvbiA9IGVsbGlwc29pZC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhjc0NhbWVyYS5wb3NpdGlvbik7XG5cbiAgICBpZiAocG9zaXRpb24uaGVpZ2h0IDwgaGVpZ2h0KSB7XG4gICAgICBwb3NpdGlvbi5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBjc0NhbWVyYS5wb3NpdGlvbiA9IGVsbGlwc29pZC5jYXJ0b2dyYXBoaWNUb0NhcnRlc2lhbihwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy53YXJtaW5nVXBfID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi53YXJtaW5nVXBfID0gZmFsc2U7XG4gICAgfSwgdGltZW91dCk7XG4gIH07XG5cbiAgX3Byb3RvLnNldEJsb2NrQ2VzaXVtUmVuZGVyaW5nID0gZnVuY3Rpb24gc2V0QmxvY2tDZXNpdW1SZW5kZXJpbmcoYmxvY2spIHtcbiAgICBpZiAodGhpcy5ibG9ja0Nlc2l1bVJlbmRlcmluZ18gIT09IGJsb2NrKSB7XG4gICAgICB0aGlzLmJsb2NrQ2VzaXVtUmVuZGVyaW5nXyA9IGJsb2NrO1xuICAgICAgdGhpcy5yZW5kZXJfKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5lbmFibGVBdXRvUmVuZGVyTG9vcCA9IGZ1bmN0aW9uIGVuYWJsZUF1dG9SZW5kZXJMb29wKCkge1xuICAgIGlmICghdGhpcy5hdXRvUmVuZGVyTG9vcF8pIHtcbiAgICAgIHRoaXMuYXV0b1JlbmRlckxvb3BfID0gbmV3IG9sY3NBdXRvUmVuZGVyTG9vcCh0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmdldEF1dG9SZW5kZXJMb29wID0gZnVuY3Rpb24gZ2V0QXV0b1JlbmRlckxvb3AoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0b1JlbmRlckxvb3BfO1xuICB9O1xuXG4gIF9wcm90by5zZXRSZXNvbHV0aW9uU2NhbGUgPSBmdW5jdGlvbiBzZXRSZXNvbHV0aW9uU2NhbGUodmFsdWUpIHtcbiAgICB2YWx1ZSA9IE1hdGgubWF4KDAsIHZhbHVlKTtcblxuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5yZXNvbHV0aW9uU2NhbGVfKSB7XG4gICAgICB0aGlzLnJlc29sdXRpb25TY2FsZV8gPSBNYXRoLm1heCgwLCB2YWx1ZSk7XG4gICAgICB0aGlzLnJlc29sdXRpb25TY2FsZUNoYW5nZWRfID0gdHJ1ZTtcblxuICAgICAgaWYgKHRoaXMuYXV0b1JlbmRlckxvb3BfKSB7XG4gICAgICAgIHRoaXMuYXV0b1JlbmRlckxvb3BfLnJlc3RhcnRSZW5kZXJMb29wKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5zZXRUYXJnZXRGcmFtZVJhdGUgPSBmdW5jdGlvbiBzZXRUYXJnZXRGcmFtZVJhdGUodmFsdWUpIHtcbiAgICBpZiAodGhpcy50YXJnZXRGcmFtZVJhdGVfICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy50YXJnZXRGcmFtZVJhdGVfID0gdmFsdWU7XG4gICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnRocm93T25Vbml0aWFsaXplZE1hcF8gPSBmdW5jdGlvbiB0aHJvd09uVW5pdGlhbGl6ZWRNYXBfKCkge1xuICAgIHZhciBtYXAgPSB0aGlzLm1hcF87XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZhciBjZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuXG4gICAgaWYgKCF2aWV3LmlzRGVmKCkgfHwgaXNOYU4oY2VudGVyWzBdKSB8fCBpc05hTihjZW50ZXJbMV0pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgT3BlbkxheWVycyBtYXAgaXMgbm90IHByb3Blcmx5IGluaXRpYWxpemVkOiBcIiArIGNlbnRlciArIFwiIC8gXCIgKyB2aWV3LmdldFJlc29sdXRpb24oKSk7XG4gICAgfVxuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhPTENlc2l1bSwgW3tcbiAgICBrZXk6IFwidHJhY2tlZEZlYXR1cmVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyYWNrZWRGZWF0dXJlXztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KGZlYXR1cmUpIHtcbiAgICAgIGlmICh0aGlzLnRyYWNrZWRGZWF0dXJlXyAhPT0gZmVhdHVyZSkge1xuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lXztcblxuICAgICAgICBpZiAoIWZlYXR1cmUgfHwgIWZlYXR1cmUuZ2V0R2VvbWV0cnkoKSkge1xuICAgICAgICAgIHRoaXMubmVlZFRyYWNrZWRFbnRpdHlVcGRhdGVfID0gZmFsc2U7XG4gICAgICAgICAgc2NlbmUuc2NyZWVuU3BhY2VDYW1lcmFDb250cm9sbGVyLmVuYWJsZVRpbHQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKHRoaXMudHJhY2tlZEVudGl0eV8pIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZURpc3BsYXlfLmRlZmF1bHREYXRhU291cmNlLmVudGl0aWVzLnJlbW92ZSh0aGlzLnRyYWNrZWRFbnRpdHlfKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnRyYWNrZWRFbnRpdHlfID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnRyYWNrZWRGZWF0dXJlXyA9IG51bGw7XG4gICAgICAgICAgdGhpcy5lbnRpdHlWaWV3XyA9IG51bGw7XG4gICAgICAgICAgc2NlbmUuY2FtZXJhLmxvb2tBdFRyYW5zZm9ybShDZXNpdW0uTWF0cml4NC5JREVOVElUWSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmFja2VkRmVhdHVyZV8gPSBmZWF0dXJlO1xuICAgICAgICB0aGlzLm5lZWRUcmFja2VkRW50aXR5VXBkYXRlXyA9IHRydWU7XG4gICAgICAgIHZhciB0bzQzMjZUcmFuc2Zvcm0gPSB0aGlzLnRvNDMyNlRyYW5zZm9ybV87XG5cbiAgICAgICAgdmFyIHRvQ2VzaXVtUG9zaXRpb24gPSBmdW5jdGlvbiB0b0Nlc2l1bVBvc2l0aW9uKCkge1xuICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KTtcbiAgICAgICAgICB2YXIgY29vID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICB2YXIgY29vNDMyNiA9IHRvNDMyNlRyYW5zZm9ybShjb28sIHVuZGVmaW5lZCwgY29vLmxlbmd0aCk7XG4gICAgICAgICAgcmV0dXJuIG9sY3NDb3JlLm9sNDMyNkNvb3JkaW5hdGVUb0Nlc2l1bUNhcnRlc2lhbihjb280MzI2KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAncG9zaXRpb24nOiBuZXcgQ2VzaXVtLkNhbGxiYWNrUHJvcGVydHkoZnVuY3Rpb24gKHRpbWUsIHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRvQ2VzaXVtUG9zaXRpb24oKTtcbiAgICAgICAgICB9LCBmYWxzZSksXG4gICAgICAgICAgJ3BvaW50Jzoge1xuICAgICAgICAgICAgJ3BpeGVsU2l6ZSc6IDEsXG4gICAgICAgICAgICAnY29sb3InOiBDZXNpdW0uQ29sb3IuVFJBTlNQQVJFTlRcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhY2tlZEVudGl0eV8gPSB0aGlzLmRhdGFTb3VyY2VEaXNwbGF5Xy5kZWZhdWx0RGF0YVNvdXJjZS5lbnRpdGllcy5hZGQob3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE9MQ2VzaXVtO1xufSgpO1xuXG5leHBvcnQgZGVmYXVsdCBPTENlc2l1bTsiLCJpbXBvcnQgb2xjc1N5bmNocm9uaXplZE92ZXJsYXkgZnJvbSAnLi9TeW5jaHJvbml6ZWRPdmVybGF5LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4vdXRpbC5qcyc7XG5cbnZhciBPdmVybGF5U3luY2hyb25pemVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBPdmVybGF5U3luY2hyb25pemVyKG1hcCwgc2NlbmUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgdGhpcy5vdmVybGF5c18gPSB0aGlzLm1hcC5nZXRPdmVybGF5cygpO1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnQnO1xuICAgIHZhciBvdmVybGF5RXZlbnRzID0gWydjbGljaycsICdkYmxjbGljaycsICdtb3VzZWRvd24nLCAndG91Y2hzdGFydCcsICdNU1BvaW50ZXJEb3duJywgJ3BvaW50ZXJkb3duJywgJ21vdXNld2hlZWwnLCAnd2hlZWwnXTtcbiAgICBvdmVybGF5RXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIHJldHVybiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLnNjZW5lLmNhbnZhcy5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8pO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyJztcbiAgICB0aGlzLnNjZW5lLmNhbnZhcy5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheUNvbnRhaW5lcl8pO1xuICAgIHRoaXMub3ZlcmxheU1hcF8gPSB7fTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBPdmVybGF5U3luY2hyb25pemVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCA9IGZ1bmN0aW9uIGdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gIH07XG5cbiAgX3Byb3RvLmdldE92ZXJsYXlDb250YWluZXIgPSBmdW5jdGlvbiBnZXRPdmVybGF5Q29udGFpbmVyKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJfO1xuICB9O1xuXG4gIF9wcm90by5zeW5jaHJvbml6ZSA9IGZ1bmN0aW9uIHN5bmNocm9uaXplKCkge1xuICAgIHRoaXMuZGVzdHJveUFsbCgpO1xuICAgIHRoaXMuYWRkT3ZlcmxheXMoKTtcbiAgICB0aGlzLm92ZXJsYXlzXy5vbignYWRkJywgdGhpcy5hZGRPdmVybGF5RnJvbUV2ZW50Xy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLm92ZXJsYXlzXy5vbigncmVtb3ZlJywgdGhpcy5yZW1vdmVPdmVybGF5RnJvbUV2ZW50Xy5iaW5kKHRoaXMpKTtcbiAgfTtcblxuICBfcHJvdG8uYWRkT3ZlcmxheUZyb21FdmVudF8gPSBmdW5jdGlvbiBhZGRPdmVybGF5RnJvbUV2ZW50XyhldmVudCkge1xuICAgIHZhciBvdmVybGF5ID0gZXZlbnQuZWxlbWVudDtcbiAgICB0aGlzLmFkZE92ZXJsYXkob3ZlcmxheSk7XG4gIH07XG5cbiAgX3Byb3RvLmFkZE92ZXJsYXlzID0gZnVuY3Rpb24gYWRkT3ZlcmxheXMoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB0aGlzLm92ZXJsYXlzXy5mb3JFYWNoKGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICBfdGhpczIuYWRkT3ZlcmxheShvdmVybGF5KTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uYWRkT3ZlcmxheSA9IGZ1bmN0aW9uIGFkZE92ZXJsYXkob3ZlcmxheSkge1xuICAgIGlmICghb3ZlcmxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjZXNpdW1PdmVybGF5ID0gbmV3IG9sY3NTeW5jaHJvbml6ZWRPdmVybGF5KHtcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgc3luY2hyb25pemVyOiB0aGlzLFxuICAgICAgcGFyZW50OiBvdmVybGF5XG4gICAgfSk7XG4gICAgdmFyIG92ZXJsYXlJZCA9IGdldFVpZChvdmVybGF5KS50b1N0cmluZygpO1xuICAgIHRoaXMub3ZlcmxheU1hcF9bb3ZlcmxheUlkXSA9IGNlc2l1bU92ZXJsYXk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZU92ZXJsYXlGcm9tRXZlbnRfID0gZnVuY3Rpb24gcmVtb3ZlT3ZlcmxheUZyb21FdmVudF8oZXZlbnQpIHtcbiAgICB2YXIgcmVtb3ZlZE92ZXJsYXkgPSBldmVudC5lbGVtZW50O1xuICAgIHRoaXMucmVtb3ZlT3ZlcmxheShyZW1vdmVkT3ZlcmxheSk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZU92ZXJsYXkgPSBmdW5jdGlvbiByZW1vdmVPdmVybGF5KG92ZXJsYXkpIHtcbiAgICB2YXIgb3ZlcmxheUlkID0gZ2V0VWlkKG92ZXJsYXkpLnRvU3RyaW5nKCk7XG4gICAgdmFyIGNzT3ZlcmxheSA9IHRoaXMub3ZlcmxheU1hcF9bb3ZlcmxheUlkXTtcblxuICAgIGlmIChjc092ZXJsYXkpIHtcbiAgICAgIGNzT3ZlcmxheS5kZXN0cm95KCk7XG4gICAgICBkZWxldGUgdGhpcy5vdmVybGF5TWFwX1tvdmVybGF5SWRdO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uZGVzdHJveUFsbCA9IGZ1bmN0aW9uIGRlc3Ryb3lBbGwoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLm92ZXJsYXlNYXBfKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBvdmVybGF5ID0gX3RoaXMzLm92ZXJsYXlNYXBfW2tleV07XG4gICAgICBvdmVybGF5LmRlc3Ryb3koKTtcbiAgICAgIGRlbGV0ZSBfdGhpczMub3ZlcmxheU1hcF9ba2V5XTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gT3ZlcmxheVN5bmNocm9uaXplcjtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgT3ZlcmxheVN5bmNocm9uaXplcjsiLCJmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxuaW1wb3J0IG9sTGF5ZXJHcm91cCBmcm9tICdvbC9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQsIHN0YWJsZVNvcnQgfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IG9sY3NBYnN0cmFjdFN5bmNocm9uaXplciBmcm9tICcuL0Fic3RyYWN0U3luY2hyb25pemVyLmpzJztcbmltcG9ydCBvbGNzQ29yZSBmcm9tICcuL2NvcmUuanMnO1xuXG52YXIgUmFzdGVyU3luY2hyb25pemVyID0gZnVuY3Rpb24gKF9vbGNzQWJzdHJhY3RTeW5jaHJvbikge1xuICBfaW5oZXJpdHNMb29zZShSYXN0ZXJTeW5jaHJvbml6ZXIsIF9vbGNzQWJzdHJhY3RTeW5jaHJvbik7XG5cbiAgZnVuY3Rpb24gUmFzdGVyU3luY2hyb25pemVyKG1hcCwgc2NlbmUpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9vbGNzQWJzdHJhY3RTeW5jaHJvbi5jYWxsKHRoaXMsIG1hcCwgc2NlbmUpIHx8IHRoaXM7XG4gICAgX3RoaXMuY2VzaXVtTGF5ZXJzXyA9IHNjZW5lLmltYWdlcnlMYXllcnM7XG4gICAgX3RoaXMub3VyTGF5ZXJzXyA9IG5ldyBDZXNpdW0uSW1hZ2VyeUxheWVyQ29sbGVjdGlvbigpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBSYXN0ZXJTeW5jaHJvbml6ZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGRDZXNpdW1PYmplY3QgPSBmdW5jdGlvbiBhZGRDZXNpdW1PYmplY3Qob2JqZWN0KSB7XG4gICAgdGhpcy5jZXNpdW1MYXllcnNfLmFkZChvYmplY3QpO1xuICAgIHRoaXMub3VyTGF5ZXJzXy5hZGQob2JqZWN0KTtcbiAgfTtcblxuICBfcHJvdG8uZGVzdHJveUNlc2l1bU9iamVjdCA9IGZ1bmN0aW9uIGRlc3Ryb3lDZXNpdW1PYmplY3Qob2JqZWN0KSB7XG4gICAgb2JqZWN0LmRlc3Ryb3koKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlU2luZ2xlQ2VzaXVtT2JqZWN0ID0gZnVuY3Rpb24gcmVtb3ZlU2luZ2xlQ2VzaXVtT2JqZWN0KG9iamVjdCwgZGVzdHJveSkge1xuICAgIHRoaXMuY2VzaXVtTGF5ZXJzXy5yZW1vdmUob2JqZWN0LCBkZXN0cm95KTtcbiAgICB0aGlzLm91ckxheWVyc18ucmVtb3ZlKG9iamVjdCwgZmFsc2UpO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVBbGxDZXNpdW1PYmplY3RzID0gZnVuY3Rpb24gcmVtb3ZlQWxsQ2VzaXVtT2JqZWN0cyhkZXN0cm95KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm91ckxheWVyc18ubGVuZ3RoOyArK2kpIHtcbiAgICAgIHRoaXMuY2VzaXVtTGF5ZXJzXy5yZW1vdmUodGhpcy5vdXJMYXllcnNfLmdldChpKSwgZGVzdHJveSk7XG4gICAgfVxuXG4gICAgdGhpcy5vdXJMYXllcnNfLnJlbW92ZUFsbChmYWxzZSk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbnZlcnRMYXllclRvQ2VzaXVtSW1hZ2VyaWVzID0gZnVuY3Rpb24gY29udmVydExheWVyVG9DZXNpdW1JbWFnZXJpZXMob2xMYXllciwgdmlld1Byb2opIHtcbiAgICB2YXIgcmVzdWx0ID0gb2xjc0NvcmUudGlsZUxheWVyVG9JbWFnZXJ5TGF5ZXIodGhpcy5tYXAsIG9sTGF5ZXIsIHZpZXdQcm9qKTtcbiAgICByZXR1cm4gcmVzdWx0ID8gW3Jlc3VsdF0gOiBudWxsO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVTaW5nbGVMYXllckNvdW50ZXJwYXJ0cyA9IGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzKG9sTGF5ZXJXaXRoUGFyZW50cykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIG9sTGF5ZXIgPSBvbExheWVyV2l0aFBhcmVudHMubGF5ZXI7XG4gICAgdmFyIHVpZCA9IGdldFVpZChvbExheWVyKS50b1N0cmluZygpO1xuICAgIHZhciB2aWV3UHJvaiA9IHRoaXMudmlldy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgY29uc29sZS5hc3NlcnQodmlld1Byb2opO1xuICAgIHZhciBjZXNpdW1PYmplY3RzID0gdGhpcy5jb252ZXJ0TGF5ZXJUb0Nlc2l1bUltYWdlcmllcyhvbExheWVyLCB2aWV3UHJvaik7XG5cbiAgICBpZiAoY2VzaXVtT2JqZWN0cykge1xuICAgICAgdmFyIF90aGlzJG9sTGF5ZXJMaXN0ZW5LZTtcblxuICAgICAgdmFyIGxpc3RlbktleUFycmF5ID0gW107XG4gICAgICBbb2xMYXllcldpdGhQYXJlbnRzLmxheWVyXS5jb25jYXQob2xMYXllcldpdGhQYXJlbnRzLnBhcmVudHMpLmZvckVhY2goZnVuY3Rpb24gKG9sTGF5ZXJJdGVtKSB7XG4gICAgICAgIGxpc3RlbktleUFycmF5LnB1c2gob2xMYXllckl0ZW0ub24oWydjaGFuZ2U6b3BhY2l0eScsICdjaGFuZ2U6dmlzaWJsZSddLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoY2VzaXVtT2JqZWN0cyk7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNlc2l1bU9iamVjdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIG9sY3NDb3JlLnVwZGF0ZUNlc2l1bUxheWVyUHJvcGVydGllcyhvbExheWVyV2l0aFBhcmVudHMsIGNlc2l1bU9iamVjdHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2VzaXVtT2JqZWN0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBvbGNzQ29yZS51cGRhdGVDZXNpdW1MYXllclByb3BlcnRpZXMob2xMYXllcldpdGhQYXJlbnRzLCBjZXNpdW1PYmplY3RzW2ldKTtcbiAgICAgIH1cblxuICAgICAgbGlzdGVuS2V5QXJyYXkucHVzaChvbExheWVyLm9uKCdjaGFuZ2U6ZXh0ZW50JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGNlc2l1bU9iamVjdHMubGVuZ3RoOyArK19pKSB7XG4gICAgICAgICAgX3RoaXMyLmNlc2l1bUxheWVyc18ucmVtb3ZlKGNlc2l1bU9iamVjdHNbX2ldLCB0cnVlKTtcblxuICAgICAgICAgIF90aGlzMi5vdXJMYXllcnNfLnJlbW92ZShjZXNpdW1PYmplY3RzW19pXSwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIF90aGlzMi5sYXllck1hcFtnZXRVaWQob2xMYXllcildO1xuXG4gICAgICAgIF90aGlzMi5zeW5jaHJvbml6ZSgpO1xuICAgICAgfSkpO1xuICAgICAgbGlzdGVuS2V5QXJyYXkucHVzaChvbExheWVyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBjZXNpdW1PYmplY3RzLmxlbmd0aDsgKytfaTIpIHtcbiAgICAgICAgICB2YXIgcG9zaXRpb24gPSBfdGhpczIuY2VzaXVtTGF5ZXJzXy5pbmRleE9mKGNlc2l1bU9iamVjdHNbX2kyXSk7XG5cbiAgICAgICAgICBpZiAocG9zaXRpb24gPj0gMCkge1xuICAgICAgICAgICAgX3RoaXMyLmNlc2l1bUxheWVyc18ucmVtb3ZlKGNlc2l1bU9iamVjdHNbX2kyXSwgZmFsc2UpO1xuXG4gICAgICAgICAgICBfdGhpczIuY2VzaXVtTGF5ZXJzXy5hZGQoY2VzaXVtT2JqZWN0c1tfaTJdLCBwb3NpdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgICAgIChfdGhpcyRvbExheWVyTGlzdGVuS2UgPSB0aGlzLm9sTGF5ZXJMaXN0ZW5LZXlzW3VpZF0pLnB1c2guYXBwbHkoX3RoaXMkb2xMYXllckxpc3RlbktlLCBsaXN0ZW5LZXlBcnJheSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoY2VzaXVtT2JqZWN0cykgPyBjZXNpdW1PYmplY3RzIDogbnVsbDtcbiAgfTtcblxuICBfcHJvdG8ub3JkZXJMYXllcnMgPSBmdW5jdGlvbiBvcmRlckxheWVycygpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBsYXllcnMgPSBbXTtcbiAgICB2YXIgekluZGljZXMgPSB7fTtcbiAgICB2YXIgcXVldWUgPSBbdGhpcy5tYXBMYXllckdyb3VwXTtcblxuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgb2xMYXllciA9IHF1ZXVlLnNwbGljZSgwLCAxKVswXTtcbiAgICAgIGxheWVycy5wdXNoKG9sTGF5ZXIpO1xuICAgICAgekluZGljZXNbZ2V0VWlkKG9sTGF5ZXIpXSA9IG9sTGF5ZXIuZ2V0WkluZGV4KCkgfHwgMDtcblxuICAgICAgaWYgKG9sTGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICAgICAgdmFyIHN1YmxheWVycyA9IG9sTGF5ZXIuZ2V0TGF5ZXJzKCk7XG5cbiAgICAgICAgaWYgKHN1YmxheWVycykge1xuICAgICAgICAgIHF1ZXVlLnVuc2hpZnQuYXBwbHkocXVldWUsIF90b0NvbnN1bWFibGVBcnJheShzdWJsYXllcnMuZ2V0QXJyYXkoKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3RhYmxlU29ydChsYXllcnMsIGZ1bmN0aW9uIChsYXllcjEsIGxheWVyMikge1xuICAgICAgcmV0dXJuIHpJbmRpY2VzW2dldFVpZChsYXllcjEpXSAtIHpJbmRpY2VzW2dldFVpZChsYXllcjIpXTtcbiAgICB9KTtcbiAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAob2xMYXllcikge1xuICAgICAgdmFyIG9sTGF5ZXJJZCA9IGdldFVpZChvbExheWVyKS50b1N0cmluZygpO1xuICAgICAgdmFyIGNlc2l1bU9iamVjdHMgPSBfdGhpczMubGF5ZXJNYXBbb2xMYXllcklkXTtcblxuICAgICAgaWYgKGNlc2l1bU9iamVjdHMpIHtcbiAgICAgICAgY2VzaXVtT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChjZXNpdW1PYmplY3QpIHtcbiAgICAgICAgICBfdGhpczMucmFpc2VUb1RvcChjZXNpdW1PYmplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8ucmFpc2VUb1RvcCA9IGZ1bmN0aW9uIHJhaXNlVG9Ub3AoY291bnRlcnBhcnQpIHtcbiAgICB0aGlzLmNlc2l1bUxheWVyc18ucmFpc2VUb1RvcChjb3VudGVycGFydCk7XG4gIH07XG5cbiAgcmV0dXJuIFJhc3RlclN5bmNocm9uaXplcjtcbn0ob2xjc0Fic3RyYWN0U3luY2hyb25pemVyKTtcblxuZXhwb3J0IGRlZmF1bHQgUmFzdGVyU3luY2hyb25pemVyOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0O1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgaWYgKGl0KSBvID0gaXQ7XG4gICAgICB2YXIgaSA9IDA7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHtcbiAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IG9baSsrXVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG4gIH1cblxuICBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpO1xuICByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTtcbn1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxuaW1wb3J0IG9sT3ZlcmxheSBmcm9tICdvbC9PdmVybGF5LmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSwgcmVtb3ZlQ2hpbGRyZW4gfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IHsgdW5CeUtleSBhcyBvbE9ic2VydmFibGVVbkJ5S2V5IH0gZnJvbSAnb2wvT2JzZXJ2YWJsZS5qcyc7XG5cbnZhciBTeW5jaHJvbml6ZWRPdmVybGF5ID0gZnVuY3Rpb24gKF9vbE92ZXJsYXkpIHtcbiAgX2luaGVyaXRzTG9vc2UoU3luY2hyb25pemVkT3ZlcmxheSwgX29sT3ZlcmxheSk7XG5cbiAgZnVuY3Rpb24gU3luY2hyb25pemVkT3ZlcmxheShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgdmFyIHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuICAgIF90aGlzID0gX29sT3ZlcmxheS5jYWxsKHRoaXMsIHBhcmVudC5nZXRPcHRpb25zKCkpIHx8IHRoaXM7XG4gICAgX3RoaXMuc2NlbmVQb3N0UmVuZGVyTGlzdGVuZXJSZW1vdmVyXyA9IG51bGw7XG4gICAgX3RoaXMuc2NlbmVfID0gb3B0aW9ucy5zY2VuZTtcbiAgICBfdGhpcy5zeW5jaHJvbml6ZXJfID0gb3B0aW9ucy5zeW5jaHJvbml6ZXI7XG4gICAgX3RoaXMucGFyZW50XyA9IHBhcmVudDtcbiAgICBfdGhpcy5wb3NpdGlvbldHUzg0XyA9IHVuZGVmaW5lZDtcbiAgICBfdGhpcy5vYnNlcnZlcl8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihfdGhpcy5oYW5kbGVFbGVtZW50Q2hhbmdlZC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSk7XG4gICAgX3RoaXMuYXR0cmlidXRlT2JzZXJ2ZXJfID0gW107XG4gICAgX3RoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuXG4gICAgdmFyIHNldFByb3BlcnR5RnJvbUV2ZW50ID0gZnVuY3Rpb24gc2V0UHJvcGVydHlGcm9tRXZlbnQoZXZlbnQpIHtcbiAgICAgIHJldHVybiBfdGhpcy5zZXRQcm9wZXJ0eUZyb21FdmVudF8oZXZlbnQpO1xuICAgIH07XG5cbiAgICBfdGhpcy5saXN0ZW5lcktleXNfLnB1c2goX3RoaXMucGFyZW50Xy5vbignY2hhbmdlOnBvc2l0aW9uJywgc2V0UHJvcGVydHlGcm9tRXZlbnQpKTtcblxuICAgIF90aGlzLmxpc3RlbmVyS2V5c18ucHVzaChfdGhpcy5wYXJlbnRfLm9uKCdjaGFuZ2U6ZWxlbWVudCcsIHNldFByb3BlcnR5RnJvbUV2ZW50KSk7XG5cbiAgICBfdGhpcy5saXN0ZW5lcktleXNfLnB1c2goX3RoaXMucGFyZW50Xy5vbignY2hhbmdlOm9mZnNldCcsIHNldFByb3BlcnR5RnJvbUV2ZW50KSk7XG5cbiAgICBfdGhpcy5saXN0ZW5lcktleXNfLnB1c2goX3RoaXMucGFyZW50Xy5vbignY2hhbmdlOnBvc2l0aW9uJywgc2V0UHJvcGVydHlGcm9tRXZlbnQpKTtcblxuICAgIF90aGlzLmxpc3RlbmVyS2V5c18ucHVzaChfdGhpcy5wYXJlbnRfLm9uKCdjaGFuZ2U6cG9zaXRpb25pbmcnLCBzZXRQcm9wZXJ0eUZyb21FdmVudCkpO1xuXG4gICAgX3RoaXMuc2V0UHJvcGVydGllcyhfdGhpcy5wYXJlbnRfLmdldFByb3BlcnRpZXMoKSk7XG5cbiAgICBfdGhpcy5oYW5kbGVNYXBDaGFuZ2VkKCk7XG5cbiAgICBfdGhpcy5oYW5kbGVFbGVtZW50Q2hhbmdlZCgpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFN5bmNocm9uaXplZE92ZXJsYXkucHJvdG90eXBlO1xuXG4gIF9wcm90by5vYnNlcnZlVGFyZ2V0XyA9IGZ1bmN0aW9uIG9ic2VydmVUYXJnZXRfKHRhcmdldCkge1xuICAgIGlmICghdGhpcy5vYnNlcnZlcl8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9ic2VydmVyXy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5vYnNlcnZlcl8ub2JzZXJ2ZSh0YXJnZXQsIHtcbiAgICAgIGF0dHJpYnV0ZXM6IGZhbHNlLFxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmF0dHJpYnV0ZU9ic2VydmVyXy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJfLmxlbmd0aCA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbm9kZSA9IHRhcmdldC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmhhbmRsZUVsZW1lbnRDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlT2JzZXJ2ZXJfLnB1c2gob2JzZXJ2ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2V0UHJvcGVydHlGcm9tRXZlbnRfID0gZnVuY3Rpb24gc2V0UHJvcGVydHlGcm9tRXZlbnRfKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCAmJiBldmVudC5rZXkpIHtcbiAgICAgIHRoaXMuc2V0KGV2ZW50LmtleSwgZXZlbnQudGFyZ2V0LmdldChldmVudC5rZXkpKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmdldFNjZW5lID0gZnVuY3Rpb24gZ2V0U2NlbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NlbmVfO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNYXBDaGFuZ2VkID0gZnVuY3Rpb24gaGFuZGxlTWFwQ2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5zY2VuZVBvc3RSZW5kZXJMaXN0ZW5lclJlbW92ZXJfKSB7XG4gICAgICB0aGlzLnNjZW5lUG9zdFJlbmRlckxpc3RlbmVyUmVtb3Zlcl8oKTtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnNjZW5lUG9zdFJlbmRlckxpc3RlbmVyUmVtb3Zlcl8gPSBudWxsO1xuICAgIHZhciBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoKTtcblxuICAgIGlmIChzY2VuZSkge1xuICAgICAgdGhpcy5zY2VuZVBvc3RSZW5kZXJMaXN0ZW5lclJlbW92ZXJfID0gc2NlbmUucG9zdFJlbmRlci5hZGRFdmVudExpc3RlbmVyKHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMudXBkYXRlUGl4ZWxQb3NpdGlvbigpO1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuc3RvcEV2ZW50ID8gdGhpcy5zeW5jaHJvbml6ZXJfLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKSA6IHRoaXMuc3luY2hyb25pemVyXy5nZXRPdmVybGF5Q29udGFpbmVyKCk7XG5cbiAgICAgIGlmICh0aGlzLmluc2VydEZpcnN0KSB7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LCBjb250YWluZXIuY2hpbGROb2Rlc1swXSB8fCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlUG9zaXRpb25DaGFuZ2VkID0gZnVuY3Rpb24gaGFuZGxlUG9zaXRpb25DaGFuZ2VkKCkge1xuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSB0aGlzLnBhcmVudF8uZ2V0TWFwKCkuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTtcbiAgICAgIHRoaXMucG9zaXRpb25XR1M4NF8gPSB0cmFuc2Zvcm0ocG9zaXRpb24sIHNvdXJjZVByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wb3NpdGlvbldHUzg0XyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVBpeGVsUG9zaXRpb24oKTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRWxlbWVudENoYW5nZWQgPSBmdW5jdGlvbiBoYW5kbGVFbGVtZW50Q2hhbmdlZCgpIHtcbiAgICBmdW5jdGlvbiBjbG9uZU5vZGUobm9kZSwgcGFyZW50KSB7XG4gICAgICB2YXIgY2xvbmUgPSBub2RlLmNsb25lTm9kZSgpO1xuXG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9IE5vZGUuVEVYVF9OT0RFKSB7XG4gICAgICAgIGNsb25lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIGV2ZW50KSk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbm9kZXMgPSBub2RlLmNoaWxkTm9kZXM7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFub2Rlc1tpXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvbmVOb2RlKG5vZGVzW2ldLCBjbG9uZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjbG9uZTtcbiAgICB9XG5cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLmVsZW1lbnQpO1xuICAgIHZhciBlbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KCk7XG5cbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSAmJiBlbGVtZW50LnBhcmVudE5vZGUuY2hpbGROb2Rlcykge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGVsZW1lbnQucGFyZW50Tm9kZS5jaGlsZE5vZGVzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUsIG51bGwpO1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjbG9uZWROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZVRhcmdldF8oZWxlbWVudC5wYXJlbnROb2RlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnVwZGF0ZVBpeGVsUG9zaXRpb24gPSBmdW5jdGlvbiB1cGRhdGVQaXhlbFBvc2l0aW9uKCkge1xuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25XR1M4NF87XG5cbiAgICBpZiAoIXRoaXMuc2NlbmVfIHx8ICFwb3NpdGlvbikge1xuICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGVpZ2h0ID0gMDtcblxuICAgIGlmIChwb3NpdGlvbi5sZW5ndGggPT09IDIpIHtcbiAgICAgIHZhciBnbG9iZUhlaWdodCA9IHRoaXMuc2NlbmVfLmdsb2JlLmdldEhlaWdodChDZXNpdW0uQ2FydG9ncmFwaGljLmZyb21EZWdyZWVzKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSkpO1xuXG4gICAgICBpZiAoZ2xvYmVIZWlnaHQgJiYgdGhpcy5zY2VuZV8uZ2xvYmUudGlsZXNMb2FkZWQpIHtcbiAgICAgICAgcG9zaXRpb25bMl0gPSBnbG9iZUhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JlSGVpZ2h0KSB7XG4gICAgICAgIGhlaWdodCA9IGdsb2JlSGVpZ2h0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSBwb3NpdGlvblsyXTtcbiAgICB9XG5cbiAgICB2YXIgY2FydGVzaWFuID0gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBoZWlnaHQpO1xuICAgIHZhciBjYW1lcmEgPSB0aGlzLnNjZW5lXy5jYW1lcmE7XG4gICAgdmFyIGVsbGlwc29pZEJvdW5kaW5nU3BoZXJlID0gbmV3IENlc2l1bS5Cb3VuZGluZ1NwaGVyZShuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKSwgNjM1Njc1Mik7XG4gICAgdmFyIG9jY2x1ZGVyID0gbmV3IENlc2l1bS5PY2NsdWRlcihlbGxpcHNvaWRCb3VuZGluZ1NwaGVyZSwgY2FtZXJhLnBvc2l0aW9uKTtcblxuICAgIGlmICghb2NjbHVkZXIuaXNQb2ludFZpc2libGUoY2FydGVzaWFuKSkge1xuICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY3VsbGluZ1ZvbHVtZSA9IGNhbWVyYS5mcnVzdHVtLmNvbXB1dGVDdWxsaW5nVm9sdW1lKGNhbWVyYS5wb3NpdGlvbiwgY2FtZXJhLmRpcmVjdGlvbiwgY2FtZXJhLnVwKTtcblxuICAgIGlmIChjdWxsaW5nVm9sdW1lLmNvbXB1dGVWaXNpYmlsaXR5KG5ldyBDZXNpdW0uQm91bmRpbmdTcGhlcmUoY2FydGVzaWFuKSkgIT09IDEpIHtcbiAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRWaXNpYmxlKHRydWUpO1xuICAgIHZhciBwaXhlbENhcnRlc2lhbiA9IHRoaXMuc2NlbmVfLmNhcnRlc2lhblRvQ2FudmFzQ29vcmRpbmF0ZXMoY2FydGVzaWFuKTtcbiAgICB2YXIgcGl4ZWwgPSBbcGl4ZWxDYXJ0ZXNpYW4ueCwgcGl4ZWxDYXJ0ZXNpYW4ueV07XG4gICAgdmFyIG1hcFNpemUgPSBbdGhpcy5zY2VuZV8uY2FudmFzLndpZHRoLCB0aGlzLnNjZW5lXy5jYW52YXMuaGVpZ2h0XTtcbiAgICB0aGlzLnVwZGF0ZVJlbmRlcmVkUG9zaXRpb24ocGl4ZWwsIG1hcFNpemUpO1xuICB9O1xuXG4gIF9wcm90by5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zY2VuZVBvc3RSZW5kZXJMaXN0ZW5lclJlbW92ZXJfKSB7XG4gICAgICB0aGlzLnNjZW5lUG9zdFJlbmRlckxpc3RlbmVyUmVtb3Zlcl8oKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vYnNlcnZlcl8pIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXJfLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBvbE9ic2VydmFibGVVbkJ5S2V5KHRoaXMubGlzdGVuZXJLZXlzXyk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLnNwbGljZSgwKTtcblxuICAgIGlmICh0aGlzLmVsZW1lbnQucmVtb3ZlTm9kZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZU5vZGUodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICB9O1xuXG4gIHJldHVybiBTeW5jaHJvbml6ZWRPdmVybGF5O1xufShvbE92ZXJsYXkpO1xuXG5leHBvcnQgZGVmYXVsdCBTeW5jaHJvbml6ZWRPdmVybGF5OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxuaW1wb3J0IG9sU291cmNlVmVjdG9yIGZyb20gJ29sL3NvdXJjZS9WZWN0b3IuanMnO1xuaW1wb3J0IG9sTGF5ZXJMYXllciBmcm9tICdvbC9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgb2xTb3VyY2VDbHVzdGVyIGZyb20gJ29sL3NvdXJjZS9DbHVzdGVyLmpzJztcbmltcG9ydCBvbExheWVySW1hZ2UgZnJvbSAnb2wvbGF5ZXIvSW1hZ2UuanMnO1xuaW1wb3J0IHsgb2xjc0xpc3RlbiwgZ2V0VWlkIH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCBvbExheWVyVmVjdG9yIGZyb20gJ29sL2xheWVyL1ZlY3Rvci5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvclRpbGUgZnJvbSAnb2wvbGF5ZXIvVmVjdG9yVGlsZS5qcyc7XG5pbXBvcnQgb2xjc0Fic3RyYWN0U3luY2hyb25pemVyIGZyb20gJy4vQWJzdHJhY3RTeW5jaHJvbml6ZXIuanMnO1xuaW1wb3J0IG9sY3NGZWF0dXJlQ29udmVydGVyIGZyb20gJy4vRmVhdHVyZUNvbnZlcnRlci5qcyc7XG5cbnZhciBWZWN0b3JTeW5jaHJvbml6ZXIgPSBmdW5jdGlvbiAoX29sY3NBYnN0cmFjdFN5bmNocm9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKFZlY3RvclN5bmNocm9uaXplciwgX29sY3NBYnN0cmFjdFN5bmNocm9uKTtcblxuICBmdW5jdGlvbiBWZWN0b3JTeW5jaHJvbml6ZXIobWFwLCBzY2VuZSwgb3B0X2NvbnZlcnRlcikge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sY3NBYnN0cmFjdFN5bmNocm9uLmNhbGwodGhpcywgbWFwLCBzY2VuZSkgfHwgdGhpcztcbiAgICBfdGhpcy5jb252ZXJ0ZXIgPSBvcHRfY29udmVydGVyIHx8IG5ldyBvbGNzRmVhdHVyZUNvbnZlcnRlcihzY2VuZSk7XG4gICAgX3RoaXMuY3NBbGxQcmltaXRpdmVzXyA9IG5ldyBDZXNpdW0uUHJpbWl0aXZlQ29sbGVjdGlvbigpO1xuICAgIHNjZW5lLnByaW1pdGl2ZXMuYWRkKF90aGlzLmNzQWxsUHJpbWl0aXZlc18pO1xuICAgIF90aGlzLmNzQWxsUHJpbWl0aXZlc18uZGVzdHJveVByaW1pdGl2ZXMgPSBmYWxzZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gVmVjdG9yU3luY2hyb25pemVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uYWRkQ2VzaXVtT2JqZWN0ID0gZnVuY3Rpb24gYWRkQ2VzaXVtT2JqZWN0KGNvdW50ZXJwYXJ0KSB7XG4gICAgY29uc29sZS5hc3NlcnQoY291bnRlcnBhcnQpO1xuICAgIGNvdW50ZXJwYXJ0LmdldFJvb3RQcmltaXRpdmUoKVsnY291bnRlcnBhcnQnXSA9IGNvdW50ZXJwYXJ0O1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5hZGQoY291bnRlcnBhcnQuZ2V0Um9vdFByaW1pdGl2ZSgpKTtcbiAgfTtcblxuICBfcHJvdG8uZGVzdHJveUNlc2l1bU9iamVjdCA9IGZ1bmN0aW9uIGRlc3Ryb3lDZXNpdW1PYmplY3Qob2JqZWN0KSB7XG4gICAgb2JqZWN0LmdldFJvb3RQcmltaXRpdmUoKS5kZXN0cm95KCk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZVNpbmdsZUNlc2l1bU9iamVjdCA9IGZ1bmN0aW9uIHJlbW92ZVNpbmdsZUNlc2l1bU9iamVjdChvYmplY3QsIGRlc3Ryb3kpIHtcbiAgICBvYmplY3QuZGVzdHJveSgpO1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5kZXN0cm95UHJpbWl0aXZlcyA9IGRlc3Ryb3k7XG4gICAgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLnJlbW92ZShvYmplY3QuZ2V0Um9vdFByaW1pdGl2ZSgpKTtcbiAgICB0aGlzLmNzQWxsUHJpbWl0aXZlc18uZGVzdHJveVByaW1pdGl2ZXMgPSBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlQWxsQ2VzaXVtT2JqZWN0cyA9IGZ1bmN0aW9uIHJlbW92ZUFsbENlc2l1bU9iamVjdHMoZGVzdHJveSkge1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5kZXN0cm95UHJpbWl0aXZlcyA9IGRlc3Ryb3k7XG5cbiAgICBpZiAoZGVzdHJveSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNzQWxsUHJpbWl0aXZlc18ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLmdldChpKVsnY291bnRlcnBhcnQnXS5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jc0FsbFByaW1pdGl2ZXNfLnJlbW92ZUFsbCgpO1xuICAgIHRoaXMuY3NBbGxQcmltaXRpdmVzXy5kZXN0cm95UHJpbWl0aXZlcyA9IGZhbHNlO1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVMYXllclZpc2liaWxpdHkgPSBmdW5jdGlvbiB1cGRhdGVMYXllclZpc2liaWxpdHkob2xMYXllcldpdGhQYXJlbnRzLCBjc1ByaW1pdGl2ZSkge1xuICAgIHZhciB2aXNpYmxlID0gdHJ1ZTtcbiAgICBbb2xMYXllcldpdGhQYXJlbnRzLmxheWVyXS5jb25jYXQob2xMYXllcldpdGhQYXJlbnRzLnBhcmVudHMpLmZvckVhY2goZnVuY3Rpb24gKG9sTGF5ZXIpIHtcbiAgICAgIHZhciBsYXllclZpc2libGUgPSBvbExheWVyLmdldFZpc2libGUoKTtcblxuICAgICAgaWYgKGxheWVyVmlzaWJsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZpc2libGUgJj0gbGF5ZXJWaXNpYmxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNzUHJpbWl0aXZlLnNob3cgPSB2aXNpYmxlO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVTaW5nbGVMYXllckNvdW50ZXJwYXJ0cyA9IGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUxheWVyQ291bnRlcnBhcnRzKG9sTGF5ZXJXaXRoUGFyZW50cykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIG9sTGF5ZXIgPSBvbExheWVyV2l0aFBhcmVudHMubGF5ZXI7XG5cbiAgICBpZiAoIShvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllclZlY3RvcikgfHwgb2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJWZWN0b3JUaWxlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmFzc2VydChvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllckxheWVyKTtcbiAgICB2YXIgc291cmNlID0gb2xMYXllci5nZXRTb3VyY2UoKTtcblxuICAgIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZUNsdXN0ZXIpIHtcbiAgICAgIHNvdXJjZSA9IHNvdXJjZS5nZXRTb3VyY2UoKTtcbiAgICB9XG5cbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc29sZS5hc3NlcnQoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VWZWN0b3IpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMudmlldyk7XG4gICAgdmFyIHZpZXcgPSB0aGlzLnZpZXc7XG4gICAgdmFyIGZlYXR1cmVQcmltaXRpdmVNYXAgPSB7fTtcbiAgICB2YXIgY291bnRlcnBhcnQgPSB0aGlzLmNvbnZlcnRlci5vbFZlY3RvckxheWVyVG9DZXNpdW0ob2xMYXllciwgdmlldywgZmVhdHVyZVByaW1pdGl2ZU1hcCk7XG4gICAgdmFyIGNzUHJpbWl0aXZlcyA9IGNvdW50ZXJwYXJ0LmdldFJvb3RQcmltaXRpdmUoKTtcbiAgICB2YXIgb2xMaXN0ZW5LZXlzID0gY291bnRlcnBhcnQub2xMaXN0ZW5LZXlzO1xuICAgIFtvbExheWVyV2l0aFBhcmVudHMubGF5ZXJdLmNvbmNhdChvbExheWVyV2l0aFBhcmVudHMucGFyZW50cykuZm9yRWFjaChmdW5jdGlvbiAob2xMYXllckl0ZW0pIHtcbiAgICAgIG9sTGlzdGVuS2V5cy5wdXNoKG9sY3NMaXN0ZW4ob2xMYXllckl0ZW0sICdjaGFuZ2U6dmlzaWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnVwZGF0ZUxheWVyVmlzaWJpbGl0eShvbExheWVyV2l0aFBhcmVudHMsIGNzUHJpbWl0aXZlcyk7XG4gICAgICB9KSk7XG4gICAgfSk7XG4gICAgdGhpcy51cGRhdGVMYXllclZpc2liaWxpdHkob2xMYXllcldpdGhQYXJlbnRzLCBjc1ByaW1pdGl2ZXMpO1xuXG4gICAgdmFyIG9uQWRkRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICBjb25zb2xlLmFzc2VydChvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllclZlY3RvciB8fCBvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllckltYWdlKTtcbiAgICAgIHZhciBjb250ZXh0ID0gY291bnRlcnBhcnQuY29udGV4dDtcbiAgICAgIHZhciBwcmltID0gdGhpcy5jb252ZXJ0ZXIuY29udmVydChvbExheWVyLCB2aWV3LCBmZWF0dXJlLCBjb250ZXh0KTtcblxuICAgICAgaWYgKHByaW0pIHtcbiAgICAgICAgZmVhdHVyZVByaW1pdGl2ZU1hcFtnZXRVaWQoZmVhdHVyZSldID0gcHJpbTtcbiAgICAgICAgY3NQcmltaXRpdmVzLmFkZChwcmltKTtcbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICB2YXIgb25SZW1vdmVGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgIHZhciBpZCA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgIHZhciBjb250ZXh0ID0gY291bnRlcnBhcnQuY29udGV4dDtcbiAgICAgIHZhciBiYnMgPSBjb250ZXh0LmZlYXR1cmVUb0Nlc2l1bU1hcFtpZF07XG5cbiAgICAgIGlmIChiYnMpIHtcbiAgICAgICAgZGVsZXRlIGNvbnRleHQuZmVhdHVyZVRvQ2VzaXVtTWFwW2lkXTtcbiAgICAgICAgYmJzLmZvckVhY2goZnVuY3Rpb24gKGJiKSB7XG4gICAgICAgICAgaWYgKGJiIGluc3RhbmNlb2YgQ2VzaXVtLkJpbGxib2FyZCkge1xuICAgICAgICAgICAgY29udGV4dC5iaWxsYm9hcmRzLnJlbW92ZShiYik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNzUHJpbWl0aXZlID0gZmVhdHVyZVByaW1pdGl2ZU1hcFtpZF07XG4gICAgICBkZWxldGUgZmVhdHVyZVByaW1pdGl2ZU1hcFtpZF07XG5cbiAgICAgIGlmIChjc1ByaW1pdGl2ZSkge1xuICAgICAgICBjc1ByaW1pdGl2ZXMucmVtb3ZlKGNzUHJpbWl0aXZlKTtcbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBvbExpc3RlbktleXMucHVzaChvbGNzTGlzdGVuKHNvdXJjZSwgJ2FkZGZlYXR1cmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc29sZS5hc3NlcnQoZS5mZWF0dXJlKTtcbiAgICAgIG9uQWRkRmVhdHVyZShlLmZlYXR1cmUpO1xuICAgIH0sIHRoaXMpKTtcbiAgICBvbExpc3RlbktleXMucHVzaChvbGNzTGlzdGVuKHNvdXJjZSwgJ3JlbW92ZWZlYXR1cmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc29sZS5hc3NlcnQoZS5mZWF0dXJlKTtcbiAgICAgIG9uUmVtb3ZlRmVhdHVyZShlLmZlYXR1cmUpO1xuICAgIH0sIHRoaXMpKTtcbiAgICBvbExpc3RlbktleXMucHVzaChvbGNzTGlzdGVuKHNvdXJjZSwgJ2NoYW5nZWZlYXR1cmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGZlYXR1cmUgPSBlLmZlYXR1cmU7XG4gICAgICBjb25zb2xlLmFzc2VydChmZWF0dXJlKTtcbiAgICAgIG9uUmVtb3ZlRmVhdHVyZShmZWF0dXJlKTtcbiAgICAgIG9uQWRkRmVhdHVyZShmZWF0dXJlKTtcbiAgICB9LCB0aGlzKSk7XG4gICAgcmV0dXJuIGNvdW50ZXJwYXJ0ID8gW2NvdW50ZXJwYXJ0XSA6IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIFZlY3RvclN5bmNocm9uaXplcjtcbn0ob2xjc0Fic3RyYWN0U3luY2hyb25pemVyKTtcblxuZXhwb3J0IGRlZmF1bHQgVmVjdG9yU3luY2hyb25pemVyOyIsInZhciBMYXp5TG9hZGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMYXp5TG9hZGVyKHVybCkge1xuICAgIHRoaXMucHJvbWlzZTtcbiAgICB0aGlzLnVybF8gPSB1cmw7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTGF6eUxvYWRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmxvYWQgPSBmdW5jdGlvbiBsb2FkKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMucHJvbWlzZSkge1xuICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiByZWplY3QoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIHNjcmlwdC5zcmMgPSBfdGhpcy51cmxfO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4gTGF6eUxvYWRlcjtcbn0oKTtcblxuZXhwb3J0IHsgTGF6eUxvYWRlciBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gIGlmIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxuaW1wb3J0IG9sY3NDb250cmliTGF6eUxvYWRlciBmcm9tICcuLi9jb250cmliL0xhenlMb2FkZXIuanMnO1xuaW1wb3J0IE9MQ2VzaXVtIGZyb20gJy4uL09MQ2VzaXVtLmpzJztcbmltcG9ydCBvbGNzQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IG9sT2JzZXJ2YWJsZSBmcm9tICdvbC9PYnNlcnZhYmxlLmpzJztcblxudmFyIE1hbmFnZXIgPSBmdW5jdGlvbiAoX29sT2JzZXJ2YWJsZSkge1xuICBfaW5oZXJpdHNMb29zZShNYW5hZ2VyLCBfb2xPYnNlcnZhYmxlKTtcblxuICBmdW5jdGlvbiBNYW5hZ2VyKGNlc2l1bVVybCwgX3RlbXApIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgX3JlZiA9IF90ZW1wID09PSB2b2lkIDAgPyB7fSA6IF90ZW1wLFxuICAgICAgICBtYXAgPSBfcmVmLm1hcCxcbiAgICAgICAgY2FtZXJhRXh0ZW50SW5SYWRpYW5zID0gX3JlZi5jYW1lcmFFeHRlbnRJblJhZGlhbnM7XG5cbiAgICBfdGhpcyA9IF9vbE9ic2VydmFibGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIF90aGlzLmNlc2l1bVVybF8gPSBjZXNpdW1Vcmw7XG4gICAgX3RoaXMubWFwID0gbWFwO1xuICAgIF90aGlzLmNhbWVyYUV4dGVudEluUmFkaWFucyA9IGNhbWVyYUV4dGVudEluUmFkaWFucyB8fCBudWxsO1xuICAgIF90aGlzLmJvdW5kaW5nU3BoZXJlXztcbiAgICBfdGhpcy5ibG9ja0xpbWl0ZXJfID0gZmFsc2U7XG4gICAgX3RoaXMucHJvbWlzZV87XG4gICAgX3RoaXMub2wzZDtcbiAgICBfdGhpcy5jZXNpdW1Jbml0aWFsVGlsdF8gPSB0b1JhZGlhbnMoNTApO1xuICAgIF90aGlzLmZvZ0RlbnNpdHkgPSAwLjAwMDE7XG4gICAgX3RoaXMuZm9nU1NFRmFjdG9yID0gMjU7XG4gICAgX3RoaXMubWluaW11bVpvb21EaXN0YW5jZSA9IDI7XG4gICAgX3RoaXMubWF4aW11bVpvb21EaXN0YW5jZSA9IDEwMDAwMDAwO1xuXG4gICAgX3RoaXMubGltaXRDYW1lcmFUb0JvdW5kaW5nU3BoZXJlUmF0aW8gPSBmdW5jdGlvbiAoaGVpZ2h0KSB7XG4gICAgICByZXR1cm4gaGVpZ2h0ID4gMzAwMCA/IDkgOiAzO1xuICAgIH07XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTWFuYWdlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmxvYWQgPSBmdW5jdGlvbiBsb2FkKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLnByb21pc2VfKSB7XG4gICAgICB2YXIgY2VzaXVtTGF6eUxvYWRlciA9IG5ldyBvbGNzQ29udHJpYkxhenlMb2FkZXIodGhpcy5jZXNpdW1VcmxfKTtcbiAgICAgIHRoaXMucHJvbWlzZV8gPSBjZXNpdW1MYXp5TG9hZGVyLmxvYWQoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5vbkNlc2l1bUxvYWRlZCgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZV87XG4gIH07XG5cbiAgX3Byb3RvLm9uQ2VzaXVtTG9hZGVkID0gZnVuY3Rpb24gb25DZXNpdW1Mb2FkZWQoKSB7XG4gICAgaWYgKHRoaXMuY2FtZXJhRXh0ZW50SW5SYWRpYW5zKSB7XG4gICAgICB2YXIgcmVjdCA9IF9jb25zdHJ1Y3QoQ2VzaXVtLlJlY3RhbmdsZSwgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuY2FtZXJhRXh0ZW50SW5SYWRpYW5zKSk7XG5cbiAgICAgIENlc2l1bS5DYW1lcmEuREVGQVVMVF9WSUVXX1JFQ1RBTkdMRSA9IHJlY3Q7XG4gICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlXyA9IENlc2l1bS5Cb3VuZGluZ1NwaGVyZS5mcm9tUmVjdGFuZ2xlM0QocmVjdCwgQ2VzaXVtLkVsbGlwc29pZC5XR1M4NCwgMzAwKTtcbiAgICB9XG5cbiAgICB0aGlzLm9sM2QgPSB0aGlzLmluc3RhbnRpYXRlT0xDZXNpdW0oKTtcbiAgICB2YXIgc2NlbmUgPSB0aGlzLm9sM2QuZ2V0Q2VzaXVtU2NlbmUoKTtcbiAgICB0aGlzLmNvbmZpZ3VyZUZvclVzYWJpbGl0eShzY2VuZSk7XG4gICAgdGhpcy5jb25maWd1cmVGb3JQZXJmb3JtYW5jZShzY2VuZSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdsb2FkJyk7XG4gICAgcmV0dXJuIHRoaXMub2wzZDtcbiAgfTtcblxuICBfcHJvdG8uaW5zdGFudGlhdGVPTENlc2l1bSA9IGZ1bmN0aW9uIGluc3RhbnRpYXRlT0xDZXNpdW0oKSB7XG4gICAgY29uc29sZS5hc3NlcnQodGhpcy5tYXApO1xuICAgIHZhciBvbDNkID0gbmV3IE9MQ2VzaXVtKHtcbiAgICAgIG1hcDogdGhpcy5tYXBcbiAgICB9KTtcbiAgICB2YXIgc2NlbmUgPSBvbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgdmFyIHRlcnJhaW5Qcm92aWRlciA9IENlc2l1bS5jcmVhdGVXb3JsZFRlcnJhaW4oKTtcbiAgICBzY2VuZS50ZXJyYWluUHJvdmlkZXIgPSB0ZXJyYWluUHJvdmlkZXI7XG4gICAgcmV0dXJuIG9sM2Q7XG4gIH07XG5cbiAgX3Byb3RvLmNvbmZpZ3VyZUZvclBlcmZvcm1hbmNlID0gZnVuY3Rpb24gY29uZmlndXJlRm9yUGVyZm9ybWFuY2Uoc2NlbmUpIHtcbiAgICB2YXIgZm9nID0gc2NlbmUuZm9nO1xuICAgIGZvZy5lbmFibGVkID0gdHJ1ZTtcbiAgICBmb2cuZGVuc2l0eSA9IHRoaXMuZm9nRGVuc2l0eTtcbiAgICBmb2cuc2NyZWVuU3BhY2VFcnJvckZhY3RvciA9IHRoaXMuZm9nU1NFRmFjdG9yO1xuICB9O1xuXG4gIF9wcm90by5jb25maWd1cmVGb3JVc2FiaWxpdHkgPSBmdW5jdGlvbiBjb25maWd1cmVGb3JVc2FiaWxpdHkoc2NlbmUpIHtcbiAgICB2YXIgc3NjQ29udHJvbGxlciA9IHNjZW5lLnNjcmVlblNwYWNlQ2FtZXJhQ29udHJvbGxlcjtcbiAgICBzc2NDb250cm9sbGVyLm1pbmltdW1ab29tRGlzdGFuY2UgPSB0aGlzLm1pbmltdW1ab29tRGlzdGFuY2U7XG4gICAgc3NjQ29udHJvbGxlci5tYXhpbXVtWm9vbURpc3RhbmNlID0gdGhpcy5tYXhpbXVtWm9vbURpc3RhbmNlO1xuICAgIHNjZW5lLmdsb2JlLmRlcHRoVGVzdEFnYWluc3RUZXJyYWluID0gdHJ1ZTtcbiAgICBzY2VuZS5nbG9iZS5iYXNlQ29sb3IgPSBDZXNpdW0uQ29sb3IuV0hJVEU7XG4gICAgc2NlbmUuYmFja2dyb3VuZENvbG9yID0gQ2VzaXVtLkNvbG9yLldISVRFO1xuXG4gICAgaWYgKHRoaXMuYm91bmRpbmdTcGhlcmVfKSB7XG4gICAgICBzY2VuZS5wb3N0UmVuZGVyLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5saW1pdENhbWVyYVRvQm91bmRpbmdTcGhlcmUuYmluZCh0aGlzKSwgc2NlbmUpO1xuICAgIH1cblxuICAgIHRoaXMub2wzZC5lbmFibGVBdXRvUmVuZGVyTG9vcCgpO1xuICB9O1xuXG4gIF9wcm90by5saW1pdENhbWVyYVRvQm91bmRpbmdTcGhlcmUgPSBmdW5jdGlvbiBsaW1pdENhbWVyYVRvQm91bmRpbmdTcGhlcmUoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5ib3VuZGluZ1NwaGVyZV8gJiYgIXRoaXMuYmxvY2tMaW1pdGVyXykge1xuICAgICAgdmFyIHNjZW5lID0gdGhpcy5vbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgICB2YXIgY2FtZXJhID0gc2NlbmUuY2FtZXJhO1xuICAgICAgdmFyIHBvc2l0aW9uID0gY2FtZXJhLnBvc2l0aW9uO1xuICAgICAgdmFyIGNhcnRvID0gQ2VzaXVtLkNhcnRvZ3JhcGhpYy5mcm9tQ2FydGVzaWFuKHBvc2l0aW9uKTtcbiAgICAgIHZhciByYXRpbyA9IHRoaXMubGltaXRDYW1lcmFUb0JvdW5kaW5nU3BoZXJlUmF0aW8oY2FydG8uaGVpZ2h0KTtcblxuICAgICAgaWYgKENlc2l1bS5DYXJ0ZXNpYW4zLmRpc3RhbmNlKHRoaXMuYm91bmRpbmdTcGhlcmVfLmNlbnRlciwgcG9zaXRpb24pID4gdGhpcy5ib3VuZGluZ1NwaGVyZV8ucmFkaXVzICogcmF0aW8pIHtcbiAgICAgICAgdmFyIGN1cnJlbnRseUZseWluZyA9IGNhbWVyYS5mbHlpbmc7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRseUZseWluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmJsb2NrTGltaXRlcl8gPSB0cnVlO1xuXG4gICAgICAgICAgdmFyIHVuYmxvY2tMaW1pdGVyID0gZnVuY3Rpb24gdW5ibG9ja0xpbWl0ZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLmJsb2NrTGltaXRlcl8gPSBmYWxzZTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2FtZXJhLmZseVRvQm91bmRpbmdTcGhlcmUodGhpcy5ib3VuZGluZ1NwaGVyZV8sIHtcbiAgICAgICAgICAgIGNvbXBsZXRlOiB1bmJsb2NrTGltaXRlcixcbiAgICAgICAgICAgIGNhbmNlbDogdW5ibG9ja0xpbWl0ZXJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8udG9nZ2xlM2QgPSBmdW5jdGlvbiB0b2dnbGUzZCgpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHJldHVybiB0aGlzLmxvYWQoKS50aGVuKGZ1bmN0aW9uIChvbDNkKSB7XG4gICAgICB2YXIgaXMzREN1cnJlbnRseUVuYWJsZWQgPSBvbDNkLmdldEVuYWJsZWQoKTtcbiAgICAgIHZhciBzY2VuZSA9IG9sM2QuZ2V0Q2VzaXVtU2NlbmUoKTtcblxuICAgICAgaWYgKGlzM0RDdXJyZW50bHlFbmFibGVkKSB7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KF90aGlzNC5tYXApO1xuICAgICAgICByZXR1cm4gb2xjc0NvcmUucmVzZXRUb05vcnRoWmVuaXRoKF90aGlzNC5tYXAsIHNjZW5lKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvbDNkLnNldEVuYWJsZWQoZmFsc2UpO1xuXG4gICAgICAgICAgX3RoaXM0LmRpc3BhdGNoRXZlbnQoJ3RvZ2dsZScpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9sM2Quc2V0RW5hYmxlZCh0cnVlKTtcblxuICAgICAgICBfdGhpczQuZGlzcGF0Y2hFdmVudCgndG9nZ2xlJyk7XG5cbiAgICAgICAgcmV0dXJuIG9sY3NDb3JlLnJvdGF0ZUFyb3VuZEJvdHRvbUNlbnRlcihzY2VuZSwgX3RoaXM0LmNlc2l1bUluaXRpYWxUaWx0Xyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnNldDNkV2l0aFZpZXcgPSBmdW5jdGlvbiBzZXQzZFdpdGhWaWV3KGxvbiwgbGF0LCBlbGV2YXRpb24sIGhlYWRpbmdEZWcsIHBpdGNoRGVnKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICByZXR1cm4gdGhpcy5sb2FkKCkudGhlbihmdW5jdGlvbiAob2wzZCkge1xuICAgICAgdmFyIGlzM0RDdXJyZW50bHlFbmFibGVkID0gb2wzZC5nZXRFbmFibGVkKCk7XG4gICAgICB2YXIgc2NlbmUgPSBvbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgICB2YXIgY2FtZXJhID0gc2NlbmUuY2FtZXJhO1xuICAgICAgdmFyIGRlc3RpbmF0aW9uID0gQ2VzaXVtLkNhcnRlc2lhbjMuZnJvbURlZ3JlZXMobG9uLCBsYXQsIGVsZXZhdGlvbik7XG4gICAgICB2YXIgaGVhZGluZyA9IENlc2l1bS5NYXRoLnRvUmFkaWFucyhoZWFkaW5nRGVnKTtcbiAgICAgIHZhciBwaXRjaCA9IENlc2l1bS5NYXRoLnRvUmFkaWFucyhwaXRjaERlZyk7XG4gICAgICB2YXIgcm9sbCA9IDA7XG4gICAgICB2YXIgb3JpZW50YXRpb24gPSB7XG4gICAgICAgIGhlYWRpbmc6IGhlYWRpbmcsXG4gICAgICAgIHBpdGNoOiBwaXRjaCxcbiAgICAgICAgcm9sbDogcm9sbFxuICAgICAgfTtcblxuICAgICAgaWYgKCFpczNEQ3VycmVudGx5RW5hYmxlZCkge1xuICAgICAgICBvbDNkLnNldEVuYWJsZWQodHJ1ZSk7XG5cbiAgICAgICAgX3RoaXM1LmRpc3BhdGNoRXZlbnQoJ3RvZ2dsZScpO1xuICAgICAgfVxuXG4gICAgICBjYW1lcmEuc2V0Vmlldyh7XG4gICAgICAgIGRlc3RpbmF0aW9uOiBkZXN0aW5hdGlvbixcbiAgICAgICAgb3JpZW50YXRpb246IG9yaWVudGF0aW9uXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaXMzZEVuYWJsZWQgPSBmdW5jdGlvbiBpczNkRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLm9sM2QgJiYgdGhpcy5vbDNkLmdldEVuYWJsZWQoKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0SGVhZGluZyA9IGZ1bmN0aW9uIGdldEhlYWRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwID8gdGhpcy5tYXAuZ2V0VmlldygpLmdldFJvdGF0aW9uKCkgfHwgMCA6IDA7XG4gIH07XG5cbiAgX3Byb3RvLmdldFRpbHRPbkdsb2JlID0gZnVuY3Rpb24gZ2V0VGlsdE9uR2xvYmUoKSB7XG4gICAgdmFyIHNjZW5lID0gdGhpcy5vbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgdmFyIHRpbHRPbkdsb2JlID0gb2xjc0NvcmUuY29tcHV0ZVNpZ25lZFRpbHRBbmdsZU9uR2xvYmUoc2NlbmUpO1xuICAgIHJldHVybiAtdGlsdE9uR2xvYmU7XG4gIH07XG5cbiAgX3Byb3RvLnNldEhlYWRpbmcgPSBmdW5jdGlvbiBzZXRIZWFkaW5nKGFuZ2xlKSB7XG4gICAgdmFyIHNjZW5lID0gdGhpcy5vbDNkLmdldENlc2l1bVNjZW5lKCk7XG4gICAgdmFyIGJvdHRvbSA9IG9sY3NDb3JlLnBpY2tCb3R0b21Qb2ludChzY2VuZSk7XG5cbiAgICBpZiAoYm90dG9tKSB7XG4gICAgICBvbGNzQ29yZS5zZXRIZWFkaW5nVXNpbmdCb3R0b21DZW50ZXIoc2NlbmUsIGFuZ2xlLCBib3R0b20pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uZ2V0T2wzZCA9IGZ1bmN0aW9uIGdldE9sM2QoKSB7XG4gICAgcmV0dXJuIHRoaXMub2wzZDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0T2xWaWV3ID0gZnVuY3Rpb24gZ2V0T2xWaWV3KCkge1xuICAgIHZhciB2aWV3ID0gdGhpcy5tYXAuZ2V0VmlldygpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHZpZXcpO1xuICAgIHJldHVybiB2aWV3O1xuICB9O1xuXG4gIF9wcm90by5nZXRDZXNpdW1WaWV3TWF0cml4ID0gZnVuY3Rpb24gZ2V0Q2VzaXVtVmlld01hdHJpeCgpIHtcbiAgICByZXR1cm4gdGhpcy5vbDNkLmdldENlc2l1bVNjZW5lKCkuY2FtZXJhLnZpZXdNYXRyaXg7XG4gIH07XG5cbiAgX3Byb3RvLmdldENlc2l1bVNjZW5lID0gZnVuY3Rpb24gZ2V0Q2VzaXVtU2NlbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMub2wzZC5nZXRDZXNpdW1TY2VuZSgpO1xuICB9O1xuXG4gIF9wcm90by5mbHlUb1JlY3RhbmdsZSA9IGZ1bmN0aW9uIGZseVRvUmVjdGFuZ2xlKHJlY3RhbmdsZSwgb2Zmc2V0KSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICBpZiAob2Zmc2V0ID09PSB2b2lkIDApIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgdmFyIGNhbWVyYSA9IHRoaXMuZ2V0Q2VzaXVtU2NlbmUoKS5jYW1lcmE7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gY2FtZXJhLmdldFJlY3RhbmdsZUNhbWVyYUNvb3JkaW5hdGVzKHJlY3RhbmdsZSk7XG4gICAgdmFyIG1hZyA9IENlc2l1bS5DYXJ0ZXNpYW4zLm1hZ25pdHVkZShkZXN0aW5hdGlvbikgKyBvZmZzZXQ7XG4gICAgQ2VzaXVtLkNhcnRlc2lhbjMubm9ybWFsaXplKGRlc3RpbmF0aW9uLCBkZXN0aW5hdGlvbik7XG4gICAgQ2VzaXVtLkNhcnRlc2lhbjMubXVsdGlwbHlCeVNjYWxhcihkZXN0aW5hdGlvbiwgbWFnLCBkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlmICghX3RoaXM2LmNhbWVyYUV4dGVudEluUmFkaWFucykge1xuICAgICAgICByZWplY3QoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjYW1lcmEuZmx5VG8oe1xuICAgICAgICBkZXN0aW5hdGlvbjogZGVzdGluYXRpb24sXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVuZFRyYW5zZm9ybTogQ2VzaXVtLk1hdHJpeDQuSURFTlRJVFlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5nZXRDYW1lcmFFeHRlbnRSZWN0YW5nbGUgPSBmdW5jdGlvbiBnZXRDYW1lcmFFeHRlbnRSZWN0YW5nbGUoKSB7XG4gICAgaWYgKHRoaXMuY2FtZXJhRXh0ZW50SW5SYWRpYW5zKSB7XG4gICAgICByZXR1cm4gX2NvbnN0cnVjdChDZXNpdW0uUmVjdGFuZ2xlLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jYW1lcmFFeHRlbnRJblJhZGlhbnMpKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE1hbmFnZXI7XG59KG9sT2JzZXJ2YWJsZSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1hbmFnZXI7IiwiaW1wb3J0IHsgbGluZWFyIGFzIGxpbmVhckVhc2luZyB9IGZyb20gJ29sL2Vhc2luZy5qcyc7XG5pbXBvcnQgb2xMYXllclRpbGUgZnJvbSAnb2wvbGF5ZXIvVGlsZS5qcyc7XG5pbXBvcnQgb2xMYXllckltYWdlIGZyb20gJ29sL2xheWVyL0ltYWdlLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCB0cmFuc2Zvcm1FeHRlbnQgfSBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBvbFNvdXJjZUltYWdlU3RhdGljIGZyb20gJ29sL3NvdXJjZS9JbWFnZVN0YXRpYy5qcyc7XG5pbXBvcnQgb2xTb3VyY2VJbWFnZVdNUyBmcm9tICdvbC9zb3VyY2UvSW1hZ2VXTVMuanMnO1xuaW1wb3J0IG9sU291cmNlVGlsZUltYWdlIGZyb20gJ29sL3NvdXJjZS9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IG9sU291cmNlVGlsZVdNUyBmcm9tICdvbC9zb3VyY2UvVGlsZVdNUy5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0SW1hZ2VMb2FkRnVuY3Rpb24gfSBmcm9tICdvbC9zb3VyY2UvSW1hZ2UuanMnO1xuaW1wb3J0IG9sY3NDb3JlT0xJbWFnZXJ5UHJvdmlkZXIgZnJvbSAnLi9jb3JlL09MSW1hZ2VyeVByb3ZpZGVyLmpzJztcbmltcG9ydCBvbGNzVXRpbCBmcm9tICcuL3V0aWwuanMnO1xudmFyIGV4cG9ydHMgPSB7fTtcblxuZXhwb3J0cy5jb21wdXRlUGl4ZWxTaXplQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKHNjZW5lLCB0YXJnZXQpIHtcbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgdmFyIGNhbnZhcyA9IHNjZW5lLmNhbnZhcztcbiAgdmFyIGZydXN0dW0gPSBjYW1lcmEuZnJ1c3R1bTtcbiAgdmFyIGRpc3RhbmNlID0gQ2VzaXVtLkNhcnRlc2lhbjMubWFnbml0dWRlKENlc2l1bS5DYXJ0ZXNpYW4zLnN1YnRyYWN0KGNhbWVyYS5wb3NpdGlvbiwgdGFyZ2V0LCBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKSkpO1xuICByZXR1cm4gZnJ1c3R1bS5nZXRQaXhlbERpbWVuc2lvbnMoY2FudmFzLmNsaWVudFdpZHRoLCBjYW52YXMuY2xpZW50SGVpZ2h0LCBkaXN0YW5jZSwgc2NlbmUucGl4ZWxSYXRpbywgbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKCkpO1xufTtcblxuZXhwb3J0cy5jb21wdXRlQm91bmRpbmdCb3hBdFRhcmdldCA9IGZ1bmN0aW9uIChzY2VuZSwgdGFyZ2V0LCBhbW91bnQpIHtcbiAgdmFyIHBpeGVsU2l6ZSA9IGV4cG9ydHMuY29tcHV0ZVBpeGVsU2l6ZUF0Q29vcmRpbmF0ZShzY2VuZSwgdGFyZ2V0KTtcbiAgdmFyIHRyYW5zZm9ybSA9IENlc2l1bS5UcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lKHRhcmdldCk7XG4gIHZhciBib3R0b21MZWZ0ID0gQ2VzaXVtLk1hdHJpeDQubXVsdGlwbHlCeVBvaW50KHRyYW5zZm9ybSwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKC1waXhlbFNpemUueCAqIGFtb3VudCwgLXBpeGVsU2l6ZS55ICogYW1vdW50LCAwKSwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCkpO1xuICB2YXIgdG9wUmlnaHQgPSBDZXNpdW0uTWF0cml4NC5tdWx0aXBseUJ5UG9pbnQodHJhbnNmb3JtLCBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMocGl4ZWxTaXplLnggKiBhbW91bnQsIHBpeGVsU2l6ZS55ICogYW1vdW50LCAwKSwgbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKCkpO1xuICByZXR1cm4gQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5jYXJ0ZXNpYW5BcnJheVRvQ2FydG9ncmFwaGljQXJyYXkoW2JvdHRvbUxlZnQsIHRvcFJpZ2h0XSk7XG59O1xuXG5leHBvcnRzLmFwcGx5SGVpZ2h0T2Zmc2V0VG9HZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgaGVpZ2h0KSB7XG4gIGdlb21ldHJ5LmFwcGx5VHJhbnNmb3JtKGZ1bmN0aW9uIChpbnB1dCwgb3V0cHV0LCBzdHJpZGUpIHtcbiAgICBjb25zb2xlLmFzc2VydChpbnB1dCA9PT0gb3V0cHV0KTtcblxuICAgIGlmIChzdHJpZGUgIT09IHVuZGVmaW5lZCAmJiBzdHJpZGUgPj0gMykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdXRwdXQubGVuZ3RoOyBpICs9IHN0cmlkZSkge1xuICAgICAgICBvdXRwdXRbaSArIDJdID0gb3V0cHV0W2kgKyAyXSArIGhlaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9KTtcbn07XG5cbmV4cG9ydHMuY3JlYXRlTWF0cml4QXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgcm90YXRpb24sIHRyYW5zbGF0aW9uLCBzY2FsZSkge1xuICBpZiAocm90YXRpb24gPT09IHZvaWQgMCkge1xuICAgIHJvdGF0aW9uID0gMDtcbiAgfVxuXG4gIGlmICh0cmFuc2xhdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgdHJhbnNsYXRpb24gPSBDZXNpdW0uQ2FydGVzaWFuMy5aRVJPO1xuICB9XG5cbiAgaWYgKHNjYWxlID09PSB2b2lkIDApIHtcbiAgICBzY2FsZSA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygxLCAxLCAxKTtcbiAgfVxuXG4gIHZhciBwb3NpdGlvbiA9IGV4cG9ydHMub2w0MzI2Q29vcmRpbmF0ZVRvQ2VzaXVtQ2FydGVzaWFuKGNvb3JkaW5hdGVzKTtcbiAgdmFyIHJhd01hdHJpeCA9IENlc2l1bS5UcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lKHBvc2l0aW9uKTtcbiAgdmFyIHF1YXRlcm5pb24gPSBDZXNpdW0uUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKENlc2l1bS5DYXJ0ZXNpYW4zLlVOSVRfWiwgLXJvdGF0aW9uKTtcbiAgdmFyIHJvdGF0aW9uTWF0cml4ID0gQ2VzaXVtLk1hdHJpeDQuZnJvbVRyYW5zbGF0aW9uUXVhdGVybmlvblJvdGF0aW9uU2NhbGUodHJhbnNsYXRpb24sIHF1YXRlcm5pb24sIHNjYWxlKTtcbiAgcmV0dXJuIENlc2l1bS5NYXRyaXg0Lm11bHRpcGx5KHJhd01hdHJpeCwgcm90YXRpb25NYXRyaXgsIG5ldyBDZXNpdW0uTWF0cml4NCgpKTtcbn07XG5cbmV4cG9ydHMucm90YXRlQXJvdW5kQXhpcyA9IGZ1bmN0aW9uIChjYW1lcmEsIGFuZ2xlLCBheGlzLCB0cmFuc2Zvcm0sIG9wdF9vcHRpb25zKSB7XG4gIHZhciBjbGFtcCA9IENlc2l1bS5NYXRoLmNsYW1wO1xuICB2YXIgZGVmYXVsdFZhbHVlID0gQ2VzaXVtLmRlZmF1bHRWYWx1ZTtcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGR1cmF0aW9uID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuZHVyYXRpb24sIDUwMCk7XG4gIHZhciBlYXNpbmcgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5lYXNpbmcsIGxpbmVhckVhc2luZyk7XG4gIHZhciBjYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2s7XG4gIHZhciBsYXN0UHJvZ3Jlc3MgPSAwO1xuICB2YXIgb2xkVHJhbnNmb3JtID0gbmV3IENlc2l1bS5NYXRyaXg0KCk7XG4gIHZhciBzdGFydCA9IERhdGUubm93KCk7XG5cbiAgdmFyIHN0ZXAgPSBmdW5jdGlvbiBzdGVwKCkge1xuICAgIHZhciB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIHZhciB0aW1lRGlmZmVyZW5jZSA9IHRpbWVzdGFtcCAtIHN0YXJ0O1xuICAgIHZhciBwcm9ncmVzcyA9IGVhc2luZyhjbGFtcCh0aW1lRGlmZmVyZW5jZSAvIGR1cmF0aW9uLCAwLCAxKSk7XG4gICAgY29uc29sZS5hc3NlcnQocHJvZ3Jlc3MgPj0gbGFzdFByb2dyZXNzKTtcbiAgICBjYW1lcmEudHJhbnNmb3JtLmNsb25lKG9sZFRyYW5zZm9ybSk7XG4gICAgdmFyIHN0ZXBBbmdsZSA9IChwcm9ncmVzcyAtIGxhc3RQcm9ncmVzcykgKiBhbmdsZTtcbiAgICBsYXN0UHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICBjYW1lcmEubG9va0F0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG4gICAgY2FtZXJhLnJvdGF0ZShheGlzLCBzdGVwQW5nbGUpO1xuICAgIGNhbWVyYS5sb29rQXRUcmFuc2Zvcm0ob2xkVHJhbnNmb3JtKTtcblxuICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xufTtcblxuZXhwb3J0cy5zZXRIZWFkaW5nVXNpbmdCb3R0b21DZW50ZXIgPSBmdW5jdGlvbiAoc2NlbmUsIGhlYWRpbmcsIGJvdHRvbUNlbnRlciwgb3B0X29wdGlvbnMpIHtcbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgdmFyIGFuZ2xlVG9aZW5pdGggPSBleHBvcnRzLmNvbXB1dGVBbmdsZVRvWmVuaXRoKHNjZW5lLCBib3R0b21DZW50ZXIpO1xuICB2YXIgYXhpcyA9IGNhbWVyYS5yaWdodDtcbiAgdmFyIHF1YXRlcm5pb24gPSBDZXNpdW0uUXVhdGVybmlvbi5mcm9tQXhpc0FuZ2xlKGF4aXMsIGFuZ2xlVG9aZW5pdGgpO1xuICB2YXIgcm90YXRpb24gPSBDZXNpdW0uTWF0cml4My5mcm9tUXVhdGVybmlvbihxdWF0ZXJuaW9uKTtcbiAgdmFyIHZlY3RvciA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5zdWJ0cmFjdChjYW1lcmEucG9zaXRpb24sIGJvdHRvbUNlbnRlciwgdmVjdG9yKTtcbiAgdmFyIHplbml0aCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uTWF0cml4My5tdWx0aXBseUJ5VmVjdG9yKHJvdGF0aW9uLCB2ZWN0b3IsIHplbml0aCk7XG4gIENlc2l1bS5DYXJ0ZXNpYW4zLmFkZCh6ZW5pdGgsIGJvdHRvbUNlbnRlciwgemVuaXRoKTtcbiAgdmFyIHRyYW5zZm9ybSA9IENlc2l1bS5NYXRyaXg0LmZyb21UcmFuc2xhdGlvbih6ZW5pdGgpO1xuICB2YXIgcm90YXRlQXJvdW5kQXhpcyA9IGV4cG9ydHMucm90YXRlQXJvdW5kQXhpcztcbiAgcm90YXRlQXJvdW5kQXhpcyhjYW1lcmEsIGhlYWRpbmcsIHplbml0aCwgdHJhbnNmb3JtLCBvcHRfb3B0aW9ucyk7XG59O1xuXG5leHBvcnRzLnBpY2tPblRlcnJhaW5PckVsbGlwc29pZCA9IGZ1bmN0aW9uIChzY2VuZSwgcGl4ZWwpIHtcbiAgdmFyIHJheSA9IHNjZW5lLmNhbWVyYS5nZXRQaWNrUmF5KHBpeGVsKTtcbiAgdmFyIHRhcmdldCA9IHNjZW5lLmdsb2JlLnBpY2socmF5LCBzY2VuZSk7XG4gIHJldHVybiB0YXJnZXQgfHwgc2NlbmUuY2FtZXJhLnBpY2tFbGxpcHNvaWQocGl4ZWwpO1xufTtcblxuZXhwb3J0cy5waWNrQm90dG9tUG9pbnQgPSBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgdmFyIGNhbnZhcyA9IHNjZW5lLmNhbnZhcztcbiAgdmFyIGJvdHRvbSA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihjYW52YXMuY2xpZW50V2lkdGggLyAyLCBjYW52YXMuY2xpZW50SGVpZ2h0KTtcbiAgcmV0dXJuIGV4cG9ydHMucGlja09uVGVycmFpbk9yRWxsaXBzb2lkKHNjZW5lLCBib3R0b20pO1xufTtcblxuZXhwb3J0cy5waWNrQ2VudGVyUG9pbnQgPSBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgdmFyIGNhbnZhcyA9IHNjZW5lLmNhbnZhcztcbiAgdmFyIGNlbnRlciA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihjYW52YXMuY2xpZW50V2lkdGggLyAyLCBjYW52YXMuY2xpZW50SGVpZ2h0IC8gMik7XG4gIHJldHVybiBleHBvcnRzLnBpY2tPblRlcnJhaW5PckVsbGlwc29pZChzY2VuZSwgY2VudGVyKTtcbn07XG5cbmV4cG9ydHMuY29tcHV0ZVNpZ25lZFRpbHRBbmdsZU9uR2xvYmUgPSBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgdmFyIHJheSA9IG5ldyBDZXNpdW0uUmF5KGNhbWVyYS5wb3NpdGlvbiwgY2FtZXJhLmRpcmVjdGlvbik7XG4gIHZhciB0YXJnZXQgPSBzY2VuZS5nbG9iZS5waWNrKHJheSwgc2NlbmUpO1xuXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdmFyIGVsbGlwc29pZCA9IENlc2l1bS5FbGxpcHNvaWQuV0dTODQ7XG4gICAgdmFyIG9iaiA9IENlc2l1bS5JbnRlcnNlY3Rpb25UZXN0cy5yYXlFbGxpcHNvaWQocmF5LCBlbGxpcHNvaWQpO1xuXG4gICAgaWYgKG9iaikge1xuICAgICAgdGFyZ2V0ID0gQ2VzaXVtLlJheS5nZXRQb2ludChyYXksIG9iai5zdGFydCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF0YXJnZXQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIG5vcm1hbCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uRWxsaXBzb2lkLldHUzg0Lmdlb2NlbnRyaWNTdXJmYWNlTm9ybWFsKHRhcmdldCwgbm9ybWFsKTtcbiAgdmFyIGFuZ2xlQmV0d2VlbiA9IGV4cG9ydHMuc2lnbmVkQW5nbGVCZXR3ZWVuO1xuICB2YXIgYW5nbGUgPSBhbmdsZUJldHdlZW4oY2FtZXJhLmRpcmVjdGlvbiwgbm9ybWFsLCBjYW1lcmEucmlnaHQpIC0gTWF0aC5QSTtcbiAgcmV0dXJuIENlc2l1bS5NYXRoLmNvbnZlcnRMb25naXR1ZGVSYW5nZShhbmdsZSk7XG59O1xuXG5leHBvcnRzLmJvdHRvbUZvdlJheSA9IGZ1bmN0aW9uIChzY2VuZSkge1xuICB2YXIgY2FtZXJhID0gc2NlbmUuY2FtZXJhO1xuICB2YXIgZm92eTIgPSBjYW1lcmEuZnJ1c3R1bS5mb3Z5IC8gMjtcbiAgdmFyIGRpcmVjdGlvbiA9IGNhbWVyYS5kaXJlY3Rpb247XG4gIHZhciByb3RhdGlvbiA9IENlc2l1bS5RdWF0ZXJuaW9uLmZyb21BeGlzQW5nbGUoY2FtZXJhLnJpZ2h0LCBmb3Z5Mik7XG4gIHZhciBtYXRyaXggPSBDZXNpdW0uTWF0cml4My5mcm9tUXVhdGVybmlvbihyb3RhdGlvbik7XG4gIHZhciB2ZWN0b3IgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgQ2VzaXVtLk1hdHJpeDMubXVsdGlwbHlCeVZlY3RvcihtYXRyaXgsIGRpcmVjdGlvbiwgdmVjdG9yKTtcbiAgcmV0dXJuIG5ldyBDZXNpdW0uUmF5KGNhbWVyYS5wb3NpdGlvbiwgdmVjdG9yKTtcbn07XG5cbmV4cG9ydHMuc2lnbmVkQW5nbGVCZXR3ZWVuID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQsIG5vcm1hbCkge1xuICB2YXIgYSA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICB2YXIgYiA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICB2YXIgYyA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygpO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5ub3JtYWxpemUoZmlyc3QsIGEpO1xuICBDZXNpdW0uQ2FydGVzaWFuMy5ub3JtYWxpemUoc2Vjb25kLCBiKTtcbiAgQ2VzaXVtLkNhcnRlc2lhbjMuY3Jvc3MoYSwgYiwgYyk7XG4gIHZhciBjb3NpbmUgPSBDZXNpdW0uQ2FydGVzaWFuMy5kb3QoYSwgYik7XG4gIHZhciBzaW5lID0gQ2VzaXVtLkNhcnRlc2lhbjMubWFnbml0dWRlKGMpO1xuICB2YXIgc2lnbiA9IENlc2l1bS5DYXJ0ZXNpYW4zLmRvdChub3JtYWwsIGMpO1xuICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHNpbmUsIGNvc2luZSk7XG4gIHJldHVybiBzaWduID49IDAgPyBhbmdsZSA6IC1hbmdsZTtcbn07XG5cbmV4cG9ydHMuY29tcHV0ZUFuZ2xlVG9aZW5pdGggPSBmdW5jdGlvbiAoc2NlbmUsIHBpdm90KSB7XG4gIHZhciBjYW1lcmEgPSBzY2VuZS5jYW1lcmE7XG4gIHZhciBmeSA9IGNhbWVyYS5mcnVzdHVtLmZvdnkgLyAyO1xuICB2YXIgcmF5ID0gZXhwb3J0cy5ib3R0b21Gb3ZSYXkoc2NlbmUpO1xuICB2YXIgZGlyZWN0aW9uID0gQ2VzaXVtLkNhcnRlc2lhbjMuY2xvbmUocmF5LmRpcmVjdGlvbik7XG4gIENlc2l1bS5DYXJ0ZXNpYW4zLm5lZ2F0ZShkaXJlY3Rpb24sIGRpcmVjdGlvbik7XG4gIHZhciBub3JtYWwgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgQ2VzaXVtLkVsbGlwc29pZC5XR1M4NC5nZW9jZW50cmljU3VyZmFjZU5vcm1hbChwaXZvdCwgbm9ybWFsKTtcbiAgdmFyIGxlZnQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoKTtcbiAgQ2VzaXVtLkNhcnRlc2lhbjMubmVnYXRlKGNhbWVyYS5yaWdodCwgbGVmdCk7XG4gIHZhciBhID0gZXhwb3J0cy5zaWduZWRBbmdsZUJldHdlZW4obm9ybWFsLCBkaXJlY3Rpb24sIGxlZnQpO1xuICByZXR1cm4gYSArIGZ5O1xufTtcblxuZXhwb3J0cy5leHRlbnRUb1JlY3RhbmdsZSA9IGZ1bmN0aW9uIChleHRlbnQsIHByb2plY3Rpb24pIHtcbiAgaWYgKGV4dGVudCAmJiBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIGV4dCA9IHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICByZXR1cm4gQ2VzaXVtLlJlY3RhbmdsZS5mcm9tRGVncmVlcyhleHRbMF0sIGV4dFsxXSwgZXh0WzJdLCBleHRbM10pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5leHBvcnRzLnRpbGVMYXllclRvSW1hZ2VyeUxheWVyID0gZnVuY3Rpb24gKG9sTWFwLCBvbExheWVyLCB2aWV3UHJvaikge1xuICBpZiAoIShvbExheWVyIGluc3RhbmNlb2Ygb2xMYXllclRpbGUpICYmICEob2xMYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJJbWFnZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBwcm92aWRlciA9IG51bGw7XG4gIHZhciBzb3VyY2UgPSBvbExheWVyLmdldFNvdXJjZSgpO1xuXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZUltYWdlV01TICYmIHNvdXJjZS5nZXRVcmwoKSAmJiBzb3VyY2UuZ2V0SW1hZ2VMb2FkRnVuY3Rpb24oKSA9PT0gZGVmYXVsdEltYWdlTG9hZEZ1bmN0aW9uKSB7XG4gICAgdmFyIHNvdXJjZVByb3BzID0ge1xuICAgICAgJ29sY3MucHJveHknOiBzb3VyY2UuZ2V0KCdvbGNzLnByb3h5JyksXG4gICAgICAnb2xjcy5leHRlbnQnOiBzb3VyY2UuZ2V0KCdvbGNzLmV4dGVudCcpLFxuICAgICAgJ29sY3MucHJvamVjdGlvbic6IHNvdXJjZS5nZXQoJ29sY3MucHJvamVjdGlvbicpLFxuICAgICAgJ29sY3MuaW1hZ2Vzb3VyY2UnOiBzb3VyY2VcbiAgICB9O1xuICAgIHNvdXJjZSA9IG5ldyBvbFNvdXJjZVRpbGVXTVMoe1xuICAgICAgdXJsOiBzb3VyY2UuZ2V0VXJsKCksXG4gICAgICBhdHRyaWJ1dGlvbnM6IHNvdXJjZS5nZXRBdHRyaWJ1dGlvbnMoKSxcbiAgICAgIHByb2plY3Rpb246IHNvdXJjZS5nZXRQcm9qZWN0aW9uKCksXG4gICAgICBwYXJhbXM6IHNvdXJjZS5nZXRQYXJhbXMoKVxuICAgIH0pO1xuICAgIHNvdXJjZS5zZXRQcm9wZXJ0aWVzKHNvdXJjZVByb3BzKTtcbiAgfVxuXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVRpbGVJbWFnZSkge1xuICAgIHZhciBwcm9qZWN0aW9uID0gb2xjc1V0aWwuZ2V0U291cmNlUHJvamVjdGlvbihzb3VyY2UpO1xuXG4gICAgaWYgKCFwcm9qZWN0aW9uKSB7XG4gICAgICBwcm9qZWN0aW9uID0gdmlld1Byb2o7XG4gICAgfVxuXG4gICAgaWYgKGV4cG9ydHMuaXNDZXNpdW1Qcm9qZWN0aW9uKHByb2plY3Rpb24pKSB7XG4gICAgICBwcm92aWRlciA9IG5ldyBvbGNzQ29yZU9MSW1hZ2VyeVByb3ZpZGVyKG9sTWFwLCBzb3VyY2UsIHZpZXdQcm9qKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlSW1hZ2VTdGF0aWMpIHtcbiAgICB2YXIgX3Byb2plY3Rpb24gPSBvbGNzVXRpbC5nZXRTb3VyY2VQcm9qZWN0aW9uKHNvdXJjZSk7XG5cbiAgICBpZiAoIV9wcm9qZWN0aW9uKSB7XG4gICAgICBfcHJvamVjdGlvbiA9IHZpZXdQcm9qO1xuICAgIH1cblxuICAgIGlmIChleHBvcnRzLmlzQ2VzaXVtUHJvamVjdGlvbihfcHJvamVjdGlvbikpIHtcbiAgICAgIHByb3ZpZGVyID0gbmV3IENlc2l1bS5TaW5nbGVUaWxlSW1hZ2VyeVByb3ZpZGVyKHtcbiAgICAgICAgdXJsOiBzb3VyY2UuZ2V0VXJsKCksXG4gICAgICAgIHJlY3RhbmdsZTogbmV3IENlc2l1bS5SZWN0YW5nbGUuZnJvbURlZ3JlZXMoc291cmNlLmdldEltYWdlRXh0ZW50KClbMF0sIHNvdXJjZS5nZXRJbWFnZUV4dGVudCgpWzFdLCBzb3VyY2UuZ2V0SW1hZ2VFeHRlbnQoKVsyXSwgc291cmNlLmdldEltYWdlRXh0ZW50KClbM10pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGxheWVyT3B0aW9ucyA9IHt9O1xuICB2YXIgZm9yY2VkRXh0ZW50ID0gb2xMYXllci5nZXQoJ29sY3MuZXh0ZW50Jyk7XG4gIHZhciBleHQgPSBmb3JjZWRFeHRlbnQgfHwgb2xMYXllci5nZXRFeHRlbnQoKTtcblxuICBpZiAoZXh0KSB7XG4gICAgbGF5ZXJPcHRpb25zLnJlY3RhbmdsZSA9IGV4cG9ydHMuZXh0ZW50VG9SZWN0YW5nbGUoZXh0LCB2aWV3UHJvaik7XG4gIH1cblxuICB2YXIgY2VzaXVtTGF5ZXIgPSBuZXcgQ2VzaXVtLkltYWdlcnlMYXllcihwcm92aWRlciwgbGF5ZXJPcHRpb25zKTtcbiAgcmV0dXJuIGNlc2l1bUxheWVyO1xufTtcblxuZXhwb3J0cy51cGRhdGVDZXNpdW1MYXllclByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2xMYXllcldpdGhQYXJlbnRzLCBjc0xheWVyKSB7XG4gIHZhciBvcGFjaXR5ID0gMTtcbiAgdmFyIHZpc2libGUgPSB0cnVlO1xuICBbb2xMYXllcldpdGhQYXJlbnRzLmxheWVyXS5jb25jYXQob2xMYXllcldpdGhQYXJlbnRzLnBhcmVudHMpLmZvckVhY2goZnVuY3Rpb24gKG9sTGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJPcGFjaXR5ID0gb2xMYXllci5nZXRPcGFjaXR5KCk7XG5cbiAgICBpZiAobGF5ZXJPcGFjaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wYWNpdHkgKj0gbGF5ZXJPcGFjaXR5O1xuICAgIH1cblxuICAgIHZhciBsYXllclZpc2libGUgPSBvbExheWVyLmdldFZpc2libGUoKTtcblxuICAgIGlmIChsYXllclZpc2libGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmlzaWJsZSAmPSBsYXllclZpc2libGU7XG4gICAgfVxuICB9KTtcbiAgY3NMYXllci5hbHBoYSA9IG9wYWNpdHk7XG4gIGNzTGF5ZXIuc2hvdyA9IHZpc2libGU7XG59O1xuXG5leHBvcnRzLm9sNDMyNkNvb3JkaW5hdGVUb0Nlc2l1bUNhcnRlc2lhbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gIHZhciBjb28gPSBjb29yZGluYXRlO1xuICByZXR1cm4gY29vLmxlbmd0aCA+IDIgPyBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcyhjb29bMF0sIGNvb1sxXSwgY29vWzJdKSA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKGNvb1swXSwgY29vWzFdKTtcbn07XG5cbmV4cG9ydHMub2w0MzI2Q29vcmRpbmF0ZUFycmF5VG9Dc0NhcnRlc2lhbnMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMpIHtcbiAgY29uc29sZS5hc3NlcnQoY29vcmRpbmF0ZXMgIT09IG51bGwpO1xuICB2YXIgdG9DYXJ0ZXNpYW4gPSBleHBvcnRzLm9sNDMyNkNvb3JkaW5hdGVUb0Nlc2l1bUNhcnRlc2lhbjtcbiAgdmFyIGNhcnRlc2lhbnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgKytpKSB7XG4gICAgY2FydGVzaWFucy5wdXNoKHRvQ2FydGVzaWFuKGNvb3JkaW5hdGVzW2ldKSk7XG4gIH1cblxuICByZXR1cm4gY2FydGVzaWFucztcbn07XG5cbmV4cG9ydHMub2xHZW9tZXRyeUNsb25lVG80MzI2ID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBwcm9qZWN0aW9uKSB7XG4gIGNvbnNvbGUuYXNzZXJ0KHByb2plY3Rpb24pO1xuICB2YXIgcHJvajQzMjYgPSBnZXRQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKTtcbiAgdmFyIHByb2ogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuXG4gIGlmIChwcm9qICE9PSBwcm9qNDMyNikge1xuICAgIHZhciBwcm9wZXJ0aWVzID0gZ2VvbWV0cnkuZ2V0UHJvcGVydGllcygpO1xuICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKTtcbiAgICBnZW9tZXRyeS50cmFuc2Zvcm0ocHJvaiwgcHJvajQzMjYpO1xuICAgIGdlb21ldHJ5LnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gIH1cblxuICByZXR1cm4gZ2VvbWV0cnk7XG59O1xuXG5leHBvcnRzLmNvbnZlcnRDb2xvclRvQ2VzaXVtID0gZnVuY3Rpb24gKG9sQ29sb3IpIHtcbiAgb2xDb2xvciA9IG9sQ29sb3IgfHwgJ2JsYWNrJztcblxuICBpZiAoQXJyYXkuaXNBcnJheShvbENvbG9yKSkge1xuICAgIHJldHVybiBuZXcgQ2VzaXVtLkNvbG9yKENlc2l1bS5Db2xvci5ieXRlVG9GbG9hdChvbENvbG9yWzBdKSwgQ2VzaXVtLkNvbG9yLmJ5dGVUb0Zsb2F0KG9sQ29sb3JbMV0pLCBDZXNpdW0uQ29sb3IuYnl0ZVRvRmxvYXQob2xDb2xvclsyXSksIG9sQ29sb3JbM10pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvbENvbG9yID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIENlc2l1bS5Db2xvci5mcm9tQ3NzQ29sb3JTdHJpbmcob2xDb2xvcik7XG4gIH0gZWxzZSBpZiAob2xDb2xvciBpbnN0YW5jZW9mIENhbnZhc1BhdHRlcm4gfHwgb2xDb2xvciBpbnN0YW5jZW9mIENhbnZhc0dyYWRpZW50KSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMjU2O1xuICAgIGN0eC5maWxsU3R5bGUgPSBvbENvbG9yO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIHJldHVybiBuZXcgQ2VzaXVtLkltYWdlTWF0ZXJpYWxQcm9wZXJ0eSh7XG4gICAgICBpbWFnZTogY2FudmFzXG4gICAgfSk7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydChmYWxzZSwgJ2ltcG9zc2libGUnKTtcbn07XG5cbmV4cG9ydHMuY29udmVydFVybFRvQ2VzaXVtID0gZnVuY3Rpb24gKHVybCkge1xuICB2YXIgc3ViZG9tYWlucyA9ICcnO1xuICB2YXIgcmUgPSAvXFx7KFxcZHxbYS16XSktKFxcZHxbYS16XSlcXH0vO1xuICB2YXIgbWF0Y2ggPSByZS5leGVjKHVybCk7XG5cbiAgaWYgKG1hdGNoKSB7XG4gICAgdXJsID0gdXJsLnJlcGxhY2UocmUsICd7c30nKTtcbiAgICB2YXIgc3RhcnRDaGFyQ29kZSA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIHN0b3BDaGFyQ29kZSA9IG1hdGNoWzJdLmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIGNoYXJDb2RlO1xuXG4gICAgZm9yIChjaGFyQ29kZSA9IHN0YXJ0Q2hhckNvZGU7IGNoYXJDb2RlIDw9IHN0b3BDaGFyQ29kZTsgKytjaGFyQ29kZSkge1xuICAgICAgc3ViZG9tYWlucyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHVybDogdXJsLFxuICAgIHN1YmRvbWFpbnM6IHN1YmRvbWFpbnNcbiAgfTtcbn07XG5cbmV4cG9ydHMucmVzZXRUb05vcnRoWmVuaXRoID0gZnVuY3Rpb24gKG1hcCwgc2NlbmUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgY2FtZXJhID0gc2NlbmUuY2FtZXJhO1xuICAgIHZhciBwaXZvdCA9IGV4cG9ydHMucGlja0JvdHRvbVBvaW50KHNjZW5lKTtcblxuICAgIGlmICghcGl2b3QpIHtcbiAgICAgIHJlamVjdCgnQ291bGQgbm90IGdldCBib3R0b20gcGl2b3QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY3VycmVudEhlYWRpbmcgPSBtYXAuZ2V0VmlldygpLmdldFJvdGF0aW9uKCk7XG5cbiAgICBpZiAoY3VycmVudEhlYWRpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVqZWN0KCdUaGUgdmlldyBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYW5nbGUgPSBleHBvcnRzLmNvbXB1dGVBbmdsZVRvWmVuaXRoKHNjZW5lLCBwaXZvdCk7XG4gICAgZXhwb3J0cy5zZXRIZWFkaW5nVXNpbmdCb3R0b21DZW50ZXIoc2NlbmUsIGN1cnJlbnRIZWFkaW5nLCBwaXZvdCk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IENlc2l1bS5NYXRyaXg0LmZyb21UcmFuc2xhdGlvbihwaXZvdCk7XG4gICAgdmFyIGF4aXMgPSBjYW1lcmEucmlnaHQ7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgZXhwb3J0cy5ub3JtYWxpemVWaWV3KHZpZXcpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBleHBvcnRzLnJvdGF0ZUFyb3VuZEF4aXMoY2FtZXJhLCAtYW5nbGUsIGF4aXMsIHRyYW5zZm9ybSwgb3B0aW9ucyk7XG4gIH0pO1xufTtcblxuZXhwb3J0cy5yb3RhdGVBcm91bmRCb3R0b21DZW50ZXIgPSBmdW5jdGlvbiAoc2NlbmUsIGFuZ2xlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGNhbWVyYSA9IHNjZW5lLmNhbWVyYTtcbiAgICB2YXIgcGl2b3QgPSBleHBvcnRzLnBpY2tCb3R0b21Qb2ludChzY2VuZSk7XG5cbiAgICBpZiAoIXBpdm90KSB7XG4gICAgICByZWplY3QoJ2NvdWxkIG5vdCBnZXQgYm90dG9tIHBpdm90Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBjYWxsYmFjazogcmVzb2x2ZVxuICAgIH07XG4gICAgdmFyIHRyYW5zZm9ybSA9IENlc2l1bS5NYXRyaXg0LmZyb21UcmFuc2xhdGlvbihwaXZvdCk7XG4gICAgdmFyIGF4aXMgPSBjYW1lcmEucmlnaHQ7XG4gICAgdmFyIHJvdGF0ZUFyb3VuZEF4aXMgPSBleHBvcnRzLnJvdGF0ZUFyb3VuZEF4aXM7XG4gICAgcm90YXRlQXJvdW5kQXhpcyhjYW1lcmEsIC1hbmdsZSwgYXhpcywgdHJhbnNmb3JtLCBvcHRpb25zKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLm5vcm1hbGl6ZVZpZXcgPSBmdW5jdGlvbiAodmlldywgYW5nbGUpIHtcbiAgaWYgKGFuZ2xlID09PSB2b2lkIDApIHtcbiAgICBhbmdsZSA9IDA7XG4gIH1cblxuICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuICB2aWV3LnNldFJvdGF0aW9uKGFuZ2xlKTtcblxuICBpZiAodmlldy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgdmlldy5zZXRSZXNvbHV0aW9uKHZpZXcuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uKSk7XG4gIH0gZWxzZSB7XG4gICAgdmlldy5zZXRSZXNvbHV0aW9uKHZpZXcuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHJlc29sdXRpb24pKTtcbiAgfVxufTtcblxuZXhwb3J0cy5pc0Nlc2l1bVByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICB2YXIgaXMzODU3ID0gcHJvamVjdGlvbiA9PT0gZ2V0UHJvamVjdGlvbignRVBTRzozODU3Jyk7XG4gIHZhciBpczQzMjYgPSBwcm9qZWN0aW9uID09PSBnZXRQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKTtcbiAgcmV0dXJuIGlzMzg1NyB8fCBpczQzMjY7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBleHBvcnRzOyIsImltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnb2wvcHJvai5qcyc7XG5pbXBvcnQgb2xjc1V0aWwgZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBUaWxlIGFzIFRpbGVTb3VyY2UgfSBmcm9tICdvbC9zb3VyY2UuanMnO1xuXG52YXIgb2xVc2VOZXdDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRpbGVTb3VyY2UgPSBuZXcgVGlsZVNvdXJjZSh7XG4gICAgcHJvamVjdGlvbjogJ0VQU0c6Mzg1NycsXG4gICAgd3JhcFg6IHRydWVcbiAgfSk7XG4gIHZhciB0aWxlQ29vcmQgPSB0aWxlU291cmNlLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbihbNiwgLTMxLCAyMl0pO1xuICByZXR1cm4gdGlsZUNvb3JkICYmIHRpbGVDb29yZFsxXSA9PT0gMzMgJiYgdGlsZUNvb3JkWzJdID09PSAyMjtcbn0oKTtcblxudmFyIE9MSW1hZ2VyeVByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBPTEltYWdlcnlQcm92aWRlcihvbE1hcCwgc291cmNlLCBvcHRfZmFsbGJhY2tQcm9qKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMuc291cmNlXyA9IHNvdXJjZTtcbiAgICB0aGlzLnByb2plY3Rpb25fID0gbnVsbDtcbiAgICB0aGlzLmZhbGxiYWNrUHJval8gPSBvcHRfZmFsbGJhY2tQcm9qIHx8IG51bGw7XG4gICAgdGhpcy5yZWFkeV8gPSBmYWxzZTtcbiAgICB0aGlzLnRpbGluZ1NjaGVtZV8gPSBudWxsO1xuICAgIHRoaXMucmVjdGFuZ2xlXyA9IG51bGw7XG4gICAgdGhpcy5tYXBfID0gb2xNYXA7XG4gICAgdGhpcy5zaG91bGRSZXF1ZXN0TmV4dExldmVsID0gZmFsc2U7XG4gICAgdmFyIHByb3h5ID0gdGhpcy5zb3VyY2VfLmdldCgnb2xjcy5wcm94eScpO1xuXG4gICAgaWYgKHByb3h5KSB7XG4gICAgICBpZiAodHlwZW9mIHByb3h5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMucHJveHlfID0ge1xuICAgICAgICAgICdnZXRVUkwnOiBwcm94eVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJveHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMucHJveHlfID0gbmV3IENlc2l1bS5EZWZhdWx0UHJveHkocHJveHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZXJyb3JFdmVudF8gPSBuZXcgQ2VzaXVtLkV2ZW50KCk7XG4gICAgdGhpcy5lbXB0eUNhbnZhc18gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLmVtcHR5Q2FudmFzXy53aWR0aCA9IDE7XG4gICAgdGhpcy5lbXB0eUNhbnZhc18uaGVpZ2h0ID0gMTtcbiAgICB0aGlzLnNvdXJjZV8ub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5oYW5kbGVTb3VyY2VDaGFuZ2VkXygpO1xuICAgIH0pO1xuICAgIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlZF8oKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBPTEltYWdlcnlQcm92aWRlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmhhbmRsZVNvdXJjZUNoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlU291cmNlQ2hhbmdlZF8oZnJhbWVTdGF0ZSkge1xuICAgIGlmICghdGhpcy5yZWFkeV8gJiYgdGhpcy5zb3VyY2VfLmdldFN0YXRlKCkgPT0gJ3JlYWR5Jykge1xuICAgICAgdGhpcy5wcm9qZWN0aW9uXyA9IG9sY3NVdGlsLmdldFNvdXJjZVByb2plY3Rpb24odGhpcy5zb3VyY2VfKSB8fCB0aGlzLmZhbGxiYWNrUHJval87XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbnVtYmVyT2ZMZXZlbFplcm9UaWxlc1g6IDEsXG4gICAgICAgIG51bWJlck9mTGV2ZWxaZXJvVGlsZXNZOiAxXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5zb3VyY2VfLnRpbGVHcmlkICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc291cmNlXy50aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkKHRoaXMucHJvamVjdGlvbl8uZ2V0RXh0ZW50KCksIDAsIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgICAgdmFyIHpvb20gPSBfcmVmWzBdLFxuICAgICAgICAgICAgICB4SW5kZXggPSBfcmVmWzFdLFxuICAgICAgICAgICAgICB5SW5kZXggPSBfcmVmWzJdO1xuICAgICAgICAgIG9wdGlvbnMubnVtYmVyT2ZMZXZlbFplcm9UaWxlc1ggPSB4SW5kZXggKyAxO1xuICAgICAgICAgIG9wdGlvbnMubnVtYmVyT2ZMZXZlbFplcm9UaWxlc1kgPSB5SW5kZXggKyAxO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvamVjdGlvbl8gPT0gZ2V0UHJvamVjdGlvbignRVBTRzo0MzI2JykpIHtcbiAgICAgICAgdGhpcy5zaG91bGRSZXF1ZXN0TmV4dExldmVsID0gb3B0aW9ucy5udW1iZXJPZkxldmVsWmVyb1RpbGVzWCA9PT0gMSAmJiBvcHRpb25zLm51bWJlck9mTGV2ZWxaZXJvVGlsZXNZID09PSAxO1xuICAgICAgICB0aGlzLnRpbGluZ1NjaGVtZV8gPSBuZXcgQ2VzaXVtLkdlb2dyYXBoaWNUaWxpbmdTY2hlbWUob3B0aW9ucyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvamVjdGlvbl8gPT0gZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykpIHtcbiAgICAgICAgdGhpcy5zaG91bGRSZXF1ZXN0TmV4dExldmVsID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGlsaW5nU2NoZW1lXyA9IG5ldyBDZXNpdW0uV2ViTWVyY2F0b3JUaWxpbmdTY2hlbWUob3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVjdGFuZ2xlXyA9IHRoaXMudGlsaW5nU2NoZW1lXy5yZWN0YW5nbGU7XG4gICAgICB0aGlzLnJlYWR5XyA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5nZXRUaWxlQ3JlZGl0cyA9IGZ1bmN0aW9uIGdldFRpbGVDcmVkaXRzKHgsIHksIGxldmVsKSB7XG4gICAgdmFyIGV4dGVudCA9IHRoaXMubWFwXy5nZXRWaWV3KCkuY2FsY3VsYXRlRXh0ZW50KHRoaXMubWFwXy5nZXRTaXplKCkpO1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLm1hcF8uZ2V0VmlldygpLmdldENlbnRlcigpO1xuICAgIHZhciB6b29tID0gdGhpcy5zaG91bGRSZXF1ZXN0TmV4dExldmVsID8gbGV2ZWwgKyAxIDogbGV2ZWw7XG4gICAgdmFyIGZyYW1lU3RhdGUgPSB7XG4gICAgICB2aWV3U3RhdGU6IHtcbiAgICAgICAgem9vbTogem9vbSxcbiAgICAgICAgY2VudGVyOiBjZW50ZXJcbiAgICAgIH0sXG4gICAgICBleHRlbnQ6IGV4dGVudFxuICAgIH07XG4gICAgdmFyIGF0dHJpYnV0aW9uc0Z1bmN0aW9uID0gdGhpcy5zb3VyY2VfLmdldEF0dHJpYnV0aW9ucygpO1xuXG4gICAgaWYgKCFhdHRyaWJ1dGlvbnNGdW5jdGlvbikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBhdHRyaWJ1dGlvbnMgPSBhdHRyaWJ1dGlvbnNGdW5jdGlvbihmcmFtZVN0YXRlKTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICBhdHRyaWJ1dGlvbnMgPSBbYXR0cmlidXRpb25zXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRpb25zLm1hcChmdW5jdGlvbiAoaHRtbCkge1xuICAgICAgcmV0dXJuIG5ldyBDZXNpdW0uQ3JlZGl0KGh0bWwsIHRydWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5yZXF1ZXN0SW1hZ2UgPSBmdW5jdGlvbiByZXF1ZXN0SW1hZ2UoeCwgeSwgbGV2ZWwpIHtcbiAgICB2YXIgdGlsZVVybEZ1bmN0aW9uID0gdGhpcy5zb3VyY2VfLmdldFRpbGVVcmxGdW5jdGlvbigpO1xuXG4gICAgaWYgKHRpbGVVcmxGdW5jdGlvbiAmJiB0aGlzLnByb2plY3Rpb25fKSB7XG4gICAgICB2YXIgel8gPSB0aGlzLnNob3VsZFJlcXVlc3ROZXh0TGV2ZWwgPyBsZXZlbCArIDEgOiBsZXZlbDtcbiAgICAgIHZhciB5XyA9IHk7XG5cbiAgICAgIGlmICghb2xVc2VOZXdDb29yZGluYXRlcykge1xuICAgICAgICB5XyA9IC15IC0gMTtcbiAgICAgIH1cblxuICAgICAgdmFyIHVybCA9IHRpbGVVcmxGdW5jdGlvbi5jYWxsKHRoaXMuc291cmNlXywgW3pfLCB4LCB5X10sIDEsIHRoaXMucHJvamVjdGlvbl8pO1xuXG4gICAgICBpZiAodGhpcy5wcm94eV8pIHtcbiAgICAgICAgdXJsID0gdGhpcy5wcm94eV8uZ2V0VVJMKHVybCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1cmwgPyBDZXNpdW0uSW1hZ2VyeVByb3ZpZGVyLmxvYWRJbWFnZSh0aGlzLCB1cmwpIDogdGhpcy5lbXB0eUNhbnZhc187XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmVtcHR5Q2FudmFzXztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE9MSW1hZ2VyeVByb3ZpZGVyO1xufSgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhPTEltYWdlcnlQcm92aWRlci5wcm90b3R5cGUsIHtcbiAgJ3JlYWR5Jzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWFkeV87XG4gICAgfVxuICB9LFxuICAncmVjdGFuZ2xlJzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWN0YW5nbGVfO1xuICAgIH1cbiAgfSxcbiAgJ3RpbGVXaWR0aCc6IHtcbiAgICAnZ2V0JzogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHRnID0gdGhpcy5zb3VyY2VfLmdldFRpbGVHcmlkKCk7XG4gICAgICByZXR1cm4gdGcgPyBBcnJheS5pc0FycmF5KHRnLmdldFRpbGVTaXplKDApKSA/IHRnLmdldFRpbGVTaXplKDApWzBdIDogdGcuZ2V0VGlsZVNpemUoMCkgOiAyNTY7XG4gICAgfVxuICB9LFxuICAndGlsZUhlaWdodCc6IHtcbiAgICAnZ2V0JzogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIHRnID0gdGhpcy5zb3VyY2VfLmdldFRpbGVHcmlkKCk7XG4gICAgICByZXR1cm4gdGcgPyBBcnJheS5pc0FycmF5KHRnLmdldFRpbGVTaXplKDApKSA/IHRnLmdldFRpbGVTaXplKDApWzFdIDogdGcuZ2V0VGlsZVNpemUoMCkgOiAyNTY7XG4gICAgfVxuICB9LFxuICAnbWF4aW11bUxldmVsJzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgdGcgPSB0aGlzLnNvdXJjZV8uZ2V0VGlsZUdyaWQoKTtcbiAgICAgIHJldHVybiB0ZyA/IHRnLmdldE1heFpvb20oKSA6IDE4O1xuICAgIH1cbiAgfSxcbiAgJ21pbmltdW1MZXZlbCc6IHtcbiAgICAnZ2V0JzogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9LFxuICAndGlsaW5nU2NoZW1lJzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy50aWxpbmdTY2hlbWVfO1xuICAgIH1cbiAgfSxcbiAgJ3RpbGVEaXNjYXJkUG9saWN5Jzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSxcbiAgJ2Vycm9yRXZlbnQnOiB7XG4gICAgJ2dldCc6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVycm9yRXZlbnRfO1xuICAgIH1cbiAgfSxcbiAgJ3Byb3h5Jzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm94eV87XG4gICAgfVxuICB9LFxuICAnaGFzQWxwaGFDaGFubmVsJzoge1xuICAgICdnZXQnOiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gICdwaWNrRmVhdHVyZXMnOiB7XG4gICAgJ2dldCc6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59KTtcbmV4cG9ydCBkZWZhdWx0IE9MSW1hZ2VyeVByb3ZpZGVyOyIsImltcG9ydCB7IHVuQnlLZXkgYXMgb2xPYnNlcnZhYmxlVW5CeUtleSB9IGZyb20gJ29sL09ic2VydmFibGUuanMnO1xuXG52YXIgVmVjdG9yTGF5ZXJDb3VudGVycGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVmVjdG9yTGF5ZXJDb3VudGVycGFydChsYXllclByb2plY3Rpb24sIHNjZW5lKSB7XG4gICAgdmFyIGJpbGxib2FyZHMgPSBuZXcgQ2VzaXVtLkJpbGxib2FyZENvbGxlY3Rpb24oe1xuICAgICAgc2NlbmU6IHNjZW5lXG4gICAgfSk7XG4gICAgdmFyIHByaW1pdGl2ZXMgPSBuZXcgQ2VzaXVtLlByaW1pdGl2ZUNvbGxlY3Rpb24oKTtcbiAgICB0aGlzLm9sTGlzdGVuS2V5cyA9IFtdO1xuICAgIHRoaXMucm9vdENvbGxlY3Rpb25fID0gbmV3IENlc2l1bS5QcmltaXRpdmVDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy5jb250ZXh0ID0ge1xuICAgICAgcHJvamVjdGlvbjogbGF5ZXJQcm9qZWN0aW9uLFxuICAgICAgYmlsbGJvYXJkczogYmlsbGJvYXJkcyxcbiAgICAgIGZlYXR1cmVUb0Nlc2l1bU1hcDoge30sXG4gICAgICBwcmltaXRpdmVzOiBwcmltaXRpdmVzXG4gICAgfTtcbiAgICB0aGlzLnJvb3RDb2xsZWN0aW9uXy5hZGQoYmlsbGJvYXJkcyk7XG4gICAgdGhpcy5yb290Q29sbGVjdGlvbl8uYWRkKHByaW1pdGl2ZXMpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFZlY3RvckxheWVyQ291bnRlcnBhcnQucHJvdG90eXBlO1xuXG4gIF9wcm90by5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB0aGlzLm9sTGlzdGVuS2V5cy5mb3JFYWNoKG9sT2JzZXJ2YWJsZVVuQnlLZXkpO1xuICAgIHRoaXMub2xMaXN0ZW5LZXlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgX3Byb3RvLmdldFJvb3RQcmltaXRpdmUgPSBmdW5jdGlvbiBnZXRSb290UHJpbWl0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLnJvb3RDb2xsZWN0aW9uXztcbiAgfTtcblxuICByZXR1cm4gVmVjdG9yTGF5ZXJDb3VudGVycGFydDtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgVmVjdG9yTGF5ZXJDb3VudGVycGFydDsiLCJleHBvcnQgZnVuY3Rpb24gdG9EZWdyZWVzKGFuZ2xlSW5SYWRpYW5zKSB7XG4gIHJldHVybiBhbmdsZUluUmFkaWFucyAqIDE4MCAvIE1hdGguUEk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9SYWRpYW5zKGFuZ2xlSW5EZWdyZWVzKSB7XG4gIHJldHVybiBhbmdsZUluRGVncmVlcyAqIE1hdGguUEkgLyAxODA7XG59IiwidmFyIGV4cG9ydHMgPSB7fTtcblxuZXhwb3J0cy5vYmogPSBmdW5jdGlvbiAocGFyYW0pIHtcbiAgcmV0dXJuIHBhcmFtO1xufTtcblxuZXhwb3J0cy5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkUmVzdWx0XyA9IHVuZGVmaW5lZDtcbmV4cG9ydHMuaW1hZ2VSZW5kZXJpbmdWYWx1ZVJlc3VsdF8gPSB1bmRlZmluZWQ7XG5cbmV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZFJlc3VsdF8gPT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdzdHlsZScsICdpbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7IGltYWdlLXJlbmRlcmluZzogcGl4ZWxhdGVkOycpO1xuICAgIHZhciB0bXAgPSBjYW52YXMuc3R5bGVbJ2ltYWdlUmVuZGVyaW5nJ107XG4gICAgZXhwb3J0cy5zdXBwb3J0c0ltYWdlUmVuZGVyaW5nUGl4ZWxhdGVkUmVzdWx0XyA9ICEhdG1wO1xuXG4gICAgaWYgKGV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZFJlc3VsdF8pIHtcbiAgICAgIGV4cG9ydHMuaW1hZ2VSZW5kZXJpbmdWYWx1ZVJlc3VsdF8gPSB0bXA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZFJlc3VsdF87XG59O1xuXG5leHBvcnRzLmltYWdlUmVuZGVyaW5nVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gIGV4cG9ydHMuc3VwcG9ydHNJbWFnZVJlbmRlcmluZ1BpeGVsYXRlZCgpO1xuICByZXR1cm4gZXhwb3J0cy5pbWFnZVJlbmRlcmluZ1ZhbHVlUmVzdWx0XyB8fCAnJztcbn07XG5cbmV4cG9ydHMuZ2V0U291cmNlUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgcmV0dXJuIHNvdXJjZS5nZXQoJ29sY3MucHJvamVjdGlvbicpIHx8IHNvdXJjZS5nZXRQcm9qZWN0aW9uKCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gb2xjc0xpc3RlbihvYnNlcnZhYmxlLCB0eXBlLCBsaXN0ZW5lcikge1xuICByZXR1cm4gb2JzZXJ2YWJsZS5vbih0eXBlLCBsaXN0ZW5lcik7XG59XG52YXIgdWlkQ291bnRlcl8gPSAwO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVpZChvYmopIHtcbiAgcmV0dXJuIG9iai5vbGNzX3VpZCB8fCAob2JqLm9sY3NfdWlkID0gKyt1aWRDb3VudGVyXyk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RhYmxlU29ydChhcnIsIGNvbXBhcmVGbmMpIHtcbiAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gIHZhciB0bXAgPSBBcnJheShhcnIubGVuZ3RoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdG1wW2ldID0ge1xuICAgICAgaW5kZXg6IGksXG4gICAgICB2YWx1ZTogYXJyW2ldXG4gICAgfTtcbiAgfVxuXG4gIHRtcC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGNvbXBhcmVGbmMoYS52YWx1ZSwgYi52YWx1ZSkgfHwgYS5pbmRleCAtIGIuaW5kZXg7XG4gIH0pO1xuXG4gIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcnIubGVuZ3RoOyBfaSsrKSB7XG4gICAgYXJyW19pXSA9IHRtcFtfaV0udmFsdWU7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG4gIHdoaWxlIChub2RlLmxhc3RDaGlsZCkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNHcm91bmRQb2x5bGluZVByaW1pdGl2ZVN1cHBvcnRlZChzY2VuZSkge1xuICB2YXIgb2JqID0gQ2VzaXVtLkdyb3VuZFBvbHlsaW5lUHJpbWl0aXZlO1xuICByZXR1cm4gb2JqICYmIG9iai5pc1N1cHBvcnRlZChzY2VuZSk7XG59XG5leHBvcnQgZGVmYXVsdCBleHBvcnRzOyIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbmV4dEhhbmRsZSA9IDE7XG4gIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgIH1cblxuICAgIHZhciB0YXNrID0ge1xuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgYXJnczogYXJnc1xuICAgIH07XG4gICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gIH1cblxuICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG5cbiAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAyOlxuICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXG4gICAgICBpZiAodGFzaykge1xuICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblxuICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXG4gICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uIG9uR2xvYmFsTWVzc2FnZShldmVudCkge1xuICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgfTtcblxuICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblxuICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgIH07XG4gIH1cblxuICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG4gIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG4gIH0gZWxzZSB7XG4gICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICB9XG5cbiAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSkodHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpOyIsInZhciBzY29wZSA9IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsIHx8IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYgfHwgd2luZG93O1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcblxuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHNjb3BlLCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5cbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKCkge307XG5cblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwoc2NvcGUsIHRoaXMuX2lkKTtcbn07XG5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblxuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcblxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSB8fCB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUgfHwgdGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlIHx8IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlIHx8IHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IG9sRXZlbnRzRXZlbnQgZnJvbSAnb2wvZXZlbnRzL0V2ZW50LmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9vbEV2ZW50c0V2ZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfb2xFdmVudHNFdmVudCk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQodHlwZSwgZGV0YWlsKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKGRldGFpbCA9PT0gdm9pZCAwKSB7XG4gICAgICBkZXRhaWwgPSB7fTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9vbEV2ZW50c0V2ZW50LmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICBfdGhpcy5kZXRhaWwgPSBkZXRhaWw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShvbEV2ZW50c0V2ZW50KTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQ0lSQ0xFOiAnQ2lyY2xlJyxcbiAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgTVVMVElfTElORV9TVFJJTkc6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICBNVUxUSV9QT0lOVDogJ011bHRpUG9pbnQnLFxuICBNVUxUSV9QT0xZR09OOiAnTXVsdGlQb2x5Z29uJyxcbiAgUE9JTlQ6ICdQb2ludCcsXG4gIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgUkVDVEFOR0xFOiAnUmVjdGFuZ2xlJyxcbiAgVEVYVDogJ1RleHQnXG59OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgbmdlb0N1c3RvbUV2ZW50IGZyb20gJ25nZW8vQ3VzdG9tRXZlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbE92ZXJsYXkgZnJvbSAnb2wvT3ZlcmxheS5qcyc7XG5pbXBvcnQgb2xPdmVybGF5UG9zaXRpb25pbmcgZnJvbSAnb2wvT3ZlcmxheVBvc2l0aW9uaW5nLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9vbE92ZXJsYXkpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9vbE92ZXJsYXkpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG1lbnVPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIG9wdGlvbnMucG9zaXRpb25pbmcgPSBvbE92ZXJsYXlQb3NpdGlvbmluZy5UT1BfTEVGVDtcblxuICAgIGlmICghbWVudU9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZW51T3B0aW9ucycpO1xuICAgIH1cblxuICAgIF90aGlzID0gX29sT3ZlcmxheS5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgIF90aGlzLmNsaWNrT3V0TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB2YXIgY29udGVudEVsID0gJCgnPGRpdi8+Jywge1xuICAgICAgJ2NsYXNzJzogJ3BhbmVsIHBhbmVsLWRlZmF1bHQnXG4gICAgfSk7XG4gICAgX3RoaXMuYXV0b0Nsb3NlXyA9IG1lbnVPcHRpb25zLmF1dG9DbG9zZSAhPT0gdW5kZWZpbmVkID8gbWVudU9wdGlvbnMuYXV0b0Nsb3NlIDogdHJ1ZTtcblxuICAgIGlmIChtZW51T3B0aW9ucy50aXRsZSkge1xuICAgICAgdmFyIGhlYWRlckVsID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICdjbGFzcyc6ICdwYW5lbC1oZWFkaW5nJ1xuICAgICAgfSkuYXBwZW5kVG8oY29udGVudEVsKTtcbiAgICAgICQoJzxzcGFuPicsIHtcbiAgICAgICAgdGV4dDogbWVudU9wdGlvbnMudGl0bGVcbiAgICAgIH0pLmFwcGVuZFRvKGhlYWRlckVsKTtcbiAgICB9XG5cbiAgICB2YXIgYWN0aW9uc0VsID0gJCgnPGRpdj4nLCB7XG4gICAgICAnY2xhc3MnOiAnbGlzdC1ncm91cCdcbiAgICB9KS5hcHBlbmRUbyhjb250ZW50RWwpO1xuICAgIF90aGlzLmFjdGlvbnNfID0gW107XG4gICAgbWVudU9wdGlvbnMuYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgIF90aGlzLmFjdGlvbnNfLnB1c2goJCgnPGJ1dHRvbj4nLCB7XG4gICAgICAgICdjbGFzcyc6ICdsaXN0LWdyb3VwLWl0ZW0gYnRuJyxcbiAgICAgICAgJ2RhdGEtbmFtZSc6IGFjdGlvbi5uYW1lLFxuICAgICAgICAndGV4dCc6IFsnICcsIGFjdGlvbi5sYWJlbCAhPT0gdW5kZWZpbmVkID8gYWN0aW9uLmxhYmVsIDogYWN0aW9uLm5hbWVdLmpvaW4oJycpXG4gICAgICB9KS5hcHBlbmRUbyhhY3Rpb25zRWwpLnByZXBlbmQoJCgnPHNwYW4+Jywge1xuICAgICAgICAnY2xhc3MnOiBhY3Rpb24uY2xzICE9PSB1bmRlZmluZWQgPyBhY3Rpb24uY2xzIDogJydcbiAgICAgIH0pKSk7XG4gICAgfSk7XG5cbiAgICBfdGhpcy5zZXRFbGVtZW50KGNvbnRlbnRFbFswXSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAobWFwKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgY3VycmVudE1hcCA9IHRoaXMuZ2V0TWFwKCk7XG5cbiAgICBpZiAoY3VycmVudE1hcCkge1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBvbE92ZXJsYXkucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG5cbiAgICBpZiAobWFwKSB7XG4gICAgICB0aGlzLmFjdGlvbnNfLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgZGF0YSA9IGFjdGlvbi5kYXRhKCk7XG5cbiAgICAgICAgX3RoaXMyLmxpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oYWN0aW9uWzBdLCAnY2xpY2snLCBfdGhpczIuaGFuZGxlQWN0aW9uQ2xpY2tfLmJpbmQoX3RoaXMyLCBkYXRhLm5hbWUpKSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3RlbihtYXAsICdwb2ludGVybW92ZScsIHRoaXMuaGFuZGxlTWFwUG9pbnRlck1vdmVfLCB0aGlzKSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5vcGVuID0gZnVuY3Rpb24gb3Blbihjb29yZGluYXRlKSB7XG4gICAgdGhpcy5zZXRQb3NpdGlvbihjb29yZGluYXRlKTtcblxuICAgIGlmICghKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBkb2N1bWVudCBlbGVtZW50IHR5cGUnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRvQ2xvc2VfKSB7XG4gICAgICB0aGlzLmNsaWNrT3V0TGlzdGVuZXJLZXlfID0gbGlzdGVuKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlQ2xpY2tPdXRfLCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgdGhpcy5zZXRQb3NpdGlvbih1bmRlZmluZWQpO1xuXG4gICAgaWYgKHRoaXMuY2xpY2tPdXRMaXN0ZW5lcktleV8gIT09IG51bGwpIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5jbGlja091dExpc3RlbmVyS2V5Xyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVBY3Rpb25DbGlja18gPSBmdW5jdGlvbiBoYW5kbGVBY3Rpb25DbGlja18oYWN0aW9uLCBldnQpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IG5nZW9DdXN0b21FdmVudCgnYWN0aW9uY2xpY2snLCB7XG4gICAgICBhY3Rpb246IGFjdGlvblxuICAgIH0pKTtcblxuICAgIGlmICh0aGlzLmF1dG9DbG9zZV8pIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUNsaWNrT3V0XyA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrT3V0XyhldnQpIHtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpO1xuXG4gICAgaWYgKGVsZW1lbnQgJiYgJChldnQudGFyZ2V0KS5jbG9zZXN0KGVsZW1lbnQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWFwUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gaGFuZGxlTWFwUG9pbnRlck1vdmVfKG15RXZlbnQpIHtcbiAgICB2YXIgdGFyZ2V0ID0gbXlFdmVudC5vcmlnaW5hbEV2ZW50LnRhcmdldDtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpO1xuXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgZWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgZWxlbWVudC5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICBteUV2ZW50LmNvb3JkaW5hdGUgPSBbSW5maW5pdHksIEluZmluaXR5XTtcbiAgICAgIG15RXZlbnQucGl4ZWwgPSBbSW5maW5pdHksIEluZmluaXR5XTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShvbE92ZXJsYXkpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBvbEZvcm1hdFhNTCBmcm9tICdvbC9mb3JtYXQvWE1MLmpzJztcbmltcG9ydCAqIGFzIG9sWG1sIGZyb20gJ29sL3htbC5qcyc7XG52YXIgTkFNRVNQQUNFX1VSSVNfID0gW251bGwsICdodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSddO1xuXG5mdW5jdGlvbiBtYWtlU3RydWN0dXJlTlMobmFtZXNwYWNlVVJJcywgc3RydWN0dXJlKSB7XG4gIHJldHVybiBvbFhtbC5tYWtlU3RydWN0dXJlTlMobmFtZXNwYWNlVVJJcywgc3RydWN0dXJlKTtcbn1cblxudmFyIFBBUlNFUlNfID0gbWFrZVN0cnVjdHVyZU5TKE5BTUVTUEFDRV9VUklTXywge1xuICBlbGVtZW50OiBvbFhtbC5tYWtlT2JqZWN0UHJvcGVydHlQdXNoZXIocmVhZEVsZW1lbnRfKSxcbiAgY29tcGxleFR5cGU6IG9sWG1sLm1ha2VPYmplY3RQcm9wZXJ0eVB1c2hlcihyZWFkQ29tcGxleFR5cGVfKVxufSk7XG52YXIgQ09NUExFWF9UWVBFX1BBUlNFUlNfID0gbWFrZVN0cnVjdHVyZU5TKE5BTUVTUEFDRV9VUklTXywge1xuICBjb21wbGV4Q29udGVudDogb2xYbWwubWFrZU9iamVjdFByb3BlcnR5U2V0dGVyKHJlYWRDb21wbGV4Q29udGVudF8pXG59KTtcbnZhciBDT01QTEVYX0NPTlRFTlRfUEFSU0VSU18gPSBtYWtlU3RydWN0dXJlTlMoTkFNRVNQQUNFX1VSSVNfLCB7XG4gIGV4dGVuc2lvbjogb2xYbWwubWFrZU9iamVjdFByb3BlcnR5U2V0dGVyKHJlYWRFeHRlbnNpb25fKVxufSk7XG52YXIgRVhURU5TSU9OX1BBUlNFUlNfID0gbWFrZVN0cnVjdHVyZU5TKE5BTUVTUEFDRV9VUklTXywge1xuICBzZXF1ZW5jZTogb2xYbWwubWFrZU9iamVjdFByb3BlcnR5U2V0dGVyKHJlYWRTZXF1ZW5jZV8pXG59KTtcbnZhciBTRVFVRU5DRV9QQVJTRVJTXyA9IG1ha2VTdHJ1Y3R1cmVOUyhOQU1FU1BBQ0VfVVJJU18sIHtcbiAgZWxlbWVudDogb2xYbWwubWFrZU9iamVjdFByb3BlcnR5UHVzaGVyKHJlYWRFbGVtZW50Xylcbn0pO1xuXG52YXIgV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZSA9IGZ1bmN0aW9uIChfb2xGb3JtYXRYTUwpIHtcbiAgX2luaGVyaXRzTG9vc2UoV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZSwgX29sRm9ybWF0WE1MKTtcblxuICBmdW5jdGlvbiBXRlNEZXNjcmliZUZlYXR1cmVUeXBlKCkge1xuICAgIHJldHVybiBfb2xGb3JtYXRYTUwuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIFdGU0Rlc2NyaWJlRmVhdHVyZVR5cGU7XG59KG9sRm9ybWF0WE1MKTtcblxuV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZS5wcm90b3R5cGUucmVhZDtcblxuV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZS5wcm90b3R5cGUucmVhZEZyb21Eb2N1bWVudCA9IGZ1bmN0aW9uIChkb2MpIHtcbiAgdmFyIG5vZGU7XG5cbiAgZm9yIChub2RlID0gZG9jLmZpcnN0Q2hpbGQ7IG5vZGU7IG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgaWYgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVhZEZyb21Ob2RlKG5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZS5wcm90b3R5cGUucmVhZEZyb21Ob2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICByZXN1bHQgPSBvbFhtbC5wdXNoUGFyc2VBbmRQb3AocmVzdWx0LCBQQVJTRVJTXywgbm9kZSwgW10pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gcmVhZEVsZW1lbnRfKG5vZGUsIG9iamVjdFN0YWNrKSB7XG4gIHZhciBhdHRyaWJ1dGVzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBhdHRyaWJ1dGUgPSBub2RlLmF0dHJpYnV0ZXMuaXRlbShpKTtcblxuICAgIGlmICghYXR0cmlidXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYXR0cmlidXRlJyk7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gIH1cblxuICBpZiAob2JqZWN0U3RhY2subGVuZ3RoID09PSAxKSB7XG4gICAgdmFyIF9hdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzLnR5cGUuc3BsaXQoJzonKS5wb3AoKTtcblxuICAgIGlmICghX2F0dHJpYnV0ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGF0dHJpYnV0ZScpO1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZXMudHlwZSA9IF9hdHRyaWJ1dGU7XG4gIH1cblxuICByZXR1cm4gYXR0cmlidXRlcztcbn1cblxuZnVuY3Rpb24gcmVhZENvbXBsZXhUeXBlXyhub2RlLCBvYmplY3RTdGFjaykge1xuICB2YXIgbmFtZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG4gIHZhciBvYmplY3QgPSBvbFhtbC5wdXNoUGFyc2VBbmRQb3Aoe1xuICAgIG5hbWU6IG5hbWVcbiAgfSwgQ09NUExFWF9UWVBFX1BBUlNFUlNfLCBub2RlLCBvYmplY3RTdGFjayk7XG4gIG9iamVjdC5jb21wbGV4Q29udGVudCA9IG9iamVjdC5jb21wbGV4Q29udGVudC5leHRlbnNpb24uc2VxdWVuY2UuZWxlbWVudDtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gcmVhZENvbXBsZXhDb250ZW50Xyhub2RlLCBvYmplY3RTdGFjaykge1xuICByZXR1cm4gb2xYbWwucHVzaFBhcnNlQW5kUG9wKHt9LCBDT01QTEVYX0NPTlRFTlRfUEFSU0VSU18sIG5vZGUsIG9iamVjdFN0YWNrKTtcbn1cblxuZnVuY3Rpb24gcmVhZEV4dGVuc2lvbl8obm9kZSwgb2JqZWN0U3RhY2spIHtcbiAgcmV0dXJuIG9sWG1sLnB1c2hQYXJzZUFuZFBvcCh7fSwgRVhURU5TSU9OX1BBUlNFUlNfLCBub2RlLCBvYmplY3RTdGFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRTZXF1ZW5jZV8obm9kZSwgb2JqZWN0U3RhY2spIHtcbiAgcmV0dXJuIG9sWG1sLnB1c2hQYXJzZUFuZFBvcCh7fSwgU0VRVUVOQ0VfUEFSU0VSU18sIG5vZGUsIG9iamVjdFN0YWNrKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZTsiLCJpbXBvcnQgeyBpbmNsdWRlcyBhcyBvbEFycmF5SW5jbHVkZXMgfSBmcm9tICdvbC9hcnJheS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gcHVzaFVubGVzc0luY2x1ZGVkKGFyciwgb2JqKSB7XG4gIHZhciByZXQgPSBmYWxzZTtcblxuICBpZiAoIW9sQXJyYXlJbmNsdWRlcyhhcnIsIG9iaikpIHtcbiAgICBhcnIucHVzaChvYmopO1xuICAgIHJldCA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufSIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxudmFyIERhdGFTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERhdGFTb3VyY2Uob3B0aW9ucykge1xuICAgIHRoaXMuaW5SYW5nZSA9IG9wdGlvbnMuaW5SYW5nZSAhPT0gZmFsc2U7XG4gICAgdGhpcy52aXNpYmxlID0gb3B0aW9ucy52aXNpYmxlID09PSB0cnVlO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCBudWxsO1xuICAgIHRoaXMuaWRfID0gb3B0aW9ucy5pZDtcbiAgICB0aGlzLmlkZW50aWZpZXJBdHRyaWJ1dGVfID0gb3B0aW9ucy5pZGVudGlmaWVyQXR0cmlidXRlO1xuICAgIHRoaXMubWF4UmVzb2x1dGlvbl8gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICB0aGlzLm5hbWVfID0gb3B0aW9ucy5uYW1lO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERhdGFTb3VyY2UucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzO1xuICB9O1xuXG4gIF9wcm90by5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoRGF0YVNvdXJjZSwgW3tcbiAgICBrZXk6IFwiaWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlkXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaWRlbnRpZmllckF0dHJpYnV0ZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZmllckF0dHJpYnV0ZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm1heFJlc29sdXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1heFJlc29sdXRpb25fO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJtaW5SZXNvbHV0aW9uXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInF1ZXJ5YWJsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdXBwb3J0c0R5bmFtaWNJblJhbmdlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXhSZXNvbHV0aW9uICE9PSBudWxsIHx8IHRoaXMubWluUmVzb2x1dGlvbiAhPT0gbnVsbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGF0YVNvdXJjZTtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgRGF0YVNvdXJjZTsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG9sQ29sbGVjdGlvbiBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xWaWV3IGZyb20gJ29sL1ZpZXcuanMnO1xuaW1wb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH0gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5leHBvcnQgdmFyIERhdGFTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERhdGFTb3VyY2UoKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9uXyA9IG5ldyBvbENvbGxlY3Rpb24oKTtcbiAgICB0aGlzLm1hcF8gPSBudWxsO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgIGxpc3Rlbih0aGlzLmNvbGxlY3Rpb25fLCAnYWRkJywgdGhpcy5oYW5kbGVEYXRhU291cmNlc0FkZF8sIHRoaXMpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERhdGFTb3VyY2UucHJvdG90eXBlO1xuXG4gIF9wcm90by5iaW5kTWFwXyA9IGZ1bmN0aW9uIGJpbmRNYXBfKG1hcCkge1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4odmlldywgJ2NoYW5nZTpyZXNvbHV0aW9uJywgdGhpcy5oYW5kbGVWaWV3UmVzb2x1dGlvbkNoYW5nZV8sIHRoaXMpKTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuXG4gICAgaWYgKHJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgICB9XG5cbiAgICB0aGlzLnN5bmNEYXRhU291cmNlc1RvUmVzb2x1dGlvbl8ocmVzb2x1dGlvbik7XG4gIH07XG5cbiAgX3Byb3RvLnVuYmluZE1hcF8gPSBmdW5jdGlvbiB1bmJpbmRNYXBfKG1hcCkge1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVWaWV3UmVzb2x1dGlvbkNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVWaWV3UmVzb2x1dGlvbkNoYW5nZV8oZXZ0KSB7XG4gICAgdmFyIHZpZXcgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBvbFZpZXcpIHtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICAgIGlmIChyZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zeW5jRGF0YVNvdXJjZXNUb1Jlc29sdXRpb25fKHJlc29sdXRpb24pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc3luY0RhdGFTb3VyY2VzVG9SZXNvbHV0aW9uXyA9IGZ1bmN0aW9uIHN5bmNEYXRhU291cmNlc1RvUmVzb2x1dGlvbl8ocmVzb2x1dGlvbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLmNvbGxlY3Rpb25fLmZvckVhY2goZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcbiAgICAgIF90aGlzLnN5bmNEYXRhU291cmNlVG9SZXNvbHV0aW9uXyhkYXRhU291cmNlLCByZXNvbHV0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uc3luY0RhdGFTb3VyY2VUb1Jlc29sdXRpb25fID0gZnVuY3Rpb24gc3luY0RhdGFTb3VyY2VUb1Jlc29sdXRpb25fKGRhdGFTb3VyY2UsIHJlc29sdXRpb24pIHtcbiAgICBpZiAoIWRhdGFTb3VyY2Uuc3VwcG9ydHNEeW5hbWljSW5SYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gZGF0YVNvdXJjZS5tYXhSZXNvbHV0aW9uO1xuICAgIHZhciBtaW5SZXNvbHV0aW9uID0gZGF0YVNvdXJjZS5taW5SZXNvbHV0aW9uO1xuICAgIHZhciBpbk1pblJhbmdlID0gbWluUmVzb2x1dGlvbiA9PT0gbnVsbCB8fCBtaW5SZXNvbHV0aW9uID09PSB1bmRlZmluZWQgfHwgcmVzb2x1dGlvbiA+PSBtaW5SZXNvbHV0aW9uO1xuICAgIHZhciBpbk1heFJhbmdlID0gbWF4UmVzb2x1dGlvbiA9PT0gbnVsbCB8fCBtYXhSZXNvbHV0aW9uID09PSB1bmRlZmluZWQgfHwgcmVzb2x1dGlvbiA8PSBtYXhSZXNvbHV0aW9uO1xuICAgIHZhciBpblJhbmdlID0gaW5NaW5SYW5nZSAmJiBpbk1heFJhbmdlO1xuICAgIGRhdGFTb3VyY2UuaW5SYW5nZSA9IGluUmFuZ2U7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURhdGFTb3VyY2VzQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZURhdGFTb3VyY2VzQWRkXyhldmVudCkge1xuICAgIGlmIChldmVudCBpbnN0YW5jZW9mIENvbGxlY3Rpb25FdmVudCkge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBldmVudC5lbGVtZW50O1xuXG4gICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5tYXBfLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XG5cbiAgICAgICAgaWYgKHJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXNvbHV0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN5bmNEYXRhU291cmNlVG9SZXNvbHV0aW9uXyhkYXRhU291cmNlLCByZXNvbHV0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKERhdGFTb3VyY2UsIFt7XG4gICAga2V5OiBcIm1hcFwiLFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG1hcCkge1xuICAgICAgaWYgKHRoaXMubWFwXyA9PT0gbWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICB0aGlzLnVuYmluZE1hcF8odGhpcy5tYXBfKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYXBfID0gbWFwO1xuXG4gICAgICBpZiAobWFwKSB7XG4gICAgICAgIHRoaXMuYmluZE1hcF8obWFwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29sbGVjdGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29sbGVjdGlvbl87XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERhdGFTb3VyY2U7XG59KCk7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9EYXRhU291cmNlcycsIFtdKTtcbm1vZHVsZS5zZXJ2aWNlKCduZ2VvRGF0YVNvdXJjZXMnLCBEYXRhU291cmNlKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9EYXRhU291cmNlLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZURhdGFTb3VyY2VzIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9EYXRhU291cmNlcy5qcyc7XG5pbXBvcnQgeyBzZXRHZW9tZXRyeVR5cGUgYXMgbmdlb0F0dHJpYnV0ZVNldEdlb21ldHJ5VHlwZSB9IGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZS5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdFdGU0F0dHJpYnV0ZSBmcm9tICduZ2VvL2Zvcm1hdC9XRlNBdHRyaWJ1dGUuanMnO1xuaW1wb3J0IG5nZW9RdWVyeVF1ZXJlbnQgZnJvbSAnbmdlby9xdWVyeS9RdWVyZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyBDb2xsZWN0aW9uRXZlbnQgfSBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmV4cG9ydCB2YXIgRGF0YXNvdXJjZUhlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgRGF0YXNvdXJjZUhlbHBlci4kaW5qZWN0ID0gW1wiJHFcIiwgXCJuZ2VvRGF0YVNvdXJjZXNcIiwgXCJuZ2VvUXVlcmVudFwiXTtcblxuICBmdW5jdGlvbiBEYXRhc291cmNlSGVscGVyKCRxLCBuZ2VvRGF0YVNvdXJjZXMsIG5nZW9RdWVyZW50KSB7XG4gICAgdGhpcy5xXyA9ICRxO1xuICAgIHRoaXMuY29sbGVjdGlvbl8gPSBuZ2VvRGF0YVNvdXJjZXMuY29sbGVjdGlvbjtcbiAgICB0aGlzLm5nZW9RdWVyZW50XyA9IG5nZW9RdWVyZW50O1xuICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgbGlzdGVuKHRoaXMuY29sbGVjdGlvbl8sICdhZGQnLCB0aGlzLmhhbmRsZURhdGFTb3VyY2VzQWRkXywgdGhpcyk7XG4gICAgbGlzdGVuKHRoaXMuY29sbGVjdGlvbl8sICdyZW1vdmUnLCB0aGlzLmhhbmRsZURhdGFTb3VyY2VzUmVtb3ZlXywgdGhpcyk7XG4gICAgdGhpcy5jb2xsZWN0aW9uXy5mb3JFYWNoKHRoaXMucmVnaXN0ZXJEYXRhU291cmNlXy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBEYXRhc291cmNlSGVscGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIGdldERhdGFTb3VyY2UoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZV9baWRdIHx8IG51bGw7XG4gIH07XG5cbiAgX3Byb3RvLmdldERhdGFTb3VyY2VBdHRyaWJ1dGVzID0gZnVuY3Rpb24gZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXMoZGF0YVNvdXJjZSkge1xuICAgIHZhciBnZXREYXRhU291cmNlQXR0cmlidXRlc0RlZmVyID0gdGhpcy5xXy5kZWZlcigpO1xuXG4gICAgaWYgKGRhdGFTb3VyY2UuYXR0cmlidXRlcykge1xuICAgICAgZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXNEZWZlci5yZXNvbHZlKGRhdGFTb3VyY2UuYXR0cmlidXRlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjcmVhdGVkQXR0cmlidXRlcyA9IHRoaXMuY3JlYXRlRGF0YVNvdXJjZUF0dHJpYnV0ZXNGcm9tT0dDQXR0cmlidXRlc18oZGF0YVNvdXJjZSk7XG5cbiAgICAgIGlmIChjcmVhdGVkQXR0cmlidXRlcykge1xuICAgICAgICBkYXRhU291cmNlLnNldEF0dHJpYnV0ZXMoY3JlYXRlZEF0dHJpYnV0ZXMpO1xuICAgICAgICBnZXREYXRhU291cmNlQXR0cmlidXRlc0RlZmVyLnJlc29sdmUoY3JlYXRlZEF0dHJpYnV0ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5uZ2VvUXVlcmVudF8ud2ZzRGVzY3JpYmVGZWF0dXJlVHlwZShkYXRhU291cmNlKS50aGVuKGZ1bmN0aW9uIChmZWF0dXJlVHlwZV8pIHtcbiAgICAgICAgICB2YXIgb2djTGF5ZXJOYW1lID0gZGF0YVNvdXJjZS5nZXRXRlNMYXllck5hbWVzKClbMF07XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQodHlwZW9mIG9nY0xheWVyTmFtZSA9PSAnc3RyaW5nJywgJ1RoZSBkYXRhIHNvdXJjZSBzaG91bGQgaGF2ZSBvbmx5IG9uZSBvZ2NMYXllci4nKTtcbiAgICAgICAgICB2YXIgZmVhdHVyZVR5cGUgPSBmZWF0dXJlVHlwZV87XG5cbiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGZlYXR1cmVUeXBlLmVsZW1lbnQpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQubmFtZSA9PT0gb2djTGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGZlYXR1cmVUeXBlLmNvbXBsZXhUeXBlKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlLm5hbWUgPT0gZWxlbWVudC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgY29tcGxleENvbnRlbnQgPSB0eXBlLmNvbXBsZXhDb250ZW50O1xuICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBuZXcgbmdlb0Zvcm1hdFdGU0F0dHJpYnV0ZSgpLnJlYWQoY29tcGxleENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZS5zZXRBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgICAgZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXNEZWZlci5yZXNvbHZlKGF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0RGF0YVNvdXJjZUF0dHJpYnV0ZXNEZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIF9wcm90by5yZWdpc3RlckRhdGFTb3VyY2VfID0gZnVuY3Rpb24gcmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKSB7XG4gICAgdGhpcy5jYWNoZV9bZGF0YVNvdXJjZS5pZF0gPSBkYXRhU291cmNlO1xuICB9O1xuXG4gIF9wcm90by51bnJlZ2lzdGVyRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiB1bnJlZ2lzdGVyRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSkge1xuICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1tkYXRhU291cmNlLmlkXTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRGF0YVNvdXJjZXNBZGRfID0gZnVuY3Rpb24gaGFuZGxlRGF0YVNvdXJjZXNBZGRfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICBjb25zb2xlLmFzc2VydChkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJEYXRhU291cmNlXyhkYXRhU291cmNlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURhdGFTb3VyY2VzUmVtb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZURhdGFTb3VyY2VzUmVtb3ZlXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IGV2dC5lbGVtZW50O1xuICAgICAgdGhpcy51bnJlZ2lzdGVyRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5jcmVhdGVEYXRhU291cmNlQXR0cmlidXRlc0Zyb21PR0NBdHRyaWJ1dGVzXyA9IGZ1bmN0aW9uIGNyZWF0ZURhdGFTb3VyY2VBdHRyaWJ1dGVzRnJvbU9HQ0F0dHJpYnV0ZXNfKGRhdGFTb3VyY2UpIHtcbiAgICB2YXIgYXR0cmlidXRlcyA9IG51bGw7XG4gICAgdmFyIG9nY0F0dHJpYnV0ZXMgPSBkYXRhU291cmNlLm9nY0F0dHJpYnV0ZXNXRlM7XG5cbiAgICBpZiAob2djQXR0cmlidXRlcykge1xuICAgICAgYXR0cmlidXRlcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBuYW1lIGluIG9nY0F0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIG9nY0F0dHJpYnV0ZSA9IG9nY0F0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIHZhciBhbGlhcyA9IG9nY0F0dHJpYnV0ZS5hbGlhcztcbiAgICAgICAgdmFyIHJlcXVpcmVkID0gb2djQXR0cmlidXRlLm1pbk9jY3VycyAhPSAnMCc7XG4gICAgICAgIHZhciB0eXBlID0gb2djQXR0cmlidXRlLnR5cGU7XG4gICAgICAgIHZhciBhdHRyaWJ1dGUgPSB7XG4gICAgICAgICAgYWxpYXM6IGFsaWFzLFxuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFuZ2VvQXR0cmlidXRlU2V0R2VvbWV0cnlUeXBlKGF0dHJpYnV0ZSwgXCJnbWw6XCIgKyB0eXBlKSkge1xuICAgICAgICAgIGF0dHJpYnV0ZS50eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKERhdGFzb3VyY2VIZWxwZXIsIFt7XG4gICAga2V5OiBcImNvbGxlY3Rpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb25fO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEYXRhc291cmNlSGVscGVyO1xufSgpO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRGF0YVNvdXJjZXNIZWxwZXInLCBbbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlcy5uYW1lLCBuZ2VvUXVlcnlRdWVyZW50Lm5hbWVdKTtcbm1vZHVsZS5zZXJ2aWNlKCduZ2VvRGF0YVNvdXJjZXNIZWxwZXInLCBEYXRhc291cmNlSGVscGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCB7IHB1c2hVbmxlc3NJbmNsdWRlZCB9IGZyb20gJ25nZW8vYXJyYXkuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZSBmcm9tICduZ2VvL2RhdGFzb3VyY2UvRGF0YVNvdXJjZS5qcyc7XG5pbXBvcnQgbmdlb0ZpbHRlckNvbmRpdGlvbiBmcm9tICduZ2VvL2ZpbHRlci9Db25kaXRpb24uanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRBcmNHSVNHZW9KU09OIGZyb20gJ25nZW8vZm9ybWF0L0FyY0dJU0dlb0pTT04uanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlIGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZVR5cGUuanMnO1xuaW1wb3J0IG9sRm9ybWF0R01MMiBmcm9tICdvbC9mb3JtYXQvR01MMi5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHTUwzIGZyb20gJ29sL2Zvcm1hdC9HTUwzLmpzJztcbmltcG9ydCBvbEZvcm1hdFdGUyBmcm9tICdvbC9mb3JtYXQvV0ZTLmpzJztcbmltcG9ydCBvbEZvcm1hdFdNU0dldEZlYXR1cmVJbmZvIGZyb20gJ29sL2Zvcm1hdC9XTVNHZXRGZWF0dXJlSW5mby5qcyc7XG5leHBvcnQgdmFyIFNlcnZlclR5cGUgPSB7XG4gIEFSQ0dJUzogJ2FyY2dpcycsXG4gIEdFT1NFUlZFUjogJ2dlb3NlcnZlcicsXG4gIE1BUFNFUlZFUjogJ21hcHNlcnZlcicsXG4gIFFHSVNTRVJWRVI6ICdxZ2lzc2VydmVyJ1xufTtcbmV4cG9ydCB2YXIgVHlwZSA9IHtcbiAgV01TOiAnV01TJyxcbiAgV01UUzogJ1dNVFMnXG59O1xudmFyIFdGU0ZlYXR1cmVQcmVmaXggPSB7XG4gIEZFQVRVUkU6ICdmZWF0dXJlJ1xufTtcbmV4cG9ydCB2YXIgV0ZTT3V0cHV0Rm9ybWF0ID0ge1xuICBHTUwyOiAnR01MMicsXG4gIEdNTDM6ICdHTUwzJ1xufTtcbmV4cG9ydCB2YXIgV01TSW5mb0Zvcm1hdCA9IHtcbiAgR0VPSlNPTjogJ2FwcGxpY2F0aW9uL2dlb2pzb24nLFxuICBHTUw6ICdhcHBsaWNhdGlvbi92bmQub2djLmdtbCdcbn07XG5leHBvcnQgdmFyIERFRkFVTFRfR0VPTUVUUllfTkFNRSA9ICdnZW9tJztcbmV4cG9ydCB2YXIgT0dDID0gZnVuY3Rpb24gKF9uZ2VvRGF0YXNvdXJjZURhdGFTbykge1xuICBfaW5oZXJpdHNMb29zZShPR0MsIF9uZ2VvRGF0YXNvdXJjZURhdGFTbyk7XG5cbiAgZnVuY3Rpb24gT0dDKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9uZ2VvRGF0YXNvdXJjZURhdGFTby5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMuZGltZW5zaW9uc0NvbmZpZyA9IG9wdGlvbnMuZGltZW5zaW9uc0NvbmZpZyB8fCBudWxsO1xuICAgIF90aGlzLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnID0gb3B0aW9ucy5kaW1lbnNpb25zRmlsdGVyc0NvbmZpZyB8fCBudWxsO1xuICAgIF90aGlzLmZpbHRlckNvbmRpdGlvbl8gPSBvcHRpb25zLmZpbHRlckNvbmRpdGlvbiB8fCBuZ2VvRmlsdGVyQ29uZGl0aW9uLkFORDtcbiAgICBfdGhpcy5maWx0ZXJSdWxlcyA9IG9wdGlvbnMuZmlsdGVyUnVsZXMgfHwgbnVsbDtcbiAgICBfdGhpcy5maWx0cmFibGUgPSBvcHRpb25zLmZpbHRyYWJsZSB8fCBudWxsO1xuICAgIF90aGlzLmNvcHlhYmxlXyA9IG9wdGlvbnMuY29weWFibGUgPT09IHRydWU7XG4gICAgX3RoaXMuZGltZW5zaW9uc18gPSBvcHRpb25zLmRpbWVuc2lvbnMgfHwgbnVsbDtcbiAgICBfdGhpcy5nZW9tZXRyeU5hbWVfID0gREVGQVVMVF9HRU9NRVRSWV9OQU1FO1xuICAgIF90aGlzLm9nY0ltYWdlVHlwZV8gPSBvcHRpb25zLm9nY0ltYWdlVHlwZSB8fCAnaW1hZ2UvcG5nJztcbiAgICBfdGhpcy53bXNMYXllcnNfID0gb3B0aW9ucy53bXNMYXllcnMgfHwgbnVsbDtcbiAgICBfdGhpcy53ZnNMYXllcnNfID0gb3B0aW9ucy53ZnNMYXllcnMgfHwgbnVsbDtcbiAgICBfdGhpcy5vZ2NTZXJ2ZXJUeXBlXyA9IG9wdGlvbnMub2djU2VydmVyVHlwZSB8fCBTZXJ2ZXJUeXBlLk1BUFNFUlZFUjtcbiAgICBfdGhpcy5vZ2NUeXBlXyA9IG9wdGlvbnMub2djVHlwZSB8fCBUeXBlLldNUztcbiAgICBfdGhpcy5vZ2NBdHRyaWJ1dGVzXyA9IG9wdGlvbnMub2djQXR0cmlidXRlcztcbiAgICBfdGhpcy5xdWVyeUljb25Qb3NpdGlvbl8gPSBvcHRpb25zLnF1ZXJ5SWNvblBvc2l0aW9uO1xuICAgIF90aGlzLnNuYXBwYWJsZV8gPSBvcHRpb25zLnNuYXBwYWJsZSA9PT0gdHJ1ZTtcbiAgICBfdGhpcy5zbmFwcGluZ1RvRWRnZXNfID0gb3B0aW9ucy5zbmFwcGluZ1RvRWRnZXMgIT09IGZhbHNlO1xuICAgIF90aGlzLnNuYXBwaW5nVG9WZXJ0aWNlXyA9IG9wdGlvbnMuc25hcHBpbmdUb1ZlcnRpY2UgIT09IGZhbHNlO1xuICAgIF90aGlzLnNuYXBwaW5nVG9sZXJhbmNlXyA9IG9wdGlvbnMuc25hcHBpbmdUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc25hcHBpbmdUb2xlcmFuY2UgOiAxMDtcbiAgICBfdGhpcy50aW1lQXR0cmlidXRlTmFtZV8gPSBvcHRpb25zLnRpbWVBdHRyaWJ1dGVOYW1lO1xuICAgIF90aGlzLnRpbWVMb3dlclZhbHVlID0gb3B0aW9ucy50aW1lTG93ZXJWYWx1ZTtcbiAgICBfdGhpcy50aW1lUHJvcGVydHlfID0gb3B0aW9ucy50aW1lUHJvcGVydHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGltZVByb3BlcnR5IDogbnVsbDtcbiAgICBfdGhpcy50aW1lVXBwZXJWYWx1ZSA9IG9wdGlvbnMudGltZVVwcGVyVmFsdWU7XG4gICAgX3RoaXMud2ZzRmVhdHVyZU5TXyA9IG9wdGlvbnMud2ZzRmVhdHVyZU5TO1xuICAgIF90aGlzLndmc0ZlYXR1cmVQcmVmaXhfID0gb3B0aW9ucy53ZnNGZWF0dXJlUHJlZml4IHx8IFdGU0ZlYXR1cmVQcmVmaXguRkVBVFVSRTtcbiAgICBfdGhpcy53ZnNPdXRwdXRGb3JtYXRfID0gb3B0aW9ucy53ZnNPdXRwdXRGb3JtYXQgfHwgV0ZTT3V0cHV0Rm9ybWF0LkdNTDM7XG4gICAgX3RoaXMud2ZzVXJsXyA9IG9wdGlvbnMud2ZzVXJsO1xuICAgIHZhciB3bXNJbmZvRm9ybWF0O1xuXG4gICAgaWYgKG9wdGlvbnMud21zSW5mb0Zvcm1hdCkge1xuICAgICAgd21zSW5mb0Zvcm1hdCA9IG9wdGlvbnMud21zSW5mb0Zvcm1hdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKF90aGlzLm9nY1NlcnZlclR5cGVfID09PSBTZXJ2ZXJUeXBlLkFSQ0dJUykge1xuICAgICAgICB3bXNJbmZvRm9ybWF0ID0gV01TSW5mb0Zvcm1hdC5HRU9KU09OO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd21zSW5mb0Zvcm1hdCA9IFdNU0luZm9Gb3JtYXQuR01MO1xuICAgICAgfVxuICAgIH1cblxuICAgIF90aGlzLndtc0luZm9Gb3JtYXRfID0gd21zSW5mb0Zvcm1hdDtcbiAgICBfdGhpcy53bXNJc1NpbmdsZVRpbGVfID0gb3B0aW9ucy53bXNJc1NpbmdsZVRpbGUgPT09IHRydWU7XG4gICAgX3RoaXMud21zVXJsXyA9IG9wdGlvbnMud21zVXJsO1xuICAgIF90aGlzLndtdHNMYXllcl8gPSBvcHRpb25zLndtdHNMYXllcjtcbiAgICBfdGhpcy53bXRzVXJsXyA9IG9wdGlvbnMud210c1VybDtcbiAgICB2YXIgd2ZzTGF5ZXJOYW1lcyA9IFtdO1xuICAgIHZhciB3bXNMYXllck5hbWVzID0gW107XG5cbiAgICBpZiAoX3RoaXMucXVlcnlhYmxlKSB7XG4gICAgICB2YXIgd2ZzTGF5ZXJzID0gX3RoaXMud2ZzTGF5ZXJzIHx8IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHdmc0xheWVycyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3ZnNMYXllciA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgIGlmICh3ZnNMYXllci5xdWVyeWFibGUpIHtcbiAgICAgICAgICB3ZnNMYXllck5hbWVzLnB1c2god2ZzTGF5ZXIubmFtZSk7XG4gICAgICAgICAgd21zTGF5ZXJOYW1lcy5wdXNoKHdmc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB3bXNMYXllcnMgPSBfdGhpcy53bXNMYXllcnMgfHwgW107XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHdtc0xheWVycyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3bXNMYXllciA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICBpZiAod21zTGF5ZXIucXVlcnlhYmxlKSB7XG4gICAgICAgICAgcHVzaFVubGVzc0luY2x1ZGVkKHdtc0xheWVyTmFtZXMsIHdtc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHdmc0Zvcm1hdCA9IG51bGw7XG5cbiAgICBpZiAoX3RoaXMuc3VwcG9ydHNXRlMgJiYgd2ZzTGF5ZXJOYW1lcy5sZW5ndGgpIHtcbiAgICAgIHZhciBmb3JtYXQ7XG5cbiAgICAgIGlmIChfdGhpcy53ZnNPdXRwdXRGb3JtYXRfID09PSBXRlNPdXRwdXRGb3JtYXQuR01MMykge1xuICAgICAgICBmb3JtYXQgPSBuZXcgb2xGb3JtYXRHTUwzKCk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLndmc091dHB1dEZvcm1hdF8gPT09IFdGU091dHB1dEZvcm1hdC5HTUwyKSB7XG4gICAgICAgIGZvcm1hdCA9IG5ldyBvbEZvcm1hdEdNTDIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBHTUwgb3V0cHV0IHZlcnNpb24nKTtcbiAgICAgIH1cblxuICAgICAgd2ZzRm9ybWF0ID0gbmV3IG9sRm9ybWF0V0ZTKHtcbiAgICAgICAgZmVhdHVyZU5TOiBfdGhpcy53ZnNGZWF0dXJlTlMsXG4gICAgICAgIGZlYXR1cmVUeXBlOiB3ZnNMYXllck5hbWVzLFxuICAgICAgICBnbWxGb3JtYXQ6IGZvcm1hdFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3RoaXMud2ZzRm9ybWF0XyA9IHdmc0Zvcm1hdDtcbiAgICB2YXIgd21zRm9ybWF0ID0gbnVsbDtcblxuICAgIGlmIChfdGhpcy5zdXBwb3J0c1dNUyAmJiB3bXNMYXllck5hbWVzLmxlbmd0aCkge1xuICAgICAgaWYgKF90aGlzLndtc0luZm9Gb3JtYXQgPT09IFdNU0luZm9Gb3JtYXQuR01MKSB7XG4gICAgICAgIHdtc0Zvcm1hdCA9IG5ldyBvbEZvcm1hdFdNU0dldEZlYXR1cmVJbmZvKHtcbiAgICAgICAgICBsYXllcnM6IHdtc0xheWVyTmFtZXNcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLndtc0luZm9Gb3JtYXQgPT09IFdNU0luZm9Gb3JtYXQuR0VPSlNPTikge1xuICAgICAgICBpZiAoX3RoaXMub2djU2VydmVyVHlwZV8gPT09IFNlcnZlclR5cGUuQVJDR0lTKSB7XG4gICAgICAgICAgd21zRm9ybWF0ID0gbmV3IG5nZW9Gb3JtYXRBcmNHSVNHZW9KU09OKHtcbiAgICAgICAgICAgIGxheWVyczogd21zTGF5ZXJOYW1lc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3RoaXMud21zRm9ybWF0XyA9IHdtc0Zvcm1hdDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gT0dDLnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAgIF9uZ2VvRGF0YXNvdXJjZURhdGFTby5wcm90b3R5cGUuc2V0QXR0cmlidXRlcy5jYWxsKHRoaXMsIGF0dHJpYnV0ZXMpO1xuXG4gICAgdGhpcy51cGRhdGVHZW9tZXRyeU5hbWVGcm9tQXR0cmlidXRlc18oKTtcbiAgfTtcblxuICBfcHJvdG8uZ2VvbWV0cnlOYW1lID0gZnVuY3Rpb24gZ2VvbWV0cnlOYW1lKGxheWVyKSB7XG4gICAgdmFyIGdlb21ldHJ5TmFtZSA9IG51bGw7XG5cbiAgICBpZiAobGF5ZXIgJiYgdGhpcy5vZ2NBdHRyaWJ1dGVzXykge1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLm9nY0F0dHJpYnV0ZXNfW2xheWVyXTtcblxuICAgICAgZm9yICh2YXIgYXR0cmlidXRlIGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlXS5uYW1lc3BhY2UgPT0gJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sJykge1xuICAgICAgICAgIGdlb21ldHJ5TmFtZSA9IGF0dHJpYnV0ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZ2VvbWV0cnlOYW1lKSB7XG4gICAgICBnZW9tZXRyeU5hbWUgPSB0aGlzLmdlb21ldHJ5TmFtZV87XG4gICAgfVxuXG4gICAgcmV0dXJuIGdlb21ldHJ5TmFtZTtcbiAgfTtcblxuICBfcHJvdG8uY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV0ZTID0gZnVuY3Rpb24gY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV0ZTKGRhdGFTb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5hYmxlRm9yV0ZTICYmIGRhdGFTb3VyY2UuY29tYmluYWJsZUZvcldGUyAmJiB0aGlzLnN1cHBvcnRzV0ZTICYmIGRhdGFTb3VyY2Uuc3VwcG9ydHNXRlMgJiYgdGhpcy5xdWVyeWFibGUgJiYgZGF0YVNvdXJjZS5xdWVyeWFibGUgJiYgdGhpcy53ZnNVcmwgPT09IGRhdGFTb3VyY2Uud2ZzVXJsICYmIHRoaXMuaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zKGRhdGFTb3VyY2UpICYmIHRoaXMuaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zRmlsdGVycyhkYXRhU291cmNlKTtcbiAgfTtcblxuICBfcHJvdG8uY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV01TID0gZnVuY3Rpb24gY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV01TKGRhdGFTb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5hYmxlRm9yV01TICYmIGRhdGFTb3VyY2UuY29tYmluYWJsZUZvcldNUyAmJiB0aGlzLnN1cHBvcnRzV01TICYmIGRhdGFTb3VyY2Uuc3VwcG9ydHNXTVMgJiYgdGhpcy5xdWVyeWFibGUgJiYgZGF0YVNvdXJjZS5xdWVyeWFibGUgJiYgdGhpcy53bXNVcmwgPT09IGRhdGFTb3VyY2Uud21zVXJsICYmIHRoaXMuaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zKGRhdGFTb3VyY2UpO1xuICB9O1xuXG4gIF9wcm90by5pc0FueU9HQ0xheWVySW5SYW5nZSA9IGZ1bmN0aW9uIGlzQW55T0dDTGF5ZXJJblJhbmdlKHJlcywgcXVlcnlhYmxlT25seSkge1xuICAgIGlmIChxdWVyeWFibGVPbmx5ID09PSB2b2lkIDApIHtcbiAgICAgIHF1ZXJ5YWJsZU9ubHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISF0aGlzLmdldEluUmFuZ2VXRlNMYXllck5hbWVzKHJlcywgcXVlcnlhYmxlT25seSkubGVuZ3RoO1xuICB9O1xuXG4gIF9wcm90by5nZXRXTVNMYXllck5hbWVzID0gZnVuY3Rpb24gZ2V0V01TTGF5ZXJOYW1lcyhxdWVyeWFibGVPbmx5KSB7XG4gICAgaWYgKHF1ZXJ5YWJsZU9ubHkgPT09IHZvaWQgMCkge1xuICAgICAgcXVlcnlhYmxlT25seSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBsYXllck5hbWVzID0gW107XG5cbiAgICBpZiAodGhpcy53bXNMYXllcnMpIHtcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud21zTGF5ZXJzKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIHdtc0xheWVyID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICAgIGlmICghcXVlcnlhYmxlT25seSB8fCB3bXNMYXllci5xdWVyeWFibGUgJiYgd21zTGF5ZXIuZ2V0RGF0YSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBsYXllck5hbWVzLnB1c2god21zTGF5ZXIubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGF5ZXJOYW1lcztcbiAgfTtcblxuICBfcHJvdG8uZ2V0SW5SYW5nZVdGU0xheWVyTmFtZXMgPSBmdW5jdGlvbiBnZXRJblJhbmdlV0ZTTGF5ZXJOYW1lcyhyZXMsIHF1ZXJ5YWJsZU9ubHkpIHtcbiAgICBpZiAocXVlcnlhYmxlT25seSA9PT0gdm9pZCAwKSB7XG4gICAgICBxdWVyeWFibGVPbmx5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxheWVyTmFtZXMgPSBbXTtcblxuICAgIGlmICh0aGlzLndmc0xheWVycykge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy53ZnNMYXllcnMpLCBfc3RlcDQ7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNCgpKS5kb25lOykge1xuICAgICAgICB2YXIgd2ZzTGF5ZXIgPSBfc3RlcDQudmFsdWU7XG4gICAgICAgIHZhciBtYXhSZXMgPSB3ZnNMYXllci5tYXhSZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluUmVzID0gd2ZzTGF5ZXIubWluUmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGluTWluUmFuZ2UgPSBtaW5SZXMgPT09IHVuZGVmaW5lZCB8fCByZXMgPj0gbWluUmVzO1xuICAgICAgICB2YXIgaW5NYXhSYW5nZSA9IG1heFJlcyA9PT0gdW5kZWZpbmVkIHx8IHJlcyA8PSBtYXhSZXM7XG4gICAgICAgIHZhciBpblJhbmdlID0gaW5NaW5SYW5nZSAmJiBpbk1heFJhbmdlO1xuXG4gICAgICAgIGlmIChpblJhbmdlICYmICghcXVlcnlhYmxlT25seSB8fCB3ZnNMYXllci5xdWVyeWFibGUgJiYgd2ZzTGF5ZXIuZ2V0RGF0YSAhPT0gZmFsc2UpKSB7XG4gICAgICAgICAgbGF5ZXJOYW1lcy5wdXNoKHdmc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxheWVyTmFtZXM7XG4gIH07XG5cbiAgX3Byb3RvLmdldFdGU0xheWVyTmFtZXMgPSBmdW5jdGlvbiBnZXRXRlNMYXllck5hbWVzKHF1ZXJ5YWJsZU9ubHkpIHtcbiAgICBpZiAocXVlcnlhYmxlT25seSA9PT0gdm9pZCAwKSB7XG4gICAgICBxdWVyeWFibGVPbmx5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxheWVyTmFtZXMgPSBbXTtcblxuICAgIGlmICh0aGlzLndmc0xheWVycykge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy53ZnNMYXllcnMpLCBfc3RlcDU7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNSgpKS5kb25lOykge1xuICAgICAgICB2YXIgd2ZzTGF5ZXIgPSBfc3RlcDUudmFsdWU7XG5cbiAgICAgICAgaWYgKCFxdWVyeWFibGVPbmx5IHx8IHdmc0xheWVyLnF1ZXJ5YWJsZSAmJiB3ZnNMYXllci5nZXREYXRhICE9PSBmYWxzZSkge1xuICAgICAgICAgIGxheWVyTmFtZXMucHVzaCh3ZnNMYXllci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsYXllck5hbWVzO1xuICB9O1xuXG4gIF9wcm90by5nZXRGaWx0cmFibGVXRlNMYXllck5hbWUgPSBmdW5jdGlvbiBnZXRGaWx0cmFibGVXRlNMYXllck5hbWUoKSB7XG4gICAgaWYgKCF0aGlzLmZpbHRyYWJsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZpbHRyYWJsZScpO1xuICAgIH1cblxuICAgIHZhciBsYXllck5hbWVzID0gdGhpcy5nZXRXRlNMYXllck5hbWVzKHRydWUpO1xuICAgIHJldHVybiBsYXllck5hbWVzWzBdO1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVHZW9tZXRyeU5hbWVGcm9tQXR0cmlidXRlc18gPSBmdW5jdGlvbiB1cGRhdGVHZW9tZXRyeU5hbWVGcm9tQXR0cmlidXRlc18oKSB7XG4gICAgaWYgKHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5hdHRyaWJ1dGVzKSwgX3N0ZXA2OyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9zdGVwNi52YWx1ZTtcblxuICAgICAgICBpZiAoYXR0cmlidXRlLnR5cGUgPT09IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkdFT01FVFJZKSB7XG4gICAgICAgICAgdGhpcy5nZW9tZXRyeU5hbWVfID0gYXR0cmlidXRlLm5hbWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhdmVUaGVTYW1lQWN0aXZlRGltZW5zaW9ucyA9IGZ1bmN0aW9uIGhhdmVUaGVTYW1lQWN0aXZlRGltZW5zaW9ucyhkYXRhU291cmNlKSB7XG4gICAgdmFyIHNoYXJlID0gdHJ1ZTtcbiAgICB2YXIgbXlBY3RpdmUgPSB0aGlzLmFjdGl2ZURpbWVuc2lvbnM7XG4gICAgdmFyIGl0c0FjdGl2ZSA9IGRhdGFTb3VyY2UuYWN0aXZlRGltZW5zaW9ucztcblxuICAgIGZvciAodmFyIGtleSBpbiBteUFjdGl2ZSkge1xuICAgICAgaWYgKG15QWN0aXZlW2tleV0gIT09IGl0c0FjdGl2ZVtrZXldKSB7XG4gICAgICAgIHNoYXJlID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzaGFyZSkge1xuICAgICAgZm9yICh2YXIgX2tleSBpbiBpdHNBY3RpdmUpIHtcbiAgICAgICAgaWYgKGl0c0FjdGl2ZVtfa2V5XSAhPT0gbXlBY3RpdmVbX2tleV0pIHtcbiAgICAgICAgICBzaGFyZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYXJlO1xuICB9O1xuXG4gIF9wcm90by5oYXZlVGhlU2FtZUFjdGl2ZURpbWVuc2lvbnNGaWx0ZXJzID0gZnVuY3Rpb24gaGF2ZVRoZVNhbWVBY3RpdmVEaW1lbnNpb25zRmlsdGVycyhkYXRhU291cmNlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgbXlDb25maWcgPSB0aGlzLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnIHx8IHt9O1xuICAgIHZhciBpdHNDb25maWcgPSBkYXRhU291cmNlLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnIHx8IHt9O1xuXG4gICAgdmFyIGVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhrZXkpIHtcbiAgICAgIHZhciBteUtleUNvbmZpZyA9IG15Q29uZmlnW2tleV07XG4gICAgICB2YXIgaXRzS2V5Q29uZmlnID0gaXRzQ29uZmlnW2tleV07XG5cbiAgICAgIGlmIChteUtleUNvbmZpZyA9PT0gdW5kZWZpbmVkIHx8IGl0c0tleUNvbmZpZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG15S2V5Q29uZmlnLmZpZWxkICE9IGl0c0tleUNvbmZpZy5maWVsZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBteVZhbHVlID0gbXlLZXlDb25maWcudmFsdWUgIT09IG51bGwgPyBteUtleUNvbmZpZy52YWx1ZSA6IF90aGlzMi5kaW1lbnNpb25zW2tleV07XG4gICAgICB2YXIgaXRzVmFsdWUgPSBpdHNLZXlDb25maWcudmFsdWUgIT09IG51bGwgPyBpdHNLZXlDb25maWcudmFsdWUgOiBkYXRhU291cmNlLmRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgaWYgKG15VmFsdWUgIT0gaXRzVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpIHtcbiAgICAgIGlmICghZXF1YWxzKGtleSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9rZXkyIGluIGRhdGFTb3VyY2UuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcpIHtcbiAgICAgIGlmICghZXF1YWxzKF9rZXkyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgX3Byb3RvLmdldENvbW1vbk9HQ0F0dHJpYnV0ZXNfID0gZnVuY3Rpb24gZ2V0Q29tbW9uT0dDQXR0cmlidXRlc18obGF5ZXJOYW1lcykge1xuICAgIHZhciBhbGxMYXllcnNBdHRyaWJ1dGVzID0gdGhpcy5vZ2NBdHRyaWJ1dGVzXztcblxuICAgIGlmICghYWxsTGF5ZXJzQXR0cmlidXRlcyB8fCAhbGF5ZXJOYW1lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBsYXllcnNBdHRyaWJ1dGVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllck5hbWVzKSwgX3N0ZXA3OyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcoKSkuZG9uZTspIHtcbiAgICAgIHZhciBsYXllck5hbWUgPSBfc3RlcDcudmFsdWU7XG4gICAgICB2YXIgX2xheWVyQXR0cmlidXRlcyA9IGFsbExheWVyc0F0dHJpYnV0ZXNbbGF5ZXJOYW1lXTtcblxuICAgICAgaWYgKF9sYXllckF0dHJpYnV0ZXMpIHtcbiAgICAgICAgbGF5ZXJzQXR0cmlidXRlcy5wdXNoKF9sYXllckF0dHJpYnV0ZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghbGF5ZXJzQXR0cmlidXRlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBhdHRyaWJ1dGVzID0ge307XG4gICAgdmFyIGZpcnN0TGF5ZXJBdHRyaWJ1dGVzID0gbGF5ZXJzQXR0cmlidXRlcy5zaGlmdCgpO1xuXG4gICAgZm9yICh2YXIgZmlyc3RMYXllckF0dHJpYnV0ZU5hbWUgaW4gZmlyc3RMYXllckF0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBmaXJzdExheWVyQXR0cmlidXRlID0gZmlyc3RMYXllckF0dHJpYnV0ZXNbZmlyc3RMYXllckF0dHJpYnV0ZU5hbWVdO1xuICAgICAgdmFyIHNob3VsZFB1c2hBdHRyaWJ1dGUgPSB0cnVlO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllcnNBdHRyaWJ1dGVzKSwgX3N0ZXA4OyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGxheWVyQXR0cmlidXRlcyA9IF9zdGVwOC52YWx1ZTtcblxuICAgICAgICBpZiAoIWxheWVyQXR0cmlidXRlc1tmaXJzdExheWVyQXR0cmlidXRlTmFtZV0pIHtcbiAgICAgICAgICBzaG91bGRQdXNoQXR0cmlidXRlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNob3VsZFB1c2hBdHRyaWJ1dGUpIHtcbiAgICAgICAgYXR0cmlidXRlc1tmaXJzdExheWVyQXR0cmlidXRlTmFtZV0gPSBmaXJzdExheWVyQXR0cmlidXRlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhPR0MsIFt7XG4gICAga2V5OiBcImRpbWVuc2lvbnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbnNfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmaWx0ZXJDb25kaXRpb25cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlckNvbmRpdGlvbl87XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChmaWx0ZXJDb25kaXRpb24pIHtcbiAgICAgIHRoaXMuZmlsdGVyQ29uZGl0aW9uXyA9IGZpbHRlckNvbmRpdGlvbjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGltZVJhbmdlVmFsdWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciByYW5nZSA9IG51bGw7XG4gICAgICB2YXIgbG93ZXIgPSB0aGlzLnRpbWVMb3dlclZhbHVlO1xuICAgICAgdmFyIHVwcGVyID0gdGhpcy50aW1lVXBwZXJWYWx1ZTtcblxuICAgICAgaWYgKGxvd2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmFuZ2UgPSB7XG4gICAgICAgICAgc3RhcnQ6IGxvd2VyXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHVwcGVyICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJhbmdlLmVuZCA9IHVwcGVyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByYW5nZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHJhbmdlKSB7XG4gICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgdGhpcy50aW1lVXBwZXJWYWx1ZSA9IHJhbmdlLmVuZDtcbiAgICAgICAgdGhpcy50aW1lTG93ZXJWYWx1ZSA9IHJhbmdlLnN0YXJ0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aW1lVXBwZXJWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50aW1lTG93ZXJWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29weWFibGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvcHlhYmxlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib2djSW1hZ2VUeXBlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5vZ2NJbWFnZVR5cGVfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXNMYXllcnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc0xheWVyc187XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndmc0xheWVyc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud2ZzTGF5ZXJzXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib2djU2VydmVyVHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub2djU2VydmVyVHlwZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9nY1R5cGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9nY1R5cGVfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJxdWVyeUljb25Qb3NpdGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucXVlcnlJY29uUG9zaXRpb25fO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzbmFwcGFibGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNuYXBwYWJsZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNuYXBwaW5nVG9FZGdlc1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc25hcHBpbmdUb0VkZ2VzXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic25hcHBpbmdUb1ZlcnRpY2VcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNuYXBwaW5nVG9WZXJ0aWNlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic25hcHBpbmdUb2xlcmFuY2VcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNuYXBwaW5nVG9sZXJhbmNlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGltZUF0dHJpYnV0ZU5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbWVBdHRyaWJ1dGVOYW1lXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGltZVByb3BlcnR5XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy50aW1lUHJvcGVydHlfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3ZnNGZWF0dXJlTlNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndmc0ZlYXR1cmVOU187XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndmc0ZlYXR1cmVQcmVmaXhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndmc0ZlYXR1cmVQcmVmaXhfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3ZnNPdXRwdXRGb3JtYXRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndmc091dHB1dEZvcm1hdF87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndmc1VybFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud2ZzVXJsXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid21zSW5mb0Zvcm1hdFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud21zSW5mb0Zvcm1hdF87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndtc0lzU2luZ2xlVGlsZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMud21zSXNTaW5nbGVUaWxlXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid21zVXJsXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53bXNVcmxfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXRzTGF5ZXJcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNMYXllcl87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndtdHNVcmxcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNVcmxfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhY3RpdmVEaW1lbnNpb25zXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgYWN0aXZlID0ge307XG4gICAgICB2YXIgZGltZW5zaW9ucyA9IHRoaXMuZGltZW5zaW9uc18gfHwge307XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5kaW1lbnNpb25zQ29uZmlnIHx8IHt9O1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29uZmlnKSB7XG4gICAgICAgIHZhciBjb25maWdWYWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgIGlmIChjb25maWdWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGRpbWVuc2lvbnNba2V5XTtcblxuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhY3RpdmVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY3RpdmVba2V5XSA9IGNvbmZpZ1ZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY3RpdmU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbWJpbmFibGVGb3JXRlNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlclJ1bGVzID09PSBudWxsICYmIHRoaXMudGltZVJhbmdlVmFsdWUgPT09IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbWJpbmFibGVGb3JXTVNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlclJ1bGVzID09PSBudWxsICYmIHRoaXMudGltZVJhbmdlVmFsdWUgPT09IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9nY0F0dHJpYnV0ZXNXRlNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciB3ZnNMYXllck5hbWVzID0gW107XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud2ZzTGF5ZXJzXyksIF9zdGVwOTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5KCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciB3ZnNMYXllciA9IF9zdGVwOS52YWx1ZTtcblxuICAgICAgICBpZiAod2ZzTGF5ZXIucXVlcnlhYmxlKSB7XG4gICAgICAgICAgd2ZzTGF5ZXJOYW1lcy5wdXNoKHdmc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmdldENvbW1vbk9HQ0F0dHJpYnV0ZXNfKHdmc0xheWVyTmFtZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvZ2NBdHRyaWJ1dGVzV01TXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgd21zTGF5ZXJOYW1lcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy53bXNMYXllcnNfKSwgX3N0ZXAxMDsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIHdtc0xheWVyID0gX3N0ZXAxMC52YWx1ZTtcblxuICAgICAgICBpZiAod21zTGF5ZXIucXVlcnlhYmxlKSB7XG4gICAgICAgICAgd21zTGF5ZXJOYW1lcy5wdXNoKHdtc0xheWVyLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmdldENvbW1vbk9HQ0F0dHJpYnV0ZXNfKHdtc0xheWVyTmFtZXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJxdWVyeWFibGVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBxdWVyeWFibGUgPSBmYWxzZTtcblxuICAgICAgaWYgKHRoaXMuc3VwcG9ydHNXRlMgJiYgdGhpcy53ZnNMYXllcnMpIHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMud2ZzTGF5ZXJzKSwgX3N0ZXAxMTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgd2ZzTGF5ZXIgPSBfc3RlcDExLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKHdmc0xheWVyLnF1ZXJ5YWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcXVlcnlhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zdXBwb3J0c1dNUyAmJiB0aGlzLndtc0xheWVycyAmJiB0aGlzLndtc0xheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHF1ZXJ5YWJsZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBxdWVyeWFibGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInN1cHBvcnRzV0ZTXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZnNVcmwgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3VwcG9ydHNBdHRyaWJ1dGVzXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzICE9PSBudWxsIHx8IHRoaXMuc3VwcG9ydHNXRlMgJiYgdGhpcy53ZnNMYXllcnMgIT09IG51bGwgJiYgdGhpcy53ZnNMYXllcnMubGVuZ3RoID09PSAxICYmIHRoaXMud2ZzTGF5ZXJzWzBdLnF1ZXJ5YWJsZSA9PT0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3VwcG9ydHNXTVNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc1VybCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdXBwb3J0c1dNVFNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtdHNVcmwgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid2ZzRm9ybWF0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZnNGb3JtYXRfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3bXNGb3JtYXRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLndtc0Zvcm1hdF87XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE9HQztcbn0obmdlb0RhdGFzb3VyY2VEYXRhU291cmNlKTtcbmV4cG9ydCBmdW5jdGlvbiBndWVzc1NlcnZpY2VUeXBlQnlVcmwodXJsKSB7XG4gIHZhciB0eXBlO1xuXG4gIGlmICgvKHdtdHMpL2kudGVzdCh1cmwpKSB7XG4gICAgdHlwZSA9IFR5cGUuV01UUztcbiAgfSBlbHNlIHtcbiAgICB0eXBlID0gVHlwZS5XTVM7XG4gIH1cblxuICByZXR1cm4gdHlwZTtcbn1cbmV4cG9ydCB2YXIgVGltZVByb3BlcnR5V2lkZ2V0RW51bSA9IHtcbiAgU0xJREVSOiAnc2xpZGVyJyxcbiAgREFURVBJQ0tFUjogJ2RhdGVwaWNrZXInXG59O1xuZXhwb3J0IHZhciBUaW1lUHJvcGVydHlNb2RlRW51bSA9IHtcbiAgUkFOR0U6ICdyYW5nZScsXG4gIFZBTFVFOiAndmFsdWUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJ1xufTtcbmV4cG9ydCB2YXIgVGltZVByb3BlcnR5UmVzb2x1dGlvbkVudW0gPSB7XG4gIERBWTogJ2RheScsXG4gIE1PTlRIOiAnbW9udGgnLFxuICBZRUFSOiAneWVhcicsXG4gIFNFQ09ORDogJ3NlY29uZCdcbn07XG5leHBvcnQgZGVmYXVsdCBPR0M7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlcyBmcm9tICduZ2VvL2RhdGFzb3VyY2UvRGF0YVNvdXJjZXMuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlSGVscGVyIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9IZWxwZXIuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ25nZW9EYXRhc291cmNlTW9kdWxlJywgW25nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMubmFtZSwgbmdlb0RhdGFzb3VyY2VIZWxwZXIubmFtZV0pOyIsIkRvd25sb2FkQ3N2U2VydmljZS4kaW5qZWN0ID0gW1wiZ2V0dGV4dENhdGFsb2dcIiwgXCJuZ2VvRG93bmxvYWRcIiwgXCJuZ2VvQ3N2RW5jb2RpbmdcIiwgXCJuZ2VvQ3N2RXh0ZW5zaW9uXCIsIFwibmdlb0NzdkluY2x1ZGVIZWFkZXJcIiwgXCJuZ2VvQ3N2UXVvdGVcIiwgXCJuZ2VvQ3N2U2VwYXJhdG9yXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0Rvd25sb2FkU2VydmljZSBmcm9tICduZ2VvL2Rvd25sb2FkL3NlcnZpY2UuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIERvd25sb2FkQ3N2U2VydmljZShnZXR0ZXh0Q2F0YWxvZywgbmdlb0Rvd25sb2FkLCBuZ2VvQ3N2RW5jb2RpbmcsIG5nZW9Dc3ZFeHRlbnNpb24sIG5nZW9Dc3ZJbmNsdWRlSGVhZGVyLCBuZ2VvQ3N2UXVvdGUsIG5nZW9Dc3ZTZXBhcmF0b3IpIHtcbiAgdGhpcy5nZXR0ZXh0Q2F0YWxvZ18gPSBnZXR0ZXh0Q2F0YWxvZztcbiAgdGhpcy5lbmNvZGluZ18gPSBuZ2VvQ3N2RW5jb2Rpbmc7XG4gIHRoaXMuZXh0ZW5zaW9uXyA9IG5nZW9Dc3ZFeHRlbnNpb247XG4gIHRoaXMuaW5jbHVkZUhlYWRlcl8gPSBuZ2VvQ3N2SW5jbHVkZUhlYWRlcjtcbiAgdGhpcy5xdW90ZV8gPSBuZ2VvQ3N2UXVvdGU7XG4gIHRoaXMuc2VwYXJhdG9yXyA9IG5nZW9Dc3ZTZXBhcmF0b3I7XG4gIHRoaXMuZG93bmxvYWRfID0gbmdlb0Rvd25sb2FkO1xufVxuXG5Eb3dubG9hZENzdlNlcnZpY2UucHJvdG90eXBlLmdlbmVyYXRlQ3N2ID0gZnVuY3Rpb24gKGRhdGEsIGNvbHVtbkRlZnMpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBpZiAoZGF0YS5sZW5ndGggPT0gMCB8fCBjb2x1bW5EZWZzLmxlbmd0aCA9PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgdmFyIHRyYW5zbGF0ZWRDb2x1bW5IZWFkZXJzID0gY29sdW1uRGVmcy5tYXAoZnVuY3Rpb24gKGNvbHVtbkhlYWRlcikge1xuICAgIHJldHVybiBfdGhpcy5nZXR0ZXh0Q2F0YWxvZ18uZ2V0U3RyaW5nKGNvbHVtbkhlYWRlci5uYW1lKTtcbiAgfSk7XG4gIHZhciBoZWFkZXIgPSB0aGlzLmdldFJvd18odHJhbnNsYXRlZENvbHVtbkhlYWRlcnMpO1xuICB2YXIgZGF0YVJvd3MgPSBkYXRhLm1hcChmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgdmFyIHJvd1ZhbHVlcyA9IGNvbHVtbkRlZnMubWFwKGZ1bmN0aW9uIChjb2x1bW5IZWFkZXIpIHtcbiAgICAgIHJldHVybiB2YWx1ZXNbY29sdW1uSGVhZGVyLm5hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcy5nZXRSb3dfKHJvd1ZhbHVlcyk7XG4gIH0pO1xuICByZXR1cm4gdGhpcy5pbmNsdWRlSGVhZGVyXyA/IGhlYWRlciArIGRhdGFSb3dzLmpvaW4oJycpIDogZGF0YVJvd3Muam9pbignJyk7XG59O1xuXG5Eb3dubG9hZENzdlNlcnZpY2UucHJvdG90eXBlLmdldFJvd18gPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIHZhciBtYXRjaEFsbFF1b3Rlc1JlZ2V4ID0gbmV3IFJlZ0V4cCh0aGlzLnF1b3RlXywgJ2cnKTtcbiAgdmFyIGRvdWJsZVF1b3RlID0gdGhpcy5xdW90ZV8gKyB0aGlzLnF1b3RlXztcbiAgdmFyIHJvd1ZhbHVlcyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHZhbHVlID0gXCJcIiArIHZhbHVlO1xuICAgICAgcmV0dXJuIFwiXCIgKyBfdGhpczIucXVvdGVfICsgdmFsdWUucmVwbGFjZShtYXRjaEFsbFF1b3Rlc1JlZ2V4LCBkb3VibGVRdW90ZSkgKyBfdGhpczIucXVvdGVfO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJvd1ZhbHVlcy5qb2luKHRoaXMuc2VwYXJhdG9yXykgKyBcIlxcblwiO1xufTtcblxuRG93bmxvYWRDc3ZTZXJ2aWNlLnByb3RvdHlwZS5zdGFydERvd25sb2FkID0gZnVuY3Rpb24gKGRhdGEsIGNvbHVtbkRlZnMsIGZpbGVOYW1lKSB7XG4gIHZhciBmaWxlQ29udGVudCA9IHRoaXMuZ2VuZXJhdGVDc3YoZGF0YSwgY29sdW1uRGVmcyk7XG4gIHRoaXMuZG93bmxvYWRfKGZpbGVDb250ZW50LCBmaWxlTmFtZSwgXCJ0ZXh0L2NzdjtjaGFyc2V0PVwiICsgdGhpcy5lbmNvZGluZ18pO1xufTtcblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQ3N2RG93bmxvYWQnLCBbbmdlb0Rvd25sb2FkU2VydmljZS5uYW1lXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb0NzdkRvd25sb2FkJywgRG93bmxvYWRDc3ZTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRG93bmxvYWRDc3YgZnJvbSAnbmdlby9kb3dubG9hZC9Dc3YuanMnO1xuaW1wb3J0IG5nZW9Eb3dubG9hZFNlcnZpY2UgZnJvbSAnbmdlby9kb3dubG9hZC9zZXJ2aWNlLmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvRG93bmxvYWRNb2R1bGUnLCBbbmdlb0Rvd25sb2FkQ3N2Lm5hbWUsIG5nZW9Eb3dubG9hZFNlcnZpY2UubmFtZV0pOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgaXNTYWZhcmkgfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRG93bmxvYWQnLCBbXSk7XG5cbmZ1bmN0aW9uIGZhY3RvcnkoKSB7XG4gIGZ1bmN0aW9uIGRvd25sb2FkKGNvbnRlbnQsIGZpbGVOYW1lLCBvcHRfZmlsZVR5cGUpIHtcbiAgICB2YXIgZmlsZVR5cGUgPSBvcHRfZmlsZVR5cGUgIT09IHVuZGVmaW5lZCAmJiAhaXNTYWZhcmkoKSA/IG9wdF9maWxlVHlwZSA6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnO1xuICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7XG4gICAgICB0eXBlOiBmaWxlVHlwZVxuICAgIH0pO1xuICAgIHNhdmVBcyhibG9iLCBmaWxlTmFtZSk7XG4gIH1cblxuICByZXR1cm4gZG93bmxvYWQ7XG59XG5cbm1vZHVsZS5mYWN0b3J5KCduZ2VvRG93bmxvYWQnLCBmYWN0b3J5KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRHJhd0ZlYXR1cmVzIGZyb20gJ25nZW8vZHJhdy9mZWF0dXJlcy5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzIGZyb20gJ25nZW8vZm9ybWF0L0ZlYXR1cmVQcm9wZXJ0aWVzLmpzJztcbmltcG9ydCBuZ2VvR2VvbWV0cnlUeXBlIGZyb20gJ25nZW8vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBuZ2VvTWlzY0J0bkNvbXBvbmVudCBmcm9tICduZ2VvL21pc2MvYnRuQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGludGVyYWN0aW9uRGVjb3JhdGlvbiBhcyBuZ2VvTWlzY0RlY29yYXRlSW50ZXJhY3Rpb24gfSBmcm9tICduZ2VvL21pc2MvZGVjb3JhdGUuanMnO1xuaW1wb3J0IG5nZW9NaXNjRmVhdHVyZUhlbHBlciwgeyBBcnJvd0RpcmVjdGlvbnMsIEFycm93UG9zaXRpb25zIH0gZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmV4cG9ydCB2YXIgRHJhd0NvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIERyYXdDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIm5nZW9GZWF0dXJlSGVscGVyXCIsIFwibmdlb0ZlYXR1cmVzXCJdO1xuXG4gIGZ1bmN0aW9uIERyYXdDb250cm9sbGVyKCRzY29wZSwgZ2V0dGV4dENhdGFsb2csIG5nZW9GZWF0dXJlSGVscGVyLCBuZ2VvRmVhdHVyZXMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmZlYXR1cmVzID0gbnVsbDtcbiAgICB0aGlzLm1hcCA9IG51bGw7XG4gICAgdGhpcy5zaG93TWVhc3VyZSA9IGZhbHNlO1xuICAgIHRoaXMudWlkID0gbnVsbDtcbiAgICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICAgIGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnUG9pbnQnKTtcbiAgICBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0xpbmVTdHJpbmcnKTtcbiAgICBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ1BvbHlnb24nKTtcbiAgICBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0NpcmNsZScpO1xuICAgIGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnUmVjdGFuZ2xlJyk7XG4gICAgZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdUZXh0Jyk7XG4gICAgdGhpcy5mZWF0dXJlSGVscGVyXyA9IG5nZW9GZWF0dXJlSGVscGVyO1xuICAgIHRoaXMubmdlb0ZlYXR1cmVzXyA9IG5nZW9GZWF0dXJlcztcbiAgICB0aGlzLmludGVyYWN0aW9uc18gPSBbXTtcbiAgICB0aGlzLmRyYXdQb2ludCA9IG51bGw7XG4gICAgdGhpcy5tZWFzdXJlTGVuZ3RoID0gbnVsbDtcbiAgICB0aGlzLm1lYXN1cmVBcmVhID0gbnVsbDtcbiAgICB0aGlzLm1lYXN1cmVBemltdXQgPSBudWxsO1xuICAgIHRoaXMuZHJhd1JlY3RhbmdsZSA9IG51bGw7XG4gICAgdGhpcy5kcmF3VGV4dCA9IG51bGw7XG4gICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuYWN0aXZlO1xuICAgIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgIGlmIChuZXdWYWwgPT09IGZhbHNlKSB7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9uc18uZm9yRWFjaChmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgICBpbnRlcmFjdGlvbi5zZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBEcmF3Q29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnJlZ2lzdGVySW50ZXJhY3Rpb24gPSBmdW5jdGlvbiByZWdpc3RlckludGVyYWN0aW9uKGludGVyYWN0aW9uKSB7XG4gICAgaWYgKCF0aGlzLm1hcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgIH1cblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zXy5wdXNoKGludGVyYWN0aW9uKTtcbiAgICBpbnRlcmFjdGlvbi5zZXRBY3RpdmUoZmFsc2UpO1xuICAgIG5nZW9NaXNjRGVjb3JhdGVJbnRlcmFjdGlvbihpbnRlcmFjdGlvbik7XG4gICAgdGhpcy5tYXAuYWRkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVBY3RpdmVDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVBY3RpdmVDaGFuZ2UoZXZlbnQpIHtcbiAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuaW50ZXJhY3Rpb25zXy5zb21lKGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgcmV0dXJuIGludGVyYWN0aW9uLmdldEFjdGl2ZSgpO1xuICAgIH0sIHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEcmF3RW5kID0gZnVuY3Rpb24gaGFuZGxlRHJhd0VuZCh0eXBlLCBldnQpIHtcbiAgICB2YXIgZXZlbnQgPSBldnQuZGV0YWlsID8gZXZ0LmRldGFpbCA6IGV2dDtcbiAgICB2YXIgc2tldGNoID0gZXZlbnQuZmVhdHVyZTtcbiAgICBjb25zb2xlLmFzc2VydChza2V0Y2gpO1xuICAgIHZhciBhemltdXQgPSBza2V0Y2guZ2V0KCdhemltdXQnKTtcbiAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLmZlYXR1cmVzIHx8IHRoaXMubmdlb0ZlYXR1cmVzXztcbiAgICB2YXIgZmVhdHVyZSA9IG5ldyBvbEZlYXR1cmUoc2tldGNoLmdldEdlb21ldHJ5KCkpO1xuICAgIHZhciBwcm9wID0gbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuQ0lSQ0xFOlxuICAgICAgICBmZWF0dXJlLnNldChwcm9wLklTX0NJUkNMRSwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKGF6aW11dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZmVhdHVyZS5zZXQocHJvcC5BWklNVVQsIGF6aW11dCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLlRFWFQ6XG4gICAgICAgIGZlYXR1cmUuc2V0KHByb3AuSVNfVEVYVCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgICAgIGZlYXR1cmUuc2V0KHByb3AuQVJST1dfRElSRUNUSU9OLCBBcnJvd0RpcmVjdGlvbnMuTk9ORSk7XG4gICAgICAgIGZlYXR1cmUuc2V0KHByb3AuQVJST1dfUE9TSVRJT04sIEFycm93UG9zaXRpb25zLkZJUlNUKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5SRUNUQU5HTEU6XG4gICAgICAgIGZlYXR1cmUuc2V0KHByb3AuSVNfUkVDVEFOR0xFLCB0cnVlKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBuYW1lID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ18uZ2V0U3RyaW5nKHR5cGUpO1xuICAgIGZlYXR1cmUuc2V0KHByb3AuTkFNRSwgbmFtZSArIFwiIFwiICsgKGZlYXR1cmVzLmdldExlbmd0aCgpICsgMSkpO1xuICAgIHZhciBjb2xvciA9IHR5cGUgIT09IG5nZW9HZW9tZXRyeVR5cGUuVEVYVCA/ICcjREI0NDM2JyA6ICcjMDAwMDAwJztcbiAgICBmZWF0dXJlLnNldChwcm9wLkNPTE9SLCBjb2xvcik7XG4gICAgZmVhdHVyZS5zZXQocHJvcC5BTkdMRSwgMCk7XG4gICAgZmVhdHVyZS5zZXQocHJvcC5PUEFDSVRZLCAwLjIpO1xuICAgIGZlYXR1cmUuc2V0KHByb3AuU0hPV19NRUFTVVJFLCB0aGlzLnNob3dNZWFzdXJlID8gdHJ1ZSA6IGZhbHNlKTtcbiAgICBmZWF0dXJlLnNldChwcm9wLlNIT1dfTEFCRUwsIGZhbHNlKTtcbiAgICBmZWF0dXJlLnNldChwcm9wLlNJWkUsIDEwKTtcbiAgICBmZWF0dXJlLnNldChwcm9wLlNUUk9LRSwgMik7XG4gICAgdGhpcy5mZWF0dXJlSGVscGVyXy5zZXRTdHlsZShmZWF0dXJlKTtcbiAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICB9O1xuXG4gIHJldHVybiBEcmF3Q29udHJvbGxlcjtcbn0oKTtcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0RyYXdmZWF0dXJlQ29udHJvbGxlcicsIFtuZ2VvRHJhd0ZlYXR1cmVzLm5hbWUsIG5nZW9NaXNjQnRuQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjRmVhdHVyZUhlbHBlci5uYW1lXSk7XG5tb2R1bGUuY29udHJvbGxlcignbmdlb0RyYXdmZWF0dXJlQ29udHJvbGxlcicsIERyYXdDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRHJhd0NvbnRyb2xsZXIgZnJvbSAnbmdlby9kcmF3L0NvbnRyb2xsZXIuanMnO1xuaW1wb3J0IG5nZW9EcmF3UG9pbnQgZnJvbSAnbmdlby9kcmF3L3BvaW50LmpzJztcbmltcG9ydCBuZ2VvRHJhd1JlY3RhbmdsZSBmcm9tICduZ2VvL2RyYXcvcmVjdGFuZ2xlLmpzJztcbmltcG9ydCBuZ2VvRHJhd1RleHQgZnJvbSAnbmdlby9kcmF3L3RleHQuanMnO1xuaW1wb3J0IG5nZW9NZWFzdXJlQXJlYSBmcm9tICduZ2VvL21lYXN1cmUvYXJlYS5qcyc7XG5pbXBvcnQgbmdlb01lYXN1cmVBemltdXQgZnJvbSAnbmdlby9tZWFzdXJlL2F6aW11dC5qcyc7XG5pbXBvcnQgbmdlb01lYXN1cmVMZW5ndGggZnJvbSAnbmdlby9tZWFzdXJlL2xlbmd0aC5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9EcmF3ZmVhdHVyZScsIFtuZ2VvRHJhd0NvbnRyb2xsZXIubmFtZSwgbmdlb0RyYXdQb2ludC5uYW1lLCBuZ2VvRHJhd1JlY3RhbmdsZS5uYW1lLCBuZ2VvRHJhd1RleHQubmFtZSwgbmdlb01lYXN1cmVBcmVhLm5hbWUsIG5nZW9NZWFzdXJlQXppbXV0Lm5hbWUsIG5nZW9NZWFzdXJlTGVuZ3RoLm5hbWVdKTtcblxuZnVuY3Rpb24gZHJhd0NvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBjb250cm9sbGVyOiAnbmdlb0RyYXdmZWF0dXJlQ29udHJvbGxlciBhcyBkZkN0cmwnLFxuICAgIHNjb3BlOiB0cnVlLFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAgICAgICdhY3RpdmUnOiAnPW5nZW9EcmF3ZmVhdHVyZUFjdGl2ZScsXG4gICAgICAnZmVhdHVyZXMnOiAnPT9uZ2VvRHJhd2ZlYXR1cmVGZWF0dXJlcycsXG4gICAgICAnbWFwJzogJz1uZ2VvRHJhd2ZlYXR1cmVNYXAnLFxuICAgICAgJ3Nob3dNZWFzdXJlJzogJz0/bmdlb0RyYXdmZWF0dXJlU2hvd21lYXN1cmUnLFxuICAgICAgJ3VpZCc6ICc8P25nZW9EcmF3ZmVhdHVyZVVpZCdcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9EcmF3ZmVhdHVyZScsIGRyYXdDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG9sQ29sbGVjdGlvbiBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0ZlYXR1cmVzJywgW10pO1xubW9kdWxlLnZhbHVlKCduZ2VvRmVhdHVyZXMnLCBuZXcgb2xDb2xsZWN0aW9uKCkpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9EcmF3Q29tcG9uZW50IGZyb20gJ25nZW8vZHJhdy9jb21wb25lbnQuanMnO1xuaW1wb3J0IG5nZW9EcmF3Q29udHJvbGxlciBmcm9tICduZ2VvL2RyYXcvQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgbmdlb0RyYXdGZWF0dXJlcyBmcm9tICduZ2VvL2RyYXcvZmVhdHVyZXMuanMnO1xuaW1wb3J0IG5nZW9EcmF3UG9pbnQgZnJvbSAnbmdlby9kcmF3L3BvaW50LmpzJztcbmltcG9ydCBuZ2VvRHJhd1JlY3RhbmdsZSBmcm9tICduZ2VvL2RyYXcvcmVjdGFuZ2xlLmpzJztcbmltcG9ydCBuZ2VvRHJhd1RleHQgZnJvbSAnbmdlby9kcmF3L3RleHQuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ25nZW9EcmF3TW9kdWxlJywgW25nZW9EcmF3Q29udHJvbGxlci5uYW1lLCBuZ2VvRHJhd0NvbXBvbmVudC5uYW1lLCBuZ2VvRHJhd0ZlYXR1cmVzLm5hbWUsIG5nZW9EcmF3UG9pbnQubmFtZSwgbmdlb0RyYXdSZWN0YW5nbGUubmFtZSwgbmdlb0RyYXdUZXh0Lm5hbWVdKTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvR2VvbWV0cnlUeXBlIGZyb20gJ25nZW8vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvbkRyYXcgZnJvbSAnb2wvaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9EcmF3cG9pbnQnLCBbXSk7XG5cbmZ1bmN0aW9uIGRyYXdQb2ludENvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICdeXm5nZW9EcmF3ZmVhdHVyZScsXG4gICAgbGluazogZnVuY3Rpb24gbGluaygkc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBkcmF3RmVhdHVyZUN0cmwpIHtcbiAgICAgIGlmICghZHJhd0ZlYXR1cmVDdHJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkcmF3RmVhdHVyZUN0cmwnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRyYXdQb2ludCA9IG5ldyBvbEludGVyYWN0aW9uRHJhdyh7XG4gICAgICAgIHR5cGU6ICdQb2ludCdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZHJhd0ZlYXR1cmVDdHJsLnVpZCkge1xuICAgICAgICBkcmF3UG9pbnQuc2V0KCduZ2VvLWludGVyYWN0aW9uLWRyYXctdWlkJywgZHJhd0ZlYXR1cmVDdHJsLnVpZCArIFwiLXBvaW50XCIpO1xuICAgICAgfVxuXG4gICAgICBkcmF3RmVhdHVyZUN0cmwucmVnaXN0ZXJJbnRlcmFjdGlvbihkcmF3UG9pbnQpO1xuICAgICAgZHJhd0ZlYXR1cmVDdHJsLmRyYXdQb2ludCA9IGRyYXdQb2ludDtcbiAgICAgIGxpc3RlbihkcmF3UG9pbnQsICdkcmF3ZW5kJywgZHJhd0ZlYXR1cmVDdHJsLmhhbmRsZURyYXdFbmQuYmluZChkcmF3RmVhdHVyZUN0cmwsIG5nZW9HZW9tZXRyeVR5cGUuUE9JTlQpLCBkcmF3RmVhdHVyZUN0cmwpO1xuICAgICAgbGlzdGVuKGRyYXdQb2ludCwgJ2NoYW5nZTphY3RpdmUnLCBkcmF3RmVhdHVyZUN0cmwuaGFuZGxlQWN0aXZlQ2hhbmdlLCBkcmF3RmVhdHVyZUN0cmwpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb0RyYXdwb2ludCcsIGRyYXdQb2ludENvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0dlb21ldHJ5VHlwZSBmcm9tICduZ2VvL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25EcmF3IGZyb20gJ29sL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuaW1wb3J0IG9sR2VvbVBvbHlnb24gZnJvbSAnb2wvZ2VvbS9Qb2x5Z29uLmpzJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0RyYXdyZWN0YW5nbGUnLCBbXSk7XG5cbmZ1bmN0aW9uIGRyYXdSZWN0YW5nbGVDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl5uZ2VvRHJhd2ZlYXR1cmUnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJhd0ZlYXR1cmVDdHJsKSB7XG4gICAgICBpZiAoIWRyYXdGZWF0dXJlQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ZlYXR1cmVDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkcmF3UmVjdGFuZ2xlID0gbmV3IG9sSW50ZXJhY3Rpb25EcmF3KHtcbiAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLFxuICAgICAgICBnZW9tZXRyeUZ1bmN0aW9uOiBmdW5jdGlvbiBnZW9tZXRyeUZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBnZW9tZXRyeSkge1xuICAgICAgICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IG9sR2VvbVBvbHlnb24oW10pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBzdGFydCA9IGNvb3JkaW5hdGVzWzBdO1xuXG4gICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0YXJ0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBjb29yZGluYXRlcyB0eXBlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGVuZCA9IGNvb3JkaW5hdGVzWzFdO1xuXG4gICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGVuZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgY29vcmRpbmF0ZXMgdHlwZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKFtbc3RhcnQsIFtzdGFydFswXSwgZW5kWzFdXSwgZW5kLCBbZW5kWzBdLCBzdGFydFsxXV0sIHN0YXJ0XV0pO1xuICAgICAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICAgICAgfSxcbiAgICAgICAgbWF4UG9pbnRzOiAyXG4gICAgICB9KTtcblxuICAgICAgaWYgKGRyYXdGZWF0dXJlQ3RybC51aWQpIHtcbiAgICAgICAgZHJhd1JlY3RhbmdsZS5zZXQoJ25nZW8taW50ZXJhY3Rpb24tZHJhdy11aWQnLCBkcmF3RmVhdHVyZUN0cmwudWlkICsgXCItcmVjdGFuZ2xlXCIpO1xuICAgICAgfVxuXG4gICAgICBkcmF3RmVhdHVyZUN0cmwucmVnaXN0ZXJJbnRlcmFjdGlvbihkcmF3UmVjdGFuZ2xlKTtcbiAgICAgIGRyYXdGZWF0dXJlQ3RybC5kcmF3UmVjdGFuZ2xlID0gZHJhd1JlY3RhbmdsZTtcbiAgICAgIGxpc3RlbihkcmF3UmVjdGFuZ2xlLCAnZHJhd2VuZCcsIGRyYXdGZWF0dXJlQ3RybC5oYW5kbGVEcmF3RW5kLmJpbmQoZHJhd0ZlYXR1cmVDdHJsLCBuZ2VvR2VvbWV0cnlUeXBlLlJFQ1RBTkdMRSksIGRyYXdGZWF0dXJlQ3RybCk7XG4gICAgICBsaXN0ZW4oZHJhd1JlY3RhbmdsZSwgJ2NoYW5nZTphY3RpdmUnLCBkcmF3RmVhdHVyZUN0cmwuaGFuZGxlQWN0aXZlQ2hhbmdlLCBkcmF3RmVhdHVyZUN0cmwpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb0RyYXdyZWN0YW5nbGUnLCBkcmF3UmVjdGFuZ2xlQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvR2VvbWV0cnlUeXBlIGZyb20gJ25nZW8vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvbkRyYXcgZnJvbSAnb2wvaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9EcmF3dGV4dCcsIFtdKTtcblxuZnVuY3Rpb24gZHJhd1RleHRDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl5uZ2VvRHJhd2ZlYXR1cmUnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJhd0ZlYXR1cmVDdHJsKSB7XG4gICAgICBpZiAoIWRyYXdGZWF0dXJlQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ZlYXR1cmVDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkcmF3VGV4dCA9IG5ldyBvbEludGVyYWN0aW9uRHJhdyh7XG4gICAgICAgIHR5cGU6ICdQb2ludCdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZHJhd0ZlYXR1cmVDdHJsLnVpZCkge1xuICAgICAgICBkcmF3VGV4dC5zZXQoJ25nZW8taW50ZXJhY3Rpb24tZHJhdy11aWQnLCBkcmF3RmVhdHVyZUN0cmwudWlkICsgXCItdGV4dFwiKTtcbiAgICAgIH1cblxuICAgICAgZHJhd0ZlYXR1cmVDdHJsLnJlZ2lzdGVySW50ZXJhY3Rpb24oZHJhd1RleHQpO1xuICAgICAgZHJhd0ZlYXR1cmVDdHJsLmRyYXdUZXh0ID0gZHJhd1RleHQ7XG4gICAgICBsaXN0ZW4oZHJhd1RleHQsICdkcmF3ZW5kJywgZHJhd0ZlYXR1cmVDdHJsLmhhbmRsZURyYXdFbmQuYmluZChkcmF3RmVhdHVyZUN0cmwsIG5nZW9HZW9tZXRyeVR5cGUuVEVYVCksIGRyYXdGZWF0dXJlQ3RybCk7XG4gICAgICBsaXN0ZW4oZHJhd1RleHQsICdjaGFuZ2U6YWN0aXZlJywgZHJhd0ZlYXR1cmVDdHJsLmhhbmRsZUFjdGl2ZUNoYW5nZSwgZHJhd0ZlYXR1cmVDdHJsKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9EcmF3dGV4dCcsIGRyYXdUZXh0Q29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJuZ2VvRXZlbnRIZWxwZXJcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgbmdlb01pc2NFdmVudEhlbHBlciBmcm9tICduZ2VvL21pc2MvRXZlbnRIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjRGF0ZXRpbWVwaWNrZXJDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL2RhdGV0aW1lcGlja2VyQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IE9iamVjdEV2ZW50IH0gZnJvbSAnb2wvT2JqZWN0LmpzJztcbmltcG9ydCAnLi9lZGl0aW5nLmNzcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9BdHRyaWJ1dGVzJywgW25nZW9NaXNjRGF0ZXRpbWVwaWNrZXJDb21wb25lbnQubmFtZSwgbmdlb01pc2NFdmVudEhlbHBlci5uYW1lXSk7XG5tb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vZWRpdGluZy9hdHRyaWJ1dGVzY29tcG9uZW50JywgcmVxdWlyZSgnLi9hdHRyaWJ1dGVzY29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5tb2R1bGUudmFsdWUoJ25nZW9BdHRyaWJ1dGVzVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9ICRhdHRycy5uZ2VvQXR0cmlidXRlc1RlbXBsYXRlVXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ25nZW8vZWRpdGluZy9hdHRyaWJ1dGVzY29tcG9uZW50Jztcbn0pO1xubmdlb0F0dHJpYnV0ZXNUZW1wbGF0ZVVybC4kaW5qZWN0ID0gW1wiJGF0dHJzXCIsIFwibmdlb0F0dHJpYnV0ZXNUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gbmdlb0F0dHJpYnV0ZXNUZW1wbGF0ZVVybCgkYXR0cnMsIG5nZW9BdHRyaWJ1dGVzVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIG5nZW9BdHRyaWJ1dGVzVGVtcGxhdGVVcmwoJGF0dHJzKTtcbn1cblxudmFyIGVkaXRpbmdBdHRyaWJ1dGVDb21wb25lbnQgPSB7XG4gIGNvbnRyb2xsZXI6ICduZ2VvQXR0cmlidXRlc0NvbnRyb2xsZXIgYXMgYXR0ckN0cmwnLFxuICBiaW5kaW5nczoge1xuICAgICdhdHRyaWJ1dGVzJzogJz1uZ2VvQXR0cmlidXRlc0F0dHJpYnV0ZXMnLFxuICAgICdkaXNhYmxlZCc6ICc8bmdlb0F0dHJpYnV0ZXNEaXNhYmxlZCcsXG4gICAgJ2ZlYXR1cmUnOiAnPW5nZW9BdHRyaWJ1dGVzRmVhdHVyZSdcbiAgfSxcbiAgcmVxdWlyZToge1xuICAgICdmb3JtJzogJ14nXG4gIH0sXG4gIHRlbXBsYXRlVXJsOiBuZ2VvQXR0cmlidXRlc1RlbXBsYXRlVXJsXG59O1xubW9kdWxlLmNvbXBvbmVudCgnbmdlb0F0dHJpYnV0ZXMnLCBlZGl0aW5nQXR0cmlidXRlQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsIG5nZW9FdmVudEhlbHBlcikge1xuICB0aGlzLmF0dHJpYnV0ZXMgPSBbXTtcbiAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICB0aGlzLmZlYXR1cmUgPSBudWxsO1xuICB0aGlzLnByb3BlcnRpZXMgPSB7fTtcbiAgdGhpcy5zY29wZV8gPSAkc2NvcGU7XG4gIHRoaXMubmdlb0V2ZW50SGVscGVyXyA9IG5nZW9FdmVudEhlbHBlcjtcbiAgdGhpcy51cGRhdGluZ18gPSBmYWxzZTtcbn1cblxuQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLmZlYXR1cmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZScpO1xuICB9XG5cbiAgdGhpcy5wcm9wZXJ0aWVzID0gdGhpcy5mZWF0dXJlLmdldFByb3BlcnRpZXMoKTtcbiAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZCh0aGlzKTtcbiAgdGhpcy5uZ2VvRXZlbnRIZWxwZXJfLmFkZExpc3RlbmVyS2V5KHVpZCwgbGlzdGVuKHRoaXMuZmVhdHVyZSwgJ3Byb3BlcnR5Y2hhbmdlJywgdGhpcy5oYW5kbGVGZWF0dXJlUHJvcGVydHlDaGFuZ2VfLCB0aGlzKSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVJbnB1dENoYW5nZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIGlmICghdGhpcy5wcm9wZXJ0aWVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb3BlcnRpZXMnKTtcbiAgfVxuXG4gIGlmICghdGhpcy5mZWF0dXJlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZlYXR1cmUnKTtcbiAgfVxuXG4gIHRoaXMudXBkYXRpbmdfID0gdHJ1ZTtcbiAgdmFyIHZhbHVlID0gdGhpcy5wcm9wZXJ0aWVzW25hbWVdO1xuICB0aGlzLmZlYXR1cmUuc2V0KG5hbWUsIHZhbHVlKTtcbiAgdGhpcy51cGRhdGluZ18gPSBmYWxzZTtcbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQodGhpcyk7XG4gIHRoaXMubmdlb0V2ZW50SGVscGVyXy5jbGVhckxpc3RlbmVyS2V5KHVpZCk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlUHJvcGVydHlDaGFuZ2VfID0gZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoZXZ0IGluc3RhbmNlb2YgT2JqZWN0RXZlbnQpIHtcbiAgICBpZiAodGhpcy51cGRhdGluZ18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByb3BlcnRpZXNbZXZ0LmtleV0gPSBldnQudGFyZ2V0LmdldChldnQua2V5KTtcbiAgICB0aGlzLnNjb3BlXy4kYXBwbHkoKTtcbiAgfVxufTtcblxubW9kdWxlLmNvbnRyb2xsZXIoJ25nZW9BdHRyaWJ1dGVzQ29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxmaWVsZHNldCBuZy1kaXNhYmxlZD1cImF0dHJDdHJsLmRpc2FibGVkXCI+XFxuICA8ZGl2XFxuICAgICAgY2xhc3M9XCJmb3JtLWdyb3VwXCJcXG4gICAgICBuZy1yZXBlYXQ9XCJhdHRyaWJ1dGUgaW4gOjphdHRyQ3RybC5hdHRyaWJ1dGVzXCI+XFxuICAgIDxkaXYgbmctaWY9XCJhdHRyaWJ1dGUudHlwZSAhPT0gXFwnZ2VvbWV0cnlcXCdcIj5cXG4gICAgICA8bGFiZWxcXG4gICAgICAgICAgbmctaWY9XCI6OmF0dHJpYnV0ZS50eXBlICE9PSBcXCdib29sZWFuXFwnXCJcXG4gICAgICAgICAgY2xhc3M9XCJjb2wtZm9ybS1sYWJlbFwiPnt7IDo6YXR0cmlidXRlLm5hbWUgfCB0cmFuc2xhdGUgfX0gPHNwYW4gY2xhc3M9XCJ0ZXh0LW11dGVkXCI+e3s6OmF0dHJpYnV0ZS5yZXF1aXJlZCA/IFwiKlwiIDogXCJcIn19PC9zcGFuPlxcbiAgICAgIDwvbGFiZWw+XFxuXFxuICAgICAgPGRpdlxcbiAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXFxuICAgICAgICAgIG5nLWlmPVwiOjphdHRyaWJ1dGUucmVhZG9ubHlcIlxcbiAgICAgICAgICByZWFkb25seT5cXG4gICAgICAgIHt7OjphdHRyQ3RybC5wcm9wZXJ0aWVzW2F0dHJpYnV0ZS5uYW1lXX19XFxuICAgICAgPC9kaXY+XFxuXFxuICAgICAgPGRpdlxcbiAgICAgICAgICBuZy1pZj1cIjo6IWF0dHJpYnV0ZS5yZWFkb25seVwiXFxuICAgICAgICAgIG5nLXN3aXRjaD1cIjo6YXR0cmlidXRlLnR5cGVcIj5cXG5cXG4gICAgICAgIDxkaXZcXG4gICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cImJvb2xlYW5cIlxcbiAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jaGVja1wiPlxcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWNoZWNrLWxhYmVsXCI+XFxuICAgICAgICAgICAgPGlucHV0XFxuICAgICAgICAgICAgICAgIG5hbWU9XCJ7ezo6YXR0cmlidXRlLm5hbWV9fVwiXFxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiXFxuICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiYXR0ckN0cmwucHJvcGVydGllc1thdHRyaWJ1dGUubmFtZV1cIlxcbiAgICAgICAgICAgICAgICBuZy1jaGFuZ2U9XCJhdHRyQ3RybC5oYW5kbGVJbnB1dENoYW5nZShhdHRyaWJ1dGUubmFtZSk7XCJcXG4gICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCI+XFxuICAgICAgICAgICAgPC9pbnB1dD5cXG4gICAgICAgICAgICA8c3Bhbj4ge3sgOjphdHRyaWJ1dGUubmFtZSB8IHRyYW5zbGF0ZSB9fSA8c3BhbiBjbGFzcz1cInRleHQtbXV0ZWRcIj57ezo6YXR0cmlidXRlLnJlcXVpcmVkID8gXCIqXCIgOiBcIlwifX08L3NwYW4+PC9zcGFuPlxcbiAgICAgICAgICA8L2xhYmVsPlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8c2VsZWN0XFxuICAgICAgICAgICAgbmFtZT1cInt7OjphdHRyaWJ1dGUubmFtZX19XCJcXG4gICAgICAgICAgICBuZy1yZXF1aXJlZD1cImF0dHJpYnV0ZS5yZXF1aXJlZFwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJzZWxlY3RcIlxcbiAgICAgICAgICAgIG5nLW1vZGVsPVwiYXR0ckN0cmwucHJvcGVydGllc1thdHRyaWJ1dGUubmFtZV1cIlxcbiAgICAgICAgICAgIG5nLWNoYW5nZT1cImF0dHJDdHJsLmhhbmRsZUlucHV0Q2hhbmdlKGF0dHJpYnV0ZS5uYW1lKTtcIlxcbiAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIG5nZW8taGlnaGxpZ2h0LWludmFsaWRcIlxcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCI+XFxuICAgICAgICAgIDxvcHRpb25cXG4gICAgICAgICAgICAgIG5nLXJlcGVhdD1cImF0dHJpYnV0ZSBpbiA6OmF0dHJpYnV0ZS5jaG9pY2VzXCJcXG4gICAgICAgICAgICAgIHZhbHVlPVwie3sgOjphdHRyaWJ1dGUgfX1cIj5cXG4gICAgICAgICAgICB7eyA6OmF0dHJpYnV0ZSB8IHRyYW5zbGF0ZSB9fVxcbiAgICAgICAgICA8L29wdGlvbj5cXG4gICAgICAgIDwvc2VsZWN0PlxcblxcbiAgICAgICAgPGlucHV0XFxuICAgICAgICAgICAgbmFtZT1cInt7OjphdHRyaWJ1dGUubmFtZX19XCJcXG4gICAgICAgICAgICBuZy1yZXF1aXJlZD1cImF0dHJpYnV0ZS5yZXF1aXJlZFwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJkYXRlXCJcXG4gICAgICAgICAgICBuZy1tb2RlbD1cImF0dHJDdHJsLnByb3BlcnRpZXNbYXR0cmlidXRlLm5hbWVdXCJcXG4gICAgICAgICAgICBuZy1jaGFuZ2U9XCJhdHRyQ3RybC5oYW5kbGVJbnB1dENoYW5nZShhdHRyaWJ1dGUubmFtZSk7XCJcXG4gICAgICAgICAgICBuZ2VvLWRhdGV0aW1lcGlja2VyXFxuICAgICAgICAgICAgbmdlby1kYXRldGltZXBpY2tlci1vcHRpb25zPVwiXFwneyZxdW90O3RpbWVwaWNrZXImcXVvdDs6IGZhbHNlLCAmcXVvdDtmb3JtYXQmcXVvdDs6ICZxdW90O1xcJyArIGF0dHJpYnV0ZS5mb3JtYXQgKyBcXCcmcXVvdDssICZxdW90O2FsbG93QmxhbmsmcXVvdDs6IHRydWUsICZxdW90O3RvZGF5QnV0dG9uJnF1b3Q7OiBmYWxzZSwgJnF1b3Q7bWFzayZxdW90OzogJnF1b3Q7XFwnICsgYXR0cmlidXRlLm1hc2sgKyBcXCcmcXVvdDt9XFwnXCJcXG4gICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBuZ2VvLWhpZ2hsaWdodC1pbnZhbGlkXCJcXG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiPlxcbiAgICAgICAgPC9pbnB1dD5cXG5cXG4gICAgICAgIDxpbnB1dFxcbiAgICAgICAgICAgIG5hbWU9XCJ7ezo6YXR0cmlidXRlLm5hbWV9fVwiXFxuICAgICAgICAgICAgaWQ9XCJ0aW1lXCJcXG4gICAgICAgICAgICBuZy1yZXF1aXJlZD1cImF0dHJpYnV0ZS5yZXF1aXJlZFwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJ0aW1lXCJcXG4gICAgICAgICAgICBuZy1tb2RlbD1cImF0dHJDdHJsLnByb3BlcnRpZXNbYXR0cmlidXRlLm5hbWVdXCJcXG4gICAgICAgICAgICBuZy1jaGFuZ2U9XCJhdHRyQ3RybC5oYW5kbGVJbnB1dENoYW5nZShhdHRyaWJ1dGUubmFtZSk7XCJcXG4gICAgICAgICAgICBuZ2VvLWRhdGV0aW1lcGlja2VyXFxuICAgICAgICAgICAgbmdlby1kYXRldGltZXBpY2tlci1vcHRpb25zPVwiXFwneyZxdW90O2RhdGVwaWNrZXImcXVvdDs6IGZhbHNlLCAmcXVvdDtmb3JtYXQmcXVvdDs6ICZxdW90O1xcJyArIGF0dHJpYnV0ZS5mb3JtYXQgKyBcXCcmcXVvdDssICZxdW90O3RvZGF5QnV0dG9uJnF1b3Q7OiBmYWxzZSwgJnF1b3Q7bWFzayZxdW90OzogJnF1b3Q7XFwnICsgYXR0cmlidXRlLm1hc2sgKyBcXCcmcXVvdDssICZxdW90O2RlZmF1bHRUaW1lJnF1b3Q7OiAmcXVvdDswMDowMCZxdW90O31cXCdcIlxcbiAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIG5nZW8taGlnaGxpZ2h0LWludmFsaWRcIlxcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCI+XFxuICAgICAgICA8L2lucHV0PlxcblxcbiAgICAgICAgPGlucHV0XFxuICAgICAgICAgICAgbmFtZT1cInt7OjphdHRyaWJ1dGUubmFtZX19XCJcXG4gICAgICAgICAgICBuZy1yZXF1aXJlZD1cImF0dHJpYnV0ZS5yZXF1aXJlZFwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJkYXRldGltZVwiXFxuICAgICAgICAgICAgbmctbW9kZWw9XCJhdHRyQ3RybC5wcm9wZXJ0aWVzW2F0dHJpYnV0ZS5uYW1lXVwiXFxuICAgICAgICAgICAgbmctY2hhbmdlPVwiYXR0ckN0cmwuaGFuZGxlSW5wdXRDaGFuZ2UoYXR0cmlidXRlLm5hbWUpO1wiXFxuICAgICAgICAgICAgbmdlby1kYXRldGltZXBpY2tlclxcbiAgICAgICAgICAgIG5nZW8tZGF0ZXRpbWVwaWNrZXItb3B0aW9ucz1cIlxcJ3smcXVvdDtzY3JvbGxUaW1lJnF1b3Q7OiBmYWxzZSwgJnF1b3Q7Zm9ybWF0JnF1b3Q7OiAmcXVvdDtcXCcgKyBhdHRyaWJ1dGUuZm9ybWF0ICsgXFwnJnF1b3Q7LCAmcXVvdDthbGxvd0JsYW5rJnF1b3Q7OiB0cnVlLCAmcXVvdDt0b2RheUJ1dHRvbiZxdW90OzogZmFsc2UsICZxdW90O21hc2smcXVvdDs6ICZxdW90O1xcJyArIGF0dHJpYnV0ZS5tYXNrICsgXFwnJnF1b3Q7LCAmcXVvdDtkZWZhdWx0VGltZSZxdW90OzogJnF1b3Q7MDA6MDAmcXVvdDt9XFwnXCJcXG4gICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBuZ2VvLWhpZ2hsaWdodC1pbnZhbGlkXCJcXG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiPlxcbiAgICAgICAgPC9pbnB1dD5cXG5cXG4gICAgICAgIDxkaXZcXG4gICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cIm51bWJlclwiXFxuICAgICAgICAgICAgbmctc3dpdGNoPVwiOjphdHRyaWJ1dGUubnVtVHlwZVwiPlxcbiAgICAgICAgICA8aW5wdXRcXG4gICAgICAgICAgICAgIG5hbWU9XCJ7ezo6YXR0cmlidXRlLm5hbWV9fVwiXFxuICAgICAgICAgICAgICBuZy1yZXF1aXJlZD1cImF0dHJpYnV0ZS5yZXF1aXJlZFwiXFxuICAgICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cImludGVnZXJcIlxcbiAgICAgICAgICAgICAgbmctbW9kZWw9XCJhdHRyQ3RybC5wcm9wZXJ0aWVzW2F0dHJpYnV0ZS5uYW1lXVwiXFxuICAgICAgICAgICAgICBuZy1jaGFuZ2U9XCJhdHRyQ3RybC5oYW5kbGVJbnB1dENoYW5nZShhdHRyaWJ1dGUubmFtZSk7XCJcXG4gICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIG5nZW8taGlnaGxpZ2h0LWludmFsaWRcIlxcbiAgICAgICAgICAgICAgc3RlcD1cIjFcIlxcbiAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiPlxcbiAgICAgICAgICA8L2lucHV0PlxcbiAgICAgICAgICA8aW5wdXRcXG4gICAgICAgICAgICAgIG5hbWU9XCJ7ezo6YXR0cmlidXRlLm5hbWV9fVwiXFxuICAgICAgICAgICAgICBuZy1yZXF1aXJlZD1cImF0dHJpYnV0ZS5yZXF1aXJlZFwiXFxuICAgICAgICAgICAgICBuZy1zd2l0Y2gtZGVmYXVsdFxcbiAgICAgICAgICAgICAgbmctbW9kZWw9XCJhdHRyQ3RybC5wcm9wZXJ0aWVzW2F0dHJpYnV0ZS5uYW1lXVwiXFxuICAgICAgICAgICAgICBuZy1jaGFuZ2U9XCJhdHRyQ3RybC5oYW5kbGVJbnB1dENoYW5nZShhdHRyaWJ1dGUubmFtZSk7XCJcXG4gICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIG5nZW8taGlnaGxpZ2h0LWludmFsaWRcIlxcbiAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiPlxcbiAgICAgICAgICA8L2lucHV0PlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8aW5wdXRcXG4gICAgICAgICAgICBuYW1lPVwie3s6OmF0dHJpYnV0ZS5uYW1lfX1cIlxcbiAgICAgICAgICAgIG5nLXJlcXVpcmVkPVwiYXR0cmlidXRlLnJlcXVpcmVkXCJcXG4gICAgICAgICAgICBuZy1zd2l0Y2gtZGVmYXVsdFxcbiAgICAgICAgICAgIG5nLW1vZGVsPVwiYXR0ckN0cmwucHJvcGVydGllc1thdHRyaWJ1dGUubmFtZV1cIlxcbiAgICAgICAgICAgIG5nLWNoYW5nZT1cImF0dHJDdHJsLmhhbmRsZUlucHV0Q2hhbmdlKGF0dHJpYnV0ZS5uYW1lKTtcIlxcbiAgICAgICAgICAgIG5nLW1heGxlbmd0aD1cImF0dHJpYnV0ZS5tYXhMZW5ndGhcIlxcbiAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIG5nZW8taGlnaGxpZ2h0LWludmFsaWRcIlxcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCI+XFxuICAgICAgICA8L2lucHV0PlxcblxcbiAgICAgICAgPGRpdiBuZy1zaG93PVwiYXR0ckN0cmwuZm9ybS4kc3VibWl0dGVkIHx8IGF0dHJDdHJsLmZvcm1bYXR0cmlidXRlLm5hbWVdLiR0b3VjaGVkXCI+XFxuICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1kYW5nZXJcIlxcbiAgICAgICAgICAgICBuZy1zaG93PVwiYXR0ckN0cmwuZm9ybVthdHRyaWJ1dGUubmFtZV0uJGVycm9yLnJlcXVpcmVkXCI+XFxuICAgICAgICAgICAge3tcXCdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkXFwnIHwgdHJhbnNsYXRlfX1cXG4gICAgICAgICAgPC9wPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XFxuPC9maWVsZHNldD5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiZ2V0dGV4dENhdGFsb2dcIiwgXCIkY29tcGlsZVwiLCBcIiRmaWx0ZXJcIiwgXCIkaW5qZWN0b3JcIiwgXCIkc2NvcGVcIiwgXCIkdGltZW91dFwiLCBcIm5nZW9FdmVudEhlbHBlclwiLCBcIm5nZW9TbmFwcGluZ1RvbGVyYW5jZVwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9NaXNjRmlsdGVycyBmcm9tICduZ2VvL21pc2MvZmlsdGVycy5qcyc7XG5pbXBvcnQgbmdlb0dlb21ldHJ5VHlwZSBmcm9tICduZ2VvL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZUFyZWEgZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9NZWFzdXJlQXJlYS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZUxlbmd0aCBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmVMZW5ndGguanMnO1xuaW1wb3J0IG5nZW9NaXNjRXZlbnRIZWxwZXIgZnJvbSAnbmdlby9taXNjL0V2ZW50SGVscGVyLmpzJztcbmltcG9ydCB7IHRvTXVsdGkgfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCBvbENvbGxlY3Rpb24gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCBvbEludGVyYWN0aW9uRHJhdyBmcm9tICdvbC9pbnRlcmFjdGlvbi9EcmF3LmpzJztcbmltcG9ydCBvbFN0eWxlU3R5bGUgZnJvbSAnb2wvc3R5bGUvU3R5bGUuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQ3JlYXRlZmVhdHVyZScsIFtuZ2VvTWlzY0V2ZW50SGVscGVyLm5hbWUsIG5nZW9NaXNjRmlsdGVycy5uYW1lXSk7XG5cbmZ1bmN0aW9uIGVkaXRpbmdDcmVhdGVGZWF0dXJlQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIGNvbnRyb2xsZXI6ICduZ2VvQ3JlYXRlZmVhdHVyZUNvbnRyb2xsZXInLFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgc2NvcGU6IHtcbiAgICAgICdhY3RpdmUnOiAnPW5nZW9DcmVhdGVmZWF0dXJlQWN0aXZlJyxcbiAgICAgICdmZWF0dXJlcyc6ICc9bmdlb0NyZWF0ZWZlYXR1cmVGZWF0dXJlcycsXG4gICAgICAnZ2VvbVR5cGUnOiAnPW5nZW9DcmVhdGVmZWF0dXJlR2VvbVR5cGUnLFxuICAgICAgJ21hcCc6ICc9bmdlb0NyZWF0ZWZlYXR1cmVNYXAnXG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZGlyZWN0aXZlKCduZ2VvQ3JlYXRlZmVhdHVyZScsIGVkaXRpbmdDcmVhdGVGZWF0dXJlQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gQ29udHJvbGxlcihnZXR0ZXh0Q2F0YWxvZywgJGNvbXBpbGUsICRmaWx0ZXIsICRpbmplY3RvciwgJHNjb3BlLCAkdGltZW91dCwgbmdlb0V2ZW50SGVscGVyLCBuZ2VvU25hcHBpbmdUb2xlcmFuY2UpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB0aGlzLmZlYXR1cmVzID0gbnVsbDtcbiAgdGhpcy5nZW9tVHlwZSA9ICcnO1xuICB0aGlzLm1hcCA9IG51bGw7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMuY29tcGlsZV8gPSAkY29tcGlsZTtcbiAgdGhpcy5maWx0ZXJfID0gJGZpbHRlcjtcbiAgdGhpcy5zY29wZV8gPSAkc2NvcGU7XG4gIHRoaXMudGltZW91dF8gPSAkdGltZW91dDtcbiAgdGhpcy5uZ2VvRXZlbnRIZWxwZXJfID0gbmdlb0V2ZW50SGVscGVyO1xuICB0aGlzLmluamVjdG9yXyA9ICRpbmplY3RvcjtcbiAgdGhpcy5uZ2VvU25hcHBpbmdUb2xlcmFuY2VfID0gbmdlb1NuYXBwaW5nVG9sZXJhbmNlO1xuICB0aGlzLmludGVyYWN0aW9uXyA9IG51bGw7XG4gICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfdGhpcy5hY3RpdmU7XG4gIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICBpZiAoIV90aGlzLmludGVyYWN0aW9uXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGludGVyYWN0aW9uJyk7XG4gICAgfVxuXG4gICAgX3RoaXMuaW50ZXJhY3Rpb25fLnNldEFjdGl2ZShuZXdWYWwpO1xuICB9KTtcbn1cblxuQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5hY3RpdmUgPSB0aGlzLmFjdGl2ZSA9PT0gdHJ1ZTtcbiAgdmFyIGdldHRleHRDYXRhbG9nID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ187XG4gIHZhciBpbnRlcmFjdGlvbjtcblxuICBpZiAodGhpcy5nZW9tVHlwZSA9PT0gbmdlb0dlb21ldHJ5VHlwZS5QT0lOVCB8fCB0aGlzLmdlb21UeXBlID09PSBuZ2VvR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UKSB7XG4gICAgaW50ZXJhY3Rpb24gPSBuZXcgb2xJbnRlcmFjdGlvbkRyYXcoe1xuICAgICAgdHlwZTogJ1BvaW50J1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHRoaXMuZ2VvbVR5cGUgPT09IG5nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkcgfHwgdGhpcy5nZW9tVHlwZSA9PT0gbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORykge1xuICAgIHZhciBoZWxwTXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBzdGFydCBkcmF3aW5nIGxlbmd0aCcpO1xuICAgIHZhciBjb250TXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBjb250aW51ZSBkcmF3aW5nPGJyLz4nICsgJ0RvdWJsZS1jbGljayBvciBjbGljayBsYXN0IHBvaW50IHRvIGZpbmlzaCcpO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgc3R5bGU6IG5ldyBvbFN0eWxlU3R5bGUoKSxcbiAgICAgIHN0YXJ0TXNnOiB0aGlzLmNvbXBpbGVfKFwiPGRpdiB0cmFuc2xhdGU+XCIgKyBoZWxwTXNnICsgXCI8L2Rpdj5cIikodGhpcy5zY29wZV8pWzBdLFxuICAgICAgY29udGludWVNc2c6IHRoaXMuY29tcGlsZV8oXCI8ZGl2IHRyYW5zbGF0ZT5cIiArIGNvbnRNc2cgKyBcIjwvZGl2PlwiKSh0aGlzLnNjb3BlXylbMF1cbiAgICB9O1xuICAgIG9wdGlvbnMudG9sZXJhbmNlID0gdGhpcy5uZ2VvU25hcHBpbmdUb2xlcmFuY2VfO1xuXG4gICAgaWYgKHRoaXMuaW5qZWN0b3JfLmhhcygnbmdlb1NuYXBwaW5nU291cmNlJykpIHtcbiAgICAgIG9wdGlvbnMuc291cmNlID0gdGhpcy5pbmplY3Rvcl8uZ2V0KCduZ2VvU25hcHBpbmdTb3VyY2UnKTtcbiAgICB9XG5cbiAgICBpbnRlcmFjdGlvbiA9IG5ldyBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlTGVuZ3RoKHRoaXMuZmlsdGVyXygnbmdlb1VuaXRQcmVmaXgnKSwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHRoaXMuZ2VvbVR5cGUgPT09IG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTiB8fCB0aGlzLmdlb21UeXBlID09PSBuZ2VvR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT04pIHtcbiAgICB2YXIgX2hlbHBNc2cgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0NsaWNrIHRvIHN0YXJ0IGRyYXdpbmcgYXJlYScpO1xuXG4gICAgdmFyIF9jb250TXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBjb250aW51ZSBkcmF3aW5nPGJyLz4nICsgJ0RvdWJsZS1jbGljayBvciBjbGljayBzdGFydGluZyBwb2ludCB0byBmaW5pc2gnKTtcblxuICAgIGludGVyYWN0aW9uID0gbmV3IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmVBcmVhKHRoaXMuZmlsdGVyXygnbmdlb1VuaXRQcmVmaXgnKSwgZ2V0dGV4dENhdGFsb2csIHtcbiAgICAgIHN0eWxlOiBuZXcgb2xTdHlsZVN0eWxlKCksXG4gICAgICBzdGFydE1zZzogdGhpcy5jb21waWxlXyhcIjxkaXYgdHJhbnNsYXRlPlwiICsgX2hlbHBNc2cgKyBcIjwvZGl2PlwiKSh0aGlzLnNjb3BlXylbMF0sXG4gICAgICBjb250aW51ZU1zZzogdGhpcy5jb21waWxlXyhcIjxkaXYgdHJhbnNsYXRlPlwiICsgX2NvbnRNc2cgKyBcIjwvZGl2PlwiKSh0aGlzLnNjb3BlXylbMF1cbiAgICB9KTtcbiAgfVxuXG4gIGlmICghaW50ZXJhY3Rpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgaW50ZXJhY3Rpb24nKTtcbiAgfVxuXG4gIGlmICghdGhpcy5tYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gIH1cblxuICBpbnRlcmFjdGlvbi5zZXRBY3RpdmUodGhpcy5hY3RpdmUpO1xuICB0aGlzLmludGVyYWN0aW9uXyA9IGludGVyYWN0aW9uO1xuICB0aGlzLm1hcC5hZGRJbnRlcmFjdGlvbihpbnRlcmFjdGlvbik7XG4gIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQodGhpcyk7XG5cbiAgaWYgKGludGVyYWN0aW9uIGluc3RhbmNlb2Ygb2xJbnRlcmFjdGlvbkRyYXcpIHtcbiAgICB0aGlzLm5nZW9FdmVudEhlbHBlcl8uYWRkTGlzdGVuZXJLZXkodWlkLCBsaXN0ZW4oaW50ZXJhY3Rpb24sICdkcmF3ZW5kJywgdGhpcy5oYW5kbGVEcmF3RW5kXywgdGhpcykpO1xuICB9IGVsc2UgaWYgKGludGVyYWN0aW9uIGluc3RhbmNlb2Ygbmdlb0ludGVyYWN0aW9uTWVhc3VyZUxlbmd0aCB8fCBpbnRlcmFjdGlvbiBpbnN0YW5jZW9mIG5nZW9JbnRlcmFjdGlvbk1lYXN1cmVBcmVhKSB7XG4gICAgdGhpcy5uZ2VvRXZlbnRIZWxwZXJfLmFkZExpc3RlbmVyS2V5KHVpZCwgbGlzdGVuKGludGVyYWN0aW9uLCAnbWVhc3VyZWVuZCcsIHRoaXMuaGFuZGxlRHJhd0VuZF8sIHRoaXMpKTtcbiAgfVxufTtcblxuQ29udHJvbGxlci5wcm90b3R5cGUuaGFuZGxlRHJhd0VuZF8gPSBmdW5jdGlvbiAoZXZ0KSB7XG4gIHZhciBldmVudCA9IGV2dC5kZXRhaWwgPyBldnQuZGV0YWlsIDogZXZ0O1xuICB2YXIgc2tldGNoID0gZXZlbnQuZmVhdHVyZTtcbiAgY29uc29sZS5hc3NlcnQoc2tldGNoKTtcbiAgdmFyIGdlb21ldHJ5ID0gc2tldGNoLmdldEdlb21ldHJ5KCk7XG4gIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuXG4gIGlmICh0aGlzLmdlb21UeXBlLmluZGV4T2YoJ011bHRpJykgIT0gdHlwZS5pbmRleE9mKCdNdWx0aScpKSB7XG4gICAgZ2VvbWV0cnkgPSB0b011bHRpKGdlb21ldHJ5KTtcbiAgfVxuXG4gIHZhciBmZWF0dXJlID0gbmV3IG9sRmVhdHVyZShnZW9tZXRyeSk7XG5cbiAgaWYgKHRoaXMuZmVhdHVyZXMgaW5zdGFuY2VvZiBvbENvbGxlY3Rpb24pIHtcbiAgICB0aGlzLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZXMnKTtcbiAgICB9XG5cbiAgICB0aGlzLmZlYXR1cmVzLmFkZEZlYXR1cmUoZmVhdHVyZSk7XG4gIH1cbn07XG5cbkNvbnRyb2xsZXIucHJvdG90eXBlLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIHRoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgIGlmICghX3RoaXMyLm1hcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgIH1cblxuICAgIGlmICghX3RoaXMyLmludGVyYWN0aW9uXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGludGVyYWN0aW9uJyk7XG4gICAgfVxuXG4gICAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZChfdGhpczIpO1xuXG4gICAgX3RoaXMyLm5nZW9FdmVudEhlbHBlcl8uY2xlYXJMaXN0ZW5lcktleSh1aWQpO1xuXG4gICAgX3RoaXMyLmludGVyYWN0aW9uXy5zZXRBY3RpdmUoZmFsc2UpO1xuXG4gICAgX3RoaXMyLm1hcC5yZW1vdmVJbnRlcmFjdGlvbihfdGhpczIuaW50ZXJhY3Rpb25fKTtcbiAgfSwgMCk7XG59O1xuXG5tb2R1bGUuY29udHJvbGxlcignbmdlb0NyZWF0ZWZlYXR1cmVDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uRHJhd1JlZ3VsYXJQb2x5Z29uRnJvbUNsaWNrIGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vRHJhd1JlZ3VsYXJQb2x5Z29uRnJvbUNsaWNrLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQ3JlYXRlcmVndWxhcnBvbHlnb25mcm9tY2xpY2snLCBbXSk7XG5cbmZ1bmN0aW9uIGVkaXRpbmdDcmVhdGVSZWd1bGFyUG9seWdvbkZyb21DbGlja0NvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBjb250cm9sbGVyOiAnbmdlb0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrQ29udHJvbGxlcicsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgJ2FjdGl2ZSc6ICc9bmdlb0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrQWN0aXZlJyxcbiAgICAgICdhbmdsZSc6ICc8P25nZW9DcmVhdGVyZWd1bGFycG9seWdvbmZyb21jbGlja0FuZ2xlJyxcbiAgICAgICdmZWF0dXJlcyc6ICc9bmdlb0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrRmVhdHVyZXMnLFxuICAgICAgJ21hcCc6ICc9bmdlb0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrTWFwJyxcbiAgICAgICdyYWRpdXMnOiAnPG5nZW9DcmVhdGVyZWd1bGFycG9seWdvbmZyb21jbGlja1JhZGl1cycsXG4gICAgICAnc2lkZXMnOiAnPD9uZ2VvQ3JlYXRlcmVndWxhcnBvbHlnb25mcm9tY2xpY2tTaWRlcydcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9DcmVhdGVyZWd1bGFycG9seWdvbmZyb21jbGljaycsIGVkaXRpbmdDcmVhdGVSZWd1bGFyUG9seWdvbkZyb21DbGlja0NvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90aGlzLmFjdGl2ZTtcbiAgfSwgZnVuY3Rpb24gKG5ld1ZhbCkge1xuICAgIGlmICghX3RoaXMuaW50ZXJhY3Rpb25fKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgaW50ZXJhY3Rpb24nKTtcbiAgICB9XG5cbiAgICBfdGhpcy5pbnRlcmFjdGlvbl8uc2V0QWN0aXZlKG5ld1ZhbCk7XG4gIH0pO1xuICB0aGlzLmFuZ2xlID0gbnVsbDtcbiAgdGhpcy5mZWF0dXJlcyA9IG51bGw7XG4gIHRoaXMubWFwID0gbnVsbDtcbiAgdGhpcy5yYWRpdXMgPSAtMTtcbiAgdGhpcy5zaWRlcyA9IG51bGw7XG4gIHRoaXMuaW50ZXJhY3Rpb25fID0gbnVsbDtcbiAgdGhpcy5pbnRlcmFjdGlvbkxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICRzY29wZS4kb24oJyRkZXN0cm95JywgdGhpcy5oYW5kbGVEZXN0cm95Xy5iaW5kKHRoaXMpKTtcbn1cblxuQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgcmFkaXVzOiB0aGlzLnJhZGl1c1xuICB9O1xuXG4gIGlmICh0aGlzLmFuZ2xlICE9PSBudWxsKSB7XG4gICAgb3B0aW9ucy5hbmdsZSA9IHRoaXMuYW5nbGU7XG4gIH1cblxuICBpZiAodGhpcy5zaWRlcyAhPT0gbnVsbCkge1xuICAgIG9wdGlvbnMuc2lkZXMgPSB0aGlzLnNpZGVzO1xuICB9XG5cbiAgdGhpcy5pbnRlcmFjdGlvbl8gPSBuZXcgbmdlb0ludGVyYWN0aW9uRHJhd1JlZ3VsYXJQb2x5Z29uRnJvbUNsaWNrKG9wdGlvbnMpO1xuICB0aGlzLmludGVyYWN0aW9uXy5zZXRBY3RpdmUodGhpcy5hY3RpdmUpO1xuICB0aGlzLmludGVyYWN0aW9uTGlzdGVuZXJLZXlfID0gbGlzdGVuKHRoaXMuaW50ZXJhY3Rpb25fLCAnZHJhd2VuZCcsIHRoaXMuaGFuZGxlRHJhd0VuZF8sIHRoaXMpO1xuICB0aGlzLm1hcC5hZGRJbnRlcmFjdGlvbih0aGlzLmludGVyYWN0aW9uXyk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVEcmF3RW5kXyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKCF0aGlzLmZlYXR1cmVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZlYXR1cmVzJyk7XG4gIH1cblxuICB2YXIgZmVhdHVyZSA9IG5ldyBvbEZlYXR1cmUoZXZ0LmRldGFpbC5mZWF0dXJlLmdldEdlb21ldHJ5KCkpO1xuICB0aGlzLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG59O1xuXG5Db250cm9sbGVyLnByb3RvdHlwZS5oYW5kbGVEZXN0cm95XyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLm1hcCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgfVxuXG4gIGlmICghdGhpcy5pbnRlcmFjdGlvbkxpc3RlbmVyS2V5Xykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBpbnRlcmFjdGlvbkxpc3RlbmVyS2V5Jyk7XG4gIH1cblxuICBpZiAoIXRoaXMuaW50ZXJhY3Rpb25fKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGludGVyYWN0aW9uJyk7XG4gIH1cblxuICB1bmxpc3RlbkJ5S2V5KHRoaXMuaW50ZXJhY3Rpb25MaXN0ZW5lcktleV8pO1xuICB0aGlzLmludGVyYWN0aW9uXy5zZXRBY3RpdmUoZmFsc2UpO1xuICB0aGlzLm1hcC5yZW1vdmVJbnRlcmFjdGlvbih0aGlzLmludGVyYWN0aW9uXyk7XG59O1xuXG5tb2R1bGUuY29udHJvbGxlcignbmdlb0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrQ29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9FZGl0aW5nQXR0cmlidXRlc0NvbXBvbmVudCBmcm9tICduZ2VvL2VkaXRpbmcvYXR0cmlidXRlc0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgbmdlb0VkaXRpbmdDcmVhdGVmZWF0dXJlQ29tcG9uZW50IGZyb20gJ25nZW8vZWRpdGluZy9jcmVhdGVmZWF0dXJlQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvRWRpdGluZ0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrQ29tcG9uZW50IGZyb20gJ25nZW8vZWRpdGluZy9jcmVhdGVyZWd1bGFycG9seWdvbmZyb21jbGlja0NvbXBvbmVudC5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb0VkaXRpbmdNb2R1bGUnLCBbbmdlb0VkaXRpbmdBdHRyaWJ1dGVzQ29tcG9uZW50Lm5hbWUsIG5nZW9FZGl0aW5nQ3JlYXRlZmVhdHVyZUNvbXBvbmVudC5uYW1lLCBuZ2VvRWRpdGluZ0NyZWF0ZXJlZ3VsYXJwb2x5Z29uZnJvbWNsaWNrQ29tcG9uZW50Lm5hbWVdKTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCB7IHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHVubGlzdGVuQnlLZXlzKGtleXMpIHtcbiAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShrZXlzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICB2YXIga2V5ID0gX3N0ZXAudmFsdWU7XG4gICAgdW5saXN0ZW5CeUtleShrZXkpO1xuICB9XG5cbiAga2V5cy5sZW5ndGggPSAwO1xufSIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQU5EOiAnJiYnLFxuICBOT1Q6ICchJyxcbiAgT1I6ICd8fCdcbn07IiwiZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRmlsdGVyQ29uZGl0aW9uIGZyb20gJ25nZW8vZmlsdGVyL0NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgKiBhcyBuZ2VvRm9ybWF0RmlsdGVyIGZyb20gJ25nZW8vZm9ybWF0L2ZpbHRlci5qcyc7XG5pbXBvcnQgbmdlb01pc2NGZWF0dXJlSGVscGVyIGZyb20gJ25nZW8vbWlzYy9GZWF0dXJlSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY1dNU1RpbWUgZnJvbSAnbmdlby9taXNjL1dNU1RpbWUuanMnO1xuaW1wb3J0IG5nZW9SdWxlRGF0ZSBmcm9tICduZ2VvL3J1bGUvRGF0ZS5qcyc7XG5pbXBvcnQgbmdlb1J1bGVHZW9tZXRyeSBmcm9tICduZ2VvL3J1bGUvR2VvbWV0cnkuanMnO1xuaW1wb3J0IG5nZW9SdWxlUnVsZSwgeyBSdWxlT3BlcmF0b3JUeXBlLCBSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZSwgUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlIH0gZnJvbSAnbmdlby9ydWxlL1J1bGUuanMnO1xuaW1wb3J0IG5nZW9SdWxlU2VsZWN0IGZyb20gJ25nZW8vcnVsZS9TZWxlY3QuanMnO1xuaW1wb3J0IG5nZW9SdWxlVGV4dCBmcm9tICduZ2VvL3J1bGUvVGV4dC5qcyc7XG5pbXBvcnQgeyB3cml0ZUZpbHRlciB9IGZyb20gJ29sL2Zvcm1hdC9XRlMuanMnO1xuaW1wb3J0ICogYXMgb2xGb3JtYXRGaWx0ZXIgZnJvbSAnb2wvZm9ybWF0L2ZpbHRlci5qcyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5leHBvcnQgdmFyIFJ1bGVIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFJ1bGVIZWxwZXIuJGluamVjdCA9IFtcImdldHRleHRDYXRhbG9nXCIsIFwibmdlb0ZlYXR1cmVIZWxwZXJcIiwgXCJuZ2VvV01TVGltZVwiXTtcblxuICBmdW5jdGlvbiBSdWxlSGVscGVyKGdldHRleHRDYXRhbG9nLCBuZ2VvRmVhdHVyZUhlbHBlciwgbmdlb1dNU1RpbWUpIHtcbiAgICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfID0gbmdlb0ZlYXR1cmVIZWxwZXI7XG4gICAgdGhpcy5uZ2VvV01TVGltZV8gPSBuZ2VvV01TVGltZTtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBSdWxlSGVscGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlUnVsZXNGcm9tQXR0cmlidXRlcyA9IGZ1bmN0aW9uIGNyZWF0ZVJ1bGVzRnJvbUF0dHJpYnV0ZXMoYXR0cmlidXRlcywgb3B0X2lzQ3VzdG9tKSB7XG4gICAgdmFyIHJ1bGVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGF0dHJpYnV0ZXMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9zdGVwLnZhbHVlO1xuICAgICAgcnVsZXMucHVzaCh0aGlzLmNyZWF0ZVJ1bGVGcm9tQXR0cmlidXRlKGF0dHJpYnV0ZSwgb3B0X2lzQ3VzdG9tKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ1bGVzO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVSdWxlRnJvbUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIGNyZWF0ZVJ1bGVGcm9tQXR0cmlidXRlKGF0dHJpYnV0ZSwgb3B0X2lzQ3VzdG9tKSB7XG4gICAgdmFyIHJ1bGU7XG4gICAgdmFyIGlzQ3VzdG9tID0gb3B0X2lzQ3VzdG9tID09PSB0cnVlO1xuICAgIHZhciBuYW1lID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ18uZ2V0U3RyaW5nKGF0dHJpYnV0ZS5uYW1lKTtcblxuICAgIHN3aXRjaCAoYXR0cmlidXRlLnR5cGUpIHtcbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuREFURTpcbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuREFURVRJTUU6XG4gICAgICAgIGlmIChpc0N1c3RvbSkge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVEYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlLkVRVUFMUyxcbiAgICAgICAgICAgIG9wZXJhdG9yczogW1J1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5FUVVBTFMsIFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5CRUdJTlMsIFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5FTkRTXSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBhdHRyaWJ1dGUudHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVEYXRlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlLkRVUklORyxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBhdHRyaWJ1dGUudHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuR0VPTUVUUlk6XG4gICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVHZW9tZXRyeSh7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBvcGVyYXRvcjogUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUuSU5URVJTRUNUUyxcbiAgICAgICAgICBvcGVyYXRvcnM6IFtSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZS5DT05UQUlOUywgUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUuSU5URVJTRUNUUywgUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUuV0lUSElOXSxcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IGF0dHJpYnV0ZS5uYW1lLFxuICAgICAgICAgIHR5cGU6IGF0dHJpYnV0ZS50eXBlXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5OVU1CRVI6XG4gICAgICAgIGlmIChpc0N1c3RvbSkge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVSdWxlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZU9wZXJhdG9yVHlwZS5FUVVBTF9UTyxcbiAgICAgICAgICAgIG9wZXJhdG9yczogW1J1bGVPcGVyYXRvclR5cGUuRVFVQUxfVE8sIFJ1bGVPcGVyYXRvclR5cGUuR1JFQVRFUl9USEFOLCBSdWxlT3BlcmF0b3JUeXBlLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTywgUnVsZU9wZXJhdG9yVHlwZS5MRVNTRVJfVEhBTiwgUnVsZU9wZXJhdG9yVHlwZS5MRVNTRVJfVEhBTl9PUl9FUVVBTF9UTywgUnVsZU9wZXJhdG9yVHlwZS5OT1RfRVFVQUxfVE9dLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLk5VTUJFUlxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVSdWxlKHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZU9wZXJhdG9yVHlwZS5CRVRXRUVOLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLk5VTUJFUlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuU0VMRUNUOlxuICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlU2VsZWN0KHtcbiAgICAgICAgICBjaG9pY2VzOiBhdHRyaWJ1dGUuY2hvaWNlcyxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNDdXN0b20pIHtcbiAgICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlVGV4dCh7XG4gICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcGVyYXRvcjogUnVsZU9wZXJhdG9yVHlwZS5MSUtFLFxuICAgICAgICAgICAgb3BlcmF0b3JzOiBbUnVsZU9wZXJhdG9yVHlwZS5MSUtFLCBSdWxlT3BlcmF0b3JUeXBlLkVRVUFMX1RPLCBSdWxlT3BlcmF0b3JUeXBlLk5PVF9FUVVBTF9UT10sXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWU6IGF0dHJpYnV0ZS5uYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcnVsZSA9IG5ldyBuZ2VvUnVsZVRleHQoe1xuICAgICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgb3BlcmF0b3I6IFJ1bGVPcGVyYXRvclR5cGUuTElLRSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogYXR0cmlidXRlLm5hbWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBydWxlO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVSdWxlcyA9IGZ1bmN0aW9uIGNyZWF0ZVJ1bGVzKG9wdGlvbnNMaXN0KSB7XG4gICAgdmFyIHJ1bGVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvcHRpb25zTGlzdCksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IF9zdGVwMi52YWx1ZTtcbiAgICAgIHJ1bGVzLnB1c2godGhpcy5jcmVhdGVSdWxlKG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcnVsZXM7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZVJ1bGUgPSBmdW5jdGlvbiBjcmVhdGVSdWxlKG9wdGlvbnMpIHtcbiAgICB2YXIgcnVsZTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XG4gICAgICBjYXNlIG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEU6XG4gICAgICBjYXNlIG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEVUSU1FOlxuICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlRGF0ZShvcHRpb25zKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuR0VPTUVUUlk6XG4gICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVHZW9tZXRyeShvcHRpb25zKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuU0VMRUNUOlxuICAgICAgICB2YXIgc2VsZWN0T3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHNlbGVjdE9wdGlvbnMuY2hvaWNlcyk7XG4gICAgICAgIHJ1bGUgPSBuZXcgbmdlb1J1bGVTZWxlY3Qoc2VsZWN0T3B0aW9ucyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBydWxlID0gbmV3IG5nZW9SdWxlVGV4dChvcHRpb25zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ1bGU7XG4gIH07XG5cbiAgX3Byb3RvLmNsb25lUnVsZSA9IGZ1bmN0aW9uIGNsb25lUnVsZShydWxlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBpc0N1c3RvbTogcnVsZS5pc0N1c3RvbSxcbiAgICAgIG5hbWU6IHJ1bGUubmFtZSxcbiAgICAgIHByb3BlcnR5TmFtZTogcnVsZS5wcm9wZXJ0eU5hbWUsXG4gICAgICB0eXBlOiBydWxlLnR5cGVcbiAgICB9O1xuICAgIHZhciBleHByZXNzaW9uID0gcnVsZS5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICBpZiAoZXhwcmVzc2lvbiAhPT0gbnVsbCkge1xuICAgICAgb3B0aW9ucy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5sb3dlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICBvcHRpb25zLmxvd2VyQm91bmRhcnkgPSBydWxlLmxvd2VyQm91bmRhcnk7XG4gICAgfVxuXG4gICAgaWYgKHJ1bGUub3BlcmF0b3IpIHtcbiAgICAgIG9wdGlvbnMub3BlcmF0b3IgPSBydWxlLm9wZXJhdG9yO1xuICAgIH1cblxuICAgIGlmIChydWxlLm9wZXJhdG9ycykge1xuICAgICAgb3B0aW9ucy5vcGVyYXRvcnMgPSBydWxlLm9wZXJhdG9ycy5zbGljZSgwKTtcbiAgICB9XG5cbiAgICBpZiAocnVsZS51cHBlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICBvcHRpb25zLnVwcGVyQm91bmRhcnkgPSBydWxlLnVwcGVyQm91bmRhcnk7XG4gICAgfVxuXG4gICAgdmFyIGNsb25lO1xuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZURhdGUpIHtcbiAgICAgIGNsb25lID0gbmV3IG5nZW9SdWxlRGF0ZShvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZUdlb21ldHJ5KSB7XG4gICAgICBjbG9uZSA9IG5ldyBuZ2VvUnVsZUdlb21ldHJ5KG9wdGlvbnMpO1xuICAgICAgY2xvbmUuZmVhdHVyZS5zZXRQcm9wZXJ0aWVzKHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzKHJ1bGUuZmVhdHVyZSkpO1xuICAgIH0gZWxzZSBpZiAocnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlU2VsZWN0KSB7XG4gICAgICB2YXIgb3B0ID0gb3B0aW9ucztcbiAgICAgIG9wdC5jaG9pY2VzID0gcnVsZS5jaG9pY2VzLnNsaWNlKDApO1xuICAgICAgY2xvbmUgPSBuZXcgbmdlb1J1bGVTZWxlY3Qob3B0KTtcbiAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZVRleHQpIHtcbiAgICAgIHZhciBfb3B0ID0gb3B0aW9ucztcbiAgICAgIGNsb25lID0gbmV3IG5nZW9SdWxlVGV4dChfb3B0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xvbmUgPSBuZXcgbmdlb1J1bGVSdWxlKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZTtcbiAgfTtcblxuICBfcHJvdG8uZXh0ZW5kUnVsZSA9IGZ1bmN0aW9uIGV4dGVuZFJ1bGUoc291cmNlUnVsZSwgZGVzdFJ1bGUpIHtcbiAgICBpZiAoZGVzdFJ1bGUuZ2V0RXhwcmVzc2lvbigpICE9PSBzb3VyY2VSdWxlLmdldEV4cHJlc3Npb24oKSkge1xuICAgICAgZGVzdFJ1bGUuc2V0RXhwcmVzc2lvbihzb3VyY2VSdWxlLmdldEV4cHJlc3Npb24oKSk7XG4gICAgfVxuXG4gICAgaWYgKGRlc3RSdWxlLmxvd2VyQm91bmRhcnkgIT09IHNvdXJjZVJ1bGUubG93ZXJCb3VuZGFyeSkge1xuICAgICAgZGVzdFJ1bGUubG93ZXJCb3VuZGFyeSA9IHNvdXJjZVJ1bGUubG93ZXJCb3VuZGFyeTtcbiAgICB9XG5cbiAgICBpZiAoZGVzdFJ1bGUub3BlcmF0b3IgIT09IHNvdXJjZVJ1bGUub3BlcmF0b3IpIHtcbiAgICAgIGRlc3RSdWxlLm9wZXJhdG9yID0gc291cmNlUnVsZS5vcGVyYXRvcjtcbiAgICB9XG5cbiAgICBpZiAoZGVzdFJ1bGUudXBwZXJCb3VuZGFyeSAhPT0gc291cmNlUnVsZS51cHBlckJvdW5kYXJ5KSB7XG4gICAgICBkZXN0UnVsZS51cHBlckJvdW5kYXJ5ID0gc291cmNlUnVsZS51cHBlckJvdW5kYXJ5O1xuICAgIH1cblxuICAgIGlmIChzb3VyY2VSdWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSAmJiBkZXN0UnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkpIHtcbiAgICAgIHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmNsZWFyTm9uU3BhdGlhbFByb3BlcnRpZXMoZGVzdFJ1bGUuZmVhdHVyZSk7XG4gICAgICBkZXN0UnVsZS5mZWF0dXJlLnNldFByb3BlcnRpZXModGhpcy5uZ2VvRmVhdHVyZUhlbHBlcl8uZ2V0Tm9uU3BhdGlhbFByb3BlcnRpZXMoc291cmNlUnVsZS5mZWF0dXJlKSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5zZXJpYWxpemVSdWxlcyA9IGZ1bmN0aW9uIHNlcmlhbGl6ZVJ1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBydWxlcy5tYXAoZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgIHZhciBzZXJpYWxpemVkUnVsZSA9IF90aGlzLnNlcmlhbGl6ZVJ1bGUocnVsZSk7XG5cbiAgICAgIHJldHVybiBzZXJpYWxpemVkUnVsZTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uc2VyaWFsaXplUnVsZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZVJ1bGUocnVsZSkge1xuICAgIHZhciBvYmogPSB7XG4gICAgICBuYW1lOiBydWxlLm5hbWUsXG4gICAgICBwcm9wZXJ0eU5hbWU6IHJ1bGUucHJvcGVydHlOYW1lLFxuICAgICAgdHlwZTogcnVsZS50eXBlXG4gICAgfTtcblxuICAgIGlmIChydWxlLmV4cHJlc3Npb24gIT09IG51bGwpIHtcbiAgICAgIG9iai5leHByZXNzaW9uID0gcnVsZS5leHByZXNzaW9uO1xuICAgIH1cblxuICAgIGlmIChydWxlLmxvd2VyQm91bmRhcnkgIT09IG51bGwpIHtcbiAgICAgIG9iai5sb3dlckJvdW5kYXJ5ID0gcnVsZS5sb3dlckJvdW5kYXJ5O1xuICAgIH1cblxuICAgIGlmIChydWxlLm9wZXJhdG9yICE9PSBudWxsKSB7XG4gICAgICBvYmoub3BlcmF0b3IgPSBydWxlLm9wZXJhdG9yO1xuICAgIH1cblxuICAgIGlmIChydWxlLm9wZXJhdG9ycyAhPT0gbnVsbCkge1xuICAgICAgb2JqLm9wZXJhdG9ycyA9IHJ1bGUub3BlcmF0b3JzLnNsaWNlKDApO1xuICAgIH1cblxuICAgIGlmIChydWxlLnVwcGVyQm91bmRhcnkgIT09IG51bGwpIHtcbiAgICAgIG9iai51cHBlckJvdW5kYXJ5ID0gcnVsZS51cHBlckJvdW5kYXJ5O1xuICAgIH1cblxuICAgIGlmIChydWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgdmFyIG9wdCA9IG9iajtcbiAgICAgIG9wdC5mZWF0dXJlUHJvcGVydGllcyA9IHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzKHJ1bGUuZmVhdHVyZSk7XG4gICAgfVxuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZVNlbGVjdCkge1xuICAgICAgdmFyIF9vcHQyID0gb2JqO1xuICAgICAgX29wdDIuY2hvaWNlcyA9IHJ1bGUuY2hvaWNlcztcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVGaWx0ZXIgPSBmdW5jdGlvbiBjcmVhdGVGaWx0ZXIob3B0aW9ucykge1xuICAgIHZhciBkYXRhU291cmNlID0gb3B0aW9ucy5kYXRhU291cmNlO1xuICAgIHZhciBtYWluRmlsdGVyID0gbnVsbDtcblxuICAgIGlmIChvcHRpb25zLmZpbHRlcikge1xuICAgICAgbWFpbkZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcnVsZXMgPSBvcHRpb25zLmZpbHRlclJ1bGVzIHx8IGRhdGFTb3VyY2UuZmlsdGVyUnVsZXM7XG4gICAgICB2YXIgY29uZGl0aW9ucyA9IFtdO1xuXG4gICAgICBpZiAocnVsZXMgJiYgcnVsZXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHJ1bGVzKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgcnVsZSA9IF9zdGVwMy52YWx1ZTtcbiAgICAgICAgICB2YXIgZmlsdGVyID0gdGhpcy5jcmVhdGVGaWx0ZXJGcm9tUnVsZV8ocnVsZSwgZGF0YVNvdXJjZSwgb3B0aW9ucy5zcnNOYW1lKTtcblxuICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbnMucHVzaChmaWx0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgY29uZGl0aW9uID0gZGF0YVNvdXJjZS5maWx0ZXJDb25kaXRpb247XG5cbiAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBtYWluRmlsdGVyID0gY29uZGl0aW9uc1swXTtcbiAgICAgIH0gZWxzZSBpZiAoY29uZGl0aW9ucy5sZW5ndGggPj0gMikge1xuICAgICAgICBpZiAoY29uZGl0aW9uID09PSBuZ2VvRmlsdGVyQ29uZGl0aW9uLkFORCkge1xuICAgICAgICAgIG1haW5GaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5hbmQuYXBwbHkobnVsbCwgY29uZGl0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZGl0aW9uID09PSBuZ2VvRmlsdGVyQ29uZGl0aW9uLk9SIHx8IGNvbmRpdGlvbiA9PT0gbmdlb0ZpbHRlckNvbmRpdGlvbi5OT1QpIHtcbiAgICAgICAgICBtYWluRmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIub3IuYXBwbHkobnVsbCwgY29uZGl0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1haW5GaWx0ZXIgJiYgY29uZGl0aW9uID09PSBuZ2VvRmlsdGVyQ29uZGl0aW9uLk5PVCkge1xuICAgICAgICBtYWluRmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIubm90KG1haW5GaWx0ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmluY1RpbWUpIHtcbiAgICAgIHZhciB0aW1lRmlsdGVyID0gdGhpcy5jcmVhdGVUaW1lRmlsdGVyRnJvbURhdGFTb3VyY2VfKGRhdGFTb3VyY2UpO1xuICAgICAgbWFpbkZpbHRlciA9IHRoaXMuam9pbkZpbHRlcnMobWFpbkZpbHRlciwgdGltZUZpbHRlcik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaW5jRGltZW5zaW9ucykge1xuICAgICAgdmFyIGRpbWVuc2lvbnNGaWx0ZXIgPSB0aGlzLmNyZWF0ZURpbWVuc2lvbnNGaWx0ZXJGcm9tRGF0YVNvdXJjZV8oZGF0YVNvdXJjZSk7XG4gICAgICBtYWluRmlsdGVyID0gdGhpcy5qb2luRmlsdGVycyhtYWluRmlsdGVyLCBkaW1lbnNpb25zRmlsdGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFpbkZpbHRlcjtcbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlRmlsdGVyU3RyaW5nID0gZnVuY3Rpb24gY3JlYXRlRmlsdGVyU3RyaW5nKG9wdGlvbnMpIHtcbiAgICB2YXIgZmlsdGVyU3RyaW5nID0gbnVsbDtcbiAgICB2YXIgZGVmYXVsdFdGU1ZlcnNpb24gPSAnMS4xLjAnO1xuICAgIHZhciBmaWx0ZXIgPSB0aGlzLmNyZWF0ZUZpbHRlcihvcHRpb25zKTtcblxuICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgIHZhciBmaWx0ZXJOb2RlID0gd3JpdGVGaWx0ZXIoZmlsdGVyLCBkZWZhdWx0V0ZTVmVyc2lvbik7XG4gICAgICB2YXIgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG4gICAgICBmaWx0ZXJTdHJpbmcgPSB4bWxTZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKGZpbHRlck5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJTdHJpbmc7XG4gIH07XG5cbiAgX3Byb3RvLmpvaW5GaWx0ZXJzID0gZnVuY3Rpb24gam9pbkZpbHRlcnMoZmlsdGVyQSwgZmlsdGVyQikge1xuICAgIHZhciBmaWx0ZXIgPSBudWxsO1xuXG4gICAgaWYgKGZpbHRlckEgJiYgZmlsdGVyQikge1xuICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuYW5kLmFwcGx5KG51bGwsIFtmaWx0ZXJBLCBmaWx0ZXJCXSk7XG4gICAgfSBlbHNlIGlmIChmaWx0ZXJBKSB7XG4gICAgICBmaWx0ZXIgPSBmaWx0ZXJBO1xuICAgIH0gZWxzZSBpZiAoZmlsdGVyQikge1xuICAgICAgZmlsdGVyID0gZmlsdGVyQjtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVGaWx0ZXJGcm9tUnVsZV8gPSBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGcm9tUnVsZV8ocnVsZSwgZGF0YVNvdXJjZSwgb3B0X3Nyc05hbWUpIHtcbiAgICB2YXIgZmlsdGVyID0gbnVsbDtcbiAgICB2YXIgdmFsdWUgPSBydWxlLnZhbHVlO1xuXG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGV4cHJlc3Npb24gPSB2YWx1ZS5leHByZXNzaW9uO1xuICAgIHZhciBsb3dlckJvdW5kYXJ5ID0gdmFsdWUubG93ZXJCb3VuZGFyeTtcbiAgICB2YXIgb3BlcmF0b3IgPSB2YWx1ZS5vcGVyYXRvcjtcbiAgICB2YXIgcHJvcGVydHlOYW1lID0gdmFsdWUucHJvcGVydHlOYW1lO1xuICAgIHZhciB1cHBlckJvdW5kYXJ5ID0gdmFsdWUudXBwZXJCb3VuZGFyeTtcbiAgICB2YXIgcm90ID0gUnVsZU9wZXJhdG9yVHlwZTtcbiAgICB2YXIgcnNvdCA9IFJ1bGVTcGF0aWFsT3BlcmF0b3JUeXBlO1xuICAgIHZhciBydG90ID0gUnVsZVRlbXBvcmFsT3BlcmF0b3JUeXBlO1xuICAgIHZhciBzcGF0aWFsVHlwZXMgPSBbcnNvdC5DT05UQUlOUywgcnNvdC5JTlRFUlNFQ1RTLCByc290LldJVEhJTl07XG4gICAgdmFyIG51bWVyaWNUeXBlcyA9IFtyb3QuR1JFQVRFUl9USEFOLCByb3QuR1JFQVRFUl9USEFOX09SX0VRVUFMX1RPLCByb3QuTEVTU0VSX1RIQU4sIHJvdC5MRVNTRVJfVEhBTl9PUl9FUVVBTF9UT107XG5cbiAgICBpZiAocnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlRGF0ZSkge1xuICAgICAgdmFyIGJlZ2luVmFsdWU7XG4gICAgICB2YXIgZW5kVmFsdWU7XG5cbiAgICAgIGlmIChvcGVyYXRvciA9PT0gcnRvdC5EVVJJTkcpIHtcbiAgICAgICAgYmVnaW5WYWx1ZSA9IG1vbWVudChsb3dlckJvdW5kYXJ5KS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgZW5kVmFsdWUgPSBtb21lbnQodXBwZXJCb3VuZGFyeSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBydG90LkVRVUFMUykge1xuICAgICAgICBiZWdpblZhbHVlID0gbW9tZW50KGV4cHJlc3Npb24pLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICBlbmRWYWx1ZSA9IGJlZ2luVmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBydG90LkJFR0lOUykge1xuICAgICAgICBiZWdpblZhbHVlID0gbW9tZW50KGV4cHJlc3Npb24pLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICBlbmRWYWx1ZSA9IG1vbWVudChleHByZXNzaW9uKS5hZGQoMzAsICd5ZWFycycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcnRvdC5FTkRTKSB7XG4gICAgICAgIGJlZ2luVmFsdWUgPSAnMTk3MC0wMS0wMSc7XG4gICAgICAgIGVuZFZhbHVlID0gbW9tZW50KGV4cHJlc3Npb24pLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYmVnaW5WYWx1ZSAmJiBlbmRWYWx1ZSkge1xuICAgICAgICBpZiAoZGF0YVNvdXJjZS5vZ2NTZXJ2ZXJUeXBlID09ICdxZ2lzc2VydmVyJykge1xuICAgICAgICAgIGZpbHRlciA9IG5nZW9Gb3JtYXRGaWx0ZXIuZGF0ZUJldHdlZW4ocHJvcGVydHlOYW1lLCBiZWdpblZhbHVlLCBlbmRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuZHVyaW5nKHByb3BlcnR5TmFtZSwgYmVnaW5WYWx1ZSwgZW5kVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChydWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVTZWxlY3QpIHtcbiAgICAgIHZhciBzZWxlY3RlZENob2ljZXMgPSBydWxlLnNlbGVjdGVkQ2hvaWNlcztcblxuICAgICAgaWYgKHNlbGVjdGVkQ2hvaWNlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIuZXF1YWxUbyhwcm9wZXJ0eU5hbWUsIHNlbGVjdGVkQ2hvaWNlc1swXSk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkQ2hvaWNlcy5sZW5ndGggPj0gMikge1xuICAgICAgICB2YXIgY29uZGl0aW9ucyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHNlbGVjdGVkQ2hvaWNlcyksIF9zdGVwNDsgIShfc3RlcDQgPSBfaXRlcmF0b3I0KCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkQ2hvaWNlID0gX3N0ZXA0LnZhbHVlO1xuICAgICAgICAgIGNvbmRpdGlvbnMucHVzaChvbEZvcm1hdEZpbHRlci5lcXVhbFRvKHByb3BlcnR5TmFtZSwgc2VsZWN0ZWRDaG9pY2UpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLm9yLmFwcGx5KG51bGwsIGNvbmRpdGlvbnMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3BhdGlhbFR5cGVzLmluY2x1ZGVzKG9wZXJhdG9yKSkge1xuICAgICAgdmFyIGZlYXR1cmVOYW1lcyA9IGRhdGFTb3VyY2UuZ2V0RmlsdHJhYmxlV0ZTTGF5ZXJOYW1lKCk7XG4gICAgICB2YXIgZ2VvbWV0cnlOYW1lID0gZGF0YVNvdXJjZS5nZW9tZXRyeU5hbWUoZmVhdHVyZU5hbWVzID8gZmVhdHVyZU5hbWVzWzBdIDogbnVsbCk7XG5cbiAgICAgIGlmIChydWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBydWxlLmdlb21ldHJ5O1xuXG4gICAgICAgIGlmICghZ2VvbWV0cnkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnZW9tZXRyeU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnlOYW1lJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3BlcmF0b3IgPT09IHJzb3QuQ09OVEFJTlMpIHtcbiAgICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5jb250YWlucyhnZW9tZXRyeU5hbWUsIGdlb21ldHJ5LCBvcHRfc3JzTmFtZSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJzb3QuSU5URVJTRUNUUykge1xuICAgICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmludGVyc2VjdHMoZ2VvbWV0cnlOYW1lLCBnZW9tZXRyeSwgb3B0X3Nyc05hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByc290LldJVEhJTikge1xuICAgICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLndpdGhpbihnZW9tZXRyeU5hbWUsIGdlb21ldHJ5LCBvcHRfc3JzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG51bWVyaWNUeXBlcy5pbmNsdWRlcyhvcGVyYXRvcikpIHtcbiAgICAgIGlmICh0eXBlb2YgZXhwcmVzc2lvbiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBleHByZXNzaW9uIHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wZXJhdG9yID09PSByb3QuR1JFQVRFUl9USEFOKSB7XG4gICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmdyZWF0ZXJUaGFuKHByb3BlcnR5TmFtZSwgZXhwcmVzc2lvbik7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByb3QuR1JFQVRFUl9USEFOX09SX0VRVUFMX1RPKSB7XG4gICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmdyZWF0ZXJUaGFuT3JFcXVhbFRvKHByb3BlcnR5TmFtZSwgZXhwcmVzc2lvbik7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSByb3QuTEVTU0VSX1RIQU4pIHtcbiAgICAgICAgZmlsdGVyID0gb2xGb3JtYXRGaWx0ZXIubGVzc1RoYW4ocHJvcGVydHlOYW1lLCBleHByZXNzaW9uKTtcbiAgICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJvdC5MRVNTRVJfVEhBTl9PUl9FUVVBTF9UTykge1xuICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5sZXNzVGhhbk9yRXF1YWxUbyhwcm9wZXJ0eU5hbWUsIGV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJvdC5CRVRXRUVOKSB7XG4gICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5iZXR3ZWVuKHByb3BlcnR5TmFtZSwgbG93ZXJCb3VuZGFyeSwgdXBwZXJCb3VuZGFyeSk7XG4gICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcm90LkVRVUFMX1RPKSB7XG4gICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5lcXVhbFRvKHByb3BlcnR5TmFtZSwgZXhwcmVzc2lvbik7XG4gICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gcm90LkxJS0UpIHtcbiAgICAgIHZhciBzdHJpbmdFeHByZXNzaW9uID0gU3RyaW5nKGV4cHJlc3Npb24pLnJlcGxhY2UoLyEvZywgJyEhJykucmVwbGFjZSgvXFwuL2csICchLicpLnJlcGxhY2UoL1xcKi9nLCAnISonKTtcbiAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmxpa2UocHJvcGVydHlOYW1lLCBcIipcIiArIHN0cmluZ0V4cHJlc3Npb24gKyBcIipcIiwgJyonLCAnLicsICchJywgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IHJvdC5OT1RfRVFVQUxfVE8pIHtcbiAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLm5vdEVxdWFsVG8ocHJvcGVydHlOYW1lLCBleHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsdGVyO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVEaW1lbnNpb25zRmlsdGVyRnJvbURhdGFTb3VyY2VfID0gZnVuY3Rpb24gY3JlYXRlRGltZW5zaW9uc0ZpbHRlckZyb21EYXRhU291cmNlXyhkYXRhU291cmNlKSB7XG4gICAgdmFyIGNvbmZpZyA9IGRhdGFTb3VyY2UuZGltZW5zaW9uc0ZpbHRlcnNDb25maWcgfHwge307XG4gICAgdmFyIGRpbWVuc2lvbnMgPSBkYXRhU291cmNlLmRpbWVuc2lvbnM7XG4gICAgdmFyIGNvbmRpdGlvbnMgPSBbXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBjb25maWcpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGNvbmZpZ1trZXldLnZhbHVlO1xuXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgdmFyIGRpbWVuc2lvblZhbHVlID0gZGltZW5zaW9uc1trZXldO1xuXG4gICAgICAgIGlmIChkaW1lbnNpb25WYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGRpbWVuc2lvblZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFsdWUgPSBkaW1lbnNpb25WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgY29uZGl0aW9ucy5wdXNoKG9sRm9ybWF0RmlsdGVyLmVxdWFsVG8oY29uZmlnW2tleV0uZmllbGQsIHZhbHVlLCB0cnVlKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gY29uZGl0aW9uc1swXTtcbiAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID49IDIpIHtcbiAgICAgIHJldHVybiBvbEZvcm1hdEZpbHRlci5hbmQuYXBwbHkobnVsbCwgY29uZGl0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZVRpbWVGaWx0ZXJGcm9tRGF0YVNvdXJjZV8gPSBmdW5jdGlvbiBjcmVhdGVUaW1lRmlsdGVyRnJvbURhdGFTb3VyY2VfKGRhdGFTb3VyY2UpIHtcbiAgICB2YXIgZmlsdGVyID0gbnVsbDtcbiAgICB2YXIgcmFuZ2UgPSBkYXRhU291cmNlLnRpbWVSYW5nZVZhbHVlO1xuICAgIHZhciB0aW1lUHJvcGVydHkgPSBkYXRhU291cmNlLnRpbWVQcm9wZXJ0eTtcbiAgICB2YXIgbmFtZSA9IGRhdGFTb3VyY2UudGltZUF0dHJpYnV0ZU5hbWU7XG5cbiAgICBpZiAocmFuZ2UgJiYgdGltZVByb3BlcnR5ICYmIG5hbWUpIHtcbiAgICAgIGlmIChyYW5nZS5lbmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5uZ2VvV01TVGltZV8uZm9ybWF0V01TVGltZVBhcmFtKHRpbWVQcm9wZXJ0eSwgcmFuZ2UpLnNwbGl0KCcvJyk7XG4gICAgICAgIGZpbHRlciA9IG9sRm9ybWF0RmlsdGVyLmR1cmluZyhuYW1lLCB2YWx1ZXNbMF0sIHZhbHVlc1sxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRpbWVQcm9wZXJ0eS5yZXNvbHV0aW9uIHx8ICdzZWNvbmRzJztcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5uZ2VvV01TVGltZV8uZm9ybWF0V01TVGltZVBhcmFtKHRpbWVQcm9wZXJ0eSwgcmFuZ2UpO1xuICAgICAgICB2YXIgbW9tZW50RW5kO1xuXG4gICAgICAgIHN3aXRjaCAocmVzb2x1dGlvbikge1xuICAgICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgbW9tZW50RW5kID0gbW9tZW50KHZhbHVlKS5hZGQoMSwgJ3llYXJzJykuc3VidHJhY3QoMSwgJ3NlY29uZHMnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgbW9tZW50RW5kID0gbW9tZW50KHZhbHVlKS5hZGQoMSwgJ21vbnRocycpLnN1YnRyYWN0KDEsICdzZWNvbmRzJyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgICAgICBtb21lbnRFbmQgPSBtb21lbnQodmFsdWUpLmFkZCgxLCAnZGF5cycpLnN1YnRyYWN0KDEsICdzZWNvbmRzJyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW9tZW50RW5kKSB7XG4gICAgICAgICAgdmFyIHN0YXJ0VmFsdWUgPSBtb21lbnQodmFsdWUpLnV0YygpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpO1xuICAgICAgICAgIHZhciBlbmRWYWx1ZSA9IG1vbWVudEVuZC51dGMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKTtcbiAgICAgICAgICBmaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5kdXJpbmcobmFtZSwgc3RhcnRWYWx1ZSwgZW5kVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcjtcbiAgfTtcblxuICByZXR1cm4gUnVsZUhlbHBlcjtcbn0oKTtcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1J1bGVIZWxwZXInLCBbbmdlb01pc2NGZWF0dXJlSGVscGVyLm5hbWUsIG5nZW9NaXNjV01TVGltZS5uYW1lXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb1J1bGVIZWxwZXInLCBSdWxlSGVscGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwiZHJvcGRvd25cIj5cXG4gIDxidXR0b25cXG4gICAgICBjbGFzcz1cImJ0biBidG4tbGluayBkcm9wZG93bi10b2dnbGUgbmdlby1maWx0ZXItY29uZGl0aW9uLWJ1dHRvblwiXFxuICAgICAgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6ICRjdHJsLmFSdWxlSXNBY3RpdmV9XCJcXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgICBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJcXG4gICAgICBuZy1kaXNhYmxlZD1cIiRjdHJsLmFSdWxlSXNBY3RpdmVcIj5cXG4gICAgPHNwYW4gY2xhc3M9XCJmYSBmYS1jb2dcIj48L3NwYW4+XFxuICA8L2J1dHRvbj5cXG4gIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj5cXG4gICAgPGxpIG5nLXJlcGVhdD1cImNvbmRpdGlvbiBpbiA6OiRjdHJsLmNvbmRpdGlvbnNcIj5cXG4gICAgICA8YVxcbiAgICAgICAgICBocmVmXFxuICAgICAgICAgIG5nLWNsaWNrPVwiJGN0cmwuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbilcIj5cXG4gICAgICAgICAgPHNwYW5cXG4gICAgICAgICAgICAgIG5nLWNsYXNzPVwie1xcJ25nZW8tZmlsdGVyLWNvbmRpdGlvbi1jcml0ZXJpYS1hY3RpdmVcXCc6IGNvbmRpdGlvbi52YWx1ZSA9PSAkY3RybC5kYXRhc291cmNlLmZpbHRlckNvbmRpdGlvbn1cIlxcbiAgICAgICAgICAgICAgY2xhc3M9XCJmYSBmYS1jaGVjayBuZ2VvLWZpbHRlci1jb25kaXRpb24tY3JpdGVyaWFcIj5cXG4gICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICA8c3Bhbj57ezo6Y29uZGl0aW9uLnRleHQgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cXG4gICAgICA8L2E+XFxuICAgIDwvbGk+XFxuICA8L3VsPlxcbjwvZGl2PlxcblxcbjxuZ2VvLXJ1bGVcXG4gICAgbmctcmVwZWF0PVwicnVsZSBpbiAkY3RybC5kaXJlY3RlZFJ1bGVzXCJcXG4gICAgZmVhdHVyZS1vdmVybGF5PVwiOjokY3RybC5mZWF0dXJlT3ZlcmxheVwiXFxuICAgIGNsYXNzPVwibmdlby1maWx0ZXItcnVsZS1kaXJlY3RlZFwiXFxuICAgIG1hcD1cIiRjdHJsLm1hcFwiXFxuICAgIHJ1bGU9XCJydWxlXCJcXG4gICAgdG9vbC1ncm91cD1cIiRjdHJsLnRvb2xHcm91cFwiPlxcbjwvbmdlby1ydWxlPlxcblxcbjxociBjbGFzcz1cIm5nZW8tZmlsdGVyLXNlcGFyYXRvci1ydWxlc1wiIC8+XFxuXFxuPGRpdiBuZy1yZXBlYXQ9XCJydWxlIGluICRjdHJsLmN1c3RvbVJ1bGVzXCI+XFxuICA8YVxcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tbGluayBuZ2VvLWZpbHRlci1ydWxlLWN1c3RvbS1ybS1idG5cIlxcbiAgICAgIG5nLWNsaWNrPVwiISRjdHJsLmFSdWxlSXNBY3RpdmUgJiYgJGN0cmwucmVtb3ZlQ3VzdG9tUnVsZShydWxlKVwiXFxuICAgICAgbmctZGlzYWJsZWQ9XCIkY3RybC5hUnVsZUlzQWN0aXZlXCJcXG4gICAgICBocmVmPlxcbiAgICA8c3BhbiBjbGFzcz1cImZhIGZhLXRpbWVzXCI+PC9zcGFuPlxcbiAgPC9hPlxcbiAgPG5nZW8tcnVsZVxcbiAgICAgIGZlYXR1cmUtb3ZlcmxheT1cIjo6JGN0cmwuZmVhdHVyZU92ZXJsYXlcIlxcbiAgICAgIGNsYXNzPVwibmdlby1maWx0ZXItcnVsZS1jdXN0b21cIlxcbiAgICAgIG1hcD1cIiRjdHJsLm1hcFwiXFxuICAgICAgcnVsZT1cInJ1bGVcIlxcbiAgICAgIHRvb2wtZ3JvdXA9XCIkY3RybC50b29sR3JvdXBcIj5cXG4gIDwvbmdlby1ydWxlPlxcbjwvZGl2PlxcblxcbjxkaXYgY2xhc3M9XCJkcm9wZG93blwiPlxcbiAgPGJ1dHRvblxcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGRyb3Bkb3duLXRvZ2dsZVwiXFxuICAgICAgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6ICRjdHJsLmFSdWxlSXNBY3RpdmV9XCJcXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgICBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJcXG4gICAgICBuZy1kaXNhYmxlZD1cIiRjdHJsLmFSdWxlSXNBY3RpdmVcIj5cXG4gICAgPHNwYW4gdHJhbnNsYXRlPisgQWRkIGEgbmV3IGNyaXRlcmlhPC9zcGFuPlxcbiAgPC9idXR0b24+XFxuICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XFxuICAgIDxsaSBuZy1yZXBlYXQ9XCJhdHRyaWJ1dGUgaW4gOjokY3RybC5nZW9tZXRyeUF0dHJpYnV0ZXNcIj5cXG4gICAgICA8YVxcbiAgICAgICAgICBocmVmXFxuICAgICAgICAgIG5nLWNsaWNrPVwiJGN0cmwuY3JlYXRlQW5kQWRkQ3VzdG9tUnVsZShhdHRyaWJ1dGUpXCI+XFxuICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT5TcGF0aWFsIGZpbHRlcjwvc3Bhbj5cXG4gICAgICA8L2E+XFxuICAgIDwvbGk+XFxuICAgIDxsaSByb2xlPVwicHJlc2VudGF0aW9uXCIgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT5cXG4gICAgPGxpIG5nLXJlcGVhdD1cImF0dHJpYnV0ZSBpbiA6OiRjdHJsLm90aGVyQXR0cmlidXRlc1wiPlxcbiAgICAgIDxhXFxuICAgICAgICAgIGhyZWZcXG4gICAgICAgICAgbmctY2xpY2s9XCIkY3RybC5jcmVhdGVBbmRBZGRDdXN0b21SdWxlKGF0dHJpYnV0ZSlcIj5cXG4gICAgICAgICAgPHNwYW4+e3s6OmF0dHJpYnV0ZS5uYW1lIHwgdHJhbnNsYXRlfX08L3NwYW4+XFxuICAgICAgPC9hPlxcbiAgICA8L2xpPlxcbiAgPC91bD5cXG48L2Rpdj5cXG5cXG48aHIgY2xhc3M9XCJuZ2VvLWZpbHRlci1zZXBhcmF0b3ItY3JpdGVyaWFcIiAvPlxcblxcbjxidXR0b25cXG4gICAgY2xhc3M9XCJidG4gYnRuLWxpbmtcIlxcbiAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgbmctY2xpY2s9XCIkY3RybC5hcHBseSgpXCJcXG4gICAgbmctZGlzYWJsZWQ9XCIkY3RybC5kYXRhc291cmNlLnZpc2libGUgPT09IGZhbHNlXCI+XFxuICA8c3BhbiBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9zcGFuPlxcbiAgPHNwYW4gdHJhbnNsYXRlPkFwcGx5IGZpbHRlcjwvc3Bhbj5cXG48L2J1dHRvbj5cXG5cXG48YnV0dG9uXFxuICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCJcXG4gICAgdHlwZT1cImJ1dHRvblwiXFxuICAgIG5nLWNsaWNrPVwiJGN0cmwuZ2V0RGF0YSgpXCJcXG4gICAgbmctZGlzYWJsZWQ9XCIkY3RybC5kYXRhc291cmNlLnZpc2libGUgPT09IGZhbHNlXCI+XFxuICA8c3BhbiBjbGFzcz1cImZhIGZhLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+XFxuICA8c3BhbiB0cmFuc2xhdGU+R2V0IGRhdGE8L3NwYW4+XFxuPC9idXR0b24+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb1F1ZXJ5TWFwUXVlcmVudCBmcm9tICduZ2VvL3F1ZXJ5L01hcFF1ZXJlbnQuanMnO1xuaW1wb3J0IG5nZW9GaWx0ZXJDb25kaXRpb24gZnJvbSAnbmdlby9maWx0ZXIvQ29uZGl0aW9uLmpzJztcbmltcG9ydCBuZ2VvRmlsdGVyUnVsZUNvbXBvbmVudCBmcm9tICduZ2VvL2ZpbHRlci9ydWxlQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvRmlsdGVyUnVsZUhlbHBlciBmcm9tICduZ2VvL2ZpbHRlci9SdWxlSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmltcG9ydCBuZ2VvUnVsZUdlb21ldHJ5IGZyb20gJ25nZW8vcnVsZS9HZW9tZXRyeS5qcyc7XG5pbXBvcnQgbmdlb01hcEZlYXR1cmVPdmVybGF5IGZyb20gJ25nZW8vbWFwL0ZlYXR1cmVPdmVybGF5LmpzJztcbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCB7IHJlbW92ZSBhcyByZW1vdmVGcm9tQXJyYXkgfSBmcm9tICdvbC9hcnJheS5qcyc7XG5pbXBvcnQgJ25nZW8vc2Fzcy9mb250LnNjc3MnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRmlsdGVyJywgW25nZW9GaWx0ZXJSdWxlSGVscGVyLm5hbWUsIG5nZW9GaWx0ZXJSdWxlQ29tcG9uZW50Lm5hbWUsIG5nZW9NYXBGZWF0dXJlT3ZlcmxheS5uYW1lLCBuZ2VvUXVlcnlNYXBRdWVyZW50Lm5hbWVdKTtcbm1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmdlby9maWx0ZXInLCByZXF1aXJlKCcuL2NvbXBvbmVudC5odG1sJykpO1xufV0pO1xubW9kdWxlLnZhbHVlKCduZ2VvRmlsdGVyVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9ICRhdHRycy5uZ2VvRmlsdGVyVGVtcGxhdGVVcmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9maWx0ZXInO1xufSk7XG5uZ2VvRmlsdGVyVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRhdHRyc1wiLCBcIm5nZW9GaWx0ZXJUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gbmdlb0ZpbHRlclRlbXBsYXRlVXJsKCRhdHRycywgbmdlb0ZpbHRlclRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBuZ2VvRmlsdGVyVGVtcGxhdGVVcmwoJGF0dHJzKTtcbn1cblxubW9kdWxlLmNvbXBvbmVudCgnbmdlb0ZpbHRlcicsIHtcbiAgYmluZGluZ3M6IHtcbiAgICAnYVJ1bGVJc0FjdGl2ZSc6ICc9JyxcbiAgICAnY3VzdG9tUnVsZXMnOiAnPCcsXG4gICAgJ2RhdGFzb3VyY2UnOiAnPCcsXG4gICAgJ2RpcmVjdGVkUnVsZXMnOiAnPCcsXG4gICAgJ2ZlYXR1cmVPdmVybGF5JzogJzwnLFxuICAgICdmaWx0ZXJJc0FwcGxpZWQnOiAnPScsXG4gICAgJ21hcCc6ICc8JyxcbiAgICAndG9vbEdyb3VwJzogJzwnXG4gIH0sXG4gIGNvbnRyb2xsZXI6ICduZ2VvRmlsdGVyQ29udHJvbGxlcicsXG4gIHRlbXBsYXRlVXJsOiBuZ2VvRmlsdGVyVGVtcGxhdGVVcmxcbn0pO1xuXG52YXIgRmlsdGVyQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgRmlsdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiZ2V0dGV4dENhdGFsb2dcIiwgXCIkc2NvcGVcIiwgXCIkdGltZW91dFwiLCBcIm5nZW9NYXBRdWVyZW50XCIsIFwibmdlb1J1bGVIZWxwZXJcIl07XG5cbiAgZnVuY3Rpb24gRmlsdGVyQ29udHJvbGxlcihnZXR0ZXh0Q2F0YWxvZywgJHNjb3BlLCAkdGltZW91dCwgbmdlb01hcFF1ZXJlbnQsIG5nZW9SdWxlSGVscGVyKSB7XG4gICAgdGhpcy5hUnVsZUlzQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5jdXN0b21SdWxlcyA9IFtdO1xuICAgIHRoaXMuZGF0YXNvdXJjZSA9IG51bGw7XG4gICAgdGhpcy5kaXJlY3RlZFJ1bGVzID0gW107XG4gICAgdGhpcy5mZWF0dXJlT3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5tYXAgPSBudWxsO1xuICAgIHRoaXMudG9vbEdyb3VwID0gJyc7XG4gICAgdGhpcy5maWx0ZXJJc0FwcGxpZWQgPSBmYWxzZTtcbiAgICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMuc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMudGltZW91dF8gPSAkdGltZW91dDtcbiAgICB0aGlzLm5nZW9NYXBRdWVyZW50XyA9IG5nZW9NYXBRdWVyZW50O1xuICAgIHRoaXMubmdlb1J1bGVIZWxwZXJfID0gbmdlb1J1bGVIZWxwZXI7XG4gICAgdGhpcy5jb25kaXRpb25zID0gW3tcbiAgICAgIHRleHQ6IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnTWF0Y2ggYWxsIGNyaXRlcmlhJyksXG4gICAgICB2YWx1ZTogbmdlb0ZpbHRlckNvbmRpdGlvbi5BTkRcbiAgICB9LCB7XG4gICAgICB0ZXh0OiBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ01hdGNoIGF0IGxlYXN0IG9uZSBjcml0ZXJpb24nKSxcbiAgICAgIHZhbHVlOiBuZ2VvRmlsdGVyQ29uZGl0aW9uLk9SXG4gICAgfSwge1xuICAgICAgdGV4dDogZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdEb2VzIG5vdCBtYXRjaCBhbnkgY3JpdGVyaW9uJyksXG4gICAgICB2YWx1ZTogbmdlb0ZpbHRlckNvbmRpdGlvbi5OT1RcbiAgICB9XTtcbiAgICB0aGlzLmdlb21ldHJ5QXR0cmlidXRlcyA9IFtdO1xuICAgIHRoaXMub3RoZXJBdHRyaWJ1dGVzID0gW107XG4gICAgdGhpcy5ydWxlVW5saXN0ZW5lcnNfID0ge307XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRmlsdGVyQ29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLiRvbkluaXQgPSBmdW5jdGlvbiAkb25Jbml0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMuZGF0YXNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFzb3VyY2UnKTtcbiAgICB9XG5cbiAgICB0aGlzLnNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmFSdWxlSXNBY3RpdmU7XG4gICAgfSwgdGhpcy5oYW5kbGVBUnVsZUlzQWN0aXZlQ2hhbmdlXy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmRhdGFzb3VyY2UuZmlsdGVyUnVsZXM7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuZmlsdGVySXNBcHBsaWVkID0gX3RoaXMuaGFzQVJ1bGVBY3RpdmUoKTtcbiAgICB9KTtcbiAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuZGF0YXNvdXJjZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShhdHRyaWJ1dGVzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBhdHRyaWJ1dGUgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgaWYgKGF0dHJpYnV0ZS50eXBlID09PSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5HRU9NRVRSWSkge1xuICAgICAgICB0aGlzLmdlb21ldHJ5QXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm90aGVyQXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5jdXN0b21SdWxlcyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgcnVsZSA9IF9zdGVwMi52YWx1ZTtcbiAgICAgIHRoaXMucmVnaXN0ZXJSdWxlXyhydWxlKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmRpcmVjdGVkUnVsZXMpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgdmFyIF9ydWxlID0gX3N0ZXAzLnZhbHVlO1xuICAgICAgdGhpcy5yZWdpc3RlclJ1bGVfKF9ydWxlKTtcbiAgICB9XG5cbiAgICB0aGlzLmFwcGx5KCk7XG4gIH07XG5cbiAgX3Byb3RvLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbiAkb25EZXN0cm95KCkge1xuICAgIGlmICghdGhpcy5kYXRhc291cmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YXNvdXJjZScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5mZWF0dXJlT3ZlcmxheSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZlYXR1cmVPdmVybGF5Jyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YXNvdXJjZS5maWx0ZXJSdWxlcyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5kYXRhc291cmNlLmZpbHRlclJ1bGVzID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmZlYXR1cmVPdmVybGF5LmNsZWFyKCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhc0FSdWxlQWN0aXZlID0gZnVuY3Rpb24gaGFzQVJ1bGVBY3RpdmUoKSB7XG4gICAgdmFyIGN1c3RvbVJ1bGVBY3RpdmUgPSBmYWxzZTtcbiAgICB2YXIgZGlyZWN0ZWRSdWxlQWN0aXZlID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmN1c3RvbVJ1bGVzKSwgX3N0ZXA0OyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQoKSkuZG9uZTspIHtcbiAgICAgIHZhciBydWxlID0gX3N0ZXA0LnZhbHVlO1xuXG4gICAgICBpZiAocnVsZS5leHByZXNzaW9uKSB7XG4gICAgICAgIGN1c3RvbVJ1bGVBY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuZGlyZWN0ZWRSdWxlcyksIF9zdGVwNTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgX3J1bGUyID0gX3N0ZXA1LnZhbHVlO1xuXG4gICAgICBpZiAoX3J1bGUyLmV4cHJlc3Npb24pIHtcbiAgICAgICAgZGlyZWN0ZWRSdWxlQWN0aXZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3VzdG9tUnVsZUFjdGl2ZSB8fCBkaXJlY3RlZFJ1bGVBY3RpdmU7XG4gIH07XG5cbiAgX3Byb3RvLmFwcGx5ID0gZnVuY3Rpb24gYXBwbHkoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMuZGF0YXNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGFzb3VyY2UnKTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFzb3VyY2UuZmlsdGVyUnVsZXMgPSBudWxsO1xuICAgIHRoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZpbHRlclJ1bGVzID0gX3RoaXMyLmdldFJ1bGVzV2l0aFZhbHVlXygpO1xuXG4gICAgICBpZiAoZmlsdGVyUnVsZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghX3RoaXMyLmRhdGFzb3VyY2UpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YXNvdXJjZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLmRhdGFzb3VyY2UuZmlsdGVyUnVsZXMgPSBmaWx0ZXJSdWxlcztcblxuICAgICAgICBfdGhpczIubmdlb01hcFF1ZXJlbnRfLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldERhdGEgPSBmdW5jdGlvbiBnZXREYXRhKCkge1xuICAgIGlmICghdGhpcy5kYXRhc291cmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YXNvdXJjZScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgICB9XG5cbiAgICB2YXIgZmlsdGVyUnVsZXMgPSB0aGlzLmdldFJ1bGVzV2l0aFZhbHVlXygpO1xuXG4gICAgaWYgKCFmaWx0ZXJSdWxlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YVNvdXJjZSA9IHRoaXMuZGF0YXNvdXJjZTtcbiAgICB2YXIgbGltaXQgPSAxMDAwO1xuICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcbiAgICB2YXIgcHJvakNvZGUgPSBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKS5nZXRDb2RlKCk7XG4gICAgdmFyIGZpbHRlciA9IHRoaXMubmdlb1J1bGVIZWxwZXJfLmNyZWF0ZUZpbHRlcih7XG4gICAgICBkYXRhU291cmNlOiBkYXRhU291cmNlLFxuICAgICAgZmlsdGVyUnVsZXM6IGZpbHRlclJ1bGVzLFxuICAgICAgc3JzTmFtZTogcHJvakNvZGVcbiAgICB9KTtcblxuICAgIGlmICghZmlsdGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmlsdGVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5uZ2VvTWFwUXVlcmVudF8uaXNzdWUoe1xuICAgICAgZGF0YVNvdXJjZXM6IFtkYXRhU291cmNlXSxcbiAgICAgIGZpbHRlcjogZmlsdGVyLFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgbWFwOiBtYXBcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0UnVsZXNXaXRoVmFsdWVfID0gZnVuY3Rpb24gZ2V0UnVsZXNXaXRoVmFsdWVfKCkge1xuICAgIHZhciBmaWx0ZXJSdWxlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5jdXN0b21SdWxlcyksIF9zdGVwNjsgIShfc3RlcDYgPSBfaXRlcmF0b3I2KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgcnVsZSA9IF9zdGVwNi52YWx1ZTtcblxuICAgICAgaWYgKHJ1bGUudmFsdWUpIHtcbiAgICAgICAgZmlsdGVyUnVsZXMucHVzaChydWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmRpcmVjdGVkUnVsZXMpLCBfc3RlcDc7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNygpKS5kb25lOykge1xuICAgICAgdmFyIF9ydWxlMyA9IF9zdGVwNy52YWx1ZTtcblxuICAgICAgaWYgKF9ydWxlMy52YWx1ZSkge1xuICAgICAgICBmaWx0ZXJSdWxlcy5wdXNoKF9ydWxlMyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlclJ1bGVzO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVBbmRBZGRDdXN0b21SdWxlID0gZnVuY3Rpb24gY3JlYXRlQW5kQWRkQ3VzdG9tUnVsZShhdHRyaWJ1dGUpIHtcbiAgICB2YXIgcnVsZSA9IHRoaXMubmdlb1J1bGVIZWxwZXJfLmNyZWF0ZVJ1bGVGcm9tQXR0cmlidXRlKGF0dHJpYnV0ZSwgdHJ1ZSk7XG4gICAgdGhpcy5yZWdpc3RlclJ1bGVfKHJ1bGUpO1xuICAgIHRoaXMuY3VzdG9tUnVsZXMucHVzaChydWxlKTtcbiAgICB0aGlzLnRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJ1bGUuYWN0aXZlID0gdHJ1ZTtcbiAgICB9LCAxKTtcbiAgfTtcblxuICBfcHJvdG8uc2V0Q29uZGl0aW9uID0gZnVuY3Rpb24gc2V0Q29uZGl0aW9uKGNvbmRpdGlvbikge1xuICAgIGlmICghdGhpcy5kYXRhc291cmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YXNvdXJjZScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGFzb3VyY2UuZmlsdGVyQ29uZGl0aW9uICE9PSBjb25kaXRpb24udmFsdWUpIHtcbiAgICAgIHRoaXMuZGF0YXNvdXJjZS5maWx0ZXJDb25kaXRpb24gPSBjb25kaXRpb24udmFsdWU7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5yZW1vdmVDdXN0b21SdWxlID0gZnVuY3Rpb24gcmVtb3ZlQ3VzdG9tUnVsZShydWxlKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICBydWxlLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgcmVtb3ZlRnJvbUFycmF5KF90aGlzMy5jdXN0b21SdWxlcywgcnVsZSk7XG5cbiAgICAgIF90aGlzMy51bnJlZ2lzdGVyUnVsZV8ocnVsZSk7XG5cbiAgICAgIHJ1bGUuZGVzdHJveSgpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5yZWdpc3RlclJ1bGVfID0gZnVuY3Rpb24gcmVnaXN0ZXJSdWxlXyhydWxlKSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVPdmVybGF5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZU92ZXJsYXknKTtcbiAgICB9XG5cbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKHJ1bGUpO1xuICAgIHRoaXMucnVsZVVubGlzdGVuZXJzX1t1aWRdID0gdGhpcy5zY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBydWxlLmFjdGl2ZTtcbiAgICB9LCB0aGlzLmhhbmRsZVJ1bGVBY3RpdmVDaGFuZ2VfLmJpbmQodGhpcykpO1xuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBuZ2VvUnVsZUdlb21ldHJ5KSB7XG4gICAgICB0aGlzLmZlYXR1cmVPdmVybGF5LmFkZEZlYXR1cmUocnVsZS5mZWF0dXJlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnVucmVnaXN0ZXJSdWxlXyA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJSdWxlXyhydWxlKSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVPdmVybGF5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZU92ZXJsYXknKTtcbiAgICB9XG5cbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKHJ1bGUpO1xuICAgIHZhciB1bmxpc3RlbmVyID0gdGhpcy5ydWxlVW5saXN0ZW5lcnNfW3VpZF07XG4gICAgY29uc29sZS5hc3NlcnQodW5saXN0ZW5lcik7XG4gICAgdW5saXN0ZW5lcigpO1xuICAgIGRlbGV0ZSB0aGlzLnJ1bGVVbmxpc3RlbmVyc19bdWlkXTtcblxuICAgIGlmIChydWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgdGhpcy5mZWF0dXJlT3ZlcmxheS5yZW1vdmVGZWF0dXJlKHJ1bGUuZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVSdWxlQWN0aXZlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVJ1bGVBY3RpdmVDaGFuZ2VfKCkge1xuICAgIHZhciBhUnVsZUlzQWN0aXZlID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLmN1c3RvbVJ1bGVzKSwgX3N0ZXA4OyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgoKSkuZG9uZTspIHtcbiAgICAgIHZhciBydWxlID0gX3N0ZXA4LnZhbHVlO1xuXG4gICAgICBpZiAocnVsZS5hY3RpdmUpIHtcbiAgICAgICAgYVJ1bGVJc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuZGlyZWN0ZWRSdWxlcyksIF9zdGVwOTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgX3J1bGU0ID0gX3N0ZXA5LnZhbHVlO1xuXG4gICAgICBpZiAoX3J1bGU0LmFjdGl2ZSkge1xuICAgICAgICBhUnVsZUlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hUnVsZUlzQWN0aXZlID0gYVJ1bGVJc0FjdGl2ZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlQVJ1bGVJc0FjdGl2ZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVBUnVsZUlzQWN0aXZlQ2hhbmdlXygpIHtcbiAgICBpZiAodGhpcy5hUnVsZUlzQWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMTAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuY3VzdG9tUnVsZXMpLCBfc3RlcDEwOyAhKF9zdGVwMTAgPSBfaXRlcmF0b3IxMCgpKS5kb25lOykge1xuICAgICAgdmFyIHJ1bGUgPSBfc3RlcDEwLnZhbHVlO1xuXG4gICAgICBpZiAocnVsZS5hY3RpdmUpIHtcbiAgICAgICAgcnVsZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuZGlyZWN0ZWRSdWxlcyksIF9zdGVwMTE7ICEoX3N0ZXAxMSA9IF9pdGVyYXRvcjExKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgX3J1bGU1ID0gX3N0ZXAxMS52YWx1ZTtcblxuICAgICAgaWYgKF9ydWxlNS5hY3RpdmUpIHtcbiAgICAgICAgX3J1bGU1LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEZpbHRlckNvbnRyb2xsZXI7XG59KCk7XG5cbm1vZHVsZS5jb250cm9sbGVyKCduZ2VvRmlsdGVyQ29udHJvbGxlcicsIEZpbHRlckNvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9GaWx0ZXJDb21wb25lbnQgZnJvbSAnbmdlby9maWx0ZXIvY29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvRmlsdGVyUnVsZUhlbHBlciBmcm9tICduZ2VvL2ZpbHRlci9SdWxlSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvRmlsdGVyUnVsZUNvbXBvbmVudCBmcm9tICduZ2VvL2ZpbHRlci9ydWxlQ29tcG9uZW50LmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvRmlsdGVyTW9kdWxlJywgW25nZW9GaWx0ZXJDb21wb25lbnQubmFtZSwgbmdlb0ZpbHRlclJ1bGVIZWxwZXIubmFtZSwgbmdlb0ZpbHRlclJ1bGVDb21wb25lbnQubmFtZV0pOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9NZW51IGZyb20gJ25nZW8vTWVudS5qcyc7XG5pbXBvcnQgbmdlb0RyYXdDb21wb25lbnQgZnJvbSAnbmdlby9kcmF3L2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgbmdlb0ZpbHRlclJ1bGVIZWxwZXIgZnJvbSAnbmdlby9maWx0ZXIvUnVsZUhlbHBlci5qcyc7XG5pbXBvcnQgbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUgZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlVHlwZS5qcyc7XG5pbXBvcnQgbmdlb0dlb21ldHJ5VHlwZSBmcm9tICduZ2VvL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTW9kaWZ5IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTW9kaWZ5LmpzJztcbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25Sb3RhdGUgZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9Sb3RhdGUuanMnO1xuaW1wb3J0IG5nZW9JbnRlcmFjdGlvblRyYW5zbGF0ZSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyc7XG5pbXBvcnQgbmdlb01hcEZlYXR1cmVPdmVybGF5IGZyb20gJ25nZW8vbWFwL0ZlYXR1cmVPdmVybGF5LmpzJztcbmltcG9ydCBuZ2VvTWlzY0RhdGVwaWNrZXJDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL2RhdGVwaWNrZXJDb21wb25lbnQuanMnO1xuaW1wb3J0IHsgaW50ZXJhY3Rpb25EZWNvcmF0aW9uIGFzIG5nZW9NaXNjRGVjb3JhdGVJbnRlcmFjdGlvbiB9IGZyb20gJ25nZW8vbWlzYy9kZWNvcmF0ZS5qcyc7XG5pbXBvcnQgbmdlb01pc2NGZWF0dXJlSGVscGVyIGZyb20gJ25nZW8vbWlzYy9GZWF0dXJlSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZSBmcm9tICduZ2VvL21pc2MvVG9vbEFjdGl2YXRlLmpzJztcbmltcG9ydCBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZU1nciBmcm9tICduZ2VvL21pc2MvVG9vbEFjdGl2YXRlTWdyLmpzJztcbmltcG9ydCB7IFJ1bGVPcGVyYXRvclR5cGUsIFJ1bGVTcGF0aWFsT3BlcmF0b3JUeXBlLCBSdWxlVGVtcG9yYWxPcGVyYXRvclR5cGUgfSBmcm9tICduZ2VvL3J1bGUvUnVsZS5qcyc7XG5pbXBvcnQgbmdlb1J1bGVHZW9tZXRyeSBmcm9tICduZ2VvL3J1bGUvR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuaW1wb3J0IG9sQ29sbGVjdGlvbiBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgb2xTdHlsZVN0eWxlIGZyb20gJ29sL3N0eWxlL1N0eWxlLmpzJztcbmltcG9ydCBvbFN0eWxlVGV4dCBmcm9tICdvbC9zdHlsZS9UZXh0LmpzJztcbmltcG9ydCBvbFN0eWxlRmlsbCBmcm9tICdvbC9zdHlsZS9GaWxsLmpzJztcbmltcG9ydCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgJ25nZW8vc2Fzcy9mb250LnNjc3MnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUnVsZScsIFtuZ2VvRHJhd0NvbXBvbmVudC5uYW1lLCBuZ2VvRmlsdGVyUnVsZUhlbHBlci5uYW1lLCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXkubmFtZSwgbmdlb01pc2NEYXRlcGlja2VyQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjRmVhdHVyZUhlbHBlci5uYW1lLCBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZU1nci5uYW1lXSk7XG5tb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vZmlsdGVyL3J1bGVjb21wb25lbnQnLCByZXF1aXJlKCcuL3J1bGVjb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcbm1vZHVsZS52YWx1ZSgnbmdlb1J1bGVUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uICgkYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gJGF0dHJzWyduZ2VvUnVsZVRlbXBsYXRlVXJsJ107XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9maWx0ZXIvcnVsZWNvbXBvbmVudCc7XG59KTtcbm5nZW9SdWxlVGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRhdHRyc1wiLCBcIm5nZW9SdWxlVGVtcGxhdGVVcmxcIl07XG5cbmZ1bmN0aW9uIG5nZW9SdWxlVGVtcGxhdGVVcmwoJGF0dHJzLCBuZ2VvUnVsZVRlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBuZ2VvUnVsZVRlbXBsYXRlVXJsKCRhdHRycyk7XG59XG5cbnZhciBSdWxlQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgUnVsZUNvbnRyb2xsZXIuJGluamVjdCA9IFtcImdldHRleHRDYXRhbG9nXCIsIFwiJHNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCJuZ2VvRmVhdHVyZUhlbHBlclwiLCBcIm5nZW9SdWxlSGVscGVyXCIsIFwibmdlb1Rvb2xBY3RpdmF0ZU1nclwiXTtcblxuICBmdW5jdGlvbiBSdWxlQ29udHJvbGxlcihnZXR0ZXh0Q2F0YWxvZywgJHNjb3BlLCAkdGltZW91dCwgbmdlb0ZlYXR1cmVIZWxwZXIsIG5nZW9SdWxlSGVscGVyLCBuZ2VvVG9vbEFjdGl2YXRlTWdyKSB7XG4gICAgdmFyIF90aGlzJG9wZXJhdG9ycywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGO1xuXG4gICAgdGhpcy5mZWF0dXJlT3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5tYXAgPSBudWxsO1xuICAgIHRoaXMucnVsZSA9IG51bGw7XG4gICAgdGhpcy50b29sR3JvdXAgPSAnJztcbiAgICB0aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICAgIHRoaXMuc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMudGltZW91dF8gPSAkdGltZW91dDtcbiAgICB0aGlzLm5nZW9GZWF0dXJlSGVscGVyXyA9IG5nZW9GZWF0dXJlSGVscGVyO1xuICAgIHRoaXMubmdlb1J1bGVIZWxwZXJfID0gbmdlb1J1bGVIZWxwZXI7XG4gICAgdGhpcy5uZ2VvVG9vbEFjdGl2YXRlTWdyXyA9IG5nZW9Ub29sQWN0aXZhdGVNZ3I7XG4gICAgdGhpcy5jbG9uZSA9IG51bGw7XG4gICAgdmFyIG9wZXJhdG9yVHlwZSA9IFJ1bGVPcGVyYXRvclR5cGU7XG4gICAgdmFyIHNwYXRpYWxPcGVyYXRvclR5cGUgPSBSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZTtcbiAgICB2YXIgdGVtcG9yYWxPcGVyYXRvclR5cGUgPSBSdWxlVGVtcG9yYWxPcGVyYXRvclR5cGU7XG4gICAgdGhpcy5vcGVyYXRvcnMgPSAoX3RoaXMkb3BlcmF0b3JzID0ge30sIF90aGlzJG9wZXJhdG9yc1tvcGVyYXRvclR5cGUuRVFVQUxfVE9dID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdJcyBlcXVhbCB0bycpLCBfdGhpcyRvcGVyYXRvcnNbb3BlcmF0b3JUeXBlLkdSRUFURVJfVEhBTl0gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0lzIGdyZWF0ZXIgdGhhbicpLCBfdGhpcyRvcGVyYXRvcnNbb3BlcmF0b3JUeXBlLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UT10gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0lzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0bycpLCBfdGhpcyRvcGVyYXRvcnNbb3BlcmF0b3JUeXBlLkxFU1NFUl9USEFOXSA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnSXMgbGVzc2VyIHRoYW4nKSwgX3RoaXMkb3BlcmF0b3JzW29wZXJhdG9yVHlwZS5MRVNTRVJfVEhBTl9PUl9FUVVBTF9UT10gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0lzIGxlc3NlciB0aGFuIG9yIGVxdWFsIHRvJyksIF90aGlzJG9wZXJhdG9yc1tvcGVyYXRvclR5cGUuTk9UX0VRVUFMX1RPXSA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnSXMgbm90IGVxdWFsIHRvJyksIF90aGlzJG9wZXJhdG9yc1tvcGVyYXRvclR5cGUuTElLRV0gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0NvbnRhaW5zJyksIF90aGlzJG9wZXJhdG9yc1tzcGF0aWFsT3BlcmF0b3JUeXBlLkNPTlRBSU5TXSA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnQ29udGFpbnMnKSwgX3RoaXMkb3BlcmF0b3JzW3NwYXRpYWxPcGVyYXRvclR5cGUuSU5URVJTRUNUU10gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0ludGVyc2VjdHMnKSwgX3RoaXMkb3BlcmF0b3JzW3NwYXRpYWxPcGVyYXRvclR5cGUuV0lUSElOXSA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnSXMgaW5zaWRlIG9mJyksIF90aGlzJG9wZXJhdG9yc1t0ZW1wb3JhbE9wZXJhdG9yVHlwZS5CRUdJTlNdID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdCZWdpbnMgYXQnKSwgX3RoaXMkb3BlcmF0b3JzW3RlbXBvcmFsT3BlcmF0b3JUeXBlLkRVUklOR10gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0R1cmluZycpLCBfdGhpcyRvcGVyYXRvcnNbdGVtcG9yYWxPcGVyYXRvclR5cGUuRU5EU10gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0VuZHMgYXQnKSwgX3RoaXMkb3BlcmF0b3JzW3RlbXBvcmFsT3BlcmF0b3JUeXBlLkVRVUFMU10gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0lzIGVxdWFsIHRvJyksIF90aGlzJG9wZXJhdG9ycyk7XG4gICAgdGhpcy5vcGVyYXRvcnNTaG9ydEZvcm1hdCA9IChfdGhpcyRvcGVyYXRvcnNTaG9ydEYgPSB7fSwgX3RoaXMkb3BlcmF0b3JzU2hvcnRGW29wZXJhdG9yVHlwZS5FUVVBTF9UT10gPSAnPScsIF90aGlzJG9wZXJhdG9yc1Nob3J0RltvcGVyYXRvclR5cGUuR1JFQVRFUl9USEFOXSA9ICc+JywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGW29wZXJhdG9yVHlwZS5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE9dID0gJz49JywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGW29wZXJhdG9yVHlwZS5MRVNTRVJfVEhBTl0gPSAnPCcsIF90aGlzJG9wZXJhdG9yc1Nob3J0RltvcGVyYXRvclR5cGUuTEVTU0VSX1RIQU5fT1JfRVFVQUxfVE9dID0gJzw9JywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGW29wZXJhdG9yVHlwZS5OT1RfRVFVQUxfVE9dID0gJyE9JywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGW29wZXJhdG9yVHlwZS5MSUtFXSA9ICd+JywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGW3RlbXBvcmFsT3BlcmF0b3JUeXBlLkJFR0lOU10gPSAnPj0nLCBfdGhpcyRvcGVyYXRvcnNTaG9ydEZbdGVtcG9yYWxPcGVyYXRvclR5cGUuRU5EU10gPSAnPD0nLCBfdGhpcyRvcGVyYXRvcnNTaG9ydEZbdGVtcG9yYWxPcGVyYXRvclR5cGUuRVFVQUxTXSA9ICc9JywgX3RoaXMkb3BlcmF0b3JzU2hvcnRGKTtcbiAgICB0aGlzLnRpbWVSYW5nZU1vZGUgPSB7XG4gICAgICB3aWRnZXQ6ICdkYXRlcGlja2VyJyxcbiAgICAgIG1heFZhbHVlOiBudWxsLFxuICAgICAgbWluVmFsdWU6IG51bGwsXG4gICAgICBtYXhEZWZWYWx1ZTogdGhpcy5jcmVhdGVEYXRlXygpLFxuICAgICAgbWluRGVmVmFsdWU6IHRoaXMuY3JlYXRlV2Vla0Fnb0RhdGVfKCksXG4gICAgICBtb2RlOiAncmFuZ2UnLFxuICAgICAgaW50ZXJ2YWw6IFswLCAxLCAwLCAwXVxuICAgIH07XG4gICAgdGhpcy50aW1lVmFsdWVNb2RlID0ge1xuICAgICAgd2lkZ2V0OiAnZGF0ZXBpY2tlcicsXG4gICAgICBtYXhWYWx1ZTogbnVsbCxcbiAgICAgIG1pblZhbHVlOiBudWxsLFxuICAgICAgbWF4RGVmVmFsdWU6IHRoaXMuY3JlYXRlRGF0ZV8oKSxcbiAgICAgIG1pbkRlZlZhbHVlOiB0aGlzLmNyZWF0ZURhdGVfKCksXG4gICAgICBtb2RlOiAndmFsdWUnLFxuICAgICAgaW50ZXJ2YWw6IFswLCAxLCAwLCAwXVxuICAgIH07XG4gICAgdGhpcy50b29sQWN0aXZhdGVfID0gbnVsbDtcbiAgICB0aGlzLnVubGlzdGVuZXJzXyA9IFtdO1xuICAgIHRoaXMuZHJhd0FjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuZHJhd1Rvb2xBY3RpdmF0ZSA9IG5ldyBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZSh0aGlzLCAnZHJhd0FjdGl2ZScpO1xuICAgIHRoaXMuZHJhd25GZWF0dXJlcyA9IG5ldyBvbENvbGxlY3Rpb24oKTtcbiAgICB0aGlzLm1lbnVfID0gbnVsbDtcbiAgICB0aGlzLnNlbGVjdGVkRmVhdHVyZXMgPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy5pbnRlcmFjdGlvbnNfID0gbmV3IG9sQ29sbGVjdGlvbigpO1xuICAgIHRoaXMubW9kaWZ5XyA9IG5ldyBuZ2VvSW50ZXJhY3Rpb25Nb2RpZnkoe1xuICAgICAgZmVhdHVyZXM6IHRoaXMuc2VsZWN0ZWRGZWF0dXJlcyxcbiAgICAgIHN0eWxlOiBuZ2VvRmVhdHVyZUhlbHBlci5nZXRWZXJ0ZXhTdHlsZShmYWxzZSksXG4gICAgICBuYlBvaW50czogMzJcbiAgICB9KTtcbiAgICB0aGlzLmludGVyYWN0aW9uc18ucHVzaCh0aGlzLm1vZGlmeV8pO1xuICAgIHRoaXMucm90YXRlXyA9IG5ldyBuZ2VvSW50ZXJhY3Rpb25Sb3RhdGUoe1xuICAgICAgZmVhdHVyZXM6IHRoaXMuc2VsZWN0ZWRGZWF0dXJlcyxcbiAgICAgIHN0eWxlOiBuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgdGV4dDogbmV3IG9sU3R5bGVUZXh0KHtcbiAgICAgICAgICB0ZXh0OiBcIlxcdUYwMUVcIixcbiAgICAgICAgICBmb250OiAnOTAwIDE4cHggXCJGb250IEF3ZXNvbWUgNSBGcmVlXCInLFxuICAgICAgICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICAgICAgICBjb2xvcjogJyM3YTdhN2EnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgdGhpcy5pbnRlcmFjdGlvbnNfLnB1c2godGhpcy5yb3RhdGVfKTtcbiAgICB0aGlzLnRyYW5zbGF0ZV8gPSBuZXcgbmdlb0ludGVyYWN0aW9uVHJhbnNsYXRlKHtcbiAgICAgIGZlYXR1cmVzOiB0aGlzLnNlbGVjdGVkRmVhdHVyZXMsXG4gICAgICBzdHlsZTogbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIHRleHQ6IG5ldyBvbFN0eWxlVGV4dCh7XG4gICAgICAgICAgdGV4dDogXCJcXHVGMEIyXCIsXG4gICAgICAgICAgZm9udDogJzkwMCAxOHB4IFwiRm9udCBBd2Vzb21lIDUgRnJlZVwiJyxcbiAgICAgICAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgICAgICAgY29sb3I6ICcjN2E3YTdhJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pO1xuICAgIHRoaXMuaW50ZXJhY3Rpb25zXy5wdXNoKHRoaXMudHJhbnNsYXRlXyk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0gW107XG4gICAgdGhpcy5pbml0aWFsaXplSW50ZXJhY3Rpb25zXygpO1xuICAgIHRoaXMubW9kaWZ5VG9vbEFjdGl2YXRlID0gbmV3IG5nZW9NaXNjVG9vbEFjdGl2YXRlKHRoaXMubW9kaWZ5XywgJ2FjdGl2ZScpO1xuICAgIHRoaXMucm90YXRlVG9vbEFjdGl2YXRlID0gbmV3IG5nZW9NaXNjVG9vbEFjdGl2YXRlKHRoaXMucm90YXRlXywgJ2FjdGl2ZScpO1xuICAgIHRoaXMudHJhbnNsYXRlVG9vbEFjdGl2YXRlID0gbmV3IG5nZW9NaXNjVG9vbEFjdGl2YXRlKHRoaXMudHJhbnNsYXRlXywgJ2FjdGl2ZScpO1xuICAgIHRoaXMuZ2VvbVR5cGUgPSBudWxsO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFJ1bGVDb250cm9sbGVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uJG9uSW5pdCA9IGZ1bmN0aW9uICRvbkluaXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICghdGhpcy5ydWxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcnVsZScpO1xuICAgIH1cblxuICAgIHRoaXMuY2xvbmUgPSB0aGlzLm5nZW9SdWxlSGVscGVyXy5jbG9uZVJ1bGUodGhpcy5ydWxlKTtcbiAgICB0aGlzLnRvb2xBY3RpdmF0ZV8gPSBuZXcgbmdlb01pc2NUb29sQWN0aXZhdGUodGhpcy5ydWxlLCAnYWN0aXZlJyk7XG4gICAgdGhpcy5uZ2VvVG9vbEFjdGl2YXRlTWdyXy5yZWdpc3RlclRvb2wodGhpcy50b29sR3JvdXAsIHRoaXMudG9vbEFjdGl2YXRlXyk7XG4gICAgdGhpcy5zY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMucnVsZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcnVsZScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMucnVsZS5hY3RpdmU7XG4gICAgfSwgdGhpcy5oYW5kbGVBY3RpdmVDaGFuZ2VfLmJpbmQodGhpcykpO1xuXG4gICAgaWYgKHRoaXMuY2xvbmUudHlwZSA9PT0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuREFURSB8fCB0aGlzLmNsb25lLnR5cGUgPT09IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEVUSU1FKSB7XG4gICAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMuY2xvbmUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2xvbmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfdGhpcy5jbG9uZS5nZXRFeHByZXNzaW9uKCk7XG4gICAgICB9LCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3VmFsID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgX3RoaXMudGltZVZhbHVlTW9kZS5taW5EZWZWYWx1ZSA9IG5ld1ZhbCB8fCBfdGhpcy5jcmVhdGVEYXRlXygpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMuY2xvbmUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2xvbmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfdGhpcy5jbG9uZS5sb3dlckJvdW5kYXJ5O1xuICAgICAgfSwgZnVuY3Rpb24gKG5ld1ZhbCkge1xuICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbCA9PSAnc3RyaW5nJykge1xuICAgICAgICAgIF90aGlzLnRpbWVSYW5nZU1vZGUubWluRGVmVmFsdWUgPSBuZXdWYWwgfHwgX3RoaXMuY3JlYXRlV2Vla0Fnb0RhdGVfKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIHRoaXMudW5saXN0ZW5lcnNfLnB1c2godGhpcy5zY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfdGhpcy5jbG9uZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF90aGlzLmNsb25lLnVwcGVyQm91bmRhcnk7XG4gICAgICB9LCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3VmFsID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgX3RoaXMudGltZVJhbmdlTW9kZS5tYXhEZWZWYWx1ZSA9IG5ld1ZhbCB8fCBfdGhpcy5jcmVhdGVEYXRlXygpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNsb25lLnR5cGUgPT09IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkdFT01FVFJZKSB7XG4gICAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghX3RoaXMuY2xvbmUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2xvbmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfdGhpcy5jbG9uZS5vcGVyYXRvcjtcbiAgICAgIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgX3RoaXMuZHJhd0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChuZXdWYWwgJiYgbmV3VmFsID09PSBSdWxlU3BhdGlhbE9wZXJhdG9yVHlwZS5DT05UQUlOUykge1xuICAgICAgICAgIHZhciBjbG9uZSA9IF90aGlzLmNsb25lO1xuXG4gICAgICAgICAgaWYgKGNsb25lIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gY2xvbmUuZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgdmFyIGdlb21UeXBlID0gX3RoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldFR5cGUoY2xvbmUuZmVhdHVyZSk7XG5cbiAgICAgICAgICAgICAgdmFyIHN1cHBvcnRlZFR5cGVzID0gW25nZW9HZW9tZXRyeVR5cGUuQ0lSQ0xFLCBuZ2VvR2VvbWV0cnlUeXBlLlBPTFlHT04sIG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFXTtcblxuICAgICAgICAgICAgICBpZiAoIXN1cHBvcnRlZFR5cGVzLmluY2x1ZGVzKGdlb21UeXBlKSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuY2xvbmUpIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90aGlzLmNsb25lLnNldEV4cHJlc3Npb24obnVsbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIHRoaXMudW5saXN0ZW5lcnNfLnB1c2godGhpcy5zY29wZV8uJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFfdGhpcy5jbG9uZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF90aGlzLmNsb25lLmV4cHJlc3Npb247XG4gICAgICB9LCBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgIGlmIChuZXdWYWwpIHtcbiAgICAgICAgICB2YXIgY2xvbmUgPSBfdGhpcy5jbG9uZTtcblxuICAgICAgICAgIGlmIChjbG9uZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkpIHtcbiAgICAgICAgICAgIF90aGlzLmdlb21UeXBlID0gX3RoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldFR5cGUoY2xvbmUuZmVhdHVyZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLmdlb21UeXBlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgdGhpcy51bmxpc3RlbmVyc18ucHVzaCh0aGlzLnNjb3BlXy4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV90aGlzLmNsb25lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNsb25lJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIV90aGlzLnJ1bGUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcnVsZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhc0V4cHJlc3Npb24gPSBfdGhpcy5jbG9uZS5nZXRFeHByZXNzaW9uKCkgIT09IG51bGw7XG4gICAgICAgIHZhciBpc0FjdGl2ZSA9IF90aGlzLnJ1bGUuYWN0aXZlID09PSB0cnVlO1xuXG4gICAgICAgIHZhciBlZGl0VG9vbElzQWN0aXZlID0gX3RoaXMubW9kaWZ5Xy5nZXRBY3RpdmUoKSB8fCBfdGhpcy5yb3RhdGVfLmdldEFjdGl2ZSgpIHx8IF90aGlzLnRyYW5zbGF0ZV8uZ2V0QWN0aXZlKCk7XG5cbiAgICAgICAgcmV0dXJuIGhhc0V4cHJlc3Npb24gJiYgaXNBY3RpdmUgJiYgZWRpdFRvb2xJc0FjdGl2ZTtcbiAgICAgIH0sIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgaWYgKG5ld1ZhbCkge1xuICAgICAgICAgIHZhciBjbG9uZSA9IF90aGlzLmNsb25lO1xuXG4gICAgICAgICAgaWYgKGNsb25lIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRGZWF0dXJlcy5wdXNoKGNsb25lLmZlYXR1cmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpcy5zZWxlY3RlZEZlYXR1cmVzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbiAkb25EZXN0cm95KCkge1xuICAgIGlmICghdGhpcy5jbG9uZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNsb25lJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnJ1bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBydWxlJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRvb2xBY3RpdmF0ZV8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0b29sQWN0aXZhdGUnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmFjdGl2ZSkge1xuICAgICAgdGhpcy5ydWxlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5oYW5kbGVBY3RpdmVDaGFuZ2VfKGZhbHNlLCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLm5nZW9Ub29sQWN0aXZhdGVNZ3JfLnVucmVnaXN0ZXJUb29sKHRoaXMudG9vbEdyb3VwLCB0aGlzLnRvb2xBY3RpdmF0ZV8pO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy51bmxpc3RlbmVyc18ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdGhpcy51bmxpc3RlbmVyc19baV0oKTtcbiAgICB9XG5cbiAgICB0aGlzLnVubGlzdGVuZXJzXy5sZW5ndGggPSAwO1xuICAgIHRoaXMuY2xvbmUuZGVzdHJveSgpO1xuICB9O1xuXG4gIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgaWYgKCF0aGlzLnJ1bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBydWxlJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucnVsZS5hY3RpdmUpIHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucnVsZS5hY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uYXBwbHkgPSBmdW5jdGlvbiBhcHBseSgpIHtcbiAgICBpZiAoIXRoaXMuY2xvbmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5ydWxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcnVsZScpO1xuICAgIH1cblxuICAgIHRoaXMubmdlb1J1bGVIZWxwZXJfLmV4dGVuZFJ1bGUodGhpcy5jbG9uZSwgdGhpcy5ydWxlKTtcbiAgICB0aGlzLnJ1bGUuYWN0aXZlID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAoIXRoaXMucnVsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJ1bGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY2xvbmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgIH1cblxuICAgIHRoaXMubmdlb1J1bGVIZWxwZXJfLmV4dGVuZFJ1bGUodGhpcy5ydWxlLCB0aGlzLmNsb25lKTtcbiAgICB0aGlzLnJ1bGUuYWN0aXZlID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKCF0aGlzLnJ1bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBydWxlJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmNsb25lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2xvbmUnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsb25lLnJlc2V0KCk7XG4gICAgdGhpcy5ydWxlLnJlc2V0KCk7XG4gIH07XG5cbiAgX3Byb3RvLnRvZ2dsZUNob2ljZVNlbGVjdGlvbiA9IGZ1bmN0aW9uIHRvZ2dsZUNob2ljZVNlbGVjdGlvbihjaG9pY2UpIHtcbiAgICBpZiAoIXRoaXMuY2xvbmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgIH1cblxuICAgIHZhciBydWxlID0gdGhpcy5jbG9uZTtcbiAgICB2YXIgY2hvaWNlcyA9IHJ1bGUuZ2V0RXhwcmVzc2lvbigpID8gcnVsZS5nZXRFeHByZXNzaW9uKCkuc3BsaXQoJywnKSA6IFtdO1xuICAgIHZhciBpZHggPSBjaG9pY2VzLmluZGV4T2YoY2hvaWNlKTtcblxuICAgIGlmIChpZHggPiAtMSkge1xuICAgICAgY2hvaWNlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hvaWNlcy5wdXNoKGNob2ljZSk7XG4gICAgfVxuXG4gICAgcnVsZS5zZXRFeHByZXNzaW9uKGNob2ljZXMubGVuZ3RoID8gY2hvaWNlcy5qb2luKCcsJykgOiBudWxsKTtcbiAgfTtcblxuICBfcHJvdG8ub25EYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbiBvbkRhdGVTZWxlY3RlZChkYXRlKSB7XG4gICAgaWYgKCF0aGlzLmNsb25lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2xvbmUnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsb25lLnNldEV4cHJlc3Npb24oZGF0ZS5zdGFydCk7XG4gIH07XG5cbiAgX3Byb3RvLm9uRGF0ZVJhbmdlU2VsZWN0ZWQgPSBmdW5jdGlvbiBvbkRhdGVSYW5nZVNlbGVjdGVkKGRhdGUpIHtcbiAgICBpZiAoIXRoaXMuY2xvbmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjbG9uZScpO1xuICAgIH1cblxuICAgIHRoaXMuY2xvbmUubG93ZXJCb3VuZGFyeSA9IGRhdGUuc3RhcnQ7XG4gICAgdGhpcy5jbG9uZS51cHBlckJvdW5kYXJ5ID0gZGF0ZS5lbmQ7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZURhdGVfID0gZnVuY3Rpb24gY3JlYXRlRGF0ZV8ob3B0X3RpbWVEZWx0YSkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcblxuICAgIGlmIChvcHRfdGltZURlbHRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB0aW1lID0gZGF0ZS5nZXRUaW1lKCkgLSBvcHRfdGltZURlbHRhO1xuICAgICAgZGF0ZS5zZXRUaW1lKHRpbWUpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZVdlZWtBZ29EYXRlXyA9IGZ1bmN0aW9uIGNyZWF0ZVdlZWtBZ29EYXRlXygpIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlXygxMDAwICogNjAgKiA2MCAqIDI0ICogNyk7XG4gIH07XG5cbiAgX3Byb3RvLnRpbWVUb0RhdGUgPSBmdW5jdGlvbiB0aW1lVG9EYXRlKHRpbWUpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVBY3RpdmVDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlQWN0aXZlQ2hhbmdlXyhhY3RpdmUsIG9sZEFjdGl2ZSkge1xuICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZmVhdHVyZU92ZXJsYXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmZWF0dXJlT3ZlcmxheScpO1xuICAgIH1cblxuICAgIGlmICghKHRoaXMucnVsZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkpIHx8ICEodGhpcy5jbG9uZSBpbnN0YW5jZW9mIG5nZW9SdWxlR2VvbWV0cnkpIHx8IGFjdGl2ZSA9PT0gb2xkQWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSB0aGlzLmxpc3RlbmVyS2V5c187XG4gICAgdmFyIHVpZCA9IFsnbmdlby1ydWxlLScsIG9sVXRpbEdldFVpZCh0aGlzKV0uam9pbignLScpO1xuICAgIHZhciB0b29sTWdyID0gdGhpcy5uZ2VvVG9vbEFjdGl2YXRlTWdyXztcbiAgICB2YXIgcnVsZUZlYXR1cmUgPSB0aGlzLnJ1bGUuZmVhdHVyZTtcbiAgICB2YXIgY2xvbmVGZWF0dXJlID0gdGhpcy5jbG9uZS5mZWF0dXJlO1xuICAgIHZhciBtYXBEaXYgPSB0aGlzLm1hcC5nZXRWaWV3cG9ydCgpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KG1hcERpdik7XG5cbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICBrZXlzLnB1c2gobGlzdGVuKHRoaXMuZHJhd25GZWF0dXJlcywgJ2FkZCcsIHRoaXMuaGFuZGxlRmVhdHVyZXNBZGRfLCB0aGlzKSwgbGlzdGVuKG1hcERpdiwgJ2NvbnRleHRtZW51JywgdGhpcy5oYW5kbGVNYXBDb250ZXh0TWVudV8sIHRoaXMpLCBsaXN0ZW4odGhpcy50cmFuc2xhdGVfLCAndHJhbnNsYXRlZW5kJywgdGhpcy5oYW5kbGVUcmFuc2xhdGVFbmRfLCB0aGlzKSwgbGlzdGVuKHRoaXMucm90YXRlXywgJ3JvdGF0ZWVuZCcsIHRoaXMuaGFuZGxlUm90YXRlRW5kXywgdGhpcykpO1xuICAgICAgdGhpcy5mZWF0dXJlT3ZlcmxheS5yZW1vdmVGZWF0dXJlKHJ1bGVGZWF0dXJlKTtcbiAgICAgIHRoaXMuZmVhdHVyZU92ZXJsYXkuYWRkRmVhdHVyZShjbG9uZUZlYXR1cmUpO1xuICAgICAgdGhpcy5yZWdpc3RlckludGVyYWN0aW9uc18oKTtcbiAgICAgIHRvb2xNZ3IucmVnaXN0ZXJUb29sKHVpZCwgdGhpcy5kcmF3VG9vbEFjdGl2YXRlLCBmYWxzZSk7XG4gICAgICB0b29sTWdyLnJlZ2lzdGVyVG9vbCh1aWQsIHRoaXMubW9kaWZ5VG9vbEFjdGl2YXRlLCB0cnVlKTtcbiAgICAgIHRvb2xNZ3IucmVnaXN0ZXJUb29sKHVpZCwgdGhpcy5yb3RhdGVUb29sQWN0aXZhdGUsIGZhbHNlKTtcbiAgICAgIHRvb2xNZ3IucmVnaXN0ZXJUb29sKHVpZCwgdGhpcy50cmFuc2xhdGVUb29sQWN0aXZhdGUsIGZhbHNlKTtcbiAgICAgIHRoaXMubW9kaWZ5Xy5zZXRBY3RpdmUodHJ1ZSk7XG5cbiAgICAgIGlmIChjbG9uZUZlYXR1cmUuZ2V0R2VvbWV0cnkoKSkge1xuICAgICAgICB0aGlzLm5nZW9GZWF0dXJlSGVscGVyXy5zZXRTdHlsZShjbG9uZUZlYXR1cmUsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjbG9uZUZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG4gICAgICBrZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICBrZXlzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLmRyYXdBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHRvb2xNZ3IudW5yZWdpc3RlclRvb2wodWlkLCB0aGlzLmRyYXdUb29sQWN0aXZhdGUpO1xuICAgICAgdG9vbE1nci51bnJlZ2lzdGVyVG9vbCh1aWQsIHRoaXMubW9kaWZ5VG9vbEFjdGl2YXRlKTtcbiAgICAgIHRvb2xNZ3IudW5yZWdpc3RlclRvb2wodWlkLCB0aGlzLnJvdGF0ZVRvb2xBY3RpdmF0ZSk7XG4gICAgICB0b29sTWdyLnVucmVnaXN0ZXJUb29sKHVpZCwgdGhpcy50cmFuc2xhdGVUb29sQWN0aXZhdGUpO1xuICAgICAgdGhpcy5tb2RpZnlfLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJJbnRlcmFjdGlvbnNfKCk7XG5cbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmVhdHVyZXMuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlT3ZlcmxheS5yZW1vdmVGZWF0dXJlKGNsb25lRmVhdHVyZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmVhdHVyZU92ZXJsYXkuYWRkRmVhdHVyZShydWxlRmVhdHVyZSk7XG4gICAgICB0aGlzLnNlbGVjdGVkRmVhdHVyZXMuY2xlYXIoKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmluaXRpYWxpemVJbnRlcmFjdGlvbnNfID0gZnVuY3Rpb24gaW5pdGlhbGl6ZUludGVyYWN0aW9uc18oKSB7XG4gICAgdGhpcy5pbnRlcmFjdGlvbnNfLmZvckVhY2goZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICBpbnRlcmFjdGlvbi5zZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgbmdlb01pc2NEZWNvcmF0ZUludGVyYWN0aW9uKGludGVyYWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8ucmVnaXN0ZXJJbnRlcmFjdGlvbnNfID0gZnVuY3Rpb24gcmVnaXN0ZXJJbnRlcmFjdGlvbnNfKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbnNfLmZvckVhY2goZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICBpZiAoIV90aGlzMi5tYXApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgICAgfVxuXG4gICAgICBfdGhpczIubWFwLmFkZEludGVyYWN0aW9uKGludGVyYWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8udW5yZWdpc3RlckludGVyYWN0aW9uc18gPSBmdW5jdGlvbiB1bnJlZ2lzdGVySW50ZXJhY3Rpb25zXygpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zXy5mb3JFYWNoKGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgaWYgKCFfdGhpczMubWFwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMzLm1hcC5yZW1vdmVJbnRlcmFjdGlvbihpbnRlcmFjdGlvbik7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUZlYXR1cmVzQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVzQWRkXyhldnQpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHRoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xvbmUgPSBfdGhpczQuY2xvbmU7XG5cbiAgICAgICAgaWYgKGNsb25lIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgICAgIHZhciBmZWF0dXJlID0gY2xvbmUuZmVhdHVyZTtcbiAgICAgICAgICB2YXIgZHJhd25GZWF0dXJlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZHJhd25GZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgICAgY2xvbmUuZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICAgICAgICBfdGhpczQuZHJhd0FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBfdGhpczQubmdlb0ZlYXR1cmVIZWxwZXJfLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzKGRyYXduRmVhdHVyZSk7XG5cbiAgICAgICAgICBfdGhpczQubmdlb0ZlYXR1cmVIZWxwZXJfLmNsZWFyTm9uU3BhdGlhbFByb3BlcnRpZXMoZmVhdHVyZSk7XG5cbiAgICAgICAgICBmZWF0dXJlLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG5cbiAgICAgICAgICBfdGhpczQubmdlb0ZlYXR1cmVIZWxwZXJfLnNldFN0eWxlKGZlYXR1cmUsIHRydWUpO1xuXG4gICAgICAgICAgX3RoaXM0LnNjb3BlXy4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5nZXRSdWxlR2VvbWV0cnlUeXBlID0gZnVuY3Rpb24gZ2V0UnVsZUdlb21ldHJ5VHlwZSgpIHtcbiAgICB2YXIgcnVsZSA9IHRoaXMucnVsZTtcblxuICAgIGlmIChydWxlIGluc3RhbmNlb2Ygbmdlb1J1bGVHZW9tZXRyeSkge1xuICAgICAgcmV0dXJuIHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldFR5cGUocnVsZS5mZWF0dXJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWFwQ29udGV4dE1lbnVfID0gZnVuY3Rpb24gaGFuZGxlTWFwQ29udGV4dE1lbnVfKGV2dCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKGV2dCBpbnN0YW5jZW9mIFVJRXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlbW92ZU1lbnVfKCk7XG4gICAgICB2YXIgcGl4ZWwgPSB0aGlzLm1hcC5nZXRFdmVudFBpeGVsKGV2dCk7XG4gICAgICB2YXIgY29vcmRpbmF0ZSA9IHRoaXMubWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpO1xuICAgICAgdmFyIGZlYXR1cmUgPSB0aGlzLm1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHZhciByZXQgPSBudWxsO1xuXG4gICAgICAgIGlmICghKGZlYXR1cmUgaW5zdGFuY2VvZiBGZWF0dXJlKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZmVhdHVyZSB0eXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3RoaXM1LnNlbGVjdGVkRmVhdHVyZXMuZ2V0QXJyYXkoKS5pbmNsdWRlcyhmZWF0dXJlKSkge1xuICAgICAgICAgIHJldCA9IGZlYXR1cmU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJldCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmZWF0dXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfSk7XG4gICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuXG4gICAgICBpZiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgdHlwZSA9IHRoaXMubmdlb0ZlYXR1cmVIZWxwZXJfLmdldFR5cGUoZmVhdHVyZSk7XG4gICAgICAgIHZhciBnZXR0ZXh0Q2F0YWxvZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2dfO1xuXG4gICAgICAgIGlmICh0eXBlID09IG5nZW9HZW9tZXRyeVR5cGUuQ0lSQ0xFIHx8IHR5cGUgPT0gbmdlb0dlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fCB0eXBlID09IG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTiB8fCB0eXBlID09IG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFKSB7XG4gICAgICAgICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIGNsczogJ2ZhcyBmYS1hcnJvd3MtYWx0JyxcbiAgICAgICAgICAgIGxhYmVsOiBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ01vdmUnKSxcbiAgICAgICAgICAgIG5hbWU6ICdtb3ZlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgPT0gbmdlb0dlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fCB0eXBlID09IG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTiB8fCB0eXBlID09IG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFKSB7XG4gICAgICAgICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIGNsczogJ2ZhcyBmYS11bmRvIGZhLWZsaXAtaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICBsYWJlbDogZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdSb3RhdGUnKSxcbiAgICAgICAgICAgIG5hbWU6ICdyb3RhdGUnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubWVudV8gPSBuZXcgbmdlb01lbnUoe1xuICAgICAgICAgIGFjdGlvbnM6IGFjdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbih0aGlzLm1lbnVfLCAnYWN0aW9uY2xpY2snLCB0aGlzLmhhbmRsZU1lbnVBY3Rpb25DbGlja18sIHRoaXMpKTtcbiAgICAgICAgdGhpcy5tYXAuYWRkT3ZlcmxheSh0aGlzLm1lbnVfKTtcbiAgICAgICAgdGhpcy5tZW51Xy5vcGVuKGNvb3JkaW5hdGUpO1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNjb3BlXy4kYXBwbHkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZU1lbnVfID0gZnVuY3Rpb24gcmVtb3ZlTWVudV8oKSB7XG4gICAgaWYgKHRoaXMubWVudV8pIHtcbiAgICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIHRoaXMubWFwLnJlbW92ZU92ZXJsYXkodGhpcy5tZW51Xyk7XG4gICAgICB0aGlzLm1lbnVfID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZU1lbnVBY3Rpb25DbGlja18gPSBmdW5jdGlvbiBoYW5kbGVNZW51QWN0aW9uQ2xpY2tfKGV2dCkge1xuICAgIHZhciBhY3Rpb24gPSBldnQuZGV0YWlsLmFjdGlvbjtcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdtb3ZlJzpcbiAgICAgICAgdGhpcy50cmFuc2xhdGVfLnNldEFjdGl2ZSh0cnVlKTtcbiAgICAgICAgdGhpcy5zY29wZV8uJGFwcGx5KCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICB0aGlzLnJvdGF0ZV8uc2V0QWN0aXZlKHRydWUpO1xuICAgICAgICB0aGlzLnNjb3BlXy4kYXBwbHkoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRklYTUUgLSBzdXBwb3J0OiBcIiArIGFjdGlvbik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlUm90YXRlRW5kXyA9IGZ1bmN0aW9uIGhhbmRsZVJvdGF0ZUVuZF8oZXZ0KSB7XG4gICAgdGhpcy5yb3RhdGVfLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgdGhpcy5zY29wZV8uJGFwcGx5KCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVRyYW5zbGF0ZUVuZF8gPSBmdW5jdGlvbiBoYW5kbGVUcmFuc2xhdGVFbmRfKGV2dCkge1xuICAgIHRoaXMudHJhbnNsYXRlXy5zZXRBY3RpdmUoZmFsc2UpO1xuICAgIHRoaXMuc2NvcGVfLiRhcHBseSgpO1xuICB9O1xuXG4gIHJldHVybiBSdWxlQ29udHJvbGxlcjtcbn0oKTtcblxubW9kdWxlLmNvbXBvbmVudCgnbmdlb1J1bGUnLCB7XG4gIGJpbmRpbmdzOiB7XG4gICAgJ2ZlYXR1cmVPdmVybGF5JzogJzwnLFxuICAgICdtYXAnOiAnPCcsXG4gICAgJ3J1bGUnOiAnPCcsXG4gICAgJ3Rvb2xHcm91cCc6ICc8J1xuICB9LFxuICBjb250cm9sbGVyOiBSdWxlQ29udHJvbGxlcixcbiAgdGVtcGxhdGVVcmw6IG5nZW9SdWxlVGVtcGxhdGVVcmxcbn0pO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxkaXYgY2xhc3M9XCJkcm9wZG93blwiPlxcbiAgPGJ1dHRvblxcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tYmxvY2sgZHJvcGRvd24tdG9nZ2xlXCJcXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcXG4gICAgICBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJcXG4gICAgICBuZy1jbGljaz1cIiRjdHJsLnRvZ2dsZSgpXCI+XFxuICAgIDxzcGFuPnt7IDo6JGN0cmwuY2xvbmUubmFtZSB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cXG4gIDwvYnV0dG9uPlxcbiAgPGRpdlxcbiAgICBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZm9ybS1ncm91cFwiXFxuICAgIG5nLWNsYXNzPVwie3Nob3c6ICRjdHJsLnJ1bGUuYWN0aXZlfVwiPlxcblxcbiAgICA8c2VsZWN0XFxuICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBuZ2VvLXJ1bGUtb3BlcmF0b3JzLWxpc3RcIlxcbiAgICAgICAgbmctaWY9XCI6OiRjdHJsLmNsb25lLm9wZXJhdG9yc1wiXFxuICAgICAgICBuZy1tb2RlbD1cIiRjdHJsLmNsb25lLm9wZXJhdG9yXCJcXG4gICAgICAgIG5nLW9wdGlvbnM9XCIkY3RybC5vcGVyYXRvcnNbb3BlcmF0b3JdIHwgdHJhbnNsYXRlIGZvciBvcGVyYXRvciBpbiA6OiRjdHJsLmNsb25lLm9wZXJhdG9ycyB0cmFjayBieSBvcGVyYXRvclwiPlxcbiAgICA8L3NlbGVjdD5cXG5cXG4gICAgPGRpdiBuZy1zd2l0Y2g9XCI6OiRjdHJsLmNsb25lLnR5cGVcIj5cXG5cXG4gICAgICA8ZGl2XFxuICAgICAgICAgIGNsYXNzPVwibmdlby1ydWxlLXR5cGUtZGF0ZSBmb3JtLWdyb3VwXCJcXG4gICAgICAgICAgbmctaWY9XCIkY3RybC5ydWxlLmFjdGl2ZVwiXFxuICAgICAgICAgIG5nLXN3aXRjaC13aGVuPVwiZGF0ZXxkYXRldGltZVwiXFxuICAgICAgICAgIG5nLXN3aXRjaC13aGVuLXNlcGFyYXRvcj1cInxcIj5cXG4gICAgICAgIDxkaXYgbmctc3dpdGNoPVwiJGN0cmwuY2xvbmUub3BlcmF0b3JcIj5cXG4gICAgICAgICAgPGRpdiBuZy1zd2l0Y2gtd2hlbj1cIi4ufHRpbWVfZHVyaW5nXCIgbmctc3dpdGNoLXdoZW4tc2VwYXJhdG9yPVwifFwiPlxcbiAgICAgICAgICAgIDxuZ2VvLWRhdGUtcGlja2VyXFxuICAgICAgICAgICAgICAgIHRpbWU9XCIkY3RybC50aW1lUmFuZ2VNb2RlXCJcXG4gICAgICAgICAgICAgICAgb24tZGF0ZS1zZWxlY3RlZD1cIiRjdHJsLm9uRGF0ZVJhbmdlU2VsZWN0ZWQodGltZSlcIj5cXG4gICAgICAgICAgICA8L25nZW8tZGF0ZS1waWNrZXI+XFxuICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICA8ZGl2IG5nLXN3aXRjaC1kZWZhdWx0PlxcbiAgICAgICAgICAgIDxuZ2VvLWRhdGUtcGlja2VyXFxuICAgICAgICAgICAgICAgIHRpbWU9XCIkY3RybC50aW1lVmFsdWVNb2RlXCJcXG4gICAgICAgICAgICAgICAgb24tZGF0ZS1zZWxlY3RlZD1cIiRjdHJsLm9uRGF0ZVNlbGVjdGVkKHRpbWUpXCI+XFxuICAgICAgICAgICAgPC9uZ2VvLWRhdGUtcGlja2VyPlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcblxcbiAgICAgIDxkaXZcXG4gICAgICAgICAgY2xhc3M9XCJuZ2VvLXJ1bGUtdHlwZS1nZW9tZXRyeSBmb3JtLWdyb3VwXCJcXG4gICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJnZW9tZXRyeVwiPlxcbiAgICAgICAgPGRpdiBuZy1zd2l0Y2g9XCIkY3RybC5nZW9tVHlwZVwiPlxcbiAgICAgICAgICA8c3BhblxcbiAgICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJQb2ludFwiPlxcbiAgICAgICAgICAnICtcbigoX190ID0gKHJlcXVpcmUoJ2dtZi9pY29ucy9wb2ludC5zdmcnKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgIDxzcGFuXFxuICAgICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cIkxpbmVTdHJpbmdcIj5cXG4gICAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvbGluZS5zdmcnKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgIDxzcGFuXFxuICAgICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cIlBvbHlnb25cIj5cXG4gICAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvcG9seWdvbi5zdmcnKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgIDxzcGFuXFxuICAgICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cIkNpcmNsZVwiPlxcbiAgICAgICAgICAnICtcbigoX190ID0gKHJlcXVpcmUoJ2dtZi9pY29ucy9jaXJjbGUuc3ZnJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcXG4gICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICA8c3BhblxcbiAgICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJSZWN0YW5nbGVcIj5cXG4gICAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvcmVjdGFuZ2xlLnN2ZycpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nXFxuICAgICAgICAgIDwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPG5nZW8tZHJhd2ZlYXR1cmVcXG4gICAgICAgICAgICBuZ2VvLWRyYXdmZWF0dXJlLWFjdGl2ZT1cIiRjdHJsLmRyYXdBY3RpdmVcIlxcbiAgICAgICAgICAgIG5nZW8tZHJhd2ZlYXR1cmUtZmVhdHVyZXM9XCIkY3RybC5kcmF3bkZlYXR1cmVzXCJcXG4gICAgICAgICAgICBuZ2VvLWRyYXdmZWF0dXJlLW1hcD1cIiRjdHJsLm1hcFwiPlxcbiAgICAgICAgICA8ZGl2XFxuICAgICAgICAgICAgICBuZ2VvLWJ0bi1ncm91cFxcbiAgICAgICAgICAgICAgY2xhc3M9XCJidG4tZ3JvdXBcIj5cXG4gICAgICAgICAgICAgIDxhXFxuICAgICAgICAgICAgICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgICAgICAgICAgICAgIHRpdGxlPVwie3tcXCdEcmF3IGEgcG9pbnQgb24gdGhlIG1hcFxcJyB8IHRyYW5zbGF0ZX19XCJcXG4gICAgICAgICAgICAgICAgaHJlZlxcbiAgICAgICAgICAgICAgICBuZ2VvLWJ0blxcbiAgICAgICAgICAgICAgICBuZ2VvLWRyYXdwb2ludFxcbiAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRlZmF1bHQgbmdlby1kcmF3ZmVhdHVyZS1wb2ludFwiXFxuICAgICAgICAgICAgICAgIG5nLXNob3c9XCJbXFwnaW50ZXJzZWN0c1xcJywgXFwnd2l0aGluXFwnXS5pbmRleE9mKCRjdHJsLmNsb25lLm9wZXJhdG9yKSAhPT0gLTFcIlxcbiAgICAgICAgICAgICAgICBuZy1jbGFzcz1cInthY3RpdmU6IGRmQ3RybC5kcmF3UG9pbnQuYWN0aXZlfVwiXFxuICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiZGZDdHJsLmRyYXdQb2ludC5hY3RpdmVcIj5cXG4gICAgICAgICAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvcG9pbnQuc3ZnJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcXG4gICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgIDxhXFxuICAgICAgICAgICAgICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgICAgICAgICAgICAgIHRpdGxlPVwie3tcXCdEcmF3IGEgbGluZSBvbiB0aGUgbWFwXFwnIHwgdHJhbnNsYXRlfX1cIlxcbiAgICAgICAgICAgICAgICBocmVmXFxuICAgICAgICAgICAgICAgIG5nZW8tYnRuXFxuICAgICAgICAgICAgICAgIG5nZW8tbWVhc3VyZWxlbmd0aFxcbiAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRlZmF1bHQgbmdlby1kcmF3ZmVhdHVyZS1saW5lc3RyaW5nXCJcXG4gICAgICAgICAgICAgICAgbmctc2hvdz1cIltcXCdpbnRlcnNlY3RzXFwnLCBcXCd3aXRoaW5cXCddLmluZGV4T2YoJGN0cmwuY2xvbmUub3BlcmF0b3IpICE9PSAtMVwiXFxuICAgICAgICAgICAgICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogZGZDdHJsLm1lYXN1cmVMZW5ndGguYWN0aXZlfVwiXFxuICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiZGZDdHJsLm1lYXN1cmVMZW5ndGguYWN0aXZlXCI+XFxuICAgICAgICAgICAgICAgICcgK1xuKChfX3QgPSAocmVxdWlyZSgnZ21mL2ljb25zL2xpbmUuc3ZnJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcXG4gICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgIDxhXFxuICAgICAgICAgICAgICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgICAgICAgICAgICAgIHRpdGxlPVwie3tcXCdEcmF3IGEgcG9seWdvbiBvbiB0aGUgbWFwXFwnIHwgdHJhbnNsYXRlfX1cIlxcbiAgICAgICAgICAgICAgICBocmVmXFxuICAgICAgICAgICAgICAgIG5nZW8tYnRuXFxuICAgICAgICAgICAgICAgIG5nZW8tbWVhc3VyZWFyZWFcXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IG5nZW8tZHJhd2ZlYXR1cmUtcG9seWdvblwiXFxuICAgICAgICAgICAgICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogZGZDdHJsLm1lYXN1cmVBcmVhLmFjdGl2ZX1cIlxcbiAgICAgICAgICAgICAgICBuZy1tb2RlbD1cImRmQ3RybC5tZWFzdXJlQXJlYS5hY3RpdmVcIj5cXG4gICAgICAgICAgICAgICAgJyArXG4oKF9fdCA9IChyZXF1aXJlKCdnbWYvaWNvbnMvcG9seWdvbi5zdmcnKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgPGFcXG4gICAgICAgICAgICAgICAgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJ7e1xcJ0RyYXcgYSBjaXJjbGUgb24gdGhlIG1hcFxcJyB8IHRyYW5zbGF0ZX19XCJcXG4gICAgICAgICAgICAgICAgaHJlZlxcbiAgICAgICAgICAgICAgICBuZ2VvLWJ0blxcbiAgICAgICAgICAgICAgICBuZ2VvLW1lYXN1cmVhemltdXRcXG4gICAgICAgICAgICAgICAgbmdlby1tZWFzdXJlYXppbXV0LW5icG9pbnRzPVwiMzJcIlxcbiAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRlZmF1bHQgbmdlby1kcmF3ZmVhdHVyZS1jaXJjbGVcIlxcbiAgICAgICAgICAgICAgICBuZy1jbGFzcz1cInthY3RpdmU6IGRmQ3RybC5tZWFzdXJlQXppbXV0LmFjdGl2ZX1cIlxcbiAgICAgICAgICAgICAgICBuZy1tb2RlbD1cImRmQ3RybC5tZWFzdXJlQXppbXV0LmFjdGl2ZVwiPlxcbiAgICAgICAgICAgICAgICAnICtcbigoX190ID0gKHJlcXVpcmUoJ2dtZi9pY29ucy9jaXJjbGUuc3ZnJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcXG4gICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgIDxhXFxuICAgICAgICAgICAgICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgICAgICAgICAgICAgIHRpdGxlPVwie3tcXCdEcmF3IGEgcmVjdGFuZ2xlIG9uIHRoZSBtYXBcXCcgfCB0cmFuc2xhdGV9fVwiXFxuICAgICAgICAgICAgICAgIGhyZWZcXG4gICAgICAgICAgICAgICAgbmdlby1idG5cXG4gICAgICAgICAgICAgICAgbmdlby1kcmF3cmVjdGFuZ2xlXFxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBuZ2VvLWRyYXdmZWF0dXJlLXJlY3RhbmdsZVwiXFxuICAgICAgICAgICAgICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogZGZDdHJsLmRyYXdSZWN0YW5nbGUuYWN0aXZlfVwiXFxuICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiZGZDdHJsLmRyYXdSZWN0YW5nbGUuYWN0aXZlXCI+XFxuICAgICAgICAgICAgICAgICcgK1xuKChfX3QgPSAocmVxdWlyZSgnZ21mL2ljb25zL3JlY3RhbmdsZS5zdmcnKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgPGRpdlxcbiAgICAgICAgICAgICAgY2xhc3M9XCJuZ2VvLXJ1bGUtdHlwZS1nZW9tZXRyeS1pbnN0cnVjdGlvbnNcIlxcbiAgICAgICAgICAgICAgbmctaWY9XCIkY3RybC5kcmF3QWN0aXZlXCI+XFxuICAgICAgICAgICAgPHNwYW4gbmctaWY9XCJkZkN0cmwuZHJhd1BvaW50LmFjdGl2ZVwiPlxcbiAgICAgICAgICAgICAge3sgXFwnRHJhdyBhIHBvaW50IG9uIHRoZSBtYXAuXFwnIHwgdHJhbnNsYXRlIH19XFxuICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgIDxzcGFuIG5nLWlmPVwiZGZDdHJsLm1lYXN1cmVMZW5ndGguYWN0aXZlXCI+XFxuICAgICAgICAgICAgICB7eyBcXCdEcmF3IGEgbGluZSBzdHJpbmcgb24gdGhlIG1hcC5cXCcgfCB0cmFuc2xhdGUgfX1cXG4gICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgICAgPHNwYW4gbmctaWY9XCJkZkN0cmwubWVhc3VyZUFyZWEuYWN0aXZlXCI+XFxuICAgICAgICAgICAgICB7eyBcXCdEcmF3IGEgcG9seWdvbiBvbiB0aGUgbWFwLlxcJyB8IHRyYW5zbGF0ZSB9fVxcbiAgICAgICAgICAgIDwvc3Bhbj5cXG4gICAgICAgICAgICA8c3BhbiBuZy1pZj1cImRmQ3RybC5tZWFzdXJlQXppbXV0LmFjdGl2ZVwiPlxcbiAgICAgICAgICAgICAge3sgXFwnRHJhdyBhIGNpcmNsZSBvbiB0aGUgbWFwLlxcJyB8IHRyYW5zbGF0ZSB9fVxcbiAgICAgICAgICAgIDwvc3Bhbj5cXG4gICAgICAgICAgICA8c3BhbiBuZy1pZj1cImRmQ3RybC5kcmF3UmVjdGFuZ2xlLmFjdGl2ZVwiPlxcbiAgICAgICAgICAgICAge3sgXFwnRHJhdyBhIHJlY3RhbmdsZSBvbiB0aGUgbWFwLlxcJyB8IHRyYW5zbGF0ZSB9fVxcbiAgICAgICAgICAgIDwvc3Bhbj5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L25nZW8tZHJhd2ZlYXR1cmU+XFxuICAgICAgPC9kaXY+XFxuXFxuICAgICAgPGRpdlxcbiAgICAgICAgICBjbGFzcz1cImNoZWNrYm94IG5nZW8tcnVsZS10eXBlLXNlbGVjdFwiXFxuICAgICAgICAgIG5nLXN3aXRjaC13aGVuPVwic2VsZWN0XCI+XFxuICAgICAgICA8YVxcbiAgICAgICAgICAgIG5nLWNsaWNrPVwiJGN0cmwuc2VsZWN0QWxsQ2hvaWNlcygpXCJcXG4gICAgICAgICAgICBocmVmPnt7IEFsbCB8IHRyYW5zbGF0ZX19XFxuICAgICAgICA8L2E+XFxuICAgICAgICA8bGFiZWxcXG4gICAgICAgICAgICBjbGFzcz1cImZvcm0tZ3JvdXAgb2wtdW5zZWxlY3RhYmxlXCJcXG4gICAgICAgICAgICBuZy1yZXBlYXQ9XCJjaG9pY2UgaW4gOjokY3RybC5jbG9uZS5jaG9pY2VzXCI+XFxuICAgICAgICAgIDxpbnB1dFxcbiAgICAgICAgICAgICAgbmctY2hlY2tlZD1cIiRjdHJsLmNsb25lLmdldEV4cHJlc3Npb24oKSAmJiAkY3RybC5jbG9uZS5nZXRFeHByZXNzaW9uKCkuc3BsaXQoXFwnLFxcJykuaW5kZXhPZihjaG9pY2UpID4gLTFcIlxcbiAgICAgICAgICAgICAgbmctY2xpY2s9XCIkY3RybC50b2dnbGVDaG9pY2VTZWxlY3Rpb24oY2hvaWNlKVwiXFxuICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxcbiAgICAgICAgICAgICAgdmFsdWU9XCJjaG9pY2VcIiAvPlxcbiAgICAgICAgICA8c3Bhbj57eyBjaG9pY2UgfCB0cmFuc2xhdGUgfX08L3NwYW4+XFxuICAgICAgICA8L2xhYmVsPlxcblxcbiAgICAgIDwvZGl2PlxcblxcbiAgICAgIDxkaXZcXG4gICAgICAgICAgY2xhc3M9XCJmb3JtLWdyb3VwIG5nZW8tcnVsZS10eXBlLXRleHRcIlxcbiAgICAgICAgICBuZy1zd2l0Y2gtZGVmYXVsdD5cXG4gICAgICAgIDxkaXYgbmctc3dpdGNoPVwiJGN0cmwuY2xvbmUub3BlcmF0b3JcIj5cXG4gICAgICAgICAgPGRpdiBuZy1zd2l0Y2gtd2hlbj1cIi4uXCI+XFxuICAgICAgICAgICAgPGlucHV0XFxuICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxcbiAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXFxuICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiJGN0cmwuY2xvbmUubG93ZXJCb3VuZGFyeVwiLz5cXG4gICAgICAgICAgICA8aW5wdXRcXG4gICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXFxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcXG4gICAgICAgICAgICAgICAgbmctbW9kZWw9XCIkY3RybC5jbG9uZS51cHBlckJvdW5kYXJ5XCIvPlxcbiAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgPGRpdiBuZy1zd2l0Y2gtZGVmYXVsdD5cXG4gICAgICAgICAgICA8aW5wdXRcXG4gICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXFxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcXG4gICAgICAgICAgICAgICAgbmctaWY9XCIkY3RybC5jbG9uZS50eXBlID09PSBcXCdudW1iZXJcXCdcIlxcbiAgICAgICAgICAgICAgICBuZy1tb2RlbD1cIiRjdHJsLmNsb25lLmV4cHJlc3Npb25cIi8+XFxuICAgICAgICAgICAgPGlucHV0XFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxcbiAgICAgICAgICAgICAgICBuZy1pZj1cIiRjdHJsLmNsb25lLnR5cGUgIT09IFxcJ251bWJlclxcJ1wiXFxuICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwiJGN0cmwuY2xvbmUuZXhwcmVzc2lvblwiLz5cXG4gICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG5cXG4gICAgICA8ZGl2IGNsYXNzPVwibmdlby1ydWxlLWJ0bnNcIj5cXG4gICAgICAgIDxidXR0b25cXG4gICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIlxcbiAgICAgICAgICAgIG5nLWNsaWNrPVwiJGN0cmwuYXBwbHkoKVwiXFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiPnt7XFwnQXBwbHlcXCcgfCB0cmFuc2xhdGV9fTwvYnV0dG9uPlxcbiAgICAgICAgPGJ1dHRvblxcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiXFxuICAgICAgICAgICAgbmctY2xpY2s9XCIkY3RybC5jYW5jZWwoKVwiXFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiPnt7XFwnQ2FuY2VsXFwnIHwgdHJhbnNsYXRlfX08L2J1dHRvbj5cXG4gICAgICA8L2Rpdj5cXG5cXG4gICAgPC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG5cXG5cXG48ZGl2XFxuICAgIGNsYXNzPVwibmdlby1ydWxlLXZhbHVlXCJcXG4gICAgbmctaWY9XCIkY3RybC5ydWxlLnZhbHVlICE9PSBudWxsXCI+XFxuXFxuICA8YVxcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tbGlua1wiXFxuICAgICAgbmctY2xpY2s9XCIhJGN0cmwucnVsZS5hY3RpdmUgJiYgJGN0cmwucmVzZXQoKVwiXFxuICAgICAgbmctZGlzYWJsZWQ9XCIkY3RybC5ydWxlLmFjdGl2ZVwiXFxuICAgICAgaHJlZj5cXG4gICAgPHNwYW4gY2xhc3M9XCJmYSBmYS10aW1lc1wiPjwvc3Bhbj5cXG4gIDwvYT5cXG5cXG4gIDxkaXYgbmctc3dpdGNoPVwiOjokY3RybC5ydWxlLnR5cGVcIj5cXG5cXG4gICAgPGRpdlxcbiAgICAgICAgbmctc3dpdGNoLXdoZW49XCJkYXRlfGRhdGV0aW1lXCJcXG4gICAgICAgIG5nLXN3aXRjaC13aGVuLXNlcGFyYXRvcj1cInxcIj5cXG4gICAgICA8ZGl2IG5nLXN3aXRjaD1cIiRjdHJsLnJ1bGUub3BlcmF0b3JcIj5cXG4gICAgICAgIDxkaXYgbmctc3dpdGNoLXdoZW49XCIuLnx0aW1lX2R1cmluZ1wiIG5nLXN3aXRjaC13aGVuLXNlcGFyYXRvcj1cInxcIj5cXG4gICAgICAgICAgPHNwYW4gdHJhbnNsYXRlPkZyb20gPC9zcGFuPlxcbiAgICAgICAgICA8c3Bhbj57eyAkY3RybC50aW1lVG9EYXRlKCRjdHJsLnJ1bGUubG93ZXJCb3VuZGFyeSkgfX08L3NwYW4+XFxuICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT4gdG8gPC9zcGFuPlxcbiAgICAgICAgICA8c3Bhbj57eyAkY3RybC50aW1lVG9EYXRlKCRjdHJsLnJ1bGUudXBwZXJCb3VuZGFyeSkgfX08L3NwYW4+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgbmctc3dpdGNoLWRlZmF1bHQ+XFxuICAgICAgICAgIDxzcGFuPnt7ICRjdHJsLm9wZXJhdG9yc1Nob3J0Rm9ybWF0WyRjdHJsLnJ1bGUub3BlcmF0b3JdIH19PC9zcGFuPlxcbiAgICAgICAgICA8c3Bhbj57eyAkY3RybC50aW1lVG9EYXRlKCRjdHJsLnJ1bGUuZ2V0RXhwcmVzc2lvbigpKSB9fTwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBuZy1zd2l0Y2gtd2hlbj1cImdlb21ldHJ5XCI+XFxuICAgICAgPHNwYW4+e3sgJGN0cmwub3BlcmF0b3JzWyRjdHJsLnJ1bGUub3BlcmF0b3JdIH19PC9zcGFuPlxcbiAgICAgIDxzcGFuIG5nLXN3aXRjaD1cIiRjdHJsLmdldFJ1bGVHZW9tZXRyeVR5cGUoKVwiPlxcbiAgICAgICAgPHNwYW5cXG4gICAgICAgICAgICBjbGFzcz1cImdtZi1pY29uIGdtZi1pY29uLXBvaW50XCJcXG4gICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cIlBvaW50XCI+XFxuICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8c3BhblxcbiAgICAgICAgICAgIGNsYXNzPVwiZ21mLWljb24gZ21mLWljb24tbGluZVwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJMaW5lU3RyaW5nXCI+XFxuICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8c3BhblxcbiAgICAgICAgICAgIGNsYXNzPVwiZ21mLWljb24gZ21mLWljb24tcG9seWdvblwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJQb2x5Z29uXCI+XFxuICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8c3BhblxcbiAgICAgICAgICAgIGNsYXNzPVwiZ21mLWljb24gZ21mLWljb24tY2lyY2xlXCJcXG4gICAgICAgICAgICBuZy1zd2l0Y2gtd2hlbj1cIkNpcmNsZVwiPlxcbiAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgPHNwYW5cXG4gICAgICAgICAgICBjbGFzcz1cImdtZi1pY29uIGdtZi1pY29uLXJlY3RhbmdsZVwiXFxuICAgICAgICAgICAgbmctc3dpdGNoLXdoZW49XCJSZWN0YW5nbGVcIj5cXG4gICAgICAgIDwvc3Bhbj5cXG4gICAgICA8L3NwYW4+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8ZGl2IG5nLXN3aXRjaC13aGVuPVwic2VsZWN0XCI+XFxuICAgICAgPHNwYW4gbmctcmVwZWF0PVwiY2hvaWNlIGluICRjdHJsLnJ1bGUuZ2V0RXhwcmVzc2lvbigpLnNwbGl0KFxcJyxcXCcpXCI+XFxuICAgICAgICB7eyBjaG9pY2UgfCB0cmFuc2xhdGUgfX17eyAkbGFzdCA/IFxcJ1xcJyA6IFxcJywgXFwnIH19XFxuICAgICAgPC9zcGFuPlxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBuZy1zd2l0Y2gtZGVmYXVsdD5cXG4gICAgICA8ZGl2IG5nLXN3aXRjaD1cIiRjdHJsLnJ1bGUub3BlcmF0b3JcIj5cXG4gICAgICAgIDxkaXYgbmctc3dpdGNoLXdoZW49XCIuLnx0aW1lX2R1cmluZ1wiIG5nLXN3aXRjaC13aGVuLXNlcGFyYXRvcj1cInxcIj5cXG4gICAgICAgICAgPHNwYW4gdHJhbnNsYXRlPkJldHdlZW4gPC9zcGFuPlxcbiAgICAgICAgICA8c3Bhbj57eyAkY3RybC5ydWxlLmxvd2VyQm91bmRhcnkgfX08L3NwYW4+XFxuICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT4gYW5kIDwvc3Bhbj5cXG4gICAgICAgICAgPHNwYW4+e3sgJGN0cmwucnVsZS51cHBlckJvdW5kYXJ5IH19PC9zcGFuPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IG5nLXN3aXRjaC1kZWZhdWx0PlxcbiAgICAgICAgICA8c3Bhbj57eyAkY3RybC5vcGVyYXRvcnNTaG9ydEZvcm1hdFskY3RybC5ydWxlLm9wZXJhdG9yXSB9fTwvc3Bhbj5cXG4gICAgICAgICAgPHNwYW4+e3sgJGN0cmwucnVsZS5nZXRFeHByZXNzaW9uKCkgfX08L3NwYW4+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuXFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCB7IGluY2x1ZGVzIGFzIG9sQXJyYXlJbmNsdWRlcyB9IGZyb20gJ29sL2FycmF5LmpzJztcbmltcG9ydCBvbEZvcm1hdEdlb0pTT04gZnJvbSAnb2wvZm9ybWF0L0dlb0pTT04uanMnO1xudmFyIGxheWVySWRlbnRpZmllciA9ICdsYXllck5hbWUnO1xuXG52YXIgQXJjR0lTR2VvSlNPTiA9IGZ1bmN0aW9uIChfb2xGb3JtYXRHZW9KU09OKSB7XG4gIF9pbmhlcml0c0xvb3NlKEFyY0dJU0dlb0pTT04sIF9vbEZvcm1hdEdlb0pTT04pO1xuXG4gIGZ1bmN0aW9uIEFyY0dJU0dlb0pTT04ob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICBfdGhpcyA9IF9vbEZvcm1hdEdlb0pTT04uY2FsbCh0aGlzLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5sYXllcnNfID0gb3B0aW9ucy5sYXllcnMgPyBvcHRpb25zLmxheWVycyA6IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEFyY0dJU0dlb0pTT04ucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRMYXllcnMgPSBmdW5jdGlvbiBnZXRMYXllcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5ZXJzXztcbiAgfTtcblxuICBfcHJvdG8uc2V0TGF5ZXJzID0gZnVuY3Rpb24gc2V0TGF5ZXJzKGxheWVycykge1xuICAgIHRoaXMubGF5ZXJzXyA9IGxheWVycztcbiAgfTtcblxuICBfcHJvdG8ucmVhZEZlYXR1cmVzRnJvbU9iamVjdCA9IGZ1bmN0aW9uIHJlYWRGZWF0dXJlc0Zyb21PYmplY3Qob2JqZWN0LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBnZW9KU09OT2JqZWN0ID0gb2JqZWN0O1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIHZhciBnZW9KU09ORmVhdHVyZXMgPSBudWxsO1xuXG4gICAgaWYgKGdlb0pTT05PYmplY3QudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuICAgICAgdmFyIGdlb0pTT05GZWF0dXJlQ29sbGVjdGlvbiA9IG9iamVjdDtcbiAgICAgIGdlb0pTT05GZWF0dXJlcyA9IGdlb0pTT05GZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VvSlNPTkZlYXR1cmVzID0gW29iamVjdF07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZ2VvSlNPTkZlYXR1cmVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBmZWF0dXJlID0gZ2VvSlNPTkZlYXR1cmVzW2ldO1xuICAgICAgdmFyIGxheWVyTmFtZSA9IGZlYXR1cmVbbGF5ZXJJZGVudGlmaWVyXTtcblxuICAgICAgaWYgKHRoaXMubGF5ZXJzXyAmJiAhb2xBcnJheUluY2x1ZGVzKHRoaXMubGF5ZXJzXywgbGF5ZXJOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgZmVhdHVyZXMucHVzaCh0aGlzLnJlYWRGZWF0dXJlRnJvbU9iamVjdChnZW9KU09ORmVhdHVyZXNbaV0sIG9wdF9vcHRpb25zKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9O1xuXG4gIHJldHVybiBBcmNHSVNHZW9KU09OO1xufShvbEZvcm1hdEdlb0pTT04pO1xuXG5leHBvcnQgZGVmYXVsdCBBcmNHSVNHZW9KU09OOyIsImltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBzZXRHZW9tZXRyeVR5cGUoYXR0cmlidXRlLCB0eXBlKSB7XG4gIHZhciBnZW9tUmVnZXggPSAvZ21sOigoTXVsdGkpPyhQb2ludHxMaW5lfFBvbHlnb258Q3VydmV8U3VyZmFjZXxHZW9tZXRyeSkpLiovO1xuXG4gIGlmIChnZW9tUmVnZXguZXhlYyh0eXBlKSkge1xuICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuR0VPTUVUUlk7XG5cbiAgICBpZiAoL15nbWw6UG9pbnQvLmV4ZWModHlwZSkpIHtcbiAgICAgIGF0dHJpYnV0ZS5nZW9tVHlwZSA9ICdQb2ludCc7XG4gICAgfSBlbHNlIGlmICgvXmdtbDpMaW5lU3RyaW5nfF5nbWw6Q3VydmUvLmV4ZWModHlwZSkpIHtcbiAgICAgIGF0dHJpYnV0ZS5nZW9tVHlwZSA9ICdMaW5lU3RyaW5nJztcbiAgICB9IGVsc2UgaWYgKC9eZ21sOlBvbHlnb258XmdtbDpTdXJmYWNlLy5leGVjKHR5cGUpKSB7XG4gICAgICBhdHRyaWJ1dGUuZ2VvbVR5cGUgPSAnUG9seWdvbic7XG4gICAgfSBlbHNlIGlmICgvXmdtbDpNdWx0aVBvaW50Ly5leGVjKHR5cGUpKSB7XG4gICAgICBhdHRyaWJ1dGUuZ2VvbVR5cGUgPSAnTXVsdGlQb2ludCc7XG4gICAgfSBlbHNlIGlmICgvXmdtbDpNdWx0aUxpbmVTdHJpbmd8XmdtbDpNdWx0aUN1cnZlLy5leGVjKHR5cGUpKSB7XG4gICAgICBhdHRyaWJ1dGUuZ2VvbVR5cGUgPSAnTXVsdGlMaW5lU3RyaW5nJztcbiAgICB9IGVsc2UgaWYgKC9eZ21sOk11bHRpUG9seWdvbnxeZ21sOk11bHRpU3VyZmFjZS8uZXhlYyh0eXBlKSkge1xuICAgICAgYXR0cmlidXRlLmdlb21UeXBlID0gJ011bHRpUG9seWdvbic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICEhYXR0cmlidXRlLnR5cGUgJiYgISFhdHRyaWJ1dGUuZ2VvbVR5cGU7XG59XG5leHBvcnQgZGVmYXVsdCBudWxsOyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQk9PTEVBTjogJ2Jvb2xlYW4nLFxuICBEQVRFOiAnZGF0ZScsXG4gIERBVEVUSU1FOiAnZGF0ZXRpbWUnLFxuICBUSU1FOiAndGltZScsXG4gIEdFT01FVFJZOiAnZ2VvbWV0cnknLFxuICBOVU1CRVI6ICdudW1iZXInLFxuICBTRUxFQ1Q6ICdzZWxlY3QnLFxuICBURVhUOiAndGV4dCdcbn07IiwiZXhwb3J0IGRlZmF1bHQge1xuICBBTkdMRTogJ2EnLFxuICBDT0xPUjogJ2MnLFxuICBJU19DSVJDTEU6ICdsJyxcbiAgSVNfUkVDVEFOR0xFOiAncicsXG4gIElTX1RFWFQ6ICd0JyxcbiAgTkFNRTogJ24nLFxuICBTSE9XX0xBQkVMOiAnYicsXG4gIE9QQUNJVFk6ICdvJyxcbiAgQVpJTVVUOiAneicsXG4gIFNIT1dfTUVBU1VSRTogJ20nLFxuICBTSVpFOiAncycsXG4gIFNUUk9LRTogJ2snLFxuICBBUlJPV19ESVJFQ1RJT046ICdkJyxcbiAgQVJST1dfUE9TSVRJT046ICdwJ1xufTsiLCJpbXBvcnQgeyBzZXRHZW9tZXRyeVR5cGUgfSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGUuanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlIGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZVR5cGUuanMnO1xuaW1wb3J0IHsgRm9ybWF0TnVtYmVyVHlwZSB9IGZyb20gJ25nZW8vZm9ybWF0L1hTREF0dHJpYnV0ZS5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX2RlZmF1bHQoKSB7fVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnJlYWQgPSBmdW5jdGlvbiByZWFkKGNvbXBsZXhUeXBlRWxlbWVudHMpIHtcbiAgICByZXR1cm4gY29tcGxleFR5cGVFbGVtZW50cy5tYXAodGhpcy5yZWFkRnJvbUNvbXBsZXhUeXBlRWxlbWVudF8pO1xuICB9O1xuXG4gIF9wcm90by5yZWFkRnJvbUNvbXBsZXhUeXBlRWxlbWVudF8gPSBmdW5jdGlvbiByZWFkRnJvbUNvbXBsZXhUeXBlRWxlbWVudF8ob2JqZWN0KSB7XG4gICAgdmFyIG5hbWUgPSBvYmplY3QubmFtZTtcbiAgICB2YXIgYWxpYXMgPSBvYmplY3QuYWxpYXMgfHwgbnVsbDtcbiAgICB2YXIgcmVxdWlyZWQgPSBvYmplY3QubWluT2NjdXJzICE9ICcwJztcbiAgICB2YXIgYXR0cmlidXRlID0ge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGFsaWFzOiBhbGlhcyxcbiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZFxuICAgIH07XG4gICAgdmFyIHR5cGUgPSBvYmplY3QudHlwZTtcblxuICAgIGlmICghc2V0R2VvbWV0cnlUeXBlKGF0dHJpYnV0ZSwgdHlwZSkpIHtcbiAgICAgIGlmICh0eXBlID09PSAnZ21sOlRpbWVJbnN0YW50VHlwZScgfHwgdHlwZSA9PT0gJ2RhdGVUaW1lJykge1xuICAgICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEVUSU1FO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5EQVRFO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndGltZScpIHtcbiAgICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5USU1FO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZGVjaW1hbCcgfHwgdHlwZSA9PT0gJ2RvdWJsZScpIHtcbiAgICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5OVU1CRVI7XG4gICAgICAgIGF0dHJpYnV0ZS5udW1UeXBlID0gRm9ybWF0TnVtYmVyVHlwZS5GTE9BVDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2ludGVnZXInIHx8IHR5cGUgPT09ICdsb25nJykge1xuICAgICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLk5VTUJFUjtcbiAgICAgICAgYXR0cmlidXRlLm51bVR5cGUgPSBGb3JtYXROdW1iZXJUeXBlLklOVEVHRVI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdib29sZWFuJykge1xuICAgICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkJPT0xFQU47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLlRFWFQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KCk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHsgc2V0R2VvbWV0cnlUeXBlIH0gZnJvbSAnbmdlby9mb3JtYXQvQXR0cmlidXRlLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmltcG9ydCBvbEZvcm1hdFhNTCBmcm9tICdvbC9mb3JtYXQvWE1MLmpzJztcbmV4cG9ydCB2YXIgRm9ybWF0TnVtYmVyVHlwZSA9IHtcbiAgRkxPQVQ6ICdmbG9hdCcsXG4gIElOVEVHRVI6ICdpbnRlZ2VyJ1xufTtcblxudmFyIFhTREF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChfb2xGb3JtYXRYTUwpIHtcbiAgX2luaGVyaXRzTG9vc2UoWFNEQXR0cmlidXRlLCBfb2xGb3JtYXRYTUwpO1xuXG4gIGZ1bmN0aW9uIFhTREF0dHJpYnV0ZSgpIHtcbiAgICByZXR1cm4gX29sRm9ybWF0WE1MLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBYU0RBdHRyaWJ1dGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5yZWFkID0gZnVuY3Rpb24gcmVhZChzb3VyY2UpIHtcbiAgICByZXR1cm4gb2xGb3JtYXRYTUwucHJvdG90eXBlLnJlYWQuY2FsbCh0aGlzLCBzb3VyY2UpO1xuICB9O1xuXG4gIF9wcm90by5yZWFkRnJvbURvY3VtZW50ID0gZnVuY3Rpb24gcmVhZEZyb21Eb2N1bWVudChkb2MpIHtcbiAgICBjb25zb2xlLmFzc2VydChkb2Mubm9kZVR5cGUgPT0gTm9kZS5ET0NVTUVOVF9OT0RFLCAnZG9jLm5vZGVUeXBlIHNob3VsZCBiZSBET0NVTUVOVCcpO1xuICAgIHZhciBuO1xuXG4gICAgZm9yIChuID0gZG9jLmZpcnN0Q2hpbGQ7IG47IG4gPSBuLm5leHRTaWJsaW5nKSB7XG4gICAgICBpZiAobi5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBpZiAoIShuIGluc3RhbmNlb2YgRWxlbWVudCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHR5cGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRGcm9tTm9kZShuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBfcHJvdG8ucmVhZEZyb21Ob2RlID0gZnVuY3Rpb24gcmVhZEZyb21Ob2RlKG5vZGUpIHtcbiAgICBjb25zb2xlLmFzc2VydChub2RlLmxvY2FsTmFtZSA9PSAnc2NoZW1hJywgJ2xvY2FsTmFtZSBzaG91bGQgYmUgc2NoZW1hJyk7XG4gICAgdmFyIGVsZW1lbnRzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZWxlbWVudCcpO1xuXG4gICAgaWYgKCFlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIGVsZW1lbnRzID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneHNkOmVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICB2YXIgYXR0cmlidXRlcyA9IFtdO1xuICAgIHZhciBhdHRyaWJ1dGU7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBhdHRyaWJ1dGUgPSB0aGlzLnJlYWRGcm9tRWxlbWVudE5vZGVfKGVsZW1lbnRzW2ldKTtcblxuICAgICAgaWYgKGF0dHJpYnV0ZSkge1xuICAgICAgICBhdHRyaWJ1dGVzLnB1c2goYXR0cmlidXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgfTtcblxuICBfcHJvdG8ucmVhZEZyb21FbGVtZW50Tm9kZV8gPSBmdW5jdGlvbiByZWFkRnJvbUVsZW1lbnROb2RlXyhub2RlKSB7XG4gICAgY29uc29sZS5hc3NlcnQobm9kZS5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSwgJ25vZGUubm9kZVR5cGUgc2hvdWxkIGJlIEVMRU1FTlQnKTtcbiAgICB2YXIgZWxlbWVudE5vZGUgPSBub2RlO1xuICAgIHZhciBuYW1lID0gZWxlbWVudE5vZGUuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbmFtZSBzaG91bGQgYmUgZGVmaW5lZCBpbiBlbGVtZW50IG5vZGUnKTtcbiAgICB9XG5cbiAgICB2YXIgYWxpYXMgPSBlbGVtZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2FsaWFzJyk7XG4gICAgdmFyIG5pbGxhYmxlID0gZWxlbWVudE5vZGUuZ2V0QXR0cmlidXRlKCduaWxsYWJsZScpO1xuICAgIHZhciByZXF1aXJlZCA9IG5pbGxhYmxlICE9PSAndHJ1ZSc7XG4gICAgdmFyIHJlYWRvbmx5RWxzID0gZWxlbWVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3JlYWRvbmx5Jyk7XG4gICAgdmFyIHJlYWRvbmx5ID0gcmVhZG9ubHlFbHNbMF0gPyByZWFkb25seUVsc1swXS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPT09ICd0cnVlJyA6IGZhbHNlO1xuICAgIHZhciBhdHRyaWJ1dGUgPSB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcmVhZG9ubHk6IHJlYWRvbmx5LFxuICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkXG4gICAgfTtcblxuICAgIGlmIChhbGlhcykge1xuICAgICAgYXR0cmlidXRlLmFsaWFzID0gYWxpYXM7XG4gICAgfVxuXG4gICAgdmFyIHR5cGUgPSBlbGVtZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcblxuICAgIGlmICh0eXBlKSB7XG4gICAgICBpZiAoIXNldEdlb21ldHJ5VHlwZShhdHRyaWJ1dGUsIHR5cGUpKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlQnlYc2RUeXBlXyhhdHRyaWJ1dGUsIHR5cGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZW51bWVyYXRpb25zID0gZWxlbWVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2VudW1lcmF0aW9uJyk7XG5cbiAgICAgIGlmICghZW51bWVyYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBlbnVtZXJhdGlvbnMgPSBlbGVtZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneHNkOmVudW1lcmF0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnVtZXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuU0VMRUNUO1xuICAgICAgICB2YXIgY2hvaWNlcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVudW1lcmF0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gZW51bWVyYXRpb25zW2ldLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcblxuICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2YWx1ZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNob2ljZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGUuY2hvaWNlcyA9IGNob2ljZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdHJpY3Rpb25zID0gZWxlbWVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3Jlc3RyaWN0aW9uJyk7XG5cbiAgICAgICAgaWYgKCFyZXN0cmljdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmVzdHJpY3Rpb25zID0gZWxlbWVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3hzZDpyZXN0cmljdGlvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3RyaWN0aW9ucy5sZW5ndGggJiYgcmVzdHJpY3Rpb25zWzBdKSB7XG4gICAgICAgICAgdmFyIHJlc3RyaWN0aW9uTm9kZSA9IHJlc3RyaWN0aW9uc1swXTtcbiAgICAgICAgICB2YXIgYmFzZSA9IHJlc3RyaWN0aW9uTm9kZS5nZXRBdHRyaWJ1dGUoJ2Jhc2UnKTtcblxuICAgICAgICAgIGlmICghYmFzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGJhc2UnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZUJ5WHNkVHlwZV8oYXR0cmlidXRlLCBiYXNlKTtcbiAgICAgICAgICB2YXIgbWF4TGVuZ3RocyA9IGVsZW1lbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtYXhMZW5ndGgnKTtcblxuICAgICAgICAgIGlmICghbWF4TGVuZ3Rocy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1heExlbmd0aHMgPSBlbGVtZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneHNkOm1heExlbmd0aCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChtYXhMZW5ndGhzLmxlbmd0aCAmJiBtYXhMZW5ndGhzWzBdKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGUubWF4TGVuZ3RoID0gTnVtYmVyKG1heExlbmd0aHNbMF0uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWF0dHJpYnV0ZS50eXBlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmFzc2VydChhdHRyaWJ1dGUudHlwZSk7XG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgfTtcblxuICBfcHJvdG8uc2V0QXR0cmlidXRlQnlYc2RUeXBlXyA9IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZUJ5WHNkVHlwZV8oYXR0cmlidXRlLCB0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT09ICd4c2Q6Ym9vbGVhbicpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuQk9PTEVBTjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd4c2Q6ZGF0ZScpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuREFURTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd4c2Q6ZGF0ZVRpbWUnKSB7XG4gICAgICBhdHRyaWJ1dGUudHlwZSA9IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEVUSU1FO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3hzZDp0aW1lJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5USU1FO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3hzZDpkZWNpbWFsJyB8fCB0eXBlID09PSAneHNkOmRvdWJsZScpIHtcbiAgICAgIGF0dHJpYnV0ZS50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuTlVNQkVSO1xuICAgICAgYXR0cmlidXRlLm51bVR5cGUgPSBGb3JtYXROdW1iZXJUeXBlLkZMT0FUO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3hzZDppbnRlZ2VyJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5OVU1CRVI7XG4gICAgICBhdHRyaWJ1dGUubnVtVHlwZSA9IEZvcm1hdE51bWJlclR5cGUuSU5URUdFUjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd4c2Q6c3RyaW5nJykge1xuICAgICAgYXR0cmlidXRlLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5URVhUO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gWFNEQXR0cmlidXRlO1xufShvbEZvcm1hdFhNTCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHZW9tZXRyeUF0dHJpYnV0ZShhdHRyaWJ1dGVzKSB7XG4gIHZhciBnZW9tQXR0cmlidXRlID0gbnVsbDtcblxuICBmb3IgKHZhciBpID0gMCwgaWkgPSBhdHRyaWJ1dGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICBpZiAoYXR0cmlidXRlc1tpXS50eXBlID09PSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5HRU9NRVRSWSkge1xuICAgICAgZ2VvbUF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2VvbUF0dHJpYnV0ZTtcbn1cbmV4cG9ydCBkZWZhdWx0IFhTREF0dHJpYnV0ZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IG9sRm9ybWF0RmlsdGVyQ29tcGFyaXNvbiBmcm9tICdvbC9mb3JtYXQvZmlsdGVyL0NvbXBhcmlzb24uanMnO1xuXG52YXIgRGF0ZUlzQmV0d2VlbiA9IGZ1bmN0aW9uIChfb2xGb3JtYXRGaWx0ZXJDb21wYXIpIHtcbiAgX2luaGVyaXRzTG9vc2UoRGF0ZUlzQmV0d2VlbiwgX29sRm9ybWF0RmlsdGVyQ29tcGFyKTtcblxuICBmdW5jdGlvbiBEYXRlSXNCZXR3ZWVuKHByb3BlcnR5TmFtZSwgbG93ZXJCb3VuZGFyeSwgdXBwZXJCb3VuZGFyeSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sRm9ybWF0RmlsdGVyQ29tcGFyLmNhbGwodGhpcywgJ1Byb3BlcnR5SXNCZXR3ZWVuJywgcHJvcGVydHlOYW1lKSB8fCB0aGlzO1xuICAgIF90aGlzLmxvd2VyQm91bmRhcnkgPSBsb3dlckJvdW5kYXJ5O1xuICAgIF90aGlzLnVwcGVyQm91bmRhcnkgPSB1cHBlckJvdW5kYXJ5O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBEYXRlSXNCZXR3ZWVuO1xufShvbEZvcm1hdEZpbHRlckNvbXBhcmlzb24pO1xuXG5leHBvcnQgZnVuY3Rpb24gZGF0ZUJldHdlZW4ocHJvcGVydHlOYW1lLCBsb3dlckJvdW5kYXJ5LCB1cHBlckJvdW5kYXJ5KSB7XG4gIHJldHVybiBuZXcgRGF0ZUlzQmV0d2Vlbihwcm9wZXJ0eU5hbWUsIGxvd2VyQm91bmRhcnksIHVwcGVyQm91bmRhcnkpO1xufSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxkaXZcXG4gIGNsYXNzPVwibmdlby1nb29nbGVzdHJlZXR2aWV3LWluc3RydWN0aW9uc1wiXFxuICBuZy1pZj1cIiRjdHJsLmxvY2F0aW9uID09PSBudWxsXCJcXG4gIHRyYW5zbGF0ZT5cXG4gIENsaWNrIG9uIGEgcm9hZCBvbiB0aGUgbWFwIHRvIHN0YXJ0IFN0cmVldFZpZXcuXFxuPC9kaXY+XFxuPGRpdlxcbiAgY2xhc3M9XCJuZ2VvLWdvb2dsZXN0cmVldHZpZXctbm9kYXRhXCJcXG4gIG5nLWlmPVwiJGN0cmwubm9EYXRhQXRMb2NhdGlvblwiXFxuICB0cmFuc2xhdGU+XFxuICBTdHJlZXQgVmlldyBkYXRhIG5vdCBmb3VuZCBmb3IgdGhpcyBsb2NhdGlvbi5cXG48L2Rpdj5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01hcEZlYXR1cmVPdmVybGF5TWdyIGZyb20gJ25nZW8vbWFwL0ZlYXR1cmVPdmVybGF5TWdyLmpzJztcbmltcG9ydCAqIGFzIG9sQXJyYXkgZnJvbSAnb2wvYXJyYXkuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCAqIGFzIG9sUHJvaiBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJ29sL01hcEJyb3dzZXJFdmVudC5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Hb29nbGVzdHJlZXR2aWV3JywgW25nZW9NYXBGZWF0dXJlT3ZlcmxheU1nci5uYW1lXSk7XG5tb2R1bGUudmFsdWUoJ25nZW9Hb29nbGVzdHJlZXR2aWV3VGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9ICRhdHRycy5uZ2VvR29vZ2xlc3RyZWV0dmlld1RlbXBsYXRlVXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ25nZW8vZ29vZ2xlc3RyZWV0dmlldyc7XG59KTtcbm1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmdlby9nb29nbGVzdHJlZXR2aWV3JywgcmVxdWlyZSgnLi9jb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcbm5nZW9Hb29nbGVzdHJlZXR2aWV3VGVtcGxhdGVVcmwuJGluamVjdCA9IFtcIiRhdHRyc1wiLCBcIm5nZW9Hb29nbGVzdHJlZXR2aWV3VGVtcGxhdGVVcmxcIl07XG5cbmZ1bmN0aW9uIG5nZW9Hb29nbGVzdHJlZXR2aWV3VGVtcGxhdGVVcmwoJGF0dHJzLCBuZ2VvR29vZ2xlc3RyZWV0dmlld1RlbXBsYXRlVXJsKSB7XG4gIHJldHVybiBuZ2VvR29vZ2xlc3RyZWV0dmlld1RlbXBsYXRlVXJsKCRhdHRycyk7XG59XG5cbnZhciBHb29nbGVTdHJlZXR2aWV3Q29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgR29vZ2xlU3RyZWV0dmlld0NvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRlbGVtZW50XCIsIFwiJHNjb3BlXCIsIFwibmdlb0ZlYXR1cmVPdmVybGF5TWdyXCJdO1xuXG4gIGZ1bmN0aW9uIEdvb2dsZVN0cmVldHZpZXdDb250cm9sbGVyKCRlbGVtZW50LCAkc2NvcGUsIG5nZW9GZWF0dXJlT3ZlcmxheU1ncikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmFjdGl2ZTtcbiAgICB9LCB0aGlzLmhhbmRsZUFjdGl2ZUNoYW5nZV8uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5mZWF0dXJlU3R5bGUgPSBudWxsO1xuICAgIHRoaXMubWFwID0gbnVsbDtcbiAgICB0aGlzLnJhZGl1cztcbiAgICB0aGlzLnNjb3BlXyA9ICRzY29wZTtcbiAgICB0aGlzLmZlYXR1cmVfID0gbmV3IG9sRmVhdHVyZSgpO1xuICAgIHRoaXMuZmVhdHVyZU92ZXJsYXlfID0gbmdlb0ZlYXR1cmVPdmVybGF5TWdyLmdldEZlYXR1cmVPdmVybGF5KCk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0gW107XG4gICAgdGhpcy5sb2NhdGlvbiA9IG51bGw7XG4gICAgdGhpcy5ub0RhdGFBdExvY2F0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5wYW5vcmFtYV8gPSBuZXcgZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1Bhbm9yYW1hKCRlbGVtZW50WzBdLCB7XG4gICAgICBwb3Y6IHtcbiAgICAgICAgaGVhZGluZzogMCxcbiAgICAgICAgcGl0Y2g6IDBcbiAgICAgIH0sXG4gICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgIHpvb206IDFcbiAgICB9KTtcbiAgICB0aGlzLnBhbm9yYW1hTGlzdGVuZXJfID0gbnVsbDtcbiAgICB0aGlzLnBvaW50XyA9IG5ldyBvbEdlb21Qb2ludChbMCwgMF0pO1xuICAgIHRoaXMuZmVhdHVyZV8uc2V0R2VvbWV0cnkodGhpcy5wb2ludF8pO1xuICAgIHRoaXMuc3RyZWV0Vmlld1NlcnZpY2VfID0gbmV3IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdTZXJ2aWNlKCk7XG4gICAgdGhpcy5wYW5vcmFtYVBvc2l0aW9uQ2hhbmdpbmdfID0gZmFsc2U7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gR29vZ2xlU3RyZWV0dmlld0NvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by4kb25Jbml0ID0gZnVuY3Rpb24gJG9uSW5pdCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMyLmxvY2F0aW9uO1xuICAgIH0sIHRoaXMuaGFuZGxlTG9jYXRpb25DaGFuZ2VfLmJpbmQodGhpcykpO1xuICAgIHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNBY3RpdmUgPSBfdGhpczIuYWN0aXZlO1xuICAgICAgdmFyIGhhc0xvY2F0aW9uID0gX3RoaXMyLmxvY2F0aW9uICE9PSBudWxsO1xuICAgICAgcmV0dXJuIGlzQWN0aXZlICYmIGhhc0xvY2F0aW9uO1xuICAgIH0sIHRoaXMuaGFuZGxlUmVhZHlDaGFuZ2VfLmJpbmQodGhpcykpO1xuICAgIHRoaXMuc2NvcGVfLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNBY3RpdmUgPSBfdGhpczIuYWN0aXZlO1xuICAgICAgdmFyIGhhc0xvY2F0aW9uID0gX3RoaXMyLmxvY2F0aW9uICE9PSBudWxsO1xuICAgICAgdmFyIGhhc0RhdGEgPSBfdGhpczIubm9EYXRhQXRMb2NhdGlvbiA9PT0gZmFsc2U7XG4gICAgICByZXR1cm4gaXNBY3RpdmUgJiYgaGFzTG9jYXRpb24gJiYgaGFzRGF0YTtcbiAgICB9LCBmdW5jdGlvbiAoc2hvdywgb2xkU2hvdykge1xuICAgICAgaWYgKHNob3cgPT09IG9sZFNob3cpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpczIucGFub3JhbWFfLnNldFZpc2libGUoc2hvdyk7XG5cbiAgICAgIGlmIChzaG93KSB7XG4gICAgICAgIF90aGlzMi5wYW5vcmFtYUxpc3RlbmVyXyA9IGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKF90aGlzMi5wYW5vcmFtYV8sICdwb3NpdGlvbl9jaGFuZ2VkJywgX3RoaXMyLmhhbmRsZVBhbm9yYW1hUG9zaXRpb25DaGFuZ2VfLmJpbmQoX3RoaXMyKSk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzMi5wYW5vcmFtYUxpc3RlbmVyXykge1xuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5yZW1vdmVMaXN0ZW5lcihfdGhpczIucGFub3JhbWFMaXN0ZW5lcl8pO1xuICAgICAgICBfdGhpczIucGFub3JhbWFMaXN0ZW5lcl8gPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuZmVhdHVyZVN0eWxlKSB7XG4gICAgICB0aGlzLmZlYXR1cmVfLnNldFN0eWxlKHRoaXMuZmVhdHVyZVN0eWxlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUFjdGl2ZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVBY3RpdmVDaGFuZ2VfKGFjdGl2ZSkge1xuICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtYXAnKTtcbiAgICB9XG5cbiAgICB2YXIga2V5cyA9IHRoaXMubGlzdGVuZXJLZXlzXztcblxuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIGtleXMucHVzaChsaXN0ZW4odGhpcy5tYXAsICdjbGljaycsIHRoaXMuaGFuZGxlTWFwQ2xpY2tfLCB0aGlzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleXMuZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIGtleXMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUxvY2F0aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUxvY2F0aW9uQ2hhbmdlXyhsb2NhdGlvbiwgb2xkTG9jYXRpb24pIHtcbiAgICBpZiAobG9jYXRpb24gPT09IG9sZExvY2F0aW9uIHx8IEFycmF5LmlzQXJyYXkobG9jYXRpb24pICYmIEFycmF5LmlzQXJyYXkob2xkTG9jYXRpb24pICYmIG9sQXJyYXkuZXF1YWxzKGxvY2F0aW9uLCBvbGRMb2NhdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBvaW50Xy5zZXRDb29yZGluYXRlcyhsb2NhdGlvbik7XG5cbiAgICBpZiAobG9jYXRpb24gJiYgIXRoaXMucGFub3JhbWFQb3NpdGlvbkNoYW5naW5nXykge1xuICAgICAgdmFyIGxvbkxhdCA9IHRoaXMudG9Mb25MYXRfKGxvY2F0aW9uKTtcbiAgICAgIHRoaXMuc3RyZWV0Vmlld1NlcnZpY2VfLmdldFBhbm9yYW1hKHtcbiAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICBsYXQ6IGxvbkxhdFsxXSxcbiAgICAgICAgICBsbmc6IGxvbkxhdFswXVxuICAgICAgICB9LFxuICAgICAgICByYWRpdXM6IHRoaXMucmFkaXVzXG4gICAgICB9LCB0aGlzLmhhbmRsZVN0cmVldFZpZXdTZXJ2aWNlR2V0UGFub3JhbWFfLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWFwQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2tfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBNYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgIHRoaXMubG9jYXRpb24gPSBldnQuY29vcmRpbmF0ZTtcbiAgICAgIHRoaXMuc2NvcGVfLiRhcHBseSgpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlUmVhZHlDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlUmVhZHlDaGFuZ2VfKHJlYWR5LCBvbGRSZWFkeSkge1xuICAgIGlmIChyZWFkeSA9PT0gb2xkUmVhZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocmVhZHkpIHtcbiAgICAgIHRoaXMuZmVhdHVyZU92ZXJsYXlfLmFkZEZlYXR1cmUodGhpcy5mZWF0dXJlXyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmVhdHVyZU92ZXJsYXlfLnJlbW92ZUZlYXR1cmUodGhpcy5mZWF0dXJlXyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVTdHJlZXRWaWV3U2VydmljZUdldFBhbm9yYW1hXyA9IGZ1bmN0aW9uIGhhbmRsZVN0cmVldFZpZXdTZXJ2aWNlR2V0UGFub3JhbWFfKGRhdGEsIHN0YXR1cykge1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghZGF0YS5sb2NhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGEubG9jYXRpb24nKTtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGEubG9jYXRpb24ubGF0TG5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YS5sb2NhdGlvbi5sYXRMbmcnKTtcbiAgICB9XG5cbiAgICB2YXIgcGFub3JhbWEgPSB0aGlzLnBhbm9yYW1hXztcblxuICAgIGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdTdGF0dXMuT0spIHtcbiAgICAgIHRoaXMubm9EYXRhQXRMb2NhdGlvbiA9IGZhbHNlO1xuICAgICAgcGFub3JhbWEuc2V0UG9zaXRpb24oZGF0YS5sb2NhdGlvbi5sYXRMbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5vRGF0YUF0TG9jYXRpb24gPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuc2NvcGVfLiRhcHBseSgpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVQYW5vcmFtYVBvc2l0aW9uQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVBhbm9yYW1hUG9zaXRpb25DaGFuZ2VfKCkge1xuICAgIHRoaXMucGFub3JhbWFQb3NpdGlvbkNoYW5naW5nXyA9IHRydWU7XG4gICAgdmFyIHBvc2l0aW9uID0gdGhpcy5wYW5vcmFtYV8uZ2V0UG9zaXRpb24oKTtcbiAgICB2YXIgbG9uTGF0ID0gW3Bvc2l0aW9uLmxuZygpLCBwb3NpdGlvbi5sYXQoKV07XG4gICAgdmFyIGxvY2F0aW9uID0gdGhpcy5mcm9tTG9uTGF0Xyhsb25MYXQpO1xuICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICB0aGlzLnNjb3BlXy4kYXBwbHkoKTtcbiAgICB0aGlzLnBhbm9yYW1hUG9zaXRpb25DaGFuZ2luZ18gPSBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8uZnJvbUxvbkxhdF8gPSBmdW5jdGlvbiBmcm9tTG9uTGF0Xyhsb25MYXQpIHtcbiAgICBpZiAoIXRoaXMubWFwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9sUHJvai5mcm9tTG9uTGF0KGxvbkxhdCwgdGhpcy5tYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gIH07XG5cbiAgX3Byb3RvLnRvTG9uTGF0XyA9IGZ1bmN0aW9uIHRvTG9uTGF0Xyhjb29yZGluYXRlKSB7XG4gICAgaWYgKCF0aGlzLm1hcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcCcpO1xuICAgIH1cblxuICAgIHJldHVybiBvbFByb2oudG9Mb25MYXQoY29vcmRpbmF0ZSwgdGhpcy5tYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gIH07XG5cbiAgcmV0dXJuIEdvb2dsZVN0cmVldHZpZXdDb250cm9sbGVyO1xufSgpO1xuXG5tb2R1bGUuY29tcG9uZW50KCduZ2VvR29vZ2xlc3RyZWV0dmlldycsIHtcbiAgYmluZGluZ3M6IHtcbiAgICAnYWN0aXZlJzogJzwnLFxuICAgICdmZWF0dXJlU3R5bGUnOiAnPD8nLFxuICAgICdtYXAnOiAnPCcsXG4gICAgJ3JhZGl1cyc6ICc8PydcbiAgfSxcbiAgY29udHJvbGxlcjogR29vZ2xlU3RyZWV0dmlld0NvbnRyb2xsZXIsXG4gIHRlbXBsYXRlVXJsOiBuZ2VvR29vZ2xlc3RyZWV0dmlld1RlbXBsYXRlVXJsXG59KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvR29vZ2xlc3RyZWV0dmlld0NvbXBvbmVudCBmcm9tICduZ2VvL2dvb2dsZXN0cmVldHZpZXcvY29tcG9uZW50LmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvR29vZ2xlc3RyZWV0dmlld01vZHVsZScsIFtuZ2VvR29vZ2xlc3RyZWV0dmlld0NvbXBvbmVudC5uYW1lXSk7IiwiaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuXG5mdW5jdGlvbiBHcmlkQ29uZmlnKGRhdGEsIGNvbHVtbkRlZnMpIHtcbiAgdGhpcy5kYXRhID0gZGF0YTtcbiAgdGhpcy5jb2x1bW5EZWZzID0gY29sdW1uRGVmcztcbiAgdGhpcy5zZWxlY3RlZFJvd3MgPSB7fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvd1VpZChhdHRyaWJ1dGVzKSB7XG4gIHJldHVybiBcIlwiICsgb2xVdGlsR2V0VWlkKGF0dHJpYnV0ZXMpO1xufVxuXG5HcmlkQ29uZmlnLnByb3RvdHlwZS5pc1Jvd1NlbGVjdGVkID0gZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgcmV0dXJuICEhdGhpcy5zZWxlY3RlZFJvd3NbZ2V0Um93VWlkKGF0dHJpYnV0ZXMpXTtcbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLmdldFNlbGVjdGVkQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnNlbGVjdGVkUm93cykubGVuZ3RoO1xufTtcblxuR3JpZENvbmZpZy5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRSb3dzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmICghdGhpcy5kYXRhKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRhdGEnKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChyb3cpIHtcbiAgICByZXR1cm4gX3RoaXMuaXNSb3dTZWxlY3RlZChyb3cpO1xuICB9KTtcbn07XG5cbkdyaWRDb25maWcucHJvdG90eXBlLnNlbGVjdFJvdyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XG4gIHZhciB1aWQgPSBnZXRSb3dVaWQoYXR0cmlidXRlcyk7XG4gIHRoaXMuc2VsZWN0ZWRSb3dzW3VpZF0gPSBhdHRyaWJ1dGVzO1xufTtcblxuR3JpZENvbmZpZy5wcm90b3R5cGUudG9nZ2xlUm93ID0gZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgdmFyIHVpZCA9IGdldFJvd1VpZChhdHRyaWJ1dGVzKTtcbiAgdmFyIGlzU2VsZWN0ZWQgPSB0aGlzLmlzUm93U2VsZWN0ZWQoYXR0cmlidXRlcyk7XG5cbiAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICBkZWxldGUgdGhpcy5zZWxlY3RlZFJvd3NbdWlkXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnNlbGVjdGVkUm93c1t1aWRdID0gYXR0cmlidXRlcztcbiAgfVxufTtcblxuR3JpZENvbmZpZy5wcm90b3R5cGUuc2VsZWN0QWxsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICBpZiAoIXRoaXMuZGF0YSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhJyk7XG4gIH1cblxuICB0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgIF90aGlzMi5zZWxlY3RSb3coYXR0cmlidXRlcyk7XG4gIH0pO1xufTtcblxuR3JpZENvbmZpZy5wcm90b3R5cGUudW5zZWxlY3RBbGwgPSBmdW5jdGlvbiAoKSB7XG4gIGZvciAodmFyIHJvd0lkIGluIHRoaXMuc2VsZWN0ZWRSb3dzKSB7XG4gICAgZGVsZXRlIHRoaXMuc2VsZWN0ZWRSb3dzW3Jvd0lkXTtcbiAgfVxufTtcblxuR3JpZENvbmZpZy5wcm90b3R5cGUuaW52ZXJ0U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMzID0gdGhpcztcblxuICBpZiAoIXRoaXMuZGF0YSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhJyk7XG4gIH1cblxuICB0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICAgIF90aGlzMy50b2dnbGVSb3coYXR0cmlidXRlcyk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JpZENvbmZpZzsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8ZGl2IGNsYXNzPVwibmdlby1ncmlkLXRhYmxlLWNvbnRhaW5lclwiPlxcbiAgPHRhYmxlIGZsb2F0LXRoZWFkPVwiJGN0cmwuZmxvYXRUaGVhZENvbmZpZ1wiIG5nLW1vZGVsPVwiJGN0cmwuY29uZmlndXJhdGlvbi5kYXRhXCJcXG4gICAgICAgICBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkIHRhYmxlLXN0cmlwZWQgdGFibGUtaG92ZXJcIj5cXG4gICAgPHRoZWFkIGNsYXNzPVwidGFibGUtaGVhZGVyXCI+XFxuICAgICAgPHRyPlxcbiAgICAgICAgPHRoIG5nLXJlcGVhdD1cImNvbHVtbkRlZnMgaW4gJGN0cmwuY29uZmlndXJhdGlvbi5jb2x1bW5EZWZzXCJcXG4gICAgICAgICAgICBuZy1jbGljaz1cIiRjdHJsLnNvcnQoY29sdW1uRGVmcy5uYW1lKVwiIG5nLWJpbmQtaHRtbD1cImNvbHVtbkRlZnMubmFtZSB8IG5nZW9UcnVzdEh0bWwgfCB0cmFuc2xhdGVcIj5cXG4gICAgICAgICAgPGkgbmctc2hvdz1cIiRjdHJsLnNvcnRlZEJ5ICE9PSBjb2x1bW5EZWZzLm5hbWVcIiBjbGFzcz1cImZhIGZhLWZ3XCI+PC9pPlxcbiAgICAgICAgICA8aSBuZy1zaG93PVwiJGN0cmwuc29ydGVkQnkgPT09IGNvbHVtbkRlZnMubmFtZSAmJiAkY3RybC5zb3J0QXNjZW5kaW5nID09PSB0cnVlXCIgY2xhc3M9XCJmYSBmYS1jYXJldC11cFwiPjwvaT5cXG4gICAgICAgICAgPGkgbmctc2hvdz1cIiRjdHJsLnNvcnRlZEJ5ID09PSBjb2x1bW5EZWZzLm5hbWUgJiYgJGN0cmwuc29ydEFzY2VuZGluZyA9PT0gZmFsc2VcIiBjbGFzcz1cImZhIGZhLWNhcmV0LWRvd25cIj48L2k+XFxuICAgICAgICA8L3RoPlxcbiAgICAgIDwvdHI+XFxuICAgIDwvdGhlYWQ+XFxuICAgIDx0Ym9keT5cXG4gICAgICA8dHIgbmctcmVwZWF0PVwiYXR0cmlidXRlcyBpbiAkY3RybC5jb25maWd1cmF0aW9uLmRhdGFcIlxcbiAgICAgICAgICBuZy1jbGFzcz1cIltcXCdyb3ctXFwnICsgJGN0cmwuY29uZmlndXJhdGlvbi5nZXRSb3dVaWQoYXR0cmlidXRlcyksICRjdHJsLmNvbmZpZ3VyYXRpb24uaXNSb3dTZWxlY3RlZChhdHRyaWJ1dGVzKSA/IFxcJ25nZW8tZ3JpZC1hY3RpdmVcXCc6IFxcJ1xcJ11cIlxcbiAgICAgICAgICBuZy1jbGljaz1cIiRjdHJsLmNsaWNrUm93KGF0dHJpYnV0ZXMsICRldmVudClcIiBuZy1tb3VzZWRvd249XCIkY3RybC5wcmV2ZW50VGV4dFNlbGVjdGlvbigkZXZlbnQpXCI+XFxuICAgICAgICA8dGQgbmctcmVwZWF0PVwiY29sdW1uRGVmcyBpbiAkY3RybC5jb25maWd1cmF0aW9uLmNvbHVtbkRlZnNcIiBuZy1iaW5kLWh0bWw9XCJhdHRyaWJ1dGVzW2NvbHVtbkRlZnMubmFtZV0gfCByZW1vdmVDREFUQSB8IG5nZW9UcnVzdEh0bWxBdXRvXCI+PC90ZD5cXG4gICAgICA8L3RyPlxcbiAgICA8L3Rib2R5PlxcbiAgPC90YWJsZT5cXG48L2Rpdj5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiR3JpZENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybU1vZGlmaWVyS2V5T25seSwgaXNTaGlmdEtleU9ubHkgfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZpbHRlcnMgZnJvbSAnbmdlby9taXNjL2ZpbHRlcnMuanMnO1xuaW1wb3J0IHsgZ2V0Um93VWlkIH0gZnJvbSAnbmdlby9ncmlkL0NvbmZpZy5qcyc7XG5pbXBvcnQgJ2Zsb2F0dGhlYWQnO1xuaW1wb3J0ICdhbmd1bGFyLWZsb2F0LXRoZWFkJztcbmltcG9ydCAnbmdlby9zYXNzL2ZvbnQuc2Nzcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9HcmlkJywgW25nZW9NaXNjRmlsdGVycy5uYW1lLCAnZmxvYXRUaGVhZCddKTtcbm1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmdlby9ncmlkJywgcmVxdWlyZSgnLi9jb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcbm1vZHVsZS52YWx1ZSgnbmdlb0dyaWRUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uICgkYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gJGF0dHJzLm5nZW9HcmlkVGVtcGxhdGV1cmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9ncmlkJztcbn0pO1xubmdlb0dyaWRUZW1wbGF0ZVVybC4kaW5qZWN0ID0gW1wiJGF0dHJzXCIsIFwibmdlb0dyaWRUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gbmdlb0dyaWRUZW1wbGF0ZVVybCgkYXR0cnMsIG5nZW9HcmlkVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIG5nZW9HcmlkVGVtcGxhdGVVcmwoJGF0dHJzKTtcbn1cblxudmFyIGdyaWRDb21wb25lbnQgPSB7XG4gIGNvbnRyb2xsZXI6IEdyaWRDb250cm9sbGVyLFxuICBiaW5kaW5nczoge1xuICAgICdjb25maWd1cmF0aW9uJzogJz1uZ2VvR3JpZENvbmZpZ3VyYXRpb24nXG4gIH0sXG4gIHRlbXBsYXRlVXJsOiBuZ2VvR3JpZFRlbXBsYXRlVXJsXG59O1xubW9kdWxlLmNvbXBvbmVudCgnbmdlb0dyaWQnLCBncmlkQ29tcG9uZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBHcmlkQ29udHJvbGxlcigkc2NvcGUpIHtcbiAgdGhpcy5zY29wZV8gPSAkc2NvcGU7XG4gIHRoaXMuY29uZmlndXJhdGlvbiA9IG51bGw7XG4gIHRoaXMuc2VsZWN0ZWRSb3dzID0ge307XG4gIHRoaXMuc29ydGVkQnkgPSAnJztcbiAgdGhpcy5zb3J0QXNjZW5kaW5nID0gdHJ1ZTtcbiAgdGhpcy5mbG9hdFRoZWFkQ29uZmlnID0ge1xuICAgIHNjcm9sbENvbnRhaW5lcjogZnVuY3Rpb24gc2Nyb2xsQ29udGFpbmVyKCR0YWJsZSkge1xuICAgICAgcmV0dXJuICR0YWJsZS5jbG9zZXN0KCcubmdlby1ncmlkLXRhYmxlLWNvbnRhaW5lcicpO1xuICAgIH1cbiAgfTtcbn1cblxuR3JpZENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5jb25maWd1cmF0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZ3VyYXRpb24nKTtcbiAgfVxuXG4gIHRoaXMuc2VsZWN0ZWRSb3dzID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdGVkUm93cztcbn07XG5cbkdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKGNvbHVtbk5hbWUpIHtcbiAgaWYgKCF0aGlzLmNvbmZpZ3VyYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29uZmlndXJhdGlvbicpO1xuICB9XG5cbiAgaWYgKCF0aGlzLmNvbmZpZ3VyYXRpb24uZGF0YSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uLmRhdGEnKTtcbiAgfVxuXG4gIHRoaXMuc29ydEFzY2VuZGluZyA9IHRoaXMuc29ydGVkQnkgPT09IGNvbHVtbk5hbWUgPyAhdGhpcy5zb3J0QXNjZW5kaW5nIDogdHJ1ZTtcbiAgdGhpcy5zb3J0ZWRCeSA9IGNvbHVtbk5hbWU7XG4gIHZhciBhc2MgPSB0aGlzLnNvcnRBc2NlbmRpbmcgPyAxIDogLTE7XG4gIHRoaXMuY29uZmlndXJhdGlvbi5kYXRhLnNvcnQoZnVuY3Rpb24gKGF0dHJpYnV0ZXMxLCBhdHRyaWJ1dGVzMikge1xuICAgIGlmICghYXR0cmlidXRlczFbY29sdW1uTmFtZV0pIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGlmICghYXR0cmlidXRlczJbY29sdW1uTmFtZV0pIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRlczFbY29sdW1uTmFtZV0gPiBhdHRyaWJ1dGVzMltjb2x1bW5OYW1lXSA/IGFzYyA6IC1hc2M7XG4gIH0pO1xufTtcblxuR3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNsaWNrUm93ID0gZnVuY3Rpb24gKGF0dHJpYnV0ZXMsIGV2ZW50KSB7XG4gIHZhciBzaGlmdEtleSA9IGlzU2hpZnRLZXlPbmx5KGV2ZW50KTtcbiAgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXkgPSBpc1BsYXRmb3JtTW9kaWZpZXJLZXlPbmx5KGV2ZW50KTtcbiAgdGhpcy5jbGlja1Jvd18oYXR0cmlidXRlcywgc2hpZnRLZXksIHBsYXRmb3JtTW9kaWZpZXJLZXkpO1xufTtcblxuR3JpZENvbnRyb2xsZXIucHJvdG90eXBlLmNsaWNrUm93XyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzLCBzaGlmdEtleSwgcGxhdGZvcm1Nb2RpZmllcktleSkge1xuICBpZiAoIXRoaXMuY29uZmlndXJhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uJyk7XG4gIH1cblxuICBpZiAoc2hpZnRLZXkgJiYgIXBsYXRmb3JtTW9kaWZpZXJLZXkpIHtcbiAgICB0aGlzLnNlbGVjdFJhbmdlXyhhdHRyaWJ1dGVzKTtcbiAgfSBlbHNlIGlmICghc2hpZnRLZXkgJiYgcGxhdGZvcm1Nb2RpZmllcktleSkge1xuICAgIHRoaXMuY29uZmlndXJhdGlvbi50b2dnbGVSb3coYXR0cmlidXRlcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGlzU2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uaXNSb3dTZWxlY3RlZChhdHRyaWJ1dGVzKTtcbiAgICB0aGlzLmNvbmZpZ3VyYXRpb24udW5zZWxlY3RBbGwoKTtcblxuICAgIGlmICghaXNTZWxlY3RlZCkge1xuICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdFJvdyhhdHRyaWJ1dGVzKTtcbiAgICB9XG4gIH1cbn07XG5cbkdyaWRDb250cm9sbGVyLnByb3RvdHlwZS5zZWxlY3RSYW5nZV8gPSBmdW5jdGlvbiAoYXR0cmlidXRlcykge1xuICBpZiAoIXRoaXMuY29uZmlndXJhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWd1cmF0aW9uJyk7XG4gIH1cblxuICBpZiAoIXRoaXMuY29uZmlndXJhdGlvbi5kYXRhKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZ3VyYXRpb24uZGF0YScpO1xuICB9XG5cbiAgdmFyIHRhcmdldFVpZCA9IGdldFJvd1VpZChhdHRyaWJ1dGVzKTtcbiAgdmFyIGRhdGEgPSB0aGlzLmNvbmZpZ3VyYXRpb24uZGF0YTtcblxuICBpZiAodGhpcy5jb25maWd1cmF0aW9uLmlzUm93U2VsZWN0ZWQoYXR0cmlidXRlcykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcG9zQ2xpY2tlZFJvdyA9IDA7XG4gIHZhciBwb3NTZWxlY3RlZFJvd3MgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY3VycmVudFJvdyA9IGRhdGFbaV07XG4gICAgdmFyIGN1cnJlbnRVaWQgPSBnZXRSb3dVaWQoY3VycmVudFJvdyk7XG5cbiAgICBpZiAodGFyZ2V0VWlkID09PSBjdXJyZW50VWlkKSB7XG4gICAgICBwb3NDbGlja2VkUm93ID0gaTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlndXJhdGlvbi5pc1Jvd1NlbGVjdGVkKGN1cnJlbnRSb3cpKSB7XG4gICAgICBwb3NTZWxlY3RlZFJvd3MucHVzaChpKTtcbiAgICB9XG4gIH1cblxuICBpZiAocG9zU2VsZWN0ZWRSb3dzLmxlbmd0aCA9PSAwKSB7XG4gICAgdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdFJvdyhhdHRyaWJ1dGVzKTtcbiAgfVxuXG4gIHZhciBkaXN0YW5jZSA9IEluZmluaXR5O1xuICB2YXIgcG9zQ2xvc2VzdFJvdyA9IHBvc1NlbGVjdGVkUm93c1swXTtcblxuICBmb3IgKHZhciBfaSA9IDAsIF9wb3NTZWxlY3RlZFJvd3MgPSBwb3NTZWxlY3RlZFJvd3M7IF9pIDwgX3Bvc1NlbGVjdGVkUm93cy5sZW5ndGg7IF9pKyspIHtcbiAgICB2YXIgcG9zU2VsZWN0ZWRSb3cgPSBfcG9zU2VsZWN0ZWRSb3dzW19pXTtcbiAgICB2YXIgY3VycmVudFBvcyA9IHBvc1NlbGVjdGVkUm93O1xuICAgIHZhciBjdXJyZW50RGlzdGFuY2UgPSBNYXRoLmFicyhjdXJyZW50UG9zIC0gcG9zQ2xpY2tlZFJvdyk7XG5cbiAgICBpZiAoZGlzdGFuY2UgPiBjdXJyZW50RGlzdGFuY2UpIHtcbiAgICAgIGRpc3RhbmNlID0gY3VycmVudERpc3RhbmNlO1xuICAgICAgcG9zQ2xvc2VzdFJvdyA9IGN1cnJlbnRQb3M7XG4gICAgfVxuICB9XG5cbiAgdmFyIHJhbmdlU3RhcnQgPSBwb3NDbGlja2VkUm93IDwgcG9zQ2xvc2VzdFJvdyA/IHBvc0NsaWNrZWRSb3cgOiBwb3NDbG9zZXN0Um93O1xuICB2YXIgcmFuZ2VFbmQgPSBwb3NDbGlja2VkUm93ID4gcG9zQ2xvc2VzdFJvdyA/IHBvc0NsaWNrZWRSb3cgOiBwb3NDbG9zZXN0Um93O1xuXG4gIGZvciAodmFyIGwgPSByYW5nZVN0YXJ0OyBsIDw9IHJhbmdlRW5kOyBsKyspIHtcbiAgICB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0Um93KGRhdGFbbF0pO1xuICB9XG59O1xuXG5HcmlkQ29udHJvbGxlci5wcm90b3R5cGUucHJldmVudFRleHRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIHNoaWZ0S2V5ID0gaXNTaGlmdEtleU9ubHkoZXZlbnQpO1xuICB2YXIgcGxhdGZvcm1Nb2RpZmllcktleSA9IGlzUGxhdGZvcm1Nb2RpZmllcktleU9ubHkoZXZlbnQpO1xuXG4gIGlmIChzaGlmdEtleSB8fCBwbGF0Zm9ybU1vZGlmaWVyS2V5KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxufTtcblxubW9kdWxlLmNvbnRyb2xsZXIoJ25nZW9HcmlkQ29udHJvbGxlcicsIEdyaWRDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvR3JpZENvbXBvbmVudCBmcm9tICduZ2VvL2dyaWQvY29tcG9uZW50LmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvR3JpZE1vZHVsZScsIFtuZ2VvR3JpZENvbXBvbmVudC5uYW1lXSk7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiIHdpZHRoPVxcXCIxZW1cXFwiIGhlaWdodD1cXFwiMWVtXFxcIj48cGF0aCBkPVxcXCJNNy45NDggMTAuMjVjLTEuMjYuMDA5LTIuMzQ5LTEuMjMtMi4xODQtMi40OC4xMS0xLjE1MyAxLjIxOC0yLjEyNCAyLjM4Ny0yLjAxMyAxLjA2NC4wNiAyLjAyMi45NTYgMi4wOSAyLjAyOC4xLjk3NS0uNDkyIDEuOTczLTEuNDIgMi4zMWEyLjIxMSAyLjIxMSAwIDAxLS44NzMuMTU1em0uMDQ3LTEuMzU3Yy42MDYuMDMgMS4xMDMtLjcwMy44MjctMS4yNDgtLjIxNS0uNDk5LS45MzQtLjcwOS0xLjM1Ny0uMzQzLS4zOTMuMy0uNDcuOTQxLS4xMSAxLjI5NS4xNi4xOC4zOTUuMjk1LjY0LjI5NnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIiB3aWR0aD1cXFwiMWVtXFxcIiBoZWlnaHQ9XFxcIjFlbVxcXCI+PHBhdGggZD1cXFwiTTUuMDQ1LS4wMjljLTEuMjYtLjAwOC0yLjM1IDEuMjMtMi4xODQgMi40OC4wNi42MzIuNDMgMS4yMDIuOTM2IDEuNTc2LS40NzkgMS4zNTgtLjk2OCAyLjcxNC0xLjQ1IDQuMDcyLTEuMjU3LS4wMDgtMi4zNjMgMS4yMy0yLjIgMi40OC4xMDUgMS4xNiAxLjIyOCAyLjEzIDIuNDAyIDIuMDEyYTIuMjk1IDIuMjk1IDAgMDAxLjQ1LS42N2MxLjI3My41MyAyLjU1MyAxLjA1NiAzLjgyMyAxLjU5YTEuOTkyIDEuOTkyIDAgMDAwIC40MzhjLjA3NCAxLjE2NSAxLjE3NiAyLjE3IDIuMzU1IDIuMDc0IDEuMDctLjA0MiAyLjA1Ny0uOTMyIDIuMTM4LTIuMDEyYTIuMjk1IDIuMjk1IDAgMDAtLjQ1My0xLjYwN2MuNDM1LS41OTMuODczLTEuMTg2IDEuMzEtMS43NzguMTg2LjA0LjM2OS4wNDcuNTYyLjAzMSAxLjA2Ny0uMDQ3IDIuMDQtLjkzNSAyLjEyMi0yLjAxMi4xMS0uOTY0LS40NjQtMS45NTktMS4zNzMtMi4zMWEyLjIwMiAyLjIwMiAwIDAwLS4zNDMtLjEwOCA0NDQuMjcgNDQ0LjI3IDAgMDEtLjEyNS0xLjg1N2MuNzQzLS4zMTMgMS4zMjYtMS4wMzYgMS4zODgtMS44NTYuMTEtLjk2NC0uNDYzLTEuOTU4LTEuMzcyLTIuMzA5YTIuMTk2IDIuMTk2IDAgMDAtLjkyLS4xNzJjLS4wOCAwLS4xNTgtLjAwOC0uMjM1IDAtLjg0MS4wOTgtMS41NjUuNzUtMS44NCAxLjU0NS0xLjI2LS4wMDQtMi41My0uMDA5LTMuNzkxLS4wMTZDNy4wNDUuOTE4IDYuNTY0LjM2MSA1LjkxOS4xMjdhMi4yMTEgMi4yMTEgMCAwMC0uODc0LS4xNTZ6bS4wNDcgMS4zNTdjLjYwNS0uMDMgMS4xMDMuNzA0LjgyNyAxLjI0OC0uMjE1LjQ5OS0uOTM0LjcxLTEuMzU4LjM0My0uMzkyLS4yOTktLjQ3LS45NC0uMTA5LTEuMjk0YS44NzQuODc0IDAgMDEuNjQtLjI5N3ptOC4wOC4wNjNjLjYyLS4wMjYgMS4wOTkuNzE5Ljc5NiAxLjI2My0uMjMyLjQ5OC0uOTY3LjY5Mi0xLjM3My4yOTctLjM2MS0uMzA4LS40MzEtLjkzOS0uMDc4LTEuMjhhLjg5OS44OTkgMCAwMS42NTYtLjI4ek03LjI0NiAyLjkxOWMxLjI1Ny4wMDUgMi41MTcuMDI0IDMuNzc1LjAzMmEyLjMzMyAyLjMzMyAwIDAwMS42MjIgMS41MTNjLjA0My42MjQuMDg0IDEuMjQ4LjEyNSAxLjg3Mi0uODc3LjM3Ni0xLjUxMSAxLjMyMi0xLjM4OCAyLjI5My4wNDIuNDgyLjI2Ny45NC41OTIgMS4yOTUtLjQxNi41NjctLjgyNiAxLjEzNi0xLjI0OCAxLjdhMi4wNDUgMi4wNDUgMCAwMC0uNjctLjEwOXYuMDE2Yy0uNjMyLS4wMTItMS4yMzUuMjg3LTEuNjU0Ljc0OC0xLjI2LS41MjUtMi41MTctMS4wNjMtMy43NzUtMS41OS4wMDUtLjA0My4wMTMtLjA4My4wMTUtLjEyNmEyLjI3NCAyLjI3NCAwIDAwLS45NjctMi4wNzRjLjQ3Mi0xLjM0Mi45NDQtMi42ODUgMS40Mi00LjAyNS4wNTIgMCAuMTA0LjAwNS4xNTYgMCAuODk4LS4wNSAxLjcyLS43IDEuOTk3LTEuNTQ1em02LjM4IDQuNjAyYy42Mi0uMDI1IDEuMDk4LjcyLjc5NiAxLjI2NC0uMjMzLjQ5Ny0uOTY3LjY5MS0xLjM3My4yOTYtLjM2Mi0uMzA4LS40MzItLjkzOC0uMDc4LTEuMjc5YS44OTkuODk5IDAgMDEuNjU1LS4yOHpNMi4zOTMgOS40NTZjLjYxMi0uMDI4IDEuMTA5LjcyOS44MTEgMS4yOC0uMjI4LjQ5My0uOTQyLjY4LTEuMzU3LjMxMS0uMzc3LS4zLS40Ni0uOTI2LS4xMS0xLjI4YS45LjkgMCAwMS42NTYtLjMxMXptNy42NiAzLjQzMmMuNjE1LS4wMzcgMS4xMi43MTEuODI2IDEuMjYzLS4yMTcuNDgtLjkxLjY4NC0xLjMyNi4zNDQtLjQyMy0uMjk3LS40OTUtLjk4Ni0uMTA5LTEuMzQyYS44NTcuODU3IDAgMDEuNjA5LS4yNjV6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCIgd2lkdGg9XFxcIjFlbVxcXCIgaGVpZ2h0PVxcXCIxZW1cXFwiPjxwYXRoIGQ9XFxcIk0yLjMxNyAxNC40OTFhMi4yMDMgMi4yMDMgMCAwMS0uODc0LS4xNTZDLjI1NyAxMy45MS0uMzQzIDEyLjM4LjI0MiAxMS4yNjJhMi4yNjUgMi4yNjUgMCAwMTEuMjgtMS4xMzlsLS4wMTYtNC4yNThjLS4wMi0uMDA4LS4wNDItLjAwOC0uMDYzLS4wMTZDLjI1OCA1LjQyNC0uMzQzIDMuODk0LjI0MyAyLjc3Ni43NCAxLjczMSAyLjExNSAxLjE5NCAzLjE3NCAxLjdjLjU3Mi4yNDYgMS4wMDcuNzQ3IDEuMjE3IDEuMzI2TDExLjYgMy4wMWMuMDI4LS4wNzcuMDU1LS4xNi4wOTMtLjIzNC41LTEuMDQ1IDEuODc0LTEuNTgyIDIuOTMzLTEuMDc2Ljk3OS40MjIgMS41ODQgMS41OSAxLjI4IDIuNjJhMi4zMDIgMi4zMDIgMCAwMS0xLjQ2NyAxLjU3NmwuMDE2IDQuMjI4Yy4wNTcuMDIuMTE1LjAzNS4xNzEuMDYyLjk3OS40MjIgMS41ODQgMS41OSAxLjI4IDIuNjIxLS4yNC45NS0xLjE1MSAxLjY4OC0yLjEzNyAxLjY4NWEyLjIwMyAyLjIwMyAwIDAxLS44NzQtLjE1NmMtLjYyNS0uMjI0LTEuMDgzLS43NTctMS4yOTUtMS4zNzNsLTcuMjA3LjAxNWMtLjMwMi44NjQtMS4xNTEgMS41MTYtMi4wNzUgMS41MTN6bS0uMTQtMS4zNTdjLjUwOC4wNTIgMS4wNDUtLjQyLjk4Mi0uOTUxLS4wMy0uNTQyLS42My0uOTc4LTEuMTU0LS43OC0uNDcyLjE0Ni0uNzY0LjcxMy0uNTQ3IDEuMTcuMDg5LjIyMy4yNy40MTMuNS40OTlhLjc5Ljc5IDAgMDAuMjE4LjA2MnptMTEuNDUgMGMuNTA5LjA1MiAxLjA0NS0uNDIuOTgyLS45NTEtLjAzLS41NDItLjYzLS45NzgtMS4xNTQtLjc4LS40NzIuMTQ2LS43NjQuNzEzLS41NDYgMS4xNy4wODguMjIzLjI3LjQxMy40OTkuNDk5YS43OS43OSAwIDAwLjIxOC4wNjJ6TTQuMzkgMTEuNTI3bDcuMTkyLS4wMTVjLjAzLS4wODQuMDY3LS4xNy4xMDktLjI1LjI1OS0uNTQyLjc0Ny0uOTQ0IDEuMzEtMS4xMzlWNS44OGMtLjAzNi0uMDEyLS4wNzMtLjAxNy0uMTA5LS4wMzEtLjYyOC0uMjI1LTEuMDg1LS43NjgtMS4yOTUtMS4zODhINC40MDdhMi4zMzQgMi4zMzQgMCAwMS0xLjQyIDEuNDM1bC4wMTUgNC4yMjdjLjA1Ni4wMi4xMTguMDM3LjE3Mi4wNjMuNTc2LjI0OCAxLjAwOS43NTcgMS4yMTcgMS4zNDJ6bS0yLjIxNS02Ljg4Yy41MS4wNTIgMS4wNDYtLjQyLjk4My0uOTUtLjAzLS41NDMtLjYzLS45NzktMS4xNTQtLjc4MS0uNDcyLjE0Ni0uNzY0LjcxNC0uNTQ3IDEuMTcuMDg5LjIyNC4yNy40MTQuNS41YS43OS43OSAwIDAwLjIxOC4wNjJ6bTExLjQ1IDBjLjUxLjA1MiAxLjA0Ni0uNDIuOTgzLS45NS0uMDMtLjU0My0uNjMtLjk3OS0xLjE1NC0uNzgxLS40NzIuMTQ2LS43NjQuNzE0LS41NDYgMS4xNy4wODguMjI0LjI3LjQxNC40OTkuNWEuNzkuNzkgMCAwMC4yMTguMDYyelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgeyBnZXREZWZhdWx0RHJhd1N0eWxlRnVuY3Rpb24gfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL2NvbW1vbi5qcyc7XG5pbXBvcnQgbmdlb0N1c3RvbUV2ZW50IGZyb20gJ25nZW8vQ3VzdG9tRXZlbnQuanMnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICdvbC9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IG9sR2VvbUNpcmNsZSBmcm9tICdvbC9nZW9tL0NpcmNsZS5qcyc7XG5pbXBvcnQgb2xHZW9tR2VvbWV0cnlDb2xsZWN0aW9uIGZyb20gJ29sL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzJztcbmltcG9ydCBvbEdlb21MaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvblBvaW50ZXIgZnJvbSAnb2wvaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yLmpzJztcblxudmFyIERyYXdBemltdXQgPSBmdW5jdGlvbiAoX29sSW50ZXJhY3Rpb25Qb2ludGVyKSB7XG4gIF9pbmhlcml0c0xvb3NlKERyYXdBemltdXQsIF9vbEludGVyYWN0aW9uUG9pbnRlcik7XG5cbiAgZnVuY3Rpb24gRHJhd0F6aW11dChvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfb2xJbnRlcmFjdGlvblBvaW50ZXIuY2FsbCh0aGlzLCB7XG4gICAgICB0eXBlOiAnJ1xuICAgIH0pIHx8IHRoaXM7XG4gICAgX3RoaXMuc2hvdWxkU3RvcEV2ZW50ID0gRkFMU0U7XG4gICAgX3RoaXMuZG93blB4XyA9IFtdO1xuICAgIF90aGlzLnNvdXJjZV8gPSBvcHRpb25zLnNvdXJjZTtcbiAgICBfdGhpcy5zdGFydGVkXyA9IGZhbHNlO1xuICAgIF90aGlzLnNrZXRjaEZlYXR1cmVfID0gbmV3IEZlYXR1cmUoKTtcbiAgICBfdGhpcy5za2V0Y2hQb2ludF8gPSBuZXcgRmVhdHVyZSgpO1xuICAgIF90aGlzLnNxdWFyZWRDbGlja1RvbGVyYW5jZV8gPSA0O1xuICAgIF90aGlzLnNrZXRjaExheWVyXyA9IG5ldyBvbExheWVyVmVjdG9yKHtcbiAgICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSh7XG4gICAgICAgIHVzZVNwYXRpYWxJbmRleDogZmFsc2UsXG4gICAgICAgIHdyYXBYOiBmYWxzZVxuICAgICAgfSksXG4gICAgICBzdHlsZTogb3B0aW9ucy5zdHlsZSB8fCBnZXREZWZhdWx0RHJhd1N0eWxlRnVuY3Rpb24oKVxuICAgIH0pO1xuICAgIGxpc3RlbihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgJ2NoYW5nZTphY3RpdmUnLCBfdGhpcy51cGRhdGVTdGF0ZV8sIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRHJhd0F6aW11dC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmhhbmRsZVBvaW50ZXJNb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJNb3ZlXyhldmVudCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWRfKSB7XG4gICAgICB0aGlzLm1vZGlmeURyYXdpbmdfKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jcmVhdGVPclVwZGF0ZVNrZXRjaFBvaW50XyhldmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZU9yVXBkYXRlU2tldGNoUG9pbnRfID0gZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVTa2V0Y2hQb2ludF8oZXZlbnQpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBldmVudC5jb29yZGluYXRlLnNsaWNlKCk7XG4gICAgdmFyIHNrZXRjaFBvaW50R2VvbSA9IHRoaXMuc2tldGNoUG9pbnRfLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIXNrZXRjaFBvaW50R2VvbSkge1xuICAgICAgdGhpcy5za2V0Y2hQb2ludF8gPSBuZXcgRmVhdHVyZShuZXcgb2xHZW9tUG9pbnQoY29vcmRpbmF0ZXMpKTtcbiAgICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNrZXRjaFBvaW50R2VvbS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by51cGRhdGVTa2V0Y2hGZWF0dXJlc18gPSBmdW5jdGlvbiB1cGRhdGVTa2V0Y2hGZWF0dXJlc18oKSB7XG4gICAgdmFyIHNrZXRjaEZlYXR1cmVzID0gW107XG4gICAgc2tldGNoRmVhdHVyZXMucHVzaCh0aGlzLnNrZXRjaEZlYXR1cmVfKTtcbiAgICBza2V0Y2hGZWF0dXJlcy5wdXNoKHRoaXMuc2tldGNoUG9pbnRfKTtcbiAgICB2YXIgc291cmNlID0gdGhpcy5za2V0Y2hMYXllcl8uZ2V0U291cmNlKCk7XG4gICAgc291cmNlLmNsZWFyKHRydWUpO1xuICAgIHNvdXJjZS5hZGRGZWF0dXJlcyhza2V0Y2hGZWF0dXJlcyk7XG4gIH07XG5cbiAgX3Byb3RvLnN0YXJ0RHJhd2luZ18gPSBmdW5jdGlvbiBzdGFydERyYXdpbmdfKGV2ZW50KSB7XG4gICAgdmFyIHN0YXJ0ID0gZXZlbnQuY29vcmRpbmF0ZTtcbiAgICB0aGlzLnN0YXJ0ZWRfID0gdHJ1ZTtcbiAgICB2YXIgbGluZSA9IG5ldyBvbEdlb21MaW5lU3RyaW5nKFtzdGFydC5zbGljZSgpLCBzdGFydC5zbGljZSgpXSk7XG4gICAgdmFyIGNpcmNsZSA9IG5ldyBvbEdlb21DaXJjbGUoc3RhcnQsIDApO1xuICAgIHZhciBnZW9tZXRyeSA9IG5ldyBvbEdlb21HZW9tZXRyeUNvbGxlY3Rpb24oW2xpbmUsIGNpcmNsZV0pO1xuICAgIHRoaXMuc2tldGNoRmVhdHVyZV8gPSBuZXcgRmVhdHVyZSgpO1xuICAgIHRoaXMuc2tldGNoRmVhdHVyZV8uc2V0R2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gICAgdmFyIGV2dCA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ2RyYXdzdGFydCcsIHtcbiAgICAgIGZlYXR1cmU6IHRoaXMuc2tldGNoRmVhdHVyZV9cbiAgICB9KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgfTtcblxuICBfcHJvdG8ubW9kaWZ5RHJhd2luZ18gPSBmdW5jdGlvbiBtb2RpZnlEcmF3aW5nXyhldmVudCkge1xuICAgIHZhciBjb29yZGluYXRlID0gZXZlbnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLnNrZXRjaEZlYXR1cmVfLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIShnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUdlb21ldHJ5Q29sbGVjdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZW9tZXRyeScpO1xuICAgIH1cblxuICAgIHZhciBnZW9tZXRyaWVzID0gZ2VvbWV0cnkuZ2V0R2VvbWV0cmllc0FycmF5KCk7XG4gICAgdmFyIGxpbmUgPSBnZW9tZXRyaWVzWzBdO1xuXG4gICAgaWYgKGxpbmUgaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBsaW5lLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICB2YXIgc2tldGNoUG9pbnRHZW9tID0gdGhpcy5za2V0Y2hQb2ludF8uZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgaWYgKHNrZXRjaFBvaW50R2VvbSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KSB7XG4gICAgICAgIHNrZXRjaFBvaW50R2VvbS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlKTtcbiAgICAgICAgdmFyIGxhc3QgPSBjb29yZGluYXRlc1tjb29yZGluYXRlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgbGFzdFswXSA9IGNvb3JkaW5hdGVbMF07XG4gICAgICAgIGxhc3RbMV0gPSBjb29yZGluYXRlWzFdO1xuICAgICAgICBjb25zb2xlLmFzc2VydChsaW5lIGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZyk7XG4gICAgICAgIGxpbmUuc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgICAgICB2YXIgY2lyY2xlID0gZ2VvbWV0cmllc1sxXTtcblxuICAgICAgICBpZiAoY2lyY2xlIGluc3RhbmNlb2Ygb2xHZW9tQ2lyY2xlKSB7XG4gICAgICAgICAgY2lyY2xlLnNldFJhZGl1cyhsaW5lLmdldExlbmd0aCgpKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5hYm9ydERyYXdpbmdfID0gZnVuY3Rpb24gYWJvcnREcmF3aW5nXygpIHtcbiAgICB0aGlzLnN0YXJ0ZWRfID0gZmFsc2U7XG4gICAgdmFyIHNrZXRjaEZlYXR1cmUgPSB0aGlzLnNrZXRjaEZlYXR1cmVfO1xuICAgIHRoaXMuc2tldGNoRmVhdHVyZV8gPSBuZXcgRmVhdHVyZSgpO1xuICAgIHRoaXMuc2tldGNoUG9pbnRfID0gbmV3IEZlYXR1cmUoKTtcbiAgICB2YXIgc291cmNlID0gdGhpcy5za2V0Y2hMYXllcl8uZ2V0U291cmNlKCk7XG5cbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBWZWN0b3JTb3VyY2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc291cmNlJyk7XG4gICAgfVxuXG4gICAgc291cmNlLmNsZWFyKHRydWUpO1xuICAgIHJldHVybiBza2V0Y2hGZWF0dXJlO1xuICB9O1xuXG4gIF9wcm90by51cGRhdGVTdGF0ZV8gPSBmdW5jdGlvbiB1cGRhdGVTdGF0ZV8oKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlKCk7XG5cbiAgICBpZiAobWFwID09PSBudWxsIHx8ICFhY3RpdmUpIHtcbiAgICAgIHRoaXMuYWJvcnREcmF3aW5nXygpO1xuICAgIH1cblxuICAgIHRoaXMuc2tldGNoTGF5ZXJfLnNldE1hcChhY3RpdmUgPyBtYXAgOiBudWxsKTtcbiAgfTtcblxuICBfcHJvdG8uZmluaXNoRHJhd2luZ18gPSBmdW5jdGlvbiBmaW5pc2hEcmF3aW5nXygpIHtcbiAgICB2YXIgc2tldGNoRmVhdHVyZSA9IHRoaXMuYWJvcnREcmF3aW5nXygpO1xuICAgIHRoaXMuc291cmNlXy5hZGRGZWF0dXJlKHNrZXRjaEZlYXR1cmUpO1xuICAgIHZhciBldmVudCA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ2RyYXdlbmQnLCB7XG4gICAgICBmZWF0dXJlOiB0aGlzLnNrZXRjaEZlYXR1cmVfXG4gICAgfSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfTtcblxuICBfcHJvdG8uc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwKG1hcCkge1xuICAgIG9sSW50ZXJhY3Rpb25Qb2ludGVyLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuICAgIHRoaXMudXBkYXRlU3RhdGVfKCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudChldmVudCkge1xuICAgIHRoaXMuZG93blB4XyA9IGV2ZW50LnBpeGVsO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudChldmVudCkge1xuICAgIGlmICghdGhpcy5kb3duUHhfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZG93blB4Jyk7XG4gICAgfVxuXG4gICAgdmFyIGRvd25QeCA9IHRoaXMuZG93blB4XztcbiAgICB2YXIgY2xpY2tQeCA9IGV2ZW50LnBpeGVsO1xuICAgIHZhciBkeCA9IGRvd25QeFswXSAtIGNsaWNrUHhbMF07XG4gICAgdmFyIGR5ID0gZG93blB4WzFdIC0gY2xpY2tQeFsxXTtcbiAgICB2YXIgc3F1YXJlZERpc3RhbmNlID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgdmFyIHBhc3MgPSB0cnVlO1xuXG4gICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8PSB0aGlzLnNxdWFyZWRDbGlja1RvbGVyYW5jZV8pIHtcbiAgICAgIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfKGV2ZW50KTtcblxuICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWRfKSB7XG4gICAgICAgIHRoaXMuc3RhcnREcmF3aW5nXyhldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZpbmlzaERyYXdpbmdfKCk7XG4gICAgICB9XG5cbiAgICAgIHBhc3MgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFzcztcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcGFzcyA9IHRydWU7XG5cbiAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT09ICdwb2ludGVybW92ZScpIHtcbiAgICAgIHBhc3MgPSB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT09ICdkYmxjbGljaycpIHtcbiAgICAgIHBhc3MgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gX29sSW50ZXJhY3Rpb25Qb2ludGVyLnByb3RvdHlwZS5oYW5kbGVFdmVudC5jYWxsKHRoaXMsIG1hcEJyb3dzZXJFdmVudCkgJiYgcGFzcztcbiAgfTtcblxuICByZXR1cm4gRHJhd0F6aW11dDtcbn0ob2xJbnRlcmFjdGlvblBvaW50ZXIpO1xuXG5leHBvcnQgZGVmYXVsdCBEcmF3QXppbXV0OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgbmdlb0N1c3RvbUV2ZW50IGZyb20gJ25nZW8vQ3VzdG9tRXZlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnb2wvZnVuY3Rpb25zLmpzJztcbmltcG9ydCBvbEdlb21DaXJjbGUgZnJvbSAnb2wvZ2VvbS9DaXJjbGUuanMnO1xuaW1wb3J0IHsgZnJvbUNpcmNsZSwgbWFrZVJlZ3VsYXIgfSBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbiBmcm9tICdvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJ29sL01hcEJyb3dzZXJFdmVudC5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfb2xJbnRlcmFjdGlvbkludGVyYWMpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9vbEludGVyYWN0aW9uSW50ZXJhYyk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25JbnRlcmFjLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IFRSVUVcbiAgICB9KSB8fCB0aGlzO1xuICAgIF90aGlzLmFuZ2xlXyA9IG9wdGlvbnMuYW5nbGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYW5nbGUgOiAwO1xuICAgIF90aGlzLnJhZGl1c18gPSBvcHRpb25zLnJhZGl1cztcbiAgICBfdGhpcy5zaWRlc18gPSBvcHRpb25zLnNpZGVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNpZGVzIDogMztcbiAgICBfdGhpcy5saXN0ZW5lcktleXNfID0gW107XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlKGFjdGl2ZSkge1xuICAgIF9vbEludGVyYWN0aW9uSW50ZXJhYy5wcm90b3R5cGUuc2V0QWN0aXZlLmNhbGwodGhpcywgYWN0aXZlKTtcblxuICAgIGlmICh0aGlzLmdldE1hcCgpKSB7XG4gICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlXygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlXygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwKG1hcCkge1xuICAgIHZhciBhY3RpdmUgPSB0aGlzLmdldEFjdGl2ZSgpO1xuICAgIHZhciBjdXJyZW50TWFwID0gdGhpcy5nZXRNYXAoKTtcblxuICAgIGlmIChjdXJyZW50TWFwICYmIGFjdGl2ZSkge1xuICAgICAgdGhpcy5kaXNhYmxlXygpO1xuICAgIH1cblxuICAgIF9vbEludGVyYWN0aW9uSW50ZXJhYy5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcblxuICAgIGlmIChtYXAgJiYgYWN0aXZlKSB7XG4gICAgICB0aGlzLmVuYWJsZV8oKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmVuYWJsZV8gPSBmdW5jdGlvbiBlbmFibGVfKCkge1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KG1hcCwgJ01hcCBzaG91bGQgYmUgc2V0LicpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKGxpc3RlbihtYXAsICdjbGljaycsIHRoaXMuaGFuZGxlTWFwQ2xpY2tfLCB0aGlzKSk7XG4gIH07XG5cbiAgX3Byb3RvLmRpc2FibGVfID0gZnVuY3Rpb24gZGlzYWJsZV8oKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgY29uc29sZS5hc3NlcnQobWFwLCAnTWFwIHNob3VsZCBiZSBzZXQuJyk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZU1hcENsaWNrXyA9IGZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgTWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICB2YXIgY2VudGVyID0gZXZ0LmNvb3JkaW5hdGU7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSBmcm9tQ2lyY2xlKG5ldyBvbEdlb21DaXJjbGUoY2VudGVyKSwgdGhpcy5zaWRlc18pO1xuICAgICAgbWFrZVJlZ3VsYXIoZ2VvbWV0cnksIGNlbnRlciwgdGhpcy5yYWRpdXNfLCB0aGlzLmFuZ2xlXyk7XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdkcmF3ZW5kJywge1xuICAgICAgICBmZWF0dXJlOiBuZXcgb2xGZWF0dXJlKGdlb21ldHJ5KVxuICAgICAgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbik7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBuZ2VvQ3VzdG9tRXZlbnQgZnJvbSAnbmdlby9DdXN0b21FdmVudC5qcyc7XG5pbXBvcnQgeyByZW1vdmVDaGlsZHJlbiB9IGZyb20gJ29sL2RvbS5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICdvbC9wcm9qLmpzJztcbmltcG9ydCBvbE92ZXJsYXkgZnJvbSAnb2wvT3ZlcmxheS5qcyc7XG5pbXBvcnQgeyBnZXRBcmVhLCBnZXREaXN0YW5jZSB9IGZyb20gJ29sL3NwaGVyZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbiBmcm9tICdvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU291cmNlVmVjdG9yIGZyb20gJ29sL3NvdXJjZS9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU3R5bGVGaWxsIGZyb20gJ29sL3N0eWxlL0ZpbGwuanMnO1xuaW1wb3J0IG9sU3R5bGVTdHJva2UgZnJvbSAnb2wvc3R5bGUvU3Ryb2tlLmpzJztcbmltcG9ydCBvbFN0eWxlU3R5bGUgZnJvbSAnb2wvc3R5bGUvU3R5bGUuanMnO1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yLmpzJztcblxudmFyIE1lYXN1cmUgPSBmdW5jdGlvbiAoX29sSW50ZXJhY3Rpb25JbnRlcmFjKSB7XG4gIF9pbmhlcml0c0xvb3NlKE1lYXN1cmUsIF9vbEludGVyYWN0aW9uSW50ZXJhYyk7XG5cbiAgZnVuY3Rpb24gTWVhc3VyZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25JbnRlcmFjLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50X1xuICAgIH0pIHx8IHRoaXM7XG4gICAgX3RoaXMuaGVscFRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgX3RoaXMuaGVscFRvb2x0aXBPdmVybGF5XyA9IG51bGw7XG4gICAgX3RoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgX3RoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5XyA9IG51bGw7XG4gICAgX3RoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5Q29vcmRfID0gbnVsbDtcbiAgICBfdGhpcy5za2V0Y2hGZWF0dXJlID0gbnVsbDtcbiAgICBfdGhpcy5jb250aW51ZU1zZyA9IG51bGw7XG4gICAgX3RoaXMuZGVjaW1hbHMgPSBvcHRpb25zLmRlY2ltYWxzO1xuICAgIF90aGlzLnByZWNpc2lvbiA9IG9wdGlvbnMucHJlY2lzaW9uO1xuICAgIF90aGlzLmRpc3BsYXlIZWxwVG9vbHRpcF8gPSBvcHRpb25zLmRpc3BsYXlIZWxwVG9vbHRpcCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXNwbGF5SGVscFRvb2x0aXAgOiB0cnVlO1xuICAgIHZhciBzdGFydE1zZztcblxuICAgIGlmIChvcHRpb25zLnN0YXJ0TXNnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHN0YXJ0TXNnID0gb3B0aW9ucy5zdGFydE1zZztcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBzdGFydE1zZy50ZXh0Q29udGVudCA9ICdDbGljayB0byBzdGFydCBkcmF3aW5nLic7XG4gICAgfVxuXG4gICAgX3RoaXMuc3RhcnRNc2cgPSBzdGFydE1zZztcbiAgICBfdGhpcy5jaGFuZ2VFdmVudEtleV8gPSBudWxsO1xuICAgIF90aGlzLnBvc3Rjb21wb3NlRXZlbnRLZXlfID0gbnVsbDtcbiAgICB2YXIgc3R5bGUgPSBvcHRpb25zLnN0eWxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0eWxlIDogW25ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiknXG4gICAgICB9KVxuICAgIH0pLCBuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgd2lkdGg6IDVcbiAgICAgIH0pXG4gICAgfSksIG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICAgIGNvbG9yOiAnI2ZmY2MzMycsXG4gICAgICAgIHdpZHRoOiAzXG4gICAgICB9KVxuICAgIH0pXTtcbiAgICBfdGhpcy52ZWN0b3JMYXllcl8gPSBvcHRpb25zLmxheWVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxheWVyIDogbmV3IG9sTGF5ZXJWZWN0b3Ioe1xuICAgICAgc291cmNlOiBuZXcgb2xTb3VyY2VWZWN0b3IoKSxcbiAgICAgIHN0eWxlOiBzdHlsZVxuICAgIH0pO1xuXG4gICAgdmFyIHNvdXJjZSA9IF90aGlzLnZlY3RvckxheWVyXy5nZXRTb3VyY2UoKTtcblxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIFZlY3RvclNvdXJjZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzb3VyY2UnKTtcbiAgICB9XG5cbiAgICB2YXIgZHJhd0ludGVyYWN0aW9uID0gX3RoaXMuY3JlYXRlRHJhd0ludGVyYWN0aW9uKG9wdGlvbnMuc2tldGNoU3R5bGUsIHNvdXJjZSk7XG5cbiAgICBpZiAoIWRyYXdJbnRlcmFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGRyYXdJbnRlcmFjdGlvbicpO1xuICAgIH1cblxuICAgIF90aGlzLmRyYXdJbnRlcmFjdGlvbl8gPSBkcmF3SW50ZXJhY3Rpb247XG4gICAgX3RoaXMuc2hvdWxkSGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXyA9IHRydWU7XG4gICAgbGlzdGVuKF90aGlzLmRyYXdJbnRlcmFjdGlvbl8sICdjaGFuZ2U6YWN0aXZlJywgX3RoaXMuaGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIGxpc3RlbihfdGhpcy5kcmF3SW50ZXJhY3Rpb25fLCAnZHJhd3N0YXJ0JywgX3RoaXMub25EcmF3U3RhcnRfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgbGlzdGVuKF90aGlzLmRyYXdJbnRlcmFjdGlvbl8sICdkcmF3ZW5kJywgX3RoaXMub25EcmF3RW5kXywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIGxpc3RlbihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgJ2NoYW5nZTphY3RpdmUnLCBfdGhpcy51cGRhdGVTdGF0ZV8sIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTWVhc3VyZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmdldERyYXdJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIGdldERyYXdJbnRlcmFjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kcmF3SW50ZXJhY3Rpb25fO1xuICB9O1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIF9wcm90by5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAobWFwKSB7XG4gICAgb2xJbnRlcmFjdGlvbkludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuICAgIHRoaXMudmVjdG9yTGF5ZXJfLnNldE1hcChtYXApO1xuICAgIHZhciBwcmV2TWFwID0gdGhpcy5kcmF3SW50ZXJhY3Rpb25fLmdldE1hcCgpO1xuXG4gICAgaWYgKHByZXZNYXAgIT09IG51bGwpIHtcbiAgICAgIHByZXZNYXAucmVtb3ZlSW50ZXJhY3Rpb24odGhpcy5kcmF3SW50ZXJhY3Rpb25fKTtcbiAgICB9XG5cbiAgICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgICBtYXAuYWRkSW50ZXJhY3Rpb24odGhpcy5kcmF3SW50ZXJhY3Rpb25fKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLm9uRHJhd1N0YXJ0XyA9IGZ1bmN0aW9uIG9uRHJhd1N0YXJ0XyhldnQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBldmVudCA9IGV2dC5kZXRhaWwgPyBldnQuZGV0YWlsIDogZXZ0O1xuICAgIHRoaXMuc2tldGNoRmVhdHVyZSA9IGV2ZW50LmZlYXR1cmU7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMudmVjdG9yTGF5ZXJfLmdldFNvdXJjZSgpO1xuXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgVmVjdG9yU291cmNlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNvdXJjZScpO1xuICAgIH1cblxuICAgIHNvdXJjZS5jbGVhcih0cnVlKTtcbiAgICB0aGlzLmNyZWF0ZU1lYXN1cmVUb29sdGlwXygpO1xuXG4gICAgaWYgKCF0aGlzLnNrZXRjaEZlYXR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBza2V0Y2hGZWF0dXJlJyk7XG4gICAgfVxuXG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5za2V0Y2hGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB0aGlzLmNoYW5nZUV2ZW50S2V5XyA9IGxpc3RlbihnZW9tZXRyeSwgJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIF90aGlzMi5oYW5kbGVNZWFzdXJlKGZ1bmN0aW9uIChtZWFzdXJlLCBjb29yZCkge1xuICAgICAgICBpZiAoY29vcmQgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoIV90aGlzMi5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZVRvb2x0aXBFbGVtZW50Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMyLm1lYXN1cmVUb29sdGlwRWxlbWVudF8uaW5uZXJIVE1MID0gbWVhc3VyZTtcbiAgICAgICAgICBfdGhpczIubWVhc3VyZVRvb2x0aXBPdmVybGF5Q29vcmRfID0gY29vcmQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMucG9zdGNvbXBvc2VFdmVudEtleV8gPSBsaXN0ZW4odGhpcy5nZXRNYXAoKSwgJ3Bvc3Rjb21wb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzMi5tZWFzdXJlVG9vbHRpcE92ZXJsYXlfICYmIF90aGlzMi5tZWFzdXJlVG9vbHRpcE92ZXJsYXlDb29yZF8pIHtcbiAgICAgICAgX3RoaXMyLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8uc2V0UG9zaXRpb24oX3RoaXMyLm1lYXN1cmVUb29sdGlwT3ZlcmxheUNvb3JkXyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLm9uRHJhd0VuZF8gPSBmdW5jdGlvbiBvbkRyYXdFbmRfKGV2dCkge1xuICAgIGlmICghdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWVhc3VyZVRvb2x0aXBFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlVG9vbHRpcE92ZXJsYXknKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNrZXRjaEZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8uY2xhc3NMaXN0LmFkZCgnbmdlby10b29sdGlwLXN0YXRpYycpO1xuICAgIHRoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5Xy5zZXRPZmZzZXQoWzAsIC03XSk7XG4gICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnbWVhc3VyZWVuZCcsIHtcbiAgICAgIGZlYXR1cmU6IHRoaXMuc2tldGNoRmVhdHVyZVxuICAgIH0pO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgdGhpcy5za2V0Y2hGZWF0dXJlID0gbnVsbDtcbiAgICB0aGlzLnVubGlzdGVuZXJFdmVudF8oKTtcbiAgfTtcblxuICBfcHJvdG8udW5saXN0ZW5lckV2ZW50XyA9IGZ1bmN0aW9uIHVubGlzdGVuZXJFdmVudF8oKSB7XG4gICAgaWYgKHRoaXMuY2hhbmdlRXZlbnRLZXlfICE9PSBudWxsICYmIHRoaXMucG9zdGNvbXBvc2VFdmVudEtleV8gIT09IG51bGwpIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5jaGFuZ2VFdmVudEtleV8pO1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnBvc3Rjb21wb3NlRXZlbnRLZXlfKTtcbiAgICAgIHRoaXMuY2hhbmdlRXZlbnRLZXlfID0gbnVsbDtcbiAgICAgIHRoaXMucG9zdGNvbXBvc2VFdmVudEtleV8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uY3JlYXRlSGVscFRvb2x0aXBfID0gZnVuY3Rpb24gY3JlYXRlSGVscFRvb2x0aXBfKCkge1xuICAgIHRoaXMucmVtb3ZlSGVscFRvb2x0aXBfKCk7XG5cbiAgICBpZiAodGhpcy5kaXNwbGF5SGVscFRvb2x0aXBfKSB7XG4gICAgICB0aGlzLmhlbHBUb29sdGlwRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoaXMuaGVscFRvb2x0aXBFbGVtZW50Xy5jbGFzc0xpc3QuYWRkKCd0b29sdGlwJyk7XG4gICAgICB0aGlzLmhlbHBUb29sdGlwT3ZlcmxheV8gPSBuZXcgb2xPdmVybGF5KHtcbiAgICAgICAgc3RvcEV2ZW50OiBmYWxzZSxcbiAgICAgICAgZWxlbWVudDogdGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfLFxuICAgICAgICBvZmZzZXQ6IFsxNSwgMF0sXG4gICAgICAgIHBvc2l0aW9uaW5nOiAnY2VudGVyLWxlZnQnXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZ2V0TWFwKCkuYWRkT3ZlcmxheSh0aGlzLmhlbHBUb29sdGlwT3ZlcmxheV8pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlSGVscFRvb2x0aXBfID0gZnVuY3Rpb24gcmVtb3ZlSGVscFRvb2x0aXBfKCkge1xuICAgIGlmICh0aGlzLmRpc3BsYXlIZWxwVG9vbHRpcF8pIHtcbiAgICAgIGlmICh0aGlzLmhlbHBUb29sdGlwT3ZlcmxheV8gIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5nZXRNYXAoKS5yZW1vdmVPdmVybGF5KHRoaXMuaGVscFRvb2x0aXBPdmVybGF5Xyk7XG4gICAgICAgIHRoaXMuaGVscFRvb2x0aXBPdmVybGF5XyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhlbHBUb29sdGlwRWxlbWVudF8gIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVscFRvb2x0aXBFbGVtZW50Xy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgdGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGVscFRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5jcmVhdGVNZWFzdXJlVG9vbHRpcF8gPSBmdW5jdGlvbiBjcmVhdGVNZWFzdXJlVG9vbHRpcF8oKSB7XG4gICAgdGhpcy5yZW1vdmVNZWFzdXJlVG9vbHRpcF8oKTtcbiAgICB0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8uY2xhc3NMaXN0LmFkZCgndG9vbHRpcCcpO1xuICAgIHRoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50Xy5jbGFzc0xpc3QuYWRkKCduZ2VvLXRvb2x0aXAtbWVhc3VyZScpO1xuICAgIHRoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5XyA9IG5ldyBvbE92ZXJsYXkoe1xuICAgICAgZWxlbWVudDogdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfLFxuICAgICAgb2Zmc2V0OiBbMCwgLTE1XSxcbiAgICAgIHBvc2l0aW9uaW5nOiAnYm90dG9tLWNlbnRlcicsXG4gICAgICBzdG9wRXZlbnQ6IGZhbHNlXG4gICAgfSk7XG4gICAgdGhpcy5nZXRNYXAoKS5hZGRPdmVybGF5KHRoaXMubWVhc3VyZVRvb2x0aXBPdmVybGF5Xyk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZU1lYXN1cmVUb29sdGlwXyA9IGZ1bmN0aW9uIHJlbW92ZU1lYXN1cmVUb29sdGlwXygpIHtcbiAgICBpZiAodGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfICE9PSBudWxsKSB7XG4gICAgICBpZiAoIXRoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50Xy5wYXJlbnROb2RlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlVG9vbHRpcEVsZW1lbnRfLnBhcmVudE5vZGUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfKTtcbiAgICAgIHRoaXMubWVhc3VyZVRvb2x0aXBFbGVtZW50XyA9IG51bGw7XG4gICAgICB0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8gPSBudWxsO1xuICAgICAgdGhpcy5tZWFzdXJlVG9vbHRpcE92ZXJsYXlDb29yZF8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdGVfID0gZnVuY3Rpb24gdXBkYXRlU3RhdGVfKGV2dCkge1xuICAgIHZhciBhY3RpdmUgPSB0aGlzLmdldEFjdGl2ZSgpO1xuICAgIHRoaXMuc2hvdWxkSGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXyA9IGZhbHNlO1xuICAgIHRoaXMuZHJhd0ludGVyYWN0aW9uXy5zZXRBY3RpdmUoYWN0aXZlKTtcbiAgICB0aGlzLnNob3VsZEhhbmRsZURyYXdJbnRlcmFjdGlvbkFjdGl2ZUNoYW5nZV8gPSB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLmdldE1hcCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8pIHtcbiAgICAgICAgdGhpcy5jcmVhdGVNZWFzdXJlVG9vbHRpcF8oKTtcbiAgICAgICAgdGhpcy5jcmVhdGVIZWxwVG9vbHRpcF8oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwT3ZlcmxheV8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1lYXN1cmVUb29sdGlwT3ZlcmxheScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlID0gdGhpcy52ZWN0b3JMYXllcl8uZ2V0U291cmNlKCk7XG5cbiAgICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIFZlY3RvclNvdXJjZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1lYXN1cmVUb29sdGlwT3ZlcmxheScpO1xuICAgICAgfVxuXG4gICAgICBzb3VyY2UuY2xlYXIodHJ1ZSk7XG4gICAgICB0aGlzLmdldE1hcCgpLnJlbW92ZU92ZXJsYXkodGhpcy5tZWFzdXJlVG9vbHRpcE92ZXJsYXlfKTtcbiAgICAgIHRoaXMucmVtb3ZlTWVhc3VyZVRvb2x0aXBfKCk7XG4gICAgICB0aGlzLnJlbW92ZUhlbHBUb29sdGlwXygpO1xuICAgICAgdGhpcy51bmxpc3RlbmVyRXZlbnRfKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNZWFzdXJlID0gZnVuY3Rpb24gaGFuZGxlTWVhc3VyZShjYWxsYmFjaykge307XG5cbiAgX3Byb3RvLmdldFRvb2x0aXBFbGVtZW50ID0gZnVuY3Rpb24gZ2V0VG9vbHRpcEVsZW1lbnQoKSB7XG4gICAgaWYgKCF0aGlzLm1lYXN1cmVUb29sdGlwRWxlbWVudF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZWFzdXJlVG9vbHRpcEVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZWFzdXJlVG9vbHRpcEVsZW1lbnRfO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEcmF3SW50ZXJhY3Rpb25BY3RpdmVDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlRHJhd0ludGVyYWN0aW9uQWN0aXZlQ2hhbmdlXyhldnQpIHtcbiAgICBpZiAodGhpcy5zaG91bGRIYW5kbGVEcmF3SW50ZXJhY3Rpb25BY3RpdmVDaGFuZ2VfKSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZSh0aGlzLmRyYXdJbnRlcmFjdGlvbl8uZ2V0QWN0aXZlKCkpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTWVhc3VyZTtcbn0ob2xJbnRlcmFjdGlvbkludGVyYWN0aW9uKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZEFyZWEocG9seWdvbiwgcHJvamVjdGlvbiwgcHJlY2lzaW9uLCBmb3JtYXQsIHNwaGVyaWNhbCkge1xuICBpZiAoc3BoZXJpY2FsID09PSB2b2lkIDApIHtcbiAgICBzcGhlcmljYWwgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBhcmVhO1xuXG4gIGlmIChzcGhlcmljYWwpIHtcbiAgICB2YXIgZ2VvbSA9IHBvbHlnb24uY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIGFyZWEgPSBNYXRoLmFicyhnZXRBcmVhKGdlb20sIHtcbiAgICAgICdwcm9qZWN0aW9uJzogJ0VQU0c6NDMyNidcbiAgICB9KSk7XG4gIH0gZWxzZSB7XG4gICAgYXJlYSA9IHBvbHlnb24uZ2V0QXJlYSgpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdChhcmVhLCAnbcKyJywgJ3NxdWFyZScsIHByZWNpc2lvbik7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkQ2lyY2xlQXJlYShjaXJjbGUsIHByZWNpc2lvbiwgZm9ybWF0KSB7XG4gIHZhciBhcmVhID0gTWF0aC5QSSAqIE1hdGgucG93KGNpcmNsZS5nZXRSYWRpdXMoKSwgMik7XG4gIHJldHVybiBmb3JtYXQoYXJlYSwgJ23CsicsICdzcXVhcmUnLCBwcmVjaXNpb24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZExlbmd0aChsaW5lU3RyaW5nLCBwcm9qZWN0aW9uLCBwcmVjaXNpb24sIGZvcm1hdCwgc3BoZXJpY2FsKSB7XG4gIGlmIChzcGhlcmljYWwgPT09IHZvaWQgMCkge1xuICAgIHNwaGVyaWNhbCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGxlbmd0aCA9IDA7XG5cbiAgaWYgKHNwaGVyaWNhbCkge1xuICAgIHZhciBjb29yZGluYXRlcyA9IGxpbmVTdHJpbmcuZ2V0Q29vcmRpbmF0ZXMoKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgYzEgPSB0cmFuc2Zvcm0oY29vcmRpbmF0ZXNbaV0sIHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICAgIHZhciBjMiA9IHRyYW5zZm9ybShjb29yZGluYXRlc1tpICsgMV0sIHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICAgIGxlbmd0aCArPSBnZXREaXN0YW5jZShjMSwgYzIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBsaW5lU3RyaW5nLmdldExlbmd0aCgpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdChsZW5ndGgsICdtJywgJ3VuaXQnLCBwcmVjaXNpb24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFBvaW50KHBvaW50LCBkZWNpbWFscywgZm9ybWF0LCBvcHRfdGVtcGxhdGUpIHtcbiAgcmV0dXJuIGZvcm1hdChwb2ludC5nZXRDb29yZGluYXRlcygpLCBkZWNpbWFscywgb3B0X3RlbXBsYXRlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXZlbnRfKGV2dCkge1xuICBpZiAoZXZ0LnR5cGUgIT0gJ3BvaW50ZXJtb3ZlJyB8fCBldnQuZHJhZ2dpbmcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHZhciBoZWxwTXNnID0gdGhpcy5za2V0Y2hGZWF0dXJlID09PSBudWxsID8gdGhpcy5zdGFydE1zZyA6IHRoaXMuY29udGludWVNc2c7XG5cbiAgaWYgKHRoaXMuZGlzcGxheUhlbHBUb29sdGlwXyAmJiBoZWxwTXNnKSB7XG4gICAgaWYgKCF0aGlzLmhlbHBUb29sdGlwRWxlbWVudF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBoZWxwVG9vbHRpcEVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGVscFRvb2x0aXBPdmVybGF5Xykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGhlbHBUb29sdGlwT3ZlcmxheScpO1xuICAgIH1cblxuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMuaGVscFRvb2x0aXBFbGVtZW50Xyk7XG4gICAgdGhpcy5oZWxwVG9vbHRpcEVsZW1lbnRfLmFwcGVuZENoaWxkKGhlbHBNc2cpO1xuICAgIHRoaXMuaGVscFRvb2x0aXBPdmVybGF5Xy5zZXRQb3NpdGlvbihldnQuY29vcmRpbmF0ZSk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVhc3VyZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUsIHsgZ2V0Rm9ybWF0dGVkQXJlYSB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZS5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvbkRyYXcgZnJvbSAnb2wvaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX25nZW9JbnRlcmFjdGlvbk1lYXN1KSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb0ludGVyYWN0aW9uTWVhc3UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KGZvcm1hdCwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfbmdlb0ludGVyYWN0aW9uTWVhc3UuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIHZhciBjb250aW51ZU1zZztcblxuICAgIGlmIChvcHRpb25zLmNvbnRpbnVlTXNnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlTXNnID0gb3B0aW9ucy5jb250aW51ZU1zZztcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGludWVNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb250aW51ZU1zZy50ZXh0Q29udGVudCA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnQ2xpY2sgdG8gY29udGludWUgZHJhd2luZyB0aGUgcG9seWdvbi4nKTtcbiAgICAgIHZhciBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7XG4gICAgICBici50ZXh0Q29udGVudCA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygnRG91YmxlLWNsaWNrIG9yIGNsaWNrIHN0YXJ0aW5nIHBvaW50IHRvIGZpbmlzaC4nKTtcbiAgICAgIGNvbnRpbnVlTXNnLmFwcGVuZENoaWxkKGJyKTtcbiAgICB9XG5cbiAgICBfdGhpcy5jb250aW51ZU1zZyA9IGNvbnRpbnVlTXNnO1xuICAgIF90aGlzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHJldHVybiBuZXcgb2xJbnRlcmFjdGlvbkRyYXcoe1xuICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICBzdHlsZTogc3R5bGVcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWVhc3VyZSA9IGZ1bmN0aW9uIGhhbmRsZU1lYXN1cmUoY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNrZXRjaEZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbSA9IHRoaXMuc2tldGNoRmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCEoZ2VvbSBpbnN0YW5jZW9mIFBvbHlnb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvaiA9IHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zb2xlLmFzc2VydChwcm9qKTtcbiAgICB2YXIgb3V0cHV0ID0gZ2V0Rm9ybWF0dGVkQXJlYShnZW9tLCBwcm9qLCB0aGlzLnByZWNpc2lvbiwgdGhpcy5mb3JtYXQpO1xuICAgIHZhciB2ZXJ0aWNlc0NvdW50ID0gZ2VvbS5nZXRDb29yZGluYXRlcygpWzBdLmxlbmd0aDtcbiAgICB2YXIgY29vcmQgPSBudWxsO1xuXG4gICAgaWYgKHZlcnRpY2VzQ291bnQgPiAzKSB7XG4gICAgICBjb29yZCA9IGdlb20uZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgfVxuXG4gICAgY2FsbGJhY2sob3V0cHV0LCBjb29yZCk7XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uRHJhd0F6aW11dCBmcm9tICduZ2VvL2ludGVyYWN0aW9uL0RyYXdBemltdXQuanMnO1xuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUsIHsgZ2V0Rm9ybWF0dGVkTGVuZ3RoIH0gZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9NZWFzdXJlLmpzJztcbmltcG9ydCBMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgR2VvbWV0cnlDb2xsZWN0aW9uIGZyb20gJ29sL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvSW50ZXJhY3Rpb25NZWFzdSkge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX25nZW9JbnRlcmFjdGlvbk1lYXN1KTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdCh1bml0UHJlZml4Rm9ybWF0LCBudW1iZXJGb3JtYXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfbmdlb0ludGVyYWN0aW9uTWVhc3UuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIHZhciBjb250aW51ZU1zZztcblxuICAgIGlmIChvcHRpb25zLmNvbnRpbnVlTXNnICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlTXNnID0gb3B0aW9ucy5jb250aW51ZU1zZztcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGludWVNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb250aW51ZU1zZy50ZXh0Q29udGVudCA9ICdDbGljayB0byBmaW5pc2guJztcbiAgICB9XG5cbiAgICBfdGhpcy5jb250aW51ZU1zZyA9IGNvbnRpbnVlTXNnO1xuICAgIF90aGlzLm51bWJlckZvcm1hdCA9IG51bWJlckZvcm1hdDtcbiAgICBfdGhpcy51bml0UHJlZml4Rm9ybWF0ID0gdW5pdFByZWZpeEZvcm1hdDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHJldHVybiBuZXcgbmdlb0ludGVyYWN0aW9uRHJhd0F6aW11dCh7XG4gICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgIHN0eWxlOiBzdHlsZVxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNZWFzdXJlID0gZnVuY3Rpb24gaGFuZGxlTWVhc3VyZShjYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5za2V0Y2hGZWF0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2tldGNoRmVhdHVyZScpO1xuICAgIH1cblxuICAgIHZhciBnZW9tID0gdGhpcy5za2V0Y2hGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIShnZW9tIGluc3RhbmNlb2YgR2VvbWV0cnlDb2xsZWN0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgdmFyIGxpbmUgPSBnZW9tLmdldEdlb21ldHJpZXMoKVswXTtcblxuICAgIGlmICghKGxpbmUgaW5zdGFuY2VvZiBMaW5lU3RyaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGxpbmUnKTtcbiAgICB9XG5cbiAgICB2YXIgb3V0cHV0ID0gZ2V0Rm9ybWF0dGVkQXppbXV0UmFkaXVzKGxpbmUsIHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSwgdGhpcy5kZWNpbWFscywgdGhpcy5wcmVjaXNpb24sIHRoaXMudW5pdFByZWZpeEZvcm1hdCwgdGhpcy5udW1iZXJGb3JtYXQpO1xuICAgIGNhbGxiYWNrKG91dHB1dCwgbGluZS5nZXRMYXN0Q29vcmRpbmF0ZSgpKTtcbiAgfTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9JbnRlcmFjdGlvbk1lYXN1cmUpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXppbXV0KGxpbmUpIHtcbiAgdmFyIGNvb3JkcyA9IGxpbmUuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgdmFyIGR4ID0gY29vcmRzWzFdWzBdIC0gY29vcmRzWzBdWzBdO1xuICB2YXIgZHkgPSBjb29yZHNbMV1bMV0gLSBjb29yZHNbMF1bMV07XG4gIHZhciByYWQgPSBNYXRoLmFjb3MoZHkgLyBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpKTtcbiAgdmFyIGZhY3RvciA9IGR4ID4gMCA/IDEgOiAtMTtcbiAgcmV0dXJuIGZhY3RvciAqIHJhZCAqIDE4MCAvIE1hdGguUEkgJSAzNjA7XG59XG5cbmZ1bmN0aW9uIGdldEZvcm1hdHRlZEF6aW11dChsaW5lLCBkZWNpbWFscywgZm9ybWF0KSB7XG4gIHZhciBhemltdXQgPSBnZXRBemltdXQobGluZSk7XG4gIHJldHVybiBmb3JtYXQoYXppbXV0LCBkZWNpbWFscykgKyBcIlxceEIwXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRBemltdXRSYWRpdXMobGluZSwgcHJvamVjdGlvbiwgZGVjaW1hbHMsIHByZWNpc2lvbiwgZm9ybWF0TGVuZ3RoLCBmb3JtYXRBemltdXQpIHtcbiAgdmFyIG91dHB1dCA9IGdldEZvcm1hdHRlZEF6aW11dChsaW5lLCBkZWNpbWFscywgZm9ybWF0QXppbXV0KTtcbiAgb3V0cHV0ICs9IFwiLCBcIiArIGdldEZvcm1hdHRlZExlbmd0aChsaW5lLCBwcm9qZWN0aW9uLCBwcmVjaXNpb24sIGZvcm1hdExlbmd0aCk7XG4gIHJldHVybiBvdXRwdXQ7XG59IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlLCB7IGdldEZvcm1hdHRlZExlbmd0aCB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZS5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvbkRyYXcgZnJvbSAnb2wvaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG5pbXBvcnQgTGluZVN0cmluZyBmcm9tICdvbC9nZW9tL0xpbmVTdHJpbmcuanMnO1xuaW1wb3J0IHsgZGlzdGFuY2UgfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zWFkgfSBmcm9tICdvbC9leHRlbnQuanMnO1xudmFyIG1vZGlmaWVyUHJlc3NlZDtcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvSW50ZXJhY3Rpb25NZWFzdSkge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX25nZW9JbnRlcmFjdGlvbk1lYXN1KTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChmb3JtYXQsIGdldHRleHRDYXRhbG9nLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIF90aGlzID0gX25nZW9JbnRlcmFjdGlvbk1lYXN1LmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcblxuICAgIGlmIChtb2RpZmllclByZXNzZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbW9kaWZpZXJQcmVzc2VkID0gZmFsc2U7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIG1vZGlmaWVyUHJlc3NlZCA9IGV2dC5rZXlDb2RlID09PSAxNztcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbW9kaWZpZXJQcmVzc2VkID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jb250aW51ZU1zZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBfdGhpcy5jb250aW51ZU1zZyA9IG9wdGlvbnMuY29udGludWVNc2c7XG4gICAgfSBlbHNlIHtcbiAgICAgIF90aGlzLmNvbnRpbnVlTXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgX3RoaXMuY29udGludWVNc2cudGV4dENvbnRlbnQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0NsaWNrIHRvIGNvbnRpbnVlIGRyYXdpbmcgdGhlIGxpbmUuJyk7XG4gICAgICB2YXIgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpO1xuICAgICAgYnIudGV4dENvbnRlbnQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0RvdWJsZS1jbGljayBvciBjbGljayBsYXN0IHBvaW50IHRvIGZpbmlzaC4nKTtcblxuICAgICAgX3RoaXMuY29udGludWVNc2cuYXBwZW5kQ2hpbGQoYnIpO1xuICAgIH1cblxuICAgIF90aGlzLnNwaGVyaWNhbCA9IGZhbHNlO1xuICAgIF90aGlzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICBfdGhpcy50b2xlcmFuY2UgPSBvcHRpb25zLnRvbGVyYW5jZTtcbiAgICBfdGhpcy5zb3VyY2UgPSBvcHRpb25zLnNvdXJjZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVEcmF3SW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oc3R5bGUsIHNvdXJjZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBvbEludGVyYWN0aW9uRHJhdyh7XG4gICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICBnZW9tZXRyeUZ1bmN0aW9uOiBmdW5jdGlvbiBnZW9tZXRyeUZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBvcHRfZ2VvbWV0cnkpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5saW5lc3RyaW5nR2VvbWV0cnlGdW5jdGlvbihjb29yZGluYXRlcywgb3B0X2dlb21ldHJ5KTtcbiAgICAgIH0sXG4gICAgICBjb25kaXRpb246IGZ1bmN0aW9uIGNvbmRpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9LFxuICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgc291cmNlOiBzb3VyY2VcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8ubGluZXN0cmluZ0dlb21ldHJ5RnVuY3Rpb24gPSBmdW5jdGlvbiBsaW5lc3RyaW5nR2VvbWV0cnlGdW5jdGlvbihjb29yZGluYXRlcywgb3B0X2dlb21ldHJ5KSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICBpZiAobW9kaWZpZXJQcmVzc2VkKSB7XG4gICAgICB2YXIgdmlld1JvdGF0aW9uID0gdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuZ2V0Um90YXRpb24oKTtcbiAgICAgIHZhciBhbmdsZSA9IE1hdGguUEkgLyA0O1xuICAgICAgdmFyIGZyb20gPSBjb29yZGluYXRlc1tjb29yZGluYXRlcy5sZW5ndGggLSAyXTtcbiAgICAgIHZhciB0byA9IGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVzLmxlbmd0aCAtIDFdO1xuICAgICAgdmFyIGR4ID0gZnJvbVswXSAtIHRvWzBdO1xuICAgICAgdmFyIGR5ID0gZnJvbVsxXSAtIHRvWzFdO1xuICAgICAgdmFyIGxlbmd0aCA9IGRpc3RhbmNlKGZyb20sIHRvKTtcbiAgICAgIHZhciByb3RhdGlvbiA9IHZpZXdSb3RhdGlvbiArIE1hdGgucm91bmQoKE1hdGguYXRhbjIoZHksIGR4KSAtIHZpZXdSb3RhdGlvbikgLyBhbmdsZSkgKiBhbmdsZTtcbiAgICAgIHRvWzBdID0gZnJvbVswXSAtIGxlbmd0aCAqIE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICAgIHRvWzFdID0gZnJvbVsxXSAtIGxlbmd0aCAqIE1hdGguc2luKHJvdGF0aW9uKTtcblxuICAgICAgaWYgKHRoaXMudG9sZXJhbmNlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5zb3VyY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpO1xuXG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2aWV3Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuXG4gICAgICAgIGlmICghcmVzb2x1dGlvbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXNvbHV0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVsdGEgPSByZXNvbHV0aW9uICogdGhpcy50b2xlcmFuY2U7XG4gICAgICAgIHZhciBiYm94ID0gW3RvWzBdIC0gZGVsdGEsIHRvWzFdIC0gZGVsdGEsIHRvWzBdICsgZGVsdGEsIHRvWzFdICsgZGVsdGFdO1xuICAgICAgICB2YXIgbGF5ZXJTb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgdmFyIGZlYXR1cmVzSW5FeHRlbnQgPSBsYXllclNvdXJjZS5nZXRGZWF0dXJlc0luRXh0ZW50KGJib3gpO1xuICAgICAgICBmZWF0dXJlc0luRXh0ZW50LmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICB2YXIgbGFzdEludGVyc2VjdGlvbiA9IFtdO1xuICAgICAgICAgIHZhciBiZXN0SW50ZXJzZWN0aW9uID0gW107XG4gICAgICAgICAgdmFyIGJlc3REaXN0YW5jZSA9IEluZmluaXR5O1xuICAgICAgICAgIHZhciBkaXN0YW5jZUZyb21UbyA9IGRpc3RhbmNlKGZyb20sIHRvKTtcbiAgICAgICAgICB2YXIgYXggPSBmcm9tWzBdO1xuICAgICAgICAgIHZhciBheSA9IGZyb21bMV07XG4gICAgICAgICAgdmFyIG14ID0gdG9bMF07XG4gICAgICAgICAgdmFyIG15ID0gdG9bMV07XG4gICAgICAgICAgdmFyIHVuaXRWZWN0b3IgPSBbKG14IC0gYXgpIC8gZGlzdGFuY2VGcm9tVG8sIChteSAtIGF5KSAvIGRpc3RhbmNlRnJvbVRvXTtcbiAgICAgICAgICB2YXIgYiA9IFtheCArIChkaXN0YW5jZUZyb21UbyArIGRlbHRhKSAqIHVuaXRWZWN0b3JbMF0sIGF5ICsgKGRpc3RhbmNlRnJvbVRvICsgZGVsdGEpICogdW5pdFZlY3RvclsxXV07XG4gICAgICAgICAgdmFyIGdlb20gPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgICAgICBpZiAoIShnZW9tIGluc3RhbmNlb2YgTGluZVN0cmluZykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZ2VvbWV0cnkgdHlwZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGdlb20uZm9yRWFjaFNlZ21lbnQoZnVuY3Rpb24gKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICAgICAgICBsYXN0SW50ZXJzZWN0aW9uID0gX3RoaXMzLmNvbXB1dGVMaW5lU2VnbWVudEludGVyc2VjdGlvbihbZnJvbSwgYl0sIFtwb2ludDEsIHBvaW50Ml0pO1xuXG4gICAgICAgICAgICBpZiAobGFzdEludGVyc2VjdGlvbiAhPT0gdW5kZWZpbmVkICYmIGNvbnRhaW5zWFkoYmJveCwgbGFzdEludGVyc2VjdGlvblswXSwgbGFzdEludGVyc2VjdGlvblsxXSkpIHtcbiAgICAgICAgICAgICAgdmFyIGxhc3REaXN0YW5jZSA9IGRpc3RhbmNlKHRvLCBsYXN0SW50ZXJzZWN0aW9uKTtcblxuICAgICAgICAgICAgICBpZiAobGFzdERpc3RhbmNlIDwgYmVzdERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgYmVzdERpc3RhbmNlID0gbGFzdERpc3RhbmNlO1xuICAgICAgICAgICAgICAgIGJlc3RJbnRlcnNlY3Rpb24gPSBsYXN0SW50ZXJzZWN0aW9uO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoYmVzdEludGVyc2VjdGlvbikge1xuICAgICAgICAgICAgdG9bMF0gPSBiZXN0SW50ZXJzZWN0aW9uWzBdIHx8IHRvWzBdO1xuICAgICAgICAgICAgdG9bMV0gPSBiZXN0SW50ZXJzZWN0aW9uWzFdIHx8IHRvWzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdlb21ldHJ5ID0gb3B0X2dlb21ldHJ5O1xuXG4gICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgICByZXR1cm4gZ2VvbWV0cnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBMaW5lU3RyaW5nKGNvb3JkaW5hdGVzKTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlTWVhc3VyZSA9IGZ1bmN0aW9uIGhhbmRsZU1lYXN1cmUoY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuc2tldGNoRmVhdHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHNrZXRjaEZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbSA9IHRoaXMuc2tldGNoRmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCEoZ2VvbSBpbnN0YW5jZW9mIExpbmVTdHJpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIGdlb21ldHJ5IHR5cGUnKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvaiA9IHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zb2xlLmFzc2VydChwcm9qKTtcbiAgICB2YXIgb3V0cHV0ID0gZ2V0Rm9ybWF0dGVkTGVuZ3RoKGdlb20sIHByb2osIHRoaXMucHJlY2lzaW9uLCB0aGlzLmZvcm1hdCwgdGhpcy5zcGhlcmljYWwpO1xuICAgIHZhciBjb29yZCA9IGdlb20uZ2V0TGFzdENvb3JkaW5hdGUoKTtcbiAgICBjYWxsYmFjayhvdXRwdXQsIGNvb3JkKTtcbiAgfTtcblxuICBfcHJvdG8uY29tcHV0ZUxpbmVTZWdtZW50SW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gY29tcHV0ZUxpbmVTZWdtZW50SW50ZXJzZWN0aW9uKGxpbmUxLCBsaW5lMikge1xuICAgIHZhciBudW1lcmF0b3IxQSA9IChsaW5lMlsxXVswXSAtIGxpbmUyWzBdWzBdKSAqIChsaW5lMVswXVsxXSAtIGxpbmUyWzBdWzFdKSAtIChsaW5lMlsxXVsxXSAtIGxpbmUyWzBdWzFdKSAqIChsaW5lMVswXVswXSAtIGxpbmUyWzBdWzBdKTtcbiAgICB2YXIgbnVtZXJhdG9yMUIgPSAobGluZTFbMV1bMF0gLSBsaW5lMVswXVswXSkgKiAobGluZTFbMF1bMV0gLSBsaW5lMlswXVsxXSkgLSAobGluZTFbMV1bMV0gLSBsaW5lMVswXVsxXSkgKiAobGluZTFbMF1bMF0gLSBsaW5lMlswXVswXSk7XG4gICAgdmFyIGRlbm9taW5hdG9yMSA9IChsaW5lMlsxXVsxXSAtIGxpbmUyWzBdWzFdKSAqIChsaW5lMVsxXVswXSAtIGxpbmUxWzBdWzBdKSAtIChsaW5lMlsxXVswXSAtIGxpbmUyWzBdWzBdKSAqIChsaW5lMVsxXVsxXSAtIGxpbmUxWzBdWzFdKTtcblxuICAgIGlmIChkZW5vbWluYXRvcjEgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdWExID0gbnVtZXJhdG9yMUEgLyBkZW5vbWluYXRvcjE7XG4gICAgdmFyIHViMSA9IG51bWVyYXRvcjFCIC8gZGVub21pbmF0b3IxO1xuXG4gICAgaWYgKHVhMSA+PSAwICYmIHVhMSA8PSAxICYmIHViMSA+PSAwICYmIHViMSA8PSAxKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICByZXN1bHRbMF0gPSBsaW5lMVswXVswXSArIHVhMSAqIChsaW5lMVsxXVswXSAtIGxpbmUxWzBdWzBdKTtcbiAgICAgIHJlc3VsdFsxXSA9IGxpbmUxWzBdWzFdICsgdWExICogKGxpbmUxWzFdWzFdIC0gbGluZTFbMF1bMV0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgeyBkZWxldGVDb25kaXRpb24gfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMgZnJvbSAnbmdlby9mb3JtYXQvRmVhdHVyZVByb3BlcnRpZXMuanMnO1xuaW1wb3J0IG5nZW9JbnRlcmFjdGlvbk1vZGlmeUNpcmNsZSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01vZGlmeUNpcmNsZS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTW9kaWZ5UmVjdGFuZ2xlIGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTW9kaWZ5UmVjdGFuZ2xlLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnb2wvZnVuY3Rpb25zLmpzJztcbmltcG9ydCBvbEludGVyYWN0aW9uSW50ZXJhY3Rpb24gZnJvbSAnb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IG9sQ29sbGVjdGlvbiBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBvbEludGVyYWN0aW9uTW9kaWZ5IGZyb20gJ29sL2ludGVyYWN0aW9uL01vZGlmeS5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH0gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfb2xJbnRlcmFjdGlvbkludGVyYWMpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9vbEludGVyYWN0aW9uSW50ZXJhYyk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25JbnRlcmFjLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IFRSVUVcbiAgICB9KSB8fCB0aGlzO1xuICAgIGNvbnNvbGUuYXNzZXJ0KG9wdGlvbnMuZmVhdHVyZXMpO1xuICAgIF90aGlzLmZlYXR1cmVzXyA9IG9wdGlvbnMuZmVhdHVyZXM7XG4gICAgX3RoaXMubGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgIF90aGlzLmludGVyYWN0aW9uc18gPSBbXTtcbiAgICBfdGhpcy5vdGhlckZlYXR1cmVzXyA9IG5ldyBvbENvbGxlY3Rpb24oKTtcblxuICAgIF90aGlzLmludGVyYWN0aW9uc18ucHVzaChuZXcgb2xJbnRlcmFjdGlvbk1vZGlmeSh7XG4gICAgICBkZWxldGVDb25kaXRpb246IGRlbGV0ZUNvbmRpdGlvbixcbiAgICAgIGZlYXR1cmVzOiBfdGhpcy5vdGhlckZlYXR1cmVzXyxcbiAgICAgIHBpeGVsVG9sZXJhbmNlOiBvcHRpb25zLnBpeGVsVG9sZXJhbmNlLFxuICAgICAgc3R5bGU6IG9wdGlvbnMuc3R5bGUsXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWFxuICAgIH0pKTtcblxuICAgIF90aGlzLmNpcmNsZUZlYXR1cmVzXyA9IG5ldyBvbENvbGxlY3Rpb24oKTtcblxuICAgIF90aGlzLmludGVyYWN0aW9uc18ucHVzaChuZXcgbmdlb0ludGVyYWN0aW9uTW9kaWZ5Q2lyY2xlKHtcbiAgICAgIGZlYXR1cmVzOiBfdGhpcy5jaXJjbGVGZWF0dXJlc18sXG4gICAgICBwaXhlbFRvbGVyYW5jZTogb3B0aW9ucy5waXhlbFRvbGVyYW5jZSxcbiAgICAgIHN0eWxlOiBvcHRpb25zLnN0eWxlLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFhcbiAgICB9LCBvcHRpb25zLm5iUG9pbnRzKSk7XG5cbiAgICBfdGhpcy5yZWN0YW5nbGVGZWF0dXJlc18gPSBuZXcgb2xDb2xsZWN0aW9uKCk7XG5cbiAgICBfdGhpcy5pbnRlcmFjdGlvbnNfLnB1c2gobmV3IG5nZW9JbnRlcmFjdGlvbk1vZGlmeVJlY3RhbmdsZSh7XG4gICAgICBmZWF0dXJlczogX3RoaXMucmVjdGFuZ2xlRmVhdHVyZXNfLFxuICAgICAgcGl4ZWxUb2xlcmFuY2U6IG9wdGlvbnMucGl4ZWxUb2xlcmFuY2UsXG4gICAgICBzdHlsZTogb3B0aW9ucy5zdHlsZSxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlKGFjdGl2ZSkge1xuICAgIF9vbEludGVyYWN0aW9uSW50ZXJhYy5wcm90b3R5cGUuc2V0QWN0aXZlLmNhbGwodGhpcywgYWN0aXZlKTtcblxuICAgIHRoaXMuc2V0U3RhdGVfKCk7XG4gIH07XG5cbiAgX3Byb3RvLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcChtYXApIHtcbiAgICB2YXIgaW50ZXJhY3Rpb25zID0gdGhpcy5pbnRlcmFjdGlvbnNfO1xuICAgIHZhciBjdXJyZW50TWFwID0gdGhpcy5nZXRNYXAoKTtcblxuICAgIGlmIChjdXJyZW50TWFwKSB7XG4gICAgICBpbnRlcmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgY3VycmVudE1hcC5yZW1vdmVJbnRlcmFjdGlvbihpbnRlcmFjdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBfb2xJbnRlcmFjdGlvbkludGVyYWMucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG5cbiAgICBpZiAobWFwKSB7XG4gICAgICBpbnRlcmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgbWFwLmFkZEludGVyYWN0aW9uKGludGVyYWN0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGVfKCk7XG4gIH07XG5cbiAgX3Byb3RvLnNldFN0YXRlXyA9IGZ1bmN0aW9uIHNldFN0YXRlXygpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHZhciBhY3RpdmUgPSB0aGlzLmdldEFjdGl2ZSgpO1xuICAgIHZhciBpbnRlcmFjdGlvbnMgPSB0aGlzLmludGVyYWN0aW9uc187XG4gICAgdmFyIGtleXMgPSB0aGlzLmxpc3RlbmVyS2V5c187XG5cbiAgICBpZiAoIWludGVyYWN0aW9ucyB8fCAha2V5cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludGVyYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgICAgaW50ZXJhY3Rpb24uc2V0QWN0aXZlKGFjdGl2ZSAmJiAhIW1hcCk7XG4gICAgfSk7XG5cbiAgICBpZiAoYWN0aXZlICYmIG1hcCkge1xuICAgICAgdGhpcy5mZWF0dXJlc18uZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLmFkZEZlYXR1cmVfKGZlYXR1cmUpO1xuICAgICAgfSk7XG4gICAgICBrZXlzLnB1c2gobGlzdGVuKHRoaXMuZmVhdHVyZXNfLCAnYWRkJywgdGhpcy5oYW5kbGVGZWF0dXJlc0FkZF8sIHRoaXMpLCBsaXN0ZW4odGhpcy5mZWF0dXJlc18sICdyZW1vdmUnLCB0aGlzLmhhbmRsZUZlYXR1cmVzUmVtb3ZlXywgdGhpcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICBrZXlzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLmZlYXR1cmVzXy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIucmVtb3ZlRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUZlYXR1cmVzQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVzQWRkXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgZmVhdHVyZSA9IGV2dC5lbGVtZW50O1xuICAgICAgY29uc29sZS5hc3NlcnQoZmVhdHVyZSBpbnN0YW5jZW9mIG9sRmVhdHVyZSwgJ2ZlYXR1cmUgc2hvdWxkIGJlIGFuIG9sLkZlYXR1cmUnKTtcbiAgICAgIHRoaXMuYWRkRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVGZWF0dXJlc1JlbW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVGZWF0dXJlc1JlbW92ZV8oZXZ0KSB7XG4gICAgaWYgKGV2dCBpbnN0YW5jZW9mIENvbGxlY3Rpb25FdmVudCkge1xuICAgICAgdmFyIGZlYXR1cmUgPSBldnQuZWxlbWVudDtcbiAgICAgIHRoaXMucmVtb3ZlRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5hZGRGZWF0dXJlXyA9IGZ1bmN0aW9uIGFkZEZlYXR1cmVfKGZlYXR1cmUpIHtcbiAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXMuZ2V0RmVhdHVyZUNvbGxlY3Rpb25fKGZlYXR1cmUpO1xuICAgIGNvbGxlY3Rpb24ucHVzaChmZWF0dXJlKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlRmVhdHVyZV8gPSBmdW5jdGlvbiByZW1vdmVGZWF0dXJlXyhmZWF0dXJlKSB7XG4gICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLmdldEZlYXR1cmVDb2xsZWN0aW9uXyhmZWF0dXJlKTtcbiAgICBjb2xsZWN0aW9uLnJlbW92ZShmZWF0dXJlKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0RmVhdHVyZUNvbGxlY3Rpb25fID0gZnVuY3Rpb24gZ2V0RmVhdHVyZUNvbGxlY3Rpb25fKGZlYXR1cmUpIHtcbiAgICB2YXIgZmVhdHVyZXM7XG4gICAgdmFyIGlzQ2lyY2xlID0gZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX0NJUkNMRSk7XG4gICAgdmFyIGlzUmVjdGFuZ2xlID0gZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1JFQ1RBTkdMRSk7XG5cbiAgICBpZiAoaXNDaXJjbGUgPT09IHRydWUgfHwgaXNDaXJjbGUgPT09ICd0cnVlJykge1xuICAgICAgZmVhdHVyZXMgPSB0aGlzLmNpcmNsZUZlYXR1cmVzXztcbiAgICB9IGVsc2UgaWYgKGlzUmVjdGFuZ2xlID09PSB0cnVlIHx8IGlzUmVjdGFuZ2xlID09PSAndHJ1ZScpIHtcbiAgICAgIGZlYXR1cmVzID0gdGhpcy5yZWN0YW5nbGVGZWF0dXJlc187XG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVzID0gdGhpcy5vdGhlckZlYXR1cmVzXztcbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZXM7XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShvbEludGVyYWN0aW9uSW50ZXJhY3Rpb24pO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgbmdlb0N1c3RvbUV2ZW50IGZyb20gJ25nZW8vQ3VzdG9tRXZlbnQuanMnO1xuaW1wb3J0IG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcyBmcm9tICduZ2VvL2Zvcm1hdC9GZWF0dXJlUHJvcGVydGllcy5qcyc7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kaWZ5U3R5bGVGdW5jdGlvbiB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vY29tbW9uLmpzJztcbmltcG9ydCB7IGdldEF6aW11dCB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZUF6aW11dC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IG9sTWFwQnJvd3NlckV2ZW50IGZyb20gJ29sL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgKiBhcyBvbENvb3JkaW5hdGUgZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0ICogYXMgb2xFeHRlbnQgZnJvbSAnb2wvZXh0ZW50LmpzJztcbmltcG9ydCBvbEdlb21DaXJjbGUgZnJvbSAnb2wvZ2VvbS9DaXJjbGUuanMnO1xuaW1wb3J0IG9sR2VvbUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21Qb2ludCBmcm9tICdvbC9nZW9tL1BvaW50LmpzJztcbmltcG9ydCB7IGZyb21DaXJjbGUgfSBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25Qb2ludGVyIGZyb20gJ29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuaW1wb3J0IG9sTGF5ZXJWZWN0b3IgZnJvbSAnb2wvbGF5ZXIvVmVjdG9yLmpzJztcbmltcG9ydCBvbFNvdXJjZVZlY3RvciBmcm9tICdvbC9zb3VyY2UvVmVjdG9yLmpzJztcbmltcG9ydCBvbFN0cnVjdHNSQnVzaCBmcm9tICdvbC9zdHJ1Y3RzL1JCdXNoLmpzJztcbmltcG9ydCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX29sSW50ZXJhY3Rpb25Qb2ludGVyKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfb2xJbnRlcmFjdGlvblBvaW50ZXIpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMsIG5iUG9pbnRzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfb2xJbnRlcmFjdGlvblBvaW50ZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIF90aGlzLmhhbmRsZURvd25FdmVudCA9IF90aGlzLmhhbmRsZURvd25FdmVudF87XG4gICAgX3RoaXMuaGFuZGxlRHJhZ0V2ZW50ID0gX3RoaXMuaGFuZGxlRHJhZ0V2ZW50XztcbiAgICBfdGhpcy5oYW5kbGVVcEV2ZW50ID0gX3RoaXMuaGFuZGxlVXBFdmVudF87XG4gICAgY29uc29sZS5hc3NlcnQob3B0aW9ucy5mZWF0dXJlcyk7XG4gICAgX3RoaXMudmVydGV4RmVhdHVyZV8gPSBudWxsO1xuICAgIF90aGlzLmxhc3RQaXhlbF8gPSBbMCwgMF07XG4gICAgX3RoaXMubW9kaWZpZWRfID0gZmFsc2U7XG4gICAgX3RoaXMuckJ1c2hfID0gbmV3IG9sU3RydWN0c1JCdXNoKCk7XG4gICAgX3RoaXMucGl4ZWxUb2xlcmFuY2VfID0gb3B0aW9ucy5waXhlbFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waXhlbFRvbGVyYW5jZSA6IDEwO1xuICAgIF90aGlzLm5iUG9pbnRzID0gbmJQb2ludHMgfHwgNjQ7XG4gICAgX3RoaXMuc25hcHBlZFRvVmVydGV4XyA9IGZhbHNlO1xuICAgIF90aGlzLmNoYW5naW5nRmVhdHVyZV8gPSBmYWxzZTtcbiAgICBfdGhpcy5kcmFnU2VnbWVudHNfID0gW107XG4gICAgX3RoaXMub3ZlcmxheV8gPSBuZXcgb2xMYXllclZlY3Rvcih7XG4gICAgICBzb3VyY2U6IG5ldyBvbFNvdXJjZVZlY3Rvcih7XG4gICAgICAgIHVzZVNwYXRpYWxJbmRleDogZmFsc2UsXG4gICAgICAgIHdyYXBYOiAhIW9wdGlvbnMud3JhcFhcbiAgICAgIH0pLFxuICAgICAgc3R5bGU6IG9wdGlvbnMuc3R5bGUgfHwgZ2V0RGVmYXVsdE1vZGlmeVN0eWxlRnVuY3Rpb24oKSxcbiAgICAgIHVwZGF0ZVdoaWxlQW5pbWF0aW5nOiB0cnVlLFxuICAgICAgdXBkYXRlV2hpbGVJbnRlcmFjdGluZzogdHJ1ZVxuICAgIH0pO1xuICAgIF90aGlzLmZlYXR1cmVzXyA9IG9wdGlvbnMuZmVhdHVyZXM7XG5cbiAgICBfdGhpcy5mZWF0dXJlc18uZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgcmV0dXJuIF90aGlzLmFkZEZlYXR1cmVfKGZlYXR1cmUpO1xuICAgIH0pO1xuXG4gICAgbGlzdGVuKF90aGlzLmZlYXR1cmVzXywgJ2FkZCcsIF90aGlzLmhhbmRsZUZlYXR1cmVBZGRfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgbGlzdGVuKF90aGlzLmZlYXR1cmVzXywgJ3JlbW92ZScsIF90aGlzLmhhbmRsZUZlYXR1cmVSZW1vdmVfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uYWRkRmVhdHVyZV8gPSBmdW5jdGlvbiBhZGRGZWF0dXJlXyhmZWF0dXJlKSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCFnZW9tZXRyeSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgaWYgKGdlb21ldHJ5LmdldFR5cGUoKSA9PT0gJ1BvbHlnb24nICYmICEhZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX0NJUkNMRSkpIHtcbiAgICAgIHZhciBfZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgIHRoaXMud3JpdGVDaXJjbGVHZW9tZXRyeV8oZmVhdHVyZSwgX2dlb21ldHJ5KTtcbiAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuXG4gICAgICBpZiAobWFwKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlUG9pbnRlckF0UGl4ZWxfKHRoaXMubGFzdFBpeGVsXywgbWFwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLndpbGxNb2RpZnlGZWF0dXJlc18gPSBmdW5jdGlvbiB3aWxsTW9kaWZ5RmVhdHVyZXNfKGV2dCkge1xuICAgIGlmICghdGhpcy5tb2RpZmllZF8pIHtcbiAgICAgIHRoaXMubW9kaWZpZWRfID0gdHJ1ZTtcbiAgICAgIHZhciBldmVudCA9IG5ldyBuZ2VvQ3VzdG9tRXZlbnQoJ21vZGlmeXN0YXJ0Jywge1xuICAgICAgICBmZWF0dXJlczogdGhpcy5mZWF0dXJlc19cbiAgICAgIH0pO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZUZlYXR1cmVfID0gZnVuY3Rpb24gcmVtb3ZlRmVhdHVyZV8oZmVhdHVyZSkge1xuICAgIHRoaXMucmVtb3ZlRmVhdHVyZVNlZ21lbnREYXRhXyhmZWF0dXJlKTtcblxuICAgIGlmICh0aGlzLnZlcnRleEZlYXR1cmVfICYmIHRoaXMuZmVhdHVyZXNfLmdldExlbmd0aCgpID09PSAwKSB7XG4gICAgICB0aGlzLm92ZXJsYXlfLmdldFNvdXJjZSgpLnJlbW92ZUZlYXR1cmUodGhpcy52ZXJ0ZXhGZWF0dXJlXyk7XG4gICAgICB0aGlzLnZlcnRleEZlYXR1cmVfID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZUZlYXR1cmVTZWdtZW50RGF0YV8gPSBmdW5jdGlvbiByZW1vdmVGZWF0dXJlU2VnbWVudERhdGFfKGZlYXR1cmUpIHtcbiAgICB2YXIgckJ1c2ggPSB0aGlzLnJCdXNoXztcbiAgICB2YXIgbm9kZXNUb1JlbW92ZSA9IFtdO1xuICAgIHJCdXNoLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChmZWF0dXJlID09PSBub2RlLmZlYXR1cmUpIHtcbiAgICAgICAgbm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgaSA9IG5vZGVzVG9SZW1vdmUubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHJCdXNoLnJlbW92ZShub2Rlc1RvUmVtb3ZlW2ldKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcChtYXApIHtcbiAgICB0aGlzLm92ZXJsYXlfLnNldE1hcChtYXApO1xuXG4gICAgX29sSW50ZXJhY3Rpb25Qb2ludGVyLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVGZWF0dXJlQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVBZGRfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHZhciBmZWF0dXJlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICBjb25zb2xlLmFzc2VydChmZWF0dXJlIGluc3RhbmNlb2Ygb2xGZWF0dXJlLCAnZmVhdHVyZSBzaG91bGQgYmUgYW4gb2wuRmVhdHVyZScpO1xuICAgICAgdGhpcy5hZGRGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUZlYXR1cmVSZW1vdmVfID0gZnVuY3Rpb24gaGFuZGxlRmVhdHVyZVJlbW92ZV8oZXZ0KSB7XG4gICAgaWYgKGV2dCBpbnN0YW5jZW9mIENvbGxlY3Rpb25FdmVudCkge1xuICAgICAgdmFyIGZlYXR1cmUgPSBldnQuZWxlbWVudDtcbiAgICAgIHRoaXMucmVtb3ZlRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by53cml0ZUNpcmNsZUdlb21ldHJ5XyA9IGZ1bmN0aW9uIHdyaXRlQ2lyY2xlR2VvbWV0cnlfKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIHJpbmdzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcblxuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHJpbmdzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgIHZhciBjb29yZGluYXRlcyA9IHJpbmdzW2pdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGggLSAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgc2VnbWVudCA9IGNvb3JkaW5hdGVzLnNsaWNlKGksIGkgKyAyKTtcbiAgICAgICAgdmFyIHNlZ21lbnREYXRhID0ge1xuICAgICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICAgIGRlcHRoOiBbal0sXG4gICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJCdXNoXy5pbnNlcnQob2xFeHRlbnQuYm91bmRpbmdFeHRlbnQoc2VnbWVudCksIHNlZ21lbnREYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNyZWF0ZU9yVXBkYXRlVmVydGV4RmVhdHVyZV8gPSBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVZlcnRleEZlYXR1cmVfKGNvb3JkaW5hdGVzKSB7XG4gICAgdmFyIHZlcnRleEZlYXR1cmUgPSB0aGlzLnZlcnRleEZlYXR1cmVfO1xuXG4gICAgaWYgKCF2ZXJ0ZXhGZWF0dXJlKSB7XG4gICAgICB2ZXJ0ZXhGZWF0dXJlID0gbmV3IG9sRmVhdHVyZShuZXcgb2xHZW9tUG9pbnQoY29vcmRpbmF0ZXMpKTtcbiAgICAgIHRoaXMudmVydGV4RmVhdHVyZV8gPSB2ZXJ0ZXhGZWF0dXJlO1xuICAgICAgdGhpcy5vdmVybGF5Xy5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKHZlcnRleEZlYXR1cmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSB2ZXJ0ZXhGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgIGlmICghKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZ2VvbWV0cnkgdHlwZScpO1xuICAgICAgfVxuXG4gICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZlcnRleEZlYXR1cmU7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVBvaW50ZXJNb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJNb3ZlXyhldnQpIHtcbiAgICB0aGlzLmxhc3RQaXhlbF8gPSBldnQucGl4ZWw7XG4gICAgdGhpcy5oYW5kbGVQb2ludGVyQXRQaXhlbF8oZXZ0LnBpeGVsLCBldnQubWFwKTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlUG9pbnRlckF0UGl4ZWxfID0gZnVuY3Rpb24gaGFuZGxlUG9pbnRlckF0UGl4ZWxfKHBpeGVsLCBtYXApIHtcbiAgICB2YXIgcGl4ZWxDb29yZGluYXRlID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpO1xuXG4gICAgdmFyIHNvcnRCeURpc3RhbmNlID0gZnVuY3Rpb24gc29ydEJ5RGlzdGFuY2UoYSwgYikge1xuICAgICAgcmV0dXJuIG9sQ29vcmRpbmF0ZS5zcXVhcmVkRGlzdGFuY2VUb1NlZ21lbnQocGl4ZWxDb29yZGluYXRlLCBhLnNlZ21lbnQpIC0gb2xDb29yZGluYXRlLnNxdWFyZWREaXN0YW5jZVRvU2VnbWVudChwaXhlbENvb3JkaW5hdGUsIGIuc2VnbWVudCk7XG4gICAgfTtcblxuICAgIHZhciBsb3dlckxlZnQgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChbcGl4ZWxbMF0gLSB0aGlzLnBpeGVsVG9sZXJhbmNlXywgcGl4ZWxbMV0gKyB0aGlzLnBpeGVsVG9sZXJhbmNlX10pO1xuICAgIHZhciB1cHBlclJpZ2h0ID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwoW3BpeGVsWzBdICsgdGhpcy5waXhlbFRvbGVyYW5jZV8sIHBpeGVsWzFdIC0gdGhpcy5waXhlbFRvbGVyYW5jZV9dKTtcbiAgICB2YXIgYm94ID0gb2xFeHRlbnQuYm91bmRpbmdFeHRlbnQoW2xvd2VyTGVmdCwgdXBwZXJSaWdodF0pO1xuICAgIHZhciBub2RlcyA9IHRoaXMuckJ1c2hfLmdldEluRXh0ZW50KGJveCk7XG5cbiAgICBpZiAobm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgbm9kZXMuc29ydChzb3J0QnlEaXN0YW5jZSk7XG4gICAgICB2YXIgbm9kZSA9IG5vZGVzWzBdO1xuICAgICAgdmFyIGNsb3Nlc3RTZWdtZW50ID0gbm9kZS5zZWdtZW50O1xuICAgICAgdmFyIHZlcnRleCA9IG9sQ29vcmRpbmF0ZS5jbG9zZXN0T25TZWdtZW50KHBpeGVsQ29vcmRpbmF0ZSwgY2xvc2VzdFNlZ21lbnQpO1xuICAgICAgdmFyIHZlcnRleFBpeGVsID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUodmVydGV4KTtcblxuICAgICAgaWYgKE1hdGguc3FydChvbENvb3JkaW5hdGUuc3F1YXJlZERpc3RhbmNlKHBpeGVsLCB2ZXJ0ZXhQaXhlbCkpIDw9IHRoaXMucGl4ZWxUb2xlcmFuY2VfKSB7XG4gICAgICAgIHZhciBwaXhlbDEgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjbG9zZXN0U2VnbWVudFswXSk7XG4gICAgICAgIHZhciBwaXhlbDIgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjbG9zZXN0U2VnbWVudFsxXSk7XG4gICAgICAgIHZhciBzcXVhcmVkRGlzdDEgPSBvbENvb3JkaW5hdGUuc3F1YXJlZERpc3RhbmNlKHZlcnRleFBpeGVsLCBwaXhlbDEpO1xuICAgICAgICB2YXIgc3F1YXJlZERpc3QyID0gb2xDb29yZGluYXRlLnNxdWFyZWREaXN0YW5jZSh2ZXJ0ZXhQaXhlbCwgcGl4ZWwyKTtcbiAgICAgICAgdmFyIGRpc3QgPSBNYXRoLnNxcnQoTWF0aC5taW4oc3F1YXJlZERpc3QxLCBzcXVhcmVkRGlzdDIpKTtcbiAgICAgICAgdGhpcy5zbmFwcGVkVG9WZXJ0ZXhfID0gZGlzdCA8PSB0aGlzLnBpeGVsVG9sZXJhbmNlXztcblxuICAgICAgICBpZiAodGhpcy5zbmFwcGVkVG9WZXJ0ZXhfKSB7XG4gICAgICAgICAgdmVydGV4ID0gc3F1YXJlZERpc3QxID4gc3F1YXJlZERpc3QyID8gY2xvc2VzdFNlZ21lbnRbMV0gOiBjbG9zZXN0U2VnbWVudFswXTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlVmVydGV4RmVhdHVyZV8odmVydGV4KTtcbiAgICAgICAgICB2YXIgdmVydGV4U2VnbWVudHMgPSB7fTtcbiAgICAgICAgICB2ZXJ0ZXhTZWdtZW50c1tvbFV0aWxHZXRVaWQoY2xvc2VzdFNlZ21lbnQpXSA9IHRydWU7XG4gICAgICAgICAgdmFyIHNlZ21lbnQ7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBub2Rlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBzZWdtZW50ID0gbm9kZXNbaV0uc2VnbWVudDtcblxuICAgICAgICAgICAgaWYgKG9sQ29vcmRpbmF0ZS5lcXVhbHMoY2xvc2VzdFNlZ21lbnRbMF0sIHNlZ21lbnRbMF0pICYmIG9sQ29vcmRpbmF0ZS5lcXVhbHMoY2xvc2VzdFNlZ21lbnRbMV0sIHNlZ21lbnRbMV0pIHx8IG9sQ29vcmRpbmF0ZS5lcXVhbHMoY2xvc2VzdFNlZ21lbnRbMF0sIHNlZ21lbnRbMV0pICYmIG9sQ29vcmRpbmF0ZS5lcXVhbHMoY2xvc2VzdFNlZ21lbnRbMV0sIHNlZ21lbnRbMF0pKSB7XG4gICAgICAgICAgICAgIHZlcnRleFNlZ21lbnRzW29sVXRpbEdldFVpZChzZWdtZW50KV0gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmVydGV4RmVhdHVyZV8pIHtcbiAgICAgIHRoaXMub3ZlcmxheV8uZ2V0U291cmNlKCkucmVtb3ZlRmVhdHVyZSh0aGlzLnZlcnRleEZlYXR1cmVfKTtcbiAgICAgIHRoaXMudmVydGV4RmVhdHVyZV8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uc2V0R2VvbWV0cnlDb29yZGluYXRlc18gPSBmdW5jdGlvbiBzZXRHZW9tZXRyeUNvb3JkaW5hdGVzXyhnZW9tZXRyeSwgY29vcmRpbmF0ZXMpIHtcbiAgICB0aGlzLmNoYW5naW5nRmVhdHVyZV8gPSB0cnVlO1xuICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcbiAgICB0aGlzLmNoYW5naW5nRmVhdHVyZV8gPSBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRG93bkV2ZW50XyA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudF8oZXZ0KSB7XG4gICAgdGhpcy5oYW5kbGVQb2ludGVyQXRQaXhlbF8oZXZ0LnBpeGVsLCBldnQubWFwKTtcbiAgICB0aGlzLmRyYWdTZWdtZW50c18gPSBbXTtcbiAgICB0aGlzLm1vZGlmaWVkXyA9IGZhbHNlO1xuICAgIHZhciB2ZXJ0ZXhGZWF0dXJlID0gdGhpcy52ZXJ0ZXhGZWF0dXJlXztcblxuICAgIGlmICh2ZXJ0ZXhGZWF0dXJlKSB7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSB2ZXJ0ZXhGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgIGlmICghKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZ2VvbWV0cnkgdHlwZScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmVydGV4ID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIHZhciB2ZXJ0ZXhFeHRlbnQgPSBvbEV4dGVudC5ib3VuZGluZ0V4dGVudChbdmVydGV4XSk7XG4gICAgICB2YXIgc2VnbWVudERhdGFNYXRjaGVzID0gdGhpcy5yQnVzaF8uZ2V0SW5FeHRlbnQodmVydGV4RXh0ZW50KTtcbiAgICAgIHZhciBjb21wb25lbnRTZWdtZW50cyA9IHt9O1xuICAgICAgc2VnbWVudERhdGFNYXRjaGVzLnNvcnQoY29tcGFyZUluZGV4ZXMpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzZWdtZW50RGF0YU1hdGNoZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgc2VnbWVudERhdGFNYXRjaCA9IHNlZ21lbnREYXRhTWF0Y2hlc1tpXTtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50RGF0YU1hdGNoLnNlZ21lbnQ7XG4gICAgICAgIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQoc2VnbWVudERhdGFNYXRjaC5mZWF0dXJlKTtcbiAgICAgICAgdmFyIGRlcHRoID0gc2VnbWVudERhdGFNYXRjaC5kZXB0aDtcblxuICAgICAgICBpZiAoZGVwdGgpIHtcbiAgICAgICAgICB1aWQgKz0gXCItXCIgKyBkZXB0aC5qb2luKCctJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbXBvbmVudFNlZ21lbnRzW3VpZF0pIHtcbiAgICAgICAgICBjb21wb25lbnRTZWdtZW50c1t1aWRdID0gbmV3IEFycmF5KDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9sQ29vcmRpbmF0ZS5lcXVhbHMoc2VnbWVudFswXSwgdmVydGV4KSAmJiAhY29tcG9uZW50U2VnbWVudHNbdWlkXVswXSkge1xuICAgICAgICAgIHRoaXMuZHJhZ1NlZ21lbnRzXy5wdXNoKFtzZWdtZW50RGF0YU1hdGNoLCAwXSk7XG4gICAgICAgICAgY29tcG9uZW50U2VnbWVudHNbdWlkXVswXSA9IHNlZ21lbnREYXRhTWF0Y2g7XG4gICAgICAgIH0gZWxzZSBpZiAob2xDb29yZGluYXRlLmVxdWFscyhzZWdtZW50WzFdLCB2ZXJ0ZXgpICYmICFjb21wb25lbnRTZWdtZW50c1t1aWRdWzFdKSB7XG4gICAgICAgICAgdGhpcy5kcmFnU2VnbWVudHNfLnB1c2goW3NlZ21lbnREYXRhTWF0Y2gsIDFdKTtcbiAgICAgICAgICBjb21wb25lbnRTZWdtZW50c1t1aWRdWzFdID0gc2VnbWVudERhdGFNYXRjaDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAhIXRoaXMudmVydGV4RmVhdHVyZV87XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURyYWdFdmVudF8gPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnRfKGV2dCkge1xuICAgIHRoaXMud2lsbE1vZGlmeUZlYXR1cmVzXyhldnQpO1xuICAgIHZhciB2ZXJ0ZXggPSBldnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmRyYWdTZWdtZW50c19bMF1bMF0uZ2VvbWV0cnk7XG4gICAgdmFyIGNlbnRlciA9IG9sRXh0ZW50LmdldENlbnRlcihnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XG4gICAgdmFyIGxpbmUgPSBuZXcgb2xHZW9tTGluZVN0cmluZyhbY2VudGVyLCB2ZXJ0ZXhdKTtcbiAgICB2YXIgY2lyY2xlID0gbmV3IG9sR2VvbUNpcmNsZShjZW50ZXIsIGxpbmUuZ2V0TGVuZ3RoKCkpO1xuICAgIHZhciBjb29yZGluYXRlcyA9IGZyb21DaXJjbGUoY2lyY2xlLCB0aGlzLm5iUG9pbnRzKS5nZXRDb29yZGluYXRlcygpO1xuICAgIHRoaXMuc2V0R2VvbWV0cnlDb29yZGluYXRlc18oZ2VvbWV0cnksIGNvb3JkaW5hdGVzKTtcbiAgICB2YXIgYXppbXV0ID0gZ2V0QXppbXV0KGxpbmUpO1xuICAgIHRoaXMuZmVhdHVyZXNfLmdldEFycmF5KClbMF0uc2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5BWklNVVQsIGF6aW11dCk7XG4gICAgdGhpcy5jcmVhdGVPclVwZGF0ZVZlcnRleEZlYXR1cmVfKHZlcnRleCk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVVwRXZlbnRfID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudF8oZXZ0KSB7XG4gICAgdGhpcy5yQnVzaF8uY2xlYXIoKTtcbiAgICB0aGlzLndyaXRlQ2lyY2xlR2VvbWV0cnlfKHRoaXMuZHJhZ1NlZ21lbnRzX1swXVswXS5mZWF0dXJlLCB0aGlzLmRyYWdTZWdtZW50c19bMF1bMF0uZ2VvbWV0cnkpO1xuXG4gICAgaWYgKHRoaXMubW9kaWZpZWRfKSB7XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdtb2RpZnllbmQnLCB7XG4gICAgICAgIGZlYXR1cmVzOiB0aGlzLmZlYXR1cmVzX1xuICAgICAgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgdGhpcy5tb2RpZmllZF8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCEobWFwQnJvd3NlckV2ZW50IGluc3RhbmNlb2Ygb2xNYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgaGFuZGxlZDtcblxuICAgIGlmICghbWFwQnJvd3NlckV2ZW50Lm1hcC5nZXRWaWV3KCkuZ2V0SW50ZXJhY3RpbmcoKSAmJiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSAncG9pbnRlcm1vdmUnICYmICF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9vbEludGVyYWN0aW9uUG9pbnRlci5wcm90b3R5cGUuaGFuZGxlRXZlbnQuY2FsbCh0aGlzLCBtYXBCcm93c2VyRXZlbnQpICYmICFoYW5kbGVkO1xuICB9O1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0ob2xJbnRlcmFjdGlvblBvaW50ZXIpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07XG5cbmZ1bmN0aW9uIGNvbXBhcmVJbmRleGVzKGEsIGIpIHtcbiAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xufSIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kaWZ5U3R5bGVGdW5jdGlvbiB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vY29tbW9uLmpzJztcbmltcG9ydCBuZ2VvQ3VzdG9tRXZlbnQgZnJvbSAnbmdlby9DdXN0b21FdmVudC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbEdlb21Qb2ludCBmcm9tICdvbC9nZW9tL1BvaW50LmpzJztcbmltcG9ydCBvbEdlb21Qb2x5Z29uIGZyb20gJ29sL2dlb20vUG9seWdvbi5qcyc7XG5pbXBvcnQgb2xJbnRlcmFjdGlvblBvaW50ZXIgZnJvbSAnb2wvaW50ZXJhY3Rpb24vUG9pbnRlci5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU291cmNlVmVjdG9yIGZyb20gJ29sL3NvdXJjZS9WZWN0b3IuanMnO1xuaW1wb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH0gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5cbnZhciBNb2RpZnlSZWN0YW5nbGUgPSBmdW5jdGlvbiAoX29sSW50ZXJhY3Rpb25Qb2ludGVyKSB7XG4gIF9pbmhlcml0c0xvb3NlKE1vZGlmeVJlY3RhbmdsZSwgX29sSW50ZXJhY3Rpb25Qb2ludGVyKTtcblxuICBmdW5jdGlvbiBNb2RpZnlSZWN0YW5nbGUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25Qb2ludGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBjb25zb2xlLmFzc2VydChvcHRpb25zLmZlYXR1cmVzKTtcbiAgICBfdGhpcy5oYW5kbGVEb3duRXZlbnQgPSBfdGhpcy5oYW5kbGVEb3duXztcbiAgICBfdGhpcy5oYW5kbGVEcmFnRXZlbnQgPSBfdGhpcy5oYW5kbGVEcmFnXztcbiAgICBfdGhpcy5oYW5kbGVVcEV2ZW50ID0gX3RoaXMuaGFuZGxlVXBfO1xuICAgIF90aGlzLm1vZGlmaWVkXyA9IGZhbHNlO1xuICAgIF90aGlzLnZlY3RvclBvaW50c18gPSBuZXcgb2xMYXllclZlY3Rvcih7XG4gICAgICBzb3VyY2U6IG5ldyBvbFNvdXJjZVZlY3Rvcih7XG4gICAgICAgIHdyYXBYOiAhIW9wdGlvbnMud3JhcFhcbiAgICAgIH0pLFxuICAgICAgdmlzaWJsZTogX3RoaXMuZ2V0QWN0aXZlKCksXG4gICAgICBzdHlsZTogb3B0aW9ucy5zdHlsZSB8fCBnZXREZWZhdWx0TW9kaWZ5U3R5bGVGdW5jdGlvbigpLFxuICAgICAgdXBkYXRlV2hpbGVBbmltYXRpbmc6IHRydWUsXG4gICAgICB1cGRhdGVXaGlsZUludGVyYWN0aW5nOiB0cnVlXG4gICAgfSk7XG4gICAgX3RoaXMuZmVhdHVyZXNfID0gb3B0aW9ucy5mZWF0dXJlcztcbiAgICBfdGhpcy5mZWF0dXJlXyA9IG51bGw7XG4gICAgX3RoaXMuY2FjaGVfID0ge307XG4gICAgX3RoaXMucGFyYW1zXyA9IG51bGw7XG4gICAgbGlzdGVuKF90aGlzLmZlYXR1cmVzXywgJ2FkZCcsIF90aGlzLmhhbmRsZUZlYXR1cmVBZGRfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgbGlzdGVuKF90aGlzLmZlYXR1cmVzXywgJ3JlbW92ZScsIF90aGlzLmhhbmRsZUZlYXR1cmVSZW1vdmVfLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG5cbiAgICBfdGhpcy5mZWF0dXJlc18uZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgX3RoaXMuYWRkRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTW9kaWZ5UmVjdGFuZ2xlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlKGFjdGl2ZSkge1xuICAgIG9sSW50ZXJhY3Rpb25Qb2ludGVyLnByb3RvdHlwZS5zZXRBY3RpdmUuY2FsbCh0aGlzLCBhY3RpdmUpO1xuXG4gICAgaWYgKHRoaXMudmVjdG9yUG9pbnRzXykge1xuICAgICAgdGhpcy52ZWN0b3JQb2ludHNfLnNldFZpc2libGUoYWN0aXZlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmFkZEZlYXR1cmVfID0gZnVuY3Rpb24gYWRkRmVhdHVyZV8oZmVhdHVyZSkge1xuICAgIHZhciBmZWF0dXJlR2VvbSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgIGlmIChmZWF0dXJlR2VvbSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICAgIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQoZmVhdHVyZSk7XG4gICAgICB2YXIgaXRlbSA9IHRoaXMuY2FjaGVfW3VpZF07XG5cbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBvaW50U291cmNlID0gdGhpcy52ZWN0b3JQb2ludHNfLmdldFNvdXJjZSgpO1xuICAgICAgdmFyIGNvcm5lcnMgPSBmZWF0dXJlR2VvbS5nZXRDb29yZGluYXRlcygpWzBdO1xuXG4gICAgICB3aGlsZSAoY29ybmVycy5sZW5ndGggPiA0KSB7XG4gICAgICAgIGlmIChjb3JuZXJzWzBdWzBdIDwgY29ybmVyc1sxXVswXSAmJiBjb3JuZXJzWzBdWzFdIDw9IGNvcm5lcnNbMV1bMV0pIHtcbiAgICAgICAgICBjb3JuZXJzLnBvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvcm5lcnMuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgcG9pbnRGZWF0dXJlcyA9IFtdO1xuICAgICAgdmFyIGNvcm5lclBvaW50O1xuICAgICAgdmFyIGNvcm5lckZlYXR1cmU7XG4gICAgICBjb3JuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNvcm5lcikge1xuICAgICAgICBjb3JuZXJQb2ludCA9IG5ldyBvbEdlb21Qb2ludChjb3JuZXIpO1xuICAgICAgICBjb3JuZXJGZWF0dXJlID0gbmV3IG9sRmVhdHVyZSh7XG4gICAgICAgICAgJ2Nvcm5lcic6IHRydWUsXG4gICAgICAgICAgJ2dlb21ldHJ5JzogY29ybmVyUG9pbnQsXG4gICAgICAgICAgJ3NpYmxpbmdYJzogbnVsbCxcbiAgICAgICAgICAnc2libGluZ1knOiBudWxsLFxuICAgICAgICAgICdib3hGZWF0dXJlJzogZmVhdHVyZVxuICAgICAgICB9KTtcbiAgICAgICAgcG9pbnRGZWF0dXJlcy5wdXNoKGNvcm5lckZlYXR1cmUpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICBpdGVtID0ge1xuICAgICAgICBjb3JuZXJzOiBwb2ludEZlYXR1cmVzXG4gICAgICB9O1xuICAgICAgdGhpcy5jYWNoZV9bdWlkXSA9IGl0ZW07XG4gICAgICB2YXIgcHJldmlvdXNGZWF0dXJlO1xuICAgICAgdmFyIG5leHRGZWF0dXJlO1xuICAgICAgcG9pbnRGZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChjb3JuZXJGZWF0dXJlLCBpbmRleCkge1xuICAgICAgICBwcmV2aW91c0ZlYXR1cmUgPSBwb2ludEZlYXR1cmVzW2luZGV4IC0gMV07XG5cbiAgICAgICAgaWYgKCFwcmV2aW91c0ZlYXR1cmUpIHtcbiAgICAgICAgICBwcmV2aW91c0ZlYXR1cmUgPSBwb2ludEZlYXR1cmVzW3BvaW50RmVhdHVyZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0RmVhdHVyZSA9IHBvaW50RmVhdHVyZXNbaW5kZXggKyAxXTtcblxuICAgICAgICBpZiAoIW5leHRGZWF0dXJlKSB7XG4gICAgICAgICAgbmV4dEZlYXR1cmUgPSBwb2ludEZlYXR1cmVzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuICAgICAgICAgIGNvcm5lckZlYXR1cmUuc2V0KCdzaWJsaW5nWCcsIG5leHRGZWF0dXJlKTtcbiAgICAgICAgICBjb3JuZXJGZWF0dXJlLnNldCgnc2libGluZ1knLCBwcmV2aW91c0ZlYXR1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvcm5lckZlYXR1cmUuc2V0KCdzaWJsaW5nWCcsIHByZXZpb3VzRmVhdHVyZSk7XG4gICAgICAgICAgY29ybmVyRmVhdHVyZS5zZXQoJ3NpYmxpbmdZJywgbmV4dEZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHBvaW50U291cmNlLmFkZEZlYXR1cmVzKHBvaW50RmVhdHVyZXMpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8ud2lsbE1vZGlmeUZlYXR1cmVzXyA9IGZ1bmN0aW9uIHdpbGxNb2RpZnlGZWF0dXJlc18oZXZ0KSB7XG4gICAgaWYgKCF0aGlzLm1vZGlmaWVkXykge1xuICAgICAgdGhpcy5tb2RpZmllZF8gPSB0cnVlO1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnbW9kaWZ5c3RhcnQnLCB7XG4gICAgICAgIGZlYXR1cmVzOiB0aGlzLmZlYXR1cmVzX1xuICAgICAgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgdGhpcy5wYXJhbXNfID0gdGhpcy5pbml0aWFsaXplUGFyYW1zXygpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaW5pdGlhbGl6ZVBhcmFtc18gPSBmdW5jdGlvbiBpbml0aWFsaXplUGFyYW1zXygpIHtcbiAgICBpZiAoIXRoaXMuZmVhdHVyZV8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmZWF0dXJlJyk7XG4gICAgfVxuXG4gICAgdmFyIGZlYXR1cmUgPSB0aGlzLmZlYXR1cmVfO1xuICAgIHZhciBzaWJsaW5nWSA9IGZlYXR1cmUuZ2V0KCdzaWJsaW5nWCcpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHNpYmxpbmdZIGluc3RhbmNlb2Ygb2xGZWF0dXJlKTtcbiAgICB2YXIgb3JpZ2luID0gc2libGluZ1kuZ2V0KCdzaWJsaW5nWScpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KG9yaWdpbiBpbnN0YW5jZW9mIG9sRmVhdHVyZSk7XG4gICAgdmFyIG9yaWdpblBvaW50ID0gb3JpZ2luLmdldEdlb21ldHJ5KCk7XG4gICAgY29uc29sZS5hc3NlcnQob3JpZ2luUG9pbnQgaW5zdGFuY2VvZiBvbEdlb21Qb2ludCk7XG4gICAgdmFyIG9yaWdpbkNvb3JkaW5hdGUgPSBvcmlnaW5Qb2ludC5nZXRDb29yZGluYXRlcygpO1xuICAgIHZhciBvcmlnaW5QaXhlbCA9IHRoaXMuZ2V0TWFwKCkuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShvcmlnaW5Db29yZGluYXRlKTtcbiAgICB2YXIgc2libGluZ1ggPSBvcmlnaW4uZ2V0KCdzaWJsaW5nWCcpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHNpYmxpbmdYIGluc3RhbmNlb2Ygb2xGZWF0dXJlKTtcbiAgICB2YXIgc2libGluZ1hQb2ludCA9IHNpYmxpbmdYLmdldEdlb21ldHJ5KCk7XG4gICAgY29uc29sZS5hc3NlcnQoc2libGluZ1hQb2ludCBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KTtcbiAgICB2YXIgc2libGluZ1hDb29yZGluYXRlID0gc2libGluZ1hQb2ludC5nZXRDb29yZGluYXRlcygpO1xuICAgIHZhciBzaWJsaW5nWFBpeGVsID0gdGhpcy5nZXRNYXAoKS5nZXRQaXhlbEZyb21Db29yZGluYXRlKHNpYmxpbmdYQ29vcmRpbmF0ZSk7XG4gICAgdmFyIHZlY3RvclggPSBbc2libGluZ1hQaXhlbFswXSAtIG9yaWdpblBpeGVsWzBdLCBzaWJsaW5nWFBpeGVsWzFdIC0gb3JpZ2luUGl4ZWxbMV1dO1xuICAgIHZhciB2ZWN0b3JYTWFnbml0dWRlID0gTWF0aC5zcXJ0KHZlY3RvclhbMF0gKiB2ZWN0b3JYWzBdICsgdmVjdG9yWFsxXSAqIHZlY3RvclhbMV0pO1xuICAgIHZlY3RvclhbMF0gLz0gdmVjdG9yWE1hZ25pdHVkZTtcbiAgICB2ZWN0b3JYWzFdIC89IHZlY3RvclhNYWduaXR1ZGU7XG4gICAgdmFyIHNpYmxpbmdZUG9pbnQgPSBzaWJsaW5nWS5nZXRHZW9tZXRyeSgpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHNpYmxpbmdZUG9pbnQgaW5zdGFuY2VvZiBvbEdlb21Qb2ludCk7XG4gICAgdmFyIHNpYmxpbmdZQ29vcmRpbmF0ZSA9IHNpYmxpbmdZUG9pbnQuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc2libGluZ1lQaXhlbCA9IHRoaXMuZ2V0TWFwKCkuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShzaWJsaW5nWUNvb3JkaW5hdGUpO1xuICAgIHZhciB2ZWN0b3JZID0gW3NpYmxpbmdZUGl4ZWxbMF0gLSBvcmlnaW5QaXhlbFswXSwgc2libGluZ1lQaXhlbFsxXSAtIG9yaWdpblBpeGVsWzFdXTtcbiAgICB2YXIgdmVjdG9yWU1hZ25pdHVkZSA9IE1hdGguc3FydCh2ZWN0b3JZWzBdICogdmVjdG9yWVswXSArIHZlY3RvcllbMV0gKiB2ZWN0b3JZWzFdKTtcbiAgICB2ZWN0b3JZWzBdIC89IHZlY3RvcllNYWduaXR1ZGU7XG4gICAgdmVjdG9yWVsxXSAvPSB2ZWN0b3JZTWFnbml0dWRlO1xuXG4gICAgaWYgKGlzTmFOKHZlY3RvclhbMF0pICYmIGlzTmFOKHZlY3RvcllbMF0pKSB7XG4gICAgICB2ZWN0b3JYID0gWzAsIDFdO1xuICAgICAgdmVjdG9yWSA9IFsxLCAwXTtcbiAgICB9IGVsc2UgaWYgKGlzTmFOKHZlY3RvclhbMF0pKSB7XG4gICAgICB2ZWN0b3JYID0gW3ZlY3RvcllbMV0sIC12ZWN0b3JZWzBdXTtcbiAgICB9IGVsc2UgaWYgKGlzTmFOKHZlY3RvcllbMF0pKSB7XG4gICAgICB2ZWN0b3JZID0gW3ZlY3RvclhbMV0sIC12ZWN0b3JYWzBdXTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3JpZ2luQ29vcmRpbmF0ZTogb3JpZ2luQ29vcmRpbmF0ZSxcbiAgICAgIG9yaWdpblBpeGVsOiBvcmlnaW5QaXhlbCxcbiAgICAgIHNpYmxpbmdYUG9pbnQ6IHNpYmxpbmdYUG9pbnQsXG4gICAgICBzaWJsaW5nWVBvaW50OiBzaWJsaW5nWVBvaW50LFxuICAgICAgdmVjdG9yWDogdmVjdG9yWCxcbiAgICAgIHZlY3Rvclk6IHZlY3RvcllcbiAgICB9O1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmVGZWF0dXJlXyA9IGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmVfKGZlYXR1cmUpIHtcbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGZlYXR1cmUpO1xuICAgIHZhciBpdGVtID0gdGhpcy5jYWNoZV9bdWlkXTtcbiAgICB2YXIgY29ybmVycyA9IGl0ZW0uY29ybmVycztcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoY29ybmVycyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgY29ybmVyID0gX3N0ZXAudmFsdWU7XG4gICAgICB0aGlzLnZlY3RvclBvaW50c18uZ2V0U291cmNlKCkucmVtb3ZlRmVhdHVyZShjb3JuZXIpO1xuICAgIH1cblxuICAgIHRoaXMuZmVhdHVyZV8gPSBudWxsO1xuICAgIGNvcm5lcnMubGVuZ3RoID0gMDtcbiAgICBkZWxldGUgdGhpcy5jYWNoZV9bdWlkXTtcbiAgfTtcblxuICBfcHJvdG8uc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwKG1hcCkge1xuICAgIHRoaXMudmVjdG9yUG9pbnRzXy5zZXRNYXAobWFwKTtcbiAgICBvbEludGVyYWN0aW9uUG9pbnRlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRmVhdHVyZUFkZF8gPSBmdW5jdGlvbiBoYW5kbGVGZWF0dXJlQWRkXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgZmVhdHVyZSA9IGV2dC5lbGVtZW50O1xuICAgICAgY29uc29sZS5hc3NlcnQoZmVhdHVyZSBpbnN0YW5jZW9mIG9sRmVhdHVyZSwgJ2ZlYXR1cmUgc2hvdWxkIGJlIGFuIG9sLkZlYXR1cmUnKTtcbiAgICAgIHRoaXMuYWRkRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVGZWF0dXJlUmVtb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVSZW1vdmVfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHZhciBmZWF0dXJlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICB0aGlzLnJlbW92ZUZlYXR1cmVfKGZlYXR1cmUpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRG93bl8gPSBmdW5jdGlvbiBoYW5kbGVEb3duXyhldnQpIHtcbiAgICB2YXIgbWFwID0gZXZ0Lm1hcDtcbiAgICB2YXIgZmVhdHVyZSA9IG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgcmV0dXJuIGZlYXR1cmUuZ2V0KCdzaWJsaW5nWCcpICYmIGZlYXR1cmUuZ2V0KCdzaWJsaW5nWScpID8gZmVhdHVyZSA6IHVuZGVmaW5lZDtcbiAgICB9KTtcblxuICAgIGlmIChmZWF0dXJlKSB7XG4gICAgICB0aGlzLmZlYXR1cmVfID0gZmVhdHVyZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRHJhZ18gPSBmdW5jdGlvbiBoYW5kbGVEcmFnXyhldnQpIHtcbiAgICB0aGlzLndpbGxNb2RpZnlGZWF0dXJlc18oZXZ0KTtcblxuICAgIGlmICghdGhpcy5mZWF0dXJlXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGZlYXR1cmUnKTtcbiAgICB9XG5cbiAgICB2YXIgZmVhdHVyZSA9IHRoaXMuZmVhdHVyZV87XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpIHtcbiAgICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKGV2dC5jb29yZGluYXRlKTtcblxuICAgICAgaWYgKCF0aGlzLnBhcmFtc18pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHBhcmFtcycpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGVzdGluYXRpb25QaXhlbCA9IGV2dC5waXhlbDtcbiAgICAgIHZhciBvcmlnaW5QaXhlbCA9IHRoaXMucGFyYW1zXy5vcmlnaW5QaXhlbDtcbiAgICAgIHZhciBzaWJsaW5nWFBvaW50ID0gdGhpcy5wYXJhbXNfLnNpYmxpbmdYUG9pbnQ7XG4gICAgICB2YXIgc2libGluZ1lQb2ludCA9IHRoaXMucGFyYW1zXy5zaWJsaW5nWVBvaW50O1xuICAgICAgdmFyIHZlY3RvclggPSB0aGlzLnBhcmFtc18udmVjdG9yWDtcbiAgICAgIHZhciB2ZWN0b3JZID0gdGhpcy5wYXJhbXNfLnZlY3Rvclk7XG4gICAgICB2YXIgb3JpZ2luQ29vcmRpbmF0ZSA9IHRoaXMucGFyYW1zXy5vcmlnaW5Db29yZGluYXRlO1xuICAgICAgdmFyIGIyUGl4ZWwgPSB0aGlzLmNhbGN1bGF0ZU5ld1BpeGVsXyhvcmlnaW5QaXhlbCwgZGVzdGluYXRpb25QaXhlbCwgdmVjdG9yWCk7XG4gICAgICB2YXIgYjJDb29yZGluYXRlID0gdGhpcy5nZXRNYXAoKS5nZXRDb29yZGluYXRlRnJvbVBpeGVsKGIyUGl4ZWwpO1xuICAgICAgc2libGluZ1hQb2ludC5zZXRDb29yZGluYXRlcyhiMkNvb3JkaW5hdGUpO1xuICAgICAgdmFyIGMyUGl4ZWwgPSB0aGlzLmNhbGN1bGF0ZU5ld1BpeGVsXyhvcmlnaW5QaXhlbCwgZGVzdGluYXRpb25QaXhlbCwgdmVjdG9yWSk7XG4gICAgICB2YXIgYzJDb29yZGluYXRlID0gdGhpcy5nZXRNYXAoKS5nZXRDb29yZGluYXRlRnJvbVBpeGVsKGMyUGl4ZWwpO1xuICAgICAgc2libGluZ1lQb2ludC5zZXRDb29yZGluYXRlcyhjMkNvb3JkaW5hdGUpO1xuICAgICAgdmFyIGJveEZlYXR1cmUgPSBmZWF0dXJlLmdldCgnYm94RmVhdHVyZScpO1xuICAgICAgdmFyIGdlb20gPSBib3hGZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICBjb25zb2xlLmFzc2VydChnZW9tIGluc3RhbmNlb2Ygb2xHZW9tUG9seWdvbik7XG4gICAgICBnZW9tLnNldENvb3JkaW5hdGVzKFtbZXZ0LmNvb3JkaW5hdGUsIGIyQ29vcmRpbmF0ZSwgb3JpZ2luQ29vcmRpbmF0ZSwgYzJDb29yZGluYXRlLCBldnQuY29vcmRpbmF0ZV1dKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmNhbGN1bGF0ZU5ld1BpeGVsXyA9IGZ1bmN0aW9uIGNhbGN1bGF0ZU5ld1BpeGVsXyhvcmlnaW4sIGRlc3RpbmF0aW9uLCB2ZWN0b3IpIHtcbiAgICB2YXIgYVZlY3RvciA9IFtkZXN0aW5hdGlvblswXSAtIG9yaWdpblswXSwgZGVzdGluYXRpb25bMV0gLSBvcmlnaW5bMV1dO1xuICAgIHZhciBhYlNjYWxhclByb2R1Y3QgPSBhVmVjdG9yWzBdICogdmVjdG9yWzBdICsgYVZlY3RvclsxXSAqIHZlY3RvclsxXTtcbiAgICB2YXIgZGVsdGFWZWN0b3IgPSBbdmVjdG9yWzBdICogYWJTY2FsYXJQcm9kdWN0LCB2ZWN0b3JbMV0gKiBhYlNjYWxhclByb2R1Y3RdO1xuICAgIHJldHVybiBbZGVsdGFWZWN0b3JbMF0gKyBvcmlnaW5bMF0sIGRlbHRhVmVjdG9yWzFdICsgb3JpZ2luWzFdXTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlVXBfID0gZnVuY3Rpb24gaGFuZGxlVXBfKGV2dCkge1xuICAgIGlmICh0aGlzLm1vZGlmaWVkXykge1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IG5nZW9DdXN0b21FdmVudCgnbW9kaWZ5ZW5kJywge1xuICAgICAgICBmZWF0dXJlczogdGhpcy5mZWF0dXJlc19cbiAgICAgIH0pO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHRoaXMucGFyYW1zXyA9IG51bGw7XG4gICAgICB0aGlzLm1vZGlmaWVkXyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gTW9kaWZ5UmVjdGFuZ2xlO1xufShvbEludGVyYWN0aW9uUG9pbnRlcik7XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGlmeVJlY3RhbmdsZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGlmeVN0eWxlRnVuY3Rpb24gfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL2NvbW1vbi5qcyc7XG5pbXBvcnQgbmdlb0N1c3RvbUV2ZW50IGZyb20gJ25nZW8vQ3VzdG9tRXZlbnQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuaW1wb3J0ICogYXMgb2xFeHRlbnQgZnJvbSAnb2wvZXh0ZW50LmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25Qb2ludGVyIGZyb20gJ29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuaW1wb3J0IG9sR2VvbVBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQuanMnO1xuaW1wb3J0IG9sR2VvbUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21Qb2x5Z29uIGZyb20gJ29sL2dlb20vUG9seWdvbi5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IG9sU291cmNlVmVjdG9yIGZyb20gJ29sL3NvdXJjZS9WZWN0b3IuanMnO1xuaW1wb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH0gZnJvbSAnb2wvQ29sbGVjdGlvbi5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfb2xJbnRlcmFjdGlvblBvaW50ZXIpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9vbEludGVyYWN0aW9uUG9pbnRlcik7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sSW50ZXJhY3Rpb25Qb2ludGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBjb25zb2xlLmFzc2VydChvcHRpb25zLmZlYXR1cmVzKTtcbiAgICBfdGhpcy5oYW5kbGVEb3duRXZlbnQgPSBfdGhpcy5oYW5kbGVEb3duXztcbiAgICBfdGhpcy5oYW5kbGVEcmFnRXZlbnQgPSBfdGhpcy5oYW5kbGVEcmFnXztcbiAgICBfdGhpcy5oYW5kbGVVcEV2ZW50ID0gX3RoaXMuaGFuZGxlVXBfO1xuICAgIF90aGlzLmxpc3RlbmVyS2V5c18gPSBbXTtcbiAgICBfdGhpcy5tb2RpZmllZF8gPSBmYWxzZTtcbiAgICBfdGhpcy5rZXlQcmVzc0xpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgX3RoaXMuY2hhbmdpbmdGZWF0dXJlXyA9IGZhbHNlO1xuICAgIF90aGlzLnBpeGVsVG9sZXJhbmNlXyA9IG9wdGlvbnMucGl4ZWxUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGl4ZWxUb2xlcmFuY2UgOiAxMDtcbiAgICBfdGhpcy5mZWF0dXJlc18gPSBvcHRpb25zLmZlYXR1cmVzO1xuICAgIF90aGlzLmZlYXR1cmVfID0gbnVsbDtcbiAgICBfdGhpcy5jb29yZGluYXRlXyA9IG51bGw7XG4gICAgX3RoaXMuY2VudGVyQ29vcmRpbmF0ZV8gPSBudWxsO1xuICAgIF90aGlzLm92ZXJsYXlfID0gbmV3IG9sTGF5ZXJWZWN0b3Ioe1xuICAgICAgc291cmNlOiBuZXcgb2xTb3VyY2VWZWN0b3Ioe1xuICAgICAgICB1c2VTcGF0aWFsSW5kZXg6IGZhbHNlLFxuICAgICAgICB3cmFwWDogISFvcHRpb25zLndyYXBYXG4gICAgICB9KSxcbiAgICAgIHN0eWxlOiBvcHRpb25zLnN0eWxlIHx8IGdldERlZmF1bHRNb2RpZnlTdHlsZUZ1bmN0aW9uKCksXG4gICAgICB1cGRhdGVXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgICAgIHVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc6IHRydWVcbiAgICB9KTtcbiAgICBfdGhpcy5jZW50ZXJGZWF0dXJlc18gPSB7fTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXRBY3RpdmUgPSBmdW5jdGlvbiBzZXRBY3RpdmUoYWN0aXZlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMuZmVhdHVyZXNfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMua2V5UHJlc3NMaXN0ZW5lcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5rZXlQcmVzc0xpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLmtleVByZXNzTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG5cbiAgICBvbEludGVyYWN0aW9uUG9pbnRlci5wcm90b3R5cGUuc2V0QWN0aXZlLmNhbGwodGhpcywgYWN0aXZlKTtcblxuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHRoaXMua2V5UHJlc3NMaXN0ZW5lcktleV8gPSBsaXN0ZW4oZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXBfLCB0aGlzKTtcbiAgICAgIHRoaXMuZmVhdHVyZXNfLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5hZGRGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKHRoaXMuZmVhdHVyZXNfLCAnYWRkJywgdGhpcy5oYW5kbGVGZWF0dXJlQWRkXywgdGhpcyksIGxpc3Rlbih0aGlzLmZlYXR1cmVzXywgJ3JlbW92ZScsIHRoaXMuaGFuZGxlRmVhdHVyZVJlbW92ZV8sIHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuZmVhdHVyZXNfLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5yZW1vdmVGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uYWRkRmVhdHVyZV8gPSBmdW5jdGlvbiBhZGRGZWF0dXJlXyhmZWF0dXJlKSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCFnZW9tZXRyeSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgZmVhdHVyZS5zZXQoJ2FuZ2xlJywgMCk7XG4gICAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKTtcbiAgICB2YXIgcG9pbnQgPSBuZXcgb2xHZW9tUG9pbnQodGhpcy5nZXRDZW50ZXJDb29yZGluYXRlXyhnZW9tZXRyeSkpO1xuICAgIHZhciBjZW50ZXJGZWF0dXJlID0gbmV3IG9sRmVhdHVyZShwb2ludCk7XG4gICAgdGhpcy5jZW50ZXJGZWF0dXJlc19bdWlkXSA9IGNlbnRlckZlYXR1cmU7XG4gICAgdGhpcy5vdmVybGF5Xy5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKGNlbnRlckZlYXR1cmUpO1xuICB9O1xuXG4gIF9wcm90by53aWxsTW9kaWZ5RmVhdHVyZXNfID0gZnVuY3Rpb24gd2lsbE1vZGlmeUZlYXR1cmVzXyhldnQpIHtcbiAgICBpZiAoIXRoaXMubW9kaWZpZWRfKSB7XG4gICAgICB0aGlzLm1vZGlmaWVkXyA9IHRydWU7XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdtb2RpZnlzdGFydCcsIHtcbiAgICAgICAgZmVhdHVyZXM6IHRoaXMuZmVhdHVyZXNfXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5yZW1vdmVGZWF0dXJlXyA9IGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmVfKGZlYXR1cmUpIHtcbiAgICB0aGlzLmZlYXR1cmVfID0gbnVsbDtcblxuICAgIGlmIChmZWF0dXJlKSB7XG4gICAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGZlYXR1cmUpO1xuXG4gICAgICBpZiAodGhpcy5jZW50ZXJGZWF0dXJlc19bdWlkXSkge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5vdmVybGF5Xy5nZXRTb3VyY2UoKTtcblxuICAgICAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVZlY3RvcikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHNvdXJjZSB0eXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzb3VyY2UucmVtb3ZlRmVhdHVyZSh0aGlzLmNlbnRlckZlYXR1cmVzX1t1aWRdKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuY2VudGVyRmVhdHVyZXNfW3VpZF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAobWFwKSB7XG4gICAgdGhpcy5vdmVybGF5Xy5zZXRNYXAobWFwKTtcbiAgICBvbEludGVyYWN0aW9uUG9pbnRlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRmVhdHVyZUFkZF8gPSBmdW5jdGlvbiBoYW5kbGVGZWF0dXJlQWRkXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgZmVhdHVyZSA9IGV2dC5lbGVtZW50O1xuICAgICAgY29uc29sZS5hc3NlcnQoZmVhdHVyZSBpbnN0YW5jZW9mIG9sRmVhdHVyZSwgJ2ZlYXR1cmUgc2hvdWxkIGJlIGFuIG9sLkZlYXR1cmUnKTtcbiAgICAgIHRoaXMuYWRkRmVhdHVyZV8oZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVGZWF0dXJlUmVtb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVSZW1vdmVfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHZhciBmZWF0dXJlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICB0aGlzLnJlbW92ZUZlYXR1cmVfKGZlYXR1cmUpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRG93bl8gPSBmdW5jdGlvbiBoYW5kbGVEb3duXyhldnQpIHtcbiAgICB2YXIgbWFwID0gZXZ0Lm1hcDtcbiAgICB2YXIgZmVhdHVyZSA9IG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHtcbiAgICAgIHJldHVybiBmZWF0dXJlO1xuICAgIH0sIHVuZGVmaW5lZCk7XG5cbiAgICBpZiAoZmVhdHVyZSkge1xuICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICB0aGlzLmZlYXR1cmVzXy5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIGlmIChvbFV0aWxHZXRVaWQoZikgPT0gb2xVdGlsR2V0VWlkKGZlYXR1cmUpKSB7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICBmZWF0dXJlID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmZWF0dXJlKSB7XG4gICAgICB0aGlzLmNvb3JkaW5hdGVfID0gZXZ0LmNvb3JkaW5hdGU7XG4gICAgICB0aGlzLmZlYXR1cmVfID0gZmVhdHVyZTtcbiAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZmVhdHVyZV8uZ2V0R2VvbWV0cnkoKTtcblxuICAgICAgaWYgKGdlb21ldHJ5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jZW50ZXJDb29yZGluYXRlXyA9IHRoaXMuZ2V0Q2VudGVyQ29vcmRpbmF0ZV8oZ2VvbWV0cnkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLmdldENlbnRlckNvb3JkaW5hdGVfID0gZnVuY3Rpb24gZ2V0Q2VudGVyQ29vcmRpbmF0ZV8oZ2VvbWV0cnkpIHtcbiAgICB2YXIgY2VudGVyO1xuXG4gICAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0RmxhdE1pZHBvaW50KCk7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldEZsYXRJbnRlcmlvclBvaW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICAgIGNlbnRlciA9IG9sRXh0ZW50LmdldENlbnRlcihleHRlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBjZW50ZXI7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURyYWdfID0gZnVuY3Rpb24gaGFuZGxlRHJhZ18oZXZ0KSB7XG4gICAgdGhpcy53aWxsTW9kaWZ5RmVhdHVyZXNfKGV2dCk7XG5cbiAgICBpZiAoIXRoaXMuZmVhdHVyZV8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmZWF0dXJlJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmNvb3JkaW5hdGVfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29vcmRpbmF0ZScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5jZW50ZXJDb29yZGluYXRlXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNlbnRlckNvb3JkaW5hdGUnKTtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmZlYXR1cmVfLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnknKTtcbiAgICB9XG5cbiAgICB2YXIgb2xkWCA9IHRoaXMuY29vcmRpbmF0ZV9bMF07XG4gICAgdmFyIG9sZFkgPSB0aGlzLmNvb3JkaW5hdGVfWzFdO1xuICAgIHZhciBjZW50ZXJYID0gdGhpcy5jZW50ZXJDb29yZGluYXRlX1swXTtcbiAgICB2YXIgY2VudGVyWSA9IHRoaXMuY2VudGVyQ29vcmRpbmF0ZV9bMV07XG4gICAgdmFyIGR4MSA9IG9sZFggLSBjZW50ZXJYO1xuICAgIHZhciBkeTEgPSBvbGRZIC0gY2VudGVyWTtcbiAgICB2YXIgZHgwID0gZXZ0LmNvb3JkaW5hdGVbMF0gLSBjZW50ZXJYO1xuICAgIHZhciBkeTAgPSBldnQuY29vcmRpbmF0ZVsxXSAtIGNlbnRlclk7XG4gICAgdGhpcy5jb29yZGluYXRlX1swXSA9IGV2dC5jb29yZGluYXRlWzBdO1xuICAgIHRoaXMuY29vcmRpbmF0ZV9bMV0gPSBldnQuY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgYTAgPSBNYXRoLmF0YW4yKGR5MCwgZHgwKTtcbiAgICB2YXIgYTEgPSBNYXRoLmF0YW4yKGR5MSwgZHgxKTtcbiAgICB2YXIgYW5nbGUgPSBhMSAtIGEwO1xuICAgIGdlb21ldHJ5LnJvdGF0ZSgtYW5nbGUsIFtjZW50ZXJYLCBjZW50ZXJZXSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVVwXyA9IGZ1bmN0aW9uIGhhbmRsZVVwXyhldnQpIHtcbiAgICBpZiAodGhpcy5tb2RpZmllZF8pIHtcbiAgICAgIGlmICghdGhpcy5mZWF0dXJlXykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdyb3RhdGVlbmQnLCB7XG4gICAgICAgIGZlYXR1cmU6IHRoaXMuZmVhdHVyZV9cbiAgICAgIH0pO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHRoaXMubW9kaWZpZWRfID0gZmFsc2U7XG4gICAgICB0aGlzLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVLZXlVcF8gPSBmdW5jdGlvbiBoYW5kbGVLZXlVcF8oZXZ0KSB7XG4gICAgaWYgKGV2dCBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQgJiYgZXZ0LmtleUNvZGUgPT09IDI3KSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0ob2xJbnRlcmFjdGlvblBvaW50ZXIpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCB7IGdldFVpZCBhcyBvbFV0aWxHZXRVaWQgfSBmcm9tICdvbC91dGlsLmpzJztcbmltcG9ydCAqIGFzIG9sRXh0ZW50IGZyb20gJ29sL2V4dGVudC5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbEdlb21HZW9tZXRyeSBmcm9tICdvbC9nZW9tL0dlb21ldHJ5LmpzJztcbmltcG9ydCBvbEdlb21MaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25UcmFuc2xhdGUgZnJvbSAnb2wvaW50ZXJhY3Rpb24vVHJhbnNsYXRlLmpzJztcbmltcG9ydCBvbExheWVyVmVjdG9yIGZyb20gJ29sL2xheWVyL1ZlY3Rvci5qcyc7XG5pbXBvcnQgb2xTb3VyY2VWZWN0b3IgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5pbXBvcnQgeyBDb2xsZWN0aW9uRXZlbnQgfSBmcm9tICdvbC9Db2xsZWN0aW9uLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9vbEludGVyYWN0aW9uVHJhbnNsYSkge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX29sSW50ZXJhY3Rpb25UcmFuc2xhKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfb2xJbnRlcmFjdGlvblRyYW5zbGEuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIF90aGlzLmxpc3RlbmVyS2V5c18gPSBbXTtcbiAgICBfdGhpcy5mZWF0dXJlTGlzdGVuZXJLZXlzXyA9IHt9O1xuICAgIF90aGlzLmtleVByZXNzTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICBfdGhpcy5teUZlYXR1cmVzXyA9IG9wdGlvbnMuZmVhdHVyZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZmVhdHVyZXMgOiBudWxsO1xuICAgIF90aGlzLnZlY3RvclNvdXJjZV8gPSBuZXcgb2xTb3VyY2VWZWN0b3Ioe1xuICAgICAgdXNlU3BhdGlhbEluZGV4OiBmYWxzZVxuICAgIH0pO1xuICAgIF90aGlzLnZlY3RvckxheWVyXyA9IG5ldyBvbExheWVyVmVjdG9yKHtcbiAgICAgIHNvdXJjZTogX3RoaXMudmVjdG9yU291cmNlXyxcbiAgICAgIHN0eWxlOiBvcHRpb25zLnN0eWxlLFxuICAgICAgdXBkYXRlV2hpbGVBbmltYXRpbmc6IHRydWUsXG4gICAgICB1cGRhdGVXaGlsZUludGVyYWN0aW5nOiB0cnVlXG4gICAgfSk7XG4gICAgX3RoaXMuY2VudGVyRmVhdHVyZXNfID0ge307XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IF9kZWZhdWx0LnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlKGFjdGl2ZSkge1xuICAgIGlmICh0aGlzLmtleVByZXNzTGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMua2V5UHJlc3NMaXN0ZW5lcktleV8pO1xuICAgICAgdGhpcy5rZXlQcmVzc0xpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuXG4gICAgb2xJbnRlcmFjdGlvblRyYW5zbGF0ZS5wcm90b3R5cGUuc2V0QWN0aXZlLmNhbGwodGhpcywgYWN0aXZlKTtcblxuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHRoaXMua2V5UHJlc3NMaXN0ZW5lcktleV8gPSBsaXN0ZW4oZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXBfLCB0aGlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlXygpO1xuICB9O1xuXG4gIF9wcm90by5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAobWFwKSB7XG4gICAgdmFyIGN1cnJlbnRNYXAgPSB0aGlzLmdldE1hcCgpO1xuXG4gICAgaWYgKGN1cnJlbnRNYXApIHtcbiAgICAgIHRoaXMudmVjdG9yTGF5ZXJfLnNldE1hcChudWxsKTtcbiAgICB9XG5cbiAgICBvbEludGVyYWN0aW9uVHJhbnNsYXRlLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuXG4gICAgaWYgKG1hcCkge1xuICAgICAgdGhpcy52ZWN0b3JMYXllcl8uc2V0TWFwKG1hcCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZV8oKTtcbiAgfTtcblxuICBfcHJvdG8uc2V0U3RhdGVfID0gZnVuY3Rpb24gc2V0U3RhdGVfKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlKCk7XG4gICAgdmFyIGZlYXR1cmVzID0gdGhpcy5teUZlYXR1cmVzXztcbiAgICB2YXIga2V5cyA9IHRoaXMubGlzdGVuZXJLZXlzXztcblxuICAgIGlmICghZmVhdHVyZXMgfHwgIWtleXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobWFwICYmIGFjdGl2ZSAmJiBmZWF0dXJlcykge1xuICAgICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLmFkZEZlYXR1cmVfKGZlYXR1cmUpO1xuICAgICAgfSk7XG4gICAgICBrZXlzLnB1c2gobGlzdGVuKGZlYXR1cmVzLCAnYWRkJywgdGhpcy5oYW5kbGVGZWF0dXJlc0FkZF8sIHRoaXMpLCBsaXN0ZW4oZmVhdHVyZXMsICdyZW1vdmUnLCB0aGlzLmhhbmRsZUZlYXR1cmVzUmVtb3ZlXywgdGhpcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWFwKSB7XG4gICAgICAgIHZhciBlbGVtID0gbWFwLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgZWxlbS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgICB9XG5cbiAgICAgIGtleXMuZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIGtleXMubGVuZ3RoID0gMDtcbiAgICAgIGZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5yZW1vdmVGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRmVhdHVyZXNBZGRfID0gZnVuY3Rpb24gaGFuZGxlRmVhdHVyZXNBZGRfKGV2dCkge1xuICAgIGlmIChldnQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgIHZhciBmZWF0dXJlID0gZXZ0LmVsZW1lbnQ7XG4gICAgICBjb25zb2xlLmFzc2VydChmZWF0dXJlIGluc3RhbmNlb2Ygb2xGZWF0dXJlLCAnZmVhdHVyZSBzaG91bGQgYmUgYW4gb2wuRmVhdHVyZScpO1xuICAgICAgdGhpcy5hZGRGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUZlYXR1cmVzUmVtb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVzUmVtb3ZlXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgZmVhdHVyZSA9IGV2dC5lbGVtZW50O1xuICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmFkZEZlYXR1cmVfID0gZnVuY3Rpb24gYWRkRmVhdHVyZV8oZmVhdHVyZSkge1xuICAgIHZhciB1aWQgPSBvbFV0aWxHZXRVaWQoZmVhdHVyZSk7XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCFnZW9tZXRyeSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5mZWF0dXJlTGlzdGVuZXJLZXlzX1t1aWRdID0gbGlzdGVuKGdlb21ldHJ5LCAnY2hhbmdlJywgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZV8uYmluZCh0aGlzLCBmZWF0dXJlKSwgdGhpcyk7XG4gICAgdmFyIHBvaW50ID0gdGhpcy5nZXRHZW9tZXRyeUNlbnRlclBvaW50XyhnZW9tZXRyeSk7XG4gICAgdmFyIGNlbnRlckZlYXR1cmUgPSBuZXcgb2xGZWF0dXJlKHBvaW50KTtcbiAgICB0aGlzLmNlbnRlckZlYXR1cmVzX1t1aWRdID0gY2VudGVyRmVhdHVyZTtcbiAgICB0aGlzLnZlY3RvclNvdXJjZV8uYWRkRmVhdHVyZShjZW50ZXJGZWF0dXJlKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlRmVhdHVyZV8gPSBmdW5jdGlvbiByZW1vdmVGZWF0dXJlXyhmZWF0dXJlKSB7XG4gICAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKTtcblxuICAgIGlmICh0aGlzLmZlYXR1cmVMaXN0ZW5lcktleXNfW3VpZF0pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5mZWF0dXJlTGlzdGVuZXJLZXlzX1t1aWRdKTtcbiAgICAgIGRlbGV0ZSB0aGlzLmZlYXR1cmVMaXN0ZW5lcktleXNfW3VpZF07XG4gICAgICB0aGlzLnZlY3RvclNvdXJjZV8ucmVtb3ZlRmVhdHVyZSh0aGlzLmNlbnRlckZlYXR1cmVzX1t1aWRdKTtcbiAgICAgIGRlbGV0ZSB0aGlzLmNlbnRlckZlYXR1cmVzX1t1aWRdO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlR2VvbWV0cnlDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlR2VvbWV0cnlDaGFuZ2VfKGZlYXR1cmUsIGV2dCkge1xuICAgIHZhciBnZW9tZXRyeSA9IGV2dC50YXJnZXQ7XG4gICAgY29uc29sZS5hc3NlcnQoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21HZW9tZXRyeSk7XG4gICAgdmFyIHBvaW50ID0gdGhpcy5nZXRHZW9tZXRyeUNlbnRlclBvaW50XyhnZW9tZXRyeSk7XG4gICAgdmFyIHVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKTtcbiAgICB0aGlzLmNlbnRlckZlYXR1cmVzX1t1aWRdLnNldEdlb21ldHJ5KHBvaW50KTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0R2VvbWV0cnlDZW50ZXJQb2ludF8gPSBmdW5jdGlvbiBnZXRHZW9tZXRyeUNlbnRlclBvaW50XyhnZW9tZXRyeSkge1xuICAgIHZhciBjZW50ZXI7XG4gICAgdmFyIHBvaW50O1xuXG4gICAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9seWdvbikge1xuICAgICAgcG9pbnQgPSBnZW9tZXRyeS5nZXRJbnRlcmlvclBvaW50KCk7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpIHtcbiAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVBdCgwLjUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXh0ZW50ID0gZ2VvbWV0cnkuZ2V0RXh0ZW50KCk7XG4gICAgICBjZW50ZXIgPSBvbEV4dGVudC5nZXRDZW50ZXIoZXh0ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXBvaW50ICYmIGNlbnRlcikge1xuICAgICAgcG9pbnQgPSBuZXcgb2xHZW9tUG9pbnQoY2VudGVyKTtcbiAgICB9XG5cbiAgICBpZiAoIXBvaW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcG9pbnQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9pbnQ7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUtleVVwXyA9IGZ1bmN0aW9uIGhhbmRsZUtleVVwXyhldnQpIHtcbiAgICBpZiAoZXZ0IGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCAmJiBldnQua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgIHRoaXMuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShvbEludGVyYWN0aW9uVHJhbnNsYXRlKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImltcG9ydCB7IGNyZWF0ZUVkaXRpbmdTdHlsZSB9IGZyb20gJ29sL3N0eWxlL1N0eWxlLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0RHJhd1N0eWxlRnVuY3Rpb24oKSB7XG4gIHZhciBzdHlsZSA9IGNyZWF0ZUVkaXRpbmdTdHlsZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgIHJldHVybiBzdHlsZVtnZW9tZXRyeS5nZXRUeXBlKCldO1xuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kaWZ5U3R5bGVGdW5jdGlvbigpIHtcbiAgdmFyIHN0eWxlID0gY3JlYXRlRWRpdGluZ1N0eWxlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICAgIHJldHVybiBzdHlsZS5Qb2ludDtcbiAgfTtcbn0iLCJMYXllcnRyZWVDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGF0dHJzXCJdO1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgbGF5ZXJMb2FkaW5nLCBsYXllckRlY29yYXRpb24gfSBmcm9tICduZ2VvL21pc2MvZGVjb3JhdGUuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbExheWVyR3JvdXAgZnJvbSAnb2wvbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IG9sTGF5ZXJMYXllciBmcm9tICdvbC9sYXllci9MYXllci5qcyc7XG5leHBvcnQgZnVuY3Rpb24gTGF5ZXJ0cmVlQ29udHJvbGxlcigkc2NvcGUsICRyb290U2NvcGUsICRhdHRycykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBpc1Jvb3QgPSAkYXR0cnMubmdlb0xheWVydHJlZU5vdHJvb3QgPT09IHVuZGVmaW5lZDtcbiAgdGhpcy5pc1Jvb3QgPSBpc1Jvb3Q7XG4gIHZhciBub2RlRXhwciA9ICRhdHRycy5uZ2VvTGF5ZXJ0cmVlO1xuICB0aGlzLnJvb3RTY29wZV8gPSAkcm9vdFNjb3BlO1xuICB0aGlzLnByb3BlcnRpZXMgPSB7fTtcbiAgdGhpcy5zdGF0ZV8gPSAnb2ZmJztcbiAgdmFyIG5vZGU7XG5cbiAgaWYgKGlzUm9vdCkge1xuICAgICRzY29wZS4kd2F0Y2gobm9kZUV4cHIsIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgX3RoaXMubm9kZSA9IG5ld1ZhbDtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBub2RlID0gJHNjb3BlLiRldmFsKG5vZGVFeHByKTtcbiAgfVxuXG4gIHRoaXMubm9kZSA9IG5vZGU7XG4gIHZhciBtYXBFeHByID0gJGF0dHJzLm5nZW9MYXllcnRyZWVNYXA7XG4gIHZhciBtYXAgPSAkc2NvcGUuJGV2YWwobWFwRXhwcik7XG4gIGNvbnNvbGUuYXNzZXJ0KG1hcCAhPT0gdW5kZWZpbmVkKTtcbiAgdGhpcy5wYXJlbnQgPSAkc2NvcGUuJHBhcmVudC5sYXllcnRyZWVDdHJsO1xuICB0aGlzLmNoaWxkcmVuID0gW107XG5cbiAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgfVxuXG4gICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChfdGhpcy5wYXJlbnQpIHtcbiAgICAgIHZhciBpbmRleCA9IF90aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKF90aGlzKTtcblxuICAgICAgY29uc29sZS5hc3NlcnQoaW5kZXggPj0gMCk7XG5cbiAgICAgIF90aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfSk7XG4gIHRoaXMudWlkID0gb2xVdGlsR2V0VWlkKHRoaXMpO1xuICB0aGlzLmRlcHRoID0gaXNSb290ID8gMCA6IHRoaXMucGFyZW50LmRlcHRoICsgMTtcbiAgJHNjb3BlLnVpZCA9IHRoaXMudWlkO1xuICAkc2NvcGUuZGVwdGggPSB0aGlzLmRlcHRoO1xuICB0aGlzLm1hcCA9IG1hcDtcbiAgdmFyIG5vZGVsYXllckV4cHIgPSAkYXR0cnMubmdlb0xheWVydHJlZU5vZGVsYXllcjtcblxuICBpZiAobm9kZWxheWVyRXhwciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIG5vZGVsYXllcmV4cHJFeHByID0gJGF0dHJzLm5nZW9MYXllcnRyZWVOb2RlbGF5ZXJleHByO1xuICAgIHZhciBuZXdOb2RlbGF5ZXJFeHByID0gJHNjb3BlLiRldmFsKG5vZGVsYXllcmV4cHJFeHByKTtcbiAgICBjb25zb2xlLmFzc2VydCh0eXBlb2YgbmV3Tm9kZWxheWVyRXhwciA9PSAnc3RyaW5nJyk7XG4gICAgbm9kZWxheWVyRXhwciA9IG5ld05vZGVsYXllckV4cHI7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydChub2RlbGF5ZXJFeHByICE9PSB1bmRlZmluZWQpO1xuICB0aGlzLm5vZGVsYXllckV4cHIgPSBub2RlbGF5ZXJFeHByO1xuICB0aGlzLmxheWVyID0gbnVsbDtcblxuICBpZiAoIWlzUm9vdCkge1xuICAgIHZhciBsYXllciA9ICRzY29wZS4kZXZhbChub2RlbGF5ZXJFeHByLCB7XG4gICAgICAndHJlZUN0cmwnOiB0aGlzXG4gICAgfSkgfHwgbnVsbDtcblxuICAgIGlmIChsYXllcikge1xuICAgICAgY29uc29sZS5hc3NlcnQobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyTGF5ZXIgfHwgbGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApO1xuICAgICAgdGhpcy5sYXllciA9IGxheWVyO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuZGF0YVNvdXJjZV8gPSBudWxsO1xuXG4gIGlmICh0aGlzLmxheWVyKSB7XG4gICAgbGF5ZXJMb2FkaW5nKHRoaXMubGF5ZXIsICRzY29wZSk7XG4gICAgbGF5ZXJEZWNvcmF0aW9uKHRoaXMubGF5ZXIpO1xuICAgIGxpc3Rlbih0aGlzLmxheWVyLCAnY2hhbmdlOm9wYWNpdHknLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBfdGhpcy5yb290U2NvcGVfLiRicm9hZGNhc3QoJ25nZW8tbGF5ZXJ0cmVlLW9wYWNpdHknLCBfdGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbGlzdGVuZXJzRXhwciA9ICRhdHRycy5uZ2VvTGF5ZXJ0cmVlTGlzdGVuZXJzO1xuXG4gIGlmIChsaXN0ZW5lcnNFeHByID09PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgbGlzdGVuZXJzZXhwckV4cHIgPSAkYXR0cnMubmdlb0xheWVydHJlZUxpc3RlbmVyc2V4cHI7XG4gICAgbGlzdGVuZXJzRXhwciA9ICRzY29wZS4kZXZhbChsaXN0ZW5lcnNleHByRXhwcik7XG4gIH1cblxuICBpZiAobGlzdGVuZXJzRXhwciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIGxpc3RlbmVyc0V4cHIgPT0gJ3N0cmluZycpO1xuICB9XG5cbiAgdGhpcy5saXN0ZW5lcnNFeHByID0gbGlzdGVuZXJzRXhwcjtcblxuICBpZiAobGlzdGVuZXJzRXhwcikge1xuICAgICRzY29wZS4kZXZhbChsaXN0ZW5lcnNFeHByLCB7XG4gICAgICAndHJlZVNjb3BlJzogJHNjb3BlLFxuICAgICAgJ3RyZWVDdHJsJzogdGhpc1xuICAgIH0pO1xuICB9XG5cbiAgJHNjb3BlLmxheWVydHJlZUN0cmwgPSB0aGlzO1xufVxuXG5MYXllcnRyZWVDb250cm9sbGVyLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuc3RhdGVfO1xufTtcblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIG9wdF9icm9hZGNhc3QpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgaWYgKHN0YXRlID09PSB0aGlzLnN0YXRlXykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuc2V0U3RhdGVJbnRlcm5hbF8oc3RhdGUpO1xuXG4gIGlmICh0aGlzLnBhcmVudCkge1xuICAgIHRoaXMucGFyZW50LnJlZnJlc2hTdGF0ZSh0aGlzLCBvcHRfYnJvYWRjYXN0KTtcbiAgfVxuXG4gIHZhciBmaXJzdFBhcmVudHMgPSB0aGlzLmlzUm9vdCA/IHRoaXMuY2hpbGRyZW4gOiBbZ2V0Rmlyc3RQYXJlbnRUcmVlKHRoaXMpXTtcblxuICBpZiAob3B0X2Jyb2FkY2FzdCA9PT0gdW5kZWZpbmVkIHx8IG9wdF9icm9hZGNhc3QpIHtcbiAgICBmaXJzdFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZmlyc3RQYXJlbnQpIHtcbiAgICAgIF90aGlzMi5yb290U2NvcGVfLiRicm9hZGNhc3QoJ25nZW8tbGF5ZXJ0cmVlLXN0YXRlJywgX3RoaXMyLCBmaXJzdFBhcmVudCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbkxheWVydHJlZUNvbnRyb2xsZXIucHJvdG90eXBlLnNldFN0YXRlSW50ZXJuYWxfID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gIHRoaXMuc3RhdGVfID0gc3RhdGUgPT09ICdvbicgPyAnb24nIDogJ29mZic7XG5cbiAgaWYgKHRoaXMuc3RhdGVfID09PSAnb24nICYmIHRoaXMubm9kZS5tZXRhZGF0YSAmJiB0aGlzLm5vZGUubWV0YWRhdGEuZXhjbHVzaXZlR3JvdXApIHtcbiAgICB2YXIgZmlyc3RDaGlsZDtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5jaGlsZHJlbiksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgY2hpbGQgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgaWYgKCFmaXJzdENoaWxkKSB7XG4gICAgICAgIGZpcnN0Q2hpbGQgPSBjaGlsZDtcbiAgICAgICAgY2hpbGQuc2V0U3RhdGVJbnRlcm5hbF8oJ29uJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZC5zZXRTdGF0ZUludGVybmFsXygnb2ZmJyk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGNoaWxkLnNldFN0YXRlSW50ZXJuYWxfKF90aGlzMy5zdGF0ZV8pO1xuICAgIH0pO1xuICB9XG59O1xuXG5MYXllcnRyZWVDb250cm9sbGVyLnByb3RvdHlwZS5yZWZyZXNoU3RhdGUgPSBmdW5jdGlvbiAob3B0X29uQ2hpbGQsIG9wdF9icm9hZGNhc3QpIHtcbiAgdmFyIGdyb3VwID0gdGhpcy5ub2RlO1xuXG4gIGlmIChncm91cC5jaGlsZHJlbiAmJiBvcHRfb25DaGlsZCAmJiBvcHRfb25DaGlsZC5nZXRTdGF0ZSgpICE9PSAnb2ZmJyAmJiB0aGlzLm5vZGUubWV0YWRhdGEgJiYgdGhpcy5ub2RlLm1ldGFkYXRhLmV4Y2x1c2l2ZUdyb3VwKSB7XG4gICAgdmFyIG9uQ2hpbGQgPSBvcHRfb25DaGlsZDtcbiAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQgIT09IG9uQ2hpbGQpIHtcbiAgICAgICAgY2hpbGQuc2V0U3RhdGUoJ29mZicsIG9wdF9icm9hZGNhc3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIG5ld1N0YXRlID0gdGhpcy5nZXRDYWxjdWxhdGVTdGF0ZSgpO1xuXG4gIGlmICh0aGlzLnN0YXRlXyA9PT0gbmV3U3RhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnN0YXRlXyA9IG5ld1N0YXRlO1xuXG4gIGlmICh0aGlzLnBhcmVudCkge1xuICAgIHRoaXMucGFyZW50LnJlZnJlc2hTdGF0ZSh0aGlzLCBvcHRfYnJvYWRjYXN0KTtcbiAgfVxufTtcblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBncm91cCA9IHRoaXMubm9kZTtcblxuICBpZiAoZ3JvdXAuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgfVxuXG4gIHZhciBjaGlsZFN0YXRlID0gJyc7XG4gIHZhciBwcmV2aW91c0NoaWxkU3RhdGU7XG4gIHRoaXMuY2hpbGRyZW4uc29tZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICBjaGlsZFN0YXRlID0gY2hpbGQuZ2V0Q2FsY3VsYXRlU3RhdGUoKTtcblxuICAgIGlmIChwcmV2aW91c0NoaWxkU3RhdGUpIHtcbiAgICAgIGlmIChwcmV2aW91c0NoaWxkU3RhdGUgIT09IGNoaWxkU3RhdGUpIHtcbiAgICAgICAgY2hpbGRTdGF0ZSA9ICdpbmRldGVybWluYXRlJztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJldmlvdXNDaGlsZFN0YXRlID0gY2hpbGRTdGF0ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuICByZXR1cm4gY2hpbGRTdGF0ZTtcbn07XG5cbkxheWVydHJlZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFNldEFjdGl2ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgdmFyIGxheWVyID0gdGhpcy5sYXllcjtcbiAgdmFyIG1hcCA9IHRoaXMubWFwO1xuXG4gIGlmICghbGF5ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoIXZhbCkge1xuICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFwLmFkZExheWVyKGxheWVyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG1hcC5nZXRMYXllcnMoKS5nZXRBcnJheSgpLmluY2x1ZGVzKGxheWVyKTtcbiAgfVxufTtcblxuTGF5ZXJ0cmVlQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZGF0YVNvdXJjZV87XG59O1xuXG5MYXllcnRyZWVDb250cm9sbGVyLnByb3RvdHlwZS5zZXREYXRhU291cmNlID0gZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHtcbiAgdGhpcy5kYXRhU291cmNlXyA9IGRhdGFTb3VyY2U7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RQYXJlbnRUcmVlKHRyZWVDdHJsKSB7XG4gIHZhciB0cmVlID0gdHJlZUN0cmw7XG5cbiAgd2hpbGUgKCF0cmVlLnBhcmVudC5pc1Jvb3QpIHtcbiAgICB0cmVlID0gdHJlZS5wYXJlbnQ7XG4gIH1cblxuICByZXR1cm4gdHJlZTtcbn1cbmV4cG9ydCB2YXIgTGF5ZXJ0cmVlVmlzaXRvckRlY2lzaW9uID0ge1xuICBTVE9QOiAnU1RPUCcsXG4gIFNLSVA6ICdTS0lQJyxcbiAgREVTQ0VORDogJ0RFU0NFTkQnXG59O1xuXG5MYXllcnRyZWVDb250cm9sbGVyLnByb3RvdHlwZS50cmF2ZXJzZURlcHRoRmlyc3QgPSBmdW5jdGlvbiAodmlzaXRvcikge1xuICB2YXIgZGVjaXNpb24gPSB2aXNpdG9yKHRoaXMpIHx8IExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5ERVNDRU5EO1xuXG4gIHN3aXRjaCAoZGVjaXNpb24pIHtcbiAgICBjYXNlIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5TVE9QOlxuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICBjYXNlIExheWVydHJlZVZpc2l0b3JEZWNpc2lvbi5TS0lQOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgY2FzZSBMYXllcnRyZWVWaXNpdG9yRGVjaXNpb24uREVTQ0VORDpcbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHRoaXMuY2hpbGRyZW4pLCBfc3RlcDI7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMigpKS5kb25lOykge1xuICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDIudmFsdWU7XG4gICAgICAgIHZhciBzdG9wID0gY2hpbGQudHJhdmVyc2VEZXB0aEZpcnN0KHZpc2l0b3IpO1xuXG4gICAgICAgIGlmIChzdG9wKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93ICdVbmhhbmRsZWQgY2FzZSc7XG4gIH1cbn07XG5cbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0xheWVydHJlZUNvbnRyb2xsZXInLCBbXSk7XG5tb2R1bGUuY29udHJvbGxlcignbmdlb0xheWVydHJlZUNvbnRyb2xsZXInLCBMYXllcnRyZWVDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8c3BhbiBuZy1pZj1cIjo6IWxheWVydHJlZUN0cmwuaXNSb290XCI+e3s6OmxheWVydHJlZUN0cmwubm9kZS5uYW1lfX08L3NwYW4+XFxuPGlucHV0XFxuICB0eXBlPVwiY2hlY2tib3hcIlxcbiAgbmctaWY9XCI6OmxheWVydHJlZUN0cmwubm9kZSAmJiAhbGF5ZXJ0cmVlQ3RybC5ub2RlLmNoaWxkcmVuXCJcXG4gIG5nLW1vZGVsPVwibGF5ZXJ0cmVlQ3RybC5nZXRTZXRBY3RpdmVcIlxcbiAgbmctbW9kZWwtb3B0aW9ucz1cIntnZXR0ZXJTZXR0ZXI6IHRydWV9XCIvPlxcbjx1bCBuZy1pZj1cIjo6bGF5ZXJ0cmVlQ3RybC5ub2RlLmNoaWxkcmVuXCI+XFxuICA8bGlcXG4gICAgbmctcmVwZWF0PVwibm9kZSBpbiA6OmxheWVydHJlZUN0cmwubm9kZS5jaGlsZHJlblwiXFxuICAgIG5nZW8tbGF5ZXJ0cmVlPVwiOjpub2RlXCJcXG4gICAgbmdlby1sYXllcnRyZWUtbm90cm9vdFxcbiAgICBuZ2VvLWxheWVydHJlZS1tYXA9XCJsYXllcnRyZWVDdHJsLm1hcFwiXFxuICAgIG5nZW8tbGF5ZXJ0cmVlLW5vZGVsYXllcmV4cHI9XCJsYXllcnRyZWVDdHJsLm5vZGVsYXllckV4cHJcIlxcbiAgICBuZ2VvLWxheWVydHJlZS1saXN0ZW5lcnNleHByPVwibGF5ZXJ0cmVlQ3RybC5saXN0ZW5lcnNFeHByXCI+XFxuICA8L2xpPlxcbjwvdWw+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImdtZkxheWVydHJlZUNvbXBvbmVudC4kaW5qZWN0ID0gW1wibmdlb0xheWVydHJlZVRlbXBsYXRlVXJsXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0xheWVydHJlZUNvbnRyb2xsZXIsIHsgTGF5ZXJ0cmVlQ29udHJvbGxlciB9IGZyb20gJ25nZW8vbGF5ZXJ0cmVlL0NvbnRyb2xsZXIuanMnO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2NvbGxhcHNlLmpzJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0xheWVydHJlZScsIFtuZ2VvTGF5ZXJ0cmVlQ29udHJvbGxlci5uYW1lXSk7XG5tb2R1bGUudmFsdWUoJ25nZW9MYXllcnRyZWVUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSBhdHRyc1snbmdlb0xheWVydHJlZVRlbXBsYXRldXJsJ107XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9sYXllcnRyZWUnO1xufSk7XG5tb2R1bGUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nZW8vbGF5ZXJ0cmVlJywgcmVxdWlyZSgnLi9jb21wb25lbnQuaHRtbCcpKTtcbn1dKTtcblxuZnVuY3Rpb24gZ21mTGF5ZXJ0cmVlQ29tcG9uZW50KG5nZW9MYXllcnRyZWVUZW1wbGF0ZVVybCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6IG5nZW9MYXllcnRyZWVUZW1wbGF0ZVVybCxcbiAgICBjb250cm9sbGVyOiBMYXllcnRyZWVDb250cm9sbGVyXG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9MYXllcnRyZWUnLCBnbWZMYXllcnRyZWVDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9MYXllcnRyZWVDb21wb25lbnQgZnJvbSAnbmdlby9sYXllcnRyZWUvY29tcG9uZW50LmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvTGF5ZXJ0cmVlTW9kdWxlJywgW25nZW9MYXllcnRyZWVDb21wb25lbnQubmFtZV0pOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlTW9kdWxlIGZyb20gJ25nZW8vZGF0YXNvdXJjZS9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9Eb3dubG9hZE1vZHVsZSBmcm9tICduZ2VvL2Rvd25sb2FkL21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb0RyYXdNb2R1bGUgZnJvbSAnbmdlby9kcmF3L21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb0VkaXRpbmdNb2R1bGUgZnJvbSAnbmdlby9lZGl0aW5nL21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb0ZpbHRlck1vZHVsZSBmcm9tICduZ2VvL2ZpbHRlci9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9Hb29nbGVzdHJlZXR2aWV3TW9kdWxlIGZyb20gJ25nZW8vZ29vZ2xlc3RyZWV0dmlldy9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9HcmlkTW9kdWxlIGZyb20gJ25nZW8vZ3JpZC9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9MYXllcnRyZWVNb2R1bGUgZnJvbSAnbmdlby9sYXllcnRyZWUvbW9kdWxlLmpzJztcbmltcG9ydCBuZ2VvTWFwTW9kdWxlIGZyb20gJ25nZW8vbWFwL21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb01hcExheWVySGVscGVyIGZyb20gJ25nZW8vbWFwL0xheWVySGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWVhc3VyZU1vZHVsZSBmcm9tICduZ2VvL21lYXN1cmUvbW9kdWxlLmpzJztcbmltcG9ydCBuZ2VvUHJpbnRNb2R1bGUgZnJvbSAnbmdlby9wcmludC9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9Qcm9maWxlTW9kdWxlIGZyb20gJ25nZW8vcHJvZmlsZS9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9RdWVyeU1vZHVsZSBmcm9tICduZ2VvL3F1ZXJ5L21vZHVsZS5qcyc7XG5pbXBvcnQgbmdlb1NlYXJjaE1vZHVsZSBmcm9tICduZ2VvL3NlYXJjaC9tb2R1bGUuanMnO1xuaW1wb3J0IG5nZW9TdGF0ZW1hbmFnZXJNb2R1bGUgZnJvbSAnbmdlby9zdGF0ZW1hbmFnZXIvbW9kdWxlLmpzJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyV2ZzUGVybWFsaW5rIGZyb20gJ25nZW8vc3RhdGVtYW5hZ2VyL1dmc1Blcm1hbGluay5qcyc7XG5pbXBvcnQgbmdlb01pc2NFeHRyYU1vZHVsZSBmcm9tICduZ2VvL21pc2MvZXh0cmFNb2R1bGUuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ25nZW8nLCBbbmdlb0RhdGFzb3VyY2VNb2R1bGUubmFtZSwgbmdlb0Rvd25sb2FkTW9kdWxlLm5hbWUsIG5nZW9EcmF3TW9kdWxlLm5hbWUsIG5nZW9FZGl0aW5nTW9kdWxlLm5hbWUsIG5nZW9GaWx0ZXJNb2R1bGUubmFtZSwgbmdlb0dvb2dsZXN0cmVldHZpZXdNb2R1bGUubmFtZSwgbmdlb0dyaWRNb2R1bGUubmFtZSwgbmdlb0xheWVydHJlZU1vZHVsZS5uYW1lLCBuZ2VvTWFwTW9kdWxlLm5hbWUsIG5nZW9NYXBMYXllckhlbHBlci5uYW1lLCBuZ2VvTWVhc3VyZU1vZHVsZS5uYW1lLCBuZ2VvUHJpbnRNb2R1bGUubmFtZSwgbmdlb1Byb2ZpbGVNb2R1bGUubmFtZSwgbmdlb1F1ZXJ5TW9kdWxlLm5hbWUsIG5nZW9TZWFyY2hNb2R1bGUubmFtZSwgbmdlb1N0YXRlbWFuYWdlck1vZHVsZS5uYW1lLCBuZ2VvU3RhdGVtYW5hZ2VyV2ZzUGVybWFsaW5rLm5hbWUsIG5nZW9NaXNjRXh0cmFNb2R1bGUubmFtZV0pOyIsImZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOyBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvQ3VzdG9tRXZlbnQgZnJvbSAnbmdlby9DdXN0b21FdmVudC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgb2xPYnNlcnZhYmxlIGZyb20gJ29sL09ic2VydmFibGUuanMnO1xuaW1wb3J0IG9sTGF5ZXJHcm91cCBmcm9tICdvbC9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQgb2xMYXllckxheWVyIGZyb20gJ29sL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCBvbFNvdXJjZUltYWdlV01TIGZyb20gJ29sL3NvdXJjZS9JbWFnZVdNUy5qcyc7XG5pbXBvcnQgb2xTb3VyY2VUaWxlV01TIGZyb20gJ29sL3NvdXJjZS9UaWxlV01TLmpzJztcbmltcG9ydCBvbFNvdXJjZVdNVFMgZnJvbSAnb2wvc291cmNlL1dNVFMuanMnO1xuaW1wb3J0IG5nZW9MYXllckhlbHBlciBmcm9tICduZ2VvL21hcC9MYXllckhlbHBlci5qcyc7XG52YXIgQkFDS0dST1VORExBWUVSR1JPVVBfTkFNRSA9ICdiYWNrZ3JvdW5kJztcbmV4cG9ydCB2YXIgTWFwQmFja2dyb3VuZExheWVyTWFuYWdlciA9IGZ1bmN0aW9uIChfb2xPYnNlcnZhYmxlKSB7XG4gIE1hcEJhY2tncm91bmRMYXllck1hbmFnZXIuJGluamVjdCA9IFtcIm5nZW9MYXllckhlbHBlclwiXTtcblxuICBfaW5oZXJpdHNMb29zZShNYXBCYWNrZ3JvdW5kTGF5ZXJNYW5hZ2VyLCBfb2xPYnNlcnZhYmxlKTtcblxuICBmdW5jdGlvbiBNYXBCYWNrZ3JvdW5kTGF5ZXJNYW5hZ2VyKG5nZW9MYXllckhlbHBlcikge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX29sT2JzZXJ2YWJsZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMubWFwVWlkc18gPSB7fTtcbiAgICBfdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfID0gbmdlb0xheWVySGVscGVyO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBNYXBCYWNrZ3JvdW5kTGF5ZXJNYW5hZ2VyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0ID0gZnVuY3Rpb24gZ2V0KG1hcCkge1xuICAgIHZhciBtYXBVaWQgPSBvbFV0aWxHZXRVaWQobWFwKS50b1N0cmluZygpO1xuICAgIHJldHVybiBtYXBVaWQgaW4gdGhpcy5tYXBVaWRzXyA/IHRoaXMubmdlb0xheWVySGVscGVyXy5nZXRHcm91cEZyb21NYXAobWFwLCBCQUNLR1JPVU5ETEFZRVJHUk9VUF9OQU1FKS5nZXRMYXllcnMoKS5pdGVtKDApIDogbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uc2V0ID0gZnVuY3Rpb24gc2V0KG1hcCwgbGF5ZXIpIHtcbiAgICB2YXIgWkluZGV4ID0gLTIwMDtcbiAgICB2YXIgbWFwVWlkID0gb2xVdGlsR2V0VWlkKG1hcCkudG9TdHJpbmcoKTtcbiAgICB2YXIgcHJldmlvdXMgPSB0aGlzLmdldChtYXApO1xuXG4gICAgaWYgKGxheWVyICE9PSBudWxsKSB7XG4gICAgICBsYXllci5zZXRaSW5kZXgoWkluZGV4KTtcbiAgICAgIHRoaXMubmdlb0xheWVySGVscGVyXy5zZXRaSW5kZXhUb0ZpcnN0TGV2ZWxDaGlsZHJlbihsYXllciwgWkluZGV4KTtcbiAgICB9XG5cbiAgICB2YXIgYmdHcm91cCA9IHRoaXMubmdlb0xheWVySGVscGVyXy5nZXRHcm91cEZyb21NYXAobWFwLCBCQUNLR1JPVU5ETEFZRVJHUk9VUF9OQU1FKTtcblxuICAgIGlmIChwcmV2aW91cyAhPT0gbnVsbCkge1xuICAgICAgY29uc29sZS5hc3NlcnQobWFwVWlkIGluIHRoaXMubWFwVWlkc18pO1xuXG4gICAgICBpZiAobGF5ZXIgIT09IG51bGwpIHtcbiAgICAgICAgYmdHcm91cC5nZXRMYXllcnMoKS5zZXRBdCgwLCBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiZ0dyb3VwLmdldExheWVycygpLnJlbW92ZUF0KDApO1xuICAgICAgICBkZWxldGUgdGhpcy5tYXBVaWRzX1ttYXBVaWRdO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobGF5ZXIgIT09IG51bGwpIHtcbiAgICAgIGJnR3JvdXAuZ2V0TGF5ZXJzKCkuaW5zZXJ0QXQoMCwgbGF5ZXIpO1xuICAgICAgdGhpcy5tYXBVaWRzX1ttYXBVaWRdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnQgPSBuZXcgbmdlb0N1c3RvbUV2ZW50KCdjaGFuZ2UnLCB7XG4gICAgICBjdXJyZW50OiBsYXllcixcbiAgICAgIHByZXZpb3VzOiBwcmV2aW91c1xuICAgIH0pO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgcmV0dXJuIHByZXZpb3VzO1xuICB9O1xuXG4gIF9wcm90by5nZXRPcGFjaXR5QmdMYXllciA9IGZ1bmN0aW9uIGdldE9wYWNpdHlCZ0xheWVyKG1hcCkge1xuICAgIHZhciBtYXBVaWQgPSBvbFV0aWxHZXRVaWQobWFwKS50b1N0cmluZygpO1xuICAgIHJldHVybiBtYXBVaWQgaW4gdGhpcy5tYXBVaWRzXyA/IHRoaXMubmdlb0xheWVySGVscGVyXy5nZXRHcm91cEZyb21NYXAobWFwLCBCQUNLR1JPVU5ETEFZRVJHUk9VUF9OQU1FKS5nZXRMYXllcnMoKS5pdGVtKDEpIDogbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uc2V0T3BhY2l0eUJnTGF5ZXIgPSBmdW5jdGlvbiBzZXRPcGFjaXR5QmdMYXllcihtYXAsIGxheWVyKSB7XG4gICAgdmFyIGJnR3JvdXAgPSB0aGlzLm5nZW9MYXllckhlbHBlcl8uZ2V0R3JvdXBGcm9tTWFwKG1hcCwgQkFDS0dST1VORExBWUVSR1JPVVBfTkFNRSk7XG4gICAgdmFyIG9wYWNpdHlCYWNrZ3JvdW5kTGF5ZXIgPSB0aGlzLmdldE9wYWNpdHlCZ0xheWVyKG1hcCk7XG5cbiAgICBpZiAob3BhY2l0eUJhY2tncm91bmRMYXllcikge1xuICAgICAgdmFyIHByZXZpb3VzID0gYmdHcm91cC5nZXRMYXllcnMoKS5yZW1vdmUob3BhY2l0eUJhY2tncm91bmRMYXllcik7XG4gICAgICBsYXllci5zZXRPcGFjaXR5KHByZXZpb3VzID8gcHJldmlvdXMuZ2V0T3BhY2l0eSgpIDogMCk7XG4gICAgICBsYXllci5zZXRWaXNpYmxlKHByZXZpb3VzID8gcHJldmlvdXMuZ2V0VmlzaWJsZSgpIDogdHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIFpJbmRleCA9IC0xMDA7XG4gICAgbGF5ZXIuc2V0WkluZGV4KFpJbmRleCk7XG4gICAgdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLnNldFpJbmRleFRvRmlyc3RMZXZlbENoaWxkcmVuKGxheWVyLCBaSW5kZXgpO1xuICAgIHZhciBpbmRleCA9IGJnR3JvdXAuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKS5pbmRleE9mKGxheWVyKTtcblxuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIGJnR3JvdXAuZ2V0TGF5ZXJzKCkucHVzaChsYXllcik7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by51cGRhdGVEaW1lbnNpb25zID0gZnVuY3Rpb24gdXBkYXRlRGltZW5zaW9ucyhtYXAsIGRpbWVuc2lvbnMpIHtcbiAgICB2YXIgYmFzZUJnTGF5ZXIgPSB0aGlzLmdldChtYXApO1xuXG4gICAgaWYgKGJhc2VCZ0xheWVyKSB7XG4gICAgICB2YXIgbGF5ZXJzID0gW2Jhc2VCZ0xheWVyXTtcblxuICAgICAgaWYgKGJhc2VCZ0xheWVyIGluc3RhbmNlb2Ygb2xMYXllckdyb3VwKSB7XG4gICAgICAgIGxheWVycyA9IGJhc2VCZ0xheWVyLmdldExheWVycygpLmdldEFycmF5KCk7XG4gICAgICB9XG5cbiAgICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyTGF5ZXIpIHtcbiAgICAgICAgICB2YXIgaGFzVXBkYXRlcyA9IGZhbHNlO1xuICAgICAgICAgIHZhciB1cGRhdGVkRGltZW5zaW9ucyA9IHt9O1xuXG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIGxheWVyLmdldCgnZGltZW5zaW9ucycpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBkaW1lbnNpb25zW2tleV07XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZWREaW1lbnNpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgaGFzVXBkYXRlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGhhc1VwZGF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcblxuICAgICAgICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlV01UUykge1xuICAgICAgICAgICAgICBzb3VyY2UudXBkYXRlRGltZW5zaW9ucyh1cGRhdGVkRGltZW5zaW9ucyk7XG4gICAgICAgICAgICAgIHNvdXJjZS5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlVGlsZVdNUyB8fCBzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZUltYWdlV01TKSB7XG4gICAgICAgICAgICAgIHNvdXJjZS51cGRhdGVQYXJhbXModXBkYXRlZERpbWVuc2lvbnMpO1xuICAgICAgICAgICAgICBzb3VyY2UucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBNYXBCYWNrZ3JvdW5kTGF5ZXJNYW5hZ2VyO1xufShvbE9ic2VydmFibGUpO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQmFja2dyb3VuZExheWVyTWdyJywgW25nZW9MYXllckhlbHBlci5uYW1lXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb0JhY2tncm91bmRMYXllck1ncicsIE1hcEJhY2tncm91bmRMYXllck1hbmFnZXIpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCB7IENvbGxlY3Rpb25FdmVudCB9IGZyb20gJ29sL0NvbGxlY3Rpb24uanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEZlYXR1cmVPdmVybGF5KG1hbmFnZXIsIGluZGV4KSB7XG4gIHRoaXMubWFuYWdlcl8gPSBtYW5hZ2VyO1xuICB0aGlzLmluZGV4XyA9IGluZGV4O1xuICB0aGlzLmxpc3RlbmVyS2V5c18gPSBbXTtcbn1cblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLmFkZEZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB0aGlzLm1hbmFnZXJfLmFkZEZlYXR1cmUoZmVhdHVyZSwgdGhpcy5pbmRleF8pO1xufTtcblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLnJlbW92ZUZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB0aGlzLm1hbmFnZXJfLnJlbW92ZUZlYXR1cmUoZmVhdHVyZSwgdGhpcy5pbmRleF8pO1xufTtcblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLm1hbmFnZXJfLmlzRW1wdHkodGhpcy5pbmRleF8pO1xufTtcblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm1hbmFnZXJfLmNsZWFyKHRoaXMuaW5kZXhfKTtcbn07XG5cbkZlYXR1cmVPdmVybGF5LnByb3RvdHlwZS5zZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlcykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgdGhpcy5saXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG5cbiAgaWYgKGZlYXR1cmVzICE9PSBudWxsKSB7XG4gICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgX3RoaXMuYWRkRmVhdHVyZShmZWF0dXJlKTtcbiAgICB9KTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4oZmVhdHVyZXMsICdhZGQnLCB0aGlzLmhhbmRsZUZlYXR1cmVBZGRfLCB0aGlzKSk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKGZlYXR1cmVzLCAncmVtb3ZlJywgdGhpcy5oYW5kbGVGZWF0dXJlUmVtb3ZlXywgdGhpcykpO1xuICB9XG59O1xuXG5GZWF0dXJlT3ZlcmxheS5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgdGhpcy5tYW5hZ2VyXy5zZXRTdHlsZShzdHlsZSwgdGhpcy5pbmRleF8pO1xufTtcblxuRmVhdHVyZU92ZXJsYXkucHJvdG90eXBlLmhhbmRsZUZlYXR1cmVBZGRfID0gZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoZXZ0IGluc3RhbmNlb2YgQ29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGZlYXR1cmUgPSBldnQuZWxlbWVudDtcbiAgICB0aGlzLmFkZEZlYXR1cmUoZmVhdHVyZSk7XG4gIH1cbn07XG5cbkZlYXR1cmVPdmVybGF5LnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlUmVtb3ZlXyA9IGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKGV2dCBpbnN0YW5jZW9mIENvbGxlY3Rpb25FdmVudCkge1xuICAgIHZhciBmZWF0dXJlID0gZXZ0LmVsZW1lbnQ7XG4gICAgdGhpcy5yZW1vdmVGZWF0dXJlKGZlYXR1cmUpO1xuICB9XG59O1xuXG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9GZWF0dXJlT3ZlcmxheScsIFtdKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXksIHsgRmVhdHVyZU92ZXJsYXkgfSBmcm9tICduZ2VvL21hcC9GZWF0dXJlT3ZlcmxheS5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG5pbXBvcnQgb2xMYXllclZlY3RvciBmcm9tICdvbC9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ29sL29iai5qcyc7XG5pbXBvcnQgb2xTb3VyY2VWZWN0b3IgZnJvbSAnb2wvc291cmNlL1ZlY3Rvci5qcyc7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uIGFzIHRvU3R5bGVGdW5jdGlvbiwgY3JlYXRlRGVmYXVsdFN0eWxlIGFzIG9sU3R5bGVEZWZhdWx0RnVuY3Rpb24gfSBmcm9tICdvbC9zdHlsZS9TdHlsZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gRmVhdHVyZU92ZXJsYXlNZ3IoKSB7XG4gIHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF8gPSB7fTtcbiAgdGhpcy5ncm91cHNfID0gW107XG4gIHRoaXMuc291cmNlXyA9IG5ldyBvbFNvdXJjZVZlY3Rvcih7XG4gICAgdXNlU3BhdGlhbEluZGV4OiBmYWxzZVxuICB9KTtcbiAgdGhpcy5sYXllcl8gPSBuZXcgb2xMYXllclZlY3Rvcih7XG4gICAgc291cmNlOiB0aGlzLnNvdXJjZV8sXG4gICAgc3R5bGU6IHRoaXMuc3R5bGVGdW5jdGlvbl8uYmluZCh0aGlzKSxcbiAgICB1cGRhdGVXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgICB1cGRhdGVXaGlsZUludGVyYWN0aW5nOiB0cnVlXG4gIH0pO1xufVxuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIChncm91cEluZGV4KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPj0gMCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPCB0aGlzLmdyb3Vwc18ubGVuZ3RoKTtcbiAgcmV0dXJuIGlzRW1wdHkodGhpcy5ncm91cHNfW2dyb3VwSW5kZXhdLmZlYXR1cmVzKTtcbn07XG5cbkZlYXR1cmVPdmVybGF5TWdyLnByb3RvdHlwZS5hZGRGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIGdyb3VwSW5kZXgpIHtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA+PSAwKTtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA8IHRoaXMuZ3JvdXBzXy5sZW5ndGgpO1xuICB2YXIgZmVhdHVyZVVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKS50b1N0cmluZygpO1xuICB0aGlzLmZlYXR1cmVVaWRUb0dyb3VwSW5kZXhfW2ZlYXR1cmVVaWRdID0gZ3JvdXBJbmRleDtcbiAgdGhpcy5ncm91cHNfW2dyb3VwSW5kZXhdLmZlYXR1cmVzW2ZlYXR1cmVVaWRdID0gZmVhdHVyZTtcbiAgdGhpcy5zb3VyY2VfLmFkZEZlYXR1cmUoZmVhdHVyZSk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUucmVtb3ZlRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBncm91cEluZGV4KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPj0gMCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGdyb3VwSW5kZXggPCB0aGlzLmdyb3Vwc18ubGVuZ3RoKTtcbiAgdmFyIGZlYXR1cmVVaWQgPSBvbFV0aWxHZXRVaWQoZmVhdHVyZSkudG9TdHJpbmcoKTtcbiAgZGVsZXRlIHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF9bZmVhdHVyZVVpZF07XG4gIGRlbGV0ZSB0aGlzLmdyb3Vwc19bZ3JvdXBJbmRleF0uZmVhdHVyZXNbZmVhdHVyZVVpZF07XG4gIHRoaXMuc291cmNlXy5yZW1vdmVGZWF0dXJlKGZlYXR1cmUpO1xufTtcblxuRmVhdHVyZU92ZXJsYXlNZ3IucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKGdyb3VwSW5kZXgpIHtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA+PSAwKTtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA8IHRoaXMuZ3JvdXBzXy5sZW5ndGgpO1xuICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3Vwc19bZ3JvdXBJbmRleF07XG5cbiAgZm9yICh2YXIgZmVhdHVyZVVpZCBpbiBncm91cC5mZWF0dXJlcykge1xuICAgIHRoaXMucmVtb3ZlRmVhdHVyZShncm91cC5mZWF0dXJlc1tmZWF0dXJlVWlkXSwgZ3JvdXBJbmRleCk7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydChpc0VtcHR5KGdyb3VwLmZlYXR1cmVzKSk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmxheWVyXztcbn07XG5cbkZlYXR1cmVPdmVybGF5TWdyLnByb3RvdHlwZS5nZXRGZWF0dXJlT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGdyb3VwSW5kZXggPSB0aGlzLmdyb3Vwc18ubGVuZ3RoO1xuICB0aGlzLmdyb3Vwc18ucHVzaCh7XG4gICAgc3R5bGVGdW5jdGlvbjogb2xTdHlsZURlZmF1bHRGdW5jdGlvbixcbiAgICBmZWF0dXJlczoge31cbiAgfSk7XG4gIHJldHVybiBuZXcgRmVhdHVyZU92ZXJsYXkodGhpcywgZ3JvdXBJbmRleCk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgdGhpcy5sYXllcl8uc2V0TWFwKG1hcCk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGUsIGdyb3VwSW5kZXgpIHtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA+PSAwKTtcbiAgY29uc29sZS5hc3NlcnQoZ3JvdXBJbmRleCA8IHRoaXMuZ3JvdXBzXy5sZW5ndGgpO1xuICB0aGlzLmdyb3Vwc19bZ3JvdXBJbmRleF0uc3R5bGVGdW5jdGlvbiA9IHN0eWxlID09PSBudWxsID8gb2xTdHlsZURlZmF1bHRGdW5jdGlvbiA6IHRvU3R5bGVGdW5jdGlvbihzdHlsZSk7XG59O1xuXG5GZWF0dXJlT3ZlcmxheU1nci5wcm90b3R5cGUuc3R5bGVGdW5jdGlvbl8gPSBmdW5jdGlvbiAoZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICB2YXIgZmVhdHVyZVVpZCA9IG9sVXRpbEdldFVpZChmZWF0dXJlKS50b1N0cmluZygpO1xuICBjb25zb2xlLmFzc2VydChmZWF0dXJlVWlkIGluIHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF8pO1xuICB2YXIgZ3JvdXBJbmRleCA9IHRoaXMuZmVhdHVyZVVpZFRvR3JvdXBJbmRleF9bZmVhdHVyZVVpZF07XG4gIHZhciBncm91cCA9IHRoaXMuZ3JvdXBzX1tncm91cEluZGV4XTtcbiAgcmV0dXJuIGdyb3VwLnN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG59O1xuXG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9GZWF0dXJlT3ZlcmxheU1ncicsIFtuZ2VvTWFwRmVhdHVyZU92ZXJsYXkubmFtZV0pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9GZWF0dXJlT3ZlcmxheU1ncicsIEZlYXR1cmVPdmVybGF5TWdyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJMYXllckhlbHBlci4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkaHR0cFwiLCBcIm5nZW9UaWxlc1ByZWxvYWRpbmdMaW1pdFwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICogYXMgb2xBcnJheSBmcm9tICdvbC9hcnJheS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRXTVRTQ2FwYWJpbGl0aWVzIGZyb20gJ29sL2Zvcm1hdC9XTVRTQ2FwYWJpbGl0aWVzLmpzJztcbmltcG9ydCBvbExheWVyR3JvdXAgZnJvbSAnb2wvbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IG9sTGF5ZXJJbWFnZSBmcm9tICdvbC9sYXllci9JbWFnZS5qcyc7XG5pbXBvcnQgb2xMYXllclRpbGUgZnJvbSAnb2wvbGF5ZXIvVGlsZS5qcyc7XG5pbXBvcnQgb2xMYXllckxheWVyIGZyb20gJ29sL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdvbC9vYmouanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2VXTVMgZnJvbSAnb2wvc291cmNlL0ltYWdlV01TLmpzJztcbmltcG9ydCBvbFNvdXJjZVRpbGVXTVMgZnJvbSAnb2wvc291cmNlL1RpbGVXTVMuanMnO1xuaW1wb3J0IG9sU291cmNlV01UUywgeyBvcHRpb25zRnJvbUNhcGFiaWxpdGllcyB9IGZyb20gJ29sL3NvdXJjZS9XTVRTLmpzJztcbmltcG9ydCB7IGFwcGVuZFBhcmFtcyBhcyBvbFVyaUFwcGVuZFBhcmFtcyB9IGZyb20gJ29sL3VyaS5qcyc7XG5pbXBvcnQgeyBTZXJ2ZXJUeXBlIH0gZnJvbSAnbmdlby9kYXRhc291cmNlL09HQy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gTGF5ZXJIZWxwZXIoJHEsICRodHRwLCBuZ2VvVGlsZXNQcmVsb2FkaW5nTGltaXQpIHtcbiAgdGhpcy4kcV8gPSAkcTtcbiAgdGhpcy4kaHR0cF8gPSAkaHR0cDtcbiAgdGhpcy50aWxlc1ByZWxvYWRpbmdMaW1pdF8gPSBuZ2VvVGlsZXNQcmVsb2FkaW5nTGltaXQgPT09IG51bGwgPyBJbmZpbml0eSA6IG5nZW9UaWxlc1ByZWxvYWRpbmdMaW1pdDtcbn1cbnZhciBHUk9VUF9LRVkgPSAnZ3JvdXBOYW1lJztcbnZhciBSRUZSRVNIX1BBUkFNID0gJ3JhbmRvbSc7XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5jb3B5UHJvcGVydGllcyA9IGZ1bmN0aW9uIChsYXllckZyb20sIGxheWVyVG8sIG9wdF9leGNsdWRlcykge1xuICB2YXIgcHJvcGVydGllcyA9IGxheWVyRnJvbS5nZXRQcm9wZXJ0aWVzKCk7XG5cbiAgaWYgKG9wdF9leGNsdWRlcykge1xuICAgIHZhciBleGNsdWRlcyA9IG9wdF9leGNsdWRlcztcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfa2V5cyA9IGtleXM7IF9pIDwgX2tleXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIga2V5ID0gX2tleXNbX2ldO1xuXG4gICAgICBpZiAoZXhjbHVkZXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGF5ZXJUby5zZXQoa2V5LCBwcm9wZXJ0aWVzW2tleV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsYXllclRvLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gIH1cbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5jcmVhdGVCYXNpY1dNU0xheWVyID0gZnVuY3Rpb24gKHNvdXJjZVVSTCwgc291cmNlTGF5ZXJzTmFtZSwgc291cmNlRm9ybWF0LCBvcHRfc2VydmVyVHlwZSwgb3B0X3RpbWUsIG9wdF9wYXJhbXMsIG9wdF9jcm9zc09yaWdpbiwgb3B0X2N1c3RvbVNvdXJjZU9wdGlvbnMsIG9wdF9jdXN0b21MYXllck9wdGlvbnMpIHtcbiAgdmFyIHBhcmFtcyA9IHtcbiAgICBGT1JNQVQ6IHNvdXJjZUZvcm1hdCxcbiAgICBMQVlFUlM6IHNvdXJjZUxheWVyc05hbWVcbiAgfTtcbiAgdmFyIG9sU2VydmVyVHlwZTtcblxuICBpZiAob3B0X3RpbWUpIHtcbiAgICBwYXJhbXMuVElNRSA9IG9wdF90aW1lO1xuICB9XG5cbiAgaWYgKG9wdF9zZXJ2ZXJUeXBlKSB7XG4gICAgcGFyYW1zLlNFUlZFUlRZUEUgPSBvcHRfc2VydmVyVHlwZTtcbiAgICBvbFNlcnZlclR5cGUgPSBvcHRfc2VydmVyVHlwZS5yZXBsYWNlKFNlcnZlclR5cGUuUUdJU1NFUlZFUiwgJ3FnaXMnKTtcbiAgfVxuXG4gIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0X2N1c3RvbVNvdXJjZU9wdGlvbnMsIHtcbiAgICB1cmw6IHNvdXJjZVVSTCxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICBzZXJ2ZXJUeXBlOiBvbFNlcnZlclR5cGUsXG4gICAgY3Jvc3NPcmlnaW46IG9wdF9jcm9zc09yaWdpblxuICB9KTtcbiAgdmFyIHNvdXJjZSA9IG5ldyBvbFNvdXJjZUltYWdlV01TKG9wdGlvbnMpO1xuXG4gIGlmIChvcHRfcGFyYW1zKSB7XG4gICAgc291cmNlLnVwZGF0ZVBhcmFtcyhvcHRfcGFyYW1zKTtcbiAgfVxuXG4gIGlmICghKG9wdF9wYXJhbXMgJiYgb3B0X3BhcmFtcy5TVFlMRVMpKSB7XG4gICAgcGFyYW1zLlNUWUxFUyA9ICcnO1xuICAgIHZhciBpID0gc291cmNlTGF5ZXJzTmFtZS5zcGxpdCgnLCcpLmxlbmd0aDtcblxuICAgIHdoaWxlIChpID4gMSkge1xuICAgICAgcGFyYW1zLlNUWUxFUy5jb25jYXQoJywnKTtcbiAgICAgIGktLTtcbiAgICB9XG4gIH1cblxuICB2YXIgbGF5ZXJPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0X2N1c3RvbUxheWVyT3B0aW9ucywge1xuICAgIHNvdXJjZTogc291cmNlXG4gIH0pO1xuICByZXR1cm4gbmV3IG9sTGF5ZXJJbWFnZShsYXllck9wdGlvbnMpO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmNyZWF0ZUJhc2ljV01TTGF5ZXJGcm9tRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChkYXRhU291cmNlLCBvcHRfY3Jvc3NPcmlnaW4pIHtcbiAgdmFyIHVybCA9IGRhdGFTb3VyY2Uud21zVXJsO1xuXG4gIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB1cmwnKTtcbiAgfVxuXG4gIHZhciBsYXllck5hbWVzID0gZGF0YVNvdXJjZS5nZXRXTVNMYXllck5hbWVzKCkuam9pbignLCcpO1xuICB2YXIgc2VydmVyVHlwZSA9IGRhdGFTb3VyY2Uub2djU2VydmVyVHlwZTtcbiAgdmFyIGltYWdlVHlwZSA9IGRhdGFTb3VyY2Uub2djSW1hZ2VUeXBlO1xuICB2YXIgbGF5ZXIgPSB0aGlzLmNyZWF0ZUJhc2ljV01TTGF5ZXIodXJsLCBsYXllck5hbWVzLCBpbWFnZVR5cGUsIHNlcnZlclR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRfY3Jvc3NPcmlnaW4pO1xuICBsYXllci5zZXRWaXNpYmxlKGRhdGFTb3VyY2UudmlzaWJsZSk7XG4gIGxheWVyLnNldCgncXVlcnlTb3VyY2VJZHMnLCBbZGF0YVNvdXJjZS5pZF0pO1xuICBsYXllci5zZXQoJ2RhdGFTb3VyY2VJZCcsIGRhdGFTb3VyY2UuaWQpO1xuICByZXR1cm4gbGF5ZXI7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuY3JlYXRlV01UU0xheWVyRnJvbUNhcGFiaWxpdGl0ZXMgPSBmdW5jdGlvbiAoY2FwYWJpbGl0aWVzVVJMLCBsYXllck5hbWUsIG9wdF9tYXRyaXhTZXQsIG9wdF9kaW1lbnNpb25zLCBvcHRfY3VzdG9tT3B0aW9ucywgb3B0X21pblJlc29sdXRpb24sIG9wdF9tYXhSZXNvbHV0aW9uLCBvcHRfb3BhY2l0eSkge1xuICBpZiAob3B0X21heFJlc29sdXRpb24pIHtcbiAgICBvcHRfbWF4UmVzb2x1dGlvbiA9IG9wdF9tYXhSZXNvbHV0aW9uICogMS4wMDAwMDAxO1xuICB9XG5cbiAgdmFyIHBhcnNlciA9IG5ldyBvbEZvcm1hdFdNVFNDYXBhYmlsaXRpZXMoKTtcbiAgdmFyIGxheWVyID0gbmV3IG9sTGF5ZXJUaWxlKHtcbiAgICBwcmVsb2FkOiB0aGlzLnRpbGVzUHJlbG9hZGluZ0xpbWl0XyxcbiAgICBtaW5SZXNvbHV0aW9uOiBvcHRfbWluUmVzb2x1dGlvbixcbiAgICBtYXhSZXNvbHV0aW9uOiBvcHRfbWF4UmVzb2x1dGlvblxuICB9KTtcbiAgdmFyICRxID0gdGhpcy4kcV87XG4gIHJldHVybiB0aGlzLiRodHRwXy5nZXQoY2FwYWJpbGl0aWVzVVJMLCB7XG4gICAgY2FjaGU6IHRydWVcbiAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICB2YXIgcmVzdWx0O1xuXG4gICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJlc3VsdCA9IHBhcnNlci5yZWFkKHJlc3BvbnNlLmRhdGEpO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0X2N1c3RvbU9wdGlvbnMsIG9wdGlvbnNGcm9tQ2FwYWJpbGl0aWVzKHJlc3VsdCwge1xuICAgICAgICBtYXRyaXhTZXQ6IG9wdF9tYXRyaXhTZXQsXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICAgICAgbGF5ZXI6IGxheWVyTmFtZVxuICAgICAgfSkpO1xuICAgICAgdmFyIHNvdXJjZSA9IG5ldyBvbFNvdXJjZVdNVFMob3B0aW9ucyk7XG5cbiAgICAgIGlmIChvcHRfZGltZW5zaW9ucyAmJiAhaXNFbXB0eShvcHRfZGltZW5zaW9ucykpIHtcbiAgICAgICAgc291cmNlLnVwZGF0ZURpbWVuc2lvbnMob3B0X2RpbWVuc2lvbnMpO1xuICAgICAgfVxuXG4gICAgICBsYXllci5zZXRTb3VyY2Uoc291cmNlKTtcbiAgICAgIHZhciBsYXllcnMgPSByZXN1bHQuQ29udGVudHMuTGF5ZXI7XG4gICAgICB2YXIgbCA9IG9sQXJyYXkuZmluZChsYXllcnMsIGZ1bmN0aW9uIChlbHQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICByZXR1cm4gZWx0LklkZW50aWZpZXIgPT0gbGF5ZXJOYW1lO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghbCkge1xuICAgICAgICByZXR1cm4gJHEucmVqZWN0KFwiTGF5ZXIgXCIgKyBsYXllck5hbWUgKyBcIiBub3QgYXZhaWxhYmxlIGluIFdNVFMgY2FwYWJpbGl0aWVzIGZyb20gXCIgKyBjYXBhYmlsaXRpZXNVUkwpO1xuICAgICAgfVxuXG4gICAgICBsYXllci5zZXQoJ2NhcGFiaWxpdGllc1N0eWxlcycsIGwuU3R5bGUpO1xuXG4gICAgICBpZiAob3B0X29wYWNpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsYXllci5zZXRPcGFjaXR5KG9wdF9vcGFjaXR5KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICRxLnJlc29sdmUobGF5ZXIpO1xuICAgIH1cblxuICAgIHJldHVybiAkcS5yZWplY3QoXCJGYWlsZWQgdG8gZ2V0IFdNVFMgY2FwYWJpbGl0aWVzIGZyb20gXCIgKyBjYXBhYmlsaXRpZXNVUkwpO1xuICB9KTtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5jcmVhdGVXTVRTTGF5ZXJGcm9tQ2FwYWJpbGl0aXRlc09iaiA9IGZ1bmN0aW9uIChjYXBhYmlsaXRpZXMsIGxheWVyQ2FwLCBvcHRfZGltZW5zaW9ucykge1xuICB2YXIgb3B0aW9ucyA9IG9wdGlvbnNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllcywge1xuICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICBsYXllcjogbGF5ZXJDYXAuSWRlbnRpZmllclxuICB9KTtcbiAgY29uc29sZS5hc3NlcnQob3B0aW9ucyk7XG4gIHZhciBzb3VyY2UgPSBuZXcgb2xTb3VyY2VXTVRTKG9wdGlvbnMpO1xuXG4gIGlmIChvcHRfZGltZW5zaW9ucyAmJiAhaXNFbXB0eShvcHRfZGltZW5zaW9ucykpIHtcbiAgICBzb3VyY2UudXBkYXRlRGltZW5zaW9ucyhvcHRfZGltZW5zaW9ucyk7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gbmV3IG9sTGF5ZXJUaWxlKHtcbiAgICBwcmVsb2FkOiBJbmZpbml0eSxcbiAgICBzb3VyY2U6IHNvdXJjZVxuICB9KTtcbiAgcmVzdWx0LnNldCgnY2FwYWJpbGl0aWVzU3R5bGVzJywgbGF5ZXJDYXAuU3R5bGUpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmNyZWF0ZUJhc2ljR3JvdXAgPSBmdW5jdGlvbiAob3B0X2xheWVycykge1xuICB2YXIgZ3JvdXAgPSBuZXcgb2xMYXllckdyb3VwKCk7XG5cbiAgaWYgKG9wdF9sYXllcnMpIHtcbiAgICBncm91cC5zZXRMYXllcnMob3B0X2xheWVycyk7XG4gIH1cblxuICByZXR1cm4gZ3JvdXA7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuZ2V0R3JvdXBGcm9tTWFwID0gZnVuY3Rpb24gKG1hcCwgZ3JvdXBOYW1lKSB7XG4gIHZhciBncm91cHMgPSBtYXAuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICB2YXIgZ3JvdXA7XG4gIGdyb3Vwcy5nZXRBcnJheSgpLnNvbWUoZnVuY3Rpb24gKGV4aXN0aW5nR3JvdXApIHtcbiAgICBpZiAoZXhpc3RpbmdHcm91cC5nZXQoR1JPVVBfS0VZKSA9PT0gZ3JvdXBOYW1lKSB7XG4gICAgICBncm91cCA9IGV4aXN0aW5nR3JvdXA7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCFncm91cCkge1xuICAgIGdyb3VwID0gdGhpcy5jcmVhdGVCYXNpY0dyb3VwKCk7XG4gICAgZ3JvdXAuc2V0KEdST1VQX0tFWSwgZ3JvdXBOYW1lKTtcbiAgICBtYXAuYWRkTGF5ZXIoZ3JvdXApO1xuICB9XG5cbiAgcmV0dXJuIGdyb3VwO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmdldEZsYXRMYXllcnMgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckdyb3VwKSB7XG4gICAgdmFyIHN1YmxheWVycyA9IGxheWVyLmdldExheWVycygpLmdldEFycmF5KCk7XG4gICAgdmFyIGhhc0dyb3VwTGF5ZXIgPSBzdWJsYXllcnMuc29tZShmdW5jdGlvbiAoc3VibGF5ZXIpIHtcbiAgICAgIHJldHVybiBzdWJsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cDtcbiAgICB9KTtcblxuICAgIGlmICghaGFzR3JvdXBMYXllcikge1xuICAgICAgcmV0dXJuIHN1YmxheWVycy5zbGljZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzLmdldEZsYXRMYXllcnNfKGxheWVyLCBbXSwgdW5kZWZpbmVkKTtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5nZXRGbGF0TGF5ZXJzXyA9IGZ1bmN0aW9uIChsYXllciwgYXJyYXksIGNvbXB1dGVkT3BhY2l0eSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBvcGFjaXR5ID0gbGF5ZXIuZ2V0T3BhY2l0eSgpO1xuXG4gIGlmIChjb21wdXRlZE9wYWNpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbXB1dGVkT3BhY2l0eSAqPSBvcGFjaXR5O1xuICB9IGVsc2Uge1xuICAgIGNvbXB1dGVkT3BhY2l0eSA9IG9wYWNpdHk7XG4gIH1cblxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICB2YXIgc3VibGF5ZXJzID0gbGF5ZXIuZ2V0TGF5ZXJzKCk7XG4gICAgc3VibGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgIF90aGlzLmdldEZsYXRMYXllcnNfKGwsIGFycmF5LCBjb21wdXRlZE9wYWNpdHkpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckxheWVyKSB7XG4gICAgaWYgKCFhcnJheS5pbmNsdWRlcyhsYXllcikpIHtcbiAgICAgIGxheWVyLnNldCgnaW5oZXJpdGVkT3BhY2l0eScsIGNvbXB1dGVkT3BhY2l0eSwgdHJ1ZSk7XG4gICAgICBhcnJheS5wdXNoKGxheWVyKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuZ2V0TGF5ZXJCeU5hbWUgPSBmdW5jdGlvbiAobGF5ZXJOYW1lLCBsYXllcnMpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgdmFyIGZvdW5kID0gbnVsbDtcbiAgbGF5ZXJzLnNvbWUoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckdyb3VwKSB7XG4gICAgICB2YXIgc3VibGF5ZXJzID0gbGF5ZXIuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKTtcbiAgICAgIGZvdW5kID0gX3RoaXMyLmdldExheWVyQnlOYW1lKGxheWVyTmFtZSwgc3VibGF5ZXJzKTtcbiAgICB9IGVsc2UgaWYgKGxheWVyLmdldCgnbGF5ZXJOb2RlTmFtZScpID09PSBsYXllck5hbWUpIHtcbiAgICAgIGZvdW5kID0gbGF5ZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhZm91bmQ7XG4gIH0pO1xuICByZXR1cm4gZm91bmQ7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUuZ2V0V01UU0xlZ2VuZFVSTCA9IGZ1bmN0aW9uIChsYXllcikge1xuICB2YXIgdXJsO1xuICB2YXIgc3R5bGVzID0gbGF5ZXIuZ2V0KCdjYXBhYmlsaXRpZXNTdHlsZXMnKTtcblxuICBpZiAoc3R5bGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgbGVnZW5kVVJMID0gc3R5bGVzWzBdLmxlZ2VuZFVSTDtcblxuICAgIGlmIChsZWdlbmRVUkwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXJsID0gbGVnZW5kVVJMWzBdLmhyZWY7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5nZXRXTVNMZWdlbmRVUkwgPSBmdW5jdGlvbiAodXJsLCBsYXllck5hbWUsIG9wdF9zY2FsZSwgb3B0X2xlZ2VuZFJ1bGUsIG9wdF9sZWdlbmRXaWR0aCwgb3B0X2xlZ2VuZEhlaWdodCwgb3B0X3NlcnZlcnR5cGUsIG9wdF9kcGksIG9wdF9iYm94LCBvcHRfc3JzLCBvcHRfYWRkaXRpb25hbFF1ZXJ5U3RyaW5nKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBxdWVyeVN0cmluZyA9IHtcbiAgICBGT1JNQVQ6ICdpbWFnZS9wbmcnLFxuICAgIFRSQU5TUEFSRU5UOiB0cnVlLFxuICAgIFNFUlZJQ0U6ICdXTVMnLFxuICAgIFZFUlNJT046ICcxLjEuMScsXG4gICAgUkVRVUVTVDogJ0dldExlZ2VuZEdyYXBoaWMnLFxuICAgIExBWUVSOiBsYXllck5hbWVcbiAgfTtcblxuICBpZiAob3B0X3NjYWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBxdWVyeVN0cmluZy5TQ0FMRSA9IG9wdF9zY2FsZTtcbiAgfVxuXG4gIGlmIChvcHRfbGVnZW5kUnVsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcXVlcnlTdHJpbmcuUlVMRSA9IG9wdF9sZWdlbmRSdWxlO1xuXG4gICAgaWYgKG9wdF9sZWdlbmRXaWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBxdWVyeVN0cmluZy5XSURUSCA9IG9wdF9sZWdlbmRXaWR0aDtcbiAgICB9XG5cbiAgICBpZiAob3B0X2xlZ2VuZEhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBxdWVyeVN0cmluZy5IRUlHSFQgPSBvcHRfbGVnZW5kSGVpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIGlmIChvcHRfc2VydmVydHlwZSA9PSAncWdpcycpIHtcbiAgICBpZiAob3B0X2RwaSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHF1ZXJ5U3RyaW5nLkRQSSA9IG9wdF9kcGk7XG4gICAgfVxuXG4gICAgaWYgKG9wdF9iYm94ICE9IHVuZGVmaW5lZCAmJiBvcHRfc3JzICE9IHVuZGVmaW5lZCAmJiBvcHRfc2NhbGUgIT0gdW5kZWZpbmVkICYmIG9wdF9kcGkgIT0gdW5kZWZpbmVkICYmIG9wdF9sZWdlbmRSdWxlID09IHVuZGVmaW5lZCkge1xuICAgICAgcXVlcnlTdHJpbmcuQkJPWCA9IG9wdF9iYm94LmpvaW4oJywnKTtcbiAgICAgIHF1ZXJ5U3RyaW5nLlNSUyA9IG9wdF9zcnM7XG4gICAgICBxdWVyeVN0cmluZy5XSURUSCA9IE1hdGgucm91bmQoKG9wdF9iYm94WzJdIC0gb3B0X2Jib3hbMF0pIC8gb3B0X3NjYWxlICogMzkuMzcgKiBvcHRfZHBpKTtcbiAgICAgIHF1ZXJ5U3RyaW5nLkhFSUdIVCA9IE1hdGgucm91bmQoKG9wdF9iYm94WzNdIC0gb3B0X2Jib3hbMV0pIC8gb3B0X3NjYWxlICogMzkuMzcgKiBvcHRfZHBpKTtcbiAgICB9XG4gIH1cblxuICBpZiAob3B0X2FkZGl0aW9uYWxRdWVyeVN0cmluZykge1xuICAgIE9iamVjdC5hc3NpZ24ocXVlcnlTdHJpbmcsIG9wdF9hZGRpdGlvbmFsUXVlcnlTdHJpbmcpO1xuICB9XG5cbiAgcmV0dXJuIG9sVXJpQXBwZW5kUGFyYW1zKHVybCwgcXVlcnlTdHJpbmcpO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLmlzTGF5ZXJWaXNpYmxlID0gZnVuY3Rpb24gKGxheWVyLCBtYXApIHtcbiAgaWYgKCFsYXllci5nZXRWaXNpYmxlKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgY3VycmVudFJlc29sdXRpb24gPSBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcblxuICBpZiAoY3VycmVudFJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXNvbHV0aW9uJyk7XG4gIH1cblxuICByZXR1cm4gY3VycmVudFJlc29sdXRpb24gPiBsYXllci5nZXRNaW5SZXNvbHV0aW9uKCkgJiYgY3VycmVudFJlc29sdXRpb24gPCBsYXllci5nZXRNYXhSZXNvbHV0aW9uKCk7XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUucmVmcmVzaFdNU0xheWVyID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gIHZhciBzb3VyY2VfID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gIGNvbnNvbGUuYXNzZXJ0KHNvdXJjZV8gaW5zdGFuY2VvZiBvbFNvdXJjZUltYWdlV01TIHx8IHNvdXJjZV8gaW5zdGFuY2VvZiBvbFNvdXJjZVRpbGVXTVMpO1xuICB2YXIgc291cmNlID0gc291cmNlXztcbiAgdmFyIHBhcmFtcyA9IHNvdXJjZS5nZXRQYXJhbXMoKTtcbiAgcGFyYW1zW1JFRlJFU0hfUEFSQU1dID0gTWF0aC5yYW5kb20oKTtcbiAgc291cmNlLnVwZGF0ZVBhcmFtcyhwYXJhbXMpO1xufTtcblxuTGF5ZXJIZWxwZXIucHJvdG90eXBlLnNldFpJbmRleFRvRmlyc3RMZXZlbENoaWxkcmVuID0gZnVuY3Rpb24gKGVsZW1lbnQsIFpJbmRleCkge1xuICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIG9sTGF5ZXJHcm91cCkge1xuICAgIHZhciBpbm5lckdyb3VwTGF5ZXJzID0gZWxlbWVudC5nZXRMYXllcnMoKTtcbiAgICBpbm5lckdyb3VwTGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGlubmVyTGF5ZXIpIHtcbiAgICAgIHJldHVybiBpbm5lckxheWVyLnNldFpJbmRleChaSW5kZXgpO1xuICAgIH0pO1xuICB9XG59O1xuXG5MYXllckhlbHBlci5wcm90b3R5cGUudXBkYXRlV01TTGF5ZXJTdGF0ZSA9IGZ1bmN0aW9uIChsYXllciwgbmFtZXMsIG9wdF90aW1lKSB7XG4gIGlmIChuYW1lcy5sZW5ndGggPD0gMCkge1xuICAgIGxheWVyLnNldFZpc2libGUoZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XG4gICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VJbWFnZVdNUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc291cmNlIHR5cGUnKTtcbiAgICB9XG5cbiAgICBpZiAob3B0X3RpbWUpIHtcbiAgICAgIHNvdXJjZS51cGRhdGVQYXJhbXMoe1xuICAgICAgICAnTEFZRVJTJzogbmFtZXMsXG4gICAgICAgICdUSU1FJzogb3B0X3RpbWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VyY2UudXBkYXRlUGFyYW1zKHtcbiAgICAgICAgJ0xBWUVSUyc6IG5hbWVzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbkxheWVySGVscGVyLnByb3RvdHlwZS5nZXRRdWVyeVNvdXJjZUlkcyA9IGZ1bmN0aW9uIChsYXllcikge1xuICByZXR1cm4gbGF5ZXIuZ2V0KCdxdWVyeVNvdXJjZUlkcycpO1xufTtcblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTGF5ZXJIZWxwZXInLCBbXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb0xheWVySGVscGVyJywgTGF5ZXJIZWxwZXIpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIm1hcENvbXBvbmVudC4kaW5qZWN0ID0gW1wiJHdpbmRvd1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbE1hcCBmcm9tICdvbC9NYXAuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTWFwJywgW10pO1xuXG5mdW5jdGlvbiBtYXBDb21wb25lbnQoJHdpbmRvdykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciBhdHRyID0gJ25nZW9NYXAnO1xuICAgICAgdmFyIHByb3AgPSBhdHRyc1thdHRyXTtcbiAgICAgIHZhciBtYXAgPSBzY29wZS4kZXZhbChwcm9wKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KG1hcCBpbnN0YW5jZW9mIG9sTWFwKTtcbiAgICAgIG1hcC5zZXRUYXJnZXQoZWxlbWVudFswXSk7XG4gICAgICB2YXIgbWFuYWdlUmVzaXplQXR0ciA9ICduZ2VvTWFwTWFuYWdlUmVzaXplJztcbiAgICAgIHZhciBtYW5hZ2VSZXNpemVQcm9wID0gYXR0cnNbbWFuYWdlUmVzaXplQXR0cl07XG4gICAgICB2YXIgbWFuYWdlUmVzaXplID0gc2NvcGUuJGV2YWwobWFuYWdlUmVzaXplUHJvcCk7XG5cbiAgICAgIGlmIChtYW5hZ2VSZXNpemUpIHtcbiAgICAgICAgdmFyIHJlc2l6ZVRyYW5zaXRpb25BdHRyID0gJ25nZW9NYXBSZXNpemVUcmFuc2l0aW9uJztcbiAgICAgICAgdmFyIHJlc2l6ZVRyYW5zaXRpb25Qcm9wID0gYXR0cnNbcmVzaXplVHJhbnNpdGlvbkF0dHJdO1xuICAgICAgICB2YXIgcmVzaXplVHJhbnNpdGlvbiA9IHNjb3BlLiRldmFsKHJlc2l6ZVRyYW5zaXRpb25Qcm9wKTtcbiAgICAgICAgbGlzdGVuKCR3aW5kb3csICdyZXNpemUnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgaWYgKHJlc2l6ZVRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB2YXIgbG9vcCA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciBhZGp1c3RTaXplID0gZnVuY3Rpb24gYWRqdXN0U2l6ZSgpIHtcbiAgICAgICAgICAgICAgbWFwLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgICAgICAgbWFwLnJlbmRlclN5bmMoKTtcblxuICAgICAgICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgICAgICR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFkanVzdFNpemUpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IHJlc2l6ZVRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBsb29wID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGFkanVzdFNpemUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWFwLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb01hcCcsIG1hcENvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01hcEJhY2tncm91bmRMYXllck1nciBmcm9tICduZ2VvL21hcC9CYWNrZ3JvdW5kTGF5ZXJNZ3IuanMnO1xuaW1wb3J0IG5nZW9NYXBDb21wb25lbnQgZnJvbSAnbmdlby9tYXAvY29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWFwRmVhdHVyZU92ZXJsYXlNZ3IgZnJvbSAnbmdlby9tYXAvRmVhdHVyZU92ZXJsYXlNZ3IuanMnO1xuaW1wb3J0IG5nZW9NYXBSZWNlbnRlciBmcm9tICduZ2VvL21hcC9yZWNlbnRlci5qcyc7XG5pbXBvcnQgbmdlb01hcFJlc2l6ZW1hcCBmcm9tICduZ2VvL21hcC9yZXNpemVtYXAuanMnO1xuaW1wb3J0IG5nZW9NYXBTY2FsZXNlbGVjdG9yIGZyb20gJ25nZW8vbWFwL3NjYWxlc2VsZWN0b3IuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ25nZW9NYXBNb2R1bGUnLCBbbmdlb01hcEJhY2tncm91bmRMYXllck1nci5uYW1lLCBuZ2VvTWFwQ29tcG9uZW50Lm5hbWUsIG5nZW9NYXBGZWF0dXJlT3ZlcmxheU1nci5uYW1lLCBuZ2VvTWFwUmVjZW50ZXIubmFtZSwgbmdlb01hcFJlc2l6ZW1hcC5uYW1lLCBuZ2VvTWFwU2NhbGVzZWxlY3Rvci5uYW1lXSk7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9SZWNlbnRlcicsIFtdKTtcblxuZnVuY3Rpb24gbWFwUmVzZW50ZXJDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgICAgdmFyIG1hcEV4cHIgPSAkYXR0cnMubmdlb1JlY2VudGVyTWFwO1xuICAgICAgdmFyIG1hcCA9ICRzY29wZS4kZXZhbChtYXBFeHByKTtcblxuICAgICAgZnVuY3Rpb24gcmVjZW50ZXIoZWxlbWVudCkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gZWxlbWVudC5hdHRyKCduZ2VvLWV4dGVudCcpO1xuXG4gICAgICAgIGlmIChleHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcblxuICAgICAgICAgIGlmIChzaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzaXplJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWFwLmdldFZpZXcoKS5maXQoJHNjb3BlLiRldmFsKGV4dGVudCksIHtcbiAgICAgICAgICAgIHNpemU6IHNpemVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB6b29tID0gZWxlbWVudC5hdHRyKCduZ2VvLXpvb20nKTtcblxuICAgICAgICBpZiAoem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRab29tKCRzY29wZS4kZXZhbCh6b29tKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGVsZW1lbnQub24oJ2NsaWNrJywgJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmVjZW50ZXIoYW5ndWxhci5lbGVtZW50KCQodGhpcykpKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY2UgPSBmdW5jdGlvbiBjZShldmVudCkge1xuICAgICAgICB2YXIgc2VsZWN0ZWQgPSBldmVudC50YXJnZXQub3B0aW9uc1tldmVudC50YXJnZXQuc2VsZWN0ZWRJbmRleF07XG4gICAgICAgIHJlY2VudGVyKGFuZ3VsYXIuZWxlbWVudChzZWxlY3RlZCkpO1xuICAgICAgfTtcblxuICAgICAgJGVsZW1lbnQub24oe1xuICAgICAgICBjaGFuZ2U6IGNlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9SZWNlbnRlcicsIG1hcFJlc2VudGVyQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJtYXBSZXNpemVDb21wb25lbnQuJGluamVjdCA9IFtcIiR3aW5kb3dcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBvbE1hcCBmcm9tICdvbC9NYXAuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUmVzaXplbWFwJywgW10pO1xuXG5mdW5jdGlvbiBtYXBSZXNpemVDb21wb25lbnQoJHdpbmRvdykge1xuICB2YXIgZHVyYXRpb24gPSAxMDAwO1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciBhdHRyID0gJ25nZW9SZXNpemVtYXAnO1xuICAgICAgdmFyIHByb3AgPSBhdHRyc1thdHRyXTtcbiAgICAgIHZhciBtYXAgPSBzY29wZS4kZXZhbChwcm9wKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KG1hcCBpbnN0YW5jZW9mIG9sTWFwKTtcbiAgICAgIHZhciBzdGF0ZUV4cHIgPSBhdHRycy5uZ2VvUmVzaXplbWFwU3RhdGU7XG4gICAgICBjb25zb2xlLmFzc2VydChzdGF0ZUV4cHIgIT09IHVuZGVmaW5lZCk7XG4gICAgICB2YXIgc3RhcnQ7XG4gICAgICB2YXIgYW5pbWF0aW9uRGVsYXlLZXk7XG5cbiAgICAgIHZhciBhbmltYXRpb25EZWxheSA9IGZ1bmN0aW9uIGFuaW1hdGlvbkRlbGF5KCkge1xuICAgICAgICBtYXAudXBkYXRlU2l6ZSgpO1xuICAgICAgICBtYXAucmVuZGVyU3luYygpO1xuXG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPCBkdXJhdGlvbikge1xuICAgICAgICAgIGFuaW1hdGlvbkRlbGF5S2V5ID0gJHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRGVsYXkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBlbGVtZW50Lm9uKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXAudXBkYXRlU2l6ZSgpO1xuICAgICAgICBtYXAucmVuZGVyU3luYygpO1xuICAgICAgfSk7XG4gICAgICBzY29wZS4kd2F0Y2goc3RhdGVFeHByLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgaWYgKG5ld1ZhbCAhPSBvbGRWYWwpIHtcbiAgICAgICAgICBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25EZWxheUtleSk7XG4gICAgICAgICAgYW5pbWF0aW9uRGVsYXlLZXkgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25EZWxheSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb1Jlc2l6ZW1hcCcsIG1hcFJlc2l6ZUNvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJyc7XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBidG4tYmxvY2tcIiBuZy1jbGFzcz1cIjo6e1xcJ2Ryb3B1cFxcJzogc2NhbGVzZWxlY3RvckN0cmwub3B0aW9ucy5kcm9wdXB9XCI+XFxuICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XFxuICAgIDxzcGFuIG5nLWJpbmQtaHRtbD1cInNjYWxlc2VsZWN0b3JDdHJsLmN1cnJlbnRTY2FsZSB8IG5nZW9TY2FsaWZ5IHwgbmdlb1RydXN0SHRtbFwiPjwvc3Bhbj5cXG4gIDwvYnV0dG9uPlxcbiAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBidG4tYmxvY2tcIiByb2xlPVwibWVudVwiPlxcbiAgICA8bGkgbmctcmVwZWF0PVwiem9vbUxldmVsIGluIDo6c2NhbGVzZWxlY3RvckN0cmwuZ2V0Wm9vbXMoKVwiPlxcbiAgICAgIDxhIGhyZWYgbmctY2xpY2s9XCJzY2FsZXNlbGVjdG9yQ3RybC5jaGFuZ2Vab29tKHpvb21MZXZlbClcIlxcbiAgICAgICAgIG5nLWJpbmQtaHRtbD1cInNjYWxlc2VsZWN0b3JDdHJsLmdldFNjYWxlKHpvb21MZXZlbCkgfCBuZ2VvU2NhbGlmeSB8IG5nZW9UcnVzdEh0bWxcIj5cXG4gICAgICA8L2E+XFxuICAgIDwvbGk+XFxuICA8L3VsPlxcbjwvZGl2Plxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBvbE1hcCBmcm9tICdvbC9NYXAuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2pzL3NyYy9kcm9wZG93bi5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9TY2FsZXNlbGVjdG9yJywgW10pO1xubW9kdWxlLnZhbHVlKCduZ2VvU2NhbGVzZWxlY3RvclRlbXBsYXRlVXJsJywgZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9IGF0dHJzLm5nZW9TY2FsZXNlbGVjdG9yVGVtcGxhdGV1cmw7XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9tYXAvc2NhbGVzZWxlY3Rvcic7XG59KTtcbm1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmdlby9tYXAvc2NhbGVzZWxlY3RvcicsIHJlcXVpcmUoJy4vc2NhbGVzZWxlY3Rvci5odG1sJykpO1xufV0pO1xuXG52YXIgbWFwU2NhbGVzZWxlY3RvckNvbXBvbmVudCA9IGZ1bmN0aW9uIG1hcFNjYWxlc2VsZWN0b3JDb21wb25lbnQobmdlb1NjYWxlc2VsZWN0b3JUZW1wbGF0ZVVybCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IHRydWUsXG4gICAgY29udHJvbGxlcjogJ05nZW9TY2FsZXNlbGVjdG9yQ29udHJvbGxlcicsXG4gICAgdGVtcGxhdGVVcmw6IG5nZW9TY2FsZXNlbGVjdG9yVGVtcGxhdGVVcmxcbiAgfTtcbn07XG5cbm1hcFNjYWxlc2VsZWN0b3JDb21wb25lbnQuJGluamVjdCA9IFtcIm5nZW9TY2FsZXNlbGVjdG9yVGVtcGxhdGVVcmxcIl07XG5tYXBTY2FsZXNlbGVjdG9yQ29tcG9uZW50LiRpbmplY3QgPSBbXCJuZ2VvU2NhbGVzZWxlY3RvclRlbXBsYXRlVXJsXCJdO1xubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb1NjYWxlc2VsZWN0b3InLCBtYXBTY2FsZXNlbGVjdG9yQ29tcG9uZW50KTtcblxudmFyIFNjYWxlc2VsZWN0b3JDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBTY2FsZXNlbGVjdG9yQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGF0dHJzXCIsIFwibmdlb1NjYWxlU2VsZWN0b3JPcHRpb25zXCJdO1xuXG4gIGZ1bmN0aW9uIFNjYWxlc2VsZWN0b3JDb250cm9sbGVyKCRzY29wZSwgJGF0dHJzLCBuZ2VvU2NhbGVTZWxlY3Rvck9wdGlvbnMpIHtcbiAgICB0aGlzLnNjYWxlcyA9IG5nZW9TY2FsZVNlbGVjdG9yT3B0aW9ucy52YWx1ZXM7XG4gICAgdmFyIG1hcEV4cHIgPSAkYXR0cnMubmdlb1NjYWxlc2VsZWN0b3JNYXA7XG4gICAgdGhpcy5tYXBfID0gJHNjb3BlLiRldmFsKG1hcEV4cHIpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXMubWFwXyBpbnN0YW5jZW9mIG9sTWFwKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBuZ2VvU2NhbGVTZWxlY3Rvck9wdGlvbnM7XG4gICAgdGhpcy4kc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMucmVzb2x1dGlvbkNoYW5nZUtleV8gPSBudWxsO1xuICAgIHRoaXMuY3VycmVudFNjYWxlID0gdW5kZWZpbmVkO1xuICAgIHZhciB2aWV3ID0gdGhpcy5tYXBfLmdldFZpZXcoKTtcbiAgICB2YXIgZHBpID0gOTY7XG4gICAgdmFyIGluY2hlc1Blck1ldGVyID0gMzkuMzc7XG4gICAgdmFyIHdhcm5pbmdSYXRpbyA9IDEuNTtcblxuICAgIGlmICh0aGlzLnNjYWxlcykge1xuICAgICAgZm9yICh2YXIgem9vbSA9IHZpZXcuZ2V0TWluWm9vbSgpOyB6b29tIDw9IHZpZXcuZ2V0TWF4Wm9vbSgpOyB6b29tKyspIHtcbiAgICAgICAgdmFyIGNhbGN1bGF0ZWRTY2FsZSA9IE1hdGgucm91bmQodmlldy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh6b29tKSAqIGluY2hlc1Blck1ldGVyICogZHBpKTtcbiAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZXNbem9vbV07XG5cbiAgICAgICAgaWYgKHNjYWxlID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIk1pc3Npbmcgc2NhbGUgZm9yIHpvb20gJ1wiICsgem9vbSArIFwiJywgc2V0IGl0IHRvIHJlYWwgY2FsY3VsYXRlZCBzY2FsZSAnXCIgKyBjYWxjdWxhdGVkU2NhbGUgKyBcIicuXCIpO1xuICAgICAgICAgIHRoaXMuc2NhbGVzW3pvb21dID0gY2FsY3VsYXRlZFNjYWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChNYXRoLmV4cChNYXRoLmFicyhNYXRoLmxvZyhjYWxjdWxhdGVkU2NhbGUgLyBzY2FsZSkpKSA+IHdhcm5pbmdSYXRpbykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQmlnIGRlZmVyYW5jZSBiZXR3ZWVuIGNvbmZpZ3VyZWQgc2NhbGUgJ1wiICsgc2NhbGUgKyBcIicgXCIgKyAoXCJmb3Igem9vbSAnXCIgKyB6b29tICsgXCInIGFuZCByZWFsIGNhbGN1bGF0ZWQgc2NhbGUgJ1wiICsgY2FsY3VsYXRlZFNjYWxlICsgXCInLlwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2NhbGVzID0gW107XG5cbiAgICAgIGZvciAodmFyIF96b29tID0gdmlldy5nZXRNaW5ab29tKCk7IF96b29tIDw9IHZpZXcuZ2V0TWF4Wm9vbSgpOyBfem9vbSsrKSB7XG4gICAgICAgIHRoaXMuc2NhbGVzW196b29tXSA9IE1hdGgucm91bmQodmlldy5nZXRSZXNvbHV0aW9uRm9yWm9vbShfem9vbSkgKiBpbmNoZXNQZXJNZXRlciAqIGRwaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGN1cnJlbnRab29tID0gdGhpcy5tYXBfLmdldFZpZXcoKS5nZXRab29tKCk7XG5cbiAgICBpZiAoY3VycmVudFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5jdXJyZW50U2NhbGUgPSB0aGlzLmdldFNjYWxlKGN1cnJlbnRab29tKTtcbiAgICB9XG5cbiAgICBsaXN0ZW4odGhpcy5tYXBfLCAnY2hhbmdlOnZpZXcnLCB0aGlzLmhhbmRsZVZpZXdDaGFuZ2VfLCB0aGlzKTtcbiAgICB0aGlzLnJlZ2lzdGVyUmVzb2x1dGlvbkNoYW5nZUxpc3RlbmVyXygpO1xuICAgICRzY29wZS5zY2FsZXNlbGVjdG9yQ3RybCA9IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU2NhbGVzZWxlY3RvckNvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRab29tcyA9IGZ1bmN0aW9uIGdldFpvb21zKCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnNjYWxlcykubWFwKE51bWJlcik7XG4gIH07XG5cbiAgX3Byb3RvLmdldFNjYWxlID0gZnVuY3Rpb24gZ2V0U2NhbGUoem9vbSkge1xuICAgIGlmICh6b29tID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZXNbem9vbV07XG5cbiAgICBpZiAoc2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHNjYWxlO1xuICAgIH1cblxuICAgIHZhciBmbG9vcmVkWm9vbSA9IE1hdGguZmxvb3Ioem9vbSk7XG4gICAgdmFyIGxvd2VyU2NhbGUgPSB0aGlzLnNjYWxlc1tmbG9vcmVkWm9vbV07XG4gICAgdmFyIHVwcGVyU2NhbGUgPSB0aGlzLnNjYWxlc1tmbG9vcmVkWm9vbSArIDFdO1xuICAgIHNjYWxlID0gbG93ZXJTY2FsZSAtIChsb3dlclNjYWxlIC0gdXBwZXJTY2FsZSkgKiAoem9vbSAtIGZsb29yZWRab29tKTtcbiAgICByZXR1cm4gaXNOYU4oc2NhbGUpID8gdW5kZWZpbmVkIDogTWF0aC5yb3VuZChzY2FsZSk7XG4gIH07XG5cbiAgX3Byb3RvLmNoYW5nZVpvb20gPSBmdW5jdGlvbiBjaGFuZ2Vab29tKHpvb20pIHtcbiAgICB0aGlzLm1hcF8uZ2V0VmlldygpLnNldFpvb20oem9vbSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVJlc29sdXRpb25DaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlUmVzb2x1dGlvbkNoYW5nZV8oZSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgdmlldyA9IHRoaXMubWFwXy5nZXRWaWV3KCk7XG4gICAgdmFyIGN1cnJlbnRTY2FsZSA9IHRoaXMuZ2V0U2NhbGUodmlldy5nZXRab29tKCkpO1xuXG4gICAgaWYgKGN1cnJlbnRTY2FsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLiRzY29wZV8uJGFwcGx5QXN5bmMoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5jdXJyZW50U2NhbGUgPSBjdXJyZW50U2NhbGU7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVZpZXdDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVmlld0NoYW5nZV8oZSkge1xuICAgIHRoaXMucmVnaXN0ZXJSZXNvbHV0aW9uQ2hhbmdlTGlzdGVuZXJfKCk7XG4gICAgdGhpcy5oYW5kbGVSZXNvbHV0aW9uQ2hhbmdlXyhudWxsKTtcbiAgfTtcblxuICBfcHJvdG8ucmVnaXN0ZXJSZXNvbHV0aW9uQ2hhbmdlTGlzdGVuZXJfID0gZnVuY3Rpb24gcmVnaXN0ZXJSZXNvbHV0aW9uQ2hhbmdlTGlzdGVuZXJfKCkge1xuICAgIGlmICh0aGlzLnJlc29sdXRpb25DaGFuZ2VLZXlfICE9PSBudWxsKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucmVzb2x1dGlvbkNoYW5nZUtleV8pO1xuICAgIH1cblxuICAgIHZhciB2aWV3ID0gdGhpcy5tYXBfLmdldFZpZXcoKTtcbiAgICB0aGlzLnJlc29sdXRpb25DaGFuZ2VLZXlfID0gbGlzdGVuKHZpZXcsICdjaGFuZ2U6cmVzb2x1dGlvbicsIHRoaXMuaGFuZGxlUmVzb2x1dGlvbkNoYW5nZV8sIHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBTY2FsZXNlbGVjdG9yQ29udHJvbGxlcjtcbn0oKTtcblxubW9kdWxlLmNvbnRyb2xsZXIoJ05nZW9TY2FsZXNlbGVjdG9yQ29udHJvbGxlcicsIFNjYWxlc2VsZWN0b3JDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJtZWFzdXJlQXJlYUNvbXBvbmVudC4kaW5qZWN0ID0gW1wiJGNvbXBpbGVcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIiRmaWx0ZXJcIiwgXCJuZ2VvTWVhc3VyZVByZWNpc2lvblwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9EcmF3Q29udHJvbGxlciBmcm9tICduZ2VvL2RyYXcvQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgbmdlb0dlb21ldHJ5VHlwZSBmcm9tICduZ2VvL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZUFyZWEgZnJvbSAnbmdlby9pbnRlcmFjdGlvbi9NZWFzdXJlQXJlYS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sU3R5bGVTdHlsZSBmcm9tICdvbC9zdHlsZS9TdHlsZS5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9NZWFzdXJlYXJlYScsIFtuZ2VvRHJhd0NvbnRyb2xsZXIubmFtZV0pO1xuXG5mdW5jdGlvbiBtZWFzdXJlQXJlYUNvbXBvbmVudCgkY29tcGlsZSwgZ2V0dGV4dENhdGFsb2csICRmaWx0ZXIsIG5nZW9NZWFzdXJlUHJlY2lzaW9uKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl5uZ2VvRHJhd2ZlYXR1cmUnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJhd0ZlYXR1cmVDdHJsKSB7XG4gICAgICBpZiAoIWRyYXdGZWF0dXJlQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ZlYXR1cmVDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBoZWxwTXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBzdGFydCBkcmF3aW5nIHBvbHlnb24nKTtcbiAgICAgIHZhciBjb250TXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBjb250aW51ZSBkcmF3aW5nPGJyPicgKyAnRG91YmxlLWNsaWNrIG9yIGNsaWNrIHN0YXJ0aW5nIHBvaW50IHRvIGZpbmlzaCcpO1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0eWxlOiBuZXcgb2xTdHlsZVN0eWxlKCksXG4gICAgICAgIHN0YXJ0TXNnOiAkY29tcGlsZShcIjxkaXYgdHJhbnNsYXRlPlwiICsgaGVscE1zZyArIFwiPC9kaXY+XCIpKCRzY29wZSlbMF0sXG4gICAgICAgIGNvbnRpbnVlTXNnOiAkY29tcGlsZShcIjxkaXYgdHJhbnNsYXRlPlwiICsgY29udE1zZyArIFwiPC9kaXY+XCIpKCRzY29wZSlbMF1cbiAgICAgIH07XG4gICAgICBvcHRpb25zLnByZWNpc2lvbiA9IG5nZW9NZWFzdXJlUHJlY2lzaW9uO1xuICAgICAgdmFyIG1lYXN1cmVBcmVhID0gbmV3IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmVBcmVhKCRmaWx0ZXIoJ25nZW9Vbml0UHJlZml4JyksIGdldHRleHRDYXRhbG9nLCBvcHRpb25zKTtcblxuICAgICAgaWYgKGRyYXdGZWF0dXJlQ3RybC51aWQpIHtcbiAgICAgICAgbWVhc3VyZUFyZWEuc2V0KCduZ2VvLWludGVyYWN0aW9uLWRyYXctdWlkJywgZHJhd0ZlYXR1cmVDdHJsLnVpZCArIFwiLWFyZWFcIik7XG4gICAgICB9XG5cbiAgICAgIGRyYXdGZWF0dXJlQ3RybC5yZWdpc3RlckludGVyYWN0aW9uKG1lYXN1cmVBcmVhKTtcbiAgICAgIGRyYXdGZWF0dXJlQ3RybC5tZWFzdXJlQXJlYSA9IG1lYXN1cmVBcmVhO1xuICAgICAgbGlzdGVuKG1lYXN1cmVBcmVhLCAnbWVhc3VyZWVuZCcsIGRyYXdGZWF0dXJlQ3RybC5oYW5kbGVEcmF3RW5kLmJpbmQoZHJhd0ZlYXR1cmVDdHJsLCBuZ2VvR2VvbWV0cnlUeXBlLlBPTFlHT04pLCBkcmF3RmVhdHVyZUN0cmwpO1xuICAgICAgbGlzdGVuKG1lYXN1cmVBcmVhLCAnY2hhbmdlOmFjdGl2ZScsIGRyYXdGZWF0dXJlQ3RybC5oYW5kbGVBY3RpdmVDaGFuZ2UsIGRyYXdGZWF0dXJlQ3RybCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZGlyZWN0aXZlKCduZ2VvTWVhc3VyZWFyZWEnLCBtZWFzdXJlQXJlYUNvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwibWVhc3VyZUF6aW11dENvbXBvbmVudC4kaW5qZWN0ID0gW1wiJGNvbXBpbGVcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIiRmaWx0ZXJcIiwgXCJuZ2VvTWVhc3VyZVByZWNpc2lvblwiLCBcIm5nZW9NZWFzdXJlRGVjaW1hbHNcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvRHJhd0NvbnRyb2xsZXIgZnJvbSAnbmdlby9kcmF3L0NvbnRyb2xsZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjRmlsdGVycyBmcm9tICduZ2VvL21pc2MvZmlsdGVycy5qcyc7XG5pbXBvcnQgbmdlb0dlb21ldHJ5VHlwZSBmcm9tICduZ2VvL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgbmdlb0ludGVyYWN0aW9uTWVhc3VyZUF6aW11dCwgeyBnZXRBemltdXQgfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmVBemltdXQuanMnO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBmcm9tQ2lyY2xlIH0gZnJvbSAnb2wvZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCBvbFN0eWxlU3R5bGUgZnJvbSAnb2wvc3R5bGUvU3R5bGUuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTWVhc3VyZWF6aW11dCcsIFtuZ2VvRHJhd0NvbnRyb2xsZXIubmFtZSwgbmdlb01pc2NGaWx0ZXJzLm5hbWVdKTtcblxuZnVuY3Rpb24gbWVhc3VyZUF6aW11dENvbXBvbmVudCgkY29tcGlsZSwgZ2V0dGV4dENhdGFsb2csICRmaWx0ZXIsIG5nZW9NZWFzdXJlUHJlY2lzaW9uLCBuZ2VvTWVhc3VyZURlY2ltYWxzKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl5uZ2VvRHJhd2ZlYXR1cmUnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJhd0ZlYXR1cmVDdHJsKSB7XG4gICAgICBpZiAoIWRyYXdGZWF0dXJlQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ZlYXR1cmVDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBoZWxwTXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBzdGFydCBkcmF3aW5nIGNpcmNsZScpO1xuICAgICAgdmFyIGNvbnRNc2cgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ0NsaWNrIHRvIGZpbmlzaCcpO1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0eWxlOiBuZXcgb2xTdHlsZVN0eWxlKCksXG4gICAgICAgIHN0YXJ0TXNnOiAkY29tcGlsZShcIjxkaXYgdHJhbnNsYXRlPlwiICsgaGVscE1zZyArIFwiPC9kaXY+XCIpKCRzY29wZSlbMF0sXG4gICAgICAgIGNvbnRpbnVlTXNnOiAkY29tcGlsZShcIjxkaXYgdHJhbnNsYXRlPlwiICsgY29udE1zZyArIFwiPC9kaXY+XCIpKCRzY29wZSlbMF1cbiAgICAgIH07XG4gICAgICBvcHRpb25zLnByZWNpc2lvbiA9IG5nZW9NZWFzdXJlUHJlY2lzaW9uO1xuICAgICAgb3B0aW9ucy5kZWNpbWFscyA9IG5nZW9NZWFzdXJlRGVjaW1hbHM7XG4gICAgICB2YXIgbWVhc3VyZUF6aW11dCA9IG5ldyBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlQXppbXV0KCRmaWx0ZXIoJ25nZW9Vbml0UHJlZml4JyksICRmaWx0ZXIoJ251bWJlcicpLCBvcHRpb25zKTtcblxuICAgICAgaWYgKGRyYXdGZWF0dXJlQ3RybC51aWQpIHtcbiAgICAgICAgbWVhc3VyZUF6aW11dC5zZXQoJ25nZW8taW50ZXJhY3Rpb24tZHJhdy11aWQnLCBkcmF3RmVhdHVyZUN0cmwudWlkICsgXCItYXppbXV0XCIpO1xuICAgICAgfVxuXG4gICAgICBkcmF3RmVhdHVyZUN0cmwucmVnaXN0ZXJJbnRlcmFjdGlvbihtZWFzdXJlQXppbXV0KTtcbiAgICAgIGRyYXdGZWF0dXJlQ3RybC5tZWFzdXJlQXppbXV0ID0gbWVhc3VyZUF6aW11dDtcbiAgICAgIGxpc3RlbihtZWFzdXJlQXppbXV0LCAnbWVhc3VyZWVuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgbXlFdmVudCA9IGV2ZW50O1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBteUV2ZW50LmRldGFpbC5mZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIHZhciBjaXJjbGUgPSBnZW9tZXRyeS5nZXRHZW9tZXRyaWVzKClbMV07XG4gICAgICAgIHZhciBwb2x5Z29uID0gZnJvbUNpcmNsZShjaXJjbGUsIE51bWJlci5wYXJzZUludChhdHRycy4kJGVsZW1lbnQuYXR0cignbmdlby1tZWFzdXJlYXppbXV0LW5icG9pbnRzJykgfHwgNjQpKTtcbiAgICAgICAgbXlFdmVudC5kZXRhaWwuZmVhdHVyZSA9IG5ldyBvbEZlYXR1cmUocG9seWdvbik7XG4gICAgICAgIHZhciBhemltdXQgPSBnZXRBemltdXQoZ2VvbWV0cnkuZ2V0R2VvbWV0cmllcygpWzBdKTtcbiAgICAgICAgbXlFdmVudC5kZXRhaWwuZmVhdHVyZS5zZXQoJ2F6aW11dCcsIGF6aW11dCk7XG4gICAgICAgIGRyYXdGZWF0dXJlQ3RybC5oYW5kbGVEcmF3RW5kKG5nZW9HZW9tZXRyeVR5cGUuQ0lSQ0xFLCBldmVudCk7XG4gICAgICB9LCBkcmF3RmVhdHVyZUN0cmwpO1xuICAgICAgbGlzdGVuKG1lYXN1cmVBemltdXQsICdjaGFuZ2U6YWN0aXZlJywgZHJhd0ZlYXR1cmVDdHJsLmhhbmRsZUFjdGl2ZUNoYW5nZSwgZHJhd0ZlYXR1cmVDdHJsKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9NZWFzdXJlYXppbXV0JywgbWVhc3VyZUF6aW11dENvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwibWVhc3VyZUxlbmd0aENvbXBvbmVudC4kaW5qZWN0ID0gW1wiJGNvbXBpbGVcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIiRmaWx0ZXJcIiwgXCIkaW5qZWN0b3JcIiwgXCJuZ2VvTWVhc3VyZVByZWNpc2lvblwiLCBcIm5nZW9TbmFwcGluZ1RvbGVyYW5jZVwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9EcmF3Q29udHJvbGxlciBmcm9tICduZ2VvL2RyYXcvQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgbmdlb01pc2NGaWx0ZXJzIGZyb20gJ25nZW8vbWlzYy9maWx0ZXJzLmpzJztcbmltcG9ydCBuZ2VvR2VvbWV0cnlUeXBlIGZyb20gJ25nZW8vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBuZ2VvSW50ZXJhY3Rpb25NZWFzdXJlTGVuZ3RoIGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZUxlbmd0aC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG9sU3R5bGVTdHlsZSBmcm9tICdvbC9zdHlsZS9TdHlsZS5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9NZWFzdXJlbGVuZ3RoJywgW25nZW9EcmF3Q29udHJvbGxlci5uYW1lLCBuZ2VvTWlzY0ZpbHRlcnMubmFtZV0pO1xuXG5mdW5jdGlvbiBtZWFzdXJlTGVuZ3RoQ29tcG9uZW50KCRjb21waWxlLCBnZXR0ZXh0Q2F0YWxvZywgJGZpbHRlciwgJGluamVjdG9yLCBuZ2VvTWVhc3VyZVByZWNpc2lvbiwgbmdlb1NuYXBwaW5nVG9sZXJhbmNlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXl5uZ2VvRHJhd2ZlYXR1cmUnLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoJHNjb3BlLCBlbGVtZW50LCBhdHRycywgZHJhd0ZlYXR1cmVDdHJsKSB7XG4gICAgICBpZiAoIWRyYXdGZWF0dXJlQ3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZHJhd0ZlYXR1cmVDdHJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBoZWxwTXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBzdGFydCBkcmF3aW5nIGxpbmUnKTtcbiAgICAgIHZhciBjb250TXNnID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdDbGljayB0byBjb250aW51ZSBkcmF3aW5nPGJyPicgKyAnRG91YmxlLWNsaWNrIG9yIGNsaWNrIGxhc3QgcG9pbnQgdG8gZmluaXNoJyk7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgc3R5bGU6IG5ldyBvbFN0eWxlU3R5bGUoKSxcbiAgICAgICAgc3RhcnRNc2c6ICRjb21waWxlKFwiPGRpdiB0cmFuc2xhdGU+XCIgKyBoZWxwTXNnICsgXCI8L2Rpdj5cIikoJHNjb3BlKVswXSxcbiAgICAgICAgY29udGludWVNc2c6ICRjb21waWxlKFwiPGRpdiB0cmFuc2xhdGU+XCIgKyBjb250TXNnICsgXCI8L2Rpdj5cIikoJHNjb3BlKVswXVxuICAgICAgfTtcbiAgICAgIG9wdGlvbnMucHJlY2lzaW9uID0gbmdlb01lYXN1cmVQcmVjaXNpb247XG4gICAgICBvcHRpb25zLnRvbGVyYW5jZSA9IG5nZW9TbmFwcGluZ1RvbGVyYW5jZTtcblxuICAgICAgaWYgKCRpbmplY3Rvci5oYXMoJ25nZW9TbmFwcGluZ1NvdXJjZScpKSB7XG4gICAgICAgIG9wdGlvbnMuc291cmNlID0gJGluamVjdG9yLmdldCgnbmdlb1NuYXBwaW5nU291cmNlJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBtZWFzdXJlTGVuZ3RoID0gbmV3IG5nZW9JbnRlcmFjdGlvbk1lYXN1cmVMZW5ndGgoJGZpbHRlcignbmdlb1VuaXRQcmVmaXgnKSwgZ2V0dGV4dENhdGFsb2csIG9wdGlvbnMpO1xuXG4gICAgICBpZiAoZHJhd0ZlYXR1cmVDdHJsLnVpZCkge1xuICAgICAgICBtZWFzdXJlTGVuZ3RoLnNldCgnbmdlby1pbnRlcmFjdGlvbi1kcmF3LXVpZCcsIGRyYXdGZWF0dXJlQ3RybC51aWQgKyBcIi1sZW5ndGhcIik7XG4gICAgICB9XG5cbiAgICAgIGRyYXdGZWF0dXJlQ3RybC5yZWdpc3RlckludGVyYWN0aW9uKG1lYXN1cmVMZW5ndGgpO1xuICAgICAgZHJhd0ZlYXR1cmVDdHJsLm1lYXN1cmVMZW5ndGggPSBtZWFzdXJlTGVuZ3RoO1xuICAgICAgbGlzdGVuKG1lYXN1cmVMZW5ndGgsICdtZWFzdXJlZW5kJywgZHJhd0ZlYXR1cmVDdHJsLmhhbmRsZURyYXdFbmQuYmluZChkcmF3RmVhdHVyZUN0cmwsIG5nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkcpLCBkcmF3RmVhdHVyZUN0cmwpO1xuICAgICAgbGlzdGVuKG1lYXN1cmVMZW5ndGgsICdjaGFuZ2U6YWN0aXZlJywgZHJhd0ZlYXR1cmVDdHJsLmhhbmRsZUFjdGl2ZUNoYW5nZSwgZHJhd0ZlYXR1cmVDdHJsKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9NZWFzdXJlbGVuZ3RoJywgbWVhc3VyZUxlbmd0aENvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01lYXN1cmVBcmVhIGZyb20gJ25nZW8vbWVhc3VyZS9hcmVhLmpzJztcbmltcG9ydCBuZ2VvTWVhc3VyZUF6aW11dCBmcm9tICduZ2VvL21lYXN1cmUvYXppbXV0LmpzJztcbmltcG9ydCBuZ2VvTWVhc3VyZUxlbmd0aCBmcm9tICduZ2VvL21lYXN1cmUvbGVuZ3RoLmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvTWVhc3VyZU1vZHVsZScsIFtuZ2VvTWVhc3VyZUFyZWEubmFtZSwgbmdlb01lYXN1cmVBemltdXQubmFtZSwgbmdlb01lYXN1cmVMZW5ndGgubmFtZV0pOyIsImV4cG9ydCB2YXIgTWVzc2FnZVR5cGUgPSB7XG4gIEVSUk9SOiAnZXJyb3InLFxuICBJTkZPUk1BVElPTjogJ2luZm9ybWF0aW9uJyxcbiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLFxuICBXQVJOSU5HOiAnd2FybmluZydcbn07XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX2RlZmF1bHQoKSB7fVxuXG4gIHZhciBfcHJvdG8gPSBfZGVmYXVsdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZSkge307XG5cbiAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KG9iamVjdCkge1xuICAgIHZhciBtc2dPYmplY3RzID0gdGhpcy5nZXRNZXNzYWdlT2JqZWN0cyhvYmplY3QpO1xuICAgIG1zZ09iamVjdHMuZm9yRWFjaCh0aGlzLnNob3dNZXNzYWdlLCB0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihtZXNzYWdlKSB7XG4gICAgdGhpcy5zaG93KHRoaXMuZ2V0TWVzc2FnZU9iamVjdHMobWVzc2FnZSwgTWVzc2FnZVR5cGUuRVJST1IpKTtcbiAgfTtcblxuICBfcHJvdG8uaW5mbyA9IGZ1bmN0aW9uIGluZm8obWVzc2FnZSkge1xuICAgIHRoaXMuc2hvdyh0aGlzLmdldE1lc3NhZ2VPYmplY3RzKG1lc3NhZ2UsIE1lc3NhZ2VUeXBlLklORk9STUFUSU9OKSk7XG4gIH07XG5cbiAgX3Byb3RvLnN1Y2Nlc3MgPSBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnNob3codGhpcy5nZXRNZXNzYWdlT2JqZWN0cyhtZXNzYWdlLCBNZXNzYWdlVHlwZS5TVUNDRVNTKSk7XG4gIH07XG5cbiAgX3Byb3RvLndhcm4gPSBmdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnNob3codGhpcy5nZXRNZXNzYWdlT2JqZWN0cyhtZXNzYWdlLCBNZXNzYWdlVHlwZS5XQVJOSU5HKSk7XG4gIH07XG5cbiAgX3Byb3RvLmdldE1lc3NhZ2VPYmplY3RzID0gZnVuY3Rpb24gZ2V0TWVzc2FnZU9iamVjdHMob2JqZWN0LCBvcHRfdHlwZSkge1xuICAgIHZhciBtc2dPYmplY3RzID0gW107XG4gICAgdmFyIGRlZmF1bHRUeXBlID0gTWVzc2FnZVR5cGUuSU5GT1JNQVRJT047XG5cbiAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1zZ09iamVjdHMucHVzaCh7XG4gICAgICAgIG1zZzogb2JqZWN0LFxuICAgICAgICB0eXBlOiBvcHRfdHlwZSAhPT0gdW5kZWZpbmVkID8gb3B0X3R5cGUgOiBkZWZhdWx0VHlwZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgIG9iamVjdC5mb3JFYWNoKGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgbXNnT2JqZWN0cy5wdXNoKHtcbiAgICAgICAgICAgIG1zZzogbXNnLFxuICAgICAgICAgICAgdHlwZTogb3B0X3R5cGUgIT09IHVuZGVmaW5lZCA/IG9wdF90eXBlIDogZGVmYXVsdFR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1zZyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBtc2cgdHlwZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRfdHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtc2cudHlwZSA9IG9wdF90eXBlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1zZ09iamVjdHMucHVzaChtc2cpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1zZ09iamVjdCA9IG9iamVjdDtcblxuICAgICAgaWYgKG9wdF90eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbXNnT2JqZWN0LnR5cGUgPSBvcHRfdHlwZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1zZ09iamVjdC50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbXNnT2JqZWN0LnR5cGUgPSBkZWZhdWx0VHlwZTtcbiAgICAgIH1cblxuICAgICAgbXNnT2JqZWN0cy5wdXNoKG1zZ09iamVjdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1zZ09iamVjdHM7XG4gIH07XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufSgpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICdib290c3RyYXAvanMvc3JjL2FsZXJ0LmpzJztcbmltcG9ydCBuZ2VvTWVzc2FnZU1lc3NhZ2UsIHsgTWVzc2FnZVR5cGUgfSBmcm9tICduZ2VvL21lc3NhZ2UvTWVzc2FnZS5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgYXMgb2xVdGlsR2V0VWlkIH0gZnJvbSAnb2wvdXRpbC5qcyc7XG52YXIgREVGQVVMVF9ERUxBWSA9IDcwMDA7XG5leHBvcnQgdmFyIE1lc3NhZ2VOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoX25nZW9NZXNzYWdlTWVzc2FnZSkge1xuICBNZXNzYWdlTm90aWZpY2F0aW9uLiRpbmplY3QgPSBbXCIkdGltZW91dFwiXTtcblxuICBfaW5oZXJpdHNMb29zZShNZXNzYWdlTm90aWZpY2F0aW9uLCBfbmdlb01lc3NhZ2VNZXNzYWdlKTtcblxuICBmdW5jdGlvbiBNZXNzYWdlTm90aWZpY2F0aW9uKCR0aW1lb3V0KSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfbmdlb01lc3NhZ2VNZXNzYWdlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy50aW1lb3V0XyA9ICR0aW1lb3V0O1xuICAgIHZhciBjb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJuZ2VvLW5vdGlmaWNhdGlvblwiPjwvZGl2PicpO1xuICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQoY29udGFpbmVyKTtcbiAgICBfdGhpcy5jb250YWluZXJfID0gY29udGFpbmVyO1xuICAgIF90aGlzLmNhY2hlXyA9IHt9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBNZXNzYWdlTm90aWZpY2F0aW9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8ubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KG9iamVjdCkge1xuICAgIHRoaXMuc2hvdyhvYmplY3QpO1xuICB9O1xuXG4gIF9wcm90by5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGZvciAodmFyIHVpZCBpbiB0aGlzLmNhY2hlXykge1xuICAgICAgdGhpcy5jbGVhck1lc3NhZ2VCeUNhY2hlSXRlbV8odGhpcy5jYWNoZV9bcGFyc2VJbnQodWlkLCAxMCldKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNob3dNZXNzYWdlID0gZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIHR5cGUgPT0gJ3N0cmluZycsICdUeXBlIHNob3VsZCBiZSBzZXQuJyk7XG4gICAgdmFyIGNsYXNzTmFtZXMgPSBbJ2FsZXJ0JywgJ2ZhZGUnLCAnc2hvdyddO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIE1lc3NhZ2VUeXBlLkVSUk9SOlxuICAgICAgICBjbGFzc05hbWVzLnB1c2goJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBNZXNzYWdlVHlwZS5JTkZPUk1BVElPTjpcbiAgICAgICAgY2xhc3NOYW1lcy5wdXNoKCdhbGVydC1pbmZvJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIE1lc3NhZ2VUeXBlLlNVQ0NFU1M6XG4gICAgICAgIGNsYXNzTmFtZXMucHVzaCgnYWxlcnQtc3VjY2VzcycpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBNZXNzYWdlVHlwZS5XQVJOSU5HOlxuICAgICAgICBjbGFzc05hbWVzLnB1c2goJ2FsZXJ0LXdhcm5pbmcnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbCA9IGFuZ3VsYXIuZWxlbWVudChcIjxkaXYgY2xhc3M9XFxcIlwiICsgY2xhc3NOYW1lcy5qb2luKCcgJykgKyBcIlxcXCI+PC9kaXY+XCIpO1xuICAgIHZhciBjb250YWluZXI7XG5cbiAgICBpZiAobWVzc2FnZS50YXJnZXQpIHtcbiAgICAgIGNvbnRhaW5lciA9IGFuZ3VsYXIuZWxlbWVudChtZXNzYWdlLnRhcmdldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyXztcbiAgICB9XG5cbiAgICBjb250YWluZXIuYXBwZW5kKGVsKTtcbiAgICBlbC5odG1sKG1lc3NhZ2UubXNnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgIHZhciBkZWxheSA9IG1lc3NhZ2UuZGVsYXkgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGVsYXkgOiBERUZBVUxUX0RFTEFZO1xuICAgIHZhciBpdGVtID0ge1xuICAgICAgZWw6IGVsXG4gICAgfTtcbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGVsKTtcbiAgICBpdGVtLnByb21pc2UgPSB0aGlzLnRpbWVvdXRfKGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsLmFsZXJ0KCdjbG9zZScpO1xuICAgICAgZGVsZXRlIF90aGlzMi5jYWNoZV9bdWlkXTtcbiAgICB9LCBkZWxheSk7XG4gICAgdGhpcy5jYWNoZV9bdWlkXSA9IGl0ZW07XG4gIH07XG5cbiAgX3Byb3RvLmNsZWFyTWVzc2FnZUJ5Q2FjaGVJdGVtXyA9IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUJ5Q2FjaGVJdGVtXyhpdGVtKSB7XG4gICAgdmFyIGVsID0gaXRlbS5lbDtcbiAgICB2YXIgcHJvbWlzZSA9IGl0ZW0ucHJvbWlzZTtcbiAgICB2YXIgdWlkID0gb2xVdGlsR2V0VWlkKGVsKTtcbiAgICBlbC5hbGVydCgnY2xvc2UnKTtcbiAgICB0aGlzLnRpbWVvdXRfLmNhbmNlbChwcm9taXNlKTtcbiAgICBkZWxldGUgdGhpcy5jYWNoZV9bdWlkXTtcbiAgfTtcblxuICByZXR1cm4gTWVzc2FnZU5vdGlmaWNhdGlvbjtcbn0obmdlb01lc3NhZ2VNZXNzYWdlKTtcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb05vdGlmaWNhdGlvbicsIFtdKTtcbm1vZHVsZS5zZXJ2aWNlKCduZ2VvTm90aWZpY2F0aW9uJywgTWVzc2FnZU5vdGlmaWNhdGlvbik7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiRmFjdG9yeS4kaW5qZWN0ID0gW1wiJGNvbXBpbGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHNjZVwiLCBcIiR0aW1lb3V0XCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01lc3NhZ2VQb3B1cENvbXBvbmVudCBmcm9tICduZ2VvL21lc3NhZ2UvcG9wdXBDb21wb25lbnQuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIE1lc3NhZ2VQb3B1cCgkY29tcGlsZSwgJHJvb3RTY29wZSwgJHNjZSwgJHRpbWVvdXQpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLnNjb3BlID0gJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuICB0aGlzLnNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF90aGlzLnNjb3BlLm9wZW47XG4gIH0sIGZ1bmN0aW9uIChvcGVuKSB7XG4gICAgaWYgKCFvcGVuICYmIF90aGlzLmF1dG9EZXN0cm95Xykge1xuICAgICAgX3RoaXMudGltZW91dF8oZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5kZXN0cm95KCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICB0aGlzLnNjZV8gPSAkc2NlO1xuICB0aGlzLnRpbWVvdXRfID0gJHRpbWVvdXQ7XG4gIHRoaXMuZWxlbWVudF8gPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgbmdlby1wb3B1cD48L2Rpdj4nKTtcbiAgdGhpcy5hdXRvRGVzdHJveV8gPSBmYWxzZTtcbiAgJGNvbXBpbGUodGhpcy5lbGVtZW50XykodGhpcy5zY29wZSk7XG4gIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQodGhpcy5lbGVtZW50Xyk7XG59XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuZ2V0T3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuc2NvcGUub3Blbjtcbn07XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuc2V0T3BlbiA9IGZ1bmN0aW9uIChvcGVuKSB7XG4gIHRoaXMuc2NvcGUub3BlbiA9IG9wZW47XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuc2NvcGUuJGRlc3Ryb3koKTtcbiAgdGhpcy5lbGVtZW50Xy5yZW1vdmUoKTtcbn07XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbiAodGl0bGUpIHtcbiAgdmFyIHRydXN0ZWRUaXRsZSA9IHRoaXMuc2NlXy50cnVzdEFzSHRtbCh0aXRsZSk7XG4gIHRoaXMuc2NvcGUudGl0bGUgPSB0cnVzdGVkVGl0bGU7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCwgb3B0X3RydXN0ZWQpIHtcbiAgdGhpcy5zY29wZS5jb250ZW50ID0gb3B0X3RydXN0ZWQgPyB0aGlzLnNjZV8udHJ1c3RBc0h0bWwoY29udGVudCkgOiBjb250ZW50O1xufTtcblxuTWVzc2FnZVBvcHVwLnByb3RvdHlwZS5zZXRVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gIHZhciBjb250ZW50ID0gdGhpcy5zY2VfLnRydXN0QXNIdG1sKFwiPGlmcmFtZSBzcmM9XFxcIlwiICsgdXJsICsgXCJcXFwiIHdpZHRoPVxcXCIxMDAlXFxcIiBoZWlnaHQ9XFxcIjEwMCVcXFwiPjwvaWZyYW1lPlwiKTtcbiAgdGhpcy5zZXRDb250ZW50KGNvbnRlbnQpO1xufTtcblxuTWVzc2FnZVBvcHVwLnByb3RvdHlwZS5zZXRXaWR0aCA9IGZ1bmN0aW9uICh3aWR0aCkge1xuICB0aGlzLmVsZW1lbnRfLndpZHRoKHdpZHRoKTtcbn07XG5cbk1lc3NhZ2VQb3B1cC5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICB0aGlzLmVsZW1lbnRfLmhlaWdodChoZWlnaHQpO1xufTtcblxuTWVzc2FnZVBvcHVwLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgdGhpcy5zZXRXaWR0aCh3aWR0aCk7XG4gIHRoaXMuc2V0SGVpZ2h0KGhlaWdodCk7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLnNldEF1dG9EZXN0cm95ID0gZnVuY3Rpb24gKGF1dG9EZXN0cm95KSB7XG4gIHRoaXMuYXV0b0Rlc3Ryb3lfID0gYXV0b0Rlc3Ryb3k7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKGNscykge1xuICB0aGlzLmVsZW1lbnRfLmFkZENsYXNzKGNscyk7XG59O1xuXG5NZXNzYWdlUG9wdXAucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy51cmwpIHtcbiAgICB0aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5jb250ZW50KSB7XG4gICAgdGhpcy5zZXRDb250ZW50KG9wdGlvbnMuY29udGVudCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5hc3NlcnQoZmFsc2UsICduZ2VvLm1lc3NhZ2UuUG9wdXAgb3B0aW9ucyByZXF1aXJlc3QgXCJ1cmxcIiBvciBcImNvbnRlbnRcIi4nKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmF1dG9EZXN0cm95ICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldEF1dG9EZXN0cm95KG9wdGlvbnMuYXV0b0Rlc3Ryb3kpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuY2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmFkZENsYXNzKG9wdGlvbnMuY2xzKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXRIZWlnaHQob3B0aW9ucy5oZWlnaHQpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMudGl0bGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0VGl0bGUob3B0aW9ucy50aXRsZSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXRXaWR0aChvcHRpb25zLndpZHRoKTtcbiAgfVxuXG4gIHRoaXMuc2V0T3Blbih0cnVlKTtcbn07XG5cbmZ1bmN0aW9uIEZhY3RvcnkoJGNvbXBpbGUsICRyb290U2NvcGUsICRzY2UsICR0aW1lb3V0KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBNZXNzYWdlUG9wdXAoJGNvbXBpbGUsICRyb290U2NvcGUsICRzY2UsICR0aW1lb3V0KTtcbiAgfTtcbn1cblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQ3JlYXRlUG9wdXAnLCBbbmdlb01lc3NhZ2VQb3B1cENvbXBvbmVudC5uYW1lXSk7XG5tb2R1bGUuZmFjdG9yeSgnbmdlb0NyZWF0ZVBvcHVwJywgRmFjdG9yeSk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgJ2pxdWVyeS11aS91aS93aWRnZXRzL2RyYWdnYWJsZS5qcyc7XG5pbXBvcnQgJ25nZW8vc2Fzcy9qcXVlcnktdWkuc2Nzcyc7XG5pbXBvcnQgJ2Jvb3RzdHJhcC9qcy9zcmMvbW9kYWwuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTW9kYWwnLCBbXSk7XG52YXIgbWVzc2FnZU1vZGFsQ29tcG9uZW50ID0ge1xuICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJtb2RhbCBmYWRlXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIHJvbGU9XFxcImRpYWxvZ1xcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm1vZGFsLWRpYWxvZ1xcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwibW9kYWwtY29udGVudFxcXCI+XFxuICAgICAgICA8bmctdHJhbnNjbHVkZT48L25nLXRyYW5zY2x1ZGU+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XCIsXG4gIHJlcXVpcmU6IHtcbiAgICAnbmdNb2RlbCc6ICduZ01vZGVsJ1xuICB9LFxuICB0cmFuc2NsdWRlOiB0cnVlLFxuICBjb250cm9sbGVyOiAnbmdlb01vZGFsQ29udHJvbGxlcicsXG4gIGJpbmRpbmdzOiB7XG4gICAgJ2RyYWdnYWJsZUhhbmRsZSc6ICc9P25nZW9kcmFnZ2FibGVIYW5kbGUnLFxuICAgICdyZXNpemFibGUnOiAnPG5nZW9Nb2RhbFJlc2l6YWJsZScsXG4gICAgJ2Nsb3NhYmxlJzogJzxuZ2VvTW9kYWxDbG9zYWJsZSdcbiAgfVxufTtcbm1vZHVsZS5jb21wb25lbnQoJ25nZW9Nb2RhbCcsIG1lc3NhZ2VNb2RhbENvbXBvbmVudCk7XG5cbnZhciBDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZWxlbWVudFwiXTtcblxuICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQpIHtcbiAgICB0aGlzLiRlbGVtZW50XyA9ICRlbGVtZW50O1xuICAgIHRoaXMuJHNjb3BlXyA9ICRzY29wZTtcbiAgICB0aGlzLm1vZGFsXyA9IG51bGw7XG4gICAgdGhpcy5kcmFnZ2FibGVIYW5kbGUgPSAnJztcbiAgICB0aGlzLmNsb3NhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5yZXNpemFibGUgPSBmYWxzZTtcbiAgICB0aGlzLm5nTW9kZWwgPSBudWxsO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IENvbnRyb2xsZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by4kb25Jbml0ID0gZnVuY3Rpb24gJG9uSW5pdCgpIHtcbiAgICB0aGlzLmNsb3NhYmxlID0gdGhpcy5jbG9zYWJsZSAhPT0gZmFsc2U7XG4gICAgdGhpcy5yZXNpemFibGUgPSAhIXRoaXMucmVzaXphYmxlO1xuICAgIHRoaXMuZHJhZ2dhYmxlSGFuZGxlID0gdGhpcy5kcmFnZ2FibGVIYW5kbGUgfHwgJy51aS1kcmFnZ2FibGUtaGFuZGxlJztcbiAgfTtcblxuICBfcHJvdG8uJHBvc3RMaW5rID0gZnVuY3Rpb24gJHBvc3RMaW5rKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLm1vZGFsXyA9IHRoaXMuJGVsZW1lbnRfLmNoaWxkcmVuKCk7XG5cbiAgICBpZiAoIXRoaXMuY2xvc2FibGUpIHtcbiAgICAgIHRoaXMubW9kYWxfLmF0dHIoJ2RhdGEta2V5Ym9hcmQnLCAnZmFsc2UnKTtcbiAgICAgIHRoaXMubW9kYWxfLmF0dHIoJ2RhdGEtYmFja2Ryb3AnLCAnc3RhdGljJyk7XG4gICAgfVxuXG4gICAgdmFyIGRpYWxvZyA9IHRoaXMubW9kYWxfLmZpbmQoJy5tb2RhbC1kaWFsb2cnKTtcbiAgICBkaWFsb2cuZHJhZ2dhYmxlKHtcbiAgICAgIGhhbmRsZTogdGhpcy5kcmFnZ2FibGVIYW5kbGVcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnJlc2l6YWJsZSkge1xuICAgICAgZGlhbG9nLnJlc2l6YWJsZSgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5uZ01vZGVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbW9kZWwnKTtcbiAgICB9XG5cbiAgICB0aGlzLm5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMubmdNb2RlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbW9kZWwnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFfdGhpcy5tb2RhbF8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1vZGFsJyk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLm1vZGFsXy5tb2RhbChfdGhpcy5uZ01vZGVsLiR2aWV3VmFsdWUgPyAnc2hvdycgOiAnaGlkZScpO1xuICAgIH07XG5cbiAgICB0aGlzLm1vZGFsXy5vbignc2hvd24uYnMubW9kYWwgaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICghX3RoaXMubmdNb2RlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbW9kZWwnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHR5cGUgPSBlLnR5cGU7XG4gICAgICBjb25zb2xlLmFzc2VydCh0eXBlID09ICdzaG93bicgfHwgdHlwZSA9PSAnaGlkZGVuJyk7XG5cbiAgICAgIF90aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZSh0eXBlID09ICdzaG93bicpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by4kb25EZXN0cm95ID0gZnVuY3Rpb24gJG9uRGVzdHJveSgpIHtcbiAgICBpZiAoIXRoaXMubW9kYWxfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbW9kYWwnKTtcbiAgICB9XG5cbiAgICB0aGlzLm1vZGFsXy5tb2RhbCgnaGlkZScpO1xuICAgIHZhciBkaWFsb2cgPSB0aGlzLm1vZGFsXy5maW5kKCcubW9kYWwtZGlhbG9nJyk7XG4gICAgZGlhbG9nLmRyYWdnYWJsZSgnZGVzdHJveScpO1xuXG4gICAgaWYgKHRoaXMucmVzaXphYmxlKSB7XG4gICAgICBkaWFsb2cucmVzaXphYmxlKCdkZXN0cm95Jyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDb250cm9sbGVyO1xufSgpO1xuXG5tb2R1bGUuY29udHJvbGxlcignbmdlb01vZGFsQ29udHJvbGxlcicsIENvbnRyb2xsZXIpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIm1lc3NhZ2VQb3BvcENvbXBvbmVudC4kaW5qZWN0ID0gW1wibmdlb1BvcHVwVGVtcGxhdGVVcmxcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCAnYW5ndWxhci1zYW5pdGl6ZSc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Qb3B1cCcsIFsnbmdTYW5pdGl6ZSddKTtcbm1vZHVsZS52YWx1ZSgnbmdlb1BvcHVwVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cnMpIHtcbiAgdmFyIHRlbXBsYXRlVXJsID0gYXR0cnNbJ25nZW9Qb3B1cFRlbXBsYXRldXJsJ107XG4gIHJldHVybiB0ZW1wbGF0ZVVybCAhPT0gdW5kZWZpbmVkID8gdGVtcGxhdGVVcmwgOiAnbmdlby9tZXNzYWdlL3BvcHVwY29tcG9uZW50Jztcbn0pO1xubW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZ2VvL21lc3NhZ2UvcG9wdXBjb21wb25lbnQnLCByZXF1aXJlKCcuL3BvcHVwY29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5cbmZ1bmN0aW9uIG1lc3NhZ2VQb3BvcENvbXBvbmVudChuZ2VvUG9wdXBUZW1wbGF0ZVVybCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgdGVtcGxhdGVVcmw6IG5nZW9Qb3B1cFRlbXBsYXRlVXJsLFxuICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICBlbGVtZW50LmFkZENsYXNzKCdwb3BvdmVyJyk7XG5cbiAgICAgIHNjb3BlLmNsb3NlID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9O1xuXG4gICAgICBzY29wZS4kd2F0Y2goJ29wZW4nLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgZWxlbWVudC5jc3MoJ2Rpc3BsYXknLCBuZXdWYWwgPyAnYmxvY2snIDogJ25vbmUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb1BvcHVwJywgbWVzc2FnZVBvcG9wQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJztcbndpdGggKG9iaikge1xuX19wICs9ICc8aDQgY2xhc3M9XCJwb3BvdmVyLXRpdGxlIG5nZW8tcG9wdXAtdGl0bGVcIj5cXG4gIDxzcGFuIG5nLWJpbmQtaHRtbD1cInRpdGxlXCI+PC9zcGFuPlxcbiAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIG5nLWNsaWNrPVwib3BlbiA9IGZhbHNlXCI+ICZ0aW1lczs8L2J1dHRvbj5cXG48L2g0PlxcbjxkaXYgY2xhc3M9XCJwb3BvdmVyLWJvZHlcIiBuZy1iaW5kLWh0bWw9XCJjb250ZW50XCI+PC9kaXY+XFxuJztcblxufVxucmV0dXJuIF9fcFxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICogYXMgb2xQcm9qIGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0ICogYXMgb2xFeHRlbnQgZnJvbSAnb2wvZXh0ZW50LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBBdXRvUHJvamVjdGlvblNlcnZpY2UoKSB7fVxuXG5BdXRvUHJvamVjdGlvblNlcnZpY2UucHJvdG90eXBlLnN0cmluZ1RvQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBjb29yZHMgPSBzdHIubWF0Y2goLyhbXFxkXFwuJ10rKVtcXHMsXSsoW1xcZFxcLiddKykvKTtcblxuICBpZiAoY29vcmRzKSB7XG4gICAgdmFyIHggPSBwYXJzZUZsb2F0KGNvb3Jkc1sxXS5yZXBsYWNlKC8nL2csICcnKSk7XG4gICAgdmFyIHkgPSBwYXJzZUZsb2F0KGNvb3Jkc1syXS5yZXBsYWNlKC8nL2csICcnKSk7XG5cbiAgICBpZiAoIWlzTmFOKHgpICYmICFpc05hTih5KSkge1xuICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbkF1dG9Qcm9qZWN0aW9uU2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbkxpc3QgPSBmdW5jdGlvbiAocHJvamVjdGlvbnNDb2Rlcykge1xuICB2YXIgY29kZSwgcHJvajtcbiAgdmFyIHByb2plY3Rpb25zID0gW107XG4gIHByb2plY3Rpb25zQ29kZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgIGNvZGUgPSBwcm9qZWN0aW9uLnRvVXBwZXJDYXNlKCk7XG5cbiAgICBpZiAoY29kZS5zdWJzdHIoMCwgNSkgIT0gJ0VQU0c6Jykge1xuICAgICAgY29kZSA9IFwiRVBTRzpcIiArIGNvZGU7XG4gICAgfVxuXG4gICAgcHJvaiA9IG9sUHJvai5nZXQoY29kZSk7XG5cbiAgICBpZiAocHJvaiAhPT0gbnVsbCkge1xuICAgICAgcHJvamVjdGlvbnMucHVzaChwcm9qKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIlRoZSBwcm9qZWN0aW9uIFwiICsgY29kZSArIFwiIGlzIG5vdCBkZWZpbmVkIGluIG9sLnByb2ouXCIpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwcm9qZWN0aW9ucztcbn07XG5cbkF1dG9Qcm9qZWN0aW9uU2VydmljZS5wcm90b3R5cGUudHJ5UHJvamVjdGlvbnMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIGV4dGVudCwgdmlld1Byb2plY3Rpb24sIG9wdF9wcm9qZWN0aW9ucykge1xuICB2YXIgcG9zaXRpb24gPSBudWxsO1xuXG4gIGlmIChvcHRfcHJvamVjdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdF9wcm9qZWN0aW9ucyA9IFt2aWV3UHJvamVjdGlvbl07XG4gIH1cblxuICBvcHRfcHJvamVjdGlvbnMuc29tZShmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgIHRyeSB7XG4gICAgICBwb3NpdGlvbiA9IG9sUHJvai50cmFuc2Zvcm0oY29vcmRpbmF0ZXMsIHByb2plY3Rpb24sIHZpZXdQcm9qZWN0aW9uKTtcblxuICAgICAgaWYgKG9sRXh0ZW50LmNvbnRhaW5zQ29vcmRpbmF0ZShleHRlbnQsIHBvc2l0aW9uKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgcG9zaXRpb24gPSBudWxsO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG4gIHJldHVybiBwb3NpdGlvbjtcbn07XG5cbkF1dG9Qcm9qZWN0aW9uU2VydmljZS5wcm90b3R5cGUudHJ5UHJvamVjdGlvbnNXaXRoSW52ZXJzaW9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBleHRlbnQsIHZpZXdQcm9qZWN0aW9uLCBvcHRfcHJvamVjdGlvbnMpIHtcbiAgdmFyIHBvc2l0aW9uID0gdGhpcy50cnlQcm9qZWN0aW9ucyhjb29yZGluYXRlcywgZXh0ZW50LCB2aWV3UHJvamVjdGlvbiwgb3B0X3Byb2plY3Rpb25zKTtcblxuICBpZiAocG9zaXRpb24gPT09IG51bGwpIHtcbiAgICBwb3NpdGlvbiA9IHRoaXMudHJ5UHJvamVjdGlvbnMoY29vcmRpbmF0ZXMucmV2ZXJzZSgpLCBleHRlbnQsIHZpZXdQcm9qZWN0aW9uLCBvcHRfcHJvamVjdGlvbnMpO1xuICB9XG5cbiAgcmV0dXJuIHBvc2l0aW9uO1xufTtcblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQXV0b1Byb2plY3Rpb24nLCBbXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb0F1dG9Qcm9qZWN0aW9uJywgQXV0b1Byb2plY3Rpb25TZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCB7IHVubGlzdGVuQnlLZXkgfSBmcm9tICdvbC9ldmVudHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIEV2ZW50SGVscGVyKCkge1xuICB0aGlzLmxpc3RlbmVyS2V5c18gPSB7fTtcbn1cblxuRXZlbnRIZWxwZXIucHJvdG90eXBlLmFkZExpc3RlbmVyS2V5ID0gZnVuY3Rpb24gKHVpZCwga2V5KSB7XG4gIGlmICghdGhpcy5saXN0ZW5lcktleXNfW3VpZF0pIHtcbiAgICB0aGlzLmluaXRMaXN0ZW5lcktleV8odWlkKTtcbiAgfVxuXG4gIHRoaXMubGlzdGVuZXJLZXlzX1t1aWRdLnB1c2goa2V5KTtcbn07XG5cbkV2ZW50SGVscGVyLnByb3RvdHlwZS5jbGVhckxpc3RlbmVyS2V5ID0gZnVuY3Rpb24gKHVpZCkge1xuICB0aGlzLmluaXRMaXN0ZW5lcktleV8odWlkKTtcbn07XG5cbkV2ZW50SGVscGVyLnByb3RvdHlwZS5pbml0TGlzdGVuZXJLZXlfID0gZnVuY3Rpb24gKHVpZCkge1xuICBpZiAoIXRoaXMubGlzdGVuZXJLZXlzX1t1aWRdKSB7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfW3VpZF0gPSBbXTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhpcy5saXN0ZW5lcktleXNfW3VpZF0ubGVuZ3RoKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c19bdWlkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfW3VpZF0ubGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0V2ZW50SGVscGVyJywgW10pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9FdmVudEhlbHBlcicsIEV2ZW50SGVscGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJGZWF0dXJlSGVscGVyLiRpbmplY3QgPSBbXCIkZmlsdGVyXCIsIFwibmdlb01lYXN1cmVQcmVjaXNpb25cIiwgXCJuZ2VvTWVhc3VyZURlY2ltYWxzXCIsIFwibmdlb01lYXN1cmVTcGhlcmljYWxcIiwgXCJuZ2VvUG9pbnRmaWx0ZXJcIiwgXCJuZ2VvRG93bmxvYWRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvTWlzY0ZpbHRlcnMgZnJvbSAnbmdlby9taXNjL2ZpbHRlcnMuanMnO1xuaW1wb3J0IG5nZW9Eb3dubG9hZFNlcnZpY2UgZnJvbSAnbmdlby9kb3dubG9hZC9zZXJ2aWNlLmpzJztcbmltcG9ydCBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMgZnJvbSAnbmdlby9mb3JtYXQvRmVhdHVyZVByb3BlcnRpZXMuanMnO1xuaW1wb3J0IG5nZW9HZW9tZXRyeVR5cGUgZnJvbSAnbmdlby9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHsgZ2V0Rm9ybWF0dGVkTGVuZ3RoLCBnZXRGb3JtYXR0ZWRBcmVhLCBnZXRGb3JtYXR0ZWRQb2ludCB9IGZyb20gJ25nZW8vaW50ZXJhY3Rpb24vTWVhc3VyZS5qcyc7XG5pbXBvcnQgeyBnZXRGb3JtYXR0ZWRBemltdXRSYWRpdXMgfSBmcm9tICduZ2VvL2ludGVyYWN0aW9uL01lYXN1cmVBemltdXQuanMnO1xuaW1wb3J0IHsgZnJvbVN0cmluZyBhcyBjb2xvckZyb21TdHJpbmcgfSBmcm9tICdvbC9jb2xvci5qcyc7XG5pbXBvcnQgKiBhcyBvbEV4dGVudCBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IG9sRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlLmpzJztcbmltcG9ydCBvbEdlb21MaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgb2xHZW9tTXVsdGlMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21NdWx0aVBvaW50IGZyb20gJ29sL2dlb20vTXVsdGlQb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IG9sR2VvbU11bHRpUG9seWdvbiBmcm9tICdvbC9nZW9tL011bHRpUG9seWdvbi5qcyc7XG5pbXBvcnQgb2xHZW9tU2ltcGxlR2VvbWV0cnkgZnJvbSAnb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHUFggZnJvbSAnb2wvZm9ybWF0L0dQWC5qcyc7XG5pbXBvcnQgb2xGb3JtYXRLTUwgZnJvbSAnb2wvZm9ybWF0L0tNTC5qcyc7XG5pbXBvcnQgb2xTdHlsZUNpcmNsZSBmcm9tICdvbC9zdHlsZS9DaXJjbGUuanMnO1xuaW1wb3J0IG9sU3R5bGVGaWxsIGZyb20gJ29sL3N0eWxlL0ZpbGwuanMnO1xuaW1wb3J0IG9sU3R5bGVSZWd1bGFyU2hhcGUgZnJvbSAnb2wvc3R5bGUvUmVndWxhclNoYXBlLmpzJztcbmltcG9ydCBvbFN0eWxlU3Ryb2tlIGZyb20gJ29sL3N0eWxlL1N0cm9rZS5qcyc7XG5pbXBvcnQgb2xTdHlsZVN0eWxlIGZyb20gJ29sL3N0eWxlL1N0eWxlLmpzJztcbmltcG9ydCBvbFN0eWxlVGV4dCBmcm9tICdvbC9zdHlsZS9UZXh0LmpzJztcbnZhciBWZXJ0ZXhTdHlsZVJlZ3VsYXJTaGFwZVJhZGl1cyA9IDY7XG5leHBvcnQgdmFyIEZlYXR1cmVGb3JtYXRUeXBlID0ge1xuICBHUFg6ICdHUFgnLFxuICBLTUw6ICdLTUwnXG59O1xuZXhwb3J0IHZhciBBcnJvd0RpcmVjdGlvbnMgPSB7XG4gIE5PTkU6ICdub25lJyxcbiAgRk9SV0FSRFM6ICdmb3J3YXJkcycsXG4gIEJBQ0tXQVJEUzogJ2JhY2t3YXJkcycsXG4gIEJPVEg6ICdib3RoJ1xufTtcbmV4cG9ydCB2YXIgQXJyb3dQb3NpdGlvbnMgPSB7XG4gIEZJUlNUOiAnZmlyc3QnLFxuICBMQVNUOiAnbGFzdCcsXG4gIEVWRVJZOiAnZXZlcnknXG59O1xuZXhwb3J0IGZ1bmN0aW9uIEZlYXR1cmVIZWxwZXIoJGZpbHRlciwgbmdlb01lYXN1cmVQcmVjaXNpb24sIG5nZW9NZWFzdXJlRGVjaW1hbHMsIG5nZW9NZWFzdXJlU3BoZXJpY2FsLCBuZ2VvUG9pbnRmaWx0ZXIsIG5nZW9Eb3dubG9hZCkge1xuICB0aGlzLiRmaWx0ZXJfID0gJGZpbHRlcjtcbiAgdGhpcy5kZWNpbWFsc18gPSBuZ2VvTWVhc3VyZURlY2ltYWxzO1xuICB0aGlzLnByZWNpc2lvbl8gPSBuZ2VvTWVhc3VyZVByZWNpc2lvbjtcbiAgdGhpcy5zcGhlcmljYWwgPSBuZ2VvTWVhc3VyZVNwaGVyaWNhbDtcbiAgdGhpcy5udW1iZXJGb3JtYXRfID0gJGZpbHRlcignbnVtYmVyJyk7XG4gIHRoaXMudW5pdFByZWZpeEZvcm1hdF8gPSAkZmlsdGVyKCduZ2VvVW5pdFByZWZpeCcpO1xuICB0aGlzLm5nZW9OdW1iZXJDb29yZGluYXRlc18gPSAkZmlsdGVyKCduZ2VvTnVtYmVyQ29vcmRpbmF0ZXMnKTtcbiAgdGhpcy5wb2ludEZpbHRlckZuXyA9IG51bGw7XG4gIHRoaXMucG9pbnRGaWx0ZXJBcmdzXyA9IFtdO1xuXG4gIGlmIChuZ2VvUG9pbnRmaWx0ZXIpIHtcbiAgICB2YXIgZmlsdGVyRWxlbWVudHMgPSBuZ2VvUG9pbnRmaWx0ZXIuc3BsaXQoJzonKTtcbiAgICB2YXIgZmlsdGVyTmFtZSA9IGZpbHRlckVsZW1lbnRzLnNoaWZ0KCk7XG4gICAgdmFyIGZpbHRlciA9IHRoaXMuJGZpbHRlcl8oZmlsdGVyTmFtZSk7XG4gICAgY29uc29sZS5hc3NlcnQodHlwZW9mIGZpbHRlciA9PSAnZnVuY3Rpb24nKTtcbiAgICB0aGlzLnBvaW50RmlsdGVyRm5fID0gZmlsdGVyO1xuICAgIHRoaXMucG9pbnRGaWx0ZXJBcmdzXyA9IGZpbHRlckVsZW1lbnRzO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucG9pbnRGaWx0ZXJGbl8gPSBudWxsO1xuICB9XG5cbiAgdGhpcy5wcm9qZWN0aW9uXyA9IG51bGw7XG4gIHRoaXMuZG93bmxvYWRfID0gbmdlb0Rvd25sb2FkO1xufVxuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5zZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgdGhpcy5wcm9qZWN0aW9uXyA9IHByb2plY3Rpb247XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBvcHRfc2VsZWN0KSB7XG4gIHZhciBzdHlsZXMgPSB0aGlzLmdldFN0eWxlKGZlYXR1cmUpO1xuXG4gIGlmIChvcHRfc2VsZWN0KSB7XG4gICAgaWYgKHRoaXMuc3VwcG9ydHNWZXJ0ZXhfKGZlYXR1cmUpKSB7XG4gICAgICBzdHlsZXMucHVzaCh0aGlzLmdldFZlcnRleFN0eWxlKCkpO1xuICAgIH1cblxuICAgIHN0eWxlcy51bnNoaWZ0KHRoaXMuZ2V0SGFsb1N0eWxlXyhmZWF0dXJlKSk7XG4gIH1cblxuICBmZWF0dXJlLnNldFN0eWxlKHN0eWxlcyk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRUeXBlKGZlYXR1cmUpO1xuICB2YXIgc3R5bGU7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgc3R5bGUgPSB0aGlzLmdldExpbmVTdHJpbmdTdHlsZV8oZmVhdHVyZSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgIHN0eWxlID0gdGhpcy5nZXRQb2ludFN0eWxlXyhmZWF0dXJlKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTjpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFOlxuICAgICAgc3R5bGUgPSB0aGlzLmdldFBvbHlnb25TdHlsZV8oZmVhdHVyZSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5URVhUOlxuICAgICAgc3R5bGUgPSB0aGlzLmdldFRleHRTdHlsZV8oZmVhdHVyZSk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmICghc3R5bGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc3R5bGUnKTtcbiAgfVxuXG4gIHZhciBzdHlsZXM7XG5cbiAgaWYgKHN0eWxlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBzdHlsZXMgPSBzdHlsZTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZXMgPSBbc3R5bGVdO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldExpbmVTdHJpbmdTdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgc3Ryb2tlV2lkdGggPSB0aGlzLmdldFN0cm9rZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgc2hvd0xhYmVsID0gdGhpcy5nZXRTaG93TGFiZWxQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHNob3dNZWFzdXJlID0gdGhpcy5nZXRTaG93TWVhc3VyZVByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgY29sb3IgPSB0aGlzLmdldFJHQkFDb2xvclByb3BlcnR5KGZlYXR1cmUpO1xuICB2YXIgYXJyb3dEaXJlY3Rpb24gPSB0aGlzLmdldEFycm93RGlyZWN0aW9uUHJvcGVydHkoZmVhdHVyZSk7XG4gIHZhciBhcnJvd1Bvc2l0aW9uID0gdGhpcy5nZXRBcnJvd1Bvc2l0aW9uUHJvcGVydHkoZmVhdHVyZSk7XG4gIHZhciBzdHlsZXMgPSBbbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICBjb2xvcjogY29sb3IsXG4gICAgICB3aWR0aDogc3Ryb2tlV2lkdGhcbiAgICB9KVxuICB9KV07XG5cbiAgaWYgKGFycm93RGlyZWN0aW9uICE9PSBBcnJvd0RpcmVjdGlvbnMuTk9ORSkge1xuICAgIHN0eWxlcy5wdXNoLmFwcGx5KHN0eWxlcywgdGhpcy5nZXRBcnJvd0xpbmVTdHlsZXNfKGZlYXR1cmUsIGFycm93RGlyZWN0aW9uLCBhcnJvd1Bvc2l0aW9uLCBjb2xvcikpO1xuICB9XG5cbiAgdmFyIHRleHRMYWJlbFZhbHVlcyA9IFtdO1xuXG4gIGlmIChzaG93TWVhc3VyZSkge1xuICAgIHRleHRMYWJlbFZhbHVlcy5wdXNoKHRoaXMuZ2V0TWVhc3VyZShmZWF0dXJlKSk7XG4gIH1cblxuICBpZiAoc2hvd0xhYmVsKSB7XG4gICAgdGV4dExhYmVsVmFsdWVzLnB1c2godGhpcy5nZXROYW1lUHJvcGVydHkoZmVhdHVyZSkpO1xuICB9XG5cbiAgaWYgKHNob3dMYWJlbCB8fCBzaG93TWVhc3VyZSkge1xuICAgIHZhciB0ZXh0TGFiZWxWYWx1ZSA9IHRleHRMYWJlbFZhbHVlcy5qb2luKCdcXG4nKTtcbiAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgIHByb3BlcnR5TmFtZTogJycsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICB0ZXh0OiB0ZXh0TGFiZWxWYWx1ZVxuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QXJyb3dMaW5lU3R5bGVzXyA9IGZ1bmN0aW9uIChmZWF0dXJlLCBhcnJvd0RpcmVjdGlvbiwgYXJyb3dQb3NpdGlvbiwgY29sb3IpIHtcbiAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICB2YXIgYXJyb3dTdHlsZXMgPSBbXTtcblxuICB2YXIgYWRkQXJyb3dUb1NlZ21lbnQgPSBmdW5jdGlvbiBhZGRBcnJvd1RvU2VnbWVudChzdGFydCwgZW5kKSB7XG4gICAgdmFyIGR4ID0gZW5kWzBdIC0gc3RhcnRbMF07XG4gICAgdmFyIGR5ID0gZW5kWzFdIC0gc3RhcnRbMV07XG4gICAgdmFyIHJvdGF0aW9uID0gTWF0aC5hdGFuMihkeSwgZHgpO1xuXG4gICAgdmFyIGdldEFycm93U3R5bGUgPSBmdW5jdGlvbiBnZXRBcnJvd1N0eWxlKGNvb3JkaW5hdGUsIGludmVydCkge1xuICAgICAgdmFyIHN5bVJvdGF0aW9uID0gTWF0aC5QSSAvIDIgKyByb3RhdGlvbjtcbiAgICAgIHJldHVybiBuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgZ2VvbWV0cnk6IG5ldyBvbEdlb21Qb2ludChjb29yZGluYXRlKSxcbiAgICAgICAgdGV4dDogbmV3IG9sU3R5bGVUZXh0KHtcbiAgICAgICAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgICAgICAgY29sb3I6IGNvbG9yXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZm9udDogJzkwMCAxNnB4IFwiU2FucyBzZXJpZlwiJyxcbiAgICAgICAgICBzdHJva2U6IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICAgICAgICAgIHdpZHRoOiAxLFxuICAgICAgICAgICAgY29sb3I6IGNvbG9yXG4gICAgICAgICAgfSksXG4gICAgICAgICAgb2Zmc2V0WTogLTYsXG4gICAgICAgICAgdGV4dDogXCJcXHUyMkMxXCIsXG4gICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRydWUsXG4gICAgICAgICAgcm90YXRpb246IGludmVydCA/IE1hdGguUEkgLSBzeW1Sb3RhdGlvbiA6IC1zeW1Sb3RhdGlvblxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmIChhcnJvd0RpcmVjdGlvbiA9PT0gQXJyb3dEaXJlY3Rpb25zLkZPUldBUkRTIHx8IGFycm93RGlyZWN0aW9uID09PSBBcnJvd0RpcmVjdGlvbnMuQk9USCkge1xuICAgICAgYXJyb3dTdHlsZXMucHVzaChnZXRBcnJvd1N0eWxlKGVuZCwgZmFsc2UpKTtcbiAgICB9XG5cbiAgICBpZiAoYXJyb3dEaXJlY3Rpb24gPT09IEFycm93RGlyZWN0aW9ucy5CQUNLV0FSRFMgfHwgYXJyb3dEaXJlY3Rpb24gPT09IEFycm93RGlyZWN0aW9ucy5CT1RIKSB7XG4gICAgICBhcnJvd1N0eWxlcy5wdXNoKGdldEFycm93U3R5bGUoc3RhcnQsIHRydWUpKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGZpcnN0T3JMYXN0U2VnbWVudCA9IG51bGw7XG4gIGdlb21ldHJ5LmZvckVhY2hTZWdtZW50KGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgaWYgKGFycm93UG9zaXRpb24gPT09IEFycm93UG9zaXRpb25zLkZJUlNUKSB7XG4gICAgICBpZiAoZmlyc3RPckxhc3RTZWdtZW50ID09PSBudWxsKSB7XG4gICAgICAgIGZpcnN0T3JMYXN0U2VnbWVudCA9IFtbXS5jb25jYXQoc3RhcnQpLCBbXS5jb25jYXQoZW5kKV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYXJyb3dQb3NpdGlvbiA9PT0gQXJyb3dQb3NpdGlvbnMuTEFTVCkge1xuICAgICAgZmlyc3RPckxhc3RTZWdtZW50ID0gW1tdLmNvbmNhdChzdGFydCksIFtdLmNvbmNhdChlbmQpXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhZGRBcnJvd1RvU2VnbWVudChzdGFydCwgZW5kKTtcbiAgfSk7XG5cbiAgaWYgKGZpcnN0T3JMYXN0U2VnbWVudCkge1xuICAgIGFkZEFycm93VG9TZWdtZW50KGZpcnN0T3JMYXN0U2VnbWVudFswXSwgZmlyc3RPckxhc3RTZWdtZW50WzFdKTtcbiAgfVxuXG4gIHJldHVybiBhcnJvd1N0eWxlcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFBvaW50U3R5bGVfID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHNpemUgPSB0aGlzLmdldFNpemVQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIGNvbG9yID0gdGhpcy5nZXRSR0JBQ29sb3JQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHNob3dMYWJlbCA9IHRoaXMuZ2V0U2hvd0xhYmVsUHJvcGVydHkoZmVhdHVyZSk7XG4gIHZhciBzaG93TWVhc3VyZSA9IHRoaXMuZ2V0U2hvd01lYXN1cmVQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHN0eWxlcyA9IFtuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICBpbWFnZTogbmV3IG9sU3R5bGVDaXJjbGUoe1xuICAgICAgcmFkaXVzOiBzaXplLFxuICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgY29sb3I6IGNvbG9yXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXTtcbiAgdmFyIHRleHRMYWJlbFZhbHVlcyA9IFtdO1xuXG4gIGlmIChzaG93TWVhc3VyZSkge1xuICAgIHRleHRMYWJlbFZhbHVlcy5wdXNoKHRoaXMuZ2V0TWVhc3VyZShmZWF0dXJlKSk7XG4gIH1cblxuICBpZiAoc2hvd0xhYmVsKSB7XG4gICAgdGV4dExhYmVsVmFsdWVzLnB1c2godGhpcy5nZXROYW1lUHJvcGVydHkoZmVhdHVyZSkpO1xuICB9XG5cbiAgaWYgKHNob3dMYWJlbCB8fCBzaG93TWVhc3VyZSkge1xuICAgIHZhciB0ZXh0TGFiZWxWYWx1ZSA9IHRleHRMYWJlbFZhbHVlcy5qb2luKCdcXG4nKTtcbiAgICB2YXIgZm9udF9zaXplID0gMTA7XG4gICAgdmFyIHBvaW50X3RvX3B4ID0gMS4zO1xuICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgdGV4dDogdGhpcy5jcmVhdGVUZXh0U3R5bGVfKHtcbiAgICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIHRleHQ6IHRleHRMYWJlbFZhbHVlLFxuICAgICAgICBzaXplOiBmb250X3NpemUsXG4gICAgICAgIG9mZnNldFk6IC0oc2l6ZSArIGZvbnRfc2l6ZSAvIDIgKiB0ZXh0TGFiZWxWYWx1ZXMubGVuZ3RoICogcG9pbnRfdG9fcHggKyA0KVxuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUub3B0TnVtYmVyID0gZnVuY3Rpb24gKGZlYXR1cmUsIGF0dHJpYikge1xuICB2YXIgdmFsdWUgPSBmZWF0dXJlLmdldChhdHRyaWIpO1xuXG4gIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuICt2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXROdW1iZXIgPSBmdW5jdGlvbiAoZmVhdHVyZSwgYXR0cmliKSB7XG4gIHZhciB2YWx1ZSA9IGZlYXR1cmUuZ2V0KGF0dHJpYik7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiArdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRQb2x5Z29uU3R5bGVfID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHN0cm9rZVdpZHRoID0gdGhpcy5nZXRTdHJva2VQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIG9wYWNpdHkgPSB0aGlzLmdldE9wYWNpdHlQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIGNvbG9yID0gdGhpcy5nZXRSR0JBQ29sb3JQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIHNob3dMYWJlbCA9IHRoaXMuZ2V0U2hvd0xhYmVsUHJvcGVydHkoZmVhdHVyZSk7XG4gIHZhciBzaG93TWVhc3VyZSA9IHRoaXMuZ2V0U2hvd01lYXN1cmVQcm9wZXJ0eShmZWF0dXJlKTtcbiAgdmFyIGZpbGxDb2xvciA9IGNvbG9yLnNsaWNlKCk7XG4gIGZpbGxDb2xvclszXSA9IG9wYWNpdHk7XG4gIHZhciBhemltdXQgPSB0aGlzLm9wdE51bWJlcihmZWF0dXJlLCBuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuQVpJTVVUKTtcbiAgdmFyIHN0eWxlcyA9IFtuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgY29sb3I6IGZpbGxDb2xvclxuICAgIH0pLFxuICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgd2lkdGg6IHN0cm9rZVdpZHRoXG4gICAgfSlcbiAgfSldO1xuXG4gIGlmIChzaG93TWVhc3VyZSB8fCBzaG93TGFiZWwpIHtcbiAgICBpZiAoc2hvd01lYXN1cmUgJiYgYXppbXV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5wcm9qZWN0aW9uXykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJvamVjdGlvbicpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGluZSA9IHRoaXMuZ2V0UmFkaXVzTGluZShmZWF0dXJlLCBhemltdXQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldEZvcm1hdHRlZExlbmd0aChsaW5lLCB0aGlzLnByb2plY3Rpb25fLCB0aGlzLnByZWNpc2lvbl8sIHRoaXMudW5pdFByZWZpeEZvcm1hdF8pO1xuICAgICAgc3R5bGVzLnB1c2gobmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIGdlb21ldHJ5OiBsaW5lLFxuICAgICAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgICAgIGNvbG9yOiBmaWxsQ29sb3JcbiAgICAgICAgfSksXG4gICAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgICAgICB3aWR0aDogc3Ryb2tlV2lkdGhcbiAgICAgICAgfSksXG4gICAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICB0ZXh0OiBsZW5ndGgsXG4gICAgICAgICAgYW5nbGU6IChhemltdXQgJSAxODAgKyAxODApICUgMTgwIC0gOTBcbiAgICAgICAgfSlcbiAgICAgIH0pKTtcbiAgICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICBnZW9tZXRyeTogbmV3IG9sR2VvbVBvaW50KGxpbmUuZ2V0TGFzdENvb3JkaW5hdGUoKSksXG4gICAgICAgIHRleHQ6IHRoaXMuY3JlYXRlVGV4dFN0eWxlXyh7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICB0ZXh0OiB0aGlzLm51bWJlckZvcm1hdF8oYXppbXV0LCB0aGlzLmRlY2ltYWxzXykgKyBcIlxceEIwXCIsXG4gICAgICAgICAgc2l6ZTogMTAsXG4gICAgICAgICAgb2Zmc2V0WDogTWF0aC5jb3MoKGF6aW11dCAtIDkwKSAqIE1hdGguUEkgLyAxODApICogMjAsXG4gICAgICAgICAgb2Zmc2V0WTogTWF0aC5zaW4oKGF6aW11dCAtIDkwKSAqIE1hdGguUEkgLyAxODApICogMjBcbiAgICAgICAgfSlcbiAgICAgIH0pKTtcblxuICAgICAgaWYgKHNob3dMYWJlbCkge1xuICAgICAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgICB0ZXh0OiB0aGlzLmNyZWF0ZVRleHRTdHlsZV8oe1xuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXROYW1lUHJvcGVydHkoZmVhdHVyZSksXG4gICAgICAgICAgICBvZmZzZXRZOiAtOCxcbiAgICAgICAgICAgIGV4Y2VlZExlbmd0aDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRleHRMYWJlbFZhbHVlcyA9IFtdO1xuXG4gICAgICBpZiAoc2hvd01lYXN1cmUpIHtcbiAgICAgICAgdGV4dExhYmVsVmFsdWVzLnB1c2godGhpcy5nZXRNZWFzdXJlKGZlYXR1cmUpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3dMYWJlbCkge1xuICAgICAgICB0ZXh0TGFiZWxWYWx1ZXMucHVzaCh0aGlzLmdldE5hbWVQcm9wZXJ0eShmZWF0dXJlKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzaG93TGFiZWwgfHwgc2hvd01lYXN1cmUpIHtcbiAgICAgICAgdmFyIHRleHRMYWJlbFZhbHVlID0gdGV4dExhYmVsVmFsdWVzLmpvaW4oJ1xcbicpO1xuICAgICAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgICB0ZXh0OiB0aGlzLmNyZWF0ZVRleHRTdHlsZV8oe1xuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnJyxcbiAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgdGV4dDogdGV4dExhYmVsVmFsdWUsXG4gICAgICAgICAgICBleGNlZWRMZW5ndGg6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFRleHRTdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICByZXR1cm4gbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgdGV4dDogdGhpcy5jcmVhdGVUZXh0U3R5bGVfKHtcbiAgICAgIHByb3BlcnR5TmFtZTogJycsXG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHJvdGF0ZVdpdGhWaWV3OiB0cnVlLFxuICAgICAgdGV4dDogdGhpcy5nZXROYW1lUHJvcGVydHkoZmVhdHVyZSksXG4gICAgICBzaXplOiB0aGlzLmdldFNpemVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgIGFuZ2xlOiB0aGlzLmdldEFuZ2xlUHJvcGVydHkoZmVhdHVyZSksXG4gICAgICBjb2xvcjogdGhpcy5nZXRSR0JBQ29sb3JQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgIHdpZHRoOiB0aGlzLmdldFN0cm9rZVByb3BlcnR5KGZlYXR1cmUpXG4gICAgfSlcbiAgfSk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5jcmVhdGVFZGl0aW5nU3R5bGVzID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIHdoaXRlID0gWzI1NSwgMjU1LCAyNTUsIDFdO1xuICB2YXIgYmx1ZSA9IFswLCAxNTMsIDI1NSwgMV07XG4gIHZhciB3aWR0aCA9IDM7XG4gIHZhciBzdHlsZXMgPSBbXTtcbiAgdmFyIGdlb20gPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgaWYgKCFnZW9tKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb20nKTtcbiAgfVxuXG4gIHZhciB0eXBlID0gZ2VvbS5nZXRUeXBlKCk7XG5cbiAgaWYgKHR5cGUgPT09ICdQb2ludCcpIHtcbiAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgIGltYWdlOiBuZXcgb2xTdHlsZUNpcmNsZSh7XG4gICAgICAgIHJhZGl1czogd2lkdGggKiAyLFxuICAgICAgICBmaWxsOiBuZXcgb2xTdHlsZUZpbGwoe1xuICAgICAgICAgIGNvbG9yOiBibHVlXG4gICAgICAgIH0pLFxuICAgICAgICBzdHJva2U6IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICAgICAgICBjb2xvcjogd2hpdGUsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoIC8gMlxuICAgICAgICB9KVxuICAgICAgfSksXG4gICAgICB6SW5kZXg6IEluZmluaXR5XG4gICAgfSkpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlID09PSAnTGluZVN0cmluZycpIHtcbiAgICAgIHN0eWxlcy5wdXNoKG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICBzdHJva2U6IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICAgICAgICBjb2xvcjogd2hpdGUsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoICsgMlxuICAgICAgICB9KVxuICAgICAgfSkpO1xuICAgICAgc3R5bGVzLnB1c2gobmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiBibHVlLFxuICAgICAgICAgIHdpZHRoOiB3aWR0aFxuICAgICAgICB9KVxuICAgICAgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXMucHVzaChuZXcgb2xTdHlsZVN0eWxlKHtcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2xTdHlsZVN0cm9rZSh7XG4gICAgICAgICAgY29sb3I6IGJsdWUsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoIC8gMlxuICAgICAgICB9KSxcbiAgICAgICAgZmlsbDogbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuNV1cbiAgICAgICAgfSlcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBzdHlsZXMucHVzaCh0aGlzLmdldFZlcnRleFN0eWxlKHRydWUpKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRWZXJ0ZXhJbmZvQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGZlYXR1cmUsIGNvb3JkaW5hdGUsIHJlc29sdXRpb24pIHtcbiAgdmFyIGluZm8gPSBudWxsO1xuXG4gIGlmICh0aGlzLnN1cHBvcnRzVmVydGV4UmVtb3ZhbF8oZmVhdHVyZSkpIHtcbiAgICB2YXIgYnVmZmVyID0gcmVzb2x1dGlvbiAqIFZlcnRleFN0eWxlUmVndWxhclNoYXBlUmFkaXVzO1xuICAgIHZhciBjb29yZGluYXRlcyA9IG51bGw7XG4gICAgdmFyIGNvb3JkaW5hdGVzcyA9IG51bGw7XG4gICAgdmFyIGNvb3JkaW5hdGVzc3MgPSBudWxsO1xuICAgIHZhciBtaW5OdW1Db29yZGluYXRlcyA9IC0xO1xuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICAgIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpIHtcbiAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIG1pbk51bUNvb3JkaW5hdGVzID0gMjtcbiAgICB9IGVsc2UgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9seWdvbikge1xuICAgICAgY29vcmRpbmF0ZXNzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIG1pbk51bUNvb3JkaW5hdGVzID0gNDtcbiAgICB9IGVsc2UgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlMaW5lU3RyaW5nKSB7XG4gICAgICBjb29yZGluYXRlc3MgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgbWluTnVtQ29vcmRpbmF0ZXMgPSAyO1xuICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aVBvbHlnb24pIHtcbiAgICAgIGNvb3JkaW5hdGVzc3MgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgbWluTnVtQ29vcmRpbmF0ZXMgPSA0O1xuICAgIH1cblxuICAgIGlmIChjb29yZGluYXRlcykge1xuICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRDb29yZGluYXRlSW5kZXhUaGF0SGl0c0F0Xyhjb29yZGluYXRlcywgY29vcmRpbmF0ZSwgbWluTnVtQ29vcmRpbmF0ZXMsIGJ1ZmZlcik7XG5cbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgaW5mbyA9IFtpbmRleF07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb29yZGluYXRlc3MpIHtcbiAgICAgIHZhciBpaSA9IGNvb3JkaW5hdGVzcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB2YXIgX2luZGV4ID0gdGhpcy5nZXRDb29yZGluYXRlSW5kZXhUaGF0SGl0c0F0Xyhjb29yZGluYXRlc3NbaV0sIGNvb3JkaW5hdGUsIG1pbk51bUNvb3JkaW5hdGVzLCBidWZmZXIpO1xuXG4gICAgICAgIGlmIChfaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaW5mbyA9IFtpLCBfaW5kZXhdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb29yZGluYXRlc3NzKSB7XG4gICAgICB2YXIgX2lpID0gY29vcmRpbmF0ZXNzcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfaWk7IF9pKyspIHtcbiAgICAgICAgdmFyIF9jb29yZGluYXRlc3MgPSBjb29yZGluYXRlc3NzW19pXTtcbiAgICAgICAgdmFyIGpqID0gX2Nvb3JkaW5hdGVzcy5sZW5ndGg7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgdmFyIF9pbmRleDIgPSB0aGlzLmdldENvb3JkaW5hdGVJbmRleFRoYXRIaXRzQXRfKF9jb29yZGluYXRlc3Nbal0sIGNvb3JkaW5hdGUsIG1pbk51bUNvb3JkaW5hdGVzLCBidWZmZXIpO1xuXG4gICAgICAgICAgaWYgKF9pbmRleDIgIT09IC0xKSB7XG4gICAgICAgICAgICBpbmZvID0gW19pLCBqLCBfaW5kZXgyXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW5mbztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldENvb3JkaW5hdGVJbmRleFRoYXRIaXRzQXRfID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBjb29yZGluYXRlLCBtaW4sIGJ1ZmZlcikge1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdmFyIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuXG4gIGlmIChpaSA+IG1pbikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIGhpdHMgPSBvbEV4dGVudC5jb250YWluc0Nvb3JkaW5hdGUob2xFeHRlbnQuYnVmZmVyKG9sRXh0ZW50LmNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZXNbaV0pLCBidWZmZXIpLCBjb29yZGluYXRlKTtcblxuICAgICAgaWYgKGhpdHMpIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW5kZXg7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRWZXJ0ZXhTdHlsZSA9IGZ1bmN0aW9uIChvcHRfaW5jR2VvbUZ1bmMpIHtcbiAgdmFyIGluY0dlb21GdW5jID0gb3B0X2luY0dlb21GdW5jICE9PSB1bmRlZmluZWQgPyBvcHRfaW5jR2VvbUZ1bmMgOiB0cnVlO1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBpbWFnZTogbmV3IG9sU3R5bGVSZWd1bGFyU2hhcGUoe1xuICAgICAgcmFkaXVzOiBWZXJ0ZXhTdHlsZVJlZ3VsYXJTaGFwZVJhZGl1cyxcbiAgICAgIHBvaW50czogNCxcbiAgICAgIGFuZ2xlOiBNYXRoLlBJIC8gNCxcbiAgICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMC41XVxuICAgICAgfSksXG4gICAgICBzdHJva2U6IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICAgICAgY29sb3I6IFswLCAwLCAwLCAxXVxuICAgICAgfSlcbiAgICB9KVxuICB9O1xuXG4gIGlmIChpbmNHZW9tRnVuYykge1xuICAgIG9wdGlvbnMuZ2VvbWV0cnkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgdmFyIGdlb20gPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgIGlmICghKGdlb20gaW5zdGFuY2VvZiBvbEdlb21TaW1wbGVHZW9tZXRyeSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvbS5nZXRUeXBlKCkgPT0gJ1BvaW50Jykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBpbm5lck11bHRpQ29vcmRpbmF0ZXM7XG4gICAgICB2YXIgbXVsdGlDb29yZGluYXRlcyA9IFtdO1xuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gW107XG5cbiAgICAgIGlmIChnZW9tIGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgICAgICBjb29yZGluYXRlcyA9IGdlb20uZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpTGluZVN0cmluZykge1xuICAgICAgICBtdWx0aUNvb3JkaW5hdGVzID0gZ2VvbS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tIGluc3RhbmNlb2Ygb2xHZW9tUG9seWdvbikge1xuICAgICAgICBjb29yZGluYXRlcyA9IGdlb20uZ2V0Q29vcmRpbmF0ZXMoKVswXTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpUG9seWdvbikge1xuICAgICAgICBpbm5lck11bHRpQ29vcmRpbmF0ZXMgPSBnZW9tLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbm5lck11bHRpQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5uZXJNdWx0aUNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICBtdWx0aUNvb3JkaW5hdGVzID0gbXVsdGlDb29yZGluYXRlcy5jb25jYXQoaW5uZXJNdWx0aUNvb3JkaW5hdGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBfaTIgPSAwLCBfaWkyID0gbXVsdGlDb29yZGluYXRlcy5sZW5ndGg7IF9pMiA8IF9paTI7IF9pMisrKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXMuY29uY2F0KG11bHRpQ29vcmRpbmF0ZXNbX2kyXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBvbEdlb21NdWx0aVBvaW50KGNvb3JkaW5hdGVzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnZW9tO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbmV3IG9sU3R5bGVTdHlsZShvcHRpb25zKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLnJlbW92ZVZlcnRleCA9IGZ1bmN0aW9uIChmZWF0dXJlLCB2ZXJ0ZXhJbmZvKSB7XG4gIHZhciBkZWxldGVkID0gZmFsc2U7XG4gIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICBpZiAoIShnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVNpbXBsZUdlb21ldHJ5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgZ2VvbWV0cnkgdHlwZScpO1xuICB9XG5cbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTGluZVN0cmluZykge1xuICAgIHZhciBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIGluZGV4ID0gdmVydGV4SW5mb1swXTtcblxuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAyKSB7XG4gICAgICBjb29yZGluYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2x5Z29uKSB7XG4gICAgdmFyIF9jb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG5cbiAgICB2YXIgaW5kZXhPbmUgPSB2ZXJ0ZXhJbmZvWzBdO1xuICAgIHZhciBpbmRleFR3byA9IHZlcnRleEluZm9bMV07XG4gICAgdmFyIGNvbXBvbmVudCA9IF9jb29yZGluYXRlc1tpbmRleE9uZV07XG5cbiAgICBpZiAoY29tcG9uZW50Lmxlbmd0aCA+IDQpIHtcbiAgICAgIGNvbXBvbmVudC5zcGxpY2UoaW5kZXhUd28sIDEpO1xuICAgICAgZGVsZXRlZCA9IHRydWU7XG5cbiAgICAgIGlmIChpbmRleFR3byA9PT0gMCkge1xuICAgICAgICBjb21wb25lbnQucG9wKCk7XG4gICAgICAgIGNvbXBvbmVudC5wdXNoKGNvbXBvbmVudFswXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKF9jb29yZGluYXRlcyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlMaW5lU3RyaW5nKSB7XG4gICAgdmFyIF9jb29yZGluYXRlczIgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuXG4gICAgdmFyIF9pbmRleE9uZSA9IHZlcnRleEluZm9bMF07XG4gICAgdmFyIF9pbmRleFR3byA9IHZlcnRleEluZm9bMV07XG4gICAgdmFyIF9jb21wb25lbnQgPSBfY29vcmRpbmF0ZXMyW19pbmRleE9uZV07XG5cbiAgICBpZiAoX2NvbXBvbmVudC5sZW5ndGggPiAyKSB7XG4gICAgICBfY29tcG9uZW50LnNwbGljZShfaW5kZXhUd28sIDEpO1xuXG4gICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoX2Nvb3JkaW5hdGVzMik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tTXVsdGlQb2x5Z29uKSB7XG4gICAgdmFyIF9jb29yZGluYXRlczMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuXG4gICAgdmFyIF9pbmRleE9uZTIgPSB2ZXJ0ZXhJbmZvWzBdO1xuICAgIHZhciBfaW5kZXhUd28yID0gdmVydGV4SW5mb1sxXTtcbiAgICB2YXIgaW5kZXhUaHJlZSA9IHZlcnRleEluZm9bMl07XG4gICAgdmFyIF9jb21wb25lbnQyID0gX2Nvb3JkaW5hdGVzM1tfaW5kZXhPbmUyXVtfaW5kZXhUd28yXTtcblxuICAgIGlmIChfY29tcG9uZW50Mi5sZW5ndGggPiA0KSB7XG4gICAgICBfY29tcG9uZW50Mi5zcGxpY2UoaW5kZXhUaHJlZSwgMSk7XG5cbiAgICAgIGRlbGV0ZWQgPSB0cnVlO1xuXG4gICAgICBpZiAoaW5kZXhUaHJlZSA9PT0gMCkge1xuICAgICAgICBfY29tcG9uZW50Mi5wb3AoKTtcblxuICAgICAgICBfY29tcG9uZW50Mi5wdXNoKF9jb21wb25lbnQyWzBdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoX2Nvb3JkaW5hdGVzMyk7XG4gICAgfVxuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5zdXBwb3J0c1ZlcnRleF8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgc3VwcG9ydGVkID0gW25nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkcsIG5nZW9HZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkcsIG5nZW9HZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTiwgbmdlb0dlb21ldHJ5VHlwZS5QT0xZR09OLCBuZ2VvR2VvbWV0cnlUeXBlLlJFQ1RBTkdMRV07XG4gIHZhciB0eXBlID0gdGhpcy5nZXRUeXBlKGZlYXR1cmUpO1xuICByZXR1cm4gc3VwcG9ydGVkLmluY2x1ZGVzKHR5cGUpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuc3VwcG9ydHNWZXJ0ZXhSZW1vdmFsXyA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBzdXBwb3J0ZWQgPSBbbmdlb0dlb21ldHJ5VHlwZS5MSU5FX1NUUklORywgbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORywgbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OLCBuZ2VvR2VvbWV0cnlUeXBlLlBPTFlHT05dO1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0VHlwZShmZWF0dXJlKTtcbiAgcmV0dXJuIHN1cHBvcnRlZC5pbmNsdWRlcyh0eXBlKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldEhhbG9TdHlsZV8gPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0VHlwZShmZWF0dXJlKTtcbiAgdmFyIHN0eWxlO1xuICB2YXIgaGFsb1NpemUgPSAzO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2Ugbmdlb0dlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplUHJvcGVydHkoZmVhdHVyZSk7XG4gICAgICBzdHlsZSA9IG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICBpbWFnZTogbmV3IG9sU3R5bGVDaXJjbGUoe1xuICAgICAgICAgIHJhZGl1czogc2l6ZSArIGhhbG9TaXplLFxuICAgICAgICAgIGZpbGw6IG5ldyBvbFN0eWxlRmlsbCh7XG4gICAgICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDFdXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuUE9MWUdPTjpcbiAgICBjYXNlIG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFOlxuICAgICAgdmFyIHN0cm9rZVdpZHRoID0gdGhpcy5nZXRTdHJva2VQcm9wZXJ0eShmZWF0dXJlKTtcbiAgICAgIHN0eWxlID0gbmV3IG9sU3R5bGVTdHlsZSh7XG4gICAgICAgIHN0cm9rZTogbmV3IG9sU3R5bGVTdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMV0sXG4gICAgICAgICAgd2lkdGg6IHN0cm9rZVdpZHRoICsgaGFsb1NpemUgKiAyXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBuZ2VvR2VvbWV0cnlUeXBlLlRFWFQ6XG4gICAgICBzdHlsZSA9IG5ldyBvbFN0eWxlU3R5bGUoe1xuICAgICAgICB0ZXh0OiB0aGlzLmNyZWF0ZVRleHRTdHlsZV8oe1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogJycsXG4gICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRydWUsXG4gICAgICAgICAgdGV4dDogdGhpcy5nZXROYW1lUHJvcGVydHkoZmVhdHVyZSksXG4gICAgICAgICAgc2l6ZTogdGhpcy5nZXRTaXplUHJvcGVydHkoZmVhdHVyZSksXG4gICAgICAgICAgYW5nbGU6IHRoaXMuZ2V0QW5nbGVQcm9wZXJ0eShmZWF0dXJlKSxcbiAgICAgICAgICB3aWR0aDogaGFsb1NpemUgKiAzXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgaWYgKCFzdHlsZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzdHlsZScpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlcmVkRmVhdHVyZVZhbHVlcyhmZWF0dXJlKSB7XG4gIHZhciBwcm9wZXJ0aWVzID0gZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCk7XG4gIGRlbGV0ZSBwcm9wZXJ0aWVzLmJvdW5kZWRCeTtcbiAgZGVsZXRlIHByb3BlcnRpZXNbZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKV07XG4gIGRlbGV0ZSBwcm9wZXJ0aWVzLm5nZW9fZmVhdHVyZV90eXBlXztcbiAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldEFuZ2xlUHJvcGVydHkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgYW5nbGUgPSArZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLkFOR0xFKTtcbiAgY29uc29sZS5hc3NlcnQodHlwZW9mIGFuZ2xlID09ICdudW1iZXInKTtcbiAgcmV0dXJuIGFuZ2xlO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0Q29sb3JQcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBjb2xvciA9IGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5DT0xPUik7XG4gIHJldHVybiBjb2xvcjtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFJHQkFDb2xvclByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIGNvbG9yID0gdGhpcy5nZXRDb2xvclByb3BlcnR5KGZlYXR1cmUpO1xuXG4gIGlmICh0eXBlb2YgY29sb3IgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBjb2xvckZyb21TdHJpbmcoY29sb3IpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0TmFtZVByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIG5hbWUgPSBmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuTkFNRSk7XG4gIGNvbnNvbGUuYXNzZXJ0KHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKTtcbiAgcmV0dXJuIG5hbWU7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRPcGFjaXR5UHJvcGVydHkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICByZXR1cm4gdGhpcy5nZXROdW1iZXIoZmVhdHVyZSwgbmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLk9QQUNJVFkpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0U2hvd01lYXN1cmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBzaG93TWVhc3VyZSA9IGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TSE9XX01FQVNVUkUpO1xuXG4gIGlmIChzaG93TWVhc3VyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc2hvd01lYXN1cmUgPSBmYWxzZTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2hvd01lYXN1cmUgPT09ICdzdHJpbmcnKSB7XG4gICAgc2hvd01lYXN1cmUgPSBzaG93TWVhc3VyZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHNob3dNZWFzdXJlO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0U2hvd0xhYmVsUHJvcGVydHkgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgc2hvd0xhYmVsID0gZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLlNIT1dfTEFCRUwpO1xuXG4gIGlmIChzaG93TGFiZWwgPT09IHVuZGVmaW5lZCkge1xuICAgIHNob3dMYWJlbCA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzaG93TGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgc2hvd0xhYmVsID0gc2hvd0xhYmVsID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gIH1cblxuICByZXR1cm4gc2hvd0xhYmVsO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0U2l6ZVByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TSVpFKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFN0cm9rZVByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5TVFJPS0UpO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QXJyb3dEaXJlY3Rpb25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIHZhciBhcnJvd0RpcmVjdGlvbiA9IGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5BUlJPV19ESVJFQ1RJT04pO1xuXG4gIGlmIChPYmplY3QudmFsdWVzKEFycm93RGlyZWN0aW9ucykuaW5jbHVkZXMoYXJyb3dEaXJlY3Rpb24pKSB7XG4gICAgcmV0dXJuIGFycm93RGlyZWN0aW9uO1xuICB9XG5cbiAgcmV0dXJuIEFycm93RGlyZWN0aW9ucy5OT05FO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZ2V0QXJyb3dQb3NpdGlvblByb3BlcnR5ID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIGFycm93UG9zaXRpb24gPSBmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuQVJST1dfUE9TSVRJT04pO1xuXG4gIGlmIChPYmplY3QudmFsdWVzKEFycm93UG9zaXRpb25zKS5pbmNsdWRlcyhhcnJvd1Bvc2l0aW9uKSkge1xuICAgIHJldHVybiBhcnJvd1Bvc2l0aW9uO1xuICB9XG5cbiAgcmV0dXJuIEFycm93UG9zaXRpb25zLkZJUlNUO1xufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZXhwb3J0ID0gZnVuY3Rpb24gKGZlYXR1cmVzLCBmb3JtYXRUeXBlKSB7XG4gIHN3aXRjaCAoZm9ybWF0VHlwZSkge1xuICAgIGNhc2UgRmVhdHVyZUZvcm1hdFR5cGUuR1BYOlxuICAgICAgdGhpcy5leHBvcnRHUFgoZmVhdHVyZXMpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIEZlYXR1cmVGb3JtYXRUeXBlLktNTDpcbiAgICAgIHRoaXMuZXhwb3J0S01MKGZlYXR1cmVzKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5leHBvcnRHUFggPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgdmFyIGZvcm1hdCA9IG5ldyBvbEZvcm1hdEdQWCgpO1xuICB2YXIgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vZ3B4K3htbCc7XG4gIHZhciBmaWxlTmFtZSA9ICdleHBvcnQuZ3B4JztcbiAgdGhpcy5leHBvcnRfKGZlYXR1cmVzLCBmb3JtYXQsIGZpbGVOYW1lLCBtaW1lVHlwZSk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5leHBvcnRLTUwgPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgdmFyIGZvcm1hdCA9IG5ldyBvbEZvcm1hdEtNTCgpO1xuICB2YXIgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1lYXJ0aC5rbWwreG1sJztcbiAgdmFyIGZpbGVOYW1lID0gJ2V4cG9ydC5rbWwnO1xuICB0aGlzLmV4cG9ydF8oZmVhdHVyZXMsIGZvcm1hdCwgZmlsZU5hbWUsIG1pbWVUeXBlKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmV4cG9ydF8gPSBmdW5jdGlvbiAoZmVhdHVyZXMsIGZvcm1hdCwgZmlsZU5hbWUsIG9wdF9taW1lVHlwZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBtaW1lVHlwZSA9IG9wdF9taW1lVHlwZSAhPT0gdW5kZWZpbmVkID8gb3B0X21pbWVUeXBlIDogJ3RleHQvcGxhaW4nO1xuICB2YXIgY2xvbmVzID0gW107XG4gIHZhciBjbG9uZTtcbiAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgIGNsb25lID0gbmV3IG9sRmVhdHVyZShmZWF0dXJlLmdldFByb3BlcnRpZXMoKSk7XG5cbiAgICBfdGhpcy5zZXRTdHlsZShjbG9uZSwgZmFsc2UpO1xuXG4gICAgY2xvbmVzLnB1c2goY2xvbmUpO1xuICB9KTtcbiAgdmFyIHdyaXRlT3B0aW9ucyA9IHRoaXMucHJvamVjdGlvbl8gPyB7XG4gICAgZGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnLFxuICAgIGZlYXR1cmVQcm9qZWN0aW9uOiB0aGlzLnByb2plY3Rpb25fXG4gIH0gOiB7fTtcbiAgdmFyIGRhdGEgPSBmb3JtYXQud3JpdGVGZWF0dXJlcyhjbG9uZXMsIHdyaXRlT3B0aW9ucyk7XG4gIHRoaXMuZG93bmxvYWRfKGRhdGEsIGZpbGVOYW1lLCBtaW1lVHlwZSArIFwiO2NoYXJzZXQ9dXRmLThcIik7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5jcmVhdGVUZXh0U3R5bGVfID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgdmFyIHRleHRfb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgaWYgKG9wdGlvbnMuYW5nbGUpIHtcbiAgICB2YXIgYW5nbGUgPSBvcHRpb25zLmFuZ2xlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmFuZ2xlIDogMDtcbiAgICB2YXIgcm90YXRpb24gPSBhbmdsZSAqIE1hdGguUEkgLyAxODA7XG4gICAgdGV4dF9vcHRpb25zLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgZGVsZXRlIG9wdGlvbnMuYW5nbGU7XG4gIH1cblxuICB0ZXh0X29wdGlvbnMuZm9udCA9IFsnbm9ybWFsJywgKG9wdGlvbnMuc2l6ZSB8fCAxMCkgKyBcInB0XCIsICdBcmlhbCddLmpvaW4oJyAnKTtcblxuICBpZiAob3B0aW9ucy5jb2xvcikge1xuICAgIHRleHRfb3B0aW9ucy5maWxsID0gbmV3IG9sU3R5bGVGaWxsKHtcbiAgICAgIGNvbG9yOiBvcHRpb25zLmNvbG9yIHx8IFswLCAwLCAwLCAxXVxuICAgIH0pO1xuICAgIGRlbGV0ZSBvcHRpb25zLmNvbG9yO1xuICB9XG5cbiAgdGV4dF9vcHRpb25zLnN0cm9rZSA9IG5ldyBvbFN0eWxlU3Ryb2tlKHtcbiAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDFdLFxuICAgIHdpZHRoOiBvcHRpb25zLndpZHRoIHx8IDNcbiAgfSk7XG4gIGRlbGV0ZSBvcHRpb25zLndpZHRoO1xuICByZXR1cm4gbmV3IG9sU3R5bGVUZXh0KHRleHRfb3B0aW9ucyk7XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRNZWFzdXJlID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgaWYgKCF0aGlzLnByb2plY3Rpb25fKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByb2plY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gIH1cblxuICB2YXIgbWVhc3VyZSA9ICcnO1xuXG4gIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICBpZiAodGhpcy5nZXRUeXBlKGZlYXR1cmUpID09PSBuZ2VvR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgdmFyIGF6aW11dCA9IHRoaXMub3B0TnVtYmVyKGZlYXR1cmUsIG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5BWklNVVQpO1xuXG4gICAgICBpZiAodHlwZW9mIGF6aW11dCAhPSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYXppbXV0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRSYWRpdXNMaW5lKGZlYXR1cmUsIGF6aW11dCk7XG4gICAgICBtZWFzdXJlID0gZ2V0Rm9ybWF0dGVkQXppbXV0UmFkaXVzKGxpbmUsIHRoaXMucHJvamVjdGlvbl8sIHRoaXMuZGVjaW1hbHNfLCB0aGlzLnByZWNpc2lvbl8sIHRoaXMudW5pdFByZWZpeEZvcm1hdF8sIHRoaXMubnVtYmVyRm9ybWF0Xyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lYXN1cmUgPSBnZXRGb3JtYXR0ZWRBcmVhKGdlb21ldHJ5LCB0aGlzLnByb2plY3Rpb25fLCB0aGlzLnByZWNpc2lvbl8sIHRoaXMudW5pdFByZWZpeEZvcm1hdF8sIHRoaXMuc3BoZXJpY2FsKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgbWVhc3VyZSA9IGdldEZvcm1hdHRlZExlbmd0aChnZW9tZXRyeSwgdGhpcy5wcm9qZWN0aW9uXywgdGhpcy5wcmVjaXNpb25fLCB0aGlzLnVuaXRQcmVmaXhGb3JtYXRfLCB0aGlzLnNwaGVyaWNhbCk7XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2ludCkge1xuICAgIGlmICh0aGlzLnBvaW50RmlsdGVyRm5fID09PSBudWxsKSB7XG4gICAgICBtZWFzdXJlID0gZ2V0Rm9ybWF0dGVkUG9pbnQoZ2VvbWV0cnksIHRoaXMuZGVjaW1hbHNfLCB0aGlzLm5nZW9OdW1iZXJDb29yZGluYXRlc18pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuXG4gICAgICBpZiAodGhpcy5wb2ludEZpbHRlckFyZ3NfLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbWVhc3VyZSA9IHRoaXMucG9pbnRGaWx0ZXJGbl8oY29vcmRpbmF0ZXMsIHRoaXMucG9pbnRGaWx0ZXJBcmdzX1swXSwgdGhpcy5wb2ludEZpbHRlckFyZ3NfWzFdKS5qb2luKCcsICcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVhc3VyZSA9IHRoaXMucG9pbnRGaWx0ZXJGbl8oY29vcmRpbmF0ZXMsIHRoaXMucG9pbnRGaWx0ZXJBcmdzX1swXSkuam9pbignLCAnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVhc3VyZTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gIGNvbnNvbGUuYXNzZXJ0KGdlb21ldHJ5LCAnR2VvbWV0cnkgc2hvdWxkIGJlIHRocnV0aHknKTtcbiAgdmFyIHR5cGU7XG5cbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpIHtcbiAgICBpZiAoZmVhdHVyZS5nZXQobmdlb0Zvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzLklTX1RFWFQpKSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5URVhUO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5QT0lOVDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aVBvaW50KSB7XG4gICAgdHlwZSA9IG5nZW9HZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ7XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21Qb2x5Z29uKSB7XG4gICAgaWYgKGZlYXR1cmUuZ2V0KG5nZW9Gb3JtYXRGZWF0dXJlUHJvcGVydGllcy5JU19DSVJDTEUpKSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5DSVJDTEU7XG4gICAgfSBlbHNlIGlmIChmZWF0dXJlLmdldChuZ2VvRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMuSVNfUkVDVEFOR0xFKSkge1xuICAgICAgdHlwZSA9IG5nZW9HZW9tZXRyeVR5cGUuUkVDVEFOR0xFO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5QT0xZR09OO1xuICAgIH1cbiAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbU11bHRpUG9seWdvbikge1xuICAgIHR5cGUgPSBuZ2VvR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT047XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21MaW5lU3RyaW5nKSB7XG4gICAgdHlwZSA9IG5nZW9HZW9tZXRyeVR5cGUuTElORV9TVFJJTkc7XG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBvbEdlb21NdWx0aUxpbmVTdHJpbmcpIHtcbiAgICB0eXBlID0gbmdlb0dlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORztcbiAgfVxuXG4gIGlmICghdHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0eXBlJyk7XG4gIH1cblxuICByZXR1cm4gdHlwZTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmZpdE1hcFRvRmVhdHVyZSA9IGZ1bmN0aW9uIChmZWF0dXJlLCBtYXAsIG9wdF9kdXJhdGlvbikge1xuICB2YXIgZHVyYXRpb24gPSBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MDtcbiAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShzaXplKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzaXplJyk7XG4gIH1cblxuICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gIHZhciB2aWV3RXh0ZW50ID0gdmlldy5jYWxjdWxhdGVFeHRlbnQoc2l6ZSk7XG4gIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcblxuICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGdlb21ldHJ5Jyk7XG4gIH1cblxuICB2YXIgZ2VvbUlzVmlzaWJsZSA9IGdlb21ldHJ5LmludGVyc2VjdHNFeHRlbnQodmlld0V4dGVudCk7XG4gIHZhciBtYXBDZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShtYXBDZW50ZXIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1hcENlbnRlcicpO1xuICB9XG5cbiAgdmFyIGZlYXR1cmVFeHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcblxuICBpZiAoZ2VvbUlzVmlzaWJsZSkge1xuICAgIGlmICghKGdlb21ldHJ5IGluc3RhbmNlb2Ygb2xHZW9tUG9pbnQpKSB7XG4gICAgICB2YXIgZmVhdHVyZVJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnQoZmVhdHVyZUV4dGVudCk7XG4gICAgICB2YXIgZmVhdHVyZVpvb21UbXAgPSB2aWV3LmdldFpvb21Gb3JSZXNvbHV0aW9uKGZlYXR1cmVSZXNvbHV0aW9uKTtcblxuICAgICAgaWYgKCFmZWF0dXJlWm9vbVRtcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZmVhdHVyZVpvb20nKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZlYXR1cmVab29tID0gTWF0aC5mbG9vcihmZWF0dXJlWm9vbVRtcCk7XG4gICAgICB2YXIgem9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuXG4gICAgICBpZiAoIXpvb20pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHpvb20nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZlYXR1cmVab29tIDwgem9vbSkge1xuICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgIGNlbnRlcjogbWFwQ2VudGVyLFxuICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblxuICAgICAgICB9LCB7XG4gICAgICAgICAgY2VudGVyOiBtYXBDZW50ZXIsXG4gICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgIHpvb206IGZlYXR1cmVab29tXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgZmVhdHVyZUV4dGVudEhlaWdodCA9IG9sRXh0ZW50LmdldEhlaWdodChmZWF0dXJlRXh0ZW50KTtcbiAgICB2YXIgZmVhdHVyZUV4dGVudFdpZHRoID0gb2xFeHRlbnQuZ2V0V2lkdGgoZmVhdHVyZUV4dGVudCk7XG4gICAgdmFyIHZpZXdFeHRlbnRIZWlnaHQgPSBvbEV4dGVudC5nZXRIZWlnaHQodmlld0V4dGVudCk7XG4gICAgdmFyIHZpZXdFeHRlbnRXaWR0aCA9IG9sRXh0ZW50LmdldFdpZHRoKHZpZXdFeHRlbnQpO1xuICAgIHZhciBnZW9tRml0c0luRXh0ZW50ID0gdmlld0V4dGVudEhlaWdodCA+PSBmZWF0dXJlRXh0ZW50SGVpZ2h0ICYmIHZpZXdFeHRlbnRXaWR0aCA+PSBmZWF0dXJlRXh0ZW50V2lkdGg7XG5cbiAgICBpZiAoZ2VvbUZpdHNJbkV4dGVudCkge1xuICAgICAgdmFyIGZlYXR1cmVDZW50ZXI7XG5cbiAgICAgIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpIHtcbiAgICAgICAgZmVhdHVyZUNlbnRlciA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVBdCgwLjUpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICAgICAgZmVhdHVyZUNlbnRlciA9IGdlb21ldHJ5LmdldEludGVyaW9yUG9pbnQoKS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KSB7XG4gICAgICAgIGZlYXR1cmVDZW50ZXIgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmVhdHVyZUNlbnRlciA9IG9sRXh0ZW50LmdldENlbnRlcihnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XG4gICAgICB9XG5cbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIGNlbnRlcjogbWFwQ2VudGVyLFxuICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25cbiAgICAgIH0sIHtcbiAgICAgICAgY2VudGVyOiBmZWF0dXJlQ2VudGVyLFxuICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aWV3LmZpdChmZWF0dXJlRXh0ZW50LCB7XG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgc2l6ZTogc2l6ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5GZWF0dXJlSGVscGVyLnByb3RvdHlwZS5nZXRSYWRpdXNMaW5lID0gZnVuY3Rpb24gKGZlYXR1cmUsIGF6aW11dCkge1xuICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgaWYgKCFnZW9tZXRyeSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZW9tZXRyeScpO1xuICB9XG5cbiAgdmFyIGV4dGVudCA9IGdlb21ldHJ5LmdldEV4dGVudCgpO1xuICB2YXIgcmFkaXVzID0gKGV4dGVudFszXSAtIGV4dGVudFsxXSkgLyAyO1xuICB2YXIgY2VudGVyID0gb2xFeHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcbiAgdmFyIHggPSBNYXRoLmNvcygoYXppbXV0IC0gOTApICogTWF0aC5QSSAvIDE4MCkgKiByYWRpdXM7XG4gIHZhciB5ID0gLU1hdGguc2luKChhemltdXQgLSA5MCkgKiBNYXRoLlBJIC8gMTgwKSAqIHJhZGl1cztcbiAgdmFyIGVuZFBvaW50ID0gW3ggKyBjZW50ZXJbMF0sIHkgKyBjZW50ZXJbMV1dO1xuICByZXR1cm4gbmV3IG9sR2VvbUxpbmVTdHJpbmcoW2NlbnRlciwgZW5kUG9pbnRdKTtcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmdldE5vblNwYXRpYWxQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgdmFyIGdlb21ldHJ5TmFtZSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnlOYW1lKCk7XG4gIHZhciBub25TcGF0aWFsUHJvcGVydGllcyA9IHt9O1xuICB2YXIgcHJvcGVydGllcyA9IGZlYXR1cmUuZ2V0UHJvcGVydGllcygpO1xuXG4gIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKGtleSAhPT0gZ2VvbWV0cnlOYW1lKSB7XG4gICAgICBub25TcGF0aWFsUHJvcGVydGllc1trZXldID0gcHJvcGVydGllc1trZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub25TcGF0aWFsUHJvcGVydGllcztcbn07XG5cbkZlYXR1cmVIZWxwZXIucHJvdG90eXBlLmNsZWFyTm9uU3BhdGlhbFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoZmVhdHVyZSkge1xuICB2YXIgZ2VvbWV0cnlOYW1lID0gZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKTtcbiAgdmFyIHByb3BlcnRpZXMgPSBmZWF0dXJlLmdldFByb3BlcnRpZXMoKTtcblxuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIGlmIChrZXkgIT09IGdlb21ldHJ5TmFtZSkge1xuICAgICAgZmVhdHVyZS5zZXQoa2V5LCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfVxufTtcblxuRmVhdHVyZUhlbHBlci5wcm90b3R5cGUuZmluZEZlYXR1cmVJbmRleEJ5RmlkID0gZnVuY3Rpb24gKGZlYXR1cmVzLCBmaWQpIHtcbiAgdmFyIGluZGV4ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIGlmIChmZWF0dXJlc1tpXS5nZXRJZCgpID09IGZpZCkge1xuICAgICAgaW5kZXggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluZGV4O1xufTtcblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvRmVhdHVyZUhlbHBlcicsIFtuZ2VvRG93bmxvYWRTZXJ2aWNlLm5hbWUsIG5nZW9NaXNjRmlsdGVycy5uYW1lXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb0ZlYXR1cmVIZWxwZXInLCBGZWF0dXJlSGVscGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJGaWxlU2VydmljZS4kaW5qZWN0ID0gW1wiJHFcIiwgXCIkaHR0cFwiLCBcImdldHRleHRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmV4cG9ydCBmdW5jdGlvbiBGaWxlU2VydmljZSgkcSwgJGh0dHAsIGdldHRleHQpIHtcbiAgdGhpcy5pc1ZhbGlkRmlsZVNpemUgPSBmdW5jdGlvbiAoZmlsZVNpemUpIHtcbiAgICByZXR1cm4gZmlsZVNpemUgPD0gMjAwMDAwMDA7XG4gIH07XG5cbiAgdGhpcy5pc1dtc0dldENhcCA9IGZ1bmN0aW9uIChmaWxlQ29udGVudCkge1xuICAgIHJldHVybiAvPChXTVRfTVNfQ2FwYWJpbGl0aWVzfFdNU19DYXBhYmlsaXRpZXMpLy50ZXN0KGZpbGVDb250ZW50KTtcbiAgfTtcblxuICB0aGlzLmlzV210c0dldENhcCA9IGZ1bmN0aW9uIChmaWxlQ29udGVudCkge1xuICAgIHJldHVybiBmaWxlQ29udGVudC5pbmNsdWRlcygnPENhcGFiaWxpdGllcycpO1xuICB9O1xuXG4gIHRoaXMuaXNLbWwgPSBmdW5jdGlvbiAoZmlsZUNvbnRlbnQpIHtcbiAgICByZXR1cm4gZmlsZUNvbnRlbnQuaW5jbHVkZXMoJzxrbWwnKSAmJiBmaWxlQ29udGVudC5pbmNsdWRlcygnPC9rbWw+Jyk7XG4gIH07XG5cbiAgdGhpcy5pc0dweCA9IGZ1bmN0aW9uIChmaWxlQ29udGVudCkge1xuICAgIHJldHVybiBmaWxlQ29udGVudC5pbmNsdWRlcygnPGdweCcpICYmIGZpbGVDb250ZW50LmluY2x1ZGVzKCc8L2dweD4nKTtcbiAgfTtcblxuICB2YXIgZmlsZVJlYWRlciA9IG51bGw7XG5cbiAgdGhpcy5yZWFkID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuXG4gICAgaWYgKGZpbGVSZWFkZXIgJiYgZmlsZVJlYWRlci5yZWFkeVN0YXRlID09PSBGaWxlUmVhZGVyLkxPQURJTkcpIHtcbiAgICAgIGZpbGVSZWFkZXIuYWJvcnQoKTtcbiAgICB9XG5cbiAgICBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEZpbGVSZWFkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgdGFyZ2V0IHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgZGVmZXIucmVzb2x2ZSh0YXJnZXQucmVzdWx0KTtcbiAgICB9O1xuXG4gICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEZpbGVSZWFkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgdGFyZ2V0IHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVyciA9IHRhcmdldC5lcnJvcjtcblxuICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGVycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlYWRpbmcgZmlsZSBmYWlsZWQ6ICcsIGVycik7XG4gICAgICBkZWZlci5yZWplY3Qoe1xuICAgICAgICAnbWVzc2FnZSc6IGVyci5jb2RlID09IDIwID8gZ2V0dGV4dCgnT3BlcmF0aW9uIGNhbmNlbGVkJykgOiBnZXR0ZXh0KCdSZWFkIGZhaWxlZCcpLFxuICAgICAgICAncmVhc29uJzogZXJyLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmaWxlUmVhZGVyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBkZWZlci5ub3RpZnkoZXZ0KTtcbiAgICB9O1xuXG4gICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICB9O1xuXG4gIHZhciBjYW5jZWxlcjtcblxuICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAodXJsLCBvcHRfY2FuY2VsUCkge1xuICAgIGlmIChjYW5jZWxlcikge1xuICAgICAgY2FuY2VsZXIucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNhbmNlbGVyID0gb3B0X2NhbmNlbFAgfHwgJHEuZGVmZXIoKTtcbiAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICRodHRwLmdldCh1cmwsIHtcbiAgICAgIHRpbWVvdXQ6IGNhbmNlbGVyLnByb21pc2VcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgZGVmZXIucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWRpbmcgZmlsZSBmYWlsZWQ6ICcsIHJlYXNvbik7XG4gICAgICBkZWZlci5yZWplY3Qoe1xuICAgICAgICAnbWVzc2FnZSc6IGdldHRleHQoJ1VwbG9hZCBmYWlsZWQnKSxcbiAgICAgICAgJ3JlYXNvbic6IHJlYXNvblxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gIH07XG59XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9GaWxlJywgW10pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9GaWxlJywgRmlsZVNlcnZpY2UpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuZXhwb3J0IGZ1bmN0aW9uIFRpbWUoKSB7fVxuXG5UaW1lLnByb3RvdHlwZS5jcmVhdGVEYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgZGVmYXVsdFZhbHVlID0gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPSB1bmRlZmluZWQgPyBuZXcgRGF0ZSh2YWx1ZSkgOiBkZWZhdWx0VmFsdWU7XG59O1xuXG5UaW1lLnByb3RvdHlwZS5nZXRUaW1lID0gZnVuY3Rpb24gKGRhdGUsIGRlZmF1bHRWYWx1ZSkge1xuICBpZiAoZGVmYXVsdFZhbHVlID09PSB2b2lkIDApIHtcbiAgICBkZWZhdWx0VmFsdWUgPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGRhdGUgPyBkYXRlLmdldFRpbWUoKSA6IGRlZmF1bHRWYWx1ZTtcbn07XG5cblRpbWUucHJvdG90eXBlLmdldE9wdGlvbnMgPSBmdW5jdGlvbiAodGltZSkge1xuICB2YXIgbWluRGF0ZSA9IHRoaXMuY3JlYXRlRGF0ZSh0aW1lLm1pblZhbHVlKTtcbiAgdmFyIG1heERhdGUgPSB0aGlzLmNyZWF0ZURhdGUodGltZS5tYXhWYWx1ZSk7XG4gIHZhciBtaW5EZWZhdWx0RGF0ZSA9IHRoaXMuY3JlYXRlRGF0ZSh0aW1lLm1pbkRlZlZhbHVlLCBtaW5EYXRlKTtcbiAgdmFyIG1heERlZmF1bHREYXRlID0gdGhpcy5jcmVhdGVEYXRlKHRpbWUubWF4RGVmVmFsdWUsIG1heERhdGUpO1xuXG4gIGlmICghbWluRGVmYXVsdERhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWluRGVmYXVsdERhdGUnKTtcbiAgfVxuXG4gIGlmICghbWF4RGVmYXVsdERhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWF4RGVmYXVsdERhdGUnKTtcbiAgfVxuXG4gIHZhciBtaW5UaW1lID0gdGhpcy5nZXRUaW1lKG1pbkRhdGUpO1xuICB2YXIgbWF4VGltZSA9IHRoaXMuZ2V0VGltZShtYXhEYXRlKTtcblxuICBpZiAoIW1pblRpbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWluVGltZScpO1xuICB9XG5cbiAgaWYgKCFtYXhUaW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1heFRpbWUnKTtcbiAgfVxuXG4gIHZhciBtaW5EZWZhdWx0VGltZSA9IHRoaXMuZ2V0VGltZShtaW5EZWZhdWx0RGF0ZSk7XG4gIHZhciBtYXhEZWZhdWx0VGltZSA9IHRoaXMuZ2V0VGltZShtYXhEZWZhdWx0RGF0ZSk7XG5cbiAgaWYgKCFtaW5EZWZhdWx0VGltZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtaW5EZWZhdWx0VGltZScpO1xuICB9XG5cbiAgdmFyIGRlZmF1bHRWYWx1ZXMgPSBtaW5EZWZhdWx0VGltZTtcblxuICBpZiAodGltZS5tb2RlID09PSAncmFuZ2UnKSB7XG4gICAgaWYgKCFtYXhEZWZhdWx0VGltZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG1heERlZmF1bHRUaW1lJyk7XG4gICAgfVxuXG4gICAgZGVmYXVsdFZhbHVlcyA9IFttaW5EZWZhdWx0VGltZSwgbWF4RGVmYXVsdFRpbWVdO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtaW5EYXRlOiBtaW5UaW1lLFxuICAgIG1heERhdGU6IG1heFRpbWUsXG4gICAgdmFsdWVzOiBkZWZhdWx0VmFsdWVzXG4gIH07XG59O1xuXG5UaW1lLnByb3RvdHlwZS5nZXRVVENEYXRlID0gZnVuY3Rpb24gKGxvY2FsRGF0ZSkge1xuICByZXR1cm4gbmV3IERhdGUobG9jYWxEYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGxvY2FsRGF0ZS5nZXRVVENNb250aCgpLCBsb2NhbERhdGUuZ2V0VVRDRGF0ZSgpKTtcbn07XG5cbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1RpbWUnLCBbXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb1RpbWUnLCBUaW1lKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodG9vbENvbnRleHQsIGFjdGl2ZVByb3BlcnR5TmFtZSkge1xuICB0aGlzLmdldEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdG9vbENvbnRleHRbYWN0aXZlUHJvcGVydHlOYW1lXTtcbiAgfTtcblxuICB0aGlzLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICB0b29sQ29udGV4dFthY3RpdmVQcm9wZXJ0eU5hbWVdID0gbmV3VmFsO1xuICB9O1xufSIsIlRvb2xBY3RpdmF0ZU1nci4kaW5qZWN0ID0gW1wiJHJvb3RTY29wZVwiXTtcblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmV4cG9ydCBmdW5jdGlvbiBUb29sQWN0aXZhdGVNZ3IoJHJvb3RTY29wZSkge1xuICB0aGlzLmdyb3Vwc18gPSB7fTtcbiAgdGhpcy5zY29wZV8gPSAkcm9vdFNjb3BlO1xufVxuXG5Ub29sQWN0aXZhdGVNZ3IucHJvdG90eXBlLnJlZ2lzdGVyVG9vbCA9IGZ1bmN0aW9uIChncm91cE5hbWUsIHRvb2wsIG9wdF9kZWZhdWx0QWN0aXZhdGUpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBpZiAoIXRoaXMuZ3JvdXBzX1tncm91cE5hbWVdKSB7XG4gICAgdGhpcy5ncm91cHNfW2dyb3VwTmFtZV0gPSBbXTtcbiAgfVxuXG4gIHZhciB1bmxpc3RlbiA9IHRoaXMuc2NvcGVfLiR3YXRjaCh0b29sLmdldEFjdGl2ZSwgZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgaWYgKG5ld1ZhbCA9PT0gb2xkVmFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5ld1ZhbCkge1xuICAgICAgX3RoaXMuZGVhY3RpdmF0ZVRvb2xzXyhncm91cE5hbWUsIHRvb2wpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5hY3RpdmF0ZURlZmF1bHRfKGdyb3VwTmFtZSk7XG4gICAgfVxuICB9KTtcbiAgdGhpcy5ncm91cHNfW2dyb3VwTmFtZV0ucHVzaCh7XG4gICAgdG9vbDogdG9vbCxcbiAgICBkZWZhdWx0VG9vbDogb3B0X2RlZmF1bHRBY3RpdmF0ZSB8fCBmYWxzZSxcbiAgICB1bmxpc3RlbjogdW5saXN0ZW5cbiAgfSk7XG59O1xuXG5Ub29sQWN0aXZhdGVNZ3IucHJvdG90eXBlLnVucmVnaXN0ZXJUb29sID0gZnVuY3Rpb24gKGdyb3VwTmFtZSwgdG9vbCkge1xuICB2YXIgZW50cmllcyA9IHRoaXMuZ3JvdXBzX1tncm91cE5hbWVdO1xuXG4gIGlmIChlbnRyaWVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZW50cmllc1tpXS50b29sID09IHRvb2wpIHtcbiAgICAgICAgZW50cmllc1tpXS51bmxpc3RlbigpO1xuICAgICAgICBlbnRyaWVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5Ub29sQWN0aXZhdGVNZ3IucHJvdG90eXBlLnVucmVnaXN0ZXJHcm91cCA9IGZ1bmN0aW9uIChncm91cE5hbWUpIHtcbiAgdmFyIGVudHJpZXMgPSB0aGlzLmdyb3Vwc19bZ3JvdXBOYW1lXTtcblxuICBpZiAoZW50cmllcykge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZW50cmllcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZW50cnkgPSBfc3RlcC52YWx1ZTtcbiAgICAgIGVudHJ5LnVubGlzdGVuKCk7XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMuZ3JvdXBzX1tncm91cE5hbWVdO1xuICB9XG59O1xuXG5Ub29sQWN0aXZhdGVNZ3IucHJvdG90eXBlLmFjdGl2YXRlVG9vbCA9IGZ1bmN0aW9uICh0b29sKSB7XG4gIHRvb2wuc2V0QWN0aXZlKHRydWUpO1xufTtcblxuVG9vbEFjdGl2YXRlTWdyLnByb3RvdHlwZS5kZWFjdGl2YXRlVG9vbCA9IGZ1bmN0aW9uICh0b29sKSB7XG4gIHRvb2wuc2V0QWN0aXZlKGZhbHNlKTtcbn07XG5cblRvb2xBY3RpdmF0ZU1nci5wcm90b3R5cGUuZGVhY3RpdmF0ZVRvb2xzXyA9IGZ1bmN0aW9uIChncm91cE5hbWUsIHRvb2wpIHtcbiAgdmFyIGVudHJpZXMgPSB0aGlzLmdyb3Vwc19bZ3JvdXBOYW1lXTtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShlbnRyaWVzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICB2YXIgZW50cnkgPSBfc3RlcDIudmFsdWU7XG5cbiAgICBpZiAodG9vbCAhPSBlbnRyeS50b29sKSB7XG4gICAgICBlbnRyeS50b29sLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgfVxuICB9XG59O1xuXG5Ub29sQWN0aXZhdGVNZ3IucHJvdG90eXBlLmFjdGl2YXRlRGVmYXVsdF8gPSBmdW5jdGlvbiAoZ3JvdXBOYW1lKSB7XG4gIHZhciBlbnRyaWVzID0gdGhpcy5ncm91cHNfW2dyb3VwTmFtZV07XG4gIHZhciBkZWZhdWx0VG9vbCA9IG51bGw7XG4gIHZhciBoYXNBY3RpdmVUb29sID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZW50cmllcyksIF9zdGVwMzsgIShfc3RlcDMgPSBfaXRlcmF0b3IzKCkpLmRvbmU7KSB7XG4gICAgdmFyIGVudHJ5ID0gX3N0ZXAzLnZhbHVlO1xuICAgIGhhc0FjdGl2ZVRvb2wgPSBoYXNBY3RpdmVUb29sIHx8IGVudHJ5LnRvb2wuZ2V0QWN0aXZlKCk7XG5cbiAgICBpZiAoZW50cnkuZGVmYXVsdFRvb2wpIHtcbiAgICAgIGRlZmF1bHRUb29sID0gZW50cnkudG9vbDtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhhc0FjdGl2ZVRvb2wgJiYgZGVmYXVsdFRvb2wgIT09IG51bGwpIHtcbiAgICBkZWZhdWx0VG9vbC5zZXRBY3RpdmUodHJ1ZSk7XG4gIH1cbn07XG5cbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1Rvb2xBY3RpdmF0ZU1ncicsIFtdKTtcbm1vZHVsZS5zZXJ2aWNlKCduZ2VvVG9vbEFjdGl2YXRlTWdyJywgVG9vbEFjdGl2YXRlTWdyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01pc2NUaW1lLCB7IFRpbWUgfSBmcm9tICduZ2VvL21pc2MvVGltZS5qcyc7XG5leHBvcnQgdmFyIFdNU1RpbWUgPSBmdW5jdGlvbiAoX1RpbWUpIHtcbiAgV01TVGltZS4kaW5qZWN0ID0gW1wiJGZpbHRlclwiLCBcImdldHRleHRDYXRhbG9nXCJdO1xuXG4gIF9pbmhlcml0c0xvb3NlKFdNU1RpbWUsIF9UaW1lKTtcblxuICBmdW5jdGlvbiBXTVNUaW1lKCRmaWx0ZXIsIGdldHRleHRDYXRhbG9nKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfVGltZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMuJGZpbHRlcl8gPSAkZmlsdGVyO1xuICAgIF90aGlzLmdldHRleHRDYXRhbG9nXyA9IGdldHRleHRDYXRhbG9nO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBXTVNUaW1lLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZm9ybWF0VGltZVZhbHVlID0gZnVuY3Rpb24gZm9ybWF0VGltZVZhbHVlKHRpbWUsIHJlc29sdXRpb24sIG9wdF91c2VJU09Gb3JtYXQsIG9wdF90b1VUQykge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgdmFyIHV0YyA9IG9wdF90b1VUQyA/ICdVVEMnIDogdW5kZWZpbmVkO1xuICAgIHZhciB5ZWFyUmVzb2x1dGlvbiA9ICd5eXl5JztcbiAgICB2YXIgbW9udGhSZXNvbHV0aW9uID0gJ3l5eXktTU0nO1xuICAgIHZhciBkYXlSZXNvbHV0aW9uID0gJ3l5eXktTU0tZGQnO1xuICAgIHZhciBzZWNvbmRSZXNvbHV0aW9uID0gbnVsbDtcblxuICAgIGlmICghb3B0X3VzZUlTT0Zvcm1hdCkge1xuICAgICAgdmFyIGdldHRleHRDYXRhbG9nID0gdGhpcy5nZXR0ZXh0Q2F0YWxvZ187XG4gICAgICB5ZWFyUmVzb2x1dGlvbiA9IGdldHRleHRDYXRhbG9nLmdldFN0cmluZygneXl5eScpO1xuICAgICAgbW9udGhSZXNvbHV0aW9uID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdNL3l5eXknKTtcbiAgICAgIGRheVJlc29sdXRpb24gPSBnZXR0ZXh0Q2F0YWxvZy5nZXRTdHJpbmcoJ00vZC95eXl5Jyk7XG4gICAgICBzZWNvbmRSZXNvbHV0aW9uID0gZ2V0dGV4dENhdGFsb2cuZ2V0U3RyaW5nKCdNL2QveXl5eSBISDpNTTpzcycpO1xuICAgIH1cblxuICAgIHN3aXRjaCAocmVzb2x1dGlvbikge1xuICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgIHJldHVybiB0aGlzLiRmaWx0ZXJfKCdkYXRlJykoZGF0ZSwgeWVhclJlc29sdXRpb24sIHV0Yyk7XG5cbiAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZpbHRlcl8oJ2RhdGUnKShkYXRlLCBtb250aFJlc29sdXRpb24sIHV0Yyk7XG5cbiAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgIHJldHVybiB0aGlzLiRmaWx0ZXJfKCdkYXRlJykoZGF0ZSwgZGF5UmVzb2x1dGlvbiwgdXRjKTtcblxuICAgICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgICAgaWYgKHNlY29uZFJlc29sdXRpb24pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy4kZmlsdGVyXygnZGF0ZScpKGRhdGUsIHNlY29uZFJlc29sdXRpb24sIHV0Yyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGR7M30vLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGR7M30vLCAnJyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5mb3JtYXRXTVNUaW1lUGFyYW0gPSBmdW5jdGlvbiBmb3JtYXRXTVNUaW1lUGFyYW0od21zVGltZVByb3BlcnR5LCB0aW1lcywgb3B0X3RvVVRDKSB7XG4gICAgY29uc29sZS5hc3NlcnQod21zVGltZVByb3BlcnR5LnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCk7XG5cbiAgICBpZiAod21zVGltZVByb3BlcnR5Lm1vZGUgPT09ICdyYW5nZScpIHtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KHRpbWVzLmVuZCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFRpbWVWYWx1ZSh0aW1lcy5zdGFydCwgd21zVGltZVByb3BlcnR5LnJlc29sdXRpb24sIHRydWUsIG9wdF90b1VUQykgKyBcIi9cIiArIHRoaXMuZm9ybWF0VGltZVZhbHVlKHRpbWVzLmVuZCwgd21zVGltZVByb3BlcnR5LnJlc29sdXRpb24sIHRydWUsIG9wdF90b1VUQyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFRpbWVWYWx1ZSh0aW1lcy5zdGFydCwgd21zVGltZVByb3BlcnR5LnJlc29sdXRpb24sIHRydWUsIG9wdF90b1VUQyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBXTVNUaW1lO1xufShUaW1lKTtcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1dNU1RpbWUnLCBbbmdlb01pc2NUaW1lLm5hbWVdKTtcbm1vZHVsZS5zZXJ2aWNlKCduZ2VvV01TVGltZScsIFdNU1RpbWUpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImJ1dHRvbkNvbXBvbmVudC4kaW5qZWN0ID0gW1wiJHBhcnNlXCJdO1xuYnV0dG9uR3JvdXBDb21wb25lbnQuJGluamVjdCA9IFtcIiRwYXJzZVwiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQnRuQ29tcG9uZW50JywgW10pO1xuXG5mdW5jdGlvbiBidXR0b25Hcm91cENvbXBvbmVudCgkcGFyc2UpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGNvbnRyb2xsZXI6ICduZ2VvQnRuR3JvdXBDb250cm9sbGVyJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuICAgICAgaWYgKCFjb250cm9sbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb250cm9sbGVyJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZXRBY3RpdmUgPSAkcGFyc2UoYXR0cnMubmdlb0J0bkdyb3VwQWN0aXZlKS5hc3NpZ247XG5cbiAgICAgIGlmIChzZXRBY3RpdmUpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY29udHJvbGxlci5idXR0b25zXy5zb21lKGZ1bmN0aW9uIChidXR0b25Nb2RlbCkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbk1vZGVsKHNjb3BlKSA9PT0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgc2V0QWN0aXZlKHNjb3BlLCBuZXdWYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb0J0bkdyb3VwJywgYnV0dG9uR3JvdXBDb21wb25lbnQpO1xuXG52YXIgQnRuR3JvdXBDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBCdG5Hcm91cENvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiXTtcblxuICBmdW5jdGlvbiBCdG5Hcm91cENvbnRyb2xsZXIoJHNjb3BlKSB7XG4gICAgdGhpcy5idXR0b25zXyA9IFtdO1xuICAgIHRoaXMuc2NvcGVfID0gJHNjb3BlO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IEJ0bkdyb3VwQ29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmFjdGl2YXRlID0gZnVuY3Rpb24gYWN0aXZhdGUoaW5kZXgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5idXR0b25zXy5mb3JFYWNoKGZ1bmN0aW9uIChleHByZXNzaW9uRm4sIGkpIHtcbiAgICAgIGlmIChpICE9IGluZGV4KSB7XG4gICAgICAgIGV4cHJlc3Npb25Gbi5hc3NpZ24oX3RoaXMuc2NvcGVfLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmFkZEJ1dHRvbiA9IGZ1bmN0aW9uIGFkZEJ1dHRvbihleHByZXNzaW9uRm4pIHtcbiAgICB0aGlzLmJ1dHRvbnNfLnB1c2goZXhwcmVzc2lvbkZuKTtcbiAgICByZXR1cm4gdGhpcy5idXR0b25zXy5sZW5ndGggLSAxO1xuICB9O1xuXG4gIHJldHVybiBCdG5Hcm91cENvbnRyb2xsZXI7XG59KCk7XG5cbm1vZHVsZS5jb250cm9sbGVyKCduZ2VvQnRuR3JvdXBDb250cm9sbGVyJywgQnRuR3JvdXBDb250cm9sbGVyKTtcblxuZnVuY3Rpb24gYnV0dG9uQ29tcG9uZW50KCRwYXJzZSkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6IFsnP15uZ2VvQnRuR3JvdXAnLCAnbmdNb2RlbCddLFxuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICBpZiAoIWN0cmxzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjdHJscycpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYnV0dG9uc0N0cmwgPSBjdHJsc1swXTtcbiAgICAgIHZhciBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuICAgICAgdmFyIGluZGV4SW5Hcm91cCA9IC0xO1xuICAgICAgdmFyIG5nTW9kZWxHZXQgPSAkcGFyc2UoYXR0cnMubmdNb2RlbCk7XG4gICAgICB2YXIgbmdNb2RlbFNldCA9IG5nTW9kZWxHZXQuYXNzaWduO1xuXG4gICAgICBpZiAobmdNb2RlbEdldChzY29wZSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZ01vZGVsU2V0KHNjb3BlLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChidXR0b25zQ3RybCAhPT0gbnVsbCkge1xuICAgICAgICBpbmRleEluR3JvdXAgPSBidXR0b25zQ3RybC5hZGRCdXR0b24obmdNb2RlbEdldCk7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoIW5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUgJiYgYnV0dG9uc0N0cmwgIT09IG51bGwpIHtcbiAgICAgICAgICBidXR0b25zQ3RybC5hY3RpdmF0ZShpbmRleEluR3JvdXApO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJywgbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb0J0bicsIGJ1dHRvbkNvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgb2xNYXAgZnJvbSAnb2wvTWFwLmpzJztcbmltcG9ydCBvbENvbnRyb2xDb250cm9sIGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbC5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Db250cm9sJywgW10pO1xuXG5mdW5jdGlvbiBjb250cm9sQ29tcG9uZW50KCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHZhciBjb250cm9sID0gc2NvcGUuJGV2YWwoYXR0cnNbJ25nZW9Db250cm9sJ10pO1xuICAgICAgY29uc29sZS5hc3NlcnQoY29udHJvbCBpbnN0YW5jZW9mIG9sQ29udHJvbENvbnRyb2wpO1xuICAgICAgdmFyIG1hcCA9IHNjb3BlLiRldmFsKGF0dHJzWyduZ2VvQ29udHJvbE1hcCddKTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KG1hcCBpbnN0YW5jZW9mIG9sTWFwKTtcbiAgICAgIGNvbnRyb2wuc2V0VGFyZ2V0KGVsZW1lbnRbMF0pO1xuICAgICAgbWFwLmFkZENvbnRyb2woY29udHJvbCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZGlyZWN0aXZlKCduZ2VvQ29udHJvbCcsIGNvbnRyb2xDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxkaXYgY2xhc3M9XCJuZ2VvLWRhdGVwaWNrZXJcIj5cXG4gIDxmb3JtIG5hbWU9XCJkYXRlRm9ybVwiIGNsYXNzPVwibmdlby1kYXRlcGlja2VyLWZvcm1cIiBub3ZhbGlkYXRlPlxcbiAgICA8ZGl2IG5nLWlmPVwiOjpkYXRlcGlja2VyQ3RybC50aW1lLndpZGdldCA9PT0gXFwnZGF0ZXBpY2tlclxcJ1wiPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJuZ2VvLWRhdGVwaWNrZXItc3RhcnQtZGF0ZVwiPlxcbiAgICAgICAgPHNwYW4gbmctaWY9XCI6OmRhdGVwaWNrZXJDdHJsLnRpbWUubW9kZSA9PT0gXFwncmFuZ2VcXCdcIiB0cmFuc2xhdGU+RnJvbTo8L3NwYW4+XFxuICAgICAgICA8c3BhbiBuZy1pZj1cIjo6ZGF0ZXBpY2tlckN0cmwudGltZS5tb2RlICE9PSBcXCdyYW5nZVxcJ1wiIHRyYW5zbGF0ZT5EYXRlOjwvc3Bhbj5cXG4gICAgICAgIDxpbnB1dCBuYW1lPVwic2RhdGVcIiB1aS1kYXRlPVwiZGF0ZXBpY2tlckN0cmwuc2RhdGVPcHRpb25zXCIgbmctbW9kZWw9XCJkYXRlcGlja2VyQ3RybC5zZGF0ZVwiIHJlcXVpcmVkPVwiXCIvPlxcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXZcXG4gICAgICAgIGNsYXNzPVwibmdlby1kYXRlcGlja2VyLWVuZC1kYXRlXCJcXG4gICAgICAgIG5nLWlmPVwiOjpkYXRlcGlja2VyQ3RybC50aW1lLm1vZGUgPT09IFxcJ3JhbmdlXFwnXCI+XFxuICAgICAgICA8c3BhbiB0cmFuc2xhdGU+VG86PC9zcGFuPlxcbiAgICAgICAgPGlucHV0IG5hbWU9XCJlZGF0ZVwiIHVpLWRhdGU9XCJkYXRlcGlja2VyQ3RybC5lZGF0ZU9wdGlvbnNcIiBuZy1tb2RlbD1cImRhdGVwaWNrZXJDdHJsLmVkYXRlXCIgcmVxdWlyZWQ9XCJcIi8+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC9mb3JtPlxcbjwvZGl2Plxcbic7XG5cbn1cbnJldHVybiBfX3Bcbn0iLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJuZ2VvVGltZVwiLCBcImdldHRleHRDYXRhbG9nXCJdO1xuZGF0ZVBpY2tlckNvbXBvbmVudC4kaW5qZWN0ID0gW1wibmdlb0RhdGVQaWNrZXJUZW1wbGF0ZVVybFwiLCBcIiR0aW1lb3V0XCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb01pc2NUaW1lIGZyb20gJ25nZW8vbWlzYy9UaW1lLmpzJztcbmltcG9ydCAnYW5ndWxhci11aS1kYXRlJztcbmltcG9ydCAnbmdlby9zYXNzL2pxdWVyeS11aS5zY3NzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL2kxOG4vZGF0ZXBpY2tlci1mci5qcyc7XG5pbXBvcnQgJ2pxdWVyeS11aS91aS9pMThuL2RhdGVwaWNrZXItZW4tR0IuanMnO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvaTE4bi9kYXRlcGlja2VyLWRlLmpzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL2kxOG4vZGF0ZXBpY2tlci1pdC5qcyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9EYXRlUGlja2VyJywgW25nZW9NaXNjVGltZS5uYW1lLCAndWkuZGF0ZSddKTtcbm1vZHVsZS52YWx1ZSgnbmdlb0RhdGVQaWNrZXJUZW1wbGF0ZVVybCcsIGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICB2YXIgdGVtcGxhdGVVcmwgPSBhdHRycy5uZ2VvRGF0ZVBpY2tlclRlbXBsYXRlVXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ25nZW8vbWlzYy9kYXRlcGlja2VyQ29tcG9uZW50Jztcbn0pO1xubW9kdWxlLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZ2VvL21pc2MvZGF0ZXBpY2tlckNvbXBvbmVudCcsIHJlcXVpcmUoJy4vZGF0ZXBpY2tlckNvbXBvbmVudC5odG1sJykpO1xufV0pO1xuXG5mdW5jdGlvbiBkYXRlUGlja2VyQ29tcG9uZW50KG5nZW9EYXRlUGlja2VyVGVtcGxhdGVVcmwsICR0aW1lb3V0KSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHtcbiAgICAgIG9uRGF0ZVNlbGVjdGVkOiAnJicsXG4gICAgICB0aW1lOiAnPSdcbiAgICB9LFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgY29udHJvbGxlcjogJ25nZW9EYXRlUGlja2VyQ29udHJvbGxlciBhcyBkYXRlcGlja2VyQ3RybCcsXG4gICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgdGVtcGxhdGVVcmw6IG5nZW9EYXRlUGlja2VyVGVtcGxhdGVVcmwsXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIGlmICghY3RybCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY3RybCcpO1xuICAgICAgfVxuXG4gICAgICBjdHJsLmluaXQoKTtcbiAgICAgIHZhciBsYW5nID0gY3RybC5nZXR0ZXh0Q2F0YWxvZ18uZ2V0Q3VycmVudExhbmd1YWdlKCk7XG4gICAgICAkLmRhdGVwaWNrZXIuc2V0RGVmYXVsdHMoJC5kYXRlcGlja2VyLnJlZ2lvbmFsW2xhbmddKTtcbiAgICAgIGN0cmwuc2RhdGVPcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGN0cmwuc2RhdGVPcHRpb25zLCB7XG4gICAgICAgICdtaW5EYXRlJzogY3RybC5pbml0aWFsTWluRGF0ZSxcbiAgICAgICAgJ21heERhdGUnOiBjdHJsLmluaXRpYWxNYXhEYXRlLFxuICAgICAgICAnb25DbG9zZSc6IGZ1bmN0aW9uIG9uQ2xvc2Uoc2VsZWN0ZWREYXRlKSB7XG4gICAgICAgICAgaWYgKHNlbGVjdGVkRGF0ZSkge1xuICAgICAgICAgICAgJChlbGVtZW50WzBdKS5maW5kKCdpbnB1dFtuYW1lPVwiZWRhdGVcIl0nKS5kYXRlcGlja2VyKCdvcHRpb24nLCAnbWluRGF0ZScsIHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGN0cmwuZWRhdGVPcHRpb25zID0gYW5ndWxhci5leHRlbmQoe30sIGN0cmwuZWRhdGVPcHRpb25zLCB7XG4gICAgICAgICdtaW5EYXRlJzogY3RybC5pbml0aWFsTWluRGF0ZSxcbiAgICAgICAgJ21heERhdGUnOiBjdHJsLmluaXRpYWxNYXhEYXRlLFxuICAgICAgICAnb25DbG9zZSc6IGZ1bmN0aW9uIG9uQ2xvc2Uoc2VsZWN0ZWREYXRlKSB7XG4gICAgICAgICAgaWYgKHNlbGVjdGVkRGF0ZSkge1xuICAgICAgICAgICAgJChlbGVtZW50WzBdKS5maW5kKCdpbnB1dFtuYW1lPVwic2RhdGVcIl0nKS5kYXRlcGlja2VyKCdvcHRpb24nLCAnbWF4RGF0ZScsIHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLm9uKCdoaWRkZW4uYnMucG9wb3ZlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRwID0gYW5ndWxhci5lbGVtZW50KCcjdWktZGF0ZXBpY2tlci1kaXYnKTtcblxuICAgICAgICBpZiAoZHAgJiYgZHAuY3NzKCdkaXNwbGF5JykgPT09ICdibG9jaycpIHtcbiAgICAgICAgICAkKGVsZW1lbnRbMF0pLmZpbmQoJ2lucHV0W25hbWUkPVwiZGF0ZVwiXScpLmRhdGVwaWNrZXIoJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3VpLWRhdGVwaWNrZXItZGl2Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb0RhdGVQaWNrZXInLCBkYXRlUGlja2VyQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsIG5nZW9UaW1lLCBnZXR0ZXh0Q2F0YWxvZykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMubmdlb1RpbWVfID0gbmdlb1RpbWU7XG4gIHRoaXMudGltZSA9IG51bGw7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMuaXNNb2RlUmFuZ2UgPSBmYWxzZTtcbiAgdGhpcy5vbkRhdGVTZWxlY3RlZCA9IG51bGw7XG4gIHRoaXMuaW5pdGlhbE1pbkRhdGUgPSBudWxsO1xuICB0aGlzLmluaXRpYWxNYXhEYXRlID0gbnVsbDtcbiAgdGhpcy5lZGF0ZU9wdGlvbnMgPSB7XG4gICAgJ2NoYW5nZU1vbnRoJzogdHJ1ZSxcbiAgICAnY2hhbmdlWWVhcic6IHRydWVcbiAgfTtcbiAgdGhpcy5zZGF0ZU9wdGlvbnMgPSB7XG4gICAgJ2NoYW5nZU1vbnRoJzogdHJ1ZSxcbiAgICAnY2hhbmdlWWVhcic6IHRydWVcbiAgfTtcbiAgdGhpcy5zZGF0ZSA9IG51bGw7XG4gIHRoaXMuZWRhdGUgPSBudWxsO1xuICAkc2NvcGUuJHdhdGNoR3JvdXAoWydkYXRlcGlja2VyQ3RybC5zZGF0ZScsICdkYXRlcGlja2VyQ3RybC5lZGF0ZSddLCBmdW5jdGlvbiAobmV3RGF0ZXMsIG9sZERhdGVzKSB7XG4gICAgaWYgKCFfdGhpcy5vbkRhdGVTZWxlY3RlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG9uRGF0ZVNlbGVjdGVkJyk7XG4gICAgfVxuXG4gICAgdmFyIHNEYXRlID0gbmV3RGF0ZXNbMF07XG4gICAgdmFyIGVEYXRlID0gbmV3RGF0ZXNbMV07XG5cbiAgICBpZiAoYW5ndWxhci5pc0RhdGUoc0RhdGUpICYmICghX3RoaXMuaXNNb2RlUmFuZ2UgfHwgYW5ndWxhci5pc0RhdGUoZURhdGUpKSkge1xuICAgICAgdmFyIHN0YXJ0ID0gX3RoaXMubmdlb1RpbWVfLmdldFRpbWUoc0RhdGUpO1xuXG4gICAgICB2YXIgZW5kID0gX3RoaXMubmdlb1RpbWVfLmdldFRpbWUoZURhdGUpO1xuXG4gICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBzdGFydCcpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5vbkRhdGVTZWxlY3RlZCh7XG4gICAgICAgIHRpbWU6IHtcbiAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgZW5kOiBlbmRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuQ29udHJvbGxlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLnRpbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdGltZScpO1xuICB9XG5cbiAgdmFyIGluaXRpYWxPcHRpb25zXyA9IHRoaXMubmdlb1RpbWVfLmdldE9wdGlvbnModGhpcy50aW1lKTtcbiAgdGhpcy5pbml0aWFsTWluRGF0ZSA9IHRoaXMubmdlb1RpbWVfLmNyZWF0ZURhdGUoaW5pdGlhbE9wdGlvbnNfLm1pbkRhdGUpO1xuICB0aGlzLmluaXRpYWxNYXhEYXRlID0gdGhpcy5uZ2VvVGltZV8uY3JlYXRlRGF0ZShpbml0aWFsT3B0aW9uc18ubWF4RGF0ZSk7XG4gIHRoaXMuaXNNb2RlUmFuZ2UgPSB0aGlzLnRpbWUubW9kZSA9PT0gJ3JhbmdlJztcblxuICBpZiAodGhpcy5pc01vZGVSYW5nZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShpbml0aWFsT3B0aW9uc18udmFsdWVzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBzaG91bGQgYmUgYW4gYXJyYXknKTtcbiAgICB9XG5cbiAgICB0aGlzLnNkYXRlID0gdGhpcy5uZ2VvVGltZV8uY3JlYXRlRGF0ZShpbml0aWFsT3B0aW9uc18udmFsdWVzWzBdKTtcbiAgICB0aGlzLmVkYXRlID0gdGhpcy5uZ2VvVGltZV8uY3JlYXRlRGF0ZShpbml0aWFsT3B0aW9uc18udmFsdWVzWzFdKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGluaXRpYWxPcHRpb25zXy52YWx1ZXMgIT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zZGF0ZSA9IHRoaXMubmdlb1RpbWVfLmNyZWF0ZURhdGUoaW5pdGlhbE9wdGlvbnNfLnZhbHVlcyk7XG4gIH1cbn07XG5cbm1vZHVsZS5jb250cm9sbGVyKCduZ2VvRGF0ZVBpY2tlckNvbnRyb2xsZXInLCBDb250cm9sbGVyKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkZWxlbWVudFwiLCBcImdldHRleHRDYXRhbG9nXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgRGF0ZUZvcm1hdHRlciBmcm9tICduZ2VvL21pc2MvcGhwLWRhdGUtZm9ybWF0dGVyLmpzJztcbmltcG9ydCAnanF1ZXJ5LWRhdGV0aW1lcGlja2VyL2pxdWVyeS5kYXRldGltZXBpY2tlci5qcyc7XG5pbXBvcnQgJ2pxdWVyeS1kYXRldGltZXBpY2tlci9qcXVlcnkuZGF0ZXRpbWVwaWNrZXIuY3NzJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0RhdGVUaW1lUGlja2VyJywgWydnZXR0ZXh0J10pO1xuXG5mdW5jdGlvbiBkYXRlVGltZUNvbXBvbmVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGNvbnRyb2xsZXI6IENvbnRyb2xsZXIsXG4gICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgJ29wdGlvbnMnOiAnPG5nZW9EYXRldGltZXBpY2tlck9wdGlvbnMnXG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZGlyZWN0aXZlKCduZ2VvRGF0ZXRpbWVwaWNrZXInLCBkYXRlVGltZUNvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoJGVsZW1lbnQsIGdldHRleHRDYXRhbG9nKSB7XG4gIHRoaXMuZWxlbWVudF8gPSAkZWxlbWVudDtcbiAgdGhpcy5nZXR0ZXh0Q2F0YWxvZ18gPSBnZXR0ZXh0Q2F0YWxvZztcbiAgdGhpcy5vcHRpb25zO1xufVxuXG5Db250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGFuZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2dfLmdldEN1cnJlbnRMYW5ndWFnZSgpO1xuICAkLmRhdGV0aW1lcGlja2VyLnNldExvY2FsZShsYW5nKTtcbiAgJC5kYXRldGltZXBpY2tlci5zZXREYXRlRm9ybWF0dGVyKG5ldyBEYXRlRm9ybWF0dGVyKCkpO1xuXG4gIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFuZ3VsYXIuZnJvbUpzb24odGhpcy5vcHRpb25zKTtcbiAgfVxuXG4gIHRoaXMuZWxlbWVudF8uZGF0ZXRpbWVwaWNrZXIodGhpcy5vcHRpb25zKTtcbn07XG5cbm1vZHVsZS5jb250cm9sbGVyKCduZ2VvRGF0ZVRpbWVQaWNrZXJDb250cm9sbGVyJywgQ29udHJvbGxlcik7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiZmFjdG9yeS4kaW5qZWN0ID0gW1wiJHRpbWVvdXRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0RlYm91bmNlJywgW10pO1xuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGludm9rZUFwcGx5LCAkdGltZW91dCkge1xuICB2YXIgdGltZW91dCA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgZnVuYy5hcHBseShfdGhpcywgYXJncyk7XG4gICAgfTtcblxuICAgIGlmICh0aW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICAkdGltZW91dC5jYW5jZWwodGltZW91dCk7XG4gICAgfVxuXG4gICAgdGltZW91dCA9ICR0aW1lb3V0KGxhdGVyLCB3YWl0LCBpbnZva2VBcHBseSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZhY3RvcnkoJHRpbWVvdXQpIHtcbiAgdmFyIGRlYiA9IGRlYm91bmNlO1xuICByZXR1cm4gZnVuY3Rpb24gKGZ1bmMsIHdhaXQsIGludm9rZUFwcGx5KSB7XG4gICAgcmV0dXJuIGRlYihmdW5jLCB3YWl0LCBpbnZva2VBcHBseSwgJHRpbWVvdXQpO1xuICB9O1xufVxuXG5tb2R1bGUuZmFjdG9yeSgnbmdlb0RlYm91bmNlJywgZmFjdG9yeSk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbiBmcm9tICdvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgb2xMYXllckJhc2UgZnJvbSAnb2wvbGF5ZXIvQmFzZS5qcyc7XG5pbXBvcnQgb2xMYXllckdyb3VwIGZyb20gJ29sL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCBvbExheWVyTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2UgZnJvbSAnb2wvc291cmNlL0ltYWdlLmpzJztcbmltcG9ydCBvbFNvdXJjZVRpbGUgZnJvbSAnb2wvc291cmNlL1RpbGUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyYWN0aW9uRGVjb3JhdGlvbihpbnRlcmFjdGlvbikge1xuICBjb25zb2xlLmFzc2VydChpbnRlcmFjdGlvbiBpbnN0YW5jZW9mIG9sSW50ZXJhY3Rpb25JbnRlcmFjdGlvbik7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnRlcmFjdGlvbiwgJ2FjdGl2ZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBpbnRlcmFjdGlvbi5nZXRBY3RpdmUoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgaW50ZXJhY3Rpb24uc2V0QWN0aXZlKHZhbCk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsYXllckRlY29yYXRpb24obGF5ZXIpIHtcbiAgY29uc29sZS5hc3NlcnQobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyQmFzZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgJ3Zpc2libGUnLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGxheWVyLmdldFZpc2libGUoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgbGF5ZXIuc2V0VmlzaWJsZSh2YWwpO1xuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgJ29wYWNpdHknLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIGxheWVyLmdldE9wYWNpdHkoKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgbGF5ZXIuc2V0T3BhY2l0eSh2YWwpO1xuICAgIH1cbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbGF5ZXJMb2FkaW5nKGxheWVyLCAkc2NvcGUpIHtcbiAgdmFyIHNvdXJjZTtcbiAgdmFyIGluY3JlbWVudEV2ZW50cyA9IFtdO1xuICB2YXIgZGVjcmVtZW50RXZlbnRzID0gW107XG4gIHZhciBpbmNyZW1lbnRMb2FkQ291bnRfID0gaW5jcmVtZW50XztcbiAgdmFyIGRlY3JlbWVudExvYWRDb3VudF8gPSBkZWNyZW1lbnRfO1xuICBsYXllci5zZXQoJ2xvYWRfY291bnQnLCAwLCB0cnVlKTtcblxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyR3JvdXApIHtcbiAgICBsYXllci5nZXRMYXllcnMoKS5vbignYWRkJywgZnVuY3Rpb24gKG9sRXZlbnQpIHtcbiAgICAgIHZhciBuZXdMYXllciA9IG9sRXZlbnQuZWxlbWVudDtcbiAgICAgIG5ld0xheWVyLnNldCgncGFyZW50X2dyb3VwJywgbGF5ZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckxheWVyKSB7XG4gICAgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgICBpZiAoc291cmNlID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVRpbGUpIHtcbiAgICAgIGluY3JlbWVudEV2ZW50cyA9IFsndGlsZWxvYWRzdGFydCddO1xuICAgICAgZGVjcmVtZW50RXZlbnRzID0gWyd0aWxlbG9hZGVuZCcsICd0aWxlbG9hZGVycm9yJ107XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZUltYWdlKSB7XG4gICAgICBpbmNyZW1lbnRFdmVudHMgPSBbJ2ltYWdlbG9hZHN0YXJ0J107XG4gICAgICBkZWNyZW1lbnRFdmVudHMgPSBbJ2ltYWdlbG9hZGVuZCcsICdpbWFnZWxvYWRlcnJvciddO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgJ3Vuc3VwcG9ydGVkIHNvdXJjZSB0eXBlJyk7XG4gICAgfVxuXG4gICAgc291cmNlLm9uKGluY3JlbWVudEV2ZW50cywgZnVuY3Rpb24gKCkge1xuICAgICAgaW5jcmVtZW50TG9hZENvdW50XyhsYXllcik7XG4gICAgICAkc2NvcGUuJGFwcGx5QXN5bmMoKTtcbiAgICB9KTtcbiAgICBzb3VyY2Uub24oZGVjcmVtZW50RXZlbnRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICBkZWNyZW1lbnRMb2FkQ291bnRfKGxheWVyKTtcbiAgICAgICRzY29wZS4kYXBwbHlBc3luYygpO1xuICAgIH0pO1xuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGxheWVyLCAnbG9hZGluZycsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gbGF5ZXIuZ2V0KCdsb2FkX2NvdW50JykgPiAwO1xuICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gaW5jcmVtZW50XyhsYXllcikge1xuICAgIHZhciBsb2FkX2NvdW50ID0gbGF5ZXIuZ2V0KCdsb2FkX2NvdW50Jyk7XG4gICAgdmFyIHBhcmVudCA9IGxheWVyLmdldCgncGFyZW50X2dyb3VwJyk7XG4gICAgbGF5ZXIuc2V0KCdsb2FkX2NvdW50JywgKytsb2FkX2NvdW50LCB0cnVlKTtcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIGluY3JlbWVudF8ocGFyZW50KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZWNyZW1lbnRfKGxheWVyKSB7XG4gICAgdmFyIGxvYWRfY291bnQgPSBsYXllci5nZXQoJ2xvYWRfY291bnQnKTtcbiAgICB2YXIgcGFyZW50ID0gbGF5ZXIuZ2V0KCdwYXJlbnRfZ3JvdXAnKTtcbiAgICBsYXllci5zZXQoJ2xvYWRfY291bnQnLCAtLWxvYWRfY291bnQsIHRydWUpO1xuXG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgZGVjcmVtZW50XyhwYXJlbnQpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9NaXNjQXV0b1Byb2plY3Rpb24gZnJvbSAnbmdlby9taXNjL0F1dG9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBuZ2VvTWlzY0J0bkNvbXBvbmVudCBmcm9tICduZ2VvL21pc2MvYnRuQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY0NvbnRyb2xDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL2NvbnRyb2xDb21wb25lbnQuanMnO1xuaW1wb3J0IG5nZW9NaXNjRGF0ZXBpY2tlckNvbXBvbmVudCBmcm9tICduZ2VvL21pc2MvZGF0ZXBpY2tlckNvbXBvbmVudC5qcyc7XG5pbXBvcnQgbmdlb01pc2NEZWJvdW5jZSBmcm9tICduZ2VvL21pc2MvZGVib3VuY2UuanMnO1xuaW1wb3J0IG5nZW9NaXNjRXZlbnRIZWxwZXIgZnJvbSAnbmdlby9taXNjL0V2ZW50SGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZlYXR1cmVIZWxwZXIgZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuaW1wb3J0IG5nZW9NaXNjRmlsZSBmcm9tICduZ2VvL21pc2MvRmlsZS5qcyc7XG5pbXBvcnQgbmdlb01pc2NGaWxlcmVhZGVyQ29tcG9uZW50IGZyb20gJ25nZW8vbWlzYy9maWxlcmVhZGVyQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZpbHRlcnMgZnJvbSAnbmdlby9taXNjL2ZpbHRlcnMuanMnO1xuaW1wb3J0IG5nZW9NaXNjU29ydGFibGVDb21wb25lbnQgZnJvbSAnbmdlby9taXNjL3NvcnRhYmxlQ29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvTWlzY1RpbWUgZnJvbSAnbmdlby9taXNjL1RpbWUuanMnO1xuaW1wb3J0IG5nZW9NaXNjVG9vbEFjdGl2YXRlTWdyIGZyb20gJ25nZW8vbWlzYy9Ub29sQWN0aXZhdGVNZ3IuanMnO1xuaW1wb3J0IG5nZW9NaXNjV01TVGltZSBmcm9tICduZ2VvL21pc2MvV01TVGltZS5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb01pc2NFeHRyYU1vZHVsZScsIFtuZ2VvTWlzY0F1dG9Qcm9qZWN0aW9uLm5hbWUsIG5nZW9NaXNjQnRuQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjQ29udHJvbENvbXBvbmVudC5uYW1lLCBuZ2VvTWlzY0RhdGVwaWNrZXJDb21wb25lbnQubmFtZSwgbmdlb01pc2NEZWJvdW5jZS5uYW1lLCBuZ2VvTWlzY0V2ZW50SGVscGVyLm5hbWUsIG5nZW9NaXNjRmVhdHVyZUhlbHBlci5uYW1lLCBuZ2VvTWlzY0ZpbGUubmFtZSwgbmdlb01pc2NGaWxlcmVhZGVyQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjRmlsdGVycy5uYW1lLCBuZ2VvTWlzY1NvcnRhYmxlQ29tcG9uZW50Lm5hbWUsIG5nZW9NaXNjVGltZS5uYW1lLCBuZ2VvTWlzY1Rvb2xBY3RpdmF0ZU1nci5uYW1lLCBuZ2VvTWlzY1dNU1RpbWUubmFtZV0pOyIsImZpbGVyZWFkZXJDb21wb25lbnQuJGluamVjdCA9IFtcIiR3aW5kb3dcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0ZpbGVyZWFkZXInLCBbXSk7XG5cbmZ1bmN0aW9uIGZpbGVyZWFkZXJDb21wb25lbnQoJHdpbmRvdykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IHtcbiAgICAgICdmaWxlQ29udGVudCc6ICc9bmdlb0ZpbGVyZWFkZXInLFxuICAgICAgJ3N1cHBvcnRlZCc6ICc9P25nZW9GaWxlcmVhZGVyU3VwcG9ydGVkJ1xuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCkge1xuICAgICAgdmFyIHN1cHBvcnRlZCA9ICgnRmlsZVJlYWRlcicgaW4gJHdpbmRvdyk7XG4gICAgICBzY29wZS5zdXBwb3J0ZWQgPSBzdXBwb3J0ZWQ7XG5cbiAgICAgIGlmICghc3VwcG9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNlID0gZnVuY3Rpb24gY2UoY2hhbmdlRXZlbnQpIHtcbiAgICAgICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgJHdpbmRvdy5GaWxlUmVhZGVyKCk7XG5cbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNjb3BlLmZpbGVDb250ZW50ID0gdGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZmlsZXMgPSBjaGFuZ2VFdmVudC50YXJnZXQuZmlsZXM7XG5cbiAgICAgICAgaWYgKCFmaWxlcykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBmaWxlcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGVzWzBdKTtcbiAgICAgIH07XG5cbiAgICAgIGVsZW1lbnQub24oe1xuICAgICAgICBjaGFuZ2U6IGNlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9GaWxlcmVhZGVyJywgZmlsZXJlYWRlckNvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiRHVyYXRpb25GaWx0ZXIuJGluamVjdCA9IFtcImdldHRleHRDYXRhbG9nXCJdO1xudHJ1c3RIdG1sQXV0b0ZpbHRlci4kaW5qZWN0ID0gW1wiJHNjZVwiLCBcIm5nZW9TdHJpbmdUb0h0bWxSZXBsYWNlbWVudHNcIl07XG50cnVzdEh0bWxGaWx0ZXIuJGluamVjdCA9IFtcIiRzY2VcIl07XG5OdW1iZXJDb29yZGluYXRlc0ZpbHRlci4kaW5qZWN0ID0gW1wiJGZpbHRlclwiXTtcblVuaXRQcmVmaXhGaWx0ZXIuJGluamVjdCA9IFtcIiRmaWx0ZXJcIl07XG5OdW1iZXJGaWx0ZXIuJGluamVjdCA9IFtcIiRsb2NhbGVcIl07XG5TY2FsaWZ5RmlsdGVyLiRpbmplY3QgPSBbXCIkZmlsdGVyXCJdO1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnb2wvbWF0aC5qcyc7XG5pbXBvcnQgeyBwYWROdW1iZXIgfSBmcm9tICdvbC9zdHJpbmcuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvQW5ndWxhckZpbHRlcnMnLCBbXSk7XG5cbmZ1bmN0aW9uIFNjYWxpZnlGaWx0ZXIoJGZpbHRlcikge1xuICB2YXIgbnVtYmVyRmlsdGVyID0gJGZpbHRlcignbmdlb051bWJlcicpO1xuXG4gIHZhciBmaWx0ZXJGbiA9IGZ1bmN0aW9uIGZpbHRlckZuKHNjYWxlLCBvcHRfcHJlY2lzaW9uKSB7XG4gICAgaWYgKG9wdF9wcmVjaXNpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgb3B0X3ByZWNpc2lvbiA9IDI7XG4gICAgfVxuXG4gICAgdmFyIHRleHQgPSBudW1iZXJGaWx0ZXIoc2NhbGUsIG9wdF9wcmVjaXNpb24pO1xuICAgIHJldHVybiB0ZXh0ID8gXCIxXFx4QTA6XFx4QTBcIiArIHRleHQgOiAnJztcbiAgfTtcblxuICBmaWx0ZXJGbi4kc3RhdGVmdWwgPSB0cnVlO1xuICByZXR1cm4gZmlsdGVyRm47XG59XG5cbm1vZHVsZS5maWx0ZXIoJ25nZW9TY2FsaWZ5JywgU2NhbGlmeUZpbHRlcik7XG5cbmZ1bmN0aW9uIE51bWJlckZpbHRlcigkbG9jYWxlKSB7XG4gIHZhciBmb3JtYXRzID0gJGxvY2FsZS5OVU1CRVJfRk9STUFUUztcblxuICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24gcmVzdWx0KG51bWJlciwgb3B0X3ByZWNpc2lvbikge1xuICAgIHZhciBncm91cFNlcCA9IGZvcm1hdHMuR1JPVVBfU0VQO1xuICAgIHZhciBkZWNpbWFsU2VwID0gZm9ybWF0cy5ERUNJTUFMX1NFUDtcblxuICAgIGlmIChvcHRfcHJlY2lzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9wcmVjaXNpb24gPSAzO1xuICAgIH1cblxuICAgIGlmIChudW1iZXIgPT09IEluZmluaXR5KSB7XG4gICAgICByZXR1cm4gXCJcXHUyMjFFXCI7XG4gICAgfSBlbHNlIGlmIChudW1iZXIgPT09IC1JbmZpbml0eSkge1xuICAgICAgcmV0dXJuIFwiLVxcdTIyMUVcIjtcbiAgICB9IGVsc2UgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgcmV0dXJuICcwJztcbiAgICB9XG5cbiAgICB2YXIgc2lnbiA9IG51bWJlciA8IDA7XG4gICAgbnVtYmVyID0gTWF0aC5hYnMobnVtYmVyKTtcbiAgICB2YXIgbmJfZGVjaW1hbCA9IG9wdF9wcmVjaXNpb24gLSBNYXRoLmZsb29yKE1hdGgubG9nKG51bWJlcikgLyBNYXRoLmxvZygxMCkpIC0gMTtcbiAgICB2YXIgZmFjdG9yID0gTWF0aC5wb3coMTAsIG5iX2RlY2ltYWwpO1xuICAgIG51bWJlciA9IE1hdGgucm91bmQobnVtYmVyICogZmFjdG9yKTtcbiAgICB2YXIgZGVjaW1hbCA9ICcnO1xuICAgIHZhciB1bml0ID0gTWF0aC5mbG9vcihudW1iZXIgLyBmYWN0b3IpO1xuXG4gICAgaWYgKG5iX2RlY2ltYWwgPiAwKSB7XG4gICAgICB2YXIgc3RyX251bWJlciA9IFwiXCIgKyBudW1iZXI7XG5cbiAgICAgIHdoaWxlIChzdHJfbnVtYmVyLmxlbmd0aCA8IG5iX2RlY2ltYWwpIHtcbiAgICAgICAgc3RyX251bWJlciA9IFwiMFwiICsgc3RyX251bWJlcjtcbiAgICAgIH1cblxuICAgICAgZGVjaW1hbCA9IHN0cl9udW1iZXIuc3Vic3RyaW5nKHN0cl9udW1iZXIubGVuZ3RoIC0gbmJfZGVjaW1hbCk7XG5cbiAgICAgIHdoaWxlIChkZWNpbWFsLmVuZHNXaXRoKCcwJykpIHtcbiAgICAgICAgZGVjaW1hbCA9IGRlY2ltYWwuc3Vic3RyaW5nKDAsIGRlY2ltYWwubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwcyA9IFtdO1xuICAgIHZhciBzdHJfdW5pdCA9IFwiXCIgKyB1bml0O1xuXG4gICAgd2hpbGUgKHN0cl91bml0Lmxlbmd0aCA+IDMpIHtcbiAgICAgIHZhciBpbmRleCA9IHN0cl91bml0Lmxlbmd0aCAtIDM7XG4gICAgICBncm91cHMudW5zaGlmdChzdHJfdW5pdC5zdWJzdHJpbmcoaW5kZXgpKTtcbiAgICAgIHN0cl91bml0ID0gc3RyX3VuaXQuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICB9XG5cbiAgICBncm91cHMudW5zaGlmdChzdHJfdW5pdCk7XG4gICAgcmV0dXJuIChzaWduID8gJy0nIDogJycpICsgZ3JvdXBzLmpvaW4oZ3JvdXBTZXApICsgKGRlY2ltYWwubGVuZ3RoID09PSAwID8gJycgOiBkZWNpbWFsU2VwICsgZGVjaW1hbCk7XG4gIH07XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmZpbHRlcignbmdlb051bWJlcicsIE51bWJlckZpbHRlcik7XG5cbmZ1bmN0aW9uIFVuaXRQcmVmaXhGaWx0ZXIoJGZpbHRlcikge1xuICB2YXIgbnVtYmVyRmlsdGVyID0gJGZpbHRlcignbmdlb051bWJlcicpO1xuICB2YXIgc3RhbmRhcmRQcmVmaXggPSBbJycsICdrJywgJ00nLCAnRycsICdUJywgJ1AnXTtcbiAgdmFyIGJpbmFyeVByZWZpeCA9IFsnJywgJ0tpJywgJ01pJywgJ0dpJywgJ1RpJywgJ1BpJ107XG5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uIHJlc3VsdChudW1iZXIsIG9wdF91bml0LCBvcHRfdHlwZSwgb3B0X3ByZWNpc2lvbikge1xuICAgIGlmIChvcHRfdW5pdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBvcHRfdW5pdCA9ICcnO1xuICAgIH1cblxuICAgIHZhciBjb21wYXJhdG9yRmFjdG9yID0gMSAtIE1hdGgucG93KDAuMSwgb3B0X3ByZWNpc2lvbiB8fCAzKSAqIDAuNTtcbiAgICB2YXIgZGl2aXNvciA9IDEwMDA7XG4gICAgdmFyIHByZWZpeCA9IHN0YW5kYXJkUHJlZml4O1xuXG4gICAgaWYgKG9wdF90eXBlID09PSAnc3F1YXJlJykge1xuICAgICAgZGl2aXNvciA9IDEwMDAwMDA7XG4gICAgfSBlbHNlIGlmIChvcHRfdHlwZSA9PT0gJ2JpbmFyeScpIHtcbiAgICAgIGRpdmlzb3IgPSAxMDI0O1xuICAgICAgcHJlZml4ID0gYmluYXJ5UHJlZml4O1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGluZGV4X21heCA9IHByZWZpeC5sZW5ndGggLSAxO1xuXG4gICAgd2hpbGUgKG51bWJlciA+PSBkaXZpc29yICogY29tcGFyYXRvckZhY3RvciAmJiBpbmRleCA8IGluZGV4X21heCkge1xuICAgICAgbnVtYmVyID0gbnVtYmVyIC8gZGl2aXNvcjtcbiAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgdmFyIHBvc3RmaXggPSBwcmVmaXhbaW5kZXhdICsgb3B0X3VuaXQ7XG4gICAgdmFyIHNwYWNlID0gcG9zdGZpeC5sZW5ndGggPT0gMCA/ICcnIDogXCJcXHhBMFwiO1xuICAgIHJldHVybiBudW1iZXJGaWx0ZXIobnVtYmVyLCBvcHRfcHJlY2lzaW9uKSArIHNwYWNlICsgcG9zdGZpeDtcbiAgfTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZmlsdGVyKCduZ2VvVW5pdFByZWZpeCcsIFVuaXRQcmVmaXhGaWx0ZXIpO1xuXG5mdW5jdGlvbiBOdW1iZXJDb29yZGluYXRlc0ZpbHRlcigkZmlsdGVyKSB7XG4gIHZhciBmaWx0ZXJGbiA9IGZ1bmN0aW9uIGZpbHRlckZuKGNvb3JkaW5hdGVzLCBvcHRfZnJhY3Rpb25EaWdpdHMsIG9wdF90ZW1wbGF0ZSkge1xuICAgIHZhciB0ZW1wbGF0ZSA9IG9wdF90ZW1wbGF0ZSA/IG9wdF90ZW1wbGF0ZSA6ICd7eH0ge3l9JztcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVzWzBdO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZXNbMV07XG4gICAgdmFyIGZyYWN0aW9uRGlnaXRzID0gcGFyc2VJbnQob3B0X2ZyYWN0aW9uRGlnaXRzLCAxMCkgfCAwO1xuICAgIHZhciB4X3N0ciA9ICRmaWx0ZXIoJ251bWJlcicpKHgsIGZyYWN0aW9uRGlnaXRzKTtcbiAgICB2YXIgeV9zdHIgPSAkZmlsdGVyKCdudW1iZXInKSh5LCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoJ3t4fScsIHhfc3RyKS5yZXBsYWNlKCd7eX0nLCB5X3N0cik7XG4gIH07XG5cbiAgcmV0dXJuIGZpbHRlckZuO1xufVxuXG5tb2R1bGUuZmlsdGVyKCduZ2VvTnVtYmVyQ29vcmRpbmF0ZXMnLCBOdW1iZXJDb29yZGluYXRlc0ZpbHRlcik7XG5cbmZ1bmN0aW9uIERNU0Nvb3JkaW5hdGVzRmlsdGVyKCkge1xuICB2YXIgZGVncmVlc1RvU3RyaW5nSERNUyA9IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoZGVncmVlcywgaGVtaXNwaGVyZXMsIGZyYWN0aW9uRGlnaXRzKSB7XG4gICAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gICAgdmFyIGRtcyA9IE1hdGguYWJzKDM2MDAgKiBub3JtYWxpemVkRGVncmVlcyk7XG4gICAgdmFyIGQgPSBNYXRoLmZsb29yKGRtcyAvIDM2MDApO1xuICAgIHZhciBtID0gTWF0aC5mbG9vcihkbXMgLyA2MCAlIDYwKTtcbiAgICB2YXIgcyA9IGRtcyAlIDYwO1xuICAgIHJldHVybiBkICsgXCJcXHhCMCBcIiArIHBhZE51bWJlcihtLCAyKSArIFwiXFx1MjAzMiBcIiArIHBhZE51bWJlcihzLCAyLCBmcmFjdGlvbkRpZ2l0cykgKyBcIlxcdTIwMzMgXCIgKyBoZW1pc3BoZXJlcy5jaGFyQXQobm9ybWFsaXplZERlZ3JlZXMgPCAwID8gMSA6IDApO1xuICB9O1xuXG4gIHZhciBmaWx0ZXJGbiA9IGZ1bmN0aW9uIGZpbHRlckZuKGNvb3JkaW5hdGVzLCBvcHRfZnJhY3Rpb25EaWdpdHMsIG9wdF90ZW1wbGF0ZSkge1xuICAgIHZhciBmcmFjdGlvbkRpZ2l0cyA9IHBhcnNlSW50KG9wdF9mcmFjdGlvbkRpZ2l0cywgMTApIHwgMDtcbiAgICB2YXIgdGVtcGxhdGUgPSBvcHRfdGVtcGxhdGUgPyBvcHRfdGVtcGxhdGUgOiAne3h9IHt5fSc7XG4gICAgdmFyIHhkbXMgPSBkZWdyZWVzVG9TdHJpbmdIRE1TKGNvb3JkaW5hdGVzWzBdLCAnRVcnLCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgdmFyIHlkbXMgPSBkZWdyZWVzVG9TdHJpbmdIRE1TKGNvb3JkaW5hdGVzWzFdLCAnTlMnLCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoJ3t4fScsIHhkbXMpLnJlcGxhY2UoJ3t5fScsIHlkbXMpO1xuICB9O1xuXG4gIHJldHVybiBmaWx0ZXJGbjtcbn1cblxubW9kdWxlLmZpbHRlcignbmdlb0RNU0Nvb3JkaW5hdGVzJywgRE1TQ29vcmRpbmF0ZXNGaWx0ZXIpO1xuXG5mdW5jdGlvbiB0cnVzdEh0bWxGaWx0ZXIoJHNjZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ICE9PSB1bmRlZmluZWQgJiYgaW5wdXQgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKFwiXCIgKyBpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKCcmbmJzcDsnKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5maWx0ZXIoJ25nZW9UcnVzdEh0bWwnLCB0cnVzdEh0bWxGaWx0ZXIpO1xuXG5mdW5jdGlvbiB0cnVzdEh0bWxBdXRvRmlsdGVyKCRzY2UsIG5nZW9TdHJpbmdUb0h0bWxSZXBsYWNlbWVudHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG5nZW9TdHJpbmdUb0h0bWxSZXBsYWNlbWVudHMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgICAgIHZhciByZXBsYWNlbWVudCA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKHJlcGxhY2VtZW50LmNvbXBpbGVkX2V4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVwbGFjZW1lbnQuY29tcGlsZWRfZXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAocmVwbGFjZW1lbnQuZXhwcmVzc2lvbiwgcmVwbGFjZW1lbnQuZmxhZ3MpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbnB1dC5tYXRjaChyZXBsYWNlbWVudC5jb21waWxlZF9leHByZXNzaW9uKSkge1xuICAgICAgICAgICAgaW5wdXQgPSByZXBsYWNlbWVudC50ZW1wbGF0ZS5yZXBsYWNlKC9cXCQxL2csIGlucHV0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKFwiXCIgKyBpbnB1dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbChcIlwiICsgaW5wdXQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbCgnJm5ic3A7Jyk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZmlsdGVyKCduZ2VvVHJ1c3RIdG1sQXV0bycsIHRydXN0SHRtbEF1dG9GaWx0ZXIpO1xuXG5mdW5jdGlvbiBEdXJhdGlvbkZpbHRlcihnZXR0ZXh0Q2F0YWxvZykge1xuICB2YXIgVGltZVVuaXRzID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgU0VDT05EUzogU3ltYm9sKCdzZWNvbmRzJyksXG4gICAgTUlOVVRFUzogU3ltYm9sKCdtaW51dGVzJyksXG4gICAgSE9VUlM6IFN5bWJvbCgnaG91cnMnKSxcbiAgICBEQVlTOiBTeW1ib2woJ2RheXMnKVxuICB9KTtcblxuICB2YXIgcGx1cmFsaXplID0gZnVuY3Rpb24gcGx1cmFsaXplKGFtb3VudCwgdW5pdCkge1xuICAgIHZhciBmb3JtYXR0ZWRVbml0ID0gJyc7XG5cbiAgICBzd2l0Y2ggKHVuaXQpIHtcbiAgICAgIGNhc2UgVGltZVVuaXRzLlNFQ09ORFM6XG4gICAgICAgIGZvcm1hdHRlZFVuaXQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRQbHVyYWwoYW1vdW50LCAnc2Vjb25kJywgJ3NlY29uZHMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVGltZVVuaXRzLk1JTlVURVM6XG4gICAgICAgIGZvcm1hdHRlZFVuaXQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRQbHVyYWwoYW1vdW50LCAnbWludXRlJywgJ21pbnV0ZXMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVGltZVVuaXRzLkhPVVJTOlxuICAgICAgICBmb3JtYXR0ZWRVbml0ID0gZ2V0dGV4dENhdGFsb2cuZ2V0UGx1cmFsKGFtb3VudCwgJ2hvdXInLCAnaG91cnMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVGltZVVuaXRzLkRBWVM6XG4gICAgICAgIGZvcm1hdHRlZFVuaXQgPSBnZXR0ZXh0Q2F0YWxvZy5nZXRQbHVyYWwoYW1vdW50LCAnZGF5JywgJ2RheXMnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBhbW91bnQgKyBcIiBcIiArIGZvcm1hdHRlZFVuaXQ7XG4gIH07XG5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uIHJlc3VsdChkdXJhdGlvbikge1xuICAgIGR1cmF0aW9uID0gTWF0aC5yb3VuZChkdXJhdGlvbik7XG4gICAgdmFyIG91dHB1dDtcblxuICAgIGlmIChkdXJhdGlvbiA8IDYwKSB7XG4gICAgICByZXR1cm4gcGx1cmFsaXplKGR1cmF0aW9uLCBUaW1lVW5pdHMuU0VDT05EUyk7XG4gICAgfVxuXG4gICAgdmFyIHJlbWFpbmRlciA9IGR1cmF0aW9uICUgNjA7XG4gICAgZHVyYXRpb24gPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gNjApO1xuXG4gICAgaWYgKGR1cmF0aW9uIDwgNjApIHtcbiAgICAgIG91dHB1dCA9IHBsdXJhbGl6ZShkdXJhdGlvbiwgVGltZVVuaXRzLk1JTlVURVMpO1xuXG4gICAgICBpZiAocmVtYWluZGVyID4gMCkge1xuICAgICAgICBvdXRwdXQgKz0gXCIgXCIgKyBwbHVyYWxpemUocmVtYWluZGVyLCBUaW1lVW5pdHMuU0VDT05EUyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgcmVtYWluZGVyID0gZHVyYXRpb24gJSA2MDtcbiAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyA2MCk7XG5cbiAgICBpZiAoZHVyYXRpb24gPCAyNCkge1xuICAgICAgb3V0cHV0ID0gcGx1cmFsaXplKGR1cmF0aW9uLCBUaW1lVW5pdHMuSE9VUlMpO1xuXG4gICAgICBpZiAocmVtYWluZGVyID4gMCkge1xuICAgICAgICBvdXRwdXQgKz0gXCIgXCIgKyBwbHVyYWxpemUocmVtYWluZGVyLCBUaW1lVW5pdHMuTUlOVVRFUyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgcmVtYWluZGVyID0gZHVyYXRpb24gJSAyNDtcbiAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAyNCk7XG4gICAgb3V0cHV0ID0gcGx1cmFsaXplKGR1cmF0aW9uLCBUaW1lVW5pdHMuREFZUyk7XG5cbiAgICBpZiAocmVtYWluZGVyID4gMCkge1xuICAgICAgb3V0cHV0ICs9IFwiIFwiICsgcGx1cmFsaXplKHJlbWFpbmRlciwgVGltZVVuaXRzLkhPVVJTKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5maWx0ZXIoJ25nZW9EdXJhdGlvbicsIER1cmF0aW9uRmlsdGVyKTtcblxudmFyIHJlbW92ZUNEQVRBID0gZnVuY3Rpb24gcmVtb3ZlQ0RBVEEoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgJiYgaW5wdXQucmVwbGFjZSkge1xuICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoLzwhXFxbQ0RBVEFcXFsoLiopXFxdXFxdPi8sICckMScpO1xuICAgIH1cbiAgfTtcbn07XG5cbm1vZHVsZS5maWx0ZXIoJ3JlbW92ZUNEQVRBJywgcmVtb3ZlQ0RBVEEpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIERBWSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XG52YXIgSE9VUiA9IDM2MDA7XG5cbmZ1bmN0aW9uIF9jb21wYXJlKHN0cjEsIHN0cjIpIHtcbiAgcmV0dXJuIHR5cGVvZiBzdHIxID09PSAnc3RyaW5nJyAmJiB0eXBlb2Ygc3RyMiA9PT0gJ3N0cmluZycgJiYgc3RyMS50b0xvd2VyQ2FzZSgpID09PSBzdHIyLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIF9scGFkKHZhbHVlLCBsZW5ndGgsIGNocikge1xuICB2YXIgdmFsID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgY2hyID0gY2hyIHx8ICcwJztcbiAgcmV0dXJuIHZhbC5sZW5ndGggPCBsZW5ndGggPyBfbHBhZChjaHIgKyB2YWwsIGxlbmd0aCkgOiB2YWw7XG59XG5cbmZ1bmN0aW9uIF9leHRlbmQob3V0KSB7XG4gIG91dCA9IG91dCB8fCB7fTtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvYmogPSBhcmd1bWVudHNbaV07XG5cbiAgICBpZiAoIW9iaikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgX2V4dGVuZChvdXRba2V5XSwgb2JqW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBfaW5kZXhPZih2YWwsIGFycikge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJbaV0udG9Mb3dlckNhc2UoKSA9PT0gdmFsLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxudmFyIGRlZmF1bHRTZXR0aW5ncyA9IHtcbiAgZGF0ZVNldHRpbmdzOiB7XG4gICAgZGF5czogWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddLFxuICAgIGRheXNTaG9ydDogWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXSxcbiAgICBtb250aHM6IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddLFxuICAgIG1vbnRoc1Nob3J0OiBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10sXG4gICAgbWVyaWRpZW06IFsnQU0nLCAnUE0nXSxcbiAgICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG51bWJlcikge1xuICAgICAgdmFyIG4gPSBudW1iZXIgJSAxMCxcbiAgICAgICAgICBzdWZmaXhlcyA9IHtcbiAgICAgICAgMTogJ3N0JyxcbiAgICAgICAgMjogJ25kJyxcbiAgICAgICAgMzogJ3JkJ1xuICAgICAgfTtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSB8fCAhc3VmZml4ZXNbbl0gPyAndGgnIDogc3VmZml4ZXNbbl07XG4gICAgfVxuICB9LFxuICBzZXBhcmF0b3JzOiAvWyBcXC0rLy5UOkBdL2csXG4gIHZhbGlkUGFydHM6IC9bZERqbE5Td3pXRm1NbnRMb1l5YUFCZ0doSGlzdWVUSU9QWmNyVV0vZyxcbiAgaW50UGFydHM6IC9bZGp3TnptbnlZaEhnR2lzXS9nLFxuICB0elBhcnRzOiAvXFxiKD86W1BNQ0VBXVtTRFBdVHwoPzpQYWNpZmljfE1vdW50YWlufENlbnRyYWx8RWFzdGVybnxBdGxhbnRpYykgKD86U3RhbmRhcmR8RGF5bGlnaHR8UHJldmFpbGluZykgVGltZXwoPzpHTVR8VVRDKSg/OlstK11cXGR7NH0pPylcXGIvZyxcbiAgdHpDbGlwOiAvW14tK1xcZEEtWl0vZ1xufTtcblxudmFyIERhdGVGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERhdGVGb3JtYXR0ZXIob3B0aW9ucykge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgY29uZmlnID0gX2V4dGVuZChkZWZhdWx0U2V0dGluZ3MsIG9wdGlvbnMpO1xuXG4gICAgc2VsZi5kYXRlU2V0dGluZ3MgPSBjb25maWcuZGF0ZVNldHRpbmdzO1xuICAgIHNlbGYuc2VwYXJhdG9ycyA9IGNvbmZpZy5zZXBhcmF0b3JzO1xuICAgIHNlbGYudmFsaWRQYXJ0cyA9IGNvbmZpZy52YWxpZFBhcnRzO1xuICAgIHNlbGYuaW50UGFydHMgPSBjb25maWcuaW50UGFydHM7XG4gICAgc2VsZi50elBhcnRzID0gY29uZmlnLnR6UGFydHM7XG4gICAgc2VsZi50ekNsaXAgPSBjb25maWcudHpDbGlwO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IERhdGVGb3JtYXR0ZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRNb250aCA9IGZ1bmN0aW9uIGdldE1vbnRoKHZhbCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgaSA9IF9pbmRleE9mKHZhbCwgc2VsZi5kYXRlU2V0dGluZ3MubW9udGhzU2hvcnQpICsgMTtcblxuICAgIGlmIChpID09PSAwKSB7XG4gICAgICBpID0gX2luZGV4T2YodmFsLCBzZWxmLmRhdGVTZXR0aW5ncy5tb250aHMpICsgMTtcbiAgICB9XG5cbiAgICByZXR1cm4gaTtcbiAgfTtcblxuICBfcHJvdG8ucGFyc2VEYXRlID0gZnVuY3Rpb24gcGFyc2VEYXRlKHZEYXRlLCB2Rm9ybWF0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICB2U2V0dGluZ3MgPSBzZWxmLmRhdGVTZXR0aW5ncyxcbiAgICAgICAgb3V0ID0ge1xuICAgICAgZGF0ZTogbnVsbCxcbiAgICAgIHllYXI6IG51bGwsXG4gICAgICBtb250aDogbnVsbCxcbiAgICAgIGRheTogbnVsbCxcbiAgICAgIGhvdXI6IDAsXG4gICAgICBtaW46IDAsXG4gICAgICBzZWM6IDBcbiAgICB9O1xuICAgIHZhciB2RGF0ZUZsYWcgPSBmYWxzZSxcbiAgICAgICAgdlRpbWVGbGFnID0gZmFsc2UsXG4gICAgICAgIGk7XG5cbiAgICBpZiAoIXZEYXRlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodkRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gdkRhdGU7XG4gICAgfVxuXG4gICAgaWYgKHZGb3JtYXQgPT09ICdVJykge1xuICAgICAgaSA9IHBhcnNlSW50KHZEYXRlKTtcbiAgICAgIHJldHVybiBpID8gbmV3IERhdGUoaSAqIDEwMDApIDogdkRhdGU7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlb2YgdkRhdGUpIHtcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh2RGF0ZSk7XG5cbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgdkZvcm1hdFBhcnRzID0gdkZvcm1hdC5tYXRjaChzZWxmLnZhbGlkUGFydHMpO1xuXG4gICAgaWYgKCF2Rm9ybWF0UGFydHMgfHwgdkZvcm1hdFBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGRhdGUgZm9ybWF0IGRlZmluaXRpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIHZEYXRlUGFydHMgPSB2RGF0ZS5yZXBsYWNlKHNlbGYuc2VwYXJhdG9ycywgJ1xcMCcpLnNwbGl0KCdcXDAnKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCB2RGF0ZVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdkRhdGVQYXJ0ID0gdkRhdGVQYXJ0c1tpXTtcbiAgICAgIHZhciBpRGF0ZVBhcnQgPSBwYXJzZUludCh2RGF0ZVBhcnQpO1xuXG4gICAgICBzd2l0Y2ggKHZGb3JtYXRQYXJ0c1tpXSkge1xuICAgICAgICBjYXNlICd5JzpcbiAgICAgICAgY2FzZSAnWSc6XG4gICAgICAgICAgaWYgKGlEYXRlUGFydCkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHZEYXRlUGFydC5sZW5ndGg7XG4gICAgICAgICAgICBvdXQueWVhciA9IGxlbiA9PT0gMiA/IHBhcnNlSW50KChpRGF0ZVBhcnQgPCA3MCA/ICcyMCcgOiAnMTknKSArIHZEYXRlUGFydCkgOiBpRGF0ZVBhcnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZEYXRlRmxhZyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgIGNhc2UgJ24nOlxuICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgY2FzZSAnRic6XG4gICAgICAgICAgaWYgKGlzTmFOKGlEYXRlUGFydCkpIHtcbiAgICAgICAgICAgIHZhciB2TW9udGggPSBzZWxmLmdldE1vbnRoKHZEYXRlUGFydCk7XG5cbiAgICAgICAgICAgIGlmICh2TW9udGggPiAwKSB7XG4gICAgICAgICAgICAgIG91dC5tb250aCA9IHZNb250aDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaURhdGVQYXJ0ID49IDEgJiYgaURhdGVQYXJ0IDw9IDEyKSB7XG4gICAgICAgICAgICAgIG91dC5tb250aCA9IGlEYXRlUGFydDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZEYXRlRmxhZyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgIGNhc2UgJ2onOlxuICAgICAgICAgIGlmIChpRGF0ZVBhcnQgPj0gMSAmJiBpRGF0ZVBhcnQgPD0gMzEpIHtcbiAgICAgICAgICAgIG91dC5kYXkgPSBpRGF0ZVBhcnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZEYXRlRmxhZyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZyc6XG4gICAgICAgIGNhc2UgJ2gnOlxuICAgICAgICAgIHZhciB2TWVyaUluZGV4ID0gdkZvcm1hdFBhcnRzLmluY2x1ZGVzKCdhJykgPyB2Rm9ybWF0UGFydHMuaW5kZXhPZignYScpIDogdkZvcm1hdFBhcnRzLmluY2x1ZGVzKCdBJykgPyB2Rm9ybWF0UGFydHMuaW5kZXhPZignQScpIDogLTE7XG4gICAgICAgICAgdmFyIG1lciA9IHZEYXRlUGFydHNbdk1lcmlJbmRleF07XG5cbiAgICAgICAgICBpZiAodk1lcmlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHZhciB2TWVyaU9mZnNldCA9IF9jb21wYXJlKG1lciwgdlNldHRpbmdzLm1lcmlkaWVtWzBdKSA/IDAgOiBfY29tcGFyZShtZXIsIHZTZXR0aW5ncy5tZXJpZGllbVsxXSkgPyAxMiA6IC0xO1xuXG4gICAgICAgICAgICBpZiAoaURhdGVQYXJ0ID49IDEgJiYgaURhdGVQYXJ0IDw9IDEyICYmIHZNZXJpT2Zmc2V0ICE9PSAtMSkge1xuICAgICAgICAgICAgICBvdXQuaG91ciA9IGlEYXRlUGFydCAlIDEyID09PSAwID8gdk1lcmlPZmZzZXQgOiBpRGF0ZVBhcnQgKyB2TWVyaU9mZnNldDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChpRGF0ZVBhcnQgPj0gMCAmJiBpRGF0ZVBhcnQgPD0gMjMpIHtcbiAgICAgICAgICAgICAgICBvdXQuaG91ciA9IGlEYXRlUGFydDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoaURhdGVQYXJ0ID49IDAgJiYgaURhdGVQYXJ0IDw9IDIzKSB7XG4gICAgICAgICAgICAgIG91dC5ob3VyID0gaURhdGVQYXJ0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdlRpbWVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdHJzpcbiAgICAgICAgY2FzZSAnSCc6XG4gICAgICAgICAgaWYgKGlEYXRlUGFydCA+PSAwICYmIGlEYXRlUGFydCA8PSAyMykge1xuICAgICAgICAgICAgb3V0LmhvdXIgPSBpRGF0ZVBhcnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZUaW1lRmxhZyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgaWYgKGlEYXRlUGFydCA+PSAwICYmIGlEYXRlUGFydCA8PSA1OSkge1xuICAgICAgICAgICAgb3V0Lm1pbiA9IGlEYXRlUGFydDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdlRpbWVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICBpZiAoaURhdGVQYXJ0ID49IDAgJiYgaURhdGVQYXJ0IDw9IDU5KSB7XG4gICAgICAgICAgICBvdXQuc2VjID0gaURhdGVQYXJ0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2VGltZUZsYWcgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh2RGF0ZUZsYWcgPT09IHRydWUgJiYgb3V0LnllYXIgJiYgb3V0Lm1vbnRoICYmIG91dC5kYXkpIHtcbiAgICAgIG91dC5kYXRlID0gbmV3IERhdGUob3V0LnllYXIsIG91dC5tb250aCAtIDEsIG91dC5kYXksIG91dC5ob3VyLCBvdXQubWluLCBvdXQuc2VjLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHZUaW1lRmxhZyAhPT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgb3V0LmRhdGUgPSBuZXcgRGF0ZSgwLCAwLCAwLCBvdXQuaG91ciwgb3V0Lm1pbiwgb3V0LnNlYywgMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dC5kYXRlO1xuICB9O1xuXG4gIF9wcm90by5ndWVzc0RhdGUgPSBmdW5jdGlvbiBndWVzc0RhdGUodkRhdGVTdHIsIHZGb3JtYXQpIHtcbiAgICBpZiAodHlwZW9mIHZEYXRlU3RyICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZEYXRlU3RyO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdlBhcnRzID0gdkRhdGVTdHIucmVwbGFjZShzZWxmLnNlcGFyYXRvcnMsICdcXDAnKS5zcGxpdCgnXFwwJyksXG4gICAgICAgIHZQYXR0ZXJuID0gL15bZGptbl0vZztcbiAgICB2YXIgdkZvcm1hdFBhcnRzID0gdkZvcm1hdC5tYXRjaChzZWxmLnZhbGlkUGFydHMpO1xuICAgIHZhciB2RGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICBpZiAoIXZQYXR0ZXJuLnRlc3QodkZvcm1hdFBhcnRzWzBdKSkge1xuICAgICAgcmV0dXJuIHZEYXRlU3RyO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdlBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdkRpZ2l0ID0gMjtcbiAgICAgIHZhciBpUGFydCA9IHZQYXJ0c1tpXTtcbiAgICAgIHZhciBpU2VjID0gcGFyc2VJbnQoaVBhcnQuc3Vic3RyKDAsIDIpKTtcblxuICAgICAgaWYgKGlzTmFOKGlTZWMpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGlmICh2Rm9ybWF0UGFydHNbMF0gPT09ICdtJyB8fCB2Rm9ybWF0UGFydHNbMF0gPT09ICduJykge1xuICAgICAgICAgICAgdkRhdGUuc2V0TW9udGgoaVNlYyAtIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2RGF0ZS5zZXREYXRlKGlTZWMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAodkZvcm1hdFBhcnRzWzBdID09PSAnbScgfHwgdkZvcm1hdFBhcnRzWzBdID09PSAnbicpIHtcbiAgICAgICAgICAgIHZEYXRlLnNldERhdGUoaVNlYyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZEYXRlLnNldE1vbnRoKGlTZWMgLSAxKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgdmFyIHZZZWFyID0gdkRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICB2YXIgbGVuID0gaVBhcnQubGVuZ3RoO1xuICAgICAgICAgIHZEaWdpdCA9IGxlbiA8IDQgPyBsZW4gOiA0O1xuICAgICAgICAgIHZZZWFyID0gcGFyc2VJbnQobGVuIDwgNCA/IHZZZWFyLnRvU3RyaW5nKCkuc3Vic3RyKDAsIDQgLSBsZW4pICsgaVBhcnQgOiBpUGFydC5zdWJzdHIoMCwgNCkpO1xuXG4gICAgICAgICAgaWYgKCF2WWVhcikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdkRhdGUuc2V0RnVsbFllYXIodlllYXIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICB2RGF0ZS5zZXRIb3VycyhpU2VjKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgdkRhdGUuc2V0TWludXRlcyhpU2VjKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgdkRhdGUuc2V0U2Vjb25kcyhpU2VjKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgdmFyIG4gPSBpUGFydC5zdWJzdHIodkRpZ2l0KTtcblxuICAgICAgaWYgKG4ubGVuZ3RoID4gMCkge1xuICAgICAgICB2UGFydHMuc3BsaWNlKGkgKyAxLCAwLCBuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdkRhdGU7XG4gIH07XG5cbiAgX3Byb3RvLnBhcnNlRm9ybWF0ID0gZnVuY3Rpb24gcGFyc2VGb3JtYXQodkNoYXIsIHZEYXRlKSB7XG4gICAgdmFyIGZtdCA9IG51bGw7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIHZTZXR0aW5ncyA9IHNlbGYuZGF0ZVNldHRpbmdzLFxuICAgICAgICBiYWNrc2xhc2ggPSAvXFxcXD8oLj8pL2dpLFxuICAgICAgICBkb0Zvcm1hdCA9IGZ1bmN0aW9uIGRvRm9ybWF0KHQsIHMpIHtcbiAgICAgIHJldHVybiBmbXRbdF0gPyBmbXRbdF0oKSA6IHM7XG4gICAgfTtcblxuICAgIGZtdCA9IHtcbiAgICAgIGQ6IGZ1bmN0aW9uIGQoKSB7XG4gICAgICAgIHJldHVybiBfbHBhZChmbXQuaigpLCAyKTtcbiAgICAgIH0sXG4gICAgICBEOiBmdW5jdGlvbiBEKCkge1xuICAgICAgICByZXR1cm4gdlNldHRpbmdzLmRheXNTaG9ydFtmbXQudygpXTtcbiAgICAgIH0sXG4gICAgICBqOiBmdW5jdGlvbiBqKCkge1xuICAgICAgICByZXR1cm4gdkRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIGw6IGZ1bmN0aW9uIGwoKSB7XG4gICAgICAgIHJldHVybiB2U2V0dGluZ3MuZGF5c1tmbXQudygpXTtcbiAgICAgIH0sXG4gICAgICBOOiBmdW5jdGlvbiBOKCkge1xuICAgICAgICByZXR1cm4gZm10LncoKSB8fCA3O1xuICAgICAgfSxcbiAgICAgIHc6IGZ1bmN0aW9uIHcoKSB7XG4gICAgICAgIHJldHVybiB2RGF0ZS5nZXREYXkoKTtcbiAgICAgIH0sXG4gICAgICB6OiBmdW5jdGlvbiB6KCkge1xuICAgICAgICB2YXIgYSA9IG5ldyBEYXRlKGZtdC5ZKCksIGZtdC5uKCkgLSAxLCBmbXQuaigpKSxcbiAgICAgICAgICAgIGIgPSBuZXcgRGF0ZShmbXQuWSgpLCAwLCAxKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGEgLSBiKSAvIERBWSk7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVygpIHtcbiAgICAgICAgdmFyIGEgPSBuZXcgRGF0ZShmbXQuWSgpLCBmbXQubigpIC0gMSwgZm10LmooKSAtIGZtdC5OKCkgKyAzKTtcbiAgICAgICAgdmFyIGIgPSBuZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksIDAsIDQpO1xuICAgICAgICByZXR1cm4gX2xwYWQoMSArIE1hdGgucm91bmQoKGEgLSBiKSAvIERBWSAvIDcpLCAyKTtcbiAgICAgIH0sXG4gICAgICBGOiBmdW5jdGlvbiBGKCkge1xuICAgICAgICByZXR1cm4gdlNldHRpbmdzLm1vbnRoc1t2RGF0ZS5nZXRNb250aCgpXTtcbiAgICAgIH0sXG4gICAgICBtOiBmdW5jdGlvbiBtKCkge1xuICAgICAgICByZXR1cm4gX2xwYWQoZm10Lm4oKSwgMik7XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTSgpIHtcbiAgICAgICAgcmV0dXJuIHZTZXR0aW5ncy5tb250aHNTaG9ydFt2RGF0ZS5nZXRNb250aCgpXTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKCkge1xuICAgICAgICByZXR1cm4gdkRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICB9LFxuICAgICAgdDogZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGZtdC5ZKCksIGZtdC5uKCksIDApLmdldERhdGUoKTtcbiAgICAgIH0sXG4gICAgICBMOiBmdW5jdGlvbiBMKCkge1xuICAgICAgICB2YXIgWSA9IGZtdC5ZKCk7XG4gICAgICAgIHJldHVybiBZICUgNCA9PT0gMCAmJiBZICUgMTAwICE9PSAwIHx8IFkgJSA0MDAgPT09IDAgPyAxIDogMDtcbiAgICAgIH0sXG4gICAgICBvOiBmdW5jdGlvbiBvKCkge1xuICAgICAgICB2YXIgbiA9IGZtdC5uKCksXG4gICAgICAgICAgICBXID0gZm10LlcoKSxcbiAgICAgICAgICAgIFkgPSBmbXQuWSgpO1xuICAgICAgICByZXR1cm4gWSArIChuID09PSAxMiAmJiBXIDwgOSA/IDEgOiBuID09PSAxICYmIFcgPiA5ID8gLTEgOiAwKTtcbiAgICAgIH0sXG4gICAgICBZOiBmdW5jdGlvbiBZKCkge1xuICAgICAgICByZXR1cm4gdkRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIH0sXG4gICAgICB5OiBmdW5jdGlvbiB5KCkge1xuICAgICAgICByZXR1cm4gZm10LlkoKS50b1N0cmluZygpLnNsaWNlKC0yKTtcbiAgICAgIH0sXG4gICAgICBhOiBmdW5jdGlvbiBhKCkge1xuICAgICAgICByZXR1cm4gZm10LkEoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgfSxcbiAgICAgIEE6IGZ1bmN0aW9uIEEoKSB7XG4gICAgICAgIHZhciBuID0gZm10LkcoKSA8IDEyID8gMCA6IDE7XG4gICAgICAgIHJldHVybiB2U2V0dGluZ3MubWVyaWRpZW1bbl07XG4gICAgICB9LFxuICAgICAgQjogZnVuY3Rpb24gQigpIHtcbiAgICAgICAgdmFyIEggPSB2RGF0ZS5nZXRVVENIb3VycygpICogSE9VUjtcbiAgICAgICAgdmFyIGkgPSB2RGF0ZS5nZXRVVENNaW51dGVzKCkgKiA2MDtcbiAgICAgICAgdmFyIHMgPSB2RGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gICAgICAgIHJldHVybiBfbHBhZChNYXRoLmZsb29yKChIICsgaSArIHMgKyBIT1VSKSAvIDg2LjQpICUgMTAwMCwgMyk7XG4gICAgICB9LFxuICAgICAgZzogZnVuY3Rpb24gZygpIHtcbiAgICAgICAgcmV0dXJuIGZtdC5HKCkgJSAxMiB8fCAxMjtcbiAgICAgIH0sXG4gICAgICBHOiBmdW5jdGlvbiBHKCkge1xuICAgICAgICByZXR1cm4gdkRhdGUuZ2V0SG91cnMoKTtcbiAgICAgIH0sXG4gICAgICBoOiBmdW5jdGlvbiBoKCkge1xuICAgICAgICByZXR1cm4gX2xwYWQoZm10LmcoKSwgMik7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSCgpIHtcbiAgICAgICAgcmV0dXJuIF9scGFkKGZtdC5HKCksIDIpO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoKSB7XG4gICAgICAgIHJldHVybiBfbHBhZCh2RGF0ZS5nZXRNaW51dGVzKCksIDIpO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoKSB7XG4gICAgICAgIHJldHVybiBfbHBhZCh2RGF0ZS5nZXRTZWNvbmRzKCksIDIpO1xuICAgICAgfSxcbiAgICAgIHU6IGZ1bmN0aW9uIHUoKSB7XG4gICAgICAgIHJldHVybiBfbHBhZCh2RGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAqIDEwMDAsIDYpO1xuICAgICAgfSxcbiAgICAgIGU6IGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBzdHIgPSAvXFwoKC4qKVxcKS8uZXhlYyhTdHJpbmcodkRhdGUpKVsxXTtcbiAgICAgICAgcmV0dXJuIHN0ciB8fCAnQ29vcmRpbmF0ZWQgVW5pdmVyc2FsIFRpbWUnO1xuICAgICAgfSxcbiAgICAgIEk6IGZ1bmN0aW9uIEkoKSB7XG4gICAgICAgIHZhciBhID0gbmV3IERhdGUoZm10LlkoKSwgMCksXG4gICAgICAgICAgICBjID0gRGF0ZS5VVEMoZm10LlkoKSwgMCksXG4gICAgICAgICAgICBiID0gbmV3IERhdGUoZm10LlkoKSwgNiksXG4gICAgICAgICAgICBkID0gRGF0ZS5VVEMoZm10LlkoKSwgNik7XG4gICAgICAgIHJldHVybiBhIC0gYyAhPT0gYiAtIGQgPyAxIDogMDtcbiAgICAgIH0sXG4gICAgICBPOiBmdW5jdGlvbiBPKCkge1xuICAgICAgICB2YXIgdHpvID0gdkRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSxcbiAgICAgICAgICAgIGEgPSBNYXRoLmFicyh0em8pO1xuICAgICAgICByZXR1cm4gKHR6byA+IDAgPyAnLScgOiAnKycpICsgX2xwYWQoTWF0aC5mbG9vcihhIC8gNjApICogMTAwICsgYSAlIDYwLCA0KTtcbiAgICAgIH0sXG4gICAgICBQOiBmdW5jdGlvbiBQKCkge1xuICAgICAgICB2YXIgTyA9IGZtdC5PKCk7XG4gICAgICAgIHJldHVybiBPLnN1YnN0cigwLCAzKSArICc6JyArIE8uc3Vic3RyKDMsIDIpO1xuICAgICAgfSxcbiAgICAgIFQ6IGZ1bmN0aW9uIFQoKSB7XG4gICAgICAgIHZhciBzdHIgPSAoU3RyaW5nKHZEYXRlKS5tYXRjaChzZWxmLnR6UGFydHMpIHx8IFsnJ10pLnBvcCgpLnJlcGxhY2Uoc2VsZi50ekNsaXAsICcnKTtcbiAgICAgICAgcmV0dXJuIHN0ciB8fCAnVVRDJztcbiAgICAgIH0sXG4gICAgICBaOiBmdW5jdGlvbiBaKCkge1xuICAgICAgICByZXR1cm4gLXZEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDtcbiAgICAgIH0sXG4gICAgICBjOiBmdW5jdGlvbiBjKCkge1xuICAgICAgICByZXR1cm4gJ1ktbS1kXFxcXFRIOmk6c1AnLnJlcGxhY2UoYmFja3NsYXNoLCBkb0Zvcm1hdCk7XG4gICAgICB9LFxuICAgICAgcjogZnVuY3Rpb24gcigpIHtcbiAgICAgICAgcmV0dXJuICdELCBkIE0gWSBIOmk6cyBPJy5yZXBsYWNlKGJhY2tzbGFzaCwgZG9Gb3JtYXQpO1xuICAgICAgfSxcbiAgICAgIFU6IGZ1bmN0aW9uIFUoKSB7XG4gICAgICAgIHJldHVybiB2RGF0ZS5nZXRUaW1lKCkgLyAxMDAwIHx8IDA7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gZG9Gb3JtYXQodkNoYXIsIHZDaGFyKTtcbiAgfTtcblxuICBfcHJvdG8uZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uIGZvcm1hdERhdGUodkRhdGUsIHZGb3JtYXQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIEJBQ0tTTEFTSCA9ICdcXFxcJztcblxuICAgIGlmICh0eXBlb2YgdkRhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2RGF0ZSA9IHNlbGYucGFyc2VEYXRlKHZEYXRlLCB2Rm9ybWF0KTtcblxuICAgICAgaWYgKCF2RGF0ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodkRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB2YXIgdkRhdGVTdHIgPSAnJztcbiAgICAgIHZhciBsZW4gPSB2Rm9ybWF0Lmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgdkNoYXIgPSB2Rm9ybWF0LmNoYXJBdChpKTtcblxuICAgICAgICBpZiAodkNoYXIgPT09ICdTJyB8fCB2Q2hhciA9PT0gQkFDS1NMQVNIKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSA+IDAgJiYgdkZvcm1hdC5jaGFyQXQoaSAtIDEpID09PSBCQUNLU0xBU0gpIHtcbiAgICAgICAgICB2RGF0ZVN0ciArPSB2Q2hhcjtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdHIgPSBzZWxmLnBhcnNlRm9ybWF0KHZDaGFyLCB2RGF0ZSk7XG5cbiAgICAgICAgaWYgKGkgIT09IGxlbiAtIDEgJiYgc2VsZi5pbnRQYXJ0cy50ZXN0KHZDaGFyKSAmJiB2Rm9ybWF0LmNoYXJBdChpICsgMSkgPT09ICdTJykge1xuICAgICAgICAgIHZhciBuID0gcGFyc2VJbnQoc3RyKSB8fCAwO1xuICAgICAgICAgIHN0ciArPSBzZWxmLmRhdGVTZXR0aW5ncy5vcmRpbmFsKG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdkRhdGVTdHIgKz0gc3RyO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdkRhdGVTdHI7XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9O1xuXG4gIHJldHVybiBEYXRlRm9ybWF0dGVyO1xufSgpO1xuXG5leHBvcnQgeyBEYXRlRm9ybWF0dGVyIGFzIGRlZmF1bHQgfTsiLCJzb3J0YWJsZUNvbXBvbmVudC4kaW5qZWN0ID0gW1wiJHRpbWVvdXRcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvc29ydGFibGUuanMnO1xuaW1wb3J0ICduZ2VvL3Nhc3MvanF1ZXJ5LXVpLnNjc3MnO1xuaW1wb3J0ICdqcXVlcnktdWktdG91Y2gtcHVuY2gnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvU29ydGFibGUnLCBbXSk7XG5cbmZ1bmN0aW9uIHNvcnRhYmxlQ29tcG9uZW50KCR0aW1lb3V0KSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIHNvcnRhYmxlID0gc2NvcGUuJGV2YWwoYXR0cnMubmdlb1NvcnRhYmxlKSB8fCBbXTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KEFycmF5LmlzQXJyYXkoc29ydGFibGUpKTtcbiAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc29ydGFibGU7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNvcnRhYmxlLmxlbmd0aCAmJiAkdGltZW91dChyZXNldFVwRHJhZ0Ryb3AsIDApO1xuICAgICAgfSk7XG4gICAgICB2YXIgb3B0aW9uc09iamVjdCA9IHNjb3BlLiRldmFsKGF0dHJzLm5nZW9Tb3J0YWJsZU9wdGlvbnMpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBnZXRPcHRpb25zKG9wdGlvbnNPYmplY3QpO1xuICAgICAgdmFyIGNhbGxiYWNrRm4gPSBzY29wZS4kZXZhbChhdHRycy5uZ2VvU29ydGFibGVDYWxsYmFjayk7XG4gICAgICB2YXIgY2FsbGJhY2tDdHggPSBzY29wZS4kZXZhbChhdHRycy5uZ2VvU29ydGFibGVDYWxsYmFja0N0eCk7XG5cbiAgICAgIGZ1bmN0aW9uIHJlc2V0VXBEcmFnRHJvcCgpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbigpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoY2hpbGRyZW5baV0pLmRhdGEoJ2lkeCcsIGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNvcnRhYmxlRWxlbWVudCA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHNvcnRhYmxlRWxlbWVudC5kYXRhKCd1aS1zb3J0YWJsZScpKSB7XG4gICAgICAgICAgc29ydGFibGVFbGVtZW50Lm9mZignc29ydHVwZGF0ZScpO1xuICAgICAgICAgIHNvcnRhYmxlRWxlbWVudC5zb3J0YWJsZSgnZGVzdHJveScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNvcnRhYmxlT3B0aW9ucyA9IHtcbiAgICAgICAgICBheGlzOiAneScsXG4gICAgICAgICAgY2xhc3Nlczoge1xuICAgICAgICAgICAgJ3VpLXNvcnRhYmxlLWhlbHBlcic6IG9wdGlvbnMuZHJhZ2dlckNsYXNzTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVDbGFzc05hbWUpIHtcbiAgICAgICAgICBzb3J0YWJsZU9wdGlvbnMuaGFuZGxlID0gXCIuXCIgKyBvcHRpb25zLmhhbmRsZUNsYXNzTmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnBsYWNlaG9sZGVyQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgc29ydGFibGVPcHRpb25zLnBsYWNlaG9sZGVyID0gb3B0aW9ucy5wbGFjZWhvbGRlckNsYXNzTmFtZTtcbiAgICAgICAgICBzb3J0YWJsZU9wdGlvbnMuZm9yY2VQbGFjZWhvbGRlclNpemUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc29ydGFibGVFbGVtZW50LnNvcnRhYmxlKHNvcnRhYmxlT3B0aW9ucyk7XG4gICAgICAgIHNvcnRhYmxlRWxlbWVudC5vbignc29ydHVwZGF0ZScsIGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICB2YXIgb2xkSW5kZXggPSAkKHVpLml0ZW1bMF0pLmRhdGEoJ2lkeCcpO1xuICAgICAgICAgIHZhciBuZXdJbmRleCA9IHVpLml0ZW0uaW5kZXgoKTtcbiAgICAgICAgICAkKHVpLml0ZW1bMF0pLmRhdGEoJ2lkeCcsIG5ld0luZGV4KTtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc29ydGFibGUuc3BsaWNlKG5ld0luZGV4LCAwLCBzb3J0YWJsZS5zcGxpY2Uob2xkSW5kZXgsIDEpWzBdKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChjYWxsYmFja0ZuIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGNhbGxiYWNrRm4uYXBwbHkoY2FsbGJhY2tDdHgsIFtlbGVtZW50LCBzb3J0YWJsZV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICB2YXIgZGVmYXVsdEhhbmRsZUNsYXNzTmFtZSA9ICduZ2VvLXNvcnRhYmxlLWhhbmRsZSc7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldCA9IHtcbiAgICAgICAgICAgICdoYW5kbGVDbGFzc05hbWUnOiBkZWZhdWx0SGFuZGxlQ2xhc3NOYW1lXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVDbGFzc05hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0aW9ucy5oYW5kbGVDbGFzc05hbWUgPSBkZWZhdWx0SGFuZGxlQ2xhc3NOYW1lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldCA9IG9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmRpcmVjdGl2ZSgnbmdlb1NvcnRhYmxlJywgc29ydGFibGVDb21wb25lbnQpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsIlByaW50U2VydmljZS4kaW5qZWN0ID0gW1widXJsXCIsIFwiJGh0dHBcIiwgXCJnZXR0ZXh0Q2F0YWxvZ1wiLCBcIm5nZW9MYXllckhlbHBlclwiXTtcbmNyZWF0ZVByaW50U2VydmljZUZhY3RvcnkuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiZ2V0dGV4dENhdGFsb2dcIiwgXCJuZ2VvTGF5ZXJIZWxwZXJcIl07XG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvUHJpbnRWZWN0b3JFbmNvZGVyIGZyb20gJ25nZW8vcHJpbnQvVmVjdG9yRW5jb2Rlci5qcyc7XG5pbXBvcnQgbmdlb01hcExheWVySGVscGVyIGZyb20gJ25nZW8vbWFwL0xheWVySGVscGVyLmpzJztcbmltcG9ydCB7IHN0YWJsZVNvcnQgfSBmcm9tICdvbC9hcnJheS5qcyc7XG5pbXBvcnQgb2xMYXllckltYWdlIGZyb20gJ29sL2xheWVyL0ltYWdlLmpzJztcbmltcG9ydCBvbExheWVyVGlsZSBmcm9tICdvbC9sYXllci9UaWxlLmpzJztcbmltcG9ydCBvbExheWVyVmVjdG9yIGZyb20gJ29sL2xheWVyL1ZlY3Rvci5qcyc7XG5pbXBvcnQgKiBhcyBvbFNpemUgZnJvbSAnb2wvc2l6ZS5qcyc7XG5pbXBvcnQgb2xTb3VyY2VJbWFnZVdNUyBmcm9tICdvbC9zb3VyY2UvSW1hZ2VXTVMuanMnO1xuaW1wb3J0IG9sU291cmNlVGlsZVdNUyBmcm9tICdvbC9zb3VyY2UvVGlsZVdNUy5qcyc7XG5pbXBvcnQgb2xTb3VyY2VXTVRTIGZyb20gJ29sL3NvdXJjZS9XTVRTLmpzJztcbmltcG9ydCBvbFRpbGVncmlkV01UUyBmcm9tICdvbC90aWxlZ3JpZC9XTVRTLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBQcmludFNlcnZpY2UodXJsLCAkaHR0cCwgZ2V0dGV4dENhdGFsb2csIG5nZW9MYXllckhlbHBlcikge1xuICB0aGlzLnVybF8gPSB1cmw7XG4gIHRoaXMuJGh0dHBfID0gJGh0dHA7XG4gIHRoaXMuZ2V0dGV4dENhdGFsb2dfID0gZ2V0dGV4dENhdGFsb2c7XG4gIHRoaXMubmdlb0xheWVySGVscGVyXyA9IG5nZW9MYXllckhlbHBlcjtcbiAgdGhpcy52ZWN0b3JFbmNvZGVyID0gbmV3IG5nZW9QcmludFZlY3RvckVuY29kZXIoKTtcbiAgdGhpcy5wcmludE5hdGl2ZUFuZ2xlXyA9IHRydWU7XG4gIHRoaXMuZ29vZG5lc3NPZkZpdF87XG59XG5cblByaW50U2VydmljZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKHJlZiwgb3B0X2h0dHBDb25maWcpIHtcbiAgdmFyIGh0dHBDb25maWcgPSBvcHRfaHR0cENvbmZpZyAhPT0gdW5kZWZpbmVkID8gb3B0X2h0dHBDb25maWcgOiB7fTtcbiAgdmFyIHVybCA9IHRoaXMudXJsXyArIFwiL2NhbmNlbC9cIiArIHJlZjtcbiAgcmV0dXJuIHRoaXMuJGh0dHBfWydkZWxldGUnXSh1cmwsIGh0dHBDb25maWcpO1xufTtcblxuUHJpbnRTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVTcGVjID0gZnVuY3Rpb24gKG1hcCwgc2NhbGUsIHJvdGF0aW9uLCBkcGksIGxheW91dCwgZm9ybWF0LCBjdXN0b21BdHRyaWJ1dGVzLCBlbWFpbCwgZ29vZG5lc3NPZkZpdCkge1xuICB2YXIgc3BlY01hcCA9IHtcbiAgICBkcGk6IGRwaSxcbiAgICByb3RhdGlvbjogcm90YXRpb25cbiAgfTtcblxuICBpZiAoZ29vZG5lc3NPZkZpdCkge1xuICAgIHRoaXMuZ29vZG5lc3NPZkZpdF8gPSBnb29kbmVzc09mRml0O1xuICB9XG5cbiAgdGhpcy5lbmNvZGVNYXBfKG1hcCwgc2NhbGUsIHNwZWNNYXAsIGRwaSk7XG4gIHZhciBhdHRyaWJ1dGVzID0ge1xuICAgIG1hcDogc3BlY01hcFxuICB9O1xuICBPYmplY3QuYXNzaWduKGF0dHJpYnV0ZXMsIGN1c3RvbUF0dHJpYnV0ZXMpO1xuICB2YXIgbGFuZyA9IHRoaXMuZ2V0dGV4dENhdGFsb2dfLmdldEN1cnJlbnRMYW5ndWFnZSgpO1xuICB2YXIgc3BlYyA9IHtcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgIGZvcm1hdDogZm9ybWF0LFxuICAgIGxhbmc6IGxhbmcsXG4gICAgbGF5b3V0OiBsYXlvdXRcbiAgfTtcblxuICBpZiAoZW1haWwpIHtcbiAgICBzcGVjLnNtdHAgPSB7XG4gICAgICB0bzogZW1haWxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHNwZWM7XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmVuY29kZU1hcF8gPSBmdW5jdGlvbiAobWFwLCBzY2FsZSwgb2JqZWN0LCBkZXN0aW5hdGlvblByaW50RHBpKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICB2YXIgdmlld0NlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gIHZhciB2aWV3UHJvamVjdGlvbiA9IHZpZXcuZ2V0UHJvamVjdGlvbigpO1xuICB2YXIgdmlld1Jlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcblxuICBpZiAoIXZpZXdDZW50ZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgdmlld0NlbnRlcicpO1xuICB9XG5cbiAgaWYgKCF2aWV3UHJvamVjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2aWV3UHJvamVjdGlvbicpO1xuICB9XG5cbiAgaWYgKCF2aWV3UmVzb2x1dGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2aWV3UmVzb2x1dGlvbicpO1xuICB9XG5cbiAgb2JqZWN0LmNlbnRlciA9IHZpZXdDZW50ZXI7XG4gIG9iamVjdC5wcm9qZWN0aW9uID0gdmlld1Byb2plY3Rpb24uZ2V0Q29kZSgpO1xuICBvYmplY3Quc2NhbGUgPSBzY2FsZTtcbiAgb2JqZWN0LnVzZU5lYXJlc3RTY2FsZSA9IGZhbHNlO1xuICBvYmplY3QubGF5ZXJzID0gW107XG4gIHZhciBtYXBMYXllckdyb3VwID0gbWFwLmdldExheWVyR3JvdXAoKTtcblxuICBpZiAoIW1hcExheWVyR3JvdXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgbWFwTGF5ZXJHcm91cCcpO1xuICB9XG5cbiAgdGhpcy5wcmludE5hdGl2ZUFuZ2xlXyA9IG1hcExheWVyR3JvdXAuZ2V0KCdwcmludE5hdGl2ZUFuZ2xlJykgIT09IGZhbHNlO1xuICB2YXIgbGF5ZXJzID0gdGhpcy5uZ2VvTGF5ZXJIZWxwZXJfLmdldEZsYXRMYXllcnMobWFwTGF5ZXJHcm91cCk7XG4gIHN0YWJsZVNvcnQobGF5ZXJzLCBmdW5jdGlvbiAobGF5ZXJfYSwgbGF5ZXJfYikge1xuICAgIHJldHVybiAobGF5ZXJfYS5nZXRaSW5kZXgoKSB8fCAwKSAtIChsYXllcl9iLmdldFpJbmRleCgpIHx8IDApO1xuICB9KTtcbiAgbGF5ZXJzID0gbGF5ZXJzLnNsaWNlKCkucmV2ZXJzZSgpO1xuICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICBpZiAobGF5ZXIuZ2V0VmlzaWJsZSgpKSB7XG4gICAgICBfdGhpcy5lbmNvZGVMYXllcihvYmplY3QubGF5ZXJzLCBsYXllciwgdmlld1Jlc29sdXRpb24sIGRlc3RpbmF0aW9uUHJpbnREcGkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmVuY29kZUxheWVyID0gZnVuY3Rpb24gKGFyciwgbGF5ZXIsIHJlc29sdXRpb24sIGRlc3RpbmF0aW9uUHJpbnREcGkpIHtcbiAgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllckltYWdlKSB7XG4gICAgdGhpcy5lbmNvZGVJbWFnZUxheWVyXyhhcnIsIGxheWVyKTtcbiAgfSBlbHNlIGlmIChsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJUaWxlKSB7XG4gICAgdGhpcy5lbmNvZGVUaWxlTGF5ZXJfKGFyciwgbGF5ZXIpO1xuICB9IGVsc2UgaWYgKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllclZlY3Rvcikge1xuICAgIHRoaXMuZW5jb2RlVmVjdG9yTGF5ZXIoYXJyLCBsYXllciwgcmVzb2x1dGlvbiwgZGVzdGluYXRpb25QcmludERwaSk7XG4gIH1cbn07XG5cblByaW50U2VydmljZS5wcm90b3R5cGUuZW5jb2RlVmVjdG9yTGF5ZXIgPSBmdW5jdGlvbiAoYXJyLCBsYXllciwgcmVzb2x1dGlvbiwgZGVzdGluYXRpb25QcmludERwaSkge1xuICB0aGlzLnZlY3RvckVuY29kZXIuZW5jb2RlVmVjdG9yTGF5ZXIoYXJyLCBsYXllciwgcmVzb2x1dGlvbiwgZGVzdGluYXRpb25QcmludERwaSwgdGhpcy5nb29kbmVzc09mRml0Xyk7XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmVuY29kZUltYWdlTGF5ZXJfID0gZnVuY3Rpb24gKGFyciwgbGF5ZXIpIHtcbiAgaWYgKCEobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVySW1hZ2UpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdsYXllciBub3QgaW5zdGFuY2Ugb2Ygb2xMYXllckltYWdlJyk7XG4gIH1cblxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlSW1hZ2VXTVMpIHtcbiAgICB0aGlzLmVuY29kZUltYWdlV21zTGF5ZXJfKGFyciwgbGF5ZXIpO1xuICB9XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmVuY29kZUltYWdlV21zTGF5ZXJfID0gZnVuY3Rpb24gKGFyciwgbGF5ZXIpIHtcbiAgaWYgKCEobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVySW1hZ2UpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdsYXllciBub3QgaW5zdGFuY2Ugb2Ygb2xMYXllckltYWdlJyk7XG4gIH1cblxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgaWYgKCEoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VJbWFnZVdNUykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NvdXJjZSBub3QgaW5zdGFuY2Ugb2Ygb2xTb3VyY2VJbWFnZVdNUycpO1xuICB9XG5cbiAgdmFyIHVybCA9IHNvdXJjZS5nZXRVcmwoKTtcblxuICBpZiAodXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmVuY29kZVdtc0xheWVyXyhhcnIsIGxheWVyLCB1cmwsIHNvdXJjZS5nZXRQYXJhbXMoKSk7XG4gIH1cbn07XG5cblByaW50U2VydmljZS5wcm90b3R5cGUuZW5jb2RlV21zTGF5ZXJfID0gZnVuY3Rpb24gKGFyciwgbGF5ZXIsIHVybCwgcGFyYW1zKSB7XG4gIGlmICh1cmwuc3RhcnRzV2l0aCgnLy8nKSkge1xuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIHVybDtcbiAgfVxuXG4gIHZhciB1cmxfdXJsID0gbmV3IFVSTCh1cmwpO1xuICB2YXIgY3VzdG9tUGFyYW1zID0ge1xuICAgICdUUkFOU1BBUkVOVCc6ICd0cnVlJ1xuICB9O1xuXG4gIGlmICh1cmxfdXJsLnNlYXJjaFBhcmFtcykge1xuICAgIHVybF91cmwuc2VhcmNoUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIGN1c3RvbVBhcmFtc1trZXldID0gdmFsdWU7XG4gICAgfSk7XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgdmFyIHZhbHVlID0gcGFyYW1zW2tleV07XG5cbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VzdG9tUGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBkZWxldGUgY3VzdG9tUGFyYW1zLkxBWUVSUztcbiAgZGVsZXRlIGN1c3RvbVBhcmFtcy5GT1JNQVQ7XG4gIGRlbGV0ZSBjdXN0b21QYXJhbXMuU0VSVkVSVFlQRTtcbiAgZGVsZXRlIGN1c3RvbVBhcmFtcy5WRVJTSU9OO1xuICBkZWxldGUgY3VzdG9tUGFyYW1zLlNUWUxFUztcbiAgdmFyIHNlcnZlclR5cGUgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKHBhcmFtcy5TRVJWRVJUWVBFICE9PSAnYXJjZ2lzJykge1xuICAgIHNlcnZlclR5cGUgPSBwYXJhbXMuU0VSVkVSVFlQRTtcbiAgfVxuXG4gIHZhciBvYmplY3QgPSB7XG4gICAgYmFzZVVSTDogZ2V0QWJzb2x1dGVVcmxfKHVybF91cmwub3JpZ2luICsgdXJsX3VybC5wYXRobmFtZSksXG4gICAgaW1hZ2VGb3JtYXQ6ICdGT1JNQVQnIGluIHBhcmFtcyA/IHBhcmFtcy5GT1JNQVQgOiAnaW1hZ2UvcG5nJyxcbiAgICBsYXllcnM6IHBhcmFtcy5MQVlFUlMuc3BsaXQoJywnKSxcbiAgICBjdXN0b21QYXJhbXM6IGN1c3RvbVBhcmFtcyxcbiAgICBzZXJ2ZXJUeXBlOiBzZXJ2ZXJUeXBlLFxuICAgIHR5cGU6ICd3bXMnLFxuICAgIG9wYWNpdHk6IHRoaXMuZ2V0T3BhY2l0eU9ySW5oZXJpdGVkXyhsYXllciksXG4gICAgdmVyc2lvbjogcGFyYW1zLlZFUlNJT04sXG4gICAgdXNlTmF0aXZlQW5nbGU6IHRoaXMucHJpbnROYXRpdmVBbmdsZV8sXG4gICAgc3R5bGVzOiBwYXJhbXMuU1RZTEVTID8gcGFyYW1zLlNUWUxFUy5zcGxpdCgnLCcpIDogWycnXVxuICB9O1xuICBhcnIucHVzaChvYmplY3QpO1xufTtcblxuZnVuY3Rpb24gZ2V0QWJzb2x1dGVVcmxfKHVybCkge1xuICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgYS5ocmVmID0gZW5jb2RlVVJJKHVybCk7XG4gIHJldHVybiBkZWNvZGVVUkkoYS5ocmVmKTtcbn1cblxuUHJpbnRTZXJ2aWNlLnByb3RvdHlwZS5lbmNvZGVUaWxlTGF5ZXJfID0gZnVuY3Rpb24gKGFyciwgbGF5ZXIpIHtcbiAgaWYgKCEobGF5ZXIgaW5zdGFuY2VvZiBvbExheWVyVGlsZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2xheWVyIG5vdCBpbnN0YW5jZSBvZiBvbExheWVyVGlsZScpO1xuICB9XG5cbiAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVdNVFMpIHtcbiAgICB0aGlzLmVuY29kZVRpbGVXbXRzTGF5ZXJfKGFyciwgbGF5ZXIpO1xuICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIG9sU291cmNlVGlsZVdNUykge1xuICAgIHRoaXMuZW5jb2RlVGlsZVdtc0xheWVyXyhhcnIsIGxheWVyKTtcbiAgfVxufTtcblxuUHJpbnRTZXJ2aWNlLnByb3RvdHlwZS5lbmNvZGVUaWxlV210c0xheWVyXyA9IGZ1bmN0aW9uIChhcnIsIGxheWVyKSB7XG4gIGlmICghKGxheWVyIGluc3RhbmNlb2Ygb2xMYXllclRpbGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdsYXllciBub3QgaW5zdGFuY2Ugb2Ygb2xMYXllclRpbGUnKTtcbiAgfVxuXG4gIHZhciBzb3VyY2UgPSBsYXllci5nZXRTb3VyY2UoKTtcblxuICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBvbFNvdXJjZVdNVFMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzb3VyY2Ugbm90IGluc3RhbmNlIG9mIG9sU291cmNlV01UUycpO1xuICB9XG5cbiAgdmFyIHByb2plY3Rpb24gPSBzb3VyY2UuZ2V0UHJvamVjdGlvbigpO1xuXG4gIGlmICghcHJvamVjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBwcm9qZWN0aW9uJyk7XG4gIH1cblxuICB2YXIgbWV0ZXJzUGVyVW5pdCA9IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuXG4gIGlmICghbWV0ZXJzUGVyVW5pdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZXRlcnNQZXJVbml0Jyk7XG4gIH1cblxuICB2YXIgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWQoKTtcblxuICBpZiAoISh0aWxlR3JpZCBpbnN0YW5jZW9mIG9sVGlsZWdyaWRXTVRTKSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndGlsZUdyaWQgbm90IGluc3RhbmNlIG9mIG9sVGlsZWdyaWRXTVRTJyk7XG4gIH1cblxuICB2YXIgbWF0cml4SWRzID0gdGlsZUdyaWQuZ2V0TWF0cml4SWRzKCk7XG4gIHZhciBtYXRyaWNlcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IG1hdHJpeElkcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2UoaSk7XG4gICAgbWF0cmljZXMucHVzaCh7XG4gICAgICBpZGVudGlmaWVyOiBtYXRyaXhJZHNbaV0sXG4gICAgICBzY2FsZURlbm9taW5hdG9yOiB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKGkpICogbWV0ZXJzUGVyVW5pdCAvIDAuMjhlLTMsXG4gICAgICB0aWxlU2l6ZTogb2xTaXplLnRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZShpKSksXG4gICAgICB0b3BMZWZ0Q29ybmVyOiB0aWxlR3JpZC5nZXRPcmlnaW4oaSksXG4gICAgICBtYXRyaXhTaXplOiBbdGlsZVJhbmdlLm1heFggLSB0aWxlUmFuZ2UubWluWCwgdGlsZVJhbmdlLm1heFkgLSB0aWxlUmFuZ2UubWluWV1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBkaW1lbnNpb25zID0gc291cmNlLmdldERpbWVuc2lvbnMoKTtcbiAgdmFyIGRpbWVuc2lvbktleXMgPSBPYmplY3Qua2V5cyhkaW1lbnNpb25zKTtcbiAgdmFyIG9iamVjdCA9IHtcbiAgICBiYXNlVVJMOiB0aGlzLmdldFdtdHNVcmxfKHNvdXJjZSksXG4gICAgZGltZW5zaW9uczogZGltZW5zaW9uS2V5cyxcbiAgICBkaW1lbnNpb25QYXJhbXM6IGRpbWVuc2lvbnMsXG4gICAgaW1hZ2VGb3JtYXQ6IHNvdXJjZS5nZXRGb3JtYXQoKSxcbiAgICBsYXllcjogc291cmNlLmdldExheWVyKCksXG4gICAgbWF0cmljZXM6IG1hdHJpY2VzLFxuICAgIG1hdHJpeFNldDogc291cmNlLmdldE1hdHJpeFNldCgpLFxuICAgIG9wYWNpdHk6IHRoaXMuZ2V0T3BhY2l0eU9ySW5oZXJpdGVkXyhsYXllciksXG4gICAgcmVxdWVzdEVuY29kaW5nOiBzb3VyY2UuZ2V0UmVxdWVzdEVuY29kaW5nKCksXG4gICAgc3R5bGU6IHNvdXJjZS5nZXRTdHlsZSgpLFxuICAgIHR5cGU6ICdXTVRTJyxcbiAgICB2ZXJzaW9uOiBzb3VyY2UuZ2V0VmVyc2lvbigpXG4gIH07XG4gIGFyci5wdXNoKG9iamVjdCk7XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmVuY29kZVRpbGVXbXNMYXllcl8gPSBmdW5jdGlvbiAoYXJyLCBsYXllcikge1xuICBpZiAoIShsYXllciBpbnN0YW5jZW9mIG9sTGF5ZXJUaWxlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignbGF5ZXIgbm90IGluc3RhbmNlIG9mIG9sTGF5ZXJUaWxlJyk7XG4gIH1cblxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG5cbiAgaWYgKCEoc291cmNlIGluc3RhbmNlb2Ygb2xTb3VyY2VUaWxlV01TKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignc291cmNlIG5vdCBpbnN0YW5jZSBvZiBvbFNvdXJjZVRpbGVXTVMnKTtcbiAgfVxuXG4gIHZhciB1cmxzID0gc291cmNlLmdldFVybHMoKTtcblxuICBpZiAoIXVybHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdXJscycpO1xuICB9XG5cbiAgdGhpcy5lbmNvZGVXbXNMYXllcl8oYXJyLCBsYXllciwgdXJsc1swXSwgc291cmNlLmdldFBhcmFtcygpKTtcbn07XG5cblByaW50U2VydmljZS5wcm90b3R5cGUuZ2V0V210c1VybF8gPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gIHZhciB1cmxzID0gc291cmNlLmdldFVybHMoKTtcblxuICBpZiAoIXVybHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdXJscycpO1xuICB9XG5cbiAgcmV0dXJuIGdldEFic29sdXRlVXJsXyh1cmxzWzBdKTtcbn07XG5cblByaW50U2VydmljZS5wcm90b3R5cGUuZ2V0T3BhY2l0eU9ySW5oZXJpdGVkXyA9IGZ1bmN0aW9uIChsYXllcikge1xuICBpZiAobGF5ZXIuZ2V0KCdpbmhlcml0ZWRPcGFjaXR5JykgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBsYXllci5nZXQoJ2luaGVyaXRlZE9wYWNpdHknKTtcbiAgfVxuXG4gIHJldHVybiBsYXllci5nZXRPcGFjaXR5KCk7XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmNyZWF0ZVJlcG9ydCA9IGZ1bmN0aW9uIChwcmludFNwZWMsIG9wdF9odHRwQ29uZmlnKSB7XG4gIHZhciBmb3JtYXQgPSBwcmludFNwZWMuZm9ybWF0IHx8ICdwZGYnO1xuICB2YXIgdXJsID0gdGhpcy51cmxfICsgXCIvcmVwb3J0LlwiICsgZm9ybWF0O1xuICB2YXIgaHR0cENvbmZpZyA9IHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnXG4gICAgfVxuICB9O1xuICBPYmplY3QuYXNzaWduKGh0dHBDb25maWcsIG9wdF9odHRwQ29uZmlnICE9PSB1bmRlZmluZWQgPyBvcHRfaHR0cENvbmZpZyA6IHt9KTtcbiAgcmV0dXJuIHRoaXMuJGh0dHBfLnBvc3QodXJsLCBwcmludFNwZWMsIGh0dHBDb25maWcpO1xufTtcblxuUHJpbnRTZXJ2aWNlLnByb3RvdHlwZS5nZXRTdGF0dXMgPSBmdW5jdGlvbiAocmVmLCBvcHRfaHR0cENvbmZpZykge1xuICB2YXIgaHR0cENvbmZpZyA9IG9wdF9odHRwQ29uZmlnICE9PSB1bmRlZmluZWQgPyBvcHRfaHR0cENvbmZpZyA6IHt9O1xuICB2YXIgdXJsID0gdGhpcy51cmxfICsgXCIvc3RhdHVzL1wiICsgcmVmICsgXCIuanNvblwiO1xuICByZXR1cm4gdGhpcy4kaHR0cF8uZ2V0KHVybCwgaHR0cENvbmZpZyk7XG59O1xuXG5QcmludFNlcnZpY2UucHJvdG90eXBlLmdldFJlcG9ydFVybCA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgcmV0dXJuIHRoaXMudXJsXyArIFwiL3JlcG9ydC9cIiArIHJlZjtcbn07XG5cblByaW50U2VydmljZS5wcm90b3R5cGUuZ2V0Q2FwYWJpbGl0aWVzID0gZnVuY3Rpb24gKG9wdF9odHRwQ29uZmlnKSB7XG4gIHZhciBodHRwQ29uZmlnID0gb3B0X2h0dHBDb25maWcgIT09IHVuZGVmaW5lZCA/IG9wdF9odHRwQ29uZmlnIDoge1xuICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICB9O1xuICB2YXIgdXJsID0gdGhpcy51cmxfICsgXCIvY2FwYWJpbGl0aWVzLmpzb25cIjtcbiAgcmV0dXJuIHRoaXMuJGh0dHBfLmdldCh1cmwsIGh0dHBDb25maWcpO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlUHJpbnRTZXJ2aWNlRmFjdG9yeSgkaHR0cCwgZ2V0dGV4dENhdGFsb2csIG5nZW9MYXllckhlbHBlcikge1xuICByZXR1cm4gZnVuY3Rpb24gKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJpbnRTZXJ2aWNlKHVybCwgJGh0dHAsIGdldHRleHRDYXRhbG9nLCBuZ2VvTGF5ZXJIZWxwZXIpO1xuICB9O1xufVxuXG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9QcmludCcsIFtuZ2VvTWFwTGF5ZXJIZWxwZXIubmFtZV0pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9QcmludFNlcnZpY2UnLCBQcmludFNlcnZpY2UpO1xubW9kdWxlLmZhY3RvcnkoJ25nZW9DcmVhdGVQcmludCcsIGNyZWF0ZVByaW50U2VydmljZUZhY3RvcnkpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuZXhwb3J0IGZ1bmN0aW9uIFByaW50VXRpbHMoKSB7XG4gIHRoaXMuZXh0ZW50SGFsZkhvcml6b250YWxEaXN0YW5jZV8gPSAtMTtcbiAgdGhpcy5leHRlbnRIYWxmVmVydGljYWxEaXN0YW5jZV8gPSAtMTtcbn1cbmV4cG9ydCB2YXIgSU5DSEVTX1BFUl9NRVRFUiA9IDM5LjM3O1xuZXhwb3J0IHZhciBET1RTX1BFUl9JTkNIID0gNzI7XG5cblByaW50VXRpbHMucHJvdG90eXBlLmdldE9wdGltYWxTY2FsZSA9IGZ1bmN0aW9uIChtYXBTaXplLCBtYXBSZXNvbHV0aW9uLCBwcmludE1hcFNpemUsIHByaW50TWFwU2NhbGVzKSB7XG4gIHZhciBtYXBXaWR0aCA9IG1hcFNpemVbMF0gKiBtYXBSZXNvbHV0aW9uO1xuICB2YXIgbWFwSGVpZ2h0ID0gbWFwU2l6ZVsxXSAqIG1hcFJlc29sdXRpb247XG4gIHZhciBzY2FsZVdpZHRoID0gbWFwV2lkdGggKiBJTkNIRVNfUEVSX01FVEVSICogRE9UU19QRVJfSU5DSCAvIHByaW50TWFwU2l6ZVswXTtcbiAgdmFyIHNjYWxlSGVpZ2h0ID0gbWFwSGVpZ2h0ICogSU5DSEVTX1BFUl9NRVRFUiAqIERPVFNfUEVSX0lOQ0ggLyBwcmludE1hcFNpemVbMV07XG4gIHZhciBzY2FsZSA9IE1hdGgubWluKHNjYWxlV2lkdGgsIHNjYWxlSGVpZ2h0KTtcbiAgdmFyIG9wdGltYWwgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMCwgaWkgPSBwcmludE1hcFNjYWxlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgaWYgKHNjYWxlID4gcHJpbnRNYXBTY2FsZXNbaV0pIHtcbiAgICAgIG9wdGltYWwgPSBwcmludE1hcFNjYWxlc1tpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3B0aW1hbDtcbn07XG5cblByaW50VXRpbHMucHJvdG90eXBlLmdldE9wdGltYWxSZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1hcFNpemUsIHByaW50TWFwU2l6ZSwgcHJpbnRNYXBTY2FsZSkge1xuICB2YXIgZG90c1Blck1ldGVyID0gRE9UU19QRVJfSU5DSCAqIElOQ0hFU19QRVJfTUVURVI7XG4gIHZhciByZXNvbHV0aW9uWCA9IHByaW50TWFwU2l6ZVswXSAqIHByaW50TWFwU2NhbGUgLyAoZG90c1Blck1ldGVyICogbWFwU2l6ZVswXSk7XG4gIHZhciByZXNvbHV0aW9uWSA9IHByaW50TWFwU2l6ZVsxXSAqIHByaW50TWFwU2NhbGUgLyAoZG90c1Blck1ldGVyICogbWFwU2l6ZVsxXSk7XG4gIHZhciBvcHRpbWFsUmVzb2x1dGlvbiA9IE1hdGgubWF4KHJlc29sdXRpb25YLCByZXNvbHV0aW9uWSk7XG4gIHJldHVybiBvcHRpbWFsUmVzb2x1dGlvbjtcbn07XG5cblByaW50VXRpbHMucHJvdG90eXBlLmdldEJvdHRvbUxlZnRDb3JuZXIgPSBmdW5jdGlvbiAobWFwQ2VudGVyKSB7XG4gIHJldHVybiBbbWFwQ2VudGVyWzBdIC0gdGhpcy5leHRlbnRIYWxmSG9yaXpvbnRhbERpc3RhbmNlXywgbWFwQ2VudGVyWzFdIC0gdGhpcy5leHRlbnRIYWxmVmVydGljYWxEaXN0YW5jZV9dO1xufTtcblxuUHJpbnRVdGlscy5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRDb3JuZXIgPSBmdW5jdGlvbiAobWFwQ2VudGVyKSB7XG4gIHJldHVybiBbbWFwQ2VudGVyWzBdICsgdGhpcy5leHRlbnRIYWxmSG9yaXpvbnRhbERpc3RhbmNlXywgbWFwQ2VudGVyWzFdIC0gdGhpcy5leHRlbnRIYWxmVmVydGljYWxEaXN0YW5jZV9dO1xufTtcblxuUHJpbnRVdGlscy5wcm90b3R5cGUuZ2V0VXBMZWZ0Q29ybmVyID0gZnVuY3Rpb24gKG1hcENlbnRlcikge1xuICByZXR1cm4gW21hcENlbnRlclswXSAtIHRoaXMuZXh0ZW50SGFsZkhvcml6b250YWxEaXN0YW5jZV8sIG1hcENlbnRlclsxXSArIHRoaXMuZXh0ZW50SGFsZlZlcnRpY2FsRGlzdGFuY2VfXTtcbn07XG5cblByaW50VXRpbHMucHJvdG90eXBlLmdldFVwUmlnaHRDb3JuZXIgPSBmdW5jdGlvbiAobWFwQ2VudGVyKSB7XG4gIHJldHVybiBbbWFwQ2VudGVyWzBdICsgdGhpcy5leHRlbnRIYWxmSG9yaXpvbnRhbERpc3RhbmNlXywgbWFwQ2VudGVyWzFdICsgdGhpcy5leHRlbnRIYWxmVmVydGljYWxEaXN0YW5jZV9dO1xufTtcblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUHJpbnRVdGlscycsIFtdKTtcbm1vZHVsZS5zZXJ2aWNlKCduZ2VvUHJpbnRVdGlscycsIFByaW50VXRpbHMpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IHsgcmdiQXJyYXlUb0hleCB9IGZyb20gJ25nZW8vdXRpbHMuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIGFzIG9sVXRpbEdldFVpZCB9IGZyb20gJ29sL3V0aWwuanMnO1xuaW1wb3J0IG9sRm9ybWF0R2VvSlNPTiBmcm9tICdvbC9mb3JtYXQvR2VvSlNPTi5qcyc7XG5pbXBvcnQgb2xTdHlsZVJlZ3VsYXJTaGFwZSBmcm9tICdvbC9zdHlsZS9SZWd1bGFyU2hhcGUuanMnO1xuaW1wb3J0IHsgdG9EZWdyZWVzIH0gZnJvbSAnb2wvbWF0aC5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0IHsgU3R5bGUgfSBmcm9tICdvbC9zdHlsZSc7XG5pbXBvcnQgb2xTdHlsZUljb24gZnJvbSAnb2wvc3R5bGUvSWNvbi5qcyc7XG5pbXBvcnQgb2xTdHlsZUNpcmNsZSBmcm9tICdvbC9zdHlsZS9DaXJjbGUuanMnO1xuaW1wb3J0IHsgYXNBcnJheSBhcyBhc0NvbG9yQXJyYXkgfSBmcm9tICdvbC9jb2xvci5qcyc7XG5pbXBvcnQgeyBkcGkgfSBmcm9tICduZ2VvL3V0aWxzLmpzJztcblxuZnVuY3Rpb24gVmVjdG9yRW5jb2RlcigpIHtcbiAgdGhpcy5nZW9qc29uRm9ybWF0ID0gbmV3IG9sRm9ybWF0R2VvSlNPTigpO1xufVxuXG52YXIgUHJpbnRTdHlsZVR5cGUgPSB7XG4gIExJTkVfU1RSSU5HOiAnTGluZVN0cmluZycsXG4gIFBPSU5UOiAnUG9pbnQnLFxuICBQT0xZR09OOiAnUG9seWdvbidcbn07XG52YXIgUFJJTlRfU1RZTEVfVFlQRVMgPSB7XG4gICdMaW5lU3RyaW5nJzogUHJpbnRTdHlsZVR5cGUuTElORV9TVFJJTkcsXG4gICdQb2ludCc6IFByaW50U3R5bGVUeXBlLlBPSU5ULFxuICAnUG9seWdvbic6IFByaW50U3R5bGVUeXBlLlBPTFlHT04sXG4gICdNdWx0aUxpbmVTdHJpbmcnOiBQcmludFN0eWxlVHlwZS5MSU5FX1NUUklORyxcbiAgJ011bHRpUG9pbnQnOiBQcmludFN0eWxlVHlwZS5QT0lOVCxcbiAgJ011bHRpUG9seWdvbic6IFByaW50U3R5bGVUeXBlLlBPTFlHT05cbn07XG52YXIgRkVBVFVSRV9TVFlMRV9QUk9QID0gJ19uZ2VvX3N0eWxlJztcblxuVmVjdG9yRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlVmVjdG9yTGF5ZXIgPSBmdW5jdGlvbiAobWFwRmlzaFByaW50TGF5ZXIsIGxheWVyLCByZXNvbHV0aW9uLCBkZXN0aW5hdGlvblByaW50RHBpLCBnb29kbmVzc09mRml0KSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICB2YXIgZmVhdHVyZXMgPSBzb3VyY2UuZ2V0RmVhdHVyZXMoKTtcbiAgdmFyIGZlYXR1cmVzRnJvbVN0eWxlID0gW107XG4gIHZhciBnZW9qc29uRmVhdHVyZXMgPSBbXTtcbiAgdmFyIG1hcGZpc2hTdHlsZU9iamVjdCA9IHtcbiAgICB2ZXJzaW9uOiAyXG4gIH07XG5cbiAgdmFyIHBhcnNlRmVhdHVyZSA9IGZ1bmN0aW9uIHBhcnNlRmVhdHVyZShvcmlnaW5hbEZlYXR1cmUpIHtcbiAgICB2YXIgc3R5bGVEYXRhID0gbnVsbDtcbiAgICB2YXIgc3R5bGVGdW5jdGlvbiA9IG9yaWdpbmFsRmVhdHVyZS5nZXRTdHlsZUZ1bmN0aW9uKCkgfHwgbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuXG4gICAgaWYgKHN0eWxlRnVuY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3R5bGVEYXRhID0gc3R5bGVGdW5jdGlvbi5jYWxsKGxheWVyLCBvcmlnaW5hbEZlYXR1cmUsIHJlc29sdXRpb24pO1xuICAgIH1cblxuICAgIGlmICghc3R5bGVEYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHN0eWxlcyA9IEFycmF5LmlzQXJyYXkoc3R5bGVEYXRhKSA/IHN0eWxlRGF0YSA6IFtzdHlsZURhdGFdO1xuICAgIHN0eWxlcyA9IHN0eWxlcy5maWx0ZXIoZnVuY3Rpb24gKHN0eWxlKSB7XG4gICAgICBpZiAoc3R5bGUuZ2V0R2VvbWV0cnkoKSkge1xuICAgICAgICBmZWF0dXJlc0Zyb21TdHlsZS5wdXNoKF90aGlzLm5ld0ZlYXR1cmVGcm9tU3R5bGVfKHN0eWxlKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICBpZiAoc3R5bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBnZW9tZXRyeSA9IG9yaWdpbmFsRmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuXG4gICAgaWYgKCFnZW9tZXRyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBnZW9tZXRyeVR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgdmFyIHN0eWxlc1ZhbHVlID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHN0eWxlcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgc3R5bGUgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHN0eWxlc1ZhbHVlLnB1c2gob2xVdGlsR2V0VWlkKHN0eWxlKS50b1N0cmluZygpKTtcbiAgICB9XG5cbiAgICB2YXIgc3R5bGVWYWx1ZSA9IHN0eWxlc1ZhbHVlLmpvaW4oJywnKSArIFwiLVwiICsgZ2VvbWV0cnlUeXBlO1xuICAgIHZhciBzdHlsZUtleSA9IFwiW1wiICsgRkVBVFVSRV9TVFlMRV9QUk9QICsgXCIgPSAnXCIgKyBzdHlsZVZhbHVlICsgXCInXVwiO1xuXG4gICAgdmFyIGdlb2pzb25GZWF0dXJlID0gX3RoaXMuZ2VvanNvbkZvcm1hdC53cml0ZUZlYXR1cmVPYmplY3Qob3JpZ2luYWxGZWF0dXJlKTtcblxuICAgIGlmIChnZW9qc29uRmVhdHVyZS5wcm9wZXJ0aWVzID09PSBudWxsKSB7XG4gICAgICBnZW9qc29uRmVhdHVyZS5wcm9wZXJ0aWVzID0ge307XG4gICAgfVxuXG4gICAgZ2VvanNvbkZlYXR1cmUucHJvcGVydGllc1tGRUFUVVJFX1NUWUxFX1BST1BdID0gc3R5bGVWYWx1ZTtcbiAgICBnZW9qc29uRmVhdHVyZXMucHVzaChnZW9qc29uRmVhdHVyZSk7XG5cbiAgICBpZiAobWFwZmlzaFN0eWxlT2JqZWN0W3N0eWxlS2V5XSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzdHlsZU9iamVjdCA9IHtcbiAgICAgIHN5bWJvbGl6ZXJzOiBbXVxuICAgIH07XG4gICAgbWFwZmlzaFN0eWxlT2JqZWN0W3N0eWxlS2V5XSA9IHN0eWxlT2JqZWN0O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2Uoc3R5bGVzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgIHZhciBfc3R5bGUgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIHZhciBtYXBmaXNoUHJpbnRTdHlsZSA9IF90aGlzLmVuY29kZVZlY3RvclN0eWxlXyhnZW9tZXRyeVR5cGUsIHJlc29sdXRpb24sIF9zdHlsZSwgZGVzdGluYXRpb25QcmludERwaSwgZ29vZG5lc3NPZkZpdCk7XG5cbiAgICAgIGlmIChtYXBmaXNoUHJpbnRTdHlsZSkge1xuICAgICAgICBzdHlsZU9iamVjdC5zeW1ib2xpemVycy5wdXNoKG1hcGZpc2hQcmludFN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgIHJldHVybiBwYXJzZUZlYXR1cmUoZmVhdHVyZSk7XG4gIH0pO1xuICBmZWF0dXJlc0Zyb21TdHlsZS5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgcmV0dXJuIHBhcnNlRmVhdHVyZShmZWF0dXJlKTtcbiAgfSk7XG5cbiAgaWYgKGdlb2pzb25GZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGdlb2pzb25GZWF0dXJlQ29sbGVjdGlvbiA9IHtcbiAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBmZWF0dXJlczogZ2VvanNvbkZlYXR1cmVzXG4gICAgfTtcbiAgICB2YXIgb2JqZWN0ID0ge1xuICAgICAgZ2VvSnNvbjogZ2VvanNvbkZlYXR1cmVDb2xsZWN0aW9uLFxuICAgICAgb3BhY2l0eTogbGF5ZXIuZ2V0T3BhY2l0eSgpLFxuICAgICAgc3R5bGU6IG1hcGZpc2hTdHlsZU9iamVjdCxcbiAgICAgIHR5cGU6ICdnZW9qc29uJ1xuICAgIH07XG4gICAgbWFwRmlzaFByaW50TGF5ZXIucHVzaChvYmplY3QpO1xuICB9XG59O1xuXG5WZWN0b3JFbmNvZGVyLnByb3RvdHlwZS5uZXdGZWF0dXJlRnJvbVN0eWxlXyA9IGZ1bmN0aW9uIChzdHlsZSkge1xuICB2YXIgZmVhdHVyZSA9IG5ldyBvbEZlYXR1cmUoe1xuICAgIGdlb21ldHJ5OiBzdHlsZS5nZXRHZW9tZXRyeSgpXG4gIH0pO1xuICBmZWF0dXJlLnNldFN0eWxlKG5ldyBTdHlsZSh7XG4gICAgZmlsbDogc3R5bGUuZ2V0RmlsbCgpLFxuICAgIGltYWdlOiBzdHlsZS5nZXRJbWFnZSgpLFxuICAgIHN0cm9rZTogc3R5bGUuZ2V0U3Ryb2tlKCksXG4gICAgdGV4dDogc3R5bGUuZ2V0VGV4dCgpXG4gIH0pKTtcbiAgcmV0dXJuIGZlYXR1cmU7XG59O1xuXG5WZWN0b3JFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGVWZWN0b3JTdHlsZV8gPSBmdW5jdGlvbiAoZ2VvbWV0cnlUeXBlLCByZXNvbHV0aW9uLCBzdHlsZSwgZGVzdGlvbnRpb25QcmludERwaSwgZ29vZG5lc3NPZkZpdCkge1xuICBpZiAoIShnZW9tZXRyeVR5cGUgaW4gUFJJTlRfU1RZTEVfVFlQRVMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHRlc3QgPSAnJztcbiAgY29uc29sZS5sb2codGVzdC5sZW5ndGgpO1xuICB2YXIgdGVzdDIgPSAnJztcbiAgY29uc29sZS5sb2codGVzdDIubGVuZ3RoKTtcbiAgdmFyIHN0eWxlVHlwZSA9IFBSSU5UX1NUWUxFX1RZUEVTW2dlb21ldHJ5VHlwZV07XG4gIHZhciBmaWxsU3R5bGUgPSBzdHlsZS5nZXRGaWxsKCk7XG4gIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG5cbiAgaWYgKHN0eWxlVHlwZSA9PT0gUHJpbnRTdHlsZVR5cGUuUE9MWUdPTikge1xuICAgIGlmIChmaWxsU3R5bGUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLmVuY29kZVZlY3RvclN0eWxlX1BvbHlnb25fKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChzdHlsZVR5cGUgPT09IFByaW50U3R5bGVUeXBlLkxJTkVfU1RSSU5HKSB7XG4gICAgaWYgKHN0cm9rZVN0eWxlICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmNvZGVWZWN0b3JTdHlsZV9MaW5lXyhzdHJva2VTdHlsZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHN0eWxlVHlwZSA9PT0gUHJpbnRTdHlsZVR5cGUuUE9JTlQpIHtcbiAgICBpZiAoaW1hZ2VTdHlsZSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlVmVjdG9yU3R5bGVfUG9pbnRfKHJlc29sdXRpb24sIGltYWdlU3R5bGUsIGRlc3Rpb250aW9uUHJpbnREcGkpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0ZXh0U3R5bGUgIT09IG51bGwpIHtcbiAgICByZXR1cm4gdGhpcy5lbmNvZGVUZXh0U3R5bGVfKHRleHRTdHlsZSwgZ29vZG5lc3NPZkZpdCk7XG4gIH1cbn07XG5cblZlY3RvckVuY29kZXIucHJvdG90eXBlLmVuY29kZVZlY3RvclN0eWxlX0ZpbGxfID0gZnVuY3Rpb24gKHN5bWJvbGl6ZXIsIGZpbGxTdHlsZSkge1xuICB2YXIgZmlsbENvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG5cbiAgaWYgKGZpbGxDb2xvciAhPT0gbnVsbCkge1xuICAgIGNvbnNvbGUuYXNzZXJ0KHR5cGVvZiBmaWxsQ29sb3IgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkoZmlsbENvbG9yKSk7XG4gICAgZmlsbENvbG9yID0gYXNDb2xvckFycmF5KGZpbGxDb2xvcik7XG4gICAgY29uc29sZS5hc3NlcnQoQXJyYXkuaXNBcnJheShmaWxsQ29sb3IpLCAnb25seSBzdXBwb3J0aW5nIGZpbGwgY29sb3JzJyk7XG4gICAgc3ltYm9saXplci5maWxsQ29sb3IgPSByZ2JBcnJheVRvSGV4KGZpbGxDb2xvcik7XG4gICAgc3ltYm9saXplci5maWxsT3BhY2l0eSA9IGZpbGxDb2xvclszXTtcbiAgfVxufTtcblxuVmVjdG9yRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlVmVjdG9yU3R5bGVfTGluZV8gPSBmdW5jdGlvbiAoc3Ryb2tlU3R5bGUpIHtcbiAgdmFyIHN5bWJvbGl6ZXIgPSB7XG4gICAgdHlwZTogJ2xpbmUnXG4gIH07XG4gIHRoaXMuZW5jb2RlVmVjdG9yU3R5bGVfU3Ryb2tlXyhzeW1ib2xpemVyLCBzdHJva2VTdHlsZSk7XG4gIHJldHVybiBzeW1ib2xpemVyO1xufTtcblxuVmVjdG9yRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlVmVjdG9yU3R5bGVfUG9pbnRfID0gZnVuY3Rpb24gKHJlc29sdXRpb24sIGltYWdlU3R5bGUsIGRlc3Rpb250aW9uUHJpbnREcGkpIHtcbiAgdmFyIHN5bWJvbGl6ZXI7XG5cbiAgaWYgKGltYWdlU3R5bGUgaW5zdGFuY2VvZiBvbFN0eWxlQ2lyY2xlKSB7XG4gICAgc3ltYm9saXplciA9IHtcbiAgICAgIHR5cGU6ICdwb2ludCdcbiAgICB9O1xuICAgIHN5bWJvbGl6ZXIucG9pbnRSYWRpdXMgPSBpbWFnZVN0eWxlLmdldFJhZGl1cygpO1xuICAgIHZhciBmaWxsU3R5bGUgPSBpbWFnZVN0eWxlLmdldEZpbGwoKTtcblxuICAgIGlmIChmaWxsU3R5bGUgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZW5jb2RlVmVjdG9yU3R5bGVfRmlsbF8oc3ltYm9saXplciwgZmlsbFN0eWxlKTtcbiAgICB9XG5cbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBpbWFnZVN0eWxlLmdldFN0cm9rZSgpO1xuXG4gICAgaWYgKHN0cm9rZVN0eWxlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmVuY29kZVZlY3RvclN0eWxlX1N0cm9rZV8oc3ltYm9saXplciwgc3Ryb2tlU3R5bGUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpbWFnZVN0eWxlIGluc3RhbmNlb2Ygb2xTdHlsZUljb24pIHtcbiAgICB2YXIgaW1nU3JjID0gaW1hZ2VTdHlsZS5nZXRTcmMoKTtcblxuICAgIGlmICghaW1nU3JjKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgaW1nU3JjJyk7XG4gICAgfVxuXG4gICAgdmFyIHNyYyA9IG5ldyBVUkwoaW1nU3JjLCB3aW5kb3cubG9jYXRpb24uaHJlZikuaHJlZjtcblxuICAgIGlmIChzcmMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3ltYm9saXplciA9IHtcbiAgICAgICAgdHlwZTogJ3BvaW50JyxcbiAgICAgICAgZXh0ZXJuYWxHcmFwaGljOiBzcmNcbiAgICAgIH07XG4gICAgICB2YXIgb3BhY2l0eSA9IGltYWdlU3R5bGUuZ2V0T3BhY2l0eSgpO1xuXG4gICAgICBpZiAob3BhY2l0eSAhPT0gbnVsbCkge1xuICAgICAgICBzeW1ib2xpemVyLmdyYXBoaWNPcGFjaXR5ID0gb3BhY2l0eTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpemUgPSBpbWFnZVN0eWxlLmdldFNpemUoKTtcblxuICAgICAgaWYgKHNpemUgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIHNjYWxlID0gaW1hZ2VTdHlsZS5nZXRTY2FsZSgpO1xuXG4gICAgICAgIGlmIChpc05hTihzY2FsZSkpIHtcbiAgICAgICAgICBzY2FsZSA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBzeW1ib2xpemVyLmdyYXBoaWNXaWR0aCA9IHNpemVbMF0gKiBzY2FsZTtcbiAgICAgICAgc3ltYm9saXplci5ncmFwaGljSGVpZ2h0ID0gc2l6ZVsxXSAqIHNjYWxlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcm90YXRpb24gPSBpbWFnZVN0eWxlLmdldFJvdGF0aW9uKCk7XG5cbiAgICAgIGlmIChpc05hTihyb3RhdGlvbikpIHtcbiAgICAgICAgcm90YXRpb24gPSAwO1xuICAgICAgfVxuXG4gICAgICBzeW1ib2xpemVyLnJvdGF0aW9uID0gdG9EZWdyZWVzKHJvdGF0aW9uKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaW1hZ2VTdHlsZSBpbnN0YW5jZW9mIG9sU3R5bGVSZWd1bGFyU2hhcGUpIHtcbiAgICBzeW1ib2xpemVyID0ge1xuICAgICAgdHlwZTogJ3BvaW50JyxcbiAgICAgIGV4dGVybmFsR3JhcGhpYzogaW1hZ2VTdHlsZS5nZXRJbWFnZShkZXN0aW9udGlvblByaW50RHBpIC8gZHBpKCkpLnRvRGF0YVVSTCgpXG4gICAgfTtcblxuICAgIHZhciBfaW1hZ2VTdHlsZSRnZXRTaXplID0gaW1hZ2VTdHlsZS5nZXRTaXplKCksXG4gICAgICAgIGhlaWdodCA9IF9pbWFnZVN0eWxlJGdldFNpemVbMF0sXG4gICAgICAgIHdpZHRoID0gX2ltYWdlU3R5bGUkZ2V0U2l6ZVsxXTtcblxuICAgIHZhciBfc2NhbGUgPSBpbWFnZVN0eWxlLmdldFNjYWxlKCk7XG5cbiAgICBzeW1ib2xpemVyLmdyYXBoaWNIZWlnaHQgPSBoZWlnaHQgKiBfc2NhbGU7XG4gICAgc3ltYm9saXplci5ncmFwaGljV2lkdGggPSB3aWR0aCAqIF9zY2FsZTtcbiAgfVxuXG4gIHJldHVybiBzeW1ib2xpemVyO1xufTtcblxuVmVjdG9yRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlVmVjdG9yU3R5bGVfUG9seWdvbl8gPSBmdW5jdGlvbiAoZmlsbFN0eWxlLCBzdHJva2VTdHlsZSkge1xuICB2YXIgc3ltYm9saXplciA9IHtcbiAgICB0eXBlOiAncG9seWdvbidcbiAgfTtcbiAgdGhpcy5lbmNvZGVWZWN0b3JTdHlsZV9GaWxsXyhzeW1ib2xpemVyLCBmaWxsU3R5bGUpO1xuXG4gIGlmIChzdHJva2VTdHlsZSAhPT0gbnVsbCkge1xuICAgIHRoaXMuZW5jb2RlVmVjdG9yU3R5bGVfU3Ryb2tlXyhzeW1ib2xpemVyLCBzdHJva2VTdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3ltYm9saXplcjtcbn07XG5cblZlY3RvckVuY29kZXIucHJvdG90eXBlLmVuY29kZVZlY3RvclN0eWxlX1N0cm9rZV8gPSBmdW5jdGlvbiAoc3ltYm9saXplciwgc3Ryb2tlU3R5bGUpIHtcbiAgdmFyIHN0cm9rZUNvbG9yID0gc3Ryb2tlU3R5bGUuZ2V0Q29sb3IoKTtcblxuICBpZiAoc3Ryb2tlQ29sb3IgIT09IG51bGwpIHtcbiAgICBpZiAoISh0eXBlb2Ygc3Ryb2tlQ29sb3IgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkoc3Ryb2tlQ29sb3IpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBzdHJva2VDb2xvciB0eXBlJyk7XG4gICAgfVxuXG4gICAgdmFyIHN0cm9rZUNvbG9yUmdiYSA9IGFzQ29sb3JBcnJheShzdHJva2VDb2xvcik7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3Ryb2tlQ29sb3JSZ2JhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZWQgU3Ryb2tlQ29sb3JSZ2JhIGlzIG5vdCBhbiBhcnJheScpO1xuICAgIH1cblxuICAgIHN5bWJvbGl6ZXIuc3Ryb2tlQ29sb3IgPSByZ2JBcnJheVRvSGV4KHN0cm9rZUNvbG9yUmdiYSk7XG4gICAgc3ltYm9saXplci5zdHJva2VPcGFjaXR5ID0gc3Ryb2tlQ29sb3JSZ2JhWzNdO1xuICB9XG5cbiAgdmFyIHN0cm9rZURhc2hzdHlsZSA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG5cbiAgaWYgKHN0cm9rZURhc2hzdHlsZSAhPT0gbnVsbCkge1xuICAgIHN5bWJvbGl6ZXIuc3Ryb2tlRGFzaHN0eWxlID0gc3Ryb2tlRGFzaHN0eWxlLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBzdHJva2VXaWR0aCA9IHN0cm9rZVN0eWxlLmdldFdpZHRoKCk7XG5cbiAgaWYgKHN0cm9rZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICBzeW1ib2xpemVyLnN0cm9rZVdpZHRoID0gc3Ryb2tlV2lkdGg7XG4gIH1cblxuICB2YXIgc3Ryb2tlTGluZUNhcCA9IHN0cm9rZVN0eWxlLmdldExpbmVDYXAoKTtcblxuICBpZiAoc3Ryb2tlTGluZUNhcCkge1xuICAgIHN5bWJvbGl6ZXIuc3Ryb2tlTGluZWNhcCA9IHN0cm9rZUxpbmVDYXA7XG4gIH1cbn07XG5cblZlY3RvckVuY29kZXIucHJvdG90eXBlLmVuY29kZVRleHRTdHlsZV8gPSBmdW5jdGlvbiAodGV4dFN0eWxlLCBnb29kbmVzc09mRml0KSB7XG4gIHZhciBzeW1ib2xpemVyID0ge1xuICAgIHR5cGU6ICdUZXh0J1xuICB9O1xuICB2YXIgbGFiZWwgPSB0ZXh0U3R5bGUuZ2V0VGV4dCgpO1xuXG4gIGlmIChsYWJlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3ltYm9saXplci5sYWJlbCA9IGxhYmVsO1xuICAgIHZhciB4QWxpZ24gPSAnYyc7XG4gICAgdmFyIHlBbGlnbiA9ICdtJztcbiAgICB2YXIgb2xUZXh0QWxpZ24gPSB0ZXh0U3R5bGUuZ2V0VGV4dEFsaWduKCk7XG5cbiAgICBpZiAob2xUZXh0QWxpZ24gPT09ICdsZWZ0JyB8fCBvbFRleHRBbGlnbiA9PT0gJ3N0YXJ0Jykge1xuICAgICAgeEFsaWduID0gJ2wnO1xuICAgIH0gZWxzZSBpZiAob2xUZXh0QWxpZ24gPT09ICdyaWdodCcgfHwgb2xUZXh0QWxpZ24gPT09ICdlbmQnKSB7XG4gICAgICB4QWxpZ24gPSAncic7XG4gICAgfVxuXG4gICAgdmFyIG9sVGV4dEJhc2VsaW5lID0gdGV4dFN0eWxlLmdldFRleHRCYXNlbGluZSgpO1xuXG4gICAgaWYgKG9sVGV4dEJhc2VsaW5lID09PSAnYm90dG9tJykge1xuICAgICAgeUFsaWduID0gJ2wnO1xuICAgIH0gZWxzZSBpZiAob2xUZXh0QmFzZWxpbmUgPT09ICd0b3AnKSB7XG4gICAgICB5QWxpZ24gPSAndCc7XG4gICAgfVxuXG4gICAgc3ltYm9saXplci5sYWJlbEFsaWduID0gXCJcIiArIHhBbGlnbiArIHlBbGlnbjtcbiAgICB2YXIgbGFiZWxSb3RhdGlvbiA9IHRleHRTdHlsZS5nZXRSb3RhdGlvbigpO1xuXG4gICAgaWYgKGxhYmVsUm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3ltYm9saXplci5sYWJlbFJvdGF0aW9uID0gKGxhYmVsUm90YXRpb24gKiAxODAgLyBNYXRoLlBJKS50b1N0cmluZygpO1xuICAgICAgc3ltYm9saXplci5sYWJlbEFsaWduID0gJ2NtJztcbiAgICB9XG5cbiAgICB2YXIgZm9udFN0eWxlID0gdGV4dFN0eWxlLmdldEZvbnQoKTtcblxuICAgIGlmIChmb250U3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGZvbnQgPSBmb250U3R5bGUuc3BsaXQoJyAnKTtcblxuICAgICAgaWYgKGZvbnQubGVuZ3RoID49IDMpIHtcbiAgICAgICAgc3ltYm9saXplci5mb250V2VpZ2h0ID0gZm9udFswXTtcbiAgICAgICAgc3ltYm9saXplci5mb250U2l6ZSA9IGZvbnRbMV07XG4gICAgICAgIHN5bWJvbGl6ZXIuZm9udEZhbWlseSA9IGZvbnQuc3BsaWNlKDIpLmpvaW4oJyAnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSB0ZXh0U3R5bGUuZ2V0U3Ryb2tlKCk7XG5cbiAgICBpZiAoc3Ryb2tlU3R5bGUgIT09IG51bGwpIHtcbiAgICAgIHZhciBzdHJva2VDb2xvciA9IHN0cm9rZVN0eWxlLmdldENvbG9yKCk7XG5cbiAgICAgIGlmICghKHR5cGVvZiBzdHJva2VDb2xvciA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShzdHJva2VDb2xvcikpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3Jvbmcgc3Ryb2tlQ29sb3IgdHlwZScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3Ryb2tlQ29sb3JSZ2JhID0gYXNDb2xvckFycmF5KHN0cm9rZUNvbG9yKTtcblxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0cm9rZUNvbG9yUmdiYSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZWQgc3Ryb2tlQ29sb3JSZ2JhIGlzIG5vdCBhbiBhcnJheScpO1xuICAgICAgfVxuXG4gICAgICBzeW1ib2xpemVyLmhhbG9Db2xvciA9IHJnYkFycmF5VG9IZXgoc3Ryb2tlQ29sb3JSZ2JhKTtcbiAgICAgIHN5bWJvbGl6ZXIuaGFsb09wYWNpdHkgPSBzdHJva2VDb2xvclJnYmFbM107XG4gICAgICB2YXIgd2lkdGggPSBzdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuXG4gICAgICBpZiAod2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzeW1ib2xpemVyLmhhbG9SYWRpdXMgPSB3aWR0aCAvIDI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGZpbGxTdHlsZSA9IHRleHRTdHlsZS5nZXRGaWxsKCk7XG5cbiAgICBpZiAoZmlsbFN0eWxlICE9PSBudWxsKSB7XG4gICAgICB2YXIgZmlsbENvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG5cbiAgICAgIGlmICghKHR5cGVvZiBmaWxsQ29sb3IgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkoZmlsbENvbG9yKSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBmaWxsQ29sb3IgdHlwZScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmlsbENvbG9yUmdiYSA9IGFzQ29sb3JBcnJheShmaWxsQ29sb3IpO1xuXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsbENvbG9yUmdiYSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZWQgZmlsbENvbG9yUmdiYSBpcyBub3QgYW4gYXJyYXknKTtcbiAgICAgIH1cblxuICAgICAgc3ltYm9saXplci5mb250Q29sb3IgPSByZ2JBcnJheVRvSGV4KGZpbGxDb2xvclJnYmEpO1xuICAgIH1cblxuICAgIGlmIChzeW1ib2xpemVyLmxhYmVsQWxpZ24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3ltYm9saXplci5sYWJlbFhPZmZzZXQgPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WCgpO1xuICAgICAgc3ltYm9saXplci5sYWJlbFlPZmZzZXQgPSAtdGV4dFN0eWxlLmdldE9mZnNldFkoKTtcbiAgICB9XG5cbiAgICBpZiAoZ29vZG5lc3NPZkZpdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzeW1ib2xpemVyLmdvb2RuZXNzT2ZGaXQgPSBnb29kbmVzc09mRml0O1xuICAgIH1cblxuICAgIHJldHVybiBzeW1ib2xpemVyO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWZWN0b3JFbmNvZGVyOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9QcmludFNlcnZpY2UgZnJvbSAnbmdlby9wcmludC9TZXJ2aWNlLmpzJztcbmltcG9ydCBuZ2VvUHJpbnRVdGlscyBmcm9tICduZ2VvL3ByaW50L1V0aWxzLmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvUHJpbnRNb2R1bGUnLCBbbmdlb1ByaW50U2VydmljZS5uYW1lLCBuZ2VvUHJpbnRVdGlscy5uYW1lXSk7IiwiaW1wb3J0IHsgYXJlYSBhcyBkM2FyZWEsIGJpc2VjdG9yIGFzIGQzYmlzZWN0b3IsIGV4dGVudCBhcyBkM2V4dGVudCwgc2VsZWN0IGFzIGQzc2VsZWN0LCBzY2FsZUxpbmVhciBhcyBkM3NjYWxlTGluZWFyLCBheGlzQm90dG9tIGFzIGQzYXhpc0JvdHRvbSwgYXhpc0xlZnQgYXMgZDNheGlzTGVmdCwgbGluZSBhcyBkM2xpbmUsIG1vdXNlIGFzIGQzbW91c2UgfSBmcm9tICdkMyc7XG5cbmZ1bmN0aW9uIGQzRWxldmF0aW9uKG9wdGlvbnMsIGZ1bmN0aW9ucykge1xuICB2YXIgbGlnaHQgPSBvcHRpb25zLmxpZ2h0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxpZ2h0IDogZmFsc2U7XG4gIHZhciBtYXJnaW4gPSBsaWdodCA/IHtcbiAgICB0b3A6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDBcbiAgfSA6IHtcbiAgICB0b3A6IDEwLFxuICAgIHJpZ2h0OiAyMCxcbiAgICBib3R0b206IDMwLFxuICAgIGxlZnQ6IDQwXG4gIH07XG4gIHZhciBob3ZlckNhbGxiYWNrID0gZnVuY3Rpb25zLmhvdmVyQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9ucy5ob3ZlckNhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG4gIHZhciBvdXRDYWxsYmFjayA9IGZ1bmN0aW9ucy5vdXRDYWxsYmFjayAhPT0gdW5kZWZpbmVkID8gZnVuY3Rpb25zLm91dENhbGxiYWNrIDogZnVuY3Rpb24gKCkge307XG4gIHZhciBkaXN0YW5jZUV4dHJhY3RvciA9IGZ1bmN0aW9ucy5kaXN0YW5jZUV4dHJhY3RvcjtcbiAgdmFyIGxpbmVzQ29uZmlndXJhdGlvbiA9IG9wdGlvbnMubGluZXNDb25maWd1cmF0aW9uO1xuICB2YXIgbnVtYmVyT2ZMaW5lcyA9IE9iamVjdC5rZXlzKGxpbmVzQ29uZmlndXJhdGlvbikubGVuZ3RoO1xuICB2YXIgYmlzZWN0RGlzdGFuY2UgPSBkM2Jpc2VjdG9yKGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIGRpc3RhbmNlRXh0cmFjdG9yKGQpO1xuICB9KS5sZWZ0O1xuICB2YXIgcG9pRXh0cmFjdG9yID0gZnVuY3Rpb25zLnBvaUV4dHJhY3RvcjtcbiAgdmFyIHN0eWxlRGVmcyA9IG9wdGlvbnMuc3R5bGVEZWZzO1xuICB2YXIgcG9pTGFiZWxBbmdsZSA9IG9wdGlvbnMucG9pTGFiZWxBbmdsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wb2lMYWJlbEFuZ2xlIDogLTYwO1xuICB2YXIgaTE4biA9IGZ1bmN0aW9ucy5pMThuIHx8IHt9O1xuICB2YXIgeEF4aXNMYWJlbCA9IGkxOG4ueEF4aXMgfHwgJ0Rpc3RhbmNlJztcbiAgdmFyIHlBeGlzTGFiZWwgPSBpMThuLnlBeGlzIHx8ICdFbGV2YXRpb24nO1xuICB2YXIgZm9ybWF0dGVyID0ge1xuICAgIHhob3ZlcjogZnVuY3Rpb24geGhvdmVyKGRpc3QsIHVuaXRzKSB7XG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChkaXN0LnRvUHJlY2lzaW9uKDMpKSArIFwiIFwiICsgdW5pdHM7XG4gICAgfSxcbiAgICB5aG92ZXI6IGZ1bmN0aW9uIHlob3ZlcihlbGUsIHVuaXRzKSB7XG4gICAgICByZXR1cm4gZWxlICE9PSBudWxsID8gTWF0aC5yb3VuZChlbGUpICsgXCIgbVwiIDogJyc7XG4gICAgfSxcbiAgICB4dGljazogZnVuY3Rpb24geHRpY2soZGlzdCwgdW5pdHMpIHtcbiAgICAgIHJldHVybiBkaXN0O1xuICAgIH0sXG4gICAgeXRpY2s6IGZ1bmN0aW9uIHl0aWNrKGVsZSwgdW5pdHMpIHtcbiAgICAgIHJldHVybiBlbGU7XG4gICAgfVxuICB9O1xuXG4gIGlmIChmdW5jdGlvbnMuZm9ybWF0dGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICBPYmplY3QuYXNzaWduKGZvcm1hdHRlciwgZnVuY3Rpb25zLmZvcm1hdHRlcik7XG4gIH1cblxuICB2YXIgbGlnaHRYQXhpcyA9IG9wdGlvbnMubGlnaHRYQXhpcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5saWdodFhBeGlzIDogZmFsc2U7XG4gIHZhciBzdmc7XG4gIHZhciB4O1xuICB2YXIgeTtcbiAgdmFyIHNjYWxlTW9kaWZpZXIgPSBmdW5jdGlvbnMuc2NhbGVNb2RpZmllcjtcbiAgdmFyIGc7XG4gIHZhciBoZWlnaHQ7XG4gIHZhciB3aWR0aDtcbiAgdmFyIHhGYWN0b3I7XG4gIHZhciB4VW5pdHM7XG4gIHZhciB4RG9tYWluO1xuXG4gIHZhciBwcm9maWxlID0gZnVuY3Rpb24gcHJvZmlsZShzZWxlY3Rpb24pIHtcbiAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoZGF0YSwgaW5kZXgsIGdyb3Vwcykge1xuICAgICAgZDNzZWxlY3QodGhpcykuc2VsZWN0QWxsKCdzdmcnKS5yZW1vdmUoKTtcblxuICAgICAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHdpZHRoID0gTWF0aC5tYXgodGhpcy5jbGllbnRXaWR0aCAtIG1hcmdpbi5yaWdodCAtIG1hcmdpbi5sZWZ0LCAwKTtcbiAgICAgIHggPSBkM3NjYWxlTGluZWFyKCkucmFuZ2UoWzAsIHdpZHRoXSk7XG4gICAgICBoZWlnaHQgPSBNYXRoLm1heCh0aGlzLmNsaWVudEhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tLCAwKTtcbiAgICAgIHkgPSBkM3NjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pO1xuICAgICAgdmFyIHhBeGlzID0gZDNheGlzQm90dG9tKHgpO1xuICAgICAgdmFyIHlBeGlzID0gZDNheGlzTGVmdCh5KTtcbiAgICAgIHZhciBhcmVhID0gbnVsbDtcblxuICAgICAgaWYgKG51bWJlck9mTGluZXMgPT09IDEpIHtcbiAgICAgICAgYXJlYSA9IGQzYXJlYSgpLngoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4geChkaXN0YW5jZUV4dHJhY3RvcihkKSk7XG4gICAgICAgIH0pLnkwKGhlaWdodCkueTEoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICB2YXIgZmlyc3RMaW5lTmFtZSA9IE9iamVjdC5rZXlzKGxpbmVzQ29uZmlndXJhdGlvbilbMF07XG4gICAgICAgICAgcmV0dXJuIHkobGluZXNDb25maWd1cmF0aW9uW2ZpcnN0TGluZU5hbWVdLnpFeHRyYWN0b3IoZCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc3ZnID0gZDNzZWxlY3QodGhpcykuc2VsZWN0QWxsKCdzdmcnKS5kYXRhKFtkYXRhXSk7XG4gICAgICB2YXIgc3ZnRW50ZXIgPSBzdmcuZW50ZXIoKS5hcHBlbmQoJ3N2ZycpO1xuICAgICAgc3ZnID0gZDNzZWxlY3QodGhpcykuc2VsZWN0QWxsKCdzdmcnKS5kYXRhKFtkYXRhXSk7XG5cbiAgICAgIGlmIChzdHlsZURlZnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdmdFbnRlci5hcHBlbmQoJ2RlZnMnKS5hcHBlbmQoJ3N0eWxlJykuYXR0cigndHlwZScsICd0ZXh0L2NzcycpLnRleHQoc3R5bGVEZWZzKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGdFbnRlciA9IHN2Z0VudGVyLmFwcGVuZCgnZycpO1xuICAgICAgY2xlYXJQb2lzKCk7XG4gICAgICBnRW50ZXIuc3R5bGUoJ2ZvbnQnLCAnMTFweCBBcmlhbCcpO1xuXG4gICAgICBpZiAobnVtYmVyT2ZMaW5lcyA9PT0gMSkge1xuICAgICAgICBnRW50ZXIuYXBwZW5kKCdwYXRoJykuYXR0cignY2xhc3MnLCAnYXJlYScpLnN0eWxlKCdmaWxsJywgJ3JnYmEoMjIyLCAyMjIsIDIyMiwgMC41KScpO1xuICAgICAgfVxuXG4gICAgICBnRW50ZXIuaW5zZXJ0KCdnJywgJzpmaXJzdC1jaGlsZCcpLmF0dHIoJ2NsYXNzJywgJ2dyaWQteScpO1xuXG4gICAgICBpZiAoIWxpZ2h0KSB7XG4gICAgICAgIGdFbnRlci5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICd4IGF4aXMnKS5hdHRyKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpO1xuICAgICAgICBnRW50ZXIuYXBwZW5kKCd0ZXh0JykuYXR0cignY2xhc3MnLCAneCBsYWJlbCcpLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpLmF0dHIoJ3gnLCB3aWR0aCAtIDQpLmF0dHIoJ3knLCBoZWlnaHQgLSA0KTtcbiAgICAgICAgZ0VudGVyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcycpO1xuICAgICAgICBnRW50ZXIuYXBwZW5kKCd0ZXh0JykuYXR0cignY2xhc3MnLCAneSBsYWJlbCcpLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpLmF0dHIoJ3knLCA2KS5hdHRyKCdkeScsICcuNzVlbScpLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpLnN0eWxlKCdmaWxsJywgJ2dyZXknKS50ZXh0KHlBeGlzTGFiZWwgKyBcIiBbbV1cIik7XG4gICAgICAgIGdFbnRlci5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdtZXRhcycpLmF0dHIoJ3RyYW5zZm9ybScsIFwidHJhbnNsYXRlKFwiICsgKHdpZHRoICsgMykgKyBcIiwgMClcIik7XG4gICAgICB9XG5cbiAgICAgIGdFbnRlci5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdwb2lzJyk7XG4gICAgICB2YXIgeEhvdmVyID0gZ0VudGVyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ3ggZ3JpZC1ob3ZlcicpO1xuICAgICAgeEhvdmVyLmFwcGVuZCgnc3ZnOmxpbmUnKS5hdHRyKCdzdHJva2UtZGFzaGFycmF5JywgJzUsNScpO1xuICAgICAgeEhvdmVyLmFwcGVuZCgndGV4dCcpO1xuICAgICAgZ0VudGVyLmFwcGVuZCgncmVjdCcpLmF0dHIoJ2NsYXNzJywgJ292ZXJsYXknKS5hdHRyKCd3aWR0aCcsIHdpZHRoKS5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpLnN0eWxlKCdmaWxsJywgJ25vbmUnKS5zdHlsZSgncG9pbnRlci1ldmVudHMnLCAnYWxsJyk7XG4gICAgICBzdmcuYXR0cignd2lkdGgnLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KS5hdHRyKCdoZWlnaHQnLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSk7XG4gICAgICBnID0gc3ZnLnNlbGVjdCgnZycpLmF0dHIoJ3RyYW5zZm9ybScsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG4gICAgICB4RG9tYWluID0gZDNleHRlbnQoZGF0YSwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlRXh0cmFjdG9yKGQpO1xuICAgICAgfSk7XG4gICAgICB4LmRvbWFpbih4RG9tYWluKTtcblxuICAgICAgdmFyIHlEb21haW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbGV2YXRpb25zVmFsdWVzID0gW107XG5cbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AobmFtZSkge1xuICAgICAgICAgIHZhciBleHRlbnQgPSBkM2V4dGVudChkYXRhLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpbmVzQ29uZmlndXJhdGlvbltuYW1lXS56RXh0cmFjdG9yKGQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGV4dGVudC5ldmVyeShOdW1iZXIuaXNGaW5pdGUpKSB7XG4gICAgICAgICAgICBlbGV2YXRpb25zVmFsdWVzID0gZWxldmF0aW9uc1ZhbHVlcy5jb25jYXQoZXh0ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBsaW5lc0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICBfbG9vcChuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbTWF0aC5taW4uYXBwbHkoTWF0aCwgZWxldmF0aW9uc1ZhbHVlcyksIE1hdGgubWF4LmFwcGx5KE1hdGgsIGVsZXZhdGlvbnNWYWx1ZXMpXTtcbiAgICAgIH0oKTtcblxuICAgICAgeS5kb21haW4oeURvbWFpbik7XG5cbiAgICAgIGlmIChzY2FsZU1vZGlmaWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2NhbGVNb2RpZmllcih4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYWRkaW5nID0gKHlEb21haW5bMV0gLSB5RG9tYWluWzBdKSAqIDAuMTtcbiAgICAgICAgeS5kb21haW4oW3lEb21haW5bMF0gLSBwYWRkaW5nLCB5RG9tYWluWzFdICsgcGFkZGluZ10pO1xuICAgICAgfVxuXG4gICAgICBpZiAobnVtYmVyT2ZMaW5lcyA9PT0gMSkge1xuICAgICAgICBpZiAoIWFyZWEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgYXJlYScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZy5zZWxlY3QoJy5hcmVhJykudHJhbnNpdGlvbigpLmF0dHIoJ2QnLCBhcmVhKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxpbmUsIHlIb3ZlcjtcblxuICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihuYW1lKSB7XG4gICAgICAgIGdFbnRlci5hcHBlbmQoJ3BhdGgnKS5hdHRyKCdjbGFzcycsIFwibGluZSBcIiArIG5hbWUpLnN0eWxlKCdzdHJva2UnLCBsaW5lc0NvbmZpZ3VyYXRpb25bbmFtZV0uY29sb3IgfHwgJyNGMDAnKS5zdHlsZSgnZmlsbCcsICdub25lJyk7XG4gICAgICAgIHlIb3ZlciA9IGdFbnRlci5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsIFwieSBncmlkLWhvdmVyIFwiICsgbmFtZSk7XG4gICAgICAgIHlIb3Zlci5hcHBlbmQoJ3N2ZzpsaW5lJykuYXR0cignc3Ryb2tlLWRhc2hhcnJheScsICc1LDUnKTtcbiAgICAgICAgeUhvdmVyLmFwcGVuZCgndGV4dCcpO1xuICAgICAgICBsaW5lID0gZDNsaW5lKCkueChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiB4KGRpc3RhbmNlRXh0cmFjdG9yKGQpKTtcbiAgICAgICAgfSkueShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiB5KGxpbmVzQ29uZmlndXJhdGlvbltuYW1lXS56RXh0cmFjdG9yKGQpKTtcbiAgICAgICAgfSkuZGVmaW5lZChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBsaW5lc0NvbmZpZ3VyYXRpb25bbmFtZV0uekV4dHJhY3RvcihkKSAhPT0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIGcuc2VsZWN0KFwiLmxpbmUuXCIgKyBuYW1lKS50cmFuc2l0aW9uKCkuYXR0cignZCcsIGxpbmUpO1xuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgbmFtZSBpbiBsaW5lc0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgX2xvb3AyKG5hbWUpO1xuICAgICAgfVxuXG4gICAgICB4RmFjdG9yID0geERvbWFpblsxXSA+IDIwMDAgPyAxMDAwIDogMTtcbiAgICAgIHhVbml0cyA9IHhEb21haW5bMV0gPiAyMDAwID8gJ2ttJyA6ICdtJztcblxuICAgICAgaWYgKCFsaWdodCkge1xuICAgICAgICB4QXhpcy50aWNrRm9ybWF0KGZ1bmN0aW9uIChkb21haW5WYWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmb3JtYXR0ZXIueHRpY2soZG9tYWluVmFsdWUgLyB4RmFjdG9yLCB4VW5pdHMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobGlnaHRYQXhpcykge1xuICAgICAgICAgIHhBeGlzLnRpY2tWYWx1ZXMoWzAsIHguZG9tYWluKClbMV1dKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHlBeGlzLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGRvbW1haW5WYWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmb3JtYXR0ZXIueXRpY2soZG9tbWFpblZhbHVlLCAnbScpO1xuICAgICAgICB9KTtcbiAgICAgICAgZy5zZWxlY3QoJy54LmF4aXMnKS50cmFuc2l0aW9uKCkuY2FsbCh4QXhpcyk7XG4gICAgICAgIGcuc2VsZWN0KCcueC5sYWJlbCcpLnRleHQoeEF4aXNMYWJlbCArIFwiIFtcIiArIHhVbml0cyArIFwiXVwiKS5zdHlsZSgnZmlsbCcsICdncmV5Jykuc3R5bGUoJ3NoYXBlLXJlbmRlcmluZycsICdjcmlzcEVkZ2VzJyk7XG5cbiAgICAgICAgaWYgKGhlaWdodCAvIDE1IDwgMTApIHtcbiAgICAgICAgICB5QXhpcy50aWNrcyhoZWlnaHQgLyAxNSk7XG4gICAgICAgIH1cblxuICAgICAgICBnLnNlbGVjdCgnLnkuYXhpcycpLnRyYW5zaXRpb24oKS5jYWxsKHlBeGlzKTtcbiAgICAgIH1cblxuICAgICAgZy5zZWxlY3QoJy5ncmlkLXknKS50cmFuc2l0aW9uKCkuY2FsbCh5QXhpcy50aWNrU2l6ZSgtd2lkdGgpLnRpY2tGb3JtYXQobnVsbCkpLnNlbGVjdEFsbCgnLnRpY2sgbGluZScpLnN0eWxlKCdzdHJva2UnLCAnI2NjYycpLnN0eWxlKCdvcGFjaXR5JywgMC43KTtcbiAgICAgIGcuc2VsZWN0KCcuZ3JpZC15Jykuc2VsZWN0QWxsKCcudGljayB0ZXh0JykucmVtb3ZlKCk7XG4gICAgICBnLnNlbGVjdEFsbCgnLmF4aXMnKS5zZWxlY3RBbGwoJ3BhdGgsIGxpbmUnKS5zdHlsZSgnZmlsbCcsICdub25lJykuc3R5bGUoJ3N0cm9rZScsICcjMDAwJykuc3R5bGUoJ3NoYXBlLXJlbmRlcmluZycsICdjcmlzcEVkZ2VzJyk7XG4gICAgICBnLnNlbGVjdCgnLmdyaWQteScpLnNlbGVjdCgncGF0aCcpLnN0eWxlKCdzdHJva2UnLCAnbm9uZScpO1xuICAgICAgZy5zZWxlY3RBbGwoJy5ncmlkLWhvdmVyIGxpbmUnKS5zdHlsZSgnc3Ryb2tlJywgJyMyMjInKS5zdHlsZSgnb3BhY2l0eScsIDAuOCk7XG4gICAgICBnLnNlbGVjdCgnLm92ZXJsYXknKS5vbignbW91c2VvdXQnLCBtb3VzZW91dCkub24oJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XG5cbiAgICAgIGZ1bmN0aW9uIG1vdXNlbW92ZSgpIHtcbiAgICAgICAgdmFyIG1vdXNlWCA9IGQzbW91c2UodGhpcylbMF07XG4gICAgICAgIHZhciB4MCA9IHguaW52ZXJ0KG1vdXNlWCk7XG4gICAgICAgIHByb2ZpbGUuaGlnaGxpZ2h0KHgwKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbW91c2VvdXQoKSB7XG4gICAgICAgIHByb2ZpbGUuY2xlYXJIaWdobGlnaHQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2VsZWN0aW9uLmVhY2goZnVuYyk7XG4gIH07XG5cbiAgcHJvZmlsZS5jbGVhckhpZ2hsaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICBnLnNlbGVjdEFsbCgnLmdyaWQtaG92ZXInKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgb3V0Q2FsbGJhY2suY2FsbChudWxsKTtcbiAgfTtcblxuICBwcm9maWxlLmhpZ2hsaWdodCA9IGZ1bmN0aW9uIChkaXN0YW5jZSkge1xuICAgIHZhciBkYXRhID0gc3ZnLmRhdHVtKCk7XG4gICAgdmFyIGkgPSBiaXNlY3REaXN0YW5jZShkYXRhLCBkaXN0YW5jZSk7XG5cbiAgICBpZiAoaSA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwb2ludCA9IGRhdGFbaV07XG4gICAgdmFyIGRpc3QgPSBkaXN0YW5jZUV4dHJhY3Rvcihwb2ludCk7XG4gICAgdmFyIGVsZXZhdGlvbjtcbiAgICB2YXIgZWxldmF0aW9ucyA9IFtdO1xuICAgIHZhciBlbGV2YXRpb25zUmVmID0ge307XG4gICAgdmFyIGxpbmVOYW1lO1xuXG4gICAgZm9yIChsaW5lTmFtZSBpbiBsaW5lc0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgIGVsZXZhdGlvbiA9IGxpbmVzQ29uZmlndXJhdGlvbltsaW5lTmFtZV0uekV4dHJhY3Rvcihwb2ludCk7XG5cbiAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZWxldmF0aW9uKSkge1xuICAgICAgICBlbGV2YXRpb25zLnB1c2goZWxldmF0aW9uKTtcbiAgICAgICAgZWxldmF0aW9uc1JlZltsaW5lTmFtZV0gPSBlbGV2YXRpb247XG4gICAgICAgIGcuc2VsZWN0KFwiLnkuZ3JpZC1ob3Zlci5cIiArIGxpbmVOYW1lKS5zdHlsZSgnZGlzcGxheScsICdpbmxpbmUnKS5zZWxlY3QoJ2xpbmUnKS5hdHRyKCd4MScsIHgoMCkpLmF0dHIoJ3kxJywgeShlbGV2YXRpb24pKS5hdHRyKCd4MicsIHdpZHRoKS5hdHRyKCd5MicsIHkoZWxldmF0aW9uKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnLnNlbGVjdChcIi55LmdyaWQtaG92ZXIuXCIgKyBsaW5lTmFtZSkuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB5MiA9IHkoTWF0aC5tYXguYXBwbHkobnVsbCwgZWxldmF0aW9ucykpO1xuICAgIGcuc2VsZWN0KCcueC5ncmlkLWhvdmVyJykuc3R5bGUoJ2Rpc3BsYXknLCAnaW5saW5lJykuc2VsZWN0KCdsaW5lJykuYXR0cigneDEnLCB4KGRpc3QpKS5hdHRyKCd5MScsIGhlaWdodCkuYXR0cigneDInLCB4KGRpc3QpKS5hdHRyKCd5MicsIE51bWJlci5pc0Zpbml0ZSh5MikgPyB5MiA6IDApO1xuICAgIHZhciByaWdodCA9IGRpc3QgPiB4RG9tYWluWzFdIC8gMjtcbiAgICB2YXIgeHRyYW5zbGF0ZSA9IHgoZGlzdCk7XG4gICAgeHRyYW5zbGF0ZSArPSByaWdodCA/IC0xMCA6IDEwO1xuICAgIGcuc2VsZWN0KCcueC5ncmlkLWhvdmVyIHRleHQnKS50ZXh0KGZvcm1hdHRlci54aG92ZXIoZGlzdCAvIHhGYWN0b3IsIHhVbml0cykpLnN0eWxlKCd0ZXh0LWFuY2hvcicsIHJpZ2h0ID8gJ2VuZCcgOiAnc3RhcnQnKS5hdHRyKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZShcIiArIHh0cmFuc2xhdGUgKyBcIixcIiArIChoZWlnaHQgLSAxMCkgKyBcIilcIik7XG5cbiAgICBpZiAobnVtYmVyT2ZMaW5lcyA9PT0gMSkge1xuICAgICAgdmFyIGhhc1ZhbHVlID0gTnVtYmVyLmlzRmluaXRlKGVsZXZhdGlvbnNbMF0pO1xuICAgICAgZy5zZWxlY3QoJy55LmdyaWQtaG92ZXIgdGV4dCcpLnRleHQoaGFzVmFsdWUgPyBmb3JtYXR0ZXIueWhvdmVyKGVsZXZhdGlvbnNbMF0sICdtJykgOiAnbm8gdmFsdWUnKS5zdHlsZSgndGV4dC1hbmNob3InLCByaWdodCA/ICdlbmQnIDogJ3N0YXJ0JykuYXR0cigndHJhbnNmb3JtJywgXCJ0cmFuc2xhdGUoXCIgKyB4dHJhbnNsYXRlICsgXCIsXCIgKyAoaGFzVmFsdWUgPyB5KGVsZXZhdGlvbnNbMF0pIC0gMTAgOiAwKSArIFwiKVwiKTtcbiAgICB9XG5cbiAgICBob3ZlckNhbGxiYWNrLmNhbGwobnVsbCwgcG9pbnQsIGRpc3QgLyB4RmFjdG9yLCB4VW5pdHMsIGVsZXZhdGlvbnNSZWYsICdtJyk7XG4gIH07XG5cbiAgcHJvZmlsZS5zaG93UG9pcyA9IGZ1bmN0aW9uIChwb2lzKSB7XG4gICAgaWYgKCFzdmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwb2lzID0gcG9pcyAhPT0gdW5kZWZpbmVkID8gcG9pcyA6IFtdO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHBvaXMubGVuZ3RoID09PSAwIHx8IHBvaUV4dHJhY3RvciAhPT0gdW5kZWZpbmVkKTtcbiAgICB2YXIgcGUgPSBwb2lFeHRyYWN0b3I7XG4gICAgdmFyIGcgPSBzdmcuc2VsZWN0KCdnJyk7XG4gICAgdmFyIHByb2ZpbGVEYXRhID0gc3ZnLmRhdHVtKCk7XG4gICAgdmFyIHBzID0gZy5zZWxlY3QoJy5wb2lzJyk7XG4gICAgdmFyIHAgPSBwcy5zZWxlY3RBbGwoJy5wb2knKS5kYXRhKHBvaXMsIGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YXIgaSA9IGJpc2VjdERpc3RhbmNlKHByb2ZpbGVEYXRhLCBNYXRoLnJvdW5kKHBlLmRpc3QoZCkgKiAxMCkgLyAxMCwgMSk7XG4gICAgICB2YXIgcG9pbnQgPSBwcm9maWxlRGF0YVtpXTtcblxuICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgIHZhciBsaW5lTmFtZTtcbiAgICAgICAgdmFyIGVsZXZhdGlvbnMgPSBbXTtcblxuICAgICAgICBmb3IgKGxpbmVOYW1lIGluIGxpbmVzQ29uZmlndXJhdGlvbikge1xuICAgICAgICAgIGVsZXZhdGlvbnMucHVzaChsaW5lc0NvbmZpZ3VyYXRpb25bbGluZU5hbWVdLnpFeHRyYWN0b3IocG9pbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB6ID0gTWF0aC5tYXguYXBwbHkobnVsbCwgZWxldmF0aW9ucyk7XG4gICAgICAgIHBlLnooZCwgeik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwZS5pZChkKTtcbiAgICB9KTtcbiAgICB2YXIgcG9pRW50ZXJHID0gcC5lbnRlcigpLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ3BvaScpO1xuICAgIHBvaUVudGVyRy5hcHBlbmQoJ3RleHQnKS5hdHRyKCd4JywgbGlnaHQgPyAwIDogOSkuYXR0cignZHknLCAnLjM1ZW0nKS5hdHRyKCd0ZXh0LWFuY2hvcicsIGxpZ2h0ID8gJ21pZGRsZScgOiAnc3RhcnQnKTtcbiAgICBwb2lFbnRlckcuYXBwZW5kKCdsaW5lJykuc3R5bGUoJ3NoYXBlLXJlbmRlcmluZycsICdjcmlzcEVkZ2VzJyk7XG4gICAgcG9pRW50ZXJHLnN0eWxlKCdvcGFjaXR5JywgMCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMDApLmRlbGF5KDEwMCkuc3R5bGUoJ29wYWNpdHknLCAxKTtcbiAgICBwb2lFbnRlckcuc2VsZWN0QWxsKCd0ZXh0JykuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChsaWdodCkge1xuICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4KHBlLmRpc3QoZCkpICsgXCIsXCIgKyAoeShwZS56KGQpKSAtIDEwKSArIFwiKVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeChwZS5kaXN0KGQpKSArIFwiLFwiICsgKHkocGUueihkKSkgLSAyMCkgKyBcIikgcm90YXRlKFwiICsgcG9pTGFiZWxBbmdsZSArIFwiKVwiO1xuICAgICAgfVxuICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBcIlwiICsgcGUuc29ydChkKSArIChsaWdodCA/ICcnIDogXCIgLSBcIiArIHBlLnRpdGxlKGQpKTtcbiAgICB9KTtcbiAgICBwb2lFbnRlckcuc2VsZWN0QWxsKCdsaW5lJykuc3R5bGUoJ3N0cm9rZScsICdncmV5JykuYXR0cigneDEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHgocGUuZGlzdChkKSk7XG4gICAgfSkuYXR0cigneTEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHkoeS5kb21haW4oKVswXSk7XG4gICAgfSkuYXR0cigneDInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHgocGUuZGlzdChkKSk7XG4gICAgfSkuYXR0cigneTInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHkocGUueihkKSk7XG4gICAgfSk7XG4gICAgcG9pRW50ZXJHLmV4aXQoKS5yZW1vdmUoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjbGVhclBvaXMoKSB7XG4gICAgcHJvZmlsZS5zaG93UG9pcyhbXSk7XG4gIH1cblxuICByZXR1cm4gcHJvZmlsZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZDNFbGV2YXRpb247IiwicHJvZmlsZUVsZXZhdGlvbkNvbXBvbmVudC4kaW5qZWN0ID0gW1wibmdlb0RlYm91bmNlXCIsIFwibmdlb1Byb2ZpbGVPcHRpb25zXCJdO1xuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdvbC9ldmVudHMuanMnO1xuaW1wb3J0IG5nZW9NaXNjRGVib3VuY2UgZnJvbSAnbmdlby9taXNjL2RlYm91bmNlLmpzJztcbmltcG9ydCBuZ2VvUHJvZmlsZUQzRWxldmF0aW9uIGZyb20gJ25nZW8vcHJvZmlsZS9kM0VsZXZhdGlvbi5qcyc7XG5pbXBvcnQgeyBzZWxlY3QgYXMgZDNzZWxlY3QgfSBmcm9tICdkMyc7XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9Qcm9maWxlJywgW25nZW9NaXNjRGVib3VuY2UubmFtZV0pO1xuXG5mdW5jdGlvbiBwcm9maWxlRWxldmF0aW9uQ29tcG9uZW50KG5nZW9EZWJvdW5jZSwgbmdlb1Byb2ZpbGVPcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIG9wdGlvbnNBdHRyID0gYXR0cnMubmdlb1Byb2ZpbGVPcHRpb25zO1xuICAgICAgY29uc29sZS5hc3NlcnQob3B0aW9uc0F0dHIgIT09IHVuZGVmaW5lZCk7XG4gICAgICB2YXIgc2VsZWN0aW9uID0gZDNzZWxlY3QoZWxlbWVudFswXSk7XG4gICAgICB2YXIgcHJvZmlsZSA9IHVuZGVmaW5lZDtcbiAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24ob3B0aW9uc0F0dHIsIGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBuZXdWYWwpO1xuXG4gICAgICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5ob3ZlckNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBvcmlnSG92ZXJDYWxsYmFjayA9IG9wdGlvbnMuaG92ZXJDYWxsYmFjaztcblxuICAgICAgICAgICAgb3B0aW9ucy5ob3ZlckNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBvcmlnSG92ZXJDYWxsYmFjay5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseUFzeW5jKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRpb25zLm91dENhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBvcmlnT3V0Q2FsbGJhY2sgPSBvcHRpb25zLm91dENhbGxiYWNrO1xuXG4gICAgICAgICAgICBvcHRpb25zLm91dENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBvcmlnT3V0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5QXN5bmMoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvZmlsZSA9IG5nZW9Qcm9maWxlRDNFbGV2YXRpb24obmdlb1Byb2ZpbGVPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICByZWZyZXNoRGF0YSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZhciBlbGV2YXRpb25EYXRhID0gdW5kZWZpbmVkO1xuICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLm5nZW9Qcm9maWxlLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgZWxldmF0aW9uRGF0YSA9IG5ld1ZhbDtcbiAgICAgICAgcmVmcmVzaERhdGEoKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHBvaURhdGEgPSB1bmRlZmluZWQ7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0cnMubmdlb1Byb2ZpbGVQb2lzLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgcG9pRGF0YSA9IG5ld1ZhbDtcbiAgICAgICAgcmVmcmVzaERhdGEoKTtcbiAgICAgIH0pO1xuICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLm5nZW9Qcm9maWxlSGlnaGxpZ2h0LCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1ZhbCA+IDApIHtcbiAgICAgICAgICBwcm9maWxlLmhpZ2hsaWdodChuZXdWYWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2ZpbGUuY2xlYXJIaWdobGlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaXN0ZW4od2luZG93LCAncmVzaXplJywgbmdlb0RlYm91bmNlKHJlZnJlc2hEYXRhLCA1MCwgdHJ1ZSkpO1xuXG4gICAgICBmdW5jdGlvbiByZWZyZXNoRGF0YSgpIHtcbiAgICAgICAgaWYgKHByb2ZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGVjdGlvbi5kYXR1bShlbGV2YXRpb25EYXRhKS5jYWxsKHByb2ZpbGUpO1xuXG4gICAgICAgICAgaWYgKGVsZXZhdGlvbkRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcHJvZmlsZS5zaG93UG9pcyhwb2lEYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5kaXJlY3RpdmUoJ25nZW9Qcm9maWxlJywgcHJvZmlsZUVsZXZhdGlvbkNvbXBvbmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb1Byb2ZpbGVFbGV2YXRpb25Db21wb25lbnQgZnJvbSAnbmdlby9wcm9maWxlL2VsZXZhdGlvbkNvbXBvbmVudC5qcyc7XG5leHBvcnQgZGVmYXVsdCBhbmd1bGFyLm1vZHVsZSgnbmdlb1Byb2ZpbGVNb2R1bGUnLCBbbmdlb1Byb2ZpbGVFbGV2YXRpb25Db21wb25lbnQubmFtZV0pOyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgQUREOiAnYWRkJyxcbiAgUkVNT1ZFOiAncmVtb3ZlJyxcbiAgUkVQTEFDRTogJ3JlcGxhY2UnXG59OyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBoYXNDb2Fyc2VQb2ludGluZ0RldmljZSB9IGZyb20gJ25nZW8vdXRpbHMuanMnO1xuaW1wb3J0IG5nZW9RdWVyeUFjdGlvbiBmcm9tICduZ2VvL3F1ZXJ5L0FjdGlvbi5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5UXVlcmVudCBmcm9tICduZ2VvL3F1ZXJ5L1F1ZXJlbnQuanMnO1xuaW1wb3J0IG5nZW9EYXRhc291cmNlRGF0YVNvdXJjZXMgZnJvbSAnbmdlby9kYXRhc291cmNlL0RhdGFTb3VyY2VzLmpzJztcbmltcG9ydCBuZ2VvRGF0YXNvdXJjZUhlbHBlciBmcm9tICduZ2VvL2RhdGFzb3VyY2UvSGVscGVyLmpzJztcbmltcG9ydCBuZ2VvTWlzY0ZlYXR1cmVIZWxwZXIgZnJvbSAnbmdlby9taXNjL0ZlYXR1cmVIZWxwZXIuanMnO1xuZXhwb3J0IHZhciBNYXBRdWVyZW50ID0gZnVuY3Rpb24gKCkge1xuICBNYXBRdWVyZW50LiRpbmplY3QgPSBbXCJuZ2VvRGF0YVNvdXJjZXNcIiwgXCJuZ2VvRGF0YVNvdXJjZXNIZWxwZXJcIiwgXCJuZ2VvRmVhdHVyZUhlbHBlclwiLCBcIm5nZW9RdWVyZW50XCIsIFwibmdlb1F1ZXJ5UmVzdWx0XCIsIFwibmdlb1F1ZXJ5T3B0aW9uc1wiXTtcblxuICBmdW5jdGlvbiBNYXBRdWVyZW50KG5nZW9EYXRhU291cmNlcywgbmdlb0RhdGFTb3VyY2VzSGVscGVyLCBuZ2VvRmVhdHVyZUhlbHBlciwgbmdlb1F1ZXJlbnQsIG5nZW9RdWVyeVJlc3VsdCwgbmdlb1F1ZXJ5T3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gbmdlb1F1ZXJ5T3B0aW9ucztcbiAgICB0aGlzLmRhdGFTb3VyY2VzXyA9IG5nZW9EYXRhU291cmNlcy5jb2xsZWN0aW9uO1xuICAgIHRoaXMuZmVhdHVyZUhlbHBlcl8gPSBuZ2VvRmVhdHVyZUhlbHBlcjtcbiAgICB0aGlzLm5nZW9EYXRhU291cmNlc0hlbHBlcl8gPSBuZ2VvRGF0YVNvdXJjZXNIZWxwZXI7XG4gICAgdGhpcy5uZ2VvUXVlcmVudF8gPSBuZ2VvUXVlcmVudDtcbiAgICB0aGlzLnJlc3VsdF8gPSBuZ2VvUXVlcnlSZXN1bHQ7XG4gICAgdGhpcy5saW1pdF8gPSBvcHRpb25zLmxpbWl0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxpbWl0IDogNTA7XG4gICAgdGhpcy5xdWVyeUNvdW50Rmlyc3RfID0gb3B0aW9ucy5xdWVyeUNvdW50Rmlyc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVlcnlDb3VudEZpcnN0IDogZmFsc2U7XG4gICAgdGhpcy50b2xlcmFuY2VfO1xuXG4gICAgaWYgKGhhc0NvYXJzZVBvaW50aW5nRGV2aWNlKCkpIHtcbiAgICAgIHRoaXMudG9sZXJhbmNlXyA9IG9wdGlvbnMudG9sZXJhbmNlVG91Y2ggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudG9sZXJhbmNlVG91Y2ggOiAxMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50b2xlcmFuY2VfID0gb3B0aW9ucy50b2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudG9sZXJhbmNlIDogMztcbiAgICB9XG5cbiAgICB0aGlzLmJib3hBc0dFVFBhcmFtXyA9IG9wdGlvbnMuYmJveEFzR0VUUGFyYW0gfHwgZmFsc2U7XG4gICAgdGhpcy5kYXRhU291cmNlTmFtZXNfID0ge307XG4gICAgdGhpcy5jbGVhcmVkXyA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IE1hcFF1ZXJlbnQucHJvdG90eXBlO1xuXG4gIF9wcm90by5pc3N1ZSA9IGZ1bmN0aW9uIGlzc3VlKG9wdGlvbnMpIHtcbiAgICB2YXIgYWN0aW9uID0gb3B0aW9ucy5hY3Rpb24gPyBvcHRpb25zLmFjdGlvbiA6IG5nZW9RdWVyeUFjdGlvbi5SRVBMQUNFO1xuICAgIHRoaXMuY2xlYXIoYWN0aW9uICE9PSBuZ2VvUXVlcnlBY3Rpb24uUkVQTEFDRSk7XG4gICAgdmFyIHF1ZXJ5YWJsZURhdGFTb3VyY2VzO1xuXG4gICAgaWYgKG9wdGlvbnMuZGF0YVNvdXJjZXMgPT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnF1ZXJ5YWJsZURhdGFTb3VyY2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzID0gdGhpcy5uZ2VvUXVlcmVudF8uZ2V0UXVlcnlhYmxlRGF0YVNvdXJjZXModGhpcy5kYXRhU291cmNlc18uZ2V0QXJyYXkoKSwgb3B0aW9ucy5tYXApO1xuICAgIH1cblxuICAgIHZhciBsaW1pdCA9IG9wdGlvbnMubGltaXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGltaXQgOiB0aGlzLmxpbWl0XztcbiAgICBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtcbiAgICAgIHF1ZXJ5YWJsZURhdGFTb3VyY2VzOiBxdWVyeWFibGVEYXRhU291cmNlcyxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIHRvbGVyYW5jZTogdGhpcy50b2xlcmFuY2VfLFxuICAgICAgd2ZzQ291bnQ6IHRoaXMucXVlcnlDb3VudEZpcnN0XyxcbiAgICAgIGJib3hBc0dFVFBhcmFtOiB0aGlzLmJib3hBc0dFVFBhcmFtX1xuICAgIH0pO1xuICAgIHRoaXMucmVzdWx0Xy5wZW5kaW5nID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcy5uZ2VvUXVlcmVudF8uaXNzdWUob3B0aW9ucykudGhlbih0aGlzLmhhbmRsZVJlc3VsdF8uYmluZCh0aGlzLCBhY3Rpb24pKTtcbiAgfTtcblxuICBfcHJvdG8uY2xlYXIgPSBmdW5jdGlvbiBjbGVhcihrZWVwKSB7XG4gICAgaWYgKGtlZXAgPT09IHZvaWQgMCkge1xuICAgICAga2VlcCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNsZWFyZWRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZXN1bHRfLnRvdGFsID0gMDtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UodGhpcy5yZXN1bHRfLnNvdXJjZXMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIHNvdXJjZSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICBpZiAoIWtlZXApIHtcbiAgICAgICAgc291cmNlLmZlYXR1cmVzLmxlbmd0aCA9IDA7XG4gICAgICAgIGRlbGV0ZSBzb3VyY2UudG90YWxGZWF0dXJlQ291bnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc3VsdF8udG90YWwgKz0gc291cmNlLmZlYXR1cmVzLmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgc291cmNlLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgIHNvdXJjZS50b29NYW55UmVzdWx0cyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICgha2VlcCkge1xuICAgICAgdGhpcy5yZXN1bHRfLnNvdXJjZXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdF8ucGVuZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuY2xlYXJlZF8gPSB0cnVlO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVSZXN1bHRfID0gZnVuY3Rpb24gaGFuZGxlUmVzdWx0XyhhY3Rpb24sIHJlc3BvbnNlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3RhbCA9IGFjdGlvbiA9PT0gbmdlb1F1ZXJ5QWN0aW9uLlJFUExBQ0UgPyAwIDogdGhpcy5yZXN1bHRfLnRvdGFsO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaWRTdHIpIHtcbiAgICAgIHZhciBpZCA9IE51bWJlcihpZFN0cik7XG5cbiAgICAgIHZhciBkYXRhU291cmNlID0gX3RoaXMubmdlb0RhdGFTb3VyY2VzSGVscGVyXy5nZXREYXRhU291cmNlKGlkKTtcblxuICAgICAgaWYgKCFkYXRhU291cmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBkYXRhU291cmNlJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBsYWJlbCA9IGRhdGFTb3VyY2UubmFtZTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGRhdGFTb3VyY2UpO1xuICAgICAgdmFyIHF1ZXJlbnRSZXN1bHRJdGVtID0gcmVzcG9uc2VbaWRdO1xuICAgICAgdmFyIGZlYXR1cmVzID0gcXVlcmVudFJlc3VsdEl0ZW0uZmVhdHVyZXM7XG4gICAgICB2YXIgbGltaXQgPSBxdWVyZW50UmVzdWx0SXRlbS5saW1pdDtcbiAgICAgIHZhciB0b29NYW55UmVzdWx0cyA9IHF1ZXJlbnRSZXN1bHRJdGVtLnRvb01hbnlGZWF0dXJlcyA9PT0gdHJ1ZTtcbiAgICAgIHZhciB0b3RhbEZlYXR1cmVDb3VudCA9IHF1ZXJlbnRSZXN1bHRJdGVtLnRvdGFsRmVhdHVyZUNvdW50O1xuICAgICAgdmFyIHR5cGVTZXBhcmF0ZWRGZWF0dXJlcyA9IHt9O1xuICAgICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICB2YXIgdHlwZSA9IGZlYXR1cmUuZ2V0KCduZ2VvX2ZlYXR1cmVfdHlwZV8nKTtcblxuICAgICAgICBpZiAoIXR5cGVTZXBhcmF0ZWRGZWF0dXJlc1t0eXBlXSkge1xuICAgICAgICAgIHR5cGVTZXBhcmF0ZWRGZWF0dXJlc1t0eXBlXSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFTb3VyY2UuYXR0cmlidXRlcyAmJiBkYXRhU291cmNlLmF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBmZWF0dXJlLmdldFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB2YXIgZmlsdGVyZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgZGF0YVNvdXJjZS5hdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5hbGlhcykge1xuICAgICAgICAgICAgICBmaWx0ZXJlZFByb3BlcnRpZXNbYXR0cmlidXRlLmFsaWFzXSA9IHByb3BlcnRpZXNbYXR0cmlidXRlLm5hbWVdO1xuICAgICAgICAgICAgICBmZWF0dXJlLnVuc2V0KGF0dHJpYnV0ZS5uYW1lLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpbHRlcmVkUHJvcGVydGllc1thdHRyaWJ1dGUubmFtZV0gPSBwcm9wZXJ0aWVzW2F0dHJpYnV0ZS5uYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmZWF0dXJlLnNldFByb3BlcnRpZXMoZmlsdGVyZWRQcm9wZXJ0aWVzLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHR5cGVTZXBhcmF0ZWRGZWF0dXJlc1t0eXBlXS5wdXNoKGZlYXR1cmUpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvciAodmFyIHR5cGUgaW4gdHlwZVNlcGFyYXRlZEZlYXR1cmVzKSB7XG4gICAgICAgIGxhYmVsID0gdHlwZSA/IHR5cGUgOiBsYWJlbDtcbiAgICAgICAgdmFyIGZlYXR1cmVzQnlUeXBlID0gdHlwZVNlcGFyYXRlZEZlYXR1cmVzW3R5cGVdO1xuICAgICAgICB2YXIgc2hvdWxkUHVzaCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChhY3Rpb24gPT09IG5nZW9RdWVyeUFjdGlvbi5SRVBMQUNFKSB7XG4gICAgICAgICAgc2hvdWxkUHVzaCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGV4aXN0aW5nU291cmNlID0gdm9pZCAwO1xuXG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoX3RoaXMucmVzdWx0Xy5zb3VyY2VzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChzb3VyY2UuaWQgPT09IGlkICYmIHNvdXJjZS5sYWJlbCA9PT0gbGFiZWwpIHtcbiAgICAgICAgICAgICAgZXhpc3RpbmdTb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleGlzdGluZ1NvdXJjZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZmVhdHVyZXNCeVR5cGUpLCBfc3RlcDM7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMygpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgbmV3RmVhdHVyZSA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdGZWF0dXJlSW5kZXggPSBfdGhpcy5mZWF0dXJlSGVscGVyXy5maW5kRmVhdHVyZUluZGV4QnlGaWQoZXhpc3RpbmdTb3VyY2UuZmVhdHVyZXMsIFwiXCIgKyBuZXdGZWF0dXJlLmdldElkKCkpO1xuXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ0ZlYXR1cmVJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSBuZ2VvUXVlcnlBY3Rpb24uQUREKSB7XG4gICAgICAgICAgICAgICAgICBleGlzdGluZ1NvdXJjZS5mZWF0dXJlcy5wdXNoKG5ld0ZlYXR1cmUpO1xuICAgICAgICAgICAgICAgICAgdG90YWwgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gbmdlb1F1ZXJ5QWN0aW9uLlJFTU9WRSkge1xuICAgICAgICAgICAgICAgICAgZXhpc3RpbmdTb3VyY2UuZmVhdHVyZXMuc3BsaWNlKGV4aXN0aW5nRmVhdHVyZUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgIHRvdGFsIC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09IG5nZW9RdWVyeUFjdGlvbi5BREQpIHtcbiAgICAgICAgICAgICAgc2hvdWxkUHVzaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNob3VsZFB1c2gpIHtcbiAgICAgICAgICBfdGhpcy5yZXN1bHRfLnNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZXNCeVR5cGUsXG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgICAgICBsaW1pdDogbGltaXQsXG4gICAgICAgICAgICBwZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHRvb01hbnlSZXN1bHRzOiB0b29NYW55UmVzdWx0cyxcbiAgICAgICAgICAgIHRvdGFsRmVhdHVyZUNvdW50OiB0b3RhbEZlYXR1cmVDb3VudCxcbiAgICAgICAgICAgIGlkZW50aWZpZXJBdHRyaWJ1dGVGaWVsZDogZGF0YVNvdXJjZS5pZGVudGlmaWVyQXR0cmlidXRlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0b3RhbCArPSBmZWF0dXJlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaWRTdHIgaW4gcmVzcG9uc2UpIHtcbiAgICAgIF9sb29wKGlkU3RyKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdF8udG90YWwgPSB0b3RhbDtcbiAgICB0aGlzLnJlc3VsdF8ucGVuZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuY2xlYXJlZF8gPSBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4gTWFwUXVlcmVudDtcbn0oKTtcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb01hcFF1ZXJlbnQnLCBbbmdlb0RhdGFzb3VyY2VEYXRhU291cmNlcy5uYW1lLCBuZ2VvRGF0YXNvdXJjZUhlbHBlci5uYW1lLCBuZ2VvUXVlcnlRdWVyZW50Lm5hbWUsIG5nZW9NaXNjRmVhdHVyZUhlbHBlci5uYW1lXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb01hcFF1ZXJlbnQnLCBNYXBRdWVyZW50KTtcbm1vZHVsZS52YWx1ZSgnbmdlb1F1ZXJ5UmVzdWx0Jywge1xuICBzb3VyY2VzOiBbXSxcbiAgdG90YWw6IDAsXG4gIHBlbmRpbmc6IGZhbHNlXG59KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJleHBvcnQgZGVmYXVsdCB7XG4gIENMSUNLOiAnY2xpY2snLFxuICBEUkFXX0JPWDogJ2RyYXdib3gnLFxuICBEUkFXX1BPTFlHT046ICdkcmF3cG9seWdvbidcbn07IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5pbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvUXVlcnlBY3Rpb24gZnJvbSAnbmdlby9xdWVyeS9BY3Rpb24uanMnO1xuaW1wb3J0IG5nZW9RdWVyeU1vZGUgZnJvbSAnbmdlby9xdWVyeS9Nb2RlLmpzJztcbmltcG9ydCB7IGlzRXZlbnRVc2luQ3RybEtleSB9IGZyb20gJ25nZW8vdXRpbHMuanMnO1xuaW1wb3J0IHsgbGlzdGVuIGFzIG9sRXZlbnRzTGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmV4cG9ydCB2YXIgUXVlcnlNb2RlU2VsZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIFF1ZXJ5TW9kZVNlbGVjdG9yLiRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCJdO1xuXG4gIGZ1bmN0aW9uIFF1ZXJ5TW9kZVNlbGVjdG9yKCRyb290U2NvcGUpIHtcbiAgICB0aGlzLmtleUFjdGlvbkFkZF8gPSAnYSc7XG4gICAgdGhpcy5rZXlBY3Rpb25SZW1vdmVfID0gJ3gnO1xuICAgIHRoaXMua2V5c0FjdGlvbl8gPSBbdGhpcy5rZXlBY3Rpb25BZGRfLCB0aGlzLmtleUFjdGlvblJlbW92ZV9dO1xuICAgIHRoaXMuYWN0aW9uXyA9IG5nZW9RdWVyeUFjdGlvbi5SRVBMQUNFO1xuICAgIHRoaXMucGVuZGluZ18gPSBmYWxzZTtcbiAgICB0aGlzLndhc1BlbmRpbmdfID0gZmFsc2U7XG4gICAgdGhpcy5wcmV2aW91c0FjdGlvbl8gPSBudWxsO1xuICAgIHRoaXMubW9kZV8gPSBuZ2VvUXVlcnlNb2RlLkNMSUNLO1xuICAgIHRoaXMucHJldmlvdXNNb2RlXyA9IG51bGw7XG4gICAgdGhpcy5hY3RpdmVBY3Rpb25LZXlfID0gbnVsbDtcbiAgICB0aGlzLnJvb3RTY29wZV8gPSAkcm9vdFNjb3BlO1xuICAgIG9sRXZlbnRzTGlzdGVuKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bl8sIHRoaXMpO1xuICAgIG9sRXZlbnRzTGlzdGVuKGRvY3VtZW50LCAna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwXywgdGhpcyk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gUXVlcnlNb2RlU2VsZWN0b3IucHJvdG90eXBlO1xuXG4gIF9wcm90by5oYW5kbGVLZXlEb3duXyA9IGZ1bmN0aW9uIGhhbmRsZUtleURvd25fKGV2dCkge1xuICAgIGlmICghKGV2dCBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGVuZGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBrZXkgPSBldnQua2V5O1xuXG4gICAgaWYgKHRoaXMua2V5c0FjdGlvbl8uaW5jbHVkZXMoa2V5KSAmJiAhdGhpcy5wcmV2aW91c0FjdGlvbl8pIHtcbiAgICAgIHRoaXMucHJldmlvdXNBY3Rpb25fID0gdGhpcy5hY3Rpb247XG4gICAgICB2YXIgbmV3QWN0aW9uO1xuXG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlIHRoaXMua2V5QWN0aW9uQWRkXzpcbiAgICAgICAgICBuZXdBY3Rpb24gPSBuZ2VvUXVlcnlBY3Rpb24uQUREO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgdGhpcy5rZXlBY3Rpb25SZW1vdmVfOlxuICAgICAgICAgIG5ld0FjdGlvbiA9IG5nZW9RdWVyeUFjdGlvbi5SRU1PVkU7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld0FjdGlvbikge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IG5ld0FjdGlvbjtcbiAgICAgICAgdGhpcy5hY3RpdmVBY3Rpb25LZXlfID0ga2V5O1xuICAgICAgICB0aGlzLnJvb3RTY29wZV8uJGFwcGx5KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0V2ZW50VXNpbkN0cmxLZXkoZXZ0KSAmJiAhdGhpcy5wcmV2aW91c01vZGVfKSB7XG4gICAgICB0aGlzLnByZXZpb3VzTW9kZV8gPSB0aGlzLm1vZGU7XG4gICAgICB0aGlzLm1vZGUgPSBuZ2VvUXVlcnlNb2RlLkRSQVdfQk9YO1xuICAgICAgdGhpcy5yb290U2NvcGVfLiRhcHBseSgpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlS2V5VXBfID0gZnVuY3Rpb24gaGFuZGxlS2V5VXBfKGV2dCkge1xuICAgIGlmICghKGV2dCBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHVwZGF0ZVNjb3BlID0gZmFsc2U7XG5cbiAgICBpZiAoaXNFdmVudFVzaW5DdHJsS2V5KGV2dCkgJiYgdGhpcy5wcmV2aW91c01vZGVfKSB7XG4gICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XG4gICAgICAgIHRoaXMud2FzUGVuZGluZ18gPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlID0gdGhpcy5wcmV2aW91c01vZGVfO1xuICAgICAgICB0aGlzLnByZXZpb3VzTW9kZV8gPSBudWxsO1xuICAgICAgICB1cGRhdGVTY29wZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGtleSA9IGV2dC5rZXk7XG5cbiAgICBpZiAodGhpcy5hY3RpdmVBY3Rpb25LZXlfID09PSBrZXkgJiYgdGhpcy5wcmV2aW91c0FjdGlvbl8pIHtcbiAgICAgIHRoaXMuYWN0aW9uID0gdGhpcy5wcmV2aW91c0FjdGlvbl87XG4gICAgICB0aGlzLnByZXZpb3VzQWN0aW9uXyA9IG51bGw7XG4gICAgICB0aGlzLmFjdGl2ZUFjdGlvbktleV8gPSBudWxsO1xuICAgICAgdXBkYXRlU2NvcGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh1cGRhdGVTY29wZSkge1xuICAgICAgdGhpcy5yb290U2NvcGVfLiRhcHBseSgpO1xuICAgIH1cbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoUXVlcnlNb2RlU2VsZWN0b3IsIFt7XG4gICAga2V5OiBcImFjdGlvblwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uXztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KGFjdGlvbikge1xuICAgICAgdGhpcy5hY3Rpb25fID0gYWN0aW9uO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJtb2RlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5tb2RlXztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG1vZGUpIHtcbiAgICAgIHRoaXMubW9kZV8gPSBtb2RlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwZW5kaW5nXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wZW5kaW5nXztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHBlbmRpbmcpIHtcbiAgICAgIHRoaXMucGVuZGluZ18gPSBwZW5kaW5nO1xuXG4gICAgICBpZiAoIXBlbmRpbmcgJiYgdGhpcy53YXNQZW5kaW5nXyAmJiB0aGlzLnByZXZpb3VzTW9kZV8pIHtcbiAgICAgICAgdGhpcy53YXNQZW5kaW5nXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1vZGUgPSB0aGlzLnByZXZpb3VzTW9kZV87XG4gICAgICAgIHRoaXMucHJldmlvdXNNb2RlXyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFF1ZXJ5TW9kZVNlbGVjdG9yO1xufSgpO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUXVlcnlNb2RlU2VsZWN0b3InLCBbXSk7XG5tb2R1bGUuc2VydmljZSgnbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yJywgUXVlcnlNb2RlU2VsZWN0b3IpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAoKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IHJldHVybiBpdC5uZXh0LmJpbmQoaXQpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb0RhdGFzb3VyY2VPR0MgZnJvbSAnbmdlby9kYXRhc291cmNlL09HQy5qcyc7XG5pbXBvcnQgbmdlb0ZpbHRlclJ1bGVIZWxwZXIgZnJvbSAnbmdlby9maWx0ZXIvUnVsZUhlbHBlci5qcyc7XG5pbXBvcnQgbmdlb01pc2NXTVNUaW1lIGZyb20gJ25nZW8vbWlzYy9XTVNUaW1lLmpzJztcbmltcG9ydCAqIGFzIG9sRm9ybWF0RmlsdGVyIGZyb20gJ29sL2Zvcm1hdC9maWx0ZXIuanMnO1xuaW1wb3J0IG9sRm9ybWF0V0ZTIGZyb20gJ29sL2Zvcm1hdC9XRlMuanMnO1xuaW1wb3J0IG5nZW9XRlNEZXNjcmliZUZlYXR1cmVUeXBlIGZyb20gJ25nZW8vV0ZTRGVzY3JpYmVGZWF0dXJlVHlwZS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRXTVNDYXBhYmlsaXRpZXMgZnJvbSAnb2wvZm9ybWF0L1dNU0NhcGFiaWxpdGllcy5qcyc7XG5pbXBvcnQgb2xGb3JtYXRXTVRTQ2FwYWJpbGl0aWVzIGZyb20gJ29sL2Zvcm1hdC9XTVRTQ2FwYWJpbGl0aWVzLmpzJztcbmltcG9ydCB7IGFwcGVuZFBhcmFtcyBhcyBvbFVyaUFwcGVuZFBhcmFtcyB9IGZyb20gJ29sL3VyaS5qcyc7XG5pbXBvcnQgKiBhcyBvbEV4dGVudCBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IG9sU291cmNlSW1hZ2VXTVMgZnJvbSAnb2wvc291cmNlL0ltYWdlV01TLmpzJztcbmV4cG9ydCB2YXIgUXVlcmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgUXVlcmVudC4kaW5qZWN0ID0gW1wiJGh0dHBcIiwgXCIkcVwiLCBcIm5nZW9SdWxlSGVscGVyXCIsIFwibmdlb1dNU1RpbWVcIl07XG5cbiAgZnVuY3Rpb24gUXVlcmVudCgkaHR0cCwgJHEsIG5nZW9SdWxlSGVscGVyLCBuZ2VvV01TVGltZSkge1xuICAgIHRoaXMuaHR0cF8gPSAkaHR0cDtcbiAgICB0aGlzLnFfID0gJHE7XG4gICAgdGhpcy5uZ2VvUnVsZUhlbHBlcl8gPSBuZ2VvUnVsZUhlbHBlcjtcbiAgICB0aGlzLm5nZW9XTVNUaW1lXyA9IG5nZW9XTVNUaW1lO1xuICAgIHRoaXMucmVxdWVzdENhbmNlbGVyc18gPSBbXTtcbiAgICB0aGlzLndtc0dldENhcGFiaWxpdGllc1Byb21pc2VzXyA9IHt9O1xuICAgIHRoaXMud210c0dldENhcGFiaWxpdGllc1Byb21pc2VzXyA9IHt9O1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFF1ZXJlbnQucHJvdG90eXBlO1xuXG4gIF9wcm90by5pc3N1ZSA9IGZ1bmN0aW9uIGlzc3VlKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB2YXIgbWFwID0gb3B0aW9ucy5tYXA7XG4gICAgdGhpcy5jYW5jZWxTdGlsbFJ1bm5pbmdSZXF1ZXN0c18oKTtcbiAgICB2YXIgcXVlcnlhYmxlRGF0YVNvdXJjZXM7XG5cbiAgICBpZiAob3B0aW9ucy5xdWVyeWFibGVEYXRhU291cmNlcykge1xuICAgICAgcXVlcnlhYmxlRGF0YVNvdXJjZXMgPSBvcHRpb25zLnF1ZXJ5YWJsZURhdGFTb3VyY2VzO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZXMgPSBvcHRpb25zLmRhdGFTb3VyY2VzO1xuICAgICAgY29uc29sZS5hc3NlcnQoZGF0YVNvdXJjZXMsICdEYXRhU291cmNlcyBzaG91bGQgYmUgc2V0Jyk7XG4gICAgICBxdWVyeWFibGVEYXRhU291cmNlcyA9IHRoaXMuZ2V0UXVlcnlhYmxlRGF0YVNvdXJjZXMoZGF0YVNvdXJjZXMsIG1hcCk7XG4gICAgfVxuXG4gICAgdmFyIGNvbWJpbmVkV0ZTRGF0YVNvdXJjZXMgPSB0aGlzLmdldENvbWJpbmFibGVXRlNEYXRhU291cmNlc18ocXVlcnlhYmxlRGF0YVNvdXJjZXMud2ZzKTtcbiAgICBwcm9taXNlcy5wdXNoKHRoaXMuaXNzdWVDb21iaW5lZFdGU18oY29tYmluZWRXRlNEYXRhU291cmNlcywgb3B0aW9ucykpO1xuICAgIHZhciBjb29yZGluYXRlID0gb3B0aW9ucy5jb29yZGluYXRlO1xuXG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgIHZhciBjb21iaW5lZFdNU0RhdGFTb3VyY2VzID0gdGhpcy5nZXRDb21iaW5hYmxlV01TRGF0YVNvdXJjZXNfKHF1ZXJ5YWJsZURhdGFTb3VyY2VzLndtcyk7XG4gICAgICBwcm9taXNlcy5wdXNoKHRoaXMuaXNzdWVDb21iaW5lZFdNU18oY29tYmluZWRXTVNEYXRhU291cmNlcywgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnFfLmFsbChwcm9taXNlcykudGhlbihoYW5kbGVDb21iaW5lZFF1ZXJ5UmVzdWx0Xyk7XG4gIH07XG5cbiAgX3Byb3RvLmdldFF1ZXJ5YWJsZURhdGFTb3VyY2VzID0gZnVuY3Rpb24gZ2V0UXVlcnlhYmxlRGF0YVNvdXJjZXMoZGF0YVNvdXJjZXMsIG1hcCkge1xuICAgIHZhciBxdWVyeWFibGVEYXRhU291cmNlcyA9IHtcbiAgICAgIHdmczogW10sXG4gICAgICB3bXM6IFtdXG4gICAgfTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpO1xuXG4gICAgaWYgKHJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRhdGFTb3VyY2VzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBkYXRhU291cmNlID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGlmICghdGhpcy5pc0RhdGFTb3VyY2VRdWVyeWFibGVfKGRhdGFTb3VyY2UsIHJlc29sdXRpb24pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YVNvdXJjZSBpbnN0YW5jZW9mIG5nZW9EYXRhc291cmNlT0dDKSB7XG4gICAgICAgIGlmIChkYXRhU291cmNlLnN1cHBvcnRzV0ZTKSB7XG4gICAgICAgICAgcXVlcnlhYmxlRGF0YVNvdXJjZXMud2ZzLnB1c2goZGF0YVNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVlcnlhYmxlRGF0YVNvdXJjZXMud21zLnB1c2goZGF0YVNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcXVlcnlhYmxlRGF0YVNvdXJjZXM7XG4gIH07XG5cbiAgX3Byb3RvLndmc0Rlc2NyaWJlRmVhdHVyZVR5cGUgPSBmdW5jdGlvbiB3ZnNEZXNjcmliZUZlYXR1cmVUeXBlKGRhdGFTb3VyY2UpIHtcbiAgICBpZiAoIWRhdGFTb3VyY2Uuc3VwcG9ydHNBdHRyaWJ1dGVzKSB7XG4gICAgICB0aHJvdyBcIlRoZSBkYXRhIHNvdXJjZSBtdXN0IHN1cHBvcnQgV0ZTLCBoYXZlIGEgc2luZ2xlIE9HQ0xheWVyIHRoYXRcXG4gICAgICBpcyBxdWVyeWFibGUgaW4gb3JkZXIgdG8gaXNzdWUgV0ZTIERlc2NyaWJlRmVhdHVyZVR5cGUgcmVxdWVzdHNcIjtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGFTb3VyY2Uud2ZzVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgV0ZTIFVSTCcpO1xuICAgIH1cblxuICAgIHZhciB3ZnNMYXllck5hbWVzID0gZGF0YVNvdXJjZS5nZXRXRlNMYXllck5hbWVzKCk7XG4gICAgdmFyIHVybCA9IG9sVXJpQXBwZW5kUGFyYW1zKGRhdGFTb3VyY2Uud2ZzVXJsLCB7XG4gICAgICAnUkVRVUVTVCc6ICdEZXNjcmliZUZlYXR1cmVUeXBlJyxcbiAgICAgICdTRVJWSUNFJzogJ1dGUycsXG4gICAgICAnVkVSU0lPTic6ICcyLjAuMCcsXG4gICAgICAnVFlQRU5BTUUnOiB3ZnNMYXllck5hbWVzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaHR0cF8uZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHZhciBmb3JtYXQgPSBuZXcgbmdlb1dGU0Rlc2NyaWJlRmVhdHVyZVR5cGUoKTtcbiAgICAgIHJldHVybiBmb3JtYXQucmVhZChyZXNwb25zZS5kYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8ud21zRmluZExheWVyQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIHdtc0ZpbmRMYXllckNhcGFiaWxpdHkobGF5ZXJDYXBhYmlsaXRpZXMsIGxheWVyTmFtZSkge1xuICAgIHZhciBmb3VuZCA9IG51bGw7XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShsYXllckNhcGFiaWxpdGllcyksIF9zdGVwMjsgIShfc3RlcDIgPSBfaXRlcmF0b3IyKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgbGF5ZXJDYXBhYmlsaXR5ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICBpZiAobGF5ZXJDYXBhYmlsaXR5Lk5hbWUgPT09IGxheWVyTmFtZSkge1xuICAgICAgICBmb3VuZCA9IGxheWVyQ2FwYWJpbGl0eTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKGxheWVyQ2FwYWJpbGl0eS5MYXllcikge1xuICAgICAgICBmb3VuZCA9IHRoaXMud21zRmluZExheWVyQ2FwYWJpbGl0eShsYXllckNhcGFiaWxpdHkuTGF5ZXIsIGxheWVyTmFtZSk7XG5cbiAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH07XG5cbiAgX3Byb3RvLndtc0dldENhcGFiaWxpdGllcyA9IGZ1bmN0aW9uIHdtc0dldENhcGFiaWxpdGllcyhiYXNlVXJsLCBvcHRfY2FjaGUpIHtcbiAgICB2YXIgY2FjaGUgPSBvcHRfY2FjaGUgIT09IGZhbHNlO1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAnUkVRVUVTVCc6ICdHZXRDYXBhYmlsaXRpZXMnLFxuICAgICAgJ1NFUlZJQ0UnOiAnV01TJyxcbiAgICAgICdWRVJTSU9OJzogJzEuMy4wJ1xuICAgIH07XG4gICAgdmFyIHVybCA9IG9sVXJpQXBwZW5kUGFyYW1zKGJhc2VVcmwsIHBhcmFtcyk7XG4gICAgdmFyIHByb21pc2U7XG5cbiAgICBpZiAoIWNhY2hlIHx8ICF0aGlzLndtc0dldENhcGFiaWxpdGllc1Byb21pc2VzX1tiYXNlVXJsXSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMuaHR0cF8uZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGZvcm1hdCA9IG5ldyBvbEZvcm1hdFdNU0NhcGFiaWxpdGllcygpO1xuICAgICAgICByZXR1cm4gZm9ybWF0LnJlYWQocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGNhY2hlICYmIHRoaXMud21zR2V0Q2FwYWJpbGl0aWVzUHJvbWlzZXNfW2Jhc2VVcmxdKSB7XG4gICAgICBwcm9taXNlID0gdGhpcy53bXNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc19bYmFzZVVybF07XG4gICAgfVxuXG4gICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJvbWlzZScpO1xuICAgIH1cblxuICAgIGlmIChjYWNoZSAmJiAhdGhpcy53bXNHZXRDYXBhYmlsaXRpZXNQcm9taXNlc19bYmFzZVVybF0pIHtcbiAgICAgIHRoaXMud21zR2V0Q2FwYWJpbGl0aWVzUHJvbWlzZXNfW2Jhc2VVcmxdID0gcHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfTtcblxuICBfcHJvdG8ud210c0ZpbmRMYXllckNhcGFiaWxpdHkgPSBmdW5jdGlvbiB3bXRzRmluZExheWVyQ2FwYWJpbGl0eShsYXllckNhcGFiaWxpdGllcywgbGF5ZXJOYW1lKSB7XG4gICAgdmFyIGZvdW5kID0gbnVsbDtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGxheWVyQ2FwYWJpbGl0aWVzKSwgX3N0ZXAzOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMoKSkuZG9uZTspIHtcbiAgICAgIHZhciBsYXllckNhcGFiaWxpdHkgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgIGlmIChsYXllckNhcGFiaWxpdHkuSWRlbnRpZmllciA9PT0gbGF5ZXJOYW1lKSB7XG4gICAgICAgIGZvdW5kID0gbGF5ZXJDYXBhYmlsaXR5O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH07XG5cbiAgX3Byb3RvLndtdHNHZXRDYXBhYmlsaXRpZXMgPSBmdW5jdGlvbiB3bXRzR2V0Q2FwYWJpbGl0aWVzKHVybCwgb3B0X2NhY2hlKSB7XG4gICAgdmFyIGNhY2hlID0gb3B0X2NhY2hlICE9PSBmYWxzZTtcbiAgICB2YXIgcHJvbWlzZTtcblxuICAgIGlmICghY2FjaGUgfHwgIXRoaXMud210c0dldENhcGFiaWxpdGllc1Byb21pc2VzX1t1cmxdKSB7XG4gICAgICBwcm9taXNlID0gdGhpcy5odHRwXy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB2YXIgZm9ybWF0ID0gbmV3IG9sRm9ybWF0V01UU0NhcGFiaWxpdGllcygpO1xuICAgICAgICByZXR1cm4gZm9ybWF0LnJlYWQocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGNhY2hlICYmIHRoaXMud210c0dldENhcGFiaWxpdGllc1Byb21pc2VzX1t1cmxdKSB7XG4gICAgICBwcm9taXNlID0gdGhpcy53bXRzR2V0Q2FwYWJpbGl0aWVzUHJvbWlzZXNfW3VybF07XG4gICAgfVxuXG4gICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJvbWlzZScpO1xuICAgIH1cblxuICAgIGlmIChjYWNoZSAmJiAhdGhpcy53bXRzR2V0Q2FwYWJpbGl0aWVzUHJvbWlzZXNfW3VybF0pIHtcbiAgICAgIHRoaXMud210c0dldENhcGFiaWxpdGllc1Byb21pc2VzX1t1cmxdID0gcHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlUXVlcnlSZXN1bHRfID0gZnVuY3Rpb24gaGFuZGxlUXVlcnlSZXN1bHRfKGRhdGFTb3VyY2VzLCBsaW1pdCwgd2ZzLCByZXNwb25zZSkge1xuICAgIHZhciBoYXNoID0ge307XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShkYXRhU291cmNlcyksIF9zdGVwNDsgIShfc3RlcDQgPSBfaXRlcmF0b3I0KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwNC52YWx1ZTtcbiAgICAgIHZhciBkYXRhU291cmNlSWQgPSBkYXRhU291cmNlLmlkO1xuXG4gICAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdmFyIHRvb01hbnlGZWF0dXJlcyA9IHRydWU7XG4gICAgICAgIHZhciB0b3RhbEZlYXR1cmVDb3VudCA9IHJlc3BvbnNlO1xuICAgICAgICB0aGlzLnNldFVuaXF1ZUlkc18oZmVhdHVyZXMsIGRhdGFTb3VyY2UuaWQpO1xuICAgICAgICBoYXNoW2RhdGFTb3VyY2VJZF0gPSB7XG4gICAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVzLFxuICAgICAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgICAgICB0b29NYW55RmVhdHVyZXM6IHRvb01hbnlGZWF0dXJlcyxcbiAgICAgICAgICB0b3RhbEZlYXR1cmVDb3VudDogdG90YWxGZWF0dXJlQ291bnRcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfZmVhdHVyZXMgPSBkYXRhU291cmNlIGluc3RhbmNlb2Ygbmdlb0RhdGFzb3VyY2VPR0MgPyB0aGlzLnJlYWRBbmRUeXBlRmVhdHVyZXNfKGRhdGFTb3VyY2UsIHJlc3BvbnNlLmRhdGEsIHdmcykgOiBbXTtcblxuICAgICAgICB0aGlzLnNldFVuaXF1ZUlkc18oX2ZlYXR1cmVzLCBkYXRhU291cmNlLmlkKTtcbiAgICAgICAgaGFzaFtkYXRhU291cmNlSWRdID0ge1xuICAgICAgICAgIGZlYXR1cmVzOiBfZmVhdHVyZXMsXG4gICAgICAgICAgbGltaXQ6IGxpbWl0XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG4gIH07XG5cbiAgX3Byb3RvLnJlYWRBbmRUeXBlRmVhdHVyZXNfID0gZnVuY3Rpb24gcmVhZEFuZFR5cGVGZWF0dXJlc18oZGF0YVNvdXJjZSwgZGF0YSwgd2ZzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIHZhciByZWFkRmVhdHVyZXM7XG4gICAgdmFyIGZlYXR1cmVUeXBlcyA9IHRoaXMuZ2V0U2V0T2xGb3JtYXRUeXBlc18oZGF0YVNvdXJjZSwgd2ZzKS5zbGljZSgpO1xuICAgIGZlYXR1cmVUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBfdGhpcy5nZXRTZXRPbEZvcm1hdFR5cGVzXyhkYXRhU291cmNlLCB3ZnMsIFt0eXBlXSk7XG5cbiAgICAgIGlmICh3ZnMpIHtcbiAgICAgICAgaWYgKCFkYXRhU291cmNlLndmc0Zvcm1hdCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB3ZnNGb3JtYXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlYWRGZWF0dXJlcyA9IGRhdGFTb3VyY2Uud2ZzRm9ybWF0LnJlYWRGZWF0dXJlcyhkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghZGF0YVNvdXJjZS53bXNGb3JtYXQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgd21zRm9ybWF0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZWFkRmVhdHVyZXMgPSBkYXRhU291cmNlLndtc0Zvcm1hdC5yZWFkRmVhdHVyZXMoZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWFkRmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZWFkRmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZSkge1xuICAgICAgICAgIGZlYXR1cmUuc2V0KCduZ2VvX2ZlYXR1cmVfdHlwZV8nLCB0eXBlKTtcbiAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmdldFNldE9sRm9ybWF0VHlwZXNfKGRhdGFTb3VyY2UsIHdmcywgZmVhdHVyZVR5cGVzKTtcbiAgICByZXR1cm4gZmVhdHVyZXM7XG4gIH07XG5cbiAgX3Byb3RvLmdldFNldE9sRm9ybWF0VHlwZXNfID0gZnVuY3Rpb24gZ2V0U2V0T2xGb3JtYXRUeXBlc18oZGF0YVNvdXJjZSwgd2ZzLCBvcHRfdHlwZXMpIHtcbiAgICB2YXIgdHlwZXM7XG5cbiAgICBpZiAod2ZzKSB7XG4gICAgICBpZiAoIWRhdGFTb3VyY2Uud2ZzRm9ybWF0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB3ZnNGb3JtYXQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdF90eXBlcykge1xuICAgICAgICBkYXRhU291cmNlLndmc0Zvcm1hdC5zZXRGZWF0dXJlVHlwZShvcHRfdHlwZXMpO1xuICAgICAgfVxuXG4gICAgICB0eXBlcyA9IGRhdGFTb3VyY2Uud2ZzRm9ybWF0LmdldEZlYXR1cmVUeXBlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghZGF0YVNvdXJjZS53bXNGb3JtYXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHdtc0Zvcm1hdCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0X3R5cGVzKSB7XG4gICAgICAgIGRhdGFTb3VyY2Uud21zRm9ybWF0LnNldExheWVycyhvcHRfdHlwZXMpO1xuICAgICAgfVxuXG4gICAgICB0eXBlcyA9IGRhdGFTb3VyY2Uud21zRm9ybWF0LmdldExheWVycygpO1xuICAgIH1cblxuICAgIGlmICghdHlwZXMpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0eXBlcykgPyB0eXBlcyA6IFt0eXBlc107XG4gIH07XG5cbiAgX3Byb3RvLmlzc3VlQ29tYmluZWRXRlNfID0gZnVuY3Rpb24gaXNzdWVDb21iaW5lZFdGU18oY29tYmluZWREYXRhU291cmNlcywgb3B0aW9ucykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2VzID0gW107XG4gICAgdmFyIG1heEZlYXR1cmVzID0gb3B0aW9ucy5saW1pdDtcbiAgICB2YXIgbWFwID0gb3B0aW9ucy5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgdmFyIHByb2plY3Rpb24gPSB2aWV3LmdldFByb2plY3Rpb24oKTtcbiAgICB2YXIgc3JzTmFtZSA9IHByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciB3ZnNDb3VudCA9IGZhbHNlO1xuXG4gICAgaWYgKHJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlc29sdXRpb24nKTtcbiAgICB9XG5cbiAgICB2YXIgYmJveDtcbiAgICB2YXIgY29vcmRpbmF0ZSA9IG9wdGlvbnMuY29vcmRpbmF0ZTtcblxuICAgIGlmIChjb29yZGluYXRlKSB7XG4gICAgICB2YXIgdG9sZXJhbmNlID0gb3B0aW9ucy50b2xlcmFuY2U7XG4gICAgICBjb25zb2xlLmFzc2VydCh0b2xlcmFuY2UpO1xuICAgICAgYmJveCA9IG9sRXh0ZW50LmJ1ZmZlcihvbEV4dGVudC5jcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUpLCB0b2xlcmFuY2UgKiByZXNvbHV0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmJveCA9IG9wdGlvbnMuZXh0ZW50O1xuICAgIH1cblxuICAgIHZhciB3ZnNGb3JtYXQgPSBuZXcgb2xGb3JtYXRXRlMoKTtcbiAgICB2YXIgeG1sU2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG4gICAgdmFyIGhhc0F0TGVhc3RPbmVRdWVyeUljb25Qb3NpdGlvbiA9IGZhbHNlO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZXMgPSBfc3RlcDUudmFsdWU7XG4gICAgICB2YXIgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMgPSBudWxsO1xuICAgICAgdmFyIGZlYXR1cmVUeXBlc05hbWVzID0gW107XG4gICAgICB2YXIgZmVhdHVyZVR5cGVzT2JqZWN0cyA9IFtdO1xuICAgICAgdmFyIHVybCA9IG51bGw7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG5cbiAgICAgIGlmIChvcHRpb25zLmJib3hBc0dFVFBhcmFtICYmIGJib3gpIHtcbiAgICAgICAgcGFyYW1zLmJib3ggPSBiYm94LmpvaW4oJywnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMigpIHtcbiAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcDYudmFsdWU7XG4gICAgICAgIHZhciBjdXJyZW50RmVhdHVyZVR5cGVzTmFtZXMgPSBkYXRhU291cmNlLmdldEluUmFuZ2VXRlNMYXllck5hbWVzKHJlc29sdXRpb24sIHRydWUpO1xuICAgICAgICB2YXIgZ2VvbWV0cnlOYW1lID0gZGF0YVNvdXJjZS5nZW9tZXRyeU5hbWUoY3VycmVudEZlYXR1cmVUeXBlc05hbWVzWzBdKTtcblxuICAgICAgICBpZiAoIWdldEZlYXR1cmVDb21tb25PcHRpb25zKSB7XG4gICAgICAgICAgdmFyIGZlYXR1cmVOUyA9IGRhdGFTb3VyY2Uud2ZzRmVhdHVyZU5TO1xuICAgICAgICAgIHZhciBmZWF0dXJlUHJlZml4ID0gZGF0YVNvdXJjZS53ZnNGZWF0dXJlUHJlZml4O1xuICAgICAgICAgIHZhciBvdXRwdXRGb3JtYXQgPSBkYXRhU291cmNlLndmc091dHB1dEZvcm1hdDtcblxuICAgICAgICAgIGlmICghZ2VvbWV0cnlOYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZ2VvbWV0cnlOYW1lJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICBiYm94OiBiYm94LFxuICAgICAgICAgICAgZmVhdHVyZU5TOiBmZWF0dXJlTlMsXG4gICAgICAgICAgICBmZWF0dXJlUHJlZml4OiBmZWF0dXJlUHJlZml4LFxuICAgICAgICAgICAgZ2VvbWV0cnlOYW1lOiBnZW9tZXRyeU5hbWUsXG4gICAgICAgICAgICBvdXRwdXRGb3JtYXQ6IG91dHB1dEZvcm1hdCxcbiAgICAgICAgICAgIHNyc05hbWU6IHNyc05hbWUsXG4gICAgICAgICAgICBmZWF0dXJlVHlwZXM6IFtdXG4gICAgICAgICAgfTtcbiAgICAgICAgICB1cmwgPSBkYXRhU291cmNlLndmc1VybDtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgZGF0YVNvdXJjZS5hY3RpdmVEaW1lbnNpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZlYXR1cmVUeXBlc05hbWVzID0gZmVhdHVyZVR5cGVzTmFtZXMuY29uY2F0KGN1cnJlbnRGZWF0dXJlVHlwZXNOYW1lcyk7XG4gICAgICAgIHZhciBmaWx0ZXIgPSBudWxsO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmZpbHRlcikge1xuICAgICAgICAgIGZpbHRlciA9IF90aGlzMi5uZ2VvUnVsZUhlbHBlcl8uY3JlYXRlRmlsdGVyKHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsXG4gICAgICAgICAgICBmaWx0ZXI6IG9wdGlvbnMuZmlsdGVyLFxuICAgICAgICAgICAgaW5jRGltZW5zaW9uczogdHJ1ZSxcbiAgICAgICAgICAgIGluY1RpbWU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhU291cmNlLmZpbHRlclJ1bGVzICYmIGRhdGFTb3VyY2UuZmlsdGVyUnVsZXMubGVuZ3RoIHx8IGRhdGFTb3VyY2UudGltZVJhbmdlVmFsdWUgfHwgZGF0YVNvdXJjZS5kaW1lbnNpb25zRmlsdGVyc0NvbmZpZyAmJiBPYmplY3Qua2V5cyhkYXRhU291cmNlLmRpbWVuc2lvbnNGaWx0ZXJzQ29uZmlnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoZGF0YVNvdXJjZXMubGVuZ3RoID09PSAxIHx8ICEoZGF0YVNvdXJjZS50aW1lUmFuZ2VWYWx1ZSB8fCBkYXRhU291cmNlLmZpbHRlclJ1bGVzICYmIGRhdGFTb3VyY2UuZmlsdGVyUnVsZXMubGVuZ3RoKSwgXCJBIGRhdGEgc291cmNlIGhhdmluZyBmaWx0ZXJSdWxlcyBvciB0aW1lUmFuZ2VWYWx1ZSBzaG91bGQgaXNzdWVcXG4gICAgICAgICAgICBhIHNpbmdsZSBxdWVyeSwgYWxvbmUuXCIpO1xuICAgICAgICAgIGZpbHRlciA9IF90aGlzMi5uZ2VvUnVsZUhlbHBlcl8uY3JlYXRlRmlsdGVyKHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsXG4gICAgICAgICAgICBpbmNEaW1lbnNpb25zOiB0cnVlLFxuICAgICAgICAgICAgaW5jVGltZTogdHJ1ZSxcbiAgICAgICAgICAgIHNyc05hbWU6IHNyc05hbWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmdlb21ldHJ5KSB7XG4gICAgICAgICAgdmFyIHNwYXRpYWxGaWx0ZXIgPSBvbEZvcm1hdEZpbHRlci5pbnRlcnNlY3RzKGdlb21ldHJ5TmFtZSwgb3B0aW9ucy5nZW9tZXRyeSwgc3JzTmFtZSk7XG4gICAgICAgICAgZmlsdGVyID0gX3RoaXMyLm5nZW9SdWxlSGVscGVyXy5qb2luRmlsdGVycyhmaWx0ZXIsIHNwYXRpYWxGaWx0ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbHRlcikge1xuICAgICAgICAgIGdldEZlYXR1cmVDb21tb25PcHRpb25zLmZpbHRlciA9IGZpbHRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb29yZGluYXRlKSB7XG4gICAgICAgICAgdmFyIHF1ZXJ5SWNvblBvc2l0aW9uO1xuXG4gICAgICAgICAgaWYgKGRhdGFTb3VyY2UucXVlcnlJY29uUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGhhc0F0TGVhc3RPbmVRdWVyeUljb25Qb3NpdGlvbiA9IHRydWU7XG4gICAgICAgICAgICBxdWVyeUljb25Qb3NpdGlvbiA9IF90aGlzMi5tYWtlQmJveFdpdGhRdWVyeUljb25Qb3NpdGlvbl8oZGF0YVNvdXJjZS5xdWVyeUljb25Qb3NpdGlvbiwgcmVzb2x1dGlvbiwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICBjb25zb2xlLmFzc2VydChxdWVyeUljb25Qb3NpdGlvbiAhPT0gbnVsbCwgJ0JhZCBxdWVyeUljb25Qb3NpdGlvbiB2YWx1ZXMnKTtcbiAgICAgICAgICAgIHF1ZXJ5SWNvblBvc2l0aW9uID0gb2xFeHRlbnQuZXh0ZW5kKHF1ZXJ5SWNvblBvc2l0aW9uLCBiYm94KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50RmVhdHVyZVR5cGVzTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZmVhdHVyZVR5cGVzT2JqZWN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgZ2VvbWV0cnlOYW1lOiBnZW9tZXRyeU5hbWUsXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIGJib3g6IHF1ZXJ5SWNvblBvc2l0aW9uIHx8IGJib3hcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShkYXRhU291cmNlcyksIF9zdGVwNjsgIShfc3RlcDYgPSBfaXRlcmF0b3I2KCkpLmRvbmU7KSB7XG4gICAgICAgIF9sb29wMigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWdldEZlYXR1cmVDb21tb25PcHRpb25zKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzQXRMZWFzdE9uZVF1ZXJ5SWNvblBvc2l0aW9uKSB7XG4gICAgICAgIGdldEZlYXR1cmVDb21tb25PcHRpb25zLmZlYXR1cmVUeXBlcyA9IGZlYXR1cmVUeXBlc09iamVjdHM7XG4gICAgICAgIGRlbGV0ZSBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucy5iYm94O1xuICAgICAgICBkZWxldGUgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMuZ2VvbWV0cnlOYW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMuZmVhdHVyZVR5cGVzID0gZmVhdHVyZVR5cGVzTmFtZXM7XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB1cmwnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGdldEZlYXR1cmVEZWZlciA9IF90aGlzMi5xXy5kZWZlcigpO1xuXG4gICAgICBwcm9taXNlcy5wdXNoKGdldEZlYXR1cmVEZWZlci5wcm9taXNlLnRoZW4oX3RoaXMyLmhhbmRsZVF1ZXJ5UmVzdWx0Xy5iaW5kKF90aGlzMiwgZGF0YVNvdXJjZXMsIG1heEZlYXR1cmVzLCB0cnVlKSkpO1xuICAgICAgdmFyIGNvdW50UHJvbWlzZSA9IHZvaWQgMDtcblxuICAgICAgaWYgKHdmc0NvdW50KSB7XG4gICAgICAgIHZhciBnZXRDb3VudE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICByZXN1bHRUeXBlOiAnaGl0cydcbiAgICAgICAgfSwgZ2V0RmVhdHVyZUNvbW1vbk9wdGlvbnMpO1xuICAgICAgICB2YXIgZmVhdHVyZUNvdW50WG1sID0gd2ZzRm9ybWF0LndyaXRlR2V0RmVhdHVyZShnZXRDb3VudE9wdGlvbnMpO1xuICAgICAgICB2YXIgZmVhdHVyZUNvdW50UmVxdWVzdCA9IHhtbFNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcoZmVhdHVyZUNvdW50WG1sKTtcblxuICAgICAgICB2YXIgY2FuY2VsZXIgPSBfdGhpczIucmVnaXN0ZXJDYW5jZWxlcl8oKTtcblxuICAgICAgICBjb3VudFByb21pc2UgPSBfdGhpczIuaHR0cF8ucG9zdCh1cmwsIGZlYXR1cmVDb3VudFJlcXVlc3QsIHtcbiAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQveG1sOyBjaGFyc2V0PVVURi04J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZW91dDogY2FuY2VsZXIucHJvbWlzZVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGlmICghZGF0YVNvdXJjZXNbMF0ud2ZzRm9ybWF0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgd2ZzRm9ybWF0Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG1ldGEgPSBkYXRhU291cmNlc1swXS53ZnNGb3JtYXQucmVhZEZlYXR1cmVDb2xsZWN0aW9uTWV0YWRhdGEocmVzcG9uc2UuZGF0YSk7XG5cbiAgICAgICAgICBpZiAoIW1ldGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBtZXRhJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG1ldGEubnVtYmVyT2ZGZWF0dXJlcztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb3VudFByb21pc2UgPSBfdGhpczIucV8ucmVzb2x2ZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWZ0ZXJDb3VudF8gPSBmdW5jdGlvbiBhZnRlckNvdW50XyhudW1iZXJPZkZlYXR1cmVzKSB7XG4gICAgICAgIGlmIChudW1iZXJPZkZlYXR1cmVzID09PSB1bmRlZmluZWQgfHwgbnVtYmVyT2ZGZWF0dXJlcyA8IG1heEZlYXR1cmVzKSB7XG4gICAgICAgICAgdmFyIGdldEZlYXR1cmVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBtYXhGZWF0dXJlczogbWF4RmVhdHVyZXNcbiAgICAgICAgICB9LCBnZXRGZWF0dXJlQ29tbW9uT3B0aW9ucyk7XG4gICAgICAgICAgdmFyIGZlYXR1cmVSZXF1ZXN0WG1sID0gd2ZzRm9ybWF0LndyaXRlR2V0RmVhdHVyZShnZXRGZWF0dXJlT3B0aW9ucyk7XG4gICAgICAgICAgdmFyIGZlYXR1cmVSZXF1ZXN0ID0geG1sU2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyhmZWF0dXJlUmVxdWVzdFhtbCk7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgVVJMIHR5cGUnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX2NhbmNlbGVyID0gX3RoaXMyLnJlZ2lzdGVyQ2FuY2VsZXJfKCk7XG5cbiAgICAgICAgICBfdGhpczIuaHR0cF8ucG9zdCh1cmwsIGZlYXR1cmVSZXF1ZXN0LCB7XG4gICAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3htbDsgY2hhcnNldD1VVEYtOCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aW1lb3V0OiBfY2FuY2VsZXIucHJvbWlzZVxuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBnZXRGZWF0dXJlRGVmZXIucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2V0RmVhdHVyZURlZmVyLnJlc29sdmUobnVtYmVyT2ZGZWF0dXJlcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIGNvdW50UHJvbWlzZS50aGVuKGFmdGVyQ291bnRfKTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoY29tYmluZWREYXRhU291cmNlcyksIF9zdGVwNTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1KCkpLmRvbmU7KSB7XG4gICAgICBfbG9vcCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnFfLmFsbChwcm9taXNlcykudGhlbihoYW5kbGVDb21iaW5lZFF1ZXJ5UmVzdWx0Xyk7XG4gIH07XG5cbiAgX3Byb3RvLm1ha2VCYm94V2l0aFF1ZXJ5SWNvblBvc2l0aW9uXyA9IGZ1bmN0aW9uIG1ha2VCYm94V2l0aFF1ZXJ5SWNvblBvc2l0aW9uXyhxdWVyeUljb25Qb3NpdGlvbiwgcmVzb2x1dGlvbiwgY29vcmRpbmF0ZSkge1xuICAgIHZhciBiYm94ID0gb2xFeHRlbnQuY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZShjb29yZGluYXRlKTtcbiAgICB2YXIgYnVmZmVycyA9IHF1ZXJ5SWNvblBvc2l0aW9uLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAqIHJlc29sdXRpb247XG4gICAgfSk7XG4gICAgdmFyIGxlbmd0aCA9IGJ1ZmZlcnMubGVuZ3RoO1xuXG4gICAgaWYgKCFsZW5ndGggfHwgbGVuZ3RoID4gNCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIG9sRXh0ZW50LmJ1ZmZlcihiYm94LCBidWZmZXJzWzBdKTtcbiAgICB9XG5cbiAgICB2YXIgZm91clZhbHVlc0J1ZmZlcnMgPSBbYnVmZmVyc1swXSwgYnVmZmVyc1sxXSwgbGVuZ3RoID09PSAyID8gYnVmZmVyc1swXSA6IGJ1ZmZlcnNbMl0sIGxlbmd0aCA9PT0gNCA/IGJ1ZmZlcnNbM10gOiBidWZmZXJzWzFdXTtcbiAgICByZXR1cm4gW2Jib3hbMF0gLSBmb3VyVmFsdWVzQnVmZmVyc1sxXSwgYmJveFsxXSAtIGZvdXJWYWx1ZXNCdWZmZXJzWzBdLCBiYm94WzJdICsgZm91clZhbHVlc0J1ZmZlcnNbM10sIGJib3hbM10gKyBmb3VyVmFsdWVzQnVmZmVyc1syXV07XG4gIH07XG5cbiAgX3Byb3RvLmlzc3VlQ29tYmluZWRXTVNfID0gZnVuY3Rpb24gaXNzdWVDb21iaW5lZFdNU18oY29tYmluZWREYXRhU291cmNlcywgb3B0aW9ucykge1xuICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgIHZhciBGRUFUVVJFX0NPVU5UID0gb3B0aW9ucy5saW1pdDtcbiAgICB2YXIgbWFwID0gb3B0aW9ucy5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgdmFyIHByb2plY3Rpb24gPSB2aWV3LmdldFByb2plY3Rpb24oKTtcbiAgICB2YXIgcHJvakNvZGUgPSBwcm9qZWN0aW9uLmdldENvZGUoKTtcblxuICAgIGlmIChyZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXNvbHV0aW9uJyk7XG4gICAgfVxuXG4gICAgdmFyIGNvb3JkaW5hdGUgPSBvcHRpb25zLmNvb3JkaW5hdGU7XG5cbiAgICBpZiAoIWNvb3JkaW5hdGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb29yZGluYXRlJyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoY29tYmluZWREYXRhU291cmNlcyksIF9zdGVwNzsgIShfc3RlcDcgPSBfaXRlcmF0b3I3KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZXMgPSBfc3RlcDcudmFsdWU7XG4gICAgICB2YXIgdXJsID0gdm9pZCAwO1xuICAgICAgdmFyIExBWUVSUyA9IFtdO1xuICAgICAgdmFyIElORk9fRk9STUFUID0gdm9pZCAwO1xuICAgICAgdmFyIGFjdGl2ZURpbWVuc2lvbnNTZXQgPSBmYWxzZTtcbiAgICAgIHZhciBwYXJhbXMgPSB7fTtcbiAgICAgIHZhciBmaWx0ZXJTdHJpbmcgPSBudWxsO1xuICAgICAgdmFyIGZpbHRyYWJsZUxheWVyTmFtZSA9IG51bGw7XG5cbiAgICAgIGZvciAodmFyIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKGRhdGFTb3VyY2VzKSwgX3N0ZXA4OyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgoKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcDgudmFsdWU7XG5cbiAgICAgICAgaWYgKCFJTkZPX0ZPUk1BVCkge1xuICAgICAgICAgIElORk9fRk9STUFUID0gZGF0YVNvdXJjZS53bXNJbmZvRm9ybWF0O1xuICAgICAgICAgIHVybCA9IGRhdGFTb3VyY2Uud21zVXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgTEFZRVJTID0gTEFZRVJTLmNvbmNhdChkYXRhU291cmNlLmdldFdNU0xheWVyTmFtZXModHJ1ZSkpO1xuXG4gICAgICAgIGlmICghYWN0aXZlRGltZW5zaW9uc1NldCkge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1zLCBkYXRhU291cmNlLmFjdGl2ZURpbWVuc2lvbnMpO1xuICAgICAgICAgIGFjdGl2ZURpbWVuc2lvbnNTZXQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFTb3VyY2UuZmlsdGVyUnVsZXMgJiYgZGF0YVNvdXJjZS5maWx0ZXJSdWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydChkYXRhU291cmNlcy5sZW5ndGggPT09IDEpO1xuICAgICAgICAgIGZpbHRyYWJsZUxheWVyTmFtZSA9IGRhdGFTb3VyY2UuZ2V0RmlsdHJhYmxlV0ZTTGF5ZXJOYW1lKCk7XG4gICAgICAgICAgZmlsdGVyU3RyaW5nID0gdGhpcy5uZ2VvUnVsZUhlbHBlcl8uY3JlYXRlRmlsdGVyU3RyaW5nKHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2U6IGRhdGFTb3VyY2UsXG4gICAgICAgICAgICBzcnNOYW1lOiBwcm9qQ29kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFTb3VyY2UudGltZVJhbmdlVmFsdWUgJiYgZGF0YVNvdXJjZS50aW1lUHJvcGVydHkpIHtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydChkYXRhU291cmNlcy5sZW5ndGggPT09IDEpO1xuICAgICAgICAgIHBhcmFtcy5USU1FID0gdGhpcy5uZ2VvV01TVGltZV8uZm9ybWF0V01TVGltZVBhcmFtKGRhdGFTb3VyY2UudGltZVByb3BlcnR5LCBkYXRhU291cmNlLnRpbWVSYW5nZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXJhbXMuTEFZRVJTID0gTEFZRVJTO1xuICAgICAgcGFyYW1zLlFVRVJZX0xBWUVSUyA9IExBWUVSUztcblxuICAgICAgaWYgKGZpbHRlclN0cmluZyAmJiBmaWx0cmFibGVMYXllck5hbWUpIHtcbiAgICAgICAgdmFyIGZpbHRlclBhcmFtVmFsdWUgPSBudWxsO1xuXG4gICAgICAgIGlmIChMQVlFUlMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgZmlsdGVyUGFyYW1WYWx1ZSA9IGZpbHRlclN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgZmlsdGVyUGFyYW1WYWx1ZXMgPSBbXTtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IExBWUVSUy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoTEFZRVJTW2ldID09PSBmaWx0cmFibGVMYXllck5hbWUpIHtcbiAgICAgICAgICAgICAgZmlsdGVyUGFyYW1WYWx1ZXMucHVzaChcIihcIiArIGZpbHRlclN0cmluZyArIFwiKVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpbHRlclBhcmFtVmFsdWVzLnB1c2goJygpJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZmlsdGVyUGFyYW1WYWx1ZSA9IGZpbHRlclBhcmFtVmFsdWVzLmpvaW4oJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zLkZJTFRFUiA9IGZpbHRlclBhcmFtVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB1cmwnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHdtc1NvdXJjZSA9IG5ldyBvbFNvdXJjZUltYWdlV01TKHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBwcm9qZWN0aW9uOiBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKVxuICAgICAgfSk7XG4gICAgICB2YXIgd21zR2V0RmVhdHVyZUluZm9VcmwgPSB3bXNTb3VyY2UuZ2V0RmVhdHVyZUluZm9VcmwoY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgcHJvakNvZGUsIHtcbiAgICAgICAgJ0ZFQVRVUkVfQ09VTlQnOiBGRUFUVVJFX0NPVU5ULFxuICAgICAgICAnSU5GT19GT1JNQVQnOiBJTkZPX0ZPUk1BVFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghd21zR2V0RmVhdHVyZUluZm9VcmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHdtc0dldEZlYXR1cmVJbmZvVXJsJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjYW5jZWxlciA9IHRoaXMucmVnaXN0ZXJDYW5jZWxlcl8oKTtcbiAgICAgIHByb21pc2VzLnB1c2godGhpcy5odHRwXy5nZXQod21zR2V0RmVhdHVyZUluZm9VcmwsIHtcbiAgICAgICAgdGltZW91dDogY2FuY2VsZXIucHJvbWlzZVxuICAgICAgfSkudGhlbih0aGlzLmhhbmRsZVF1ZXJ5UmVzdWx0Xy5iaW5kKHRoaXMsIGRhdGFTb3VyY2VzLCBGRUFUVVJFX0NPVU5ULCBmYWxzZSkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5xXy5hbGwocHJvbWlzZXMpLnRoZW4oaGFuZGxlQ29tYmluZWRRdWVyeVJlc3VsdF8pO1xuICB9O1xuXG4gIF9wcm90by5nZXRDb21iaW5hYmxlV0ZTRGF0YVNvdXJjZXNfID0gZnVuY3Rpb24gZ2V0Q29tYmluYWJsZVdGU0RhdGFTb3VyY2VzXyhkYXRhU291cmNlcykge1xuICAgIHZhciBjb21iaW5hYmxlRGF0YVNvdXJjZXMgPSBbXTtcbiAgICB2YXIgbm90Q29tYmluYWJsZURhdGFTb3VyY2VzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3I5ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShkYXRhU291cmNlcyksIF9zdGVwOTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5KCkpLmRvbmU7KSB7XG4gICAgICB2YXIgZGF0YVNvdXJjZSA9IF9zdGVwOS52YWx1ZTtcblxuICAgICAgaWYgKGRhdGFTb3VyY2UuY29tYmluYWJsZUZvcldGUykge1xuICAgICAgICB2YXIgY29tYmluZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoY29tYmluYWJsZURhdGFTb3VyY2VzKSwgX3N0ZXAxMDsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAoKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgY29tYmluYWJsZURhdGFTb3VyY2UgPSBfc3RlcDEwLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKGRhdGFTb3VyY2UuY29tYmluYWJsZVdpdGhEYXRhU291cmNlRm9yV0ZTKGNvbWJpbmFibGVEYXRhU291cmNlWzBdKSkge1xuICAgICAgICAgICAgY29tYmluYWJsZURhdGFTb3VyY2UucHVzaChkYXRhU291cmNlKTtcbiAgICAgICAgICAgIGNvbWJpbmVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbWJpbmVkKSB7XG4gICAgICAgICAgY29tYmluYWJsZURhdGFTb3VyY2VzLnB1c2goW2RhdGFTb3VyY2VdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm90Q29tYmluYWJsZURhdGFTb3VyY2VzLnB1c2goW2RhdGFTb3VyY2VdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29tYmluYWJsZURhdGFTb3VyY2VzLmNvbmNhdChub3RDb21iaW5hYmxlRGF0YVNvdXJjZXMpO1xuICB9O1xuXG4gIF9wcm90by5nZXRDb21iaW5hYmxlV01TRGF0YVNvdXJjZXNfID0gZnVuY3Rpb24gZ2V0Q29tYmluYWJsZVdNU0RhdGFTb3VyY2VzXyhkYXRhU291cmNlcykge1xuICAgIHZhciBjb21iaW5hYmxlRGF0YVNvdXJjZXMgPSBbXTtcbiAgICB2YXIgbm90Q29tYmluYWJsZURhdGFTb3VyY2VzID0gW107XG5cbiAgICBmb3IgKHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UoZGF0YVNvdXJjZXMpLCBfc3RlcDExOyAhKF9zdGVwMTEgPSBfaXRlcmF0b3IxMSgpKS5kb25lOykge1xuICAgICAgdmFyIGRhdGFTb3VyY2UgPSBfc3RlcDExLnZhbHVlO1xuXG4gICAgICBpZiAoZGF0YVNvdXJjZS5jb21iaW5hYmxlRm9yV01TKSB7XG4gICAgICAgIHZhciBjb21iaW5lZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjEyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShjb21iaW5hYmxlRGF0YVNvdXJjZXMpLCBfc3RlcDEyOyAhKF9zdGVwMTIgPSBfaXRlcmF0b3IxMigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBjb21iaW5hYmxlRGF0YVNvdXJjZSA9IF9zdGVwMTIudmFsdWU7XG5cbiAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5jb21iaW5hYmxlV2l0aERhdGFTb3VyY2VGb3JXTVMoY29tYmluYWJsZURhdGFTb3VyY2VbMF0pKSB7XG4gICAgICAgICAgICBjb21iaW5hYmxlRGF0YVNvdXJjZS5wdXNoKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29tYmluZWQpIHtcbiAgICAgICAgICBjb21iaW5hYmxlRGF0YVNvdXJjZXMucHVzaChbZGF0YVNvdXJjZV0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RDb21iaW5hYmxlRGF0YVNvdXJjZXMucHVzaChbZGF0YVNvdXJjZV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb21iaW5hYmxlRGF0YVNvdXJjZXMuY29uY2F0KG5vdENvbWJpbmFibGVEYXRhU291cmNlcyk7XG4gIH07XG5cbiAgX3Byb3RvLmlzRGF0YVNvdXJjZVF1ZXJ5YWJsZV8gPSBmdW5jdGlvbiBpc0RhdGFTb3VyY2VRdWVyeWFibGVfKGRzLCByZXMpIHtcbiAgICB2YXIgcXVlcnlhYmxlID0gZHMudmlzaWJsZSAmJiBkcy5pblJhbmdlICYmIGRzLnF1ZXJ5YWJsZTtcblxuICAgIGlmIChxdWVyeWFibGUgJiYgZHMgaW5zdGFuY2VvZiBuZ2VvRGF0YXNvdXJjZU9HQyAmJiBkcy5zdXBwb3J0c1dGUykge1xuICAgICAgdmFyIG9nY0RTID0gZHM7XG4gICAgICBxdWVyeWFibGUgPSBvZ2NEUy5pc0FueU9HQ0xheWVySW5SYW5nZShyZXMsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBxdWVyeWFibGU7XG4gIH07XG5cbiAgX3Byb3RvLnNldFVuaXF1ZUlkc18gPSBmdW5jdGlvbiBzZXRVbmlxdWVJZHNfKGZlYXR1cmVzLCBkYXRhU291cmNlSWQpIHtcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICBpZiAoZmVhdHVyZS5nZXRJZCgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGlkID0gZGF0YVNvdXJjZUlkICsgXCJfXCIgKyBmZWF0dXJlLmdldElkKCk7XG4gICAgICAgIGZlYXR1cmUuc2V0SWQoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5yZWdpc3RlckNhbmNlbGVyXyA9IGZ1bmN0aW9uIHJlZ2lzdGVyQ2FuY2VsZXJfKCkge1xuICAgIHZhciBjYW5jZWxlciA9IHRoaXMucV8uZGVmZXIoKTtcbiAgICB0aGlzLnJlcXVlc3RDYW5jZWxlcnNfLnB1c2goY2FuY2VsZXIpO1xuICAgIHJldHVybiBjYW5jZWxlcjtcbiAgfTtcblxuICBfcHJvdG8uY2FuY2VsU3RpbGxSdW5uaW5nUmVxdWVzdHNfID0gZnVuY3Rpb24gY2FuY2VsU3RpbGxSdW5uaW5nUmVxdWVzdHNfKCkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjEzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0aGlzLnJlcXVlc3RDYW5jZWxlcnNfKSwgX3N0ZXAxMzsgIShfc3RlcDEzID0gX2l0ZXJhdG9yMTMoKSkuZG9uZTspIHtcbiAgICAgIHZhciBjYW5jZWxlciA9IF9zdGVwMTMudmFsdWU7XG4gICAgICBjYW5jZWxlci5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXF1ZXN0Q2FuY2VsZXJzXy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIHJldHVybiBRdWVyZW50O1xufSgpO1xuXG5mdW5jdGlvbiBoYW5kbGVDb21iaW5lZFF1ZXJ5UmVzdWx0XyhyZXNwb25zZSkge1xuICB2YXIgY29tYmluZWRIYXNoID0ge307XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yMTQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHJlc3BvbnNlKSwgX3N0ZXAxNDsgIShfc3RlcDE0ID0gX2l0ZXJhdG9yMTQoKSkuZG9uZTspIHtcbiAgICB2YXIgaGFzaCA9IF9zdGVwMTQudmFsdWU7XG5cbiAgICBmb3IgKHZhciBkYXRhU291cmNlSWRTdHIgaW4gaGFzaCkge1xuICAgICAgdmFyIGRhdGFTb3VyY2VJZCA9IE51bWJlcihkYXRhU291cmNlSWRTdHIpO1xuICAgICAgY29tYmluZWRIYXNoW2RhdGFTb3VyY2VJZF0gPSBoYXNoW2RhdGFTb3VyY2VJZF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbWJpbmVkSGFzaDtcbn1cblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUXVlcmVudCcsIFtuZ2VvRmlsdGVyUnVsZUhlbHBlci5uYW1lLCBuZ2VvTWlzY1dNU1RpbWUubmFtZV0pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9RdWVyZW50JywgUXVlcmVudCk7XG5leHBvcnQgZGVmYXVsdCBtb2R1bGU7IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyB1bmxpc3RlbkJ5S2V5cyBhcyBuZ2VvRXZlbnRzVW5saXN0ZW5CeUtleXMgfSBmcm9tICduZ2VvL2V2ZW50cy5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5TW9kZSBmcm9tICduZ2VvL3F1ZXJ5L01vZGUuanMnO1xuaW1wb3J0IG5nZW9RdWVyeU1vZGVTZWxlY3RvciBmcm9tICduZ2VvL3F1ZXJ5L01vZGVTZWxlY3Rvci5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5TWFwUXVlcmVudCBmcm9tICduZ2VvL3F1ZXJ5L01hcFF1ZXJlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuIGFzIG9sRXZlbnRzTGlzdGVuIH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCB7IGFsd2F5cyBhcyBvbEV2ZW50c0NvbmRpdGlvbkFsd2F5cyB9IGZyb20gJ29sL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IG9sSW50ZXJhY3Rpb25EcmF3LCB7IGNyZWF0ZUJveCBhcyBvbEludGVyYWN0aW9uRHJhd0NyZWF0ZUJveCB9IGZyb20gJ29sL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuaW1wb3J0IHsgVmVjdG9yIGFzIG9sTGF5ZXJWZWN0b3IgfSBmcm9tICdvbC9sYXllci5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJ29sL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgeyBWZWN0b3IgYXMgb2xTb3VyY2VWZWN0b3IgfSBmcm9tICdvbC9zb3VyY2UuanMnO1xudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvUXVlcnknLCBbbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLm5hbWUsIG5nZW9RdWVyeU1hcFF1ZXJlbnQubmFtZV0pO1xuXG52YXIgUXVlcnlDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBRdWVyeUNvbnRyb2xsZXIuJGluamVjdCA9IFtcIm5nZW9NYXBRdWVyZW50XCIsIFwibmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXCIsIFwiJHNjb3BlXCIsIFwibmdlb1F1ZXJ5T3B0aW9uc1wiXTtcblxuICBmdW5jdGlvbiBRdWVyeUNvbnRyb2xsZXIobmdlb01hcFF1ZXJlbnQsIG5nZW9RdWVyeU1vZGVTZWxlY3RvciwgJHNjb3BlLCBuZ2VvUXVlcnlPcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMuYWN0aXZlO1xuICAgIHRoaXMuYXV0b2NsZWFyO1xuICAgIHRoaXMubWFwO1xuICAgIHRoaXMubmdlb01hcFF1ZXJlbnRfID0gbmdlb01hcFF1ZXJlbnQ7XG4gICAgdGhpcy5uZ2VvUXVlcnlNb2RlU2VsZWN0b3JfID0gbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yO1xuICAgIHRoaXMubmdlb1F1ZXJ5T3B0aW9uc18gPSBuZ2VvUXVlcnlPcHRpb25zO1xuICAgIHRoaXMuc2NvcGVfID0gJHNjb3BlO1xuICAgIHRoaXMudmVjdG9yU291cmNlXyA9IG5ldyBvbFNvdXJjZVZlY3Rvcih7XG4gICAgICB3cmFwWDogZmFsc2VcbiAgICB9KTtcbiAgICB0aGlzLnZlY3RvckxheWVyXyA9IG5ldyBvbExheWVyVmVjdG9yKHtcbiAgICAgIHNvdXJjZTogdGhpcy52ZWN0b3JTb3VyY2VfXG4gICAgfSk7XG4gICAgdGhpcy5kcmF3Qm94SW50ZXJhY3Rpb25fID0gbmV3IG9sSW50ZXJhY3Rpb25EcmF3KHtcbiAgICAgIGNvbmRpdGlvbjogb2xFdmVudHNDb25kaXRpb25BbHdheXMsXG4gICAgICBnZW9tZXRyeUZ1bmN0aW9uOiBvbEludGVyYWN0aW9uRHJhd0NyZWF0ZUJveCgpLFxuICAgICAgc291cmNlOiB0aGlzLnZlY3RvclNvdXJjZV8sXG4gICAgICBzdG9wQ2xpY2s6IHRydWUsXG4gICAgICB0eXBlOiAnQ2lyY2xlJ1xuICAgIH0pO1xuICAgIHRoaXMuZHJhd1BvbHlnb25JbnRlcmFjdGlvbl8gPSBuZXcgb2xJbnRlcmFjdGlvbkRyYXcoe1xuICAgICAgY29uZGl0aW9uOiBvbEV2ZW50c0NvbmRpdGlvbkFsd2F5cyxcbiAgICAgIHNvdXJjZTogdGhpcy52ZWN0b3JTb3VyY2VfLFxuICAgICAgc3RvcENsaWNrOiB0cnVlLFxuICAgICAgdHlwZTogJ1BvbHlnb24nXG4gICAgfSk7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0gW107XG4gICAgdGhpcy5tb2RlXyA9IG51bGw7XG4gICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuYWN0aXZlO1xuICAgIH0sIHRoaXMuaGFuZGxlQWN0aXZlQ2hhbmdlXy5iaW5kKHRoaXMpKTtcbiAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG5cbiAgICAgIGlmIChfdGhpcy5hY3RpdmUpIHtcbiAgICAgICAgdmFsdWUgPSBfdGhpcy5uZ2VvUXVlcnlNb2RlU2VsZWN0b3JfLm1vZGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LCB0aGlzLmVuYWJsZU1vZGVfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFF1ZXJ5Q29udHJvbGxlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLiRvbkluaXQgPSBmdW5jdGlvbiAkb25Jbml0KCkge1xuICAgIHRoaXMuYXV0b2NsZWFyID0gISF0aGlzLmF1dG9jbGVhcjtcbiAgfTtcblxuICBfcHJvdG8uJG9uRGVzdHJveSA9IGZ1bmN0aW9uICRvbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5lbmFibGVNb2RlXyhudWxsKTtcbiAgfTtcblxuICBfcHJvdG8uZW5hYmxlTW9kZV8gPSBmdW5jdGlvbiBlbmFibGVNb2RlXyhtb2RlKSB7XG4gICAgdGhpcy5kaXNhYmxlTW9kZV8oKTtcblxuICAgIGlmICghbW9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSBuZ2VvUXVlcnlNb2RlLkNMSUNLOlxuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChvbEV2ZW50c0xpc3Rlbih0aGlzLm1hcCwgJ3NpbmdsZWNsaWNrJywgdGhpcy5oYW5kbGVNYXBDbGlja18sIHRoaXMpKTtcblxuICAgICAgICBpZiAodGhpcy5uZ2VvUXVlcnlPcHRpb25zXy5jdXJzb3JIb3Zlcikge1xuICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzXy5wdXNoKG9sRXZlbnRzTGlzdGVuKHRoaXMubWFwLCAncG9pbnRlcm1vdmUnLCB0aGlzLmhhbmRsZU1hcFBvaW50ZXJNb3ZlXywgdGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2Ugbmdlb1F1ZXJ5TW9kZS5EUkFXX0JPWDpcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy52ZWN0b3JMYXllcl8pO1xuICAgICAgICB0aGlzLm1hcC5hZGRJbnRlcmFjdGlvbih0aGlzLmRyYXdCb3hJbnRlcmFjdGlvbl8pO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c18ucHVzaChvbEV2ZW50c0xpc3Rlbih0aGlzLmRyYXdCb3hJbnRlcmFjdGlvbl8sICdkcmF3ZW5kJywgdGhpcy5oYW5kbGVEcmF3Qm94SW50ZXJhY3Rpb25EcmF3RW5kXywgdGhpcykpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBuZ2VvUXVlcnlNb2RlLkRSQVdfUE9MWUdPTjpcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy52ZWN0b3JMYXllcl8pO1xuICAgICAgICB0aGlzLm1hcC5hZGRJbnRlcmFjdGlvbih0aGlzLmRyYXdQb2x5Z29uSW50ZXJhY3Rpb25fKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfLnB1c2gob2xFdmVudHNMaXN0ZW4odGhpcy5kcmF3UG9seWdvbkludGVyYWN0aW9uXywgJ2RyYXdlbmQnLCB0aGlzLmhhbmRsZURyYXdQb2x5Z29uSW50ZXJhY3Rpb25EcmF3RW5kXywgdGhpcykpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy5tb2RlXyA9IG1vZGU7XG4gIH07XG5cbiAgX3Byb3RvLmRpc2FibGVNb2RlXyA9IGZ1bmN0aW9uIGRpc2FibGVNb2RlXygpIHtcbiAgICBpZiAoIXRoaXMubW9kZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMubW9kZV8pIHtcbiAgICAgIGNhc2Ugbmdlb1F1ZXJ5TW9kZS5DTElDSzpcbiAgICAgICAgaWYgKHRoaXMubmdlb1F1ZXJ5T3B0aW9uc18uY3Vyc29ySG92ZXIpIHtcbiAgICAgICAgICB0aGlzLm1hcC5nZXRUYXJnZXRFbGVtZW50KCkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBuZ2VvUXVlcnlNb2RlLkRSQVdfQk9YOlxuICAgICAgICB0aGlzLnZlY3RvclNvdXJjZV8uY2xlYXIoKTtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy52ZWN0b3JMYXllcl8pO1xuICAgICAgICB0aGlzLm1hcC5yZW1vdmVJbnRlcmFjdGlvbih0aGlzLmRyYXdCb3hJbnRlcmFjdGlvbl8pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBuZ2VvUXVlcnlNb2RlLkRSQVdfUE9MWUdPTjpcbiAgICAgICAgdGhpcy52ZWN0b3JTb3VyY2VfLmNsZWFyKCk7XG4gICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMudmVjdG9yTGF5ZXJfKTtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlSW50ZXJhY3Rpb24odGhpcy5kcmF3UG9seWdvbkludGVyYWN0aW9uXyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBuZ2VvRXZlbnRzVW5saXN0ZW5CeUtleXModGhpcy5saXN0ZW5lcktleXNfKTtcbiAgICB0aGlzLm1vZGVfID0gbnVsbDtcbiAgfTtcblxuICBfcHJvdG8uZ2V0TGltaXRPcHRpb25fID0gZnVuY3Rpb24gZ2V0TGltaXRPcHRpb25fKCkge1xuICAgIHJldHVybiB0aGlzLm5nZW9RdWVyeU9wdGlvbnNfICYmIHRoaXMubmdlb1F1ZXJ5T3B0aW9uc18ubGltaXQgPyB0aGlzLm5nZW9RdWVyeU9wdGlvbnNfLmxpbWl0IDogdW5kZWZpbmVkO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVBY3RpdmVDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlQWN0aXZlQ2hhbmdlXyhhY3RpdmUpIHtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgaWYgKHRoaXMuYXV0b2NsZWFyKSB7XG4gICAgICAgIHRoaXMubmdlb01hcFF1ZXJlbnRfLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5oYW5kbGVEcmF3Qm94SW50ZXJhY3Rpb25EcmF3RW5kXyA9IGZ1bmN0aW9uIGhhbmRsZURyYXdCb3hJbnRlcmFjdGlvbkRyYXdFbmRfKGV2dCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGZlYXR1cmUgPSBldnQuZmVhdHVyZTtcbiAgICB2YXIgYWN0aW9uID0gdGhpcy5uZ2VvUXVlcnlNb2RlU2VsZWN0b3JfLmFjdGlvbjtcbiAgICB2YXIgZXh0ZW50ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldEV4dGVudCgpO1xuICAgIHZhciBsaW1pdCA9IHRoaXMuZ2V0TGltaXRPcHRpb25fKCk7XG4gICAgdmFyIG1hcCA9IHRoaXMubWFwO1xuICAgIHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5wZW5kaW5nID0gdHJ1ZTtcbiAgICB0aGlzLm5nZW9NYXBRdWVyZW50Xy5pc3N1ZSh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgbWFwOiBtYXBcbiAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHt9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczIudmVjdG9yU291cmNlXy5jbGVhcigpO1xuXG4gICAgICBfdGhpczIubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5wZW5kaW5nID0gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZURyYXdQb2x5Z29uSW50ZXJhY3Rpb25EcmF3RW5kXyA9IGZ1bmN0aW9uIGhhbmRsZURyYXdQb2x5Z29uSW50ZXJhY3Rpb25EcmF3RW5kXyhldnQpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBmZWF0dXJlID0gZXZ0LmZlYXR1cmU7XG4gICAgdmFyIGFjdGlvbiA9IHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5hY3Rpb247XG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgIHZhciBsaW1pdCA9IHRoaXMuZ2V0TGltaXRPcHRpb25fKCk7XG4gICAgdmFyIG1hcCA9IHRoaXMubWFwO1xuICAgIHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5wZW5kaW5nID0gdHJ1ZTtcbiAgICB0aGlzLm5nZW9NYXBRdWVyZW50Xy5pc3N1ZSh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeSxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIG1hcDogbWFwXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7fSkuY2F0Y2goZnVuY3Rpb24gKCkge30pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMzLnZlY3RvclNvdXJjZV8uY2xlYXIoKTtcblxuICAgICAgX3RoaXMzLm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8ucGVuZGluZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNYXBDbGlja18gPSBmdW5jdGlvbiBoYW5kbGVNYXBDbGlja18oZXZ0KSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBpZiAoIShldnQgaW5zdGFuY2VvZiBNYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGFjdGlvbiA9IHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yXy5hY3Rpb247XG4gICAgdmFyIGNvb3JkaW5hdGUgPSBldnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgbWFwID0gdGhpcy5tYXA7XG4gICAgdGhpcy5uZ2VvUXVlcnlNb2RlU2VsZWN0b3JfLnBlbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMubmdlb01hcFF1ZXJlbnRfLmlzc3VlKHtcbiAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgY29vcmRpbmF0ZTogY29vcmRpbmF0ZSxcbiAgICAgIG1hcDogbWFwXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7fSkuY2F0Y2goZnVuY3Rpb24gKCkge30pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXM0Lm5nZW9RdWVyeU1vZGVTZWxlY3Rvcl8ucGVuZGluZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNYXBQb2ludGVyTW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVNYXBQb2ludGVyTW92ZV8oZXZ0KSB7XG4gICAgaWYgKCEoZXZ0IGluc3RhbmNlb2YgTWFwQnJvd3NlckV2ZW50KSB8fCBldnQuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcGl4ZWwgPSB0aGlzLm1hcC5nZXRFdmVudFBpeGVsKGV2dC5vcmlnaW5hbEV2ZW50KTtcblxuICAgIHZhciBxdWVyeWFibGUgPSBmdW5jdGlvbiBxdWVyeWFibGUobGF5ZXIpIHtcbiAgICAgIHZhciB2aXNpYmxlID0gbGF5ZXIuZ2V0KCd2aXNpYmxlJyk7XG4gICAgICB2YXIgc291cmNlaWRzID0gbGF5ZXIuZ2V0KCdxdWVyeVNvdXJjZUlkcycpO1xuICAgICAgcmV0dXJuIHZpc2libGUgJiYgISFzb3VyY2VpZHM7XG4gICAgfTtcblxuICAgIHZhciBoaXQgPSB0aGlzLm1hcC5mb3JFYWNoTGF5ZXJBdFBpeGVsKHBpeGVsLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LCB7XG4gICAgICBsYXllckZpbHRlcjogcXVlcnlhYmxlXG4gICAgfSk7XG4gICAgdGhpcy5tYXAuZ2V0VGFyZ2V0RWxlbWVudCgpLnN0eWxlLmN1cnNvciA9IGhpdCA/ICdwb2ludGVyJyA6ICcnO1xuICB9O1xuXG4gIHJldHVybiBRdWVyeUNvbnRyb2xsZXI7XG59KCk7XG5cbm1vZHVsZS5jb21wb25lbnQoJ25nZW9RdWVyeScsIHtcbiAgYmluZGluZ3M6IHtcbiAgICAnYWN0aXZlJzogJz0nLFxuICAgICdhdXRvY2xlYXInOiAnPT8nLFxuICAgICdtYXAnOiAnPCdcbiAgfSxcbiAgY29udHJvbGxlcjogUXVlcnlDb250cm9sbGVyXG59KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvUXVlcnlNb2RlU2VsZWN0b3IgZnJvbSAnbmdlby9xdWVyeS9Nb2RlU2VsZWN0b3IuanMnO1xuaW1wb3J0IG5nZW9RdWVyeVF1ZXJlbnQgZnJvbSAnbmdlby9xdWVyeS9RdWVyZW50LmpzJztcbmltcG9ydCBuZ2VvUXVlcnlNYXBRdWVyZW50IGZyb20gJ25nZW8vcXVlcnkvTWFwUXVlcmVudC5qcyc7XG5pbXBvcnQgbmdlb1F1ZXJ5Q29tcG9uZW50IGZyb20gJ25nZW8vcXVlcnkvY29tcG9uZW50LmpzJztcbmltcG9ydCBuZ2VvUXVlcnlQYW5lbENvbXBvbmVudCBmcm9tICduZ2VvL3F1ZXJ5L3BhbmVsQ29tcG9uZW50LmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvUXVlcnlNb2R1bGUnLCBbbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLm5hbWUsIG5nZW9RdWVyeVF1ZXJlbnQubmFtZSwgbmdlb1F1ZXJ5TWFwUXVlcmVudC5uYW1lLCBuZ2VvUXVlcnlDb21wb25lbnQubmFtZSwgbmdlb1F1ZXJ5UGFuZWxDb21wb25lbnQubmFtZV0pOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKSB7XG5vYmogfHwgKG9iaiA9IHt9KTtcbnZhciBfX3QsIF9fcCA9ICcnO1xud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxkaXZcXG4gIGNsYXNzPVwiYnRuLWdyb3VwXCJcXG4+XFxuICA8YnV0dG9uXFxuICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgIHRpdGxlPVwie3tcXCdXaGlsZSBhY3RpdmUsIGNsaWNrIG9uIHRoZSBtYXAgdG8gaXNzdWUgYSBxdWVyeVxcJyB8IHRyYW5zbGF0ZX19XCJcXG4gICAgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIlxcbiAgICBuZy1jbGFzcz1cInthY3RpdmU6ICRjdHJsLm5nZW9RdWVyeU1vZGVTZWxlY3Rvci5tb2RlID09PSBcXCdjbGlja1xcJ31cIlxcbiAgICBuZy1jbGljaz1cIiRjdHJsLm5nZW9RdWVyeU1vZGVTZWxlY3Rvci5tb2RlID0gXFwnY2xpY2tcXCdcIlxcbiAgPlxcbiAgICAnICtcbigoX190ID0gKHJlcXVpcmUoJ25nZW8vaWNvbnMvcG9pbnQuc3ZnP3ZpZXdib3gmaGVpZ2h0PTFlbScpKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nXFxuICA8L2J1dHRvbj5cXG4gIDxidXR0b25cXG4gICAgZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJcXG4gICAgdGl0bGU9XCJ7e1xcJ1doaWxlIGFjdGl2ZSwgY2xpY2sgdHdpY2UgdGhlIG1hcCB0byBpc3N1ZSBhIHF1ZXJ5IHVzaW5nIGEgYm94XFwnIHwgdHJhbnNsYXRlfX1cIlxcbiAgICBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXFxuICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogJGN0cmwubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLm1vZGUgPT09IFxcJ2RyYXdib3hcXCd9XCJcXG4gICAgbmctY2xpY2s9XCIkY3RybC5uZ2VvUXVlcnlNb2RlU2VsZWN0b3IubW9kZSA9IFxcJ2RyYXdib3hcXCdcIlxcbiAgPlxcbiAgICAnICtcbigoX190ID0gKHJlcXVpcmUoJ25nZW8vaWNvbnMvcmVjdGFuZ2xlLnN2Zz92aWV3Ym94JmhlaWdodD0xZW0nKSkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1xcbiAgPC9idXR0b24+XFxuICA8YnV0dG9uXFxuICAgIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXFxuICAgIHRpdGxlPVwie3tcXCdXaGlsZSBhY3RpdmUsIGNsaWNrIG9uIHRoZSBtYXAgbXVsdGlwbGUgdGltZXMgdG8gZHJhdyBhIHBvbHlnb24sIHdoaWNoIHdpbGwgaXNzdWUgYSBxdWVyeSB1c2luZyBpdFxcJyB8IHRyYW5zbGF0ZX19XCJcXG4gICAgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIlxcbiAgICBuZy1jbGFzcz1cInthY3RpdmU6ICRjdHJsLm5nZW9RdWVyeU1vZGVTZWxlY3Rvci5tb2RlID09PSBcXCdkcmF3cG9seWdvblxcJ31cIlxcbiAgICBuZy1jbGljaz1cIiRjdHJsLm5nZW9RdWVyeU1vZGVTZWxlY3Rvci5tb2RlID0gXFwnZHJhd3BvbHlnb25cXCdcIlxcbiAgPlxcbiAgICAnICtcbigoX190ID0gKHJlcXVpcmUoJ25nZW8vaWNvbnMvcG9seWdvbi5zdmc/dmlld2JveCZoZWlnaHQ9MWVtJykpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcXG4gIDwvYnV0dG9uPlxcbjwvZGl2PlxcblxcbjxkaXYgY2xhc3M9XCJuZ2VvLXF1ZXJ5LXBhbmVsLWFjdGlvbnNcIj5cXG4gIDxkaXYgY2xhc3M9XCJmb3JtLWNoZWNrXCI+XFxuICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWxcIj5cXG4gICAgICA8aW5wdXRcXG4gICAgICAgIHR5cGU9XCJyYWRpb1wiXFxuICAgICAgICBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIlxcbiAgICAgICAgbmctbW9kZWw9XCIkY3RybC5uZ2VvUXVlcnlNb2RlU2VsZWN0b3IuYWN0aW9uXCJcXG4gICAgICAgIHZhbHVlPVwiYWRkXCJcXG4gICAgICA+XFxuICAgICAgICA8c3Bhbj57e1xcJ0FkZFxcJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cXG4gICAgICA8L2lucHV0PlxcbiAgICA8L2xhYmVsPlxcbiAgPC9kaXY+XFxuICA8ZGl2IGNsYXNzPVwiZm9ybS1jaGVja1wiPlxcbiAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWNoZWNrLWxhYmVsXCI+XFxuICAgICAgPGlucHV0XFxuICAgICAgICB0eXBlPVwicmFkaW9cIlxcbiAgICAgICAgY2xhc3M9XCJmb3JtLWNoZWNrLWlucHV0XCJcXG4gICAgICAgIG5nLW1vZGVsPVwiJGN0cmwubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLmFjdGlvblwiXFxuICAgICAgICB2YWx1ZT1cInJlbW92ZVwiXFxuICAgICAgPlxcbiAgICAgICAgPHNwYW4+e3tcXCdSZW1vdmVcXCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XFxuICAgICAgPC9pbnB1dD5cXG4gICAgPC9sYWJlbD5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cImZvcm0tY2hlY2tcIj5cXG4gICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbFwiPlxcbiAgICAgIDxpbnB1dFxcbiAgICAgICAgdHlwZT1cInJhZGlvXCJcXG4gICAgICAgIGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiXFxuICAgICAgICBuZy1tb2RlbD1cIiRjdHJsLm5nZW9RdWVyeU1vZGVTZWxlY3Rvci5hY3Rpb25cIlxcbiAgICAgICAgdmFsdWU9XCJyZXBsYWNlXCJcXG4gICAgICA+XFxuICAgICAgICA8c3Bhbj57e1xcJ1JlcGxhY2VcXCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XFxuICAgICAgPC9pbnB1dD5cXG4gICAgPC9sYWJlbD5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcblxcbjxkaXYgY2xhc3M9XCJuZ2VvLXF1ZXJ5LXBhbmVsLWhlbHBcIj5cXG4gIDxzcGFuXFxuICAgIG5nLXNob3c9XCIkY3RybC5uZ2VvUXVlcnlNb2RlU2VsZWN0b3IubW9kZSA9PT0gXFwnY2xpY2tcXCdcIlxcbiAgPnt7XFwnUXVlcnkgYnkgXCJjbGlja1wiIG9uIHRoZSBtYXAgaXMgY3VycmVudGx5IGFjdGl2ZS4gQWxsIHF1ZXJ5YWJsZSBsYXllcnMsIGluY2x1ZGluZyBXTVMgYW5kIFdGUywgd2lsbCByZXR1cm4gcmVzdWx0cy5cXCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XFxuICA8c3BhblxcbiAgICBuZy1zaG93PVwiJGN0cmwubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLm1vZGUgPT09IFxcJ2RyYXdib3hcXCdcIlxcbiAgPnt7XFwnUXVlcnkgYnkgXCJib3hcIiBvbiB0aGUgbWFwIGlzIGN1cnJlbnRseSBhY3RpdmUuIE5vdCBhbGwgcXVlcnlhYmxlIGxheWVycyB3aWxsIHJldHVybiByZXN1bHRzLiBPbmx5IHRob3NlIHRoYXQgc3VwcG9ydCBXRlMgd2lsbCBkbyBzby5cXCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XFxuICA8c3BhblxcbiAgICBuZy1zaG93PVwiJGN0cmwubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLm1vZGUgPT09IFxcJ2RyYXdwb2x5Z29uXFwnXCJcXG4gID57e1xcJ1F1ZXJ5IGJ5IFwicG9seWdvblwiIG9uIHRoZSBtYXAgaXMgY3VycmVudGx5IGFjdGl2ZS4gTm90IGFsbCBxdWVyeWFibGUgbGF5ZXJzIHdpbGwgcmV0dXJuIHJlc3VsdHMuIE9ubHkgdGhvc2UgdGhhdCBzdXBwb3J0IFdGUyB3aWxsIGRvIHNvLlxcJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cXG48L2Rpdj5cXG4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwiaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yIGZyb20gJ25nZW8vcXVlcnkvTW9kZVNlbGVjdG9yLmpzJztcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1F1ZXJ5UGFuZWwnLCBbbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yLm5hbWVdKTtcbm1vZHVsZS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmdlby9zcmMvcXVlcnkvcGFuZWxDb21wb25lbnQnLCByZXF1aXJlKCcuL3BhbmVsQ29tcG9uZW50Lmh0bWwnKSk7XG59XSk7XG5tb2R1bGUudmFsdWUoJ25nZW9RdWVyeVBhbmVsVGVtcGxhdGVVcmwnLCBmdW5jdGlvbiAoJGF0dHJzKSB7XG4gIHZhciB0ZW1wbGF0ZVVybCA9ICRhdHRycy5uZ2VvUXVlcnlQYW5lbFRlbXBsYXRlVXJsO1xuICByZXR1cm4gdGVtcGxhdGVVcmwgIT09IHVuZGVmaW5lZCA/IHRlbXBsYXRlVXJsIDogJ25nZW8vc3JjL3F1ZXJ5L3BhbmVsQ29tcG9uZW50Jztcbn0pO1xubmdlb1F1ZXJ5UGFuZWxUZW1wbGF0ZVVybC4kaW5qZWN0ID0gW1wiJGF0dHJzXCIsIFwibmdlb1F1ZXJ5UGFuZWxUZW1wbGF0ZVVybFwiXTtcblxuZnVuY3Rpb24gbmdlb1F1ZXJ5UGFuZWxUZW1wbGF0ZVVybCgkYXR0cnMsIG5nZW9RdWVyeVBhbmVsVGVtcGxhdGVVcmwpIHtcbiAgcmV0dXJuIG5nZW9RdWVyeVBhbmVsVGVtcGxhdGVVcmwoJGF0dHJzKTtcbn1cblxudmFyIFF1ZXJ5UGFuZWxDb250cm9sbGVyID0gZnVuY3Rpb24gUXVlcnlQYW5lbENvbnRyb2xsZXIobmdlb1F1ZXJ5TW9kZVNlbGVjdG9yKSB7XG4gIHRoaXMubmdlb1F1ZXJ5TW9kZVNlbGVjdG9yID0gbmdlb1F1ZXJ5TW9kZVNlbGVjdG9yO1xufTtcblxuUXVlcnlQYW5lbENvbnRyb2xsZXIuJGluamVjdCA9IFtcIm5nZW9RdWVyeU1vZGVTZWxlY3RvclwiXTtcblF1ZXJ5UGFuZWxDb250cm9sbGVyLiRpbmplY3QgPSBbXCJuZ2VvUXVlcnlNb2RlU2VsZWN0b3JcIl07XG5tb2R1bGUuY29tcG9uZW50KCduZ2VvUXVlcnlQYW5lbCcsIHtcbiAgY29udHJvbGxlcjogUXVlcnlQYW5lbENvbnRyb2xsZXIsXG4gIHRlbXBsYXRlVXJsOiBuZ2VvUXVlcnlQYW5lbFRlbXBsYXRlVXJsXG59KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlIGZyb20gJ25nZW8vZm9ybWF0L0F0dHJpYnV0ZVR5cGUuanMnO1xuaW1wb3J0IG5nZW9SdWxlUnVsZSBmcm9tICduZ2VvL3J1bGUvUnVsZS5qcyc7XG5cbnZhciBfZGVmYXVsdCA9IGZ1bmN0aW9uIChfbmdlb1J1bGVSdWxlKSB7XG4gIF9pbmhlcml0c0xvb3NlKF9kZWZhdWx0LCBfbmdlb1J1bGVSdWxlKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy50eXBlID0gb3B0aW9ucy50eXBlIHx8IG5nZW9Gb3JtYXRBdHRyaWJ1dGVUeXBlLkRBVEU7XG4gICAgcmV0dXJuIF9uZ2VvUnVsZVJ1bGUuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvUnVsZVJ1bGUpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmltcG9ydCBuZ2VvUnVsZVJ1bGUgZnJvbSAnbmdlby9ydWxlL1J1bGUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnb2wvZXZlbnRzLmpzJztcbmltcG9ydCBvbEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgb2xGb3JtYXRHZW9KU09OIGZyb20gJ29sL2Zvcm1hdC9HZW9KU09OLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvUnVsZVJ1bGUpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9uZ2VvUnVsZVJ1bGUpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBvcHRpb25zLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5HRU9NRVRSWTtcbiAgICBfdGhpcyA9IF9uZ2VvUnVsZVJ1bGUuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0aW9ucy5mZWF0dXJlUHJvcGVydGllcyB8fCB7fTtcbiAgICBfdGhpcy5mZWF0dXJlXyA9IG5ldyBvbEZlYXR1cmUocHJvcGVydGllcyk7XG4gICAgX3RoaXMuZm9ybWF0XyA9IG5ldyBvbEZvcm1hdEdlb0pTT04oKTtcbiAgICBfdGhpcy51cGRhdGluZ0V4cHJlc3Npb25fID0gZmFsc2U7XG4gICAgX3RoaXMudXBkYXRpbmdHZW9tZXRyeV8gPSBmYWxzZTtcbiAgICBfdGhpcy5nZW9tZXRyeUNoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG5cbiAgICBfdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4oX3RoaXMuZmVhdHVyZV8sIFwiY2hhbmdlOlwiICsgX3RoaXMuZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKSwgX3RoaXMuaGFuZGxlRmVhdHVyZUdlb21ldHJ5Q2hhbmdlXywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcblxuICAgIF90aGlzLnNldEdlb21ldHJ5RnJvbUV4cHJlc3Npb25fKCk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX2RlZmF1bHQucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXRFeHByZXNzaW9uID0gZnVuY3Rpb24gc2V0RXhwcmVzc2lvbihleHByZXNzaW9uKSB7XG4gICAgdGhpcy51cGRhdGluZ0V4cHJlc3Npb25fID0gdHJ1ZTtcblxuICAgIF9uZ2VvUnVsZVJ1bGUucHJvdG90eXBlLnNldEV4cHJlc3Npb24uY2FsbCh0aGlzLCBleHByZXNzaW9uKTtcblxuICAgIGlmICghdGhpcy51cGRhdGluZ0dlb21ldHJ5Xykge1xuICAgICAgdGhpcy5zZXRHZW9tZXRyeUZyb21FeHByZXNzaW9uXygpO1xuICAgIH1cblxuICAgIHRoaXMucmVnaXN0ZXJHZW9tZXRyeUNoYW5nZV8oKTtcbiAgICB0aGlzLnVwZGF0aW5nRXhwcmVzc2lvbl8gPSBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8uaGFuZGxlRmVhdHVyZUdlb21ldHJ5Q2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVHZW9tZXRyeUNoYW5nZV8oKSB7XG4gICAgaWYgKHRoaXMudXBkYXRpbmdFeHByZXNzaW9uXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRpbmdHZW9tZXRyeV8gPSB0cnVlO1xuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZmVhdHVyZV8uZ2V0R2VvbWV0cnkoKTtcblxuICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgdGhpcy5leHByZXNzaW9uID0gdGhpcy5mb3JtYXRfLndyaXRlR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb24gPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMucmVnaXN0ZXJHZW9tZXRyeUNoYW5nZV8oKTtcbiAgICB0aGlzLnVwZGF0aW5nR2VvbWV0cnlfID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUdlb21ldHJ5Q2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUdlb21ldHJ5Q2hhbmdlXyhldnQpIHtcbiAgICB2YXIgZ2VvbWV0cnkgPSBldnQudGFyZ2V0O1xuICAgIHRoaXMudXBkYXRpbmdHZW9tZXRyeV8gPSB0cnVlO1xuICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRoaXMuZm9ybWF0Xy53cml0ZUdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICB0aGlzLnVwZGF0aW5nR2VvbWV0cnlfID0gZmFsc2U7XG4gIH07XG5cbiAgX3Byb3RvLnNldEdlb21ldHJ5RnJvbUV4cHJlc3Npb25fID0gZnVuY3Rpb24gc2V0R2VvbWV0cnlGcm9tRXhwcmVzc2lvbl8oKSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gbnVsbDtcblxuICAgIGlmICh0aGlzLmV4cHJlc3Npb24pIHtcbiAgICAgIHZhciBleHByZXNzaW9uID0gXCJcIiArIHRoaXMuZXhwcmVzc2lvbjtcbiAgICAgIGdlb21ldHJ5ID0gdGhpcy5mb3JtYXRfLnJlYWRHZW9tZXRyeShleHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gIH07XG5cbiAgX3Byb3RvLnJlZ2lzdGVyR2VvbWV0cnlDaGFuZ2VfID0gZnVuY3Rpb24gcmVnaXN0ZXJHZW9tZXRyeUNoYW5nZV8oKSB7XG4gICAgaWYgKHRoaXMuZ2VvbWV0cnlDaGFuZ2VMaXN0ZW5lcktleV8gIT09IG51bGwpIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5nZW9tZXRyeUNoYW5nZUxpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLmdlb21ldHJ5Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmZlYXR1cmVfLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oZ2VvbWV0cnksICdjaGFuZ2UnLCB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlXywgdGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwiZmVhdHVyZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdlb21ldHJ5XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5mZWF0dXJlXy5nZXRHZW9tZXRyeSgpIHx8IG51bGw7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChnZW9tZXRyeSkge1xuICAgICAgdGhpcy5mZWF0dXJlXy5zZXRHZW9tZXRyeShnZW9tZXRyeSB8fCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0obmdlb1J1bGVSdWxlKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuaW1wb3J0IHsgdW5saXN0ZW5CeUtleSB9IGZyb20gJ29sL2V2ZW50cy5qcyc7XG5leHBvcnQgdmFyIFJ1bGVPcGVyYXRvclR5cGUgPSB7XG4gIEJFVFdFRU46ICcuLicsXG4gIEVRVUFMX1RPOiAnPScsXG4gIEdSRUFURVJfVEhBTjogJz4nLFxuICBHUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE86ICc+PScsXG4gIExFU1NFUl9USEFOOiAnPCcsXG4gIExFU1NFUl9USEFOX09SX0VRVUFMX1RPOiAnPD0nLFxuICBMSUtFOiAnficsXG4gIE5PVF9FUVVBTF9UTzogJyE9J1xufTtcbmV4cG9ydCB2YXIgUnVsZVNwYXRpYWxPcGVyYXRvclR5cGUgPSB7XG4gIENPTlRBSU5TOiAnY29udGFpbnMnLFxuICBJTlRFUlNFQ1RTOiAnaW50ZXJzZWN0cycsXG4gIFdJVEhJTjogJ3dpdGhpbidcbn07XG5leHBvcnQgdmFyIFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZSA9IHtcbiAgQkVHSU5TOiAndGltZV9zdGFydCcsXG4gIERVUklORzogJ3RpbWVfZHVyaW5nJyxcbiAgRU5EUzogJ3RpbWVfZW5kJyxcbiAgRVFVQUxTOiAndGltZV9lcXVhbCdcbn07XG5cbnZhciBSdWxlID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSdWxlKG9wdGlvbnMpIHtcbiAgICB0aGlzLmFjdGl2ZSA9IG9wdGlvbnMuYWN0aXZlID09PSB0cnVlO1xuICAgIHRoaXMuZXhwcmVzc2lvbiA9IG9wdGlvbnMuZXhwcmVzc2lvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5leHByZXNzaW9uIDogbnVsbDtcbiAgICB0aGlzLmxvd2VyQm91bmRhcnkgPSBvcHRpb25zLmxvd2VyQm91bmRhcnkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubG93ZXJCb3VuZGFyeSA6IG51bGw7XG4gICAgdGhpcy5vcGVyYXRvciA9IG9wdGlvbnMub3BlcmF0b3IgfHwgbnVsbDtcbiAgICB0aGlzLnVwcGVyQm91bmRhcnkgPSBvcHRpb25zLnVwcGVyQm91bmRhcnkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXBwZXJCb3VuZGFyeSA6IG51bGw7XG4gICAgdGhpcy5pc0N1c3RvbV8gPSBvcHRpb25zLmlzQ3VzdG9tICE9PSBmYWxzZTtcbiAgICB0aGlzLm5hbWVfID0gb3B0aW9ucy5uYW1lO1xuICAgIHRoaXMub3BlcmF0b3JzXyA9IG9wdGlvbnMub3BlcmF0b3JzIHx8IG51bGw7XG4gICAgdGhpcy5wcm9wZXJ0eU5hbWVfID0gb3B0aW9ucy5wcm9wZXJ0eU5hbWU7XG4gICAgdGhpcy50eXBlXyA9IG9wdGlvbnMudHlwZTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5cyA9IFtdO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFJ1bGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRFeHByZXNzaW9uID0gZnVuY3Rpb24gZ2V0RXhwcmVzc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uO1xuICB9O1xuXG4gIF9wcm90by5zZXRFeHByZXNzaW9uID0gZnVuY3Rpb24gc2V0RXhwcmVzc2lvbihleHByZXNzaW9uKSB7XG4gICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgfTtcblxuICBfcHJvdG8ucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICBpZiAodGhpcy5nZXRFeHByZXNzaW9uKCkgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuc2V0RXhwcmVzc2lvbihudWxsKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb3dlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmxvd2VyQm91bmRhcnkgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVwcGVyQm91bmRhcnkgIT09IG51bGwpIHtcbiAgICAgIHRoaXMudXBwZXJCb3VuZGFyeSA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB0aGlzLmxpc3RlbmVyS2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFJ1bGUsIFt7XG4gICAga2V5OiBcImlzQ3VzdG9tXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0N1c3RvbV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5hbWVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWVfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvcGVyYXRvcnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wZXJhdG9yc187XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInByb3BlcnR5TmFtZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcGVydHlOYW1lXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidHlwZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMudHlwZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInZhbHVlXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBudWxsO1xuICAgICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmdldEV4cHJlc3Npb24oKTtcbiAgICAgIHZhciBsb3dlckJvdW5kYXJ5ID0gdGhpcy5sb3dlckJvdW5kYXJ5O1xuICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSB0aGlzLnByb3BlcnR5TmFtZTtcbiAgICAgIHZhciB1cHBlckJvdW5kYXJ5ID0gdGhpcy51cHBlckJvdW5kYXJ5O1xuXG4gICAgICBpZiAob3BlcmF0b3IpIHtcbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSBSdWxlT3BlcmF0b3JUeXBlLkJFVFdFRU4gfHwgb3BlcmF0b3IgPT09IFJ1bGVUZW1wb3JhbE9wZXJhdG9yVHlwZS5EVVJJTkcpIHtcbiAgICAgICAgICBpZiAobG93ZXJCb3VuZGFyeSAhPT0gbnVsbCAmJiB1cHBlckJvdW5kYXJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuICAgICAgICAgICAgICBsb3dlckJvdW5kYXJ5OiBsb3dlckJvdW5kYXJ5LFxuICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSxcbiAgICAgICAgICAgICAgdXBwZXJCb3VuZGFyeTogdXBwZXJCb3VuZGFyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGV4cHJlc3Npb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgICAgICBleHByZXNzaW9uOiBleHByZXNzaW9uLFxuICAgICAgICAgICAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG4gICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJ1bGU7XG59KCk7XG5cbmV4cG9ydCB7IFJ1bGUgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmltcG9ydCBuZ2VvUnVsZVJ1bGUsIHsgUnVsZU9wZXJhdG9yVHlwZSB9IGZyb20gJ25nZW8vcnVsZS9SdWxlLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvUnVsZVJ1bGUpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9uZ2VvUnVsZVJ1bGUpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBvcHRpb25zLm9wZXJhdG9yID0gUnVsZU9wZXJhdG9yVHlwZS5FUVVBTF9UTztcbiAgICBvcHRpb25zLnR5cGUgPSBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZS5TRUxFQ1Q7XG4gICAgX3RoaXMgPSBfbmdlb1J1bGVSdWxlLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5jaG9pY2VzXyA9IG9wdGlvbnMuY2hvaWNlcztcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcImNob2ljZXNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNob2ljZXNfO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZWxlY3RlZENob2ljZXNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBzZWxlY3RlZENob2ljZXM7XG5cbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb24pIHtcbiAgICAgICAgdmFyIHN0cmluZ0V4cHJlc3Npb24gPSBTdHJpbmcodGhpcy5leHByZXNzaW9uKTtcbiAgICAgICAgc2VsZWN0ZWRDaG9pY2VzID0gc3RyaW5nRXhwcmVzc2lvbi5zcGxpdCgnLCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0ZWRDaG9pY2VzID0gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxlY3RlZENob2ljZXM7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShuZ2VvUnVsZVJ1bGUpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmltcG9ydCBuZ2VvRm9ybWF0QXR0cmlidXRlVHlwZSBmcm9tICduZ2VvL2Zvcm1hdC9BdHRyaWJ1dGVUeXBlLmpzJztcbmltcG9ydCBuZ2VvUnVsZVJ1bGUsIHsgUnVsZU9wZXJhdG9yVHlwZSB9IGZyb20gJ25nZW8vcnVsZS9SdWxlLmpzJztcblxudmFyIF9kZWZhdWx0ID0gZnVuY3Rpb24gKF9uZ2VvUnVsZVJ1bGUpIHtcbiAgX2luaGVyaXRzTG9vc2UoX2RlZmF1bHQsIF9uZ2VvUnVsZVJ1bGUpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvciB8fCBSdWxlT3BlcmF0b3JUeXBlLkxJS0U7XG4gICAgb3B0aW9ucy50eXBlID0gbmdlb0Zvcm1hdEF0dHJpYnV0ZVR5cGUuVEVYVDtcbiAgICByZXR1cm4gX25nZW9SdWxlUnVsZS5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gIH1cblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KG5nZW9SdWxlUnVsZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBvbEZvcm1hdEdlb0pTT04gZnJvbSAnb2wvZm9ybWF0L0dlb0pTT04uanMnO1xuaW1wb3J0ICdjb3JlanMtdHlwZWFoZWFkJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZW9KU09OQmxvb2Rob3VuZCh1cmwsIG9wdF9maWx0ZXIsIG9wdF9mZWF0dXJlUHJvamVjdGlvbiwgb3B0X2RhdGFQcm9qZWN0aW9uLCBvcHRfb3B0aW9ucywgb3B0X3JlbW90ZU9wdGlvbnMpIHtcbiAgdmFyIGdlb2pzb25Gb3JtYXQgPSBuZXcgb2xGb3JtYXRHZW9KU09OKCk7XG4gIHZhciBibG9vZGhvdW5kT3B0aW9ucyA9IHtcbiAgICByZW1vdGU6IHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgcHJlcGFyZTogZnVuY3Rpb24gcHJlcGFyZShxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLnVybCkge1xuICAgICAgICAgIHNldHRpbmdzLnVybCA9IHNldHRpbmdzLnVybC5yZXBsYWNlKCclUVVFUlknLCBxdWVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2V0dGluZ3M7XG4gICAgICB9LFxuICAgICAgdHJhbnNmb3JtOiBmdW5jdGlvbiB0cmFuc2Zvcm0ocGFyc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGZlYXR1cmVDb2xsZWN0aW9uID0gcGFyc2VkUmVzcG9uc2U7XG5cbiAgICAgICAgaWYgKG9wdF9maWx0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGZlYXR1cmVDb2xsZWN0aW9uID0ge1xuICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICAgIGZlYXR1cmVzOiBmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcy5maWx0ZXIob3B0X2ZpbHRlcilcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlb2pzb25Gb3JtYXQucmVhZEZlYXR1cmVzKGZlYXR1cmVDb2xsZWN0aW9uLCB7XG4gICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IG9wdF9mZWF0dXJlUHJvamVjdGlvbixcbiAgICAgICAgICBkYXRhUHJvamVjdGlvbjogb3B0X2RhdGFQcm9qZWN0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0dW1Ub2tlbml6ZXI6IGZ1bmN0aW9uIGRhdHVtVG9rZW5pemVyKGRhdHVtKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcbiAgfTtcbiAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRfb3B0aW9ucyB8fCB7XG4gICAgZGF0dW1Ub2tlbml6ZXI6IGZ1bmN0aW9uIGRhdHVtVG9rZW5pemVyKGRhdHVtKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcbiAgfSk7XG4gIHZhciByZW1vdGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0X3JlbW90ZU9wdGlvbnMgfHwge30pO1xuXG4gIGlmIChvcHRpb25zLnJlbW90ZSkge1xuICAgIE9iamVjdC5hc3NpZ24ocmVtb3RlT3B0aW9ucywgb3B0aW9ucy5yZW1vdGUpO1xuICAgIGRlbGV0ZSBvcHRpb25zLnJlbW90ZTtcbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24oYmxvb2Rob3VuZE9wdGlvbnMsIG9wdGlvbnMpO1xuICBPYmplY3QuYXNzaWduKGJsb29kaG91bmRPcHRpb25zLnJlbW90ZSwgcmVtb3RlT3B0aW9ucyk7XG4gIHJldHVybiBuZXcgQmxvb2Rob3VuZChibG9vZGhvdW5kT3B0aW9ucyk7XG59XG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9TZWFyY2hDcmVhdGVnZW9qc29uYmxvb2Rob3VuZCcsIFtdKTtcbm1vZHVsZS52YWx1ZSgnbmdlb1NlYXJjaENyZWF0ZUdlb0pTT05CbG9vZGhvdW5kJywgY3JlYXRlR2VvSlNPTkJsb29kaG91bmQpO1xuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICogYXMgb2xQcm9qIGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0IEVQU0cyMTc4MSBmcm9tICdAZ2VvYmxvY2tzL3Byb2ovRVBTR18yMTc4MS5qcyc7XG5pbXBvcnQgb2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgb2xGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUuanMnO1xuaW1wb3J0ICdjb3JlanMtdHlwZWFoZWFkJztcblxuZnVuY3Rpb24gY3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kKG9wdF9vcHRpb25zKSB7XG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gb2xQcm9qLmdldChFUFNHMjE3ODEpO1xuICB2YXIgdGFyZ2V0UHJvamVjdGlvbiA9IG9wdGlvbnMudGFyZ2V0UHJvamVjdGlvbjtcblxuICB2YXIgcGFyc2VCYm94ID0gZnVuY3Rpb24gcGFyc2VCYm94KGJib3gpIHtcbiAgICB2YXIgcmVnZXggPSAvQk9YXFwoKC4qPykgKC4qPyksKC4qPykgKC4qPylcXCkvZztcbiAgICB2YXIgbWF0Y2ggPSByZWdleC5leGVjKGJib3gpO1xuXG4gICAgaWYgKG1hdGNoICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gW3BhcnNlRmxvYXQobWF0Y2hbMV0pLCBwYXJzZUZsb2F0KG1hdGNoWzJdKSwgcGFyc2VGbG9hdChtYXRjaFszXSksIHBhcnNlRmxvYXQobWF0Y2hbNF0pXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZW1vdmVIdG1sVGFncyA9IGZ1bmN0aW9uIHJlbW92ZUh0bWxUYWdzKGxhYmVsKSB7XG4gICAgcmV0dXJuIGxhYmVsLnJlcGxhY2UoLzxcXC8/W2liXT4vZywgJycpO1xuICB9O1xuXG4gIHZhciBleHRyYWN0TmFtZSA9IGZ1bmN0aW9uIGV4dHJhY3ROYW1lKGxhYmVsKSB7XG4gICAgdmFyIHJlZ2V4ID0gLzxiPiguKj8pPFxcL2I+L2c7XG4gICAgdmFyIG1hdGNoID0gcmVnZXguZXhlYyhsYWJlbCk7XG5cbiAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxhYmVsO1xuICAgIH1cbiAgfTtcblxuICB2YXIgYmxvb2Rob3VuZE9wdGlvbnMgPSB7XG4gICAgcmVtb3RlOiB7XG4gICAgICB1cmw6ICdodHRwczovL2FwaTMuZ2VvLmFkbWluLmNoL3Jlc3Qvc2VydmljZXMvYXBpL1NlYXJjaFNlcnZlcj90eXBlPWxvY2F0aW9ucyZzZWFyY2hUZXh0PSVRVUVSWScsXG4gICAgICBwcmVwYXJlOiBmdW5jdGlvbiBwcmVwYXJlKHF1ZXJ5LCBzZXR0aW5ncykge1xuICAgICAgICBpZiAoc2V0dGluZ3MudXJsKSB7XG4gICAgICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsLnJlcGxhY2UoJyVRVUVSWScsIHF1ZXJ5KTtcblxuICAgICAgICAgIGlmIChvcHRpb25zLmxpbWl0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldHRpbmdzLnVybCArPSBcIiZsaW1pdD1cIiArIG9wdGlvbnMubGltaXQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXR0aW5ncy51cmwgKz0gXCImb3JpZ2lucz1cIiArIG9wdGlvbnMub3JpZ2lucztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucy5wcmVwYXJlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZXBhcmUocXVlcnksIHNldHRpbmdzKSA6IHNldHRpbmdzO1xuICAgICAgfSxcbiAgICAgIHRyYW5zZm9ybTogZnVuY3Rpb24gdHJhbnNmb3JtKHBhcnNlZFJlc3BvbnNlXykge1xuICAgICAgICB2YXIgcGFyc2VkUmVzcG9uc2UgPSBwYXJzZWRSZXNwb25zZV87XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkUmVzcG9uc2UpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBwYXJzZWRSZXNwb25zZSB0eXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmVhdHVyZXMgPSBwYXJzZWRSZXNwb25zZS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgdmFyIGF0dHJzID0gcmVzdWx0LmF0dHJzO1xuICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBvbEdlb21Qb2ludChbYXR0cnMueSwgYXR0cnMueF0pO1xuICAgICAgICAgIHZhciBiYm94ID0gcGFyc2VCYm94KGF0dHJzLmdlb21fc3RfYm94MmQpO1xuXG4gICAgICAgICAgaWYgKHRhcmdldFByb2plY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcG9pbnQudHJhbnNmb3JtKHNvdXJjZVByb2plY3Rpb24sIHRhcmdldFByb2plY3Rpb24pO1xuXG4gICAgICAgICAgICBpZiAoYmJveCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBiYm94ID0gb2xQcm9qLnRyYW5zZm9ybUV4dGVudChiYm94LCBzb3VyY2VQcm9qZWN0aW9uLCB0YXJnZXRQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhdHRycy5nZW9tZXRyeSA9IHBvaW50O1xuICAgICAgICAgIGF0dHJzLmJib3ggPSBiYm94O1xuICAgICAgICAgIHZhciBsYWJlbCA9IGF0dHJzLmxhYmVsO1xuICAgICAgICAgIGF0dHJzLmxhYmVsX25vX2h0bWwgPSByZW1vdmVIdG1sVGFncyhsYWJlbCk7XG4gICAgICAgICAgYXR0cnMubGFiZWxfc2ltcGxlID0gZXh0cmFjdE5hbWUobGFiZWwpO1xuICAgICAgICAgIHZhciBmZWF0dXJlID0gbmV3IG9sRmVhdHVyZShhdHRycyk7XG4gICAgICAgICAgZmVhdHVyZS5zZXRJZChhdHRycy5mZWF0dXJlSWQpO1xuICAgICAgICAgIHJldHVybiBmZWF0dXJlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0dW1Ub2tlbml6ZXI6IGZ1bmN0aW9uIGRhdHVtVG9rZW5pemVyKGRhdHVtKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcbiAgfTtcbiAgdmFyIGJoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMub3B0aW9ucyB8fCB7XG4gICAgZGF0dW1Ub2tlbml6ZXI6IGZ1bmN0aW9uIGRhdHVtVG9rZW5pemVyKGRhdHVtKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2VcbiAgfSk7XG4gIHZhciByZW1vdGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucy5yZW1vdGVPcHRpb25zIHx8IHt9KTtcblxuICBpZiAoYmhPcHRpb25zLnJlbW90ZSkge1xuICAgIE9iamVjdC5hc3NpZ24ocmVtb3RlT3B0aW9ucywgYmhPcHRpb25zLnJlbW90ZSk7XG4gICAgZGVsZXRlIGJoT3B0aW9ucy5yZW1vdGU7XG4gIH1cblxuICBPYmplY3QuYXNzaWduKGJsb29kaG91bmRPcHRpb25zLCBiaE9wdGlvbnMpO1xuICBPYmplY3QuYXNzaWduKGJsb29kaG91bmRPcHRpb25zLnJlbW90ZSwgcmVtb3RlT3B0aW9ucyk7XG4gIHJldHVybiBuZXcgQmxvb2Rob3VuZChibG9vZGhvdW5kT3B0aW9ucyk7XG59XG5cbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb0NyZWF0ZUxvY2F0aW9uU2VhcmNoQmxvb2Rob3VuZCcsIFtdKTtcbm1vZHVsZS52YWx1ZSgnbmdlb0NyZWF0ZUxvY2F0aW9uU2VhcmNoQmxvb2Rob3VuZCcsIGNyZWF0ZUxvY2F0aW9uU2VhcmNoQmxvb2Rob3VuZCk7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kRnVuY3Rpb24oKSB7fVxuZXhwb3J0IGRlZmF1bHQgbW9kdWxlOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9TZWFyY2hTZWFyY2hEaXJlY3RpdmUgZnJvbSAnbmdlby9zZWFyY2gvc2VhcmNoRGlyZWN0aXZlLmpzJztcbmltcG9ydCBuZ2VvU2VhcmNoQ3JlYXRlR2VvSlNPTkJsb29kaG91bmQgZnJvbSAnbmdlby9zZWFyY2gvY3JlYXRlR2VvSlNPTkJsb29kaG91bmQuanMnO1xuaW1wb3J0IG5nZW9TZWFyY2hDcmVhdGVMb2NhdGlvblNlYXJjaEJsb29kaG91bmQgZnJvbSAnbmdlby9zZWFyY2gvY3JlYXRlTG9jYXRpb25TZWFyY2hCbG9vZGhvdW5kLmpzJztcbmV4cG9ydCBkZWZhdWx0IGFuZ3VsYXIubW9kdWxlKCduZ2VvU2VhcmNoTW9kdWxlJywgW25nZW9TZWFyY2hTZWFyY2hEaXJlY3RpdmUubmFtZSwgbmdlb1NlYXJjaENyZWF0ZUdlb0pTT05CbG9vZGhvdW5kLm5hbWUsIG5nZW9TZWFyY2hDcmVhdGVMb2NhdGlvblNlYXJjaEJsb29kaG91bmQubmFtZV0pOyIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuXG5mdW5jdGlvbiBzZWFyY2hDb21wb25lbnQoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgdmFyIHR5cGVhaGVhZE9wdGlvbnNFeHByID0gYXR0cnMubmdlb1NlYXJjaDtcbiAgICAgIHZhciB0eXBlYWhlYWRPcHRpb25zID0gc2NvcGUuJGV2YWwodHlwZWFoZWFkT3B0aW9uc0V4cHIpO1xuICAgICAgdmFyIHR5cGVhaGVhZERhdGFzZXRzRXhwciA9IGF0dHJzLm5nZW9TZWFyY2hEYXRhc2V0cztcbiAgICAgIHZhciB0eXBlYWhlYWREYXRhc2V0cyA9IHNjb3BlLiRldmFsKHR5cGVhaGVhZERhdGFzZXRzRXhwcik7XG4gICAgICBlbGVtZW50LnR5cGVhaGVhZCh0eXBlYWhlYWRPcHRpb25zLCB0eXBlYWhlYWREYXRhc2V0cyk7XG4gICAgICB2YXIgdHlwZWFoZWFkTGlzdGVuZXJzRXhwciA9IGF0dHJzLm5nZW9TZWFyY2hMaXN0ZW5lcnM7XG4gICAgICB2YXIgdHlwZWFoZWFkTGlzdGVuZXJzXyA9IHNjb3BlLiRldmFsKHR5cGVhaGVhZExpc3RlbmVyc0V4cHIpO1xuICAgICAgdmFyIHR5cGVhaGVhZExpc3RlbmVycyA9IGFkYXB0TGlzdGVuZXJzXyh0eXBlYWhlYWRMaXN0ZW5lcnNfKTtcbiAgICAgIGVsZW1lbnQub24oJ3R5cGVhaGVhZDpvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHR5cGVhaGVhZExpc3RlbmVycy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6Y2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHlwZWFoZWFkTGlzdGVuZXJzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6Y3Vyc29yY2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50LCBzdWdnZXN0aW9uLCBkYXRhc2V0KSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHlwZWFoZWFkTGlzdGVuZXJzLmN1cnNvcmNoYW5nZShldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6c2VsZWN0JywgZnVuY3Rpb24gKGV2ZW50LCBzdWdnZXN0aW9uLCBkYXRhc2V0KSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHlwZWFoZWFkTGlzdGVuZXJzLnNlbGVjdChldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6YXV0b2NvbXBsZXRlJywgZnVuY3Rpb24gKGV2ZW50LCBzdWdnZXN0aW9uLCBkYXRhc2V0KSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHlwZWFoZWFkTGlzdGVuZXJzLmF1dG9jb21wbGV0ZShldmVudCwgc3VnZ2VzdGlvbiwgZGF0YXNldCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6YXN5bmNyZWNlaXZlJywgZnVuY3Rpb24gKGV2ZW50LCBkYXRhc2V0LCBxdWVyeSkge1xuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBlbXB0eSA9IGVsZW1lbnQuZGF0YSgndHQtdHlwZWFoZWFkJykubWVudS5fYWxsRGF0YXNldHNFbXB0eSgpO1xuXG4gICAgICAgICAgdHlwZWFoZWFkTGlzdGVuZXJzLmRhdGFzZXRzZW1wdHkoZXZlbnQsIHF1ZXJ5LCBlbXB0eSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6Y2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHF1ZXJ5ID0gZWxlbWVudC5kYXRhKCd0dC10eXBlYWhlYWQnKS5pbnB1dC5xdWVyeTtcbiAgICAgICAgICB0eXBlYWhlYWRMaXN0ZW5lcnMuY2hhbmdlKGV2ZW50LCBxdWVyeSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6YXN5bmNyZXF1ZXN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LnBhcmVudCgpLmFkZENsYXNzKCdzZWFyY2gtbG9hZGluZycpO1xuICAgICAgfSk7XG4gICAgICBlbGVtZW50Lm9uKCd0eXBlYWhlYWQ6YXN5bmNjYW5jZWwgdHlwZWFoZWFkOmFzeW5jcmVjZWl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnc2VhcmNoLWxvYWRpbmcnKTtcbiAgICAgICAgfSwgNTApO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBhZGFwdExpc3RlbmVyc18ob2JqZWN0KSB7XG4gIHZhciB0eXBlYWhlYWRMaXN0ZW5lcnM7XG5cbiAgaWYgKG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdHlwZWFoZWFkTGlzdGVuZXJzID0ge1xuICAgICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHt9LFxuICAgICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkge30sXG4gICAgICBjdXJzb3JjaGFuZ2U6IGZ1bmN0aW9uIGN1cnNvcmNoYW5nZSgpIHt9LFxuICAgICAgZGF0YXNldHNlbXB0eTogZnVuY3Rpb24gZGF0YXNldHNlbXB0eSgpIHt9LFxuICAgICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoKSB7fSxcbiAgICAgIGF1dG9jb21wbGV0ZTogZnVuY3Rpb24gYXV0b2NvbXBsZXRlKCkge30sXG4gICAgICBjaGFuZ2U6IGZ1bmN0aW9uIGNoYW5nZSgpIHt9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0eXBlYWhlYWRMaXN0ZW5lcnMgPSB7XG4gICAgICBvcGVuOiBvYmplY3Qub3BlbiAhPT0gdW5kZWZpbmVkID8gb2JqZWN0Lm9wZW4gOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgIGNsb3NlOiBvYmplY3QuY2xvc2UgIT09IHVuZGVmaW5lZCA/IG9iamVjdC5jbG9zZSA6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgY3Vyc29yY2hhbmdlOiBvYmplY3QuY3Vyc29yY2hhbmdlICE9PSB1bmRlZmluZWQgPyBvYmplY3QuY3Vyc29yY2hhbmdlIDogZnVuY3Rpb24gKCkge30sXG4gICAgICBkYXRhc2V0c2VtcHR5OiBvYmplY3QuZGF0YXNldHNlbXB0eSAhPT0gdW5kZWZpbmVkID8gb2JqZWN0LmRhdGFzZXRzZW1wdHkgOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgIHNlbGVjdDogb2JqZWN0LnNlbGVjdCAhPT0gdW5kZWZpbmVkID8gb2JqZWN0LnNlbGVjdCA6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgYXV0b2NvbXBsZXRlOiBvYmplY3QuYXV0b2NvbXBsZXRlICE9PSB1bmRlZmluZWQgPyBvYmplY3QuYXV0b2NvbXBsZXRlIDogZnVuY3Rpb24gKCkge30sXG4gICAgICBjaGFuZ2U6IG9iamVjdC5jaGFuZ2UgIT09IHVuZGVmaW5lZCA/IG9iamVjdC5jaGFuZ2UgOiBmdW5jdGlvbiAoKSB7fVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gdHlwZWFoZWFkTGlzdGVuZXJzO1xufVxuXG52YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ25nZW9TZWFyY2hEaXJlY3RpdmUnLCBbXSk7XG5tb2R1bGUuZGlyZWN0aXZlKCduZ2VvU2VhcmNoJywgc2VhcmNoQ29tcG9uZW50KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuaW1wb3J0IG9sU291cmNlV01UUyBmcm9tICdvbC9zb3VyY2UvV01UUy5qcyc7XG5pbXBvcnQgb2xUaWxlZ3JpZFdNVFMgZnJvbSAnb2wvdGlsZWdyaWQvV01UUy5qcyc7XG52YXIgYXNpdFZEUmVzb2x1dGlvbnMgPSBbNDAwMCwgMzc1MCwgMzUwMCwgMzI1MCwgMzAwMCwgMjc1MCwgMjUwMCwgMjI1MCwgMjAwMCwgMTc1MCwgMTUwMCwgMTI1MCwgMTAwMCwgNzUwLCA2NTAsIDUwMCwgMjUwLCAxMDAsIDUwLCAyMCwgMTAsIDUsIDIuNSwgMiwgMS41LCAxLCAwLjVdO1xudmFyIGFzaXRWRFRpbGVHcmlkID0gbmV3IG9sVGlsZWdyaWRXTVRTKHtcbiAgZXh0ZW50OiBbMjQyMDAwMCwgMTMwMDAwLCAyOTAwMDAwLCAxMzUwMDAwXSxcbiAgcmVzb2x1dGlvbnM6IGFzaXRWRFJlc29sdXRpb25zLFxuICBtYXRyaXhJZHM6IGFzaXRWRFJlc29sdXRpb25zLm1hcChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgcmV0dXJuIFwiXCIgKyBpbmRleDtcbiAgfSlcbn0pO1xuXG52YXIgX2RlZmF1bHQgPSBmdW5jdGlvbiAoX29sU291cmNlV01UUykge1xuICBfaW5oZXJpdHNMb29zZShfZGVmYXVsdCwgX29sU291cmNlV01UUyk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQob3B0aW9ucykge1xuICAgIHJldHVybiBfb2xTb3VyY2VXTVRTLmNhbGwodGhpcywge1xuICAgICAgYXR0cmlidXRpb25zOiAnZ8Opb2Rvbm7DqWVzICZjb3B5OyBFdGF0IGRlIFZhdWQgJiAmY29weTsgY29udHJpYnV0ZXVycyBPcGVuU3RyZWV0TWFwJyxcbiAgICAgIHVybDogJ2h0dHBzOi8vb3dzezEtNH0uYXNpdHZkLmNoL3dtdHMvMS4wLjAve0xheWVyfS9kZWZhdWx0L2RlZmF1bHQvMC8nICsgJzIwNTYve1RpbGVNYXRyaXh9L3tUaWxlUm93fS97VGlsZUNvbH0ucG5nJyxcbiAgICAgIHByb2plY3Rpb246ICdFUFNHOjIwNTYnLFxuICAgICAgcmVxdWVzdEVuY29kaW5nOiAnUkVTVCcsXG4gICAgICBsYXllcjogb3B0aW9ucy5sYXllcixcbiAgICAgIHN0eWxlOiAnZGVmYXVsdCcsXG4gICAgICBtYXRyaXhTZXQ6ICcyMDU2JyxcbiAgICAgIGZvcm1hdDogJ2ltYWdlL3BuZycsXG4gICAgICB0aWxlR3JpZDogYXNpdFZEVGlsZUdyaWRcbiAgICB9KSB8fCB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShvbFNvdXJjZVdNVFMpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiTG9jYXRpb25GYWN0b3J5LiRpbmplY3QgPSBbXCIkcm9vdFNjb3BlXCIsIFwiJHdpbmRvd1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZW5jb2RlUXVlcnlTdHJpbmcsIGRlY29kZVF1ZXJ5U3RyaW5nIH0gZnJvbSAnbmdlby91dGlscy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gU3RhdGVtYW5hZ2VyTG9jYXRpb24obG9jYXRpb24sIGhpc3RvcnkpIHtcbiAgdGhpcy5oaXN0b3J5XyA9IGhpc3Rvcnk7XG4gIHRoaXMuc2NoZW1hXyA9IGxvY2F0aW9uLnByb3RvY29sLnN1YnN0cmluZygwLCBsb2NhdGlvbi5wcm90b2NvbC5sZW5ndGggLSAxKTtcbiAgdGhpcy5kb21haW5fID0gbG9jYXRpb24uaG9zdG5hbWU7XG4gIHRoaXMucG9ydF8gPSBsb2NhdGlvbi5wb3J0ID8gcGFyc2VJbnQobG9jYXRpb24ucG9ydCwgMTApIDogdW5kZWZpbmVkO1xuICB0aGlzLnBhdGhfID0gbG9jYXRpb24ucGF0aG5hbWU7XG4gIHRoaXMucXVlcnlEYXRhXyA9IGRlY29kZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XG4gIHRoaXMuZnJhZ21lbnRfID0gZGVjb2RlUXVlcnlTdHJpbmcobG9jYXRpb24uaGFzaCk7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VTdGF0ZShoaXN0b3J5LCBzdGF0ZSkge1xuICB0cnkge1xuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsICcnLCBzdGF0ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7fVxufVxuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucGF0aF87XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0VXJpU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3V0ID0gW107XG5cbiAgaWYgKHRoaXMuc2NoZW1hXykge1xuICAgIG91dC5wdXNoKHRoaXMuc2NoZW1hXywgJzonKTtcbiAgfVxuXG4gIGlmICh0aGlzLmRvbWFpbl8gfHwgdGhpcy5zY2hlbWFfID09PSAnZmlsZScpIHtcbiAgICBvdXQucHVzaCgnLy8nKTtcbiAgICBvdXQucHVzaCh0aGlzLmRvbWFpbl8pO1xuXG4gICAgaWYgKHRoaXMucG9ydF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgb3V0LnB1c2goJzonLCBTdHJpbmcodGhpcy5wb3J0XykpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLnBhdGhfKSB7XG4gICAgaWYgKHRoaXMuZG9tYWluXyAmJiAhdGhpcy5wYXRoXy5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIG91dC5wdXNoKCcvJyk7XG4gICAgfVxuXG4gICAgb3V0LnB1c2godGhpcy5wYXRoXyk7XG4gIH1cblxuICB2YXIgZW5jb2RlZFF1ZXJ5RGF0YSA9IGVuY29kZVF1ZXJ5U3RyaW5nKHRoaXMucXVlcnlEYXRhXyk7XG5cbiAgaWYgKGVuY29kZWRRdWVyeURhdGEubGVuZ3RoID4gMCkge1xuICAgIG91dC5wdXNoKCc/JywgZW5jb2RlZFF1ZXJ5RGF0YSk7XG4gIH1cblxuICB2YXIgZW5jb2RlZEZyYWdtZW50ID0gZW5jb2RlUXVlcnlTdHJpbmcodGhpcy5mcmFnbWVudF8pO1xuXG4gIGlmIChlbmNvZGVkRnJhZ21lbnQubGVuZ3RoID4gMCkge1xuICAgIG91dC5wdXNoKCcjJywgZW5jb2RlZEZyYWdtZW50KTtcbiAgfVxuXG4gIHJldHVybiBvdXQuam9pbignJyk7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuaGFzUGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXkgaW4gdGhpcy5xdWVyeURhdGFfO1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmhhc0ZyYWdtZW50UGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiBrZXkgaW4gdGhpcy5mcmFnbWVudF87XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHJldHVybiB0aGlzLnF1ZXJ5RGF0YV9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5nZXRGcmFnbWVudFBhcmFtID0gZnVuY3Rpb24gKGtleSkge1xuICByZXR1cm4gdGhpcy5mcmFnbWVudF9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5nZXRQYXJhbUFzSW50ID0gZnVuY3Rpb24gKGtleSkge1xuICB2YXIgdmFsdWUgPSB0aGlzLmdldFBhcmFtKGtleSk7XG5cbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc29sZS5hc3NlcnQodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKTtcbiAgdmFyIHZhbHVlQXNJbnQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICByZXR1cm4gaXNOYU4odmFsdWVBc0ludCkgPyB1bmRlZmluZWQgOiB2YWx1ZUFzSW50O1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmdldFBhcmFtQXNGbG9hdCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgdmFyIHZhbHVlID0gdGhpcy5nZXRQYXJhbShrZXkpO1xuXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbnNvbGUuYXNzZXJ0KHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyk7XG4gIHZhciB2YWx1ZUFzRmxvYXQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgcmV0dXJuIGlzTmFOKHZhbHVlQXNGbG9hdCkgPyB1bmRlZmluZWQgOiB2YWx1ZUFzRmxvYXQ7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0RnJhZ21lbnRQYXJhbUFzSW50ID0gZnVuY3Rpb24gKGtleSkge1xuICB2YXIgdmFsdWUgPSB0aGlzLmdldEZyYWdtZW50UGFyYW0oa2V5KTtcblxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydCh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpO1xuICB2YXIgdmFsdWVBc0ludCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIHJldHVybiBpc05hTih2YWx1ZUFzSW50KSA/IHVuZGVmaW5lZCA6IHZhbHVlQXNJbnQ7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGFyYW1LZXlzID0gZnVuY3Rpb24gKCkge1xuICB2YXIga2V5cyA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiB0aGlzLnF1ZXJ5RGF0YV8pIHtcbiAgICBrZXlzLnB1c2goa2V5KTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmdldEZyYWdtZW50UGFyYW1LZXlzID0gZnVuY3Rpb24gKCkge1xuICB2YXIga2V5cyA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiB0aGlzLmZyYWdtZW50Xykge1xuICAgIGtleXMucHVzaChrZXkpO1xuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZ2V0UGFyYW1LZXlzV2l0aFByZWZpeCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5xdWVyeURhdGFfKSB7XG4gICAgaWYgKGtleS5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLmdldEZyYWdtZW50UGFyYW1LZXlzV2l0aFByZWZpeCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5mcmFnbWVudF8pIHtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUudXBkYXRlUGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgdGhpcy5xdWVyeURhdGFfW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgfVxufTtcblxuU3RhdGVtYW5hZ2VyTG9jYXRpb24ucHJvdG90eXBlLnVwZGF0ZUZyYWdtZW50UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgdGhpcy5mcmFnbWVudF9ba2V5XSA9IHBhcmFtc1trZXldO1xuICB9XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuZGVsZXRlUGFyYW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gIGRlbGV0ZSB0aGlzLnF1ZXJ5RGF0YV9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5kZWxldGVGcmFnbWVudFBhcmFtID0gZnVuY3Rpb24gKGtleSkge1xuICBkZWxldGUgdGhpcy5mcmFnbWVudF9ba2V5XTtcbn07XG5cblN0YXRlbWFuYWdlckxvY2F0aW9uLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICByZXBsYWNlU3RhdGUodGhpcy5oaXN0b3J5XywgdGhpcy5nZXRVcmlTdHJpbmcoKSk7XG59O1xuXG5TdGF0ZW1hbmFnZXJMb2NhdGlvbi5wcm90b3R5cGUuc2V0UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIHRoaXMucGF0aF8gPSBwYXRoO1xufTtcblxuZnVuY3Rpb24gTG9jYXRpb25GYWN0b3J5KCRyb290U2NvcGUsICR3aW5kb3cpIHtcbiAgdmFyIGhpc3RvcnkgPSAkd2luZG93Lmhpc3Rvcnk7XG4gIHZhciBzZXJ2aWNlID0gbmV3IFN0YXRlbWFuYWdlckxvY2F0aW9uKCR3aW5kb3cubG9jYXRpb24sICR3aW5kb3cuaGlzdG9yeSk7XG4gIHZhciBsYXN0VXJpID0gc2VydmljZS5nZXRVcmlTdHJpbmcoKTtcbiAgJHJvb3RTY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXdVcmkgPSBzZXJ2aWNlLmdldFVyaVN0cmluZygpO1xuXG4gICAgaWYgKGxhc3RVcmkgIT09IG5ld1VyaSkge1xuICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGFzdFVyaSA9IG5ld1VyaTtcblxuICAgICAgICBpZiAoaGlzdG9yeSAhPT0gdW5kZWZpbmVkICYmIGhpc3RvcnkucmVwbGFjZVN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXBsYWNlU3RhdGUoaGlzdG9yeSwgbmV3VXJpKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdlb0xvY2F0aW9uQ2hhbmdlJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc2VydmljZTtcbn1cblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvTG9jYXRpb24nLCBbXSk7XG5tb2R1bGUuZmFjdG9yeSgnbmdlb0xvY2F0aW9uJywgTG9jYXRpb25GYWN0b3J5KTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IG5nZW9TdGF0ZW1hbmFnZXJMb2NhdGlvbiBmcm9tICduZ2VvL3N0YXRlbWFuYWdlci9Mb2NhdGlvbi5qcyc7XG5leHBvcnQgdmFyIFN0YXRlbWFuYWdlclNlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gIFN0YXRlbWFuYWdlclNlcnZpY2UuJGluamVjdCA9IFtcIm5nZW9Mb2NhdGlvblwiLCBcIm5nZW9Vc2VkS2V5UmVnZXhwXCJdO1xuXG4gIGZ1bmN0aW9uIFN0YXRlbWFuYWdlclNlcnZpY2Uobmdlb0xvY2F0aW9uLCBuZ2VvVXNlZEtleVJlZ2V4cCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IHt9O1xuICAgIHRoaXMubmdlb0xvY2F0aW9uID0gbmdlb0xvY2F0aW9uO1xuICAgIHRoaXMudXNlZEtleVJlZ2V4cCA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShuZ2VvVXNlZEtleVJlZ2V4cCksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgcmVnID0gX3N0ZXAudmFsdWU7XG4gICAgICB0aGlzLnVzZWRLZXlSZWdleHAucHVzaChSZWdFeHAocmVnKSk7XG4gICAgfVxuXG4gICAgdGhpcy51c2VMb2NhbFN0b3JhZ2VfID0gZmFsc2U7XG4gICAgdGhpcy5zZXRVc2VMb2NhbFN0b3JhZ2UoZmFsc2UpO1xuICAgIHZhciBwYXJhbUtleXMgPSBuZ2VvTG9jYXRpb24uZ2V0UGFyYW1LZXlzKCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkgIT0gJ2RlYnVnJyAmJiBrZXkgIT0gJ25vX3JlZGlyZWN0JztcbiAgICB9KTtcblxuICAgIGlmIChwYXJhbUtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAodGhpcy51c2VMb2NhbFN0b3JhZ2VfKSB7XG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGtleSkge1xuICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGtleSk7XG5cbiAgICAgICAgICBfdGhpcy51c2VkS2V5UmVnZXhwLnNvbWUoZnVuY3Rpb24gKGtleVJlZ2V4cCkge1xuICAgICAgICAgICAgaWYgKGtleS5tYXRjaChrZXlSZWdleHApKSB7XG4gICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2Vba2V5XTtcblxuICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCB8fCB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxTdGF0ZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5pdGlhbFN0YXRlW2tleV0gPSAnJztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICBfbG9vcChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFtS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgX3RoaXMudXNlZEtleVJlZ2V4cC5zb21lKGZ1bmN0aW9uIChrZXlSZWdleHApIHtcbiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKGtleVJlZ2V4cCkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IF90aGlzLm5nZW9Mb2NhdGlvbi5nZXRQYXJhbShrZXkpO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBfdGhpcy5pbml0aWFsU3RhdGVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIF9wcm90byA9IFN0YXRlbWFuYWdlclNlcnZpY2UucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXRVc2VMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiBzZXRVc2VMb2NhbFN0b3JhZ2UodmFsdWUpIHtcbiAgICB0aGlzLnVzZUxvY2FsU3RvcmFnZV8gPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnVzZUxvY2FsU3RvcmFnZV8pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICgnbG9jYWxTdG9yYWdlJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlWyd0ZXN0J10gPSAnJztcbiAgICAgICAgICBkZWxldGUgd2luZG93LmxvY2FsU3RvcmFnZVsndGVzdCddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudXNlTG9jYWxTdG9yYWdlXyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVzZUxvY2FsU3RvcmFnZV8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy51c2VMb2NhbFN0b3JhZ2VfO1xuICB9O1xuXG4gIF9wcm90by5nZXRJbml0aWFsU3RyaW5nVmFsdWUgPSBmdW5jdGlvbiBnZXRJbml0aWFsU3RyaW5nVmFsdWUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuaW5pdGlhbFN0YXRlW2tleV07XG4gIH07XG5cbiAgX3Byb3RvLmdldEluaXRpYWxOdW1iZXJWYWx1ZSA9IGZ1bmN0aW9uIGdldEluaXRpYWxOdW1iZXJWYWx1ZShrZXkpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmluaXRpYWxTdGF0ZVtrZXldO1xuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICB9O1xuXG4gIF9wcm90by5nZXRJbml0aWFsQm9vbGVhblZhbHVlID0gZnVuY3Rpb24gZ2V0SW5pdGlhbEJvb2xlYW5WYWx1ZShrZXkpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmluaXRpYWxTdGF0ZVtrZXldO1xuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZSc7XG4gIH07XG5cbiAgX3Byb3RvLnVwZGF0ZVN0YXRlID0gZnVuY3Rpb24gdXBkYXRlU3RhdGUob2JqZWN0KSB7XG4gICAgdGhpcy5uZ2VvTG9jYXRpb24udXBkYXRlUGFyYW1zKG9iamVjdCk7XG5cbiAgICBpZiAodGhpcy51c2VMb2NhbFN0b3JhZ2VfKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KGtleSk7XG4gICAgICAgIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldO1xuICAgICAgICBjb25zb2xlLmFzc2VydCh2YWx1ZSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5kZWxldGVQYXJhbSA9IGZ1bmN0aW9uIGRlbGV0ZVBhcmFtKGtleSkge1xuICAgIHRoaXMubmdlb0xvY2F0aW9uLmRlbGV0ZVBhcmFtKGtleSk7XG5cbiAgICBpZiAodGhpcy51c2VMb2NhbFN0b3JhZ2VfKSB7XG4gICAgICBkZWxldGUgd2luZG93LmxvY2FsU3RvcmFnZVtrZXldO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gU3RhdGVtYW5hZ2VyU2VydmljZTtcbn0oKTtcbnZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdlb1N0YXRlTWFuYWdlcicsIFtuZ2VvU3RhdGVtYW5hZ2VyTG9jYXRpb24ubmFtZV0pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9TdGF0ZU1hbmFnZXInLCBTdGF0ZW1hbmFnZXJTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJXZnNQZXJtYWxpbmtTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcIm5nZW9QZXJtYWxpbmtPZ2NzZXJ2ZXJVcmxcIiwgXCJuZ2VvUXVlcnlSZXN1bHRcIiwgXCJuZ2VvV2ZzUGVybWFsaW5rT3B0aW9uc1wiXTtcbmltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgZXh0ZW5kIGFzIGV4dGVuZEV4dGVudCwgY3JlYXRlRW1wdHkgYXMgY3JlYXRlRW1wdHlFeHRlbnQgfSBmcm9tICdvbC9leHRlbnQuanMnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBlcXVhbFRvLCBhbmQsIG9yIH0gZnJvbSAnb2wvZm9ybWF0L2ZpbHRlci5qcyc7XG5pbXBvcnQgb2xGb3JtYXRXRlMgZnJvbSAnb2wvZm9ybWF0L1dGUy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gV2ZzUGVybWFsaW5rU2VydmljZSgkaHR0cCwgbmdlb1Blcm1hbGlua09nY3NlcnZlclVybCwgbmdlb1F1ZXJ5UmVzdWx0LCBuZ2VvV2ZzUGVybWFsaW5rT3B0aW9ucykge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBvcHRpb25zID0gbmdlb1dmc1Blcm1hbGlua09wdGlvbnM7XG4gIHRoaXMudXJsXyA9IG5nZW9QZXJtYWxpbmtPZ2NzZXJ2ZXJVcmw7XG4gIHRoaXMubWF4RmVhdHVyZXNfID0gb3B0aW9ucy5tYXhGZWF0dXJlcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhGZWF0dXJlcyA6IDUwO1xuICB0aGlzLndmc1R5cGVzXyA9IHt9O1xuICBjb25zb2xlLmFzc2VydChBcnJheS5pc0FycmF5KG9wdGlvbnMud2ZzVHlwZXMpLCAnd2ZzVHlwZXMgaXMgbm90IGNvcnJlY3RseSBzZXQnKTtcbiAgb3B0aW9ucy53ZnNUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh3ZnNUeXBlKSB7XG4gICAgX3RoaXMud2ZzVHlwZXNfW3dmc1R5cGUuZmVhdHVyZVR5cGVdID0gd2ZzVHlwZTtcbiAgfSk7XG4gIHRoaXMuZGVmYXVsdEZlYXR1cmVOU18gPSBvcHRpb25zLmRlZmF1bHRGZWF0dXJlTlM7XG4gIHRoaXMuZGVmYXVsdEZlYXR1cmVQcmVmaXhfID0gb3B0aW9ucy5kZWZhdWx0RmVhdHVyZVByZWZpeDtcbiAgdGhpcy5wb2ludFJlY2VudGVyWm9vbV8gPSBvcHRpb25zLnBvaW50UmVjZW50ZXJab29tO1xuICB0aGlzLiRodHRwXyA9ICRodHRwO1xuICB0aGlzLnJlc3VsdF8gPSBuZ2VvUXVlcnlSZXN1bHQ7XG59XG5cbldmc1Blcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNsZWFyUmVzdWx0XygpO1xufTtcblxuV2ZzUGVybWFsaW5rU2VydmljZS5wcm90b3R5cGUuaXNzdWUgPSBmdW5jdGlvbiAocXVlcnlEYXRhLCBtYXAsIHpvb21MZXZlbCkge1xuICBpZiAoem9vbUxldmVsID09PSB2b2lkIDApIHtcbiAgICB6b29tTGV2ZWwgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zb2xlLmFzc2VydCh0aGlzLnVybF8sICd1cmwgaXMgbm90IHNldC4gdG8gdXNlIHRoZSB3ZnMgcGVybWFsaW5rIHNlcnZpY2UsICcgKyAnc2V0IHRoZSB2YWx1ZSBgbmdlb1dmc1Blcm1hbGlua09wdGlvbnNgJyk7XG4gIHRoaXMuY2xlYXJSZXN1bHRfKCk7XG4gIHZhciB0eXBlTmFtZSA9IHF1ZXJ5RGF0YS53ZnNUeXBlO1xuXG4gIGlmICghdGhpcy53ZnNUeXBlc18uaGFzT3duUHJvcGVydHkodHlwZU5hbWUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHdmc1R5cGUgPSB0aGlzLndmc1R5cGVzX1t0eXBlTmFtZV07XG4gIHZhciBmaWx0ZXJzID0gdGhpcy5jcmVhdGVGaWx0ZXJzXyhxdWVyeURhdGEuZmlsdGVyR3JvdXBzKTtcblxuICBpZiAoZmlsdGVycyA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuaXNzdWVSZXF1ZXN0Xyh3ZnNUeXBlLCBmaWx0ZXJzLCBtYXAsIHF1ZXJ5RGF0YS5zaG93RmVhdHVyZXMsIHpvb21MZXZlbCk7XG59O1xuXG5XZnNQZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5pc3N1ZVJlcXVlc3RfID0gZnVuY3Rpb24gKHdmc1R5cGUsIGZpbHRlciwgbWFwLCBzaG93RmVhdHVyZXMsIHpvb21MZXZlbCkge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICBpZiAoem9vbUxldmVsID09PSB2b2lkIDApIHtcbiAgICB6b29tTGV2ZWwgPSB1bmRlZmluZWQ7XG4gIH1cblxuICB2YXIgd2ZzRm9ybWF0ID0gbmV3IG9sRm9ybWF0V0ZTKCk7XG4gIHZhciBmZWF0dXJlUmVxdWVzdFhtbCA9IHdmc0Zvcm1hdC53cml0ZUdldEZlYXR1cmUoe1xuICAgIHNyc05hbWU6IG1hcC5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLmdldENvZGUoKSxcbiAgICBmZWF0dXJlTlM6IHdmc1R5cGUuZmVhdHVyZU5TICE9PSB1bmRlZmluZWQgPyB3ZnNUeXBlLmZlYXR1cmVOUyA6IHRoaXMuZGVmYXVsdEZlYXR1cmVOU18sXG4gICAgZmVhdHVyZVByZWZpeDogd2ZzVHlwZS5mZWF0dXJlUHJlZml4ICE9PSB1bmRlZmluZWQgPyB3ZnNUeXBlLmZlYXR1cmVQcmVmaXggOiB0aGlzLmRlZmF1bHRGZWF0dXJlUHJlZml4XyxcbiAgICBmZWF0dXJlVHlwZXM6IFt3ZnNUeXBlLmZlYXR1cmVUeXBlXSxcbiAgICBvdXRwdXRGb3JtYXQ6ICdHTUwzJyxcbiAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICBtYXhGZWF0dXJlczogdGhpcy5tYXhGZWF0dXJlc19cbiAgfSk7XG4gIHZhciBmZWF0dXJlUmVxdWVzdCA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZmVhdHVyZVJlcXVlc3RYbWwpO1xuICB2YXIgY29uZmlnID0ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC94bWw7IGNoYXJzZXQ9VVRGLTgnXG4gICAgfVxuICB9O1xuICB0aGlzLiRodHRwXy5wb3N0KHRoaXMudXJsXywgZmVhdHVyZVJlcXVlc3QsIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICB2YXIgZmVhdHVyZXMgPSB3ZnNGb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLmRhdGEpO1xuXG4gICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuXG4gICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIG1heFpvb20gPSB6b29tTGV2ZWwgPT09IHVuZGVmaW5lZCA/IF90aGlzMi5wb2ludFJlY2VudGVyWm9vbV8gOiB6b29tTGV2ZWw7XG4gICAgICB2YXIgcGFkZGluZyA9IFsxMCwgMTAsIDEwLCAxMF07XG4gICAgICBtYXAuZ2V0VmlldygpLmZpdChfdGhpczIuZ2V0RXh0ZW50XyhmZWF0dXJlcyksIHtcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgbWF4Wm9vbTogbWF4Wm9vbSxcbiAgICAgICAgcGFkZGluZzogcGFkZGluZ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHNob3dGZWF0dXJlcykge1xuICAgICAgdmFyIHJlc3VsdFNvdXJjZSA9IHtcbiAgICAgICAgJ2ZlYXR1cmVzJzogZmVhdHVyZXMsXG4gICAgICAgICdpZCc6IHdmc1R5cGUuZmVhdHVyZVR5cGUsXG4gICAgICAgICdpZGVudGlmaWVyQXR0cmlidXRlRmllbGQnOiB3ZnNUeXBlLmxhYmVsLFxuICAgICAgICAnbGFiZWwnOiB3ZnNUeXBlLmZlYXR1cmVUeXBlLFxuICAgICAgICAncGVuZGluZyc6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBfdGhpczIucmVzdWx0Xy5zb3VyY2VzLnB1c2gocmVzdWx0U291cmNlKTtcblxuICAgICAgX3RoaXMyLnJlc3VsdF8udG90YWwgPSBmZWF0dXJlcy5sZW5ndGg7XG4gICAgfVxuICB9KTtcbn07XG5cbldmc1Blcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmdldEV4dGVudF8gPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgcmV0dXJuIGZlYXR1cmVzLnJlZHVjZShmdW5jdGlvbiAoZXh0ZW50LCBmZWF0dXJlKSB7XG4gICAgaWYgKGZlYXR1cmUgaW5zdGFuY2VvZiBGZWF0dXJlKSB7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG5cbiAgICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgICByZXR1cm4gZXh0ZW5kRXh0ZW50KGV4dGVudCwgZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgfSwgY3JlYXRlRW1wdHlFeHRlbnQoKSk7XG59O1xuXG5XZnNQZXJtYWxpbmtTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVGaWx0ZXJzXyA9IGZ1bmN0aW9uIChmaWx0ZXJHcm91cHMpIHtcbiAgaWYgKGZpbHRlckdyb3Vwcy5sZW5ndGggPT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGNyZWF0ZUZpbHRlcnNGb3JHcm91cCA9IGZ1bmN0aW9uIGNyZWF0ZUZpbHRlcnNGb3JHcm91cChmaWx0ZXJHcm91cCkge1xuICAgIHZhciBmaWx0ZXJzID0gZmlsdGVyR3JvdXAuZmlsdGVycy5tYXAoZnVuY3Rpb24gKGZpbHRlckRlZikge1xuICAgICAgdmFyIGNvbmRpdGlvbiA9IGZpbHRlckRlZi5jb25kaXRpb247XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmRpdGlvbikpIHtcbiAgICAgICAgcmV0dXJuIFdmc1Blcm1hbGlua1NlcnZpY2Uub3JfKGNvbmRpdGlvbi5tYXAoZnVuY3Rpb24gKGNvbmQpIHtcbiAgICAgICAgICByZXR1cm4gZXF1YWxUbyhmaWx0ZXJEZWYucHJvcGVydHksIGNvbmQpO1xuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZXF1YWxUbyhmaWx0ZXJEZWYucHJvcGVydHksIGNvbmRpdGlvbik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFdmc1Blcm1hbGlua1NlcnZpY2UuYW5kXyhmaWx0ZXJzKTtcbiAgfTtcblxuICB2YXIgZmlsdGVycyA9IGZpbHRlckdyb3Vwcy5tYXAoY3JlYXRlRmlsdGVyc0Zvckdyb3VwKTtcblxuICBpZiAoZmlsdGVycykge1xuICAgIHJldHVybiBXZnNQZXJtYWxpbmtTZXJ2aWNlLm9yXyhmaWx0ZXJzKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuV2ZzUGVybWFsaW5rU2VydmljZS5hbmRfID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcbiAgcmV0dXJuIFdmc1Blcm1hbGlua1NlcnZpY2Uuam9pbkZpbHRlcnNfKGZpbHRlcnMsIGFuZCk7XG59O1xuXG5XZnNQZXJtYWxpbmtTZXJ2aWNlLm9yXyA9IGZ1bmN0aW9uIChmaWx0ZXJzKSB7XG4gIHJldHVybiBXZnNQZXJtYWxpbmtTZXJ2aWNlLmpvaW5GaWx0ZXJzXyhmaWx0ZXJzLCBvcik7XG59O1xuXG5XZnNQZXJtYWxpbmtTZXJ2aWNlLmpvaW5GaWx0ZXJzXyA9IGZ1bmN0aW9uIChmaWx0ZXJzLCBqb2luRm4pIHtcbiAgcmV0dXJuIGZpbHRlcnMucmVkdWNlKGZ1bmN0aW9uIChjb21iaW5lZEZpbHRlcnMsIGN1cnJlbnRGaWx0ZXIpIHtcbiAgICBpZiAoY29tYmluZWRGaWx0ZXJzID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gY3VycmVudEZpbHRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5hc3NlcnQoY3VycmVudEZpbHRlciAhPT0gbnVsbCk7XG4gICAgICByZXR1cm4gam9pbkZuKGNvbWJpbmVkRmlsdGVycywgY3VycmVudEZpbHRlcik7XG4gICAgfVxuICB9KTtcbn07XG5cbldmc1Blcm1hbGlua1NlcnZpY2UucHJvdG90eXBlLmNsZWFyUmVzdWx0XyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5yZXN1bHRfLnRvdGFsID0gMDtcbiAgdGhpcy5yZXN1bHRfLnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgc291cmNlLmZlYXR1cmVzLmxlbmd0aCA9IDA7XG4gIH0pO1xufTtcblxudmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCduZ2VvV2ZzUGVybWFsaW5rJywgW10pO1xubW9kdWxlLnNlcnZpY2UoJ25nZW9XZnNQZXJtYWxpbmsnLCBXZnNQZXJtYWxpbmtTZXJ2aWNlKTtcbmV4cG9ydCBkZWZhdWx0IG1vZHVsZTsiLCJpbXBvcnQgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbmltcG9ydCBuZ2VvU3RhdGVtYW5hZ2VyTG9jYXRpb24gZnJvbSAnbmdlby9zdGF0ZW1hbmFnZXIvTG9jYXRpb24uanMnO1xuaW1wb3J0IG5nZW9TdGF0ZW1hbmFnZXJTZXJ2aWNlIGZyb20gJ25nZW8vc3RhdGVtYW5hZ2VyL1NlcnZpY2UuanMnO1xuZXhwb3J0IGRlZmF1bHQgYW5ndWxhci5tb2R1bGUoJ25nZW9TdGF0ZW1hbmFnZXJNb2R1bGUnLCBbbmdlb1N0YXRlbWFuYWdlckxvY2F0aW9uLm5hbWUsIG5nZW9TdGF0ZW1hbmFnZXJTZXJ2aWNlLm5hbWVdKTsiLCJmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdDsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpOyByZXR1cm4gaXQubmV4dC5iaW5kKGl0KTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmltcG9ydCB7IG5vTW9kaWZpZXJLZXlzLCBzaW5nbGVDbGljayB9IGZyb20gJ29sL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IG9sR2VvbUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21NdWx0aVBvaW50IGZyb20gJ29sL2dlb20vTXVsdGlQb2ludC5qcyc7XG5pbXBvcnQgb2xHZW9tTXVsdGlMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzJztcbmltcG9ydCBvbEdlb21NdWx0aVBvbHlnb24gZnJvbSAnb2wvZ2VvbS9NdWx0aVBvbHlnb24uanMnO1xuaW1wb3J0IG9sR2VvbVBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQuanMnO1xuaW1wb3J0IG9sR2VvbVBvbHlnb24gZnJvbSAnb2wvZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCB7IGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCB9IGZyb20gJ29sL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBNQUMgfSBmcm9tICdvbC9oYXMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXZlbnRVc2luQ3RybEtleShldnQpIHtcbiAgaWYgKCFldnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gKE1BQyA/IGV2dC5tZXRhS2V5IDogZXZ0LmN0cmxLZXkpIHx8IGV2dC5rZXkgPT09ICdDb250cm9sJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYXRmb3JtTW9kaWZpZXJLZXlPbmx5KGV2dCkge1xuICByZXR1cm4gIWV2dC5hbHRLZXkgJiYgaXNFdmVudFVzaW5DdHJsS2V5KGV2dCkgJiYgIWV2dC5zaGlmdEtleTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NoaWZ0S2V5T25seShldnQpIHtcbiAgcmV0dXJuICFldnQuYWx0S2V5ICYmICFpc0V2ZW50VXNpbkN0cmxLZXkoZXZ0KSAmJiBldnQuc2hpZnRLZXk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQ29hcnNlUG9pbnRpbmdEZXZpY2UoKSB7XG4gIHJldHVybiBtYXRjaE1lZGlhKCcocG9pbnRlcjogY29hcnNlKScpLm1hdGNoZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJvd3Nlckxhbmd1YWdlKGF2YWlsYWJsZUxhbmd1YWdlcykge1xuICB2YXIgYnJvd3Nlckxhbmd1YWdlcyA9IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2VzIHx8IFt3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlXTtcbiAgYnJvd3Nlckxhbmd1YWdlcyA9IGJyb3dzZXJMYW5ndWFnZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0uc3Vic3RyaW5nKDAsIDIpO1xuICB9KTtcbiAgYnJvd3Nlckxhbmd1YWdlcyA9IGJyb3dzZXJMYW5ndWFnZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtLCBpbmRleCwgYXJyKSB7XG4gICAgcmV0dXJuIGFyci5pbmRleE9mKGl0ZW0pID09IGluZGV4O1xuICB9KTtcbiAgdmFyIHN1cHBvcnRlZExhbmd1YWdlcyA9IGJyb3dzZXJMYW5ndWFnZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGF2YWlsYWJsZUxhbmd1YWdlcy5pbmNsdWRlcyhpdGVtKTtcbiAgfSk7XG4gIHJldHVybiBzdXBwb3J0ZWRMYW5ndWFnZXNbMF07XG59XG5leHBvcnQgZnVuY3Rpb24gdG9NdWx0aShnZW9tZXRyeSkge1xuICB2YXIgbXVsdGlHZW9tO1xuXG4gIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvaW50KSB7XG4gICAgdmFyIG11bHRpR2VvbVBvaW50ID0gbmV3IG9sR2VvbU11bHRpUG9pbnQoW10pO1xuICAgIG11bHRpR2VvbVBvaW50LmFwcGVuZFBvaW50KGdlb21ldHJ5KTtcbiAgICBtdWx0aUdlb20gPSBtdWx0aUdlb21Qb2ludDtcbiAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbUxpbmVTdHJpbmcpIHtcbiAgICB2YXIgbXVsdGlHZW9tTGluZSA9IG5ldyBvbEdlb21NdWx0aUxpbmVTdHJpbmcoW10pO1xuICAgIG11bHRpR2VvbUxpbmUuYXBwZW5kTGluZVN0cmluZyhnZW9tZXRyeSk7XG4gICAgbXVsdGlHZW9tID0gbXVsdGlHZW9tTGluZTtcbiAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIG9sR2VvbVBvbHlnb24pIHtcbiAgICB2YXIgbXVsdGlHZW9tUG9seWdvbiA9IG5ldyBvbEdlb21NdWx0aVBvbHlnb24oW10pO1xuICAgIG11bHRpR2VvbVBvbHlnb24uYXBwZW5kUG9seWdvbihnZW9tZXRyeSk7XG4gICAgbXVsdGlHZW9tID0gbXVsdGlHZW9tUG9seWdvbjtcbiAgfSBlbHNlIHtcbiAgICBtdWx0aUdlb20gPSBnZW9tZXRyeTtcbiAgfVxuXG4gIHJldHVybiBtdWx0aUdlb207XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJiAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29sb3JaZXJvUGFkZGluZyhoZXgpIHtcbiAgcmV0dXJuIGhleC5sZW5ndGggPT0gMSA/IFwiMFwiICsgaGV4IDogaGV4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJnYkFycmF5VG9IZXgocmdiKSB7XG4gIHZhciByID0gcmdiWzBdO1xuICB2YXIgZyA9IHJnYlsxXTtcbiAgdmFyIGIgPSByZ2JbMl07XG5cbiAgaWYgKHIgIT0gKHIgJiAyNTUpIHx8IGcgIT0gKGcgJiAyNTUpIHx8IGIgIT0gKGIgJiAyNTUpKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJcXFwiKFwiICsgciArIFwiLFwiICsgZyArIFwiLFwiICsgYiArIFwiKVxcXCIgaXMgbm90IGEgdmFsaWQgUkdCIGNvbG9yXCIpO1xuICB9XG5cbiAgdmFyIGhleFIgPSBjb2xvclplcm9QYWRkaW5nKHIudG9TdHJpbmcoMTYpKTtcbiAgdmFyIGhleEcgPSBjb2xvclplcm9QYWRkaW5nKGcudG9TdHJpbmcoMTYpKTtcbiAgdmFyIGhleEIgPSBjb2xvclplcm9QYWRkaW5nKGIudG9TdHJpbmcoMTYpKTtcbiAgcmV0dXJuIFwiI1wiICsgaGV4UiArIGhleEcgKyBoZXhCO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKSB7XG4gIHZhciBxdWVyeURhdGEgPSB7fTtcblxuICBpZiAocXVlcnlTdHJpbmcpIHtcbiAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKTtcblxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UocGFpcnMpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgdmFyIHBhaXIgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHZhciBpbmRleE9mRXF1YWxzID0gcGFpci5pbmRleE9mKCc9Jyk7XG5cbiAgICAgIGlmIChpbmRleE9mRXF1YWxzID49IDApIHtcbiAgICAgICAgdmFyIG5hbWUgPSBwYWlyLnN1YnN0cmluZygwLCBpbmRleE9mRXF1YWxzKTtcbiAgICAgICAgdmFyIHZhbHVlID0gcGFpci5zdWJzdHJpbmcoaW5kZXhPZkVxdWFscyArIDEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcXVlcnlEYXRhW2RlY29kZVVSSUNvbXBvbmVudChuYW1lKV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNYWxmb3JtZWQgcGFyYW1ldGVyOiBcIiArIG5hbWUgKyBcIj1cIiArIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnlEYXRhW3BhaXJdID0gJyc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHF1ZXJ5RGF0YTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVRdWVyeVN0cmluZyhxdWVyeURhdGEpIHtcbiAgdmFyIHF1ZXJ5SXRlbSA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiBxdWVyeURhdGEpIHtcbiAgICB2YXIgdmFsdWUgPSBxdWVyeURhdGFba2V5XTtcbiAgICBxdWVyeUl0ZW0ucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG4gIH1cblxuICByZXR1cm4gcXVlcnlJdGVtLmpvaW4oJyYnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDb25kaXRpb24oZXZlbnQpIHtcbiAgcmV0dXJuIG5vTW9kaWZpZXJLZXlzKGV2ZW50KSAmJiBzaW5nbGVDbGljayhldmVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0ZW50VG9SZWN0YW5nbGUoZXh0ZW50KSB7XG4gIHZhciByZXN1bHQgPSBbZ2V0VG9wTGVmdChleHRlbnQpLCBnZXRUb3BSaWdodChleHRlbnQpLCBnZXRCb3R0b21SaWdodChleHRlbnQpLCBnZXRCb3R0b21MZWZ0KGV4dGVudCksIGdldFRvcExlZnQoZXh0ZW50KV07XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZHBpKCkge1xuICByZXR1cm4gOTY7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSxXQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0EsV0FJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlnR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2NkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDckdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzVDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN6RkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0R0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvSEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1SkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN4RUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM5REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDekRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0RBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0RBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0RkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3RIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3SUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9EQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN0SUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcEVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2RUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9HQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2RUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzVIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdkRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BOQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNwRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcEVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNyRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM5REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0hBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2S0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2REE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvSkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdExBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9DQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvRkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDMUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDOUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbERBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0dBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0ZBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDN0ZBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMzbkpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM3UUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1U0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDampDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzVjQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM1NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbktBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2pDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzNWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3hiQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN6TUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0xBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcERBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDckJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDVkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDdklBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1ZBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ25IQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzdJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN4REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1BBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDaENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3REQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDeEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNqS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5RkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNkQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDN2lCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDaG9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1QkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeEJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1RBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxTEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNuTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2S0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDRkE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztBQ0FBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbk5BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3pYQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3RFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDckZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzNMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDaEtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDclZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNsVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUMvUEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN4TEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUMvUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ25CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeklBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1WUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNQQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDakRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2SUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDekNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdERBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2xGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDaEhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMzRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQy9CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdm9DQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2pHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDMUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM0dBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN6RUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdkdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ25KQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUN2Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDakNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN4R0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNmQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM5Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNyVEE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzNoQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3ZXQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2YkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNIQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0ZBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDM05BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDSkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDeklBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3h2QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDdFBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMxQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2ZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNySEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3JJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDN0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUN2REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbEhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzlGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2hDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2xOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ0hBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBIiwic291cmNlUm9vdCI6IiJ9